var $ae=o=>{throw TypeError(o)};var yle=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports);var Yse=(o,e,s)=>e.has(o)||$ae("Cannot "+s);var Go=(o,e,s)=>(Yse(o,e,"read from private field"),s?s.call(o):e.get(o)),lu=(o,e,s)=>e.has(o)?$ae("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,s),ga=(o,e,s,a)=>(Yse(o,e,"write to private field"),a?a.call(o,s):e.set(o,s),s),Mu=(o,e,s)=>(Yse(o,e,"access private method"),s);var HZ=(o,e,s,a)=>({set _(d){ga(o,e,d,s)},get _(){return Go(o,e,a)}});var ble=yle(exports=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))a(d);new MutationObserver(d=>{for(const b of d)if(b.type==="childList")for(const _ of b.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&a(_)}).observe(document,{childList:!0,subtree:!0});function s(d){const b={};return d.integrity&&(b.integrity=d.integrity),d.referrerPolicy&&(b.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?b.credentials="include":d.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function a(d){if(d.ep)return;d.ep=!0;const b=s(d);fetch(d.href,b)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$2(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$2(o){return o===null||typeof o!="object"?null:(o=z$1&&o[z$1]||o["@@iterator"],typeof o=="function"?o:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(o,e,s){this.props=o,this.context=e,this.refs=D$1,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(o,e){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,e,"setState")};E$1.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(o,e,s){this.props=o,this.context=e,this.refs=D$1,this.updater=s||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$2=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(o,e,s){var a,d={},b=null,_=null;if(e!=null)for(a in e.ref!==void 0&&(_=e.ref),e.key!==void 0&&(b=""+e.key),e)J.call(e,a)&&!L$1.hasOwnProperty(a)&&(d[a]=e[a]);var _e=arguments.length-2;if(_e===1)d.children=s;else if(1<_e){for(var nt=Array(_e),rt=0;rt<_e;rt++)nt[rt]=arguments[rt+2];d.children=nt}if(o&&o.defaultProps)for(a in _e=o.defaultProps,_e)d[a]===void 0&&(d[a]=_e[a]);return{$$typeof:l$1,type:o,key:b,ref:_,props:d,_owner:K$1.current}}function N$1(o,e){return{$$typeof:l$1,type:o.type,key:e,ref:o.ref,props:o.props,_owner:o._owner}}function O$2(o){return typeof o=="object"&&o!==null&&o.$$typeof===l$1}function escape$1(o){var e={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(s){return e[s]})}var P$1=/\/+/g;function Q$1(o,e){return typeof o=="object"&&o!==null&&o.key!=null?escape$1(""+o.key):e.toString(36)}function R$1(o,e,s,a,d){var b=typeof o;(b==="undefined"||b==="boolean")&&(o=null);var _=!1;if(o===null)_=!0;else switch(b){case"string":case"number":_=!0;break;case"object":switch(o.$$typeof){case l$1:case n$1:_=!0}}if(_)return _=o,d=d(_),o=a===""?"."+Q$1(_,0):a,I$2(d)?(s="",o!=null&&(s=o.replace(P$1,"$&/")+"/"),R$1(d,e,s,"",function(rt){return rt})):d!=null&&(O$2(d)&&(d=N$1(d,s+(!d.key||_&&_.key===d.key?"":(""+d.key).replace(P$1,"$&/")+"/")+o)),e.push(d)),1;if(_=0,a=a===""?".":a+":",I$2(o))for(var _e=0;_e<o.length;_e++){b=o[_e];var nt=a+Q$1(b,_e);_+=R$1(b,e,s,nt,d)}else if(nt=A$2(o),typeof nt=="function")for(o=nt.call(o),_e=0;!(b=o.next()).done;)b=b.value,nt=a+Q$1(b,_e++),_+=R$1(b,e,s,nt,d);else if(b==="object")throw e=String(o),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return _}function S$1(o,e,s){if(o==null)return o;var a=[],d=0;return R$1(o,a,"","",function(b){return e.call(s,b,d++)}),a}function T$1(o){if(o._status===-1){var e=o._result;e=e(),e.then(function(s){(o._status===0||o._status===-1)&&(o._status=1,o._result=s)},function(s){(o._status===0||o._status===-1)&&(o._status=2,o._result=s)}),o._status===-1&&(o._status=0,o._result=e)}if(o._status===1)return o._result.default;throw o._result}var U$1={current:null},V$2={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(o,e,s){S$1(o,function(){e.apply(this,arguments)},s)},count:function(o){var e=0;return S$1(o,function(){e++}),e},toArray:function(o){return S$1(o,function(e){return e})||[]},only:function(o){if(!O$2(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(o,e,s){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var a=C$1({},o.props),d=o.key,b=o.ref,_=o._owner;if(e!=null){if(e.ref!==void 0&&(b=e.ref,_=K$1.current),e.key!==void 0&&(d=""+e.key),o.type&&o.type.defaultProps)var _e=o.type.defaultProps;for(nt in e)J.call(e,nt)&&!L$1.hasOwnProperty(nt)&&(a[nt]=e[nt]===void 0&&_e!==void 0?_e[nt]:e[nt])}var nt=arguments.length-2;if(nt===1)a.children=s;else if(1<nt){_e=Array(nt);for(var rt=0;rt<nt;rt++)_e[rt]=arguments[rt+2];a.children=_e}return{$$typeof:l$1,type:o.type,key:d,ref:b,props:a,_owner:_}};react_production_min.createContext=function(o){return o={$$typeof:u,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:t,_context:o},o.Consumer=o};react_production_min.createElement=M$2;react_production_min.createFactory=function(o){var e=M$2.bind(null,o);return e.type=o,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(o){return{$$typeof:v$1,render:o}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(o){return{$$typeof:y,_payload:{_status:-1,_result:o},_init:T$1}};react_production_min.memo=function(o,e){return{$$typeof:x,type:o,compare:e===void 0?null:e}};react_production_min.startTransition=function(o){var e=V$2.transition;V$2.transition={};try{o()}finally{V$2.transition=e}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(o,e){return U$1.current.useCallback(o,e)};react_production_min.useContext=function(o){return U$1.current.useContext(o)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(o){return U$1.current.useDeferredValue(o)};react_production_min.useEffect=function(o,e){return U$1.current.useEffect(o,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(o,e,s){return U$1.current.useImperativeHandle(o,e,s)};react_production_min.useInsertionEffect=function(o,e){return U$1.current.useInsertionEffect(o,e)};react_production_min.useLayoutEffect=function(o,e){return U$1.current.useLayoutEffect(o,e)};react_production_min.useMemo=function(o,e){return U$1.current.useMemo(o,e)};react_production_min.useReducer=function(o,e,s){return U$1.current.useReducer(o,e,s)};react_production_min.useRef=function(o){return U$1.current.useRef(o)};react_production_min.useState=function(o){return U$1.current.useState(o)};react_production_min.useSyncExternalStore=function(o,e,s){return U$1.current.useSyncExternalStore(o,e,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react$1.exports=react_production_min;var reactExports=react$1.exports;const React=getDefaultExportFromCjs$2(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(o,e,s){var a,d={},b=null,_=null;s!==void 0&&(b=""+s),e.key!==void 0&&(b=""+e.key),e.ref!==void 0&&(_=e.ref);for(a in e)m$1.call(e,a)&&!p$1.hasOwnProperty(a)&&(d[a]=e[a]);if(o&&o.defaultProps)for(a in e=o.defaultProps,e)d[a]===void 0&&(d[a]=e[a]);return{$$typeof:k,type:o,key:b,ref:_,props:d,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const scriptRel="modulepreload",assetsURL=function(o){return"/react-dsfr-playground-vite/"+o},seen={},__vitePreload=function(e,s,a){let d=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),_e=(_==null?void 0:_.nonce)||(_==null?void 0:_.getAttribute("nonce"));d=Promise.allSettled(s.map(nt=>{if(nt=assetsURL(nt),nt in seen)return;seen[nt]=!0;const rt=nt.endsWith(".css"),ct=rt?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${nt}"]${ct}`))return;const dt=document.createElement("link");if(dt.rel=rt?"stylesheet":scriptRel,rt||(dt.as="script"),dt.crossOrigin="",dt.href=nt,_e&&dt.setAttribute("nonce",_e),document.head.appendChild(dt),rt)return new Promise((pt,bt)=>{dt.addEventListener("load",pt),dt.addEventListener("error",()=>bt(new Error(`Unable to preload CSS for ${nt}`)))})}))}function b(_){const _e=new Event("vite:preloadError",{cancelable:!0});if(_e.payload=_,window.dispatchEvent(_e),!_e.defaultPrevented)throw _}return d.then(_=>{for(const _e of _||[])_e.status==="rejected"&&b(_e.reason);return e().catch(b)})},isBrowser=typeof window=="object"&&typeof document=="object",overwriteReadonlyProp=(o,e,s)=>{try{o[e]=s}catch{}if(o[e]===s)return s;let a;const d=Object.getOwnPropertyDescriptor(o,e)||{enumerable:!0,configurable:!0};if(d.get)throw new Error(`Probably a wrong ides to overwrite ${String(e)} getter`);try{Object.defineProperty(o,e,{...d,value:s})}catch(b){a=b}if(o[e]!==s)throw a||new Error("Can't assign");return s},id$1=o=>o,assertIsRefWrapper={ref:id$1(void 0)};class AssertionError extends Error{constructor(e){if(super("Wrong assertion encountered"+(e?`: "${e}"`:"")),Object.setPrototypeOf(this,new.target.prototype),!!this.stack)try{overwriteReadonlyProp(this,"stack",this.stack.split(`
`).filter((...[,s])=>s!==1&&s!==2).join(`
`))}catch{}}}function assert$1(o,e){if(arguments.length===0&&(o=!0),assertIsRefWrapper.ref!==void 0){assertIsRefWrapper.ref=void 0;return}if(!o)throw new AssertionError(e)}const errorMessage=[`Wrong usage of the ${is.name} function refer to`,`https://docs.tsafe.dev/${is.name.toLowerCase()}`].join(" ");function is(o){const e={};if(assertIsRefWrapper.ref!==void 0)throw assertIsRefWrapper.ref=void 0,new Error(errorMessage);return assertIsRefWrapper.ref=e,Promise.resolve().then(()=>{if(assertIsRefWrapper.ref===e)throw new Error(errorMessage)}),null}function createStatefulObservable(o){const e=[],{get:s,set:a}=(()=>{let d;function b(_){d=[_],e.forEach(_e=>_e(_))}return{get:()=>(d===void 0&&(b(o()),assert$1(!is())),d[0]),set:b}})();return Object.defineProperty({current:null,subscribe:d=>(e.push(d),{unsubscribe:()=>e.splice(e.indexOf(d),1)})},"current",{enumerable:!0,get:s,set:a})}function useObservable(o,e){reactExports.useEffect(()=>{const s=[];return o({registerSubscription:a=>s.push(a)}),()=>{s.forEach(a=>a.unsubscribe()),s.length=0}},e)}function useRerenderOnChange(o){const[,e]=reactExports.useState(()=>o.current);useObservable(({registerSubscription:s})=>{const a=o.subscribe(d=>e(()=>d));s(a)},[o])}function useConstCallback(o){const e=reactExports.useRef(null);return e.current=o,reactExports.useState(()=>(...s)=>e.current(...s))[0]}const colorOptions={grey:{_1000_50:{default:"var(--grey-1000-50)",hover:"var(--grey-1000-50-hover)",active:"var(--grey-1000-50-active)"},_975_75:{default:"var(--grey-975-75)",hover:"var(--grey-975-75-hover)",active:"var(--grey-975-75-active)"},_950_100:{default:"var(--grey-950-100)",hover:"var(--grey-950-100-hover)",active:"var(--grey-950-100-active)"},_200_850:{default:"var(--grey-200-850)",hover:"var(--grey-200-850-hover)",active:"var(--grey-200-850-active)"},_925_125:{default:"var(--grey-925-125)"},_1000_75:{default:"var(--grey-1000-75)",hover:"var(--grey-1000-75-hover)",active:"var(--grey-1000-75-active)"},_1000_100:{default:"var(--grey-1000-100)",hover:"var(--grey-1000-100-hover)",active:"var(--grey-1000-100-active)"},_975_100:{default:"var(--grey-975-100)",hover:"var(--grey-975-100-hover)",active:"var(--grey-975-100-active)"},_975_125:{default:"var(--grey-975-125)",hover:"var(--grey-975-125-hover)",active:"var(--grey-975-125-active)"},_950_125:{default:"var(--grey-950-125)",hover:"var(--grey-950-125-hover)",active:"var(--grey-950-125-active)"},_950_150:{default:"var(--grey-950-150)",hover:"var(--grey-950-150-hover)",active:"var(--grey-950-150-active)"},_50_1000:{default:"var(--grey-50-1000)"},_425_625:{default:"var(--grey-425-625)"},_625_425:{default:"var(--grey-625-425)"},_0_1000:{default:"var(--grey-0-1000)"},_900_175:{default:"var(--grey-900-175)"}},blueFrance:{_975_75:{default:"var(--blue-france-975-75)",hover:"var(--blue-france-975-75-hover)",active:"var(--blue-france-975-75-active)"},_950_100:{default:"var(--blue-france-950-100)",hover:"var(--blue-france-950-100-hover)",active:"var(--blue-france-950-100-active)"},sun113_625:{default:"var(--blue-france-sun-113-625)",hover:"var(--blue-france-sun-113-625-hover)",active:"var(--blue-france-sun-113-625-active)"},_925_125:{default:"var(--blue-france-925-125)",hover:"var(--blue-france-925-125-hover)",active:"var(--blue-france-925-125-active)"},_975sun113:{default:"var(--blue-france-975-sun-113)"},main525:{default:"var(--blue-france-main-525)"},_850_200:{default:"var(--blue-france-850-200)"}},redMarianne:{_975_75:{default:"var(--red-marianne-975-75)",hover:"var(--red-marianne-975-75-hover)",active:"var(--red-marianne-975-75-active)"},_950_100:{default:"var(--red-marianne-950-100)",hover:"var(--red-marianne-950-100-hover)",active:"var(--red-marianne-950-100-active)"},_425_625:{default:"var(--red-marianne-425-625)",hover:"var(--red-marianne-425-625-hover)",active:"var(--red-marianne-425-625-active)"},_925_125:{default:"var(--red-marianne-925-125)",hover:"var(--red-marianne-925-125-hover)",active:"var(--red-marianne-925-125-active)"},main472:{default:"var(--red-marianne-main-472)"},_850_200:{default:"var(--red-marianne-850-200)"}},info:{_950_100:{default:"var(--info-950-100)",hover:"var(--info-950-100-hover)",active:"var(--info-950-100-active)"},_425_625:{default:"var(--info-425-625)",hover:"var(--info-425-625-hover)",active:"var(--info-425-625-active)"},_975_75:{default:"var(--info-975-75)"}},success:{_950_100:{default:"var(--success-950-100)",hover:"var(--success-950-100-hover)",active:"var(--success-950-100-active)"},_425_625:{default:"var(--success-425-625)",hover:"var(--success-425-625-hover)",active:"var(--success-425-625-active)"},_975_75:{default:"var(--success-975-75)"}},warning:{_950_100:{default:"var(--warning-950-100)",hover:"var(--warning-950-100-hover)",active:"var(--warning-950-100-active)"},_425_625:{default:"var(--warning-425-625)",hover:"var(--warning-425-625-hover)",active:"var(--warning-425-625-active)"},_975_75:{default:"var(--warning-975-75)"}},error:{_950_100:{default:"var(--error-950-100)",hover:"var(--error-950-100-hover)",active:"var(--error-950-100-active)"},_425_625:{default:"var(--error-425-625)",hover:"var(--error-425-625-hover)",active:"var(--error-425-625-active)"},_975_75:{default:"var(--error-975-75)"}},greenTilleulVerveine:{_975_75:{default:"var(--green-tilleul-verveine-975-75)",hover:"var(--green-tilleul-verveine-975-75-hover)",active:"var(--green-tilleul-verveine-975-75-active)"},_950_100:{default:"var(--green-tilleul-verveine-950-100)",hover:"var(--green-tilleul-verveine-950-100-hover)",active:"var(--green-tilleul-verveine-950-100-active)"},sun418moon817:{default:"var(--green-tilleul-verveine-sun-418-moon-817)",hover:"var(--green-tilleul-verveine-sun-418-moon-817-hover)",active:"var(--green-tilleul-verveine-sun-418-moon-817-active)"},_925_125:{default:"var(--green-tilleul-verveine-925-125)",hover:"var(--green-tilleul-verveine-925-125-hover)",active:"var(--green-tilleul-verveine-925-125-active)"},main707:{default:"var(--green-tilleul-verveine-main-707)"},_850_200:{default:"var(--green-tilleul-verveine-850-200)"}},greenBourgeon:{_975_75:{default:"var(--green-bourgeon-975-75)",hover:"var(--green-bourgeon-975-75-hover)",active:"var(--green-bourgeon-975-75-active)"},_950_100:{default:"var(--green-bourgeon-950-100)",hover:"var(--green-bourgeon-950-100-hover)",active:"var(--green-bourgeon-950-100-active)"},sun425moon759:{default:"var(--green-bourgeon-sun-425-moon-759)",hover:"var(--green-bourgeon-sun-425-moon-759-hover)",active:"var(--green-bourgeon-sun-425-moon-759-active)"},_925_125:{default:"var(--green-bourgeon-925-125)",hover:"var(--green-bourgeon-925-125-hover)",active:"var(--green-bourgeon-925-125-active)"},main640:{default:"var(--green-bourgeon-main-640)"},_850_200:{default:"var(--green-bourgeon-850-200)"}},greenEmeraude:{_975_75:{default:"var(--green-emeraude-975-75)",hover:"var(--green-emeraude-975-75-hover)",active:"var(--green-emeraude-975-75-active)"},_950_100:{default:"var(--green-emeraude-950-100)",hover:"var(--green-emeraude-950-100-hover)",active:"var(--green-emeraude-950-100-active)"},sun425moon753:{default:"var(--green-emeraude-sun-425-moon-753)",hover:"var(--green-emeraude-sun-425-moon-753-hover)",active:"var(--green-emeraude-sun-425-moon-753-active)"},_925_125:{default:"var(--green-emeraude-925-125)",hover:"var(--green-emeraude-925-125-hover)",active:"var(--green-emeraude-925-125-active)"},main632:{default:"var(--green-emeraude-main-632)"},_850_200:{default:"var(--green-emeraude-850-200)"}},greenMenthe:{_975_75:{default:"var(--green-menthe-975-75)",hover:"var(--green-menthe-975-75-hover)",active:"var(--green-menthe-975-75-active)"},_950_100:{default:"var(--green-menthe-950-100)",hover:"var(--green-menthe-950-100-hover)",active:"var(--green-menthe-950-100-active)"},sun373moon652:{default:"var(--green-menthe-sun-373-moon-652)",hover:"var(--green-menthe-sun-373-moon-652-hover)",active:"var(--green-menthe-sun-373-moon-652-active)"},_925_125:{default:"var(--green-menthe-925-125)",hover:"var(--green-menthe-925-125-hover)",active:"var(--green-menthe-925-125-active)"},main548:{default:"var(--green-menthe-main-548)"},_850_200:{default:"var(--green-menthe-850-200)"}},greenArchipel:{_975_75:{default:"var(--green-archipel-975-75)",hover:"var(--green-archipel-975-75-hover)",active:"var(--green-archipel-975-75-active)"},_950_100:{default:"var(--green-archipel-950-100)",hover:"var(--green-archipel-950-100-hover)",active:"var(--green-archipel-950-100-active)"},sun391moon716:{default:"var(--green-archipel-sun-391-moon-716)",hover:"var(--green-archipel-sun-391-moon-716-hover)",active:"var(--green-archipel-sun-391-moon-716-active)"},_925_125:{default:"var(--green-archipel-925-125)",hover:"var(--green-archipel-925-125-hover)",active:"var(--green-archipel-925-125-active)"},main557:{default:"var(--green-archipel-main-557)"},_850_200:{default:"var(--green-archipel-850-200)"}},blueEcume:{_975_75:{default:"var(--blue-ecume-975-75)",hover:"var(--blue-ecume-975-75-hover)",active:"var(--blue-ecume-975-75-active)"},_950_100:{default:"var(--blue-ecume-950-100)",hover:"var(--blue-ecume-950-100-hover)",active:"var(--blue-ecume-950-100-active)"},sun247moon675:{default:"var(--blue-ecume-sun-247-moon-675)",hover:"var(--blue-ecume-sun-247-moon-675-hover)",active:"var(--blue-ecume-sun-247-moon-675-active)"},_925_125:{default:"var(--blue-ecume-925-125)",hover:"var(--blue-ecume-925-125-hover)",active:"var(--blue-ecume-925-125-active)"},main400:{default:"var(--blue-ecume-main-400)"},_850_200:{default:"var(--blue-ecume-850-200)"}},blueCumulus:{_975_75:{default:"var(--blue-cumulus-975-75)",hover:"var(--blue-cumulus-975-75-hover)",active:"var(--blue-cumulus-975-75-active)"},_950_100:{default:"var(--blue-cumulus-950-100)",hover:"var(--blue-cumulus-950-100-hover)",active:"var(--blue-cumulus-950-100-active)"},sun368moon732:{default:"var(--blue-cumulus-sun-368-moon-732)",hover:"var(--blue-cumulus-sun-368-moon-732-hover)",active:"var(--blue-cumulus-sun-368-moon-732-active)"},_925_125:{default:"var(--blue-cumulus-925-125)",hover:"var(--blue-cumulus-925-125-hover)",active:"var(--blue-cumulus-925-125-active)"},main526:{default:"var(--blue-cumulus-main-526)"},_850_200:{default:"var(--blue-cumulus-850-200)"}},purpleGlycine:{_975_75:{default:"var(--purple-glycine-975-75)",hover:"var(--purple-glycine-975-75-hover)",active:"var(--purple-glycine-975-75-active)"},_950_100:{default:"var(--purple-glycine-950-100)",hover:"var(--purple-glycine-950-100-hover)",active:"var(--purple-glycine-950-100-active)"},sun319moon630:{default:"var(--purple-glycine-sun-319-moon-630)",hover:"var(--purple-glycine-sun-319-moon-630-hover)",active:"var(--purple-glycine-sun-319-moon-630-active)"},_925_125:{default:"var(--purple-glycine-925-125)",hover:"var(--purple-glycine-925-125-hover)",active:"var(--purple-glycine-925-125-active)"},main494:{default:"var(--purple-glycine-main-494)"},_850_200:{default:"var(--purple-glycine-850-200)"}},pinkMacaron:{_975_75:{default:"var(--pink-macaron-975-75)",hover:"var(--pink-macaron-975-75-hover)",active:"var(--pink-macaron-975-75-active)"},_950_100:{default:"var(--pink-macaron-950-100)",hover:"var(--pink-macaron-950-100-hover)",active:"var(--pink-macaron-950-100-active)"},sun406moon833:{default:"var(--pink-macaron-sun-406-moon-833)",hover:"var(--pink-macaron-sun-406-moon-833-hover)",active:"var(--pink-macaron-sun-406-moon-833-active)"},_925_125:{default:"var(--pink-macaron-925-125)",hover:"var(--pink-macaron-925-125-hover)",active:"var(--pink-macaron-925-125-active)"},main689:{default:"var(--pink-macaron-main-689)"},_850_200:{default:"var(--pink-macaron-850-200)"}},pinkTuile:{_975_75:{default:"var(--pink-tuile-975-75)",hover:"var(--pink-tuile-975-75-hover)",active:"var(--pink-tuile-975-75-active)"},_950_100:{default:"var(--pink-tuile-950-100)",hover:"var(--pink-tuile-950-100-hover)",active:"var(--pink-tuile-950-100-active)"},sun425moon750:{default:"var(--pink-tuile-sun-425-moon-750)",hover:"var(--pink-tuile-sun-425-moon-750-hover)",active:"var(--pink-tuile-sun-425-moon-750-active)"},_925_125:{default:"var(--pink-tuile-925-125)",hover:"var(--pink-tuile-925-125-hover)",active:"var(--pink-tuile-925-125-active)"},main556:{default:"var(--pink-tuile-main-556)"},_850_200:{default:"var(--pink-tuile-850-200)"}},yellowTournesol:{_975_75:{default:"var(--yellow-tournesol-975-75)",hover:"var(--yellow-tournesol-975-75-hover)",active:"var(--yellow-tournesol-975-75-active)"},_950_100:{default:"var(--yellow-tournesol-950-100)",hover:"var(--yellow-tournesol-950-100-hover)",active:"var(--yellow-tournesol-950-100-active)"},sun407moon922:{default:"var(--yellow-tournesol-sun-407-moon-922)",hover:"var(--yellow-tournesol-sun-407-moon-922-hover)",active:"var(--yellow-tournesol-sun-407-moon-922-active)"},_925_125:{default:"var(--yellow-tournesol-925-125)",hover:"var(--yellow-tournesol-925-125-hover)",active:"var(--yellow-tournesol-925-125-active)"},main731:{default:"var(--yellow-tournesol-main-731)"},_850_200:{default:"var(--yellow-tournesol-850-200)"}},yellowMoutarde:{_975_75:{default:"var(--yellow-moutarde-975-75)",hover:"var(--yellow-moutarde-975-75-hover)",active:"var(--yellow-moutarde-975-75-active)"},_950_100:{default:"var(--yellow-moutarde-950-100)",hover:"var(--yellow-moutarde-950-100-hover)",active:"var(--yellow-moutarde-950-100-active)"},sun348moon860:{default:"var(--yellow-moutarde-sun-348-moon-860)",hover:"var(--yellow-moutarde-sun-348-moon-860-hover)",active:"var(--yellow-moutarde-sun-348-moon-860-active)"},_925_125:{default:"var(--yellow-moutarde-925-125)",hover:"var(--yellow-moutarde-925-125-hover)",active:"var(--yellow-moutarde-925-125-active)"},main679:{default:"var(--yellow-moutarde-main-679)"},_850_200:{default:"var(--yellow-moutarde-850-200)"}},orangeTerreBattue:{_975_75:{default:"var(--orange-terre-battue-975-75)",hover:"var(--orange-terre-battue-975-75-hover)",active:"var(--orange-terre-battue-975-75-active)"},_950_100:{default:"var(--orange-terre-battue-950-100)",hover:"var(--orange-terre-battue-950-100-hover)",active:"var(--orange-terre-battue-950-100-active)"},sun370moon672:{default:"var(--orange-terre-battue-sun-370-moon-672)",hover:"var(--orange-terre-battue-sun-370-moon-672-hover)",active:"var(--orange-terre-battue-sun-370-moon-672-active)"},_925_125:{default:"var(--orange-terre-battue-925-125)",hover:"var(--orange-terre-battue-925-125-hover)",active:"var(--orange-terre-battue-925-125-active)"},main645:{default:"var(--orange-terre-battue-main-645)"},_850_200:{default:"var(--orange-terre-battue-850-200)"}},brownCafeCreme:{_975_75:{default:"var(--brown-cafe-creme-975-75)",hover:"var(--brown-cafe-creme-975-75-hover)",active:"var(--brown-cafe-creme-975-75-active)"},_950_100:{default:"var(--brown-cafe-creme-950-100)",hover:"var(--brown-cafe-creme-950-100-hover)",active:"var(--brown-cafe-creme-950-100-active)"},sun383moon885:{default:"var(--brown-cafe-creme-sun-383-moon-885)",hover:"var(--brown-cafe-creme-sun-383-moon-885-hover)",active:"var(--brown-cafe-creme-sun-383-moon-885-active)"},_925_125:{default:"var(--brown-cafe-creme-925-125)",hover:"var(--brown-cafe-creme-925-125-hover)",active:"var(--brown-cafe-creme-925-125-active)"},main782:{default:"var(--brown-cafe-creme-main-782)"},_850_200:{default:"var(--brown-cafe-creme-850-200)"}},brownCaramel:{_975_75:{default:"var(--brown-caramel-975-75)",hover:"var(--brown-caramel-975-75-hover)",active:"var(--brown-caramel-975-75-active)"},_950_100:{default:"var(--brown-caramel-950-100)",hover:"var(--brown-caramel-950-100-hover)",active:"var(--brown-caramel-950-100-active)"},sun425moon901:{default:"var(--brown-caramel-sun-425-moon-901)",hover:"var(--brown-caramel-sun-425-moon-901-hover)",active:"var(--brown-caramel-sun-425-moon-901-active)"},_925_125:{default:"var(--brown-caramel-925-125)",hover:"var(--brown-caramel-925-125-hover)",active:"var(--brown-caramel-925-125-active)"},main648:{default:"var(--brown-caramel-main-648)"},_850_200:{default:"var(--brown-caramel-850-200)"}},brownOpera:{_975_75:{default:"var(--brown-opera-975-75)",hover:"var(--brown-opera-975-75-hover)",active:"var(--brown-opera-975-75-active)"},_950_100:{default:"var(--brown-opera-950-100)",hover:"var(--brown-opera-950-100-hover)",active:"var(--brown-opera-950-100-active)"},sun395moon820:{default:"var(--brown-opera-sun-395-moon-820)",hover:"var(--brown-opera-sun-395-moon-820-hover)",active:"var(--brown-opera-sun-395-moon-820-active)"},_925_125:{default:"var(--brown-opera-925-125)",hover:"var(--brown-opera-925-125-hover)",active:"var(--brown-opera-925-125-active)"},main680:{default:"var(--brown-opera-main-680)"},_850_200:{default:"var(--brown-opera-850-200)"}},beigeGrisGalet:{_975_75:{default:"var(--beige-gris-galet-975-75)",hover:"var(--beige-gris-galet-975-75-hover)",active:"var(--beige-gris-galet-975-75-active)"},_950_100:{default:"var(--beige-gris-galet-950-100)",hover:"var(--beige-gris-galet-950-100-hover)",active:"var(--beige-gris-galet-950-100-active)"},sun407moon821:{default:"var(--beige-gris-galet-sun-407-moon-821)",hover:"var(--beige-gris-galet-sun-407-moon-821-hover)",active:"var(--beige-gris-galet-sun-407-moon-821-active)"},_925_125:{default:"var(--beige-gris-galet-925-125)",hover:"var(--beige-gris-galet-925-125-hover)",active:"var(--beige-gris-galet-925-125-active)"},main702:{default:"var(--beige-gris-galet-main-702)"},_850_200:{default:"var(--beige-gris-galet-850-200)"}}};function getColorOptionsHex(o){const{isDark:e}=o;return{grey:{_1000_50:{default:e?"#161616":"#ffffff",hover:e?"#343434":"#f6f6f6",active:e?"#474747":"#ededed"},_975_75:{default:e?"#1e1e1e":"#f6f6f6",hover:e?"#3f3f3f":"#dfdfdf",active:e?"#525252":"#cfcfcf"},_950_100:{default:e?"#242424":"#eeeeee",hover:e?"#474747":"#d2d2d2",active:e?"#5b5b5b":"#c1c1c1"},_200_850:{default:e?"#cecece":"#3a3a3a",hover:e?"#a8a8a8":"#616161",active:e?"#939393":"#777777"},_925_125:{default:e?"#2a2a2a":"#e5e5e5"},_1000_75:{default:e?"#1e1e1e":"#ffffff",hover:e?"#3f3f3f":"#f6f6f6",active:e?"#525252":"#ededed"},_1000_100:{default:e?"#242424":"#ffffff",hover:e?"#474747":"#f6f6f6",active:e?"#5b5b5b":"#ededed"},_975_100:{default:e?"#242424":"#f6f6f6",hover:e?"#474747":"#dfdfdf",active:e?"#5b5b5b":"#cfcfcf"},_975_125:{default:e?"#2a2a2a":"#f6f6f6",hover:e?"#4e4e4e":"#dfdfdf",active:e?"#636363":"#cfcfcf"},_950_125:{default:e?"#2a2a2a":"#eeeeee",hover:e?"#4e4e4e":"#d2d2d2",active:e?"#636363":"#c1c1c1"},_950_150:{default:e?"#2f2f2f":"#eeeeee",hover:e?"#545454":"#d2d2d2",active:e?"#696969":"#c1c1c1"},_50_1000:{default:e?"#ffffff":"#161616"},_425_625:{default:e?"#929292":"#666666"},_625_425:{default:e?"#666666":"#929292"},_0_1000:{default:e?"#ffffff":"#0"},_900_175:{default:e?"#353535":"#dddddd"}},blueFrance:{_975_75:{default:e?"#1b1b35":"#f5f5fe",hover:e?"#3a3a68":"#dcdcfc",active:e?"#4d4d83":"#cbcbfa"},_950_100:{default:e?"#21213f":"#ececfe",hover:e?"#424275":"#cecefc",active:e?"#56568c":"#bbbbfc"},sun113_625:{default:e?"#8585f6":"#000091",hover:e?"#b1b1f9":"#1212ff",active:e?"#c6c6fb":"#2323ff"},_925_125:{default:e?"#272747":"#e3e3fd",hover:e?"#4a4a7d":"#c1c1fb",active:e?"#5e5e90":"#adadf9"},_975sun113:{default:e?"#000091":"#f5f5fe"},main525:{default:"#6a6af4"},_850_200:{default:e?"#313178":"#cacafb"}},redMarianne:{_975_75:{default:e?"#2b1919":"#fef4f4",hover:e?"#573737":"#fcd7d7",active:e?"#704848":"#fac4c4"},_950_100:{default:e?"#331f1f":"#fee9e9",hover:e?"#613f3f":"#fdc5c5",active:e?"#7b5151":"#fcafaf"},_425_625:{default:e?"#f95c5e":"#c9191e",hover:e?"#fa9293":"#f93f42",active:e?"#fbabac":"#f95a5c"},_925_125:{default:e?"#3b2424":"#fddede",hover:e?"#6b4545":"#fbb6b6",active:e?"#865757":"#fa9e9e"},main472:{default:"#e1000f"},_850_200:{default:e?"#5e2a2b":"#fcbfbf"}},info:{_950_100:{default:e?"#1d2437":"#e8edff",hover:e?"#3b4767":"#c2d1ff",active:e?"#4c5b83":"#a9bfff"},_425_625:{default:e?"#518fff":"#0063cb",hover:e?"#98b4ff":"#3b87ff",active:e?"#b4c7ff":"#6798ff"},_975_75:{default:e?"#171d2e":"#f4f6ff"}},success:{_950_100:{default:e?"#19271d":"#b8fec9",hover:e?"#344c3b":"#46fd89",active:e?"#44624d":"#34eb7b"},_425_625:{default:e?"#27a658":"#18753c",hover:e?"#36d975":"#27a959",active:e?"#3df183":"#2fc368"},_975_75:{default:e?"#142117":"#dffee6"}},warning:{_950_100:{default:e?"#361e19":"#ffe9e6",hover:e?"#663d35":"#ffc6bd",active:e?"#824f44":"#ffb0a2"},_425_625:{default:e?"#fc5d00":"#b34000",hover:e?"#ff8c73":"#ff6218",active:e?"#ffa595":"#ff7a55"},_975_75:{default:e?"#2d1814":"#fff4f3"}},error:{_950_100:{default:e?"#391c1c":"#ffe9e9",hover:e?"#6c3a3a":"#ffc5c5",active:e?"#894b4b":"#ffafaf"},_425_625:{default:e?"#ff5655":"#ce0500",hover:e?"#ff8c8c":"#ff2725",active:e?"#ffa6a6":"#ff4140"},_975_75:{default:e?"#301717":"#fff4f4"}},greenTilleulVerveine:{_975_75:{default:e?"#201e14":"#fef7da",hover:e?"#433f2e":"#fce552",active:e?"#57533d":"#ebd54c"},_950_100:{default:e?"#272419":"#fceeac",hover:e?"#4c4734":"#e8d45c",active:e?"#615b44":"#d4c254"},sun418moon817:{default:e?"#d8c634":"#66673d",hover:e?"#fee943":"#929359",active:e?"#fef1ab":"#a7a967"},_925_125:{default:e?"#2d2a1d":"#fbe769",hover:e?"#534f39":"#d7c655",active:e?"#696349":"#c2b24c"},main707:{default:"#b7a73f"},_850_200:{default:e?"#3f3a20":"#e2cf58"}},greenBourgeon:{_975_75:{default:e?"#182014":"#e6feda",hover:e?"#35432e":"#a7fc62",active:e?"#46573d":"#98ed4d"},_950_100:{default:e?"#1e2719":"#c9fcac",hover:e?"#3d4c34":"#9ae95d",active:e?"#4e6144":"#8dd555"},sun425moon759:{default:e?"#99c221":"#447049",hover:e?"#baec2a":"#639f6a",active:e?"#c9fd2e":"#72b77a"},_925_125:{default:e?"#232d1d":"#a9fb68",hover:e?"#435339":"#8ed654",active:e?"#556949":"#7fc04b"},main640:{default:"#68a532"},_850_200:{default:e?"#2a401a":"#95e257"}},greenEmeraude:{_975_75:{default:e?"#142018":"#e3fdeb",hover:e?"#2e4335":"#94f9b9",active:e?"#3d5846":"#6df1a3"},_950_100:{default:e?"#19271e":"#c3fad5",hover:e?"#344c3d":"#77eda5",active:e?"#44624f":"#6dd897"},sun425moon753:{default:e?"#34cb6a":"#297254",hover:e?"#42fb84":"#3ea47a",active:e?"#80fda3":"#49bc8d"},_925_125:{default:e?"#1e2e23":"#9ef9be",hover:e?"#3b5543":"#69df97",active:e?"#4b6b55":"#5ec988"},main632:{default:"#00a95f"},_850_200:{default:e?"#21402c":"#6fe49d"}},greenMenthe:{_975_75:{default:e?"#15201e":"#dffdf7",hover:e?"#30433f":"#84f9e7",active:e?"#3f5753":"#70ebd8"},_950_100:{default:e?"#1a2624":"#bafaee",hover:e?"#364b47":"#79e7d5",active:e?"#46605b":"#6fd3c3"},sun373moon652:{default:e?"#21ab8e":"#37635f",hover:e?"#2eddb8":"#53918c",active:e?"#34f4cc":"#62a9a2"},_925_125:{default:e?"#1f2d2a":"#8bf8e7",hover:e?"#3c534e":"#6ed5c5",active:e?"#4d6963":"#62bfb1"},main548:{default:"#009081"},_850_200:{default:e?"#223f3a":"#73e0cf"}},greenArchipel:{_975_75:{default:e?"#152021":"#e5fbfd",hover:e?"#2f4345":"#99f2f8",active:e?"#3f5759":"#73e9f0"},_950_100:{default:e?"#1a2628":"#c7f6fc",hover:e?"#364a4e":"#64ecf8",active:e?"#465f63":"#5bd8e3"},sun391moon716:{default:e?"#34bab5":"#006a6f",hover:e?"#43e9e2":"#009fa7",active:e?"#4cfdf6":"#00bbc3"},_925_125:{default:e?"#1f2c2e":"#a6f2fa",hover:e?"#3c5255":"#62dbe5",active:e?"#4d676b":"#58c5cf"},main557:{default:"#009099"},_850_200:{default:e?"#233e41":"#60e0eb"}},blueEcume:{_975_75:{default:e?"#171d2f":"#f4f6fe",hover:e?"#333e5e":"#d7dffb",active:e?"#445179":"#c3cffa"},_950_100:{default:e?"#1d2437":"#e9edfe",hover:e?"#3b4767":"#c5d0fc",active:e?"#4c5b83":"#adbffc"},sun247moon675:{default:e?"#869ece":"#2f4077",hover:e?"#b8c5e2":"#4e68bb",active:e?"#ced6ea":"#667dcf"},_925_125:{default:e?"#222940":"#dee5fd",hover:e?"#424d73":"#b4c5fb",active:e?"#536190":"#99b3f9"},main400:{default:"#465f9d"},_850_200:{default:e?"#273962":"#bfccfb"}},blueCumulus:{_975_75:{default:e?"#171e2b":"#f3f6fe",hover:e?"#333f56":"#d3dffc",active:e?"#43536f":"#bed0fa"},_950_100:{default:e?"#1c2433":"#e6eefe",hover:e?"#3a4761":"#bcd3fc",active:e?"#4a5b7b":"#9fc3fc"},sun368moon732:{default:e?"#7ab1e8":"#3558a2",hover:e?"#bad2f2":"#5982e0",active:e?"#d2e2f6":"#7996e6"},_925_125:{default:e?"#212a3a":"#dae6fd",hover:e?"#404f69":"#a9c8fb",active:e?"#516384":"#8ab8f9"},main526:{default:"#417dc4"},_850_200:{default:e?"#263b58":"#b6cffb"}},purpleGlycine:{_975_75:{default:e?"#251a24":"#fef3fd",hover:e?"#4c394a":"#fcd4f8",active:e?"#634a60":"#fabff5"},_950_100:{default:e?"#2c202b":"#fee7fc",hover:e?"#554053":"#fdc0f8",active:e?"#6c536a":"#fca8f6"},sun319moon630:{default:e?"#ce70cc":"#6e445a",hover:e?"#dfa4dd":"#a66989",active:e?"#e7bbe6":"#bb7f9e"},_925_125:{default:e?"#332632":"#fddbfa",hover:e?"#5d485c":"#fbaff5",active:e?"#755b73":"#fa96f2"},main494:{default:"#a558a0"},_850_200:{default:e?"#502e4d":"#fbb8f6"}},pinkMacaron:{_975_75:{default:e?"#261b19":"#fef4f2",hover:e?"#4e3a37":"#fcd8d0",active:e?"#654c48":"#fac5b8"},_950_100:{default:e?"#2e211f":"#fee9e6",hover:e?"#58423f":"#fdc6bd",active:e?"#705551":"#fcb0a2"},sun406moon833:{default:e?"#ffb7ae":"#8d533e",hover:e?"#ffe0dc":"#ca795c",active:e?"#fff0ee":"#e08e73"},_925_125:{default:e?"#352724":"#fddfda",hover:e?"#614a45":"#fbb8ab",active:e?"#795d57":"#faa18d"},main689:{default:"#e18b76"},_850_200:{default:e?"#52312a":"#fcc0b4"}},pinkTuile:{_975_75:{default:e?"#281b19":"#fef4f3",hover:e?"#513a37":"#fcd7d3",active:e?"#694c48":"#fac4be"},_950_100:{default:e?"#2f211f":"#fee9e7",hover:e?"#5a423e":"#fdc6c0",active:e?"#725550":"#fcb0a7"},sun425moon750:{default:e?"#ff9575":"#a94645",hover:e?"#ffc4b7":"#d5706f",active:e?"#ffd8d0":"#da8a89"},_925_125:{default:e?"#372624":"#fddfdb",hover:e?"#644845":"#fbb8ad",active:e?"#7d5b57":"#faa191"},main556:{default:"#ce614a"},_850_200:{default:e?"#55302a":"#fcbfb7"}},yellowTournesol:{_975_75:{default:e?"#221d11":"#fef6e3",hover:e?"#473e29":"#fce086",active:e?"#5c5136":"#f5d24b"},_950_100:{default:e?"#292416":"#feecc2",hover:e?"#4f472f":"#fbd335",active:e?"#655b3d":"#e6c130"},sun407moon922:{default:e?"#ffe552":"#716043",hover:e?"#e1c700":"#a28a62",active:e?"#cab300":"#ba9f72"},_925_125:{default:e?"#302a1a":"#fde39c",hover:e?"#584e34":"#e9c53b",active:e?"#6f6342":"#d3b235"},main731:{default:"#c8aa39"},_850_200:{default:e?"#43391a":"#efcb3a"}},yellowMoutarde:{_975_75:{default:e?"#231d14":"#fef5e8",hover:e?"#483e2e":"#fcdca3",active:e?"#5e513d":"#fbcd64"},_950_100:{default:e?"#2a2319":"#feebd0",hover:e?"#514534":"#fdcd6d",active:e?"#685944":"#f4be30"},sun348moon860:{default:e?"#ffca00":"#695240",hover:e?"#cda200":"#9b7b61",active:e?"#b28c00":"#b58f72"},_925_125:{default:e?"#30291d":"#fde2b5",hover:e?"#584d39":"#f6c43c",active:e?"#6f6149":"#dfb135"},main679:{default:"#c3992a"},_850_200:{default:e?"#453820":"#fcc63a"}},orangeTerreBattue:{_975_75:{default:e?"#281a16":"#fef4f2",hover:e?"#513932":"#fcd8d0",active:e?"#6a4b42":"#fac5b8"},_950_100:{default:e?"#31201c":"#fee9e5",hover:e?"#5d403a":"#fdc6ba",active:e?"#77534a":"#fcb09e"},sun370moon672:{default:e?"#ff732c":"#755348",hover:e?"#ffa48b":"#ab7b6b",active:e?"#ffbbab":"#c68f7d"},_925_125:{default:e?"#382621":"#fddfd8",hover:e?"#664840":"#fbb8a5",active:e?"#7f5b51":"#faa184"},main645:{default:"#e4794a"},_850_200:{default:e?"#543125":"#fcc0b0"}},brownCafeCreme:{_975_75:{default:e?"#211d16":"#fbf6ed",hover:e?"#453e31":"#f2deb6",active:e?"#5a5141":"#eacf91"},_950_100:{default:e?"#28241c":"#f7ecdb",hover:e?"#4e4739":"#edce94",active:e?"#635b4a":"#dabd84"},sun383moon885:{default:e?"#ecd7a2":"#685c48",hover:e?"#c5b386":"#97866a",active:e?"#af9f77":"#ae9b7b"},_925_125:{default:e?"#2e2a21":"#f4e3c7",hover:e?"#554e3f":"#e1c386",active:e?"#6b6351":"#ccb078"},main782:{default:"#d1b781"},_850_200:{default:e?"#423925":"#e7ca8e"}},brownCaramel:{_975_75:{default:e?"#251c16":"#fbf5f2",hover:e?"#4c3c31":"#f1dbcf",active:e?"#624e41":"#ecc9b5"},_950_100:{default:e?"#2c221c":"#f7ebe5",hover:e?"#554439":"#eccbb9",active:e?"#6c574a":"#e6b79a"},sun425moon901:{default:e?"#fbd8ab":"#845d48",hover:e?"#efb547":"#bb8568",active:e?"#d6a23e":"#d69978"},_925_125:{default:e?"#332821":"#f3e2d9",hover:e?"#5d4b40":"#e7bea6",active:e?"#755f51":"#e1a982"},main648:{default:"#c08c65"},_850_200:{default:e?"#4b3525":"#eac7b2"}},brownOpera:{_975_75:{default:e?"#241c17":"#fbf5f2",hover:e?"#4a3c33":"#f1dbcf",active:e?"#604f44":"#ecc9b5"},_950_100:{default:e?"#2b221c":"#f7ece4",hover:e?"#53443a":"#eccdb3",active:e?"#6a574a":"#e6ba90"},sun395moon820:{default:e?"#e6be92":"#745b47",hover:e?"#f2e2d3":"#a78468",active:e?"#f8f0e9":"#c09979"},_925_125:{default:e?"#322821":"#f3e2d7",hover:e?"#5c4b40":"#e7bfa0",active:e?"#735f51":"#deaa7e"},main680:{default:"#bd987a"},_850_200:{default:e?"#493625":"#eac7ad"}},beigeGrisGalet:{_975_75:{default:e?"#211d19":"#f9f6f2",hover:e?"#453e37":"#eadecd",active:e?"#595148":"#e1ceb1"},_950_100:{default:e?"#28231f":"#f3ede5",hover:e?"#4e453f":"#e1d0b5",active:e?"#635950":"#d1bea2"},sun407moon821:{default:e?"#d0c3b7":"#6a6156",hover:e?"#eae5e1":"#988b7c",active:e?"#f4f2f0":"#afa08f"},_925_125:{default:e?"#2e2924":"#eee4d9",hover:e?"#554d45":"#dbc3a4",active:e?"#6b6157":"#c6b094"},main702:{default:"#aea397"},_850_200:{default:e?"#433829":"#e0cab0"}}}}const colorDecisions={background:{default:{grey:{default:"var(--background-default-grey)",hover:"var(--background-default-grey-hover)",active:"var(--background-default-grey-active)"}},alt:{grey:{default:"var(--background-alt-grey)",hover:"var(--background-alt-grey-hover)",active:"var(--background-alt-grey-active)"},blueFrance:{default:"var(--background-alt-blue-france)",hover:"var(--background-alt-blue-france-hover)",active:"var(--background-alt-blue-france-active)"},redMarianne:{default:"var(--background-alt-red-marianne)",hover:"var(--background-alt-red-marianne-hover)",active:"var(--background-alt-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-alt-green-tilleul-verveine)",hover:"var(--background-alt-green-tilleul-verveine-hover)",active:"var(--background-alt-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-alt-green-bourgeon)",hover:"var(--background-alt-green-bourgeon-hover)",active:"var(--background-alt-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-alt-green-emeraude)",hover:"var(--background-alt-green-emeraude-hover)",active:"var(--background-alt-green-emeraude-active)"},greenMenthe:{default:"var(--background-alt-green-menthe)",hover:"var(--background-alt-green-menthe-hover)",active:"var(--background-alt-green-menthe-active)"},greenArchipel:{default:"var(--background-alt-green-archipel)",hover:"var(--background-alt-green-archipel-hover)",active:"var(--background-alt-green-archipel-active)"},blueEcume:{default:"var(--background-alt-blue-ecume)",hover:"var(--background-alt-blue-ecume-hover)",active:"var(--background-alt-blue-ecume-active)"},blueCumulus:{default:"var(--background-alt-blue-cumulus)",hover:"var(--background-alt-blue-cumulus-hover)",active:"var(--background-alt-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-alt-purple-glycine)",hover:"var(--background-alt-purple-glycine-hover)",active:"var(--background-alt-purple-glycine-active)"},pinkMacaron:{default:"var(--background-alt-pink-macaron)",hover:"var(--background-alt-pink-macaron-hover)",active:"var(--background-alt-pink-macaron-active)"},pinkTuile:{default:"var(--background-alt-pink-tuile)",hover:"var(--background-alt-pink-tuile-hover)",active:"var(--background-alt-pink-tuile-active)"},yellowTournesol:{default:"var(--background-alt-yellow-tournesol)",hover:"var(--background-alt-yellow-tournesol-hover)",active:"var(--background-alt-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-alt-yellow-moutarde)",hover:"var(--background-alt-yellow-moutarde-hover)",active:"var(--background-alt-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-alt-orange-terre-battue)",hover:"var(--background-alt-orange-terre-battue-hover)",active:"var(--background-alt-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-alt-brown-cafe-creme)",hover:"var(--background-alt-brown-cafe-creme-hover)",active:"var(--background-alt-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-alt-brown-caramel)",hover:"var(--background-alt-brown-caramel-hover)",active:"var(--background-alt-brown-caramel-active)"},brownOpera:{default:"var(--background-alt-brown-opera)",hover:"var(--background-alt-brown-opera-hover)",active:"var(--background-alt-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-alt-beige-gris-galet)",hover:"var(--background-alt-beige-gris-galet-hover)",active:"var(--background-alt-beige-gris-galet-active)"}},contrast:{grey:{default:"var(--background-contrast-grey)",hover:"var(--background-contrast-grey-hover)",active:"var(--background-contrast-grey-active)"},blueFrance:{default:"var(--background-contrast-blue-france)",hover:"var(--background-contrast-blue-france-hover)",active:"var(--background-contrast-blue-france-active)"},redMarianne:{default:"var(--background-contrast-red-marianne)",hover:"var(--background-contrast-red-marianne-hover)",active:"var(--background-contrast-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-contrast-green-tilleul-verveine)",hover:"var(--background-contrast-green-tilleul-verveine-hover)",active:"var(--background-contrast-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-contrast-green-bourgeon)",hover:"var(--background-contrast-green-bourgeon-hover)",active:"var(--background-contrast-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-contrast-green-emeraude)",hover:"var(--background-contrast-green-emeraude-hover)",active:"var(--background-contrast-green-emeraude-active)"},greenMenthe:{default:"var(--background-contrast-green-menthe)",hover:"var(--background-contrast-green-menthe-hover)",active:"var(--background-contrast-green-menthe-active)"},greenArchipel:{default:"var(--background-contrast-green-archipel)",hover:"var(--background-contrast-green-archipel-hover)",active:"var(--background-contrast-green-archipel-active)"},blueEcume:{default:"var(--background-contrast-blue-ecume)",hover:"var(--background-contrast-blue-ecume-hover)",active:"var(--background-contrast-blue-ecume-active)"},blueCumulus:{default:"var(--background-contrast-blue-cumulus)",hover:"var(--background-contrast-blue-cumulus-hover)",active:"var(--background-contrast-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-contrast-purple-glycine)",hover:"var(--background-contrast-purple-glycine-hover)",active:"var(--background-contrast-purple-glycine-active)"},pinkMacaron:{default:"var(--background-contrast-pink-macaron)",hover:"var(--background-contrast-pink-macaron-hover)",active:"var(--background-contrast-pink-macaron-active)"},pinkTuile:{default:"var(--background-contrast-pink-tuile)",hover:"var(--background-contrast-pink-tuile-hover)",active:"var(--background-contrast-pink-tuile-active)"},yellowTournesol:{default:"var(--background-contrast-yellow-tournesol)",hover:"var(--background-contrast-yellow-tournesol-hover)",active:"var(--background-contrast-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-contrast-yellow-moutarde)",hover:"var(--background-contrast-yellow-moutarde-hover)",active:"var(--background-contrast-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-contrast-orange-terre-battue)",hover:"var(--background-contrast-orange-terre-battue-hover)",active:"var(--background-contrast-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-contrast-brown-cafe-creme)",hover:"var(--background-contrast-brown-cafe-creme-hover)",active:"var(--background-contrast-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-contrast-brown-caramel)",hover:"var(--background-contrast-brown-caramel-hover)",active:"var(--background-contrast-brown-caramel-active)"},brownOpera:{default:"var(--background-contrast-brown-opera)",hover:"var(--background-contrast-brown-opera-hover)",active:"var(--background-contrast-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-contrast-beige-gris-galet)",hover:"var(--background-contrast-beige-gris-galet-hover)",active:"var(--background-contrast-beige-gris-galet-active)"},info:{default:"var(--background-contrast-info)",hover:"var(--background-contrast-info-hover)",active:"var(--background-contrast-info-active)"},success:{default:"var(--background-contrast-success)",hover:"var(--background-contrast-success-hover)",active:"var(--background-contrast-success-active)"},warning:{default:"var(--background-contrast-warning)",hover:"var(--background-contrast-warning-hover)",active:"var(--background-contrast-warning-active)"},error:{default:"var(--background-contrast-error)",hover:"var(--background-contrast-error-hover)",active:"var(--background-contrast-error-active)"}},flat:{grey:{default:"var(--background-flat-grey)"},blueFrance:{default:"var(--background-flat-blue-france)"},redMarianne:{default:"var(--background-flat-red-marianne)"},greenTilleulVerveine:{default:"var(--background-flat-green-tilleul-verveine)"},greenBourgeon:{default:"var(--background-flat-green-bourgeon)"},greenEmeraude:{default:"var(--background-flat-green-emeraude)"},greenMenthe:{default:"var(--background-flat-green-menthe)"},greenArchipel:{default:"var(--background-flat-green-archipel)"},blueEcume:{default:"var(--background-flat-blue-ecume)"},blueCumulus:{default:"var(--background-flat-blue-cumulus)"},purpleGlycine:{default:"var(--background-flat-purple-glycine)"},pinkMacaron:{default:"var(--background-flat-pink-macaron)"},pinkTuile:{default:"var(--background-flat-pink-tuile)"},yellowTournesol:{default:"var(--background-flat-yellow-tournesol)"},yellowMoutarde:{default:"var(--background-flat-yellow-moutarde)"},orangeTerreBattue:{default:"var(--background-flat-orange-terre-battue)"},brownCafeCreme:{default:"var(--background-flat-brown-cafe-creme)"},brownCaramel:{default:"var(--background-flat-brown-caramel)"},brownOpera:{default:"var(--background-flat-brown-opera)"},beigeGrisGalet:{default:"var(--background-flat-beige-gris-galet)"},info:{default:"var(--background-flat-info)"},success:{default:"var(--background-flat-success)"},warning:{default:"var(--background-flat-warning)"},error:{default:"var(--background-flat-error)"}},actionHigh:{grey:{default:"var(--background-action-high-grey)",hover:"var(--background-action-high-grey-hover)",active:"var(--background-action-high-grey-active)"},blueFrance:{default:"var(--background-action-high-blue-france)",hover:"var(--background-action-high-blue-france-hover)",active:"var(--background-action-high-blue-france-active)"},redMarianne:{default:"var(--background-action-high-red-marianne)",hover:"var(--background-action-high-red-marianne-hover)",active:"var(--background-action-high-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-action-high-green-tilleul-verveine)",hover:"var(--background-action-high-green-tilleul-verveine-hover)",active:"var(--background-action-high-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-action-high-green-bourgeon)",hover:"var(--background-action-high-green-bourgeon-hover)",active:"var(--background-action-high-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-action-high-green-emeraude)",hover:"var(--background-action-high-green-emeraude-hover)",active:"var(--background-action-high-green-emeraude-active)"},greenMenthe:{default:"var(--background-action-high-green-menthe)",hover:"var(--background-action-high-green-menthe-hover)",active:"var(--background-action-high-green-menthe-active)"},greenArchipel:{default:"var(--background-action-high-green-archipel)",hover:"var(--background-action-high-green-archipel-hover)",active:"var(--background-action-high-green-archipel-active)"},blueEcume:{default:"var(--background-action-high-blue-ecume)",hover:"var(--background-action-high-blue-ecume-hover)",active:"var(--background-action-high-blue-ecume-active)"},blueCumulus:{default:"var(--background-action-high-blue-cumulus)",hover:"var(--background-action-high-blue-cumulus-hover)",active:"var(--background-action-high-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-action-high-purple-glycine)",hover:"var(--background-action-high-purple-glycine-hover)",active:"var(--background-action-high-purple-glycine-active)"},pinkMacaron:{default:"var(--background-action-high-pink-macaron)",hover:"var(--background-action-high-pink-macaron-hover)",active:"var(--background-action-high-pink-macaron-active)"},pinkTuile:{default:"var(--background-action-high-pink-tuile)",hover:"var(--background-action-high-pink-tuile-hover)",active:"var(--background-action-high-pink-tuile-active)"},yellowTournesol:{default:"var(--background-action-high-yellow-tournesol)",hover:"var(--background-action-high-yellow-tournesol-hover)",active:"var(--background-action-high-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-action-high-yellow-moutarde)",hover:"var(--background-action-high-yellow-moutarde-hover)",active:"var(--background-action-high-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-action-high-orange-terre-battue)",hover:"var(--background-action-high-orange-terre-battue-hover)",active:"var(--background-action-high-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-action-high-brown-cafe-creme)",hover:"var(--background-action-high-brown-cafe-creme-hover)",active:"var(--background-action-high-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-action-high-brown-caramel)",hover:"var(--background-action-high-brown-caramel-hover)",active:"var(--background-action-high-brown-caramel-active)"},brownOpera:{default:"var(--background-action-high-brown-opera)",hover:"var(--background-action-high-brown-opera-hover)",active:"var(--background-action-high-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-action-high-beige-gris-galet)",hover:"var(--background-action-high-beige-gris-galet-hover)",active:"var(--background-action-high-beige-gris-galet-active)"},info:{default:"var(--background-action-high-info)",hover:"var(--background-action-high-info-hover)",active:"var(--background-action-high-info-active)"},success:{default:"var(--background-action-high-success)",hover:"var(--background-action-high-success-hover)",active:"var(--background-action-high-success-active)"},warning:{default:"var(--background-action-high-warning)",hover:"var(--background-action-high-warning-hover)",active:"var(--background-action-high-warning-active)"},error:{default:"var(--background-action-high-error)",hover:"var(--background-action-high-error-hover)",active:"var(--background-action-high-error-active)"}},actionLow:{blueFrance:{default:"var(--background-action-low-blue-france)",hover:"var(--background-action-low-blue-france-hover)",active:"var(--background-action-low-blue-france-active)"},redMarianne:{default:"var(--background-action-low-red-marianne)",hover:"var(--background-action-low-red-marianne-hover)",active:"var(--background-action-low-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-action-low-green-tilleul-verveine)",hover:"var(--background-action-low-green-tilleul-verveine-hover)",active:"var(--background-action-low-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-action-low-green-bourgeon)",hover:"var(--background-action-low-green-bourgeon-hover)",active:"var(--background-action-low-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-action-low-green-emeraude)",hover:"var(--background-action-low-green-emeraude-hover)",active:"var(--background-action-low-green-emeraude-active)"},greenMenthe:{default:"var(--background-action-low-green-menthe)",hover:"var(--background-action-low-green-menthe-hover)",active:"var(--background-action-low-green-menthe-active)"},greenArchipel:{default:"var(--background-action-low-green-archipel)",hover:"var(--background-action-low-green-archipel-hover)",active:"var(--background-action-low-green-archipel-active)"},blueEcume:{default:"var(--background-action-low-blue-ecume)",hover:"var(--background-action-low-blue-ecume-hover)",active:"var(--background-action-low-blue-ecume-active)"},blueCumulus:{default:"var(--background-action-low-blue-cumulus)",hover:"var(--background-action-low-blue-cumulus-hover)",active:"var(--background-action-low-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-action-low-purple-glycine)",hover:"var(--background-action-low-purple-glycine-hover)",active:"var(--background-action-low-purple-glycine-active)"},pinkMacaron:{default:"var(--background-action-low-pink-macaron)",hover:"var(--background-action-low-pink-macaron-hover)",active:"var(--background-action-low-pink-macaron-active)"},pinkTuile:{default:"var(--background-action-low-pink-tuile)",hover:"var(--background-action-low-pink-tuile-hover)",active:"var(--background-action-low-pink-tuile-active)"},yellowTournesol:{default:"var(--background-action-low-yellow-tournesol)",hover:"var(--background-action-low-yellow-tournesol-hover)",active:"var(--background-action-low-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-action-low-yellow-moutarde)",hover:"var(--background-action-low-yellow-moutarde-hover)",active:"var(--background-action-low-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-action-low-orange-terre-battue)",hover:"var(--background-action-low-orange-terre-battue-hover)",active:"var(--background-action-low-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-action-low-brown-cafe-creme)",hover:"var(--background-action-low-brown-cafe-creme-hover)",active:"var(--background-action-low-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-action-low-brown-caramel)",hover:"var(--background-action-low-brown-caramel-hover)",active:"var(--background-action-low-brown-caramel-active)"},brownOpera:{default:"var(--background-action-low-brown-opera)",hover:"var(--background-action-low-brown-opera-hover)",active:"var(--background-action-low-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-action-low-beige-gris-galet)",hover:"var(--background-action-low-beige-gris-galet-hover)",active:"var(--background-action-low-beige-gris-galet-active)"}},active:{blueFrance:{default:"var(--background-active-blue-france)",hover:"var(--background-active-blue-france-hover)",active:"var(--background-active-blue-france-active)"},redMarianne:{default:"var(--background-active-red-marianne)",hover:"var(--background-active-red-marianne-hover)",active:"var(--background-active-red-marianne-active)"}},open:{blueFrance:{default:"var(--background-open-blue-france)",hover:"var(--background-open-blue-france-hover)",active:"var(--background-open-blue-france-active)"},redMarianne:{default:"var(--background-open-red-marianne)",hover:"var(--background-open-red-marianne-hover)",active:"var(--background-open-red-marianne-active)"}},disabled:{grey:{default:"var(--background-disabled-grey)"}},raised:{grey:{default:"var(--background-raised-grey)",hover:"var(--background-raised-grey-hover)",active:"var(--background-raised-grey-active)"}},overlap:{grey:{default:"var(--background-overlap-grey)",hover:"var(--background-overlap-grey-hover)",active:"var(--background-overlap-grey-active)"}},lifted:{grey:{default:"var(--background-lifted-grey)",hover:"var(--background-lifted-grey-hover)",active:"var(--background-lifted-grey-active)"}},altRaised:{grey:{default:"var(--background-alt-raised-grey)",hover:"var(--background-alt-raised-grey-hover)",active:"var(--background-alt-raised-grey-active)"}},altOverlap:{grey:{default:"var(--background-alt-overlap-grey)",hover:"var(--background-alt-overlap-grey-hover)",active:"var(--background-alt-overlap-grey-active)"}},contrastRaised:{grey:{default:"var(--background-contrast-raised-grey)",hover:"var(--background-contrast-raised-grey-hover)",active:"var(--background-contrast-raised-grey-active)"}},contrastOverlap:{grey:{default:"var(--background-contrast-overlap-grey)",hover:"var(--background-contrast-overlap-grey-hover)",active:"var(--background-contrast-overlap-grey-active)"}}},text:{default:{grey:{default:"var(--text-default-grey)"},info:{default:"var(--text-default-info)"},success:{default:"var(--text-default-success)"},warning:{default:"var(--text-default-warning)"},error:{default:"var(--text-default-error)"}},actionHigh:{grey:{default:"var(--text-action-high-grey)"},blueFrance:{default:"var(--text-action-high-blue-france)"},redMarianne:{default:"var(--text-action-high-red-marianne)"},greenTilleulVerveine:{default:"var(--text-action-high-green-tilleul-verveine)"},greenBourgeon:{default:"var(--text-action-high-green-bourgeon)"},greenEmeraude:{default:"var(--text-action-high-green-emeraude)"},greenMenthe:{default:"var(--text-action-high-green-menthe)"},greenArchipel:{default:"var(--text-action-high-green-archipel)"},blueEcume:{default:"var(--text-action-high-blue-ecume)"},blueCumulus:{default:"var(--text-action-high-blue-cumulus)"},purpleGlycine:{default:"var(--text-action-high-purple-glycine)"},pinkMacaron:{default:"var(--text-action-high-pink-macaron)"},pinkTuile:{default:"var(--text-action-high-pink-tuile)"},yellowTournesol:{default:"var(--text-action-high-yellow-tournesol)"},yellowMoutarde:{default:"var(--text-action-high-yellow-moutarde)"},orangeTerreBattue:{default:"var(--text-action-high-orange-terre-battue)"},brownCafeCreme:{default:"var(--text-action-high-brown-cafe-creme)"},brownCaramel:{default:"var(--text-action-high-brown-caramel)"},brownOpera:{default:"var(--text-action-high-brown-opera)"},beigeGrisGalet:{default:"var(--text-action-high-beige-gris-galet)"}},title:{grey:{default:"var(--text-title-grey)"},blueFrance:{default:"var(--text-title-blue-france)"},redMarianne:{default:"var(--text-title-red-marianne)"}},label:{grey:{default:"var(--text-label-grey)"},blueFrance:{default:"var(--text-label-blue-france)"},redMarianne:{default:"var(--text-label-red-marianne)"},greenTilleulVerveine:{default:"var(--text-label-green-tilleul-verveine)"},greenBourgeon:{default:"var(--text-label-green-bourgeon)"},greenEmeraude:{default:"var(--text-label-green-emeraude)"},greenMenthe:{default:"var(--text-label-green-menthe)"},greenArchipel:{default:"var(--text-label-green-archipel)"},blueEcume:{default:"var(--text-label-blue-ecume)"},blueCumulus:{default:"var(--text-label-blue-cumulus)"},purpleGlycine:{default:"var(--text-label-purple-glycine)"},pinkMacaron:{default:"var(--text-label-pink-macaron)"},pinkTuile:{default:"var(--text-label-pink-tuile)"},yellowTournesol:{default:"var(--text-label-yellow-tournesol)"},yellowMoutarde:{default:"var(--text-label-yellow-moutarde)"},orangeTerreBattue:{default:"var(--text-label-orange-terre-battue)"},brownCafeCreme:{default:"var(--text-label-brown-cafe-creme)"},brownCaramel:{default:"var(--text-label-brown-caramel)"},brownOpera:{default:"var(--text-label-brown-opera)"},beigeGrisGalet:{default:"var(--text-label-beige-gris-galet)"}},active:{grey:{default:"var(--text-active-grey)"},blueFrance:{default:"var(--text-active-blue-france)"},redMarianne:{default:"var(--text-active-red-marianne)"}},mention:{grey:{default:"var(--text-mention-grey)"}},inverted:{grey:{default:"var(--text-inverted-grey)"},blueFrance:{default:"var(--text-inverted-blue-france)"},redMarianne:{default:"var(--text-inverted-red-marianne)"},info:{default:"var(--text-inverted-info)"},success:{default:"var(--text-inverted-success)"},warning:{default:"var(--text-inverted-warning)"},error:{default:"var(--text-inverted-error)"},greenTilleulVerveine:{default:"var(--text-inverted-green-tilleul-verveine)"},greenBourgeon:{default:"var(--text-inverted-green-bourgeon)"},greenEmeraude:{default:"var(--text-inverted-green-emeraude)"},greenMenthe:{default:"var(--text-inverted-green-menthe)"},greenArchipel:{default:"var(--text-inverted-green-archipel)"},blueEcume:{default:"var(--text-inverted-blue-ecume)"},blueCumulus:{default:"var(--text-inverted-blue-cumulus)"},purpleGlycine:{default:"var(--text-inverted-purple-glycine)"},pinkMacaron:{default:"var(--text-inverted-pink-macaron)"},pinkTuile:{default:"var(--text-inverted-pink-tuile)"},yellowTournesol:{default:"var(--text-inverted-yellow-tournesol)"},yellowMoutarde:{default:"var(--text-inverted-yellow-moutarde)"},orangeTerreBattue:{default:"var(--text-inverted-orange-terre-battue)"},brownCafeCreme:{default:"var(--text-inverted-brown-cafe-creme)"},brownCaramel:{default:"var(--text-inverted-brown-caramel)"},brownOpera:{default:"var(--text-inverted-brown-opera)"},beigeGrisGalet:{default:"var(--text-inverted-beige-gris-galet)"}},disabled:{grey:{default:"var(--text-disabled-grey)"}},blackWhite:{grey:{default:"var(--text-black-white-grey)"}}},border:{default:{grey:{default:"var(--border-default-grey)"},blueFrance:{default:"var(--border-default-blue-france)"},redMarianne:{default:"var(--border-default-red-marianne)"},greenTilleulVerveine:{default:"var(--border-default-green-tilleul-verveine)"},greenBourgeon:{default:"var(--border-default-green-bourgeon)"},greenEmeraude:{default:"var(--border-default-green-emeraude)"},greenMenthe:{default:"var(--border-default-green-menthe)"},greenArchipel:{default:"var(--border-default-green-archipel)"},blueEcume:{default:"var(--border-default-blue-ecume)"},blueCumulus:{default:"var(--border-default-blue-cumulus)"},purpleGlycine:{default:"var(--border-default-purple-glycine)"},pinkMacaron:{default:"var(--border-default-pink-macaron)"},pinkTuile:{default:"var(--border-default-pink-tuile)"},yellowTournesol:{default:"var(--border-default-yellow-tournesol)"},yellowMoutarde:{default:"var(--border-default-yellow-moutarde)"},orangeTerreBattue:{default:"var(--border-default-orange-terre-battue)"},brownCafeCreme:{default:"var(--border-default-brown-cafe-creme)"},brownCaramel:{default:"var(--border-default-brown-caramel)"},brownOpera:{default:"var(--border-default-brown-opera)"},beigeGrisGalet:{default:"var(--border-default-beige-gris-galet)"}},contrast:{grey:{default:"var(--border-contrast-grey)"}},active:{blueFrance:{default:"var(--border-active-blue-france)"},redMarianne:{default:"var(--border-active-red-marianne)"}},actionHigh:{grey:{default:"var(--border-action-high-grey)"},blueFrance:{default:"var(--border-action-high-blue-france)"},redMarianne:{default:"var(--border-action-high-red-marianne)"},info:{default:"var(--border-action-high-info)"},success:{default:"var(--border-action-high-success)"},warning:{default:"var(--border-action-high-warning)"},error:{default:"var(--border-action-high-error)"}},actionLow:{blueFrance:{default:"var(--border-action-low-blue-france)"},redMarianne:{default:"var(--border-action-low-red-marianne)"},greenTilleulVerveine:{default:"var(--border-action-low-green-tilleul-verveine)"},greenBourgeon:{default:"var(--border-action-low-green-bourgeon)"},greenEmeraude:{default:"var(--border-action-low-green-emeraude)"},greenMenthe:{default:"var(--border-action-low-green-menthe)"},greenArchipel:{default:"var(--border-action-low-green-archipel)"},blueEcume:{default:"var(--border-action-low-blue-ecume)"},blueCumulus:{default:"var(--border-action-low-blue-cumulus)"},purpleGlycine:{default:"var(--border-action-low-purple-glycine)"},pinkMacaron:{default:"var(--border-action-low-pink-macaron)"},pinkTuile:{default:"var(--border-action-low-pink-tuile)"},yellowTournesol:{default:"var(--border-action-low-yellow-tournesol)"},yellowMoutarde:{default:"var(--border-action-low-yellow-moutarde)"},orangeTerreBattue:{default:"var(--border-action-low-orange-terre-battue)"},brownCafeCreme:{default:"var(--border-action-low-brown-cafe-creme)"},brownCaramel:{default:"var(--border-action-low-brown-caramel)"},brownOpera:{default:"var(--border-action-low-brown-opera)"},beigeGrisGalet:{default:"var(--border-action-low-beige-gris-galet)"}},open:{blueFrance:{default:"var(--border-open-blue-france)"},redMarianne:{default:"var(--border-open-red-marianne)"}},plain:{grey:{default:"var(--border-plain-grey)"},blueFrance:{default:"var(--border-plain-blue-france)"},redMarianne:{default:"var(--border-plain-red-marianne)"},info:{default:"var(--border-plain-info)"},success:{default:"var(--border-plain-success)"},warning:{default:"var(--border-plain-warning)"},error:{default:"var(--border-plain-error)"},greenTilleulVerveine:{default:"var(--border-plain-green-tilleul-verveine)"},greenBourgeon:{default:"var(--border-plain-green-bourgeon)"},greenEmeraude:{default:"var(--border-plain-green-emeraude)"},greenMenthe:{default:"var(--border-plain-green-menthe)"},greenArchipel:{default:"var(--border-plain-green-archipel)"},blueEcume:{default:"var(--border-plain-blue-ecume)"},blueCumulus:{default:"var(--border-plain-blue-cumulus)"},purpleGlycine:{default:"var(--border-plain-purple-glycine)"},pinkMacaron:{default:"var(--border-plain-pink-macaron)"},pinkTuile:{default:"var(--border-plain-pink-tuile)"},yellowTournesol:{default:"var(--border-plain-yellow-tournesol)"},yellowMoutarde:{default:"var(--border-plain-yellow-moutarde)"},orangeTerreBattue:{default:"var(--border-plain-orange-terre-battue)"},brownCafeCreme:{default:"var(--border-plain-brown-cafe-creme)"},brownCaramel:{default:"var(--border-plain-brown-caramel)"},brownOpera:{default:"var(--border-plain-brown-opera)"},beigeGrisGalet:{default:"var(--border-plain-beige-gris-galet)"}},disabled:{grey:{default:"var(--border-disabled-grey)"}}},artwork:{major:{blueFrance:{default:"var(--artwork-major-blue-france)",hover:"var(--artwork-major-blue-france-hover)",active:"var(--artwork-major-blue-france-active)"},redMarianne:{default:"var(--artwork-major-red-marianne)",hover:"var(--artwork-major-red-marianne-hover)",active:"var(--artwork-major-red-marianne-active)"},greenTilleulVerveine:{default:"var(--artwork-major-green-tilleul-verveine)",hover:"var(--artwork-major-green-tilleul-verveine-hover)",active:"var(--artwork-major-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--artwork-major-green-bourgeon)",hover:"var(--artwork-major-green-bourgeon-hover)",active:"var(--artwork-major-green-bourgeon-active)"},greenEmeraude:{default:"var(--artwork-major-green-emeraude)",hover:"var(--artwork-major-green-emeraude-hover)",active:"var(--artwork-major-green-emeraude-active)"},greenMenthe:{default:"var(--artwork-major-green-menthe)",hover:"var(--artwork-major-green-menthe-hover)",active:"var(--artwork-major-green-menthe-active)"},greenArchipel:{default:"var(--artwork-major-green-archipel)",hover:"var(--artwork-major-green-archipel-hover)",active:"var(--artwork-major-green-archipel-active)"},blueEcume:{default:"var(--artwork-major-blue-ecume)",hover:"var(--artwork-major-blue-ecume-hover)",active:"var(--artwork-major-blue-ecume-active)"},blueCumulus:{default:"var(--artwork-major-blue-cumulus)",hover:"var(--artwork-major-blue-cumulus-hover)",active:"var(--artwork-major-blue-cumulus-active)"},purpleGlycine:{default:"var(--artwork-major-purple-glycine)",hover:"var(--artwork-major-purple-glycine-hover)",active:"var(--artwork-major-purple-glycine-active)"},pinkMacaron:{default:"var(--artwork-major-pink-macaron)",hover:"var(--artwork-major-pink-macaron-hover)",active:"var(--artwork-major-pink-macaron-active)"},pinkTuile:{default:"var(--artwork-major-pink-tuile)",hover:"var(--artwork-major-pink-tuile-hover)",active:"var(--artwork-major-pink-tuile-active)"},yellowTournesol:{default:"var(--artwork-major-yellow-tournesol)",hover:"var(--artwork-major-yellow-tournesol-hover)",active:"var(--artwork-major-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--artwork-major-yellow-moutarde)",hover:"var(--artwork-major-yellow-moutarde-hover)",active:"var(--artwork-major-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--artwork-major-orange-terre-battue)",hover:"var(--artwork-major-orange-terre-battue-hover)",active:"var(--artwork-major-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--artwork-major-brown-cafe-creme)",hover:"var(--artwork-major-brown-cafe-creme-hover)",active:"var(--artwork-major-brown-cafe-creme-active)"},brownCaramel:{default:"var(--artwork-major-brown-caramel)",hover:"var(--artwork-major-brown-caramel-hover)",active:"var(--artwork-major-brown-caramel-active)"},brownOpera:{default:"var(--artwork-major-brown-opera)",hover:"var(--artwork-major-brown-opera-hover)",active:"var(--artwork-major-brown-opera-active)"},beigeGrisGalet:{default:"var(--artwork-major-beige-gris-galet)",hover:"var(--artwork-major-beige-gris-galet-hover)",active:"var(--artwork-major-beige-gris-galet-active)"}},minor:{blueFrance:{default:"var(--artwork-minor-blue-france)"},redMarianne:{default:"var(--artwork-minor-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-minor-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-minor-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-minor-green-emeraude)"},greenMenthe:{default:"var(--artwork-minor-green-menthe)"},greenArchipel:{default:"var(--artwork-minor-green-archipel)"},blueEcume:{default:"var(--artwork-minor-blue-ecume)"},blueCumulus:{default:"var(--artwork-minor-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-minor-purple-glycine)"},pinkMacaron:{default:"var(--artwork-minor-pink-macaron)"},pinkTuile:{default:"var(--artwork-minor-pink-tuile)"},yellowTournesol:{default:"var(--artwork-minor-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-minor-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-minor-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-minor-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-minor-brown-caramel)"},brownOpera:{default:"var(--artwork-minor-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-minor-beige-gris-galet)"}},decorative:{grey:{default:"var(--artwork-decorative-grey)"},blueFrance:{default:"var(--artwork-decorative-blue-france)"},redMarianne:{default:"var(--artwork-decorative-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-decorative-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-decorative-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-decorative-green-emeraude)"},greenMenthe:{default:"var(--artwork-decorative-green-menthe)"},greenArchipel:{default:"var(--artwork-decorative-green-archipel)"},blueEcume:{default:"var(--artwork-decorative-blue-ecume)"},blueCumulus:{default:"var(--artwork-decorative-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-decorative-purple-glycine)"},pinkMacaron:{default:"var(--artwork-decorative-pink-macaron)"},pinkTuile:{default:"var(--artwork-decorative-pink-tuile)"},yellowTournesol:{default:"var(--artwork-decorative-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-decorative-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-decorative-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-decorative-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-decorative-brown-caramel)"},brownOpera:{default:"var(--artwork-decorative-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-decorative-beige-gris-galet)"}},background:{grey:{default:"var(--artwork-background-grey)"},blueFrance:{default:"var(--artwork-background-blue-france)"},redMarianne:{default:"var(--artwork-background-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-background-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-background-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-background-green-emeraude)"},greenMenthe:{default:"var(--artwork-background-green-menthe)"},greenArchipel:{default:"var(--artwork-background-green-archipel)"},blueEcume:{default:"var(--artwork-background-blue-ecume)"},blueCumulus:{default:"var(--artwork-background-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-background-purple-glycine)"},pinkMacaron:{default:"var(--artwork-background-pink-macaron)"},pinkTuile:{default:"var(--artwork-background-pink-tuile)"},yellowTournesol:{default:"var(--artwork-background-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-background-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-background-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-background-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-background-brown-caramel)"},brownOpera:{default:"var(--artwork-background-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-background-beige-gris-galet)"}},motif:{grey:{default:"var(--artwork-motif-grey)"},blueFrance:{default:"var(--artwork-motif-blue-france)"},redMarianne:{default:"var(--artwork-motif-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-motif-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-motif-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-motif-green-emeraude)"},greenMenthe:{default:"var(--artwork-motif-green-menthe)"},greenArchipel:{default:"var(--artwork-motif-green-archipel)"},blueEcume:{default:"var(--artwork-motif-blue-ecume)"},blueCumulus:{default:"var(--artwork-motif-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-motif-purple-glycine)"},pinkMacaron:{default:"var(--artwork-motif-pink-macaron)"},pinkTuile:{default:"var(--artwork-motif-pink-tuile)"},yellowTournesol:{default:"var(--artwork-motif-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-motif-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-motif-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-motif-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-motif-brown-caramel)"},brownOpera:{default:"var(--artwork-motif-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-motif-beige-gris-galet)"}}}};function getColorDecisionsHex(o){const{colorOptions:e}=o;return{background:{default:{grey:{default:e.grey._1000_50.default,hover:e.grey._1000_50.hover,active:e.grey._1000_50.active}},alt:{grey:{default:e.grey._975_75.default,hover:e.grey._975_75.hover,active:e.grey._975_75.active},blueFrance:{default:e.blueFrance._975_75.default,hover:e.blueFrance._975_75.hover,active:e.blueFrance._975_75.active},redMarianne:{default:e.redMarianne._975_75.default,hover:e.redMarianne._975_75.hover,active:e.redMarianne._975_75.active},greenTilleulVerveine:{default:e.greenTilleulVerveine._975_75.default,hover:e.greenTilleulVerveine._975_75.hover,active:e.greenTilleulVerveine._975_75.active},greenBourgeon:{default:e.greenBourgeon._975_75.default,hover:e.greenBourgeon._975_75.hover,active:e.greenBourgeon._975_75.active},greenEmeraude:{default:e.greenEmeraude._975_75.default,hover:e.greenEmeraude._975_75.hover,active:e.greenEmeraude._975_75.active},greenMenthe:{default:e.greenMenthe._975_75.default,hover:e.greenMenthe._975_75.hover,active:e.greenMenthe._975_75.active},greenArchipel:{default:e.greenArchipel._975_75.default,hover:e.greenArchipel._975_75.hover,active:e.greenArchipel._975_75.active},blueEcume:{default:e.blueEcume._975_75.default,hover:e.blueEcume._975_75.hover,active:e.blueEcume._975_75.active},blueCumulus:{default:e.blueCumulus._975_75.default,hover:e.blueCumulus._975_75.hover,active:e.blueCumulus._975_75.active},purpleGlycine:{default:e.purpleGlycine._975_75.default,hover:e.purpleGlycine._975_75.hover,active:e.purpleGlycine._975_75.active},pinkMacaron:{default:e.pinkMacaron._975_75.default,hover:e.pinkMacaron._975_75.hover,active:e.pinkMacaron._975_75.active},pinkTuile:{default:e.pinkTuile._975_75.default,hover:e.pinkTuile._975_75.hover,active:e.pinkTuile._975_75.active},yellowTournesol:{default:e.yellowTournesol._975_75.default,hover:e.yellowTournesol._975_75.hover,active:e.yellowTournesol._975_75.active},yellowMoutarde:{default:e.yellowMoutarde._975_75.default,hover:e.yellowMoutarde._975_75.hover,active:e.yellowMoutarde._975_75.active},orangeTerreBattue:{default:e.orangeTerreBattue._975_75.default,hover:e.orangeTerreBattue._975_75.hover,active:e.orangeTerreBattue._975_75.active},brownCafeCreme:{default:e.brownCafeCreme._975_75.default,hover:e.brownCafeCreme._975_75.hover,active:e.brownCafeCreme._975_75.active},brownCaramel:{default:e.brownCaramel._975_75.default,hover:e.brownCaramel._975_75.hover,active:e.brownCaramel._975_75.active},brownOpera:{default:e.brownOpera._975_75.default,hover:e.brownOpera._975_75.hover,active:e.brownOpera._975_75.active},beigeGrisGalet:{default:e.beigeGrisGalet._975_75.default,hover:e.beigeGrisGalet._975_75.hover,active:e.beigeGrisGalet._975_75.active}},contrast:{grey:{default:e.grey._950_100.default,hover:e.grey._950_100.hover,active:e.grey._950_100.active},blueFrance:{default:e.blueFrance._950_100.default,hover:e.blueFrance._950_100.hover,active:e.blueFrance._950_100.active},redMarianne:{default:e.redMarianne._950_100.default,hover:e.redMarianne._950_100.hover,active:e.redMarianne._950_100.active},greenTilleulVerveine:{default:e.greenTilleulVerveine._950_100.default,hover:e.greenTilleulVerveine._950_100.hover,active:e.greenTilleulVerveine._950_100.active},greenBourgeon:{default:e.greenBourgeon._950_100.default,hover:e.greenBourgeon._950_100.hover,active:e.greenBourgeon._950_100.active},greenEmeraude:{default:e.greenEmeraude._950_100.default,hover:e.greenEmeraude._950_100.hover,active:e.greenEmeraude._950_100.active},greenMenthe:{default:e.greenMenthe._950_100.default,hover:e.greenMenthe._950_100.hover,active:e.greenMenthe._950_100.active},greenArchipel:{default:e.greenArchipel._950_100.default,hover:e.greenArchipel._950_100.hover,active:e.greenArchipel._950_100.active},blueEcume:{default:e.blueEcume._950_100.default,hover:e.blueEcume._950_100.hover,active:e.blueEcume._950_100.active},blueCumulus:{default:e.blueCumulus._950_100.default,hover:e.blueCumulus._950_100.hover,active:e.blueCumulus._950_100.active},purpleGlycine:{default:e.purpleGlycine._950_100.default,hover:e.purpleGlycine._950_100.hover,active:e.purpleGlycine._950_100.active},pinkMacaron:{default:e.pinkMacaron._950_100.default,hover:e.pinkMacaron._950_100.hover,active:e.pinkMacaron._950_100.active},pinkTuile:{default:e.pinkTuile._950_100.default,hover:e.pinkTuile._950_100.hover,active:e.pinkTuile._950_100.active},yellowTournesol:{default:e.yellowTournesol._950_100.default,hover:e.yellowTournesol._950_100.hover,active:e.yellowTournesol._950_100.active},yellowMoutarde:{default:e.yellowMoutarde._950_100.default,hover:e.yellowMoutarde._950_100.hover,active:e.yellowMoutarde._950_100.active},orangeTerreBattue:{default:e.orangeTerreBattue._950_100.default,hover:e.orangeTerreBattue._950_100.hover,active:e.orangeTerreBattue._950_100.active},brownCafeCreme:{default:e.brownCafeCreme._950_100.default,hover:e.brownCafeCreme._950_100.hover,active:e.brownCafeCreme._950_100.active},brownCaramel:{default:e.brownCaramel._950_100.default,hover:e.brownCaramel._950_100.hover,active:e.brownCaramel._950_100.active},brownOpera:{default:e.brownOpera._950_100.default,hover:e.brownOpera._950_100.hover,active:e.brownOpera._950_100.active},beigeGrisGalet:{default:e.beigeGrisGalet._950_100.default,hover:e.beigeGrisGalet._950_100.hover,active:e.beigeGrisGalet._950_100.active},info:{default:e.info._950_100.default,hover:e.info._950_100.hover,active:e.info._950_100.active},success:{default:e.success._950_100.default,hover:e.success._950_100.hover,active:e.success._950_100.active},warning:{default:e.warning._950_100.default,hover:e.warning._950_100.hover,active:e.warning._950_100.active},error:{default:e.error._950_100.default,hover:e.error._950_100.hover,active:e.error._950_100.active}},flat:{grey:{default:e.grey._200_850.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default}},actionHigh:{grey:{default:e.grey._200_850.default,hover:e.grey._200_850.hover,active:e.grey._200_850.active},blueFrance:{default:e.blueFrance.sun113_625.default,hover:e.blueFrance.sun113_625.hover,active:e.blueFrance.sun113_625.active},redMarianne:{default:e.redMarianne._425_625.default,hover:e.redMarianne._425_625.hover,active:e.redMarianne._425_625.active},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default,hover:e.greenTilleulVerveine.sun418moon817.hover,active:e.greenTilleulVerveine.sun418moon817.active},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default,hover:e.greenBourgeon.sun425moon759.hover,active:e.greenBourgeon.sun425moon759.active},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default,hover:e.greenEmeraude.sun425moon753.hover,active:e.greenEmeraude.sun425moon753.active},greenMenthe:{default:e.greenMenthe.sun373moon652.default,hover:e.greenMenthe.sun373moon652.hover,active:e.greenMenthe.sun373moon652.active},greenArchipel:{default:e.greenArchipel.sun391moon716.default,hover:e.greenArchipel.sun391moon716.hover,active:e.greenArchipel.sun391moon716.active},blueEcume:{default:e.blueEcume.sun247moon675.default,hover:e.blueEcume.sun247moon675.hover,active:e.blueEcume.sun247moon675.active},blueCumulus:{default:e.blueCumulus.sun368moon732.default,hover:e.blueCumulus.sun368moon732.hover,active:e.blueCumulus.sun368moon732.active},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default,hover:e.purpleGlycine.sun319moon630.hover,active:e.purpleGlycine.sun319moon630.active},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default,hover:e.pinkMacaron.sun406moon833.hover,active:e.pinkMacaron.sun406moon833.active},pinkTuile:{default:e.pinkTuile.sun425moon750.default,hover:e.pinkTuile.sun425moon750.hover,active:e.pinkTuile.sun425moon750.active},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default,hover:e.yellowTournesol.sun407moon922.hover,active:e.yellowTournesol.sun407moon922.active},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default,hover:e.yellowMoutarde.sun348moon860.hover,active:e.yellowMoutarde.sun348moon860.active},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default,hover:e.orangeTerreBattue.sun370moon672.hover,active:e.orangeTerreBattue.sun370moon672.active},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default,hover:e.brownCafeCreme.sun383moon885.hover,active:e.brownCafeCreme.sun383moon885.active},brownCaramel:{default:e.brownCaramel.sun425moon901.default,hover:e.brownCaramel.sun425moon901.hover,active:e.brownCaramel.sun425moon901.active},brownOpera:{default:e.brownOpera.sun395moon820.default,hover:e.brownOpera.sun395moon820.hover,active:e.brownOpera.sun395moon820.active},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default,hover:e.beigeGrisGalet.sun407moon821.hover,active:e.beigeGrisGalet.sun407moon821.active},info:{default:e.info._425_625.default,hover:e.info._425_625.hover,active:e.info._425_625.active},success:{default:e.success._425_625.default,hover:e.success._425_625.hover,active:e.success._425_625.active},warning:{default:e.warning._425_625.default,hover:e.warning._425_625.hover,active:e.warning._425_625.active},error:{default:e.error._425_625.default,hover:e.error._425_625.hover,active:e.error._425_625.active}},actionLow:{blueFrance:{default:e.blueFrance._925_125.default,hover:e.blueFrance._925_125.hover,active:e.blueFrance._925_125.active},redMarianne:{default:e.redMarianne._925_125.default,hover:e.redMarianne._925_125.hover,active:e.redMarianne._925_125.active},greenTilleulVerveine:{default:e.greenTilleulVerveine._925_125.default,hover:e.greenTilleulVerveine._925_125.hover,active:e.greenTilleulVerveine._925_125.active},greenBourgeon:{default:e.greenBourgeon._925_125.default,hover:e.greenBourgeon._925_125.hover,active:e.greenBourgeon._925_125.active},greenEmeraude:{default:e.greenEmeraude._925_125.default,hover:e.greenEmeraude._925_125.hover,active:e.greenEmeraude._925_125.active},greenMenthe:{default:e.greenMenthe._925_125.default,hover:e.greenMenthe._925_125.hover,active:e.greenMenthe._925_125.active},greenArchipel:{default:e.greenArchipel._925_125.default,hover:e.greenArchipel._925_125.hover,active:e.greenArchipel._925_125.active},blueEcume:{default:e.blueEcume._925_125.default,hover:e.blueEcume._925_125.hover,active:e.blueEcume._925_125.active},blueCumulus:{default:e.blueCumulus._925_125.default,hover:e.blueCumulus._925_125.hover,active:e.blueCumulus._925_125.active},purpleGlycine:{default:e.purpleGlycine._925_125.default,hover:e.purpleGlycine._925_125.hover,active:e.purpleGlycine._925_125.active},pinkMacaron:{default:e.pinkMacaron._925_125.default,hover:e.pinkMacaron._925_125.hover,active:e.pinkMacaron._925_125.active},pinkTuile:{default:e.pinkTuile._925_125.default,hover:e.pinkTuile._925_125.hover,active:e.pinkTuile._925_125.active},yellowTournesol:{default:e.yellowTournesol._925_125.default,hover:e.yellowTournesol._925_125.hover,active:e.yellowTournesol._925_125.active},yellowMoutarde:{default:e.yellowMoutarde._925_125.default,hover:e.yellowMoutarde._925_125.hover,active:e.yellowMoutarde._925_125.active},orangeTerreBattue:{default:e.orangeTerreBattue._925_125.default,hover:e.orangeTerreBattue._925_125.hover,active:e.orangeTerreBattue._925_125.active},brownCafeCreme:{default:e.brownCafeCreme._925_125.default,hover:e.brownCafeCreme._925_125.hover,active:e.brownCafeCreme._925_125.active},brownCaramel:{default:e.brownCaramel._925_125.default,hover:e.brownCaramel._925_125.hover,active:e.brownCaramel._925_125.active},brownOpera:{default:e.brownOpera._925_125.default,hover:e.brownOpera._925_125.hover,active:e.brownOpera._925_125.active},beigeGrisGalet:{default:e.beigeGrisGalet._925_125.default,hover:e.beigeGrisGalet._925_125.hover,active:e.beigeGrisGalet._925_125.active}},active:{blueFrance:{default:e.blueFrance.sun113_625.default,hover:e.blueFrance.sun113_625.hover,active:e.blueFrance.sun113_625.active},redMarianne:{default:e.redMarianne._425_625.default,hover:e.redMarianne._425_625.hover,active:e.redMarianne._425_625.active}},open:{blueFrance:{default:e.blueFrance._925_125.default,hover:e.blueFrance._925_125.hover,active:e.blueFrance._925_125.active},redMarianne:{default:e.redMarianne._925_125.default,hover:e.redMarianne._925_125.hover,active:e.redMarianne._925_125.active}},disabled:{grey:{default:e.grey._925_125.default}},raised:{grey:{default:e.grey._1000_75.default,hover:e.grey._1000_75.hover,active:e.grey._1000_75.active}},overlap:{grey:{default:e.grey._1000_100.default,hover:e.grey._1000_100.hover,active:e.grey._1000_100.active}},lifted:{grey:{default:e.grey._1000_75.default,hover:e.grey._1000_75.hover,active:e.grey._1000_75.active}},altRaised:{grey:{default:e.grey._975_100.default,hover:e.grey._975_100.hover,active:e.grey._975_100.active}},altOverlap:{grey:{default:e.grey._975_125.default,hover:e.grey._975_125.hover,active:e.grey._975_125.active}},contrastRaised:{grey:{default:e.grey._950_125.default,hover:e.grey._950_125.hover,active:e.grey._950_125.active}},contrastOverlap:{grey:{default:e.grey._950_150.default,hover:e.grey._950_150.hover,active:e.grey._950_150.active}}},text:{default:{grey:{default:e.grey._200_850.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default}},actionHigh:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default}},title:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default}},label:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default}},active:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default}},mention:{grey:{default:e.grey._425_625.default}},inverted:{grey:{default:e.grey._1000_50.default},blueFrance:{default:e.blueFrance._975sun113.default},redMarianne:{default:e.redMarianne._975_75.default},info:{default:e.info._975_75.default},success:{default:e.success._975_75.default},warning:{default:e.warning._975_75.default},error:{default:e.error._975_75.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._975_75.default},greenBourgeon:{default:e.greenBourgeon._975_75.default},greenEmeraude:{default:e.greenEmeraude._975_75.default},greenMenthe:{default:e.greenMenthe._975_75.default},greenArchipel:{default:e.greenArchipel._975_75.default},blueEcume:{default:e.blueEcume._975_75.default},blueCumulus:{default:e.blueCumulus._975_75.default},purpleGlycine:{default:e.purpleGlycine._975_75.default},pinkMacaron:{default:e.pinkMacaron._975_75.default},pinkTuile:{default:e.pinkTuile._975_75.default},yellowTournesol:{default:e.yellowTournesol._975_75.default},yellowMoutarde:{default:e.yellowMoutarde._975_75.default},orangeTerreBattue:{default:e.orangeTerreBattue._975_75.default},brownCafeCreme:{default:e.brownCafeCreme._975_75.default},brownCaramel:{default:e.brownCaramel._975_75.default},brownOpera:{default:e.brownOpera._975_75.default},beigeGrisGalet:{default:e.beigeGrisGalet._975_75.default}},disabled:{grey:{default:e.grey._625_425.default}},blackWhite:{grey:{default:e.grey._0_1000.default}}},border:{default:{grey:{default:e.grey._900_175.default},blueFrance:{default:e.blueFrance.main525.default},redMarianne:{default:e.redMarianne.main472.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.main707.default},greenBourgeon:{default:e.greenBourgeon.main640.default},greenEmeraude:{default:e.greenEmeraude.main632.default},greenMenthe:{default:e.greenMenthe.main548.default},greenArchipel:{default:e.greenArchipel.main557.default},blueEcume:{default:e.blueEcume.main400.default},blueCumulus:{default:e.blueCumulus.main526.default},purpleGlycine:{default:e.purpleGlycine.main494.default},pinkMacaron:{default:e.pinkMacaron.main689.default},pinkTuile:{default:e.pinkTuile.main556.default},yellowTournesol:{default:e.yellowTournesol.main731.default},yellowMoutarde:{default:e.yellowMoutarde.main679.default},orangeTerreBattue:{default:e.orangeTerreBattue.main645.default},brownCafeCreme:{default:e.brownCafeCreme.main782.default},brownCaramel:{default:e.brownCaramel.main648.default},brownOpera:{default:e.brownOpera.main680.default},beigeGrisGalet:{default:e.beigeGrisGalet.main702.default}},contrast:{grey:{default:e.grey._625_425.default}},active:{blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default}},actionHigh:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default}},actionLow:{blueFrance:{default:e.blueFrance._850_200.default},redMarianne:{default:e.redMarianne._850_200.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._850_200.default},greenBourgeon:{default:e.greenBourgeon._850_200.default},greenEmeraude:{default:e.greenEmeraude._850_200.default},greenMenthe:{default:e.greenMenthe._850_200.default},greenArchipel:{default:e.greenArchipel._850_200.default},blueEcume:{default:e.blueEcume._850_200.default},blueCumulus:{default:e.blueCumulus._850_200.default},purpleGlycine:{default:e.purpleGlycine._850_200.default},pinkMacaron:{default:e.pinkMacaron._850_200.default},pinkTuile:{default:e.pinkTuile._850_200.default},yellowTournesol:{default:e.yellowTournesol._850_200.default},yellowMoutarde:{default:e.yellowMoutarde._850_200.default},orangeTerreBattue:{default:e.orangeTerreBattue._850_200.default},brownCafeCreme:{default:e.brownCafeCreme._850_200.default},brownCaramel:{default:e.brownCaramel._850_200.default},brownOpera:{default:e.brownOpera._850_200.default},beigeGrisGalet:{default:e.beigeGrisGalet._850_200.default}},open:{blueFrance:{default:e.blueFrance._925_125.default},redMarianne:{default:e.redMarianne._925_125.default}},plain:{grey:{default:e.grey._200_850.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default}},disabled:{grey:{default:e.grey._925_125.default}}},artwork:{major:{blueFrance:{default:e.blueFrance.sun113_625.default,hover:e.blueFrance.sun113_625.hover,active:e.blueFrance.sun113_625.active},redMarianne:{default:e.redMarianne._425_625.default,hover:e.redMarianne._425_625.hover,active:e.redMarianne._425_625.active},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default,hover:e.greenTilleulVerveine.sun418moon817.hover,active:e.greenTilleulVerveine.sun418moon817.active},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default,hover:e.greenBourgeon.sun425moon759.hover,active:e.greenBourgeon.sun425moon759.active},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default,hover:e.greenEmeraude.sun425moon753.hover,active:e.greenEmeraude.sun425moon753.active},greenMenthe:{default:e.greenMenthe.sun373moon652.default,hover:e.greenMenthe.sun373moon652.hover,active:e.greenMenthe.sun373moon652.active},greenArchipel:{default:e.greenArchipel.sun391moon716.default,hover:e.greenArchipel.sun391moon716.hover,active:e.greenArchipel.sun391moon716.active},blueEcume:{default:e.blueEcume.sun247moon675.default,hover:e.blueEcume.sun247moon675.hover,active:e.blueEcume.sun247moon675.active},blueCumulus:{default:e.blueCumulus.sun368moon732.default,hover:e.blueCumulus.sun368moon732.hover,active:e.blueCumulus.sun368moon732.active},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default,hover:e.purpleGlycine.sun319moon630.hover,active:e.purpleGlycine.sun319moon630.active},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default,hover:e.pinkMacaron.sun406moon833.hover,active:e.pinkMacaron.sun406moon833.active},pinkTuile:{default:e.pinkTuile.sun425moon750.default,hover:e.pinkTuile.sun425moon750.hover,active:e.pinkTuile.sun425moon750.active},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default,hover:e.yellowTournesol.sun407moon922.hover,active:e.yellowTournesol.sun407moon922.active},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default,hover:e.yellowMoutarde.sun348moon860.hover,active:e.yellowMoutarde.sun348moon860.active},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default,hover:e.orangeTerreBattue.sun370moon672.hover,active:e.orangeTerreBattue.sun370moon672.active},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default,hover:e.brownCafeCreme.sun383moon885.hover,active:e.brownCafeCreme.sun383moon885.active},brownCaramel:{default:e.brownCaramel.sun425moon901.default,hover:e.brownCaramel.sun425moon901.hover,active:e.brownCaramel.sun425moon901.active},brownOpera:{default:e.brownOpera.sun395moon820.default,hover:e.brownOpera.sun395moon820.hover,active:e.brownOpera.sun395moon820.active},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default,hover:e.beigeGrisGalet.sun407moon821.hover,active:e.beigeGrisGalet.sun407moon821.active}},minor:{blueFrance:{default:e.blueFrance.main525.default},redMarianne:{default:e.redMarianne.main472.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.main707.default},greenBourgeon:{default:e.greenBourgeon.main640.default},greenEmeraude:{default:e.greenEmeraude.main632.default},greenMenthe:{default:e.greenMenthe.main548.default},greenArchipel:{default:e.greenArchipel.main557.default},blueEcume:{default:e.blueEcume.main400.default},blueCumulus:{default:e.blueCumulus.main526.default},purpleGlycine:{default:e.purpleGlycine.main494.default},pinkMacaron:{default:e.pinkMacaron.main689.default},pinkTuile:{default:e.pinkTuile.main556.default},yellowTournesol:{default:e.yellowTournesol.main731.default},yellowMoutarde:{default:e.yellowMoutarde.main679.default},orangeTerreBattue:{default:e.orangeTerreBattue.main645.default},brownCafeCreme:{default:e.brownCafeCreme.main782.default},brownCaramel:{default:e.brownCaramel.main648.default},brownOpera:{default:e.brownOpera.main680.default},beigeGrisGalet:{default:e.beigeGrisGalet.main702.default}},decorative:{grey:{default:e.grey._950_100.default},blueFrance:{default:e.blueFrance._950_100.default},redMarianne:{default:e.redMarianne._950_100.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._950_100.default},greenBourgeon:{default:e.greenBourgeon._950_100.default},greenEmeraude:{default:e.greenEmeraude._950_100.default},greenMenthe:{default:e.greenMenthe._950_100.default},greenArchipel:{default:e.greenArchipel._950_100.default},blueEcume:{default:e.blueEcume._950_100.default},blueCumulus:{default:e.blueCumulus._950_100.default},purpleGlycine:{default:e.purpleGlycine._950_100.default},pinkMacaron:{default:e.pinkMacaron._950_100.default},pinkTuile:{default:e.pinkTuile._950_100.default},yellowTournesol:{default:e.yellowTournesol._950_100.default},yellowMoutarde:{default:e.yellowMoutarde._950_100.default},orangeTerreBattue:{default:e.orangeTerreBattue._950_100.default},brownCafeCreme:{default:e.brownCafeCreme._950_100.default},brownCaramel:{default:e.brownCaramel._950_100.default},brownOpera:{default:e.brownOpera._950_100.default},beigeGrisGalet:{default:e.beigeGrisGalet._950_100.default}},background:{grey:{default:e.grey._975_75.default},blueFrance:{default:e.blueFrance._975_75.default},redMarianne:{default:e.redMarianne._975_75.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._975_75.default},greenBourgeon:{default:e.greenBourgeon._975_75.default},greenEmeraude:{default:e.greenEmeraude._975_75.default},greenMenthe:{default:e.greenMenthe._975_75.default},greenArchipel:{default:e.greenArchipel._975_75.default},blueEcume:{default:e.blueEcume._975_75.default},blueCumulus:{default:e.blueCumulus._975_75.default},purpleGlycine:{default:e.purpleGlycine._975_75.default},pinkMacaron:{default:e.pinkMacaron._975_75.default},pinkTuile:{default:e.pinkTuile._975_75.default},yellowTournesol:{default:e.yellowTournesol._975_75.default},yellowMoutarde:{default:e.yellowMoutarde._975_75.default},orangeTerreBattue:{default:e.orangeTerreBattue._975_75.default},brownCafeCreme:{default:e.brownCafeCreme._975_75.default},brownCaramel:{default:e.brownCaramel._975_75.default},brownOpera:{default:e.brownOpera._975_75.default},beigeGrisGalet:{default:e.beigeGrisGalet._975_75.default}},motif:{grey:{default:e.grey._925_125.default},blueFrance:{default:e.blueFrance._925_125.default},redMarianne:{default:e.redMarianne._925_125.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._925_125.default},greenBourgeon:{default:e.greenBourgeon._925_125.default},greenEmeraude:{default:e.greenEmeraude._925_125.default},greenMenthe:{default:e.greenMenthe._925_125.default},greenArchipel:{default:e.greenArchipel._925_125.default},blueEcume:{default:e.blueEcume._925_125.default},blueCumulus:{default:e.blueCumulus._925_125.default},purpleGlycine:{default:e.purpleGlycine._925_125.default},pinkMacaron:{default:e.pinkMacaron._925_125.default},pinkTuile:{default:e.pinkTuile._925_125.default},yellowTournesol:{default:e.yellowTournesol._925_125.default},yellowMoutarde:{default:e.yellowMoutarde._925_125.default},orangeTerreBattue:{default:e.orangeTerreBattue._925_125.default},brownCafeCreme:{default:e.brownCafeCreme._925_125.default},brownCaramel:{default:e.brownCaramel._925_125.default},brownOpera:{default:e.brownOpera._925_125.default},beigeGrisGalet:{default:e.beigeGrisGalet._925_125.default}}}}}const colors={options:colorOptions,decisions:colorDecisions,getHex:(()=>{const o=({isDark:s})=>{const a=getColorOptionsHex({isDark:s}),d=getColorDecisionsHex({colorOptions:a});return{options:a,decisions:d}},e={light:void 0,dark:void 0};return({isDark:s})=>{var a,d;return(a=e[d=s?"dark":"light"])!==null&&a!==void 0?a:e[d]=o({isDark:s})}})()},breakpointsValuesUnit="em",breakpointKeys=["xs","sm","md","lg","xl"],breakpointsValues={xs:0,sm:36,md:48,lg:62,xl:78};assert$1();function getBaseFontSizePx(){if(!isBrowser)return 16;const o=document.querySelector("html");assert$1(o!==null);const s=window.getComputedStyle(o).getPropertyValue("font-size");return parseFloat(s)}const epsilon=.003125,breakpoints={up:o=>`@media (min-width:${breakpointsValues[o]}${breakpointsValuesUnit})`,down:o=>`@media (max-width:${breakpointsValues[o]-epsilon}${breakpointsValuesUnit})`,between:(o,e)=>`@media (min-width:${breakpointsValues[o]}${breakpointsValuesUnit}) and (max-width:${breakpointsValues[e]-epsilon}${breakpointsValuesUnit})`,only:o=>breakpointKeys.indexOf(o)+1<breakpointKeys.length?breakpoints.between(o,breakpointKeys[breakpointKeys.indexOf(o)+1]):breakpoints.up((assert$1(o!=="xs"),o)),not:o=>{const e=breakpointKeys.indexOf(o);if(e===0)return breakpoints.up(breakpointKeys[1]);if(e===breakpointKeys.length-1){const s=breakpointKeys[e];return assert$1(s!=="xs"),breakpoints.down(s)}return breakpoints.between(o,breakpointKeys[breakpointKeys.indexOf(o)+1]).replace("@media","@media not all and")},values:(()=>{const o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(()=>{const e="xs";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="sm";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="md";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="lg";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="xl";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})());return assert$1(),o})(),valuesUnit:breakpointsValuesUnit,emValues:(assert$1(),breakpointsValues),getPxValues:()=>{assert$1();const o=getBaseFontSizePx();return Object.fromEntries(Object.entries(breakpointsValues).map(([e,s])=>[e,s*o]))}};function capitalize(o){return o.charAt(0).toUpperCase()+o.slice(1)}const spacingTokenByValue={"1v":"0.25rem","1w":"0.5rem","2v":"0.5rem","3v":"0.75rem","2w":"1rem","4v":"1rem","5v":"1.25rem","3w":"1.5rem","6v":"1.5rem","7v":"1.75rem","4w":"2rem","8v":"2rem","9v":"2.25rem","10v":"2.5rem","5w":"2.5rem","11v":"2.75rem","12v":"3rem","6w":"3rem","13v":"3.25rem","14v":"3.5rem","7w":"3.5rem","15v":"3.75rem","16v":"4rem","8w":"4rem","17v":"4.25rem","18v":"4.5rem","9w":"4.5rem","19v":"4.75rem","10w":"5rem","20v":"5rem","21v":"5.25rem","11w":"5.5rem","22v":"5.5rem","23v":"5.75rem","12w":"6rem","24v":"6rem","25v":"6.25rem","13w":"6.5rem","26v":"6.5rem","27v":"6.75rem","14w":"7rem","28v":"7rem","29v":"7.25rem","15w":"7.5rem","30v":"7.5rem","31v":"7.75rem","16w":"8rem","32v":"8rem"};function spacing(o,e){if(["padding","margin"].indexOf(o)>=0){const s=o;assert$1(e!==void 0);const a={},d=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(()=>{const{rightLeft:b}=e;return b!==void 0&&{right:b,left:b}})()),(()=>{const{topBottom:b}=e;return b!==void 0&&{top:b,bottom:b}})()),e.top!==void 0&&{top:e.top}),e.right!==void 0&&{right:e.right}),e.bottom!==void 0&&{bottom:e.bottom}),e.left!==void 0&&{left:e.left});return["top","right","bottom","left"].forEach(b=>{const _=d[b];_!==void 0&&(a[`${s}${capitalize(b)}`]=typeof _=="number"||_==="auto"?_:spacingTokenByValue[_])}),a}else return spacingTokenByValue[o]}function typeGuard(o,e){return e}const cx$1=(...o)=>{const e=o.length;let s=0,a="";for(;s<e;s++){const d=o[s];if(d==null)continue;let b;switch(typeof d){case"boolean":break;case"object":{if(Array.isArray(d))b=cx$1(...d);else{assert$1(!typeGuard(d,!1)),b="";for(const _ in d)d[_]&&_&&(b&&(b+=" "),b+=_)}break}default:b=d}b&&(a&&(a+=" "),a+=b)}return a},cx=cx$1,typography=[{selector:"h6",style:{fontWeight:700,fontSize:"1.125rem",lineHeight:"1.5rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.25rem",lineHeight:"1.75rem"}}},{selector:"h5",style:{fontWeight:700,fontSize:"1.25rem",lineHeight:"1.75rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.375rem",lineHeight:"1.75rem"}}},{selector:"h4",style:{fontWeight:700,fontSize:"1.375rem",lineHeight:"1.75rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.5rem",lineHeight:"2rem"}}},{selector:"h3",style:{fontWeight:700,fontSize:"1.5rem",lineHeight:"2rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.75rem",lineHeight:"2.25rem"}}},{selector:"h2",style:{fontWeight:700,fontSize:"1.75rem",lineHeight:"2.25rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"2rem",lineHeight:"2.5rem"}}},{selector:"h1",style:{fontWeight:700,fontSize:"2rem",lineHeight:"2.5rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"2.5rem",lineHeight:"3rem"}}},{selector:"p",style:{fontSize:"1rem",lineHeight:"1.5rem",margin:"var(--text-spacing)"}},{selector:".fr-text--light",style:{fontWeight:"300 !important"}},{selector:".fr-text--regular",style:{fontWeight:"400 !important"}},{selector:".fr-text--bold",style:{fontWeight:"700 !important"}},{selector:".fr-text--heavy",style:{fontWeight:"900 !important"}},{selector:".fr-display--xs",style:{fontWeight:"700 !important",fontSize:"2.5rem !important",lineHeight:"3rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"3rem !important",lineHeight:"3.5rem !important"}}},{selector:".fr-display--sm",style:{fontWeight:"700 !important",fontSize:"3rem !important",lineHeight:"3.5rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"3.5rem !important",lineHeight:"4rem !important"}}},{selector:".fr-display--md",style:{fontWeight:"700 !important",fontSize:"3.5rem !important",lineHeight:"4rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"4rem !important",lineHeight:"4.5rem !important"}}},{selector:".fr-display--lg",style:{fontWeight:"700 !important",fontSize:"4rem !important",lineHeight:"4.5rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"4.5rem !important",lineHeight:"5rem !important"}}},{selector:".fr-display--xl",style:{fontWeight:"700 !important",fontSize:"4.5rem !important",lineHeight:"5rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"5rem !important",lineHeight:"5.5rem !important"}}},{selector:".fr-text--alt",style:{fontFamily:'"Spectral", georgia, serif !important'}},{selector:".fr-text--xs",style:{fontSize:"0.75rem !important",lineHeight:"1.25rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--sm",style:{fontSize:"0.875rem !important",lineHeight:"1.5rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--md",style:{fontSize:"1rem !important",lineHeight:"1.5rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--lg",style:{fontSize:"1.125rem !important",lineHeight:"1.75rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--xl",style:{fontSize:"1.25rem !important",lineHeight:"2rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--lead",style:{fontSize:"1.25rem !important",lineHeight:"2rem !important",margin:"var(--text-spacing)"}}],fr={breakpoints,spacing,cx,colors,typography},data_fr_theme="data-fr-theme",data_fr_scheme="data-fr-scheme",rootColorSchemeStyleTagId="dsfr-root-color-scheme";var define_process_env_default={};const $clientSideIsDark=createStatefulObservable(()=>{if(typeof process=="object"&&define_process_env_default.JEST_WORKER_ID!==void 0)return!1;throw new Error(["react-dsfr not initialized.","Refer to the documentation for setup instructions","If it used to work but after an update you're getting this error","it usually means that you have multiple copies of @codegouvfr/react-dsfr in your node_modules","@codegouvfr/react-dsfr is a singleton, try removing your lock file and node_module."].join(" "))}),$isAfterFirstEffect=createStatefulObservable(()=>!1);function getCurrentIsDarkFromHtmlAttribute(){const o=document.documentElement.getAttribute(data_fr_theme);switch(o){case null:return;case"light":return!1;case"dark":return!0}assert$1(!1,`Unrecognized ${data_fr_theme} attribute value: ${o}`)}function startClientSideIsDarkLogic(o){const{doPersistDarkModePreferenceWithCookie:e,registerEffectAction:s,colorSchemeExplicitlyProvidedAsParameter:a,doCheckNonce:d=!1,trustedTypesPolicyName:b}=o,{clientSideIsDark:_,ssrWasPerformedWithIsDark:_e}=(()=>{var ct,dt,pt;const bt=getCurrentIsDarkFromHtmlAttribute();if(bt!==void 0)return{clientSideIsDark:bt,ssrWasPerformedWithIsDark:(ct=window.ssrWasPerformedWithIsDark)!==null&&ct!==void 0?ct:bt};const xt=(()=>{if(a!=="system")switch(a){case"dark":return!0;case"light":return!1}})(),wt=(()=>{const Mt=localStorage.getItem("scheme");if(Mt!==null&&Mt!=="system")switch(Mt){case"dark":return!0;case"light":return!1}})(),Tt=(()=>{if(window.matchMedia)return window.matchMedia("(prefers-color-scheme: dark)").matches})(),Rt=!1;return{ssrWasPerformedWithIsDark:xt??Rt,clientSideIsDark:(pt=(dt=wt??xt)!==null&&dt!==void 0?dt:Tt)!==null&&pt!==void 0?pt:Rt}})(),nt=window.trustedTypes,rt=typeof nt<"u"?nt.createPolicy(b,{createHTML:ct=>ct}):{createHTML:ct=>ct};$clientSideIsDark.current=_,[data_fr_scheme,data_fr_theme].forEach(ct=>document.documentElement.setAttribute(ct,_?"dark":"light")),new MutationObserver(()=>{const ct=getCurrentIsDarkFromHtmlAttribute();assert$1(ct!==void 0),$clientSideIsDark.current=ct}).observe(document.documentElement,{attributes:!0,attributeFilter:[data_fr_theme]});{const ct=dt=>{if(!e)return;let bt=`${data_fr_theme}=${dt?"dark":"light"};path=/;max-age=31536000;SameSite=Strict`;e:{const{hostname:xt}=window.location;if(/(^localhost$)|(^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$)/.test(xt))break e;bt+=`;domain=${xt}`}document.cookie=bt};ct($clientSideIsDark.current),$clientSideIsDark.subscribe(ct)}{const ct=dt=>{var pt;const bt=window.ssrNonce;if(d&&!bt)return;(pt=document.getElementById(rootColorSchemeStyleTagId))===null||pt===void 0||pt.remove();const xt=document.createElement("style");xt.id=rootColorSchemeStyleTagId,bt&&xt.setAttribute("nonce",bt),xt.innerHTML=rt.createHTML(`:root { color-scheme: ${dt?"dark":"light"}; }`),document.head.appendChild(xt)};ct($clientSideIsDark.current),$clientSideIsDark.subscribe(ct)}{const ct=dt=>{var pt;const bt="theme-color";(pt=document.querySelector(`meta[name=${bt}]`))===null||pt===void 0||pt.remove();const xt=document.createElement("meta");xt.name=bt,xt.content=fr.colors.getHex({isDark:dt}).decisions.background.default.grey.default,document.head.appendChild(xt)};ct($clientSideIsDark.current),$clientSideIsDark.subscribe(ct)}s(()=>$isAfterFirstEffect.current=!0)}class Deferred{constructor(){this.isPending=!0;let e,s;this.pr=new Promise((a,d)=>{e=b=>{overwriteReadonlyProp(this,"isPending",!1),a(b)},s=b=>{overwriteReadonlyProp(this,"isPending",!1),d(b)}}),this.resolve=e,this.reject=s}}let isStarted=!1;async function start$1(o){const{defaultColorScheme:e,verbose:s,nextParams:a,doCheckNonce:d,trustedTypesPolicyName:b}=o;if(assert$1(isBrowser),isStarted)return;isStarted=!0;const _=a===void 0?_e=>_e():a.registerEffectAction;startClientSideIsDarkLogic({colorSchemeExplicitlyProvidedAsParameter:e,doPersistDarkModePreferenceWithCookie:a===void 0?!1:a.doPersistDarkModePreferenceWithCookie,registerEffectAction:_,doCheckNonce:d,trustedTypesPolicyName:b}),window.dsfr={verbose:s,mode:"react"},await __vitePreload(()=>import("./dsfr.module-dw2D8BKj.js"),[]),dDsfrLoaded.resolve(),_(()=>{window.dsfr.start()})}const dDsfrLoaded=new Deferred,prDsfrLoaded=dDsfrLoaded.pr;var __rest$a=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};let Link=o=>{const e=o,{href:s}=e,a=__rest$a(e,["href"]);e:{if(s!=="#"||!("onClick"in a))break e;return assert$1(is()),React.createElement("button",Object.assign({},a,{className:cx$1(fr.cx("fr-link"),a.className)}))}return React.createElement("a",Object.assign({href:s},a))};function setLink(o){Link=e=>{var s;{const a=e,{to:d,href:b}=a,_=__rest$a(a,["to","href"]),_e=(s=typeof d=="string"?d:void 0)!==null&&s!==void 0?s:typeof b=="string"?b:void 0;e:{if(_e!=="#"||!("onClick"in _))break e;return assert$1(is()),React.createElement("button",Object.assign({},_,{className:cx$1(fr.cx("fr-link"),_.className)}))}e:{if(_e===void 0||!_e.startsWith("//")&&!/^https?:\/\//.test(_e))break e;return React.createElement("a",Object.assign({href:_e,target:"_blank",rel:"noreferrer"},_))}e:{if(_e===void 0||!_e.startsWith("#"))break e;return React.createElement("a",Object.assign({href:_e},_))}e:{if(_e===void 0||!/^[a-z]+:/.test(_e))break e;return React.createElement("a",Object.assign({href:_e},_))}}return React.createElement(o.Link,Object.assign({},e))}}function getLink(){return{Link}}function getLanguageBestApprox(o){const{languages:e,languageLike:s}=o;e:{const a=e.find(d=>d.toLowerCase()===s.toLowerCase());if(a===void 0)break e;return a}e:{const a=s.split("-")[0].toLowerCase(),d=e.find(b=>b.toLowerCase().includes(a));if(d===void 0)break e;return d}}let useLang_glob=()=>"fr";function setUseLang(o){useLang_glob=o.useLang}function useLang(){return useLang_glob()}function createComponentI18nApi(o){const{componentName:e,frMessages:s}=o,a={fr:s};function d(){const _=useLang(),_e=reactExports.useMemo(()=>{const rt=getLanguageBestApprox({languages:Object.keys(a),languageLike:_});return rt??"fr"},[_]);function nt(rt,ct){var dt;const pt=(dt=a[_e][rt])!==null&&dt!==void 0?dt:a.fr[rt];return ct===void 0?pt:pt(ct)}return{t:nt}}function b(_){const{lang:_e,messages:nt}=_;Object.entries(nt).filter(([,rt])=>rt!==void 0).forEach(([rt,ct])=>{var dt,pt;return((dt=(pt=a)[_e])!==null&&dt!==void 0?dt:pt[_e]={})[rt]=ct})}return{useTranslation:d,[`add${capitalize(e)}Translations`]:b}}function startReactDsfr(o){const{defaultColorScheme:e,verbose:s=!1,Link:a,useLang:d,nonce:b,trustedTypesPolicyName:_="react-dsfr"}=o;a!==void 0&&setLink({Link:a}),d!==void 0&&setUseLang({useLang:d}),assert$1(b!=="","nonce cannot be an empty string");const _e=b!==void 0;_e&&(window.ssrNonce=b),start$1({defaultColorScheme:e,verbose:s,doCheckNonce:_e,trustedTypesPolicyName:_,nextParams:void 0})}var reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function e(ln,uo){var Ln=ln.length;ln.push(uo);e:for(;0<Ln;){var An=Ln-1>>>1,Wn=ln[An];if(0<d(Wn,uo))ln[An]=uo,ln[Ln]=Wn,Ln=An;else break e}}function s(ln){return ln.length===0?null:ln[0]}function a(ln){if(ln.length===0)return null;var uo=ln[0],Ln=ln.pop();if(Ln!==uo){ln[0]=Ln;e:for(var An=0,Wn=ln.length,er=Wn>>>1;An<er;){var no=2*(An+1)-1,Ro=ln[no],On=no+1,_o=ln[On];if(0>d(Ro,Ln))On<Wn&&0>d(_o,Ro)?(ln[An]=_o,ln[On]=Ln,An=On):(ln[An]=Ro,ln[no]=Ln,An=no);else if(On<Wn&&0>d(_o,Ln))ln[An]=_o,ln[On]=Ln,An=On;else break e}}return uo}function d(ln,uo){var Ln=ln.sortIndex-uo.sortIndex;return Ln!==0?Ln:ln.id-uo.id}if(typeof performance=="object"&&typeof performance.now=="function"){var b=performance;o.unstable_now=function(){return b.now()}}else{var _=Date,_e=_.now();o.unstable_now=function(){return _.now()-_e}}var nt=[],rt=[],ct=1,dt=null,pt=3,bt=!1,xt=!1,wt=!1,Tt=typeof setTimeout=="function"?setTimeout:null,Rt=typeof clearTimeout=="function"?clearTimeout:null,Mt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Et(ln){for(var uo=s(rt);uo!==null;){if(uo.callback===null)a(rt);else if(uo.startTime<=ln)a(rt),uo.sortIndex=uo.expirationTime,e(nt,uo);else break;uo=s(rt)}}function $t(ln){if(wt=!1,Et(ln),!xt)if(s(nt)!==null)xt=!0,It(Xt);else{var uo=s(rt);uo!==null&&Vn($t,uo.startTime-ln)}}function Xt(ln,uo){xt=!1,wt&&(wt=!1,Rt(Jt),Jt=-1),bt=!0;var Ln=pt;try{for(Et(uo),dt=s(nt);dt!==null&&(!(dt.expirationTime>uo)||ln&&!an());){var An=dt.callback;if(typeof An=="function"){dt.callback=null,pt=dt.priorityLevel;var Wn=An(dt.expirationTime<=uo);uo=o.unstable_now(),typeof Wn=="function"?dt.callback=Wn:dt===s(nt)&&a(nt),Et(uo)}else a(nt);dt=s(nt)}if(dt!==null)var er=!0;else{var no=s(rt);no!==null&&Vn($t,no.startTime-uo),er=!1}return er}finally{dt=null,pt=Ln,bt=!1}}var Zt=!1,Nt=null,Jt=-1,dn=5,Pn=-1;function an(){return!(o.unstable_now()-Pn<dn)}function Vt(){if(Nt!==null){var ln=o.unstable_now();Pn=ln;var uo=!0;try{uo=Nt(!0,ln)}finally{uo?ao():(Zt=!1,Nt=null)}}else Zt=!1}var ao;if(typeof Mt=="function")ao=function(){Mt(Vt)};else if(typeof MessageChannel<"u"){var hn=new MessageChannel,fn=hn.port2;hn.port1.onmessage=Vt,ao=function(){fn.postMessage(null)}}else ao=function(){Tt(Vt,0)};function It(ln){Nt=ln,Zt||(Zt=!0,ao())}function Vn(ln,uo){Jt=Tt(function(){ln(o.unstable_now())},uo)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(ln){ln.callback=null},o.unstable_continueExecution=function(){xt||bt||(xt=!0,It(Xt))},o.unstable_forceFrameRate=function(ln){0>ln||125<ln?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):dn=0<ln?Math.floor(1e3/ln):5},o.unstable_getCurrentPriorityLevel=function(){return pt},o.unstable_getFirstCallbackNode=function(){return s(nt)},o.unstable_next=function(ln){switch(pt){case 1:case 2:case 3:var uo=3;break;default:uo=pt}var Ln=pt;pt=uo;try{return ln()}finally{pt=Ln}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(ln,uo){switch(ln){case 1:case 2:case 3:case 4:case 5:break;default:ln=3}var Ln=pt;pt=ln;try{return uo()}finally{pt=Ln}},o.unstable_scheduleCallback=function(ln,uo,Ln){var An=o.unstable_now();switch(typeof Ln=="object"&&Ln!==null?(Ln=Ln.delay,Ln=typeof Ln=="number"&&0<Ln?An+Ln:An):Ln=An,ln){case 1:var Wn=-1;break;case 2:Wn=250;break;case 5:Wn=1073741823;break;case 4:Wn=1e4;break;default:Wn=5e3}return Wn=Ln+Wn,ln={id:ct++,callback:uo,priorityLevel:ln,startTime:Ln,expirationTime:Wn,sortIndex:-1},Ln>An?(ln.sortIndex=Ln,e(rt,ln),s(nt)===null&&ln===s(rt)&&(wt?(Rt(Jt),Jt=-1):wt=!0,Vn($t,Ln-An))):(ln.sortIndex=Wn,e(nt,ln),xt||bt||(xt=!0,It(Xt))),ln},o.unstable_shouldYield=an,o.unstable_wrapCallback=function(ln){var uo=pt;return function(){var Ln=pt;pt=uo;try{return ln.apply(this,arguments)}finally{pt=Ln}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(o){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+o,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+o+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(o,e){ha(o,e),ha(o+"Capture",e)}function ha(o,e){for(ea[o]=e,o=0;o<e.length;o++)da.add(e[o])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(o){return ja.call(ma,o)?!0:ja.call(la,o)?!1:ka.test(o)?ma[o]=!0:(la[o]=!0,!1)}function pa(o,e,s,a){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function qa(o,e,s,a){if(e===null||typeof e>"u"||pa(o,e,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v(o,e,s,a,d,b,_){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=a,this.attributeNamespace=d,this.mustUseProperty=s,this.propertyName=o,this.type=e,this.sanitizeURL=b,this.removeEmptyString=_}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){z[o]=new v(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var e=o[0];z[e]=new v(e,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){z[o]=new v(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){z[o]=new v(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){z[o]=new v(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){z[o]=new v(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){z[o]=new v(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){z[o]=new v(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){z[o]=new v(o,5,!1,o.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var e=o.replace(ra,sa);z[e]=new v(e,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var e=o.replace(ra,sa);z[e]=new v(e,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var e=o.replace(ra,sa);z[e]=new v(e,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){z[o]=new v(o,1,!1,o.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){z[o]=new v(o,1,!1,o.toLowerCase(),null,!0,!0)});function ta(o,e,s,a){var d=z.hasOwnProperty(e)?z[e]:null;(d!==null?d.type!==0:a||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,s,d,a)&&(s=null),a||d===null?oa(e)&&(s===null?o.removeAttribute(e):o.setAttribute(e,""+s)):d.mustUseProperty?o[d.propertyName]=s===null?d.type===3?!1:"":s:(e=d.attributeName,a=d.attributeNamespace,s===null?o.removeAttribute(e):(d=d.type,s=d===3||d===4&&s===!0?"":""+s,a?o.setAttributeNS(a,e,s):o.setAttribute(e,s))))}var ua$1=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(o){return o===null||typeof o!="object"?null:(o=Ja&&o[Ja]||o["@@iterator"],typeof o=="function"?o:null)}var A$1=Object.assign,La;function Ma(o){if(La===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+o}var Na=!1;function Oa(o,e){if(!o||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(rt){var a=rt}Reflect.construct(o,[],e)}else{try{e.call()}catch(rt){a=rt}o.call(e.prototype)}else{try{throw Error()}catch(rt){a=rt}o()}}catch(rt){if(rt&&a&&typeof rt.stack=="string"){for(var d=rt.stack.split(`
`),b=a.stack.split(`
`),_=d.length-1,_e=b.length-1;1<=_&&0<=_e&&d[_]!==b[_e];)_e--;for(;1<=_&&0<=_e;_--,_e--)if(d[_]!==b[_e]){if(_!==1||_e!==1)do if(_--,_e--,0>_e||d[_]!==b[_e]){var nt=`
`+d[_].replace(" at new "," at ");return o.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",o.displayName)),nt}while(1<=_&&0<=_e);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(o=o?o.displayName||o.name:"")?Ma(o):""}function Pa(o){switch(o.tag){case 5:return Ma(o.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return o=Oa(o.type,!1),o;case 11:return o=Oa(o.type.render,!1),o;case 1:return o=Oa(o.type,!0),o;default:return""}}function Qa(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ca:return(o.displayName||"Context")+".Consumer";case Ba:return(o._context.displayName||"Context")+".Provider";case Da:var e=o.render;return o=o.displayName,o||(o=e.displayName||e.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ga:return e=o.displayName||null,e!==null?e:Qa(o.type)||"Memo";case Ha:e=o._payload,o=o._init;try{return Qa(o(e))}catch{}}return null}function Ra(o){var e=o.type;switch(o.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=e.render,o=o.displayName||o.name||"",e.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ta(o){var e=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(o){var e=Ta(o)?"checked":"value",s=Object.getOwnPropertyDescriptor(o.constructor.prototype,e),a=""+o[e];if(!o.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,b=s.set;return Object.defineProperty(o,e,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,b.call(this,_)}}),Object.defineProperty(o,e,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){o._valueTracker=null,delete o[e]}}}}function Va(o){o._valueTracker||(o._valueTracker=Ua(o))}function Wa(o){if(!o)return!1;var e=o._valueTracker;if(!e)return!0;var s=e.getValue(),a="";return o&&(a=Ta(o)?o.checked?"true":"false":o.value),o=a,o!==s?(e.setValue(o),!0):!1}function Xa(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ya(o,e){var s=e.checked;return A$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??o._wrapperState.initialChecked})}function Za(o,e){var s=e.defaultValue==null?"":e.defaultValue,a=e.checked!=null?e.checked:e.defaultChecked;s=Sa(e.value!=null?e.value:s),o._wrapperState={initialChecked:a,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(o,e){e=e.checked,e!=null&&ta(o,"checked",e,!1)}function bb(o,e){ab(o,e);var s=Sa(e.value),a=e.type;if(s!=null)a==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+s):o.value!==""+s&&(o.value=""+s);else if(a==="submit"||a==="reset"){o.removeAttribute("value");return}e.hasOwnProperty("value")?cb(o,e.type,s):e.hasOwnProperty("defaultValue")&&cb(o,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(o.defaultChecked=!!e.defaultChecked)}function db(o,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var a=e.type;if(!(a!=="submit"&&a!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+o._wrapperState.initialValue,s||e===o.value||(o.value=e),o.defaultValue=e}s=o.name,s!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,s!==""&&(o.name=s)}function cb(o,e,s){(e!=="number"||Xa(o.ownerDocument)!==o)&&(s==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+s&&(o.defaultValue=""+s))}var eb=Array.isArray;function fb(o,e,s,a){if(o=o.options,e){e={};for(var d=0;d<s.length;d++)e["$"+s[d]]=!0;for(s=0;s<o.length;s++)d=e.hasOwnProperty("$"+o[s].value),o[s].selected!==d&&(o[s].selected=d),d&&a&&(o[s].defaultSelected=!0)}else{for(s=""+Sa(s),e=null,d=0;d<o.length;d++){if(o[d].value===s){o[d].selected=!0,a&&(o[d].defaultSelected=!0);return}e!==null||o[d].disabled||(e=o[d])}e!==null&&(e.selected=!0)}}function gb(o,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A$1({},e,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function hb(o,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(p(92));if(eb(s)){if(1<s.length)throw Error(p(93));s=s[0]}e=s}e==null&&(e=""),s=e}o._wrapperState={initialValue:Sa(s)}}function ib(o,e){var s=Sa(e.value),a=Sa(e.defaultValue);s!=null&&(s=""+s,s!==o.value&&(o.value=s),e.defaultValue==null&&o.defaultValue!==s&&(o.defaultValue=s)),a!=null&&(o.defaultValue=""+a)}function jb(o){var e=o.textContent;e===o._wrapperState.initialValue&&e!==""&&e!==null&&(o.value=e)}function kb(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(o,e){return o==null||o==="http://www.w3.org/1999/xhtml"?kb(e):o==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var mb,nb=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,a,d){MSApp.execUnsafeLocalFunction(function(){return o(e,s,a,d)})}:o}(function(o,e){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;e.firstChild;)o.appendChild(e.firstChild)}});function ob(o,e){if(e){var s=o.firstChild;if(s&&s===o.lastChild&&s.nodeType===3){s.nodeValue=e;return}}o.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(o){qb.forEach(function(e){e=e+o.charAt(0).toUpperCase()+o.substring(1),pb[e]=pb[o]})});function rb(o,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||pb.hasOwnProperty(o)&&pb[o]?(""+e).trim():e+"px"}function sb(o,e){o=o.style;for(var s in e)if(e.hasOwnProperty(s)){var a=s.indexOf("--")===0,d=rb(s,e[s],a);s==="float"&&(s="cssFloat"),a?o.setProperty(s,d):o[s]=d}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(o,e){if(e){if(tb[o]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,o));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(o,e){if(o.indexOf("-")===-1)return typeof e.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yb=null,zb=null,Ab=null;function Bb(o){if(o=Cb(o)){if(typeof yb!="function")throw Error(p(280));var e=o.stateNode;e&&(e=Db(e),yb(o.stateNode,o.type,e))}}function Eb(o){zb?Ab?Ab.push(o):Ab=[o]:zb=o}function Fb(){if(zb){var o=zb,e=Ab;if(Ab=zb=null,Bb(o),e)for(o=0;o<e.length;o++)Bb(e[o])}}function Gb(o,e){return o(e)}function Hb(){}var Ib=!1;function Jb(o,e,s){if(Ib)return o(e,s);Ib=!0;try{return Gb(o,e,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(o,e){var s=o.stateNode;if(s===null)return null;var a=Db(s);if(a===null)return null;s=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(o=o.type,a=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!a;break e;default:o=!1}if(o)return null;if(s&&typeof s!="function")throw Error(p(231,e,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(o,e,s,a,d,b,_,_e,nt){var rt=Array.prototype.slice.call(arguments,3);try{e.apply(s,rt)}catch(ct){this.onError(ct)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(o){Ob=!0,Pb=o}};function Tb(o,e,s,a,d,b,_,_e,nt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(o,e,s,a,d,b,_,_e,nt){if(Tb.apply(this,arguments),Ob){if(Ob){var rt=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=rt)}}function Vb(o){var e=o,s=o;if(o.alternate)for(;e.return;)e=e.return;else{o=e;do e=o,e.flags&4098&&(s=e.return),o=e.return;while(o)}return e.tag===3?s:null}function Wb(o){if(o.tag===13){var e=o.memoizedState;if(e===null&&(o=o.alternate,o!==null&&(e=o.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(o){if(Vb(o)!==o)throw Error(p(188))}function Yb(o){var e=o.alternate;if(!e){if(e=Vb(o),e===null)throw Error(p(188));return e!==o?null:o}for(var s=o,a=e;;){var d=s.return;if(d===null)break;var b=d.alternate;if(b===null){if(a=d.return,a!==null){s=a;continue}break}if(d.child===b.child){for(b=d.child;b;){if(b===s)return Xb(d),o;if(b===a)return Xb(d),e;b=b.sibling}throw Error(p(188))}if(s.return!==a.return)s=d,a=b;else{for(var _=!1,_e=d.child;_e;){if(_e===s){_=!0,s=d,a=b;break}if(_e===a){_=!0,a=d,s=b;break}_e=_e.sibling}if(!_){for(_e=b.child;_e;){if(_e===s){_=!0,s=b,a=d;break}if(_e===a){_=!0,a=b,s=d;break}_e=_e.sibling}if(!_)throw Error(p(189))}}if(s.alternate!==a)throw Error(p(190))}if(s.tag!==3)throw Error(p(188));return s.stateNode.current===s?o:e}function Zb(o){return o=Yb(o),o!==null?$b(o):null}function $b(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var e=$b(o);if(e!==null)return e;o=o.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(o){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,o,void 0,(o.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(o){return o>>>=0,o===0?32:31-(pc(o)/qc|0)|0}var rc=64,sc=4194304;function tc(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function uc(o,e){var s=o.pendingLanes;if(s===0)return 0;var a=0,d=o.suspendedLanes,b=o.pingedLanes,_=s&268435455;if(_!==0){var _e=_&~d;_e!==0?a=tc(_e):(b&=_,b!==0&&(a=tc(b)))}else _=s&~d,_!==0?a=tc(_):b!==0&&(a=tc(b));if(a===0)return 0;if(e!==0&&e!==a&&!(e&d)&&(d=a&-a,b=e&-e,d>=b||d===16&&(b&4194240)!==0))return e;if(a&4&&(a|=s&16),e=o.entangledLanes,e!==0)for(o=o.entanglements,e&=a;0<e;)s=31-oc(e),d=1<<s,a|=o[s],e&=~d;return a}function vc(o,e){switch(o){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(o,e){for(var s=o.suspendedLanes,a=o.pingedLanes,d=o.expirationTimes,b=o.pendingLanes;0<b;){var _=31-oc(b),_e=1<<_,nt=d[_];nt===-1?(!(_e&s)||_e&a)&&(d[_]=vc(_e,e)):nt<=e&&(o.expiredLanes|=_e),b&=~_e}}function xc(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function yc(){var o=rc;return rc<<=1,!(rc&4194240)&&(rc=64),o}function zc(o){for(var e=[],s=0;31>s;s++)e.push(o);return e}function Ac(o,e,s){o.pendingLanes|=e,e!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,e=31-oc(e),o[e]=s}function Bc(o,e){var s=o.pendingLanes&~e;o.pendingLanes=e,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=e,o.mutableReadLanes&=e,o.entangledLanes&=e,e=o.entanglements;var a=o.eventTimes;for(o=o.expirationTimes;0<s;){var d=31-oc(s),b=1<<d;e[d]=0,a[d]=-1,o[d]=-1,s&=~b}}function Cc(o,e){var s=o.entangledLanes|=e;for(o=o.entanglements;s;){var a=31-oc(s),d=1<<a;d&e|o[a]&e&&(o[a]|=e),s&=~d}}var C=0;function Dc(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(o,e){switch(o){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(o,e,s,a,d,b){return o===null||o.nativeEvent!==b?(o={blockedOn:e,domEventName:s,eventSystemFlags:a,nativeEvent:b,targetContainers:[d]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),o):(o.eventSystemFlags|=a,e=o.targetContainers,d!==null&&e.indexOf(d)===-1&&e.push(d),o)}function Uc(o,e,s,a,d){switch(e){case"focusin":return Lc=Tc(Lc,o,e,s,a,d),!0;case"dragenter":return Mc=Tc(Mc,o,e,s,a,d),!0;case"mouseover":return Nc=Tc(Nc,o,e,s,a,d),!0;case"pointerover":var b=d.pointerId;return Oc.set(b,Tc(Oc.get(b)||null,o,e,s,a,d)),!0;case"gotpointercapture":return b=d.pointerId,Pc.set(b,Tc(Pc.get(b)||null,o,e,s,a,d)),!0}return!1}function Vc(o){var e=Wc(o.target);if(e!==null){var s=Vb(e);if(s!==null){if(e=s.tag,e===13){if(e=Wb(s),e!==null){o.blockedOn=e,Ic(o.priority,function(){Gc(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){o.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xc(o){if(o.blockedOn!==null)return!1;for(var e=o.targetContainers;0<e.length;){var s=Yc(o.domEventName,o.eventSystemFlags,e[0],o.nativeEvent);if(s===null){s=o.nativeEvent;var a=new s.constructor(s.type,s);wb=a,s.target.dispatchEvent(a),wb=null}else return e=Cb(s),e!==null&&Fc(e),o.blockedOn=s,!1;e.shift()}return!0}function Zc(o,e,s){Xc(o)&&s.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(o,e){o.blockedOn===e&&(o.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(o){function e(d){return ad(d,o)}if(0<Kc.length){ad(Kc[0],o);for(var s=1;s<Kc.length;s++){var a=Kc[s];a.blockedOn===o&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,o),Mc!==null&&ad(Mc,o),Nc!==null&&ad(Nc,o),Oc.forEach(e),Pc.forEach(e),s=0;s<Qc.length;s++)a=Qc[s],a.blockedOn===o&&(a.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(o,e,s,a){var d=C,b=cd.transition;cd.transition=null;try{C=1,fd(o,e,s,a)}finally{C=d,cd.transition=b}}function gd(o,e,s,a){var d=C,b=cd.transition;cd.transition=null;try{C=4,fd(o,e,s,a)}finally{C=d,cd.transition=b}}function fd(o,e,s,a){if(dd){var d=Yc(o,e,s,a);if(d===null)hd(o,e,a,id,s),Sc(o,a);else if(Uc(d,o,e,s,a))a.stopPropagation();else if(Sc(o,a),e&4&&-1<Rc.indexOf(o)){for(;d!==null;){var b=Cb(d);if(b!==null&&Ec(b),b=Yc(o,e,s,a),b===null&&hd(o,e,a,id,s),b===d)break;d=b}d!==null&&a.stopPropagation()}else hd(o,e,a,null,s)}}var id=null;function Yc(o,e,s,a){if(id=null,o=xb(a),o=Wc(o),o!==null)if(e=Vb(o),e===null)o=null;else if(s=e.tag,s===13){if(o=Wb(e),o!==null)return o;o=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;o=null}else e!==o&&(o=null);return id=o,null}function jd(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var o,e=ld,s=e.length,a,d="value"in kd?kd.value:kd.textContent,b=d.length;for(o=0;o<s&&e[o]===d[o];o++);var _=s-o;for(a=1;a<=_&&e[s-a]===d[b-a];a++);return md=d.slice(o,1<a?1-a:void 0)}function od(o){var e=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&e===13&&(o=13)):o=e,o===10&&(o=13),32<=o||o===13?o:0}function pd(){return!0}function qd(){return!1}function rd(o){function e(s,a,d,b,_){this._reactName=s,this._targetInst=d,this.type=a,this.nativeEvent=b,this.target=_,this.currentTarget=null;for(var _e in o)o.hasOwnProperty(_e)&&(s=o[_e],this[_e]=s?s(b):b[_e]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==yd&&(yd&&o.type==="mousemove"?(wd=o.screenX-yd.screenX,xd=o.screenY-yd.screenY):xd=wd=0,yd=o),wd)},movementY:function(o){return"movementY"in o?o.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(o){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(o):(o=Od[o])?!!e[o]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(o){if(o.key){var e=Md[o.key]||o.key;if(e!=="Unidentified")return e}return o.type==="keypress"?(o=od(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Nd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(o){return o.type==="keypress"?od(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?od(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(o,e){switch(o){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ie$2=!1;function je(o,e){switch(o){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return o=e.data,o===ee&&fe?null:o;default:return null}}function ke(o,e){if(ie$2)return o==="compositionend"||!ae&&ge(o,e)?(o=nd(),md=ld=kd=null,ie$2=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(o){var e=o&&o.nodeName&&o.nodeName.toLowerCase();return e==="input"?!!le[o.type]:e==="textarea"}function ne(o,e,s,a){Eb(a),e=oe(e,"onChange"),0<e.length&&(s=new td("onChange","change",null,s,a),o.push({event:s,listeners:e}))}var pe=null,qe=null;function re(o){se(o,0)}function te(o){var e=ue(o);if(Wa(e))return o}function ve(o,e){if(o==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(o){if(o.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,o,xb(o)),Jb(re,e)}}function Ce(o,e,s){o==="focusin"?(Ae(),pe=e,qe=s,pe.attachEvent("onpropertychange",Be)):o==="focusout"&&Ae()}function De(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return te(qe)}function Ee(o,e){if(o==="click")return te(e)}function Fe(o,e){if(o==="input"||o==="change")return te(e)}function Ge(o,e){return o===e&&(o!==0||1/o===1/e)||o!==o&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(o,e){if(He(o,e))return!0;if(typeof o!="object"||o===null||typeof e!="object"||e===null)return!1;var s=Object.keys(o),a=Object.keys(e);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var d=s[a];if(!ja.call(e,d)||!He(o[d],e[d]))return!1}return!0}function Je(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ke(o,e){var s=Je(o);o=0;for(var a;s;){if(s.nodeType===3){if(a=o+s.textContent.length,o<=e&&a>=e)return{node:s,offset:e-o};o=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(o,e){return o&&e?o===e?!0:o&&o.nodeType===3?!1:e&&e.nodeType===3?Le(o,e.parentNode):"contains"in o?o.contains(e):o.compareDocumentPosition?!!(o.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var o=window,e=Xa();e instanceof o.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)o=e.contentWindow;else break;e=Xa(o.document)}return e}function Ne(o){var e=o&&o.nodeName&&o.nodeName.toLowerCase();return e&&(e==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||e==="textarea"||o.contentEditable==="true")}function Oe(o){var e=Me(),s=o.focusedElem,a=o.selectionRange;if(e!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(a!==null&&Ne(s)){if(e=a.start,o=a.end,o===void 0&&(o=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(o,s.value.length);else if(o=(e=s.ownerDocument||document)&&e.defaultView||window,o.getSelection){o=o.getSelection();var d=s.textContent.length,b=Math.min(a.start,d);a=a.end===void 0?b:Math.min(a.end,d),!o.extend&&b>a&&(d=a,a=b,b=d),d=Ke(s,b);var _=Ke(s,a);d&&_&&(o.rangeCount!==1||o.anchorNode!==d.node||o.anchorOffset!==d.offset||o.focusNode!==_.node||o.focusOffset!==_.offset)&&(e=e.createRange(),e.setStart(d.node,d.offset),o.removeAllRanges(),b>a?(o.addRange(e),o.extend(_.node,_.offset)):(e.setEnd(_.node,_.offset),o.addRange(e)))}}for(e=[],o=s;o=o.parentNode;)o.nodeType===1&&e.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)o=e[s],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(o,e,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(e=new td("onSelect","select",null,e,s),o.push({event:e,listeners:a}),e.target=Qe)))}function Ve(o,e){var s={};return s[o.toLowerCase()]=e.toLowerCase(),s["Webkit"+o]="webkit"+e,s["Moz"+o]="moz"+e,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(o){if(Xe[o])return Xe[o];if(!We[o])return o;var e=We[o],s;for(s in e)if(e.hasOwnProperty(s)&&s in Ye)return Xe[o]=e[s];return o}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(o,e){df.set(o,e),fa(e,[o])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(o,e,s){var a=o.type||"unknown-event";o.currentTarget=s,Ub(a,e,void 0,o),o.currentTarget=null}function se(o,e){e=(e&4)!==0;for(var s=0;s<o.length;s++){var a=o[s],d=a.event;a=a.listeners;e:{var b=void 0;if(e)for(var _=a.length-1;0<=_;_--){var _e=a[_],nt=_e.instance,rt=_e.currentTarget;if(_e=_e.listener,nt!==b&&d.isPropagationStopped())break e;nf(d,_e,rt),b=nt}else for(_=0;_<a.length;_++){if(_e=a[_],nt=_e.instance,rt=_e.currentTarget,_e=_e.listener,nt!==b&&d.isPropagationStopped())break e;nf(d,_e,rt),b=nt}}}if(Qb)throw o=Rb,Qb=!1,Rb=null,o}function D(o,e){var s=e[of];s===void 0&&(s=e[of]=new Set);var a=o+"__bubble";s.has(a)||(pf(e,o,2,!1),s.add(a))}function qf(o,e,s){var a=0;e&&(a|=4),pf(s,o,a,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(o){if(!o[rf]){o[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,o),qf(s,!0,o))});var e=o.nodeType===9?o:o.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(o,e,s,a){switch(jd(e)){case 1:var d=ed;break;case 4:d=gd;break;default:d=fd}s=d.bind(null,e,s,o),d=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(d=!0),a?d!==void 0?o.addEventListener(e,s,{capture:!0,passive:d}):o.addEventListener(e,s,!0):d!==void 0?o.addEventListener(e,s,{passive:d}):o.addEventListener(e,s,!1)}function hd(o,e,s,a,d){var b=a;if(!(e&1)&&!(e&2)&&a!==null)e:for(;;){if(a===null)return;var _=a.tag;if(_===3||_===4){var _e=a.stateNode.containerInfo;if(_e===d||_e.nodeType===8&&_e.parentNode===d)break;if(_===4)for(_=a.return;_!==null;){var nt=_.tag;if((nt===3||nt===4)&&(nt=_.stateNode.containerInfo,nt===d||nt.nodeType===8&&nt.parentNode===d))return;_=_.return}for(;_e!==null;){if(_=Wc(_e),_===null)return;if(nt=_.tag,nt===5||nt===6){a=b=_;continue e}_e=_e.parentNode}}a=a.return}Jb(function(){var rt=b,ct=xb(s),dt=[];e:{var pt=df.get(o);if(pt!==void 0){var bt=td,xt=o;switch(o){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":bt=Rd;break;case"focusin":xt="focus",bt=Fd;break;case"focusout":xt="blur",bt=Fd;break;case"beforeblur":case"afterblur":bt=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=Vd;break;case $e:case af:case bf:bt=Hd;break;case cf:bt=Xd;break;case"scroll":bt=vd;break;case"wheel":bt=Zd;break;case"copy":case"cut":case"paste":bt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=Td}var wt=(e&4)!==0,Tt=!wt&&o==="scroll",Rt=wt?pt!==null?pt+"Capture":null:pt;wt=[];for(var Mt=rt,Et;Mt!==null;){Et=Mt;var $t=Et.stateNode;if(Et.tag===5&&$t!==null&&(Et=$t,Rt!==null&&($t=Kb(Mt,Rt),$t!=null&&wt.push(tf(Mt,$t,Et)))),Tt)break;Mt=Mt.return}0<wt.length&&(pt=new bt(pt,xt,null,s,ct),dt.push({event:pt,listeners:wt}))}}if(!(e&7)){e:{if(pt=o==="mouseover"||o==="pointerover",bt=o==="mouseout"||o==="pointerout",pt&&s!==wb&&(xt=s.relatedTarget||s.fromElement)&&(Wc(xt)||xt[uf]))break e;if((bt||pt)&&(pt=ct.window===ct?ct:(pt=ct.ownerDocument)?pt.defaultView||pt.parentWindow:window,bt?(xt=s.relatedTarget||s.toElement,bt=rt,xt=xt?Wc(xt):null,xt!==null&&(Tt=Vb(xt),xt!==Tt||xt.tag!==5&&xt.tag!==6)&&(xt=null)):(bt=null,xt=rt),bt!==xt)){if(wt=Bd,$t="onMouseLeave",Rt="onMouseEnter",Mt="mouse",(o==="pointerout"||o==="pointerover")&&(wt=Td,$t="onPointerLeave",Rt="onPointerEnter",Mt="pointer"),Tt=bt==null?pt:ue(bt),Et=xt==null?pt:ue(xt),pt=new wt($t,Mt+"leave",bt,s,ct),pt.target=Tt,pt.relatedTarget=Et,$t=null,Wc(ct)===rt&&(wt=new wt(Rt,Mt+"enter",xt,s,ct),wt.target=Et,wt.relatedTarget=Tt,$t=wt),Tt=$t,bt&&xt)t:{for(wt=bt,Rt=xt,Mt=0,Et=wt;Et;Et=vf(Et))Mt++;for(Et=0,$t=Rt;$t;$t=vf($t))Et++;for(;0<Mt-Et;)wt=vf(wt),Mt--;for(;0<Et-Mt;)Rt=vf(Rt),Et--;for(;Mt--;){if(wt===Rt||Rt!==null&&wt===Rt.alternate)break t;wt=vf(wt),Rt=vf(Rt)}wt=null}else wt=null;bt!==null&&wf(dt,pt,bt,wt,!1),xt!==null&&Tt!==null&&wf(dt,Tt,xt,wt,!0)}}e:{if(pt=rt?ue(rt):window,bt=pt.nodeName&&pt.nodeName.toLowerCase(),bt==="select"||bt==="input"&&pt.type==="file")var Xt=ve;else if(me(pt))if(we)Xt=Fe;else{Xt=De;var Zt=Ce}else(bt=pt.nodeName)&&bt.toLowerCase()==="input"&&(pt.type==="checkbox"||pt.type==="radio")&&(Xt=Ee);if(Xt&&(Xt=Xt(o,rt))){ne(dt,Xt,s,ct);break e}Zt&&Zt(o,pt,rt),o==="focusout"&&(Zt=pt._wrapperState)&&Zt.controlled&&pt.type==="number"&&cb(pt,"number",pt.value)}switch(Zt=rt?ue(rt):window,o){case"focusin":(me(Zt)||Zt.contentEditable==="true")&&(Qe=Zt,Re=rt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(dt,s,ct);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(dt,s,ct)}var Nt;if(ae)e:{switch(o){case"compositionstart":var Jt="onCompositionStart";break e;case"compositionend":Jt="onCompositionEnd";break e;case"compositionupdate":Jt="onCompositionUpdate";break e}Jt=void 0}else ie$2?ge(o,s)&&(Jt="onCompositionEnd"):o==="keydown"&&s.keyCode===229&&(Jt="onCompositionStart");Jt&&(de&&s.locale!=="ko"&&(ie$2||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&ie$2&&(Nt=nd()):(kd=ct,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),Zt=oe(rt,Jt),0<Zt.length&&(Jt=new Ld(Jt,o,null,s,ct),dt.push({event:Jt,listeners:Zt}),Nt?Jt.data=Nt:(Nt=he(s),Nt!==null&&(Jt.data=Nt)))),(Nt=ce?je(o,s):ke(o,s))&&(rt=oe(rt,"onBeforeInput"),0<rt.length&&(ct=new Ld("onBeforeInput","beforeinput",null,s,ct),dt.push({event:ct,listeners:rt}),ct.data=Nt))}se(dt,e)})}function tf(o,e,s){return{instance:o,listener:e,currentTarget:s}}function oe(o,e){for(var s=e+"Capture",a=[];o!==null;){var d=o,b=d.stateNode;d.tag===5&&b!==null&&(d=b,b=Kb(o,s),b!=null&&a.unshift(tf(o,b,d)),b=Kb(o,e),b!=null&&a.push(tf(o,b,d))),o=o.return}return a}function vf(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function wf(o,e,s,a,d){for(var b=e._reactName,_=[];s!==null&&s!==a;){var _e=s,nt=_e.alternate,rt=_e.stateNode;if(nt!==null&&nt===a)break;_e.tag===5&&rt!==null&&(_e=rt,d?(nt=Kb(s,b),nt!=null&&_.unshift(tf(s,nt,_e))):d||(nt=Kb(s,b),nt!=null&&_.push(tf(s,nt,_e)))),s=s.return}_.length!==0&&o.push({event:e,listeners:_})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(o){return(typeof o=="string"?o:""+o).replace(xf,`
`).replace(yf,"")}function Af(o,e,s){if(e=zf(e),zf(o)!==e&&s)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(o,e){return o==="textarea"||o==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(o){return Hf.resolve(null).then(o).catch(If)}:Ff;function If(o){setTimeout(function(){throw o})}function Kf(o,e){var s=e,a=0;do{var d=s.nextSibling;if(o.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(a===0){o.removeChild(d),bd(e);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=d}while(s);bd(e)}function Lf(o){for(;o!=null;o=o.nextSibling){var e=o.nodeType;if(e===1||e===3)break;if(e===8){if(e=o.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return o}function Mf(o){o=o.previousSibling;for(var e=0;o;){if(o.nodeType===8){var s=o.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return o;e--}else s==="/$"&&e++}o=o.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(o){var e=o[Of];if(e)return e;for(var s=o.parentNode;s;){if(e=s[uf]||s[Of]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(o=Mf(o);o!==null;){if(s=o[Of])return s;o=Mf(o)}return e}o=s,s=o.parentNode}return null}function Cb(o){return o=o[Of]||o[uf],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ue(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(p(33))}function Db(o){return o[Pf]||null}var Sf=[],Tf=-1;function Uf(o){return{current:o}}function E(o){0>Tf||(o.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(o,e){Tf++,Sf[Tf]=o.current,o.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(o,e){var s=o.type.contextTypes;if(!s)return Vf;var a=o.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===e)return a.__reactInternalMemoizedMaskedChildContext;var d={},b;for(b in s)d[b]=e[b];return a&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=e,o.__reactInternalMemoizedMaskedChildContext=d),d}function Zf(o){return o=o.childContextTypes,o!=null}function $f(){E(Wf),E(H)}function ag(o,e,s){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,s)}function bg(o,e,s){var a=o.stateNode;if(e=e.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var d in a)if(!(d in e))throw Error(p(108,Ra(o)||"Unknown",d));return A$1({},s,a)}function cg(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,o),G(Wf,Wf.current),!0}function dg(o,e,s){var a=o.stateNode;if(!a)throw Error(p(169));s?(o=bg(o,e,Xf),a.__reactInternalMemoizedMergedChildContext=o,E(Wf),E(H),G(H,o)):E(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(o){eg===null?eg=[o]:eg.push(o)}function ig(o){fg=!0,hg(o)}function jg(){if(!gg&&eg!==null){gg=!0;var o=0,e=C;try{var s=eg;for(C=1;o<s.length;o++){var a=s[o];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(d){throw eg!==null&&(eg=eg.slice(o+1)),ac(fc,jg),d}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(o,e){kg[lg++]=ng,kg[lg++]=mg,mg=o,ng=e}function ug(o,e,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=o;var a=rg;o=sg;var d=32-oc(a)-1;a&=~(1<<d),s+=1;var b=32-oc(e)+d;if(30<b){var _=d-d%5;b=(a&(1<<_)-1).toString(32),a>>=_,d-=_,rg=1<<32-oc(e)+d|s<<d|a,sg=b+o}else rg=1<<b|s<<d|a,sg=o}function vg(o){o.return!==null&&(tg(o,1),ug(o,1,0))}function wg(o){for(;o===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;o===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(o,e){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=o,e=o.deletions,e===null?(o.deletions=[s],o.flags|=16):e.push(s)}function Cg(o,e){switch(o.tag){case 5:var s=o.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(o.stateNode=e,xg=o,yg=Lf(e.firstChild),!0):!1;case 6:return e=o.pendingProps===""||e.nodeType!==3?null:e,e!==null?(o.stateNode=e,xg=o,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=qg!==null?{id:rg,overflow:sg}:null,o.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=e,s.return=o,o.child=s,xg=o,yg=null,!0):!1;default:return!1}}function Dg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Eg(o){if(I$1){var e=yg;if(e){var s=e;if(!Cg(o,e)){if(Dg(o))throw Error(p(418));e=Lf(s.nextSibling);var a=xg;e&&Cg(o,e)?Ag(a,s):(o.flags=o.flags&-4097|2,I$1=!1,xg=o)}}else{if(Dg(o))throw Error(p(418));o.flags=o.flags&-4097|2,I$1=!1,xg=o}}}function Fg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;xg=o}function Gg(o){if(o!==xg)return!1;if(!I$1)return Fg(o),I$1=!0,!1;var e;if((e=o.tag!==3)&&!(e=o.tag!==5)&&(e=o.type,e=e!=="head"&&e!=="body"&&!Ef(o.type,o.memoizedProps)),e&&(e=yg)){if(Dg(o))throw Hg(),Error(p(418));for(;e;)Ag(o,e),e=Lf(e.nextSibling)}if(Fg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(p(317));e:{for(o=o.nextSibling,e=0;o;){if(o.nodeType===8){var s=o.data;if(s==="/$"){if(e===0){yg=Lf(o.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}o=o.nextSibling}yg=null}}else yg=xg?Lf(o.stateNode.nextSibling):null;return!0}function Hg(){for(var o=yg;o;)o=Lf(o.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(o){zg===null?zg=[o]:zg.push(o)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(o,e,s){if(o=s.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p(309));var a=s.stateNode}if(!a)throw Error(p(147,o));var d=a,b=""+o;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===b?e.ref:(e=function(_){var _e=d.refs;_===null?delete _e[b]:_e[b]=_},e._stringRef=b,e)}if(typeof o!="string")throw Error(p(284));if(!s._owner)throw Error(p(290,o))}return o}function Mg(o,e){throw o=Object.prototype.toString.call(e),Error(p(31,o==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":o))}function Ng(o){var e=o._init;return e(o._payload)}function Og(o){function e(Rt,Mt){if(o){var Et=Rt.deletions;Et===null?(Rt.deletions=[Mt],Rt.flags|=16):Et.push(Mt)}}function s(Rt,Mt){if(!o)return null;for(;Mt!==null;)e(Rt,Mt),Mt=Mt.sibling;return null}function a(Rt,Mt){for(Rt=new Map;Mt!==null;)Mt.key!==null?Rt.set(Mt.key,Mt):Rt.set(Mt.index,Mt),Mt=Mt.sibling;return Rt}function d(Rt,Mt){return Rt=Pg(Rt,Mt),Rt.index=0,Rt.sibling=null,Rt}function b(Rt,Mt,Et){return Rt.index=Et,o?(Et=Rt.alternate,Et!==null?(Et=Et.index,Et<Mt?(Rt.flags|=2,Mt):Et):(Rt.flags|=2,Mt)):(Rt.flags|=1048576,Mt)}function _(Rt){return o&&Rt.alternate===null&&(Rt.flags|=2),Rt}function _e(Rt,Mt,Et,$t){return Mt===null||Mt.tag!==6?(Mt=Qg(Et,Rt.mode,$t),Mt.return=Rt,Mt):(Mt=d(Mt,Et),Mt.return=Rt,Mt)}function nt(Rt,Mt,Et,$t){var Xt=Et.type;return Xt===ya?ct(Rt,Mt,Et.props.children,$t,Et.key):Mt!==null&&(Mt.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===Ha&&Ng(Xt)===Mt.type)?($t=d(Mt,Et.props),$t.ref=Lg(Rt,Mt,Et),$t.return=Rt,$t):($t=Rg(Et.type,Et.key,Et.props,null,Rt.mode,$t),$t.ref=Lg(Rt,Mt,Et),$t.return=Rt,$t)}function rt(Rt,Mt,Et,$t){return Mt===null||Mt.tag!==4||Mt.stateNode.containerInfo!==Et.containerInfo||Mt.stateNode.implementation!==Et.implementation?(Mt=Sg(Et,Rt.mode,$t),Mt.return=Rt,Mt):(Mt=d(Mt,Et.children||[]),Mt.return=Rt,Mt)}function ct(Rt,Mt,Et,$t,Xt){return Mt===null||Mt.tag!==7?(Mt=Tg(Et,Rt.mode,$t,Xt),Mt.return=Rt,Mt):(Mt=d(Mt,Et),Mt.return=Rt,Mt)}function dt(Rt,Mt,Et){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number")return Mt=Qg(""+Mt,Rt.mode,Et),Mt.return=Rt,Mt;if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case va:return Et=Rg(Mt.type,Mt.key,Mt.props,null,Rt.mode,Et),Et.ref=Lg(Rt,null,Mt),Et.return=Rt,Et;case wa:return Mt=Sg(Mt,Rt.mode,Et),Mt.return=Rt,Mt;case Ha:var $t=Mt._init;return dt(Rt,$t(Mt._payload),Et)}if(eb(Mt)||Ka(Mt))return Mt=Tg(Mt,Rt.mode,Et,null),Mt.return=Rt,Mt;Mg(Rt,Mt)}return null}function pt(Rt,Mt,Et,$t){var Xt=Mt!==null?Mt.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number")return Xt!==null?null:_e(Rt,Mt,""+Et,$t);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case va:return Et.key===Xt?nt(Rt,Mt,Et,$t):null;case wa:return Et.key===Xt?rt(Rt,Mt,Et,$t):null;case Ha:return Xt=Et._init,pt(Rt,Mt,Xt(Et._payload),$t)}if(eb(Et)||Ka(Et))return Xt!==null?null:ct(Rt,Mt,Et,$t,null);Mg(Rt,Et)}return null}function bt(Rt,Mt,Et,$t,Xt){if(typeof $t=="string"&&$t!==""||typeof $t=="number")return Rt=Rt.get(Et)||null,_e(Mt,Rt,""+$t,Xt);if(typeof $t=="object"&&$t!==null){switch($t.$$typeof){case va:return Rt=Rt.get($t.key===null?Et:$t.key)||null,nt(Mt,Rt,$t,Xt);case wa:return Rt=Rt.get($t.key===null?Et:$t.key)||null,rt(Mt,Rt,$t,Xt);case Ha:var Zt=$t._init;return bt(Rt,Mt,Et,Zt($t._payload),Xt)}if(eb($t)||Ka($t))return Rt=Rt.get(Et)||null,ct(Mt,Rt,$t,Xt,null);Mg(Mt,$t)}return null}function xt(Rt,Mt,Et,$t){for(var Xt=null,Zt=null,Nt=Mt,Jt=Mt=0,dn=null;Nt!==null&&Jt<Et.length;Jt++){Nt.index>Jt?(dn=Nt,Nt=null):dn=Nt.sibling;var Pn=pt(Rt,Nt,Et[Jt],$t);if(Pn===null){Nt===null&&(Nt=dn);break}o&&Nt&&Pn.alternate===null&&e(Rt,Nt),Mt=b(Pn,Mt,Jt),Zt===null?Xt=Pn:Zt.sibling=Pn,Zt=Pn,Nt=dn}if(Jt===Et.length)return s(Rt,Nt),I$1&&tg(Rt,Jt),Xt;if(Nt===null){for(;Jt<Et.length;Jt++)Nt=dt(Rt,Et[Jt],$t),Nt!==null&&(Mt=b(Nt,Mt,Jt),Zt===null?Xt=Nt:Zt.sibling=Nt,Zt=Nt);return I$1&&tg(Rt,Jt),Xt}for(Nt=a(Rt,Nt);Jt<Et.length;Jt++)dn=bt(Nt,Rt,Jt,Et[Jt],$t),dn!==null&&(o&&dn.alternate!==null&&Nt.delete(dn.key===null?Jt:dn.key),Mt=b(dn,Mt,Jt),Zt===null?Xt=dn:Zt.sibling=dn,Zt=dn);return o&&Nt.forEach(function(an){return e(Rt,an)}),I$1&&tg(Rt,Jt),Xt}function wt(Rt,Mt,Et,$t){var Xt=Ka(Et);if(typeof Xt!="function")throw Error(p(150));if(Et=Xt.call(Et),Et==null)throw Error(p(151));for(var Zt=Xt=null,Nt=Mt,Jt=Mt=0,dn=null,Pn=Et.next();Nt!==null&&!Pn.done;Jt++,Pn=Et.next()){Nt.index>Jt?(dn=Nt,Nt=null):dn=Nt.sibling;var an=pt(Rt,Nt,Pn.value,$t);if(an===null){Nt===null&&(Nt=dn);break}o&&Nt&&an.alternate===null&&e(Rt,Nt),Mt=b(an,Mt,Jt),Zt===null?Xt=an:Zt.sibling=an,Zt=an,Nt=dn}if(Pn.done)return s(Rt,Nt),I$1&&tg(Rt,Jt),Xt;if(Nt===null){for(;!Pn.done;Jt++,Pn=Et.next())Pn=dt(Rt,Pn.value,$t),Pn!==null&&(Mt=b(Pn,Mt,Jt),Zt===null?Xt=Pn:Zt.sibling=Pn,Zt=Pn);return I$1&&tg(Rt,Jt),Xt}for(Nt=a(Rt,Nt);!Pn.done;Jt++,Pn=Et.next())Pn=bt(Nt,Rt,Jt,Pn.value,$t),Pn!==null&&(o&&Pn.alternate!==null&&Nt.delete(Pn.key===null?Jt:Pn.key),Mt=b(Pn,Mt,Jt),Zt===null?Xt=Pn:Zt.sibling=Pn,Zt=Pn);return o&&Nt.forEach(function(Vt){return e(Rt,Vt)}),I$1&&tg(Rt,Jt),Xt}function Tt(Rt,Mt,Et,$t){if(typeof Et=="object"&&Et!==null&&Et.type===ya&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case va:e:{for(var Xt=Et.key,Zt=Mt;Zt!==null;){if(Zt.key===Xt){if(Xt=Et.type,Xt===ya){if(Zt.tag===7){s(Rt,Zt.sibling),Mt=d(Zt,Et.props.children),Mt.return=Rt,Rt=Mt;break e}}else if(Zt.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===Ha&&Ng(Xt)===Zt.type){s(Rt,Zt.sibling),Mt=d(Zt,Et.props),Mt.ref=Lg(Rt,Zt,Et),Mt.return=Rt,Rt=Mt;break e}s(Rt,Zt);break}else e(Rt,Zt);Zt=Zt.sibling}Et.type===ya?(Mt=Tg(Et.props.children,Rt.mode,$t,Et.key),Mt.return=Rt,Rt=Mt):($t=Rg(Et.type,Et.key,Et.props,null,Rt.mode,$t),$t.ref=Lg(Rt,Mt,Et),$t.return=Rt,Rt=$t)}return _(Rt);case wa:e:{for(Zt=Et.key;Mt!==null;){if(Mt.key===Zt)if(Mt.tag===4&&Mt.stateNode.containerInfo===Et.containerInfo&&Mt.stateNode.implementation===Et.implementation){s(Rt,Mt.sibling),Mt=d(Mt,Et.children||[]),Mt.return=Rt,Rt=Mt;break e}else{s(Rt,Mt);break}else e(Rt,Mt);Mt=Mt.sibling}Mt=Sg(Et,Rt.mode,$t),Mt.return=Rt,Rt=Mt}return _(Rt);case Ha:return Zt=Et._init,Tt(Rt,Mt,Zt(Et._payload),$t)}if(eb(Et))return xt(Rt,Mt,Et,$t);if(Ka(Et))return wt(Rt,Mt,Et,$t);Mg(Rt,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"?(Et=""+Et,Mt!==null&&Mt.tag===6?(s(Rt,Mt.sibling),Mt=d(Mt,Et),Mt.return=Rt,Rt=Mt):(s(Rt,Mt),Mt=Qg(Et,Rt.mode,$t),Mt.return=Rt,Rt=Mt),_(Rt)):s(Rt,Mt)}return Tt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(o){var e=Wg.current;E(Wg),o._currentValue=e}function bh(o,e,s){for(;o!==null;){var a=o.alternate;if((o.childLanes&e)!==e?(o.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),o===s)break;o=o.return}}function ch(o,e){Xg=o,Zg=Yg=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&e&&(dh=!0),o.firstContext=null)}function eh(o){var e=o._currentValue;if(Zg!==o)if(o={context:o,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=o,Xg.dependencies={lanes:0,firstContext:o}}else Yg=Yg.next=o;return e}var fh=null;function gh(o){fh===null?fh=[o]:fh.push(o)}function hh(o,e,s,a){var d=e.interleaved;return d===null?(s.next=s,gh(e)):(s.next=d.next,d.next=s),e.interleaved=s,ih(o,a)}function ih(o,e){o.lanes|=e;var s=o.alternate;for(s!==null&&(s.lanes|=e),s=o,o=o.return;o!==null;)o.childLanes|=e,s=o.alternate,s!==null&&(s.childLanes|=e),s=o,o=o.return;return s.tag===3?s.stateNode:null}var jh=!1;function kh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(o,e){o=o.updateQueue,e.updateQueue===o&&(e.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function mh(o,e){return{eventTime:o,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(o,e,s){var a=o.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var d=a.pending;return d===null?e.next=e:(e.next=d.next,d.next=e),a.pending=e,ih(o,s)}return d=a.interleaved,d===null?(e.next=e,gh(a)):(e.next=d.next,d.next=e),a.interleaved=e,ih(o,s)}function oh(o,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var a=e.lanes;a&=o.pendingLanes,s|=a,e.lanes=s,Cc(o,s)}}function ph(o,e){var s=o.updateQueue,a=o.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var d=null,b=null;if(s=s.firstBaseUpdate,s!==null){do{var _={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};b===null?d=b=_:b=b.next=_,s=s.next}while(s!==null);b===null?d=b=e:b=b.next=e}else d=b=e;s={baseState:a.baseState,firstBaseUpdate:d,lastBaseUpdate:b,shared:a.shared,effects:a.effects},o.updateQueue=s;return}o=s.lastBaseUpdate,o===null?s.firstBaseUpdate=e:o.next=e,s.lastBaseUpdate=e}function qh(o,e,s,a){var d=o.updateQueue;jh=!1;var b=d.firstBaseUpdate,_=d.lastBaseUpdate,_e=d.shared.pending;if(_e!==null){d.shared.pending=null;var nt=_e,rt=nt.next;nt.next=null,_===null?b=rt:_.next=rt,_=nt;var ct=o.alternate;ct!==null&&(ct=ct.updateQueue,_e=ct.lastBaseUpdate,_e!==_&&(_e===null?ct.firstBaseUpdate=rt:_e.next=rt,ct.lastBaseUpdate=nt))}if(b!==null){var dt=d.baseState;_=0,ct=rt=nt=null,_e=b;do{var pt=_e.lane,bt=_e.eventTime;if((a&pt)===pt){ct!==null&&(ct=ct.next={eventTime:bt,lane:0,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null});e:{var xt=o,wt=_e;switch(pt=e,bt=s,wt.tag){case 1:if(xt=wt.payload,typeof xt=="function"){dt=xt.call(bt,dt,pt);break e}dt=xt;break e;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=wt.payload,pt=typeof xt=="function"?xt.call(bt,dt,pt):xt,pt==null)break e;dt=A$1({},dt,pt);break e;case 2:jh=!0}}_e.callback!==null&&_e.lane!==0&&(o.flags|=64,pt=d.effects,pt===null?d.effects=[_e]:pt.push(_e))}else bt={eventTime:bt,lane:pt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},ct===null?(rt=ct=bt,nt=dt):ct=ct.next=bt,_|=pt;if(_e=_e.next,_e===null){if(_e=d.shared.pending,_e===null)break;pt=_e,_e=pt.next,pt.next=null,d.lastBaseUpdate=pt,d.shared.pending=null}}while(!0);if(ct===null&&(nt=dt),d.baseState=nt,d.firstBaseUpdate=rt,d.lastBaseUpdate=ct,e=d.shared.interleaved,e!==null){d=e;do _|=d.lane,d=d.next;while(d!==e)}else b===null&&(d.shared.lanes=0);rh|=_,o.lanes=_,o.memoizedState=dt}}function sh(o,e,s){if(o=e.effects,e.effects=null,o!==null)for(e=0;e<o.length;e++){var a=o[e],d=a.callback;if(d!==null){if(a.callback=null,a=s,typeof d!="function")throw Error(p(191,d));d.call(a)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(o){if(o===th)throw Error(p(174));return o}function yh(o,e){switch(G(wh,e),G(vh,o),G(uh,th),o=e.nodeType,o){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:o=o===8?e.parentNode:e,e=o.namespaceURI||null,o=o.tagName,e=lb(e,o)}E(uh),G(uh,e)}function zh(){E(uh),E(vh),E(wh)}function Ah(o){xh(wh.current);var e=xh(uh.current),s=lb(e,o.type);e!==s&&(G(vh,o),G(uh,s))}function Bh(o){vh.current===o&&(E(uh),E(vh))}var L=Uf(0);function Ch(o){for(var e=o;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===o)break;for(;e.sibling===null;){if(e.return===null||e.return===o)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var o=0;o<Dh.length;o++)Dh[o]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua$1.ReactCurrentDispatcher,Gh=ua$1.ReactCurrentBatchConfig,Hh=0,M$1=null,N=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(o,e){if(e===null)return!1;for(var s=0;s<e.length&&s<o.length;s++)if(!He(o[s],e[s]))return!1;return!0}function Nh(o,e,s,a,d,b){if(Hh=b,M$1=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=o===null||o.memoizedState===null?Oh:Ph,o=s(a,d),Jh){b=0;do{if(Jh=!1,Kh=0,25<=b)throw Error(p(301));b+=1,O$1=N=null,e.updateQueue=null,Fh.current=Qh,o=s(a,d)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O$1=N=M$1=null,Ih=!1,e)throw Error(p(300));return o}function Sh(){var o=Kh!==0;return Kh=0,o}function Th(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=o:O$1=O$1.next=o,O$1}function Uh(){if(N===null){var o=M$1.alternate;o=o!==null?o.memoizedState:null}else o=N.next;var e=O$1===null?M$1.memoizedState:O$1.next;if(e!==null)O$1=e,N=o;else{if(o===null)throw Error(p(310));N=o,o={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O$1===null?M$1.memoizedState=O$1=o:O$1=O$1.next=o}return O$1}function Vh(o,e){return typeof e=="function"?e(o):e}function Wh(o){var e=Uh(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=o;var a=N,d=a.baseQueue,b=s.pending;if(b!==null){if(d!==null){var _=d.next;d.next=b.next,b.next=_}a.baseQueue=d=b,s.pending=null}if(d!==null){b=d.next,a=a.baseState;var _e=_=null,nt=null,rt=b;do{var ct=rt.lane;if((Hh&ct)===ct)nt!==null&&(nt=nt.next={lane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),a=rt.hasEagerState?rt.eagerState:o(a,rt.action);else{var dt={lane:ct,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null};nt===null?(_e=nt=dt,_=a):nt=nt.next=dt,M$1.lanes|=ct,rh|=ct}rt=rt.next}while(rt!==null&&rt!==b);nt===null?_=a:nt.next=_e,He(a,e.memoizedState)||(dh=!0),e.memoizedState=a,e.baseState=_,e.baseQueue=nt,s.lastRenderedState=a}if(o=s.interleaved,o!==null){d=o;do b=d.lane,M$1.lanes|=b,rh|=b,d=d.next;while(d!==o)}else d===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Xh(o){var e=Uh(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=o;var a=s.dispatch,d=s.pending,b=e.memoizedState;if(d!==null){s.pending=null;var _=d=d.next;do b=o(b,_.action),_=_.next;while(_!==d);He(b,e.memoizedState)||(dh=!0),e.memoizedState=b,e.baseQueue===null&&(e.baseState=b),s.lastRenderedState=b}return[b,a]}function Yh(){}function Zh(o,e){var s=M$1,a=Uh(),d=e(),b=!He(a.memoizedState,d);if(b&&(a.memoizedState=d,dh=!0),a=a.queue,$h(ai.bind(null,s,a,o),[o]),a.getSnapshot!==e||b||O$1!==null&&O$1.memoizedState.tag&1){if(s.flags|=2048,bi(9,ci.bind(null,s,a,d,e),void 0,null),Q===null)throw Error(p(349));Hh&30||di(s,e,d)}return d}function di(o,e,s){o.flags|=16384,o={getSnapshot:e,value:s},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.stores=[o]):(s=e.stores,s===null?e.stores=[o]:s.push(o))}function ci(o,e,s,a){e.value=s,e.getSnapshot=a,ei(e)&&fi(o)}function ai(o,e,s){return s(function(){ei(e)&&fi(o)})}function ei(o){var e=o.getSnapshot;o=o.value;try{var s=e();return!He(o,s)}catch{return!0}}function fi(o){var e=ih(o,1);e!==null&&gi(e,o,1,-1)}function hi(o){var e=Th();return typeof o=="function"&&(o=o()),e.memoizedState=e.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:o},e.queue=o,o=o.dispatch=ii.bind(null,M$1,o),[e.memoizedState,o]}function bi(o,e,s,a){return o={tag:o,create:e,destroy:s,deps:a,next:null},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.lastEffect=o.next=o):(s=e.lastEffect,s===null?e.lastEffect=o.next=o:(a=s.next,s.next=o,o.next=a,e.lastEffect=o)),o}function ji(){return Uh().memoizedState}function ki(o,e,s,a){var d=Th();M$1.flags|=o,d.memoizedState=bi(1|e,s,void 0,a===void 0?null:a)}function li(o,e,s,a){var d=Uh();a=a===void 0?null:a;var b=void 0;if(N!==null){var _=N.memoizedState;if(b=_.destroy,a!==null&&Mh(a,_.deps)){d.memoizedState=bi(e,s,b,a);return}}M$1.flags|=o,d.memoizedState=bi(1|e,s,b,a)}function mi(o,e){return ki(8390656,8,o,e)}function $h(o,e){return li(2048,8,o,e)}function ni(o,e){return li(4,2,o,e)}function oi(o,e){return li(4,4,o,e)}function pi(o,e){if(typeof e=="function")return o=o(),e(o),function(){e(null)};if(e!=null)return o=o(),e.current=o,function(){e.current=null}}function qi(o,e,s){return s=s!=null?s.concat([o]):null,li(4,4,pi.bind(null,e,o),s)}function ri(){}function si(o,e){var s=Uh();e=e===void 0?null:e;var a=s.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(s.memoizedState=[o,e],o)}function ti(o,e){var s=Uh();e=e===void 0?null:e;var a=s.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(o=o(),s.memoizedState=[o,e],o)}function ui(o,e,s){return Hh&21?(He(s,e)||(s=yc(),M$1.lanes|=s,rh|=s,o.baseState=!0),e):(o.baseState&&(o.baseState=!1,dh=!0),o.memoizedState=s)}function vi(o,e){var s=C;C=s!==0&&4>s?s:4,o(!0);var a=Gh.transition;Gh.transition={};try{o(!1),e()}finally{C=s,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(o,e,s){var a=yi(o);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},zi(o))Ai(e,s);else if(s=hh(o,e,s,a),s!==null){var d=R();gi(s,o,a,d),Bi(s,e,a)}}function ii(o,e,s){var a=yi(o),d={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(zi(o))Ai(e,d);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=e.lastRenderedReducer,b!==null))try{var _=e.lastRenderedState,_e=b(_,s);if(d.hasEagerState=!0,d.eagerState=_e,He(_e,_)){var nt=e.interleaved;nt===null?(d.next=d,gh(e)):(d.next=nt.next,nt.next=d),e.interleaved=d;return}}catch{}finally{}s=hh(o,e,d,a),s!==null&&(d=R(),gi(s,o,a,d),Bi(s,e,a))}}function zi(o){var e=o.alternate;return o===M$1||e!==null&&e===M$1}function Ai(o,e){Jh=Ih=!0;var s=o.pending;s===null?e.next=e:(e.next=s.next,s.next=e),o.pending=e}function Bi(o,e,s){if(s&4194240){var a=e.lanes;a&=o.pendingLanes,s|=a,e.lanes=s,Cc(o,s)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(o,e){return Th().memoizedState=[o,e===void 0?null:e],o},useContext:eh,useEffect:mi,useImperativeHandle:function(o,e,s){return s=s!=null?s.concat([o]):null,ki(4194308,4,pi.bind(null,e,o),s)},useLayoutEffect:function(o,e){return ki(4194308,4,o,e)},useInsertionEffect:function(o,e){return ki(4,2,o,e)},useMemo:function(o,e){var s=Th();return e=e===void 0?null:e,o=o(),s.memoizedState=[o,e],o},useReducer:function(o,e,s){var a=Th();return e=s!==void 0?s(e):e,a.memoizedState=a.baseState=e,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:e},a.queue=o,o=o.dispatch=xi.bind(null,M$1,o),[a.memoizedState,o]},useRef:function(o){var e=Th();return o={current:o},e.memoizedState=o},useState:hi,useDebugValue:ri,useDeferredValue:function(o){return Th().memoizedState=o},useTransition:function(){var o=hi(!1),e=o[0];return o=vi.bind(null,o[1]),Th().memoizedState=o,[e,o]},useMutableSource:function(){},useSyncExternalStore:function(o,e,s){var a=M$1,d=Th();if(I$1){if(s===void 0)throw Error(p(407));s=s()}else{if(s=e(),Q===null)throw Error(p(349));Hh&30||di(a,e,s)}d.memoizedState=s;var b={value:s,getSnapshot:e};return d.queue=b,mi(ai.bind(null,a,b,o),[o]),a.flags|=2048,bi(9,ci.bind(null,a,b,s,e),void 0,null),s},useId:function(){var o=Th(),e=Q.identifierPrefix;if(I$1){var s=sg,a=rg;s=(a&~(1<<32-oc(a)-1)).toString(32)+s,e=":"+e+"R"+s,s=Kh++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Lh++,e=":"+e+"r"+s.toString(32)+":";return o.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(o){var e=Uh();return ui(e,N.memoizedState,o)},useTransition:function(){var o=Wh(Vh)[0],e=Uh().memoizedState;return[o,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(o){var e=Uh();return N===null?e.memoizedState=o:ui(e,N.memoizedState,o)},useTransition:function(){var o=Xh(Vh)[0],e=Uh().memoizedState;return[o,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(o,e){if(o&&o.defaultProps){e=A$1({},e),o=o.defaultProps;for(var s in o)e[s]===void 0&&(e[s]=o[s]);return e}return e}function Di(o,e,s,a){e=o.memoizedState,s=s(a,e),s=s==null?e:A$1({},e,s),o.memoizedState=s,o.lanes===0&&(o.updateQueue.baseState=s)}var Ei={isMounted:function(o){return(o=o._reactInternals)?Vb(o)===o:!1},enqueueSetState:function(o,e,s){o=o._reactInternals;var a=R(),d=yi(o),b=mh(a,d);b.payload=e,s!=null&&(b.callback=s),e=nh(o,b,d),e!==null&&(gi(e,o,d,a),oh(e,o,d))},enqueueReplaceState:function(o,e,s){o=o._reactInternals;var a=R(),d=yi(o),b=mh(a,d);b.tag=1,b.payload=e,s!=null&&(b.callback=s),e=nh(o,b,d),e!==null&&(gi(e,o,d,a),oh(e,o,d))},enqueueForceUpdate:function(o,e){o=o._reactInternals;var s=R(),a=yi(o),d=mh(s,a);d.tag=2,e!=null&&(d.callback=e),e=nh(o,d,a),e!==null&&(gi(e,o,a,s),oh(e,o,a))}};function Fi(o,e,s,a,d,b,_){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(a,b,_):e.prototype&&e.prototype.isPureReactComponent?!Ie(s,a)||!Ie(d,b):!0}function Gi(o,e,s){var a=!1,d=Vf,b=e.contextType;return typeof b=="object"&&b!==null?b=eh(b):(d=Zf(e)?Xf:H.current,a=e.contextTypes,b=(a=a!=null)?Yf(o,d):Vf),e=new e(s,b),o.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,o.stateNode=e,e._reactInternals=o,a&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=d,o.__reactInternalMemoizedMaskedChildContext=b),e}function Hi(o,e,s,a){o=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,a),e.state!==o&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(o,e,s,a){var d=o.stateNode;d.props=s,d.state=o.memoizedState,d.refs={},kh(o);var b=e.contextType;typeof b=="object"&&b!==null?d.context=eh(b):(b=Zf(e)?Xf:H.current,d.context=Yf(o,b)),d.state=o.memoizedState,b=e.getDerivedStateFromProps,typeof b=="function"&&(Di(o,e,b,s),d.state=o.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(e=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),e!==d.state&&Ei.enqueueReplaceState(d,d.state,null),qh(o,s,d,a),d.state=o.memoizedState),typeof d.componentDidMount=="function"&&(o.flags|=4194308)}function Ji(o,e){try{var s="",a=e;do s+=Pa(a),a=a.return;while(a);var d=s}catch(b){d=`
Error generating stack: `+b.message+`
`+b.stack}return{value:o,source:e,stack:d,digest:null}}function Ki(o,e,s){return{value:o,source:null,stack:s??null,digest:e??null}}function Li(o,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(o,e,s){s=mh(-1,s),s.tag=3,s.payload={element:null};var a=e.value;return s.callback=function(){Oi||(Oi=!0,Pi=a),Li(o,e)},s}function Qi(o,e,s){s=mh(-1,s),s.tag=3;var a=o.type.getDerivedStateFromError;if(typeof a=="function"){var d=e.value;s.payload=function(){return a(d)},s.callback=function(){Li(o,e)}}var b=o.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(s.callback=function(){Li(o,e),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var _=e.stack;this.componentDidCatch(e.value,{componentStack:_!==null?_:""})}),s}function Si(o,e,s){var a=o.pingCache;if(a===null){a=o.pingCache=new Mi;var d=new Set;a.set(e,d)}else d=a.get(e),d===void 0&&(d=new Set,a.set(e,d));d.has(s)||(d.add(s),o=Ti.bind(null,o,e,s),e.then(o,o))}function Ui(o){do{var e;if((e=o.tag===13)&&(e=o.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return o;o=o.return}while(o!==null);return null}function Vi(o,e,s,a,d){return o.mode&1?(o.flags|=65536,o.lanes=d,o):(o===e?o.flags|=65536:(o.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=mh(-1,1),e.tag=2,nh(s,e,1))),s.lanes|=1),o)}var Wi=ua$1.ReactCurrentOwner,dh=!1;function Xi(o,e,s,a){e.child=o===null?Vg(e,null,s,a):Ug(e,o.child,s,a)}function Yi(o,e,s,a,d){s=s.render;var b=e.ref;return ch(e,d),a=Nh(o,e,s,a,b,d),s=Sh(),o!==null&&!dh?(e.updateQueue=o.updateQueue,e.flags&=-2053,o.lanes&=~d,Zi(o,e,d)):(I$1&&s&&vg(e),e.flags|=1,Xi(o,e,a,d),e.child)}function $i(o,e,s,a,d){if(o===null){var b=s.type;return typeof b=="function"&&!aj(b)&&b.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=b,bj(o,e,b,a,d)):(o=Rg(s.type,null,a,e,e.mode,d),o.ref=e.ref,o.return=e,e.child=o)}if(b=o.child,!(o.lanes&d)){var _=b.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(_,a)&&o.ref===e.ref)return Zi(o,e,d)}return e.flags|=1,o=Pg(b,a),o.ref=e.ref,o.return=e,e.child=o}function bj(o,e,s,a,d){if(o!==null){var b=o.memoizedProps;if(Ie(b,a)&&o.ref===e.ref)if(dh=!1,e.pendingProps=a=b,(o.lanes&d)!==0)o.flags&131072&&(dh=!0);else return e.lanes=o.lanes,Zi(o,e,d)}return cj(o,e,s,a,d)}function dj(o,e,s){var a=e.pendingProps,d=a.children,b=o!==null?o.memoizedState:null;if(a.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=s;else{if(!(s&1073741824))return o=b!==null?b.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:o,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=o,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=b!==null?b.baseLanes:s,G(ej,fj),fj|=a}else b!==null?(a=b.baseLanes|s,e.memoizedState=null):a=s,G(ej,fj),fj|=a;return Xi(o,e,d,s),e.child}function gj(o,e){var s=e.ref;(o===null&&s!==null||o!==null&&o.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function cj(o,e,s,a,d){var b=Zf(s)?Xf:H.current;return b=Yf(e,b),ch(e,d),s=Nh(o,e,s,a,b,d),a=Sh(),o!==null&&!dh?(e.updateQueue=o.updateQueue,e.flags&=-2053,o.lanes&=~d,Zi(o,e,d)):(I$1&&a&&vg(e),e.flags|=1,Xi(o,e,s,d),e.child)}function hj(o,e,s,a,d){if(Zf(s)){var b=!0;cg(e)}else b=!1;if(ch(e,d),e.stateNode===null)ij(o,e),Gi(e,s,a),Ii(e,s,a,d),a=!0;else if(o===null){var _=e.stateNode,_e=e.memoizedProps;_.props=_e;var nt=_.context,rt=s.contextType;typeof rt=="object"&&rt!==null?rt=eh(rt):(rt=Zf(s)?Xf:H.current,rt=Yf(e,rt));var ct=s.getDerivedStateFromProps,dt=typeof ct=="function"||typeof _.getSnapshotBeforeUpdate=="function";dt||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(_e!==a||nt!==rt)&&Hi(e,_,a,rt),jh=!1;var pt=e.memoizedState;_.state=pt,qh(e,a,_,d),nt=e.memoizedState,_e!==a||pt!==nt||Wf.current||jh?(typeof ct=="function"&&(Di(e,s,ct,a),nt=e.memoizedState),(_e=jh||Fi(e,s,_e,a,pt,nt,rt))?(dt||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(e.flags|=4194308)):(typeof _.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=nt),_.props=a,_.state=nt,_.context=rt,a=_e):(typeof _.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{_=e.stateNode,lh(o,e),_e=e.memoizedProps,rt=e.type===e.elementType?_e:Ci(e.type,_e),_.props=rt,dt=e.pendingProps,pt=_.context,nt=s.contextType,typeof nt=="object"&&nt!==null?nt=eh(nt):(nt=Zf(s)?Xf:H.current,nt=Yf(e,nt));var bt=s.getDerivedStateFromProps;(ct=typeof bt=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(_e!==dt||pt!==nt)&&Hi(e,_,a,nt),jh=!1,pt=e.memoizedState,_.state=pt,qh(e,a,_,d);var xt=e.memoizedState;_e!==dt||pt!==xt||Wf.current||jh?(typeof bt=="function"&&(Di(e,s,bt,a),xt=e.memoizedState),(rt=jh||Fi(e,s,rt,a,pt,xt,nt)||!1)?(ct||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(a,xt,nt),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(a,xt,nt)),typeof _.componentDidUpdate=="function"&&(e.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof _.componentDidUpdate!="function"||_e===o.memoizedProps&&pt===o.memoizedState||(e.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||_e===o.memoizedProps&&pt===o.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=xt),_.props=a,_.state=xt,_.context=nt,a=rt):(typeof _.componentDidUpdate!="function"||_e===o.memoizedProps&&pt===o.memoizedState||(e.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||_e===o.memoizedProps&&pt===o.memoizedState||(e.flags|=1024),a=!1)}return jj(o,e,s,a,b,d)}function jj(o,e,s,a,d,b){gj(o,e);var _=(e.flags&128)!==0;if(!a&&!_)return d&&dg(e,s,!1),Zi(o,e,b);a=e.stateNode,Wi.current=e;var _e=_&&typeof s.getDerivedStateFromError!="function"?null:a.render();return e.flags|=1,o!==null&&_?(e.child=Ug(e,o.child,null,b),e.child=Ug(e,null,_e,b)):Xi(o,e,_e,b),e.memoizedState=a.state,d&&dg(e,s,!0),e.child}function kj(o){var e=o.stateNode;e.pendingContext?ag(o,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(o,e.context,!1),yh(o,e.containerInfo)}function lj(o,e,s,a,d){return Ig(),Jg(d),e.flags|=256,Xi(o,e,s,a),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(o){return{baseLanes:o,cachePool:null,transitions:null}}function oj(o,e,s){var a=e.pendingProps,d=L.current,b=!1,_=(e.flags&128)!==0,_e;if((_e=_)||(_e=o!==null&&o.memoizedState===null?!1:(d&2)!==0),_e?(b=!0,e.flags&=-129):(o===null||o.memoizedState!==null)&&(d|=1),G(L,d&1),o===null)return Eg(e),o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(e.mode&1?o.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(_=a.children,o=a.fallback,b?(a=e.mode,b=e.child,_={mode:"hidden",children:_},!(a&1)&&b!==null?(b.childLanes=0,b.pendingProps=_):b=pj(_,a,0,null),o=Tg(o,a,s,null),b.return=e,o.return=e,b.sibling=o,e.child=b,e.child.memoizedState=nj(s),e.memoizedState=mj,o):qj(e,_));if(d=o.memoizedState,d!==null&&(_e=d.dehydrated,_e!==null))return rj(o,e,_,a,_e,d,s);if(b){b=a.fallback,_=e.mode,d=o.child,_e=d.sibling;var nt={mode:"hidden",children:a.children};return!(_&1)&&e.child!==d?(a=e.child,a.childLanes=0,a.pendingProps=nt,e.deletions=null):(a=Pg(d,nt),a.subtreeFlags=d.subtreeFlags&14680064),_e!==null?b=Pg(_e,b):(b=Tg(b,_,s,null),b.flags|=2),b.return=e,a.return=e,a.sibling=b,e.child=a,a=b,b=e.child,_=o.child.memoizedState,_=_===null?nj(s):{baseLanes:_.baseLanes|s,cachePool:null,transitions:_.transitions},b.memoizedState=_,b.childLanes=o.childLanes&~s,e.memoizedState=mj,a}return b=o.child,o=b.sibling,a=Pg(b,{mode:"visible",children:a.children}),!(e.mode&1)&&(a.lanes=s),a.return=e,a.sibling=null,o!==null&&(s=e.deletions,s===null?(e.deletions=[o],e.flags|=16):s.push(o)),e.child=a,e.memoizedState=null,a}function qj(o,e){return e=pj({mode:"visible",children:e},o.mode,0,null),e.return=o,o.child=e}function sj(o,e,s,a){return a!==null&&Jg(a),Ug(e,o.child,null,s),o=qj(e,e.pendingProps.children),o.flags|=2,e.memoizedState=null,o}function rj(o,e,s,a,d,b,_){if(s)return e.flags&256?(e.flags&=-257,a=Ki(Error(p(422))),sj(o,e,_,a)):e.memoizedState!==null?(e.child=o.child,e.flags|=128,null):(b=a.fallback,d=e.mode,a=pj({mode:"visible",children:a.children},d,0,null),b=Tg(b,d,_,null),b.flags|=2,a.return=e,b.return=e,a.sibling=b,e.child=a,e.mode&1&&Ug(e,o.child,null,_),e.child.memoizedState=nj(_),e.memoizedState=mj,b);if(!(e.mode&1))return sj(o,e,_,null);if(d.data==="$!"){if(a=d.nextSibling&&d.nextSibling.dataset,a)var _e=a.dgst;return a=_e,b=Error(p(419)),a=Ki(b,a,void 0),sj(o,e,_,a)}if(_e=(_&o.childLanes)!==0,dh||_e){if(a=Q,a!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(a.suspendedLanes|_)?0:d,d!==0&&d!==b.retryLane&&(b.retryLane=d,ih(o,d),gi(a,o,d,-1))}return tj(),a=Ki(Error(p(421))),sj(o,e,_,a)}return d.data==="$?"?(e.flags|=128,e.child=o.child,e=uj.bind(null,o),d._reactRetry=e,null):(o=b.treeContext,yg=Lf(d.nextSibling),xg=e,I$1=!0,zg=null,o!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=o.id,sg=o.overflow,qg=e),e=qj(e,a.children),e.flags|=4096,e)}function vj(o,e,s){o.lanes|=e;var a=o.alternate;a!==null&&(a.lanes|=e),bh(o.return,e,s)}function wj(o,e,s,a,d){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:d}:(b.isBackwards=e,b.rendering=null,b.renderingStartTime=0,b.last=a,b.tail=s,b.tailMode=d)}function xj(o,e,s){var a=e.pendingProps,d=a.revealOrder,b=a.tail;if(Xi(o,e,a.children,s),a=L.current,a&2)a=a&1|2,e.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=e.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&vj(o,s,e);else if(o.tag===19)vj(o,s,e);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}a&=1}if(G(L,a),!(e.mode&1))e.memoizedState=null;else switch(d){case"forwards":for(s=e.child,d=null;s!==null;)o=s.alternate,o!==null&&Ch(o)===null&&(d=s),s=s.sibling;s=d,s===null?(d=e.child,e.child=null):(d=s.sibling,s.sibling=null),wj(e,!1,d,s,b);break;case"backwards":for(s=null,d=e.child,e.child=null;d!==null;){if(o=d.alternate,o!==null&&Ch(o)===null){e.child=d;break}o=d.sibling,d.sibling=s,s=d,d=o}wj(e,!0,s,null,b);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(o,e){!(e.mode&1)&&o!==null&&(o.alternate=null,e.alternate=null,e.flags|=2)}function Zi(o,e,s){if(o!==null&&(e.dependencies=o.dependencies),rh|=e.lanes,!(s&e.childLanes))return null;if(o!==null&&e.child!==o.child)throw Error(p(153));if(e.child!==null){for(o=e.child,s=Pg(o,o.pendingProps),e.child=s,s.return=e;o.sibling!==null;)o=o.sibling,s=s.sibling=Pg(o,o.pendingProps),s.return=e;s.sibling=null}return e.child}function yj(o,e,s){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var a=e.type._context,d=e.memoizedProps.value;G(Wg,a._currentValue),a._currentValue=d;break;case 13:if(a=e.memoizedState,a!==null)return a.dehydrated!==null?(G(L,L.current&1),e.flags|=128,null):s&e.child.childLanes?oj(o,e,s):(G(L,L.current&1),o=Zi(o,e,s),o!==null?o.sibling:null);G(L,L.current&1);break;case 19:if(a=(s&e.childLanes)!==0,o.flags&128){if(a)return xj(o,e,s);e.flags|=128}if(d=e.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),G(L,L.current),a)break;return null;case 22:case 23:return e.lanes=0,dj(o,e,s)}return Zi(o,e,s)}var zj,Aj,Bj,Cj;zj=function(o,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Aj=function(){};Bj=function(o,e,s,a){var d=o.memoizedProps;if(d!==a){o=e.stateNode,xh(uh.current);var b=null;switch(s){case"input":d=Ya(o,d),a=Ya(o,a),b=[];break;case"select":d=A$1({},d,{value:void 0}),a=A$1({},a,{value:void 0}),b=[];break;case"textarea":d=gb(o,d),a=gb(o,a),b=[];break;default:typeof d.onClick!="function"&&typeof a.onClick=="function"&&(o.onclick=Bf)}ub(s,a);var _;s=null;for(rt in d)if(!a.hasOwnProperty(rt)&&d.hasOwnProperty(rt)&&d[rt]!=null)if(rt==="style"){var _e=d[rt];for(_ in _e)_e.hasOwnProperty(_)&&(s||(s={}),s[_]="")}else rt!=="dangerouslySetInnerHTML"&&rt!=="children"&&rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&rt!=="autoFocus"&&(ea.hasOwnProperty(rt)?b||(b=[]):(b=b||[]).push(rt,null));for(rt in a){var nt=a[rt];if(_e=d!=null?d[rt]:void 0,a.hasOwnProperty(rt)&&nt!==_e&&(nt!=null||_e!=null))if(rt==="style")if(_e){for(_ in _e)!_e.hasOwnProperty(_)||nt&&nt.hasOwnProperty(_)||(s||(s={}),s[_]="");for(_ in nt)nt.hasOwnProperty(_)&&_e[_]!==nt[_]&&(s||(s={}),s[_]=nt[_])}else s||(b||(b=[]),b.push(rt,s)),s=nt;else rt==="dangerouslySetInnerHTML"?(nt=nt?nt.__html:void 0,_e=_e?_e.__html:void 0,nt!=null&&_e!==nt&&(b=b||[]).push(rt,nt)):rt==="children"?typeof nt!="string"&&typeof nt!="number"||(b=b||[]).push(rt,""+nt):rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(rt)?(nt!=null&&rt==="onScroll"&&D("scroll",o),b||_e===nt||(b=[])):(b=b||[]).push(rt,nt))}s&&(b=b||[]).push("style",s);var rt=b;(e.updateQueue=rt)&&(e.flags|=4)}};Cj=function(o,e,s,a){s!==a&&(e.flags|=4)};function Dj(o,e){if(!I$1)switch(o.tailMode){case"hidden":e=o.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?o.tail=null:s.sibling=null;break;case"collapsed":s=o.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e||o.tail===null?o.tail=null:o.tail.sibling=null:a.sibling=null}}function S(o){var e=o.alternate!==null&&o.alternate.child===o.child,s=0,a=0;if(e)for(var d=o.child;d!==null;)s|=d.lanes|d.childLanes,a|=d.subtreeFlags&14680064,a|=d.flags&14680064,d.return=o,d=d.sibling;else for(d=o.child;d!==null;)s|=d.lanes|d.childLanes,a|=d.subtreeFlags,a|=d.flags,d.return=o,d=d.sibling;return o.subtreeFlags|=a,o.childLanes=s,e}function Ej(o,e,s){var a=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return a=e.stateNode,zh(),E(Wf),E(H),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(o===null||o.child===null)&&(Gg(e)?e.flags|=4:o===null||o.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(o,e),S(e),null;case 5:Bh(e);var d=xh(wh.current);if(s=e.type,o!==null&&e.stateNode!=null)Bj(o,e,s,a,d),o.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!a){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(o=xh(uh.current),Gg(e)){a=e.stateNode,s=e.type;var b=e.memoizedProps;switch(a[Of]=e,a[Pf]=b,o=(e.mode&1)!==0,s){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(d=0;d<lf.length;d++)D(lf[d],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za(a,b),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!b.multiple},D("invalid",a);break;case"textarea":hb(a,b),D("invalid",a)}ub(s,b),d=null;for(var _ in b)if(b.hasOwnProperty(_)){var _e=b[_];_==="children"?typeof _e=="string"?a.textContent!==_e&&(b.suppressHydrationWarning!==!0&&Af(a.textContent,_e,o),d=["children",_e]):typeof _e=="number"&&a.textContent!==""+_e&&(b.suppressHydrationWarning!==!0&&Af(a.textContent,_e,o),d=["children",""+_e]):ea.hasOwnProperty(_)&&_e!=null&&_==="onScroll"&&D("scroll",a)}switch(s){case"input":Va(a),db(a,b,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(a.onclick=Bf)}a=d,e.updateQueue=a,a!==null&&(e.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=kb(s)),o==="http://www.w3.org/1999/xhtml"?s==="script"?(o=_.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof a.is=="string"?o=_.createElement(s,{is:a.is}):(o=_.createElement(s),s==="select"&&(_=o,a.multiple?_.multiple=!0:a.size&&(_.size=a.size))):o=_.createElementNS(o,s),o[Of]=e,o[Pf]=a,zj(o,e,!1,!1),e.stateNode=o;e:{switch(_=vb(s,a),s){case"dialog":D("cancel",o),D("close",o),d=a;break;case"iframe":case"object":case"embed":D("load",o),d=a;break;case"video":case"audio":for(d=0;d<lf.length;d++)D(lf[d],o);d=a;break;case"source":D("error",o),d=a;break;case"img":case"image":case"link":D("error",o),D("load",o),d=a;break;case"details":D("toggle",o),d=a;break;case"input":Za(o,a),d=Ya(o,a),D("invalid",o);break;case"option":d=a;break;case"select":o._wrapperState={wasMultiple:!!a.multiple},d=A$1({},a,{value:void 0}),D("invalid",o);break;case"textarea":hb(o,a),d=gb(o,a),D("invalid",o);break;default:d=a}ub(s,d),_e=d;for(b in _e)if(_e.hasOwnProperty(b)){var nt=_e[b];b==="style"?sb(o,nt):b==="dangerouslySetInnerHTML"?(nt=nt?nt.__html:void 0,nt!=null&&nb(o,nt)):b==="children"?typeof nt=="string"?(s!=="textarea"||nt!=="")&&ob(o,nt):typeof nt=="number"&&ob(o,""+nt):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(ea.hasOwnProperty(b)?nt!=null&&b==="onScroll"&&D("scroll",o):nt!=null&&ta(o,b,nt,_))}switch(s){case"input":Va(o),db(o,a,!1);break;case"textarea":Va(o),jb(o);break;case"option":a.value!=null&&o.setAttribute("value",""+Sa(a.value));break;case"select":o.multiple=!!a.multiple,b=a.value,b!=null?fb(o,!!a.multiple,b,!1):a.defaultValue!=null&&fb(o,!!a.multiple,a.defaultValue,!0);break;default:typeof d.onClick=="function"&&(o.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(o&&e.stateNode!=null)Cj(o,e,o.memoizedProps,a);else{if(typeof a!="string"&&e.stateNode===null)throw Error(p(166));if(s=xh(wh.current),xh(uh.current),Gg(e)){if(a=e.stateNode,s=e.memoizedProps,a[Of]=e,(b=a.nodeValue!==s)&&(o=xg,o!==null))switch(o.tag){case 3:Af(a.nodeValue,s,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,s,(o.mode&1)!==0)}b&&(e.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Of]=e,e.stateNode=a}return S(e),null;case 13:if(E(L),a=e.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,b=!1;else if(b=Gg(e),a!==null&&a.dehydrated!==null){if(o===null){if(!b)throw Error(p(318));if(b=e.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(p(317));b[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),b=!1}else zg!==null&&(Fj(zg),zg=null),b=!0;if(!b)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(a=a!==null,a!==(o!==null&&o.memoizedState!==null)&&a&&(e.child.flags|=8192,e.mode&1&&(o===null||L.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return zh(),Aj(o,e),o===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return ah(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(L),b=e.memoizedState,b===null)return S(e),null;if(a=(e.flags&128)!==0,_=b.rendering,_===null)if(a)Dj(b,!1);else{if(T!==0||o!==null&&o.flags&128)for(o=e.child;o!==null;){if(_=Ch(o),_!==null){for(e.flags|=128,Dj(b,!1),a=_.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),e.subtreeFlags=0,a=s,s=e.child;s!==null;)b=s,o=a,b.flags&=14680066,_=b.alternate,_===null?(b.childLanes=0,b.lanes=o,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=_.childLanes,b.lanes=_.lanes,b.child=_.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=_.memoizedProps,b.memoizedState=_.memoizedState,b.updateQueue=_.updateQueue,b.type=_.type,o=_.dependencies,b.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s=s.sibling;return G(L,L.current&1|2),e.child}o=o.sibling}b.tail!==null&&B()>Gj&&(e.flags|=128,a=!0,Dj(b,!1),e.lanes=4194304)}else{if(!a)if(o=Ch(_),o!==null){if(e.flags|=128,a=!0,s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Dj(b,!0),b.tail===null&&b.tailMode==="hidden"&&!_.alternate&&!I$1)return S(e),null}else 2*B()-b.renderingStartTime>Gj&&s!==1073741824&&(e.flags|=128,a=!0,Dj(b,!1),e.lanes=4194304);b.isBackwards?(_.sibling=e.child,e.child=_):(s=b.last,s!==null?s.sibling=_:e.child=_,b.last=_)}return b.tail!==null?(e=b.tail,b.rendering=e,b.tail=e.sibling,b.renderingStartTime=B(),e.sibling=null,s=L.current,G(L,a?s&1|2:s&1),e):(S(e),null);case 22:case 23:return Hj(),a=e.memoizedState!==null,o!==null&&o.memoizedState!==null!==a&&(e.flags|=8192),a&&e.mode&1?fj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(o,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),o=e.flags,o&65536?(e.flags=o&-65537|128,e):null;case 3:return zh(),E(Wf),E(H),Eh(),o=e.flags,o&65536&&!(o&128)?(e.flags=o&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L),o=e.memoizedState,o!==null&&o.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return o=e.flags,o&65536?(e.flags=o&-65537|128,e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(o,e){var s=o.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){W(o,e,a)}else s.current=null}function Mj(o,e,s){try{s()}catch(a){W(o,e,a)}}var Nj=!1;function Oj(o,e){if(Cf=dd,o=Me(),Ne(o)){if("selectionStart"in o)var s={start:o.selectionStart,end:o.selectionEnd};else e:{s=(s=o.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var d=a.anchorOffset,b=a.focusNode;a=a.focusOffset;try{s.nodeType,b.nodeType}catch{s=null;break e}var _=0,_e=-1,nt=-1,rt=0,ct=0,dt=o,pt=null;t:for(;;){for(var bt;dt!==s||d!==0&&dt.nodeType!==3||(_e=_+d),dt!==b||a!==0&&dt.nodeType!==3||(nt=_+a),dt.nodeType===3&&(_+=dt.nodeValue.length),(bt=dt.firstChild)!==null;)pt=dt,dt=bt;for(;;){if(dt===o)break t;if(pt===s&&++rt===d&&(_e=_),pt===b&&++ct===a&&(nt=_),(bt=dt.nextSibling)!==null)break;dt=pt,pt=dt.parentNode}dt=bt}s=_e===-1||nt===-1?null:{start:_e,end:nt}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:o,selectionRange:s},dd=!1,V$1=e;V$1!==null;)if(e=V$1,o=e.child,(e.subtreeFlags&1028)!==0&&o!==null)o.return=e,V$1=o;else for(;V$1!==null;){e=V$1;try{var xt=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(xt!==null){var wt=xt.memoizedProps,Tt=xt.memoizedState,Rt=e.stateNode,Mt=Rt.getSnapshotBeforeUpdate(e.elementType===e.type?wt:Ci(e.type,wt),Tt);Rt.__reactInternalSnapshotBeforeUpdate=Mt}break;case 3:var Et=e.stateNode.containerInfo;Et.nodeType===1?Et.textContent="":Et.nodeType===9&&Et.documentElement&&Et.removeChild(Et.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch($t){W(e,e.return,$t)}if(o=e.sibling,o!==null){o.return=e.return,V$1=o;break}V$1=e.return}return xt=Nj,Nj=!1,xt}function Pj(o,e,s){var a=e.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&o)===o){var b=d.destroy;d.destroy=void 0,b!==void 0&&Mj(e,s,b)}d=d.next}while(d!==a)}}function Qj(o,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&o)===o){var a=s.create;s.destroy=a()}s=s.next}while(s!==e)}}function Rj(o){var e=o.ref;if(e!==null){var s=o.stateNode;switch(o.tag){case 5:o=s;break;default:o=s}typeof e=="function"?e(o):e.current=o}}function Sj(o){var e=o.alternate;e!==null&&(o.alternate=null,Sj(e)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(e=o.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Tj(o){return o.tag===5||o.tag===3||o.tag===4}function Uj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Tj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Vj(o,e,s){var a=o.tag;if(a===5||a===6)o=o.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(o,e):s.insertBefore(o,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(o,s)):(e=s,e.appendChild(o)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Bf));else if(a!==4&&(o=o.child,o!==null))for(Vj(o,e,s),o=o.sibling;o!==null;)Vj(o,e,s),o=o.sibling}function Wj(o,e,s){var a=o.tag;if(a===5||a===6)o=o.stateNode,e?s.insertBefore(o,e):s.appendChild(o);else if(a!==4&&(o=o.child,o!==null))for(Wj(o,e,s),o=o.sibling;o!==null;)Wj(o,e,s),o=o.sibling}var X=null,Xj=!1;function Yj(o,e,s){for(s=s.child;s!==null;)Zj(o,e,s),s=s.sibling}function Zj(o,e,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Lj(s,e);case 6:var a=X,d=Xj;X=null,Yj(o,e,s),X=a,Xj=d,X!==null&&(Xj?(o=X,s=s.stateNode,o.nodeType===8?o.parentNode.removeChild(s):o.removeChild(s)):X.removeChild(s.stateNode));break;case 18:X!==null&&(Xj?(o=X,s=s.stateNode,o.nodeType===8?Kf(o.parentNode,s):o.nodeType===1&&Kf(o,s),bd(o)):Kf(X,s.stateNode));break;case 4:a=X,d=Xj,X=s.stateNode.containerInfo,Xj=!0,Yj(o,e,s),X=a,Xj=d;break;case 0:case 11:case 14:case 15:if(!U&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){d=a=a.next;do{var b=d,_=b.destroy;b=b.tag,_!==void 0&&(b&2||b&4)&&Mj(s,e,_),d=d.next}while(d!==a)}Yj(o,e,s);break;case 1:if(!U&&(Lj(s,e),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(_e){W(s,e,_e)}Yj(o,e,s);break;case 21:Yj(o,e,s);break;case 22:s.mode&1?(U=(a=U)||s.memoizedState!==null,Yj(o,e,s),U=a):Yj(o,e,s);break;default:Yj(o,e,s)}}function ak(o){var e=o.updateQueue;if(e!==null){o.updateQueue=null;var s=o.stateNode;s===null&&(s=o.stateNode=new Kj),e.forEach(function(a){var d=bk.bind(null,o,a);s.has(a)||(s.add(a),a.then(d,d))})}}function ck(o,e){var s=e.deletions;if(s!==null)for(var a=0;a<s.length;a++){var d=s[a];try{var b=o,_=e,_e=_;e:for(;_e!==null;){switch(_e.tag){case 5:X=_e.stateNode,Xj=!1;break e;case 3:X=_e.stateNode.containerInfo,Xj=!0;break e;case 4:X=_e.stateNode.containerInfo,Xj=!0;break e}_e=_e.return}if(X===null)throw Error(p(160));Zj(b,_,d),X=null,Xj=!1;var nt=d.alternate;nt!==null&&(nt.return=null),d.return=null}catch(rt){W(d,e,rt)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,o),e=e.sibling}function dk(o,e){var s=o.alternate,a=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ck(e,o),ek(o),a&4){try{Pj(3,o,o.return),Qj(3,o)}catch(wt){W(o,o.return,wt)}try{Pj(5,o,o.return)}catch(wt){W(o,o.return,wt)}}break;case 1:ck(e,o),ek(o),a&512&&s!==null&&Lj(s,s.return);break;case 5:if(ck(e,o),ek(o),a&512&&s!==null&&Lj(s,s.return),o.flags&32){var d=o.stateNode;try{ob(d,"")}catch(wt){W(o,o.return,wt)}}if(a&4&&(d=o.stateNode,d!=null)){var b=o.memoizedProps,_=s!==null?s.memoizedProps:b,_e=o.type,nt=o.updateQueue;if(o.updateQueue=null,nt!==null)try{_e==="input"&&b.type==="radio"&&b.name!=null&&ab(d,b),vb(_e,_);var rt=vb(_e,b);for(_=0;_<nt.length;_+=2){var ct=nt[_],dt=nt[_+1];ct==="style"?sb(d,dt):ct==="dangerouslySetInnerHTML"?nb(d,dt):ct==="children"?ob(d,dt):ta(d,ct,dt,rt)}switch(_e){case"input":bb(d,b);break;case"textarea":ib(d,b);break;case"select":var pt=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!b.multiple;var bt=b.value;bt!=null?fb(d,!!b.multiple,bt,!1):pt!==!!b.multiple&&(b.defaultValue!=null?fb(d,!!b.multiple,b.defaultValue,!0):fb(d,!!b.multiple,b.multiple?[]:"",!1))}d[Pf]=b}catch(wt){W(o,o.return,wt)}}break;case 6:if(ck(e,o),ek(o),a&4){if(o.stateNode===null)throw Error(p(162));d=o.stateNode,b=o.memoizedProps;try{d.nodeValue=b}catch(wt){W(o,o.return,wt)}}break;case 3:if(ck(e,o),ek(o),a&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(wt){W(o,o.return,wt)}break;case 4:ck(e,o),ek(o);break;case 13:ck(e,o),ek(o),d=o.child,d.flags&8192&&(b=d.memoizedState!==null,d.stateNode.isHidden=b,!b||d.alternate!==null&&d.alternate.memoizedState!==null||(fk=B())),a&4&&ak(o);break;case 22:if(ct=s!==null&&s.memoizedState!==null,o.mode&1?(U=(rt=U)||ct,ck(e,o),U=rt):ck(e,o),ek(o),a&8192){if(rt=o.memoizedState!==null,(o.stateNode.isHidden=rt)&&!ct&&o.mode&1)for(V$1=o,ct=o.child;ct!==null;){for(dt=V$1=ct;V$1!==null;){switch(pt=V$1,bt=pt.child,pt.tag){case 0:case 11:case 14:case 15:Pj(4,pt,pt.return);break;case 1:Lj(pt,pt.return);var xt=pt.stateNode;if(typeof xt.componentWillUnmount=="function"){a=pt,s=pt.return;try{e=a,xt.props=e.memoizedProps,xt.state=e.memoizedState,xt.componentWillUnmount()}catch(wt){W(a,s,wt)}}break;case 5:Lj(pt,pt.return);break;case 22:if(pt.memoizedState!==null){gk(dt);continue}}bt!==null?(bt.return=pt,V$1=bt):gk(dt)}ct=ct.sibling}e:for(ct=null,dt=o;;){if(dt.tag===5){if(ct===null){ct=dt;try{d=dt.stateNode,rt?(b=d.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(_e=dt.stateNode,nt=dt.memoizedProps.style,_=nt!=null&&nt.hasOwnProperty("display")?nt.display:null,_e.style.display=rb("display",_))}catch(wt){W(o,o.return,wt)}}}else if(dt.tag===6){if(ct===null)try{dt.stateNode.nodeValue=rt?"":dt.memoizedProps}catch(wt){W(o,o.return,wt)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===o)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===o)break e;for(;dt.sibling===null;){if(dt.return===null||dt.return===o)break e;ct===dt&&(ct=null),dt=dt.return}ct===dt&&(ct=null),dt.sibling.return=dt.return,dt=dt.sibling}}break;case 19:ck(e,o),ek(o),a&4&&ak(o);break;case 21:break;default:ck(e,o),ek(o)}}function ek(o){var e=o.flags;if(e&2){try{e:{for(var s=o.return;s!==null;){if(Tj(s)){var a=s;break e}s=s.return}throw Error(p(160))}switch(a.tag){case 5:var d=a.stateNode;a.flags&32&&(ob(d,""),a.flags&=-33);var b=Uj(o);Wj(o,b,d);break;case 3:case 4:var _=a.stateNode.containerInfo,_e=Uj(o);Vj(o,_e,_);break;default:throw Error(p(161))}}catch(nt){W(o,o.return,nt)}o.flags&=-3}e&4096&&(o.flags&=-4097)}function hk(o,e,s){V$1=o,ik(o)}function ik(o,e,s){for(var a=(o.mode&1)!==0;V$1!==null;){var d=V$1,b=d.child;if(d.tag===22&&a){var _=d.memoizedState!==null||Jj;if(!_){var _e=d.alternate,nt=_e!==null&&_e.memoizedState!==null||U;_e=Jj;var rt=U;if(Jj=_,(U=nt)&&!rt)for(V$1=d;V$1!==null;)_=V$1,nt=_.child,_.tag===22&&_.memoizedState!==null?jk(d):nt!==null?(nt.return=_,V$1=nt):jk(d);for(;b!==null;)V$1=b,ik(b),b=b.sibling;V$1=d,Jj=_e,U=rt}kk(o)}else d.subtreeFlags&8772&&b!==null?(b.return=d,V$1=b):kk(o)}}function kk(o){for(;V$1!==null;){var e=V$1;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var a=e.stateNode;if(e.flags&4&&!U)if(s===null)a.componentDidMount();else{var d=e.elementType===e.type?s.memoizedProps:Ci(e.type,s.memoizedProps);a.componentDidUpdate(d,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var b=e.updateQueue;b!==null&&sh(e,b,a);break;case 3:var _=e.updateQueue;if(_!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}sh(e,_,s)}break;case 5:var _e=e.stateNode;if(s===null&&e.flags&4){s=_e;var nt=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":nt.autoFocus&&s.focus();break;case"img":nt.src&&(s.src=nt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var rt=e.alternate;if(rt!==null){var ct=rt.memoizedState;if(ct!==null){var dt=ct.dehydrated;dt!==null&&bd(dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Rj(e)}catch(pt){W(e,e.return,pt)}}if(e===o){V$1=null;break}if(s=e.sibling,s!==null){s.return=e.return,V$1=s;break}V$1=e.return}}function gk(o){for(;V$1!==null;){var e=V$1;if(e===o){V$1=null;break}var s=e.sibling;if(s!==null){s.return=e.return,V$1=s;break}V$1=e.return}}function jk(o){for(;V$1!==null;){var e=V$1;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Qj(4,e)}catch(nt){W(e,s,nt)}break;case 1:var a=e.stateNode;if(typeof a.componentDidMount=="function"){var d=e.return;try{a.componentDidMount()}catch(nt){W(e,d,nt)}}var b=e.return;try{Rj(e)}catch(nt){W(e,b,nt)}break;case 5:var _=e.return;try{Rj(e)}catch(nt){W(e,_,nt)}}}catch(nt){W(e,e.return,nt)}if(e===o){V$1=null;break}var _e=e.sibling;if(_e!==null){_e.return=e.return,V$1=_e;break}V$1=e.return}}var lk=Math.ceil,mk=ua$1.ReactCurrentDispatcher,nk=ua$1.ReactCurrentOwner,ok=ua$1.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z$1=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(o){return o.mode&1?K&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(o=C,o!==0||(o=window.event,o=o===void 0?16:jd(o.type)),o):1}function gi(o,e,s,a){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(o,s,a),(!(K&2)||o!==Q)&&(o===Q&&(!(K&2)&&(qk|=s),T===4&&Ck(o,Z$1)),Dk(o,a),s===1&&K===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(o,e){var s=o.callbackNode;wc(o,e);var a=uc(o,o===Q?Z$1:0);if(a===0)s!==null&&bc(s),o.callbackNode=null,o.callbackPriority=0;else if(e=a&-a,o.callbackPriority!==e){if(s!=null&&bc(s),e===1)o.tag===0?ig(Ek.bind(null,o)):hg(Ek.bind(null,o)),Jf(function(){!(K&6)&&jg()}),s=null;else{switch(Dc(a)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Fk(s,Gk.bind(null,o))}o.callbackPriority=e,o.callbackNode=s}}function Gk(o,e){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var s=o.callbackNode;if(Hk()&&o.callbackNode!==s)return null;var a=uc(o,o===Q?Z$1:0);if(a===0)return null;if(a&30||a&o.expiredLanes||e)e=Ik(o,a);else{e=a;var d=K;K|=2;var b=Jk();(Q!==o||Z$1!==e)&&(uk=null,Gj=B()+500,Kk(o,e));do try{Lk();break}catch(_e){Mk(o,_e)}while(!0);$g(),mk.current=b,K=d,Y!==null?e=0:(Q=null,Z$1=0,e=T)}if(e!==0){if(e===2&&(d=xc(o),d!==0&&(a=d,e=Nk(o,d))),e===1)throw s=pk,Kk(o,0),Ck(o,a),Dk(o,B()),s;if(e===6)Ck(o,a);else{if(d=o.current.alternate,!(a&30)&&!Ok(d)&&(e=Ik(o,a),e===2&&(b=xc(o),b!==0&&(a=b,e=Nk(o,b))),e===1))throw s=pk,Kk(o,0),Ck(o,a),Dk(o,B()),s;switch(o.finishedWork=d,o.finishedLanes=a,e){case 0:case 1:throw Error(p(345));case 2:Pk(o,tk,uk);break;case 3:if(Ck(o,a),(a&130023424)===a&&(e=fk+500-B(),10<e)){if(uc(o,0)!==0)break;if(d=o.suspendedLanes,(d&a)!==a){R(),o.pingedLanes|=o.suspendedLanes&d;break}o.timeoutHandle=Ff(Pk.bind(null,o,tk,uk),e);break}Pk(o,tk,uk);break;case 4:if(Ck(o,a),(a&4194240)===a)break;for(e=o.eventTimes,d=-1;0<a;){var _=31-oc(a);b=1<<_,_=e[_],_>d&&(d=_),a&=~b}if(a=d,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){o.timeoutHandle=Ff(Pk.bind(null,o,tk,uk),a);break}Pk(o,tk,uk);break;case 5:Pk(o,tk,uk);break;default:throw Error(p(329))}}}return Dk(o,B()),o.callbackNode===s?Gk.bind(null,o):null}function Nk(o,e){var s=sk;return o.current.memoizedState.isDehydrated&&(Kk(o,e).flags|=256),o=Ik(o,e),o!==2&&(e=tk,tk=s,e!==null&&Fj(e)),o}function Fj(o){tk===null?tk=o:tk.push.apply(tk,o)}function Ok(o){for(var e=o;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var d=s[a],b=d.getSnapshot;d=d.value;try{if(!He(b(),d))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===o)break;for(;e.sibling===null;){if(e.return===null||e.return===o)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(o,e){for(e&=~rk,e&=~qk,o.suspendedLanes|=e,o.pingedLanes&=~e,o=o.expirationTimes;0<e;){var s=31-oc(e),a=1<<s;o[s]=-1,e&=~a}}function Ek(o){if(K&6)throw Error(p(327));Hk();var e=uc(o,0);if(!(e&1))return Dk(o,B()),null;var s=Ik(o,e);if(o.tag!==0&&s===2){var a=xc(o);a!==0&&(e=a,s=Nk(o,a))}if(s===1)throw s=pk,Kk(o,0),Ck(o,e),Dk(o,B()),s;if(s===6)throw Error(p(345));return o.finishedWork=o.current.alternate,o.finishedLanes=e,Pk(o,tk,uk),Dk(o,B()),null}function Qk(o,e){var s=K;K|=1;try{return o(e)}finally{K=s,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(o){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var s=ok.transition,a=C;try{if(ok.transition=null,C=1,o)return o()}finally{C=a,ok.transition=s,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(o,e){o.finishedWork=null,o.finishedLanes=0;var s=o.timeoutHandle;if(s!==-1&&(o.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var a=s;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}s=s.return}if(Q=o,Y=o=Pg(o.current,null),Z$1=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(s=fh[e],a=s.interleaved,a!==null){s.interleaved=null;var d=a.next,b=s.pending;if(b!==null){var _=b.next;b.next=d,a.next=_}s.pending=a}fh=null}return o}function Mk(o,e){do{var s=Y;try{if($g(),Fh.current=Rh,Ih){for(var a=M$1.memoizedState;a!==null;){var d=a.queue;d!==null&&(d.pending=null),a=a.next}Ih=!1}if(Hh=0,O$1=N=M$1=null,Jh=!1,Kh=0,nk.current=null,s===null||s.return===null){T=1,pk=e,Y=null;break}e:{var b=o,_=s.return,_e=s,nt=e;if(e=Z$1,_e.flags|=32768,nt!==null&&typeof nt=="object"&&typeof nt.then=="function"){var rt=nt,ct=_e,dt=ct.tag;if(!(ct.mode&1)&&(dt===0||dt===11||dt===15)){var pt=ct.alternate;pt?(ct.updateQueue=pt.updateQueue,ct.memoizedState=pt.memoizedState,ct.lanes=pt.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var bt=Ui(_);if(bt!==null){bt.flags&=-257,Vi(bt,_,_e,b,e),bt.mode&1&&Si(b,rt,e),e=bt,nt=rt;var xt=e.updateQueue;if(xt===null){var wt=new Set;wt.add(nt),e.updateQueue=wt}else xt.add(nt);break e}else{if(!(e&1)){Si(b,rt,e),tj();break e}nt=Error(p(426))}}else if(I$1&&_e.mode&1){var Tt=Ui(_);if(Tt!==null){!(Tt.flags&65536)&&(Tt.flags|=256),Vi(Tt,_,_e,b,e),Jg(Ji(nt,_e));break e}}b=nt=Ji(nt,_e),T!==4&&(T=2),sk===null?sk=[b]:sk.push(b),b=_;do{switch(b.tag){case 3:b.flags|=65536,e&=-e,b.lanes|=e;var Rt=Ni(b,nt,e);ph(b,Rt);break e;case 1:_e=nt;var Mt=b.type,Et=b.stateNode;if(!(b.flags&128)&&(typeof Mt.getDerivedStateFromError=="function"||Et!==null&&typeof Et.componentDidCatch=="function"&&(Ri===null||!Ri.has(Et)))){b.flags|=65536,e&=-e,b.lanes|=e;var $t=Qi(b,_e,e);ph(b,$t);break e}}b=b.return}while(b!==null)}Sk(s)}catch(Xt){e=Xt,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(!0)}function Jk(){var o=mk.current;return mk.current=Rh,o===null?Rh:o}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z$1)}function Ik(o,e){var s=K;K|=2;var a=Jk();(Q!==o||Z$1!==e)&&(uk=null,Kk(o,e));do try{Tk();break}catch(d){Mk(o,d)}while(!0);if($g(),K=s,mk.current=a,Y!==null)throw Error(p(261));return Q=null,Z$1=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(o){var e=Vk(o.alternate,o,fj);o.memoizedProps=o.pendingProps,e===null?Sk(o):Y=e,nk.current=null}function Sk(o){var e=o;do{var s=e.alternate;if(o=e.return,e.flags&32768){if(s=Ij(s,e),s!==null){s.flags&=32767,Y=s;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{T=6,Y=null;return}}else if(s=Ej(s,e,fj),s!==null){Y=s;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=o}while(e!==null);T===0&&(T=5)}function Pk(o,e,s){var a=C,d=ok.transition;try{ok.transition=null,C=1,Wk(o,e,s,a)}finally{ok.transition=d,C=a}return null}function Wk(o,e,s,a){do Hk();while(wk!==null);if(K&6)throw Error(p(327));s=o.finishedWork;var d=o.finishedLanes;if(s===null)return null;if(o.finishedWork=null,o.finishedLanes=0,s===o.current)throw Error(p(177));o.callbackNode=null,o.callbackPriority=0;var b=s.lanes|s.childLanes;if(Bc(o,b),o===Q&&(Y=Q=null,Z$1=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),b=(s.flags&15990)!==0,s.subtreeFlags&15990||b){b=ok.transition,ok.transition=null;var _=C;C=1;var _e=K;K|=4,nk.current=null,Oj(o,s),dk(s,o),Oe(Df),dd=!!Cf,Df=Cf=null,o.current=s,hk(s),dc(),K=_e,C=_,ok.transition=b}else o.current=s;if(vk&&(vk=!1,wk=o,xk=d),b=o.pendingLanes,b===0&&(Ri=null),mc(s.stateNode),Dk(o,B()),e!==null)for(a=o.onRecoverableError,s=0;s<e.length;s++)d=e[s],a(d.value,{componentStack:d.stack,digest:d.digest});if(Oi)throw Oi=!1,o=Pi,Pi=null,o;return xk&1&&o.tag!==0&&Hk(),b=o.pendingLanes,b&1?o===zk?yk++:(yk=0,zk=o):yk=0,jg(),null}function Hk(){if(wk!==null){var o=Dc(xk),e=ok.transition,s=C;try{if(ok.transition=null,C=16>o?16:o,wk===null)var a=!1;else{if(o=wk,wk=null,xk=0,K&6)throw Error(p(331));var d=K;for(K|=4,V$1=o.current;V$1!==null;){var b=V$1,_=b.child;if(V$1.flags&16){var _e=b.deletions;if(_e!==null){for(var nt=0;nt<_e.length;nt++){var rt=_e[nt];for(V$1=rt;V$1!==null;){var ct=V$1;switch(ct.tag){case 0:case 11:case 15:Pj(8,ct,b)}var dt=ct.child;if(dt!==null)dt.return=ct,V$1=dt;else for(;V$1!==null;){ct=V$1;var pt=ct.sibling,bt=ct.return;if(Sj(ct),ct===rt){V$1=null;break}if(pt!==null){pt.return=bt,V$1=pt;break}V$1=bt}}}var xt=b.alternate;if(xt!==null){var wt=xt.child;if(wt!==null){xt.child=null;do{var Tt=wt.sibling;wt.sibling=null,wt=Tt}while(wt!==null)}}V$1=b}}if(b.subtreeFlags&2064&&_!==null)_.return=b,V$1=_;else e:for(;V$1!==null;){if(b=V$1,b.flags&2048)switch(b.tag){case 0:case 11:case 15:Pj(9,b,b.return)}var Rt=b.sibling;if(Rt!==null){Rt.return=b.return,V$1=Rt;break e}V$1=b.return}}var Mt=o.current;for(V$1=Mt;V$1!==null;){_=V$1;var Et=_.child;if(_.subtreeFlags&2064&&Et!==null)Et.return=_,V$1=Et;else e:for(_=Mt;V$1!==null;){if(_e=V$1,_e.flags&2048)try{switch(_e.tag){case 0:case 11:case 15:Qj(9,_e)}}catch(Xt){W(_e,_e.return,Xt)}if(_e===_){V$1=null;break e}var $t=_e.sibling;if($t!==null){$t.return=_e.return,V$1=$t;break e}V$1=_e.return}}if(K=d,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,o)}catch{}a=!0}return a}finally{C=s,ok.transition=e}}return!1}function Xk(o,e,s){e=Ji(s,e),e=Ni(o,e,1),o=nh(o,e,1),e=R(),o!==null&&(Ac(o,1,e),Dk(o,e))}function W(o,e,s){if(o.tag===3)Xk(o,o,s);else for(;e!==null;){if(e.tag===3){Xk(e,o,s);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){o=Ji(s,o),o=Qi(e,o,1),e=nh(e,o,1),o=R(),e!==null&&(Ac(e,1,o),Dk(e,o));break}}e=e.return}}function Ti(o,e,s){var a=o.pingCache;a!==null&&a.delete(e),e=R(),o.pingedLanes|=o.suspendedLanes&s,Q===o&&(Z$1&s)===s&&(T===4||T===3&&(Z$1&130023424)===Z$1&&500>B()-fk?Kk(o,0):rk|=s),Dk(o,e)}function Yk(o,e){e===0&&(o.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var s=R();o=ih(o,e),o!==null&&(Ac(o,e,s),Dk(o,s))}function uj(o){var e=o.memoizedState,s=0;e!==null&&(s=e.retryLane),Yk(o,s)}function bk(o,e){var s=0;switch(o.tag){case 13:var a=o.stateNode,d=o.memoizedState;d!==null&&(s=d.retryLane);break;case 19:a=o.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(e),Yk(o,s)}var Vk;Vk=function(o,e,s){if(o!==null)if(o.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(o.lanes&s)&&!(e.flags&128))return dh=!1,yj(o,e,s);dh=!!(o.flags&131072)}else dh=!1,I$1&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var a=e.type;ij(o,e),o=e.pendingProps;var d=Yf(e,H.current);ch(e,s),d=Nh(null,e,a,o,d,s);var b=Sh();return e.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(a)?(b=!0,cg(e)):b=!1,e.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,kh(e),d.updater=Ei,e.stateNode=d,d._reactInternals=e,Ii(e,a,o,s),e=jj(null,e,a,!0,b,s)):(e.tag=0,I$1&&b&&vg(e),Xi(null,e,d,s),e=e.child),e;case 16:a=e.elementType;e:{switch(ij(o,e),o=e.pendingProps,d=a._init,a=d(a._payload),e.type=a,d=e.tag=Zk(a),o=Ci(a,o),d){case 0:e=cj(null,e,a,o,s);break e;case 1:e=hj(null,e,a,o,s);break e;case 11:e=Yi(null,e,a,o,s);break e;case 14:e=$i(null,e,a,Ci(a.type,o),s);break e}throw Error(p(306,a,""))}return e;case 0:return a=e.type,d=e.pendingProps,d=e.elementType===a?d:Ci(a,d),cj(o,e,a,d,s);case 1:return a=e.type,d=e.pendingProps,d=e.elementType===a?d:Ci(a,d),hj(o,e,a,d,s);case 3:e:{if(kj(e),o===null)throw Error(p(387));a=e.pendingProps,b=e.memoizedState,d=b.element,lh(o,e),qh(e,a,null,s);var _=e.memoizedState;if(a=_.element,b.isDehydrated)if(b={element:a,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},e.updateQueue.baseState=b,e.memoizedState=b,e.flags&256){d=Ji(Error(p(423)),e),e=lj(o,e,a,s,d);break e}else if(a!==d){d=Ji(Error(p(424)),e),e=lj(o,e,a,s,d);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I$1=!0,zg=null,s=Vg(e,null,a,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),a===d){e=Zi(o,e,s);break e}Xi(o,e,a,s)}e=e.child}return e;case 5:return Ah(e),o===null&&Eg(e),a=e.type,d=e.pendingProps,b=o!==null?o.memoizedProps:null,_=d.children,Ef(a,d)?_=null:b!==null&&Ef(a,b)&&(e.flags|=32),gj(o,e),Xi(o,e,_,s),e.child;case 6:return o===null&&Eg(e),null;case 13:return oj(o,e,s);case 4:return yh(e,e.stateNode.containerInfo),a=e.pendingProps,o===null?e.child=Ug(e,null,a,s):Xi(o,e,a,s),e.child;case 11:return a=e.type,d=e.pendingProps,d=e.elementType===a?d:Ci(a,d),Yi(o,e,a,d,s);case 7:return Xi(o,e,e.pendingProps,s),e.child;case 8:return Xi(o,e,e.pendingProps.children,s),e.child;case 12:return Xi(o,e,e.pendingProps.children,s),e.child;case 10:e:{if(a=e.type._context,d=e.pendingProps,b=e.memoizedProps,_=d.value,G(Wg,a._currentValue),a._currentValue=_,b!==null)if(He(b.value,_)){if(b.children===d.children&&!Wf.current){e=Zi(o,e,s);break e}}else for(b=e.child,b!==null&&(b.return=e);b!==null;){var _e=b.dependencies;if(_e!==null){_=b.child;for(var nt=_e.firstContext;nt!==null;){if(nt.context===a){if(b.tag===1){nt=mh(-1,s&-s),nt.tag=2;var rt=b.updateQueue;if(rt!==null){rt=rt.shared;var ct=rt.pending;ct===null?nt.next=nt:(nt.next=ct.next,ct.next=nt),rt.pending=nt}}b.lanes|=s,nt=b.alternate,nt!==null&&(nt.lanes|=s),bh(b.return,s,e),_e.lanes|=s;break}nt=nt.next}}else if(b.tag===10)_=b.type===e.type?null:b.child;else if(b.tag===18){if(_=b.return,_===null)throw Error(p(341));_.lanes|=s,_e=_.alternate,_e!==null&&(_e.lanes|=s),bh(_,s,e),_=b.sibling}else _=b.child;if(_!==null)_.return=b;else for(_=b;_!==null;){if(_===e){_=null;break}if(b=_.sibling,b!==null){b.return=_.return,_=b;break}_=_.return}b=_}Xi(o,e,d.children,s),e=e.child}return e;case 9:return d=e.type,a=e.pendingProps.children,ch(e,s),d=eh(d),a=a(d),e.flags|=1,Xi(o,e,a,s),e.child;case 14:return a=e.type,d=Ci(a,e.pendingProps),d=Ci(a.type,d),$i(o,e,a,d,s);case 15:return bj(o,e,e.type,e.pendingProps,s);case 17:return a=e.type,d=e.pendingProps,d=e.elementType===a?d:Ci(a,d),ij(o,e),e.tag=1,Zf(a)?(o=!0,cg(e)):o=!1,ch(e,s),Gi(e,a,d),Ii(e,a,d,s),jj(null,e,a,!0,o,s);case 19:return xj(o,e,s);case 22:return dj(o,e,s)}throw Error(p(156,e.tag))};function Fk(o,e){return ac(o,e)}function $k(o,e,s,a){this.tag=o,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(o,e,s,a){return new $k(o,e,s,a)}function aj(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Zk(o){if(typeof o=="function")return aj(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Da)return 11;if(o===Ga)return 14}return 2}function Pg(o,e){var s=o.alternate;return s===null?(s=Bg(o.tag,e,o.key,o.mode),s.elementType=o.elementType,s.type=o.type,s.stateNode=o.stateNode,s.alternate=o,o.alternate=s):(s.pendingProps=e,s.type=o.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=o.flags&14680064,s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=o.sibling,s.index=o.index,s.ref=o.ref,s}function Rg(o,e,s,a,d,b){var _=2;if(a=o,typeof o=="function")aj(o)&&(_=1);else if(typeof o=="string")_=5;else e:switch(o){case ya:return Tg(s.children,d,b,e);case za:_=8,d|=8;break;case Aa:return o=Bg(12,s,e,d|2),o.elementType=Aa,o.lanes=b,o;case Ea:return o=Bg(13,s,e,d),o.elementType=Ea,o.lanes=b,o;case Fa:return o=Bg(19,s,e,d),o.elementType=Fa,o.lanes=b,o;case Ia:return pj(s,d,b,e);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ba:_=10;break e;case Ca:_=9;break e;case Da:_=11;break e;case Ga:_=14;break e;case Ha:_=16,a=null;break e}throw Error(p(130,o==null?o:typeof o,""))}return e=Bg(_,s,e,d),e.elementType=o,e.type=a,e.lanes=b,e}function Tg(o,e,s,a){return o=Bg(7,o,a,e),o.lanes=s,o}function pj(o,e,s,a){return o=Bg(22,o,a,e),o.elementType=Ia,o.lanes=s,o.stateNode={isHidden:!1},o}function Qg(o,e,s){return o=Bg(6,o,null,e),o.lanes=s,o}function Sg(o,e,s){return e=Bg(4,o.children!==null?o.children:[],o.key,e),e.lanes=s,e.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},e}function al(o,e,s,a,d){this.tag=e,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function bl(o,e,s,a,d,b,_,_e,nt){return o=new al(o,e,s,_e,nt),e===1?(e=1,b===!0&&(e|=8)):e=0,b=Bg(3,null,null,e),o.current=b,b.stateNode=o,b.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(b),o}function cl(o,e,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:o,containerInfo:e,implementation:s}}function dl(o){if(!o)return Vf;o=o._reactInternals;e:{if(Vb(o)!==o||o.tag!==1)throw Error(p(170));var e=o;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(o.tag===1){var s=o.type;if(Zf(s))return bg(o,s,e)}return e}function el(o,e,s,a,d,b,_,_e,nt){return o=bl(s,a,!0,o,d,b,_,_e,nt),o.context=dl(null),s=o.current,a=R(),d=yi(s),b=mh(a,d),b.callback=e??null,nh(s,b,d),o.current.lanes=d,Ac(o,d,a),Dk(o,a),o}function fl(o,e,s,a){var d=e.current,b=R(),_=yi(d);return s=dl(s),e.context===null?e.context=s:e.pendingContext=s,e=mh(b,_),e.payload={element:o},a=a===void 0?null:a,a!==null&&(e.callback=a),o=nh(d,e,_),o!==null&&(gi(o,d,_,b),oh(o,d,_)),_}function gl(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function hl(o,e){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var s=o.retryLane;o.retryLane=s!==0&&s<e?s:e}}function il(o,e){hl(o,e),(o=o.alternate)&&hl(o,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(o){console.error(o)};function ll(o){this._internalRoot=o}ml.prototype.render=ll.prototype.render=function(o){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(o,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var e=o.containerInfo;Rk(function(){fl(null,o,null,null)}),e[uf]=null}};function ml(o){this._internalRoot=o}ml.prototype.unstable_scheduleHydration=function(o){if(o){var e=Hc();o={blockedOn:null,target:o,priority:e};for(var s=0;s<Qc.length&&e!==0&&e<Qc[s].priority;s++);Qc.splice(s,0,o),s===0&&Vc(o)}};function nl(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function ol(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(o,e,s,a,d){if(d){if(typeof a=="function"){var b=a;a=function(){var rt=gl(_);b.call(rt)}}var _=el(e,a,o,0,null,!1,!1,"",pl);return o._reactRootContainer=_,o[uf]=_.current,sf(o.nodeType===8?o.parentNode:o),Rk(),_}for(;d=o.lastChild;)o.removeChild(d);if(typeof a=="function"){var _e=a;a=function(){var rt=gl(nt);_e.call(rt)}}var nt=bl(o,0,!1,null,null,!1,!1,"",pl);return o._reactRootContainer=nt,o[uf]=nt.current,sf(o.nodeType===8?o.parentNode:o),Rk(function(){fl(e,nt,s,a)}),nt}function rl(o,e,s,a,d){var b=s._reactRootContainer;if(b){var _=b;if(typeof d=="function"){var _e=d;d=function(){var nt=gl(_);_e.call(nt)}}fl(e,_,o,d)}else _=ql(s,e,o,d,a);return gl(_)}Ec=function(o){switch(o.tag){case 3:var e=o.stateNode;if(e.current.memoizedState.isDehydrated){var s=tc(e.pendingLanes);s!==0&&(Cc(e,s|1),Dk(e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var a=ih(o,1);if(a!==null){var d=R();gi(a,o,1,d)}}),il(o,1)}};Fc=function(o){if(o.tag===13){var e=ih(o,134217728);if(e!==null){var s=R();gi(e,o,134217728,s)}il(o,134217728)}};Gc=function(o){if(o.tag===13){var e=yi(o),s=ih(o,e);if(s!==null){var a=R();gi(s,o,e,a)}il(o,e)}};Hc=function(){return C};Ic=function(o,e){var s=C;try{return C=o,e()}finally{C=s}};yb=function(o,e,s){switch(e){case"input":if(bb(o,s),e=s.name,s.type==="radio"&&e!=null){for(s=o;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var a=s[e];if(a!==o&&a.form===o.form){var d=Db(a);if(!d)throw Error(p(90));Wa(a),bb(a,d)}}}break;case"textarea":ib(o,s);break;case"select":e=s.value,e!=null&&fb(o,!!s.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Zb(o),o===null?null:o.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(o,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(o,e,null,s)};reactDom_production_min.createRoot=function(o,e){if(!nl(o))throw Error(p(299));var s=!1,a="",d=kl;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onRecoverableError!==void 0&&(d=e.onRecoverableError)),e=bl(o,1,!1,null,null,s,!1,a,d),o[uf]=e.current,sf(o.nodeType===8?o.parentNode:o),new ll(e)};reactDom_production_min.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var e=o._reactInternals;if(e===void 0)throw typeof o.render=="function"?Error(p(188)):(o=Object.keys(o).join(","),Error(p(268,o)));return o=Zb(e),o=o===null?null:o.stateNode,o};reactDom_production_min.flushSync=function(o){return Rk(o)};reactDom_production_min.hydrate=function(o,e,s){if(!ol(e))throw Error(p(200));return rl(null,o,e,!0,s)};reactDom_production_min.hydrateRoot=function(o,e,s){if(!nl(o))throw Error(p(405));var a=s!=null&&s.hydratedSources||null,d=!1,b="",_=kl;if(s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(b=s.identifierPrefix),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),e=el(e,null,o,1,s??null,d,!1,b,_),o[uf]=e.current,sf(o),a)for(o=0;o<a.length;o++)s=a[o],d=s._getVersion,d=d(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,d]:e.mutableSourceEagerHydrationData.push(s,d);return new ml(e)};reactDom_production_min.render=function(o,e,s){if(!ol(e))throw Error(p(200));return rl(null,o,e,!1,s)};reactDom_production_min.unmountComponentAtNode=function(o){if(!ol(o))throw Error(p(40));return o._reactRootContainer?(Rk(function(){rl(null,null,o,!1,function(){o._reactRootContainer=null,o[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(o,e,s,a){if(!ol(s))throw Error(p(200));if(o==null||o._reactInternals===void 0)throw Error(p(38));return rl(o,e,s,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(o){console.error(o)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs$2(reactDomExports);var createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;function symToStr(o){return Object.keys(o)[0]}let wrap$1;function setBrandTopAndHomeLinkProps(o){wrap$1=o}function getBrandTopAndHomeLinkProps(){return wrap$1}var __rest$9=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const Footer=reactExports.memo(reactExports.forwardRef((o,e)=>{const{id:s,className:a,classes:d={},contentDescription:b,websiteMapLinkProps:_,accessibilityLinkProps:_e,accessibility:nt,termsLinkProps:rt,bottomItems:ct=[],partnersLogos:dt,operatorLogo:pt,license:bt,brandTop:xt,homeLinkProps:wt,style:Tt,linkList:Rt,domains:Mt=["info.gouv.fr","service-public.fr","legifrance.gouv.fr","data.gouv.fr"]}=o,Et=__rest$9(o,["id","className","classes","contentDescription","websiteMapLinkProps","accessibilityLinkProps","accessibility","termsLinkProps","bottomItems","partnersLogos","operatorLogo","license","brandTop","homeLinkProps","style","linkList","domains"]);assert$1();const $t=s??"fr-footer",{brandTop:Xt,homeLinkProps:Zt}=(()=>{const an=getBrandTopAndHomeLinkProps(),Vt=xt??(an==null?void 0:an.brandTop),ao=wt??(an==null?void 0:an.homeLinkProps),hn=" hasn't been provided to the Footer and we cannot retrieve it from the Header (it's probably client side)";if(Vt===void 0)throw new Error(symToStr({brandTop:Vt})+hn);if(ao===void 0)throw new Error(symToStr({homeLinkProps:ao})+hn);return{brandTop:Vt,homeLinkProps:ao}})(),{Link:Nt}=getLink(),{t:Jt}=useTranslation$7(),{main:dn,sub:Pn=[]}=dt??{};return React.createElement("footer",Object.assign({id:$t,className:cx$1(fr.cx("fr-footer"),d.root,a),role:"contentinfo",ref:e,style:Tt},Et),Rt!==void 0&&React.createElement("div",{className:fr.cx("fr-footer__top")},React.createElement("div",{className:fr.cx("fr-container")},React.createElement("div",{className:fr.cx("fr-grid-row","fr-grid-row--gutters")},Rt.map((an,Vt)=>an!==void 0&&React.createElement("div",{key:`fr-footer__top-cat-${Vt}`,className:fr.cx("fr-col-12","fr-col-sm-3","fr-col-md-2")},(an==null?void 0:an.categoryName)&&React.createElement("h3",{className:fr.cx("fr-footer__top-cat")},an==null?void 0:an.categoryName),React.createElement("ul",{className:fr.cx("fr-footer__top-list")},an==null?void 0:an.links.map((ao,hn)=>React.createElement("li",{key:`fr-footer__top-link-${hn}`},React.createElement(Nt,Object.assign({},ao==null?void 0:ao.linkProps,{className:fr.cx("fr-footer__top-link")}),ao==null?void 0:ao.text))))))))),React.createElement("div",{className:fr.cx("fr-container")},React.createElement("div",{className:cx$1(fr.cx("fr-footer__body"),d.body)},React.createElement("div",{className:cx$1(fr.cx("fr-footer__brand","fr-enlarge-link"),d.brand)},(()=>{const an=React.createElement("p",{className:cx$1(fr.cx("fr-logo"),d.logo)},Xt);return pt!==void 0?an:React.createElement(Nt,Object.assign({},Zt),an)})(),pt!==void 0&&React.createElement(Nt,Object.assign({},Zt,{className:cx$1(fr.cx("fr-footer__brand-link"),d.brandLink,Zt.className)}),React.createElement("img",{className:cx$1(fr.cx("fr-footer__logo"),d.operatorLogo),style:(()=>{switch(pt.orientation){case"vertical":return{width:"3.5rem"};case"horizontal":return{maxWidth:"9.0625rem"}}})(),src:pt.imgUrl,alt:pt.alt}))),React.createElement("div",{className:cx$1(fr.cx("fr-footer__content"),d.content)},b!==void 0&&React.createElement("p",{className:cx$1(fr.cx("fr-footer__content-desc"),d.contentDesc)},b),React.createElement("ul",{className:cx$1(fr.cx("fr-footer__content-list"),d.contentList)},Mt.map((an,Vt)=>React.createElement("li",{className:cx$1(fr.cx("fr-footer__content-item"),d.contentItem),key:Vt},React.createElement("a",{className:cx$1(fr.cx("fr-footer__content-link"),d.contentLink),target:"_blank",href:`https://${an}`,title:`${an} - ${Jt("open new window")}`},an)))))),dt!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners"),d.partners)},React.createElement("h4",{className:cx$1(fr.cx("fr-footer__partners-title"),d.partnersTitle)},Jt("our partners")),React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners-logos"),d.partnersLogos)},dn!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners-main"),d.partnersMain)},(()=>{var an,Vt;const ao=React.createElement("img",{alt:dn.alt,style:{height:"5.625rem"},src:dn.imgUrl,className:cx$1(fr.cx("fr-footer__logo"),d.logo)});return dn.linkProps!==void 0||dn.href!==void 0?React.createElement(Nt,Object.assign({},dn.linkProps,{href:(an=dn.href)!==null&&an!==void 0?an:(Vt=dn.linkProps)===null||Vt===void 0?void 0:Vt.href,className:cx$1(fr.cx("fr-footer__partners-link","fr-raw-link"),d.partnersLink)}),ao):ao})()),Pn.length!==0&&React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners-sub"),d.partnersSub)},React.createElement("ul",null,Pn.map((an,Vt)=>{var ao,hn;const fn=React.createElement("img",{alt:an.alt,src:an.imgUrl,style:{height:"5.625rem"},className:cx$1(fr.cx("fr-footer__logo"),d.logo)}),It=an.linkProps!==void 0||an.href!==void 0;return React.createElement("li",{key:Vt},It?React.createElement(Nt,Object.assign({},an.linkProps,{href:(ao=an.href)!==null&&ao!==void 0?ao:(hn=an.linkProps)===null||hn===void 0?void 0:hn.href,className:cx$1(fr.cx("fr-footer__partners-link","fr-raw-link"),d.partnersLink)}),fn):fn)}))))),React.createElement("div",{className:cx$1(fr.cx("fr-footer__bottom"),d.bottom)},React.createElement("ul",{className:cx$1(fr.cx("fr-footer__bottom-list"),d.bottomList)},[..._===void 0?[]:[id$1({text:Jt("website map"),linkProps:_})],id$1({text:`${Jt("accessibility")} : ${Jt(nt)}`,linkProps:_e??{}}),...rt===void 0?[]:[id$1({text:Jt("terms"),linkProps:rt})],...ct].map((an,Vt)=>React.createElement("li",{className:cx$1(fr.cx("fr-footer__bottom-item"),d.bottomItem,a),key:Vt},typeGuard(an,an instanceof Object&&"text"in an)?React.createElement(FooterBottomItem,{classes:{bottomLink:d.bottomLink},bottomItem:an}):an))),React.createElement("div",{className:cx$1(fr.cx("fr-footer__bottom-copy"),d.bottomCopy)},React.createElement("p",null,bt===void 0?Jt("license mention",{licenseUrl:"https://github.com/etalab/licence-ouverte/blob/master/LO.md"}):bt)))))}));Footer.displayName=symToStr({Footer});const{useTranslation:useTranslation$7,addFooterTranslations}=createComponentI18nApi({componentName:symToStr({Footer}),frMessages:{"hide message":"Masquer le message","website map":"Plan du site",accessibility:"Accessibilit","non compliant":"non conforme","partially compliant":"partiellement conforme","fully compliant":"totalement conforme",terms:"Mentions lgales","cookies management":"Gestion des cookies","license mention":o=>React.createElement(React.Fragment,null,"Sauf mention explicite de proprit intellectuelle dtenue par des tiers, les contenus de ce site sont proposs sous"," ",React.createElement("a",{href:o.licenseUrl,target:"_blank",title:"licence etalab-2.0 - ouvre une nouvelle fentre"},"licence etalab-2.0")),"our partners":"Nos partenaires","open new window":"ouvre une nouvelle fentre"}});addFooterTranslations({lang:"en",messages:{"hide message":"Hide the message","website map":"Website map",accessibility:"Accessibility","non compliant":"non compliant","partially compliant":"partially compliant","fully compliant":"fully compliant","license mention":o=>React.createElement(React.Fragment,null,"Unless stated otherwise, all content of this website is under the"," ",React.createElement("a",{href:o.licenseUrl,target:"_blank",title:"etalab-2.0 license - open a new window"},"etalab-2.0 license")),"open new window":"open new window"}});addFooterTranslations({lang:"es",messages:{"hide message":"Occultar el mesage"}});function FooterBottomItem(o){const{className:e,bottomItem:s,classes:a={}}=o,{Link:d}=getLink(),b=cx$1(fr.cx("fr-footer__bottom-link",...s.iconId!==void 0?[s.iconId,"fr-link--icon-left"]:[]),a.bottomLink,a.root,e);return s.linkProps!==void 0?Object.keys(s.linkProps).length===0?React.createElement("span",{className:b},s.text):React.createElement(d,Object.assign({},s.linkProps,{className:cx$1(b,s.linkProps.className)}),s.text):React.createElement("button",Object.assign({},s.buttonProps,{className:cx$1(b,s.buttonProps.className)}),s.text)}function generateValidHtmlId(o){const{text:e,fallback:s}=o;if(typeof e!="string"||e==="")return s!==void 0?`-${s}`:"";let a=e.replace(/\s+/g,"");return a=a.replace(/[^a-zA-Z0-9]/g,"_"),`-${a}`}var __rest$8=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const Menu=reactExports.memo(reactExports.forwardRef((o,e)=>{const{id:s,classes:a={},style:d,links:b}=o,_=__rest$8(o,["id","classes","style","links"]);assert$1();const{Link:_e}=getLink();return React.createElement("div",Object.assign({className:cx$1(fr.cx("fr-menu"),a.root),style:d,id:s,ref:e},_),React.createElement("ul",{className:cx$1(fr.cx("fr-menu__list"),a.list)},b.map(({text:nt,linkProps:rt,isActive:ct=!1},dt)=>{var pt;return React.createElement("li",{key:dt},React.createElement(_e,Object.assign({},rt,{id:(pt=rt.id)!==null&&pt!==void 0?pt:`${s}-link${generateValidHtmlId({text:nt})}-${dt}`,className:cx$1(fr.cx("fr-nav__link"),rt.className)},ct&&{"aria-current":"page"}),nt))})))}));Menu.displayName=symToStr({Menu});var __rest$7=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const MegaMenu=reactExports.memo(reactExports.forwardRef((o,e)=>{var s;const{id:a,classes:d={},style:b,leader:_,categories:_e}=o,nt=__rest$7(o,["id","classes","style","leader","categories"]);assert$1();const{t:rt}=useTranslation$6(),{Link:ct}=getLink();return React.createElement("div",Object.assign({className:cx$1(fr.cx("fr-mega-menu"),d.root),style:b,tabIndex:-1,id:a,ref:e},nt),React.createElement("div",{className:fr.cx("fr-container","fr-container--fluid","fr-container-lg")},React.createElement("button",{className:fr.cx("fr-link--close","fr-link"),"aria-controls":a},rt("close")),React.createElement("div",{className:fr.cx("fr-grid-row","fr-grid-row-lg--gutters")},_!==void 0&&React.createElement("div",{className:fr.cx("fr-col-12","fr-col-lg-8","fr-col-offset-lg-4--right","fr-mb-4v")},React.createElement("div",{className:cx$1(fr.cx("fr-mega-menu__leader"),d.leader)},React.createElement("h4",{className:fr.cx("fr-h4","fr-mb-2v")},_.title),React.createElement("p",{className:fr.cx("fr-hidden","fr-displayed-lg")},_.paragraph),_.link!==void 0&&React.createElement(ct,Object.assign({},_.link.linkProps,{id:(s=_.link.linkProps.id)!==null&&s!==void 0?s:`${a}-leader-link${generateValidHtmlId({text:_.link.text})}`,className:cx$1(fr.cx("fr-link","fr-icon-arrow-right-line","fr-link--icon-right","fr-link--align-on-content"),_.link.linkProps.className)}),_.link.text))),_e.map(({categoryMainLink:dt,links:pt},bt)=>{var xt;return React.createElement("div",{className:fr.cx("fr-col-12","fr-col-lg-3"),key:bt},React.createElement("h5",{className:cx$1(fr.cx("fr-mega-menu__category"),d.category)},React.createElement(ct,Object.assign({},dt.linkProps,{id:(xt=dt.linkProps.id)!==null&&xt!==void 0?xt:`${a}-category-link${generateValidHtmlId({text:dt.text})}-${bt}`,className:cx$1(fr.cx("fr-nav__link"),dt.linkProps.className)}),dt.text)),React.createElement("ul",{className:cx$1(fr.cx("fr-mega-menu__list"),d.list)},pt.map(({linkProps:wt,text:Tt,isActive:Rt},Mt)=>{var Et;return React.createElement("li",{key:Mt},React.createElement(ct,Object.assign({},wt,{id:(Et=wt.id)!==null&&Et!==void 0?Et:`${a}-link${generateValidHtmlId({text:Tt})}-${bt}-${Mt}`,className:cx$1(fr.cx("fr-nav__link"),wt.className)},Rt?{"aria-current":"page"}:{}),Tt))})))}))))}));MegaMenu.displayName=symToStr({MegaMenu});const{useTranslation:useTranslation$6,addMegaMenuTranslations}=createComponentI18nApi({componentName:symToStr({MegaMenu}),frMessages:{close:"Fermer"}});addMegaMenuTranslations({lang:"en",messages:{close:"Close"}});function useAnalyticsId(o){const{explicitlyProvidedId:e,defaultIdPrefix:s}=o,a=reactExports.useId();return e??`${s}-${a}`}var __rest$6=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const MainNavigation=reactExports.memo(reactExports.forwardRef((o,e)=>{const{className:s,items:a,classes:d={},style:b,id:_}=o,_e=__rest$6(o,["className","items","classes","style","id"]);assert$1();const{t:nt}=useTranslation$5(),{Link:rt}=getLink(),ct=useAnalyticsId({explicitlyProvidedId:_,defaultIdPrefix:"main-navigation"}),dt=pt=>`${ct}-menu-${pt}`;return React.createElement("nav",Object.assign({id:ct,className:cx$1(fr.cx("fr-nav"),d.root,s),style:b,role:"navigation","aria-label":nt("main menu"),ref:e},_e),React.createElement("ul",{className:cx$1(fr.cx("fr-nav__list"),d.list)},a.map(({className:pt,text:bt,isActive:xt=!1,linkProps:wt,menuLinks:Tt=[],megaMenu:Rt,buttonProps:Mt={}},Et)=>{var $t,Xt;return React.createElement("li",{key:Et,className:cx$1(fr.cx("fr-nav__item"),d.item,pt)},wt!==void 0?React.createElement(rt,Object.assign({},wt,{id:($t=wt.id)!==null&&$t!==void 0?$t:`${ct}-link-${Et}`,className:cx$1(fr.cx("fr-nav__link"),d.link,wt.className)},xt&&{"aria-current":"page"}),bt):React.createElement(React.Fragment,null,React.createElement("button",Object.assign({},Mt,{id:(Xt=Mt.id)!==null&&Xt!==void 0?Xt:`${ct}-button-${Et}`,className:cx$1(fr.cx("fr-nav__btn"),Mt.className,d.btn),"aria-expanded":!1,"aria-controls":dt(Et)},xt&&{"aria-current":!0}),bt),Tt.length!==0&&React.createElement(Menu,{classes:{root:cx$1(fr.cx("fr-collapse"),d.root),list:d.menuList},links:Tt,id:dt(Et)}),Rt!==void 0&&React.createElement(MegaMenu,{classes:{root:cx$1(fr.cx("fr-collapse"),d.megaMenu),leader:d.megaMenuLeader,category:d.megaMenuCategory,list:d.menuList},id:dt(Et),leader:Rt.leader,categories:Rt.categories})))})))}));MainNavigation.displayName=symToStr({MainNavigation});const{useTranslation:useTranslation$5,addMainNavigationTranslations}=createComponentI18nApi({componentName:symToStr({MainNavigation}),frMessages:{"main menu":"Menu principal"}});addMainNavigationTranslations({lang:"en",messages:{"main menu":"Main menu"}});const ArtworkLightSvg="/react-dsfr-playground-vite/assets/light-BcMY7tSa.svg",ArtworkDarkSvg="/react-dsfr-playground-vite/assets/dark-BLRRW9zh.svg",ArtworkSystemSvg="/react-dsfr-playground-vite/assets/system-BJKRkqTi.svg";function getAssetUrl(o){return typeof o=="string"?o:o.src}var __rest$5=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const Button=reactExports.memo(reactExports.forwardRef((o,e)=>{var s,a;const{id:d,className:b,children:_,title:_e,iconId:nt,iconPosition:rt="left",priority:ct="primary",size:dt="medium",linkProps:pt,onClick:bt,nativeButtonProps:xt,disabled:wt,type:Tt,style:Rt,value:Mt}=o,Et=__rest$5(o,["id","className","children","title","iconId","iconPosition","priority","size","linkProps","onClick","nativeButtonProps","disabled","type","style","value"]);assert$1();const $t=useAnalyticsId({defaultIdPrefix:"fr-button",explicitlyProvidedId:d}),{Link:Xt}=getLink(),Zt=cx$1(fr.cx("fr-btn",ct!=="primary"&&`fr-btn--${ct==="tertiary no outline"?"tertiary-no-outline":ct}`,dt!=="medium"&&`fr-btn--${(()=>{switch(dt){case"small":return"sm";case"large":return"lg"}})()}`,...nt===void 0?[]:[nt,_!==void 0&&`fr-btn--icon-${rt}`]),pt!==void 0&&pt.className,b);return pt!==void 0?React.createElement(Xt,Object.assign({},pt,{id:(s=d??pt.id)!==null&&s!==void 0?s:$t,title:_e??pt.title,className:cx$1(pt==null?void 0:pt.className,Zt),style:Object.assign(Object.assign({},pt==null?void 0:pt.style),Rt),ref:e},Et),_):React.createElement("button",Object.assign({},xt,{id:(a=d??(xt==null?void 0:xt.id))!==null&&a!==void 0?a:$t,className:cx$1(xt==null?void 0:xt.className,Zt),style:Object.assign(Object.assign({},xt==null?void 0:xt.style),Rt),type:Tt??(xt==null?void 0:xt.type),title:_e??(xt==null?void 0:xt.title),onClick:bt??(xt==null?void 0:xt.onClick),disabled:wt??(xt==null?void 0:xt.disabled),ref:e,value:Mt},Et),_)}));Button.displayName=symToStr({Button});var __rest$4=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const Modal=reactExports.memo(reactExports.forwardRef((o,e)=>{const{className:s,id:a,title:d,children:b,concealingBackdrop:_=!0,topAnchor:_e=!1,iconId:nt,buttons:rt,size:ct="medium",style:dt}=o;__rest$4(o,["className","id","title","children","concealingBackdrop","topAnchor","iconId","buttons","size","style"]),assert$1();const pt=rt===void 0?void 0:rt instanceof Array?rt:[rt],{t:bt}=useTranslation$4(),xt=`fr-modal-title-${a}`;return React.createElement("dialog",{"aria-labelledby":xt,role:"dialog",id:a,className:cx$1(fr.cx("fr-modal",_e&&"fr-modal--top"),s),style:dt,ref:e,"data-fr-concealing-backdrop":_},React.createElement("div",{className:fr.cx("fr-container","fr-container--fluid","fr-container-md")},React.createElement("div",{className:fr.cx("fr-grid-row","fr-grid-row--center")},React.createElement("div",{className:(()=>{switch(ct){case"large":return fr.cx("fr-col-12","fr-col-md-10","fr-col-lg-8");case"small":return fr.cx("fr-col-12","fr-col-md-6","fr-col-lg-4");case"medium":return fr.cx("fr-col-12","fr-col-md-8","fr-col-lg-6")}})()},React.createElement("div",{className:fr.cx("fr-modal__body")},React.createElement("div",{className:fr.cx("fr-modal__header")},React.createElement("button",{className:fr.cx("fr-btn--close","fr-btn"),title:bt("close"),"aria-controls":a,type:"button"},bt("close"))),React.createElement("div",{className:fr.cx("fr-modal__content")},React.createElement("h1",{id:xt,className:fr.cx("fr-modal__title")},nt!==void 0&&React.createElement("span",{className:fr.cx(nt,"fr-fi--lg"),"aria-hidden":!0}),d),b),pt!==void 0&&React.createElement("div",{className:"fr-modal__footer"},React.createElement("ul",{className:fr.cx("fr-btns-group","fr-btns-group--right","fr-btns-group--inline-reverse","fr-btns-group--inline-lg","fr-btns-group--icon-left")},[...pt].reverse().map((wt,Tt)=>{var Rt,{doClosesModal:Mt=!0}=wt,Et=__rest$4(wt,["doClosesModal"]);return React.createElement("li",{key:Tt},React.createElement(Button,Object.assign({},Et,{priority:(Rt=Et.priority)!==null&&Rt!==void 0?Rt:Tt===0?"primary":"secondary"},Mt?"linkProps"in Et?{linkProps:Object.assign(Object.assign({},Et.linkProps),{"aria-controls":a})}:{nativeButtonProps:Object.assign(Object.assign({},Et.nativeButtonProps),{"aria-controls":a})}:{})))}))))))))}));Modal.displayName=symToStr({Modal});const{useTranslation:useTranslation$4,addModalTranslations}=createComponentI18nApi({componentName:symToStr({Modal}),frMessages:{close:"Fermer"}});addModalTranslations({lang:"en",messages:{close:"Close"}});addModalTranslations({lang:"es",messages:{close:"Cerrar"}});function createModal(o){const{isOpenedByDefault:e,id:s}=o,a={id:`${s}-control-button`,"aria-controls":s,"data-fr-opened":e},d=`${s}-hidden-control-button`;function b(nt){return React.createElement(React.Fragment,null,React.createElement(Button,{nativeButtonProps:Object.assign(Object.assign({},a),{id:d,type:"button",tabIndex:-1,"aria-hidden":!0}),className:fr.cx("fr-hidden")}," "),React.createElement(Modal,Object.assign({},nt,{id:s})))}b.displayName=`${s}-modal`,overwriteReadonlyProp(b,"name",b.displayName);function _(){const nt=document.getElementById(s);window.dsfr(nt).modal.disclose()}function _e(){const nt=document.getElementById(s);window.dsfr(nt).modal.conceal()}return{Component:b,buttonProps:a,open:_,close:_e,isOpenedByDefault:e,id:s}}const modal=createModal({isOpenedByDefault:!1,id:"fr-theme-modal"}),headerFooterDisplayItem={buttonProps:modal.buttonProps,iconId:"fr-icon-theme-fill",text:(()=>{function o(){const{t:e}=useTranslation$3();return React.createElement(React.Fragment,null,e("display settings"))}return React.createElement(o,null)})()};function Display(){const{t:o}=useTranslation$3(),{getInputId:e}=function(){const a=reactExports.useId();function d(b){return`${a}-${b}`}return{getInputId:d}}();return React.createElement(modal.Component,{title:o("display settings"),size:"small"},React.createElement("div",{className:"fr-display"},React.createElement("div",{className:fr.cx("fr-form-group")},React.createElement("fieldset",{className:fr.cx("fr-fieldset")},React.createElement("legend",{className:fr.cx("fr-fieldset__legend","fr-text--regular")},o("pick a theme")),React.createElement("div",{className:fr.cx("fr-fieldset__content")},["light","dark","system"].map(s=>React.createElement("div",{key:s,className:fr.cx("fr-radio-group","fr-radio-rich")},React.createElement("input",{value:s,type:"radio",id:e(s),name:"fr-radios-theme"}),React.createElement("label",{className:"fr-label",htmlFor:e(s)},o(`${s} theme`),s==="system"&&React.createElement("span",{className:fr.cx("fr-hint-text")},o("system theme hint"))),React.createElement("div",{className:fr.cx("fr-radio-rich__img")},React.createElement("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"80px",height:"80px",viewBox:"0 0 80 80"},["artwork-decorative","artwork-minor","artwork-major"].map(a=>React.createElement("use",{key:a,className:fr.cx(`fr-${a}`),xlinkHref:`${getAssetUrl((()=>{switch(s){case"dark":return ArtworkDarkSvg;case"light":return ArtworkLightSvg;case"system":return ArtworkSystemSvg}})())}#${a}`})))))))))))}Display.displayName=symToStr({Display});const{useTranslation:useTranslation$3,addDisplayTranslations}=createComponentI18nApi({componentName:symToStr({Display}),frMessages:{"display settings":"Paramtres d'affichage",close:"Fermer","pick a theme":"Choisissez un thme pour personnaliser l'apparence du site.","light theme":"Thme clair","dark theme":"Thme sombre","system theme":"Systme.","system theme hint":"Utilise les paramtres systme."}});addDisplayTranslations({lang:"en",messages:{"display settings":"Display settings",close:"Close","pick a theme":"Pick a theme to customize the website's look.","light theme":"Light theme","dark theme":"Dark theme","system theme":"System.","system theme hint":"Use system preference"}});addDisplayTranslations({lang:"es",messages:{"display settings":"Parmetro de visualizacin",close:"Cerrar","pick a theme":"Elija un tema para personalizar el aspecto del sitio."}});var __rest$3=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const SearchBar=reactExports.memo(reactExports.forwardRef((o,e)=>{const{className:s,id:a,label:d,big:b=!1,classes:_={},style:_e,renderInput:nt=({className:Rt,id:Mt,placeholder:Et,type:$t})=>React.createElement("input",{className:Rt,id:Mt,placeholder:Et,type:$t}),clearInputOnSearch:rt=!1,allowEmptySearch:ct=!1,onButtonClick:dt}=o,pt=__rest$3(o,["className","id","label","big","classes","style","renderInput","clearInputOnSearch","allowEmptySearch","onButtonClick"]);assert$1();const{t:bt}=useTranslation$2(),xt=d??bt("label"),wt=useAnalyticsId({defaultIdPrefix:"fr-search-bar",explicitlyProvidedId:a}),Tt=`search-${wt}-input`;return React.createElement("div",Object.assign({id:wt,className:cx$1(fr.cx("fr-search-bar",b&&"fr-search-bar--lg"),_.root,s),role:"search",ref:e,style:_e},pt),React.createElement("label",{className:cx$1(fr.cx("fr-label"),_.label),htmlFor:Tt},xt),nt({className:fr.cx("fr-input"),placeholder:xt,type:"search",id:Tt}),React.createElement(SearchButton,{clearInputOnSearch:rt,id:`${wt}-button`,searchInputId:Tt,allowEmptySearch:ct,onClick:dt}))}));SearchBar.displayName=symToStr({SearchBar});const{useTranslation:useTranslation$2,addSearchBarTranslations}=createComponentI18nApi({componentName:symToStr({SearchBar}),frMessages:{label:"Rechercher"}});addSearchBarTranslations({lang:"en",messages:{label:"Search"}});function observeInputValue(o){const{inputElement:e,callback:s}=o,a=[];{const b=Object.getOwnPropertyDescriptor(e,"value");a.push(()=>{assert$1(b!==void 0),Object.defineProperty(e,"value",b)});const _=Object.getPrototypeOf(e),_e=Object.getOwnPropertyDescriptor(_,"value");Object.defineProperty(e,"value",{get:function(...nt){return _e.get.apply(this,nt)},set:function(...nt){_e.set.apply(this,nt);const rt=this.value;return s(),rt}})}e.addEventListener("input",(()=>{const b=()=>{s()};return a.push(()=>e.removeEventListener("input",b)),b})()),e.addEventListener("keydown",(()=>{const b=_=>{if(_.key==="Escape"){const _e=setTimeout(()=>{a.splice(a.indexOf(nt),1),s()},50),nt=()=>{clearTimeout(_e)};a.push(nt)}};return a.push(()=>e.removeEventListener("keyup",b)),b})());function d(){a.forEach(b=>b())}return{cleanup:d}}function SearchButton(o){const{searchInputId:e,clearInputOnSearch:s,allowEmptySearch:a,onClick:d,id:b}=o,{t:_}=useTranslation$2(),[,_e]=reactExports.useReducer(wt=>wt+1,0),[{focusInputElement:nt,getInputValue:rt,resetInputValue:ct,getIsInputFocused:dt},pt]=reactExports.useState(()=>({getInputValue:id$1(()=>""),resetInputValue:id$1(()=>{}),focusInputElement:id$1(()=>{}),getIsInputFocused:id$1(()=>!1)})),bt=useConstCallback(()=>{const wt=rt();if(!a&&wt===""){nt();return}d==null||d(wt),s&&ct()}),xt=d===void 0;return reactExports.useEffect(()=>{const wt=document.getElementById(e);assert$1(wt!==null,`${e} should be mounted`),assert$1("value"in wt&&typeof wt.value=="string",`${e} is not an HTML input`),assert$1(is()),pt({focusInputElement:()=>wt.focus(),getInputValue:()=>wt.value,resetInputValue:()=>wt.value="",getIsInputFocused:()=>document.activeElement===wt});const Tt=[];{const{cleanup:Rt}=observeInputValue({inputElement:wt,callback:()=>_e()});Tt.push(Rt)}return xt&&(wt.addEventListener("focus",(()=>{const Rt=()=>_e();return Tt.push(()=>wt.removeEventListener("focus",Rt)),Rt})()),wt.addEventListener("blur",(()=>{const Rt=()=>_e();return Tt.push(()=>wt.removeEventListener("blur",Rt)),Rt})())),xt||(wt.addEventListener("keydown",(()=>{const Rt=Mt=>{Mt.key==="Enter"&&(bt(),wt.blur())};return Tt.push(()=>wt.removeEventListener("keydown",Rt)),Rt})()),wt.addEventListener("keydown",(()=>{const Rt=Mt=>{Mt.key==="Escape"&&wt.blur()};return Tt.push(()=>wt.removeEventListener("keydown",Rt)),Rt})())),()=>{Tt.forEach(Rt=>Rt())}},[e,xt]),d===void 0&&(dt()||rt()!=="")?null:React.createElement("button",{id:b,className:fr.cx("fr-btn"),title:_("label"),onClick:bt,style:d!==void 0?void 0:{position:"absolute",right:0}},_("label"))}var __rest$2=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const headerMenuModalIdPrefix="header-menu-modal",Header=reactExports.memo(reactExports.forwardRef((o,e)=>{const{className:s,id:a,brandTop:d,serviceTitle:b,serviceTagline:_,homeLinkProps:_e,navigation:nt=void 0,quickAccessItems:rt=[],operatorLogo:ct,renderSearchInput:dt,clearSearchInputOnSearch:pt=!1,allowEmptySearch:bt=!1,onSearchButtonClick:xt,classes:wt={},style:Tt}=o,Rt=__rest$2(o,["className","id","brandTop","serviceTitle","serviceTagline","homeLinkProps","navigation","quickAccessItems","operatorLogo","renderSearchInput","clearSearchInputOnSearch","allowEmptySearch","onSearchButtonClick","classes","style"]);assert$1();const Mt=a??"fr-header",Et=`${headerMenuModalIdPrefix}-${Mt}`,$t=`${Mt}-menu-button`,Xt=`${Mt}-search-modal`,Zt=`${Mt}-search-input`,Nt=dt!==void 0||xt!==void 0;setBrandTopAndHomeLinkProps({brandTop:d,homeLinkProps:_e});const{t:Jt}=useTranslation$1(),{t:dn}=useTranslation$2(),{Link:Pn}=getLink(),an=ao=>React.createElement("ul",{className:fr.cx("fr-btns-group")},rt.map((hn,fn)=>React.createElement("li",{key:fn},(()=>{const It=typeGuard(hn,hn instanceof Object&&"text"in hn)?React.createElement(HeaderQuickAccessItem,{quickAccessItem:hn}):hn;return It===null?null:reactExports.cloneElement(It,{id:`${Mt}-quick-access-item-${fn}${(()=>{switch(ao){case"mobile":return"-mobile";case"desktop":return""}assert$1()})()}`})})()))),Vt=(ct==null?void 0:ct.linkProps)!==void 0;return React.createElement(React.Fragment,null,React.createElement(Display,null),React.createElement("header",Object.assign({role:"banner",id:Mt,className:cx$1(fr.cx("fr-header"),wt.root,s),ref:e,style:Tt},Rt),React.createElement("div",{className:cx$1(fr.cx("fr-header__body"),wt.body)},React.createElement("div",{className:cx$1(fr.cx("fr-container"),wt.container)},React.createElement("div",{className:cx$1(fr.cx("fr-header__body-row"),wt.bodyRow)},React.createElement("div",{className:cx$1(fr.cx("fr-header__brand",!Vt&&"fr-enlarge-link"),wt.brand)},React.createElement("div",{className:cx$1(fr.cx("fr-header__brand-top"),wt.brandTop)},React.createElement("div",{className:cx$1(fr.cx("fr-header__logo"),wt.logo)},(()=>{const ao=React.createElement("p",{className:fr.cx("fr-logo")},d);return b!==void 0?ao:React.createElement(Pn,Object.assign({},_e),ao)})()),ct!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-header__operator",Vt&&"fr-enlarge-link"),wt.operator)},(()=>{const ao=React.createElement("img",{className:cx$1(fr.cx("fr-responsive-img"),wt.operator),style:(()=>{switch(ct.orientation){case"vertical":return{width:"3.5rem"};case"horizontal":return{maxWidth:"9.0625rem"}}})(),src:ct.imgUrl,alt:ct.alt});return Vt?React.createElement(Pn,Object.assign({},ct.linkProps),ao):ao})()),(rt.length>0||nt!==void 0||Nt)&&React.createElement("div",{className:cx$1(fr.cx("fr-header__navbar"),wt.navbar)},Nt&&React.createElement("button",{id:`${Mt}-search-button`,className:fr.cx("fr-btn--search","fr-btn"),"data-fr-opened":!1,"aria-controls":Xt,title:dn("label")},dn("label")),React.createElement("button",{className:fr.cx("fr-btn--menu","fr-btn"),"data-fr-opened":"false","aria-controls":Et,"aria-haspopup":"menu",id:$t,title:Jt("menu")},Jt("menu")))),b!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-header__service",Vt&&"fr-enlarge-link"),wt.service)},React.createElement(Pn,Object.assign({},_e),React.createElement("p",{className:cx$1(fr.cx("fr-header__service-title"),wt.serviceTitle)},b)),_!==void 0&&React.createElement("p",{className:cx$1(fr.cx("fr-header__service-tagline"),wt.serviceTagline)},_))),(rt.length>0||Nt)&&React.createElement("div",{className:fr.cx("fr-header__tools")},rt.length>0&&React.createElement("div",{className:cx$1(fr.cx("fr-header__tools-links"),wt.toolsLinks)},an("desktop")),Nt&&React.createElement("div",{className:fr.cx("fr-header__search","fr-modal"),id:Xt,"aria-labelledby":`${Mt}-search-bar-button`},React.createElement("div",{className:fr.cx("fr-container","fr-container-lg--fluid")},React.createElement("button",{id:`${Mt}-search-button`,className:fr.cx("fr-btn--close","fr-btn"),"aria-controls":Xt,title:Jt("close")},Jt("close")),React.createElement("div",{className:fr.cx("fr-search-bar"),role:"search"},React.createElement("label",{className:fr.cx("fr-label"),htmlFor:Zt},dn("label")),(dt??(({className:ao,id:hn,placeholder:fn,type:It})=>React.createElement("input",{className:ao,id:hn,placeholder:fn,type:It})))({className:fr.cx("fr-input"),id:Zt,placeholder:dn("label"),type:"search"}),React.createElement(SearchButton,{id:`${Mt}-search-bar-button`,searchInputId:Zt,onClick:xt,clearInputOnSearch:pt,allowEmptySearch:bt})))))))),(nt!==void 0||rt.length!==0)&&React.createElement("div",{className:cx$1(fr.cx("fr-header__menu","fr-modal"),wt.menu),id:Et,"aria-labelledby":$t},React.createElement("div",{className:fr.cx("fr-container")},React.createElement("button",{id:`${Mt}-mobile-overlay-button-close`,className:fr.cx("fr-btn--close","fr-btn"),"aria-controls":Et,title:Jt("close")},Jt("close")),React.createElement("div",{className:cx$1(fr.cx("fr-header__menu-links"),wt.menuLinks)},an("mobile")),nt!==void 0&&(nt instanceof Array?React.createElement(MainNavigation,{id:`${Mt}-main-navigation`,items:nt}):nt)))))}));Header.displayName=symToStr({Header});const{useTranslation:useTranslation$1,addHeaderTranslations}=createComponentI18nApi({componentName:symToStr({Header}),frMessages:{menu:"Menu",close:"Fermer"}});addHeaderTranslations({lang:"en",messages:{close:"Close"}});function HeaderQuickAccessItem(o){const{className:e,quickAccessItem:s,id:a}=o,{Link:d}=getLink();return s.linkProps!==void 0?React.createElement(d,Object.assign({},s.linkProps,{className:cx$1(fr.cx("fr-btn",s.iconId),s.linkProps.className,e),id:a}),s.text):React.createElement("button",Object.assign({},s.buttonProps,{className:cx$1(fr.cx("fr-btn",s.iconId),s.buttonProps.className,e),id:a}),s.text)}function noop$2(){}function createSyncStoragePersister({storage:o,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:s=1e3,serialize:a=JSON.stringify,deserialize:d=JSON.parse,retry:b}){if(o){const _=_e=>{try{o.setItem(e,a(_e));return}catch(nt){return nt}};return{persistClient:throttle$1(_e=>{let nt=_e,rt=_(nt),ct=0;for(;rt&&nt;)ct++,nt=b==null?void 0:b({persistedClient:nt,error:rt,errorCount:ct}),nt&&(rt=_(nt))},s),restoreClient:()=>{const _e=o.getItem(e);if(_e)return d(_e)},removeClient:()=>{o.removeItem(e)}}}return{persistClient:noop$2,restoreClient:()=>{},removeClient:noop$2}}function throttle$1(o,e=100){let s=null,a;return function(...d){a=d,s===null&&(s=setTimeout(()=>{o(...a),s=null},e))}}var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(o){return this.listeners.add(o),this.onSubscribe(),()=>{this.listeners.delete(o),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$1(){}function functionalUpdate(o,e){return typeof o=="function"?o(e):o}function isValidTimeout(o){return typeof o=="number"&&o>=0&&o!==1/0}function timeUntilStale(o,e){return Math.max(o+(e||0)-Date.now(),0)}function resolveStaleTime(o,e){return typeof o=="function"?o(e):o}function resolveEnabled(o,e){return typeof o=="function"?o(e):o}function matchQuery(o,e){const{type:s="all",exact:a,fetchStatus:d,predicate:b,queryKey:_,stale:_e}=o;if(_){if(a){if(e.queryHash!==hashQueryKeyByOptions(_,e.options))return!1}else if(!partialMatchKey(e.queryKey,_))return!1}if(s!=="all"){const nt=e.isActive();if(s==="active"&&!nt||s==="inactive"&&nt)return!1}return!(typeof _e=="boolean"&&e.isStale()!==_e||d&&d!==e.state.fetchStatus||b&&!b(e))}function matchMutation(o,e){const{exact:s,status:a,predicate:d,mutationKey:b}=o;if(b){if(!e.options.mutationKey)return!1;if(s){if(hashKey(e.options.mutationKey)!==hashKey(b))return!1}else if(!partialMatchKey(e.options.mutationKey,b))return!1}return!(a&&e.state.status!==a||d&&!d(e))}function hashQueryKeyByOptions(o,e){return((e==null?void 0:e.queryKeyHashFn)||hashKey)(o)}function hashKey(o){return JSON.stringify(o,(e,s)=>isPlainObject$1(s)?Object.keys(s).sort().reduce((a,d)=>(a[d]=s[d],a),{}):s)}function partialMatchKey(o,e){return o===e?!0:typeof o!=typeof e?!1:o&&e&&typeof o=="object"&&typeof e=="object"?!Object.keys(e).some(s=>!partialMatchKey(o[s],e[s])):!1}function replaceEqualDeep(o,e){if(o===e)return o;const s=isPlainArray(o)&&isPlainArray(e);if(s||isPlainObject$1(o)&&isPlainObject$1(e)){const a=s?o:Object.keys(o),d=a.length,b=s?e:Object.keys(e),_=b.length,_e=s?[]:{};let nt=0;for(let rt=0;rt<_;rt++){const ct=s?rt:b[rt];(!s&&a.includes(ct)||s)&&o[ct]===void 0&&e[ct]===void 0?(_e[ct]=void 0,nt++):(_e[ct]=replaceEqualDeep(o[ct],e[ct]),_e[ct]===o[ct]&&o[ct]!==void 0&&nt++)}return d===_&&nt===d?o:_e}return e}function shallowEqualObjects(o,e){if(!e||Object.keys(o).length!==Object.keys(e).length)return!1;for(const s in o)if(o[s]!==e[s])return!1;return!0}function isPlainArray(o){return Array.isArray(o)&&o.length===Object.keys(o).length}function isPlainObject$1(o){if(!hasObjectPrototype(o))return!1;const e=o.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!hasObjectPrototype(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(o)!==Object.prototype)}function hasObjectPrototype(o){return Object.prototype.toString.call(o)==="[object Object]"}function sleep(o){return new Promise(e=>{setTimeout(e,o)})}function replaceData(o,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(o,e):s.structuralSharing!==!1?replaceEqualDeep(o,e):e}function addToEnd(o,e,s=0){const a=[...o,e];return s&&a.length>s?a.slice(1):a}function addToStart(o,e,s=0){const a=[e,...o];return s&&a.length>s?a.slice(0,-1):a}var skipToken=Symbol();function ensureQueryFn(o,e){return!o.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!o.queryFn||o.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${o.queryHash}'`)):o.queryFn}var TM,l3,GN,Gae,FocusManager=(Gae=class extends Subscribable{constructor(){super();lu(this,TM);lu(this,l3);lu(this,GN);ga(this,GN,e=>{if(!isServer&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){Go(this,l3)||this.setEventListener(Go(this,GN))}onUnsubscribe(){var e;this.hasListeners()||((e=Go(this,l3))==null||e.call(this),ga(this,l3,void 0))}setEventListener(e){var s;ga(this,GN,e),(s=Go(this,l3))==null||s.call(this),ga(this,l3,e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(e){Go(this,TM)!==e&&(ga(this,TM,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof Go(this,TM)=="boolean"?Go(this,TM):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},TM=new WeakMap,l3=new WeakMap,GN=new WeakMap,Gae),focusManager=new FocusManager,jN,c3,UN,jae,OnlineManager=(jae=class extends Subscribable{constructor(){super();lu(this,jN,!0);lu(this,c3);lu(this,UN);ga(this,UN,e=>{if(!isServer&&window.addEventListener){const s=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}}})}onSubscribe(){Go(this,c3)||this.setEventListener(Go(this,UN))}onUnsubscribe(){var e;this.hasListeners()||((e=Go(this,c3))==null||e.call(this),ga(this,c3,void 0))}setEventListener(e){var s;ga(this,UN,e),(s=Go(this,c3))==null||s.call(this),ga(this,c3,e(this.setOnline.bind(this)))}setOnline(e){Go(this,jN)!==e&&(ga(this,jN,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return Go(this,jN)}},jN=new WeakMap,c3=new WeakMap,UN=new WeakMap,jae),onlineManager=new OnlineManager;function pendingThenable(){let o,e;const s=new Promise((d,b)=>{o=d,e=b});s.status="pending",s.catch(()=>{});function a(d){Object.assign(s,d),delete s.resolve,delete s.reject}return s.resolve=d=>{a({status:"fulfilled",value:d}),o(d)},s.reject=d=>{a({status:"rejected",reason:d}),e(d)},s}function defaultRetryDelay(o){return Math.min(1e3*2**o,3e4)}function canFetch(o){return(o??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(o){super("CancelledError"),this.revert=o==null?void 0:o.revert,this.silent=o==null?void 0:o.silent}};function isCancelledError(o){return o instanceof CancelledError}function createRetryer(o){let e=!1,s=0,a=!1,d;const b=pendingThenable(),_=wt=>{var Tt;a||(pt(new CancelledError(wt)),(Tt=o.abort)==null||Tt.call(o))},_e=()=>{e=!0},nt=()=>{e=!1},rt=()=>focusManager.isFocused()&&(o.networkMode==="always"||onlineManager.isOnline())&&o.canRun(),ct=()=>canFetch(o.networkMode)&&o.canRun(),dt=wt=>{var Tt;a||(a=!0,(Tt=o.onSuccess)==null||Tt.call(o,wt),d==null||d(),b.resolve(wt))},pt=wt=>{var Tt;a||(a=!0,(Tt=o.onError)==null||Tt.call(o,wt),d==null||d(),b.reject(wt))},bt=()=>new Promise(wt=>{var Tt;d=Rt=>{(a||rt())&&wt(Rt)},(Tt=o.onPause)==null||Tt.call(o)}).then(()=>{var wt;d=void 0,a||(wt=o.onContinue)==null||wt.call(o)}),xt=()=>{if(a)return;let wt;const Tt=s===0?o.initialPromise:void 0;try{wt=Tt??o.fn()}catch(Rt){wt=Promise.reject(Rt)}Promise.resolve(wt).then(dt).catch(Rt=>{var Zt;if(a)return;const Mt=o.retry??(isServer?0:3),Et=o.retryDelay??defaultRetryDelay,$t=typeof Et=="function"?Et(s,Rt):Et,Xt=Mt===!0||typeof Mt=="number"&&s<Mt||typeof Mt=="function"&&Mt(s,Rt);if(e||!Xt){pt(Rt);return}s++,(Zt=o.onFail)==null||Zt.call(o,s,Rt),sleep($t).then(()=>rt()?void 0:bt()).then(()=>{e?pt(Rt):xt()})})};return{promise:b,cancel:_,continue:()=>(d==null||d(),b),cancelRetry:_e,continueRetry:nt,canStart:ct,start:()=>(ct()?xt():bt().then(xt),b)}}function createNotifyManager(){let o=[],e=0,s=_e=>{_e()},a=_e=>{_e()},d=_e=>setTimeout(_e,0);const b=_e=>{e?o.push(_e):d(()=>{s(_e)})},_=()=>{const _e=o;o=[],_e.length&&d(()=>{a(()=>{_e.forEach(nt=>{s(nt)})})})};return{batch:_e=>{let nt;e++;try{nt=_e()}finally{e--,e||_()}return nt},batchCalls:_e=>(...nt)=>{b(()=>{_e(...nt)})},schedule:b,setNotifyFunction:_e=>{s=_e},setBatchNotifyFunction:_e=>{a=_e},setScheduler:_e=>{d=_e}}}var notifyManager=createNotifyManager(),IM,Uae,Removable=(Uae=class{constructor(){lu(this,IM)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&ga(this,IM,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(o){this.gcTime=Math.max(this.gcTime||0,o??(isServer?1/0:5*60*1e3))}clearGcTimeout(){Go(this,IM)&&(clearTimeout(Go(this,IM)),ga(this,IM,void 0))}},IM=new WeakMap,Uae),HN,VN,Fw,h1,Zz,RM,lC,jA,Hae,Query=(Hae=class extends Removable{constructor(e){super();lu(this,lC);lu(this,HN);lu(this,VN);lu(this,Fw);lu(this,h1);lu(this,Zz);lu(this,RM);ga(this,RM,!1),ga(this,Zz,e.defaultOptions),this.setOptions(e.options),this.observers=[],ga(this,Fw,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ga(this,HN,getDefaultState$1(this.options)),this.state=e.state??Go(this,HN),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Go(this,h1))==null?void 0:e.promise}setOptions(e){this.options={...Go(this,Zz),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Go(this,Fw).remove(this)}setData(e,s){const a=replaceData(this.state.data,e,this.options);return Mu(this,lC,jA).call(this,{data:a,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),a}setState(e,s){Mu(this,lC,jA).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var a,d;const s=(a=Go(this,h1))==null?void 0:a.promise;return(d=Go(this,h1))==null||d.cancel(e),s?s.then(noop$1).catch(noop$1):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Go(this,HN))}isActive(){return this.observers.some(e=>resolveEnabled(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(a=>a.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=Go(this,h1))==null||s.continue()}onOnline(){var s;const e=this.observers.find(a=>a.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=Go(this,h1))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Go(this,Fw).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(Go(this,h1)&&(Go(this,RM)?Go(this,h1).cancel({revert:!0}):Go(this,h1).cancelRetry()),this.scheduleGc()),Go(this,Fw).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Mu(this,lC,jA).call(this,{type:"invalidate"})}fetch(e,s){var nt,rt,ct;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(Go(this,h1))return Go(this,h1).continueRetry(),Go(this,h1).promise}if(e&&this.setOptions(e),!this.options.queryFn){const dt=this.observers.find(pt=>pt.options.queryFn);dt&&this.setOptions(dt.options)}const a=new AbortController,d=dt=>{Object.defineProperty(dt,"signal",{enumerable:!0,get:()=>(ga(this,RM,!0),a.signal)})},b=()=>{const dt=ensureQueryFn(this.options,s),pt={queryKey:this.queryKey,meta:this.meta};return d(pt),ga(this,RM,!1),this.options.persister?this.options.persister(dt,pt,this):dt(pt)},_={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:b};d(_),(nt=this.options.behavior)==null||nt.onFetch(_,this),ga(this,VN,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((rt=_.fetchOptions)==null?void 0:rt.meta))&&Mu(this,lC,jA).call(this,{type:"fetch",meta:(ct=_.fetchOptions)==null?void 0:ct.meta});const _e=dt=>{var pt,bt,xt,wt;isCancelledError(dt)&&dt.silent||Mu(this,lC,jA).call(this,{type:"error",error:dt}),isCancelledError(dt)||((bt=(pt=Go(this,Fw).config).onError)==null||bt.call(pt,dt,this),(wt=(xt=Go(this,Fw).config).onSettled)==null||wt.call(xt,this.state.data,dt,this)),this.scheduleGc()};return ga(this,h1,createRetryer({initialPromise:s==null?void 0:s.initialPromise,fn:_.fetchFn,abort:a.abort.bind(a),onSuccess:dt=>{var pt,bt,xt,wt;if(dt===void 0){_e(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(dt)}catch(Tt){_e(Tt);return}(bt=(pt=Go(this,Fw).config).onSuccess)==null||bt.call(pt,dt,this),(wt=(xt=Go(this,Fw).config).onSettled)==null||wt.call(xt,dt,this.state.error,this),this.scheduleGc()},onError:_e,onFail:(dt,pt)=>{Mu(this,lC,jA).call(this,{type:"failed",failureCount:dt,error:pt})},onPause:()=>{Mu(this,lC,jA).call(this,{type:"pause"})},onContinue:()=>{Mu(this,lC,jA).call(this,{type:"continue"})},retry:_.options.retry,retryDelay:_.options.retryDelay,networkMode:_.options.networkMode,canRun:()=>!0})),Go(this,h1).start()}},HN=new WeakMap,VN=new WeakMap,Fw=new WeakMap,h1=new WeakMap,Zz=new WeakMap,RM=new WeakMap,lC=new WeakSet,jA=function(e){const s=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...fetchState(a.data,this.options),fetchMeta:e.meta??null};case"success":return{...a,data:e.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const d=e.error;return isCancelledError(d)&&d.revert&&Go(this,VN)?{...Go(this,VN),fetchStatus:"idle"}:{...a,error:d,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:d,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=s(this.state),notifyManager.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),Go(this,Fw).notify({query:this,type:"updated",action:e})})},Hae);function fetchState(o,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(e.networkMode)?"fetching":"paused",...o===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(o){const e=typeof o.initialData=="function"?o.initialData():o.initialData,s=e!==void 0,a=s?typeof o.initialDataUpdatedAt=="function"?o.initialDataUpdatedAt():o.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var jS,Vae,QueryCache=(Vae=class extends Subscribable{constructor(e={}){super();lu(this,jS);this.config=e,ga(this,jS,new Map)}build(e,s,a){const d=s.queryKey,b=s.queryHash??hashQueryKeyByOptions(d,s);let _=this.get(b);return _||(_=new Query({cache:this,queryKey:d,queryHash:b,options:e.defaultQueryOptions(s),state:a,defaultOptions:e.getQueryDefaults(d)}),this.add(_)),_}add(e){Go(this,jS).has(e.queryHash)||(Go(this,jS).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=Go(this,jS).get(e.queryHash);s&&(e.destroy(),s===e&&Go(this,jS).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Go(this,jS).get(e)}getAll(){return[...Go(this,jS).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(a=>matchQuery(s,a))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(a=>matchQuery(e,a)):s}notify(e){notifyManager.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},jS=new WeakMap,Vae),US,a_,MM,HS,a3,Wae,Mutation=(Wae=class extends Removable{constructor(e){super();lu(this,HS);lu(this,US);lu(this,a_);lu(this,MM);this.mutationId=e.mutationId,ga(this,a_,e.mutationCache),ga(this,US,[]),this.state=e.state||getDefaultState(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Go(this,US).includes(e)||(Go(this,US).push(e),this.clearGcTimeout(),Go(this,a_).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ga(this,US,Go(this,US).filter(s=>s!==e)),this.scheduleGc(),Go(this,a_).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Go(this,US).length||(this.state.status==="pending"?this.scheduleGc():Go(this,a_).remove(this))}continue(){var e;return((e=Go(this,MM))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var d,b,_,_e,nt,rt,ct,dt,pt,bt,xt,wt,Tt,Rt,Mt,Et,$t,Xt,Zt,Nt;ga(this,MM,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(Jt,dn)=>{Mu(this,HS,a3).call(this,{type:"failed",failureCount:Jt,error:dn})},onPause:()=>{Mu(this,HS,a3).call(this,{type:"pause"})},onContinue:()=>{Mu(this,HS,a3).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Go(this,a_).canRun(this)}));const s=this.state.status==="pending",a=!Go(this,MM).canStart();try{if(!s){Mu(this,HS,a3).call(this,{type:"pending",variables:e,isPaused:a}),await((b=(d=Go(this,a_).config).onMutate)==null?void 0:b.call(d,e,this));const dn=await((_e=(_=this.options).onMutate)==null?void 0:_e.call(_,e));dn!==this.state.context&&Mu(this,HS,a3).call(this,{type:"pending",context:dn,variables:e,isPaused:a})}const Jt=await Go(this,MM).start();return await((rt=(nt=Go(this,a_).config).onSuccess)==null?void 0:rt.call(nt,Jt,e,this.state.context,this)),await((dt=(ct=this.options).onSuccess)==null?void 0:dt.call(ct,Jt,e,this.state.context)),await((bt=(pt=Go(this,a_).config).onSettled)==null?void 0:bt.call(pt,Jt,null,this.state.variables,this.state.context,this)),await((wt=(xt=this.options).onSettled)==null?void 0:wt.call(xt,Jt,null,e,this.state.context)),Mu(this,HS,a3).call(this,{type:"success",data:Jt}),Jt}catch(Jt){try{throw await((Rt=(Tt=Go(this,a_).config).onError)==null?void 0:Rt.call(Tt,Jt,e,this.state.context,this)),await((Et=(Mt=this.options).onError)==null?void 0:Et.call(Mt,Jt,e,this.state.context)),await((Xt=($t=Go(this,a_).config).onSettled)==null?void 0:Xt.call($t,void 0,Jt,this.state.variables,this.state.context,this)),await((Nt=(Zt=this.options).onSettled)==null?void 0:Nt.call(Zt,void 0,Jt,e,this.state.context)),Jt}finally{Mu(this,HS,a3).call(this,{type:"error",error:Jt})}}finally{Go(this,a_).runNext(this)}}},US=new WeakMap,a_=new WeakMap,MM=new WeakMap,HS=new WeakSet,a3=function(e){const s=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),notifyManager.batch(()=>{Go(this,US).forEach(a=>{a.onMutationUpdate(e)}),Go(this,a_).notify({mutation:this,type:"updated",action:e})})},Wae);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fx,Kz,qae,MutationCache=(qae=class extends Subscribable{constructor(e={}){super();lu(this,Fx);lu(this,Kz);this.config=e,ga(this,Fx,new Map),ga(this,Kz,Date.now())}build(e,s,a){const d=new Mutation({mutationCache:this,mutationId:++HZ(this,Kz)._,options:e.defaultMutationOptions(s),state:a});return this.add(d),d}add(e){const s=scopeFor(e),a=Go(this,Fx).get(s)??[];a.push(e),Go(this,Fx).set(s,a),this.notify({type:"added",mutation:e})}remove(e){var a;const s=scopeFor(e);if(Go(this,Fx).has(s)){const d=(a=Go(this,Fx).get(s))==null?void 0:a.filter(b=>b!==e);d&&(d.length===0?Go(this,Fx).delete(s):Go(this,Fx).set(s,d))}this.notify({type:"removed",mutation:e})}canRun(e){var a;const s=(a=Go(this,Fx).get(scopeFor(e)))==null?void 0:a.find(d=>d.state.status==="pending");return!s||s===e}runNext(e){var a;const s=(a=Go(this,Fx).get(scopeFor(e)))==null?void 0:a.find(d=>d!==e&&d.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...Go(this,Fx).values()].flat()}find(e){const s={exact:!0,...e};return this.getAll().find(a=>matchMutation(s,a))}findAll(e={}){return this.getAll().filter(s=>matchMutation(e,s))}notify(e){notifyManager.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return notifyManager.batch(()=>Promise.all(e.map(s=>s.continue().catch(noop$1))))}},Fx=new WeakMap,Kz=new WeakMap,qae);function scopeFor(o){var e;return((e=o.options.scope)==null?void 0:e.id)??String(o.mutationId)}function infiniteQueryBehavior(o){return{onFetch:(e,s)=>{var ct,dt,pt,bt,xt;const a=e.options,d=(pt=(dt=(ct=e.fetchOptions)==null?void 0:ct.meta)==null?void 0:dt.fetchMore)==null?void 0:pt.direction,b=((bt=e.state.data)==null?void 0:bt.pages)||[],_=((xt=e.state.data)==null?void 0:xt.pageParams)||[];let _e={pages:[],pageParams:[]},nt=0;const rt=async()=>{let wt=!1;const Tt=Et=>{Object.defineProperty(Et,"signal",{enumerable:!0,get:()=>(e.signal.aborted?wt=!0:e.signal.addEventListener("abort",()=>{wt=!0}),e.signal)})},Rt=ensureQueryFn(e.options,e.fetchOptions),Mt=async(Et,$t,Xt)=>{if(wt)return Promise.reject();if($t==null&&Et.pages.length)return Promise.resolve(Et);const Zt={queryKey:e.queryKey,pageParam:$t,direction:Xt?"backward":"forward",meta:e.options.meta};Tt(Zt);const Nt=await Rt(Zt),{maxPages:Jt}=e.options,dn=Xt?addToStart:addToEnd;return{pages:dn(Et.pages,Nt,Jt),pageParams:dn(Et.pageParams,$t,Jt)}};if(d&&b.length){const Et=d==="backward",$t=Et?getPreviousPageParam:getNextPageParam,Xt={pages:b,pageParams:_},Zt=$t(a,Xt);_e=await Mt(Xt,Zt,Et)}else{const Et=o??b.length;do{const $t=nt===0?_[0]??a.initialPageParam:getNextPageParam(a,_e);if(nt>0&&$t==null)break;_e=await Mt(_e,$t),nt++}while(nt<Et)}return _e};e.options.persister?e.fetchFn=()=>{var wt,Tt;return(Tt=(wt=e.options).persister)==null?void 0:Tt.call(wt,rt,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=rt}}}function getNextPageParam(o,{pages:e,pageParams:s}){const a=e.length-1;return e.length>0?o.getNextPageParam(e[a],e,s[a],s):void 0}function getPreviousPageParam(o,{pages:e,pageParams:s}){var a;return e.length>0?(a=o.getPreviousPageParam)==null?void 0:a.call(o,e[0],e,s[0],s):void 0}var j0,u3,d3,WN,qN,f3,ZN,KN,Zae,QueryClient=(Zae=class{constructor(o={}){lu(this,j0);lu(this,u3);lu(this,d3);lu(this,WN);lu(this,qN);lu(this,f3);lu(this,ZN);lu(this,KN);ga(this,j0,o.queryCache||new QueryCache),ga(this,u3,o.mutationCache||new MutationCache),ga(this,d3,o.defaultOptions||{}),ga(this,WN,new Map),ga(this,qN,new Map),ga(this,f3,0)}mount(){HZ(this,f3)._++,Go(this,f3)===1&&(ga(this,ZN,focusManager.subscribe(async o=>{o&&(await this.resumePausedMutations(),Go(this,j0).onFocus())})),ga(this,KN,onlineManager.subscribe(async o=>{o&&(await this.resumePausedMutations(),Go(this,j0).onOnline())})))}unmount(){var o,e;HZ(this,f3)._--,Go(this,f3)===0&&((o=Go(this,ZN))==null||o.call(this),ga(this,ZN,void 0),(e=Go(this,KN))==null||e.call(this),ga(this,KN,void 0))}isFetching(o){return Go(this,j0).findAll({...o,fetchStatus:"fetching"}).length}isMutating(o){return Go(this,u3).findAll({...o,status:"pending"}).length}getQueryData(o){var s;const e=this.defaultQueryOptions({queryKey:o});return(s=Go(this,j0).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(o){const e=this.getQueryData(o.queryKey);if(e===void 0)return this.fetchQuery(o);{const s=this.defaultQueryOptions(o),a=Go(this,j0).build(this,s);return o.revalidateIfStale&&a.isStaleByTime(resolveStaleTime(s.staleTime,a))&&this.prefetchQuery(s),Promise.resolve(e)}}getQueriesData(o){return Go(this,j0).findAll(o).map(({queryKey:e,state:s})=>{const a=s.data;return[e,a]})}setQueryData(o,e,s){const a=this.defaultQueryOptions({queryKey:o}),d=Go(this,j0).get(a.queryHash),b=d==null?void 0:d.state.data,_=functionalUpdate(e,b);if(_!==void 0)return Go(this,j0).build(this,a).setData(_,{...s,manual:!0})}setQueriesData(o,e,s){return notifyManager.batch(()=>Go(this,j0).findAll(o).map(({queryKey:a})=>[a,this.setQueryData(a,e,s)]))}getQueryState(o){var s;const e=this.defaultQueryOptions({queryKey:o});return(s=Go(this,j0).get(e.queryHash))==null?void 0:s.state}removeQueries(o){const e=Go(this,j0);notifyManager.batch(()=>{e.findAll(o).forEach(s=>{e.remove(s)})})}resetQueries(o,e){const s=Go(this,j0),a={type:"active",...o};return notifyManager.batch(()=>(s.findAll(o).forEach(d=>{d.reset()}),this.refetchQueries(a,e)))}cancelQueries(o={},e={}){const s={revert:!0,...e},a=notifyManager.batch(()=>Go(this,j0).findAll(o).map(d=>d.cancel(s)));return Promise.all(a).then(noop$1).catch(noop$1)}invalidateQueries(o={},e={}){return notifyManager.batch(()=>{if(Go(this,j0).findAll(o).forEach(a=>{a.invalidate()}),o.refetchType==="none")return Promise.resolve();const s={...o,type:o.refetchType??o.type??"active"};return this.refetchQueries(s,e)})}refetchQueries(o={},e){const s={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},a=notifyManager.batch(()=>Go(this,j0).findAll(o).filter(d=>!d.isDisabled()).map(d=>{let b=d.fetch(void 0,s);return s.throwOnError||(b=b.catch(noop$1)),d.state.fetchStatus==="paused"?Promise.resolve():b}));return Promise.all(a).then(noop$1)}fetchQuery(o){const e=this.defaultQueryOptions(o);e.retry===void 0&&(e.retry=!1);const s=Go(this,j0).build(this,e);return s.isStaleByTime(resolveStaleTime(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(o){return this.fetchQuery(o).then(noop$1).catch(noop$1)}fetchInfiniteQuery(o){return o.behavior=infiniteQueryBehavior(o.pages),this.fetchQuery(o)}prefetchInfiniteQuery(o){return this.fetchInfiniteQuery(o).then(noop$1).catch(noop$1)}ensureInfiniteQueryData(o){return o.behavior=infiniteQueryBehavior(o.pages),this.ensureQueryData(o)}resumePausedMutations(){return onlineManager.isOnline()?Go(this,u3).resumePausedMutations():Promise.resolve()}getQueryCache(){return Go(this,j0)}getMutationCache(){return Go(this,u3)}getDefaultOptions(){return Go(this,d3)}setDefaultOptions(o){ga(this,d3,o)}setQueryDefaults(o,e){Go(this,WN).set(hashKey(o),{queryKey:o,defaultOptions:e})}getQueryDefaults(o){const e=[...Go(this,WN).values()];let s={};return e.forEach(a=>{partialMatchKey(o,a.queryKey)&&(s={...s,...a.defaultOptions})}),s}setMutationDefaults(o,e){Go(this,qN).set(hashKey(o),{mutationKey:o,defaultOptions:e})}getMutationDefaults(o){const e=[...Go(this,qN).values()];let s={};return e.forEach(a=>{partialMatchKey(o,a.mutationKey)&&(s={...s,...a.defaultOptions})}),s}defaultQueryOptions(o){if(o._defaulted)return o;const e={...Go(this,d3).queries,...this.getQueryDefaults(o.queryKey),...o,_defaulted:!0};return e.queryHash||(e.queryHash=hashQueryKeyByOptions(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===skipToken&&(e.enabled=!1),e}defaultMutationOptions(o){return o!=null&&o._defaulted?o:{...Go(this,d3).mutations,...(o==null?void 0:o.mutationKey)&&this.getMutationDefaults(o.mutationKey),...o,_defaulted:!0}}clear(){Go(this,j0).clear(),Go(this,u3).clear()}},j0=new WeakMap,u3=new WeakMap,d3=new WeakMap,WN=new WeakMap,qN=new WeakMap,f3=new WeakMap,ZN=new WeakMap,KN=new WeakMap,Zae),Z_,yp,Yz,l_,PM,YN,h3,VS,Xz,XN,JN,OM,DM,g3,QN,Zp,Wz,Xse,Jse,Qse,eie,tie,nie,oie,Yae,Kae,QueryObserver=(Kae=class extends Subscribable{constructor(e,s){super();lu(this,Zp);lu(this,Z_);lu(this,yp);lu(this,Yz);lu(this,l_);lu(this,PM);lu(this,YN);lu(this,h3);lu(this,VS);lu(this,Xz);lu(this,XN);lu(this,JN);lu(this,OM);lu(this,DM);lu(this,g3);lu(this,QN,new Set);this.options=s,ga(this,Z_,e),ga(this,VS,null),ga(this,h3,pendingThenable()),this.options.experimental_prefetchInRender||Go(this,h3).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Go(this,yp).addObserver(this),shouldFetchOnMount(Go(this,yp),this.options)?Mu(this,Zp,Wz).call(this):this.updateResult(),Mu(this,Zp,eie).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(Go(this,yp),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(Go(this,yp),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Mu(this,Zp,tie).call(this),Mu(this,Zp,nie).call(this),Go(this,yp).removeObserver(this)}setOptions(e,s){const a=this.options,d=Go(this,yp);if(this.options=Go(this,Z_).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof resolveEnabled(this.options.enabled,Go(this,yp))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Mu(this,Zp,oie).call(this),Go(this,yp).setOptions(this.options),a._defaulted&&!shallowEqualObjects(this.options,a)&&Go(this,Z_).getQueryCache().notify({type:"observerOptionsUpdated",query:Go(this,yp),observer:this});const b=this.hasListeners();b&&shouldFetchOptionally(Go(this,yp),d,this.options,a)&&Mu(this,Zp,Wz).call(this),this.updateResult(s),b&&(Go(this,yp)!==d||resolveEnabled(this.options.enabled,Go(this,yp))!==resolveEnabled(a.enabled,Go(this,yp))||resolveStaleTime(this.options.staleTime,Go(this,yp))!==resolveStaleTime(a.staleTime,Go(this,yp)))&&Mu(this,Zp,Xse).call(this);const _=Mu(this,Zp,Jse).call(this);b&&(Go(this,yp)!==d||resolveEnabled(this.options.enabled,Go(this,yp))!==resolveEnabled(a.enabled,Go(this,yp))||_!==Go(this,g3))&&Mu(this,Zp,Qse).call(this,_)}getOptimisticResult(e){const s=Go(this,Z_).getQueryCache().build(Go(this,Z_),e),a=this.createResult(s,e);return shouldAssignObserverCurrentProperties(this,a)&&(ga(this,l_,a),ga(this,YN,this.options),ga(this,PM,Go(this,yp).state)),a}getCurrentResult(){return Go(this,l_)}trackResult(e,s){const a={};return Object.keys(e).forEach(d=>{Object.defineProperty(a,d,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(d),s==null||s(d),e[d])})}),a}trackProp(e){Go(this,QN).add(e)}getCurrentQuery(){return Go(this,yp)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=Go(this,Z_).defaultQueryOptions(e),a=Go(this,Z_).getQueryCache().build(Go(this,Z_),s);return a.fetch().then(()=>this.createResult(a,s))}fetch(e){return Mu(this,Zp,Wz).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Go(this,l_)))}createResult(e,s){var Jt;const a=Go(this,yp),d=this.options,b=Go(this,l_),_=Go(this,PM),_e=Go(this,YN),rt=e!==a?e.state:Go(this,Yz),{state:ct}=e;let dt={...ct},pt=!1,bt;if(s._optimisticResults){const dn=this.hasListeners(),Pn=!dn&&shouldFetchOnMount(e,s),an=dn&&shouldFetchOptionally(e,a,s,d);(Pn||an)&&(dt={...dt,...fetchState(ct.data,e.options)}),s._optimisticResults==="isRestoring"&&(dt.fetchStatus="idle")}let{error:xt,errorUpdatedAt:wt,status:Tt}=dt;if(s.select&&dt.data!==void 0)if(b&&dt.data===(_==null?void 0:_.data)&&s.select===Go(this,Xz))bt=Go(this,XN);else try{ga(this,Xz,s.select),bt=s.select(dt.data),bt=replaceData(b==null?void 0:b.data,bt,s),ga(this,XN,bt),ga(this,VS,null)}catch(dn){ga(this,VS,dn)}else bt=dt.data;if(s.placeholderData!==void 0&&bt===void 0&&Tt==="pending"){let dn;if(b!=null&&b.isPlaceholderData&&s.placeholderData===(_e==null?void 0:_e.placeholderData))dn=b.data;else if(dn=typeof s.placeholderData=="function"?s.placeholderData((Jt=Go(this,JN))==null?void 0:Jt.state.data,Go(this,JN)):s.placeholderData,s.select&&dn!==void 0)try{dn=s.select(dn),ga(this,VS,null)}catch(Pn){ga(this,VS,Pn)}dn!==void 0&&(Tt="success",bt=replaceData(b==null?void 0:b.data,dn,s),pt=!0)}Go(this,VS)&&(xt=Go(this,VS),bt=Go(this,XN),wt=Date.now(),Tt="error");const Rt=dt.fetchStatus==="fetching",Mt=Tt==="pending",Et=Tt==="error",$t=Mt&&Rt,Xt=bt!==void 0,Nt={status:Tt,fetchStatus:dt.fetchStatus,isPending:Mt,isSuccess:Tt==="success",isError:Et,isInitialLoading:$t,isLoading:$t,data:bt,dataUpdatedAt:dt.dataUpdatedAt,error:xt,errorUpdatedAt:wt,failureCount:dt.fetchFailureCount,failureReason:dt.fetchFailureReason,errorUpdateCount:dt.errorUpdateCount,isFetched:dt.dataUpdateCount>0||dt.errorUpdateCount>0,isFetchedAfterMount:dt.dataUpdateCount>rt.dataUpdateCount||dt.errorUpdateCount>rt.errorUpdateCount,isFetching:Rt,isRefetching:Rt&&!Mt,isLoadingError:Et&&!Xt,isPaused:dt.fetchStatus==="paused",isPlaceholderData:pt,isRefetchError:Et&&Xt,isStale:isStale(e,s),refetch:this.refetch,promise:Go(this,h3)};if(this.options.experimental_prefetchInRender){const dn=Vt=>{Nt.status==="error"?Vt.reject(Nt.error):Nt.data!==void 0&&Vt.resolve(Nt.data)},Pn=()=>{const Vt=ga(this,h3,Nt.promise=pendingThenable());dn(Vt)},an=Go(this,h3);switch(an.status){case"pending":e.queryHash===a.queryHash&&dn(an);break;case"fulfilled":(Nt.status==="error"||Nt.data!==an.value)&&Pn();break;case"rejected":(Nt.status!=="error"||Nt.error!==an.reason)&&Pn();break}}return Nt}updateResult(e){const s=Go(this,l_),a=this.createResult(Go(this,yp),this.options);if(ga(this,PM,Go(this,yp).state),ga(this,YN,this.options),Go(this,PM).data!==void 0&&ga(this,JN,Go(this,yp)),shallowEqualObjects(a,s))return;ga(this,l_,a);const d={},b=()=>{if(!s)return!0;const{notifyOnChangeProps:_}=this.options,_e=typeof _=="function"?_():_;if(_e==="all"||!_e&&!Go(this,QN).size)return!0;const nt=new Set(_e??Go(this,QN));return this.options.throwOnError&&nt.add("error"),Object.keys(Go(this,l_)).some(rt=>{const ct=rt;return Go(this,l_)[ct]!==s[ct]&&nt.has(ct)})};(e==null?void 0:e.listeners)!==!1&&b()&&(d.listeners=!0),Mu(this,Zp,Yae).call(this,{...d,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Mu(this,Zp,eie).call(this)}},Z_=new WeakMap,yp=new WeakMap,Yz=new WeakMap,l_=new WeakMap,PM=new WeakMap,YN=new WeakMap,h3=new WeakMap,VS=new WeakMap,Xz=new WeakMap,XN=new WeakMap,JN=new WeakMap,OM=new WeakMap,DM=new WeakMap,g3=new WeakMap,QN=new WeakMap,Zp=new WeakSet,Wz=function(e){Mu(this,Zp,oie).call(this);let s=Go(this,yp).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(noop$1)),s},Xse=function(){Mu(this,Zp,tie).call(this);const e=resolveStaleTime(this.options.staleTime,Go(this,yp));if(isServer||Go(this,l_).isStale||!isValidTimeout(e))return;const a=timeUntilStale(Go(this,l_).dataUpdatedAt,e)+1;ga(this,OM,setTimeout(()=>{Go(this,l_).isStale||this.updateResult()},a))},Jse=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Go(this,yp)):this.options.refetchInterval)??!1},Qse=function(e){Mu(this,Zp,nie).call(this),ga(this,g3,e),!(isServer||resolveEnabled(this.options.enabled,Go(this,yp))===!1||!isValidTimeout(Go(this,g3))||Go(this,g3)===0)&&ga(this,DM,setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&Mu(this,Zp,Wz).call(this)},Go(this,g3)))},eie=function(){Mu(this,Zp,Xse).call(this),Mu(this,Zp,Qse).call(this,Mu(this,Zp,Jse).call(this))},tie=function(){Go(this,OM)&&(clearTimeout(Go(this,OM)),ga(this,OM,void 0))},nie=function(){Go(this,DM)&&(clearInterval(Go(this,DM)),ga(this,DM,void 0))},oie=function(){const e=Go(this,Z_).getQueryCache().build(Go(this,Z_),this.options);if(e===Go(this,yp))return;const s=Go(this,yp);ga(this,yp,e),ga(this,Yz,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},Yae=function(e){notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(Go(this,l_))}),Go(this,Z_).getQueryCache().notify({query:Go(this,yp),type:"observerResultsUpdated"})})},Kae);function shouldLoadOnMount(o,e){return resolveEnabled(e.enabled,o)!==!1&&o.state.data===void 0&&!(o.state.status==="error"&&e.retryOnMount===!1)}function shouldFetchOnMount(o,e){return shouldLoadOnMount(o,e)||o.state.data!==void 0&&shouldFetchOn(o,e,e.refetchOnMount)}function shouldFetchOn(o,e,s){if(resolveEnabled(e.enabled,o)!==!1){const a=typeof s=="function"?s(o):s;return a==="always"||a!==!1&&isStale(o,e)}return!1}function shouldFetchOptionally(o,e,s,a){return(o!==e||resolveEnabled(a.enabled,o)===!1)&&(!s.suspense||o.state.status!=="error")&&isStale(o,s)}function isStale(o,e){return resolveEnabled(e.enabled,o)!==!1&&o.isStaleByTime(resolveStaleTime(e.staleTime,o))}function shouldAssignObserverCurrentProperties(o,e){return!shallowEqualObjects(o.getCurrentResult(),e)}function defaultTransformerFn(o){return o}function dehydrateMutation(o){return{mutationKey:o.options.mutationKey,state:o.state,...o.options.scope&&{scope:o.options.scope},...o.meta&&{meta:o.meta}}}function dehydrateQuery(o,e){var s;return{state:{...o.state,...o.state.data!==void 0&&{data:e(o.state.data)}},queryKey:o.queryKey,queryHash:o.queryHash,...o.state.status==="pending"&&{promise:(s=o.promise)==null?void 0:s.then(e).catch(a=>Promise.reject(new Error("redacted")))},...o.meta&&{meta:o.meta}}}function defaultShouldDehydrateMutation(o){return o.state.isPaused}function defaultShouldDehydrateQuery(o){return o.state.status==="success"}function dehydrate(o,e={}){var _e,nt,rt;const s=e.shouldDehydrateMutation??((_e=o.getDefaultOptions().dehydrate)==null?void 0:_e.shouldDehydrateMutation)??defaultShouldDehydrateMutation,a=o.getMutationCache().getAll().flatMap(ct=>s(ct)?[dehydrateMutation(ct)]:[]),d=e.shouldDehydrateQuery??((nt=o.getDefaultOptions().dehydrate)==null?void 0:nt.shouldDehydrateQuery)??defaultShouldDehydrateQuery,b=e.serializeData??((rt=o.getDefaultOptions().dehydrate)==null?void 0:rt.serializeData)??defaultTransformerFn,_=o.getQueryCache().getAll().flatMap(ct=>d(ct)?[dehydrateQuery(ct,b)]:[]);return{mutations:a,queries:_}}function hydrate(o,e,s){var nt,rt;if(typeof e!="object"||e===null)return;const a=o.getMutationCache(),d=o.getQueryCache(),b=((nt=s==null?void 0:s.defaultOptions)==null?void 0:nt.deserializeData)??((rt=o.getDefaultOptions().hydrate)==null?void 0:rt.deserializeData)??defaultTransformerFn,_=e.mutations||[],_e=e.queries||[];_.forEach(({state:ct,...dt})=>{var pt,bt;a.build(o,{...(pt=o.getDefaultOptions().hydrate)==null?void 0:pt.mutations,...(bt=s==null?void 0:s.defaultOptions)==null?void 0:bt.mutations,...dt},ct)}),_e.forEach(({queryKey:ct,state:dt,queryHash:pt,meta:bt,promise:xt})=>{var Rt,Mt;let wt=d.get(pt);const Tt=dt.data===void 0?dt.data:b(dt.data);if(wt){if(wt.state.dataUpdatedAt<dt.dataUpdatedAt){const{fetchStatus:Et,...$t}=dt;wt.setState({...$t,data:Tt})}}else wt=d.build(o,{...(Rt=o.getDefaultOptions().hydrate)==null?void 0:Rt.queries,...(Mt=s==null?void 0:s.defaultOptions)==null?void 0:Mt.queries,queryKey:ct,queryHash:pt,meta:bt},{...dt,data:Tt,fetchStatus:"idle"});if(xt){const Et=Promise.resolve(xt).then(b);wt.fetch(void 0,{initialPromise:Et})}})}var QueryClientContext=reactExports.createContext(void 0),useQueryClient=o=>{const e=reactExports.useContext(QueryClientContext);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},QueryClientProvider=({client:o,children:e})=>(reactExports.useEffect(()=>(o.mount(),()=>{o.unmount()}),[o]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:o,children:e})),IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext),IsRestoringProvider=IsRestoringContext.Provider;function createValue(){let o=!1;return{clearReset:()=>{o=!1},reset:()=>{o=!0},isReset:()=>o}}var QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext);function shouldThrowError(o,e){return typeof o=="function"?o(...e):!!o}function noop(){}var ensurePreventErrorBoundaryRetry=(o,e)=>{(o.suspense||o.throwOnError||o.experimental_prefetchInRender)&&(e.isReset()||(o.retryOnMount=!1))},useClearResetErrorBoundary=o=>{reactExports.useEffect(()=>{o.clearReset()},[o])},getHasError=({result:o,errorResetBoundary:e,throwOnError:s,query:a})=>o.isError&&!e.isReset()&&!o.isFetching&&a&&shouldThrowError(s,[o.error,a]),ensureSuspenseTimers=o=>{o.suspense&&(o.staleTime===void 0&&(o.staleTime=1e3),typeof o.gcTime=="number"&&(o.gcTime=Math.max(o.gcTime,1e3)))},willFetch=(o,e)=>o.isLoading&&o.isFetching&&!e,shouldSuspend=(o,e)=>(o==null?void 0:o.suspense)&&e.isPending,fetchOptimistic=(o,e,s)=>e.fetchOptimistic(o).catch(()=>{s.clearReset()});function useBaseQuery(o,e,s){var ct,dt,pt,bt,xt;const a=useQueryClient(),d=useIsRestoring(),b=useQueryErrorResetBoundary(),_=a.defaultQueryOptions(o);(dt=(ct=a.getDefaultOptions().queries)==null?void 0:ct._experimental_beforeQuery)==null||dt.call(ct,_),_._optimisticResults=d?"isRestoring":"optimistic",ensureSuspenseTimers(_),ensurePreventErrorBoundaryRetry(_,b),useClearResetErrorBoundary(b);const _e=!a.getQueryCache().get(_.queryHash),[nt]=reactExports.useState(()=>new e(a,_)),rt=nt.getOptimisticResult(_);if(reactExports.useSyncExternalStore(reactExports.useCallback(wt=>{const Tt=d?()=>{}:nt.subscribe(notifyManager.batchCalls(wt));return nt.updateResult(),Tt},[nt,d]),()=>nt.getCurrentResult(),()=>nt.getCurrentResult()),reactExports.useEffect(()=>{nt.setOptions(_,{listeners:!1})},[_,nt]),shouldSuspend(_,rt))throw fetchOptimistic(_,nt,b);if(getHasError({result:rt,errorResetBoundary:b,throwOnError:_.throwOnError,query:a.getQueryCache().get(_.queryHash)}))throw rt.error;if((bt=(pt=a.getDefaultOptions().queries)==null?void 0:pt._experimental_afterQuery)==null||bt.call(pt,_,rt),_.experimental_prefetchInRender&&!isServer&&willFetch(rt,d)){const wt=_e?fetchOptimistic(_,nt,b):(xt=a.getQueryCache().get(_.queryHash))==null?void 0:xt.promise;wt==null||wt.catch(noop).finally(()=>{nt.updateResult()})}return _.notifyOnChangeProps?rt:nt.trackResult(rt)}function useQuery(o,e){return useBaseQuery(o,QueryObserver)}var ReactQueryDevtools2=function(){return null},cacheEventTypes=["added","removed","updated"];function isCacheEventType(o){return cacheEventTypes.includes(o)}async function persistQueryClientRestore({queryClient:o,persister:e,maxAge:s=1e3*60*60*24,buster:a="",hydrateOptions:d}){try{const b=await e.restoreClient();if(b)if(b.timestamp){const _=Date.now()-b.timestamp>s,_e=b.buster!==a;_||_e?e.removeClient():hydrate(o,b.clientState,d)}else e.removeClient()}catch{e.removeClient()}}async function persistQueryClientSave({queryClient:o,persister:e,buster:s="",dehydrateOptions:a}){const d={buster:s,timestamp:Date.now(),clientState:dehydrate(o,a)};await e.persistClient(d)}function persistQueryClientSubscribe(o){const e=o.queryClient.getQueryCache().subscribe(a=>{isCacheEventType(a.type)&&persistQueryClientSave(o)}),s=o.queryClient.getMutationCache().subscribe(a=>{isCacheEventType(a.type)&&persistQueryClientSave(o)});return()=>{e(),s()}}var PersistQueryClientProvider=({client:o,children:e,persistOptions:s,onSuccess:a,...d})=>{const[b,_]=reactExports.useState(!0),_e=reactExports.useRef({persistOptions:s,onSuccess:a}),nt=reactExports.useRef(!1);return reactExports.useEffect(()=>{_e.current={persistOptions:s,onSuccess:a}}),reactExports.useEffect(()=>{const rt={..._e.current.persistOptions,queryClient:o};return nt.current||(nt.current=!0,persistQueryClientRestore(rt).then(async()=>{var ct,dt;try{await((dt=(ct=_e.current).onSuccess)==null?void 0:dt.call(ct))}finally{_(!1)}})),b?void 0:persistQueryClientSubscribe(rt)},[o,b]),jsxRuntimeExports.jsx(QueryClientProvider,{client:o,...d,children:jsxRuntimeExports.jsx(IsRestoringProvider,{value:b,children:e})})};function createUseConsent(o){const{useFinalityConsent:e,processConsentChanges:s,useConsentCallback:a}=o;return{useConsent:isBrowser?_e=>{const{consentCallback:nt}=_e??{};a({consentCallback:nt});const rt=e();return{assumeConsent:useConstCallback(dt=>s({type:"atomic change",finality:dt,isConsentGiven:!0})),finalityConsent:rt}}:()=>({finalityConsent:void 0,assumeConsent:()=>{throw new Error("Cannot assume consent on the server side")}})}}function deepCopy(o){return JSON.parse(JSON.stringify(o))}var __rest$1=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};function finalityConsentToChanges(o){return Object.entries(o.finalityConsent).filter(([e])=>e!=="isFullConsent").map(([e,s])=>typeof s=="boolean"?[{finality:e,isConsentGiven:s}]:Object.entries(s).filter(([a])=>a!=="isFullConsent").map(([a,d])=>({finality:`${e}.${a}`,isConsentGiven:(assert$1(typeof d=="boolean"),d)}))).reduce((e,s)=>[...e,...s],[])}function createProcessConsentChanges(o){const{finalities:e,getFinalityConsent:s,setFinalityConsent:a,consentCallback:d}=o,b=[];d!==void 0&&b.push(d);function _(nt){const{consentCallback:rt}=nt,ct=useConstCallback(dt=>rt==null?void 0:rt(dt));b.includes(ct)||b.push(ct),reactExports.useEffect(()=>()=>{b.splice(b.indexOf(ct),1)},[])}return{processConsentChanges:async nt=>{if(nt.type==="no changes but trigger consent callbacks"){const pt=s();if(pt===void 0)return;await Promise.all(b.map(bt=>bt({finalityConsent:pt,finalityConsent_prev:pt})));return}const rt=(()=>{switch(nt.type){case"grantAll":return e.map(pt=>({finality:pt,isConsentGiven:!0}));case"denyAll":return e.map(pt=>({finality:pt,isConsentGiven:!1}));case"atomic change":return[{finality:nt.finality,isConsentGiven:nt.isConsentGiven}];case"new finalityConsent explicitly provided":return finalityConsentToChanges({finalityConsent:nt.finalityConsent})}})(),ct=s();let dt=ct===void 0?createFullDenyFinalityConsent(e):deepCopy(ct);for(const{finality:pt,isConsentGiven:bt}of rt)dt=updateFinalityConsent({finalityConsent:dt,finality:pt,isConsentGiven:bt});a({finalityConsent:dt,prAllConsentCallbacksRun:Promise.all(b.map(pt=>pt({finalityConsent:dt,finalityConsent_prev:ct}))).then(()=>{})})},useConsentCallback:_}}function createFullDenyFinalityConsent(o){var e;const s={isFullConsent:!1};for(const a of o){const[d,b]=a.split(".");if(b===void 0){s[d]=!1;continue}((e=s[d])!==null&&e!==void 0?e:s[d]={isFullConsent:!1})[b]=!1}return s}function updateFinalityConsent(o){const{finality:e,finalityConsent:s,isConsentGiven:a}=o,[d,b]=e.split(".");assert$1(is());const _=deepCopy(s),_e=d;_[_e];const nt=__rest$1(_,["isFullConsent",typeof _e=="symbol"?_e:_e+""]);if(b===void 0)return Object.assign(Object.assign({},nt),{[d]:a,isFullConsent:a&&!Object.values(nt).map(bt=>typeof bt=="boolean"?bt:bt.isFullConsent).includes(!1)});const rt=deepCopy(s[d]),ct=b;rt[ct];const dt=__rest$1(rt,["isFullConsent",typeof ct=="symbol"?ct:ct+""]),pt=a&&!Object.keys(dt).map(bt=>dt[bt]).includes(!1);return Object.assign(Object.assign({},nt),{[d]:Object.assign(Object.assign({},dt),{[b]:a,isFullConsent:pt}),isFullConsent:pt&&!Object.values(nt).map(bt=>typeof bt=="boolean"?bt:bt.isFullConsent).includes(!1)})}const{useTranslation,addConsentManagementTranslations}=createComponentI18nApi({componentName:"ConsentManagement",frMessages:{"all services pref":"Prfrences pour tous les services.","personal data cookies":"Donnes personnelles et cookies","accept all":"Tout accepter","accept all - title":"Autoriser tous les cookies","refuse all":"Tout refuser","refuse all - title":"Refuser tous les cookies",accept:"Accepter",refuse:"Refuser","confirm choices":"Confirmer mes choix","about cookies":o=>` propos des cookies sur ${o.hostname}`,"welcome message":o=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Bienvenue ! Nous utilisons des cookies pour amliorer votre exprience et les services disponibles sur ce site.",o.personalDataPolicyLinkProps!==void 0&&React.createElement(React.Fragment,null," ","Pour en savoir plus, visitez la page"," ",React.createElement(e,Object.assign({},o.personalDataPolicyLinkProps),"Donnes personnelles et cookies"),".")," Vous pouvez,  tout moment, avoir le contrle sur les cookies que vous souhaitez activer.")},customize:"Personnaliser","customize cookies - title":"Personnaliser les cookies","consent modal title":"Panneau de gestion des cookies","cookies management":"Gestion des cookies","personal data":"Donnes personnelles","preferences for all services":o=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Prfrences pour tous les services.",React.createElement("br",null),o.personalDataPolicyLinkProps!==void 0&&React.createElement(e,Object.assign({},o.personalDataPolicyLinkProps),"Donnes personnelles et cookies"))},"see more details":"Voir plus de dtails","hide details":"Cacher les dtails","mandatory cookies":"Cookies obligatoires","mandatory cookies - description":"Ce site utilise des cookies ncessaires  son bon fonctionnement qui ne peuvent pas tre dsactivs.","confirm my choices":"Confirmer mes choix"}});addConsentManagementTranslations({lang:"en",messages:{"all services pref":"Preferences for all services.","personal data cookies":"Personal data and cookies","accept all":"Accept all","accept all - title":"Accept all cookies","refuse all":"Refuse all","refuse all - title":"Refuse all cookies",accept:"Accept",refuse:"Refuse","confirm choices":"Confirm my choices","about cookies":o=>`About cookies on ${o.hostname}`,"welcome message":o=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Welcome to our website! We use cookies to improve your experience and the services available services available on this site.",o.personalDataPolicyLinkProps!==void 0&&React.createElement(React.Fragment,null,"To learn more, visit the"," ",React.createElement(e,Object.assign({},o.personalDataPolicyLinkProps),'"Personal Data and Cookies"')," ","page.")," You can, at any time, have control over which cookies you wish to enable at any time.")},customize:"Customize","customize cookies - title":"Customize cookies","consent modal title":"Cookie management panel","cookies management":"Cookies management","preferences for all services":o=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Preferences for all services ",React.createElement("br",null),o.personalDataPolicyLinkProps!==void 0&&React.createElement(e,Object.assign({},o.personalDataPolicyLinkProps),"Personal data and cookies"))},"see more details":"See more details","hide details":"Hide details","mandatory cookies":"Mandatory cookies","mandatory cookies - description":"This site uses cookies necessary for its proper functioning which cannot be deactivated.","confirm my choices":"Confirm my choices"}});function createConsentBanner(o){const{personalDataPolicyLinkProps:e,processConsentChanges:s,consentModalButtonProps:a}=o;function d(){const{t:b}=useTranslation(),[_,_e]=reactExports.useState(""),[nt,rt]=reactExports.useState(!1);reactExports.useEffect(()=>{isBrowser&&_e(location.host)},[]);const ct="fr-consent-banner";return React.createElement(React.Fragment,null,React.createElement("div",{id:ct,className:fr.cx("fr-consent-banner")},React.createElement("h2",{className:fr.cx("fr-h6")},b("about cookies",{hostname:_})),React.createElement("div",null,React.createElement("p",{className:fr.cx("fr-text--sm")},b("welcome message",{personalDataPolicyLinkProps:e}))),React.createElement("ul",{className:fr.cx("fr-consent-banner__buttons","fr-btns-group","fr-btns-group--right","fr-btns-group--inline-reverse","fr-btns-group--inline-sm")},React.createElement("li",null,React.createElement("button",{id:`${ct}-button-accept-all`,className:fr.cx("fr-btn"),title:b("accept all - title"),onClick:async()=>{rt(!0),await s({type:"grantAll"}),rt(!1)},disabled:nt},b("accept all"))),React.createElement("li",null,React.createElement("button",{id:`${ct}-button-refuse-app`,className:fr.cx("fr-btn"),title:b("refuse all - title"),onClick:()=>{rt(!0),s({type:"denyAll"}),rt(!1)},disabled:nt},b("refuse all"))),React.createElement("li",null,React.createElement("button",Object.assign({id:`${ct}-button-customize`,className:fr.cx("fr-btn","fr-btn--secondary"),title:b("customize cookies - title"),disabled:nt},a),b("customize"))))))}return{ConsentBanner:d}}function useIsModalOpen(o,e){const{id:s,isOpenedByDefault:a}=o,[d,b]=reactExports.useState(a),_=useConstCallback(()=>e);return reactExports.useEffect(()=>{const _e=[],nt=dt=>{const pt=()=>{b(!1),setTimeout(()=>{var Rt,Mt;(Mt=(Rt=_())===null||Rt===void 0?void 0:Rt.onConceal)===null||Mt===void 0||Mt.call(Rt)},0)},bt=()=>{var Rt,Mt;b(!0),(Mt=(Rt=_())===null||Rt===void 0?void 0:Rt.onDisclose)===null||Mt===void 0||Mt.call(Rt)};dt.addEventListener("dsfr.conceal",pt),dt.addEventListener("dsfr.disclose",bt);const xt=()=>{dt.removeEventListener("dsfr.conceal",pt),dt.removeEventListener("dsfr.disclose",bt)};_e.push(xt);const wt=new MutationObserver(Rt=>{Rt.find(Et=>Array.from(Et.removedNodes).indexOf(dt)!==-1)!==void 0&&(_e.splice(_e.indexOf(xt),1),wt.disconnect(),_e.splice(_e.indexOf(Tt),1),b(!1),rt({isInitialCall:!1}))});wt.observe(document,{childList:!0,subtree:!0});const Tt=()=>wt.disconnect();_e.push(Tt)},rt=dt=>{const{isInitialCall:pt}=dt;pt&&assert$1(!a,[`The ${s} modal isn't initially mounted,`,`it's ok but in this case ${symToStr({isOpenedByDefault:a})} must be set to false.`,"This limitation is to prevent inconsistent state in SSR setups."].join(" "));const bt=new MutationObserver((wt,Tt)=>{const Rt=wt.map(Mt=>Array.from(Mt.addedNodes)).reduce((Mt,Et)=>Mt.concat(Et),[]).find(Mt=>Mt.nodeType===Node.ELEMENT_NODE&&Mt.nodeName==="DIALOG"&&Mt.id===s);Rt!==void 0&&(Tt.disconnect(),_e.splice(_e.indexOf(xt),1),nt(Rt),a&&b(!0))});bt.observe(document,{childList:!0,subtree:!0});const xt=()=>bt.disconnect();_e.push(xt)},ct=document.getElementById(s);return ct!==null?nt(ct):rt({isInitialCall:!0}),()=>{_e.forEach(dt=>dt())}},[s]),d}function objectKeys(o){return Object.keys(o)}function exclude(o){const e=o instanceof Object?s=>o.indexOf(s)<0:s=>s!==o;return function(s){return e(s)}}function useConst(o){const[e]=reactExports.useState(o);return e}function createConsentManagement$1(o){const{finalityDescription:e,personalDataPolicyLinkProps:s,useFinalityConsent:a,processConsentChanges:d,finalities:b}=o,_=createModal({isOpenedByDefault:!1,id:"fr-consent-modal"});function _e(){const pt=useLang(),{t:bt}=useTranslation(),xt=reactExports.useMemo(()=>typeof e=="function"?e({lang:pt}):e,[pt]),{processLocalConsentChange:wt,localFinalityConsent:Tt}=function(){const Xt=a(),Zt=useConst(()=>createStatefulObservable(()=>Xt??createFullDenyFinalityConsent(b)));useRerenderOnChange(Zt),reactExports.useEffect(()=>{Xt!==void 0&&(Zt.current=Xt)},[Xt]);const{processConsentChanges:Nt}=createProcessConsentChanges({consentCallback:void 0,finalities:b,getFinalityConsent:()=>Zt.current,setFinalityConsent:({finalityConsent:dn})=>Zt.current=dn});return{processLocalConsentChange:Nt,localFinalityConsent:Zt.current}}(),[Rt,Mt]=reactExports.useState(!1),Et=$t=>async()=>{switch(Mt(!0),$t){case"apply local changes":await d({type:"new finalityConsent explicitly provided",finalityConsent:Tt});break;case"denyAll":case"grantAll":wt({type:$t}),await d({type:$t});break}Mt(!1),_.close()};return React.createElement(_.Component,{title:bt("consent modal title"),size:"large"},React.createElement("div",null,React.createElement("div",{className:fr.cx("fr-consent-service","fr-consent-manager__header")},React.createElement("fieldset",{className:fr.cx("fr-fieldset","fr-fieldset--inline")},React.createElement("legend",{className:fr.cx("fr-consent-service__title")},bt("preferences for all services",{personalDataPolicyLinkProps:s})),React.createElement("div",{className:fr.cx("fr-consent-service__radios")},React.createElement("div",{className:fr.cx("fr-btns-group","fr-btns-group--inline","fr-btns-group--right")},React.createElement("button",{id:`${_.id}-button-accept-all`,title:bt("accept all - title"),className:fr.cx("fr-btn"),onClick:Et("grantAll"),disabled:Rt},bt("accept all"))," ",React.createElement("button",{id:`${_.id}-button-refuse-all`,title:bt("refuse all - title"),className:fr.cx("fr-btn","fr-btn--secondary"),disabled:Rt,onClick:Et("denyAll")},bt("refuse all")))))),React.createElement(nt,{title:bt("mandatory cookies"),description:bt("mandatory cookies - description"),finalityConsent:!0,onChange:void 0,subFinalities:void 0}),objectKeys(xt).map($t=>({finality:(assert$1(typeof $t=="string"),$t),wrap:xt[$t]})).map(({finality:$t,wrap:Xt})=>React.createElement(nt,{key:$t,title:Xt.title,description:Xt.description,subFinalities:Xt.subFinalities,onChange:({subFinality:Zt,isConsentGiven:Nt})=>(Zt!==void 0?[`${$t}.${Zt}`]:Xt.subFinalities===void 0?[$t]:Object.keys(Xt.subFinalities).map(Jt=>`${$t}.${Jt}`)).forEach(Jt=>wt({type:"atomic change",finality:Jt,isConsentGiven:Nt})),finalityConsent:Tt[$t]})),React.createElement("ul",{className:fr.cx("fr-consent-manager__buttons","fr-btns-group","fr-btns-group--right","fr-btns-group--inline-sm")},React.createElement("li",null,React.createElement("button",{id:`${_.id}-button-confirm`,className:fr.cx("fr-btn"),disabled:Rt,onClick:Et("apply local changes")},bt("confirm choices"))))))}function nt(pt){const{title:bt,description:xt,subFinalities:wt,finalityConsent:Tt,onChange:Rt}=pt,{t:Mt}=useTranslation(),{legendId:Et,descriptionId:$t,acceptInputId:Xt,refuseInputId:Zt,subFinalityDivId:Nt}=function(){const Vt=reactExports.useId(),ao=`finality-${Vt}-legend`,hn=`finality-${Vt}-desc`,fn=`consent-finality-${Vt}-accept`,It=`consent-finality-${Vt}-refuse`,Vn=`finality-${Vt}-collapse`;return{legendId:ao,descriptionId:hn,acceptInputId:fn,refuseInputId:It,subFinalityDivId:Vn}}(),Jt=reactExports.useMemo(()=>typeof Tt=="boolean"?Tt?"full consent":"full refusal":Tt.isFullConsent?"full consent":Object.keys(Tt).filter(exclude("isFullConsent")).map(an=>Tt[an]).includes(!0)?"partial consent":"full refusal",[Tt]),[dn,Pn]=reactExports.useState(!0);return React.createElement("div",{className:fr.cx("fr-consent-service")},React.createElement("fieldset",{"aria-labelledby":`${Et} ${$t}`,role:"group",className:fr.cx("fr-fieldset")},React.createElement("legend",{id:Et,className:fr.cx("fr-consent-service__title")},bt),React.createElement("div",{className:fr.cx("fr-consent-service__radios")},React.createElement("div",{className:fr.cx("fr-radio-group")},React.createElement("input",Object.assign({type:"radio",id:Xt,checked:Jt==="full consent"},Rt===void 0?{disabled:!0}:{onChange:()=>Rt({subFinality:void 0,isConsentGiven:!0})})),React.createElement("label",{className:"fr-label",htmlFor:Xt},Mt("accept"))),React.createElement("div",{className:fr.cx("fr-radio-group")},React.createElement("input",Object.assign({type:"radio",id:Zt,checked:Jt==="full refusal"},Rt===void 0?{disabled:!0}:{onChange:()=>Rt({subFinality:void 0,isConsentGiven:!1})})),React.createElement("label",{className:fr.cx("fr-label"),htmlFor:Zt},Mt("refuse")))),xt!==void 0&&React.createElement("p",{className:fr.cx("fr-consent-service__desc")},xt),wt!==void 0&&(assert$1(typeof Tt!="boolean"),assert$1(Rt!==void 0),React.createElement(React.Fragment,null,React.createElement("div",{className:fr.cx("fr-consent-service__collapse")},React.createElement("button",{className:fr.cx("fr-consent-service__collapse-btn"),"aria-expanded":"false","aria-describedby":Et,"aria-controls":Nt,onClick:()=>Pn(!dn)},Mt(dn?"see more details":"hide details"))),React.createElement("div",{className:fr.cx("fr-consent-services","fr-collapse"),id:Nt},Object.entries(wt).map(([an,Vt])=>React.createElement(rt,{key:an,title:Vt,isConsentGiven:Tt[an],onChange:({isConsentGiven:ao})=>Rt({subFinality:an,isConsentGiven:ao})})))))))}function rt(pt){const{title:bt,onChange:xt,isConsentGiven:wt}=pt,{t:Tt}=useTranslation(),{acceptInputId:Rt,refuseInputId:Mt}=function(){const $t=reactExports.useId(),Xt=`consent-finality-${$t}-service-accept`,Zt=`consent-finality-${$t}-service-refuse`;return{acceptInputId:Xt,refuseInputId:Zt}}();return React.createElement("div",{className:fr.cx("fr-consent-service")},React.createElement("fieldset",{className:fr.cx("fr-fieldset","fr-fieldset--inline")},React.createElement("legend",{className:fr.cx("fr-consent-service__title")},bt),React.createElement("div",{className:"fr-consent-service__radios fr-fieldset--inline"},React.createElement("div",{className:"fr-radio-group"},React.createElement("input",{type:"radio",id:Rt,checked:wt,onChange:()=>xt({isConsentGiven:!0})}),React.createElement("label",{className:fr.cx("fr-label"),htmlFor:Rt},Tt("accept"))),React.createElement("div",{className:fr.cx("fr-radio-group")},React.createElement("input",{type:"radio",id:Mt,checked:!wt,onChange:()=>xt({isConsentGiven:!1})}),React.createElement("label",{className:fr.cx("fr-label"),htmlFor:Mt},Tt("refuse"))))))}const ct=_.buttonProps;function dt(){return useIsModalOpen(_)}return{ConsentManagement:_e,consentModalButtonProps:ct,useIsConsentManagementOpen:dt}}function createConsentBannerAndConsentManagement(o){const{finalityDescription:e,useFinalityConsent:s,processConsentChanges:a,personalDataPolicyLinkProps:d,finalities:b}=o,{ConsentManagement:_,consentModalButtonProps:_e,useIsConsentManagementOpen:nt}=createConsentManagement$1({finalityDescription:e,personalDataPolicyLinkProps:d,useFinalityConsent:s,processConsentChanges:a,finalities:b}),{ConsentBanner:rt}=createConsentBanner({personalDataPolicyLinkProps:d,processConsentChanges:a,consentModalButtonProps:_e}),{FooterConsentManagementItem:ct}=createFooterConsentManagementItem({consentModalButtonProps:_e});let dt=()=>{a({type:"no changes but trigger consent callbacks"}),dt=void 0};function pt(){const[xt,wt]=reactExports.useReducer(()=>!0,!1);reactExports.useEffect(()=>{dt==null||dt(),wt()},[]);const Tt=s(),Rt=nt();return xt?React.createElement(React.Fragment,null,Tt===void 0&&!Rt&&React.createElement(rt,null),React.createElement(_,null)):null}const{FooterPersonalDataPolicyItem:bt}=createFooterPersonalDataPolicyItem({personalDataPolicyLinkProps:d});return{ConsentBannerAndConsentManagement:pt,FooterConsentManagementItem:ct,FooterPersonalDataPolicyItem:bt}}function createFooterConsentManagementItem(o){const{consentModalButtonProps:e}=o;function s(){const{t:a}=useTranslation();return React.createElement(FooterBottomItem,{bottomItem:{buttonProps:e,text:a("cookies management")}})}return{FooterConsentManagementItem:s}}function createFooterPersonalDataPolicyItem(o){const{personalDataPolicyLinkProps:e}=o;function s(){const{t:a}=useTranslation();if(e===void 0)throw new Error(["You should provide a personalDataPolicyLinkProps to createConsentManagement if","you want to add a link to the personal data policy in the footer"].join(" "));return React.createElement(FooterBottomItem,{bottomItem:{text:a("personal data"),linkProps:e}})}return{FooterPersonalDataPolicyItem:s}}const defaultLocalStorageKeyPrefix="@codegouvfr/react-dsfr finalityConsent";function createConsentManagement(o){const{finalityDescription:e,personalDataPolicyLinkProps:s,consentCallback:a,localStorageKeyPrefix:d=defaultLocalStorageKeyPrefix}=o,b=getFinalitiesFromFinalityDescription({finalityDescription:typeof e=="function"?e({lang:"fr"}):e}),_=`${d} ${b.join("-")}`,_e=createStatefulObservable(()=>{if(!isBrowser)return;const wt=localStorage.getItem(_);if(wt!==null)return JSON.parse(wt)}),{processConsentChanges:nt,useConsentCallback:rt}=createProcessConsentChanges({consentCallback:a,finalities:b,getFinalityConsent:()=>_e.current,setFinalityConsent:({finalityConsent:wt,prAllConsentCallbacksRun:Tt})=>{localStorage.setItem(_,JSON.stringify(wt)),Tt.then(()=>_e.current=wt)}});function ct(){useRerenderOnChange(_e);const[wt,Tt]=reactExports.useReducer(()=>!0,!0);if(reactExports.useEffect(()=>{Tt()},[]),!!wt)return _e.current}const{useConsent:dt}=createUseConsent({useFinalityConsent:ct,processConsentChanges:nt,useConsentCallback:rt}),{ConsentBannerAndConsentManagement:pt,FooterConsentManagementItem:bt,FooterPersonalDataPolicyItem:xt}=createConsentBannerAndConsentManagement({finalityDescription:e,personalDataPolicyLinkProps:s,processConsentChanges:nt,useFinalityConsent:ct,finalities:b});return{useConsent:dt,ConsentBannerAndConsentManagement:pt,FooterConsentManagementItem:bt,FooterPersonalDataPolicyItem:xt}}function getFinalitiesFromFinalityDescription(o){const{finalityDescription:e}=o,s=[];for(const a in e){const d=e[a],{subFinalities:b}=d;if(b===void 0){s.push(a);continue}for(const _ in b)s.push(`${a}.${_}`)}return s}async function startEulerianAnalytics(o){return await prDsfrLoaded,window.dsfr.analytics=o,await __vitePreload(()=>import("./analytics.module.min-BQeBmxFq.js"),[]),await dsfr.analytics.readiness,{enable:()=>{window.dsfr.analytics.opt.enable()},disable:()=>{window.dsfr.analytics.opt.disable()}}}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)({}).hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$2.apply(null,arguments)}var Action;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(Action||(Action={}));var readOnly=function(o){return o},BeforeUnloadEventType="beforeunload",HashChangeEventType="hashchange",PopStateEventType="popstate";function createBrowserHistory(o){o===void 0&&(o={});var e=o,s=e.window,a=s===void 0?document.defaultView:s,d=a.history;function b(){var Nt=a.location,Jt=Nt.pathname,dn=Nt.search,Pn=Nt.hash,an=d.state||{};return[an.idx,readOnly({pathname:Jt,search:dn,hash:Pn,state:an.usr||null,key:an.key||"default"})]}var _=null;function _e(){if(_)bt.call(_),_=null;else{var Nt=Action.Pop,Jt=b(),dn=Jt[0],Pn=Jt[1];if(bt.length){if(dn!=null){var an=ct-dn;an&&(_={action:Nt,location:Pn,retry:function(){Xt(an*-1)}},Xt(an))}}else Mt(Nt)}}a.addEventListener(PopStateEventType,_e);var nt=Action.Pop,rt=b(),ct=rt[0],dt=rt[1],pt=createEvents(),bt=createEvents();ct==null&&(ct=0,d.replaceState(_extends$2({},d.state,{idx:ct}),""));function xt(Nt){return typeof Nt=="string"?Nt:createPath(Nt)}function wt(Nt,Jt){return Jt===void 0&&(Jt=null),readOnly(_extends$2({pathname:dt.pathname,hash:"",search:""},typeof Nt=="string"?parsePath(Nt):Nt,{state:Jt,key:createKey$1()}))}function Tt(Nt,Jt){return[{usr:Nt.state,key:Nt.key,idx:Jt},xt(Nt)]}function Rt(Nt,Jt,dn){return!bt.length||(bt.call({action:Nt,location:Jt,retry:dn}),!1)}function Mt(Nt){nt=Nt;var Jt=b();ct=Jt[0],dt=Jt[1],pt.call({action:nt,location:dt})}function Et(Nt,Jt){var dn=Action.Push,Pn=wt(Nt,Jt);function an(){Et(Nt,Jt)}if(Rt(dn,Pn,an)){var Vt=Tt(Pn,ct+1),ao=Vt[0],hn=Vt[1];try{d.pushState(ao,"",hn)}catch{a.location.assign(hn)}Mt(dn)}}function $t(Nt,Jt){var dn=Action.Replace,Pn=wt(Nt,Jt);function an(){$t(Nt,Jt)}if(Rt(dn,Pn,an)){var Vt=Tt(Pn,ct),ao=Vt[0],hn=Vt[1];d.replaceState(ao,"",hn),Mt(dn)}}function Xt(Nt){d.go(Nt)}var Zt={get action(){return nt},get location(){return dt},createHref:xt,push:Et,replace:$t,go:Xt,back:function(){Xt(-1)},forward:function(){Xt(1)},listen:function(Jt){return pt.push(Jt)},block:function(Jt){var dn=bt.push(Jt);return bt.length===1&&a.addEventListener(BeforeUnloadEventType,promptBeforeUnload),function(){dn(),bt.length||a.removeEventListener(BeforeUnloadEventType,promptBeforeUnload)}}};return Zt}function createHashHistory(o){o===void 0&&(o={});var e=o,s=e.window,a=s===void 0?document.defaultView:s,d=a.history;function b(){var Jt=parsePath(a.location.hash.substr(1)),dn=Jt.pathname,Pn=dn===void 0?"/":dn,an=Jt.search,Vt=an===void 0?"":an,ao=Jt.hash,hn=ao===void 0?"":ao,fn=d.state||{};return[fn.idx,readOnly({pathname:Pn,search:Vt,hash:hn,state:fn.usr||null,key:fn.key||"default"})]}var _=null;function _e(){if(_)bt.call(_),_=null;else{var Jt=Action.Pop,dn=b(),Pn=dn[0],an=dn[1];if(bt.length){if(Pn!=null){var Vt=ct-Pn;Vt&&(_={action:Jt,location:an,retry:function(){Zt(Vt*-1)}},Zt(Vt))}}else Et(Jt)}}a.addEventListener(PopStateEventType,_e),a.addEventListener(HashChangeEventType,function(){var Jt=b(),dn=Jt[1];createPath(dn)!==createPath(dt)&&_e()});var nt=Action.Pop,rt=b(),ct=rt[0],dt=rt[1],pt=createEvents(),bt=createEvents();ct==null&&(ct=0,d.replaceState(_extends$2({},d.state,{idx:ct}),""));function xt(){var Jt=document.querySelector("base"),dn="";if(Jt&&Jt.getAttribute("href")){var Pn=a.location.href,an=Pn.indexOf("#");dn=an===-1?Pn:Pn.slice(0,an)}return dn}function wt(Jt){return xt()+"#"+(typeof Jt=="string"?Jt:createPath(Jt))}function Tt(Jt,dn){return dn===void 0&&(dn=null),readOnly(_extends$2({pathname:dt.pathname,hash:"",search:""},typeof Jt=="string"?parsePath(Jt):Jt,{state:dn,key:createKey$1()}))}function Rt(Jt,dn){return[{usr:Jt.state,key:Jt.key,idx:dn},wt(Jt)]}function Mt(Jt,dn,Pn){return!bt.length||(bt.call({action:Jt,location:dn,retry:Pn}),!1)}function Et(Jt){nt=Jt;var dn=b();ct=dn[0],dt=dn[1],pt.call({action:nt,location:dt})}function $t(Jt,dn){var Pn=Action.Push,an=Tt(Jt,dn);function Vt(){$t(Jt,dn)}if(Mt(Pn,an,Vt)){var ao=Rt(an,ct+1),hn=ao[0],fn=ao[1];try{d.pushState(hn,"",fn)}catch{a.location.assign(fn)}Et(Pn)}}function Xt(Jt,dn){var Pn=Action.Replace,an=Tt(Jt,dn);function Vt(){Xt(Jt,dn)}if(Mt(Pn,an,Vt)){var ao=Rt(an,ct),hn=ao[0],fn=ao[1];d.replaceState(hn,"",fn),Et(Pn)}}function Zt(Jt){d.go(Jt)}var Nt={get action(){return nt},get location(){return dt},createHref:wt,push:$t,replace:Xt,go:Zt,back:function(){Zt(-1)},forward:function(){Zt(1)},listen:function(dn){return pt.push(dn)},block:function(dn){var Pn=bt.push(dn);return bt.length===1&&a.addEventListener(BeforeUnloadEventType,promptBeforeUnload),function(){Pn(),bt.length||a.removeEventListener(BeforeUnloadEventType,promptBeforeUnload)}}};return Nt}function createMemoryHistory(o){o===void 0&&(o={});var e=o,s=e.initialEntries,a=s===void 0?["/"]:s,d=e.initialIndex,b=a.map(function(Et){var $t=readOnly(_extends$2({pathname:"/",search:"",hash:"",state:null,key:createKey$1()},typeof Et=="string"?parsePath(Et):Et));return $t}),_=clamp$1(d??b.length-1,0,b.length-1),_e=Action.Pop,nt=b[_],rt=createEvents(),ct=createEvents();function dt(Et){return typeof Et=="string"?Et:createPath(Et)}function pt(Et,$t){return $t===void 0&&($t=null),readOnly(_extends$2({pathname:nt.pathname,search:"",hash:""},typeof Et=="string"?parsePath(Et):Et,{state:$t,key:createKey$1()}))}function bt(Et,$t,Xt){return!ct.length||(ct.call({action:Et,location:$t,retry:Xt}),!1)}function xt(Et,$t){_e=Et,nt=$t,rt.call({action:_e,location:nt})}function wt(Et,$t){var Xt=Action.Push,Zt=pt(Et,$t);function Nt(){wt(Et,$t)}bt(Xt,Zt,Nt)&&(_+=1,b.splice(_,b.length,Zt),xt(Xt,Zt))}function Tt(Et,$t){var Xt=Action.Replace,Zt=pt(Et,$t);function Nt(){Tt(Et,$t)}bt(Xt,Zt,Nt)&&(b[_]=Zt,xt(Xt,Zt))}function Rt(Et){var $t=clamp$1(_+Et,0,b.length-1),Xt=Action.Pop,Zt=b[$t];function Nt(){Rt(Et)}bt(Xt,Zt,Nt)&&(_=$t,xt(Xt,Zt))}var Mt={get index(){return _},get action(){return _e},get location(){return nt},createHref:dt,push:wt,replace:Tt,go:Rt,back:function(){Rt(-1)},forward:function(){Rt(1)},listen:function($t){return rt.push($t)},block:function($t){return ct.push($t)}};return Mt}function clamp$1(o,e,s){return Math.min(Math.max(o,e),s)}function promptBeforeUnload(o){o.preventDefault(),o.returnValue=""}function createEvents(){var o=[];return{get length(){return o.length},push:function(s){return o.push(s),function(){o=o.filter(function(a){return a!==s})}},call:function(s){o.forEach(function(a){return a&&a(s)})}}}function createKey$1(){return Math.random().toString(36).substr(2,8)}function createPath(o){var e=o.pathname,s=e===void 0?"/":e,a=o.search,d=a===void 0?"":a,b=o.hash,_=b===void 0?"":b;return d&&d!=="?"&&(s+=d.charAt(0)==="?"?d:"?"+d),_&&_!=="#"&&(s+=_.charAt(0)==="#"?_:"#"+_),s}function parsePath(o){var e={};if(o){var s=o.indexOf("#");s>=0&&(e.hash=o.substr(s),o=o.substr(0,s));var a=o.indexOf("?");a>=0&&(e.search=o.substr(a),o=o.substr(0,a)),o&&(e.pathname=o)}return e}function _extends$1(){return _extends$1=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$1.apply(this,arguments)}function _unsupportedIterableToArray(o,e){if(o){if(typeof o=="string")return _arrayLikeToArray(o,e);var s=Object.prototype.toString.call(o).slice(8,-1);if(s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set")return Array.from(o);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray(o,e)}}function _arrayLikeToArray(o,e){(e==null||e>o.length)&&(e=o.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=o[s];return a}function _createForOfIteratorHelperLoose(o,e){var s=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(s)return(s=s.call(o)).next.bind(s);if(Array.isArray(o)||(s=_unsupportedIterableToArray(o))||e){s&&(o=s);var a=0;return function(){return a>=o.length?{done:!0}:{done:!1,value:o[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function asArray$1(o){return Array.isArray(o)?o:[o]}function buildPathDefs(o,e,s){var a=Object.keys(e).map(function(_){var _e=_extends$1({paramName:_},e[_]);return _e}),d={};a.forEach(function(_){var _e=_.paramName;d[_e]=getParamId(_e)});var b=s(d);return asArray$1(b).map(function(_){if(_.length===1)return[];for(var _e=_.split("/").slice(1),nt={},rt=[],ct=_createForOfIteratorHelperLoose(_e),dt;!(dt=ct()).done;){for(var pt=dt.value,bt=null,xt=_createForOfIteratorHelperLoose(a),wt;!(wt=xt()).done;){var Tt=wt.value;pt.indexOf(getParamId(Tt.paramName))>=0&&(bt=Tt,nt[Tt.paramName]=!0)}if(bt){var Rt=pt.split(getParamId(bt.paramName)),Mt=Rt[0],Et=Rt[1];rt.push({leading:Mt,trailing:Et,namedParamDef:bt})}else rt.push({leading:pt,trailing:"",namedParamDef:null})}return rt.filter(function($t){var Xt,Zt;return((Xt=$t.namedParamDef)==null?void 0:Xt["~internal"].optional)||((Zt=$t.namedParamDef)==null?void 0:Zt["~internal"].trailing)}).length,rt[rt.length-1].namedParamDef,a.map(function($t){var Xt=$t.paramName;return Xt}).filter(function($t){return!nt[$t]}),rt})}function getParamId(o){return"${p."+o+"}"}function getParamDefsOfType(o,e){var s={};return Object.keys(e).forEach(function(a){var d=e[a];d["~internal"].kind===o&&(s[a]=d)}),s}function createLocation(o){var e=o.paramCollection,s=o.paramDefCollection,a=o.arraySeparator,d=o.queryStringSerializer,b=o.pathDefs,_=o.baseUrl,_e={path:{},query:{},state:{}},nt=function(Tt){var Rt,Mt=e[Tt];if(Mt===void 0)return"continue";var Et=s[Tt],$t=Et["~internal"].kind!=="state"&&!Et["~internal"].trailing,Xt=(Rt=Et["~internal"].valueSerializer.urlEncode)!=null?Rt:$t,Zt=function(dn){var Pn;return Et["~internal"].array?Pn=dn.length===0?null:dn.map(function(an){return stringify(Et,an,Xt)}).join(a):Pn=stringify(Et,dn,Xt),Pn},Nt=Zt(Mt);if(Et["~internal"].kind==="query"&&Et["~internal"].default!==void 0&&Zt(Et["~internal"].default)===Nt)return"continue";_e[Et["~internal"].kind][Tt]={valueSerializerId:Et["~internal"].valueSerializer.id,array:Et["~internal"].array,value:Nt}};for(var rt in s)var ct=nt(rt);var dt="/"+b[0].filter(function(wt){var Tt=wt.namedParamDef;return!(Tt!=null&&Tt["~internal"].optional&&_e.path[Tt.paramName]===void 0)}).map(function(wt){var Tt=wt.namedParamDef,Rt=wt.leading,Mt=wt.trailing,Et=Tt?_e.path[Tt.paramName].value:"";return Rt+Et+Mt}).join("/"),pt=Object.keys(_e.query).length>0,bt=pt?d.stringify(_e.query):void 0,xt=Object.keys(_e.state).length===0?void 0:Object.keys(_e.state).reduce(function(wt,Tt){var Rt;return _extends$1({},wt,(Rt={},Rt[Tt]=_e.state[Tt].value,Rt))},{});return{fullPath:(_==="/"?"":_)+dt,path:dt,query:bt,state:xt}}function stringify(o,e,s){var a=o["~internal"].valueSerializer.stringify(e);return s?encodeURIComponent(a):a}var noMatch={__noMatch:!0},stringUtils={startsWith,endsWith,splitFirst};function startsWith(o,e){for(var s=0;s<e.length;s++)if(e[s]!==o[s])return!1;return!0}function endsWith(o,e){for(var s=1;s<=e.length;s++)if(e[e.length-s]!==o[o.length-s])return!1;return!0}function splitFirst(o,e){var s=o.split(e),a=s[0],d=s.slice(1);return[a,d.join(e)]}var endsWith$1=stringUtils.endsWith,startsWith$1=stringUtils.startsWith;function getPathMatch(o){for(var e=o.path,s=o.pathDefs,a=o.arraySeparator,d=0;d<s.length;d++){var b=_(s[d]);if(b!==!1)return _extends$1({},b,{primaryPath:d===0})}return!1;function _(_e){var nt={};if(e==="/"&&_e.length===0)return{params:nt,numExtraneousParams:0};var rt=e.length>1&&endsWith$1(e,"/");rt&&(e=e.slice(0,e.length-1));for(var ct=e.split("/").slice(1),dt=function(wt){var Tt,Rt,Mt=wt>=_e.length?null:_e[wt],Et=wt>=ct.length?null:ct[wt];if(Mt===null)return{v:!1};var $t=_e.length-1-wt;if(Et===null){var Xt;return $t!==0||!((Xt=Mt.namedParamDef)!=null&&Xt["~internal"].optional)?{v:!1}:"break"}if((Tt=Mt.namedParamDef)!=null&&Tt["~internal"].trailing&&(Et=ct.slice(wt).join("/")),!startsWith$1(Et,Mt.leading))return{v:!1};var Zt=Et.slice(Mt.leading.length);if(!endsWith$1(Zt,Mt.trailing))return{v:!1};var Nt=Zt.slice(0,Zt.length-Mt.trailing.length);if(!Mt.namedParamDef)return Nt===""?"continue":{v:!1};if(Nt==="")return Mt.namedParamDef["~internal"].optional?"continue":{v:!1};var Jt=(Rt=Mt.namedParamDef["~internal"].valueSerializer.urlEncode)!=null?Rt:!Mt.namedParamDef["~internal"].trailing,dn=void 0;if(Mt.namedParamDef["~internal"].array){if(dn=Nt.split(a).map(function(Pn){var an;return(an=Mt.namedParamDef)==null?void 0:an["~internal"].valueSerializer.parse(Jt?decodeURIComponent(Pn):Pn)}),dn.some(function(Pn){return Pn===noMatch}))return{v:!1}}else if(dn=Mt.namedParamDef["~internal"].valueSerializer.parse(Jt?decodeURIComponent(Nt):Nt),dn===noMatch)return{v:!1};if(Mt.namedParamDef["~internal"].trailing&&rt&&Mt.trailing===""&&(dn=dn+"/"),nt[Mt.namedParamDef.paramName]=dn,Mt.namedParamDef["~internal"].trailing)return"break"},pt=0;pt<Math.max(_e.length,ct.length);pt++){var bt=dt(pt);if(bt==="break")break;if(bt!=="continue"&&typeof bt=="object")return bt.v}return{params:nt,numExtraneousParams:0}}}function getObjectMatch(o){for(var e=o.object,s=o.paramDefs,a=o.urlEncodeDefault,d=o.arraySeparator,b={},_=Object.keys(s).map(function(pt){return _extends$1({name:pt},s[pt])}),_e=_extends$1({},e),nt=function(){var bt=ct.value,xt=e[bt.name];if(delete _e[bt.name],xt===void 0)return bt["~internal"].optional?"continue":{v:!1};var wt=void 0;if(xt===null)if(bt["~internal"].array)wt=[];else return bt["~internal"].optional?"continue":{v:!1};else if(bt["~internal"].array){if(wt=xt.split(d).map(function(Rt){var Mt;return bt["~internal"].valueSerializer.parse(((Mt=bt["~internal"].valueSerializer.urlEncode)!=null?Mt:a)?decodeURIComponent(Rt):Rt)}),wt.some(function(Rt){return Rt===noMatch}))return bt["~internal"].optional?"continue":{v:!1}}else{var Tt;if(wt=bt["~internal"].valueSerializer.parse(((Tt=bt["~internal"].valueSerializer.urlEncode)!=null?Tt:a)?decodeURIComponent(xt):xt),wt===noMatch)return bt["~internal"].optional?"continue":{v:!1}}b[bt.name]=wt},rt=_createForOfIteratorHelperLoose(_),ct;!(ct=rt()).done;){var dt=nt();if(dt!=="continue"&&typeof dt=="object")return dt.v}return{params:b,numExtraneousParams:Object.keys(_e).length}}function getStateMatch(o,e,s){return getObjectMatch({object:o??{},paramDefs:e,urlEncodeDefault:!1,arraySeparator:s})}function getQueryMatch(o,e,s,a){var d={};return o&&(d=s.parse(o)),getObjectMatch({object:d,paramDefs:e,urlEncodeDefault:!0,arraySeparator:a})}function createMatcher(o){var e=o.pathDefs,s=o.params,a=getParamDefsOfType("query",s),d=getParamDefsOfType("state",s),b={};return Object.keys(s).forEach(function(_){var _e=s[_];_e["~internal"].default!==void 0&&(b[_]=_e["~internal"].default)}),function(_){var _e=_.routerLocation,nt=_.arraySeparator,rt=_.queryStringSerializer;if(_e.path===void 0)return!1;var ct=getPathMatch({path:_e.path,pathDefs:e,arraySeparator:nt});if(ct===!1)return!1;var dt=getQueryMatch(_e.query,a,rt,nt);if(dt===!1)return!1;var pt=getStateMatch(_e.state,d,nt);return pt===!1?!1:{primaryPath:ct.primaryPath,params:_extends$1({},b,ct.params,dt.params,pt.params),numExtraneousParams:ct.numExtraneousParams+dt.numExtraneousParams+pt.numExtraneousParams}}}function preventDefaultLinkClickBehavior(o){o===void 0&&(o={});var e=o,s=!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey),a=!e.target||!e.target.target||e.target.target==="_self";return a&&!e.defaultPrevented&&e.button===0&&!s?(e&&e.preventDefault&&e.preventDefault(),!0):!1}var startsWith$2=stringUtils.startsWith;function buildRoute(o){var e=o.routeName,s=o.params,a=o.location,d=o.routerContext,b=d.navigate,_=d.history,_e=_.createHref({pathname:e===!1?a.fullPath:a.path,search:a.query?"?"+a.query:""});startsWith$2(_e,"#")&&(_e="/"+_e),e!==!1&&d.baseUrl!=="/"&&(_e=d.baseUrl+_e);var nt={name:e,params:s,href:_e,link:{href:_e,onClick:function(ct){if(preventDefaultLinkClickBehavior(ct))return nt.push()}},action:null,push:function(){return b(_extends$1({},nt,{action:"push"}),!0)},replace:function(){return b(_extends$1({},nt,{action:"replace"}),!0)}};return nt}function createRouteBuilder(o,e,s){var a=buildPathDefs(o,getParamDefsOfType("path",e["~internal"].params),e["~internal"].path),d=function(_){_===void 0&&(_={});var _e=s(),nt=_e.arraySeparator,rt=_e.queryStringSerializer,ct=_e.baseUrl,dt=_extends$1({},_);Object.keys(e["~internal"].params).forEach(function(bt){var xt=e["~internal"].params[bt];dt[bt]===void 0&&xt["~internal"].default!==void 0&&(dt[bt]=xt["~internal"].default)});var pt=createLocation({paramCollection:_,paramDefCollection:e["~internal"].params,arraySeparator:nt,queryStringSerializer:rt,pathDefs:a,baseUrl:ct});return buildRoute({routeName:o,params:dt,location:pt,routerContext:_e})};return Object.defineProperty(d,"name",{value:o}),d["~internal"]={type:"RouteBuilder",match:createMatcher({pathDefs:a,params:e["~internal"].params}),pathDefs:a,Route:null},d}function createQueryStringSerializer(o){var e,s;o===void 0&&(o={});var a=(e=o.queryStringArrayFormat)!=null?e:"singleKeyWithBracket",d=(s=o.arraySeparator)!=null?s:",",b=a==="multiKey"||a==="multiKeyWithBracket",_=a==="multiKey"||a==="singleKey"?"":"[]";return{parse:function(nt){for(var rt={},ct=_createForOfIteratorHelperLoose(nt.split("&")),dt;!(dt=ct()).done;){var pt=dt.value,bt=pt.split("="),xt=bt[0],wt=bt[1],Tt=bt.slice(2);if(!(xt===void 0||Tt.length>0)){var Rt=decodeURIComponent(stringUtils.endsWith(xt,_)?xt.slice(0,xt.length-_.length):xt);wt===void 0?rt[Rt]=null:rt[Rt]&&b?rt[Rt]+=""+d+wt:rt[Rt]=wt}}return rt},stringify:function(nt){return Object.keys(nt).map(function(rt){var ct=encodeURIComponent(rt),dt=nt[rt].array?""+ct+_:ct,pt=nt[rt].value;if(pt===null)return dt;if(nt[rt].array&&b){var bt=pt.split(d);return bt.map(function(xt){return dt+"="+xt}).join("&")}return dt+"="+pt}).join("&")}}}function getMatchingRoute(o,e){var s=e.getRoutes,a=e.queryStringSerializer,d=e.arraySeparator,b=s(),_=!1;for(var _e in b){var nt=b[_e]["~internal"].match({routerLocation:o,queryStringSerializer:a,arraySeparator:d});if(nt!==!1){if(nt.numExtraneousParams===0)return{route:b[_e](nt.params),primaryPath:nt.primaryPath};(_===!1||nt.numExtraneousParams<_.numExtraneousParams)&&(_=_extends$1({},nt,{routeName:_e}))}}return _?{route:b[_.routeName](_.params),primaryPath:_.primaryPath}:{route:buildRoute({routeName:!1,params:{},location:o,routerContext:e}),primaryPath:!0}}var startsWith$3=stringUtils.startsWith;function convertToRouterLocationFromHistoryLocation(o,e){return{fullPath:o.pathname,path:startsWith$3(o.pathname,e)?e!=="/"?o.pathname.replace(e,""):o.pathname:void 0,query:o.search?startsWith$3(o.search,"?")?o.search.slice(1):o.search:void 0,state:typeof o.state=="object"&&o.state!==null?o.state.state:void 0}}var splitFirst$1=stringUtils.splitFirst;function getRouteByHref(o,e,s){var a=splitFirst$1(o,"?"),d=a[0],b=a[1],_=convertToRouterLocationFromHistoryLocation({pathname:d,search:b,state:e},s.baseUrl);return getMatchingRoute(_,s)}function createNavigationHandlerManager(o){var e=o.startListening,s=o.stopListening,a=[],d=0;return{add:_,getHandlers:b};function b(){return a.map(function(_e){var nt=_e.handler;return nt})}function _(_e){var nt=d++;return a.push({id:nt,handler:_e}),a.length===1&&e(),rt;function rt(){var ct=a.map(function(dt){var pt=dt.id;return pt}).indexOf(nt);ct>=0&&(a.splice(ct,1),a.length===0&&s())}}}function attemptScrollToTop(o,e){if(o.action==="push"&&typeof window=="object"&&window!==null&&typeof window.scroll=="function"&&e!==!1&&typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string"&&!(navigator.userAgent.indexOf("Node.js")>0||navigator.userAgent.indexOf("jsdom")>0))try{window.scroll(0,0)}catch{}}function serializeStateParams(o,e){var s={};if(o.name)for(var a=Object.keys(o.params).sort(),d=_createForOfIteratorHelperLoose(a),b;!(b=d()).done;){var _=b.value,_e=e[o.name]["~internal"].params[_]["~internal"];if(_e.kind==="state"){var nt=o.params[_];s[_]=_e.valueSerializer.stringify(nt)}}return s}var splitFirst$2=stringUtils.splitFirst;function createRouter(){for(var o,e,s,a,d,b=arguments.length,_=new Array(b),_e=0;_e<b;_e++)_[_e]=arguments[_e];var nt=parseArgs(_),rt=nt.routeDefs,ct=nt.opts,dt=createNavigationHandlerManager({startListening:function(){Tt=wt.listen(function(ao){if(Rt){Rt=!1;return}var hn=convertToRouterLocationFromHistoryLocation(ao.location,pt),fn=ao.action.toLowerCase(),It=getMatchingRoute(hn,an()),Vn=It.route,ln=It.primaryPath;Pn(_extends$1({},Vn,{action:fn}),ln)})},stopListening:function(){return Tt==null?void 0:Tt()}}),pt=(o=ct.baseUrl)!=null?o:"/",bt=(e=(s=ct.arrayFormat)==null?void 0:s.separator)!=null?e:",",xt=(a=ct.queryStringSerializer)!=null?a:createQueryStringSerializer({queryStringArrayFormat:(d=ct.arrayFormat)==null?void 0:d.queryString,arraySeparator:bt}),wt,Tt,Rt=!1,Mt=!1,Et=null,$t=null,Xt=[];Jt(ct.session);var Zt=createRouteBuilderCollection(an),Nt={routes:Zt,session:{push:function(ao,hn){var fn=getRouteByHref(ao,hn,an()),It=fn.route,Vn=fn.primaryPath;return dn(_extends$1({},It,{action:"push"}),Vn)},replace:function(ao,hn){var fn=getRouteByHref(ao,hn,an()),It=fn.route,Vn=fn.primaryPath;return dn(_extends$1({},It,{action:"replace"}),Vn)},back:function(ao){ao===void 0&&(ao=1),wt.go(-ao)},forward:function(ao){ao===void 0&&(ao=1),wt.go(ao)},getInitialRoute:function(){if(!Et){var ao=getMatchingRoute(convertToRouterLocationFromHistoryLocation(wt.location,pt),an());ao.primaryPath||(Mt=!0,ao.route.replace(),ao=getMatchingRoute(convertToRouterLocationFromHistoryLocation(wt.location,pt),an())),Et=ao.route}return Et},reset:function(ao){return Jt(ao)},block:function(ao){Xt.push(ao);var hn=wt.block(function(fn){var It=getMatchingRoute(convertToRouterLocationFromHistoryLocation(fn.location,pt),an()),Vn=It.route,ln=fn.action.toLowerCase();ao({route:_extends$1({},Vn,{action:ln}),retry:fn.retry})});return function(){Xt.splice(Xt.findIndex(function(fn){return fn===ao}),1),hn()}},listen:function(ao){return dt.add(ao)}}};return Nt;function Jt(Vt){Vt===void 0&&(Vt={type:typeof window<"u"&&typeof window.document<"u"?"browser":"memory"}),Et=null,Vt.type==="memory"?wt=createMemoryHistory({initialEntries:Vt.initialEntries,initialIndex:Vt.initialIndex}):Vt.type==="hash"?wt=createHashHistory({window:Vt.window}):wt=createBrowserHistory({window:Vt.window})}function dn(Vt,ao){var hn;if(Xt.length>0){Xt.forEach(function(uo){uo({route:Vt,retry:function(){Vt[Vt.action==="push"?"push":"replace"]()}})});return}var fn=serializeStateParams(Vt,rt);if(!(((hn=$t)==null?void 0:hn.href)===Vt.href&&JSON.stringify(serializeStateParams($t,rt))===JSON.stringify(fn))){Mt?Mt=!1:Pn(Vt,ao),Rt=!0;var It=splitFirst$2(Vt.href,"?"),Vn=It[0],ln=It[1];wt[Vt.action==="replace"?"replace":"push"]({pathname:Vn,search:ln?"?"+ln:"",hash:""},fn?{state:fn}:void 0)}}function Pn(Vt,ao){if(!ao){Vt.replace();return}for(var hn=_createForOfIteratorHelperLoose(dt.getHandlers()),fn;!(fn=hn()).done;){var It=fn.value;It(Vt)}attemptScrollToTop(Vt,ct.scrollToTop),$t=Vt}function an(){return{queryStringSerializer:xt,arraySeparator:bt,navigate:dn,history:wt,routeDefs:rt,getRoutes:function(){return Zt},baseUrl:pt}}}function parseArgs(o){var e=o.length===1?o[0]:o[1],s=o.length===1?{}:o[0];return{routeDefs:e,opts:s}}function createRouteBuilderCollection(o){var e={},s=o(),a=s.routeDefs;for(var d in a){var b=a[d];e[d]=createRouteBuilder(d,b,o)}return e}function defineRoute(){for(var o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];var a=parseArgs$1(e),d={"~internal":{type:"RouteDef",params:a.params,path:a.path},extend:function(){for(var _=arguments.length,_e=new Array(_),nt=0;nt<_;nt++)_e[nt]=arguments[nt];var rt=parseArgs$1(_e),ct=rt.params,dt=rt.path,pt=Object.keys(a.params),bt=Object.keys(ct);return pt.filter(function(xt){return bt.indexOf(xt)>=0}),defineRoute(_extends$1({},ct,a.params),function(xt){var wt,Tt=asArray$1(a.path(Mt(pt))),Rt=asArray$1(dt(Mt(bt)));return(wt=[]).concat.apply(wt,Tt.map(function(Et){return Rt.map(function($t){return Et==="/"?$t:Et+($t==="/"?"":$t)})}));function Mt(Et){var $t={};return Et.forEach(function(Xt){$t[Xt]=xt[Xt]}),$t}})}};return d}function parseArgs$1(o){return o.length===1?{params:{},path:function(){return o[0]}}:{params:o[0],path:o[1]}}function createRouter$1(){for(var o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];var a=parseArgs(e),d=a.opts,b=a.routeDefs,_=createRouter(_extends$1({},d,{scrollToTop:!1}),b),_e=reactExports.createContext(null);return _extends$1({},_,{RouteProvider:nt,useRoute:rt});function nt(ct){var dt=reactExports.useState(_.session.getInitialRoute()),pt=dt[0],bt=dt[1];return reactExports.useLayoutEffect(function(){return _.session.listen(bt)},[]),reactExports.useEffect(function(){attemptScrollToTop(pt,d.scrollToTop)},[pt]),reactExports.createElement(_e.Provider,{value:pt},ct.children)}function rt(){var ct=reactExports.useContext(_e);return ct}}const{RouteProvider,useRoute,routes}=createRouter$1({home:defineRoute("/"),map:defineRoute("/cartes"),test_tinymceditor:defineRoute("/test-tinymceditor"),test_tiptap_editor:defineRoute("/test-tiptap-editor"),personal_data:defineRoute("/donnees-personnelles")}),prEulerianApi=startEulerianAnalytics({domain:"acwg.cartes.gouv.fr",site:{environment:"development",entity:"IGN"}}),{ConsentBannerAndConsentManagement,FooterConsentManagementItem,FooterPersonalDataPolicyItem,useConsent}=createConsentManagement({finalityDescription:()=>({eulerianAnalytics:{title:"Eulerian Analytics",description:["En cliquant sur 'Accepter', vous consentez  l'utilisation des cookies pour nous","aider  amliorer notre site web en collectant et en rapportant des informations","sur votre utilisation grce  Eulerian Analytics. Si vous n'tes pas d'accord, veuillez","cliquer sur 'Refuser'. Votre exprience de navigation ne sera pas affecte."].join(" ")}}),personalDataPolicyLinkProps:routes.personal_data().link,consentCallback:async({finalityConsent:o})=>{const e=await prEulerianApi;o.eulerianAnalytics?(console.log("Enabling eulerian analytics"),e.enable()):(console.log("Disabling eulerian analytics"),e.disable())}}),exceptions=["GPoverviewMap"];function getSameSideOpenedPanel(o,e){var s=[...exceptions,e],a=[];if(o.includes("left")){var d=document.getElementById("position-container-bottom-left"),b=document.getElementById("position-container-top-left");a=[...d.children,...b.children]}if(o.includes("right")){var _=document.getElementById("position-container-bottom-right"),_e=document.getElementById("position-container-top-right");a=[..._.children,..._e.children]}return a.filter(nt=>{var rt=nt.id.match(/(\w+)-[0-9]+/)[1],ct=s.includes(rt),dt=nt.getElementsByTagName("button")[0].getAttribute("aria-pressed");if(dt==="true"&&!ct)return nt})}var PanelManager=function(o,e){var s=getSameSideOpenedPanel(o,e);s.length>0&&s[0].getElementsByTagName("button")[0].click()},Widget={onPanelOpen:function(){PanelManager(this.options.position,this.element.id.match(/(\w+)-[0-9]+/)[1])}};class BaseEvent{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ObjectEventType={PROPERTYCHANGE:"propertychange"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function binarySearch$1(o,e,s){let a,d;s=s||ascending;let b=0,_=o.length,_e=!1;for(;b<_;)a=b+(_-b>>1),d=+s(o[a],e),d<0?b=a+1:(_=a,_e=!d);return _e?b:~b}function ascending(o,e){return o>e?1:o<e?-1:0}function linearFindNearest(o,e,s){if(o[0]<=e)return 0;const a=o.length;if(e<=o[a-1])return a-1;if(typeof s=="function"){for(let d=1;d<a;++d){const b=o[d];if(b===e)return d;if(b<e)return s(e,o[d-1],b)>0?d-1:d}return a-1}if(s>0){for(let d=1;d<a;++d)if(o[d]<e)return d-1;return a-1}if(s<0){for(let d=1;d<a;++d)if(o[d]<=e)return d;return a-1}for(let d=1;d<a;++d){if(o[d]==e)return d;if(o[d]<e)return o[d-1]-e<e-o[d]?d-1:d}return a-1}function reverseSubArray(o,e,s){for(;e<s;){const a=o[e];o[e]=o[s],o[s]=a,++e,--s}}function extend$4(o,e){const s=Array.isArray(e)?e:[e],a=s.length;for(let d=0;d<a;d++)o[o.length]=s[d]}function equals$2(o,e){const s=o.length;if(s!==e.length)return!1;for(let a=0;a<s;a++)if(o[a]!==e[a])return!1;return!0}function isSorted(o,e,s){const a=e||ascending;return o.every(function(d,b){if(b===0)return!0;const _=a(o[b-1],d);return!(_>0||_===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(o){let e=!1,s,a,d;return function(){const b=Array.prototype.slice.call(arguments);return(!e||this!==d||!equals$2(b,a))&&(e=!0,d=this,a=b,s=o.apply(this,arguments)),s}}function toPromise(o){function e(){let s;try{s=o()}catch(a){return Promise.reject(a)}return s instanceof Promise?s:Promise.resolve(s)}return e()}function clear$1(o){for(const e in o)delete o[e]}function isEmpty$1(o){let e;for(e in o)return!1;return!e}class Target extends Disposable{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,s){if(!e||!s)return;const a=this.listeners_||(this.listeners_={}),d=a[e]||(a[e]=[]);d.includes(s)||d.push(s)}dispatchEvent(e){const s=typeof e=="string",a=s?e:e.type,d=this.listeners_&&this.listeners_[a];if(!d)return;const b=s?new BaseEvent(e):e;b.target||(b.target=this.eventTarget_||this);const _=this.dispatching_||(this.dispatching_={}),_e=this.pendingRemovals_||(this.pendingRemovals_={});a in _||(_[a]=0,_e[a]=0),++_[a];let nt;for(let rt=0,ct=d.length;rt<ct;++rt)if("handleEvent"in d[rt]?nt=d[rt].handleEvent(b):nt=d[rt].call(this,b),nt===!1||b.propagationStopped){nt=!1;break}if(--_[a]===0){let rt=_e[a];for(delete _e[a];rt--;)this.removeEventListener(a,VOID);delete _[a]}return nt}disposeInternal(){this.listeners_&&clear$1(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,s){if(!this.listeners_)return;const a=this.listeners_[e];if(!a)return;const d=a.indexOf(s);d!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(a[d]=VOID,++this.pendingRemovals_[e]):(a.splice(d,1),a.length===0&&delete this.listeners_[e]))}}const EventType={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function listen(o,e,s,a,d){if(a&&a!==o&&(s=s.bind(a)),d){const _=s;s=function(){o.removeEventListener(e,s),_.apply(this,arguments)}}const b={target:o,type:e,listener:s};return o.addEventListener(e,s),b}function listenOnce(o,e,s,a){return listen(o,e,s,a,!0)}function unlistenByKey(o){o&&o.target&&(o.target.removeEventListener(o.type,o.listener),clear$1(o))}class Observable extends Target{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType.CHANGE)}getRevision(){return this.revision_}onInternal(e,s){if(Array.isArray(e)){const a=e.length,d=new Array(a);for(let b=0;b<a;++b)d[b]=listen(this,e[b],s);return d}return listen(this,e,s)}onceInternal(e,s){let a;if(Array.isArray(e)){const d=e.length;a=new Array(d);for(let b=0;b<d;++b)a[b]=listenOnce(this,e[b],s)}else a=listenOnce(this,e,s);return s.ol_key=a,a}unInternal(e,s){const a=s.ol_key;if(a)unByKey(a);else if(Array.isArray(e))for(let d=0,b=e.length;d<b;++d)this.removeEventListener(e[d],s);else this.removeEventListener(e,s)}}Observable.prototype.on;Observable.prototype.once;Observable.prototype.un;function unByKey(o){if(Array.isArray(o))for(let e=0,s=o.length;e<s;++e)unlistenByKey(o[e]);else unlistenByKey(o)}function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(o){return o.ol_uid||(o.ol_uid=String(++uidCounter_))}class ObjectEvent extends BaseEvent{constructor(e,s,a){super(e),this.key=s,this.oldValue=a}}class BaseObject extends Observable{constructor(e){super(),this.on,this.once,this.un,getUid(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let s;return this.values_&&this.values_.hasOwnProperty(e)&&(s=this.values_[e]),s}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,s){let a;a=`change:${e}`,this.hasListener(a)&&this.dispatchEvent(new ObjectEvent(a,e,s)),a=ObjectEventType.PROPERTYCHANGE,this.hasListener(a)&&this.dispatchEvent(new ObjectEvent(a,e,s))}addChangeListener(e,s){this.addEventListener(`change:${e}`,s)}removeChangeListener(e,s){this.removeEventListener(`change:${e}`,s)}set(e,s,a){const d=this.values_||(this.values_={});if(a)d[e]=s;else{const b=d[e];d[e]=s,b!==s&&this.notify(e,b)}}setProperties(e,s){for(const a in e)this.set(a,e[a],s)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,s){if(this.values_&&e in this.values_){const a=this.values_[e];delete this.values_[e],isEmpty$1(this.values_)&&(this.values_=null),s||this.notify(e,a)}}}const MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ua=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",FIREFOX=ua.includes("firefox"),SAFARI=ua.includes("safari")&&!ua.includes("chrom");SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua));const WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio<"u"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image<"u"&&Image.prototype.decode,PASSIVE_EVENT_LISTENERS=function(){let o=!1;try{const e=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return o}();function createCanvasContext2D(o,e,s,a){let d;return s&&s.length?d=s.shift():WORKER_OFFSCREEN_CANVAS?d=new OffscreenCanvas(o||300,e||300):d=document.createElement("canvas"),o&&(d.width=o),e&&(d.height=e),d.getContext("2d",a)}function releaseCanvas(o){const e=o.canvas;e.width=1,e.height=1,o.clearRect(0,0,1,1)}function outerWidth(o){let e=o.offsetWidth;const s=getComputedStyle(o);return e+=parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),e}function outerHeight(o){let e=o.offsetHeight;const s=getComputedStyle(o);return e+=parseInt(s.marginTop,10)+parseInt(s.marginBottom,10),e}function replaceNode(o,e){const s=e.parentNode;s&&s.replaceChild(o,e)}function removeNode(o){return o&&o.parentNode?o.parentNode.removeChild(o):null}function removeChildren(o){for(;o.lastChild;)o.removeChild(o.lastChild)}function replaceChildren(o,e){const s=o.childNodes;for(let a=0;;++a){const d=s[a],b=e[a];if(!d&&!b)break;if(d!==b){if(!d){o.appendChild(b);continue}if(!b){o.removeChild(d),--a;continue}o.insertBefore(b,d)}}}class Control extends BaseObject{constructor(e){super();const s=e.element;s&&!e.target&&!s.style.pointerEvents&&(s.style.pointerEvents="auto"),this.element=s||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){removeNode(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&removeNode(this.element);for(let s=0,a=this.listenerKeys.length;s<a;++s)unlistenByKey(this.listenerKeys[s]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var checkDsfr=function(){var o=getComputedStyle(document.documentElement),e=o.getPropertyValue("--blue-france-sun-113-625");return e!==""},ControlExtended=class extends Control{constructor(e){super(e)}setPosition(e){if(this.getMap()){var s=new PositionFactory(this);s.set(e)}}updatePosition(e){if(this.getMap()){var s=new PositionFactory(this);s.update(e)}}};const ANCHORS=["top-left","top-right","bottom-left","bottom-right"];var zw,Xae,qz,rie;class PositionFactory{constructor(e){lu(this,zw);return this.caller=e,this.container=null,Mu(this,zw,qz).call(this,"top-left"),Mu(this,zw,qz).call(this,"top-right"),Mu(this,zw,qz).call(this,"bottom-left"),Mu(this,zw,qz).call(this,"bottom-right"),this}set(e){ANCHORS.includes(e.toLowerCase())&&(Mu(this,zw,rie).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}update(e){ANCHORS.includes(e.toLowerCase())&&Mu(this,zw,rie).call(this,e,!0)}}zw=new WeakSet,Xae=function(e){var s=this.container.children["position-container-"+e];return!!s},qz=function(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!Mu(this,zw,Xae).call(this,e)){var s=document.createElement("div");s.id="position-container-"+e,s.className="position position-container-"+e,this.container.appendChild(s)}},rie=function(e,s){var a=this;const d=ct=>{var dt=a.container.children["position-container-"+ct];return dt.children.length},b=ct=>{var dt=a.container.children["position-container-"+ct],pt=dt.offsetWidth;return pt},_=ct=>{var dt=a.container.children["position-container-"+ct],pt=dt.offsetHeight;if(s){ct.includes("top")&&(pt=0);for(let bt=0;bt<dt.children.length;bt++){if(dt.children[bt].id===a.caller.element.id){pt=ct.includes("bottom")?pt-a.caller.element.offsetHeight:pt*-1;break}pt-=dt.children[bt].offsetHeight}}return pt},_e=ct=>{ct.style.top="unset",ct.style.bottom="unset",ct.style.left="unset",ct.style.right="unset"};_e(this.caller.element),this.caller.element.style.position="unset";var nt=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(nt.length!==0){var rt=0;nt.forEach(ct=>{if(ct.nodeName.toLowerCase()==="dialog"){switch(_e(ct),e.toLowerCase()){case"top-left":checkDsfr()?ct.style.top="0px":ct.style.top=d(e)?_(e)+"px":"0px",ct.style.left=b(e)+rt+"px";break;case"bottom-left":checkDsfr()?ct.style.top="0px":ct.style.bottom=d(e)?_(e)+"px":"0px",ct.style.left=b(e)+rt+"px";break;case"top-right":checkDsfr()?ct.style.top="0px":ct.style.top=d(e)?_(e)+"px":"0px",ct.style.right=b(e)+rt+"px";break;case"bottom-right":checkDsfr()?ct.style.top="0px":ct.style.bottom=d(e)?_(e)+"px":"0px",ct.style.right=b(e)+rt+"px";break}rt+=ct.offsetWidth}})}};var Helper$1={detectSupport:function(){var o=!0,e=window.navigator.userAgent.toLowerCase();return(e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1||e.indexOf("android")!==-1||e.indexOf("mobile")!==-1||e.indexOf("blackberry")!==-1||e.indexOf("tablet")!==-1||e.indexOf("phone")!==-1||e.indexOf("touch")!==-1)&&(o=!1),(e.indexOf("msie")!==-1||e.indexOf("trident")!==-1)&&(o=!0),o},assign:function(o,e){o=o||{};for(var s in e)e.hasOwnProperty(s)&&(o[s]=e[s]);return o},mergeParams:function(o,e,s){if(!(typeof o>"u"||typeof e>"u")){typeof s>"u"&&(s=!0);for(var a in e)e.hasOwnProperty(a)&&(typeof e[a]=="object"?o.hasOwnProperty(a)?this.mergeParams(o[a],e[a],s):o[a]=e[a]:o.hasOwnProperty(a)?s&&(o[a]=e[a]):o[a]=e[a])}}},SelectorID={generate:function(){var o=Math.floor(Date.now());return function(){return o++}}(),name:function(o){var e=null,s=o.lastIndexOf("-");return s===-1?e=o:e=o.substring(0,s),e},index:function(o){var e=null,s=this.name(o),a=s.lastIndexOf("_");return a!==-1&&(e=s.substring(a+1)),e},uuid:function(o){var e=null,s=o.lastIndexOf("-");return s!==-1&&(e=parseInt(o.substring(s+1),10)),e}},loglevel={exports:{}};(function(o){(function(e,s){o.exports?o.exports=s():e.log=s()})(commonjsGlobal,function(){var e=function(){},s="undefined",a=typeof window!==s&&typeof window.navigator!==s&&/Trident\/|MSIE /.test(window.navigator.userAgent),d=["trace","debug","info","warn","error"],b={},_=null;function _e(wt,Tt){var Rt=wt[Tt];if(typeof Rt.bind=="function")return Rt.bind(wt);try{return Function.prototype.bind.call(Rt,wt)}catch{return function(){return Function.prototype.apply.apply(Rt,[wt,arguments])}}}function nt(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function rt(wt){return wt==="debug"&&(wt="log"),typeof console===s?!1:wt==="trace"&&a?nt:console[wt]!==void 0?_e(console,wt):console.log!==void 0?_e(console,"log"):e}function ct(){for(var wt=this.getLevel(),Tt=0;Tt<d.length;Tt++){var Rt=d[Tt];this[Rt]=Tt<wt?e:this.methodFactory(Rt,wt,this.name)}if(this.log=this.debug,typeof console===s&&wt<this.levels.SILENT)return"No console available for logging"}function dt(wt){return function(){typeof console!==s&&(ct.call(this),this[wt].apply(this,arguments))}}function pt(wt,Tt,Rt){return rt(wt)||dt.apply(this,arguments)}function bt(wt,Tt){var Rt=this,Mt,Et,$t,Xt="loglevel";typeof wt=="string"?Xt+=":"+wt:typeof wt=="symbol"&&(Xt=void 0);function Zt(an){var Vt=(d[an]||"silent").toUpperCase();if(!(typeof window===s||!Xt)){try{window.localStorage[Xt]=Vt;return}catch{}try{window.document.cookie=encodeURIComponent(Xt)+"="+Vt+";"}catch{}}}function Nt(){var an;if(!(typeof window===s||!Xt)){try{an=window.localStorage[Xt]}catch{}if(typeof an===s)try{var Vt=window.document.cookie,ao=encodeURIComponent(Xt),hn=Vt.indexOf(ao+"=");hn!==-1&&(an=/^([^;]+)/.exec(Vt.slice(hn+ao.length+1))[1])}catch{}return Rt.levels[an]===void 0&&(an=void 0),an}}function Jt(){if(!(typeof window===s||!Xt)){try{window.localStorage.removeItem(Xt)}catch{}try{window.document.cookie=encodeURIComponent(Xt)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function dn(an){var Vt=an;if(typeof Vt=="string"&&Rt.levels[Vt.toUpperCase()]!==void 0&&(Vt=Rt.levels[Vt.toUpperCase()]),typeof Vt=="number"&&Vt>=0&&Vt<=Rt.levels.SILENT)return Vt;throw new TypeError("log.setLevel() called with invalid level: "+an)}Rt.name=wt,Rt.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Rt.methodFactory=Tt||pt,Rt.getLevel=function(){return $t??Et??Mt},Rt.setLevel=function(an,Vt){return $t=dn(an),Vt!==!1&&Zt($t),ct.call(Rt)},Rt.setDefaultLevel=function(an){Et=dn(an),Nt()||Rt.setLevel(an,!1)},Rt.resetLevel=function(){$t=null,Jt(),ct.call(Rt)},Rt.enableAll=function(an){Rt.setLevel(Rt.levels.TRACE,an)},Rt.disableAll=function(an){Rt.setLevel(Rt.levels.SILENT,an)},Rt.rebuild=function(){if(_!==Rt&&(Mt=dn(_.getLevel())),ct.call(Rt),_===Rt)for(var an in b)b[an].rebuild()},Mt=dn(_?_.getLevel():"WARN");var Pn=Nt();Pn!=null&&($t=dn(Pn)),ct.call(Rt)}_=new bt,_.getLogger=function(Tt){if(typeof Tt!="symbol"&&typeof Tt!="string"||Tt==="")throw new TypeError("You must supply a name when creating a logger.");var Rt=b[Tt];return Rt||(Rt=b[Tt]=new bt(Tt,_.methodFactory)),Rt};var xt=typeof window!==s?window.log:void 0;return _.noConflict=function(){return typeof window!==s&&window.log===_&&(window.log=xt),_},_.getLoggers=function(){return b},_.default=_,_})})(loglevel);var loglevelExports=loglevel.exports,LoggerByDefault$1={getLogger:function(o){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var s=o||"default";return loglevelExports.getLogger(s)},disableAll:function(){var o=loglevelExports.getLoggers();for(const e in o)Object.hasOwnProperty.call(o,e)&&o[e].disableAll()},enableAll:function(){var o=loglevelExports.getLoggers();for(const e in o)Object.hasOwnProperty.call(o,e)&&o[e].enableAll()}};window.Gp&&(window.Gp.Logger=LoggerByDefault$1);LoggerByDefault$1.getLogger("draggable");var Draggable={dragElement:function(o,e,s){let a=0,d=0,b=0,_=0,_e=0,nt=0;e?e.addEventListener("mousedown",dt,!0):o.addEventListener("mousedown",dt,!0);var rt,ct={bottom:0,left:0,right:0,top:0};function dt(xt){xt=xt||window.event,xt.preventDefault(),a=xt.clientX,d=xt.clientY,rt=o.getBoundingClientRect();const wt=s.getBoundingClientRect();ct={bottom:wt.bottom,left:wt.left,right:wt.right,top:wt.top},document.addEventListener("mouseup",pt,!0),document.addEventListener("mousemove",bt,!0)}function pt(){_e-=b,nt-=_,document.removeEventListener("mouseup",pt,!0),document.removeEventListener("mousemove",bt,!0)}function bt(xt){xt=xt||window.event;let wt=xt.clientX,Tt=xt.clientY,Rt=b,Mt=_;b=a-wt,_=d-Tt;var Et=rt.left-b,$t=rt.top-_;if(Et<ct.left||$t<ct.top||Et+rt.width>ct.right||$t+rt.height>ct.bottom)b=Rt,_=Mt;else{let Xt=_e-b,Zt=nt-_;o.style.transform="translate("+Xt+"px,"+Zt+"px)"}}}},Config$1={configuration:{},isConfigLoaded:function(){if(this.configuration&&Object.keys(this.configuration).length!==0)return!0;var o=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{};return o.Gp&&o.Gp.Config&&o.Gp.Config.layers&&Object.keys(o.Gp.Config.layers).length!==0?(this.configuration=o.Gp.Config,!0):!1}};const METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Projection$1=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$2=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection$1{constructor(e){super({code:e,units:"m",extent:EXTENT$2,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(s,a){return s/Math.cosh(a[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(o,e,s){const a=o.length;s=s>1?s:2,e===void 0&&(s>2?e=o.slice():e=new Array(a));for(let d=0;d<a;d+=s){e[d]=HALF_SIZE*o[d]/180;let b=RADIUS$1*Math.log(Math.tan(Math.PI*(+o[d+1]+90)/360));b>MAX_SAFE_Y?b=MAX_SAFE_Y:b<-MAX_SAFE_Y&&(b=-MAX_SAFE_Y),e[d+1]=b}return e}function toEPSG4326(o,e,s){const a=o.length;s=s>1?s:2,e===void 0&&(s>2?e=o.slice():e=new Array(a));for(let d=0;d<a;d+=s)e[d]=180*o[d]/HALF_SIZE,e[d+1]=360*Math.atan(Math.exp(o[d+1]/RADIUS$1))/Math.PI-90;return e}const RADIUS=6378137,EXTENT$1=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection$1{constructor(e,s){super({code:e,units:"degrees",extent:EXTENT$1,axisOrientation:s,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT$1})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache$1={};function get$5(o){return cache$1[o]||cache$1[o.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$3(o,e){cache$1[o]=e}let transforms={};function add$2(o,e,s){const a=o.getCode(),d=e.getCode();a in transforms||(transforms[a]={}),transforms[a][d]=s}function get$4(o,e){let s;return o in transforms&&e in transforms[o]&&(s=transforms[o][e]),s}const Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(o){const e=createEmpty();for(let s=0,a=o.length;s<a;++s)extendCoordinate(e,o[s]);return e}function _boundingExtentXYs(o,e,s){const a=Math.min.apply(null,o),d=Math.min.apply(null,e),b=Math.max.apply(null,o),_=Math.max.apply(null,e);return createOrUpdate$2(a,d,b,_,s)}function buffer(o,e,s){return s?(s[0]=o[0]-e,s[1]=o[1]-e,s[2]=o[2]+e,s[3]=o[3]+e,s):[o[0]-e,o[1]-e,o[2]+e,o[3]+e]}function clone$1(o,e){return e?(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e):o.slice()}function closestSquaredDistanceXY(o,e,s){let a,d;return e<o[0]?a=o[0]-e:o[2]<e?a=e-o[2]:a=0,s<o[1]?d=o[1]-s:o[3]<s?d=s-o[3]:d=0,a*a+d*d}function containsCoordinate(o,e){return containsXY(o,e[0],e[1])}function containsExtent(o,e){return o[0]<=e[0]&&e[2]<=o[2]&&o[1]<=e[1]&&e[3]<=o[3]}function containsXY(o,e,s){return o[0]<=e&&e<=o[2]&&o[1]<=s&&s<=o[3]}function coordinateRelationship(o,e){const s=o[0],a=o[1],d=o[2],b=o[3],_=e[0],_e=e[1];let nt=Relationship.UNKNOWN;return _<s?nt=nt|Relationship.LEFT:_>d&&(nt=nt|Relationship.RIGHT),_e<a?nt=nt|Relationship.BELOW:_e>b&&(nt=nt|Relationship.ABOVE),nt===Relationship.UNKNOWN&&(nt=Relationship.INTERSECTING),nt}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(o,e,s,a,d){return d?(d[0]=o,d[1]=e,d[2]=s,d[3]=a,d):[o,e,s,a]}function createOrUpdateEmpty(o){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,o)}function createOrUpdateFromCoordinate(o,e){const s=o[0],a=o[1];return createOrUpdate$2(s,a,s,a,e)}function createOrUpdateFromFlatCoordinates(o,e,s,a,d){const b=createOrUpdateEmpty(d);return extendFlatCoordinates(b,o,e,s,a)}function equals$1(o,e){return o[0]==e[0]&&o[2]==e[2]&&o[1]==e[1]&&o[3]==e[3]}function extend$3(o,e){return e[0]<o[0]&&(o[0]=e[0]),e[2]>o[2]&&(o[2]=e[2]),e[1]<o[1]&&(o[1]=e[1]),e[3]>o[3]&&(o[3]=e[3]),o}function extendCoordinate(o,e){e[0]<o[0]&&(o[0]=e[0]),e[0]>o[2]&&(o[2]=e[0]),e[1]<o[1]&&(o[1]=e[1]),e[1]>o[3]&&(o[3]=e[1])}function extendFlatCoordinates(o,e,s,a,d){for(;s<a;s+=d)extendXY(o,e[s],e[s+1]);return o}function extendXY(o,e,s){o[0]=Math.min(o[0],e),o[1]=Math.min(o[1],s),o[2]=Math.max(o[2],e),o[3]=Math.max(o[3],s)}function forEachCorner(o,e){let s;return s=e(getBottomLeft(o)),s||(s=e(getBottomRight(o)),s)||(s=e(getTopRight(o)),s)||(s=e(getTopLeft(o)),s)?s:!1}function getArea(o){let e=0;return isEmpty(o)||(e=getWidth(o)*getHeight(o)),e}function getBottomLeft(o){return[o[0],o[1]]}function getBottomRight(o){return[o[2],o[1]]}function getCenter(o){return[(o[0]+o[2])/2,(o[1]+o[3])/2]}function getCorner(o,e){let s;if(e==="bottom-left")s=getBottomLeft(o);else if(e==="bottom-right")s=getBottomRight(o);else if(e==="top-left")s=getTopLeft(o);else if(e==="top-right")s=getTopRight(o);else throw new Error("Invalid corner");return s}function getForViewAndSize(o,e,s,a,d){const[b,_,_e,nt,rt,ct,dt,pt]=getRotatedViewport(o,e,s,a);return createOrUpdate$2(Math.min(b,_e,rt,dt),Math.min(_,nt,ct,pt),Math.max(b,_e,rt,dt),Math.max(_,nt,ct,pt),d)}function getRotatedViewport(o,e,s,a){const d=e*a[0]/2,b=e*a[1]/2,_=Math.cos(s),_e=Math.sin(s),nt=d*_,rt=d*_e,ct=b*_,dt=b*_e,pt=o[0],bt=o[1];return[pt-nt+dt,bt-rt-ct,pt-nt-dt,bt-rt+ct,pt+nt-dt,bt+rt+ct,pt+nt+dt,bt+rt-ct,pt-nt+dt,bt-rt-ct]}function getHeight(o){return o[3]-o[1]}function getIntersection(o,e,s){const a=s||createEmpty();return intersects$1(o,e)?(o[0]>e[0]?a[0]=o[0]:a[0]=e[0],o[1]>e[1]?a[1]=o[1]:a[1]=e[1],o[2]<e[2]?a[2]=o[2]:a[2]=e[2],o[3]<e[3]?a[3]=o[3]:a[3]=e[3]):createOrUpdateEmpty(a),a}function getTopLeft(o){return[o[0],o[3]]}function getTopRight(o){return[o[2],o[3]]}function getWidth(o){return o[2]-o[0]}function intersects$1(o,e){return o[0]<=e[2]&&o[2]>=e[0]&&o[1]<=e[3]&&o[3]>=e[1]}function isEmpty(o){return o[2]<o[0]||o[3]<o[1]}function returnOrUpdate(o,e){return e?(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e):o}function intersectsSegment(o,e,s){let a=!1;const d=coordinateRelationship(o,e),b=coordinateRelationship(o,s);if(d===Relationship.INTERSECTING||b===Relationship.INTERSECTING)a=!0;else{const _=o[0],_e=o[1],nt=o[2],rt=o[3],ct=e[0],dt=e[1],pt=s[0],bt=s[1],xt=(bt-dt)/(pt-ct);let wt,Tt;b&Relationship.ABOVE&&!(d&Relationship.ABOVE)&&(wt=pt-(bt-rt)/xt,a=wt>=_&&wt<=nt),!a&&b&Relationship.RIGHT&&!(d&Relationship.RIGHT)&&(Tt=bt-(pt-nt)*xt,a=Tt>=_e&&Tt<=rt),!a&&b&Relationship.BELOW&&!(d&Relationship.BELOW)&&(wt=pt-(bt-_e)/xt,a=wt>=_&&wt<=nt),!a&&b&Relationship.LEFT&&!(d&Relationship.LEFT)&&(Tt=bt-(pt-_)*xt,a=Tt>=_e&&Tt<=rt)}return a}function applyTransform(o,e,s,a){if(isEmpty(o))return createOrUpdateEmpty(s);let d=[];d=[o[0],o[1],o[2],o[1],o[2],o[3],o[0],o[3]],e(d,d,2);const b=[],_=[];for(let _e=0,nt=d.length;_e<nt;_e+=2)b.push(d[_e]),_.push(d[_e+1]);return _boundingExtentXYs(b,_,s)}function wrapX$2(o,e){const s=e.getExtent(),a=getCenter(o);if(e.canWrapX()&&(a[0]<s[0]||a[0]>=s[2])){const d=getWidth(s),_=Math.floor((a[0]-s[0])/d)*d;o[0]-=_,o[2]-=_}return o}function wrapAndSliceX(o,e){if(e.canWrapX()){const s=e.getExtent();if(!isFinite(o[0])||!isFinite(o[2]))return[[s[0],o[1],s[2],o[3]]];wrapX$2(o,e);const a=getWidth(s);if(getWidth(o)>a)return[[s[0],o[1],s[2],o[3]]];if(o[0]<s[0])return[[o[0]+a,o[1],s[2],o[3]],[s[0],o[1],o[2],o[3]]];if(o[2]>s[2])return[[o[0],o[1],s[2],o[3]],[s[0],o[1],o[2]-a,o[3]]]}return[o]}function clamp(o,e,s){return Math.min(Math.max(o,e),s)}function squaredSegmentDistance(o,e,s,a,d,b){const _=d-s,_e=b-a;if(_!==0||_e!==0){const nt=((o-s)*_+(e-a)*_e)/(_*_+_e*_e);nt>1?(s=d,a=b):nt>0&&(s+=_*nt,a+=_e*nt)}return squaredDistance$1(o,e,s,a)}function squaredDistance$1(o,e,s,a){const d=s-o,b=a-e;return d*d+b*b}function solveLinearSystem(o){const e=o.length;for(let a=0;a<e;a++){let d=a,b=Math.abs(o[a][a]);for(let _e=a+1;_e<e;_e++){const nt=Math.abs(o[_e][a]);nt>b&&(b=nt,d=_e)}if(b===0)return null;const _=o[d];o[d]=o[a],o[a]=_;for(let _e=a+1;_e<e;_e++){const nt=-o[_e][a]/o[a][a];for(let rt=a;rt<e+1;rt++)a==rt?o[_e][rt]=0:o[_e][rt]+=nt*o[a][rt]}}const s=new Array(e);for(let a=e-1;a>=0;a--){s[a]=o[a][e]/o[a][a];for(let d=a-1;d>=0;d--)o[d][e]-=o[d][a]*s[a]}return s}function toRadians(o){return o*Math.PI/180}function modulo(o,e){const s=o%e;return s*e<0?s+e:s}function lerp(o,e,s){return o+s*(e-o)}function toFixed(o,e){const s=Math.pow(10,e);return Math.round(o*s)/s}function round(o,e){return Math.round(toFixed(o,e))}function floor(o,e){return Math.floor(toFixed(o,e))}function ceil(o,e){return Math.ceil(toFixed(o,e))}function compareVersions(o,e){const s=(""+o).split("."),a=(""+e).split(".");for(let d=0;d<Math.max(s.length,a.length);d++){const b=parseInt(s[d]||"0",10),_=parseInt(a[d]||"0",10);if(b>_)return 1;if(_>b)return-1}return 0}function add$1(o,e){return o[0]+=+e[0],o[1]+=+e[1],o}function closestOnSegment(o,e){const s=o[0],a=o[1],d=e[0],b=e[1],_=d[0],_e=d[1],nt=b[0],rt=b[1],ct=nt-_,dt=rt-_e,pt=ct===0&&dt===0?0:(ct*(s-_)+dt*(a-_e))/(ct*ct+dt*dt||0);let bt,xt;return pt<=0?(bt=_,xt=_e):pt>=1?(bt=nt,xt=rt):(bt=_+pt*ct,xt=_e+pt*dt),[bt,xt]}function equals(o,e){let s=!0;for(let a=o.length-1;a>=0;--a)if(o[a]!=e[a]){s=!1;break}return s}function rotate$1(o,e){const s=Math.cos(e),a=Math.sin(e),d=o[0]*s-o[1]*a,b=o[1]*s+o[0]*a;return o[0]=d,o[1]=b,o}function scale$3(o,e){return o[0]*=e,o[1]*=e,o}function squaredDistance(o,e){const s=o[0]-e[0],a=o[1]-e[1];return s*s+a*a}function distance(o,e){return Math.sqrt(squaredDistance(o,e))}function squaredDistanceToSegment(o,e){return squaredDistance(o,closestOnSegment(o,e))}function wrapX$1(o,e){if(e.canWrapX()){const s=getWidth(e.getExtent()),a=getWorldsAway(o,e,s);a&&(o[0]-=a*s)}return o}function getWorldsAway(o,e,s){const a=e.getExtent();let d=0;return e.canWrapX()&&(o[0]<a[0]||o[0]>a[2])&&(s=s||getWidth(a),d=Math.floor((o[0]-a[0])/s)),d}const DEFAULT_RADIUS=63710088e-1;function getDistance(o,e,s){s=s||DEFAULT_RADIUS;const a=toRadians(o[1]),d=toRadians(e[1]),b=(d-a)/2,_=toRadians(e[0]-o[0])/2,_e=Math.sin(b)*Math.sin(b)+Math.sin(_)*Math.sin(_)*Math.cos(a)*Math.cos(d);return 2*s*Math.atan2(Math.sqrt(_e),Math.sqrt(1-_e))}function warn(...o){console.warn(...o)}let showCoordinateWarning=!0;function disableCoordinateWarning(o){showCoordinateWarning=!1}function cloneTransform(o,e){if(e!==void 0){for(let s=0,a=o.length;s<a;++s)e[s]=o[s];e=e}else e=o.slice();return e}function identityTransform(o,e){if(e!==void 0&&o!==e){for(let s=0,a=o.length;s<a;++s)e[s]=o[s];o=e}return o}function addProjection(o){add$3(o.getCode(),o),add$2(o,o,cloneTransform)}function addProjections(o){o.forEach(addProjection)}function get$3(o){return typeof o=="string"?get$5(o):o||null}function getPointResolution(o,e,s,a){o=get$3(o);let d;const b=o.getPointResolutionFunc();if(b){if(d=b(e,s),a&&a!==o.getUnits()){const _=o.getMetersPerUnit();_&&(d=d*_/METERS_PER_UNIT$1[a])}}else{const _=o.getUnits();if(_=="degrees"&&!a||a=="degrees")d=e;else{const _e=getTransformFromProjections(o,get$3("EPSG:4326"));if(_e===identityTransform&&_!=="degrees")d=e*o.getMetersPerUnit();else{let rt=[s[0]-e/2,s[1],s[0]+e/2,s[1],s[0],s[1]-e/2,s[0],s[1]+e/2];rt=_e(rt,rt,2);const ct=getDistance(rt.slice(0,2),rt.slice(2,4)),dt=getDistance(rt.slice(4,6),rt.slice(6,8));d=(ct+dt)/2}const nt=a?METERS_PER_UNIT$1[a]:o.getMetersPerUnit();nt!==void 0&&(d/=nt)}}return d}function addEquivalentProjections(o){addProjections(o),o.forEach(function(e){o.forEach(function(s){e!==s&&add$2(e,s,cloneTransform)})})}function addEquivalentTransforms(o,e,s,a){o.forEach(function(d){e.forEach(function(b){add$2(d,b,s),add$2(b,d,a)})})}function createProjection(o,e){return o?typeof o=="string"?get$3(o):o:get$3(e)}function createTransformFromCoordinateTransform(o){return function(e,s,a){const d=e.length;a=a!==void 0?a:2,s=s!==void 0?s:new Array(d);for(let b=0;b<d;b+=a){const _=o(e.slice(b,b+a)),_e=_.length;for(let nt=0,rt=a;nt<rt;++nt)s[b+nt]=nt>=_e?e[b+nt]:_[nt]}return s}}function addCoordinateTransforms(o,e,s,a){const d=get$3(o),b=get$3(e);add$2(d,b,createTransformFromCoordinateTransform(s)),add$2(b,d,createTransformFromCoordinateTransform(a))}function fromLonLat(o,e){return disableCoordinateWarning(),transform$1(o,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function equivalent(o,e){if(o===e)return!0;const s=o.getUnits()===e.getUnits();return(o.getCode()===e.getCode()||getTransformFromProjections(o,e)===cloneTransform)&&s}function getTransformFromProjections(o,e){const s=o.getCode(),a=e.getCode();let d=get$4(s,a);return d||(d=identityTransform),d}function getTransform(o,e){const s=get$3(o),a=get$3(e);return getTransformFromProjections(s,a)}function transform$1(o,e,s){return getTransform(e,s)(o,void 0,o.length)}function transformExtent(o,e,s,a){const d=getTransform(e,s);return applyTransform(o,d,void 0)}function toUserCoordinate(o,e){return o}function fromUserCoordinate(o,e){return showCoordinateWarning&&!equals(o,[0,0])&&o[0]>=-180&&o[0]<=180&&o[1]>=-90&&o[1]<=90&&(showCoordinateWarning=!1,warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),o}function toUserExtent(o,e){return o}function fromUserExtent(o,e){return o}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();const LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function assert(o,e){if(!o)throw new Error(e)}class BaseLayer extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const s=Object.assign({},e);typeof e.properties=="object"&&(delete s.properties,Object.assign(s,e.properties)),s[LayerProperty.OPACITY]=e.opacity!==void 0?e.opacity:1,assert(typeof s[LayerProperty.OPACITY]=="number","Layer opacity must be a number"),s[LayerProperty.VISIBLE]=e.visible!==void 0?e.visible:!0,s[LayerProperty.Z_INDEX]=e.zIndex,s[LayerProperty.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,s[LayerProperty.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,s[LayerProperty.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,s[LayerProperty.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=s.className!==void 0?s.className:"ol-layer",delete s.className,this.setProperties(s),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const s=this.state_||{layer:this,managed:e===void 0?!0:e},a=this.getZIndex();return s.opacity=clamp(Math.round(this.getOpacity()*100)/100,0,1),s.visible=this.getVisible(),s.extent=this.getExtent(),s.zIndex=a===void 0&&!s.managed?1/0:a,s.maxResolution=this.getMaxResolution(),s.minResolution=Math.max(this.getMinResolution(),0),s.minZoom=this.getMinZoom(),s.maxZoom=this.getMaxZoom(),this.state_=s,s}getLayersArray(e){return abstract()}getLayerStatesArray(e){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(LayerProperty.EXTENT,e)}setMaxResolution(e){this.set(LayerProperty.MAX_RESOLUTION,e)}setMinResolution(e){this.set(LayerProperty.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(LayerProperty.MAX_ZOOM,e)}setMinZoom(e){this.set(LayerProperty.MIN_ZOOM,e)}setOpacity(e){assert(typeof e=="number","Layer opacity must be a number"),this.set(LayerProperty.OPACITY,e)}setVisible(e){this.set(LayerProperty.VISIBLE,e)}setZIndex(e){this.set(LayerProperty.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const RenderEventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ViewHint={ANIMATING:0,INTERACTING:1},ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256;function createExtent(o,e,s){return function(a,d,b,_,_e){if(!a)return;if(!d&&!e)return a;const nt=e?0:b[0]*d,rt=e?0:b[1]*d,ct=_e?_e[0]:0,dt=_e?_e[1]:0;let pt=o[0]+nt/2+ct,bt=o[2]-nt/2+ct,xt=o[1]+rt/2+dt,wt=o[3]-rt/2+dt;pt>bt&&(pt=(bt+pt)/2,bt=pt),xt>wt&&(xt=(wt+xt)/2,wt=xt);let Tt=clamp(a[0],pt,bt),Rt=clamp(a[1],xt,wt);if(_&&s&&d){const Mt=30*d;Tt+=-Mt*Math.log(1+Math.max(0,pt-a[0])/Mt)+Mt*Math.log(1+Math.max(0,a[0]-bt)/Mt),Rt+=-Mt*Math.log(1+Math.max(0,xt-a[1])/Mt)+Mt*Math.log(1+Math.max(0,a[1]-wt)/Mt)}return[Tt,Rt]}}function none$2(o){return o}function getViewportClampedResolution(o,e,s,a){const d=getWidth(e)/s[0],b=getHeight(e)/s[1];return a?Math.min(o,Math.max(d,b)):Math.min(o,Math.min(d,b))}function getSmoothClampedResolution(o,e,s){let a=Math.min(o,e);const d=50;return a*=Math.log(1+d*Math.max(0,o/e-1))/d+1,s&&(a=Math.max(a,s),a/=Math.log(1+d*Math.max(0,s/o-1))/d+1),clamp(a,s/2,e*2)}function createSnapToResolutions(o,e,s,a){return e=e!==void 0?e:!0,function(d,b,_,_e){if(d!==void 0){const nt=o[0],rt=o[o.length-1],ct=s?getViewportClampedResolution(nt,s,_,a):nt;if(_e)return e?getSmoothClampedResolution(d,ct,rt):clamp(d,rt,ct);const dt=Math.min(ct,d),pt=Math.floor(linearFindNearest(o,dt,b));return o[pt]>ct&&pt<o.length-1?o[pt+1]:o[pt]}}}function createSnapToPower(o,e,s,a,d,b){return a=a!==void 0?a:!0,s=s!==void 0?s:0,function(_,_e,nt,rt){if(_!==void 0){const ct=d?getViewportClampedResolution(e,d,nt,b):e;if(rt)return a?getSmoothClampedResolution(_,ct,s):clamp(_,s,ct);const dt=1e-9,pt=Math.ceil(Math.log(e/ct)/Math.log(o)-dt),bt=-_e*(.5-dt)+.5,xt=Math.min(ct,_),wt=Math.floor(Math.log(e/xt)/Math.log(o)+bt),Tt=Math.max(pt,wt),Rt=e/Math.pow(o,Tt);return clamp(Rt,s,ct)}}}function createMinMaxResolution(o,e,s,a,d){return s=s!==void 0?s:!0,function(b,_,_e,nt){if(b!==void 0){const rt=a?getViewportClampedResolution(o,a,_e,d):o;return!s||!nt?clamp(b,e,rt):getSmoothClampedResolution(b,rt,e)}}}function disable(o){if(o!==void 0)return 0}function none$1(o){if(o!==void 0)return o}function createSnapToN(o){const e=2*Math.PI/o;return function(s,a){if(a)return s;if(s!==void 0)return s=Math.floor(s/e+.5)*e,s}}function createSnapToZero(o){const e=toRadians(5);return function(s,a){return a||s===void 0?s:Math.abs(s)<=e?0:s}}function easeIn(o){return Math.pow(o,3)}function easeOut(o){return 1-easeIn(1-o)}function inAndOut(o){return 3*o*o-2*o*o*o}function linear(o){return o}const tmp_=new Array(6);function create(){return[1,0,0,1,0,0]}function reset(o){return set(o,1,0,0,1,0,0)}function multiply(o,e){const s=o[0],a=o[1],d=o[2],b=o[3],_=o[4],_e=o[5],nt=e[0],rt=e[1],ct=e[2],dt=e[3],pt=e[4],bt=e[5];return o[0]=s*nt+d*rt,o[1]=a*nt+b*rt,o[2]=s*ct+d*dt,o[3]=a*ct+b*dt,o[4]=s*pt+d*bt+_,o[5]=a*pt+b*bt+_e,o}function set(o,e,s,a,d,b,_){return o[0]=e,o[1]=s,o[2]=a,o[3]=d,o[4]=b,o[5]=_,o}function setFromArray(o,e){return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[4]=e[4],o[5]=e[5],o}function apply$1(o,e){const s=e[0],a=e[1];return e[0]=o[0]*s+o[2]*a+o[4],e[1]=o[1]*s+o[3]*a+o[5],e}function scale$2(o,e,s){return multiply(o,set(tmp_,e,0,0,s,0,0))}function makeScale(o,e,s){return set(o,e,0,0,s,0,0)}function translate$1(o,e,s){return multiply(o,set(tmp_,1,0,0,1,e,s))}function compose(o,e,s,a,d,b,_,_e){const nt=Math.sin(b),rt=Math.cos(b);return o[0]=a*rt,o[1]=d*nt,o[2]=-a*nt,o[3]=d*rt,o[4]=_*a*rt-_e*a*nt+e,o[5]=_*d*nt+_e*d*rt+s,o}function makeInverse(o,e){const s=determinant(e);assert(s!==0,"Transformation matrix cannot be inverted");const a=e[0],d=e[1],b=e[2],_=e[3],_e=e[4],nt=e[5];return o[0]=_/s,o[1]=-d/s,o[2]=-b/s,o[3]=a/s,o[4]=(b*nt-_*_e)/s,o[5]=-(a*nt-d*_e)/s,o}function determinant(o){return o[0]*o[3]-o[1]*o[2]}let transformStringDiv;function toString$3(o){const e="matrix("+o.join(", ")+")";if(WORKER_OFFSCREEN_CANVAS)return e;const s=transformStringDiv||(transformStringDiv=document.createElement("div"));return s.style.transform=e,s.style.transform}function transform2D(o,e,s,a,d,b){b=b||[];let _=0;for(let _e=e;_e<s;_e+=a){const nt=o[_e],rt=o[_e+1];b[_++]=d[0]*nt+d[2]*rt+d[4],b[_++]=d[1]*nt+d[3]*rt+d[5]}return b&&b.length!=_&&(b.length=_),b}function rotate(o,e,s,a,d,b,_){_=_||[];const _e=Math.cos(d),nt=Math.sin(d),rt=b[0],ct=b[1];let dt=0;for(let pt=e;pt<s;pt+=a){const bt=o[pt]-rt,xt=o[pt+1]-ct;_[dt++]=rt+bt*_e-xt*nt,_[dt++]=ct+bt*nt+xt*_e;for(let wt=pt+2;wt<pt+a;++wt)_[dt++]=o[wt]}return _&&_.length!=dt&&(_.length=dt),_}function scale$1(o,e,s,a,d,b,_,_e){_e=_e||[];const nt=_[0],rt=_[1];let ct=0;for(let dt=e;dt<s;dt+=a){const pt=o[dt]-nt,bt=o[dt+1]-rt;_e[ct++]=nt+d*pt,_e[ct++]=rt+b*bt;for(let xt=dt+2;xt<dt+a;++xt)_e[ct++]=o[xt]}return _e&&_e.length!=ct&&(_e.length=ct),_e}function translate(o,e,s,a,d,b,_){_=_||[];let _e=0;for(let nt=e;nt<s;nt+=a){_[_e++]=o[nt]+d,_[_e++]=o[nt+1]+b;for(let rt=nt+2;rt<nt+a;++rt)_[_e++]=o[rt]}return _&&_.length!=_e&&(_.length=_e),_}const tmpTransform$1=create();class Geometry extends BaseObject{constructor(){super(),this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne((e,s,a)=>{if(!a)return this.getSimplifiedGeometry(s);const d=this.clone();return d.applyTransform(a),d.getSimplifiedGeometry(s)})}simplifyTransformed(e,s){return this.simplifyTransformedInternal(this.getRevision(),e,s)}clone(){return abstract()}closestPointXY(e,s,a,d){return abstract()}containsXY(e,s){const a=this.getClosestPoint([e,s]);return a[0]===e&&a[1]===s}getClosestPoint(e,s){return s=s||[NaN,NaN],this.closestPointXY(e[0],e[1],s,1/0),s}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const s=this.computeExtent(this.extent_);(isNaN(s[0])||isNaN(s[1]))&&createOrUpdateEmpty(s),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,e)}rotate(e,s){abstract()}scale(e,s,a){abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return abstract()}getType(){return abstract()}applyTransform(e){abstract()}intersectsExtent(e){return abstract()}translate(e,s){abstract()}transform(e,s){const a=get$3(e),d=a.getUnits()=="tile-pixels"?function(b,_,_e){const nt=a.getExtent(),rt=a.getWorldExtent(),ct=getHeight(rt)/getHeight(nt);return compose(tmpTransform$1,rt[0],rt[3],ct,-ct,0,0,0),transform2D(b,0,b.length,_e,tmpTransform$1,_),getTransform(a,s)(b,_,_e)}:getTransform(a,s);return this.applyTransform(d),this}}class SimpleGeometry extends Geometry{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const s=this.getSimplifiedGeometryInternal(e);return s.getFlatCoordinates().length<this.flatCoordinates.length?s:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,s){this.stride=getStrideForLayout(e),this.layout=e,this.flatCoordinates=s}setCoordinates(e,s){abstract()}setLayout(e,s,a){let d;if(e)d=getStrideForLayout(e);else{for(let b=0;b<a;++b){if(s.length===0){this.layout="XY",this.stride=2;return}s=s[0]}d=s.length,e=getLayoutForStride(d)}this.layout=e,this.stride=d}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,s){const a=this.getFlatCoordinates();if(a){const d=this.getStride();rotate(a,0,a.length,d,e,s,a),this.changed()}}scale(e,s,a){s===void 0&&(s=e),a||(a=getCenter(this.getExtent()));const d=this.getFlatCoordinates();if(d){const b=this.getStride();scale$1(d,0,d.length,b,e,s,a,d),this.changed()}}translate(e,s){const a=this.getFlatCoordinates();if(a){const d=this.getStride();translate(a,0,a.length,d,e,s,a),this.changed()}}}function getLayoutForStride(o){let e;return o==2?e="XY":o==3?e="XYZ":o==4&&(e="XYZM"),e}function getStrideForLayout(o){let e;return o=="XY"?e=2:o=="XYZ"||o=="XYM"?e=3:o=="XYZM"&&(e=4),e}function transformGeom2D(o,e,s){const a=o.getFlatCoordinates();if(!a)return null;const d=o.getStride();return transform2D(a,0,a.length,d,e,s)}function assignClosest(o,e,s,a,d,b,_){const _e=o[e],nt=o[e+1],rt=o[s]-_e,ct=o[s+1]-nt;let dt;if(rt===0&&ct===0)dt=e;else{const pt=((d-_e)*rt+(b-nt)*ct)/(rt*rt+ct*ct);if(pt>1)dt=s;else if(pt>0){for(let bt=0;bt<a;++bt)_[bt]=lerp(o[e+bt],o[s+bt],pt);_.length=a;return}else dt=e}for(let pt=0;pt<a;++pt)_[pt]=o[dt+pt];_.length=a}function maxSquaredDelta(o,e,s,a,d){let b=o[e],_=o[e+1];for(e+=a;e<s;e+=a){const _e=o[e],nt=o[e+1],rt=squaredDistance$1(b,_,_e,nt);rt>d&&(d=rt),b=_e,_=nt}return d}function arrayMaxSquaredDelta(o,e,s,a,d){for(let b=0,_=s.length;b<_;++b){const _e=s[b];d=maxSquaredDelta(o,e,_e,a,d),e=_e}return d}function multiArrayMaxSquaredDelta(o,e,s,a,d){for(let b=0,_=s.length;b<_;++b){const _e=s[b];d=arrayMaxSquaredDelta(o,e,_e,a,d),e=_e[_e.length-1]}return d}function assignClosestPoint(o,e,s,a,d,b,_,_e,nt,rt,ct){if(e==s)return rt;let dt,pt;if(d===0){if(pt=squaredDistance$1(_,_e,o[e],o[e+1]),pt<rt){for(dt=0;dt<a;++dt)nt[dt]=o[e+dt];return nt.length=a,pt}return rt}ct=ct||[NaN,NaN];let bt=e+a;for(;bt<s;)if(assignClosest(o,bt-a,bt,a,_,_e,ct),pt=squaredDistance$1(_,_e,ct[0],ct[1]),pt<rt){for(rt=pt,dt=0;dt<a;++dt)nt[dt]=ct[dt];nt.length=a,bt+=a}else bt+=a*Math.max((Math.sqrt(pt)-Math.sqrt(rt))/d|0,1);if(b&&(assignClosest(o,s-a,e,a,_,_e,ct),pt=squaredDistance$1(_,_e,ct[0],ct[1]),pt<rt)){for(rt=pt,dt=0;dt<a;++dt)nt[dt]=ct[dt];nt.length=a}return rt}function assignClosestArrayPoint(o,e,s,a,d,b,_,_e,nt,rt,ct){ct=ct||[NaN,NaN];for(let dt=0,pt=s.length;dt<pt;++dt){const bt=s[dt];rt=assignClosestPoint(o,e,bt,a,d,b,_,_e,nt,rt,ct),e=bt}return rt}function assignClosestMultiArrayPoint(o,e,s,a,d,b,_,_e,nt,rt,ct){ct=ct||[NaN,NaN];for(let dt=0,pt=s.length;dt<pt;++dt){const bt=s[dt];rt=assignClosestArrayPoint(o,e,bt,a,d,b,_,_e,nt,rt,ct),e=bt[bt.length-1]}return rt}function deflateCoordinate(o,e,s,a){for(let d=0,b=s.length;d<b;++d)o[e++]=s[d];return e}function deflateCoordinates(o,e,s,a){for(let d=0,b=s.length;d<b;++d){const _=s[d];for(let _e=0;_e<a;++_e)o[e++]=_[_e]}return e}function deflateCoordinatesArray(o,e,s,a,d){d=d||[];let b=0;for(let _=0,_e=s.length;_<_e;++_){const nt=deflateCoordinates(o,e,s[_],a);d[b++]=nt,e=nt}return d.length=b,d}function deflateMultiCoordinatesArray(o,e,s,a,d){d=d||[];let b=0;for(let _=0,_e=s.length;_<_e;++_){const nt=deflateCoordinatesArray(o,e,s[_],a,d[b]);nt.length===0&&(nt[0]=e),d[b++]=nt,e=nt[nt.length-1]}return d.length=b,d}function douglasPeucker(o,e,s,a,d,b,_){const _e=(s-e)/a;if(_e<3){for(;e<s;e+=a)b[_++]=o[e],b[_++]=o[e+1];return _}const nt=new Array(_e);nt[0]=1,nt[_e-1]=1;const rt=[e,s-a];let ct=0;for(;rt.length>0;){const dt=rt.pop(),pt=rt.pop();let bt=0;const xt=o[pt],wt=o[pt+1],Tt=o[dt],Rt=o[dt+1];for(let Mt=pt+a;Mt<dt;Mt+=a){const Et=o[Mt],$t=o[Mt+1],Xt=squaredSegmentDistance(Et,$t,xt,wt,Tt,Rt);Xt>bt&&(ct=Mt,bt=Xt)}bt>d&&(nt[(ct-e)/a]=1,pt+a<ct&&rt.push(pt,ct),ct+a<dt&&rt.push(ct,dt))}for(let dt=0;dt<_e;++dt)nt[dt]&&(b[_++]=o[e+dt*a],b[_++]=o[e+dt*a+1]);return _}function douglasPeuckerArray(o,e,s,a,d,b,_,_e){for(let nt=0,rt=s.length;nt<rt;++nt){const ct=s[nt];_=douglasPeucker(o,e,ct,a,d,b,_),_e.push(_),e=ct}return _}function snap(o,e){return e*Math.round(o/e)}function quantize(o,e,s,a,d,b,_){if(e==s)return _;let _e=snap(o[e],d),nt=snap(o[e+1],d);e+=a,b[_++]=_e,b[_++]=nt;let rt,ct;do if(rt=snap(o[e],d),ct=snap(o[e+1],d),e+=a,e==s)return b[_++]=rt,b[_++]=ct,_;while(rt==_e&&ct==nt);for(;e<s;){const dt=snap(o[e],d),pt=snap(o[e+1],d);if(e+=a,dt==rt&&pt==ct)continue;const bt=rt-_e,xt=ct-nt,wt=dt-_e,Tt=pt-nt;if(bt*Tt==xt*wt&&(bt<0&&wt<bt||bt==wt||bt>0&&wt>bt)&&(xt<0&&Tt<xt||xt==Tt||xt>0&&Tt>xt)){rt=dt,ct=pt;continue}b[_++]=rt,b[_++]=ct,_e=rt,nt=ct,rt=dt,ct=pt}return b[_++]=rt,b[_++]=ct,_}function quantizeArray(o,e,s,a,d,b,_,_e){for(let nt=0,rt=s.length;nt<rt;++nt){const ct=s[nt];_=quantize(o,e,ct,a,d,b,_),_e.push(_),e=ct}return _}function quantizeMultiArray(o,e,s,a,d,b,_,_e){for(let nt=0,rt=s.length;nt<rt;++nt){const ct=s[nt],dt=[];_=quantizeArray(o,e,ct,a,d,b,_,dt),_e.push(dt),e=ct[ct.length-1]}return _}function inflateCoordinates(o,e,s,a,d){d=d!==void 0?d:[];let b=0;for(let _=e;_<s;_+=a)d[b++]=o.slice(_,_+a);return d.length=b,d}function inflateCoordinatesArray(o,e,s,a,d){d=d!==void 0?d:[];let b=0;for(let _=0,_e=s.length;_<_e;++_){const nt=s[_];d[b++]=inflateCoordinates(o,e,nt,a,d[b]),e=nt}return d.length=b,d}function inflateMultiCoordinatesArray(o,e,s,a,d){d=d!==void 0?d:[];let b=0;for(let _=0,_e=s.length;_<_e;++_){const nt=s[_];d[b++]=nt.length===1&&nt[0]===e?[]:inflateCoordinatesArray(o,e,nt,a,d[b]),e=nt[nt.length-1]}return d.length=b,d}function linearRing(o,e,s,a){let d=0,b=o[s-a],_=o[s-a+1];for(;e<s;e+=a){const _e=o[e],nt=o[e+1];d+=_*_e-b*nt,b=_e,_=nt}return d/2}function linearRings(o,e,s,a){let d=0;for(let b=0,_=s.length;b<_;++b){const _e=s[b];d+=linearRing(o,e,_e,a),e=_e}return d}function linearRingss$1(o,e,s,a){let d=0;for(let b=0,_=s.length;b<_;++b){const _e=s[b];d+=linearRings(o,e,_e,a),e=_e[_e.length-1]}return d}class LinearRing extends SimpleGeometry{constructor(e,s){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,s!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(s,e):this.setCoordinates(e,s)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,s,a,d){return d<closestSquaredDistanceXY(this.getExtent(),e,s)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,s,a,d))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const s=[];return s.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,s,0),new LinearRing(s,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,s){this.setLayout(s,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}let Point$1=class Jae extends SimpleGeometry{constructor(e,s){super(),this.setCoordinates(e,s)}clone(){const e=new Jae(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,s,a,d){const b=this.flatCoordinates,_=squaredDistance$1(e,s,b[0],b[1]);if(_<d){const _e=this.stride;for(let nt=0;nt<_e;++nt)a[nt]=b[nt];return a.length=_e,_}return d}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,s){this.setLayout(s,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}};function linearRingContainsExtent(o,e,s,a,d){return!forEachCorner(d,function(_){return!linearRingContainsXY(o,e,s,a,_[0],_[1])})}function linearRingContainsXY(o,e,s,a,d,b){let _=0,_e=o[s-a],nt=o[s-a+1];for(;e<s;e+=a){const rt=o[e],ct=o[e+1];nt<=b?ct>b&&(rt-_e)*(b-nt)-(d-_e)*(ct-nt)>0&&_++:ct<=b&&(rt-_e)*(b-nt)-(d-_e)*(ct-nt)<0&&_--,_e=rt,nt=ct}return _!==0}function linearRingsContainsXY(o,e,s,a,d,b){if(s.length===0||!linearRingContainsXY(o,e,s[0],a,d,b))return!1;for(let _=1,_e=s.length;_<_e;++_)if(linearRingContainsXY(o,s[_-1],s[_],a,d,b))return!1;return!0}function linearRingssContainsXY(o,e,s,a,d,b){if(s.length===0)return!1;for(let _=0,_e=s.length;_<_e;++_){const nt=s[_];if(linearRingsContainsXY(o,e,nt,a,d,b))return!0;e=nt[nt.length-1]}return!1}function getInteriorPointOfArray(o,e,s,a,d,b,_){let _e,nt,rt,ct,dt,pt,bt;const xt=d[b+1],wt=[];for(let Mt=0,Et=s.length;Mt<Et;++Mt){const $t=s[Mt];for(ct=o[$t-a],pt=o[$t-a+1],_e=e;_e<$t;_e+=a)dt=o[_e],bt=o[_e+1],(xt<=pt&&bt<=xt||pt<=xt&&xt<=bt)&&(rt=(xt-pt)/(bt-pt)*(dt-ct)+ct,wt.push(rt)),ct=dt,pt=bt}let Tt=NaN,Rt=-1/0;for(wt.sort(ascending),ct=wt[0],_e=1,nt=wt.length;_e<nt;++_e){dt=wt[_e];const Mt=Math.abs(dt-ct);Mt>Rt&&(rt=(ct+dt)/2,linearRingsContainsXY(o,e,s,a,rt,xt)&&(Tt=rt,Rt=Mt)),ct=dt}return isNaN(Tt)&&(Tt=d[b]),_?(_.push(Tt,xt,Rt),_):[Tt,xt,Rt]}function getInteriorPointsOfMultiArray(o,e,s,a,d){let b=[];for(let _=0,_e=s.length;_<_e;++_){const nt=s[_];b=getInteriorPointOfArray(o,e,nt,a,d,2*_,b),e=nt[nt.length-1]}return b}function forEach$1(o,e,s,a,d){let b;for(e+=a;e<s;e+=a)if(b=d(o.slice(e-a,e),o.slice(e,e+a)),b)return b;return!1}function intersectsLineString(o,e,s,a,d){const b=extendFlatCoordinates(createEmpty(),o,e,s,a);return intersects$1(d,b)?containsExtent(d,b)||b[0]>=d[0]&&b[2]<=d[2]||b[1]>=d[1]&&b[3]<=d[3]?!0:forEach$1(o,e,s,a,function(_,_e){return intersectsSegment(d,_,_e)}):!1}function intersectsLineStringArray(o,e,s,a,d){for(let b=0,_=s.length;b<_;++b){if(intersectsLineString(o,e,s[b],a,d))return!0;e=s[b]}return!1}function intersectsLinearRing(o,e,s,a,d){return!!(intersectsLineString(o,e,s,a,d)||linearRingContainsXY(o,e,s,a,d[0],d[1])||linearRingContainsXY(o,e,s,a,d[0],d[3])||linearRingContainsXY(o,e,s,a,d[2],d[1])||linearRingContainsXY(o,e,s,a,d[2],d[3]))}function intersectsLinearRingArray(o,e,s,a,d){if(!intersectsLinearRing(o,e,s[0],a,d))return!1;if(s.length===1)return!0;for(let b=1,_=s.length;b<_;++b)if(linearRingContainsExtent(o,s[b-1],s[b],a,d)&&!intersectsLineString(o,s[b-1],s[b],a,d))return!1;return!0}function intersectsLinearRingMultiArray(o,e,s,a,d){for(let b=0,_=s.length;b<_;++b){const _e=s[b];if(intersectsLinearRingArray(o,e,_e,a,d))return!0;e=_e[_e.length-1]}return!1}function coordinates(o,e,s,a){for(;e<s-a;){for(let d=0;d<a;++d){const b=o[e+d];o[e+d]=o[s-a+d],o[s-a+d]=b}e+=a,s-=a}}function linearRingIsClockwise(o,e,s,a){let d=0,b=o[s-a],_=o[s-a+1];for(;e<s;e+=a){const _e=o[e],nt=o[e+1];d+=(_e-b)*(nt+_),b=_e,_=nt}return d===0?void 0:d>0}function linearRingsAreOriented(o,e,s,a,d){d=d!==void 0?d:!1;for(let b=0,_=s.length;b<_;++b){const _e=s[b],nt=linearRingIsClockwise(o,e,_e,a);if(b===0){if(d&&nt||!d&&!nt)return!1}else if(d&&!nt||!d&&nt)return!1;e=_e}return!0}function linearRingssAreOriented(o,e,s,a,d){for(let b=0,_=s.length;b<_;++b){const _e=s[b];if(!linearRingsAreOriented(o,e,_e,a,d))return!1;_e.length&&(e=_e[_e.length-1])}return!0}function orientLinearRings(o,e,s,a,d){d=d!==void 0?d:!1;for(let b=0,_=s.length;b<_;++b){const _e=s[b],nt=linearRingIsClockwise(o,e,_e,a);(b===0?d&&nt||!d&&!nt:d&&!nt||!d&&nt)&&coordinates(o,e,_e,a),e=_e}return e}function orientLinearRingsArray(o,e,s,a,d){for(let b=0,_=s.length;b<_;++b)e=orientLinearRings(o,e,s[b],a,d);return e}function inflateEnds(o,e){const s=[];let a=0,d=0,b;for(let _=0,_e=e.length;_<_e;++_){const nt=e[_],rt=linearRingIsClockwise(o,a,nt,2);if(b===void 0&&(b=rt),rt===b)s.push(e.slice(d,_+1));else{if(s.length===0)continue;s[s.length-1].push(e[d])}d=_+1,a=nt}return s}class Polygon extends SimpleGeometry{constructor(e,s,a){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,s!==void 0&&a?(this.setFlatCoordinates(s,e),this.ends_=a):this.setCoordinates(e,s)}appendLinearRing(e){this.flatCoordinates?extend$4(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,s,a,d){return d<closestSquaredDistanceXY(this.getExtent(),e,s)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,s,a,d))}containsXY(e,s){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,s)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let s;return e!==void 0?(s=this.getOrientedFlatCoordinates().slice(),orientLinearRings(s,0,this.ends_,this.stride,e)):s=this.flatCoordinates,inflateCoordinatesArray(s,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new LinearRing(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,s=this.flatCoordinates,a=this.ends_,d=[];let b=0;for(let _=0,_e=a.length;_<_e;++_){const nt=a[_],rt=new LinearRing(s.slice(b,nt),e);d.push(rt),b=nt}return d}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const s=[],a=[];return s.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),s,0,a),new Polygon(s,"XY",a)}getType(){return"Polygon"}intersectsExtent(e){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,s){this.setLayout(s,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const a=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=a.length===0?0:a[a.length-1],this.changed()}}function fromExtent(o){if(isEmpty(o))throw new Error("Cannot create polygon from empty extent");const e=o[0],s=o[1],a=o[2],d=o[3],b=[e,s,e,d,a,d,a,s,e,s];return new Polygon(b,"XY",[b.length])}const DEFAULT_MIN_ZOOM=0;class View extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&disableCoordinateWarning(),e.center&&(e.center=fromUserCoordinate(e.center,this.projection_)),e.extent&&(e.extent=fromUserExtent(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const s=Object.assign({},e);for(const _e in ViewProperty)delete s[_e];this.setProperties(s,!0);const a=createResolutionConstraint(e);this.maxResolution_=a.maxResolution,this.minResolution_=a.minResolution,this.zoomFactor_=a.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=a.minZoom;const d=createCenterConstraint(e),b=a.constraint,_=createRotationConstraint(e);this.constraints_={center:d,resolution:b,rotation:_},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let s=this.padding_;this.padding_=e;const a=this.getCenterInternal();if(a){const d=e||[0,0,0,0];s=s||[0,0,0,0];const b=this.getResolution(),_=b/2*(d[3]-s[3]+s[1]-d[1]),_e=b/2*(d[0]-s[0]+s[2]-d[2]);this.setCenterInternal([a[0]+_,a[1]-_e])}}getUpdatedOptions_(e){const s=this.getProperties();return s.resolution!==void 0?s.resolution=this.getResolution():s.zoom=this.getZoom(),s.center=this.getCenterInternal(),s.rotation=this.getRotation(),Object.assign({},s,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const s=new Array(arguments.length);for(let a=0;a<s.length;++a){let d=arguments[a];d.center&&(d=Object.assign({},d),d.center=fromUserCoordinate(d.center,this.getProjection())),d.anchor&&(d=Object.assign({},d),d.anchor=fromUserCoordinate(d.anchor,this.getProjection())),s[a]=d}this.animateInternal.apply(this,s)}animateInternal(e){let s=arguments.length,a;s>1&&typeof arguments[s-1]=="function"&&(a=arguments[s-1],--s);let d=0;for(;d<s&&!this.isDef();++d){const ct=arguments[d];ct.center&&this.setCenterInternal(ct.center),ct.zoom!==void 0?this.setZoom(ct.zoom):ct.resolution&&this.setResolution(ct.resolution),ct.rotation!==void 0&&this.setRotation(ct.rotation)}if(d===s){a&&animationCallback(a,!0);return}let b=Date.now(),_=this.targetCenter_.slice(),_e=this.targetResolution_,nt=this.targetRotation_;const rt=[];for(;d<s;++d){const ct=arguments[d],dt={start:b,complete:!1,anchor:ct.anchor,duration:ct.duration!==void 0?ct.duration:1e3,easing:ct.easing||inAndOut,callback:a};if(ct.center&&(dt.sourceCenter=_,dt.targetCenter=ct.center.slice(),_=dt.targetCenter),ct.zoom!==void 0?(dt.sourceResolution=_e,dt.targetResolution=this.getResolutionForZoom(ct.zoom),_e=dt.targetResolution):ct.resolution&&(dt.sourceResolution=_e,dt.targetResolution=ct.resolution,_e=dt.targetResolution),ct.rotation!==void 0){dt.sourceRotation=nt;const pt=modulo(ct.rotation-nt+Math.PI,2*Math.PI)-Math.PI;dt.targetRotation=nt+pt,nt=dt.targetRotation}isNoopAnimation(dt)?dt.complete=!0:b+=dt.duration,rt.push(dt)}this.animations_.push(rt),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let e;for(let s=0,a=this.animations_.length;s<a;++s){const d=this.animations_[s];if(d[0].callback&&animationCallback(d[0].callback,!1),!e)for(let b=0,_=d.length;b<_;++b){const _e=d[b];if(!_e.complete){e=_e.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let s=!1;for(let a=this.animations_.length-1;a>=0;--a){const d=this.animations_[a];let b=!0;for(let _=0,_e=d.length;_<_e;++_){const nt=d[_];if(nt.complete)continue;const rt=e-nt.start;let ct=nt.duration>0?rt/nt.duration:1;ct>=1?(nt.complete=!0,ct=1):b=!1;const dt=nt.easing(ct);if(nt.sourceCenter){const pt=nt.sourceCenter[0],bt=nt.sourceCenter[1],xt=nt.targetCenter[0],wt=nt.targetCenter[1];this.nextCenter_=nt.targetCenter;const Tt=pt+dt*(xt-pt),Rt=bt+dt*(wt-bt);this.targetCenter_=[Tt,Rt]}if(nt.sourceResolution&&nt.targetResolution){const pt=dt===1?nt.targetResolution:nt.sourceResolution+dt*(nt.targetResolution-nt.sourceResolution);if(nt.anchor){const bt=this.getViewportSize_(this.getRotation()),xt=this.constraints_.resolution(pt,0,bt,!0);this.targetCenter_=this.calculateCenterZoom(xt,nt.anchor)}this.nextResolution_=nt.targetResolution,this.targetResolution_=pt,this.applyTargetState_(!0)}if(nt.sourceRotation!==void 0&&nt.targetRotation!==void 0){const pt=dt===1?modulo(nt.targetRotation+Math.PI,2*Math.PI)-Math.PI:nt.sourceRotation+dt*(nt.targetRotation-nt.sourceRotation);if(nt.anchor){const bt=this.constraints_.rotation(pt,!0);this.targetCenter_=this.calculateCenterRotate(bt,nt.anchor)}this.nextRotation_=nt.targetRotation,this.targetRotation_=pt}if(this.applyTargetState_(!0),s=!0,!nt.complete)break}if(b){this.animations_[a]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const _=d[0].callback;_&&animationCallback(_,!0)}}this.animations_=this.animations_.filter(Boolean),s&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,s){let a;const d=this.getCenterInternal();return d!==void 0&&(a=[d[0]-s[0],d[1]-s[1]],rotate$1(a,e-this.getRotation()),add$1(a,s)),a}calculateCenterZoom(e,s){let a;const d=this.getCenterInternal(),b=this.getResolution();if(d!==void 0&&b!==void 0){const _=s[0]-e*(s[0]-d[0])/b,_e=s[1]-e*(s[1]-d[1])/b;a=[_,_e]}return a}getViewportSize_(e){const s=this.viewportSize_;if(e){const a=s[0],d=s[1];return[Math.abs(a*Math.cos(e))+Math.abs(d*Math.sin(e)),Math.abs(a*Math.sin(e))+Math.abs(d*Math.cos(e))]}return s}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&toUserCoordinate(e,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const s=this.calculateExtentInternal(e);return toUserExtent(s,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const s=this.getCenterInternal();assert(s,"The view center is not defined");const a=this.getResolution();assert(a!==void 0,"The view resolution is not defined");const d=this.getRotation();return assert(d!==void 0,"The view rotation is not defined"),getForViewAndSize(s,a,d,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,s){return this.getResolutionForExtentInternal(fromUserExtent(e,this.getProjection()),s)}getResolutionForExtentInternal(e,s){s=s||this.getViewportSizeMinusPadding_();const a=getWidth(e)/s[0],d=getHeight(e)/s[1];return Math.max(a,d)}getResolutionForValueFunction(e){e=e||2;const s=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,d=Math.log(s/a)/Math.log(e);return function(b){return s/Math.pow(e,b*d)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(e){const s=Math.log(e||2),a=this.getConstrainedResolution(this.maxResolution_),d=this.minResolution_,b=Math.log(a/d)/s;return function(_){return Math.log(a/_)/s/b}}getViewportSizeMinusPadding_(e){let s=this.getViewportSize_(e);const a=this.padding_;return a&&(s=[s[0]-a[1]-a[3],s[1]-a[0]-a[2]]),s}getState(){const e=this.getProjection(),s=this.getResolution(),a=this.getRotation();let d=this.getCenterInternal();const b=this.padding_;if(b){const _=this.getViewportSizeMinusPadding_();d=calculateCenterOn(d,this.getViewportSize_(),[_[0]/2+b[3],_[1]/2+b[0]],s,a)}return{center:d.slice(0),projection:e!==void 0?e:null,resolution:s,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:a,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const s=this.getResolution();return s!==void 0&&(e=this.getZoomForResolution(s)),e}getZoomForResolution(e){let s=this.minZoom_||0,a,d;if(this.resolutions_){const b=linearFindNearest(this.resolutions_,e,1);s=b,a=this.resolutions_[b],b==this.resolutions_.length-1?d=2:d=a/this.resolutions_[b+1]}else a=this.maxResolution_,d=this.zoomFactor_;return s+Math.log(a/e)/Math.log(d)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const s=clamp(Math.floor(e),0,this.resolutions_.length-2),a=this.resolutions_[s]/this.resolutions_[s+1];return this.resolutions_[s]/Math.pow(a,clamp(e-s,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,s){let a;if(assert(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){assert(!isEmpty(e),"Cannot fit empty extent provided as `geometry`");const d=fromUserExtent(e,this.getProjection());a=fromExtent(d)}else if(e.getType()==="Circle"){const d=fromUserExtent(e.getExtent(),this.getProjection());a=fromExtent(d),a.rotate(this.getRotation(),getCenter(d))}else a=e;this.fitInternal(a,s)}rotatedExtentForGeometry(e){const s=this.getRotation(),a=Math.cos(s),d=Math.sin(-s),b=e.getFlatCoordinates(),_=e.getStride();let _e=1/0,nt=1/0,rt=-1/0,ct=-1/0;for(let dt=0,pt=b.length;dt<pt;dt+=_){const bt=b[dt]*a-b[dt+1]*d,xt=b[dt]*d+b[dt+1]*a;_e=Math.min(_e,bt),nt=Math.min(nt,xt),rt=Math.max(rt,bt),ct=Math.max(ct,xt)}return[_e,nt,rt,ct]}fitInternal(e,s){s=s||{};let a=s.size;a||(a=this.getViewportSizeMinusPadding_());const d=s.padding!==void 0?s.padding:[0,0,0,0],b=s.nearest!==void 0?s.nearest:!1;let _;s.minResolution!==void 0?_=s.minResolution:s.maxZoom!==void 0?_=this.getResolutionForZoom(s.maxZoom):_=0;const _e=this.rotatedExtentForGeometry(e);let nt=this.getResolutionForExtentInternal(_e,[a[0]-d[1]-d[3],a[1]-d[0]-d[2]]);nt=isNaN(nt)?_:Math.max(nt,_),nt=this.getConstrainedResolution(nt,b?0:1);const rt=this.getRotation(),ct=Math.sin(rt),dt=Math.cos(rt),pt=getCenter(_e);pt[0]+=(d[1]-d[3])/2*nt,pt[1]+=(d[0]-d[2])/2*nt;const bt=pt[0]*dt-pt[1]*ct,xt=pt[1]*dt+pt[0]*ct,wt=this.getConstrainedCenter([bt,xt],nt),Tt=s.callback?s.callback:VOID;s.duration!==void 0?this.animateInternal({resolution:nt,center:wt,duration:s.duration,easing:s.easing},Tt):(this.targetResolution_=nt,this.targetCenter_=wt,this.applyTargetState_(!1,!0),animationCallback(Tt,!0))}centerOn(e,s,a){this.centerOnInternal(fromUserCoordinate(e,this.getProjection()),s,a)}centerOnInternal(e,s,a){this.setCenterInternal(calculateCenterOn(e,s,a,this.getResolution(),this.getRotation()))}calculateCenterShift(e,s,a,d){let b;const _=this.padding_;if(_&&e){const _e=this.getViewportSizeMinusPadding_(-a),nt=calculateCenterOn(e,d,[_e[0]/2+_[3],_e[1]/2+_[0]],s,a);b=[e[0]-nt[0],e[1]-nt[1]]}return b}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const s=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([s[0]+e[0],s[1]+e[1]])}adjustCenterInternal(e){const s=this.targetCenter_;this.setCenterInternal([s[0]+e[0],s[1]+e[1]])}adjustResolution(e,s){s=s&&fromUserCoordinate(s,this.getProjection()),this.adjustResolutionInternal(e,s)}adjustResolutionInternal(e,s){const a=this.getAnimating()||this.getInteracting(),d=this.getViewportSize_(this.getRotation()),b=this.constraints_.resolution(this.targetResolution_*e,0,d,a);s&&(this.targetCenter_=this.calculateCenterZoom(b,s)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,s){this.adjustResolution(Math.pow(this.zoomFactor_,-e),s)}adjustRotation(e,s){s&&(s=fromUserCoordinate(s,this.getProjection())),this.adjustRotationInternal(e,s)}adjustRotationInternal(e,s){const a=this.getAnimating()||this.getInteracting(),d=this.constraints_.rotation(this.targetRotation_+e,a);s&&(this.targetCenter_=this.calculateCenterRotate(d,s)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,s){return this.hints_[e]+=s,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,s){const a=this.getAnimating()||this.getInteracting()||s,d=this.constraints_.rotation(this.targetRotation_,a),b=this.getViewportSize_(d),_=this.constraints_.resolution(this.targetResolution_,0,b,a),_e=this.constraints_.center(this.targetCenter_,_,b,a,this.calculateCenterShift(this.targetCenter_,_,d,b));this.get(ViewProperty.ROTATION)!==d&&this.set(ViewProperty.ROTATION,d),this.get(ViewProperty.RESOLUTION)!==_&&(this.set(ViewProperty.RESOLUTION,_),this.set("zoom",this.getZoom(),!0)),(!_e||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),_e))&&this.set(ViewProperty.CENTER,_e),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,s,a){e=e!==void 0?e:200;const d=s||0,b=this.constraints_.rotation(this.targetRotation_),_=this.getViewportSize_(b),_e=this.constraints_.resolution(this.targetResolution_,d,_),nt=this.constraints_.center(this.targetCenter_,_e,_,!1,this.calculateCenterShift(this.targetCenter_,_e,b,_));if(e===0&&!this.cancelAnchor_){this.targetResolution_=_e,this.targetRotation_=b,this.targetCenter_=nt,this.applyTargetState_();return}a=a||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==_e||this.getRotation()!==b||!this.getCenterInternal()||!equals(this.getCenterInternal(),nt))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:b,center:nt,resolution:_e,duration:e,easing:easeOut,anchor:a}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(e,s,a){a=a&&fromUserCoordinate(a,this.getProjection()),this.endInteractionInternal(e,s,a)}endInteractionInternal(e,s,a){this.getInteracting()&&(this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(e,s,a))}getConstrainedCenter(e,s){const a=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,s||this.getResolution(),a)}getConstrainedZoom(e,s){const a=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(a,s))}getConstrainedResolution(e,s){s=s||0;const a=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,s,a)}}function animationCallback(o,e){setTimeout(function(){o(e)},0)}function createCenterConstraint(o){if(o.extent!==void 0){const s=o.smoothExtentConstraint!==void 0?o.smoothExtentConstraint:!0;return createExtent(o.extent,o.constrainOnlyCenter,s)}const e=createProjection(o.projection,"EPSG:3857");if(o.multiWorld!==!0&&e.isGlobal()){const s=e.getExtent().slice();return s[0]=-1/0,s[2]=1/0,createExtent(s,!1,!1)}return none$2}function createResolutionConstraint(o){let e,s,a,_=o.minZoom!==void 0?o.minZoom:DEFAULT_MIN_ZOOM,_e=o.maxZoom!==void 0?o.maxZoom:28;const nt=o.zoomFactor!==void 0?o.zoomFactor:2,rt=o.multiWorld!==void 0?o.multiWorld:!1,ct=o.smoothResolutionConstraint!==void 0?o.smoothResolutionConstraint:!0,dt=o.showFullExtent!==void 0?o.showFullExtent:!1,pt=createProjection(o.projection,"EPSG:3857"),bt=pt.getExtent();let xt=o.constrainOnlyCenter,wt=o.extent;if(!rt&&!wt&&pt.isGlobal()&&(xt=!1,wt=bt),o.resolutions!==void 0){const Tt=o.resolutions;s=Tt[_],a=Tt[_e]!==void 0?Tt[_e]:Tt[Tt.length-1],o.constrainResolution?e=createSnapToResolutions(Tt,ct,!xt&&wt,dt):e=createMinMaxResolution(s,a,ct,!xt&&wt,dt)}else{const Rt=(bt?Math.max(getWidth(bt),getHeight(bt)):360*METERS_PER_UNIT$1.degrees/pt.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(2,DEFAULT_MIN_ZOOM),Mt=Rt/Math.pow(2,28-DEFAULT_MIN_ZOOM);s=o.maxResolution,s!==void 0?_=0:s=Rt/Math.pow(nt,_),a=o.minResolution,a===void 0&&(o.maxZoom!==void 0?o.maxResolution!==void 0?a=s/Math.pow(nt,_e):a=Rt/Math.pow(nt,_e):a=Mt),_e=_+Math.floor(Math.log(s/a)/Math.log(nt)),a=s/Math.pow(nt,_e-_),o.constrainResolution?e=createSnapToPower(nt,s,a,ct,!xt&&wt,dt):e=createMinMaxResolution(s,a,ct,!xt&&wt,dt)}return{constraint:e,maxResolution:s,minResolution:a,minZoom:_,zoomFactor:nt}}function createRotationConstraint(o){if(o.enableRotation!==void 0?o.enableRotation:!0){const s=o.constrainRotation;return s===void 0||s===!0?createSnapToZero():s===!1?none$1:typeof s=="number"?createSnapToN(s):none$1}return disable}function isNoopAnimation(o){return!(o.sourceCenter&&o.targetCenter&&!equals(o.sourceCenter,o.targetCenter)||o.sourceResolution!==o.targetResolution||o.sourceRotation!==o.targetRotation)}function calculateCenterOn(o,e,s,a,d){const b=Math.cos(-d);let _=Math.sin(-d),_e=o[0]*b-o[1]*_,nt=o[1]*b+o[0]*_;_e+=(e[0]/2-s[0])*a,nt+=(s[1]-e[1]/2)*a,_=-_;const rt=_e*b-nt*_,ct=nt*b+_e*_;return[rt,ct]}class Layer extends BaseLayer{constructor(e){const s=Object.assign({},e);delete s.source,super(s),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const a=e.source?e.source:null;this.setSource(a)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=listen(e,EventType.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let s;const a=this.getMapInternal();!e&&a&&(e=a.getView()),e instanceof View?s={viewState:e.getState(),extent:e.calculateExtent()}:s=e,!s.layerStatesArray&&a&&(s.layerStatesArray=a.getLayerGroup().getLayerStatesArray());let d;s.layerStatesArray?d=s.layerStatesArray.find(_=>_.layer===this):d=this.getLayerState();const b=this.getExtent();return inView(d,s.viewState)&&(!b||intersects$1(b,s.extent))}getAttributions(e){if(!this.isVisible(e))return[];let s;const a=this.getSource();if(a&&(s=a.getAttributions()),!s)return[];const d=e instanceof View?e.getViewStateAndExtent():e;let b=s(d);return Array.isArray(b)||(b=[b]),b}render(e,s){const a=this.getRenderer();return a.prepareFrame(e)?(this.rendered=!0,a.renderFrame(e,s)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(LayerProperty.MAP,e)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(e){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=listen(e,RenderEventType.PRECOMPOSE,function(s){const d=s.frameState.layerStatesArray,b=this.getLayerState(!1);assert(!d.some(function(_){return _.layer===b.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),d.push(b)},this),this.mapRenderKey_=listen(this,EventType.CHANGE,e.render,e),this.changed())}setSource(e){this.set(LayerProperty.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function inView(o,e){if(!o.visible)return!1;const s=e.resolution;if(s<o.minResolution||s>=o.maxResolution)return!1;const a=e.zoom;return a>o.minZoom&&a<=o.maxZoom}const TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer{constructor(e){e=e||{};const s=Object.assign({},e);delete s.preload,delete s.useInterimTilesOnError,super(s),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(e){this.set(TileProperty.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class LayerRenderer extends Observable{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return abstract()}getData(e){return null}prepareFrame(e){return abstract()}renderFrame(e,s){return abstract()}loadedTileCallback(e,s,a){e[s]||(e[s]={}),e[s][a.tileCoord.toString()]=a}createLoadedTileFinder(e,s,a){return(d,b)=>{const _=this.loadedTileCallback.bind(this,a,d);return e.forEachLoadedTile(s,d,b,_)}}forEachFeatureAtCoordinate(e,s,a,d,b){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const s=e.target;(s.getState()===ImageState.LOADED||s.getState()===ImageState.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let s=e.getState();return s!=ImageState.LOADED&&s!=ImageState.ERROR&&e.addEventListener(EventType.CHANGE,this.boundHandleImageChange_),s==ImageState.IDLE&&(e.load(),s=e.getState()),s==ImageState.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}class RenderEvent extends BaseEvent{constructor(e,s,a,d){super(e),this.inversePixelTransform=s,this.frameState=a,this.context=d}}const rgb={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var xyz={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};xyz.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};xyz.max=xyz.whitepoint[2].D65;xyz.rgb=function(o,e){e=e||xyz.whitepoint[2].E;var s=o[0]/e[0],a=o[1]/e[1],d=o[2]/e[2],b,_,_e;return b=s*3.240969941904521+a*-1.537383177570093+d*-.498610760293,_=s*-.96924363628087+a*1.87596750150772+d*.041555057407175,_e=s*.055630079696993+a*-.20397695888897+d*1.056971514242878,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b=b*12.92,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_=_*12.92,_e=_e>.0031308?1.055*Math.pow(_e,1/2.4)-.055:_e=_e*12.92,b=Math.min(Math.max(0,b),1),_=Math.min(Math.max(0,_),1),_e=Math.min(Math.max(0,_e),1),[b*255,_*255,_e*255]};rgb.xyz=function(o,e){var s=o[0]/255,a=o[1]/255,d=o[2]/255;s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92;var b=s*.41239079926595+a*.35758433938387+d*.18048078840183,_=s*.21263900587151+a*.71516867876775+d*.072192315360733,_e=s*.019330818715591+a*.11919477979462+d*.95053215224966;return e=e||xyz.whitepoint[2].E,[b*e[0],_*e[1],_e*e[2]]};const luv={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(o,e,s){var a,d,b,_,_e,nt,rt,ct,dt,pt,bt,xt,wt;if(b=o[0],_=o[1],_e=o[2],b===0)return[0,0,0];var Tt=.0011070564598794539;return e=e||"D65",s=s||2,dt=xyz.whitepoint[s][e][0],pt=xyz.whitepoint[s][e][1],bt=xyz.whitepoint[s][e][2],xt=4*dt/(dt+15*pt+3*bt),wt=9*pt/(dt+15*pt+3*bt),a=_/(13*b)+xt||0,d=_e/(13*b)+wt||0,rt=b>8?pt*Math.pow((b+16)/116,3):pt*b*Tt,nt=rt*9*a/(4*d)||0,ct=rt*(12-3*a-20*d)/(4*d)||0,[nt,rt,ct]}};xyz.luv=function(o,e,s){var a,d,b,_,_e,nt,rt,ct,dt,pt,bt,xt,wt,Tt=.008856451679035631,Rt=903.2962962962961;e=e||"D65",s=s||2,dt=xyz.whitepoint[s][e][0],pt=xyz.whitepoint[s][e][1],bt=xyz.whitepoint[s][e][2],xt=4*dt/(dt+15*pt+3*bt),wt=9*pt/(dt+15*pt+3*bt),nt=o[0],rt=o[1],ct=o[2],a=4*nt/(nt+15*rt+3*ct)||0,d=9*rt/(nt+15*rt+3*ct)||0;var Mt=rt/pt;return b=Mt<=Tt?Rt*Mt:116*Math.pow(Mt,1/3)-16,_=13*b*(a-xt),_e=13*b*(d-wt),[b,_,_e]};var lchuv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(o){var e=o[0],s=o[1],a=o[2],d,b,_;return _=a/360*2*Math.PI,d=s*Math.cos(_),b=s*Math.sin(_),[e,d,b]},xyz:function(o){return luv.xyz(lchuv.luv(o))}};luv.lchuv=function(o){var e=o[0],s=o[1],a=o[2],d=Math.sqrt(s*s+a*a),b=Math.atan2(a,s),_=b*360/2/Math.PI;return _<0&&(_+=360),[e,d,_]};xyz.lchuv=function(o){return luv.lchuv(xyz.luv(o))};const names$z={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$3(o){var ct,dt;var e,s=[],a=1,d;if(typeof o=="number")return{space:"rgb",values:[o>>>16,(o&65280)>>>8,o&255],alpha:1};if(typeof o=="number")return{space:"rgb",values:[o>>>16,(o&65280)>>>8,o&255],alpha:1};if(o=String(o).toLowerCase(),names$z[o])s=names$z[o].slice(),d="rgb";else if(o==="transparent")a=0,d="rgb",s=[0,0,0];else if(o[0]==="#"){var b=o.slice(1),_=b.length,_e=_<=4;a=1,_e?(s=[parseInt(b[0]+b[0],16),parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16)],_===4&&(a=parseInt(b[3]+b[3],16)/255)):(s=[parseInt(b[0]+b[1],16),parseInt(b[2]+b[3],16),parseInt(b[4]+b[5],16)],_===8&&(a=parseInt(b[6]+b[7],16)/255)),s[0]||(s[0]=0),s[1]||(s[1]=0),s[2]||(s[2]=0),d="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(o)){var nt=e[1];d=nt.replace(/a$/,"");var rt=d==="cmyk"?4:d==="gray"?1:3;s=e[2].trim().split(/\s*[,\/]\s*|\s+/),d==="color"&&(d=s.shift()),s=s.map(function(pt,bt){if(pt[pt.length-1]==="%")return pt=parseFloat(pt)/100,bt===3?pt:d==="rgb"?pt*255:d[0]==="h"||d[0]==="l"&&!bt?pt*100:d==="lab"?pt*125:d==="lch"?bt<2?pt*150:pt*360:d[0]==="o"&&!bt?pt:d==="oklab"?pt*.4:d==="oklch"?bt<2?pt*.4:pt*360:pt;if(d[bt]==="h"||bt===2&&d[d.length-1]==="h"){if(baseHues[pt]!==void 0)return baseHues[pt];if(pt.endsWith("deg"))return parseFloat(pt);if(pt.endsWith("turn"))return parseFloat(pt)*360;if(pt.endsWith("grad"))return parseFloat(pt)*360/400;if(pt.endsWith("rad"))return parseFloat(pt)*180/Math.PI}return pt==="none"?0:parseFloat(pt)}),a=s.length>rt?s.pop():1}else/[0-9](?:\s|\/|,)/.test(o)&&(s=o.match(/([0-9]+)/g).map(function(pt){return parseFloat(pt)}),d=((dt=(ct=o.match(/([a-z])/ig))==null?void 0:ct.join(""))==null?void 0:dt.toLowerCase())||"rgb");return{space:d,values:s,alpha:a}}const hsl={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(o){var e=o[0]/360,s=o[1]/100,a=o[2]/100,d,b,_,_e,nt,rt=0;if(s===0)return nt=a*255,[nt,nt,nt];for(b=a<.5?a*(1+s):a+s-a*s,d=2*a-b,_e=[0,0,0];rt<3;)_=e+1/3*-(rt-1),_<0?_++:_>1&&_--,nt=6*_<1?d+(b-d)*6*_:2*_<1?b:3*_<2?d+(b-d)*(2/3-_)*6:d,_e[rt++]=nt*255;return _e}};rgb.hsl=function(o){var e=o[0]/255,s=o[1]/255,a=o[2]/255,d=Math.min(e,s,a),b=Math.max(e,s,a),_=b-d,_e,nt,rt;return b===d?_e=0:e===b?_e=(s-a)/_:s===b?_e=2+(a-e)/_:a===b&&(_e=4+(e-s)/_),_e=Math.min(_e*60,360),_e<0&&(_e+=360),rt=(d+b)/2,b===d?nt=0:rt<=.5?nt=_/(b+d):nt=_/(2-b-d),[_e,nt*100,rt*100]};function rgba$1(o){Array.isArray(o)&&o.raw&&(o=String.raw(...arguments)),o instanceof Number&&(o=+o);var e,s=parse$3(o);if(!s.space)return[];const a=s.space[0]==="h"?hsl.min:rgb.min,d=s.space[0]==="h"?hsl.max:rgb.max;return e=Array(3),e[0]=Math.min(Math.max(s.values[0],a[0]),d[0]),e[1]=Math.min(Math.max(s.values[1],a[1]),d[1]),e[2]=Math.min(Math.max(s.values[2],a[2]),d[2]),s.space[0]==="h"&&(e=hsl.rgb(e)),e.push(Math.min(Math.max(s.alpha,0),1)),e}function asString(o){return typeof o=="string"?o:toString$2(o)}const MAX_CACHE_SIZE=1024,cache={};let cacheSize=0;function withAlpha(o){if(o.length===4)return o;const e=o.slice();return e[3]=1,e}function rgbaToLcha(o){const e=xyz.lchuv(rgb.xyz(o));return e[3]=o[3],e}function lchaToRgba(o){const e=xyz.rgb(lchuv.xyz(o));return e[3]=o[3],e}function fromString$1(o){if(cache.hasOwnProperty(o))return cache[o];if(cacheSize>=MAX_CACHE_SIZE){let s=0;for(const a in cache)s++&3||(delete cache[a],--cacheSize)}const e=rgba$1(o);if(e.length!==4)throw new Error('Failed to parse "'+o+'" as color');for(const s of e)if(isNaN(s))throw new Error('Failed to parse "'+o+'" as color');return normalize$1(e),cache[o]=e,++cacheSize,e}function asArray(o){return Array.isArray(o)?o:fromString$1(o)}function normalize$1(o){return o[0]=clamp(o[0]+.5|0,0,255),o[1]=clamp(o[1]+.5|0,0,255),o[2]=clamp(o[2]+.5|0,0,255),o[3]=clamp(o[3],0,1),o}function toString$2(o){let e=o[0];e!=(e|0)&&(e=e+.5|0);let s=o[1];s!=(s|0)&&(s=s+.5|0);let a=o[2];a!=(a|0)&&(a=a+.5|0);const d=o[3]===void 0?1:Math.round(o[3]*100)/100;return"rgba("+e+","+s+","+a+","+d+")"}function isStringColor(o){try{return fromString$1(o),!0}catch{return!1}}const canvasPool$2=[];let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class CanvasLayerRenderer extends LayerRenderer{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=create(),this.pixelTransform=create(),this.inversePixelTransform=create(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,s,a){pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);let d;try{pixelContext.drawImage(e,s,a,1,1,0,0,1,1),d=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return d}getBackground(e){let a=this.getLayer().getBackground();return typeof a=="function"&&(a=a(e.viewState.resolution)),a||void 0}useContainer(e,s,a){const d=this.getLayer().getClassName();let b,_;if(e&&e.className===d&&(!a||e&&e.style.backgroundColor&&equals$2(asArray(e.style.backgroundColor),asArray(a)))){const _e=e.firstElementChild;_e instanceof HTMLCanvasElement&&(_=_e.getContext("2d"))}if(_&&_.canvas.style.transform===s?(this.container=e,this.context=_,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){b=document.createElement("div"),b.className=d;let _e=b.style;_e.position="absolute",_e.width="100%",_e.height="100%",_=createCanvasContext2D();const nt=_.canvas;b.appendChild(nt),_e=nt.style,_e.position="absolute",_e.left="0",_e.transformOrigin="top left",this.container=b,this.context=_}!this.containerReused&&a&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=a)}clipUnrotated(e,s,a){const d=getTopLeft(a),b=getTopRight(a),_=getBottomRight(a),_e=getBottomLeft(a);apply$1(s.coordinateToPixelTransform,d),apply$1(s.coordinateToPixelTransform,b),apply$1(s.coordinateToPixelTransform,_),apply$1(s.coordinateToPixelTransform,_e);const nt=this.inversePixelTransform;apply$1(nt,d),apply$1(nt,b),apply$1(nt,_),apply$1(nt,_e),e.save(),e.beginPath(),e.moveTo(Math.round(d[0]),Math.round(d[1])),e.lineTo(Math.round(b[0]),Math.round(b[1])),e.lineTo(Math.round(_[0]),Math.round(_[1])),e.lineTo(Math.round(_e[0]),Math.round(_e[1])),e.clip()}dispatchRenderEvent_(e,s,a){const d=this.getLayer();if(d.hasListener(e)){const b=new RenderEvent(e,this.inversePixelTransform,a,s);d.dispatchEvent(b)}}preRender(e,s){this.frameState=s,this.dispatchRenderEvent_(RenderEventType.PRERENDER,e,s)}postRender(e,s){this.dispatchRenderEvent_(RenderEventType.POSTRENDER,e,s)}getRenderTransform(e,s,a,d,b,_,_e){const nt=b/2,rt=_/2,ct=d/s,dt=-ct,pt=-e[0]+_e,bt=-e[1];return compose(this.tempTransform,nt,rt,ct,dt,-a,pt,bt)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Tile extends Target{constructor(e,s,a){super(),a=a||{},this.tileCoord=e,this.state=s,this.interimTile=null,this.key="",this.transition_=a.transition===void 0?250:a.transition,this.transitionStarts_={},this.interpolate=!!a.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.state===TileState.ERROR&&this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==TileState.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let s=this;do{if(e.getState()==TileState.LOADED){e.interimTile=null;break}e.getState()==TileState.LOADING?s=e:e.getState()==TileState.IDLE?s.interimTile=e.interimTile:s=e,e=s.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==TileState.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){abstract()}getAlpha(e,s){if(!this.transition_)return 1;let a=this.transitionStarts_[e];if(!a)a=s,this.transitionStarts_[e]=a;else if(a===-1)return 1;const d=s-a+1e3/60;return d>=this.transition_?1:easeIn(d/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}function listenImage(o,e,s){const a=o;let d=!0,b=!1,_=!1;const _e=[listenOnce(a,EventType.LOAD,function(){_=!0,b||e()})];return a.src&&IMAGE_DECODE?(b=!0,a.decode().then(function(){d&&e()}).catch(function(nt){d&&(_?e():s())})):_e.push(listenOnce(a,EventType.ERROR,s)),function(){d=!1,_e.forEach(unlistenByKey)}}function load(o,e){return new Promise((s,a)=>{function d(){_(),s(o)}function b(){_(),a(new Error("Image load error"))}function _(){o.removeEventListener("load",d),o.removeEventListener("error",b)}o.addEventListener("load",d),o.addEventListener("error",b)})}function decodeFallback(o,e){return e&&(o.src=e),o.src&&IMAGE_DECODE?new Promise((s,a)=>o.decode().then(()=>s(o)).catch(d=>o.complete&&o.width?s(o):a(d))):load(o)}class ImageTile extends Tile{constructor(e,s,a,d,b,_){super(e,s,_),this.crossOrigin_=d,this.src_=a,this.key=a,this.image_=new Image,d!==null&&(this.image_.crossOrigin=d),this.unlisten_=null,this.tileLoadFunction_=b}getImage(){return this.image_}setImage(e){this.image_=e,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function getBlankImage(){const o=createCanvasContext2D(1,1);return o.fillStyle="rgba(0,0,0,0)",o.fillRect(0,0,1,1),o.canvas}const ERROR_THRESHOLD=.5,MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(e,s,a,d,b,_){this.sourceProj_=e,this.targetProj_=s;let _e={};const nt=getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(Mt){const Et=Mt[0]+"/"+Mt[1];return _e[Et]||(_e[Et]=nt(Mt)),_e[Et]},this.maxSourceExtent_=d,this.errorThresholdSquared_=b*b,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!d&&!!this.sourceProj_.getExtent()&&getWidth(d)>=getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const rt=getTopLeft(a),ct=getTopRight(a),dt=getBottomRight(a),pt=getBottomLeft(a),bt=this.transformInv_(rt),xt=this.transformInv_(ct),wt=this.transformInv_(dt),Tt=this.transformInv_(pt),Rt=MAX_SUBDIVISION+(_?Math.max(0,Math.ceil(Math.log2(getArea(a)/(_*_*256*256)))):0);if(this.addQuad_(rt,ct,dt,pt,bt,xt,wt,Tt,Rt),this.wrapsXInSource_){let Mt=1/0;this.triangles_.forEach(function(Et,$t,Xt){Mt=Math.min(Mt,Et.source[0][0],Et.source[1][0],Et.source[2][0])}),this.triangles_.forEach(Et=>{if(Math.max(Et.source[0][0],Et.source[1][0],Et.source[2][0])-Mt>this.sourceWorldWidth_/2){const $t=[[Et.source[0][0],Et.source[0][1]],[Et.source[1][0],Et.source[1][1]],[Et.source[2][0],Et.source[2][1]]];$t[0][0]-Mt>this.sourceWorldWidth_/2&&($t[0][0]-=this.sourceWorldWidth_),$t[1][0]-Mt>this.sourceWorldWidth_/2&&($t[1][0]-=this.sourceWorldWidth_),$t[2][0]-Mt>this.sourceWorldWidth_/2&&($t[2][0]-=this.sourceWorldWidth_);const Xt=Math.min($t[0][0],$t[1][0],$t[2][0]);Math.max($t[0][0],$t[1][0],$t[2][0])-Xt<this.sourceWorldWidth_/2&&(Et.source=$t)}})}_e={}}addTriangle_(e,s,a,d,b,_){this.triangles_.push({source:[d,b,_],target:[e,s,a]})}addQuad_(e,s,a,d,b,_,_e,nt,rt){const ct=boundingExtent([b,_,_e,nt]),dt=this.sourceWorldWidth_?getWidth(ct)/this.sourceWorldWidth_:null,pt=this.sourceWorldWidth_,bt=this.sourceProj_.canWrapX()&&dt>.5&&dt<1;let xt=!1;if(rt>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const Tt=boundingExtent([e,s,a,d]);xt=getWidth(Tt)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||xt}!bt&&this.sourceProj_.isGlobal()&&dt&&(xt=dt>MAX_TRIANGLE_WIDTH||xt)}if(!xt&&this.maxSourceExtent_&&isFinite(ct[0])&&isFinite(ct[1])&&isFinite(ct[2])&&isFinite(ct[3])&&!intersects$1(ct,this.maxSourceExtent_))return;let wt=0;if(!xt&&(!isFinite(b[0])||!isFinite(b[1])||!isFinite(_[0])||!isFinite(_[1])||!isFinite(_e[0])||!isFinite(_e[1])||!isFinite(nt[0])||!isFinite(nt[1]))){if(rt>0)xt=!0;else if(wt=(!isFinite(b[0])||!isFinite(b[1])?8:0)+(!isFinite(_[0])||!isFinite(_[1])?4:0)+(!isFinite(_e[0])||!isFinite(_e[1])?2:0)+(!isFinite(nt[0])||!isFinite(nt[1])?1:0),wt!=1&&wt!=2&&wt!=4&&wt!=8)return}if(rt>0){if(!xt){const Tt=[(e[0]+a[0])/2,(e[1]+a[1])/2],Rt=this.transformInv_(Tt);let Mt;bt?Mt=(modulo(b[0],pt)+modulo(_e[0],pt))/2-modulo(Rt[0],pt):Mt=(b[0]+_e[0])/2-Rt[0];const Et=(b[1]+_e[1])/2-Rt[1];xt=Mt*Mt+Et*Et>this.errorThresholdSquared_}if(xt){if(Math.abs(e[0]-a[0])<=Math.abs(e[1]-a[1])){const Tt=[(s[0]+a[0])/2,(s[1]+a[1])/2],Rt=this.transformInv_(Tt),Mt=[(d[0]+e[0])/2,(d[1]+e[1])/2],Et=this.transformInv_(Mt);this.addQuad_(e,s,Tt,Mt,b,_,Rt,Et,rt-1),this.addQuad_(Mt,Tt,a,d,Et,Rt,_e,nt,rt-1)}else{const Tt=[(e[0]+s[0])/2,(e[1]+s[1])/2],Rt=this.transformInv_(Tt),Mt=[(a[0]+d[0])/2,(a[1]+d[1])/2],Et=this.transformInv_(Mt);this.addQuad_(e,Tt,Mt,d,b,Rt,Et,nt,rt-1),this.addQuad_(Tt,s,a,Mt,Rt,_,_e,Et,rt-1)}return}}if(bt){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}wt&11||this.addTriangle_(e,a,d,b,_e,nt),wt&14||this.addTriangle_(e,a,s,b,_e,_),wt&&(wt&13||this.addTriangle_(s,d,e,_,nt,b),wt&7||this.addTriangle_(s,d,a,_,nt,_e))}calculateSourceExtent(){const e=createEmpty();return this.triangles_.forEach(function(s,a,d){const b=s.source;extendCoordinate(e,b[0]),extendCoordinate(e,b[1]),extendCoordinate(e,b[2])}),e}getTriangles(){return this.triangles_}}let brokenDiagonalRendering_;const canvasPool$1=[];function drawTestTriangle(o,e,s,a,d){o.beginPath(),o.moveTo(0,0),o.lineTo(e,s),o.lineTo(a,d),o.closePath(),o.save(),o.clip(),o.fillRect(0,0,Math.max(e,a)+1,Math.max(s,d)),o.restore()}function verifyBrokenDiagonalRendering(o,e){return Math.abs(o[e*4]-210)>2||Math.abs(o[e*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const o=createCanvasContext2D(6,6,canvasPool$1);o.globalCompositeOperation="lighter",o.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(o,4,5,4,0),drawTestTriangle(o,4,5,0,5);const e=o.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(e,0)||verifyBrokenDiagonalRendering(e,4)||verifyBrokenDiagonalRendering(e,8),releaseCanvas(o),canvasPool$1.push(o.canvas)}return brokenDiagonalRendering_}function calculateSourceResolution(o,e,s,a){const d=transform$1(s,e,o);let b=getPointResolution(e,a,s);const _=e.getMetersPerUnit();_!==void 0&&(b*=_);const _e=o.getMetersPerUnit();_e!==void 0&&(b/=_e);const nt=o.getExtent();if(!nt||containsCoordinate(nt,d)){const rt=getPointResolution(o,b,d)/b;isFinite(rt)&&rt>0&&(b/=rt)}return b}function calculateSourceExtentResolution(o,e,s,a){const d=getCenter(s);let b=calculateSourceResolution(o,e,d,a);return(!isFinite(b)||b<=0)&&forEachCorner(s,function(_){return b=calculateSourceResolution(o,e,_,a),isFinite(b)&&b>0}),b}function render(o,e,s,a,d,b,_,_e,nt,rt,ct,dt,pt){const bt=createCanvasContext2D(Math.round(s*o),Math.round(s*e),canvasPool$1);if(dt||(bt.imageSmoothingEnabled=!1),nt.length===0)return bt.canvas;bt.scale(s,s);function xt(Mt){return Math.round(Mt*s)/s}bt.globalCompositeOperation="lighter";const wt=createEmpty();nt.forEach(function(Mt,Et,$t){extend$3(wt,Mt.extent)});let Tt;{const Mt=getWidth(wt),Et=getHeight(wt);Tt=createCanvasContext2D(Math.round(s*Mt/a),Math.round(s*Et/a),canvasPool$1),dt||(Tt.imageSmoothingEnabled=!1);const $t=s/a;nt.forEach(function(Xt,Zt,Nt){const Jt=Xt.extent[0]-wt[0],dn=-(Xt.extent[3]-wt[3]),Pn=getWidth(Xt.extent),an=getHeight(Xt.extent);Xt.image.width>0&&Xt.image.height>0&&Tt.drawImage(Xt.image,rt,rt,Xt.image.width-2*rt,Xt.image.height-2*rt,Jt*$t,dn*$t,Pn*$t,an*$t)})}const Rt=getTopLeft(_);return _e.getTriangles().forEach(function(Mt,Et,$t){const Xt=Mt.source,Zt=Mt.target;let Nt=Xt[0][0],Jt=Xt[0][1],dn=Xt[1][0],Pn=Xt[1][1],an=Xt[2][0],Vt=Xt[2][1];const ao=xt((Zt[0][0]-Rt[0])/b),hn=xt(-(Zt[0][1]-Rt[1])/b),fn=xt((Zt[1][0]-Rt[0])/b),It=xt(-(Zt[1][1]-Rt[1])/b),Vn=xt((Zt[2][0]-Rt[0])/b),ln=xt(-(Zt[2][1]-Rt[1])/b),uo=Nt,Ln=Jt;Nt=0,Jt=0,dn-=uo,Pn-=Ln,an-=uo,Vt-=Ln;const An=[[dn,Pn,0,0,fn-ao],[an,Vt,0,0,Vn-ao],[0,0,dn,Pn,It-hn],[0,0,an,Vt,ln-hn]],Wn=solveLinearSystem(An);if(!Wn)return;if(bt.save(),bt.beginPath(),isBrokenDiagonalRendering()||!dt){bt.moveTo(fn,It);const no=4,Ro=ao-fn,On=hn-It;for(let _o=0;_o<no;_o++)bt.lineTo(fn+xt((_o+1)*Ro/no),It+xt(_o*On/(no-1))),_o!=no-1&&bt.lineTo(fn+xt((_o+1)*Ro/no),It+xt((_o+1)*On/(no-1)));bt.lineTo(Vn,ln)}else bt.moveTo(fn,It),bt.lineTo(ao,hn),bt.lineTo(Vn,ln);bt.clip(),bt.transform(Wn[0],Wn[2],Wn[1],Wn[3],ao,hn),bt.translate(wt[0]-uo,wt[3]-Ln);let er;if(Tt)er=Tt.canvas,bt.scale(a/s,-a/s);else{const no=nt[0],Ro=no.extent;er=no.image,bt.scale(getWidth(Ro)/er.width,-getHeight(Ro)/er.height)}bt.drawImage(er,0,0),bt.restore()}),Tt&&(releaseCanvas(Tt),canvasPool$1.push(Tt.canvas)),ct&&(bt.save(),bt.globalCompositeOperation="source-over",bt.strokeStyle="black",bt.lineWidth=1,_e.getTriangles().forEach(function(Mt,Et,$t){const Xt=Mt.target,Zt=(Xt[0][0]-Rt[0])/b,Nt=-(Xt[0][1]-Rt[1])/b,Jt=(Xt[1][0]-Rt[0])/b,dn=-(Xt[1][1]-Rt[1])/b,Pn=(Xt[2][0]-Rt[0])/b,an=-(Xt[2][1]-Rt[1])/b;bt.beginPath(),bt.moveTo(Jt,dn),bt.lineTo(Zt,Nt),bt.lineTo(Pn,an),bt.closePath(),bt.stroke()}),bt.restore()),bt.canvas}class ReprojTile extends Tile{constructor(e,s,a,d,b,_,_e,nt,rt,ct,dt,pt){super(b,TileState.IDLE,pt),this.renderEdges_=dt!==void 0?dt:!1,this.pixelRatio_=_e,this.gutter_=nt,this.canvas_=null,this.sourceTileGrid_=s,this.targetTileGrid_=d,this.wrappedTileCoord_=_||b,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const bt=d.getTileCoordExtent(this.wrappedTileCoord_),xt=this.targetTileGrid_.getExtent();let wt=this.sourceTileGrid_.getExtent();const Tt=xt?getIntersection(bt,xt):bt;if(getArea(Tt)===0){this.state=TileState.EMPTY;return}const Rt=e.getExtent();Rt&&(wt?wt=getIntersection(wt,Rt):wt=Rt);const Mt=d.getResolution(this.wrappedTileCoord_[0]),Et=calculateSourceExtentResolution(e,a,Tt,Mt);if(!isFinite(Et)||Et<=0){this.state=TileState.EMPTY;return}const $t=ct!==void 0?ct:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(e,a,Tt,wt,Et*$t,Mt),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=s.getZForResolution(Et);let Xt=this.triangulation_.calculateSourceExtent();if(wt&&(e.canWrapX()?(Xt[1]=clamp(Xt[1],wt[1],wt[3]),Xt[3]=clamp(Xt[3],wt[1],wt[3])):Xt=getIntersection(Xt,wt)),!getArea(Xt))this.state=TileState.EMPTY;else{const Zt=s.getTileRangeForExtentAndZ(Xt,this.sourceZ_);for(let Nt=Zt.minX;Nt<=Zt.maxX;Nt++)for(let Jt=Zt.minY;Jt<=Zt.maxY;Jt++){const dn=rt(this.sourceZ_,Nt,Jt,_e);dn&&this.sourceTiles_.push(dn)}this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(s=>{s&&s.getState()==TileState.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(s.tileCoord),image:s.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=TileState.ERROR;else{const s=this.wrappedTileCoord_[0],a=this.targetTileGrid_.getTileSize(s),d=typeof a=="number"?a:a[0],b=typeof a=="number"?a:a[1],_=this.targetTileGrid_.getResolution(s),_e=this.sourceTileGrid_.getResolution(this.sourceZ_),nt=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render(d,b,this.pixelRatio_,_e,this.sourceTileGrid_.getExtent(),_,nt,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(s=>{const a=s.getState();if(a==TileState.IDLE||a==TileState.LOADING){e++;const d=listen(s,EventType.CHANGE,function(b){const _=s.getState();(_==TileState.LOADED||_==TileState.ERROR||_==TileState.EMPTY)&&(unlistenByKey(d),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(d)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(s,a,d){s.getState()==TileState.IDLE&&s.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas(this.canvas_.getContext("2d")),canvasPool$1.push(this.canvas_),this.canvas_=null),super.release()}}class TileRange{constructor(e,s,a,d){this.minX=e,this.maxX=s,this.minY=a,this.maxY=d}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,s){return this.minX<=e&&e<=this.maxX&&this.minY<=s&&s<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function createOrUpdate$1(o,e,s,a,d){return d!==void 0?(d.minX=o,d.maxX=e,d.minY=s,d.maxY=a,d):new TileRange(o,e,s,a)}function hasArea(o){return o[0]>0&&o[1]>0}function scale(o,e,s){return s===void 0&&(s=[0,0]),s[0]=o[0]*e+.5|0,s[1]=o[1]*e+.5|0,s}function toSize(o,e){return Array.isArray(o)?o:(e===void 0?e=[o,o]:(e[0]=o,e[1]=o),e)}class CanvasTileLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=createEmpty(),this.tmpTileRange_=new TileRange(0,0,0,0)}isDrawableTile(e){const s=this.getLayer(),a=e.getState(),d=s.getUseInterimTilesOnError();return a==TileState.LOADED||a==TileState.EMPTY||a==TileState.ERROR&&!d}getTile(e,s,a,d){const b=d.pixelRatio,_=d.viewState.projection,_e=this.getLayer();let rt=_e.getSource().getTile(e,s,a,b,_);return rt.getState()==TileState.ERROR&&_e.getUseInterimTilesOnError()&&_e.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(rt)||(rt=rt.getInterimTile()),rt}getData(e){const s=this.frameState;if(!s)return null;const a=this.getLayer(),d=apply$1(s.pixelToCoordinateTransform,e.slice()),b=a.getExtent();if(b&&!containsCoordinate(b,d))return null;const _=s.pixelRatio,_e=s.viewState.projection,nt=s.viewState,rt=a.getRenderSource(),ct=rt.getTileGridForProjection(nt.projection),dt=rt.getTilePixelRatio(s.pixelRatio);for(let pt=ct.getZForResolution(nt.resolution);pt>=ct.getMinZoom();--pt){const bt=ct.getTileCoordForCoordAndZ(d,pt),xt=rt.getTile(pt,bt[1],bt[2],_,_e);if(!(xt instanceof ImageTile||xt instanceof ReprojTile)||xt instanceof ReprojTile&&xt.getState()===TileState.EMPTY)return null;if(xt.getState()!==TileState.LOADED)continue;const wt=ct.getOrigin(pt),Tt=toSize(ct.getTileSize(pt)),Rt=ct.getResolution(pt),Mt=Math.floor(dt*((d[0]-wt[0])/Rt-bt[1]*Tt[0])),Et=Math.floor(dt*((wt[1]-d[1])/Rt-bt[2]*Tt[1])),$t=Math.round(dt*rt.getGutterForProjection(nt.projection));return this.getImageData(xt.getImage(),Mt+$t,Et+$t)}return null}loadedTileCallback(e,s,a){return this.isDrawableTile(a)?super.loadedTileCallback(e,s,a):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,s){const a=e.layerStatesArray[e.layerIndex],d=e.viewState,b=d.projection,_=d.resolution,_e=d.center,nt=d.rotation,rt=e.pixelRatio,ct=this.getLayer(),dt=ct.getSource(),pt=dt.getRevision(),bt=dt.getTileGridForProjection(b),xt=bt.getZForResolution(_,dt.zDirection),wt=bt.getResolution(xt);let Tt=e.extent;const Rt=e.viewState.resolution,Mt=dt.getTilePixelRatio(rt),Et=Math.round(getWidth(Tt)/Rt*rt),$t=Math.round(getHeight(Tt)/Rt*rt),Xt=a.extent&&fromUserExtent(a.extent);Xt&&(Tt=getIntersection(Tt,fromUserExtent(a.extent)));const Zt=wt*Et/2/Mt,Nt=wt*$t/2/Mt,Jt=[_e[0]-Zt,_e[1]-Nt,_e[0]+Zt,_e[1]+Nt],dn=bt.getTileRangeForExtentAndZ(Tt,xt),Pn={};Pn[xt]={};const an=this.createLoadedTileFinder(dt,b,Pn),Vt=this.tmpExtent,ao=this.tmpTileRange_;this.newTiles_=!1;const hn=nt?getRotatedViewport(d.center,Rt,nt,e.size):void 0;for(let er=dn.minX;er<=dn.maxX;++er)for(let no=dn.minY;no<=dn.maxY;++no){if(nt&&!bt.tileCoordIntersectsViewport([xt,er,no],hn))continue;const Ro=this.getTile(xt,er,no,e);if(this.isDrawableTile(Ro)){const Yt=getUid(this);if(Ro.getState()==TileState.LOADED){Pn[xt][Ro.tileCoord.toString()]=Ro;let jr=Ro.inTransition(Yt);jr&&a.opacity!==1&&(Ro.endTransition(Yt),jr=!1),!this.newTiles_&&(jr||!this.renderedTiles.includes(Ro))&&(this.newTiles_=!0)}if(Ro.getAlpha(Yt,e.time)===1)continue}const On=bt.getTileCoordChildTileRange(Ro.tileCoord,ao,Vt);let _o=!1;On&&(_o=an(xt+1,On)),_o||bt.forEachTileCoordParentTileRange(Ro.tileCoord,an,ao,Vt)}const fn=wt/_*rt/Mt;compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/rt,1/rt,nt,-Et/2,-$t/2);const It=toString$3(this.pixelTransform);this.useContainer(s,It,this.getBackground(e));const Vn=this.context,ln=Vn.canvas;makeInverse(this.inversePixelTransform,this.pixelTransform),compose(this.tempTransform,Et/2,$t/2,fn,fn,0,-Et/2,-$t/2),ln.width!=Et||ln.height!=$t?(ln.width=Et,ln.height=$t):this.containerReused||Vn.clearRect(0,0,Et,$t),Xt&&this.clipUnrotated(Vn,e,Xt),dt.getInterpolate()||(Vn.imageSmoothingEnabled=!1),this.preRender(Vn,e),this.renderedTiles.length=0;let uo=Object.keys(Pn).map(Number);uo.sort(ascending);let Ln,An,Wn;a.opacity===1&&(!this.containerReused||dt.getOpaque(e.viewState.projection))?uo=uo.reverse():(Ln=[],An=[]);for(let er=uo.length-1;er>=0;--er){const no=uo[er],Ro=dt.getTilePixelSize(no,rt,b),_o=bt.getResolution(no)/wt,Yt=Ro[0]*_o*fn,jr=Ro[1]*_o*fn,lo=bt.getTileCoordForCoordAndZ(getTopLeft(Jt),no),Ho=bt.getTileCoordExtent(lo),mo=apply$1(this.tempTransform,[Mt*(Ho[0]-Jt[0])/wt,Mt*(Jt[3]-Ho[3])/wt]),Co=Mt*dt.getGutterForProjection(b),mn=Pn[no];for(const wn in mn){const Dn=mn[wn],rn=Dn.tileCoord,Cn=lo[1]-rn[1],Nn=Math.round(mo[0]-(Cn-1)*Yt),zn=lo[2]-rn[2],So=Math.round(mo[1]-(zn-1)*jr),Hn=Math.round(mo[0]-Cn*Yt),Tn=Math.round(mo[1]-zn*jr),Jn=Nn-Hn,bo=So-Tn,$n=xt===no,oo=$n&&Dn.getAlpha(getUid(this),e.time)!==1;let wo=!1;if(!oo)if(Ln){Wn=[Hn,Tn,Hn+Jn,Tn,Hn+Jn,Tn+bo,Hn,Tn+bo];for(let Oo=0,Ir=Ln.length;Oo<Ir;++Oo)if(xt!==no&&no<An[Oo]){const sr=Ln[Oo];intersects$1([Hn,Tn,Hn+Jn,Tn+bo],[sr[0],sr[3],sr[4],sr[7]])&&(wo||(Vn.save(),wo=!0),Vn.beginPath(),Vn.moveTo(Wn[0],Wn[1]),Vn.lineTo(Wn[2],Wn[3]),Vn.lineTo(Wn[4],Wn[5]),Vn.lineTo(Wn[6],Wn[7]),Vn.moveTo(sr[6],sr[7]),Vn.lineTo(sr[4],sr[5]),Vn.lineTo(sr[2],sr[3]),Vn.lineTo(sr[0],sr[1]),Vn.clip())}Ln.push(Wn),An.push(no)}else Vn.clearRect(Hn,Tn,Jn,bo);this.drawTileImage(Dn,e,Hn,Tn,Jn,bo,Co,$n),Ln&&!oo?(wo&&Vn.restore(),this.renderedTiles.unshift(Dn)):this.renderedTiles.push(Dn),this.updateUsedTiles(e.usedTiles,dt,Dn)}}return this.renderedRevision=pt,this.renderedResolution=wt,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,Jt),this.renderedExtent_=Jt,this.renderedPixelRatio=rt,this.renderedProjection=b,this.manageTilePyramid(e,dt,bt,rt,b,Tt,xt,ct.getPreload()),this.scheduleExpireCache(e,dt),this.postRender(Vn,e),a.extent&&Vn.restore(),Vn.imageSmoothingEnabled=!0,It!==ln.style.transform&&(ln.style.transform=It),this.container}drawTileImage(e,s,a,d,b,_,_e,nt){const rt=this.getTileImage(e);if(!rt)return;const ct=getUid(this),dt=s.layerStatesArray[s.layerIndex],pt=dt.opacity*(nt?e.getAlpha(ct,s.time):1),bt=pt!==this.context.globalAlpha;bt&&(this.context.save(),this.context.globalAlpha=pt),this.context.drawImage(rt,_e,_e,rt.width-2*_e,rt.height-2*_e,a,d,b,_),bt&&this.context.restore(),pt!==dt.opacity?s.animate=!0:nt&&e.endTransition(ct)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,s){if(s.canExpireCache()){const a=(function(d,b,_){const _e=getUid(d);_e in _.usedTiles&&d.expireCache(_.viewState.projection,_.usedTiles[_e])}).bind(null,s);e.postRenderFunctions.push(a)}}updateUsedTiles(e,s,a){const d=getUid(s);d in e||(e[d]={}),e[d][a.getKey()]=!0}manageTilePyramid(e,s,a,d,b,_,_e,nt,rt){const ct=getUid(s);ct in e.wantedTiles||(e.wantedTiles[ct]={});const dt=e.wantedTiles[ct],pt=e.tileQueue,bt=a.getMinZoom(),xt=e.viewState.rotation,wt=xt?getRotatedViewport(e.viewState.center,e.viewState.resolution,xt,e.size):void 0;let Tt=0,Rt,Mt,Et,$t,Xt,Zt;for(Zt=bt;Zt<=_e;++Zt)for(Mt=a.getTileRangeForExtentAndZ(_,Zt,Mt),Et=a.getResolution(Zt),$t=Mt.minX;$t<=Mt.maxX;++$t)for(Xt=Mt.minY;Xt<=Mt.maxY;++Xt)xt&&!a.tileCoordIntersectsViewport([Zt,$t,Xt],wt)||(_e-Zt<=nt?(++Tt,Rt=s.getTile(Zt,$t,Xt,d,b),Rt.getState()==TileState.IDLE&&(dt[Rt.getKey()]=!0,pt.isKeyQueued(Rt.getKey())||pt.enqueue([Rt,ct,a.getTileCoordCenter(Rt.tileCoord),Et])),rt!==void 0&&rt(Rt)):s.useTile(Zt,$t,Xt,b));s.updateCacheSize(Tt,b)}}class TileLayer extends BaseTileLayer{constructor(e){super(e)}createRenderer(){return new CanvasTileLayerRenderer(this)}}var LoggerByDefault={getLogger:function(o){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var s=o||"default";return loglevelExports.getLogger(s)}},MessagesResources={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(o,e){if(Object.keys(arguments).length===0)return"Message indefined !";var s=Array.prototype.slice.call(arguments),a=s.shift(),d=s,b=this[a];try{Array.isArray(d)&&d.length>0?b=b.replace("%var%",d.join(" - ")):b=b.replace("%var%","%var% (not specified)")}catch{}return b}},Helper={normalyzeParameters:function(o){var e=null;if(o){var s=[];for(var a in o)if(o.hasOwnProperty(a)){var d=o[a];d||(d=""),s.push(a+"="+d)}e=s.join("&")}return e},normalyzeUrl:function(o,e,s){var a=o;if(o){if(o.split("?").length-1>=2){var d=o.search(/\?/)+1;a=o.substring(0,d)+o.slice(d).replace(/\?/g,"&")}var b=o.indexOf("?");b===-1&&(a+="?"),b!==-1&&b!==o.length-1&&(a+="&")}return e&&(typeof e=="string"?(e=e.replace("?",""),a+=e):a+=this.normalyzeParameters(e)),s&&(a=encodeURIComponent(a)),a},indent:function(o,e){var s=o||0;return new Array(s+1).join("	")+e}};function commonjsRequire(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var es6Promise={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(o,e){(function(s,a){o.exports=a()})(commonjsGlobal,function(){function s(Tn){var Jn=typeof Tn;return Tn!==null&&(Jn==="object"||Jn==="function")}function a(Tn){return typeof Tn=="function"}var d=void 0;Array.isArray?d=Array.isArray:d=function(Tn){return Object.prototype.toString.call(Tn)==="[object Array]"};var b=d,_=0,_e=void 0,nt=void 0,rt=function(Jn,bo){Zt[_]=Jn,Zt[_+1]=bo,_+=2,_===2&&(nt?nt(Nt):dn())};function ct(Tn){nt=Tn}function dt(Tn){rt=Tn}var pt=typeof window<"u"?window:void 0,bt=pt||{},xt=bt.MutationObserver||bt.WebKitMutationObserver,wt=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",Tt=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function Rt(){return function(){return process.nextTick(Nt)}}function Mt(){return typeof _e<"u"?function(){_e(Nt)}:Xt()}function Et(){var Tn=0,Jn=new xt(Nt),bo=document.createTextNode("");return Jn.observe(bo,{characterData:!0}),function(){bo.data=Tn=++Tn%2}}function $t(){var Tn=new MessageChannel;return Tn.port1.onmessage=Nt,function(){return Tn.port2.postMessage(0)}}function Xt(){var Tn=setTimeout;return function(){return Tn(Nt,1)}}var Zt=new Array(1e3);function Nt(){for(var Tn=0;Tn<_;Tn+=2){var Jn=Zt[Tn],bo=Zt[Tn+1];Jn(bo),Zt[Tn]=void 0,Zt[Tn+1]=void 0}_=0}function Jt(){try{var Tn=Function("return this")().require("vertx");return _e=Tn.runOnLoop||Tn.runOnContext,Mt()}catch{return Xt()}}var dn=void 0;wt?dn=Rt():xt?dn=Et():Tt?dn=$t():pt===void 0&&typeof commonjsRequire=="function"?dn=Jt():dn=Xt();function Pn(Tn,Jn){var bo=this,$n=new this.constructor(ao);$n[Vt]===void 0&&Co($n);var oo=bo._state;if(oo){var wo=arguments[oo-1];rt(function(){return jr(oo,$n,wo,bo._result)})}else _o(bo,$n,Tn,Jn);return $n}function an(Tn){var Jn=this;if(Tn&&typeof Tn=="object"&&Tn.constructor===Jn)return Tn;var bo=new Jn(ao);return er(bo,Tn),bo}var Vt=Math.random().toString(36).substring(2);function ao(){}var hn=void 0,fn=1,It=2;function Vn(){return new TypeError("You cannot resolve a promise with itself")}function ln(){return new TypeError("A promises callback cannot return that same promise.")}function uo(Tn,Jn,bo,$n){try{Tn.call(Jn,bo,$n)}catch(oo){return oo}}function Ln(Tn,Jn,bo){rt(function($n){var oo=!1,wo=uo(bo,Jn,function(Oo){oo||(oo=!0,Jn!==Oo?er($n,Oo):Ro($n,Oo))},function(Oo){oo||(oo=!0,On($n,Oo))},"Settle: "+($n._label||" unknown promise"));!oo&&wo&&(oo=!0,On($n,wo))},Tn)}function An(Tn,Jn){Jn._state===fn?Ro(Tn,Jn._result):Jn._state===It?On(Tn,Jn._result):_o(Jn,void 0,function(bo){return er(Tn,bo)},function(bo){return On(Tn,bo)})}function Wn(Tn,Jn,bo){Jn.constructor===Tn.constructor&&bo===Pn&&Jn.constructor.resolve===an?An(Tn,Jn):bo===void 0?Ro(Tn,Jn):a(bo)?Ln(Tn,Jn,bo):Ro(Tn,Jn)}function er(Tn,Jn){if(Tn===Jn)On(Tn,Vn());else if(s(Jn)){var bo=void 0;try{bo=Jn.then}catch($n){On(Tn,$n);return}Wn(Tn,Jn,bo)}else Ro(Tn,Jn)}function no(Tn){Tn._onerror&&Tn._onerror(Tn._result),Yt(Tn)}function Ro(Tn,Jn){Tn._state===hn&&(Tn._result=Jn,Tn._state=fn,Tn._subscribers.length!==0&&rt(Yt,Tn))}function On(Tn,Jn){Tn._state===hn&&(Tn._state=It,Tn._result=Jn,rt(no,Tn))}function _o(Tn,Jn,bo,$n){var oo=Tn._subscribers,wo=oo.length;Tn._onerror=null,oo[wo]=Jn,oo[wo+fn]=bo,oo[wo+It]=$n,wo===0&&Tn._state&&rt(Yt,Tn)}function Yt(Tn){var Jn=Tn._subscribers,bo=Tn._state;if(Jn.length!==0){for(var $n=void 0,oo=void 0,wo=Tn._result,Oo=0;Oo<Jn.length;Oo+=3)$n=Jn[Oo],oo=Jn[Oo+bo],$n?jr(bo,$n,oo,wo):oo(wo);Tn._subscribers.length=0}}function jr(Tn,Jn,bo,$n){var oo=a(bo),wo=void 0,Oo=void 0,Ir=!0;if(oo){try{wo=bo($n)}catch(sr){Ir=!1,Oo=sr}if(Jn===wo){On(Jn,ln());return}}else wo=$n;Jn._state!==hn||(oo&&Ir?er(Jn,wo):Ir===!1?On(Jn,Oo):Tn===fn?Ro(Jn,wo):Tn===It&&On(Jn,wo))}function lo(Tn,Jn){try{Jn(function($n){er(Tn,$n)},function($n){On(Tn,$n)})}catch(bo){On(Tn,bo)}}var Ho=0;function mo(){return Ho++}function Co(Tn){Tn[Vt]=Ho++,Tn._state=void 0,Tn._result=void 0,Tn._subscribers=[]}function mn(){return new Error("Array Methods must be provided an Array")}var wn=function(){function Tn(Jn,bo){this._instanceConstructor=Jn,this.promise=new Jn(ao),this.promise[Vt]||Co(this.promise),b(bo)?(this.length=bo.length,this._remaining=bo.length,this._result=new Array(this.length),this.length===0?Ro(this.promise,this._result):(this.length=this.length||0,this._enumerate(bo),this._remaining===0&&Ro(this.promise,this._result))):On(this.promise,mn())}return Tn.prototype._enumerate=function(bo){for(var $n=0;this._state===hn&&$n<bo.length;$n++)this._eachEntry(bo[$n],$n)},Tn.prototype._eachEntry=function(bo,$n){var oo=this._instanceConstructor,wo=oo.resolve;if(wo===an){var Oo=void 0,Ir=void 0,sr=!1;try{Oo=bo.then}catch(as){sr=!0,Ir=as}if(Oo===Pn&&bo._state!==hn)this._settledAt(bo._state,$n,bo._result);else if(typeof Oo!="function")this._remaining--,this._result[$n]=bo;else if(oo===So){var vr=new oo(ao);sr?On(vr,Ir):Wn(vr,bo,Oo),this._willSettleAt(vr,$n)}else this._willSettleAt(new oo(function(as){return as(bo)}),$n)}else this._willSettleAt(wo(bo),$n)},Tn.prototype._settledAt=function(bo,$n,oo){var wo=this.promise;wo._state===hn&&(this._remaining--,bo===It?On(wo,oo):this._result[$n]=oo),this._remaining===0&&Ro(wo,this._result)},Tn.prototype._willSettleAt=function(bo,$n){var oo=this;_o(bo,void 0,function(wo){return oo._settledAt(fn,$n,wo)},function(wo){return oo._settledAt(It,$n,wo)})},Tn}();function Dn(Tn){return new wn(this,Tn).promise}function rn(Tn){var Jn=this;return b(Tn)?new Jn(function(bo,$n){for(var oo=Tn.length,wo=0;wo<oo;wo++)Jn.resolve(Tn[wo]).then(bo,$n)}):new Jn(function(bo,$n){return $n(new TypeError("You must pass an array to race."))})}function Cn(Tn){var Jn=this,bo=new Jn(ao);return On(bo,Tn),bo}function Nn(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function zn(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var So=function(){function Tn(Jn){this[Vt]=mo(),this._result=this._state=void 0,this._subscribers=[],ao!==Jn&&(typeof Jn!="function"&&Nn(),this instanceof Tn?lo(this,Jn):zn())}return Tn.prototype.catch=function(bo){return this.then(null,bo)},Tn.prototype.finally=function(bo){var $n=this,oo=$n.constructor;return a(bo)?$n.then(function(wo){return oo.resolve(bo()).then(function(){return wo})},function(wo){return oo.resolve(bo()).then(function(){throw wo})}):$n.then(bo,bo)},Tn}();So.prototype.then=Pn,So.all=Dn,So.race=rn,So.resolve=an,So.reject=Cn,So._setScheduler=ct,So._setAsap=dt,So._asap=rt;function Hn(){var Tn=void 0;if(typeof commonjsGlobal<"u")Tn=commonjsGlobal;else if(typeof self<"u")Tn=self;else try{Tn=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Jn=Tn.Promise;if(Jn){var bo=null;try{bo=Object.prototype.toString.call(Jn.resolve())}catch{}if(bo==="[object Promise]"&&!Jn.cast)return}Tn.Promise=So}return So.polyfill=Hn,So.Promise=So,So})})(es6Promise);var es6PromiseExports=es6Promise.exports;const ES6Promise=getDefaultExportFromCjs$2(es6PromiseExports);var XHR={call:function(o){var e=LoggerByDefault.getLogger("XHR");if(e.trace("[XHR::call()]"),ES6Promise.polyfill(),!o.url)throw new Error("missing parameter : url is not defined !");if(!o.method)throw new Error("missing parameter : method is not defined !");o.format||(o.format="text");var s={};switch(s.url=o.url,s.data=o.data?o.data:null,s.method=o.method,s.timeOut=o.timeOut||0,s.scope=o.scope||this,s.proxy=o.proxy||null,s.content=o.content||null,s.headers=o.headers||{referer:"http://localhost"},o.method){case"DELETE":case"GET":break;case"PUT":case"POST":s.content=o.content?o.content:"application/x-www-form-urlencoded",s.headers=o.headers?o.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(o.format){case"text":this.__call(s).then(function(a){e.trace(a),o.onResponse.call(this,a)}).catch(function(a){o.onFailure.call(this,a)});break;case"json":this.__callJSON(s).then(function(a){e.trace(a),o.onResponse.call(this,a)}).catch(function(a){o.onFailure.call(this,a)});break;case"xml":this.__callXML(s).then(function(a){e.trace(a),o.onResponse.call(this,a)}).catch(function(a){o.onFailure.call(this,a)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(o){var e=LoggerByDefault.getLogger("XHR");e.trace("[XHR::__call()]");var s=new Promise(function(a,d){var b=o.method==="POST"||o.method==="PUT"?1:0;o.data&&(typeof o.data=="object"&&Object.keys(o.data).length||typeof o.data=="string"&&o.data.length)&&!b&&(o.url=Helper.normalyzeUrl(o.url,o.data)),e.trace("URL = ",o.url);var _=null;if(typeof window>"u"){var _e=require("node-fetch"),nt={headers:{Referer:"https://localhost"}};return o.data&&typeof o.data=="string"&&b&&(nt={method:o.method,body:o.data,headers:{"Content-Type":o.content,Referer:"https://localhost"}}),_e(o.url,nt).then(function(pt){if(pt.ok)a(pt.text());else{var bt="Errors Occured on Http Request (status : '"+pt.statusText+"' | url : '"+pt.url+"')",xt=pt.status;d({message:bt,status:xt})}}).catch(function(pt){d({message:pt,status:-1})})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),_=new XMLHttpRequest,_.open(o.method,o.url,!0),_.overrideMimeType=o.content;var rt=null;o.timeOut>0&&(e.trace("XHR - TimeOut actif !"),rt=window.setTimeout(function(){var pt="TimeOut Occured on Http Request with XMLHttpRequest !";d({message:pt,status:-1})},o.timeOut)),b&&(e.trace("data = ",o.data),_.setRequestHeader("Content-type",o.content)),_.onerror=function(pt){console.log(pt),d(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},_.ontimeout=function(pt){console.log(pt),d(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},_.onreadystatechange=function(pt){if(_.readyState===4)if(_.status===200)window.clearTimeout(rt),a(_.response);else{var bt="Errors Occured on Http Request (status : '"+pt.target.statusText+"' | url : '"+pt.target.responseURL+"' | response : '"+pt.target.response+"')",xt=pt.target.status;d({message:bt,status:xt})}};var ct=o.data&&b?o.data:null;_.send(ct)}else if(window.XDomainRequest){e.trace("XDomainRequest"),_=new XDomainRequest,_.open(o.method,o.url),_.overrideMimeType=o.content,o.timeOut>0&&(_.timeout=o.timeout,e.trace("XHR - TimeOut actif !")),b&&_.setRequestHeader("Content-type",o.content),_.onerror=function(){d(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},_.ontimeout=function(){d(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},_.onload=function(pt){if(_.status===200)a(_.responseText);else{var bt="Errors Occured on Http Request (status : '"+pt.target.statusText+"' | url : '"+pt.target.responseURL+"')",xt=pt.target.status;d({message:bt,status:xt})}};var dt=o.data&&b?o.data:null;_.send(dt)}else throw new Error("CORS not supported")});return s},__callJSON:function(o){return this.__call(o).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",o.url,e)})},__callXML:function(o){return this.__call(o).then(function(e){var s;if(typeof window>"u"){var a=require("@xmldom/xmldom").DOMParser;s=new a().parseFromString(e,"text/xml")}else if(window.DOMParser){var d=new window.DOMParser;s=d.parseFromString(e,"text/xml")}else s=new window.ActiveXObject("Microsoft.XMLDOM"),s.async=!1,s.loadXML(e);return s}).catch(function(e){console.log("__callXML failed on : ",o.url,e)})}},JSONP={uuid:function(){var o=Math.floor(Date.now());return function(){return o++}}(),call:function(o){var e=LoggerByDefault.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!o)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!o.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(o.timeOut||(e.info("setting 'options.timeOut' default value"),o.timeOut=0),!o.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var s=typeof o.callbackSuffix=="string"?o.callbackSuffix:this.uuid(),a=!1,d=!1,b=o.url.indexOf("callback=");if(b!==-1){a=!0;var _=o.url.indexOf("&",b);_===-1&&(_=o.url.length);var _e=o.url.substring(b+9,_);_e&&(d=!0,o.callbackName=_e,e.info("setting 'options.callbackName' value ("+o.callbackName+") from 'options.url' parameter"))}if(!a){var nt=o.url.indexOf("?");nt===-1?o.url=o.url+"?callback=":nt===o.url.length?o.url=o.url+"callback=":o.url=o.url+"&callback=",e.info("setting callback default key in 'options.url' : "+o.url)}var rt=o.callbackName?!0:d;if(d||(o.callbackName||(e.info("setting 'options.callbackName' default value"),o.callbackName="callback",(s||s==="")&&(o.callbackName+=s)),o.url=o.url.replace("callback=","callback="+o.callbackName),e.info("setting callback function name in 'options.url' : "+o.url)),o.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),o.onTimeOut=function(){console.log("TimeOut while invoking url : "+o.url)}),!rt){var ct=this,dt=null;o.timeOut>0&&(dt=window.setTimeout(function(){window[o.callbackName]=function(){},o.onTimeOut(),ct._deleteScript(s)},o.timeOut)),window[o.callbackName]=function(pt){window.clearTimeout(dt),o.onResponse(pt),ct._deleteScript(s)}}this._createScript(s,o.url)},_createScript:function(o,e){var s,a=document.getElementById("results"+o);s=document.createElement("script"),s.setAttribute("type","text/javascript"),s.setAttribute("src",e),s.setAttribute("charset","UTF-8"),s.setAttribute("id","results"+o),s.setAttribute("async","true");var d=document.documentElement||document.getElementsByTagName("head")[0];a===null?d.appendChild(s):d.replaceChild(s,a)},_deleteScript:function(o){var e=document.getElementById("results"+o);if(e){var s=e.parentNode||document.documentElement;if(!s)return;s.removeChild(e)}}},Protocol={send:function(o){var e=o||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&o.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(o.protocol==="XHR"||o.format==="json"?e.wrap=!1:o.protocol==="JSONP"&&o.format==="xml"&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var s={};s.output=e.output,s.callback=e.callback,delete s.callback,e.url=Helper.normalyzeUrl(o.url,s)}switch(e.protocol){case"XHR":o.method==="GET"&&o.nocache&&(e.url=Helper.normalyzeUrl(e.url,{t:new Date().getTime()})),XHR.call(e);break;case"JSONP":e.data&&(e.url=Helper.normalyzeUrl(e.url,e.data)),JSONP.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function ErrorService(o){if(!(this instanceof ErrorService))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=o;typeof o=="string"||o instanceof String?(this.message=o,this.status=-1,this.type=ErrorService.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=new Error().stack}ErrorService.TYPE_SRVERR="SERVICE_ERROR";ErrorService.TYPE_USEERR="USAGE_ERROR";ErrorService.TYPE_UNKERR="UNKNOWN_ERROR";ErrorService.prototype=Object.create(Error.prototype,{constructor:{value:ErrorService,writable:!0,configurable:!0}});const name$1="geoportal-access-lib",version$2="3.4.3",date$1="21/08/2024",description$1="French Geoportal resources access library",module$1="src/Gp.js",main="dist/GpServices-src.js",homepage$1="https://github.com/IGNF/geoportal-access-lib#readme",scripts={clean:'echo "Warning: no yet implemented!" && exit 0',setup:"npm install",cover:"nyc --reporter=lcov --reporter=text npm run test",eslint:"eslint src/",build:"webpack --mode=none","build:prod":"webpack --mode=production","build:dev":"webpack --mode=development",test:'mocha-webpack --reporter mochawesome --reporter-options reportDir=test-report,reportFilename=index --webpack-config ./test/webpack/webpack.test.js --glob "test_*.js" test/spec/',"test:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.js","test:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.docker.js","test:end-to-end:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.js","test:end-to-end:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.docker.js",sample:"npm run sample:serve","sample:serve":"webpack-dev-server --mode=none --open-page samples/index-src.html --https --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:prod":"webpack-dev-server --mode=production --open-page samples/index-prod.html --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:dev":"webpack-dev-server --mode=development --open-page samples/index-map.html --content-base . --output-public-path '/dist/' --port 9001 --open",doc:"npm run doc:serve","doc:serve":"webpack-dev-server --content-base jsdoc --port 9001 --open"},engines$1={node:"<=16"},nyc={include:["src/**/*.js"],instrument:!1,sourceMap:!1},repository$1={type:"git",url:"https://github.com/IGNF/geoportal-access-lib.git"},keywords$1=["geoplateforme","geoportail","webservice","javascript","es6"],author$1="IGNF",license$1="CECILL-B",dependencies$1={"es6-promise":"^4.2.4","node-fetch":"^2.6.1","@xmldom/xmldom":"^0.8.10"},devDependencies={"@babel/core":"^7.12.10","@babel/plugin-transform-template-literals":"^7.12.1","@babel/preset-env":"^7.12.11","babel-loader":"^8.2.2",chai:"^4.1.2","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^5.1.2",eslint:"^7.18.0","eslint-config-standard":"^16.0.2","eslint-loader":"^4.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^5.0.0",glob:"^7.1.2","handlebars-layouts":"^3.1.4","handlebars-webpack-plugin":"^1.4.1","html-webpack-plugin":"^4.5.1","istanbul-instrumenter-loader":"^3.0.1","jsdoc-webpack-plugin":"^0.3.0",loglevel:"^1.6.1",mocha:"^7.2.0","mocha-loader":"^5.1.5","mocha-webpack":"^2.0.0-beta.0",mochawesome:"^6.2.1",nyc:"^15.1.0",path:"^0.12.7","replace-bundle-webpack-plugin":"^1.0.0",sinon:"^9.2.4","sinon-es6":"0.0.3","speed-measure-webpack-plugin":"^1.4.2","string-template":"^1.0.0","terser-webpack-plugin":"^2.3.8",webpack:"^4.46.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-node-externals":"^2.5.2","webpack-shell-plugin":"^0.5.0"},bundledDependencies=[],peerDependencies={},optionalDependencies={},Pkg$1={name:name$1,version:version$2,date:date$1,description:description$1,module:module$1,main,homepage:homepage$1,scripts,engines:engines$1,nyc,repository:repository$1,keywords:keywords$1,author:author$1,license:license$1,dependencies:dependencies$1,devDependencies,bundledDependencies,peerDependencies,optionalDependencies};function CommonService(o){if(!(this instanceof CommonService))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR"));this.logger=LoggerByDefault.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(a){console.log("onSuccess - la reponse est la suivante : ",a)},onFailure:function(a){a.status===200||!a.status?console.log("onFailure : ",a.message):console.log("onFailure - Erreur (",a.status,") : ",a.message)}};for(var e in o)o.hasOwnProperty(e)&&(this.options[e]=o[e]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(a){console.log("onSuccess - la rponse brute du service est la suivante : ",a)});var s=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!s)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod=typeof o.httpMethod=="string"?o.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof o.protocol=="string"?o.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=o.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}CommonService.prototype={constructor:CommonService,call:function(){this.logger.trace("CommonService::call ()");var o=this;function e(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(o,b,s)}e.call(o);function s(_){this.logger.trace("CommonService::onBuildRequest : ",_),this.callService.call(o,b,a)}function a(_){this.logger.trace("CommonService::onCallService : ",_),this.analyzeResponse.call(o,b,d)}function d(_){if(this.logger.trace("CommonService::onAnalyzeResponse : ",_),_)this.options.onSuccess.call(this,_);else return b.call(this,new ErrorService("Analyse de la reponse en chec !?"))}function b(_){this.logger.trace("CommonService::onError()");var _e=_;_e instanceof ErrorService||(_e=new ErrorService(_.message)),this.options.onFailure.call(this,_e)}},buildRequest:function(o,e){this.logger.error("overwritten method !"),o&&o.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(o,e){var s=null,a=this.request,d=!!(this.options.proxyURL&&this.options.protocol==="XHR"),b={"gp-access-lib":Pkg$1.version};this.options.apiKey&&(b.apiKey=this.options.apiKey),this.options.serverUrl=Helper.normalyzeUrl(this.options.serverUrl,b,!1),d&&(this.options.httpMethod==="GET"&&(s=this.options.proxyURL+Helper.normalyzeUrl(this.options.serverUrl,this.request,!0),a=null),this.options.httpMethod==="POST"&&(s=this.options.proxyURL+Helper.normalyzeUrl(this.options.serverUrl,null,!0),a=this.request));var _=this,_e={url:s||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:a,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(nt){_.logger.trace("callService::onResponse()");var rt=null;if(_.options.protocol==="XHR"&&(_.logger.trace("Response XHR",nt),rt=nt),_.options.protocol==="JSONP")if(_.logger.trace("Response JSON",nt),nt)if(nt.http)if(nt.http.status!==200){o.call(_,new ErrorService({status:nt.http.status,message:nt.http.error,type:ErrorService.TYPE_SRVERR}));return}else rt=nt.xml,_.options.rawResponse&&(rt=nt);else rt=nt;else{o.call(_,new ErrorService("Le contenu de la reponse est vide !?"));return}if(typeof _.options.onBeforeParse=="function"){var ct=_.options.onBeforeParse(rt);typeof ct=="string"&&(rt=ct)}_.response=rt,e.call(_,rt)},onFailure:function(nt){_.logger.trace("callService::onFailure()"),nt.type=ErrorService.TYPE_SRVERR,o.call(_,new ErrorService(nt))},onTimeOut:function(){_.logger.trace("callService::onTimeOut()"),o.call(_,new ErrorService("TimeOut!"))}};Protocol.send(_e)},analyzeResponse:function(o,e){this.logger.error("overwritten method !"),o&&o.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};var DefaultUrlService={ssl:!0,newUrl:function(o){var e="data.geopf.fr",s;return DefaultUrlService.ssl===!1?s="http://":s="https://",s+e+o},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":DefaultUrlService.newUrl(this.new_key["elevation-json"]),"elevation-xml":DefaultUrlService.newUrl(this.new_key["elevation-xml"]),"profil-json":DefaultUrlService.newUrl(this.new_key["profil-json"]),"profil-xml":DefaultUrlService.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(o){Array.isArray(o)||(o=o.split(","));for(var e=[],s=0;s<o.length;s++)e[s]=this._key+o[s]+"Config.json";return e}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}}};function ConfigInterface(){if(!(this instanceof ConfigInterface))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}ConfigInterface.prototype={constructor:ConfigInterface,isKeyConfLoaded:function(o){if(o)return!!this.generalOptions.apiKeys[o]},getLayersId:function(o){return this.generalOptions.apiKeys[o]},getLayerId:function(o,e){if(!(!o||!e)){var s=null;if(this.layers){var a=this.layers;for(var d in a)if(a.hasOwnProperty(d)){var b=d.split("$");if(o===b[0]&&b[1]){var _=b[1].split(":"),_e=b[1].split(";");if(_e[1]===e.toUpperCase()){s=d;break}if(_[2]===e.toUpperCase()){s=d;break}}}}if(s)return s}},getLayersConf:function(o){var e={},s=this.getLayersId(o);if(s)for(var a=0;a<s.length;a++){var d=s[a];e[d]=this.layers[d]}return e},getLayerConf:function(o){if(this.layers)return this.layers[o]},getLayerParams:function(o,e){var s={};if((e==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var a=this.getLayerId(o,e);if(a){var d=this.getLayerConf(a),b=this.getLayerKey(a);if(b.length===0)return;for(var _=0;_<b.length;_++)d.serviceParams.serverUrl[b[_]]&&(s.url=d.serviceParams.serverUrl[b[_]]);if(/\/v\//.test(s.url)?s.styles=" ":s.styles=d.styles[0].name,s.version=d.serviceParams.version,s.format=d.formats[0].name,s.projection=d.defaultProjection,s.minScale=d.globalConstraint.minScaleDenominator,s.maxScale=d.globalConstraint.maxScaleDenominator,s.extent=d.globalConstraint.bbox,s.legends=d.legends,s.title=d.title,s.description=d.description,e==="WMS"&&(s.metadata=d.metadata),d.wmtsOptions){s.tileMatrixSetLimits=d.wmtsOptions.tileMatrixSetLimits;var _e=d.wmtsOptions.tileMatrixSetLink;if(_e){s.TMSLink=_e;var nt=this.getTMSConf(_e);s.matrixIds=Object.keys(nt.tileMatrices),s.tileMatrices=nt.tileMatrices,s.nativeResolutions=nt.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return s},getLayerKey:function(o){var e=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var s=this.generalOptions.apiKeys;for(var a in s){var d=s[a];d.forEach(function(b){b===o&&e.push(a)})}}return e},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(o){if(this.tileMatrixSets)return this.tileMatrixSets[o]},getGlobalConstraints:function(o){var e={};if(o){var s=this.getLayerConf(o);e.projection=s.defaultProjection,e.minScale=s.globalConstraint.minScaleDenominator,e.maxScale=s.globalConstraint.maxScaleDenominator,e.extent=s.globalConstraint.bbox}return e}};function Config(o){if(!(this instanceof Config))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=LoggerByDefault.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var e=o.onSuccess!==null&&typeof o.onSuccess=="function";if(!e)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));!o.apiKey&&!o.customConfigFile&&(o.apiKey="full"),this.options={},this.options.onSuccess=o.onSuccess,this.options.onFailure=o.onFailure,this.options.sync=o.sync||!1,this.options.listConfigUrls=o.customConfigFile?[o.customConfigFile]:Array.isArray(o.apiKey)?DefaultUrlService.Config.url(o.apiKey):DefaultUrlService.Config.url(o.apiKey.split(","))}Config.prototype=Object.create(CommonService.prototype,{});Config.prototype.constructor=Config;Config.prototype.buildRequest=function(o,e){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){o.call(this,new Error("url by default not found !"));return}e.call(this,this.listConfigUrls)};Config.prototype.callService=function(o,e){this.options.sync?__callServiceSync.call(this,o,e):__callService.call(this,o,e)};var __callService=function(o,e){this.listConfigResults=[];let s=null;if(typeof window>"u"){var a=require("node-fetch");s=a}else s=window.fetch;var d=_=>s(_,{credentials:"same-origin"}).then(_e=>{if(_e.ok)return _e.json().then(nt=>nt).catch(nt=>{throw new Error("Exception Json : "+nt)});throw new Error("Exception HTTP : "+_e.status+" (status code) !")}).catch(_e=>new Promise((nt,rt)=>{rt(_e)})),b=[];for(let _=0;_<this.listConfigUrls.length;_++){const _e=this.listConfigUrls[_];b.push(d(_e))}Promise.all(b).then(_=>{if(!_)throw new Error("results config empty !?");_.forEach(_e=>{this.listConfigResults.push(_e)})}).then(()=>{e.call(this,this.listConfigResults)}).catch(_=>{o.call(this,_)})},__callServiceSync=function(o,e){this.listConfigResults=[];for(var s=0;s<this.listConfigUrls.length;s++){const d=this.listConfigUrls[s],b=new XMLHttpRequest;if(b.open("GET",d,!1),b.send(null),b.status===200){var a=JSON.parse(b.responseText);this.listConfigResults.push(a)}}this.listConfigResults.length!==0?e.call(this,this.listConfigResults):o.call(this,new Error("..."))};Config.prototype.analyzeResponse=function(o,e){var s=function(_e){for(var nt={},rt={},ct={},dt=0;dt<_e.length;dt++){if(!_e[dt].generalOptions||!_e[dt].layers)return;rt={...rt,..._e[dt].generalOptions.apiKeys},nt={...nt,..._e[dt].layers},ct={...ct,..._e[dt].tileMatrixSets}}var pt={generalOptions:{apiKeys:rt},layers:nt,tileMatrixSets:ct};return pt},a=s(this.listConfigResults);if(!a){o.call(this,new Error("configuration structure not conforme !"));return}var d=new ConfigInterface;Object.assign(d,a);var b=typeof window<"u"?window:{};if(b.Gp||(b.Gp={}),b.Gp.Config){Object.assign(b.Gp.Config,d);for(var _ in d)b.Gp.Config[_]=d[_]}else b.Gp.Config=d;e.call(this,b.Gp.Config)};function AltiRequest(o){if(!(this instanceof AltiRequest))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=o||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}AltiRequest.CLASSNAME="AltiRequest";AltiRequest.prototype={constructor:AltiRequest,setPositions:function(o){for(var e=[],s=0;s<o.length;s++){var a=o[s];a.lon&&a.lat&&e.push(a)}this.positions=e},getPositions:function(o){if(!o)return this.positions;var e=this.positions.length-1;return o>e||o<e?(this.logger.warn("index out of range !"),this.positions):this.positions[o]},addPositions:function(o){for(var e=0;e<o.length;e++){var s=o[e];s.lon&&s.lat&&this.positions.push(o[e])}},getLon:function(){for(var o=[],e=0;e<this.positions.length;e++)o.push(this.positions[e].lon);return this.logger.trace(o),o.join(this.delimiter)},getLat:function(){for(var o=[],e=0;e<this.positions.length;e++)o.push(this.positions[e].lat);return this.logger.trace(o),o.join(this.delimiter)}};AltiRequest.prototype.getData=function(){var o=[];return o.push({k:"lon",v:this.getLon()}),o.push({k:"lat",v:this.getLat()}),o.push({k:"delimiter",v:this.delimiter}),o.push({k:"indent",v:this.indent}),o.push({k:"crs",v:this.crs}),o.push({k:"format",v:this.format}),o};function AltiElevationRequest(o){if(!(this instanceof AltiElevationRequest))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}AltiElevationRequest.prototype=Object.create(AltiRequest.prototype,{zonly:{get:function(){return this._zonly},set:function(o){this._zonly=o}}});AltiElevationRequest.prototype.constructor=AltiElevationRequest;AltiElevationRequest.prototype.getData=function(){var o=[];return o.push({k:"lon",v:this.getLon()}),o.push({k:"lat",v:this.getLat()}),o.push({k:"indent",v:this.indent}),o.push({k:"crs",v:this.crs}),o.push({k:"zonly",v:this.zonly}),o.push({k:"format",v:this.format}),o.push({k:"resource",v:this.resource}),o};function AltiProfilRequest(o){if(!(this instanceof AltiProfilRequest))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}AltiProfilRequest.prototype=Object.create(AltiRequest.prototype,{sampling:{get:function(){return this._sampling},set:function(o){this._sampling=o}}});AltiProfilRequest.prototype.constructor=AltiProfilRequest;AltiProfilRequest.prototype.getData=function(){var o=[];return o.push({k:"lon",v:this.getLon()}),o.push({k:"lat",v:this.getLat()}),o.push({k:"indent",v:this.indent}),o.push({k:"crs",v:this.crs}),o.push({k:"sampling",v:this.sampling}),o.push({k:"format",v:this.format}),o.push({k:"resource",v:this.resource}),o};function AltiRequestREST(o){if(this.logger=LoggerByDefault.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof AltiRequestREST))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=o||{},!this.options)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new AltiElevationRequest(this.options.param);break;case"Profil":this.DataObject=new AltiProfilRequest(this.options.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}AltiRequestREST.prototype={requestString:null,constructor:AltiRequestREST,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
resource='__RESOURCE__'
measures='__MEASURES__'
`,input:{point:`zonly=__ZONLY__
`,profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var o="";return this.method==="POST"?o=this.template.post.value:this.method==="GET"&&(o=this.template.get.value),o=o.replace(/__LON__/g,this.DataObject.getLon()),o=o.replace(/__LAT__/g,this.DataObject.getLat()),o=o.replace(/__INDENT__/g,this.DataObject.indent),o=o.replace(/__CRS__/g,this.DataObject.crs),o=o.replace(/__RESOURCE__/g,this.DataObject.resource),o=o.replace(/__MEASURES__/g,this.DataObject.measures),o=o+this.__addDataInputs(),this.logger.trace("traduction tmpl",o),this.requestString=o,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var o;if(this.method==="POST")o=this.template.post;else if(this.method==="GET")o=this.template.get;else throw new Error("No other HTTP method supported by the service !");var e=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return e=o.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if(this.DataObject.CLASSNAME==="AltiProfilRequest")return e=o.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function WPS(o){if(this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof WPS))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=o||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}WPS.prototype={requestString:null,constructor:WPS,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var o=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return o.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var o="";if(this.method==="POST")o=this.template.post.value;else if(this.method==="GET")o=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return o=o.replace(/__SERVICE__/g,this.paramservice),o=o.replace(/__VERSION__/g,this.paramversion),o=o.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),o=o.replace(/__IDENTIFIER__/g,this.paramidentifier),o=o.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(o=o.replace(/__NAMESPACE__/g,this.namespaceByDefault),o=o.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),o=o.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),o?(this.requestString=o,this.logger.trace("traduction tmpl",o),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var o=this.method==="GET"?this.template.get.input:this.template.post.input,e=this.method==="GET"?";":"",s="",a=this,d=this.DataObject.getData(),b=0;b<d.length;b++)(function(_){e&&(e=_===d.length-1?"":";"),s=s.concat(a.__addDataInput(o,d[_].k,d[_].v),e)})(b);return s},__addDataInput:function(o,e,s){var a=o;return a=a.replace(/__KEY__/g,e),a=a.replace(/__DATA__/g,s),a},setMethod:function(o){o==="GET"||o==="POST"?this.method=o:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var AltiRequestWPS={build:function(o){var e=LoggerByDefault.getLogger("AltiRequestWPS");if(e.trace(["AltiRequestWPS::build()"]),!o)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!o.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var s=null;switch(o.type){case"Elevation":o.wps.identifier="gs:WPSElevation",s=new AltiElevationRequest(o.param);break;case"Profil":o.wps.identifier="gs:WPSLineElevation",s=new AltiProfilRequest(o.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var a={data:s,method:o.method,param:o.wps},d=new WPS(a);if(!d.processRequestString())throw new Error("Enable to process request !");return d.requestString}},AltiRequestFactory={build:function(o){var e=LoggerByDefault.getLogger("AltiRequestFactory");e.trace(["AltiRequestFactory::build()"]);var s=null,a={type:o.sampling?"Profil":"Elevation",method:o.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};a.param.positions=o.positions,a.param.format=o.outputFormat,a.param.sampling=o.sampling,a.param.zonly=o.zonly,a.param.measures=o.measures,a.param.resource=o.resource;var d=o.onError!==null&&typeof o.onError=="function",b=o.onSuccess!==null&&typeof o.onSuccess=="function",_=null;switch(o.api){case"REST":var _e=new AltiRequestREST(a);if(!_e.processRequestString()){if(_="Error in process request (rest) !",d){o.onError.call(o.scope,new ErrorService(_));return}throw new Error(_)}s=_e.requestString;break;case"WPS":if(a.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},s=AltiRequestWPS.build(a),!s){if(_="Error in process request (wps) !",d){o.onError.call(o.scope,new ErrorService(_));return}throw new Error(_)}break;default:if(_="Type of API is not supported by service (REST or WPS) !",d){o.onError.call(o.scope,new ErrorService(_));return}throw new Error(_)}return b&&o.onSuccess.call(o.scope,s),s}};function XML$1(o){if(!(this instanceof XML$1))throw new TypeError("XML constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,o&&(o.xmlString&&typeof o.xmlString=="string"&&(this.xmlString=o.xmlString,this.xmlDoc=__getXMLDOC(o.xmlString)),o.reader&&this.setReader(o.reader))}XML$1.prototype={constructor:XML$1,getXMLString:function(){return this.xmlString},setXMLString:function(o){o&&typeof o=="string"&&(this.xmlString=o,this.xmlDoc=__getXMLDOC(o))},getReader:function(){return this.reader},setReader:function(o){o&&o.read&&typeof o.read=="function"&&(this.reader=o)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(o){this.xmlDoc=o},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=__getXMLDOC(this.xmlString)),this.xmlDoc){var o=__getRootNode(this.xmlDoc);if(o){var e;return this.reader&&this.reader.read?e=this.reader.read(o):(e={},e[o.nodeName]=__readDefault(o)),e}else return{}}}};function __getXMLDOC(o){if(typeof window>"u"){var e=require("@xmldom/xmldom").DOMParser;return new e().parseFromString(o,"text/xml")}else{var s,a,d="Erreur lors du parsing de la rponse du service : XML non conforme";if(window.ActiveXObject){a=new window.ActiveXObject("Microsoft.XMLDOM"),a.async=!1,a.loadXML(o);var b=a.parseError;if(b.errorCode)throw b.line&&b.linepos&&(d+="( ligne "+b.line+", colonne "+b.linepos),b.reason&&(d+=":  "+b.reason+")"),new Error(d);return a}else if(window.DOMParser){s=new window.DOMParser;try{a=s.parseFromString(o,"text/xml")}catch(rt){throw rt.message==="SyntaxError"?new Error(d):new Error("Erreur lors du parsing de la rponse du service : "+rt.message)}if(a.getElementsByTagName("parsererror").length>0)for(var _=a.getElementsByTagName("parsererror"),_e=0;_e<_.length;_e++){var nt=_[_e].innerHTML;if(nt.indexOf("Huge input lookup")===-1)throw d+="("+nt+")",new Error(d)}else if(!a.documentElement)throw new Error(d);return a}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function __getRootNode(o){var e;return o.nodeType===9?e=o.documentElement:o.nodeType===1&&(e=o),e}function __readDefault(o){var e={};if(o.attributes.length>0){var s=__getAttributes(o);e.attributes=s}if(o.hasChildNodes()){for(var a={},d,b=o.childNodes,_=0;_<b.length;_++)if(d=b[_],d.nodeType===3)e.textContent=d.nodeValue;else if(d.nodeType===1)if(a=__readDefault(d),!e[d.nodeName])e[d.nodeName]=a;else{if(!Array.isArray(e[d.nodeName])){var _e=e[d.nodeName];e[d.nodeName]=[],e[d.nodeName].push(_e)}e[d.nodeName].push(a)}}return e}function __getAttributes(o){if(o.attributes.length>0){for(var e={},s=o.attributes,a=0;a<s.length;a++){var d=s[a];e[d.nodeName]=d.nodeValue}return e}}function AltiResponse(){if(!(this instanceof AltiResponse))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}AltiResponse.prototype={constructor:AltiResponse};function Elevation(){if(!(this instanceof Elevation))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Elevation.prototype={constructor:Elevation};function Measure(){if(!(this instanceof Measure))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Measure.prototype={constructor:Measure};var AltiResponseReader={};AltiResponseReader.READERS={elevations:function(o){var e=new AltiResponse;if(o.hasChildNodes())for(var s=o.childNodes,a,d,b=0;b<s.length;b++)a=s[b],AltiResponseReader.READERS[a.nodeName]&&(d=AltiResponseReader.READERS[a.nodeName](a),e.elevations.push(d));return e},elevation:function(o){var e=new Elevation;if(o.hasChildNodes())for(var s=o.childNodes,a,d=0;d<s.length;d++)a=s[d],AltiResponseReader.READERS[a.nodeName]&&AltiResponseReader.READERS[a.nodeName](a,e);return e},lat:function(o,e){var s=o.firstChild;if(s&&s.nodeType===3)e.lat=parseFloat(s.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : latitude attendue mais absente")},lon:function(o,e){var s=o.firstChild;if(s&&s.nodeType===3)e.lon=parseFloat(s.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : longitude attendue mais absente")},z:function(o,e){var s=o.firstChild;if(s&&s.nodeType===3)if(e)e.z=parseFloat(s.nodeValue);else return e=new Elevation,e.z=parseFloat(s.nodeValue),e;else throw new Error("Erreur dans la lecture de la rponse du service : altitude attendue mais absente")},acc:function(o,e){var s=o.firstChild;if(s&&s.nodeType===3)e.acc=parseFloat(s.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : prcision (acc) attendue mais absente")},source_name:function(o,e){var s=o.firstChild;if(s&&s.nodeType===3)e.source_name=s.nodeValue;else throw new Error("Erreur dans la lecture de la rponse du service : source_name attendue mais absente")},source_measure:function(o,e){var s=o.firstChild;if(s&&s.nodeType===3)e.source_measure=s.nodeValue;else throw new Error("Erreur dans la lecture de la rponse du service : source_measure attendue mais absente")},measures:function(o,e){e.measures=[];var s;if(o.hasChildNodes())for(var a=o.childNodes,d,b,_=0;_<a.length;_++){s=new Measure,d=a[_],b=d.childNodes;for(var _e=0;_e<b.length;_e++)if(AltiResponseReader.READERS[b[_e].nodeName])AltiResponseReader.READERS[b[_e].nodeName](b[_e],s);else throw new Error("Erreur dans la lecture de la rponse du service : measures attendues mais absentes");e.measures.push(s)}},exceptionreport:function(o){var e={};if(o.hasChildNodes())for(var s=o.childNodes,a,d=0;d<s.length;d++)a=s[d],a.nodeName==="Exception"&&(e.exceptionReport=AltiResponseReader.READERS.exception(a));return e},exception:function(o){var e={},s=o.getAttribute("exceptionCode");s&&(e.exceptionCode=s);var a=o.firstChild;return a&&a.nodeType===3&&(e.exception=a.nodeValue),e},error:function(o){var e={error:{}};if(o.hasChildNodes())for(var s=o.childNodes,a,d=0;d<s.length;d++){a=s[d];var b;a.nodeType===1&&a.nodeName==="code"&&(b=a.firstChild,b&&b.nodeType===3&&(e.error.code=b.nodeValue)),a.nodeType===1&&a.nodeName==="description"&&(b=a.firstChild,b&&b.nodeType===3&&(e.error.description=b.nodeValue))}return e}};AltiResponseReader.read=function(o){if(o.nodeName==="elevations"){var e=AltiResponseReader.READERS.elevations(o);return e}else if(o.nodeName==="ExceptionReport"){var s=AltiResponseReader.READERS.exceptionreport(o);return s}else if(o.nodeName==="error"){var a=AltiResponseReader.READERS.error(o);return a}else throw new Error("Erreur lors de la lecture de la rponse : elle n'est pas au format attendu.")};var AltiResponseFactory={build:function(o){var e=LoggerByDefault.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var s=null;if(o.response)if(o.rawResponse)e.trace("analyze response : raw"),s=o.response;else{switch(o.outputFormat){case"xml":e.trace("analyze response : xml");try{var a=new XML$1({reader:AltiResponseReader});if(typeof o.response=="string"?a.setXMLString(o.response):a.setXMLDoc(o.response),s=a.parse(),!s)throw new Error(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(dt){var d=dt.message;o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",d),status:200,type:ErrorService.TYPE_SRVERR}));return}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof o.response);var b=null;if(typeof o.response=="string"?b=JSON.parse(o.response):b=o.response,b&&b.error){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",b.error.description),status:200,type:ErrorService.TYPE_SRVERR}));return}if(b){var _=b.elevations,_e=new AltiResponse,nt;if(Array.isArray(_)&&_.length)for(var rt=0;rt<_.length;rt++)nt=new Elevation,typeof _[rt]=="object"?(_[rt].lon&&(nt.lon=_[rt].lon),_[rt].lat&&(nt.lat=_[rt].lat),_[rt].z&&(nt.z=_[rt].z),_[rt].acc&&(nt.acc=_[rt].acc),_[rt].measures&&(nt.measures=_[rt].measures)):typeof _[rt]=="number"&&(nt.z=_[rt]),Array.isArray(_e.elevations)&&_e.elevations.push(nt);s=_e}if(!s){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}break;default:o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(s.exceptionReport){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",s.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}else if(s.error){var ct=s.error.description;o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",ct),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}o.onSuccess.call(o.scope,s)}};function Alti(o){if(!(this instanceof Alti))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",CommonService.apply(this,arguments),this.logger=LoggerByDefault.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!o.positions)throw new Error(MessagesResources.getMessage("PARAM_MISSING","positions"));if(o.positions.length===0)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=o.positions,this.options.outputFormat=typeof o.outputFormat=="string"?o.outputFormat.toLowerCase():"xml",this.options.resource=o.resource||"ign_rge_alti_wld",this.options.sampling=o.sampling||null,this.options.api=typeof o.api=="string"?o.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=o.zonly||!1,this.options.measures=o.measures||!1,!this.options.serverUrl){var e=DefaultUrlService.Alti.newUrl(),s=null;switch(this.options.api){case"WPS":s=e.wps;break;case"REST":var a=(o.sampling?"profil":"elevation")+"-"+this.options.outputFormat;s=e[a];break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","api"))}if(!s)throw new Error("Url by default not found !");this.options.serverUrl=s,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var d=this.options.serverUrl.lastIndexOf(".");if(d!==-1){var b=this.options.serverUrl.substring(d+1);if(b&&b.length<5)switch(this.logger.trace("Server Extension URL : "+b),b.toLowerCase()){case"json":case"xml":this.options.outputFormat=b.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}Alti.prototype=Object.create(CommonService.prototype,{});Alti.prototype.constructor=Alti;Alti.prototype.buildRequest=function(o,e){var s={httpMethod:this.options.httpMethod,onSuccess:function(a){this.request=a,e.call(this,this.request)},onError:o,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};AltiRequestFactory.build(s)};Alti.prototype.analyzeResponse=function(o,e){if(this.response){var s={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:o,onSuccess:e,scope:this};AltiResponseFactory.build(s)}else o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function GeocodeParamREST(o){if(!(this instanceof GeocodeParamREST))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=o||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}GeocodeParamREST.CLASSNAME="GeocodeParamREST";GeocodeParamREST.prototype={constructor:GeocodeParamREST,getFilters:function(){var o={};for(var e in this.filters)this.filters.hasOwnProperty(e)&&(o[e]=this.filters[e]);return o},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};GeocodeParamREST.prototype.getParams=function(){var o=[];this.geocodeMethod==="search"&&o.push({k:"q",v:this.query}),this.index&&o.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&o.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(o.push({k:"lon",v:this.lon}),o.push({k:"lat",v:this.lat})),this.maxResp&&o.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&o.push({k:"returntruegeometry",v:this.returnTrueGeometry});const e=this.getFilters();for(var s in e)o.push({k:s,v:e[s]});return o};function GeocodeRequestREST(o){if(this.logger=LoggerByDefault.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof GeocodeRequestREST))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!o)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=o}GeocodeRequestREST.prototype={requestString:null,constructor:GeocodeRequestREST,processRequestString:function(){var o="";const s=new GeocodeParamREST(this.settings).getParams();for(var a=0;a<s.length;a++){var d=s[a];o&&(o+="&"),o+=d.k+"="+d.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+o,this.logger.trace(this.requestString),this.requestString}};var GeocodeRequestFactory={build:function(o){var e=LoggerByDefault.getLogger("GeocodeRequestFactory");e.trace(["GeocodeRequestFactory::build()"]);var s=o||{},a=new GeocodeRequestREST(s);if(!a.processRequestString())throw new Error("Error process request (rest) !");var d=a.requestString;return e.trace(d),d}};function GeocodeResponse(){if(!(this instanceof GeocodeResponse))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}GeocodeResponse.prototype={constructor:GeocodeResponse};function GeocodedLocation(){if(!(this instanceof GeocodedLocation))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}GeocodedLocation.prototype={constructor:GeocodedLocation};function GeocodeResponseParser(){if(!(this instanceof GeocodeResponseParser))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}GeocodeResponseParser.prototype={constructor:GeocodeResponseParser,parse:function(o){var e=new GeocodeResponse;const s=JSON.parse(o);if(s.type==="FeatureCollection")for(var a=0;a<s.features.length;++a)_parseFeature(s.features[a],e);else if(s.type==="Feature")_parseFeature(s,e);else{if(s.type==="SERVICE_ERROR")return _parseError(s);var d=MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",s.type);throw new ErrorService({message:d,type:ErrorService.TYPE_UNKERR,status:200})}return e}};function _parseFeature(o,e){var s=new GeocodedLocation;if(o.geometry&&o.geometry.type==="Point"&&(s.position={lon:o.geometry.coordinates[0],lat:o.geometry.coordinates[1]}),o.properties){for(var a in o.properties)a==="score"?s.accuracy=o.properties[a]:a==="_type"?o.properties[a]==="address"?s.type="StreetAddress":o.properties[a]==="poi"?s.type="PositionOfInterest":(o.properties[a]==="parcel"||o.properties[a]==="cadastral")&&(s.type="CadastralParcel"):s.placeAttributes[a]=o.properties[a];o.properties._type==="address"&&(s.matchType=o.properties.number!==void 0&&o.properties.number!==null?"street number":"street")}e.locations.push(s)}function _parseError(o){return{exceptionReport:o}}var GeocodeReponseFactory={build:function(o){var e=null;if(o.response)if(o.rawResponse)e=o.response;else{try{if(e=new GeocodeResponseParser().parse(o.response),!e)throw new Error("L'analyse de la rponse du service !?")}catch(a){var s=a.message;typeof o.response=="string"?s+="('"+o.response+"')":s+="('"+o.response.documentElement.innerHTML+"')",o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",s),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY"),type:ErrorService.TYPE_SRVERR,status:-1}));return}o.onSuccess.call(o.scope,e)}};function Geocode(o){if(!(this instanceof Geocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=LoggerByDefault.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var e=this.patchOptionConvertor(o);if(e.serverUrl||(e.serverUrl=DefaultUrlService.Geocode.newUrl()),CommonService.apply(this,[e]),!e.hasOwnProperty("query"))throw new Error(MessagesResources.getMessage("PARAM_MISSING","query"));if(this.options.query=e.query,e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var s=Object.keys(e.filters),a=0;a<s.length;a++){var d=s[a];(typeof e.filters[d]>"u"||typeof e.filters[d]=="object"&&Object.keys(e.filters[d]).length===0||typeof e.filters[d]=="string"&&e.filters[d].length===0||Array.isArray(e.filters[d])&&e.filters[d].length===0)&&delete this.options.filters[d]}this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Geocode.prototype=Object.create(CommonService.prototype,{});Geocode.prototype.constructor=Geocode;Geocode.prototype.patchOptionConvertor=function(o){const e=o;return e.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),e.query||(e.query=e.location),delete e.location),e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filters||(e.filters=e.filterOptions,e.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filters.type)&&e.filters.type.length>0?e.index=e.filters.type[0]:e.index=e.filters.type),delete e.filters.type),e.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete e.filters.bbox)),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete e.returnFreeForm),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Geocode.prototype.buildRequest=function(o,e){var s={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(s),this.request?e.call(this,this.request):o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Geocode.prototype.analyzeResponse=function(o,e){if(this.response){var s={response:this.response,rawResponse:this.options.rawResponse,onError:o,onSuccess:e,scope:this};GeocodeReponseFactory.build(s)}else o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ReverseGeocode(o){if(!(this instanceof ReverseGeocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=LoggerByDefault.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var e=this.patchOptionConvertor(o);if(e.serverUrl||(e.serverUrl=DefaultUrlService.ReverseGeocode.newUrl()),CommonService.apply(this,[e]),e.searchGeometry)this.options.searchGeometry=e.searchGeometry;else if(!e.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","searchGeometry"));if(e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var s=Object.keys(e.filters),a=0;a<s.length;a++){var d=s[a];(typeof e.filters[d]>"u"||typeof e.filters[d]=="object"&&Object.keys(e.filters[d]).length===0||typeof e.filters[d]=="string"&&e.filters[d].length===0||Array.isArray(e.filters[d])&&e.filters[d].length===0)&&delete this.options.filters[d]}this.options.position=e.position,this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}ReverseGeocode.prototype=Object.create(CommonService.prototype,{});ReverseGeocode.prototype.constructor=ReverseGeocode;ReverseGeocode.prototype.patchOptionConvertor=function(o){var e=o;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filterOptions.type)&&e.filterOptions.type.length>0?e.index=e.filterOptions.type[0]:e.index=e.filterOptions.type),delete e.filterOptions.type),e.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),e.searchGeometry||(e.searchGeometry=this.bbox2Json(e.filterOptions.bbox)),delete e.filterOptions.bbox),e.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),e.searchGeometry||(e.searchGeometry=this.circle2Json(e.filterOptions.circle)),delete e.filterOptions.circle),e.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),e.searchGeometry||(e.searchGeometry=this.polygon2Json(e.filterOptions.polygon)),delete e.filterOptions.polygon),!e.filters&&Object.keys(e.filterOptions).length>0&&(e.filters=e.filterOptions),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};ReverseGeocode.prototype.buildRequest=function(o,e){var s={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(s),this.request?e.call(this,this.request):o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};ReverseGeocode.prototype.analyzeResponse=function(o,e){if(this.response){var s={response:this.response,rawResponse:this.options.rawResponse,onError:o,onSuccess:e,scope:this};GeocodeReponseFactory.build(s)}else o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};ReverseGeocode.prototype.bbox2Json=function(o){return{type:"Polygon",coordinates:[[[o.left,o.top],[o.right,o.top],[o.right,o.bottom],[o.left,o.bottom],[o.left,o.top]]]}};ReverseGeocode.prototype.circle2Json=function(o){return{type:"Circle",radius:o.radius,coordinates:[o.x,o.y]}};ReverseGeocode.prototype.polygon2Json=function(o){for(var e={type:"Polygon",coordinates:[[]]},s=0;s<o.length;++s)e.coordinates[0].push([o[s].x,o[s].y]);return e};ReverseGeocode.geoEPSG=["EPSG:4326"];function AutoCompleteResponse(){if(!(this instanceof AutoCompleteResponse))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}AutoCompleteResponse.prototype={constructor:AutoCompleteResponse};function SuggestedLocation(){if(!(this instanceof SuggestedLocation))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}SuggestedLocation.prototype={constructor:SuggestedLocation};var AutoCompleteResponseFactory={build:function(o){var e=LoggerByDefault.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var s=null;if(o.response)if(o.rawResponse)e.trace("analyze response : raw"),s=o.response;else{var a=null;if(typeof o.response=="string"?a=JSON.parse(o.response):a=o.response,a){if(a.error){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",a.error.description),status:a.error.code,type:ErrorService.TYPE_SRVERR}));return}if(s=new AutoCompleteResponse,a.results&&Array.isArray(a.results))for(var d=null,b=0;b<a.results.length;b++){var _=a.results[b];d=new SuggestedLocation,_&&(_.country==="StreetAddress"?(d.street=_.street,d.type="StreetAddress"):_.country==="PositionOfInterest"&&(d.poi=_.street,d.type="PositionOfInterest",d.poiType=_.poiType),d.position&&(d.position.x=_.x,d.position.y=_.y),d.kind=_.kind,d.commune=_.city,d.fullText=_.fulltext,d.postalCode=_.zipcode,d.classification=_.classification),s.suggestedLocations.push(d)}else{o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!s.suggestedLocations.length){o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!s){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(s.exceptionReport){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",s.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}o.onSuccess.call(o.scope,s)}};function AutoComplete(o){if(!(this instanceof AutoComplete))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=LoggerByDefault.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var e=this.patchOptionConvertor(o);if(e.serverUrl||(e.serverUrl=DefaultUrlService.AutoComplete.newUrl()),CommonService.apply(this,arguments),!e.text)throw new Error(MessagesResources.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.type||(e.type=["StreetAddress,PositionOfInterest"]),this.options.type=e.type,this.options.territory=e.terr||"",this.options.maximumResponses=e.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gre pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}AutoComplete.prototype=Object.create(CommonService.prototype,{});AutoComplete.prototype.constructor=AutoComplete;AutoComplete.prototype.patchOptionConvertor=function(o){const e=o;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.type||(e.type=e.filterOptions.type)),e.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),e.terr||(e.terr=e.filterOptions.territory)),delete e.filterOptions),e};AutoComplete.prototype.buildRequest=function(o,e){var s="";this.options.territory&&(s=this.options.territory);var a="";this.options.type&&(a=this.options.type.join(",")),this.request=Helper.normalyzeParameters({text:encodeURIComponent(this.options.text),type:a,terr:s,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};AutoComplete.prototype.analyzeResponse=function(o,e){if(this.response){var s={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:o,scope:this};AutoCompleteResponseFactory.build(s)}else o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function RouteParamREST(o){if(!(this instanceof RouteParamREST))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=o||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}RouteParamREST.CLASSNAME="RouteParamREST";RouteParamREST.prototype={constructor:RouteParamREST,getIntermediates:function(){var o=[];if(this.intermediates.length!==0)for(var e=0;e<this.intermediates.length;e++){var s=this.intermediates[e];o.push(s.x+","+s.y)}return o.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var o=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)o.push(JSON.stringify(this.constraints[e]));return o.join("|")}};RouteParamREST.prototype.getParams=function(){var o=[];return o.push({k:"resource",v:this.resource}),o.push({k:"start",v:this.start}),o.push({k:"end",v:this.end}),o.push({k:"geometryFormat",v:"geojson"}),this.optimization&&o.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&o.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&o.push({k:"profile",v:this.getProfile()}),this.constraints&&o.push({k:"constraints",v:this.getConstraints()}),this.crs&&o.push({k:"crs",v:this.crs}),this.distanceUnit&&o.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&o.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&o.push({k:"waysAttributes",v:this.getWaysAttributes()}),o};function RouteRequestREST(o){if(this.logger=LoggerByDefault.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof RouteRequestREST))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!o)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=o}RouteRequestREST.prototype={requestString:null,constructor:RouteRequestREST,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var o=new RouteParamREST(this.settings),e=o.getParams(),s="",a=0;a<e.length;a++){var d=e[a];s&&(s+="&"),s+=d.k+"="+d.v}return this.logger.trace(s),this.requestString=s,this.requestString}};var RouteRequestFactory={build:function(o){var e=LoggerByDefault.getLogger("RouteRequestFactory");e.trace(["RouteRequestFactory::build()"]);var s=null,a=o||{},d=o.onError!==null&&typeof o.onError=="function",b=null,_=new RouteRequestREST(a);if(!_.processRequestString()){if(b="Error process request (rest) !",d){o.onError.call(o.scope,new ErrorService(b));return}throw new Error(b)}return s=_.requestString,s}};function RouteResponse(){if(!(this instanceof RouteResponse))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}RouteResponse.prototype={constructor:RouteResponse};function RouteInstruction(){if(!(this instanceof RouteInstruction))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}RouteInstruction.prototype={constructor:RouteInstruction};var RouteResponseFactory={build:function(o){var e=LoggerByDefault.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var s=null;if(o.response)if(o.rawResponse)e.trace("analyze response : raw"),s=o.response;else{e.trace("analyze response : json");var a;if(typeof o.response=="string"?a=JSON.parse(o.response):a=o.response,a){if(a.message){o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",a.message)));return}var d=[],b=[],_=[];if(s=new RouteResponse,s.hasOwnProperty("totalTime")&&(s.totalTime=parseFloat(a.duration)),s.hasOwnProperty("totalDistance")&&(s.totalDistance=parseFloat(a.distance)),s.hasOwnProperty("bbox")&&(s.bbox.left=parseFloat(a.bbox[0]),s.bbox.bottom=parseFloat(a.bbox[1]),s.bbox.right=parseFloat(a.bbox[2]),s.bbox.top=parseFloat(a.bbox[3])),s.hasOwnProperty("routeGeometry")&&!o.geometryInInstructions&&(s.routeGeometry=a.geometry),s.hasOwnProperty("routeInstructions")&&o.geometryInInstructions){var _e=a.portions,nt;if(Array.isArray(_e)&&_e.length)for(nt=0;nt<_e.length;nt++)d.push(_e[nt]);if(d.length)for(nt=0;nt<d.length;nt++)b.push(d[nt].steps);if(b.length)for(nt=0;nt<b.length;nt++)_=_.concat(b[nt]);_.forEach(function(rt){switch(s.routeInstructions.push(new RouteInstruction),s.routeInstructions[s.routeInstructions.length-1].duration=rt.duration,s.routeInstructions[s.routeInstructions.length-1].distance=rt.distance,s.routeInstructions[s.routeInstructions.length-1].code="",s.routeInstructions[s.routeInstructions.length-1].instruction="",s.routeInstructions[s.routeInstructions.length-1].geometry=rt.geometry,rt.name==="Valeur non renseigne"&&(rt.name=""),rt.instruction.type){case"turn":s.routeInstructions[s.routeInstructions.length-1].instruction+="Tourner";break;case"new name":s.routeInstructions[s.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":s.routeInstructions[s.routeInstructions.length-1].instruction+="Dpart";break;case"arrive":s.routeInstructions[s.routeInstructions.length-1].instruction+="Arrive";break;case"merge":s.routeInstructions[s.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":s.routeInstructions[s.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":s.routeInstructions[s.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":s.routeInstructions[s.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":s.routeInstructions[s.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":s.routeInstructions[s.routeInstructions.length-1].instruction+=" la fin de la route, prendre";break;case"use lane":s.routeInstructions[s.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":s.routeInstructions[s.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":s.routeInstructions[s.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":s.routeInstructions[s.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":s.routeInstructions[s.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":s.routeInstructions[s.routeInstructions.length-1].instruction+="";break;default:s.routeInstructions[s.routeInstructions.length-1].instruction+="?"+rt.instruction.type+"?";break}if(rt.instruction.modifier)switch(rt.instruction.modifier){case"uturn":s.routeInstructions[s.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":s.routeInstructions[s.routeInstructions.length-1].instruction+=" compltement  droite";break;case"right":s.routeInstructions[s.routeInstructions.length-1].instruction+="  droite";break;case"slight right":s.routeInstructions[s.routeInstructions.length-1].instruction+=" lgrement  droite";break;case"straight":s.routeInstructions[s.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":s.routeInstructions[s.routeInstructions.length-1].instruction+=" lgrement  gauche";break;case"left":s.routeInstructions[s.routeInstructions.length-1].instruction+="  gauche";break;case"sharp left":s.routeInstructions[s.routeInstructions.length-1].instruction+=" compltement  gauche";break;default:s.routeInstructions[s.routeInstructions.length-1].instruction+=" ?"+rt.instruction.modifier+"?";break}rt.instruction.exit&&(s.routeInstructions[s.routeInstructions.length-1].instruction+=`${rt.instruction.exit}e sortie`),rt.attributes.name&&((rt.attributes.name.nom_1_droite||rt.attributes.name.toponyme)&&(s.routeInstructions[s.routeInstructions.length-1].instruction+=" sur"),rt.attributes.name.nom_1_droite&&(s.routeInstructions[s.routeInstructions.length-1].instruction+=` ${rt.attributes.name.nom_1_droite}`),rt.attributes.name.toponyme&&(s.routeInstructions[s.routeInstructions.length-1].instruction+=` ${rt.attributes.name.toponyme}`))})}}if(!s){o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(s.exceptionReport){o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}o.onSuccess.call(o.scope,s)}};function Route(o){if(!(this instanceof Route))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",CommonService.apply(this,arguments),this.logger=LoggerByDefault.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!o.startPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint"));if(o.startPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.x"));if(o.startPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.y"));if(!o.endPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint"));if(o.endPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.x"));if(o.endPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.y"));if(o.outputFormat&&o.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=o.resource||"bdtopo-osrm",this.options.startPoint=o.startPoint,this.options.endPoint=o.endPoint,this.options.viaPoints=o.viaPoints||[],this.options.routePreference=o.routePreference||"fastest",o.graph?(o.graph==="Voiture"&&(this.options.graph="car"),o.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],o.constraints)if(Array.isArray(o.constraints))for(var e=0;e<o.constraints.length;e++)this.options.constraints.push(o.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var s={},a={},d={};if(o.exclusions&&o.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var b=0;b<o.exclusions.length;b++){if(typeof o.exclusions[b]=="string")o.exclusions[b]=o.exclusions[b].toLowerCase();else continue;o.exclusions[b]==="toll"&&(d.constraintType="banned",d.key="wayType",d.operator="=",d.value="autoroute",this.options.constraints.push(d)),o.exclusions[b]==="tunnel"&&(s.constraintType="banned",s.key="wayType",s.operator="=",s.value="tunnel",this.options.constraints.push(s)),o.exclusions[b]==="bridge"&&(a.constraintType="banned",a.key="wayType",a.operator="=",a.value="pont",this.options.constraints.push(a))}}if(this.options.geometryInInstructions=o.geometryInInstructions||!1,this.options.provideBbox=o.provideBbox||!0,this.options.distanceUnit=o.distanceUnit||"m",this.options.timeUnit=o.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=o.srs||"EPSG:4326",this.options.waysAttributes=o.waysAttributes||[],!this.options.serverUrl){var _=DefaultUrlService.Route.newUrl();if(!_)throw new Error("Url by default not found !");this.options.serverUrl=_,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Route.prototype=Object.create(CommonService.prototype,{});Route.prototype.constructor=Route;Route.prototype.buildRequest=function(o,e){var s={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=RouteRequestFactory.build(s),this.request?e.call(this,this.request):o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Route.prototype.analyzeResponse=function(o,e){if(this.response){var s={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:o,onSuccess:e,scope:this,geometryInInstructions:this.options.geometryInInstructions};RouteResponseFactory.build(s)}else o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ProcessIsoCurveParam(o){if(!(this instanceof ProcessIsoCurveParam))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=o||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance,this.distanceUnit==="m"&&this.costValue>=5e4&&(this.distanceUnit="km",this.costValue/=1e3)):(this.costType="time",this.costValue=this.options.time)}ProcessIsoCurveParam.CLASSNAME="ProcessIsoCurveParam";ProcessIsoCurveParam.prototype={constructor:ProcessIsoCurveParam,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var o=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)o.push(JSON.stringify(this.constraints[e]));return o.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};ProcessIsoCurveParam.prototype.getParams=function(){var o=[];return o.push({k:"resource",v:this.resource}),o.push({k:"point",v:this.getLocation()}),o.push({k:"direction",v:this.getDirection()}),o.push({k:"costType",v:this.costType}),o.push({k:"costValue",v:this.costValue}),o.push({k:"profile",v:this.profile}),o.push({k:"timeUnit",v:this.timeUnit}),o.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&o.push({k:"crs",v:this.crs}),this.constraints&&o.push({k:"constraints",v:this.getConstraints()}),o};function ProcessIsoCurveRequest(o){if(this.logger=LoggerByDefault.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ProcessIsoCurveRequest))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!o)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=o,this.mode=this.settings.httpMethod||"GET"}ProcessIsoCurveRequest.prototype={requestString:null,constructor:ProcessIsoCurveRequest,processRequestString:function(){var o="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var s=new ProcessIsoCurveParam(this.settings),a=s.getParams();for(e=0;e<a.length;e++){var d=a[e];o&&(o+="&"),o+=d.k+"="+d.v}break;case"POST":this.logger.trace("Process POST Request");var b={};b.resource=this.settings.resource,b.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(b.costType="distance",b.costValue=this.settings.distance):(b.costType="time",b.costValue=this.settings.time),b.profile=this.settings.graph,this.settings.reverse?b.direction="arrival":b.direction="departure",b.constraints=this.settings.constraints,b.distanceUnit=this.settings.distanceUnit,b.timeUnit=this.settings.timeUnit,b.crs=this.settings.srs,o=JSON.stringify(b);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(o),this.requestString=o,this.requestString}};function ProcessIsoCurveResponse(){if(!(this instanceof ProcessIsoCurveResponse))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}ProcessIsoCurveResponse.prototype={constructor:ProcessIsoCurveResponse};var ProcessIsoCurveResponseFactory={build:function(o){var e=LoggerByDefault.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var s=null;if(o.response)if(o.rawResponse)e.trace("analyze response : raw"),s=o.response;else{e.trace("analyze response : json");var a;if(typeof o.response=="string"?a=JSON.parse(o.response):a=o.response,s=new ProcessIsoCurveResponse,a){a.costType==="distance"?(s.time="",s.distance=a.costValue):(s.time=a.costValue,s.distance=""),s.message="",s.id="",s.srs=a.crs,s.geometry=a.geometry;var d=a.point.split(",");s.location&&(s.location.x=d[0],s.location.y=d[1])}else{o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",o.response)));return}if(s.exceptionReport){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",s.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}o.onSuccess.call(o.scope,s)}};function ProcessIsoCurve(o){if(!(this instanceof ProcessIsoCurve))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",CommonService.apply(this,arguments),this.logger=LoggerByDefault.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!o.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position"));if(o.position.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.x"));if(o.position.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.y"));if(!o.time&&!o.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!o.time&&o.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),o.time&&!o.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=o.resource||"bdtopo-valhalla",this.options.exclusions=o.exclusions||[],this.options.reverse=o.reverse||!1,this.options.srs=o.srs||"EPSG:4326",this.options.distanceUnit=o.distanceUnit||"m",this.options.timeUnit=o.timeUnit||"second",o.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,o.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,o.graph?(o.graph==="Voiture"&&(this.options.graph="car"),o.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],o.constraints)if(Array.isArray(o.constraints))for(var e=0;e<o.constraints.length;e++)this.options.constraints.push(o.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var s={},a={},d={};if(o.exclusions&&o.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var b=0;b<o.exclusions.length;b++){if(typeof o.exclusions[b]=="string")o.exclusions[b]=o.exclusions[b].toLowerCase();else continue;o.exclusions[b]==="toll"&&(d.constraintType="banned",d.key="wayType",d.operator="=",d.value="autoroute",this.options.constraints.push(d)),o.exclusions[b]==="tunnel"&&(s.constraintType="banned",s.key="wayType",s.operator="=",s.value="tunnel",this.options.constraints.push(s)),o.exclusions[b]==="bridge"&&(a.constraintType="banned",a.key="wayType",a.operator="=",a.value="pont",this.options.constraints.push(a))}}if(this.options.outputFormat=typeof o.outputFormat=="string"?o.outputFormat.toLowerCase():"json",o.outputFormat&&o.outputFormat!=="json")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var _=DefaultUrlService.ProcessIsoCurve.newUrl();if(!_)throw new Error("Url by default not found !");this.options.serverUrl=_,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}ProcessIsoCurve.prototype=Object.create(CommonService.prototype,{});ProcessIsoCurve.prototype.constructor=ProcessIsoCurve;ProcessIsoCurve.prototype.buildRequest=function(o,e){try{var s=new ProcessIsoCurveRequest(this.options);if(!s.processRequestString())throw new Error(MessagesResources.getMessage("SERVICE_REQUEST_BUILD"));this.request=s.requestString}catch(a){o.call(this,new ErrorService(a.message));return}e.call(this,this.request)};ProcessIsoCurve.prototype.analyzeResponse=function(o,e){if(this.response){var s={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:o,scope:this};ProcessIsoCurveResponseFactory.build(s)}else o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};var Services={getConfig:function(o){var e=new Config(o);e.call()},getAltitude:function(o){var e=new Alti(o);e.call()},geocode:function(o){var e=new Geocode(o);e.call()},reverseGeocode:function(o){var e=new ReverseGeocode(o);e.call()},autoComplete:function(o){var e=new AutoComplete(o);e.call()},route:function(o){var e=new Route(o);e.call()},isoCurve:function(o){var e=new ProcessIsoCurve(o);e.call()}};const servicesVersion=Pkg$1.version,servicesDate=Pkg$1.date;var Gp={};Gp.servicesVersion=servicesVersion;Gp.servicesDate=servicesDate;Gp.Protocols={};Gp.Protocols.XHR=XHR;Gp.Services=Services;Gp.Services.DefaultUrl=DefaultUrlService;Gp.Services.AltiResponse=AltiResponse;Gp.Services.Alti={};Gp.Services.Alti.Elevation=Elevation;Gp.Services.AutoCompleteResponse=AutoCompleteResponse;Gp.Services.AutoComplete={};Gp.Services.AutoComplete.SuggestedLocation=SuggestedLocation;Gp.Services.Config=Config;Gp.Services.IsoCurveResponse=ProcessIsoCurveResponse;Gp.Services.RouteResponse=RouteResponse;Gp.Services.Route={};Gp.Services.Route.RouteInstruction=RouteInstruction;Gp.Error=ErrorService;Gp.Helper=Helper;class LRUCache{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let s=this.oldest_;for(;s;)e(s.value_,s.key_,this),s=s.newer}get(e,s){const a=this.entries_[e];return assert(a!==void 0,"Tried to get a value for a key that does not exist in the cache"),a===this.newest_||(a===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(a.newer.older=a.older,a.older.newer=a.newer),a.newer=null,a.older=this.newest_,this.newest_.newer=a,this.newest_=a),a.value_}remove(e){const s=this.entries_[e];return assert(s!==void 0,"Tried to get a value for a key that does not exist in the cache"),s===this.newest_?(this.newest_=s.older,this.newest_&&(this.newest_.newer=null)):s===this.oldest_?(this.oldest_=s.newer,this.oldest_&&(this.oldest_.older=null)):(s.newer.older=s.older,s.older.newer=s.newer),delete this.entries_[e],--this.count_,s.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let s=0,a;for(a=this.newest_;a;a=a.older)e[s++]=a.key_;return e}getValues(){const e=new Array(this.count_);let s=0,a;for(a=this.newest_;a;a=a.older)e[s++]=a.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var s;return(s=this.entries_[e])==null?void 0:s.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,s){this.get(e),this.entries_[e].value_=s}set(e,s){assert(!(e in this.entries_),"Tried to set a value for a key that is used already");const a={key_:e,newer:null,older:this.newest_,value_:s};this.newest_?this.newest_.newer=a:this.oldest_=a,this.newest_=a,this.entries_[e]=a,++this.count_}setSize(e){this.highWaterMark=e}}function createOrUpdate(o,e,s,a){return a!==void 0?(a[0]=o,a[1]=e,a[2]=s,a):[o,e,s]}function getKeyZXY(o,e,s){return o+"/"+e+"/"+s}function getKey$1(o){return getKeyZXY(o[0],o[1],o[2])}function getCacheKeyForTileKey(o){const[e,s,a]=o.substring(o.lastIndexOf("/")+1,o.length).split(",").map(Number);return getKeyZXY(e,s,a)}function fromKey(o){return o.split("/").map(Number)}function hash(o){return(o[1]<<o[0])+o[2]}function withinExtentAndZ(o,e){const s=o[0],a=o[1],d=o[2];if(e.getMinZoom()>s||s>e.getMaxZoom())return!1;const b=e.getFullTileRange(s);return b?b.containsXY(a,d):!0}class TileCache extends LRUCache{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),a=fromKey(e)[0];this.forEach(d=>{d.tileCoord[0]!==a&&(this.remove(getKey$1(d.tileCoord)),d.release())})}}const TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Source extends BaseObject{constructor(e){super(),this.projection=get$3(e.projection),this.attributions_=adaptAttributions(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const s=this;this.viewPromise_=new Promise(function(a,d){s.viewResolver=a,s.viewRejector=d})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=adaptAttributions(e),this.changed()}setState(e){this.state_=e,this.changed()}}function adaptAttributions(o){return o?Array.isArray(o)?function(e){return o}:typeof o=="function"?o:function(e){return[o]}:null}const tmpTileCoord=[0,0,0],DECIMALS$1=5;class TileGrid{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,assert(isSorted(this.resolutions_,(d,b)=>b-d),"`resolutions` must be sorted in descending order");let s;if(!e.origins){for(let d=0,b=this.resolutions_.length-1;d<b;++d)if(!s)s=this.resolutions_[d]/this.resolutions_[d+1];else if(this.resolutions_[d]/this.resolutions_[d+1]!==s){s=void 0;break}}this.zoomFactor_=s,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,assert(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const a=e.extent;a!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(a)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=a!==void 0?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((d,b)=>{const _=new TileRange(Math.min(0,d[0]),Math.max(d[0]-1,-1),Math.min(0,d[1]),Math.max(d[1]-1,-1));if(a){const _e=this.getTileRangeForExtentAndZ(a,b);_.minX=Math.max(_e.minX,_.minX),_.maxX=Math.min(_e.maxX,_.maxX),_.minY=Math.max(_e.minY,_.minY),_.maxY=Math.min(_e.maxY,_.maxY)}return _}):a&&this.calculateTileRanges_(a)}forEachTileCoord(e,s,a){const d=this.getTileRangeForExtentAndZ(e,s);for(let b=d.minX,_=d.maxX;b<=_;++b)for(let _e=d.minY,nt=d.maxY;_e<=nt;++_e)a([s,b,_e])}forEachTileCoordParentTileRange(e,s,a,d){let b,_,_e,nt=null,rt=e[0]-1;for(this.zoomFactor_===2?(_=e[1],_e=e[2]):nt=this.getTileCoordExtent(e,d);rt>=this.minZoom;){if(_!==void 0&&_e!==void 0?(_=Math.floor(_/2),_e=Math.floor(_e/2),b=createOrUpdate$1(_,_,_e,_e,a)):b=this.getTileRangeForExtentAndZ(nt,rt,a),s(rt,b))return!0;--rt}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,s,a){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const b=e[1]*2,_=e[2]*2;return createOrUpdate$1(b,b+1,_,_+1,s)}const d=this.getTileCoordExtent(e,a||this.tmpExtent_);return this.getTileRangeForExtentAndZ(d,e[0]+1,s)}return null}getTileRangeForTileCoordAndZ(e,s,a){if(s>this.maxZoom||s<this.minZoom)return null;const d=e[0],b=e[1],_=e[2];if(s===d)return createOrUpdate$1(b,_,b,_,a);if(this.zoomFactor_){const nt=Math.pow(this.zoomFactor_,s-d),rt=Math.floor(b*nt),ct=Math.floor(_*nt);if(s<d)return createOrUpdate$1(rt,rt,ct,ct,a);const dt=Math.floor(nt*(b+1))-1,pt=Math.floor(nt*(_+1))-1;return createOrUpdate$1(rt,dt,ct,pt,a)}const _e=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(_e,s,a)}getTileRangeForExtentAndZ(e,s,a){this.getTileCoordForXYAndZ_(e[0],e[3],s,!1,tmpTileCoord);const d=tmpTileCoord[1],b=tmpTileCoord[2];this.getTileCoordForXYAndZ_(e[2],e[1],s,!0,tmpTileCoord);const _=tmpTileCoord[1],_e=tmpTileCoord[2];return createOrUpdate$1(d,_,b,_e,a)}getTileCoordCenter(e){const s=this.getOrigin(e[0]),a=this.getResolution(e[0]),d=toSize(this.getTileSize(e[0]),this.tmpSize_);return[s[0]+(e[1]+.5)*d[0]*a,s[1]-(e[2]+.5)*d[1]*a]}getTileCoordExtent(e,s){const a=this.getOrigin(e[0]),d=this.getResolution(e[0]),b=toSize(this.getTileSize(e[0]),this.tmpSize_),_=a[0]+e[1]*b[0]*d,_e=a[1]-(e[2]+1)*b[1]*d,nt=_+b[0]*d,rt=_e+b[1]*d;return createOrUpdate$2(_,_e,nt,rt,s)}getTileCoordForCoordAndResolution(e,s,a){return this.getTileCoordForXYAndResolution_(e[0],e[1],s,!1,a)}getTileCoordForXYAndResolution_(e,s,a,d,b){const _=this.getZForResolution(a),_e=a/this.getResolution(_),nt=this.getOrigin(_),rt=toSize(this.getTileSize(_),this.tmpSize_);let ct=_e*(e-nt[0])/a/rt[0],dt=_e*(nt[1]-s)/a/rt[1];return d?(ct=ceil(ct,DECIMALS$1)-1,dt=ceil(dt,DECIMALS$1)-1):(ct=floor(ct,DECIMALS$1),dt=floor(dt,DECIMALS$1)),createOrUpdate(_,ct,dt,b)}getTileCoordForXYAndZ_(e,s,a,d,b){const _=this.getOrigin(a),_e=this.getResolution(a),nt=toSize(this.getTileSize(a),this.tmpSize_);let rt=(e-_[0])/_e/nt[0],ct=(_[1]-s)/_e/nt[1];return d?(rt=ceil(rt,DECIMALS$1)-1,ct=ceil(ct,DECIMALS$1)-1):(rt=floor(rt,DECIMALS$1),ct=floor(ct,DECIMALS$1)),createOrUpdate(a,rt,ct,b)}getTileCoordForCoordAndZ(e,s,a){return this.getTileCoordForXYAndZ_(e[0],e[1],s,!1,a)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,s){const a=linearFindNearest(this.resolutions_,e,s||0);return clamp(a,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,s){return intersectsLinearRing(s,0,s.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const s=this.resolutions_.length,a=new Array(s);for(let d=this.minZoom;d<s;++d)a[d]=this.getTileRangeForExtentAndZ(e,d);this.fullTileRanges_=a}}class WMTSTileGrid extends TileGrid{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function createFromCapabilitiesMatrixSet(o,e,s){const a=[],d=[],b=[],_=[],_e=[];s=s!==void 0?s:[];const nt="SupportedCRS",rt="TileMatrix",ct="Identifier",dt="ScaleDenominator",pt="TopLeftCorner",bt="TileWidth",xt="TileHeight",wt=o[nt],Tt=get$3(wt),Rt=Tt.getMetersPerUnit(),Mt=Tt.getAxisOrientation().substr(0,2)=="ne";return o[rt].sort(function(Et,$t){return $t[dt]-Et[dt]}),o[rt].forEach(function(Et){let $t;if(s.length>0?$t=s.find(function(Xt){return Et[ct]==Xt[rt]?!0:Et[ct].includes(":")?!1:o[ct]+":"+Et[ct]===Xt[rt]}):$t=!0,$t){d.push(Et[ct]);const Xt=Et[dt]*28e-5/Rt,Zt=Et[bt],Nt=Et[xt];Mt?b.push([Et[pt][1],Et[pt][0]]):b.push(Et[pt]),a.push(Xt),_.push(Zt==Nt?Zt:[Zt,Nt]),_e.push([Et.MatrixWidth,Et.MatrixHeight])}}),new WMTSTileGrid({extent:e,origins:b,resolutions:a,matrixIds:d,tileSizes:_,sizes:_e})}function getForProjection(o){let e=o.getDefaultTileGrid();return e||(e=createForProjection(o),o.setDefaultTileGrid(e)),e}function wrapX(o,e,s){const a=e[0],d=o.getTileCoordCenter(e),b=extentFromProjection(s);if(!containsCoordinate(b,d)){const _=getWidth(b),_e=Math.ceil((b[0]-d[0])/_);return d[0]+=_*_e,o.getTileCoordForCoordAndZ(d,a)}return e}function createForExtent(o,e,s,a){a=a!==void 0?a:"top-left";const d=resolutionsFromExtent(o,e,s);return new TileGrid({extent:o,origin:getCorner(o,a),resolutions:d,tileSize:s})}function createXYZ(o){const e=o||{},s=e.extent||get$3("EPSG:3857").getExtent(),a={extent:s,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(s,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid(a)}function resolutionsFromExtent(o,e,s,a){e=e!==void 0?e:DEFAULT_MAX_ZOOM,s=toSize(s!==void 0?s:DEFAULT_TILE_SIZE);const d=getHeight(o),b=getWidth(o);a=a>0?a:Math.max(b/s[0],d/s[1]);const _=e+1,_e=new Array(_);for(let nt=0;nt<_;++nt)_e[nt]=a/Math.pow(2,nt);return _e}function createForProjection(o,e,s,a){const d=extentFromProjection(o);return createForExtent(d,e,s,a)}function extentFromProjection(o){o=get$3(o);let e=o.getExtent();if(!e){const s=180*METERS_PER_UNIT$1.degrees/o.getMetersPerUnit();e=createOrUpdate$2(-s,-s,s,s)}return e}class TileSource extends Source{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const s=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),s),this.tileCache=new TileCache(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,s){const a=this.getTileCacheForProjection(e);a&&a.expireCache(s)}forEachLoadedTile(e,s,a,d){const b=this.getTileCacheForProjection(e);if(!b)return!1;let _=!0,_e,nt,rt;for(let ct=a.minX;ct<=a.maxX;++ct)for(let dt=a.minY;dt<=a.maxY;++dt)nt=getKeyZXY(s,ct,dt),rt=!1,b.containsKey(nt)&&(_e=b.get(nt),rt=_e.getState()===TileState.LOADED,rt&&(rt=d(_e)!==!1)),rt||(_=!1);return _}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const s=e?this.getTileGridForProjection(e):this.tileGrid;return s?s.getResolutions():null}getTile(e,s,a,d,b){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:getForProjection(e)}getTileCacheForProjection(e){const s=this.getProjection();return assert(s===null||equivalent(s,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,s,a){const d=this.getTileGridForProjection(a),b=this.getTilePixelRatio(s),_=toSize(d.getTileSize(e),this.tmpSize);return b==1?_:scale(_,b,this.tmpSize)}getTileCoordForTileUrlFunction(e,s){s=s!==void 0?s:this.getProjection();const a=this.getTileGridForProjection(s);return this.getWrapX()&&s.isGlobal()&&(e=wrapX(a,e,s)),withinExtentAndZ(e,a)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,s){const a=this.getTileCacheForProjection(s);e>a.highWaterMark&&(a.highWaterMark=e)}useTile(e,s,a,d){}}class TileSourceEvent extends BaseEvent{constructor(e,s){super(e),this.tile=s}}function createFromTemplate(o,e){const s=/\{z\}/g,a=/\{x\}/g,d=/\{y\}/g,b=/\{-y\}/g;return function(_,_e,nt){if(_)return o.replace(s,_[0].toString()).replace(a,_[1].toString()).replace(d,_[2].toString()).replace(b,function(){const rt=_[0],ct=e.getFullTileRange(rt);if(!ct)throw new Error("The {-y} placeholder requires a tile grid with extent");return(ct.getHeight()-_[2]-1).toString()})}}function createFromTemplates(o,e){const s=o.length,a=new Array(s);for(let d=0;d<s;++d)a[d]=createFromTemplate(o[d],e);return createFromTileUrlFunctions(a)}function createFromTileUrlFunctions(o){return o.length===1?o[0]:function(e,s,a){if(!e)return;const d=hash(e),b=modulo(d,o.length);return o[b](e,s,a)}}function expandUrl(o){const e=[];let s=/\{([a-z])-([a-z])\}/.exec(o);if(s){const a=s[1].charCodeAt(0),d=s[2].charCodeAt(0);let b;for(b=a;b<=d;++b)e.push(o.replace(s[0],String.fromCharCode(b)));return e}if(s=/\{(\d+)-(\d+)\}/.exec(o),s){const a=parseInt(s[2],10);for(let d=parseInt(s[1],10);d<=a;d++)e.push(o.replace(s[0],d.toString()));return e}return e.push(o),e}class UrlTile extends TileSource{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const s=e.target,a=getUid(s),d=s.getState();let b;d==TileState.LOADING?(this.tileLoadingKeys_[a]=!0,b=TileEventType.TILELOADSTART):a in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[a],b=d==TileState.ERROR?TileEventType.TILELOADERROR:d==TileState.LOADED?TileEventType.TILELOADEND:void 0),b!=null&&this.dispatchEvent(new TileSourceEvent(b,s))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,s){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof s<"u"?this.setKey(s):this.changed()}setUrl(e){const s=expandUrl(e);this.urls=s,this.setUrls(s)}setUrls(e){this.urls=e;const s=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(e,this.tileGrid),s):this.setKey(s)}tileUrlFunction(e,s,a){}useTile(e,s,a){const d=getKeyZXY(e,s,a);this.tileCache.containsKey(d)&&this.tileCache.get(d)}}class TileImage extends UrlTile{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ImageTile,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,s){const a=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==a?s:{});for(const d in this.tileCacheForProjection){const b=this.tileCacheForProjection[d];b.expireCache(b==a?s:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const s=this.getProjection();if(this.tileGrid&&(!s||equivalent(s,e)))return this.tileGrid;const a=getUid(e);return a in this.tileGridForProjection||(this.tileGridForProjection[a]=getForProjection(e)),this.tileGridForProjection[a]}getTileCacheForProjection(e){const s=this.getProjection();if(!s||equivalent(s,e))return this.tileCache;const a=getUid(e);return a in this.tileCacheForProjection||(this.tileCacheForProjection[a]=new TileCache(this.tileCache.highWaterMark)),this.tileCacheForProjection[a]}createTile_(e,s,a,d,b,_){const _e=[e,s,a],nt=this.getTileCoordForTileUrlFunction(_e,b),rt=nt?this.tileUrlFunction(nt,d,b):void 0,ct=new this.tileClass(_e,rt!==void 0?TileState.IDLE:TileState.EMPTY,rt!==void 0?rt:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return ct.key=_,ct.addEventListener(EventType.CHANGE,this.handleTileChange.bind(this)),ct}getTile(e,s,a,d,b){const _=this.getProjection();if(!_||!b||equivalent(_,b))return this.getTileInternal(e,s,a,d,_||b);const _e=this.getTileCacheForProjection(b),nt=[e,s,a];let rt;const ct=getKey$1(nt);_e.containsKey(ct)&&(rt=_e.get(ct));const dt=this.getKey();if(rt&&rt.key==dt)return rt;const pt=this.getTileGridForProjection(_),bt=this.getTileGridForProjection(b),xt=this.getTileCoordForTileUrlFunction(nt,b),wt=new ReprojTile(_,pt,b,bt,nt,xt,this.getTilePixelRatio(d),this.getGutter(),(Tt,Rt,Mt,Et)=>this.getTileInternal(Tt,Rt,Mt,Et,_),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return wt.key=dt,rt?(wt.interimTile=rt,wt.refreshInterimChain(),_e.replace(ct,wt)):_e.set(ct,wt),wt}getTileInternal(e,s,a,d,b){let _=null;const _e=getKeyZXY(e,s,a),nt=this.getKey();if(!this.tileCache.containsKey(_e))_=this.createTile_(e,s,a,d,b,nt),this.tileCache.set(_e,_);else if(_=this.tileCache.get(_e),_.key!=nt){const rt=_;_=this.createTile_(e,s,a,d,b,nt),rt.getState()==TileState.IDLE?_.interimTile=rt.interimTile:_.interimTile=rt,_.refreshInterimChain(),this.tileCache.replace(_e,_)}return _}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const s in this.tileCacheForProjection)this.tileCacheForProjection[s].clear();this.changed()}}setTileGridForProjection(e,s){const a=get$3(e);if(a){const d=getUid(a);d in this.tileGridForProjection||(this.tileGridForProjection[d]=s)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function defaultTileLoadFunction(o,e){o.getImage().src=e}const DECIMALS=4;function appendParams(o,e){const s=[];Object.keys(e).forEach(function(d){e[d]!==null&&e[d]!==void 0&&s.push(d+"="+encodeURIComponent(e[d]))});const a=s.join("&");return o=o.replace(/[?&]$/,""),o+=o.includes("?")?"&":"?",o+a}const DEFAULT_VERSION="1.3.0";function getRequestUrl(o,e,s,a,d){d.WIDTH=s[0],d.HEIGHT=s[1];const b=a.getAxisOrientation();let _;const _e=compareVersions(d.VERSION,"1.3")>=0;return d[_e?"CRS":"SRS"]=a.getCode(),_e&&b.substr(0,2)=="ne"?_=[e[1],e[0],e[3],e[2]]:_=e,d.BBOX=_.join(","),appendParams(o,d)}function getImageSrc(o,e,s,a,d,b,_){b=Object.assign({REQUEST:"GetMap"},b);const _e=e/s,nt=[round(getWidth(o)/_e,DECIMALS),round(getHeight(o)/_e,DECIMALS)];if(s!=1)switch(_){case"geoserver":const ct=90*s+.5|0;"FORMAT_OPTIONS"in b?b.FORMAT_OPTIONS+=";dpi:"+ct:b.FORMAT_OPTIONS="dpi:"+ct;break;case"mapserver":b.MAP_RESOLUTION=90*s;break;case"carmentaserver":case"qgis":b.DPI=90*s;break;default:throw new Error("Unknown `serverType` configured")}return getRequestUrl(d,o,nt,a,b)}function getRequestParams(o,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:DEFAULT_VERSION,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},o)}class TileWMS extends TileImage{constructor(e){e=e||{};const s=Object.assign({},e.params),a="TRANSPARENT"in s?s.TRANSPARENT:!0;super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!a,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=s,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,s,a,d){const b=get$3(a),_=this.getProjection()||b;let _e=this.getTileGrid();_e||(_e=this.getTileGridForProjection(_));const nt=transform$1(e,b,_),rt=calculateSourceResolution(_,b,e,s),ct=_e.getZForResolution(rt,this.zDirection),dt=_e.getResolution(ct),pt=_e.getTileCoordForCoordAndZ(nt,ct);if(_e.getResolutions().length<=pt[0])return;let bt=_e.getTileCoordExtent(pt,this.tmpExtent_);const xt=this.gutter_;xt!==0&&(bt=buffer(bt,dt*xt,bt));const wt={QUERY_LAYERS:this.params_.LAYERS};Object.assign(wt,getRequestParams(this.params_,"GetFeatureInfo"),d);const Tt=Math.floor((nt[0]-bt[0])/dt),Rt=Math.floor((bt[3]-nt[1])/dt);return wt[this.v13_?"I":"X"]=Tt,wt[this.v13_?"J":"Y"]=Rt,this.getRequestUrl_(pt,bt,1,_||b,wt)}getLegendUrl(e,s){if(this.urls[0]===void 0)return;const a={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(s===void 0||s.LAYER===void 0){const d=this.params_.LAYERS;if(!(!Array.isArray(d)||d.length===1))return;a.LAYER=d}if(e!==void 0){const d=this.getProjection()?this.getProjection().getMetersPerUnit():1,b=28e-5;a.SCALE=e*d/b}return Object.assign(a,s),appendParams(this.urls[0],a)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,s,a,d,b){const _=this.urls;if(!_)return;let _e;if(_.length==1)_e=_[0];else{const nt=modulo(hash(e),_.length);_e=_[nt]}return getImageSrc(s,(this.tileGrid||this.getTileGridForProjection(d)).getResolution(e[0]),a,d,_e,b,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const s=[];for(const a in this.params_)s[e++]=a+"-"+this.params_[a];return s.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||DEFAULT_VERSION;this.v13_=compareVersions(e,"1.3")>=0}tileUrlFunction(e,s,a){let d=this.getTileGrid();if(d||(d=this.getTileGridForProjection(a)),d.getResolutions().length<=e[0])return;s!=1&&(!this.hidpi_||this.serverType_===void 0)&&(s=1);const b=d.getResolution(e[0]);let _=d.getTileCoordExtent(e,this.tmpExtent_);const _e=this.gutter_;_e!==0&&(_=buffer(_,b*_e,_));const nt=Object.assign({},getRequestParams(this.params_,"GetMap"));return this.getRequestUrl_(e,_,s,a,nt)}}const name="geopf-extensions-openlayers",description="French Geoportal Extensions for OpenLayers libraries",version$1="1.0.0-beta.0-241",date="05/11/2024",module="src/index.js",directories={},engines={node:">=20"},repository={type:"git",url:"https://github.com/IGNF/geopf-extensions-openlayers.git"},author="IGNF",keywords=["geoportail","geoplateforme","javascript","OpenLayers 8"],license="AGPL-3.0",bugs={url:"https://github.com/IGNF/geopf-extensions-openlayers/issues"},homepage="https://github.com/IGNF/geopf-extensions-openlayers#readme",dependencies={"@gouvfr/dsfr":"^1.11.0","@mapbox/mapbox-gl-style-spec":"14.7.1",eventbusjs:"0.2.0","geoportal-access-lib":"3.4.3",loglevel:"^1.9.1",ol:"8.2.0","ol-mapbox-style":"12.3.5",proj4:"2.12.1",sortablejs:"1.15.3",typescript:"^5.3.3","whatwg-fetch":"3.6.20","@xmldom/xmldom":"^0.9.0"},Pkg={name,description,version:version$1,date,module,directories,engines,repository,author,keywords,license,bugs,homepage,dependencies};LoggerByDefault$1.getLogger("sourcewms");var SourceWMS=class extends TileWMS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var s=e.configuration,a=s?s.params:null,d=e.apiKey;if(!s){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var b=Config$1.configuration.getLayerId(e.layer,"WMS");if(!b)throw new Error(`ERROR : WMS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(s=Config$1.configuration.getLayerConf(b),!s)throw new Error("ERROR : WMS Layer configuration cannot be found in Geoportal.");d=Config$1.configuration.getLayerKey(b)[0],a=Config$1.configuration.getLayerParams(e.layer,"WMS")}var _=e.ssl===!1?"http://":"https://",_e={"gp-ol-ext":Pkg.olExtVersion||Pkg.version};if(a.url.includes("/private/")){var nt=e.apiKey||d;if(!nt)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");_e.apikey=nt}var rt={url:Gp.Helper.normalyzeUrl(a.url.replace(/(http|https):\/\//,_),_e,!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:a.version,STYLES:a.styles,FORMAT:a.format}};return Helper$1.mergeParams(rt,e.olParams),e.olParams&&!a.originators&&(a.originators=e.olParams.attributions),super(rt),this._originators=a.originators,this._legends=e.legends||a.legends,this._metadata=e.metadata||a.metadata,this._title=e.title||a.title,this._description=e.description||a.description,this._quicklookUrl=e.quicklookUrl||a.quicklookUrl,this.name=e.layer,this.service="WMS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=SourceWMS);var LayerWMS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var s=e.configuration;if(!s){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var a=Config$1.configuration.getLayerId(e.layer,"WMS");if(s=Config$1.configuration.getLayerConf(a),!s)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var d;e.olParams&&e.olParams.sourceParams&&(d=e.olParams.sourceParams);var b=new SourceWMS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:d}),_={source:b};if(b.getParams().LAYERS!==void 0&&d&&d.projection){var _e=[s.globalConstraints.extent.left,s.globalConstraints.extent.bottom,s.globalConstraints.extent.right,s.globalConstraints.extent.top];_.extent=transformExtent(_e,"EPSG:4326",d.projection);var nt;typeof d.projection=="string"?nt=get$3(d.projection):typeof d.projection=="object"&&d.projection.getCode()&&(nt=get$3(d.projection.getCode())),nt&&nt.getUnits()&&(nt.getUnits()==="m"?(_.minResolution=(s.globalConstraints.minScale-1)*28e-5,_.maxResolution=(s.globalConstraints.maxScale+1)*28e-5):nt.getUnits()==="degrees"&&(_.minResolution=(s.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),_.maxResolution=(s.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper$1.mergeParams(_,e.olParams),super(_),this.name=e.layer,this.service="WMS",this}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=LayerWMS);let WMTS$1=class extends TileImage{constructor(e){const s=e.requestEncoding!==void 0?e.requestEncoding:"KVP",a=e.tileGrid;let d=e.urls;d===void 0&&e.url!==void 0&&(d=expandUrl(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:a,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:d,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=s,this.setKey(this.getKeyForDimensions_()),d&&d.length>0&&(this.tileUrlFunction=createFromTileUrlFunctions(d.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const s=e.join(`
`);this.setTileUrlFunction(createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate.bind(this))),s)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const s in this.dimensions_)e.push(s+"-"+this.dimensions_[s]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const s=this.requestEncoding_,a={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};s=="KVP"&&Object.assign(a,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=s=="KVP"?appendParams(e,a):e.replace(/\{(\w+?)\}/g,function(_,_e){return _e.toLowerCase()in a?a[_e.toLowerCase()]:_});const d=this.tileGrid,b=this.dimensions_;return function(_,_e,nt){if(!_)return;const rt={TileMatrix:d.getMatrixId(_[0]),TileCol:_[1],TileRow:_[2]};Object.assign(rt,b);let ct=e;return s=="KVP"?ct=appendParams(ct,rt):ct=ct.replace(/\{(\w+?)\}/g,function(dt,pt){return rt[pt]}),ct}}};function optionsFromCapabilities(o,e){const a=o.Contents.Layer.find(function(Vt){return Vt.Identifier==e.layer});if(!a)return null;const d=o.Contents.TileMatrixSet;let b;a.TileMatrixSetLink.length>1?"projection"in e?b=a.TileMatrixSetLink.findIndex(function(Vt){const hn=d.find(function(Vn){return Vn.Identifier==Vt.TileMatrixSet}).SupportedCRS,fn=get$3(hn),It=get$3(e.projection);return fn&&It?equivalent(fn,It):hn==e.projection}):b=a.TileMatrixSetLink.findIndex(function(Vt){return Vt.TileMatrixSet==e.matrixSet}):b=0,b<0&&(b=0);const _=a.TileMatrixSetLink[b].TileMatrixSet,_e=a.TileMatrixSetLink[b].TileMatrixSetLimits;let nt=a.Format[0];"format"in e&&(nt=e.format),b=a.Style.findIndex(function(Vt){return"style"in e?Vt.Title==e.style:Vt.isDefault}),b<0&&(b=0);const rt=a.Style[b].Identifier,ct={};"Dimension"in a&&a.Dimension.forEach(function(Vt,ao,hn){const fn=Vt.Identifier;let It=Vt.Default;It===void 0&&(It=Vt.Value[0]),ct[fn]=It});const pt=o.Contents.TileMatrixSet.find(function(Vt){return Vt.Identifier==_});let bt;const xt=pt.SupportedCRS;if(xt&&(bt=get$3(xt)),"projection"in e){const Vt=get$3(e.projection);Vt&&(!bt||equivalent(Vt,bt))&&(bt=Vt)}let wt=!1;const Tt=bt.getAxisOrientation().substr(0,2)=="ne";let Rt=pt.TileMatrix[0],Mt={MinTileCol:0,MinTileRow:0,MaxTileCol:Rt.MatrixWidth-1,MaxTileRow:Rt.MatrixHeight-1};if(_e){Mt=_e[_e.length-1];const Vt=pt.TileMatrix.find(ao=>ao.Identifier===Mt.TileMatrix||pt.Identifier+":"+ao.Identifier===Mt.TileMatrix);Vt&&(Rt=Vt)}const Et=Rt.ScaleDenominator*28e-5/bt.getMetersPerUnit(),$t=Tt?[Rt.TopLeftCorner[1],Rt.TopLeftCorner[0]]:Rt.TopLeftCorner,Xt=Rt.TileWidth*Et,Zt=Rt.TileHeight*Et;let Nt=pt.BoundingBox;Nt&&Tt&&(Nt=[Nt[1],Nt[0],Nt[3],Nt[2]]);let Jt=[$t[0]+Xt*Mt.MinTileCol,$t[1]-Zt*(1+Mt.MaxTileRow),$t[0]+Xt*(1+Mt.MaxTileCol),$t[1]-Zt*Mt.MinTileRow];if(Nt!==void 0&&!containsExtent(Nt,Jt)){const Vt=a.WGS84BoundingBox,ao=get$3("EPSG:4326").getExtent();if(Jt=Nt,Vt)wt=Vt[0]===ao[0]&&Vt[2]===ao[2];else{const hn=transformExtent(Nt,pt.SupportedCRS,"EPSG:4326");wt=hn[0]-1e-10<=ao[0]&&hn[2]+1e-10>=ao[2]}}const dn=createFromCapabilitiesMatrixSet(pt,Jt,_e),Pn=[];let an=e.requestEncoding;if(an=an!==void 0?an:"","OperationsMetadata"in o&&"GetTile"in o.OperationsMetadata){const Vt=o.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let ao=0,hn=Vt.length;ao<hn;++ao)if(Vt[ao].Constraint){const It=Vt[ao].Constraint.find(function(Vn){return Vn.name=="GetEncoding"}).AllowedValues.Value;if(an===""&&(an=It[0]),an==="KVP")It.includes("KVP")&&Pn.push(Vt[ao].href);else break}else Vt[ao].href&&(an="KVP",Pn.push(Vt[ao].href))}return Pn.length===0&&(an="REST",a.ResourceURL.forEach(function(Vt){Vt.resourceType==="tile"&&(nt=Vt.format,Pn.push(Vt.template))})),{urls:Pn,layer:e.layer,matrixSet:_,format:nt,projection:bt,requestEncoding:an,tileGrid:dn,style:rt,dimensions:ct,wrapX:wt,crossOrigin:e.crossOrigin}}var WMTS=class extends WMTS$1{constructor(e){super(e)}getFeatureInfoUrl(e,s,a,d){var b=this.options&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,_=this.tileGrid,_e=this.tileGrid.getTileCoordForCoordAndResolution(e,s),nt=function(Et,$t,Xt){var Zt=[0,0,0],Nt=createEmpty(),Jt=Et[1],dn=Et[2],Pn=$t.getTileCoordExtent(Et),an=Xt.getExtent();if(an!=null&&Xt.isGlobal()){var Vt=Math.ceil(getWidth(an)/getWidth(Pn));Jt=Jt%Vt,Zt[0]=Et[0],Zt[1]=Jt,Zt[2]=Et[2],Pn=$t.getTileCoordExtent(Zt,Nt)}return intersects$1(Pn,an)?[Et[0],Jt,dn]:null},rt=_.getTileCoordExtent(_e),ct=nt(_e,_,a);if(!(_.getResolutions().length<=_e[0])){var dt=_.getResolution(_e[0]),pt=_.getMatrixIds()[_e[0]],bt={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:ct[1],TILEROW:ct[2],TILEMATRIX:pt,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};Helper$1.assign(bt,d);var xt=Math.floor((e[0]-rt[0])/(dt/b)),wt=Math.floor((rt[3]-e[1])/(dt/b)),Tt=_.getTileSize(_e[0]);xt=Math.min(xt,(Tt[0]|Tt)-1),wt=Math.max(wt,0),bt.I=xt,bt.J=wt;var Rt=this.urls[0],Mt=Gp.Helper.normalyzeUrl(Rt,bt);return Mt}}};window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=WMTS);var LayerUtils={getZoomLevelFromScaleDenominator:function(o,e){var s={};switch(e){case"EPSG:2154":s={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:s={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424};break}var a=o*28e-5;for(var d in s)if(s.hasOwnProperty(d)&&s[d]<=a)return d=parseInt(d,10),d;return 0},getAttributions:function(o){var e=o.zoom,s=[];if(o.originators!=null&&o.visibility)for(var a,d=0,b=o.originators.length;d<b;d++){a=!0;for(var _=o.originators[d],_e=o.originators[d].constraints||[],nt=0,rt=_e.length;nt<rt;nt++){var ct=_e[nt];a=!0;var dt=this.getZoomLevelFromScaleDenominator(ct.maxScaleDenominator,o.crs),pt=this.getZoomLevelFromScaleDenominator(ct.minScaleDenominator,o.crs)||21;dt&&dt>e&&(a=!1),a&&pt&&pt<e&&(a=!1);var bt=ct.bbox;if(a&&bt){a=!1;var xt=o.extent;if(xt){var wt=[bt.top,bt.left,bt.bottom,bt.right];if(this.intersects(xt,wt)){a=!0;break}}}}if(a){var Tt=_.logo,Rt=_.url,Mt=_.name?_.name:"",Et=_.attribution,$t=document.createElement("div");$t.className="gp-control-attribution";var Xt=null;Xt=document.createElement("a"),Xt.className="gp-control-attribution-link",Xt.target="_blank",$t.appendChild(Xt),Rt&&(Xt.href=Rt);var Zt=!!Tt,Nt=null;Zt?(Nt=document.createElement("img"),Xt?(Nt.className="gp-control-attribution-image",Xt.appendChild(Nt)):(Nt.className="",$t.appendChild(Nt)),Nt.src=Tt,Nt.title=Et||Mt,Nt.style.height="30px",Nt.style.width="30px"):Mt?Xt.textContent=Mt:Et?Xt.textContent=Et:Rt?Xt.textContent=Rt:Xt.textContent="",s.push($t.innerHTML+" ")}}return s},intersects:function(o,e){var s=o[1]<=e[3]&&e[1]<=o[3],a=o[2]<=e[0]&&e[2]<=o[0];return s&&a}};LoggerByDefault$1.getLogger("sourcewmts");var SourceWMTS=class extends WMTS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var s=e.configuration,a=s?s.params:null,d=e.apiKey;if(!s){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var b=Config$1.configuration.getLayerId(e.layer,"WMTS");if(!b)throw new Error(`ERROR : WMTS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(s=Config$1.configuration.getLayerConf(b),!s)throw new Error("ERROR : WMTS Layer configuration cannot be found in Geoportal.");d=Config$1.configuration.getLayerKey(b)[0],a=Config$1.configuration.getLayerParams(e.layer,"WMTS")}var _=e.ssl===!1?"http://":"https://",_e={"gp-ol-ext":Pkg.olExtVersion||Pkg.version};if(a.url.includes("/private/")){var nt=e.apiKey||d;if(!nt)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");_e.apikey=nt}var rt={url:Gp.Helper.normalyzeUrl(a.url.replace(/(http|https):\/\//,_),_e,!1),version:a.version,style:a.styles,format:a.format,projection:a.projection,maxZoom:LayerUtils.getZoomLevelFromScaleDenominator(a.minScale),layer:e.layer,matrixSet:a.TMSLink,tileGrid:new WMTSTileGrid({resolutions:a.nativeResolutions,matrixIds:a.matrixIds,origin:[Object.values(a.tileMatrices)[0].topLeftCorner.x,Object.values(a.tileMatrices)[0].topLeftCorner.y]})};return Helper$1.mergeParams(rt,e.olParams),e.olParams&&!a.originators&&(a.originators=e.olParams.attributions),super(rt),this._originators=a.originators,this._legends=e.legends||a.legends,this._metadata=e.metadata||a.metadata,this._description=e.description||a.description,this._title=e.title||a.title,this._quicklookUrl=e.quicklookUrl||a.quicklookUrl,this.name=e.layer,this.service="WMTS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=SourceWMTS);var LayerWMTS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var s=e.configuration;if(!s){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var a=Config$1.configuration.getLayerId(e.layer,"WMTS");if(s=Config$1.configuration.getLayerConf(a),!s)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var d;e.olParams&&e.olParams.sourceParams&&(d=e.olParams.sourceParams);var b=new SourceWMTS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:d}),_={source:b};if(b.getLayer()!==void 0&&s.globalConstraints&&s.globalConstraints.projection){var _e;typeof s.globalConstraints.projection=="string"&&(_e=get$3(s.globalConstraints.projection)),_e&&_e.getUnits()&&(_e.getUnits()==="m"?(_.minResolution=(s.globalConstraints.minScale-1)*28e-5,_.maxResolution=(s.globalConstraints.maxScale+1)*28e-5):_e.getUnits()==="degrees"&&(_.minResolution=(s.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),_.maxResolution=(s.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper$1.mergeParams(_,e.olParams),super(_),this.name=e.layer,this.service="WMTS",this}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=LayerWMTS);function quickselect(o,e,s,a,d){quickselectStep(o,e,s||0,a||o.length-1,d||defaultCompare)}function quickselectStep(o,e,s,a,d){for(;a>s;){if(a-s>600){var b=a-s+1,_=e-s+1,_e=Math.log(b),nt=.5*Math.exp(2*_e/3),rt=.5*Math.sqrt(_e*nt*(b-nt)/b)*(_-b/2<0?-1:1),ct=Math.max(s,Math.floor(e-_*nt/b+rt)),dt=Math.min(a,Math.floor(e+(b-_)*nt/b+rt));quickselectStep(o,e,ct,dt,d)}var pt=o[e],bt=s,xt=a;for(swap(o,s,e),d(o[a],pt)>0&&swap(o,s,a);bt<xt;){for(swap(o,bt,xt),bt++,xt--;d(o[bt],pt)<0;)bt++;for(;d(o[xt],pt)>0;)xt--}d(o[s],pt)===0?swap(o,s,xt):(xt++,swap(o,xt,a)),xt<=e&&(s=xt+1),e<=xt&&(a=xt-1)}}function swap(o,e,s){var a=o[e];o[e]=o[s],o[s]=a}function defaultCompare(o,e){return o<e?-1:o>e?1:0}let RBush$1=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let s=this.data;const a=[];if(!intersects(e,s))return a;const d=this.toBBox,b=[];for(;s;){for(let _=0;_<s.children.length;_++){const _e=s.children[_],nt=s.leaf?d(_e):_e;intersects(e,nt)&&(s.leaf?a.push(_e):contains(e,nt)?this._all(_e,a):b.push(_e))}s=b.pop()}return a}collides(e){let s=this.data;if(!intersects(e,s))return!1;const a=[];for(;s;){for(let d=0;d<s.children.length;d++){const b=s.children[d],_=s.leaf?this.toBBox(b):b;if(intersects(e,_)){if(s.leaf||contains(e,_))return!0;a.push(b)}}s=a.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let a=0;a<e.length;a++)this.insert(e[a]);return this}let s=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=s;else if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){const a=this.data;this.data=s,s=a}this._insert(s,this.data.height-s.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(e,s){if(!e)return this;let a=this.data;const d=this.toBBox(e),b=[],_=[];let _e,nt,rt;for(;a||b.length;){if(a||(a=b.pop(),nt=b[b.length-1],_e=_.pop(),rt=!0),a.leaf){const ct=findItem(e,a.children,s);if(ct!==-1)return a.children.splice(ct,1),b.push(a),this._condense(b),this}!rt&&!a.leaf&&contains(a,d)?(b.push(a),_.push(_e),_e=0,nt=a,a=a.children[0]):nt?(_e++,a=nt.children[_e],rt=!1):a=null}return this}toBBox(e){return e}compareMinX(e,s){return e.minX-s.minX}compareMinY(e,s){return e.minY-s.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,s){const a=[];for(;e;)e.leaf?s.push(...e.children):a.push(...e.children),e=a.pop();return s}_build(e,s,a,d){const b=a-s+1;let _=this._maxEntries,_e;if(b<=_)return _e=createNode(e.slice(s,a+1)),calcBBox(_e,this.toBBox),_e;d||(d=Math.ceil(Math.log(b)/Math.log(_)),_=Math.ceil(b/Math.pow(_,d-1))),_e=createNode([]),_e.leaf=!1,_e.height=d;const nt=Math.ceil(b/_),rt=nt*Math.ceil(Math.sqrt(_));multiSelect(e,s,a,rt,this.compareMinX);for(let ct=s;ct<=a;ct+=rt){const dt=Math.min(ct+rt-1,a);multiSelect(e,ct,dt,nt,this.compareMinY);for(let pt=ct;pt<=dt;pt+=nt){const bt=Math.min(pt+nt-1,dt);_e.children.push(this._build(e,pt,bt,d-1))}}return calcBBox(_e,this.toBBox),_e}_chooseSubtree(e,s,a,d){for(;d.push(s),!(s.leaf||d.length-1===a);){let b=1/0,_=1/0,_e;for(let nt=0;nt<s.children.length;nt++){const rt=s.children[nt],ct=bboxArea(rt),dt=enlargedArea(e,rt)-ct;dt<_?(_=dt,b=ct<b?ct:b,_e=rt):dt===_&&ct<b&&(b=ct,_e=rt)}s=_e||s.children[0]}return s}_insert(e,s,a){const d=a?e:this.toBBox(e),b=[],_=this._chooseSubtree(d,this.data,s,b);for(_.children.push(e),extend$2(_,d);s>=0&&b[s].children.length>this._maxEntries;)this._split(b,s),s--;this._adjustParentBBoxes(d,b,s)}_split(e,s){const a=e[s],d=a.children.length,b=this._minEntries;this._chooseSplitAxis(a,b,d);const _=this._chooseSplitIndex(a,b,d),_e=createNode(a.children.splice(_,a.children.length-_));_e.height=a.height,_e.leaf=a.leaf,calcBBox(a,this.toBBox),calcBBox(_e,this.toBBox),s?e[s-1].children.push(_e):this._splitRoot(a,_e)}_splitRoot(e,s){this.data=createNode([e,s]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(e,s,a){let d,b=1/0,_=1/0;for(let _e=s;_e<=a-s;_e++){const nt=distBBox(e,0,_e,this.toBBox),rt=distBBox(e,_e,a,this.toBBox),ct=intersectionArea(nt,rt),dt=bboxArea(nt)+bboxArea(rt);ct<b?(b=ct,d=_e,_=dt<_?dt:_):ct===b&&dt<_&&(_=dt,d=_e)}return d||a-s}_chooseSplitAxis(e,s,a){const d=e.leaf?this.compareMinX:compareNodeMinX,b=e.leaf?this.compareMinY:compareNodeMinY,_=this._allDistMargin(e,s,a,d),_e=this._allDistMargin(e,s,a,b);_<_e&&e.children.sort(d)}_allDistMargin(e,s,a,d){e.children.sort(d);const b=this.toBBox,_=distBBox(e,0,s,b),_e=distBBox(e,a-s,a,b);let nt=bboxMargin(_)+bboxMargin(_e);for(let rt=s;rt<a-s;rt++){const ct=e.children[rt];extend$2(_,e.leaf?b(ct):ct),nt+=bboxMargin(_)}for(let rt=a-s-1;rt>=s;rt--){const ct=e.children[rt];extend$2(_e,e.leaf?b(ct):ct),nt+=bboxMargin(_e)}return nt}_adjustParentBBoxes(e,s,a){for(let d=a;d>=0;d--)extend$2(s[d],e)}_condense(e){for(let s=e.length-1,a;s>=0;s--)e[s].children.length===0?s>0?(a=e[s-1].children,a.splice(a.indexOf(e[s]),1)):this.clear():calcBBox(e[s],this.toBBox)}};function findItem(o,e,s){if(!s)return e.indexOf(o);for(let a=0;a<e.length;a++)if(s(o,e[a]))return a;return-1}function calcBBox(o,e){distBBox(o,0,o.children.length,e,o)}function distBBox(o,e,s,a,d){d||(d=createNode(null)),d.minX=1/0,d.minY=1/0,d.maxX=-1/0,d.maxY=-1/0;for(let b=e;b<s;b++){const _=o.children[b];extend$2(d,o.leaf?a(_):_)}return d}function extend$2(o,e){return o.minX=Math.min(o.minX,e.minX),o.minY=Math.min(o.minY,e.minY),o.maxX=Math.max(o.maxX,e.maxX),o.maxY=Math.max(o.maxY,e.maxY),o}function compareNodeMinX(o,e){return o.minX-e.minX}function compareNodeMinY(o,e){return o.minY-e.minY}function bboxArea(o){return(o.maxX-o.minX)*(o.maxY-o.minY)}function bboxMargin(o){return o.maxX-o.minX+(o.maxY-o.minY)}function enlargedArea(o,e){return(Math.max(e.maxX,o.maxX)-Math.min(e.minX,o.minX))*(Math.max(e.maxY,o.maxY)-Math.min(e.minY,o.minY))}function intersectionArea(o,e){const s=Math.max(o.minX,e.minX),a=Math.max(o.minY,e.minY),d=Math.min(o.maxX,e.maxX),b=Math.min(o.maxY,e.maxY);return Math.max(0,d-s)*Math.max(0,b-a)}function contains(o,e){return o.minX<=e.minX&&o.minY<=e.minY&&e.maxX<=o.maxX&&e.maxY<=o.maxY}function intersects(o,e){return e.minX<=o.maxX&&e.minY<=o.maxY&&e.maxX>=o.minX&&e.maxY>=o.minY}function createNode(o){return{children:o,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(o,e,s,a,d){const b=[e,s];for(;b.length;){if(s=b.pop(),e=b.pop(),s-e<=a)continue;const _=e+Math.ceil((s-e)/a/2)*a;quickselect(o,_,e,s,d),b.push(e,_,_,s)}}class ImageStyle{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=toSize(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(e){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(e){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e)}listenImageChange(e){abstract()}load(){abstract()}unlistenImageChange(e){abstract()}}function asColorLike(o){return Array.isArray(o)?toString$2(o):o}const CLASS_HIDDEN="ol-hidden",CLASS_SELECTABLE="ol-selectable",CLASS_UNSELECTABLE="ol-unselectable",CLASS_UNSUPPORTED="ol-unsupported",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(o){const e=o.match(fontRegEx);if(!e)return null;const s={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let a=0,d=fontRegExMatchIndex.length;a<d;++a){const b=e[a+1];b!==void 0&&(s[fontRegExMatchIndex[a]]=b)}return s.families=s.family.split(/,\s?/),s},defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject;let measureContext$1=null,measureFont;const textHeights={},registerFont=function(){const e="32px ",s=["monospace","serif"],a=s.length,d="wmytzilWMYTZIL@#/&?$%10";let b,_;function _e(rt,ct,dt){let pt=!0;for(let bt=0;bt<a;++bt){const xt=s[bt];if(_=measureTextWidth(rt+" "+ct+" "+e+xt,d),dt!=xt){const wt=measureTextWidth(rt+" "+ct+" "+e+dt+","+xt,d);pt=pt&&wt!=_}}return!!pt}function nt(){let rt=!0;const ct=checkedFonts.getKeys();for(let dt=0,pt=ct.length;dt<pt;++dt){const bt=ct[dt];checkedFonts.get(bt)<100&&(_e.apply(this,bt.split(`
`))?(clear$1(textHeights),measureContext$1=null,measureFont=void 0,checkedFonts.set(bt,100)):(checkedFonts.set(bt,checkedFonts.get(bt)+1,!0),rt=!1))}rt&&(clearInterval(b),b=void 0)}return function(rt){const ct=getFontParameters(rt);if(!ct)return;const dt=ct.families;for(let pt=0,bt=dt.length;pt<bt;++pt){const xt=dt[pt],wt=ct.style+`
`+ct.weight+`
`+xt;checkedFonts.get(wt)===void 0&&(checkedFonts.set(wt,100,!0),_e(ct.style,ct.weight,xt)||(checkedFonts.set(wt,0,!0),b===void 0&&(b=setInterval(nt,32))))}}}(),measureTextHeight=function(){let o;return function(e){let s=textHeights[e];if(s==null){if(WORKER_OFFSCREEN_CANVAS){const a=getFontParameters(e),d=measureText$1(e,"g");s=(isNaN(Number(a.lineHeight))?1.2:Number(a.lineHeight))*(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent)}else o||(o=document.createElement("div"),o.innerHTML="M",o.style.minHeight="0",o.style.maxHeight="none",o.style.height="auto",o.style.padding="0",o.style.border="none",o.style.position="absolute",o.style.display="block",o.style.left="-99999px"),o.style.font=e,document.body.appendChild(o),s=o.offsetHeight,document.body.removeChild(o);textHeights[e]=s}return s}}();function measureText$1(o,e){return measureContext$1||(measureContext$1=createCanvasContext2D(1,1)),o!=measureFont&&(measureContext$1.font=o,measureFont=measureContext$1.font),measureContext$1.measureText(e)}function measureTextWidth(o,e){return measureText$1(o,e).width}function measureAndCacheTextWidth(o,e,s){if(e in s)return s[e];const a=e.split(`
`).reduce((d,b)=>Math.max(d,measureTextWidth(o,b)),0);return s[e]=a,a}function getTextDimensions(o,e){const s=[],a=[],d=[];let b=0,_=0,_e=0,nt=0;for(let rt=0,ct=e.length;rt<=ct;rt+=2){const dt=e[rt];if(dt===`
`||rt===ct){b=Math.max(b,_),d.push(_),_=0,_e+=nt;continue}const pt=e[rt+1]||o.font,bt=measureTextWidth(pt,dt);s.push(bt),_+=bt;const xt=measureTextHeight(pt);a.push(xt),nt=Math.max(nt,xt)}return{width:b,height:_e,widths:s,heights:a,lineWidths:d}}function drawImageOrLabel(o,e,s,a,d,b,_,_e,nt,rt,ct){o.save(),s!==1&&(o.globalAlpha*=s),e&&o.transform.apply(o,e),a.contextInstructions?(o.translate(nt,rt),o.scale(ct[0],ct[1]),executeLabelInstructions(a,o)):ct[0]<0||ct[1]<0?(o.translate(nt,rt),o.scale(ct[0],ct[1]),o.drawImage(a,d,b,_,_e,0,0,_,_e)):o.drawImage(a,d,b,_,_e,nt,rt,_*ct[0],_e*ct[1]),o.restore()}function executeLabelInstructions(o,e){const s=o.contextInstructions;for(let a=0,d=s.length;a<d;a+=2)Array.isArray(s[a+1])?e[s[a]].apply(e,s[a+1]):e[s[a]]=s[a+1]}class RegularShape extends ImageStyle{constructor(e){const s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:s,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.render()}clone(){const e=this.getScale(),s=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return s.setOpacity(this.getOpacity()),s}getAnchor(){const e=this.size_,s=this.getDisplacement(),a=this.getScaleArray();return[e[0]/2-s[0]/a[0],e[1]/2+s[1]/a[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let s=this.canvases_[e];if(!s){const a=this.renderOptions_,d=createCanvasContext2D(a.size*e,a.size*e);this.draw_(a,d,e),s=d.canvas,this.canvases_[e]=s}return s}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return ImageState.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,s,a){if(s===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return s;let d=this.radius_,b=this.radius2_===void 0?d:this.radius2_;if(d<b){const Zt=d;d=b,b=Zt}const _=this.radius2_===void 0?this.points_:this.points_*2,_e=2*Math.PI/_,nt=b*Math.sin(_e),rt=Math.sqrt(b*b-nt*nt),ct=d-rt,dt=Math.sqrt(nt*nt+ct*ct),pt=dt/nt;if(e==="miter"&&pt<=a)return pt*s;const bt=s/2/pt,xt=s/2*(ct/dt),Tt=Math.sqrt((d+bt)*(d+bt)+xt*xt)-d;if(this.radius2_===void 0||e==="bevel")return Tt*2;const Rt=d*Math.sin(_e),Mt=Math.sqrt(d*d-Rt*Rt),Et=b-Mt,Xt=Math.sqrt(Rt*Rt+Et*Et)/Rt;if(Xt<=a){const Zt=Xt*s/2-b-d;return 2*Math.max(Tt,Zt)}return Tt*2}createRenderOptions(){let e=defaultLineCap,s=defaultLineJoin,a=0,d=null,b=0,_,_e=0;this.stroke_&&(_=asColorLike(this.stroke_.getColor()??defaultStrokeStyle),_e=this.stroke_.getWidth()??defaultLineWidth,d=this.stroke_.getLineDash(),b=this.stroke_.getLineDashOffset()??0,s=this.stroke_.getLineJoin()??defaultLineJoin,e=this.stroke_.getLineCap()??defaultLineCap,a=this.stroke_.getMiterLimit()??defaultMiterLimit);const nt=this.calculateLineJoinSize_(s,_e,a),rt=Math.max(this.radius_,this.radius2_||0),ct=Math.ceil(2*rt+nt);return{strokeStyle:_,strokeWidth:_e,size:ct,lineCap:e,lineDash:d,lineDashOffset:b,lineJoin:s,miterLimit:a}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,s,a){if(s.scale(a,a),s.translate(e.size/2,e.size/2),this.createPath_(s),this.fill_){let d=this.fill_.getColor();d===null&&(d=defaultFillStyle),s.fillStyle=asColorLike(d),s.fill()}e.strokeStyle&&(s.strokeStyle=e.strokeStyle,s.lineWidth=e.strokeWidth,e.lineDash&&(s.setLineDash(e.lineDash),s.lineDashOffset=e.lineDashOffset),s.lineCap=e.lineCap,s.lineJoin=e.lineJoin,s.miterLimit=e.miterLimit,s.stroke())}createHitDetectionCanvas_(e){let s;if(this.fill_){let a=this.fill_.getColor(),d=0;typeof a=="string"&&(a=asArray(a)),a===null?d=1:Array.isArray(a)&&(d=a.length===4?a[3]:1),d===0&&(s=createCanvasContext2D(e.size,e.size),this.drawHitDetectionCanvas_(e,s))}return s?s.canvas:this.getImage(1)}createPath_(e){let s=this.points_;const a=this.radius_;if(s===1/0)e.arc(0,0,a,0,2*Math.PI);else{const d=this.radius2_===void 0?a:this.radius2_;this.radius2_!==void 0&&(s*=2);const b=this.angle_-Math.PI/2,_=2*Math.PI/s;for(let _e=0;_e<s;_e++){const nt=b+_e*_,rt=_e%2===0?a:d;e.lineTo(rt*Math.cos(nt),rt*Math.sin(nt))}e.closePath()}}drawHitDetectionCanvas_(e,s){s.translate(e.size/2,e.size/2),this.createPath_(s),s.fillStyle=defaultFillStyle,s.fill(),e.strokeStyle&&(s.strokeStyle=e.strokeStyle,s.lineWidth=e.strokeWidth,e.lineDash&&(s.setLineDash(e.lineDash),s.lineDashOffset=e.lineDashOffset),s.lineJoin=e.lineJoin,s.miterLimit=e.miterLimit,s.stroke())}}class CircleStyle extends RegularShape{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),s=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return s.setOpacity(this.getOpacity()),s}setRadius(e){this.radius_=e,this.render()}}class Fill{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new Fill({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}class Stroke{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Stroke({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Style{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Style({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(s){return s.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function toFunction(o){let e;if(typeof o=="function")e=o;else{let s;Array.isArray(o)?s=o:(assert(typeof o.getZIndex=="function","Expected an `Style` or an array of `Style`"),s=[o]),e=function(){return s}}return e}let defaultStyles=null;function createDefaultStyle(o,e){if(!defaultStyles){const s=new Fill({color:"rgba(255,255,255,0.4)"}),a=new Stroke({color:"#3399CC",width:1.25});defaultStyles=[new Style({image:new CircleStyle({fill:s,stroke:a,radius:5}),fill:s,stroke:a})]}return defaultStyles}function createEditingStyle(){const o={},e=[255,255,255,1],s=[0,153,255,1],a=3;return o.Polygon=[new Style({fill:new Fill({color:[255,255,255,.5]})})],o.MultiPolygon=o.Polygon,o.LineString=[new Style({stroke:new Stroke({color:e,width:a+2})}),new Style({stroke:new Stroke({color:s,width:a})})],o.MultiLineString=o.LineString,o.Circle=o.Polygon.concat(o.LineString),o.Point=[new Style({image:new CircleStyle({radius:a*2,fill:new Fill({color:s}),stroke:new Stroke({color:e,width:a/2})}),zIndex:1/0})],o.MultiPoint=o.Point,o.GeometryCollection=o.Polygon.concat(o.LineString,o.Point),o}function defaultGeometryFunction(o){return o.getGeometry()}class IconImageCache{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const s in this.cache_){const a=this.cache_[s];!(e++&3)&&!a.hasListener()&&(delete this.cache_[s],--this.cacheSize_)}}}get(e,s,a){const d=getKey(e,s,a);return d in this.cache_?this.cache_[d]:null}set(e,s,a,d){const b=getKey(e,s,a);this.cache_[b]=d,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function getKey(o,e,s){const a=s?asString(s):"null";return e+":"+o+":"+a}const shared=new IconImageCache;let taintedTestContext=null;class IconImage extends Target{constructor(e,s,a,d,b){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=a,this.canvas_={},this.color_=b,this.imageState_=d===void 0?ImageState.IDLE:d,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=s,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],s=this.size_[1],a=createCanvasContext2D(e,s);a.fillRect(0,0,e,s),this.hitDetectionImage_=a.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ImageState.LOADED)return;const s=this.image_,a=document.createElement("canvas");a.width=Math.ceil(s.width*e),a.height=Math.ceil(s.height*e);const d=a.getContext("2d");d.scale(e,e),d.drawImage(s,0,0),d.globalCompositeOperation="multiply",d.fillStyle=asString(this.color_),d.fillRect(0,0,a.width/e,a.height/e),d.globalCompositeOperation="destination-in",d.drawImage(s,0,0),this.canvas_[e]=a}}function get$2(o,e,s,a,d){let b=e===void 0?void 0:shared.get(e,s,d);return b||(b=new IconImage(o,o instanceof HTMLImageElement?o.src||void 0:e,s,a,d),shared.set(e,s,d,b)),b}function calculateScale(o,e,s,a){return s!==void 0&&a!==void 0?[s/o,a/e]:s!==void 0?s/o:a!==void 0?a/e:1}class Icon extends ImageStyle{constructor(e){e=e||{};const s=e.opacity!==void 0?e.opacity:1,a=e.rotation!==void 0?e.rotation:0,d=e.scale!==void 0?e.scale:1,b=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:s,rotation:a,scale:d,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:b,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const _=e.img!==void 0?e.img:null;let _e=e.src;assert(!(_e!==void 0&&_),"`image` and `src` cannot be provided at the same time"),(_e===void 0||_e.length===0)&&_&&(_e=_.src||getUid(_)),assert(_e!==void 0&&_e.length>0,"A defined and non-empty `src` or `image` must be provided"),assert(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let nt;if(e.src!==void 0?nt=ImageState.IDLE:_!==void 0&&(_ instanceof HTMLImageElement?_.complete?nt=_.src?ImageState.LOADED:ImageState.IDLE:nt=ImageState.LOADING:nt=ImageState.LOADED),this.color_=e.color!==void 0?asArray(e.color):null,this.iconImage_=get$2(_,_e,this.crossOrigin_,nt,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let rt,ct;if(e.size)[rt,ct]=e.size;else{const dt=this.getImage(1);if(dt.width&&dt.height)rt=dt.width,ct=dt.height;else if(dt instanceof HTMLImageElement){this.initialOptions_=e;const pt=()=>{if(this.unlistenImageChange(pt),!this.initialOptions_)return;const bt=this.iconImage_.getSize();this.setScale(calculateScale(bt[0],bt[1],e.width,e.height))};this.listenImageChange(pt);return}}rt!==void 0&&this.setScale(calculateScale(rt,ct,e.width,e.height))}}clone(){let e,s,a;return this.initialOptions_?(s=this.initialOptions_.width,a=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:s,height:a,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const d=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!d)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=d[0]),this.anchorYUnits_=="fraction"&&(e[1]*=d[1])}if(this.anchorOrigin_!="top-left"){if(!d)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+d[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+d[1])}this.normalizedAnchor_=e}const s=this.getDisplacement(),a=this.getScaleArray();return[e[0]-s[0]/a[0],e[1]+s[1]/a[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const s=this.getSize(),a=this.iconImage_.getSize();if(!s||!a)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=a[0]-s[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=a[1]-s[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(EventType.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(EventType.CHANGE,e)}}const DEFAULT_FILL_COLOR="#333";let Text$1=class Qae{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=toSize(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fill({color:DEFAULT_FILL_COLOR}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new Qae({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}},numTypes=0;const NoneType=0,BooleanType$1=1<<numTypes++,NumberType$1=1<<numTypes++,StringType$1=1<<numTypes++,ColorType$1=1<<numTypes++,NumberArrayType=1<<numTypes++,AnyType=Math.pow(2,numTypes)-1,typeNames={[BooleanType$1]:"boolean",[NumberType$1]:"number",[StringType$1]:"string",[ColorType$1]:"color",[NumberArrayType]:"number[]"},namedTypes=Object.keys(typeNames).map(Number).sort(ascending);function typeName(o){const e=[];for(const s of namedTypes)includesType(o,s)&&e.push(typeNames[s]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function includesType(o,e){return(o&e)===e}function overlapsType(o,e){return!!(o&e)}function isType(o,e){return o===e}class LiteralExpression{constructor(e,s){this.type=e,this.value=s}}class CallExpression{constructor(e,s,...a){this.type=e,this.operator=s,this.args=a}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function getTypeFromHint(o){switch(o){case"string":return StringType$1;case"color":return ColorType$1;case"number":return NumberType$1;case"boolean":return BooleanType$1;case"number[]":return NumberArrayType;default:throw new Error(`Unrecognized type hint: ${o}`)}}function parse$2(o,e,s){switch(typeof o){case"boolean":return new LiteralExpression(BooleanType$1,o);case"number":return new LiteralExpression(NumberType$1,o);case"string":{let d=StringType$1;return isStringColor(o)&&(d|=ColorType$1),isType(d&s,NoneType)||(d&=s),new LiteralExpression(d,o)}}if(!Array.isArray(o))throw new Error("Expression must be an array or a primitive value");if(o.length===0)throw new Error("Empty expression");if(typeof o[0]=="string")return parseCallExpression(o,e,s);for(const d of o)if(typeof d!="number")throw new Error("Expected an array of numbers");let a=NumberArrayType;return(o.length===3||o.length===4)&&(a|=ColorType$1),s&&(a&=s),new LiteralExpression(a,o)}const Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},parsers={[Ops.Get]:createParser(([o,e])=>e!==void 0?getTypeFromHint(e.value):AnyType,withArgsCount(1,2),withGetArgs),[Ops.Var]:createParser(([o])=>o.type,withArgsCount(1,1),withVarArgs),[Ops.Id]:createParser(NumberType$1|StringType$1,withNoArgs,usesFeatureId),[Ops.Concat]:createParser(StringType$1,withArgsCount(2,1/0),parseArgsOfType(AnyType)),[Ops.GeometryType]:createParser(StringType$1,withNoArgs),[Ops.Resolution]:createParser(NumberType$1,withNoArgs),[Ops.Zoom]:createParser(NumberType$1,withNoArgs),[Ops.Time]:createParser(NumberType$1,withNoArgs),[Ops.Any]:createParser(BooleanType$1,withArgsCount(2,1/0),parseArgsOfType(BooleanType$1)),[Ops.All]:createParser(BooleanType$1,withArgsCount(2,1/0),parseArgsOfType(BooleanType$1)),[Ops.Not]:createParser(BooleanType$1,withArgsCount(1,1),parseArgsOfType(BooleanType$1)),[Ops.Equal]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.NotEqual]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThan]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThanOrEqualTo]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThan]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThanOrEqualTo]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.Multiply]:createParser(o=>{let e=NumberType$1|ColorType$1;for(let s=0;s<o.length;s++)e&=o[s].type;return e},withArgsCount(2,1/0),parseArgsOfType(NumberType$1|ColorType$1),narrowArgsType),[Ops.Divide]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Add]:createParser(NumberType$1,withArgsCount(2,1/0),parseArgsOfType(NumberType$1)),[Ops.Subtract]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Clamp]:createParser(NumberType$1,withArgsCount(3,3),parseArgsOfType(NumberType$1)),[Ops.Mod]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Pow]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Abs]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Floor]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Ceil]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Round]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Sin]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Cos]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Atan]:createParser(NumberType$1,withArgsCount(1,2),parseArgsOfType(NumberType$1)),[Ops.Sqrt]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Match]:createParser(o=>{let e=AnyType;for(let s=2;s<o.length;s+=2)e&=o[s].type;return e&=o[o.length-1].type,e},withArgsCount(4,1/0),withEvenArgs,parseMatchArgs),[Ops.Between]:createParser(BooleanType$1,withArgsCount(3,3),parseArgsOfType(NumberType$1)),[Ops.Interpolate]:createParser(o=>{let e=ColorType$1|NumberType$1;for(let s=3;s<o.length;s+=2)e&=o[s].type;return e},withArgsCount(6,1/0),withEvenArgs,parseInterpolateArgs),[Ops.Case]:createParser(o=>{let e=AnyType;for(let s=1;s<o.length;s+=2)e&=o[s].type;return e&=o[o.length-1].type,e},withArgsCount(3,1/0),withOddArgs,parseCaseArgs),[Ops.In]:createParser(BooleanType$1,withArgsCount(2,2),parseInArgs),[Ops.Number]:createParser(NumberType$1,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.String]:createParser(StringType$1,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.Array]:createParser(o=>o.length===3||o.length===4?NumberArrayType|ColorType$1:NumberArrayType,withArgsCount(1,1/0),parseArgsOfType(NumberType$1)),[Ops.Color]:createParser(ColorType$1,withArgsCount(3,4),parseArgsOfType(NumberType$1)),[Ops.Band]:createParser(NumberType$1,withArgsCount(1,3),parseArgsOfType(NumberType$1)),[Ops.Palette]:createParser(ColorType$1,withArgsCount(2,2),parsePaletteArgs)};function withGetArgs(o,e){const s=parse$2(o[1],e);if(!(s instanceof LiteralExpression))throw new Error("Expected a literal argument for get operation");if(typeof s.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(s.value),o.length===3){const a=parse$2(o[2],e);return[s,a]}return[s]}function withVarArgs(o,e,s,a){const d=o[1];if(typeof d!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(d),!("variables"in e.style)||e.style.variables[d]===void 0)return[new LiteralExpression(AnyType,d)];const b=e.style.variables[d],_=parse$2(b,e);if(_.value=d,a&&!overlapsType(a,_.type))throw new Error(`The variable ${d} has type ${typeName(_.type)} but the following type was expected: ${typeName(a)}`);return[_]}function usesFeatureId(o,e){e.featureId=!0}function withNoArgs(o,e){const s=o[0];if(o.length!==1)throw new Error(`Expected no arguments for ${s} operation`);return[]}function withArgsCount(o,e){return function(s,a){const d=s[0],b=s.length-1;if(o===e){if(b!==o){const _=o===1?"":"s";throw new Error(`Expected ${o} argument${_} for ${d}, got ${b}`)}}else if(b<o||b>e){const _=e===1/0?`${o} or more`:`${o} to ${e}`;throw new Error(`Expected ${_} arguments for ${d}, got ${b}`)}}}function parseArgsOfType(o){return function(e,s){const a=e[0],d=e.length-1,b=new Array(d);for(let _=0;_<d;++_){const _e=parse$2(e[_+1],s);if(!overlapsType(o,_e.type)){const nt=typeName(o),rt=typeName(_e.type);throw new Error(`Unexpected type for argument ${_} of ${a} operation, got ${nt} but expected ${rt}`)}_e.type&=o,b[_]=_e}return b}}function narrowArgsType(o,e,s){const a=o[0],d=o.length-1;let b=AnyType;for(let _e=0;_e<s.length;++_e)b&=s[_e].type;if(b===NoneType)throw new Error(`No common type could be found for arguments of ${a} operation`);const _=new Array(d);for(let _e=0;_e<d;++_e)_[_e]=parse$2(o[_e+1],e,b);return _}function withOddArgs(o,e){const s=o[0],a=o.length-1;if(a%2===0)throw new Error(`An odd amount of arguments was expected for operation ${s}, got ${JSON.stringify(a)} instead`)}function withEvenArgs(o,e){const s=o[0],a=o.length-1;if(a%2===1)throw new Error(`An even amount of arguments was expected for operation ${s}, got ${JSON.stringify(a)} instead`)}function parseMatchArgs(o,e,s,a){const d=o.length-1;let _=parse$2(o[1],e).type;const _e=parse$2(o[o.length-1],e);let nt=a!==void 0?a&_e.type:_e.type;const rt=new Array(d-2);for(let dt=0;dt<d-2;dt+=2){const pt=parse$2(o[dt+2],e),bt=parse$2(o[dt+3],e);_&=pt.type,nt&=bt.type,rt[dt]=pt,rt[dt+1]=bt}const ct=StringType$1|NumberType$1|BooleanType$1;if(!overlapsType(ct,_))throw new Error(`Expected an input of type ${typeName(ct)} for the interpolate operation, got ${typeName(_)} instead`);if(isType(nt,NoneType))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(o));for(let dt=0;dt<d-2;dt+=2){const pt=parse$2(o[dt+2],e,_),bt=parse$2(o[dt+3],e,nt);rt[dt]=pt,rt[dt+1]=bt}return[parse$2(o[1],e,_),...rt,parse$2(o[o.length-1],e,nt)]}function parseInterpolateArgs(o,e,s,a){const d=o[1];let b;switch(d[0]){case"linear":b=1;break;case"exponential":if(b=d[1],typeof b!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(b)} instead`);break;default:b=null}if(!b)throw new Error(`Invalid interpolation type: ${JSON.stringify(d)}`);b=parse$2(b,e);let _=parse$2(o[2],e);if(!overlapsType(NumberType$1,_.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${typeName(_.type)} instead`);_=parse$2(o[2],e,NumberType$1);const _e=new Array(o.length-3);for(let nt=0;nt<_e.length;nt+=2){let rt=parse$2(o[nt+3],e);if(!overlapsType(NumberType$1,rt.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${typeName(rt.type)} at position ${nt+2} instead`);let ct=parse$2(o[nt+4],e);if(!overlapsType(NumberType$1|ColorType$1,ct.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${typeName(ct.type)} at position ${nt+3} instead`);rt=parse$2(o[nt+3],e,NumberType$1),ct=parse$2(o[nt+4],e,NumberType$1|ColorType$1),_e[nt]=rt,_e[nt+1]=ct}return[b,_,..._e]}function parseCaseArgs(o,e,s,a){const d=parse$2(o[o.length-1],e);let b=a!==void 0?a&d.type:d.type;const _=new Array(o.length-1);for(let _e=0;_e<_.length-1;_e+=2){const nt=parse$2(o[_e+1],e),rt=parse$2(o[_e+2],e);if(!overlapsType(BooleanType$1,nt.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${typeName(nt.type)} at position ${_e} instead`);b&=rt.type,_[_e]=nt,_[_e+1]=rt}if(isType(b,NoneType))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(o));for(let _e=0;_e<_.length-1;_e+=2)_[_e+1]=parse$2(o[_e+2],e,b);return _[_.length-1]=parse$2(o[o.length-1],e,b),_}function parseInArgs(o,e){let s=o[2];if(!Array.isArray(s))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof s[0]=="string"){if(s[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(s[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');s=s[1]}let a=StringType$1|NumberType$1;const d=new Array(s.length);for(let _=0;_<d.length;_++){const _e=parse$2(s[_],e);a&=_e.type,d[_]=_e}if(isType(a,NoneType))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(o));return[parse$2(o[1],e,a),...d]}function parsePaletteArgs(o,e){const s=parse$2(o[1],e,NumberType$1);if(s.type!==NumberType$1)throw new Error(`The first argument of palette must be an number, got ${typeName(s.type)} instead`);const a=o[2];if(!Array.isArray(a))throw new Error("The second argument of palette must be an array");const d=new Array(a.length);for(let b=0;b<d.length;b++){const _=parse$2(a[b],e,ColorType$1);if(!(_ instanceof LiteralExpression))throw new Error(`The palette color at index ${b} must be a literal value`);if(!overlapsType(_.type,ColorType$1))throw new Error(`The palette color at index ${b} should be of type color, got ${typeName(_.type)} instead`);d[b]=_}return[s,...d]}function createParser(o,...e){return function(s,a,d){const b=s[0];let _=[];for(let nt=0;nt<e.length;nt++)_=e[nt](s,a,_,d)||_;let _e=typeof o=="function"?o(_):o;if(d!==void 0){if(!overlapsType(_e,d))throw new Error(`The following expression was expected to return ${typeName(d)}, but returns ${typeName(_e)} instead: ${JSON.stringify(s)}`);_e&=d}if(_e===NoneType)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(s)}`);return new CallExpression(_e,b,..._)}}function parseCallExpression(o,e,s){const a=o[0],d=parsers[a];if(!d)throw new Error(`Unknown operator: ${a}`);return d(o,e,s)}function newEvaluationContext(){return{variables:{},properties:{},resolution:NaN,featureId:null}}function buildExpression(o,e,s){const a=parse$2(o,s);if(!overlapsType(e,a.type)){const d=typeName(e),b=typeName(a.type);throw new Error(`Expected expression to be of type ${d}, got ${b}`)}return compileExpression(a)}function compileExpression(o,e){if(o instanceof LiteralExpression){if(o.type===ColorType$1&&typeof o.value=="string"){const a=fromString$1(o.value);return function(){return a}}return function(){return o.value}}const s=o.operator;switch(s){case Ops.Number:case Ops.String:return compileAssertionExpression(o);case Ops.Get:case Ops.Var:return compileAccessorExpression(o);case Ops.Id:return a=>a.featureId;case Ops.Concat:{const a=o.args.map(d=>compileExpression(d));return d=>"".concat(...a.map(b=>b(d).toString()))}case Ops.Resolution:return a=>a.resolution;case Ops.Any:case Ops.All:case Ops.Not:return compileLogicalExpression(o);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return compileComparisonExpression(o);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return compileNumericExpression(o);case Ops.Match:return compileMatchExpression(o);case Ops.Interpolate:return compileInterpolateExpression(o);default:throw new Error(`Unsupported operator ${s}`)}}function compileAssertionExpression(o,e){const s=o.operator,a=o.args.length,d=new Array(a);for(let b=0;b<a;++b)d[b]=compileExpression(o.args[b]);switch(s){case Ops.Number:case Ops.String:return b=>{for(let _=0;_<a;++_){const _e=d[_](b);if(typeof _e===s)return _e}throw new Error(`Expected one of the values to be a ${s}`)};default:throw new Error(`Unsupported assertion operator ${s}`)}}function compileAccessorExpression(o,e){const a=o.args[0].value;switch(o.operator){case Ops.Get:return d=>d.properties[a];case Ops.Var:return d=>d.variables[a];default:throw new Error(`Unsupported accessor operator ${o.operator}`)}}function compileComparisonExpression(o,e){const s=o.operator,a=compileExpression(o.args[0]),d=compileExpression(o.args[1]);switch(s){case Ops.Equal:return b=>a(b)===d(b);case Ops.NotEqual:return b=>a(b)!==d(b);case Ops.LessThan:return b=>a(b)<d(b);case Ops.LessThanOrEqualTo:return b=>a(b)<=d(b);case Ops.GreaterThan:return b=>a(b)>d(b);case Ops.GreaterThanOrEqualTo:return b=>a(b)>=d(b);default:throw new Error(`Unsupported comparison operator ${s}`)}}function compileLogicalExpression(o,e){const s=o.operator,a=o.args.length,d=new Array(a);for(let b=0;b<a;++b)d[b]=compileExpression(o.args[b]);switch(s){case Ops.Any:return b=>{for(let _=0;_<a;++_)if(d[_](b))return!0;return!1};case Ops.All:return b=>{for(let _=0;_<a;++_)if(!d[_](b))return!1;return!0};case Ops.Not:return b=>!d[0](b);default:throw new Error(`Unsupported logical operator ${s}`)}}function compileNumericExpression(o,e){const s=o.operator,a=o.args.length,d=new Array(a);for(let b=0;b<a;++b)d[b]=compileExpression(o.args[b]);switch(s){case Ops.Multiply:return b=>{let _=1;for(let _e=0;_e<a;++_e)_*=d[_e](b);return _};case Ops.Divide:return b=>d[0](b)/d[1](b);case Ops.Add:return b=>{let _=0;for(let _e=0;_e<a;++_e)_+=d[_e](b);return _};case Ops.Subtract:return b=>d[0](b)-d[1](b);case Ops.Clamp:return b=>{const _=d[0](b),_e=d[1](b);if(_<_e)return _e;const nt=d[2](b);return _>nt?nt:_};case Ops.Mod:return b=>d[0](b)%d[1](b);case Ops.Pow:return b=>Math.pow(d[0](b),d[1](b));case Ops.Abs:return b=>Math.abs(d[0](b));case Ops.Floor:return b=>Math.floor(d[0](b));case Ops.Ceil:return b=>Math.ceil(d[0](b));case Ops.Round:return b=>Math.round(d[0](b));case Ops.Sin:return b=>Math.sin(d[0](b));case Ops.Cos:return b=>Math.cos(d[0](b));case Ops.Atan:return a===2?b=>Math.atan2(d[0](b),d[1](b)):b=>Math.atan(d[0](b));case Ops.Sqrt:return b=>Math.sqrt(d[0](b));default:throw new Error(`Unsupported numeric operator ${s}`)}}function compileMatchExpression(o,e){const s=o.args.length,a=new Array(s);for(let d=0;d<s;++d)a[d]=compileExpression(o.args[d]);return d=>{const b=a[0](d);for(let _=1;_<s;_+=2)if(b===a[_](d))return a[_+1](d);return a[s-1](d)}}function compileInterpolateExpression(o,e){const s=o.args.length,a=new Array(s);for(let d=0;d<s;++d)a[d]=compileExpression(o.args[d]);return d=>{const b=a[0](d),_=a[1](d);let _e,nt;for(let rt=2;rt<s;rt+=2){const ct=a[rt](d);let dt=a[rt+1](d);const pt=Array.isArray(dt);if(pt&&(dt=withAlpha(dt)),ct>=_)return rt===2?dt:pt?interpolateColor(b,_,_e,nt,ct,dt):interpolateNumber(b,_,_e,nt,ct,dt);_e=ct,nt=dt}return nt}}function interpolateNumber(o,e,s,a,d,b){const _=d-s;if(_===0)return a;const _e=e-s,nt=o===1?_e/_:(Math.pow(o,_e)-1)/(Math.pow(o,_)-1);return a+nt*(b-a)}function interpolateColor(o,e,s,a,d,b){if(d-s===0)return a;const _e=rgbaToLcha(a),nt=rgbaToLcha(b);let rt=nt[2]-_e[2];rt>180?rt-=360:rt<-180&&(rt+=360);const ct=[interpolateNumber(o,e,s,_e[0],d,nt[0]),interpolateNumber(o,e,s,_e[1],d,nt[1]),_e[2]+interpolateNumber(o,e,s,0,d,rt),interpolateNumber(o,e,s,a[3],d,b[3])];return normalize$1(lchaToRgba(ct))}function always$1(o){return!0}function rulesToStyleFunction(o){const e=newParsingContext(),s=buildRuleSet(o,e),a=newEvaluationContext();return function(d,b){if(a.properties=d.getPropertiesInternal(),a.resolution=b,e.featureId){const _=d.getId();_!==void 0?a.featureId=_:a.featureId=null}return s(a)}}function flatStylesToStyleFunction(o){const e=newParsingContext(),s=o.length,a=new Array(s);for(let _=0;_<s;++_)a[_]=buildStyle(o[_],e);const d=newEvaluationContext(),b=new Array(s);return function(_,_e){if(d.properties=_.getPropertiesInternal(),d.resolution=_e,e.featureId){const rt=_.getId();rt!==void 0?d.featureId=rt:d.featureId=null}let nt=0;for(let rt=0;rt<s;++rt){const ct=a[rt](d);ct&&(b[nt]=ct,nt+=1)}return b.length=nt,b}}function buildRuleSet(o,e){const s=o.length,a=new Array(s);for(let d=0;d<s;++d){const b=o[d],_="filter"in b?buildExpression(b.filter,BooleanType$1,e):always$1;let _e;if(Array.isArray(b.style)){const nt=b.style.length;_e=new Array(nt);for(let rt=0;rt<nt;++rt)_e[rt]=buildStyle(b.style[rt],e)}else _e=[buildStyle(b.style,e)];a[d]={filter:_,styles:_e}}return function(d){const b=[];let _=!1;for(let _e=0;_e<s;++_e){const nt=a[_e].filter;if(nt(d)&&!(o[_e].else&&_)){_=!0;for(const rt of a[_e].styles){const ct=rt(d);ct&&b.push(ct)}}}return b}}function buildStyle(o,e){const s=buildFill(o,"",e),a=buildStroke(o,"",e),d=buildText(o,e),b=buildImage(o,e),_=numberEvaluator(o,"z-index",e);if(!s&&!a&&!d&&!b&&!isEmpty$1(o))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(o));const _e=new Style;return function(nt){let rt=!0;if(s){const ct=s(nt);ct&&(rt=!1),_e.setFill(ct)}if(a){const ct=a(nt);ct&&(rt=!1),_e.setStroke(ct)}if(d){const ct=d(nt);ct&&(rt=!1),_e.setText(ct)}if(b){const ct=b(nt);ct&&(rt=!1),_e.setImage(ct)}return _&&_e.setZIndex(_(nt)),rt?null:_e}}function buildFill(o,e,s){const a=colorLikeEvaluator(o,e+"fill-color",s);if(!a)return null;const d=new Fill;return function(b){const _=a(b);return _==="none"?null:(d.setColor(_),d)}}function buildStroke(o,e,s){const a=numberEvaluator(o,e+"stroke-width",s),d=colorLikeEvaluator(o,e+"stroke-color",s);if(!a&&!d)return null;const b=stringEvaluator(o,e+"stroke-line-cap",s),_=stringEvaluator(o,e+"stroke-line-join",s),_e=numberArrayEvaluator(o,e+"stroke-line-dash",s),nt=numberEvaluator(o,e+"stroke-line-dash-offset",s),rt=numberEvaluator(o,e+"stroke-miter-limit",s),ct=new Stroke;return function(dt){if(d){const pt=d(dt);if(pt==="none")return null;ct.setColor(pt)}if(a&&ct.setWidth(a(dt)),b){const pt=b(dt);if(pt!=="butt"&&pt!=="round"&&pt!=="square")throw new Error("Expected butt, round, or square line cap");ct.setLineCap(pt)}if(_){const pt=_(dt);if(pt!=="bevel"&&pt!=="round"&&pt!=="miter")throw new Error("Expected bevel, round, or miter line join");ct.setLineJoin(pt)}return _e&&ct.setLineDash(_e(dt)),nt&&ct.setLineDashOffset(nt(dt)),rt&&ct.setMiterLimit(rt(dt)),ct}}function buildText(o,e){const s="text-",a=stringEvaluator(o,s+"value",e);if(!a)return null;const d=buildFill(o,s,e),b=buildFill(o,s+"background-",e),_=buildStroke(o,s,e),_e=buildStroke(o,s+"background-",e),nt=stringEvaluator(o,s+"font",e),rt=numberEvaluator(o,s+"max-angle",e),ct=numberEvaluator(o,s+"offset-x",e),dt=numberEvaluator(o,s+"offset-y",e),pt=booleanEvaluator(o,s+"overflow",e),bt=stringEvaluator(o,s+"placement",e),xt=numberEvaluator(o,s+"repeat",e),wt=sizeLikeEvaluator(o,s+"scale",e),Tt=booleanEvaluator(o,s+"rotate-with-view",e),Rt=numberEvaluator(o,s+"rotation",e),Mt=stringEvaluator(o,s+"align",e),Et=stringEvaluator(o,s+"justify",e),$t=stringEvaluator(o,s+"baseline",e),Xt=numberArrayEvaluator(o,s+"padding",e),Zt=new Text$1({});return function(Nt){if(Zt.setText(a(Nt)),d&&Zt.setFill(d(Nt)),b&&Zt.setBackgroundFill(b(Nt)),_&&Zt.setStroke(_(Nt)),_e&&Zt.setBackgroundStroke(_e(Nt)),nt&&Zt.setFont(nt(Nt)),rt&&Zt.setMaxAngle(rt(Nt)),ct&&Zt.setOffsetX(ct(Nt)),dt&&Zt.setOffsetY(dt(Nt)),pt&&Zt.setOverflow(pt(Nt)),bt){const Jt=bt(Nt);if(Jt!=="point"&&Jt!=="line")throw new Error("Expected point or line for text-placement");Zt.setPlacement(Jt)}if(xt&&Zt.setRepeat(xt(Nt)),wt&&Zt.setScale(wt(Nt)),Tt&&Zt.setRotateWithView(Tt(Nt)),Rt&&Zt.setRotation(Rt(Nt)),Mt){const Jt=Mt(Nt);if(Jt!=="left"&&Jt!=="center"&&Jt!=="right"&&Jt!=="end"&&Jt!=="start")throw new Error("Expected left, right, center, start, or end for text-align");Zt.setTextAlign(Jt)}if(Et){const Jt=Et(Nt);if(Jt!=="left"&&Jt!=="right"&&Jt!=="center")throw new Error("Expected left, right, or center for text-justify");Zt.setJustify(Jt)}if($t){const Jt=$t(Nt);if(Jt!=="bottom"&&Jt!=="top"&&Jt!=="middle"&&Jt!=="alphabetic"&&Jt!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");Zt.setTextBaseline(Jt)}return Xt&&Zt.setPadding(Xt(Nt)),Zt}}function buildImage(o,e){return"icon-src"in o?buildIcon(o,e):"shape-points"in o?buildShape(o,e):"circle-radius"in o?buildCircle(o,e):null}function buildIcon(o,e){const s="icon-",a=s+"src",d=requireString(o[a],a),b=coordinateEvaluator(o,s+"anchor",e),_=sizeLikeEvaluator(o,s+"scale",e),_e=numberEvaluator(o,s+"opacity",e),nt=coordinateEvaluator(o,s+"displacement",e),rt=numberEvaluator(o,s+"rotation",e),ct=booleanEvaluator(o,s+"rotate-with-view",e),dt=optionalIconOrigin(o,s+"anchor-origin"),pt=optionalIconAnchorUnits(o,s+"anchor-x-units"),bt=optionalIconAnchorUnits(o,s+"anchor-y-units"),xt=optionalColorLike(o,s+"color"),wt=optionalString(o,s+"cross-origin"),Tt=optionalNumberArray(o,s+"offset"),Rt=optionalIconOrigin(o,s+"offset-origin"),Mt=optionalNumber(o,s+"width"),Et=optionalNumber(o,s+"height"),$t=optionalSize(o,s+"size"),Xt=optionalDeclutterMode(o,s+"declutter"),Zt=new Icon({src:d,anchorOrigin:dt,anchorXUnits:pt,anchorYUnits:bt,color:xt,crossOrigin:wt,offset:Tt,offsetOrigin:Rt,height:Et,width:Mt,size:$t,declutterMode:Xt});return function(Nt){return _e&&Zt.setOpacity(_e(Nt)),nt&&Zt.setDisplacement(nt(Nt)),rt&&Zt.setRotation(rt(Nt)),ct&&Zt.setRotateWithView(ct(Nt)),_&&Zt.setScale(_(Nt)),b&&Zt.setAnchor(b(Nt)),Zt}}function buildShape(o,e){const s="shape-",a=s+"points",d=requireNumber(o[a],a),b=buildFill(o,s,e),_=buildStroke(o,s,e),_e=sizeLikeEvaluator(o,s+"scale",e),nt=coordinateEvaluator(o,s+"displacement",e),rt=numberEvaluator(o,s+"rotation",e),ct=booleanEvaluator(o,s+"rotate-with-view",e),dt=optionalNumber(o,s+"radius"),pt=optionalNumber(o,s+"radius1"),bt=optionalNumber(o,s+"radius2"),xt=optionalNumber(o,s+"angle"),wt=optionalDeclutterMode(o,s+"declutter-mode"),Tt=new RegularShape({points:d,radius:dt,radius1:pt,radius2:bt,angle:xt,declutterMode:wt});return function(Rt){return b&&Tt.setFill(b(Rt)),_&&Tt.setStroke(_(Rt)),nt&&Tt.setDisplacement(nt(Rt)),rt&&Tt.setRotation(rt(Rt)),ct&&Tt.setRotateWithView(ct(Rt)),_e&&Tt.setScale(_e(Rt)),Tt}}function buildCircle(o,e){const s="circle-",a=buildFill(o,s,e),d=buildStroke(o,s,e),b=numberEvaluator(o,s+"radius",e),_=sizeLikeEvaluator(o,s+"scale",e),_e=coordinateEvaluator(o,s+"displacement",e),nt=numberEvaluator(o,s+"rotation",e),rt=booleanEvaluator(o,s+"rotate-with-view",e),ct=optionalDeclutterMode(o,s+"declutter-mode"),dt=new CircleStyle({radius:5,declutterMode:ct});return function(pt){return b&&dt.setRadius(b(pt)),a&&dt.setFill(a(pt)),d&&dt.setStroke(d(pt)),_e&&dt.setDisplacement(_e(pt)),nt&&dt.setRotation(nt(pt)),rt&&dt.setRotateWithView(rt(pt)),_&&dt.setScale(_(pt)),dt}}function numberEvaluator(o,e,s){if(!(e in o))return;const a=buildExpression(o[e],NumberType$1,s);return function(d){return requireNumber(a(d),e)}}function stringEvaluator(o,e,s){if(!(e in o))return null;const a=buildExpression(o[e],StringType$1,s);return function(d){return requireString(a(d),e)}}function booleanEvaluator(o,e,s){if(!(e in o))return null;const a=buildExpression(o[e],BooleanType$1,s);return function(d){const b=a(d);if(typeof b!="boolean")throw new Error(`Expected a boolean for ${e}`);return b}}function colorLikeEvaluator(o,e,s){if(!(e in o))return null;const a=buildExpression(o[e],ColorType$1|StringType$1,s);return function(d){return requireColorLike(a(d),e)}}function numberArrayEvaluator(o,e,s){if(!(e in o))return null;const a=buildExpression(o[e],NumberArrayType,s);return function(d){return requireNumberArray(a(d),e)}}function coordinateEvaluator(o,e,s){if(!(e in o))return null;const a=buildExpression(o[e],NumberArrayType,s);return function(d){const b=requireNumberArray(a(d),e);if(b.length!==2)throw new Error(`Expected two numbers for ${e}`);return b}}function sizeLikeEvaluator(o,e,s){if(!(e in o))return null;const a=buildExpression(o[e],NumberArrayType|NumberType$1,s);return function(d){return requireSizeLike(a(d),e)}}function optionalNumber(o,e){const s=o[e];if(s!==void 0){if(typeof s!="number")throw new Error(`Expected a number for ${e}`);return s}}function optionalSize(o,e){const s=o[e];if(s!==void 0){if(typeof s=="number")return toSize(s);if(!Array.isArray(s))throw new Error(`Expected a number or size array for ${e}`);if(s.length!==2||typeof s[0]!="number"||typeof s[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return s}}function optionalString(o,e){const s=o[e];if(s!==void 0){if(typeof s!="string")throw new Error(`Expected a string for ${e}`);return s}}function optionalIconOrigin(o,e){const s=o[e];if(s!==void 0){if(s!=="bottom-left"&&s!=="bottom-right"&&s!=="top-left"&&s!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return s}}function optionalIconAnchorUnits(o,e){const s=o[e];if(s!==void 0){if(s!=="pixels"&&s!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return s}}function optionalNumberArray(o,e){const s=o[e];if(s!==void 0)return requireNumberArray(s,e)}function optionalDeclutterMode(o,e){const s=o[e];if(s!==void 0){if(typeof s!="string")throw new Error(`Expected a string for ${e}`);if(s!=="declutter"&&s!=="obstacle"&&s!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return s}}function optionalColorLike(o,e){const s=o[e];if(s!==void 0)return requireColorLike(s,e)}function requireNumberArray(o,e){if(!Array.isArray(o))throw new Error(`Expected an array for ${e}`);const s=o.length;for(let a=0;a<s;++a)if(typeof o[a]!="number")throw new Error(`Expected an array of numbers for ${e}`);return o}function requireString(o,e){if(typeof o!="string")throw new Error(`Expected a string for ${e}`);return o}function requireNumber(o,e){if(typeof o!="number")throw new Error(`Expected a number for ${e}`);return o}function requireColorLike(o,e){if(typeof o=="string")return o;const s=requireNumberArray(o,e),a=s.length;if(a<3||a>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return s}function requireSizeLike(o,e){if(typeof o=="number")return o;const s=requireNumberArray(o,e);if(s.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return s}const Property$3={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer{constructor(e){e=e||{};const s=Object.assign({},e);delete s.style,delete s.renderBuffer,delete s.updateWhileAnimating,delete s.updateWhileInteracting,super(s),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property$3.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new RBush$1(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(Property$3.RENDER_ORDER,e)}setStyle(e){this.style_=toStyleLike(e),this.styleFunction_=e===null?void 0:toFunction(this.style_),this.changed()}}function toStyleLike(o){if(o===void 0)return createDefaultStyle;if(!o)return null;if(typeof o=="function"||o instanceof Style)return o;if(!Array.isArray(o))return flatStylesToStyleFunction([o]);if(o.length===0)return[];const e=o.length,s=o[0];if(s instanceof Style){const d=new Array(e);for(let b=0;b<e;++b){const _=o[b];if(!(_ instanceof Style))throw new Error("Expected a list of style instances");d[b]=_}return d}if("style"in s){const d=new Array(e);for(let b=0;b<e;++b){const _=o[b];if(!("style"in _))throw new Error("Expected a list of rules with a style property");d[b]=_}return rulesToStyleFunction(d)}return flatStylesToStyleFunction(o)}const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];class VectorContext{drawCustom(e,s,a,d){}drawGeometry(e){}setStyle(e){}drawCircle(e,s){}drawFeature(e,s){}drawGeometryCollection(e,s){}drawLineString(e,s){}drawMultiLineString(e,s){}drawMultiPoint(e,s){}drawMultiPolygon(e,s){}drawPoint(e,s){}drawPolygon(e,s){}drawText(e,s){}setFillStrokeStyle(e,s){}setImageStyle(e,s){}setTextStyle(e,s){}}class CanvasBuilder extends VectorContext{constructor(e,s,a,d){super(),this.tolerance=e,this.maxExtent=s,this.pixelRatio=d,this.maxLineWidth=0,this.resolution=a,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const s=this.pixelRatio;return s==1?e:e.map(function(a){return a*s})}appendFlatPointCoordinates(e,s){const a=this.getBufferedMaxExtent(),d=this.tmpCoordinate_,b=this.coordinates;let _=b.length;for(let _e=0,nt=e.length;_e<nt;_e+=s)d[0]=e[_e],d[1]=e[_e+1],containsCoordinate(a,d)&&(b[_++]=d[0],b[_++]=d[1]);return _}appendFlatLineCoordinates(e,s,a,d,b,_){const _e=this.coordinates;let nt=_e.length;const rt=this.getBufferedMaxExtent();_&&(s+=d);let ct=e[s],dt=e[s+1];const pt=this.tmpCoordinate_;let bt=!0,xt,wt,Tt;for(xt=s+d;xt<a;xt+=d)pt[0]=e[xt],pt[1]=e[xt+1],Tt=coordinateRelationship(rt,pt),Tt!==wt?(bt&&(_e[nt++]=ct,_e[nt++]=dt,bt=!1),_e[nt++]=pt[0],_e[nt++]=pt[1]):Tt===Relationship.INTERSECTING?(_e[nt++]=pt[0],_e[nt++]=pt[1],bt=!1):bt=!0,ct=pt[0],dt=pt[1],wt=Tt;return(b&&bt||xt===s+d)&&(_e[nt++]=ct,_e[nt++]=dt),nt}drawCustomCoordinates_(e,s,a,d,b){for(let _=0,_e=a.length;_<_e;++_){const nt=a[_],rt=this.appendFlatLineCoordinates(e,s,nt,d,!1,!1);b.push(rt),s=nt}return s}drawCustom(e,s,a,d){this.beginGeometry(e,s);const b=e.getType(),_=e.getStride(),_e=this.coordinates.length;let nt,rt,ct,dt,pt;switch(b){case"MultiPolygon":nt=e.getOrientedFlatCoordinates(),dt=[];const bt=e.getEndss();pt=0;for(let xt=0,wt=bt.length;xt<wt;++xt){const Tt=[];pt=this.drawCustomCoordinates_(nt,pt,bt[xt],_,Tt),dt.push(Tt)}this.instructions.push([Instruction.CUSTOM,_e,dt,e,a,inflateMultiCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,_e,dt,e,d||a,inflateMultiCoordinatesArray]);break;case"Polygon":case"MultiLineString":ct=[],nt=b=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),pt=this.drawCustomCoordinates_(nt,0,e.getEnds(),_,ct),this.instructions.push([Instruction.CUSTOM,_e,ct,e,a,inflateCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,_e,ct,e,d||a,inflateCoordinatesArray]);break;case"LineString":case"Circle":nt=e.getFlatCoordinates(),rt=this.appendFlatLineCoordinates(nt,0,nt.length,_,!1,!1),this.instructions.push([Instruction.CUSTOM,_e,rt,e,a,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,_e,rt,e,d||a,inflateCoordinates]);break;case"MultiPoint":nt=e.getFlatCoordinates(),rt=this.appendFlatPointCoordinates(nt,_),rt>_e&&(this.instructions.push([Instruction.CUSTOM,_e,rt,e,a,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,_e,rt,e,d||a,inflateCoordinates]));break;case"Point":nt=e.getFlatCoordinates(),this.coordinates.push(nt[0],nt[1]),rt=this.coordinates.length,this.instructions.push([Instruction.CUSTOM,_e,rt,e,a]),this.hitDetectionInstructions.push([Instruction.CUSTOM,_e,rt,e,d||a]);break}this.endGeometry(s)}beginGeometry(e,s){this.beginGeometryInstruction1_=[Instruction.BEGIN_GEOMETRY,s,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Instruction.BEGIN_GEOMETRY,s,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let s;const a=e.length;let d,b,_=-1;for(s=0;s<a;++s)d=e[s],b=d[0],b==Instruction.END_GEOMETRY?_=s:b==Instruction.BEGIN_GEOMETRY&&(d[2]=s,reverseSubArray(this.hitDetectionInstructions,_,s),_=-1)}setFillStrokeStyle(e,s){const a=this.state;if(e){const d=e.getColor();a.fillStyle=asColorLike(d||defaultFillStyle)}else a.fillStyle=void 0;if(s){const d=s.getColor();a.strokeStyle=asColorLike(d||defaultStrokeStyle);const b=s.getLineCap();a.lineCap=b!==void 0?b:defaultLineCap;const _=s.getLineDash();a.lineDash=_?_.slice():defaultLineDash;const _e=s.getLineDashOffset();a.lineDashOffset=_e||defaultLineDashOffset;const nt=s.getLineJoin();a.lineJoin=nt!==void 0?nt:defaultLineJoin;const rt=s.getWidth();a.lineWidth=rt!==void 0?rt:defaultLineWidth;const ct=s.getMiterLimit();a.miterLimit=ct!==void 0?ct:defaultMiterLimit,a.lineWidth>this.maxLineWidth&&(this.maxLineWidth=a.lineWidth,this.bufferedMaxExtent_=null)}else a.strokeStyle=void 0,a.lineCap=void 0,a.lineDash=null,a.lineDashOffset=void 0,a.lineJoin=void 0,a.lineWidth=void 0,a.miterLimit=void 0}createFill(e){const s=e.fillStyle,a=[Instruction.SET_FILL_STYLE,s];return typeof s!="string"&&a.push(!0),a}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,s){const a=e.fillStyle;(typeof a!="string"||e.currentFillStyle!=a)&&(a!==void 0&&this.instructions.push(s.call(this,e)),e.currentFillStyle=a)}updateStrokeStyle(e,s){const a=e.strokeStyle,d=e.lineCap,b=e.lineDash,_=e.lineDashOffset,_e=e.lineJoin,nt=e.lineWidth,rt=e.miterLimit;(e.currentStrokeStyle!=a||e.currentLineCap!=d||b!=e.currentLineDash&&!equals$2(e.currentLineDash,b)||e.currentLineDashOffset!=_||e.currentLineJoin!=_e||e.currentLineWidth!=nt||e.currentMiterLimit!=rt)&&(a!==void 0&&s.call(this,e),e.currentStrokeStyle=a,e.currentLineCap=d,e.currentLineDash=b,e.currentLineDashOffset=_,e.currentLineJoin=_e,e.currentLineWidth=nt,e.currentMiterLimit=rt)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const s=[Instruction.END_GEOMETRY,e];this.instructions.push(s),this.hitDetectionInstructions.push(s)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone$1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class CanvasImageBuilder extends CanvasBuilder{constructor(e,s,a,d){super(e,s,a,d),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,s){if(!this.image_)return;this.beginGeometry(e,s);const a=e.getFlatCoordinates(),d=e.getStride(),b=this.coordinates.length,_=this.appendFlatPointCoordinates(a,d);this.instructions.push([Instruction.DRAW_IMAGE,b,_,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,b,_,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(s)}drawMultiPoint(e,s){if(!this.image_)return;this.beginGeometry(e,s);const a=e.getFlatCoordinates(),d=e.getStride(),b=this.coordinates.length,_=this.appendFlatPointCoordinates(a,d);this.instructions.push([Instruction.DRAW_IMAGE,b,_,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,b,_,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(s)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,s){const a=e.getAnchor(),d=e.getSize(),b=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=a[0],this.anchorY_=a[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=d[1],this.opacity_=e.getOpacity(),this.originX_=b[0],this.originY_=b[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=d[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=s}}class CanvasLineStringBuilder extends CanvasBuilder{constructor(e,s,a,d){super(e,s,a,d)}drawFlatCoordinates_(e,s,a,d){const b=this.coordinates.length,_=this.appendFlatLineCoordinates(e,s,a,d,!1,!1),_e=[Instruction.MOVE_TO_LINE_TO,b,_];return this.instructions.push(_e),this.hitDetectionInstructions.push(_e),a}drawLineString(e,s){const a=this.state,d=a.strokeStyle,b=a.lineWidth;if(d===void 0||b===void 0)return;this.updateStrokeStyle(a,this.applyStroke),this.beginGeometry(e,s),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const _=e.getFlatCoordinates(),_e=e.getStride();this.drawFlatCoordinates_(_,0,_.length,_e),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(s)}drawMultiLineString(e,s){const a=this.state,d=a.strokeStyle,b=a.lineWidth;if(d===void 0||b===void 0)return;this.updateStrokeStyle(a,this.applyStroke),this.beginGeometry(e,s),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const _=e.getEnds(),_e=e.getFlatCoordinates(),nt=e.getStride();let rt=0;for(let ct=0,dt=_.length;ct<dt;++ct)rt=this.drawFlatCoordinates_(_e,rt,_[ct],nt);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(s)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(beginPathInstruction)}}class CanvasPolygonBuilder extends CanvasBuilder{constructor(e,s,a,d){super(e,s,a,d)}drawFlatCoordinatess_(e,s,a,d){const b=this.state,_=b.fillStyle!==void 0,_e=b.strokeStyle!==void 0,nt=a.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let rt=0;rt<nt;++rt){const ct=a[rt],dt=this.coordinates.length,pt=this.appendFlatLineCoordinates(e,s,ct,d,!0,!_e),bt=[Instruction.MOVE_TO_LINE_TO,dt,pt];this.instructions.push(bt),this.hitDetectionInstructions.push(bt),_e&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),s=ct}return _&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),_e&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),s}drawCircle(e,s){const a=this.state,d=a.fillStyle,b=a.strokeStyle;if(d===void 0&&b===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,s),a.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),a.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,defaultLineDash,defaultLineDashOffset]);const _=e.getFlatCoordinates(),_e=e.getStride(),nt=this.coordinates.length;this.appendFlatLineCoordinates(_,0,_.length,_e,!1,!1);const rt=[Instruction.CIRCLE,nt];this.instructions.push(beginPathInstruction,rt),this.hitDetectionInstructions.push(beginPathInstruction,rt),a.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),a.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(s)}drawPolygon(e,s){const a=this.state,d=a.fillStyle,b=a.strokeStyle;if(d===void 0&&b===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,s),a.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),a.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,defaultLineDash,defaultLineDashOffset]);const _=e.getEnds(),_e=e.getOrientedFlatCoordinates(),nt=e.getStride();this.drawFlatCoordinatess_(_e,0,_,nt),this.endGeometry(s)}drawMultiPolygon(e,s){const a=this.state,d=a.fillStyle,b=a.strokeStyle;if(d===void 0&&b===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,s),a.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),a.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,defaultLineDash,defaultLineDashOffset]);const _=e.getEndss(),_e=e.getOrientedFlatCoordinates(),nt=e.getStride();let rt=0;for(let ct=0,dt=_.length;ct<dt;++ct)rt=this.drawFlatCoordinatess_(_e,rt,_[ct],nt);this.endGeometry(s)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const s=this.coordinates;for(let a=0,d=s.length;a<d;++a)s[a]=snap(s[a],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function lineChunk(o,e,s,a,d){const b=[];let _=s,_e=0,nt=e.slice(s,2);for(;_e<o&&_+d<a;){const[rt,ct]=nt.slice(-2),dt=e[_+d],pt=e[_+d+1],bt=Math.sqrt((dt-rt)*(dt-rt)+(pt-ct)*(pt-ct));if(_e+=bt,_e>=o){const xt=(o-_e+bt)/bt,wt=lerp(rt,dt,xt),Tt=lerp(ct,pt,xt);nt.push(wt,Tt),b.push(nt),nt=[wt,Tt],_e==o&&(_+=d),_e=0}else if(_e<o)nt.push(e[_+d],e[_+d+1]),_+=d;else{const xt=bt-_e,wt=lerp(rt,dt,xt/bt),Tt=lerp(ct,pt,xt/bt);nt.push(wt,Tt),b.push(nt),nt=[wt,Tt],_e=0,_+=d}}return _e>0&&b.push(nt),b}function matchingChunk(o,e,s,a,d){let b=s,_=s,_e=0,nt=0,rt=s,ct,dt,pt,bt,xt,wt,Tt,Rt,Mt,Et;for(dt=s;dt<a;dt+=d){const $t=e[dt],Xt=e[dt+1];xt!==void 0&&(Mt=$t-xt,Et=Xt-wt,bt=Math.sqrt(Mt*Mt+Et*Et),Tt!==void 0&&(nt+=pt,ct=Math.acos((Tt*Mt+Rt*Et)/(pt*bt)),ct>o&&(nt>_e&&(_e=nt,b=rt,_=dt),nt=0,rt=dt-d)),pt=bt,Tt=Mt,Rt=Et),xt=$t,wt=Xt}return nt+=bt,nt>_e?[rt,dt]:[b,_]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends CanvasBuilder{constructor(e,s,a,d){super(e,s,a,d),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[defaultFillStyle]={fillStyle:defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,s){const a=this.textFillState_,d=this.textStrokeState_,b=this.textState_;if(this.text_===""||!b||!a&&!d)return;const _=this.coordinates;let _e=_.length;const nt=e.getType();let rt=null,ct=e.getStride();if(b.placement==="line"&&(nt=="LineString"||nt=="MultiLineString"||nt=="Polygon"||nt=="MultiPolygon")){if(!intersects$1(this.getBufferedMaxExtent(),e.getExtent()))return;let dt;if(rt=e.getFlatCoordinates(),nt=="LineString")dt=[rt.length];else if(nt=="MultiLineString")dt=e.getEnds();else if(nt=="Polygon")dt=e.getEnds().slice(0,1);else if(nt=="MultiPolygon"){const wt=e.getEndss();dt=[];for(let Tt=0,Rt=wt.length;Tt<Rt;++Tt)dt.push(wt[Tt][0])}this.beginGeometry(e,s);const pt=b.repeat,bt=pt?void 0:b.textAlign;let xt=0;for(let wt=0,Tt=dt.length;wt<Tt;++wt){let Rt;pt?Rt=lineChunk(pt*this.resolution,rt,xt,dt[wt],ct):Rt=[rt.slice(xt,dt[wt])];for(let Mt=0,Et=Rt.length;Mt<Et;++Mt){const $t=Rt[Mt];let Xt=0,Zt=$t.length;if(bt==null){const Jt=matchingChunk(b.maxAngle,$t,0,$t.length,2);Xt=Jt[0],Zt=Jt[1]}for(let Jt=Xt;Jt<Zt;Jt+=ct)_.push($t[Jt],$t[Jt+1]);const Nt=_.length;xt=dt[wt],this.drawChars_(_e,Nt),_e=Nt}}this.endGeometry(s)}else{let dt=b.overflow?null:[];switch(nt){case"Point":case"MultiPoint":rt=e.getFlatCoordinates();break;case"LineString":rt=e.getFlatMidpoint();break;case"Circle":rt=e.getCenter();break;case"MultiLineString":rt=e.getFlatMidpoints(),ct=2;break;case"Polygon":rt=e.getFlatInteriorPoint(),b.overflow||dt.push(rt[2]/this.resolution),ct=3;break;case"MultiPolygon":const Rt=e.getFlatInteriorPoints();rt=[];for(let Mt=0,Et=Rt.length;Mt<Et;Mt+=3)b.overflow||dt.push(Rt[Mt+2]/this.resolution),rt.push(Rt[Mt],Rt[Mt+1]);if(rt.length===0)return;ct=2;break}const pt=this.appendFlatPointCoordinates(rt,ct);if(pt===_e)return;if(dt&&(pt-_e)/2!==rt.length/ct){let Rt=_e/2;dt=dt.filter((Mt,Et)=>{const $t=_[(Rt+Et)*2]===rt[Et*ct]&&_[(Rt+Et)*2+1]===rt[Et*ct+1];return $t||--Rt,$t})}this.saveTextStates_(),(b.backgroundFill||b.backgroundStroke)&&(this.setFillStrokeStyle(b.backgroundFill,b.backgroundStroke),b.backgroundFill&&this.updateFillStyle(this.state,this.createFill),b.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,s);let bt=b.padding;if(bt!=defaultPadding&&(b.scale[0]<0||b.scale[1]<0)){let Rt=b.padding[0],Mt=b.padding[1],Et=b.padding[2],$t=b.padding[3];b.scale[0]<0&&(Mt=-Mt,$t=-$t),b.scale[1]<0&&(Rt=-Rt,Et=-Et),bt=[Rt,Mt,Et,$t]}const xt=this.pixelRatio;this.instructions.push([Instruction.DRAW_IMAGE,_e,pt,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,bt==defaultPadding?defaultPadding:bt.map(function(Rt){return Rt*xt}),!!b.backgroundFill,!!b.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,dt]);const wt=1/xt,Tt=this.state.fillStyle;b.backgroundFill&&(this.state.fillStyle=defaultFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,_e,pt,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[wt,wt],NaN,void 0,this.declutterImageWithText_,bt,!!b.backgroundFill,!!b.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,dt]),b.backgroundFill&&(this.state.fillStyle=Tt,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(s)}}saveTextStates_(){const e=this.textStrokeState_,s=this.textState_,a=this.textFillState_,d=this.strokeKey_;e&&(d in this.strokeStates||(this.strokeStates[d]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const b=this.textKey_;b in this.textStates||(this.textStates[b]={font:s.font,textAlign:s.textAlign||defaultTextAlign,justify:s.justify,textBaseline:s.textBaseline||defaultTextBaseline,scale:s.scale});const _=this.fillKey_;a&&(_ in this.fillStates||(this.fillStates[_]={fillStyle:a.fillStyle}))}drawChars_(e,s){const a=this.textStrokeState_,d=this.textState_,b=this.strokeKey_,_=this.textKey_,_e=this.fillKey_;this.saveTextStates_();const nt=this.pixelRatio,rt=TEXT_ALIGN[d.textBaseline],ct=this.textOffsetY_*nt,dt=this.text_,pt=a?a.lineWidth*Math.abs(d.scale[0])/2:0;this.instructions.push([Instruction.DRAW_CHARS,e,s,rt,d.overflow,_e,d.maxAngle,nt,ct,b,pt*nt,dt,_,1]),this.hitDetectionInstructions.push([Instruction.DRAW_CHARS,e,s,rt,d.overflow,_e&&defaultFillStyle,d.maxAngle,nt,ct,b,pt*nt,dt,_,1/nt])}setTextStyle(e,s){let a,d,b;if(!e)this.text_="";else{const _=e.getFill();_?(d=this.textFillState_,d||(d={},this.textFillState_=d),d.fillStyle=asColorLike(_.getColor()||defaultFillStyle)):(d=null,this.textFillState_=d);const _e=e.getStroke();if(!_e)b=null,this.textStrokeState_=b;else{b=this.textStrokeState_,b||(b={},this.textStrokeState_=b);const xt=_e.getLineDash(),wt=_e.getLineDashOffset(),Tt=_e.getWidth(),Rt=_e.getMiterLimit();b.lineCap=_e.getLineCap()||defaultLineCap,b.lineDash=xt?xt.slice():defaultLineDash,b.lineDashOffset=wt===void 0?defaultLineDashOffset:wt,b.lineJoin=_e.getLineJoin()||defaultLineJoin,b.lineWidth=Tt===void 0?defaultLineWidth:Tt,b.miterLimit=Rt===void 0?defaultMiterLimit:Rt,b.strokeStyle=asColorLike(_e.getColor()||defaultStrokeStyle)}a=this.textState_;const nt=e.getFont()||defaultFont;registerFont(nt);const rt=e.getScaleArray();a.overflow=e.getOverflow(),a.font=nt,a.maxAngle=e.getMaxAngle(),a.placement=e.getPlacement(),a.textAlign=e.getTextAlign(),a.repeat=e.getRepeat(),a.justify=e.getJustify(),a.textBaseline=e.getTextBaseline()||defaultTextBaseline,a.backgroundFill=e.getBackgroundFill(),a.backgroundStroke=e.getBackgroundStroke(),a.padding=e.getPadding()||defaultPadding,a.scale=rt===void 0?[1,1]:rt;const ct=e.getOffsetX(),dt=e.getOffsetY(),pt=e.getRotateWithView(),bt=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=ct===void 0?0:ct,this.textOffsetY_=dt===void 0?0:dt,this.textRotateWithView_=pt===void 0?!1:pt,this.textRotation_=bt===void 0?0:bt,this.strokeKey_=b?(typeof b.strokeStyle=="string"?b.strokeStyle:getUid(b.strokeStyle))+b.lineCap+b.lineDashOffset+"|"+b.lineWidth+b.lineJoin+b.miterLimit+"["+b.lineDash.join()+"]":"",this.textKey_=a.font+a.scale+(a.textAlign||"?")+(a.repeat||"?")+(a.justify||"?")+(a.textBaseline||"?"),this.fillKey_=d?typeof d.fillStyle=="string"?d.fillStyle:"|"+getUid(d.fillStyle):""}this.declutterImageWithText_=s}}const BATCH_CONSTRUCTORS={Circle:CanvasPolygonBuilder,Default:CanvasBuilder,Image:CanvasImageBuilder,LineString:CanvasLineStringBuilder,Polygon:CanvasPolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(e,s,a,d){this.tolerance_=e,this.maxExtent_=s,this.pixelRatio_=d,this.resolution_=a,this.buildersByZIndex_={}}finish(){const e={};for(const s in this.buildersByZIndex_){e[s]=e[s]||{};const a=this.buildersByZIndex_[s];for(const d in a){const b=a[d].finish();e[s][d]=b}}return e}getBuilder(e,s){const a=e!==void 0?e.toString():"0";let d=this.buildersByZIndex_[a];d===void 0&&(d={},this.buildersByZIndex_[a]=d);let b=d[s];if(b===void 0){const _=BATCH_CONSTRUCTORS[s];b=new _(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),d[s]=b}return b}}function drawTextOnPath(o,e,s,a,d,b,_,_e,nt,rt,ct,dt){let pt=o[e],bt=o[e+1],xt=0,wt=0,Tt=0,Rt=0;function Mt(){xt=pt,wt=bt,e+=a,pt=o[e],bt=o[e+1],Rt+=Tt,Tt=Math.sqrt((pt-xt)*(pt-xt)+(bt-wt)*(bt-wt))}do Mt();while(e<s-a&&Rt+Tt<b);let Et=Tt===0?0:(b-Rt)/Tt;const $t=lerp(xt,pt,Et),Xt=lerp(wt,bt,Et),Zt=e-a,Nt=Rt,Jt=b+_e*nt(rt,d,ct);for(;e<s-a&&Rt+Tt<Jt;)Mt();Et=Tt===0?0:(Jt-Rt)/Tt;const dn=lerp(xt,pt,Et),Pn=lerp(wt,bt,Et);let an;if(dt){const It=[$t,Xt,dn,Pn];rotate(It,0,4,2,dt,It,It),an=It[0]>It[2]}else an=$t>dn;const Vt=Math.PI,ao=[],hn=Zt+a===e;e=Zt,Tt=0,Rt=Nt,pt=o[e],bt=o[e+1];let fn;if(hn){Mt(),fn=Math.atan2(bt-wt,pt-xt),an&&(fn+=fn>0?-Vt:Vt);const It=(dn+$t)/2,Vn=(Pn+Xt)/2;return ao[0]=[It,Vn,(Jt-b)/2,fn,d],ao}d=d.replace(/\n/g," ");for(let It=0,Vn=d.length;It<Vn;){Mt();let ln=Math.atan2(bt-wt,pt-xt);if(an&&(ln+=ln>0?-Vt:Vt),fn!==void 0){let no=ln-fn;if(no+=no>Vt?-2*Vt:no<-Vt?2*Vt:0,Math.abs(no)>_)return null}fn=ln;const uo=It;let Ln=0;for(;It<Vn;++It){const no=an?Vn-It-1:It,Ro=_e*nt(rt,d[no],ct);if(e+a<s&&Rt+Tt<b+Ln+Ro/2)break;Ln+=Ro}if(It===uo)continue;const An=an?d.substring(Vn-uo,Vn-It):d.substring(uo,It);Et=Tt===0?0:(b+Ln/2-Rt)/Tt;const Wn=lerp(xt,pt,Et),er=lerp(wt,bt,Et);ao.push([Wn,er,Ln/2,ln,An]),b+=Ln}return ao}function lineStringLength(o,e,s,a){let d=o[e],b=o[e+1],_=0;for(let _e=e+a;_e<s;_e+=a){const nt=o[_e],rt=o[_e+1];_+=Math.sqrt((nt-d)*(nt-d)+(rt-b)*(rt-b)),d=nt,b=rt}return _}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(o){return o[3].declutterBox}const rtlRegEx=new RegExp("[-----]");function horizontalTextAlign(o,e){return e==="start"?e=rtlRegEx.test(o)?"right":"left":e==="end"&&(e=rtlRegEx.test(o)?"left":"right"),TEXT_ALIGN[e]}function createTextChunks(o,e,s){return s>0&&o.push(`
`,""),o.push(e,""),o}class Executor{constructor(e,s,a,d){this.overlaps=a,this.pixelRatio=s,this.resolution=e,this.alignFill_,this.instructions=d.instructions,this.coordinates=d.coordinates,this.coordinateCache_={},this.renderedTransform_=create(),this.hitDetectionInstructions=d.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=d.fillStates||{},this.strokeStates=d.strokeStates||{},this.textStates=d.textStates||{},this.widths_={},this.labels_={}}createLabel(e,s,a,d){const b=e+s+a+d;if(this.labels_[b])return this.labels_[b];const _=d?this.strokeStates[d]:null,_e=a?this.fillStates[a]:null,nt=this.textStates[s],rt=this.pixelRatio,ct=[nt.scale[0]*rt,nt.scale[1]*rt],dt=Array.isArray(e),pt=nt.justify?TEXT_ALIGN[nt.justify]:horizontalTextAlign(Array.isArray(e)?e[0]:e,nt.textAlign||defaultTextAlign),bt=d&&_.lineWidth?_.lineWidth:0,xt=dt?e:e.split(`
`).reduce(createTextChunks,[]),{width:wt,height:Tt,widths:Rt,heights:Mt,lineWidths:Et}=getTextDimensions(nt,xt),$t=wt+bt,Xt=[],Zt=($t+2)*ct[0],Nt=(Tt+bt)*ct[1],Jt={width:Zt<0?Math.floor(Zt):Math.ceil(Zt),height:Nt<0?Math.floor(Nt):Math.ceil(Nt),contextInstructions:Xt};(ct[0]!=1||ct[1]!=1)&&Xt.push("scale",ct),d&&(Xt.push("strokeStyle",_.strokeStyle),Xt.push("lineWidth",bt),Xt.push("lineCap",_.lineCap),Xt.push("lineJoin",_.lineJoin),Xt.push("miterLimit",_.miterLimit),Xt.push("setLineDash",[_.lineDash]),Xt.push("lineDashOffset",_.lineDashOffset)),a&&Xt.push("fillStyle",_e.fillStyle),Xt.push("textBaseline","middle"),Xt.push("textAlign","center");const dn=.5-pt;let Pn=pt*$t+dn*bt;const an=[],Vt=[];let ao=0,hn=0,fn=0,It=0,Vn;for(let ln=0,uo=xt.length;ln<uo;ln+=2){const Ln=xt[ln];if(Ln===`
`){hn+=ao,ao=0,Pn=pt*$t+dn*bt,++It;continue}const An=xt[ln+1]||nt.font;An!==Vn&&(d&&an.push("font",An),a&&Vt.push("font",An),Vn=An),ao=Math.max(ao,Mt[fn]);const Wn=[Ln,Pn+dn*Rt[fn]+pt*(Rt[fn]-Et[It]),.5*(bt+ao)+hn];Pn+=Rt[fn],d&&an.push("strokeText",Wn),a&&Vt.push("fillText",Wn),++fn}return Array.prototype.push.apply(Xt,an),Array.prototype.push.apply(Xt,Vt),this.labels_[b]=Jt,Jt}replayTextBackground_(e,s,a,d,b,_,_e){e.beginPath(),e.moveTo.apply(e,s),e.lineTo.apply(e,a),e.lineTo.apply(e,d),e.lineTo.apply(e,b),e.lineTo.apply(e,s),_&&(this.alignFill_=_[2],this.fill_(e)),_e&&(this.setStrokeStyle_(e,_e),e.stroke())}calculateImageOrLabelDimensions_(e,s,a,d,b,_,_e,nt,rt,ct,dt,pt,bt,xt,wt,Tt){_e*=pt[0],nt*=pt[1];let Rt=a-_e,Mt=d-nt;const Et=b+rt>e?e-rt:b,$t=_+ct>s?s-ct:_,Xt=xt[3]+Et*pt[0]+xt[1],Zt=xt[0]+$t*pt[1]+xt[2],Nt=Rt-xt[3],Jt=Mt-xt[0];(wt||dt!==0)&&(p1[0]=Nt,p4[0]=Nt,p1[1]=Jt,p2[1]=Jt,p2[0]=Nt+Xt,p3[0]=p2[0],p3[1]=Jt+Zt,p4[1]=p3[1]);let dn;return dt!==0?(dn=compose(create(),a,d,1,1,dt,-a,-d),apply$1(dn,p1),apply$1(dn,p2),apply$1(dn,p3),apply$1(dn,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(Nt,Nt+Xt),Math.min(Jt,Jt+Zt),Math.max(Nt,Nt+Xt),Math.max(Jt,Jt+Zt),tmpExtent),bt&&(Rt=Math.round(Rt),Mt=Math.round(Mt)),{drawImageX:Rt,drawImageY:Mt,drawImageW:Et,drawImageH:$t,originX:rt,originY:ct,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:Tt},canvasTransform:dn,scale:pt}}replayImageOrLabel_(e,s,a,d,b,_,_e){const nt=!!(_||_e),rt=d.declutterBox,ct=e.canvas,dt=_e?_e[2]*d.scale[0]/2:0;return rt.minX-dt<=ct.width/s&&rt.maxX+dt>=0&&rt.minY-dt<=ct.height/s&&rt.maxY+dt>=0&&(nt&&this.replayTextBackground_(e,p1,p2,p3,p4,_,_e),drawImageOrLabel(e,d.canvasTransform,b,a,d.originX,d.originY,d.drawImageW,d.drawImageH,d.drawImageX,d.drawImageY,d.scale)),!0}fill_(e){if(this.alignFill_){const s=apply$1(this.renderedTransform_,[0,0]),a=512*this.pixelRatio;e.save(),e.translate(s[0]%a,s[1]%a),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,s){e.strokeStyle=s[1],e.lineWidth=s[2],e.lineCap=s[3],e.lineJoin=s[4],e.miterLimit=s[5],e.lineDashOffset=s[7],e.setLineDash(s[6])}drawLabelWithPointPlacement_(e,s,a,d){const b=this.textStates[s],_=this.createLabel(e,s,d,a),_e=this.strokeStates[a],nt=this.pixelRatio,rt=horizontalTextAlign(Array.isArray(e)?e[0]:e,b.textAlign||defaultTextAlign),ct=TEXT_ALIGN[b.textBaseline||defaultTextBaseline],dt=_e&&_e.lineWidth?_e.lineWidth:0,pt=_.width/nt-2*b.scale[0],bt=rt*pt+2*(.5-rt)*dt,xt=ct*_.height/nt+2*(.5-ct)*dt;return{label:_,anchorX:bt,anchorY:xt}}execute_(e,s,a,d,b,_,_e,nt){let rt;this.pixelCoordinates_&&equals$2(a,this.renderedTransform_)?rt=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),rt=transform2D(this.coordinates,0,this.coordinates.length,2,a,this.pixelCoordinates_),setFromArray(this.renderedTransform_,a));let ct=0;const dt=d.length;let pt=0,bt,xt,wt,Tt,Rt,Mt,Et,$t,Xt,Zt,Nt,Jt,dn=0,Pn=0,an=null,Vt=null;const ao=this.coordinateCache_,hn=this.viewRotation_,fn=Math.round(Math.atan2(-a[1],a[0])*1e12)/1e12,It={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:hn},Vn=this.instructions!=d||this.overlaps?0:200;let ln,uo,Ln,An;for(;ct<dt;){const Wn=d[ct];switch(Wn[0]){case Instruction.BEGIN_GEOMETRY:ln=Wn[1],An=Wn[3],ln.getGeometry()?_e!==void 0&&!intersects$1(_e,An.getExtent())?ct=Wn[2]+1:++ct:ct=Wn[2];break;case Instruction.BEGIN_PATH:dn>Vn&&(this.fill_(e),dn=0),Pn>Vn&&(e.stroke(),Pn=0),!dn&&!Pn&&(e.beginPath(),Tt=NaN,Rt=NaN),++ct;break;case Instruction.CIRCLE:pt=Wn[1];const no=rt[pt],Ro=rt[pt+1],On=rt[pt+2],_o=rt[pt+3],Yt=On-no,jr=_o-Ro,lo=Math.sqrt(Yt*Yt+jr*jr);e.moveTo(no+lo,Ro),e.arc(no,Ro,lo,0,2*Math.PI,!0),++ct;break;case Instruction.CLOSE_PATH:e.closePath(),++ct;break;case Instruction.CUSTOM:pt=Wn[1],bt=Wn[2];const Ho=Wn[3],mo=Wn[4],Co=Wn.length==6?Wn[5]:void 0;It.geometry=Ho,It.feature=ln,ct in ao||(ao[ct]=[]);const mn=ao[ct];Co?Co(rt,pt,bt,2,mn):(mn[0]=rt[pt],mn[1]=rt[pt+1],mn.length=2),mo(mn,It),++ct;break;case Instruction.DRAW_IMAGE:pt=Wn[1],bt=Wn[2],$t=Wn[3],xt=Wn[4],wt=Wn[5];let wn=Wn[6];const Dn=Wn[7],rn=Wn[8],Cn=Wn[9],Nn=Wn[10];let zn=Wn[11];const So=Wn[12];let Hn=Wn[13];const Tn=Wn[14],Jn=Wn[15];if(!$t&&Wn.length>=20){Xt=Wn[19],Zt=Wn[20],Nt=Wn[21],Jt=Wn[22];const Yl=this.drawLabelWithPointPlacement_(Xt,Zt,Nt,Jt);$t=Yl.label,Wn[3]=$t;const xu=Wn[23];xt=(Yl.anchorX-xu)*this.pixelRatio,Wn[4]=xt;const Vs=Wn[24];wt=(Yl.anchorY-Vs)*this.pixelRatio,Wn[5]=wt,wn=$t.height,Wn[6]=wn,Hn=$t.width,Wn[13]=Hn}let bo;Wn.length>25&&(bo=Wn[25]);let $n,oo,wo;Wn.length>17?($n=Wn[16],oo=Wn[17],wo=Wn[18]):($n=defaultPadding,oo=!1,wo=!1),Nn&&fn?zn+=hn:!Nn&&!fn&&(zn-=hn);let Oo=0;for(;pt<bt;pt+=2){if(bo&&bo[Oo++]<Hn/this.pixelRatio)continue;const Yl=this.calculateImageOrLabelDimensions_($t.width,$t.height,rt[pt],rt[pt+1],Hn,wn,xt,wt,rn,Cn,zn,So,b,$n,oo||wo,ln),xu=[e,s,$t,Yl,Dn,oo?an:null,wo?Vt:null];if(nt){if(Tn==="none")continue;if(Tn==="obstacle"){nt.insert(Yl.declutterBox);continue}else{let Vs,wu;if(Jn){const iu=bt-pt;if(!Jn[iu]){Jn[iu]=xu;continue}if(Vs=Jn[iu],delete Jn[iu],wu=getDeclutterBox(Vs),nt.collides(wu))continue}if(nt.collides(Yl.declutterBox))continue;Vs&&(nt.insert(wu),this.replayImageOrLabel_.apply(this,Vs)),nt.insert(Yl.declutterBox)}}this.replayImageOrLabel_.apply(this,xu)}++ct;break;case Instruction.DRAW_CHARS:const Ir=Wn[1],sr=Wn[2],vr=Wn[3],as=Wn[4];Jt=Wn[5];const _r=Wn[6],fs=Wn[7],Ss=Wn[8];Nt=Wn[9];const As=Wn[10];Xt=Wn[11],Zt=Wn[12];const _l=[Wn[13],Wn[13]],Zr=this.textStates[Zt],Ml=Zr.font,tr=[Zr.scale[0]*fs,Zr.scale[1]*fs];let Ms;Ml in this.widths_?Ms=this.widths_[Ml]:(Ms={},this.widths_[Ml]=Ms);const cu=lineStringLength(rt,Ir,sr,2),ou=Math.abs(tr[0])*measureAndCacheTextWidth(Ml,Xt,Ms);if(as||ou<=cu){const Yl=this.textStates[Zt].textAlign,xu=(cu-ou)*horizontalTextAlign(Xt,Yl),Vs=drawTextOnPath(rt,Ir,sr,2,Xt,xu,_r,Math.abs(tr[0]),measureAndCacheTextWidth,Ml,Ms,fn?0:this.viewRotation_);e:if(Vs){const wu=[];let iu,ba,Jr,_a,go;if(Nt)for(iu=0,ba=Vs.length;iu<ba;++iu){go=Vs[iu],Jr=go[4],_a=this.createLabel(Jr,Zt,"",Nt),xt=go[2]+(tr[0]<0?-As:As),wt=vr*_a.height+(.5-vr)*2*As*tr[1]/tr[0]-Ss;const Po=this.calculateImageOrLabelDimensions_(_a.width,_a.height,go[0],go[1],_a.width,_a.height,xt,wt,0,0,go[3],_l,!1,defaultPadding,!1,ln);if(nt&&nt.collides(Po.declutterBox))break e;wu.push([e,s,_a,Po,1,null,null])}if(Jt)for(iu=0,ba=Vs.length;iu<ba;++iu){go=Vs[iu],Jr=go[4],_a=this.createLabel(Jr,Zt,Jt,""),xt=go[2],wt=vr*_a.height-Ss;const Po=this.calculateImageOrLabelDimensions_(_a.width,_a.height,go[0],go[1],_a.width,_a.height,xt,wt,0,0,go[3],_l,!1,defaultPadding,!1,ln);if(nt&&nt.collides(Po.declutterBox))break e;wu.push([e,s,_a,Po,1,null,null])}nt&&nt.load(wu.map(getDeclutterBox));for(let Po=0,Sr=wu.length;Po<Sr;++Po)this.replayImageOrLabel_.apply(this,wu[Po])}}++ct;break;case Instruction.END_GEOMETRY:if(_!==void 0){ln=Wn[1];const Yl=_(ln,An);if(Yl)return Yl}++ct;break;case Instruction.FILL:Vn?dn++:this.fill_(e),++ct;break;case Instruction.MOVE_TO_LINE_TO:for(pt=Wn[1],bt=Wn[2],uo=rt[pt],Ln=rt[pt+1],Mt=uo+.5|0,Et=Ln+.5|0,(Mt!==Tt||Et!==Rt)&&(e.moveTo(uo,Ln),Tt=Mt,Rt=Et),pt+=2;pt<bt;pt+=2)uo=rt[pt],Ln=rt[pt+1],Mt=uo+.5|0,Et=Ln+.5|0,(pt==bt-2||Mt!==Tt||Et!==Rt)&&(e.lineTo(uo,Ln),Tt=Mt,Rt=Et);++ct;break;case Instruction.SET_FILL_STYLE:an=Wn,this.alignFill_=Wn[2],dn&&(this.fill_(e),dn=0,Pn&&(e.stroke(),Pn=0)),e.fillStyle=Wn[1],++ct;break;case Instruction.SET_STROKE_STYLE:Vt=Wn,Pn&&(e.stroke(),Pn=0),this.setStrokeStyle_(e,Wn),++ct;break;case Instruction.STROKE:Vn?Pn++:e.stroke(),++ct;break;default:++ct;break}}dn&&this.fill_(e),Pn&&e.stroke()}execute(e,s,a,d,b,_){this.viewRotation_=d,this.execute_(e,s,a,this.instructions,b,void 0,void 0,_)}executeHitDetection(e,s,a,d,b){return this.viewRotation_=a,this.execute_(e,1,s,this.hitDetectionInstructions,!0,d,b)}}const ORDER=["Polygon","Circle","LineString","Image","Text","Default"];class ExecutorGroup{constructor(e,s,a,d,b,_){this.maxExtent_=e,this.overlaps_=d,this.pixelRatio_=a,this.resolution_=s,this.renderBuffer_=_,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create(),this.createExecutors_(b)}clip(e,s){const a=this.getClipCoords(s);e.beginPath(),e.moveTo(a[0],a[1]),e.lineTo(a[2],a[3]),e.lineTo(a[4],a[5]),e.lineTo(a[6],a[7]),e.clip()}createExecutors_(e){for(const s in e){let a=this.executorsByZIndex_[s];a===void 0&&(a={},this.executorsByZIndex_[s]=a);const d=e[s];for(const b in d){const _=d[b];a[b]=new Executor(this.resolution_,this.pixelRatio_,this.overlaps_,_)}}}hasExecutors(e){for(const s in this.executorsByZIndex_){const a=this.executorsByZIndex_[s];for(let d=0,b=e.length;d<b;++d)if(e[d]in a)return!0}return!1}forEachFeatureAtCoordinate(e,s,a,d,b,_){d=Math.round(d);const _e=d*2+1,nt=compose(this.hitDetectionTransform_,d+.5,d+.5,1/s,-1/s,-a,-e[0],-e[1]),rt=!this.hitDetectionContext_;rt&&(this.hitDetectionContext_=createCanvasContext2D(_e,_e,void 0,{willReadFrequently:!0}));const ct=this.hitDetectionContext_;ct.canvas.width!==_e||ct.canvas.height!==_e?(ct.canvas.width=_e,ct.canvas.height=_e):rt||ct.clearRect(0,0,_e,_e);let dt;this.renderBuffer_!==void 0&&(dt=createEmpty(),extendCoordinate(dt,e),buffer(dt,s*(this.renderBuffer_+d),dt));const pt=getPixelIndexArray(d);let bt;function xt(Xt,Zt){const Nt=ct.getImageData(0,0,_e,_e).data;for(let Jt=0,dn=pt.length;Jt<dn;Jt++)if(Nt[pt[Jt]]>0){if(!_||bt!=="Image"&&bt!=="Text"||_.includes(Xt)){const Pn=(pt[Jt]-3)/4,an=d-Pn%_e,Vt=d-(Pn/_e|0),ao=b(Xt,Zt,an*an+Vt*Vt);if(ao)return ao}ct.clearRect(0,0,_e,_e);break}}const wt=Object.keys(this.executorsByZIndex_).map(Number);wt.sort(ascending);let Tt,Rt,Mt,Et,$t;for(Tt=wt.length-1;Tt>=0;--Tt){const Xt=wt[Tt].toString();for(Mt=this.executorsByZIndex_[Xt],Rt=ORDER.length-1;Rt>=0;--Rt)if(bt=ORDER[Rt],Et=Mt[bt],Et!==void 0&&($t=Et.executeHitDetection(ct,nt,a,xt,dt),$t))return $t}}getClipCoords(e){const s=this.maxExtent_;if(!s)return null;const a=s[0],d=s[1],b=s[2],_=s[3],_e=[a,d,a,_,b,_,b,d];return transform2D(_e,0,8,2,e,_e),_e}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(e,s,a,d,b,_,_e){const nt=Object.keys(this.executorsByZIndex_).map(Number);nt.sort(ascending),this.maxExtent_&&(e.save(),this.clip(e,a)),_=_||ORDER;let rt,ct,dt,pt,bt,xt;for(_e&&nt.reverse(),rt=0,ct=nt.length;rt<ct;++rt){const wt=nt[rt].toString();for(bt=this.executorsByZIndex_[wt],dt=0,pt=_.length;dt<pt;++dt){const Tt=_[dt];xt=bt[Tt],xt!==void 0&&xt.execute(e,s,a,d,b,_e)}}this.maxExtent_&&e.restore()}}const circlePixelIndexArrayCache={};function getPixelIndexArray(o){if(circlePixelIndexArrayCache[o]!==void 0)return circlePixelIndexArrayCache[o];const e=o*2+1,s=o*o,a=new Array(s+1);for(let b=0;b<=o;++b)for(let _=0;_<=o;++_){const _e=b*b+_*_;if(_e>s)break;let nt=a[_e];nt||(nt=[],a[_e]=nt),nt.push(((o+b)*e+(o+_))*4+3),b>0&&nt.push(((o-b)*e+(o+_))*4+3),_>0&&(nt.push(((o+b)*e+(o-_))*4+3),b>0&&nt.push(((o-b)*e+(o-_))*4+3))}const d=[];for(let b=0,_=a.length;b<_;++b)a[b]&&d.push(...a[b]);return circlePixelIndexArrayCache[o]=d,d}class CanvasImmediateRenderer extends VectorContext{constructor(e,s,a,d,b,_,_e){super(),this.context_=e,this.pixelRatio_=s,this.extent_=a,this.transform_=d,this.transformRotation_=d?toFixed(Math.atan2(d[1],d[0]),10):0,this.viewRotation_=b,this.squaredTolerance_=_,this.userTransform_=_e,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create()}drawImages_(e,s,a,d){if(!this.image_)return;const b=transform2D(e,s,a,d,this.transform_,this.pixelCoordinates_),_=this.context_,_e=this.tmpLocalTransform_,nt=_.globalAlpha;this.imageOpacity_!=1&&(_.globalAlpha=nt*this.imageOpacity_);let rt=this.imageRotation_;this.transformRotation_===0&&(rt-=this.viewRotation_),this.imageRotateWithView_&&(rt+=this.viewRotation_);for(let ct=0,dt=b.length;ct<dt;ct+=2){const pt=b[ct]-this.imageAnchorX_,bt=b[ct+1]-this.imageAnchorY_;if(rt!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const xt=pt+this.imageAnchorX_,wt=bt+this.imageAnchorY_;compose(_e,xt,wt,1,1,rt,-xt,-wt),_.save(),_.transform.apply(_,_e),_.translate(xt,wt),_.scale(this.imageScale_[0],this.imageScale_[1]),_.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),_.restore()}else _.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,pt,bt,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(_.globalAlpha=nt)}drawText_(e,s,a,d){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const b=transform2D(e,s,a,d,this.transform_,this.pixelCoordinates_),_=this.context_;let _e=this.textRotation_;for(this.transformRotation_===0&&(_e-=this.viewRotation_),this.textRotateWithView_&&(_e+=this.viewRotation_);s<a;s+=d){const nt=b[s]+this.textOffsetX_,rt=b[s+1]+this.textOffsetY_;_e!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(_.save(),_.translate(nt-this.textOffsetX_,rt-this.textOffsetY_),_.rotate(_e),_.translate(this.textOffsetX_,this.textOffsetY_),_.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&_.strokeText(this.text_,0,0),this.textFillState_&&_.fillText(this.text_,0,0),_.restore()):(this.textStrokeState_&&_.strokeText(this.text_,nt,rt),this.textFillState_&&_.fillText(this.text_,nt,rt))}}moveToLineTo_(e,s,a,d,b){const _=this.context_,_e=transform2D(e,s,a,d,this.transform_,this.pixelCoordinates_);_.moveTo(_e[0],_e[1]);let nt=_e.length;b&&(nt-=2);for(let rt=2;rt<nt;rt+=2)_.lineTo(_e[rt],_e[rt+1]);return b&&_.closePath(),a}drawRings_(e,s,a,d){for(let b=0,_=a.length;b<_;++b)s=this.moveToLineTo_(e,s,a[b],d,!0);return s}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const s=transformGeom2D(e,this.transform_,this.pixelCoordinates_),a=s[2]-s[0],d=s[3]-s[1],b=Math.sqrt(a*a+d*d),_=this.context_;_.beginPath(),_.arc(s[0],s[1],b,0,2*Math.PI),this.fillState_&&_.fill(),this.strokeState_&&_.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,s){const a=s.getGeometryFunction()(e);a&&(this.setStyle(s),this.drawGeometry(a))}drawGeometryCollection(e){const s=e.getGeometriesArray();for(let a=0,d=s.length;a<d;++a)this.drawGeometry(s[a])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const s=e.getFlatCoordinates(),a=e.getStride();this.image_&&this.drawImages_(s,0,s.length,a),this.text_!==""&&this.drawText_(s,0,s.length,a)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const s=e.getFlatCoordinates(),a=e.getStride();this.image_&&this.drawImages_(s,0,s.length,a),this.text_!==""&&this.drawText_(s,0,s.length,a)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const s=this.context_,a=e.getFlatCoordinates();s.beginPath(),this.moveToLineTo_(a,0,a.length,e.getStride(),!1),s.stroke()}if(this.text_!==""){const s=e.getFlatMidpoint();this.drawText_(s,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const s=e.getExtent();if(intersects$1(this.extent_,s)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const a=this.context_,d=e.getFlatCoordinates();let b=0;const _=e.getEnds(),_e=e.getStride();a.beginPath();for(let nt=0,rt=_.length;nt<rt;++nt)b=this.moveToLineTo_(d,b,_[nt],_e,!1);a.stroke()}if(this.text_!==""){const a=e.getFlatMidpoints();this.drawText_(a,0,a.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const s=this.context_;s.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}if(this.text_!==""){const s=e.getFlatInteriorPoint();this.drawText_(s,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const s=this.context_,a=e.getOrientedFlatCoordinates();let d=0;const b=e.getEndss(),_=e.getStride();s.beginPath();for(let _e=0,nt=b.length;_e<nt;++_e){const rt=b[_e];d=this.drawRings_(a,d,rt,_)}this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}if(this.text_!==""){const s=e.getFlatInteriorPoints();this.drawText_(s,0,s.length,2)}}}setContextFillState_(e){const s=this.context_,a=this.contextFillState_;a?a.fillStyle!=e.fillStyle&&(a.fillStyle=e.fillStyle,s.fillStyle=e.fillStyle):(s.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const s=this.context_,a=this.contextStrokeState_;a?(a.lineCap!=e.lineCap&&(a.lineCap=e.lineCap,s.lineCap=e.lineCap),equals$2(a.lineDash,e.lineDash)||s.setLineDash(a.lineDash=e.lineDash),a.lineDashOffset!=e.lineDashOffset&&(a.lineDashOffset=e.lineDashOffset,s.lineDashOffset=e.lineDashOffset),a.lineJoin!=e.lineJoin&&(a.lineJoin=e.lineJoin,s.lineJoin=e.lineJoin),a.lineWidth!=e.lineWidth&&(a.lineWidth=e.lineWidth,s.lineWidth=e.lineWidth),a.miterLimit!=e.miterLimit&&(a.miterLimit=e.miterLimit,s.miterLimit=e.miterLimit),a.strokeStyle!=e.strokeStyle&&(a.strokeStyle=e.strokeStyle,s.strokeStyle=e.strokeStyle)):(s.lineCap=e.lineCap,s.setLineDash(e.lineDash),s.lineDashOffset=e.lineDashOffset,s.lineJoin=e.lineJoin,s.lineWidth=e.lineWidth,s.miterLimit=e.miterLimit,s.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const s=this.context_,a=this.contextTextState_,d=e.textAlign?e.textAlign:defaultTextAlign;a?(a.font!=e.font&&(a.font=e.font,s.font=e.font),a.textAlign!=d&&(a.textAlign=d,s.textAlign=d),a.textBaseline!=e.textBaseline&&(a.textBaseline=e.textBaseline,s.textBaseline=e.textBaseline)):(s.font=e.font,s.textAlign=d,s.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:d,textBaseline:e.textBaseline})}setFillStrokeStyle(e,s){if(!e)this.fillState_=null;else{const a=e.getColor();this.fillState_={fillStyle:asColorLike(a||defaultFillStyle)}}if(!s)this.strokeState_=null;else{const a=s.getColor(),d=s.getLineCap(),b=s.getLineDash(),_=s.getLineDashOffset(),_e=s.getLineJoin(),nt=s.getWidth(),rt=s.getMiterLimit(),ct=b||defaultLineDash;this.strokeState_={lineCap:d!==void 0?d:defaultLineCap,lineDash:this.pixelRatio_===1?ct:ct.map(dt=>dt*this.pixelRatio_),lineDashOffset:(_||defaultLineDashOffset)*this.pixelRatio_,lineJoin:_e!==void 0?_e:defaultLineJoin,lineWidth:(nt!==void 0?nt:defaultLineWidth)*this.pixelRatio_,miterLimit:rt!==void 0?rt:defaultMiterLimit,strokeStyle:asColorLike(a||defaultStrokeStyle)}}}setImageStyle(e){let s;if(!e||!(s=e.getSize())){this.image_=null;return}const a=e.getPixelRatio(this.pixelRatio_),d=e.getAnchor(),b=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=d[0]*a,this.imageAnchorY_=d[1]*a,this.imageHeight_=s[1]*a,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=b[0],this.imageOriginY_=b[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const _=e.getScaleArray();this.imageScale_=[_[0]*this.pixelRatio_/a,_[1]*this.pixelRatio_/a],this.imageWidth_=s[0]*a}setTextStyle(e){if(!e)this.text_="";else{const s=e.getFill();if(!s)this.textFillState_=null;else{const bt=s.getColor();this.textFillState_={fillStyle:asColorLike(bt||defaultFillStyle)}}const a=e.getStroke();if(!a)this.textStrokeState_=null;else{const bt=a.getColor(),xt=a.getLineCap(),wt=a.getLineDash(),Tt=a.getLineDashOffset(),Rt=a.getLineJoin(),Mt=a.getWidth(),Et=a.getMiterLimit();this.textStrokeState_={lineCap:xt!==void 0?xt:defaultLineCap,lineDash:wt||defaultLineDash,lineDashOffset:Tt||defaultLineDashOffset,lineJoin:Rt!==void 0?Rt:defaultLineJoin,lineWidth:Mt!==void 0?Mt:defaultLineWidth,miterLimit:Et!==void 0?Et:defaultMiterLimit,strokeStyle:asColorLike(bt||defaultStrokeStyle)}}const d=e.getFont(),b=e.getOffsetX(),_=e.getOffsetY(),_e=e.getRotateWithView(),nt=e.getRotation(),rt=e.getScaleArray(),ct=e.getText(),dt=e.getTextAlign(),pt=e.getTextBaseline();this.textState_={font:d!==void 0?d:defaultFont,textAlign:dt!==void 0?dt:defaultTextAlign,textBaseline:pt!==void 0?pt:defaultTextBaseline},this.text_=ct!==void 0?Array.isArray(ct)?ct.reduce((bt,xt,wt)=>bt+=wt%2?" ":xt,""):ct:"",this.textOffsetX_=b!==void 0?this.pixelRatio_*b:0,this.textOffsetY_=_!==void 0?this.pixelRatio_*_:0,this.textRotateWithView_=_e!==void 0?_e:!1,this.textRotation_=nt!==void 0?nt:0,this.textScale_=[this.pixelRatio_*rt[0],this.pixelRatio_*rt[1]]}}}const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(o,e,s,a,d,b,_){const _e=o[0]*HIT_DETECT_RESOLUTION,nt=o[1]*HIT_DETECT_RESOLUTION,rt=createCanvasContext2D(_e,nt);rt.imageSmoothingEnabled=!1;const ct=rt.canvas,dt=new CanvasImmediateRenderer(rt,HIT_DETECT_RESOLUTION,d,null,_),pt=s.length,bt=Math.floor((256*256*256-1)/pt),xt={};for(let Tt=1;Tt<=pt;++Tt){const Rt=s[Tt-1],Mt=Rt.getStyleFunction()||a;if(!Mt)continue;let Et=Mt(Rt,b);if(!Et)continue;Array.isArray(Et)||(Et=[Et]);const Xt=(Tt*bt).toString(16).padStart(7,"#00000");for(let Zt=0,Nt=Et.length;Zt<Nt;++Zt){const Jt=Et[Zt],dn=Jt.getGeometryFunction()(Rt);if(!dn||!intersects$1(d,dn.getExtent()))continue;const Pn=Jt.clone(),an=Pn.getFill();an&&an.setColor(Xt);const Vt=Pn.getStroke();Vt&&(Vt.setColor(Xt),Vt.setLineDash(null)),Pn.setText(void 0);const ao=Jt.getImage();if(ao){const Vn=ao.getImageSize();if(!Vn)continue;const ln=createCanvasContext2D(Vn[0],Vn[1],void 0,{alpha:!1}),uo=ln.canvas;ln.fillStyle=Xt,ln.fillRect(0,0,uo.width,uo.height),Pn.setImage(new Icon({img:uo,anchor:ao.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ao.getOrigin(),opacity:1,size:ao.getSize(),scale:ao.getScale(),rotation:ao.getRotation(),rotateWithView:ao.getRotateWithView()}))}const hn=Pn.getZIndex()||0;let fn=xt[hn];fn||(fn={},xt[hn]=fn,fn.Polygon=[],fn.Circle=[],fn.LineString=[],fn.Point=[]);const It=dn.getType();if(It==="GeometryCollection"){const Vn=dn.getGeometriesArrayRecursive();for(let ln=0,uo=Vn.length;ln<uo;++ln){const Ln=Vn[ln];fn[Ln.getType().replace("Multi","")].push(Ln,Pn)}}else fn[It.replace("Multi","")].push(dn,Pn)}}const wt=Object.keys(xt).map(Number).sort(ascending);for(let Tt=0,Rt=wt.length;Tt<Rt;++Tt){const Mt=xt[wt[Tt]];for(const Et in Mt){const $t=Mt[Et];for(let Xt=0,Zt=$t.length;Xt<Zt;Xt+=2){dt.setStyle($t[Xt+1]);for(let Nt=0,Jt=e.length;Nt<Jt;++Nt)dt.setTransform(e[Nt]),dt.drawGeometry($t[Xt])}}}return rt.getImageData(0,0,ct.width,ct.height)}function hitDetect(o,e,s){const a=[];if(s){const d=Math.floor(Math.round(o[0])*HIT_DETECT_RESOLUTION),b=Math.floor(Math.round(o[1])*HIT_DETECT_RESOLUTION),_=(clamp(d,0,s.width-1)+clamp(b,0,s.height-1)*s.width)*4,_e=s.data[_],nt=s.data[_+1],ct=s.data[_+2]+256*(nt+256*_e),dt=Math.floor((256*256*256-1)/e.length);ct&&ct%dt===0&&a.push(e[ct/dt-1])}return a}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function defaultOrder(o,e){return parseInt(getUid(o),10)-parseInt(getUid(e),10)}function getSquaredTolerance(o,e){const s=getTolerance(o,e);return s*s}function getTolerance(o,e){return SIMPLIFY_TOLERANCE*o/e}function renderCircleGeometry(o,e,s,a,d){const b=s.getFill(),_=s.getStroke();if(b||_){const nt=o.getBuilder(s.getZIndex(),"Circle");nt.setFillStrokeStyle(b,_),nt.drawCircle(e,a)}const _e=s.getText();if(_e&&_e.getText()){const nt=(d||o).getBuilder(s.getZIndex(),"Text");nt.setTextStyle(_e),nt.drawText(e,a)}}function renderFeature$1(o,e,s,a,d,b,_){let _e=!1;const nt=s.getImage();if(nt){const rt=nt.getImageState();rt==ImageState.LOADED||rt==ImageState.ERROR?nt.unlistenImageChange(d):(rt==ImageState.IDLE&&nt.load(),nt.listenImageChange(d),_e=!0)}return renderFeatureInternal(o,e,s,a,b,_),_e}function renderFeatureInternal(o,e,s,a,d,b){const _=s.getGeometryFunction()(e);if(!_)return;const _e=_.simplifyTransformed(a,d);if(s.getRenderer())renderGeometry(o,_e,s,e);else{const rt=GEOMETRY_RENDERERS[_e.getType()];rt(o,_e,s,e,b)}}function renderGeometry(o,e,s,a){if(e.getType()=="GeometryCollection"){const b=e.getGeometries();for(let _=0,_e=b.length;_<_e;++_)renderGeometry(o,b[_],s,a);return}o.getBuilder(s.getZIndex(),"Default").drawCustom(e,a,s.getRenderer(),s.getHitDetectionRenderer())}function renderGeometryCollectionGeometry(o,e,s,a,d){const b=e.getGeometriesArray();let _,_e;for(_=0,_e=b.length;_<_e;++_){const nt=GEOMETRY_RENDERERS[b[_].getType()];nt(o,b[_],s,a,d)}}function renderLineStringGeometry(o,e,s,a,d){const b=s.getStroke();if(b){const _e=o.getBuilder(s.getZIndex(),"LineString");_e.setFillStrokeStyle(null,b),_e.drawLineString(e,a)}const _=s.getText();if(_&&_.getText()){const _e=(d||o).getBuilder(s.getZIndex(),"Text");_e.setTextStyle(_),_e.drawText(e,a)}}function renderMultiLineStringGeometry(o,e,s,a,d){const b=s.getStroke();if(b){const _e=o.getBuilder(s.getZIndex(),"LineString");_e.setFillStrokeStyle(null,b),_e.drawMultiLineString(e,a)}const _=s.getText();if(_&&_.getText()){const _e=(d||o).getBuilder(s.getZIndex(),"Text");_e.setTextStyle(_),_e.drawText(e,a)}}function renderMultiPolygonGeometry(o,e,s,a,d){const b=s.getFill(),_=s.getStroke();if(_||b){const nt=o.getBuilder(s.getZIndex(),"Polygon");nt.setFillStrokeStyle(b,_),nt.drawMultiPolygon(e,a)}const _e=s.getText();if(_e&&_e.getText()){const nt=(d||o).getBuilder(s.getZIndex(),"Text");nt.setTextStyle(_e),nt.drawText(e,a)}}function renderPointGeometry(o,e,s,a,d){const b=s.getImage(),_=s.getText();let _e;if(b){if(b.getImageState()!=ImageState.LOADED)return;let nt=o;if(d){const ct=b.getDeclutterMode();if(ct!=="none")if(nt=d,ct==="obstacle"){const dt=o.getBuilder(s.getZIndex(),"Image");dt.setImageStyle(b,_e),dt.drawPoint(e,a)}else _&&_.getText()&&(_e={})}const rt=nt.getBuilder(s.getZIndex(),"Image");rt.setImageStyle(b,_e),rt.drawPoint(e,a)}if(_&&_.getText()){let nt=o;d&&(nt=d);const rt=nt.getBuilder(s.getZIndex(),"Text");rt.setTextStyle(_,_e),rt.drawText(e,a)}}function renderMultiPointGeometry(o,e,s,a,d){const b=s.getImage(),_=s.getText();let _e;if(b){if(b.getImageState()!=ImageState.LOADED)return;let nt=o;if(d){const ct=b.getDeclutterMode();if(ct!=="none")if(nt=d,ct==="obstacle"){const dt=o.getBuilder(s.getZIndex(),"Image");dt.setImageStyle(b,_e),dt.drawMultiPoint(e,a)}else _&&_.getText()&&(_e={})}const rt=nt.getBuilder(s.getZIndex(),"Image");rt.setImageStyle(b,_e),rt.drawMultiPoint(e,a)}if(_&&_.getText()){let nt=o;d&&(nt=d);const rt=nt.getBuilder(s.getZIndex(),"Text");rt.setTextStyle(_,_e),rt.drawText(e,a)}}function renderPolygonGeometry(o,e,s,a,d){const b=s.getFill(),_=s.getStroke();if(b||_){const nt=o.getBuilder(s.getZIndex(),"Polygon");nt.setFillStrokeStyle(b,_),nt.drawPolygon(e,a)}const _e=s.getText();if(_e&&_e.getText()){const nt=(d||o).getBuilder(s.getZIndex(),"Text");nt.setTextStyle(_e),nt.drawText(e,a)}}const IMAGE_REPLAYS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},VECTOR_REPLAYS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=create()}prepareTile(e,s,a){let d;const b=e.getState();return(b===TileState.LOADED||b===TileState.ERROR)&&(this.updateExecutorGroup_(e,s,a),this.tileImageNeedsRender_(e)&&(d=!0)),d}getTile(e,s,a,d){const b=d.pixelRatio,_=d.viewState,_e=_.resolution,nt=_.projection,rt=this.getLayer(),ct=rt.getSource().getTile(e,s,a,b,nt),dt=d.viewHints,pt=!(dt[ViewHint.ANIMATING]||dt[ViewHint.INTERACTING]);return(pt||!ct.wantedResolution)&&(ct.wantedResolution=_e),this.prepareTile(ct,b,nt)&&(pt||Date.now()-d.time<8)&&rt.getRenderMode()!=="vector"&&this.renderTileImage_(ct,d),super.getTile(e,s,a,d)}isDrawableTile(e){const s=this.getLayer();return super.isDrawableTile(e)&&(s.getRenderMode()==="vector"?getUid(s)in e.executorGroups:e.hasContext(s))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const s=this.getLayer().getRevision();return this.renderedLayerRevision_!==s&&(this.renderedLayerRevision_=s,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,s,a){const d=this.getLayer(),b=d.getRevision(),_=d.getRenderOrder()||null,_e=e.wantedResolution,nt=e.getReplayState(d);if(!nt.dirty&&nt.renderedResolution===_e&&nt.renderedRevision==b&&nt.renderedRenderOrder==_)return;const rt=d.getSource(),ct=d.getDeclutter(),dt=rt.getTileGrid(),bt=rt.getTileGridForProjection(a).getTileCoordExtent(e.wrappedTileCoord),xt=rt.getSourceTiles(s,a,e),wt=getUid(d);delete e.hitDetectionImageData[wt],e.executorGroups[wt]=[],ct&&(e.declutterExecutorGroups[wt]=[]),nt.dirty=!1;for(let Tt=0,Rt=xt.length;Tt<Rt;++Tt){const Mt=xt[Tt];if(Mt.getState()!=TileState.LOADED)continue;const Et=Mt.tileCoord,$t=dt.getTileCoordExtent(Et),Xt=getIntersection(bt,$t),Zt=buffer(Xt,d.getRenderBuffer()*_e,this.tmpExtent),Nt=equals$1($t,Xt)?null:Zt,Jt=new BuilderGroup(0,Zt,_e,s),dn=ct?new BuilderGroup(0,Xt,_e,s):void 0,Pn=getSquaredTolerance(_e,s),an=function(It){let Vn;const ln=It.getStyleFunction()||d.getStyleFunction();if(ln&&(Vn=ln(It,_e)),Vn){const uo=this.renderFeature(It,Pn,Vn,Jt,dn);nt.dirty=nt.dirty||uo}},Vt=Mt.getFeatures();_&&_!==nt.renderedRenderOrder&&Vt.sort(_);for(let It=0,Vn=Vt.length;It<Vn;++It){const ln=Vt[It];(!Nt||intersects$1(Nt,ln.getGeometry().getExtent()))&&an.call(this,ln)}const ao=Jt.finish(),hn=d.getRenderMode()!=="vector"&&ct&&xt.length===1?null:Xt,fn=new ExecutorGroup(hn,_e,s,rt.getOverlaps(),ao,d.getRenderBuffer());if(e.executorGroups[wt].push(fn),dn){const It=new ExecutorGroup(null,_e,s,rt.getOverlaps(),dn.finish(),d.getRenderBuffer());e.declutterExecutorGroups[wt].push(It)}}nt.renderedRevision=b,nt.renderedRenderOrder=_,nt.renderedResolution=_e}forEachFeatureAtCoordinate(e,s,a,d,b){const _=s.viewState.resolution,_e=s.viewState.rotation;a=a??0;const nt=this.getLayer(),ct=nt.getSource().getTileGridForProjection(s.viewState.projection),dt=boundingExtent([e]);buffer(dt,_*a,dt);const pt={},bt=function(Tt,Rt,Mt){let Et=Tt.getId();Et===void 0&&(Et=getUid(Tt));const $t=pt[Et];if($t){if($t!==!0&&Mt<$t.distanceSq){if(Mt===0)return pt[Et]=!0,b.splice(b.lastIndexOf($t),1),d(Tt,nt,Rt);$t.geometry=Rt,$t.distanceSq=Mt}}else{if(Mt===0)return pt[Et]=!0,d(Tt,nt,Rt);b.push(pt[Et]={feature:Tt,layer:nt,geometry:Rt,distanceSq:Mt,callback:d})}},xt=this.renderedTiles;let wt;for(let Tt=0,Rt=xt.length;!wt&&Tt<Rt;++Tt){const Mt=xt[Tt],Et=ct.getTileCoordExtent(Mt.wrappedTileCoord);if(!intersects$1(Et,dt))continue;const $t=getUid(nt),Xt=[Mt.executorGroups[$t]],Zt=Mt.declutterExecutorGroups[$t];Zt&&Xt.push(Zt),Xt.some(Nt=>{const Jt=Nt===Zt?s.declutterTree.all().map(dn=>dn.value):null;for(let dn=0,Pn=Nt.length;dn<Pn;++dn)if(wt=Nt[dn].forEachFeatureAtCoordinate(e,_,_e,a,bt,Jt),wt)return!0})}return wt}getFeatures(e){return new Promise((s,a)=>{const d=this.getLayer(),b=getUid(d),_=d.getSource(),_e=this.renderedProjection,nt=_e.getExtent(),rt=this.renderedResolution,ct=_.getTileGridForProjection(_e),dt=apply$1(this.renderedPixelToCoordinateTransform_,e.slice()),pt=ct.getTileCoordForCoordAndResolution(dt,rt);let bt;for(let Et=0,$t=this.renderedTiles.length;Et<$t;++Et)if(pt.toString()===this.renderedTiles[Et].tileCoord.toString()){if(bt=this.renderedTiles[Et],bt.getState()===TileState.LOADED){const Xt=ct.getTileCoordExtent(bt.tileCoord);_.getWrapX()&&_e.canWrapX()&&!containsExtent(nt,Xt)&&wrapX$1(dt,_e);break}bt=void 0}if(!bt||bt.loadingSourceTiles>0){s([]);return}const xt=ct.getTileCoordExtent(bt.wrappedTileCoord),wt=getTopLeft(xt),Tt=[(dt[0]-wt[0])/rt,(wt[1]-dt[1])/rt],Rt=bt.getSourceTiles().reduce(function(Et,$t){return Et.concat($t.getFeatures())},[]);let Mt=bt.hitDetectionImageData[b];if(!Mt){const Et=toSize(ct.getTileSize(ct.getZForResolution(rt,_.zDirection))),$t=this.renderedRotation_,Xt=[this.getRenderTransform(ct.getTileCoordCenter(bt.wrappedTileCoord),rt,0,HIT_DETECT_RESOLUTION,Et[0]*HIT_DETECT_RESOLUTION,Et[1]*HIT_DETECT_RESOLUTION,0)];Mt=createHitDetectionImageData(Et,Xt,Rt,d.getStyleFunction(),ct.getTileCoordExtent(bt.wrappedTileCoord),bt.getReplayState(d).renderedResolution,$t),bt.hitDetectionImageData[b]=Mt}s(hitDetect(Tt,Rt,Mt))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e){const s=this.context,a=s.globalAlpha;s.globalAlpha=this.getLayer().getOpacity();const d=e.viewHints,b=!(d[ViewHint.ANIMATING]||d[ViewHint.INTERACTING]),_=this.renderedTiles;for(let _e=0,nt=_.length;_e<nt;++_e){const rt=_[_e],ct=rt.declutterExecutorGroups[getUid(this.getLayer())];if(ct)for(let dt=ct.length-1;dt>=0;--dt)ct[dt].execute(this.context,1,this.getTileRenderTransform(rt,e),e.viewState.rotation,b,void 0,e.declutterTree)}s.globalAlpha=a}getTileRenderTransform(e,s){const a=s.pixelRatio,d=s.viewState,b=d.center,_=d.resolution,_e=d.rotation,nt=s.size,rt=Math.round(nt[0]*a),ct=Math.round(nt[1]*a),pt=this.getLayer().getSource().getTileGridForProjection(s.viewState.projection),bt=e.tileCoord,xt=pt.getTileCoordExtent(e.wrappedTileCoord),wt=pt.getTileCoordExtent(bt,this.tmpExtent)[0]-xt[0];return multiply(scale$2(this.inversePixelTransform.slice(),1/a,1/a),this.getRenderTransform(b,_,_e,a,rt,ct,wt))}postRender(e,s){const a=s.viewHints,d=!(a[ViewHint.ANIMATING]||a[ViewHint.INTERACTING]);this.renderedPixelToCoordinateTransform_=s.pixelToCoordinateTransform.slice(),this.renderedRotation_=s.viewState.rotation;const b=this.getLayer(),_=b.getRenderMode(),_e=e.globalAlpha;e.globalAlpha=b.getOpacity();const nt=VECTOR_REPLAYS[_],rt=s.viewState,ct=rt.rotation,dt=b.getSource(),bt=dt.getTileGridForProjection(rt.projection).getZForResolution(rt.resolution,dt.zDirection),xt=this.renderedTiles,wt=[],Tt=[];let Rt=!0;for(let Mt=xt.length-1;Mt>=0;--Mt){const Et=xt[Mt];Rt=Rt&&!Et.getReplayState(b).dirty;const $t=Et.executorGroups[getUid(b)].filter(dn=>dn.hasExecutors(nt));if($t.length===0)continue;const Xt=this.getTileRenderTransform(Et,s),Zt=Et.tileCoord[0];let Nt=!1;const Jt=$t[0].getClipCoords(Xt);if(Jt){for(let dn=0,Pn=wt.length;dn<Pn;++dn)if(bt!==Zt&&Zt<Tt[dn]){const an=wt[dn];intersects$1([Jt[0],Jt[3],Jt[4],Jt[7]],[an[0],an[3],an[4],an[7]])&&(Nt||(e.save(),Nt=!0),e.beginPath(),e.moveTo(Jt[0],Jt[1]),e.lineTo(Jt[2],Jt[3]),e.lineTo(Jt[4],Jt[5]),e.lineTo(Jt[6],Jt[7]),e.moveTo(an[6],an[7]),e.lineTo(an[4],an[5]),e.lineTo(an[2],an[3]),e.lineTo(an[0],an[1]),e.clip())}wt.push(Jt),Tt.push(Zt)}for(let dn=0,Pn=$t.length;dn<Pn;++dn)$t[dn].execute(e,1,Xt,ct,d,nt);Nt&&e.restore()}e.globalAlpha=_e,this.ready=Rt,super.postRender(e,s)}renderFeature(e,s,a,d,b){if(!a)return!1;let _=!1;if(Array.isArray(a))for(let _e=0,nt=a.length;_e<nt;++_e)_=renderFeature$1(d,e,a[_e],s,this.boundHandleStyleImageChange_,void 0,b)||_;else _=renderFeature$1(d,e,a,s,this.boundHandleStyleImageChange_,void 0,b);return _}tileImageNeedsRender_(e){const s=this.getLayer();if(s.getRenderMode()==="vector")return!1;const a=e.getReplayState(s),d=s.getRevision(),b=e.wantedResolution;return a.renderedTileResolution!==b||a.renderedTileRevision!==d}renderTileImage_(e,s){const a=this.getLayer(),d=e.getReplayState(a),b=a.getRevision(),_=e.executorGroups[getUid(a)];d.renderedTileRevision=b;const _e=e.wrappedTileCoord,nt=_e[0],rt=a.getSource();let ct=s.pixelRatio;const pt=s.viewState.projection,bt=rt.getTileGridForProjection(pt),xt=bt.getResolution(e.tileCoord[0]),wt=s.pixelRatio/e.wantedResolution*xt,Tt=bt.getResolution(nt),Rt=e.getContext(a);ct=Math.round(Math.max(ct,wt/ct));const Mt=rt.getTilePixelSize(nt,ct,pt);Rt.canvas.width=Mt[0],Rt.canvas.height=Mt[1];const Et=ct/wt;if(Et!==1){const Nt=reset(this.tmpTransform_);scale$2(Nt,Et,Et),Rt.setTransform.apply(Rt,Nt)}const $t=bt.getTileCoordExtent(_e,this.tmpExtent),Xt=wt/Tt,Zt=reset(this.tmpTransform_);scale$2(Zt,Xt,-Xt),translate$1(Zt,-$t[0],-$t[3]);for(let Nt=0,Jt=_.length;Nt<Jt;++Nt)_[Nt].execute(Rt,Et,Zt,0,!0,IMAGE_REPLAYS[a.getRenderMode()]);d.renderedTileResolution=e.wantedResolution}}class VectorTileLayer extends BaseVectorLayer{constructor(e){e=e||{};const s=Object.assign({},e);delete s.preload,delete s.useInterimTilesOnError,super(s),this.on,this.once,this.un;const a=e.renderMode||"hybrid";assert(a=="hybrid"||a=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=a,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new CanvasVectorTileLayerRenderer(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(TileProperty.PRELOAD)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(TileProperty.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}}let VectorTile$1=class extends Tile{constructor(e,s,a,d,b,_){super(e,s,_),this.extent=null,this.format_=d,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=b,this.url_=a,this.key=a}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==TileState.IDLE&&(this.setState(TileState.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,s){this.setFeatures(e)}onError(){this.setState(TileState.ERROR)}setFeatures(e){this.features_=e,this.setState(TileState.LOADED)}setLoader(e){this.loader_=e}};const canvasPool=[];class VectorRenderTile extends Tile{constructor(e,s,a,d){super(e,s,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=d.bind(void 0,this),this.wrappedTileCoord=a}getContext(e){const s=getUid(e);return s in this.context_||(this.context_[s]=createCanvasContext2D(1,1,canvasPool)),this.context_[s]}hasContext(e){return getUid(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const s=getUid(e);return s in this.replayState_||(this.replayState_[s]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[s]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const s=this.context_[e];releaseCanvas(s),canvasPool.push(s.canvas),delete this.context_[e]}super.release()}}let withCredentials=!1;function loadFeaturesXhr(o,e,s,a,d,b,_){const _e=new XMLHttpRequest;_e.open("GET",typeof o=="function"?o(s,a,d):o,!0),e.getType()=="arraybuffer"&&(_e.responseType="arraybuffer"),_e.withCredentials=withCredentials,_e.onload=function(nt){if(!_e.status||_e.status>=200&&_e.status<300){const rt=e.getType();let ct;rt=="json"?ct=JSON.parse(_e.responseText):rt=="text"?ct=_e.responseText:rt=="xml"?(ct=_e.responseXML,ct||(ct=new DOMParser().parseFromString(_e.responseText,"application/xml"))):rt=="arraybuffer"&&(ct=_e.response),ct?b(e.readFeatures(ct,{extent:s,featureProjection:d}),e.readProjection(ct)):_()}else _()},_e.onerror=_,_e.send()}function xhr(o,e){return function(s,a,d,b,_){const _e=this;loadFeaturesXhr(o,e,s,a,d,function(nt,rt){_e.addFeatures(nt),b!==void 0&&b(nt)},_||VOID)}}class VectorTile extends UrlTile{constructor(e){const s=e.projection||"EPSG:3857",a=e.extent||extentFromProjection(s),d=e.tileGrid||createXYZ({extent:a,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:s,state:e.state,tileGrid:d,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultLoadFunction,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new TileCache(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:VectorTile$1,this.tileGrids_={}}getFeaturesInExtent(e){const s=[],a=this.tileCache;if(a.getCount()===0)return s;const d=fromKey(a.peekFirstKey())[0],b=this.tileGrid;return a.forEach(function(_){if(_.tileCoord[0]!==d||_.getState()!==TileState.LOADED)return;const _e=_.getSourceTiles();for(let nt=0,rt=_e.length;nt<rt;++nt){const ct=_e[nt],dt=ct.tileCoord;if(intersects$1(e,b.getTileCoordExtent(dt))){const pt=ct.getFeatures();if(pt)for(let bt=0,xt=pt.length;bt<xt;++bt){const wt=pt[bt],Tt=wt.getGeometry();intersects$1(e,Tt.getExtent())&&s.push(wt)}}}}),s}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,s){const a=this.getTileCacheForProjection(e),d=Object.keys(s).reduce((b,_)=>{const _e=getCacheKeyForTileKey(_),nt=a.peek(_e);if(nt){const rt=nt.sourceTiles;for(let ct=0,dt=rt.length;ct<dt;++ct)b[rt[ct].getKey()]=!0}return b},{});super.expireCache(e,s),this.sourceTileCache.expireCache(d)}getSourceTiles(e,s,a){if(a.getState()===TileState.IDLE){a.setState(TileState.LOADING);const d=a.wrappedTileCoord,b=this.getTileGridForProjection(s),_=b.getTileCoordExtent(d),_e=d[0],nt=b.getResolution(_e);buffer(_,-nt,_);const rt=this.tileGrid,ct=rt.getExtent();ct&&getIntersection(_,ct,_);const dt=rt.getZForResolution(nt,this.zDirection);rt.forEachTileCoord(_,dt,pt=>{const bt=this.tileUrlFunction(pt,e,s),xt=this.sourceTileCache.containsKey(bt)?this.sourceTileCache.get(bt):new this.tileClass(pt,bt?TileState.IDLE:TileState.EMPTY,bt,this.format_,this.tileLoadFunction);a.sourceTiles.push(xt);const wt=xt.getState();if(wt<TileState.LOADED){const Tt=Rt=>{this.handleTileChange(Rt);const Mt=xt.getState();if(Mt===TileState.LOADED||Mt===TileState.ERROR){const Et=xt.getKey();Et in a.errorTileKeys?xt.getState()===TileState.LOADED&&delete a.errorTileKeys[Et]:a.loadingSourceTiles--,Mt===TileState.ERROR?a.errorTileKeys[Et]=!0:xt.removeEventListener(EventType.CHANGE,Tt),a.loadingSourceTiles===0&&a.setState(isEmpty$1(a.errorTileKeys)?TileState.LOADED:TileState.ERROR)}};xt.addEventListener(EventType.CHANGE,Tt),a.loadingSourceTiles++}wt===TileState.IDLE&&(xt.extent=rt.getTileCoordExtent(pt),xt.projection=s,xt.resolution=rt.getResolution(pt[0]),this.sourceTileCache.set(bt,xt),xt.load())}),a.loadingSourceTiles||a.setState(a.sourceTiles.some(pt=>pt.getState()===TileState.ERROR)?TileState.ERROR:TileState.LOADED)}return a.sourceTiles}getTile(e,s,a,d,b){const _=getKeyZXY(e,s,a),_e=this.getKey();let nt;if(this.tileCache.containsKey(_)&&(nt=this.tileCache.get(_),nt.key===_e))return nt;const rt=[e,s,a];let ct=this.getTileCoordForTileUrlFunction(rt,b);const dt=this.getTileGrid().getExtent(),pt=this.getTileGridForProjection(b);if(ct&&dt){const wt=pt.getTileCoordExtent(ct);buffer(wt,-pt.getResolution(e),wt),intersects$1(dt,wt)||(ct=null)}let bt=!0;if(ct!==null){const wt=this.tileGrid,Tt=pt.getResolution(e),Rt=wt.getZForResolution(Tt,1),Mt=pt.getTileCoordExtent(ct);buffer(Mt,-Tt,Mt),wt.forEachTileCoord(Mt,Rt,Et=>{bt=bt&&!this.tileUrlFunction(Et,d,b)})}const xt=new VectorRenderTile(rt,bt?TileState.EMPTY:TileState.IDLE,ct,this.getSourceTiles.bind(this,d,b));return xt.key=_e,nt?(xt.interimTile=nt,xt.refreshInterimChain(),this.tileCache.replace(_,xt)):this.tileCache.set(_,xt),xt}getTileGridForProjection(e){const s=e.getCode();let a=this.tileGrids_[s];if(!a){const d=this.tileGrid,b=d.getResolutions().slice(),_=b.map(function(rt,ct){return d.getOrigin(ct)}),_e=b.map(function(rt,ct){return d.getTileSize(ct)}),nt=DEFAULT_MAX_ZOOM+1;for(let rt=b.length;rt<nt;++rt)b.push(b[rt-1]/2),_.push(_[rt-1]),_e.push(_e[rt-1]);a=new TileGrid({extent:d.getExtent(),origins:_,resolutions:b,tileSizes:_e}),this.tileGrids_[s]=a}return a}getTilePixelRatio(e){return e}getTilePixelSize(e,s,a){const d=this.getTileGridForProjection(a),b=toSize(d.getTileSize(e),this.tmpSize);return[Math.round(b[0]*s),Math.round(b[1]*s)]}updateCacheSize(e,s){super.updateCacheSize(e*2,s),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(s).highWaterMark}}function defaultLoadFunction(o,e){o.setLoader(function(s,a,d){loadFeaturesXhr(e,o.getFormat(),s,a,d,o.onLoad.bind(o),o.onError.bind(o))})}function jsonp(o,e,s,a){const d=document.createElement("script"),b="olc_"+getUid(e);function _(){delete window[b],d.parentNode.removeChild(d)}d.async=!0,d.src=o+(o.includes("?")?"&":"?")+"callback="+b;const _e=setTimeout(function(){_(),s&&s()},1e4);window[b]=function(nt){clearTimeout(_e),_(),e(nt)},document.head.appendChild(d)}class TileJSON extends TileImage{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:get$3("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const s=new XMLHttpRequest;s.addEventListener("load",this.onXHRLoad_.bind(this)),s.addEventListener("error",this.onXHRError_.bind(this)),s.open("GET",e.url),s.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const s=e.target;if(!s.status||s.status>=200&&s.status<300){let a;try{a=JSON.parse(s.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(a)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const s=get$3("EPSG:4326"),a=this.getProjection();let d;if(e.bounds!==void 0){const rt=getTransformFromProjections(s,a);d=applyTransform(e.bounds,rt)}const b=extentFromProjection(a),_=e.minzoom||0,_e=e.maxzoom||22,nt=createXYZ({extent:b,maxZoom:_e,minZoom:_,tileSize:this.tileSize_});if(this.tileGrid=nt,this.tileUrlFunction=createFromTemplates(e.tiles,nt),e.attribution&&!this.getAttributions()){const rt=d!==void 0?d:b;this.setAttributions(function(ct){return intersects$1(rt,ct.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class Feature extends BaseObject{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const s=e;this.setGeometry(s)}else{const s=e;this.setProperties(s)}}clone(){const e=new Feature(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const s=this.getGeometry();s&&e.setGeometry(s.clone());const a=this.getStyle();return a&&e.setStyle(a),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(o){if(typeof o=="function")return o;let e;return Array.isArray(o)?e=o:(assert(typeof o.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[o]),function(){return e}}class Circle extends SimpleGeometry{constructor(e,s,a){super(),a!==void 0&&s===void 0?this.setFlatCoordinates(a,e):(s=s||0,this.setCenterAndRadius(e,s,a))}clone(){const e=new Circle(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,s,a,d){const b=this.flatCoordinates,_=e-b[0],_e=s-b[1],nt=_*_+_e*_e;if(nt<d){if(nt===0)for(let rt=0;rt<this.stride;++rt)a[rt]=b[rt];else{const rt=this.getRadius()/Math.sqrt(nt);a[0]=b[0]+rt*_,a[1]=b[1]+rt*_e;for(let ct=2;ct<this.stride;++ct)a[ct]=b[ct]}return a.length=this.stride,nt}return d}containsXY(e,s){const a=this.flatCoordinates,d=e-a[0],b=s-a[1];return d*d+b*b<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const s=this.flatCoordinates,a=s[this.stride]-s[0];return createOrUpdate$2(s[0]-a,s[1]-a,s[0]+a,s[1]+a,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],s=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+s*s}getType(){return"Circle"}intersectsExtent(e){const s=this.getExtent();if(intersects$1(e,s)){const a=this.getCenter();return e[0]<=a[0]&&e[2]>=a[0]||e[1]<=a[1]&&e[3]>=a[1]?!0:forEachCorner(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const s=this.stride,a=this.flatCoordinates[s]-this.flatCoordinates[0],d=e.slice();d[s]=d[0]+a;for(let b=1;b<s;++b)d[s+b]=e[b];this.setFlatCoordinates(this.layout,d),this.changed()}setCenterAndRadius(e,s,a){this.setLayout(a,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const d=this.flatCoordinates;let b=deflateCoordinate(d,0,e,this.stride);d[b++]=d[0]+s;for(let _=1,_e=this.stride;_<_e;++_)d[b++]=d[_];d.length=b,this.changed()}getCoordinates(){return null}setCoordinates(e,s){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,s){const a=this.getCenter(),d=this.getStride();this.setCenter(rotate(a,0,a.length,d,e,s,a)),this.changed()}}Circle.prototype.transform;class GeometryCollection extends Geometry{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,s=this.geometries_.length;e<s;++e)this.changeEventsKeys_.push(listen(this.geometries_[e],EventType.CHANGE,this.changed,this))}clone(){const e=new GeometryCollection(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,s,a,d){if(d<closestSquaredDistanceXY(this.getExtent(),e,s))return d;const b=this.geometries_;for(let _=0,_e=b.length;_<_e;++_)d=b[_].closestPointXY(e,s,a,d);return d}containsXY(e,s){const a=this.geometries_;for(let d=0,b=a.length;d<b;++d)if(a[d].containsXY(e,s))return!0;return!1}computeExtent(e){createOrUpdateEmpty(e);const s=this.geometries_;for(let a=0,d=s.length;a<d;++a)extend$3(e,s[a].getExtent());return e}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const s=this.geometries_;for(let a=0,d=s.length;a<d;++a)s[a].getType()===this.getType()?e=e.concat(s[a].getGeometriesArrayRecursive()):e.push(s[a]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const s=[],a=this.geometries_;let d=!1;for(let b=0,_=a.length;b<_;++b){const _e=a[b],nt=_e.getSimplifiedGeometry(e);s.push(nt),nt!==_e&&(d=!0)}if(d){const b=new GeometryCollection(null);return b.setGeometriesArray(s),b}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const s=this.geometries_;for(let a=0,d=s.length;a<d;++a)if(s[a].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,s){const a=this.geometries_;for(let d=0,b=a.length;d<b;++d)a[d].rotate(e,s);this.changed()}scale(e,s,a){a||(a=getCenter(this.getExtent()));const d=this.geometries_;for(let b=0,_=d.length;b<_;++b)d[b].scale(e,s,a);this.changed()}setGeometries(e){this.setGeometriesArray(cloneGeometries(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const s=this.geometries_;for(let a=0,d=s.length;a<d;++a)s[a].applyTransform(e);this.changed()}translate(e,s){const a=this.geometries_;for(let d=0,b=a.length;d<b;++d)a[d].translate(e,s);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(o){const e=[];for(let s=0,a=o.length;s<a;++s)e.push(o[s].clone());return e}function interpolatePoint(o,e,s,a,d,b,_){let _e,nt;const rt=(s-e)/a;if(rt===1)_e=e;else if(rt===2)_e=e,nt=d;else if(rt!==0){let ct=o[e],dt=o[e+1],pt=0;const bt=[0];for(let Tt=e+a;Tt<s;Tt+=a){const Rt=o[Tt],Mt=o[Tt+1];pt+=Math.sqrt((Rt-ct)*(Rt-ct)+(Mt-dt)*(Mt-dt)),bt.push(pt),ct=Rt,dt=Mt}const xt=d*pt,wt=binarySearch$1(bt,xt);wt<0?(nt=(xt-bt[-wt-2])/(bt[-wt-1]-bt[-wt-2]),_e=e+(-wt-2)*a):_e=e+wt*a}_=_>1?_:2,b=b||new Array(_);for(let ct=0;ct<_;++ct)b[ct]=_e===void 0?NaN:nt===void 0?o[_e+ct]:lerp(o[_e+ct],o[_e+a+ct],nt);return b}function lineStringCoordinateAtM(o,e,s,a,d,b){if(s==e)return null;let _;if(d<o[e+a-1])return b?(_=o.slice(e,e+a),_[a-1]=d,_):null;if(o[s-1]<d)return b?(_=o.slice(s-a,s),_[a-1]=d,_):null;if(d==o[e+a-1])return o.slice(e,e+a);let _e=e/a,nt=s/a;for(;_e<nt;){const pt=_e+nt>>1;d<o[(pt+1)*a-1]?nt=pt:_e=pt+1}const rt=o[_e*a-1];if(d==rt)return o.slice((_e-1)*a,(_e-1)*a+a);const ct=o[(_e+1)*a-1],dt=(d-rt)/(ct-rt);_=[];for(let pt=0;pt<a-1;++pt)_.push(lerp(o[(_e-1)*a+pt],o[_e*a+pt],dt));return _.push(d),_}function lineStringsCoordinateAtM(o,e,s,a,d,b,_){if(_)return lineStringCoordinateAtM(o,e,s[s.length-1],a,d,b);let _e;if(d<o[a-1])return b?(_e=o.slice(0,a),_e[a-1]=d,_e):null;if(o[o.length-1]<d)return b?(_e=o.slice(o.length-a),_e[a-1]=d,_e):null;for(let nt=0,rt=s.length;nt<rt;++nt){const ct=s[nt];if(e!=ct){if(d<o[e+a-1])return null;if(d<=o[ct-1])return lineStringCoordinateAtM(o,e,ct,a,d,!1);e=ct}}return null}class LineString extends SimpleGeometry{constructor(e,s){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,s!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(s,e):this.setCoordinates(e,s)}appendCoordinate(e){extend$4(this.flatCoordinates,e),this.changed()}clone(){const e=new LineString(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,s,a,d){return d<closestSquaredDistanceXY(this.getExtent(),e,s)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,s,a,d))}forEachSegment(e){return forEach$1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,s){return this.layout!="XYM"&&this.layout!="XYZM"?null:(s=s!==void 0?s:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,s))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,s){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,s,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const s=[];return s.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,s,0),new LineString(s,"XY")}getType(){return"LineString"}intersectsExtent(e){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,s){this.setLayout(s,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class MultiLineString extends SimpleGeometry{constructor(e,s,a){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,s);else if(s!==void 0&&a)this.setFlatCoordinates(s,e),this.ends_=a;else{const d=e,b=[],_=[];for(let nt=0,rt=d.length;nt<rt;++nt){const ct=d[nt];extend$4(b,ct.getFlatCoordinates()),_.push(b.length)}const _e=d.length===0?this.getLayout():d[0].getLayout();this.setFlatCoordinates(_e,b),this.ends_=_}}appendLineString(e){extend$4(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,s,a,d){return d<closestSquaredDistanceXY(this.getExtent(),e,s)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,s,a,d))}getCoordinateAtM(e,s,a){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(s=s!==void 0?s:!1,a=a!==void 0?a:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,s,a))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new LineString(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,s=this.ends_,a=this.layout,d=[];let b=0;for(let _=0,_e=s.length;_<_e;++_){const nt=s[_],rt=new LineString(e.slice(b,nt),a);d.push(rt),b=nt}return d}getFlatMidpoints(){const e=[],s=this.flatCoordinates;let a=0;const d=this.ends_,b=this.stride;for(let _=0,_e=d.length;_<_e;++_){const nt=d[_],rt=interpolatePoint(s,a,nt,b,.5);extend$4(e,rt),a=nt}return e}getSimplifiedGeometryInternal(e){const s=[],a=[];return s.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,s,0,a),new MultiLineString(s,"XY",a)}getType(){return"MultiLineString"}intersectsExtent(e){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,s){this.setLayout(s,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const a=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=a.length===0?0:a[a.length-1],this.changed()}}class MultiPoint extends SimpleGeometry{constructor(e,s){super(),s&&!Array.isArray(e[0])?this.setFlatCoordinates(s,e):this.setCoordinates(e,s)}appendPoint(e){extend$4(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new MultiPoint(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,s,a,d){if(d<closestSquaredDistanceXY(this.getExtent(),e,s))return d;const b=this.flatCoordinates,_=this.stride;for(let _e=0,nt=b.length;_e<nt;_e+=_){const rt=squaredDistance$1(e,s,b[_e],b[_e+1]);if(rt<d){d=rt;for(let ct=0;ct<_;++ct)a[ct]=b[_e+ct];a.length=_}}return d}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const s=this.flatCoordinates.length/this.stride;return e<0||s<=e?null:new Point$1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,s=this.layout,a=this.stride,d=[];for(let b=0,_=e.length;b<_;b+=a){const _e=new Point$1(e.slice(b,b+a),s);d.push(_e)}return d}getType(){return"MultiPoint"}intersectsExtent(e){const s=this.flatCoordinates,a=this.stride;for(let d=0,b=s.length;d<b;d+=a){const _=s[d],_e=s[d+1];if(containsXY(e,_,_e))return!0}return!1}setCoordinates(e,s){this.setLayout(s,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function linearRingss(o,e,s,a){const d=[];let b=createEmpty();for(let _=0,_e=s.length;_<_e;++_){const nt=s[_];b=createOrUpdateFromFlatCoordinates(o,e,nt[0],a),d.push((b[0]+b[2])/2,(b[1]+b[3])/2),e=nt[nt.length-1]}return d}class MultiPolygon extends SimpleGeometry{constructor(e,s,a){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!a&&!Array.isArray(e[0])){const d=e,b=[],_=[];for(let _e=0,nt=d.length;_e<nt;++_e){const rt=d[_e],ct=b.length,dt=rt.getEnds();for(let pt=0,bt=dt.length;pt<bt;++pt)dt[pt]+=ct;extend$4(b,rt.getFlatCoordinates()),_.push(dt)}s=d.length===0?this.getLayout():d[0].getLayout(),e=b,a=_}s!==void 0&&a?(this.setFlatCoordinates(s,e),this.endss_=a):this.setCoordinates(e,s)}appendPolygon(e){let s;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),s=e.getEnds().slice(),this.endss_.push();else{const a=this.flatCoordinates.length;extend$4(this.flatCoordinates,e.getFlatCoordinates()),s=e.getEnds().slice();for(let d=0,b=s.length;d<b;++d)s[d]+=a}this.endss_.push(s),this.changed()}clone(){const e=this.endss_.length,s=new Array(e);for(let d=0;d<e;++d)s[d]=this.endss_[d].slice();const a=new MultiPolygon(this.flatCoordinates.slice(),this.layout,s);return a.applyProperties(this),a}closestPointXY(e,s,a,d){return d<closestSquaredDistanceXY(this.getExtent(),e,s)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,s,a,d))}containsXY(e,s){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,s)}getArea(){return linearRingss$1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let s;return e!==void 0?(s=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(s,0,this.endss_,this.stride,e)):s=this.flatCoordinates,inflateMultiCoordinatesArray(s,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const s=[],a=[];return s.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),s,0,a),new MultiPolygon(s,"XY",a)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let s;if(e===0)s=0;else{const b=this.endss_[e-1];s=b[b.length-1]}const a=this.endss_[e].slice(),d=a[a.length-1];if(s!==0)for(let b=0,_=a.length;b<_;++b)a[b]-=s;return new Polygon(this.flatCoordinates.slice(s,d),this.layout,a)}getPolygons(){const e=this.layout,s=this.flatCoordinates,a=this.endss_,d=[];let b=0;for(let _=0,_e=a.length;_<_e;++_){const nt=a[_].slice(),rt=nt[nt.length-1];if(b!==0)for(let dt=0,pt=nt.length;dt<pt;++dt)nt[dt]-=b;const ct=new Polygon(s.slice(b,rt),e,nt);d.push(ct),b=rt}return d}getType(){return"MultiPolygon"}intersectsExtent(e){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,s){this.setLayout(s,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const a=deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(a.length===0)this.flatCoordinates.length=0;else{const d=a[a.length-1];this.flatCoordinates.length=d.length===0?0:d[d.length-1]}this.changed()}}const tmpTransform=create();class RenderFeature{constructor(e,s,a,d,b,_){this.styleFunction,this.extent_,this.id_=_,this.type_=e,this.flatCoordinates_=s,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=a,this.properties_=b,this.squaredTolerance_,this.stride_=d,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=inflateEnds(this.flatCoordinates_,this.ends_),s=linearRingss(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,e,2,s)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let s=0;const a=this.ends_;for(let d=0,b=a.length;d<b;++d){const _=a[d],_e=interpolatePoint(e,s,_,2,.5);extend$4(this.flatMidpoints_,_e),s=_}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,s){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=get$3(e);const s=e.getExtent(),a=e.getWorldExtent();if(s&&a){const d=getHeight(a)/getHeight(s);compose(tmpTransform,a[0],a[3],d,-d,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new RenderFeature(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=memoizeOne((e,s)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),s&&this.simplifiedGeometry_.applyTransform(s);const a=this.simplifiedGeometry_.getFlatCoordinates();let d;switch(this.type_){case"LineString":a.length=douglasPeucker(a,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,a,0),d=[a.length];break;case"MultiLineString":d=[],a.length=douglasPeuckerArray(a,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,a,0,d);break;case"Polygon":d=[],a.length=quantizeArray(a,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),a,0,d);break}return d&&(this.simplifiedGeometry_=new RenderFeature(this.type_,a,d,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;class FeatureFormat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Feature,this.supportedMediaTypes=null}getReadOptions(e,s){if(s){let a=s.dataProjection?get$3(s.dataProjection):this.readProjection(e);s.extent&&a&&a.getUnits()==="tile-pixels"&&(a=get$3(a),a.setWorldExtent(s.extent)),s={dataProjection:a,featureProjection:s.featureProjection}}return this.adaptOptions(s)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return abstract()}readFeature(e,s){return abstract()}readFeatures(e,s){return abstract()}readGeometry(e,s){return abstract()}readProjection(e){return abstract()}writeFeature(e,s){return abstract()}writeFeatures(e,s){return abstract()}writeGeometry(e,s){return abstract()}}function transformGeometryWithOptions(o,e,s){const a=s?get$3(s.featureProjection):null,d=s?get$3(s.dataProjection):null;let b=o;if(a&&d&&!equivalent(a,d)){e&&(b=o.clone());const _=e?a:d,_e=e?d:a;_.getUnits()==="tile-pixels"?b.transform(_,_e):b.applyTransform(getTransform(_,_e))}if(e&&s&&s.decimals!==void 0){const _=Math.pow(10,s.decimals),_e=function(nt){for(let rt=0,ct=nt.length;rt<ct;++rt)nt[rt]=Math.round(nt[rt]*_)/_;return nt};b===o&&(b=o.clone()),b.applyTransform(_e)}return b}const GeometryConstructor={Point:Point$1,LineString,Polygon,MultiPoint,MultiLineString,MultiPolygon};function orientFlatCoordinates(o,e,s){return Array.isArray(e[0])?(linearRingssAreOriented(o,0,e,s)||(o=o.slice(),orientLinearRingsArray(o,0,e,s)),o):(linearRingsAreOriented(o,0,e,s)||(o=o.slice(),orientLinearRings(o,0,e,s)),o)}function createRenderFeature(o,e){var b;const s=o.geometry;if(!s)return[];if(Array.isArray(s))return s.map(_=>createRenderFeature({...o,geometry:_})).flat();const a=s.type==="MultiPolygon"?"Polygon":s.type;if(a==="GeometryCollection"||a==="Circle")throw new Error("Unsupported geometry type: "+a);const d=s.layout.length;return transformGeometryWithOptions(new RenderFeature(a,a==="Polygon"?orientFlatCoordinates(s.flatCoordinates,s.ends,d):s.flatCoordinates,(b=s.ends)==null?void 0:b.flat(),d,o.properties||{},o.id).enableSimplifyTransformed(),!1,e)}function createGeometry(o,e){if(!o)return null;if(Array.isArray(o)){const a=o.map(d=>createGeometry(d,e));return new GeometryCollection(a)}const s=GeometryConstructor[o.type];return transformGeometryWithOptions(new s(o.flatCoordinates,o.layout,o.ends),!1,e)}var ieee754$1={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754$1.read=function(o,e,s,a,d){var b,_,_e=d*8-a-1,nt=(1<<_e)-1,rt=nt>>1,ct=-7,dt=s?d-1:0,pt=s?-1:1,bt=o[e+dt];for(dt+=pt,b=bt&(1<<-ct)-1,bt>>=-ct,ct+=_e;ct>0;b=b*256+o[e+dt],dt+=pt,ct-=8);for(_=b&(1<<-ct)-1,b>>=-ct,ct+=a;ct>0;_=_*256+o[e+dt],dt+=pt,ct-=8);if(b===0)b=1-rt;else{if(b===nt)return _?NaN:(bt?-1:1)*(1/0);_=_+Math.pow(2,a),b=b-rt}return(bt?-1:1)*_*Math.pow(2,b-a)};ieee754$1.write=function(o,e,s,a,d,b){var _,_e,nt,rt=b*8-d-1,ct=(1<<rt)-1,dt=ct>>1,pt=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,bt=a?0:b-1,xt=a?1:-1,wt=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(_e=isNaN(e)?1:0,_=ct):(_=Math.floor(Math.log(e)/Math.LN2),e*(nt=Math.pow(2,-_))<1&&(_--,nt*=2),_+dt>=1?e+=pt/nt:e+=pt*Math.pow(2,1-dt),e*nt>=2&&(_++,nt/=2),_+dt>=ct?(_e=0,_=ct):_+dt>=1?(_e=(e*nt-1)*Math.pow(2,d),_=_+dt):(_e=e*Math.pow(2,dt-1)*Math.pow(2,d),_=0));d>=8;o[s+bt]=_e&255,bt+=xt,_e/=256,d-=8);for(_=_<<d|_e,rt+=d;rt>0;o[s+bt]=_&255,bt+=xt,_/=256,rt-=8);o[s+bt-xt]|=wt*128};var pbf=Pbf,ieee754=ieee754$1;function Pbf(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0;Pbf.Fixed64=1;Pbf.Bytes=2;Pbf.Fixed32=5;var SHIFT_LEFT_32=65536*65536,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,TEXT_DECODER_MIN_LENGTH=12,utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Pbf.prototype={destroy:function(){this.buf=null},readFields:function(o,e,s){for(s=s||this.length;this.pos<s;){var a=this.readVarint(),d=a>>3,b=this.pos;this.type=a&7,o(d,e,this),this.pos===b&&this.skip(a)}return e},readMessage:function(o,e){return this.readFields(o,e,this.readVarint()+this.pos)},readFixed32:function(){var o=readUInt32(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=readInt32(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,o},readSFixed64:function(){var o=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,o},readFloat:function(){var o=ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var e=this.buf,s,a;return a=e[this.pos++],s=a&127,a<128||(a=e[this.pos++],s|=(a&127)<<7,a<128)||(a=e[this.pos++],s|=(a&127)<<14,a<128)||(a=e[this.pos++],s|=(a&127)<<21,a<128)?s:(a=e[this.pos],s|=(a&15)<<28,readVarintRemainder(s,o,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2===1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,e=this.pos;return this.pos=o,o-e>=TEXT_DECODER_MIN_LENGTH&&utf8TextDecoder?readUtf8TextDecoder(this.buf,e,o):readUtf8(this.buf,e,o)},readBytes:function(){var o=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,o);return this.pos=o,e},readPackedVarint:function(o,e){if(this.type!==Pbf.Bytes)return o.push(this.readVarint(e));var s=readPackedEnd(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(e));return o},readPackedSVarint:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readSVarint());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readBoolean());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readFloat());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readDouble());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readFixed32());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readSFixed32());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readFixed64());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readSFixed64());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readSFixed64());return o},skip:function(o){var e=o&7;if(e===Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(e===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Pbf.Fixed32)this.pos+=4;else if(e===Pbf.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(o,e){this.writeVarint(o<<3|e)},realloc:function(o){for(var e=this.length||16;e<this.pos+o;)e*=2;if(e!==this.length){var s=new Uint8Array(e);s.set(this.buf),this.buf=s,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),writeInt32(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),writeInt32(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),writeInt32(this.buf,o&-1,this.pos),writeInt32(this.buf,Math.floor(o*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),writeInt32(this.buf,o&-1,this.pos),writeInt32(this.buf,Math.floor(o*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(o){if(o=+o||0,o>268435455||o<0){writeBigVarint(o,this);return}this.realloc(4),this.buf[this.pos++]=o&127|(o>127?128:0),!(o<=127)&&(this.buf[this.pos++]=(o>>>=7)&127|(o>127?128:0),!(o<=127)&&(this.buf[this.pos++]=(o>>>=7)&127|(o>127?128:0),!(o<=127)&&(this.buf[this.pos++]=o>>>7&127)))},writeSVarint:function(o){this.writeVarint(o<0?-o*2-1:o*2)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(o.length*4),this.pos++;var e=this.pos;this.pos=writeUtf8(this.buf,o,this.pos);var s=this.pos-e;s>=128&&makeRoomForExtraLength(e,s,this),this.pos=e-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),ieee754.write(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),ieee754.write(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var e=o.length;this.writeVarint(e),this.realloc(e);for(var s=0;s<e;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,e){this.pos++;var s=this.pos;o(e,this);var a=this.pos-s;a>=128&&makeRoomForExtraLength(s,a,this),this.pos=s-1,this.writeVarint(a),this.pos+=a},writeMessage:function(o,e,s){this.writeTag(o,Pbf.Bytes),this.writeRawMessage(e,s)},writePackedVarint:function(o,e){e.length&&this.writeMessage(o,writePackedVarint,e)},writePackedSVarint:function(o,e){e.length&&this.writeMessage(o,writePackedSVarint,e)},writePackedBoolean:function(o,e){e.length&&this.writeMessage(o,writePackedBoolean,e)},writePackedFloat:function(o,e){e.length&&this.writeMessage(o,writePackedFloat,e)},writePackedDouble:function(o,e){e.length&&this.writeMessage(o,writePackedDouble,e)},writePackedFixed32:function(o,e){e.length&&this.writeMessage(o,writePackedFixed32,e)},writePackedSFixed32:function(o,e){e.length&&this.writeMessage(o,writePackedSFixed32,e)},writePackedFixed64:function(o,e){e.length&&this.writeMessage(o,writePackedFixed64,e)},writePackedSFixed64:function(o,e){e.length&&this.writeMessage(o,writePackedSFixed64,e)},writeBytesField:function(o,e){this.writeTag(o,Pbf.Bytes),this.writeBytes(e)},writeFixed32Field:function(o,e){this.writeTag(o,Pbf.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(o,e){this.writeTag(o,Pbf.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(o,e){this.writeTag(o,Pbf.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(o,e){this.writeTag(o,Pbf.Fixed64),this.writeSFixed64(e)},writeVarintField:function(o,e){this.writeTag(o,Pbf.Varint),this.writeVarint(e)},writeSVarintField:function(o,e){this.writeTag(o,Pbf.Varint),this.writeSVarint(e)},writeStringField:function(o,e){this.writeTag(o,Pbf.Bytes),this.writeString(e)},writeFloatField:function(o,e){this.writeTag(o,Pbf.Fixed32),this.writeFloat(e)},writeDoubleField:function(o,e){this.writeTag(o,Pbf.Fixed64),this.writeDouble(e)},writeBooleanField:function(o,e){this.writeVarintField(o,!!e)}};function readVarintRemainder(o,e,s){var a=s.buf,d,b;if(b=a[s.pos++],d=(b&112)>>4,b<128||(b=a[s.pos++],d|=(b&127)<<3,b<128)||(b=a[s.pos++],d|=(b&127)<<10,b<128)||(b=a[s.pos++],d|=(b&127)<<17,b<128)||(b=a[s.pos++],d|=(b&127)<<24,b<128)||(b=a[s.pos++],d|=(b&1)<<31,b<128))return toNum(o,d,e);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(o){return o.type===Pbf.Bytes?o.readVarint()+o.pos:o.pos+1}function toNum(o,e,s){return s?e*4294967296+(o>>>0):(e>>>0)*4294967296+(o>>>0)}function writeBigVarint(o,e){var s,a;if(o>=0?(s=o%4294967296|0,a=o/4294967296|0):(s=~(-o%4294967296),a=~(-o/4294967296),s^4294967295?s=s+1|0:(s=0,a=a+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),writeBigVarintLow(s,a,e),writeBigVarintHigh(a,e)}function writeBigVarintLow(o,e,s){s.buf[s.pos++]=o&127|128,o>>>=7,s.buf[s.pos++]=o&127|128,o>>>=7,s.buf[s.pos++]=o&127|128,o>>>=7,s.buf[s.pos++]=o&127|128,o>>>=7,s.buf[s.pos]=o&127}function writeBigVarintHigh(o,e){var s=(o&7)<<4;e.buf[e.pos++]|=s|((o>>>=3)?128:0),o&&(e.buf[e.pos++]=o&127|((o>>>=7)?128:0),o&&(e.buf[e.pos++]=o&127|((o>>>=7)?128:0),o&&(e.buf[e.pos++]=o&127|((o>>>=7)?128:0),o&&(e.buf[e.pos++]=o&127|((o>>>=7)?128:0),o&&(e.buf[e.pos++]=o&127)))))}function makeRoomForExtraLength(o,e,s){var a=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));s.realloc(a);for(var d=s.pos-1;d>=o;d--)s.buf[d+a]=s.buf[d]}function writePackedVarint(o,e){for(var s=0;s<o.length;s++)e.writeVarint(o[s])}function writePackedSVarint(o,e){for(var s=0;s<o.length;s++)e.writeSVarint(o[s])}function writePackedFloat(o,e){for(var s=0;s<o.length;s++)e.writeFloat(o[s])}function writePackedDouble(o,e){for(var s=0;s<o.length;s++)e.writeDouble(o[s])}function writePackedBoolean(o,e){for(var s=0;s<o.length;s++)e.writeBoolean(o[s])}function writePackedFixed32(o,e){for(var s=0;s<o.length;s++)e.writeFixed32(o[s])}function writePackedSFixed32(o,e){for(var s=0;s<o.length;s++)e.writeSFixed32(o[s])}function writePackedFixed64(o,e){for(var s=0;s<o.length;s++)e.writeFixed64(o[s])}function writePackedSFixed64(o,e){for(var s=0;s<o.length;s++)e.writeSFixed64(o[s])}function readUInt32(o,e){return(o[e]|o[e+1]<<8|o[e+2]<<16)+o[e+3]*16777216}function writeInt32(o,e,s){o[s]=e,o[s+1]=e>>>8,o[s+2]=e>>>16,o[s+3]=e>>>24}function readInt32(o,e){return(o[e]|o[e+1]<<8|o[e+2]<<16)+(o[e+3]<<24)}function readUtf8(o,e,s){for(var a="",d=e;d<s;){var b=o[d],_=null,_e=b>239?4:b>223?3:b>191?2:1;if(d+_e>s)break;var nt,rt,ct;_e===1?b<128&&(_=b):_e===2?(nt=o[d+1],(nt&192)===128&&(_=(b&31)<<6|nt&63,_<=127&&(_=null))):_e===3?(nt=o[d+1],rt=o[d+2],(nt&192)===128&&(rt&192)===128&&(_=(b&15)<<12|(nt&63)<<6|rt&63,(_<=2047||_>=55296&&_<=57343)&&(_=null))):_e===4&&(nt=o[d+1],rt=o[d+2],ct=o[d+3],(nt&192)===128&&(rt&192)===128&&(ct&192)===128&&(_=(b&15)<<18|(nt&63)<<12|(rt&63)<<6|ct&63,(_<=65535||_>=1114112)&&(_=null))),_===null?(_=65533,_e=1):_>65535&&(_-=65536,a+=String.fromCharCode(_>>>10&1023|55296),_=56320|_&1023),a+=String.fromCharCode(_),d+=_e}return a}function readUtf8TextDecoder(o,e,s){return utf8TextDecoder.decode(o.subarray(e,s))}function writeUtf8(o,e,s){for(var a=0,d,b;a<e.length;a++){if(d=e.charCodeAt(a),d>55295&&d<57344)if(b)if(d<56320){o[s++]=239,o[s++]=191,o[s++]=189,b=d;continue}else d=b-55296<<10|d-56320|65536,b=null;else{d>56319||a+1===e.length?(o[s++]=239,o[s++]=191,o[s++]=189):b=d;continue}else b&&(o[s++]=239,o[s++]=191,o[s++]=189,b=null);d<128?o[s++]=d:(d<2048?o[s++]=d>>6|192:(d<65536?o[s++]=d>>12|224:(o[s++]=d>>18|240,o[s++]=d>>12&63|128),o[s++]=d>>6&63|128),o[s++]=d&63|128)}return s}const PBF=getDefaultExportFromCjs$2(pbf);class MVT extends FeatureFormat{constructor(e){super(),e=e||{},this.dataProjection=new Projection$1({code:"",units:"tile-pixels"}),this.featureClass_=e.featureClass?e.featureClass:RenderFeature,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,s,a,d){e.pos=s.geometry;const b=e.readVarint()+e.pos;let _=1,_e=0,nt=0,rt=0,ct=0,dt=0;for(;e.pos<b;){if(!_e){const pt=e.readVarint();_=pt&7,_e=pt>>3}if(_e--,_===1||_===2)nt+=e.readSVarint(),rt+=e.readSVarint(),_===1&&ct>dt&&(d.push(ct),dt=ct),a.push(nt,rt),ct+=2;else if(_===7)ct>dt&&(a.push(a[dt],a[dt+1]),ct+=2);else throw new Error("Invalid command found in the PBF")}ct>dt&&(d.push(ct),dt=ct)}createFeature_(e,s,a){const d=s.type;if(d===0)return null;let b;const _=s.properties;let _e;this.idProperty_?(_e=_[this.idProperty_],delete _[this.idProperty_]):_e=s.id,_[this.layerName_]=s.layer.name;const nt=[],rt=[];this.readRawGeometry_(e,s,nt,rt);const ct=getGeometryType(d,rt.length);if(this.featureClass_===RenderFeature)b=new this.featureClass_(ct,nt,rt,2,_,_e),b.transform(a.dataProjection);else{let dt;if(ct=="Polygon"){const xt=inflateEnds(nt,rt);dt=xt.length>1?new MultiPolygon(nt,"XY",xt):new Polygon(nt,"XY",rt)}else dt=ct==="Point"?new Point$1(nt,"XY"):ct==="LineString"?new LineString(nt,"XY"):ct==="MultiPoint"?new MultiPoint(nt,"XY"):ct==="MultiLineString"?new MultiLineString(nt,"XY",rt):null;const pt=this.featureClass_;b=new pt,this.geometryName_&&b.setGeometryName(this.geometryName_);const bt=transformGeometryWithOptions(dt,!1,a);b.setGeometry(bt),_e!==void 0&&b.setId(_e),b.setProperties(_,!0)}return b}getType(){return"arraybuffer"}readFeatures(e,s){const a=this.layers_;s=this.adaptOptions(s);const d=get$3(s.dataProjection);d.setWorldExtent(s.extent),s.dataProjection=d;const b=new PBF(e),_=b.readFields(layersPBFReader,{}),_e=[];for(const nt in _){if(a&&!a.includes(nt))continue;const rt=_[nt],ct=rt?[0,0,rt.extent,rt.extent]:null;d.setExtent(ct);for(let dt=0,pt=rt.length;dt<pt;++dt){const bt=readRawFeature(b,rt,dt),xt=this.createFeature_(b,bt,s);xt!==null&&_e.push(xt)}}return _e}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function layersPBFReader(o,e,s){if(o===3){const a={keys:[],values:[],features:[]},d=s.readVarint()+s.pos;s.readFields(layerPBFReader,a,d),a.length=a.features.length,a.length&&(e[a.name]=a)}}function layerPBFReader(o,e,s){if(o===15)e.version=s.readVarint();else if(o===1)e.name=s.readString();else if(o===5)e.extent=s.readVarint();else if(o===2)e.features.push(s.pos);else if(o===3)e.keys.push(s.readString());else if(o===4){let a=null;const d=s.readVarint()+s.pos;for(;s.pos<d;)o=s.readVarint()>>3,a=o===1?s.readString():o===2?s.readFloat():o===3?s.readDouble():o===4?s.readVarint64():o===5?s.readVarint():o===6?s.readSVarint():o===7?s.readBoolean():null;e.values.push(a)}}function featurePBFReader(o,e,s){if(o==1)e.id=s.readVarint();else if(o==2){const a=s.readVarint()+s.pos;for(;s.pos<a;){const d=e.layer.keys[s.readVarint()],b=e.layer.values[s.readVarint()];e.properties[d]=b}}else o==3?e.type=s.readVarint():o==4&&(e.geometry=s.pos)}function readRawFeature(o,e,s){o.pos=e.features[s];const a=o.readVarint()+o.pos,d={layer:e,type:0,properties:{}};return o.readFields(featurePBFReader,d,a),d}function getGeometryType(o,e){let s;return o===1?s=e===1?"Point":"MultiPoint":o===2?s=e===1?"LineString":"MultiLineString":o===3&&(s="Polygon"),s}const CollectionEventType={ADD:"add",REMOVE:"remove"},Property$2={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(e,s,a){super(e),this.element=s,this.index=a}}class Collection extends BaseObject{constructor(e,s){if(super(),this.on,this.once,this.un,s=s||{},this.unique_=!!s.unique,this.array_=e||[],this.unique_)for(let a=0,d=this.array_.length;a<d;++a)this.assertUnique_(this.array_[a],a);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let s=0,a=e.length;s<a;++s)this.push(e[s]);return this}forEach(e){const s=this.array_;for(let a=0,d=s.length;a<d;++a)e(s[a],a,s)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Property$2.LENGTH)}insertAt(e,s){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(s),this.array_.splice(e,0,s),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,s,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const s=this.getLength();return this.insertAt(s,e),this.getLength()}remove(e){const s=this.array_;for(let a=0,d=s.length;a<d;++a)if(s[a]===e)return this.removeAt(a)}removeAt(e){if(e<0||e>=this.getLength())return;const s=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,s,e)),s}setAt(e,s){const a=this.getLength();if(e>=a){this.insertAt(e,s);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(s,e);const d=this.array_[e];this.array_[e]=s,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,d,e)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,s,e))}updateLength_(){this.set(Property$2.LENGTH,this.array_.length)}assertUnique_(e,s){for(let a=0,d=this.array_.length;a<d;++a)if(this.array_[a]===e&&a!==s)throw new Error("Duplicate item added to a unique collection")}}class CanvasVectorLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=createEmpty(),this.wrappedRenderedExtent_=createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,s,a){const d=s.extent,b=s.viewState,_=b.center,_e=b.resolution,nt=b.projection,rt=b.rotation,ct=nt.getExtent(),dt=this.getLayer().getSource(),pt=s.pixelRatio,bt=s.viewHints,xt=!(bt[ViewHint.ANIMATING]||bt[ViewHint.INTERACTING]),wt=this.compositionContext_,Tt=Math.round(s.size[0]*pt),Rt=Math.round(s.size[1]*pt),Mt=dt.getWrapX()&&nt.canWrapX(),Et=Mt?getWidth(ct):null,$t=Mt?Math.ceil((d[2]-ct[2])/Et)+1:1;let Xt=Mt?Math.floor((d[0]-ct[0])/Et):0;do{const Zt=this.getRenderTransform(_,_e,rt,pt,Tt,Rt,Xt*Et);e.execute(wt,1,Zt,rt,xt,void 0,a)}while(++Xt<$t)}setupCompositionContext_(){if(this.opacity_!==1){const e=createCanvasContext2D(this.context.canvas.width,this.context.canvas.height,canvasPool$2);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,releaseCanvas(this.compositionContext_),canvasPool$2.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,s){const a=e.pixelRatio,d=e.layerStatesArray[e.layerIndex];makeScale(this.pixelTransform,1/a,1/a),makeInverse(this.inversePixelTransform,this.pixelTransform);const b=toString$3(this.pixelTransform);this.useContainer(s,b,this.getBackground(e));const _=this.context,_e=_.canvas,nt=this.replayGroup_,rt=this.declutterExecutorGroup;let ct=nt&&!nt.isEmpty()||rt&&!rt.isEmpty();if(!ct&&!(this.getLayer().hasListener(RenderEventType.PRERENDER)||this.getLayer().hasListener(RenderEventType.POSTRENDER)))return null;const dt=Math.round(e.size[0]*a),pt=Math.round(e.size[1]*a);_e.width!=dt||_e.height!=pt?(_e.width=dt,_e.height=pt,_e.style.transform!==b&&(_e.style.transform=b)):this.containerReused||_.clearRect(0,0,dt,pt),this.preRender(_,e);const bt=e.viewState;bt.projection,this.opacity_=d.opacity,this.setupCompositionContext_();let xt=!1;if(ct&&d.extent&&this.clipping){const wt=fromUserExtent(d.extent);ct=intersects$1(wt,e.extent),xt=ct&&!containsExtent(wt,e.extent),xt&&this.clipUnrotated(this.compositionContext_,e,wt)}return ct&&this.renderWorlds(nt,e),xt&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(_,e),this.renderedRotation_!==bt.rotation&&(this.renderedRotation_=bt.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(s=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const a=[this.context.canvas.width,this.context.canvas.height];apply$1(this.pixelTransform,a);const d=this.renderedCenter_,b=this.renderedResolution_,_=this.renderedRotation_,_e=this.renderedProjection_,nt=this.wrappedRenderedExtent_,rt=this.getLayer(),ct=[],dt=a[0]*HIT_DETECT_RESOLUTION,pt=a[1]*HIT_DETECT_RESOLUTION;ct.push(this.getRenderTransform(d,b,_,HIT_DETECT_RESOLUTION,dt,pt,0).slice());const bt=rt.getSource(),xt=_e.getExtent();if(bt.getWrapX()&&_e.canWrapX()&&!containsExtent(xt,nt)){let wt=nt[0];const Tt=getWidth(xt);let Rt=0,Mt;for(;wt<xt[0];)--Rt,Mt=Tt*Rt,ct.push(this.getRenderTransform(d,b,_,HIT_DETECT_RESOLUTION,dt,pt,Mt).slice()),wt+=Tt;for(Rt=0,wt=nt[2];wt>xt[2];)++Rt,Mt=Tt*Rt,ct.push(this.getRenderTransform(d,b,_,HIT_DETECT_RESOLUTION,dt,pt,Mt).slice()),wt-=Tt}this.hitDetectionImageData_=createHitDetectionImageData(a,ct,this.renderedFeatures_,rt.getStyleFunction(),nt,b,_)}s(hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,s,a,d,b){if(!this.replayGroup_)return;const _=s.viewState.resolution,_e=s.viewState.rotation,nt=this.getLayer(),rt={},ct=function(bt,xt,wt){const Tt=getUid(bt),Rt=rt[Tt];if(Rt){if(Rt!==!0&&wt<Rt.distanceSq){if(wt===0)return rt[Tt]=!0,b.splice(b.lastIndexOf(Rt),1),d(bt,nt,xt);Rt.geometry=xt,Rt.distanceSq=wt}}else{if(wt===0)return rt[Tt]=!0,d(bt,nt,xt);b.push(rt[Tt]={feature:bt,layer:nt,geometry:xt,distanceSq:wt,callback:d})}};let dt;const pt=[this.replayGroup_];return this.declutterExecutorGroup&&pt.push(this.declutterExecutorGroup),pt.some(bt=>dt=bt.forEachFeatureAtCoordinate(e,_,_e,a,ct,bt===this.declutterExecutorGroup&&s.declutterTree?s.declutterTree.all().map(xt=>xt.value):null)),dt}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const s=this.getLayer(),a=s.getSource();if(!a)return!1;const d=e.viewHints[ViewHint.ANIMATING],b=e.viewHints[ViewHint.INTERACTING],_=s.getUpdateWhileAnimating(),_e=s.getUpdateWhileInteracting();if(this.ready&&!_&&d||!_e&&b)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const nt=e.extent,rt=e.viewState,ct=rt.projection,dt=rt.resolution,pt=e.pixelRatio,bt=s.getRevision(),xt=s.getRenderBuffer();let wt=s.getRenderOrder();wt===void 0&&(wt=defaultOrder);const Tt=rt.center.slice(),Rt=buffer(nt,xt*dt),Mt=Rt.slice(),Et=[Rt.slice()],$t=ct.getExtent();if(a.getWrapX()&&ct.canWrapX()&&!containsExtent($t,e.extent)){const fn=getWidth($t),It=Math.max(getWidth(Rt)/2,fn);Rt[0]=$t[0]-It,Rt[2]=$t[2]+It,wrapX$1(Tt,ct);const Vn=wrapX$2(Et[0],ct);Vn[0]<$t[0]&&Vn[2]<$t[2]?Et.push([Vn[0]+fn,Vn[1],Vn[2]+fn,Vn[3]]):Vn[0]>$t[0]&&Vn[2]>$t[2]&&Et.push([Vn[0]-fn,Vn[1],Vn[2]-fn,Vn[3]])}if(this.ready&&this.renderedResolution_==dt&&this.renderedRevision_==bt&&this.renderedRenderOrder_==wt&&containsExtent(this.wrappedRenderedExtent_,Rt))return equals$2(this.renderedExtent_,Mt)||(this.hitDetectionImageData_=null,this.renderedExtent_=Mt),this.renderedCenter_=Tt,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const Xt=new BuilderGroup(getTolerance(dt,pt),Rt,dt,pt);let Zt;this.getLayer().getDeclutter()&&(Zt=new BuilderGroup(getTolerance(dt,pt),Rt,dt,pt));let Nt;for(let fn=0,It=Et.length;fn<It;++fn)a.loadFeatures(Et[fn],dt,ct);const Jt=getSquaredTolerance(dt,pt);let dn=!0;const Pn=fn=>{let It;const Vn=fn.getStyleFunction()||s.getStyleFunction();if(Vn&&(It=Vn(fn,dt)),It){const ln=this.renderFeature(fn,Jt,It,Xt,Nt,Zt);dn=dn&&!ln}},an=toUserExtent(Rt),Vt=a.getFeaturesInExtent(an);wt&&Vt.sort(wt);for(let fn=0,It=Vt.length;fn<It;++fn)Pn(Vt[fn]);this.renderedFeatures_=Vt,this.ready=dn;const ao=Xt.finish(),hn=new ExecutorGroup(Rt,dt,pt,a.getOverlaps(),ao,s.getRenderBuffer());return Zt&&(this.declutterExecutorGroup=new ExecutorGroup(Rt,dt,pt,a.getOverlaps(),Zt.finish(),s.getRenderBuffer())),this.renderedResolution_=dt,this.renderedRevision_=bt,this.renderedRenderOrder_=wt,this.renderedExtent_=Mt,this.wrappedRenderedExtent_=Rt,this.renderedCenter_=Tt,this.renderedProjection_=ct,this.replayGroup_=hn,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,s,a,d,b,_){if(!a)return!1;let _e=!1;if(Array.isArray(a))for(let nt=0,rt=a.length;nt<rt;++nt)_e=renderFeature$1(d,e,a[nt],s,this.boundHandleStyleImageChange_,b,_)||_e;else _e=renderFeature$1(d,e,a,s,this.boundHandleStyleImageChange_,b,_);return _e}}class VectorLayer extends BaseVectorLayer{constructor(e){super(e)}createRenderer(){return new CanvasVectorLayerRenderer(this)}}class RBush{constructor(e){this.rbush_=new RBush$1(e),this.items_={}}insert(e,s){const a={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:s};this.rbush_.insert(a),this.items_[getUid(s)]=a}load(e,s){const a=new Array(s.length);for(let d=0,b=s.length;d<b;d++){const _=e[d],_e=s[d],nt={minX:_[0],minY:_[1],maxX:_[2],maxY:_[3],value:_e};a[d]=nt,this.items_[getUid(_e)]=nt}this.rbush_.load(a)}remove(e){const s=getUid(e),a=this.items_[s];return delete this.items_[s],this.rbush_.remove(a)!==null}update(e,s){const a=this.items_[getUid(s)],d=[a.minX,a.minY,a.maxX,a.maxY];equals$1(d,e)||(this.remove(s),this.insert(e,s))}getAll(){return this.rbush_.all().map(function(s){return s.value})}getInExtent(e){const s={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(s).map(function(d){return d.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,s){return this.forEach_(this.getInExtent(e),s)}forEach_(e,s){let a;for(let d=0,b=e.length;d<b;d++)if(a=s(e[d]),a)return a;return a}isEmpty(){return isEmpty$1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const s=this.rbush_.toJSON();return createOrUpdate$2(s.minX,s.minY,s.maxX,s.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const s in e.items_)this.items_[s]=e.items_[s]}}const VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function all$1(o,e){return[[-1/0,-1/0,1/0,1/0]]}function bbox(o,e){return[o]}class VectorSourceEvent extends BaseEvent{constructor(e,s,a){super(e),this.feature=s,this.features=a}}class VectorSource extends Source{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=VOID,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(assert(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:all$1;const s=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=s?new RBush:null,this.loadedExtentsRtree_=new RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let a,d;Array.isArray(e.features)?d=e.features:e.features&&(a=e.features,d=a.getArray()),!s&&a===void 0&&(a=new Collection(d)),d!==void 0&&this.addFeaturesInternal(d),a!==void 0&&this.bindFeaturesCollection_(a)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const s=getUid(e);if(!this.addToIndex_(s,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(s,e);const a=e.getGeometry();if(a){const d=a.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(d,e)}else this.nullGeometryFeatures_[s]=e;this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,e))}setupChangeEvents_(e,s){s instanceof RenderFeature||(this.featureChangeKeys_[e]=[listen(s,EventType.CHANGE,this.handleFeatureChange_,this),listen(s,ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,s){let a=!0;if(s.getId()!==void 0){const d=String(s.getId());if(!(d in this.idIndex_))this.idIndex_[d]=s;else if(s instanceof RenderFeature){const b=this.idIndex_[d];b instanceof RenderFeature?Array.isArray(b)?b.push(s):this.idIndex_[d]=[b,s]:a=!1}else a=!1}return a&&(assert(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=s),a}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const s=[],a=[],d=[];for(let b=0,_=e.length;b<_;b++){const _e=e[b],nt=getUid(_e);this.addToIndex_(nt,_e)&&a.push(_e)}for(let b=0,_=a.length;b<_;b++){const _e=a[b],nt=getUid(_e);this.setupChangeEvents_(nt,_e);const rt=_e.getGeometry();if(rt){const ct=rt.getExtent();s.push(ct),d.push(_e)}else this.nullGeometryFeatures_[nt]=_e}if(this.featuresRtree_&&this.featuresRtree_.load(s,d),this.hasListener(VectorEventType.ADDFEATURE))for(let b=0,_=a.length;b<_;b++)this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,a[b]))}bindFeaturesCollection_(e){let s=!1;this.addEventListener(VectorEventType.ADDFEATURE,function(a){s||(s=!0,e.push(a.feature),s=!1)}),this.addEventListener(VectorEventType.REMOVEFEATURE,function(a){s||(s=!0,e.remove(a.feature),s=!1)}),e.addEventListener(CollectionEventType.ADD,a=>{s||(s=!0,this.addFeature(a.element),s=!1)}),e.addEventListener(CollectionEventType.REMOVE,a=>{s||(s=!0,this.removeFeature(a.element),s=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const a in this.featureChangeKeys_)this.featureChangeKeys_[a].forEach(unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const a=d=>{this.removeFeatureInternal(d)};this.featuresRtree_.forEach(a);for(const d in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[d])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const s=new VectorSourceEvent(VectorEventType.CLEAR);this.dispatchEvent(s),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,s){const a=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(a,function(d){const b=d.getGeometry();if(b instanceof RenderFeature||b.intersectsCoordinate(e))return s(d)})}forEachFeatureInExtent(e,s){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,s);this.featuresCollection_&&this.featuresCollection_.forEach(s)}forEachFeatureIntersectingExtent(e,s){return this.forEachFeatureInExtent(e,function(a){const d=a.getGeometry();if(d instanceof RenderFeature||d.intersectsExtent(e)){const b=s(a);if(b)return b}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),isEmpty$1(this.nullGeometryFeatures_)||extend$4(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const s=[];return this.forEachFeatureAtCoordinateDirect(e,function(a){s.push(a)}),s}getFeaturesInExtent(e,s){if(this.featuresRtree_){if(!(s&&s.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const d=wrapAndSliceX(e,s);return[].concat(...d.map(b=>this.featuresRtree_.getInExtent(b)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,s){const a=e[0],d=e[1];let b=null;const _=[NaN,NaN];let _e=1/0;const nt=[-1/0,-1/0,1/0,1/0];return s=s||TRUE,this.featuresRtree_.forEachInExtent(nt,function(rt){if(s(rt)){const ct=rt.getGeometry(),dt=_e;if(_e=ct instanceof RenderFeature?0:ct.closestPointXY(a,d,_,_e),_e<dt){b=rt;const pt=Math.sqrt(_e);nt[0]=a-pt,nt[1]=d-pt,nt[2]=a+pt,nt[3]=d+pt}}}),b}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const s=this.idIndex_[e.toString()];return s!==void 0?s:null}getFeatureByUid(e){const s=this.uidIndex_[e];return s!==void 0?s:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const s=e.target,a=getUid(s),d=s.getGeometry();if(!d)a in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(s),this.nullGeometryFeatures_[a]=s);else{const _=d.getExtent();a in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[a],this.featuresRtree_&&this.featuresRtree_.insert(_,s)):this.featuresRtree_&&this.featuresRtree_.update(_,s)}const b=s.getId();if(b!==void 0){const _=b.toString();this.idIndex_[_]!==s&&(this.removeFromIdIndex_(s),this.idIndex_[_]=s)}else this.removeFromIdIndex_(s),this.uidIndex_[a]=s;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE,s))}hasFeature(e){const s=e.getId();return s!==void 0?s in this.idIndex_:getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&isEmpty$1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,s,a){const d=this.loadedExtentsRtree_,b=this.strategy_(e,s,a);for(let _=0,_e=b.length;_<_e;++_){const nt=b[_];d.forEachInExtent(nt,function(ct){return containsExtent(ct.extent,nt)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)),this.loader_.call(this,nt,s,a,ct=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND,void 0,ct))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR))}),d.insert(nt,{extent:nt.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const s=this.loadedExtentsRtree_;let a;s.forEachInExtent(e,function(d){if(equals$1(d.extent,e))return a=d,!0}),a&&s.remove(a)}removeFeature(e){if(!e)return;const s=getUid(e);s in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[s]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const s=getUid(e),a=this.featureChangeKeys_[s];if(!a)return;a.forEach(unlistenByKey),delete this.featureChangeKeys_[s];const d=e.getId();return d!==void 0&&delete this.idIndex_[d.toString()],delete this.uidIndex_[s],this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let s=!1;for(const a in this.idIndex_){const d=this.idIndex_[a];if(e instanceof RenderFeature&&Array.isArray(d)&&d.includes(e))d.splice(d.indexOf(e),1);else if(this.idIndex_[a]===e){delete this.idIndex_[a],s=!0;break}}return s}setLoader(e){this.loader_=e}setUrl(e){assert(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xhr(e,this.format_))}}class Kinetic{constructor(e,s,a){this.decay_=e,this.minVelocity_=s,this.delay_=a,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,s){this.points_.push(e,s,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,s=this.points_.length-3;if(this.points_[s+2]<e)return!1;let a=s-3;for(;a>0&&this.points_[a+2]>e;)a-=3;const d=this.points_[s+2]-this.points_[a+2];if(d<1e3/60)return!1;const b=this.points_[s]-this.points_[a],_=this.points_[s+1]-this.points_[a+1];return this.angle_=Math.atan2(_,b),this.initialVelocity_=Math.sqrt(b*b+_*_)/d,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,s){abstract()}calculateMatrices2D(e){const s=e.viewState,a=e.coordinateToPixelTransform,d=e.pixelToCoordinateTransform;compose(a,e.size[0]/2,e.size[1]/2,1/s.resolution,-1/s.resolution,-s.rotation,-s.center[0],-s.center[1]),makeInverse(d,a)}forEachFeatureAtCoordinate(e,s,a,d,b,_,_e,nt){let rt;const ct=s.viewState;function dt($t,Xt,Zt,Nt){return b.call(_,Xt,$t?Zt:null,Nt)}const pt=ct.projection,bt=wrapX$1(e.slice(),pt),xt=[[0,0]];if(pt.canWrapX()&&d){const $t=pt.getExtent(),Xt=getWidth($t);xt.push([-Xt,0],[Xt,0])}const wt=s.layerStatesArray,Tt=wt.length,Rt=[],Mt=[];for(let $t=0;$t<xt.length;$t++)for(let Xt=Tt-1;Xt>=0;--Xt){const Zt=wt[Xt],Nt=Zt.layer;if(Nt.hasRenderer()&&inView(Zt,ct)&&_e.call(nt,Nt)){const Jt=Nt.getRenderer(),dn=Nt.getSource();if(Jt&&dn){const Pn=dn.getWrapX()?bt:e,an=dt.bind(null,Zt.managed);Mt[0]=Pn[0]+xt[$t][0],Mt[1]=Pn[1]+xt[$t][1],rt=Jt.forEachFeatureAtCoordinate(Mt,s,a,an,Rt)}if(rt)return rt}}if(Rt.length===0)return;const Et=1/Rt.length;return Rt.forEach(($t,Xt)=>$t.distanceSq+=Xt*Et),Rt.sort(($t,Xt)=>$t.distanceSq-Xt.distanceSq),Rt.some($t=>rt=$t.callback($t.feature,$t.layer,$t.geometry)),rt}hasFeatureAtCoordinate(e,s,a,d,b,_){return this.forEachFeatureAtCoordinate(e,s,a,d,TRUE,this,b,_)!==void 0}getMap(){return this.map_}renderFrame(e){abstract()}flushDeclutterItems(e){}scheduleExpireIconCache(e){shared.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(o,e){shared.expire()}class CompositeMapRenderer extends MapRenderer{constructor(e){super(e),this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const s=this.element_.style;s.position="absolute",s.width="100%",s.height="100%",s.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const a=e.getViewport();a.insertBefore(this.element_,a.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(e,s){const a=this.getMap();if(a.hasListener(e)){const d=new RenderEvent(e,void 0,s);a.dispatchEvent(d)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,e);const s=e.layerStatesArray.sort(function(_,_e){return _.zIndex-_e.zIndex}),a=e.viewState;this.children_.length=0;const d=this.declutterLayers_;d.length=0;let b=null;for(let _=0,_e=s.length;_<_e;++_){const nt=s[_];e.layerIndex=_;const rt=nt.layer,ct=rt.getSourceState();if(!inView(nt,a)||ct!="ready"&&ct!="undefined"){rt.unrender();continue}const dt=rt.render(e,b);dt&&(dt!==b&&(this.children_.push(dt),b=dt),"getDeclutter"in rt&&d.push(rt))}this.flushDeclutterItems(e),replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}flushDeclutterItems(e){const s=this.declutterLayers_;for(let a=s.length-1;a>=0;--a)s[a].renderDeclutter(e);s.length=0}}class GroupEvent extends BaseEvent{constructor(e,s){super(e),this.layer=s}}const Property$1={LAYERS:"layers"};class LayerGroup extends BaseLayer{constructor(e){e=e||{};const s=Object.assign({},e);delete s.layers;let a=e.layers;super(s),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property$1.LAYERS,this.handleLayersChanged_),a?Array.isArray(a)?a=new Collection(a.slice(),{unique:!0}):assert(typeof a.getArray=="function","Expected `layers` to be an array or a `Collection`"):a=new Collection(void 0,{unique:!0}),this.setLayers(a)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const a in this.listenerKeys_)this.listenerKeys_[a].forEach(unlistenByKey);clear$1(this.listenerKeys_);const s=e.getArray();for(let a=0,d=s.length;a<d;a++){const b=s[a];this.registerLayerListeners_(b),this.dispatchEvent(new GroupEvent("addlayer",b))}this.changed()}registerLayerListeners_(e){const s=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType.CHANGE,this.handleLayerChange_,this)];e instanceof LayerGroup&&s.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=s}handleLayerGroupAdd_(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))}handleLayersAdd_(e){const s=e.element;this.registerLayerListeners_(s),this.dispatchEvent(new GroupEvent("addlayer",s)),this.changed()}handleLayersRemove_(e){const s=e.element,a=getUid(s);this.listenerKeys_[a].forEach(unlistenByKey),delete this.listenerKeys_[a],this.dispatchEvent(new GroupEvent("removelayer",s)),this.changed()}getLayers(){return this.get(Property$1.LAYERS)}setLayers(e){const s=this.getLayers();if(s){const a=s.getArray();for(let d=0,b=a.length;d<b;++d)this.dispatchEvent(new GroupEvent("removelayer",a[d]))}this.set(Property$1.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(s){s.getLayersArray(e)}),e}getLayerStatesArray(e){const s=e!==void 0?e:[],a=s.length;this.getLayers().forEach(function(_){_.getLayerStatesArray(s)});const d=this.getLayerState();let b=d.zIndex;!e&&d.zIndex===void 0&&(b=0);for(let _=a,_e=s.length;_<_e;_++){const nt=s[_];nt.opacity*=d.opacity,nt.visible=nt.visible&&d.visible,nt.maxResolution=Math.min(nt.maxResolution,d.maxResolution),nt.minResolution=Math.max(nt.minResolution,d.minResolution),nt.minZoom=Math.max(nt.minZoom,d.minZoom),nt.maxZoom=Math.min(nt.maxZoom,d.maxZoom),d.extent!==void 0&&(nt.extent!==void 0?nt.extent=getIntersection(nt.extent,d.extent):nt.extent=d.extent),nt.zIndex===void 0&&(nt.zIndex=b)}return s}getSourceState(){return"ready"}}class MapEvent extends BaseEvent{constructor(e,s,a){super(e),this.map=s,this.frameState=a!==void 0?a:null}}class MapBrowserEvent extends MapEvent{constructor(e,s,a,d,b,_){super(e,s,b),this.originalEvent=a,this.pixel_=null,this.coordinate_=null,this.dragging=d!==void 0?d:!1,this.activePointers=_}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType.CLICK,DBLCLICK:EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class MapBrowserEventHandler extends Target{constructor(e,s){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=s===void 0?1:s,this.down_=null;const a=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=a,this.pointerdownListenerKey_=listen(a,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(a,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(e){let s=new MapBrowserEvent(MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(s),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,s=new MapBrowserEvent(MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(s)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const a=new MapBrowserEvent(MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(a)},250)}updateActivePointers_(e){const s=e,a=s.pointerId;if(s.type==MapBrowserEventType.POINTERUP||s.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[a];for(const d in this.trackedTouches_)if(this.trackedTouches_[d].target!==s.target){delete this.trackedTouches_[d];break}}else(s.type==MapBrowserEventType.POINTERDOWN||s.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[a]=s);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const s=new MapBrowserEvent(MapBrowserEventType.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(s),this.emulateClicks_&&!s.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const s=new MapBrowserEvent(MapBrowserEventType.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(s),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(a,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(a,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const s=new MapBrowserEvent(MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(s)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const s=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,this.map_,e,s))}handleTouchMove_(e){const s=this.originalPointerMoveEvent_;(!s||s.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},DROP=1/0;class PriorityQueue{constructor(e,s){this.priorityFunction_=e,this.keyFunction_=s,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear$1(this.queuedElements_)}dequeue(){const e=this.elements_,s=this.priorities_,a=e[0];e.length==1?(e.length=0,s.length=0):(e[0]=e.pop(),s[0]=s.pop(),this.siftUp_(0));const d=this.keyFunction_(a);return delete this.queuedElements_[d],a}enqueue(e){assert(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const s=this.priorityFunction_(e);return s!=DROP?(this.elements_.push(e),this.priorities_.push(s),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const s=this.elements_,a=this.priorities_,d=s.length,b=s[e],_=a[e],_e=e;for(;e<d>>1;){const nt=this.getLeftChildIndex_(e),rt=this.getRightChildIndex_(e),ct=rt<d&&a[rt]<a[nt]?rt:nt;s[e]=s[ct],a[e]=a[ct],e=ct}s[e]=b,a[e]=_,this.siftDown_(_e,e)}siftDown_(e,s){const a=this.elements_,d=this.priorities_,b=a[s],_=d[s];for(;s>e;){const _e=this.getParentIndex_(s);if(d[_e]>_)a[s]=a[_e],d[s]=d[_e],s=_e;else break}a[s]=b,d[s]=_}reprioritize(){const e=this.priorityFunction_,s=this.elements_,a=this.priorities_;let d=0;const b=s.length;let _,_e,nt;for(_e=0;_e<b;++_e)_=s[_e],nt=e(_),nt==DROP?delete this.queuedElements_[this.keyFunction_(_)]:(a[d]=nt,s[d++]=_);s.length=d,a.length=d,this.heapify_()}}class TileQueue extends PriorityQueue{constructor(e,s){super(function(a){return e.apply(null,a)},function(a){return a[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=s,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const s=super.enqueue(e);return s&&e[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_),s}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const s=e.target,a=s.getState();if(a===TileState.LOADED||a===TileState.ERROR||a===TileState.EMPTY){a!==TileState.ERROR&&s.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);const d=s.getKey();d in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[d],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,s){let a=0,d,b,_;for(;this.tilesLoading_<e&&a<s&&this.getCount()>0;)b=this.dequeue()[0],_=b.getKey(),d=b.getState(),d===TileState.IDLE&&!(_ in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[_]=!0,++this.tilesLoading_,++a,b.load())}}function getTilePriority(o,e,s,a,d){if(!o||!(s in o.wantedTiles)||!o.wantedTiles[s][e.getKey()])return DROP;const b=o.viewState.center,_=a[0]-b[0],_e=a[1]-b[1];return 65536*Math.log(d)+Math.sqrt(_*_+_e*_e)/d}class Attribution extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const s=e.className!==void 0?e.className:"ol-attribution",a=e.tipLabel!==void 0?e.tipLabel:"Attributions",d=e.expandClassName!==void 0?e.expandClassName:s+"-expand",b=e.collapseLabel!==void 0?e.collapseLabel:"",_=e.collapseClassName!==void 0?e.collapseClassName:s+"-collapse";typeof b=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=b,this.collapseLabel_.className=_):this.collapseLabel_=b;const _e=e.label!==void 0?e.label:"i";typeof _e=="string"?(this.label_=document.createElement("span"),this.label_.textContent=_e,this.label_.className=d):this.label_=_e;const nt=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=a,this.toggleButton_.appendChild(nt),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const rt=s+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),ct=this.element;ct.className=rt,ct.appendChild(this.toggleButton_),ct.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const s=Array.from(new Set(this.getMap().getAllLayers().flatMap(d=>d.getAttributions(e)))),a=!this.getMap().getAllLayers().some(d=>d.getSource()&&d.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(a),s}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const s=this.collectSourceAttributions_(e),a=s.length>0;if(this.renderedVisible_!=a&&(this.element.style.display=a?"":"none",this.renderedVisible_=a),!equals$2(s,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let d=0,b=s.length;d<b;++d){const _=document.createElement("li");_.innerHTML=s[d],this.ulElement_.appendChild(_)}this.renderedAttributions_=s}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Rotate extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const s=e.className!==void 0?e.className:"ol-rotate",a=e.label!==void 0?e.label:"",d=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof a=="string"?(this.label_=document.createElement("span"),this.label_.className=d,this.label_.textContent=a):(this.label_=a,this.label_.classList.add(d));const b=e.tipLabel?e.tipLabel:"Reset rotation",_=document.createElement("button");_.className=s+"-reset",_.setAttribute("type","button"),_.title=b,_.appendChild(this.label_),_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const _e=s+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,nt=this.element;nt.className=_e,nt.appendChild(_),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const s=this.getMap().getView();if(!s)return;const a=s.getRotation();a!==void 0&&(this.duration_>0&&a%(2*Math.PI)!==0?s.animate({rotation:0,duration:this.duration_,easing:easeOut}):s.setRotation(0))}render(e){const s=e.frameState;if(!s)return;const a=s.viewState.rotation;if(a!=this.rotation_){const d="rotate("+a+"rad)";if(this.autoHide_){const b=this.element.classList.contains(CLASS_HIDDEN);!b&&a===0?this.element.classList.add(CLASS_HIDDEN):b&&a!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=d}this.rotation_=a}}class Zoom extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const s=e.className!==void 0?e.className:"ol-zoom",a=e.delta!==void 0?e.delta:1,d=e.zoomInClassName!==void 0?e.zoomInClassName:s+"-in",b=e.zoomOutClassName!==void 0?e.zoomOutClassName:s+"-out",_=e.zoomInLabel!==void 0?e.zoomInLabel:"+",_e=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",nt=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",rt=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",ct=document.createElement("button");ct.className=d,ct.setAttribute("type","button"),ct.title=nt,ct.appendChild(typeof _=="string"?document.createTextNode(_):_),ct.addEventListener(EventType.CLICK,this.handleClick_.bind(this,a),!1);const dt=document.createElement("button");dt.className=b,dt.setAttribute("type","button"),dt.title=rt,dt.appendChild(typeof _e=="string"?document.createTextNode(_e):_e),dt.addEventListener(EventType.CLICK,this.handleClick_.bind(this,-a),!1);const pt=s+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,bt=this.element;bt.className=pt,bt.appendChild(ct),bt.appendChild(dt),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,s){s.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const a=this.getMap().getView();if(!a)return;const d=a.getZoom();if(d!==void 0){const b=a.getConstrainedZoom(d+e);this.duration_>0?(a.getAnimating()&&a.cancelAnimations(),a.animate({zoom:b,duration:this.duration_,easing:easeOut})):a.setZoom(b)}}}function defaults$2(o){o=o||{};const e=new Collection;return(o.zoom!==void 0?o.zoom:!0)&&e.push(new Zoom(o.zoomOptions)),(o.rotate!==void 0?o.rotate:!0)&&e.push(new Rotate(o.rotateOptions)),(o.attribution!==void 0?o.attribution:!0)&&e.push(new Attribution(o.attributionOptions)),e}const InteractionProperty={ACTIVE:"active"};class Interaction extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(InteractionProperty.ACTIVE,e)}setMap(e){this.map_=e}}function pan(o,e,s){const a=o.getCenterInternal();if(a){const d=[a[0]+e[0],a[1]+e[1]];o.animateInternal({duration:s!==void 0?s:250,easing:linear,center:o.getConstrainedCenter(d)})}}function zoomByDelta(o,e,s,a){const d=o.getZoom();if(d===void 0)return;const b=o.getConstrainedZoom(d+e),_=o.getResolutionForZoom(b);o.getAnimating()&&o.cancelAnimations(),o.animate({resolution:_,anchor:s,duration:a!==void 0?a:250,easing:easeOut})}class DoubleClickZoom extends Interaction{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let s=!1;if(e.type==MapBrowserEventType.DBLCLICK){const a=e.originalEvent,d=e.map,b=e.coordinate,_=a.shiftKey?-this.delta_:this.delta_,_e=d.getView();zoomByDelta(_e,_,b,this.duration_),a.preventDefault(),s=!0}return!s}}class PointerInteraction extends Interaction{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let s=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==MapBrowserEventType.POINTERUP){const a=this.handleUpEvent(e);this.handlingDownUpSequence=a&&this.targetPointers.length>0}}else if(e.type==MapBrowserEventType.POINTERDOWN){const a=this.handleDownEvent(e);this.handlingDownUpSequence=a,s=this.stopDown(a)}else e.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(e);return!s}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function centroid(o){const e=o.length;let s=0,a=0;for(let d=0;d<e;d++)s+=o[d].clientX,a+=o[d].clientY;return{clientX:s/e,clientY:a/e}}function all(o){const e=arguments;return function(s){let a=!0;for(let d=0,b=e.length;d<b&&(a=a&&e[d](s),!!a);++d);return a}}const altKeyOnly=function(o){const e=o.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly=function(o){const e=o.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus$1=function(o){const e=o.map.getTargetElement(),s=o.map.getOwnerDocument().activeElement;return e.contains(s)},focusWithTabindex=function(o){return o.map.getTargetElement().hasAttribute("tabindex")?focus$1(o):!0},always=TRUE,mouseActionButton=function(o){const e=o.originalEvent;return e.button==0&&!(WEBKIT&&MAC&&e.ctrlKey)},never=FALSE,singleClick=function(o){return o.type==MapBrowserEventType.SINGLECLICK},noModifierKeys=function(o){const e=o.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},platformModifierKey=function(o){const e=o.originalEvent;return MAC?e.metaKey:e.ctrlKey},shiftKeyOnly=function(o){const e=o.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(o){const e=o.originalEvent,s=e.target.tagName;return s!=="INPUT"&&s!=="SELECT"&&s!=="TEXTAREA"&&!e.target.isContentEditable},mouseOnly=function(o){const e=o.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},primaryAction=function(o){const e=o.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class DragPan extends PointerInteraction{constructor(e){super({stopDown:FALSE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const s=e.condition?e.condition:all(noModifierKeys,primaryAction);this.condition_=e.onFocusOnly?all(focusWithTabindex,s):s,this.noKinetic_=!1}handleDragEvent(e){const s=e.map;this.panning_||(this.panning_=!0,s.getView().beginInteraction());const a=this.targetPointers,d=s.getEventPixel(centroid(a));if(a.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(d[0],d[1]),this.lastCentroid){const b=[this.lastCentroid[0]-d[0],d[1]-this.lastCentroid[1]],_e=e.map.getView();scale$3(b,_e.getResolution()),rotate$1(b,_e.getRotation()),_e.adjustCenterInternal(b)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=d,this.lastPointersCount_=a.length,e.originalEvent.preventDefault()}handleUpEvent(e){const s=e.map,a=s.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const d=this.kinetic_.getDistance(),b=this.kinetic_.getAngle(),_=a.getCenterInternal(),_e=s.getPixelFromCoordinateInternal(_),nt=s.getCoordinateFromPixelInternal([_e[0]-d*Math.cos(b),_e[1]-d*Math.sin(b)]);a.animateInternal({center:a.getConstrainedCenter(nt),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,a.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const a=e.map.getView();return this.lastCentroid=null,a.getAnimating()&&a.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class DragRotate extends PointerInteraction{constructor(e){e=e||{},super({stopDown:FALSE}),this.condition_=e.condition?e.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mouseOnly(e))return;const s=e.map,a=s.getView();if(a.getConstraints().rotation===disable)return;const d=s.getSize(),b=e.pixel,_=Math.atan2(d[1]/2-b[1],b[0]-d[0]/2);if(this.lastAngle_!==void 0){const _e=_-this.lastAngle_;a.adjustRotationInternal(-_e)}this.lastAngle_=_}handleUpEvent(e){return mouseOnly(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mouseOnly(e)&&mouseActionButton(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class RenderBox extends Disposable{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,s=this.endPixel_,a="px",d=this.element_.style;d.left=Math.min(e[0],s[0])+a,d.top=Math.min(e[1],s[1])+a,d.width=Math.abs(s[0]-e[0])+a,d.height=Math.abs(s[1]-e[1])+a}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const s=this.element_.style;s.left="inherit",s.top="inherit",s.width="inherit",s.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,s){this.startPixel_=e,this.endPixel_=s,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,s=this.endPixel_,d=[e,[e[0],s[1]],s,[s[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);d[4]=d[0].slice(),this.geometry_?this.geometry_.setCoordinates([d]):this.geometry_=new Polygon([d])}getGeometry(){return this.geometry_}}const DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(e,s,a){super(e),this.coordinate=s,this.mapBrowserEvent=a}}class DragBox extends PointerInteraction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new RenderBox(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:mouseActionButton,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,s,a){const d=a[0]-s[0],b=a[1]-s[1];return d*d+b*b>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const s=this.boxEndCondition_(e,this.startPixel_,e.pixel);return s&&this.onBoxEnd(e),this.dispatchEvent(new DragBoxEvent(s?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}class DragZoom extends DragBox{constructor(e){e=e||{};const s=e.condition?e.condition:shiftKeyOnly;super({condition:s,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const a=this.getMap().getView();let d=this.getGeometry();if(this.out_){const b=a.rotatedExtentForGeometry(d),_=a.getResolutionForExtentInternal(b),_e=a.getResolution()/_;d=d.clone(),d.scale(_e*_e)}a.fitInternal(d,{duration:this.duration_,easing:easeOut})}}const Key={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KeyboardPan extends Interaction{constructor(e){super(),e=e||{},this.defaultCondition_=function(s){return noModifierKeys(s)&&targetNotEditable(s)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let s=!1;if(e.type==EventType.KEYDOWN){const a=e.originalEvent,d=a.key;if(this.condition_(e)&&(d==Key.DOWN||d==Key.LEFT||d==Key.RIGHT||d==Key.UP)){const _=e.map.getView(),_e=_.getResolution()*this.pixelDelta_;let nt=0,rt=0;d==Key.DOWN?rt=-_e:d==Key.LEFT?nt=-_e:d==Key.RIGHT?nt=_e:rt=_e;const ct=[nt,rt];rotate$1(ct,_.getRotation()),pan(_,ct,this.duration_),a.preventDefault(),s=!0}}return!s}}class KeyboardZoom extends Interaction{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(s){return!platformModifierKey(s)&&targetNotEditable(s)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let s=!1;if(e.type==EventType.KEYDOWN||e.type==EventType.KEYPRESS){const a=e.originalEvent,d=a.key;if(this.condition_(e)&&(d==="+"||d==="-")){const b=e.map,_=d==="+"?this.delta_:-this.delta_,_e=b.getView();zoomByDelta(_e,_,void 0,this.duration_),a.preventDefault(),s=!0}}return!s}}class MouseWheelZoom extends Interaction{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const s=e.condition?e.condition:always;this.condition_=e.onFocusOnly?all(focusWithTabindex,s):s,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==EventType.WHEEL)return!0;const a=e.map,d=e.originalEvent;d.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let b;if(e.type==EventType.WHEEL&&(b=d.deltaY,FIREFOX&&d.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(b/=DEVICE_PIXEL_RATIO),d.deltaMode===WheelEvent.DOM_DELTA_LINE&&(b*=40)),b===0)return!1;this.lastDelta_=b;const _=Date.now();this.startTime_===void 0&&(this.startTime_=_),(!this.mode_||_-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(b)<4?"trackpad":"wheel");const _e=a.getView();if(this.mode_==="trackpad"&&!(_e.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(_e.getAnimating()&&_e.cancelAnimations(),_e.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),_e.adjustZoom(-b/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=_,!1;this.totalDelta_+=b;const nt=Math.max(this.timeout_-(_-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,a),nt),!1}handleWheelZoom_(e){const s=e.getView();s.getAnimating()&&s.cancelAnimations();let a=-clamp(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(s.getConstrainResolution()||this.constrainResolution_)&&(a=a?a>0?1:-1:0),zoomByDelta(s,a,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class PinchRotate extends PointerInteraction{constructor(e){e=e||{};const s=e;s.stopDown||(s.stopDown=FALSE),super(s),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let s=0;const a=this.targetPointers[0],d=this.targetPointers[1],b=Math.atan2(d.clientY-a.clientY,d.clientX-a.clientX);if(this.lastAngle_!==void 0){const nt=b-this.lastAngle_;this.rotationDelta_+=nt,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),s=nt}this.lastAngle_=b;const _=e.map,_e=_.getView();_e.getConstraints().rotation!==disable&&(this.anchor_=_.getCoordinateFromPixelInternal(_.getEventPixel(centroid(this.targetPointers))),this.rotating_&&(_.render(),_e.adjustRotationInternal(s,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const s=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||s.getView().beginInteraction(),!0}return!1}}class PinchZoom extends PointerInteraction{constructor(e){e=e||{};const s=e;s.stopDown||(s.stopDown=FALSE),super(s),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let s=1;const a=this.targetPointers[0],d=this.targetPointers[1],b=a.clientX-d.clientX,_=a.clientY-d.clientY,_e=Math.sqrt(b*b+_*_);this.lastDistance_!==void 0&&(s=this.lastDistance_/_e),this.lastDistance_=_e;const nt=e.map,rt=nt.getView();s!=1&&(this.lastScaleDelta_=s),this.anchor_=nt.getCoordinateFromPixelInternal(nt.getEventPixel(centroid(this.targetPointers))),nt.render(),rt.adjustResolutionInternal(s,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const a=e.map.getView(),d=this.lastScaleDelta_>1?1:-1;return a.endInteraction(this.duration_,d),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const s=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||s.getView().beginInteraction(),!0}return!1}}function defaults$1(o){o=o||{};const e=new Collection,s=new Kinetic(-.005,.05,100);return(o.altShiftDragRotate!==void 0?o.altShiftDragRotate:!0)&&e.push(new DragRotate),(o.doubleClickZoom!==void 0?o.doubleClickZoom:!0)&&e.push(new DoubleClickZoom({delta:o.zoomDelta,duration:o.zoomDuration})),(o.dragPan!==void 0?o.dragPan:!0)&&e.push(new DragPan({onFocusOnly:o.onFocusOnly,kinetic:s})),(o.pinchRotate!==void 0?o.pinchRotate:!0)&&e.push(new PinchRotate),(o.pinchZoom!==void 0?o.pinchZoom:!0)&&e.push(new PinchZoom({duration:o.zoomDuration})),(o.keyboard!==void 0?o.keyboard:!0)&&(e.push(new KeyboardPan),e.push(new KeyboardZoom({delta:o.zoomDelta,duration:o.zoomDuration}))),(o.mouseWheelZoom!==void 0?o.mouseWheelZoom:!0)&&e.push(new MouseWheelZoom({onFocusOnly:o.onFocusOnly,duration:o.zoomDuration})),(o.shiftDragZoom!==void 0?o.shiftDragZoom:!0)&&e.push(new DragZoom({duration:o.zoomDuration})),e}function removeLayerMapProperty(o){if(o instanceof Layer){o.setMapInternal(null);return}o instanceof LayerGroup&&o.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(o,e){if(o instanceof Layer){o.setMapInternal(e);return}if(o instanceof LayerGroup){const s=o.getLayers().getArray();for(let a=0,d=s.length;a<d;++a)setLayerMapProperty(s[a],e)}}let Map$1=class extends BaseObject{constructor(e){super(),e=e||{},this.on,this.once,this.un;const s=createOptionsInternal(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create(),this.pixelToCoordinateTransform_=create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=s.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=s.controls||defaults$2(),this.interactions=s.interactions||defaults$1({onFocusOnly:!0}),this.overlays_=s.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(s.values);const a=this;e.view&&!(e.view instanceof View)&&e.view.then(function(d){a.setView(new View(d))}),this.controls.addEventListener(CollectionEventType.ADD,d=>{d.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.REMOVE,d=>{d.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.ADD,d=>{d.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.REMOVE,d=>{d.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.ADD,d=>{this.addOverlayInternal_(d.element)}),this.overlays_.addEventListener(CollectionEventType.REMOVE,d=>{const b=d.element.getId();b!==void 0&&delete this.overlayIdIndex_[b.toString()],d.element.setMap(null)}),this.controls.forEach(d=>{d.setMap(this)}),this.interactions.forEach(d=>{d.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){setLayerMapProperty(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const s=e.getId();s!==void 0&&(this.overlayIdIndex_[s.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,s,a){if(!this.frameState_||!this.renderer_)return;const d=this.getCoordinateFromPixelInternal(e);a=a!==void 0?a:{};const b=a.hitTolerance!==void 0?a.hitTolerance:0,_=a.layerFilter!==void 0?a.layerFilter:TRUE,_e=a.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(d,this.frameState_,b,_e,s,null,_,null)}getFeaturesAtPixel(e,s){const a=[];return this.forEachFeatureAtPixel(e,function(d){a.push(d)},s),a}getAllLayers(){const e=[];function s(a){a.forEach(function(d){d instanceof LayerGroup?s(d.getLayers()):e.push(d)})}return s(this.getLayers()),e}hasFeatureAtPixel(e,s){if(!this.frameState_||!this.renderer_)return!1;const a=this.getCoordinateFromPixelInternal(e);s=s!==void 0?s:{};const d=s.layerFilter!==void 0?s.layerFilter:TRUE,b=s.hitTolerance!==void 0?s.hitTolerance:0,_=s.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(a,this.frameState_,b,_,d,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const a=this.viewport_.getBoundingClientRect(),d=this.getSize(),b=a.width/d[0],_=a.height/d[1],_e="changedTouches"in e?e.changedTouches[0]:e;return[(_e.clientX-a.left)/b,(_e.clientY-a.top)/_]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const s=this.frameState_;return s?apply$1(s.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const s=this.overlayIdIndex_[e.toString()];return s!==void 0?s:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(e){const s=this.getLayerGroup();if(e instanceof Collection){s.setLayers(e);return}const a=s.getLayers();a.clear(),a.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let s=0,a=e.length;s<a;++s){const d=e[s];if(!d.visible)continue;const b=d.layer.getRenderer();if(b&&!b.ready)return!0;const _=d.layer.getSource();if(_&&_.loading)return!0}return!1}getPixelFromCoordinate(e){const s=fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(s)}getPixelFromCoordinateInternal(e){const s=this.frameState_;return s?apply$1(s.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,s,a,d){return getTilePriority(this.frameState_,e,s,a,d)}handleBrowserEvent(e,s){s=s||e.type;const a=new MapBrowserEvent(s,this,e);this.handleMapBrowserEvent(a)}handleMapBrowserEvent(e){if(!this.frameState_)return;const s=e.originalEvent,a=s.type;if(a===PointerEventType.POINTERDOWN||a===EventType.WHEEL||a===EventType.KEYDOWN){const d=this.getOwnerDocument(),b=this.viewport_.getRootNode?this.viewport_.getRootNode():d,_=s.target;if(this.overlayContainerStopEvent_.contains(_)||!(b===d?d.documentElement:b).contains(_))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const d=this.getInteractions().getArray().slice();for(let b=d.length-1;b>=0;b--){const _=d[b];if(_.getMap()!==this||!_.getActive()||!this.getTargetElement())continue;if(!_.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,s=this.tileQueue_;if(!s.isEmpty()){let d=this.maxTilesLoading_,b=d;if(e){const _=e.viewHints;if(_[ViewHint.ANIMATING]||_[ViewHint.INTERACTING]){const _e=Date.now()-e.time>8;d=_e?0:8,b=_e?0:2}}s.getTilesLoading()<d&&(s.reprioritize(),s.loadMoreTiles(d,b))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(RenderEventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent(MapEventType.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent(MapEventType.LOADSTART,this,e))));const a=this.postRenderFunctions_;for(let d=0,b=a.length;d<b;++d)a[d](this,e);a.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let a=0,d=this.targetChangeHandlerKeys_.length;a<d;++a)unlistenByKey(this.targetChangeHandlerKeys_[a]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,removeNode(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const a=this.targetElement_.getRootNode();a instanceof ShadowRoot&&this.resizeObserver_.unobserve(a.host),this.setSize(void 0)}const e=this.getTarget(),s=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=s,!s)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{s.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler(this,this.moveTolerance_);for(const b in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[b],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);const a=this.keyboardEventTarget_?this.keyboardEventTarget_:s;this.targetChangeHandlerKeys_=[listen(a,EventType.KEYDOWN,this.handleBrowserEvent,this),listen(a,EventType.KEYPRESS,this.handleBrowserEvent,this)];const d=s.getRootNode();d instanceof ShadowRoot&&this.resizeObserver_.observe(d.host),this.resizeObserver_.observe(s)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=listen(e,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(e,EventType.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[listen(e,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(e,EventType.CHANGE,this.render,this),listen(e,"addlayer",this.handleLayerAdd_,this),listen(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let s=0,a=e.length;s<a;++s){const d=e[s].layer;d.hasRenderer()&&d.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){removeLayerMapProperty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const s=this.getSize(),a=this.getView(),d=this.frameState_;let b=null;if(s!==void 0&&hasArea(s)&&a&&a.isDef()){const _=a.getHints(this.frameState_?this.frameState_.viewHints:void 0),_e=a.getState();if(b={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:getForViewAndSize(_e.center,_e.resolution,_e.rotation,s),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:s,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:_e,viewHints:_,wantedTiles:{},mapId:getUid(this),renderTargets:{}},_e.nextCenter&&_e.nextResolution){const nt=isNaN(_e.nextRotation)?_e.rotation:_e.nextRotation;b.nextExtent=getForViewAndSize(_e.nextCenter,_e.nextResolution,nt,s)}}this.frameState_=b,this.renderer_.renderFrame(b),b&&(b.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,b.postRenderFunctions),d&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(b.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent(MapEventType.MOVESTART,this,d)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!b.viewHints[ViewHint.ANIMATING]&&!b.viewHints[ViewHint.INTERACTING]&&!equals$1(b.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent(MapEventType.MOVEEND,this,b)),clone$1(b.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER,this,b)),this.renderComplete_=this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(RenderEventType.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const s=this.getLayerGroup();s&&this.handleLayerRemove_(new GroupEvent("removelayer",s)),this.set(MapProperty.LAYERGROUP,e)}setSize(e){this.set(MapProperty.SIZE,e)}setTarget(e){this.set(MapProperty.TARGET,e)}setView(e){if(!e||e instanceof View){this.set(MapProperty.VIEW,e);return}this.set(MapProperty.VIEW,new View);const s=this;e.then(function(a){s.setView(new View(a))})}updateSize(){const e=this.getTargetElement();let s;if(e){const d=getComputedStyle(e),b=e.offsetWidth-parseFloat(d.borderLeftWidth)-parseFloat(d.paddingLeft)-parseFloat(d.paddingRight)-parseFloat(d.borderRightWidth),_=e.offsetHeight-parseFloat(d.borderTopWidth)-parseFloat(d.paddingTop)-parseFloat(d.paddingBottom)-parseFloat(d.borderBottomWidth);!isNaN(b)&&!isNaN(_)&&(s=[b,_],!hasArea(s)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&warn("No map visible because the map container's width or height are 0."))}const a=this.getSize();s&&(!a||!equals$2(s,a))&&(this.setSize(s),this.updateViewportSize_(s))}updateViewportSize_(e){const s=this.getView();s&&s.setViewportSize(e)}};function createOptionsInternal(o){let e=null;o.keyboardEventTarget!==void 0&&(e=typeof o.keyboardEventTarget=="string"?document.getElementById(o.keyboardEventTarget):o.keyboardEventTarget);const s={},a=o.layers&&typeof o.layers.getLayers=="function"?o.layers:new LayerGroup({layers:o.layers});s[MapProperty.LAYERGROUP]=a,s[MapProperty.TARGET]=o.target,s[MapProperty.VIEW]=o.view instanceof View?o.view:new View;let d;o.controls!==void 0&&(Array.isArray(o.controls)?d=new Collection(o.controls.slice()):(assert(typeof o.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),d=o.controls));let b;o.interactions!==void 0&&(Array.isArray(o.interactions)?b=new Collection(o.interactions.slice()):(assert(typeof o.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),b=o.interactions));let _;return o.overlays!==void 0?Array.isArray(o.overlays)?_=new Collection(o.overlays.slice()):(assert(typeof o.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),_=o.overlays):_=new Collection,{controls:d,interactions:b,keyboardEventTarget:e,overlays:_,values:s}}const Property={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Overlay extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property.ELEMENT,this.handleElementChanged),this.addChangeListener(Property.MAP,this.handleMapChanged),this.addChangeListener(Property.OFFSET,this.handleOffsetChanged),this.addChangeListener(Property.POSITION,this.handlePositionChanged),this.addChangeListener(Property.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Property.ELEMENT)}getId(){return this.id}getMap(){return this.get(Property.MAP)||null}getOffset(){return this.get(Property.OFFSET)}getPosition(){return this.get(Property.POSITION)}getPositioning(){return this.get(Property.POSITIONING)}handleElementChanged(){removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(removeNode(this.element),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=listen(e,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();const s=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?s.insertBefore(this.element,s.childNodes[0]||null):s.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Property.ELEMENT,e)}setMap(e){this.set(Property.MAP,e)}setOffset(e){this.set(Property.OFFSET,e)}setPosition(e){this.set(Property.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const s=this.getMap();if(!s||!s.getTargetElement()||!this.get(Property.POSITION))return;const a=this.getRect(s.getTargetElement(),s.getSize()),d=this.getElement(),b=this.getRect(d,[outerWidth(d),outerHeight(d)]);e=e||{};const _=e.margin===void 0?20:e.margin;if(!containsExtent(a,b)){const _e=b[0]-a[0],nt=a[2]-b[2],rt=b[1]-a[1],ct=a[3]-b[3],dt=[0,0];if(_e<0?dt[0]=_e-_:nt<0&&(dt[0]=Math.abs(nt)+_),rt<0?dt[1]=rt-_:ct<0&&(dt[1]=Math.abs(ct)+_),dt[0]!==0||dt[1]!==0){const pt=s.getView().getCenterInternal(),bt=s.getPixelFromCoordinateInternal(pt);if(!bt)return;const xt=[bt[0]+dt[0],bt[1]+dt[1]],wt=e.animation||{};s.getView().animateInternal({center:s.getCoordinateFromPixelInternal(xt),duration:wt.duration,easing:wt.easing})}}}getRect(e,s){const a=e.getBoundingClientRect(),d=a.left+window.pageXOffset,b=a.top+window.pageYOffset;return[d,b,d+s[0],b+s[1]]}setPositioning(e){this.set(Property.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),s=this.getPosition();if(!e||!e.isRendered()||!s){this.setVisible(!1);return}const a=e.getPixelFromCoordinate(s),d=e.getSize();this.updateRenderedPosition(a,d)}updateRenderedPosition(e,s){const a=this.element.style,d=this.getOffset(),b=this.getPositioning();this.setVisible(!0);const _=Math.round(e[0]+d[0])+"px",_e=Math.round(e[1]+d[1])+"px";let nt="0%",rt="0%";b=="bottom-right"||b=="center-right"||b=="top-right"?nt="-100%":(b=="bottom-center"||b=="center-center"||b=="top-center")&&(nt="-50%"),b=="bottom-left"||b=="bottom-center"||b=="bottom-right"?rt="-100%":(b=="center-left"||b=="center-center"||b=="center-right")&&(rt="-50%");const ct=`translate(${nt}, ${rt}) translate(${_}, ${_e})`;this.rendered.transform_!=ct&&(this.rendered.transform_=ct,a.transform=ct)}getOptions(){return this.options}}class JSONFeature extends FeatureFormat{constructor(){super()}getType(){return"json"}readFeature(e,s){return this.readFeatureFromObject(getObject(e),this.getReadOptions(e,s))}readFeatures(e,s){return this.readFeaturesFromObject(getObject(e),this.getReadOptions(e,s))}readFeatureFromObject(e,s){return abstract()}readFeaturesFromObject(e,s){return abstract()}readGeometry(e,s){return this.readGeometryFromObject(getObject(e),this.getReadOptions(e,s))}readGeometryFromObject(e,s){return abstract()}readProjection(e){return this.readProjectionFromObject(getObject(e))}readProjectionFromObject(e){return abstract()}writeFeature(e,s){return JSON.stringify(this.writeFeatureObject(e,s))}writeFeatureObject(e,s){return abstract()}writeFeatures(e,s){return JSON.stringify(this.writeFeaturesObject(e,s))}writeFeaturesObject(e,s){return abstract()}writeGeometry(e,s){return JSON.stringify(this.writeGeometryObject(e,s))}writeGeometryObject(e,s){return abstract()}}function getObject(o){if(typeof o=="string"){const e=JSON.parse(o);return e||null}return o!==null?o:null}class GeoJSON extends JSONFeature{constructor(e){e=e||{},super(),this.dataProjection=get$3(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=get$3(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,s){let a=null;e.type==="Feature"?a=e:a={type:"Feature",geometry:e,properties:null};const d=readGeometryInternal(a.geometry);if(this.featureClass===RenderFeature)return createRenderFeature({geometry:d,id:a.id,properties:a.properties},s);const b=new Feature;return this.geometryName_?b.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in a!==void 0&&b.setGeometryName(a.geometry_name),b.setGeometry(createGeometry(d,s)),"id"in a&&b.setId(a.id),a.properties&&b.setProperties(a.properties,!0),b}readFeaturesFromObject(e,s){const a=e;let d=null;if(a.type==="FeatureCollection"){const b=e;d=[];const _=b.features;for(let _e=0,nt=_.length;_e<nt;++_e){const rt=this.readFeatureFromObject(_[_e],s);rt&&d.push(rt)}}else d=[this.readFeatureFromObject(e,s)];return d.flat()}readGeometryFromObject(e,s){return readGeometry(e,s)}readProjectionFromObject(e){const s=e.crs;let a;if(s)if(s.type=="name")a=get$3(s.properties.name);else if(s.type==="EPSG")a=get$3("EPSG:"+s.properties.code);else throw new Error("Unknown SRS type");else a=this.dataProjection;return a}writeFeatureObject(e,s){s=this.adaptOptions(s);const a={type:"Feature",geometry:null,properties:null},d=e.getId();if(d!==void 0&&(a.id=d),!e.hasProperties())return a;const b=e.getProperties(),_=e.getGeometry();return _&&(a.geometry=writeGeometry(_,s),delete b[e.getGeometryName()]),isEmpty$1(b)||(a.properties=b),a}writeFeaturesObject(e,s){s=this.adaptOptions(s);const a=[];for(let d=0,b=e.length;d<b;++d)a.push(this.writeFeatureObject(e[d],s));return{type:"FeatureCollection",features:a}}writeGeometryObject(e,s){return writeGeometry(e,this.adaptOptions(s))}}function readGeometryInternal(o,e){if(!o)return null;let s;switch(o.type){case"Point":{s=readPointGeometry(o);break}case"LineString":{s=readLineStringGeometry(o);break}case"Polygon":{s=readPolygonGeometry(o);break}case"MultiPoint":{s=readMultiPointGeometry(o);break}case"MultiLineString":{s=readMultiLineStringGeometry(o);break}case"MultiPolygon":{s=readMultiPolygonGeometry(o);break}case"GeometryCollection":{s=readGeometryCollectionGeometry(o);break}default:throw new Error("Unsupported GeoJSON type: "+o.type)}return s}function readGeometry(o,e){const s=readGeometryInternal(o);return createGeometry(s,e)}function readGeometryCollectionGeometry(o,e){return o.geometries.map(function(a){return readGeometryInternal(a)})}function readPointGeometry(o){const e=o.coordinates;return{type:"Point",flatCoordinates:e,layout:getLayoutForStride(e.length)}}function readLineStringGeometry(o){const e=o.coordinates,s=e.flat();return{type:"LineString",flatCoordinates:s,ends:[s.length],layout:getLayoutForStride(e[0].length)}}function readMultiLineStringGeometry(o){const e=o.coordinates,s=e[0][0].length,a=[],d=deflateCoordinatesArray(a,0,e,s);return{type:"MultiLineString",flatCoordinates:a,ends:d,layout:getLayoutForStride(s)}}function readMultiPointGeometry(o){const e=o.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:getLayoutForStride(e[0].length)}}function readMultiPolygonGeometry(o){const e=o.coordinates,s=[],a=e[0][0][0].length,d=deflateMultiCoordinatesArray(s,0,e,a);return{type:"MultiPolygon",flatCoordinates:s,ends:d,layout:getLayoutForStride(a)}}function readPolygonGeometry(o){const e=o.coordinates,s=[],a=e[0][0].length,d=deflateCoordinatesArray(s,0,e,a);return{type:"Polygon",flatCoordinates:s,ends:d,layout:getLayoutForStride(a)}}function writeGeometry(o,e){o=transformGeometryWithOptions(o,!0,e);const s=o.getType();let a;switch(s){case"Point":{a=writePointGeometry(o);break}case"LineString":{a=writeLineStringGeometry(o);break}case"Polygon":{a=writePolygonGeometry(o,e);break}case"MultiPoint":{a=writeMultiPointGeometry(o);break}case"MultiLineString":{a=writeMultiLineStringGeometry(o);break}case"MultiPolygon":{a=writeMultiPolygonGeometry(o,e);break}case"GeometryCollection":{a=writeGeometryCollectionGeometry(o,e);break}case"Circle":{a={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+s)}return a}function writeGeometryCollectionGeometry(o,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:o.getGeometriesArray().map(function(a){return writeGeometry(a,e)})}}function writeLineStringGeometry(o,e){return{type:"LineString",coordinates:o.getCoordinates()}}function writeMultiLineStringGeometry(o,e){return{type:"MultiLineString",coordinates:o.getCoordinates()}}function writeMultiPointGeometry(o,e){return{type:"MultiPoint",coordinates:o.getCoordinates()}}function writeMultiPolygonGeometry(o,e){let s;return e&&(s=e.rightHanded),{type:"MultiPolygon",coordinates:o.getCoordinates(s)}}function writePointGeometry(o,e){return{type:"Point",coordinates:o.getCoordinates()}}function writePolygonGeometry(o,e){let s;return e&&(s=e.rightHanded),{type:"Polygon",coordinates:o.getCoordinates(s)}}function getDefaultExportFromCjs$1(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var csscolorparser={},parseCSSColor_1,kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clamp_css_byte(o){return o=Math.round(o),o<0?0:o>255?255:o}function clamp_css_float(o){return o<0?0:o>1?1:o}function parse_css_int(o){return o[o.length-1]==="%"?clamp_css_byte(parseFloat(o)/100*255):clamp_css_byte(parseInt(o))}function parse_css_float(o){return o[o.length-1]==="%"?clamp_css_float(parseFloat(o)/100):clamp_css_float(parseFloat(o))}function css_hue_to_rgb(o,e,s){return s<0?s+=1:s>1&&(s-=1),s*6<1?o+(e-o)*s*6:s*2<1?e:s*3<2?o+(e-o)*(2/3-s)*6:o}function parseCSSColor(o){var e=o.replace(/ /g,"").toLowerCase();if(e in kCSSColorTable)return kCSSColorTable[e].slice();if(e[0]==="#"){if(e.length===4){var s=parseInt(e.substr(1),16);return s>=0&&s<=4095?[(s&3840)>>4|(s&3840)>>8,s&240|(s&240)>>4,s&15|(s&15)<<4,1]:null}else if(e.length===7){var s=parseInt(e.substr(1),16);return s>=0&&s<=16777215?[(s&16711680)>>16,(s&65280)>>8,s&255,1]:null}return null}var a=e.indexOf("("),d=e.indexOf(")");if(a!==-1&&d+1===e.length){var b=e.substr(0,a),_=e.substr(a+1,d-(a+1)).split(","),_e=1;switch(b){case"rgba":if(_.length!==4)return null;_e=parse_css_float(_.pop());case"rgb":return _.length!==3?null:[parse_css_int(_[0]),parse_css_int(_[1]),parse_css_int(_[2]),_e];case"hsla":if(_.length!==4)return null;_e=parse_css_float(_.pop());case"hsl":if(_.length!==3)return null;var nt=(parseFloat(_[0])%360+360)%360/360,rt=parse_css_float(_[1]),ct=parse_css_float(_[2]),dt=ct<=.5?ct*(rt+1):ct+rt-ct*rt,pt=ct*2-dt;return[clamp_css_byte(css_hue_to_rgb(pt,dt,nt+1/3)*255),clamp_css_byte(css_hue_to_rgb(pt,dt,nt)*255),clamp_css_byte(css_hue_to_rgb(pt,dt,nt-1/3)*255),_e];default:return null}}return null}try{parseCSSColor_1=csscolorparser.parseCSSColor=parseCSSColor}catch{}let Color$1=class sie{constructor(e,s,a,d=1){this.r=e,this.g=s,this.b=a,this.a=d}static parse(e){if(!e)return;if(e instanceof sie)return e;if(typeof e!="string")return;const s=parseCSSColor_1(e);if(s)return new sie(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3])}toString(){const[e,s,a,d]=this.toArray();return`rgba(${Math.round(e)},${Math.round(s)},${Math.round(a)},${d})`}toArray(){const{r:e,g:s,b:a,a:d}=this;return d===0?[0,0,0,0]:[e*255/d,s*255/d,a*255/d,d]}toArray01(){const{r:e,g:s,b:a,a:d}=this;return d===0?[0,0,0,0]:[e/d,s/d,a/d,d]}toArray01PremultipliedAlpha(){const{r:e,g:s,b:a,a:d}=this;return[e,s,a,d]}};Color$1.black=new Color$1(0,0,0,1);Color$1.white=new Color$1(1,1,1,1);Color$1.transparent=new Color$1(0,0,0,0);Color$1.red=new Color$1(1,0,0,1);Color$1.blue=new Color$1(0,0,1,1);var Color$1$1=Color$1;function convertLiteral(o){return typeof o=="object"?["literal",o]:o}function convertFunction(o,e){let s=o.stops;if(!s)return convertIdentityFunction(o,e);const a=s&&typeof s[0][0]=="object",d=a||o.property!==void 0,b=a||!d;return s=s.map(_=>!d&&e.tokens&&typeof _[1]=="string"?[_[0],convertTokenString(_[1])]:[_[0],convertLiteral(_[1])]),a?convertZoomAndPropertyFunction(o,e,s):b?convertZoomFunction(o,e,s):convertPropertyFunction(o,e,s)}function convertIdentityFunction(o,e){const s=["get",o.property];if(o.default===void 0)return e.type==="string"?["string",s]:s;if(e.type==="enum")return["match",s,Object.keys(e.values),s,o.default];{const a=[e.type==="color"?"to-color":e.type,s,convertLiteral(o.default)];return e.type==="array"&&a.splice(1,0,e.value,e.length||null),a}}function getInterpolateOperator(o){switch(o.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function convertZoomAndPropertyFunction(o,e,s){const a={},d={},b=[];for(let _e=0;_e<s.length;_e++){const nt=s[_e],rt=nt[0].zoom;a[rt]===void 0&&(a[rt]={zoom:rt,type:o.type,property:o.property,default:o.default},d[rt]=[],b.push(rt)),d[rt].push([nt[0].value,nt[1]])}if(getFunctionType({},e)==="exponential"){const _e=[getInterpolateOperator(o),["linear"],["zoom"]];for(const nt of b){const rt=convertPropertyFunction(a[nt],e,d[nt]);appendStopPair(_e,nt,rt,!1)}return _e}else{const _e=["step",["zoom"]];for(const nt of b){const rt=convertPropertyFunction(a[nt],e,d[nt]);appendStopPair(_e,nt,rt,!0)}return fixupDegenerateStepCurve(_e),_e}}function coalesce(o,e){if(o!==void 0)return o;if(e!==void 0)return e}function getFallback(o,e){const s=convertLiteral(coalesce(o.default,e.default));return s===void 0&&e.type==="resolvedImage"?"":s}function convertPropertyFunction(o,e,s){const a=getFunctionType(o,e),d=["get",o.property];if(a==="categorical"&&typeof s[0][0]=="boolean"){const b=["case"];for(const _ of s)b.push(["==",d,_[0]],_[1]);return b.push(getFallback(o,e)),b}else if(a==="categorical"){const b=["match",d];for(const _ of s)appendStopPair(b,_[0],_[1],!1);return b.push(getFallback(o,e)),b}else if(a==="interval"){const b=["step",["number",d]];for(const _ of s)appendStopPair(b,_[0],_[1],!0);return fixupDegenerateStepCurve(b),o.default===void 0?b:["case",["==",["typeof",d],"number"],b,convertLiteral(o.default)]}else if(a==="exponential"){const b=o.base!==void 0?o.base:1,_=[getInterpolateOperator(o),b===1?["linear"]:["exponential",b],["number",d]];for(const _e of s)appendStopPair(_,_e[0],_e[1],!1);return o.default===void 0?_:["case",["==",["typeof",d],"number"],_,convertLiteral(o.default)]}else throw new Error(`Unknown property function type ${a}`)}function convertZoomFunction(o,e,s,a=["zoom"]){const d=getFunctionType(o,e);let b,_=!1;if(d==="interval")b=["step",a],_=!0;else if(d==="exponential"){const _e=o.base!==void 0?o.base:1;b=[getInterpolateOperator(o),_e===1?["linear"]:["exponential",_e],a]}else throw new Error(`Unknown zoom function type "${d}"`);for(const _e of s)appendStopPair(b,_e[0],_e[1],_);return fixupDegenerateStepCurve(b),b}function fixupDegenerateStepCurve(o){o[0]==="step"&&o.length===3&&(o.push(0),o.push(o[3]))}function appendStopPair(o,e,s,a){o.length>3&&e===o[o.length-2]||(a&&o.length===2||o.push(e),o.push(s))}function getFunctionType(o,e){return o.type?o.type:e.expression.interpolated?"exponential":"interval"}function convertTokenString(o){const e=["concat"],s=/{([^{}]+)}/g;let a=0;for(let d=s.exec(o);d!==null;d=s.exec(o)){const b=o.slice(a,s.lastIndex-d[0].length);a=s.lastIndex,b.length>0&&e.push(b),e.push(["get",d[1]])}if(e.length===1)return o;if(a<o.length)e.push(o.slice(a));else if(e.length===2)return["to-string",e[1]];return e}class ParsingError extends Error{constructor(e,s){super(s),this.message=s,this.key=e}}var ParsingError$1=ParsingError;class Scope{constructor(e,s=[]){this.parent=e,this.bindings={};for(const[a,d]of s)this.bindings[a]=d}concat(e){return new Scope(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var Scope$1=Scope;const NullType={kind:"null"},NumberType={kind:"number"},StringType={kind:"string"},BooleanType={kind:"boolean"},ColorType={kind:"color"},ObjectType={kind:"object"},ValueType={kind:"value"},ErrorType={kind:"error"},CollatorType={kind:"collator"},FormattedType={kind:"formatted"},ResolvedImageType={kind:"resolvedImage"};function array$1(o,e){return{kind:"array",itemType:o,N:e}}function toString$1(o){if(o.kind==="array"){const e=toString$1(o.itemType);return typeof o.N=="number"?`array<${e}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${e}>`}else return o.kind}const valueMemberTypes=[NullType,NumberType,StringType,BooleanType,ColorType,FormattedType,ObjectType,array$1(ValueType),ResolvedImageType];function checkSubtype(o,e){if(e.kind==="error")return null;if(o.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!checkSubtype(o.itemType,e.itemType))&&(typeof o.N!="number"||o.N===e.N))return null}else{if(o.kind===e.kind)return null;if(o.kind==="value"){for(const s of valueMemberTypes)if(!checkSubtype(s,e))return null}}return`Expected ${toString$1(o)} but found ${toString$1(e)} instead.`}function isValidType(o,e){return e.some(s=>s.kind===o.kind)}function isValidNativeType(o,e){return e.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}class Collator{constructor(e,s,a){e?this.sensitivity=s?"variant":"case":this.sensitivity=s?"accent":"base",this.locale=a,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,s){return this.collator.compare(e,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class FormattedSection{constructor(e,s,a,d,b){this.text=e.normalize?e.normalize():e,this.image=s,this.scale=a,this.fontStack=d,this.textColor=b}}class Formatted{constructor(e){this.sections=e}static fromString(e){return new Formatted([new FormattedSection(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Formatted?e:Formatted.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const s of this.sections){if(s.image){e.push(["image",s.image.name]);continue}e.push(s.text);const a={};s.fontStack&&(a["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(a["font-scale"]=s.scale),s.textColor&&(a["text-color"]=["rgba"].concat(s.textColor.toArray())),e.push(a)}return e}}class ResolvedImage{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ResolvedImage({name:e,available:!1}):null}serialize(){return["image",this.name]}}function validateRGBA(o,e,s,a){return typeof o=="number"&&o>=0&&o<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof s=="number"&&s>=0&&s<=255?typeof a>"u"||typeof a=="number"&&a>=0&&a<=1?null:`Invalid rgba value [${[o,e,s,a].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof a=="number"?[o,e,s,a]:[o,e,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function isValue(o){if(o===null)return!0;if(typeof o=="string")return!0;if(typeof o=="boolean")return!0;if(typeof o=="number")return!0;if(o instanceof Color$1$1)return!0;if(o instanceof Collator)return!0;if(o instanceof Formatted)return!0;if(o instanceof ResolvedImage)return!0;if(Array.isArray(o)){for(const e of o)if(!isValue(e))return!1;return!0}else if(typeof o=="object"){for(const e in o)if(!isValue(o[e]))return!1;return!0}else return!1}function typeOf(o){if(o===null)return NullType;if(typeof o=="string")return StringType;if(typeof o=="boolean")return BooleanType;if(typeof o=="number")return NumberType;if(o instanceof Color$1$1)return ColorType;if(o instanceof Collator)return CollatorType;if(o instanceof Formatted)return FormattedType;if(o instanceof ResolvedImage)return ResolvedImageType;if(Array.isArray(o)){const e=o.length;let s;for(const a of o){const d=typeOf(a);if(!s)s=d;else{if(s===d)continue;s=ValueType;break}}return array$1(s||ValueType,e)}else return ObjectType}function toString(o){const e=typeof o;return o===null?"":e==="string"||e==="number"||e==="boolean"?String(o):o instanceof Color$1$1||o instanceof Formatted||o instanceof ResolvedImage?o.toString():JSON.stringify(o)}class Literal{constructor(e,s){this.type=e,this.value=s}static parse(e,s){if(e.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!isValue(e[1]))return s.error("invalid value");const a=e[1];let d=typeOf(a);const b=s.expectedType;return d.kind==="array"&&d.N===0&&b&&b.kind==="array"&&(typeof b.N!="number"||b.N===0)&&(d=b),new Literal(d,a)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Color$1$1?["rgba"].concat(this.value.toArray()):this.value instanceof Formatted?this.value.serialize():this.value}}var Literal$1=Literal;class RuntimeError{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var RuntimeError$1=RuntimeError;const types$2={string:StringType,number:NumberType,boolean:BooleanType,object:ObjectType};class Assertion{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");let a=1,d;const b=e[0];if(b==="array"){let _e;if(e.length>2){const rt=e[1];if(typeof rt!="string"||!(rt in types$2)||rt==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);_e=types$2[rt],a++}else _e=ValueType;let nt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return s.error('The length argument to "array" must be a positive integer literal',2);nt=e[2],a++}d=array$1(_e,nt)}else d=types$2[b];const _=[];for(;a<e.length;a++){const _e=s.parse(e[a],a,ValueType);if(!_e)return null;_.push(_e)}return new Assertion(d,_)}evaluate(e){for(let s=0;s<this.args.length;s++){const a=this.args[s].evaluate(e);if(checkSubtype(this.type,typeOf(a))){if(s===this.args.length-1)throw new RuntimeError$1(`Expected value to be of type ${toString$1(this.type)}, but found ${toString$1(typeOf(a))} instead.`)}else return a}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,s=[e.kind];if(e.kind==="array"){const a=e.itemType;if(a.kind==="string"||a.kind==="number"||a.kind==="boolean"){s.push(a.kind);const d=e.N;(typeof d=="number"||this.args.length>1)&&s.push(d)}}return s.concat(this.args.map(a=>a.serialize()))}}var Assertion$1=Assertion;class FormatExpression{constructor(e){this.type=FormattedType,this.sections=e}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");const a=e[1];if(!Array.isArray(a)&&typeof a=="object")return s.error("First argument must be an image or text section.");const d=[];let b=!1;for(let _=1;_<=e.length-1;++_){const _e=e[_];if(b&&typeof _e=="object"&&!Array.isArray(_e)){b=!1;let nt=null;if(_e["font-scale"]&&(nt=s.parse(_e["font-scale"],1,NumberType),!nt))return null;let rt=null;if(_e["text-font"]&&(rt=s.parse(_e["text-font"],1,array$1(StringType)),!rt))return null;let ct=null;if(_e["text-color"]&&(ct=s.parse(_e["text-color"],1,ColorType),!ct))return null;const dt=d[d.length-1];dt.scale=nt,dt.font=rt,dt.textColor=ct}else{const nt=s.parse(e[_],1,ValueType);if(!nt)return null;const rt=nt.type.kind;if(rt!=="string"&&rt!=="value"&&rt!=="null"&&rt!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,d.push({content:nt,scale:null,font:null,textColor:null})}}return new FormatExpression(d)}evaluate(e){const s=a=>{const d=a.content.evaluate(e);return typeOf(d)===ResolvedImageType?new FormattedSection("",d,null,null,null):new FormattedSection(toString(d),null,a.scale?a.scale.evaluate(e):null,a.font?a.font.evaluate(e).join(","):null,a.textColor?a.textColor.evaluate(e):null)};return new Formatted(this.sections.map(s))}eachChild(e){for(const s of this.sections)e(s.content),s.scale&&e(s.scale),s.font&&e(s.font),s.textColor&&e(s.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const s of this.sections){e.push(s.content.serialize());const a={};s.scale&&(a["font-scale"]=s.scale.serialize()),s.font&&(a["text-font"]=s.font.serialize()),s.textColor&&(a["text-color"]=s.textColor.serialize()),e.push(a)}return e}}class ImageExpression{constructor(e){this.type=ResolvedImageType,this.input=e}static parse(e,s){if(e.length!==2)return s.error("Expected two arguments.");const a=s.parse(e[1],1,StringType);return a?new ImageExpression(a):s.error("No image name provided.")}evaluate(e){const s=this.input.evaluate(e),a=ResolvedImage.fromString(s);return a&&e.availableImages&&(a.available=e.availableImages.indexOf(s)>-1),a}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const types$1={"to-boolean":BooleanType,"to-color":ColorType,"to-number":NumberType,"to-string":StringType};class Coercion{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");const a=e[0];if((a==="to-boolean"||a==="to-string")&&e.length!==2)return s.error("Expected one argument.");const d=types$1[a],b=[];for(let _=1;_<e.length;_++){const _e=s.parse(e[_],_,ValueType);if(!_e)return null;b.push(_e)}return new Coercion(d,b)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let s,a;for(const d of this.args){if(s=d.evaluate(e),a=null,s instanceof Color$1$1)return s;if(typeof s=="string"){const b=e.parseColor(s);if(b)return b}else if(Array.isArray(s)&&(s.length<3||s.length>4?a=`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:a=validateRGBA(s[0],s[1],s[2],s[3]),!a))return new Color$1$1(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new RuntimeError$1(a||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}else if(this.type.kind==="number"){let s=null;for(const a of this.args){if(s=a.evaluate(e),s===null)return 0;const d=Number(s);if(!isNaN(d))return d}throw new RuntimeError$1(`Could not convert ${JSON.stringify(s)} to number.`)}else return this.type.kind==="formatted"?Formatted.fromString(toString(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ResolvedImage.fromString(toString(this.args[0].evaluate(e))):toString(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new FormatExpression([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ImageExpression(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(s=>{e.push(s.serialize())}),e}}var Coercion$1=Coercion;const geometryTypes=["Unknown","Point","LineString","Polygon"];class EvaluationContext{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?geometryTypes[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,s=this.featureDistanceData.scale,{x:a,y:d}=this.featureTileCoord,b=a*s-e[0],_=d*s-e[1],_e=this.featureDistanceData.bearing[0],nt=this.featureDistanceData.bearing[1];return _e*b+nt*_}return 0}parseColor(e){let s=this._parseColorCache[e];return s||(s=this._parseColorCache[e]=Color$1$1.parse(e)),s}}var EvaluationContext$1=EvaluationContext;class CompoundExpression{constructor(e,s,a,d){this.name=e,this.type=s,this._evaluate=a,this.args=d}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,s){const a=e[0],d=CompoundExpression.definitions[a];if(!d)return s.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(d)?d[0]:d.type,_=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,_e=_.filter(([rt])=>!Array.isArray(rt)||rt.length===e.length-1);let nt=null;for(const[rt,ct]of _e){nt=new ParsingContext$1(s.registry,s.path,null,s.scope);const dt=[];let pt=!1;for(let bt=1;bt<e.length;bt++){const xt=e[bt],wt=Array.isArray(rt)?rt[bt-1]:rt.type,Tt=nt.parse(xt,1+dt.length,wt);if(!Tt){pt=!0;break}dt.push(Tt)}if(!pt){if(Array.isArray(rt)&&rt.length!==dt.length){nt.error(`Expected ${rt.length} arguments, but found ${dt.length} instead.`);continue}for(let bt=0;bt<dt.length;bt++){const xt=Array.isArray(rt)?rt[bt]:rt.type,wt=dt[bt];nt.concat(bt+1).checkSubtype(xt,wt.type)}if(nt.errors.length===0)return new CompoundExpression(a,b,ct,dt)}}if(_e.length===1)s.errors.push(...nt.errors);else{const ct=(_e.length?_e:_).map(([pt])=>stringifySignature(pt)).join(" | "),dt=[];for(let pt=1;pt<e.length;pt++){const bt=s.parse(e[pt],1+dt.length);if(!bt)return null;dt.push(toString$1(bt.type))}s.error(`Expected arguments of type ${ct}, but found (${dt.join(", ")}) instead.`)}return null}static register(e,s){CompoundExpression.definitions=s;for(const a in s)e[a]=CompoundExpression}}function stringifySignature(o){return Array.isArray(o)?`(${o.map(toString$1).join(", ")})`:`(${toString$1(o.type)}...)`}var CompoundExpression$1=CompoundExpression;class CollatorExpression{constructor(e,s,a){this.type=CollatorType,this.locale=a,this.caseSensitive=e,this.diacriticSensitive=s}static parse(e,s){if(e.length!==2)return s.error("Expected one argument.");const a=e[1];if(typeof a!="object"||Array.isArray(a))return s.error("Collator options argument must be an object.");const d=s.parse(a["case-sensitive"]===void 0?!1:a["case-sensitive"],1,BooleanType);if(!d)return null;const b=s.parse(a["diacritic-sensitive"]===void 0?!1:a["diacritic-sensitive"],1,BooleanType);if(!b)return null;let _=null;return a.locale&&(_=s.parse(a.locale,1,StringType),!_)?null:new CollatorExpression(d,b,_)}evaluate(e){return new Collator(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const EXTENT=8192;function updateBBox(o,e){o[0]=Math.min(o[0],e[0]),o[1]=Math.min(o[1],e[1]),o[2]=Math.max(o[2],e[0]),o[3]=Math.max(o[3],e[1])}function mercatorXfromLng(o){return(180+o)/360}function mercatorYfromLat(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function boxWithinBox(o,e){return!(o[0]<=e[0]||o[2]>=e[2]||o[1]<=e[1]||o[3]>=e[3])}function getTileCoordinates(o,e){const s=mercatorXfromLng(o[0]),a=mercatorYfromLat(o[1]),d=Math.pow(2,e.z);return[Math.round(s*d*EXTENT),Math.round(a*d*EXTENT)]}function onBoundary(o,e,s){const a=o[0]-e[0],d=o[1]-e[1],b=o[0]-s[0],_=o[1]-s[1];return a*_-b*d===0&&a*b<=0&&d*_<=0}function rayIntersect(o,e,s){return e[1]>o[1]!=s[1]>o[1]&&o[0]<(s[0]-e[0])*(o[1]-e[1])/(s[1]-e[1])+e[0]}function pointWithinPolygon(o,e){let s=!1;for(let a=0,d=e.length;a<d;a++){const b=e[a];for(let _=0,_e=b.length;_<_e-1;_++){if(onBoundary(o,b[_],b[_+1]))return!1;rayIntersect(o,b[_],b[_+1])&&(s=!s)}}return s}function pointWithinPolygons(o,e){for(let s=0;s<e.length;s++)if(pointWithinPolygon(o,e[s]))return!0;return!1}function perp(o,e){return o[0]*e[1]-o[1]*e[0]}function twoSided(o,e,s,a){const d=o[0]-s[0],b=o[1]-s[1],_=e[0]-s[0],_e=e[1]-s[1],nt=a[0]-s[0],rt=a[1]-s[1],ct=d*rt-nt*b,dt=_*rt-nt*_e;return ct>0&&dt<0||ct<0&&dt>0}function lineIntersectLine(o,e,s,a){const d=[e[0]-o[0],e[1]-o[1]],b=[a[0]-s[0],a[1]-s[1]];return perp(b,d)===0?!1:!!(twoSided(o,e,s,a)&&twoSided(s,a,o,e))}function lineIntersectPolygon(o,e,s){for(const a of s)for(let d=0;d<a.length-1;++d)if(lineIntersectLine(o,e,a[d],a[d+1]))return!0;return!1}function lineStringWithinPolygon(o,e){for(let s=0;s<o.length;++s)if(!pointWithinPolygon(o[s],e))return!1;for(let s=0;s<o.length-1;++s)if(lineIntersectPolygon(o[s],o[s+1],e))return!1;return!0}function lineStringWithinPolygons(o,e){for(let s=0;s<e.length;s++)if(lineStringWithinPolygon(o,e[s]))return!0;return!1}function getTilePolygon(o,e,s){const a=[];for(let d=0;d<o.length;d++){const b=[];for(let _=0;_<o[d].length;_++){const _e=getTileCoordinates(o[d][_],s);updateBBox(e,_e),b.push(_e)}a.push(b)}return a}function getTilePolygons(o,e,s){const a=[];for(let d=0;d<o.length;d++){const b=getTilePolygon(o[d],e,s);a.push(b)}return a}function updatePoint(o,e,s,a){if(o[0]<s[0]||o[0]>s[2]){const d=a*.5;let b=o[0]-s[0]>d?-a:s[0]-o[0]>d?a:0;b===0&&(b=o[0]-s[2]>d?-a:s[2]-o[0]>d?a:0),o[0]+=b}updateBBox(e,o)}function resetBBox(o){o[0]=o[1]=1/0,o[2]=o[3]=-1/0}function getTilePoints(o,e,s,a){const d=Math.pow(2,a.z)*EXTENT,b=[a.x*EXTENT,a.y*EXTENT],_=[];if(!o)return _;for(const _e of o)for(const nt of _e){const rt=[nt.x+b[0],nt.y+b[1]];updatePoint(rt,e,s,d),_.push(rt)}return _}function getTileLines(o,e,s,a){const d=Math.pow(2,a.z)*EXTENT,b=[a.x*EXTENT,a.y*EXTENT],_=[];if(!o)return _;for(const _e of o){const nt=[];for(const rt of _e){const ct=[rt.x+b[0],rt.y+b[1]];updateBBox(e,ct),nt.push(ct)}_.push(nt)}if(e[2]-e[0]<=d/2){resetBBox(e);for(const _e of _)for(const nt of _e)updatePoint(nt,e,s,d)}return _}function pointsWithinPolygons(o,e){const s=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],d=o.canonicalID();if(!d)return!1;if(e.type==="Polygon"){const b=getTilePolygon(e.coordinates,a,d),_=getTilePoints(o.geometry(),s,a,d);if(!boxWithinBox(s,a))return!1;for(const _e of _)if(!pointWithinPolygon(_e,b))return!1}if(e.type==="MultiPolygon"){const b=getTilePolygons(e.coordinates,a,d),_=getTilePoints(o.geometry(),s,a,d);if(!boxWithinBox(s,a))return!1;for(const _e of _)if(!pointWithinPolygons(_e,b))return!1}return!0}function linesWithinPolygons(o,e){const s=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],d=o.canonicalID();if(!d)return!1;if(e.type==="Polygon"){const b=getTilePolygon(e.coordinates,a,d),_=getTileLines(o.geometry(),s,a,d);if(!boxWithinBox(s,a))return!1;for(const _e of _)if(!lineStringWithinPolygon(_e,b))return!1}if(e.type==="MultiPolygon"){const b=getTilePolygons(e.coordinates,a,d),_=getTileLines(o.geometry(),s,a,d);if(!boxWithinBox(s,a))return!1;for(const _e of _)if(!lineStringWithinPolygons(_e,b))return!1}return!0}class Within{constructor(e,s){this.type=BooleanType,this.geojson=e,this.geometries=s}static parse(e,s){if(e.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const a=e[1];if(a.type==="FeatureCollection")for(let d=0;d<a.features.length;++d){const b=a.features[d].geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new Within(a,a.features[d].geometry)}else if(a.type==="Feature"){const d=a.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Within(a,a.geometry)}else if(a.type==="Polygon"||a.type==="MultiPolygon")return new Within(a,a)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointsWithinPolygons(e,this.geometries);if(e.geometryType()==="LineString")return linesWithinPolygons(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Within$1=Within;function isFeatureConstant(o){if(o instanceof CompoundExpression$1){if(o.name==="get"&&o.args.length===1)return!1;if(o.name==="feature-state")return!1;if(o.name==="has"&&o.args.length===1)return!1;if(o.name==="properties"||o.name==="geometry-type"||o.name==="id")return!1;if(/^filter-/.test(o.name))return!1}if(o instanceof Within$1)return!1;let e=!0;return o.eachChild(s=>{e&&!isFeatureConstant(s)&&(e=!1)}),e}function isStateConstant(o){if(o instanceof CompoundExpression$1&&o.name==="feature-state")return!1;let e=!0;return o.eachChild(s=>{e&&!isStateConstant(s)&&(e=!1)}),e}function isGlobalPropertyConstant(o,e){if(o instanceof CompoundExpression$1&&e.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(a=>{s&&!isGlobalPropertyConstant(a,e)&&(s=!1)}),s}class Var{constructor(e,s){this.type=s.type,this.name=e,this.boundExpression=s}static parse(e,s){if(e.length!==2||typeof e[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const a=e[1];return s.scope.has(a)?new Var(a,s.scope.get(a)):s.error(`Unknown variable "${a}". Make sure "${a}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Var$1=Var;class ParsingContext{constructor(e,s=[],a,d=new Scope$1,b=[]){this.registry=e,this.path=s,this.key=s.map(_=>`[${_}]`).join(""),this.scope=d,this.errors=b,this.expectedType=a}parse(e,s,a,d,b={}){return s?this.concat(s,a,d)._parse(e,b):this._parse(e,b)}_parse(e,s){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function a(d,b,_){return _==="assert"?new Assertion$1(b,[d]):_==="coerce"?new Coercion$1(b,[d]):d}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=e[0];if(typeof d!="string")return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[d];if(b){let _=b.parse(e,this);if(!_)return null;if(this.expectedType){const _e=this.expectedType,nt=_.type;if((_e.kind==="string"||_e.kind==="number"||_e.kind==="boolean"||_e.kind==="object"||_e.kind==="array")&&nt.kind==="value")_=a(_,_e,s.typeAnnotation||"assert");else if((_e.kind==="color"||_e.kind==="formatted"||_e.kind==="resolvedImage")&&(nt.kind==="value"||nt.kind==="string"))_=a(_,_e,s.typeAnnotation||"coerce");else if(this.checkSubtype(_e,nt))return null}if(!(_ instanceof Literal$1)&&_.type.kind!=="resolvedImage"&&isConstant(_)){const _e=new EvaluationContext$1;try{_=new Literal$1(_.type,_.evaluate(_e))}catch(nt){return this.error(nt.message),null}}return _}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,s,a){const d=typeof e=="number"?this.path.concat(e):this.path,b=a?this.scope.concat(a):this.scope;return new ParsingContext(this.registry,d,s||null,b,this.errors)}error(e,...s){const a=`${this.key}${s.map(d=>`[${d}]`).join("")}`;this.errors.push(new ParsingError$1(a,e))}checkSubtype(e,s){const a=checkSubtype(e,s);return a&&this.error(a),a}}var ParsingContext$1=ParsingContext;function isConstant(o){if(o instanceof Var$1)return isConstant(o.boundExpression);if(o instanceof CompoundExpression$1&&o.name==="error")return!1;if(o instanceof CollatorExpression)return!1;if(o instanceof Within$1)return!1;const e=o instanceof Coercion$1||o instanceof Assertion$1;let s=!0;return o.eachChild(a=>{e?s=s&&isConstant(a):s=s&&a instanceof Literal$1}),s?isFeatureConstant(o)&&isGlobalPropertyConstant(o,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function findStopLessThanOrEqualTo(o,e){const s=o.length-1;let a=0,d=s,b=0,_,_e;for(;a<=d;)if(b=Math.floor((a+d)/2),_=o[b],_e=o[b+1],_<=e){if(b===s||e<_e)return b;a=b+1}else if(_>e)d=b-1;else throw new RuntimeError$1("Input is not a number.");return 0}let Step$1=class ele{constructor(e,s,a){this.type=e,this.input=s,this.labels=[],this.outputs=[];for(const[d,b]of a)this.labels.push(d),this.outputs.push(b)}static parse(e,s){if(e.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return s.error("Expected an even number of arguments.");const a=s.parse(e[1],1,NumberType);if(!a)return null;const d=[];let b=null;s.expectedType&&s.expectedType.kind!=="value"&&(b=s.expectedType);for(let _=1;_<e.length;_+=2){const _e=_===1?-1/0:e[_],nt=e[_+1],rt=_,ct=_+1;if(typeof _e!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',rt);if(d.length&&d[d.length-1][0]>=_e)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',rt);const dt=s.parse(nt,ct,b);if(!dt)return null;b=b||dt.type,d.push([_e,dt])}return new ele(b,a,d)}evaluate(e){const s=this.labels,a=this.outputs;if(s.length===1)return a[0].evaluate(e);const d=this.input.evaluate(e);if(d<=s[0])return a[0].evaluate(e);const b=s.length;if(d>=s[b-1])return a[b-1].evaluate(e);const _=findStopLessThanOrEqualTo(s,d);return a[_].evaluate(e)}eachChild(e){e(this.input);for(const s of this.outputs)e(s)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&e.push(this.labels[s]),e.push(this.outputs[s].serialize());return e}};var Step$1$1=Step$1,unitbezier=UnitBezier;function UnitBezier(o,e,s,a){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(a-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=a,this.p2x=s,this.p2y=a}UnitBezier.prototype.sampleCurveX=function(o){return((this.ax*o+this.bx)*o+this.cx)*o};UnitBezier.prototype.sampleCurveY=function(o){return((this.ay*o+this.by)*o+this.cy)*o};UnitBezier.prototype.sampleCurveDerivativeX=function(o){return(3*this.ax*o+2*this.bx)*o+this.cx};UnitBezier.prototype.solveCurveX=function(o,e){typeof e>"u"&&(e=1e-6);var s,a,d,b,_;for(d=o,_=0;_<8;_++){if(b=this.sampleCurveX(d)-o,Math.abs(b)<e)return d;var _e=this.sampleCurveDerivativeX(d);if(Math.abs(_e)<1e-6)break;d=d-b/_e}if(s=0,a=1,d=o,d<s)return s;if(d>a)return a;for(;s<a;){if(b=this.sampleCurveX(d),Math.abs(b-o)<e)return d;o>b?s=d:a=d,d=(a-s)*.5+s}return d};UnitBezier.prototype.solve=function(o,e){return this.sampleCurveY(this.solveCurveX(o,e))};var UnitBezier$1=getDefaultExportFromCjs$1(unitbezier);function number(o,e,s){return o*(1-s)+e*s}function color(o,e,s){return new Color$1$1(number(o.r,e.r,s),number(o.g,e.g,s),number(o.b,e.b,s),number(o.a,e.a,s))}function array(o,e,s){return o.map((a,d)=>number(a,e[d],s))}var interpolate=Object.freeze({__proto__:null,number,color,array});const Xn=.95047,Yn=1,Zn=1.08883,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1,deg2rad$1=Math.PI/180,rad2deg=180/Math.PI;function xyz2lab(o){return o>t3?Math.pow(o,1/3):o/t2+t0}function lab2xyz(o){return o>t1?o*o*o:t2*(o-t0)}function xyz2rgb(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function rgb2xyz(o){return o/=255,o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function rgbToLab(o){const e=rgb2xyz(o.r),s=rgb2xyz(o.g),a=rgb2xyz(o.b),d=xyz2lab((.4124564*e+.3575761*s+.1804375*a)/Xn),b=xyz2lab((.2126729*e+.7151522*s+.072175*a)/Yn),_=xyz2lab((.0193339*e+.119192*s+.9503041*a)/Zn);return{l:116*b-16,a:500*(d-b),b:200*(b-_),alpha:o.a}}function labToRgb(o){let e=(o.l+16)/116,s=isNaN(o.a)?e:e+o.a/500,a=isNaN(o.b)?e:e-o.b/200;return e=Yn*lab2xyz(e),s=Xn*lab2xyz(s),a=Zn*lab2xyz(a),new Color$1$1(xyz2rgb(3.2404542*s-1.5371385*e-.4985314*a),xyz2rgb(-.969266*s+1.8760108*e+.041556*a),xyz2rgb(.0556434*s-.2040259*e+1.0572252*a),o.alpha)}function interpolateLab(o,e,s){return{l:number(o.l,e.l,s),a:number(o.a,e.a,s),b:number(o.b,e.b,s),alpha:number(o.alpha,e.alpha,s)}}function rgbToHcl(o){const{l:e,a:s,b:a}=rgbToLab(o),d=Math.atan2(a,s)*rad2deg;return{h:d<0?d+360:d,c:Math.sqrt(s*s+a*a),l:e,alpha:o.a}}function hclToRgb(o){const e=o.h*deg2rad$1,s=o.c,a=o.l;return labToRgb({l:a,a:Math.cos(e)*s,b:Math.sin(e)*s,alpha:o.alpha})}function interpolateHue(o,e,s){const a=e-o;return o+s*(a>180||a<-180?a-360*Math.round(a/360):a)}function interpolateHcl(o,e,s){return{h:interpolateHue(o.h,e.h,s),c:number(o.c,e.c,s),l:number(o.l,e.l,s),alpha:number(o.alpha,e.alpha,s)}}const lab={forward:rgbToLab,reverse:labToRgb,interpolate:interpolateLab},hcl={forward:rgbToHcl,reverse:hclToRgb,interpolate:interpolateHcl};class Interpolate{constructor(e,s,a,d,b){this.type=e,this.operator=s,this.interpolation=a,this.input=d,this.labels=[],this.outputs=[];for(const[_,_e]of b)this.labels.push(_),this.outputs.push(_e)}static interpolationFactor(e,s,a,d){let b=0;if(e.name==="exponential")b=exponentialInterpolation(s,e.base,a,d);else if(e.name==="linear")b=exponentialInterpolation(s,1,a,d);else if(e.name==="cubic-bezier"){const _=e.controlPoints;b=new UnitBezier$1(_[0],_[1],_[2],_[3]).solve(exponentialInterpolation(s,1,a,d))}return b}static parse(e,s){let[a,d,b,..._]=e;if(!Array.isArray(d)||d.length===0)return s.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const rt=d[1];if(typeof rt!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:rt}}else if(d[0]==="cubic-bezier"){const rt=d.slice(1);if(rt.length!==4||rt.some(ct=>typeof ct!="number"||ct<0||ct>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:rt}}else return s.error(`Unknown interpolation type ${String(d[0])}`,1,0);if(e.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return s.error("Expected an even number of arguments.");if(b=s.parse(b,2,NumberType),!b)return null;const _e=[];let nt=null;a==="interpolate-hcl"||a==="interpolate-lab"?nt=ColorType:s.expectedType&&s.expectedType.kind!=="value"&&(nt=s.expectedType);for(let rt=0;rt<_.length;rt+=2){const ct=_[rt],dt=_[rt+1],pt=rt+3,bt=rt+4;if(typeof ct!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',pt);if(_e.length&&_e[_e.length-1][0]>=ct)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',pt);const xt=s.parse(dt,bt,nt);if(!xt)return null;nt=nt||xt.type,_e.push([ct,xt])}return nt.kind!=="number"&&nt.kind!=="color"&&!(nt.kind==="array"&&nt.itemType.kind==="number"&&typeof nt.N=="number")?s.error(`Type ${toString$1(nt)} is not interpolatable.`):new Interpolate(nt,a,d,b,_e)}evaluate(e){const s=this.labels,a=this.outputs;if(s.length===1)return a[0].evaluate(e);const d=this.input.evaluate(e);if(d<=s[0])return a[0].evaluate(e);const b=s.length;if(d>=s[b-1])return a[b-1].evaluate(e);const _=findStopLessThanOrEqualTo(s,d),_e=s[_],nt=s[_+1],rt=Interpolate.interpolationFactor(this.interpolation,d,_e,nt),ct=a[_].evaluate(e),dt=a[_+1].evaluate(e);return this.operator==="interpolate"?interpolate[this.type.kind.toLowerCase()](ct,dt,rt):this.operator==="interpolate-hcl"?hcl.reverse(hcl.interpolate(hcl.forward(ct),hcl.forward(dt),rt)):lab.reverse(lab.interpolate(lab.forward(ct),lab.forward(dt),rt))}eachChild(e){e(this.input);for(const s of this.outputs)e(s)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,e,this.input.serialize()];for(let a=0;a<this.labels.length;a++)s.push(this.labels[a],this.outputs[a].serialize());return s}}function exponentialInterpolation(o,e,s,a){const d=a-s,b=o-s;return d===0?0:e===1?b/d:(Math.pow(e,b)-1)/(Math.pow(e,d)-1)}var Interpolate$1=Interpolate;class Coalesce{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expectected at least one argument.");let a=null;const d=s.expectedType;d&&d.kind!=="value"&&(a=d);const b=[];for(const _e of e.slice(1)){const nt=s.parse(_e,1+b.length,a,void 0,{typeAnnotation:"omit"});if(!nt)return null;a=a||nt.type,b.push(nt)}return d&&b.some(_e=>checkSubtype(d,_e.type))?new Coalesce(ValueType,b):new Coalesce(a,b)}evaluate(e){let s=null,a=0,d;for(const b of this.args){if(a++,s=b.evaluate(e),s&&s instanceof ResolvedImage&&!s.available&&(d||(d=s),s=null,a===this.args.length))return d;if(s!==null)break}return s}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(s=>{e.push(s.serialize())}),e}}var Coalesce$1=Coalesce;class Let{constructor(e,s){this.type=s.type,this.bindings=[].concat(e),this.result=s}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const s of this.bindings)e(s[1]);e(this.result)}static parse(e,s){if(e.length<4)return s.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const a=[];for(let b=1;b<e.length-1;b+=2){const _=e[b];if(typeof _!="string")return s.error(`Expected string, but found ${typeof _} instead.`,b);if(/[^a-zA-Z0-9_]/.test(_))return s.error("Variable names must contain only alphanumeric characters or '_'.",b);const _e=s.parse(e[b+1],b+1);if(!_e)return null;a.push([_,_e])}const d=s.parse(e[e.length-1],e.length-1,s.expectedType,a);return d?new Let(a,d):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[s,a]of this.bindings)e.push(s,a.serialize());return e.push(this.result.serialize()),e}}var Let$1=Let;class At{constructor(e,s,a){this.type=e,this.index=s,this.input=a}static parse(e,s){if(e.length!==3)return s.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=s.parse(e[1],1,NumberType),d=s.parse(e[2],2,array$1(s.expectedType||ValueType));if(!a||!d)return null;const b=d.type;return new At(b.itemType,a,d)}evaluate(e){const s=this.index.evaluate(e),a=this.input.evaluate(e);if(s<0)throw new RuntimeError$1(`Array index out of bounds: ${s} < 0.`);if(s>=a.length)throw new RuntimeError$1(`Array index out of bounds: ${s} > ${a.length-1}.`);if(s!==Math.floor(s))throw new RuntimeError$1(`Array index must be an integer, but found ${s} instead.`);return a[s]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var At$1=At;class In{constructor(e,s){this.type=BooleanType,this.needle=e,this.haystack=s}static parse(e,s){if(e.length!==3)return s.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=s.parse(e[1],1,ValueType),d=s.parse(e[2],2,ValueType);return!a||!d?null:isValidType(a.type,[BooleanType,StringType,NumberType,NullType,ValueType])?new In(a,d):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(a.type)} instead`)}evaluate(e){const s=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(a==null)return!1;if(!isValidNativeType(s,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(s))} instead.`);if(!isValidNativeType(a,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(a))} instead.`);return a.indexOf(s)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var In$1=In;class IndexOf{constructor(e,s,a){this.type=NumberType,this.needle=e,this.haystack=s,this.fromIndex=a}static parse(e,s){if(e.length<=2||e.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=s.parse(e[1],1,ValueType),d=s.parse(e[2],2,ValueType);if(!a||!d)return null;if(!isValidType(a.type,[BooleanType,StringType,NumberType,NullType,ValueType]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(a.type)} instead`);if(e.length===4){const b=s.parse(e[3],3,NumberType);return b?new IndexOf(a,d,b):null}else return new IndexOf(a,d)}evaluate(e){const s=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!isValidNativeType(s,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(s))} instead.`);if(!isValidNativeType(a,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(a))} instead.`);if(this.fromIndex){const d=this.fromIndex.evaluate(e);return a.indexOf(s,d)}return a.indexOf(s)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var IndexOf$1=IndexOf;class Match{constructor(e,s,a,d,b,_){this.inputType=e,this.type=s,this.input=a,this.cases=d,this.outputs=b,this.otherwise=_}static parse(e,s){if(e.length<5)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return s.error("Expected an even number of arguments.");let a,d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);const b={},_=[];for(let rt=2;rt<e.length-1;rt+=2){let ct=e[rt];const dt=e[rt+1];Array.isArray(ct)||(ct=[ct]);const pt=s.concat(rt);if(ct.length===0)return pt.error("Expected at least one branch label.");for(const xt of ct){if(typeof xt!="number"&&typeof xt!="string")return pt.error("Branch labels must be numbers or strings.");if(typeof xt=="number"&&Math.abs(xt)>Number.MAX_SAFE_INTEGER)return pt.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof xt=="number"&&Math.floor(xt)!==xt)return pt.error("Numeric branch labels must be integer values.");if(!a)a=typeOf(xt);else if(pt.checkSubtype(a,typeOf(xt)))return null;if(typeof b[String(xt)]<"u")return pt.error("Branch labels must be unique.");b[String(xt)]=_.length}const bt=s.parse(dt,rt,d);if(!bt)return null;d=d||bt.type,_.push(bt)}const _e=s.parse(e[1],1,ValueType);if(!_e)return null;const nt=s.parse(e[e.length-1],e.length-1,d);return!nt||_e.type.kind!=="value"&&s.concat(1).checkSubtype(a,_e.type)?null:new Match(a,d,_e,b,_,nt)}evaluate(e){const s=this.input.evaluate(e);return(typeOf(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),a=[],d={};for(const _ of s){const _e=d[this.cases[_]];_e===void 0?(d[this.cases[_]]=a.length,a.push([this.cases[_],[_]])):a[_e][1].push(_)}const b=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,_e]of a)_e.length===1?e.push(b(_e[0])):e.push(_e.map(b)),e.push(this.outputs[_].serialize());return e.push(this.otherwise.serialize()),e}}var Match$1=Match;class Case{constructor(e,s,a){this.type=e,this.branches=s,this.otherwise=a}static parse(e,s){if(e.length<4)return s.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return s.error("Expected an odd number of arguments.");let a;s.expectedType&&s.expectedType.kind!=="value"&&(a=s.expectedType);const d=[];for(let _=1;_<e.length-1;_+=2){const _e=s.parse(e[_],_,BooleanType);if(!_e)return null;const nt=s.parse(e[_+1],_+1,a);if(!nt)return null;d.push([_e,nt]),a=a||nt.type}const b=s.parse(e[e.length-1],e.length-1,a);return b?new Case(a,d,b):null}evaluate(e){for(const[s,a]of this.branches)if(s.evaluate(e))return a.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[s,a]of this.branches)e(s),e(a);e(this.otherwise)}outputDefined(){return this.branches.every(([e,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(s=>{e.push(s.serialize())}),e}}var Case$1=Case;let Slice$1=class iie{constructor(e,s,a,d){this.type=e,this.input=s,this.beginIndex=a,this.endIndex=d}static parse(e,s){if(e.length<=2||e.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=s.parse(e[1],1,ValueType),d=s.parse(e[2],2,NumberType);if(!a||!d)return null;if(!isValidType(a.type,[array$1(ValueType),StringType,ValueType]))return s.error(`Expected first argument to be of type array or string, but found ${toString$1(a.type)} instead`);if(e.length===4){const b=s.parse(e[3],3,NumberType);return b?new iie(a.type,a,d,b):null}else return new iie(a.type,a,d)}evaluate(e){const s=this.input.evaluate(e),a=this.beginIndex.evaluate(e);if(!isValidNativeType(s,["string","array"]))throw new RuntimeError$1(`Expected first argument to be of type array or string, but found ${toString$1(typeOf(s))} instead.`);if(this.endIndex){const d=this.endIndex.evaluate(e);return s.slice(a,d)}return s.slice(a)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}};var Slice$1$1=Slice$1;function isComparableType(o,e){return o==="=="||o==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function eq(o,e,s){return e===s}function neq(o,e,s){return e!==s}function lt(o,e,s){return e<s}function gt(o,e,s){return e>s}function lteq(o,e,s){return e<=s}function gteq(o,e,s){return e>=s}function eqCollate(o,e,s,a){return a.compare(e,s)===0}function neqCollate(o,e,s,a){return!eqCollate(o,e,s,a)}function ltCollate(o,e,s,a){return a.compare(e,s)<0}function gtCollate(o,e,s,a){return a.compare(e,s)>0}function lteqCollate(o,e,s,a){return a.compare(e,s)<=0}function gteqCollate(o,e,s,a){return a.compare(e,s)>=0}function makeComparison(o,e,s){const a=o!=="=="&&o!=="!=";return class tle{constructor(b,_,_e){this.type=BooleanType,this.lhs=b,this.rhs=_,this.collator=_e,this.hasUntypedArgument=b.type.kind==="value"||_.type.kind==="value"}static parse(b,_){if(b.length!==3&&b.length!==4)return _.error("Expected two or three arguments.");const _e=b[0];let nt=_.parse(b[1],1,ValueType);if(!nt)return null;if(!isComparableType(_e,nt.type))return _.concat(1).error(`"${_e}" comparisons are not supported for type '${toString$1(nt.type)}'.`);let rt=_.parse(b[2],2,ValueType);if(!rt)return null;if(!isComparableType(_e,rt.type))return _.concat(2).error(`"${_e}" comparisons are not supported for type '${toString$1(rt.type)}'.`);if(nt.type.kind!==rt.type.kind&&nt.type.kind!=="value"&&rt.type.kind!=="value")return _.error(`Cannot compare types '${toString$1(nt.type)}' and '${toString$1(rt.type)}'.`);a&&(nt.type.kind==="value"&&rt.type.kind!=="value"?nt=new Assertion$1(rt.type,[nt]):nt.type.kind!=="value"&&rt.type.kind==="value"&&(rt=new Assertion$1(nt.type,[rt])));let ct=null;if(b.length===4){if(nt.type.kind!=="string"&&rt.type.kind!=="string"&&nt.type.kind!=="value"&&rt.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(ct=_.parse(b[3],3,CollatorType),!ct)return null}return new tle(nt,rt,ct)}evaluate(b){const _=this.lhs.evaluate(b),_e=this.rhs.evaluate(b);if(a&&this.hasUntypedArgument){const nt=typeOf(_),rt=typeOf(_e);if(nt.kind!==rt.kind||!(nt.kind==="string"||nt.kind==="number"))throw new RuntimeError$1(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${nt.kind}, ${rt.kind}) instead.`)}if(this.collator&&!a&&this.hasUntypedArgument){const nt=typeOf(_),rt=typeOf(_e);if(nt.kind!=="string"||rt.kind!=="string")return e(b,_,_e)}return this.collator?s(b,_,_e,this.collator.evaluate(b)):e(b,_,_e)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}serialize(){const b=[o];return this.eachChild(_=>{b.push(_.serialize())}),b}}}const Equals=makeComparison("==",eq,eqCollate),NotEquals=makeComparison("!=",neq,neqCollate),LessThan=makeComparison("<",lt,ltCollate),GreaterThan=makeComparison(">",gt,gtCollate),LessThanOrEqual=makeComparison("<=",lteq,lteqCollate),GreaterThanOrEqual=makeComparison(">=",gteq,gteqCollate);class NumberFormat{constructor(e,s,a,d,b,_){this.type=StringType,this.number=e,this.locale=s,this.currency=a,this.unit=d,this.minFractionDigits=b,this.maxFractionDigits=_}static parse(e,s){if(e.length!==3)return s.error("Expected two arguments.");const a=s.parse(e[1],1,NumberType);if(!a)return null;const d=e[2];if(typeof d!="object"||Array.isArray(d))return s.error("NumberFormat options argument must be an object.");let b=null;if(d.locale&&(b=s.parse(d.locale,1,StringType),!b))return null;let _=null;if(d.currency&&(_=s.parse(d.currency,1,StringType),!_))return null;let _e=null;if(d.unit&&(_e=s.parse(d.unit,1,StringType),!_e))return null;let nt=null;if(d["min-fraction-digits"]&&(nt=s.parse(d["min-fraction-digits"],1,NumberType),!nt))return null;let rt=null;return d["max-fraction-digits"]&&(rt=s.parse(d["max-fraction-digits"],1,NumberType),!rt)?null:new NumberFormat(a,b,_,_e,nt,rt)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Length{constructor(e){this.type=NumberType,this.input=e}static parse(e,s){if(e.length!==2)return s.error(`Expected 1 argument, but found ${e.length-1} instead.`);const a=s.parse(e[1],1);return a?a.type.kind!=="array"&&a.type.kind!=="string"&&a.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${toString$1(a.type)} instead.`):new Length(a):null}evaluate(e){const s=this.input.evaluate(e);if(typeof s=="string")return s.length;if(Array.isArray(s))return s.length;throw new RuntimeError$1(`Expected value to be of type string or array, but found ${toString$1(typeOf(s))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(s=>{e.push(s.serialize())}),e}}var Length$1=Length;const expressions={"==":Equals,"!=":NotEquals,">":GreaterThan,"<":LessThan,">=":GreaterThanOrEqual,"<=":LessThanOrEqual,array:Assertion$1,at:At$1,boolean:Assertion$1,case:Case$1,coalesce:Coalesce$1,collator:CollatorExpression,format:FormatExpression,image:ImageExpression,in:In$1,"index-of":IndexOf$1,interpolate:Interpolate$1,"interpolate-hcl":Interpolate$1,"interpolate-lab":Interpolate$1,length:Length$1,let:Let$1,literal:Literal$1,match:Match$1,number:Assertion$1,"number-format":NumberFormat,object:Assertion$1,slice:Slice$1$1,step:Step$1$1,string:Assertion$1,"to-boolean":Coercion$1,"to-color":Coercion$1,"to-number":Coercion$1,"to-string":Coercion$1,var:Var$1,within:Within$1};function rgba(o,[e,s,a,d]){e=e.evaluate(o),s=s.evaluate(o),a=a.evaluate(o);const b=d?d.evaluate(o):1,_=validateRGBA(e,s,a,b);if(_)throw new RuntimeError$1(_);return new Color$1$1(e/255*b,s/255*b,a/255*b,b)}function has(o,e){return o in e}function get$1(o,e){const s=e[o];return typeof s>"u"?null:s}function binarySearch(o,e,s,a){for(;s<=a;){const d=s+a>>1;if(e[d]===o)return!0;e[d]>o?a=d-1:s=d+1}return!1}function varargs(o){return{type:o}}CompoundExpression$1.register(expressions,{error:[ErrorType,[StringType],(o,[e])=>{throw new RuntimeError$1(e.evaluate(o))}],typeof:[StringType,[ValueType],(o,[e])=>toString$1(typeOf(e.evaluate(o)))],"to-rgba":[array$1(NumberType,4),[ColorType],(o,[e])=>e.evaluate(o).toArray()],rgb:[ColorType,[NumberType,NumberType,NumberType],rgba],rgba:[ColorType,[NumberType,NumberType,NumberType,NumberType],rgba],has:{type:BooleanType,overloads:[[[StringType],(o,[e])=>has(e.evaluate(o),o.properties())],[[StringType,ObjectType],(o,[e,s])=>has(e.evaluate(o),s.evaluate(o))]]},get:{type:ValueType,overloads:[[[StringType],(o,[e])=>get$1(e.evaluate(o),o.properties())],[[StringType,ObjectType],(o,[e,s])=>get$1(e.evaluate(o),s.evaluate(o))]]},"feature-state":[ValueType,[StringType],(o,[e])=>get$1(e.evaluate(o),o.featureState||{})],properties:[ObjectType,[],o=>o.properties()],"geometry-type":[StringType,[],o=>o.geometryType()],id:[ValueType,[],o=>o.id()],zoom:[NumberType,[],o=>o.globals.zoom],pitch:[NumberType,[],o=>o.globals.pitch||0],"distance-from-center":[NumberType,[],o=>o.distanceFromCenter()],"heatmap-density":[NumberType,[],o=>o.globals.heatmapDensity||0],"line-progress":[NumberType,[],o=>o.globals.lineProgress||0],"sky-radial-progress":[NumberType,[],o=>o.globals.skyRadialProgress||0],accumulated:[ValueType,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[NumberType,varargs(NumberType),(o,e)=>{let s=0;for(const a of e)s+=a.evaluate(o);return s}],"*":[NumberType,varargs(NumberType),(o,e)=>{let s=1;for(const a of e)s*=a.evaluate(o);return s}],"-":{type:NumberType,overloads:[[[NumberType,NumberType],(o,[e,s])=>e.evaluate(o)-s.evaluate(o)],[[NumberType],(o,[e])=>-e.evaluate(o)]]},"/":[NumberType,[NumberType,NumberType],(o,[e,s])=>e.evaluate(o)/s.evaluate(o)],"%":[NumberType,[NumberType,NumberType],(o,[e,s])=>e.evaluate(o)%s.evaluate(o)],ln2:[NumberType,[],()=>Math.LN2],pi:[NumberType,[],()=>Math.PI],e:[NumberType,[],()=>Math.E],"^":[NumberType,[NumberType,NumberType],(o,[e,s])=>Math.pow(e.evaluate(o),s.evaluate(o))],sqrt:[NumberType,[NumberType],(o,[e])=>Math.sqrt(e.evaluate(o))],log10:[NumberType,[NumberType],(o,[e])=>Math.log(e.evaluate(o))/Math.LN10],ln:[NumberType,[NumberType],(o,[e])=>Math.log(e.evaluate(o))],log2:[NumberType,[NumberType],(o,[e])=>Math.log(e.evaluate(o))/Math.LN2],sin:[NumberType,[NumberType],(o,[e])=>Math.sin(e.evaluate(o))],cos:[NumberType,[NumberType],(o,[e])=>Math.cos(e.evaluate(o))],tan:[NumberType,[NumberType],(o,[e])=>Math.tan(e.evaluate(o))],asin:[NumberType,[NumberType],(o,[e])=>Math.asin(e.evaluate(o))],acos:[NumberType,[NumberType],(o,[e])=>Math.acos(e.evaluate(o))],atan:[NumberType,[NumberType],(o,[e])=>Math.atan(e.evaluate(o))],min:[NumberType,varargs(NumberType),(o,e)=>Math.min(...e.map(s=>s.evaluate(o)))],max:[NumberType,varargs(NumberType),(o,e)=>Math.max(...e.map(s=>s.evaluate(o)))],abs:[NumberType,[NumberType],(o,[e])=>Math.abs(e.evaluate(o))],round:[NumberType,[NumberType],(o,[e])=>{const s=e.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[NumberType,[NumberType],(o,[e])=>Math.floor(e.evaluate(o))],ceil:[NumberType,[NumberType],(o,[e])=>Math.ceil(e.evaluate(o))],"filter-==":[BooleanType,[StringType,ValueType],(o,[e,s])=>o.properties()[e.value]===s.value],"filter-id-==":[BooleanType,[ValueType],(o,[e])=>o.id()===e.value],"filter-type-==":[BooleanType,[StringType],(o,[e])=>o.geometryType()===e.value],"filter-<":[BooleanType,[StringType,ValueType],(o,[e,s])=>{const a=o.properties()[e.value],d=s.value;return typeof a==typeof d&&a<d}],"filter-id-<":[BooleanType,[ValueType],(o,[e])=>{const s=o.id(),a=e.value;return typeof s==typeof a&&s<a}],"filter->":[BooleanType,[StringType,ValueType],(o,[e,s])=>{const a=o.properties()[e.value],d=s.value;return typeof a==typeof d&&a>d}],"filter-id->":[BooleanType,[ValueType],(o,[e])=>{const s=o.id(),a=e.value;return typeof s==typeof a&&s>a}],"filter-<=":[BooleanType,[StringType,ValueType],(o,[e,s])=>{const a=o.properties()[e.value],d=s.value;return typeof a==typeof d&&a<=d}],"filter-id-<=":[BooleanType,[ValueType],(o,[e])=>{const s=o.id(),a=e.value;return typeof s==typeof a&&s<=a}],"filter->=":[BooleanType,[StringType,ValueType],(o,[e,s])=>{const a=o.properties()[e.value],d=s.value;return typeof a==typeof d&&a>=d}],"filter-id->=":[BooleanType,[ValueType],(o,[e])=>{const s=o.id(),a=e.value;return typeof s==typeof a&&s>=a}],"filter-has":[BooleanType,[ValueType],(o,[e])=>e.value in o.properties()],"filter-has-id":[BooleanType,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[BooleanType,[array$1(StringType)],(o,[e])=>e.value.indexOf(o.geometryType())>=0],"filter-id-in":[BooleanType,[array$1(ValueType)],(o,[e])=>e.value.indexOf(o.id())>=0],"filter-in-small":[BooleanType,[StringType,array$1(ValueType)],(o,[e,s])=>s.value.indexOf(o.properties()[e.value])>=0],"filter-in-large":[BooleanType,[StringType,array$1(ValueType)],(o,[e,s])=>binarySearch(o.properties()[e.value],s.value,0,s.value.length-1)],all:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(o,[e,s])=>e.evaluate(o)&&s.evaluate(o)],[varargs(BooleanType),(o,e)=>{for(const s of e)if(!s.evaluate(o))return!1;return!0}]]},any:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(o,[e,s])=>e.evaluate(o)||s.evaluate(o)],[varargs(BooleanType),(o,e)=>{for(const s of e)if(s.evaluate(o))return!0;return!1}]]},"!":[BooleanType,[BooleanType],(o,[e])=>!e.evaluate(o)],"is-supported-script":[BooleanType,[StringType],(o,[e])=>{const s=o.globals&&o.globals.isSupportedScript;return s?s(e.evaluate(o)):!0}],upcase:[StringType,[StringType],(o,[e])=>e.evaluate(o).toUpperCase()],downcase:[StringType,[StringType],(o,[e])=>e.evaluate(o).toLowerCase()],concat:[StringType,varargs(ValueType),(o,e)=>e.map(s=>toString(s.evaluate(o))).join("")],"resolved-locale":[StringType,[CollatorType],(o,[e])=>e.evaluate(o).resolvedLocale()]});var definitions=expressions;function success(o){return{result:"success",value:o}}function error(o){return{result:"error",value:o}}function supportsPropertyExpression(o){return o["property-type"]==="data-driven"}function supportsZoomExpression(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function supportsInterpolation(o){return!!o.expression&&o.expression.interpolated}function isFunction$2(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}class StyleExpression{constructor(e,s){this.expression=e,this._warningHistory={},this._evaluator=new EvaluationContext$1,this._defaultValue=s?getDefaultValue(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(e,s,a,d,b,_,_e,nt){return this._evaluator.globals=e,this._evaluator.feature=s,this._evaluator.featureState=a,this._evaluator.canonical=d||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=_e||null,this._evaluator.featureDistanceData=nt||null,this.expression.evaluate(this._evaluator)}evaluate(e,s,a,d,b,_,_e,nt){this._evaluator.globals=e,this._evaluator.feature=s||null,this._evaluator.featureState=a||null,this._evaluator.canonical=d||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=_e||null,this._evaluator.featureDistanceData=nt||null;try{const rt=this.expression.evaluate(this._evaluator);if(rt==null||typeof rt=="number"&&rt!==rt)return this._defaultValue;if(this._enumValues&&!(rt in this._enumValues))throw new RuntimeError$1(`Expected value to be one of ${Object.keys(this._enumValues).map(ct=>JSON.stringify(ct)).join(", ")}, but found ${JSON.stringify(rt)} instead.`);return rt}catch(rt){return this._warningHistory[rt.message]||(this._warningHistory[rt.message]=!0,typeof console<"u"&&console.warn(rt.message)),this._defaultValue}}}function isExpression(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in definitions}function createExpression(o,e){const s=new ParsingContext$1(definitions,[],e?getExpectedType(e):void 0),a=s.parse(o,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return a?success(new StyleExpression(a,e)):error(s.errors)}class ZoomConstantExpression{constructor(e,s){this.kind=e,this._styleExpression=s,this.isStateDependent=e!=="constant"&&!isStateConstant(s.expression)}evaluateWithoutErrorHandling(e,s,a,d,b,_){return this._styleExpression.evaluateWithoutErrorHandling(e,s,a,d,b,_)}evaluate(e,s,a,d,b,_){return this._styleExpression.evaluate(e,s,a,d,b,_)}}class ZoomDependentExpression{constructor(e,s,a,d){this.kind=e,this.zoomStops=a,this._styleExpression=s,this.isStateDependent=e!=="camera"&&!isStateConstant(s.expression),this.interpolationType=d}evaluateWithoutErrorHandling(e,s,a,d,b,_){return this._styleExpression.evaluateWithoutErrorHandling(e,s,a,d,b,_)}evaluate(e,s,a,d,b,_){return this._styleExpression.evaluate(e,s,a,d,b,_)}interpolationFactor(e,s,a){return this.interpolationType?Interpolate$1.interpolationFactor(this.interpolationType,e,s,a):0}}function createPropertyExpression(o,e){if(o=createExpression(o,e),o.result==="error")return o;const s=o.value.expression,a=isFeatureConstant(s);if(!a&&!supportsPropertyExpression(e))return error([new ParsingError$1("","data expressions not supported")]);const d=isGlobalPropertyConstant(s,["zoom","pitch","distance-from-center"]);if(!d&&!supportsZoomExpression(e))return error([new ParsingError$1("","zoom expressions not supported")]);const b=findZoomCurve(s);if(!b&&!d)return error([new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(b instanceof ParsingError$1)return error([b]);if(b instanceof Interpolate$1&&!supportsInterpolation(e))return error([new ParsingError$1("",'"interpolate" expressions cannot be used with this property')]);if(!b)return success(a?new ZoomConstantExpression("constant",o.value):new ZoomConstantExpression("source",o.value));const _=b instanceof Interpolate$1?b.interpolation:void 0;return success(a?new ZoomDependentExpression("camera",o.value,b.labels,_):new ZoomDependentExpression("composite",o.value,b.labels,_))}function findZoomCurve(o){let e=null;if(o instanceof Let$1)e=findZoomCurve(o.result);else if(o instanceof Coalesce$1){for(const s of o.args)if(e=findZoomCurve(s),e)break}else(o instanceof Step$1$1||o instanceof Interpolate$1)&&o.input instanceof CompoundExpression$1&&o.input.name==="zoom"&&(e=o);return e instanceof ParsingError$1||o.eachChild(s=>{const a=findZoomCurve(s);a instanceof ParsingError$1?e=a:!e&&a?e=new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&a&&e!==a&&(e=new ParsingError$1("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function getExpectedType(o){const e={color:ColorType,string:StringType,number:NumberType,enum:StringType,boolean:BooleanType,formatted:FormattedType,resolvedImage:ResolvedImageType};return o.type==="array"?array$1(e[o.value]||ValueType,o.length):e[o.type]}function getDefaultValue(o){return o.type==="color"&&(isFunction$2(o.default)||Array.isArray(o.default))?new Color$1$1(0,0,0,0):o.type==="color"?Color$1$1.parse(o.default)||null:o.default===void 0?null:o.default}function unbundle(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function deepUnbundle(o){if(Array.isArray(o))return o.map(deepUnbundle);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const e={};for(const s in o)e[s]=deepUnbundle(o[s]);return e}return unbundle(o)}var spec={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function isExpressionFilter(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const e of o.slice(1))if(!isExpressionFilter(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function createFilter(o,e="fill"){if(o==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};isExpressionFilter(o)||(o=convertFilter(o));const s=o;let a=!0;try{a=extractStaticFilter(s)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(s,null,2)}
        `)}const d=spec[`filter_${e}`],b=createExpression(a,d);let _=null;if(b.result==="error")throw new Error(b.value.map(ct=>`${ct.key}: ${ct.message}`).join(", "));_=(ct,dt,pt)=>b.value.evaluate(ct,dt,{},pt);let _e=null,nt=null;if(a!==s){const ct=createExpression(s,d);if(ct.result==="error")throw new Error(ct.value.map(dt=>`${dt.key}: ${dt.message}`).join(", "));_e=(dt,pt,bt,xt,wt)=>ct.value.evaluate(dt,pt,{},bt,void 0,void 0,xt,wt),nt=!isFeatureConstant(ct.value.expression)}_=_;const rt=geometryNeeded(a);return{filter:_,dynamicFilter:_e||void 0,needGeometry:rt,needFeature:!!nt}}function extractStaticFilter(o){if(!isDynamicFilter(o))return o;let e=deepUnbundle(o);return unionDynamicBranches(e),e=collapseDynamicBooleanExpressions(e),e}function collapseDynamicBooleanExpressions(o){if(!Array.isArray(o))return o;const e=collapsedExpression(o);return e===!0?e:e.map(s=>collapseDynamicBooleanExpressions(s))}function unionDynamicBranches(o){let e=!1;const s=[];if(o[0]==="case"){for(let a=1;a<o.length-1;a+=2)e=e||isDynamicFilter(o[a]),s.push(o[a+1]);s.push(o[o.length-1])}else if(o[0]==="match"){e=e||isDynamicFilter(o[1]);for(let a=2;a<o.length-1;a+=2)s.push(o[a+1]);s.push(o[o.length-1])}else if(o[0]==="step"){e=e||isDynamicFilter(o[1]);for(let a=1;a<o.length-1;a+=2)s.push(o[a+1])}e&&(o.length=0,o.push("any",...s));for(let a=1;a<o.length;a++)unionDynamicBranches(o[a])}function isDynamicFilter(o){if(!Array.isArray(o))return!1;if(isRootExpressionDynamic(o[0]))return!0;for(let e=1;e<o.length;e++){const s=o[e];if(isDynamicFilter(s))return!0}return!1}function isRootExpressionDynamic(o){return o==="pitch"||o==="distance-from-center"}const dynamicConditionExpressions=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function collapsedExpression(o){if(dynamicConditionExpressions.has(o[0]))for(let e=1;e<o.length;e++){const s=o[e];if(isDynamicFilter(s))return!0}return o}function compare(o,e){return o<e?-1:o>e?1:0}function geometryNeeded(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let e=1;e<o.length;e++)if(geometryNeeded(o[e]))return!0;return!1}function convertFilter(o){if(!o)return!0;const e=o[0];return o.length<=1?e!=="any":e==="=="?convertComparisonOp(o[1],o[2],"=="):e==="!="?convertNegation(convertComparisonOp(o[1],o[2],"==")):e==="<"||e===">"||e==="<="||e===">="?convertComparisonOp(o[1],o[2],e):e==="any"?convertDisjunctionOp(o.slice(1)):e==="all"?["all"].concat(o.slice(1).map(convertFilter)):e==="none"?["all"].concat(o.slice(1).map(convertFilter).map(convertNegation)):e==="in"?convertInOp(o[1],o.slice(2)):e==="!in"?convertNegation(convertInOp(o[1],o.slice(2))):e==="has"?convertHasOp(o[1]):e==="!has"?convertNegation(convertHasOp(o[1])):e==="within"?o:!0}function convertComparisonOp(o,e,s){switch(o){case"$type":return[`filter-type-${s}`,e];case"$id":return[`filter-id-${s}`,e];default:return[`filter-${s}`,o,e]}}function convertDisjunctionOp(o){return["any"].concat(o.map(convertFilter))}function convertInOp(o,e){if(e.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(s=>typeof s!=typeof e[0])?["filter-in-large",o,["literal",e.sort(compare)]]:["filter-in-small",o,["literal",e]]}}function convertHasOp(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function convertNegation(o){return["!",o]}var refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function deref(o,e){const s={};for(const a in o)a!=="ref"&&(s[a]=o[a]);return refProperties.forEach(a=>{a in e&&(s[a]=e[a])}),s}function derefLayers(o){o=o.slice();const e=Object.create(null);for(let s=0;s<o.length;s++)e[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=deref(o[s],e[o[s].ref]));return o}var fontWeights={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},sp=" ",italicRE=/(italic|oblique)$/i,fontCache={},mapboxToCssFont=function(o,e,s){var a=fontCache[o];if(!a){Array.isArray(o)||(o=[o]);for(var d=400,b="normal",_=[],_e,nt,rt=0,ct=o.length;rt<ct;++rt){var dt=o[rt],pt=dt.split(" "),bt=pt[pt.length-1].toLowerCase();bt=="normal"||bt=="italic"||bt=="oblique"?(b=nt?b:bt,nt=!0,pt.pop(),bt=pt[pt.length-1].toLowerCase()):italicRE.test(bt)&&(bt=bt.replace(italicRE,""),b=nt?b:pt[pt.length-1].replace(bt,""),nt=!0);for(var xt in fontWeights){var wt=pt.length>1?pt[pt.length-2].toLowerCase():"";if(bt==xt||bt==xt.replace("-","")||wt+"-"+bt==xt){d=_e?d:fontWeights[xt],pt.pop(),wt&&xt.startsWith(wt)&&pt.pop();break}}!_e&&typeof bt=="number"&&(d=bt,_e=!0);var Tt=pt.join(sp).replace("Klokantech Noto Sans","Noto Sans");Tt.indexOf(sp)!==-1&&(Tt='"'+Tt+'"'),_.push(Tt)}a=fontCache[o]=[b,d,_]}return a[0]+sp+a[1]+sp+e+"px"+(s?"/"+s:"")+sp+a[2]},mb2css=getDefaultExportFromCjs$1(mapboxToCssFont);const mapboxBaseUrl="https://api.mapbox.com";function getMapboxPath(o){const e="mapbox://";return o.indexOf(e)!==0?"":o.slice(e.length)}function normalizeSpriteUrl(o,e,s){const a=getMapboxPath(o);if(!a)return decodeURI(new URL(o,s).href);const d="sprites/";if(a.indexOf(d)!==0)throw new Error(`unexpected sprites url: ${o}`);const b=a.slice(d.length);return`${mapboxBaseUrl}/styles/v1/${b}/sprite?access_token=${e}`}function normalizeStyleUrl(o,e){const s=getMapboxPath(o);if(!s)return decodeURI(new URL(o,location.href).href);const a="styles/";if(s.indexOf(a)!==0)throw new Error(`unexpected style url: ${o}`);const d=s.slice(a.length);return`${mapboxBaseUrl}/styles/v1/${d}?&access_token=${e}`}function normalizeSourceUrl(o,e,s,a){const d=new URL(o,a),b=getMapboxPath(o);if(!b)return e&&(d.searchParams.has(s)||d.searchParams.set(s,e)),decodeURI(d.href);if(b==="mapbox.satellite"){const _=window.devicePixelRatio>=1.5?"@2x":"";return`https://api.mapbox.com/v4/${b}/{z}/{x}/{y}${_}.webp?access_token=${e}`}return`https://{a-d}.tiles.mapbox.com/v4/${b}/{z}/{x}/{y}.vector.pbf?access_token=${e}`}const functionCacheByStyleId={},filterCacheByStyleId={};let styleId=0;function getStyleId(o){return o.id||(o.id=styleId++),o.id}function getStyleFunctionKey(o,e){return getStyleId(o)+"."+getUid(e)}function getFunctionCache(o){let e=functionCacheByStyleId[o.id];return e||(e={},functionCacheByStyleId[getStyleId(o)]=e),e}function getFilterCache(o){let e=filterCacheByStyleId[o.id];return e||(e={},filterCacheByStyleId[getStyleId(o)]=e),e}function deg2rad(o){return o*Math.PI/180}const defaultResolutions=function(){const o=[];for(let e=78271.51696402048;o.length<=24;e/=2)o.push(e);return o}();function createCanvas(o,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(o,e);const s=document.createElement("canvas");return s.width=o,s.height=e,s}function getZoomForResolution(o,e){let s=0;const a=e.length;for(;s<a;++s)if(e[s]<o&&s+1<a){const b=e[s]/e[s+1];return s+Math.log(e[s]/o)/Math.log(b)}return a-1}function getResolutionForZoom(o,e){const s=Math.floor(o),a=Math.pow(2,o-s);return e[s]/a}const pendingRequests={};function fetchResource(o,e,s={},a){if(e in pendingRequests)return a&&(a.request=pendingRequests[e][0]),pendingRequests[e][1];const d=s.transformRequest&&s.transformRequest(e,o)||e,b=toPromise(()=>d).then(_=>(_ instanceof Request||(_=new Request(_)),_.headers.get("Accept")||_.headers.set("Accept","application/json"),a&&(a.request=_),fetch(_).then(function(_e){return delete pendingRequests[e],_e.ok?_e.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(_e){return delete pendingRequests[e],Promise.reject(new Error("Error fetching source "+e))})));return pendingRequests[e]=[d,b],b}function getGlStyle(o,e){if(typeof o=="string")if(o.trim().startsWith("{"))try{const s=JSON.parse(o);return Promise.resolve(s)}catch(s){return Promise.reject(s)}else return o=normalizeStyleUrl(o,e.accessToken),fetchResource("Style",o,e);else return Promise.resolve(o)}const tilejsonCache={};function getTileJson(o,e,s={}){const a=[e,JSON.stringify(o)].toString();let d=tilejsonCache[a];if(!d||s.transformRequest){let b;s.transformRequest&&(b=(_e,nt)=>{const rt=s.transformRequest&&s.transformRequest(nt,"Tiles")||nt;if(_e instanceof VectorTile$1)_e.setLoader((ct,dt,pt)=>{toPromise(()=>rt).then(bt=>{fetch(bt).then(xt=>xt.arrayBuffer()).then(xt=>{const Tt=_e.getFormat().readFeatures(xt,{extent:ct,featureProjection:pt});_e.setFeatures(Tt)}).catch(xt=>_e.setState(TileState.ERROR))})});else{const ct=_e.getImage();toPromise(()=>rt).then(dt=>{dt instanceof Request?fetch(dt).then(pt=>pt.blob()).then(pt=>{const bt=URL.createObjectURL(pt);ct.addEventListener("load",()=>URL.revokeObjectURL(bt)),ct.addEventListener("error",()=>URL.revokeObjectURL(bt)),ct.src=bt}).catch(pt=>_e.setState(TileState.ERROR)):ct.src=dt})}});const _=o.url;if(_&&!o.tiles){const _e=normalizeSourceUrl(_,s.accessToken,s.accessTokenParam||"access_token",e||location.href);if(_.startsWith("mapbox://"))d=Promise.resolve({tileJson:Object.assign({},o,{url:void 0,tiles:expandUrl(_e)}),tileLoadFunction:b});else{const nt={};d=fetchResource("Source",_e,s,nt).then(function(rt){return rt.tiles=rt.tiles.map(function(ct){return rt.scheme==="tms"&&(ct=ct.replace("{y}","{-y}")),normalizeSourceUrl(ct,s.accessToken,s.accessTokenParam||"access_token",nt.request.url)}),Promise.resolve({tileJson:rt,tileLoadFunction:b})})}}else o=Object.assign({},o,{tiles:o.tiles.map(function(_e){return o.scheme==="tms"&&(_e=_e.replace("{y}","{-y}")),normalizeSourceUrl(_e,s.accessToken,s.accessTokenParam||"access_token",e||location.href)})}),d=Promise.resolve({tileJson:Object.assign({},o),tileLoadFunction:b});tilejsonCache[a]=d}return d}function drawIconHalo(o,e,s,a){const d=[2*s*e.pixelRatio+e.width,2*s*e.pixelRatio+e.height],b=createCanvas(d[0],d[1]),_=b.getContext("2d");_.drawImage(o,e.x,e.y,e.width,e.height,s*e.pixelRatio,s*e.pixelRatio,e.width,e.height);const _e=_.getImageData(0,0,d[0],d[1]);_.globalCompositeOperation="destination-over",_.fillStyle=`rgba(${a.r*255},${a.g*255},${a.b*255},${a.a})`;const nt=_e.data;for(let rt=0,ct=_e.width;rt<ct;++rt)for(let dt=0,pt=_e.height;dt<pt;++dt){const bt=(dt*ct+rt)*4;nt[bt+3]>0&&_.arc(rt,dt,s*e.pixelRatio,0,2*Math.PI)}return _.fill(),b}function smoothstep(o,e,s){const a=Math.max(0,Math.min(1,(s-o)/(e-o)));return a*a*(3-2*a)}function drawSDF(o,e,s){const a=createCanvas(e.width,e.height),d=a.getContext("2d");d.drawImage(o,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const b=d.getImageData(0,0,e.width,e.height),_=b.data;for(let _e=0,nt=b.width;_e<nt;++_e)for(let rt=0,ct=b.height;rt<ct;++rt){const dt=(rt*nt+_e)*4,pt=_[dt+3]/255,bt=.75,xt=.1,wt=smoothstep(bt-xt,bt+xt,pt);wt>0?(_[dt+0]=Math.round(255*s.r*wt),_[dt+1]=Math.round(255*s.g*wt),_[dt+2]=Math.round(255*s.b*wt),_[dt+3]=Math.round(255*wt)):_[dt+3]=0}return d.putImageData(b,0,0),a}const hairSpacePool=Array(256).join("");function applyLetterSpacing(o,e){if(e>=.05){let s="";const a=o.split(`
`),d=hairSpacePool.slice(0,Math.round(e/.1));for(let b=0,_=a.length;b<_;++b)b>0&&(s+=`
`),s+=a[b].split("").join(d);return s}return o}let measureContext;function getMeasureContext(){return measureContext||(measureContext=createCanvas(1,1).getContext("2d")),measureContext}function measureText(o,e){return getMeasureContext().measureText(o).width+(o.length-1)*e}const measureCache={};function wrapText(o,e,s,a){if(o.indexOf(`
`)!==-1){const _=o.split(`
`),_e=[];for(let nt=0,rt=_.length;nt<rt;++nt)_e.push(wrapText(_[nt],e,s,a));return _e.join(`
`)}const d=s+","+e+","+o+","+a;let b=measureCache[d];if(!b){const _=o.split(" ");if(_.length>1){const _e=getMeasureContext();_e.font=e;const rt=_e.measureText("M").width*s;let ct="";const dt=[];for(let pt=0,bt=_.length;pt<bt;++pt){const xt=_[pt],wt=ct+(ct?" ":"")+xt;measureText(wt,a)<=rt?ct=wt:(ct&&dt.push(ct),ct=xt)}ct&&dt.push(ct);for(let pt=0,bt=dt.length;pt<bt&&bt>1;++pt){const xt=dt[pt];if(measureText(xt,a)<rt*.35){const wt=pt>0?measureText(dt[pt-1],a):1/0,Tt=pt<bt-1?measureText(dt[pt+1],a):1/0;dt.splice(pt,1),bt-=1,wt<Tt?(dt[pt-1]+=" "+xt,pt-=1):dt[pt]=xt+" "+dt[pt]}}for(let pt=0,bt=dt.length-1;pt<bt;++pt){const xt=dt[pt],wt=dt[pt+1];if(measureText(xt,a)>rt*.7&&measureText(wt,a)<rt*.6){const Tt=xt.split(" "),Rt=Tt.pop();measureText(Rt,a)<rt*.2&&(dt[pt]=Tt.join(" "),dt[pt+1]=Rt+" "+wt),bt-=1}}b=dt.join(`
`)}else b=o;b=applyLetterSpacing(b,a),measureCache[d]=b}return b}const fontFamilyRegEx=/font-family: ?([^;]*);/,stripQuotesRegEx=/("|')/g;let loadedFontFamilies;function hasFontFamily(o){if(!loadedFontFamilies){loadedFontFamilies={};const e=document.styleSheets;for(let s=0,a=e.length;s<a;++s){const d=e[s];try{const b=d.rules||d.cssRules;if(b)for(let _=0,_e=b.length;_<_e;++_){const nt=b[_];if(nt.type==5){const rt=nt.cssText.match(fontFamilyRegEx);loadedFontFamilies[rt[1].replace(stripQuotesRegEx,"")]=!0}}}catch{}}}return o in loadedFontFamilies}const processedFontFamilies={};function getFonts(o,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const s=o.toString();if(s in processedFontFamilies)return processedFontFamilies[s];const a=[];for(let d=0,b=o.length;d<b;++d){o[d]=o[d].replace("Arial Unicode MS","Arial");const _=o[d],_e=mb2css(_,1);registerFont(_e);const nt=_e.split(" ");a.push([nt.slice(3).join(" ").replace(/"/g,""),nt[1],nt[0]])}for(let d=0,b=a.length;d<b;++d){const _=a[d],_e=_[0];if(!hasFontFamily(_e)&&checkedFonts.get(`${_[2]}
${_[1]} 
${_e}`)!==100){const nt=e.replace("{font-family}",_e.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",_e.replace(/ /g,"+")).replace("{fontweight}",_[1]).replace("{-fontstyle}",_[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",_[2]);if(!document.querySelector('link[href="'+nt+'"]')){const rt=document.createElement("link");rt.href=nt,rt.rel="stylesheet",document.head.appendChild(rt)}}}return processedFontFamilies[s]=o,o}const types={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},anchor={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},expressionData=function(o,e){const s=createPropertyExpression(o,e);if(s.result==="error")throw new Error(s.value.map(a=>`${a.key}: ${a.message}`).join(", "));return s.value},emptyObj$1={},zoomObj={zoom:0};let renderFeatureCoordinates,renderFeature;function getValue(o,e,s,a,d,b,_){const _e=o.id;b||(b={},console.warn("No functionCache provided to getValue()")),b[_e]||(b[_e]={});const nt=b[_e];if(!nt[s]){let rt=(o[e]||emptyObj$1)[s];const ct=spec[`${e}_${o.type}`][s];rt===void 0&&(rt=ct.default);let dt=isExpression(rt);if(!dt&&isFunction$2(rt)&&(rt=convertFunction(rt,ct),dt=!0),dt){const pt=expressionData(rt,ct);nt[s]=pt.evaluate.bind(pt)}else ct.type=="color"&&(rt=Color$1$1.parse(rt)),nt[s]=function(){return rt}}return zoomObj.zoom=a,nt[s](zoomObj,d,_)}function getDeclutterMode(o,e,s,a,d){return getValue(o,"layout",`${a}-allow-overlap`,e,s,d)?getValue(o,"layout",`${a}-ignore-placement`,e,s,d)?"none":"obstacle":"declutter"}function evaluateFilter(o,e,s,a,d){return d||console.warn("No filterCache provided to evaluateFilter()"),o in d||(d[o]=createFilter(e).filter),zoomObj.zoom=a,d[o](zoomObj,s)}function colorWithOpacity(o,e){if(o){if(o.a===0||e===0)return;const s=o.a;return e=e===void 0?1:e,s===0?"transparent":"rgba("+Math.round(o.r*255/s)+","+Math.round(o.g*255/s)+","+Math.round(o.b*255/s)+","+s*e+")"}return o}const templateRegEx=/\{[^{}}]*\}/g;function fromTemplate(o,e){return o.replace(templateRegEx,function(s){return e[s.slice(1,-1)]||""})}const styleFunctionArgs={};function stylefunction(o,e,s,a=defaultResolutions,d=void 0,b=void 0,_=void 0,_e=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");styleFunctionArgs[getStyleFunctionKey(e,o)]=Array.from(arguments);let nt,rt,ct;if(b){if(typeof Image<"u"){const Nt=new Image;let Jt;toPromise(()=>b).then(dn=>{dn instanceof Request?fetch(dn).then(Pn=>Pn.blob()).then(Pn=>{Jt=URL.createObjectURL(Pn),Nt.src=Jt}).catch(()=>{}):(Nt.crossOrigin="anonymous",Nt.src=dn,Jt&&URL.revokeObjectURL(Jt))}),Nt.onload=function(){nt=Nt,rt=[Nt.width,Nt.height],o.changed(),Nt.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const Nt=self;Nt.postMessage({action:"loadImage",src:b}),Nt.addEventListener("message",function(dn){dn.data.action==="imageLoaded"&&dn.data.src===b&&(nt=dn.data.image,rt=[nt.width,nt.height])})}}const dt=derefLayers(e.layers),pt={},bt=[],xt={},wt={},Tt=getFunctionCache(e),Rt=getFilterCache(e);let Mt;for(let Nt=0,Jt=dt.length;Nt<Jt;++Nt){const dn=dt[Nt],Pn=dn.id;if(typeof s=="string"&&dn.source==s||Array.isArray(s)&&s.indexOf(Pn)!==-1){const an=dn["source-layer"];if(Mt){if(dn.source!==Mt)throw new Error(`Layer "${Pn}" does not use source "${Mt}`)}else{Mt=dn.source;const ao=e.sources[Mt];if(!ao)throw new Error(`Source "${Mt}" is not defined`);const hn=ao.type;if(hn!=="vector"&&hn!=="geojson")throw new Error(`Source "${Mt}" is not of type "vector" or "geojson", but "${hn}"`)}let Vt=pt[an];Vt||(Vt=[],pt[an]=Vt),Vt.push({layer:dn,index:Nt}),bt.push(Pn)}}const Et=new Stroke,$t=new Fill,Xt=[],Zt=function(Nt,Jt,dn){const Pn=Nt.getProperties(),an=pt[Pn.layer];if(!an)return;let Vt=a.indexOf(Jt);Vt==-1&&(Vt=getZoomForResolution(Jt,a));const ao=types[Nt.getGeometry().getType()],hn={id:Nt.getId(),properties:Pn,type:ao},fn=o.get("mapbox-featurestate")[Nt.getId()];let It=-1;for(let Vn=0,ln=an.length;Vn<ln;++Vn){const uo=an[Vn],Ln=uo.layer,An=Ln.id;if(dn!==void 0&&dn!==An)continue;const Wn=Ln.layout||emptyObj$1,er=Ln.paint||emptyObj$1;if(Wn.visibility==="none"||"minzoom"in Ln&&Vt<Ln.minzoom||"maxzoom"in Ln&&Vt>=Ln.maxzoom)continue;const no=Ln.filter;if(!no||evaluateFilter(An,no,hn,Vt,Rt)){let Ro,On,_o,Yt,jr,lo;const Ho=uo.index;if(ao==3&&(Ln.type=="fill"||Ln.type=="fill-extrusion"))if(On=getValue(Ln,"paint",Ln.type+"-opacity",Vt,hn,Tt,fn),Ln.type+"-pattern"in er){const Jn=getValue(Ln,"paint",Ln.type+"-pattern",Vt,hn,Tt,fn);if(Jn){const bo=typeof Jn=="string"?fromTemplate(Jn,Pn):Jn.toString();if(nt&&d&&d[bo]){++It,lo=Xt[It],(!lo||!lo.getFill()||lo.getStroke()||lo.getText())&&(lo=new Style({fill:new Fill}),Xt[It]=lo),_o=lo.getFill(),lo.setZIndex(Ho);const $n=bo+"."+On;let oo=wt[$n];if(!oo){const wo=d[bo],Oo=createCanvas(wo.width,wo.height),Ir=Oo.getContext("2d");Ir.globalAlpha=On,Ir.drawImage(nt,wo.x,wo.y,wo.width,wo.height,0,0,wo.width,wo.height),oo=Ir.createPattern(Oo,"repeat"),wt[$n]=oo}_o.setColor(oo)}}}else Ro=colorWithOpacity(getValue(Ln,"paint",Ln.type+"-color",Vt,hn,Tt,fn),On),Ln.type+"-outline-color"in er&&(jr=colorWithOpacity(getValue(Ln,"paint",Ln.type+"-outline-color",Vt,hn,Tt,fn),On)),jr||(jr=Ro),(Ro||jr)&&(++It,lo=Xt[It],(!lo||Ro&&!lo.getFill()||!Ro&&lo.getFill()||jr&&!lo.getStroke()||!jr&&lo.getStroke()||lo.getText())&&(lo=new Style({fill:Ro?new Fill:void 0,stroke:jr?new Stroke:void 0}),Xt[It]=lo),Ro&&(_o=lo.getFill(),_o.setColor(Ro)),jr&&(Yt=lo.getStroke(),Yt.setColor(jr),Yt.setWidth(.5)),lo.setZIndex(Ho));if(ao!=1&&Ln.type=="line"){"line-pattern"in er?Ro=void 0:Ro=colorWithOpacity(getValue(Ln,"paint","line-color",Vt,hn,Tt,fn),getValue(Ln,"paint","line-opacity",Vt,hn,Tt,fn));const Jn=getValue(Ln,"paint","line-width",Vt,hn,Tt,fn);Ro&&Jn>0&&(++It,lo=Xt[It],(!lo||!lo.getStroke()||lo.getFill()||lo.getText())&&(lo=new Style({stroke:new Stroke}),Xt[It]=lo),Yt=lo.getStroke(),Yt.setLineCap(getValue(Ln,"layout","line-cap",Vt,hn,Tt,fn)),Yt.setLineJoin(getValue(Ln,"layout","line-join",Vt,hn,Tt,fn)),Yt.setMiterLimit(getValue(Ln,"layout","line-miter-limit",Vt,hn,Tt,fn)),Yt.setColor(Ro),Yt.setWidth(Jn),Yt.setLineDash(er["line-dasharray"]?getValue(Ln,"paint","line-dasharray",Vt,hn,Tt,fn).map(function(bo){return bo*Jn}):null),lo.setZIndex(Ho))}let mo=!1,Co=null,mn=0,wn,Dn,rn;if((ao==1||ao==2)&&"icon-image"in Wn){const Jn=getValue(Ln,"layout","icon-image",Vt,hn,Tt,fn);if(Jn){wn=typeof Jn=="string"?fromTemplate(Jn,Pn):Jn.toString();let bo;const $n=_e?_e(o,wn):void 0;if(nt&&d&&d[wn]||$n){const oo=getValue(Ln,"layout","icon-rotation-alignment",Vt,hn,Tt,fn);if(ao==2){const wo=Nt.getGeometry();if(wo.getFlatMidpoint||wo.getFlatMidpoints){const Oo=wo.getExtent();if(Math.sqrt(Math.max(Math.pow((Oo[2]-Oo[0])/Jt,2),Math.pow((Oo[3]-Oo[1])/Jt,2)))>150){const sr=wo.getType()==="MultiLineString"?wo.getFlatMidpoints():wo.getFlatMidpoint();if(renderFeature||(renderFeatureCoordinates=[NaN,NaN],renderFeature=new RenderFeature("Point",renderFeatureCoordinates,[],2,{},void 0)),bo=renderFeature,renderFeatureCoordinates[0]=sr[0],renderFeatureCoordinates[1]=sr[1],getValue(Ln,"layout","symbol-placement",Vt,hn,Tt,fn)==="line"&&oo==="map"){const as=wo.getStride(),_r=wo.getFlatCoordinates();for(let fs=0,Ss=_r.length-as;fs<Ss;fs+=as){const As=_r[fs],_l=_r[fs+1],Zr=_r[fs+as],Ml=_r[fs+as+1],tr=Math.min(As,Zr),Ms=Math.min(_l,Ml),cu=Math.max(As,Zr),ou=Math.max(_l,Ml);if(sr[0]>=tr&&sr[0]<=cu&&sr[1]>=Ms&&sr[1]<=ou){mn=Math.atan2(_l-Ml,Zr-As);break}}}}}}if(ao!==2||bo){const wo=getValue(Ln,"layout","icon-size",Vt,hn,Tt,fn),Oo=er["icon-color"]!==void 0?getValue(Ln,"paint","icon-color",Vt,hn,Tt,fn):null;if(!Oo||Oo.a!==0){const Ir=getValue(Ln,"paint","icon-halo-color",Vt,hn,Tt,fn),sr=getValue(Ln,"paint","icon-halo-width",Vt,hn,Tt,fn);let vr=`${wn}.${wo}.${sr}.${Ir}`;if(Oo!==null&&(vr+=`.${Oo}`),Dn=xt[vr],!Dn){const as=getDeclutterMode(Ln,Vt,hn,"icon",Tt);let _r;"icon-offset"in Wn&&(_r=getValue(Ln,"layout","icon-offset",Vt,hn,Tt,fn).slice(0),_r[0]*=wo,_r[1]*=-wo);let fs=Oo?[Oo.r*255,Oo.g*255,Oo.b*255,Oo.a]:void 0;if($n){const Ss={color:fs,rotateWithView:oo==="map",displacement:_r,declutterMode:as,scale:wo};typeof $n=="string"?Ss.src=$n:(Ss.img=$n,Ss.imgSize=[$n.width,$n.height]),Dn=new Icon(Ss)}else{const Ss=d[wn];let As,_l,Zr;sr?Ss.sdf?(As=drawIconHalo(drawSDF(nt,Ss,Oo||[0,0,0,1]),{x:0,y:0,width:Ss.width,height:Ss.height,pixelRatio:Ss.pixelRatio},sr,Ir),fs=void 0):As=drawIconHalo(nt,Ss,sr,Ir):(Ss.sdf?(ct||(ct=drawSDF(nt,{x:0,y:0,width:rt[0],height:rt[1]},{r:1,g:1,b:1,a:1})),As=ct):As=nt,_l=[Ss.width,Ss.height],Zr=[Ss.x,Ss.y]),Dn=new Icon({color:fs,img:As,imgSize:rt,size:_l,offset:Zr,rotateWithView:oo==="map",scale:wo/Ss.pixelRatio,displacement:_r,declutterMode:as})}xt[vr]=Dn}}Dn&&(++It,lo=Xt[It],(!lo||!lo.getImage()||lo.getFill()||lo.getStroke())&&(lo=new Style,Xt[It]=lo),lo.setGeometry(bo),Dn.setRotation(mn+deg2rad(getValue(Ln,"layout","icon-rotate",Vt,hn,Tt,fn))),Dn.setOpacity(getValue(Ln,"paint","icon-opacity",Vt,hn,Tt,fn)),Dn.setAnchor(anchor[getValue(Ln,"layout","icon-anchor",Vt,hn,Tt,fn)]),lo.setImage(Dn),Co=lo.getText(),lo.setText(void 0),lo.setZIndex(Ho),mo=!0,rn=!1)}else rn=!0}}}if(ao==1&&Ln.type==="circle"){++It,lo=Xt[It],(!lo||!lo.getImage()||lo.getFill()||lo.getStroke())&&(lo=new Style,Xt[It]=lo);const Jn="circle-radius"in er?getValue(Ln,"paint","circle-radius",Vt,hn,Tt,fn):5,bo=colorWithOpacity(getValue(Ln,"paint","circle-stroke-color",Vt,hn,Tt,fn),getValue(Ln,"paint","circle-stroke-opacity",Vt,hn,Tt,fn)),$n=getValue(Ln,"paint","circle-translate",Vt,hn,Tt,fn),oo=colorWithOpacity(getValue(Ln,"paint","circle-color",Vt,hn,Tt,fn),getValue(Ln,"paint","circle-opacity",Vt,hn,Tt,fn)),wo=getValue(Ln,"paint","circle-stroke-width",Vt,hn,Tt,fn),Oo=Jn+"."+bo+"."+oo+"."+wo+"."+$n[0]+"."+$n[1];Dn=xt[Oo],Dn||(Dn=new CircleStyle({radius:Jn,displacement:[$n[0],-$n[1]],stroke:bo&&wo>0?new Stroke({width:wo,color:bo}):void 0,fill:oo?new Fill({color:oo}):void 0,declutterMode:"none"}),xt[Oo]=Dn),lo.setImage(Dn),Co=lo.getText(),lo.setText(void 0),lo.setGeometry(void 0),lo.setZIndex(Ho),mo=!0}let Cn,Nn,zn,So,Hn,Tn;if("text-field"in Wn){So=Math.round(getValue(Ln,"layout","text-size",Vt,hn,Tt,fn));const Jn=getValue(Ln,"layout","text-font",Vt,hn,Tt,fn);zn=getValue(Ln,"layout","text-line-height",Vt,hn,Tt,fn),Nn=mb2css(_?_(Jn,e.metadata?e.metadata["ol:webfonts"]:void 0):Jn,So,zn),Nn.includes("sans-serif")||(Nn+=",sans-serif"),Hn=getValue(Ln,"layout","text-letter-spacing",Vt,hn,Tt,fn),Tn=getValue(Ln,"layout","text-max-width",Vt,hn,Tt,fn);const bo=getValue(Ln,"layout","text-field",Vt,hn,Tt,fn);typeof bo=="object"&&bo.sections?bo.sections.length===1?Cn=bo.toString():Cn=bo.sections.reduce(($n,oo,wo)=>{const Oo=oo.fontStack?oo.fontStack.split(","):Jn,Ir=mb2css(_?_(Oo):Oo,So*(oo.scale||1),zn);let sr=oo.text;if(sr===`
`)return $n.push(`
`,""),$n;if(ao==2){$n.push(applyLetterSpacing(sr,Hn),Ir);return}sr=wrapText(sr,Ir,Tn,Hn).split(`
`);for(let vr=0,as=sr.length;vr<as;++vr)vr>0&&$n.push(`
`,""),$n.push(sr[vr],Ir);return $n},[]):Cn=fromTemplate(bo,Pn).trim(),On=getValue(Ln,"paint","text-opacity",Vt,hn,Tt,fn)}if(Cn&&On&&!rn){mo||(++It,lo=Xt[It],(!lo||!lo.getText()||lo.getFill()||lo.getStroke())&&(lo=new Style,Xt[It]=lo),lo.setImage(void 0),lo.setGeometry(void 0));const Jn=getDeclutterMode(Ln,Vt,hn,"text",Tt);lo.getText()||lo.setText(Co),Co=lo.getText(),(!Co||"getDeclutterMode"in Co&&Co.getDeclutterMode()!==Jn)&&(Co=new Text$1({padding:[2,2,2,2],declutterMode:Jn}),lo.setText(Co));const bo=getValue(Ln,"layout","text-transform",Vt,hn,Tt,fn);bo=="uppercase"?Cn=Array.isArray(Cn)?Cn.map((Ml,tr)=>tr%2?Ml:Ml.toUpperCase()):Cn.toUpperCase():bo=="lowercase"&&(Cn=Array.isArray(Cn)?Cn.map((Ml,tr)=>tr%2?Ml:Ml.toLowerCase()):Cn.toLowerCase());const $n=Array.isArray(Cn)?Cn:ao==2?applyLetterSpacing(Cn,Hn):wrapText(Cn,Nn,Tn,Hn);Co.setText($n),Co.setFont(Nn),Co.setRotation(deg2rad(getValue(Ln,"layout","text-rotate",Vt,hn,Tt,fn)));const oo=getValue(Ln,"layout","text-anchor",Vt,hn,Tt,fn),wo=mo||ao==1?"point":getValue(Ln,"layout","symbol-placement",Vt,hn,Tt,fn);let Oo;if(wo==="line-center"?(Co.setPlacement("line"),Oo="center"):Co.setPlacement(wo),wo==="line"&&typeof Co.setRepeat=="function"){const Ml=getValue(Ln,"layout","symbol-spacing",Vt,hn,Tt,fn);Co.setRepeat(Ml*2)}Co.setOverflow(wo==="point");let Ir=getValue(Ln,"paint","text-halo-width",Vt,hn,Tt,fn);const sr=getValue(Ln,"layout","text-offset",Vt,hn,Tt,fn),vr=getValue(Ln,"paint","text-translate",Vt,hn,Tt,fn);let as=0,_r=0;if(wo=="point"){Oo="center",oo.indexOf("left")!==-1?(Oo="left",_r=Ir):oo.indexOf("right")!==-1&&(Oo="right",_r=-Ir);const Ml=getValue(Ln,"layout","text-rotation-alignment",Vt,hn,Tt,fn);Co.setRotateWithView(Ml=="map")}else Co.setMaxAngle(deg2rad(getValue(Ln,"layout","text-max-angle",Vt,hn,Tt,fn))*Cn.length/$n.length),Co.setRotateWithView(!1);Co.setTextAlign(Oo);let fs="middle";oo.indexOf("bottom")==0?(fs="bottom",as=-Ir-.5*(zn-1)*So):oo.indexOf("top")==0&&(fs="top",as=Ir+.5*(zn-1)*So),Co.setTextBaseline(fs);const Ss=getValue(Ln,"layout","text-justify",Vt,hn,Tt,fn);Co.setJustify(Ss==="auto"?void 0:Ss),Co.setOffsetX(sr[0]*So+_r+vr[0]),Co.setOffsetY(sr[1]*So+as+vr[1]),$t.setColor(colorWithOpacity(getValue(Ln,"paint","text-color",Vt,hn,Tt,fn),On)),Co.setFill($t);const As=colorWithOpacity(getValue(Ln,"paint","text-halo-color",Vt,hn,Tt,fn),On);if(As&&Ir>0){Et.setColor(As),Ir*=2;const Ml=.5*So;Et.setWidth(Ir<=Ml?Ir:Ml),Co.setStroke(Et)}else Co.setStroke(void 0);const _l=getValue(Ln,"layout","text-padding",Vt,hn,Tt,fn),Zr=Co.getPadding();_l!==Zr[0]&&(Zr[0]=_l,Zr[1]=_l,Zr[2]=_l,Zr[3]=_l),lo.setZIndex(Ho)}}}if(It>-1)return Xt.length=It+1,Xt};return o.setStyle(Zt),o.set("mapbox-source",Mt),o.set("mapbox-layers",bt),o.set("mapbox-featurestate",o.get("mapbox-featurestate")||{}),Zt}function getTileResolutions(o,e=512){return o.getExtent()?createXYZ({extent:o.getExtent(),tileSize:e,maxZoom:22}).getResolutions():defaultResolutions}function completeOptions(o,e){return e.accessToken||(e=Object.assign({},e),new URL(o).searchParams.forEach((a,d)=>{e.accessToken=a,e.accessTokenParam=d})),e}function applyStyle(o,e,s="",a={},d=void 0){let b,_,_e,nt,rt=!0;return typeof s!="string"&&!Array.isArray(s)?(_e=s,nt=_e.source||_e.layers,a=_e):nt=s,typeof a=="string"?(b=a,_e={}):(b=a.styleUrl,_e=a),_e.updateSource===!1&&(rt=!1),d||(d=_e.resolutions),!b&&typeof e=="string"&&!e.trim().startsWith("{")&&(b=e),b&&(b=b.startsWith("data:")?location.href:normalizeStyleUrl(b,_e.accessToken),_e=completeOptions(b,_e)),new Promise(function(ct,dt){getGlStyle(e,_e).then(function(pt){if(pt.version!=8)return dt(new Error("glStyle version 8 required."));if(!(o instanceof VectorLayer||o instanceof VectorTileLayer))return dt(new Error("Can only apply to VectorLayer or VectorTileLayer"));const bt=o instanceof VectorTileLayer?"vector":"geojson";if(nt?Array.isArray(nt)?_=pt.layers.find(function($t){return $t.id===nt[0]}).source:_=nt:(_=Object.keys(pt.sources).find(function($t){return pt.sources[$t].type===bt}),nt=_),!_)return dt(new Error(`No ${bt} source found in the glStyle.`));function xt(){if(!rt)return Promise.resolve();if(o instanceof VectorTileLayer)return setupVectorSource(pt.sources[_],b,_e).then(function(Nt){const Jt=o.getSource();Jt?Nt!==Jt&&(Jt.setTileUrlFunction(Nt.getTileUrlFunction()),typeof Jt.setUrls=="function"&&typeof Nt.getUrls=="function"&&Jt.setUrls(Nt.getUrls()),Jt.format_||(Jt.format_=Nt.format_),Jt.getAttributions()||Jt.setAttributions(Nt.getAttributions()),Jt.getTileLoadFunction()===defaultLoadFunction&&Jt.setTileLoadFunction(Nt.getTileLoadFunction()),equivalent(Jt.getProjection(),Nt.getProjection())&&(Jt.tileGrid=Nt.getTileGrid())):o.setSource(Nt);const dn=o.getSource().getTileGrid();!isFinite(o.getMaxResolution())&&!isFinite(o.getMinZoom())&&dn.getMinZoom()>0&&o.setMaxResolution(getResolutionForZoom(Math.max(0,dn.getMinZoom()-1e-12),dn.getResolutions()))});const $t=pt.sources[_];let Xt=o.getSource();(!Xt||Xt.get("mapbox-source")!==$t)&&(Xt=setupGeoJSONSource($t,b,_e));const Zt=o.getSource();return Zt?Xt!==Zt&&(Zt.getAttributions()||Zt.setAttributions(Xt.getAttributions()),Zt.format_||(Zt.format_=Xt.getFormat()),Zt.url_=Xt.getUrl()):o.setSource(Xt),Promise.resolve()}let wt,Tt,Rt,Mt;function Et(){if(!Mt&&(!pt.sprite||Tt)){if(_e.projection&&!d){const Xt=get$3(_e.projection).getUnits();Xt!=="m"&&(d=defaultResolutions.map(Zt=>Zt/METERS_PER_UNIT$1[Xt]))}Mt=stylefunction(o,pt,nt,d,Tt,Rt,($t,Xt=_e.webfonts)=>getFonts($t,Xt),_e.getImage),o.getStyle()?xt().then(ct).catch(dt):dt(new Error(`Nothing to show for source [${_}]`))}else Mt?(o.setStyle(Mt),xt().then(ct).catch(dt)):dt(new Error("Something went wrong trying to apply style."))}if(pt.sprite){const $t=new URL(normalizeSpriteUrl(pt.sprite,_e.accessToken,b||location.href));wt=window.devicePixelRatio>=1.5?.5:1;const Xt=wt==.5?"@2x":"";let Zt=$t.origin+$t.pathname+Xt+".json"+$t.search;new Promise(function(Nt,Jt){fetchResource("Sprite",Zt,_e).then(Nt).catch(function(dn){Zt=$t.origin+$t.pathname+".json"+$t.search,fetchResource("Sprite",Zt,_e).then(Nt).catch(Jt)})}).then(function(Nt){if(Nt===void 0&&dt(new Error("No sprites found.")),Tt=Nt,Rt=$t.origin+$t.pathname+Xt+".png"+$t.search,_e.transformRequest){const Jt=_e.transformRequest(Rt,"SpriteImage")||Rt;(Jt instanceof Request||Jt instanceof Promise)&&(Rt=Jt)}Et()}).catch(function(Nt){dt(new Error(`Sprites cannot be loaded: ${Zt}: ${Nt.message}`))})}else Et()}).catch(dt)})}function extentFromTileJSON(o,e){const s=o.bounds;if(s){const a=fromLonLat([s[0],s[1]],e),d=fromLonLat([s[2],s[3]],e);return[a[0],a[1],d[0],d[1]]}return get$3(e).getExtent()}function sourceOptionsFromTileJSON(o,e,s){const a=new TileJSON({tileJSON:e,tileSize:o.tileSize||e.tileSize||512}),d=a.getTileJSON(),b=a.getTileGrid(),_=get$3(s.projection||"EPSG:3857"),_e=extentFromTileJSON(d,_),nt=_.getExtent(),rt=d.minzoom||0,ct=d.maxzoom||22,dt={attributions:a.getAttributions(),projection:_,tileGrid:new TileGrid({origin:nt?getTopLeft(nt):b.getOrigin(0),extent:_e||b.getExtent(),minZoom:rt,resolutions:getTileResolutions(_,e.tileSize).slice(0,ct+1),tileSize:b.getTileSize(0)})};return Array.isArray(d.tiles)?dt.urls=d.tiles:dt.url=d.tiles,dt}function setupVectorSource(o,e,s){return new Promise(function(a,d){getTileJson(o,e,s).then(function({tileJson:b,tileLoadFunction:_}){const _e=sourceOptionsFromTileJSON(o,b,s);_e.tileLoadFunction=_,_e.format=new MVT,a(new VectorTile(_e))}).catch(d)})}function getBboxTemplate(o){return`{bbox-${(o?o.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function setupGeoJSONSource(o,e,s){const a=s.projection?new GeoJSON({dataProjection:s.projection}):new GeoJSON,d=o.data,b={};if(typeof d=="string"){const _e=normalizeSourceUrl(d,s.accessToken,s.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(_e)){const rt=(dt,pt,bt)=>{const xt=getBboxTemplate(bt);return _e.replace(xt,`${dt.join(",")}`)},ct=new VectorSource({attributions:o.attribution,format:a,loader:(dt,pt,bt,xt,wt)=>{const Tt=typeof rt=="function"?rt(dt,pt,bt):rt;fetchResource("GeoJSON",Tt,s).then(Rt=>{const Mt=ct.getFormat().readFeatures(Rt,{featureProjection:bt});ct.addFeatures(Mt),xt(Mt)}).catch(Rt=>{ct.removeLoadedExtent(dt),wt()})},strategy:bbox});return ct.set("mapbox-source",o),ct}const nt=new VectorSource({attributions:o.attribution,format:a,url:_e,loader:(rt,ct,dt,pt,bt)=>{fetchResource("GeoJSON",_e,s).then(xt=>{const wt=nt.getFormat().readFeatures(xt,{featureProjection:dt});nt.addFeatures(wt),pt(wt)}).catch(xt=>{nt.removeLoadedExtent(rt),bt()})}});return nt}b.features=a.readFeatures(d,{featureProjection:"EPSG:3857"});const _=new VectorSource(Object.assign({attributions:o.attribution,format:a},b));return _.set("mapbox-source",o),_}var LayerMapBox=class extends VectorTileLayer{constructor(e,s){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var a=e.ssl===!1?"http://":"https://",d=e.configuration;if(!d){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var b=e.layer+"$GEOPORTAIL:GPP:TMS";if(d=Config$1.configuration.getLayerConf(b),!d)throw new Error("ERROR : Layer ID not found into the catalogue !?")}for(var _=null,_e="",nt=e.style,rt=0;rt<d.styles.length;rt++){var ct=d.styles[rt];if(nt&&ct.name===nt){_=ct.url,_e=ct.title;break}else if(!nt&&ct.current){nt=ct.name,_=ct.url,_e=ct.title;break}}if(!_)throw new Error("ERROR : Style URL not found !?");_.replace(/(http|https):\/\//,a);var dt=new VectorTile({state:"loading",format:new MVT});dt._originators=d.originators,dt._legends=d.legends,dt._metadata=d.metadata,dt._description=d.description,dt._title=d.title+" ("+_e+")",dt._quicklookUrl=d.quicklookUrl;var pt={source:dt};return Helper$1.mergeParams(pt,s),e.olParams&&!d.originators&&(dt._originators=e.olParams.attributions),super(pt),this.name=e.layer,this.service="TMS",this.protocol=a,this.sourceId=e.source,this.styleUrl=_,this.setStyleMapBox(),this}setStyleMapBox(){var e=this;fetch(this.styleUrl,{credentials:"same-origin"}).then(function(s){s.ok&&s.json().then(function(a){e.onStyleMapBoxLoad(a)})}).catch(function(s){e.onStyleMapBoxError(s)})}onStyleMapBoxLoad(e){this.sourceId||(this.sourceId=Object.keys(e.sources)[0]);var s=e.sources[this.sourceId];if(!s){this.onStyleMapBoxError({message:"ERROR : Source ID not found !? !"});return}if(s.type!=="vector"){this.onStyleMapBoxError({message:"ERROR : Source TYPE not permitted !"});return}var a=this.getSource();if(s.url){s.url.replace(/(http|https):\/\//,this.protocol);var d=new TileJSON({url:s.url}),b=this,_=d.on("change",function(){if(d.getState()==="ready"){var nt=d.getTileJSON();if(!nt)return;b.set("mapbox-extensions",nt);for(var rt=Array.isArray(nt.tiles)?nt.tiles:[nt.tiles],ct=0;ct<s.tiles.length;ct++)rt[ct].replace(/(http|https):\/\//,this.protocol);a.setUrls(rt),unByKey(_)}})}if(s.tiles){for(var _e=0;_e<s.tiles.length;_e++)s.tiles[_e].replace(/(http|https):\/\//,this.protocol);a.setUrls(s.tiles)}applyStyle(this,e,this.sourceId).then(()=>{a.setState("ready"),this.set("mapbox-styles",e)}).catch(nt=>{this.onStyleMapBoxError(nt)})}onStyleMapBoxError(e){var s=this.getSource();s.setState("error"),console.error(e.message)}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalMapBox=LayerMapBox);const stringToHTML=o=>{var e=function(){if(!window.DOMParser)return!1;var b=new DOMParser;try{b.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var s=new DOMParser,a=s.parseFromString(o,"text/html");return a.body}var d=document.createElement("div");return d.innerHTML=o,d};var CatalogDOM={_addUID:function(o){var e=this.uid?o+"-"+this.uid:o;return e},_createMainContainerElement:function(){var o=document.createElement("div");return o.id=this._addUID("GPcatalog"),o.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",o},_createShowCatalogPictoElement:function(){var o=this,e=document.createElement("button"),s=document.createElement("span");return e.appendChild(s),e.id=this._addUID("GPshowCatalogPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowCatalogPicto gpf-btn gpf-btn--secondary gpf-btn-icon gpf-btn-icon-catalog fr-btn fr-btn--secondary",e.setAttribute("aria-label","Catalogue de donnes"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),o.onShowCatalogClick(a)}):e.attachEvent&&e.attachEvent("onclick",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),o.onShowCatalogClick(a)}),e},_createCatalogPanelElement:function(){var o=document.createElement("dialog");return o.id=this._addUID("GPcatalogPanel"),o.className="GPpanel gpf-panel fr-modal",o},_createCatalogPanelDivElement:function(){var o=document.createElement("div");return o.className="gpf-panel__body fr-modal__body",o},_createCatalogPanelContentDivElement:function(){var o=document.createElement("div");return o.className="gpf-panel__content fr-modal__content",o},_createCatalogPanelHeaderElement:function(){var o=document.createElement("div");return o.className="GPpanelHeader gpf-panel__header fr-modal__header",o},_createCatalogPanelTitleElement:function(o){var e=document.createElement("div");return e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=o,e},_createCatalogPanelCloseElement:function(){var o=this,e=document.createElement("button");e.id=this._addUID("GPcatalogPanelClose"),e.className="GPpanelClose GPcatalogPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(o._addUID("GPshowCatalogPicto")).click(),o.onCloseCatalogClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(o._addUID("GPshowCatalogPicto")).click(),o.onCloseCatalogClick()});var s=document.createElement("span");return s.className="GPelementHidden gpf-visible",s.innerText="Fermer",e.appendChild(s),e},_createCatalogContentDivElement:function(){var o=stringToHTML('<div class="catalog-container-content" style="padding:10px"></div>');return o.firstChild},_createCatalogContentTitleElement:function(o){var e=stringToHTML(`
        <!-- titre -->
        <div class="catalog-container-title">
            <div class="fr-title">
                <h5 style="margin:unset">${o}</h5>
            </div>
        </div>
        `);return e.firstChild},_createCatalogContentSearchElement:function(){var o=`
        <!-- barre de recherche -->
        <!-- https://www.systeme-de-design.gouv.fr/composants-et-modeles/composants/barre-de-recherche -->
        <div class="catalog-container-search" style="padding-top:10px;padding-bottom:20px">
            <div class="fr-search-bar" id="header-search" role="search">
                <label class="fr-label" for="search-input">
                    Recherche
                </label>
                <input class="fr-input" placeholder="Rechercher une donne" type="search" id="search-input" name="search-input" incremental>
                <button id="search-button" class="fr-btn" title="Rechercher">
                    Rechercher
                </button>
            </div>
        </div>
        `,e=stringToHTML(o);const s=e.attachShadow({mode:"open"});s.innerHTML=o.trim();var a=s.getElementById("search-button");a&&a.addEventListener("click",()=>{this.onSearchCatalogButtonClick()});var d=s.getElementById("search-input");return d&&d.addEventListener("search",()=>{this.onSearchCatalogInputChange()}),s},_createCatalogWaitingElement:function(){var o=document.createElement("div");o.id=this._addUID("GPcatalogCalcWaitingContainer"),o.className="GPwaitingContainerHidden gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",o.appendChild(e),o},_createCatalogContentCategoriesTabs:function(o){var e="",s=(wt,Tt,Rt,Mt)=>{var Et="GPtabButton fr-tabs__tab",$t="false",Xt=-1;return Mt&&(Et="GPtabButton GPtabButtonActive fr-tabs__tab",$t="true",Xt=0),`
            <li class="GPtabList" role="presentation">
                <button id="tabbutton-${wt}_${Tt}" class="${Et}" tabindex="${Xt}" role="tabbutton" aria-selected="${$t}" aria-controls="tabpanel-${wt}-panel_${Tt}">${Rt}</button>
            </li>
            `},a="",d=wt=>{var Tt=wt.default?"checked":"";return`
            <!-- sous categorie -->
            <div class="fr-fieldset__element fr-fieldset__element--inline">
                <div class="fr-radio-group fr-radio-group--sm">
                    <input type="radio" id="radio-inline_${wt.id}" name="radio-inline" ${Tt} aria-controls="tabcontent-${wt.id}">
                    <label class="fr-label" for="radio-inline_${wt.id}">
                        ${wt.title}
                    </label>
                </div>
            </div>
            `},b=(wt,Tt)=>{var Rt="";for(let Et=0;Et<Tt.length;Et++){const $t=Tt[Et];a+=d($t);var Mt="";$t.default||(Mt="GPelementHidden gpf-hidden"),Rt+=`<div class="tabcontent ${Mt}" role="tabpanel-section" id="tabcontent-${$t.id}"></div>`}return`
            <!-- sous categories -->
            <fieldset class="fr-fieldset" id="radio-inline_${wt}" aria-labelledby="radio-inline-legend radio-inline-messages">
                ${a}
                <div class="fr-messages-group" id="radio-inline-messages" aria-live="assertive"></div>
            </fieldset>
            ${Rt}
            `},_="",_e=(wt,Tt,Rt,Mt)=>{var Et="GPtabContent fr-tabs__panel",$t=-1;Rt&&(Et="GPtabContent GPtabContentSelected fr-tabs__panel fr-tabs__panel--selected",$t=0);var Xt='<div class="tabcontent"></div>';return Mt&&(Xt=b(Tt,Mt)),`
            <!-- panneaux -->
            <div id="tabpanel-${wt}-panel_${Tt}" class="${Et}" role="tabpanel" aria-labelledby="tabbutton-${wt}_${Tt}" tabindex="${$t}" style="max-height: 250px;overflow-y: auto;">
                ${Xt}
            </div>
            `};for(let wt=0;wt<o.length;wt++){const Tt=o[wt];e+=s(wt,Tt.id,Tt.title,Tt.default),_+=_e(wt,Tt.id,Tt.default,Tt.items)}var nt=`
        <!-- onglets -->
        <div class="catalog-container-tabs">
            <div class="GPtabs fr-tabs">
                <ul class="GPtabsList fr-tabs__list" role="tablist" aria-label="[A modifier | nom du systme d'onglet]">
                    ${e}
                </ul>
                ${_}
            </div>
        </div>
        `,rt=stringToHTML(nt.trim());const ct=rt.attachShadow({mode:"open"});ct.innerHTML=nt.trim();var dt=ct.querySelectorAll('[role="tabpanel-section"]'),pt=ct.querySelectorAll('[name="radio-inline"]');pt&&pt.forEach(wt=>{wt.addEventListener("change",Tt=>{for(let Mt=0;Mt<dt.length;Mt++){const Et=dt[Mt];Et.classList.add("gpf-hidden"),Et.classList.add("GPelementHidden")}var Rt=document.getElementById(Tt.target.getAttribute("aria-controls"));Rt.classList.remove("gpf-hidden"),Rt.classList.remove("GPelementHidden")})});var bt=ct.querySelectorAll('[role="tabpanel"]'),xt=ct.querySelectorAll('[role="tabbutton"]');return xt&&xt.forEach(wt=>{wt.addEventListener("click",Tt=>{for(let Mt=0;Mt<xt.length;Mt++){const Et=xt[Mt];Et.setAttribute("tabindex",-1),Et.ariaSelected=!1,Et.classList.remove("GPtabButtonActive")}Tt.target.setAttribute("tabindex",0),Tt.target.ariaSelected=!0,Tt.target.classList.add("GPtabButtonActive");for(let Mt=0;Mt<bt.length;Mt++){const Et=bt[Mt];Et.setAttribute("tabindex",-1),Et.classList.remove("fr-tabs__panel--selected"),Et.classList.remove("GPtabContentSelected"),Et.classList.add("gpf-hidden"),Et.classList.add("GPelementHidden")}var Rt=document.getElementById(Tt.target.getAttribute("aria-controls"));Rt.setAttribute("tabindex",0),Rt.classList.add("fr-tabs__panel--selected"),Rt.classList.add("GPtabContentSelected"),Rt.classList.remove("gpf-hidden"),Rt.classList.remove("GPelementHidden"),this.onSelectCatalogTabClick(Tt)})}),ct},_createCatalogContentCategoryTabContent:function(o,e){var s=Object.values(e),a="",d=(Et,$t,Xt,Zt,Nt)=>`
            <div class="fr-fieldset__element" id="fieldset-${Nt}_${$t}-${Zt}">
                <div class="fr-checkbox-group">
                    <input
                        name="checkboxes-${Nt}"
                        id="checkboxes-${Nt}-${Et}_${$t}-${Zt}"
                        type="checkbox"
                        data-layer="${$t}:${Zt}"
                        aria-describedby="checkboxes-messages-${Nt}-${Et}_${$t}-${Zt}">
                    <label class="GPlabelActive fr-label" for="checkboxes-${Nt}-${Et}_${$t}-${Zt}" title="${Xt}">
                        ${Xt} (${Zt})
                    </label>
                    <div class="fr-messages-group" id="checkboxes-messages-${Nt}-${Et}_${$t}-${Zt}" aria-live="assertive"></div>
                </div>
            </div>
            `,b=(Et,$t,Xt,Zt,Nt)=>`
            <!-- section -->
            <section class="fr-accordion" style="width:100%;">
                <h3 class="fr-accordion__title">
                    <button class="GPcatalogButtonSection fr-accordion__btn" role="button-collapse-${$t}" aria-expanded="false" aria-controls="accordion-${Et}">
                        <span class="GPshowCatalogAdvancedTools gpf-hidden" role="button-icon-collapse-${$t}"></span>${Xt}
                    </button>
                </h3>
                <div class="fr-collapse GPelementHidden" id="accordion-${Et}">
                    ${Nt}
                </div>
            </section>
            `,_=o.section;_&&(s=s.sort((Et,$t)=>Et[o.filter.field].localeCompare($t[o.filter.field])));var _e={};for(let Et=0;Et<s.length;Et++){const $t=s[Et];if(_){var nt=$t[o.filter.field];nt&&(_e.hasOwnProperty(nt)||(_e[nt]=""),_e[nt]+=d(Et,$t.name,$t.title,$t.service,o.id))}else a+=d(Et,$t.name,$t.title,$t.service,o.id)}if(_){for(const Et in _e)if(Object.prototype.hasOwnProperty.call(_e,Et)){const $t=_e[Et];var rt=[...$t.matchAll(/fr-fieldset__element/g)].length,ct=Math.abs(Array.from(Et).reduce((Xt,Zt)=>Math.imul(31,Xt)+Zt.charCodeAt(0)|0,0));a+=b(ct,o.id,Et,rt,$t)}}var dt=`
            <!-- liste de couches -->
            <fieldset class="fr-fieldset" id="checkboxes-${o.id}" aria-labelledby="checkboxes-legend checkboxes-messages">
                ${a}
            </fieldset>
        `,pt=stringToHTML(dt);const bt=pt.attachShadow({mode:"open"});bt.innerHTML=dt.trim();var xt=`checkboxes-${o.id}`,wt=bt.querySelectorAll('[name="'+xt+'"]');wt&&wt.forEach(Et=>{Et.addEventListener("click",$t=>{this.onSelectCatalogEntryClick($t)})});var Tt=`button-collapse-${o.id}`,Rt=bt.querySelectorAll('[role="'+Tt+'"]');Rt&&Rt.forEach(Et=>{Et.addEventListener("click",$t=>{$t.target.ariaExpanded=$t.target.ariaExpanded!=="true";var Xt=document.getElementById($t.target.getAttribute("aria-controls"));Xt&&($t.target.ariaExpanded==="true"?(Xt.classList.add("fr-collapse--expanded"),Xt.classList.remove("GPelementHidden")):(Xt.classList.remove("fr-collapse--expanded"),Xt.classList.add("GPelementHidden")))},!1)}),`${o.id}`;var Mt=bt.querySelectorAll('[role="'+Tt+'"]');return Mt&&Mt.forEach(Et=>{Et.addEventListener("click",$t=>{$t.target.parentElement.click()})}),bt}},logger$5=LoggerByDefault$1.getLogger("widget"),Catalog=class nle extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof nle))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this.showWaiting(),this.initLayersList().then(s=>{logger$5.trace(this,s),this.hideWaiting(),this.dispatchEvent({type:"catalog:loaded",data:s})}).catch(s=>{this.hideWaiting(),logger$5.error(s)}),this}setMap(e){e?(this.draggable&&Draggable.dragElement(this.panelCatalogContainer,this.panelCatalogHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonCatalogShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):this.auto&&this.removeEventsListeners(),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getContainer(){return this.container}initialize(e){this.uid=SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,titlePrimary:"Grer vos couches de donnes",titleSecondary:"",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Donnes",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]}},Helper$1.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.eventsListeners=[],this.buttonCatalogShow=null,this.panelCatalogContainer=null,this.panelCatalogHeaderContainer=null,this.buttonCatalogClose=null,this.contentCatalogContainer=null,this.waitingContainer=null,this.layersList=[],this.categories=this.options.categories.map(s=>{var a=s.items;return s.items&&(a=s.items.map(d=>({title:d.title,id:d.id||Math.abs(Array.from(d.title).reduce((b,_)=>Math.imul(31,b)+_.charCodeAt(0)|0,0)),section:d.hasOwnProperty("section")?d.section:!1,default:d.hasOwnProperty("default")?d.default:!1,filter:d.filter||null}))),{title:s.title,id:s.id||Math.abs(Array.from(s.title).reduce((d,b)=>Math.imul(31,d)+b.charCodeAt(0)|0,0)),default:s.hasOwnProperty("default")?s.default:!1,filter:s.filter||null,items:a||null}}),this.categoryId=(()=>{var s=this.categories.findIndex(a=>a.default);return s===-1&&(s=0,this.categories[s].default=!0),this.categories[s].id})(),this.layersListOnMap={}}initContainer(){var e=this._createMainContainerElement(),s=this.buttonCatalogShow=this._createShowCatalogPictoElement();e.appendChild(s);var a=this.panelCatalogContainer=this._createCatalogPanelElement(),d=this._createCatalogPanelDivElement();a.appendChild(d);var b=this.panelCatalogHeaderContainer=this._createCatalogPanelHeaderElement(),_=this._createCatalogPanelTitleElement(this.options.titlePrimary);b.appendChild(_);var _e=this.buttonCatalogClose=this._createCatalogPanelCloseElement();b.appendChild(_e),d.appendChild(b);var nt=this._createCatalogPanelContentDivElement(),rt=this.contentCatalogContainer=this._createCatalogContentDivElement();rt.appendChild(this._createCatalogContentTitleElement(this.options.titleSecondary)),this.options.search.display&&rt.appendChild(this._createCatalogContentSearchElement());var ct=this.waitingContainer=this._createCatalogWaitingElement();return rt.appendChild(ct),nt.appendChild(rt),d.appendChild(nt),e.appendChild(a),logger$5.log(e),e}async initLayersList(){var e=null,s=this;const a=rt=>{var ct=s.contentCatalogContainer,dt=s._createCatalogContentCategoriesTabs(this.categories);ct.appendChild(dt);var pt=[];s.categories.forEach(wt=>{if(wt.items)for(let Tt=0;Tt<wt.items.length;Tt++){const Rt=wt.items[Tt];pt.push(Rt)}else pt.push(wt)});var bt=ct.querySelectorAll(".tabcontent");for(let wt=0;wt<bt.length;wt++){const Tt=bt[wt];var xt=d(pt[wt],rt);Tt.appendChild(s._createCatalogContentCategoryTabContent(pt[wt],xt))}},d=(rt,ct)=>{var dt=ct,pt=rt.filter;if(pt){dt={};for(const xt in ct)if(Object.prototype.hasOwnProperty.call(ct,xt)){const wt=ct[xt];if(wt[pt.field]){var bt=Array.isArray(pt.value)?pt.value.includes(wt[pt.field].toString()):pt.value==="*"||wt[pt.field].toString()===pt.value;bt&&(dt[xt]=wt,this.layersList[xt].categories.push(rt.id))}}}return dt},b=(rt,ct)=>ct;if(this.options.configuration.data){e=this.options.configuration.data||{},Config$1.isConfigLoaded()&&Helper$1.mergeParams(e,Config$1.configuration);for(const rt in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,rt)){const ct=e.layers[rt];var _=ct.serviceParams.id.split(":").slice(-1)[0];ct.service=_,ct.categories=[]}var _e=b(this.options.layerFilter,e.layers);return this.layersList=_e,a(_e),new Promise((rt,ct)=>{rt(e)})}if(this.options.configuration.urls){var nt=[];for(let rt=0;rt<this.options.configuration.urls.length;rt++){const ct=this.options.configuration.urls[rt],dt=function(){return fetch(ct,{}).then(function(pt){if(pt.ok)return pt.json().then(function(xt){return xt}).catch(xt=>{logger$5.warn("fetch json exception :",xt)});var bt=new Error("HTTP status code: "+pt.status);throw bt}).catch(pt=>new Promise((bt,xt)=>{logger$5.error("fetch json exception :",pt),xt(pt)}))};nt.push(dt())}try{const rt=await Promise.all(nt);e=rt[0];for(let dt=1;dt<rt.length;dt++){const pt=rt[dt];Helper$1.mergeParams(e,pt)}Config$1.isConfigLoaded()&&Helper$1.mergeParams(e,Config$1.configuration);for(const dt in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,dt)){const pt=e.layers[dt];var _=pt.serviceParams.id.split(":").slice(-1)[0];pt.service=_,pt.categories=[]}var _e=b(this.options.layerFilter,e.layers);return this.layersList=_e,a(_e),await new Promise((dt,pt)=>{dt(e)})}catch(rt){return await new Promise((ct,dt)=>{dt(rt)})}}}addEventsListeners(e){var s=this;this.eventsListeners["map:add"]=function(a){logger$5.trace(a);var d=a.element.name,b=a.element.service;s.layersListOnMap[d+":"+b]=a.element;var _=document.querySelectorAll(`input[data-layer="${d}:${b}"]`);_&&_.forEach(_e=>{_e.checked=!0})},e.getLayers().on("add",this.eventsListeners["map:add"]),this.eventsListeners["map:remove"]=function(a){logger$5.trace(a);var d=a.element.name,b=a.element.service;delete s.layersListOnMap[d+":"+b];var _=document.querySelectorAll(`input[data-layer="${d}:${b}"]`);_&&_.forEach(_e=>{_e.checked=!1})},e.getLayers().on("remove",this.eventsListeners["map:remove"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["map:add"]),delete this.eventsListeners["map:add"],e.getLayers().un("remove",this.eventsListeners["map:remove"]),delete this.eventsListeners["map:remove"]}addLayer(e,s){var a=null;switch(s){case"WMS":a=new LayerWMS({layer:e});break;case"WMTS":a=new LayerWMTS({layer:e});break;case"TMS":a=new LayerMapBox({layer:e})}if(a){var d=this.getMap();d.addLayer(a),this.layersListOnMap[e+":"+s]=a}}removeLayer(e,s){var a=this.layersListOnMap[e+":"+s];if(a){var d=this.getMap();d.removeLayer(a),delete this.layersListOnMap[e+":"+s]}}hideWaiting(){this.waitingContainer.className="GPwaitingContainerHidden  gpf-waiting--hidden"}showWaiting(){this.waitingContainer.className="GPwaitingContainerVisible gpf-waiting--visible"}resetFilteredLayersList(){for(const e in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,e)){const s=this.layersList[e];s.hidden=!1,this.updateFilteredLayersListDOM(s.name,s.service,s.hidden)}}setFilteredLayersList(e){var s=this.options.search.criteria;for(const d in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,d)){const b=this.layersList[d];var a="";for(let _=0;_<s.length;_++){const _e=s[_];b[_e]&&(a+=b[_e].toLowerCase())}b.hidden=!a.includes(e.toLowerCase()),this.updateFilteredLayersListDOM(b.name,b.service,b.hidden)}}updateFilteredLayersListDOM(e,s,a){var d=[];this.categories.forEach(_=>{if(_.items)for(let _e=0;_e<_.items.length;_e++){const nt=_.items[_e];d.push(nt.id)}else d.push(_.id)});for(let _=0;_<d.length;_++){const _e=d[_];var b=document.getElementById(`fieldset-${_e}_${e}-${s}`);b&&(a?(b.classList.add("gpf-hidden"),b.classList.add("GPelementHidden")):(b.classList.remove("gpf-hidden"),b.classList.remove("GPelementHidden")))}}onShowCatalogClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$5.trace(e)}onCloseCatalogClick(e){logger$5.trace(e)}onSelectCatalogTabClick(e){logger$5.trace(e);var s=e.target.id,a=s.split("_")[1];this.categoryId=a}onSelectCatalogEntryClick(e){logger$5.trace(e);var s=e.target.id.split("_")[1],a=s.split("-")[0],d=s.split("-")[1],b={};e.target.checked?(this.options.addToMap&&this.addLayer(a,d),this.dispatchEvent({type:"catalog:layer:add",name:a,service:d,layer:b})):(this.options.addToMap&&this.removeLayer(a,d),this.dispatchEvent({type:"catalog:layer:remove",name:a,service:d,layer:b}))}onSearchCatalogButtonClick(){var e=document.getElementById("search-input").value;this.setFilteredLayersList(e)}onSearchCatalogInputChange(){this.onSearchCatalogButtonClick()}};Object.assign(Catalog.prototype,CatalogDOM);Object.assign(Catalog.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Catalog=Catalog);const events=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],FullScreenEventType={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FullScreen extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const s=e.label!==void 0?e.label:"";this.labelNode_=typeof s=="string"?document.createTextNode(s):s;const a=e.labelActive!==void 0?e.labelActive:"";this.labelActiveNode_=typeof a=="string"?document.createTextNode(a):a;const d=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=d,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const s=e.getOwnerDocument();if(isFullScreenSupported(s))if(isFullScreen(s))exitFullScreen(s);else{let a;this.source_?a=typeof this.source_=="string"?s.getElementById(this.source_):this.source_:a=e.getTargetElement(),this.keys_?requestFullScreenWithKeys(a):requestFullScreen(a)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const s=this.isInFullscreen_;this.isInFullscreen_=isFullScreen(e.getOwnerDocument()),s!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN)):(replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,s){s?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const s=this.getMap();s&&s.removeChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let a=0,d=e.length;a<d;++a)unlistenByKey(e[a]);e.length=0;const s=this.getMap();if(s){const a=s.getOwnerDocument();isFullScreenSupported(a)?this.element.classList.remove(CLASS_UNSUPPORTED):this.element.classList.add(CLASS_UNSUPPORTED);for(let d=0,b=events.length;d<b;++d)e.push(listen(a,events[d],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function isFullScreenSupported(o){const e=o.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&o.fullscreenEnabled)}function isFullScreen(o){return!!(o.webkitIsFullScreen||o.fullscreenElement)}function requestFullScreen(o){o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullscreen&&o.webkitRequestFullscreen()}function requestFullScreenWithKeys(o){o.webkitRequestFullscreen?o.webkitRequestFullscreen():requestFullScreen(o)}function exitFullScreen(o){o.exitFullscreen?o.exitFullscreen():o.webkitExitFullscreen&&o.webkitExitFullscreen()}LoggerByDefault$1.getLogger("fullscreen");var GeoportalFullScreen=class extends FullScreen{constructor(e){e=e||{};var s="ol-custom-full-screen";e.className=e.className||s,e.label=e.label||"",e.labelActive=e.labelActive||"",e.activeClassName=e.activeClassName||s+"-true",e.inactiveClassName=e.inactiveClassName||s+"-false",e.tipLabel=e.tipLabel||"Basculer en mode plein cran",super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var s="position-container-"+this.options.position;if(!document.getElementById(s)){var a=document.createElement("div");a.id=s,a.classList.add("position"),a.classList.add(s),this.container.appendChild(a)}this.options.target=this.container.children[s]}}_initContainer(){this._uid=SelectorID.generate(),this.element.id="GPfullScreen-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-full-screen","ol-unselectable","ol-control");var e=this.element.childNodes[0],s=document.createElement("span");e.appendChild(s),e.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPfullScreenPicto","fr-btn","fr-btn--secondary","gpf-btn--secondary","gpf-btn","gpf-btn-icon"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.removeAttribute("title"),e.setAttribute("aria-label",this.options.tipLabel),e.addEventListener?e.addEventListener("click",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d)}):e.attachEvent&&e.attachEvent("onclick",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d)}),this.options.position&&(this.element.style.position="unset")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var s=e.getControls();s.forEach(a=>{a.element.classList.contains("ol-full-screen")&&(a.element.classList.add("ol-hidden"),a.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalFullScreen=GeoportalFullScreen);/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(o,e){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);e&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(o,d).enumerable})),s.push.apply(s,a)}return s}function _objectSpread2(o){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(s),!0).forEach(function(a){_defineProperty(o,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(s,a))})}return o}function _typeof(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(o)}function _defineProperty(o,e,s){return e in o?Object.defineProperty(o,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[e]=s,o}function _extends(){return _extends=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(o,e){if(o==null)return{};var s={},a=Object.keys(o),d,b;for(b=0;b<a.length;b++)d=a[b],!(e.indexOf(d)>=0)&&(s[d]=o[d]);return s}function _objectWithoutProperties(o,e){if(o==null)return{};var s=_objectWithoutPropertiesLoose(o,e),a,d;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(o);for(d=0;d<b.length;d++)a=b[d],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}var version="1.15.3";function userAgent(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(o,e,s){o.addEventListener(e,s,!IE11OrLess&&captureMode)}function off(o,e,s){o.removeEventListener(e,s,!IE11OrLess&&captureMode)}function matches$1(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch{return!1}return!1}}function getParentOrHost(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function closest(o,e,s,a){if(o){s=s||document;do{if(e!=null&&(e[0]===">"?o.parentNode===s&&matches$1(o,e):matches$1(o,e))||a&&o===s)return o;if(o===s)break}while(o=getParentOrHost(o))}return null}var R_SPACE=/\s+/g;function toggleClass(o,e,s){if(o&&e)if(o.classList)o.classList[s?"add":"remove"](e);else{var a=(" "+o.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");o.className=(a+(s?" "+e:"")).replace(R_SPACE," ")}}function css(o,e,s){var a=o&&o.style;if(a){if(s===void 0)return document.defaultView&&document.defaultView.getComputedStyle?s=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(s=o.currentStyle),e===void 0?s:s[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=s+(typeof s=="string"?"":"px")}}function matrix(o,e){var s="";if(typeof o=="string")s=o;else do{var a=css(o,"transform");a&&a!=="none"&&(s=a+" "+s)}while(!e&&(o=o.parentNode));var d=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return d&&new d(s)}function find(o,e,s){if(o){var a=o.getElementsByTagName(e),d=0,b=a.length;if(s)for(;d<b;d++)s(a[d],d);return a}return[]}function getWindowScrollingElement(){var o=document.scrollingElement;return o||document.documentElement}function getRect(o,e,s,a,d){if(!(!o.getBoundingClientRect&&o!==window)){var b,_,_e,nt,rt,ct,dt;if(o!==window&&o.parentNode&&o!==getWindowScrollingElement()?(b=o.getBoundingClientRect(),_=b.top,_e=b.left,nt=b.bottom,rt=b.right,ct=b.height,dt=b.width):(_=0,_e=0,nt=window.innerHeight,rt=window.innerWidth,ct=window.innerHeight,dt=window.innerWidth),(e||s)&&o!==window&&(d=d||o.parentNode,!IE11OrLess))do if(d&&d.getBoundingClientRect&&(css(d,"transform")!=="none"||s&&css(d,"position")!=="static")){var pt=d.getBoundingClientRect();_-=pt.top+parseInt(css(d,"border-top-width")),_e-=pt.left+parseInt(css(d,"border-left-width")),nt=_+b.height,rt=_e+b.width;break}while(d=d.parentNode);if(a&&o!==window){var bt=matrix(d||o),xt=bt&&bt.a,wt=bt&&bt.d;bt&&(_/=wt,_e/=xt,dt/=xt,ct/=wt,nt=_+ct,rt=_e+dt)}return{top:_,left:_e,bottom:nt,right:rt,width:dt,height:ct}}}function isScrolledPast(o,e,s){for(var a=getParentAutoScrollElement(o,!0),d=getRect(o)[e];a;){var b=getRect(a)[s],_=void 0;if(_=d>=b,!_)return a;if(a===getWindowScrollingElement())break;a=getParentAutoScrollElement(a,!1)}return!1}function getChild(o,e,s,a){for(var d=0,b=0,_=o.children;b<_.length;){if(_[b].style.display!=="none"&&_[b]!==Sortable.ghost&&(a||_[b]!==Sortable.dragged)&&closest(_[b],s.draggable,o,!1)){if(d===e)return _[b];d++}b++}return null}function lastChild(o,e){for(var s=o.lastElementChild;s&&(s===Sortable.ghost||css(s,"display")==="none"||e&&!matches$1(s,e));)s=s.previousElementSibling;return s||null}function index(o,e){var s=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==Sortable.clone&&(!e||matches$1(o,e))&&s++;return s}function getRelativeScrollOffset(o){var e=0,s=0,a=getWindowScrollingElement();if(o)do{var d=matrix(o),b=d.a,_=d.d;e+=o.scrollLeft*b,s+=o.scrollTop*_}while(o!==a&&(o=o.parentNode));return[e,s]}function indexOfObject(o,e){for(var s in o)if(o.hasOwnProperty(s)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===o[s][a])return Number(s)}return-1}function getParentAutoScrollElement(o,e){if(!o||!o.getBoundingClientRect)return getWindowScrollingElement();var s=o,a=!1;do if(s.clientWidth<s.scrollWidth||s.clientHeight<s.scrollHeight){var d=css(s);if(s.clientWidth<s.scrollWidth&&(d.overflowX=="auto"||d.overflowX=="scroll")||s.clientHeight<s.scrollHeight&&(d.overflowY=="auto"||d.overflowY=="scroll")){if(!s.getBoundingClientRect||s===document.body)return getWindowScrollingElement();if(a||e)return s;a=!0}}while(s=s.parentNode);return getWindowScrollingElement()}function extend$1(o,e){if(o&&e)for(var s in e)e.hasOwnProperty(s)&&(o[s]=e[s]);return o}function isRectEqual(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var _throttleTimeout;function throttle(o,e){return function(){if(!_throttleTimeout){var s=arguments,a=this;s.length===1?o.call(a,s[0]):o.apply(a,s),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(o,e,s){o.scrollLeft+=e,o.scrollTop+=s}function clone(o){var e=window.Polymer,s=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):s?s(o).clone(!0)[0]:o.cloneNode(!0)}function getChildContainingRectFromElement(o,e,s){var a={};return Array.from(o.children).forEach(function(d){var b,_,_e,nt;if(!(!closest(d,e.draggable,o,!1)||d.animated||d===s)){var rt=getRect(d);a.left=Math.min((b=a.left)!==null&&b!==void 0?b:1/0,rt.left),a.top=Math.min((_=a.top)!==null&&_!==void 0?_:1/0,rt.top),a.right=Math.max((_e=a.right)!==null&&_e!==void 0?_e:-1/0,rt.right),a.bottom=Math.max((nt=a.bottom)!==null&&nt!==void 0?nt:-1/0,rt.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(d){if(!(css(d,"display")==="none"||d===Sortable.ghost)){o.push({target:d,rect:getRect(d)});var b=_objectSpread2({},o[o.length-1].rect);if(d.thisAnimationDuration){var _=matrix(d,!0);_&&(b.top-=_.f,b.left-=_.e)}d.fromRect=b}})}},addAnimationState:function(a){o.push(a)},removeAnimationState:function(a){o.splice(indexOfObject(o,{target:a}),1)},animateAll:function(a){var d=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var b=!1,_=0;o.forEach(function(_e){var nt=0,rt=_e.target,ct=rt.fromRect,dt=getRect(rt),pt=rt.prevFromRect,bt=rt.prevToRect,xt=_e.rect,wt=matrix(rt,!0);wt&&(dt.top-=wt.f,dt.left-=wt.e),rt.toRect=dt,rt.thisAnimationDuration&&isRectEqual(pt,dt)&&!isRectEqual(ct,dt)&&(xt.top-dt.top)/(xt.left-dt.left)===(ct.top-dt.top)/(ct.left-dt.left)&&(nt=calculateRealTime(xt,pt,bt,d.options)),isRectEqual(dt,ct)||(rt.prevFromRect=ct,rt.prevToRect=dt,nt||(nt=d.options.animation),d.animate(rt,xt,dt,nt)),nt&&(b=!0,_=Math.max(_,nt),clearTimeout(rt.animationResetTimer),rt.animationResetTimer=setTimeout(function(){rt.animationTime=0,rt.prevFromRect=null,rt.fromRect=null,rt.prevToRect=null,rt.thisAnimationDuration=null},nt),rt.thisAnimationDuration=nt)}),clearTimeout(e),b?e=setTimeout(function(){typeof a=="function"&&a()},_):typeof a=="function"&&a(),o=[]},animate:function(a,d,b,_){if(_){css(a,"transition",""),css(a,"transform","");var _e=matrix(this.el),nt=_e&&_e.a,rt=_e&&_e.d,ct=(d.left-b.left)/(nt||1),dt=(d.top-b.top)/(rt||1);a.animatingX=!!ct,a.animatingY=!!dt,css(a,"transform","translate3d("+ct+"px,"+dt+"px,0)"),this.forRepaintDummy=repaint(a),css(a,"transition","transform "+_+"ms"+(this.options.easing?" "+this.options.easing:"")),css(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){css(a,"transition",""),css(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},_)}}}}function repaint(o){return o.offsetWidth}function calculateRealTime(o,e,s,a){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-s.top,2)+Math.pow(e.left-s.left,2))*a.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(e){for(var s in defaults)defaults.hasOwnProperty(s)&&!(s in e)&&(e[s]=defaults[s]);plugins.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),plugins.push(e)},pluginEvent:function(e,s,a){var d=this;this.eventCanceled=!1,a.cancel=function(){d.eventCanceled=!0};var b=e+"Global";plugins.forEach(function(_){s[_.pluginName]&&(s[_.pluginName][b]&&s[_.pluginName][b](_objectSpread2({sortable:s},a)),s.options[_.pluginName]&&s[_.pluginName][e]&&s[_.pluginName][e](_objectSpread2({sortable:s},a)))})},initializePlugins:function(e,s,a,d){plugins.forEach(function(_e){var nt=_e.pluginName;if(!(!e.options[nt]&&!_e.initializeByDefault)){var rt=new _e(e,s,e.options);rt.sortable=e,rt.options=e.options,e[nt]=rt,_extends(a,rt.defaults)}});for(var b in e.options)if(e.options.hasOwnProperty(b)){var _=this.modifyOption(e,b,e.options[b]);typeof _<"u"&&(e.options[b]=_)}},getEventProperties:function(e,s){var a={};return plugins.forEach(function(d){typeof d.eventProperties=="function"&&_extends(a,d.eventProperties.call(s[d.pluginName],e))}),a},modifyOption:function(e,s,a){var d;return plugins.forEach(function(b){e[b.pluginName]&&b.optionListeners&&typeof b.optionListeners[s]=="function"&&(d=b.optionListeners[s].call(e[b.pluginName],a))}),d}};function dispatchEvent$1(o){var e=o.sortable,s=o.rootEl,a=o.name,d=o.targetEl,b=o.cloneEl,_=o.toEl,_e=o.fromEl,nt=o.oldIndex,rt=o.newIndex,ct=o.oldDraggableIndex,dt=o.newDraggableIndex,pt=o.originalEvent,bt=o.putSortable,xt=o.extraEventProperties;if(e=e||s&&s[expando],!!e){var wt,Tt=e.options,Rt="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?wt=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(wt=document.createEvent("Event"),wt.initEvent(a,!0,!0)),wt.to=_||s,wt.from=_e||s,wt.item=d||s,wt.clone=b,wt.oldIndex=nt,wt.newIndex=rt,wt.oldDraggableIndex=ct,wt.newDraggableIndex=dt,wt.originalEvent=pt,wt.pullMode=bt?bt.lastPutMode:void 0;var Mt=_objectSpread2(_objectSpread2({},xt),PluginManager.getEventProperties(a,e));for(var Et in Mt)wt[Et]=Mt[Et];s&&s.dispatchEvent(wt),Tt[Rt]&&Tt[Rt].call(e,wt)}}var _excluded=["evt"],pluginEvent=function(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=a.evt,b=_objectWithoutProperties(a,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,s,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:d,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(_e){_dispatchEvent({sortable:s,name:_e,originalEvent:d})}},b))};function _dispatchEvent(o){dispatchEvent$1(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},o))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),_detectDirection=function(e,s){var a=css(e),d=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),b=getChild(e,0,s),_=getChild(e,1,s),_e=b&&css(b),nt=_&&css(_),rt=_e&&parseInt(_e.marginLeft)+parseInt(_e.marginRight)+getRect(b).width,ct=nt&&parseInt(nt.marginLeft)+parseInt(nt.marginRight)+getRect(_).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(b&&_e.float&&_e.float!=="none"){var dt=_e.float==="left"?"left":"right";return _&&(nt.clear==="both"||nt.clear===dt)?"vertical":"horizontal"}return b&&(_e.display==="block"||_e.display==="flex"||_e.display==="table"||_e.display==="grid"||rt>=d&&a[CSSFloatProperty]==="none"||_&&a[CSSFloatProperty]==="none"&&rt+ct>d)?"vertical":"horizontal"},_dragElInRowColumn=function(e,s,a){var d=a?e.left:e.top,b=a?e.right:e.bottom,_=a?e.width:e.height,_e=a?s.left:s.top,nt=a?s.right:s.bottom,rt=a?s.width:s.height;return d===_e||b===nt||d+_/2===_e+rt/2},_detectNearestEmptySortable=function(e,s){var a;return sortables.some(function(d){var b=d[expando].options.emptyInsertThreshold;if(!(!b||lastChild(d))){var _=getRect(d),_e=e>=_.left-b&&e<=_.right+b,nt=s>=_.top-b&&s<=_.bottom+b;if(_e&&nt)return a=d}}),a},_prepareGroup=function(e){function s(b,_){return function(_e,nt,rt,ct){var dt=_e.options.group.name&&nt.options.group.name&&_e.options.group.name===nt.options.group.name;if(b==null&&(_||dt))return!0;if(b==null||b===!1)return!1;if(_&&b==="clone")return b;if(typeof b=="function")return s(b(_e,nt,rt,ct),_)(_e,nt,rt,ct);var pt=(_?_e:nt).options.group.name;return b===!0||typeof b=="string"&&b===pt||b.join&&b.indexOf(pt)>-1}}var a={},d=e.group;(!d||_typeof(d)!="object")&&(d={name:d}),a.name=d.name,a.checkPull=s(d.pull,!0),a.checkPut=s(d.put),a.revertClone=d.revertClone,e.group=a},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(o){if(ignoreNextClick)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var s=_detectNearestEmptySortable(e.clientX,e.clientY);if(s){var a={};for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.target=a.rootEl=s,a.preventDefault=void 0,a.stopPropagation=void 0,s[expando]._onDragOver(a)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=_extends({},e),o[expando]=this;var s={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(_,_e){_.setData("Text",_e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,o,s);for(var a in s)!(a in e)&&(e[a]=s[a]);_prepareGroup(e);for(var d in this)d.charAt(0)==="_"&&typeof this[d]=="function"&&(this[d]=this[d].bind(this));this.nativeDraggable=e.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(o,"pointerdown",this._onTapStart):(on(o,"mousedown",this._onTapStart),on(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(o,"dragover",this),on(o,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lastTarget=null)},_getDirection:function(e,s){return typeof this.options.direction=="function"?this.options.direction.call(this,e,s,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var s=this,a=this.el,d=this.options,b=d.preventOnFilter,_=e.type,_e=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,nt=(_e||e).target,rt=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||nt,ct=d.filter;if(_saveInputCheckedState(a),!dragEl&&!(/mousedown|pointerdown/.test(_)&&e.button!==0||d.disabled)&&!rt.isContentEditable&&!(!this.nativeDraggable&&Safari&&nt&&nt.tagName.toUpperCase()==="SELECT")&&(nt=closest(nt,d.draggable,a,!1),!(nt&&nt.animated)&&lastDownEl!==nt)){if(oldIndex=index(nt),oldDraggableIndex=index(nt,d.draggable),typeof ct=="function"){if(ct.call(this,e,nt,this)){_dispatchEvent({sortable:s,rootEl:rt,name:"filter",targetEl:nt,toEl:a,fromEl:a}),pluginEvent("filter",s,{evt:e}),b&&e.cancelable&&e.preventDefault();return}}else if(ct&&(ct=ct.split(",").some(function(dt){if(dt=closest(rt,dt.trim(),a,!1),dt)return _dispatchEvent({sortable:s,rootEl:dt,name:"filter",targetEl:nt,fromEl:a,toEl:a}),pluginEvent("filter",s,{evt:e}),!0}),ct)){b&&e.cancelable&&e.preventDefault();return}d.handle&&!closest(rt,d.handle,a,!1)||this._prepareDragStart(e,_e,nt)}}},_prepareDragStart:function(e,s,a){var d=this,b=d.el,_=d.options,_e=b.ownerDocument,nt;if(a&&!dragEl&&a.parentNode===b){var rt=getRect(a);if(rootEl=b,dragEl=a,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=a,activeGroup=_.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(s||e).clientX,clientY:(s||e).clientY},tapDistanceLeft=tapEvt.clientX-rt.left,tapDistanceTop=tapEvt.clientY-rt.top,this._lastX=(s||e).clientX,this._lastY=(s||e).clientY,dragEl.style["will-change"]="all",nt=function(){if(pluginEvent("delayEnded",d,{evt:e}),Sortable.eventCanceled){d._onDrop();return}d._disableDelayedDragEvents(),!FireFox&&d.nativeDraggable&&(dragEl.draggable=!0),d._triggerDragStart(e,s),_dispatchEvent({sortable:d,name:"choose",originalEvent:e}),toggleClass(dragEl,_.chosenClass,!0)},_.ignore.split(",").forEach(function(ct){find(dragEl,ct.trim(),_disableDraggable)}),on(_e,"dragover",nearestEmptyInsertDetectEvent),on(_e,"mousemove",nearestEmptyInsertDetectEvent),on(_e,"touchmove",nearestEmptyInsertDetectEvent),on(_e,"mouseup",d._onDrop),on(_e,"touchend",d._onDrop),on(_e,"touchcancel",d._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),_.delay&&(!_.delayOnTouchOnly||s)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(_e,"mouseup",d._disableDelayedDrag),on(_e,"touchend",d._disableDelayedDrag),on(_e,"touchcancel",d._disableDelayedDrag),on(_e,"mousemove",d._delayedDragTouchMoveHandler),on(_e,"touchmove",d._delayedDragTouchMoveHandler),_.supportPointer&&on(_e,"pointermove",d._delayedDragTouchMoveHandler),d._dragStartTimer=setTimeout(nt,_.delay)}else nt()}},_delayedDragTouchMoveHandler:function(e){var s=e.touches?e.touches[0]:e;Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,s){s=s||e.pointerType=="touch"&&e,!this.nativeDraggable||s?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):s?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,s){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:s}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var a=this.options;!e&&toggleClass(dragEl,a.dragClass,!1),toggleClass(dragEl,a.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:s})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),s=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e!==s);)s=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),s)do{if(s[expando]){var a=void 0;if(a=s[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:s}),a&&!this.options.dragoverBubble)break}e=s}while(s=getParentOrHost(s));_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var s=this.options,a=s.fallbackTolerance,d=s.fallbackOffset,b=e.touches?e.touches[0]:e,_=ghostEl&&matrix(ghostEl,!0),_e=ghostEl&&_&&_.a,nt=ghostEl&&_&&_.d,rt=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),ct=(b.clientX-tapEvt.clientX+d.x)/(_e||1)+(rt?rt[0]-ghostRelativeParentInitialScroll[0]:0)/(_e||1),dt=(b.clientY-tapEvt.clientY+d.y)/(nt||1)+(rt?rt[1]-ghostRelativeParentInitialScroll[1]:0)/(nt||1);if(!Sortable.active&&!awaitingDragStarted){if(a&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if(ghostEl){_?(_.e+=ct-(lastDx||0),_.f+=dt-(lastDy||0)):_={a:1,b:0,c:0,d:1,e:ct,f:dt};var pt="matrix(".concat(_.a,",").concat(_.b,",").concat(_.c,",").concat(_.d,",").concat(_.e,",").concat(_.f,")");css(ghostEl,"webkitTransform",pt),css(ghostEl,"mozTransform",pt),css(ghostEl,"msTransform",pt),css(ghostEl,"transform",pt),lastDx=ct,lastDy=dt,touchEvt=b}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,s=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),a=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),s.top+=ghostRelativeParent.scrollTop,s.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,a.ghostClass,!1),toggleClass(ghostEl,a.fallbackClass,!0),toggleClass(ghostEl,a.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",s.top),css(ghostEl,"left",s.left),css(ghostEl,"width",s.width),css(ghostEl,"height",s.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,s){var a=this,d=e.dataTransfer,b=a.options;if(pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),a.cloneId=_nextTick(function(){pluginEvent("clone",a),!Sortable.eventCanceled&&(a.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),a._hideClone(),_dispatchEvent({sortable:a,name:"clone"}))}),!s&&toggleClass(dragEl,b.dragClass,!0),s?(ignoreNextClick=!0,a._loopId=setInterval(a._emulateDragOver,50)):(off(document,"mouseup",a._onDrop),off(document,"touchend",a._onDrop),off(document,"touchcancel",a._onDrop),d&&(d.effectAllowed="move",b.setData&&b.setData.call(a,d,dragEl)),on(document,"drop",a),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,a._dragStartId=_nextTick(a._dragStarted.bind(a,s,e)),on(document,"selectstart",a),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(e){var s=this.el,a=e.target,d,b,_,_e=this.options,nt=_e.group,rt=Sortable.active,ct=activeGroup===nt,dt=_e.sort,pt=putSortable||rt,bt,xt=this,wt=!1;if(_silent)return;function Tt(ln,uo){pluginEvent(ln,xt,_objectSpread2({evt:e,isOwner:ct,axis:bt?"vertical":"horizontal",revert:_,dragRect:d,targetRect:b,canSort:dt,fromSortable:pt,target:a,completed:Mt,onMove:function(An,Wn){return _onMove(rootEl,s,dragEl,d,An,getRect(An),e,Wn)},changed:Et},uo))}function Rt(){Tt("dragOverAnimationCapture"),xt.captureAnimationState(),xt!==pt&&pt.captureAnimationState()}function Mt(ln){return Tt("dragOverCompleted",{insertion:ln}),ln&&(ct?rt._hideClone():rt._showClone(xt),xt!==pt&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:rt.options.ghostClass,!1),toggleClass(dragEl,_e.ghostClass,!0)),putSortable!==xt&&xt!==Sortable.active?putSortable=xt:xt===Sortable.active&&putSortable&&(putSortable=null),pt===xt&&(xt._ignoreWhileAnimating=a),xt.animateAll(function(){Tt("dragOverAnimationComplete"),xt._ignoreWhileAnimating=null}),xt!==pt&&(pt.animateAll(),pt._ignoreWhileAnimating=null)),(a===dragEl&&!dragEl.animated||a===s&&!a.animated)&&(lastTarget=null),!_e.dragoverBubble&&!e.rootEl&&a!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!ln&&nearestEmptyInsertDetectEvent(e)),!_e.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),wt=!0}function Et(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,_e.draggable),_dispatchEvent({sortable:xt,name:"change",toEl:s,newIndex,newDraggableIndex,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=closest(a,_e.draggable,s,!0),Tt("dragOver"),Sortable.eventCanceled)return wt;if(dragEl.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||xt._ignoreWhileAnimating===a)return Mt(!1);if(ignoreNextClick=!1,rt&&!_e.disabled&&(ct?dt||(_=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,rt,dragEl,e))&&nt.checkPut(this,rt,dragEl,e))){if(bt=this._getDirection(e,a)==="vertical",d=getRect(dragEl),Tt("dragOverValid"),Sortable.eventCanceled)return wt;if(_)return parentEl=rootEl,Rt(),this._hideClone(),Tt("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),Mt(!0);var $t=lastChild(s,_e.draggable);if(!$t||_ghostIsLast(e,bt,this)&&!$t.animated){if($t===dragEl)return Mt(!1);if($t&&s===e.target&&(a=$t),a&&(b=getRect(a)),_onMove(rootEl,s,dragEl,d,a,b,e,!!a)!==!1)return Rt(),$t&&$t.nextSibling?s.insertBefore(dragEl,$t.nextSibling):s.appendChild(dragEl),parentEl=s,Et(),Mt(!0)}else if($t&&_ghostIsFirst(e,bt,this)){var Xt=getChild(s,0,_e,!0);if(Xt===dragEl)return Mt(!1);if(a=Xt,b=getRect(a),_onMove(rootEl,s,dragEl,d,a,b,e,!1)!==!1)return Rt(),s.insertBefore(dragEl,Xt),parentEl=s,Et(),Mt(!0)}else if(a.parentNode===s){b=getRect(a);var Zt=0,Nt,Jt=dragEl.parentNode!==s,dn=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||d,a.animated&&a.toRect||b,bt),Pn=bt?"top":"left",an=isScrolledPast(a,"top","top")||isScrolledPast(dragEl,"top","top"),Vt=an?an.scrollTop:void 0;lastTarget!==a&&(Nt=b[Pn],pastFirstInvertThresh=!1,isCircumstantialInvert=!dn&&_e.invertSwap||Jt),Zt=_getSwapDirection(e,a,b,bt,dn?1:_e.swapThreshold,_e.invertedSwapThreshold==null?_e.swapThreshold:_e.invertedSwapThreshold,isCircumstantialInvert,lastTarget===a);var ao;if(Zt!==0){var hn=index(dragEl);do hn-=Zt,ao=parentEl.children[hn];while(ao&&(css(ao,"display")==="none"||ao===ghostEl))}if(Zt===0||ao===a)return Mt(!1);lastTarget=a,lastDirection=Zt;var fn=a.nextElementSibling,It=!1;It=Zt===1;var Vn=_onMove(rootEl,s,dragEl,d,a,b,e,It);if(Vn!==!1)return(Vn===1||Vn===-1)&&(It=Vn===1),_silent=!0,setTimeout(_unsilent,30),Rt(),It&&!fn?s.appendChild(dragEl):a.parentNode.insertBefore(dragEl,It?fn:a),an&&scrollBy(an,0,Vt-an.scrollTop),parentEl=dragEl.parentNode,Nt!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(Nt-getRect(a)[Pn])),Et(),Mt(!0)}if(s.contains(dragEl))return Mt(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var s=this.el,a=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,a.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,a.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(s,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],s,a=this.el.children,d=0,b=a.length,_=this.options;d<b;d++)s=a[d],closest(s,_.draggable,this.el,!1)&&e.push(s.getAttribute(_.dataIdAttr)||_generateId(s));return e},sort:function(e,s){var a={},d=this.el;this.toArray().forEach(function(b,_){var _e=d.children[_];closest(_e,this.options.draggable,d,!1)&&(a[b]=_e)},this),s&&this.captureAnimationState(),e.forEach(function(b){a[b]&&(d.removeChild(a[b]),d.appendChild(a[b]))}),s&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,s){return closest(e,s||this.options.draggable,this.el,!1)},option:function(e,s){var a=this.options;if(s===void 0)return a[e];var d=PluginManager.modifyOption(this,e,s);typeof d<"u"?a[e]=d:a[e]=s,e==="group"&&_prepareGroup(a)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(s){s.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function _onMove(o,e,s,a,d,b,_,_e){var nt,rt=o[expando],ct=rt.options.onMove,dt;return window.CustomEvent&&!IE11OrLess&&!Edge?nt=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(nt=document.createEvent("Event"),nt.initEvent("move",!0,!0)),nt.to=e,nt.from=o,nt.dragged=s,nt.draggedRect=a,nt.related=d||e,nt.relatedRect=b||getRect(e),nt.willInsertAfter=_e,nt.originalEvent=_,o.dispatchEvent(nt),ct&&(dt=ct.call(rt,nt,_)),dt}function _disableDraggable(o){o.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(o,e,s){var a=getRect(getChild(s.el,0,s.options,!0)),d=getChildContainingRectFromElement(s.el,s.options,ghostEl),b=10;return e?o.clientX<d.left-b||o.clientY<a.top&&o.clientX<a.right:o.clientY<d.top-b||o.clientY<a.bottom&&o.clientX<a.left}function _ghostIsLast(o,e,s){var a=getRect(lastChild(s.el,s.options.draggable)),d=getChildContainingRectFromElement(s.el,s.options,ghostEl),b=10;return e?o.clientX>d.right+b||o.clientY>a.bottom&&o.clientX>a.left:o.clientY>d.bottom+b||o.clientX>a.right&&o.clientY>a.top}function _getSwapDirection(o,e,s,a,d,b,_,_e){var nt=a?o.clientY:o.clientX,rt=a?s.height:s.width,ct=a?s.top:s.left,dt=a?s.bottom:s.right,pt=!1;if(!_){if(_e&&targetMoveDistance<rt*d){if(!pastFirstInvertThresh&&(lastDirection===1?nt>ct+rt*b/2:nt<dt-rt*b/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)pt=!0;else if(lastDirection===1?nt<ct+targetMoveDistance:nt>dt-targetMoveDistance)return-lastDirection}else if(nt>ct+rt*(1-d)/2&&nt<dt-rt*(1-d)/2)return _getInsertDirection(e)}return pt=pt||_,pt&&(nt<ct+rt*b/2||nt>dt-rt*b/2)?nt>ct+rt/2?1:-1:0}function _getInsertDirection(o){return index(dragEl)<index(o)?1:-1}function _generateId(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,s=e.length,a=0;s--;)a+=e.charCodeAt(s);return a.toString(36)}function _saveInputCheckedState(o){savedInputChecked.length=0;for(var e=o.getElementsByTagName("input"),s=e.length;s--;){var a=e[s];a.checked&&savedInputChecked.push(a)}}function _nextTick(o){return setTimeout(o,0)}function _cancelNextTick(o){return clearTimeout(o)}documentExists&&on(document,"touchmove",function(o){(Sortable.active||awaitingDragStarted)&&o.cancelable&&o.preventDefault()});Sortable.utils={on,off,css,find,is:function(e,s){return!!closest(e,s,e,!1)},extend:extend$1,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild,expando};Sortable.get=function(o){return o[expando]};Sortable.mount=function(){for(var o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),a.utils)),PluginManager.mount(a)})};Sortable.create=function(o,e){return new Sortable(o,e)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(s){var a=s.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):a.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(s){var a=s.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(s){this._handleAutoScroll(s,!0)},_handleAutoScroll:function(s,a){var d=this,b=(s.touches?s.touches[0]:s).clientX,_=(s.touches?s.touches[0]:s).clientY,_e=document.elementFromPoint(b,_);if(touchEvt$1=s,a||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(s,this.options,_e,a);var nt=getParentAutoScrollElement(_e,!0);scrolling&&(!pointerElemChangedInterval||b!==lastAutoScrollX||_!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var rt=getParentAutoScrollElement(document.elementFromPoint(b,_),!0);rt!==nt&&(nt=rt,clearAutoScrolls()),autoScroll(s,d.options,rt,a)},10),lastAutoScrollX=b,lastAutoScrollY=_)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(_e,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(s,this.options,getParentAutoScrollElement(_e,!1),!1)}}},_extends(o,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(o){clearInterval(o.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(o,e,s,a){if(e.scroll){var d=(o.touches?o.touches[0]:o).clientX,b=(o.touches?o.touches[0]:o).clientY,_=e.scrollSensitivity,_e=e.scrollSpeed,nt=getWindowScrollingElement(),rt=!1,ct;scrollRootEl!==s&&(scrollRootEl=s,clearAutoScrolls(),scrollEl=e.scroll,ct=e.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(s,!0)));var dt=0,pt=scrollEl;do{var bt=pt,xt=getRect(bt),wt=xt.top,Tt=xt.bottom,Rt=xt.left,Mt=xt.right,Et=xt.width,$t=xt.height,Xt=void 0,Zt=void 0,Nt=bt.scrollWidth,Jt=bt.scrollHeight,dn=css(bt),Pn=bt.scrollLeft,an=bt.scrollTop;bt===nt?(Xt=Et<Nt&&(dn.overflowX==="auto"||dn.overflowX==="scroll"||dn.overflowX==="visible"),Zt=$t<Jt&&(dn.overflowY==="auto"||dn.overflowY==="scroll"||dn.overflowY==="visible")):(Xt=Et<Nt&&(dn.overflowX==="auto"||dn.overflowX==="scroll"),Zt=$t<Jt&&(dn.overflowY==="auto"||dn.overflowY==="scroll"));var Vt=Xt&&(Math.abs(Mt-d)<=_&&Pn+Et<Nt)-(Math.abs(Rt-d)<=_&&!!Pn),ao=Zt&&(Math.abs(Tt-b)<=_&&an+$t<Jt)-(Math.abs(wt-b)<=_&&!!an);if(!autoScrolls[dt])for(var hn=0;hn<=dt;hn++)autoScrolls[hn]||(autoScrolls[hn]={});(autoScrolls[dt].vx!=Vt||autoScrolls[dt].vy!=ao||autoScrolls[dt].el!==bt)&&(autoScrolls[dt].el=bt,autoScrolls[dt].vx=Vt,autoScrolls[dt].vy=ao,clearInterval(autoScrolls[dt].pid),(Vt!=0||ao!=0)&&(rt=!0,autoScrolls[dt].pid=setInterval((function(){a&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var fn=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*_e:0,It=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*_e:0;typeof ct=="function"&&ct.call(Sortable.dragged.parentNode[expando],It,fn,o,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,It,fn)}).bind({layer:dt}),24))),dt++}while(e.bubbleScroll&&pt!==nt&&(pt=getParentAutoScrollElement(pt,!1)));scrolling=rt}},30),drop=function(e){var s=e.originalEvent,a=e.putSortable,d=e.dragEl,b=e.activeSortable,_=e.dispatchSortableEvent,_e=e.hideGhostForTarget,nt=e.unhideGhostForTarget;if(s){var rt=a||b;_e();var ct=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:s,dt=document.elementFromPoint(ct.clientX,ct.clientY);nt(),rt&&!rt.el.contains(dt)&&(_("spill"),this.onSpill({dragEl:d,putSortable:a}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(e){var s=e.oldDraggableIndex;this.startIndex=s},onSpill:function(e){var s=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var d=getChild(this.sortable.el,this.startIndex,this.options);d?this.sortable.el.insertBefore(s,d):this.sortable.el.appendChild(s),this.sortable.animateAll(),a&&a.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(e){var s=e.dragEl,a=e.putSortable,d=a||this.sortable;d.captureAnimationState(),s.parentNode&&s.parentNode.removeChild(s),d.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);var LayerSwitcherDOM={_createDraggableElement:function(o,e){let s=".GPlayerName";checkDsfr()&&(s=".GPlayerDragNDrop"),navigator.userAgent.match(/chrome|chromium|crios/i)?Sortable.create(o,{handle:s,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(a){e._onEndDragAndDropLayerClick(a)}}):Sortable.create(o,{handle:s,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(a){e._onEndDragAndDropLayerClick(a)}})},_addUID:function(o){var e=this._uid?o+"-"+this._uid:o;return e},_createMainContainerElement:function(){var o=document.createElement("div");return o.id=this._addUID("GPlayerSwitcher"),o.className="GPwidget gpf-widget gpf-mobile-fullscreen",o},_createMainLayersShowElement:function(){var o=document.createElement("input");return o.id=this._addUID("GPshowLayersList"),o.type="checkbox",o},_createMainLayersElement:function(){var o=document.createElement("dialog");return o.id=this._addUID("GPlayersList"),o.className="GPpanel gpf-panel fr-modal",o},_createMainLayersDivElement:function(){var o=document.createElement("div");return o.className="GPpanelBody gpf-panel__body_ls fr-modal__body",o},_createMainPictoElement:function(){var o=this,e=document.createElement("button"),s=document.createElement("span");return e.appendChild(s),e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLayersListPicto gpf-btn gpf-btn--secondary gpf-btn-icon gpf-btn-icon-layerswitcher fr-btn fr-btn--secondary",e.htmlFor=this._addUID("GPshowLayersList"),e.setAttribute("aria-label","Afficher/masquer le gestionnaire de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),document.getElementById(o._addUID("GPshowLayersList")).checked=d,document.getElementById(o._addUID("GPshowLayersList")).checked&&(document.getElementById(o._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(o._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),o.onShowLayerSwitcherClick(a)}):e.attachEvent&&e.attachEvent("onclick",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),document.getElementById(o._addUID("GPshowLayersList")).checked&&(document.getElementById(o._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(o._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),o.onShowLayerSwitcherClick(a)}),e},_createMainCounterLayersElement:function(){var o=document.createElement("span");return o.id=this._addUID("GPlayerCounter"),o.className="GPlayerCounter",o.innerHTML="0",o},_createMainInfoElement:function(){var o=document.createElement("dialog");return o.id=this._addUID("GPlayerInfoPanel"),o.className="GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal",o},_createMainInfoDivElement:function(){var o=document.createElement("div");return o.className="gpf-panel__body fr-modal__body",o},_createLayersPanelHeaderElement:function(){var o=document.createElement("div");return o.className="GPpanelHeader gpf-panel__header_ls",o},_createLayersPanelIconElement:function(){var o=document.createElement("label");return o.className="GPpanelIcon gpf-btn-header gpf-btn-icon-layers",o.title="Couches de donnes",o},_createLayersPanelTitleElement:function(){var o=document.createElement("div");return o.className="GPpanelTitle gpf-panel__title_ls",o.id=this._addUID("GPlayersHeaderTitle"),o.innerHTML="Couches de donnes",o},_createLayersPanelCloseElement:function(){var o=this,e=document.createElement("button");e.id=this._addUID("GPlayersPanelClose"),e.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var s=document.createElement("span");return s.className="GPelementHidden gpf-visible fr-mx-1w",s.innerText="Fermer",e.appendChild(s),e.addEventListener?e.addEventListener("click",function(){document.getElementById(o._addUID("GPshowLayersListPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(o._addUID("GPshowLayersListPicto")).click()}),e},_createContainerLayerElement:function(o){var e=document.createElement("div");return e.id=this._addUID("GPlayerSwitcher_ID_"+o.id),e.className="GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer",e.appendChild(this._createBasicToolElement(o)),e.appendChild(this._createAdvancedToolShowElement(o)),e.appendChild(this._createAdvancedToolElement(o)),e},_createBasicToolElement:function(o){var e=document.createElement("div");return e.id=this._addUID("GPbasicTools_ID_"+o.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(o)),e.appendChild(this._createBasicToolVisibilityElement(o)),e.appendChild(this._createBasicToolDragNDropElement(o)),e},_createBasicToolDragNDropElement:function(o){var e=document.createElement("div");e.id=this._addUID("GPdragndropPicto_ID_"+o.id),e.className="GPelementHidden GPlayerDragNDrop gpf-btn gpf-btn-icon gpf-btn-icon-ls-dragndrop gpf-btn--tertiary fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Deplacer la couche",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0);var s=this;return e.addEventListener?e.addEventListener("click",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),s._onStartDragAndDropLayerClick(a)}):e.attachEvent&&e.attachEvent("onclick",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),s._onStartDragAndDropLayerClick(a)}),e},_createBasicToolNameElement:function(o){var e=document.createElement("label");return e.id=this._addUID("GPname_ID_"+o.id),e.className="GPlayerName gpf-label gpf-label-name fr-label",e.title=o.description||o.title,e.innerHTML=o.title,e},_createBasicToolVisibilityElement:function(o){var e=typeof o.visibility<"u"?o.visibility:!0,s=document.createElement("button");s.id=this._addUID("GPvisibilityPicto_ID_"+o.id),s.className="GPlayerVisibility gpf-btn gpf-btn-icon gpf-btn-icon-ls-visibility fr-btn fr-btn--tertiary gpf-btn--tertiary",s.title="Afficher/masquer la couche",s.setAttribute("tabindex","0"),s.setAttribute("aria-pressed",e),s.setAttribute("type","button");var a=this;return s.addEventListener?s.addEventListener("click",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onVisibilityLayerClick(d)}):s.attachEvent&&s.attachEvent("onclick",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onVisibilityLayerClick(d)}),s},_createAdvancedToolShowElement:function(o){var e=document.createElement("button");e.id=this._addUID("GPshowAdvancedTools_ID_"+o.id),e.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowLayerAdvancedTools gpf-btn gpf-btn-icon gpf-btn-icon-ls-collapse fr-btn--sm fr-btn--tertiary gpf-btn--tertiary",e.title="Plus d'outils",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button");var s=this;return e.addEventListener?e.addEventListener("click",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d);var b=document.getElementById(s._addUID("GPadvancedTools_ID_"+o.id));d?(b.classList.replace("GPelementVisible","GPelementHidden"),b.classList.replace("gpf-visible","gpf-hidden")):(b.classList.replace("GPelementHidden","GPelementVisible"),b.classList.replace("gpf-hidden","gpf-visible"))}):e.attachEvent&&e.attachEvent("onclick",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),element.classList.replace("GPelementVisible","GPelementHidden"),element.classList.replace("gpf-visible","gpf-hidden")}),e},_createAdvancedToolElement:function(o){var e=document.createElement("div");if(e.id=this._addUID("GPadvancedTools_ID_"+o.id),e.className="GPelementHidden GPlayerAdvancedTools gpf-hidden",e.appendChild(this._createAdvancedToolDeleteElement(o)),e.appendChild(this._createAdvancedToolInformationElement(o)),o.type!=="feature")for(var s=this._createAdvancedToolOpacityElement(o),a=0;a<s.length;a++)e.appendChild(s[a]);if(e.appendChild(this._createAdvancedToolExtentElement(o)),checkDsfr()){var d=document.createElement("button");d.className="GPlayerAdvancedToolsContextual fr-btn gpf-btn gpf-btn--tertiary fr-btn--tertiary-no-outline",d.setAttribute("aria-pressed",!1),d.addEventListener?d.addEventListener("click",function(_){var _e=_.target.ariaPressed==="true";_.target.setAttribute("aria-pressed",!_e)}):d.attachEvent&&d.attachEvent("onclick",function(_){var _e=_.target.ariaPressed==="true";_.target.setAttribute("aria-pressed",!_e)});var b=document.createElement("div");b.appendChild(this._createAdvancedToolDeleteElement(o,!0)),b.appendChild(this._createAdvancedToolInformationElement(o,!0)),b.appendChild(this._createAdvancedToolExtentElement(o,!0)),e.appendChild(d),e.appendChild(b)}return e},_createAdvancedToolDeleteElement:function(o,e=!1){var s=document.createElement("button");e?s.id=this._addUID("GPremoveContextual_ID_"+o.id):s.id=this._addUID("GPremove_ID_"+o.id),s.className="GPlayerRemove gpf-btn gpf-btn-icon gpf-btn-icon-ls-remove fr-btn fr-btn--tertiary gpf-btn--tertiary",s.title="Supprimer la couche",s.layerId=o.id,e&&(s.innerText="Supprimer"),s.setAttribute("tabindex","0"),s.setAttribute("aria-pressed",!0),s.setAttribute("type","button");var a=this;return s.addEventListener?s.addEventListener("click",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onDropLayerClick(d)}):s.attachEvent&&s.attachEvent("onclick",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onDropLayerClick(d)}),s},_createAdvancedToolInformationElement:function(o,e=!1){var s=document.createElement("button");e?s.id=this._addUID("GPinfoContextual_ID_"+o.id):s.id=this._addUID("GPinfo_ID_"+o.id),s.className="GPlayerInfo GPlayerInfoClosed gpf-btn gpf-btn-icon gpf-btn-icon-ls-info fr-btn fr-btn--tertiary gpf-btn--tertiary",(!o.title||!o.description)&&(s.style.opacity="0",s.style.visibility="hidden",e&&(s.style.display="none")),s.title="Informations/lgende",s.layerId=o.id,e&&(s.innerText="Informations"),s.setAttribute("tabindex","0"),s.setAttribute("aria-pressed",!0),s.setAttribute("type","button");var a=this;return s.addEventListener?s.addEventListener("click",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onOpenLayerInfoClick(d)}):s.attachEvent&&s.attachEvent("onclick",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onOpenLayerInfoClick(d)}),s},_createAdvancedToolOpacityElement:function(o){var e=[],s=document.createElement("div");s.id=this._addUID("GPopacity_ID_"+o.id),s.className="GPlayerOpacity fr-range fr-range--sm",s.dataset.frJsRange="true",s.title="Opacit";var a=typeof o.opacity<"u"?o.opacity:1;a=Math.round(a*100),s.style.setProperty("--progress-right",a+"%");var d=document.createElement("input");d.id=this._addUID("GPopacityValueDiv_ID_"+o.id),d.type="range",d.value=a,d.ariaLabel="Opacit";var b=this;d.addEventListener?d.addEventListener("change",function(nt){b._onChangeLayerOpacity(nt)}):d.attachEvent&&d.attachEvent("onchange",function(nt){b._onChangeLayerOpacity(nt)}),d.addEventListener?d.addEventListener("input",function(nt){b._onChangeLayerOpacity(nt)}):d.attachEvent&&d.attachEvent("oninput",function(nt){b._onChangeLayerOpacity(nt)}),s.appendChild(d);var _=document.createElement("div");_.id=this._addUID("GPopacityValueDiv_ID_"+o.id),_.className="GPlayerOpacityValue";var _e=document.createElement("span");return _e.id=this._addUID("GPopacityValue_ID_"+o.id),_e.className="gpf-range__output fr-range__output gpf-visible",_e.innerHTML=a+"%",_.appendChild(_e),e.push(s),e.push(_),e},_createAdvancedToolExtentElement:function(o,e=!1){var s=document.createElement("button");e?s.id=this._addUID("GPextentContextual_ID_"+o.id):s.id=this._addUID("GPextent_ID_"+o.id),s.className="GPelementHidden GPlayerExtent gpf-btn gpf-btn-icon gpf-btn-icon-ls-extent fr-btn fr-btn--tertiary gpf-btn--tertiary",s.title="Zoomer dans l'tendue",s.layerId=o.id,e&&(s.innerText="Zoomer"),s.setAttribute("tabindex","0"),s.setAttribute("aria-pressed",!0),s.setAttribute("type","button");var a=this;return s.addEventListener?s.addEventListener("click",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onZoomToExtentClick(d)}):s.attachEvent&&s.attachEvent("onclick",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onZoomToExtentClick(d)}),s},_createContainerLayerInfoElement:function(o){var e=document.createElement("div"),s=document.createElement("div");s.className="gpf-panel__header_ls",e.appendChild(s);var a=document.createElement("label");a.className="GPlayerInfo gpf-btn-header gpf-btn-icon-ls-info",a.title="Informations",s.appendChild(a);var d=document.createElement("div");d.id=this._addUID("GPlayerInfoTitle"),d.innerHTML=o.title,d.className="gpf-panel__title_ls",s.appendChild(d);var b=document.createElement("button");b.id=this._addUID("GPlayerInfoClose"),b.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",b.title="Fermer la fentre";var _=this,_e=function(){document.getElementById(_._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(_._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(o.id).classList.add("GPlayerInfoClosed"),document.getElementById(o.id).classList.remove("GPlayerInfoOpened")};b.addEventListener?b.addEventListener("click",_e):b.attachEvent&&b.attachEvent("onclick",_e),this.addEventListener("layerswitcher:remove",ao=>{parseInt(o.id.split("-")[0].split("GPinfo_ID_")[1])===ao.layer.id&&(document.getElementById(_._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(_._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"))}),s.appendChild(b),e.appendChild(s);var nt=document.createElement("div");if(nt.id=this._addUID("GPlayerInfoContent"),nt.className="gpf-panel__content fr-modal__content",e.appendChild(nt),o.quicklookUrl){var rt=document.createElement("div");rt.id=this._addUID("GPlayerInfoQuicklook"),rt.title="Afficher un aperu de la couche";var ct=document.createElement("a");ct.href=o.quicklookUrl,ct.appendChild(rt),nt.appendChild(ct)}var dt=document.createElement("div");if(dt.id=this._addUID("GPlayerInfoDescription"),dt.innerHTML=o.description,nt.appendChild(dt),o.metadata){var pt=document.createElement("div");pt.id=this._addUID("GPlayerInfoMetadata");var bt=document.createElement("div");bt.className="GPlayerInfoSubtitle",bt.innerHTML="Mtadonnes",pt.appendChild(bt);for(var xt=0;xt<o.metadata.length;xt++){var wt=o.metadata[xt].url,Tt=document.createElement("div");Tt.className="GPlayerInfoLink";var Rt=document.createElement("a");Rt.href=wt,Rt.innerHTML=wt,Tt.appendChild(Rt),pt.appendChild(Tt)}o.metadata.length!==0&&nt.appendChild(pt)}if(o.legends){var Mt=document.createElement("div");Mt.id=this._addUID("GPlayerInfoLegend");var Et=document.createElement("div");Et.className="GPlayerInfoSubtitle",Et.innerHTML="Lgende",Mt.appendChild(Et);for(var $t={},Xt=o.maxScaleDenominator||56e7,Zt=0;Zt<o.legends.length;Zt++){var Nt=o.legends[Zt].minScaleDenominator;if(Nt){var Jt=Nt.toString();Nt=Math.round(parseInt(Jt.substring(0,3),10)/10)*Math.pow(10,Jt.length-2)}else Nt=270;$t[Nt]=o.legends[Zt]}for(var dn in $t)if($t.hasOwnProperty(dn)){var Pn=$t[dn].url;if(typeof Pn=="string"&&Pn.toLowerCase().indexOf("nolegend.jpg")===-1){var an=document.createElement("div");an.className="GPlayerInfoLink",Xt=$t[dn].maxScaleDenominator||Xt;var Vt=document.createElement("a");Vt.className="fr-link",Vt.href=Pn,Vt.target="_blank",Vt.innerHTML="Du 1/"+dn+" au 1/"+Xt,an.appendChild(Vt),Mt.appendChild(an)}else delete $t[dn]}Object.keys($t).length!==0&&nt.appendChild(Mt)}return e}},logger$4=LoggerByDefault$1.getLogger("layerswitcher"),LayerSwitcher=class ole extends ControlExtended{constructor(e){e=e||{};var s=e.options||{},a=e.layers||[];if(super({element:s.element,target:s.target,render:s.render}),!(this instanceof ole))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(a))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof s!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this.CLASSNAME="LayerSwitcher",this._initialize(s,a),this.container=this._initContainer(s),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e)this._addMapLayers(e),this.collapsed||this._showLayerSwitcherButton.setAttribute("aria-pressed",!0),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",a=>{var d=a.element,b;d.hasOwnProperty("gpLayerId")?b=d.gpLayerId:(b=this._layerId,d.gpLayerId=b,this._layerId++),this._layers[b]||this.addLayer(d)}),this._listeners.onRemoveListener=e.getLayers().on("remove",a=>{var d=a.element,b=d.gpLayerId;this._layers[b]&&this.removeLayer(d)});else{unByKey(this._listeners.onMoveListener),unByKey(this._listeners.onAddListener),unByKey(this._listeners.onRemoveListener);for(var s=this._layersOrder.length-1;s>=0;s--);}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}addLayer(e,s){var a=this.getMap();if(s=s||{},!e){logger$4.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");return}var d=e.gpLayerId;if(typeof d>"u"){logger$4.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e);return}var b=!1;if(a.getLayers().forEach(Tt=>{Tt.gpLayerId===d&&(b=!0)}),!b){logger$4.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )");return}if(this._layers[d]){for(var pt in s)s.hasOwnProperty(pt)&&(this._layers[d][pt]=s[pt]);if(s.title){var bt=document.getElementById(this._addUID("GPname_ID_"+d));bt&&(bt.innerHTML=s.title,bt.title=s.description||s.title)}var xt=document.getElementById(this._addUID("GPinfo_ID_"+d));if(!document.getElementById(this._addUID("GPinfo_ID_"+d))&&s.description){var wt=document.getElementById(this._addUID("GPadvancedTools_ID_"+d));wt&&wt.appendChild(this._createAdvancedToolInformationElement({id:d}))}xt&&xt.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")}else{var _=this.getLayerInfo(e)||{},_e=e.getOpacity(),nt=e.getVisible(),rt=this.isInRange(e,a),ct={layer:e,id:d,name:e.name,service:e.service,opacity:_e??1,visibility:nt??!0,inRange:rt??!0,title:s.title!=null?s.title:_._title||d,description:s.description||_._description||null,legends:s.legends||_._legends||[],metadata:s.metadata||_._metadata||[],quicklookUrl:s.quicklookUrl||_._quicklookUrl||null};this._layers[d]=ct;var dt=this._createLayerDiv(ct);this._layers[d].div=dt,e.getZIndex&&e.getZIndex()!==0&&typeof e.getZIndex()<"u"||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(ct),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(dt,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",Tt=>this._updateLayerOpacity(Tt)),this._listeners.updateLayerVisibility=e.on("change:visible",Tt=>this._updateLayerVisibility(Tt)),this._layers[d].onZIndexChangeEvent==null&&(this._layers[d].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}this._updateLayerCounter(),this.dispatchEvent({type:"layerswitcher:add",layer:this._layers[d]})}removeLayer(e){if(e){unByKey(this._listeners.updateLayerOpacity),unByKey(this._listeners.updateLayerVisibility),logger$4.trace(e);var s=e.gpLayerId,a=document.getElementById(this._addUID("GPinfo_ID_"+s));a&&a.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden");var d=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+s));d&&this._layerListContainer.removeChild(d);var b=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(b,1),this._lastZIndex--;for(var _=this._layersOrder,_e=0;_e<_.length;_e++)_[_e].layer.setZIndex(this._lastZIndex-_e);this.dispatchEvent({type:"layerswitcher:remove",layer:this._layers[s]}),delete this._layers[s],this._updateLayerCounter()}}setCollapsed(e){if(e===void 0){logger$4.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");return}var s=!document.getElementById(this._addUID("GPshowLayersList")).checked;e&&s||!e&&!s||(s||document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(this._addUID("GPshowLayersList")).checked=!e)}getCollapsed(){return this.collapsed}setRemovable(e,s){if(e){var a=e.gpLayerId;if(a==null){logger$4.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");return}var d=document.getElementById(this._addUID("GPremove_ID_"+a));d&&(s===!1?d.style.display="none":s===!0&&(d.style.display="block"))}}getContainer(){return this.container}_initialize(e,s){this._uid=SelectorID.generate(),this.options=e,this.options.layers=s,this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=e.collapsed!==void 0?e.collapsed:!0,this._layerListContainer=null,this._listeners={};for(var a=0;a<s.length;a++){var d=s[a].layer;if(d){var b;d.hasOwnProperty("gpLayerId")?b=d.gpLayerId:(b=this._layerId,d.gpLayerId=b,this._layerId++);var _=s[a].config||{},_e=d.getOpacity(),nt=d.getVisible(),rt={layer:d,id:b,name:d.name,service:d.service,opacity:_e??1,visibility:nt??!0,title:_.title!=null?_.title:_.id?_.id:b,description:_.description||null,legends:_.legends||[],metadata:_.metadata||[],quicklookUrl:_.quicklookUrl||null};this._layers[b]=rt}}}_initContainer(){var e=this._createMainContainerElement(),s=this._createMainLayersShowElement();e.appendChild(s),this.collapsed?this.collapsed=!0:(s.checked="checked",this.collapsed=!1);var a=this,d=function(wt){this.collapsed=!wt.target.checked,this.dispatchEvent("change:collapsed")};s.addEventListener("click",function(wt){d.call(a,wt)});var b=this._showLayerSwitcherButton=this._createMainPictoElement();if(e.appendChild(b),e.classList.add("GplayerSwitcher-counterRemoved"),this.options.counter){e.classList.remove("GplayerSwitcher-counterRemoved"),e.classList.add("GplayerSwitcher-counterAdded");var _=this._layerSwitcherCounter=this._createMainCounterLayersElement();b.appendChild(_)}var _e=this._createMainLayersElement();if(e.appendChild(_e),this.options.panel){var nt=this._createLayersPanelHeaderElement();_e.appendChild(nt);var rt=this._createLayersPanelIconElement();nt.appendChild(rt);var ct=this._createLayersPanelTitleElement();nt.appendChild(ct);var dt=this._createLayersPanelCloseElement();nt.appendChild(dt)}var pt=this._layerListContainer=this._createMainLayersDivElement();_e.appendChild(pt),this._createDraggableElement(pt,this);var bt=this._createMainInfoElement(),xt=this._createMainInfoDivElement();return bt.appendChild(xt),e.appendChild(bt),e}_addMapLayers(e){this._layersIndex={},e.getLayers().forEach(nt=>{var rt=null;nt.hasOwnProperty("gpLayerId")?rt=nt.gpLayerId:(rt=this._layerId,nt.gpLayerId=rt,this._layerId++);var ct=this.getLayerInfo(nt)||{};if(this._layers[rt])this._layers[rt].opacity=nt.getOpacity(),this._layers[rt].visibility=nt.getVisible(),this._layers[rt].inRange=this.isInRange(nt,e);else{var dt=nt.getOpacity(),pt=nt.getVisible(),bt=this.isInRange(nt,e),xt={layer:nt,id:rt,name:nt.name,service:nt.service,opacity:dt??1,visibility:pt??!0,inRange:bt??!0,title:ct._title||rt,description:ct._description||null,legends:ct._legends||[],metadata:ct._metadata||[],quicklookUrl:ct._quicklookUrl||null};this._layers[rt]=xt}if(this._updateLayerCounter(),this._listeners.updateLayerOpacity=nt.on("change:opacity",Tt=>this._updateLayerOpacity(Tt)),this._listeners._updateLayerVisibility=nt.on("change:visible",Tt=>this._updateLayerVisibility(Tt)),nt.getZIndex!==void 0){var wt=nt.getZIndex()||0;(!this._layersIndex[wt]||!Array.isArray(this._layersIndex[wt]))&&(this._layersIndex[wt]=[]),this._layersIndex[wt].push(this._layers[rt])}});for(var s in this._layersIndex)if(this._layersIndex.hasOwnProperty(s))for(var a=this._layersIndex[s],d=0;d<a.length;d++)this._layersOrder.unshift(a[d]),this._lastZIndex++,a[d].layer.setZIndex(this._lastZIndex),this._layers[a[d].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[a[d].layer.gpLayerId].onZIndexChangeEvent=a[d].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var b=0;b<this._layersOrder.length;b++){var _=this._layersOrder[b],_e=this._createLayerDiv(_);this._layerListContainer.querySelector("#"+_e.id)||this._layerListContainer.appendChild(_e),this._layers[_.id].div=_e}}_createLayerDiv(e){var s=e.legends&&e.legends.length!==0,a=e.metadata&&e.metadata.length!==0,d=e.quicklookUrl;(s||a||d)&&(e.displayInformationElement=!0);var b=this._createContainerLayerElement(e);return e.inRange||b.classList.add("outOfRange"),b}onShowLayerSwitcherClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var s=this._showLayerSwitcherButton.ariaPressed;this.collapsed=s!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}_updateLayerCounter(){this._layerSwitcherCounter&&(this._layerSwitcherCounter.innerHTML=Object.keys(this._layers).length)}_onChangeLayerOpacity(e){e.target.parentNode.style.setProperty("--progress-right",e.target.value+"%");var s=e.target.id,a=SelectorID.index(s),d=this._layers[a].layer,b=e.target.value,_=document.getElementById(this._addUID("GPopacityValue_ID_"+a));_.innerHTML=b+"%",d.setOpacity(b/100)}_updateLayerOpacity(e){var s=e.target.getOpacity();s>1&&(s=1),s<0&&(s=0);var a=e.target.gpLayerId,d=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+a));d&&(d.value=Math.round(s*100));var b=document.getElementById(this._addUID("GPopacityValue_ID_"+a));b&&(b.innerHTML=Math.round(s*100)+"%"),this.dispatchEvent({type:"layerswitcher:change:opacity",opacity:s,layer:this._layers[a]})}_onVisibilityLayerClick(e){var s=e.target.id,a=SelectorID.index(s),d=this._layers[a].layer;d.setVisible(e.target.ariaPressed==="true")}_updateLayerVisibility(e){var s=e.target.getVisible(),a=e.target.gpLayerId,d=document.getElementById(this._addUID("GPvisibilityPicto_ID_"+a));d&&(d.ariaPressed=s),this.dispatchEvent({type:"layerswitcher:change:visibility",visibility:s,layer:this._layers[a]})}_updateLayersOrder(){var e=this.getMap();if(e){this._layersIndex={};var s,a;e.getLayers().forEach(rt=>{a=rt.gpLayerId,unByKey(this._layers[a].onZIndexChangeEvent),this._layers[a].onZIndexChangeEvent=null,s=null,rt.getZIndex!==void 0&&(s=rt.getZIndex(),(!this._layersIndex[s]||!Array.isArray(this._layersIndex[s]))&&(this._layersIndex[s]=[]),this._layersIndex[s].push(this._layers[a]))}),this._lastZIndex=0,this._layersOrder=[];for(var d in this._layersIndex)if(this._layersIndex.hasOwnProperty(d))for(var b=this._layersIndex[d],_=0;_<b.length;_++)this._layersOrder.unshift(b[_]),this._lastZIndex++,this._layers[b[_].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[b[_].layer.gpLayerId].onZIndexChangeEvent=b[_].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(let rt=0;rt<this._layerListContainer.childNodes.length;rt++){const ct=this._layerListContainer.childNodes[rt];ct.id!==""&&ct.remove()}for(var _e=0;_e<this._layersOrder.length;_e++){var nt=this._layersOrder[_e];this._layerListContainer.appendChild(nt.div)}}else logger$4.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}}_onOpenLayerInfoClick(e){var s=e.target.id,a=SelectorID.index(s),d=this._layers[a],b,_,_e=document.getElementById(e.target.id);if(_e.classList.contains("GPlayerInfoOpened")){_e.classList.remove("GPlayerInfoOpened"),_e.classList.add("GPlayerInfoClosed"),b=document.getElementById(this._addUID("GPlayerInfoPanel")),b.classList.remove("GPlayerInfoPanelOpened","gpf-visible"),b.classList.add("GPlayerInfoPanelClosed","gpf-hidden"),_=document.getElementById(this._addUID("GPlayerInfoContent")),_&&_.parentNode.remove();return}_e.classList.contains("GPlayerInfoClosed")&&(_e.classList.remove("GPlayerInfoClosed"),_e.classList.add("GPlayerInfoOpened")),b=document.getElementById(this._addUID("GPlayerInfoPanel")),b.classList.remove("GPlayerInfoPanelClosed","gpf-hidden"),b.classList.add("GPlayerInfoPanelOpened","gpf-visible"),_=document.getElementById(this._addUID("GPlayerInfoContent")),_&&_.parentNode.remove();var nt={id:s,title:d.title,description:d.description,quicklookUrl:d.quicklookUrl,metadata:d.metadata,legends:d.legends},rt=d.layer.getMaxResolution();rt===1/0?nt._maxScaleDenominator=56e7:nt._maxScaleDenominator=Math.round(rt/28e-5);var ct=this._createContainerLayerInfoElement(nt);b.firstChild.appendChild(ct)}_onDropLayerClick(e){var s=e.target.id,a=SelectorID.index(s),d=this._layers[a].layer;this.getMap().getLayers().remove(d)}_onEndDragAndDropLayerClick(e){logger$4.trace(e);var s=this.getMap(),a=document.querySelectorAll("div.GPlayerSwitcher_layer"),d=a.length;this._layersOrder=[];for(var b=0;b<a.length;b++){var _=a[b].id,_e=SelectorID.index(_),nt=this._layers[_e].layer;unByKey(this._layers[_e].onZIndexChangeEvent),this._layers[_e].onZIndexChangeEvent=null,nt.setZIndex&&(nt.setZIndex(d),this._layersOrder.push(this._layers[_e]),d--),this._layers[_e].onZIndexChangeEvent==null&&(this._layers[_e].onZIndexChangeEvent=nt.on("change:zIndex",()=>this._updateLayersOrder()))}s.updateSize(),this.dispatchEvent({type:"layerswitcher:change:position",position:e.newIndex,layer:this._layersOrder[e.newIndex],layers:this._layersOrder})}_onStartDragAndDropLayerClick(e){logger$4.debug(e)}_onZoomToExtentClick(e){logger$4.debug(e);var s=e.target.id,a=SelectorID.index(s),d=this._layers[a],b=null,_=null,_e=this.getMap();if(d.layer.hasOwnProperty("gpResultLayerId")&&d.layer.gpResultLayerId.split(":")[0]==="layerimport"){if(_e.getView()&&_e.getSize()){var nt=d.layer.getExtent()||d.layer.getSource().getExtent();nt&&nt[0]!==1/0&&_e.getView().fit(nt,_e.getSize())}}else try{if(!Config$1.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var rt=d.layer.name||d.layer.getSource().name,ct=d.layer.service||d.layer.getSource().service,dt=Config$1.configuration.getLayerId(rt,ct);if(!dt)throw"ERROR : Layer ID not found into the catalogue !?";var pt=Config$1.configuration.getGlobalConstraints(dt);if(pt){if(!_e||!_e.getView())return;var bt=_e.getView(),xt=bt.getProjection(),wt=[pt.extent.left,pt.extent.bottom,pt.extent.right,pt.extent.top],Tt=pt.crs;Tt||(Tt="EPSG:4326"),b=transformExtent(wt,Tt,xt),b&&bt.fit(b)}}catch(Rt){_=Rt}this.dispatchEvent({type:"layerswitcher:extent",extent:b,layer:d,error:_})}_onMapMoveEnd(e){e.getLayers().forEach(s=>{var a=s.gpLayerId;if(this._layers[a]){var d=this._layers[a],b;this.isInRange(s,e)&&!d.inRange?(d.inRange=!0,b=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+a)),b.classList.remove("outOfRange")):!this.isInRange(s,e)&&d.inRange&&(d.inRange=!1,b=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+a)),b.classList.add("outOfRange"))}})}getLayerDOMId(e){var s=null;return this.getMap().getLayers().forEach(a=>{a===e&&(s=a.hasOwnProperty("gpLayerId")?a.gpLayerId:null)}),s!==null?this._addUID("GPlayerSwitcher_ID_"+s):null}isInRange(e,s){if(s){var a=s.getView().getResolution();if(a>e.getMaxResolution()||a<e.getMinResolution())return!1;var d=s.getView().calculateExtent(s.getSize()),b=e.getExtent();return!(b&&!intersects$1(d,b))}}getLayerInfo(e){var s={};if(e.getProperties!==void 0&&e.getSource!==void 0){var a=e.getProperties(),d=a.source;d&&(s._title=d._title||a.id||"",s._description=d._description||"",s._quicklookUrl=d._quicklookUrl||"",s._metadata=d._metadata||[],s._legends=d._legends||[])}return s}};Object.assign(LayerSwitcher.prototype,LayerSwitcherDOM);Object.assign(LayerSwitcher.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=LayerSwitcher);var Marker={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAASf3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpptuO4DYX/cxVZAsEBIJfD8ZzsIMvPB8mvpq5OupN6Xc8uW5Yo4OIOdIfzr3/e8A/+lNo1lGpNu2rkT+mlp8GTFt8/4/ktsTy/nz85f96Tn18P6fN6TLzkB30ObPo5/ut1+XaC92HwrP5worY+b8yf3+jlc/72y4k+F8q+Il/F/pyof06U0/uGfE4w3tuK2pv9eAvzvI/7607a+zf4r/tVE3sffv13Maq3K9fJKZ0sOfL7U6ycsv/NIQ+eVH6nXDhQsj3P31fssxIK8rs6ffvTWdH1pZbfHvRTV749+6Vbnwpwa790q6TPIfmXIuu3x9++HqT+vitP6X+4cmmfZ+nn10eVz4p+qf5T/Lvbfe6ZuxhFKbV+burrFp9nHDe5hF+6BZamdEfBUOPRfzo/jZtfQGHHFSc/S7ok2nWlyJYhV87zuGSxxJJOSMaTlFbKz4stW+ppZe9f8R+5yXLPOze6uJ62l5y+rUWey/a4wnO1xpW3cGgSTiZ85G//hL/7gXt9FES8luOtFetKyYvNMrxz/pvD6IjcT1HrU+Cvn1//eF8zHaxeZR+Rzqnne4r5NvPFVn4anTmw8vjOoNj+nIAScenKYiTTAbomuYpKtJRMhEI2GjRYus/MpANSa9osMpWcld605JfmIybPoakmXg68DpnRiZqVOWt0aNCsUir4sdLA0Ki5llqrVqut9jo0a9GqqqZOisOylWDV1MyadRstt9Jq02attd5GTz1DmhBpt95672NwzcGZB58eHDDGTDPPMmuYOm222edYwGeVVZcuW231NXbaecMfW7fttvseRw5QOuXUo8dOO/2MC9RuDrfcevXabbff8a1rn7b+4edvdE0+XUtPp/xA+9Y1XjX7OoU4nVTvGQ1LoQgdN28BgE7es9iklOSd857FDv3lmlhk9Z5t8Y7RwXIk1StfvQvp7ah37v/qW7DyU9/S/9q54K37m537Y99+17XtJLyejr1T6EWNmenjmJEa/zGtf3wMnycdEnrmgScKh+W2rFIB58FVtiU7CVaLdS1hHXPoPkvVW5b2oXDBZM5kyN7VVS1pzsLdAoljo1+6tE5b+ciweuqaTNwEgrpb3atwvSOzw3Aa7Git98o4VD3nq3Nz/50yiEw9MXMCh+hOfU+a3euZl0IjZX1tW/VQIF0lHO5kjFqF2hvlvCOvrEi+yhlzzHKu6fCXapZzFpUqw+TMUoU1TrM8K8eEt2CcvwpvlcXjErqqEPqJVIoz1cQ7CdQOB0qqW1QrkrCsK6Afva0R7pobdpd7pG47/Z7UpwDkCm4ql9Y8G2Oi4+S0rJ3LiVdtruM9Jb1Ja6ESIbdenfb7pXSsmRIcyTStcG9xoGh7gbLD1W/ra462dTTubFKUsWyMLTThhmZUszvGdgZEZizn7D1Pvb3VmlkuoOsHSOIrxmpt0EbpgB81ynTMBlDt4TB1Vq5U0EsVt3mfgfWpNiTznwumVxaPWHprbym/Svr9MfzZG/QkgrS9IGdlYQ6i4zdpbQ/m9sbCKqv0ZKwrI5D8c+V9b9uzAIzM/Z4lm07xdl/X4aOlTekLNI+orHQcAKRJpdnQM8CoBLRYV9plleJl8yJpa3OPe+a+2ljD2pnF7GnxzrzWZijn2Ke3SytrYTJHl3CK9lQgFlNNC3tc+vJx88VLOxAB9avWjwIU0L+9m61oK7lrkrd4DEFof16knx/5sM6pOzqQ89r9dFase7a2kvXApdQOnAIH5T1mG+BM+ikt1QrNMltZKx0fC2XliVbK2enAuDk5P93TQXSY4nS4IchETYYPGGuNXfPJe8dboIixZ13bJ3mSES4KnZel1RgaaOZA8OcESKbuDaQOmjUXww93t1szsyHSFGynylw7HKfe096ywI75p6qE/1AWLgx4tMx14z2j6kyisec64EDuBCwwy/Hkm8cNzHK6iw7YiNbnVQpjdjOH0neUT9rCo7fozG2DjiOBKQKQC/0ivclYZtIwF7fDPLR2xsKkM0cZc3h3ubjIPgBmOYr3S+fTa5Zz1mfVLToJjbVH2GgN1DhKaQuluyAVe7PRRMRsWBqIgqYBoNC+NuDliY1RKG/iF5V5dztbGlQLAybsk82qaE3fzPS1zo1n5ygmKC4wsUvbiNBGerilBnJoSE4DG6x13BXWzXBv4vYFstG1VoOoC6oGPXX/UIRoN9Ib52D6Juin06jZss0ksVys5ZihjGxtMgDdLmq0EzXjzAC3GYCBXfJmwiQVEFzdurMKcZKkpyctqt0wSD0I04f4UnjXutEEdDzPuPOKKFPiKejaATr81NlRGzDe3HRwNPkVbr8UG4ZhJjM8BolsXMthNArGnMEfadoZhuRvosTdXPLOb6A0JOrIp3/hv06r4ESq1wpWZVzvZn6y/7vgYoE/RL0HgLxUNSFWB62gtiN2hhEcIbWpICkUOvvAoA/4gwScv+C0v8MJXQ+Nhqg1bgvZyqdP8vWsKBV8RUCGpsq1Orzz87Z547iFBkQcRUQrWKA86w2AavJxAguRhd6xoAOTYog6816YrroLXcGYxwUwoyFHxbtxwRY8c6zO2TQAYZkL53DIRQdBfHU1oxhJNzYpyVhcSYrFDSNPjwSTWZx0C7pf0DkOS8j9rA2q42RUpIpREda6Y4OVDMScySKSXydzjIPsENagrkkhcCt4BqZhB/N2onoPdi7ctdN3/3Qrd4qgPo8DCaYdnU9QE0W7h/vF5XGz3/AdFCBL/iqDfzDxQUSMGzfioPgJEvYDInjPyQaugchuEgbt4iCQY5ZDnwpnKTiqgj3mLhg1NCq+QwLyYPY43chRPVrq0WriYlciCNXr9VZ3eICCMIBS4nhvGEAIw0qEhaAkDex6p7qYKmQHB1AbnfAkxigx1QyOzGYXWYL/CubfGEbWGIDhxA3eiL9PpQDHRUgAbReX0ZAINyI0tQyUgcVzKFiDBOCFjXMlQ6QIYkMb7saZZliZxQwEHn7o2G6Dw8gKBXCjW9HZ5/SKXUR+OGGzMloZaAvkmmvAMyBcC4kU4YA7WToAmhlidyGKa0VSxUljYxnPcmeRgXsRbqRzbRBckHloBPPrw4Zr9/nkeMzb5VrMpFf9AdVcbrK+uoGUwtqrX/d3dJMJxvohLt7qvV04IsR7p1zM26eJ1/k1x//g+d/H8D4BAfSL+aSxxKRFa8VwUdeY6QURKy/NDAFrToKxoZTYfM331eZeAgxflY4XBZ69YaDqBP0056yGHyqnI9Rm+K1p4rSSFV9wIQGusB4PwEsdXUP9DnZtZ94jN0xuBSPBvXtoV2+0IasUFkXDKp3lXoDfe5DX9kLTOsqO9cOHgM9dqcdiEIusVMgFQy508wSbpxADbn2mkuCEx6EsXBGIAZaI1QujONgyMWaU1cti1qaQEDl1Vj7vsZFkI2m+A1t7/N49QJhK5OIUe/mWkE5sXwYa+J+lLKYCuDVajRjq3pAsYg3SQnkfQcb5LTz7xuPjv3k+dmCWUDi39Gl2ps4dXcYVJ+59d99wRJHQ9LtAD2XCRjYYkN8YUkIsrfFM5Bua5BDFyIKdxluACNO7zFkGegGi99np8n9j/ehWp2oYY4SOQWj9XHz1WcHWQL0BTYasCIpgkjyEg2C5TjD10bCGFz/PM8b5+O4Qk/m+Q5382uG5+CN3633jvfzjO4W5+TohQ8+pxIiNEfMI6VGFDe3Vd7VByDt4j0ebGrIEM2FxoZRLB0ld8XEkKBgMwyDC7QsJysobUBnjBgjRwxnsynv/tfjqx2VNJC2GPT4rjSDBV4jDl/3nVG6B+hHJ/bY9TyerWAXsIZHtzugCQWRAOXCVZl5Xxtv3fWErmHaDtJp8l2EikIXuKSylj/uCveU2fazmTH53yCEnm+KTd2E8hu4qTrIvHDJGlUkZS4IXFcPl7A8fAbrNqGf3Qh0xQTZ0SOsbIwDBLK/x9DWhsopPIiRsgHCMYjfP9wzMjbM37G0lr8B9aaI3NOogBL6Xs2HMOSH289KUQKo/Buvw+9qVTK6UUwqBuBPJFVPro5AfXk+Hn4zJjMj3RBR5J8BC2PqEG63CIG16OTfx+pr5fu30UWcS0DFuDuKHtdFjnLuM6psYkD2+oF5CjVvhS0CnoHwa/WNusfqXim5qQpjM1ZuFIjyYKi4vxKw4DZoiVeu6o4ZKaXzoURuq4nOHt6Fa9ATnU7ncxo7g6UE+0kYg8fExDzwLcq3ErIGXRo5wH+cRiu336mjg3/3hG2IT6ohLvVXuTCXB0dhTZ+++gRgyV/xAITch2WCqEVVrzPAxLgXRI1voOfSbmnM3/CXgYh8rPhxfDFL225b2jePCd7J7H2GzAwgjZgFyJj8SfsUItFBpFvCwUUQDA4ArY0Ch61SNvFZ8rw4vVhHyw5p9f3bEFDt1PjrID05RjBzVgqbJUJXSLARoRkQCNSZf5olAkobc12LqI73yrQJsCI4mLYS/rubukwKjPDlOFkPFgSrnRyNwuAcbiRm94aPI9zdmLUkujYQqcYLjaGRIFnZ9jYRcLJlv/hX30BiQgE6j5A+dU2RwwDKwGdzTAYnH2f2ctN0O7I1HTtBURMBcroAlYgjM8GYBFvPdA+imolWmjWHi4gzYfRqHKRuMrUQIsUDygBhBxs1jo+CJ/IRoNDEAuvemMJCC/Xg00L/U+v7I1Ly3qnhB/Jnv36SmOB4fM0A35hihOAcqHpM4x/zAdUx8e02G/BVzGxEpEBsqKathzVgltlb3EfNtLcNVGPPt0TpvbA+eMs3SfMcK04ln8fXDhgIiSOwUm4lj8jugXZhmRg6AHMb9gijciwnTDnNhKBXDI9m3iD38ciZ0YLpbxWho2ISpAY66Q2ZZgwv9YyzHM2QkASaOBrCM9OP4q+8xXnvSaycEuDbB4cHeJeEM08EstvvA765nu7r4RjF5YxNiO742DawE9XUMghITWK87c1sOWHBLFCdbxFqYR1wcoI8cBOX6jFuFBLCGvrO4QGX1bQxLMyX1IOX6X7bSfq7geCNzFbDeFfsL4sAm9acvxwtCFjQCGbaQ5SXYzrfVaxzOdTr6hCG35oVdOc2NjGrlX48wehxksic+UH1zZFGbgTZ0K7g4w03xafwEKo3qmAT1ovmmWMLjkxQfaNJsfbCSfP/Bjam3D72Oor77aumCQix5g05JlNJPOM40mKCcXes2BgAqwbwjX9C6YD5GLvF1Btsafh9ONbfSezJDaSKHSLBCtccxqI9oQpBKdPOW8ElM6cLAUEp480Jj9F8ZWZlutjwrw34IF3Ru/nXGEPVdmdKGfy3h2xPSckwZ++JVZyTNxYgPu4Xr7t9dEwC884PvdGPaUoDyS8JT24R1WOfECBGsahPUmDtm+cTW6WDpaAjUzlyS1kncYJEIDAiZyxN0E5/siGdvg+9mUv9KxWpkpJZHQvPvaxZnxBcgaAiXh+X94PwInyIy3xvwy/LG3eRYB/K+3Rv/0tbkr5t1/t2Cf/2ywR63xthCV3sBUwghIvm+R2nAiiQx9m1ALsHxHN59A48pBKgBad+otn9vQ+k4H3eDprO46VGMaI8i2WtEMWRIDaGfMTZn+VEuSgW8+gwAObmZIcwd38EfjH/1vT7fEMfSUMtuvYNP3y02Lp8384OnnB5SE3yl2JVLXkupN8SeLMR0edpWPOdiYAzEoLsnU06ADN0M4jS0g3qw/pl6ie/3qbB8IAwhZKSSWdYi2UeyRcdX7oYRIJHqRg3ohnS35cvNC0hB48rizpKbfgIpJ4K8UTXsMyPJS8f3molSYALLgj3yJXXfIQUczfMrnTGm9vXmbqT9Cxm1gL0Av0xdB/GsoGePVRtqwDiU7NkOC5OoSHUj2313k5QM26h2luk7Bj3ZCNe/pU0Qy4KK4CUIssMEE7uGyWV2uHjb+uw+wh8kX2daUJevGzUyICdt1kJizKnhNN9fJdvgDiNkP/wLw3jTrngRHBUjR54lJbBuOeAjo47O6yybKKQ1+BYN9E7SdXSh7kg7fhkCp+XcFTAgpvpIdDeDnincsPl3LFAaQHpywRwhptNoKXGKHlun1+/eKorKDU6M+vPdy4TRM3hBqOByFyqMtsOze740DPsC8pAEAoG/Lv5/CMA8eARSjpFJ/D3fpm7bv13y/1/gYgKdVn1LkvDNrMDBe5OOZLrnE6TOLjSDqjEAmIBNMzyKH+RuFd8whbrQq0Eg9sSGkBz/Ho6Yxe0G6mANNHo8de/ikteZX99WyNEZrVJf5T6opO+8RJLMjhgqGLMdsOXbSlqCutkhdPhvUMPc/H7Tgqm9nnHDvwF6YngoNZcUVAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh3sUMUhQ3WyICriqFUoQoVSK7TqYHLpFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNXFSdFFSvxfUmgR48FxP97de9y9A4RmlalmzzigapaRSSbEXH5VDL4igCjCGERIYqY+l06n4Dm+7uHj612cZ3mf+3P0KwWTAT6ReJbphkW8QTy9aemc94kjrCwpxOfEYwZdkPiR67LLb5xLDgs8M2JkM/PEEWKx1MVyF7OyoRJPEccUVaN8IeeywnmLs1qts/Y9+QtDBW1lmes0h5HEIpaQhggZdVRQhYU4rRopJjK0n/DwDzn+NLlkclXAyLGAGlRIjh/8D353axYnJ9ykUAIIvNj2xwgQ3AVaDdv+Prbt1gngfwautI6/1gRmPklvdLTYERDeBi6uO5q8B1zuANEnXTIkR/LTFIpF4P2MvikPDNwCfWtub+19nD4AWeoqdQMcHAKjJcpe93h3b3dv/55p9/cDPGdykYtTXU4AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAStXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpplmO5boT/cxVeAkeQWA4H8BzvwMv3B0pV7qou26/tyk5JeXXFAQgEIqgO9h//fsO/8a/2KKG2PkRFIv+qVs2TFyN+/s33mGJ9j+9fKd/30q/XQ/5ej5lLftP3xiHf+39cTz8H+DxNXrW/DDT294316xtav+OP3wb6TlR8Rb6K8x1IvwOV/HkjfQeYn21F0dH/uoVln+fzYyfj8xv84f6ISf88/f537UTvNOYpOVtJJfL4DVbJxX9LKJMXjcdcKjem0t/r9q7/2BIB+VOcfv5TVnR9qfWPN/2SlZ+vfsvWNwJs7bds1fy9pfwWZPn5/MfrIbU/Z+WF/i8z1/F9lX+9nkpKnxX9Fv0X/HvGfXtmF7MKoZbvpn5s8b3ivsUUPvUILE3IjoChwbP/KD+DzW+gcOKOi5+dNGXSdVNNJ810k73nnTZLrNlC7rzIeefyLo7Ss+ZdPH/Vf9LNvWg5ZZDL/dJeS/65lvSm1bjDm20w80ncmhODJT7yj3/CP/3AvV4KBHi81KdPfnP2YLMMz5w/chsZSfcb1PYC/OPn93+e10IGm0fZS0QZen2GWC39FxOUl+jCjY3nTw2mfr4DECKmbiwGBNRE1lJpSVLsOfeUCOQgQZOle80sMpBay4dF5lqKkJuRfWo+0tO7NbfM5cB1yIxMtCLU2SBDk2TV2sBPrwMMzVZaba1J6200bVOKVGki0sVJcfbSa+itS+99dO1zlFFHGzL6GEPH1KwF0mwq2nWo6pzMORl58unJDXOuvMqqq4Ulq6+xdM0NfHbdbcvue2zd8+RTDvxx5PQzjp5pyYCSVWsm1m2Y2rxA7ZZw621Xbr/j6p0/s/ZN699+/kHW0jdr+WXKb+w/s8bV3n8MkZxOmueMhOVQExnvngIAnT1ncaRas2fOcxYV+ists8jmOTvJM0YGq6XcbvqRu5A/GfXM/b/yFnr9JW/5/5q54Kn7h5n7e97+lLXjJLxfxj5V+BiwUH3cM/PgP6r178/h+2IWNXr3IZDKnG1YHtrtFtaVWu1ilevx7tYtr7VXOy3nSum0NHSeHSC4lcbIFUozk32J9iFdrXthMcaFq0z0Wlp6+qg7HfZer+Z0+zpjlQ5fRmKkS8fOua1j1CP7llovW7E816hHdHtUrZ5+oz0IDLDFuIMOT2Rma2CHreke6c5TYFqCY9puXmPuPRcL6KvoarLOvlBpNrRL37lJbySs733aav2UesPNIHA2O7WlZr3tW+ML4QSvXKsuLPpsgL0u/mbyXnZpdPGZjOttnz2khypsW2Jt5Fozqdl8qnedcofdunR20BHbANt15T1WAltjrZ53p6nfQqC6rqBWe6l0nMIi9+69RD0LYHu7WZT7SBuQzttKZNQmaIJGvHZZtrsC2T07siMATFvb7ja2C4/eLpMY6Y3jssO25l3SrxyZyBE7R4kTA+Zia60CIJVPnhkqFFtZ7lbmX7OMuH2OHEEBv42VEN66HZf+st21L32sSZIpaVIuvZie0Ge0B9BFHxzfMMd/8DzkZjNwFFdW4zWFApTWlpP3vCOzxUm1FWKkBtHMW+zI2iReZFFt7DcKsCld21qB8OQjdRDXQhXmKB1CEcC+q2c0bT7SjLbfG228GPk7hRnhmQNmEQOdQj6htHgI3AZ5KV/KSy5Qvz4ukCY1hWWM0YhnSa3Uk9dmzdAdoeYHkiPXuQbNHUoZk0+U1KEXyZnw7UUCFyAmnmlQI1tjE1u3fEp+abX5p+r/Iz2QS1Kc9umzQg1lt3Lhw1NuHXclsLDiGHcfUBnKZe/sIx0kz6JICFA+2cTpDpqVDFCytG0wMyxRxibwdjZ7Il4ytbdVoBED6TSBNCbLX7lBnKTOUXZxF2o2nAngN2KboX6uU13NKlAVjWsOwqVSAwGjKo22ARgudUtcr3jbr7JqqgS73qGbknEAGrMVbrKz7oxe06mx+Z3Ct8DT//JMvxjD+NC4EX461F1OUiEZ9Fo6PQak4+Q9cFXp/RXYwfqdetl701wUChFKMN42b+9HHuVV8vC2TBo2vXVGDSCqz6sQl2sSK9HIcSu0Boa7ZhMwb2bxhfVtCl19V/kBwlpSpmxq7XRkqEtPSbqTM/gr6VupkEZLO4fWYHXTxiKN58CCXNsCME6+O0Pc7LgEgroA87HqGzRqHg7g1iwoZdilXwZ1KQgjzcFdjZZAWs+iOv16vVkgmkBYdJF2PuA6s/DJnibdlxZzJwDhCu6LAGRQmeH6TpWowl4bxmBRWhagC2iAc05T0HOmEgY2Au9Qj3bpoMwJCCe7bsTXYPTvhMNbNy35wNACBQfebVUHW6cb07j9jtu4NhM6gGYFw2/BSEz7shWMncc+X1RAvc6jEiaCB4r2pC2MMTlBMZVELQMZ8sm87CGvc2yZLlbHzL5AGkM370hIm3UtpL4vKf2U9EEeSP1X6XGmaf1u5kU+BYRD0+6xqOhky2zr/PWGv79/S1EEBfVpo592XV3EGVjeB2AddoXuX/mwwVzp5WiI5K2oRm6nfGNeDSKS00DeGClvsFMQXpYCssEzwwNTL5wNayGwm/Z/EJA80jz7ukpsB3THWulMHV13IAfym+m+VAleRFOX4kRD6SEbCCQl4mKfAWCOJhC9AtoeUZMtbl7SD8aBayBoffyKhlwj0/zovihoCM2J6cwrkAYIoUEAvaO8n82lBUATNBjkBuFAz2jX69Gii1xgw/YFTl9mr6KFjXbxEih0lDTYKeQDaGlYWEA21FAdcME9yQnMc3hDivcvCX9w+QmbsVAVDI0MBeQQnLNu/lxhFsL3+SBgK+Gf4ebcDyzS32AR/jFu+gc3v8IG6fcDNwhHF3qHHr2JKxWOxa4GvSBc5MDZFQxAfgK1S3NJHLvz9aTBQRjBdTjkIZooUtwD+YcX9bWmaXD04mOOlQcfkghzo2hSvcz6GCkT/9bCKBEhhWrfyE6KFNm7EVoFtQCBILKAYro1Ge9EBFtVWGDZhCwaHNAQyAnJH8MtiKZVBxYBAYpEVEJZkQkoCMNQb2xFRX4AJ8iqpu7AqLZ9YXR/yB6mA/BBYR6iTfPcvZZ4yvTwcA3VjiY/9MkL6fVUNBu690BZQJXyQOShufFPKAW2dg6qJaPqaRfwIi2p+/pxEpdcokQK3RHJqILUAfKsNV1uRStfGq4e8Or4COhH4vE/IvJ3PCqY/hWNgDH8y2hcU3c+NAb0VY2If0FNd5zlrVtbph0h75BRgNL7LH/ePtT7LAouIZ6E5v/6rFs9Yo8NQaluBzGOrKGMHVkrFJe+bVOGy7B/GAhBBjJg75Wx8G/e6RgXkjmsCy14jXxw+63UNLEr04kNyoc4BNw3rJ0r0a7S3L/ebkgoIU3XOR/oYyHZFn+IkR8FYWQQfYgUa8hjrIJMUtkPsgHxr191N/JPtdzzIlqomkJs0dZIJ0rB1wCVQlNSLeBzyAw6N4vEM1B34oIfH5zBSOXNT4Mp+a8iHItfoMZdELWsAuILvO7QH/VNQo6rWzx9o4niuNx/Alw25XGqqBW8GS0x0TSN1TcuirqCbick1OFedZ+IZm00BUGeI6Iw5+7wwDNekAElOjrPoEAQ7vlaLndsJwZlnb25zTqYKdmUHgoVoW/TbQoQRyzdJ6egYhzH0x7R4sddUrh0GdT7wJTo0UAhkp5zgScViyGnkayJFFkIPW9+h05xySh/5Sdw8JFU/JvgRGjuWkxoyPeWx5SFsobrf+Nz3o0uOrgyBhFBfZHXtly3UTF9g4+Bw4iobQRTCahTcObjlt7co60nhwsZBdPNRKhMbYcFF39nVRsJk77A2qiMd8yPxDQUc8qtLjMhaH6n4s/cxkTEKvwwky/eF/Bx3lD7/INVCN8X0LRRg/vNekelk+FYGNfdY8IvYHUQXnZN7B5cyj2zAWqmX/idg86erDH7wYsiP5GtFcqPFEfCn70MQZ7AFbbod2La6ap4VgiTKoVgGoaku4ZMKOzW+TVv1V7KG4HMipBvtHCASd/Jxc+astMWOkDIOk0ZW1vOVZT5PrWESpfBRY423JcjvphjR0FHIPgorIt1VCrZGzjsbhQQ5EDFYudxaui3LJk1YPxw5fQVGo1+Gp47uF9F+R+dGKUKbcEHMIR1Cdk7Iu02D0X1WK4R4+7apqMdkDdMookuMgfea/phsvh3H8go/AOWFZZiQWWFjHhGiqSCUySO9FC6wXN41dWxHwSYPTG2l6cpDTYLzeNgMRqHoqKfdoJN53Syk04No6vmpGJKrscZchpwv8fe+U9EdomvwN1Pxh3Mi6LVtAFtaQitxVbBbSWOWKFnwA4suZPO5n+75os4exayDhZ83KN+ZnjdpGdaHAvut4Y5n/LGW7RKye3E/CiA5Qt87ANeWC14hAhGfLUIVEg+1oduAjaf1Apo9P/W9KFvcN2jEGpgDBoLPJz/puvRFGyNlWOhEhtxu9DRKNV0ozFB9xP1Y3WUTfFGRM+1om4xKgHeKeGMB2oEFje6CDRa0cBIJz/FchGAmHATTihQBojPgf5160WbqQpsN1IgDWFfup1Yd4KzMXjXpZQlbpWOIE+U1UkKqT+bTyXjre0dZ1U/Tft64hr/65nghzq2nw+q0zs0kw+2aMCBLR3UZZ2IMJQz0sUD0Zz9E5YS4vfmQTy2lwziI7RSITFofBE5qbGwBD/NOE8rUi/gqnk3AjzIJef0w/4+X58ISyh8hDQEQu1npzAGoCHoSE8IzskbcY76Wl9z/8HWH/JLInx7oUFd7APzRdOjJQgM7vYYyUTSucMPiunOIMij04t9FLqfV/81VuGXoH0VLjIL+d/84G/gxPMp3vAuQo6OFxH+Ha5Cd7k5Ue8bNUtwn1txU2cWDOIUJOeC7JSST8MPjXZVVAP9TEmddbQdoQX64PA08TZsxi82SzY2G95A/0CUbjSKwxIiq610mIy9IJmmH7AOQFE9KJQe8pgxyi4EAM6mC1HLSsshbMJO1Pzgjj6DWb906nvgnn7xBgoPQENyHul725zomKKEDXMMs0A/AitvQzdvNDVvmDMo5BCJd6e14c2Vhr4GmYGAzVHUq3+TMEv207ca/HAPoda7Vcyklg77X+9nFfXgehp7dyraEC1HyG8FTlOyOsSRlbGgWSjAFHCnAnfDZ2jq/NqAkGzsQETfUyaHlZXL6ogHrTopSECq09eoP4llyTvWC24H4NTNJhpcpAhXq09Wt+GYbnul7vb+nbF/TL0r9NcFqh8PrYoK2OHRb3QHiysgU2DERaHhACp967hQTKgmcN2JWUreSXNZHUshBZOCLnI7GlCFKArV+U7Vp94l5xB9MgRbH2gYGQOZOj46DQeF3tG9hrDU9mQOThdP8mTNfCrnwJwISKQPnT0uR7VNigXpWiEFP0Lxr98KaVRvvbFK9W99yFLG00LSEBRM6N9hdpSdn1v1xajAaNI5aoM1RvOvbtFmReiHev0we/lXd/QOdgDhk35za4XWdq2Kq0CLNKSaZSMmiFa3b52utEkcBgkaBtPuvCgUnUfhvWgjBioKqFKmzXuYpxTl/eQshPPO2ShJRza2dD8dmfb8nMrEf/mI9cczhuFgqAQhsyhVlS50UbeZhXJw12E90H4zEaXeyEpzm1hL9S8p8IDmB3Uoe0SMkyiamhaFiUZRkxc/jhjIoYNyQNaQfNBIVzUIyF2vZUKndnGxeMRUKB8atHpXwjJENI834Aua3xE9HrDApxJwLZAABnp544Cu6gTzDanTXSRBCgWnZa1TIFQX/aCR3IJnEahlwKxX5PoZ2xzJv1FDSTHR2I/yJ5bIE+PfISQqkGpHdqMYFqq1uu8F/1n8izQPIr5lhztexUKSUDfKYvHn8KA6E7wzR1wtru04SeGJVKUgRZzL9yofVU7H6QEpk7p/0zasYFQpSSG90K2fcl64K5m79bFoTBb91AYHjv+/uSLhYRe6bvajej/vvKkVHJ0TPF4buZAoev8WpEDemJctMADcTzd4GkafL0juiyEKwG0XETEBfR4bioCLBmZlDprvZuGtR/zHJPHinE9Ok5/YQ3yYCfrV8iOC1oAVOgDBDksbjH9wOmwIuBPo5icdgiwS1wbND9YU/UHbRZBMgo0IV1jpSUKhQlaYrnkehdAkrI/jgs7JwVWXutTfHbKGdLO6gSFyCyp2j738tB41BgTSDRFYZZQCTKx0bOZkVEiuHFbhtecqYjkv107p0VeeJ6GFqZ+UMrS5tr5BQKz3toOfxbe3a1dtvW+oRnvdOiOWQK+fRFWJgk9hWwgNBvX6peddODKw713i8VM+1Bw+zzXE80FMMd0LY9XoxN0P/Nty75bP4xRkTPHvFMwzuwKeBW3l38aB4uaPlBEG8s8HGwhv/x9y/hPOIdIfHx3GqQAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPU0tFKh3sUMQhQ3WyIFrEUatQhAqhVmjVweSlf9CkJUlxcRRcCw7+LFYdXJx1dXAVBMEfEFcXJ0UXKfG+pNAixgeX93HeO4f77gOEVpVpZt8EoOmWkUklxVx+VQy+IoAowlQJmZn1OUlKw3N93cPH97s4z/K+9+caVAsmA3wi8SyrGxbxBvH0plXnvE8cYWVZJT4nHjeoQeJHrisuv3EuOSzwzIiRzcwTR4jFUg8rPczKhkacII6pmk75Qs5llfMWZ63aYJ0++QtDBX1lmetUI0hhEUuQIEJBAxVUYSFOu06KiQydJz38w45fIpdCrgoYORZQgwbZ8YP/we/ZmsWpSTcplAQCL7b9MQoEd4F207a/j227fQL4n4ErveuvtYCZT9KbXS12BIS3gYvrrqbsAZc7QPSpLhuyI/mphGIReD+jb8oDQ7fAwJo7t845Th+ALM0qfQMcHAJjJcpe93h3f+/c/r3Tmd8PnXByuOaabnkAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAATbHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZppchuxEUb/4xQ5AvYGjgOgG1W5QY6f10NKtmW5EieiTVLDIQbo5VswCvavf97wD37qyD3UJqPP3iM/ddaZF29GfP2s5znF+jw/P6W8P0u/Hg/5fTxmDvlJ7xNHf5//cTx9DvB6WbxrPw00zvuD/esHs77HH18Gel+o+Ix8FvoeaL4HKvn1QXoPsF7Lin0O+XkJ216v+rGS8fof/Ol+xEReL19/r0L0tHGdkrOVVCLP72CVXPx/CWXxpvGcS+XEVOR5H3mu5SMmBOS7OH3+TGZ0far125N+ycrnuy/ZekeApX3JVs3vU8qXIPfP12+Ph9S+z8oT+p+uXMf7Xf71+NgpvWb0JfpP8K+O+6yZVazaCXV/L+ozak9Srm4u4Zcegal1stOpocGrPyaPweIPpaDxxM3jpJky6bqpJk0r3WTP60mHKdZsIQtvcj65PAdHkTzzKZ6/6o90s5RZtAxyeZ6015I/55Key854wnO1wZU1cWpODJb4yl8/wt9+4V5vBQI8ntSnV35z9mAzDc+cP3MaGUn3HdT2BPjj8fXH81rIYPMoe4tMht6vIXZLP5CgPIkunNh4ffVgEn0PQIi4dGMyqZABspZKSz1FyVlSIpCDBC2m7j2zyUBqLSuTzLWUTm5G9kvzFUnPqbllDgeOA2ZkopVOnw0ytEhWrY36kTqoodVKq6213qSNNtvqpdfeeu/SHRSXFKlBmnQRGTJljTLqaKMPGWPMsWaeBdBss0+ZY865FtdcjLz49uKEtXbeZdfdwu5b9thzr0P5nHra6UfOOPMszVoU/NCuokOnLktGKVm1Zt3Ehk1bl1K7Jdx62+1X7rjzrs+svdP62+MvspbeWctPpvxE+cwaR0U+hkgOJ81zRsJyqImMi6eAgs6eszhSrdkz5zmLE/grLTPJ5jnT5Bkjg9VSbjd95C7kV0Y9c/9X3oLUX/KW/9fMBU/dX2bu97x9lzV1ED5Pxl5d6EGNhe7jnJUH/+jW31/D+83KPiEmlrd0ZremEblUT7eZm0BzexaimmXYgubnuEPvkbQGa9wthiOWrraVZNfSbR0D3dM5e18pXeZJJmnLWKdvldHSuKUOsxOt3bbTboUw2gyslJWdOaVdy9qByFHOHqbkHGo8yhf7pMzaZaS57phW01Jel0mrG5SmjUNddDez7oydWuXyM2lNdiFWXboPJVg7FGLzCt/lNwpH8zahiOZobe1kVcJOl4zlA+HOkZfx6ZCqda7d110dOqk5j555J51FiWZST5Qtdd1klCVRBYFSJPLQBhVUm0uIVsH9rLkAPGR3mNdLnms6F9jxCstcglo/til6U1v7hJm27l3rQ7HE7SzZVqiFqgKlzQ0BSa17KIOX6mWnnHzLOfToTkNLH9lgkXjuufNIsdmoM5nGyaSbACl51ihnS4t7TBrI9uikqdFIpLPGdaGkO4e2QBHMZEe8Ls6U6DWk+dBZ9VLGu98lM11aIjXjakwmrUP6KF24IvLlTbBSMKXAz7ibZFg6JtIZFqmoicKJlpnItETwSSfBphrjGTYkkzzqgArxS9wA7/o/amHMG4VpUQ4naZO6llRb63b19J1i3g9Lqy/ptx4Jf2yej95JmyqnPp40nD1FZ6eEE5GkmCLLXyizGgweEiqMDJ59WrKiWnajjLNcFMFdh/WCApcKnDU3Ymiqex46z4jy0O5rCny1U8sU44naDrlFlpBoiqK2FSlQEkHj0YlVtbmq2OSJIt9n3XKPnkuWEFrHx1cmu67wCdWWb26RPgIq6cbWQSCh7ae1mavXCLiYj//UCeia5L5SWHfOUy1nmsah0qgDFAnlMSvhAGM7iEUB9aZX4xO7Zb2Agc/b+D4UPt78/jq64wBC6Jaup8vuDiT7JCo/slSKKILbA1xMusPOqh2o3McIKmivFJLa3bxx2ChgFek5k49tFcrJazxJPZAlqmxVaMSQfstACssdyhDQIDJr+rfDSzfXCzFsBrte200pvE5xAkmDNjbIohNm5klmgx9YnSeanMqY5A/FTwObIRibOeDRqguEXKfVlYUsDBao9WTlykDd1C2A/6v6HDLrn8L19fWACeBm7jfSqwkmzehsIIaOBraQNtfrp43aAEzqpEvhK1NPFeC4qG2jkWBXunMnuOISRcCYsAdsF3O7fUNnujpInQp4DZ8KwV2FmvtIOsh0MU0/t5EmSrcCsRpAyod4KFVKDYGfrdIxkSyVp42oJ1W+RLmRdmi0Esc0V7UIzJJ//A+4FBq6GJDSNahvqK0ceqdOtLOlCY7I3aUpxTsUdtOZL6m/rVwjKAPk2qwfngswTfY1DlqXBA1y3zIyIc/qRPHoW5SIy37KpWFJjHxD3I6/c2bOA3y2hQ4pYTZgbjokXWhk5NuoOmZiZwI/XVUnUEJFcawCmm1Ta/tw3ZnakHNtNGbUWEmVz6sXlxuq5lNV4lOqIJuQU5QHEMeyooAIrnXphlkdMea0QBdhgMjIKxu4ijyOJsAkNkSA4nW3zegoRhLwGvsiwsZFjaA+vJ+Pgl41LFqKTBzKJzeY4y4K5XoNc7nis0wgQnLKo12glDFaehPgz6/h64EaExPNTwJAe1DE3wFUMBxd4DV7naTKl3PCl5MMxeG/EgQoy39r+w5UIWwAZ7wmNqNo/ZhYKgiEmkMjJViEcWAN4ggPgzAdfloCgu4iHEgRDTcRcXnedsSBlODF7lLlgOpER4KNup9IZKHakS9TXDhct95PHzZaH3cFI3KsEcHSDhw4pxZUZEFXqYrF0L1DQXjKGS3CVVwx8nDWQ8lEU9eXCBiEat99LPSlgWplOVQDS2NDg3WSNSQYde+YyYCuVZNkYNUgND126YEyidh4loQEG2DBs/cx8KWQNz0yTgqCTkMLmclevB/oQSuswMNCWvYAHh277jmLiswGO2w9Q1IplD35KTr5Hkwr71QA1z9KYTfXDe9ie6JJUVGMgMsSH6YhBvcTN5Z+bw/6BkhdiOf4X0Pk+Qpv4YVvn/BmtOy3CPg+A8gw+v/J82EJl0ikfsma0i508WtNQFu6GJ5nsZ7sTacCgBfB1FmObYVEFLW3GkrRWXPP3mc5A+7fEinK4mqRU5D8gGpdNjZaTx7lfU3nAo5S7q6ZuzncQWjEbqGSyCJeBLuCbu5dB2B0NAvwQyBz0dO4KqIKUmzL6q2DRavRClhgVIC4xaAFJtpuxYBysKndvZhDL1fAUIGdSPVI1pj/IDsdOKzaO8oQp+O6V3E/4NI4XnZr1TBg9+zyic6BWbfzLUlOLB6VgvGd9dJlG2R3DQsnLrRb6tTGFEK3xB7SD1RT3S59Z7c2jisR42rokoQEIGggP4WMs4k1IYD3cOfVdnNjhiKwU8dM8YaSfVVYkKt2aOTuqsgBZY7jUazQPnqrocQgNSYPRF9E+SvLGIzVnyRDRzT5U7xUMb2wAFgAhqoHIja8Y7WQRurG2vHdnqeq6N53vShmnb5r4SmYj8L506vjGsLOMErgHKOchXNdCpdq3QKvrjCj24kXD1E11zUiyyQP1MMjC1GiLD4NtFbhbGXGdkY8i7TXDL5BETfhadPCzeugxtwL4lmKYfiQ+XpIzLxwA9hIky+ggMIqYFfDmiPa8AX7XMRUP+GAPciSQmZh4Q3ckRH3wIhZAsCijAbKl3J+pBtLw3pYK7n4IYHuIwk8Qdyjb+veV3i3lQFXjE95i470ifEZ34URpc53BJVKlIXJwbJgCB41Ag71DFpSqxtLXgf2MW3cvBmvhAaOZEiIFY4AVBNM8UITXn7AS1iF7J6pAoWAjmh4y5Wmx51o7qBVgkfol4MYBDQ6qnu60cLlwDyLZYLAnBUqs8u49IqKPjh1RKKDN4iOh8DC90kXJ3xR8Z3IXSKZY8wTHxaiwMkIazyh4r9Gh4PQgzQ5mi1l/HgDodGAEMOgPtzPUKjxDvqs3BfQ2QO0J2IC73XMhu3pL5h3OK0uF1GF9tgFiBzAEbEjPTfS0cXuhVAaV2toiWcgvopYcMpGI0r0rdl00vNRBbx+vXb6+do4CCDx7s8BhYZKAbGVsYEF33o6xfVwbB6PDhm42oxaeA0Pis6BgJjTlTqIdcdjI5CuK9YAEKmrYea3ZUCxeBgkMLVzXT48dD4WLX4TigKZ1x4yfWTZoIw5Yfj9Abj/j9QD9LCQRHR8r8ZAtosh4YsTZzwE6+t04rsoc2+g1h5gIHF4+O1J7Vg+NGbz7SfwOlPzvqVFhJCQ4mnAXHYqSrG5AGNBbEqAGmFR7CdXyA2PXUBbZDh04fz6OMUM3MHoVfGpA62Ch3LlCzVgC7l8h8oDzdHdYxXflJvm2zGM3fYpvodExdcdIZQVxzzLN/gLhzHDXBEgfgFpqgumRYc6Z2AyvCqVChakJ3UFShQaws6WkvrLRGBZ2vdBDT8fmO5ZrS1WV7AY6aEvuGNBCy6dENU+H7cj+IjURXxTlPiK5oBpiACdbw2ydEwhPeXgVeb0ZnPzCSk4aFIe3c7D+pQqdIRsEnklqk/0kTRiCrR5Cwx7NlvcKcK/+C842Hscz4SUBV8uHsfcFaHWDgNiVHyPq2tg2I0GwSGsCArBXY9aaonlIA/89/xSTMxu0YksrZC3USmjxhTd1OydAjy7HAWjs35LiSTJJGK+1fLY/jYha/Vtoc6KLD7NAwjBqov6ivQQKv+1N5Lit2LeX0kyrAOWwx4Y324Y6Ta1Pfe28KB+o20SyxGKged8rR68DLyOIPFZ8CylJuyKu1OIFtC7cUjNvv1wXNFyGgVX0BpryQgwPEYaTYyRPB4XzBaiaPdjDIqGRRW4knDdjsiAkxdzpWuOpxqgQMMzl0uLjOmW/UD7ziKzeymC3sVo9mXbwe1RmQix8c2+EFYJ2pqhsAx6apOdEn2fGXY9rvHJmE1Ae+fyqD0sH6o6dwh1wtUz6c6+XccvEf4MCg1gEJAu+DwazG+DVNf1RCkDYkgs37VXmFBbf21t9YRme7YS1HcXi284Q9kfNGWse323t0VlvTrImQsPsQe6oMLeHd2EbPNN6ub3aUuCjRDEcgcWHxX+kvCkf/xHvW1E1jcoJZxauvcKydiCv48V37kWZQxtw4qJNODPVsIU+R44zQtroi0Be+hQX63ZyRriAqWJJEBGzKI6HJPsdjpG3Vc3onja7pSJW3QaDu/lW8PjGISJQeEi9QZyj2GseK/BcVrkzo6CmB6a4tMCg2mQY5Ir7qkXBGGv51Yy496L2SD5l4UJHQG9D4NFJC5gLAA8HHMB1ULcWPqjb/FcfCK03wHQM64NAO9+x/lQNAHAAX2YIPJ5gjLOmy259gcgyvU7L8idDkJ2yr1iWAUkKo7aIk9uF+QrKQAFiq4u8yDdIZJNQ+Ts+x2oKKSDb5VtVDdyAHQi/ANtRPG4NK/Z8W1ilCdNK4egJtQD80GKITglgrcAvDm7GAgUvenMrdOOvrlEwcpEut/RfSe/eJeHm6vvwhdX3gi1lwnEsNAm/jZX13mIJM+UrhGdBlhhvig38IwcJ8W9zsAUzqpRN4VOZ6jfC6b+sS/Y0+VtHOmH6PwKZYMjbnwus9HtO0/IURgRkxFYTHJapCqYIzWFN4BpySEpeKAeD6PzeaflxfmdVkq7ynBzOtqlqAW/BkrR0Y7mINvwbWv4iO6GSDPJHdmbG+xH+UW+DEnHia4hqdQ2ohfBna6CR8CN+u0CFILsuJOLZ99dv72NlBM1hBDGM8IP5TFZ/QAQhDXKyVAIySckQWg/67gP6hDcqVNQlTt3Z3Bp5Ksj2JAxfs+OKrZqmi8nKzhDDVK6ie+cEli83+7BM4qzhKseI23xey7482t4xHg1VjMBA+zFo89895p+Rfr4Ni6Ek+j4+ayNAovkBd00m7iCQrQSvXB97wCkxqsPopP00DnR7zRQIHs2uowUsjA8dPG/jrjS/UYoEgyM9Xs/FSUpLaAjORmgMNyebyyd3G82egkJ4rfESLTf/Lfie7SAK4GFZyh/GrsDyRW3gxoNiJjVkPK++Ygp9T1h3BB4xirxqpZXj7YAtoUcBcCwBRv9j0xh9EFhGOyOMwoO4rmNW/1GTWx0/FnUAZN0P19SxougYiS7BzkOfe63MH3Nd29lMhC6UvG0g7Pwn4sCXag3v1t6XXfn5RrBnc4hwNv3CiYVAk75nhTtZy6QhgFusIEE1Gf1sTiISULf0Q1Ukd8PtZuzAzk1bA2fbRAJUoZT0iWiKGNFpKKLerkngI3DN5P83tEsCCValn5tCSSoAFZ8NE5iZCGOFvnI2+fc0hSMyOP6hgheBC/JqM0XtzPY4ff3CcRZGFPQp+eT9FGVEXZAx5l6MPfTxBAh6p9mAdsCes1v4slb46vGhDSdrI7iP3whocfnC9FXoxzU/6gk3T51NDqRmqXEDBZpfvMByw0xUJeUSzQ5viPcMHg1uzxlzOnc9szCN1b5NBH44/uD8eVHwoMzBAdw5t/eZ7uSp4CG3yd2DETwEdbr9O8QEP3Wg28roCeRYRkHdKL6HzKxMGDwGRf0vRjBi75j7X6nFNW/ckp20Z7t7ZL6fRp0CBMDCbLfwU4hteMuyDWR35qZvpvj1ZDwnfkxnjWhUnmmRRqK67v2d+On/kdI/wa+GQTprDiGjAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh0MUsQhQ3WyICriqFUoQoVQK7TqYD76BU0akhQXR8G14ODHYtXBxVlXB1dBEPwAcXVxUnSREv+XFFrEeHDcj3f3HnfvAK5ZVTSrZxzQdNvMpJJCLr8qhF8RQgxR8BiUFMuYE8U0fMfXPQJsvUuwLP9zf45+tWApQEAgnlUM0ybeIJ7etA3G+8S8UpZU4nPiMZMuSPzIdNnjN8YllzmWyZvZzDwxTyyUuljuYqVsasRTxHFV0ymfy3msMt5irFXrSvue7IWRgr6yzHSaw0hhEUsQIUBGHRVUYSNBq06KhQztJ338Q65fJJdMrgoUciygBg2S6wf7g9/dWsXJCS8pkgRCL47zMQKEd4FWw3G+jx2ndQIEn4ErveOvNYGZT9IbHS1+BES3gYvrjibvAZc7QOzJkEzJlYI0uWIReD+jb8oDA7dA35rXW3sfpw9AlrpK3wAHh8BoibLXfd7d293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAQDHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZlrciO5joX/cxWzhCRB8LEckiAjZgez/PnAlD1drrpxu+/YUZJKSmWSwMF5pMP+n/8+4b/4yTHmkLW20kt5+Mk99zR40Z73Z9zH+OT7eH9EPp/FX98P6fP+k3jLD/oc2Mrn+K/34/cJ3qfBK/3Lidr6fDB//aDnz/nbjxN9LiS+Il+FfU7UPyeS9H4QPycY77ae0lv96xbmfp/tayft/Rf84XzVpL5PP/+fK9Uz5TqS0pYoD4+fYkkS/ydBBi+UxySZA6PU9/V9LJ+VUJA/1en7p7Oi40vNfzzol658v/rRrU8F2NqPbuX0OUR+FLl8P//x/RD1z125pf/LlXP7vEq/vr/k2e+KflT/Fv9YO3fP7GLkQqnLZ1NfW7yvOG5yCb90Cyyt0J0ChhrP/tv5bWx+AQV71jP5XbHHRLtOzNHiiCfu+7ziYok57ZAqL1JaSe6bTWrqifXSv+y/8aQqXUwaXVy37VnS91rivWx/VrhXa1zZIoemyMkiX/nHv+GffuEcH4UYvZbjrRXrSsmLzTK8c/7IYXQknk9R9Rb46/fnj/dV6KB6lX1EOqee7ymmxv9jArmNFg5Unt8ZjNU+J6BEXFpZTBQ6QNeiaCzxqSlVCEpSo0GDpfvMTDoQVZOxyJRFCr1pyS/NV2q8hyZNvB14HzKjEyqFOWt0aNCsnBX81NzA0FDRrKpFqzbtOoqUXLSUUouT4qhSc6haS6211V5Hk5abttJqa6230VMXSFN76bW33vsYXHNw5sG3BweMMdOUmaeGWWadbfY5FvBZeekqq662+hqWTAz+sGLVmnUbO26gtPPWXXbdbfc9DlA7Ek4+esqpp51+xnfXPm397fcfdC1+upZup/zA+t013q316xTR6US9ZzQshRzpePUWAOjkPXtazDl557xnT4f+RBOLVO+ZRe8YHcw7Jj3xq3chvR31zv2/+hZq/qVv6T/tXPDW/cPO/d63P3XNnITX7dg7hV7UR5g+Pt9tpDZc7H57Dl8vmBBZjQJKZuNivLe6qJ0KRa10Ri3sSNYUdlTSNhm2fHrW3q2WHUz5Uoy2+qhR1zpd42Kfqyg8pnJK5+GxtfY5jWIPR8pZTsbIJJvx55WD1SrglQsUYzWZesXZ6EkvyWy2BWNz5ii8eI4Oy0Oimkb6skc7bSy6pxpOdJYYfF/3mc9YVbJGen163LX5y4iCvNVAAtgR2sr6lTeca5byylbY04Zy0lkYmkRfF1ReNGUqriVaiyxjp7FhRh2DtvV1qia+03tuAKqzuDlD4XICE9HCqRXrsGVorgIPmcFOOteac6Su7GnsGruyokw9o4BjmR0ARLQ/jwP6BpXm2fXsKYML5BPnaTWtkxc79oIWNTBfe9+FB/A3Oe2s0XJfVYMAPuF6JY3l7goPEzen6iXzT9eoNnwSlc5YYkriFIq5D4N668YUQbg5qBuit6R/55niMfQdTow+0WNvrlaf1sLs3mChUH0c5PChozp06pmlnrJKn4+UbX1r7SOmvPuc0vZs2/wMjDgk0VtYqxjIM1dYscoJtGQYvTb2n5n30Tkf6BursV16Av77ZMB90ucZjDxYsOCHFZuw/1vDvlhJ2YKlPEbd6M9gX8Of00jJTeEY176YG8UDIkBnDqWu7YSyZCM+pjMmOzPXqic9Xsw0s7SV/vW4vs+h3T69/xsRhPcJA/Sdzz51OUPUep69F73eWyzNJidiM5NDYiJEZ04GNnB1WcvGinPN48iEv549+ZStTUt7SN8AY5cIG9bWk7bOPPaUgcRz+LSVmWDI8kBTtZh2O42TplnioNGx7n0YJGe0/MGpMZq1AeLCRxkQIcHZWtMZWkOYa88AP85ZhWvSFmu7zEatE3LewfssC3ZnGhI96iseCHaPafkLlUH/LhpjPVm8LgypZPNX44wGO2V4BWJzCQCLcAzitjMDL/VsLue27FlaJ3tjC3UIVH0aX20MX/5u6a6/UK2/lR05de6JOMTWtzzmBhEZYzQ5Tc+QRtkKC9YEqcF9A/RZKmUGwysy8sNYYWlXNWiILrihT3uAes1rQlP7OTTjHJGzo8IDA+YjV1BReKcFo2UGWgBGbZy/l2nQtwGauIVsUNEpOtFTNdaky7kYApqIyuqMhM7HAEsYYApVU0e+i1uMrCdDT3PpQT+o20OXgEPZwBKiy8REeBwv22wNhA5Bw0S4okzNG35mqDMMaVTl0jZunyl6QV/5IMFkSB8EhX0DGTOBi1E3FHh6YICd/fbZ4/06lbX8tzHBVIELRJmYhTI5dvUigxWcYq4Df0CDx70vPGi03hkp6OEsbTWM9+TQzpH22dKT0T0MjdSiEHJh5OJZggTYdLMzQTrDW3BGMmGpBZcF9X0z4AtKWwK71Mlw8mpfgj5HYVNo7UEJEzPBtxjkTEBt6xiDdAYsVyTggptVFBK7tJCwXhycUQBHmk9VZ/3J+pb3qKMXk1kDsJQHfRGmOO1mD64WS8OJ0Eeqv1D4zfekuw8Alrkkx9LjBMkc3TpyalBHtw5Xm1+VDScVdJByj0tUsFq2crIXUjrAbSZdLdHUDWjevuKdTvvuH+xOA8I2f1EAKCEsU6bqJ4QXzzao7UMTENho75h6mPnDc/jLGx7P0oco6u9EYdiMpB/YXNQAhxc37C0AG5j2d1zgmN99oAv7G39lrE2WwVFQSAFzbnfZdi/BBwI23hOlS9XNbWHOC2yaHOWQ9oTRCrS1eQCsRiZNyb0OeIoHcMQ9FRzlZgfXBoPgG/YqcPO5y4YO8EsTN94fJ4UOxYCqOfjFF1d8ImG042Oa7BbE+CgSfPkaACzizdHSzO8HQQSivWFjk/uYPAm08ML0Oxlj5EZNYNeJky5h4/oWxdnIP68xUhgQCmDb/TYGDPUfczW4nmnWYhgam4adQQ9nq24MODXIPlg1aQgIBmG4KYBBB/XDdGW3ZoYLVazkgYAIVFTlwK4oWesYQAwzSyS9Bwwc9beJo2LIKe9nhuPWn5j7E+S+ARf+NuJ+AI5xvnBboOjArMH78+INjoT6cnMQWNkJokBBi1tjvoBTcpOw0GLGKTvF6zLyB5RSqzEiWyhCQviNkiMvIpQOx4LrwlWnOuDTzs49wpNvcMOgHkfsdhrCByEJeJQAQAYxI/9cPgrQYWbsg7iGRgjlDKlb4Xckeidy0ioTqwt/kXRC58hFGsNjt4ovxYBjL5W8R/hT7XnW99wkrPYXxgYc+FmK293mkftBSbYluHaDfDay1ODagSwdcVET7CMc1zkXWy7L8wYA5IChD6II2pNLesCUUOmHHDST05V6iKiQq8PmoDmMeNcbZK6FWBVCpawscajPgdd3bJw/1UBI8UH1ysPGVCYlDDnj6tmki5t/5Jb7oL554rFh39P35a524lgrMIZUxqLORIcNkO7x/RXcZPyxGhIwZcMpmacKIm3vHoF2AEv6TCwP0XopjZ/uAeBiPC7ChlawzcowIPcoBGrObFFLl9TmbeE0fk8y/Abey4xQX2OPm2TjWefgu434eMCaE7EJlhrXcpAJ5sr1MLB+qkP21oEJngtlRWw20WXjJTHJfIOMRjlLYYc7ERNIxcL2ngjaKRDb3zm4D0JVkQ76ZejoBgasfHm8w+27PrWH/0ZoMvZ9PDrgEzzjEkOQzDnJbkQI1HJBrBNpg1bh54gCP57oSZoZzBG/1hJscm+5OwOcymQAn3kqafWSBWYU7/MR/H/57Gk5ne7UuGEn0+RqeW0SRBrZ8rM2bkQBoHtdbCbaCiHS3GevBXYqChEHkZM98k4io4Fq0ihehV0el5yi7vcsRCzHvmBbM4Oo4a4x9YohJUqwb6FgdoRVVSNIMP8kIi3drSHjMD0erTpCd1qn2+IAyR4Xn+OxoVV4EW9CcmBAS3FzARHEKOWgUXZ3TSn9Bpt/xqxBOeJI1a6CyMAwjRiF3/e/JahO+ALcwOUv1OKf3VvwF9jMhkhgPI3gb9uQQhJJzbXjfvMaxLbtaRxOwNgCb3X4uRYOiz7osgKpTT2ZiC2mA9JthP7l4XQXDvNIZH6Nx/1KvNcgGfl9pfVeY7x3uIN7qsn6VckwqA/DCE/hAwWjS0bT5PMFh6KIU2K5UgGJ/Ix+4YFxAUUpGO0Me16HlBLJ7N7AQusY3EcIWpSY/uKmPCBwIAFCvQYH4Sq0P7IYOMwnxzWcdIWHncQITB62vKWGnQbwwIIh89FHLkkihUyJojCjWwnCoSMnqNp+Ch1HL15exsqP9K8hT6ZgXSU7pmveB8AGGhsxIxlEyHRUR3cGFd8hfjvtNrz92ygnOfjoHMkd29zd1JwEFSO/SCM5lh17sqkGRs7usAhuExZRQktLhdkDmdiGOJg1RK3xBb/1jrvVxQA0D7/QbBloVoU3K/pM/Ohk1Qaj8QVcNmkrI0FV3QSH6Dcw8A5GhK24M4zXqUJ92Tk05ARIVVudK89Xbcltox5yHiNKxriMivWDmO/UTi/bMKIGLoOeM0TEp1z9htwS1HXZ5c5l8EYb+G+mFgEnw/UmWgJenLHN08Coma6DCSK7em/xWlxCM3XiubnDtT08jiIgBFVwljwbIIS6gjMmRtygIiwfowtA/G9kD21jsjGMrXa/fSBQYuxsTByznPXeSirOK3q7VisGrAOqjgQwRMAcYSSn5ERQfKN0QqVcZ5YyKPgX9sls0HlmaeJ8KromfhsYSNjoiZHmlExMo4iwUqrYCl+y3HtnfmNQi9f5yJWlV4OH5YUc0dd7/39TXvB8ovgND7Sdo/e9twbhx/fmZU7YeMcrEsCM0TDfzGyM9AxM+IgMBLI9JsPKaY+TeInkhPeW30IgFsQJbPrUODmW2UTFoTGuACs4sW1K0akJGvg1Cf/+ZtHnmbX67RbAU2uwXvYoDS8GzzKM5LRNYql+H/NQs4gJEjDb88GPp/sXRsyH39RdW+vohMhra6bf0T0EU4pL1EBKRvV8yMCw/e5BHtJwrJAeico3PhZTupL9jk71O511WcC+53vPadEifNmqD/6+Ca1a+B57arkpfxFk/S4oBApPH1aOizMC7lK/D7cCm8Gpmdv8LMsTKPbUoy1mXBbBt/uYUu7kt8X4iEBJVtkKezRr12rliBml/GgfMnphhinBrj0+tkwZfgmFOlagbcwpjomMXOgZY+i+WTBVpb6OMbB3ZnOgIMktAhxTMxLpZXCJvwYdgJdOAiLLEXEflQefJrV5ANNaUX5MRN1kPYPqoWe/TcPEkUmoDPyNRmNehZrh+bo7Yohe/P4KKbNMwW7XxCDD7hYmLI3RhiJ8hjBiC6vitzy3/9nFcwD2X+tecsqjzW1bh3oWs0z623xJIO5TgydMFMUaXh1X4RiCLcheaIZHJKDKqm4NMcBcTmjxGP3GAdIIVtIepjocEsqDaI07Tyi2npk9YovfGDpzY4E8CST/O91aOT5FPS24MRIS9Ze+hF+Ehmaa/4H7fwGCg3GYVGiblAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPW0tFKx3sUMQhQ3WyICriqFUoQoVQK7TqYPLSP2jSkKS4OAquBQd/FqsOLs66OrgKguAPiKuLk6KLlHhfUmgR44PL+zjvncN99wH+ZpWpZs84oGqWkUklhVx+VQi9IogYIlT9EjP1OVFMw3N93cPH97sEz/K+9+caUAomA3wC8SzTDYt4g3h609I57xNHWVlSiM+JxwxqkPiR67LLb5xLDvt5ZtTIZuaJo8RCqYvlLmZlQyWeIo4rqkb5/pzLCuctzmq1ztp98heGC9rKMtephpHCIpYgQoCMOiqowkKCdo0UExk6T3r4hxy/SC6ZXBUwciygBhWS4wf/g9+zNYuTE25SOAkEX2z7YwQI7QKthm1/H9t26wQIPANXWsdfawIzn6Q3Olr8CIhsAxfXHU3eAy53gNiTLhmSIwWo/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]};const DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class DrawEvent extends BaseEvent{constructor(e,s){super(e),this.feature=s}}function getTraceTargets(o,e){const s=[];for(let a=0;a<e.length;++a){const b=e[a].getGeometry();appendGeometryTraceTargets(o,b,s)}return s}function getSquaredDistance(o,e){return squaredDistance$1(o[0],o[1],e[0],e[1])}function getCoordinate(o,e){const s=o.length;return e<0?o[e+s]:e>=s?o[e-s]:o[e]}function getCumulativeSquaredDistance(o,e,s){let a,d;e<s?(a=e,d=s):(a=s,d=e);const b=Math.ceil(a),_=Math.floor(d);if(b>_){const nt=interpolateCoordinate(o,a),rt=interpolateCoordinate(o,d);return getSquaredDistance(nt,rt)}let _e=0;if(a<b){const nt=interpolateCoordinate(o,a),rt=getCoordinate(o,b);_e+=getSquaredDistance(nt,rt)}if(_<d){const nt=getCoordinate(o,_),rt=interpolateCoordinate(o,d);_e+=getSquaredDistance(nt,rt)}for(let nt=b;nt<_-1;++nt){const rt=getCoordinate(o,nt),ct=getCoordinate(o,nt+1);_e+=getSquaredDistance(rt,ct)}return _e}function appendGeometryTraceTargets(o,e,s){if(e instanceof LineString){appendTraceTarget(o,e.getCoordinates(),!1,s);return}if(e instanceof MultiLineString){const a=e.getCoordinates();for(let d=0,b=a.length;d<b;++d)appendTraceTarget(o,a[d],!1,s);return}if(e instanceof Polygon){const a=e.getCoordinates();for(let d=0,b=a.length;d<b;++d)appendTraceTarget(o,a[d],!0,s);return}if(e instanceof MultiPolygon){const a=e.getCoordinates();for(let d=0,b=a.length;d<b;++d){const _=a[d];for(let _e=0,nt=_.length;_e<nt;++_e)appendTraceTarget(o,_[_e],!0,s)}return}if(e instanceof GeometryCollection){const a=e.getGeometries();for(let d=0;d<a.length;++d)appendGeometryTraceTargets(o,a[d],s);return}}const sharedUpdateInfo={index:-1,endIndex:NaN};function getTraceTargetUpdate(o,e,s,a){const d=o[0],b=o[1];let _=1/0,_e=-1,nt=NaN;for(let dt=0;dt<e.targets.length;++dt){const pt=e.targets[dt],bt=pt.coordinates;let xt=1/0,wt;for(let Tt=0;Tt<bt.length-1;++Tt){const Rt=bt[Tt],Mt=bt[Tt+1],Et=getPointSegmentRelationship(d,b,Rt,Mt);Et.squaredDistance<xt&&(xt=Et.squaredDistance,wt=Tt+Et.along)}xt<_&&(_=xt,pt.ring&&e.targetIndex===dt&&(pt.endIndex>pt.startIndex?wt<pt.startIndex&&(wt+=bt.length):pt.endIndex<pt.startIndex&&wt>pt.startIndex&&(wt-=bt.length)),nt=wt,_e=dt)}const rt=e.targets[_e];let ct=rt.ring;if(e.targetIndex===_e&&ct){const dt=interpolateCoordinate(rt.coordinates,nt),pt=s.getPixelFromCoordinate(dt);distance(pt,e.startPx)>a&&(ct=!1)}if(ct){const dt=rt.coordinates,pt=dt.length,bt=rt.startIndex,xt=nt;if(bt<xt){const wt=getCumulativeSquaredDistance(dt,bt,xt);getCumulativeSquaredDistance(dt,bt,xt-pt)<wt&&(nt-=pt)}else{const wt=getCumulativeSquaredDistance(dt,bt,xt);getCumulativeSquaredDistance(dt,bt,xt+pt)<wt&&(nt+=pt)}}return sharedUpdateInfo.index=_e,sharedUpdateInfo.endIndex=nt,sharedUpdateInfo}function appendTraceTarget(o,e,s,a){const d=o[0],b=o[1];for(let _=0,_e=e.length-1;_<_e;++_){const nt=e[_],rt=e[_+1],ct=getPointSegmentRelationship(d,b,nt,rt);if(ct.squaredDistance===0){const dt=_+ct.along;a.push({coordinates:e,ring:s,startIndex:dt,endIndex:dt});return}}}const sharedRel={along:0,squaredDistance:0};function getPointSegmentRelationship(o,e,s,a){const d=s[0],b=s[1],_=a[0],_e=a[1],nt=_-d,rt=_e-b;let ct=0,dt=d,pt=b;return(nt!==0||rt!==0)&&(ct=clamp(((o-d)*nt+(e-b)*rt)/(nt*nt+rt*rt),0,1),dt+=nt*ct,pt+=rt*ct),sharedRel.along=ct,sharedRel.squaredDistance=toFixed(squaredDistance$1(o,e,dt,pt),10),sharedRel}function interpolateCoordinate(o,e){const s=o.length;let a=Math.floor(e);const d=e-a;a>=s?a-=s:a<0&&(a+=s);let b=a+1;b>=s&&(b-=s);const _=o[a],_e=_[0],nt=_[1],rt=o[b],ct=rt[0]-_e,dt=rt[1]-nt;return[_e+ct*d,nt+dt*d]}class Draw extends PointerInteraction{constructor(e){const s=e;s.stopDown||(s.stopDown=FALSE),super(s),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=getMode(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:TRUE,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let a=e.geometryFunction;if(!a){const d=this.mode_;if(d==="Circle")a=function(b,_,_e){const nt=_||new Circle([NaN,NaN]),rt=fromUserCoordinate(b[0]),ct=squaredDistance(rt,fromUserCoordinate(b[b.length-1]));return nt.setCenterAndRadius(rt,Math.sqrt(ct),this.geometryLayout_),nt};else{let b;d==="Point"?b=Point$1:d==="LineString"?b=LineString:d==="Polygon"&&(b=Polygon),a=function(_,_e,nt){return _e?d==="Polygon"?_[0].length?_e.setCoordinates([_[0].concat([_[0][0]])],this.geometryLayout_):_e.setCoordinates([],this.geometryLayout_):_e.setCoordinates(_,this.geometryLayout_):_e=new b(_,this.geometryLayout_),_e}}}this.geometryFunction_=a,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:getDefaultStyleFunction$2(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=always:this.freehandCondition_=e.freehandCondition?e.freehandCondition:shiftKeyOnly,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(InteractionProperty.ACTIVE,this.updateState_)}setTrace(e){let s;e?e===!0?s=always:s=e:s=never,this.traceCondition_=s}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===EventType.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let s=e.type===MapBrowserEventType.POINTERMOVE,a=!0;return!this.freehand_&&this.lastDragTime_&&e.type===MapBrowserEventType.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,s=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===MapBrowserEventType.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),a=!1):this.freehand_&&e.type===MapBrowserEventType.POINTERDOWN?a=!1:s&&this.getPointerCount()<2?(a=e.type===MapBrowserEventType.POINTERMOVE,a&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===MapBrowserEventType.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===MapBrowserEventType.DBLCLICK&&(a=!1),super.handleEvent(e)&&a}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const s=this.getMap(),a=s.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),d=s.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),b=boundingExtent([a,d]),_=this.traceSource_.getFeaturesInExtent(b);if(_.length===0)return;const _e=getTraceTargets(e.coordinate,_);_e.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:_e,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,s){const a=e.startIndex<=e.endIndex,d=e.startIndex<=s;a===d?a&&s>e.endIndex||!a&&s<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,s):(a&&s<e.endIndex||!a&&s>e.endIndex)&&this.removeTracedCoordinates_(s,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,s))}removeTracedCoordinates_(e,s){if(e===s)return;let a=0;if(e<s){const d=Math.ceil(e);let b=Math.floor(s);b===s&&(b-=1),a=b-d+1}else{const d=Math.floor(e);let b=Math.ceil(s);b===s&&(b+=1),a=d-b+1}a>0&&this.removeLastPoints_(a)}addTracedCoordinates_(e,s,a){if(s===a)return;const d=[];if(s<a){const b=Math.ceil(s);let _=Math.floor(a);_===a&&(_-=1);for(let _e=b;_e<=_;++_e)d.push(getCoordinate(e.coordinates,_e))}else{const b=Math.floor(s);let _=Math.ceil(a);_===a&&(_+=1);for(let _e=b;_e>=_;--_e)d.push(getCoordinate(e.coordinates,_e))}d.length&&this.appendCoordinates(d)}updateTrace_(e){const s=this.traceState_;if(!s.active||s.targetIndex===-1&&distance(s.startPx,e.pixel)<this.snapTolerance_)return;const a=getTraceTargetUpdate(e.coordinate,s,this.getMap(),this.snapTolerance_);if(s.targetIndex!==a.index){if(s.targetIndex!==-1){const nt=s.targets[s.targetIndex];this.removeTracedCoordinates_(nt.startIndex,nt.endIndex)}const _e=s.targets[a.index];this.addTracedCoordinates_(_e,_e.startIndex,a.endIndex)}else{const _e=s.targets[s.targetIndex];this.addOrRemoveTracedCoordinates_(_e,a.endIndex)}s.targetIndex=a.index;const d=s.targets[s.targetIndex];d.endIndex=a.endIndex;const b=interpolateCoordinate(d.coordinates,d.endIndex),_=this.getMap().getPixelFromCoordinate(b);e.coordinate=b,e.pixel=[Math.round(_[0]),Math.round(_[1])]}handleUpEvent(e){let s=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const a=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const d=!this.finishCoordinate_;d&&this.startDrawing_(e.coordinate),!d&&this.freehand_?this.finishDrawing():!this.freehand_&&(!d||this.mode_==="Point")&&(this.atFinish_(e.pixel,a)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),s=!1}else this.freehand_&&this.abortDrawing()}return!s&&this.stopClick_&&e.preventDefault(),s}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const s=this.downPx_,a=e.pixel,d=s[0]-a[0],b=s[1]-a[1],_=d*d+b*b;if(this.shouldHandle_=this.freehand_?_>this.squaredClickTolerance_:_<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,s){let a=!1;if(this.sketchFeature_){let d=!1,b=[this.finishCoordinate_];const _=this.mode_;if(_==="Point")a=!0;else if(_==="Circle")a=this.sketchCoords_.length===2;else if(_==="LineString")d=!s&&this.sketchCoords_.length>this.minPoints_;else if(_==="Polygon"){const _e=this.sketchCoords_;d=_e[0].length>this.minPoints_,b=[_e[0][0],_e[0][_e[0].length-2]],s?b=[_e[0][0]]:b=[_e[0][0],_e[0][_e[0].length-2]]}if(d){const _e=this.getMap();for(let nt=0,rt=b.length;nt<rt;nt++){const ct=b[nt],dt=_e.getPixelFromCoordinate(ct),pt=e[0]-dt[0],bt=e[1]-dt[1],xt=this.freehand_?1:this.snapTolerance_;if(a=Math.sqrt(pt*pt+bt*bt)<=xt,a){this.finishCoordinate_=ct;break}}}}return a}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Feature(new Point$1(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Feature);const s=e.getLinearRing(0);let a=this.sketchLine_.getGeometry();a?(a.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),a.changed()):(a=new LineString(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(a))}startDrawing_(e){const s=this.getMap().getView().getProjection(),a=getStrideForLayout(this.geometryLayout_);for(;e.length<a;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Feature(new LineString(this.sketchLineCoords_)));const d=this.geometryFunction_(this.sketchCoords_,void 0,s);this.sketchFeature_=new Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(d),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const s=this.getMap(),a=this.sketchFeature_.getGeometry(),d=s.getView().getProjection(),b=getStrideForLayout(this.geometryLayout_);let _,_e;for(;e.length<b;)e.push(0);this.mode_==="Point"?_e=this.sketchCoords_:this.mode_==="Polygon"?(_=this.sketchCoords_[0],_e=_[_.length-1],this.atFinish_(s.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(_=this.sketchCoords_,_e=_[_.length-1]),_e[0]=e[0],_e[1]=e[1],this.geometryFunction_(this.sketchCoords_,a,d),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),a.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(a):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const s=this.sketchFeature_.getGeometry(),a=this.getMap().getView().getProjection();let d,b;const _=this.mode_;_==="LineString"||_==="Circle"?(this.finishCoordinate_=e.slice(),b=this.sketchCoords_,b.length>=this.maxPoints_&&(this.freehand_?b.pop():d=!0),b.push(e.slice()),this.geometryFunction_(b,s,a)):_==="Polygon"&&(b=this.sketchCoords_[0],b.length>=this.maxPoints_&&(this.freehand_?b.pop():d=!0),b.push(e.slice()),d&&(this.finishCoordinate_=b[0]),this.geometryFunction_(this.sketchCoords_,s,a)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),d&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const s=this.sketchFeature_.getGeometry(),a=this.getMap().getView().getProjection(),d=this.mode_;for(let b=0;b<e;++b){let _;if(d==="LineString"||d==="Circle"){if(_=this.sketchCoords_,_.splice(-2,1),_.length>=2){this.finishCoordinate_=_[_.length-2].slice();const _e=this.finishCoordinate_.slice();_[_.length-1]=_e,this.createOrUpdateSketchPoint_(_e)}this.geometryFunction_(_,s,a),s.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(s)}else if(d==="Polygon"){_=this.sketchCoords_[0],_.splice(-2,1);const _e=this.sketchLine_.getGeometry();if(_.length>=2){const nt=_[_.length-2].slice();_[_.length-1]=nt,this.createOrUpdateSketchPoint_(nt)}_e.setCoordinates(_),this.geometryFunction_(this.sketchCoords_,s,a)}if(_.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let s=this.sketchCoords_;const a=e.getGeometry(),d=this.getMap().getView().getProjection();this.mode_==="LineString"?(s.pop(),this.geometryFunction_(s,a,d)):this.mode_==="Polygon"&&(s[0].pop(),this.geometryFunction_(s,a,d),s=a.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new MultiPoint([s])):this.type_==="MultiLineString"?e.setGeometry(new MultiLineString([s])):this.type_==="MultiPolygon"&&e.setGeometry(new MultiPolygon([s])),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT,e))}appendCoordinates(e){const s=this.mode_,a=!this.sketchFeature_;a&&this.startDrawing_(e[0]);let d;if(s==="LineString"||s==="Circle")d=this.sketchCoords_;else if(s==="Polygon")d=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;a&&d.shift(),d.pop();for(let _=0;_<e.length;_++)this.addToDrawing_(e[_]);const b=e[e.length-1];this.addToDrawing_(b),this.modifyDrawing_(b)}extend(e){const a=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=a.getCoordinates();const d=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=d.slice(),this.sketchCoords_.push(d.slice()),this.sketchPoint_=new Feature(new Point$1(d)),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const s=this.overlay_.getSource();s.clear(!0),s.addFeatures(e)}updateState_(){const e=this.getMap(),s=this.getActive();(!e||!s)&&this.abortDrawing(),this.overlay_.setMap(s?e:null)}}function getDefaultStyleFunction$2(){const o=createEditingStyle();return function(e,s){return o[e.getGeometry().getType()]}}function getMode(o){switch(o){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+o)}}const CIRCLE_CENTER_INDEX=0,CIRCLE_CIRCUMFERENCE_INDEX=1,tempExtent=[0,0,0,0],tempSegment=[],ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class ModifyEvent extends BaseEvent{constructor(e,s,a){super(e),this.features=s,this.mapBrowserEvent=a}}class Modify extends PointerInteraction{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:primaryAction,this.defaultDeleteCondition_=function(a){return altKeyOnly(a)&&singleClick(a)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new RBush,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:getDefaultStyleFunction$1(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let s;if(e.features?s=e.features:e.source&&(this.source_=e.source,s=new Collection(this.source_.getFeatures()),this.source_.addEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!s)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=s,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(CollectionEventType.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(CollectionEventType.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const s=e.getGeometry();if(s){const d=this.SEGMENT_WRITERS_[s.getType()];d&&d(e,s)}const a=this.getMap();a&&a.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,a),e.addEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,s){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Collection;const a=this.featuresBeingModified_.getArray();for(let d=0,b=s.length;d<b;++d){const _=s[d];for(let _e=0,nt=_.length;_e<nt;++_e){const rt=_[_e].feature;rt&&!a.includes(rt)&&this.featuresBeingModified_.push(rt)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const s=this.rBush_,a=[];s.forEach(function(d){e===d.feature&&a.push(d)});for(let d=a.length-1;d>=0;--d){const b=a[d];for(let _=this.dragSegments_.length-1;_>=0;--_)this.dragSegments_[_][0]===b&&this.dragSegments_.splice(_,1);s.remove(b)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const s=e.target;this.removeFeature_(s),this.addFeature_(s)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,s){const a=s.getCoordinates(),d={feature:e,geometry:s,segment:[a,a]};this.rBush_.insert(s.getExtent(),d)}writeMultiPointGeometry_(e,s){const a=s.getCoordinates();for(let d=0,b=a.length;d<b;++d){const _=a[d],_e={feature:e,geometry:s,depth:[d],index:d,segment:[_,_]};this.rBush_.insert(s.getExtent(),_e)}}writeLineStringGeometry_(e,s){const a=s.getCoordinates();for(let d=0,b=a.length-1;d<b;++d){const _=a.slice(d,d+2),_e={feature:e,geometry:s,index:d,segment:_};this.rBush_.insert(boundingExtent(_),_e)}}writeMultiLineStringGeometry_(e,s){const a=s.getCoordinates();for(let d=0,b=a.length;d<b;++d){const _=a[d];for(let _e=0,nt=_.length-1;_e<nt;++_e){const rt=_.slice(_e,_e+2),ct={feature:e,geometry:s,depth:[d],index:_e,segment:rt};this.rBush_.insert(boundingExtent(rt),ct)}}}writePolygonGeometry_(e,s){const a=s.getCoordinates();for(let d=0,b=a.length;d<b;++d){const _=a[d];for(let _e=0,nt=_.length-1;_e<nt;++_e){const rt=_.slice(_e,_e+2),ct={feature:e,geometry:s,depth:[d],index:_e,segment:rt};this.rBush_.insert(boundingExtent(rt),ct)}}}writeMultiPolygonGeometry_(e,s){const a=s.getCoordinates();for(let d=0,b=a.length;d<b;++d){const _=a[d];for(let _e=0,nt=_.length;_e<nt;++_e){const rt=_[_e];for(let ct=0,dt=rt.length-1;ct<dt;++ct){const pt=rt.slice(ct,ct+2),bt={feature:e,geometry:s,depth:[_e,d],index:ct,segment:pt};this.rBush_.insert(boundingExtent(pt),bt)}}}}writeCircleGeometry_(e,s){const a=s.getCenter(),d={feature:e,geometry:s,index:CIRCLE_CENTER_INDEX,segment:[a,a]},b={feature:e,geometry:s,index:CIRCLE_CIRCUMFERENCE_INDEX,segment:[a,a]},_=[d,b];d.featureSegments=_,b.featureSegments=_,this.rBush_.insert(createOrUpdateFromCoordinate(a),d);let _e=s;this.rBush_.insert(_e.getExtent(),b)}writeGeometryCollectionGeometry_(e,s){const a=s.getGeometriesArray();for(let d=0;d<a.length;++d){const b=a[d],_=this.SEGMENT_WRITERS_[b.getType()];_(e,b)}}createOrUpdateVertexFeature_(e,s,a){let d=this.vertexFeature_;return d?d.getGeometry().setCoordinates(e):(d=new Feature(new Point$1(e)),this.vertexFeature_=d,this.overlay_.getSource().addFeature(d)),d.set("features",s),d.set("geometries",a),d}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let s;return!e.map.getView().getInteracting()&&e.type==MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_?s=this.removePoint():s=!0),e.type==MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!s}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const s=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],a=[],d=[];for(let b=0,_=this.dragSegments_.length;b<_;++b){const _e=this.dragSegments_[b],nt=_e[0],rt=nt.feature;a.includes(rt)||a.push(rt);const ct=nt.geometry;d.includes(ct)||d.push(ct);const dt=nt.depth;let pt;const bt=nt.segment,xt=_e[1];for(;s.length<ct.getStride();)s.push(bt[xt][s.length]);switch(ct.getType()){case"Point":pt=s,bt[0]=s,bt[1]=s;break;case"MultiPoint":pt=ct.getCoordinates(),pt[nt.index]=s,bt[0]=s,bt[1]=s;break;case"LineString":pt=ct.getCoordinates(),pt[nt.index+xt]=s,bt[xt]=s;break;case"MultiLineString":pt=ct.getCoordinates(),pt[dt[0]][nt.index+xt]=s,bt[xt]=s;break;case"Polygon":pt=ct.getCoordinates(),pt[dt[0]][nt.index+xt]=s,bt[xt]=s;break;case"MultiPolygon":pt=ct.getCoordinates(),pt[dt[1]][dt[0]][nt.index+xt]=s,bt[xt]=s;break;case"Circle":if(bt[0]=s,bt[1]=s,nt.index===CIRCLE_CENTER_INDEX)this.changingFeature_=!0,ct.setCenter(s),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let wt=distance(fromUserCoordinate(ct.getCenter()),fromUserCoordinate(s));ct.setRadius(wt),this.changingFeature_=!1}break}pt&&this.setGeometryCoordinates_(ct,pt)}this.createOrUpdateVertexFeature_(s,a,d)}handleDownEvent(e){if(!this.condition_(e))return!1;const s=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,s),this.dragSegments_.length=0,this.featuresBeingModified_=null;const a=this.vertexFeature_;if(a){e.map.getView().getProjection();const d=[],b=a.getGeometry().getCoordinates(),_=boundingExtent([b]),_e=this.rBush_.getInExtent(_),nt={};_e.sort(compareIndexes);for(let rt=0,ct=_e.length;rt<ct;++rt){const dt=_e[rt],pt=dt.segment;let bt=getUid(dt.geometry);const xt=dt.depth;if(xt&&(bt+="-"+xt.join("-")),nt[bt]||(nt[bt]=new Array(2)),dt.geometry.getType()==="Circle"&&dt.index===CIRCLE_CIRCUMFERENCE_INDEX){const wt=closestOnSegmentData(s,dt);equals(wt,b)&&!nt[bt][0]&&(this.dragSegments_.push([dt,0]),nt[bt][0]=dt);continue}if(equals(pt[0],b)&&!nt[bt][0]){this.dragSegments_.push([dt,0]),nt[bt][0]=dt;continue}if(equals(pt[1],b)&&!nt[bt][1]){if(nt[bt][0]&&nt[bt][0].index===0){let wt=dt.geometry.getCoordinates();switch(dt.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":wt=wt[xt[1]];case"Polygon":if(dt.index!==wt[xt[0]].length-2)continue;break}}this.dragSegments_.push([dt,1]),nt[bt][1]=dt;continue}getUid(pt)in this.vertexSegments_&&!nt[bt][0]&&!nt[bt][1]&&this.insertVertexCondition_(e)&&d.push(dt)}d.length&&this.willModifyFeatures_(e,[d]);for(let rt=d.length-1;rt>=0;--rt)this.insertVertex_(d[rt],b)}return!!this.vertexFeature_}handleUpEvent(e){for(let s=this.dragSegments_.length-1;s>=0;--s){const a=this.dragSegments_[s][0],d=a.geometry;if(d.getType()==="Circle"){const b=d.getCenter(),_=a.featureSegments[0],_e=a.featureSegments[1];_.segment[0]=b,_.segment[1]=b,_e.segment[0]=b,_e.segment[1]=b,this.rBush_.update(createOrUpdateFromCoordinate(b),_);let nt=d;this.rBush_.update(nt.getExtent(),_e)}else this.rBush_.update(boundingExtent(a.segment),a)}return this.featuresBeingModified_&&(this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,s,a){const d=a||s.getCoordinateFromPixel(e);s.getView().getProjection();const b=function(nt,rt){return projectedDistanceToSegmentDataSquared(d,nt)-projectedDistanceToSegmentDataSquared(d,rt)};let _,_e;if(this.hitDetection_){const nt=typeof this.hitDetection_=="object"?rt=>rt===this.hitDetection_:void 0;s.forEachFeatureAtPixel(e,(rt,ct,dt)=>{dt&&dt.getType()==="Point"&&(dt=new Point$1(toUserCoordinate(dt.getCoordinates())));const pt=dt||rt.getGeometry();if(rt instanceof Feature&&this.features_.getArray().includes(rt)){_e=pt;const bt=rt.getGeometry().getFlatCoordinates().slice(0,2);_=[{feature:rt,geometry:_e,segment:[bt,bt]}]}return!0},{layerFilter:nt})}if(!_){const nt=fromUserExtent(createOrUpdateFromCoordinate(d,tempExtent)),rt=s.getView().getResolution()*this.pixelTolerance_,ct=toUserExtent(buffer(nt,rt,tempExtent));_=this.rBush_.getInExtent(ct)}if(_&&_.length>0){const nt=_.sort(b)[0],rt=nt.segment;let ct=closestOnSegmentData(d,nt);const dt=s.getPixelFromCoordinate(ct);let pt=distance(e,dt);if(_e||pt<=this.pixelTolerance_){const bt={};if(bt[getUid(rt)]=!0,this.snapToPointer_||(this.delta_[0]=ct[0]-d[0],this.delta_[1]=ct[1]-d[1]),nt.geometry.getType()==="Circle"&&nt.index===CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(ct,[nt.feature],[nt.geometry]);else{const xt=s.getPixelFromCoordinate(rt[0]),wt=s.getPixelFromCoordinate(rt[1]),Tt=squaredDistance(dt,xt),Rt=squaredDistance(dt,wt);pt=Math.sqrt(Math.min(Tt,Rt)),this.snappedToVertex_=pt<=this.pixelTolerance_,this.snappedToVertex_&&(ct=Tt>Rt?rt[1]:rt[0]),this.createOrUpdateVertexFeature_(ct,[nt.feature],[nt.geometry]);const Mt={};Mt[getUid(nt.geometry)]=!0;for(let Et=1,$t=_.length;Et<$t;++Et){const Xt=_[Et].segment;if(equals(rt[0],Xt[0])&&equals(rt[1],Xt[1])||equals(rt[0],Xt[1])&&equals(rt[1],Xt[0])){const Zt=getUid(_[Et].geometry);Zt in Mt||(Mt[Zt]=!0,bt[getUid(Xt)]=!0)}else break}}this.vertexSegments_=bt;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,s){const a=e.segment,d=e.feature,b=e.geometry,_=e.depth,_e=e.index;let nt;for(;s.length<b.getStride();)s.push(0);switch(b.getType()){case"MultiLineString":nt=b.getCoordinates(),nt[_[0]].splice(_e+1,0,s);break;case"Polygon":nt=b.getCoordinates(),nt[_[0]].splice(_e+1,0,s);break;case"MultiPolygon":nt=b.getCoordinates(),nt[_[1]][_[0]].splice(_e+1,0,s);break;case"LineString":nt=b.getCoordinates(),nt.splice(_e+1,0,s);break;default:return}this.setGeometryCoordinates_(b,nt);const rt=this.rBush_;rt.remove(e),this.updateSegmentIndices_(b,_e,_,1);const ct={segment:[a[0],s],feature:d,geometry:b,depth:_,index:_e};rt.insert(boundingExtent(ct.segment),ct),this.dragSegments_.push([ct,1]);const dt={segment:[s,a[1]],feature:d,geometry:b,depth:_,index:_e+1};rt.insert(boundingExtent(dt.segment),dt),this.dragSegments_.push([dt,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=MapBrowserEventType.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const s=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,s}return!1}removeVertex_(){const e=this.dragSegments_,s={};let a=!1,d,b,_,_e,nt,rt,ct,dt,pt,bt,xt;for(nt=e.length-1;nt>=0;--nt)_=e[nt],bt=_[0],xt=getUid(bt.feature),bt.depth&&(xt+="-"+bt.depth.join("-")),xt in s||(s[xt]={}),_[1]===0?(s[xt].right=bt,s[xt].index=bt.index):_[1]==1&&(s[xt].left=bt,s[xt].index=bt.index+1);for(xt in s){switch(pt=s[xt].right,ct=s[xt].left,rt=s[xt].index,dt=rt-1,ct!==void 0?bt=ct:bt=pt,dt<0&&(dt=0),_e=bt.geometry,b=_e.getCoordinates(),d=b,a=!1,_e.getType()){case"MultiLineString":b[bt.depth[0]].length>2&&(b[bt.depth[0]].splice(rt,1),a=!0);break;case"LineString":b.length>2&&(b.splice(rt,1),a=!0);break;case"MultiPolygon":d=d[bt.depth[1]];case"Polygon":d=d[bt.depth[0]],d.length>4&&(rt==d.length-1&&(rt=0),d.splice(rt,1),a=!0,rt===0&&(d.pop(),d.push(d[0]),dt=d.length-1));break}if(a){this.setGeometryCoordinates_(_e,b);const wt=[];if(ct!==void 0&&(this.rBush_.remove(ct),wt.push(ct.segment[0])),pt!==void 0&&(this.rBush_.remove(pt),wt.push(pt.segment[1])),ct!==void 0&&pt!==void 0){const Tt={depth:bt.depth,feature:bt.feature,geometry:bt.geometry,index:dt,segment:wt};this.rBush_.insert(boundingExtent(Tt.segment),Tt)}this.updateSegmentIndices_(_e,rt,bt.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return a}setGeometryCoordinates_(e,s){this.changingFeature_=!0,e.setCoordinates(s),this.changingFeature_=!1}updateSegmentIndices_(e,s,a,d){this.rBush_.forEachInExtent(e.getExtent(),function(b){b.geometry===e&&(a===void 0||b.depth===void 0||equals$2(b.depth,a))&&b.index>s&&(b.index+=d)})}}function compareIndexes(o,e){return o.index-e.index}function projectedDistanceToSegmentDataSquared(o,e,s){const a=e.geometry;if(a.getType()==="Circle"){let b=a;if(e.index===CIRCLE_CIRCUMFERENCE_INDEX){const _=squaredDistance(b.getCenter(),fromUserCoordinate(o)),_e=Math.sqrt(_)-b.getRadius();return _e*_e}}const d=fromUserCoordinate(o);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),squaredDistanceToSegment(d,tempSegment)}function closestOnSegmentData(o,e,s){const a=e.geometry;if(a.getType()==="Circle"&&e.index===CIRCLE_CIRCUMFERENCE_INDEX)return toUserCoordinate(a.getClosestPoint(fromUserCoordinate(o)));const d=fromUserCoordinate(o);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),toUserCoordinate(closestOnSegment(d,tempSegment))}function getDefaultStyleFunction$1(){const o=createEditingStyle();return function(e,s){return o.Point}}const SelectEventType={SELECT:"select"};class SelectEvent extends BaseEvent{constructor(e,s,a,d){super(e),this.selected=s,this.deselected=a,this.mapBrowserEvent=d}}const originalFeatureStyles={};class Select extends Interaction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:singleClick,this.addCondition_=e.addCondition?e.addCondition:never,this.removeCondition_=e.removeCondition?e.removeCondition:never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:shiftKeyOnly,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:getDefaultStyleFunction(),this.features_=e.features||new Collection;let s;if(e.layers)if(typeof e.layers=="function")s=e.layers;else{const a=e.layers;s=function(d){return a.includes(d)}}else s=TRUE;this.layerFilter_=s,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,s){this.featureLayerAssociation_[getUid(e)]=s}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[getUid(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.addEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.removeEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const s=e.element;if(this.style_&&this.applySelectedStyle_(s),!this.getLayer(s)){const a=this.getMap().getAllLayers().find(function(d){if(d instanceof VectorLayer&&d.getSource()&&d.getSource().hasFeature(s))return d});a&&this.addFeatureLayerAssociation_(s,a)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const s=getUid(e);s in originalFeatureStyles||(originalFeatureStyles[s]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const s=this.getMap().getInteractions().getArray();for(let d=s.length-1;d>=0;--d){const b=s[d];if(b!==this&&b instanceof Select&&b.getStyle()&&b.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(b.getStyle());return}}const a=getUid(e);e.setStyle(originalFeatureStyles[a]),delete originalFeatureStyles[a]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[getUid(e)]}handleEvent(e){if(!this.condition_(e))return!0;const s=this.addCondition_(e),a=this.removeCondition_(e),d=this.toggleCondition_(e),b=!s&&!a&&!d,_=e.map,_e=this.getFeatures(),nt=[],rt=[];if(b){clear$1(this.featureLayerAssociation_),_.forEachFeatureAtPixel(e.pixel,(ct,dt)=>{if(!(!(ct instanceof Feature)||!this.filter_(ct,dt)))return this.addFeatureLayerAssociation_(ct,dt),rt.push(ct),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let ct=_e.getLength()-1;ct>=0;--ct){const dt=_e.item(ct),pt=rt.indexOf(dt);pt>-1?rt.splice(pt,1):(_e.remove(dt),nt.push(dt))}rt.length!==0&&_e.extend(rt)}else{_.forEachFeatureAtPixel(e.pixel,(ct,dt)=>{if(!(!(ct instanceof Feature)||!this.filter_(ct,dt)))return(s||d)&&!_e.getArray().includes(ct)?(this.addFeatureLayerAssociation_(ct,dt),rt.push(ct)):(a||d)&&_e.getArray().includes(ct)&&(nt.push(ct),this.removeFeatureLayerAssociation_(ct)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let ct=nt.length-1;ct>=0;--ct)_e.remove(nt[ct]);_e.extend(rt)}return(rt.length>0||nt.length>0)&&this.dispatchEvent(new SelectEvent(SelectEventType.SELECT,rt,nt,e)),!0}}function getDefaultStyleFunction(){const o=createEditingStyle();return extend$4(o.Polygon,o.LineString),extend$4(o.GeometryCollection,o.LineString),function(e){return e.getGeometry()?o[e.getGeometry().getType()]:null}}var logger$3=LoggerByDefault$1.getLogger("interactions"),Interactions={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(o,e){logger$3.trace("unset()");var s={};Helper$1.mergeParams(s,this._options),Helper$1.mergeParams(s,e);for(var a=o.getInteractions().getArray(),d=0;d<a.length;d++)if(a[d].getActive()&&(a[d]instanceof Draw||a[d]instanceof Select||a[d]instanceof Modify)){var b=a[d].getProperties(),_=b.name;if(typeof _<"u"&&this._extensions.indexOf(_)>-1){if(s.current&&s.current===_)continue;a[d].setActive(!1);var _e=b.source;if(typeof _e<"u"&&_e instanceof Control){for(var nt in s)if(s.hasOwnProperty(nt)){if(nt==="current")continue;if(typeof _e[nt]=="function"){var rt=Array.isArray(s[nt])?s[nt]:[s[nt]];_e[nt].apply(_e,rt)}}}}else a[d].setActive(!1)}}},MathUtils={modulo:function(o,e){var s=o%e;return s*e<0?s+e:s},decimalToDMS:function(o,e,s){var a=this.modulo(o+180,360)-180,d=Math.abs(3600*a),b=s||0,_=Math.pow(10,b),_e=Math.floor(d/3600),nt=Math.floor((d-_e*3600)/60),rt=d-_e*3600-nt*60;rt=Math.ceil(rt*_)/_,rt>=60&&(rt=0,nt+=1),nt>=60&&(nt=0,_e+=1);var ct=e.charAt(a<0?1:0);return{d:_e,m:nt,s:rt,direction:ct}},dmsToDecimal(o,e,s,a){var d=o+e/60+s/3600;return(a=="S"||a=="O")&&(d=d*-1),d},coordinateToDecimal(o){var e={};return e.lat=o[1].toFixed(6),e.lng=o[0].toFixed(6),e.unit="",e},coordinateToDMS(o){return{lng:MathUtils.decimalToDMS(o[0],"EO",2),lat:MathUtils.decimalToDMS(o[1],"NS",2),unit:"DMS"}},coordinateToRad(o){var e={},s=.017453292519943295;return e.lng=o[0]*s,e.lng=e.lng.toFixed(8),e.lat=o[1]*s,e.lat=e.lat.toFixed(8),e.unit="rad",e},coordinateToGon(o){var e={},s=1.1111111111111112;return e.lng=o[0]*s,e.lng=e.lng.toFixed(8),e.lat=o[1]*s,e.lat=e.lat.toFixed(8),e.unit="gon",e},coordinateToMeter(o){var e={};return e.x=o[0].toFixed(2),e.y=o[1].toFixed(2),e.unit="m",e},coordinateToKMeter(o){var e={};return e.x=(o[0]/1e3).toFixed(2),e.y=(o[1]/1e3).toFixed(2),e.unit="km",e},toInteger:function(o,e){var s=e||10,a=parseInt(o,s);return!isNaN(a)&&isFinite(a)?a:null},isInteger:function(o){if(isNaN(o))return!1;var e=parseFloat(o);return(e|0)===e},toFloat:function(o){var e=parseFloat(o);return!isNaN(e)&&isFinite(e)?e:null}},SearchEngineUtils={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"category",title:"Type",value:["cimetire","arodrome","rservoir","administratif","construction linaire","construction ponctuelle","construction surfacique","cours d'eau","dtail hydrographique","dtail orographique","quipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par cble","zone d'activit ou d'intrt","zone d'habitation","lieu-dit non habit"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],CadastralParcel:[{name:"departmentcode",title:"Code dpartement (INSEE)",description:"Code INSEE du dpartement (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"oldmunicipalitycode",title:"Commune absorbe",description:"Commune absorbe : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractres (chiffre et/ou lettre)"},{name:"number",title:"Numro",description:"Numro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numro de la feuille cadastrale"}]},zoomToResultsByDefault:function(o){var e=15,s=o.service,a=o.fields,d=o.type,b={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return s==="SuggestedLocation"&&d==="PositionOfInterest"&&(e=b[a.classification]),s==="GeocodedLocation"&&d==="PositionOfInterest"&&(e=b[a.importance]||14),d==="StreetAddress"&&(e=17),d==="CadastralParcel"&&(e=17),e}},GeocodeUtils={getGeocodedLocationFreeform:function(o){var e=o.placeAttributes;if(e.label)return e.label;if(o.type==="PositionOfInterest"){var s=e.toponym;return e.category&&Array.isArray(e.category)&&e.category.length>=2&&e.category[0]==="administratif"?s=s+", "+e.category[1]:e.postcode&&(s=s+", "+e.postcode[0],e.city&&(s=s+" "+e.city[0])),s}else return o.type==="StreetAddress"?(e.housenumber?e.housenumber+" ":"")+e.street+" "+(e.postcode?e.postcode+", ":"")+e.city:o.type==="CadastralParcel"?e.id:"..."},getSuggestedLocationFreeform:function(o){if(o.fullText)return o.fullText;var e=[];return e.push(o.street||""),e.push(o.postalCode||""),e.push(o.commune||""),o.type==="PositionOfInterest"&&(e.push(o.poi||""),e.push(o.kind||"")),e.join(" - ")}};function globals(o){o("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),o("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),o("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),o.WGS84=o["EPSG:4326"],o["EPSG:3785"]=o["EPSG:3857"],o.GOOGLE=o["EPSG:3857"],o["EPSG:900913"]=o["EPSG:3857"],o["EPSG:102113"]=o["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$2={};exports$2.greenwich=0;exports$2.lisbon=-9.131906111111;exports$2.paris=2.337229166667;exports$2.bogota=-74.080916666667;exports$2.madrid=-3.687938888889;exports$2.rome=12.452333333333;exports$2.bern=7.439583333333;exports$2.jakarta=106.807719444444;exports$2.ferro=-17.666666666667;exports$2.brussels=4.367975;exports$2.stockholm=18.058277777778;exports$2.athens=23.7163375;exports$2.oslo=10.722916666667;const units={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var ignoredChar=/[\s_\-\/\(\)]/g;function match(o,e){if(o[e])return o[e];for(var s=Object.keys(o),a=e.toLowerCase().replace(ignoredChar,""),d=-1,b,_;++d<s.length;)if(b=s[d],_=b.toLowerCase().replace(ignoredChar,""),_===a)return o[b]}function projStr(o){var e={},s=o.split("+").map(function(_e){return _e.trim()}).filter(function(_e){return _e}).reduce(function(_e,nt){var rt=nt.split("=");return rt.push(!0),_e[rt[0].toLowerCase()]=rt[1],_e},{}),a,d,b,_={proj:"projName",datum:"datumCode",rf:function(_e){e.rf=parseFloat(_e)},lat_0:function(_e){e.lat0=_e*D2R$1},lat_1:function(_e){e.lat1=_e*D2R$1},lat_2:function(_e){e.lat2=_e*D2R$1},lat_ts:function(_e){e.lat_ts=_e*D2R$1},lon_0:function(_e){e.long0=_e*D2R$1},lon_1:function(_e){e.long1=_e*D2R$1},lon_2:function(_e){e.long2=_e*D2R$1},alpha:function(_e){e.alpha=parseFloat(_e)*D2R$1},gamma:function(_e){e.rectified_grid_angle=parseFloat(_e)},lonc:function(_e){e.longc=_e*D2R$1},x_0:function(_e){e.x0=parseFloat(_e)},y_0:function(_e){e.y0=parseFloat(_e)},k_0:function(_e){e.k0=parseFloat(_e)},k:function(_e){e.k0=parseFloat(_e)},a:function(_e){e.a=parseFloat(_e)},b:function(_e){e.b=parseFloat(_e)},r:function(_e){e.a=e.b=parseFloat(_e)},r_a:function(){e.R_A=!0},zone:function(_e){e.zone=parseInt(_e,10)},south:function(){e.utmSouth=!0},towgs84:function(_e){e.datum_params=_e.split(",").map(function(nt){return parseFloat(nt)})},to_meter:function(_e){e.to_meter=parseFloat(_e)},units:function(_e){e.units=_e;var nt=match(units,_e);nt&&(e.to_meter=nt.to_meter)},from_greenwich:function(_e){e.from_greenwich=_e*D2R$1},pm:function(_e){var nt=match(exports$2,_e);e.from_greenwich=(nt||parseFloat(_e))*D2R$1},nadgrids:function(_e){_e==="@null"?e.datumCode="none":e.nadgrids=_e},axis:function(_e){var nt="ewnsud";_e.length===3&&nt.indexOf(_e.substr(0,1))!==-1&&nt.indexOf(_e.substr(1,1))!==-1&&nt.indexOf(_e.substr(2,1))!==-1&&(e.axis=_e)},approx:function(){e.approx=!0}};for(a in s)d=s[a],a in _?(b=_[a],typeof b=="function"?b(d):e[b]=d):e[a]=d;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(o){if(typeof o!="string")throw new Error("not a string");this.text=o.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){var o=this.text[this.place++];if(this.state!==QUOTED)for(;whitespace.test(o);){if(this.place>=this.text.length)return;o=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(o);case KEYWORD:return this.keyword(o);case QUOTED:return this.quoted(o);case AFTERQUOTE:return this.afterquote(o);case NUMBER:return this.number(o);case ENDED:return}};Parser.prototype.afterquote=function(o){if(o==='"'){this.word+='"',this.state=QUOTED;return}if(endThings.test(o)){this.word=this.word.trim(),this.afterItem(o);return}throw new Error(`havn't handled "`+o+'" in afterquote yet, index '+this.place)};Parser.prototype.afterItem=function(o){if(o===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(o==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=NEUTRAL,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ENDED);return}};Parser.prototype.number=function(o){if(digets.test(o)){this.word+=o;return}if(endThings.test(o)){this.word=parseFloat(this.word),this.afterItem(o);return}throw new Error(`havn't handled "`+o+'" in number yet, index '+this.place)};Parser.prototype.quoted=function(o){if(o==='"'){this.state=AFTERQUOTE;return}this.word+=o};Parser.prototype.keyword=function(o){if(keyword.test(o)){this.word+=o;return}if(o==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=NEUTRAL;return}if(endThings.test(o)){this.afterItem(o);return}throw new Error(`havn't handled "`+o+'" in keyword yet, index '+this.place)};Parser.prototype.neutral=function(o){if(latin.test(o)){this.word=o,this.state=KEYWORD;return}if(o==='"'){this.word="",this.state=QUOTED;return}if(digets.test(o)){this.word=o,this.state=NUMBER;return}if(endThings.test(o)){this.afterItem(o);return}throw new Error(`havn't handled "`+o+'" in neutral yet, index '+this.place)};Parser.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function parseString(o){var e=new Parser(o);return e.output()}function mapit(o,e,s){Array.isArray(e)&&(s.unshift(e),e=null);var a=e?{}:o,d=s.reduce(function(b,_){return sExpr(_,b),b},a);e&&(o[e]=d)}function sExpr(o,e){if(!Array.isArray(o)){e[o]=!0;return}var s=o.shift();if(s==="PARAMETER"&&(s=o.shift()),o.length===1){if(Array.isArray(o[0])){e[s]={},sExpr(o[0],e[s]);return}e[s]=o[0];return}if(!o.length){e[s]=!0;return}if(s==="TOWGS84"){e[s]=o;return}if(s==="AXIS"){s in e||(e[s]=[]),e[s].push(o);return}Array.isArray(s)||(e[s]={});var a;switch(s){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[s]={name:o[0].toLowerCase(),convert:o[1]},o.length===3&&sExpr(o[2],e[s]);return;case"SPHEROID":case"ELLIPSOID":e[s]={name:o[0],a:o[1],rf:o[2]},o.length===4&&sExpr(o[3],e[s]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":o[0]=["name",o[0]],mapit(e,s,o);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":o[0]=["name",o[0]],mapit(e,s,o),e[s].type=s;return;default:for(a=-1;++a<o.length;)if(!Array.isArray(o[a]))return sExpr(o,e[s]);return mapit(e,s,o)}}var D2R=.017453292519943295,knownTypes=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function rename(o,e){var s=e[0],a=e[1];!(s in o)&&a in o&&(o[s]=o[a],e.length===3&&(o[s]=e[2](o[s])))}function d2r(o){return o*D2R}function cleanWKT(o){for(var e=Object.keys(o),s=0,a=e.length;s<a;++s){var d=e[s];knownTypes.indexOf(d)!==-1&&setPropertiesFromWkt(o[d]),typeof o[d]=="object"&&cleanWKT(o[d])}}function setPropertiesFromWkt(o){if(o.AUTHORITY){var e=Object.keys(o.AUTHORITY)[0];e&&e in o.AUTHORITY&&(o.title=e+":"+o.AUTHORITY[e])}if(o.type==="GEOGCS"?o.projName="longlat":o.type==="LOCAL_CS"?(o.projName="identity",o.local=!0):typeof o.PROJECTION=="object"?o.projName=Object.keys(o.PROJECTION)[0]:o.projName=o.PROJECTION,o.AXIS){for(var s="",a=0,d=o.AXIS.length;a<d;++a){var b=[o.AXIS[a][0].toLowerCase(),o.AXIS[a][1].toLowerCase()];b[0].indexOf("north")!==-1||(b[0]==="y"||b[0]==="lat")&&b[1]==="north"?s+="n":b[0].indexOf("south")!==-1||(b[0]==="y"||b[0]==="lat")&&b[1]==="south"?s+="s":b[0].indexOf("east")!==-1||(b[0]==="x"||b[0]==="lon")&&b[1]==="east"?s+="e":(b[0].indexOf("west")!==-1||(b[0]==="x"||b[0]==="lon")&&b[1]==="west")&&(s+="w")}s.length===2&&(s+="u"),s.length===3&&(o.axis=s)}o.UNIT&&(o.units=o.UNIT.name.toLowerCase(),o.units==="metre"&&(o.units="meter"),o.UNIT.convert&&(o.type==="GEOGCS"?o.DATUM&&o.DATUM.SPHEROID&&(o.to_meter=o.UNIT.convert*o.DATUM.SPHEROID.a):o.to_meter=o.UNIT.convert));var _=o.GEOGCS;o.type==="GEOGCS"&&(_=o),_&&(_.DATUM?o.datumCode=_.DATUM.name.toLowerCase():o.datumCode=_.name.toLowerCase(),o.datumCode.slice(0,2)==="d_"&&(o.datumCode=o.datumCode.slice(2)),o.datumCode==="new_zealand_1949"&&(o.datumCode="nzgd49"),(o.datumCode==="wgs_1984"||o.datumCode==="world_geodetic_system_1984")&&(o.PROJECTION==="Mercator_Auxiliary_Sphere"&&(o.sphere=!0),o.datumCode="wgs84"),o.datumCode==="belge_1972"&&(o.datumCode="rnb72"),_.DATUM&&_.DATUM.SPHEROID&&(o.ellps=_.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),o.ellps.toLowerCase().slice(0,13)==="international"&&(o.ellps="intl"),o.a=_.DATUM.SPHEROID.a,o.rf=parseFloat(_.DATUM.SPHEROID.rf,10)),_.DATUM&&_.DATUM.TOWGS84&&(o.datum_params=_.DATUM.TOWGS84),~o.datumCode.indexOf("osgb_1936")&&(o.datumCode="osgb36"),~o.datumCode.indexOf("osni_1952")&&(o.datumCode="osni52"),(~o.datumCode.indexOf("tm65")||~o.datumCode.indexOf("geodetic_datum_of_1965"))&&(o.datumCode="ire65"),o.datumCode==="ch1903+"&&(o.datumCode="ch1903"),~o.datumCode.indexOf("israel")&&(o.datumCode="isr93")),o.b&&!isFinite(o.b)&&(o.b=o.a);function _e(ct){var dt=o.to_meter||1;return ct*dt}var nt=function(ct){return rename(o,ct)},rt=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",_e],["y0","false_northing",_e],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth","Azimuth"],["alpha","azimuth",d2r],["srsCode","name"]];rt.forEach(nt),!o.long0&&o.longc&&(o.projName==="Albers_Conic_Equal_Area"||o.projName==="Lambert_Azimuthal_Equal_Area")&&(o.long0=o.longc),!o.lat_ts&&o.lat1&&(o.projName==="Stereographic_South_Pole"||o.projName==="Polar Stereographic (variant B)")?(o.lat0=d2r(o.lat1>0?90:-90),o.lat_ts=o.lat1):!o.lat_ts&&o.lat0&&o.projName==="Polar_Stereographic"&&(o.lat_ts=o.lat0,o.lat0=d2r(o.lat0>0?90:-90))}function wkt(o){var e=parseString(o),s=e[0],a={};return sExpr(e,a),cleanWKT(a),a[s]}function defs(o){var e=this;if(arguments.length===2){var s=arguments[1];typeof s=="string"?s.charAt(0)==="+"?defs[o]=projStr(arguments[1]):defs[o]=wkt(arguments[1]):defs[o]=s}else if(arguments.length===1){if(Array.isArray(o))return o.map(function(a){Array.isArray(a)?defs.apply(e,a):defs(a)});if(typeof o=="string"){if(o in defs)return defs[o]}else"EPSG"in o?defs["EPSG:"+o.EPSG]=o:"ESRI"in o?defs["ESRI:"+o.ESRI]=o:"IAU2000"in o?defs["IAU2000:"+o.IAU2000]=o:console.log(o);return}}globals(defs);function testObj(o){return typeof o=="string"}function testDef(o){return o in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function testWKT(o){return codeWords.some(function(e){return o.indexOf(e)>-1})}var codes=["3857","900913","3785","102113"];function checkMercator(o){var e=match(o,"authority");if(e){var s=match(e,"epsg");return s&&codes.indexOf(s)>-1}}function checkProjStr(o){var e=match(o,"extension");if(e)return match(e,"proj4")}function testProj(o){return o[0]==="+"}function parse$1(o){if(testObj(o)){if(testDef(o))return defs[o];if(testWKT(o)){var e=wkt(o);if(checkMercator(e))return defs["EPSG:3857"];var s=checkProjStr(e);return s?projStr(s):e}if(testProj(o))return projStr(o)}else return o}function extend(o,e){o=o||{};var s,a;if(!e)return o;for(a in e)s=e[a],s!==void 0&&(o[a]=s);return o}function msfnz(o,e,s){var a=o*e;return s/Math.sqrt(1-a*a)}function sign(o){return o<0?-1:1}function adjust_lon(o){return Math.abs(o)<=SPI?o:o-sign(o)*TWO_PI}function tsfnz(o,e,s){var a=o*s,d=.5*o;return a=Math.pow((1-a)/(1+a),d),Math.tan(.5*(HALF_PI-e))/a}function phi2z(o,e){for(var s=.5*o,a,d,b=HALF_PI-2*Math.atan(e),_=0;_<=15;_++)if(a=o*Math.sin(b),d=HALF_PI-2*Math.atan(e*Math.pow((1-a)/(1+a),s))-b,b+=d,Math.abs(d)<=1e-10)return b;return-9999}function init$x(){var o=this.b/this.a;this.es=1-o*o,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function forward$v(o){var e=o.x,s=o.y;if(s*R2D>90&&s*R2D<-90&&e*R2D>180&&e*R2D<-180)return null;var a,d;if(Math.abs(Math.abs(s)-HALF_PI)<=EPSLN)return null;if(this.sphere)a=this.x0+this.a*this.k0*adjust_lon(e-this.long0),d=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*s));else{var b=Math.sin(s),_=tsfnz(this.e,s,b);a=this.x0+this.a*this.k0*adjust_lon(e-this.long0),d=this.y0-this.a*this.k0*Math.log(_)}return o.x=a,o.y=d,o}function inverse$v(o){var e=o.x-this.x0,s=o.y-this.y0,a,d;if(this.sphere)d=HALF_PI-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var b=Math.exp(-s/(this.a*this.k0));if(d=phi2z(this.e,b),d===-9999)return null}return a=adjust_lon(this.long0+e/(this.a*this.k0)),o.x=a,o.y=d,o}var names$y=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const merc={init:init$x,forward:forward$v,inverse:inverse$v,names:names$y};function init$w(){}function identity(o){return o}var names$x=["longlat","identity"];const longlat={init:init$w,forward:identity,inverse:identity,names:names$x};var projs=[merc,longlat],names$w={},projStore=[];function add(o,e){var s=projStore.length;return o.names?(projStore[s]=o,o.names.forEach(function(a){names$w[a.toLowerCase()]=s}),this):(console.log(e),!0)}function get(o){if(!o)return!1;var e=o.toLowerCase();if(typeof names$w[e]<"u"&&projStore[names$w[e]])return projStore[names$w[e]]}function start(){projs.forEach(add)}const projections={start,add,get};var exports$1={};exports$1.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};exports$1.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports$1.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports$1.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};exports$1.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};exports$1.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports$1.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports$1.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};exports$1.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports$1.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports$1.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};exports$1.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};exports$1.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports$1.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};exports$1.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports$1.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};exports$1.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports$1.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports$1.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports$1.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};exports$1.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};exports$1.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};exports$1.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};exports$1.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};exports$1.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports$1.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports$1.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};exports$1.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};exports$1.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};exports$1.hough={a:6378270,rf:297,ellipseName:"Hough"};exports$1.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};exports$1.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};exports$1.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};exports$1.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};exports$1.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};exports$1.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};exports$1.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};exports$1.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};exports$1.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};exports$1.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};exports$1.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};exports$1.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$1.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$1.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(o,e,s,a){var d=o*o,b=e*e,_=(d-b)/d,_e=0;a?(o*=1-_*(SIXTH+_*(RA4+_*RA6)),d=o*o,_=0):_e=Math.sqrt(_);var nt=(d-b)/b;return{es:_,e:_e,ep2:nt}}function sphere(o,e,s,a,d){if(!o){var b=match(exports$1,a);b||(b=WGS84),o=b.a,e=b.b,s=b.rf}return s&&!e&&(e=(1-1/s)*o),(s===0||Math.abs(o-e)<EPSLN)&&(d=!0,e=o),{a:o,b:e,rf:s,sphere:d}}var exports={};exports.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};exports.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};exports.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};exports.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};exports.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};exports.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};exports.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};exports.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};exports.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};exports.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};exports.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};exports.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};exports.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};exports.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};exports.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};exports.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};exports.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};exports.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function datum(o,e,s,a,d,b,_){var _e={};return o===void 0||o==="none"?_e.datum_type=PJD_NODATUM:_e.datum_type=PJD_WGS84,e&&(_e.datum_params=e.map(parseFloat),(_e.datum_params[0]!==0||_e.datum_params[1]!==0||_e.datum_params[2]!==0)&&(_e.datum_type=PJD_3PARAM),_e.datum_params.length>3&&(_e.datum_params[3]!==0||_e.datum_params[4]!==0||_e.datum_params[5]!==0||_e.datum_params[6]!==0)&&(_e.datum_type=PJD_7PARAM,_e.datum_params[3]*=SEC_TO_RAD,_e.datum_params[4]*=SEC_TO_RAD,_e.datum_params[5]*=SEC_TO_RAD,_e.datum_params[6]=_e.datum_params[6]/1e6+1)),_&&(_e.datum_type=PJD_GRIDSHIFT,_e.grids=_),_e.a=s,_e.b=a,_e.es=d,_e.ep2=b,_e}var loadedNadgrids={};function nadgrid(o,e){var s=new DataView(e),a=detectLittleEndian(s),d=readHeader(s,a),b=readSubgrids(s,d,a),_={header:d,subgrids:b};return loadedNadgrids[o]=_,_}function getNadgrids(o){if(o===void 0)return null;var e=o.split(",");return e.map(parseNadgridString)}function parseNadgridString(o){if(o.length===0)return null;var e=o[0]==="@";return e&&(o=o.slice(1)),o==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:o,mandatory:!e,grid:loadedNadgrids[o]||null,isNull:!1}}function secondsToRadians(o){return o/3600*Math.PI/180}function detectLittleEndian(o){var e=o.getInt32(8,!1);return e===11?!1:(e=o.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(o,e){return{nFields:o.getInt32(8,e),nSubgridFields:o.getInt32(24,e),nSubgrids:o.getInt32(40,e),shiftType:decodeString(o,56,64).trim(),fromSemiMajorAxis:o.getFloat64(120,e),fromSemiMinorAxis:o.getFloat64(136,e),toSemiMajorAxis:o.getFloat64(152,e),toSemiMinorAxis:o.getFloat64(168,e)}}function decodeString(o,e,s){return String.fromCharCode.apply(null,new Uint8Array(o.buffer.slice(e,s)))}function readSubgrids(o,e,s){for(var a=176,d=[],b=0;b<e.nSubgrids;b++){var _=readGridHeader(o,a,s),_e=readGridNodes(o,a,_,s),nt=Math.round(1+(_.upperLongitude-_.lowerLongitude)/_.longitudeInterval),rt=Math.round(1+(_.upperLatitude-_.lowerLatitude)/_.latitudeInterval);d.push({ll:[secondsToRadians(_.lowerLongitude),secondsToRadians(_.lowerLatitude)],del:[secondsToRadians(_.longitudeInterval),secondsToRadians(_.latitudeInterval)],lim:[nt,rt],count:_.gridNodeCount,cvs:mapNodes(_e)}),a+=176+_.gridNodeCount*16}return d}function mapNodes(o){return o.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(o,e,s){return{name:decodeString(o,e+8,e+16).trim(),parent:decodeString(o,e+24,e+24+8).trim(),lowerLatitude:o.getFloat64(e+72,s),upperLatitude:o.getFloat64(e+88,s),lowerLongitude:o.getFloat64(e+104,s),upperLongitude:o.getFloat64(e+120,s),latitudeInterval:o.getFloat64(e+136,s),longitudeInterval:o.getFloat64(e+152,s),gridNodeCount:o.getInt32(e+168,s)}}function readGridNodes(o,e,s,a){for(var d=e+176,b=16,_=[],_e=0;_e<s.gridNodeCount;_e++){var nt={latitudeShift:o.getFloat32(d+_e*b,a),longitudeShift:o.getFloat32(d+_e*b+4,a),latitudeAccuracy:o.getFloat32(d+_e*b+8,a),longitudeAccuracy:o.getFloat32(d+_e*b+12,a)};_.push(nt)}return _}function Projection(o,e){if(!(this instanceof Projection))return new Projection(o);e=e||function(rt){if(rt)throw rt};var s=parse$1(o);if(typeof s!="object"){e("Could not parse to valid json: "+o);return}var a=Projection.projections.get(s.projName);if(!a){e("Could not get projection name from: "+o);return}if(s.datumCode&&s.datumCode!=="none"){var d=match(exports,s.datumCode);d&&(s.datum_params=s.datum_params||(d.towgs84?d.towgs84.split(","):null),s.ellps=d.ellipse,s.datumName=d.datumName?d.datumName:s.datumCode)}s.k0=s.k0||1,s.axis=s.axis||"enu",s.ellps=s.ellps||"wgs84",s.lat1=s.lat1||s.lat0;var b=sphere(s.a,s.b,s.rf,s.ellps,s.sphere),_=eccentricity(b.a,b.b,b.rf,s.R_A),_e=getNadgrids(s.nadgrids),nt=s.datum||datum(s.datumCode,s.datum_params,b.a,b.b,_.es,_.ep2,_e);extend(this,s),extend(this,a),this.a=b.a,this.b=b.b,this.rf=b.rf,this.sphere=b.sphere,this.es=_.es,this.e=_.e,this.ep2=_.ep2,this.datum=nt,this.init(),e(null,this)}Projection.projections=projections;Projection.projections.start();function compareDatums(o,e){return o.datum_type!==e.datum_type||o.a!==e.a||Math.abs(o.es-e.es)>5e-11?!1:o.datum_type===PJD_3PARAM?o.datum_params[0]===e.datum_params[0]&&o.datum_params[1]===e.datum_params[1]&&o.datum_params[2]===e.datum_params[2]:o.datum_type===PJD_7PARAM?o.datum_params[0]===e.datum_params[0]&&o.datum_params[1]===e.datum_params[1]&&o.datum_params[2]===e.datum_params[2]&&o.datum_params[3]===e.datum_params[3]&&o.datum_params[4]===e.datum_params[4]&&o.datum_params[5]===e.datum_params[5]&&o.datum_params[6]===e.datum_params[6]:!0}function geodeticToGeocentric(o,e,s){var a=o.x,d=o.y,b=o.z?o.z:0,_,_e,nt,rt;if(d<-HALF_PI&&d>-1.001*HALF_PI)d=-HALF_PI;else if(d>HALF_PI&&d<1.001*HALF_PI)d=HALF_PI;else{if(d<-HALF_PI)return{x:-1/0,y:-1/0,z:o.z};if(d>HALF_PI)return{x:1/0,y:1/0,z:o.z}}return a>Math.PI&&(a-=2*Math.PI),_e=Math.sin(d),rt=Math.cos(d),nt=_e*_e,_=s/Math.sqrt(1-e*nt),{x:(_+b)*rt*Math.cos(a),y:(_+b)*rt*Math.sin(a),z:(_*(1-e)+b)*_e}}function geocentricToGeodetic(o,e,s,a){var d=1e-12,b=d*d,_=30,_e,nt,rt,ct,dt,pt,bt,xt,wt,Tt,Rt,Mt,Et,$t=o.x,Xt=o.y,Zt=o.z?o.z:0,Nt,Jt,dn;if(_e=Math.sqrt($t*$t+Xt*Xt),nt=Math.sqrt($t*$t+Xt*Xt+Zt*Zt),_e/s<d){if(Nt=0,nt/s<d)return Jt=HALF_PI,dn=-a,{x:o.x,y:o.y,z:o.z}}else Nt=Math.atan2(Xt,$t);rt=Zt/nt,ct=_e/nt,dt=1/Math.sqrt(1-e*(2-e)*ct*ct),xt=ct*(1-e)*dt,wt=rt*dt,Et=0;do Et++,bt=s/Math.sqrt(1-e*wt*wt),dn=_e*xt+Zt*wt-bt*(1-e*wt*wt),pt=e*bt/(bt+dn),dt=1/Math.sqrt(1-pt*(2-pt)*ct*ct),Tt=ct*(1-pt)*dt,Rt=rt*dt,Mt=Rt*xt-Tt*wt,xt=Tt,wt=Rt;while(Mt*Mt>b&&Et<_);return Jt=Math.atan(Rt/Math.abs(Tt)),{x:Nt,y:Jt,z:dn}}function geocentricToWgs84(o,e,s){if(e===PJD_3PARAM)return{x:o.x+s[0],y:o.y+s[1],z:o.z+s[2]};if(e===PJD_7PARAM){var a=s[0],d=s[1],b=s[2],_=s[3],_e=s[4],nt=s[5],rt=s[6];return{x:rt*(o.x-nt*o.y+_e*o.z)+a,y:rt*(nt*o.x+o.y-_*o.z)+d,z:rt*(-_e*o.x+_*o.y+o.z)+b}}}function geocentricFromWgs84(o,e,s){if(e===PJD_3PARAM)return{x:o.x-s[0],y:o.y-s[1],z:o.z-s[2]};if(e===PJD_7PARAM){var a=s[0],d=s[1],b=s[2],_=s[3],_e=s[4],nt=s[5],rt=s[6],ct=(o.x-a)/rt,dt=(o.y-d)/rt,pt=(o.z-b)/rt;return{x:ct+nt*dt-_e*pt,y:-nt*ct+dt+_*pt,z:_e*ct-_*dt+pt}}}function checkParams(o){return o===PJD_3PARAM||o===PJD_7PARAM}function datum_transform(o,e,s){if(compareDatums(o,e)||o.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return s;var a=o.a,d=o.es;if(o.datum_type===PJD_GRIDSHIFT){var b=applyGridShift(o,!1,s);if(b!==0)return;a=SRS_WGS84_SEMIMAJOR,d=SRS_WGS84_ESQUARED}var _=e.a,_e=e.b,nt=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(_=SRS_WGS84_SEMIMAJOR,_e=SRS_WGS84_SEMIMINOR,nt=SRS_WGS84_ESQUARED),d===nt&&a===_&&!checkParams(o.datum_type)&&!checkParams(e.datum_type))return s;if(s=geodeticToGeocentric(s,d,a),checkParams(o.datum_type)&&(s=geocentricToWgs84(s,o.datum_type,o.datum_params)),checkParams(e.datum_type)&&(s=geocentricFromWgs84(s,e.datum_type,e.datum_params)),s=geocentricToGeodetic(s,nt,_,_e),e.datum_type===PJD_GRIDSHIFT){var rt=applyGridShift(e,!0,s);if(rt!==0)return}return s}function applyGridShift(o,e,s){if(o.grids===null||o.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-s.x,y:s.y},d={x:Number.NaN,y:Number.NaN},b=[];e:for(var _=0;_<o.grids.length;_++){var _e=o.grids[_];if(b.push(_e.name),_e.isNull){d=a;break}if(_e.mandatory,_e.grid===null){if(_e.mandatory)return console.log("Unable to find mandatory grid '"+_e.name+"'"),-1;continue}for(var nt=_e.grid.subgrids,rt=0,ct=nt.length;rt<ct;rt++){var dt=nt[rt],pt=(Math.abs(dt.del[1])+Math.abs(dt.del[0]))/1e4,bt=dt.ll[0]-pt,xt=dt.ll[1]-pt,wt=dt.ll[0]+(dt.lim[0]-1)*dt.del[0]+pt,Tt=dt.ll[1]+(dt.lim[1]-1)*dt.del[1]+pt;if(!(xt>a.y||bt>a.x||Tt<a.y||wt<a.x)&&(d=applySubgridShift(a,e,dt),!isNaN(d.x)))break e}}return isNaN(d.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*R2D+" "+a.y*R2D+" tried: '"+b+"'"),-1):(s.x=-d.x,s.y=d.y,0)}function applySubgridShift(o,e,s){var a={x:Number.NaN,y:Number.NaN};if(isNaN(o.x))return a;var d={x:o.x,y:o.y};d.x-=s.ll[0],d.y-=s.ll[1],d.x=adjust_lon(d.x-Math.PI)+Math.PI;var b=nadInterpolate(d,s);if(e){if(isNaN(b.x))return a;b.x=d.x-b.x,b.y=d.y-b.y;var _=9,_e=1e-12,nt,rt;do{if(rt=nadInterpolate(b,s),isNaN(rt.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}nt={x:d.x-(rt.x+b.x),y:d.y-(rt.y+b.y)},b.x+=nt.x,b.y+=nt.y}while(_--&&Math.abs(nt.x)>_e&&Math.abs(nt.y)>_e);if(_<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=adjust_lon(b.x+s.ll[0]),a.y=b.y+s.ll[1]}else isNaN(b.x)||(a.x=o.x+b.x,a.y=o.y+b.y);return a}function nadInterpolate(o,e){var s={x:o.x/e.del[0],y:o.y/e.del[1]},a={x:Math.floor(s.x),y:Math.floor(s.y)},d={x:s.x-1*a.x,y:s.y-1*a.y},b={x:Number.NaN,y:Number.NaN},_;if(a.x<0||a.x>=e.lim[0]||a.y<0||a.y>=e.lim[1])return b;_=a.y*e.lim[0]+a.x;var _e={x:e.cvs[_][0],y:e.cvs[_][1]};_++;var nt={x:e.cvs[_][0],y:e.cvs[_][1]};_+=e.lim[0];var rt={x:e.cvs[_][0],y:e.cvs[_][1]};_--;var ct={x:e.cvs[_][0],y:e.cvs[_][1]},dt=d.x*d.y,pt=d.x*(1-d.y),bt=(1-d.x)*(1-d.y),xt=(1-d.x)*d.y;return b.x=bt*_e.x+pt*nt.x+xt*ct.x+dt*rt.x,b.y=bt*_e.y+pt*nt.y+xt*ct.y+dt*rt.y,b}function adjust_axis(o,e,s){var a=s.x,d=s.y,b=s.z||0,_,_e,nt,rt={};for(nt=0;nt<3;nt++)if(!(e&&nt===2&&s.z===void 0))switch(nt===0?(_=a,"ew".indexOf(o.axis[nt])!==-1?_e="x":_e="y"):nt===1?(_=d,"ns".indexOf(o.axis[nt])!==-1?_e="y":_e="x"):(_=b,_e="z"),o.axis[nt]){case"e":rt[_e]=_;break;case"w":rt[_e]=-_;break;case"n":rt[_e]=_;break;case"s":rt[_e]=-_;break;case"u":s[_e]!==void 0&&(rt.z=_);break;case"d":s[_e]!==void 0&&(rt.z=-_);break;default:return null}return rt}function common(o){var e={x:o[0],y:o[1]};return o.length>2&&(e.z=o[2]),o.length>3&&(e.m=o[3]),e}function checkSanity(o){checkCoord(o.x),checkCoord(o.y)}function checkCoord(o){if(typeof Number.isFinite=="function"){if(Number.isFinite(o))return;throw new TypeError("coordinates must be finite numbers")}if(typeof o!="number"||o!==o||!isFinite(o))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(o,e){return(o.datum.datum_type===PJD_3PARAM||o.datum.datum_type===PJD_7PARAM||o.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum.datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&o.datumCode!=="WGS84"}function transform(o,e,s,a){var d;Array.isArray(s)?s=common(s):s={x:s.x,y:s.y,z:s.z,m:s.m};var b=s.z!==void 0;if(checkSanity(s),o.datum&&e.datum&&checkNotWGS(o,e)&&(d=new Projection("WGS84"),s=transform(o,d,s,a),o=d),a&&o.axis!=="enu"&&(s=adjust_axis(o,!1,s)),o.projName==="longlat")s={x:s.x*D2R$1,y:s.y*D2R$1,z:s.z||0};else if(o.to_meter&&(s={x:s.x*o.to_meter,y:s.y*o.to_meter,z:s.z||0}),s=o.inverse(s),!s)return;if(o.from_greenwich&&(s.x+=o.from_greenwich),s=datum_transform(o.datum,e.datum,s),!!s)return e.from_greenwich&&(s={x:s.x-e.from_greenwich,y:s.y,z:s.z||0}),e.projName==="longlat"?s={x:s.x*R2D,y:s.y*R2D,z:s.z||0}:(s=e.forward(s),e.to_meter&&(s={x:s.x/e.to_meter,y:s.y/e.to_meter,z:s.z||0})),a&&e.axis!=="enu"?adjust_axis(e,!0,s):(s&&!b&&delete s.z,s)}var wgs84=Projection("WGS84");function transformer(o,e,s,a){var d,b,_;return Array.isArray(s)?(d=transform(o,e,s,a)||{x:NaN,y:NaN},s.length>2?typeof o.name<"u"&&o.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof d.z=="number"?[d.x,d.y,d.z].concat(s.slice(3)):[d.x,d.y,s[2]].concat(s.slice(3)):[d.x,d.y].concat(s.slice(2)):[d.x,d.y]):(b=transform(o,e,s,a),_=Object.keys(s),_.length===2||_.forEach(function(_e){if(typeof o.name<"u"&&o.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(_e==="x"||_e==="y"||_e==="z")return}else if(_e==="x"||_e==="y")return;b[_e]=s[_e]}),b)}function checkProj(o){return o instanceof Projection?o:o.oProj?o.oProj:Projection(o)}function proj4(o,e,s){o=checkProj(o);var a=!1,d;return typeof e>"u"?(e=o,o=wgs84,a=!0):(typeof e.x<"u"||Array.isArray(e))&&(s=e,e=o,o=wgs84,a=!0),e=checkProj(e),s?transformer(o,e,s):(d={forward:function(b,_){return transformer(o,e,b,_)},inverse:function(b,_){return transformer(e,o,b,_)}},a&&(d.oProj=e),d)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A=65,I=73,O=79,V=86,Z=90;const mgrs={forward:forward$u,inverse:inverse$u,toPoint};function forward$u(o,e){return e=e||5,encode(LLtoUTM({lat:o[1],lon:o[0]}),e)}function inverse$u(o){var e=UTMtoLL(decode(o.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(o){var e=UTMtoLL(decode(o.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function degToRad(o){return o*(Math.PI/180)}function radToDeg(o){return 180*(o/Math.PI)}function LLtoUTM(o){var e=o.lat,s=o.lon,a=6378137,d=.00669438,b=.9996,_,_e,nt,rt,ct,dt,pt,bt=degToRad(e),xt=degToRad(s),wt,Tt;Tt=Math.floor((s+180)/6)+1,s===180&&(Tt=60),e>=56&&e<64&&s>=3&&s<12&&(Tt=32),e>=72&&e<84&&(s>=0&&s<9?Tt=31:s>=9&&s<21?Tt=33:s>=21&&s<33?Tt=35:s>=33&&s<42&&(Tt=37)),_=(Tt-1)*6-180+3,wt=degToRad(_),_e=d/(1-d),nt=a/Math.sqrt(1-d*Math.sin(bt)*Math.sin(bt)),rt=Math.tan(bt)*Math.tan(bt),ct=_e*Math.cos(bt)*Math.cos(bt),dt=Math.cos(bt)*(xt-wt),pt=a*((1-d/4-3*d*d/64-5*d*d*d/256)*bt-(3*d/8+3*d*d/32+45*d*d*d/1024)*Math.sin(2*bt)+(15*d*d/256+45*d*d*d/1024)*Math.sin(4*bt)-35*d*d*d/3072*Math.sin(6*bt));var Rt=b*nt*(dt+(1-rt+ct)*dt*dt*dt/6+(5-18*rt+rt*rt+72*ct-58*_e)*dt*dt*dt*dt*dt/120)+5e5,Mt=b*(pt+nt*Math.tan(bt)*(dt*dt/2+(5-rt+9*ct+4*ct*ct)*dt*dt*dt*dt/24+(61-58*rt+rt*rt+600*ct-330*_e)*dt*dt*dt*dt*dt*dt/720));return e<0&&(Mt+=1e7),{northing:Math.round(Mt),easting:Math.round(Rt),zoneNumber:Tt,zoneLetter:getLetterDesignator(e)}}function UTMtoLL(o){var e=o.northing,s=o.easting,a=o.zoneLetter,d=o.zoneNumber;if(d<0||d>60)return null;var b=.9996,_=6378137,_e=.00669438,nt,rt=(1-Math.sqrt(1-_e))/(1+Math.sqrt(1-_e)),ct,dt,pt,bt,xt,wt,Tt,Rt,Mt,Et=s-5e5,$t=e;a<"N"&&($t-=1e7),Tt=(d-1)*6-180+3,nt=_e/(1-_e),wt=$t/b,Rt=wt/(_*(1-_e/4-3*_e*_e/64-5*_e*_e*_e/256)),Mt=Rt+(3*rt/2-27*rt*rt*rt/32)*Math.sin(2*Rt)+(21*rt*rt/16-55*rt*rt*rt*rt/32)*Math.sin(4*Rt)+151*rt*rt*rt/96*Math.sin(6*Rt),ct=_/Math.sqrt(1-_e*Math.sin(Mt)*Math.sin(Mt)),dt=Math.tan(Mt)*Math.tan(Mt),pt=nt*Math.cos(Mt)*Math.cos(Mt),bt=_*(1-_e)/Math.pow(1-_e*Math.sin(Mt)*Math.sin(Mt),1.5),xt=Et/(ct*b);var Xt=Mt-ct*Math.tan(Mt)/bt*(xt*xt/2-(5+3*dt+10*pt-4*pt*pt-9*nt)*xt*xt*xt*xt/24+(61+90*dt+298*pt+45*dt*dt-252*nt-3*pt*pt)*xt*xt*xt*xt*xt*xt/720);Xt=radToDeg(Xt);var Zt=(xt-(1+2*dt+pt)*xt*xt*xt/6+(5-2*pt+28*dt-3*pt*pt+8*nt+24*dt*dt)*xt*xt*xt*xt*xt/120)/Math.cos(Mt);Zt=Tt+radToDeg(Zt);var Nt;if(o.accuracy){var Jt=UTMtoLL({northing:o.northing+o.accuracy,easting:o.easting+o.accuracy,zoneLetter:o.zoneLetter,zoneNumber:o.zoneNumber});Nt={top:Jt.lat,right:Jt.lon,bottom:Xt,left:Zt}}else Nt={lat:Xt,lon:Zt};return Nt}function getLetterDesignator(o){var e="Z";return 84>=o&&o>=72?e="X":72>o&&o>=64?e="W":64>o&&o>=56?e="V":56>o&&o>=48?e="U":48>o&&o>=40?e="T":40>o&&o>=32?e="S":32>o&&o>=24?e="R":24>o&&o>=16?e="Q":16>o&&o>=8?e="P":8>o&&o>=0?e="N":0>o&&o>=-8?e="M":-8>o&&o>=-16?e="L":-16>o&&o>=-24?e="K":-24>o&&o>=-32?e="J":-32>o&&o>=-40?e="H":-40>o&&o>=-48?e="G":-48>o&&o>=-56?e="F":-56>o&&o>=-64?e="E":-64>o&&o>=-72?e="D":-72>o&&o>=-80&&(e="C"),e}function encode(o,e){var s="00000"+o.easting,a="00000"+o.northing;return o.zoneNumber+o.zoneLetter+get100kID(o.easting,o.northing,o.zoneNumber)+s.substr(s.length-5,e)+a.substr(a.length-5,e)}function get100kID(o,e,s){var a=get100kSetForZone(s),d=Math.floor(o/1e5),b=Math.floor(e/1e5)%20;return getLetter100kID(d,b,a)}function get100kSetForZone(o){var e=o%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(o,e,s){var a=s-1,d=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(a),b=SET_ORIGIN_ROW_LETTERS.charCodeAt(a),_=d+o-1,_e=b+e,nt=!1;_>Z&&(_=_-Z+A-1,nt=!0),(_===I||d<I&&_>I||(_>I||d<I)&&nt)&&_++,(_===O||d<O&&_>O||(_>O||d<O)&&nt)&&(_++,_===I&&_++),_>Z&&(_=_-Z+A-1),_e>V?(_e=_e-V+A-1,nt=!0):nt=!1,(_e===I||b<I&&_e>I||(_e>I||b<I)&&nt)&&_e++,(_e===O||b<O&&_e>O||(_e>O||b<O)&&nt)&&(_e++,_e===I&&_e++),_e>V&&(_e=_e-V+A-1);var rt=String.fromCharCode(_)+String.fromCharCode(_e);return rt}function decode(o){if(o&&o.length===0)throw"MGRSPoint coverting from nothing";for(var e=o.length,s=null,a="",d,b=0;!/[A-Z]/.test(d=o.charAt(b));){if(b>=2)throw"MGRSPoint bad conversion from: "+o;a+=d,b++}var _=parseInt(a,10);if(b===0||b+3>e)throw"MGRSPoint bad conversion from: "+o;var _e=o.charAt(b++);if(_e<="A"||_e==="B"||_e==="Y"||_e>="Z"||_e==="I"||_e==="O")throw"MGRSPoint zone letter "+_e+" not handled: "+o;s=o.substring(b,b+=2);for(var nt=get100kSetForZone(_),rt=getEastingFromChar(s.charAt(0),nt),ct=getNorthingFromChar(s.charAt(1),nt);ct<getMinNorthing(_e);)ct+=2e6;var dt=e-b;if(dt%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+o;var pt=dt/2,bt=0,xt=0,wt,Tt,Rt,Mt,Et;return pt>0&&(wt=1e5/Math.pow(10,pt),Tt=o.substring(b,b+pt),bt=parseFloat(Tt)*wt,Rt=o.substring(b+pt),xt=parseFloat(Rt)*wt),Mt=bt+rt,Et=xt+ct,{easting:Mt,northing:Et,zoneLetter:_e,zoneNumber:_,accuracy:wt}}function getEastingFromChar(o,e){for(var s=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),a=1e5,d=!1;s!==o.charCodeAt(0);){if(s++,s===I&&s++,s===O&&s++,s>Z){if(d)throw"Bad character: "+o;s=A,d=!0}a+=1e5}return a}function getNorthingFromChar(o,e){if(o>"V")throw"MGRSPoint given invalid Northing "+o;for(var s=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),a=0,d=!1;s!==o.charCodeAt(0);){if(s++,s===I&&s++,s===O&&s++,s>V){if(d)throw"Bad character: "+o;s=A,d=!0}a+=1e5}return a}function getMinNorthing(o){var e;switch(o){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+o}function Point(o,e,s){if(!(this instanceof Point))return new Point(o,e,s);if(Array.isArray(o))this.x=o[0],this.y=o[1],this.z=o[2]||0;else if(typeof o=="object")this.x=o.x,this.y=o.y,this.z=o.z||0;else if(typeof o=="string"&&typeof e>"u"){var a=o.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=o,this.y=e,this.z=s||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(o){return new Point(toPoint(o))};Point.prototype.toMGRS=function(o){return forward$u([this.x,this.y],o)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(o){var e=[];e[0]=C00-o*(C02+o*(C04+o*(C06+o*C08))),e[1]=o*(C22-o*(C04+o*(C06+o*C08)));var s=o*o;return e[2]=s*(C44-o*(C46+o*C48)),s*=o,e[3]=s*(C66-o*C68),e[4]=s*o*C88,e}function pj_mlfn(o,e,s,a){return s*=e,e*=e,a[0]*o-s*(a[1]+e*(a[2]+e*(a[3]+e*a[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(o,e,s){for(var a=1/(1-e),d=o,b=MAX_ITER$3;b;--b){var _=Math.sin(d),_e=1-e*_*_;if(_e=(pj_mlfn(d,_,Math.cos(d),s)-o)*(_e*Math.sqrt(_e))*a,d-=_e,Math.abs(_e)<EPSLN)return d}return d}function init$v(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$t(o){var e=o.x,s=o.y,a=adjust_lon(e-this.long0),d,b,_,_e=Math.sin(s),nt=Math.cos(s);if(this.es){var ct=nt*a,dt=Math.pow(ct,2),pt=this.ep2*Math.pow(nt,2),bt=Math.pow(pt,2),xt=Math.abs(nt)>EPSLN?Math.tan(s):0,wt=Math.pow(xt,2),Tt=Math.pow(wt,2);d=1-this.es*Math.pow(_e,2),ct=ct/Math.sqrt(d);var Rt=pj_mlfn(s,_e,nt,this.en);b=this.a*(this.k0*ct*(1+dt/6*(1-wt+pt+dt/20*(5-18*wt+Tt+14*pt-58*wt*pt+dt/42*(61+179*Tt-Tt*wt-479*wt)))))+this.x0,_=this.a*(this.k0*(Rt-this.ml0+_e*a*ct/2*(1+dt/12*(5-wt+9*pt+4*bt+dt/30*(61+Tt-58*wt+270*pt-330*wt*pt+dt/56*(1385+543*Tt-Tt*wt-3111*wt))))))+this.y0}else{var rt=nt*Math.sin(a);if(Math.abs(Math.abs(rt)-1)<EPSLN)return 93;if(b=.5*this.a*this.k0*Math.log((1+rt)/(1-rt))+this.x0,_=nt*Math.cos(a)/Math.sqrt(1-Math.pow(rt,2)),rt=Math.abs(_),rt>=1){if(rt-1>EPSLN)return 93;_=0}else _=Math.acos(_);s<0&&(_=-_),_=this.a*this.k0*(_-this.lat0)+this.y0}return o.x=b,o.y=_,o}function inverse$t(o){var e,s,a,d,b=(o.x-this.x0)*(1/this.a),_=(o.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+_/this.k0,s=pj_inv_mlfn(e,this.es,this.en),Math.abs(s)<HALF_PI){var dt=Math.sin(s),pt=Math.cos(s),bt=Math.abs(pt)>EPSLN?Math.tan(s):0,xt=this.ep2*Math.pow(pt,2),wt=Math.pow(xt,2),Tt=Math.pow(bt,2),Rt=Math.pow(Tt,2);e=1-this.es*Math.pow(dt,2);var Mt=b*Math.sqrt(e)/this.k0,Et=Math.pow(Mt,2);e=e*bt,a=s-e*Et/(1-this.es)*.5*(1-Et/12*(5+3*Tt-9*xt*Tt+xt-4*wt-Et/30*(61+90*Tt-252*xt*Tt+45*Rt+46*xt-Et/56*(1385+3633*Tt+4095*Rt+1574*Rt*Tt)))),d=adjust_lon(this.long0+Mt*(1-Et/6*(1+2*Tt+xt-Et/20*(5+28*Tt+24*Rt+8*xt*Tt+6*xt-Et/42*(61+662*Tt+1320*Rt+720*Rt*Tt))))/pt)}else a=HALF_PI*sign(_),d=0;else{var _e=Math.exp(b/this.k0),nt=.5*(_e-1/_e),rt=this.lat0+_/this.k0,ct=Math.cos(rt);e=Math.sqrt((1-Math.pow(ct,2))/(1+Math.pow(nt,2))),a=Math.asin(e),_<0&&(a=-a),nt===0&&ct===0?d=0:d=adjust_lon(Math.atan2(nt,ct)+this.long0)}return o.x=d,o.y=a,o}var names$v=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tmerc={init:init$v,forward:forward$t,inverse:inverse$t,names:names$v};function sinh(o){var e=Math.exp(o);return e=(e-1/e)/2,e}function hypot(o,e){o=Math.abs(o),e=Math.abs(e);var s=Math.max(o,e),a=Math.min(o,e)/(s||1);return s*Math.sqrt(1+Math.pow(a,2))}function log1py(o){var e=1+o,s=e-1;return s===0?o:o*Math.log(e)/s}function asinhy(o){var e=Math.abs(o);return e=log1py(e*(1+e/(hypot(1,e)+1))),o<0?-e:e}function gatg(o,e){for(var s=2*Math.cos(2*e),a=o.length-1,d=o[a],b=0,_;--a>=0;)_=-b+s*d+o[a],b=d,d=_;return e+_*Math.sin(2*e)}function clens(o,e){for(var s=2*Math.cos(e),a=o.length-1,d=o[a],b=0,_;--a>=0;)_=-b+s*d+o[a],b=d,d=_;return Math.sin(e)*_}function cosh(o){var e=Math.exp(o);return e=(e+1/e)/2,e}function clens_cmplx(o,e,s){for(var a=Math.sin(e),d=Math.cos(e),b=sinh(s),_=cosh(s),_e=2*d*_,nt=-2*a*b,rt=o.length-1,ct=o[rt],dt=0,pt=0,bt=0,xt,wt;--rt>=0;)xt=pt,wt=dt,pt=ct,dt=bt,ct=-xt+_e*pt-nt*dt+o[rt],bt=-wt+nt*pt+_e*dt;return _e=a*_,nt=d*b,[_e*ct-nt*bt,_e*bt+nt*ct]}function init$u(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var o=this.es/(1+Math.sqrt(1-this.es)),e=o/(2-o),s=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),s=s*e,this.cgb[1]=s*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=s*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),s=s*e,this.cgb[2]=s*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=s*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),s=s*e,this.cgb[3]=s*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=s*(1237/630+e*(-12/5+e*(-24832/14175))),s=s*e,this.cgb[4]=s*(4174/315+e*(-144838/6237)),this.cbg[4]=s*(-734/315+e*(109598/31185)),s=s*e,this.cgb[5]=s*(601676/22275),this.cbg[5]=s*(444337/155925),s=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+s*(1/4+s*(1/64+s/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=s*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=s*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),s=s*e,this.utg[2]=s*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=s*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),s=s*e,this.utg[3]=s*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=s*(49561/161280+e*(-179/168+e*(6601661/7257600))),s=s*e,this.utg[4]=s*(-4583/161280+e*(108847/3991680)),this.gtu[4]=s*(34729/80640+e*(-3418889/1995840)),s=s*e,this.utg[5]=s*(-20648693/638668800),this.gtu[5]=s*(212378941/319334400);var a=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(a+clens(this.gtu,2*a))}function forward$s(o){var e=adjust_lon(o.x-this.long0),s=o.y;s=gatg(this.cbg,s);var a=Math.sin(s),d=Math.cos(s),b=Math.sin(e),_=Math.cos(e);s=Math.atan2(a,_*d),e=Math.atan2(b*d,hypot(a,d*_)),e=asinhy(Math.tan(e));var _e=clens_cmplx(this.gtu,2*s,2*e);s=s+_e[0],e=e+_e[1];var nt,rt;return Math.abs(e)<=2.623395162778?(nt=this.a*(this.Qn*e)+this.x0,rt=this.a*(this.Qn*s+this.Zb)+this.y0):(nt=1/0,rt=1/0),o.x=nt,o.y=rt,o}function inverse$s(o){var e=(o.x-this.x0)*(1/this.a),s=(o.y-this.y0)*(1/this.a);s=(s-this.Zb)/this.Qn,e=e/this.Qn;var a,d;if(Math.abs(e)<=2.623395162778){var b=clens_cmplx(this.utg,2*s,2*e);s=s+b[0],e=e+b[1],e=Math.atan(sinh(e));var _=Math.sin(s),_e=Math.cos(s),nt=Math.sin(e),rt=Math.cos(e);s=Math.atan2(_*rt,hypot(nt,rt*_e)),e=Math.atan2(nt,rt*_e),a=adjust_lon(e+this.long0),d=gatg(this.cgb,s)}else a=1/0,d=1/0;return o.x=a,o.y=d,o}var names$u=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const etmerc={init:init$u,forward:forward$s,inverse:inverse$s,names:names$u};function adjust_zone(o,e){if(o===void 0){if(o=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,o<0)return 0;if(o>60)return 60}return o}var dependsOn="etmerc";function init$t(){var o=adjust_zone(this.zone,this.long0);if(o===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(o)-183)*D2R$1,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$t=["Universal Transverse Mercator System","utm"];const utm={init:init$t,names:names$t,dependsOn};function srat(o,e){return Math.pow((1-o)/(1+o),e)}var MAX_ITER$2=20;function init$s(){var o=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*o*o),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(o/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*o,this.ratexp))}function forward$r(o){var e=o.x,s=o.y;return o.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*s+FORTPI),this.C)*srat(this.e*Math.sin(s),this.ratexp))-HALF_PI,o.x=this.C*e,o}function inverse$r(o){for(var e=1e-14,s=o.x/this.C,a=o.y,d=Math.pow(Math.tan(.5*a+FORTPI)/this.K,1/this.C),b=MAX_ITER$2;b>0&&(a=2*Math.atan(d*srat(this.e*Math.sin(o.y),-.5*this.e))-HALF_PI,!(Math.abs(a-o.y)<e));--b)o.y=a;return b?(o.x=s,o.y=a,o):null}var names$s=["gauss"];const gauss={init:init$s,forward:forward$r,inverse:inverse$r,names:names$s};function init$r(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function forward$q(o){var e,s,a,d;return o.x=adjust_lon(o.x-this.long0),gauss.forward.apply(this,[o]),e=Math.sin(o.y),s=Math.cos(o.y),a=Math.cos(o.x),d=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*s*a),o.x=d*s*Math.sin(o.x),o.y=d*(this.cosc0*e-this.sinc0*s*a),o.x=this.a*o.x+this.x0,o.y=this.a*o.y+this.y0,o}function inverse$q(o){var e,s,a,d,b;if(o.x=(o.x-this.x0)/this.a,o.y=(o.y-this.y0)/this.a,o.x/=this.k0,o.y/=this.k0,b=hypot(o.x,o.y)){var _=2*Math.atan2(b,this.R2);e=Math.sin(_),s=Math.cos(_),d=Math.asin(s*this.sinc0+o.y*e*this.cosc0/b),a=Math.atan2(o.x*e,b*this.cosc0*s-o.y*this.sinc0*e)}else d=this.phic0,a=0;return o.x=a,o.y=d,gauss.inverse.apply(this,[o]),o.x=adjust_lon(o.x+this.long0),o}var names$r=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const sterea={init:init$r,forward:forward$q,inverse:inverse$q,names:names$r};function ssfn_(o,e,s){return e*=s,Math.tan(.5*(HALF_PI+o))*Math.pow((1-e)/(1+e),.5*s)}function init$q(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&Math.abs(Math.cos(this.lat_ts))>EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function forward$p(o){var e=o.x,s=o.y,a=Math.sin(s),d=Math.cos(s),b,_,_e,nt,rt,ct,dt=adjust_lon(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=EPSLN&&Math.abs(s+this.lat0)<=EPSLN?(o.x=NaN,o.y=NaN,o):this.sphere?(b=2*this.k0/(1+this.sinlat0*a+this.coslat0*d*Math.cos(dt)),o.x=this.a*b*d*Math.sin(dt)+this.x0,o.y=this.a*b*(this.coslat0*a-this.sinlat0*d*Math.cos(dt))+this.y0,o):(_=2*Math.atan(this.ssfn_(s,a,this.e))-HALF_PI,nt=Math.cos(_),_e=Math.sin(_),Math.abs(this.coslat0)<=EPSLN?(rt=tsfnz(this.e,s*this.con,this.con*a),ct=2*this.a*this.k0*rt/this.cons,o.x=this.x0+ct*Math.sin(e-this.long0),o.y=this.y0-this.con*ct*Math.cos(e-this.long0),o):(Math.abs(this.sinlat0)<EPSLN?(b=2*this.a*this.k0/(1+nt*Math.cos(dt)),o.y=b*_e):(b=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*_e+this.cosX0*nt*Math.cos(dt))),o.y=b*(this.cosX0*_e-this.sinX0*nt*Math.cos(dt))+this.y0),o.x=b*nt*Math.sin(dt)+this.x0,o))}function inverse$p(o){o.x-=this.x0,o.y-=this.y0;var e,s,a,d,b,_=Math.sqrt(o.x*o.x+o.y*o.y);if(this.sphere){var _e=2*Math.atan(_/(2*this.a*this.k0));return e=this.long0,s=this.lat0,_<=EPSLN?(o.x=e,o.y=s,o):(s=Math.asin(Math.cos(_e)*this.sinlat0+o.y*Math.sin(_e)*this.coslat0/_),Math.abs(this.coslat0)<EPSLN?this.lat0>0?e=adjust_lon(this.long0+Math.atan2(o.x,-1*o.y)):e=adjust_lon(this.long0+Math.atan2(o.x,o.y)):e=adjust_lon(this.long0+Math.atan2(o.x*Math.sin(_e),_*this.coslat0*Math.cos(_e)-o.y*this.sinlat0*Math.sin(_e))),o.x=e,o.y=s,o)}else if(Math.abs(this.coslat0)<=EPSLN){if(_<=EPSLN)return s=this.lat0,e=this.long0,o.x=e,o.y=s,o;o.x*=this.con,o.y*=this.con,a=_*this.cons/(2*this.a*this.k0),s=this.con*phi2z(this.e,a),e=this.con*adjust_lon(this.con*this.long0+Math.atan2(o.x,-1*o.y))}else d=2*Math.atan(_*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,_<=EPSLN?b=this.X0:(b=Math.asin(Math.cos(d)*this.sinX0+o.y*Math.sin(d)*this.cosX0/_),e=adjust_lon(this.long0+Math.atan2(o.x*Math.sin(d),_*this.cosX0*Math.cos(d)-o.y*this.sinX0*Math.sin(d)))),s=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+b)));return o.x=e,o.y=s,o}var names$q=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const stere={init:init$q,forward:forward$p,inverse:inverse$p,names:names$q,ssfn_};function init$p(){var o=this.lat0;this.lambda0=this.long0;var e=Math.sin(o),s=this.a,a=this.rf,d=1/a,b=2*d-Math.pow(d,2),_=this.e=Math.sqrt(b);this.R=this.k0*s*Math.sqrt(1-b)/(1-b*Math.pow(e,2)),this.alpha=Math.sqrt(1+b/(1-b)*Math.pow(Math.cos(o),4)),this.b0=Math.asin(e/this.alpha);var _e=Math.log(Math.tan(Math.PI/4+this.b0/2)),nt=Math.log(Math.tan(Math.PI/4+o/2)),rt=Math.log((1+_*e)/(1-_*e));this.K=_e-this.alpha*nt+this.alpha*_/2*rt}function forward$o(o){var e=Math.log(Math.tan(Math.PI/4-o.y/2)),s=this.e/2*Math.log((1+this.e*Math.sin(o.y))/(1-this.e*Math.sin(o.y))),a=-this.alpha*(e+s)+this.K,d=2*(Math.atan(Math.exp(a))-Math.PI/4),b=this.alpha*(o.x-this.lambda0),_=Math.atan(Math.sin(b)/(Math.sin(this.b0)*Math.tan(d)+Math.cos(this.b0)*Math.cos(b))),_e=Math.asin(Math.cos(this.b0)*Math.sin(d)-Math.sin(this.b0)*Math.cos(d)*Math.cos(b));return o.y=this.R/2*Math.log((1+Math.sin(_e))/(1-Math.sin(_e)))+this.y0,o.x=this.R*_+this.x0,o}function inverse$o(o){for(var e=o.x-this.x0,s=o.y-this.y0,a=e/this.R,d=2*(Math.atan(Math.exp(s/this.R))-Math.PI/4),b=Math.asin(Math.cos(this.b0)*Math.sin(d)+Math.sin(this.b0)*Math.cos(d)*Math.cos(a)),_=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(d))),_e=this.lambda0+_/this.alpha,nt=0,rt=b,ct=-1e3,dt=0;Math.abs(rt-ct)>1e-7;){if(++dt>20)return;nt=1/this.alpha*(Math.log(Math.tan(Math.PI/4+b/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(rt))/2)),ct=rt,rt=2*Math.atan(Math.exp(nt))-Math.PI/2}return o.x=_e,o.y=rt,o}var names$p=["somerc"];const somerc={init:init$p,forward:forward$o,inverse:inverse$o,names:names$p};var TOL=1e-7;function isTypeA(o){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],s=typeof o.PROJECTION=="object"?Object.keys(o.PROJECTION)[0]:o.PROJECTION;return"no_uoff"in o||"no_off"in o||e.indexOf(s)!==-1}function init$o(){var o,e,s,a,d,b,_,_e,nt,rt,ct=0,dt,pt=0,bt=0,xt=0,wt=0,Tt=0,Rt=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var Mt=!1;"alpha"in this&&(Mt=!0);var Et=!1;if("rectified_grid_angle"in this&&(Et=!0),Mt&&(Rt=this.alpha),Et&&(ct=this.rectified_grid_angle*D2R$1),Mt||Et)pt=this.longc;else if(bt=this.long1,wt=this.lat1,xt=this.long2,Tt=this.lat2,Math.abs(wt-Tt)<=TOL||(o=Math.abs(wt))<=TOL||Math.abs(o-HALF_PI)<=TOL||Math.abs(Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(Tt)-HALF_PI)<=TOL)throw new Error;var $t=1-this.es;e=Math.sqrt($t),Math.abs(this.lat0)>EPSLN?(_e=Math.sin(this.lat0),s=Math.cos(this.lat0),o=1-this.es*_e*_e,this.B=s*s,this.B=Math.sqrt(1+this.es*this.B*this.B/$t),this.A=this.B*this.k0*e/o,a=this.B*e/(s*Math.sqrt(o)),d=a*a-1,d<=0?d=0:(d=Math.sqrt(d),this.lat0<0&&(d=-d)),this.E=d+=a,this.E*=Math.pow(tsfnz(this.e,this.lat0,_e),this.B)):(this.B=1/e,this.A=this.k0,this.E=a=d=1),Mt||Et?(Mt?(dt=Math.asin(Math.sin(Rt)/a),Et||(ct=Rt)):(dt=ct,Rt=Math.asin(a*Math.sin(dt))),this.lam0=pt-Math.asin(.5*(d-1/d)*Math.tan(dt))/this.B):(b=Math.pow(tsfnz(this.e,wt,Math.sin(wt)),this.B),_=Math.pow(tsfnz(this.e,Tt,Math.sin(Tt)),this.B),d=this.E/b,nt=(_-b)/(_+b),rt=this.E*this.E,rt=(rt-_*b)/(rt+_*b),o=bt-xt,o<-Math.pi?xt-=TWO_PI:o>Math.pi&&(xt+=TWO_PI),this.lam0=adjust_lon(.5*(bt+xt)-Math.atan(rt*Math.tan(.5*this.B*(bt-xt))/nt)/this.B),dt=Math.atan(2*Math.sin(this.B*adjust_lon(bt-this.lam0))/(d-1/d)),ct=Rt=Math.asin(a*Math.sin(dt))),this.singam=Math.sin(dt),this.cosgam=Math.cos(dt),this.sinrot=Math.sin(ct),this.cosrot=Math.cos(ct),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(Rt))),this.lat0<0&&(this.u_0=-this.u_0)),d=.5*dt,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-d)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+d))}function forward$n(o){var e={},s,a,d,b,_,_e,nt,rt;if(o.x=o.x-this.lam0,Math.abs(Math.abs(o.y)-HALF_PI)>EPSLN){if(_=this.E/Math.pow(tsfnz(this.e,o.y,Math.sin(o.y)),this.B),_e=1/_,s=.5*(_-_e),a=.5*(_+_e),b=Math.sin(this.B*o.x),d=(s*this.singam-b*this.cosgam)/a,Math.abs(Math.abs(d)-1)<EPSLN)throw new Error;rt=.5*this.ArB*Math.log((1-d)/(1+d)),_e=Math.cos(this.B*o.x),Math.abs(_e)<TOL?nt=this.A*o.x:nt=this.ArB*Math.atan2(s*this.cosgam+b*this.singam,_e)}else rt=o.y>0?this.v_pole_n:this.v_pole_s,nt=this.ArB*o.y;return this.no_rot?(e.x=nt,e.y=rt):(nt-=this.u_0,e.x=rt*this.cosrot+nt*this.sinrot,e.y=nt*this.cosrot-rt*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function inverse$n(o){var e,s,a,d,b,_,_e,nt={};if(o.x=(o.x-this.x0)*(1/this.a),o.y=(o.y-this.y0)*(1/this.a),this.no_rot?(s=o.y,e=o.x):(s=o.x*this.cosrot-o.y*this.sinrot,e=o.y*this.cosrot+o.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*s),d=.5*(a-1/a),b=.5*(a+1/a),_=Math.sin(this.BrA*e),_e=(_*this.cosgam+d*this.singam)/b,Math.abs(Math.abs(_e)-1)<EPSLN)nt.x=0,nt.y=_e<0?-HALF_PI:HALF_PI;else{if(nt.y=this.E/Math.sqrt((1+_e)/(1-_e)),nt.y=phi2z(this.e,Math.pow(nt.y,1/this.B)),nt.y===1/0)throw new Error;nt.x=-this.rB*Math.atan2(d*this.cosgam-_*this.singam,Math.cos(this.BrA*e))}return nt.x+=this.lam0,nt}var names$o=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const omerc={init:init$o,forward:forward$n,inverse:inverse$n,names:names$o};function init$n(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var o=this.b/this.a;this.e=Math.sqrt(1-o*o);var e=Math.sin(this.lat1),s=Math.cos(this.lat1),a=msfnz(this.e,e,s),d=tsfnz(this.e,this.lat1,e),b=Math.sin(this.lat2),_=Math.cos(this.lat2),_e=msfnz(this.e,b,_),nt=tsfnz(this.e,this.lat2,b),rt=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(a/_e)/Math.log(d/nt):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(d,this.ns)),this.rh=this.a*this.f0*Math.pow(rt,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function forward$m(o){var e=o.x,s=o.y;Math.abs(2*Math.abs(s)-Math.PI)<=EPSLN&&(s=sign(s)*(HALF_PI-2*EPSLN));var a=Math.abs(Math.abs(s)-HALF_PI),d,b;if(a>EPSLN)d=tsfnz(this.e,s,Math.sin(s)),b=this.a*this.f0*Math.pow(d,this.ns);else{if(a=s*this.ns,a<=0)return null;b=0}var _=this.ns*adjust_lon(e-this.long0);return o.x=this.k0*(b*Math.sin(_))+this.x0,o.y=this.k0*(this.rh-b*Math.cos(_))+this.y0,o}function inverse$m(o){var e,s,a,d,b,_=(o.x-this.x0)/this.k0,_e=this.rh-(o.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(_*_+_e*_e),s=1):(e=-Math.sqrt(_*_+_e*_e),s=-1);var nt=0;if(e!==0&&(nt=Math.atan2(s*_,s*_e)),e!==0||this.ns>0){if(s=1/this.ns,a=Math.pow(e/(this.a*this.f0),s),d=phi2z(this.e,a),d===-9999)return null}else d=-HALF_PI;return b=adjust_lon(nt/this.ns+this.long0),o.x=b,o.y=d,o}var names$n=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const lcc={init:init$n,forward:forward$m,inverse:inverse$m,names:names$n};function init$m(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$l(o){var e,s,a,d,b,_,_e,nt=o.x,rt=o.y,ct=adjust_lon(nt-this.long0);return e=Math.pow((1+this.e*Math.sin(rt))/(1-this.e*Math.sin(rt)),this.alfa*this.e/2),s=2*(Math.atan(this.k*Math.pow(Math.tan(rt/2+this.s45),this.alfa)/e)-this.s45),a=-ct*this.alfa,d=Math.asin(Math.cos(this.ad)*Math.sin(s)+Math.sin(this.ad)*Math.cos(s)*Math.cos(a)),b=Math.asin(Math.cos(s)*Math.sin(a)/Math.cos(d)),_=this.n*b,_e=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(d/2+this.s45),this.n),o.y=_e*Math.cos(_)/1,o.x=_e*Math.sin(_)/1,this.czech||(o.y*=-1,o.x*=-1),o}function inverse$l(o){var e,s,a,d,b,_,_e,nt,rt=o.x;o.x=o.y,o.y=rt,this.czech||(o.y*=-1,o.x*=-1),_=Math.sqrt(o.x*o.x+o.y*o.y),b=Math.atan2(o.y,o.x),d=b/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/_,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(d)),s=Math.asin(Math.cos(a)*Math.sin(d)/Math.cos(e)),o.x=this.long0-s/this.alfa,_e=e,nt=0;var ct=0;do o.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(_e))/(1-this.e*Math.sin(_e)),this.e/2))-this.s45),Math.abs(_e-o.y)<1e-10&&(nt=1),_e=o.y,ct+=1;while(nt===0&&ct<15);return ct>=15?null:o}var names$m=["Krovak","krovak"];const krovak={init:init$m,forward:forward$l,inverse:inverse$l,names:names$m};function mlfn(o,e,s,a,d){return o*d-e*Math.sin(2*d)+s*Math.sin(4*d)-a*Math.sin(6*d)}function e0fn(o){return 1-.25*o*(1+o/16*(3+1.25*o))}function e1fn(o){return .375*o*(1+.25*o*(1+.46875*o))}function e2fn(o){return .05859375*o*o*(1+.75*o)}function e3fn(o){return o*o*o*(35/3072)}function gN(o,e,s){var a=e*s;return o/Math.sqrt(1-a*a)}function adjust_lat(o){return Math.abs(o)<HALF_PI?o:o-sign(o)*Math.PI}function imlfn(o,e,s,a,d){var b,_;b=o/e;for(var _e=0;_e<15;_e++)if(_=(o-(e*b-s*Math.sin(2*b)+a*Math.sin(4*b)-d*Math.sin(6*b)))/(e-2*s*Math.cos(2*b)+4*a*Math.cos(4*b)-6*d*Math.cos(6*b)),b+=_,Math.abs(_)<=1e-10)return b;return NaN}function init$l(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$k(o){var e,s,a=o.x,d=o.y;if(a=adjust_lon(a-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(d)*Math.sin(a)),s=this.a*(Math.atan2(Math.tan(d),Math.cos(a))-this.lat0);else{var b=Math.sin(d),_=Math.cos(d),_e=gN(this.a,this.e,b),nt=Math.tan(d)*Math.tan(d),rt=a*Math.cos(d),ct=rt*rt,dt=this.es*_*_/(1-this.es),pt=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,d);e=_e*rt*(1-ct*nt*(1/6-(8-nt+8*dt)*ct/120)),s=pt-this.ml0+_e*b/_*ct*(.5+(5-nt+6*dt)*ct/24)}return o.x=e+this.x0,o.y=s+this.y0,o}function inverse$k(o){o.x-=this.x0,o.y-=this.y0;var e=o.x/this.a,s=o.y/this.a,a,d;if(this.sphere){var b=s+this.lat0;a=Math.asin(Math.sin(b)*Math.cos(e)),d=Math.atan2(Math.tan(e),Math.cos(b))}else{var _=this.ml0/this.a+s,_e=imlfn(_,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(_e)-HALF_PI)<=EPSLN)return o.x=this.long0,o.y=HALF_PI,s<0&&(o.y*=-1),o;var nt=gN(this.a,this.e,Math.sin(_e)),rt=nt*nt*nt/this.a/this.a*(1-this.es),ct=Math.pow(Math.tan(_e),2),dt=e*this.a/nt,pt=dt*dt;a=_e-nt*Math.tan(_e)/rt*dt*dt*(.5-(1+3*ct)*dt*dt/24),d=dt*(1-pt*(ct/3+(1+3*ct)*ct*pt/15))/Math.cos(_e)}return o.x=adjust_lon(d+this.long0),o.y=adjust_lat(a),o}var names$l=["Cassini","Cassini_Soldner","cass"];const cass={init:init$l,forward:forward$k,inverse:inverse$k,names:names$l};function qsfnz(o,e){var s;return o>1e-7?(s=o*e,(1-o*o)*(e/(1-s*s)-.5/o*Math.log((1-s)/(1+s)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$k(){var o=Math.abs(this.lat0);if(Math.abs(o-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(o)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$j(o){var e,s,a,d,b,_,_e,nt,rt,ct,dt=o.x,pt=o.y;if(dt=adjust_lon(dt-this.long0),this.sphere){if(b=Math.sin(pt),ct=Math.cos(pt),a=Math.cos(dt),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(s=this.mode===this.EQUIT?1+ct*a:1+this.sinph0*b+this.cosph0*ct*a,s<=EPSLN)return null;s=Math.sqrt(2/s),e=s*ct*Math.sin(dt),s*=this.mode===this.EQUIT?b:this.cosph0*b-this.sinph0*ct*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(pt+this.lat0)<EPSLN)return null;s=FORTPI-pt*.5,s=2*(this.mode===this.S_POLE?Math.cos(s):Math.sin(s)),e=s*Math.sin(dt),s*=a}}else{switch(_e=0,nt=0,rt=0,a=Math.cos(dt),d=Math.sin(dt),b=Math.sin(pt),_=qsfnz(this.e,b),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(_e=_/this.qp,nt=Math.sqrt(1-_e*_e)),this.mode){case this.OBLIQ:rt=1+this.sinb1*_e+this.cosb1*nt*a;break;case this.EQUIT:rt=1+nt*a;break;case this.N_POLE:rt=HALF_PI+pt,_=this.qp-_;break;case this.S_POLE:rt=pt-HALF_PI,_=this.qp+_;break}if(Math.abs(rt)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:rt=Math.sqrt(2/rt),this.mode===this.OBLIQ?s=this.ymf*rt*(this.cosb1*_e-this.sinb1*nt*a):s=(rt=Math.sqrt(2/(1+nt*a)))*_e*this.ymf,e=this.xmf*rt*nt*d;break;case this.N_POLE:case this.S_POLE:_>=0?(e=(rt=Math.sqrt(_))*d,s=a*(this.mode===this.S_POLE?rt:-rt)):e=s=0;break}}return o.x=this.a*e+this.x0,o.y=this.a*s+this.y0,o}function inverse$j(o){o.x-=this.x0,o.y-=this.y0;var e=o.x/this.a,s=o.y/this.a,a,d,b,_,_e,nt,rt;if(this.sphere){var ct=0,dt,pt=0;if(dt=Math.sqrt(e*e+s*s),d=dt*.5,d>1)return null;switch(d=2*Math.asin(d),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(pt=Math.sin(d),ct=Math.cos(d)),this.mode){case this.EQUIT:d=Math.abs(dt)<=EPSLN?0:Math.asin(s*pt/dt),e*=pt,s=ct*dt;break;case this.OBLIQ:d=Math.abs(dt)<=EPSLN?this.lat0:Math.asin(ct*this.sinph0+s*pt*this.cosph0/dt),e*=pt*this.cosph0,s=(ct-Math.sin(d)*this.sinph0)*dt;break;case this.N_POLE:s=-s,d=HALF_PI-d;break;case this.S_POLE:d-=HALF_PI;break}a=s===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,s)}else{if(rt=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,s*=this.dd,nt=Math.sqrt(e*e+s*s),nt<EPSLN)return o.x=this.long0,o.y=this.lat0,o;_=2*Math.asin(.5*nt/this.rq),b=Math.cos(_),e*=_=Math.sin(_),this.mode===this.OBLIQ?(rt=b*this.sinb1+s*_*this.cosb1/nt,_e=this.qp*rt,s=nt*this.cosb1*b-s*this.sinb1*_):(rt=s*_/nt,_e=this.qp*rt,s=nt*b)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),_e=e*e+s*s,!_e)return o.x=this.long0,o.y=this.lat0,o;rt=1-_e/this.qp,this.mode===this.S_POLE&&(rt=-rt)}a=Math.atan2(e,s),d=authlat(Math.asin(rt),this.apa)}return o.x=adjust_lon(this.long0+a),o.y=d,o}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(o){var e,s=[];return s[0]=o*P00,e=o*o,s[0]+=e*P01,s[1]=e*P10,e*=o,s[0]+=e*P02,s[1]+=e*P11,s[2]=e*P20,s}function authlat(o,e){var s=o+o;return o+e[0]*Math.sin(s)+e[1]*Math.sin(s+s)+e[2]*Math.sin(s+s+s)}var names$k=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const laea={init:init$k,forward:forward$j,inverse:inverse$j,names:names$k,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(o){return Math.abs(o)>1&&(o=o>1?1:-1),Math.asin(o)}function init$j(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function forward$i(o){var e=o.x,s=o.y;this.sin_phi=Math.sin(s),this.cos_phi=Math.cos(s);var a=qsfnz(this.e3,this.sin_phi),d=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,b=this.ns0*adjust_lon(e-this.long0),_=d*Math.sin(b)+this.x0,_e=this.rh-d*Math.cos(b)+this.y0;return o.x=_,o.y=_e,o}function inverse$i(o){var e,s,a,d,b,_;return o.x-=this.x0,o.y=this.rh-o.y+this.y0,this.ns0>=0?(e=Math.sqrt(o.x*o.x+o.y*o.y),a=1):(e=-Math.sqrt(o.x*o.x+o.y*o.y),a=-1),d=0,e!==0&&(d=Math.atan2(a*o.x,a*o.y)),a=e*this.ns0/this.a,this.sphere?_=Math.asin((this.c-a*a)/(2*this.ns0)):(s=(this.c-a*a)/this.ns0,_=this.phi1z(this.e3,s)),b=adjust_lon(d/this.ns0+this.long0),o.x=b,o.y=_,o}function phi1z(o,e){var s,a,d,b,_,_e=asinz(.5*e);if(o<EPSLN)return _e;for(var nt=o*o,rt=1;rt<=25;rt++)if(s=Math.sin(_e),a=Math.cos(_e),d=o*s,b=1-d*d,_=.5*b*b/a*(e/(1-nt)-s/b+.5/o*Math.log((1-d)/(1+d))),_e=_e+_,Math.abs(_)<=1e-7)return _e;return null}var names$j=["Albers_Conic_Equal_Area","Albers","aea"];const aea={init:init$j,forward:forward$i,inverse:inverse$i,names:names$j,phi1z};function init$i(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$h(o){var e,s,a,d,b,_,_e,nt,rt=o.x,ct=o.y;return a=adjust_lon(rt-this.long0),e=Math.sin(ct),s=Math.cos(ct),d=Math.cos(a),_=this.sin_p14*e+this.cos_p14*s*d,b=1,_>0||Math.abs(_)<=EPSLN?(_e=this.x0+this.a*b*s*Math.sin(a)/_,nt=this.y0+this.a*b*(this.cos_p14*e-this.sin_p14*s*d)/_):(_e=this.x0+this.infinity_dist*s*Math.sin(a),nt=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*s*d)),o.x=_e,o.y=nt,o}function inverse$h(o){var e,s,a,d,b,_;return o.x=(o.x-this.x0)/this.a,o.y=(o.y-this.y0)/this.a,o.x/=this.k0,o.y/=this.k0,(e=Math.sqrt(o.x*o.x+o.y*o.y))?(d=Math.atan2(e,this.rc),s=Math.sin(d),a=Math.cos(d),_=asinz(a*this.sin_p14+o.y*s*this.cos_p14/e),b=Math.atan2(o.x*s,e*this.cos_p14*a-o.y*this.sin_p14*s),b=adjust_lon(this.long0+b)):(_=this.phic0,b=0),o.x=b,o.y=_,o}var names$i=["gnom"];const gnom={init:init$i,forward:forward$h,inverse:inverse$h,names:names$i};function iqsfnz(o,e){var s=1-(1-o*o)/(2*o)*Math.log((1-o)/(1+o));if(Math.abs(Math.abs(e)-s)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var a=Math.asin(.5*e),d,b,_,_e,nt=0;nt<30;nt++)if(b=Math.sin(a),_=Math.cos(a),_e=o*b,d=Math.pow(1-_e*_e,2)/(2*_)*(e/(1-o*o)-b/(1-_e*_e)+.5/o*Math.log((1-_e)/(1+_e))),a+=d,Math.abs(d)<=1e-10)return a;return NaN}function init$h(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function forward$g(o){var e=o.x,s=o.y,a,d,b=adjust_lon(e-this.long0);if(this.sphere)a=this.x0+this.a*b*Math.cos(this.lat_ts),d=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var _=qsfnz(this.e,Math.sin(s));a=this.x0+this.a*this.k0*b,d=this.y0+this.a*_*.5/this.k0}return o.x=a,o.y=d,o}function inverse$g(o){o.x-=this.x0,o.y-=this.y0;var e,s;return this.sphere?(e=adjust_lon(this.long0+o.x/this.a/Math.cos(this.lat_ts)),s=Math.asin(o.y/this.a*Math.cos(this.lat_ts))):(s=iqsfnz(this.e,2*o.y*this.k0/this.a),e=adjust_lon(this.long0+o.x/(this.a*this.k0))),o.x=e,o.y=s,o}var names$h=["cea"];const cea={init:init$h,forward:forward$g,inverse:inverse$g,names:names$h};function init$g(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$f(o){var e=o.x,s=o.y,a=adjust_lon(e-this.long0),d=adjust_lat(s-this.lat0);return o.x=this.x0+this.a*a*this.rc,o.y=this.y0+this.a*d,o}function inverse$f(o){var e=o.x,s=o.y;return o.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),o.y=adjust_lat(this.lat0+(s-this.y0)/this.a),o}var names$g=["Equirectangular","Equidistant_Cylindrical","eqc"];const eqc={init:init$g,forward:forward$f,inverse:inverse$f,names:names$g};var MAX_ITER$1=20;function init$f(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$e(o){var e=o.x,s=o.y,a,d,b,_=adjust_lon(e-this.long0);if(b=_*Math.sin(s),this.sphere)Math.abs(s)<=EPSLN?(a=this.a*_,d=-1*this.a*this.lat0):(a=this.a*Math.sin(b)/Math.tan(s),d=this.a*(adjust_lat(s-this.lat0)+(1-Math.cos(b))/Math.tan(s)));else if(Math.abs(s)<=EPSLN)a=this.a*_,d=-1*this.ml0;else{var _e=gN(this.a,this.e,Math.sin(s))/Math.tan(s);a=_e*Math.sin(b),d=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+_e*(1-Math.cos(b))}return o.x=a+this.x0,o.y=d+this.y0,o}function inverse$e(o){var e,s,a,d,b,_,_e,nt,rt;if(a=o.x-this.x0,d=o.y-this.y0,this.sphere)if(Math.abs(d+this.a*this.lat0)<=EPSLN)e=adjust_lon(a/this.a+this.long0),s=0;else{_=this.lat0+d/this.a,_e=a*a/this.a/this.a+_*_,nt=_;var ct;for(b=MAX_ITER$1;b;--b)if(ct=Math.tan(nt),rt=-1*(_*(nt*ct+1)-nt-.5*(nt*nt+_e)*ct)/((nt-_)/ct-1),nt+=rt,Math.abs(rt)<=EPSLN){s=nt;break}e=adjust_lon(this.long0+Math.asin(a*Math.tan(nt)/this.a)/Math.sin(s))}else if(Math.abs(d+this.ml0)<=EPSLN)s=0,e=adjust_lon(this.long0+a/this.a);else{_=(this.ml0+d)/this.a,_e=a*a/this.a/this.a+_*_,nt=_;var dt,pt,bt,xt,wt;for(b=MAX_ITER$1;b;--b)if(wt=this.e*Math.sin(nt),dt=Math.sqrt(1-wt*wt)*Math.tan(nt),pt=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,nt),bt=this.e0-2*this.e1*Math.cos(2*nt)+4*this.e2*Math.cos(4*nt)-6*this.e3*Math.cos(6*nt),xt=pt/this.a,rt=(_*(dt*xt+1)-xt-.5*dt*(xt*xt+_e))/(this.es*Math.sin(2*nt)*(xt*xt+_e-2*_*xt)/(4*dt)+(_-xt)*(dt*bt-2/Math.sin(2*nt))-bt),nt-=rt,Math.abs(rt)<=EPSLN){s=nt;break}dt=Math.sqrt(1-this.es*Math.pow(Math.sin(s),2))*Math.tan(s),e=adjust_lon(this.long0+Math.asin(a*dt/this.a)/Math.sin(s))}return o.x=e,o.y=s,o}var names$f=["Polyconic","poly"];const poly={init:init$f,forward:forward$e,inverse:inverse$e,names:names$f};function init$e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$d(o){var e,s=o.x,a=o.y,d=a-this.lat0,b=s-this.long0,_=d/SEC_TO_RAD*1e-5,_e=b,nt=1,rt=0;for(e=1;e<=10;e++)nt=nt*_,rt=rt+this.A[e]*nt;var ct=rt,dt=_e,pt=1,bt=0,xt,wt,Tt=0,Rt=0;for(e=1;e<=6;e++)xt=pt*ct-bt*dt,wt=bt*ct+pt*dt,pt=xt,bt=wt,Tt=Tt+this.B_re[e]*pt-this.B_im[e]*bt,Rt=Rt+this.B_im[e]*pt+this.B_re[e]*bt;return o.x=Rt*this.a+this.x0,o.y=Tt*this.a+this.y0,o}function inverse$d(o){var e,s=o.x,a=o.y,d=s-this.x0,b=a-this.y0,_=b/this.a,_e=d/this.a,nt=1,rt=0,ct,dt,pt=0,bt=0;for(e=1;e<=6;e++)ct=nt*_-rt*_e,dt=rt*_+nt*_e,nt=ct,rt=dt,pt=pt+this.C_re[e]*nt-this.C_im[e]*rt,bt=bt+this.C_im[e]*nt+this.C_re[e]*rt;for(var xt=0;xt<this.iterations;xt++){var wt=pt,Tt=bt,Rt,Mt,Et=_,$t=_e;for(e=2;e<=6;e++)Rt=wt*pt-Tt*bt,Mt=Tt*pt+wt*bt,wt=Rt,Tt=Mt,Et=Et+(e-1)*(this.B_re[e]*wt-this.B_im[e]*Tt),$t=$t+(e-1)*(this.B_im[e]*wt+this.B_re[e]*Tt);wt=1,Tt=0;var Xt=this.B_re[1],Zt=this.B_im[1];for(e=2;e<=6;e++)Rt=wt*pt-Tt*bt,Mt=Tt*pt+wt*bt,wt=Rt,Tt=Mt,Xt=Xt+e*(this.B_re[e]*wt-this.B_im[e]*Tt),Zt=Zt+e*(this.B_im[e]*wt+this.B_re[e]*Tt);var Nt=Xt*Xt+Zt*Zt;pt=(Et*Xt+$t*Zt)/Nt,bt=($t*Xt-Et*Zt)/Nt}var Jt=pt,dn=bt,Pn=1,an=0;for(e=1;e<=9;e++)Pn=Pn*Jt,an=an+this.D[e]*Pn;var Vt=this.lat0+an*SEC_TO_RAD*1e5,ao=this.long0+dn;return o.x=ao,o.y=Vt,o}var names$e=["New_Zealand_Map_Grid","nzmg"];const nzmg={init:init$e,forward:forward$d,inverse:inverse$d,names:names$e};function init$d(){}function forward$c(o){var e=o.x,s=o.y,a=adjust_lon(e-this.long0),d=this.x0+this.a*a,b=this.y0+this.a*Math.log(Math.tan(Math.PI/4+s/2.5))*1.25;return o.x=d,o.y=b,o}function inverse$c(o){o.x-=this.x0,o.y-=this.y0;var e=adjust_lon(this.long0+o.x/this.a),s=2.5*(Math.atan(Math.exp(.8*o.y/this.a))-Math.PI/4);return o.x=e,o.y=s,o}var names$d=["Miller_Cylindrical","mill"];const mill={init:init$d,forward:forward$c,inverse:inverse$c,names:names$d};var MAX_ITER=20;function init$c(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$b(o){var e,s,a=o.x,d=o.y;if(a=adjust_lon(a-this.long0),this.sphere){if(!this.m)d=this.n!==1?Math.asin(this.n*Math.sin(d)):d;else for(var b=this.n*Math.sin(d),_=MAX_ITER;_;--_){var _e=(this.m*d+Math.sin(d)-b)/(this.m+Math.cos(d));if(d-=_e,Math.abs(_e)<EPSLN)break}e=this.a*this.C_x*a*(this.m+Math.cos(d)),s=this.a*this.C_y*d}else{var nt=Math.sin(d),rt=Math.cos(d);s=this.a*pj_mlfn(d,nt,rt,this.en),e=this.a*a*rt/Math.sqrt(1-this.es*nt*nt)}return o.x=e,o.y=s,o}function inverse$b(o){var e,s,a,d;return o.x-=this.x0,a=o.x/this.a,o.y-=this.y0,e=o.y/this.a,this.sphere?(e/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(e))),this.m?e=asinz((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=asinz(Math.sin(e)/this.n)),a=adjust_lon(a+this.long0),e=adjust_lat(e)):(e=pj_inv_mlfn(o.y/this.a,this.es,this.en),d=Math.abs(e),d<HALF_PI?(d=Math.sin(e),s=this.long0+o.x*Math.sqrt(1-this.es*d*d)/(this.a*Math.cos(e)),a=adjust_lon(s)):d-EPSLN<HALF_PI&&(a=this.long0)),o.x=a,o.y=e,o}var names$c=["Sinusoidal","sinu"];const sinu={init:init$c,forward:forward$b,inverse:inverse$b,names:names$c};function init$b(){}function forward$a(o){for(var e=o.x,s=o.y,a=adjust_lon(e-this.long0),d=s,b=Math.PI*Math.sin(s);;){var _=-(d+Math.sin(d)-b)/(1+Math.cos(d));if(d+=_,Math.abs(_)<EPSLN)break}d/=2,Math.PI/2-Math.abs(s)<EPSLN&&(a=0);var _e=.900316316158*this.a*a*Math.cos(d)+this.x0,nt=1.4142135623731*this.a*Math.sin(d)+this.y0;return o.x=_e,o.y=nt,o}function inverse$a(o){var e,s;o.x-=this.x0,o.y-=this.y0,s=o.y/(1.4142135623731*this.a),Math.abs(s)>.999999999999&&(s=.999999999999),e=Math.asin(s);var a=adjust_lon(this.long0+o.x/(.900316316158*this.a*Math.cos(e)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),s=(2*e+Math.sin(2*e))/Math.PI,Math.abs(s)>1&&(s=1);var d=Math.asin(s);return o.x=a,o.y=d,o}var names$b=["Mollweide","moll"];const moll={init:init$b,forward:forward$a,inverse:inverse$a,names:names$b};function init$a(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function forward$9(o){var e=o.x,s=o.y,a;if(this.sphere)a=this.a*(this.g-s);else{var d=mlfn(this.e0,this.e1,this.e2,this.e3,s);a=this.a*(this.g-d)}var b=this.ns*adjust_lon(e-this.long0),_=this.x0+a*Math.sin(b),_e=this.y0+this.rh-a*Math.cos(b);return o.x=_,o.y=_e,o}function inverse$9(o){o.x-=this.x0,o.y=this.rh-o.y+this.y0;var e,s,a,d;this.ns>=0?(s=Math.sqrt(o.x*o.x+o.y*o.y),e=1):(s=-Math.sqrt(o.x*o.x+o.y*o.y),e=-1);var b=0;if(s!==0&&(b=Math.atan2(e*o.x,e*o.y)),this.sphere)return d=adjust_lon(this.long0+b/this.ns),a=adjust_lat(this.g-s/this.a),o.x=d,o.y=a,o;var _=this.g-s/this.a;return a=imlfn(_,this.e0,this.e1,this.e2,this.e3),d=adjust_lon(this.long0+b/this.ns),o.x=d,o.y=a,o}var names$a=["Equidistant_Conic","eqdc"];const eqdc={init:init$a,forward:forward$9,inverse:inverse$9,names:names$a};function init$9(){this.R=this.a}function forward$8(o){var e=o.x,s=o.y,a=adjust_lon(e-this.long0),d,b;Math.abs(s)<=EPSLN&&(d=this.x0+this.R*a,b=this.y0);var _=asinz(2*Math.abs(s/Math.PI));(Math.abs(a)<=EPSLN||Math.abs(Math.abs(s)-HALF_PI)<=EPSLN)&&(d=this.x0,s>=0?b=this.y0+Math.PI*this.R*Math.tan(.5*_):b=this.y0+Math.PI*this.R*-Math.tan(.5*_));var _e=.5*Math.abs(Math.PI/a-a/Math.PI),nt=_e*_e,rt=Math.sin(_),ct=Math.cos(_),dt=ct/(rt+ct-1),pt=dt*dt,bt=dt*(2/rt-1),xt=bt*bt,wt=Math.PI*this.R*(_e*(dt-xt)+Math.sqrt(nt*(dt-xt)*(dt-xt)-(xt+nt)*(pt-xt)))/(xt+nt);a<0&&(wt=-wt),d=this.x0+wt;var Tt=nt+dt;return wt=Math.PI*this.R*(bt*Tt-_e*Math.sqrt((xt+nt)*(nt+1)-Tt*Tt))/(xt+nt),s>=0?b=this.y0+wt:b=this.y0-wt,o.x=d,o.y=b,o}function inverse$8(o){var e,s,a,d,b,_,_e,nt,rt,ct,dt,pt,bt;return o.x-=this.x0,o.y-=this.y0,dt=Math.PI*this.R,a=o.x/dt,d=o.y/dt,b=a*a+d*d,_=-Math.abs(d)*(1+b),_e=_-2*d*d+a*a,nt=-2*_+1+2*d*d+b*b,bt=d*d/nt+(2*_e*_e*_e/nt/nt/nt-9*_*_e/nt/nt)/27,rt=(_-_e*_e/3/nt)/nt,ct=2*Math.sqrt(-rt/3),dt=3*bt/rt/ct,Math.abs(dt)>1&&(dt>=0?dt=1:dt=-1),pt=Math.acos(dt)/3,o.y>=0?s=(-ct*Math.cos(pt+Math.PI/3)-_e/3/nt)*Math.PI:s=-(-ct*Math.cos(pt+Math.PI/3)-_e/3/nt)*Math.PI,Math.abs(a)<EPSLN?e=this.long0:e=adjust_lon(this.long0+Math.PI*(b-1+Math.sqrt(1+2*(a*a-d*d)+b*b))/2/a),o.x=e,o.y=s,o}var names$9=["Van_der_Grinten_I","VanDerGrinten","vandg"];const vandg={init:init$9,forward:forward$8,inverse:inverse$8,names:names$9};function init$8(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$7(o){var e=o.x,s=o.y,a=Math.sin(o.y),d=Math.cos(o.y),b=adjust_lon(e-this.long0),_,_e,nt,rt,ct,dt,pt,bt,xt,wt,Tt,Rt,Mt,Et,$t,Xt,Zt,Nt,Jt,dn,Pn,an,Vt;return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(o.x=this.x0+this.a*(HALF_PI-s)*Math.sin(b),o.y=this.y0-this.a*(HALF_PI-s)*Math.cos(b),o):Math.abs(this.sin_p12+1)<=EPSLN?(o.x=this.x0+this.a*(HALF_PI+s)*Math.sin(b),o.y=this.y0+this.a*(HALF_PI+s)*Math.cos(b),o):(Nt=this.sin_p12*a+this.cos_p12*d*Math.cos(b),Xt=Math.acos(Nt),Zt=Xt?Xt/Math.sin(Xt):1,o.x=this.x0+this.a*Zt*d*Math.sin(b),o.y=this.y0+this.a*Zt*(this.cos_p12*a-this.sin_p12*d*Math.cos(b)),o):(_=e0fn(this.es),_e=e1fn(this.es),nt=e2fn(this.es),rt=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(ct=this.a*mlfn(_,_e,nt,rt,HALF_PI),dt=this.a*mlfn(_,_e,nt,rt,s),o.x=this.x0+(ct-dt)*Math.sin(b),o.y=this.y0-(ct-dt)*Math.cos(b),o):Math.abs(this.sin_p12+1)<=EPSLN?(ct=this.a*mlfn(_,_e,nt,rt,HALF_PI),dt=this.a*mlfn(_,_e,nt,rt,s),o.x=this.x0+(ct+dt)*Math.sin(b),o.y=this.y0+(ct+dt)*Math.cos(b),o):(pt=a/d,bt=gN(this.a,this.e,this.sin_p12),xt=gN(this.a,this.e,a),wt=Math.atan((1-this.es)*pt+this.es*bt*this.sin_p12/(xt*d)),Tt=Math.atan2(Math.sin(b),this.cos_p12*Math.tan(wt)-this.sin_p12*Math.cos(b)),Tt===0?Jt=Math.asin(this.cos_p12*Math.sin(wt)-this.sin_p12*Math.cos(wt)):Math.abs(Math.abs(Tt)-Math.PI)<=EPSLN?Jt=-Math.asin(this.cos_p12*Math.sin(wt)-this.sin_p12*Math.cos(wt)):Jt=Math.asin(Math.sin(b)*Math.cos(wt)/Math.sin(Tt)),Rt=this.e*this.sin_p12/Math.sqrt(1-this.es),Mt=this.e*this.cos_p12*Math.cos(Tt)/Math.sqrt(1-this.es),Et=Rt*Mt,$t=Mt*Mt,dn=Jt*Jt,Pn=dn*Jt,an=Pn*Jt,Vt=an*Jt,Xt=bt*Jt*(1-dn*$t*(1-$t)/6+Pn/8*Et*(1-2*$t)+an/120*($t*(4-7*$t)-3*Rt*Rt*(1-7*$t))-Vt/48*Et),o.x=this.x0+Xt*Math.sin(Tt),o.y=this.y0+Xt*Math.cos(Tt),o))}function inverse$7(o){o.x-=this.x0,o.y-=this.y0;var e,s,a,d,b,_,_e,nt,rt,ct,dt,pt,bt,xt,wt,Tt,Rt,Mt,Et,$t,Xt,Zt,Nt,Jt;return this.sphere?(e=Math.sqrt(o.x*o.x+o.y*o.y),e>2*HALF_PI*this.a?void 0:(s=e/this.a,a=Math.sin(s),d=Math.cos(s),b=this.long0,Math.abs(e)<=EPSLN?_=this.lat0:(_=asinz(d*this.sin_p12+o.y*a*this.cos_p12/e),_e=Math.abs(this.lat0)-HALF_PI,Math.abs(_e)<=EPSLN?this.lat0>=0?b=adjust_lon(this.long0+Math.atan2(o.x,-o.y)):b=adjust_lon(this.long0-Math.atan2(-o.x,o.y)):b=adjust_lon(this.long0+Math.atan2(o.x*a,e*this.cos_p12*d-o.y*this.sin_p12*a))),o.x=b,o.y=_,o)):(nt=e0fn(this.es),rt=e1fn(this.es),ct=e2fn(this.es),dt=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(pt=this.a*mlfn(nt,rt,ct,dt,HALF_PI),e=Math.sqrt(o.x*o.x+o.y*o.y),bt=pt-e,_=imlfn(bt/this.a,nt,rt,ct,dt),b=adjust_lon(this.long0+Math.atan2(o.x,-1*o.y)),o.x=b,o.y=_,o):Math.abs(this.sin_p12+1)<=EPSLN?(pt=this.a*mlfn(nt,rt,ct,dt,HALF_PI),e=Math.sqrt(o.x*o.x+o.y*o.y),bt=e-pt,_=imlfn(bt/this.a,nt,rt,ct,dt),b=adjust_lon(this.long0+Math.atan2(o.x,o.y)),o.x=b,o.y=_,o):(e=Math.sqrt(o.x*o.x+o.y*o.y),Tt=Math.atan2(o.x,o.y),xt=gN(this.a,this.e,this.sin_p12),Rt=Math.cos(Tt),Mt=this.e*this.cos_p12*Rt,Et=-Mt*Mt/(1-this.es),$t=3*this.es*(1-Et)*this.sin_p12*this.cos_p12*Rt/(1-this.es),Xt=e/xt,Zt=Xt-Et*(1+Et)*Math.pow(Xt,3)/6-$t*(1+3*Et)*Math.pow(Xt,4)/24,Nt=1-Et*Zt*Zt/2-Xt*Zt*Zt*Zt/6,wt=Math.asin(this.sin_p12*Math.cos(Zt)+this.cos_p12*Math.sin(Zt)*Rt),b=adjust_lon(this.long0+Math.asin(Math.sin(Tt)*Math.sin(Zt)/Math.cos(wt))),Jt=Math.sin(wt),_=Math.atan2((Jt-this.es*Nt*this.sin_p12)*Math.tan(wt),Jt*(1-this.es)),o.x=b,o.y=_,o))}var names$8=["Azimuthal_Equidistant","aeqd"];const aeqd={init:init$8,forward:forward$7,inverse:inverse$7,names:names$8};function init$7(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$6(o){var e,s,a,d,b,_,_e,nt,rt=o.x,ct=o.y;return a=adjust_lon(rt-this.long0),e=Math.sin(ct),s=Math.cos(ct),d=Math.cos(a),_=this.sin_p14*e+this.cos_p14*s*d,b=1,(_>0||Math.abs(_)<=EPSLN)&&(_e=this.a*b*s*Math.sin(a),nt=this.y0+this.a*b*(this.cos_p14*e-this.sin_p14*s*d)),o.x=_e,o.y=nt,o}function inverse$6(o){var e,s,a,d,b,_,_e;return o.x-=this.x0,o.y-=this.y0,e=Math.sqrt(o.x*o.x+o.y*o.y),s=asinz(e/this.a),a=Math.sin(s),d=Math.cos(s),_=this.long0,Math.abs(e)<=EPSLN?(_e=this.lat0,o.x=_,o.y=_e,o):(_e=asinz(d*this.sin_p14+o.y*a*this.cos_p14/e),b=Math.abs(this.lat0)-HALF_PI,Math.abs(b)<=EPSLN?(this.lat0>=0?_=adjust_lon(this.long0+Math.atan2(o.x,-o.y)):_=adjust_lon(this.long0-Math.atan2(-o.x,o.y)),o.x=_,o.y=_e,o):(_=adjust_lon(this.long0+Math.atan2(o.x*a,e*this.cos_p14*d-o.y*this.sin_p14*a)),o.x=_,o.y=_e,o))}var names$7=["ortho"];const ortho={init:init$7,forward:forward$6,inverse:inverse$6,names:names$7};var FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$5(o){var e={x:0,y:0},s,a,d,b,_,_e,nt={value:0};if(o.x-=this.long0,this.es!==0?s=Math.atan(this.one_minus_f_squared*Math.tan(o.y)):s=o.y,a=o.x,this.face===FACE_ENUM.TOP)b=HALF_PI-s,a>=FORTPI&&a<=HALF_PI+FORTPI?(nt.value=AREA_ENUM.AREA_0,d=a-HALF_PI):a>HALF_PI+FORTPI||a<=-(HALF_PI+FORTPI)?(nt.value=AREA_ENUM.AREA_1,d=a>0?a-SPI:a+SPI):a>-(HALF_PI+FORTPI)&&a<=-FORTPI?(nt.value=AREA_ENUM.AREA_2,d=a+HALF_PI):(nt.value=AREA_ENUM.AREA_3,d=a);else if(this.face===FACE_ENUM.BOTTOM)b=HALF_PI+s,a>=FORTPI&&a<=HALF_PI+FORTPI?(nt.value=AREA_ENUM.AREA_0,d=-a+HALF_PI):a<FORTPI&&a>=-FORTPI?(nt.value=AREA_ENUM.AREA_1,d=-a):a<-FORTPI&&a>=-(HALF_PI+FORTPI)?(nt.value=AREA_ENUM.AREA_2,d=-a-HALF_PI):(nt.value=AREA_ENUM.AREA_3,d=a>0?-a+SPI:-a-SPI);else{var rt,ct,dt,pt,bt,xt,wt;this.face===FACE_ENUM.RIGHT?a=qsc_shift_lon_origin(a,+HALF_PI):this.face===FACE_ENUM.BACK?a=qsc_shift_lon_origin(a,+SPI):this.face===FACE_ENUM.LEFT&&(a=qsc_shift_lon_origin(a,-HALF_PI)),pt=Math.sin(s),bt=Math.cos(s),xt=Math.sin(a),wt=Math.cos(a),rt=bt*wt,ct=bt*xt,dt=pt,this.face===FACE_ENUM.FRONT?(b=Math.acos(rt),d=qsc_fwd_equat_face_theta(b,dt,ct,nt)):this.face===FACE_ENUM.RIGHT?(b=Math.acos(ct),d=qsc_fwd_equat_face_theta(b,dt,-rt,nt)):this.face===FACE_ENUM.BACK?(b=Math.acos(-rt),d=qsc_fwd_equat_face_theta(b,dt,-ct,nt)):this.face===FACE_ENUM.LEFT?(b=Math.acos(-ct),d=qsc_fwd_equat_face_theta(b,dt,rt,nt)):(b=d=0,nt.value=AREA_ENUM.AREA_0)}return _e=Math.atan(12/SPI*(d+Math.acos(Math.sin(d)*Math.cos(FORTPI))-HALF_PI)),_=Math.sqrt((1-Math.cos(b))/(Math.cos(_e)*Math.cos(_e))/(1-Math.cos(Math.atan(1/Math.cos(d))))),nt.value===AREA_ENUM.AREA_1?_e+=HALF_PI:nt.value===AREA_ENUM.AREA_2?_e+=SPI:nt.value===AREA_ENUM.AREA_3&&(_e+=1.5*SPI),e.x=_*Math.cos(_e),e.y=_*Math.sin(_e),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,o.x=e.x,o.y=e.y,o}function inverse$5(o){var e={lam:0,phi:0},s,a,d,b,_,_e,nt,rt,ct,dt={value:0};if(o.x=(o.x-this.x0)/this.a,o.y=(o.y-this.y0)/this.a,a=Math.atan(Math.sqrt(o.x*o.x+o.y*o.y)),s=Math.atan2(o.y,o.x),o.x>=0&&o.x>=Math.abs(o.y)?dt.value=AREA_ENUM.AREA_0:o.y>=0&&o.y>=Math.abs(o.x)?(dt.value=AREA_ENUM.AREA_1,s-=HALF_PI):o.x<0&&-o.x>=Math.abs(o.y)?(dt.value=AREA_ENUM.AREA_2,s=s<0?s+SPI:s-SPI):(dt.value=AREA_ENUM.AREA_3,s+=HALF_PI),ct=SPI/12*Math.tan(s),_=Math.sin(ct)/(Math.cos(ct)-1/Math.sqrt(2)),_e=Math.atan(_),d=Math.cos(s),b=Math.tan(a),nt=1-d*d*b*b*(1-Math.cos(Math.atan(1/Math.cos(_e)))),nt<-1?nt=-1:nt>1&&(nt=1),this.face===FACE_ENUM.TOP)rt=Math.acos(nt),e.phi=HALF_PI-rt,dt.value===AREA_ENUM.AREA_0?e.lam=_e+HALF_PI:dt.value===AREA_ENUM.AREA_1?e.lam=_e<0?_e+SPI:_e-SPI:dt.value===AREA_ENUM.AREA_2?e.lam=_e-HALF_PI:e.lam=_e;else if(this.face===FACE_ENUM.BOTTOM)rt=Math.acos(nt),e.phi=rt-HALF_PI,dt.value===AREA_ENUM.AREA_0?e.lam=-_e+HALF_PI:dt.value===AREA_ENUM.AREA_1?e.lam=-_e:dt.value===AREA_ENUM.AREA_2?e.lam=-_e-HALF_PI:e.lam=_e<0?-_e-SPI:-_e+SPI;else{var pt,bt,xt;pt=nt,ct=pt*pt,ct>=1?xt=0:xt=Math.sqrt(1-ct)*Math.sin(_e),ct+=xt*xt,ct>=1?bt=0:bt=Math.sqrt(1-ct),dt.value===AREA_ENUM.AREA_1?(ct=bt,bt=-xt,xt=ct):dt.value===AREA_ENUM.AREA_2?(bt=-bt,xt=-xt):dt.value===AREA_ENUM.AREA_3&&(ct=bt,bt=xt,xt=-ct),this.face===FACE_ENUM.RIGHT?(ct=pt,pt=-bt,bt=ct):this.face===FACE_ENUM.BACK?(pt=-pt,bt=-bt):this.face===FACE_ENUM.LEFT&&(ct=pt,pt=bt,bt=-ct),e.phi=Math.acos(-xt)-HALF_PI,e.lam=Math.atan2(bt,pt),this.face===FACE_ENUM.RIGHT?e.lam=qsc_shift_lon_origin(e.lam,-HALF_PI):this.face===FACE_ENUM.BACK?e.lam=qsc_shift_lon_origin(e.lam,-SPI):this.face===FACE_ENUM.LEFT&&(e.lam=qsc_shift_lon_origin(e.lam,+HALF_PI))}if(this.es!==0){var wt,Tt,Rt;wt=e.phi<0?1:0,Tt=Math.tan(e.phi),Rt=this.b/Math.sqrt(Tt*Tt+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-Rt*Rt)/(this.one_minus_f*Rt)),wt&&(e.phi=-e.phi)}return e.lam+=this.long0,o.x=e.lam,o.y=e.phi,o}function qsc_fwd_equat_face_theta(o,e,s,a){var d;return o<EPSLN?(a.value=AREA_ENUM.AREA_0,d=0):(d=Math.atan2(e,s),Math.abs(d)<=FORTPI?a.value=AREA_ENUM.AREA_0:d>FORTPI&&d<=HALF_PI+FORTPI?(a.value=AREA_ENUM.AREA_1,d-=HALF_PI):d>HALF_PI+FORTPI||d<=-(HALF_PI+FORTPI)?(a.value=AREA_ENUM.AREA_2,d=d>=0?d-SPI:d+SPI):(a.value=AREA_ENUM.AREA_3,d+=HALF_PI)),d}function qsc_shift_lon_origin(o,e){var s=o+e;return s<-SPI?s+=TWO_PI:s>+SPI&&(s-=TWO_PI),s}var names$6=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const qsc={init:init$6,forward:forward$5,inverse:inverse$5,names:names$6};var COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(o,e){return o[0]+e*(o[1]+e*(o[2]+e*o[3]))},poly3_der=function(o,e){return o[1]+e*(2*o[2]+e*3*o[3])};function newton_rapshon(o,e,s,a){for(var d=e;a;--a){var b=o(d);if(d-=b,Math.abs(b)<s)break}return d}function init$5(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$4(o){var e=adjust_lon(o.x-this.long0),s=Math.abs(o.y),a=Math.floor(s*C1);a<0?a=0:a>=NODES&&(a=NODES-1),s=R2D*(s-RC1*a);var d={x:poly3_val(COEFS_X[a],s)*e,y:poly3_val(COEFS_Y[a],s)};return o.y<0&&(d.y=-d.y),d.x=d.x*this.a*FXC+this.x0,d.y=d.y*this.a*FYC+this.y0,d}function inverse$4(o){var e={x:(o.x-this.x0)/(this.a*FXC),y:Math.abs(o.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=o.y<0?-HALF_PI:HALF_PI;else{var s=Math.floor(e.y*NODES);for(s<0?s=0:s>=NODES&&(s=NODES-1);;)if(COEFS_Y[s][0]>e.y)--s;else if(COEFS_Y[s+1][0]<=e.y)++s;else break;var a=COEFS_Y[s],d=5*(e.y-a[0])/(COEFS_Y[s+1][0]-a[0]);d=newton_rapshon(function(b){return(poly3_val(a,b)-e.y)/poly3_der(a,b)},d,EPSLN,100),e.x/=poly3_val(COEFS_X[s],d),e.y=(5*s+d)*D2R$1,o.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$5=["Robinson","robin"];const robin={init:init$5,forward:forward$4,inverse:inverse$4,names:names$5};function init$4(){this.name="geocent"}function forward$3(o){var e=geodeticToGeocentric(o,this.es,this.a);return e}function inverse$3(o){var e=geocentricToGeodetic(o,this.es,this.a,this.b);return e}var names$4=["Geocentric","geocentric","geocent","Geocent"];const geocent={init:init$4,forward:forward$3,inverse:inverse$3,names:names$4};var mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$3(){if(Object.keys(params).forEach((function(s){if(typeof this[s]>"u")this[s]=params[s].def;else{if(params[s].num&&isNaN(this[s]))throw new Error("Invalid parameter value, must be numeric "+s+" = "+this[s]);params[s].num&&(this[s]=parseFloat(this[s]))}params[s].degrees&&(this[s]=this[s]*D2R$1)}).bind(this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this.mode=mode.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var o=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(o),this.sw=Math.sin(o)}function forward$2(o){o.x-=this.long0;var e=Math.sin(o.y),s=Math.cos(o.y),a=Math.cos(o.x),d,b;switch(this.mode){case mode.OBLIQ:b=this.sinph0*e+this.cosph0*s*a;break;case mode.EQUIT:b=s*a;break;case mode.S_POLE:b=-e;break;case mode.N_POLE:b=e;break}switch(b=this.pn1/(this.p-b),d=b*s*Math.sin(o.x),this.mode){case mode.OBLIQ:b*=this.cosph0*e-this.sinph0*s*a;break;case mode.EQUIT:b*=e;break;case mode.N_POLE:b*=-(s*a);break;case mode.S_POLE:b*=s*a;break}var _,_e;return _=b*this.cg+d*this.sg,_e=1/(_*this.sw*this.h1+this.cw),d=(d*this.cg-b*this.sg)*this.cw*_e,b=_*_e,o.x=d*this.a,o.y=b*this.a,o}function inverse$2(o){o.x/=this.a,o.y/=this.a;var e={x:o.x,y:o.y},s,a,d;d=1/(this.pn1-o.y*this.sw),s=this.pn1*o.x*d,a=this.pn1*o.y*this.cw*d,o.x=s*this.cg+a*this.sg,o.y=a*this.cg-s*this.sg;var b=hypot(o.x,o.y);if(Math.abs(b)<EPSLN)e.x=0,e.y=o.y;else{var _,_e;switch(_e=1-b*b*this.pfact,_e=(this.p-Math.sqrt(_e))/(this.pn1/b+b/this.pn1),_=Math.sqrt(1-_e*_e),this.mode){case mode.OBLIQ:e.y=Math.asin(_*this.sinph0+o.y*_e*this.cosph0/b),o.y=(_-this.sinph0*Math.sin(e.y))*b,o.x*=_e*this.cosph0;break;case mode.EQUIT:e.y=Math.asin(o.y*_e/b),o.y=_*b,o.x*=_e;break;case mode.N_POLE:e.y=Math.asin(_),o.y=-o.y;break;case mode.S_POLE:e.y=-Math.asin(_);break}e.x=Math.atan2(o.x,o.y)}return o.x=e.x+this.long0,o.y=e.y,o}var names$3=["Tilted_Perspective","tpers"];const tpers={init:init$3,forward:forward$2,inverse:inverse$2,names:names$3};function init$2(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var o=1-this.es,e=1/o;this.radius_p=Math.sqrt(o),this.radius_p2=o,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function forward$1(o){var e=o.x,s=o.y,a,d,b,_;if(e=e-this.long0,this.shape==="ellipse"){s=Math.atan(this.radius_p2*Math.tan(s));var _e=this.radius_p/hypot(this.radius_p*Math.cos(s),Math.sin(s));if(d=_e*Math.cos(e)*Math.cos(s),b=_e*Math.sin(e)*Math.cos(s),_=_e*Math.sin(s),(this.radius_g-d)*d-b*b-_*_*this.radius_p_inv2<0)return o.x=Number.NaN,o.y=Number.NaN,o;a=this.radius_g-d,this.flip_axis?(o.x=this.radius_g_1*Math.atan(b/hypot(_,a)),o.y=this.radius_g_1*Math.atan(_/a)):(o.x=this.radius_g_1*Math.atan(b/a),o.y=this.radius_g_1*Math.atan(_/hypot(b,a)))}else this.shape==="sphere"&&(a=Math.cos(s),d=Math.cos(e)*a,b=Math.sin(e)*a,_=Math.sin(s),a=this.radius_g-d,this.flip_axis?(o.x=this.radius_g_1*Math.atan(b/hypot(_,a)),o.y=this.radius_g_1*Math.atan(_/a)):(o.x=this.radius_g_1*Math.atan(b/a),o.y=this.radius_g_1*Math.atan(_/hypot(b,a))));return o.x=o.x*this.a,o.y=o.y*this.a,o}function inverse$1(o){var e=-1,s=0,a=0,d,b,_,_e;if(o.x=o.x/this.a,o.y=o.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(o.y/this.radius_g_1),s=Math.tan(o.x/this.radius_g_1)*hypot(1,a)):(s=Math.tan(o.x/this.radius_g_1),a=Math.tan(o.y/this.radius_g_1)*hypot(1,s));var nt=a/this.radius_p;if(d=s*s+nt*nt+e*e,b=2*this.radius_g*e,_=b*b-4*d*this.C,_<0)return o.x=Number.NaN,o.y=Number.NaN,o;_e=(-b-Math.sqrt(_))/(2*d),e=this.radius_g+_e*e,s*=_e,a*=_e,o.x=Math.atan2(s,e),o.y=Math.atan(a*Math.cos(o.x)/e),o.y=Math.atan(this.radius_p_inv2*Math.tan(o.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(o.y/this.radius_g_1),s=Math.tan(o.x/this.radius_g_1)*Math.sqrt(1+a*a)):(s=Math.tan(o.x/this.radius_g_1),a=Math.tan(o.y/this.radius_g_1)*Math.sqrt(1+s*s)),d=s*s+a*a+e*e,b=2*this.radius_g*e,_=b*b-4*d*this.C,_<0)return o.x=Number.NaN,o.y=Number.NaN,o;_e=(-b-Math.sqrt(_))/(2*d),e=this.radius_g+_e*e,s*=_e,a*=_e,o.x=Math.atan2(s,e),o.y=Math.atan(a*Math.cos(o.x)/e)}return o.x=o.x+this.long0,o}var names$2=["Geostationary Satellite View","Geostationary_Satellite","geos"];const geos={init:init$2,forward:forward$1,inverse:inverse$1,names:names$2};var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=Math.sqrt(3)/2;function init$1(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function forward(o){var e=adjust_lon(o.x-this.long0),s=o.y,a=Math.asin(M*Math.sin(s)),d=a*a,b=d*d*d;return o.x=e*Math.cos(a)/(M*(A1+3*A2*d+b*(7*A3+9*A4*d))),o.y=a*(A1+A2*d+b*(A3+A4*d)),o.x=this.a*o.x+this.x0,o.y=this.a*o.y+this.y0,o}function inverse(o){o.x=(o.x-this.x0)/this.a,o.y=(o.y-this.y0)/this.a;var e=1e-9,s=12,a=o.y,d,b,_,_e,nt,rt;for(rt=0;rt<s&&(d=a*a,b=d*d*d,_=a*(A1+A2*d+b*(A3+A4*d))-o.y,_e=A1+3*A2*d+b*(7*A3+9*A4*d),a-=nt=_/_e,!(Math.abs(nt)<e));++rt);return d=a*a,b=d*d*d,o.x=M*o.x*(A1+3*A2*d+b*(7*A3+9*A4*d))/Math.cos(a),o.y=Math.asin(Math.sin(a)/M),o.x=adjust_lon(o.x+this.long0),o}var names$1=["eqearth","Equal Earth","Equal_Earth"];const eqearth={init:init$1,forward,inverse,names:names$1};var EPS10=1e-10;function init(){var o;if(this.phi1=this.lat1,Math.abs(this.phi1)<EPS10)throw new Error;this.es?(this.en=pj_enfn(this.es),this.m1=pj_mlfn(this.phi1,this.am1=Math.sin(this.phi1),o=Math.cos(this.phi1),this.en),this.am1=o/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=e_inv,this.forward=e_fwd):(Math.abs(this.phi1)+EPS10>=HALF_PI?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=s_inv,this.forward=s_fwd)}function e_fwd(o){var e=adjust_lon(o.x-(this.long0||0)),s=o.y,a,d,b;return a=this.am1+this.m1-pj_mlfn(s,d=Math.sin(s),b=Math.cos(s),this.en),d=b*e/(a*Math.sqrt(1-this.es*d*d)),o.x=a*Math.sin(d),o.y=this.am1-a*Math.cos(d),o.x=this.a*o.x+(this.x0||0),o.y=this.a*o.y+(this.y0||0),o}function e_inv(o){o.x=(o.x-(this.x0||0))/this.a,o.y=(o.y-(this.y0||0))/this.a;var e,s,a,d;if(s=hypot(o.x,o.y=this.am1-o.y),d=pj_inv_mlfn(this.am1+this.m1-s,this.es,this.en),(e=Math.abs(d))<HALF_PI)e=Math.sin(d),a=s*Math.atan2(o.x,o.y)*Math.sqrt(1-this.es*e*e)/Math.cos(d);else if(Math.abs(e-HALF_PI)<=EPS10)a=0;else throw new Error;return o.x=adjust_lon(a+(this.long0||0)),o.y=adjust_lat(d),o}function s_fwd(o){var e=adjust_lon(o.x-(this.long0||0)),s=o.y,a,d;return d=this.cphi1+this.phi1-s,Math.abs(d)>EPS10?(o.x=d*Math.sin(a=e*Math.cos(s)/d),o.y=this.cphi1-d*Math.cos(a)):o.x=o.y=0,o.x=this.a*o.x+(this.x0||0),o.y=this.a*o.y+(this.y0||0),o}function s_inv(o){o.x=(o.x-(this.x0||0))/this.a,o.y=(o.y-(this.y0||0))/this.a;var e,s,a=hypot(o.x,o.y=this.cphi1-o.y);if(s=this.cphi1+this.phi1-a,Math.abs(s)>HALF_PI)throw new Error;return Math.abs(Math.abs(s)-HALF_PI)<=EPS10?e=0:e=a*Math.atan2(o.x,o.y)/Math.cos(s),o.x=adjust_lon(e+(this.long0||0)),o.y=adjust_lat(s),o}var names=["bonne","Bonne (Werner lat_1=90)"];const bonne={init,names};function includedProjections(o){o.Proj.projections.add(tmerc),o.Proj.projections.add(etmerc),o.Proj.projections.add(utm),o.Proj.projections.add(sterea),o.Proj.projections.add(stere),o.Proj.projections.add(somerc),o.Proj.projections.add(omerc),o.Proj.projections.add(lcc),o.Proj.projections.add(krovak),o.Proj.projections.add(cass),o.Proj.projections.add(laea),o.Proj.projections.add(aea),o.Proj.projections.add(gnom),o.Proj.projections.add(cea),o.Proj.projections.add(eqc),o.Proj.projections.add(poly),o.Proj.projections.add(nzmg),o.Proj.projections.add(mill),o.Proj.projections.add(sinu),o.Proj.projections.add(moll),o.Proj.projections.add(eqdc),o.Proj.projections.add(vandg),o.Proj.projections.add(aeqd),o.Proj.projections.add(ortho),o.Proj.projections.add(qsc),o.Proj.projections.add(robin),o.Proj.projections.add(geocent),o.Proj.projections.add(tpers),o.Proj.projections.add(geos),o.Proj.projections.add(eqearth),o.Proj.projections.add(bonne)}proj4.defaultDatum="WGS84";proj4.Proj=Projection;proj4.WGS84=new proj4.Proj("WGS84");proj4.Point=Point;proj4.toPoint=common;proj4.defs=defs;proj4.nadgrid=nadgrid;proj4.transform=transform;proj4.mgrs=mgrs;proj4.version="__VERSION__";includedProjections(proj4);var logger$2=LoggerByDefault$1.getLogger("CRS");function register(o){const e=Object.keys(o.defs);logger$2.trace("proj. codes :",e);const s=e.length;let a,d;for(a=0;a<s;++a){const b=e[a];if(!get$3(b)){const _=o.defs(b);addProjection(new Projection$1({code:b,axisOrientation:_.axis,metersPerUnit:_.to_meter,units:_.units}))}}for(a=0;a<s;++a){const b=e[a],_=get$3(b);for(d=0;d<s;++d){const _e=e[d],nt=get$3(_e);if(!get$4(b,_e))if(o.defs[b]===o.defs[_e])addEquivalentProjections([_,nt]);else{const rt=o(b,_e);addCoordinateTransforms(_,nt,rt.forward,rt.inverse)}}}}var Register={isLoaded:!1,get:function(o){if(!(o===""||o===null||typeof o>"u")){var e=o.split(":");if(e.length===2){var s=e[0],a=e[1];if(this.hasOwnProperty(s)&&this[s].hasOwnProperty(a))return this[s][a]}}},exist:function(o){if(o===""||o===null||typeof o>"u")return!1;var e=o.split(":");if(e.length!==2)return!1;var s=e[0],a=e[1];return!(!this.hasOwnProperty(s)||!this[s].hasOwnProperty(a))},load:function(o){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],s=0;s<e.length;s++){var a=e[s],d=this[a];for(var b in d)if(d.hasOwnProperty(b)){var _=a+":"+b;o.defs(_,this.get(_))}}this.isLoaded=!0}},loadByDefault:function(o){var e={EPSG:{2154:Register.EPSG[2154],27571:Register.EPSG[27571],27572:Register.EPSG[27572],27573:Register.EPSG[27573],27574:Register.EPSG[27574]},CRS:{84:Register.CRS[84]},IGNF:{LAMB93:Register.IGNF.LAMB93,LAMBE:Register.IGNF.LAMBE,LAMB1:Register.IGNF.LAMB1,LAMB2:Register.IGNF.LAMB2,LAMB3:Register.IGNF.LAMB3,LAMB4:Register.IGNF.LAMB4,RGF93G:Register.IGNF.RGF93G,WGS84G:Register.IGNF.WGS84G}};for(var s in e)if(e.hasOwnProperty(s)){var a=e[s];for(var d in a)if(a.hasOwnProperty(d)){var b=s+":"+d;o.defs(b,a[d])}}},loadByName:function(o,e){if(!this.exist(e))return!1;try{o.defs(e,this.get(e))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},logger$1=LoggerByDefault$1.getLogger("CRS"),CRS={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(logger$1.trace("Loading custom definitions projections"),!Register.isLoaded){Register.load(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(o){logger$1.error(o)}}},loadByDefault:function(){if(logger$1.trace("Loading custom definitions projections by default"),!Register.isLoaded){Register.loadByDefault(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(o){logger$1.error(o)}}},loadByName:function(o){if(logger$1.trace("Loading a custom definition projection : ",o),!Register.isLoaded){Register.loadByName(proj4,o);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(e){logger$1.error(e)}}},overload:function(){logger$1.trace("Loading projections aera (extent)");for(var o in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(o)){var e=this.projectionsExtent[o],s=get$3(o),a=getTransform("EPSG:4326",s),d=applyTransform([e.bottom,e.right,e.top,e.left],a);s.setExtent(d),addProjection(s),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(s)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register);let m_suggestions=[],controller=new AbortController,m_index="geoplateforme",m_fields="title,layer_name",m_size="1000",m_maximumResponses=5,m_filterByService=["WMTS","TMS"],m_filterByProjection=[],m_filterByTMS=["ADMIN_EXPRESS","ISOHYPSE","PLAN.IGN","OCSGE_2016","OCSGE_2019","PCI","BDTOPO"],m_url=`https://data.geopf.fr/recherche/api/indexes/${m_index}/suggest`;const target=new EventTarget,suggest=async o=>{clear(),controller=new AbortController;let e=new URL(m_url),s={text:o,fields:m_fields,size:m_size};Object.keys(s).forEach(nt=>e.searchParams.append(nt,s[nt]));var a=await fetch(e,{}),d=await a.json();if(a.status!==200)throw new Error(a.message);if(!(!d||d.length===0)){for(let nt=0;nt<d.length;nt++){const rt=d[nt];var b=rt.source.type==="WMTS"||rt.source.type==="TMS"?10:0;d[nt].score+=b}d.sort((nt,rt)=>rt.score-nt.score);for(let nt=0;nt<d.length;nt++){const rt=d[nt];var _=m_filterByService.length===0||m_filterByService.includes(rt.source.type);if(_){if(unique$1().length>=m_maximumResponses)break;var _e={originators:rt.source.attribution||{},srs:rt.source.srs||[],keywords:rt.source.keywords||[],extent:rt.source.extent||{},metadata:rt.source.metadata_urls||[],name:rt.source.layer_name,title:rt.source.title,description:rt.source.description,service:rt.source.type,url:rt.source.url};if(m_filterByTMS.length&&(_e.service==="WMTS"&&m_filterByTMS.includes(_e.name)||_e.service==="TMS"&&!m_filterByTMS.includes(_e.name))||m_filterByProjection.length&&m_filterByProjection.includes(_e.srs[0]))continue;m_suggestions.push(_e)}}return target.dispatchEvent(new CustomEvent("suggest",{bubbles:!0,detail:getSuggestions()})),getSuggestions()}},unique$1=()=>m_suggestions.filter((o,e,s)=>e===s.findIndex(a=>a.service===o.service&&a.name===o.name&&a.title===o.title&&a.description===o.description)),clear=()=>{controller.abort(),m_suggestions=[]},getSuggestions=()=>unique$1(),getNames=()=>unique$1().map(o=>o.name),getTitles=()=>unique$1().map(o=>o.title),setIndex=o=>{m_index=o},setFields=o=>{m_fields=o},setSize=o=>{m_size=parseInt(o)},setUrl=value=>{m_url=eval("`"+value+"`")},setMaximumResponses=o=>{m_maximumResponses=parseInt(o)},setFiltersByService=o=>{m_filterByService=o===""?[]:o.split(",")},setFiltersByProjection=o=>{m_filterByProjection=o===""?[]:o.split(",")},setFiltersByTMS=o=>{m_filterByTMS=o===""?[]:o.split(",")},updateFilterByTMS=async o=>{var e=o;e||(e="https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/vectorTileConfig/fullVectorTileConfig.json");const s=await fetch(e),a=await s.json();if(s.status!==200)throw new Error(s.message);if(!a)throw new Error("Liste vide !");var d=Object.keys(a.layers).map(b=>b.split("$")[0]);return d&&setFiltersByTMS(d.toString()),m_filterByTMS},Search={target,suggest,clear,getSuggestions,getNames,getTitles,setIndex,setFields,setSize,setUrl,setMaximumResponses,setFiltersByService,setFiltersByTMS,updateFilterByTMS,setFiltersByProjection};var SearchEngineDOM={_addUID:function(o){var e=this._uid?o+"-"+this._uid:o;return e},_createMainContainerElement:function(){var o=document.createElement("div");return o.id=this._addUID("GPsearchEngine"),o.className="GPwidget gpf-widget",o},_createSearchDivElement:function(){var o=document.createElement("div");return o.id=this._addUID("GPshowSearchDiv"),o},_createShowSearchEnginePictoElement:function(o){var e=this;checkDsfr()&&(o=!0);var s=document.createElement("button");return s.id=this._addUID("GPshowSearchEnginePicto"),s.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchEnginePicto gpf-btn gpf-btn-icon-search fr-btn",s.title="Afficher/masquer la recherche par lieux",checkDsfr()&&(s.title="Rechercher"),s.setAttribute("tabindex","0"),s.setAttribute("aria-pressed",!o),s.disabled=!o,s.setAttribute("type","button"),s.addEventListener("click",function(a){if(checkDsfr()){var d=document.getElementById(e._addUID("GPautocompleteResults")),b=d.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),_=d.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),_e=_.length;if(!_e)return;var nt=null;b.length?nt=b[0]:(nt=_[0],nt.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",nt.style.color="#000000",nt.style["background-color"]="#CEDBEF"),nt.click();return}var rt=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!rt),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden");var ct=document.getElementById(e._addUID("GPshowAdvancedSearch"));ct&&(ct.style.display=null,document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"));var dt=document.getElementById(e._addUID("GPshowGeolocate"));dt&&(dt.style.display=null);var pt=document.getElementById(e._addUID("GPshowSearchByCoordinate"));pt&&(pt.style.display=null);var bt="#GPsearchInput-"+e._uid;document.querySelector(bt+" input").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+e._uid).disabled=!1),e.onShowSearchEngineClick(a)}),s},_createSearchInputElement:function(o){var e=this,s=document.createElement("form");s.id=this._addUID("GPsearchInput"),s.className="gpf-panel__content fr-modal__content",s.addEventListener("submit",function(d){return d.preventDefault(),document.getElementById(e._addUID("GPsearchInputText")).value===""||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),e.onGeocodingSearchSubmit(d)),!1});var a=document.createElement("input");return a.id=this._addUID("GPsearchInputText"),a.className="GPsearchInputText gpf-input fr-input",a.type="text",a.placeholder=o,a.autocomplete="off",a.addEventListener("keyup",function(d){var b=d.which||d.keyCode;b===13||b===10||b===38||b===40||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),a.value.length>2?(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(d))}),a.addEventListener("keydown",function(d){var b=d.which||d.keyCode;b===13&&d.preventDefault();var _=document.getElementById(e._addUID("GPautocompleteResults"));if(_){var _e=_.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),nt=_.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),rt=nt.length;if(rt){var ct=null;if(_e.length)ct=_e[0];else if(ct=nt[0],ct.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",ct.style.color="#000000",ct.style["background-color"]="#CEDBEF",b!==13)return;var dt=parseInt(SelectorID.index(ct.id),10),pt=dt===rt-1?nt[0]:nt[dt+1],bt=dt===0?nt[rt-1]:nt[dt-1];switch(ct.style["background-color"]="",ct.style.color="",bt.style["background-color"]="",bt.style.color="",pt.style["background-color"]="",pt.style.color="",b){case 38:ct.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",bt.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",bt.style.color="#000000",bt.style["background-color"]="#CEDBEF",ct.scrollIntoView();break;case 40:ct.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",pt.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",pt.style.color="#000000",pt.style["background-color"]="#CEDBEF",ct.scrollIntoView();break;case 13:d.preventDefault(),ct.click(d);break}ct.focus()}}}),s.appendChild(a),s},_createSearchResetElement:function(){var o=this,e=document.createElement("button");return e.id=this._addUID("GPsearchInputReset"),e.className="GPshowOpen GPsearchInputReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-search-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.setAttribute("aria-label","Supprimer la recherche"),e.addEventListener("click",function(s){document.getElementById(o._addUID("GPsearchInputText")).value="",document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),o.onSearchResetClick()}),e},_createButtonsElement:function(){var o=document.createElement("div");return o.className="GPbuttonsContainer",o},_createFirstLineWrapper:function(){var o=document.createElement("div");return o.className="GPsearchFirstLineWrapper",o},_createRadioContainer:function(){var o=document.createElement("div");return o.className="GPsearchRadioContainer",o},_createRadioElements:function(){var o=document.createElement("div");o.className="GPsearchRadioElements";var e=document.createElement("div");e.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var s=document.createElement("input");s.id=this._addUID("GPsearchSplitLocations"),s.type="radio",s.name="GPsearchSplit",s.value="address",s.checked=!0,e.appendChild(s);var a=document.createElement("label");a.className="gpf-label fr-label",a.htmlFor=this._addUID("GPsearchSplitLocations"),a.title="Adresses",a.innerHTML="Adresses",e.appendChild(a),s.addEventListener?s.addEventListener("change",function(){s.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}):s.attachEvent&&s.attachEvent("onchange",function(){s.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))});var d=document.createElement("div");d.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var b=document.createElement("input");b.id=this._addUID("GPsearchSplitData"),b.type="radio",b.name="GPsearchSplit",b.value="data",d.appendChild(b);var _=document.createElement("label");return _.className="gpf-label fr-label",_.htmlFor=this._addUID("GPsearchSplitData"),_.title="Cartes et donnes",_.innerHTML="Cartes et donnes",d.appendChild(_),b.addEventListener?b.addEventListener("change",function(){b.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden"))}):b.attachEvent&&b.attachEvent("onchange",function(){b.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}),o.appendChild(e),o.appendChild(d),[o,s,b]},_createShowAdvancedSearchElement:function(){var o=this,e=document.createElement("span");return e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowOpen  GPshowAdvancedSearch",e.innerText="Recherche avance",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(s){var a=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!a);var d="#GPsearchInput-"+o._uid;a?(document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(d+" input").disabled=!1,document.querySelector(d+" .GPsearchInputReset")&&(document.querySelector(d+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!1)):(document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(d+" input").disabled=!0,document.querySelector(d+" .GPsearchInputReset")&&(document.querySelector(d+" .GPsearchInputReset").disabled=!0),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!0)),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1)}),e},_createShowGeolocateElement:function(){var o=this,e=document.createElement("button");return e.id=this._addUID("GPshowGeolocate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowGeolocate gpf-btn gpf-btn-icon-search-geolocate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Activer la golocalisation",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(s){var a=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!a),o.onShowSearchGeolocateClick(s)}),e},_createShowSearchByCoordinateElement:function(){var o=this,e=document.createElement("button");return e.id=this._addUID("GPshowSearchByCoordinate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchByCoordinate gpf-btn gpf-btn-icon-search-coordinate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Ouvrir la recherche par coordonnes",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(s){var a=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!a);var d="#GPsearchInput-"+o._uid;a?(document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(d+" input").disabled=!1,document.querySelector(d+" .GPsearchInputReset").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!1)):(document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(d+" input").disabled=!0,document.querySelector(d+" .GPsearchInputReset").disabled=!0,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!0)),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1)}),e},_createAdvancedSearchPanelElement:function(){var o=document.createElement("dialog");return o.id=this._addUID("GPadvancedSearchPanel"),o.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",o},_createAdvancedSearchPanelDivElement:function(){var o=document.createElement("div");return o.className="gpf-panel__body fr-modal__body",o},_createGeocodeResultsElement:function(){var o=document.createElement("dialog");return o.id=this._addUID("GPgeocodeResultsList"),o.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",o.appendChild(this._createGeocodeResultsHeaderElement()),o},_createGeocodeResultsDivElement:function(){var o=document.createElement("div");return o.className="gpf-panel__body fr-modal__body",o},_createAutoCompleteElement:function(){var o=document.createElement("div");return o.id=this._addUID("GPautoCompleteList"),o.className="GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden ",o},_createCoordinateSearchPanelElement:function(){var o=document.createElement("dialog");return o.id=this._addUID("GPcoordinateSearchPanel"),o.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",o},_createCoordinateSearchPanelDivElement:function(){var o=document.createElement("div");return o.className="gpf-panel__body fr-modal__body",o},_createAutoCompleteListElement:function(){var o=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.className="",e.addEventListener?e.addEventListener("click",function(s){document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")},!1):e.attachEvent&&e.attachEvent("onclick",function(s){document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")}),e},_createAutoCompletedLocationContainer(){var o=document.createElement("select");return o.id=this._addUID("GPautocompleteResultsLocation"),o.className="GPelementHidden gpf-hidden gpf-select",o.size=6,o.autofocus=!0,o},_createAutoCompletedLocationTitleElement(){var o=document.getElementById(this._addUID("GPautocompleteResultsLocation")),e=document.createElement("option");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Lieux et adresses",o.appendChild(e)},_createAutoCompletedLocationElement:function(o,e){var s=this,a=document.getElementById(this._addUID("GPautocompleteResultsLocation")),d=document.createElement("option");d.id=this._addUID("AutoCompletedLocation_"+e),d.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine";var b=GeocodeUtils.getSuggestedLocationFreeform(o);d.innerHTML=b,d.title=b,d.addEventListener?d.addEventListener("click",function(_){s.onAutoCompletedResultsItemClick(_)},!1):d.attachEvent&&d.attachEvent("onclick",function(_){s.onAutoCompletedResultsItemClick(_)}),a.appendChild(d)},_createSearchedSuggestContainer(){var o=document.createElement("select");return o.id=this._addUID("GPautocompleteResultsSuggest"),o.className="GPelementHidden gpf-hidden gpf-select",o.size=6,o.autofocus=!0,o},_createSearchedSuggestTitleElement(){var o=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),e=document.createElement("option");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Cartes et donnes",o.appendChild(e)},_createSearchedSuggestElement:function(o,e){var s=this,a=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),d=document.createElement("option");d.id=this._addUID("AutoCompletedSuggest_"+e),d.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",d.innerHTML=o.title+" ("+o.service+")",d.dataset.layer=o.name,d.title=o.description,d.addEventListener?d.addEventListener("click",function(b){s.onSearchedResultsItemClick(b)},!1):d.attachEvent&&d.attachEvent("onclick",function(b){s.onSearchedResultsItemClick(b)}),a.appendChild(d)},_createAdvancedSearchPanelHeaderElement:function(){var o=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var s=document.createElement("div");s.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",s.innerHTML="Recherche avance",e.appendChild(s);var a=document.createElement("button");a.id=this._addUID("GPadvancedSearchClose"),a.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",a.title="Fermer la recherche avance",a.addEventListener?a.addEventListener("click",function(){var b="#GPsearchInput-"+o._uid;document.querySelector(b+" input").disabled=!1,document.querySelector(b+" .GPsearchInputReset")&&(document.querySelector(b+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!1),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")},!1):a.attachEvent&&a.attachEvent("onclick",function(){var b="#GPsearchInput-"+o._uid;document.querySelector(b+" input").disabled=!1,document.querySelector(b+" .GPsearchInputReset")&&(document.querySelector(b+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!1),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")});var d=document.createElement("span");return d.className="GPelementHidden gpf-visible",d.innerText="Fermer",a.appendChild(d),e.appendChild(a),e},_createAdvancedSearchPanelFormElement:function(o){var e=this,s=document.createElement("form");s.id=this._addUID("GPadvancedSearchForm"),s.className="gpf-panel__content fr-modal__content",s.addEventListener("submit",function(_){_.preventDefault();for(var _e=[],nt="#GPadvancedSearchFilters-"+e._uid,rt=document.querySelectorAll(nt+" > div > div > input,select#category"),ct=0;ct<rt.length;ct++){var dt=rt[ct];_e.push({key:dt.name,value:dt.value})}return e.onGeocodingAdvancedSearchSubmit(_,_e),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),!1});var a=document.createElement("div");a.className="GPflexInput gpf-flex-column ";var d=document.createElement("label");d.className="GPadvancedSearchCodeLabel gpf-label fr-label",d.innerHTML="Recherche par",a.appendChild(d);var b=this._createAdvancedSearchFormCodeElement(o);return a.appendChild(b),s.appendChild(a),s},_createAdvancedSearchFormCodeElement:function(o){var e=this,s=document.createElement("select");s.id=this._addUID("GPadvancedSearchCode"),s.title="Choisir un type de recherche",s.className="GPadvancedSearchCode gpf-select fr-select",s.addEventListener("change",function(b){e.onGeocodingAdvancedSearchCodeChange(b)},!1),o||(o=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var a=0;a<o.length;a++){var d=document.createElement("option");d.value=o[a].id,d.text=o[a].title,s.appendChild(d)}return s},_createAdvancedSearchFormInputElement:function(){var o=document.createElement("input");return o.type="submit",o.id=this._addUID("GPadvancedSearchSubmit"),o.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",o.value="Chercher",o},_createAdvancedSearchFormFiltersElement:function(){var o=document.createElement("div");return o.id=this._addUID("GPadvancedSearchFilters"),o},_createAdvancedSearchFiltersTableElement:function(o,e){var s=document.createElement("div");return s.id=this._addUID(o),e||(s.style.display="none"),s},_createAdvancedSearchFiltersAttributElement:function(o){var e=null,s=o.name,a=o.title,d=o.description,b=o.code,_=o.value,_e=document.createElement("div");_e.className="GPflexInput gpf-flex-column ";var nt=document.createElement("label");if(nt.className="GPadvancedSearchFilterLabel gpf-label fr-label",nt.htmlFor=s,nt.title=d||a,nt.innerHTML=a,_e.appendChild(nt),s==="category"){var rt=document.createElement("select");if(rt.id=s,rt.name=s,rt.title=a,rt.className="GPadvancedSearchFilterInput gpf-select fr-select",_&&Array.isArray(_))for(var ct=0;ct<_.length;ct++){var dt=document.createElement("option");dt.value=_[ct],dt.text=_[ct],rt.appendChild(dt)}_e.appendChild(rt)}else{var pt=document.createElement("input");if(pt.id=s,pt.className="GPadvancedSearchFilterInput gpf-input fr-input",pt.type="text",pt.name=s,_)if(Array.isArray(_)){var bt=s+"_list";pt.setAttribute("list",bt);var xt=document.createElement("datalist");xt.id=bt;for(var ct=0;ct<_.length;++ct){var dt=document.createElement("option");dt.value=_[ct],xt.appendChild(dt)}_e.appendChild(xt)}else pt.value=_;_e.appendChild(pt)}return e=document.getElementById(this._addUID(b)),e?e.appendChild(_e):e=_e,e},_createGeocodeResultsHeaderElement:function(){var o=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var s=document.createElement("div");s.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",s.innerHTML="Rsultats de la recherche",e.appendChild(s);var a=document.createElement("button");a.id=this._addUID("GPgeocodeResultsClose"),a.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",a.title="Fermer la fentre de rsultats",a.addEventListener?a.addEventListener("click",function(){document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")},!1):a.attachEvent&&a.attachEvent("onclick",function(){document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")});var d=document.createElement("span");return d.className="GPelementHidden gpf-visible",d.innerText="Fermer",a.appendChild(d),e.appendChild(a),e},_createGeocodeResultsListElement:function(){var o=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.className="gpf-panel__list",e.setAttribute("tabindex","0"),e.addEventListener?e.addEventListener("click",function(s){s.ctrlKey||(document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),o.onGeocodedResultsItemClick(s)},!1):e.attachEvent&&e.attachEvent("onclick",function(s){s.ctrlKey||(document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),o.onGeocodedResultsItemClick(s)}),e},_createGeocodedLocationElement:function(o,e){var s=document.getElementById(this._addUID("GPgeocodeResults")),a=document.createElement("div");a.id=this._addUID("GeocodedLocation_"+e),a.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",typeof o=="string"?a.innerHTML=o:a.innerHTML=GeocodeUtils.getGeocodedLocationFreeform(o),s.appendChild(a)},_createCoordinateSearchPanelHeaderElement(){var o=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var s=document.createElement("div");s.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",s.innerHTML="Recherche par coordonnes",e.appendChild(s);var a=document.createElement("button");a.id=this._addUID("GPcoordinateSearchClose"),a.className="GPpanelClose GPcoordinateSearchClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",a.title="Fermer la recherche par coordonnes",a.addEventListener?a.addEventListener("click",function(){var b="#GPsearchInput-"+o._uid;document.querySelector(b+" input").disabled=!1,document.querySelector(b+" .GPsearchInputReset")&&(document.querySelector(b+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!1),document.getElementById(o._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),o.onCoordinateSearchClose()},!1):a.attachEvent&&a.attachEvent("onclick",function(){var b="#GPsearchInput-"+o._uid;document.querySelector(b+" input").disabled=!1,document.querySelector(b+" .GPsearchInputReset")&&(document.querySelector(b+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!1),document.getElementById(o._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),o.onCoordinateSearchClose()});var d=document.createElement("span");return d.className="GPelementHidden gpf-visible",d.innerText="Fermer",a.appendChild(d),e.appendChild(a),e},_createCoordinateSearchPanelFormElement(){var o=this,e=document.createElement("form");return e.id=this._addUID("GPcoordinateSearchForm"),e.className="gpf-panel__content fr-modal__content",e.addEventListener("submit",function(s){return s.preventDefault(),o.onShowSearchByCoordinateClick(),!1}),e},__createCoordinateSearchDivElement(){var o=document.createElement("div");return o.className="GPflexInput gpf-flex-column ",o},_createCoordinateSearchSystemsLabelElement(){var o=document.createElement("label");return o.className="GPcoordinateSearchSystemsLabel gpf-label fr-label",o.innerHTML="Systme de rfrence",o},_setCoordinateSearchSystemsSelectElement(o){document.getElementById(this._addUID("GPcoordinateSearchSystem"))&&document.getElementById(this._addUID("GPcoordinateSearchSystem")).remove();var e=this,s=document.createElement("select");s.id=this._addUID("GPcoordinateSearchSystem"),s.title="Choisir un systme de rference",s.className="GPselect GPcoordinateSearchSystemsSelect gpf-select fr-select",s.addEventListener("change",function(_){e.onCoordinateSearchSystemChange(_)});for(var a=0;a<o.length;a++){var d=o[a],b=document.createElement("option");b.value=d.code,b.text=d.label||a,s.appendChild(b)}return s},_createCoordinateSearchUnitsLabelElement(){var o=document.createElement("label");return o.className="GPcoordinateSearchUnitsLabel gpf-label fr-label",o.innerHTML="Units",o},_setCoordinateSearchUnitsSelectElement(o){document.getElementById(this._addUID("GPcoordinateSearchUnits"))&&document.getElementById(this._addUID("GPcoordinateSearchUnits")).remove();var e=this,s=document.createElement("select");s.id=this._addUID("GPcoordinateSearchUnits"),s.title="Choisir un type d'unit",s.className="GPselect GPcoordinateSearchUnitsSelect gpf-select fr-select",s.addEventListener("change",function(_){e.onCoordinateSearchUnitsChange(_)});for(var a=0;a<o.length;a++){var d=o[a],b=document.createElement("option");b.value=d.code?d.code:a,b.text=d.label||a,s.appendChild(b)}return s},_setCoordinateSearchLngLabelElement(o){document.getElementById(this._addUID("GPcoordinateSearchLngLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLngLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLngLabel"),e.htmlFor="coordinate-lng",e.innerHTML=o==="Geographical"?"Longitude :":"Y :",e},_setCoordinateSearchLngInputElement(o){document.getElementById(this._addUID("GPcoordinateSearchLngInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLngInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLngDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLngDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLngInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnes",e.name="coordinate-lng",e.type="number",e.step="any",e.required="",o){case"DMS":return e.title+=" gographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLngDMSElement();case"DEC":e.title+=" gographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartsiennes (en mtre)";break;case"KM":e.title+=" cartsiennes (en kilomtre)";break}return e},_setCoordinateSearchLngDMSElement(){var o=document.createElement("div");return o.id=this._addUID("GPcoordinateSearchLngDMS"),o.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLonDeg"
                class="gpf-input fr-input"
                name="inputSexLonDeg"
                title="Saisir une valeur de degr entre 0 et 180"
                type="number"
                required=""
                min="0"
                max="180">
            <label></label>
            <input step="1"
                id="GPcoordinatSearchInputSexLonMin"
                class="gpf-input fr-input"
                name="inputSexLonMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLonSec"
                class="gpf-input fr-input"
                name="inputSexLonSec"
                title="Saisir une valeur de seconde entre 0'' et 59''"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLonToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Est et 0uest"
                name="inputSexLonToward">
                <option value="O">O</option>
                <option value="E" selected="">E</option>
            </select>
        </div>
        `,o},_setCoordinateSearchLatLabelElement(o){document.getElementById(this._addUID("GPcoordinateSearchLatLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLatLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLatLabel"),e.htmlFor="coordinate-lat",e.innerHTML=o==="Geographical"?"Latitude :":"X :",e},_setCoordinateSearchLatInputElement(o){document.getElementById(this._addUID("GPcoordinateSearchLatInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLatInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLatDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLatDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLatInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnes",e.name="coordinate-lat",e.type="number",e.step="any",e.required="",o){case"DMS":return e.title+=" gographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLatDMSElement();case"DEC":e.title+=" gographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartsiennes (en mtre)";break;case"KM":e.title+=" cartsiennes (en kilomtre)";break}return e},_setCoordinateSearchLatDMSElement(){var o=document.createElement("div");return o.id=this._addUID("GPcoordinateSearchLatDMS"),o.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLatDeg"
                class="gpf-input fr-input"
                name="inputSexLatDeg"
                title="Saisir une valeur de degr entre 0 et 85"
                type="number"
                required=""
                min="0"
                max="85">
            <label></label>
            <input step="1"
                id="GPcoordinatSearchInputSexLatMin"
                class="gpf-input fr-input"
                name="inputSexLatMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLatSec"
                class="gpf-input fr-input"
                name="inputSexLatSec"
                title="Saisir une valeur de seconde entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLatToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Nord et Sud"
                name="inputSexLatToward">
                <option value="N">N</option>
                <option value="S">S</option>
            </select>
        </div>
        `,o},_createCoordinateSearchSubmitElement(){var o=document.createElement("input");return o.type="submit",o.id=this._addUID("GPcoordinateSearchSubmit"),o.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",o.value="Chercher",o}},logger=LoggerByDefault$1.getLogger("searchengine"),SearchEngine=class rle extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof rle))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e||this._clearResults(),this.collapsed||this._showSearchEngineButton.setAttribute("aria-pressed",!0),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}this.options.collapsible&&(e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineButton.click(),this.collapsed=e))}getData(){return this._geocodedLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,collapsible:!0,zoomTo:"",resources:{geocode:[],autocomplete:[],search:!1},displayButtonClose:!0,displayButtonAdvancedSearch:!1,displayButtonGeolocate:!1,displayButtonCoordinateSearch:!1,advancedSearch:{},coordinateSearch:{},searchOptions:{addToMap:!0,serviceOptions:{maximumResponses:5}},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{maximumResponses:5},triggerGeocode:!1,triggerDelay:1e3},displayMarker:!0,markerStyle:"lightOrange",markerUrl:"",placeholder:"Rechercher un lieu, une adresse",splitResults:!0},Helper$1.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.options.resources.search&&(this.options.searchOptions&&(this.options.searchOptions.serviceOptions&&(this.options.searchOptions.serviceOptions.url&&Search.setUrl(this.options.searchOptions.serviceOptions.url),this.options.searchOptions.serviceOptions.fields&&Search.setFields(this.options.searchOptions.serviceOptions.fields),this.options.searchOptions.serviceOptions.index&&Search.setIndex(this.options.searchOptions.serviceOptions.index),this.options.searchOptions.serviceOptions.size&&Search.setSize(this.options.searchOptions.serviceOptions.size),this.options.searchOptions.serviceOptions.maximumResponses&&Search.setMaximumResponses(this.options.searchOptions.serviceOptions.maximumResponses)),this.options.searchOptions.filterServices&&Search.setFiltersByService(this.options.searchOptions.filterServices),this.options.searchOptions.filterVectortiles&&Search.setFiltersByTMS(this.options.searchOptions.filterVectortiles),this.options.searchOptions.updateVectortiles&&Search.updateFilterByTMS()),Search.target.addEventListener("suggest",d=>{logger.debug(d),this._fillSearchedSuggestListContainer(d.detail)})),this.options.collapsible||(this.options.collapsed=!1),this.collapsed=this.options.collapsed,this._uid=SelectorID.generate(),this._showSearchEngineButton=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._containerResultsLocation=null,this._containerResultsSuggest=null,this._radioButtonLocation=null,this._radioButtonSuggest=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._coordinateSearchSystems=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchSystems(),this._currentCoordinateSearchSystems=this._coordinateSearchSystems[0],this._currentCoordinateSearchType=this._coordinateSearchSystems[0].type),this._coordinateSearchUnits=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchUnits(),this._currentCoordinateSearchUnits=this._coordinateSearchUnits[this._currentCoordinateSearchType][0].code),this._coordinateSearchLngInput=null,this._coordinateSearchLatInput=null,this._marker=null;var s=this.options.markerStyle,a=this.options.markerUrl;a?this._markerUrl=a:this._markerUrl=Object.keys(Marker).indexOf(s)===-1?Marker.lightOrange:Marker[s],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null}_checkInputOptions(e){var s;if(e.resources)if(typeof e.resources=="object"){var a=e.resources.geocode;if(a)if(Array.isArray(a)){var d=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(s=0;s<a.length;s++)d.indexOf(a[s])===-1&&logger.log("[SearchEngine] options.resources.geocode : "+a[s]+" is not a resource for geocode")}else logger.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),a=null;var b=e.resources.autocomplete;if(b)if(Array.isArray(b)){var _=["StreetAddress","PositionOfInterest"];for(s=0;s<b.length;s++)_.indexOf(b[s])===-1&&logger.log("[SearchEngine] options.resources.autocomplete : "+b[s]+" is not a resource for autocomplete")}else logger.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),b=null}else logger.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null}_initAdvancedSearchCodes(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var s=0;s<e.length;s++)switch(e[s]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),logger.log("advancedSearchCodes",this._advancedSearchCodes)}_initAdvancedSearchFilters(){this._advancedSearchFilters=SearchEngineUtils.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;Helper$1.assign(this._advancedSearchFilters,e),logger.log("advancedSearchFilters",this._advancedSearchFilters)}_initCoordinateSearchSystems(){var e=[{label:"Gographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric"}],s=this.options.coordinateSearch.systems;if(s)for(var a=0;a<s.length;a++){var d=s[a];this._setSystem(d)}if(this._coordinateSearchSystems.length===0)for(var b=0;b<e.length;b++)this._setSystem(e[b])}_initCoordinateSearchUnits(){var e={Geographical:[{code:"DEC",label:"degrs dcimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"degrs sexagsimaux",format:MathUtils.coordinateToDMS}],Metric:[{code:"M",label:"mtres",format:MathUtils.coordinateToMeter},{code:"KM",label:"kilomtres",format:MathUtils.coordinateToKMeter}]},s=this.options.coordinateSearch.units;if(s){for(var a in e)if(e.hasOwnProperty(a)){for(var d=!1,b=0;b<e[a].length;b++)for(var _=e[a][b],_e=0;_e<s.length;_e++){var nt=s[_e];_.code===nt&&(d=!0,this._coordinateSearchUnits[a]||(this._coordinateSearchUnits[a]=[]),this._coordinateSearchUnits[a].push(_))}d||(this._coordinateSearchUnits[a]=e[a])}}typeof this._coordinateSearchUnits=="object"&&Object.keys(this._coordinateSearchUnits).length===0&&(this._coordinateSearchUnits=e)}_initPopupDiv(){var e=this,s=document.createElement("div");s.className="gp-feature-info-div";var a=document.createElement("input");return a.type="button",a.className="gp-styling-button closer",a.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",s.appendChild(this._popupContent),s.appendChild(a),s}_initContainer(){var e=this._createMainContainerElement(),s=this._createSearchDivElement(),a=this._showSearchEngineButton=this._createShowSearchEnginePictoElement(this.options.collapsible);s.appendChild(a),this.options.collapsible||e.classList.add("gpf-widget-color","gpf-widget-padding");var d=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder);this.options.displayButtonClose&&d.appendChild(this._createSearchResetElement());var b=this;d.addEventListener?d.addEventListener("click",function(){b.onAutoCompleteInputClick()}):d.attachEvent&&d.attachEvent("onclick",function(){b.onAutoCompleteInputClick()}),s.appendChild(d);var _=this._createButtonsElement(),_e=this._createFirstLineWrapper();if(_e.appendChild(s),_e.appendChild(_),e.appendChild(_e),checkDsfr()&&this.options.splitResults||this.options.displayButtonAdvancedSearch){var nt=this._createRadioContainer();e.appendChild(nt)}if(checkDsfr()&&this.options.splitResults){var rt;[rt,this._radioButtonLocation,this._radioButtonSuggest]=this._createRadioElements(),nt.appendChild(rt)}if(this.options.displayButtonAdvancedSearch){var ct=this._createShowAdvancedSearchElement();nt.appendChild(ct);var dt=this._createAdvancedSearchPanelElement(),pt=this._createAdvancedSearchPanelDivElement(),bt=this._createAdvancedSearchPanelHeaderElement(),xt=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),wt=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var Tt=this._createAdvancedSearchFormInputElement();xt.appendChild(wt),xt.appendChild(Tt),pt.appendChild(bt),pt.appendChild(xt),dt.appendChild(pt),e.appendChild(dt)}if(this.options.displayButtonGeolocate){var Rt=this._createShowGeolocateElement();_.appendChild(Rt)}if(this.options.displayButtonCoordinateSearch){var Mt=this._createShowSearchByCoordinateElement();_.appendChild(Mt);var Et=this._createCoordinateSearchPanelElement(),$t=this._createCoordinateSearchPanelDivElement(),Xt=this._createCoordinateSearchPanelHeaderElement(),Zt=this._createCoordinateSearchPanelFormElement(),Nt=null;Nt=this._containerSystems=this.__createCoordinateSearchDivElement(),Zt.appendChild(Nt);var Jt=this._createCoordinateSearchSystemsLabelElement(),dn=this._setCoordinateSearchSystemsSelectElement(this._coordinateSearchSystems);Nt.appendChild(Jt),Nt.appendChild(dn),Nt=this._containerUnits=this.__createCoordinateSearchDivElement(),Zt.appendChild(Nt);var Pn=this._createCoordinateSearchUnitsLabelElement(),an=this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[this._currentCoordinateSearchType]);Nt.appendChild(Pn),Nt.appendChild(an),Nt=this._containerCoordinateLng=this.__createCoordinateSearchDivElement(),Zt.appendChild(Nt);var Vt=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),ao=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);Nt.appendChild(Vt),Nt.appendChild(ao),Nt=this._containerCoordinateLat=this.__createCoordinateSearchDivElement(),Zt.appendChild(Nt);var hn=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),fn=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);Nt.appendChild(hn),Nt.appendChild(fn);var It=this._createCoordinateSearchSubmitElement();Zt.appendChild(It),$t.appendChild(Xt),$t.appendChild(Zt),Et.appendChild($t),e.appendChild(Et)}var Vn=this._autocompleteContainer=this._createAutoCompleteElement(),ln=this._createAutoCompleteListElement(),uo=this._containerResultsLocation=this._createAutoCompletedLocationContainer(),Ln=this._containerResultsSuggest=this._createSearchedSuggestContainer();ln.appendChild(uo),ln.appendChild(Ln),Vn.appendChild(ln),e.appendChild(Vn);var An=this._createGeocodeResultsElement(),Wn=this._createGeocodeResultsDivElement();An.appendChild(Wn);var er=this._geocodedContainer=this._createGeocodeResultsListElement();return Wn.appendChild(er),e.appendChild(An),e}_setFilter(e){for(var s=this._filterContainer,a=!1,d=0;d<this._advancedSearchCodes.length;d++)if(this._advancedSearchCodes[d].id===e){a=!0;break}if(!a){for(;s.firstChild;)s.removeChild(s.firstChild);return}for(this._currentGeocodingCode=e;s.firstChild;)s.removeChild(s.firstChild);var b=this._advancedSearchFilters[e];if(!(!b||b.length===0)){for(var _=this._createAdvancedSearchFiltersTableElement(e,!0),_e=0;_e<b.length;_e++){var nt=this._createAdvancedSearchFiltersAttributElement(b[_e]);_.appendChild(nt)}return s.appendChild(_),s}}_requestAutoComplete(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){logger.log(e);var s={};Helper$1.assign(s,this.options.autocompleteOptions.serviceOptions),Helper$1.assign(s,e);var a=this.options.resources.autocomplete;a&&Array.isArray(a)&&(s.type||(s.type=a)),s.apiKey=s.apiKey||this.options.apiKey,typeof s.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?s.ssl=this.options.ssl:s.ssl=!0),logger.log(s),Gp.Services.autoComplete(s)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var s=this._containerResultsLocation;if(s.childElementCount)for(;s.firstChild;)s.removeChild(s.firstChild);if(s.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonLocation||this._radioButtonLocation&&this._radioButtonLocation.checked)&&s.classList.remove("GPelementHidden","gpf-hidden"),this._displaySuggestedLocation(),(!checkDsfr()||!this.options.splitResults)&&this._createAutoCompletedLocationTitleElement();for(var a=0;a<e.length;a++)this._createAutoCompletedLocationElement(e[a],a)}}}_fillSearchedSuggestListContainer(e){var s=this._containerResultsSuggest;if(s.childElementCount)for(;s.firstChild;)s.removeChild(s.firstChild);if(s.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonSuggest||this._radioButtonSuggest&&this._radioButtonSuggest.checked)&&s.classList.remove("GPelementHidden","gpf-hidden"),(!checkDsfr()||!this.options.splitResults)&&this._createSearchedSuggestTitleElement();for(let a=0;a<e.length;a++){const d=e[a];this._createSearchedSuggestElement(d,a)}}}_requestGeocoding(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){logger.log(e);var s={};Helper$1.assign(s,this.options.geocodeOptions.serviceOptions),Helper$1.assign(s,e);var a=this,d=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",b=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(b){var _=function(rt){e.onSuccess.call(a,rt),a.options.geocodeOptions.serviceOptions.onSuccess.call(a,rt)};s.onSuccess=_}if(d){var _e=function(rt){e.onFailure.call(a,rt),a.options.geocodeOptions.serviceOptions.onFailure.call(a,rt)};s.onFailure=_e}var nt=this.options.resources.geocode;nt&&(s.index||(s.index=nt)),s.apiKey=s.apiKey||this.options.apiKey,typeof s.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?s.ssl=this.options.ssl:s.ssl=!0),logger.log(s),Gp.Services.geocode(s)}}_fillGeocodedLocationListContainer(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var s=this._geocodedContainer;if(s.childElementCount)for(;s.firstChild;)s.removeChild(s.firstChild);for(var a=0;a<e.length;a++)logger.log(e[a]),this._createGeocodedLocationElement(e[a],a);this._geocodedLocations=e}_setLabel(e){document.getElementById("GPsearchInputText-"+this._uid).value=e}_setPosition(e,s){var a=this.getMap().getView();a.setCenter(e),a.setZoom(s)}_setMarker(e,s){var a=this.getMap(),d=this;if(this._marker!=null&&(a.removeOverlay(this._marker),this._marker=null),e){var b=document.createElement("img");b.src=this._markerUrl,b.addEventListener?b.addEventListener("click",function(){d._onResultMarkerSelect(s)}):b.attachEvent&&b.attachEvent("onclick",function(){d._onResultMarkerSelect(s)}),this._marker=new Overlay({position:e,positioning:"center-center",element:b,stopEvent:!1}),a.addOverlay(this._marker)}}_getZoom(e){var s=this.getMap(),a=this.options.zoomTo,d=null;if(typeof a=="function"&&(logger.trace("zoom function"),d=a.call(this,e)),typeof a=="number"&&(logger.trace("zoom level"),d=a),typeof a=="string")if(a==="auto")logger.trace("zoom auto"),d=SearchEngineUtils.zoomToResultsByDefault(e);else{logger.trace("zoom level parsing");var b=parseInt(a,10);isNaN(b)||(logger.trace("zoom parsing"),d=b)}Number.isInteger=Number.isInteger||function(nt){return typeof nt=="number"&&isFinite(nt)&&Math.floor(nt)===nt},(!d||d===""||!Number.isInteger(d))&&(logger.trace("zoom not found, current zoom..."),d=s.getView().getZoom());var _=s.minZoom,_e=s.maxZoom;return d<_&&(logger.trace("zoom level min..."),d=_),d>_e&&(logger.trace("zoom level max..."),d=_e),logger.trace("zoom",d),d}_onResultMarkerSelect(e){var s=this.getMap(),a="";if(typeof e!="string")if(e.service==="GeocodedLocation"){a="<ul>";var d=e.location.placeAttributes;for(var b in d)d.hasOwnProperty(b)&&b!=="trueGeometry"&&b!=="extraFields"&&b!=="houseNumberInfos"&&b!=="_count"&&(a+="<li>",a+='<span class="gp-attname-others-span">'+b.toUpperCase()+" : </span>",a+=d[b],a+=" </li>");a+=" </ul>"}else e.service==="SuggestedLocation"?a=GeocodeUtils.getSuggestedLocationFreeform(e.location):a="sans informations.";else a=e;this._popupContent.innerHTML=a,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),s.addOverlay(this._popupOverlay))}_setSystem(e){if(typeof e!="object"){logger.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger.error("crs not defined !");return}if(e.label||(logger.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var s=0;s<this._coordinateSearchSystems.length;s++){var a=this._coordinateSearchSystems[s];e.crs===a.crs&&logger.info("crs '{}' already configured",a.crs)}e.code=this._coordinateSearchSystems.length,this._coordinateSearchSystems.push(e)}onShowSearchEngineClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var s=this.getMap();Interactions.unset(s);var a=this._showSearchEngineButton.ariaPressed;this.collapsed=a!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed&&this._clearResults()}onSearchResetClick(){this._clearResults()}onShowSearchGeolocateClick(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{var s=this.getMap().getView(),a=s.getProjection().getCode(),d=[e.coords.longitude,e.coords.latitude];if(a!=="EPSG:4326"&&(d=transform$1(d,"EPSG:4326",a)),isNaN(d[0])||isNaN(d[1])){this._setMarker();return}this._setPosition(d,10),this._displayMarker&&this._setMarker(d,"sans information"),this.dispatchEvent({type:"searchengine:geolocation:click",coordinates:d})})}onShowSearchByCoordinateClick(){var e=null,s=null;if(this._coordinateSearchLngInput&&this._coordinateSearchLngInput.nodeName==="DIV"&&this._coordinateSearchLatInput&&this._coordinateSearchLatInput.nodeName==="DIV"?(e=this._getCoordinateSearchDMS(this._coordinateSearchLngInput),s=this._getCoordinateSearchDMS(this._coordinateSearchLatInput)):(e=this._coordinateSearchLngInput.value,s=this._coordinateSearchLatInput.value),!(!e||!s)){var a=[e,s],d=this.getMap().getView(),b=d.getProjection().getCode();if(b!=="EPSG:4326"&&(a=transform$1(a,"EPSG:4326",b)),isNaN(a[0])||isNaN(a[1])){this._setMarker();return}this._setPosition(a,10),this._displayMarker&&this._setMarker(a,"sans information"),this.dispatchEvent({type:"searchengine:coordinates:click",coordinates:a})}}_getCoordinateSearchDMS(e){if(e&&e.nodeName==="DIV"){var s=e.querySelectorAll("[name]");if(s){var a=MathUtils.toInteger(s[0].value),d=MathUtils.toInteger(s[1].value),b=MathUtils.toInteger(s[2].value),_=s[3].options[s[3].selectedIndex].text;return!a||!d||!b||!_?void 0:MathUtils.dmsToDecimal(a,d,b,_)}}}onAutoCompleteInputClick(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var s=e.target.value;if(s){if(this._currentGeocodingLocation=s,s.length<3){this._clearSuggestedLocation();return}var a=this.options.autocompleteOptions.triggerGeocode,d=this.options.autocompleteOptions.triggerDelay,b=this;this._requestAutoComplete({text:s,onSuccess:function(_e){if(logger.log("request from AutoComplete",_e),_e){b._suggestedLocations=_e.suggestedLocations,b._locationsToBeDisplayed=[];for(var nt=0;nt<b._suggestedLocations.length;nt++){var rt=b._suggestedLocations[nt];rt.position&&rt.position.x===0&&rt.position.y===0&&rt.fullText?b._getGeocodeCoordinatesFromFullText(rt,nt):b._locationsToBeDisplayed.push(rt)}b._fillAutoCompletedLocationListContainer(b._locationsToBeDisplayed),b._triggerHandler&&(clearTimeout(b._triggerHandler),b._triggerHandler=null,logger.warn("Cancel a geocode request !"))}},onFailure:function(_e){b._clearSuggestedLocation(),logger.log(_e.message),_e.message==="No suggestion matching the search"&&a&&(b._triggerHandler&&(clearTimeout(b._triggerHandler),logger.warn("Cancel the last geocode request !")),b._triggerHandler=setTimeout(function(){logger.warn("Launch a geocode request !"),b._requestGeocoding({location:s,onSuccess:function(nt){if(logger.log("request from Geocoding",nt),nt){b._locationsToBeDisplayed=[];for(var rt=nt.locations,ct=0;ct<rt.length;ct++){var dt=rt[ct];dt.fullText=GeocodeUtils.getGeocodedLocationFreeform(dt),dt.position={x:dt.position.lon,y:dt.position.lat},b._locationsToBeDisplayed.push(dt)}b._fillAutoCompletedLocationListContainer(rt)}},onFailure:function(nt){logger.log(nt.message)}})},d))}}),this.options.resources.search&&Search.suggest(s);var _=this.getMap();_.on("click",this._hideSuggestedLocation,this),_.on("pointerdrag",this._hideSuggestedLocation,this)}}_getGeocodeCoordinatesFromFullText(e,s){var a=this;Gp.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:GeocodeUtils.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(d){logger.log("request from Geocoding (coordinates null)",d),d.locations&&d.locations.length!==0&&d.locations[0].position&&a._suggestedLocations&&a._suggestedLocations[s]&&(a._suggestedLocations[s].position={lon:d.locations[0].position.y,lat:d.locations[0].position.x},a._locationsToBeDisplayed.unshift(a._suggestedLocations[s]),a._fillAutoCompletedLocationListContainer(a._locationsToBeDisplayed))},onFailure:function(){a._suggestedLocations&&a._suggestedLocations[s]&&a._createAutoCompletedLocationElement(a._suggestedLocations[s],s)}})}onAutoCompletedResultsItemClick(e){var s=SelectorID.index(e.target.id);if(logger.log(s),logger.log(this._locationsToBeDisplayed[s]),!!s){var a=[this._locationsToBeDisplayed[s].position.x,this._locationsToBeDisplayed[s].position.y],d={service:"SuggestedLocation",location:this._locationsToBeDisplayed[s]},b=GeocodeUtils.getSuggestedLocationFreeform(this._locationsToBeDisplayed[s]);this._setLabel(b),this._currentGeocodingLocation=b;var _=this.getMap().getView(),_e=_.getProjection().getCode();_e!=="EPSG:4326"&&(a=transform$1(a,"EPSG:4326",_e));var nt=this._getZoom(d);this._setPosition(a,nt),this._displayMarker&&this._setMarker(a,d),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[s]})}}onSearchedResultsItemClick(e){var s=SelectorID.index(e.target.id),a=null;try{var d=Search.getSuggestions()[s];if(!d)throw"No suggestions found !";if(this.options.searchOptions.addToMap){if(!Config$1.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var b=d.service,_=d.name,_e=null;switch(b){case"WMS":_e=new LayerWMS({layer:_});break;case"WMTS":_e=new LayerWMTS({layer:_});break;case"TMS":_e=new LayerMapBox({layer:_});default:break}if(_e){var nt=this.getMap();nt.addLayer(_e)}}}catch(rt){a=rt}this.dispatchEvent({type:"searchengine:search:click",suggest:d,error:a})}onGeocodingSearchSubmit(e){var s=e.target[0].value;if(s){this._currentGeocodingLocation=s;var a=this;this._requestGeocoding({query:s,onSuccess:function(d){if(logger.log("request from Geocoding",d),d){var b=d.locations;a._fillGeocodedLocationListContainer(b)}},onFailure:function(d){a._clearGeocodedLocation(),logger.log(d.message)}})}}onGeocodedResultsItemClick(e){var s=SelectorID.index(e.target.id);if(s){var a=[this._geocodedLocations[s].position.lon,this._geocodedLocations[s].position.lat],d={service:"GeocodedLocation",location:this._geocodedLocations[s]},b=GeocodeUtils.getGeocodedLocationFreeform(this._geocodedLocations[s]);this._setLabel(b);var _=this.getMap().getView(),_e=_.getProjection().getCode();_e!=="EPSG:4326"&&(a=transform$1(a,"EPSG:4326",_e));var nt=this._getZoom(this.options.zoomTo);this._setPosition(a,nt),this._displayMarker&&this._setMarker(a,d),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[s]})}}onGeocodingAdvancedSearchCodeChange(e){logger.log(e);var s=e.target.selectedIndex,a=e.target.options[s].value;a&&this._setFilter(a)}onGeocodingAdvancedSearchSubmit(e,s){if(logger.log(s),!(!s||s.length===0)){for(var a,d={},b=0;b<s.length;b++){var _=s[b];_.value&&(_.key==="section"&&(_.value=_.value.toUpperCase()),d[_.key]=_.value)}var _e=document.getElementById("GPsearchInputText-"+this._uid);a=_e.value,this._currentGeocodingCode==="CadastralParcel"&&(a="");var nt=this;this._requestGeocoding({query:a,index:this._currentGeocodingCode,filters:d,onSuccess:function(rt){if(logger.log(rt),rt){var ct=rt.locations;nt._fillGeocodedLocationListContainer(ct)}},onFailure:function(rt){nt._clearGeocodedLocation(),logger.log(rt.message)}})}}_getCadastralParcelRequestParams(e){var s="",a,d=e.department;d?(a=d.length,a===2?s=d:a===1?s="0"+d:s=d.substring(0,2)):s="__";var b=e.commune;b?(a=b.length,a===3?s+=b:a===2?s+="_"+b:a===1?s+="__"+b:s+=b.substring(0,3)):s+="___";var _=e.insee;_&&_.length===5&&(s=_);var _e=e.absorbedCity;_e?(a=_e.length,a===3?s+=_e:a<3?a===2?s+="_"+_e:a===1&&(s+="__"+_e):s+=_e.substring(0,3)):s+="___";var nt=e.section;nt?(a=nt.length,a===2?s+=nt:a===1?s+="_"+nt:s+=nt.substring(0,2)):s+="__";var rt=e.number;return rt?(a=rt.length,a===4?s+=rt:a===3?s+="_"+rt:a===2?s+="__"+rt:a===1?s+="___"+rt:s+=rt.substring(0,4)):s+="___",logger.log("location : "+s),s}onCoordinateSearchSystemChange(e){var s=e.target.selectedIndex,a=e.target.options[s].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="";for(var d=null,b=0;b<this._coordinateSearchSystems.length;++b)if(this._coordinateSearchSystems[b].code===Number(a)){d=this._coordinateSearchSystems[b].type;break}if(!d){logger.log("system not found in projection systems container");return}this._currentCoordinateSearchSystems=this._coordinateSearchSystems[Number(a)],d!==this._currentCoordinateSearchType&&(this._currentCoordinateSearchType=d,this._currentCoordinateSearchUnits=this._coordinateSearchUnits[d][0].code,this._containerUnits.appendChild(this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[d])),this._updateCoordinateSearchElements())}onCoordinateSearchUnitsChange(e){var s=e.target.selectedIndex,a=e.target.options[s].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="",this._currentCoordinateSearchUnits=a,this._updateCoordinateSearchElements()}onCoordinateSearchClose(){this._setMarker(),this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value=""}_updateCoordinateSearchElements(){var e=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),s=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);this._containerCoordinateLng.appendChild(e),this._containerCoordinateLng.appendChild(s),e=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),s=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits),this._containerCoordinateLat.appendChild(e),this._containerCoordinateLat.appendChild(s)}_clearResults(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._containerResultsLocation)for(;this._containerResultsLocation.firstChild;)this._containerResultsLocation.removeChild(this._containerResultsLocation.firstChild);if(this.options.resources.search&&(Search.clear(),this._containerResultsSuggest))for(;this._containerResultsSuggest.firstChild;)this._containerResultsSuggest.removeChild(this._containerResultsSuggest.firstChild)}_hideSuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementVisible","GPelementHidden"),this._autocompleteContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementHidden","GPelementVisible"),this._autocompleteContainer.classList.replace("gpf-hidden","gpf-visible"))}_clearGeocodedLocation(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)}};Object.assign(SearchEngine.prototype,SearchEngineDOM);Object.assign(SearchEngine.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=SearchEngine);LoggerByDefault$1.getLogger("zoom");var GeoportalZoom=class extends Zoom{constructor(e){e=e||{};var s="ol-custom-zoom";e.className=s,super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var s="position-container-"+this.options.position;if(!document.getElementById(s)){var a=document.createElement("div");a.id=s,a.classList.add("position"),a.classList.add(s),this.container.appendChild(a)}this.options.target=this.container.children[s]}}_initContainer(){this._uid=SelectorID.generate(),this.element.id="GPzoom-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-zoom","ol-unselectable","ol-control");var e=this,s=this.element.childNodes;for(let d=0;d<s.length;d++){const b=s[d];if(b.classList.contains(this.options.className+"-in")){b.classList.add("GPzoomIn","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-in","fr-btn","fr-btn--secondary","gpf-btn","gpf-btn--secondary","gpf-btn-icon"),b.id="GPzoomIn",b.innerHTML="",b.removeAttribute("title"),b.setAttribute("aria-label","Zoomer");var a=document.createElement("span");b.appendChild(a),b.addEventListener?b.addEventListener("click",function(){e.dispatchEvent("zoom:in")}):b.attachEvent&&b.attachEvent("onclick",function(){e.dispatchEvent("zoom:in")})}if(b.classList.contains(this.options.className+"-out")){b.classList.add("GPzoomOut","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-out","fr-btn","fr-btn--secondary","gpf-btn","gpf-btn--secondary","gpf-btn-icon"),b.id="GPzoomOut",b.innerHTML="",b.removeAttribute("title"),b.setAttribute("aria-label","Dzoomer");var a=document.createElement("span");b.appendChild(a),b.addEventListener?b.addEventListener("click",function(){e.dispatchEvent("zoom:out")}):b.attachEvent&&b.attachEvent("onclick",function(){e.dispatchEvent("zoom:out")})}}this.options.position&&(this.element.style.position="unset")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var s=e.getControls();s.forEach(a=>{a.element.classList.contains("ol-zoom")&&(a.element.classList.add("ol-hidden"),a.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalZoom=GeoportalZoom);const UNITS_PROP="units",LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28;class ScaleLine extends Control{constructor(e){e=e||{};const s=document.createElement("div");s.style.pointerEvents="none",super({element:s,render:e.render,target:e.target}),this.on,this.once,this.un;const a=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=a+"-inner",this.element.className=a+" "+CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(UNITS_PROP,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(UNITS_PROP)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(UNITS_PROP,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const s=e.center,a=e.projection,d=this.getUnits(),b=d=="degrees"?"degrees":"m";let _=getPointResolution(a,e.resolution,s,b);const _e=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,nt=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI:void 0;let rt=_e*_,ct="";if(d=="degrees"){const Et=METERS_PER_UNIT$1.degrees;rt*=Et,rt<Et/60?(ct="",_*=3600):rt<Et?(ct="",_*=60):ct=""}else if(d=="imperial")rt<.9144?(ct="in",_/=.0254):rt<1609.344?(ct="ft",_/=.3048):(ct="mi",_/=1609.344);else if(d=="nautical")_/=1852,ct="NM";else if(d=="metric")rt<.001?(ct="m",_*=1e6):rt<1?(ct="mm",_*=1e3):rt<1e3?ct="m":(ct="km",_/=1e3);else if(d=="us")rt<.9144?(ct="in",_*=39.37):rt<1609.344?(ct="ft",_/=.30480061):(ct="mi",_/=1609.3472);else throw new Error("Invalid units");let dt=3*Math.floor(Math.log(_e*_)/Math.log(10)),pt,bt,xt,wt,Tt,Rt;for(;;){xt=Math.floor(dt/3);const Et=Math.pow(10,xt);if(pt=LEADING_DIGITS[(dt%3+3)%3]*Et,bt=Math.round(pt/_),isNaN(bt)){this.element.style.display="none",this.renderedVisible_=!1;return}if(nt!==void 0&&bt>=nt){pt=wt,bt=Tt,xt=Rt;break}else if(bt>=_e)break;wt=pt,Tt=bt,Rt=xt,++dt}const Mt=this.scaleBar_?this.createScaleBar(bt,pt,ct):pt.toFixed(xt<0?-xt:0)+" "+ct;this.renderedHTML_!=Mt&&(this.innerElement_.innerHTML=Mt,this.renderedHTML_=Mt),this.renderedWidth_!=bt&&(this.innerElement_.style.width=bt+"px",this.renderedWidth_=bt),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,s,a){const d=this.getScaleForResolution(),b=d<1?Math.round(1/d).toLocaleString()+" : 1":"1 : "+Math.round(d).toLocaleString(),_=this.scaleBarSteps_,_e=e/_,nt=[this.createMarker("absolute")];for(let ct=0;ct<_;++ct){const dt=ct%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";nt.push(`<div><div class="ol-scale-singlebar ${dt}" style="width: ${_e}px;"></div>`+this.createMarker("relative")+(ct%2===0||_===2?this.createStepText(ct,e,!1,s,a):"")+"</div>")}return nt.push(this.createStepText(_,e,!0,s,a)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+b+"</div>":"")+nt.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,s,a,d,b){const _e=(e===0?0:Math.round(d/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+b),nt=e===0?-3:s/this.scaleBarSteps_*-1,rt=e===0?0:s/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${nt}px;text-align: ${e===0?"left":"center"};min-width: ${rt}px;left: ${a?s+"px":"unset"};">`+_e+"</div>"}getScaleForResolution(){const e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),s=this.dpi_||DEFAULT_DPI,a=1e3/25.4;return e*a*s}render(e){const s=e.frameState;s?this.viewState_=s.viewState:this.viewState_=null,this.updateElement_()}}const geometry={type:"MultiPolygon",coordinates:[[[[5.5571875,47.94089844],[5.5571875,47.9815625],[5.478125,47.9815625],[5.478125,48.02222656],[5.478125,48.06289063],[5.478125,48.10355469],[5.478125,48.14421875],[5.5571875,48.14421875],[5.5571875,48.18488281],[5.5571875,48.22554687],[5.5571875,48.26621094],[5.63625,48.26621094],[5.63625,48.306875],[5.63625,48.34753906],[5.63625,48.38820312],[5.63625,48.42886719],[5.63625,48.46953125],[5.63625,48.51019531],[5.63625,48.55085938],[5.63625,48.59152344],[5.63625,48.6321875],[5.63625,48.67285156],[5.5571875,48.67285156],[5.5571875,48.71351562],[5.5571875,48.75417969],[5.478125,48.75417969],[5.478125,48.71351562],[5.478125,48.67285156],[5.3990625,48.67285156],[5.3990625,48.71351562],[5.3990625,48.75417969],[5.3990625,48.79484375],[5.32,48.79484375],[5.32,48.83550781],[5.32,48.87617187],[5.2409375,48.87617187],[5.2409375,48.91683594],[5.161875,48.91683594],[5.161875,48.87617187],[5.0828125,48.87617187],[5.00375,48.87617187],[5.00375,48.91683594],[5.00375,48.9575],[4.9246875,48.9575],[4.9246875,48.99816406],[4.9246875,49.03882813],[4.845625,49.03882813],[4.845625,49.07949219],[4.845625,49.12015625],[4.7665625,49.12015625],[4.6875,49.12015625],[4.6875,49.07949219],[4.6084375,49.07949219],[4.529375,49.07949219],[4.529375,49.12015625],[4.4503125,49.12015625],[4.4503125,49.16082031],[4.37125,49.16082031],[4.37125,49.20148437],[4.37125,49.24214844],[4.37125,49.2828125],[4.2921875,49.2828125],[4.2921875,49.24214844],[4.213125,49.24214844],[4.213125,49.2828125],[4.213125,49.32347656],[4.1340625,49.32347656],[4.1340625,49.36414062],[4.055,49.36414062],[3.9759375,49.36414062],[3.896875,49.36414062],[3.8178125,49.36414062],[3.73875,49.36414062],[3.6596875,49.36414062],[3.580625,49.36414062],[3.5015625,49.36414062],[3.4225,49.36414062],[3.3434375,49.36414062],[3.264375,49.36414062],[3.1853125,49.36414062],[3.10625,49.36414062],[3.0271875,49.36414062],[3.0271875,49.40480469],[2.948125,49.40480469],[2.8690625,49.40480469],[2.8690625,49.36414062],[2.79,49.36414062],[2.79,49.32347656],[2.79,49.2828125],[2.7109375,49.2828125],[2.631875,49.2828125],[2.5528125,49.2828125],[2.5528125,49.24214844],[2.47375,49.24214844],[2.47375,49.20148437],[2.3946875,49.20148437],[2.3946875,49.16082031],[2.3946875,49.12015625],[2.315625,49.12015625],[2.2365625,49.12015625],[2.2365625,49.07949219],[2.2365625,49.03882813],[2.1575,49.03882813],[2.1575,48.99816406],[2.0784375,48.99816406],[2.0784375,48.9575],[1.999375,48.9575],[1.999375,48.99816406],[1.999375,49.03882813],[1.999375,49.07949219],[2.0784375,49.07949219],[2.1575,49.07949219],[2.1575,49.12015625],[2.1575,49.16082031],[2.2365625,49.16082031],[2.315625,49.16082031],[2.315625,49.20148437],[2.315625,49.24214844],[2.3946875,49.24214844],[2.3946875,49.2828125],[2.47375,49.2828125],[2.47375,49.32347656],[2.5528125,49.32347656],[2.5528125,49.36414062],[2.631875,49.36414062],[2.7109375,49.36414062],[2.7109375,49.40480469],[2.79,49.40480469],[2.79,49.44546875],[2.79,49.48613281],[2.8690625,49.48613281],[2.8690625,49.52679688],[2.948125,49.52679688],[2.948125,49.56746094],[3.0271875,49.56746094],[3.0271875,49.608125],[3.10625,49.608125],[3.1853125,49.608125],[3.1853125,49.64878906],[3.264375,49.64878906],[3.3434375,49.64878906],[3.3434375,49.68945313],[3.3434375,49.73011719],[3.3434375,49.77078125],[3.3434375,49.81144531],[3.4225,49.81144531],[3.4225,49.85210937],[3.4225,49.89277344],[3.5015625,49.89277344],[3.5015625,49.9334375],[3.580625,49.9334375],[3.6596875,49.9334375],[3.73875,49.9334375],[3.8178125,49.9334375],[3.896875,49.9334375],[3.9759375,49.9334375],[3.9759375,49.97410156],[4.055,49.97410156],[4.055,50.01476563],[4.1340625,50.01476563],[4.1340625,50.05542969],[4.213125,50.05542969],[4.2921875,50.05542969],[4.37125,50.05542969],[4.37125,50.01476563],[4.4503125,50.01476563],[4.4503125,50.05542969],[4.529375,50.05542969],[4.529375,50.09609375],[4.6084375,50.09609375],[4.6084375,50.13675781],[4.6084375,50.17742188],[4.6875,50.17742188],[4.6875,50.21808594],[4.7665625,50.21808594],[4.845625,50.21808594],[4.845625,50.25875],[4.9246875,50.25875],[4.9246875,50.21808594],[5.00375,50.21808594],[5.00375,50.17742188],[5.00375,50.13675781],[5.00375,50.09609375],[5.00375,50.05542969],[4.9246875,50.05542969],[4.9246875,50.01476563],[5.00375,50.01476563],[5.00375,49.97410156],[5.00375,49.9334375],[5.00375,49.89277344],[5.0828125,49.89277344],[5.0828125,49.85210937],[5.161875,49.85210937],[5.161875,49.81144531],[5.161875,49.77078125],[5.2409375,49.77078125],[5.32,49.77078125],[5.3990625,49.77078125],[5.3990625,49.73011719],[5.3990625,49.68945313],[5.3990625,49.64878906],[5.478125,49.64878906],[5.5571875,49.64878906],[5.5571875,49.608125],[5.478125,49.608125],[5.478125,49.56746094],[5.478125,49.52679688],[5.5571875,49.52679688],[5.5571875,49.48613281],[5.63625,49.48613281],[5.63625,49.52679688],[5.7153125,49.52679688],[5.7153125,49.56746094],[5.794375,49.56746094],[5.8734375,49.56746094],[5.8734375,49.52679688],[5.794375,49.52679688],[5.794375,49.48613281],[5.7153125,49.48613281],[5.7153125,49.44546875],[5.63625,49.44546875],[5.63625,49.40480469],[5.5571875,49.40480469],[5.5571875,49.36414062],[5.63625,49.36414062],[5.63625,49.32347656],[5.63625,49.2828125],[5.5571875,49.2828125],[5.5571875,49.32347656],[5.478125,49.32347656],[5.478125,49.36414062],[5.3990625,49.36414062],[5.32,49.36414062],[5.32,49.32347656],[5.32,49.2828125],[5.3990625,49.2828125],[5.3990625,49.24214844],[5.3990625,49.20148437],[5.3990625,49.16082031],[5.478125,49.16082031],[5.478125,49.12015625],[5.478125,49.07949219],[5.478125,49.03882813],[5.478125,48.99816406],[5.5571875,48.99816406],[5.5571875,48.9575],[5.5571875,48.91683594],[5.5571875,48.87617187],[5.5571875,48.83550781],[5.63625,48.83550781],[5.63625,48.79484375],[5.63625,48.75417969],[5.7153125,48.75417969],[5.7153125,48.71351562],[5.794375,48.71351562],[5.794375,48.67285156],[5.794375,48.6321875],[5.7153125,48.6321875],[5.7153125,48.59152344],[5.7153125,48.55085938],[5.794375,48.55085938],[5.794375,48.51019531],[5.794375,48.46953125],[5.7153125,48.46953125],[5.7153125,48.42886719],[5.7153125,48.38820312],[5.7153125,48.34753906],[5.7153125,48.306875],[5.7153125,48.26621094],[5.7153125,48.22554687],[5.63625,48.22554687],[5.63625,48.18488281],[5.63625,48.14421875],[5.63625,48.10355469],[5.5571875,48.10355469],[5.5571875,48.06289063],[5.5571875,48.02222656],[5.63625,48.02222656],[5.63625,47.9815625],[5.63625,47.94089844],[5.5571875,47.94089844]],[[5.5571875,49.40480469],[5.5571875,49.44546875],[5.478125,49.44546875],[5.478125,49.48613281],[5.3990625,49.48613281],[5.3990625,49.44546875],[5.3990625,49.40480469],[5.478125,49.40480469],[5.5571875,49.40480469]],[[5.32,49.36414062],[5.32,49.40480469],[5.32,49.44546875],[5.32,49.48613281],[5.2409375,49.48613281],[5.2409375,49.44546875],[5.2409375,49.40480469],[5.2409375,49.36414062],[5.32,49.36414062]],[[4.37125,49.36414062],[4.37125,49.32347656],[4.4503125,49.32347656],[4.529375,49.32347656],[4.529375,49.36414062],[4.4503125,49.36414062],[4.37125,49.36414062]],[[4.529375,49.32347656],[4.529375,49.2828125],[4.6084375,49.2828125],[4.6084375,49.32347656],[4.529375,49.32347656]],[[2.948125,49.48613281],[2.948125,49.44546875],[3.0271875,49.44546875],[3.10625,49.44546875],[3.1853125,49.44546875],[3.1853125,49.40480469],[3.264375,49.40480469],[3.3434375,49.40480469],[3.4225,49.40480469],[3.4225,49.44546875],[3.5015625,49.44546875],[3.580625,49.44546875],[3.580625,49.40480469],[3.6596875,49.40480469],[3.73875,49.40480469],[3.8178125,49.40480469],[3.8178125,49.44546875],[3.896875,49.44546875],[3.9759375,49.44546875],[3.9759375,49.48613281],[4.055,49.48613281],[4.055,49.52679688],[3.9759375,49.52679688],[3.9759375,49.56746094],[3.9759375,49.608125],[3.896875,49.608125],[3.896875,49.56746094],[3.8178125,49.56746094],[3.8178125,49.608125],[3.8178125,49.64878906],[3.896875,49.64878906],[3.9759375,49.64878906],[3.9759375,49.68945313],[3.896875,49.68945313],[3.8178125,49.68945313],[3.73875,49.68945313],[3.73875,49.64878906],[3.6596875,49.64878906],[3.580625,49.64878906],[3.5015625,49.64878906],[3.4225,49.64878906],[3.4225,49.608125],[3.3434375,49.608125],[3.3434375,49.56746094],[3.264375,49.56746094],[3.1853125,49.56746094],[3.10625,49.56746094],[3.10625,49.52679688],[3.0271875,49.52679688],[3.0271875,49.48613281],[2.948125,49.48613281]],[[4.2921875,49.48613281],[4.2921875,49.44546875],[4.37125,49.44546875],[4.37125,49.48613281],[4.2921875,49.48613281]],[[5.161875,49.2828125],[5.161875,49.24214844],[5.161875,49.20148437],[5.161875,49.16082031],[5.161875,49.12015625],[5.161875,49.07949219],[5.161875,49.03882813],[5.2409375,49.03882813],[5.2409375,48.99816406],[5.2409375,48.9575],[5.32,48.9575],[5.32,48.91683594],[5.3990625,48.91683594],[5.3990625,48.87617187],[5.3990625,48.83550781],[5.478125,48.83550781],[5.478125,48.87617187],[5.478125,48.91683594],[5.478125,48.9575],[5.3990625,48.9575],[5.3990625,48.99816406],[5.3990625,49.03882813],[5.3990625,49.07949219],[5.3990625,49.12015625],[5.32,49.12015625],[5.32,49.16082031],[5.32,49.20148437],[5.2409375,49.20148437],[5.2409375,49.24214844],[5.2409375,49.2828125],[5.2409375,49.32347656],[5.161875,49.32347656],[5.161875,49.2828125]],[[5.0828125,48.9575],[5.161875,48.9575],[5.161875,48.99816406],[5.0828125,48.99816406],[5.0828125,48.9575]],[[4.529375,49.16082031],[4.6084375,49.16082031],[4.6084375,49.20148437],[4.529375,49.20148437],[4.529375,49.16082031]],[[4.213125,49.40480469],[4.213125,49.36414062],[4.2921875,49.36414062],[4.2921875,49.40480469],[4.213125,49.40480469]],[[3.4225,49.77078125],[3.4225,49.73011719],[3.5015625,49.73011719],[3.580625,49.73011719],[3.6596875,49.73011719],[3.73875,49.73011719],[3.73875,49.77078125],[3.73875,49.81144531],[3.8178125,49.81144531],[3.896875,49.81144531],[3.9759375,49.81144531],[4.055,49.81144531],[4.055,49.85210937],[3.9759375,49.85210937],[3.896875,49.85210937],[3.896875,49.89277344],[3.8178125,49.89277344],[3.73875,49.89277344],[3.73875,49.85210937],[3.6596875,49.85210937],[3.580625,49.85210937],[3.5015625,49.85210937],[3.5015625,49.81144531],[3.5015625,49.77078125],[3.4225,49.77078125]],[[3.9759375,49.77078125],[3.896875,49.77078125],[3.896875,49.73011719],[3.9759375,49.73011719],[3.9759375,49.77078125]]]]},type="Feature",extent={geometry,type},default_background_layer="GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",center=[2.35,48.85],projection="EPSG:3857",zoom=10,zoom_levels={TOP:0,BOTTOM:18},olDefaults={default_background_layer,center,projection,zoom,zoom_levels};function getAllTextContent(o,e){return getAllTextContent_(o,e,[]).join("")}function getAllTextContent_(o,e,s){if(o.nodeType==Node.CDATA_SECTION_NODE||o.nodeType==Node.TEXT_NODE)s.push(o.nodeValue);else{let a;for(a=o.firstChild;a;a=a.nextSibling)getAllTextContent_(a,e,s)}return s}function isDocument(o){return"documentElement"in o}function parse(o){return new DOMParser().parseFromString(o,"application/xml")}function makeArrayPusher(o,e){return function(s,a){const d=o.call(this,s,a);d!==void 0&&a[a.length-1].push(d)}}function makeObjectPropertyPusher(o,e,s){return function(a,d){const b=o.call(this,a,d);if(b!==void 0){const _=d[d.length-1],_e=a.localName;let nt;_e in _?nt=_[_e]:(nt=[],_[_e]=nt),nt.push(b)}}}function makeObjectPropertySetter(o,e,s){return function(a,d){const b=o.call(this,a,d);if(b!==void 0){const _=d[d.length-1],_e=a.localName;_[_e]=b}}}function makeStructureNS(o,e,s){s=s!==void 0?s:{};let a,d;for(a=0,d=o.length;a<d;++a)s[o[a]]=e;return s}function parseNode(o,e,s,a){let d;for(d=e.firstElementChild;d;d=d.nextElementSibling){const b=o[d.namespaceURI];if(b!==void 0){const _=b[d.localName];_!==void 0&&_.call(a,d,s)}}}function pushParseAndPop(o,e,s,a,d){return a.push(o),parseNode(e,s,a,d),a.pop()}class XML{read(e){if(!e)return null;if(typeof e=="string"){const s=parse(e);return this.readFromDocument(s)}return isDocument(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let s=e.firstChild;s;s=s.nextSibling)if(s.nodeType==Node.ELEMENT_NODE)return this.readFromNode(s);return null}readFromNode(e){abstract()}}const NAMESPACE_URI="http://www.w3.org/1999/xlink";function readHref(o){return o.getAttributeNS(NAMESPACE_URI,"href")}function readDecimal(o){const e=getAllTextContent(o,!1);return readDecimalString(e)}function readDecimalString(o){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(o);if(e)return parseFloat(e[1])}function readPositiveInteger(o){const e=getAllTextContent(o,!1);return readNonNegativeIntegerString(e)}function readNonNegativeIntegerString(o){const e=/^\s*(\d+)\s*$/.exec(o);if(e)return parseInt(e[1],10)}function readString(o){return getAllTextContent(o,!1).trim()}const NAMESPACE_URIS$1=[null,"http://www.opengis.net/ows/1.1"],PARSERS$1=makeStructureNS(NAMESPACE_URIS$1,{ServiceIdentification:makeObjectPropertySetter(readServiceIdentification),ServiceProvider:makeObjectPropertySetter(readServiceProvider),OperationsMetadata:makeObjectPropertySetter(readOperationsMetadata)});class OWS extends XML{constructor(){super()}readFromNode(e){const s=pushParseAndPop({},PARSERS$1,e,[]);return s||null}}const ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DeliveryPoint:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),AdministrativeArea:makeObjectPropertySetter(readString),PostalCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString),ElectronicMailAddress:makeObjectPropertySetter(readString)}),ALLOWED_VALUES_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Value:makeObjectPropertyPusher(readValue)}),CONSTRAINT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{AllowedValues:makeObjectPropertySetter(readAllowedValues)}),CONTACT_INFO_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Phone:makeObjectPropertySetter(readPhone),Address:makeObjectPropertySetter(readAddress)}),DCP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{HTTP:makeObjectPropertySetter(readHttp)}),HTTP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Get:makeObjectPropertyPusher(readGet),Post:void 0}),OPERATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DCP:makeObjectPropertySetter(readDcp)}),OPERATIONS_METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Operation:readOperation}),PHONE_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Voice:makeObjectPropertySetter(readString),Facsimile:makeObjectPropertySetter(readString)}),REQUEST_METHOD_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Constraint:makeObjectPropertyPusher(readConstraint)}),SERVICE_CONTACT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{IndividualName:makeObjectPropertySetter(readString),PositionName:makeObjectPropertySetter(readString),ContactInfo:makeObjectPropertySetter(readContactInfo)}),SERVICE_IDENTIFICATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Abstract:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),Fees:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),ServiceTypeVersion:makeObjectPropertySetter(readString),ServiceType:makeObjectPropertySetter(readString)}),SERVICE_PROVIDER_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{ProviderName:makeObjectPropertySetter(readString),ProviderSite:makeObjectPropertySetter(readHref),ServiceContact:makeObjectPropertySetter(readServiceContact)});function readAddress(o,e){return pushParseAndPop({},ADDRESS_PARSERS,o,e)}function readAllowedValues(o,e){return pushParseAndPop({},ALLOWED_VALUES_PARSERS,o,e)}function readConstraint(o,e){const s=o.getAttribute("name");if(s)return pushParseAndPop({name:s},CONSTRAINT_PARSERS,o,e)}function readContactInfo(o,e){return pushParseAndPop({},CONTACT_INFO_PARSERS,o,e)}function readDcp(o,e){return pushParseAndPop({},DCP_PARSERS,o,e)}function readGet(o,e){const s=readHref(o);if(s)return pushParseAndPop({href:s},REQUEST_METHOD_PARSERS,o,e)}function readHttp(o,e){return pushParseAndPop({},HTTP_PARSERS,o,e)}function readOperation(o,e){const s=o.getAttribute("name"),a=pushParseAndPop({},OPERATION_PARSERS,o,e);if(!a)return;const d=e[e.length-1];d[s]=a}function readOperationsMetadata(o,e){return pushParseAndPop({},OPERATIONS_METADATA_PARSERS,o,e)}function readPhone(o,e){return pushParseAndPop({},PHONE_PARSERS,o,e)}function readServiceIdentification(o,e){return pushParseAndPop({},SERVICE_IDENTIFICATION_PARSERS,o,e)}function readServiceContact(o,e){return pushParseAndPop({},SERVICE_CONTACT_PARSERS,o,e)}function readServiceProvider(o,e){return pushParseAndPop({},SERVICE_PROVIDER_PARSERS,o,e)}function readValue(o,e){return readString(o)}const NAMESPACE_URIS=[null,"http://www.opengis.net/wmts/1.0"],OWS_NAMESPACE_URIS=[null,"http://www.opengis.net/ows/1.1"],PARSERS=makeStructureNS(NAMESPACE_URIS,{Contents:makeObjectPropertySetter(readContents)});class WMTSCapabilities extends XML{constructor(){super(),this.owsParser_=new OWS}readFromNode(e){let s=e.getAttribute("version");s&&(s=s.trim());let a=this.owsParser_.readFromNode(e);return a?(a.version=s,a=pushParseAndPop(a,PARSERS,e,[]),a||null):null}}const CONTENTS_PARSERS=makeStructureNS(NAMESPACE_URIS,{Layer:makeObjectPropertyPusher(readLayer),TileMatrixSet:makeObjectPropertyPusher(readTileMatrixSet)}),LAYER_PARSERS=makeStructureNS(NAMESPACE_URIS,{Style:makeObjectPropertyPusher(readStyle),Format:makeObjectPropertyPusher(readString),TileMatrixSetLink:makeObjectPropertyPusher(readTileMatrixSetLink),Dimension:makeObjectPropertyPusher(readDimensions),ResourceURL:makeObjectPropertyPusher(readResourceUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),WGS84BoundingBox:makeObjectPropertySetter(readBoundingBox),Identifier:makeObjectPropertySetter(readString)})),STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS,{LegendURL:makeObjectPropertyPusher(readLegendUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString)})),TMS_LINKS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixSet:makeObjectPropertySetter(readString),TileMatrixSetLimits:makeObjectPropertySetter(readTileMatrixLimitsList)}),TMS_LIMITS_LIST_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixLimits:makeArrayPusher(readTileMatrixLimits)}),TMS_LIMITS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrix:makeObjectPropertySetter(readString),MinTileRow:makeObjectPropertySetter(readPositiveInteger),MaxTileRow:makeObjectPropertySetter(readPositiveInteger),MinTileCol:makeObjectPropertySetter(readPositiveInteger),MaxTileCol:makeObjectPropertySetter(readPositiveInteger)}),DIMENSION_PARSERS=makeStructureNS(NAMESPACE_URIS,{Default:makeObjectPropertySetter(readString),Value:makeObjectPropertyPusher(readString)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)})),WGS84_BBOX_READERS=makeStructureNS(OWS_NAMESPACE_URIS,{LowerCorner:makeArrayPusher(readCoordinates),UpperCorner:makeArrayPusher(readCoordinates)}),TMS_PARSERS=makeStructureNS(NAMESPACE_URIS,{WellKnownScaleSet:makeObjectPropertySetter(readString),TileMatrix:makeObjectPropertyPusher(readTileMatrix)},makeStructureNS(OWS_NAMESPACE_URIS,{SupportedCRS:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString),BoundingBox:makeObjectPropertySetter(readBoundingBox)})),TM_PARSERS=makeStructureNS(NAMESPACE_URIS,{TopLeftCorner:makeObjectPropertySetter(readCoordinates),ScaleDenominator:makeObjectPropertySetter(readDecimal),TileWidth:makeObjectPropertySetter(readPositiveInteger),TileHeight:makeObjectPropertySetter(readPositiveInteger),MatrixWidth:makeObjectPropertySetter(readPositiveInteger),MatrixHeight:makeObjectPropertySetter(readPositiveInteger)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)}));function readContents(o,e){return pushParseAndPop({},CONTENTS_PARSERS,o,e)}function readLayer(o,e){return pushParseAndPop({},LAYER_PARSERS,o,e)}function readTileMatrixSet(o,e){return pushParseAndPop({},TMS_PARSERS,o,e)}function readStyle(o,e){const s=pushParseAndPop({},STYLE_PARSERS,o,e);if(!s)return;const a=o.getAttribute("isDefault")==="true";return s.isDefault=a,s}function readTileMatrixSetLink(o,e){return pushParseAndPop({},TMS_LINKS_PARSERS,o,e)}function readDimensions(o,e){return pushParseAndPop({},DIMENSION_PARSERS,o,e)}function readResourceUrl(o,e){const s=o.getAttribute("format"),a=o.getAttribute("template"),d=o.getAttribute("resourceType"),b={};return s&&(b.format=s),a&&(b.template=a),d&&(b.resourceType=d),b}function readBoundingBox(o,e){const s=pushParseAndPop([],WGS84_BBOX_READERS,o,e);if(s.length==2)return boundingExtent(s)}function readLegendUrl(o,e){const s={};return s.format=o.getAttribute("format"),s.href=readHref(o),s}function readCoordinates(o,e){const s=readString(o).split(/\s+/);if(!s||s.length!=2)return;const a=+s[0],d=+s[1];if(!(isNaN(a)||isNaN(d)))return[a,d]}function readTileMatrix(o,e){return pushParseAndPop({},TM_PARSERS,o,e)}function readTileMatrixLimitsList(o,e){return pushParseAndPop([],TMS_LIMITS_LIST_PARSERS,o,e)}function readTileMatrixLimits(o,e){return pushParseAndPop({},TMS_LIMITS_PARSERS,o,e)}const useCapabilities=(o="cartes")=>useQuery({queryKey:["gpp_get_cap",o],queryFn:async()=>{const e=await fetch("https://data.geopf.fr/wmts?SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetCapabilities");if(!e.ok)throw new Error(`Bad response from server : ${e.status}`);const s=await e.text(),d=new WMTSCapabilities().read(s);if(!d)throw new Error("Reading capabilities failed");return d},staleTime:1/0}),ExtentMap=()=>{const o=reactExports.useRef(null),e=reactExports.useRef(),{data:s}=useCapabilities();reactExports.useEffect(()=>{new Gp.Services.Config({customConfigFile:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/fullConfig.json",onSuccess:()=>{console.log("gp config loaded!")},onFailure:_=>{console.error(_)}}).call()},[]);const a=reactExports.useMemo(()=>{const b=new GeoJSON({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).readFeatures(extent),_=new VectorSource({features:b});return new VectorLayer({source:_})},[]),d=reactExports.useMemo(()=>{if(!s)return;const b=optionsFromCapabilities(s,{layer:olDefaults.default_background_layer});if(!b)return;const _=new TileLayer;return _.setSource(new WMTS$1(b)),_},[s]);return reactExports.useEffect(()=>{if(!d||!a)return;const b=new LayerSwitcher({layers:[{layer:d,config:{title:"Plan IGN v2"}},{layer:a,config:{title:"Emprise"}}],options:{position:"top-right",collapsed:!0,panel:!0,counter:!0}}),_=new Catalog({collapsed:!0,draggable:!1,titlePrimary:"",titleSecondary:"Grer vos couches de donnes",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Donnes",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]},position:"top-left"}),_e=[b,new SearchEngine({collapsed:!0,displayAdvancedSearch:!1,apiKey:"essentiels",zoomTo:"auto"}),new ScaleLine,new GeoportalZoom({position:"top-left"}),new GeoportalFullScreen({position:"bottom-right"}),_];e.current=new Map$1({target:o.current,layers:[d,a],interactions:defaults$1(),controls:_e,view:new View({projection:olDefaults.projection,center:fromLonLat(olDefaults.center),zoom:olDefaults.zoom})});const nt=a.getSource();return nt&&e.current.getView().fit(nt.getExtent()),()=>{var rt;return(rt=e.current)==null?void 0:rt.setTarget(void 0)}},[d,a]),jsxRuntimeExports.jsx("div",{id:"map-and-tools-container",style:{marginLeft:0,width:"inherit",height:"70vh",display:"flex"},children:jsxRuntimeExports.jsx("div",{ref:o,className:"map-view"})})};var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function o(a,d,b,_,_e,nt){if(nt!==ReactPropTypesSecret){var rt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw rt.name="Invariant Violation",rt}}o.isRequired=o;function e(){return o}var s={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:e,element:o,elementType:o,instanceOf:e,node:o,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return s.PropTypes=s,s};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports,__assign$2=function(){return __assign$2=Object.assign||function(o){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(o[d]=e[d])}return o},__assign$2.apply(this,arguments)},eventPropTypes={onActivate:propTypesExports.func,onAddUndo:propTypesExports.func,onBeforeAddUndo:propTypesExports.func,onBeforeExecCommand:propTypesExports.func,onBeforeGetContent:propTypesExports.func,onBeforeRenderUI:propTypesExports.func,onBeforeSetContent:propTypesExports.func,onBeforePaste:propTypesExports.func,onBlur:propTypesExports.func,onChange:propTypesExports.func,onClearUndos:propTypesExports.func,onClick:propTypesExports.func,onContextMenu:propTypesExports.func,onCommentChange:propTypesExports.func,onCompositionEnd:propTypesExports.func,onCompositionStart:propTypesExports.func,onCompositionUpdate:propTypesExports.func,onCopy:propTypesExports.func,onCut:propTypesExports.func,onDblclick:propTypesExports.func,onDeactivate:propTypesExports.func,onDirty:propTypesExports.func,onDrag:propTypesExports.func,onDragDrop:propTypesExports.func,onDragEnd:propTypesExports.func,onDragGesture:propTypesExports.func,onDragOver:propTypesExports.func,onDrop:propTypesExports.func,onExecCommand:propTypesExports.func,onFocus:propTypesExports.func,onFocusIn:propTypesExports.func,onFocusOut:propTypesExports.func,onGetContent:propTypesExports.func,onHide:propTypesExports.func,onInit:propTypesExports.func,onInput:propTypesExports.func,onKeyDown:propTypesExports.func,onKeyPress:propTypesExports.func,onKeyUp:propTypesExports.func,onLoadContent:propTypesExports.func,onMouseDown:propTypesExports.func,onMouseEnter:propTypesExports.func,onMouseLeave:propTypesExports.func,onMouseMove:propTypesExports.func,onMouseOut:propTypesExports.func,onMouseOver:propTypesExports.func,onMouseUp:propTypesExports.func,onNodeChange:propTypesExports.func,onObjectResizeStart:propTypesExports.func,onObjectResized:propTypesExports.func,onObjectSelected:propTypesExports.func,onPaste:propTypesExports.func,onPostProcess:propTypesExports.func,onPostRender:propTypesExports.func,onPreProcess:propTypesExports.func,onProgressState:propTypesExports.func,onRedo:propTypesExports.func,onRemove:propTypesExports.func,onReset:propTypesExports.func,onSaveContent:propTypesExports.func,onSelectionChange:propTypesExports.func,onSetAttrib:propTypesExports.func,onSetContent:propTypesExports.func,onShow:propTypesExports.func,onSubmit:propTypesExports.func,onUndo:propTypesExports.func,onVisualAid:propTypesExports.func,onSkinLoadError:propTypesExports.func,onThemeLoadError:propTypesExports.func,onModelLoadError:propTypesExports.func,onPluginLoadError:propTypesExports.func,onIconsLoadError:propTypesExports.func,onLanguageLoadError:propTypesExports.func,onScriptsLoad:propTypesExports.func,onScriptsLoadError:propTypesExports.func},EditorPropTypes=__assign$2({apiKey:propTypesExports.string,licenseKey:propTypesExports.string,id:propTypesExports.string,inline:propTypesExports.bool,init:propTypesExports.object,initialValue:propTypesExports.string,onEditorChange:propTypesExports.func,value:propTypesExports.string,tagName:propTypesExports.string,tabIndex:propTypesExports.number,cloudChannel:propTypesExports.string,plugins:propTypesExports.oneOfType([propTypesExports.string,propTypesExports.array]),toolbar:propTypesExports.oneOfType([propTypesExports.string,propTypesExports.array]),disabled:propTypesExports.bool,textareaName:propTypesExports.string,tinymceScriptSrc:propTypesExports.oneOfType([propTypesExports.string,propTypesExports.arrayOf(propTypesExports.string),propTypesExports.arrayOf(propTypesExports.shape({src:propTypesExports.string,async:propTypesExports.bool,defer:propTypesExports.bool}))]),rollback:propTypesExports.oneOfType([propTypesExports.number,propTypesExports.oneOf([!1])]),scriptLoading:propTypesExports.shape({async:propTypesExports.bool,defer:propTypesExports.bool,delay:propTypesExports.number})},eventPropTypes),isFunction$1=function(o){return typeof o=="function"},isEventProp=function(o){return o in eventPropTypes},eventAttrToEventName=function(o){return o.substr(2)},configHandlers2=function(o,e,s,a,d,b,_){var _e=Object.keys(d).filter(isEventProp),nt=Object.keys(b).filter(isEventProp),rt=_e.filter(function(dt){return b[dt]===void 0}),ct=nt.filter(function(dt){return d[dt]===void 0});rt.forEach(function(dt){var pt=eventAttrToEventName(dt),bt=_[pt];s(pt,bt),delete _[pt]}),ct.forEach(function(dt){var pt=a(o,dt),bt=eventAttrToEventName(dt);_[bt]=pt,e(bt,pt)})},configHandlers=function(o,e,s,a,d){return configHandlers2(d,o.on.bind(o),o.off.bind(o),function(b,_){return function(_e){var nt;return(nt=b(_))===null||nt===void 0?void 0:nt(_e,o)}},e,s,a)},unique=0,uuid=function(o){var e=Date.now(),s=Math.floor(Math.random()*1e9);return unique++,o+"_"+s+unique+String(e)},isTextareaOrInput=function(o){return o!==null&&(o.tagName.toLowerCase()==="textarea"||o.tagName.toLowerCase()==="input")},normalizePluginArray=function(o){return typeof o>"u"||o===""?[]:Array.isArray(o)?o:o.split(" ")},mergePlugins=function(o,e){return normalizePluginArray(o).concat(normalizePluginArray(e))},isBeforeInputEventAvailable=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},isInDoc=function(o){if(!("isConnected"in Node.prototype)){for(var e=o,s=o.parentNode;s!=null;)e=s,s=e.parentNode;return e===o.ownerDocument}return o.isConnected},setMode=function(o,e){o!==void 0&&(o.mode!=null&&typeof o.mode=="object"&&typeof o.mode.set=="function"?o.mode.set(e):o.setMode(e))},__assign$1=function(){return __assign$1=Object.assign||function(o){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(o[d]=e[d])}return o},__assign$1.apply(this,arguments)},injectScriptTag=function(o,e,s){var a,d,b=o.createElement("script");b.referrerPolicy="origin",b.type="application/javascript",b.id=e.id,b.src=e.src,b.async=(a=e.async)!==null&&a!==void 0?a:!1,b.defer=(d=e.defer)!==null&&d!==void 0?d:!1;var _=function(){b.removeEventListener("load",_),b.removeEventListener("error",_e),s(e.src)},_e=function(nt){b.removeEventListener("load",_),b.removeEventListener("error",_e),s(e.src,nt)};b.addEventListener("load",_),b.addEventListener("error",_e),o.head&&o.head.appendChild(b)},createDocumentScriptLoader=function(o){var e={},s=function(_,_e){var nt=e[_];nt.done=!0,nt.error=_e;for(var rt=0,ct=nt.handlers;rt<ct.length;rt++){var dt=ct[rt];dt(_,_e)}nt.handlers=[]},a=function(_,_e,nt){var rt=function(Mt){return nt!==void 0?nt(Mt):console.error(Mt)};if(_.length===0){rt(new Error("At least one script must be provided"));return}for(var ct=0,dt=!1,pt=function(Mt,Et){dt||(Et?(dt=!0,rt(Et)):++ct===_.length&&_e())},bt=0,xt=_;bt<xt.length;bt++){var wt=xt[bt],Tt=e[wt.src];if(Tt)Tt.done?pt(wt.src,Tt.error):Tt.handlers.push(pt);else{var Rt=uuid("tiny-");e[wt.src]={id:Rt,src:wt.src,done:!1,error:null,handlers:[pt]},injectScriptTag(o,__assign$1({id:Rt},wt),s)}}},d=function(){for(var _,_e=0,nt=Object.values(e);_e<nt.length;_e++){var rt=nt[_e],ct=o.getElementById(rt.id);ct!=null&&ct.tagName==="SCRIPT"&&((_=ct.parentNode)===null||_===void 0||_.removeChild(ct))}e={}},b=function(){return o};return{loadScripts:a,deleteScripts:d,getDocument:b}},createScriptLoader=function(){var o=[],e=function(d){var b=o.find(function(_){return _.getDocument()===d});return b===void 0&&(b=createDocumentScriptLoader(d),o.push(b)),b},s=function(d,b,_,_e,nt){var rt=function(){return e(d).loadScripts(b,_e,nt)};_>0?setTimeout(rt,_):rt()},a=function(){for(var d=o.pop();d!=null;d=o.pop())d.deleteScripts()};return{loadList:s,reinitialize:a}},ScriptLoader=createScriptLoader(),getTinymce=function(o){var e=o;return e&&e.tinymce?e.tinymce:null},__extends=function(){var o=function(e,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])},o(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");o(e,s);function a(){this.constructor=e}e.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}(),__assign=function(){return __assign=Object.assign||function(o){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(o[d]=e[d])}return o},__assign.apply(this,arguments)},Editor$1=function(o){__extends(e,o);function e(s){var a,d,b,_=o.call(this,s)||this;return _.rollbackTimer=void 0,_.valueCursor=void 0,_.rollbackChange=function(){var _e=_.editor,nt=_.props.value;_e&&nt&&nt!==_.currentContent&&_e.undoManager.ignore(function(){if(_e.setContent(nt),_.valueCursor&&(!_.inline||_e.hasFocus()))try{_e.selection.moveToBookmark(_.valueCursor)}catch{}}),_.rollbackTimer=void 0},_.handleBeforeInput=function(_e){if(_.props.value!==void 0&&_.props.value===_.currentContent&&_.editor&&(!_.inline||_.editor.hasFocus()))try{_.valueCursor=_.editor.selection.getBookmark(3)}catch{}},_.handleBeforeInputSpecial=function(_e){(_e.key==="Enter"||_e.key==="Backspace"||_e.key==="Delete")&&_.handleBeforeInput(_e)},_.handleEditorChange=function(_e){var nt=_.editor;if(nt&&nt.initialized){var rt=nt.getContent();_.props.value!==void 0&&_.props.value!==rt&&_.props.rollback!==!1&&(_.rollbackTimer||(_.rollbackTimer=window.setTimeout(_.rollbackChange,typeof _.props.rollback=="number"?_.props.rollback:200))),rt!==_.currentContent&&(_.currentContent=rt,isFunction$1(_.props.onEditorChange)&&_.props.onEditorChange(rt,nt))}},_.handleEditorChangeSpecial=function(_e){(_e.key==="Backspace"||_e.key==="Delete")&&_.handleEditorChange(_e)},_.initialise=function(_e){var nt,rt,ct;_e===void 0&&(_e=0);var dt=_.elementRef.current;if(dt){if(!isInDoc(dt)){if(_e===0)setTimeout(function(){return _.initialise(1)},1);else if(_e<100)setTimeout(function(){return _.initialise(_e+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var pt=getTinymce(_.view);if(!pt)throw new Error("tinymce should have been loaded into global scope");var bt=__assign(__assign(__assign(__assign({},_.props.init),{selector:void 0,target:dt,readonly:_.props.disabled,inline:_.inline,plugins:mergePlugins((nt=_.props.init)===null||nt===void 0?void 0:nt.plugins,_.props.plugins),toolbar:(rt=_.props.toolbar)!==null&&rt!==void 0?rt:(ct=_.props.init)===null||ct===void 0?void 0:ct.toolbar}),_.props.licenseKey?{license_key:_.props.licenseKey}:{}),{setup:function(xt){_.editor=xt,_.bindHandlers({}),_.inline&&!isTextareaOrInput(dt)&&xt.once("PostRender",function(wt){xt.setContent(_.getInitialValue(),{no_events:!0})}),_.props.init&&isFunction$1(_.props.init.setup)&&_.props.init.setup(xt)},init_instance_callback:function(xt){var wt,Tt,Rt=_.getInitialValue();_.currentContent=(wt=_.currentContent)!==null&&wt!==void 0?wt:xt.getContent(),_.currentContent!==Rt&&(_.currentContent=Rt,xt.setContent(Rt),xt.undoManager.clear(),xt.undoManager.add(),xt.setDirty(!1));var Mt=(Tt=_.props.disabled)!==null&&Tt!==void 0?Tt:!1;setMode(_.editor,Mt?"readonly":"design"),_.props.init&&isFunction$1(_.props.init.init_instance_callback)&&_.props.init.init_instance_callback(xt)}});_.inline||(dt.style.visibility=""),isTextareaOrInput(dt)&&(dt.value=_.getInitialValue()),pt.init(bt)}},_.id=_.props.id||uuid("tiny-react"),_.elementRef=reactExports.createRef(),_.inline=(b=(a=_.props.inline)!==null&&a!==void 0?a:(d=_.props.init)===null||d===void 0?void 0:d.inline)!==null&&b!==void 0?b:!1,_.boundHandlers={},_}return Object.defineProperty(e.prototype,"view",{get:function(){var s,a;return(a=(s=this.elementRef.current)===null||s===void 0?void 0:s.ownerDocument.defaultView)!==null&&a!==void 0?a:window},enumerable:!1,configurable:!0}),e.prototype.componentDidUpdate=function(s){var a=this,d,b;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(s),this.editor.initialized)){if(this.currentContent=(d=this.currentContent)!==null&&d!==void 0?d:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==s.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var _=this.editor;_.undoManager.transact(function(){var nt;if(!a.inline||_.hasFocus())try{nt=_.selection.getBookmark(3)}catch{}var rt=a.valueCursor;if(_.setContent(a.props.value),!a.inline||_.hasFocus())for(var ct=0,dt=[nt,rt];ct<dt.length;ct++){var pt=dt[ct];if(pt)try{_.selection.moveToBookmark(pt),a.valueCursor=pt;break}catch{}}})}if(this.props.disabled!==s.disabled){var _e=(b=this.props.disabled)!==null&&b!==void 0?b:!1;setMode(this.editor,_e?"readonly":"design")}}},e.prototype.componentDidMount=function(){var s=this,a,d,b,_,_e;if(getTinymce(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(d=(a=this.props).onScriptsLoadError)===null||d===void 0||d.call(a,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((b=this.elementRef.current)===null||b===void 0)&&b.ownerDocument){var nt=function(){var ct,dt;(dt=(ct=s.props).onScriptsLoad)===null||dt===void 0||dt.call(ct),s.initialise()},rt=function(ct){var dt,pt;(pt=(dt=s.props).onScriptsLoadError)===null||pt===void 0||pt.call(dt,ct)};ScriptLoader.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(_e=(_=this.props.scriptLoading)===null||_===void 0?void 0:_.delay)!==null&&_e!==void 0?_e:0,nt,rt)}},e.prototype.componentWillUnmount=function(){var s=this,a=this.editor;a&&(a.off(this.changeEvents(),this.handleEditorChange),a.off(this.beforeInputEvent(),this.handleBeforeInput),a.off("keypress",this.handleEditorChangeSpecial),a.off("keydown",this.handleBeforeInputSpecial),a.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(d){a.off(d,s.boundHandlers[d])}),this.boundHandlers={},a.remove(),this.editor=void 0)},e.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},e.prototype.changeEvents=function(){var s,a,d,b=(d=(a=(s=getTinymce(this.view))===null||s===void 0?void 0:s.Env)===null||a===void 0?void 0:a.browser)===null||d===void 0?void 0:d.isIE();return b?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},e.prototype.beforeInputEvent=function(){return isBeforeInputEventAvailable()?"beforeinput SelectionChange":"SelectionChange"},e.prototype.renderInline=function(){var s=this.props.tagName,a=s===void 0?"div":s;return reactExports.createElement(a,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},e.prototype.renderIframe=function(){return reactExports.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},e.prototype.getScriptSources=function(){var s,a,d=(s=this.props.scriptLoading)===null||s===void 0?void 0:s.async,b=(a=this.props.scriptLoading)===null||a===void 0?void 0:a.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:d,defer:b}]:this.props.tinymceScriptSrc.map(function(rt){return typeof rt=="string"?{src:rt,async:d,defer:b}:rt});var _=this.props.cloudChannel,_e=this.props.apiKey?this.props.apiKey:"no-api-key",nt="https://cdn.tiny.cloud/1/".concat(_e,"/tinymce/").concat(_,"/tinymce.min.js");return[{src:nt,async:d,defer:b}]},e.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},e.prototype.bindHandlers=function(s){var a=this;if(this.editor!==void 0){configHandlers(this.editor,s,this.props,this.boundHandlers,function(_e){return a.props[_e]});var d=function(_e){return _e.onEditorChange!==void 0||_e.value!==void 0},b=d(s),_=d(this.props);!b&&_?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):b&&!_&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},e.propTypes=EditorPropTypes,e.defaultProps={cloudChannel:"7"},e}(reactExports.Component),tinymce$1={exports:{}};(function(o){(function(){var e=function(c){if(c===null)return"null";if(c===void 0)return"undefined";var g=typeof c;return g==="object"&&(Array.prototype.isPrototypeOf(c)||c.constructor&&c.constructor.name==="Array")?"array":g==="object"&&(String.prototype.isPrototypeOf(c)||c.constructor&&c.constructor.name==="String")?"string":g},s=function(c){return["undefined","boolean","number","string","function","xml","null"].indexOf(c)!==-1},a=function(c,g){var $=Array.prototype.slice.call(c);return $.sort(g)},d=function(c,g){return b(function($,et){return c.eq(g($),g(et))})},b=function(c){return{eq:c}},_=b(function(c,g){return c===g}),_e=_,nt=function(c){return b(function(g,$){if(g.length!==$.length)return!1;for(var et=g.length,ot=0;ot<et;ot++)if(!c.eq(g[ot],$[ot]))return!1;return!0})},rt=function(c,g){return d(nt(c),function($){return a($,g)})},ct=function(c){return b(function(g,$){var et=Object.keys(g),ot=Object.keys($);if(!rt(_e).eq(et,ot))return!1;for(var at=et.length,ht=0;ht<at;ht++){var _t=et[ht];if(!c.eq(g[_t],$[_t]))return!1}return!0})},dt=b(function(c,g){if(c===g)return!0;var $=e(c),et=e(g);return $!==et?!1:s($)?c===g:$==="array"?nt(dt).eq(c,g):$==="object"?ct(dt).eq(c,g):!1});const pt=Object.getPrototypeOf,bt=(c,g,$)=>{var et;return $(c,g.prototype)?!0:((et=c.constructor)===null||et===void 0?void 0:et.name)===g.name},xt=c=>{const g=typeof c;return c===null?"null":g==="object"&&Array.isArray(c)?"array":g==="object"&&bt(c,String,($,et)=>et.isPrototypeOf($))?"string":g},wt=c=>g=>xt(g)===c,Tt=c=>g=>typeof g===c,Rt=c=>g=>c===g,Mt=(c,g)=>$t(c)&&bt(c,g,($,et)=>pt($)===et),Et=wt("string"),$t=wt("object"),Xt=c=>Mt(c,Object),Zt=wt("array"),Nt=Rt(null),Jt=Tt("boolean"),dn=Rt(void 0),Pn=c=>c==null,an=c=>!Pn(c),Vt=Tt("function"),ao=Tt("number"),hn=(c,g)=>{if(Zt(c)){for(let $=0,et=c.length;$<et;++$)if(!g(c[$]))return!1;return!0}return!1},fn=()=>{},It=(c,g)=>(...$)=>c(g.apply(null,$)),Vn=(c,g)=>$=>c(g($)),ln=c=>()=>c,uo=c=>c,Ln=(c,g)=>c===g;function An(c,...g){return(...$)=>{const et=g.concat($);return c.apply(null,et)}}const Wn=c=>g=>!c(g),er=c=>()=>{throw new Error(c)},no=c=>c(),Ro=c=>{c()},On=ln(!1),_o=ln(!0);class Yt{constructor(g,$){this.tag=g,this.value=$}static some(g){return new Yt(!0,g)}static none(){return Yt.singletonNone}fold(g,$){return this.tag?$(this.value):g()}isSome(){return this.tag}isNone(){return!this.tag}map(g){return this.tag?Yt.some(g(this.value)):Yt.none()}bind(g){return this.tag?g(this.value):Yt.none()}exists(g){return this.tag&&g(this.value)}forall(g){return!this.tag||g(this.value)}filter(g){return!this.tag||g(this.value)?this:Yt.none()}getOr(g){return this.tag?this.value:g}or(g){return this.tag?this:g}getOrThunk(g){return this.tag?this.value:g()}orThunk(g){return this.tag?this:g()}getOrDie(g){if(this.tag)return this.value;throw new Error(g??"Called getOrDie on None")}static from(g){return an(g)?Yt.some(g):Yt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(g){this.tag&&g(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Yt.singletonNone=new Yt(!1);const jr=Array.prototype.slice,lo=Array.prototype.indexOf,Ho=Array.prototype.push,mo=(c,g)=>lo.call(c,g),Co=(c,g)=>{const $=mo(c,g);return $===-1?Yt.none():Yt.some($)},mn=(c,g)=>mo(c,g)>-1,wn=(c,g)=>{for(let $=0,et=c.length;$<et;$++){const ot=c[$];if(g(ot,$))return!0}return!1},Dn=(c,g)=>{const $=c.length,et=new Array($);for(let ot=0;ot<$;ot++){const at=c[ot];et[ot]=g(at,ot)}return et},rn=(c,g)=>{for(let $=0,et=c.length;$<et;$++){const ot=c[$];g(ot,$)}},Cn=(c,g)=>{for(let $=c.length-1;$>=0;$--){const et=c[$];g(et,$)}},Nn=(c,g)=>{const $=[],et=[];for(let ot=0,at=c.length;ot<at;ot++){const ht=c[ot];(g(ht,ot)?$:et).push(ht)}return{pass:$,fail:et}},zn=(c,g)=>{const $=[];for(let et=0,ot=c.length;et<ot;et++){const at=c[et];g(at,et)&&$.push(at)}return $},So=(c,g,$)=>(Cn(c,(et,ot)=>{$=g($,et,ot)}),$),Hn=(c,g,$)=>(rn(c,(et,ot)=>{$=g($,et,ot)}),$),Tn=(c,g,$)=>{for(let et=0,ot=c.length;et<ot;et++){const at=c[et];if(g(at,et))return Yt.some(at);if($(at,et))break}return Yt.none()},Jn=(c,g)=>Tn(c,g,On),bo=(c,g)=>{for(let $=0,et=c.length;$<et;$++){const ot=c[$];if(g(ot,$))return Yt.some($)}return Yt.none()},$n=c=>{const g=[];for(let $=0,et=c.length;$<et;++$){if(!Zt(c[$]))throw new Error("Arr.flatten item "+$+" was not an array, input: "+c);Ho.apply(g,c[$])}return g},oo=(c,g)=>$n(Dn(c,g)),wo=(c,g)=>{for(let $=0,et=c.length;$<et;++$){const ot=c[$];if(g(ot,$)!==!0)return!1}return!0},Oo=c=>{const g=jr.call(c,0);return g.reverse(),g},Ir=(c,g)=>zn(c,$=>!mn(g,$)),sr=(c,g)=>{const $={};for(let et=0,ot=c.length;et<ot;et++){const at=c[et];$[String(at)]=g(at,et)}return $},vr=(c,g)=>{const $=jr.call(c,0);return $.sort(g),$},as=(c,g)=>g>=0&&g<c.length?Yt.some(c[g]):Yt.none(),_r=c=>as(c,0),fs=c=>as(c,c.length-1),Ss=Vt(Array.from)?Array.from:c=>jr.call(c),As=(c,g)=>{for(let $=0;$<c.length;$++){const et=g(c[$],$);if(et.isSome())return et}return Yt.none()},_l=(c,g)=>{const $=[],et=Vt(g)?ot=>wn($,at=>g(at,ot)):ot=>mn($,ot);for(let ot=0,at=c.length;ot<at;ot++){const ht=c[ot];et(ht)||$.push(ht)}return $},Zr=Object.keys,Ml=Object.hasOwnProperty,tr=(c,g)=>{const $=Zr(c);for(let et=0,ot=$.length;et<ot;et++){const at=$[et],ht=c[at];g(ht,at)}},Ms=(c,g)=>cu(c,($,et)=>({k:et,v:g($,et)})),cu=(c,g)=>{const $={};return tr(c,(et,ot)=>{const at=g(et,ot);$[at.k]=at.v}),$},ou=c=>(g,$)=>{c[$]=g},Yl=(c,g,$,et)=>{tr(c,(ot,at)=>{(g(ot,at)?$:et)(ot,at)})},xu=(c,g)=>{const $={},et={};return Yl(c,g,ou($),ou(et)),{t:$,f:et}},Vs=(c,g)=>{const $={};return Yl(c,g,ou($),fn),$},wu=(c,g)=>{const $=[];return tr(c,(et,ot)=>{$.push(g(et,ot))}),$},iu=c=>wu(c,uo),ba=(c,g)=>Jr(c,g)?Yt.from(c[g]):Yt.none(),Jr=(c,g)=>Ml.call(c,g),_a=(c,g)=>Jr(c,g)&&c[g]!==void 0&&c[g]!==null,go=(c,g,$=dt)=>ct($).eq(c,g),Po=c=>{const g={};return rn(c,$=>{g[$]={}}),Zr(g)},Sr=c=>c.length!==void 0,Fr=Array.isArray,Us=c=>{if(Fr(c))return c;{const g=[];for(let $=0,et=c.length;$<et;$++)g[$]=c[$];return g}},xa=(c,g,$)=>{if(!c)return!1;if($=$||c,Sr(c)){for(let et=0,ot=c.length;et<ot;et++)if(g.call($,c[et],et,c)===!1)return!1}else for(const et in c)if(Jr(c,et)&&g.call($,c[et],et,c)===!1)return!1;return!0},ju=(c,g)=>{const $=[];return xa(c,(et,ot)=>{$.push(g(et,ot,c))}),$},Uu=(c,g)=>{const $=[];return xa(c,(et,ot)=>{(!g||g(et,ot,c))&&$.push(et)}),$},Au=(c,g)=>{if(c){for(let $=0,et=c.length;$<et;$++)if(c[$]===g)return $}return-1},Un=(c,g,$,et)=>{let ot=dn($)?c[0]:$;for(let at=0;at<c.length;at++)ot=g.call(et,ot,c[at],at);return ot},Bn=(c,g,$)=>{for(let et=0,ot=c.length;et<ot;et++)if(g.call($,c[et],et,c))return et;return-1},Mo=c=>c[c.length-1],jo=c=>{let g=!1,$;return(...et)=>(g||(g=!0,$=c.apply(null,et)),$)},ss=(c,g,$,et)=>{const ot=c.isiOS()&&/ipad/i.test($)===!0,at=c.isiOS()&&!ot,ht=c.isiOS()||c.isAndroid(),_t=ht||et("(pointer:coarse)"),St=ot||!at&&ht&&et("(min-device-width:768px)"),Lt=at||ht&&!St,Ht=g.isSafari()&&c.isiOS()&&/safari/i.test($)===!1,qt=!Lt&&!St&&!Ht;return{isiPad:ln(ot),isiPhone:ln(at),isTablet:ln(St),isPhone:ln(Lt),isTouch:ln(_t),isAndroid:c.isAndroid,isiOS:c.isiOS,isWebView:ln(Ht),isDesktop:ln(qt)}},Cs=(c,g)=>{for(let $=0;$<c.length;$++){const et=c[$];if(et.test(g))return et}},Ns=(c,g)=>{const $=Cs(c,g);if(!$)return{major:0,minor:0};const et=ot=>Number(g.replace($,"$"+ot));return Ls(et(1),et(2))},Tu=(c,g)=>{const $=String(g).toLowerCase();return c.length===0?ro():Ns(c,$)},ro=()=>Ls(0,0),Ls=(c,g)=>({major:c,minor:g}),Kn={nu:Ls,detect:Tu,unknown:ro},eo=(c,g)=>As(g.brands,$=>{const et=$.brand.toLowerCase();return Jn(c,ot=>{var at;return et===((at=ot.brand)===null||at===void 0?void 0:at.toLowerCase())}).map(ot=>({current:ot.name,version:Kn.nu(parseInt($.version,10),0)}))}),nr=(c,g)=>{const $=String(g).toLowerCase();return Jn(c,et=>et.search($))},lr=(c,g)=>nr(c,g).map($=>{const et=Kn.detect($.versionRegexes,g);return{current:$.name,version:et}}),Rr=(c,g)=>nr(c,g).map($=>{const et=Kn.detect($.versionRegexes,g);return{current:$.name,version:et}}),Qr=(c,g)=>c.substring(g),es=(c,g,$)=>g===""||c.length>=g.length&&c.substr($,$+g.length)===g,Hr=(c,g)=>ks(c,g)?Qr(c,g.length):c,hs=(c,g,$=0,et)=>{const ot=c.indexOf(g,$);return ot!==-1?dn(et)?!0:ot+g.length<=et:!1},ks=(c,g)=>es(c,g,0),Nl=(c,g)=>es(c,g,c.length-g.length),Xl=c=>g=>g.replace(c,""),uu=Xl(/^\s+|\s+$/g),Kp=Xl(/^\s+/g),sm=Xl(/\s+$/g),_s=c=>c.length>0,Al=c=>!_s(c),Pl=(c,g)=>g<=0?"":new Array(g+1).join(c),wp=(c,g=10)=>{const $=parseInt(c,g);return isNaN($)?Yt.none():Yt.some($)},Cp=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,dp=c=>g=>hs(g,c),ku=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:c=>hs(c,"edge/")&&hs(c,"chrome")&&hs(c,"safari")&&hs(c,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Cp],search:c=>hs(c,"chrome")&&!hs(c,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:c=>hs(c,"msie")||hs(c,"trident")},{name:"Opera",versionRegexes:[Cp,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:dp("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:dp("firefox")},{name:"Safari",versionRegexes:[Cp,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:c=>(hs(c,"safari")||hs(c,"mobile/"))&&hs(c,"applewebkit")}],g1=[{name:"Windows",search:dp("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:c=>hs(c,"iphone")||hs(c,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:dp("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:dp("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:dp("linux"),versionRegexes:[]},{name:"Solaris",search:dp("sunos"),versionRegexes:[]},{name:"FreeBSD",search:dp("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:dp("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Vm={browsers:ln(ku),oses:ln(g1)},Vl="Edge",Dp="Chromium",Np="IE",fp="Opera",ry="Firefox",im="Safari",Yp=()=>Wm({current:void 0,version:Kn.unknown()}),Wm=c=>{const g=c.current,$=c.version,et=ot=>()=>g===ot;return{current:g,version:$,isEdge:et(Vl),isChromium:et(Dp),isIE:et(Np),isOpera:et(fp),isFirefox:et(ry),isSafari:et(im)}},Tm={unknown:Yp,nu:Wm,edge:ln(Vl),chromium:ln(Dp),ie:ln(Np),opera:ln(fp),firefox:ln(ry),safari:ln(im)},py="Windows",gy="iOS",U0="Android",Im="Linux",Ap="macOS",sy="Solaris",iy="FreeBSD",Dy="ChromeOS",E0=()=>hp({current:void 0,version:Kn.unknown()}),hp=c=>{const g=c.current,$=c.version,et=ot=>()=>g===ot;return{current:g,version:$,isWindows:et(py),isiOS:et(gy),isAndroid:et(U0),isMacOS:et(Ap),isLinux:et(Im),isSolaris:et(sy),isFreeBSD:et(iy),isChromeOS:et(Dy)}},Rm={unknown:E0,nu:hp,windows:ln(py),ios:ln(gy),android:ln(U0),linux:ln(Im),macos:ln(Ap),solaris:ln(sy),freebsd:ln(iy),chromeos:ln(Dy)},Xp={detect:(c,g,$)=>{const et=Vm.browsers(),ot=Vm.oses(),at=g.bind(St=>eo(et,St)).orThunk(()=>lr(et,c)).fold(Tm.unknown,Tm.nu),ht=Rr(ot,c).fold(Rm.unknown,Rm.nu),_t=ss(ht,at,c,$);return{browser:at,os:ht,deviceType:_t}}},Ny=c=>window.matchMedia(c).matches;let Ly=jo(()=>Xp.detect(window.navigator.userAgent,Yt.from(window.navigator.userAgentData),Ny));const un=()=>Ly(),Fn=window.navigator.userAgent,fo=un(),Wo=fo.browser,pr=fo.os,Vo=fo.deviceType,$l=Fn.indexOf("Windows Phone")!==-1,Kr={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Wo.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Wo.isIE(),windowsPhone:$l,browser:{current:Wo.current,version:Wo.version,isChromium:Wo.isChromium,isEdge:Wo.isEdge,isFirefox:Wo.isFirefox,isIE:Wo.isIE,isOpera:Wo.isOpera,isSafari:Wo.isSafari},os:{current:pr.current,version:pr.version,isAndroid:pr.isAndroid,isChromeOS:pr.isChromeOS,isFreeBSD:pr.isFreeBSD,isiOS:pr.isiOS,isLinux:pr.isLinux,isMacOS:pr.isMacOS,isSolaris:pr.isSolaris,isWindows:pr.isWindows},deviceType:{isDesktop:Vo.isDesktop,isiPad:Vo.isiPad,isiPhone:Vo.isiPhone,isPhone:Vo.isPhone,isTablet:Vo.isTablet,isTouch:Vo.isTouch,isWebView:Vo.isWebView}},Os=/^\s*|\s*$/g,Pu=c=>Pn(c)?"":(""+c).replace(Os,""),Kt=(c,g)=>g?g==="array"&&Fr(c)?!0:typeof c===g:c!==void 0,vn=(c,g,$={})=>{const et=Et(c)?c.split(g||","):c||[];let ot=et.length;for(;ot--;)$[et[ot]]={};return $},qn=Jr,Eo=(c,...g)=>{for(let $=0;$<g.length;$++){const et=g[$];for(const ot in et)if(Jr(et,ot)){const at=et[ot];at!==void 0&&(c[ot]=at)}}return c},Xo=function(c,g,$,et){et=et||this,c&&($&&(c=c[$]),xa(c,(ot,at)=>g.call(et,ot,at,$)===!1?!1:(Xo(ot,g,$,et),!0)))},cr={trim:Pu,isArray:Fr,is:Kt,toArray:Us,makeMap:vn,each:xa,map:ju,grep:Uu,inArray:Au,hasOwn:qn,extend:Eo,walk:Xo,resolve:(c,g=window)=>{const $=c.split(".");for(let et=0,ot=$.length;et<ot&&(g=g[$[et]],!!g);et++);return g},explode:(c,g)=>Zt(c)?c:c===""?[]:ju(c.split(g||","),Pu),_addCacheSuffix:c=>{const g=Kr.cacheSuffix;return g&&(c+=(c.indexOf("?")===-1?"?":"&")+g),c}},du=(c,g,$=Ln)=>c.exists(et=>$(et,g)),Fp=(c,g,$=Ln)=>Bs(c,g,$).getOr(c.isNone()&&g.isNone()),H0=c=>{const g=[],$=et=>{g.push(et)};for(let et=0;et<c.length;et++)c[et].each($);return g},Bs=(c,g,$)=>c.isSome()&&g.isSome()?Yt.some($(c.getOrDie(),g.getOrDie())):Yt.none(),qm=(c,g,$,et)=>c.isSome()&&g.isSome()&&$.isSome()?Yt.some(et(c.getOrDie(),g.getOrDie(),$.getOrDie())):Yt.none(),f0=(c,g)=>c?Yt.some(g):Yt.none(),kp=typeof window<"u"?window:Function("return this;")(),fu=(c,g)=>{let $=g??kp;for(let et=0;et<c.length&&$!==void 0&&$!==null;++et)$=$[c[et]];return $},V0=(c,g)=>{const $=c.split(".");return fu($,g)},zx=(c,g)=>V0(c,g),c_=(c,g)=>{const $=zx(c,g);if($==null)throw new Error(c+" not available on this browser");return $},Hu=Object.getPrototypeOf,m1=c=>c_("HTMLElement",c),A0=c=>{const g=V0("ownerDocument.defaultView",c);return $t(c)&&(m1(g).prototype.isPrototypeOf(c)||/^HTML\w*Element$/.test(Hu(c).constructor.name))},Fu=8,T0=9,Mm=11,y1=1,bn=3,Sn=c=>c.dom.nodeName.toLowerCase(),Ao=c=>c.dom.nodeType,qo=c=>g=>Ao(g)===c,ps=c=>Ao(c)===Fu||Sn(c)==="#comment",Tl=c=>Xs(c)&&A0(c.dom),Xs=qo(y1),gu=qo(bn),pp=qo(T0),Pm=qo(Mm),am=c=>g=>Xs(g)&&Sn(g)===c,rp=(c,g,$)=>{if(Et($)||Jt($)||ao($))c.setAttribute(g,$+"");else throw console.error("Invalid call to Attribute.set. Key ",g,":: Value ",$,":: Element ",c),new Error("Attribute value was not simple")},ip=(c,g,$)=>{rp(c.dom,g,$)},Tp=(c,g)=>{const $=c.dom;tr(g,(et,ot)=>{rp($,ot,et)})},lm=(c,g)=>{const $=c.dom.getAttribute(g);return $===null?void 0:$},Vu=(c,g)=>Yt.from(lm(c,g)),ap=(c,g)=>{const $=c.dom;return $&&$.hasAttribute?$.hasAttribute(g):!1},zu=(c,g)=>{c.dom.removeAttribute(g)},my=c=>{const g=c.dom.attributes;return g==null||g.length===0},u_=c=>Hn(c.dom.attributes,(g,$)=>(g[$.name]=$.value,g),{}),ov=(c,g)=>{const $=lm(c,g);return $===void 0||$===""?[]:$.split(" ")},b1=(c,g,$)=>{const ot=ov(c,g).concat([$]);return ip(c,g,ot.join(" ")),!0},v1=(c,g,$)=>{const et=zn(ov(c,g),ot=>ot!==$);return et.length>0?ip(c,g,et.join(" ")):zu(c,g),!1},Rv=c=>c.dom.classList!==void 0,Mv=c=>ov(c,"class"),I0=(c,g)=>b1(c,"class",g),Zm=(c,g)=>v1(c,"class",g),Bw=(c,g)=>mn(Mv(c),g)?Zm(c,g):I0(c,g),Fy=(c,g)=>{Rv(c)?c.dom.classList.add(g):I0(c,g)},Bx=c=>{(Rv(c)?c.dom.classList:Mv(c)).length===0&&zu(c,"class")},_1=(c,g)=>{Rv(c)?c.dom.classList.remove(g):Zm(c,g),Bx(c)},$x=(c,g)=>{const $=Rv(c)?c.dom.classList.toggle(g):Bw(c,g);return Bx(c),$},K_=(c,g)=>Rv(c)&&c.dom.classList.contains(g),x1=(c,g)=>{const et=(g||document).createElement("div");if(et.innerHTML=c,!et.hasChildNodes()||et.childNodes.length>1){const ot="HTML does not have a single root node";throw console.error(ot,c),new Error(ot)}return Pv(et.childNodes[0])},Y_=(c,g)=>{const et=(g||document).createElement(c);return Pv(et)},Gx=(c,g)=>{const et=(g||document).createTextNode(c);return Pv(et)},Pv=c=>{if(c==null)throw new Error("Node cannot be null or undefined");return{dom:c}},Qn={fromHtml:x1,fromTag:Y_,fromText:Gx,fromDom:Pv,fromPoint:(c,g,$)=>Yt.from(c.dom.elementFromPoint(g,$)).map(Pv)},w1=(c,g)=>{const $=[],et=at=>($.push(at),g(at));let ot=g(c);do ot=ot.bind(et);while(ot.isSome());return $},R0=(c,g)=>{const $=c.dom;if($.nodeType!==y1)return!1;{const et=$;if(et.matches!==void 0)return et.matches(g);if(et.msMatchesSelector!==void 0)return et.msMatchesSelector(g);if(et.webkitMatchesSelector!==void 0)return et.webkitMatchesSelector(g);if(et.mozMatchesSelector!==void 0)return et.mozMatchesSelector(g);throw new Error("Browser lacks native selectors")}},cC=c=>c.nodeType!==y1&&c.nodeType!==T0&&c.nodeType!==Mm||c.childElementCount===0,uC=(c,g)=>{const $=g===void 0?document:g.dom;return cC($)?[]:Dn($.querySelectorAll(c),Qn.fromDom)},Ov=(c,g)=>{const $=g===void 0?document:g.dom;return cC($)?Yt.none():Yt.from($.querySelector(c)).map(Qn.fromDom)},_i=(c,g)=>c.dom===g.dom,Om=(c,g)=>{const $=c.dom,et=g.dom;return $===et?!1:$.contains(et)},cm=c=>Qn.fromDom(c.dom.ownerDocument),Dv=c=>pp(c)?c:cm(c),jx=c=>Qn.fromDom(Dv(c).dom.documentElement),d_=c=>Qn.fromDom(Dv(c).dom.defaultView),Dm=c=>Yt.from(c.dom.parentNode).map(Qn.fromDom),X_=c=>Yt.from(c.dom.parentElement).map(Qn.fromDom),rv=(c,g)=>{const $=Vt(g)?g:On;let et=c.dom;const ot=[];for(;et.parentNode!==null&&et.parentNode!==void 0;){const at=et.parentNode,ht=Qn.fromDom(at);if(ot.push(ht),$(ht)===!0)break;et=at}return ot},J_=c=>{const g=$=>zn($,et=>!_i(c,et));return Dm(c).map(Jp).map(g).getOr([])},sv=c=>Yt.from(c.dom.previousSibling).map(Qn.fromDom),Km=c=>Yt.from(c.dom.nextSibling).map(Qn.fromDom),dC=c=>Oo(w1(c,sv)),f_=c=>w1(c,Km),Jp=c=>Dn(c.dom.childNodes,Qn.fromDom),h0=(c,g)=>{const $=c.dom.childNodes;return Yt.from($[g]).map(Qn.fromDom)},Ym=c=>h0(c,0),k1=c=>h0(c,c.dom.childNodes.length-1),h_=c=>c.dom.childNodes.length,Gw=c=>{const g=c.dom.head;if(g==null)throw new Error("Head is not available yet");return Qn.fromDom(g)},p_=c=>Pm(c)&&an(c.dom.host),yy=c=>Qn.fromDom(c.dom.getRootNode()),g_=c=>p_(c)?c:Gw(Dv(c)),WS=c=>p_(c)?c:Qn.fromDom(Dv(c).dom.body),jw=c=>{const g=yy(c);return p_(g)?Yt.some(g):Yt.none()},fC=c=>Qn.fromDom(c.dom.host),Uw=c=>{if(an(c.target)){const g=Qn.fromDom(c.target);if(Xs(g)&&m_(g)&&c.composed&&c.composedPath){const $=c.composedPath();if($)return _r($)}}return Yt.from(c.target)},m_=c=>an(c.dom.shadowRoot),S1=c=>{const g=gu(c)?c.dom.parentNode:c.dom;if(g==null||g.ownerDocument===null)return!1;const $=g.ownerDocument;return jw(Qn.fromDom(g)).fold(()=>$.body.contains(g),Vn(S1,fC))};var Q_=(c,g,$,et,ot)=>c($,et)?Yt.some($):Vt(ot)&&ot($)?Yt.none():g($,et,ot);const Qu=(c,g,$)=>{let et=c.dom;const ot=Vt($)?$:On;for(;et.parentNode;){et=et.parentNode;const at=Qn.fromDom(et);if(g(at))return Yt.some(at);if(ot(at))break}return Yt.none()},_d=(c,g,$)=>Q_((ot,at)=>at(ot),Qu,c,g,$),Nv=(c,g)=>{const $=c.dom;return $.parentNode?ay(Qn.fromDom($.parentNode),et=>!_i(c,et)&&g(et)):Yt.none()},ay=(c,g)=>{const $=ot=>g(Qn.fromDom(ot));return Jn(c.dom.childNodes,$).map(Qn.fromDom)},Hw=(c,g)=>{const $=et=>{for(let ot=0;ot<et.childNodes.length;ot++){const at=Qn.fromDom(et.childNodes[ot]);if(g(at))return Yt.some(at);const ht=$(et.childNodes[ot]);if(ht.isSome())return ht}return Yt.none()};return $(c.dom)},zp=(c,g,$)=>Qu(c,et=>R0(et,g),$),ls=(c,g)=>Ov(g,c),iv=(c,g,$)=>Q_((ot,at)=>R0(ot,at),zp,c,g,$),Vw=c=>iv(c,"[contenteditable]"),W0=(c,g=!1)=>S1(c)?c.dom.isContentEditable:Vw(c).fold(ln(g),$=>Wl($)==="true"),Wl=c=>c.dom.contentEditable,Lv=c=>c.style!==void 0&&Vt(c.style.getPropertyValue),ex=(c,g,$)=>{if(!Et($))throw console.error("Invalid call to CSS.set. Property ",g,":: Value ",$,":: Element ",c),new Error("CSS value must be a string: "+$);Lv(c)&&c.style.setProperty(g,$)},Ux=(c,g)=>{Lv(c)&&c.style.removeProperty(g)},Ww=(c,g,$)=>{const et=c.dom;ex(et,g,$)},Ks=(c,g)=>{const $=c.dom;tr(g,(et,ot)=>{ex($,ot,et)})},bp=(c,g)=>{const $=c.dom,ot=window.getComputedStyle($).getPropertyValue(g);return ot===""&&!S1(c)?Fv($,g):ot},Fv=(c,g)=>Lv(c)?c.style.getPropertyValue(g):"",zv=(c,g)=>{const $=c.dom,et=Fv($,g);return Yt.from(et).filter(ot=>ot.length>0)},M0=c=>{const g={},$=c.dom;if(Lv($))for(let et=0;et<$.style.length;et++){const ot=$.style.item(et);g[ot]=$.style[ot]}return g},p0=(c,g)=>{const $=c.dom;Ux($,g),du(Vu(c,"style").map(uu),"")&&zu(c,"style")},q0=c=>c.dom.offsetWidth,Su=(c,g)=>{Dm(c).each(et=>{et.dom.insertBefore(g.dom,c.dom)})},ly=(c,g)=>{Km(c).fold(()=>{Dm(c).each(ot=>{Up(ot,g)})},et=>{Su(et,g)})},E1=(c,g)=>{Ym(c).fold(()=>{Up(c,g)},et=>{c.dom.insertBefore(g.dom,et.dom)})},Up=(c,g)=>{c.dom.appendChild(g.dom)},by=(c,g)=>{Su(c,g),Up(g,c)},lp=(c,g)=>{rn(g,($,et)=>{const ot=et===0?c:g[et-1];ly(ot,$)})},Bv=(c,g)=>{rn(g,$=>{Up(c,$)})},y_=c=>{c.dom.textContent="",rn(Jp(c),g=>{mu(g)})},mu=c=>{const g=c.dom;g.parentNode!==null&&g.parentNode.removeChild(g)},vy=c=>{const g=Jp(c);g.length>0&&lp(c,g),mu(c)},Hx=(c,g)=>{const et=(g||document).createElement("div");return et.innerHTML=c,Jp(Qn.fromDom(et))},av=c=>Dn(c,Qn.fromDom),Ou=c=>c.dom.innerHTML,$v=(c,g)=>{const et=cm(c).dom,ot=Qn.fromDom(et.createDocumentFragment()),at=Hx(g,et);Bv(ot,at),y_(c),Up(c,ot)},g0=c=>{const g=Qn.fromTag("div"),$=Qn.fromDom(c.dom.cloneNode(!0));return Up(g,$),Ou(g)},b_=(c,g,$,et,ot,at,ht)=>({target:c,x:g,y:$,stop:et,prevent:ot,kill:at,raw:ht}),xl=c=>{const g=Qn.fromDom(Uw(c).getOr(c.target)),$=()=>c.stopPropagation(),et=()=>c.preventDefault(),ot=It(et,$);return b_(g,c.clientX,c.clientY,$,et,ot,c)},v_=(c,g)=>$=>{c($)&&g(xl($))},Vx=(c,g,$,et,ot)=>{const at=v_($,et);return c.dom.addEventListener(g,at,ot),{unbind:An(Ut,c,g,at,ot)}},Dt=(c,g,$,et)=>Vx(c,g,$,et,!1),Ut=(c,g,$,et)=>{c.dom.removeEventListener(g,$,et)},nn=(c,g)=>({left:c,top:g,translate:(et,ot)=>nn(c+et,g+ot)}),Gn=nn,io=c=>{const g=c.getBoundingClientRect();return Gn(g.left,g.top)},rr=(c,g)=>c!==void 0?c:g!==void 0?g:0,xs=c=>{const g=c.dom.ownerDocument,$=g.body,et=g.defaultView,ot=g.documentElement;if($===c.dom)return Gn($.offsetLeft,$.offsetTop);const at=rr(et==null?void 0:et.pageYOffset,ot.scrollTop),ht=rr(et==null?void 0:et.pageXOffset,ot.scrollLeft),_t=rr(ot.clientTop,$.clientTop),St=rr(ot.clientLeft,$.clientLeft);return qs(c).translate(ht-St,at-_t)},qs=c=>{const g=c.dom,et=g.ownerDocument.body;return et===g?Gn(et.offsetLeft,et.offsetTop):S1(c)?io(g):Gn(0,0)},$s=c=>{const g=c!==void 0?c.dom:document,$=g.body.scrollLeft||g.documentElement.scrollLeft,et=g.body.scrollTop||g.documentElement.scrollTop;return Gn($,et)},cs=(c,g,$)=>{const ot=($!==void 0?$.dom:document).defaultView;ot&&ot.scrollTo(c,g)},_f=(c,g)=>{un().browser.isSafari()&&Vt(c.dom.scrollIntoViewIfNeeded)?c.dom.scrollIntoViewIfNeeded(!1):c.dom.scrollIntoView(g)},Ip=c=>{const g=c===void 0?window:c;return un().browser.isFirefox()?Yt.none():Yt.from(g.visualViewport)},Xm=(c,g,$,et)=>({x:c,y:g,width:$,height:et,right:c+$,bottom:g+et}),Gv=c=>{const g=c===void 0?window:c,$=g.document,et=$s(Qn.fromDom($));return Ip(g).fold(()=>{const ot=g.document.documentElement,at=ot.clientWidth,ht=ot.clientHeight;return Xm(et.left,et.top,at,ht)},ot=>Xm(Math.max(ot.pageLeft,et.left),Math.max(ot.pageTop,et.top),ot.width,ot.height))},tx=(c,g)=>zn(Jp(c),g),qw=(c,g)=>{let $=[];return rn(Jp(c),et=>{g(et)&&($=$.concat([et])),$=$.concat(qw(et,g))}),$},m0=(c,g)=>uC(g,c),Zw=(c,g,$)=>Qu(c,g,$).isSome(),UA=(c,g)=>Nv(c,g).isSome(),qS=(c,g)=>Hw(c,g).isSome();class um{constructor(g,$){this.node=g,this.rootNode=$,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(g){return this.node=this.findSibling(this.node,"firstChild","nextSibling",g),this.node}prev(g){return this.node=this.findSibling(this.node,"lastChild","previousSibling",g),this.node}prev2(g){return this.node=this.findPreviousNode(this.node,g),this.node}findSibling(g,$,et,ot){if(g){if(!ot&&g[$])return g[$];if(g!==this.rootNode){let at=g[et];if(at)return at;for(let ht=g.parentNode;ht&&ht!==this.rootNode;ht=ht.parentNode)if(at=ht[et],at)return at}}}findPreviousNode(g,$){if(g){const et=g.previousSibling;if(this.rootNode&&et===this.rootNode)return;if(et){if(!$){for(let at=et.lastChild;at;at=at.lastChild)if(!at.lastChild)return at}return et}const ot=g.parentNode;if(ot&&ot!==this.rootNode)return ot}}}const hC="\uFEFF",dm="",pC=c=>c===hC,cy=c=>c.replace(/\uFEFF/g,""),vs=/^[ \t\r\n]*$/,uy=c=>vs.test(c),ZS=c=>{for(const g of c)if(!pC(g))return!1;return!0},gC=c=>" \f	\v".indexOf(c)!==-1,nx=c=>c===`
`||c==="\r",KS=(c,g)=>g<c.length&&g>=0?nx(c[g]):!1,zy=(c,g=4,$=!0,et=!0)=>{const ot=Pl(" ",g),at=c.replace(/\t/g,ot);return Hn(at,(_t,St)=>gC(St)||St===dm?_t.pcIsSpace||_t.str===""&&$||_t.str.length===at.length-1&&et||KS(at,_t.str.length+1)?{pcIsSpace:!1,str:_t.str+dm}:{pcIsSpace:!0,str:_t.str+" "}:{pcIsSpace:nx(St),str:_t.str+St},{pcIsSpace:!1,str:""}).str},jv=c=>g=>!!g&&g.nodeType===c,ox=c=>!!c&&!Object.getPrototypeOf(c),Nr=jv(1),By=c=>Nr(c)&&Tl(Qn.fromDom(c)),mC=c=>Nr(c)&&c.namespaceURI==="http://www.w3.org/2000/svg",Wx=c=>{const g=c.toLowerCase();return $=>an($)&&$.nodeName.toLowerCase()===g},$y=c=>{const g=c.map($=>$.toLowerCase());return $=>{if($&&$.nodeName){const et=$.nodeName.toLowerCase();return mn(g,et)}return!1}},Kw=(c,g)=>{const $=g.toLowerCase().split(" ");return et=>{if(Nr(et)){const ot=et.ownerDocument.defaultView;if(ot)for(let at=0;at<$.length;at++){const ht=ot.getComputedStyle(et,null);if((ht?ht.getPropertyValue(c):null)===$[at])return!0}}return!1}},rx=c=>g=>Nr(g)&&g.hasAttribute(c),T1=c=>Nr(c)&&c.hasAttribute("data-mce-bogus"),Yw=c=>Nr(c)&&c.getAttribute("data-mce-bogus")==="all",lv=c=>Nr(c)&&c.tagName==="TABLE",HA=c=>g=>!!(By(g)&&(g.contentEditable===c||g.getAttribute("data-mce-contenteditable")===c)),cp=$y(["textarea","input"]),dr=jv(3),y0=jv(4),sx=jv(7),Sp=jv(8),qx=jv(9),fm=jv(11),Jl=Wx("br"),Xw=Wx("img"),Jo=HA("true"),Ql=HA("false"),Jw=$y(["td","th"]),Qp=$y(["td","th","caption"]),Jm=$y(["video","audio","object","embed"]),_y=Wx("li"),YS=Wx("details"),__=Wx("summary"),XS={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},dy=(c,g,$)=>{const et=Qn.fromDom(g),ot=Qn.fromDom(c),at=$.getWhitespaceElements();return Zw(ot,_t=>Jr(at,Sn(_t)),An(_i,et))},Kl=c=>Nr(c)&&c.nodeName==="A"&&!c.hasAttribute("href")&&(c.hasAttribute("name")||c.hasAttribute("id")),Uv=(c,g)=>Nr(c)&&Jr(g.getNonEmptyElements(),c.nodeName),Qw=rx("data-mce-bookmark"),_g=c=>X_(Qn.fromDom(c)).exists(g=>!W0(g)),yC=(c,g,$)=>uy(c.data)&&!dy(c,g,$),cv=(c,g,$,et)=>dr(c)&&!yC(c,g,$)&&(!et.includeZwsp||!ZS(c.data)),e2=(c,g,$,et)=>Vt(et.isContent)&&et.isContent(g)||Uv(g,c)||Qw(g)||Kl(g)||cv(g,$,c,et)||Ql(g)||Jo(g)&&_g(g),hm=(c,g,$)=>{const et={...XS,...$};if(et.checkRootAsContent&&e2(c,g,g,et))return!1;let ot=g.firstChild,at=0;if(!ot)return!0;const ht=new um(ot,g);do{if(et.skipBogus&&Nr(ot)){const _t=ot.getAttribute("data-mce-bogus");if(_t){ot=ht.next(_t==="all");continue}}if(Sp(ot)){ot=ht.next(!0);continue}if(Jl(ot)){at++,ot=ht.next();continue}if(e2(c,ot,g,et))return!1;ot=ht.next()}while(ot);return at<=1},Qm=(c,g,$)=>hm(c,g.dom,{checkRootAsContent:!0,...$}),ko=(c,g,$)=>e2(c,g,g,{includeZwsp:XS.includeZwsp,...$}),Eu=c=>{let g=c;return{get:()=>g,set:ot=>{g=ot}}},bC=c=>{const g=Eu(Yt.none()),$=()=>g.get().each(c);return{clear:()=>{$(),g.set(Yt.none())},isSet:()=>g.get().isSome(),get:()=>g.get(),set:_t=>{$(),g.set(Yt.some(_t))}}},Rp=c=>{const g=Eu(Yt.none()),$=()=>g.get().each(_t=>clearInterval(_t));return{clear:()=>{$(),g.set(Yt.none())},isSet:()=>g.get().isSome(),get:()=>g.get(),set:_t=>{$(),g.set(Yt.some(setInterval(_t,c)))}}},wm=()=>{const c=bC(fn);return{...c,on:$=>c.get().each($)}},em=c=>{const g=c.toLowerCase();return g==="svg"?"svg":g==="math"?"math":"html"},Wu=c=>em(c)!=="html",vC=c=>Wu(c.nodeName),x_=c=>em(c.nodeName),Pt=["svg","math"],Bt=()=>{const c=wm(),g=()=>c.get().map(x_).getOr("html");return{track:ot=>(vC(ot)?c.set(ot):c.get().exists(at=>!at.contains(ot))&&c.clear(),g()),current:g,reset:()=>{c.clear()}}},tn="data-mce-block",_n=c=>zn(Zr(c),g=>!/[A-Z]/.test(g)),co=c=>Dn(_n(c),g=>{const $=CSS.escape(g);return`${$}:`+Dn(Pt,et=>`not(${et} ${$})`).join(":")}).join(","),Yo=(c,g)=>an(g.querySelector(c))?(g.setAttribute(tn,"true"),g.getAttribute("data-mce-selected")==="inline-boundary"&&g.removeAttribute("data-mce-selected"),!0):(g.removeAttribute(tn),!1),yr=(c,g)=>{const $=co(c.getTransparentElements()),et=co(c.getBlockElements());return zn(g.querySelectorAll($),ot=>Yo(et,ot))},Yr=(c,g,$)=>{var et;const ot=$?"lastChild":"firstChild";for(let at=g[ot];at;at=at[ot])if(hm(c,at,{checkRootAsContent:!0})){(et=at.parentNode)===null||et===void 0||et.removeChild(at);return}},Ps=(c,g,$)=>{const et=document.createRange(),ot=g.parentNode;if(ot){et.setStartBefore(g),et.setEndBefore($);const at=et.extractContents();Yr(c,at,!0),et.setStartAfter($),et.setEndAfter(g);const ht=et.extractContents();Yr(c,ht,!1),hm(c,at,{checkRootAsContent:!0})||ot.insertBefore(at,g),hm(c,$,{checkRootAsContent:!0})||ot.insertBefore($,g),hm(c,ht,{checkRootAsContent:!0})||ot.insertBefore(ht,g),ot.removeChild(g)}},Ys=(c,g,$)=>{const et=c.getBlockElements(),ot=Qn.fromDom(g),at=_t=>Sn(_t)in et,ht=_t=>_i(_t,ot);rn(av($),_t=>{Qu(_t,at,ht).each(St=>{const Lt=tx(_t,Ht=>at(Ht)&&!c.isValidChild(Sn(St),Sn(Ht)));if(Lt.length>0){const Ht=X_(St);rn(Lt,qt=>{Qu(qt,at,ht).each(Qt=>{Ps(c,Qt.dom,qt.dom)})}),Ht.each(qt=>yr(c,qt.dom))}})})},Bu=(c,g,$)=>{rn([...$,...I1(c,g)?[g]:[]],et=>rn(m0(Qn.fromDom(et),et.nodeName.toLowerCase()),ot=>{R1(c,ot.dom)&&vy(ot)}))},su=(c,g)=>{const $=yr(c,g);Ys(c,g,$),Bu(c,g,$)},_h=(c,g)=>{if(Hv(c,g)){const $=co(c.getBlockElements());Yo($,g)}},P0=(c,g,$)=>{const et=at=>_i(at,Qn.fromDom(g)),ot=rv(Qn.fromDom($),et);as(ot,ot.length-2).filter(Xs).fold(()=>su(c,g),at=>su(c,at.dom))},xy=c=>c.hasAttribute(tn),Nm=(c,g)=>Jr(c.getTransparentElements(),g),Hv=(c,g)=>Nr(g)&&Nm(c,g.nodeName),I1=(c,g)=>Hv(c,g)&&xy(g),R1=(c,g)=>Hv(c,g)&&!xy(g),w_=(c,g)=>g.type===1&&Nm(c,g.name)&&Et(g.attr(tn)),Zx=un().browser,n2=c=>Jn(c,Xs),_C=c=>Zx.isFirefox()&&Sn(c)==="table"?n2(Jp(c)).filter(g=>Sn(g)==="caption").bind(g=>n2(f_(g)).map($=>{const et=$.dom.offsetTop,ot=g.dom.offsetTop,at=g.dom.offsetHeight;return et<=ot?-at:0})).getOr(0):0,Hp=(c,g)=>c.children&&mn(c.children,g),uv=(c,g,$)=>{let et=0,ot=0;const at=c.ownerDocument;if($=$||c,g){if($===c&&g.getBoundingClientRect&&bp(Qn.fromDom(c),"position")==="static"){const _t=g.getBoundingClientRect();return et=_t.left+(at.documentElement.scrollLeft||c.scrollLeft)-at.documentElement.clientLeft,ot=_t.top+(at.documentElement.scrollTop||c.scrollTop)-at.documentElement.clientTop,{x:et,y:ot}}let ht=g;for(;ht&&ht!==$&&ht.nodeType&&!Hp(ht,$);){const _t=ht;et+=_t.offsetLeft||0,ot+=_t.offsetTop||0,ht=_t.offsetParent}for(ht=g.parentNode;ht&&ht!==$&&ht.nodeType&&!Hp(ht,$);)et-=ht.scrollLeft||0,ot-=ht.scrollTop||0,ht=ht.parentNode;ot+=_C(Qn.fromDom(g))}return{x:et,y:ot}},C_=(c,g={})=>{let $=0;const et={},ot=Qn.fromDom(c),at=Dv(ot),ht=so=>{g.referrerPolicy=so},_t=so=>{g.contentCssCors=so},St=so=>{Up(g_(ot),so)},Lt=so=>{const ho=g_(ot);ls(ho,"#"+so).each(mu)},Ht=so=>ba(et,so).getOrThunk(()=>({id:"mce-u"+$++,passed:[],failed:[],count:0})),qt=so=>new Promise((ho,xo)=>{let To;const or=cr._addCacheSuffix(so),mr=Ht(or);et[or]=mr,mr.count++;const $r=(Gr,gs)=>{rn(Gr,Ro),mr.status=gs,mr.passed=[],mr.failed=[],To&&(To.onload=null,To.onerror=null,To=null)},Zo=()=>$r(mr.passed,2),Lo=()=>$r(mr.failed,3);if(ho&&mr.passed.push(ho),xo&&mr.failed.push(xo),mr.status===1)return;if(mr.status===2){Zo();return}if(mr.status===3){Lo();return}mr.status=1;const ir=Qn.fromTag("link",at.dom);Tp(ir,{rel:"stylesheet",type:"text/css",id:mr.id}),g.contentCssCors&&ip(ir,"crossOrigin","anonymous"),g.referrerPolicy&&ip(ir,"referrerpolicy",g.referrerPolicy),To=ir.dom,To.onload=Zo,To.onerror=Lo,St(ir),ip(ir,"href",or)}),Qt=(so,ho)=>{const xo=Ht(so);et[so]=xo,xo.count++;const To=Qn.fromTag("style",at.dom);Tp(To,{rel:"stylesheet",type:"text/css",id:xo.id}),To.dom.innerHTML=ho,St(To)},gn=so=>Promise.allSettled(Dn(so,xo=>qt(xo).then(ln(xo)))).then(xo=>{const To=Nn(xo,or=>or.status==="fulfilled");return To.fail.length>0?Promise.reject(Dn(To.fail,or=>or.reason)):Dn(To.pass,or=>or.value)}),kn=so=>{const ho=cr._addCacheSuffix(so);ba(et,ho).each(xo=>{--xo.count===0&&(delete et[ho],Lt(xo.id))})};return{load:qt,loadRawCss:Qt,loadAll:gn,unload:kn,unloadRawCss:so=>{ba(et,so).each(ho=>{--ho.count===0&&(delete et[so],Lt(ho.id))})},unloadAll:so=>{rn(so,ho=>{kn(ho)})},_setReferrerPolicy:ht,_setContentCssCors:_t}},tp=(()=>{const c=new WeakMap;return{forElement:($,et)=>{const at=yy($).dom;return Yt.from(c.get(at)).getOrThunk(()=>{const ht=C_(at,et);return c.set(at,ht),ht})}}})(),gp=c=>c.nodeName.toLowerCase()==="span",b0=(c,g)=>an(c)&&(ko(g,c)||g.isInline(c.nodeName.toLowerCase())),xC=(c,g,$)=>{const et=new um(c,g).prev(!1),ot=new um(c,g).next(!1),at=dn(et)||b0(et,$),ht=dn(ot)||b0(ot,$);return at&&ht},wC=c=>gp(c)&&c.getAttribute("data-mce-type")==="bookmark",Z0=(c,g,$)=>dr(c)&&c.data.length>0&&xC(c,g,$),K0=c=>Nr(c)?c.childNodes.length>0:!1,NM=c=>fm(c)||qx(c),dv=(c,g,$,et)=>{var ot;const at=et||g;if(Nr(g)&&wC(g))return g;const ht=g.childNodes;for(let _t=ht.length-1;_t>=0;_t--)dv(c,ht[_t],$,at);if(Nr(g)){const _t=g.childNodes;_t.length===1&&wC(_t[0])&&((ot=g.parentNode)===null||ot===void 0||ot.insertBefore(_t[0],g))}return!NM(g)&&!ko($,g)&&!K0(g)&&!Z0(g,at,$)&&c.remove(g),g},o2=cr.makeMap,M1=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,k_=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,r2=/[<>&\"\']/g,eL=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,JS={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},Kx={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},tL={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Bp=c=>{const g=Qn.fromTag("div").dom;return g.innerHTML=c,g.textContent||g.innerText||c},VA=(c,g)=>{const $={};if(c){const et=c.split(",");g=g||10;for(let ot=0;ot<et.length;ot+=2){const at=String.fromCharCode(parseInt(et[ot],g));if(!Kx[at]){const ht="&"+et[ot+1]+";";$[at]=ht,$[ht]=at}}return $}else return},P1=VA("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),s2=(c,g)=>c.replace(g?M1:k_,$=>Kx[$]||$),QS=c=>(""+c).replace(r2,g=>Kx[g]||g),O1=(c,g)=>c.replace(g?M1:k_,$=>$.length>1?"&#"+(($.charCodeAt(0)-55296)*1024+($.charCodeAt(1)-56320)+65536)+";":Kx[$]||"&#"+$.charCodeAt(0)+";"),e0=(c,g,$)=>{const et=$||P1;return c.replace(g?M1:k_,ot=>Kx[ot]||et[ot]||ot)},Xx={encodeRaw:s2,encodeAllRaw:QS,encodeNumeric:O1,encodeNamed:e0,getEncodeFunc:(c,g)=>{const $=VA(g)||P1,et=(ht,_t)=>ht.replace(_t?M1:k_,St=>Kx[St]!==void 0?Kx[St]:$[St]!==void 0?$[St]:St.length>1?"&#"+((St.charCodeAt(0)-55296)*1024+(St.charCodeAt(1)-56320)+65536)+";":"&#"+St.charCodeAt(0)+";"),ot=(ht,_t)=>e0(ht,_t,$),at=o2(c.replace(/\+/g,","));return at.named&&at.numeric?et:at.named?g?ot:e0:at.numeric?O1:s2},decode:c=>c.replace(eL,(g,$)=>$?($.charAt(0).toLowerCase()==="x"?$=parseInt($.substr(1),16):$=parseInt($,10),$>65535?($-=65536,String.fromCharCode(55296+($>>10),56320+($&1023))):JS[$]||String.fromCharCode($)):tL[g]||P1[g]||Bp(g))},Lm=(c,g)=>(c=cr.trim(c),c?c.split(g||" "):[]),qA=c=>new RegExp("^"+c.replace(/([?+*])/g,".$1")+"$"),ZA=c=>$t(c)&&c.source&&Object.prototype.toString.call(c)==="[object RegExp]",nL=c=>{const g=$=>Zt($)?Dn($,g):ZA($)?new RegExp($.source,$.flags):$t($)?Ms($,g):$;return g(c)},LM=c=>{const g=/^(~)?(.+)$/;return oo(Lm(c,","),$=>{const et=g.exec($);if(et){const at=et[1]==="~"?"span":"div",ht=et[2];return[{cloneName:at,name:ht}]}else return[]})},Jx=c=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...c!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...c!=="html5-strict"?["xml:lang"]:[]]),i2=c=>{let g,$;g="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",$="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",c!=="html4"&&(g+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",$+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),c!=="html5-strict"&&($=[$,"acronym applet basefont big font strike tt"].join(" "),g=[g,"center dir isindex noframes"].join(" "));const et=[g,$].join(" ");return{blockContent:g,phrasingContent:$,flowContent:et}},fy=c=>{const{blockContent:g,phrasingContent:$,flowContent:et}=i2(c),ot=at=>Object.freeze(at.split(" "));return Object.freeze({blockContent:ot(g),phrasingContent:ot($),flowContent:ot(et)})},Gy={html4:jo(()=>fy("html4")),html5:jo(()=>fy("html5")),"html5-strict":jo(()=>fy("html5-strict"))},jy=(c,g)=>{const{blockContent:$,phrasingContent:et,flowContent:ot}=Gy[c]();return g==="blocks"?Yt.some($):g==="phrasing"?Yt.some(et):g==="flow"?Yt.some(ot):Yt.none()},eE=c=>{const g=Jx(c),{phrasingContent:$,flowContent:et}=i2(c),ot={},at=(St,Lt,Ht)=>{ot[St]={attributes:sr(Lt,ln({})),attributesOrder:Lt,children:sr(Ht,ln({}))}},ht=(St,Lt="",Ht="")=>{const qt=Lm(Ht),Qt=Lm(St);let gn=Qt.length;const kn=[...g,...Lm(Lt)];for(;gn--;)at(Qt[gn],kn.slice(),qt)},_t=(St,Lt)=>{const Ht=Lm(St),qt=Lm(Lt);let Qt=Ht.length;for(;Qt--;){const gn=ot[Ht[Qt]];for(let kn=0,yn=qt.length;kn<yn;kn++)gn.attributes[qt[kn]]={},gn.attributesOrder.push(qt[kn])}};return c!=="html5-strict"&&(rn(Lm("acronym applet basefont big font strike tt"),Ht=>{ht(Ht,"",$)}),rn(Lm("center dir isindex noframes"),Ht=>{ht(Ht,"",et)})),ht("html","manifest","head body"),ht("head","","base command link meta noscript script style title"),ht("title hr noscript br"),ht("base","href target"),ht("link","href rel media hreflang type sizes hreflang"),ht("meta","name http-equiv content charset"),ht("style","media type scoped"),ht("script","src async defer type charset"),ht("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",et),ht("dd div","",et),ht("address dt caption","",c==="html4"?$:et),ht("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",$),ht("blockquote","cite",et),ht("ol","reversed start type","li"),ht("ul","","li"),ht("li","value",et),ht("dl","","dt dd"),ht("a","href target rel media hreflang type",c==="html4"?$:et),ht("q","cite",$),ht("ins del","cite datetime",et),ht("img","src sizes srcset alt usemap ismap width height"),ht("iframe","src name width height",et),ht("embed","src type width height"),ht("object","data type typemustmatch name usemap form width height",[et,"param"].join(" ")),ht("param","name value"),ht("map","name",[et,"area"].join(" ")),ht("area","alt coords shape href target rel media hreflang type"),ht("table","border","caption colgroup thead tfoot tbody tr"+(c==="html4"?" col":"")),ht("colgroup","span","col"),ht("col","span"),ht("tbody thead tfoot","","tr"),ht("tr","","td th"),ht("td","colspan rowspan headers",et),ht("th","colspan rowspan headers scope abbr",et),ht("form","accept-charset action autocomplete enctype method name novalidate target",et),ht("fieldset","disabled form name",[et,"legend"].join(" ")),ht("label","form for",$),ht("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),ht("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",c==="html4"?et:$),ht("select","disabled form multiple name required size","option optgroup"),ht("optgroup","disabled label","option"),ht("option","disabled label selected value"),ht("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),ht("menu","type label",[et,"li"].join(" ")),ht("noscript","",et),c!=="html4"&&(ht("wbr"),ht("ruby","",[$,"rt rp"].join(" ")),ht("figcaption","",et),ht("mark rt rp bdi","",$),ht("summary","",[$,"h1 h2 h3 h4 h5 h6"].join(" ")),ht("canvas","width height",et),ht("data","value",$),ht("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[et,"track source"].join(" ")),ht("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[et,"track source"].join(" ")),ht("picture","","img source"),ht("source","src srcset type media sizes"),ht("track","kind src srclang label default"),ht("datalist","",[$,"option"].join(" ")),ht("article section nav aside main header footer","",et),ht("hgroup","","h1 h2 h3 h4 h5 h6"),ht("figure","",[et,"figcaption"].join(" ")),ht("time","datetime",$),ht("dialog","open",et),ht("command","type label icon disabled checked radiogroup command"),ht("output","for form name",$),ht("progress","value max",$),ht("meter","value min max low high optimum",$),ht("details","open",[et,"summary"].join(" ")),ht("keygen","autofocus challenge disabled form keytype name"),at("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),c!=="html5-strict"&&(_t("script","language xml:space"),_t("style","xml:space"),_t("object","declare classid code codebase codetype archive standby align border hspace vspace"),_t("embed","align name hspace vspace"),_t("param","valuetype type"),_t("a","charset name rev shape coords"),_t("br","clear"),_t("applet","codebase archive code object alt name width height align hspace vspace"),_t("img","name longdesc align border hspace vspace"),_t("iframe","longdesc frameborder marginwidth marginheight scrolling align"),_t("font basefont","size color face"),_t("input","usemap align"),_t("select"),_t("textarea"),_t("h1 h2 h3 h4 h5 h6 div p legend caption","align"),_t("ul","type compact"),_t("li","type"),_t("ol dl menu dir","compact"),_t("pre","width xml:space"),_t("hr","align noshade size width"),_t("isindex","prompt"),_t("table","summary width frame rules cellspacing cellpadding align bgcolor"),_t("col","width align char charoff valign"),_t("colgroup","width align char charoff valign"),_t("thead","align char charoff valign"),_t("tr","align char charoff valign bgcolor"),_t("th","axis align char charoff valign nowrap bgcolor width height"),_t("form","accept"),_t("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),_t("tfoot","align char charoff valign"),_t("tbody","align char charoff valign"),_t("area","nohref"),_t("body","background bgcolor text link vlink alink")),c!=="html4"&&(_t("input button select textarea","autofocus"),_t("input textarea","placeholder"),_t("a","download"),_t("link script img","crossorigin"),_t("img","loading"),_t("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),c!=="html4"&&rn([ot.video,ot.audio],St=>{delete St.children.audio,delete St.children.video}),rn(Lm("a form meter progress dfn"),St=>{ot[St]&&delete ot[St].children[St]}),delete ot.caption.children.table,delete ot.script,ot},tE=c=>c==="-"?"remove":"add",CC=c=>{const g=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return Yt.from(g.exec(c)).map($=>({preset:$[1]==="@",name:$[2]}))},m3=c=>{const g=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return oo(Lm(c,","),$=>{const et=g.exec($);if(et){const ot=et[1],at=ot?tE(ot):"replace",ht=et[2],_t=oo(Lm(et[3],"|"),St=>CC(St).toArray());return[{operation:at,name:ht,validChildren:_t}]}else return[]})},FM=(c,g)=>{const $=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,et=/[*?+]/,{attributes:ot,attributesOrder:at}=g;return rn(Lm(c,"|"),ht=>{const _t=$.exec(ht);if(_t){const St={},Lt=_t[1],Ht=_t[2].replace(/[\\:]:/g,":"),qt=_t[3],Qt=_t[4];if(Lt==="!"&&(g.attributesRequired=g.attributesRequired||[],g.attributesRequired.push(Ht),St.required=!0),Lt==="-"){delete ot[Ht],at.splice(cr.inArray(at,Ht),1);return}if(qt&&(qt==="="?(g.attributesDefault=g.attributesDefault||[],g.attributesDefault.push({name:Ht,value:Qt}),St.defaultValue=Qt):qt==="~"?(g.attributesForced=g.attributesForced||[],g.attributesForced.push({name:Ht,value:Qt}),St.forcedValue=Qt):qt==="<"&&(St.validValues=cr.makeMap(Qt,"?"))),et.test(Ht)){const gn=St;g.attributePatterns=g.attributePatterns||[],gn.pattern=qA(Ht),g.attributePatterns.push(gn)}else ot[Ht]||at.push(Ht),ot[Ht]=St}})},zM=(c,g)=>{tr(c.attributes,($,et)=>{g.attributes[et]=$}),g.attributesOrder.push(...c.attributesOrder)},y3=(c,g)=>{const $=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return oo(Lm(g,","),et=>{const ot=$.exec(et);if(ot){const at=ot[1],ht=ot[2],_t=ot[3],St=ot[4],Lt=ot[5],Ht={attributes:{},attributesOrder:[]};if(c.each(qt=>zM(qt,Ht)),at==="#"?Ht.paddEmpty=!0:at==="-"&&(Ht.removeEmpty=!0),St==="!"&&(Ht.removeEmptyAttrs=!0),Lt&&FM(Lt,Ht),_t&&(Ht.outputName=ht),ht==="@")if(c.isNone())c=Yt.some(Ht);else return[];return[_t?{name:ht,element:Ht,aliasName:_t}:{name:ht,element:Ht}]}else return[]})},kC={},wl=cr.makeMap,rs=cr.each,Qx=cr.extend,KA=cr.explode,YA=(c,g={})=>{const $=wl(c," ",wl(c.toUpperCase()," "));return Qx($,g)},b3=c=>YA("td th li dt dd figcaption caption details summary",c.getTextBlockElements()),XA=(c,g)=>{if(c){const $={};return Et(c)&&(c={"*":c}),rs(c,(et,ot)=>{$[ot]=$[ot.toUpperCase()]=g==="map"?wl(et,/[, ]/):KA(et,/[, ]/)}),$}else return},yu=(c={})=>{var g;const $={},et={};let ot=[];const at={},ht={},_t=(us,Hl,Pp)=>{const _m=c[us];if(_m)return wl(_m,/[, ]/,wl(_m.toUpperCase(),/[, ]/));{let Um=kC[us];return Um||(Um=YA(Hl,Pp),kC[us]=Um),Um}},St=(g=c.schema)!==null&&g!==void 0?g:"html5",Lt=eE(St);c.verify_html===!1&&(c.valid_elements="*[*]");const Ht=XA(c.valid_styles),qt=XA(c.invalid_styles,"map"),Qt=XA(c.valid_classes,"map"),gn=_t("whitespace_elements","pre script noscript style textarea video audio iframe object code"),kn=_t("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),yn=_t("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),Rn=_t("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),so="td th iframe video audio object script code",ho=_t("non_empty_elements",so+" pre svg textarea summary",yn),xo=_t("move_caret_before_on_enter_elements",so+" table",yn),To="h1 h2 h3 h4 h5 h6",or=_t("text_block_elements",To+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),mr=_t("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",or),$r=_t("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Zo=_t("transparent_elements","a ins del canvas map"),Lo=_t("wrap_block_elements","pre "+To);rs("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),us=>{ht[us]=new RegExp("</"+us+"[^>]*>","gi")});const ir=us=>{const Hl=Yt.from($["@"]),Pp=/[*?+]/;rn(y3(Hl,us??""),({name:_m,element:Um,aliasName:xm})=>{if(xm&&($[xm]=Um),Pp.test(_m)){const _p=Um;_p.pattern=qA(_m),ot.push(_p)}else $[_m]=Um})},Gr=us=>{ot=[],rn(Zr($),Hl=>{delete $[Hl]}),ir(us)},gs=(us,Hl)=>{var Pp,_m;delete kC.text_block_elements,delete kC.block_elements;const Um=Hl.extends?!l1(Hl.extends):!1,xm=Hl.extends;if(et[us]=xm?et[xm]:{},at[us]=xm??us,ho[us.toUpperCase()]={},ho[us]={},Um||(mr[us.toUpperCase()]={},mr[us]={}),xm&&!$[us]&&$[xm]){const _p=nL($[xm]);delete _p.removeEmptyAttrs,delete _p.removeEmpty,$[us]=_p}else $[us]={attributesOrder:[],attributes:{}};if(Zt(Hl.attributes)){const _p=Oy=>{Ep.attributesOrder.push(Oy),Ep.attributes[Oy]={}},Ep=(Pp=$[us])!==null&&Pp!==void 0?Pp:{};delete Ep.attributesDefault,delete Ep.attributesForced,delete Ep.attributePatterns,delete Ep.attributesRequired,Ep.attributesOrder=[],Ep.attributes={},rn(Hl.attributes,Oy=>{const r_=Jx(St);CC(Oy).each(({preset:Nx,name:V_})=>{Nx?V_==="global"&&rn(r_,_p):_p(V_)})}),$[us]=Ep}if(Jt(Hl.padEmpty)){const _p=(_m=$[us])!==null&&_m!==void 0?_m:{};_p.paddEmpty=Hl.padEmpty,$[us]=_p}if(Zt(Hl.children)){const _p={},Ep=r_=>{_p[r_]={}},Oy=r_=>{jy(St,r_).each(Nx=>{rn(Nx,Ep)})};rn(Hl.children,r_=>{CC(r_).each(({preset:Nx,name:V_})=>{Nx?Oy(V_):Ep(V_)})}),et[us]=_p}xm&&tr(et,(_p,Ep)=>{_p[xm]&&(et[Ep]=_p=Qx({},et[Ep]),_p[us]=_p[xm])})},Cl=us=>{rn(LM(us??""),({name:Hl,cloneName:Pp})=>{gs(Hl,{extends:Pp})})},Sl=us=>{$t(us)?tr(us,(Hl,Pp)=>gs(Pp,Hl)):Et(us)&&Cl(us)},au=us=>{rn(m3(us??""),({operation:Hl,name:Pp,validChildren:_m})=>{const Um=Hl==="replace"?{"#comment":{}}:et[Pp],xm=Ep=>{Hl==="remove"?delete Um[Ep]:Um[Ep]={}},_p=Ep=>{jy(St,Ep).each(Oy=>{rn(Oy,xm)})};rn(_m,({preset:Ep,name:Oy})=>{Ep?_p(Oy):xm(Oy)}),et[Pp]=Um})},Cu=us=>{const Hl=$[us];if(Hl)return Hl;let Pp=ot.length;for(;Pp--;){const _m=ot[Pp];if(_m.pattern.test(us))return _m}},jp=()=>{c.valid_elements?(Gr(c.valid_elements),rs(Lt,(us,Hl)=>{et[Hl]=us.children})):(rs(Lt,(us,Hl)=>{$[Hl]={attributes:us.attributes,attributesOrder:us.attributesOrder},et[Hl]=us.children}),rs(Lm("strong/b em/i"),us=>{const Hl=Lm(us,"/");$[Hl[1]].outputName=Hl[0]}),rs($r,(us,Hl)=>{$[Hl]&&(c.padd_empty_block_inline_children&&($[Hl].paddInEmptyBlock=!0),$[Hl].removeEmpty=!0)}),rs(Lm("ol ul blockquote a table tbody"),us=>{$[us]&&($[us].removeEmpty=!0)}),rs(Lm("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),us=>{$[us]&&($[us].paddEmpty=!0)}),rs(Lm("span"),us=>{$[us].removeEmptyAttrs=!0})),delete $.svg,Sl(c.custom_elements),au(c.valid_children),ir(c.extended_valid_elements),au("+ol[ul|ol],+ul[ul|ol]"),rs({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(us,Hl)=>{$[Hl]&&($[Hl].parentsRequired=Lm(us))}),c.invalid_elements&&rs(KA(c.invalid_elements),us=>{$[us]&&delete $[us]}),Cu("span")||ir("span[!data-mce-type|*]")},k0=ln(Ht),qp=ln(qt),Er=ln(Qt),ds=ln(Rn),_c=ln(mr),Lr=ln(or),Ts=ln($r),Is=ln(Object.seal(yn)),Mr=ln(kn),El=ln(ho),Ol=ln(xo),vm=ln(gn),Lu=ln(Zo),S0=ln(Lo),Qy=ln(Object.seal(ht)),Dx=(us,Hl)=>{const Pp=et[us.toLowerCase()];return!!(Pp&&Pp[Hl.toLowerCase()])},oy=(us,Hl)=>{const Pp=Cu(us);if(Pp)if(Hl){if(Pp.attributes[Hl])return!0;const _m=Pp.attributePatterns;if(_m){let Um=_m.length;for(;Um--;)if(_m[Um].pattern.test(Hl))return!0}}else return!0;return!1},l1=us=>Jr(_c(),us),o_=us=>!ks(us,"#")&&oy(us)&&!l1(us),B0=us=>Jr(S0(),us)||o_(us),_b=ln(at);return jp(),{type:St,children:et,elements:$,getValidStyles:k0,getValidClasses:Er,getBlockElements:_c,getInvalidStyles:qp,getVoidElements:Is,getTextBlockElements:Lr,getTextInlineElements:Ts,getBoolAttrs:ds,getElementRule:Cu,getSelfClosingElements:Mr,getNonEmptyElements:El,getMoveCaretBeforeOnEnterElements:Ol,getWhitespaceElements:vm,getTransparentElements:Lu,getSpecialElements:Qy,isValidChild:Dx,isValid:oy,isBlock:l1,isInline:o_,isWrapper:B0,getCustomElements:_b,addValidElements:ir,setValidElements:Gr,addCustomElements:Sl,addValidChildren:au}},v3=c=>({value:BM(c)}),BM=c=>Hr(c,"#").toUpperCase(),_3=c=>{const g=c.toString(16);return(g.length===1?"0"+g:g).toUpperCase()},Qo=c=>{const g=_3(c.red)+_3(c.green)+_3(c.blue);return v3(g)},SC=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,$M=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,a2=(c,g,$,et)=>({red:c,green:g,blue:$,alpha:et}),GM=(c,g,$,et)=>{const ot=parseInt(c,10),at=parseInt(g,10),ht=parseInt($,10),_t=parseFloat(et);return a2(ot,at,ht,_t)},ix=c=>SC.test(c)?"rgb":$M.test(c)?"rgba":"other",JA=c=>{const g=SC.exec(c);if(g!==null)return Yt.some(GM(g[1],g[2],g[3],"1"));const $=$M.exec(c);return $!==null?Yt.some(GM($[1],$[2],$[3],$[4])):Yt.none()},l2=c=>`rgba(${c.red},${c.green},${c.blue},${c.alpha})`,nE=c=>JA(c).map(Qo).map(g=>"#"+g.value).getOr(c),ew=(c={},g)=>{const $=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,et=/\s*([^:]+):\s*([^;]+);?/g,ot=/\s+$/,at={};let ht,_t;const St=hC;g&&(ht=g.getValidStyles(),_t=g.getInvalidStyles());const Lt=(`\\" \\' \\; \\: ; : `+St).split(" ");for(let qt=0;qt<Lt.length;qt++)at[Lt[qt]]=St+qt,at[St+qt]=Lt[qt];const Ht={parse:qt=>{const Qt={};let gn=!1;const kn=c.url_converter,yn=c.url_converter_scope||Ht,Rn=(Zo,Lo,ir)=>{const Gr=Qt[Zo+"-top"+Lo];if(!Gr)return;const gs=Qt[Zo+"-right"+Lo];if(!gs)return;const Cl=Qt[Zo+"-bottom"+Lo];if(!Cl)return;const Sl=Qt[Zo+"-left"+Lo];if(!Sl)return;const au=[Gr,gs,Cl,Sl];let Cu=au.length-1;for(;Cu--&&au[Cu]===au[Cu+1];);Cu>-1&&ir||(Qt[Zo+Lo]=Cu===-1?au[0]:au.join(" "),delete Qt[Zo+"-top"+Lo],delete Qt[Zo+"-right"+Lo],delete Qt[Zo+"-bottom"+Lo],delete Qt[Zo+"-left"+Lo])},so=Zo=>{const Lo=Qt[Zo];if(!Lo)return;const ir=Lo.indexOf(",")>-1?[Lo]:Lo.split(" ");let Gr=ir.length;for(;Gr--;)if(ir[Gr]!==ir[0])return!1;return Qt[Zo]=ir[0],!0},ho=(Zo,Lo,ir,Gr)=>{so(Lo)&&so(ir)&&so(Gr)&&(Qt[Zo]=Qt[Lo]+" "+Qt[ir]+" "+Qt[Gr],delete Qt[Lo],delete Qt[ir],delete Qt[Gr])},xo=Zo=>(gn=!0,at[Zo]),To=(Zo,Lo)=>(gn&&(Zo=Zo.replace(/\uFEFF[0-9]/g,ir=>at[ir])),Lo||(Zo=Zo.replace(/\\([\'\";:])/g,"$1")),Zo),or=Zo=>String.fromCharCode(parseInt(Zo.slice(1),16)),mr=Zo=>Zo.replace(/\\[0-9a-f]+/gi,or),$r=(Zo,Lo,ir,Gr,gs,Cl)=>{if(gs=gs||Cl,gs)return gs=To(gs),"'"+gs.replace(/\'/g,"\\'")+"'";if(Lo=To(Lo||ir||Gr||""),!c.allow_script_urls){const Sl=Lo.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Sl)||!c.allow_svg_data_urls&&/^data:image\/svg/i.test(Sl))return""}return kn&&(Lo=kn.call(yn,Lo,"style")),"url('"+Lo.replace(/\'/g,"\\'")+"')"};if(qt){qt=qt.replace(/[\u0000-\u001F]/g,""),qt=qt.replace(/\\[\"\';:\uFEFF]/g,xo).replace(/\"[^\"]+\"|\'[^\']+\'/g,Lo=>Lo.replace(/[;:]/g,xo));let Zo;for(;Zo=et.exec(qt);){et.lastIndex=Zo.index+Zo[0].length;let Lo=Zo[1].replace(ot,"").toLowerCase(),ir=Zo[2].replace(ot,"");if(Lo&&ir){if(Lo=mr(Lo),ir=mr(ir),Lo.indexOf(St)!==-1||Lo.indexOf('"')!==-1||!c.allow_script_urls&&(Lo==="behavior"||/expression\s*\(|\/\*|\*\//.test(ir)))continue;Lo==="font-weight"&&ir==="700"?ir="bold":(Lo==="color"||Lo==="background-color")&&(ir=ir.toLowerCase()),ix(ir)==="rgb"&&JA(ir).each(Gr=>{ir=nE(l2(Gr)).toLowerCase()}),ir=ir.replace($,$r),Qt[Lo]=gn?To(ir,!0):ir}}Rn("border","",!0),Rn("border","-width"),Rn("border","-color"),Rn("border","-style"),Rn("padding",""),Rn("margin",""),ho("border","border-width","border-style","border-color"),Qt.border==="medium none"&&delete Qt.border,Qt["border-image"]==="none"&&delete Qt["border-image"]}return Qt},serialize:(qt,Qt)=>{let gn="";const kn=(Rn,so)=>{const ho=so[Rn];if(ho)for(let xo=0,To=ho.length;xo<To;xo++){const or=ho[xo],mr=qt[or];mr&&(gn+=(gn.length>0?" ":"")+or+": "+mr+";")}},yn=(Rn,so)=>{if(!_t||!so)return!0;let ho=_t["*"];return ho&&ho[Rn]?!1:(ho=_t[so],!(ho&&ho[Rn]))};return Qt&&ht?(kn("*",ht),kn(Qt,ht)):tr(qt,(Rn,so)=>{Rn&&yn(so,Qt)&&(gn+=(gn.length>0?" ":"")+so+": "+Rn+";")}),gn}};return Ht},ep={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},S_=c=>c instanceof Event||Vt(c.initEvent),jM=c=>c.isDefaultPrevented===_o||c.isDefaultPrevented===On,ax=c=>Pn(c.preventDefault)||S_(c),x3=(c,g)=>{const $=g??{};for(const et in c)Jr(ep,et)||($[et]=c[et]);return an(c.composedPath)&&($.composedPath=()=>c.composedPath()),an(c.getModifierState)&&($.getModifierState=et=>c.getModifierState(et)),an(c.getTargetRanges)&&($.getTargetRanges=()=>c.getTargetRanges()),$},c2=(c,g,$,et)=>{var ot;const at=x3(g,et);return at.type=c,Pn(at.target)&&(at.target=(ot=at.srcElement)!==null&&ot!==void 0?ot:$),ax(g)&&(at.preventDefault=()=>{at.defaultPrevented=!0,at.isDefaultPrevented=_o,Vt(g.preventDefault)&&g.preventDefault()},at.stopPropagation=()=>{at.cancelBubble=!0,at.isPropagationStopped=_o,Vt(g.stopPropagation)&&g.stopPropagation()},at.stopImmediatePropagation=()=>{at.isImmediatePropagationStopped=_o,at.stopPropagation()},jM(at)||(at.isDefaultPrevented=at.defaultPrevented===!0?_o:On,at.isPropagationStopped=at.cancelBubble===!0?_o:On,at.isImmediatePropagationStopped=On)),at},w3="mce-data-",C3=/^(?:mouse|contextmenu)|click/,Y0=(c,g,$,et)=>{c.addEventListener(g,$,et||!1)},EC=(c,g,$,et)=>{c.removeEventListener(g,$,et||!1)},oL=c=>an(c)&&C3.test(c.type),tw=(c,g)=>{const $=c2(c.type,c,document,g);if(oL(c)&&dn(c.pageX)&&!dn(c.clientX)){const et=$.target.ownerDocument||document,ot=et.documentElement,at=et.body,ht=$;ht.pageX=c.clientX+(ot&&ot.scrollLeft||at&&at.scrollLeft||0)-(ot&&ot.clientLeft||at&&at.clientLeft||0),ht.pageY=c.clientY+(ot&&ot.scrollTop||at&&at.scrollTop||0)-(ot&&ot.clientTop||at&&at.clientTop||0)}return $},rL=(c,g,$)=>{const et=c.document,ot={type:"ready"};if($.domLoaded){g(ot);return}const at=()=>et.readyState==="complete"||et.readyState==="interactive"&&et.body,ht=()=>{EC(c,"DOMContentLoaded",ht),EC(c,"load",ht),$.domLoaded||($.domLoaded=!0,g(ot)),c=null};at()?ht():Y0(c,"DOMContentLoaded",ht),$.domLoaded||Y0(c,"load",ht)};class u2{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=w3+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(g,$,et,ot){const at=this;let ht;const _t=window,St=Qt=>{at.executeHandlers(tw(Qt||_t.event),Lt)};if(!g||dr(g)||Sp(g))return et;let Lt;g[at.expando]?Lt=g[at.expando]:(Lt=at.count++,g[at.expando]=Lt,at.events[Lt]={}),ot=ot||g;const Ht=$.split(" ");let qt=Ht.length;for(;qt--;){let Qt=Ht[qt],gn=St,kn=!1,yn=!1;if(Qt==="DOMContentLoaded"&&(Qt="ready"),at.domLoaded&&Qt==="ready"&&g.readyState==="complete"){et.call(ot,tw({type:Qt}));continue}!at.hasFocusIn&&(Qt==="focusin"||Qt==="focusout")&&(kn=!0,yn=Qt==="focusin"?"focus":"blur",gn=Rn=>{const so=tw(Rn||_t.event);so.type=so.type==="focus"?"focusin":"focusout",at.executeHandlers(so,Lt)}),ht=at.events[Lt][Qt],ht?Qt==="ready"&&at.domLoaded?et(tw({type:Qt})):ht.push({func:et,scope:ot}):(at.events[Lt][Qt]=ht=[{func:et,scope:ot}],ht.fakeName=yn,ht.capture=kn,ht.nativeHandler=gn,Qt==="ready"?rL(g,gn,at):Y0(g,yn||Qt,gn,kn))}return g=ht=null,et}unbind(g,$,et){if(!g||dr(g)||Sp(g))return this;const ot=g[this.expando];if(ot){let at=this.events[ot];if($){const ht=$.split(" ");let _t=ht.length;for(;_t--;){const St=ht[_t],Lt=at[St];if(Lt){if(et){let Ht=Lt.length;for(;Ht--;)if(Lt[Ht].func===et){const qt=Lt.nativeHandler,Qt=Lt.fakeName,gn=Lt.capture,kn=Lt.slice(0,Ht).concat(Lt.slice(Ht+1));kn.nativeHandler=qt,kn.fakeName=Qt,kn.capture=gn,at[St]=kn}}(!et||Lt.length===0)&&(delete at[St],EC(g,Lt.fakeName||St,Lt.nativeHandler,Lt.capture))}}}else tr(at,(ht,_t)=>{EC(g,ht.fakeName||_t,ht.nativeHandler,ht.capture)}),at={};for(const ht in at)if(Jr(at,ht))return this;delete this.events[ot];try{delete g[this.expando]}catch{g[this.expando]=null}}return this}fire(g,$,et){return this.dispatch(g,$,et)}dispatch(g,$,et){if(!g||dr(g)||Sp(g))return this;const ot=tw({type:$,target:g},et);do{const at=g[this.expando];at&&this.executeHandlers(ot,at),g=g.parentNode||g.ownerDocument||g.defaultView||g.parentWindow}while(g&&!ot.isPropagationStopped());return this}clean(g){if(!g||dr(g)||Sp(g))return this;if(g[this.expando]&&this.unbind(g),g.getElementsByTagName||(g=g.document),g&&g.getElementsByTagName){this.unbind(g);const $=g.getElementsByTagName("*");let et=$.length;for(;et--;)g=$[et],g[this.expando]&&this.unbind(g)}return this}destroy(){this.events={}}cancel(g){return g&&(g.preventDefault(),g.stopImmediatePropagation()),!1}executeHandlers(g,$){const et=this.events[$],ot=et&&et[g.type];if(ot)for(let at=0,ht=ot.length;at<ht;at++){const _t=ot[at];if(_t&&_t.func.call(_t.scope,g)===!1&&g.preventDefault(),g.isImmediatePropagationStopped())return}}}u2.Event=new u2;const QA=cr.each,sL=cr.grep,oE="data-mce-style",D1=cr.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),O0=(c,g,$)=>{Pn($)||$===""?zu(c,g):ip(c,g,$)},gr=c=>c.replace(/[A-Z]/g,g=>"-"+g.toLowerCase()),AC=(c,g)=>{let $=0;if(c)for(let et=c.nodeType,ot=c.previousSibling;ot;ot=ot.previousSibling){const at=ot.nodeType;g&&dr(ot)&&(at===et||!ot.data.length)||($++,et=at)}return $},Fm=(c,g)=>{const $=lm(g,"style"),et=c.serialize(c.parse($),Sn(g));O0(g,oE,et)},k3=(c,g)=>ao(c)?Jr(D1,g)?c+"":c+"px":c,S3=(c,g,$)=>{const et=gr(g);Pn($)||$===""?p0(c,et):Ww(c,et,k3($,et))},E3=(c,g,$)=>{const et=g.keep_values,ot={set:(ht,_t,St)=>{const Lt=Qn.fromDom(ht);Vt(g.url_converter)&&an(_t)&&(_t=g.url_converter.call(g.url_converter_scope||$(),String(_t),St,ht));const Ht="data-mce-"+St;O0(Lt,Ht,_t),O0(Lt,St,_t)},get:(ht,_t)=>{const St=Qn.fromDom(ht);return lm(St,"data-mce-"+_t)||lm(St,_t)}},at={style:{set:(ht,_t)=>{const St=Qn.fromDom(ht);et&&O0(St,oE,_t),zu(St,"style"),Et(_t)&&Ks(St,c.parse(_t))},get:ht=>{const _t=Qn.fromDom(ht),St=lm(_t,oE)||lm(_t,"style");return c.serialize(c.parse(St),Sn(_t))}}};return et&&(at.href=at.src=ot),at},$u=(c,g={})=>{const $={},et=window,ot={};let at=0;const ht=!0,_t=!0,St=tp.forElement(Qn.fromDom(c),{contentCssCors:g.contentCssCors,referrerPolicy:g.referrerPolicy}),Lt=[],Ht=g.schema?g.schema:yu({}),qt=ew({url_converter:g.url_converter,url_converter_scope:g.url_converter_scope},g.schema),Qt=g.ownEvents?new u2:u2.Event,gn=Ht.getBlockElements(),kn=No=>Et(No)?Jr(gn,No):Nr(No)&&(Jr(gn,No.nodeName)||I1(Ht,No)),yn=No=>No&&c&&Et(No)?c.getElementById(No):No,Rn=No=>{const Do=yn(No);return an(Do)?Qn.fromDom(Do):null},so=(No,Do,Ar="")=>{let br;const Es=Rn(No);if(an(Es)&&Xs(Es)){const eu=NN[Do];eu&&eu.get?br=eu.get(Es.dom,Do):br=lm(Es,Do)}return an(br)?br:Ar},ho=No=>{const Do=yn(No);return Pn(Do)?[]:Do.attributes},xo=(No,Do,Ar)=>{ds(No,br=>{if(Nr(br)){const Es=Qn.fromDom(br),eu=Ar===""?null:Ar,Op=lm(Es,Do),Lx=NN[Do];Lx&&Lx.set?Lx.set(Es.dom,eu,Do):O0(Es,Do,eu),Op!==eu&&g.onSetAttrib&&g.onSetAttrib({attrElm:Es.dom,attrName:Do,attrValue:eu})}})},To=(No,Do)=>No.cloneNode(Do),or=()=>g.root_element||c.body,mr=No=>{const Do=Gv(No);return{x:Do.x,y:Do.y,w:Do.width,h:Do.height}},$r=(No,Do)=>uv(c.body,yn(No),Do),Zo=(No,Do,Ar)=>{ds(No,br=>{const Es=Qn.fromDom(br);S3(Es,Do,Ar),g.update_styles&&Fm(qt,Es)})},Lo=(No,Do)=>{ds(No,Ar=>{const br=Qn.fromDom(Ar);tr(Do,(Es,eu)=>{S3(br,eu,Es)}),g.update_styles&&Fm(qt,br)})},ir=(No,Do,Ar)=>{const br=yn(No);if(!(Pn(br)||!By(br)&&!mC(br)))return Ar?bp(Qn.fromDom(br),gr(Do)):(Do=Do.replace(/-(\D)/g,(Es,eu)=>eu.toUpperCase()),Do==="float"&&(Do="cssFloat"),br.style?br.style[Do]:void 0)},Gr=No=>{const Do=yn(No);if(!Do)return{w:0,h:0};let Ar=ir(Do,"width"),br=ir(Do,"height");return(!Ar||Ar.indexOf("px")===-1)&&(Ar="0"),(!br||br.indexOf("px")===-1)&&(br="0"),{w:parseInt(Ar,10)||Do.offsetWidth||Do.clientWidth,h:parseInt(br,10)||Do.offsetHeight||Do.clientHeight}},gs=No=>{const Do=yn(No),Ar=$r(Do),br=Gr(Do);return{x:Ar.x,y:Ar.y,w:br.w,h:br.h}},Cl=(No,Do)=>{if(!No)return!1;const Ar=Zt(No)?No:[No];return wn(Ar,br=>R0(Qn.fromDom(br),Do))},Sl=(No,Do,Ar,br)=>{const Es=[];let eu=yn(No);br=br===void 0;const Op=Ar||(or().nodeName!=="BODY"?or().parentNode:null);if(Et(Do))if(Do==="*")Do=Nr;else{const Lx=Do;Do=i_=>Cl(i_,Lx)}for(;eu&&!(eu===Op||Pn(eu.nodeType)||qx(eu)||fm(eu));){if(!Do||Do(eu))if(br)Es.push(eu);else return[eu];eu=eu.parentNode}return br?Es:null},au=(No,Do,Ar)=>{const br=Sl(No,Do,Ar,!1);return br&&br.length>0?br[0]:null},Cu=(No,Do,Ar)=>{let br=Do;if(No){Et(Do)&&(br=Es=>Cl(Es,Do));for(let Es=No[Ar];Es;Es=Es[Ar])if(Vt(br)&&br(Es))return Es}return null},jp=(No,Do)=>Cu(No,Do,"nextSibling"),k0=(No,Do)=>Cu(No,Do,"previousSibling"),qp=No=>Vt(No.querySelectorAll),Er=(No,Do)=>{var Ar,br;const Es=(br=(Ar=yn(Do))!==null&&Ar!==void 0?Ar:g.root_element)!==null&&br!==void 0?br:c;return qp(Es)?Ss(Es.querySelectorAll(No)):[]},ds=function(No,Do,Ar){const br=Ar??this;if(Zt(No)){const Es=[];return QA(No,(eu,Op)=>{const Lx=yn(eu);Lx&&Es.push(Do.call(br,Lx,Op))}),Es}else{const Es=yn(No);return Es?Do.call(br,Es):!1}},_c=(No,Do)=>{ds(No,Ar=>{tr(Do,(br,Es)=>{xo(Ar,Es,br)})})},Lr=(No,Do)=>{ds(No,Ar=>{const br=Qn.fromDom(Ar);$v(br,Do)})},Ts=(No,Do,Ar,br,Es)=>ds(No,eu=>{const Op=Et(Do)?c.createElement(Do):Do;return an(Ar)&&_c(Op,Ar),br&&(!Et(br)&&br.nodeType?Op.appendChild(br):Et(br)&&Lr(Op,br)),Es?Op:eu.appendChild(Op)}),Is=(No,Do,Ar)=>Ts(c.createElement(No),No,Do,Ar,!0),Mr=Xx.decode,El=Xx.encodeAllRaw,Ol=(No,Do,Ar="")=>{let br="<"+No;for(const Es in Do)_a(Do,Es)&&(br+=" "+Es+'="'+El(Do[Es])+'"');return Al(Ar)&&Jr(Ht.getVoidElements(),No)?br+" />":br+">"+Ar+"</"+No+">"},vm=No=>{const Do=c.createElement("div"),Ar=c.createDocumentFragment();Ar.appendChild(Do),No&&(Do.innerHTML=No);let br;for(;br=Do.firstChild;)Ar.appendChild(br);return Ar.removeChild(Do),Ar},Lu=(No,Do)=>ds(No,Ar=>{const br=Qn.fromDom(Ar);return Do&&rn(Jp(br),Es=>{gu(Es)&&Es.dom.length===0?mu(Es):Su(br,Es)}),mu(br),br.dom}),S0=No=>ds(No,Do=>{const Ar=Do.attributes;for(let br=Ar.length-1;br>=0;br--)Do.removeAttributeNode(Ar.item(br))}),Qy=No=>qt.parse(No),Dx=(No,Do)=>qt.serialize(No,Do),oy=No=>{if(s_!==$u.DOM&&c===document){if($[No])return;$[No]=!0}let Do=c.getElementById("mceDefaultStyles");if(!Do){Do=c.createElement("style"),Do.id="mceDefaultStyles",Do.type="text/css";const Ar=c.head;Ar.firstChild?Ar.insertBefore(Do,Ar.firstChild):Ar.appendChild(Do)}Do.styleSheet?Do.styleSheet.cssText+=No:Do.appendChild(c.createTextNode(No))},l1=No=>{No||(No=""),rn(No.split(","),Do=>{ot[Do]=!0,St.load(Do).catch(fn)})},o_=(No,Do,Ar)=>{ds(No,br=>{if(Nr(br)){const Es=Qn.fromDom(br),eu=Do.split(" ");rn(eu,Op=>{an(Ar)?(Ar?Fy:_1)(Es,Op):$x(Es,Op)})}})},B0=(No,Do)=>{o_(No,Do,!0)},_b=(No,Do)=>{o_(No,Do,!1)},us=(No,Do)=>{const Ar=Rn(No),br=Do.split(" ");return an(Ar)&&wo(br,Es=>K_(Ar,Es))},Hl=No=>{ds(No,Do=>p0(Qn.fromDom(Do),"display"))},Pp=No=>{ds(No,Do=>Ww(Qn.fromDom(Do),"display","none"))},_m=No=>{const Do=Rn(No);return an(Do)&&du(zv(Do,"display"),"none")},Um=No=>(No||"mce_")+at++,xm=No=>{const Do=Rn(No);return an(Do)?Nr(Do.dom)?Do.dom.outerHTML:g0(Do):""},_p=(No,Do)=>{ds(No,Ar=>{Nr(Ar)&&(Ar.outerHTML=Do)})},Ep=(No,Do)=>{const Ar=yn(Do);return ds(No,br=>{const Es=Ar==null?void 0:Ar.parentNode,eu=Ar==null?void 0:Ar.nextSibling;return Es&&(eu?Es.insertBefore(br,eu):Es.appendChild(br)),br})},Oy=(No,Do,Ar)=>ds(Do,br=>{var Es;const eu=Zt(Do)?No.cloneNode(!0):No;return Ar&&QA(sL(br.childNodes),Op=>{eu.appendChild(Op)}),(Es=br.parentNode)===null||Es===void 0||Es.replaceChild(eu,br),br}),r_=(No,Do)=>{if(No.nodeName!==Do.toUpperCase()){const Ar=Is(Do);return QA(ho(No),br=>{xo(Ar,br.nodeName,so(No,br.nodeName))}),Oy(Ar,No,!0),Ar}else return No},Nx=(No,Do)=>{let Ar=No;for(;Ar;){let br=Do;for(;br&&Ar!==br;)br=br.parentNode;if(Ar===br)break;Ar=Ar.parentNode}return!Ar&&No.ownerDocument?No.ownerDocument.documentElement:Ar},V_=(No,Do,Ar)=>Xt(Do)?hm(Ht,No,{...Ar,isContent:Es=>{const eu=Es.nodeName.toLowerCase();return!!Do[eu]}}):hm(Ht,No,Ar),NA=()=>c.createRange(),BS=(No,Do,Ar)=>{let br=NA(),Es,eu;if(No&&Do&&No.parentNode&&Do.parentNode){const Op=No.parentNode;return br.setStart(Op,AC(No)),br.setEnd(Do.parentNode,AC(Do)),Es=br.extractContents(),br=NA(),br.setStart(Do.parentNode,AC(Do)+1),br.setEnd(Op,AC(No)+1),eu=br.extractContents(),Op.insertBefore(dv(s_,Es,Ht),No),Ar?Op.insertBefore(Ar,No):Op.insertBefore(Do,No),Op.insertBefore(dv(s_,eu,Ht),No),Lu(No),Ar||Do}else return},sC=(No,Do,Ar,br)=>{if(Zt(No)){let Es=No.length;const eu=[];for(;Es--;)eu[Es]=sC(No[Es],Do,Ar,br);return eu}else return g.collect&&(No===c||No===et)&&Lt.push([No,Do,Ar,br]),Qt.bind(No,Do,Ar,br||s_)},Tv=(No,Do,Ar)=>{if(Zt(No)){let br=No.length;const Es=[];for(;br--;)Es[br]=Tv(No[br],Do,Ar);return Es}else{if(Lt.length>0&&(No===c||No===et)){let br=Lt.length;for(;br--;){const[Es,eu,Op]=Lt[br];No===Es&&(!Do||Do===eu)&&(!Ar||Ar===Op)&&Qt.unbind(Es,eu,Op)}}return Qt.unbind(No,Do,Ar)}},iC=(No,Do,Ar)=>Qt.dispatch(No,Do,Ar),i3=(No,Do,Ar)=>Qt.dispatch(No,Do,Ar),LA=No=>{if(No&&By(No)){const Do=No.getAttribute("data-mce-contenteditable");return Do&&Do!=="inherit"?Do:No.contentEditable!=="inherit"?No.contentEditable:null}else return null},s_={doc:c,settings:g,win:et,files:ot,stdMode:ht,boxModel:_t,styleSheetLoader:St,boundEvents:Lt,styles:qt,schema:Ht,events:Qt,isBlock:kn,root:null,clone:To,getRoot:or,getViewPort:mr,getRect:gs,getSize:Gr,getParent:au,getParents:Sl,get:yn,getNext:jp,getPrev:k0,select:Er,is:Cl,add:Ts,create:Is,createHTML:Ol,createFragment:vm,remove:Lu,setStyle:Zo,getStyle:ir,setStyles:Lo,removeAllAttribs:S0,setAttrib:xo,setAttribs:_c,getAttrib:so,getPos:$r,parseStyle:Qy,serializeStyle:Dx,addStyle:oy,loadCSS:l1,addClass:B0,removeClass:_b,hasClass:us,toggleClass:o_,show:Hl,hide:Pp,isHidden:_m,uniqueId:Um,setHTML:Lr,getOuterHTML:xm,setOuterHTML:_p,decode:Mr,encode:El,insertAfter:Ep,replace:Oy,rename:r_,findCommonAncestor:Nx,run:ds,getAttribs:ho,isEmpty:V_,createRng:NA,nodeIndex:AC,split:BS,bind:sC,unbind:Tv,fire:i3,dispatch:iC,getContentEditable:LA,getContentEditableParent:No=>{const Do=or();let Ar=null;for(let br=No;br&&br!==Do&&(Ar=LA(br),Ar===null);br=br.parentNode);return Ar},isEditable:No=>{if(an(No)){const Do=Nr(No)?No:No.parentElement;return an(Do)&&By(Do)&&W0(Qn.fromDom(Do))}else return!1},destroy:()=>{if(Lt.length>0){let No=Lt.length;for(;No--;){const[Do,Ar,br]=Lt[No];Qt.unbind(Do,Ar,br)}}tr(ot,(No,Do)=>{St.unload(Do),delete ot[Do]})},isChildOf:(No,Do)=>No===Do||Do.contains(No),dumpRng:No=>"startContainer: "+No.startContainer.nodeName+", startOffset: "+No.startOffset+", endContainer: "+No.endContainer.nodeName+", endOffset: "+No.endOffset},NN=E3(qt,g,ln(s_));return s_};$u.DOM=$u(document),$u.nodeIndex=AC;const iL=$u.DOM,d2=0,lx=1,TC=2,T3=3;class E_{constructor(g={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=g}_setReferrerPolicy(g){this.settings.referrerPolicy=g}loadScript(g){return new Promise(($,et)=>{const ot=iL;let at;const ht=()=>{ot.remove(Lt),at&&(at.onerror=at.onload=at=null)},_t=()=>{ht(),$()},St=()=>{ht(),et("Failed to load script: "+g)},Lt=ot.uniqueId();at=document.createElement("script"),at.id=Lt,at.type="text/javascript",at.src=cr._addCacheSuffix(g),this.settings.referrerPolicy&&ot.setAttrib(at,"referrerpolicy",this.settings.referrerPolicy),at.onload=_t,at.onerror=St,(document.getElementsByTagName("head")[0]||document.body).appendChild(at)})}isDone(g){return this.states[g]===TC}markDone(g){this.states[g]=TC}add(g){const $=this;return $.queue.push(g),$.states[g]===void 0&&($.states[g]=d2),new Promise((ot,at)=>{$.scriptLoadedCallbacks[g]||($.scriptLoadedCallbacks[g]=[]),$.scriptLoadedCallbacks[g].push({resolve:ot,reject:at})})}load(g){return this.add(g)}remove(g){delete this.states[g],delete this.scriptLoadedCallbacks[g]}loadQueue(){const g=this.queue;return this.queue=[],this.loadScripts(g)}loadScripts(g){const $=this,et=(St,Lt)=>{ba($.scriptLoadedCallbacks,Lt).each(Ht=>{rn(Ht,qt=>qt[St](Lt))}),delete $.scriptLoadedCallbacks[Lt]},ot=St=>{const Lt=zn(St,Ht=>Ht.status==="rejected");return Lt.length>0?Promise.reject(oo(Lt,({reason:Ht})=>Zt(Ht)?Ht:[Ht])):Promise.resolve()},at=St=>Promise.allSettled(Dn(St,Lt=>$.states[Lt]===TC?(et("resolve",Lt),Promise.resolve()):$.states[Lt]===T3?(et("reject",Lt),Promise.reject(Lt)):($.states[Lt]=lx,$.loadScript(Lt).then(()=>{$.states[Lt]=TC,et("resolve",Lt);const Ht=$.queue;return Ht.length>0?($.queue=[],at(Ht).then(ot)):Promise.resolve()},()=>($.states[Lt]=T3,et("reject",Lt),Promise.reject(Lt)))))),ht=St=>($.loading=!0,at(St).then(Lt=>{$.loading=!1;const Ht=$.queueLoadedCallbacks.shift();return Yt.from(Ht).each(Ro),ot(Lt)})),_t=Po(g);return $.loading?new Promise((St,Lt)=>{$.queueLoadedCallbacks.push(()=>{ht(_t).then(St,Lt)})}):ht(_t)}}E_.ScriptLoader=new E_;const UM=(c,g)=>{const $=c.indexOf(g);return $!==-1&&c.indexOf(g,$+1)>$},Vp=c=>$t(c)&&Jr(c,"raw"),eT=c=>Zt(c)&&c.length>1,bu={},I3=Eu("en"),X0=()=>ba(bu,I3.get()),L1={getData:()=>Ms(bu,c=>({...c})),setCode:c=>{c&&I3.set(c)},getCode:()=>I3.get(),add:(c,g)=>{let $=bu[c];$||(bu[c]=$={});const et=Dn(Zr(g),ot=>ot.toLowerCase());tr(g,(ot,at)=>{const ht=at.toLowerCase();ht!==at&&UM(et,ht)?(Jr(g,ht)||($[ht]=ot),$[at]=ot):$[ht]=ot})},translate:c=>{const g=X0().getOr({}),$=ht=>Vt(ht)?Object.prototype.toString.call(ht):et(ht)?"":""+ht,et=ht=>ht===""||ht===null||ht===void 0,ot=ht=>{const _t=$(ht);return Jr(g,_t)?$(g[_t]):ba(g,_t.toLowerCase()).map($).getOr(_t)},at=ht=>ht.replace(/{context:\w+}$/,"");if(et(c))return"";if(Vp(c))return $(c.raw);if(eT(c)){const ht=c.slice(1),_t=ot(c[0]).replace(/\{([0-9]+)\}/g,(St,Lt)=>Jr(ht,Lt)?$(ht[Lt]):St);return at(_t)}return at(ot(c))},isRtl:()=>X0().bind(c=>ba(c,"_dir")).exists(c=>c==="rtl"),hasCode:c=>Jr(bu,c)},D0=()=>{const c=[],g={},$={},et=[],ot=(yn,Rn)=>{const so=zn(et,ho=>ho.name===yn&&ho.state===Rn);rn(so,ho=>ho.resolve())},at=yn=>Jr(g,yn),ht=yn=>Jr($,yn),_t=yn=>{if($[yn])return $[yn].instance},St=(yn,Rn)=>{const so=L1.getCode(),ho=","+(Rn||"")+",";!so||Rn&&ho.indexOf(","+so+",")===-1||E_.ScriptLoader.add(g[yn]+"/langs/"+so+".js")},Lt=(yn,Rn)=>{D0.languageLoad!==!1&&(at(yn)?St(yn,Rn):kn(yn,"loaded").then(()=>St(yn,Rn)))},Ht=(yn,Rn)=>(c.push(Rn),$[yn]={instance:Rn},ot(yn,"added"),Rn),qt=yn=>{delete g[yn],delete $[yn]},Qt=(yn,Rn)=>Et(Rn)?Et(yn)?{prefix:"",resource:Rn,suffix:""}:{prefix:yn.prefix,resource:Rn,suffix:yn.suffix}:Rn,gn=(yn,Rn)=>{if(g[yn])return Promise.resolve();let so=Et(Rn)?Rn:Rn.prefix+Rn.resource+Rn.suffix;so.indexOf("/")!==0&&so.indexOf("://")===-1&&(so=D0.baseURL+"/"+so),g[yn]=so.substring(0,so.lastIndexOf("/"));const ho=()=>(ot(yn,"loaded"),Promise.resolve());return $[yn]?ho():E_.ScriptLoader.add(so).then(ho)},kn=(yn,Rn="added")=>Rn==="added"&&ht(yn)||Rn==="loaded"&&at(yn)?Promise.resolve():new Promise(so=>{et.push({name:yn,state:Rn,resolve:so})});return{items:c,urls:g,lookup:$,get:_t,requireLangPack:Lt,add:Ht,remove:qt,createUrl:Qt,load:gn,waitFor:kn}};D0.languageLoad=!0,D0.baseURL="",D0.PluginManager=D0(),D0.ThemeManager=D0(),D0.ModelManager=D0();const RC=(c,g)=>{let $=null;return{cancel:()=>{Nt($)||(clearTimeout($),$=null)},throttle:(...at)=>{Nt($)&&($=setTimeout(()=>{$=null,c.apply(null,at)},g))}}},nT=(c,g)=>{let $=null;const et=()=>{Nt($)||(clearTimeout($),$=null)};return{cancel:et,throttle:(...at)=>{et(),$=setTimeout(()=>{$=null,c.apply(null,at)},g)}}},oT=(c,g,$)=>zp(c,g,$).isSome(),MC=ln("mce-annotation"),nw=ln("data-mce-annotation"),A_=ln("data-mce-annotation-uid"),PC=ln("data-mce-annotation-active"),ow=ln("data-mce-annotation-classes"),ux=ln("data-mce-annotation-attrs"),f2=c=>g=>_i(g,c),rE=(c,g)=>{const $=c.selection.getRng(),et=Qn.fromDom($.startContainer),ot=Qn.fromDom(c.getBody()),at=g.fold(()=>"."+MC(),St=>`[${nw()}="${St}"]`),ht=h0(et,$.startOffset).getOr(et);return iv(ht,at,f2(ot)).bind(St=>Vu(St,`${A_()}`).bind(Lt=>Vu(St,`${nw()}`).map(Ht=>{const qt=R3(c,Lt);return{uid:Lt,name:Ht,elements:qt}})))},rT=c=>Xs(c)&&K_(c,MC()),VM=(c,g)=>ap(c,"data-mce-bogus")||oT(c,'[data-mce-bogus="all"]',f2(g)),R3=(c,g)=>{const $=Qn.fromDom(c.getBody()),et=m0($,`[${A_()}="${g}"]`);return zn(et,ot=>!VM(ot,$))},OC=(c,g)=>{const $=Qn.fromDom(c.getBody()),et=m0($,`[${nw()}="${g}"]`),ot={};return rn(et,at=>{if(!VM(at,$)){const ht=lm(at,A_()),_t=ba(ot,ht).getOr([]);ot[ht]=_t.concat([at])}}),ot},WM=(c,g)=>{const $=Eu({}),et=()=>({listeners:[],previous:wm()}),ot=(qt,Qt)=>{at(qt,gn=>(Qt(gn),gn))},at=(qt,Qt)=>{const gn=$.get(),kn=ba(gn,qt).getOrThunk(et),yn=Qt(kn);gn[qt]=yn,$.set(gn)},ht=(qt,Qt,gn)=>{ot(qt,kn=>{rn(kn.listeners,yn=>yn(!0,qt,{uid:Qt,nodes:Dn(gn,Rn=>Rn.dom)}))})},_t=qt=>{ot(qt,Qt=>{rn(Qt.listeners,gn=>gn(!1,qt))})},St=(qt,Qt)=>{rn(R3(c,qt),gn=>{Qt?ip(gn,PC(),"true"):zu(gn,PC())})},Lt=nT(()=>{const qt=vr(g.getNames());rn(qt,Qt=>{at(Qt,gn=>{const kn=gn.previous.get();return rE(c,Yt.some(Qt)).fold(()=>{kn.each(yn=>{_t(Qt),gn.previous.clear(),St(yn,!1)})},({uid:yn,name:Rn,elements:so})=>{du(kn,yn)||(kn.each(ho=>St(ho,!1)),ht(Rn,yn,so),gn.previous.set(yn),St(yn,!0))}),{previous:gn.previous,listeners:gn.listeners}})})},30);return c.on("remove",()=>{Lt.cancel()}),c.on("NodeChange",()=>{Lt.throttle()}),{addListener:(qt,Qt)=>{at(qt,gn=>({previous:gn.previous,listeners:gn.listeners.concat([Qt])}))}}},lL=(c,g)=>{const $=nw(),et=at=>Yt.from(at.attr($)).bind(g.lookup),ot=at=>{var ht,_t;at.attr(A_(),null),at.attr(nw(),null),at.attr(PC(),null);const St=Yt.from(at.attr(ux())).map(Qt=>Qt.split(",")).getOr([]),Lt=Yt.from(at.attr(ow())).map(Qt=>Qt.split(",")).getOr([]);rn(St,Qt=>at.attr(Qt,null));const Ht=(_t=(ht=at.attr("class"))===null||ht===void 0?void 0:ht.split(" "))!==null&&_t!==void 0?_t:[],qt=Ir(Ht,[MC()].concat(Lt));at.attr("class",qt.length>0?qt.join(" "):null),at.attr(ow(),null),at.attr(ux(),null)};c.serializer.addTempAttr(PC()),c.serializer.addAttributeFilter($,at=>{for(const ht of at)et(ht).each(_t=>{_t.persistent===!1&&(ht.name==="span"?ht.unwrap():ot(ht))})})},sT=()=>{const c={};return{register:(ot,at)=>{c[ot]={name:ot,settings:at}},lookup:ot=>ba(c,ot).map(at=>at.settings),getNames:()=>Zr(c)}},M3=(c,g,$)=>Math.min(Math.max(c,g),$),sE=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let P3=0;const DC=c=>{const $=new Date().getTime(),et=Math.floor(sE()*1e9);return P3++,c+"_"+et+P3+String($)},Qz=(c,g)=>{rn(g,$=>{Fy(c,$)})},eB=(c,g)=>{rn(g,$=>{_1(c,$)})},NC=(c,g)=>Qn.fromDom(c.dom.cloneNode(g)),Wv=c=>NC(c,!1),iE=c=>NC(c,!0),qM=(c,g)=>{const $=Qn.fromTag(g),et=u_(c);return Tp($,et),$},ZM=(c,g)=>{const $=qM(c,g);ly(c,$);const et=Jp(c);return Bv($,et),mu(c),$},KM=(c,g,$=On)=>{const et=new um(c,g),ot=at=>{let ht;do ht=et[at]();while(ht&&!dr(ht)&&!$(ht));return Yt.from(ht).filter(dr)};return{current:()=>Yt.from(et.current()).filter(dr),next:()=>ot("next"),prev:()=>ot("prev"),prev2:()=>ot("prev2")}},h2=(c,g)=>{const $=g||(ht=>c.isBlock(ht)||Jl(ht)||Ql(ht)),et=(ht,_t,St,Lt)=>{if(dr(ht)){const Ht=Lt(ht,_t,ht.data);if(Ht!==-1)return Yt.some({container:ht,offset:Ht})}return St().bind(Ht=>et(Ht.container,Ht.offset,St,Lt))};return{backwards:(ht,_t,St,Lt)=>{const Ht=KM(ht,Lt??c.getRoot(),$);return et(ht,_t,()=>Ht.prev().map(qt=>({container:qt,offset:qt.length})),St).getOrNull()},forwards:(ht,_t,St,Lt)=>{const Ht=KM(ht,Lt??c.getRoot(),$);return et(ht,_t,()=>Ht.next().map(qt=>({container:qt,offset:0})),St).getOrNull()}}},g2=((c,g)=>{const $=at=>{if(!c(at))throw new Error("Can only get "+g+" value of a "+g+" node");return et(at).getOr("")},et=at=>c(at)?Yt.from(at.dom.nodeValue):Yt.none();return{get:$,getOption:et,set:(at,ht)=>{if(!c(at))throw new Error("Can only set raw "+g+" value of a "+g+" node");at.dom.nodeValue=ht}}})(gu,"text"),LC=c=>g2.get(c),YM=c=>g2.getOption(c),FC=(c,g)=>g2.set(c,g),cL=["td","th"],O3=["thead","tbody","tfoot"],XM=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],JM=["li","dd","dt"],i0=["ul","ol","dl"],nB=["pre","script","textarea","style"],rw=c=>{let g;return $=>(g=g||sr(c,_o),Jr(g,Sn($)))},uL=c=>Sn(c)==="table",dx=c=>Xs(c)&&Sn(c)==="br",wy=rw(XM),F1=rw(i0),m2=rw(JM),QM=rw(O3),aE=rw(cL),iT=rw(nB),sw=c=>{const g=[];let $=c.dom;for(;$;)g.push(Qn.fromDom($)),$=$.lastChild;return g},D3=c=>{const g=m0(c,"br"),$=zn(sw(c).slice(-1),dx);g.length===$.length&&rn($,mu)},z1=()=>{const c=Qn.fromTag("br");return ip(c,"data-mce-bogus","1"),c},T_=c=>{y_(c),Up(c,z1())},dL=(c,g)=>{k1(c).each($=>{sv($).each(et=>{g.isBlock(Sn(c))&&dx($)&&g.isBlock(Sn(et))&&mu($)})})},Cm=hC,lE=pC,fv=cy,aT=c=>c.insertContent(Cm,{preserve_zwsp:!0}),N3=Nr,y2=dr,iw=c=>(y2(c)&&(c=c.parentNode),N3(c)&&c.hasAttribute("data-mce-caret")),qv=c=>y2(c)&&lE(c.data),hv=c=>iw(c)||qv(c),e4=c=>c.firstChild!==c.lastChild||!Jl(c.firstChild),fL=(c,g)=>{var $;const ot=(($=c.ownerDocument)!==null&&$!==void 0?$:document).createTextNode(Cm),at=c.parentNode;if(g){const ht=c.previousSibling;if(y2(ht)){if(hv(ht))return ht;if(v0(ht))return ht.splitText(ht.data.length-1)}at==null||at.insertBefore(ot,c)}else{const ht=c.nextSibling;if(y2(ht)){if(hv(ht))return ht;if(zl(ht))return ht.splitText(1),ht}c.nextSibling?at==null||at.insertBefore(ot,c.nextSibling):at==null||at.appendChild(ot)}return ot},I_=c=>{const g=c.container();return dr(g)?g.data.charAt(c.offset())===Cm||c.isAtStart()&&qv(g.previousSibling):!1},fx=c=>{const g=c.container();return dr(g)?g.data.charAt(c.offset()-1)===Cm||c.isAtEnd()&&qv(g.nextSibling):!1},lT=(c,g,$)=>{var et;const at=((et=g.ownerDocument)!==null&&et!==void 0?et:document).createElement(c);at.setAttribute("data-mce-caret",$?"before":"after"),at.setAttribute("data-mce-bogus","all"),at.appendChild(z1().dom);const ht=g.parentNode;return $?ht==null||ht.insertBefore(at,g):g.nextSibling?ht==null||ht.insertBefore(at,g.nextSibling):ht==null||ht.appendChild(at),at},zl=c=>y2(c)&&c.data[0]===Cm,v0=c=>y2(c)&&c.data[c.data.length-1]===Cm,b2=c=>{var g;const $=c.getElementsByTagName("br"),et=$[$.length-1];T1(et)&&((g=et.parentNode)===null||g===void 0||g.removeChild(et))},zC=c=>c&&c.hasAttribute("data-mce-caret")?(b2(c),c.removeAttribute("data-mce-caret"),c.removeAttribute("data-mce-bogus"),c.removeAttribute("style"),c.removeAttribute("data-mce-style"),c.removeAttribute("_moz_abspos"),c):null,qu=c=>iw(c.startContainer),v2=Math.round,hx=c=>c?{left:v2(c.left),top:v2(c.top),bottom:v2(c.bottom),right:v2(c.right),width:v2(c.width),height:v2(c.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},t4=(c,g)=>(c=hx(c),g||(c.left=c.left+c.width),c.right=c.left,c.width=0,c),hL=(c,g)=>c.left===g.left&&c.top===g.top&&c.bottom===g.bottom&&c.right===g.right,n4=(c,g,$)=>c>=0&&c<=Math.min(g.height,$.height)/2,Zu=(c,g)=>{const $=Math.min(g.height/2,c.height/2);return c.bottom-$<g.top?!0:c.top>g.bottom?!1:n4(g.top-c.bottom,c,g)},cE=(c,g)=>c.top>g.bottom?!0:c.bottom<g.top?!1:n4(g.bottom-c.top,c,g),pL=(c,g,$)=>g>=c.left&&g<=c.right&&$>=c.top&&$<=c.bottom,o4=c=>Hn(c,(g,$)=>g.fold(()=>Yt.some($),et=>{const ot=Math.min($.left,et.left),at=Math.min($.top,et.top),ht=Math.max($.right,et.right),_t=Math.max($.bottom,et.bottom);return Yt.some({top:at,right:ht,bottom:_t,left:ot,width:ht-ot,height:_t-at})}),Yt.none()),_2=(c,g,$)=>{const et=Math.max(Math.min(g,c.left+c.width),c.left),ot=Math.max(Math.min($,c.top+c.height),c.top);return Math.sqrt((g-et)*(g-et)+($-ot)*($-ot))},Zv=(c,g)=>Math.max(0,Math.min(c.bottom,g.bottom)-Math.max(c.top,g.top)),uE=c=>{const g=c.startContainer,$=c.startOffset;return g===c.endContainer&&g.hasChildNodes()&&c.endOffset===$+1?g.childNodes[$]:null},px=(c,g)=>{if(Nr(c)&&c.hasChildNodes()){const $=c.childNodes,et=M3(g,0,$.length-1);return $[et]}else return c},Wr=(c,g)=>{if(!(g<0&&Nr(c)&&c.hasChildNodes()))return px(c,g)},r4=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),cT=c=>Et(c)&&c.charCodeAt(0)>=768&&r4.test(c),s4=(...c)=>g=>{for(let $=0;$<c.length;$++)if(c[$](g))return!0;return!1},i4=(...c)=>g=>{for(let $=0;$<c.length;$++)if(!c[$](g))return!1;return!0},L3=Jo,F3=Ql,BC=Jl,dE=dr,x2=$y(["script","style","textarea"]),uT=$y(["img","input","textarea","hr","iframe","video","audio","object","embed"]),$C=$y(["table"]),dT=hv,Kv=c=>dT(c)?!1:dE(c)?!x2(c.parentNode):uT(c)||BC(c)||$C(c)||fT(c),gL=c=>Nr(c)&&c.getAttribute("unselectable")==="true",fT=c=>!gL(c)&&F3(c),hT=(c,g)=>{for(let $=c.parentNode;$&&$!==g;$=$.parentNode){if(fT($))return!1;if(L3($))return!0}return!0},mL=c=>fT(c)?!Hn(Ss(c.getElementsByTagName("*")),(g,$)=>g||L3($),!1):!1,yL=c=>uT(c)||mL(c),a4=(c,g)=>Kv(c)&&hT(c,g),fE=Nr,l4=Kv,z3=Kw("display","block table"),bL=Kw("float","left right"),hE=i4(fE,l4,Wn(bL)),GC=Wn(Kw("white-space","pre pre-line pre-wrap")),aw=dr,pT=Jl,B3=$u.nodeIndex,gT=Wr,$3=c=>c?c.createRange():$u.DOM.createRng(),G3=c=>Et(c)&&/[\r\n\t ]/.test(c),j3=c=>!!c.setStart&&!!c.setEnd,c4=c=>{const g=c.startContainer,$=c.startOffset;if(G3(c.toString())&&GC(g.parentNode)&&dr(g)){const et=g.data;if(G3(et[$-1])||G3(et[$+1]))return!0}return!1},Cy=c=>{const g=c.ownerDocument,$=$3(g),et=g.createTextNode(dm),ot=c.parentNode;ot.insertBefore(et,c),$.setStart(et,0),$.setEnd(et,1);const at=hx($.getBoundingClientRect());return ot.removeChild(et),at},w2=c=>{const g=c.startContainer,$=c.endContainer,et=c.startOffset,ot=c.endOffset;if(g===$&&dr($)&&et===0&&ot===1){const at=c.cloneRange();return at.setEndAfter($),lw(at)}else return null},u4=c=>c.left===0&&c.right===0&&c.top===0&&c.bottom===0,lw=c=>{var g;let $;const et=c.getClientRects();return et.length>0?$=hx(et[0]):$=hx(c.getBoundingClientRect()),!j3(c)&&pT(c)&&u4($)?Cy(c):u4($)&&j3(c)&&(g=w2(c))!==null&&g!==void 0?g:$},C2=(c,g)=>{const $=t4(c,g);return $.width=1,$.right=$.left+1,$},U3=c=>{const g=[],$=ht=>{ht.height!==0&&(g.length>0&&hL(ht,g[g.length-1])||g.push(ht))},et=(ht,_t)=>{const St=$3(ht.ownerDocument);if(_t<ht.data.length){if(cT(ht.data[_t]))return;if(cT(ht.data[_t-1])&&(St.setStart(ht,_t),St.setEnd(ht,_t+1),!c4(St))){$(C2(lw(St),!1));return}}_t>0&&(St.setStart(ht,_t-1),St.setEnd(ht,_t),c4(St)||$(C2(lw(St),!1))),_t<ht.data.length&&(St.setStart(ht,_t),St.setEnd(ht,_t+1),c4(St)||$(C2(lw(St),!0)))},ot=c.container(),at=c.offset();if(aw(ot))return et(ot,at),g;if(fE(ot))if(c.isAtEnd()){const ht=gT(ot,at);aw(ht)&&et(ht,ht.data.length),hE(ht)&&!pT(ht)&&$(C2(lw(ht),!1))}else{const ht=gT(ot,at);if(aw(ht)&&et(ht,0),hE(ht)&&c.isAtEnd())return $(C2(lw(ht),!1)),g;const _t=gT(c.container(),c.offset()-1);hE(_t)&&!pT(_t)&&(z3(_t)||z3(ht)||!hE(ht))&&$(C2(lw(_t),!1)),hE(ht)&&$(C2(lw(ht),!0))}return g},Uo=(c,g,$)=>{const et=()=>(aw(c),g===0),ot=()=>aw(c)?g>=c.data.length:g>=c.childNodes.length,at=()=>{const Ht=$3(c.ownerDocument);return Ht.setStart(c,g),Ht.setEnd(c,g),Ht},ht=()=>($||($=U3(Uo(c,g))),$),_t=()=>ht().length>0,St=Ht=>Ht&&c===Ht.container()&&g===Ht.offset(),Lt=Ht=>gT(c,Ht?g-1:g);return{container:ln(c),offset:ln(g),toRange:at,getClientRects:ht,isVisible:_t,isAtStart:et,isAtEnd:ot,isEqual:St,getNode:Lt}};Uo.fromRangeStart=c=>Uo(c.startContainer,c.startOffset),Uo.fromRangeEnd=c=>Uo(c.endContainer,c.endOffset),Uo.after=c=>Uo(c.parentNode,B3(c)+1),Uo.before=c=>Uo(c.parentNode,B3(c)),Uo.isAbove=(c,g)=>Bs(_r(g.getClientRects()),fs(c.getClientRects()),Zu).getOr(!1),Uo.isBelow=(c,g)=>Bs(fs(g.getClientRects()),_r(c.getClientRects()),cE).getOr(!1),Uo.isAtStart=c=>c?c.isAtStart():!1,Uo.isAtEnd=c=>c?c.isAtEnd():!1,Uo.isTextPosition=c=>c?dr(c.container()):!1,Uo.isElementPosition=c=>!Uo.isTextPosition(c);const Yv=(c,g)=>{dr(g)&&g.data.length===0&&c.remove(g)},k2=(c,g,$)=>{g.insertNode($),Yv(c,$.previousSibling),Yv(c,$.nextSibling)},vL=(c,g,$)=>{const et=Yt.from($.firstChild),ot=Yt.from($.lastChild);g.insertNode($),et.each(at=>Yv(c,at.previousSibling)),ot.each(at=>Yv(c,at.nextSibling))},pE=(c,g,$)=>{fm($)?vL(c,g,$):k2(c,g,$)},pv=dr,jC=T1,d4=$u.nodeIndex,f4=c=>{const g=c.parentNode;return jC(g)?f4(g):g},_0=c=>c?Un(c.childNodes,(g,$)=>(jC($)&&$.nodeName!=="BR"?g=g.concat(_0($)):g.push($),g),[]):[],mT=(c,g)=>{let $=c;for(;($=$.previousSibling)&&pv($);)g+=$.data.length;return g},h4=c=>g=>c===g,_L=c=>{let g,$;g=_0(f4(c)),$=Bn(g,h4(c),c),g=g.slice(0,$+1);const et=Un(g,(ot,at,ht)=>(pv(at)&&pv(g[ht-1])&&ot++,ot),0);return g=Uu(g,$y([c.nodeName])),$=Bn(g,h4(c),c),$-et},g4=c=>(pv(c)?"text()":c.nodeName.toLowerCase())+"["+_L(c)+"]",xL=(c,g,$)=>{const et=[];for(let ot=g.parentNode;ot&&ot!==c;ot=ot.parentNode)et.push(ot);return et},m4=(c,g)=>{let $=[],et=g.container(),ot=g.offset(),at;if(pv(et))at=mT(et,ot);else{const _t=et.childNodes;ot>=_t.length?(at="after",ot=_t.length-1):at="before",et=_t[ot]}$.push(g4(et));let ht=xL(c,et);return ht=Uu(ht,Wn(T1)),$=$.concat(ju(ht,_t=>g4(_t))),$.reverse().join("/")+","+at},wL=(c,g,$)=>{let et=_0(c);return et=Uu(et,(ot,at)=>!pv(ot)||!pv(et[at-1])),et=Uu(et,$y([g])),et[$]},CL=(c,g)=>{let $=c,et=0;for(;pv($);){const ot=$.data.length;if(g>=et&&g<=et+ot){c=$,g=g-et;break}if(!pv($.nextSibling)){c=$,g=ot;break}et+=ot,$=$.nextSibling}return pv(c)&&g>c.data.length&&(g=c.data.length),Uo(c,g)},y4=(c,g)=>{if(!g)return null;const $=g.split(","),et=$[0].split("/"),ot=$.length>1?$[1]:"before",at=Un(et,(ht,_t)=>{const St=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(_t);return St?(St[1]==="text()"&&(St[1]="#text"),wL(ht,St[1],parseInt(St[2],10))):null},c);if(!at)return null;if(!pv(at)&&at.parentNode){let ht;return ot==="after"?ht=d4(at)+1:ht=d4(at),Uo(at.parentNode,ht)}return CL(at,parseInt(ot,10))},UC=Ql,kL=(c,g,$)=>{let et=c(g.data.slice(0,$)).length;for(let ot=g.previousSibling;ot&&dr(ot);ot=ot.previousSibling)et+=c(ot.data).length;return et},b4=(c,g,$,et,ot)=>{const at=ot?et.startContainer:et.endContainer;let ht=ot?et.startOffset:et.endOffset;const _t=[],St=c.getRoot();if(dr(at))_t.push($?kL(g,at,ht):ht);else{let Lt=0;const Ht=at.childNodes;ht>=Ht.length&&Ht.length&&(Lt=1,ht=Math.max(0,Ht.length-1)),_t.push(c.nodeIndex(Ht[ht],$)+Lt)}for(let Lt=at;Lt&&Lt!==St;Lt=Lt.parentNode)_t.push(c.nodeIndex(Lt,$));return _t},SL=(c,g,$,et)=>{const ot=g.dom,at=b4(ot,c,$,et,!0),ht=g.isForward(),_t=qu(et)?{isFakeCaret:!0}:{};if(g.isCollapsed())return{start:at,forward:ht,..._t};{const St=b4(ot,c,$,et,!1);return{start:at,end:St,forward:ht,..._t}}},mp=(c,g,$)=>{let et=0;return cr.each(c.select(g),ot=>{if(ot.getAttribute("data-mce-bogus")!=="all"){if(ot===$)return!1;et++;return}}),et},H3=(c,g)=>{let $=g?c.startContainer:c.endContainer,et=g?c.startOffset:c.endOffset;if(Nr($)&&$.nodeName==="TR"){const ot=$.childNodes;$=ot[Math.min(g?et:et-1,ot.length-1)],$&&(et=g?0:$.childNodes.length,g?c.setStart($,et):c.setEnd($,et))}},v4=c=>(H3(c,!0),H3(c,!1),c),_4=(c,g)=>{if(Nr(c)&&(c=px(c,g),UC(c)))return c;if(hv(c)){dr(c)&&iw(c)&&(c=c.parentNode);let $=c.previousSibling;if(UC($)||($=c.nextSibling,UC($)))return $}},V3=c=>_4(c.startContainer,c.startOffset)||_4(c.endContainer,c.endOffset),km=(c,g,$)=>{const et=$.getNode(),ot=$.getRng();if(et.nodeName==="IMG"||UC(et)){const ht=et.nodeName;return{name:ht,index:mp($.dom,ht,et)}}const at=V3(ot);if(at){const ht=at.tagName;return{name:ht,index:mp($.dom,ht,at)}}return SL(c,$,g,ot)},Uy=c=>{const g=c.getRng();return{start:m4(c.dom.getRoot(),Uo.fromRangeStart(g)),end:m4(c.dom.getRoot(),Uo.fromRangeEnd(g)),forward:c.isForward()}},x4=c=>({rng:c.getRng(),forward:c.isForward()}),W3=(c,g,$)=>{const et={"data-mce-type":"bookmark",id:g,style:"overflow:hidden;line-height:0px"};return $?c.create("span",et,"&#xFEFF;"):c.create("span",et)},q3=(c,g)=>{const $=c.dom;let et=c.getRng();const ot=$.uniqueId(),at=c.isCollapsed(),ht=c.getNode(),_t=ht.nodeName,St=c.isForward();if(_t==="IMG")return{name:_t,index:mp($,_t,ht)};const Lt=v4(et.cloneRange());if(!at){Lt.collapse(!1);const qt=W3($,ot+"_end",g);pE($,Lt,qt)}et=v4(et),et.collapse(!0);const Ht=W3($,ot+"_start",g);return pE($,et,Ht),c.moveToBookmark({id:ot,keep:!0,forward:St}),{id:ot,forward:St}},EL=(c,g,$=!1)=>g===2?km(fv,$,c):g===3?Uy(c):g?x4(c):q3(c,!1),yT=An(km,uo,!0),w4=c=>{const g=at=>at(c),$=ln(c),et=()=>ot,ot={tag:!0,inner:c,fold:(at,ht)=>ht(c),isValue:_o,isError:On,map:at=>pm.value(at(c)),mapError:et,bind:g,exists:g,forall:g,getOr:$,or:et,getOrThunk:$,orThunk:et,getOrDie:$,each:at=>{at(c)},toOptional:()=>Yt.some(c)};return ot},gE=c=>{const g=()=>$,$={tag:!1,inner:c,fold:(et,ot)=>et(c),isValue:On,isError:_o,map:g,mapError:et=>pm.error(et(c)),bind:g,exists:On,forall:_o,getOr:uo,or:uo,getOrThunk:no,orThunk:no,getOrDie:er(String(c)),each:fn,toOptional:Yt.none};return $},pm={value:w4,error:gE,fromOption:(c,g)=>c.fold(()=>gE(g),w4)},gv={generate:c=>{if(!Zt(c))throw new Error("cases must be an array");if(c.length===0)throw new Error("there must be at least one case");const g=[],$={};return rn(c,(et,ot)=>{const at=Zr(et);if(at.length!==1)throw new Error("one and only one name per case");const ht=at[0],_t=et[ht];if($[ht]!==void 0)throw new Error("duplicate key detected:"+ht);if(ht==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Zt(_t))throw new Error("case arguments must be an array");g.push(ht),$[ht]=(...St)=>{const Lt=St.length;if(Lt!==_t.length)throw new Error("Wrong number of arguments to case "+ht+". Expected "+_t.length+" ("+_t+"), got "+Lt);return{fold:(...qt)=>{if(qt.length!==c.length)throw new Error("Wrong number of arguments to fold. Expected "+c.length+", got "+qt.length);return qt[ot].apply(null,St)},match:qt=>{const Qt=Zr(qt);if(g.length!==Qt.length)throw new Error("Wrong number of arguments to match. Expected: "+g.join(",")+`
Actual: `+Qt.join(","));if(!wo(g,kn=>mn(Qt,kn)))throw new Error("Not all branches were specified when using match. Specified: "+Qt.join(", ")+`
Required: `+g.join(", "));return qt[ht].apply(null,St)},log:qt=>{console.log(qt,{constructors:g,constructor:ht,params:St})}}}}),$}};gv.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const np=c=>{const g=[],$=[];return rn(c,et=>{et.fold(ot=>{g.push(ot)},ot=>{$.push(ot)})}),{errors:g,values:$}},R_=c=>c.type==="inline-command"||c.type==="inline-format",HC=c=>c.type==="block-command"||c.type==="block-format",Z3=(c,g)=>(c.type==="block-command"||c.type==="block-format")&&c.trigger===g,mE=c=>{var g;const $=ot=>pm.error({message:ot,pattern:c}),et=(ot,at,ht)=>{if(c.format!==void 0){let _t;if(Zt(c.format)){if(!wo(c.format,Et))return $(ot+" pattern has non-string items in the `format` array");_t=c.format}else if(Et(c.format))_t=[c.format];else return $(ot+" pattern has non-string `format` parameter");return pm.value(at(_t))}else return c.cmd!==void 0?Et(c.cmd)?pm.value(ht(c.cmd,c.value)):$(ot+" pattern has non-string `cmd` parameter"):$(ot+" pattern is missing both `format` and `cmd` parameters")};if(!$t(c))return $("Raw pattern is not an object");if(!Et(c.start))return $("Raw pattern is missing `start` parameter");if(c.end!==void 0){if(!Et(c.end))return $("Inline pattern has non-string `end` parameter");if(c.start.length===0&&c.end.length===0)return $("Inline pattern has empty `start` and `end` parameters");let ot=c.start,at=c.end;return at.length===0&&(at=ot,ot=""),et("Inline",ht=>({type:"inline-format",start:ot,end:at,format:ht}),(ht,_t)=>({type:"inline-command",start:ot,end:at,cmd:ht,value:_t}))}else{if(c.replacement!==void 0)return Et(c.replacement)?c.start.length===0?$("Replacement pattern has empty `start` parameter"):pm.value({type:"inline-command",start:"",end:c.start,cmd:"mceInsertContent",value:c.replacement}):$("Replacement pattern has non-string `replacement` parameter");{const ot=(g=c.trigger)!==null&&g!==void 0?g:"space";return c.start.length===0?$("Block pattern has empty `start` parameter"):et("Block",at=>({type:"block-format",start:c.start,format:at[0],trigger:ot}),(at,ht)=>({type:"block-command",start:c.start,cmd:at,value:ht,trigger:ot}))}}},k4=c=>zn(c,HC),cw=c=>zn(c,R_),a0=(c,g)=>({inlinePatterns:cw(c),blockPatterns:k4(c),dynamicPatternsLookup:g}),M_=(c,g)=>({...c,blockPatterns:zn(c.blockPatterns,$=>Z3($,g))}),S4=c=>{const g=np(Dn(c,mE));return rn(g.errors,$=>console.error($.message,$.pattern)),g.values},TL=c=>g=>{const $=c(g);return S4($)},K3=un().deviceType,bT=K3.isTouch(),Y3=$u.DOM,X3=c=>{const g=c.indexOf("=")>0?c.split(/[;,](?![^=;,]*(?:[;,]|$))/):c.split(",");return Hn(g,($,et)=>{const ot=et.split("="),at=ot[0],ht=ot.length>1?ot[1]:at;return $[uu(at)]=uu(ht),$},{})},vT=c=>Mt(c,RegExp),qr=c=>g=>g.options.get(c),yE=c=>Et(c)||$t(c),J3=(c,g="")=>$=>{const et=Et($);if(et)if($.indexOf("=")!==-1){const ot=X3($);return{value:ba(ot,c.id).getOr(g),valid:et}}else return{value:$,valid:et};else return{valid:!1,message:"Must be a string."}},E4=c=>{const g=c.options.register;g("id",{processor:"string",default:c.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:c.documentBaseUrl}),g("body_id",{processor:J3(c,"tinymce"),default:"tinymce"}),g("body_class",{processor:J3(c),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:$=>{const et=Et($)&&_s($);return et?{value:$,valid:et}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:$=>{const et=mn(["block","linebreak","invert","default"],$);return et?{value:$,valid:et}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:$=>Jt($)?{valid:!0,value:$}:Et($)?{valid:!0,value:$}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:$=>{const et=$===!1||Et($)||hn($,Et);return et?Et($)?{value:Dn($.split(","),uu),valid:et}:Zt($)?{value:$,valid:et}:$===!1?{value:[],valid:et}:{value:$,valid:et}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:I2(c)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:$=>{const et=Et($)||hn($,Et);return et?{value:Zt($)?$:Dn($.split(","),uu),valid:et}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:$=>{const et=Jt($)||Et($);return et?$===!1||K3.isiPhone()||K3.isiPad()?{value:"",valid:et}:{value:$===!0?"table,img,figure.image,div,video,iframe":$,valid:et}:{valid:!1,message:"Must be boolean or a string"}},default:!bT}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"string"}),g("service_message",{processor:"string"}),g("theme",{processor:$=>$===!1||Et($)||Vt($),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:$=>{const et=$===!1||Et($);return et?{value:$===!1?"":$,valid:et}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:c.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:c.convertURL}),g("url_converter_scope",{processor:"object",default:c}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("allow_mathml_annotation_encodings",{processor:$=>{const et=hn($,Et);return et?{value:$,valid:et}:{valid:!1,message:"Must be an array of strings."}},default:[]}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:yE}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:yE}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:yE}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:yE}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:$=>Et($)||$===!0}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("license_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:$=>hn($,$t)||$===!1?{value:S4($===!1?[]:$),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),g("text_patterns_lookup",{processor:$=>Vt($)?{value:TL($),valid:!0}:{valid:!1,message:"Must be a single function"},default:$=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:$=>hn($,vT)?{value:$,valid:!0}:vT($)?{value:[$],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!0}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:$=>{const et=mn(["inherited","collapsed","expanded"],$);return et?{value:$,valid:et}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:$=>{const et=mn(["inherited","collapsed","expanded"],$);return et?{value:$,valid:et}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),g("sandbox_iframes",{processor:"boolean",default:!0}),g("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),g("convert_unsafe_embeds",{processor:"boolean",default:!0}),c.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:L1.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:Y3.getAttrib(c.getElement(),"placeholder")})})},IL=qr("iframe_attrs"),l0=qr("doctype"),T4=qr("document_base_url"),uw=qr("body_id"),I4=qr("body_class"),Q3=qr("content_security_policy"),R4=qr("br_in_pre"),c0=qr("forced_root_block"),dw=qr("forced_root_block_attrs"),e5=qr("newline_behavior"),S2=qr("br_newline_selector"),RL=qr("no_newline_selector"),gm=qr("keep_styles"),mm=qr("end_container_on_empty_block"),n0=qr("automatic_uploads"),ym=qr("images_reuse_filename"),hu=qr("images_replace_blob_uris"),tm=qr("icons"),_T=qr("icons_url"),t5=qr("images_upload_url"),n5=qr("images_upload_base_path"),o5=qr("images_upload_credentials"),M4=qr("images_upload_handler"),P4=qr("content_css_cors"),bE=qr("referrer_policy"),xT=qr("language"),vE=qr("language_url"),O4=qr("indent_use_margin"),oB=qr("indentation"),E2=qr("content_css"),ky=qr("content_style"),ML=qr("font_css"),PL=qr("directionality"),mv=qr("inline_boundaries_selector"),VC=qr("object_resizing"),T2=qr("resize_img_proportional"),P_=qr("placeholder"),N0=qr("event_root"),r5=qr("service_message"),fw=qr("theme"),D4=qr("theme_url"),wT=qr("model"),s5=qr("model_url"),_E=qr("inline_boundaries"),CT=qr("formats"),N4=qr("preview_styles"),L4=qr("format_empty_lines"),F4=qr("format_noneditable_selector"),xE=qr("custom_ui_selector"),I2=qr("inline"),wE=qr("hidden_input"),OL=qr("submit_patch"),i5=qr("add_form_submit_trigger"),DL=qr("add_unload_trigger"),kT=qr("custom_undo_redo_levels"),NL=qr("disable_nodechange"),z4=qr("readonly"),LL=qr("editable_root"),B4=qr("content_css_cors"),CE=qr("plugins"),$4=qr("external_plugins"),J0=qr("block_unsupported_drop"),a5=qr("visual"),G4=qr("visual_table_class"),l5=qr("visual_anchor_class"),kE=qr("iframe_aria_text"),FL=qr("setup"),zL=qr("init_instance_callback"),BL=qr("urlconverter_callback"),ST=qr("auto_focus"),j4=qr("browser_spellcheck"),c5=qr("protect"),u5=qr("paste_block_drop"),SE=qr("paste_data_images"),d5=qr("paste_preprocess"),U4=qr("paste_postprocess"),H4=qr("newdocument_content"),V4=qr("paste_webkit_styles"),$L=qr("paste_remove_styles_if_webkit"),W4=qr("paste_merge_formats"),f5=qr("smart_paste"),q4=qr("paste_as_text"),hw=qr("paste_tab_spaces"),Z4=qr("allow_html_data_urls"),GL=qr("text_patterns"),jL=qr("text_patterns_lookup"),ET=qr("noneditable_class"),Xv=qr("editable_class"),AT=qr("noneditable_regexp"),TT=qr("preserve_cdata"),h5=qr("highlight_on_focus"),K4=qr("xss_sanitization"),nm=qr("init_content_sync"),Y4=c=>c.options.isSet("text_patterns_lookup"),WC=c=>cr.explode(c.options.get("font_size_style_values")),pw=c=>cr.explode(c.options.get("font_size_classes")),IT=c=>c.options.get("encoding")==="xml",X4=c=>cr.explode(c.options.get("images_file_types")),UL=qr("table_tab_navigation"),HL=qr("details_initial_state"),J4=qr("details_serialized_state"),EE=qr("sandbox_iframes"),p5=c=>c.options.get("sandbox_iframes_exclusions"),VL=qr("convert_unsafe_embeds"),qC=qr("license_key"),Q4=qr("api_key"),eP=Nr,tP=dr,g5=c=>{const g=c.parentNode;g&&g.removeChild(c)},RT=c=>{const g=fv(c);return{count:c.length-g.length,text:g}},nP=c=>{let g;for(;(g=c.data.lastIndexOf(Cm))!==-1;)c.deleteData(g,1)},gw=(c,g)=>(R2(c),g),WL=(c,g)=>{const $=RT(c.data.substr(0,g.offset())),et=RT(c.data.substr(g.offset()));return($.text+et.text).length>0?(nP(c),Uo(c,g.offset()-$.count)):g},oP=(c,g)=>{const $=g.container(),et=Co(Ss($.childNodes),c).map(ot=>ot<g.offset()?Uo($,g.offset()-1):g).getOr(g);return R2(c),et},rP=(c,g)=>tP(c)&&g.container()===c?WL(c,g):gw(c,g),MT=(c,g)=>g.container()===c.parentNode?oP(c,g):gw(c,g),qL=(c,g)=>Uo.isTextPosition(g)?rP(c,g):MT(c,g),R2=c=>{eP(c)&&hv(c)&&(e4(c)?c.removeAttribute("data-mce-caret"):g5(c)),tP(c)&&(nP(c),c.data.length===0&&g5(c))},PT=Ql,AE=Jm,sP=Jw,ZC="*[contentEditable=false],video,audio,embed,object",KC=(c,g,$)=>{const et=t4(g.getBoundingClientRect(),$);let ot,at;if(c.tagName==="BODY"){const _t=c.ownerDocument.documentElement;ot=c.scrollLeft||_t.scrollLeft,at=c.scrollTop||_t.scrollTop}else{const _t=c.getBoundingClientRect();ot=c.scrollLeft-_t.left,at=c.scrollTop-_t.top}et.left+=ot,et.right+=ot,et.top+=at,et.bottom+=at,et.width=1;let ht=g.offsetWidth-g.clientWidth;return ht>0&&($&&(ht*=-1),et.left+=ht,et.right+=ht),et},ZL=c=>{var g,$;const et=m0(Qn.fromDom(c),ZC);for(let ot=0;ot<et.length;ot++){const at=et[ot].dom;let ht=at.previousSibling;if(v0(ht)){const _t=ht.data;_t.length===1?(g=ht.parentNode)===null||g===void 0||g.removeChild(ht):ht.deleteData(_t.length-1,1)}ht=at.nextSibling,zl(ht)&&(ht.data.length===1?($=ht.parentNode)===null||$===void 0||$.removeChild(ht):ht.deleteData(0,1))}},iP=(c,g,$,et)=>{const ot=wm();let at,ht;const _t=c0(c),St=c.dom,Lt=(yn,Rn)=>{let so;if(Ht(),sP(Rn))return null;if($(Rn)){const ho=lT(_t,Rn,yn),xo=KC(g,Rn,yn);St.setStyle(ho,"top",xo.top),St.setStyle(ho,"caret-color","transparent"),ht=ho;const To=St.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});St.setStyles(To,{...xo}),St.add(g,To),ot.set({caret:To,element:Rn,before:yn}),yn&&St.addClass(To,"mce-visual-caret-before"),qt(),so=Rn.ownerDocument.createRange(),so.setStart(ho,0),so.setEnd(ho,0)}else return ht=fL(Rn,yn),so=Rn.ownerDocument.createRange(),M2(ht.nextSibling)?(so.setStart(ht,0),so.setEnd(ht,0)):(so.setStart(ht,1),so.setEnd(ht,1)),so;return so},Ht=()=>{ZL(g),ht&&(R2(ht),ht=null),ot.on(yn=>{St.remove(yn.caret),ot.clear()}),at&&(clearInterval(at),at=void 0)},qt=()=>{at=setInterval(()=>{ot.on(yn=>{et()?St.toggleClass(yn.caret,"mce-visual-caret-hidden"):St.addClass(yn.caret,"mce-visual-caret-hidden")})},500)};return{show:Lt,hide:Ht,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{ot.on(yn=>{const Rn=KC(g,yn.element,yn.before);St.setStyles(yn.caret,{...Rn})})},destroy:()=>clearInterval(at)}},KL=()=>Kr.browser.isFirefox(),M2=c=>PT(c)||AE(c),YC=c=>(M2(c)||lv(c)&&KL())&&X_(Qn.fromDom(c)).exists(W0),m5=Jo,y5=Ql,YL=Jm,b5=Kw("display","block table table-cell table-row table-caption list-item"),aP=hv,lP=iw,XC=Nr,cP=dr,OT=Kv,mw=c=>c>0,gx=c=>c<0,TE=(c,g)=>{let $;for(;$=c(g);)if(!lP($))return $;return null},IE=(c,g,$,et,ot)=>{const at=new um(c,et),ht=y5(c)||lP(c);let _t;if(gx(g)){if(ht&&(_t=TE(at.prev.bind(at),!0),$(_t)))return _t;for(;_t=TE(at.prev.bind(at),ot);)if($(_t))return _t}if(mw(g)){if(ht&&(_t=TE(at.next.bind(at),!0),$(_t)))return _t;for(;_t=TE(at.next.bind(at),ot);)if($(_t))return _t}return null},XL=(c,g)=>{const $=ot=>m5(ot.dom),et=ot=>ot.dom===g;return Qu(Qn.fromDom(c),$,et).map(ot=>ot.dom).getOr(g)},Sy=(c,g)=>{for(;c&&c!==g;){if(b5(c))return c;c=c.parentNode}return null},B1=(c,g,$)=>Sy(c.container(),$)===Sy(g.container(),$),v5=(c,g)=>{if(!g)return Yt.none();const $=g.container(),et=g.offset();return XC($)?Yt.from($.childNodes[et+c]):Yt.none()},JL=(c,g)=>{var $;const ot=(($=g.ownerDocument)!==null&&$!==void 0?$:document).createRange();return c?(ot.setStartBefore(g),ot.setEndBefore(g)):(ot.setStartAfter(g),ot.setEndAfter(g)),ot},rB=(c,g,$)=>Sy(g,c)===Sy($,c),yw=(c,g,$)=>{const et=c?"previousSibling":"nextSibling";let ot=$;for(;ot&&ot!==g;){let at=ot[et];if(at&&aP(at)&&(at=at[et]),y5(at)||YL(at)){if(rB(g,at,ot))return at;break}if(OT(at))break;ot=ot.parentNode}return null},JC=An(JL,!0),o0=An(JL,!1),_5=(c,g,$)=>{let et;const ot=An(yw,!0,g),at=An(yw,!1,g),ht=$.startContainer,_t=$.startOffset;if(iw(ht)){const St=cP(ht)?ht.parentNode:ht,Lt=St.getAttribute("data-mce-caret");if(Lt==="before"&&(et=St.nextSibling,YC(et)))return JC(et);if(Lt==="after"&&(et=St.previousSibling,YC(et)))return o0(et)}if(!$.collapsed)return $;if(dr(ht)){if(aP(ht)){if(c===1){if(et=at(ht),et)return JC(et);if(et=ot(ht),et)return o0(et)}if(c===-1){if(et=ot(ht),et)return o0(et);if(et=at(ht),et)return JC(et)}return $}if(v0(ht)&&_t>=ht.data.length-1)return c===1&&(et=at(ht),et)?JC(et):$;if(zl(ht)&&_t<=1)return c===-1&&(et=ot(ht),et)?o0(et):$;if(_t===ht.data.length)return et=at(ht),et?JC(et):$;if(_t===0)return et=ot(ht),et?o0(et):$}return $},DT=(c,g)=>v5(c?0:-1,g).filter(y5),P2=(c,g,$)=>{const et=_5(c,g,$);return c===-1?Uo.fromRangeStart(et):Uo.fromRangeEnd(et)},RE=c=>Yt.from(c.getNode()).map(Qn.fromDom),QL=c=>Yt.from(c.getNode(!0)).map(Qn.fromDom),x5=(c,g)=>{let $=g;for(;$=c($);)if($.isVisible())return $;return $},ME=(c,g)=>{const $=B1(c,g);return!$&&Jl(c.getNode())?!0:$};var r0;(function(c){c[c.Backwards=-1]="Backwards",c[c.Forwards=1]="Forwards"})(r0||(r0={}));const w5=Ql,yv=dr,C5=Nr,QC=Jl,_k=Kv,k5=yL,mx=a4,S5=(c,g)=>{const $=[];let et=c;for(;et&&et!==g;)$.push(et),et=et.parentNode;return $},E5=(c,g)=>c.hasChildNodes()&&g<c.childNodes.length?c.childNodes[g]:null,A5=(c,g)=>{if(mw(c)){if(_k(g.previousSibling)&&!yv(g.previousSibling))return Uo.before(g);if(yv(g))return Uo(g,0)}if(gx(c)){if(_k(g.nextSibling)&&!yv(g.nextSibling))return Uo.after(g);if(yv(g))return Uo(g,g.data.length)}return gx(c)?QC(g)?Uo.before(g):Uo.after(g):Uo.before(g)},O_=(c,g)=>{const $=g.nextSibling;return $&&_k($)?yv($)?Uo($,0):Uo.before($):NT(r0.Forwards,Uo.after(g),c)},NT=(c,g,$)=>{let et,ot,at,ht;if(!C5($)||!g)return null;if(g.isEqual(Uo.after($))&&$.lastChild){if(ht=Uo.after($.lastChild),gx(c)&&_k($.lastChild)&&C5($.lastChild))return QC($.lastChild)?Uo.before($.lastChild):ht}else ht=g;const _t=ht.container();let St=ht.offset();if(yv(_t)){if(gx(c)&&St>0)return Uo(_t,--St);if(mw(c)&&St<_t.length)return Uo(_t,++St);et=_t}else{if(gx(c)&&St>0&&(ot=E5(_t,St-1),_k(ot)))return!k5(ot)&&(at=IE(ot,c,mx,ot),at)?yv(at)?Uo(at,at.data.length):Uo.after(at):yv(ot)?Uo(ot,ot.data.length):Uo.before(ot);if(mw(c)&&St<_t.childNodes.length&&(ot=E5(_t,St),_k(ot)))return QC(ot)?O_($,ot):!k5(ot)&&(at=IE(ot,c,mx,ot),at)?yv(at)?Uo(at,0):Uo.before(at):yv(ot)?Uo(ot,0):Uo.after(ot);et=ot||ht.getNode()}if(et&&(mw(c)&&ht.isAtEnd()||gx(c)&&ht.isAtStart())&&(et=IE(et,c,_o,$,!0),mx(et,$)))return A5(c,et);ot=et&&IE(et,c,mx,$);const Lt=Mo(zn(S5(_t,$),w5));return Lt&&(!ot||!Lt.contains(ot))?(mw(c)?ht=Uo.after(Lt):ht=Uo.before(Lt),ht):ot?A5(c,ot):null},u0=c=>({next:g=>NT(r0.Forwards,g,c),prev:g=>NT(r0.Backwards,g,c)}),uP=(c,g,$)=>{const et=c?Uo.before($):Uo.after($);return Hy(c,g,et)},T5=c=>Jl(c)?Uo.before(c):Uo.after(c),I5=c=>Uo.isTextPosition(c)?c.offset()===0:Kv(c.getNode()),dP=c=>{if(Uo.isTextPosition(c)){const g=c.container();return c.offset()===g.data.length}else return Kv(c.getNode(!0))},R5=(c,g)=>!Uo.isTextPosition(c)&&!Uo.isTextPosition(g)&&c.getNode()===g.getNode(!0),fP=c=>!Uo.isTextPosition(c)&&Jl(c.getNode()),hP=(c,g,$)=>c?!R5(g,$)&&!fP(g)&&dP(g)&&I5($):!R5($,g)&&I5(g)&&dP($),Hy=(c,g,$)=>{const et=u0(g);return Yt.from(c?et.next($):et.prev($))},bw=(c,g,$)=>Hy(c,g,$).bind(et=>B1($,et,g)&&hP(c,$,et)?Hy(c,g,et):Yt.some(et)),pP=(c,g,$,et)=>bw(c,g,$).bind(ot=>et(ot)?pP(c,g,ot,et):Yt.some(ot)),O2=(c,g)=>{const $=c?g.firstChild:g.lastChild;return dr($)?Yt.some(Uo($,c?0:$.data.length)):$?Kv($)?Yt.some(c?Uo.before($):T5($)):uP(c,g,$):Yt.none()},L0=An(Hy,!0),Ey=An(Hy,!1),F0=An(O2,!0),Vy=An(O2,!1),LT="_mce_caret",Wy=c=>Nr(c)&&c.id===LT,D2=(c,g)=>{let $=g;for(;$&&$!==c;){if(Wy($))return $;$=$.parentNode}return null},gP=c=>Et(c.start),sB=c=>Jr(c,"rng"),e8=c=>Jr(c,"id"),M5=c=>Jr(c,"name"),t8=c=>cr.isArray(c.start),FT=c=>!M5(c)&&Jt(c.forward)?c.forward:!0,s0=(c,g)=>(Nr(g)&&c.isBlock(g)&&!g.innerHTML&&(g.innerHTML='<br data-mce-bogus="1" />'),g),PE=(c,g)=>{const $=Yt.from(y4(c.getRoot(),g.start)),et=Yt.from(y4(c.getRoot(),g.end));return Bs($,et,(ot,at)=>{const ht=c.createRng();return ht.setStart(ot.container(),ot.offset()),ht.setEnd(at.container(),at.offset()),{range:ht,forward:FT(g)}})},OE=(c,g)=>{var $;const ot=(($=c.ownerDocument)!==null&&$!==void 0?$:document).createTextNode(Cm);c.appendChild(ot),g.setStart(ot,0),g.setEnd(ot,0)},vw=c=>!c.hasChildNodes(),P5=(c,g)=>Vy(c).fold(On,$=>(g.setStart($.container(),$.offset()),g.setEnd($.container(),$.offset()),!0)),zT=(c,g,$)=>vw(g)&&D2(c,g)?(OE(g,$),!0):!1,O5=(c,g,$,et)=>{const ot=$[g?"start":"end"],at=c.getRoot();if(ot){let ht=at,_t=ot[0];for(let St=ot.length-1;ht&&St>=1;St--){const Lt=ht.childNodes;if(zT(at,ht,et))return!0;if(ot[St]>Lt.length-1)return zT(at,ht,et)?!0:P5(ht,et);ht=Lt[ot[St]]}dr(ht)&&(_t=Math.min(ot[0],ht.data.length)),Nr(ht)&&(_t=Math.min(ot[0],ht.childNodes.length)),g?et.setStart(ht,_t):et.setEnd(ht,_t)}return!0},BT=c=>dr(c)&&c.data.length>0,D5=(c,g,$)=>{const et=c.get($.id+"_"+g),ot=et==null?void 0:et.parentNode,at=$.keep;if(et&&ot){let ht,_t;if(g==="start"?at?et.hasChildNodes()?(ht=et.firstChild,_t=1):BT(et.nextSibling)?(ht=et.nextSibling,_t=0):BT(et.previousSibling)?(ht=et.previousSibling,_t=et.previousSibling.data.length):(ht=ot,_t=c.nodeIndex(et)+1):(ht=ot,_t=c.nodeIndex(et)):at?et.hasChildNodes()?(ht=et.firstChild,_t=1):BT(et.previousSibling)?(ht=et.previousSibling,_t=et.previousSibling.data.length):(ht=ot,_t=c.nodeIndex(et)):(ht=ot,_t=c.nodeIndex(et)),!at){const St=et.previousSibling,Lt=et.nextSibling;cr.each(cr.grep(et.childNodes),qt=>{dr(qt)&&(qt.data=qt.data.replace(/\uFEFF/g,""))});let Ht;for(;Ht=c.get($.id+"_"+g);)c.remove(Ht,!0);if(dr(Lt)&&dr(St)&&!Kr.browser.isOpera()){const qt=St.data.length;St.appendData(Lt.data),c.remove(Lt),ht=St,_t=qt}}return Yt.some(Uo(ht,_t))}else return Yt.none()},eS=(c,g)=>{const $=c.createRng();return O5(c,!0,g,$)&&O5(c,!1,g,$)?Yt.some({range:$,forward:FT(g)}):Yt.none()},yx=(c,g)=>{const $=D5(c,"start",g),et=D5(c,"end",g);return Bs($,et.or($),(ot,at)=>{const ht=c.createRng();return ht.setStart(s0(c,ot.container()),ot.offset()),ht.setEnd(s0(c,at.container()),at.offset()),{range:ht,forward:FT(g)}})},DE=(c,g)=>Yt.from(c.select(g.name)[g.index]).map($=>{const et=c.createRng();return et.selectNode($),{range:et,forward:!0}}),N2=(c,g)=>{const $=c.dom;if(g){if(t8(g))return eS($,g);if(gP(g))return PE($,g);if(e8(g))return yx($,g);if(M5(g))return DE($,g);if(sB(g))return Yt.some({range:g.rng,forward:FT(g)})}return Yt.none()},bx=(c,g,$)=>EL(c,g,$),mP=(c,g)=>{N2(c,g).each(({range:$,forward:et})=>{c.setRng($,et)})},Ay=c=>Nr(c)&&c.tagName==="SPAN"&&c.getAttribute("data-mce-type")==="bookmark",_w=(c=>g=>c===g)(dm),L2=c=>c!==""&&` \f
\r	\v`.indexOf(c)!==-1,$T=c=>!L2(c)&&!_w(c)&&!pC(c),GT=c=>{const g=[];if(c)for(let $=0;$<c.rangeCount;$++)g.push(c.getRangeAt($));return g},n8=c=>oo(c,g=>{const $=uE(g);return $?[Qn.fromDom($)]:[]}),o8=c=>GT(c).length>1,yP=c=>zn(n8(c),aE),bP=c=>m0(c,"td[data-mce-selected],th[data-mce-selected]"),F2=(c,g)=>{const $=bP(g);return $.length>0?$:yP(c)},tS=c=>F2(GT(c.selection.getSel()),Qn.fromDom(c.getBody())),NE=(c,g)=>zp(c,"table",g),r8=c=>{const g=c.startContainer,$=c.startOffset;return dr(g)?$===0?Yt.some(Qn.fromDom(g)):Yt.none():Yt.from(g.childNodes[$]).map(Qn.fromDom)},vP=c=>{const g=c.endContainer,$=c.endOffset;return dr(g)?$===g.data.length?Yt.some(Qn.fromDom(g)):Yt.none():Yt.from(g.childNodes[$-1]).map(Qn.fromDom)},LE=c=>Ym(c).fold(ln([c]),g=>[c].concat(LE(g))),jT=c=>k1(c).fold(ln([c]),g=>Sn(g)==="br"?sv(g).map($=>[c].concat(jT($))).getOr([]):[c].concat(jT(g))),L5=(c,g)=>Bs(r8(g),vP(g),($,et)=>{const ot=Jn(LE(c),An(_i,$)),at=Jn(jT(c),An(_i,et));return ot.isSome()&&at.isSome()}).getOr(!1),_P=(c,g,$,et)=>{const ot=$,at=new um($,ot),ht=Vs(c.schema.getMoveCaretBeforeOnEnterElements(),(St,Lt)=>!mn(["td","th","table"],Lt.toLowerCase()));let _t=$;do{if(dr(_t)&&cr.trim(_t.data).length!==0){et?g.setStart(_t,0):g.setEnd(_t,_t.data.length);return}if(ht[_t.nodeName]){et?g.setStartBefore(_t):_t.nodeName==="BR"?g.setEndBefore(_t):g.setEndAfter(_t);return}}while(_t=et?at.next():at.prev());ot.nodeName==="BODY"&&(et?g.setStart(ot,0):g.setEnd(ot,ot.childNodes.length))},UT=c=>{const g=c.selection.getSel();return an(g)&&g.rangeCount>0},nS=(c,g)=>{const $=tS(c);$.length>0?rn($,et=>{const ot=et.dom,at=c.dom.createRng();at.setStartBefore(ot),at.setEndAfter(ot),g(at,!0)}):g(c.selection.getRng(),!1)},xP=(c,g,$)=>{const et=q3(c,g);$(et),c.moveToBookmark(et)},z2=c=>ao(c==null?void 0:c.nodeType),Ul=c=>Nr(c)&&!Ay(c)&&!Wy(c)&&!T1(c),vx=(c,g)=>{if(Ul(g)&&!/^(TD|TH)$/.test(g.nodeName)){const $=c.getAttrib(g,"data-mce-selected"),et=parseInt($,10);return!isNaN(et)&&et>0}else return!1},xw=(c,g,$)=>{const{selection:et,dom:ot}=c,at=et.getNode(),ht=Ql(at);xP(et,!0,()=>{g()}),ht&&Ql(at)&&ot.isChildOf(at,c.getBody())?c.selection.select(at):$(et.getStart())&&HT(ot,et)},HT=(c,g)=>{var $,et;const ot=g.getRng(),{startContainer:at,startOffset:ht}=ot,_t=g.getNode();if(!vx(c,_t)&&Nr(at)){const St=at.childNodes,Lt=c.getRoot();let Ht;if(ht<St.length){const qt=St[ht];Ht=new um(qt,($=c.getParent(qt,c.isBlock))!==null&&$!==void 0?$:Lt)}else{const qt=St[St.length-1];Ht=new um(qt,(et=c.getParent(qt,c.isBlock))!==null&&et!==void 0?et:Lt),Ht.next(!0)}for(let qt=Ht.current();qt;qt=Ht.next()){if(c.getContentEditable(qt)==="false")return;if(dr(qt)&&!zE(qt)){ot.setStart(qt,0),g.setRng(ot);return}}}},F5=(c,g,$)=>{if(c){const et=g?"nextSibling":"previousSibling";for(c=c[et];c;c=c[et])if(Nr(c)||!zE(c))return c}},FE=(c,g)=>!!c.getTextBlockElements()[g.nodeName.toLowerCase()]||I1(c,g),B2=(c,g,$)=>c.schema.isValidChild(g,$),zE=(c,g=!1)=>{if(an(c)&&dr(c)){const $=g?c.data.replace(/ /g,""):c.data;return uy($)}else return!1},VT=c=>an(c)&&dr(c)&&c.length===0,wP=(c,g)=>{const $="[data-mce-cef-wrappable]",et=F4(c),ot=Al(et)?$:`${$},${et}`;return R0(Qn.fromDom(g),ot)},s8=(c,g)=>{const $=c.dom;return Ul(g)&&$.getContentEditable(g)==="false"&&wP(c,g)&&$.select('[contenteditable="true"]',g).length===0},$2=(c,g)=>Vt(c)?c(g):(an(g)&&(c=c.replace(/%(\w+)/g,($,et)=>g[et]||$)),c),WT=(c,g)=>(c=c||"",g=g||"",c=""+(c.nodeName||c),g=""+(g.nodeName||g),c.toLowerCase()===g.toLowerCase()),ww=(c,g)=>{if(Pn(c))return null;{let $=String(c);return(g==="color"||g==="backgroundColor")&&($=nE($)),g==="fontWeight"&&c===700&&($="bold"),g==="fontFamily"&&($=$.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),$}},z5=(c,g,$)=>{const et=c.getStyle(g,$);return ww(et,$)},B5=(c,g)=>{let $;return c.getParent(g,et=>Nr(et)?($=c.getStyle(et,"text-decoration"),!!$&&$!=="none"):!1),$},G2=(c,g,$)=>c.getParents(g,$,c.getRoot()),$5=(c,g,$)=>{const et=c.formatter.get(g);return an(et)&&wn(et,$)},CP=(c,g)=>$5(c,g,et=>{const ot=at=>Vt(at)||at.length>1&&at.charAt(0)==="%";return wn(["styles","attributes"],at=>ba(et,at).exists(ht=>{const _t=Zt(ht)?ht:iu(ht);return wn(_t,ot)}))}),kP=(c,g,$)=>{const et=["inline","block","selector","attributes","styles","classes"],ot=at=>Vs(at,(ht,_t)=>wn(et,St=>St===_t));return $5(c,g,at=>{const ht=ot(at);return $5(c,$,_t=>{const St=ot(_t);return go(ht,St)})})},D_=c=>_a(c,"block"),SP=c=>D_(c)&&c.wrapper===!0,qT=c=>D_(c)&&c.wrapper!==!0,bv=c=>_a(c,"selector"),zm=c=>_a(c,"inline"),i8=c=>bv(c)&&zm(c)&&du(ba(c,"mixed"),!0),$1=c=>bv(c)&&c.expand!==!1&&!zm(c),a8=c=>{const g=[];let $=c;for(;$;){if(dr($)&&$.data!==Cm||$.childNodes.length>1)return[];Nr($)&&g.push($),$=$.firstChild}return g},EP=c=>a8(c).length>0,BE=c=>Wy(c.dom)&&EP(c.dom),oS=Ay,AP=G2,TP=zE,iB=FE,aB=c=>Jl(c)&&c.getAttribute("data-mce-bogus")&&!c.nextSibling,IP=(c,g)=>{let $=g;for(;$;){if(Nr($)&&c.getContentEditable($))return c.getContentEditable($)==="false"?$:g;$=$.parentNode}return g},zr=(c,g,$,et)=>{const ot=g.data;if(c){for(let at=$;at>0;at--)if(et(ot.charAt(at-1)))return at}else for(let at=$;at<ot.length;at++)if(et(ot.charAt(at)))return at;return-1},Bm=(c,g,$)=>zr(c,g,$,et=>_w(et)||L2(et)),ZT=(c,g,$)=>zr(c,g,$,$T),$m=(c,g,$,et,ot,at)=>{let ht;const _t=c.getParent($,c.isBlock)||g,St=(Ht,qt,Qt)=>{const gn=h2(c),kn=ot?gn.backwards:gn.forwards;return Yt.from(kn(Ht,qt,(yn,Rn)=>oS(yn.parentNode)?-1:(ht=yn,Qt(ot,yn,Rn)),_t))};return St($,et,Bm).bind(Ht=>at?St(Ht.container,Ht.offset+(ot?-1:0),ZT):Yt.some(Ht)).orThunk(()=>ht?Yt.some({container:ht,offset:ot?0:ht.length}):Yt.none())},vv=(c,g,$,et,ot)=>{const at=et[ot];dr(et)&&Al(et.data)&&at&&(et=at);const ht=AP(c,et);for(let _t=0;_t<ht.length;_t++)for(let St=0;St<g.length;St++){const Lt=g[St];if(!(an(Lt.collapsed)&&Lt.collapsed!==$.collapsed)&&bv(Lt)&&c.is(ht[_t],Lt.selector))return ht[_t]}return et},G5=(c,g,$,et)=>{var ot;let at=$;const ht=c.getRoot(),_t=g[0];if(D_(_t)&&(at=_t.wrapper?null:c.getParent($,_t.block,ht)),!at){const St=(ot=c.getParent($,"LI,TD,TH,SUMMARY"))!==null&&ot!==void 0?ot:ht;at=c.getParent(dr($)?$.parentNode:$,Lt=>Lt!==ht&&iB(c.schema,Lt),St)}if(at&&D_(_t)&&_t.wrapper&&(at=AP(c,at,"ul,ol").reverse()[0]||at),!at)for(at=$;at&&at[et]&&!c.isBlock(at[et])&&(at=at[et],!WT(at,"br")););return at||$},$E=(c,g,$,et)=>{const ot=$.parentNode;return an($[et])?!1:ot===g||Pn(ot)||c.isBlock(ot)?!0:$E(c,g,ot,et)},rS=(c,g,$,et,ot)=>{let at=$;const ht=ot?"previousSibling":"nextSibling",_t=c.getRoot();if(dr($)&&!TP($)&&(ot?et>0:et<$.data.length))return $;for(;at;){if(!g[0].block_expand&&c.isBlock(at))return at;for(let St=at[ht];St;St=St[ht]){const Lt=dr(St)&&!$E(c,_t,St,ht);if(!oS(St)&&!aB(St)&&!TP(St,Lt))return at}if(at===_t||at.parentNode===_t){$=at;break}at=at.parentNode}return $},RP=c=>oS(c.parentNode)||oS(c),Cw=(c,g,$,et=!1)=>{let{startContainer:ot,startOffset:at,endContainer:ht,endOffset:_t}=g;const St=$[0];return Nr(ot)&&ot.hasChildNodes()&&(ot=px(ot,at),dr(ot)&&(at=0)),Nr(ht)&&ht.hasChildNodes()&&(ht=px(ht,g.collapsed?_t:_t-1),dr(ht)&&(_t=ht.data.length)),ot=IP(c,ot),ht=IP(c,ht),RP(ot)&&(ot=oS(ot)?ot:ot.parentNode,g.collapsed?ot=ot.previousSibling||ot:ot=ot.nextSibling||ot,dr(ot)&&(at=g.collapsed?ot.length:0)),RP(ht)&&(ht=oS(ht)?ht:ht.parentNode,g.collapsed?ht=ht.nextSibling||ht:ht=ht.previousSibling||ht,dr(ht)&&(_t=g.collapsed?0:ht.length)),g.collapsed&&($m(c,c.getRoot(),ot,at,!0,et).each(({container:qt,offset:Qt})=>{ot=qt,at=Qt}),$m(c,c.getRoot(),ht,_t,!1,et).each(({container:qt,offset:Qt})=>{ht=qt,_t=Qt})),(zm(St)||St.block_expand)&&((!zm(St)||!dr(ot)||at===0)&&(ot=rS(c,$,ot,at,!0)),(!zm(St)||!dr(ht)||_t===ht.data.length)&&(ht=rS(c,$,ht,_t,!1))),$1(St)&&(ot=vv(c,$,g,ot,"previousSibling"),ht=vv(c,$,g,ht,"nextSibling")),(D_(St)||bv(St))&&(ot=G5(c,$,ot,"previousSibling"),ht=G5(c,$,ht,"nextSibling"),D_(St)&&(c.isBlock(ot)||(ot=rS(c,$,ot,at,!0),dr(ot)&&(at=0)),c.isBlock(ht)||(ht=rS(c,$,ht,_t,!1),dr(ht)&&(_t=ht.data.length)))),Nr(ot)&&ot.parentNode&&(at=c.nodeIndex(ot),ot=ot.parentNode),Nr(ht)&&ht.parentNode&&(_t=c.nodeIndex(ht)+1,ht=ht.parentNode),{startContainer:ot,startOffset:at,endContainer:ht,endOffset:_t}},sS=(c,g,$)=>{var et;const ot=g.startOffset,at=px(g.startContainer,ot),ht=g.endOffset,_t=px(g.endContainer,ht-1),St=Rn=>{const so=Rn[0];dr(so)&&so===at&&ot>=so.data.length&&Rn.splice(0,1);const ho=Rn[Rn.length-1];return ht===0&&Rn.length>0&&ho===_t&&dr(ho)&&Rn.splice(Rn.length-1,1),Rn},Lt=(Rn,so,ho)=>{const xo=[];for(;Rn&&Rn!==ho;Rn=Rn[so])xo.push(Rn);return xo},Ht=(Rn,so)=>c.getParent(Rn,ho=>ho.parentNode===so,so),qt=(Rn,so,ho)=>{const xo=ho?"nextSibling":"previousSibling";for(let To=Rn,or=To.parentNode;To&&To!==so;To=or){or=To.parentNode;const mr=Lt(To===Rn?To:To[xo],xo);mr.length&&(ho||mr.reverse(),$(St(mr)))}};if(at===_t)return $(St([at]));const Qt=(et=c.findCommonAncestor(at,_t))!==null&&et!==void 0?et:c.getRoot();if(c.isChildOf(at,_t))return qt(at,Qt,!0);if(c.isChildOf(_t,at))return qt(_t,Qt);const gn=Ht(at,Qt)||at,kn=Ht(_t,Qt)||_t;qt(at,gn,!0);const yn=Lt(gn===at?gn:gn.nextSibling,"nextSibling",kn===_t?kn.nextSibling:kn);yn.length&&$(St(yn)),qt(_t,kn)},l8=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],c8=c=>gu(c)&&LC(c)===Cm,u8=(c,g,$,et)=>Dm(g).fold(()=>"skipping",ot=>et==="br"||c8(g)?"valid":rT(g)?"existing":Wy(g.dom)?"caret":wn(l8,at=>R0(g,at))?"valid-block":!B2(c,$,et)||!B2(c,Sn(ot),$)?"invalid-child":"valid"),MP=(c,g)=>{const $=Cw(c.dom,g,[{inline:"span"}]);g.setStart($.startContainer,$.startOffset),g.setEnd($.endContainer,$.endOffset),c.selection.setRng(g)},j2=(c,g,$,et,ot,at)=>{const{uid:ht=g,..._t}=$;Fy(c,MC()),ip(c,`${A_()}`,ht),ip(c,`${nw()}`,et);const{attributes:St={},classes:Lt=[]}=ot(ht,_t);if(Tp(c,St),Qz(c,Lt),at){Lt.length>0&&ip(c,`${ow()}`,Lt.join(","));const Ht=Zr(St);Ht.length>0&&ip(c,`${ux()}`,Ht.join(","))}},iS=c=>{_1(c,MC()),zu(c,`${A_()}`),zu(c,`${nw()}`),zu(c,`${PC()}`);const g=Vu(c,`${ux()}`).map(et=>et.split(",")).getOr([]),$=Vu(c,`${ow()}`).map(et=>et.split(",")).getOr([]);rn(g,et=>zu(c,et)),eB(c,$),zu(c,`${ow()}`),zu(c,`${ux()}`)},U2=(c,g,$,et,ot)=>{const at=Qn.fromTag("span",c);return j2(at,g,$,et,ot,!1),at},KT=(c,g,$,et,ot,at)=>{const ht=[],_t=U2(c.getDoc(),$,at,et,ot),St=wm(),Lt=()=>{St.clear()},Ht=()=>St.get().getOrThunk(()=>{const kn=Wv(_t);return ht.push(kn),St.set(kn),kn}),qt=kn=>{rn(kn,Qt)},Qt=kn=>{switch(u8(c,kn,"span",Sn(kn))){case"invalid-child":{Lt();const Rn=Jp(kn);qt(Rn),Lt();break}case"valid-block":{Lt(),j2(kn,$,at,et,ot,!0);break}case"valid":{const Rn=Ht();by(kn,Rn);break}}},gn=kn=>{const yn=Dn(kn,Qn.fromDom);qt(yn)};return sS(c.dom,g,kn=>{Lt(),gn(kn)}),ht},qy=(c,g,$,et)=>{c.undoManager.transact(()=>{const ot=c.selection,at=ot.getRng(),ht=tS(c).length>0,_t=DC("mce-annotation");if(at.collapsed&&!ht&&MP(c,at),ot.getRng().collapsed&&!ht){const St=U2(c.getDoc(),_t,et,g,$.decorate);$v(St,dm),ot.getRng().insertNode(St.dom),ot.select(St.dom)}else xP(ot,!1,()=>{nS(c,St=>{KT(c,St,_t,g,$.decorate,et)})})})},G1=c=>{const g=sT();lL(c,g);const $=WM(c,g),et=am("span"),ot=at=>{rn(at,ht=>{et(ht)?vy(ht):iS(ht)})};return{register:(at,ht)=>{g.register(at,ht)},annotate:(at,ht)=>{g.lookup(at).each(_t=>{qy(c,at,_t,ht)})},annotationChanged:(at,ht)=>{$.addListener(at,ht)},remove:at=>{rE(c,Yt.some(at)).each(({elements:ht})=>{const _t=c.selection.getBookmark();ot(ht),c.selection.moveToBookmark(_t)})},removeAll:at=>{const ht=c.selection.getBookmark();tr(OC(c,at),(_t,St)=>{ot(_t)}),c.selection.moveToBookmark(ht)},getAll:at=>{const ht=OC(c,at);return Ms(ht,_t=>Dn(_t,St=>St.dom))}}},H2=c=>({getBookmark:An(bx,c),moveToBookmark:An(mP,c)});H2.isBookmarkNode=Ay;const aS=(c,g,$)=>$.collapsed?!1:wn($.getClientRects(),et=>pL(et,c,g)),YT=(c,g)=>c.dispatch("PreProcess",g),XT=(c,g)=>c.dispatch("PostProcess",g),d8=c=>{c.dispatch("remove")},f8=c=>{c.dispatch("detach")},h8=(c,g)=>{c.dispatch("SwitchMode",{mode:g})},p8=(c,g,$,et,ot)=>{c.dispatch("ObjectResizeStart",{target:g,width:$,height:et,origin:ot})},PP=(c,g,$,et,ot)=>{c.dispatch("ObjectResized",{target:g,width:$,height:et,origin:ot})},OP=c=>{c.dispatch("PreInit")},j5=c=>{c.dispatch("PostRender")},JT=c=>{c.dispatch("Init")},x0=(c,g)=>{c.dispatch("PlaceholderToggle",{state:g})},_v=(c,g,$)=>{c.dispatch(g,$)},Zy=(c,g,$,et)=>{c.dispatch("FormatApply",{format:g,node:$,vars:et})},GE=(c,g,$,et)=>{c.dispatch("FormatRemove",{format:g,node:$,vars:et})},U5=(c,g)=>c.dispatch("BeforeSetContent",g),DP=(c,g)=>c.dispatch("SetContent",g),QT=(c,g)=>c.dispatch("BeforeGetContent",g),g8=(c,g)=>c.dispatch("GetContent",g),eI=(c,g)=>{c.dispatch("AutocompleterStart",g)},m8=(c,g)=>{c.dispatch("AutocompleterUpdate",g)},tI=(c,g)=>{c.dispatch("AutocompleterUpdateActiveRange",g)},y8=c=>{c.dispatch("AutocompleterEnd")},b8=(c,g,$)=>c.dispatch("PastePreProcess",{content:g,internal:$}),NP=(c,g,$)=>c.dispatch("PastePostProcess",{node:g,internal:$}),nI=(c,g)=>c.dispatch("PastePlainTextToggle",{state:g}),Du=(c,g)=>c.dispatch("EditableRootStateChange",{state:g}),Br={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:c=>c.shiftKey||c.ctrlKey||c.altKey||Br.metaKeyPressed(c),metaKeyPressed:c=>Kr.os.isMacOS()||Kr.os.isiOS()?c.metaKey:c.ctrlKey&&!c.altKey},j1="data-mce-selected",LP="table,img,figure.image,hr,video,span.mce-preview-object,details",H5=Math.abs,lS=Math.round,oI={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},jE=c=>c.type==="longpress"||c.type.indexOf("touch")===0,V5=(c,g)=>{const $=g.dom,et=g.getDoc(),ot=document,at=g.getBody();let ht,_t,St,Lt,Ht,qt,Qt,gn,kn,yn,Rn,so,ho,xo,To,or,mr;const $r=Mr=>an(Mr)&&(Xw(Mr)||$.is(Mr,"figure.image")),Zo=Mr=>Jm(Mr)||$.hasClass(Mr,"mce-preview-object"),Lo=(Mr,El)=>{if(jE(Mr)){const Ol=Mr.touches[0];return $r(Mr.target)&&!aS(Ol.clientX,Ol.clientY,El)}else return $r(Mr.target)&&!aS(Mr.clientX,Mr.clientY,El)},ir=Mr=>{const El=Mr.target;Lo(Mr,g.selection.getRng())&&!Mr.isDefaultPrevented()&&g.selection.select(El)},Gr=Mr=>$.hasClass(Mr,"mce-preview-object")&&an(Mr.firstElementChild)?[Mr,Mr.firstElementChild]:$.is(Mr,"figure.image")?[Mr.querySelector("img")]:[Mr],gs=Mr=>{const El=VC(g);return!El||g.mode.isReadOnly()||Mr.getAttribute("data-mce-resize")==="false"||Mr===g.getBody()?!1:$.hasClass(Mr,"mce-preview-object")&&an(Mr.firstElementChild)?R0(Qn.fromDom(Mr.firstElementChild),El):R0(Qn.fromDom(Mr),El)},Cl=(Mr,El)=>{if(Zo(El))return Mr.create("img",{src:Kr.transparentSrc});if(lv(El)){const vm=ks(Lt.name,"n")?_r:fs,Lu=El.cloneNode(!0);return vm(Mr.select("tr",Lu)).each(S0=>{const Qy=Mr.select("td,th",S0);Mr.setStyle(S0,"height",null),rn(Qy,Dx=>Mr.setStyle(Dx,"height",null))}),Lu}else return El.cloneNode(!0)},Sl=(Mr,El,Ol)=>{if(an(Ol)){const vm=Gr(Mr);rn(vm,Lu=>{Lu.style[El]||!g.schema.isValid(Lu.nodeName.toLowerCase(),El)?$.setStyle(Lu,El,Ol):$.setAttrib(Lu,El,""+Ol)})}},au=(Mr,El,Ol)=>{Sl(Mr,"width",El),Sl(Mr,"height",Ol)},Cu=Mr=>{let El,Ol,vm,Lu,S0;El=Mr.screenX-qt,Ol=Mr.screenY-Qt,xo=El*Lt[2]+yn,To=Ol*Lt[3]+Rn,xo=xo<5?5:xo,To=To<5?5:To,($r(ht)||Zo(ht))&&T2(g)!==!1?vm=!Br.modifierPressed(Mr):vm=Br.modifierPressed(Mr),vm&&(H5(El)>H5(Ol)?(To=lS(xo*so),xo=lS(To/so)):(xo=lS(To/so),To=lS(xo*so))),au(_t,xo,To),Lu=Lt.startPos.x+El,S0=Lt.startPos.y+Ol,Lu=Lu>0?Lu:0,S0=S0>0?S0:0,$.setStyles(St,{left:Lu,top:S0,display:"block"}),St.innerHTML=xo+" &times; "+To,Lt[2]<0&&_t.clientWidth<=xo&&$.setStyle(_t,"left",gn+(yn-xo)),Lt[3]<0&&_t.clientHeight<=To&&$.setStyle(_t,"top",kn+(Rn-To)),El=at.scrollWidth-or,Ol=at.scrollHeight-mr,El+Ol!==0&&$.setStyles(St,{left:Lu-El,top:S0-Ol}),ho||(p8(g,ht,yn,Rn,"corner-"+Lt.name),ho=!0)},jp=()=>{const Mr=ho;ho=!1,Mr&&(Sl(ht,"width",xo),Sl(ht,"height",To)),$.unbind(et,"mousemove",Cu),$.unbind(et,"mouseup",jp),ot!==et&&($.unbind(ot,"mousemove",Cu),$.unbind(ot,"mouseup",jp)),$.remove(_t),$.remove(St),$.remove(Ht),k0(ht),Mr&&(PP(g,ht,xo,To,"corner-"+Lt.name),$.setAttrib(ht,"style",$.getAttrib(ht,"style"))),g.nodeChanged()},k0=Mr=>{Lr();const El=$.getPos(Mr,at),Ol=El.x,vm=El.y,Lu=Mr.getBoundingClientRect(),S0=Lu.width||Lu.right-Lu.left,Qy=Lu.height||Lu.bottom-Lu.top;ht!==Mr&&(Er(),ht=Mr,xo=To=0);const Dx=g.dispatch("ObjectSelected",{target:Mr});gs(Mr)&&!Dx.isDefaultPrevented()?tr(oI,(oy,l1)=>{const o_=_b=>{const us=Gr(ht)[0];qt=_b.screenX,Qt=_b.screenY,yn=us.clientWidth,Rn=us.clientHeight,so=Rn/yn,Lt=oy,Lt.name=l1,Lt.startPos={x:S0*oy[0]+Ol,y:Qy*oy[1]+vm},or=at.scrollWidth,mr=at.scrollHeight,Ht=$.add(at,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),$.setStyles(Ht,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),_t=Cl($,ht),$.addClass(_t,"mce-clonedresizable"),$.setAttrib(_t,"data-mce-bogus","all"),_t.contentEditable="false",$.setStyles(_t,{left:Ol,top:vm,margin:0}),au(_t,S0,Qy),_t.removeAttribute(j1),at.appendChild(_t),$.bind(et,"mousemove",Cu),$.bind(et,"mouseup",jp),ot!==et&&($.bind(ot,"mousemove",Cu),$.bind(ot,"mouseup",jp)),St=$.add(at,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},yn+" &times; "+Rn)};let B0=$.get("mceResizeHandle"+l1);B0&&$.remove(B0),B0=$.add(at,"div",{id:"mceResizeHandle"+l1,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+l1+"-resize; margin:0; padding:0"}),$.bind(B0,"mousedown",_b=>{_b.stopImmediatePropagation(),_b.preventDefault(),o_(_b)}),oy.elm=B0,$.setStyles(B0,{left:S0*oy[0]+Ol-B0.offsetWidth/2,top:Qy*oy[1]+vm-B0.offsetHeight/2})}):Er(!1)},qp=RC(k0,0),Er=(Mr=!0)=>{qp.cancel(),Lr(),ht&&Mr&&ht.removeAttribute(j1),tr(oI,(El,Ol)=>{const vm=$.get("mceResizeHandle"+Ol);vm&&($.unbind(vm),$.remove(vm))})},ds=(Mr,El)=>$.isChildOf(Mr,El),_c=Mr=>{if(ho||g.removed||g.composing)return;const El=Mr.type==="mousedown"?Mr.target:c.getNode(),Ol=iv(Qn.fromDom(El),LP).map(Lu=>Lu.dom).filter(Lu=>$.isEditable(Lu.parentElement)||Lu.nodeName==="IMG"&&$.isEditable(Lu)).getOrUndefined(),vm=an(Ol)?$.getAttrib(Ol,j1,"1"):"1";if(rn($.select(`img[${j1}],hr[${j1}]`),Lu=>{Lu.removeAttribute(j1)}),an(Ol)&&ds(Ol,at)&&g.hasFocus()){Ts();const Lu=c.getStart(!0);if(ds(Lu,Ol)&&ds(c.getEnd(!0),Ol)){$.setAttrib(Ol,j1,vm),qp.throttle(Ol);return}}Er()},Lr=()=>{tr(oI,Mr=>{Mr.elm&&($.unbind(Mr.elm),delete Mr.elm)})},Ts=()=>{try{g.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return g.on("init",()=>{Ts(),g.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",_c),g.on("keyup compositionend",Mr=>{ht&&ht.nodeName==="TABLE"&&_c(Mr)}),g.on("hide blur",Er),g.on("contextmenu longpress",ir,!0)}),g.on("remove",Lr),{isResizable:gs,showResizeRect:k0,hideResizeRect:Er,updateResizeRect:_c,destroy:()=>{qp.cancel(),ht=_t=Ht=null}}},FP=(c,g)=>{g.fold($=>{c.setStartBefore($.dom)},($,et)=>{c.setStart($.dom,et)},$=>{c.setStartAfter($.dom)})},W5=(c,g)=>{g.fold($=>{c.setEndBefore($.dom)},($,et)=>{c.setEnd($.dom,et)},$=>{c.setEndAfter($.dom)})},zP=(c,g,$)=>{const et=c.document.createRange();return FP(et,g),W5(et,$),et},UE=(c,g,$,et,ot)=>{const at=c.document.createRange();return at.setStart(g.dom,$),at.setEnd(et.dom,ot),at},V2=gv.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),rI=(c,g,$)=>g(Qn.fromDom($.startContainer),$.startOffset,Qn.fromDom($.endContainer),$.endOffset),v8=(c,g)=>g.match({domRange:$=>({ltr:ln($),rtl:Yt.none}),relative:($,et)=>({ltr:jo(()=>zP(c,$,et)),rtl:jo(()=>Yt.some(zP(c,et,$)))}),exact:($,et,ot,at)=>({ltr:jo(()=>UE(c,$,et,ot,at)),rtl:jo(()=>Yt.some(UE(c,ot,at,$,et)))})}),_8=(c,g)=>{const $=g.ltr();return $.collapsed?g.rtl().filter(ot=>ot.collapsed===!1).map(ot=>V2.rtl(Qn.fromDom(ot.endContainer),ot.endOffset,Qn.fromDom(ot.startContainer),ot.startOffset)).getOrThunk(()=>rI(c,V2.ltr,$)):rI(c,V2.ltr,$)},x8=(c,g)=>{const $=v8(c,g);return _8(c,$)};V2.ltr,V2.rtl;const d0={create:(c,g,$,et)=>({start:c,soffset:g,finish:$,foffset:et})},cS=(c,g,$)=>{var et;return Yt.from((et=c.caretPositionFromPoint)===null||et===void 0?void 0:et.call(c,g,$)).bind(ot=>{if(ot.offsetNode===null)return Yt.none();const at=c.createRange();return at.setStart(ot.offsetNode,ot.offset),at.collapse(),Yt.some(at)})},lB=(c,g,$)=>{var et;return Yt.from((et=c.caretRangeFromPoint)===null||et===void 0?void 0:et.call(c,g,$))},w8=(c,g,$)=>c.caretPositionFromPoint?cS(c,g,$):c.caretRangeFromPoint?lB(c,g,$):Yt.none(),C8=(c,g,$)=>{const et=c.document;return w8(et,g,$).map(ot=>d0.create(Qn.fromDom(ot.startContainer),ot.startOffset,Qn.fromDom(ot.endContainer),ot.endOffset))},Ll=gv.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),k8=(c,g,$,et)=>c.fold(g,$,et),S8=c=>c.fold(uo,uo,uo),q5=Ll.before,cB=Ll.on,uB=Ll.after,kw={before:q5,on:cB,after:uB,cata:k8,getStart:S8},HE=gv.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),E8=c=>HE.exact(c.start,c.soffset,c.finish,c.foffset),A8=c=>c.match({domRange:g=>Qn.fromDom(g.startContainer),relative:(g,$)=>kw.getStart(g),exact:(g,$,et,ot)=>g}),Z5=HE.domRange,sI=HE.relative,iI=HE.exact,dB=c=>{const g=A8(c);return d_(g)},T8=d0.create,VE={domRange:Z5,relative:sI,exact:iI,exactFromRange:E8,getWin:dB,range:T8},K5=(c,g)=>{const $=Sn(c);return $==="input"?kw.after(c):mn(["br","img"],$)?g===0?kw.before(c):kw.after(c):kw.on(c,g)},I8=(c,g)=>{const $=c.fold(kw.before,K5,kw.after),et=g.fold(kw.before,K5,kw.after);return VE.relative($,et)},BP=(c,g,$,et)=>{const ot=K5(c,g),at=K5($,et);return VE.relative(ot,at)},Rs=c=>c.match({domRange:g=>{const $=Qn.fromDom(g.startContainer),et=Qn.fromDom(g.endContainer);return BP($,g.startOffset,et,g.endOffset)},relative:I8,exact:BP}),aI=(c,g)=>{const et=document.createDocumentFragment();return rn(c,ot=>{et.appendChild(ot.dom)}),Qn.fromDom(et)},it=c=>{const g=VE.getWin(c).dom,$=(ot,at,ht,_t)=>UE(g,ot,at,ht,_t),et=Rs(c);return x8(g,et).match({ltr:$,rtl:$})},ft=(c,g,$)=>C8(c,g,$),vt=(c,g,$)=>{const et=d_(Qn.fromDom($));return ft(et.dom,c,g).map(ot=>{const at=$.createRange();return at.setStart(ot.start.dom,ot.soffset),at.setEnd(ot.finish.dom,ot.foffset),at}).getOrUndefined()},Ct=(c,g)=>an(c)&&an(g)&&c.startContainer===g.startContainer&&c.startOffset===g.startOffset&&c.endContainer===g.endContainer&&c.endOffset===g.endOffset,Ft=(c,g,$)=>{let et=c;for(;et&&et!==g;){if($(et))return et;et=et.parentNode}return null},jt=(c,g,$)=>Ft(c,g,$)!==null,en=(c,g,$)=>jt(c,g,et=>et.nodeName===$),pn=(c,g)=>hv(c)&&!jt(c,g,Wy),En=(c,g,$)=>{const et=g.parentNode;if(et){const ot=new um(g,c.getParent(et,c.isBlock)||c.getRoot());let at;for(;at=ot[$?"prev":"next"]();)if(Jl(at))return!0}return!1},to=(c,g)=>{var $;return(($=c.previousSibling)===null||$===void 0?void 0:$.nodeName)===g},Io=(c,g)=>{let $=g;for(;$&&$!==c;){if(Ql($))return!0;$=$.parentNode}return!1},hr=(c,g,$,et,ot)=>{const at=c.getRoot(),ht=c.schema.getNonEmptyElements(),_t=ot.parentNode;let St,Lt;if(!_t)return Yt.none();const Ht=c.getParent(_t,c.isBlock)||at;if(et&&Jl(ot)&&g&&c.isEmpty(Ht))return Yt.some(Uo(_t,c.nodeIndex(ot)));const qt=new um(ot,Ht);for(;Lt=qt[et?"prev":"next"]();){if(c.getContentEditableParent(Lt)==="false"||pn(Lt,at))return Yt.none();if(dr(Lt)&&Lt.data.length>0)return en(Lt,at,"A")?Yt.none():Yt.some(Uo(Lt,et?Lt.data.length:0));if(c.isBlock(Lt)||ht[Lt.nodeName.toLowerCase()])return Yt.none();St=Lt}return Sp(St)?Yt.none():$&&St?Yt.some(Uo(St,0)):Yt.none()},Or=(c,g,$,et)=>{const ot=c.getRoot();let at,ht=!1,_t=$?et.startContainer:et.endContainer,St=$?et.startOffset:et.endOffset;const Lt=Nr(_t)&&St===_t.childNodes.length,Ht=c.schema.getNonEmptyElements();let qt=$;if(hv(_t))return Yt.none();if(Nr(_t)&&St>_t.childNodes.length-1&&(qt=!1),qx(_t)&&(_t=ot,St=0),_t===ot){if(qt&&(at=_t.childNodes[St>0?St-1:0],at&&(hv(at)||Ht[at.nodeName]||lv(at))))return Yt.none();if(_t.hasChildNodes()){if(St=Math.min(!qt&&St>0?St-1:St,_t.childNodes.length-1),_t=_t.childNodes[St],St=dr(_t)&&Lt?_t.data.length:0,!g&&_t===ot.lastChild&&lv(_t)||Io(ot,_t)||hv(_t)||YS(_t))return Yt.none();if(_t.hasChildNodes()&&!lv(_t)){at=_t;const Qt=new um(_t,ot);do{if(Ql(at)||hv(at)){ht=!1;break}if(dr(at)&&at.data.length>0){St=qt?0:at.data.length,_t=at,ht=!0;break}if(Ht[at.nodeName.toLowerCase()]&&!Qp(at)){St=c.nodeIndex(at),_t=at.parentNode,qt||St++,ht=!0;break}}while(at=qt?Qt.next():Qt.prev())}}}return g&&(dr(_t)&&St===0&&hr(c,Lt,g,!0,_t).each(Qt=>{_t=Qt.container(),St=Qt.offset(),ht=!0}),Nr(_t)&&(at=_t.childNodes[St],at||(at=_t.childNodes[St-1]),at&&Jl(at)&&!to(at,"A")&&!En(c,at,!1)&&!En(c,at,!0)&&hr(c,Lt,g,!0,at).each(Qt=>{_t=Qt.container(),St=Qt.offset(),ht=!0}))),qt&&!g&&dr(_t)&&St===_t.data.length&&hr(c,Lt,g,!1,_t).each(Qt=>{_t=Qt.container(),St=Qt.offset(),ht=!0}),ht&&_t?Yt.some(Uo(_t,St)):Yt.none()},Tr=(c,g)=>{const $=g.collapsed,et=g.cloneRange(),ot=Uo.fromRangeStart(g);return Or(c,$,!0,et).each(at=>{(!$||!Uo.isAbove(ot,at))&&et.setStart(at.container(),at.offset())}),$||Or(c,$,!1,et).each(at=>{et.setEnd(at.container(),at.offset())}),$&&et.collapse(!0),Ct(g,et)?Yt.none():Yt.some(et)},xr=(c,g)=>c.splitText(g),ts=c=>{let g=c.startContainer,$=c.startOffset,et=c.endContainer,ot=c.endOffset;if(g===et&&dr(g)){if($>0&&$<g.data.length)if(et=xr(g,$),g=et.previousSibling,ot>$){ot=ot-$;const at=xr(et,ot).previousSibling;g=et=at,ot=at.data.length,$=0}else ot=0}else if(dr(g)&&$>0&&$<g.data.length&&(g=xr(g,$),$=0),dr(et)&&ot>0&&ot<et.data.length){const at=xr(et,ot).previousSibling;et=at,ot=at.data.length}return{startContainer:g,startOffset:$,endContainer:et,endOffset:ot}},ar=c=>({walk:(at,ht)=>sS(c,at,ht),split:ts,expand:(at,ht={type:"word"})=>{if(ht.type==="word"){const _t=Cw(c,at,[{inline:"span"}]),St=c.createRng();return St.setStart(_t.startContainer,_t.startOffset),St.setEnd(_t.endContainer,_t.endOffset),St}return at},normalize:at=>Tr(c,at).fold(On,ht=>(at.setStart(ht.startContainer,ht.startOffset),at.setEnd(ht.endContainer,ht.endOffset),!0))});ar.compareRanges=Ct,ar.getCaretRangeFromPoint=vt,ar.getSelectedNode=uE,ar.getNode=px;const kr=((c,g)=>{const $=(_t,St)=>{if(!ao(St)&&!St.match(/^[0-9]+$/))throw new Error(c+".set accepts only positive integer values. Value was "+St);const Lt=_t.dom;Lv(Lt)&&(Lt.style[c]=St+"px")},et=_t=>{const St=g(_t);if(St<=0||St===null){const Lt=bp(_t,c);return parseFloat(Lt)||0}return St},ot=et,at=(_t,St)=>Hn(St,(Lt,Ht)=>{const qt=bp(_t,Ht),Qt=qt===void 0?0:parseInt(qt,10);return isNaN(Qt)?Lt:Lt+Qt},0);return{set:$,get:et,getOuter:ot,aggregate:at,max:(_t,St,Lt)=>{const Ht=at(_t,Lt);return St>Ht?St-Ht:0}}})("height",c=>{const g=c.dom;return S1(c)?g.getBoundingClientRect().height:g.offsetHeight}),Fs=c=>kr.get(c),Fl=()=>Qn.fromDom(document),vu=(c,g)=>c.view(g).fold(ln([]),et=>{const ot=c.owner(et),at=vu(c,ot);return[et].concat(at)}),Ku=(c,g)=>{const $=g.owner(c);return vu(g,$)};var U1=Object.freeze({__proto__:null,view:c=>{var g;return(c.dom===document?Yt.none():Yt.from((g=c.dom.defaultView)===null||g===void 0?void 0:g.frameElement)).map(Qn.fromDom)},owner:c=>Dv(c)});const W2=c=>{const g=Fl(),$=$s(g),et=Ku(c,U1),ot=qs(c),at=So(et,(ht,_t)=>{const St=qs(_t);return{left:ht.left+St.left,top:ht.top+St.top}},{left:0,top:0});return Gn(at.left+ot.left+$.left,at.top+ot.top+$.top)},N_=c=>Sn(c)==="textarea",Nu=(c,g)=>c.dispatch("ScrollIntoView",g).isDefaultPrevented(),Q0=(c,g)=>{c.dispatch("AfterScrollIntoView",g)},ey=(c,g)=>{const $=Jp(c);if($.length===0||N_(c))return{element:c,offset:g};if(g<$.length&&!N_($[g]))return{element:$[g],offset:0};{const et=$[$.length-1];return N_(et)?{element:c,offset:g}:Sn(et)==="img"?{element:et,offset:1}:gu(et)?{element:et,offset:LC(et).length}:{element:et,offset:Jp(et).length}}},xv=(c,g)=>{const $=xs(c),et=Fs(c);return{element:c,bottom:$.top+et,height:et,pos:$,cleanup:g}},Js=(c,g)=>{const $=ey(c,g),et=Qn.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Cm+"</span>");return Su($.element,et),xv(et,()=>mu(et))},hy=c=>xv(Qn.fromDom(c),fn),bm=(c,g,$,et)=>{w0(c,(ot,at)=>_x(c,g,$,et),$)},lI=(c,g,$,et,ot)=>{const at={elm:et.element.dom,alignToTop:ot};if(Nu(c,at))return;const ht=$s(g).top;$(c,g,ht,et,ot),Q0(c,at)},_x=(c,g,$,et)=>{const ot=Qn.fromDom(c.getBody()),at=Qn.fromDom(c.getDoc());q0(ot);const ht=Js(Qn.fromDom($.startContainer),$.startOffset);lI(c,at,g,ht,et),ht.cleanup()},$a=(c,g,$,et)=>{const ot=Qn.fromDom(c.getDoc());lI(c,ot,$,hy(g),et)},w0=(c,g,$)=>{const et=$.startContainer,ot=$.startOffset,at=$.endContainer,ht=$.endOffset;g(Qn.fromDom(et),Qn.fromDom(at));const _t=c.dom.createRng();_t.setStart(et,ot),_t.setEnd(at,ht),c.selection.setRng($)},cI=(c,g,$,et,ot)=>{const at=g.pos;if(et)cs(at.left,at.top,ot);else{const ht=at.top-$+g.height;cs(-c.getBody().getBoundingClientRect().left,ht,ot)}},uI=(c,g,$,et,ot,at)=>{const ht=et+$,_t=ot.pos.top,St=ot.bottom,Lt=St-_t>=et;_t<$?cI(c,ot,et,at!==!1,g):_t>ht?cI(c,ot,et,Lt?at!==!1:at===!0,g):St>ht&&!Lt&&cI(c,ot,et,at===!0,g)},$P=(c,g,$,et,ot)=>{const at=d_(g).dom.innerHeight;uI(c,g,$,at,et,ot)},Sw=(c,g,$,et,ot)=>{const at=d_(g).dom.innerHeight;uI(c,g,$,at,et,ot);const ht=W2(et.element),_t=Gv(window);ht.top<_t.y?_f(et.element,ot!==!1):ht.top>_t.bottom&&_f(et.element,ot===!0)},q2=(c,g,$)=>bm(c,$P,g,$),dI=(c,g,$)=>$a(c,g,$P,$),R8=(c,g,$)=>bm(c,Sw,g,$),WE=(c,g,$)=>$a(c,g,Sw,$),VZ=(c,g,$)=>{(c.inline?dI:WE)(c,g,$)},Z2=(c,g,$)=>{(c.inline?q2:R8)(c,g,$)},qE=(c,g=!1)=>c.dom.focus({preventScroll:g}),fB=c=>{const g=yy(c).dom;return c.dom===g.activeElement},GP=(c=Fl())=>Yt.from(c.dom.activeElement).map(Qn.fromDom),WZ=c=>GP(yy(c)).filter(g=>c.dom.contains(g.dom)),hB=(c,g)=>{const $=gu(g)?LC(g).length:Jp(g).length+1;return c>$?$:c<0?0:c},qZ=c=>VE.range(c.start,hB(c.soffset,c.start),c.finish,hB(c.foffset,c.finish)),M8=(c,g)=>!ox(g.dom)&&(Om(c,g)||_i(c,g)),ZZ=c=>g=>M8(c,g.start)&&M8(c,g.finish),KZ=c=>c.inline||Kr.browser.isFirefox(),pB=c=>VE.range(Qn.fromDom(c.startContainer),c.startOffset,Qn.fromDom(c.endContainer),c.endOffset),P8=c=>{const g=c.getSelection();return(!g||g.rangeCount===0?Yt.none():Yt.from(g.getRangeAt(0))).map(pB)},O8=c=>{const g=d_(c);return P8(g.dom).filter(ZZ(c))},D8=(c,g)=>Yt.from(g).filter(ZZ(c)).map(qZ),gB=c=>{const g=document.createRange();try{return g.setStart(c.start.dom,c.soffset),g.setEnd(c.finish.dom,c.foffset),Yt.some(g)}catch{return Yt.none()}},Y5=c=>{const g=KZ(c)?O8(Qn.fromDom(c.getBody())):Yt.none();c.bookmark=g.isSome()?g:c.bookmark},jP=c=>(c.bookmark?c.bookmark:Yt.none()).bind($=>D8(Qn.fromDom(c.getBody()),$)).bind(gB),UP=c=>{jP(c).each(g=>c.selection.setRng(g))},N8={isEditorUIElement:c=>{const g=c.className.toString();return g.indexOf("tox-")!==-1||g.indexOf("mce-")!==-1}},YZ=(c,g)=>(ao(g)||(g=0),setTimeout(c,g)),mB=(c,g)=>(ao(g)||(g=0),setInterval(c,g)),Jv={setEditorTimeout:(c,g,$)=>YZ(()=>{c.removed||g()},$),setEditorInterval:(c,g,$)=>{const et=mB(()=>{c.removed?clearInterval(et):g()},$);return et}},yB=c=>c.type==="nodechange"&&c.selectionChange,bB=(c,g)=>{const $=()=>{g.throttle()};$u.DOM.bind(document,"mouseup",$),c.on("remove",()=>{$u.DOM.unbind(document,"mouseup",$)})},vB=(c,g)=>{c.on("mouseup touchend",$=>{g.throttle()})},XZ=(c,g)=>{vB(c,g),c.on("keyup NodeChange AfterSetSelectionRange",$=>{yB($)||Y5(c)})},JZ=c=>{const g=RC(()=>{Y5(c)},0);c.on("init",()=>{c.inline&&bB(c,g),XZ(c,g)}),c.on("remove",()=>{g.cancel()})};let fI;const L8=$u.DOM,QZ=c=>Nr(c)&&N8.isEditorUIElement(c),F8=c=>{const g=c.classList;return g!==void 0?g.contains("tox-edit-area")||g.contains("tox-edit-area__iframe")||g.contains("mce-content-body"):!1},HP=(c,g)=>{const $=xE(c);return L8.getParent(g,ot=>QZ(ot)||($?c.dom.is(ot,$):!1))!==null},z8=c=>{try{const g=yy(Qn.fromDom(c.getElement()));return GP(g).fold(()=>document.body,$=>$.dom)}catch{return document.body}},VP=(c,g)=>{const $=g.editor;JZ($);const et=(ot,at)=>{if(h5(ot)&&ot.inline!==!0){const ht=Qn.fromDom(ot.getContainer());at(ht,"tox-edit-focus")}};$.on("focusin",()=>{const ot=c.focusedEditor;F8(z8($))&&et($,Fy),ot!==$&&(ot&&ot.dispatch("blur",{focusedEditor:$}),c.setActive($),c.focusedEditor=$,$.dispatch("focus",{blurredEditor:ot}),$.focus(!0))}),$.on("focusout",()=>{Jv.setEditorTimeout($,()=>{const ot=c.focusedEditor;(!F8(z8($))||ot!==$)&&et($,_1),!HP($,z8($))&&ot===$&&($.dispatch("blur",{focusedEditor:null}),c.focusedEditor=null)})}),fI||(fI=ot=>{const at=c.activeEditor;at&&Uw(ot).each(ht=>{const _t=ht;_t.ownerDocument===document&&_t!==document.body&&!HP(at,_t)&&c.focusedEditor===at&&(at.dispatch("blur",{focusedEditor:null}),c.focusedEditor=null)})},L8.bind(document,"focusin",fI))},_B=(c,g)=>{c.focusedEditor===g.editor&&(c.focusedEditor=null),!c.activeEditor&&fI&&(L8.unbind(document,"focusin",fI),fI=null)},eK=c=>{c.on("AddEditor",An(VP,c)),c.on("RemoveEditor",An(_B,c))},xB=(c,g)=>c.dom.getParent(g,$=>c.dom.getContentEditable($)==="true"),wB=(c,g)=>c.dom.getParent(g,$=>c.dom.getContentEditable($)==="false")!==null,tK=c=>c.collapsed?Yt.from(px(c.startContainer,c.startOffset)).map(Qn.fromDom):Yt.none(),nK=(c,g)=>tK(g).bind($=>QM($)?Yt.some($):Om(c,$)?Yt.none():Yt.some(c)),CB=(c,g)=>{nK(Qn.fromDom(c.getBody()),g).bind($=>F0($.dom)).fold(()=>{c.selection.normalize()},$=>c.selection.setRng($.toRange()))},WP=c=>{if(c.setActive)try{c.setActive()}catch{c.focus()}else c.focus()},oK=c=>fB(c)||WZ(c).isSome(),kB=c=>an(c.iframeElement)&&fB(Qn.fromDom(c.iframeElement)),SB=c=>{const g=c.getBody();return g&&oK(Qn.fromDom(g))},qP=c=>{const g=yy(Qn.fromDom(c.getElement()));return GP(g).filter($=>!F8($.dom)&&HP(c,$.dom)).isSome()},hI=c=>c.inline?SB(c):kB(c),EB=c=>hI(c)||qP(c),B8=c=>{const g=c.selection,$=c.getBody();let et=g.getRng();c.quirks.refreshContentEditable();const ot=ht=>{jP(ht).each(_t=>{ht.selection.setRng(_t),et=_t})};!hI(c)&&c.hasEditableRoot()&&ot(c);const at=xB(c,g.getNode());if(at&&c.dom.isChildOf(at,$)){wB(c,at)||WP($),WP(at),c.hasEditableRoot()||ot(c),CB(c,et),$8(c);return}c.inline||(Kr.browser.isOpera()||WP($),c.getWin().focus()),(Kr.browser.isFirefox()||c.inline)&&(WP($),CB(c,et)),$8(c)},$8=c=>c.editorManager.setActive(c),AB=(c,g)=>{c.removed||(g?$8(c):B8(c))},G8=(c,g)=>g.collapsed?c.isEditable(g.startContainer):c.isEditable(g.startContainer)&&c.isEditable(g.endContainer),j8=(c,g,$,et,ot)=>{const at=$?g.startContainer:g.endContainer,ht=$?g.startOffset:g.endOffset;return Yt.from(at).map(Qn.fromDom).map(_t=>!et||!g.collapsed?h0(_t,ot(_t,ht)).getOr(_t):_t).bind(_t=>Xs(_t)?Yt.some(_t):Dm(_t).filter(Xs)).map(_t=>_t.dom).getOr(c)},TB=(c,g,$=!1)=>j8(c,g,!0,$,(et,ot)=>Math.min(h_(et),ot)),IB=(c,g,$=!1)=>j8(c,g,!1,$,(et,ot)=>ot>0?ot-1:ot),RB=(c,g)=>{const $=c;for(;c&&dr(c)&&c.length===0;)c=g?c.nextSibling:c.previousSibling;return c||$},rK=(c,g)=>{if(!g)return c;let $=g.startContainer,et=g.endContainer;const ot=g.startOffset,at=g.endOffset;let ht=g.commonAncestorContainer;g.collapsed||($===et&&at-ot<2&&$.hasChildNodes()&&(ht=$.childNodes[ot]),dr($)&&dr(et)&&($.length===ot?$=RB($.nextSibling,!0):$=$.parentNode,at===0?et=RB(et.previousSibling,!1):et=et.parentNode,$&&$===et&&(ht=$)));const _t=dr(ht)?ht.parentNode:ht;return By(_t)?_t:c},ZP=(c,g,$,et)=>{const ot=[],at=c.getRoot(),ht=c.getParent($||TB(at,g,g.collapsed),c.isBlock),_t=c.getParent(et||IB(at,g,g.collapsed),c.isBlock);if(ht&&ht!==at&&ot.push(ht),ht&&_t&&ht!==_t){let St;const Lt=new um(ht,at);for(;(St=Lt.next())&&St!==_t;)c.isBlock(St)&&ot.push(St)}return _t&&ht!==_t&&_t!==at&&ot.push(_t),ot},MB=(c,g,$)=>Yt.from(g).bind(et=>Yt.from(et.parentNode).map(ot=>{const at=c.nodeIndex(et),ht=c.createRng();return ht.setStart(ot,at),ht.setEnd(ot,at+1),$&&(_P(c,ht,et,!0),_P(c,ht,et,!1)),ht})),KP=(c,g)=>Dn(g,$=>{const et=c.dispatch("GetSelectionRange",{range:$});return et.range!==$?et.range:$}),PB={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},X5=(c,g,$)=>{const et=$?"lastChild":"firstChild",ot=$?"prev":"next";if(c[et])return c[et];if(c!==g){let at=c[ot];if(at)return at;for(let ht=c.parent;ht&&ht!==g;ht=ht.parent)if(at=ht[ot],at)return at}},sK=c=>{var g;const $=(g=c.value)!==null&&g!==void 0?g:"";if(!uy($))return!1;const et=c.parent;return!(et&&(et.name!=="span"||et.attr("style"))&&/^[ ]+$/.test($))},OB=c=>{const g=c.name==="a"&&!c.attr("href")&&c.attr("id");return c.attr("name")||c.attr("id")&&!c.firstChild||c.attr("data-mce-bookmark")||g};class Iy{static create(g,$){const et=new Iy(g,PB[g]||1);return $&&tr($,(ot,at)=>{et.attr(at,ot)}),et}constructor(g,$){this.name=g,this.type=$,$===1&&(this.attributes=[],this.attributes.map={})}replace(g){const $=this;return g.parent&&g.remove(),$.insert(g,$),$.remove(),$}attr(g,$){const et=this;if(!Et(g))return an(g)&&tr(g,(at,ht)=>{et.attr(ht,at)}),et;const ot=et.attributes;if(ot){if($!==void 0){if($===null){if(g in ot.map){delete ot.map[g];let at=ot.length;for(;at--;)if(ot[at].name===g)return ot.splice(at,1),et}return et}if(g in ot.map){let at=ot.length;for(;at--;)if(ot[at].name===g){ot[at].value=$;break}}else ot.push({name:g,value:$});return ot.map[g]=$,et}return ot.map[g]}}clone(){const g=this,$=new Iy(g.name,g.type),et=g.attributes;if(et){const ot=[];ot.map={};for(let at=0,ht=et.length;at<ht;at++){const _t=et[at];_t.name!=="id"&&(ot[ot.length]={name:_t.name,value:_t.value},ot.map[_t.name]=_t.value)}$.attributes=ot}return $.value=g.value,$}wrap(g){const $=this;return $.parent&&($.parent.insert(g,$),g.append($)),$}unwrap(){const g=this;for(let $=g.firstChild;$;){const et=$.next;g.insert($,g,!0),$=et}g.remove()}remove(){const g=this,$=g.parent,et=g.next,ot=g.prev;return $&&($.firstChild===g?($.firstChild=et,et&&(et.prev=null)):ot&&(ot.next=et),$.lastChild===g?($.lastChild=ot,ot&&(ot.next=null)):et&&(et.prev=ot),g.parent=g.next=g.prev=null),g}append(g){const $=this;g.parent&&g.remove();const et=$.lastChild;return et?(et.next=g,g.prev=et,$.lastChild=g):$.lastChild=$.firstChild=g,g.parent=$,g}insert(g,$,et){g.parent&&g.remove();const ot=$.parent||this;return et?($===ot.firstChild?ot.firstChild=g:$.prev&&($.prev.next=g),g.prev=$.prev,g.next=$,$.prev=g):($===ot.lastChild?ot.lastChild=g:$.next&&($.next.prev=g),g.next=$.next,g.prev=$,$.next=g),g.parent=ot,g}getAll(g){const $=this,et=[];for(let ot=$.firstChild;ot;ot=X5(ot,$))ot.name===g&&et.push(ot);return et}children(){const g=this,$=[];for(let et=g.firstChild;et;et=et.next)$.push(et);return $}empty(){const g=this;if(g.firstChild){const $=[];for(let ot=g.firstChild;ot;ot=X5(ot,g))$.push(ot);let et=$.length;for(;et--;){const ot=$[et];ot.parent=ot.firstChild=ot.lastChild=ot.next=ot.prev=null}}return g.firstChild=g.lastChild=null,g}isEmpty(g,$={},et){var ot;const at=this;let ht=at.firstChild;if(OB(at))return!1;if(ht)do{if(ht.type===1){if(ht.attr("data-mce-bogus"))continue;if(g[ht.name]||OB(ht))return!1}if(ht.type===8||ht.type===3&&!sK(ht)||ht.type===3&&ht.parent&&$[ht.parent.name]&&uy((ot=ht.value)!==null&&ot!==void 0?ot:"")||et&&et(ht))return!1}while(ht=X5(ht,at));return!0}walk(g){return X5(this,null,g)}}const iK=cr.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),DB=c=>Et(c.nodeValue)&&c.nodeValue.includes(Cm),NB=c=>`${c.length===0?"":`${Dn(c,g=>`[${g}]`).join(",")},`}[data-mce-bogus="all"]`,aK=(c,g)=>g.querySelectorAll(NB(c)),LB=c=>document.createTreeWalker(c,NodeFilter.SHOW_COMMENT,g=>DB(g)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),FB=c=>document.createTreeWalker(c,NodeFilter.SHOW_TEXT,g=>{if(DB(g)){const $=g.parentNode;return $&&Jr(iK,$.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),lK=c=>LB(c).nextNode()!==null,cK=c=>FB(c).nextNode()!==null,uK=(c,g)=>g.querySelector(NB(c))!==null,YP=(c,g)=>{rn(aK(c,g),$=>{const et=Qn.fromDom($);lm(et,"data-mce-bogus")==="all"?mu(et):rn(c,ot=>{ap(et,ot)&&zu(et,ot)})})},U8=c=>{let g=c.nextNode();for(;g!==null;)g.nodeValue=null,g=c.nextNode()},zB=It(U8,LB),dK=It(U8,FB),BB=(c,g)=>{const $=[{condition:An(uK,g),action:An(YP,g)},{condition:lK,action:zB},{condition:cK,action:dK}];let et=c,ot=!1;return rn($,({condition:at,action:ht})=>{at(et)&&(ot||(et=c.cloneNode(!0),ot=!0),ht(et))}),et},$B=c=>{const g=m0(c,"[data-mce-bogus]");rn(g,$=>{lm($,"data-mce-bogus")==="all"?mu($):dx($)?(Su($,Qn.fromText(hC)),mu($)):vy($)})},GB=c=>{const g=m0(c,"input");rn(g,$=>{zu($,"name")})},fK=(c,g)=>{const $=c0(c),et=new RegExp(`^(<${$}[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/${$}>[\r
]*|<br \\/>[\r
]*)$`);return g.replace(et,"")},hK=(c,g)=>{const $=c.getDoc(),et=yy(Qn.fromDom(c.getBody())),ot=Qn.fromTag("div",$);ip(ot,"data-mce-bogus","all"),Ks(ot,{position:"fixed",left:"-9999999px",top:"0"}),$v(ot,g.innerHTML),$B(ot),GB(ot);const at=WS(et);Up(at,ot);const ht=fv(ot.dom.innerText);return mu(ot),ht},jB=(c,g,$)=>{let et;return g.format==="raw"?et=cr.trim(fv(BB($,c.serializer.getTempAttrs()).innerHTML)):g.format==="text"?et=hK(c,$):g.format==="tree"?et=c.serializer.serialize($,g):et=fK(c,c.serializer.serialize($,g)),g.format!=="text"&&!iT(Qn.fromDom($))&&Et(et)?cr.trim(et):et},pK=(c,g)=>Yt.from(c.getBody()).fold(ln(g.format==="tree"?new Iy("body",11):""),$=>jB(c,g,$)),H8=cr.makeMap,V8=c=>{const g=[];c=c||{};const $=c.indent,et=H8(c.indent_before||""),ot=H8(c.indent_after||""),at=Xx.getEncodeFunc(c.entity_encoding||"raw",c.entities),ht=c.element_format!=="xhtml";return{start:(_t,St,Lt)=>{if($&&et[_t]&&g.length>0){const Ht=g[g.length-1];Ht.length>0&&Ht!==`
`&&g.push(`
`)}if(g.push("<",_t),St)for(let Ht=0,qt=St.length;Ht<qt;Ht++){const Qt=St[Ht];g.push(" ",Qt.name,'="',at(Qt.value,!0),'"')}if(!Lt||ht?g[g.length]=">":g[g.length]=" />",Lt&&$&&ot[_t]&&g.length>0){const Ht=g[g.length-1];Ht.length>0&&Ht!==`
`&&g.push(`
`)}},end:_t=>{let St;g.push("</",_t,">"),$&&ot[_t]&&g.length>0&&(St=g[g.length-1],St.length>0&&St!==`
`&&g.push(`
`))},text:(_t,St)=>{_t.length>0&&(g[g.length]=St?_t:at(_t))},cdata:_t=>{g.push("<![CDATA[",_t,"]]>")},comment:_t=>{g.push("<!--",_t,"-->")},pi:(_t,St)=>{St?g.push("<?",_t," ",at(St),"?>"):g.push("<?",_t,"?>"),$&&g.push(`
`)},doctype:_t=>{g.push("<!DOCTYPE",_t,">",$?`
`:"")},reset:()=>{g.length=0},getContent:()=>g.join("").replace(/\n$/,"")}},uS=(c={},g=yu())=>{const $=V8(c);return c.validate="validate"in c?c.validate:!0,{serialize:ot=>{const at=c.validate,ht={3:St=>{var Lt;$.text((Lt=St.value)!==null&&Lt!==void 0?Lt:"",St.raw)},8:St=>{var Lt;$.comment((Lt=St.value)!==null&&Lt!==void 0?Lt:"")},7:St=>{$.pi(St.name,St.value)},10:St=>{var Lt;$.doctype((Lt=St.value)!==null&&Lt!==void 0?Lt:"")},4:St=>{var Lt;$.cdata((Lt=St.value)!==null&&Lt!==void 0?Lt:"")},11:St=>{let Lt=St;if(Lt=Lt.firstChild)do _t(Lt);while(Lt=Lt.next)}};$.reset();const _t=St=>{var Lt;const Ht=ht[St.type];if(Ht)Ht(St);else{const qt=St.name,Qt=qt in g.getVoidElements();let gn=St.attributes;if(at&&gn&&gn.length>1){const kn=[];kn.map={};const yn=g.getElementRule(St.name);if(yn){for(let Rn=0,so=yn.attributesOrder.length;Rn<so;Rn++){const ho=yn.attributesOrder[Rn];if(ho in gn.map){const xo=gn.map[ho];kn.map[ho]=xo,kn.push({name:ho,value:xo})}}for(let Rn=0,so=gn.length;Rn<so;Rn++){const ho=gn[Rn].name;if(!(ho in kn.map)){const xo=gn.map[ho];kn.map[ho]=xo,kn.push({name:ho,value:xo})}}gn=kn}}if($.start(qt,gn,Qt),Wu(qt))Et(St.value)&&$.text(St.value,!0),$.end(qt);else if(!Qt){let kn=St.firstChild;if(kn){(qt==="pre"||qt==="textarea")&&kn.type===3&&((Lt=kn.value)===null||Lt===void 0?void 0:Lt[0])===`
`&&$.text(`
`,!0);do _t(kn);while(kn=kn.next)}$.end(qt)}}};return ot.type===1&&!c.inner?_t(ot):ot.type===3?ht[3](ot):ht[11](ot),$.getContent()}}},UB=new Set;rn(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],g=>{UB.add(g)});const HB=new Set;rn(["background-color"],g=>{HB.add(g)});const VB=["font","text-decoration","text-emphasis"],gK=(c,g)=>c.parseStyle(c.getAttrib(g,"style")),pI=(c,g)=>Zr(gK(c,g)),mK=c=>UB.has(c),yK=c=>HB.has(c),WB=(c,g)=>wn(pI(c,g),$=>mK($)),bK=(c,g)=>WB(c,g)&&wn(pI(c,g),$=>yK($)),vK=c=>zn(c,g=>wn(VB,$=>ks(g,$))),_K=(c,g,$)=>{const et=pI(c,g),ot=pI(c,$),at=ht=>{var _t,St;const Lt=(_t=c.getStyle(g,ht))!==null&&_t!==void 0?_t:"",Ht=(St=c.getStyle($,ht))!==null&&St!==void 0?St:"";return _s(Lt)&&_s(Ht)&&Lt!==Ht};return wn(et,ht=>{const _t=St=>wn(St,Lt=>Lt===ht);if(!_t(ot)&&_t(VB)){const St=vK(ot);return wn(St,at)}else return at(ht)})},qB=(c,g,$)=>Yt.from($.container()).filter(dr).exists(et=>{const ot=c?0:-1;return g(et.data.charAt($.offset()+ot))}),W8=An(qB,!0,L2),q8=An(qB,!1,L2),xK=c=>{const g=c.container();return dr(g)&&(g.data.length===0||lE(g.data)&&H2.isBookmarkNode(g.parentNode))},dS=(c,g)=>$=>v5(c?0:-1,$).filter(g).isSome(),ZB=c=>Xw(c)&&bp(Qn.fromDom(c),"display")==="block",KB=c=>Ql(c)&&!Yw(c),ys=dS(!0,ZB),YB=dS(!1,ZB),gI=dS(!0,Jm),J5=dS(!1,Jm),XP=dS(!0,lv),Z8=dS(!1,lv),fS=dS(!0,KB),hS=dS(!1,KB),wK=c=>c.slice(0,-1),CK=(c,g,$)=>Om(g,c)?wK(rv(c,et=>$(et)||_i(et,g))):[],Q5=(c,g)=>CK(c,g,On),Ew=(c,g)=>[c].concat(Q5(c,g)),XB=(c,g,$)=>pP(c,g,$,xK),kK=c=>g=>c.isBlock(Sn(g)),Gs=(c,g,$)=>Jn(Ew(Qn.fromDom(g.container()),c),kK($)),JB=(c,g,$,et)=>XB(c,g.dom,$).forall(ot=>Gs(g,$,et).fold(()=>!B1(ot,$,g.dom),at=>!B1(ot,$,g.dom)&&Om(at,Qn.fromDom(ot.container())))),Ws=(c,g,$,et)=>Gs(g,$,et).fold(()=>XB(c,g.dom,$).forall(ot=>!B1(ot,$,g.dom)),ot=>XB(c,ot.dom,$).isNone()),JP=An(Ws,!1),SK=An(Ws,!0),fie=An(JB,!1),EK=An(JB,!0),hie=c=>RE(c).exists(dx),K8=(c,g,$,et)=>{const ot=zn(Ew(Qn.fromDom($.container()),g),ht=>et.isBlock(Sn(ht))),at=_r(ot).getOr(g);return Hy(c,at.dom,$).filter(hie)},Y8=(c,g,$)=>RE(g).exists(dx)||K8(!0,c,g,$).isSome(),QP=(c,g,$)=>QL(g).exists(dx)||K8(!1,c,g,$).isSome(),Ds=An(K8,!1),AK=An(K8,!0),QB=c=>Uo.isTextPosition(c)&&!c.isAtStart()&&!c.isAtEnd(),e$=(c,g,$)=>{const et=zn(Ew(Qn.fromDom(g.container()),c),ot=>$.isBlock(Sn(ot)));return _r(et).getOr(c)},mI=(c,g,$)=>QB(g)?q8(g):q8(g)||Ey(e$(c,g,$).dom,g).exists(q8),X8=(c,g,$)=>QB(g)?W8(g):W8(g)||L0(e$(c,g,$).dom,g).exists(W8),TK=c=>mn(["pre","pre-wrap"],c),J8=c=>RE(c).bind(g=>_d(g,Xs)).exists(g=>TK(bp(g,"white-space"))),IK=(c,g)=>Ey(c.dom,g).isNone(),t$=(c,g)=>L0(c.dom,g).isNone(),RK=(c,g,$)=>IK(c,g)||t$(c,g)||JP(c,g,$)||SK(c,g,$)||QP(c,g,$)||Y8(c,g,$),pie=c=>an(c)&&Ql(c)&&b5(c),MK=(c,g)=>$=>pie(new um($,c)[g]()),PK=(c,g)=>{const $=L0(c.dom,g).getOr(g),et=MK(c.dom,"next");return g.isAtEnd()&&(et(g.container())||et($.container()))},OK=(c,g)=>{const $=Ey(c.dom,g).getOr(g),et=MK(c.dom,"prev");return g.isAtStart()&&(et(g.container())||et($.container()))},n$=(c,g,$)=>J8(g)?!1:RK(c,g,$)||mI(c,g,$)||X8(c,g,$),eR=(c,g,$)=>J8(g)?!1:JP(c,g,$)||fie(c,g,$)||QP(c,g,$)||mI(c,g,$)||OK(c,g),o$=c=>{const g=c.container(),$=c.offset();return dr(g)&&$<g.data.length?Uo(g,$+1):c},tR=(c,g,$)=>J8(g)?!1:SK(c,g,$)||EK(c,g,$)||Y8(c,g,$)||X8(c,g,$)||PK(c,g),na=(c,g,$)=>eR(c,g,$)||tR(c,o$(g),$),Q8=(c,g)=>_w(c.charAt(g)),nR=(c,g)=>L2(c.charAt(g)),r$=c=>{const g=c.container();return dr(g)&&hs(g.data,dm)},s$=c=>{const g=c.split("");return Dn(g,($,et)=>_w($)&&et>0&&et<g.length-1&&$T(g[et-1])&&$T(g[et+1])?" ":$).join("")},e6=(c,g,$,et)=>{const ot=g.data,at=Uo(g,0);return!$&&Q8(ot,0)&&!na(c,at,et)?(g.data=" "+ot.slice(1),!0):$&&nR(ot,0)&&eR(c,at,et)?(g.data=dm+ot.slice(1),!0):!1},i$=c=>{const g=c.data,$=s$(g);return $!==g?(c.data=$,!0):!1},t6=(c,g,$,et)=>{const ot=g.data,at=Uo(g,ot.length-1);return!$&&Q8(ot,ot.length-1)&&!na(c,at,et)?(g.data=ot.slice(0,-1)+" ",!0):$&&nR(ot,ot.length-1)&&tR(c,at,et)?(g.data=ot.slice(0,-1)+dm,!0):!1},DK=(c,g,$)=>{const et=g.container();if(!dr(et))return Yt.none();if(r$(g)){const ot=e6(c,et,!1,$)||i$(et)||t6(c,et,!1,$);return f0(ot,g)}else if(na(c,g,$)){const ot=e6(c,et,!0,$)||t6(c,et,!0,$);return f0(ot,g)}else return Yt.none()},a$=c=>{const g=Qn.fromDom(c.getBody());c.selection.isCollapsed()&&DK(g,Uo.fromRangeStart(c.selection.getRng()),c.schema).each($=>{c.selection.setRng($.toRange())})},l$=(c,g,$,et)=>{if($===0)return;const ot=Qn.fromDom(c),at=Qu(ot,Lt=>et.isBlock(Sn(Lt))).getOr(ot),ht=c.data.slice(g,g+$),_t=g+$>=c.data.length&&tR(at,Uo(c,c.data.length),et),St=g===0&&eR(at,Uo(c,0),et);c.replaceData(g,$,zy(ht,4,St,_t))},eO=(c,g,$)=>{const et=c.data.slice(g),ot=et.length-Kp(et).length;l$(c,g,ot,$)},n6=(c,g,$)=>{const et=c.data.slice(0,g),ot=et.length-sm(et).length;l$(c,g-ot,ot,$)},o6=(c,g,$,et,ot=!0)=>{const at=sm(c.data).length,ht=ot?c:g,_t=ot?g:c;return ot?ht.appendData(_t.data):ht.insertData(0,_t.data),mu(Qn.fromDom(_t)),et&&eO(ht,at,$),ht},NK=(c,g)=>{const $=c.container(),et=c.offset();return!Uo.isTextPosition(c)&&$===g.parentNode&&et>Uo.before(g).offset()},LK=(c,g)=>NK(g,c)?Uo(g.container(),g.offset()-1):g,FK=c=>dr(c)?Uo(c,0):Uo.before(c),zK=c=>dr(c)?Uo(c,c.data.length):Uo.after(c),tO=c=>Kv(c.previousSibling)?Yt.some(zK(c.previousSibling)):c.previousSibling?Vy(c.previousSibling):Yt.none(),nO=c=>Kv(c.nextSibling)?Yt.some(FK(c.nextSibling)):c.nextSibling?F0(c.nextSibling):Yt.none(),BK=(c,g)=>Yt.from(g.previousSibling?g.previousSibling:g.parentNode).bind($=>Ey(c,Uo.before($))).orThunk(()=>L0(c,Uo.after(g))),$K=(c,g)=>L0(c,Uo.after(g)).orThunk(()=>Ey(c,Uo.before(g))),GK=(c,g)=>tO(g).orThunk(()=>nO(g)).orThunk(()=>BK(c,g)),jK=(c,g)=>nO(g).orThunk(()=>tO(g)).orThunk(()=>$K(c,g)),UK=(c,g,$)=>c?jK(g,$):GK(g,$),HK=(c,g,$)=>UK(c,g,$).map(An(LK,$)),c$=(c,g,$)=>{$.fold(()=>{c.focus()},et=>{c.selection.setRng(et.toRange(),g)})},VK=c=>g=>g.dom===c,u$=(c,g)=>g&&Jr(c.schema.getBlockElements(),Sn(g)),WK=(c,g,$)=>{if(Qm(c,g)){const et=Qn.fromHtml('<br data-mce-bogus="1">');return $?rn(Jp(g),ot=>{BE(ot)||mu(ot)}):y_(g),Up(g,et),Yt.some(Uo.before(et.dom))}else return Yt.none()},qK=(c,g,$,et)=>{const ot=sv(c).filter(gu),at=Km(c).filter(gu);return mu(c),qm(ot,at,g,(ht,_t,St)=>{const Lt=ht.dom,Ht=_t.dom,qt=Lt.data.length;return o6(Lt,Ht,$,et),St.container()===Ht?Uo(Lt,qt):St}).orThunk(()=>(et&&(ot.each(ht=>n6(ht.dom,ht.dom.length,$)),at.each(ht=>eO(ht.dom,0,$))),g))},ZE=(c,g)=>Jr(c.schema.getTextInlineElements(),Sn(g)),KE=(c,g,$,et=!0,ot=!1)=>{const at=HK(g,c.getBody(),$.dom),ht=Qu($,An(u$,c),VK(c.getBody())),_t=qK($,at,c.schema,ZE(c,$));c.dom.isEmpty(c.getBody())?(c.setContent(""),c.selection.setCursorLocation()):ht.bind(St=>WK(c.schema,St,ot)).fold(()=>{et&&c$(c,g,_t)},St=>{et&&c$(c,g,Yt.some(St))})},d$=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ZK=c=>d$.test(c),YE=(c,g)=>R0(Qn.fromDom(g),mv(c))&&!I1(c.schema,g)&&c.dom.isEditable(g),r6=c=>{var g;return $u.DOM.getStyle(c,"direction",!0)==="rtl"||ZK((g=c.textContent)!==null&&g!==void 0?g:"")},f$=(c,g,$)=>zn($u.DOM.getParents($.container(),"*",g),c),K2=(c,g,$)=>{const et=f$(c,g,$);return Yt.from(et[et.length-1])},h$=(c,g,$)=>{const et=Sy(g,c),ot=Sy($,c);return an(et)&&et===ot},Ry=c=>I_(c)||fx(c),H1=(c,g)=>{const $=g.container(),et=g.offset();return c?qv($)?dr($.nextSibling)?Uo($.nextSibling,0):Uo.after($):I_(g)?Uo($,et+1):g:qv($)?dr($.previousSibling)?Uo($.previousSibling,$.previousSibling.data.length):Uo.before($):fx(g)?Uo($,et-1):g},p$=An(H1,!0),g$=An(H1,!1),m$=(c,g)=>{const $=et=>et.stopImmediatePropagation();c.on("beforeinput input",$,!0),c.getDoc().execCommand(g),c.off("beforeinput input",$)},KK=c=>{c.execCommand("delete")},Aw=c=>m$(c,"Delete"),y$=c=>m$(c,"ForwardDelete"),YK=c=>g=>du(Dm(g),c,_i),vp=c=>wy(c)||m2(c),XE=(c,g)=>Om(c,g)?_d(g,vp,YK(c)):Yt.none(),pS=(c,g=!0)=>{c.dom.isEmpty(c.getBody())&&c.setContent("",{no_selection:!g})},b$=(c,g,$)=>Bs(F0($),Vy($),(et,ot)=>{const at=H1(!0,et),ht=H1(!1,ot),_t=H1(!1,g);return c?L0($,_t).exists(St=>St.isEqual(ht)&&g.isEqual(at)):Ey($,_t).exists(St=>St.isEqual(at)&&g.isEqual(ht))}).getOr(!0),JE=c=>(ps(c)?sv(c):k1(c)).bind(JE).orThunk(()=>Yt.some(c)),Qv=(c,g,$,et=!0)=>{var ot;g.deleteContents();const at=JE($).getOr($),ht=Qn.fromDom((ot=c.dom.getParent(at.dom,c.dom.isBlock))!==null&&ot!==void 0?ot:$.dom);if(ht.dom===c.getBody()?pS(c,et):Qm(c.schema,ht,{checkRootAsContent:!1})&&(T_(ht),et&&c.selection.setCursorLocation(ht.dom,0)),!_i($,ht)){const _t=du(Dm(ht),$)?[]:J_(ht);rn(_t.concat(Jp($)),St=>{!_i(St,ht)&&!Om(St,ht)&&Qm(c.schema,St)&&mu(St)})}},oR=c=>g=>_i(c,g),Iu=c=>m0(c,"td,th"),yI=(c,g)=>NE(Qn.fromDom(c),g),v$=c=>Bs(c.startTable,c.endTable,(g,$)=>{const et=qS(g,at=>_i(at,$)),ot=qS($,at=>_i(at,g));return!et&&!ot?c:{...c,startTable:et?Yt.none():c.startTable,endTable:ot?Yt.none():c.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(c),_$=c=>v$(c),s6=(c,g)=>{const $=yI(c.startContainer,g),et=yI(c.endContainer,g),ot=$.isSome(),at=et.isSome(),ht=Bs($,et,_i).getOr(!1);return _$({startTable:$,endTable:et,isStartInTable:ot,isEndInTable:at,isSameTable:ht,isMultiTable:!ht&&ot&&at})},rR=(c,g)=>({start:c,end:g}),i6=(c,g,$)=>({rng:c,table:g,cells:$}),QE=gv.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),eA=(c,g)=>iv(Qn.fromDom(c),"td,th",g),oO=c=>!_i(c.start,c.end),a6=(c,g)=>NE(c.start,g).bind($=>NE(c.end,g).bind(et=>f0(_i($,et),$))),x$=(c,g)=>!oO(c)&&a6(c,g).exists($=>{const et=$.dom.rows;return et.length===1&&et[0].cells.length===1}),w$=(c,g)=>{const $=eA(c.startContainer,g),et=eA(c.endContainer,g);return Bs($,et,rR)},C$=c=>g=>NE(g,c).bind($=>fs(Iu($)).map(et=>rR(g,et))),k$=c=>g=>NE(g,c).bind($=>_r(Iu($)).map(et=>rR(et,g))),gS=c=>g=>a6(g,c).map($=>i6(g,$,Iu($))),l6=(c,g,$,et)=>{if($.collapsed||!c.forall(oO))return Yt.none();if(g.isSameTable){const ot=c.bind(gS(et));return Yt.some({start:ot,end:ot})}else{const ot=eA($.startContainer,et),at=eA($.endContainer,et),ht=ot.bind(C$(et)).bind(gS(et)),_t=at.bind(k$(et)).bind(gS(et));return Yt.some({start:ht,end:_t})}},rO=(c,g)=>bo(c,$=>_i($,g)),c6=c=>Bs(rO(c.cells,c.rng.start),rO(c.cells,c.rng.end),(g,$)=>c.cells.slice(g,$+1)),XK=(c,g,$)=>c.exists(et=>x$(et,$)&&L5(et.start,g)),u6=(c,g)=>{const{startTable:$,endTable:et}=g,ot=c.cloneRange();return $.each(at=>ot.setStartAfter(at.dom)),et.each(at=>ot.setEndBefore(at.dom)),ot},S$=(c,g,$,et)=>l6(c,g,$,et).bind(({start:ot,end:at})=>ot.or(at)).bind(ot=>{const{isSameTable:at}=g,ht=c6(ot).getOr([]);if(at&&ot.cells.length===ht.length)return Yt.some(QE.fullTable(ot.table));if(ht.length>0){if(at)return Yt.some(QE.partialTable(ht,Yt.none()));{const _t=u6($,g);return Yt.some(QE.partialTable(ht,Yt.some({...g,rng:_t})))}}else return Yt.none()}),E$=(c,g,$,et)=>l6(c,g,$,et).bind(({start:ot,end:at})=>{const ht=ot.bind(c6).getOr([]),_t=at.bind(c6).getOr([]);if(ht.length>0&&_t.length>0){const St=u6($,g);return Yt.some(QE.multiTable(ht,_t,St))}else return Yt.none()}),sO=(c,g)=>{const $=oR(c),et=w$(g,$),ot=s6(g,$);return XK(et,g,$)?et.map(at=>QE.singleCellTable(g,at.start)):ot.isMultiTable?E$(et,ot,g,$):S$(et,ot,g,$)},d6=c=>rn(c,g=>{zu(g,"contenteditable"),T_(g)}),A$=(c,g)=>Yt.from(c.dom.getParent(g,c.dom.isBlock)).map(Qn.fromDom),T$=(c,g,$)=>{$.each(et=>{g?mu(et):(T_(et),c.selection.setCursorLocation(et.dom,0))})},iO=(c,g,$,et)=>{const ot=$.cloneRange();et?(ot.setStart($.startContainer,$.startOffset),ot.setEndAfter(g.dom.lastChild)):(ot.setStartBefore(g.dom.firstChild),ot.setEnd($.endContainer,$.endOffset)),aO(c,ot,g,!1).each(at=>at())},f6=c=>{const g=tS(c),$=Qn.fromDom(c.selection.getNode());Jw($.dom)&&Qm(c.schema,$)?c.selection.setCursorLocation($.dom,0):c.selection.collapse(!0),g.length>1&&wn(g,et=>_i(et,$))&&ip($,"data-mce-selected","1")},h6=(c,g,$)=>Yt.some(()=>{const et=c.selection.getRng(),ot=$.bind(({rng:at,isStartInTable:ht})=>{const _t=A$(c,ht?at.endContainer:at.startContainer);at.deleteContents(),T$(c,ht,_t.filter(An(Qm,c.schema)));const St=ht?g[0]:g[g.length-1];return iO(c,St,et,ht),Qm(c.schema,St)?Yt.none():Yt.some(ht?g.slice(1):g.slice(0,-1))}).getOr(g);d6(ot),f6(c)}),I$=(c,g,$,et)=>Yt.some(()=>{const ot=c.selection.getRng(),at=g[0],ht=$[$.length-1];iO(c,at,ot,!0),iO(c,ht,ot,!1);const _t=Qm(c.schema,at)?g:g.slice(1),St=Qm(c.schema,ht)?$:$.slice(0,-1);d6(_t.concat(St)),et.deleteContents(),f6(c)}),aO=(c,g,$,et=!0)=>Yt.some(()=>{Qv(c,g,$,et)}),R$=(c,g)=>Yt.some(()=>KE(c,!1,g)),M$=(c,g,$)=>sO(g,$).bind(et=>et.fold(An(aO,c),An(R$,c),An(h6,c),An(I$,c))),p6=(c,g)=>sR(c,g),P$=(c,g,$,et)=>lO(g,et).fold(()=>M$(c,g,$),ot=>p6(c,ot)),O$=(c,g,$)=>{const et=Qn.fromDom(c.getBody()),ot=c.selection.getRng();return $.length!==0?h6(c,$,Yt.none()):P$(c,et,ot,g)},g6=(c,g)=>Jn(Ew(g,c),aE),lO=(c,g)=>Jn(Ew(g,c),am("caption")),D$=(c,g,$,et,ot)=>bw($,c.getBody(),ot).bind(at=>g6(g,Qn.fromDom(at.getNode())).bind(ht=>_i(ht,et)?Yt.none():Yt.some(fn))),sR=(c,g)=>Yt.some(()=>{T_(g),c.selection.setCursorLocation(g.dom,0)}),m6=(c,g,$,et)=>F0(c.dom).bind(ot=>Vy(c.dom).map(at=>g?$.isEqual(ot)&&et.isEqual(at):$.isEqual(at)&&et.isEqual(ot))).getOr(!0),cO=(c,g)=>sR(c,g),y6=(c,g,$)=>lO(c,Qn.fromDom($.getNode())).fold(()=>Yt.some(fn),et=>f0(!_i(et,g),fn)),uO=(c,g,$,et,ot)=>bw($,c.getBody(),ot).fold(()=>Yt.some(fn),at=>m6(et,$,ot,at)?cO(c,et):y6(g,et,at)),N$=(c,g,$,et)=>{const ot=Uo.fromRangeStart(c.selection.getRng());return g6($,et).bind(at=>Qm(c.schema,at,{checkRootAsContent:!1})?sR(c,at):D$(c,$,g,at,ot))},dO=(c,g,$,et)=>{const ot=Uo.fromRangeStart(c.selection.getRng());return Qm(c.schema,et)?sR(c,et):uO(c,$,g,et,ot)},fO=(c,g)=>c?XP(g):Z8(g),iR=(c,g)=>{const $=Uo.fromRangeStart(c.selection.getRng());return fO(g,$)||Hy(g,c.getBody(),$).exists(et=>fO(g,et))},b6=(c,g,$)=>{const et=Qn.fromDom(c.getBody());return lO(et,$).fold(()=>N$(c,g,et,$).orThunk(()=>f0(iR(c,g),fn)),ot=>dO(c,g,et,ot))},hO=(c,g)=>{const $=Qn.fromDom(c.selection.getStart(!0)),et=tS(c);return c.selection.isCollapsed()&&et.length===0?b6(c,g,$):O$(c,$,et)},L_=(c,g)=>{let $=g;for(;$&&$!==c;){if(Jo($)||Ql($))return $;$=$.parentNode}return null},v6=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],_6=cr.each,mS=c=>{const g=c.dom,$=new Set(c.serializer.getTempAttrs()),et=(at,ht)=>{if(at.nodeName!==ht.nodeName||at.nodeType!==ht.nodeType)return!1;const _t=Lt=>{const Ht={};return _6(g.getAttribs(Lt),qt=>{const Qt=qt.nodeName.toLowerCase();Qt!=="style"&&!ot(Qt)&&(Ht[Qt]=g.getAttrib(Lt,Qt))}),Ht},St=(Lt,Ht)=>{for(const qt in Lt)if(Jr(Lt,qt)){const Qt=Ht[qt];if(dn(Qt)||Lt[qt]!==Qt)return!1;delete Ht[qt]}for(const qt in Ht)if(Jr(Ht,qt))return!1;return!0};return Nr(at)&&Nr(ht)&&(!St(_t(at),_t(ht))||!St(g.parseStyle(g.getAttrib(at,"style")),g.parseStyle(g.getAttrib(ht,"style"))))?!1:!Ay(at)&&!Ay(ht)},ot=at=>wn(v6,ht=>ks(at,ht))||$.has(at);return{compare:et,isAttributeInternal:ot}},Y2=c=>["h1","h2","h3","h4","h5","h6"].includes(c.name),L$=c=>c.name==="summary",JK=(c,g)=>{let $=c;for(;$=$.walk();)g($)},F$=(c,g,$,et)=>{const ot=$.name;for(let at=0,ht=c.length;at<ht;at++){const _t=c[at];if(_t.name===ot){const St=et.nodes[ot];St?St.nodes.push($):et.nodes[ot]={filter:_t,nodes:[$]}}}if($.attributes)for(let at=0,ht=g.length;at<ht;at++){const _t=g[at],St=_t.name;if(St in $.attributes.map){const Lt=et.attributes[St];Lt?Lt.nodes.push($):et.attributes[St]={filter:_t,nodes:[$]}}}},z$=(c,g,$)=>{const et={nodes:{},attributes:{}};return $.firstChild&&JK($,ot=>{F$(c,g,ot,et)}),et},x6=(c,g)=>{const $=(et,ot)=>{tr(et,at=>{const ht=Ss(at.nodes);rn(at.filter.callbacks,_t=>{for(let St=ht.length-1;St>=0;St--){const Lt=ht[St];(!(ot?Lt.attr(at.filter.name)!==void 0:Lt.name===at.filter.name)||Pn(Lt.parent))&&ht.splice(St,1)}ht.length>0&&_t(ht,at.filter.name,g)})})};$(c.nodes,!1),$(c.attributes,!0)},w6=(c,g,$,et={})=>{const ot=z$(c,g,$);x6(ot,et)},C6=(c,g,$,et)=>{if((c.pad_empty_with_br||g.insert)&&$(et)){const at=new Iy("br",1);g.insert&&at.attr("data-mce-bogus","1"),et.empty().append(at)}else et.empty().append(new Iy("#text",3)).value=dm},yS=c=>{var g;return bS(c,"#text")&&((g=c==null?void 0:c.firstChild)===null||g===void 0?void 0:g.value)===dm},bS=(c,g)=>{const $=c==null?void 0:c.firstChild;return an($)&&$===c.lastChild&&$.name===g},gie=(c,g)=>{const $=c.getElementRule(g.name);return($==null?void 0:$.paddEmpty)===!0},Sm=(c,g,$,et)=>et.isEmpty(g,$,ot=>gie(c,ot)),QK=(c,g)=>an(c)&&(g(c)||c.name==="br"),eY=c=>{let g;for(let $=c;$;$=$.parent){const et=$.attr("contenteditable");if(et==="false")break;et==="true"&&(g=$)}return Yt.from(g)},xx=(c,g,$=c.parent)=>{if(g.getSpecialElements()[c.name])c.empty().remove();else{const et=c.children();for(const ot of et)$&&!g.isValidChild($.name,ot.name)&&xx(ot,g,$);c.unwrap()}},nu=(c,g,$,et=fn)=>{const ot=g.getTextBlockElements(),at=g.getNonEmptyElements(),ht=g.getWhitespaceElements(),_t=cr.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),St=new Set,Lt=Ht=>Ht!==$&&!_t[Ht.name];for(let Ht=0;Ht<c.length;Ht++){const qt=c[Ht];let Qt,gn,kn;if(!qt.parent||St.has(qt))continue;if(ot[qt.name]&&qt.parent.name==="li"){let Rn=qt.next;for(;Rn&&ot[Rn.name];){Rn.name="li",St.add(Rn),qt.parent.insert(Rn,qt.parent);Rn=Rn.next}qt.unwrap();continue}const yn=[qt];for(Qt=qt.parent;Qt&&!g.isValidChild(Qt.name,qt.name)&&Lt(Qt);Qt=Qt.parent)yn.push(Qt);if(Qt&&yn.length>1)if(k6(g,qt,Qt))xx(qt,g);else{yn.reverse(),gn=yn[0].clone(),et(gn);let Rn=gn;for(let so=0;so<yn.length-1;so++){g.isValidChild(Rn.name,yn[so].name)&&so>0?(kn=yn[so].clone(),et(kn),Rn.append(kn)):kn=Rn;for(let ho=yn[so].firstChild;ho&&ho!==yn[so+1];){const xo=ho.next;kn.append(ho),ho=xo}Rn=kn}Sm(g,at,ht,gn)?Qt.insert(qt,yn[0],!0):(Qt.insert(gn,yn[0],!0),Qt.insert(qt,gn)),Qt=yn[0],(Sm(g,at,ht,Qt)||bS(Qt,"br"))&&Qt.empty().remove()}else if(qt.parent){if(qt.name==="li"){let Rn=qt.prev;if(Rn&&(Rn.name==="ul"||Rn.name==="ol")){Rn.append(qt);continue}if(Rn=qt.next,Rn&&(Rn.name==="ul"||Rn.name==="ol")&&Rn.firstChild){Rn.insert(qt,Rn.firstChild,!0);continue}const so=new Iy("ul",1);et(so),qt.wrap(so);continue}if(g.isValidChild(qt.parent.name,"div")&&g.isValidChild("div",qt.name)){const Rn=new Iy("div",1);et(Rn),qt.wrap(Rn)}else xx(qt,g)}}},mie=(c,g)=>{let $=c;for(;$;){if($.name===g)return!0;$=$.parent}return!1},k6=(c,g,$=g.parent)=>$?c.children[g.name]&&!c.isValidChild($.name,g.name)||g.name==="a"&&mie($,"a")?!0:L$($)&&Y2(g)?!(($==null?void 0:$.firstChild)===g&&($==null?void 0:$.lastChild)===g):!1:!1,tY=(c,g,$,et)=>{const ot=document.createRange();return ot.setStart(c,g),ot.setEnd($,et),ot},op=c=>{const g=Uo.fromRangeStart(c),$=Uo.fromRangeEnd(c),et=c.commonAncestorContainer;return Hy(!1,et,$).map(ot=>!B1(g,$,et)&&B1(g,ot,et)?tY(g.container(),g.offset(),ot.container(),ot.offset()):c).getOr(c)},pO=c=>c.collapsed?c:op(c),aR=c=>an(c.firstChild)&&c.firstChild===c.lastChild,lR=c=>c.name==="br"||c.value===dm,cR=(c,g)=>c.getBlockElements()[g.name]&&aR(g)&&lR(g.firstChild),uR=(c,g)=>{const $=c.getNonEmptyElements();return an(g)&&(g.isEmpty($)||cR(c,g))},B$=(c,g)=>{let $=g.firstChild,et=g.lastChild;return $&&$.name==="meta"&&($=$.next),et&&et.attr("id")==="mce_marker"&&(et=et.prev),uR(c,et)&&(et=et==null?void 0:et.prev),!$||$!==et?!1:$.name==="ul"||$.name==="ol"},yie=c=>{var g,$;const et=c.firstChild,ot=c.lastChild;return et&&et.nodeName==="META"&&((g=et.parentNode)===null||g===void 0||g.removeChild(et)),ot&&ot.id==="mce_marker"&&(($=ot.parentNode)===null||$===void 0||$.removeChild(ot)),c},bie=(c,g,$)=>{const et=g.serialize($),ot=c.createFragment(et);return yie(ot)},vie=c=>{var g;return zn((g=c==null?void 0:c.childNodes)!==null&&g!==void 0?g:[],$=>$.nodeName==="LI")},_ie=c=>c.data===dm||Jl(c),nY=c=>an(c==null?void 0:c.firstChild)&&c.firstChild===c.lastChild&&_ie(c.firstChild),xie=c=>!c.firstChild||nY(c),oY=c=>c.length>0&&xie(c[c.length-1])?c.slice(0,-1):c,S6=(c,g)=>{const $=c.getParent(g,c.isBlock);return $&&$.nodeName==="LI"?$:null},wie=(c,g)=>!!S6(c,g),rY=(c,g)=>{const $=g.cloneRange(),et=g.cloneRange();return $.setStartBefore(c),et.setEndAfter(c),[$.cloneContents(),et.cloneContents()]},Mp=(c,g)=>{const $=Uo.before(c),ot=u0(g).next($);return ot?ot.toRange():null},E6=(c,g)=>{const $=Uo.after(c),ot=u0(g).prev($);return ot?ot.toRange():null},$$=(c,g,$,et)=>{const ot=rY(c,et),at=c.parentNode;return at&&(at.insertBefore(ot[0],c),cr.each(g,ht=>{at.insertBefore(ht,c)}),at.insertBefore(ot[1],c),at.removeChild(c)),E6(g[g.length-1],$)},sY=(c,g,$)=>{const et=c.parentNode;return et&&cr.each(g,ot=>{et.insertBefore(ot,c)}),Mp(c,$)},iY=(c,g,$,et)=>(et.insertAfter(g.reverse(),c),E6(g[0],$)),aY=(c,g,$,et)=>{const ot=bie(g,c,et),at=S6(g,$.startContainer),ht=oY(vie(ot.firstChild)),_t=1,St=2,Lt=g.getRoot(),Ht=qt=>{const Qt=Uo.fromRangeStart($),gn=u0(g.getRoot()),kn=qt===_t?gn.prev(Qt):gn.next(Qt),yn=kn==null?void 0:kn.getNode();return yn?S6(g,yn)!==at:!0};return at?Ht(_t)?sY(at,ht,Lt):Ht(St)?iY(at,ht,Lt,g):$$(at,ht,Lt,$):null},wv=["pre"],F_=(c,g,$,et)=>{var ot;const at=g.firstChild,ht=g.lastChild,_t=ht.attr("data-mce-type")==="bookmark"?ht.prev:ht,St=at===_t,Lt=mn(wv,at.name);if(St&&Lt){const Ht=at.attr("contenteditable")!=="false",qt=((ot=c.getParent($,c.isBlock))===null||ot===void 0?void 0:ot.nodeName.toLowerCase())===at.name,Qt=Yt.from(L_(et,$)).forall(Jo);return Ht&&qt&&Qt}else return!1},gO=Jw,A6=(c,g,$)=>{if(an($)){const et=c.getParent(g.endContainer,gO);return $===et&&L5(Qn.fromDom($),g)}else return!1},T6=(c,g,$)=>{var et;if($.getAttribute("data-mce-bogus")==="all")(et=$.parentNode)===null||et===void 0||et.insertBefore(c.dom.createFragment(g),$);else{const ot=$.firstChild,at=$.lastChild;!ot||ot===at&&ot.nodeName==="BR"?c.dom.setHTML($,g):c.selection.setContent(g,{no_events:!0})}},mO=(c,g,$)=>{Yt.from(c.getParent(g,"td,th")).map(Qn.fromDom).each(et=>dL(et,$))},G$=(c,g)=>{const $=c.schema.getTextInlineElements(),et=c.dom;if(g){const ot=c.getBody(),at=mS(c),ht="*[data-mce-fragment]",_t=et.select(ht);cr.each(_t,St=>{const Lt=Qt=>an($[Qt.nodeName.toLowerCase()]),Ht=Qt=>Qt.childNodes.length===1;if((Qt=>!(WB(et,Qt)||bK(et,Qt)))(St)&&Lt(St)&&Ht(St)){const Qt=pI(et,St),gn=(so,ho)=>wo(so,xo=>mn(ho,xo)),kn=so=>Ht(St)&&et.is(so,ht)&&Lt(so)&&(so.nodeName===St.nodeName&&gn(Qt,pI(et,so))||kn(so.children[0])),yn=so=>an(so)&&so!==ot&&(at.compare(St,so)||yn(so.parentElement)),Rn=so=>an(so)&&so!==ot&&et.is(so,ht)&&(_K(et,St,so)||Rn(so.parentElement));(kn(St.children[0])||yn(St.parentElement)&&!Rn(St.parentElement))&&et.remove(St,!0)}})}},dR=c=>{let g=c;for(;g=g.walk();)g.type===1&&g.attr("data-mce-fragment","1")},yO=c=>{cr.each(c.getElementsByTagName("*"),g=>{g.removeAttribute("data-mce-fragment")})},I6=c=>!!c.getAttribute("data-mce-fragment"),j$=(c,g)=>an(g)&&!c.schema.getVoidElements()[g.nodeName],fR=(c,g)=>{var $,et,ot;let at;const ht=c.dom,_t=c.selection;if(!g)return;_t.scrollIntoView(g);const St=L_(c.getBody(),g);if(St&&ht.getContentEditable(St)==="false"){ht.remove(g),_t.select(St);return}let Lt=ht.createRng();const Ht=g.previousSibling;if(dr(Ht)){Lt.setStart(Ht,(et=($=Ht.nodeValue)===null||$===void 0?void 0:$.length)!==null&&et!==void 0?et:0);const gn=g.nextSibling;dr(gn)&&(Ht.appendData(gn.data),(ot=gn.parentNode)===null||ot===void 0||ot.removeChild(gn))}else Lt.setStartBefore(g),Lt.setEndBefore(g);const qt=gn=>{let kn=Uo.fromRangeStart(gn);return kn=u0(c.getBody()).next(kn),kn==null?void 0:kn.toRange()},Qt=ht.getParent(g,ht.isBlock);if(ht.remove(g),Qt&&ht.isEmpty(Qt)){const gn=gO(Qt);y_(Qn.fromDom(Qt)),Lt.setStart(Qt,0),Lt.setEnd(Qt,0),!gn&&!I6(Qt)&&(at=qt(Lt))?(Lt=at,ht.remove(Qt)):ht.add(Qt,ht.create("br",gn?{}:{"data-mce-bogus":"1"}))}_t.setRng(Lt)},lY=c=>{const g=c.dom,$=pO(c.selection.getRng());c.selection.setRng($);const et=g.getParent($.startContainer,gO);A6(g,$,et)?aO(c,$,Qn.fromDom(et)):$.startContainer===$.endContainer&&$.endOffset-$.startOffset===1&&dr($.startContainer.childNodes[$.startOffset])?$.deleteContents():c.getDoc().execCommand("Delete",!1)},cY=c=>{for(let g=c;g;g=g.walk())if(g.attr("id")==="mce_marker")return Yt.some(g);return Yt.none()},wx=(c,g,$)=>{var et;return wn($.children(),Y2)&&((et=c.getParent(g,c.isBlock))===null||et===void 0?void 0:et.nodeName)==="SUMMARY"},Cv=(c,g,$)=>{var et,ot;const at=c.selection,ht=c.dom,_t=c.parser,St=$.merge,Lt=uS({validate:!0},c.schema),Ht='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';$.preserve_zwsp||(g=fv(g)),g.indexOf("{$caret}")===-1&&(g+="{$caret}"),g=g.replace(/\{\$caret\}/,Ht);let qt=at.getRng();const Qt=qt.startContainer,gn=c.getBody();Qt===gn&&at.isCollapsed()&&ht.isBlock(gn.firstChild)&&j$(c,gn.firstChild)&&ht.isEmpty(gn.firstChild)&&(qt=ht.createRng(),qt.setStart(gn.firstChild,0),qt.setEnd(gn.firstChild,0),at.setRng(qt)),at.isCollapsed()||lY(c);const kn=at.getNode(),yn={context:kn.nodeName.toLowerCase(),data:$.data,insert:!0},Rn=_t.parse(g,yn);if($.paste===!0&&B$(c.schema,Rn)&&wie(ht,kn))return qt=aY(Lt,ht,at.getRng(),Rn),qt&&at.setRng(qt),g;$.paste===!0&&F_(ht,Rn,kn,c.getBody())&&((et=Rn.firstChild)===null||et===void 0||et.unwrap()),dR(Rn);let so=Rn.lastChild;if(so&&so.attr("id")==="mce_marker"){const ho=so;for(so=so.prev;so&&so.name!=="table";so=so.walk(!0))if(so.type===3||!ht.isBlock(so.name)){so.parent&&c.schema.isValidChild(so.parent.name,"span")&&so.parent.insert(ho,so,so.name==="br");break}}if(c._selectionOverrides.showBlockCaretContainer(kn),!yn.invalid&&!wx(ht,kn,Rn))g=Lt.serialize(Rn),T6(c,g,kn);else{c.selection.setContent(Ht);let ho=at.getNode(),xo;const To=c.getBody();for(qx(ho)?ho=xo=To:xo=ho;xo&&xo!==To;)ho=xo,xo=xo.parentNode;g=ho===To?To.innerHTML:ht.getOuterHTML(ho);const or=_t.parse(g),mr=cY(or),$r=mr.bind(eY).getOr(or);mr.each(Gr=>Gr.replace(Rn));const Zo=Rn.children(),Lo=(ot=Rn.parent)!==null&&ot!==void 0?ot:or;Rn.unwrap();const ir=zn(Zo,Gr=>k6(c.schema,Gr,Lo));nu(ir,c.schema,$r),w6(_t.getNodeFilters(),_t.getAttributeFilters(),or),g=Lt.serialize(or),ho===To?ht.setHTML(To,g):ht.setOuterHTML(ho,g)}return G$(c,St),fR(c,ht.get("mce_marker")),yO(c.getBody()),mO(ht,at.getStart(),c.schema),P0(c.schema,c.getBody(),at.getStart()),g},vS=c=>c instanceof Iy,V1=c=>{hI(c)&&F0(c.getBody()).each(g=>{const $=g.getNode(),et=lv($)?F0($).getOr(g):g;c.selection.setRng(et.toRange())})},R6=(c,g,$)=>{c.dom.setHTML(c.getBody(),g),$!==!0&&V1(c)},Yu=(c,g,$,et)=>{if($=fv($),$.length===0||/^\s+$/.test($)){const ot='<br data-mce-bogus="1">';g.nodeName==="TABLE"?$="<tr><td>"+ot+"</td></tr>":/^(UL|OL)$/.test(g.nodeName)&&($="<li>"+ot+"</li>");const at=c0(c);return c.schema.isValidChild(g.nodeName.toLowerCase(),at.toLowerCase())?($=ot,$=c.dom.createHTML(at,dw(c),$)):$||($=ot),R6(c,$,et.no_selection),{content:$,html:$}}else{et.format!=="raw"&&($=uS({validate:!1},c.schema).serialize(c.parser.parse($,{isRootContent:!0,insert:!0})));const ot=iT(Qn.fromDom(g))?$:cr.trim($);return R6(c,ot,et.no_selection),{content:ot,html:ot}}},uY=(c,g,$,et)=>{w6(c.parser.getNodeFilters(),c.parser.getAttributeFilters(),$);const ot=uS({validate:!1},c.schema).serialize($),at=fv(iT(Qn.fromDom(g))?ot:cr.trim(ot));return R6(c,at,et.no_selection),{content:$,html:at}},tA=(c,g,$)=>Yt.from(c.getBody()).map(et=>vS(g)?uY(c,et,g,$):Yu(c,et,g,$)).getOr({content:g,html:vS($.content)?"":$.content}),bI=c=>Vt(c)?c:On,U$=(c,g,$)=>{let et=c.dom;const ot=bI($);for(;et.parentNode;){et=et.parentNode;const at=Qn.fromDom(et),ht=g(at);if(ht.isSome())return ht;if(ot(at))break}return Yt.none()},hR=(c,g,$)=>{const et=g(c),ot=bI($);return et.orThunk(()=>ot(c)?Yt.none():U$(c,g,ot))},pR=WT,H$=(c,g,$)=>{const et=c.formatter.get($);if(et)for(let ot=0;ot<et.length;ot++){const at=et[ot];if(bv(at)&&at.inherit===!1&&c.dom.is(g,at.selector))return!0}return!1},gR=(c,g,$,et,ot)=>{const at=c.dom.getRoot();if(g===at)return!1;const ht=c.dom.getParent(g,_t=>H$(c,_t,$)?!0:_t.parentNode===at||!!Cx(c,_t,$,et,!0));return!!Cx(c,ht,$,et,ot)},bO=(c,g,$)=>zm($)&&pR(g,$.inline)||D_($)&&pR(g,$.block)?!0:bv($)?Nr(g)&&c.is(g,$.selector):!1,M6=(c,g,$,et,ot,at)=>{const ht=$[et],_t=et==="attributes";if(Vt($.onmatch))return $.onmatch(g,$,et);if(ht){if(Sr(ht)){for(let St=0;St<ht.length;St++)if(_t?c.getAttrib(g,ht[St]):z5(c,g,ht[St]))return!0}else for(const St in ht)if(Jr(ht,St)){const Lt=_t?c.getAttrib(g,St):z5(c,g,St),Ht=$2(ht[St],at),qt=Pn(Lt)||Al(Lt);if(qt&&Pn(Ht))continue;if(ot&&qt&&!$.exact||(!ot||$.exact)&&!pR(Lt,ww(Ht,St)))return!1}}return!0},Cx=(c,g,$,et,ot)=>{const at=c.formatter.get($),ht=c.dom;if(at&&Nr(g))for(let _t=0;_t<at.length;_t++){const St=at[_t];if(bO(c.dom,g,St)&&M6(ht,g,St,"attributes",ot,et)&&M6(ht,g,St,"styles",ot,et)){const Lt=St.classes;if(Lt){for(let Ht=0;Ht<Lt.length;Ht++)if(!c.dom.hasClass(g,$2(Lt[Ht],et)))return}return St}}},mR=(c,g,$,et,ot)=>{if(et)return gR(c,et,g,$,ot);if(et=c.selection.getNode(),gR(c,et,g,$,ot))return!0;const at=c.selection.getStart();return!!(at!==et&&gR(c,at,g,$,ot))},V$=(c,g,$)=>{const et=[],ot={},at=c.selection.getStart();return c.dom.getParent(at,ht=>{for(let _t=0;_t<g.length;_t++){const St=g[_t];!ot[St]&&Cx(c,ht,St,$)&&(ot[St]=!0,et.push(St))}},c.dom.getRoot()),et},vO=(c,g)=>{const $=ot=>_i(ot,Qn.fromDom(c.getBody())),et=(ot,at)=>Cx(c,ot.dom,at)?Yt.some(at):Yt.none();return Yt.from(c.selection.getStart(!0)).bind(ot=>hR(Qn.fromDom(ot),at=>As(g,ht=>et(at,ht)),$)).getOrNull()},dY=(c,g)=>{const $=c.formatter.get(g),et=c.dom;if($&&c.selection.isEditable()){const ot=c.selection.getStart(),at=G2(et,ot);for(let ht=$.length-1;ht>=0;ht--){const _t=$[ht];if(!bv(_t))return!0;for(let St=at.length-1;St>=0;St--)if(et.is(at[St],_t.selector))return!0}}return!1},fY=(c,g,$)=>Hn($,(et,ot)=>{const at=CP(c,ot);return c.formatter.matchNode(g,ot,{},at)?et.concat([ot]):et},[]),yR=Cm,hY=(c,g)=>c.importNode(g,!0),W$=c=>{if(c){const g=new um(c,c);for(let $=g.current();$;$=g.next())if(dr($))return $}return null},_O=c=>{const g=Qn.fromTag("span");return Tp(g,{id:LT,"data-mce-bogus":"1","data-mce-type":"format-caret"}),c&&Up(g,Qn.fromText(yR)),g},pY=c=>{const g=W$(c);return g&&g.data.charAt(0)===yR&&g.deleteData(0,1),g},P6=(c,g,$)=>{const et=c.dom,ot=c.selection;if(EP(g))KE(c,!1,Qn.fromDom(g),$,!0);else{const at=ot.getRng(),ht=et.getParent(g,et.isBlock),_t=at.startContainer,St=at.startOffset,Lt=at.endContainer,Ht=at.endOffset,qt=pY(g);et.remove(g,!0),_t===qt&&St>0&&at.setStart(qt,St-1),Lt===qt&&Ht>0&&at.setEnd(qt,Ht-1),ht&&et.isEmpty(ht)&&T_(Qn.fromDom(ht)),ot.setRng(at)}},xO=(c,g,$)=>{const et=c.dom,ot=c.selection;if(g)P6(c,g,$);else if(g=D2(c.getBody(),ot.getStart()),!g)for(;g=et.get(LT);)P6(c,g,$)},gY=(c,g,$)=>{var et,ot;const at=c.dom,ht=at.getParent($,An(FE,c.schema));ht&&at.isEmpty(ht)?(et=$.parentNode)===null||et===void 0||et.replaceChild(g,$):(D3(Qn.fromDom($)),at.isEmpty($)?(ot=$.parentNode)===null||ot===void 0||ot.replaceChild(g,$):at.insertAfter(g,$))},O6=(c,g)=>(c.appendChild(g),g),vI=(c,g)=>{var $;const et=So(c,(at,ht)=>O6(at,ht.cloneNode(!1)),g),ot=($=et.ownerDocument)!==null&&$!==void 0?$:document;return O6(et,ot.createTextNode(yR))},mY=(c,g,$,et,ot,at)=>{const ht=c.formatter,_t=c.dom,St=zn(Zr(ht.get()),qt=>qt!==et&&!hs(qt,"removeformat")),Lt=fY(c,$,St);if(zn(Lt,qt=>!kP(c,qt,et)).length>0){const qt=$.cloneNode(!1);return _t.add(g,qt),ht.remove(et,ot,qt,at),_t.remove(qt),Yt.some(qt)}else return Yt.none()},q$=c=>FC(c,LC(c).replace(new RegExp(`${dm}$`)," ")),D6=(c,g)=>{const $=()=>{g!==null&&!c.dom.isEmpty(g)&&sv(Qn.fromDom(g)).each(et=>{gu(et)?q$(et):Hw(et,ot=>gu(ot)).each(ot=>{gu(ot)&&q$(ot)})})};c.once("input",et=>{et.data&&!L2(et.data)&&(et.isComposing?c.once("compositionend",()=>{$()}):$())})},yY=(c,g,$)=>{let et;const ot=c.selection,at=c.formatter.get(g);if(!at)return;const ht=ot.getRng();let _t=ht.startOffset;const Lt=ht.startContainer.nodeValue;et=D2(c.getBody(),ot.getStart());const Ht=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(Lt&&_t>0&&_t<Lt.length&&Ht.test(Lt.charAt(_t))&&Ht.test(Lt.charAt(_t-1))){const qt=ot.getBookmark();ht.collapse(!0);let Qt=Cw(c.dom,ht,at);Qt=ts(Qt),c.formatter.apply(g,$,Qt),ot.moveToBookmark(qt)}else{let qt=et?W$(et):null;(!et||(qt==null?void 0:qt.data)!==yR)&&(et=hY(c.getDoc(),_O(!0).dom),qt=et.firstChild,ht.insertNode(et),_t=1,D6(c,et)),c.formatter.apply(g,$,et),ot.setCursorLocation(qt,_t)}},Z$=(c,g,$,et)=>{const ot=c.dom,at=c.selection;let ht=!1;const _t=c.formatter.get(g);if(!_t)return;const St=at.getRng(),Lt=St.startContainer,Ht=St.startOffset;let qt=Lt;dr(Lt)&&(Ht!==Lt.data.length&&(ht=!0),qt=qt.parentNode);const Qt=[];let gn;for(;qt;){if(Cx(c,qt,g,$,et)){gn=qt;break}qt.nextSibling&&(ht=!0),Qt.push(qt),qt=qt.parentNode}if(gn)if(ht){const kn=at.getBookmark();St.collapse(!0);let yn=Cw(ot,St,_t,!0);yn=ts(yn),c.formatter.remove(g,$,yn,et),at.moveToBookmark(kn)}else{const kn=D2(c.getBody(),gn),yn=an(kn)?ot.getParents(gn.parentNode,_o,kn):[],Rn=_O(!1).dom;gY(c,Rn,kn??gn);const so=mY(c,Rn,gn,g,$,et),ho=vI([...Qt,...so.toArray(),...yn],Rn);kn&&P6(c,kn,an(kn)),at.setCursorLocation(ho,1),D6(c,Rn),ot.isEmpty(gn)&&ot.remove(gn)}},W1=(c,g,$)=>{const et=c.selection,ot=c.getBody();xO(c,null,$),(g===8||g===46)&&et.isCollapsed()&&et.getStart().innerHTML===yR&&xO(c,D2(ot,et.getStart()),!0),(g===37||g===39)&&xO(c,D2(ot,et.getStart()),!0)},bY=c=>dr(c)&&Nl(c.data,dm),K$=c=>{c.on("mouseup keydown",g=>{W1(c,g.keyCode,bY(c.selection.getRng().endContainer))})},wO=c=>{const g=_O(!1),$=vI(c,g.dom);return{caretContainer:g,caretPosition:Uo($,0)}},CO=(c,g)=>{const{caretContainer:$,caretPosition:et}=wO(g);return Su(Qn.fromDom(c),$),mu(Qn.fromDom(c)),et},Y$=(c,g)=>{const{caretContainer:$,caretPosition:et}=wO(g);return c.insertNode($.dom),et},N6=(c,g)=>{if(Wy(g.dom))return!1;const $=c.schema.getTextInlineElements();return Jr($,Sn(g))&&!Wy(g.dom)&&!T1(g.dom)},bR={},X$=$y(["pre"]),J$=(c,g)=>{bR[c]||(bR[c]=[]),bR[c].push(g)},Q$=(c,g)=>{Jr(bR,c)&&rn(bR[c],$=>{$(g)})};J$("pre",c=>{const g=c.selection.getRng(),$=ot=>at=>{const ht=at.previousSibling;return X$(ht)&&mn(ot,ht)},et=(ot,at)=>{const ht=Qn.fromDom(at),_t=Dv(ht).dom;mu(ht),Bv(Qn.fromDom(ot),[Qn.fromTag("br",_t),Qn.fromTag("br",_t),...Jp(ht)])};if(!g.collapsed){const ot=c.selection.getSelectedBlocks(),at=zn(zn(ot,X$),$(ot));rn(at,ht=>{et(ht.previousSibling,ht)})}});const e1=["fontWeight","fontStyle","color","fontSize","fontFamily"],vY=c=>$t(c.styles)&&wn(Zr(c.styles),g=>mn(e1,g)),_Y=c=>Jn(c,g=>zm(g)&&g.inline==="span"&&vY(g)),xY=(c,g)=>{const $=c.get(g);return Zt($)?_Y($):Yt.none()},kO=(c,g)=>Ey(g,Uo.fromRangeStart(c)).isNone(),eG=(c,g)=>L0(g,Uo.fromRangeEnd(c)).exists($=>!Jl($.getNode())||L0(g,$).isSome())===!1,wY=c=>g=>_y(g)&&c.isEditable(g),CY=c=>{const g=c.getSelectedBlocks(),$=c.getRng();if(c.isCollapsed())return[];if(g.length===1)return kO($,g[0])&&eG($,g[0])?g:[];{const et=_r(g).filter(ht=>kO($,ht)).toArray(),ot=fs(g).filter(ht=>eG($,ht)).toArray(),at=g.slice(1,-1);return et.concat(at).concat(ot)}},L6=c=>zn(CY(c),wY(c.dom)),z_=c=>zn(c.getSelectedBlocks(),wY(c.dom)),vR=cr.each,_I=c=>Nr(c)&&!Ay(c)&&!Wy(c)&&!T1(c),SO=(c,g)=>{for(let $=c;$;$=$[g]){if(dr($)&&_s($.data))return c;if(Nr($)&&!Ay($))return $}return c},tG=(c,g,$)=>{const et=mS(c),ot=By(g)&&c.dom.isEditable(g),at=By($)&&c.dom.isEditable($);if(ot&&at){const ht=SO(g,"previousSibling"),_t=SO($,"nextSibling");if(et.compare(ht,_t)){for(let St=ht.nextSibling;St&&St!==_t;){const Lt=St;St=St.nextSibling,ht.appendChild(Lt)}return c.dom.remove(_t),cr.each(cr.grep(_t.childNodes),St=>{ht.appendChild(St)}),ht}}return $},F6=(c,g,$,et)=>{var ot;if(et&&g.merge_siblings!==!1){const at=(ot=tG(c,F5(et),et))!==null&&ot!==void 0?ot:et;tG(c,at,F5(at,!0))}},kY=(c,g,$)=>{if(g.clear_child_styles){const et=g.links?"*:not(a)":"*";vR(c.select(et,$),ot=>{_I(ot)&&c.isEditable(ot)&&vR(g.styles,(at,ht)=>{c.setStyle(ot,ht,"")})})}},EO=(c,g,$)=>{vR(c.childNodes,et=>{_I(et)&&(g(et)&&$(et),et.hasChildNodes()&&EO(et,g,$))})},z6=(c,g)=>{g.nodeName==="SPAN"&&c.getAttribs(g).length===0&&c.remove(g,!0)},nG=(c,g)=>$=>!!($&&z5(c,$,g)),B6=(c,g,$)=>et=>{c.setStyle(et,g,$),et.getAttribute("style")===""&&et.removeAttribute("style"),z6(c,et)},nA=gv.generate([{keep:[]},{rename:["name"]},{removed:[]}]),oA=/^(src|href|style)$/,AO=cr.each,TO=WT,oG=c=>/^(TR|TH|TD)$/.test(c.nodeName),rG=(c,g,$)=>c.isChildOf(g,$)&&g!==$&&!c.isBlock($),sG=(c,g,$)=>{let et=g[$?"startContainer":"endContainer"],ot=g[$?"startOffset":"endOffset"];if(Nr(et)){const at=et.childNodes.length-1;!$&&ot&&ot--,et=et.childNodes[ot>at?at:ot]}return dr(et)&&$&&ot>=et.data.length&&(et=new um(et,c.getBody()).next()||et),dr(et)&&!$&&ot===0&&(et=new um(et,c.getBody()).prev()||et),et},iG=(c,g)=>{const $=g?"firstChild":"lastChild",et=c[$];return oG(c)&&et?c.nodeName==="TR"&&et[$]||et:c},$6=(c,g,$,et)=>{var ot;const at=c.create($,et);return(ot=g.parentNode)===null||ot===void 0||ot.insertBefore(at,g),at.appendChild(g),at},aG=(c,g,$,et,ot)=>{const at=Qn.fromDom(g),ht=Qn.fromDom(c.create(et,ot)),_t=$?f_(at):dC(at);return Bv(ht,_t),$?(Su(at,ht),E1(ht,at)):(ly(at,ht),Up(ht,at)),ht.dom},lG=(c,g)=>g.links&&c.nodeName==="A",cG=(c,g,$)=>{const et=g.parentNode;let ot;const at=c.dom,ht=c0(c);D_($)&&et===at.getRoot()&&(!$.list_block||!TO(g,$.list_block))&&rn(Ss(g.childNodes),_t=>{B2(c,ht,_t.nodeName.toLowerCase())?ot?ot.appendChild(_t):(ot=$6(at,_t,ht),at.setAttribs(ot,dw(c))):ot=null}),!(i8($)&&!TO($.inline,g))&&at.remove(g,!0)},IO=(c,g,$)=>ao(c)?{name:g,value:null}:{name:c,value:$2(g,$)},_S=(c,g)=>{c.getAttrib(g,"style")===""&&(g.removeAttribute("style"),g.removeAttribute("data-mce-style"))},uG=(c,g,$,et,ot)=>{let at=!1;AO($.styles,(ht,_t)=>{const{name:St,value:Lt}=IO(_t,ht,et),Ht=ww(Lt,St);($.remove_similar||Nt(Lt)||!Nr(ot)||TO(z5(c,ot,St),Ht))&&c.setStyle(g,St,""),at=!0}),at&&_S(c,g)},SY=(c,g,$)=>{g==="removeformat"?rn(z_(c.selection),et=>{rn(e1,ot=>c.dom.setStyle(et,ot,"")),_S(c.dom,et)}):xY(c.formatter,g).each(et=>{rn(z_(c.selection),ot=>uG(c.dom,ot,et,$,null))})},_R=(c,g,$,et,ot)=>{const at=c.dom,ht=mS(c),_t=c.schema;if(zm(g)&&Nm(_t,g.inline)&&I1(_t,et)&&et.parentElement===c.getBody())return cG(c,et,g),nA.removed();if(!g.ceFalseOverride&&et&&at.getContentEditableParent(et)==="false"||et&&!bO(at,et,g)&&!lG(et,g))return nA.keep();const St=et,Lt=g.preserve_attributes;if(zm(g)&&g.remove==="all"&&Zt(Lt)){const Ht=zn(at.getAttribs(St),qt=>mn(Lt,qt.name.toLowerCase()));if(at.removeAllAttribs(St),rn(Ht,qt=>at.setAttrib(St,qt.name,qt.value)),Ht.length>0)return nA.rename("span")}if(g.remove!=="all"){uG(at,St,g,$,ot),AO(g.attributes,(qt,Qt)=>{const{name:gn,value:kn}=IO(Qt,qt,$);if(g.remove_similar||Nt(kn)||!Nr(ot)||TO(at.getAttrib(ot,gn),kn)){if(gn==="class"){const yn=at.getAttrib(St,gn);if(yn){let Rn="";if(rn(yn.split(/\s+/),so=>{/mce\-\w+/.test(so)&&(Rn+=(Rn?" ":"")+so)}),Rn){at.setAttrib(St,gn,Rn);return}}}if(oA.test(gn)&&St.removeAttribute("data-mce-"+gn),gn==="style"&&$y(["li"])(St)&&at.getStyle(St,"list-style-type")==="none"){St.removeAttribute(gn),at.setStyle(St,"list-style-type","none");return}gn==="class"&&St.removeAttribute("className"),St.removeAttribute(gn)}}),AO(g.classes,qt=>{qt=$2(qt,$),(!Nr(ot)||at.hasClass(ot,qt))&&at.removeClass(St,qt)});const Ht=at.getAttribs(St);for(let qt=0;qt<Ht.length;qt++){const Qt=Ht[qt].nodeName;if(!ht.isAttributeInternal(Qt))return nA.keep()}}return g.remove!=="none"?(cG(c,St,g),nA.removed()):nA.keep()},dG=(c,g,$,et,ot)=>{let at;return g.parentNode&&rn(G2(c.dom,g.parentNode).reverse(),ht=>{if(!at&&Nr(ht)&&ht.id!=="_start"&&ht.id!=="_end"){const _t=Cx(c,ht,$,et,ot);_t&&_t.split!==!1&&(at=ht)}}),at},fG=(c,g,$,et)=>_R(c,g,$,et,et).fold(ln(et),ot=>(c.dom.createFragment().appendChild(et),c.dom.rename(et,ot)),ln(null)),EY=(c,g,$,et,ot,at,ht,_t)=>{var St,Lt;let Ht,qt;const Qt=c.dom;if($){const gn=$.parentNode;for(let kn=et.parentNode;kn&&kn!==gn;kn=kn.parentNode){let yn=Qt.clone(kn,!1);for(let Rn=0;Rn<g.length&&(yn=fG(c,g[Rn],_t,yn),yn!==null);Rn++);yn&&(Ht&&yn.appendChild(Ht),qt||(qt=yn),Ht=yn)}(!ht.mixed||!Qt.isBlock($))&&(et=(St=Qt.split($,et))!==null&&St!==void 0?St:et),Ht&&qt&&((Lt=ot.parentNode)===null||Lt===void 0||Lt.insertBefore(Ht,ot),qt.appendChild(ot),zm(ht)&&F6(c,ht,_t,Ht))}return et},hG=(c,g,$,et,ot)=>{const at=c.formatter.get(g),ht=at[0],_t=c.dom,St=c.selection,Lt=yn=>{const Rn=dG(c,yn,g,$,ot);return EY(c,at,Rn,yn,yn,!0,ht,$)},Ht=yn=>Ay(yn)&&Nr(yn)&&(yn.id==="_start"||yn.id==="_end"),qt=yn=>wn(at,Rn=>kx(c,Rn,$,yn,yn)),Qt=yn=>{const Rn=Ss(yn.childNodes),ho=qt(yn)||wn(at,or=>bO(_t,yn,or)),xo=yn.parentNode;if(!ho&&an(xo)&&$1(ht)&&qt(xo),ht.deep&&Rn.length)for(let or=0;or<Rn.length;or++)Qt(Rn[or]);rn(["underline","line-through","overline"],or=>{Nr(yn)&&c.dom.getStyle(yn,"text-decoration")===or&&yn.parentNode&&B5(_t,yn.parentNode)===or&&kx(c,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:or}},void 0,yn)})},gn=yn=>{const Rn=_t.get(yn?"_start":"_end");if(Rn){let so=Rn[yn?"firstChild":"lastChild"];return Ht(so)&&(so=so[yn?"firstChild":"lastChild"]),dr(so)&&so.data.length===0&&(so=yn?Rn.previousSibling||Rn.nextSibling:Rn.nextSibling||Rn.previousSibling),_t.remove(Rn,!0),so}else return null},kn=yn=>{let Rn,so,ho=Cw(_t,yn,at,yn.collapsed);if(ht.split){if(ho=ts(ho),Rn=sG(c,ho,!0),so=sG(c,ho),Rn!==so){if(Rn=iG(Rn,!0),so=iG(so,!1),rG(_t,Rn,so)){const To=Yt.from(Rn.firstChild).getOr(Rn);Lt(aG(_t,To,!0,"span",{id:"_start","data-mce-type":"bookmark"})),gn(!0);return}if(rG(_t,so,Rn)){const To=Yt.from(so.lastChild).getOr(so);Lt(aG(_t,To,!1,"span",{id:"_end","data-mce-type":"bookmark"})),gn(!1);return}Rn=$6(_t,Rn,"span",{id:"_start","data-mce-type":"bookmark"}),so=$6(_t,so,"span",{id:"_end","data-mce-type":"bookmark"});const xo=_t.createRng();xo.setStartAfter(Rn),xo.setEndBefore(so),sS(_t,xo,To=>{rn(To,or=>{!Ay(or)&&!Ay(or.parentNode)&&Lt(or)})}),Lt(Rn),Lt(so),Rn=gn(!0),so=gn()}else Rn=so=Lt(Rn);ho.startContainer=Rn.parentNode?Rn.parentNode:Rn,ho.startOffset=_t.nodeIndex(Rn),ho.endContainer=so.parentNode?so.parentNode:so,ho.endOffset=_t.nodeIndex(so)+1}sS(_t,ho,xo=>{rn(xo,Qt)})};if(et){if(z2(et)){const yn=_t.createRng();yn.setStartBefore(et),yn.setEndAfter(et),kn(yn)}else kn(et);GE(c,g,et,$);return}!St.isCollapsed()||!zm(ht)||tS(c).length?(xw(c,()=>nS(c,kn),yn=>zm(ht)&&mR(c,g,$,yn)),c.nodeChanged()):Z$(c,g,$,ot),SY(c,g,$),GE(c,g,et,$)},pG=(c,g,$,et,ot)=>{(et||c.selection.isEditable())&&hG(c,g,$,et,ot)},kx=(c,g,$,et,ot)=>_R(c,g,$,et,ot).fold(On,at=>(c.dom.rename(et,at),!0),_o),G6=cr.each,gG=(c,g,$,et)=>{const ot=at=>{if(By(at)&&Nr(at.parentNode)&&c.isEditable(at)){const ht=B5(c,at.parentNode);c.getStyle(at,"color")&&ht?c.setStyle(at,"text-decoration",ht):c.getStyle(at,"text-decoration")===ht&&c.setStyle(at,"text-decoration",null)}};g.styles&&(g.styles.color||g.styles.textDecoration)&&(cr.walk(et,ot,"childNodes"),ot(et))},mG=(c,g,$,et)=>{if(g.styles&&g.styles.backgroundColor){const ot=nG(c,"fontSize");EO(et,at=>ot(at)&&c.isEditable(at),B6(c,"backgroundColor",$2(g.styles.backgroundColor,$)))}},RO=(c,g,$,et)=>{if(zm(g)&&(g.inline==="sub"||g.inline==="sup")){const ot=nG(c,"fontSize");EO(et,ht=>ot(ht)&&c.isEditable(ht),B6(c,"fontSize",""));const at=zn(c.select(g.inline==="sup"?"sub":"sup",et),c.isEditable);c.remove(at,!0)}},yG=(c,g,$,et)=>{G6(g,ot=>{zm(ot)&&G6(c.dom.select(ot.inline,et),at=>{_I(at)&&kx(c,ot,$,at,ot.exact?at:null)}),kY(c.dom,ot,et)})},AY=(c,g,$,et,ot)=>{const at=ot.parentNode;Cx(c,at,$,et)&&kx(c,g,et,ot)||g.merge_with_parents&&at&&c.dom.getParent(at,ht=>Cx(c,ht,$,et)?(kx(c,g,et,ot),!0):!1)},xR=cr.each,TY=(c,g,$,et)=>{if(L4(c)&&zm(g)&&$.parentNode){const ot=b3(c.schema),at=UA(Qn.fromDom($),ht=>Wy(ht.dom));return _a(ot,et)&&hm(c.schema,$.parentNode,{skipBogus:!1,includeZwsp:!0})&&!at}else return!1},bG=(c,g,$,et)=>{if(xR($.styles,(ot,at)=>{c.setStyle(g,at,$2(ot,et))}),$.styles){const ot=c.getAttrib(g,"style");ot&&c.setAttrib(g,"data-mce-style",ot)}},MO=(c,g,$,et)=>{const ot=c.formatter.get(g),at=ot[0],ht=!et&&c.selection.isCollapsed(),_t=c.dom,St=c.selection,Lt=(kn,yn=at)=>{Vt(yn.onformat)&&yn.onformat(kn,yn,$,et),bG(_t,kn,yn,$),xR(yn.attributes,(Rn,so)=>{_t.setAttrib(kn,so,$2(Rn,$))}),xR(yn.classes,Rn=>{const so=$2(Rn,$);_t.hasClass(kn,so)||_t.addClass(kn,so)})},Ht=(kn,yn)=>{let Rn=!1;return xR(kn,so=>bv(so)?_t.getContentEditable(yn)==="false"&&!so.ceFalseOverride||an(so.collapsed)&&so.collapsed!==ht?!0:_t.is(yn,so.selector)&&!Wy(yn)?(Lt(yn,so),Rn=!0,!1):!0:!1),Rn},qt=kn=>{if(Et(kn)){const yn=_t.create(kn);return Lt(yn),yn}else return null},Qt=(kn,yn,Rn)=>{const so=[];let ho=!0;const xo=at.inline||at.block,To=qt(xo),or=Zo=>SP(at)&&Cx(c,Zo,g,$),mr=(Zo,Lo,ir)=>{const Gr=qT(at)&&FE(c.schema,Zo)&&B2(c,Lo,xo);return ir&&Gr},$r=(Zo,Lo,ir,Gr)=>{const gs=Zo.nodeName.toLowerCase(),Cl=B2(c,xo,gs)&&B2(c,Lo,xo),Sl=!Rn&&dr(Zo)&&lE(Zo.data),au=Wy(Zo),Cu=!zm(at)||!kn.isBlock(Zo);return(ir||Gr)&&Cl&&!Sl&&!au&&Cu};sS(kn,yn,Zo=>{let Lo;const ir=Gr=>{let gs=!1,Cl=ho,Sl=!1;const au=Gr.parentNode,Cu=au.nodeName.toLowerCase(),jp=kn.getContentEditable(Gr);an(jp)&&(Cl=ho,ho=jp==="true",gs=!0,Sl=s8(c,Gr));const k0=ho&&!gs;if(Jl(Gr)&&!TY(c,at,Gr,Cu)){Lo=null,D_(at)&&kn.remove(Gr);return}if(or(Gr)){Lo=null;return}if(mr(Gr,Cu,k0)){const qp=kn.rename(Gr,xo);Lt(qp),so.push(qp),Lo=null;return}if(bv(at)){let qp=Ht(ot,Gr);if(!qp&&an(au)&&$1(at)&&(qp=Ht(ot,au)),!zm(at)||qp){Lo=null;return}}an(To)&&$r(Gr,Cu,k0,Sl)?(Lo||(Lo=kn.clone(To,!1),au.insertBefore(Lo,Gr),so.push(Lo)),Sl&&gs&&(ho=Cl),Lo.appendChild(Gr)):(Lo=null,rn(Ss(Gr.childNodes),ir),gs&&(ho=Cl),Lo=null)};rn(Zo,ir)}),at.links===!0&&rn(so,Zo=>{const Lo=ir=>{ir.nodeName==="A"&&Lt(ir,at),rn(Ss(ir.childNodes),Lo)};Lo(Zo)}),rn(so,Zo=>{const Lo=gs=>{let Cl=0;return rn(gs.childNodes,Sl=>{!VT(Sl)&&!Ay(Sl)&&Cl++}),Cl},ir=gs=>Jn(gs.childNodes,Ul).filter(Sl=>kn.getContentEditable(Sl)!=="false"&&bO(kn,Sl,at)).map(Sl=>{const au=kn.clone(Sl,!1);return Lt(au),kn.replace(au,gs,!0),kn.remove(Sl,!0),au}).getOr(gs),Gr=Lo(Zo);if((so.length>1||!kn.isBlock(Zo))&&Gr===0){kn.remove(Zo,!0);return}(zm(at)||D_(at)&&at.wrapper)&&(!at.exact&&Gr===1&&(Zo=ir(Zo)),yG(c,ot,$,Zo),AY(c,at,g,$,Zo),mG(kn,at,$,Zo),gG(kn,at,$,Zo),RO(kn,at,$,Zo),F6(c,at,$,Zo))})},gn=z2(et)?et:St.getNode();if(_t.getContentEditable(gn)==="false"&&!s8(c,gn)){et=gn,Ht(ot,et),Zy(c,g,et,$);return}if(at){if(et)if(z2(et)){if(!Ht(ot,et)){const kn=_t.createRng();kn.setStartBefore(et),kn.setEndAfter(et),Qt(_t,Cw(_t,kn,ot),!0)}}else Qt(_t,et,!0);else!ht||!zm(at)||tS(c).length?(St.setRng(pO(St.getRng())),xw(c,()=>{nS(c,(kn,yn)=>{const Rn=yn?kn:Cw(_t,kn,ot);Qt(_t,Rn,!1)})},_o),c.nodeChanged()):yY(c,g,$),xY(c.formatter,g).each(kn=>{rn(L6(c.selection),yn=>bG(_t,yn,kn,$))});Q$(g,c)}Zy(c,g,et,$)},j6=(c,g,$,et)=>{(et||c.selection.isEditable())&&MO(c,g,$,et)},PO=c=>Jr(c,"vars"),IY=(c,g)=>{c.set({}),g.on("NodeChange",$=>{H6(g,$.element,c.get())}),g.on("FormatApply FormatRemove",$=>{const et=Yt.from($.node).map(ot=>z2(ot)?ot:ot.startContainer).bind(ot=>Nr(ot)?Yt.some(ot):Yt.from(ot.parentElement)).getOrThunk(()=>vG(g));H6(g,et,c.get())})},vG=c=>c.selection.getStart(),U6=(c,g,$,et,ot)=>Tn(g,_t=>{const St=c.formatter.matchNode(_t,$,ot??{},et);return!dn(St)},_t=>H$(c,_t,$)?!0:et?!1:an(c.formatter.matchNode(_t,$,ot,!0))),OO=(c,g)=>{const $=g??vG(c);return zn(G2(c.dom,$),et=>Nr(et)&&!T1(et))},H6=(c,g,$)=>{const et=OO(c,g);tr($,(ot,at)=>{const ht=_t=>{const St=U6(c,et,at,_t.similar,PO(_t)?_t.vars:void 0),Lt=St.isSome();if(_t.state.get()!==Lt){_t.state.set(Lt);const Ht=St.getOr(g);PO(_t)?_t.callback(Lt,{node:Ht,format:at,parents:et}):rn(_t.callbacks,qt=>qt(Lt,{node:Ht,format:at,parents:et}))}};rn([ot.withSimilar,ot.withoutSimilar],ht),rn(ot.withVars,ht)})},RY=(c,g,$,et,ot,at)=>{const ht=g.get();rn($.split(","),_t=>{const St=ba(ht,_t).getOrThunk(()=>{const Ht={withSimilar:{state:Eu(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Eu(!1),similar:!1,callbacks:[]},withVars:[]};return ht[_t]=Ht,Ht}),Lt=()=>{const Ht=OO(c);return U6(c,Ht,_t,ot,at).isSome()};if(dn(at)){const Ht=ot?St.withSimilar:St.withoutSimilar;Ht.callbacks.push(et),Ht.callbacks.length===1&&Ht.state.set(Lt())}else St.withVars.push({state:Eu(Lt()),similar:ot,vars:at,callback:et})}),g.set(ht)},MY=(c,g,$)=>{const et=c.get();rn(g.split(","),ot=>ba(et,ot).each(at=>{et[ot]={withSimilar:{...at.withSimilar,callbacks:zn(at.withSimilar.callbacks,ht=>ht!==$)},withoutSimilar:{...at.withoutSimilar,callbacks:zn(at.withoutSimilar.callbacks,ht=>ht!==$)},withVars:zn(at.withVars,ht=>ht.callback!==$)}})),c.set(et)},PY=(c,g,$,et,ot,at)=>(RY(c,g,$,et,ot,at),{unbind:()=>MY(g,$,et)}),DO=(c,g,$,et)=>{const ot=c.formatter.get(g);ot&&(mR(c,g,$,et)&&(!("toggle"in ot[0])||ot[0].toggle)?pG(c,g,$,et):j6(c,g,$,et))},Tw=cr.explode,_G=()=>{const c={};return{addFilter:(ot,at)=>{rn(Tw(ot),ht=>{Jr(c,ht)||(c[ht]={name:ht,callbacks:[]}),c[ht].callbacks.push(at)})},getFilters:()=>iu(c),removeFilter:(ot,at)=>{rn(Tw(ot),ht=>{if(Jr(c,ht))if(an(at)){const _t=c[ht],St=zn(_t.callbacks,Lt=>Lt!==at);St.length>0?_t.callbacks=St:delete c[ht]}else delete c[ht]})}}},V6=(c,g)=>{rn(g,$=>{c.attr($,null)})},om=(c,g,$)=>{c.addNodeFilter("font",et=>{rn(et,ot=>{const at=g.parse(ot.attr("style")),ht=ot.attr("color"),_t=ot.attr("face"),St=ot.attr("size");ht&&(at.color=ht),_t&&(at["font-family"]=_t),St&&wp(St).each(Lt=>{at["font-size"]=$[Lt-1]}),ot.name="span",ot.attr("style",g.serialize(at)),V6(ot,["color","face","size"])})})},W6=(c,g,$)=>{c.addNodeFilter("strike",et=>{const ot=g.type!=="html4";rn(et,at=>{if(ot)at.name="s";else{const ht=$.parse(at.attr("style"));ht["text-decoration"]="line-through",at.name="span",at.attr("style",$.serialize(ht))}})})},q6=(c,g,$)=>{var et;const ot=ew();g.convert_fonts_to_spans&&om(c,ot,cr.explode((et=g.font_size_legacy_values)!==null&&et!==void 0?et:"")),W6(c,$,ot)},X2=(c,g,$)=>{g.inline_styles&&q6(c,g,$)},xG=c=>fetch(c).then(g=>g.ok?g.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${c} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),wG=c=>{const g=/([a-z0-9+\/=\s]+)/i.exec(c);return g?g[1]:""},rA=c=>{const[g,...$]=c.split(","),et=$.join(","),ot=/data:([^/]+\/[^;]+)(;.+)?/.exec(g);if(ot){const at=ot[2]===";base64",ht=at?wG(et):decodeURIComponent(et);return Yt.some({type:ot[1],data:ht,base64Encoded:at})}else return Yt.none()},CG=(c,g,$=!0)=>{let et=g;if($)try{et=atob(g)}catch{return Yt.none()}const ot=new Uint8Array(et.length);for(let at=0;at<ot.length;at++)ot[at]=et.charCodeAt(at);return Yt.some(new Blob([ot],{type:c}))},OY=c=>new Promise((g,$)=>{rA(c).bind(({type:et,data:ot,base64Encoded:at})=>CG(et,ot,at)).fold(()=>$("Invalid data URI"),g)}),xI=c=>ks(c,"blob:")?xG(c):ks(c,"data:")?OY(c):Promise.reject("Unknown URI format"),kG=c=>new Promise((g,$)=>{const et=new FileReader;et.onloadend=()=>{g(et.result)},et.onerror=()=>{var ot;$((ot=et.error)===null||ot===void 0?void 0:ot.message)},et.readAsDataURL(c)});let sA=0;const DY=c=>"blobid"+sA++,J2=(c,g,$)=>rA(c).bind(({data:et,type:ot,base64Encoded:at})=>{if(g&&!at)return Yt.none();{const ht=at?et:btoa(et);return $(ht,ot)}}),SG=(c,g,$)=>{const et=c.create(DY(),g,$);return c.add(et),et},n1=(c,g,$=!1)=>J2(g,$,(et,ot)=>Yt.from(c.getByData(et,ot)).orThunk(()=>CG(ot,et).map(at=>SG(c,at,et)))),wR=(c,g)=>{const $=()=>Promise.reject("Invalid data URI");if(ks(g,"blob:")){const et=c.getByUri(g);return an(et)?Promise.resolve(et):xI(g).then(ot=>kG(ot).then(at=>J2(at,!1,ht=>Yt.some(SG(c,ot,ht))).getOrThunk($)))}else return ks(g,"data:")?n1(c,g).fold($,et=>Promise.resolve(et)):Promise.reject("Unknown image data format")},Z6=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,K6=c=>Yt.from(c.match(Z6)).bind(g=>as(g,1)).map(g=>ks(g,"www.")?g.substring(4):g),EG=(c,g)=>{Yt.from(c.attr("src")).bind(K6).forall($=>!mn(g,$))&&c.attr("sandbox","")},wI=(c,g)=>ks(c,`${g}/`),NY=c=>dn(c)?"iframe":wI(c,"image")?"img":wI(c,"video")?"video":wI(c,"audio")?"audio":"iframe",B_=({type:c,src:g,width:$,height:et}={},ot,at)=>{const ht=NY(c),_t=new Iy(ht,1);return _t.attr(ht==="audio"?{src:g}:{src:g,width:$,height:et}),(ht==="audio"||ht==="video")&&_t.attr("controls",""),ht==="iframe"&&ot&&EG(_t,at),_t},NO=c=>an(c.attr("data-mce-bogus")),AG=c=>c.attr("src")===Kr.transparentSrc||an(c.attr("data-mce-placeholder")),Y6=(c,g)=>{const{blob_cache:$}=g;if($){const et=ot=>{const at=ot.attr("src");AG(ot)||NO(ot)||Pn(at)||n1($,at,!0).each(ht=>{ot.attr("src",ht.blobUri())})};c.addAttributeFilter("src",ot=>rn(ot,et))}},X6=(c,g)=>{var $,et;const ot=c.schema;c.addAttributeFilter("href",St=>{let Lt=St.length;const Ht=Qt=>Qt.split(" ").filter(kn=>kn.length>0).concat(["noopener"]).sort().join(" "),qt=Qt=>{const gn=Qt?cr.trim(Qt):"";return/\b(noopener)\b/g.test(gn)?gn:Ht(gn)};if(!g.allow_unsafe_link_target)for(;Lt--;){const Qt=St[Lt];Qt.name==="a"&&Qt.attr("target")==="_blank"&&Qt.attr("rel",qt(Qt.attr("rel")))}}),g.allow_html_in_named_anchor||c.addAttributeFilter("id,name",St=>{let Lt=St.length,Ht,qt,Qt,gn;for(;Lt--;)if(gn=St[Lt],gn.name==="a"&&gn.firstChild&&!gn.attr("href"))for(Qt=gn.parent,Ht=gn.lastChild;Ht&&Qt;)qt=Ht.prev,Qt.insert(Ht,gn),Ht=qt}),g.fix_list_elements&&c.addNodeFilter("ul,ol",St=>{let Lt=St.length,Ht,qt;for(;Lt--;)if(Ht=St[Lt],qt=Ht.parent,qt&&(qt.name==="ul"||qt.name==="ol"))if(Ht.prev&&Ht.prev.name==="li")Ht.prev.append(Ht);else{const Qt=new Iy("li",1);Qt.attr("style","list-style-type: none"),Ht.wrap(Qt)}});const at=ot.getValidClasses();g.validate&&at&&c.addAttributeFilter("class",St=>{var Lt;let Ht=St.length;for(;Ht--;){const qt=St[Ht],Qt=(Lt=qt.attr("class"))!==null&&Lt!==void 0?Lt:"",gn=cr.explode(Qt," ");let kn="";for(let yn=0;yn<gn.length;yn++){const Rn=gn[yn];let so=!1,ho=at["*"];ho&&ho[Rn]&&(so=!0),ho=at[qt.name],!so&&ho&&ho[Rn]&&(so=!0),so&&(kn&&(kn+=" "),kn+=Rn)}kn.length||(kn=null),qt.attr("class",kn)}}),Y6(c,g);const ht=($=g.sandbox_iframes)!==null&&$!==void 0?$:!1,_t=_l((et=g.sandbox_iframes_exclusions)!==null&&et!==void 0?et:[]);g.convert_unsafe_embeds&&c.addNodeFilter("object,embed",St=>rn(St,Lt=>{Lt.replace(B_({type:Lt.attr("type"),src:Lt.name==="object"?Lt.attr("data"):Lt.attr("src"),width:Lt.attr("width"),height:Lt.attr("height")},ht,_t))})),ht&&c.addNodeFilter("iframe",St=>rn(St,Lt=>EG(Lt,_t)))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:xS,setPrototypeOf:LO,isFrozen:LY,getPrototypeOf:TG,getOwnPropertyDescriptor:FY}=Object;let{freeze:kv,seal:$_,create:IG}=Object,{apply:iA,construct:J6}=typeof Reflect<"u"&&Reflect;kv||(kv=function(g){return g}),$_||($_=function(g){return g}),iA||(iA=function(g,$,et){return g.apply($,et)}),J6||(J6=function(g,$){return new g(...$)});const CR=q1(Array.prototype.forEach),FO=q1(Array.prototype.pop),kR=q1(Array.prototype.push),SR=q1(String.prototype.toLowerCase),zO=q1(String.prototype.toString),RG=q1(String.prototype.match),ER=q1(String.prototype.replace),zY=q1(String.prototype.indexOf),BY=q1(String.prototype.trim),Sx=q1(Object.prototype.hasOwnProperty),Sv=q1(RegExp.prototype.test),AR=$Y(TypeError);function q1(c){return function(g){for(var $=arguments.length,et=new Array($>1?$-1:0),ot=1;ot<$;ot++)et[ot-1]=arguments[ot];return iA(c,g,et)}}function $Y(c){return function(){for(var g=arguments.length,$=new Array(g),et=0;et<g;et++)$[et]=arguments[et];return J6(c,$)}}function Xu(c,g){let $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:SR;LO&&LO(c,null);let et=g.length;for(;et--;){let ot=g[et];if(typeof ot=="string"){const at=$(ot);at!==ot&&(LY(g)||(g[et]=at),ot=at)}c[ot]=!0}return c}function GY(c){for(let g=0;g<c.length;g++)Sx(c,g)||(c[g]=null);return c}function aA(c){const g=IG(null);for(const[$,et]of xS(c))Sx(c,$)&&(Array.isArray(et)?g[$]=GY(et):et&&typeof et=="object"&&et.constructor===Object?g[$]=aA(et):g[$]=et);return g}function TR(c,g){for(;c!==null;){const et=FY(c,g);if(et){if(et.get)return q1(et.get);if(typeof et.value=="function")return q1(et.value)}c=TG(c)}function $(){return null}return $}const Q6=kv(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),eF=kv(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),wS=kv(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),jY=kv(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),tF=kv(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),UY=kv(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),MG=kv(["#text"]),nF=kv(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),oF=kv(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),PG=kv(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),BO=kv(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),HY=$_(/\{\{[\w\W]*|[\w\W]*\}\}/gm),VY=$_(/<%[\w\W]*|[\w\W]*%>/gm),WY=$_(/\${[\w\W]*}/gm),qY=$_(/^data-[\-\w.\u00B7-\uFFFF]/),ZY=$_(/^aria-[\-\w]+$/),OG=$_(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),KY=$_(/^(?:\w+script|data):/i),rF=$_(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),sF=$_(/^html$/i),Cie=$_(/^[a-z][.\w]*(-[.\w]+)+$/i);var CI=Object.freeze({__proto__:null,MUSTACHE_EXPR:HY,ERB_EXPR:VY,TMPLIT_EXPR:WY,DATA_ATTR:qY,ARIA_ATTR:ZY,IS_ALLOWED_URI:OG,IS_SCRIPT_OR_DATA:KY,ATTR_WHITESPACE:rF,DOCTYPE_NAME:sF,CUSTOM_ELEMENT:Cie});const IR={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},kie=function(){return typeof window>"u"?null:window},Sie=function(g,$){if(typeof g!="object"||typeof g.createPolicy!="function")return null;let et=null;const ot="data-tt-policy-suffix";$&&$.hasAttribute(ot)&&(et=$.getAttribute(ot));const at="dompurify"+(et?"#"+et:"");try{return g.createPolicy(at,{createHTML(ht){return ht},createScriptURL(ht){return ht}})}catch{return console.warn("TrustedTypes policy "+at+" could not be created."),null}};function YY(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kie();const g=Dl=>YY(Dl);if(g.version="3.1.7",g.removed=[],!c||!c.document||c.document.nodeType!==IR.document)return g.isSupported=!1,g;let{document:$}=c;const et=$,ot=et.currentScript,{DocumentFragment:at,HTMLTemplateElement:ht,Node:_t,Element:St,NodeFilter:Lt,NamedNodeMap:Ht=c.NamedNodeMap||c.MozNamedAttrMap,HTMLFormElement:qt,DOMParser:Qt,trustedTypes:gn}=c,kn=St.prototype,yn=TR(kn,"cloneNode"),Rn=TR(kn,"remove"),so=TR(kn,"nextSibling"),ho=TR(kn,"childNodes"),xo=TR(kn,"parentNode");if(typeof ht=="function"){const Dl=$.createElement("template");Dl.content&&Dl.content.ownerDocument&&($=Dl.content.ownerDocument)}let To,or="";const{implementation:mr,createNodeIterator:$r,createDocumentFragment:Zo,getElementsByTagName:Lo}=$,{importNode:ir}=et;let Gr={};g.isSupported=typeof xS=="function"&&typeof xo=="function"&&mr&&mr.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:gs,ERB_EXPR:Cl,TMPLIT_EXPR:Sl,DATA_ATTR:au,ARIA_ATTR:Cu,IS_SCRIPT_OR_DATA:jp,ATTR_WHITESPACE:k0,CUSTOM_ELEMENT:qp}=CI;let{IS_ALLOWED_URI:Er}=CI,ds=null;const _c=Xu({},[...Q6,...eF,...wS,...tF,...MG]);let Lr=null;const Ts=Xu({},[...nF,...oF,...PG,...BO]);let Is=Object.seal(IG(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Mr=null,El=null,Ol=!0,vm=!0,Lu=!1,S0=!0,Qy=!1,Dx=!0,oy=!1,l1=!1,o_=!1,B0=!1,_b=!1,us=!1,Hl=!0,Pp=!1;const _m="user-content-";let Um=!0,xm=!1,_p={},Ep=null;const Oy=Xu({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let r_=null;const Nx=Xu({},["audio","video","img","source","image","track"]);let V_=null;const NA=Xu({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),BS="http://www.w3.org/1998/Math/MathML",sC="http://www.w3.org/2000/svg",Tv="http://www.w3.org/1999/xhtml";let iC=Tv,i3=!1,LA=null;const DN=Xu({},[BS,sC,Tv],zO);let FA=null;const Fz=["application/xhtml+xml","text/html"],PZ="text/html";let $0=null,s_=null;const NN=$.createElement("form"),No=function(Fo){return Fo instanceof RegExp||Fo instanceof Function},Do=function(){let Fo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(s_&&s_===Fo)){if((!Fo||typeof Fo!="object")&&(Fo={}),Fo=aA(Fo),FA=Fz.indexOf(Fo.PARSER_MEDIA_TYPE)===-1?PZ:Fo.PARSER_MEDIA_TYPE,$0=FA==="application/xhtml+xml"?zO:SR,ds=Sx(Fo,"ALLOWED_TAGS")?Xu({},Fo.ALLOWED_TAGS,$0):_c,Lr=Sx(Fo,"ALLOWED_ATTR")?Xu({},Fo.ALLOWED_ATTR,$0):Ts,LA=Sx(Fo,"ALLOWED_NAMESPACES")?Xu({},Fo.ALLOWED_NAMESPACES,zO):DN,V_=Sx(Fo,"ADD_URI_SAFE_ATTR")?Xu(aA(NA),Fo.ADD_URI_SAFE_ATTR,$0):NA,r_=Sx(Fo,"ADD_DATA_URI_TAGS")?Xu(aA(Nx),Fo.ADD_DATA_URI_TAGS,$0):Nx,Ep=Sx(Fo,"FORBID_CONTENTS")?Xu({},Fo.FORBID_CONTENTS,$0):Oy,Mr=Sx(Fo,"FORBID_TAGS")?Xu({},Fo.FORBID_TAGS,$0):{},El=Sx(Fo,"FORBID_ATTR")?Xu({},Fo.FORBID_ATTR,$0):{},_p=Sx(Fo,"USE_PROFILES")?Fo.USE_PROFILES:!1,Ol=Fo.ALLOW_ARIA_ATTR!==!1,vm=Fo.ALLOW_DATA_ATTR!==!1,Lu=Fo.ALLOW_UNKNOWN_PROTOCOLS||!1,S0=Fo.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Qy=Fo.SAFE_FOR_TEMPLATES||!1,Dx=Fo.SAFE_FOR_XML!==!1,oy=Fo.WHOLE_DOCUMENT||!1,B0=Fo.RETURN_DOM||!1,_b=Fo.RETURN_DOM_FRAGMENT||!1,us=Fo.RETURN_TRUSTED_TYPE||!1,o_=Fo.FORCE_BODY||!1,Hl=Fo.SANITIZE_DOM!==!1,Pp=Fo.SANITIZE_NAMED_PROPS||!1,Um=Fo.KEEP_CONTENT!==!1,xm=Fo.IN_PLACE||!1,Er=Fo.ALLOWED_URI_REGEXP||OG,iC=Fo.NAMESPACE||Tv,Is=Fo.CUSTOM_ELEMENT_HANDLING||{},Fo.CUSTOM_ELEMENT_HANDLING&&No(Fo.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Is.tagNameCheck=Fo.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Fo.CUSTOM_ELEMENT_HANDLING&&No(Fo.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Is.attributeNameCheck=Fo.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Fo.CUSTOM_ELEMENT_HANDLING&&typeof Fo.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Is.allowCustomizedBuiltInElements=Fo.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qy&&(vm=!1),_b&&(B0=!0),_p&&(ds=Xu({},MG),Lr=[],_p.html===!0&&(Xu(ds,Q6),Xu(Lr,nF)),_p.svg===!0&&(Xu(ds,eF),Xu(Lr,oF),Xu(Lr,BO)),_p.svgFilters===!0&&(Xu(ds,wS),Xu(Lr,oF),Xu(Lr,BO)),_p.mathMl===!0&&(Xu(ds,tF),Xu(Lr,PG),Xu(Lr,BO))),Fo.ADD_TAGS&&(ds===_c&&(ds=aA(ds)),Xu(ds,Fo.ADD_TAGS,$0)),Fo.ADD_ATTR&&(Lr===Ts&&(Lr=aA(Lr)),Xu(Lr,Fo.ADD_ATTR,$0)),Fo.ADD_URI_SAFE_ATTR&&Xu(V_,Fo.ADD_URI_SAFE_ATTR,$0),Fo.FORBID_CONTENTS&&(Ep===Oy&&(Ep=aA(Ep)),Xu(Ep,Fo.FORBID_CONTENTS,$0)),Um&&(ds["#text"]=!0),oy&&Xu(ds,["html","head","body"]),ds.table&&(Xu(ds,["tbody"]),delete Mr.tbody),Fo.TRUSTED_TYPES_POLICY){if(typeof Fo.TRUSTED_TYPES_POLICY.createHTML!="function")throw AR('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Fo.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw AR('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');To=Fo.TRUSTED_TYPES_POLICY,or=To.createHTML("")}else To===void 0&&(To=Sie(gn,ot)),To!==null&&typeof or=="string"&&(or=To.createHTML(""));kv&&kv(Fo),s_=Fo}},Ar=Xu({},["mi","mo","mn","ms","mtext"]),br=Xu({},["annotation-xml"]),Es=Xu({},["title","style","font","a","script"]),eu=Xu({},[...eF,...wS,...jY]),Op=Xu({},[...tF,...UY]),Lx=function(Fo){let bs=xo(Fo);(!bs||!bs.tagName)&&(bs={namespaceURI:iC,tagName:"template"});const yl=SR(Fo.tagName),h=SR(bs.tagName);return LA[Fo.namespaceURI]?Fo.namespaceURI===sC?bs.namespaceURI===Tv?yl==="svg":bs.namespaceURI===BS?yl==="svg"&&(h==="annotation-xml"||Ar[h]):!!eu[yl]:Fo.namespaceURI===BS?bs.namespaceURI===Tv?yl==="math":bs.namespaceURI===sC?yl==="math"&&br[h]:!!Op[yl]:Fo.namespaceURI===Tv?bs.namespaceURI===sC&&!br[h]||bs.namespaceURI===BS&&!Ar[h]?!1:!Op[yl]&&(Es[yl]||!eu[yl]):!!(FA==="application/xhtml+xml"&&LA[Fo.namespaceURI]):!1},i_=function(Fo){kR(g.removed,{element:Fo});try{xo(Fo).removeChild(Fo)}catch{Rn(Fo)}},zA=function(Fo,bs){try{kR(g.removed,{attribute:bs.getAttributeNode(Fo),from:bs})}catch{kR(g.removed,{attribute:null,from:bs})}if(bs.removeAttribute(Fo),Fo==="is"&&!Lr[Fo])if(B0||_b)try{i_(bs)}catch{}else try{bs.setAttribute(Fo,"")}catch{}},OZ=function(Fo){let bs=null,yl=null;if(o_)Fo="<remove></remove>"+Fo;else{const tt=RG(Fo,/^[\r\n\t ]+/);yl=tt&&tt[0]}FA==="application/xhtml+xml"&&iC===Tv&&(Fo='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Fo+"</body></html>");const h=To?To.createHTML(Fo):Fo;if(iC===Tv)try{bs=new Qt().parseFromString(h,FA)}catch{}if(!bs||!bs.documentElement){bs=mr.createDocument(iC,"template",null);try{bs.documentElement.innerHTML=i3?or:h}catch{}}const j=bs.body||bs.documentElement;return Fo&&yl&&j.insertBefore($.createTextNode(yl),j.childNodes[0]||null),iC===Tv?Lo.call(bs,oy?"html":"body")[0]:oy?bs.documentElement:j},DZ=function(Fo){return $r.call(Fo.ownerDocument||Fo,Fo,Lt.SHOW_ELEMENT|Lt.SHOW_COMMENT|Lt.SHOW_TEXT|Lt.SHOW_PROCESSING_INSTRUCTION|Lt.SHOW_CDATA_SECTION,null)},zz=function(Fo){return Fo instanceof qt&&(typeof Fo.nodeName!="string"||typeof Fo.textContent!="string"||typeof Fo.removeChild!="function"||!(Fo.attributes instanceof Ht)||typeof Fo.removeAttribute!="function"||typeof Fo.setAttribute!="function"||typeof Fo.namespaceURI!="string"||typeof Fo.insertBefore!="function"||typeof Fo.hasChildNodes!="function")},NZ=function(Fo){return typeof _t=="function"&&Fo instanceof _t},aC=function(Fo,bs,yl){Gr[Fo]&&CR(Gr[Fo],h=>{h.call(g,bs,yl,s_)})},LZ=function(Fo){let bs=null;if(aC("beforeSanitizeElements",Fo,null),zz(Fo))return i_(Fo),!0;const yl=$0(Fo.nodeName);if(aC("uponSanitizeElement",Fo,{tagName:yl,allowedTags:ds}),Fo.hasChildNodes()&&!NZ(Fo.firstElementChild)&&Sv(/<[/\w]/g,Fo.innerHTML)&&Sv(/<[/\w]/g,Fo.textContent)||Fo.nodeType===IR.progressingInstruction||Dx&&Fo.nodeType===IR.comment&&Sv(/<[/\w]/g,Fo.data))return i_(Fo),!0;if(!ds[yl]||Mr[yl]){if(!Mr[yl]&&zZ(yl)&&(Is.tagNameCheck instanceof RegExp&&Sv(Is.tagNameCheck,yl)||Is.tagNameCheck instanceof Function&&Is.tagNameCheck(yl)))return!1;if(Um&&!Ep[yl]){const h=xo(Fo)||Fo.parentNode,j=ho(Fo)||Fo.childNodes;if(j&&h){const tt=j.length;for(let st=tt-1;st>=0;--st){const ut=yn(j[st],!0);ut.__removalCount=(Fo.__removalCount||0)+1,h.insertBefore(ut,so(Fo))}}}return i_(Fo),!0}return Fo instanceof St&&!Lx(Fo)||(yl==="noscript"||yl==="noembed"||yl==="noframes")&&Sv(/<\/no(script|embed|frames)/i,Fo.innerHTML)?(i_(Fo),!0):(Qy&&Fo.nodeType===IR.text&&(bs=Fo.textContent,CR([gs,Cl,Sl],h=>{bs=ER(bs,h," ")}),Fo.textContent!==bs&&(kR(g.removed,{element:Fo.cloneNode()}),Fo.textContent=bs)),aC("afterSanitizeElements",Fo,null),!1)},FZ=function(Fo,bs,yl){if(Hl&&(bs==="id"||bs==="name")&&(yl in $||yl in NN))return!1;if(!(vm&&!El[bs]&&Sv(au,bs))){if(!(Ol&&Sv(Cu,bs))){if(!Lr[bs]||El[bs]){if(!(zZ(Fo)&&(Is.tagNameCheck instanceof RegExp&&Sv(Is.tagNameCheck,Fo)||Is.tagNameCheck instanceof Function&&Is.tagNameCheck(Fo))&&(Is.attributeNameCheck instanceof RegExp&&Sv(Is.attributeNameCheck,bs)||Is.attributeNameCheck instanceof Function&&Is.attributeNameCheck(bs))||bs==="is"&&Is.allowCustomizedBuiltInElements&&(Is.tagNameCheck instanceof RegExp&&Sv(Is.tagNameCheck,yl)||Is.tagNameCheck instanceof Function&&Is.tagNameCheck(yl))))return!1}else if(!V_[bs]){if(!Sv(Er,ER(yl,k0,""))){if(!((bs==="src"||bs==="xlink:href"||bs==="href")&&Fo!=="script"&&zY(yl,"data:")===0&&r_[Fo])){if(!(Lu&&!Sv(jp,ER(yl,k0,"")))){if(yl)return!1}}}}}}return!0},zZ=function(Fo){return Fo!=="annotation-xml"&&RG(Fo,qp)},Bz=function(Fo){aC("beforeSanitizeAttributes",Fo,null);const{attributes:bs}=Fo;if(!bs)return;const yl={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Lr};let h=bs.length;for(;h--;){const j=bs[h],{name:tt,namespaceURI:st,value:ut}=j,mt=$0(tt);let yt=tt==="value"?ut:BY(ut);const kt=yt;if(yl.attrName=mt,yl.attrValue=yt,yl.keepAttr=!0,yl.forceKeepAttr=void 0,aC("uponSanitizeAttribute",Fo,yl),yt=yl.attrValue,yl.forceKeepAttr)continue;if(!yl.keepAttr){zA(tt,Fo);continue}if(!S0&&Sv(/\/>/i,yt)){zA(tt,Fo);continue}Qy&&CR([gs,Cl,Sl],zt=>{yt=ER(yt,zt," ")});const Ot=$0(Fo.nodeName);if(!FZ(Ot,mt,yt)){zA(tt,Fo);continue}if(Pp&&(mt==="id"||mt==="name")&&(zA(tt,Fo),yt=_m+yt),Dx&&Sv(/((--!?|])>)|<\/(style|title)/i,yt)){zA(tt,Fo);continue}if(To&&typeof gn=="object"&&typeof gn.getAttributeType=="function"&&!st)switch(gn.getAttributeType(Ot,mt)){case"TrustedHTML":{yt=To.createHTML(yt);break}case"TrustedScriptURL":{yt=To.createScriptURL(yt);break}}if(yt!==kt)try{st?Fo.setAttributeNS(st,tt,yt):Fo.setAttribute(tt,yt),zz(Fo)?i_(Fo):FO(g.removed)}catch{}}aC("afterSanitizeAttributes",Fo,null)},BZ=function Dl(Fo){let bs=null;const yl=DZ(Fo);for(aC("beforeSanitizeShadowDOM",Fo,null);bs=yl.nextNode();)aC("uponSanitizeShadowNode",bs,null),!LZ(bs)&&(bs.content instanceof at&&Dl(bs.content),Bz(bs));aC("afterSanitizeShadowDOM",Fo,null)};return g.sanitize=function(Dl){let Fo=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bs=null,yl=null,h=null,j=null;if(i3=!Dl,i3&&(Dl="<!-->"),typeof Dl!="string"&&!NZ(Dl))if(typeof Dl.toString=="function"){if(Dl=Dl.toString(),typeof Dl!="string")throw AR("dirty is not a string, aborting")}else throw AR("toString is not a function");if(!g.isSupported)return Dl;if(l1||Do(Fo),g.removed=[],typeof Dl=="string"&&(xm=!1),xm){if(Dl.nodeName){const ut=$0(Dl.nodeName);if(!ds[ut]||Mr[ut])throw AR("root node is forbidden and cannot be sanitized in-place")}}else if(Dl instanceof _t)bs=OZ("<!---->"),yl=bs.ownerDocument.importNode(Dl,!0),yl.nodeType===IR.element&&yl.nodeName==="BODY"||yl.nodeName==="HTML"?bs=yl:bs.appendChild(yl);else{if(!B0&&!Qy&&!oy&&Dl.indexOf("<")===-1)return To&&us?To.createHTML(Dl):Dl;if(bs=OZ(Dl),!bs)return B0?null:us?or:""}bs&&o_&&i_(bs.firstChild);const tt=DZ(xm?Dl:bs);for(;h=tt.nextNode();)LZ(h)||(h.content instanceof at&&BZ(h.content),Bz(h));if(xm)return Dl;if(B0){if(_b)for(j=Zo.call(bs.ownerDocument);bs.firstChild;)j.appendChild(bs.firstChild);else j=bs;return(Lr.shadowroot||Lr.shadowrootmode)&&(j=ir.call(et,j,!0)),j}let st=oy?bs.outerHTML:bs.innerHTML;return oy&&ds["!doctype"]&&bs.ownerDocument&&bs.ownerDocument.doctype&&bs.ownerDocument.doctype.name&&Sv(sF,bs.ownerDocument.doctype.name)&&(st="<!DOCTYPE "+bs.ownerDocument.doctype.name+`>
`+st),Qy&&CR([gs,Cl,Sl],ut=>{st=ER(st,ut," ")}),To&&us?To.createHTML(st):st},g.setConfig=function(){let Dl=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Do(Dl),l1=!0},g.clearConfig=function(){s_=null,l1=!1},g.isValidAttribute=function(Dl,Fo,bs){s_||Do({});const yl=$0(Dl),h=$0(Fo);return FZ(yl,h,bs)},g.addHook=function(Dl,Fo){typeof Fo=="function"&&(Gr[Dl]=Gr[Dl]||[],kR(Gr[Dl],Fo))},g.removeHook=function(Dl){if(Gr[Dl])return FO(Gr[Dl])},g.removeHooks=function(Dl){Gr[Dl]&&(Gr[Dl]=[])},g.removeAllHooks=function(){Gr={}},g}var DG=YY();const o1=cr.each,$O=cr.trim,CS=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],kS={ftp:21,http:80,https:443,mailto:25},NG=["img","video"],RR=(c,g)=>an(c)?!c:an(g)?!mn(NG,g):!0,LG=c=>{try{return decodeURIComponent(c)}catch{return unescape(c)}},Wp=(c,g,$)=>{const et=LG(g).replace(/\s/g,"");return c.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(et)?!0:c.allow_html_data_urls?!1:/^data:image\//i.test(et)?RR(c.allow_svg_data_urls,$)&&/^data:image\/svg\+xml/i.test(et):/^data:/i.test(et)};class G_{static parseDataUri(g){let $;const et=decodeURIComponent(g).split(","),ot=/data:([^;]+)/.exec(et[0]);return ot&&($=ot[1]),{type:$,data:et[1]}}static isDomSafe(g,$,et={}){if(et.allow_script_urls)return!0;{const ot=Xx.decode(g).replace(/[\s\u0000-\u001F]+/g,"");return!Wp(et,ot,$)}}static getDocumentBaseUrl(g){var $;let et;return g.protocol.indexOf("http")!==0&&g.protocol!=="file:"?et=($=g.href)!==null&&$!==void 0?$:"":et=g.protocol+"//"+g.host+g.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(et)&&(et=et.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(et)||(et+="/")),et}constructor(g,$={}){this.path="",this.directory="",g=$O(g),this.settings=$;const et=$.base_uri,ot=this;if(/^([\w\-]+):([^\/]{2})/i.test(g)||/^\s*#/.test(g)){ot.source=g;return}const at=g.indexOf("//")===0;if(g.indexOf("/")===0&&!at&&(g=(et&&et.protocol||"http")+"://mce_host"+g),!/^[\w\-]*:?\/\//.test(g)){const _t=et?et.path:new G_(document.location.href).directory;if((et==null?void 0:et.protocol)==="")g="//mce_host"+ot.toAbsPath(_t,g);else{const St=/([^#?]*)([#?]?.*)/.exec(g);St&&(g=(et&&et.protocol||"http")+"://mce_host"+ot.toAbsPath(_t,St[1])+St[2])}}g=g.replace(/@@/g,"(mce_at)");const ht=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(g);ht&&o1(CS,(_t,St)=>{let Lt=ht[St];Lt&&(Lt=Lt.replace(/\(mce_at\)/g,"@@")),ot[_t]=Lt}),et&&(ot.protocol||(ot.protocol=et.protocol),ot.userInfo||(ot.userInfo=et.userInfo),!ot.port&&ot.host==="mce_host"&&(ot.port=et.port),(!ot.host||ot.host==="mce_host")&&(ot.host=et.host),ot.source=""),at&&(ot.protocol="")}setPath(g){const $=/^(.*?)\/?(\w+)?$/.exec(g);$&&(this.path=$[0],this.directory=$[1],this.file=$[2]),this.source="",this.getURI()}toRelative(g){if(g==="./")return g;const $=new G_(g,{base_uri:this});if($.host!=="mce_host"&&this.host!==$.host&&$.host||this.port!==$.port||this.protocol!==$.protocol&&$.protocol!=="")return $.getURI();const et=this.getURI(),ot=$.getURI();if(et===ot||et.charAt(et.length-1)==="/"&&et.substr(0,et.length-1)===ot)return et;let at=this.toRelPath(this.path,$.path);return $.query&&(at+="?"+$.query),$.anchor&&(at+="#"+$.anchor),at}toAbsolute(g,$){const et=new G_(g,{base_uri:this});return et.getURI($&&this.isSameOrigin(et))}isSameOrigin(g){if(this.host==g.host&&this.protocol==g.protocol){if(this.port==g.port)return!0;const $=this.protocol?kS[this.protocol]:null;if($&&(this.port||$)==(g.port||$))return!0}return!1}toRelPath(g,$){let et=0,ot="",at,ht;const _t=g.substring(0,g.lastIndexOf("/")).split("/"),St=$.split("/");if(_t.length>=St.length){for(at=0,ht=_t.length;at<ht;at++)if(at>=St.length||_t[at]!==St[at]){et=at+1;break}}if(_t.length<St.length){for(at=0,ht=St.length;at<ht;at++)if(at>=_t.length||_t[at]!==St[at]){et=at+1;break}}if(et===1)return $;for(at=0,ht=_t.length-(et-1);at<ht;at++)ot+="../";for(at=et-1,ht=St.length;at<ht;at++)at!==et-1?ot+="/"+St[at]:ot+=St[at];return ot}toAbsPath(g,$){let et=0;const ot=/\/$/.test($)?"/":"",at=g.split("/"),ht=$.split("/"),_t=[];o1(at,qt=>{qt&&_t.push(qt)});const St=[];for(let qt=ht.length-1;qt>=0;qt--)if(!(ht[qt].length===0||ht[qt]===".")){if(ht[qt]===".."){et++;continue}if(et>0){et--;continue}St.push(ht[qt])}const Lt=_t.length-et;let Ht;return Lt<=0?Ht=Oo(St).join("/"):Ht=_t.slice(0,Lt).join("/")+"/"+Oo(St).join("/"),Ht.indexOf("/")!==0&&(Ht="/"+Ht),ot&&Ht.lastIndexOf("/")!==Ht.length-1&&(Ht+=ot),Ht}getURI(g=!1){let $;return(!this.source||g)&&($="",g||(this.protocol?$+=this.protocol+"://":$+="//",this.userInfo&&($+=this.userInfo+"@"),this.host&&($+=this.host),this.port&&($+=":"+this.port)),this.path&&($+=this.path),this.query&&($+="?"+this.query),this.anchor&&($+="#"+this.anchor),this.source=$),this.source}}const XY=cr.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),SS="data-mce-type";let lA=0;const cA=(c,g,$,et,ot)=>{var at,ht,_t,St;const Lt=g.validate,Ht=$.getSpecialElements();c.nodeType===Fu&&!g.allow_conditional_comments&&/^\[if/i.test((at=c.nodeValue)!==null&&at!==void 0?at:"")&&(c.nodeValue=" "+c.nodeValue);const qt=(ht=ot==null?void 0:ot.tagName)!==null&&ht!==void 0?ht:c.nodeName.toLowerCase();if(et!=="html"&&$.isValid(et)){an(ot)&&(ot.allowedTags[qt]=!0);return}if(c.nodeType!==y1||qt==="body")return;const Qt=Qn.fromDom(c),gn=ap(Qt,SS),kn=lm(Qt,"data-mce-bogus");if(!gn&&Et(kn)){kn==="all"?mu(Qt):vy(Qt);return}const yn=$.getElementRule(qt);if(Lt&&!yn){Jr(Ht,qt)?mu(Qt):vy(Qt);return}else an(ot)&&(ot.allowedTags[qt]=!0);if(Lt&&yn&&!gn){if(rn((_t=yn.attributesForced)!==null&&_t!==void 0?_t:[],Rn=>{ip(Qt,Rn.name,Rn.value==="{$uid}"?`mce_${lA++}`:Rn.value)}),rn((St=yn.attributesDefault)!==null&&St!==void 0?St:[],Rn=>{ap(Qt,Rn.name)||ip(Qt,Rn.name,Rn.value==="{$uid}"?`mce_${lA++}`:Rn.value)}),yn.attributesRequired&&!wn(yn.attributesRequired,Rn=>ap(Qt,Rn))){vy(Qt);return}if(yn.removeEmptyAttrs&&my(Qt)){vy(Qt);return}yn.outputName&&yn.outputName!==qt&&ZM(Qt,yn.outputName)}},iF=(c,g,$,et,ot)=>{const at=c.tagName.toLowerCase(),{attrName:ht,attrValue:_t}=ot;ot.keepAttr=GO(g,$,et,at,ht,_t),ot.keepAttr?(ot.allowedAttributes[ht]=!0,lF(ht,$)&&(ot.attrValue=ht),g.allow_svg_data_urls&&ks(_t,"data:image/svg+xml")&&(ot.forceKeepAttr=!0)):aF(c,ht)&&(ot.forceKeepAttr=!0)},GO=(c,g,$,et,ot,at)=>$!=="html"&&!Wu(et)?!0:!(ot in XY&&Wp(c,at,et))&&(!c.validate||g.isValid(et,ot)||ks(ot,"data-")||ks(ot,"aria-")),aF=(c,g)=>c.hasAttribute(SS)&&(g==="id"||g==="class"||g==="style"),lF=(c,g)=>c in g.getBoolAttrs(),JY=(c,g,$,et)=>{const{attributes:ot}=c;for(let at=ot.length-1;at>=0;at--){const ht=ot[at],_t=ht.name,St=ht.value;!GO(g,$,et,c.tagName.toLowerCase(),_t,St)&&!aF(c,_t)?c.removeAttribute(_t):lF(_t,$)&&c.setAttribute(_t,_t)}},QY=(c,g,$)=>{const et=DG();return et.addHook("uponSanitizeElement",(ot,at)=>{cA(ot,c,g,$.track(ot),at)}),et.addHook("uponSanitizeAttribute",(ot,at)=>{iF(ot,c,g,$.current(),at)}),et},FG=(c,g)=>{const et={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return et.PARSER_MEDIA_TYPE=g,c.allow_script_urls?et.ALLOWED_URI_REGEXP=/.*/:c.allow_html_data_urls&&(et.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),et},eX=c=>{const g=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(et=>`xlink:${et}`),$={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:g};DG().sanitize(c,$)},tX=(c,g)=>{const $={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},et=DG();et.addHook("uponSanitizeElement",(ot,at)=>{var ht;const _t=(ht=at.tagName)!==null&&ht!==void 0?ht:ot.nodeName.toLowerCase(),St=g.allow_mathml_annotation_encodings;if(_t==="annotation"&&Zt(St)&&St.length>0){const Lt=ot.getAttribute("encoding");Et(Lt)&&mn(St,Lt)&&(at.allowedTags[_t]=!0)}}),et.sanitize(c,$)},nX=c=>g=>{const $=x_(g);if($==="svg")eX(g);else if($==="math")tX(g,c);else throw new Error("Not a namespace element")},oX=(c,g)=>{const $=Bt();if(c.sanitize){const et=QY(c,g,$);return{sanitizeHtmlElement:(at,ht)=>{et.sanitize(at,FG(c,ht)),et.removed=[],$.reset()},sanitizeNamespaceElement:nX(c)}}else return{sanitizeHtmlElement:(at,ht)=>{const _t=document.createNodeIterator(at,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let St;for(;St=_t.nextNode();){const Lt=$.track(St);cA(St,c,g,Lt),Nr(St)&&JY(St,c,g,Lt)}$.reset()},sanitizeNamespaceElement:fn}},zG=cr.makeMap,cF=cr.extend,BG=(c,g,$,et)=>{const ot=c.name,at=ot in $&&ot!=="title"&&ot!=="textarea"&&ot!=="noscript",ht=g.childNodes;for(let _t=0,St=ht.length;_t<St;_t++){const Lt=ht[_t],Ht=new Iy(Lt.nodeName.toLowerCase(),Lt.nodeType);if(Nr(Lt)){const qt=Lt.attributes;for(let Qt=0,gn=qt.length;Qt<gn;Qt++){const kn=qt[Qt];Ht.attr(kn.name,kn.value)}Wu(Ht.name)&&(et(Lt),Ht.value=Lt.innerHTML)}else dr(Lt)?(Ht.value=Lt.data,at&&(Ht.raw=!0)):(Sp(Lt)||y0(Lt)||sx(Lt))&&(Ht.value=Lt.data);Wu(Ht.name)||BG(Ht,Lt,$,et),c.append(Ht)}},MR=(c,g,$)=>{const et=[];for(let ot=c,at=ot;ot;at=ot,ot=ot.walk()){const ht=ot;rn(g,_t=>_t(ht)),Pn(ht.parent)&&ht!==c?ot=at:et.push(ht)}for(let ot=et.length-1;ot>=0;ot--){const at=et[ot];rn($,ht=>ht(at))}},$G=(c,g,$,et)=>{const ot=$.validate,at=g.getNonEmptyElements(),ht=g.getWhitespaceElements(),_t=cF(zG("script,style,head,html,body,title,meta,param"),g.getBlockElements()),St=b3(g),Lt=/[ \t\r\n]+/g,Ht=/^[ \t\r\n]+/,qt=/[ \t\r\n]+$/,Qt=ho=>{let xo=ho.parent;for(;an(xo);){if(xo.name in ht)return!0;xo=xo.parent}return!1},gn=ho=>{let xo=ho;for(;an(xo);){if(xo.name in St)return Sm(g,at,ht,xo);xo=xo.parent}return!1},kn=ho=>ho.name in _t||w_(g,ho)||Wu(ho.name)&&ho.parent===c,yn=(ho,xo)=>{const To=xo?ho.prev:ho.next;return an(To)||Pn(ho.parent)?!1:kn(ho.parent)&&(ho.parent!==c||et.isRootContent===!0)};return[ho=>{var xo;if(ho.type===3&&!Qt(ho)){let To=(xo=ho.value)!==null&&xo!==void 0?xo:"";To=To.replace(Lt," "),(QK(ho.prev,kn)||yn(ho,!0))&&(To=To.replace(Ht,"")),To.length===0||To===" "&&ho.prev&&ho.prev.type===Fu&&ho.next&&ho.next.type===Fu?ho.remove():ho.value=To}},ho=>{var xo;if(ho.type===1){const To=g.getElementRule(ho.name);if(ot&&To){const or=Sm(g,at,ht,ho);To.paddInEmptyBlock&&or&&gn(ho)?C6($,et,kn,ho):To.removeEmpty&&or?kn(ho)?ho.remove():ho.unwrap():To.paddEmpty&&(or||yS(ho))&&C6($,et,kn,ho)}}else if(ho.type===3&&!Qt(ho)){let To=(xo=ho.value)!==null&&xo!==void 0?xo:"";(ho.next&&kn(ho.next)||yn(ho,!1))&&(To=To.replace(qt,"")),To.length===0?ho.remove():ho.value=To}}]},rX=(c,g)=>{var $;const et=($=g.forced_root_block)!==null&&$!==void 0?$:c.forced_root_block;return et===!1?"":et===!0?"p":et},uA=(c={},g=yu())=>{const $=_G(),et=_G(),ot={validate:!0,root_name:"body",sanitize:!0,...c},at=new DOMParser,ht=oX(ot,g),_t=(xo,To,or="html")=>{const mr=or==="xhtml"?"application/xhtml+xml":"text/html",$r=Jr(g.getSpecialElements(),To.toLowerCase()),Zo=$r?`<${To}>${xo}</${To}>`:xo,Lo=()=>or==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Zo}</body></html>`:/^[\s]*<head/i.test(xo)||/^[\s]*<html/i.test(xo)||/^[\s]*<!DOCTYPE/i.test(xo)?`<html>${Zo}</html>`:`<body>${Zo}</body>`,ir=at.parseFromString(Lo(),mr).body;return ht.sanitizeHtmlElement(ir,mr),$r?ir.firstChild:ir},St=$.addFilter,Lt=$.getFilters,Ht=$.removeFilter,qt=et.addFilter,Qt=et.getFilters,gn=et.removeFilter,kn=(xo,To)=>{k6(g,xo)&&To.push(xo)},yn=(xo,To)=>{const or=Et(To.attr(SS)),mr=To.type===1&&!Jr(xo,To.name)&&!w_(g,To)&&!Wu(To.name);return To.type===3||mr&&!or},Rn=(xo,To)=>{const or=cF(zG("script,style,head,html,body,title,meta,param"),g.getBlockElements()),mr=/^[ \t\r\n]+/,$r=/[ \t\r\n]+$/;let Zo=xo.firstChild,Lo=null;const ir=Gr=>{var gs,Cl;Gr&&(Zo=Gr.firstChild,Zo&&Zo.type===3&&(Zo.value=(gs=Zo.value)===null||gs===void 0?void 0:gs.replace(mr,"")),Zo=Gr.lastChild,Zo&&Zo.type===3&&(Zo.value=(Cl=Zo.value)===null||Cl===void 0?void 0:Cl.replace($r,"")))};if(g.isValidChild(xo.name,To.toLowerCase())){for(;Zo;){const Gr=Zo.next;yn(or,Zo)?(Lo||(Lo=new Iy(To,1),Lo.attr(ot.forced_root_block_attrs),xo.insert(Lo,Zo)),Lo.append(Zo)):(ir(Lo),Lo=null),Zo=Gr}ir(Lo)}},ho={schema:g,addAttributeFilter:qt,getAttributeFilters:Qt,removeAttributeFilter:gn,addNodeFilter:St,getNodeFilters:Lt,removeNodeFilter:Ht,parse:(xo,To={})=>{var or;const mr=ot.validate,$r=(or=To.context)!==null&&or!==void 0?or:ot.root_name,Zo=_t(xo,$r,To.format);su(g,Zo);const Lo=new Iy($r,11);BG(Lo,Zo,g.getSpecialElements(),ht.sanitizeNamespaceElement),Zo.innerHTML="";const[ir,Gr]=$G(Lo,g,ot,To),gs=[],Cl=mr?jp=>kn(jp,gs):fn,Sl={nodes:{},attributes:{}},au=jp=>F$(Lt(),Qt(),jp,Sl);if(MR(Lo,[ir,au],[Gr,Cl]),gs.reverse(),mr&&gs.length>0)if(To.context){const{pass:jp,fail:k0}=Nn(gs,qp=>qp.parent===Lo);nu(k0,g,Lo,au),To.invalid=jp.length>0}else nu(gs,g,Lo,au);const Cu=rX(ot,To);return Cu&&(Lo.name==="body"||To.isRootContent)&&Rn(Lo,Cu),To.invalid||x6(Sl,To),Lo}};return X6(ho,ot),X2(ho,ot,g),ho},sX=c=>vS(c)?uS({validate:!1}).serialize(c):c,uF=(c,g,$)=>{const et=sX(c),ot=g(et);if(ot.isDefaultPrevented())return ot;if(vS(c))if(ot.content!==et){const at=uA({validate:!1,forced_root_block:!1,...$}).parse(ot.content,{context:c.name});return{...ot,content:at}}else return{...ot,content:c};else return ot},GG=c=>({sanitize:K4(c),sandbox_iframes:EE(c),sandbox_iframes_exclusions:p5(c)}),jG=(c,g)=>{if(g.no_events)return pm.value(g);{const $=QT(c,g);return $.isDefaultPrevented()?pm.error(g8(c,{content:"",...$}).content):pm.value($)}},dF=(c,g,$)=>$.no_events?g:uF(g,ot=>g8(c,{...$,content:ot}),GG(c)).content,jO=(c,g)=>{if(g.no_events)return pm.value(g);{const $=uF(g.content,et=>U5(c,{...g,content:et}),GG(c));return $.isDefaultPrevented()?(DP(c,$),pm.error(void 0)):pm.value($)}},UO=(c,g,$)=>{$.no_events||DP(c,{...$,content:g})},HO=(c,g,$)=>({element:c,width:g,rows:$}),fF=(c,g)=>({element:c,cells:g}),UG=(c,g)=>({x:c,y:g}),HG=(c,g)=>Vu(c,g).bind(wp).getOr(1),iX=(c,g,$,et,ot)=>{const at=HG(ot,"rowspan"),ht=HG(ot,"colspan"),_t=c.rows;for(let St=$;St<$+at;St++){_t[St]||(_t[St]=fF(iE(et),[]));for(let Lt=g;Lt<g+ht;Lt++){const Ht=_t[St].cells;Ht[Lt]=St===$&&Lt===g?ot:Wv(ot)}}},aX=(c,g,$)=>{const et=c.rows;return!!(et[$]?et[$].cells:[])[g]},hF=(c,g,$)=>{for(;aX(c,g,$);)g++;return g},kI=c=>Hn(c,(g,$)=>$.cells.length>g?$.cells.length:g,0),pF=(c,g)=>{const $=c.rows;for(let et=0;et<$.length;et++){const ot=$[et].cells;for(let at=0;at<ot.length;at++)if(_i(ot[at],g))return Yt.some(UG(at,et))}return Yt.none()},gF=(c,g,$,et,ot)=>{const at=[],ht=c.rows;for(let _t=$;_t<=ot;_t++){const St=ht[_t].cells,Lt=g<et?St.slice(g,et+1):St.slice(et,g+1);at.push(fF(ht[_t].element,Lt))}return at},VO=(c,g,$)=>{const et=g.x,ot=g.y,at=$.x,ht=$.y,_t=ot<ht?gF(c,et,ot,at,ht):gF(c,et,ht,at,ot);return HO(c.element,kI(_t),_t)},lX=(c,g)=>{const $=Wv(c.element),et=Qn.fromTag("tbody");return Bv(et,g),Up($,et),$},cX=c=>Dn(c.rows,g=>{const $=Dn(g.cells,ot=>{const at=iE(ot);return zu(at,"colspan"),zu(at,"rowspan"),at}),et=Wv(g.element);return Bv(et,$),et}),dA=c=>{const g=HO(Wv(c),0,[]);return rn(m0(c,"tr"),($,et)=>{rn(m0($,"td,th"),(ot,at)=>{iX(g,hF(g,at,et),et,$,ot)})}),HO(g.element,kI(g.rows),g.rows)},mF=c=>lX(c,cX(c)),VG=(c,g,$)=>pF(c,g).bind(et=>pF(c,$).map(ot=>VO(c,et,ot))),PR=c=>Jn(c,g=>Sn(g)==="ul"||Sn(g)==="ol"),WG=(c,g)=>Jn(c,$=>Sn($)==="li"&&L5($,g)).fold(ln([]),$=>PR(c).map(et=>{const ot=Qn.fromTag(Sn(et)),at=Vs(M0(et),(ht,_t)=>ks(_t,"list-style"));return Ks(ot,at),[Qn.fromTag("li"),ot]}).getOr([])),yF=(c,g)=>{const $=Hn(g,(et,ot)=>(Up(ot,et),ot),c);return g.length>0?aI([$]):$},qG=c=>m2(c)?Dm(c).filter(F1).fold(ln([]),g=>[c,g]):F1(c)?[c]:[],ZG=(c,g,$)=>{const et=Qn.fromDom(g.commonAncestorContainer),ot=Ew(et,c),at=zn(ot,St=>$.isWrapper(Sn(St))),ht=WG(ot,g),_t=at.concat(ht.length?ht:qG(et));return Dn(_t,Wv)},KG=()=>aI([]),uX=(c,g,$)=>yF(Qn.fromDom(g.cloneContents()),ZG(c,g,$)),dX=(c,g)=>zp(g,"table",An(_i,c)),bF=(c,g)=>dX(c,g[0]).bind($=>{const et=g[0],ot=g[g.length-1],at=dA($);return VG(at,et,ot).map(ht=>aI([mF(ht)]))}).getOrThunk(KG),fX=(c,g,$)=>g.length>0&&g[0].collapsed?KG():uX(c,g[0],$),YG=(c,g,$)=>{const et=F2(g,c);return et.length>0?bF(c,et):fX(c,g,$)},WO=(c,g)=>g>=0&&g<c.length&&L2(c.charAt(g)),XG=c=>fv(c.innerText),hX=c=>c.map(g=>g.nodeName).getOr("div").toLowerCase(),pX=c=>Yt.from(c.selection.getRng()).map(g=>{var $;const et=Yt.from(c.dom.getParent(g.commonAncestorContainer,c.dom.isBlock)),ot=c.getBody(),at=hX(et),ht=Qn.fromDom(g.cloneContents());$B(ht),GB(ht);const _t=c.dom.add(ot,at,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},ht.dom),St=XG(_t),Lt=fv(($=_t.textContent)!==null&&$!==void 0?$:"");if(c.dom.remove(_t),WO(Lt,0)||WO(Lt,Lt.length-1)){const Ht=et.getOr(ot),qt=XG(Ht),Qt=qt.indexOf(St);if(Qt===-1)return St;{const gn=WO(qt,Qt-1),kn=WO(qt,Qt+St.length);return(gn?" ":"")+St+(kn?" ":"")}}else return St}).getOr(""),gX=(c,g)=>{const $=c.selection.getRng(),et=c.dom.create("body"),ot=c.selection.getSel(),at=KP(c,GT(ot)),ht=g.contextual?YG(Qn.fromDom(c.getBody()),at,c.schema).dom:$.cloneContents();return ht&&et.appendChild(ht),c.selection.serializer.serialize(et,g)},mX=(c,g)=>{if(g.format==="text")return pX(c);{const $=gX(c,g);return g.format==="tree"?$:c.selection.isCollapsed()?"":$}},yX=(c,g)=>({...c,format:g,get:!0,selection:!0,getInner:!0}),bX=(c,g,$={})=>{const et=yX($,g);return jG(c,et).fold(uo,ot=>{const at=mX(c,ot);return dF(c,at,ot)})},vF=0,JG=1,QG=2,qO=(c,g)=>{const $=c.length+g.length+2,et=new Array($),ot=new Array($),at=(Ht,qt,Qt)=>({start:Ht,end:qt,diag:Qt}),ht=(Ht,qt,Qt,gn,kn)=>{const yn=St(Ht,qt,Qt,gn);if(yn===null||yn.start===qt&&yn.diag===qt-gn||yn.end===Ht&&yn.diag===Ht-Qt){let Rn=Ht,so=Qt;for(;Rn<qt||so<gn;)Rn<qt&&so<gn&&c[Rn]===g[so]?(kn.push([vF,c[Rn]]),++Rn,++so):qt-Ht>gn-Qt?(kn.push([QG,c[Rn]]),++Rn):(kn.push([JG,g[so]]),++so)}else{ht(Ht,yn.start,Qt,yn.start-yn.diag,kn);for(let Rn=yn.start;Rn<yn.end;++Rn)kn.push([vF,c[Rn]]);ht(yn.end,qt,yn.end-yn.diag,gn,kn)}},_t=(Ht,qt,Qt,gn)=>{let kn=Ht;for(;kn-qt<gn&&kn<Qt&&c[kn]===g[kn-qt];)++kn;return at(Ht,kn,qt)},St=(Ht,qt,Qt,gn)=>{const kn=qt-Ht,yn=gn-Qt;if(kn===0||yn===0)return null;const Rn=kn-yn,so=yn+kn,ho=(so%2===0?so:so+1)/2;et[1+ho]=Ht,ot[1+ho]=qt+1;let xo,To,or,mr,$r;for(xo=0;xo<=ho;++xo){for(To=-xo;To<=xo;To+=2){for(or=To+ho,To===-xo||To!==xo&&et[or-1]<et[or+1]?et[or]=et[or+1]:et[or]=et[or-1]+1,mr=et[or],$r=mr-Ht+Qt-To;mr<qt&&$r<gn&&c[mr]===g[$r];)et[or]=++mr,++$r;if(Rn%2!==0&&Rn-xo<=To&&To<=Rn+xo&&ot[or-Rn]<=et[or])return _t(ot[or-Rn],To+Ht-Qt,qt,gn)}for(To=Rn-xo;To<=Rn+xo;To+=2){for(or=To+ho-Rn,To===Rn-xo||To!==Rn+xo&&ot[or+1]<=ot[or-1]?ot[or]=ot[or+1]-1:ot[or]=ot[or-1],mr=ot[or]-1,$r=mr-Ht+Qt-To;mr>=Ht&&$r>=Qt&&c[mr]===g[$r];)ot[or]=mr--,$r--;if(Rn%2===0&&-xo<=To&&To<=xo&&ot[or]<=et[or+Rn])return _t(ot[or],To+Ht-Qt,qt,gn)}}return null},Lt=[];return ht(0,c.length,0,g.length,Lt),Lt},ty=c=>Nr(c)?c.outerHTML:dr(c)?Xx.encodeRaw(c.data,!1):Sp(c)?"<!--"+c.data+"-->":"",vX=c=>{let g;const $=document.createElement("div"),et=document.createDocumentFragment();for(c&&($.innerHTML=c);g=$.firstChild;)et.appendChild(g);return et},ZO=(c,g,$)=>{const et=vX(g);if(c.hasChildNodes()&&$<c.childNodes.length){const ot=c.childNodes[$];c.insertBefore(et,ot)}else c.appendChild(et)},fA=(c,g)=>{if(c.hasChildNodes()&&g<c.childNodes.length){const $=c.childNodes[g];c.removeChild($)}},_j=(c,g)=>{let $=0;rn(c,et=>{et[0]===vF?$++:et[0]===JG?(ZO(g,et[1],$),$++):et[0]===QG&&fA(g,$)})},Ev=(c,g)=>zn(Dn(Ss(c.childNodes),It(fv,ty)),$=>$.length>0),hA=(c,g)=>{const $=Dn(Ss(g.childNodes),ty);return _j(qO($,c),g),g},$j=jo(()=>document.implementation.createHTMLDocument("undo")),_X=c=>c.querySelector("iframe")!==null,eU=c=>({type:"fragmented",fragments:c,content:"",bookmark:null,beforeBookmark:null}),xX=c=>({type:"complete",fragments:null,content:c,bookmark:null,beforeBookmark:null}),OR=c=>{const g=c.serializer.getTempAttrs(),$=BB(c.getBody(),g);return _X($)?eU(Ev($)):xX(fv($.innerHTML))},pA=(c,g,$)=>{const et=$?g.beforeBookmark:g.bookmark;g.type==="fragmented"?hA(g.fragments,c.getBody()):c.setContent(g.content,{format:"raw",no_selection:an(et)&&t8(et)?!et.isFakeCaret:!0}),et&&(c.selection.moveToBookmark(et),c.selection.scrollIntoView())},DR=c=>c.type==="fragmented"?c.fragments.join(""):c.content,tU=c=>{const g=Qn.fromTag("body",$j());return $v(g,DR(c)),rn(m0(g,"*[data-mce-bogus]"),vy),Ou(g)},nU=(c,g)=>DR(c)===DR(g),wX=(c,g)=>tU(c)===tU(g),NR=(c,g)=>!c||!g?!1:nU(c,g)?!0:wX(c,g),LR=c=>c.get()===0,KO=(c,g,$)=>{LR($)&&(c.typing=g)},oU=(c,g)=>{c.typing&&(KO(c,!1,g),c.add())},rU=c=>{c.typing&&(c.typing=!1,c.add())},Ex=(c,g,$)=>{LR(g)&&$.set(yT(c.selection))},_F=(c,g,$,et,ot,at,ht)=>{const _t=OR(c),St=cr.extend(at||{},_t);if(!LR(et)||c.removed)return null;const Lt=g.data[$.get()];if(c.dispatch("BeforeAddUndo",{level:St,lastLevel:Lt,originalEvent:ht}).isDefaultPrevented()||Lt&&NR(Lt,St))return null;g.data[$.get()]&&ot.get().each(Qt=>{g.data[$.get()].beforeBookmark=Qt});const Ht=kT(c);if(Ht&&g.data.length>Ht){for(let Qt=0;Qt<g.data.length-1;Qt++)g.data[Qt]=g.data[Qt+1];g.data.length--,$.set(g.data.length)}St.bookmark=yT(c.selection),$.get()<g.data.length-1&&(g.data.length=$.get()+1),g.data.push(St),$.set(g.data.length-1);const qt={level:St,lastLevel:Lt,originalEvent:ht};return $.get()>0?(c.setDirty(!0),c.dispatch("AddUndo",qt),c.dispatch("change",qt)):c.dispatch("AddUndo",qt),St},CX=(c,g,$)=>{g.data=[],$.set(0),g.typing=!1,c.dispatch("ClearUndos")},YO=(c,g,$,et,ot)=>{if(g.transact(et)){const at=g.data[$.get()].bookmark,ht=g.data[$.get()-1];pA(c,ht,!0),g.transact(ot)&&(g.data[$.get()-1].beforeBookmark=at)}},xF=(c,g,$)=>{let et;return g.get()<$.length-1&&(g.set(g.get()+1),et=$[g.get()],pA(c,et,!1),c.setDirty(!0),c.dispatch("Redo",{level:et})),et},sU=(c,g,$,et)=>{let ot;return g.typing&&(g.add(),g.typing=!1,KO(g,!1,$)),et.get()>0&&(et.set(et.get()-1),ot=g.data[et.get()],pA(c,ot,!0),c.setDirty(!0),c.dispatch("Undo",{level:ot})),ot},iU=c=>{c.clear(),c.add()},aU=(c,g,$)=>$.get()>0||g.typing&&g.data[0]&&!NR(OR(c),g.data[0]),kX=(c,g)=>g.get()<c.data.length-1&&!c.typing,SX=(c,g,$)=>(oU(c,g),c.beforeChange(),c.ignore($),c.add()),EX=(c,g)=>{try{c.set(c.get()+1),g()}finally{c.set(c.get()-1)}},AX=(c,g)=>{const $=c.dom,et=an(g)?g:c.getBody();rn($.select("table,a",et),ot=>{switch(ot.nodeName){case"TABLE":const at=G4(c),ht=$.getAttrib(ot,"border");(!ht||ht==="0")&&c.hasVisual?$.addClass(ot,at):$.removeClass(ot,at);break;case"A":if(!$.getAttrib(ot,"href")){const _t=$.getAttrib(ot,"name")||ot.id,St=l5(c);_t&&c.hasVisual?$.addClass(ot,St):$.removeClass(ot,St)}break}}),c.dispatch("VisualAid",{element:g,hasVisual:c.hasVisual})},lU=c=>({init:{bindEvents:fn},undoManager:{beforeChange:(g,$)=>Ex(c,g,$),add:(g,$,et,ot,at,ht)=>_F(c,g,$,et,ot,at,ht),undo:(g,$,et)=>sU(c,g,$,et),redo:(g,$)=>xF(c,g,$),clear:(g,$)=>CX(c,g,$),reset:g=>iU(g),hasUndo:(g,$)=>aU(c,g,$),hasRedo:(g,$)=>kX(g,$),transact:(g,$,et)=>SX(g,$,et),ignore:(g,$)=>EX(g,$),extra:(g,$,et,ot)=>YO(c,g,$,et,ot)},formatter:{match:(g,$,et,ot)=>mR(c,g,$,et,ot),matchAll:(g,$)=>V$(c,g,$),matchNode:(g,$,et,ot)=>Cx(c,g,$,et,ot),canApply:g=>dY(c,g),closest:g=>vO(c,g),apply:(g,$,et)=>j6(c,g,$,et),remove:(g,$,et,ot)=>pG(c,g,$,et,ot),toggle:(g,$,et)=>DO(c,g,$,et),formatChanged:(g,$,et,ot,at)=>PY(c,g,$,et,ot,at)},editor:{getContent:g=>pK(c,g),setContent:(g,$)=>tA(c,g,$),insertContent:(g,$)=>Cv(c,g,$),addVisual:g=>AX(c,g)},selection:{getContent:(g,$)=>bX(c,g,$)},autocompleter:{addDecoration:fn,removeDecoration:fn},raw:{getModel:()=>Yt.none()}}),cU=c=>{const g=Lt=>$t(Lt)?Lt:{},{init:$,undoManager:et,formatter:ot,editor:at,selection:ht,autocompleter:_t,raw:St}=c;return{init:{bindEvents:$.bindEvents},undoManager:{beforeChange:et.beforeChange,add:et.add,undo:et.undo,redo:et.redo,clear:et.clear,reset:et.reset,hasUndo:et.hasUndo,hasRedo:et.hasRedo,transact:(Lt,Ht,qt)=>et.transact(qt),ignore:(Lt,Ht)=>et.ignore(Ht),extra:(Lt,Ht,qt,Qt)=>et.extra(qt,Qt)},formatter:{match:(Lt,Ht,qt,Qt)=>ot.match(Lt,g(Ht),Qt),matchAll:ot.matchAll,matchNode:ot.matchNode,canApply:Lt=>ot.canApply(Lt),closest:Lt=>ot.closest(Lt),apply:(Lt,Ht,qt)=>ot.apply(Lt,g(Ht)),remove:(Lt,Ht,qt,Qt)=>ot.remove(Lt,g(Ht)),toggle:(Lt,Ht,qt)=>ot.toggle(Lt,g(Ht)),formatChanged:(Lt,Ht,qt,Qt,gn)=>ot.formatChanged(Ht,qt,Qt,gn)},editor:{getContent:Lt=>at.getContent(Lt),setContent:(Lt,Ht)=>({content:at.setContent(Lt,Ht),html:""}),insertContent:(Lt,Ht)=>(at.insertContent(Lt),""),addVisual:at.addVisual},selection:{getContent:(Lt,Ht)=>ht.getContent(Ht)},autocompleter:{addDecoration:_t.addDecoration,removeDecoration:_t.removeDecoration},raw:{getModel:()=>Yt.some(St.getRawModel())}}},TX=()=>{const c=ln(null),g=ln("");return{init:{bindEvents:fn},undoManager:{beforeChange:fn,add:c,undo:c,redo:c,clear:fn,reset:fn,hasUndo:On,hasRedo:On,transact:c,ignore:fn,extra:fn},formatter:{match:On,matchAll:ln([]),matchNode:ln(void 0),canApply:On,closest:g,apply:fn,remove:fn,toggle:fn,formatChanged:ln({unbind:fn})},editor:{getContent:g,setContent:ln({content:"",html:""}),insertContent:ln(""),addVisual:fn},selection:{getContent:g},autocompleter:{addDecoration:fn,removeDecoration:fn},raw:{getModel:ln(Yt.none())}}},Iw=c=>Jr(c.plugins,"rtc"),IX=c=>ba(c.plugins,"rtc").bind(g=>Yt.from(g.setup)),uU=c=>{const g=c;return IX(c).fold(()=>(g.rtcInstance=lU(c),Yt.none()),$=>(g.rtcInstance=TX(),Yt.some(()=>$().then(et=>(g.rtcInstance=cU(et),et.rtc.isRemote)))))},FR=c=>c.rtcInstance?c.rtcInstance:lU(c),Em=c=>{const g=c.rtcInstance;if(g)return g;throw new Error("Failed to get RTC instance not yet initialized.")},dU=(c,g,$)=>{Em(c).undoManager.beforeChange(g,$)},wF=(c,g,$,et,ot,at,ht)=>Em(c).undoManager.add(g,$,et,ot,at,ht),fU=(c,g,$,et)=>Em(c).undoManager.undo(g,$,et),hU=(c,g,$)=>Em(c).undoManager.redo(g,$),CF=(c,g,$)=>{Em(c).undoManager.clear(g,$)},pU=(c,g)=>{Em(c).undoManager.reset(g)},gU=(c,g,$)=>Em(c).undoManager.hasUndo(g,$),mU=(c,g,$)=>Em(c).undoManager.hasRedo(g,$),RX=(c,g,$,et)=>Em(c).undoManager.transact(g,$,et),kF=(c,g,$)=>{Em(c).undoManager.ignore(g,$)},MX=(c,g,$,et,ot)=>{Em(c).undoManager.extra(g,$,et,ot)},XO=(c,g,$,et,ot)=>Em(c).formatter.match(g,$,et,ot),PX=(c,g,$)=>Em(c).formatter.matchAll(g,$),OX=(c,g,$,et,ot)=>Em(c).formatter.matchNode(g,$,et,ot),DX=(c,g)=>Em(c).formatter.canApply(g),yU=(c,g)=>Em(c).formatter.closest(g),bU=(c,g,$,et)=>{Em(c).formatter.apply(g,$,et)},NX=(c,g,$,et,ot)=>{Em(c).formatter.remove(g,$,et,ot)},LX=(c,g,$,et)=>{Em(c).formatter.toggle(g,$,et)},FX=(c,g,$,et,ot,at)=>Em(c).formatter.formatChanged(g,$,et,ot,at),zX=(c,g)=>FR(c).editor.getContent(g),BX=(c,g,$)=>FR(c).editor.setContent(g,$),vU=(c,g,$)=>FR(c).editor.insertContent(g,$),Eie=(c,g,$)=>Em(c).selection.getContent(g,$),$X=(c,g)=>Em(c).editor.addVisual(g),_U=c=>Em(c).init.bindEvents(),GX=(c,g={})=>{const $=g.format?g.format:"html";return Eie(c,$,g)},xU=c=>c.dom.length===0?(mu(c),Yt.none()):Yt.some(c),jX=(c,g)=>c.filter($=>H2.isBookmarkNode($.dom)).bind(g?Km:sv),UX=(c,g,$,et,ot)=>{const at=c.dom,ht=g.dom,_t=et?at.length:ht.length;et?(o6(at,ht,ot,!1,!et),$.setStart(ht,_t)):(o6(ht,at,ot,!1,!et),$.setEnd(ht,_t))},HX=(c,g,$)=>{Dm(c).each(et=>{const ot=c.dom;g&&eR(et,Uo(ot,0),$)?eO(ot,0,$):!g&&tR(et,Uo(ot,ot.length),$)&&n6(ot,ot.length,$)})},SF=(c,g,$,et,ot)=>{c.bind(at=>((et?n6:eO)(at.dom,et?at.dom.length:0,ot),g.filter(gu).map(_t=>UX(at,_t,$,et,ot)))).orThunk(()=>jX(g,et).or(g).filter(gu).map(ht=>HX(ht,et,ot)))},VX=(c,g,$)=>{const et=Yt.from(g.firstChild).map(Qn.fromDom),ot=Yt.from(g.lastChild).map(Qn.fromDom);c.deleteContents(),c.insertNode(g);const at=et.bind(sv).filter(gu).bind(xU),ht=ot.bind(Km).filter(gu).bind(xU);SF(at,et,c,!0,$),SF(ht,ot,c,!1,$),c.collapse(!1)},WX=(c,g)=>({format:"html",...c,set:!0,selection:!0,content:g}),qX=(c,g)=>{if(g.format!=="raw"){const $=c.selection.getRng(),et=c.dom.getParent($.commonAncestorContainer,c.dom.isBlock),ot=et?{context:et.nodeName.toLowerCase()}:{},at=c.parser.parse(g.content,{forced_root_block:!1,...ot,...g});return uS({validate:!1},c.schema).serialize(at)}else return g.content},ZX=(c,g,$={})=>{const et=WX($,g);jO(c,et).each(ot=>{const at=qX(c,ot),ht=c.selection.getRng();VX(ht,ht.createContextualFragment(at),c.schema),c.selection.setRng(ht),Z2(c,ht),UO(c,at,ot)})},wU=(c,g,$)=>{if(Jr(c,g)){const et=zn(c[g],ot=>ot!==$);et.length===0?delete c[g]:c[g]=et}};var Aie=(c,g)=>{let $,et;const ot=(_t,St)=>Jn(St,Lt=>c.is(Lt,_t)),at=_t=>c.getParents(_t,void 0,c.getRoot()),ht=()=>{$={},et={},g.on("NodeChange",_t=>{const St=_t.element,Lt=at(St),Ht={};tr($,(qt,Qt)=>{ot(Qt,Lt).each(gn=>{et[Qt]||(rn(qt,kn=>{kn(!0,{node:gn,selector:Qt,parents:Lt})}),et[Qt]=qt),Ht[Qt]=qt})}),tr(et,(qt,Qt)=>{Ht[Qt]||(delete et[Qt],rn(qt,gn=>{gn(!1,{node:St,selector:Qt,parents:Lt})}))})})};return{selectorChangedWithUnbind:(_t,St)=>($||ht(),$[_t]||($[_t]=[]),$[_t].push(St),ot(_t,at(g.selection.getStart())).each(()=>{et[_t]=$[_t]}),{unbind:()=>{wU($,_t,St),wU(et,_t,St)}})}};const KX=c=>!!(c&&c.ownerDocument)&&Om(Qn.fromDom(c.ownerDocument),Qn.fromDom(c)),YX=c=>c?KX(c.startContainer)&&KX(c.endContainer):!1,CU=(c,g,$,et)=>{let ot,at;const{selectorChangedWithUnbind:ht}=Aie(c,et),_t=(Er,ds)=>{const _c=c.createRng();an(Er)&&an(ds)?(_c.setStart(Er,ds),_c.setEnd(Er,ds),To(_c),so(!1)):(_P(c,_c,et.getBody(),!0),To(_c))},St=Er=>GX(et,Er),Lt=(Er,ds)=>ZX(et,Er,ds),Ht=Er=>TB(et.getBody(),xo(),Er),qt=Er=>IB(et.getBody(),xo(),Er),Qt=(Er,ds)=>k0.getBookmark(Er,ds),gn=Er=>k0.moveToBookmark(Er),kn=(Er,ds)=>(MB(c,Er,ds).each(To),Er),yn=()=>{const Er=xo(),ds=ho();return!Er||Er.item?!1:Er.compareEndPoints?Er.compareEndPoints("StartToEnd",Er)===0:!ds||Er.collapsed},Rn=()=>{if(et.mode.isReadOnly())return!1;const Er=xo(),ds=et.getBody().querySelectorAll('[data-mce-selected="1"]');return ds.length>0?wo(ds,_c=>c.isEditable(_c.parentElement)):G8(c,Er)},so=Er=>{const ds=xo();ds.collapse(!!Er),To(ds)},ho=()=>g.getSelection?g.getSelection():g.document.selection,xo=()=>{let Er;const ds=(Lr,Ts,Is)=>{try{return Ts.compareBoundaryPoints(Lr,Is)}catch{return-1}},_c=g.document;if(an(et.bookmark)&&!hI(et)){const Lr=jP(et);if(Lr.isSome())return Lr.map(Ts=>KP(et,[Ts])[0]).getOr(_c.createRange())}try{const Lr=ho();Lr&&!ox(Lr.anchorNode)&&(Lr.rangeCount>0?Er=Lr.getRangeAt(0):Er=_c.createRange(),Er=KP(et,[Er])[0])}catch{}if(Er||(Er=_c.createRange()),qx(Er.startContainer)&&Er.collapsed){const Lr=c.getRoot();Er.setStart(Lr,0),Er.setEnd(Lr,0)}return ot&&at&&(ds(Er.START_TO_START,Er,ot)===0&&ds(Er.END_TO_END,Er,ot)===0?Er=at:(ot=null,at=null)),Er},To=(Er,ds)=>{if(!YX(Er))return;const _c=ho();if(Er=et.dispatch("SetSelectionRange",{range:Er,forward:ds}).range,_c){at=Er;try{_c.removeAllRanges(),_c.addRange(Er)}catch{}ds===!1&&_c.extend&&(_c.collapse(Er.endContainer,Er.endOffset),_c.extend(Er.startContainer,Er.startOffset)),ot=_c.rangeCount>0?_c.getRangeAt(0):null}if(!Er.collapsed&&Er.startContainer===Er.endContainer&&(_c!=null&&_c.setBaseAndExtent)&&Er.endOffset-Er.startOffset<2&&Er.startContainer.hasChildNodes()){const Ts=Er.startContainer.childNodes[Er.startOffset];Ts&&Ts.nodeName==="IMG"&&(_c.setBaseAndExtent(Er.startContainer,Er.startOffset,Er.endContainer,Er.endOffset),(_c.anchorNode!==Er.startContainer||_c.focusNode!==Er.endContainer)&&_c.setBaseAndExtent(Ts,0,Ts,1))}et.dispatch("AfterSetSelectionRange",{range:Er,forward:ds})},or=Er=>(Lt(c.getOuterHTML(Er)),Er),mr=()=>rK(et.getBody(),xo()),$r=(Er,ds)=>ZP(c,xo(),Er,ds),Zo=()=>{const Er=ho(),ds=Er==null?void 0:Er.anchorNode,_c=Er==null?void 0:Er.focusNode;if(!Er||!ds||!_c||ox(ds)||ox(_c))return!0;const Lr=c.createRng(),Ts=c.createRng();try{Lr.setStart(ds,Er.anchorOffset),Lr.collapse(!0),Ts.setStart(_c,Er.focusOffset),Ts.collapse(!0)}catch{return!0}return Lr.compareBoundaryPoints(Lr.START_TO_START,Ts)<=0},jp={dom:c,win:g,serializer:$,editor:et,expand:(Er={type:"word"})=>To(ar(c).expand(xo(),Er)),collapse:so,setCursorLocation:_t,getContent:St,setContent:Lt,getBookmark:Qt,moveToBookmark:gn,select:kn,isCollapsed:yn,isEditable:Rn,isForward:Zo,setNode:or,getNode:mr,getSel:ho,setRng:To,getRng:xo,getStart:Ht,getEnd:qt,getSelectedBlocks:$r,normalize:()=>{const Er=xo(),ds=ho();if(!o8(ds)&&UT(et)){const _c=Tr(c,Er);return _c.each(Lr=>{To(Lr,Zo())}),_c.getOr(Er)}return Er},selectorChanged:(Er,ds)=>(ht(Er,ds),jp),selectorChangedWithUnbind:ht,getScrollContainer:()=>{let Er,ds=c.getRoot();for(;ds&&ds.nodeName!=="BODY";){if(ds.scrollHeight>ds.clientHeight){Er=ds;break}ds=ds.parentNode}return Er},scrollIntoView:(Er,ds)=>{an(Er)?VZ(et,Er,ds):Z2(et,xo(),ds)},placeCaretAt:(Er,ds)=>To(vt(Er,ds,et.getDoc())),getBoundingClientRect:()=>{const Er=xo();return Er.collapsed?Uo.fromRangeStart(Er).getClientRects()[0]:Er.getBoundingClientRect()},destroy:()=>{g=ot=at=null,qp.destroy()}},k0=H2(jp),qp=V5(jp,et);return jp.bookmarkManager=k0,jp.controlSelection=qp,jp},Tie=(c,g,$)=>{g.addNodeFilter("br",(et,ot,at)=>{const ht=cr.extend({},$.getBlockElements()),_t=$.getNonEmptyElements(),St=$.getWhitespaceElements();ht.body=1;const Lt=Ht=>Ht.name in ht||w_($,Ht);for(let Ht=0,qt=et.length;Ht<qt;Ht++){let Qt=et[Ht],gn=Qt.parent;if(gn&&Lt(gn)&&Qt===gn.lastChild){let kn=Qt.prev;for(;kn;){const yn=kn.name;if(yn!=="span"||kn.attr("data-mce-type")!=="bookmark"){yn==="br"&&(Qt=null);break}kn=kn.prev}if(Qt&&(Qt.remove(),Sm($,_t,St,gn))){const yn=$.getElementRule(gn.name);yn&&(yn.removeEmpty?gn.remove():yn.paddEmpty&&C6(c,at,Lt,gn))}}else{let kn=Qt;for(;gn&&gn.firstChild===kn&&gn.lastChild===kn&&(kn=gn,!ht[gn.name]);)gn=gn.parent;if(kn===gn){const yn=new Iy("#text",3);yn.value=dm,Qt.replace(yn)}}}})},XX=(c,g,$)=>{c.addAttributeFilter("data-mce-tabindex",(et,ot)=>{let at=et.length;for(;at--;){const ht=et[at];ht.attr("tabindex",ht.attr("data-mce-tabindex")),ht.attr(ot,null)}}),c.addAttributeFilter("src,href,style",(et,ot)=>{const at="data-mce-"+ot,ht=g.url_converter,_t=g.url_converter_scope;let St=et.length;for(;St--;){const Lt=et[St];let Ht=Lt.attr(at);Ht!==void 0?(Lt.attr(ot,Ht.length>0?Ht:null),Lt.attr(at,null)):(Ht=Lt.attr(ot),ot==="style"?Ht=$.serializeStyle($.parseStyle(Ht),Lt.name):ht&&(Ht=ht.call(_t,Ht,ot,Lt.name)),Lt.attr(ot,Ht.length>0?Ht:null))}}),c.addAttributeFilter("class",et=>{let ot=et.length;for(;ot--;){const at=et[ot];let ht=at.attr("class");ht&&(ht=ht.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),at.attr("class",ht.length>0?ht:null))}}),c.addAttributeFilter("data-mce-type",(et,ot,at)=>{let ht=et.length;for(;ht--;){const _t=et[ht];_t.attr("data-mce-type")==="bookmark"&&!at.cleanup&&(Yt.from(_t.firstChild).exists(Lt=>{var Ht;return!lE((Ht=Lt.value)!==null&&Ht!==void 0?Ht:"")})?_t.unwrap():_t.remove())}}),c.addNodeFilter("script,style",(et,ot)=>{var at;const ht=St=>St.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let _t=et.length;for(;_t--;){const St=et[_t],Lt=St.firstChild,Ht=(at=Lt==null?void 0:Lt.value)!==null&&at!==void 0?at:"";if(ot==="script"){const qt=St.attr("type");qt&&St.attr("type",qt==="mce-no/type"?null:qt.replace(/^mce\-/,"")),g.element_format==="xhtml"&&Lt&&Ht.length>0&&(Lt.value=`// <![CDATA[
`+ht(Ht)+`
// ]]>`)}else g.element_format==="xhtml"&&Lt&&Ht.length>0&&(Lt.value=`<!--
`+ht(Ht)+`
-->`)}}),c.addNodeFilter("#comment",et=>{let ot=et.length;for(;ot--;){const at=et[ot],ht=at.value;g.preserve_cdata&&(ht==null?void 0:ht.indexOf("[CDATA["))===0?(at.name="#cdata",at.type=4,at.value=$.decode(ht.replace(/^\[CDATA\[|\]\]$/g,""))):(ht==null?void 0:ht.indexOf("mce:protected "))===0&&(at.name="#text",at.type=3,at.raw=!0,at.value=unescape(ht).substr(14))}}),c.addNodeFilter("xml:namespace,input",(et,ot)=>{let at=et.length;for(;at--;){const ht=et[at];ht.type===7?ht.remove():ht.type===1&&ot==="input"&&!ht.attr("type")&&ht.attr("type","text")}}),c.addAttributeFilter("data-mce-type",et=>{rn(et,ot=>{ot.attr("data-mce-type")==="format-caret"&&(ot.isEmpty(c.schema.getNonEmptyElements())?ot.remove():ot.unwrap())})}),c.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(et,ot)=>{let at=et.length;for(;at--;)et[at].attr(ot,null)}),g.remove_trailing_brs&&Tie(g,c,c.schema)},$p=c=>{const g=et=>(et==null?void 0:et.name)==="br",$=c.lastChild;if(g($)){const et=$.prev;g(et)&&($.remove(),et.remove())}},EF=(c,g,$)=>{let et;const ot=c.dom;let at=g.cloneNode(!0);const ht=document.implementation;if(ht.createHTMLDocument){const _t=ht.createHTMLDocument("");cr.each(at.nodeName==="BODY"?at.childNodes:[at],St=>{_t.body.appendChild(_t.importNode(St,!0))}),at.nodeName!=="BODY"?at=_t.body.firstChild:at=_t.body,et=ot.doc,ot.doc=_t}return YT(c,{...$,node:at}),et&&(ot.doc=et),at},Iie=(c,g)=>an(c)&&c.hasEventListeners("PreProcess")&&!g.no_events,JX=(c,g,$)=>Iie(c,$)?EF(c,g,$):g,QX=(c,g,$)=>{cr.inArray(g,$)===-1&&(c.addAttributeFilter($,(et,ot)=>{let at=et.length;for(;at--;)et[at].attr(ot,null)}),g.push($))},SI=(c,g,$)=>!g.no_events&&c?XT(c,{...g,content:$}).content:$,Rie=(c,g,$)=>{const et=fv($.getInner?g.innerHTML:c.getOuterHTML(g));return $.selection||iT(Qn.fromDom(g))?et:cr.trim(et)},Mie=(c,g,$)=>{const et=$.selection?{forced_root_block:!1,...$}:$,ot=c.parse(g,et);return $p(ot),ot},z0=(c,g,$)=>uS(c,g).serialize($),kU=(c,g,$,et,ot)=>{const at=z0(g,$,et);return SI(c,ot,at)},SU=(c,g)=>{const $=["data-mce-selected"],et={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...c},ot=g&&g.dom?g.dom:$u.DOM,at=g&&g.schema?g.schema:yu(et),ht=uA(et,at);XX(ht,et,ot);const _t=(St,Lt={})=>{const Ht={format:"html",...Lt},qt=JX(g,St,Ht),Qt=Rie(ot,qt,Ht),gn=Mie(ht,Qt,Ht);return Ht.format==="tree"?gn:kU(g,et,at,gn,Ht)};return{schema:at,addNodeFilter:ht.addNodeFilter,addAttributeFilter:ht.addAttributeFilter,serialize:_t,addRules:at.addValidElements,setRules:at.setValidElements,addTempAttr:An(QX,ht,$),getTempAttrs:ln($),getNodeFilters:ht.getNodeFilters,getAttributeFilters:ht.getAttributeFilters,removeNodeFilter:ht.removeNodeFilter,removeAttributeFilter:ht.removeAttributeFilter}},AF=(c,g)=>{const $=SU(c,g);return{schema:$.schema,addNodeFilter:$.addNodeFilter,addAttributeFilter:$.addAttributeFilter,serialize:$.serialize,addRules:$.addRules,setRules:$.setRules,addTempAttr:$.addTempAttr,getTempAttrs:$.getTempAttrs,getNodeFilters:$.getNodeFilters,getAttributeFilters:$.getAttributeFilters,removeNodeFilter:$.removeNodeFilter,removeAttributeFilter:$.removeAttributeFilter}},eJ="html",tJ=(c,g)=>({...c,format:g,get:!0,getInner:!0}),JO=(c,g={})=>{const $=g.format?g.format:eJ,et=tJ(g,$);return jG(c,et).fold(uo,ot=>{const at=zX(c,ot);return dF(c,at,ot)})},nJ="html",TF=(c,g)=>({format:nJ,...c,set:!0,content:g}),IF=(c,g,$={})=>{const et=TF($,g);return jO(c,et).map(ot=>{const at=BX(c,ot.content,ot);return UO(c,at.html,ot),at.content}).getOr(g)},EU="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),AU=[],RF="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),MF=[],QO=(c,g)=>{const $=zn(g,et=>Jr(c,et));return vr($)},oJ=c=>{const g=QO(c,EU),$=c.forced_root_block;return($===!1||$==="")&&g.push("forced_root_block (false only)"),vr(g)},rJ=c=>QO(c,AU),TU=(c,g)=>{const $=cr.makeMap(c.plugins," "),ot=zn(g,at=>Jr($,at));return vr(ot)},r1=c=>TU(c,RF),sJ=c=>TU(c,MF.map(g=>g.name)),iJ=(c,g)=>{const $=oJ(c),et=r1(g),ot=et.length>0,at=$.length>0,ht=g.theme==="mobile";if(ot||at||ht){const _t=`
- `,St=ht?`

Themes:${_t}mobile`:"",Lt=ot?`

Plugins:${_t}${et.join(_t)}`:"",Ht=at?`

Options:${_t}${$.join(_t)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+St+Lt+Ht)}},aJ=c=>Jn(MF,g=>g.name===c).fold(()=>c,g=>g.replacedWith?`${c}, replaced by ${g.replacedWith}`:c),lJ=(c,g)=>{const $=rJ(c),et=sJ(g),ot=et.length>0,at=$.length>0;if(ot||at){const ht=`
- `,_t=ot?`

Plugins:${ht}${et.map(aJ).join(ht)}`:"",St=at?`

Options:${ht}${$.join(ht)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+_t+St)}},cJ=(c,g)=>{iJ(c,g),lJ(c,g)},zR=$u.DOM,uJ=c=>{zR.setStyle(c.id,"display",c.orgDisplay)},eD=c=>Yt.from(c).each(g=>g.destroy()),dJ=c=>{const g=c;g.contentAreaContainer=g.formElement=g.container=g.editorContainer=null,g.bodyElement=g.contentDocument=g.contentWindow=null,g.iframeElement=g.targetElm=null;const $=c.selection;if($){const et=$.dom;g.selection=$.win=$.dom=et.doc=null}},tD=c=>{const g=c.formElement;g&&(g._mceOldSubmit&&(g.submit=g._mceOldSubmit,delete g._mceOldSubmit),zR.unbind(g,"submit reset",c.formEventDelegate))},fJ=c=>{if(!c.removed){const{_selectionOverrides:g,editorUpload:$}=c,et=c.getBody(),ot=c.getElement();et&&c.save({is_removing:!0}),c.removed=!0,c.unbindAllNativeEvents(),c.hasHiddenInput&&an(ot==null?void 0:ot.nextSibling)&&zR.remove(ot.nextSibling),d8(c),c.editorManager.remove(c),!c.inline&&et&&uJ(c),f8(c),zR.remove(c.getContainer()),eD(g),eD($),c.destroy()}},hJ=(c,g)=>{const{selection:$,dom:et}=c;if(!c.destroyed){if(!g&&!c.removed){c.remove();return}g||(c.editorManager.off("beforeunload",c._beforeUnload),c.theme&&c.theme.destroy&&c.theme.destroy(),eD($),eD(et)),tD(c),dJ(c),c.destroyed=!0}},EI=(()=>{const c={};return{add:(ot,at)=>{c[ot]=at},get:ot=>c[ot]?c[ot]:{icons:{}},has:ot=>Jr(c,ot)}})(),AI=D0.ModelManager,IU=(c,g)=>g.dom[c],gJ=(c,g)=>parseInt(bp(g,c),10),mJ=An(IU,"clientWidth"),BR=An(IU,"clientHeight"),RU=An(gJ,"margin-top"),MU=An(gJ,"margin-left"),yJ=c=>c.dom.getBoundingClientRect(),PU=(c,g,$)=>{const et=mJ(c),ot=BR(c);return g>=0&&$>=0&&g<=et&&$<=ot},bJ=(c,g,$,et)=>{const ot=yJ(g),at=c?ot.left+g.dom.clientLeft+MU(g):0,ht=c?ot.top+g.dom.clientTop+RU(g):0,_t=$-at,St=et-ht;return{x:_t,y:St}},vJ=(c,g,$)=>{const et=Qn.fromDom(c.getBody()),ot=c.inline?et:jx(et),at=bJ(c.inline,ot,g,$);return PU(ot,at.x,at.y)},_J=c=>Yt.from(c).map(Qn.fromDom),xJ=c=>{const g=c.inline?c.getBody():c.getContentAreaContainer();return _J(g).map(S1).getOr(!1)};var OU=()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}};const DU=c=>{const g=[],$=()=>{const Qt=c.theme;return Qt&&Qt.getNotificationManagerImpl?Qt.getNotificationManagerImpl():OU()},et=()=>Yt.from(g[0]),ot=(Qt,gn)=>Qt.type===gn.type&&Qt.text===gn.text&&!Qt.progressBar&&!Qt.timeout&&!gn.progressBar&&!gn.timeout,at=()=>{et().each(Qt=>{Qt.reposition()})},ht=Qt=>{g.push(Qt)},_t=Qt=>{bo(g,gn=>gn===Qt).each(gn=>{g.splice(gn,1)})},St=(Qt,gn=!0)=>c.removed||!xJ(c)?{}:(gn&&c.dispatch("BeforeOpenNotification",{notification:Qt}),Jn(g,kn=>ot($().getArgs(kn),Qt)).getOrThunk(()=>{c.editorManager.setActive(c);const kn=$().open(Qt,()=>{_t(kn)},()=>EB(c));return ht(kn),at(),c.dispatch("OpenNotification",{notification:{...kn}}),kn})),Lt=()=>{et().each(Qt=>{$().close(Qt),_t(Qt),at()})},Ht=ln(g);return(Qt=>{Qt.on("SkinLoaded",()=>{const gn=r5(Qt);gn&&St({text:gn,type:"warning",timeout:0},!1),at()}),Qt.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(at)}),Qt.on("remove",()=>{rn(g.slice(),gn=>{$().close(gn)})}),Qt.on("keydown",gn=>{var kn;const yn=((kn=gn.key)===null||kn===void 0?void 0:kn.toLowerCase())==="f12"||gn.keyCode===123;gn.altKey&&yn&&(gn.preventDefault(),et().map(Rn=>Qn.fromDom(Rn.getEl())).each(Rn=>qE(Rn)))})})(c),{open:St,close:Lt,getNotifications:Ht}},TI=D0.PluginManager,Ax=D0.ThemeManager;var NU=()=>{const c=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:c,openUrl:c,alert:c,confirm:c,close:c}};const PF=c=>{let g=[];const $=()=>{const yn=c.theme;return yn&&yn.getWindowManagerImpl?yn.getWindowManagerImpl():NU()},et=(yn,Rn)=>(...so)=>Rn?Rn.apply(yn,so):void 0,ot=yn=>{c.dispatch("OpenWindow",{dialog:yn})},at=yn=>{c.dispatch("CloseWindow",{dialog:yn})},ht=yn=>{g.push(yn),ot(yn)},_t=yn=>{at(yn),g=zn(g,Rn=>Rn!==yn),g.length===0&&c.focus()},St=()=>Yt.from(g[g.length-1]),Lt=yn=>{c.editorManager.setActive(c),Y5(c),c.ui.show();const Rn=yn();return ht(Rn),Rn},Ht=(yn,Rn)=>Lt(()=>$().open(yn,Rn,_t)),qt=yn=>Lt(()=>$().openUrl(yn,_t)),Qt=(yn,Rn,so)=>{const ho=$();ho.alert(yn,et(so||ho,Rn))},gn=(yn,Rn,so)=>{const ho=$();ho.confirm(yn,et(so||ho,Rn))},kn=()=>{St().each(yn=>{$().close(yn),_t(yn)})};return c.on("remove",()=>{rn(g,yn=>{$().close(yn)})}),{open:Ht,openUrl:qt,alert:Qt,confirm:gn,close:kn}},LU=(c,g)=>{c.notificationManager.open({type:"error",text:g})},nD=(c,g)=>{c._skinLoaded?LU(c,g):c.on("SkinLoaded",()=>{LU(c,g)})},wJ=(c,g)=>{nD(c,L1.translate(["Failed to upload image: {0}",g]))},II=(c,g,$)=>{_v(c,g,{message:$}),console.error($)},$R=(c,g,$)=>$?`Failed to load ${c}: ${$} from url ${g}`:`Failed to load ${c} url: ${g}`,CJ=(c,g,$)=>{II(c,"PluginLoadError",$R("plugin",g,$))},kJ=(c,g,$)=>{II(c,"IconsLoadError",$R("icons",g,$))},SJ=(c,g,$)=>{II(c,"LanguageLoadError",$R("language",g,$))},Pie=(c,g,$)=>{II(c,"ThemeLoadError",$R("theme",g,$))},Tx=(c,g,$)=>{II(c,"ModelLoadError",$R("model",g,$))},OF=(c,g,$)=>{const et=L1.translate(["Failed to initialize plugin: {0}",g]);_v(c,"PluginLoadError",{message:et}),oD(et,$),nD(c,et)},oD=(c,...g)=>{const $=window.console;$&&($.error?$.error(c,...g):$.log(c,...g))},EJ=c=>/^[a-z0-9\-]+$/i.test(c),DF=c=>"content/"+c+"/content.css",AJ=c=>tinymce.Resource.has(DF(c)),pu=c=>RI(c,E2(c)),TJ=c=>RI(c,ML(c)),RI=(c,g)=>{const $=c.editorManager.baseURL+"/skins/content",ot=`content${c.editorManager.suffix}.css`;return Dn(g,at=>AJ(at)?at:EJ(at)&&!c.inline?`${$}/${at}/${ot}`:c.documentBaseURI.toAbsolute(at))},IJ=c=>{c.contentCSS=c.contentCSS.concat(pu(c),TJ(c))},RJ=c=>c?Ss(c.getElementsByTagName("img")):[],MJ=(c,g)=>{const $={};return{findAll:(ot,at=_o)=>{const ht=zn(RJ(ot),St=>{const Lt=St.src;return St.hasAttribute("data-mce-bogus")||St.hasAttribute("data-mce-placeholder")||!Lt||Lt===Kr.transparentSrc?!1:ks(Lt,"blob:")?!c.isUploaded(Lt)&&at(St):ks(Lt,"data:")?at(St):!1}),_t=Dn(ht,St=>{const Lt=St.src;if(Jr($,Lt))return $[Lt].then(Ht=>Et(Ht)?Ht:{image:St,blobInfo:Ht.blobInfo});{const Ht=wR(g,Lt).then(qt=>(delete $[Lt],{image:St,blobInfo:qt})).catch(qt=>(delete $[Lt],qt));return $[Lt]=Ht,Ht}});return Promise.all(_t)}}},NF=()=>{let $={};const et=(Qt,gn)=>({status:Qt,resultUri:gn}),ot=Qt=>Qt in $;return{hasBlobUri:ot,getResultUri:Qt=>{const gn=$[Qt];return gn?gn.resultUri:null},isPending:Qt=>ot(Qt)?$[Qt].status===1:!1,isUploaded:Qt=>ot(Qt)?$[Qt].status===2:!1,markPending:Qt=>{$[Qt]=et(1,null)},markUploaded:(Qt,gn)=>{$[Qt]=et(2,gn)},removeFailed:Qt=>{delete $[Qt]},destroy:()=>{$={}}}};let ES=0;const Yy=()=>{const c=()=>Math.round(sE()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+c()+c()+c()},GR=c=>c+ES+++Yy(),AS=()=>{let c=[];const g=qt=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[qt.toLowerCase()]||"dat",$=(qt,Qt,gn,kn,yn)=>{if(Et(qt))return et({id:qt,name:kn,filename:yn,blob:Qt,base64:gn});if($t(qt))return et(qt);throw new Error("Unknown input type")},et=qt=>{if(!qt.blob||!qt.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const Qt=qt.id||GR("blobid"),gn=qt.name||Qt,kn=qt.blob;return{id:ln(Qt),name:ln(gn),filename:ln(qt.filename||gn+"."+g(kn.type)),blob:ln(kn),base64:ln(qt.base64),blobUri:ln(qt.blobUri||URL.createObjectURL(kn)),uri:ln(qt.uri)}},ot=qt=>{ht(qt.id())||c.push(qt)},at=qt=>Jn(c,qt).getOrUndefined(),ht=qt=>at(Qt=>Qt.id()===qt);return{create:$,add:ot,get:ht,getByUri:qt=>at(Qt=>Qt.blobUri()===qt),getByData:(qt,Qt)=>at(gn=>gn.base64()===qt&&gn.blob().type===Qt),findFirst:at,removeByUri:qt=>{c=zn(c,Qt=>Qt.blobUri()===qt?(URL.revokeObjectURL(Qt.blobUri()),!1):!0)},destroy:()=>{rn(c,qt=>{URL.revokeObjectURL(qt.blobUri())}),c=[]}}},Rw=(c,g)=>{const $={},et=(yn,Rn)=>yn?yn.replace(/\/$/,"")+"/"+Rn.replace(/^\//,""):Rn,ot=(yn,Rn)=>new Promise((so,ho)=>{const xo=new XMLHttpRequest;xo.open("POST",g.url),xo.withCredentials=g.credentials,xo.upload.onprogress=or=>{Rn(or.loaded/or.total*100)},xo.onerror=()=>{ho("Image upload failed due to a XHR Transport error. Code: "+xo.status)},xo.onload=()=>{if(xo.status<200||xo.status>=300){ho("HTTP Error: "+xo.status);return}const or=JSON.parse(xo.responseText);if(!or||!Et(or.location)){ho("Invalid JSON: "+xo.responseText);return}so(et(g.basePath,or.location))};const To=new FormData;To.append("file",yn.blob(),yn.filename()),xo.send(To)}),at=Vt(g.handler)?g.handler:ot,ht=()=>new Promise(yn=>{yn([])}),_t=(yn,Rn)=>({url:Rn,blobInfo:yn,status:!0}),St=(yn,Rn)=>({url:"",blobInfo:yn,status:!1,error:Rn}),Lt=(yn,Rn)=>{cr.each($[yn],so=>{so(Rn)}),delete $[yn]},Ht=(yn,Rn,so)=>(c.markPending(yn.blobUri()),new Promise(ho=>{let xo,To;try{const or=()=>{xo&&(xo.close(),To=fn)},mr=Zo=>{or(),c.markUploaded(yn.blobUri(),Zo),Lt(yn.blobUri(),_t(yn,Zo)),ho(_t(yn,Zo))},$r=Zo=>{or(),c.removeFailed(yn.blobUri()),Lt(yn.blobUri(),St(yn,Zo)),ho(St(yn,Zo))};To=Zo=>{Zo<0||Zo>100||Yt.from(xo).orThunk(()=>Yt.from(so).map(no)).each(Lo=>{xo=Lo,Lo.progressBar.value(Zo)})},Rn(yn,To).then(mr,Zo=>{$r(Et(Zo)?{message:Zo}:Zo)})}catch(or){ho(St(yn,or))}})),qt=yn=>yn===ot,Qt=yn=>{const Rn=yn.blobUri();return new Promise(so=>{$[Rn]=$[Rn]||[],$[Rn].push(so)})},gn=(yn,Rn)=>(yn=cr.grep(yn,so=>!c.isUploaded(so.blobUri())),Promise.all(cr.map(yn,so=>c.isPending(so.blobUri())?Qt(so):Ht(so,at,Rn))));return{upload:(yn,Rn)=>!g.url&&qt(at)?ht():gn(yn,Rn)}},MI=c=>()=>c.notificationManager.open({text:c.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),rD=(c,g)=>Rw(g,{url:t5(c),basePath:n5(c),credentials:o5(c),handler:M4(c)}),LF=c=>{const g=NF(),$=rD(c,g);return{upload:(et,ot=!0)=>$.upload(et,ot?MI(c):void 0)}},FU=(c,g)=>c.dom.isEmpty(g.dom)&&an(c.schema.getTextBlockElements()[Sn(g)]),zU=c=>g=>{FU(c,g)&&Up(g,Qn.fromHtml('<br data-mce-bogus="1" />'))},PJ=c=>{const g=AS();let $,et;const ot=NF(),at=[],ht=xo=>To=>c.selection?xo(To):[],_t=xo=>xo+(xo.indexOf("?")===-1?"?":"&")+new Date().getTime(),St=(xo,To,or)=>{let mr=0;do mr=xo.indexOf(To,mr),mr!==-1&&(xo=xo.substring(0,mr)+or+xo.substr(mr+To.length),mr+=or.length-To.length+1);while(mr!==-1);return xo},Lt=(xo,To,or)=>{const mr=`src="${or}"${or===Kr.transparentSrc?' data-mce-placeholder="1"':""}`;return xo=St(xo,`src="${To}"`,mr),xo=St(xo,'data-mce-src="'+To+'"','data-mce-src="'+or+'"'),xo},Ht=(xo,To)=>{rn(c.undoManager.data,or=>{or.type==="fragmented"?or.fragments=Dn(or.fragments,mr=>Lt(mr,xo,To)):or.content=Lt(or.content,xo,To)})},qt=(xo,To)=>{const or=c.convertURL(To,"src");Ht(xo.src,To),Tp(Qn.fromDom(xo),{src:ym(c)?_t(To):To,"data-mce-src":or})},Qt=()=>($||($=rD(c,ot)),Rn().then(ht(xo=>{const To=Dn(xo,or=>or.blobInfo);return $.upload(To,MI(c)).then(ht(or=>{const mr=[];let $r=!1;const Zo=Dn(or,(Lo,ir)=>{const{blobInfo:Gr,image:gs}=xo[ir];let Cl=!1;return Lo.status&&hu(c)?(Lo.url&&!hs(gs.src,Lo.url)&&($r=!0),g.removeByUri(gs.src),Iw(c)||qt(gs,Lo.url)):Lo.error&&(Lo.error.remove&&(Ht(gs.src,Kr.transparentSrc),mr.push(gs),Cl=!0),wJ(c,Lo.error.message)),{element:gs,status:Lo.status,uploadUri:Lo.url,blobInfo:Gr,removed:Cl}});return mr.length>0&&!Iw(c)?c.undoManager.transact(()=>{rn(av(mr),Lo=>{const ir=Dm(Lo);mu(Lo),ir.each(zU(c)),g.removeByUri(Lo.dom.src)})}):$r&&c.undoManager.dispatchChange(),Zo}))}))),gn=()=>n0(c)?Qt():Promise.resolve([]),kn=xo=>wo(at,To=>To(xo)),yn=xo=>{at.push(xo)},Rn=()=>(et||(et=MJ(ot,g)),et.findAll(c.getBody(),kn).then(ht(xo=>{const To=zn(xo,or=>Et(or)?(nD(c,or),!1):or.uriType!=="blob");return Iw(c)||rn(To,or=>{Ht(or.image.src,or.blobInfo.blobUri()),or.image.src=or.blobInfo.blobUri(),or.image.removeAttribute("data-mce-src")}),To}))),so=()=>{g.destroy(),ot.destroy(),et=$=null},ho=xo=>xo.replace(/src="(blob:[^"]+)"/g,(To,or)=>{const mr=ot.getResultUri(or);if(mr)return'src="'+mr+'"';let $r=g.getByUri(or);return $r||($r=Hn(c.editorManager.get(),(Zo,Lo)=>Zo||Lo.editorUpload&&Lo.editorUpload.blobCache.getByUri(or),void 0)),$r?'src="data:'+$r.blob().type+";base64,"+$r.base64()+'"':To});return c.on("SetContent",()=>{n0(c)?gn():Rn()}),c.on("RawSaveContent",xo=>{xo.content=ho(xo.content)}),c.on("GetContent",xo=>{xo.source_view||xo.format==="raw"||xo.format==="tree"||(xo.content=ho(xo.content))}),c.on("PostRender",()=>{c.parser.addNodeFilter("img",xo=>{rn(xo,To=>{const or=To.attr("src");if(!or||g.getByUri(or))return;const mr=ot.getResultUri(or);mr&&To.attr("src",mr)})})}),{blobCache:g,addFilter:yn,uploadImages:Qt,uploadImagesAuto:gn,scanForImages:Rn,destroy:so}},OJ=c=>{const g=c.dom,$=c.schema.type,et={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:ot=>{g.setStyle(ot,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:ot=>{g.setStyle(ot,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const ot={inline:"span",styles:{textDecoration:"line-through"},exact:!0},at={inline:"strike",remove:"all",preserve_attributes:["class","style"]},ht={inline:"s",remove:"all",preserve_attributes:["class","style"]};return $!=="html4"?[ht,ot,at]:[ot,ht,at]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(ot,at,ht)=>Nr(ot)&&ot.hasAttribute("href"),onformat:(ot,at,ht)=>{cr.each(ht,(_t,St)=>{g.setAttrib(ot,St,_t)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":ot=>{var at;return(at=ot==null?void 0:ot.customValue)!==null&&at!==void 0?at:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return cr.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),ot=>{et[ot]={block:ot,remove:"all"}}),et},FF={remove_similar:!0,inherit:!1},gA={selector:"td,th",...FF},BU={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...gA},tablecellverticalalign:{styles:{"vertical-align":"%value"},...gA},tablecellbordercolor:{styles:{borderColor:"%value"},...gA},tablecellclass:{classes:["%value"],...gA},tableclass:{selector:"table",classes:["%value"],...FF},tablecellborderstyle:{styles:{borderStyle:"%value"},...gA},tablecellborderwidth:{styles:{borderWidth:"%value"},...gA}},$U=ln(BU),zF=c=>{const g={},$=ht=>an(ht)?g[ht]:g,et=ht=>Jr(g,ht),ot=(ht,_t)=>{ht&&(Et(ht)?(Zt(_t)||(_t=[_t]),rn(_t,St=>{dn(St.deep)&&(St.deep=!bv(St)),dn(St.split)&&(St.split=!bv(St)||zm(St)),dn(St.remove)&&bv(St)&&!zm(St)&&(St.remove="none"),bv(St)&&zm(St)&&(St.mixed=!0,St.block_expand=!0),Et(St.classes)&&(St.classes=St.classes.split(/\s+/))}),g[ht]=_t):tr(ht,(St,Lt)=>{ot(Lt,St)}))},at=ht=>(ht&&g[ht]&&delete g[ht],g);return ot(OJ(c)),ot($U()),ot(CT(c)),{get:$,has:et,register:ot,unregister:at}},BF=cr.each,Z1=$u.DOM,GU=c=>an(c)&&$t(c),jU=(c,g)=>{const $=g&&g.schema||yu({}),et=(St,Lt)=>{Lt.classes.length>0&&Z1.addClass(St,Lt.classes.join(" ")),Z1.setAttribs(St,Lt.attrs)},ot=St=>{const Lt=Et(St)?{name:St,classes:[],attrs:{}}:St,Ht=Z1.create(Lt.name);return et(Ht,Lt),Ht},at=(St,Lt)=>{const Ht=$.getElementRule(St.nodeName.toLowerCase()),qt=Ht==null?void 0:Ht.parentsRequired;return qt&&qt.length?Lt&&mn(qt,Lt)?Lt:qt[0]:!1},ht=(St,Lt,Ht)=>{let qt;const Qt=Lt[0],gn=GU(Qt)?Qt.name:void 0,kn=at(St,gn);if(kn)gn===kn?(qt=Qt,Lt=Lt.slice(1)):qt=kn;else if(Qt)qt=Qt,Lt=Lt.slice(1);else if(!Ht)return St;const yn=qt?ot(qt):Z1.create("div");yn.appendChild(St),Ht&&cr.each(Ht,so=>{const ho=ot(so);yn.insertBefore(ho,St)});const Rn=GU(qt)?qt.siblings:void 0;return ht(yn,Lt,Rn)},_t=Z1.create("div");if(c.length>0){const St=c[0],Lt=ot(St),Ht=GU(St)?St.siblings:void 0;_t.appendChild(ht(Lt,c.slice(1),Ht))}return _t},DJ=c=>{c=cr.trim(c);let g="div";const $={name:g,classes:[],attrs:{},selector:c};return c!=="*"&&(g=c.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(et,ot,at,ht,_t)=>{switch(ot){case"#":$.attrs.id=at;break;case".":$.classes.push(at);break;case":":cr.inArray("checked disabled enabled read-only required".split(" "),at)!==-1&&($.attrs[at]=at);break}if(ht==="["){const St=_t.match(/([\w\-]+)(?:\=\"([^\"]+))?/);St&&($.attrs[St[1]]=St[2])}return""})),$.name=g||"div",$},Mw=c=>Et(c)?(c=c.split(/\s*,\s*/)[0],c=c.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),cr.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),g=>{const $=cr.map(g.split(/(?:~\+|~|\+)/),DJ),et=$.pop();return $.length&&(et.siblings=$),et}).reverse()):[],Oie=(c,g)=>{let $="",et=N4(c);if(et==="")return"";const ot=Qt=>Et(Qt)?Qt.replace(/%(\w+)/g,""):"",at=(Qt,gn)=>Z1.getStyle(gn??c.getBody(),Qt,!0);if(Et(g)){const Qt=c.formatter.get(g);if(!Qt)return"";g=Qt[0]}if("preview"in g){const Qt=g.preview;if(Qt===!1)return"";et=Qt||et}let ht=g.block||g.inline||"span",_t;const St=Mw(g.selector);St.length>0?(St[0].name||(St[0].name=ht),ht=g.selector,_t=jU(St,c)):_t=jU([ht],c);const Lt=Z1.select(ht,_t)[0]||_t.firstChild;BF(g.styles,(Qt,gn)=>{const kn=ot(Qt);kn&&Z1.setStyle(Lt,gn,kn)}),BF(g.attributes,(Qt,gn)=>{const kn=ot(Qt);kn&&Z1.setAttrib(Lt,gn,kn)}),BF(g.classes,Qt=>{const gn=ot(Qt);Z1.hasClass(Lt,gn)||Z1.addClass(Lt,gn)}),c.dispatch("PreviewFormats"),Z1.setStyles(_t,{position:"absolute",left:-65535}),c.getBody().appendChild(_t);const Ht=at("fontSize"),qt=/px$/.test(Ht)?parseInt(Ht,10):0;return BF(et.split(" "),Qt=>{let gn=at(Qt,Lt);if(!(Qt==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(gn)&&(gn=at(Qt),nE(gn).toLowerCase()==="#ffffff"))&&!(Qt==="color"&&nE(gn).toLowerCase()==="#000000")){if(Qt==="font-size"&&/em|%$/.test(gn)){if(qt===0)return;gn=parseFloat(gn)/(/%$/.test(gn)?100:1)*qt+"px"}Qt==="border"&&gn&&($+="padding:0 2px;"),$+=Qt+":"+gn+";"}}),c.dispatch("AfterPreviewFormats"),Z1.remove(_t),$},Die=c=>{c.addShortcut("meta+b","","Bold"),c.addShortcut("meta+i","","Italic"),c.addShortcut("meta+u","","Underline");for(let g=1;g<=6;g++)c.addShortcut("access+"+g,"",["FormatBlock",!1,"h"+g]);c.addShortcut("access+7","",["FormatBlock",!1,"p"]),c.addShortcut("access+8","",["FormatBlock",!1,"div"]),c.addShortcut("access+9","",["FormatBlock",!1,"address"])},UU=c=>{const g=zF(c),$=Eu({});return Die(c),K$(c),Iw(c)||IY($,c),{get:g.get,has:g.has,register:g.register,unregister:g.unregister,apply:(et,ot,at)=>{bU(c,et,ot,at)},remove:(et,ot,at,ht)=>{NX(c,et,ot,at,ht)},toggle:(et,ot,at)=>{LX(c,et,ot,at)},match:(et,ot,at,ht)=>XO(c,et,ot,at,ht),closest:et=>yU(c,et),matchAll:(et,ot)=>PX(c,et,ot),matchNode:(et,ot,at,ht)=>OX(c,et,ot,at,ht),canApply:et=>DX(c,et),formatChanged:(et,ot,at,ht)=>FX(c,$,et,ot,at,ht),getCssText:An(Oie,c)}},PI=c=>{switch(c.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},NJ=(c,g,$)=>{const et=Eu(!1),ot=St=>{KO(g,!1,$),g.add({},St)};c.on("init",()=>{g.add()}),c.on("BeforeExecCommand",St=>{const Lt=St.command;PI(Lt)||(oU(g,$),g.beforeChange())}),c.on("ExecCommand",St=>{const Lt=St.command;PI(Lt)||ot(St)}),c.on("ObjectResizeStart cut",()=>{g.beforeChange()}),c.on("SaveContent ObjectResized blur",ot),c.on("dragend",ot),c.on("keyup",St=>{const Lt=St.keyCode;if(St.isDefaultPrevented())return;const Ht=Kr.os.isMacOS()&&St.key==="Meta";(Lt>=33&&Lt<=36||Lt>=37&&Lt<=40||Lt===45||St.ctrlKey||Ht)&&(ot(),c.nodeChanged()),(Lt===46||Lt===8)&&c.nodeChanged(),et.get()&&g.typing&&!NR(OR(c),g.data[0])&&(c.isDirty()||c.setDirty(!0),c.dispatch("TypingUndo"),et.set(!1),c.nodeChanged())}),c.on("keydown",St=>{const Lt=St.keyCode;if(St.isDefaultPrevented())return;if(Lt>=33&&Lt<=36||Lt>=37&&Lt<=40||Lt===45){g.typing&&ot(St);return}const Ht=St.ctrlKey&&!St.altKey||St.metaKey;if((Lt<16||Lt>20)&&Lt!==224&&Lt!==91&&!g.typing&&!Ht){g.beforeChange(),KO(g,!0,$),g.add({},St),et.set(!0);return}(Kr.os.isMacOS()?St.metaKey:St.ctrlKey&&!St.altKey)&&g.beforeChange()}),c.on("mousedown",St=>{g.typing&&ot(St)});const at=St=>St.inputType==="insertReplacementText",ht=St=>St.inputType==="insertText"&&St.data===null,_t=St=>St.inputType==="insertFromPaste"||St.inputType==="insertFromDrop";c.on("input",St=>{St.inputType&&(at(St)||ht(St)||_t(St))&&ot(St)}),c.on("AddUndo Undo Redo ClearUndos",St=>{St.isDefaultPrevented()||c.nodeChanged()})},HU=c=>{c.addShortcut("meta+z","","Undo"),c.addShortcut("meta+y,meta+shift+z","","Redo")},$F=c=>{const g=wm(),$=Eu(0),et=Eu(0),ot={data:[],typing:!1,beforeChange:()=>{dU(c,$,g)},add:(at,ht)=>wF(c,ot,et,$,g,at,ht),dispatchChange:()=>{c.setDirty(!0);const at=OR(c);at.bookmark=yT(c.selection),c.dispatch("change",{level:at,lastLevel:as(ot.data,et.get()).getOrUndefined()})},undo:()=>fU(c,ot,$,et),redo:()=>hU(c,et,ot.data),clear:()=>{CF(c,ot,et)},reset:()=>{pU(c,ot)},hasUndo:()=>gU(c,ot,et),hasRedo:()=>mU(c,ot,et),transact:at=>RX(c,ot,$,at),ignore:at=>{kF(c,$,at)},extra:(at,ht)=>{MX(c,ot,et,at,ht)}};return Iw(c)||NJ(c,ot,$),HU(c),ot},VU=[9,27,Br.HOME,Br.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Br.DOWN,Br.UP,Br.LEFT,Br.RIGHT].concat(Kr.browser.isFirefox()?[224]:[]),WU="data-mce-placeholder",qU=c=>c.type==="keydown"||c.type==="keyup",Q2=c=>{const g=c.keyCode;return g===Br.BACKSPACE||g===Br.DELETE},LJ=c=>{if(qU(c)){const g=c.keyCode;return!Q2(c)&&(Br.metaKeyPressed(c)||c.altKey||g>=112&&g<=123||mn(VU,g))}else return!1},FJ=c=>qU(c)&&!(Q2(c)||c.type==="keyup"&&c.keyCode===229),zJ=(c,g,$)=>{if(c.isEmpty(g,void 0,{skipBogus:!1,includeZwsp:!0})){const et=g.firstElementChild;return et?c.getStyle(g.firstElementChild,"padding-left")||c.getStyle(g.firstElementChild,"padding-right")?!1:$===et.nodeName.toLowerCase():!0}else return!1},BJ=c=>{var g;const $=c.dom,et=c0(c),ot=(g=P_(c))!==null&&g!==void 0?g:"",at=(ht,_t)=>{if(LJ(ht))return;const St=c.getBody(),Lt=FJ(ht)?!1:zJ($,St,et);($.getAttrib(St,WU)!==""!==Lt||_t)&&($.setAttrib(St,WU,Lt?ot:null),x0(c,Lt),c.on(Lt?"keydown":"keyup",at),c.off(Lt?"keyup":"keydown",at))};_s(ot)&&c.on("init",ht=>{at(ht,!0),c.on("change SetContent ExecCommand",at),c.on("paste",_t=>Jv.setEditorTimeout(c,()=>at(_t)))})},$J=(c,g)=>({block:c,position:g}),GJ=(c,g)=>({from:c,to:g}),GF=(c,g)=>{const $=Qn.fromDom(c),et=Qn.fromDom(g.container());return XE($,et).map(ot=>$J(ot,g))},jJ=c=>!(Om(c.to.block,c.from.block)||Om(c.from.block,c.to.block)),UJ=c=>!_i(c.from.block,c.to.block),jR=(c,g)=>_d(g,ot=>aE(ot)||Jo(ot.dom),ot=>_i(ot,c)).filter(Xs).getOr(c),HJ=(c,g)=>{const $=Qn.fromDom(c);return _i(jR($,g.from.block),jR($,g.to.block))},VJ=c=>Ql(c.from.block.dom)===!1&&Ql(c.to.block.dom)===!1,Nie=c=>{const g=$=>wy($)||xy($.dom)||m2($);return g(c.from.block)&&g(c.to.block)},UR=(c,g,$,et)=>Jl(et.position.getNode())&&!Qm(c,et.block)?O2(!1,et.block.dom).bind(ot=>ot.isEqual(et.position)?Hy($,g,ot).bind(at=>GF(g,at)):Yt.some(et)).getOr(et):et,WJ=(c,g,$,et)=>{const ot=GF(g,Uo.fromRangeStart(et)),at=ot.bind(ht=>Hy($,g,ht.position).bind(_t=>GF(g,_t).map(St=>UR(c,g,$,St))));return Bs(ot,at,GJ).filter(ht=>UJ(ht)&&HJ(g,ht)&&VJ(ht)&&Nie(ht)&&jJ(ht))},jF=(c,g,$,et)=>et.collapsed?WJ(c,g,$,et):Yt.none(),qJ=(c,g)=>{const $=Jp(c);return bo($,et=>g.isBlock(Sn(et))).fold(ln($),et=>$.slice(0,et))},ZU=(c,g)=>{const $=qJ(c,g);return rn($,mu),$},KU=(c,g,$)=>{const et=Ew($,g);return Jn(et.reverse(),ot=>Qm(c,ot)).each(mu)},ZJ=(c,g)=>zn(dC(g),$=>!Qm(c,$)).length===0,mA=(c,g,$,et,ot)=>{if(Qm(et,$))return T_($),F0($.dom);ZJ(et,ot)&&Qm(et,g)&&Su(ot,Qn.fromTag("br"));const at=Ey($.dom,Uo.before(ot.dom));return rn(ZU(g,et),ht=>{Su(ot,ht)}),KU(et,c,g),at},yA=(c,g)=>c.isInline(Sn(g)),sD=(c,g,$,et)=>{if(Qm(et,$)){if(Qm(et,g)){const ht=So((_t=>{const St=(Lt,Ht)=>Ym(Lt).fold(()=>Ht,qt=>yA(et,qt)?St(qt,Ht.concat(Wv(qt))):Ht);return St(_t,[])})($),(_t,St)=>(by(_t,St),St),z1());y_(g),Up(g,ht)}return mu($),F0(g.dom)}const ot=Vy($.dom);return rn(ZU(g,et),at=>{Up($,at)}),KU(et,c,g),ot},iD=(c,g)=>{const $=Ew(g,c);return Yt.from($[$.length-1])},bA=(c,g)=>Om(g,c)?iD(g,c):Yt.none(),TS=(c,g)=>{O2(c,g.dom).bind($=>Yt.from($.getNode())).map(Qn.fromDom).filter(dx).each(mu)},HR=(c,g,$,et)=>(TS(!0,g),TS(!1,$),bA(g,$).fold(An(sD,c,g,$,et),An(mA,c,g,$,et))),VR=(c,g,$,et,ot)=>g?HR(c,et,$,ot):HR(c,$,et,ot),aD=(c,g)=>{const $=Qn.fromDom(c.getBody());return jF(c.schema,$.dom,g,c.selection.getRng()).map(ot=>()=>{VR($,g,ot.from.block,ot.to.block,c.schema).each(at=>{c.selection.setRng(at.toRange())})})},UF=(c,g,$)=>{const et=g.getRng();return Bs(XE(c,Qn.fromDom(et.startContainer)),XE(c,Qn.fromDom(et.endContainer)),(ot,at)=>_i(ot,at)?Yt.none():Yt.some(()=>{et.deleteContents(),VR(c,!0,ot,at,$).each(ht=>{g.setRng(ht.toRange())})})).getOr(Yt.none())},lD=(c,g)=>{const $=Qn.fromDom(g),et=An(_i,c);return Qu($,aE,et).isSome()},YU=(c,g)=>lD(c,g.startContainer)||lD(c,g.endContainer),XU=(c,g)=>{const $=Ey(c.dom,Uo.fromRangeStart(g)).isNone(),et=L0(c.dom,Uo.fromRangeEnd(g)).isNone();return!YU(c,g)&&$&&et},OI=c=>Yt.some(()=>{c.setContent(""),c.selection.setCursorLocation()}),JU=c=>{const g=Qn.fromDom(c.getBody()),$=c.selection.getRng();return XU(g,$)?OI(c):UF(g,c.selection,c.schema)},cD=(c,g)=>c.selection.isCollapsed()?Yt.none():JU(c),Pw=(c,g,$,et,ot)=>Yt.from(g._selectionOverrides.showCaret(c,$,et,ot)),uD=c=>{const g=c.ownerDocument.createRange();return g.selectNode(c),g},DI=(c,g)=>c.dispatch("BeforeObjectSelected",{target:g}).isDefaultPrevented()?Yt.none():Yt.some(uD(g)),QU=(c,g,$)=>{const et=_5(1,c.getBody(),g),ot=Uo.fromRangeStart(et),at=ot.getNode();if(M2(at))return Pw(1,c,at,!ot.isAtEnd(),!1);const ht=ot.getNode(!0);if(M2(ht))return Pw(1,c,ht,!1,!1);const _t=L_(c.dom.getRoot(),ot.getNode());return M2(_t)?Pw(1,c,_t,!1,$):Yt.none()},dD=(c,g,$)=>g.collapsed?QU(c,g,$).getOr(g):g,eH=c=>fS(c)||gI(c),eC=c=>hS(c)||J5(c),IS=(c,g)=>{dr(g)&&g.data.length===0&&c.remove(g)},K1=(c,g,$,et,ot,at)=>{Pw(et,c,at.getNode(!ot),ot,!0).each(ht=>{if(g.collapsed){const _t=g.cloneRange();ot?_t.setEnd(ht.startContainer,ht.startOffset):_t.setStart(ht.endContainer,ht.endOffset),_t.deleteContents()}else g.deleteContents();c.selection.setRng(ht)}),IS(c.dom,$)},KJ=(c,g)=>{const $=c.selection.getRng();if(!dr($.commonAncestorContainer))return Yt.none();const et=g?r0.Forwards:r0.Backwards,ot=u0(c.getBody()),at=An(x5,g?ot.next:ot.prev),ht=g?eH:eC,_t=P2(et,c.getBody(),$),St=at(_t),Lt=St&&H1(g,St);if(!Lt||!ME(_t,Lt))return Yt.none();if(ht(Lt))return Yt.some(()=>K1(c,$,_t.getNode(),et,g,Lt));const Ht=at(Lt);return Ht&&ht(Ht)&&ME(Lt,Ht)?Yt.some(()=>K1(c,$,_t.getNode(),et,g,Ht)):Yt.none()},HF=(c,g)=>KJ(c,g),VF=(c,g)=>{const $=c.getBody();return g?F0($).filter(fS):Vy($).filter(hS)},WF=c=>{const g=c.selection.getRng();return!g.collapsed&&(VF(c,!0).exists($=>$.isEqual(Uo.fromRangeStart(g)))||VF(c,!1).exists($=>$.isEqual(Uo.fromRangeEnd(g))))},YJ=c=>an(c)&&(aE(Qn.fromDom(c))||m2(Qn.fromDom(c))),s1=gv.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),XJ=(c,g)=>{const $=g.getNode(!c),et=c?"after":"before";return Nr($)&&$.getAttribute("data-mce-caret")===et},JJ=(c,g,$,et,ot)=>{const at=ht=>ot.isInline(ht.nodeName.toLowerCase())&&!B1($,et,c);return DT(!g,$).fold(()=>DT(g,et).fold(On,at),at)},tH=(c,g,$,et,ot)=>{const at=ot.getNode(!$);return XE(Qn.fromDom(g),Qn.fromDom(et.getNode())).map(ht=>Qm(c,ht)?s1.remove(ht.dom):s1.moveToElement(at)).orThunk(()=>Yt.some(s1.moveToElement(at)))},nH=(c,g,$,et)=>Hy(g,c,$).bind(ot=>YJ(ot.getNode())||JJ(c,g,$,ot,et)?Yt.none():g&&Ql(ot.getNode())||!g&&Ql(ot.getNode(!0))?tH(et,c,g,$,ot):g&&hS($)||!g&&fS($)?Yt.some(s1.moveToPosition(ot)):Yt.none()),QJ=(c,g)=>Pn(g)?Yt.none():c&&Ql(g.nextSibling)?Yt.some(s1.moveToElement(g.nextSibling)):!c&&Ql(g.previousSibling)?Yt.some(s1.moveToElement(g.previousSibling)):Yt.none(),eQ=(c,g,$)=>$.fold(et=>Yt.some(s1.remove(et)),et=>Yt.some(s1.moveToElement(et)),et=>B1(g,et,c)?Yt.none():Yt.some(s1.moveToPosition(et))),qF=(c,g,$,et)=>XJ(g,$)?QJ(g,$.getNode(!g)).orThunk(()=>nH(c,g,$,et)):nH(c,g,$,et).bind(ot=>eQ(c,$,ot)),ZF=(c,g,$,et)=>{const ot=_5(g?1:-1,c,$),at=Uo.fromRangeStart(ot),ht=Qn.fromDom(c);return!g&&hS(at)?Yt.some(s1.remove(at.getNode(!0))):g&&fS(at)?Yt.some(s1.remove(at.getNode())):!g&&fS(at)&&QP(ht,at,et)?Ds(ht,at,et).map(_t=>s1.remove(_t.getNode())):g&&hS(at)&&Y8(ht,at,et)?AK(ht,at,et).map(_t=>s1.remove(_t.getNode())):qF(c,g,at,et)},oH=(c,g)=>$=>(c._selectionOverrides.hideFakeCaret(),KE(c,g,Qn.fromDom($)),!0),tQ=(c,g)=>$=>{const et=g?Uo.before($):Uo.after($);return c.selection.setRng(et.toRange()),!0},nQ=c=>g=>(c.selection.setRng(g.toRange()),!0),KF=(c,g)=>Yt.from(L_(c.getBody(),g)),rH=(c,g)=>{const $=c.selection.getNode();return KF(c,$).filter(Ql).fold(()=>ZF(c.getBody(),g,c.selection.getRng(),c.schema).map(et=>()=>et.fold(oH(c,g),tQ(c,g),nQ(c))),()=>Yt.some(fn))},YF=c=>{rn(m0(c,".mce-offscreen-selection"),mu)},sH=(c,g)=>{const $=c.selection.getNode();return Ql($)&&!Jw($)?KF(c,$.parentNode).filter(Ql).fold(()=>Yt.some(()=>{YF(Qn.fromDom(c.getBody())),KE(c,g,Qn.fromDom(c.selection.getNode())),pS(c)}),()=>Yt.some(fn)):WF(c)?Yt.some(()=>{Qv(c,c.selection.getRng(),Qn.fromDom(c.getBody()))}):Yt.none()},XF=c=>{const g=c.dom,$=c.selection,et=L_(c.getBody(),$.getNode());if(Jo(et)&&g.isBlock(et)&&g.isEmpty(et)){const ot=g.create("br",{"data-mce-bogus":"1"});g.setHTML(et,""),et.appendChild(ot),$.setRng(Uo.before(ot).toRange())}return!0},WR=(c,g)=>c.selection.isCollapsed()?rH(c,g):sH(c,g),iH=c=>c.hasOwnProperty("text"),aH=c=>c.hasOwnProperty("marker"),Ix=(c,g)=>{const $=(at,ht)=>{if(dr(at))return{text:at,offset:ht};{const _t=g(),St=at.childNodes;return ht<St.length?(at.insertBefore(_t,St[ht]),{marker:_t,before:!0}):(at.appendChild(_t),{marker:_t,before:!1})}},et=$(c.endContainer,c.endOffset);return{start:$(c.startContainer,c.startOffset),end:et}},Y1=c=>{var g,$;const{start:et,end:ot}=c,at=new window.Range;return iH(et)?at.setStart(et.text,et.offset):aH(et)&&(et.before?at.setStartBefore(et.marker):at.setStartAfter(et.marker),(g=et.marker.parentNode)===null||g===void 0||g.removeChild(et.marker)),iH(ot)?at.setEnd(ot.text,ot.offset):aH(ot)&&(ot.before?at.setEndBefore(ot.marker):at.setEndAfter(ot.marker),($=ot.marker.parentNode)===null||$===void 0||$.removeChild(ot.marker)),at},NI=(c,g)=>{var $;const et=c.dom,ot=et.getParent(c.selection.getStart(),et.isBlock),at=et.getParent(c.selection.getEnd(),et.isBlock),ht=c.getBody();if((($=ot==null?void 0:ot.nodeName)===null||$===void 0?void 0:$.toLowerCase())==="div"&&ot&&at&&ot===ht.firstChild&&at===ht.lastChild&&!et.isEmpty(ht)){const St=ot.cloneNode(!1),Lt=()=>{if(g?y$(c):Aw(c),ht.firstChild!==ot){const Ht=Ix(c.selection.getRng(),()=>document.createElement("span"));Array.from(ht.childNodes).forEach(qt=>St.appendChild(qt)),ht.appendChild(St),c.selection.setRng(Y1(Ht))}};return Yt.some(Lt)}return Yt.none()},lH=(c,g)=>{const $=Uo.fromRangeStart(c.selection.getRng());return Hy(g,c.getBody(),$).filter(et=>g?ys(et):YB(et)).bind(et=>v5(g?0:-1,et)).map(et=>()=>c.selection.select(et))},LI=(c,g)=>c.selection.isCollapsed()?lH(c,g):Yt.none(),vA=dr,JF=c=>vA(c)&&c.data[0]===Cm,QF=c=>vA(c)&&c.data[c.data.length-1]===Cm,e7=c=>{var g;return((g=c.ownerDocument)!==null&&g!==void 0?g:document).createTextNode(Cm)},cH=c=>{var g;if(vA(c.previousSibling))return QF(c.previousSibling)||c.previousSibling.appendData(Cm),c.previousSibling;if(vA(c))return JF(c)||c.insertData(0,Cm),c;{const $=e7(c);return(g=c.parentNode)===null||g===void 0||g.insertBefore($,c),$}},uH=c=>{var g,$;if(vA(c.nextSibling))return JF(c.nextSibling)||c.nextSibling.insertData(0,Cm),c.nextSibling;if(vA(c))return QF(c)||c.appendData(Cm),c;{const et=e7(c);return c.nextSibling?(g=c.parentNode)===null||g===void 0||g.insertBefore(et,c.nextSibling):($=c.parentNode)===null||$===void 0||$.appendChild(et),et}},_A=(c,g)=>c?cH(g):uH(g),t7=An(_A,!0),oQ=An(_A,!1),dH=(c,g)=>dr(c.container())?_A(g,c.container()):_A(g,c.getNode()),fH=(c,g)=>{const $=g.get();return $&&c.container()===$&&qv($)},n7=(c,g)=>g.fold($=>{R2(c.get());const et=t7($);return c.set(et),Yt.some(Uo(et,et.length-1))},$=>F0($).map(et=>{if(fH(et,c)){const ot=c.get();return Uo(ot,1)}else{R2(c.get());const ot=dH(et,!0);return c.set(ot),Uo(ot,1)}}),$=>Vy($).map(et=>{if(fH(et,c)){const ot=c.get();return Uo(ot,ot.length-1)}else{R2(c.get());const ot=dH(et,!1);return c.set(ot),Uo(ot,ot.length-1)}}),$=>{R2(c.get());const et=oQ($);return c.set(et),Yt.some(Uo(et,1))}),o7=(c,g)=>{for(let $=0;$<c.length;$++){const et=c[$].apply(null,g);if(et.isSome())return et}return Yt.none()},My=gv.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),hH=(c,g)=>{const $=Sy(g,c);return $||c},r7=(c,g,$)=>{const et=p$($),ot=hH(g,et.container());return K2(c,ot,et).fold(()=>L0(ot,et).bind(An(K2,c,ot)).map(at=>My.before(at)),Yt.none)},rQ=(c,g)=>D2(c,g)===null,pH=(c,g,$)=>K2(c,g,$).filter(An(rQ,g)),sQ=(c,g,$)=>{const et=g$($);return pH(c,g,et).bind(ot=>Ey(ot,et).isNone()?Yt.some(My.start(ot)):Yt.none())},iQ=(c,g,$)=>{const et=p$($);return pH(c,g,et).bind(ot=>L0(ot,et).isNone()?Yt.some(My.end(ot)):Yt.none())},aQ=(c,g,$)=>{const et=g$($),ot=hH(g,et.container());return K2(c,ot,et).fold(()=>Ey(ot,et).bind(An(K2,c,ot)).map(at=>My.after(at)),Yt.none)},gH=c=>!r6(FI(c)),Ow=(c,g,$)=>o7([r7,sQ,iQ,aQ],[c,g,$]).filter(gH),FI=c=>c.fold(uo,uo,uo,uo),fD=c=>c.fold(ln("before"),ln("start"),ln("end"),ln("after")),hD=c=>c.fold(My.before,My.before,My.after,My.after),s7=c=>c.fold(My.start,My.start,My.end,My.end),lQ=(c,g)=>fD(c)===fD(g)&&FI(c)===FI(g),cQ=(c,g,$,et,ot,at)=>Bs(K2(g,$,et),K2(g,$,ot),(ht,_t)=>ht!==_t&&h$($,ht,_t)?My.after(c?ht:_t):at).getOr(at),mH=(c,g)=>c.fold(_o,$=>!lQ($,g)),uQ=(c,g,$,et,ot)=>{const at=H1(c,ot);return Hy(c,$,at).map(An(H1,c)).fold(()=>et.map(hD),St=>Ow(g,$,St).map(An(cQ,c,g,$,at,St)).filter(An(mH,et))).filter(gH)},dQ=(c,g)=>c?g.fold(It(Yt.some,My.start),Yt.none,It(Yt.some,My.after),Yt.none):g.fold(Yt.none,It(Yt.some,My.before),Yt.none,It(Yt.some,My.end)),i7=(c,g,$,et)=>{const ot=H1(c,et),at=Ow(g,$,ot);return Ow(g,$,ot).bind(An(dQ,c)).orThunk(()=>uQ(c,g,$,at,et))},fQ=c=>Vt(c.selection.getSel().modify),yH=(c,g,$)=>{const et=c?1:-1;return g.setRng(Uo($.container(),$.offset()+et).toRange()),g.getSel().modify("move",c?"forward":"backward","word"),!0},hQ=(c,g)=>{const $=g.selection.getRng(),et=c?Uo.fromRangeEnd($):Uo.fromRangeStart($);return fQ(g)?c&&I_(et)?yH(!0,g.selection,et):!c&&fx(et)?yH(!1,g.selection,et):!1:!1};var Dw;(function(c){c[c.Br=0]="Br",c[c.Block=1]="Block",c[c.Wrap=2]="Wrap",c[c.Eol=3]="Eol"})(Dw||(Dw={}));const pD=(c,g)=>c===r0.Backwards?Oo(g):g,pQ=(c,g,$)=>c===r0.Forwards?g.next($):g.prev($),gQ=(c,g,$,et)=>Jl(et.getNode(g===r0.Forwards))?Dw.Br:B1($,et)===!1?Dw.Block:Dw.Wrap,qR=(c,g,$,et)=>{const ot=u0($);let at=et;const ht=[];for(;at;){const _t=pQ(g,ot,at);if(!_t)break;if(Jl(_t.getNode(!1)))return g===r0.Forwards?{positions:pD(g,ht).concat([_t]),breakType:Dw.Br,breakAt:Yt.some(_t)}:{positions:pD(g,ht),breakType:Dw.Br,breakAt:Yt.some(_t)};if(!_t.isVisible()){at=_t;continue}if(c(at,_t)){const St=gQ($,g,at,_t);return{positions:pD(g,ht),breakType:St,breakAt:Yt.some(_t)}}ht.push(_t),at=_t}return{positions:pD(g,ht),breakType:Dw.Eol,breakAt:Yt.none()}},ZR=(c,g,$,et)=>g($,et).breakAt.map(ot=>{const at=g($,ot).positions;return c===r0.Backwards?at.concat(ot):[ot].concat(at)}).getOr([]),a7=(c,g)=>Hn(c,($,et)=>$.fold(()=>Yt.some(et),ot=>Bs(_r(ot.getClientRects()),_r(et.getClientRects()),(at,ht)=>{const _t=Math.abs(g-at.left);return Math.abs(g-ht.left)<=_t?et:ot}).or($)),Yt.none()),gD=(c,g)=>_r(g.getClientRects()).bind($=>a7(c,$.left)),RS=An(qR,Uo.isAbove,-1),KR=An(qR,Uo.isBelow,1),bH=An(ZR,-1,RS),vH=An(ZR,1,KR),_H=(c,g)=>RS(c,g).breakAt.isNone(),xH=(c,g)=>KR(c,g).breakAt.isNone(),mQ=c=>F0(c).map(g=>[g].concat(KR(c,g).positions)).getOr([]),yQ=c=>Vy(c).map(g=>RS(c,g).positions.concat(g)).getOr([]),bQ=(c,g)=>gD(bH(c,g),g),vQ=(c,g)=>gD(vH(c,g),g),_Q=Ql,wH=(c,g)=>Math.abs(c.left-g),xQ=(c,g)=>Math.abs(c.right-g),j_=c=>_a(c,"node"),mD=(c,g)=>Un(c,($,et)=>{const ot=Math.min(wH($,g),xQ($,g)),at=Math.min(wH(et,g),xQ(et,g));return at===ot&&j_(et)&&_Q(et.node)||at<ot?et:$}),CH=c=>{const g=$=>Dn($,et=>{const ot=hx(et);return ot.node=c,ot});if(Nr(c))return g(c.getClientRects());if(dr(c)){const $=c.ownerDocument.createRange();return $.setStart(c,0),$.setEnd(c,c.data.length),g($.getClientRects())}else return[]},l7=c=>oo(c,CH);var YR;(function(c){c[c.Up=-1]="Up",c[c.Down=1]="Down"})(YR||(YR={}));const kH=(c,g,$,et)=>{let ot=et;for(;ot=IE(ot,c,a4,g);)if($(ot))return},SH=(c,g,$,et,ot,at)=>{let ht=0;const _t=[],St=qt=>{let Qt=l7([qt]);c===-1&&(Qt=Qt.reverse());for(let gn=0;gn<Qt.length;gn++){const kn=Qt[gn];if(!$(kn,Lt)){if(_t.length>0&&g(kn,Mo(_t))&&ht++,kn.line=ht,ot(kn))return!0;_t.push(kn)}}return!1},Lt=Mo(at.getClientRects());if(!Lt)return _t;const Ht=at.getNode();return Ht&&(St(Ht),kH(c,et,St,Ht)),_t},EH=(c,g)=>g.line>c,wQ=(c,g)=>g.line===c,CQ=An(SH,YR.Up,Zu,cE),kQ=An(SH,YR.Down,cE,Zu),xA=c=>Mo(c.getClientRects()),AH=(c,g,$,et)=>{const ot=u0(g);let at,ht,_t,St;const Lt=[];let Ht=0;c===1?(at=ot.next,ht=cE,_t=Zu,St=Uo.after(et)):(at=ot.prev,ht=Zu,_t=cE,St=Uo.before(et));const qt=xA(St);do{if(!St.isVisible())continue;const Qt=xA(St);if(_t(Qt,qt))continue;Lt.length>0&&ht(Qt,Mo(Lt))&&Ht++;const gn=hx(Qt);if(gn.position=St,gn.line=Ht,$(gn))return Lt;Lt.push(gn)}while(St=at(St));return Lt},c7=c=>g=>EH(c,g),yD=c=>g=>wQ(c,g),Rx=(c,g)=>{c.selection.setRng(g),Z2(c,c.selection.getRng())},u7=(c,g,$)=>Yt.some(dD(c,g,$)),TH=(c,g,$,et,ot,at)=>{const ht=g===r0.Forwards,_t=u0(c.getBody()),St=An(x5,ht?_t.next:_t.prev),Lt=ht?et:ot;if(!$.collapsed){const kn=uE($);if(at(kn))return Pw(g,c,kn,g===r0.Backwards,!1);if(WF(c)){const yn=$.cloneRange();return yn.collapse(g===r0.Backwards),Yt.from(yn)}}const Ht=P2(g,c.getBody(),$);if(Lt(Ht))return DI(c,Ht.getNode(!ht));let qt=St(Ht);const Qt=qu($);if(qt)qt=H1(ht,qt);else return Qt?Yt.some($):Yt.none();if(Lt(qt))return Pw(g,c,qt.getNode(!ht),ht,!1);const gn=St(qt);return gn&&Lt(gn)&&ME(qt,gn)?Pw(g,c,gn.getNode(!ht),ht,!1):Qt?u7(c,qt.toRange(),!1):Yt.none()},IH=(c,g,$,et,ot,at)=>{const ht=P2(g,c.getBody(),$),_t=Mo(ht.getClientRects()),St=g===YR.Down,Lt=c.getBody();if(!_t)return Yt.none();if(WF(c)){const Rn=St?Uo.fromRangeEnd($):Uo.fromRangeStart($);return(St?vQ:bQ)(Lt,Rn).orThunk(()=>Yt.from(Rn)).map(ho=>ho.toRange())}const qt=(St?kQ:CQ)(Lt,c7(1),ht),Qt=zn(qt,yD(1)),gn=_t.left,kn=mD(Qt,gn);if(kn&&at(kn.node)){const Rn=Math.abs(gn-kn.left),so=Math.abs(gn-kn.right);return Pw(g,c,kn.node,Rn<so,!1)}let yn;if(et(ht)?yn=ht.getNode():ot(ht)?yn=ht.getNode(!0):yn=uE($),yn){const Rn=AH(g,Lt,c7(1),yn);let so=mD(zn(Rn,yD(1)),gn);if(so||(so=Mo(zn(Rn,yD(0))),so))return u7(c,so.position.toRange(),!1)}return Qt.length===0?d7(c,St).filter(St?ot:et).map(Rn=>dD(c,Rn.toRange(),!1)):Yt.none()},d7=(c,g)=>{const $=c.selection.getRng(),et=g?Uo.fromRangeEnd($):Uo.fromRangeStart($),ot=XL(et.container(),c.getBody());if(g){const at=KR(ot,et);return fs(at.positions)}else{const at=RS(ot,et);return _r(at.positions)}},SQ=(c,g,$)=>d7(c,g).filter($).exists(et=>(c.selection.setRng(et.toRange()),!0)),f7=(c,g)=>{const $=c.dom.createRng();$.setStart(g.container(),g.offset()),$.setEnd(g.container(),g.offset()),c.selection.setRng($)},EQ=(c,g)=>{c?g.setAttribute("data-mce-selected","inline-boundary"):g.removeAttribute("data-mce-selected")},X1=(c,g,$)=>n7(g,$).map(et=>(f7(c,et),$)),AQ=(c,g,$)=>{const et=Uo.fromRangeStart(c);if(c.collapsed)return et;{const ot=Uo.fromRangeEnd(c);return $?Ey(g,ot).getOr(ot):L0(g,et).getOr(et)}},TQ=(c,g,$)=>{const et=c.getBody(),ot=AQ(c.selection.getRng(),et,$),at=An(YE,c);return i7($,at,et,ot).bind(_t=>X1(c,g,_t))},wA=(c,g,$)=>{const et=Dn(m0(Qn.fromDom(g.getRoot()),'*[data-mce-selected="inline-boundary"]'),ht=>ht.dom),ot=zn(et,c),at=zn($,c);rn(Ir(ot,at),An(EQ,!1)),rn(Ir(at,ot),An(EQ,!0))},RH=(c,g)=>{const $=g.get();if(c.selection.isCollapsed()&&!c.composing&&$){const et=Uo.fromRangeStart(c.selection.getRng());Uo.isTextPosition(et)&&!Ry(et)&&(f7(c,qL($,et)),g.set(null))}},IQ=(c,g,$,et)=>{if(g.selection.isCollapsed()){const ot=zn(et,c);rn(ot,at=>{const ht=Uo.fromRangeStart(g.selection.getRng());Ow(c,g.getBody(),ht).bind(_t=>X1(g,$,_t))})}},XR=(c,g,$)=>_E(c)?TQ(c,g,$).isSome():!1,MH=(c,g,$)=>_E(g)?hQ(c,g):!1,RQ=c=>{const g=Eu(null),$=An(YE,c);return c.on("NodeChange",et=>{_E(c)&&(wA($,c.dom,et.parents),RH(c,g),IQ($,c,g,et.parents))}),g},MQ=An(MH,!0),PQ=An(MH,!1),JR=(c,g,$)=>{if(_E(c)){const et=d7(c,g).getOrThunk(()=>{const ot=c.selection.getRng();return g?Uo.fromRangeEnd(ot):Uo.fromRangeStart(ot)});return Ow(An(YE,c),c.getBody(),et).exists(ot=>{const at=hD(ot);return n7($,at).exists(ht=>(f7(c,ht),!0))})}else return!1},OQ=(c,g)=>{const $=document.createRange();return $.setStart(c.container(),c.offset()),$.setEnd(g.container(),g.offset()),$},tC=c=>Bs(F0(c),Vy(c),(g,$)=>{const et=H1(!0,g),ot=H1(!1,$);return L0(c,et).forall(at=>at.isEqual(ot))}).getOr(!0),bD=(c,g)=>$=>n7(g,$).map(et=>()=>f7(c,et)),PH=(c,g,$,et)=>{const ot=c.getBody(),at=An(YE,c);c.undoManager.ignore(()=>{c.selection.setRng(OQ($,et)),Aw(c),Ow(at,ot,Uo.fromRangeStart(c.selection.getRng())).map(s7).bind(bD(c,g)).each(Ro)}),c.nodeChanged()},DQ=(c,g)=>{const $=Sy(g,c);return $||c},NQ=(c,g,$,et)=>{const ot=DQ(c.getBody(),et.container()),at=An(YE,c),ht=Ow(at,ot,et);return ht.bind(St=>$?St.fold(ln(Yt.some(s7(St))),Yt.none,ln(Yt.some(hD(St))),Yt.none):St.fold(Yt.none,ln(Yt.some(hD(St))),Yt.none,ln(Yt.some(s7(St))))).map(bD(c,g)).getOrThunk(()=>{const St=bw($,ot,et),Lt=St.bind(Ht=>Ow(at,ot,Ht));return Bs(ht,Lt,()=>K2(at,ot,et).bind(Ht=>tC(Ht)?Yt.some(()=>{KE(c,$,Qn.fromDom(Ht))}):Yt.none())).getOrThunk(()=>Lt.bind(()=>St.map(Ht=>()=>{$?PH(c,g,et,Ht):PH(c,g,Ht,et)})))})},h7=(c,g,$)=>{if(c.selection.isCollapsed()&&_E(c)){const et=Uo.fromRangeStart(c.selection.getRng());return NQ(c,g,$,et)}return Yt.none()},LQ=c=>h_(c)>1,vD=(c,g)=>{const $=Qn.fromDom(c.getBody()),et=Qn.fromDom(c.selection.getStart()),ot=Ew(et,$);return bo(ot,g).fold(ln(ot),at=>ot.slice(0,at))},p7=c=>h_(c)===1,g7=c=>vD(c,g=>c.schema.isBlock(Sn(g))||LQ(g)),OH=c=>vD(c,g=>c.schema.isBlock(Sn(g))),m7=(c,g)=>{const $=An(N6,c);return oo(g,et=>$(et)?[et.dom]:[])},y7=c=>{const g=OH(c);return m7(c,g)},FQ=(c,g,$,et)=>{const ot=m7(g,et);if(ot.length===0)KE(g,c,$);else{const at=CO($.dom,ot);g.selection.setRng(at.toRange())}},QR=(c,g)=>{const $=zn(g7(c),p7);return fs($).bind(et=>{const ot=Uo.fromRangeStart(c.selection.getRng());return b$(g,ot,et.dom)&&!BE(et)?Yt.some(()=>FQ(g,c,et,$)):Yt.none()})},_D=(c,g)=>{const $=g.parentElement;return Jl(g)&&!Nt($)&&c.dom.isEmpty($)},DH=c=>BE(Qn.fromDom(c)),b7=(c,g)=>{const $=c.selection.getStart(),et=_D(c,$)||DH($)?CO($,g):Y$(c.selection.getRng(),g);c.selection.setRng(et.toRange())},NH=(c,g)=>{const $=Ir(g,y7(c));$.length>0&&b7(c,$)},v7=c=>dr(c.startContainer),xD=c=>c.startOffset===0&&v7(c),_7=(c,g)=>{const $=g.startContainer.parentElement;return!Nt($)&&N6(c,Qn.fromDom($))},eM=c=>{const g=c.startContainer.parentNode,$=c.endContainer.parentNode;return!Nt(g)&&!Nt($)&&g.isEqualNode($)},zQ=c=>{const g=c.endContainer;return c.endOffset===(dr(g)?g.length:g.childNodes.length)},LH=c=>eM(c)&&zQ(c),BQ=c=>!c.endContainer.isEqualNode(c.commonAncestorContainer),$Q=c=>LH(c)||BQ(c),FH=c=>{const g=c.selection.getRng();return xD(g)&&_7(c,g)&&$Q(g)},GQ=c=>{if(FH(c)){const g=y7(c);return Yt.some(()=>{Aw(c),NH(c,g)})}else return Yt.none()},wD=(c,g)=>c.selection.isCollapsed()?QR(c,g):GQ(c),Lie=(c,g)=>Zw(c,$=>Wy($.dom),$=>g.isBlock(Sn($))),jQ=c=>Lie(Qn.fromDom(c.selection.getStart()),c.schema),UQ=c=>{const g=c.selection.getRng();return g.collapsed&&(v7(g)||c.dom.isEmpty(g.startContainer))&&!jQ(c)},tM=c=>(UQ(c)&&b7(c,[]),!0),x7=(c,g,$)=>an($)?Yt.some(()=>{c._selectionOverrides.hideFakeCaret(),KE(c,g,Qn.fromDom($))}):Yt.none(),HQ=(c,g)=>{const $=g?gI:J5,et=g?r0.Forwards:r0.Backwards,ot=P2(et,c.getBody(),c.selection.getRng());return $(ot)?x7(c,g,ot.getNode(!g)):Yt.from(H1(g,ot)).filter(at=>$(at)&&ME(ot,at)).bind(at=>x7(c,g,at.getNode(!g)))},VQ=(c,g)=>{const $=c.selection.getNode();return Jm($)?x7(c,g,$):Yt.none()},w7=(c,g)=>c.selection.isCollapsed()?HQ(c,g):VQ(c,g),WQ=c=>_d(c,g=>Jo(g.dom)||Ql(g.dom)).exists(g=>Jo(g.dom)),CD=c=>wp(c??"").getOr(0),zH=(c,g)=>{const $=c||uL(g)?"margin":"padding",et=bp(g,"direction")==="rtl"?"-right":"-left";return $+et},CA=(c,g,$,et,ot,at)=>{const ht=zH($,Qn.fromDom(at)),_t=CD(c.getStyle(at,ht));if(g==="outdent"){const St=Math.max(0,_t-et);c.setStyle(at,ht,St?St+ot:"")}else{const St=_t+et+ot;c.setStyle(at,ht,St)}},BH=(c,g)=>wo(g,$=>{const et=zH(O4(c),$),ot=zv($,et).map(CD).getOr(0);return c.dom.getContentEditable($.dom)!=="false"&&ot>0}),kD=c=>{const g=nC(c);return!c.mode.isReadOnly()&&(g.length>1||BH(c,g))},C7=c=>F1(c)||m2(c),k7=c=>Dm(c).exists(C7),nC=c=>zn(av(c.selection.getSelectedBlocks()),g=>!C7(g)&&!k7(g)&&WQ(g)),S7=(c,g)=>{var $,et;if(c.mode.isReadOnly())return;const{dom:ot}=c,at=oB(c),ht=(et=($=/[a-z%]+$/i.exec(at))===null||$===void 0?void 0:$[0])!==null&&et!==void 0?et:"px",_t=CD(at),St=O4(c);rn(nC(c),Lt=>{CA(ot,g,St,_t,ht,Lt.dom)})},J1=c=>S7(c,"indent"),MS=c=>S7(c,"outdent"),SD=c=>{if(c.selection.isCollapsed()&&kD(c)){const g=c.dom,$=c.selection.getRng(),et=Uo.fromRangeStart($),ot=g.getParent($.startContainer,g.isBlock);if(ot!==null&&JP(Qn.fromDom(ot),et,c.schema))return Yt.some(()=>MS(c))}return Yt.none()},$H=(c,g,$)=>As([SD,WR,HF,(et,ot)=>h7(et,g,ot),aD,hO,LI,w7,cD,wD,NI],et=>et(c,$)).filter(et=>c.selection.isEditable()),GH=(c,g)=>{$H(c,g,!1).fold(()=>{c.selection.isEditable()&&(Aw(c),pS(c))},Ro)},qQ=(c,g)=>{$H(c,g,!0).fold(()=>{c.selection.isEditable()&&y$(c)},Ro)},ZQ=(c,g)=>{c.addCommand("delete",()=>{GH(c,g)}),c.addCommand("forwardDelete",()=>{qQ(c,g)})},jH=5,KQ=400,UH=c=>c.touches===void 0||c.touches.length!==1?Yt.none():Yt.some(c.touches[0]),HH=(c,g)=>{const $=Math.abs(c.clientX-g.x),et=Math.abs(c.clientY-g.y);return $>jH||et>jH},YQ=c=>{const g=wm(),$=Eu(!1),et=nT(ot=>{c.dispatch("longpress",{...ot,type:"longpress"}),$.set(!0)},KQ);c.on("touchstart",ot=>{UH(ot).each(at=>{et.cancel();const ht={x:at.clientX,y:at.clientY,target:ot.target};et.throttle(ot),$.set(!1),g.set(ht)})},!0),c.on("touchmove",ot=>{et.cancel(),UH(ot).each(at=>{g.on(ht=>{HH(at,ht)&&(g.clear(),$.set(!1),c.dispatch("longpresscancel"))})})},!0),c.on("touchend touchcancel",ot=>{et.cancel(),ot.type!=="touchcancel"&&g.get().filter(at=>at.target.isEqualNode(ot.target)).each(()=>{$.get()?ot.preventDefault():c.dispatch("tap",{...ot,type:"tap"})})},!0)},E7=(c,g)=>Jr(c,g.nodeName),zI=(c,g)=>dr(g)?!0:Nr(g)?!E7(c.getBlockElements(),g)&&!Ay(g)&&!I1(c,g)&&!vC(g):!1,ED=(c,g,$)=>wn(Q5(Qn.fromDom($),Qn.fromDom(g)),et=>E7(c,et.dom)),VH=(c,g)=>{if(dr(g)){if(g.data.length===0)return!0;if(/^\s+$/.test(g.data))return!g.nextSibling||E7(c,g.nextSibling)||vC(g.nextSibling)}return!1},AD=c=>c.dom.create(c0(c),dw(c)),A7=c=>{const g=c.dom,$=c.selection,et=c.schema,ot=et.getBlockElements(),at=$.getStart(),ht=c.getBody();let _t,St,Lt=null;const Ht=c0(c);if(!at||!Nr(at))return;const qt=ht.nodeName.toLowerCase();if(!et.isValidChild(qt,Ht.toLowerCase())||ED(ot,ht,at))return;if(ht.firstChild===ht.lastChild&&Jl(ht.firstChild)){_t=AD(c),_t.appendChild(z1().dom),ht.replaceChild(_t,ht.firstChild),c.selection.setCursorLocation(_t,0),c.nodeChanged();return}let Qt=ht.firstChild;for(;Qt;)if(Nr(Qt)&&_h(et,Qt),zI(et,Qt)){if(VH(ot,Qt)){St=Qt,Qt=Qt.nextSibling,g.remove(St);continue}if(!_t){if(!Lt&&c.hasFocus()&&(Lt=Ix(c.selection.getRng(),()=>document.createElement("span"))),!Qt.parentNode){Qt=null;break}_t=AD(c),ht.insertBefore(_t,Qt)}St=Qt,Qt=Qt.nextSibling,_t.appendChild(St)}else _t=null,Qt=Qt.nextSibling;Lt&&(c.selection.setRng(Y1(Lt)),c.nodeChanged())},WH=(c,g,$)=>{const et=Qn.fromDom(AD(c)),ot=z1();Up(et,ot),$(g,et);const at=document.createRange();return at.setStartBefore(ot.dom),at.setEndBefore(ot.dom),at},XQ=c=>{c.on("NodeChange",()=>A7(c))},qH=c=>g=>(" "+g.attr("class")+" ").indexOf(c)!==-1,JQ=(c,g,$)=>function(et){const ot=arguments,at=ot[ot.length-2],ht=at>0?g.charAt(at-1):"";if(ht==='"')return et;if(ht===">"){const _t=g.lastIndexOf("<",at);if(_t!==-1&&g.substring(_t,at).indexOf('contenteditable="false"')!==-1)return et}return'<span class="'+$+'" data-mce-content="'+c.dom.encode(ot[0])+'">'+c.dom.encode(typeof ot[1]=="string"?ot[1]:ot[0])+"</span>"},QQ=(c,g,$)=>{let et=g.length,ot=$.content;if($.format!=="raw"){for(;et--;)ot=ot.replace(g[et],JQ(c,ot,ET(c)));$.content=ot}},eee=(c,g)=>wo(c,$=>{const et=g.match($);return et!==null&&et[0].length===g.length}),tee=c=>{const g="contenteditable",$=" "+cr.trim(Xv(c))+" ",et=" "+cr.trim(ET(c))+" ",ot=qH($),at=qH(et),ht=AT(c);ht.length>0&&c.on("BeforeSetContent",_t=>{QQ(c,ht,_t)}),c.parser.addAttributeFilter("class",_t=>{let St=_t.length;for(;St--;){const Lt=_t[St];ot(Lt)?Lt.attr(g,"true"):at(Lt)&&Lt.attr(g,"false")}}),c.serializer.addAttributeFilter(g,_t=>{let St=_t.length;for(;St--;){const Lt=_t[St];if(!ot(Lt)&&!at(Lt))continue;const Ht=Lt.attr("data-mce-content");ht.length>0&&Ht?eee(ht,Ht)?(Lt.name="#text",Lt.type=3,Lt.raw=!0,Lt.value=Ht):Lt.remove():Lt.attr(g,null)}})},ZH=c=>ls(Qn.fromDom(c.getBody()),"*[data-mce-caret]").map(g=>g.dom).getOrNull(),KH=(c,g)=>{g.hasAttribute("data-mce-caret")&&(zC(g),c.selection.setRng(c.selection.getRng()),c.selection.scrollIntoView(g))},nee=(c,g)=>{const $=ZH(c);if($){if(g.type==="compositionstart"){g.preventDefault(),g.stopPropagation(),KH(c,$);return}e4($)&&(KH(c,$),c.undoManager.add())}},i1=c=>{c.on("keyup compositionstart",An(nee,c))},YH=Ql,T7=(c,g,$)=>TH(g,c,$,fS,hS,YH),XH=(c,g,$)=>IH(g,c,$,at=>fS(at)||XP(at),at=>hS(at)||Z8(at),YH),I7=c=>{const g=c.dom.create(c0(c));return g.innerHTML='<br data-mce-bogus="1">',g},JH=(c,g,$)=>{const et=u0(c.getBody()),ot=An(x5,g===1?et.next:et.prev);if($.collapsed){const at=c.dom.getParent($.startContainer,"PRE");if(!at)return;if(!ot(Uo.fromRangeStart($))){const _t=Qn.fromDom(I7(c));g===1?ly(Qn.fromDom(at),_t):Su(Qn.fromDom(at),_t),c.selection.select(_t.dom,!0),c.selection.collapse()}}},oee=(c,g)=>{const $=g?r0.Forwards:r0.Backwards,et=c.selection.getRng();return T7($,c,et).orThunk(()=>(JH(c,$,et),Yt.none()))},ree=(c,g)=>{const $=g?1:-1,et=c.selection.getRng();return XH($,c,et).orThunk(()=>(JH(c,$,et),Yt.none()))},see=(c,g)=>{const $=g?c.getEnd(!0):c.getStart(!0);return r6($)?!g:g},QH=(c,g)=>oee(c,see(c.selection,g)).exists($=>(Rx(c,$),!0)),R7=(c,g)=>ree(c,g).exists($=>(Rx(c,$),!0)),eV=(c,g)=>SQ(c,g,g?hS:fS),TD=(c,g)=>VF(c,!g).map($=>{const et=$.toRange(),ot=c.selection.getRng();return g?et.setStart(ot.startContainer,ot.startOffset):et.setEnd(ot.endContainer,ot.endOffset),et}).exists($=>(Rx(c,$),!0)),nM=c=>mn(["figcaption"],Sn(c)),oC=(c,g,$)=>{const et=An(_i,g);return _d(Qn.fromDom(c.container()),ot=>$.isBlock(Sn(ot)),et).filter(nM)},kA=(c,g,$)=>g?xH(c.dom,$):_H(c.dom,$),ID=(c,g)=>{const $=Qn.fromDom(c.getBody()),et=Uo.fromRangeStart(c.selection.getRng());return oC(et,$,c.schema).exists(()=>{if(kA($,g,et)){const at=WH(c,$,g?Up:E1);return c.selection.setRng(at),!0}else return!1})},RD=(c,g)=>c.selection.isCollapsed()?ID(c,g):!1,M7=(c,g,$)=>{const et=c.selection.getRng(),ot=Uo.fromRangeStart(et);return c.getBody().firstChild===g&&_H($,ot)?(c.execCommand("InsertNewBlockBefore"),!0):!1},tV=(c,g)=>{const $=c.selection.getRng(),et=Uo.fromRangeStart($);return c.getBody().lastChild===g&&xH(g,et)?(c.execCommand("InsertNewBlockAfter"),!0):!1},iee=(c,g)=>g?Yt.from(c.dom.getParent(c.selection.getNode(),"details")).map($=>tV(c,$)).getOr(!1):Yt.from(c.dom.getParent(c.selection.getNode(),"summary")).bind($=>Yt.from(c.dom.getParent($,"details")).map(et=>M7(c,et,$))).getOr(!1),P7=(c,g)=>iee(c,g),O7={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},aee=c=>Dn(c,g=>({...O7,...g})),lee=c=>Dn(c,g=>({...O7,...g})),nV=(c,g)=>g.keyCode===c.keyCode&&g.shiftKey===c.shiftKey&&g.altKey===c.altKey&&g.ctrlKey===c.ctrlKey&&g.metaKey===c.metaKey,cee=(c,g)=>oo(aee(c),$=>nV($,g)?[$]:[]),uee=(c,g)=>oo(lee(c),$=>nV($,g)?[$]:[]),js=(c,...g)=>()=>c.apply(null,g),BI=(c,g)=>Jn(cee(c,g),$=>$.action()),D7=(c,g)=>As(uee(c,g),$=>$.action()),dee=(c,g)=>{const $=g?r0.Forwards:r0.Backwards,et=c.selection.getRng();return TH(c,$,et,gI,J5,Jm).exists(ot=>(Rx(c,ot),!0))},fee=(c,g)=>{const $=g?1:-1,et=c.selection.getRng();return IH(c,$,et,gI,J5,Jm).exists(ot=>(Rx(c,ot),!0))},hee=(c,g)=>SQ(c,g,g?J5:gI),oV=gv.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),MD={...oV,none:c=>oV.none(c)},pee=(c,g)=>rV(c,g,_o),rV=(c,g,$)=>oo(Jp(c),et=>R0(et,g)?$(et)?[et]:[]:rV(et,g,$)),Fie=(c,g,$=On)=>{if($(g))return Yt.none();if(mn(c,Sn(g)))return Yt.some(g);const et=ot=>R0(ot,"table")||$(ot);return zp(g,c.join(","),et)},gee=(c,g)=>Fie(["td","th"],c,g),Xy=c=>pee(c,"th,td"),N7=(c,g)=>iv(c,"table",g),SA=(c,g,$,et,ot=_o)=>{const at=et===1;if(!at&&$<=0)return MD.first(c[0]);if(at&&$>=c.length-1)return MD.last(c[c.length-1]);{const ht=$+et,_t=c[ht];return ot(_t)?MD.middle(g,_t):SA(c,g,ht,et,ot)}},sV=(c,g)=>N7(c,g).bind($=>{const et=Xy($);return bo(et,at=>_i(c,at)).map(at=>({index:at,all:et}))}),iV=(c,g,$)=>sV(c,$).fold(()=>MD.none(c),ot=>SA(ot.all,c,ot.index,1,g)),aV=(c,g,$)=>sV(c,$).fold(()=>MD.none(),ot=>SA(ot.all,c,ot.index,-1,g)),lV=c=>YM(c).filter(g=>g.trim().length!==0||g.indexOf(dm)>-1).isSome(),L7=c=>Tl(c)&&lm(c,"contenteditable")==="false",cV=["img","br"],mee=c=>lV(c)||mn(cV,Sn(c))||L7(c),uV=c=>Hw(c,mee),yee=(c,g)=>({left:c.left-g,top:c.top-g,right:c.right+g*2,bottom:c.bottom+g*2,width:c.width+g,height:c.height+g}),bee=(c,g)=>oo(g,$=>{const et=yee(hx($.getBoundingClientRect()),-1);return[{x:et.left,y:c(et),cell:$},{x:et.right,y:c(et),cell:$}]}),vee=(c,g,$)=>Hn(c,(et,ot)=>et.fold(()=>Yt.some(ot),at=>{const ht=Math.sqrt(Math.abs(at.x-g)+Math.abs(at.y-$)),_t=Math.sqrt(Math.abs(ot.x-g)+Math.abs(ot.y-$));return Yt.some(_t<ht?ot:at)}),Yt.none()),PD=(c,g,$,et,ot)=>{const at=m0(Qn.fromDom($),"td,th,caption").map(_t=>_t.dom),ht=zn(bee(c,at),_t=>g(_t,ot));return vee(ht,et,ot).map(_t=>_t.cell)},_ee=c=>c.bottom,xee=c=>c.top,zie=(c,g)=>c.y<g,wee=(c,g)=>c.y>g,dV=An(PD,_ee,zie),Bie=An(PD,xee,wee),Cee=(c,g)=>_r(g.getClientRects()).bind($=>dV(c,$.left,$.top)).bind($=>gD(yQ($),g)),kee=(c,g)=>fs(g.getClientRects()).bind($=>Bie(c,$.left,$.top)).bind($=>gD(mQ($),g)),See=(c,g,$)=>$.breakAt.exists(et=>c(g,et).breakAt.isSome()),F7=c=>c.breakType===Dw.Wrap&&c.positions.length===0,OD=c=>c.breakType===Dw.Br&&c.positions.length===1,z7=(c,g,$)=>{const et=c(g,$);return F7(et)||!Jl($.getNode())&&OD(et)?!See(c,g,et):et.breakAt.isNone()},fV=An(z7,RS),Eee=An(z7,KR),Aee=(c,g,$)=>{const et=Uo.fromRangeStart(g);return O2(!c,$).exists(ot=>ot.isEqual(et))},B7=(c,g,$,et)=>{const ot=c.selection.getRng(),at=g?1:-1;return KL()&&Aee(g,ot,$)?(Pw(at,c,$,!g,!1).each(ht=>{Rx(c,ht)}),!0):!1},Tee=(c,g,$)=>Cee(g,$).orThunk(()=>_r($.getClientRects()).bind(et=>a7(bH(c,Uo.before(g)),et.left))).getOr(Uo.before(g)),Iee=(c,g,$)=>kee(g,$).orThunk(()=>_r($.getClientRects()).bind(et=>a7(vH(c,Uo.after(g)),et.left))).getOr(Uo.after(g)),hV=(c,g)=>{const $=g.getNode(c);return lv($)?Yt.some($):Yt.none()},Ree=(c,g,$)=>{g.undoManager.transact(()=>{const et=c?ly:Su,ot=WH(g,Qn.fromDom($),et);Rx(g,ot)})},Q1=(c,g,$)=>{const et=hV(!!g,$),ot=g===!1;et.fold(()=>Rx(c,$.toRange()),at=>O2(ot,c.getBody()).filter(ht=>ht.isEqual($)).fold(()=>Rx(c,$.toRange()),ht=>Ree(g,c,at)))},pV=(c,g,$,et)=>{const ot=c.selection.getRng(),at=Uo.fromRangeStart(ot),ht=c.getBody();if(!g&&fV(et,at)){const _t=Tee(ht,$,at);return Q1(c,g,_t),!0}else if(g&&Eee(et,at)){const _t=Iee(ht,$,at);return Q1(c,g,_t),!0}else return!1},$7=(c,g,$)=>Yt.from(c.dom.getParent(c.selection.getNode(),"td,th")).bind(et=>Yt.from(c.dom.getParent(et,"table")).map(ot=>$(c,g,ot,et))).getOr(!1),Mee=(c,g)=>$7(c,g,B7),gV=(c,g)=>$7(c,g,pV),$ie=c=>{const g=VE.exact(c,0,c,0);return it(g)},Pee=(c,g,$)=>$.fold(Yt.none,Yt.none,(et,ot)=>uV(ot).map(at=>$ie(at)),et=>c.mode.isReadOnly()?Yt.none():(c.execCommand("mceTableInsertRowAfter"),mV(c,g,et))),mV=(c,g,$)=>Pee(c,g,iV($,W0)),DD=(c,g,$)=>Pee(c,g,aV($,W0)),yV=(c,g)=>{const $=["table","li","dl"],et=Qn.fromDom(c.getBody()),ot=_t=>{const St=Sn(_t);return _i(_t,et)||mn($,St)},at=c.selection.getRng(),ht=Qn.fromDom(g?at.endContainer:at.startContainer);return gee(ht,ot).map(_t=>(N7(_t,ot).each(Ht=>{c.model.table.clearSelectedCells(Ht.dom)}),c.selection.collapse(!g),(g?mV:DD)(c,ot,_t).each(Ht=>{c.selection.setRng(Ht)}),!0)).getOr(!1)},G7=(c,g,$)=>{const et=Kr.os.isMacOS()||Kr.os.isiOS();BI([{keyCode:Br.RIGHT,action:js(QH,c,!0)},{keyCode:Br.LEFT,action:js(QH,c,!1)},{keyCode:Br.UP,action:js(R7,c,!1)},{keyCode:Br.DOWN,action:js(R7,c,!0)},...et?[{keyCode:Br.UP,action:js(TD,c,!1),metaKey:!0,shiftKey:!0},{keyCode:Br.DOWN,action:js(TD,c,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Br.RIGHT,action:js(Mee,c,!0)},{keyCode:Br.LEFT,action:js(Mee,c,!1)},{keyCode:Br.UP,action:js(gV,c,!1)},{keyCode:Br.DOWN,action:js(gV,c,!0)},{keyCode:Br.UP,action:js(gV,c,!1)},{keyCode:Br.UP,action:js(P7,c,!1)},{keyCode:Br.DOWN,action:js(P7,c,!0)},{keyCode:Br.RIGHT,action:js(dee,c,!0)},{keyCode:Br.LEFT,action:js(dee,c,!1)},{keyCode:Br.UP,action:js(fee,c,!1)},{keyCode:Br.DOWN,action:js(fee,c,!0)},{keyCode:Br.RIGHT,action:js(XR,c,g,!0)},{keyCode:Br.LEFT,action:js(XR,c,g,!1)},{keyCode:Br.RIGHT,ctrlKey:!et,altKey:et,action:js(MQ,c,g)},{keyCode:Br.LEFT,ctrlKey:!et,altKey:et,action:js(PQ,c,g)},{keyCode:Br.UP,action:js(RD,c,!1)},{keyCode:Br.DOWN,action:js(RD,c,!0)}],$).each(ot=>{$.preventDefault()})},bV=(c,g)=>{c.on("keydown",$=>{$.isDefaultPrevented()||G7(c,g,$)})},U_=(c,g)=>({container:c,offset:g}),oM=$u.DOM,ND=c=>g=>c===g?-1:0,Oee=c=>g=>c.isBlock(g)||mn(["BR","IMG","HR","INPUT"],g.nodeName)||c.getContentEditable(g)==="false",j7=(c,g,$)=>{if(dr(c)&&g>=0)return Yt.some(U_(c,g));{const et=h2(oM);return Yt.from(et.backwards(c,g,ND(c),$)).map(ot=>U_(ot.container,ot.container.data.length))}},Dee=(c,g,$)=>{if(dr(c)&&g>=c.length)return Yt.some(U_(c,g));{const et=h2(oM);return Yt.from(et.forwards(c,g,ND(c),$)).map(ot=>U_(ot.container,0))}},$I=(c,g,$)=>{if(!dr(c))return Yt.none();const et=c.data;if(g>=0&&g<=et.length)return Yt.some(U_(c,g));{const ot=h2(oM);return Yt.from(ot.backwards(c,g,ND(c),$)).bind(at=>{const ht=at.container.data;return $I(at.container,g+ht.length,$)})}},vV=(c,g,$)=>{if(!dr(c))return Yt.none();const et=c.data;if(g<=et.length)return Yt.some(U_(c,g));{const ot=h2(oM);return Yt.from(ot.forwards(c,g,ND(c),$)).bind(at=>vV(at.container,g-et.length,$))}},U7=(c,g,$,et,ot)=>{const at=h2(c,Oee(c));return Yt.from(at.backwards(g,$,et,ot))},Nee=c=>c.collapsed&&dr(c.startContainer),H7=c=>fv(c.toString().replace(/\u00A0/g," ")),_V=c=>c!==""&&` \uFEFF\f
\r	\v`.indexOf(c)!==-1,Lee=(c,g)=>c.substring(g.length),xV=(c,g,$,et=!1)=>{let ot;const at=$.charAt(0);for(ot=g-1;ot>=0;ot--){const ht=c.charAt(ot);if(!et&&_V(ht))return Yt.none();if(at===ht&&hs(c,$,ot,g))break}return Yt.some(ot)},V7=(c,g,$,et=!1)=>{if(!Nee(g))return Yt.none();const ot={text:"",offset:0},at=(_t,St,Lt)=>(ot.text=Lt+ot.text,ot.offset+=St,xV(ot.text,ot.offset,$,et).getOr(St)),ht=c.getParent(g.startContainer,c.isBlock)||c.getRoot();return U7(c,g.startContainer,g.startOffset,at,ht).bind(_t=>{const St=g.cloneRange();if(St.setStart(_t.container,_t.offset),St.setEnd(g.endContainer,g.endOffset),St.collapsed)return Yt.none();const Lt=H7(St);return Lt.lastIndexOf($)!==0?Yt.none():Yt.some({text:Lee(Lt,$),range:St,trigger:$})})},Fee=c=>c.nodeType===bn,zee=c=>c.nodeType===y1,wV=c=>{if(Fee(c))return U_(c,c.data.length);{const g=c.childNodes;return g.length>0?wV(g[g.length-1]):U_(c,g.length)}},CV=(c,g)=>{const $=c.childNodes;return $.length>0&&g<$.length?CV($[g],0):$.length>0&&zee(c)&&$.length===g?wV($[$.length-1]):U_(c,g)},Bee=(c,g)=>{var $;const et=($=c.getParent(g.container,c.isBlock))!==null&&$!==void 0?$:c.getRoot();return U7(c,g.container,g.offset,(ot,at)=>at===0?-1:at,et).filter(ot=>{const at=ot.container.data.charAt(ot.offset-1);return!_V(at)}).isSome()},W7=c=>g=>{const $=CV(g.startContainer,g.startOffset);return!Bee(c,$)},$ee=(c,g,$)=>As($.triggers,et=>V7(c,g,et)),kV=(c,g)=>{const $=g(),et=c.selection.getRng();return $ee(c.dom,et,$).bind(ot=>SV(c,g,ot))},SV=(c,g,$,et={})=>{var ot;const at=g(),_t=(ot=c.selection.getRng().startContainer.nodeValue)!==null&&ot!==void 0?ot:"",St=zn(at.lookupByTrigger($.trigger),Ht=>$.text.length>=Ht.minChars&&Ht.matches.getOrThunk(()=>W7(c.dom))($.range,_t,$.text));if(St.length===0)return Yt.none();const Lt=Promise.all(Dn(St,Ht=>Ht.fetch($.text,Ht.maxResults,et).then(Qt=>({matchText:$.text,items:Qt,columns:Ht.columns,onAction:Ht.onAction,highlightOn:Ht.highlightOn}))));return Yt.some({lookupData:Lt,context:$})};var Mx;(function(c){c[c.Error=0]="Error",c[c.Value=1]="Value"})(Mx||(Mx={}));const q7=(c,g,$)=>c.stype===Mx.Error?g(c.serror):$(c.svalue),Gee=c=>{const g=[],$=[];return rn(c,et=>{q7(et,ot=>$.push(ot),ot=>g.push(ot))}),{values:g,errors:$}},jee=(c,g)=>c.stype===Mx.Error?{stype:Mx.Error,serror:g(c.serror)}:c,Uee=(c,g)=>c.stype===Mx.Value?{stype:Mx.Value,svalue:g(c.svalue)}:c,Gm=(c,g)=>c.stype===Mx.Value?g(c.svalue):c,Hee=(c,g)=>c.stype===Mx.Error?g(c.serror):c,EV=c=>({stype:Mx.Value,svalue:c}),AV=c=>({stype:Mx.Error,serror:c}),C0={fromResult:c=>c.fold(AV,EV),toResult:c=>q7(c,pm.error,pm.value),svalue:EV,partition:Gee,serror:AV,bind:Gm,bindError:Hee,map:Uee,mapError:jee,fold:q7},Nw=c=>$t(c)&&Zr(c).length>100?" removed due to size":JSON.stringify(c,null,2),Z7=c=>{const g=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:ln("... (only showing first ten failures)")}]):c;return Dn(g,$=>"Failed path: ("+$.path.join(" > ")+`)
`+$.getErrorInfo())},rM=(c,g)=>C0.serror([{path:c,getErrorInfo:g}]),K7=(c,g,$)=>rM(c,()=>'Could not find valid *required* value for "'+g+'" in '+Nw($)),Y7=(c,g)=>rM(c,()=>'Choice schema did not contain choice key: "'+g+'"'),X7=(c,g,$)=>rM(c,()=>'The chosen schema: "'+$+'" did not exist in branches: '+Nw(g)),IV=(c,g)=>rM(c,ln(g)),LD=(c,g,$,et)=>ba($,et).fold(()=>X7(c,$,et),at=>at.extract(c.concat(["branch: "+et]),g)),FD=(c,g)=>({extract:(ot,at)=>ba(at,c).fold(()=>Y7(ot,c),_t=>LD(ot,at,g,_t)),toString:()=>"chooseOn("+c+"). Possible values: "+Zr(g)}),sM=(c,g)=>g,iM=(c,g)=>Xt(c)&&Xt(g)?PS(c,g):g,e_=c=>(...g)=>{if(g.length===0)throw new Error("Can't merge zero objects");const $={};for(let et=0;et<g.length;et++){const ot=g[et];for(const at in ot)Jr(ot,at)&&($[at]=c($[at],ot[at]))}return $},PS=e_(iM),J7=e_(sM),Q7=()=>({tag:"required",process:{}}),Wee=c=>({tag:"defaultedThunk",process:c}),e9=c=>Wee(ln(c)),qee=()=>({tag:"option",process:{}}),Zee=(c,g)=>c.length>0?C0.svalue(PS(g,J7.apply(void 0,c))):C0.svalue(g),GI=c=>It(C0.serror,$n)(c),Kee={consolidateObj:(c,g)=>{const $=C0.partition(c);return $.errors.length>0?GI($.errors):Zee($.values,g)},consolidateArr:c=>{const g=C0.partition(c);return g.errors.length>0?GI(g.errors):C0.svalue(g.values)}},Yee=(c,g,$,et)=>({tag:"field",key:c,newKey:g,presence:$,prop:et}),Xee=(c,g)=>({tag:"custom",newKey:c,instantiator:g}),RV=(c,g,$)=>{switch(c.tag){case"field":return g(c.key,c.newKey,c.presence,c.prop);case"custom":return $(c.newKey,c.instantiator)}},t9=c=>{const g=(et,ot)=>C0.bindError(c(ot),at=>IV(et,at)),$=ln("val");return{extract:g,toString:$}},Jee=t9(C0.svalue),Qee=(c,g,$,et)=>ba(g,$).fold(()=>K7(c,$,g),et),MV=(c,g,$,et)=>{const ot=ba(c,g).getOrThunk(()=>$(c));return et(ot)},ete=(c,g,$)=>$(ba(c,g)),tte=(c,g,$,et)=>{const ot=ba(c,g).map(at=>at===!0?$(c):at);return et(ot)},nte=(c,g,$,et,ot)=>{const at=_t=>ot.extract(g.concat([et]),_t),ht=_t=>_t.fold(()=>C0.svalue(Yt.none()),St=>{const Lt=ot.extract(g.concat([et]),St);return C0.map(Lt,Yt.some)});switch(c.tag){case"required":return Qee(g,$,et,at);case"defaultedThunk":return MV($,et,c.process,at);case"option":return ete($,et,ht);case"defaultedOptionThunk":return tte($,et,c.process,ht);case"mergeWithThunk":return MV($,et,ln({}),_t=>{const St=PS(c.process($),_t);return at(St)})}},ote=(c,g,$)=>{const et={},ot=[];for(const at of $)RV(at,(ht,_t,St,Lt)=>{const Ht=nte(St,c,g,ht,Lt);C0.fold(Ht,qt=>{ot.push(...qt)},qt=>{et[_t]=qt})},(ht,_t)=>{et[ht]=_t(g)});return ot.length>0?C0.serror(ot):C0.svalue(et)},zD=c=>({extract:(et,ot)=>ote(et,ot,c),toString:()=>`obj{
`+Dn(c,ot=>RV(ot,(at,ht,_t,St)=>at+" -> "+St.toString(),(at,ht)=>"state("+at+")")).join(`
`)+"}"}),n9=c=>({extract:(et,ot)=>{const at=Dn(ot,(ht,_t)=>c.extract(et.concat(["["+_t+"]"]),ht));return Kee.consolidateArr(at)},toString:()=>"array("+c.toString()+")"}),PV=c=>t9(g=>c(g).fold(C0.serror,C0.svalue)),rte=(c,g,$)=>{const et=g.extract([c],$);return C0.mapError(et,ot=>({input:$,errors:ot}))},ste=(c,g,$)=>C0.toResult(rte(c,g,$)),ite=c=>`Errors: 
`+Z7(c.errors).join(`
`)+`

Input object: `+Nw(c.input),OV=(c,g)=>FD(c,Ms(g,zD)),DV=ln(Jee),BD=(c,g)=>t9($=>{const et=typeof $;return c($)?C0.svalue($):C0.serror(`Expected type: ${g} but got: ${et}`)}),NV=BD(ao,"number"),$D=BD(Et,"string"),LV=BD(Jt,"boolean"),GD=BD(Vt,"function"),aM=Yee,FV=Xee,ate=c=>PV(g=>mn(c,g)?pm.value(g):pm.error(`Unsupported value: "${g}", choose one of "${c.join(", ")}".`)),zV=(c,g)=>aM(c,c,Q7(),g),o9=c=>zV(c,$D),BV=c=>zV(c,GD),lte=(c,g)=>aM(c,c,Q7(),n9(g)),jD=(c,g)=>aM(c,c,qee(),g),UD=c=>jD(c,$D),cte=c=>jD(c,GD),$V=(c,g)=>aM(c,c,e9(g),DV()),jI=(c,g,$)=>aM(c,c,e9(g),$),GV=(c,g)=>jI(c,g,NV),jV=(c,g)=>jI(c,g,$D),r9=(c,g,$)=>jI(c,g,ate($)),HD=(c,g)=>jI(c,g,LV),s9=(c,g)=>jI(c,g,GD),ute=(c,g,$)=>jI(c,g,n9($)),dte=o9("type"),fte=BV("fetch"),i9=BV("onAction"),hte=s9("onSetup",()=>fn),pte=UD("text"),gte=UD("icon"),Uie=UD("tooltip"),mte=UD("label"),VD=HD("active",!1),UV=HD("enabled",!0),a9=HD("primary",!1),yte=c=>$V("columns",c),UI=c=>jV("type",c),HV=zD([dte,o9("trigger"),GV("minChars",1),yte(1),GV("maxResults",10),cte("matches"),fte,i9,ute("highlightOn",[],$D)]),bte=c=>ste("Autocompleter",HV,c),l9=[UV,Uie,gte,pte,hte,jV("context","mode:design")],VV=[VD].concat(l9),WV=[s9("predicate",On),r9("scope","node",["node","editor"]),r9("position","selection",["node","selection","line"])],vte=l9.concat([UI("contextformbutton"),a9,i9,FV("original",uo)]),c9=VV.concat([UI("contextformbutton"),a9,i9,FV("original",uo)]),_te=l9.concat([UI("contextformbutton")]),xte=VV.concat([UI("contextformtogglebutton")]),wte=OV("type",{contextformbutton:vte,contextformtogglebutton:c9});zD([UI("contextform"),s9("initValue",ln("")),mte,lte("commands",wte),jD("launch",OV("type",{contextformbutton:_te,contextformtogglebutton:xte}))].concat(WV));const qV=c=>{const g=c.ui.registry.getAll().popups,$=Ms(g,ht=>bte(ht).fold(_t=>{throw new Error(ite(_t))},uo)),et=Po(wu($,ht=>ht.trigger)),ot=iu($);return{dataset:$,triggers:et,lookupByTrigger:ht=>zn(ot,_t=>_t.trigger===ht)}},Cte=(c,g)=>{const $=nT(g.load,50);c.on("input",et=>{et.inputType==="insertCompositionText"&&!c.composing||$.throttle()}),c.on("keydown",et=>{const ot=et.which;ot===8?$.throttle():ot===27?($.cancel(),g.cancelIfNecessary()):(ot===38||ot===40)&&$.cancel()},!0),c.on("remove",$.cancel)},kte=c=>{const g=wm(),$=Eu(!1),et=g.isSet,ot=()=>{et()&&(y8(c),$.set(!1),g.clear())},at=qt=>{et()||g.set({trigger:qt.trigger,matchLength:qt.text.length})},ht=jo(()=>qV(c)),_t=qt=>g.get().map(Qt=>V7(c.dom,c.selection.getRng(),Qt.trigger,!0).bind(gn=>SV(c,ht,gn,qt))).getOrThunk(()=>kV(c,ht)),St=qt=>{_t(qt).fold(ot,Qt=>{at(Qt.context),Qt.lookupData.then(gn=>{g.get().map(kn=>{const yn=Qt.context;kn.trigger===yn.trigger&&(g.set({...kn,matchLength:yn.text.length}),$.get()?(tI(c,{range:yn.range}),m8(c,{lookupData:gn})):($.set(!0),tI(c,{range:yn.range}),eI(c,{lookupData:gn})))})})})},Lt=(qt,Qt)=>{const gn=qt.compareBoundaryPoints(window.Range.START_TO_START,Qt),kn=qt.compareBoundaryPoints(window.Range.END_TO_END,Qt);return gn>=0&&kn<=0},Ht=()=>g.get().bind(({trigger:qt})=>{const Qt=c.selection.getRng();return V7(c.dom,Qt,qt,$.get()).filter(({range:gn})=>Lt(Qt,gn)).map(({range:gn})=>gn)});c.addCommand("mceAutocompleterReload",(qt,Qt)=>{const gn=$t(Qt)?Qt.fetchOptions:{};St(gn)}),c.addCommand("mceAutocompleterClose",ot),c.addCommand("mceAutocompleterRefreshActiveRange",()=>{Ht().each(qt=>{tI(c,{range:qt})})}),c.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>Ht().isSome()),Cte(c,{cancelIfNecessary:ot,load:St})},Ste=un().browser.isSafari(),ZV=c=>T_(Qn.fromDom(c)),jm=(c,g)=>{var $;return c.startOffset===0&&c.endOffset===(($=g.textContent)===null||$===void 0?void 0:$.length)},t_=(c,g)=>Yt.from(c.getParent(g.container(),"details")),KV=(c,g)=>t_(c,g).isSome(),Vie=(c,g)=>{const $=Yt.from(c.getParent(g.startContainer,"details")),et=Yt.from(c.getParent(g.endContainer,"details"));if($.isSome()||et.isSome()){const ot=$.bind(at=>Yt.from(c.select("summary",at)[0]));return Yt.some({startSummary:ot,startDetails:$,endDetails:et})}else return Yt.none()},Ete=(c,g)=>F0(g).exists($=>$.isEqual(c)),Ate=(c,g)=>Vy(g).exists($=>Jl($.getNode())&&Ey(g,$).exists(et=>et.isEqual(c))||$.isEqual(c)),Tte=(c,g)=>g.startSummary.exists($=>Ete(c,$)),Ite=(c,g)=>g.startSummary.exists($=>Ate(c,$)),YV=(c,g)=>g.startDetails.exists($=>Ey($,c).forall(et=>g.startSummary.exists(ot=>!ot.contains(c.container())&&ot.contains(et.container())))),HI=(c,g,$)=>$.startDetails.exists(et=>L0(c,g).forall(ot=>!et.contains(ot.container()))),Rte=(c,g)=>{const $=g.getNode();dn($)||c.selection.setCursorLocation($,g.offset())},XV=(c,g,$)=>{const et=c.dom.getParent(g.container(),"details");if(et&&!et.open){const ot=c.dom.select("summary",et)[0];ot&&($?F0(ot):Vy(ot)).each(ht=>Rte(c,ht))}else Rte(c,g)},Mte=(c,g)=>{const $=St=>St.contains(c.startContainer),et=St=>St.contains(c.endContainer),ot=g.startSummary.exists($),at=g.startSummary.exists(et),ht=g.startDetails.forall(St=>g.endDetails.forall(Lt=>St!==Lt));return(ot||at)&&!(ot&&at)||ht},H_=(c,g,$)=>{const{dom:et,selection:ot}=c,at=c.getBody();if($==="character"){const ht=Uo.fromRangeStart(ot.getRng()),_t=et.getParent(ht.container(),et.isBlock),St=t_(et,ht),Lt=_t&&et.isEmpty(_t),Ht=Nt(_t==null?void 0:_t.previousSibling),qt=Nt(_t==null?void 0:_t.nextSibling);return Lt&&(g?qt:Ht)&&bw(!g,at,ht).exists(kn=>KV(et,kn)&&!Fp(St,t_(et,kn)))?!0:bw(g,at,ht).fold(On,Qt=>{const gn=t_(et,Qt);if(KV(et,Qt)&&!Fp(St,gn)){if(g||XV(c,Qt,!1),_t&&Lt){if(g&&Ht)return!0;if(!g&&qt)return!0;XV(c,Qt,g),c.dom.remove(_t)}return!0}else return!1})}else return!1},Pte=(c,g,$,et)=>{const at=c.selection.getRng(),ht=Uo.fromRangeStart(at),_t=c.getBody();return et==="selection"?Mte(at,g):$?Ite(ht,g)||HI(_t,ht,g):Tte(ht,g)||YV(ht,g)},Ote=(c,g,$)=>Vie(c.dom,c.selection.getRng()).fold(()=>H_(c,g,$),et=>Pte(c,et,g,$)||H_(c,g,$)),JV=(c,g,$)=>{const et=c.selection,ot=et.getNode(),at=et.getRng(),ht=Uo.fromRangeStart(at);return __(ot)?($==="selection"&&jm(at,ot)||b$(g,ht,ot)?ZV(ot):c.undoManager.transact(()=>{const _t=et.getSel();let{anchorNode:St,anchorOffset:Lt,focusNode:Ht,focusOffset:qt}=_t??{};const Qt=()=>{an(St)&&an(Lt)&&an(Ht)&&an(qt)&&(_t==null||_t.setBaseAndExtent(St,Lt,Ht,qt))},gn=()=>{St=_t==null?void 0:_t.anchorNode,Lt=_t==null?void 0:_t.anchorOffset,Ht=_t==null?void 0:_t.focusNode,qt=_t==null?void 0:_t.focusOffset},kn=(Rn,so)=>{rn(Rn.childNodes,ho=>{z2(ho)&&so.appendChild(ho)})},yn=c.dom.create("span",{"data-mce-bogus":"1"});kn(ot,yn),ot.appendChild(yn),Qt(),($==="word"||$==="line")&&(_t==null||_t.modify("extend",g?"right":"left",$)),!et.isCollapsed()&&jm(et.getRng(),yn)?ZV(ot):(c.execCommand(g?"ForwardDelete":"Delete"),gn(),kn(yn,ot),Qt()),c.dom.remove(yn)}),!0):!1},EA=(c,g,$)=>Ote(c,g,$)||Ste&&JV(c,g,$)?Yt.some(fn):Yt.none(),WD=c=>(g,$,et={})=>{const ot=g.getBody(),at={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:ot,currentTarget:ot,eventPhase:Event.AT_TARGET,originalTarget:ot,explicitOriginalTarget:ot,isTrusted:!1,srcElement:ot,cancelable:!1,preventDefault:fn,inputType:$},ht=x3(new InputEvent(c));return g.dispatch(c,{...ht,...at,...et})},a1=WD("input"),lM=WD("beforeinput"),u9=un(),QV=u9.os,cM=QV.isMacOS()||QV.isiOS(),tW=u9.browser.isFirefox(),nW=(c,g,$)=>{const et=$.keyCode===Br.BACKSPACE?"deleteContentBackward":"deleteContentForward",ot=c.selection.isCollapsed(),at=ot?"character":"selection",ht=_t=>ot?_t?"word":"line":"selection";D7([{keyCode:Br.BACKSPACE,action:js(SD,c)},{keyCode:Br.BACKSPACE,action:js(WR,c,!1)},{keyCode:Br.DELETE,action:js(WR,c,!0)},{keyCode:Br.BACKSPACE,action:js(HF,c,!1)},{keyCode:Br.DELETE,action:js(HF,c,!0)},{keyCode:Br.BACKSPACE,action:js(h7,c,g,!1)},{keyCode:Br.DELETE,action:js(h7,c,g,!0)},{keyCode:Br.BACKSPACE,action:js(hO,c,!1)},{keyCode:Br.DELETE,action:js(hO,c,!0)},{keyCode:Br.BACKSPACE,action:js(EA,c,!1,at)},{keyCode:Br.DELETE,action:js(EA,c,!0,at)},...cM?[{keyCode:Br.BACKSPACE,altKey:!0,action:js(EA,c,!1,ht(!0))},{keyCode:Br.DELETE,altKey:!0,action:js(EA,c,!0,ht(!0))},{keyCode:Br.BACKSPACE,metaKey:!0,action:js(EA,c,!1,ht(!1))}]:[{keyCode:Br.BACKSPACE,ctrlKey:!0,action:js(EA,c,!1,ht(!0))},{keyCode:Br.DELETE,ctrlKey:!0,action:js(EA,c,!0,ht(!0))}],{keyCode:Br.BACKSPACE,action:js(LI,c,!1)},{keyCode:Br.DELETE,action:js(LI,c,!0)},{keyCode:Br.BACKSPACE,action:js(w7,c,!1)},{keyCode:Br.DELETE,action:js(w7,c,!0)},{keyCode:Br.BACKSPACE,action:js(cD,c,!1)},{keyCode:Br.DELETE,action:js(cD,c,!0)},{keyCode:Br.BACKSPACE,action:js(aD,c,!1)},{keyCode:Br.DELETE,action:js(aD,c,!0)},{keyCode:Br.BACKSPACE,action:js(wD,c,!1)},{keyCode:Br.DELETE,action:js(wD,c,!0)},{keyCode:Br.BACKSPACE,action:js(NI,c,!1)},{keyCode:Br.DELETE,action:js(NI,c,!0)}],$).filter(_t=>c.selection.isEditable()).each(_t=>{$.preventDefault(),lM(c,et).isDefaultPrevented()||(_t(),a1(c,et))})},Dte=(c,g,$)=>BI([{keyCode:Br.BACKSPACE,action:js(XF,c)},{keyCode:Br.DELETE,action:js(XF,c)},...cM?[{keyCode:Br.BACKSPACE,altKey:!0,action:js(tM,c)},{keyCode:Br.DELETE,altKey:!0,action:js(tM,c)},...$?[{keyCode:tW?224:91,action:js(tM,c)}]:[]]:[{keyCode:Br.BACKSPACE,ctrlKey:!0,action:js(tM,c)},{keyCode:Br.DELETE,ctrlKey:!0,action:js(tM,c)}]],g),Nte=(c,g)=>{let $=!1;c.on("keydown",et=>{$=et.keyCode===Br.BACKSPACE,et.isDefaultPrevented()||nW(c,g,et)}),c.on("keyup",et=>{et.isDefaultPrevented()||Dte(c,et,$),$=!1})},Lte=c=>{for(;c;){if(Nr(c)||dr(c)&&c.data&&/[\r\n\s]/.test(c.data))return c;c=c.nextSibling}return null},VI=(c,g)=>{const $=c.dom,et=c.schema.getMoveCaretBeforeOnEnterElements();if(!g)return;if(/^(LI|DT|DD)$/.test(g.nodeName)){const at=Lte(g.firstChild);at&&/^(UL|OL|DL)$/.test(at.nodeName)&&g.insertBefore($.doc.createTextNode(dm),g.firstChild)}const ot=$.createRng();if(g.normalize(),g.hasChildNodes()){const at=new um(g,g);let ht=g,_t;for(;_t=at.current();){if(dr(_t)){ot.setStart(_t,0),ot.setEnd(_t,0);break}if(et[_t.nodeName.toLowerCase()]){ot.setStartBefore(_t),ot.setEndBefore(_t);break}ht=_t,_t=at.next()}_t||(ot.setStart(ht,0),ot.setEnd(ht,0))}else Jl(g)?g.nextSibling&&$.isBlock(g.nextSibling)?(ot.setStartBefore(g),ot.setEndBefore(g)):(ot.setStartAfter(g),ot.setEndAfter(g)):(ot.setStart(g,0),ot.setEnd(g,0));c.selection.setRng(ot),Z2(c,ot)},uM=(c,g)=>{const $=c.getRoot();let et,ot=g;for(;ot!==$&&ot&&c.getContentEditable(ot)!=="false";){if(c.getContentEditable(ot)==="true"){et=ot;break}ot=ot.parentNode}return ot!==$?et:$},qD=c=>Yt.from(c.dom.getParent(c.selection.getStart(!0),c.dom.isBlock)),Fte=c=>qD(c).fold(ln(""),g=>g.nodeName.toUpperCase()),zte=c=>qD(c).filter(g=>m2(Qn.fromDom(g))).isSome(),d9=c=>{c.innerHTML='<br data-mce-bogus="1">'},Bte=(c,g,$)=>{const et=c.dom;Yt.from($.style).map(et.parseStyle).each(St=>{const Ht={...M0(Qn.fromDom(g)),...St};et.setStyles(g,Ht)});const ot=Yt.from($.class).map(St=>St.split(/\s+/)),at=Yt.from(g.className).map(St=>zn(St.split(/\s+/),Lt=>Lt!==""));Bs(ot,at,(St,Lt)=>{const Ht=zn(Lt,Qt=>!mn(St,Qt)),qt=[...St,...Ht];et.setAttrib(g,"class",qt.join(" "))});const ht=["style","class"],_t=Vs($,(St,Lt)=>!mn(ht,Lt));et.setAttribs(g,_t)},dM=(c,g)=>{if(c0(c).toLowerCase()===g.tagName.toLowerCase()){const et=dw(c);Bte(c,g,et)}},f9=(c,g,$,et,ot=!0,at,ht)=>{const _t=c.dom,St=c.schema,Lt=c0(c),Ht=$?$.nodeName.toUpperCase():"";let qt=g;const Qt=St.getTextInlineElements();let gn;at||Ht==="TABLE"||Ht==="HR"?gn=_t.create(at||Lt,ht||{}):gn=$.cloneNode(!1);let kn=gn;if(!ot)_t.setAttrib(gn,"style",null),_t.setAttrib(gn,"class",null);else do if(Qt[qt.nodeName]){if(Wy(qt)||Ay(qt))continue;const yn=qt.cloneNode(!1);_t.setAttrib(yn,"id",""),gn.hasChildNodes()?(yn.appendChild(gn.firstChild),gn.appendChild(yn)):(kn=yn,gn.appendChild(yn))}while((qt=qt.parentNode)&&qt!==et);return dM(c,gn),d9(kn),gn},oW=(c,g)=>c.dom.getParent(g,YS),$te=(c,g,$)=>{let et=g;for(;et&&et!==c&&Nt(et.nextSibling);){const ot=et.parentElement;if(!ot||!$(ot))return YS(ot);et=ot}return!1},Gte=(c,g,$)=>!g&&$.nodeName.toLowerCase()===c0(c)&&c.dom.isEmpty($)&&$te(c.getBody(),$,et=>Jr(c.schema.getTextBlockElements(),et.nodeName.toLowerCase())),Wie=(c,g,$)=>{var et,ot,at;const ht=g(c0(c)),_t=oW(c,$);_t&&(c.dom.insertAfter(ht,_t),VI(c,ht),((at=(ot=(et=$.parentElement)===null||et===void 0?void 0:et.childNodes)===null||ot===void 0?void 0:ot.length)!==null&&at!==void 0?at:0)>1&&c.dom.remove($))},h9=(c,g)=>c.firstChild&&c.firstChild.nodeName===g,jte=c=>{var g;return((g=c.parentNode)===null||g===void 0?void 0:g.firstChild)===c},rW=(c,g)=>{const $=c==null?void 0:c.parentNode;return an($)&&$.nodeName===g},sW=c=>an(c)&&/^(OL|UL|LI)$/.test(c.nodeName),ZD=c=>an(c)&&/^(LI|DT|DD)$/.test(c.nodeName),Ute=c=>sW(c)&&sW(c.parentNode),fM=c=>{const g=c.parentNode;return ZD(g)?g:c},KD=(c,g,$)=>{let et=c[$?"firstChild":"lastChild"];for(;et&&!Nr(et);)et=et[$?"nextSibling":"previousSibling"];return et===g},iW=c=>Hn(wu(M0(Qn.fromDom(c)),(g,$)=>`${$}: ${g};`),(g,$)=>g+$,""),qie=(c,g,$,et,ot)=>{const at=c.dom,ht=c.selection.getRng(),_t=$.parentNode;if($===c.getBody()||!_t)return;Ute($)&&(ot="LI");const St=ZD(et)?iW(et):void 0;let Lt=ZD(et)&&St?g(ot,{style:iW(et)}):g(ot);if(KD($,et,!0)&&KD($,et,!1))if(rW($,"LI")){const Ht=fM($);at.insertAfter(Lt,Ht),jte($)?at.remove(Ht):at.remove($)}else at.replace(Lt,$);else if(KD($,et,!0))rW($,"LI")?(at.insertAfter(Lt,fM($)),Lt.appendChild(at.doc.createTextNode(" ")),Lt.appendChild($)):_t.insertBefore(Lt,$),at.remove(et);else if(KD($,et,!1))at.insertAfter(Lt,fM($)),at.remove(et);else{$=fM($);const Ht=ht.cloneRange();Ht.setStartAfter(et),Ht.setEndAfter($);const qt=Ht.extractContents();if(ot==="LI"&&h9(qt,"LI")){const Qt=zn(Dn(Lt.children,Qn.fromDom),Wn(am("br")));Lt=qt.firstChild,at.insertAfter(qt,$),rn(Qt,gn=>E1(Qn.fromDom(Lt),gn)),St&&Lt.setAttribute("style",St)}else at.insertAfter(qt,$),at.insertAfter(Lt,$);at.remove(et)}VI(c,Lt)},ny=c=>{rn(qw(Qn.fromDom(c),gu),g=>{const $=g.dom;$.nodeValue=fv($.data)})},Hte=(c,g)=>{const $=c.dom.getParent(g,"ol,ul,dl");return $!==null&&c.dom.getContentEditableParent($)==="false"},Vte=(c,g)=>g&&g.nodeName==="A"&&c.isEmpty(g),p9=(c,g)=>c.nodeName===g||c.previousSibling&&c.previousSibling.nodeName===g,Wte=(c,g)=>c.nodeName===g||c.nextSibling&&c.nextSibling.nodeName===g,g9=(c,g)=>an(g)&&c.isBlock(g)&&!/^(TD|TH|CAPTION|FORM)$/.test(g.nodeName)&&!/^(fixed|absolute)/i.test(g.style.position)&&c.isEditable(g.parentNode)&&c.getContentEditable(g)!=="false",qte=(c,g,$)=>{var et;const ot=[];if(!$)return;let at=$;for(;at=at.firstChild;){if(c.isBlock(at))return;Nr(at)&&!g[at.nodeName.toLowerCase()]&&ot.push(at)}let ht=ot.length;for(;ht--;)at=ot[ht],(!at.hasChildNodes()||at.firstChild===at.lastChild&&((et=at.firstChild)===null||et===void 0?void 0:et.nodeValue)===""||Vte(c,at))&&c.remove(at)},m9=(c,g,$)=>dr(g)?c?$===1&&g.data.charAt($-1)===Cm?0:$:$===g.data.length-1&&g.data.charAt($)===Cm?g.data.length:$:$,YD=c=>{const g=c.cloneRange();return g.setStart(c.startContainer,m9(!0,c.startContainer,c.startOffset)),g.setEnd(c.endContainer,m9(!1,c.endContainer,c.endOffset)),g},Zte=c=>{let g=c;do dr(g)&&(g.data=g.data.replace(/^[\r\n]+/,"")),g=g.firstChild;while(g)},Kte=(c,g,$,et,ot)=>{var at,ht;const _t=c.dom,St=(at=uM(_t,et))!==null&&at!==void 0?at:_t.getRoot();let Lt=_t.getParent(et,_t.isBlock);if(!Lt||!g9(_t,Lt)){if(Lt=Lt||St,!Lt.hasChildNodes()){const gn=_t.create(g);return dM(c,gn),Lt.appendChild(gn),$.setStart(gn,0),$.setEnd(gn,0),gn}let Ht=et;for(;Ht&&Ht.parentNode!==Lt;)Ht=Ht.parentNode;let qt;for(;Ht&&!_t.isBlock(Ht);)qt=Ht,Ht=Ht.previousSibling;const Qt=(ht=qt==null?void 0:qt.parentElement)===null||ht===void 0?void 0:ht.nodeName;if(qt&&Qt&&c.schema.isValidChild(Qt,g.toLowerCase())){const gn=qt.parentNode,kn=_t.create(g);for(dM(c,kn),gn.insertBefore(kn,qt),Ht=qt;Ht&&!_t.isBlock(Ht);){const yn=Ht.nextSibling;kn.appendChild(Ht),Ht=yn}$.setStart(et,ot),$.setEnd(et,ot)}}return et},y9=(c,g)=>{g.normalize();const $=g.lastChild;(!$||Nr($)&&/^(left|right)$/gi.test(c.getStyle($,"float",!0)))&&c.add(g,"br")},b9=(c,g)=>{const $=mm(c);return Pn(g)?!1:Et($)?mn(cr.explode($),g.nodeName.toLowerCase()):$},Yte={insert:(c,g)=>{let $,et,ot,at,ht=!1;const _t=c.dom,St=c.schema,Lt=St.getNonEmptyElements(),Ht=c.selection.getRng(),qt=c0(c),Qt=Qn.fromDom(Ht.startContainer),gn=h0(Qt,Ht.startOffset),kn=gn.exists(ir=>Tl(ir)&&!W0(ir)),yn=Ht.collapsed&&kn,Rn=(ir,Gr)=>f9(c,$,mr,or,gm(c),ir,Gr),so=ir=>{const Gr=m9(ir,$,et);if(dr($)&&(ir?Gr>0:Gr<$.data.length))return!1;if(($.parentNode===mr||$===mr)&&ht&&!ir||ir&&Nr($)&&$===mr.firstChild)return!0;if(p9($,"TABLE")||p9($,"HR"))return Wte($,"BR")?!ir:ht&&!ir||!ht&&ir;const gs=new um($,mr);dr($)&&(ir&&Gr===0?gs.prev():!ir&&Gr===$.data.length&&gs.next());let Cl;for(;Cl=gs.current();){if(Nr(Cl)){if(!Cl.getAttribute("data-mce-bogus")){const Sl=Cl.nodeName.toLowerCase();if(Lt[Sl]&&Sl!=="br")return!1}}else if(dr(Cl)&&!uy(Cl.data))return!1;ir?gs.prev():gs.next()}return!0},ho=()=>{let ir;return/^(H[1-6]|PRE|FIGURE)$/.test(ot)&&$r!=="HGROUP"?ir=Rn(qt):ir=Rn(),b9(c,at)&&g9(_t,at)&&_t.isEmpty(mr,void 0,{includeZwsp:!0})?ir=_t.split(at,mr):_t.insertAfter(ir,mr),VI(c,ir),ir};Tr(_t,Ht).each(ir=>{Ht.setStart(ir.startContainer,ir.startOffset),Ht.setEnd(ir.endContainer,ir.endOffset)}),$=Ht.startContainer,et=Ht.startOffset;const xo=!!(g&&g.shiftKey),To=!!(g&&g.ctrlKey);Nr($)&&$.hasChildNodes()&&!yn&&(ht=et>$.childNodes.length-1,$=$.childNodes[Math.min(et,$.childNodes.length-1)]||$,ht&&dr($)?et=$.data.length:et=0);const or=uM(_t,$);if(!or||Hte(c,$))return;xo||($=Kte(c,qt,Ht,$,et));let mr=_t.getParent($,_t.isBlock)||_t.getRoot();at=an(mr==null?void 0:mr.parentNode)?_t.getParent(mr.parentNode,_t.isBlock):null,ot=mr?mr.nodeName.toUpperCase():"";const $r=at?at.nodeName.toUpperCase():"";if($r==="LI"&&!To){const ir=at;mr=ir,at=ir.parentNode,ot=$r}if(Nr(at)&&Gte(c,xo,mr))return Wie(c,Rn,mr);if(/^(LI|DT|DD)$/.test(ot)&&Nr(at)&&_t.isEmpty(mr)){qie(c,Rn,at,mr,qt);return}if(!yn&&(mr===c.getBody()||!g9(_t,mr)))return;const Zo=mr.parentNode;let Lo;if(yn)Lo=Rn(qt),gn.fold(()=>{Up(Qt,Qn.fromDom(Lo))},ir=>{Su(ir,Qn.fromDom(Lo))}),c.selection.setCursorLocation(Lo,0);else if(iw(mr))Lo=zC(mr),_t.isEmpty(mr)&&d9(mr),dM(c,Lo),VI(c,Lo);else if(so(!1))Lo=ho();else if(so(!0)&&Zo){const ir=Uo.fromRangeStart(Ht),Gr=Z8(ir),gs=Qn.fromDom(mr),Sl=QP(gs,ir,c.schema)?Ds(gs,ir,c.schema).bind(Cu=>Yt.from(Cu.getNode())):Yt.none();Lo=Zo.insertBefore(Rn(),mr);const au=p9(mr,"HR")||Gr?Lo:Sl.getOr(mr);VI(c,au)}else{const ir=YD(Ht).cloneRange();ir.setEndAfter(mr);const Gr=ir.extractContents();ny(Gr),Zte(Gr),Lo=Gr.firstChild,_t.insertAfter(Gr,mr),qte(_t,Lt,Lo),y9(_t,mr),_t.isEmpty(mr)&&d9(mr),Lo.normalize(),_t.isEmpty(Lo)?(_t.remove(Lo),ho()):(dM(c,Lo),VI(c,Lo))}_t.setAttrib(Lo,"id",""),c.dispatch("NewBlock",{newBlock:Lo})},fakeEventName:"insertParagraph"},Kie=(c,g,$)=>{const et=new um(g,$);let ot;const at=c.getNonEmptyElements();for(;ot=et.next();)if(at[ot.nodeName.toLowerCase()]||dr(ot)&&ot.length>0)return!0;return!1},aW=(c,g,$)=>{const et=c.dom.createRng();$?(et.setStartBefore(g),et.setEndBefore(g)):(et.setStartAfter(g),et.setEndAfter(g)),c.selection.setRng(et),Z2(c,et)},Xte=(c,g)=>{const $=c.selection,et=c.dom,ot=$.getRng();let at,ht=!1;Tr(et,ot).each(gn=>{ot.setStart(gn.startContainer,gn.startOffset),ot.setEnd(gn.endContainer,gn.endOffset)});let _t=ot.startOffset,St=ot.startContainer;if(Nr(St)&&St.hasChildNodes()){const gn=_t>St.childNodes.length-1;St=St.childNodes[Math.min(_t,St.childNodes.length-1)]||St,gn&&dr(St)?_t=St.data.length:_t=0}let Lt=et.getParent(St,et.isBlock);const Ht=Lt&&Lt.parentNode?et.getParent(Lt.parentNode,et.isBlock):null,qt=Ht?Ht.nodeName.toUpperCase():"",Qt=!!(g&&g.ctrlKey);qt==="LI"&&!Qt&&(Lt=Ht),dr(St)&&_t>=St.data.length&&(Kie(c.schema,St,Lt||et.getRoot())||(at=et.create("br"),ot.insertNode(at),ot.setStartAfter(at),ot.setEndAfter(at),ht=!0)),at=et.create("br"),pE(et,ot,at),aW(c,at,ht),c.undoManager.add()},Yie=(c,g)=>{const $=Qn.fromTag("br");Su(Qn.fromDom(g),$),c.undoManager.add()},Jte=(c,g)=>{Qte(c.getBody(),g)||ly(Qn.fromDom(g),Qn.fromTag("br"));const $=Qn.fromTag("br");ly(Qn.fromDom(g),$),aW(c,$.dom,!1),c.undoManager.add()},Px=c=>Jl(c.getNode()),Qte=(c,g)=>Px(Uo.after(g))?!0:L0(c,Uo.after(g)).map($=>Jl($.getNode())).getOr(!1),v9=c=>c&&c.nodeName==="A"&&"href"in c,ene=c=>c.fold(On,v9,v9,On),tne=c=>{const g=An(YE,c),$=Uo.fromRangeStart(c.selection.getRng());return Ow(g,c.getBody(),$).filter(ene)},nne=(c,g)=>{g.fold(fn,An(Yie,c),An(Jte,c),fn)},lW={insert:(c,g)=>{const $=tne(c);$.isSome()?$.each(An(nne,c)):Xte(c,g)},fakeEventName:"insertLineBreak"},cW=(c,g)=>qD(c).filter($=>g.length>0&&R0(Qn.fromDom($),g)).isSome(),_9=c=>cW(c,S2(c)),uW=c=>cW(c,RL(c)),Py=gv.generate([{br:[]},{block:[]},{none:[]}]),one=(c,g)=>uW(c),dW=c=>(g,$)=>zte(g)===c,fW=(c,g)=>($,et)=>Fte($)===c.toUpperCase()===g,rne=c=>{const g=uM(c.dom,c.selection.getStart());return Pn(g)},hM=c=>fW("pre",c),hW=()=>fW("summary",!0),XD=c=>(g,$)=>R4(g)===c,pW=(c,g)=>_9(c),pM=(c,g)=>g,sne=c=>{const g=c0(c),$=uM(c.dom,c.selection.getStart());return an($)&&c.schema.isValidChild($.nodeName,g)},ine=c=>{const g=c.selection.getRng(),$=Qn.fromDom(g.startContainer),ot=h0($,g.startOffset).map(at=>Tl(at)&&!W0(at));return g.collapsed&&ot.getOr(!0)},Av=(c,g)=>($,et)=>Hn(c,(at,ht)=>at&&ht($,et),!0)?Yt.some(g):Yt.none(),ane=(c,g)=>o7([Av([one],Py.none()),Av([hM(!0),rne],Py.none()),Av([hW()],Py.br()),Av([hM(!0),XD(!1),pM],Py.br()),Av([hM(!0),XD(!1)],Py.block()),Av([hM(!0),XD(!0),pM],Py.block()),Av([hM(!0),XD(!0)],Py.br()),Av([dW(!0),pM],Py.br()),Av([dW(!0)],Py.block()),Av([pW],Py.br()),Av([pM],Py.br()),Av([sne],Py.block()),Av([ine],Py.block())],[c,!!(g&&g.shiftKey)]).getOr(Py.none()),JD=(c,g,$)=>{g.mode.isReadOnly()||(g.selection.isCollapsed()||KK(g),!(an($)&&lM(g,c.fakeEventName).isDefaultPrevented())&&(c.insert(g,$),an($)&&a1(g,c.fakeEventName)))},gM=(c,g)=>{if(c.mode.isReadOnly())return;const $=()=>JD(lW,c,g),et=()=>JD(Yte,c,g),ot=ane(c,g);switch(e5(c)){case"linebreak":ot.fold($,$,fn);break;case"block":ot.fold(et,et,fn);break;case"invert":ot.fold(et,$,fn);break;default:ot.fold($,et,fn);break}},gW=un(),x9=gW.os.isiOS()&&gW.browser.isSafari(),QD=(c,g)=>{g.isDefaultPrevented()||(g.preventDefault(),rU(c.undoManager),c.undoManager.transact(()=>{gM(c,g)}))},mW=c=>{if(!c.collapsed)return!1;const g=c.startContainer;if(dr(g)){const $=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,et=g.data.charAt(c.startOffset-1);return $.test(et)}else return!1},lne=c=>{let g=Yt.none();const $=ot=>{g=Yt.some(ot.selection.getBookmark()),ot.undoManager.add()},et=(ot,at)=>{ot.undoManager.undo(),g.fold(fn,ht=>ot.selection.moveToBookmark(ht)),QD(ot,at),g=Yt.none()};c.on("keydown",ot=>{ot.keyCode===Br.ENTER&&(x9&&mW(c.selection.getRng())?$(c):QD(c,ot))}),c.on("keyup",ot=>{ot.keyCode===Br.ENTER&&g.each(()=>et(c,ot))})},Qie=(c,g,$)=>{const et=Kr.os.isMacOS()||Kr.os.isiOS();BI([{keyCode:Br.END,action:js(eV,c,!0)},{keyCode:Br.HOME,action:js(eV,c,!1)},...et?[]:[{keyCode:Br.HOME,action:js(TD,c,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Br.END,action:js(TD,c,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Br.END,action:js(hee,c,!0)},{keyCode:Br.HOME,action:js(hee,c,!1)},{keyCode:Br.END,action:js(JR,c,!0,g)},{keyCode:Br.HOME,action:js(JR,c,!1,g)}],$).each(ot=>{$.preventDefault()})},OS=(c,g)=>{c.on("keydown",$=>{$.isDefaultPrevented()||Qie(c,g,$)})},cne=c=>{c.on("input",g=>{g.isComposing||a$(c)})},une=un(),dne=(c,g,$)=>{BI([{keyCode:Br.PAGE_UP,action:js(JR,c,!1,g)},{keyCode:Br.PAGE_DOWN,action:js(JR,c,!0,g)}],$)},mM=c=>c.stopImmediatePropagation(),w9=c=>c.keyCode===Br.PAGE_UP||c.keyCode===Br.PAGE_DOWN,C9=(c,g,$)=>{$&&!c.get()?g.on("NodeChange",mM,!0):!$&&c.get()&&g.off("NodeChange",mM),c.set($)},fne=(c,g)=>{if(une.os.isMacOS())return;const $=Eu(!1);c.on("keydown",et=>{w9(et)&&C9($,c,!0)}),c.on("keyup",et=>{et.isDefaultPrevented()||dne(c,g,et),w9(et)&&$.get()&&(C9($,c,!1),c.nodeChanged())})},yW=c=>{c.on("beforeinput",g=>{(!c.selection.isEditable()||wn(g.getTargetRanges(),$=>!G8(c.dom,$)))&&g.preventDefault()})},bW=(c,g)=>{const $=g.container(),et=g.offset();return dr($)?($.insertData(et,c),Yt.some(Uo($,et+c.length))):RE(g).map(ot=>{const at=Qn.fromText(c);return g.isAtEnd()?ly(ot,at):Su(ot,at),Uo(at.dom,c.length)})},vW=An(bW,dm),_W=An(bW," "),k9=(c,g,$)=>n$(c,g,$)?vW(g):_W(g),S9=c=>g=>g.fold($=>Ey(c.dom,Uo.before($)),$=>F0($),$=>Vy($),$=>L0(c.dom,Uo.after($))),hne=(c,g,$)=>et=>n$(c,et,$)?vW(g):_W(g),eN=c=>g=>{c.selection.setRng(g.toRange()),c.nodeChanged()},xW=(c,g)=>c.isEditable(c.getParent(g,"summary")),tN=c=>{const g=Uo.fromRangeStart(c.selection.getRng()),$=Qn.fromDom(c.getBody());if(c.selection.isCollapsed()){const et=An(YE,c),ot=Uo.fromRangeStart(c.selection.getRng());return Ow(et,c.getBody(),ot).bind(S9($)).map(at=>()=>hne($,g,c.schema)(at).each(eN(c)))}else return Yt.none()},wW=c=>{const g=()=>{const $=Qn.fromDom(c.getBody());c.selection.isCollapsed()||c.getDoc().execCommand("Delete");const et=Uo.fromRangeStart(c.selection.getRng());k9($,et,c.schema).each(eN(c))};return f0(Kr.browser.isFirefox()&&c.selection.isEditable()&&xW(c.dom,c.selection.getRng().startContainer),g)},CW=(c,g)=>{D7([{keyCode:Br.SPACEBAR,action:js(tN,c)},{keyCode:Br.SPACEBAR,action:js(wW,c)}],g).each($=>{g.preventDefault(),lM(c,"insertText",{data:" "}).isDefaultPrevented()||($(),a1(c,"insertText",{data:" "}))})},pne=c=>{c.on("keydown",g=>{g.isDefaultPrevented()||CW(c,g)})},gne=c=>UL(c)?[{keyCode:Br.TAB,action:js(yV,c,!0)},{keyCode:Br.TAB,shiftKey:!0,action:js(yV,c,!1)}]:[],nN=(c,g)=>{BI([...gne(c)],g).each($=>{g.preventDefault()})},kW=c=>{c.on("keydown",g=>{g.isDefaultPrevented()||nN(c,g)})},mne=c=>{if(c.addShortcut("Meta+P","","mcePrint"),kte(c),Iw(c))return Eu(null);{const g=RQ(c);return yW(c),i1(c),bV(c,g),Nte(c,g),lne(c),pne(c),cne(c),kW(c),OS(c,g),fne(c,g),g}};class yne{constructor(g){this.lastPath=[],this.editor=g;let $;const et=this;"onselectionchange"in g.getDoc()||g.on("NodeChange click mouseup keyup focus",ot=>{const at=g.selection.getRng(),ht={startContainer:at.startContainer,startOffset:at.startOffset,endContainer:at.endContainer,endOffset:at.endOffset};(ot.type==="nodechange"||!Ct(ht,$))&&g.dispatch("SelectionChange"),$=ht}),g.on("contextmenu",()=>{Y5(g),g.dispatch("SelectionChange")}),g.on("SelectionChange",()=>{const ot=g.selection.getStart(!0);ot&&UT(g)&&!et.isSameElementPath(ot)&&g.dom.isChildOf(ot,g.getBody())&&g.nodeChanged({selectionChange:!0})}),g.on("mouseup",ot=>{!ot.isDefaultPrevented()&&UT(g)&&(g.selection.getNode().nodeName==="IMG"?Jv.setEditorTimeout(g,()=>{g.nodeChanged()}):g.nodeChanged())})}nodeChanged(g={}){const $=this.editor,et=$.selection;let ot;if($.initialized&&et&&!NL($)){const at=$.getBody();ot=et.getStart(!0)||at,(ot.ownerDocument!==$.getDoc()||!$.dom.isChildOf(ot,at))&&(ot=at);const ht=[];$.dom.getParent(ot,_t=>_t===at?!0:(ht.push(_t),!1)),$.dispatch("NodeChange",{...g,element:ot,parents:ht})}}isSameElementPath(g){let $;const et=this.editor,ot=Oo(et.dom.getParents(g,_o,et.getBody()));if(ot.length===this.lastPath.length){for($=ot.length;$>=0&&ot[$]===this.lastPath[$];$--);if($===-1)return this.lastPath=ot,!0}return this.lastPath=ot,!1}}const E9=DC("image"),bne=c=>{const g=c;return Yt.from(g[E9])},vne=(c,g)=>{const $=c;$[E9]=g},A9=DC("event"),_ne=c=>{const g=c;return Yt.from(g[A9])},oN=c=>g=>{const $=g;$[A9]=c},SW=(c,g)=>oN(g)(c),EW=oN(0),AW=oN(2),xne=oN(1),wne=(c=>g=>{const $=g;return Yt.from($[A9]).exists(et=>et===c)})(0),Cne=()=>Object.freeze({length:0,item:c=>null}),T9=DC("mode"),WI=c=>{const g=c;return Yt.from(g[T9])},rN=c=>g=>{const $=g;$[T9]=c},TW=(c,g)=>rN(g)(c),I9=rN(0),R9=rN(2),kne=rN(1),IW=c=>g=>{const $=g;return Yt.from($[T9]).exists(et=>et===c)},AA=IW(0),RW=IW(1),Sne=(c,g)=>({...g,get length(){return g.length},add:($,et)=>{if(AA(c))if(Et($)){if(!dn(et))return g.add($,et)}else return g.add($);return null},remove:$=>{AA(c)&&g.remove($)},clear:()=>{AA(c)&&g.clear()}}),tae=["none","copy","link","move"],sN=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],M9=()=>{const c=new window.DataTransfer;let g="move",$="all";const et={get dropEffect(){return g},set dropEffect(ot){mn(tae,ot)&&(g=ot)},get effectAllowed(){return $},set effectAllowed(ot){wne(et)&&mn(sN,ot)&&($=ot)},get items(){return Sne(et,c.items)},get files(){return RW(et)?Cne():c.files},get types(){return c.types},setDragImage:(ot,at,ht)=>{AA(et)&&(vne(et,{image:ot,x:at,y:ht}),c.setDragImage(ot,at,ht))},getData:ot=>RW(et)?"":c.getData(ot),setData:(ot,at)=>{AA(et)&&c.setData(ot,at)},clearData:ot=>{AA(et)&&c.clearData(ot)}};return I9(et),et},Ene=c=>{const g=M9(),$=WI(c);return R9(c),EW(g),g.dropEffect=c.dropEffect,g.effectAllowed=c.effectAllowed,bne(c).each(et=>g.setDragImage(et.image,et.x,et.y)),rn(c.types,et=>{et!=="Files"&&g.setData(et,c.getData(et))}),rn(c.files,et=>g.items.add(et)),_ne(c).each(et=>{SW(g,et)}),$.each(et=>{TW(c,et),TW(g,et)}),g},Ane=c=>{const g=c.getData("text/html");return g===""?Yt.none():Yt.some(g)},MW=(c,g)=>c.setData("text/html",g),PW="x-tinymce/html",iN=ln(PW),P9="<!-- "+PW+" -->",Tne=c=>P9+c,Ine=c=>c.replace(P9,""),OW=c=>c.indexOf(P9)!==-1,Rne=c=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(c),Mne=(c,g)=>{let $="<"+c;const et=wu(g,(ot,at)=>at+'="'+Xx.encodeAllRaw(ot)+'"');return et.length&&($+=" "+et.join(" ")),$+">"},Pne=(c,g,$)=>{const et=c.split(/\n\n/),ot=Mne(g,$),at="</"+g+">",ht=Dn(et,St=>St.split(/\n/).join("<br />")),_t=St=>ot+St+at;return ht.length===1?ht[0]:Dn(ht,_t).join("")},Gu="%MCEPASTEBIN%",One=(c,g)=>{const{dom:$,selection:et}=c,ot=c.getBody();g.set(et.getRng());const at=$.add(c.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Gu);Kr.browser.isFirefox()&&$.setStyle(at,"left",$.getStyle(ot,"direction",!0)==="rtl"?65535:-65535),$.bind(at,"beforedeactivate focusin focusout",ht=>{ht.stopPropagation()}),at.focus(),et.select(at,!0)},DW=(c,g)=>{const $=c.dom;if(O9(c)){let et;const ot=g.get();for(;et=O9(c);)$.remove(et),$.unbind(et);ot&&c.selection.setRng(ot)}g.set(null)},O9=c=>c.dom.get("mcepastebin"),D9=c=>an(c)&&c.id==="mcepastebin",NW=c=>{const g=c.dom,$=(ht,_t)=>{ht.appendChild(_t),g.remove(_t,!0)},[et,...ot]=zn(c.getBody().childNodes,D9);rn(ot,ht=>{$(et,ht)});const at=g.select("div[id=mcepastebin]",et);for(let ht=at.length-1;ht>=0;ht--){const _t=g.create("div");et.insertBefore(_t,at[ht]),$(_t,at[ht])}return et?et.innerHTML:""},LW=c=>c===Gu,Dne=c=>{const g=Eu(null);return{create:()=>One(c,g),remove:()=>DW(c,g),getEl:()=>O9(c),getHtml:()=>NW(c),getLastRng:g.get}},N9=(c,g)=>(cr.each(g,$=>{Mt($,RegExp)?c=c.replace($,""):c=c.replace($[0],$[1])}),c),L9=c=>{const g=yu(),$=uA({},g);let et="";const ot=g.getVoidElements(),at=cr.makeMap("script noscript style textarea video audio iframe object"," "),ht=g.getBlockElements(),_t=St=>{const Lt=St.name,Ht=St;if(Lt==="br"){et+=`
`;return}if(Lt!=="wbr"){if(ot[Lt]&&(et+=" "),at[Lt]){et+=" ";return}if(St.type===3&&(et+=St.value),!(St.name in g.getVoidElements())){let qt=St.firstChild;if(qt)do _t(qt);while(qt=qt.next)}ht[Lt]&&Ht.next&&(et+=`
`,Lt==="p"&&(et+=`
`))}};return c=N9(c,[/<!\[[^\]]+\]>/g]),_t($.parse(c)),et},FW=c=>(c=N9(c,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,($,et,ot)=>!et&&!ot?" ":dm],/<br class="Apple-interchange-newline">/g,/<br>$/i]),c),Nne=c=>{let g=0;return()=>c+g++},Lne=c=>{const g=c.toLowerCase(),$={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return cr.hasOwn($,g)?"image/"+$[g]:"image/"+g},zW=(c,g)=>{const $=uA({sanitize:K4(c),sandbox_iframes:EE(c),sandbox_iframes_exclusions:p5(c),convert_unsafe_embeds:VL(c)},c.schema);$.addNodeFilter("meta",ot=>{cr.each(ot,at=>{at.remove()})});const et=$.parse(g,{forced_root_block:!1,isRootContent:!0});return uS({validate:!0},c.schema).serialize(et)},BW=(c,g)=>({content:c,cancelled:g}),Fne=(c,g,$)=>{const et=c.dom.create("div",{style:"display:none"},g),ot=NP(c,et,$);return BW(ot.node.innerHTML,ot.isDefaultPrevented())},qI=(c,g,$)=>{const et=b8(c,g,$),ot=zW(c,et.content);return c.hasEventListeners("PastePostProcess")&&!et.isDefaultPrevented()?Fne(c,ot,$):BW(ot,et.isDefaultPrevented())},zne=(c,g,$)=>qI(c,g,$),DS=(c,g)=>(c.insertContent(g,{merge:W4(c),paste:!0}),!0),TA=c=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(c),Bne=(c,g)=>TA(g)&&wn(X4(c),$=>Nl(g.toLowerCase(),`.${$.toLowerCase()}`)),$ne=(c,g,$)=>(c.undoManager.extra(()=>{$(c,g)},()=>{c.insertContent('<img src="'+g+'">')}),!0),ZI=(c,g,$)=>(c.undoManager.extra(()=>{$(c,g)},()=>{c.execCommand("mceInsertLink",!1,g)}),!0),Gne=(c,g,$)=>!c.selection.isCollapsed()&&TA(g)?ZI(c,g,$):!1,F9=(c,g,$)=>Bne(c,g)?$ne(c,g,$):!1,jne=(c,g)=>{cr.each([Gne,F9,DS],$=>!$(c,g,DS))},$W=(c,g,$)=>{$||!f5(c)?DS(c,g):jne(c,g)},GW=Nne("mceclip"),z9=c=>{const g=M9();return MW(g,c),R9(g),g},B9=(c,g,$,et,ot)=>{const at=zne(c,g,$);if(!at.cancelled){const ht=at.content,_t=()=>$W(c,ht,et);ot?lM(c,"insertFromPaste",{dataTransfer:z9(ht)}).isDefaultPrevented()||(_t(),a1(c,"insertFromPaste")):_t()}},aN=(c,g,$,et)=>{const ot=$||OW(g);B9(c,Ine(g),ot,!1,et)},$9=(c,g,$)=>{const et=c.dom.encode(g).replace(/\r\n/g,`
`),ot=zy(et,hw(c)),at=Pne(ot,c0(c),dw(c));B9(c,at,!1,!0,$)},G9=c=>{const g={};if(c&&c.types)for(let $=0;$<c.types.length;$++){const et=c.types[$];try{g[et]=c.getData(et)}catch{g[et]=""}}return g},NS=(c,g)=>g in c&&c[g].length>0,j9=c=>NS(c,"text/html")||NS(c,"text/plain"),U9=(c,g)=>{const $=g.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return an($)?c.dom.encode($[1]):void 0},jW=(c,g,$,et)=>{const ot=GW(),at=ym(c)&&an($.name),ht=at?U9(c,$.name):ot,_t=at?$.name:void 0,St=g.create(ot,$,et,ht,_t);return g.add(St),St},Une=(c,g)=>{rA(g.uri).each(({data:$,type:et,base64Encoded:ot})=>{const at=ot?$:btoa($),ht=g.file,_t=c.editorUpload.blobCache,St=_t.getByData(at,et),Lt=St??jW(c,_t,ht,at);aN(c,`<img src="${Lt.blobUri()}">`,!1,!0)})},Hne=c=>c.type==="paste",Vne=c=>Promise.all(Dn(c,g=>kG(g).then($=>({file:g,uri:$})))),UW=c=>{const g=X4(c);return $=>ks($.type,"image/")&&wn(g,et=>Lne(et)===$.type)},H9=(c,g)=>{const $=g.items?oo(Ss(g.items),ot=>ot.kind==="file"?[ot.getAsFile()]:[]):[],et=g.files?Ss(g.files):[];return zn($.length>0?$:et,UW(c))},HW=(c,g,$)=>{const et=Hne(g)?g.clipboardData:g.dataTransfer;if(SE(c)&&et){const ot=H9(c,et);if(ot.length>0)return g.preventDefault(),Vne(ot).then(at=>{$&&c.selection.setRng($),rn(at,ht=>{Une(c,ht)})}),!0}return!1},VW=c=>{var g,$;return Kr.os.isAndroid()&&(($=(g=c.clipboardData)===null||g===void 0?void 0:g.items)===null||$===void 0?void 0:$.length)===0},WW=c=>Br.metaKeyPressed(c)&&c.keyCode===86||c.shiftKey&&c.keyCode===45,V9=(c,g,$,et,ot)=>{let at=FW($);const ht=NS(g,iN())||OW($),_t=!ht&&Rne(at),St=TA(at);(LW(at)||!at.length||_t&&!St)&&(et=!0),(et||St)&&(NS(g,"text/plain")&&_t?at=g["text/plain"]:at=L9(at)),!LW(at)&&(et?$9(c,at,ot):aN(c,at,ht,ot))},qW=(c,g,$)=>{let et;const ot=()=>g.getLastRng()||c.selection.getRng();c.on("keydown",at=>{WW(at)&&!at.isDefaultPrevented()&&(et=at.shiftKey&&at.keyCode===86)}),c.on("paste",at=>{if(at.isDefaultPrevented()||VW(at))return;const ht=$.get()==="text"||et;et=!1;const _t=G9(at.clipboardData);!j9(_t)&&HW(c,at,ot())||(NS(_t,"text/html")?(at.preventDefault(),V9(c,_t,_t["text/html"],ht,!0)):NS(_t,"text/plain")&&NS(_t,"text/uri-list")?(at.preventDefault(),V9(c,_t,_t["text/plain"],ht,!0)):(g.create(),Jv.setEditorTimeout(c,()=>{const St=g.getHtml();g.remove(),V9(c,_t,St,ht,!1)},0)))})},Wne=c=>{const g=ot=>ks(ot,"webkit-fake-url"),$=ot=>ks(ot,"data:"),et=ot=>{var at;return((at=ot.data)===null||at===void 0?void 0:at.paste)===!0};c.parser.addNodeFilter("img",(ot,at,ht)=>{if(!SE(c)&&et(ht))for(const _t of ot){const St=_t.attr("src");Et(St)&&!_t.attr("data-mce-object")&&St!==Kr.transparentSrc&&(g(St)||!Z4(c)&&$(St))&&_t.remove()}})},qne=(c,g,$)=>{qW(c,g,$),Wne(c)},Zne=(c,g)=>{g.get()==="text"?(g.set("html"),nI(c,!1)):(g.set("text"),nI(c,!0)),c.focus()},Kne=(c,g)=>{c.addCommand("mceTogglePlainTextPaste",()=>{Zne(c,g)}),c.addCommand("mceInsertClipboardContent",($,et)=>{et.html&&aN(c,et.html,et.internal,!1),et.text&&$9(c,et.text,!1)})},Yne=(c,g,$)=>{if(c)try{return c.clearData(),c.setData("text/html",g),c.setData("text/plain",$),c.setData(iN(),g),!0}catch{return!1}else return!1},yM=(c,g,$,et)=>{Yne(c.clipboardData,g.html,g.text)?(c.preventDefault(),et()):$(g.html,et)},ZW=c=>(g,$)=>{const{dom:et,selection:ot}=c,at=et.create("div",{contenteditable:"false","data-mce-bogus":"all"}),ht=et.create("div",{contenteditable:"true"},g);et.setStyles(at,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),at.appendChild(ht),et.add(c.getBody(),at);const _t=ot.getRng();ht.focus();const St=et.createRng();St.selectNodeContents(ht),ot.setRng(St),Jv.setEditorTimeout(c,()=>{ot.setRng(_t),et.remove(at),$()},0)},W9=c=>({html:Tne(c.selection.getContent({contextual:!0})),text:c.selection.getContent({format:"text"})}),Xne=c=>!!c.dom.getParent(c.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",c.getBody()),KW=c=>!c.selection.isCollapsed()||Xne(c),YW=c=>g=>{!g.isDefaultPrevented()&&KW(c)&&c.selection.isEditable()&&yM(g,W9(c),ZW(c),()=>{if(Kr.browser.isChromium()||Kr.browser.isFirefox()){const $=c.selection.getRng();Jv.setEditorTimeout(c,()=>{c.selection.setRng($),c.execCommand("Delete")},0)}else c.execCommand("Delete")})},XW=c=>g=>{!g.isDefaultPrevented()&&KW(c)&&yM(g,W9(c),ZW(c),fn)},Jne=c=>{c.on("cut",YW(c)),c.on("copy",XW(c))},JW=(c,g)=>{var $,et;return ar.getCaretRangeFromPoint(($=g.clientX)!==null&&$!==void 0?$:0,(et=g.clientY)!==null&&et!==void 0?et:0,c.getDoc())},Qne=c=>{const g=c["text/plain"];return g?g.indexOf("file://")===0:!1},QW=(c,g)=>{c.focus(),g&&c.selection.setRng(g)},eoe=c=>wn(c.files,g=>/^image\//.test(g.type)),tq=(c,g,$,et)=>{const ot=c.getParent($,ht=>I1(g,ht));if(!Nt(c.getParent($,"summary")))return!0;if(ot&&Jr(et,"text/html")){const ht=new DOMParser().parseFromString(et["text/html"],"text/html").body;return!Nt(ht.querySelector(ot.nodeName.toLowerCase()))}else return!1},toe=c=>{c.on("input",g=>{const $=et=>Nt(et.querySelector("summary"));if(g.inputType==="deleteByDrag"){const et=zn(c.dom.select("details"),$);rn(et,ot=>{Jl(ot.firstChild)&&ot.firstChild.remove();const at=c.dom.create("summary");at.appendChild(z1().dom),ot.prepend(at)})}})},noe=(c,g)=>{u5(c)&&c.on("dragend dragover draggesture dragdrop drop drag",$=>{$.preventDefault(),$.stopPropagation()}),SE(c)||c.on("drop",$=>{const et=$.dataTransfer;et&&eoe(et)&&$.preventDefault()}),c.on("drop",$=>{if($.isDefaultPrevented())return;const et=JW(c,$);if(Pn(et))return;const ot=G9($.dataTransfer),at=NS(ot,iN());if((!j9(ot)||Qne(ot))&&HW(c,$,et))return;const ht=ot[iN()],_t=ht||ot["text/html"]||ot["text/plain"],St=tq(c.dom,c.schema,et.startContainer,ot),Lt=g.get();Lt&&!St||_t&&($.preventDefault(),Jv.setEditorTimeout(c,()=>{c.undoManager.transact(()=>{(ht||Lt&&St)&&c.execCommand("Delete"),QW(c,et);const Ht=FW(_t);ot["text/html"]?aN(c,Ht,at,!0):$9(c,Ht,!0)})}))}),c.on("dragstart",$=>{g.set(!0)}),c.on("dragover dragend",$=>{SE(c)&&!g.get()&&($.preventDefault(),QW(c,JW(c,$))),$.type==="dragend"&&g.set(!1)}),toe(c)},ooe=c=>{const g=ot=>at=>{ot(c,at)},$=d5(c);Vt($)&&c.on("PastePreProcess",g($));const et=U4(c);Vt(et)&&c.on("PastePostProcess",g(et))},roe=(c,g)=>{c.on("PastePreProcess",$=>{$.content=g(c,$.content,$.internal)})},soe=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,nq=c=>cr.trim(c).replace(soe,nE).toLowerCase(),ioe=(c,g,$)=>{const et=V4(c);if($||et==="all"||!$L(c))return g;const ot=et?et.split(/[, ]/):[];if(ot&&et!=="none"){const at=c.dom,ht=c.selection.getNode();g=g.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(_t,St,Lt,Ht)=>{const qt=at.parseStyle(at.decode(Lt)),Qt={};for(let kn=0;kn<ot.length;kn++){const yn=qt[ot[kn]];let Rn=yn,so=at.getStyle(ht,ot[kn],!0);/color/.test(ot[kn])&&(Rn=nq(Rn),so=nq(so)),so!==Rn&&(Qt[ot[kn]]=yn)}const gn=at.serializeStyle(Qt,"span");return gn?St+' style="'+gn+'"'+Ht:St+Ht})}else g=g.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return g=g.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(at,ht,_t,St)=>ht+' style="'+_t+'"'+St),g},aoe=c=>{(Kr.browser.isChromium()||Kr.browser.isSafari())&&roe(c,ioe)},oq=c=>{const g=Eu(!1),$=Eu(q4(c)?"text":"html"),et=Dne(c);aoe(c),Kne(c,$),ooe(c),c.addQueryStateHandler("mceTogglePlainTextPaste",()=>$.get()==="text"),c.on("PreInit",()=>{Jne(c),noe(c,g),qne(c,et,$)})},rq=c=>{c.on("click",g=>{c.dom.getParent(g.target,"details")&&g.preventDefault()})},loe=c=>{c.parser.addNodeFilter("details",g=>{const $=HL(c);rn(g,et=>{$==="expanded"?et.attr("open","open"):$==="collapsed"&&et.attr("open",null)})}),c.serializer.addNodeFilter("details",g=>{const $=J4(c);rn(g,et=>{$==="expanded"?et.attr("open","open"):$==="collapsed"&&et.attr("open",null)})})},coe=c=>{rq(c),loe(c)},uoe=Jl,sq=dr,doe=c=>Ql(c.dom),foe=c=>Jo(c.dom),iq=c=>g=>_i(Qn.fromDom(c),g),lN=(c,g,$)=>_d(Qn.fromDom(c),et=>foe(et)||$.isBlock(Sn(et)),iq(g)).getOr(Qn.fromDom(g)).dom,q9=(c,g)=>_d(Qn.fromDom(c),doe,iq(g)),aq=(c,g,$)=>{const et=new um(c,g),ot=$?et.next.bind(et):et.prev.bind(et);let at=c;for(let ht=$?c:ot();ht&&!uoe(ht);ht=ot())Kv(ht)&&(at=ht);return at},lq=(c,g,$)=>{const ot=Uo.fromRangeStart(c).getNode(),at=lN(ot,g,$),ht=aq(ot,at,!1),_t=aq(ot,at,!0),St=document.createRange();return q9(ht,at).fold(()=>{sq(ht)?St.setStart(ht,0):St.setStartBefore(ht)},Lt=>St.setStartBefore(Lt.dom)),q9(_t,at).fold(()=>{sq(_t)?St.setEnd(_t,_t.data.length):St.setEndAfter(_t)},Lt=>St.setEndAfter(Lt.dom)),St},cq=c=>{const g=lq(c.selection.getRng(),c.getBody(),c.schema);c.selection.setRng(pO(g))},Z9=c=>{c.on("mousedown",g=>{g.detail>=3&&(g.preventDefault(),cq(c))})};var KI;(function(c){c.Before="before",c.After="after"})(KI||(KI={}));const uq=(c,g)=>Math.abs(c.left-g),hoe=(c,g)=>Math.abs(c.right-g),dq=(c,g)=>c>=g.top&&c<=g.bottom,poe=(c,g)=>c.top<g.bottom&&c.bottom>g.top,fq=(c,g)=>{const $=Zv(c,g)/Math.min(c.height,g.height);return poe(c,g)&&$>.5},goe=(c,g)=>{const $=zn(c,et=>dq(g,et));return o4($).fold(()=>[[],c],et=>{const{pass:ot,fail:at}=Nn(c,ht=>fq(ht,et));return[ot,at]})},moe=(c,g)=>({node:c.node,position:uq(c,g)<hoe(c,g)?KI.Before:KI.After}),yoe=(c,g,$)=>g>c.left&&g<c.right?0:Math.min(Math.abs(c.left-g),Math.abs(c.right-g)),IA=(c,g,$,et)=>{const ot=qt=>Kv(qt.node)?Yt.some(qt):Nr(qt.node)?IA(Ss(qt.node.childNodes),g,$,!1):Yt.none(),at=(qt,Qt,gn)=>ot(Qt).filter(kn=>Math.abs(gn(qt,g,$)-gn(kn,g,$))<2&&dr(kn.node)),ht=(qt,Qt)=>{const gn=vr(qt,(kn,yn)=>Qt(kn,g,$)-Qt(yn,g,$));return As(gn,ot).map(kn=>et&&!dr(kn.node)&&gn.length>1?at(kn,gn[1],Qt).getOr(kn):kn)},[_t,St]=goe(l7(c),$),{pass:Lt,fail:Ht}=Nn(St,qt=>qt.top<$);return ht(_t,yoe).orThunk(()=>ht(Ht,_2)).orThunk(()=>ht(Lt,_2))},boe=(c,g,$,et)=>{const ot=(at,ht)=>{const _t=Lt=>Nr(Lt)&&Lt.classList.contains("mce-drag-container"),St=zn(at.dom.childNodes,Wn(_t));return ht.fold(()=>IA(St,$,et,!0),Lt=>{const Ht=zn(St,qt=>qt!==Lt.dom);return IA(Ht,$,et,!0)}).orThunk(()=>(_i(at,c)?Yt.none():X_(at)).bind(Ht=>ot(Ht,Yt.some(at))))};return ot(g,Yt.none())},voe=(c,g,$)=>{const et=Qn.fromDom(c),ot=Dv(et),ht=Qn.fromPoint(ot,g,$).filter(_t=>Om(et,_t)).getOr(et);return boe(et,ht,g,$)},K9=(c,g,$)=>voe(c,g,$).filter(et=>YC(et.node)).map(et=>moe(et,g)),hq=c=>{var g,$;const et=c.getBoundingClientRect(),ot=c.ownerDocument,at=ot.documentElement,ht=ot.defaultView;return{top:et.top+((g=ht==null?void 0:ht.scrollY)!==null&&g!==void 0?g:0)-at.clientTop,left:et.left+(($=ht==null?void 0:ht.scrollX)!==null&&$!==void 0?$:0)-at.clientLeft}},_oe=c=>c.inline?hq(c.getBody()):{left:0,top:0},xoe=c=>{const g=c.getBody();return c.inline?{left:g.scrollLeft,top:g.scrollTop}:{left:0,top:0}},woe=c=>{const g=c.getBody(),$=c.getDoc().documentElement,et={left:g.scrollLeft,top:g.scrollTop},ot={left:g.scrollLeft||$.scrollLeft,top:g.scrollTop||$.scrollTop};return c.inline?et:ot},Coe=(c,g)=>{if(g.target.ownerDocument!==c.getDoc()){const $=hq(c.getContentAreaContainer()),et=woe(c);return{left:g.pageX-$.left+et.left,top:g.pageY-$.top+et.top}}return{left:g.pageX,top:g.pageY}},cN=(c,g,$)=>({pageX:$.left-c.left+g.left,pageY:$.top-c.top+g.top}),pq=(c,g)=>cN(_oe(c),xoe(c),Coe(c,g)),Y9=c=>({target:c,srcElement:c}),koe=(c,g,$,et)=>({...g,dataTransfer:et,type:c,...Y9($)}),Soe=(c,g,$)=>{const et=er("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:c,composedPath:et,initEvent:et,preventDefault:fn,stopImmediatePropagation:fn,stopPropagation:fn,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:et,initMouseEvent:et,getModifierState:et,dataTransfer:$,...Y9(g)}},Eoe=(c,g)=>{const $=Ene(c);return g==="dragstart"?(EW($),I9($)):g==="drop"?(AW($),R9($)):(xne($),kne($)),$},nae=(c,g,$,et)=>{const ot=Eoe($,c);return dn(et)?Soe(c,g,ot):koe(c,et,g,ot)},uN=32,gq=100,YI=8,RA=16,mq=Ql,Aoe=s4(mq,Jo),yq=(c,g,$)=>mq($)&&$!==g&&c.isEditable($.parentElement),Toe=(c,g,$)=>Pn(g)||g===$||c.dom.isChildOf(g,$)?!1:c.dom.isEditable(g),X9=(c,g,$,et)=>{const ot=c.dom,at=g.cloneNode(!0);ot.setStyles(at,{width:$,height:et}),ot.setAttrib(at,"data-mce-selected",null);const ht=ot.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return ot.setStyles(ht,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:$,height:et}),ot.setStyles(at,{margin:0,boxSizing:"border-box"}),ht.appendChild(at),ht},bq=(c,g)=>{c.parentNode!==g&&g.appendChild(c)},dN=(c,g)=>$=>()=>{const et=c==="left"?$.scrollX:$.scrollY;$.scroll({[c]:et+g,behavior:"smooth"})},vq=dN("left",-uN),J9=dN("left",uN),_q=dN("top",-uN),Ioe=dN("top",uN),Roe=(c,g,$,et,ot,at,ht,_t,St,Lt,Ht,qt)=>{let Qt=0,gn=0;c.style.left=g.pageX+"px",c.style.top=g.pageY+"px",g.pageX+$>ot&&(Qt=g.pageX+$-ot),g.pageY+et>at&&(gn=g.pageY+et-at),c.style.width=$-Qt+"px",c.style.height=et-gn+"px";const kn=St.clientHeight,yn=St.clientWidth,Rn=ht+St.getBoundingClientRect().top,so=_t+St.getBoundingClientRect().left;Ht.on(ho=>{ho.intervalId.clear(),ho.dragging&&qt&&(ht+YI>=kn?ho.intervalId.set(Ioe(Lt)):ht-YI<=0?ho.intervalId.set(_q(Lt)):_t+YI>=yn?ho.intervalId.set(J9(Lt)):_t-YI<=0?ho.intervalId.set(vq(Lt)):Rn+RA>=window.innerHeight?ho.intervalId.set(Ioe(window)):Rn-RA<=0?ho.intervalId.set(_q(window)):so+RA>=window.innerWidth?ho.intervalId.set(J9(window)):so-RA<=0&&ho.intervalId.set(vq(window)))})},xq=c=>{c&&c.parentNode&&c.parentNode.removeChild(c)},Moe=(c,g)=>{const $=c.getParent(g.parentNode,c.isBlock);xq(g),$&&$!==c.getRoot()&&c.isEmpty($)&&T_(Qn.fromDom($))},wq=c=>c.button===0,Poe=(c,g)=>({pageX:g.pageX-c.relX,pageY:g.pageY+5}),Cq=(c,g)=>$=>{if(wq($)){const et=Jn(g.dom.getParents($.target),Aoe).getOr(null);if(an(et)&&yq(g.dom,g.getBody(),et)){const ot=g.dom.getPos(et),at=g.getBody(),ht=g.getDoc().documentElement;c.set({element:et,dataTransfer:M9(),dragging:!1,screenX:$.screenX,screenY:$.screenY,maxX:(g.inline?at.scrollWidth:ht.offsetWidth)-2,maxY:(g.inline?at.scrollHeight:ht.offsetHeight)-2,relX:$.pageX-ot.x,relY:$.pageY-ot.y,width:et.offsetWidth,height:et.offsetHeight,ghost:X9(g,et,et.offsetWidth,et.offsetHeight),intervalId:Rp(gq)})}}},Ooe=(c,g,$)=>{c._selectionOverrides.hideFakeCaret(),K9(c.getBody(),g,$).fold(()=>c.selection.placeCaretAt(g,$),et=>{const ot=c._selectionOverrides.showCaret(1,et.node,et.position===KI.Before,!1);ot?c.selection.setRng(ot):c.selection.placeCaretAt(g,$)})},bM=(c,g,$,et,ot)=>{g==="dragstart"&&MW(et,c.dom.getOuterHTML($));const at=nae(g,$,et,ot);return c.dispatch(g,at)},Doe=(c,g)=>{const $=RC((ot,at)=>Ooe(g,ot,at),0);g.on("remove",$.cancel);const et=c;return ot=>c.on(at=>{const ht=Math.max(Math.abs(ot.screenX-at.screenX),Math.abs(ot.screenY-at.screenY));if(!at.dragging&&ht>10){const _t=bM(g,"dragstart",at.element,at.dataTransfer,ot);if(an(_t.dataTransfer)&&(at.dataTransfer=_t.dataTransfer),_t.isDefaultPrevented())return;at.dragging=!0,g.focus()}if(at.dragging){const _t=ot.currentTarget===g.getDoc().documentElement,St=Poe(at,pq(g,ot));bq(at.ghost,g.getBody()),Roe(at.ghost,St,at.width,at.height,at.maxX,at.maxY,ot.clientY,ot.clientX,g.getContentAreaContainer(),g.getWin(),et,_t),$.throttle(ot.clientX,ot.clientY)}})},Noe=c=>{const g=c.getSel();if(an(g)){const et=g.getRangeAt(0).startContainer;return dr(et)?et.parentNode:et}else return null},Loe=(c,g)=>$=>{c.on(et=>{var ot;if(et.intervalId.clear(),et.dragging){if(Toe(g,Noe(g.selection),et.element)){const at=(ot=g.getDoc().elementFromPoint($.clientX,$.clientY))!==null&&ot!==void 0?ot:g.getBody();bM(g,"drop",at,et.dataTransfer,$).isDefaultPrevented()||g.undoManager.transact(()=>{Moe(g.dom,et.element),Ane(et.dataTransfer).each(_t=>g.insertContent(_t)),g._selectionOverrides.hideFakeCaret()})}bM(g,"dragend",g.getBody(),et.dataTransfer,$)}}),kq(c)},Q9=(c,g,$)=>{c.on(et=>{et.intervalId.clear(),et.dragging&&$.fold(()=>bM(g,"dragend",et.element,et.dataTransfer),ot=>bM(g,"dragend",et.element,et.dataTransfer,ot))}),kq(c)},oae=(c,g)=>$=>Q9(c,g,Yt.some($)),kq=c=>{c.on(g=>{g.intervalId.clear(),xq(g.ghost)}),c.clear()},Sq=c=>{const g=wm(),$=$u.DOM,et=document,ot=Cq(g,c),at=Doe(g,c),ht=Loe(g,c),_t=oae(g,c);c.on("mousedown",ot),c.on("mousemove",at),c.on("mouseup",ht),$.bind(et,"mousemove",at),$.bind(et,"mouseup",_t),c.on("remove",()=>{$.unbind(et,"mousemove",at),$.unbind(et,"mouseup",_t)}),c.on("keydown",St=>{St.keyCode===Br.ESC&&Q9(g,c,Yt.none())})},Foe=c=>{const g=ot=>{if(!ot.isDefaultPrevented()){const at=ot.dataTransfer;at&&(mn(at.types,"Files")||at.files.length>0)&&(ot.preventDefault(),ot.type==="drop"&&nD(c,"Dropped file type is not supported"))}},$=ot=>{HP(c,ot.target)&&g(ot)},et=()=>{const ot=$u.DOM,at=c.dom,ht=document,_t=c.inline?c.getBody():c.getDoc(),St=["drop","dragover"];rn(St,Lt=>{ot.bind(ht,Lt,$),at.bind(_t,Lt,g)}),c.on("remove",()=>{rn(St,Lt=>{ot.unbind(ht,Lt,$),at.unbind(_t,Lt,g)})})};c.on("init",()=>{Jv.setEditorTimeout(c,et,0)})},ez=c=>{Sq(c),J0(c)&&Foe(c)},zoe=c=>{const g=RC(()=>{if(!c.removed&&c.getBody().contains(document.activeElement)){const $=c.selection.getRng();if($.collapsed){const et=dD(c,$,!1);c.selection.setRng(et)}}},0);c.on("focus",()=>{g.throttle()}),c.on("blur",()=>{g.cancel()})},Boe=c=>{c.on("init",()=>{c.on("focusin",g=>{const $=g.target;if(Jm($)){const et=L_(c.getBody(),$),ot=Ql(et)?et:$;c.selection.getNode()!==ot&&DI(c,ot).each(at=>c.selection.setRng(at))}})})},vM=Ql,tz=(c,g)=>L_(c.getBody(),g),fN=c=>{const g=c.selection,$=c.dom,et=c.getBody(),ot=iP(c,et,$.isBlock,()=>hI(c)),at="sel-"+$.uniqueId(),ht="data-mce-selected";let _t;const St=$r=>an($r)&&$.hasClass($r,"mce-offscreen-selection"),Lt=$r=>$r!==et&&(vM($r)||Jm($r))&&$.isChildOf($r,et)&&$.isEditable($r.parentNode),Ht=$r=>{$r&&g.setRng($r)},qt=($r,Zo,Lo,ir=!0)=>c.dispatch("ShowCaret",{target:Zo,direction:$r,before:Lo}).isDefaultPrevented()?null:(ir&&g.scrollIntoView(Zo,$r===-1),ot.show(Lo,Zo)),Qt=$r=>{$r.hasAttribute("data-mce-caret")&&(zC($r),g.scrollIntoView($r))},gn=()=>{c.on("click",Zo=>{$.isEditable(Zo.target)||(Zo.preventDefault(),c.focus())}),c.on("blur NewBlock",To),c.on("ResizeWindow FullscreenStateChanged",ot.reposition),c.on("tap",Zo=>{const Lo=Zo.target,ir=tz(c,Lo);vM(ir)?(Zo.preventDefault(),DI(c,ir).each(xo)):Lt(Lo)&&DI(c,Lo).each(xo)},!0),c.on("mousedown",Zo=>{const Lo=Zo.target;if(Lo!==et&&Lo.nodeName!=="HTML"&&!$.isChildOf(Lo,et)||!vJ(c,Zo.clientX,Zo.clientY))return;To(),mr();const ir=tz(c,Lo);vM(ir)?(Zo.preventDefault(),DI(c,ir).each(xo)):K9(et,Zo.clientX,Zo.clientY).each(Gr=>{Zo.preventDefault();const gs=qt(1,Gr.node,Gr.position===KI.Before,!1);Ht(gs),By(ir)?ir.focus():c.getBody().focus()})}),c.on("keypress",Zo=>{Br.modifierPressed(Zo)||vM(g.getNode())&&Zo.preventDefault()}),c.on("GetSelectionRange",Zo=>{let Lo=Zo.range;if(_t){if(!_t.parentNode){_t=null;return}Lo=Lo.cloneRange(),Lo.selectNode(_t),Zo.range=Lo}}),c.on("SetSelectionRange",Zo=>{Zo.range=Rn(Zo.range);const Lo=xo(Zo.range,Zo.forward);Lo&&(Zo.range=Lo)});const $r=Zo=>Nr(Zo)&&Zo.id==="mcepastebin";c.on("AfterSetSelectionRange",Zo=>{const Lo=Zo.range,ir=Lo.startContainer.parentElement;!yn(Lo)&&!$r(ir)&&mr(),St(ir)||To()}),ez(c),zoe(c),Boe(c)},kn=$r=>hv($r)||zl($r)||v0($r),yn=$r=>kn($r.startContainer)||kn($r.endContainer),Rn=$r=>{const Zo=c.schema.getVoidElements(),Lo=$.createRng(),ir=$r.startContainer,Gr=$r.startOffset,gs=$r.endContainer,Cl=$r.endOffset;return Jr(Zo,ir.nodeName.toLowerCase())?Gr===0?Lo.setStartBefore(ir):Lo.setStartAfter(ir):Lo.setStart(ir,Gr),Jr(Zo,gs.nodeName.toLowerCase())?Cl===0?Lo.setEndBefore(gs):Lo.setEndAfter(gs):Lo.setEnd(gs,Cl),Lo},so=($r,Zo)=>{const Lo=Qn.fromDom(c.getBody()),ir=c.getDoc(),Gr=ls(Lo,"#"+at).getOrThunk(()=>{const Sl=Qn.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ir);return ip(Sl,"id",at),Up(Lo,Sl),Sl}),gs=$.createRng();y_(Gr),Bv(Gr,[Qn.fromText(dm,ir),Qn.fromDom(Zo),Qn.fromText(dm,ir)]),gs.setStart(Gr.dom.firstChild,1),gs.setEnd(Gr.dom.lastChild,0),Ks(Gr,{top:$.getPos($r,c.getBody()).y+"px"}),qE(Gr);const Cl=g.getSel();return Cl&&(Cl.removeAllRanges(),Cl.addRange(gs)),gs},ho=$r=>{const Zo=$r.cloneNode(!0),Lo=c.dispatch("ObjectSelected",{target:$r,targetClone:Zo});if(Lo.isDefaultPrevented())return null;const ir=so($r,Lo.targetClone),Gr=Qn.fromDom($r);return rn(m0(Qn.fromDom(c.getBody()),`*[${ht}]`),gs=>{_i(Gr,gs)||zu(gs,ht)}),$.getAttrib($r,ht)||$r.setAttribute(ht,"1"),_t=$r,mr(),ir},xo=($r,Zo)=>{if(!$r)return null;if($r.collapsed){if(!yn($r)){const gs=Zo?1:-1,Cl=P2(gs,et,$r),Sl=Cl.getNode(!Zo);if(an(Sl)){if(YC(Sl))return qt(gs,Sl,Zo?!Cl.isAtEnd():!1,!1);if(qv(Sl)&&Ql(Sl.nextSibling)){const Cu=$.createRng();return Cu.setStart(Sl,0),Cu.setEnd(Sl,0),Cu}}const au=Cl.getNode(Zo);if(an(au)){if(YC(au))return qt(gs,au,Zo?!1:!Cl.isAtEnd(),!1);if(qv(au)&&Ql(au.previousSibling)){const Cu=$.createRng();return Cu.setStart(au,1),Cu.setEnd(au,1),Cu}}}return null}let Lo=$r.startContainer,ir=$r.startOffset;const Gr=$r.endOffset;if(dr(Lo)&&ir===0&&vM(Lo.parentNode)&&(Lo=Lo.parentNode,ir=$.nodeIndex(Lo),Lo=Lo.parentNode),!Nr(Lo))return null;if(Gr===ir+1&&Lo===$r.endContainer){const gs=Lo.childNodes[ir];if(Lt(gs))return ho(gs)}return null},To=()=>{_t&&_t.removeAttribute(ht),ls(Qn.fromDom(c.getBody()),"#"+at).each(mu),_t=null},or=()=>{ot.destroy(),_t=null},mr=()=>{ot.hide()};return Iw(c)||gn(),{showCaret:qt,showBlockCaretContainer:Qt,hideFakeCaret:mr,destroy:or}},Eq=(c,g)=>{let $=g;for(let et=c.previousSibling;dr(et);et=et.previousSibling)$+=et.data.length;return $},nz=(c,g,$,et,ot)=>{if(dr($)&&(et<0||et>$.data.length))return[];const at=ot&&dr($)?[Eq($,et)]:[et];let ht=$;for(;ht!==g&&ht.parentNode;)at.push(c.nodeIndex(ht,ot)),ht=ht.parentNode;return ht===g?at.reverse():[]},oz=(c,g,$,et,ot,at,ht=!1)=>{const _t=nz(c,g,$,et,ht),St=nz(c,g,ot,at,ht);return{start:_t,end:St}},Aq=(c,g)=>{const $=g.slice(),et=$.pop();return ao(et)?Hn($,(at,ht)=>at.bind(_t=>Yt.from(_t.childNodes[ht])),Yt.some(c)).bind(at=>dr(at)&&(et<0||et>at.data.length)?Yt.none():Yt.some({node:at,offset:et})):Yt.none()},rz=(c,g)=>Aq(c,g.start).bind(({node:$,offset:et})=>Aq(c,g.end).map(({node:ot,offset:at})=>{const ht=document.createRange();return ht.setStart($,et),ht.setEnd(ot,at),ht})),$oe=(c,g,$,et=!1)=>oz(c,g,$.startContainer,$.startOffset,$.endContainer,$.endOffset,et),XI=(c,g,$)=>{if(g&&c.isEmpty(g)&&!$(g)){const et=g.parentNode;c.remove(g,dr(g.firstChild)&&uy(g.firstChild.data)),XI(c,et,$)}},hN=(c,g,$,et=!0)=>{const ot=g.startContainer.parentNode,at=g.endContainer.parentNode;g.deleteContents(),et&&!$(g.startContainer)&&(dr(g.startContainer)&&g.startContainer.data.length===0&&c.remove(g.startContainer),dr(g.endContainer)&&g.endContainer.data.length===0&&c.remove(g.endContainer),XI(c,ot,$),ot!==at&&XI(c,at,$))},JI=(c,g)=>Yt.from(c.dom.getParent(g.startContainer,c.dom.isBlock)),sz=(c,g,$)=>{const et=c.dynamicPatternsLookup({text:$,block:g});return{...c,blockPatterns:k4(et).concat(c.blockPatterns),inlinePatterns:cw(et).concat(c.inlinePatterns)}},iz=(c,g,$,et)=>{const ot=c.createRng();return ot.setStart(g,0),ot.setEnd($,et),ot.toString()},Tq=(c,g)=>c.create("span",{"data-mce-type":"bookmark",id:g}),pN=(c,g)=>{const $=c.createRng();return $.setStartAfter(g.start),$.setEndBefore(g.end),$},Iq=(c,g,$)=>{const et=rz(c.getRoot(),$).getOrDie("Unable to resolve path range"),ot=et.startContainer,at=et.endContainer,ht=et.endOffset===0?at:at.splitText(et.endOffset),_t=et.startOffset===0?ot:ot.splitText(et.startOffset),St=_t.parentNode,Lt=ht.parentNode;return{prefix:g,end:Lt.insertBefore(Tq(c,g+"-end"),ht),start:St.insertBefore(Tq(c,g+"-start"),_t)}},Rq=(c,g,$)=>{XI(c,c.get(g.prefix+"-end"),$),XI(c,c.get(g.prefix+"-start"),$)},mN=c=>c.start.length===0,Mq=c=>(g,$)=>{const ot=g.data.substring(0,$),at=ot.lastIndexOf(c.charAt(c.length-1)),ht=ot.lastIndexOf(c);return ht!==-1?ht+c.length:at!==-1?at+1:-1},yN=(c,g,$,et)=>{const ot=g.start;return U7(c,et.container,et.offset,Mq(ot),$).bind(ht=>{var _t,St;const Lt=(St=(_t=$.textContent)===null||_t===void 0?void 0:_t.indexOf(ot))!==null&&St!==void 0?St:-1;if(Lt!==-1&&ht.offset>=Lt+ot.length){const qt=c.createRng();return qt.setStart(ht.container,ht.offset-ot.length),qt.setEnd(ht.container,ht.offset),Yt.some(qt)}else{const qt=ht.offset-ot.length;return $I(ht.container,qt,$).map(Qt=>{const gn=c.createRng();return gn.setStart(Qt.container,Qt.offset),gn.setEnd(ht.container,ht.offset),gn}).filter(Qt=>Qt.toString()===ot).orThunk(()=>yN(c,g,$,U_(ht.container,0)))}})},az=(c,g,$,et,ot,at=!1)=>{if(g.start.length===0&&!at){const ht=c.createRng();return ht.setStart($,et),ht.setEnd($,et),Yt.some(ht)}return j7($,et,ot).bind(ht=>yN(c,g,ot,ht).bind(St=>{var Lt;if(at){if(St.endContainer===ht.container&&St.endOffset===ht.offset)return Yt.none();if(ht.offset===0&&((Lt=St.endContainer.textContent)===null||Lt===void 0?void 0:Lt.length)===St.endOffset)return Yt.none()}return Yt.some(St)}))},Goe=(c,g,$,et)=>{const ot=c.dom,at=ot.getRoot(),ht=$.pattern,_t=$.position.container,St=$.position.offset;return $I(_t,St-$.pattern.end.length,g).bind(Lt=>{const Ht=oz(ot,at,Lt.container,Lt.offset,_t,St,et);if(mN(ht))return Yt.some({matches:[{pattern:ht,startRng:Ht,endRng:Ht}],position:Lt});{const qt=QI(c,$.remainingPatterns,Lt.container,Lt.offset,g,et),Qt=qt.getOr({matches:[],position:Lt}),gn=Qt.position;return az(ot,ht,gn.container,gn.offset,g,qt.isNone()).map(yn=>{const Rn=$oe(ot,at,yn,et);return{matches:Qt.matches.concat([{pattern:ht,startRng:Rn,endRng:Ht}]),position:U_(yn.startContainer,yn.startOffset)}})}})},QI=(c,g,$,et,ot,at)=>{const ht=c.dom;return j7($,et,ht.getRoot()).bind(_t=>{const St=iz(ht,ot,$,et);for(let Lt=0;Lt<g.length;Lt++){const Ht=g[Lt];if(!Nl(St,Ht.end))continue;const qt=g.slice();qt.splice(Lt,1);const Qt=Goe(c,ot,{pattern:Ht,remainingPatterns:qt,position:_t},at);if(Qt.isNone()&&et>0)return QI(c,g,$,et-1,ot,at);if(Qt.isSome())return Qt}return Yt.none()})},Pq=(c,g,$)=>{c.selection.setRng($),g.type==="inline-format"?rn(g.format,et=>{c.formatter.apply(et)}):c.execCommand(g.cmd,!1,g.value)},joe=(c,g,$,et)=>{const ot=pN(c.dom,$);hN(c.dom,ot,et),Pq(c,g,ot)},Oq=(c,g,$,et,ot)=>{const at=c.dom,ht=pN(at,et),_t=pN(at,$);hN(at,_t,ot),hN(at,ht,ot);const St={prefix:$.prefix,start:$.end,end:et.start},Lt=pN(at,St);Pq(c,g,Lt)},Uoe=(c,g)=>{const $=DC("mce_textpattern"),et=So(g,(ot,at)=>{const ht=Iq(c,$+`_end${ot.length}`,at.endRng);return ot.concat([{...at,endMarker:ht}])},[]);return So(et,(ot,at)=>{const ht=et.length-ot.length-1,_t=mN(at.pattern)?at.endMarker:Iq(c,$+`_start${ht}`,at.startRng);return ot.concat([{...at,startMarker:_t}])},[])},Hoe=c=>vr(c,(g,$)=>$.end.length-g.end.length),Voe=(c,g)=>{const $=wo(c,et=>wn(g,ot=>et.pattern.start===ot.pattern.start&&et.pattern.end===ot.pattern.end));return c.length===g.length?$?c:g:c.length>g.length?c:g},Dq=(c,g,$,et,ot,at)=>{const ht=QI(c,ot.inlinePatterns,$,et,g,at).fold(()=>[],St=>St.matches),_t=QI(c,Hoe(ot.inlinePatterns),$,et,g,at).fold(()=>[],St=>St.matches);return Voe(ht,_t)},Nq=(c,g)=>{if(g.length===0)return;const $=c.dom,et=c.selection.getBookmark(),ot=Uoe($,g);rn(ot,at=>{const ht=$.getParent(at.startMarker.start,$.isBlock),_t=St=>St===ht;mN(at.pattern)?joe(c,at.pattern,at.endMarker,_t):Oq(c,at.pattern,at.startMarker,at.endMarker,_t),Rq($,at.endMarker,_t),Rq($,at.startMarker,_t)}),c.selection.moveToBookmark(et)},Lq=(c,g,$)=>Dee(g,0,g).map(et=>{const ot=et.container;return vV(ot,$.start.length,g).each(at=>{const ht=c.createRng();ht.setStart(ot,0),ht.setEnd(at.container,at.offset),hN(c,ht,_t=>_t===g)}),ot}),Fq=c=>(g,$)=>{const et=g.dom,ot=$.pattern,at=rz(et.getRoot(),$.range).getOrDie("Unable to resolve path range"),ht=(_t,St)=>{const Lt=St.get(_t);return Zt(Lt)&&_r(Lt).exists(Ht=>Jr(Ht,"block"))};return JI(g,at).each(_t=>{ot.type==="block-format"?ht(ot.format,g.formatter)&&g.undoManager.transact(()=>{c(g.dom,_t,ot),g.formatter.apply(ot.format)}):ot.type==="block-command"&&g.undoManager.transact(()=>{c(g.dom,_t,ot),g.execCommand(ot.cmd,!1,ot.value)})}),!0},Woe=c=>vr(c,(g,$)=>$.start.length-g.start.length),lz=c=>(g,$)=>{const et=Woe(g),ot=$.replace(dm," ");return Jn(et,at=>c(at,$,ot))},zq=(c,g)=>($,et,ot,at,ht)=>{var _t;ht===void 0&&(ht=(_t=et.textContent)!==null&&_t!==void 0?_t:"");const St=$.dom,Lt=c0($);return St.is(et,Lt)?c(ot.blockPatterns,ht).map(Ht=>g&&cr.trim(ht).length===Ht.start.length?[]:[{pattern:Ht,range:oz(St,St.getRoot(),et,0,et,0,at)}]).getOr([]):[]},cz=c=>/^\s[^\s]/.test(c),qoe=Fq((c,g,$)=>{Lq(c,g,$).each(et=>{const ot=Qn.fromDom(et),at=LC(ot);cz(at)&&FC(ot,at.slice(1))})}),Zoe=lz((c,g,$)=>g.indexOf(c.start)===0||$.indexOf(c.start)===0),Koe=zq(Zoe,!0),Yoe=(c,g)=>{const $=c.selection.getRng();return JI(c,$).map(et=>{var ot;const at=Math.max(0,$.startOffset),ht=sz(g,et,(ot=et.textContent)!==null&&ot!==void 0?ot:""),_t=Dq(c,et,$.startContainer,at,ht,!0),St=Koe(c,et,ht,!0);return{inlineMatches:_t,blockMatches:St}}).filter(({inlineMatches:et,blockMatches:ot})=>ot.length>0||et.length>0)},Xoe=(c,g)=>{if(g.length===0)return;const $=c.selection.getBookmark();rn(g,et=>qoe(c,et)),c.selection.moveToBookmark($)},bN=Fq(Lq),Joe=lz((c,g,$)=>g===c.start||$===c.start),Qoe=zq(Joe,!1),ere=(c,g)=>{const $=c.selection.getRng();return JI(c,$).map(et=>{const ot=Math.max(0,$.startOffset),at=iz(c.dom,et,$.startContainer,ot),ht=sz(g,et,at);return Qoe(c,et,ht,!1,at)}).filter(et=>et.length>0)},tre=(c,g)=>{rn(g,$=>bN(c,$))},nre=(c,g)=>Yoe(c,g).fold(On,({inlineMatches:$,blockMatches:et})=>(c.undoManager.add(),c.undoManager.extra(()=>{c.execCommand("mceInsertNewLine")},()=>{aT(c),Nq(c,$),Xoe(c,et);const ot=c.selection.getRng(),at=j7(ot.startContainer,ot.startOffset,c.dom.getRoot());c.execCommand("mceInsertNewLine"),at.each(ht=>{const _t=ht.container;_t.data.charAt(ht.offset-1)===hC&&(_t.deleteData(ht.offset-1,1),XI(c.dom,_t.parentNode,St=>St===c.dom.getRoot()))})}),!0)),ore=(c,g)=>{const $=c.selection.getRng();JI(c,$).map(et=>{const ot=Math.max(0,$.startOffset-1),at=iz(c.dom,et,$.startContainer,ot),ht=sz(g,et,at),_t=Dq(c,et,$.startContainer,ot,ht,!1);_t.length>0&&c.undoManager.transact(()=>{Nq(c,_t)})})},rre=(c,g)=>ere(c,g).fold(On,$=>(c.undoManager.transact(()=>{tre(c,$)}),!0)),Bq=(c,g,$)=>{for(let et=0;et<c.length;et++)if($(c[et],g))return!0;return!1},sre=(c,g)=>Bq(c,g,($,et)=>$===et.keyCode&&!Br.modifierPressed(et)),$q=(c,g)=>Bq(c,g,($,et)=>$.charCodeAt(0)===et.charCode),ire=c=>{const g=[",",".",";",":","!","?"],$=[32],et=()=>a0(GL(c).filter(ht=>ht.type==="inline-command"||ht.type==="block-command"?c.queryCommandSupported(ht.cmd):!0),jL(c)),ot=()=>Y4(c);c.on("keydown",ht=>{if(ht.keyCode===13&&!Br.modifierPressed(ht)&&c.selection.isCollapsed()&&c.selection.isEditable()){const _t=M_(et(),"enter");(_t.inlinePatterns.length>0||_t.blockPatterns.length>0||ot())&&nre(c,_t)&&ht.preventDefault()}},!0),c.on("keydown",ht=>{if(ht.keyCode===32&&c.selection.isCollapsed()&&c.selection.isEditable()){const _t=M_(et(),"space");(_t.blockPatterns.length>0||ot())&&rre(c,_t)&&ht.preventDefault()}},!0);const at=()=>{if(c.selection.isCollapsed()&&c.selection.isEditable()){const ht=M_(et(),"space");(ht.inlinePatterns.length>0||ot())&&ore(c,ht)}};c.on("keyup",ht=>{sre($,ht)&&at()}),c.on("keypress",ht=>{$q(g,ht)&&Jv.setEditorTimeout(c,at)})},Gq=c=>{ire(c)},are=c=>{const g=cr.each,$=Br.BACKSPACE,et=Br.DELETE,ot=c.dom,at=c.selection,ht=c.parser,_t=Kr.browser,St=_t.isFirefox(),Lt=_t.isChromium()||_t.isSafari(),Ht=Kr.deviceType.isiPhone()||Kr.deviceType.isiPad(),qt=Kr.os.isMacOS()||Kr.os.isiOS(),Qt=(Lr,Ts)=>{try{c.getDoc().execCommand(Lr,!1,String(Ts))}catch{}},gn=Lr=>Lr.isDefaultPrevented(),kn=()=>{const Lr=Is=>{const Mr=ot.create("body"),El=Is.cloneContents();return Mr.appendChild(El),at.serializer.serialize(Mr,{format:"html"})},Ts=Is=>{const Mr=Lr(Is),El=ot.createRng();El.selectNode(c.getBody());const Ol=Lr(El);return Mr===Ol};c.on("keydown",Is=>{const Mr=Is.keyCode;if(!gn(Is)&&(Mr===et||Mr===$)&&c.selection.isEditable()){const El=c.selection.isCollapsed(),Ol=c.getBody();if(El&&!hm(c.schema,Ol)||!El&&!Ts(c.selection.getRng()))return;Is.preventDefault(),c.setContent(""),Ol.firstChild&&ot.isBlock(Ol.firstChild)?c.selection.setCursorLocation(Ol.firstChild,0):c.selection.setCursorLocation(Ol,0),c.nodeChanged()}})},yn=()=>{c.shortcuts.add("meta+a",null,"SelectAll")},Rn=()=>{c.inline||ot.bind(c.getDoc(),"mousedown mouseup",Lr=>{let Ts;if(Lr.target===c.getDoc().documentElement)if(Ts=at.getRng(),c.getBody().focus(),Lr.type==="mousedown"){if(hv(Ts.startContainer))return;at.placeCaretAt(Lr.clientX,Lr.clientY)}else at.setRng(Ts)})},so=()=>{c.on("keydown",Lr=>{if(!gn(Lr)&&Lr.keyCode===$){if(!c.getBody().getElementsByTagName("hr").length)return;if(at.isCollapsed()&&at.getRng().startOffset===0){const Ts=at.getNode(),Is=Ts.previousSibling;if(Ts.nodeName==="HR"){ot.remove(Ts),Lr.preventDefault();return}Is&&Is.nodeName&&Is.nodeName.toLowerCase()==="hr"&&(ot.remove(Is),Lr.preventDefault())}}})},ho=()=>{Range.prototype.getClientRects||c.on("mousedown",Lr=>{if(!gn(Lr)&&Lr.target.nodeName==="HTML"){const Ts=c.getBody();Ts.blur(),Jv.setEditorTimeout(c,()=>{Ts.focus()})}})},xo=()=>{const Lr=l5(c);c.on("click",Ts=>{const Is=Ts.target;/^(IMG|HR)$/.test(Is.nodeName)&&ot.isEditable(Is)&&(Ts.preventDefault(),c.selection.select(Is),c.nodeChanged()),Is.nodeName==="A"&&ot.hasClass(Is,Lr)&&Is.childNodes.length===0&&ot.isEditable(Is.parentNode)&&(Ts.preventDefault(),at.select(Is))})},To=()=>{const Lr=()=>{const Is=ot.getAttribs(at.getStart().cloneNode(!1));return()=>{const Mr=at.getStart();Mr!==c.getBody()&&(ot.setAttrib(Mr,"style",null),g(Is,El=>{Mr.setAttributeNode(El.cloneNode(!0))}))}},Ts=()=>!at.isCollapsed()&&ot.getParent(at.getStart(),ot.isBlock)!==ot.getParent(at.getEnd(),ot.isBlock);c.on("keypress",Is=>{let Mr;return!gn(Is)&&(Is.keyCode===8||Is.keyCode===46)&&Ts()?(Mr=Lr(),c.getDoc().execCommand("delete",!1),Mr(),Is.preventDefault(),!1):!0}),ot.bind(c.getDoc(),"cut",Is=>{if(!gn(Is)&&Ts()){const Mr=Lr();Jv.setEditorTimeout(c,()=>{Mr()})}})},or=()=>{c.on("keydown",Lr=>{if(!gn(Lr)&&Lr.keyCode===$&&at.isCollapsed()&&at.getRng().startOffset===0){const Ts=at.getNode().previousSibling;if(Ts&&Ts.nodeName&&Ts.nodeName.toLowerCase()==="table")return Lr.preventDefault(),!1}return!0})},mr=()=>{c.on("keydown",Lr=>{if(gn(Lr)||Lr.keyCode!==Br.BACKSPACE)return;let Ts=at.getRng();const Is=Ts.startContainer,Mr=Ts.startOffset,El=ot.getRoot();let Ol=Is;if(!(!Ts.collapsed||Mr!==0)){for(;Ol.parentNode&&Ol.parentNode.firstChild===Ol&&Ol.parentNode!==El;)Ol=Ol.parentNode;Ol.nodeName==="BLOCKQUOTE"&&(c.formatter.toggle("blockquote",void 0,Ol),Ts=ot.createRng(),Ts.setStart(Is,0),Ts.setEnd(Is,0),at.setRng(Ts))}})},$r=()=>{const Lr=()=>{Qt("StyleWithCSS",!1),Qt("enableInlineTableEditing",!1),VC(c)||Qt("enableObjectResizing",!1)};z4(c)||c.on("BeforeExecCommand mousedown",Lr)},Zo=()=>{const Lr=()=>{g(ot.select("a:not([data-mce-block])"),Ts=>{var Is;let Mr=Ts.parentNode;const El=ot.getRoot();if((Mr==null?void 0:Mr.lastChild)===Ts){for(;Mr&&!ot.isBlock(Mr);){if(((Is=Mr.parentNode)===null||Is===void 0?void 0:Is.lastChild)!==Mr||Mr===El)return;Mr=Mr.parentNode}ot.add(Mr,"br",{"data-mce-bogus":1})}})};c.on("SetContent ExecCommand",Ts=>{(Ts.type==="setcontent"||Ts.command==="mceInsertLink")&&Lr()})},Lo=()=>{c.on("init",()=>{Qt("DefaultParagraphSeparator",c0(c))})},ir=Lr=>{const Ts=Lr.getBody(),Is=Lr.selection.getRng();return Is.startContainer===Is.endContainer&&Is.startContainer===Ts&&Is.startOffset===0&&Is.endOffset===Ts.childNodes.length},Gr=()=>{c.on("keyup focusin mouseup",Lr=>{!Br.modifierPressed(Lr)&&!ir(c)&&at.normalize()},!0)},gs=()=>{c.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Cl=()=>{c.inline||c.on("keydown",()=>{document.activeElement===document.body&&c.getWin().focus()})},Sl=()=>{c.inline||(c.contentStyles.push("body {min-height: 150px}"),c.on("click",Lr=>{let Ts;Lr.target.nodeName==="HTML"&&(Ts=c.selection.getRng(),c.getBody().focus(),c.selection.setRng(Ts),c.selection.normalize(),c.nodeChanged())}))},au=()=>{qt&&c.on("keydown",Lr=>{Br.metaKeyPressed(Lr)&&!Lr.shiftKey&&(Lr.keyCode===37||Lr.keyCode===39)&&(Lr.preventDefault(),c.selection.getSel().modify("move",Lr.keyCode===37?"backward":"forward","lineboundary"))})},Cu=()=>{c.on("click",Lr=>{let Ts=Lr.target;do if(Ts.tagName==="A"){Lr.preventDefault();return}while(Ts=Ts.parentNode)}),c.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},jp=()=>{c.on("init",()=>{c.dom.bind(c.getBody(),"submit",Lr=>{Lr.preventDefault()})})},k0=()=>{ht.addNodeFilter("br",Lr=>{let Ts=Lr.length;for(;Ts--;)Lr[Ts].attr("class")==="Apple-interchange-newline"&&Lr[Ts].remove()})},qp=fn,Er=()=>{if(!St||c.removed)return!1;const Lr=c.selection.getSel();return!Lr||!Lr.rangeCount||Lr.rangeCount===0},ds=()=>{Lt&&(Rn(),xo(),jp(),yn(),Ht&&(Cl(),Sl(),Cu())),St&&(ho(),$r(),gs(),au())},_c=()=>{mr(),kn(),Kr.windowsPhone||Gr(),Lt&&(Rn(),xo(),Lo(),jp(),or(),k0(),Ht?(Cl(),Sl(),Cu()):yn()),St&&(so(),ho(),To(),$r(),Zo(),gs(),au(),or())};return Iw(c)?ds():_c(),{refreshContentEditable:qp,isHidden:Er}},lre=c=>c.toLowerCase()==="gpl",jq=c=>c.length>=64&&c.length<=255,_M=c=>lre(c)||jq(c)?"VALID":"INVALID",cre=c=>{const g=qC(c);!Et(Q4(c))&&(dn(g)||_M(g)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},vN=$u.DOM,ure=(c,g)=>{const $=Qn.fromDom(c.getBody()),et=g_(yy($)),ot=Qn.fromTag("style");ip(ot,"type","text/css"),Up(ot,Qn.fromText(g)),Up(et,ot),c.on("remove",()=>{mu(ot)})},dre=c=>c.inline?c.getElement().nodeName.toLowerCase():void 0,uz=c=>Vs(c,g=>dn(g)===!1),Uq=c=>{const g=c.options.get,$=c.editorUpload.blobCache;return uz({allow_conditional_comments:g("allow_conditional_comments"),allow_html_data_urls:g("allow_html_data_urls"),allow_svg_data_urls:g("allow_svg_data_urls"),allow_html_in_named_anchor:g("allow_html_in_named_anchor"),allow_script_urls:g("allow_script_urls"),allow_mathml_annotation_encodings:g("allow_mathml_annotation_encodings"),allow_unsafe_link_target:g("allow_unsafe_link_target"),convert_unsafe_embeds:g("convert_unsafe_embeds"),convert_fonts_to_spans:g("convert_fonts_to_spans"),fix_list_elements:g("fix_list_elements"),font_size_legacy_values:g("font_size_legacy_values"),forced_root_block:g("forced_root_block"),forced_root_block_attrs:g("forced_root_block_attrs"),preserve_cdata:g("preserve_cdata"),inline_styles:g("inline_styles"),root_name:dre(c),sandbox_iframes:g("sandbox_iframes"),sandbox_iframes_exclusions:p5(c),sanitize:g("xss_sanitization"),validate:!0,blob_cache:$,document:c.getDoc()})},dz=c=>{const g=c.options.get;return uz({custom_elements:g("custom_elements"),extended_valid_elements:g("extended_valid_elements"),invalid_elements:g("invalid_elements"),invalid_styles:g("invalid_styles"),schema:g("schema"),valid_children:g("valid_children"),valid_classes:g("valid_classes"),valid_elements:g("valid_elements"),valid_styles:g("valid_styles"),verify_html:g("verify_html"),padd_empty_block_inline_children:g("format_empty_lines")})},fre=c=>{const g=c.options.get;return{...Uq(c),...dz(c),...uz({remove_trailing_brs:g("remove_trailing_brs"),pad_empty_with_br:g("pad_empty_with_br"),url_converter:g("url_converter"),url_converter_scope:g("url_converter_scope"),element_format:g("element_format"),entities:g("entities"),entity_encoding:g("entity_encoding"),indent:g("indent"),indent_after:g("indent_after"),indent_before:g("indent_before")})}},Hq=c=>{const g=uA(Uq(c),c.schema);return g.addAttributeFilter("src,href,style,tabindex",($,et)=>{const ot=c.dom,at="data-mce-"+et;let ht=$.length;for(;ht--;){const _t=$[ht];let St=_t.attr(et);if(St&&!_t.attr(at)){if(St.indexOf("data:")===0||St.indexOf("blob:")===0)continue;et==="style"?(St=ot.serializeStyle(ot.parseStyle(St),_t.name),St.length||(St=null),_t.attr(at,St),_t.attr(et,St)):et==="tabindex"?(_t.attr(at,St),_t.attr(et,null)):_t.attr(at,c.convertURL(St,et,_t.name))}}}),g.addNodeFilter("script",$=>{let et=$.length;for(;et--;){const ot=$[et],at=ot.attr("type")||"no/type";at.indexOf("mce-")!==0&&ot.attr("type","mce-"+at)}}),TT(c)&&g.addNodeFilter("#cdata",$=>{var et;let ot=$.length;for(;ot--;){const at=$[ot];at.type=8,at.name="#comment",at.value="[CDATA["+c.dom.encode((et=at.value)!==null&&et!==void 0?et:"")+"]]"}}),g.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",$=>{let et=$.length;const ot=c.schema.getNonEmptyElements();for(;et--;){const at=$[et];at.isEmpty(ot)&&at.getAll("br").length===0&&at.append(new Iy("br",1))}}),g},hre=c=>{const g=ST(c);g&&Jv.setEditorTimeout(c,()=>{let $;g===!0?$=c:$=c.editorManager.get(g),$&&!$.destroyed&&($.focus(),$.selection.scrollIntoView())},100)},pre=c=>{const g=c.dom.getRoot();!c.inline&&(!UT(c)||c.selection.getStart(!0)===g)&&F0(g).each($=>{const et=$.getNode(),ot=lv(et)?F0(et).getOr($):$;c.selection.setRng(ot.toRange())})},gre=c=>{c.bindPendingEventDelegates(),c.initialized=!0,JT(c),c.focus(!0),pre(c),c.nodeChanged({initial:!0});const g=zL(c);Vt(g)&&g.call(c,c),hre(c)},fz=c=>c.inline?c.ui.styleSheetLoader:c.dom.styleSheetLoader,mre=(c,g,$)=>{const{pass:et,fail:ot}=Nn(g,_t=>tinymce.Resource.has(DF(_t))),ht=[...et.map(_t=>{const St=tinymce.Resource.get(DF(_t));return Et(St)?Promise.resolve(fz(c).loadRawCss(_t,St)):Promise.resolve()}),fz(c).loadAll(ot)];return c.inline?ht:ht.concat([c.ui.styleSheetLoader.loadAll($)])},Vq=c=>{const g=fz(c),$=ML(c),et=c.contentCSS,ot=()=>{g.unloadAll(et),c.inline||c.ui.styleSheetLoader.unloadAll($)},at=()=>{c.removed?ot():c.on("remove",ot)};if(c.contentStyles.length>0){let St="";cr.each(c.contentStyles,Lt=>{St+=Lt+`\r
`}),c.dom.addStyle(St)}const ht=Promise.all(mre(c,et,$)).then(at).catch(at),_t=ky(c);return _t&&ure(c,_t),ht},yre=c=>{const g=c.getDoc(),$=c.getBody();OP(c),j4(c)||(g.body.spellcheck=!1,vN.setAttrib($,"spellcheck","false")),c.quirks=are(c),j5(c);const et=PL(c);et!==void 0&&($.dir=et);const ot=c5(c);ot&&c.on("BeforeSetContent",at=>{cr.each(ot,ht=>{at.content=at.content.replace(ht,_t=>"<!--mce:protected "+escape(_t)+"-->")})}),c.on("SetContent",()=>{c.addVisual(c.getBody())}),c.on("compositionstart compositionend",at=>{c.composing=at.type==="compositionstart"})},bre=c=>{Iw(c)||c.load({initial:!0,format:"html"}),c.startContent=c.getContent({format:"raw"})},hz=c=>{c.removed!==!0&&(bre(c),gre(c))},Wq=c=>{let g=!1;const $=setTimeout(()=>{g||c.setProgressState(!0)},500);return()=>{clearTimeout($),g=!0,c.setProgressState(!1)}},_N=c=>{const g=c.getElement();let $=c.getDoc();c.inline&&(vN.addClass(g,"mce-content-body"),c.contentDocument=$=document,c.contentWindow=window,c.bodyElement=g,c.contentAreaContainer=g);const et=c.getBody();et.disabled=!0,c.readonly=z4(c),c._editableRoot=LL(c),c.hasEditableRoot()&&(c.inline&&vN.getStyle(et,"position",!0)==="static"&&(et.style.position="relative"),et.contentEditable="true"),et.disabled=!1,c.editorUpload=PJ(c),c.schema=yu(dz(c)),c.dom=$u($,{keep_values:!0,url_converter:c.convertURL,url_converter_scope:c,update_styles:!0,root_element:c.inline?c.getBody():null,collect:c.inline,schema:c.schema,contentCssCors:P4(c),referrerPolicy:bE(c),onSetAttrib:ht=>{c.dispatch("SetAttrib",ht)}}),c.parser=Hq(c),c.serializer=AF(fre(c),c),c.selection=CU(c.dom,c.getWin(),c.serializer,c),c.annotator=G1(c),c.formatter=UU(c),c.undoManager=$F(c),c._nodeChangeDispatcher=new yne(c),c._selectionOverrides=fN(c),YQ(c),coe(c),tee(c),Iw(c)||(Z9(c),Gq(c));const ot=mne(c);ZQ(c,ot),XQ(c),BJ(c),oq(c);const at=uU(c);yre(c),cre(c),at.fold(()=>{const ht=Wq(c);Vq(c).then(()=>{hz(c),ht()})},ht=>{c.setProgressState(!0),Vq(c).then(()=>{ht().then(_t=>{c.setProgressState(!1),hz(c),_U(c)},_t=>{c.notificationManager.open({type:"error",text:String(_t)}),hz(c),_U(c)})})})},qq=_o,Zq=(c,g,$)=>Dt(c,g,qq,$),pz=$u.DOM,vre=(c,g,$,et)=>{const ot=Qn.fromTag("iframe");return et.each(at=>ip(ot,"tabindex",at)),Tp(ot,$),Tp(ot,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:g}),Fy(ot,"tox-edit-area__iframe"),ot},_re=c=>{let g=l0(c)+"<html><head>";T4(c)!==c.documentBaseUrl&&(g+='<base href="'+c.documentBaseURI.getURI()+'" />'),g+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const $=uw(c),et=I4(c),ot=c.translate(kE(c));return Q3(c)&&(g+='<meta http-equiv="Content-Security-Policy" content="'+Q3(c)+'" />'),g+=`</head><body id="${$}" class="mce-content-body ${et}" data-id="${c.id}" aria-label="${ot}"><br></body></html>`,g},Kq=(c,g)=>{const $=Kr.browser.isFirefox()?kE(c):"Rich Text Area",et=c.translate($),ot=Vu(Qn.fromDom(c.getElement()),"tabindex").bind(wp),at=vre(c.id,et,IL(c),ot).dom;at.onload=()=>{at.onload=null,c.dispatch("load")},c.contentAreaContainer=g.iframeContainer,c.iframeElement=at,c.iframeHTML=_re(c),pz.add(g.iframeContainer,at)},Yq=c=>{const g=c.iframeElement,$=()=>{c.contentDocument=g.contentDocument,_N(c)};if(nm(c)||Kr.browser.isFirefox()){const et=c.getDoc();et.open(),et.write(c.iframeHTML),et.close(),$()}else{const et=Zq(Qn.fromDom(g),"load",()=>{et.unbind(),$()});g.srcdoc=c.iframeHTML}},xre=(c,g)=>{Kq(c,g),g.editorContainer&&(g.editorContainer.style.display=c.orgDisplay,c.hidden=pz.isHidden(g.editorContainer)),c.getElement().style.display="none",pz.setAttrib(c.id,"aria-hidden","true"),c.getElement().style.visibility=c.orgVisibility,Yq(c)},Xq=$u.DOM,gz=(c,g,$)=>{const et=TI.get($),ot=TI.urls[$]||c.documentBaseUrl.replace(/\/$/,"");if($=cr.trim($),et&&cr.inArray(g,$)===-1){if(c.plugins[$])return;try{const at=et(c,ot)||{};c.plugins[$]=at,Vt(at.init)&&(at.init(c,ot),g.push($))}catch(at){OF(c,$,at)}}},xN=c=>c.replace(/^\-/,""),wN=c=>{const g=[];rn(CE(c),$=>{gz(c,g,xN($))})},rC=c=>{const g=cr.trim(tm(c)),$=c.ui.registry.getAll().icons,et={...EI.get("default").icons,...EI.get(g).icons};tr(et,(ot,at)=>{Jr($,at)||c.ui.registry.addIcon(at,ot)})},CN=c=>{const g=fw(c);if(Et(g)){const $=Ax.get(g);c.theme=$(c,Ax.urls[g])||{},Vt(c.theme.init)&&c.theme.init(c,Ax.urls[g]||c.documentBaseUrl.replace(/\/$/,""))}else c.theme={}},e3=c=>{const g=wT(c),$=AI.get(g);c.model=$(c,AI.urls[g])},Jq=c=>{const g=c.theme.renderUI;return g?g():tZ(c)},wre=c=>{const g=c.getElement(),et=fw(c)(c,g);return et.editorContainer.nodeType&&(et.editorContainer.id=et.editorContainer.id||c.id+"_parent"),et.iframeContainer&&et.iframeContainer.nodeType&&(et.iframeContainer.id=et.iframeContainer.id||c.id+"_iframecontainer"),et.height=et.iframeHeight?et.iframeHeight:g.offsetHeight,et},Qq=(c,g)=>({editorContainer:c,iframeContainer:g,api:{}}),eZ=c=>{const g=Xq.create("div");return Xq.insertAfter(g,c),Qq(g,g)},tZ=c=>{const g=c.getElement();return c.inline?Qq(null):eZ(g)},mz=c=>{const g=c.getElement();return c.orgDisplay=g.style.display,Et(fw(c))?Jq(c):Vt(fw(c))?wre(c):tZ(c)},kN=(c,g)=>{const $={show:Yt.from(g.show).getOr(fn),hide:Yt.from(g.hide).getOr(fn),isEnabled:Yt.from(g.isEnabled).getOr(_o),setEnabled:et=>{et&&c.mode.get()==="readonly"||Yt.from(g.setEnabled).each(at=>at(et))}};c.ui={...c.ui,...$}},LS=async c=>{c.dispatch("ScriptsLoaded"),rC(c),CN(c),e3(c),wN(c);const g=await mz(c);kN(c,Yt.from(g.api).getOr({})),c.editorContainer=g.editorContainer,IJ(c),c.inline?_N(c):xre(c,{editorContainer:g.editorContainer,iframeContainer:g.iframeContainer})},n_=$u.DOM,yz=c=>c.charAt(0)==="-",Cre=(c,g)=>{const $=xT(g),et=vE(g);if(!L1.hasCode($)&&$!=="en"){const ot=_s(et)?et:`${g.editorManager.baseURL}/langs/${$}.js`;c.add(ot).catch(()=>{SJ(g,ot,$)})}},kre=(c,g)=>{const $=fw(c);if(Et($)&&!yz($)&&!Jr(Ax.urls,$)){const et=D4(c),ot=et?c.documentBaseURI.toAbsolute(et):`themes/${$}/theme${g}.js`;Ax.load($,ot).catch(()=>{Pie(c,ot,$)})}},Sre=(c,g)=>{const $=wT(c);if($!=="plugin"&&!Jr(AI.urls,$)){const et=s5(c),ot=Et(et)?c.documentBaseURI.toAbsolute(et):`models/${$}/model${g}.js`;AI.load($,ot).catch(()=>{Tx(c,ot,$)})}},Ere=c=>Yt.from(_T(c)).filter(_s).map(g=>({url:g,name:Yt.none()})),nZ=(c,g,$)=>Yt.from(g).filter(et=>_s(et)&&!EI.has(et)).map(et=>({url:`${c.editorManager.baseURL}/icons/${et}/icons${$}.js`,name:Yt.some(et)})),Are=(c,g,$)=>{const et=nZ(g,"default",$),ot=Ere(g).orThunk(()=>nZ(g,tm(g),""));rn(H0([et,ot]),at=>{c.add(at.url).catch(()=>{kJ(g,at.url,at.name.getOrUndefined())})})},oZ=(c,g)=>{const $=(et,ot)=>{TI.load(et,ot).catch(()=>{CJ(c,ot,et)})};tr($4(c),(et,ot)=>{$(ot,et),c.options.set("plugins",CE(c).concat(ot))}),rn(CE(c),et=>{et=cr.trim(et),et&&!TI.urls[et]&&!yz(et)&&$(et,`plugins/${et}/plugin${g}.js`)})},Tre=c=>{const g=fw(c);return!Et(g)||an(Ax.get(g))},Ire=c=>{const g=wT(c);return an(AI.get(g))},Rre=(c,g)=>{const $=E_.ScriptLoader,et=()=>{!c.removed&&Tre(c)&&Ire(c)&&LS(c)};kre(c,g),Sre(c,g),Cre($,c),Are($,c,g),oZ(c,g),$.loadQueue().then(et,et)},sae=(c,g)=>tp.forElement(c,{contentCssCors:B4(g),referrerPolicy:bE(g)}),Mre=c=>{const g=c.id;L1.setCode(xT(c));const $=()=>{n_.unbind(window,"ready",$),c.render()};if(!u2.Event.domLoaded){n_.bind(window,"ready",$);return}if(!c.getElement())return;const et=Qn.fromDom(c.getElement()),ot=u_(et);c.on("remove",()=>{Cn(et.dom.attributes,ht=>zu(et,ht.name)),Tp(et,ot)}),c.ui.styleSheetLoader=sae(et,c),I2(c)?c.inline=!0:(c.orgVisibility=c.getElement().style.visibility,c.getElement().style.visibility="hidden");const at=c.getElement().form||n_.getParent(g,"form");at&&(c.formElement=at,wE(c)&&!cp(c.getElement())&&(n_.insertAfter(n_.create("input",{type:"hidden",name:g}),g),c.hasHiddenInput=!0),c.formEventDelegate=ht=>{c.dispatch(ht.type,ht)},n_.bind(at,"submit reset",c.formEventDelegate),c.on("reset",()=>{c.resetContent()}),OL(c)&&!at.submit.nodeType&&!at.submit.length&&!at._mceOldSubmit&&(at._mceOldSubmit=at.submit,at.submit=()=>(c.editorManager.triggerSave(),c.setDirty(!1),at._mceOldSubmit(at)))),c.windowManager=PF(c),c.notificationManager=DU(c),IT(c)&&c.on("GetContent",ht=>{ht.save&&(ht.content=n_.encode(ht.content))}),i5(c)&&c.on("submit",()=>{c.initialized&&c.save()}),DL(c)&&(c._beforeUnload=()=>{c.initialized&&!c.destroyed&&!c.isHidden()&&c.save({format:"raw",no_events:!0,set_dirty:!1})},c.editorManager.on("BeforeUnload",c._beforeUnload)),c.editorManager.add(c),Rre(c,c.suffix)},bz=(c,g)=>{c._editableRoot!==g&&(c._editableRoot=g,c.getBody().contentEditable=String(c.hasEditableRoot()),c.nodeChanged(),Du(c,g))},Pre=c=>c._editableRoot,Ore=(c,g)=>({sections:ln(c),options:ln(g)}),vz=un().deviceType,rZ=vz.isPhone(),sZ=vz.isTablet(),xM=c=>{if(Pn(c))return[];{const g=Zt(c)?c:c.split(/[ ,]/),$=Dn(g,uu);return zn($,_s)}},_z=(c,g)=>{const $=xu(g,(et,ot)=>mn(c,ot));return Ore($.t,$.f)},Dre=(c,g,$={})=>{const et=c.sections(),ot=ba(et,g).getOr({});return cr.extend({},$,ot)},xz=(c,g)=>Jr(c.sections(),g),Nre=(c,g)=>xz(c,g)?c.sections()[g]:{},Lre=(c,g)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ba(c,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...g?{menubar:!1}:{}}),iZ=(c,g)=>{var $;const et=($=g.external_plugins)!==null&&$!==void 0?$:{};return c&&c.external_plugins?cr.extend({},c.external_plugins,et):et},wz=(c,g)=>[...xM(c),...xM(g)],aZ=(c,g,$,et)=>c&&xz(g,"mobile")?et:$,Cz=(c,g,$,et)=>{const ot=xM($.forced_plugins),at=xM(et.plugins),ht=Nre(g,"mobile"),_t=ht.plugins?xM(ht.plugins):at,St=aZ(c,g,at,_t),Lt=wz(ot,St);return cr.extend(et,{forced_plugins:ot,plugins:Lt})},Fre=(c,g)=>c&&xz(g,"mobile"),iae=(c,g,$,et,ot)=>{var at;const ht=c?{mobile:Lre((at=ot.mobile)!==null&&at!==void 0?at:{},g)}:{},_t=_z(["mobile"],PS(ht,ot)),St=cr.extend($,et,_t.options(),Fre(c,_t)?Dre(_t,"mobile"):{},{external_plugins:iZ(et,_t.options())});return Cz(c,_t,et,St)},aae=(c,g)=>{const $=J7(g);return iae(rZ||sZ,rZ,$,c,$)},zre=(c,g)=>$X(c,g),lZ=c=>{const g=(et,ot)=>{c.formatter.toggle(et,ot),c.nodeChanged()},$=et=>()=>{rn("left,center,right,justify".split(","),ot=>{et!==ot&&c.formatter.remove("align"+ot)}),et!=="none"&&g("align"+et)};c.editorCommands.addCommands({JustifyLeft:$("left"),JustifyCenter:$("center"),JustifyRight:$("right"),JustifyFull:$("justify"),JustifyNone:$("none")})},Bre=c=>{const g=$=>()=>{const et=c.selection,ot=et.isCollapsed()?[c.dom.getParent(et.getNode(),c.dom.isBlock)]:et.getSelectedBlocks();return wn(ot,at=>an(c.formatter.matchNode(at,$)))};c.editorCommands.addCommands({JustifyLeft:g("alignleft"),JustifyCenter:g("aligncenter"),JustifyRight:g("alignright"),JustifyFull:g("alignjustify")},"state")},$re=c=>{lZ(c),Bre(c)},Gre=c=>{c.editorCommands.addCommands({"Cut,Copy,Paste":g=>{const $=c.getDoc();let et;try{$.execCommand(g)}catch{et=!0}if(g==="paste"&&!$.queryCommandEnabled(g)&&(et=!0),et||!$.queryCommandSupported(g)){let ot=c.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Kr.os.isMacOS()||Kr.os.isiOS())&&(ot=ot.replace(/Ctrl\+/g,"+")),c.notificationManager.open({text:ot,type:"error"})}}})},lae=(c,g,$,et)=>{const ot=Qn.fromDom(c.getRoot());return eR(ot,Uo.fromRangeStart(g),et)?$=$.replace(/^ /,"&nbsp;"):$=$.replace(/^&nbsp;/," "),tR(ot,Uo.fromRangeEnd(g),et)?$=$.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):$=$.replace(/&nbsp;(<br( \/)?>)?$/," "),$},cae=c=>{if(typeof c!="string"){const g=cr.extend({paste:c.paste,data:{paste:c.paste}},c);return{content:c.content,details:g}}return{content:c,details:{}}},cZ=(c,g)=>{const $=c.selection,et=c.dom;return/^ | $/.test(g)?lae(et,$.getRng(),g,c.schema):g},wM=(c,g)=>{if(c.selection.isEditable()){const{content:$,details:et}=cae(g);jO(c,{...et,content:cZ(c,$),format:"html",set:!1,selection:!0}).each(ot=>{const at=vU(c,ot.content,et);UO(c,at,ot),c.addVisual()})}},jre=c=>{c.editorCommands.addCommands({mceCleanup:()=>{const g=c.selection.getBookmark();c.setContent(c.getContent()),c.selection.moveToBookmark(g)},insertImage:(g,$,et)=>{wM(c,c.dom.createHTML("img",{src:et}))},insertHorizontalRule:()=>{c.execCommand("mceInsertContent",!1,"<hr>")},insertText:(g,$,et)=>{wM(c,c.dom.encode(et))},insertHTML:(g,$,et)=>{wM(c,et)},mceInsertContent:(g,$,et)=>{wM(c,et)},mceSetContent:(g,$,et)=>{c.setContent(et)},mceReplaceContent:(g,$,et)=>{c.execCommand("mceInsertContent",!1,et.replace(/\{\$selection\}/g,c.selection.getContent({format:"text"})))},mceNewDocument:()=>{c.setContent(H4(c))}})},Ure={"font-size":"size","font-family":"face"},Hre=am("font"),uae=(c,g,$)=>{const et=at=>zv(at,c).orThunk(()=>Hre(at)?ba(Ure,c).bind(ht=>Vu(at,ht)):Yt.none()),ot=at=>_i(Qn.fromDom(g),at);return hR(Qn.fromDom($),at=>et(at),ot)},dae=c=>c.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),fae=(c,g)=>Yt.from($u.DOM.getStyle(g,c,!0)),uZ=c=>(g,$)=>Yt.from($).map(Qn.fromDom).filter(Xs).bind(et=>uae(c,g,et.dom).or(fae(c,et.dom))).getOr(""),hae=uZ("font-size"),Vre=It(dae,uZ("font-family")),MA=c=>F0(c.getBody()).bind(g=>{const $=g.container();return Yt.from(dr($)?$.parentNode:$)}),kz=c=>Yt.from(c.selection.getRng()).bind(g=>{const $=c.getBody();return g.startContainer===$&&g.startOffset===0?Yt.none():Yt.from(c.selection.getStart(!0))}),SN=(c,g)=>kz(c).orThunk(An(MA,c)).map(Qn.fromDom).filter(Xs).bind(g),EN=(c,g)=>SN(c,Vn(Yt.some,g)),Sz=(c,g)=>{if(/^[0-9.]+$/.test(g)){const $=parseInt(g,10);if($>=1&&$<=7){const et=WC(c),ot=pw(c);return ot.length>0?ot[$-1]||g:et[$-1]||g}else return g}else return g},dZ=c=>{const g=c.split(/\s*,\s*/);return Dn(g,$=>$.indexOf(" ")!==-1&&!(ks($,'"')||ks($,"'"))?`'${$}'`:$).join(",")},Wre=(c,g)=>{const $=Sz(c,g);c.formatter.toggle("fontname",{value:dZ($)}),c.nodeChanged()},qre=c=>EN(c,g=>Vre(c.getBody(),g.dom)).getOr(""),Zre=(c,g)=>{c.formatter.toggle("fontsize",{value:Sz(c,g)}),c.nodeChanged()},Kre=c=>EN(c,g=>hae(c.getBody(),g.dom)).getOr(""),Yre=c=>EN(c,g=>{const $=Qn.fromDom(c.getBody()),et=hR(g,at=>zv(at,"line-height"),An(_i,$)),ot=()=>{const at=parseFloat(bp(g,"line-height")),ht=parseFloat(bp(g,"font-size"));return String(at/ht)};return et.getOrThunk(ot)}).getOr(""),Xre=(c,g)=>{c.formatter.toggle("lineheight",{value:String(g)}),c.nodeChanged()},FS=c=>{const g=($,et)=>{c.formatter.toggle($,et),c.nodeChanged()};c.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":$=>{g($)},"ForeColor,HiliteColor":($,et,ot)=>{g($,{value:ot})},BackColor:($,et,ot)=>{g("hilitecolor",{value:ot})},FontName:($,et,ot)=>{Wre(c,ot)},FontSize:($,et,ot)=>{Zre(c,ot)},LineHeight:($,et,ot)=>{Xre(c,ot)},Lang:($,et,ot)=>{var at;g($,{value:ot.code,customValue:(at=ot.customCode)!==null&&at!==void 0?at:null})},RemoveFormat:$=>{c.formatter.remove($)},mceBlockQuote:()=>{g("blockquote")},FormatBlock:($,et,ot)=>{g(Et(ot)?ot:"p")},mceToggleFormat:($,et,ot)=>{g(ot)}})},Jre=c=>{const g=$=>c.formatter.match($);c.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":$=>g($),mceBlockQuote:()=>g("blockquote")},"state"),c.editorCommands.addQueryValueHandler("FontName",()=>qre(c)),c.editorCommands.addQueryValueHandler("FontSize",()=>Kre(c)),c.editorCommands.addQueryValueHandler("LineHeight",()=>Yre(c))},fZ=c=>{FS(c),Jre(c)},Qre=c=>{c.editorCommands.addCommands({mceAddUndoLevel:()=>{c.undoManager.add()},mceEndUndoLevel:()=>{c.undoManager.add()},Undo:()=>{c.undoManager.undo()},Redo:()=>{c.undoManager.redo()}})},AN=c=>{c.editorCommands.addCommands({Indent:()=>{J1(c)},Outdent:()=>{MS(c)}}),c.editorCommands.addCommands({Outdent:()=>kD(c)},"state")},ese=c=>{const g=($,et,ot)=>{if(c.mode.isReadOnly())return;const at=Et(ot)?{href:ot}:ot,ht=c.dom.getParent(c.selection.getNode(),"a");$t(at)&&Et(at.href)&&(at.href=at.href.replace(/ /g,"%20"),(!ht||!at.href)&&c.formatter.remove("link"),at.href&&c.formatter.apply("link",at,ht))};c.editorCommands.addCommands({unlink:()=>{if(c.selection.isEditable()){if(c.selection.isCollapsed()){const $=c.dom.getParent(c.selection.getStart(),"a");$&&c.dom.remove($,!0);return}c.formatter.remove("link")}},mceInsertLink:g,createLink:g})},tse=(c,g,$,et)=>{const ot=c.dom,at=_t=>ot.isBlock(_t)&&_t.parentElement===$,ht=at(g)?g:ot.getParent(et,at,$);return Yt.from(ht).map(Qn.fromDom)},hZ=(c,g)=>{if(c.mode.isReadOnly())return;const $=c.dom,et=c.selection.getRng(),ot=g?c.selection.getStart():c.selection.getEnd(),at=g?et.startContainer:et.endContainer,ht=uM($,at);if(!ht||!ht.isContentEditable)return;const _t=g?Su:ly,St=c0(c);tse(c,ot,ht,at).each(Lt=>{const Ht=f9(c,at,Lt.dom,ht,!1,St);_t(Lt,Qn.fromDom(Ht)),c.selection.setCursorLocation(Ht,0),c.dispatch("NewBlock",{newBlock:Ht}),a1(c,"insertParagraph")})},pZ=c=>hZ(c,!0),nse=c=>hZ(c,!1),ose=c=>{c.editorCommands.addCommands({InsertNewBlockBefore:()=>{pZ(c)},InsertNewBlockAfter:()=>{nse(c)}})},rse=c=>{c.editorCommands.addCommands({insertParagraph:()=>{JD(Yte,c)},mceInsertNewLine:(g,$,et)=>{gM(c,et)},InsertLineBreak:(g,$,et)=>{JD(lW,c)}})},sse=c=>{c.editorCommands.addCommands({mceSelectNodeDepth:(g,$,et)=>{let ot=0;c.dom.getParent(c.selection.getNode(),at=>Nr(at)&&ot++===et?(c.selection.select(at),!1):!0,c.getBody())},mceSelectNode:(g,$,et)=>{c.selection.select(et)},selectAll:()=>{const g=c.dom.getParent(c.selection.getStart(),Jo);if(g){const $=c.dom.createRng();$.selectNodeContents(g),c.selection.setRng($)}}})},Ez=c=>{c.editorCommands.addCommands({mceRemoveNode:(g,$,et)=>{const ot=et??c.selection.getNode();if(ot!==c.getBody()){const at=c.selection.getBookmark();c.dom.remove(ot,!0),c.selection.moveToBookmark(at)}},mcePrint:()=>{c.getWin().print()},mceFocus:(g,$,et)=>{AB(c,et===!0)},mceToggleVisualAid:()=>{c.hasVisual=!c.hasVisual,c.addVisual()}})},ise=c=>{$re(c),Gre(c),Qre(c),sse(c),jre(c),ese(c),AN(c),ose(c),rse(c),fZ(c),Ez(c)},ase=["toggleview"],Am=c=>mn(ase,c.toLowerCase());class gZ{constructor(g){this.commands={state:{},exec:{},value:{}},this.editor=g}execCommand(g,$=!1,et,ot){const at=this.editor,ht=g.toLowerCase(),_t=ot==null?void 0:ot.skip_focus;if(at.removed||(ht!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(ht)&&!_t?at.focus():UP(at)),at.dispatch("BeforeExecCommand",{command:g,ui:$,value:et}).isDefaultPrevented()))return!1;const Lt=this.commands.exec[ht];return Vt(Lt)?(Lt(ht,$,et),at.dispatch("ExecCommand",{command:g,ui:$,value:et}),!0):!1}queryCommandState(g){if(!Am(g)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const $=g.toLowerCase(),et=this.commands.state[$];return Vt(et)?et($):!1}queryCommandValue(g){if(!Am(g)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const $=g.toLowerCase(),et=this.commands.value[$];return Vt(et)?et($):""}addCommands(g,$="exec"){const et=this.commands;tr(g,(ot,at)=>{rn(at.toLowerCase().split(","),ht=>{et[$][ht]=ot})})}addCommand(g,$,et){const ot=g.toLowerCase();this.commands.exec[ot]=(at,ht,_t)=>$.call(et??this.editor,ht,_t)}queryCommandSupported(g){const $=g.toLowerCase();return!!this.commands.exec[$]}addQueryStateHandler(g,$,et){this.commands.state[g.toLowerCase()]=()=>$.call(et??this.editor)}addQueryValueHandler(g,$,et){this.commands.value[g.toLowerCase()]=()=>$.call(et??this.editor)}}const lse=(c,g,$)=>{K_(c,g)&&!$?_1(c,g):$&&Fy(c,g)},CM=(c,g,$)=>{try{c.getDoc().execCommand(g,!1,String($))}catch{}},Az=(c,g)=>{c.dom.contentEditable="true"},Tz=c=>{Yt.from(c.selection.getNode()).each(g=>{g.removeAttribute("data-mce-selected")})},cse=c=>{c.selection.setRng(c.selection.getRng())},use=(c,g)=>{CM(c,"StyleWithCSS",g),CM(c,"enableInlineTableEditing",g),CM(c,"enableObjectResizing",g)},dse=c=>{c.readonly=!0,c.selection.controlSelection.hideResizeRect(),c._selectionOverrides.hideFakeCaret(),Tz(c)},fse=(c,g)=>{c.readonly=!1,c.hasEditableRoot()&&Az(g),use(c,!1),EB(c)&&c.focus(),cse(c),c.nodeChanged()},hse=(c,g)=>{const $=Qn.fromDom(c.getBody());lse($,"mce-content-readonly",g),g?(dse(c),c.hasEditableRoot()&&Az($)):fse(c,$)},n3=c=>c.readonly,pse=c=>c.type==="click",gse=["copy"],o3=c=>mn(gse,c.type),Ox=(c,g)=>iv(g,"a",et=>_i(et,Qn.fromDom(c.getBody()))).bind(et=>Vu(et,"href")),mse=(c,g)=>{if(pse(g)&&!Br.metaKeyPressed(g)){const $=Qn.fromDom(g.target);Ox(c,$).each(et=>{if(g.preventDefault(),/^#/.test(et)){const ot=c.dom.select(`${et},[name="${Hr(et,"#")}"]`);ot.length&&c.selection.scrollIntoView(ot[0],!0)}else window.open(et,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else o3(g)&&c.dispatch(g.type,g)},yse=c=>{c.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",g=>{n3(c)&&g.preventDefault()}),c.on("BeforeExecCommand",g=>{(g.command==="Undo"||g.command==="Redo")&&n3(c)&&g.preventDefault()}),c.on("input",g=>{if(!g.isComposing&&n3(c)){const $=c.undoManager.add();an($)&&c.undoManager.undo()}}),c.on("compositionend",()=>{if(n3(c)){const g=c.undoManager.add();an(g)&&c.undoManager.undo()}})},bse=cr.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Iz{static isNative(g){return!!bse[g.toLowerCase()]}constructor(g){this.bindings={},this.settings=g||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||On}fire(g,$){return this.dispatch(g,$)}dispatch(g,$){const et=g.toLowerCase(),ot=c2(et,$??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(ot);const at=this.bindings[et];if(at)for(let ht=0,_t=at.length;ht<_t;ht++){const St=at[ht];if(!St.removed){if(St.once&&this.off(et,St.func),ot.isImmediatePropagationStopped())return ot;if(St.func.call(this.scope,ot)===!1)return ot.preventDefault(),ot}}return ot}on(g,$,et,ot){if($===!1&&($=On),$){const at={func:$,removed:!1};ot&&cr.extend(at,ot);const ht=g.toLowerCase().split(" ");let _t=ht.length;for(;_t--;){const St=ht[_t];let Lt=this.bindings[St];Lt||(Lt=[],this.toggleEvent(St,!0)),et?Lt=[at,...Lt]:Lt=[...Lt,at],this.bindings[St]=Lt}}return this}off(g,$){if(g){const et=g.toLowerCase().split(" ");let ot=et.length;for(;ot--;){const at=et[ot];let ht=this.bindings[at];if(!at)return tr(this.bindings,(_t,St)=>{this.toggleEvent(St,!1),delete this.bindings[St]}),this;if(ht){if(!$)ht.length=0;else{const _t=Nn(ht,St=>St.func===$);ht=_t.fail,this.bindings[at]=ht,rn(_t.pass,St=>{St.removed=!0})}ht.length||(this.toggleEvent(g,!1),delete this.bindings[at])}}}else tr(this.bindings,(et,ot)=>{this.toggleEvent(ot,!1)}),this.bindings={};return this}once(g,$,et){return this.on(g,$,et,{once:!0})}has(g){g=g.toLowerCase();const $=this.bindings[g];return!(!$||$.length===0)}}const kM=c=>(c._eventDispatcher||(c._eventDispatcher=new Iz({scope:c,toggleEvent:(g,$)=>{Iz.isNative(g)&&c.toggleNativeEvent&&c.toggleNativeEvent(g,$)}})),c._eventDispatcher),Rz={fire(c,g,$){return this.dispatch(c,g,$)},dispatch(c,g,$){const et=this;if(et.removed&&c!=="remove"&&c!=="detach")return c2(c.toLowerCase(),g??{},et);const ot=kM(et).dispatch(c,g);if($!==!1&&et.parent){let at=et.parent();for(;at&&!ot.isPropagationStopped();)at.dispatch(c,ot,!1),at=at.parent?at.parent():void 0}return ot},on(c,g,$){return kM(this).on(c,g,$)},off(c,g){return kM(this).off(c,g)},once(c,g){return kM(this).once(c,g)},hasEventListeners(c){return kM(this).has(c)}},TN=$u.DOM;let PA;const IN=(c,g)=>{if(g==="selectionchange")return c.getDoc();if(!c.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(g))return c.getDoc().documentElement;const $=N0(c);return $?(c.eventRoot||(c.eventRoot=TN.select($)[0]),c.eventRoot):c.getBody()},pae=c=>!c.hidden,mZ=(c,g,$)=>{pae(c)?c.dispatch(g,$):n3(c)&&mse(c,$)},yZ=(c,g)=>{if(c.delegates||(c.delegates={}),c.delegates[g]||c.removed)return;const $=IN(c,g);if(N0(c)){if(PA||(PA={},c.editorManager.on("removeEditor",()=>{c.editorManager.activeEditor||PA&&(tr(PA,(ot,at)=>{c.dom.unbind(IN(c,at))}),PA=null)})),PA[g])return;const et=ot=>{const at=ot.target,ht=c.editorManager.get();let _t=ht.length;for(;_t--;){const St=ht[_t].getBody();(St===at||TN.isChildOf(at,St))&&mZ(ht[_t],g,ot)}};PA[g]=et,TN.bind($,g,et)}else{const et=ot=>{mZ(c,g,ot)};TN.bind($,g,et),c.delegates[g]=et}},bZ={...Rz,bindPendingEventDelegates(){const c=this;cr.each(c._pendingNativeEvents,g=>{yZ(c,g)})},toggleNativeEvent(c,g){const $=this;c==="focus"||c==="blur"||$.removed||(g?$.initialized?yZ($,c):$._pendingNativeEvents?$._pendingNativeEvents.push(c):$._pendingNativeEvents=[c]:$.initialized&&$.delegates&&($.dom.unbind(IN($,c),c,$.delegates[c]),delete $.delegates[c]))},unbindAllNativeEvents(){const c=this,g=c.getBody(),$=c.dom;c.delegates&&(tr(c.delegates,(et,ot)=>{c.dom.unbind(IN(c,ot),ot,et)}),delete c.delegates),!c.inline&&g&&$&&(g.onload=null,$.unbind(c.getWin()),$.unbind(c.getDoc())),$&&($.unbind(g),$.unbind(c.getContainer()))}},vse=c=>Et(c)?{value:c.split(/[ ,]/),valid:!0}:hn(c,Et)?{value:c,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},_se=c=>{const g=(()=>{switch(c){case"array":return Zt;case"boolean":return Jt;case"function":return Vt;case"number":return ao;case"object":return $t;case"string":return Et;case"string[]":return vse;case"object[]":return $=>hn($,$t);case"regexp":return $=>Mt($,RegExp);default:return _o}})();return $=>Mz($,g,`The value must be a ${c}.`)},xse=c=>Et(c.processor),vZ=(c,g)=>{const $=Al(g.message)?"":`. ${g.message}`;return c+$},_Z=c=>c.valid,Mz=(c,g,$="")=>{const et=g(c);return Jt(et)?et?{value:c,valid:!0}:{valid:!1,message:$}:et},wse=(c,g,$)=>{if(!dn(g)){const et=Mz(g,$);if(_Z(et))return et.value;console.error(vZ(`Invalid default value passed for the "${c}" option`,et))}},Cse=(c,g,$=g)=>{const et={},ot={},at=(gn,kn,yn)=>{const Rn=Mz(kn,yn);return _Z(Rn)?(ot[gn]=Rn.value,!0):(console.warn(vZ(`Invalid value passed for the ${gn} option`,Rn)),!1)},ht=(gn,kn)=>{const yn=xse(kn)?_se(kn.processor):kn.processor,Rn=wse(gn,kn.default,yn);et[gn]={...kn,default:Rn,processor:yn},ba(ot,gn).orThunk(()=>ba(g,gn)).each(ho=>at(gn,ho,yn))},_t=gn=>Jr(et,gn);return{register:ht,isRegistered:_t,get:gn=>ba(ot,gn).orThunk(()=>ba(et,gn).map(kn=>kn.default)).getOrUndefined(),set:(gn,kn)=>{if(_t(gn)){const yn=et[gn];return yn.immutable?(console.error(`"${gn}" is an immutable option and cannot be updated`),!1):at(gn,kn,yn.processor)}else return console.warn(`"${gn}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:gn=>{const kn=_t(gn);return kn&&delete ot[gn],kn},isSet:gn=>Jr(ot,gn),debug:()=>{try{console.log(JSON.parse(JSON.stringify($,(gn,kn)=>Jt(kn)||ao(kn)||Et(kn)||Nt(kn)||Zt(kn)||Xt(kn)?kn:Object.prototype.toString.call(kn))))}catch(gn){console.error(gn)}}}},kse=["design","readonly"],xZ=(c,g,$,et)=>{const ot=$[g.get()],at=$[et];try{at.activate()}catch(ht){console.error(`problem while activating editor mode ${et}:`,ht);return}ot.deactivate(),ot.editorReadOnly!==at.editorReadOnly&&hse(c,at.editorReadOnly),g.set(et),h8(c,et)},Sse=(c,g,$,et)=>{if(et!==$.get()){if(!Jr(g,et))throw new Error(`Editor mode '${et}' is invalid`);c.initialized?xZ(c,$,g,et):c.on("init",()=>xZ(c,$,g,et))}},Ese=(c,g,$)=>{if(mn(kse,g))throw new Error(`Cannot override default mode ${g}`);return{...c,[g]:{...$,deactivate:()=>{try{$.deactivate()}catch(et){console.error(`problem while deactivating editor mode ${g}:`,et)}}}}},Ase=c=>{const g=Eu("design"),$=Eu({design:{activate:fn,deactivate:fn,editorReadOnly:!1},readonly:{activate:fn,deactivate:fn,editorReadOnly:!0}});return yse(c),{isReadOnly:()=>n3(c),set:et=>Sse(c,$.get(),g,et),get:()=>g.get(),register:(et,ot)=>{$.set(Ese($.get(),et,ot))}}},Pz=cr.each,Oz=cr.explode,Tse={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},wZ=cr.makeMap("alt,ctrl,shift,meta,access"),Ise=c=>c in wZ,Rse=c=>{const g={},$=Kr.os.isMacOS()||Kr.os.isiOS();Pz(Oz(c.toLowerCase(),"+"),at=>{Ise(at)?g[at]=!0:/^[0-9]{2,}$/.test(at)?g.keyCode=parseInt(at,10):(g.charCode=at.charCodeAt(0),g.keyCode=Tse[at]||at.toUpperCase().charCodeAt(0))});const et=[g.keyCode];let ot;for(ot in wZ)g[ot]?et.push(ot):g[ot]=!1;return g.id=et.join(","),g.access&&(g.alt=!0,$?g.ctrl=!0:g.shift=!0),g.meta&&($?g.meta=!0:(g.ctrl=!0,g.meta=!1)),g};class CZ{constructor(g){this.shortcuts={},this.pendingPatterns=[],this.editor=g;const $=this;g.on("keyup keypress keydown",et=>{($.hasModifier(et)||$.isFunctionKey(et))&&!et.isDefaultPrevented()&&(Pz($.shortcuts,ot=>{$.matchShortcut(et,ot)&&($.pendingPatterns=ot.subpatterns.slice(0),et.type==="keydown"&&$.executeShortcutAction(ot))}),$.matchShortcut(et,$.pendingPatterns[0])&&($.pendingPatterns.length===1&&et.type==="keydown"&&$.executeShortcutAction($.pendingPatterns[0]),$.pendingPatterns.shift()))})}add(g,$,et,ot){const at=this,ht=at.normalizeCommandFunc(et);return Pz(Oz(cr.trim(g)),_t=>{const St=at.createShortcut(_t,$,ht,ot);at.shortcuts[St.id]=St}),!0}remove(g){const $=this.createShortcut(g);return this.shortcuts[$.id]?(delete this.shortcuts[$.id],!0):!1}normalizeCommandFunc(g){const $=this,et=g;return typeof et=="string"?()=>{$.editor.execCommand(et,!1,null)}:cr.isArray(et)?()=>{$.editor.execCommand(et[0],et[1],et[2])}:et}createShortcut(g,$,et,ot){const at=cr.map(Oz(g,">"),Rse);return at[at.length-1]=cr.extend(at[at.length-1],{func:et,scope:ot||this.editor}),cr.extend(at[0],{desc:this.editor.translate($),subpatterns:at.slice(1)})}hasModifier(g){return g.altKey||g.ctrlKey||g.metaKey}isFunctionKey(g){return g.type==="keydown"&&g.keyCode>=112&&g.keyCode<=123}matchShortcut(g,$){return!$||$.ctrl!==g.ctrlKey||$.meta!==g.metaKey||$.alt!==g.altKey||$.shift!==g.shiftKey?!1:g.keyCode===$.keyCode||g.charCode&&g.charCode===$.charCode?(g.preventDefault(),!0):!1}executeShortcutAction(g){return g.func?g.func.call(g.scope):null}}const kZ=()=>{const c={},g={},$={},et={},ot={},at={},ht={},_t={},St={},Lt=(Qt,gn)=>(kn,yn)=>{Qt[kn.toLowerCase()]={...yn,type:gn}},Ht=(Qt,gn)=>et[Qt.toLowerCase()]=gn,qt=(Qt,gn)=>ht[Qt.toLowerCase()]=gn;return{addButton:Lt(c,"button"),addGroupToolbarButton:Lt(c,"grouptoolbarbutton"),addToggleButton:Lt(c,"togglebutton"),addMenuButton:Lt(c,"menubutton"),addSplitButton:Lt(c,"splitbutton"),addMenuItem:Lt(g,"menuitem"),addNestedMenuItem:Lt(g,"nestedmenuitem"),addToggleMenuItem:Lt(g,"togglemenuitem"),addAutocompleter:Lt($,"autocompleter"),addContextMenu:Lt(ot,"contextmenu"),addContextToolbar:Lt(at,"contexttoolbar"),addContextForm:Lt(at,"contextform"),addSidebar:Lt(_t,"sidebar"),addView:Lt(St,"views"),addIcon:Ht,addContext:qt,getAll:()=>({buttons:c,menuItems:g,icons:et,popups:$,contextMenus:ot,contextToolbars:at,sidebars:_t,views:St,contexts:ht})}},Mse=()=>{const c=kZ();return{addAutocompleter:c.addAutocompleter,addButton:c.addButton,addContextForm:c.addContextForm,addContextMenu:c.addContextMenu,addContextToolbar:c.addContextToolbar,addIcon:c.addIcon,addMenuButton:c.addMenuButton,addMenuItem:c.addMenuItem,addNestedMenuItem:c.addNestedMenuItem,addSidebar:c.addSidebar,addSplitButton:c.addSplitButton,addToggleButton:c.addToggleButton,addGroupToolbarButton:c.addGroupToolbarButton,addToggleMenuItem:c.addToggleMenuItem,addView:c.addView,addContext:c.addContext,getAll:c.getAll}},OA=$u.DOM,SZ=cr.extend,Pse=cr.each;class RN{constructor(g,$,et){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=et,this.documentBaseUrl=et.documentBaseURL,SZ(this,bZ);const ot=this;this.id=g,this.hidden=!1;const at=aae(et.defaultOptions,$);this.options=Cse(ot,at,$),E4(ot);const ht=this.options.get;ht("deprecation_warnings")&&cJ($,at);const _t=ht("suffix");_t&&(et.suffix=_t),this.suffix=et.suffix;const St=ht("base_url");St&&et._setBaseUrl(St),this.baseUri=et.baseURI;const Lt=bE(ot);Lt&&(E_.ScriptLoader._setReferrerPolicy(Lt),$u.DOM.styleSheetLoader._setReferrerPolicy(Lt));const Ht=B4(ot);an(Ht)&&$u.DOM.styleSheetLoader._setContentCssCors(Ht),D0.languageLoad=ht("language_load"),D0.baseURL=et.baseURL,this.setDirty(!1),this.documentBaseURI=new G_(T4(ot),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=I2(ot),this.hasVisual=a5(ot),this.shortcuts=new CZ(this),this.editorCommands=new gZ(this),ise(this);const qt=ht("cache_suffix");qt&&(Kr.cacheSuffix=qt.replace(/^[\?\&]+/,"")),this.ui={registry:Mse(),styleSheetLoader:void 0,show:fn,hide:fn,setEnabled:fn,isEnabled:_o},this.mode=Ase(ot),et.dispatch("SetupEditor",{editor:this});const Qt=FL(ot);Vt(Qt)&&Qt.call(ot,ot)}render(){Mre(this)}focus(g){this.execCommand("mceFocus",!1,g)}hasFocus(){return hI(this)}translate(g){return L1.translate(g)}getParam(g,$,et){const ot=this.options;return ot.isRegistered(g)||(an(et)?ot.register(g,{processor:et,default:$}):ot.register(g,{processor:_o,default:$})),!ot.isSet(g)&&!dn($)?$:ot.get(g)}hasPlugin(g,$){return mn(CE(this),g)?$?TI.get(g)!==void 0:!0:!1}nodeChanged(g){this._nodeChangeDispatcher.nodeChanged(g)}addCommand(g,$,et){this.editorCommands.addCommand(g,$,et)}addQueryStateHandler(g,$,et){this.editorCommands.addQueryStateHandler(g,$,et)}addQueryValueHandler(g,$,et){this.editorCommands.addQueryValueHandler(g,$,et)}addShortcut(g,$,et,ot){this.shortcuts.add(g,$,et,ot)}execCommand(g,$,et,ot){return this.editorCommands.execCommand(g,$,et,ot)}queryCommandState(g){return this.editorCommands.queryCommandState(g)}queryCommandValue(g){return this.editorCommands.queryCommandValue(g)}queryCommandSupported(g){return this.editorCommands.queryCommandSupported(g)}show(){const g=this;g.hidden&&(g.hidden=!1,g.inline?g.getBody().contentEditable="true":(OA.show(g.getContainer()),OA.hide(g.id)),g.load(),g.dispatch("show"))}hide(){const g=this;g.hidden||(g.save(),g.inline?(g.getBody().contentEditable="false",g===g.editorManager.focusedEditor&&(g.editorManager.focusedEditor=null)):(OA.hide(g.getContainer()),OA.setStyle(g.id,"display",g.orgDisplay)),g.hidden=!0,g.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(g,$){this.dispatch("ProgressState",{state:g,time:$})}load(g={}){const $=this,et=$.getElement();if($.removed)return"";if(et){const ot={...g,load:!0},at=cp(et)?et.value:et.innerHTML,ht=$.setContent(at,ot);return ot.no_events||$.dispatch("LoadContent",{...ot,element:et}),ht}else return""}save(g={}){const $=this;let et=$.getElement();if(!et||!$.initialized||$.removed)return"";const ot={...g,save:!0,element:et};let at=$.getContent(ot);const ht={...ot,content:at};if(ht.no_events||$.dispatch("SaveContent",ht),ht.format==="raw"&&$.dispatch("RawSaveContent",ht),at=ht.content,cp(et))et.value=at;else{(g.is_removing||!$.inline)&&(et.innerHTML=at);const _t=OA.getParent($.id,"form");_t&&Pse(_t.elements,St=>St.name===$.id?(St.value=at,!1):!0)}return ht.element=ot.element=et=null,ht.set_dirty!==!1&&$.setDirty(!1),at}setContent(g,$){return IF(this,g,$)}getContent(g){return JO(this,g)}insertContent(g,$){$&&(g=SZ({content:g},$)),this.execCommand("mceInsertContent",!1,g)}resetContent(g){g===void 0?IF(this,this.startContent,{format:"raw"}):IF(this,g),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(g){const $=!this.isNotDirty;this.isNotDirty=!g,g&&g!==$&&this.dispatch("dirty")}getContainer(){const g=this;return g.container||(g.container=g.editorContainer||OA.get(g.id+"_parent")),g.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=OA.get(this.id)),this.targetElm}getWin(){const g=this;if(!g.contentWindow){const $=g.iframeElement;$&&(g.contentWindow=$.contentWindow)}return g.contentWindow}getDoc(){const g=this;if(!g.contentDocument){const $=g.getWin();$&&(g.contentDocument=$.document)}return g.contentDocument}getBody(){var g,$;const et=this.getDoc();return($=(g=this.bodyElement)!==null&&g!==void 0?g:et==null?void 0:et.body)!==null&&$!==void 0?$:null}convertURL(g,$,et){const ot=this,at=ot.options.get,ht=BL(ot);if(Vt(ht))return ht.call(ot,g,et,!0,$);if(!at("convert_urls")||et==="link"||$t(et)&&et.nodeName==="LINK"||g.indexOf("file:")===0||g.length===0)return g;const _t=new G_(g);return _t.protocol!=="http"&&_t.protocol!=="https"&&_t.protocol!==""?g:at("relative_urls")?ot.documentBaseURI.toRelative(g):(g=ot.documentBaseURI.toAbsolute(g,at("remove_script_host")),g)}addVisual(g){zre(this,g)}setEditableRoot(g){bz(this,g)}hasEditableRoot(){return Pre(this)}remove(){fJ(this)}destroy(g){hJ(this,g)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const r3=$u.DOM,MN=cr.each;let EZ=!1,SM,Jy=[];const PN=c=>{const g=c.type;MN(zS.get(),$=>{switch(g){case"scroll":$.dispatch("ScrollWindow",c);break;case"resize":$.dispatch("ResizeWindow",c);break}})},AZ=c=>{if(c!==EZ){const g=$u.DOM;c?(g.bind(window,"resize",PN),g.bind(window,"scroll",PN)):(g.unbind(window,"resize",PN),g.unbind(window,"scroll",PN)),EZ=c}},TZ=c=>{const g=Jy;return Jy=zn(Jy,$=>c!==$),zS.activeEditor===c&&(zS.activeEditor=Jy.length>0?Jy[0]:null),zS.focusedEditor===c&&(zS.focusedEditor=null),g.length!==Jy.length},Ose=c=>{c&&c.initialized&&!(c.getContainer()||c.getBody()).parentNode&&(TZ(c),c.unbindAllNativeEvents(),c.destroy(!0),c.removed=!0)},Dse=document.compatMode!=="CSS1Compat",zS={...Rz,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"5.1",releaseDate:"TBD",i18n:L1,activeEditor:null,focusedEditor:null,setup(){const c=this;let g="",$="",et=G_.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(et)&&(et=et.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(et)||(et+="/"));const ot=window.tinymce||window.tinyMCEPreInit;if(ot)g=ot.base||ot.baseURL,$=ot.suffix;else{const at=document.getElementsByTagName("script");for(let ht=0;ht<at.length;ht++){const _t=at[ht].src||"";if(_t==="")continue;const St=_t.substring(_t.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(_t)){St.indexOf(".min")!==-1&&($=".min"),g=_t.substring(0,_t.lastIndexOf("/"));break}}if(!g&&document.currentScript){const ht=document.currentScript.src;ht.indexOf(".min")!==-1&&($=".min"),g=ht.substring(0,ht.lastIndexOf("/"))}}c.baseURL=new G_(et).toAbsolute(g),c.documentBaseURL=et,c.baseURI=new G_(c.baseURL),c.suffix=$,eK(c)},overrideDefaults(c){const g=c.base_url;g&&this._setBaseUrl(g);const $=c.suffix;$&&(this.suffix=$),this.defaultOptions=c;const et=c.plugin_base_urls;et!==void 0&&tr(et,(ot,at)=>{D0.PluginManager.urls[at]=ot})},init(c){const g=this;let $;const et=cr.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),ot=(Ht,qt)=>Ht.inline&&qt.tagName.toLowerCase()in et,at=Ht=>{let qt=Ht.id;return qt||(qt=ba(Ht,"name").filter(Qt=>!r3.get(Qt)).getOrThunk(r3.uniqueId),Ht.setAttribute("id",qt)),qt},ht=Ht=>{const qt=c[Ht];if(qt)return qt.apply(g,[])},_t=Ht=>Kr.browser.isIE()||Kr.browser.isEdge()?(oD("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):Dse?(oD("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Et(Ht.selector)?r3.select(Ht.selector):an(Ht.target)?[Ht.target]:[];let St=Ht=>{$=Ht};const Lt=()=>{let Ht=0;const qt=[];let Qt;const gn=(kn,yn,Rn)=>{const so=new RN(kn,yn,g);qt.push(so),so.on("init",()=>{++Ht===Qt.length&&St(qt)}),so.targetElm=so.targetElm||Rn,so.render()};r3.unbind(window,"ready",Lt),ht("onpageload"),Qt=_l(_t(c)),cr.each(Qt,kn=>{Ose(g.get(kn.id))}),Qt=cr.grep(Qt,kn=>!g.get(kn.id)),Qt.length===0?St([]):MN(Qt,kn=>{ot(c,kn)?oD("Could not initialize inline editor on invalid inline target element",kn):gn(at(kn),c,kn)})};return r3.bind(window,"ready",Lt),new Promise(Ht=>{$?Ht($):St=qt=>{Ht(qt)}})},get(c){return arguments.length===0?Jy.slice(0):Et(c)?Jn(Jy,g=>g.id===c).getOr(null):ao(c)&&Jy[c]?Jy[c]:null},add(c){const g=this,$=g.get(c.id);return $===c||($===null&&Jy.push(c),AZ(!0),g.activeEditor=c,g.dispatch("AddEditor",{editor:c}),SM||(SM=et=>{const ot=g.dispatch("BeforeUnload");if(ot.returnValue)return et.preventDefault(),et.returnValue=ot.returnValue,ot.returnValue},window.addEventListener("beforeunload",SM))),c},createEditor(c,g){return this.add(new RN(c,g,this))},remove(c){const g=this;let $;if(!c){for(let et=Jy.length-1;et>=0;et--)g.remove(Jy[et]);return}if(Et(c)){MN(r3.select(c),et=>{$=g.get(et.id),$&&g.remove($)});return}return $=c,Nt(g.get($.id))?null:(TZ($)&&g.dispatch("RemoveEditor",{editor:$}),Jy.length===0&&window.removeEventListener("beforeunload",SM),$.remove(),AZ(Jy.length>0),$)},execCommand(c,g,$){var et;const ot=this,at=$t($)?(et=$.id)!==null&&et!==void 0?et:$.index:$;switch(c){case"mceAddEditor":{if(!ot.get(at)){const ht=$.options;new RN(at,ht,ot).render()}return!0}case"mceRemoveEditor":{const ht=ot.get(at);return ht&&ht.remove(),!0}case"mceToggleEditor":{const ht=ot.get(at);return ht?(ht.isHidden()?ht.show():ht.hide(),!0):(ot.execCommand("mceAddEditor",!1,$),!0)}}return ot.activeEditor?ot.activeEditor.execCommand(c,g,$):!1},triggerSave:()=>{MN(Jy,c=>{c.save()})},addI18n:(c,g)=>{L1.add(c,g)},translate:c=>L1.translate(c),setActive(c){const g=this.activeEditor;this.activeEditor!==c&&(g&&g.dispatch("deactivate",{relatedTarget:c}),c.dispatch("activate",{relatedTarget:g})),this.activeEditor=c},_setBaseUrl(c){this.baseURL=new G_(this.documentBaseURL).toAbsolute(c.replace(/\/+$/,"")),this.baseURI=new G_(this.baseURL)}};zS.setup();const IZ=(()=>{const c=wm(),g=at=>({items:at,types:Zr(at),getType:ht=>ba(at,ht).getOrUndefined()}),$=at=>{c.set(at)},et=()=>c.get().getOrUndefined(),ot=c.clear;return{FakeClipboardItem:g,write:$,read:et,clear:ot}})(),Nse=Math.min,DA=Math.max,ON=Math.round,Dz=(c,g,$)=>{let et=g.x,ot=g.y;const at=c.w,ht=c.h,_t=g.w,St=g.h,Lt=($||"").split("");return Lt[0]==="b"&&(ot+=St),Lt[1]==="r"&&(et+=_t),Lt[0]==="c"&&(ot+=ON(St/2)),Lt[1]==="c"&&(et+=ON(_t/2)),Lt[3]==="b"&&(ot-=ht),Lt[4]==="r"&&(et-=at),Lt[3]==="c"&&(ot-=ON(ht/2)),Lt[4]==="c"&&(et-=ON(at/2)),s3(et,ot,at,ht)},Lse=(c,g,$,et)=>{for(let ot=0;ot<et.length;ot++){const at=Dz(c,g,et[ot]);if(at.x>=$.x&&at.x+at.w<=$.w+$.x&&at.y>=$.y&&at.y+at.h<=$.h+$.y)return et[ot]}return null},Fse=(c,g,$)=>s3(c.x-g,c.y-$,c.w+g*2,c.h+$*2),zse=(c,g)=>{const $=DA(c.x,g.x),et=DA(c.y,g.y),ot=Nse(c.x+c.w,g.x+g.w),at=Nse(c.y+c.h,g.y+g.h);return ot-$<0||at-et<0?null:s3($,et,ot-$,at-et)},Bse=(c,g,$)=>{let et=c.x,ot=c.y,at=c.x+c.w,ht=c.y+c.h;const _t=g.x+g.w,St=g.y+g.h,Lt=DA(0,g.x-et),Ht=DA(0,g.y-ot),qt=DA(0,at-_t),Qt=DA(0,ht-St);return et+=Lt,ot+=Ht,$&&(at+=Lt,ht+=Ht,et-=qt,ot-=Qt),at-=qt,ht-=Qt,s3(et,ot,at-et,ht-ot)},s3=(c,g,$,et)=>({x:c,y:g,w:$,h:et}),Nz={inflate:Fse,relativePosition:Dz,findBestRelativePosition:Lse,intersect:zse,clamp:Bse,create:s3,fromClientRect:c=>s3(c.left,c.top,c.width,c.height)},Lz=(c,g,$=1e3)=>{let et=!1,ot=null;const at=Lt=>(...Ht)=>{et||(et=!0,ot!==null&&(clearTimeout(ot),ot=null),Lt.apply(null,Ht))},ht=at(c),_t=at(g);return{start:(...Lt)=>{!et&&ot===null&&(ot=setTimeout(()=>_t.apply(null,Lt),$))},resolve:ht,reject:_t}},RZ=(()=>{const c={},g={},$={};return{load:(St,Lt)=>{const Ht=`Script at URL "${Lt}" failed to load`,qt=`Script at URL "${Lt}" did not call \`tinymce.Resource.add('${St}', data)\` within 1 second`;if(c[St]!==void 0)return c[St];{const Qt=new Promise((gn,kn)=>{const yn=Lz(gn,kn);g[St]=yn.resolve,E_.ScriptLoader.loadScript(Lt).then(()=>yn.start(qt),()=>yn.reject(Ht))});return c[St]=Qt,Qt}},add:(St,Lt)=>{g[St]!==void 0&&(g[St](Lt),delete g[St]),c[St]=Promise.resolve(Lt),$[St]=Lt},has:St=>St in $,get:St=>$[St],unload:St=>{delete c[St],delete $[St]}}})(),$se=()=>(()=>{let c={},g=[];const $={getItem:et=>{const ot=c[et];return ot||null},setItem:(et,ot)=>{g.push(et),c[et]=String(ot)},key:et=>g[et],removeItem:et=>{g=g.filter(ot=>ot===et),delete c[et]},clear:()=>{g=[],c={}},length:0};return Object.defineProperty($,"length",{get:()=>g.length,configurable:!1,enumerable:!1}),$})();let EM;try{const c="__storage_test__";EM=window.localStorage,EM.setItem(c,c),EM.removeItem(c)}catch{EM=$se()}var Gse=EM;const jse={geom:{Rect:Nz},util:{Delay:Jv,Tools:cr,VK:Br,URI:G_,EventDispatcher:Iz,Observable:Rz,I18n:L1,LocalStorage:Gse,ImageUploader:LF},dom:{EventUtils:u2,TreeWalker:um,TextSeeker:h2,DOMUtils:$u,ScriptLoader:E_,RangeUtils:ar,Serializer:AF,StyleSheetLoader:C_,ControlSelection:V5,BookmarkManager:H2,Selection:CU,Event:u2.Event},html:{Styles:ew,Entities:Xx,Node:Iy,Schema:yu,DomParser:uA,Writer:V8,Serializer:uS},Env:Kr,AddOnManager:D0,Annotator:G1,Formatter:UU,UndoManager:$F,EditorCommands:gZ,WindowManager:PF,NotificationManager:DU,EditorObservable:bZ,Shortcuts:CZ,Editor:RN,FocusManager:N8,EditorManager:zS,DOM:$u.DOM,ScriptLoader:E_.ScriptLoader,PluginManager:TI,ThemeManager:Ax,ModelManager:AI,IconManager:EI,Resource:RZ,FakeClipboard:IZ,trim:cr.trim,isArray:cr.isArray,is:cr.is,toArray:cr.toArray,makeMap:cr.makeMap,each:cr.each,map:cr.map,grep:cr.grep,inArray:cr.inArray,extend:cr.extend,walk:cr.walk,resolve:cr.resolve,explode:cr.explode,_addCacheSuffix:cr._addCacheSuffix},MZ=cr.extend(zS,jse),Use=c=>{try{o.exports=c}catch{}};(c=>{window.tinymce=c,window.tinyMCE=c})(MZ),Use(MZ)})()})(tinymce$1);(function(){var o=tinymce.util.Tools.resolve("tinymce.ModelManager");const e=(it,ft,vt)=>{var Ct;return vt(it,ft.prototype)?!0:((Ct=it.constructor)===null||Ct===void 0?void 0:Ct.name)===ft.name},s=it=>{const ft=typeof it;return it===null?"null":ft==="object"&&Array.isArray(it)?"array":ft==="object"&&e(it,String,(vt,Ct)=>Ct.isPrototypeOf(vt))?"string":ft},a=it=>ft=>s(ft)===it,d=it=>ft=>typeof ft===it,b=it=>ft=>it===ft,_=a("string"),_e=a("object"),nt=a("array"),rt=b(null),ct=d("boolean"),dt=b(void 0),pt=it=>it==null,bt=it=>!pt(it),xt=d("function"),wt=d("number"),Tt=()=>{},Rt=(it,ft)=>(...vt)=>it(ft.apply(null,vt)),Mt=(it,ft)=>vt=>it(ft(vt)),Et=it=>()=>it,$t=it=>it,Xt=(it,ft)=>it===ft;function Zt(it,...ft){return(...vt)=>{const Ct=ft.concat(vt);return it.apply(null,Ct)}}const Nt=it=>ft=>!it(ft),Jt=it=>()=>{throw new Error(it)},dn=it=>it(),Pn=Et(!1),an=Et(!0);class Vt{constructor(ft,vt){this.tag=ft,this.value=vt}static some(ft){return new Vt(!0,ft)}static none(){return Vt.singletonNone}fold(ft,vt){return this.tag?vt(this.value):ft()}isSome(){return this.tag}isNone(){return!this.tag}map(ft){return this.tag?Vt.some(ft(this.value)):Vt.none()}bind(ft){return this.tag?ft(this.value):Vt.none()}exists(ft){return this.tag&&ft(this.value)}forall(ft){return!this.tag||ft(this.value)}filter(ft){return!this.tag||ft(this.value)?this:Vt.none()}getOr(ft){return this.tag?this.value:ft}or(ft){return this.tag?this:ft}getOrThunk(ft){return this.tag?this.value:ft()}orThunk(ft){return this.tag?this:ft()}getOrDie(ft){if(this.tag)return this.value;throw new Error(ft??"Called getOrDie on None")}static from(ft){return bt(ft)?Vt.some(ft):Vt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ft){this.tag&&ft(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Vt.singletonNone=new Vt(!1);const ao=Array.prototype.slice,hn=Array.prototype.indexOf,fn=Array.prototype.push,It=(it,ft)=>hn.call(it,ft),Vn=(it,ft)=>It(it,ft)>-1,ln=(it,ft)=>{for(let vt=0,Ct=it.length;vt<Ct;vt++){const Ft=it[vt];if(ft(Ft,vt))return!0}return!1},uo=(it,ft)=>{const vt=[];for(let Ct=0;Ct<it;Ct++)vt.push(ft(Ct));return vt},Ln=(it,ft)=>{const vt=it.length,Ct=new Array(vt);for(let Ft=0;Ft<vt;Ft++){const jt=it[Ft];Ct[Ft]=ft(jt,Ft)}return Ct},An=(it,ft)=>{for(let vt=0,Ct=it.length;vt<Ct;vt++){const Ft=it[vt];ft(Ft,vt)}},Wn=(it,ft)=>{for(let vt=it.length-1;vt>=0;vt--){const Ct=it[vt];ft(Ct,vt)}},er=(it,ft)=>{const vt=[],Ct=[];for(let Ft=0,jt=it.length;Ft<jt;Ft++){const en=it[Ft];(ft(en,Ft)?vt:Ct).push(en)}return{pass:vt,fail:Ct}},no=(it,ft)=>{const vt=[];for(let Ct=0,Ft=it.length;Ct<Ft;Ct++){const jt=it[Ct];ft(jt,Ct)&&vt.push(jt)}return vt},Ro=(it,ft,vt)=>(Wn(it,(Ct,Ft)=>{vt=ft(vt,Ct,Ft)}),vt),On=(it,ft,vt)=>(An(it,(Ct,Ft)=>{vt=ft(vt,Ct,Ft)}),vt),_o=(it,ft,vt)=>{for(let Ct=0,Ft=it.length;Ct<Ft;Ct++){const jt=it[Ct];if(ft(jt,Ct))return Vt.some(jt);if(vt(jt,Ct))break}return Vt.none()},Yt=(it,ft)=>_o(it,ft,Pn),jr=(it,ft)=>{for(let vt=0,Ct=it.length;vt<Ct;vt++){const Ft=it[vt];if(ft(Ft,vt))return Vt.some(vt)}return Vt.none()},lo=it=>{const ft=[];for(let vt=0,Ct=it.length;vt<Ct;++vt){if(!nt(it[vt]))throw new Error("Arr.flatten item "+vt+" was not an array, input: "+it);fn.apply(ft,it[vt])}return ft},Ho=(it,ft)=>lo(Ln(it,ft)),mo=(it,ft)=>{for(let vt=0,Ct=it.length;vt<Ct;++vt){const Ft=it[vt];if(ft(Ft,vt)!==!0)return!1}return!0},Co=it=>{const ft=ao.call(it,0);return ft.reverse(),ft},mn=(it,ft)=>{const vt={};for(let Ct=0,Ft=it.length;Ct<Ft;Ct++){const jt=it[Ct];vt[String(jt)]=ft(jt,Ct)}return vt},wn=(it,ft)=>{const vt=ao.call(it,0);return vt.sort(ft),vt},Dn=(it,ft)=>ft>=0&&ft<it.length?Vt.some(it[ft]):Vt.none(),rn=it=>Dn(it,0),Cn=it=>Dn(it,it.length-1),Nn=(it,ft)=>{for(let vt=0;vt<it.length;vt++){const Ct=ft(it[vt],vt);if(Ct.isSome())return Ct}return Vt.none()},zn=Object.keys,So=Object.hasOwnProperty,Hn=(it,ft)=>{const vt=zn(it);for(let Ct=0,Ft=vt.length;Ct<Ft;Ct++){const jt=vt[Ct],en=it[jt];ft(en,jt)}},Tn=(it,ft)=>Jn(it,(vt,Ct)=>({k:Ct,v:ft(vt,Ct)})),Jn=(it,ft)=>{const vt={};return Hn(it,(Ct,Ft)=>{const jt=ft(Ct,Ft);vt[jt.k]=jt.v}),vt},bo=it=>(ft,vt)=>{it[vt]=ft},$n=(it,ft,vt,Ct)=>{Hn(it,(Ft,jt)=>{(ft(Ft,jt)?vt:Ct)(Ft,jt)})},oo=(it,ft)=>{const vt={};return $n(it,ft,bo(vt),Tt),vt},wo=(it,ft)=>{const vt=[];return Hn(it,(Ct,Ft)=>{vt.push(ft(Ct,Ft))}),vt},Oo=it=>wo(it,$t),Ir=(it,ft)=>sr(it,ft)?Vt.from(it[ft]):Vt.none(),sr=(it,ft)=>So.call(it,ft),vr=(it,ft)=>sr(it,ft)&&it[ft]!==void 0&&it[ft]!==null,as=it=>{for(const ft in it)if(So.call(it,ft))return!1;return!0},_r=typeof window<"u"?window:Function("return this;")(),fs=(it,ft)=>{let vt=ft??_r;for(let Ct=0;Ct<it.length&&vt!==void 0&&vt!==null;++Ct)vt=vt[it[Ct]];return vt},Ss=(it,ft)=>{const vt=it.split(".");return fs(vt,ft)},As=(it,ft)=>Ss(it,ft),_l=(it,ft)=>{const vt=As(it,ft);if(vt==null)throw new Error(it+" not available on this browser");return vt},Zr=Object.getPrototypeOf,Ml=it=>_l("HTMLElement",it),tr=it=>{const ft=Ss("ownerDocument.defaultView",it);return _e(it)&&(Ml(ft).prototype.isPrototypeOf(it)||/^HTML\w*Element$/.test(Zr(it).constructor.name))},Ms=8,cu=9,ou=11,Yl=1,xu=3,Vs=it=>it.dom.nodeName.toLowerCase(),wu=it=>it.dom.nodeType,iu=it=>ft=>wu(ft)===it,ba=it=>wu(it)===Ms||Vs(it)==="#comment",Jr=it=>_a(it)&&tr(it.dom),_a=iu(Yl),go=iu(xu),Po=iu(cu),Sr=iu(ou),Fr=it=>ft=>_a(ft)&&Vs(ft)===it,Us=(it,ft,vt)=>{if(_(vt)||ct(vt)||wt(vt))it.setAttribute(ft,vt+"");else throw console.error("Invalid call to Attribute.set. Key ",ft,":: Value ",vt,":: Element ",it),new Error("Attribute value was not simple")},xa=(it,ft,vt)=>{Us(it.dom,ft,vt)},ju=(it,ft)=>{const vt=it.dom;Hn(ft,(Ct,Ft)=>{Us(vt,Ft,Ct)})},Uu=(it,ft)=>{Hn(ft,(vt,Ct)=>{vt.fold(()=>{Bn(it,Ct)},Ft=>{Us(it.dom,Ct,Ft)})})},Au=(it,ft)=>{const vt=it.dom.getAttribute(ft);return vt===null?void 0:vt},Un=(it,ft)=>Vt.from(Au(it,ft)),Bn=(it,ft)=>{it.dom.removeAttribute(ft)},Mo=it=>On(it.dom.attributes,(ft,vt)=>(ft[vt.name]=vt.value,ft),{}),jo=(it,ft)=>{const Ct=(ft||document).createElement("div");if(Ct.innerHTML=it,!Ct.hasChildNodes()||Ct.childNodes.length>1){const Ft="HTML does not have a single root node";throw console.error(Ft,it),new Error(Ft)}return Ns(Ct.childNodes[0])},ss=(it,ft)=>{const Ct=(ft||document).createElement(it);return Ns(Ct)},Cs=(it,ft)=>{const Ct=(ft||document).createTextNode(it);return Ns(Ct)},Ns=it=>{if(it==null)throw new Error("Node cannot be null or undefined");return{dom:it}},ro={fromHtml:jo,fromTag:ss,fromText:Cs,fromDom:Ns,fromPoint:(it,ft,vt)=>Vt.from(it.dom.elementFromPoint(ft,vt)).map(Ns)},Ls=(it,ft)=>{const vt=it.dom;if(vt.nodeType!==Yl)return!1;{const Ct=vt;if(Ct.matches!==void 0)return Ct.matches(ft);if(Ct.msMatchesSelector!==void 0)return Ct.msMatchesSelector(ft);if(Ct.webkitMatchesSelector!==void 0)return Ct.webkitMatchesSelector(ft);if(Ct.mozMatchesSelector!==void 0)return Ct.mozMatchesSelector(ft);throw new Error("Browser lacks native selectors")}},Kn=it=>it.nodeType!==Yl&&it.nodeType!==cu&&it.nodeType!==ou||it.childElementCount===0,eo=(it,ft)=>{const vt=ft===void 0?document:ft.dom;return Kn(vt)?[]:Ln(vt.querySelectorAll(it),ro.fromDom)},nr=(it,ft)=>{const vt=ft===void 0?document:ft.dom;return Kn(vt)?Vt.none():Vt.from(vt.querySelector(it)).map(ro.fromDom)},lr=(it,ft)=>it.dom===ft.dom,Rr=(it,ft)=>{const vt=it.dom,Ct=ft.dom;return vt===Ct?!1:vt.contains(Ct)},Qr=Ls,es=it=>ro.fromDom(it.dom.ownerDocument),Hr=it=>Po(it)?it:es(it),hs=it=>ro.fromDom(Hr(it).dom.documentElement),ks=it=>ro.fromDom(Hr(it).dom.defaultView),Nl=it=>Vt.from(it.dom.parentNode).map(ro.fromDom),Xl=it=>Vt.from(it.dom.parentElement).map(ro.fromDom),uu=(it,ft)=>{const vt=xt(ft)?ft:Pn;let Ct=it.dom;const Ft=[];for(;Ct.parentNode!==null&&Ct.parentNode!==void 0;){const jt=Ct.parentNode,en=ro.fromDom(jt);if(Ft.push(en),vt(en)===!0)break;Ct=jt}return Ft},Kp=it=>Vt.from(it.dom.previousSibling).map(ro.fromDom),sm=it=>Vt.from(it.dom.nextSibling).map(ro.fromDom),_s=it=>Ln(it.dom.childNodes,ro.fromDom),Al=(it,ft)=>{const vt=it.dom.childNodes;return Vt.from(vt[ft]).map(ro.fromDom)},Pl=it=>Al(it,0),wp=(it,ft)=>{Nl(it).each(Ct=>{Ct.dom.insertBefore(ft.dom,it.dom)})},Cp=(it,ft)=>{sm(it).fold(()=>{Nl(it).each(Ft=>{ku(Ft,ft)})},Ct=>{wp(Ct,ft)})},dp=(it,ft)=>{Pl(it).fold(()=>{ku(it,ft)},Ct=>{it.dom.insertBefore(ft.dom,Ct.dom)})},ku=(it,ft)=>{it.dom.appendChild(ft.dom)},g1=(it,ft,vt)=>{Al(it,vt).fold(()=>{ku(it,ft)},Ct=>{wp(Ct,ft)})},Vm=(it,ft)=>{wp(it,ft),ku(ft,it)},Vl=(it,ft)=>{An(ft,(vt,Ct)=>{const Ft=Ct===0?it:ft[Ct-1];Cp(Ft,vt)})},Dp=(it,ft)=>{An(ft,vt=>{ku(it,vt)})},Np=it=>{it.dom.textContent="",An(_s(it),ft=>{fp(ft)})},fp=it=>{const ft=it.dom;ft.parentNode!==null&&ft.parentNode.removeChild(ft)},ry=it=>{const ft=_s(it);ft.length>0&&Vl(it,ft),fp(it)},im=(it,ft)=>ro.fromDom(it.dom.cloneNode(ft)),Yp=it=>im(it,!1),Wm=it=>im(it,!0),Tm=(it,ft)=>{const vt=ro.fromTag(ft),Ct=Mo(it);return ju(vt,Ct),vt},py=(it,ft)=>{const vt=Tm(it,ft),Ct=_s(Wm(it));return Dp(vt,Ct),vt},gy=(it,ft)=>{const vt=Tm(it,ft);Cp(it,vt);const Ct=_s(it);return Dp(vt,Ct),fp(it),vt},U0=["tfoot","thead","tbody","colgroup"],Im=it=>Vn(U0,it),Ap=(it,ft)=>({rows:it,columns:ft}),sy=(it,ft)=>({row:it,column:ft}),iy=(it,ft,vt)=>({element:it,rowspan:ft,colspan:vt}),Dy=(it,ft,vt,Ct)=>({element:it,rowspan:ft,colspan:vt,isNew:Ct}),E0=(it,ft,vt,Ct,Ft,jt)=>({element:it,rowspan:ft,colspan:vt,row:Ct,column:Ft,isLocked:jt}),hp=(it,ft,vt)=>({element:it,cells:ft,section:vt}),Rm=(it,ft,vt,Ct)=>({element:it,cells:ft,section:vt,isNew:Ct}),Lp=(it,ft,vt)=>({element:it,isNew:ft,isLocked:vt}),Xp=(it,ft,vt,Ct)=>({element:it,cells:ft,section:vt,isNew:Ct}),Ny=(it,ft,vt,Ct)=>({startRow:it,startCol:ft,finishRow:vt,finishCol:Ct}),Ly=(it,ft,vt)=>({element:it,colspan:ft,column:vt}),un=(it,ft)=>({element:it,columns:ft}),Fn=it=>Sr(it)&&bt(it.dom.host),fo=it=>ro.fromDom(it.dom.getRootNode()),Wo=it=>Fn(it)?it:ro.fromDom(Hr(it).dom.body),pr=it=>{const ft=fo(it);return Fn(ft)?Vt.some(ft):Vt.none()},Vo=it=>ro.fromDom(it.dom.host),$l=it=>{if(bt(it.target)){const ft=ro.fromDom(it.target);if(_a(ft)&&Kr(ft)&&it.composed&&it.composedPath){const vt=it.composedPath();if(vt)return rn(vt)}}return Vt.from(it.target)},Kr=it=>bt(it.dom.shadowRoot),Os=it=>{const ft=go(it)?it.dom.parentNode:it.dom;if(ft==null||ft.ownerDocument===null)return!1;const vt=ft.ownerDocument;return pr(ro.fromDom(ft)).fold(()=>vt.body.contains(ft),Mt(Os,Vo))},Pu=()=>Kt(ro.fromDom(document)),Kt=it=>{const ft=it.dom.body;if(ft==null)throw new Error("Body is not available yet");return ro.fromDom(ft)},vn=(it,ft,vt)=>no(uu(it,vt),ft),qn=(it,ft)=>no(_s(it),ft),Eo=(it,ft)=>{let vt=[];return An(_s(it),Ct=>{ft(Ct)&&(vt=vt.concat([Ct])),vt=vt.concat(Eo(Ct,ft))}),vt},Xo=(it,ft,vt)=>vn(it,Ct=>Ls(Ct,ft),vt),Zs=(it,ft)=>qn(it,vt=>Ls(vt,ft)),Zl=(it,ft)=>eo(ft,it);var ru=(it,ft,vt,Ct,Ft)=>it(vt,Ct)?Vt.some(vt):xt(Ft)&&Ft(vt)?Vt.none():ft(vt,Ct,Ft);const cr=(it,ft,vt)=>{let Ct=it.dom;const Ft=xt(vt)?vt:Pn;for(;Ct.parentNode;){Ct=Ct.parentNode;const jt=ro.fromDom(Ct);if(ft(jt))return Vt.some(jt);if(Ft(jt))break}return Vt.none()},du=(it,ft,vt)=>ru((Ft,jt)=>jt(Ft),cr,it,ft,vt),Fp=(it,ft)=>{const vt=Ft=>ft(ro.fromDom(Ft));return Yt(it.dom.childNodes,vt).map(ro.fromDom)},H0=(it,ft)=>{const vt=Ct=>{for(let Ft=0;Ft<Ct.childNodes.length;Ft++){const jt=ro.fromDom(Ct.childNodes[Ft]);if(ft(jt))return Vt.some(jt);const en=vt(Ct.childNodes[Ft]);if(en.isSome())return en}return Vt.none()};return vt(it.dom)},Bs=(it,ft,vt)=>cr(it,Ct=>Ls(Ct,ft),vt),qm=(it,ft)=>Fp(it,vt=>Ls(vt,ft)),f0=(it,ft)=>nr(ft,it),kp=(it,ft,vt)=>ru((Ft,jt)=>Ls(Ft,jt),Bs,it,ft,vt),fu=(it,ft,vt=Xt)=>it.exists(Ct=>vt(Ct,ft)),V0=it=>{const ft=[],vt=Ct=>{ft.push(Ct)};for(let Ct=0;Ct<it.length;Ct++)it[Ct].each(vt);return ft},zx=(it,ft)=>it!=null?ft(it):Vt.none(),c_=(it,ft)=>it?Vt.some(ft):Vt.none(),Hu=(it,ft)=>it.substring(ft),m1=(it,ft,vt)=>ft===""||it.length>=ft.length&&it.substr(vt,vt+ft.length)===ft,A0=(it,ft)=>T0(it,ft)?Hu(it,ft.length):it,Fu=(it,ft,vt=0,Ct)=>{const Ft=it.indexOf(ft,vt);return Ft!==-1?dt(Ct)?!0:Ft+ft.length<=Ct:!1},T0=(it,ft)=>m1(it,ft,0),Mm=(it,ft)=>m1(it,ft,it.length-ft.length),bn=(it=>ft=>ft.replace(it,""))(/^\s+|\s+$/g),Sn=it=>it.length>0,Ao=it=>{const ft=parseFloat(it);return isNaN(ft)?Vt.none():Vt.some(ft)},qo=it=>it.style!==void 0&&xt(it.style.getPropertyValue),ps=(it,ft,vt)=>{if(!_(vt))throw console.error("Invalid call to CSS.set. Property ",ft,":: Value ",vt,":: Element ",it),new Error("CSS value must be a string: "+vt);qo(it)&&it.style.setProperty(ft,vt)},Tl=(it,ft)=>{qo(it)&&it.style.removeProperty(ft)},Xs=(it,ft,vt)=>{const Ct=it.dom;ps(Ct,ft,vt)},gu=(it,ft)=>{const vt=it.dom;Hn(ft,(Ct,Ft)=>{ps(vt,Ft,Ct)})},pp=(it,ft)=>{const vt=it.dom,Ft=window.getComputedStyle(vt).getPropertyValue(ft);return Ft===""&&!Os(it)?Pm(vt,ft):Ft},Pm=(it,ft)=>qo(it)?it.style.getPropertyValue(ft):"",am=(it,ft)=>{const vt=it.dom,Ct=Pm(vt,ft);return Vt.from(Ct).filter(Ft=>Ft.length>0)},rp=(it,ft)=>{const vt=it.dom;Tl(vt,ft),fu(Un(it,"style").map(bn),"")&&Bn(it,"style")},ip=(it,ft)=>{const vt=it.dom,Ct=ft.dom;qo(vt)&&qo(Ct)&&(Ct.style.cssText=vt.style.cssText)},Tp=(it,ft,vt=0)=>Un(it,ft).map(Ct=>parseInt(Ct,10)).getOr(vt),lm=(it,ft)=>Tp(it,ft,1),Vu=it=>Fr("col")(it)?Tp(it,"span",1)>1:lm(it,"colspan")>1,ap=it=>lm(it,"rowspan")>1,zu=(it,ft)=>parseInt(pp(it,ft),10),my=Et(10),u_=Et(10),ov=(it,ft)=>b1(it,ft,an),b1=(it,ft,vt)=>Ho(_s(it),Ct=>Ls(Ct,ft)?vt(Ct)?[Ct]:[]:b1(Ct,ft,vt)),v1=(it,ft,vt=Pn)=>{if(vt(ft))return Vt.none();if(Vn(it,Vs(ft)))return Vt.some(ft);const Ct=Ft=>Ls(Ft,"table")||vt(Ft);return Bs(ft,it.join(","),Ct)},Rv=(it,ft)=>v1(["td","th"],it,ft),Mv=it=>ov(it,"th,td"),I0=it=>Ls(it,"colgroup")?Zs(it,"col"):Ho(Fy(it),ft=>Zs(ft,"col")),Zm=(it,ft)=>kp(it,"table",ft),Bw=it=>ov(it,"tr"),Fy=it=>Zm(it).fold(Et([]),ft=>Zs(ft,"colgroup")),Bx=(it,ft)=>Ln(it,vt=>{if(Vs(vt)==="colgroup"){const Ct=Ln(I0(vt),Ft=>{const jt=Tp(Ft,"span",1);return iy(Ft,1,jt)});return hp(vt,Ct,"colgroup")}else{const Ct=Ln(Mv(vt),Ft=>{const jt=Tp(Ft,"rowspan",1),en=Tp(Ft,"colspan",1);return iy(Ft,jt,en)});return hp(vt,Ct,ft(vt))}}),_1=it=>Nl(it).map(ft=>{const vt=Vs(ft);return Im(vt)?vt:"tbody"}).getOr("tbody"),$x=it=>{const ft=Bw(it),Ct=[...Fy(it),...ft];return Bx(Ct,_1)},K_=(it,ft)=>Bx(it,()=>ft),x1=it=>{let ft=!1,vt;return(...Ct)=>(ft||(ft=!0,vt=it.apply(null,Ct)),vt)},Y_=(it,ft,vt,Ct)=>{const Ft=it.isiOS()&&/ipad/i.test(vt)===!0,jt=it.isiOS()&&!Ft,en=it.isiOS()||it.isAndroid(),pn=en||Ct("(pointer:coarse)"),En=Ft||!jt&&en&&Ct("(min-device-width:768px)"),to=jt||en&&!En,Io=ft.isSafari()&&it.isiOS()&&/safari/i.test(vt)===!1,hr=!to&&!En&&!Io;return{isiPad:Et(Ft),isiPhone:Et(jt),isTablet:Et(En),isPhone:Et(to),isTouch:Et(pn),isAndroid:it.isAndroid,isiOS:it.isiOS,isWebView:Et(Io),isDesktop:Et(hr)}},Gx=(it,ft)=>{for(let vt=0;vt<it.length;vt++){const Ct=it[vt];if(Ct.test(ft))return Ct}},Pv=(it,ft)=>{const vt=Gx(it,ft);if(!vt)return{major:0,minor:0};const Ct=Ft=>Number(ft.replace(vt,"$"+Ft));return w1(Ct(1),Ct(2))},$w=(it,ft)=>{const vt=String(ft).toLowerCase();return it.length===0?Qn():Pv(it,vt)},Qn=()=>w1(0,0),w1=(it,ft)=>({major:it,minor:ft}),R0={nu:w1,detect:$w,unknown:Qn},cC=(it,ft)=>Nn(ft.brands,vt=>{const Ct=vt.brand.toLowerCase();return Yt(it,Ft=>{var jt;return Ct===((jt=Ft.brand)===null||jt===void 0?void 0:jt.toLowerCase())}).map(Ft=>({current:Ft.name,version:R0.nu(parseInt(vt.version,10),0)}))}),uC=(it,ft)=>{const vt=String(ft).toLowerCase();return Yt(it,Ct=>Ct.search(vt))},Ov=(it,ft)=>uC(it,ft).map(vt=>{const Ct=R0.detect(vt.versionRegexes,ft);return{current:vt.name,version:Ct}}),_i=(it,ft)=>uC(it,ft).map(vt=>{const Ct=R0.detect(vt.versionRegexes,ft);return{current:vt.name,version:Ct}}),Om=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,cm=it=>ft=>Fu(ft,it),Dv=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:it=>Fu(it,"edge/")&&Fu(it,"chrome")&&Fu(it,"safari")&&Fu(it,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Om],search:it=>Fu(it,"chrome")&&!Fu(it,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:it=>Fu(it,"msie")||Fu(it,"trident")},{name:"Opera",versionRegexes:[Om,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:cm("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:cm("firefox")},{name:"Safari",versionRegexes:[Om,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:it=>(Fu(it,"safari")||Fu(it,"mobile/"))&&Fu(it,"applewebkit")}],jx=[{name:"Windows",search:cm("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:it=>Fu(it,"iphone")||Fu(it,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:cm("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:cm("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:cm("linux"),versionRegexes:[]},{name:"Solaris",search:cm("sunos"),versionRegexes:[]},{name:"FreeBSD",search:cm("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:cm("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],d_={browsers:Et(Dv),oses:Et(jx)},Dm="Edge",X_="Chromium",rv="IE",J_="Opera",sv="Firefox",Km="Safari",dC=()=>f_({current:void 0,version:R0.unknown()}),f_=it=>{const ft=it.current,vt=it.version,Ct=Ft=>()=>ft===Ft;return{current:ft,version:vt,isEdge:Ct(Dm),isChromium:Ct(X_),isIE:Ct(rv),isOpera:Ct(J_),isFirefox:Ct(sv),isSafari:Ct(Km)}},Jp={unknown:dC,nu:f_,edge:Et(Dm),chromium:Et(X_),ie:Et(rv),opera:Et(J_),firefox:Et(sv),safari:Et(Km)},h0="Windows",Ym="iOS",k1="Android",h_="Linux",Gw="macOS",p_="Solaris",yy="FreeBSD",g_="ChromeOS",WS=()=>jw({current:void 0,version:R0.unknown()}),jw=it=>{const ft=it.current,vt=it.version,Ct=Ft=>()=>ft===Ft;return{current:ft,version:vt,isWindows:Ct(h0),isiOS:Ct(Ym),isAndroid:Ct(k1),isMacOS:Ct(Gw),isLinux:Ct(h_),isSolaris:Ct(p_),isFreeBSD:Ct(yy),isChromeOS:Ct(g_)}},fC={unknown:WS,nu:jw,windows:Et(h0),ios:Et(Ym),android:Et(k1),linux:Et(h_),macos:Et(Gw),solaris:Et(p_),freebsd:Et(yy),chromeos:Et(g_)},m_={detect:(it,ft,vt)=>{const Ct=d_.browsers(),Ft=d_.oses(),jt=ft.bind(En=>cC(Ct,En)).orThunk(()=>Ov(Ct,it)).fold(Jp.unknown,Jp.nu),en=_i(Ft,it).fold(fC.unknown,fC.nu),pn=Y_(en,jt,it,vt);return{browser:jt,os:en,deviceType:pn}}},S1=it=>window.matchMedia(it).matches;let Q_=x1(()=>m_.detect(window.navigator.userAgent,Vt.from(window.navigator.userAgentData),S1));const Qu=()=>Q_(),_d=(it,ft)=>{const vt=(pn,En)=>{if(!wt(En)&&!En.match(/^[0-9]+$/))throw new Error(it+".set accepts only positive integer values. Value was "+En);const to=pn.dom;qo(to)&&(to.style[it]=En+"px")},Ct=pn=>{const En=ft(pn);if(En<=0||En===null){const to=pp(pn,it);return parseFloat(to)||0}return En},Ft=Ct,jt=(pn,En)=>On(En,(to,Io)=>{const hr=pp(pn,Io),Or=hr===void 0?0:parseInt(hr,10);return isNaN(Or)?to:to+Or},0);return{set:vt,get:Ct,getOuter:Ft,aggregate:jt,max:(pn,En,to)=>{const Io=jt(pn,to);return En>Io?En-Io:0}}},Nv=(it,ft)=>Ao(it).getOr(ft),ay=(it,ft,vt)=>Nv(pp(it,ft),vt),Hw=(it,ft,vt,Ct)=>{const Ft=ay(it,`padding-${vt}`,0),jt=ay(it,`padding-${Ct}`,0),en=ay(it,`border-${vt}-width`,0),pn=ay(it,`border-${Ct}-width`,0);return ft-Ft-jt-en-pn},zp=(it,ft)=>{const vt=it.dom,Ct=vt.getBoundingClientRect().width||vt.offsetWidth;return ft==="border-box"?Ct:Hw(it,Ct,"left","right")},ls=it=>ay(it,"height",it.dom.offsetHeight),iv=it=>ay(it,"width",it.dom.offsetWidth),Vw=it=>zp(it,"content-box"),W0=_d("width",it=>it.dom.offsetWidth),Wl=it=>W0.get(it),Lv=it=>W0.getOuter(it),ex=Vw,Ux=iv,Ww=(it,ft,vt)=>{const Ct=it.cells,Ft=Ct.slice(0,ft),jt=Ct.slice(ft),en=Ft.concat(vt).concat(jt);return Fv(it,en)},Ks=(it,ft,vt)=>Ww(it,ft,[vt]),bp=(it,ft,vt)=>{const Ct=it.cells;Ct[ft]=vt},Fv=(it,ft)=>Xp(it.element,ft,it.section,it.isNew),zv=(it,ft)=>{const vt=it.cells,Ct=Ln(vt,ft);return Xp(it.element,Ct,it.section,it.isNew)},M0=(it,ft)=>it.cells[ft],p0=(it,ft)=>M0(it,ft).element,q0=it=>it.cells.length,Su=it=>{const ft=er(it,vt=>vt.section==="colgroup");return{rows:ft.fail,cols:ft.pass}},ly=(it,ft,vt)=>{const Ct=Ln(it.cells,vt);return Xp(ft(it.element),Ct,it.section,!0)},E1="data-snooker-locked-cols",Up=it=>Un(it,E1).bind(ft=>Vt.from(ft.match(/\d+/g))).map(ft=>mn(ft,an)),by=it=>{const ft=On(Su(it).rows,(Ct,Ft)=>(An(Ft.cells,(jt,en)=>{jt.isLocked&&(Ct[en]=!0)}),Ct),{}),vt=wo(ft,(Ct,Ft)=>parseInt(Ft,10));return wn(vt)},lp=(it,ft)=>it+","+ft,Bv=(it,ft,vt)=>Vt.from(it.access[lp(ft,vt)]),y_=(it,ft,vt)=>{const Ct=mu(it,Ft=>vt(ft,Ft.element));return Ct.length>0?Vt.some(Ct[0]):Vt.none()},mu=(it,ft)=>{const vt=Ho(it.all,Ct=>Ct.cells);return no(vt,ft)},vy=it=>{const ft={};let vt=0;return An(it.cells,Ct=>{const Ft=Ct.colspan;uo(Ft,jt=>{const en=vt+jt;ft[en]=Ly(Ct.element,Ft,en)}),vt+=Ft}),ft},Hx=it=>{const ft={},vt=[],Ft=rn(it).map(Tr=>Tr.element).bind(Zm).bind(Up).getOr({});let jt=0,en=0,pn=0;const{pass:En,fail:to}=er(it,Tr=>Tr.section==="colgroup");An(to,Tr=>{const xr=[];An(Tr.cells,ts=>{let ar=0;for(;ft[lp(pn,ar)]!==void 0;)ar++;const wr=vr(Ft,ar.toString()),kr=E0(ts.element,ts.rowspan,ts.colspan,pn,ar,wr);for(let Fs=0;Fs<ts.colspan;Fs++)for(let Fl=0;Fl<ts.rowspan;Fl++){const vu=pn+Fl,Ku=ar+Fs,up=lp(vu,Ku);ft[up]=kr,en=Math.max(en,Ku+1)}xr.push(kr)}),jt++,vt.push(hp(Tr.element,xr,Tr.section)),pn++});const{columns:Io,colgroups:hr}=Cn(En).map(Tr=>{const xr=vy(Tr);return{colgroups:[un(Tr.element,Oo(xr))],columns:xr}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Ap(jt,en),access:ft,all:vt,columns:Io,colgroups:hr}},xl={fromTable:it=>{const ft=$x(it);return Hx(ft)},generate:Hx,getAt:Bv,findItem:y_,filterItems:mu,justCells:it=>Ho(it.all,ft=>ft.cells),justColumns:it=>Oo(it.columns),hasColumns:it=>zn(it.columns).length>0,getColumnAt:(it,ft)=>Vt.from(it.columns[ft])},v_=(it,ft=an)=>{const vt=it.grid,Ct=uo(vt.columns,$t),Ft=uo(vt.rows,$t);return Ln(Ct,jt=>Vx(()=>Ho(Ft,to=>xl.getAt(it,to,jt).filter(Io=>Io.column===jt).toArray()),to=>to.colspan===1&&ft(to.element),()=>xl.getAt(it,0,jt)))},Vx=(it,ft,vt)=>{const Ct=it();return Yt(Ct,ft).orThunk(()=>Vt.from(Ct[0]).orThunk(vt)).map(en=>en.element)},Dt=it=>{const ft=it.grid,vt=uo(ft.rows,$t),Ct=uo(ft.columns,$t);return Ln(vt,Ft=>Vx(()=>Ho(Ct,En=>xl.getAt(it,Ft,En).filter(to=>to.row===Ft).fold(Et([]),to=>[to])),En=>En.rowspan===1,()=>xl.getAt(it,Ft,0)))},Ut=(it,ft)=>{if(ft<0||ft>=it.length-1)return Vt.none();const vt=it[ft].fold(()=>{const Ft=Co(it.slice(0,ft));return Nn(Ft,(jt,en)=>jt.map(pn=>({value:pn,delta:en+1})))},Ft=>Vt.some({value:Ft,delta:0})),Ct=it[ft+1].fold(()=>{const Ft=it.slice(ft+1);return Nn(Ft,(jt,en)=>jt.map(pn=>({value:pn,delta:en+1})))},Ft=>Vt.some({value:Ft,delta:1}));return vt.bind(Ft=>Ct.map(jt=>{const en=jt.delta+Ft.delta;return Math.abs(jt.value-Ft.value)/en}))},nn=(it,ft)=>vt=>Gn(vt)==="rtl"?ft:it,Gn=it=>pp(it,"direction")==="rtl"?"rtl":"ltr",io=_d("height",it=>{const ft=it.dom;return Os(it)?ft.getBoundingClientRect().height:ft.offsetHeight}),rr=it=>io.get(it),xs=it=>io.getOuter(it),qs=ls,$s=(it,ft)=>({left:it,top:ft,translate:(Ct,Ft)=>$s(it+Ct,ft+Ft)}),cs=$s,_f=it=>{const ft=it.getBoundingClientRect();return cs(ft.left,ft.top)},Ip=(it,ft)=>it!==void 0?it:ft!==void 0?ft:0,Xm=it=>{const ft=it.dom.ownerDocument,vt=ft.body,Ct=ft.defaultView,Ft=ft.documentElement;if(vt===it.dom)return cs(vt.offsetLeft,vt.offsetTop);const jt=Ip(Ct==null?void 0:Ct.pageYOffset,Ft.scrollTop),en=Ip(Ct==null?void 0:Ct.pageXOffset,Ft.scrollLeft),pn=Ip(Ft.clientTop,vt.clientTop),En=Ip(Ft.clientLeft,vt.clientLeft);return Gv(it).translate(en-En,jt-pn)},Gv=it=>{const ft=it.dom,Ct=ft.ownerDocument.body;return Ct===ft?cs(Ct.offsetLeft,Ct.offsetTop):Os(it)?_f(ft):cs(0,0)},tx=(it,ft)=>({row:it,y:ft}),qw=(it,ft)=>({col:it,x:ft}),m0=it=>Xm(it).left+Lv(it),Zw=it=>Xm(it).left,UA=(it,ft)=>qw(it,Zw(ft)),qS=(it,ft)=>qw(it,m0(ft)),um=it=>Xm(it).top,hC=(it,ft)=>tx(it,um(ft)),dm=(it,ft)=>tx(it,um(ft)+xs(ft)),pC=(it,ft,vt)=>{if(vt.length===0)return[];const Ct=Ln(vt.slice(1),(jt,en)=>jt.map(pn=>it(en,pn))),Ft=vt[vt.length-1].map(jt=>ft(vt.length-1,jt));return Ct.concat([Ft])},cy=it=>-it,vs={delta:$t,positions:it=>pC(hC,dm,it),edge:um},gC=nn({delta:$t,edge:Zw,positions:it=>pC(UA,qS,it)},{delta:cy,edge:m0,positions:it=>pC(qS,UA,it)}),nx={delta:(it,ft)=>gC(ft).delta(it,ft),positions:(it,ft)=>gC(ft).positions(it,ft),edge:it=>gC(it).edge(it)},KS={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},zy=(()=>{const it="[0-9]+",vt="[eE]"+("[+-]?"+it),Ct="\\.",Ft=pn=>`(?:${pn})?`,en=`[+-]?(?:${["Infinity",it+Ct+Ft(it)+Ft(vt),Ct+it+Ft(vt),it+Ft(vt)].join("|")})`;return new RegExp(`^(${en})(.*)$`)})(),jv=(it,ft)=>ln(ft,vt=>ln(KS[vt],Ct=>it===Ct)),ox=(it,ft)=>Vt.from(zy.exec(it)).bind(Ct=>{const Ft=Number(Ct[1]),jt=Ct[2];return jv(jt,ft)?Vt.some({value:Ft,unit:jt}):Vt.none()}),Nr=/(\d+(\.\d+)?)%/,By=/(\d+(\.\d+)?)px|em/,mC=Fr("col"),Wx=Fr("tr"),$y=(it,ft,vt)=>{const Ct=Xl(it).getOrThunk(()=>Kt(es(it)));return ft(it)/vt(Ct)*100},Kw=(it,ft)=>{Xs(it,"width",ft+"px")},rx=(it,ft)=>{Xs(it,"width",ft+"%")},T1=(it,ft)=>{Xs(it,"height",ft+"px")},Yw=it=>{rp(it,"height")},lv=it=>qs(it)+"px",HA=(it,ft,vt,Ct)=>{const Ft=Zm(it).map(jt=>{const en=vt(jt);return Math.floor(ft/100*en)}).getOr(ft);return Ct(it,Ft),Ft},cp=(it,ft,vt,Ct)=>{const Ft=parseFloat(it);return Mm(it,"%")&&Vs(ft)!=="table"?HA(ft,Ft,vt,Ct):Ft},dr=it=>{const ft=lv(it);return ft?cp(ft,it,rr,T1):rr(it)},y0=(it,ft,vt)=>{const Ct=vt(it),Ft=lm(it,ft);return Ct/Ft},sx=(it,ft)=>am(it,ft).orThunk(()=>Un(it,ft).map(vt=>vt+"px")),Sp=it=>sx(it,"width"),qx=it=>sx(it,"height"),fm=it=>$y(it,Wl,ex),Jl=it=>mC(it)?Wl(it):Ux(it),Xw=it=>Wx(it)?rr(it):y0(it,"rowspan",dr),Jo=it=>Sp(it).bind(vt=>ox(vt,["fixed","relative","empty"])),Ql=(it,ft,vt)=>{Xs(it,"width",ft+vt)},Jw=it=>Wl(it)+"px",Qp=it=>rr(it)+"px",Jm=it=>$y(it,Wl,ex)+"%",_y=it=>Sp(it).exists(ft=>Nr.test(ft)),YS=it=>Sp(it).exists(ft=>By.test(ft)),__=it=>Sp(it).isNone(),XS=Et(Nr),dy=Fr("col"),Kl=it=>Sp(it).getOrThunk(()=>Jl(it)+"px"),Uv=it=>qx(it).getOrThunk(()=>Xw(it)+"px"),Qw=it=>Ln(xl.justColumns(it),ft=>Vt.from(ft.element)),_g=it=>{const ft=Qu().browser,vt=ft.isChromium()||ft.isFirefox();return dy(it)?vt:!0},yC=(it,ft,vt,Ct,Ft,jt)=>it.filter(Ct).fold(()=>jt(Ut(vt,ft)),en=>Ft(en)),cv=(it,ft,vt,Ct)=>{const Ft=v_(it),jt=xl.hasColumns(it)?Qw(it):Ft,en=[Vt.some(nx.edge(ft))].concat(Ln(nx.positions(Ft,ft),En=>En.map(to=>to.x))),pn=Nt(Vu);return Ln(jt,(En,to)=>yC(En,to,en,pn,Io=>{if(_g(Io))return vt(Io);{const hr=zx(Ft[to],$t);return yC(hr,to,en,pn,Or=>Ct(Vt.some(Wl(Or))),Ct)}},Ct))},e2=it=>it.map(ft=>ft+"px").getOr(""),hm=(it,ft)=>cv(it,ft,Kl,e2),Qm=(it,ft,vt)=>cv(it,ft,fm,Ct=>Ct.fold(()=>vt.minCellWidth(),Ft=>Ft/vt.pixelWidth()*100)),ko=(it,ft,vt)=>cv(it,ft,Jl,Ct=>Ct.getOrThunk(vt.minCellWidth)),Eu=(it,ft,vt,Ct)=>{const Ft=Dt(it),jt=Ln(it.all,pn=>Vt.some(pn.element)),en=[Vt.some(vs.edge(ft))].concat(Ln(vs.positions(Ft,ft),pn=>pn.map(En=>En.y)));return Ln(jt,(pn,En)=>yC(pn,En,en,an,vt,Ct))},bC=(it,ft)=>Eu(it,ft,Xw,vt=>vt.getOrThunk(u_)),Rp=(it,ft)=>Eu(it,ft,Uv,e2),wm=(it,ft)=>()=>Os(it)?ft(it):parseFloat(am(it,"width").getOr("0")),em=it=>{const ft=wm(it,Wl),vt=Et(0);return{width:ft,pixelWidth:ft,getWidths:(Ft,jt)=>ko(Ft,it,jt),getCellDelta:vt,singleColumnWidth:Et([0]),minCellWidth:vt,setElementWidth:Tt,adjustTableWidth:Tt,isRelative:!0,label:"none"}},Wu=it=>{const ft=wm(it,En=>parseFloat(Jm(En))),vt=wm(it,Wl);return{width:ft,pixelWidth:vt,getWidths:(En,to)=>Qm(En,it,to),getCellDelta:En=>En/vt()*100,singleColumnWidth:(En,to)=>[100-En],minCellWidth:()=>my()/vt()*100,setElementWidth:rx,adjustTableWidth:En=>{const to=ft(),Io=En/100*to,hr=to+Io;rx(it,hr)},isRelative:!0,label:"percent"}},vC=it=>{const ft=wm(it,Wl);return{width:ft,pixelWidth:ft,getWidths:(en,pn)=>ko(en,it,pn),getCellDelta:$t,singleColumnWidth:(en,pn)=>[Math.max(my(),en+pn)-en],minCellWidth:my,setElementWidth:Kw,adjustTableWidth:en=>{const pn=ft()+en;Kw(it,pn)},isRelative:!1,label:"pixel"}},x_=(it,ft)=>XS().exec(ft)!==null?Wu(it):vC(it),Bt={getTableSize:it=>Sp(it).fold(()=>em(it),vt=>x_(it,vt)),pixelSize:vC,percentageSize:Wu,noneSize:em},tn=(it,ft,vt,Ct,Ft,jt)=>({minRow:it,minCol:ft,maxRow:vt,maxCol:Ct,allCells:Ft,selectedCells:jt}),_n=(it,ft)=>{const vt=it.grid.columns;let Ft=it.grid.rows,jt=vt,en=0,pn=0;const En=[],to=[];return Hn(it.access,Io=>{if(En.push(Io),ft(Io)){to.push(Io);const hr=Io.row,Or=hr+Io.rowspan-1,Tr=Io.column,xr=Tr+Io.colspan-1;hr<Ft?Ft=hr:Or>en&&(en=Or),Tr<jt?jt=Tr:xr>pn&&(pn=xr)}}),tn(Ft,jt,en,pn,En,to)},co=(it,ft,vt)=>{const Ct=it[vt].element,Ft=ro.fromTag("td");ku(Ft,ro.fromTag("br")),(ft?ku:dp)(Ct,Ft)},Yo=(it,ft,vt,Ct)=>{const Ft=no(it,pn=>pn.section!=="colgroup"),jt=ft.grid.columns,en=ft.grid.rows;for(let pn=0;pn<en;pn++){let En=!1;for(let to=0;to<jt;to++)pn<vt.minRow||pn>vt.maxRow||to<vt.minCol||to>vt.maxCol||(xl.getAt(ft,pn,to).filter(Ct).isNone()?co(Ft,En,pn):En=!0)}},yr=(it,ft,vt,Ct)=>{Hn(vt.columns,en=>{(en.column<ft.minCol||en.column>ft.maxCol)&&fp(en.element)});const Ft=no(ov(it,"tr"),en=>en.dom.childElementCount===0);An(Ft,fp),(ft.minCol===ft.maxCol||ft.minRow===ft.maxRow)&&An(ov(it,"th,td"),en=>{Bn(en,"rowspan"),Bn(en,"colspan")}),Bn(it,E1),Bn(it,"data-snooker-col-series"),Bt.getTableSize(it).adjustTableWidth(Ct)},Yr=(it,ft,vt,Ct)=>{if(Ct.minCol===0&&ft.grid.columns===Ct.maxCol+1)return 0;const Ft=ko(ft,it,vt),jt=On(Ft,(to,Io)=>to+Io,0),En=On(Ft.slice(Ct.minCol,Ct.maxCol+1),(to,Io)=>to+Io,0)/jt*vt.pixelWidth()-vt.pixelWidth();return vt.getCellDelta(En)},Ps=(it,ft)=>{const vt=Or=>Ls(Or.element,ft),Ct=Wm(it),Ft=$x(Ct),jt=Bt.getTableSize(it),en=xl.generate(Ft),pn=_n(en,vt),En="th:not("+ft+"),td:not("+ft+")",to=b1(Ct,"th,td",Or=>Ls(Or,En));An(to,fp),Yo(Ft,en,pn,vt);const Io=xl.fromTable(it),hr=Yr(it,Io,jt,pn);return yr(Ct,pn,en,hr),Ct},Ys="",su=((it,ft)=>{const vt=jt=>{if(!it(jt))throw new Error("Can only get "+ft+" value of a "+ft+" node");return Ct(jt).getOr("")},Ct=jt=>it(jt)?Vt.from(jt.dom.nodeValue):Vt.none();return{get:vt,getOption:Ct,set:(jt,en)=>{if(!it(jt))throw new Error("Can only set raw "+ft+" value of a "+ft+" node");jt.dom.nodeValue=en}}})(go,"text"),_h=it=>su.get(it),P0=it=>su.getOption(it),xy=(it,ft)=>su.set(it,ft),Nm=it=>Vs(it)==="img"?1:P0(it).fold(()=>_s(it).length,ft=>ft.length),Hv=it=>P0(it).filter(ft=>ft.trim().length!==0||ft.indexOf(Ys)>-1).isSome(),I1=it=>Jr(it)&&Au(it,"contenteditable")==="false",R1=["img","br"],w_=it=>Hv(it)||Vn(R1,Vs(it))||I1(it),Zx=it=>H0(it,w_),n2=it=>_C(it,w_),_C=(it,ft)=>{const vt=Ct=>{const Ft=_s(Ct);for(let jt=Ft.length-1;jt>=0;jt--){const en=Ft[jt];if(ft(en))return Vt.some(en);const pn=vt(en);if(pn.isSome())return pn}return Vt.none()};return vt(it)},Hp={scope:["row","col"]},uv=it=>()=>{const ft=ro.fromTag("td",it.dom);return ku(ft,ro.fromTag("br",it.dom)),ft},C_=it=>()=>ro.fromTag("col",it.dom),Gl=it=>()=>ro.fromTag("colgroup",it.dom),tp=it=>()=>ro.fromTag("tr",it.dom),gp=(it,ft,vt)=>{const Ct=py(it,ft);return Hn(vt,(Ft,jt)=>{Ft===null?Bn(Ct,jt):xa(Ct,jt,Ft)}),Ct},b0=it=>it,xC=(it,ft,vt)=>Zx(it).map(Ft=>{const jt=vt.join(","),en=Xo(Ft,jt,pn=>lr(pn,it));return Ro(en,(pn,En)=>{const to=Yp(En);return ku(pn,to),to},ft)}).getOr(ft),wC=(it,ft)=>{Hn(Hp,(vt,Ct)=>Un(it,Ct).filter(Ft=>Vn(vt,Ft)).each(Ft=>xa(ft,Ct,Ft)))},Z0=(it,ft,vt)=>{const Ct=(en,pn)=>{ip(en.element,pn),rp(pn,"height"),en.colspan!==1&&rp(pn,"width")},Ft=en=>{const pn=ro.fromTag(Vs(en.element),ft.dom),En=vt.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),to=En.length>0?xC(en.element,pn,En):pn;return ku(to,ro.fromTag("br")),Ct(en,pn),wC(en.element,pn),it(en.element,pn),pn};return{col:en=>{const pn=ro.fromTag(Vs(en.element),ft.dom);return Ct(en,pn),it(en.element,pn),pn},colgroup:Gl(ft),row:tp(ft),cell:Ft,replace:gp,colGap:C_(ft),gap:uv(ft)}},K0=it=>({col:C_(it),colgroup:Gl(it),row:tp(it),cell:uv(it),replace:b0,colGap:C_(it),gap:uv(it)}),NM=(it,ft)=>{const Ct=document.createElement("div");return Ct.innerHTML=it,_s(ro.fromDom(Ct))},dv=it=>Ln(it,ro.fromDom),o2=it=>ft=>ft.options.get(it),M1="100%",k_=it=>{var ft;const vt=it.dom,Ct=(ft=vt.getParent(it.selection.getStart(),vt.isBlock))!==null&&ft!==void 0?ft:it.getBody();return ex(ro.fromDom(Ct))+"px"},r2=(it,ft)=>Yx(it)||!Xx(it)?ft:e0(it)?{...ft,width:k_(it)}:{...ft,width:M1},eL=(it,ft)=>Yx(it)||Xx(it)?ft:e0(it)?{...ft,width:k_(it)}:{...ft,width:M1},JS=it=>{const ft=it.options.register;ft("table_clone_elements",{processor:"string[]"}),ft("table_use_colgroups",{processor:"boolean",default:!0}),ft("table_header_type",{processor:vt=>{const Ct=Vn(["section","cells","sectionCells","auto"],vt);return Ct?{value:vt,valid:Ct}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),ft("table_sizing_mode",{processor:"string",default:"auto"}),ft("table_default_attributes",{processor:"object",default:{border:"1"}}),ft("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),ft("table_column_resizing",{processor:vt=>{const Ct=Vn(["preservetable","resizetable"],vt);return Ct?{value:vt,valid:Ct}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),ft("table_resize_bars",{processor:"boolean",default:!0}),ft("table_style_by_css",{processor:"boolean",default:!0}),ft("table_merge_content_on_paste",{processor:"boolean",default:!0})},Kx=it=>Vt.from(it.options.get("table_clone_elements")),tL=it=>{const ft=it.options.get("object_resizing");return Vn(ft.split(","),"table")},Bp=o2("table_header_type"),VA=o2("table_column_resizing"),P1=it=>VA(it)==="preservetable",s2=it=>VA(it)==="resizetable",QS=o2("table_sizing_mode"),O1=it=>QS(it)==="relative",e0=it=>QS(it)==="fixed",Yx=it=>QS(it)==="responsive",WA=o2("table_resize_bars"),Xx=o2("table_style_by_css"),Lm=o2("table_merge_content_on_paste"),qA=it=>{const ft=it.options,vt=ft.get("table_default_attributes");return ft.isSet("table_default_attributes")?vt:eL(it,vt)},ZA=it=>{const ft=it.options,vt=ft.get("table_default_styles");return ft.isSet("table_default_styles")?vt:r2(it,vt)},nL=o2("table_use_colgroups"),LM=it=>kp(it,"[contenteditable]"),Jx=(it,ft=!1)=>Os(it)?it.dom.isContentEditable:LM(it).fold(Et(ft),vt=>i2(vt)==="true"),i2=it=>it.dom.contentEditable,fy=it=>ro.fromDom(it.getBody()),Gy=it=>ft=>lr(ft,fy(it)),jy=it=>{Bn(it,"data-mce-style");const ft=vt=>Bn(vt,"data-mce-style");An(Mv(it),ft),An(I0(it),ft),An(Bw(it),ft)},eE=it=>ro.fromDom(it.selection.getStart()),tE=it=>it.getBoundingClientRect().width,CC=it=>it.getBoundingClientRect().height,m3=it=>(ft,vt)=>{const Ct=ft.dom.getStyle(vt,it)||ft.dom.getAttrib(vt,it);return Vt.from(Ct).filter(Sn)},FM=m3("width"),zM=m3("height"),y3=it=>/^(\d+(\.\d+)?)%$/.test(it),kC=it=>/^(\d+(\.\d+)?)px$/.test(it),wl=it=>du(it,Fr("table")).exists(Jx),rs=(it,ft)=>{const vt=ft.column,Ct=ft.column+ft.colspan-1,Ft=ft.row,jt=ft.row+ft.rowspan-1;return vt<=it.finishCol&&Ct>=it.startCol&&Ft<=it.finishRow&&jt>=it.startRow},Qx=(it,ft)=>ft.column>=it.startCol&&ft.column+ft.colspan-1<=it.finishCol&&ft.row>=it.startRow&&ft.row+ft.rowspan-1<=it.finishRow,KA=(it,ft)=>{let vt=!0;const Ct=Zt(Qx,ft);for(let Ft=ft.startRow;Ft<=ft.finishRow;Ft++)for(let jt=ft.startCol;jt<=ft.finishCol;jt++)vt=vt&&xl.getAt(it,Ft,jt).exists(Ct);return vt?Vt.some(ft):Vt.none()},YA=(it,ft)=>Ny(Math.min(it.row,ft.row),Math.min(it.column,ft.column),Math.max(it.row+it.rowspan-1,ft.row+ft.rowspan-1),Math.max(it.column+it.colspan-1,ft.column+ft.colspan-1)),b3=(it,ft,vt)=>{const Ct=xl.findItem(it,ft,lr),Ft=xl.findItem(it,vt,lr);return Ct.bind(jt=>Ft.map(en=>YA(jt,en)))},XA=(it,ft,vt)=>b3(it,ft,vt).bind(Ct=>KA(it,Ct)),yu=(it,ft,vt,Ct)=>xl.findItem(it,ft,lr).bind(Ft=>{const jt=vt>0?Ft.row+Ft.rowspan-1:Ft.row,en=Ct>0?Ft.column+Ft.colspan-1:Ft.column;return xl.getAt(it,jt+vt,en+Ct).map(En=>En.element)}),v3=(it,ft,vt)=>b3(it,ft,vt).map(Ct=>{const Ft=xl.filterItems(it,Zt(rs,Ct));return Ln(Ft,jt=>jt.element)}),BM=(it,ft)=>{const vt=(Ct,Ft)=>Rr(Ft,Ct);return xl.findItem(it,ft,vt).map(Ct=>Ct.element)},_3=(it,ft,vt)=>Zm(it).bind(Ct=>{const Ft=a2(Ct);return yu(Ft,it,ft,vt)}),Qo=(it,ft,vt)=>{const Ct=a2(it);return v3(Ct,ft,vt)},SC=(it,ft,vt,Ct,Ft)=>{const jt=a2(it),en=lr(it,vt)?Vt.some(ft):BM(jt,ft),pn=lr(it,Ft)?Vt.some(Ct):BM(jt,Ct);return en.bind(En=>pn.bind(to=>v3(jt,En,to)))},$M=(it,ft,vt)=>{const Ct=a2(it);return XA(Ct,ft,vt)},a2=xl.fromTable;var GM=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ix=()=>{const it=to=>ro.fromDom(to.dom.cloneNode(!1)),ft=to=>Hr(to).dom,vt=to=>_a(to)?Vs(to)==="body"?!0:Vn(GM,Vs(to)):!1,Ct=to=>_a(to)?Vn(["br","img","hr","input"],Vs(to)):!1,Ft=to=>_a(to)&&Au(to,"contenteditable")==="false",jt=(to,Io)=>to.dom.compareDocumentPosition(Io.dom),en=(to,Io)=>{const hr=Mo(to);ju(Io,hr)},pn=to=>{const Io=Vs(to);return Vn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Io)},En=to=>_a(to)?Un(to,"lang"):Vt.none();return{up:Et({selector:Bs,closest:kp,predicate:cr,all:uu}),down:Et({selector:Zl,predicate:Eo}),styles:Et({get:pp,getRaw:am,set:Xs,remove:rp}),attrs:Et({get:Au,set:xa,remove:Bn,copyTo:en}),insert:Et({before:wp,after:Cp,afterAll:Vl,append:ku,appendAll:Dp,prepend:dp,wrap:Vm}),remove:Et({unwrap:ry,remove:fp}),create:Et({nu:ro.fromTag,clone:it,text:ro.fromText}),query:Et({comparePosition:jt,prevSibling:Kp,nextSibling:sm}),property:Et({children:_s,name:Vs,parent:Nl,document:ft,isText:go,isComment:ba,isElement:_a,isSpecial:pn,getLanguage:En,getText:_h,setText:xy,isBoundary:vt,isEmptyTag:Ct,isNonEditable:Ft}),eq:lr,is:Qr}};const JA=(it,ft,vt,Ct)=>{const Ft=vt[0],jt=vt.slice(1);return Ct(it,ft,Ft,jt)},l2=(it,ft,vt)=>vt.length>0?JA(it,ft,vt,nE):Vt.none(),nE=(it,ft,vt,Ct)=>{const Ft=ft(it,vt);return Ro(Ct,(jt,en)=>{const pn=ft(it,en);return ew(it,jt,pn)},Ft)},ew=(it,ft,vt)=>ft.bind(Ct=>vt.filter(Zt(it.eq,Ct))),ep=(it,ft)=>Zt(it.eq,ft),S_=(it,ft,vt,Ct=Pn)=>{const Ft=[ft].concat(it.up().all(ft)),jt=[vt].concat(it.up().all(vt)),en=Io=>jr(Io,Ct).fold(()=>Io,Or=>Io.slice(0,Or+1)),pn=en(Ft),En=en(jt),to=Yt(pn,Io=>ln(En,ep(it,Io)));return{firstpath:pn,secondpath:En,shared:to}},jM=l2,ax=S_,x3=ix(),c2=(it,ft)=>jM(x3,(vt,Ct)=>it(Ct),ft),w3=(it,ft,vt)=>ax(x3,it,ft,vt),C3=it=>Bs(it,"table"),Y0=(it,ft,vt)=>{const Ct=Ft=>jt=>vt!==void 0&&vt(jt)||lr(jt,Ft);return lr(it,ft)?Vt.some({boxes:Vt.some([it]),start:it,finish:ft}):C3(it).bind(Ft=>C3(ft).bind(jt=>{if(lr(Ft,jt))return Vt.some({boxes:Qo(Ft,it,ft),start:it,finish:ft});if(Rr(Ft,jt)){const en=Xo(ft,"td,th",Ct(Ft)),pn=en.length>0?en[en.length-1]:ft;return Vt.some({boxes:SC(Ft,it,Ft,ft,jt),start:it,finish:pn})}else if(Rr(jt,Ft)){const en=Xo(it,"td,th",Ct(jt)),pn=en.length>0?en[en.length-1]:it;return Vt.some({boxes:SC(jt,it,Ft,ft,jt),start:it,finish:pn})}else return w3(it,ft).shared.bind(en=>kp(en,"table",vt).bind(pn=>{const En=Xo(ft,"td,th",Ct(pn)),to=En.length>0?En[En.length-1]:ft,Io=Xo(it,"td,th",Ct(pn)),hr=Io.length>0?Io[Io.length-1]:it;return Vt.some({boxes:SC(pn,it,Ft,ft,jt),start:hr,finish:to})}))}))},EC=(it,ft)=>{const vt=Zl(it,ft);return vt.length>0?Vt.some(vt):Vt.none()},oL=(it,ft)=>Yt(it,vt=>Ls(vt,ft)),tw=(it,ft,vt)=>f0(it,ft).bind(Ct=>f0(it,vt).bind(Ft=>c2(C3,[Ct,Ft]).map(jt=>({first:Ct,last:Ft,table:jt})))),rL=(it,ft)=>Bs(it,"table").bind(vt=>f0(vt,ft).bind(Ct=>Y0(Ct,it).bind(Ft=>Ft.boxes.map(jt=>({boxes:jt,start:Ft.start,finish:Ft.finish}))))),u2=(it,ft,vt,Ct,Ft)=>oL(it,Ft).bind(jt=>_3(jt,ft,vt).bind(en=>rL(en,Ct))),QA=(it,ft)=>EC(it,ft),sL=(it,ft,vt)=>tw(it,ft,vt).bind(Ct=>{const Ft=En=>lr(it,En),jt="thead,tfoot,tbody,table",en=Bs(Ct.first,jt,Ft),pn=Bs(Ct.last,jt,Ft);return en.bind(En=>pn.bind(to=>lr(En,to)?$M(Ct.table,Ct.first,Ct.last):Vt.none()))}),oE=$t,D1=it=>{const ft=(Ct,Ft)=>Un(Ct,Ft).exists(jt=>parseInt(jt,10)>1),vt=Ct=>ft(Ct,"rowspan")||ft(Ct,"colspan");return it.length>0&&mo(it,vt)?Vt.some(it):Vt.none()},O0=(it,ft,vt)=>ft.length<=1?Vt.none():sL(it,vt.firstSelectedSelector,vt.lastSelectedSelector).map(Ct=>({bounds:Ct,cells:ft})),gr="data-mce-selected",AC="td["+gr+"],th["+gr+"]",Fm="["+gr+"]",k3="data-mce-first-selected",S3="td["+k3+"],th["+k3+"]",E3="data-mce-last-selected",$u="td["+E3+"],th["+E3+"]",iL=Fm,d2={selected:gr,selectedSelector:AC,firstSelected:k3,firstSelectedSelector:S3,lastSelected:E3,lastSelectedSelector:$u},lx=(it,ft,vt)=>({element:vt,mergable:O0(ft,it,d2),unmergable:D1(it),selection:oE(it)}),TC=(it,ft,vt)=>({element:it,clipboard:ft,generators:vt}),T3=(it,ft,vt,Ct)=>({selection:oE(it),clipboard:vt,generators:Ct}),E_=it=>Zm(it).bind(ft=>QA(ft,d2.firstSelectedSelector)).fold(Et(it),ft=>ft[0]),UM=it=>(ft,vt)=>{const Ct=Vs(ft),Ft=Ct==="col"||Ct==="colgroup"?E_(ft):ft;return kp(Ft,it,vt)},Vp=UM("th,td,caption"),eT=UM("th,td"),bu=it=>dv(it.model.table.getSelectedCells()),I3=it=>no(bu(it),ft=>Ls(ft,d2.selectedSelector)),X0=it=>Zm(it[0]).map(ft=>{const vt=Ps(ft,iL);return jy(vt),[vt]}),IC=(it,ft)=>Ln(ft,vt=>it.selection.serializer.serialize(vt.dom,{})).join(""),N1=(it,ft)=>{const vt=it.getDoc(),Ct=fo(ro.fromDom(it.getBody())),Ft=ro.fromTag("div",vt);xa(Ft,"data-mce-bogus","all"),gu(Ft,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const jt=Wo(Ct);Dp(Ft,ft),ku(jt,Ft);const en=Ft.dom.innerText;return fp(Ft),en},Jz=(it,ft)=>{it.on("BeforeGetContent",vt=>{const Ct=Ft=>{vt.preventDefault(),X0(Ft).each(jt=>{const en=vt.format==="text"?N1(it,jt):IC(it,jt);vt.content=en})};if(vt.selection===!0){const Ft=I3(it);Ft.length>=1&&Ct(Ft)}}),it.on("BeforeSetContent",vt=>{if(vt.selection===!0&&vt.paste===!0){const Ct=bu(it);rn(Ct).each(Ft=>{Zm(Ft).each(jt=>{const en=no(NM(vt.content),En=>Vs(En)!=="meta"),pn=Fr("table");if(Lm(it)&&en.length===1&&pn(en[0])){vt.preventDefault();const En=ro.fromDom(it.getDoc()),to=K0(En),Io=TC(Ft,en[0],to);ft.pasteCells(jt,Io).each(()=>{it.focus()})}})})}})},tT=(it,ft)=>({element:it,offset:ft}),aL=(it,ft,vt)=>it.property().isText(ft)&&it.property().getText(ft).trim().length===0||it.property().isComment(ft)?vt(ft).bind(Ct=>aL(it,Ct,vt).orThunk(()=>Vt.some(Ct))):Vt.none(),HM=(it,ft)=>it.property().isText(ft)?it.property().getText(ft).length:it.property().children(ft).length,Vv=(it,ft)=>{const vt=aL(it,ft,it.query().prevSibling).getOr(ft);if(it.property().isText(vt))return tT(vt,HM(it,vt));const Ct=it.property().children(vt);return Ct.length>0?Vv(it,Ct[Ct.length-1]):tT(vt,HM(it,vt))},L1=Vv,D0=ix(),RC=it=>L1(D0,it),nT=(it,ft)=>{Vu(it)||Jo(it).each(Ct=>{const Ft=Ct.value/2;Ql(it,Ft,Ct.unit),Ql(ft,Ft,Ct.unit)})},oT=it=>Ln(it,Et(0)),MC=(it,ft,vt,Ct,Ft)=>Ft(it.slice(0,ft)).concat(Ct).concat(Ft(it.slice(vt))),nw=it=>(ft,vt,Ct,Ft)=>{if(it(Ct)){const jt=Math.max(Ft,ft[vt]-Math.abs(Ct)),en=Math.abs(jt-ft[vt]);return Ct>=0?en:-en}else return Ct},A_=nw(it=>it<0),PC=nw(an),ow=()=>{const it=(pn,En,to,Io,hr)=>{const Or=A_(pn,En,Io,hr);return MC(pn,En,to+1,[Or,0],oT)},ft=(pn,En,to,Io)=>{const hr=(100+to)/100,Or=Math.max(Io,(pn[En]+to)/hr);return Ln(pn,(Tr,xr)=>(xr===En?Or:Tr/hr)-Tr)},vt=(pn,En,to,Io,hr,Or)=>Or?ft(pn,En,Io,hr):it(pn,En,to,Io,hr);return{resizeTable:(pn,En)=>pn(En),clampTableDelta:A_,calcLeftEdgeDeltas:vt,calcMiddleDeltas:(pn,En,to,Io,hr,Or,Tr)=>vt(pn,to,Io,hr,Or,Tr),calcRightEdgeDeltas:(pn,En,to,Io,hr,Or)=>{if(Or)return ft(pn,to,Io,hr);{const Tr=A_(pn,to,Io,hr);return oT(pn.slice(0,to)).concat([Tr])}},calcRedestributedWidths:(pn,En,to,Io)=>{if(Io){const Or=(En+to)/En,Tr=Ln(pn,xr=>xr/Or);return{delta:Or*100-100,newSizes:Tr}}else return{delta:to,newSizes:pn}}}},ux=()=>{const it=(en,pn,En,to,Io)=>{const hr=to>=0?En:pn,Or=PC(en,hr,to,Io);return MC(en,pn,En+1,[Or,-Or],oT)};return{resizeTable:(en,pn,En)=>{En&&en(pn)},clampTableDelta:(en,pn,En,to,Io)=>{if(Io){if(En>=0)return En;{const hr=On(en,(Or,Tr)=>Or+Tr-to,0);return Math.max(-hr,En)}}else return A_(en,pn,En,to)},calcLeftEdgeDeltas:it,calcMiddleDeltas:(en,pn,En,to,Io,hr)=>it(en,En,to,Io,hr),calcRightEdgeDeltas:(en,pn,En,to,Io,hr)=>{if(hr)return oT(en);{const Or=to/en.length;return Ln(en,Et(Or))}},calcRedestributedWidths:(en,pn,En,to)=>({delta:0,newSizes:en})}},f2=it=>xl.fromTable(it).grid,rE=Fr("th"),rT=it=>mo(it,ft=>rE(ft.element)),VM=(it,ft)=>it&&ft?"sectionCells":it?"section":"cells",R3=it=>{const ft=it.section==="thead",vt=fu(OC(it.cells),"th");return it.section==="tfoot"?{type:"footer"}:ft||vt?{type:"header",subType:VM(ft,vt)}:{type:"body"}},OC=it=>{const ft=no(it,vt=>rE(vt.element));return ft.length===0?Vt.some("td"):ft.length===it.length?Vt.some("th"):Vt.none()},WM=it=>{const ft=Ln(it,Ft=>R3(Ft).type),vt=Vn(ft,"header"),Ct=Vn(ft,"footer");if(!vt&&!Ct)return Vt.some("body");{const Ft=Vn(ft,"body");return vt&&!Ft&&!Ct?Vt.some("header"):!vt&&!Ft&&Ct?Vt.some("footer"):Vt.none()}},lL=it=>Nn(it.all,ft=>{const vt=R3(ft);return vt.type==="header"?Vt.from(vt.subType):Vt.none()}),sT=(it,ft,vt)=>Lp(vt(it.element,ft),!0,it.isLocked),M3=(it,ft)=>it.section!==ft?Xp(it.element,it.cells,ft,it.isNew):it,sE=()=>({transformRow:M3,transformCell:(it,ft,vt)=>{const Ct=vt(it.element,ft),Ft=Vs(Ct)!=="td"?gy(Ct,"td"):Ct;return Lp(Ft,it.isNew,it.isLocked)}}),P3=()=>({transformRow:M3,transformCell:sT}),DC=()=>({transformRow:(it,ft)=>M3(it,ft==="thead"?"tbody":ft),transformCell:sT}),NC={getTableSectionType:(it,ft)=>{const vt=xl.fromTable(it);switch(lL(vt).getOr(ft)){case"section":return sE();case"sectionCells":return P3();case"cells":return DC()}},section:sE,sectionCells:P3,cells:DC,fallback:()=>({transformRow:$t,transformCell:sT})},Wv=(it,ft,vt,Ct)=>{vt===Ct?Bn(it,ft):xa(it,ft,vt)},iE=(it,ft,vt)=>{Cn(Zs(it,ft)).fold(()=>dp(it,vt),Ct=>Cp(Ct,vt))},qM=(it,ft)=>{const vt=qm(it,ft).getOrThunk(()=>{const Ct=ro.fromTag(ft,es(it).dom);return ft==="thead"?iE(it,"caption,colgroup",Ct):ft==="colgroup"?iE(it,"caption",Ct):ku(it,Ct),Ct});return Np(vt),vt},ZM=(it,ft)=>{const vt=[],Ct=[],Ft=Tr=>Ln(Tr,xr=>{xr.isNew&&vt.push(xr.element);const ts=xr.element;return Np(ts),An(xr.cells,ar=>{ar.isNew&&Ct.push(ar.element),Wv(ar.element,"colspan",ar.colspan,1),Wv(ar.element,"rowspan",ar.rowspan,1),ku(ts,ar.element)}),ts}),jt=Tr=>Ho(Tr,xr=>Ln(xr.cells,ts=>(Wv(ts.element,"span",ts.colspan,1),ts.element))),en=(Tr,xr)=>{const ts=qM(it,xr),wr=(xr==="colgroup"?jt:Ft)(Tr);Dp(ts,wr)},pn=Tr=>{qm(it,Tr).each(fp)},En=(Tr,xr)=>{Tr.length>0?en(Tr,xr):pn(xr)},to=[],Io=[],hr=[],Or=[];return An(ft,Tr=>{switch(Tr.section){case"thead":to.push(Tr);break;case"tbody":Io.push(Tr);break;case"tfoot":hr.push(Tr);break;case"colgroup":Or.push(Tr);break}}),En(Or,"colgroup"),En(to,"thead"),En(Io,"tbody"),En(hr,"tfoot"),{newRows:vt,newCells:Ct}},KM=it=>Ln(it,ft=>{const vt=Yp(ft.element);return An(ft.cells,Ct=>{const Ft=Wm(Ct.element);Wv(Ft,"colspan",Ct.colspan,1),Wv(Ft,"rowspan",Ct.rowspan,1),ku(vt,Ft)}),vt}),h2=(it,ft)=>Ln(it,vt=>M0(vt,ft)),tB=(it,ft)=>it[ft],g2=(it,ft)=>{if(it.length===0)return 0;const vt=it[0];return jr(it,Ft=>!ft(vt.element,Ft.element)).getOr(it.length)},LC=(it,ft,vt,Ct)=>{const Ft=tB(it,ft),jt=Ft.section==="colgroup",en=g2(Ft.cells.slice(vt),Ct),pn=jt?1:g2(h2(it.slice(ft),vt),Ct);return{colspan:en,rowspan:pn}},YM=(it,ft)=>{const vt=Ln(it,Ft=>Ln(Ft.cells,Pn)),Ct=(Ft,jt,en,pn)=>{for(let En=Ft;En<Ft+en;En++)for(let to=jt;to<jt+pn;to++)vt[En][to]=!0};return Ln(it,(Ft,jt)=>{const en=Ho(Ft.cells,(pn,En)=>{if(vt[jt][En]===!1){const to=LC(it,jt,En,ft);return Ct(jt,En,to.rowspan,to.colspan),[Dy(pn.element,to.rowspan,to.colspan,pn.isNew)]}else return[]});return Rm(Ft.element,en,Ft.section,Ft.isNew)})},FC=(it,ft,vt)=>{const Ct=[];An(it.colgroups,Ft=>{const jt=[];for(let en=0;en<it.grid.columns;en++){const pn=xl.getColumnAt(it,en).map(En=>Lp(En.element,vt,!1)).getOrThunk(()=>Lp(ft.colGap(),!0,!1));jt.push(pn)}Ct.push(Xp(Ft.element,jt,"colgroup",vt))});for(let Ft=0;Ft<it.grid.rows;Ft++){const jt=[];for(let En=0;En<it.grid.columns;En++){const to=xl.getAt(it,Ft,En).map(Io=>Lp(Io.element,vt,Io.isLocked)).getOrThunk(()=>Lp(ft.gap(),!0,!1));jt.push(to)}const en=it.all[Ft],pn=Xp(en.element,jt,en.section,vt);Ct.push(pn)}return Ct},cL=(it,ft)=>FC(it,ft,!1),O3=it=>YM(it,lr),XM=(it,ft)=>Nn(it.all,vt=>Yt(vt.cells,Ct=>lr(ft,Ct.element))),JM=(it,ft,vt)=>{const Ct=Ln(ft.selection,jt=>Rv(jt).bind(en=>XM(it,en)).filter(vt)),Ft=V0(Ct);return c_(Ft.length>0,Ft)},i0=(it,ft,vt,Ct,Ft)=>(jt,en,pn,En)=>{const to=xl.fromTable(jt),Io=Vt.from(En==null?void 0:En.section).getOrThunk(NC.fallback);return ft(to,en).map(Or=>{const Tr=cL(to,pn),xr=it(Tr,Or,lr,Ft(pn),Io),ts=by(xr.grid),ar=O3(xr.grid);return{info:Or,grid:ar,cursor:xr.cursor,lockedColumns:ts}}).bind(Or=>{const Tr=ZM(jt,Or.grid),xr=Vt.from(En==null?void 0:En.sizing).getOrThunk(()=>Bt.getTableSize(jt)),ts=Vt.from(En==null?void 0:En.resize).getOrThunk(ux);return vt(jt,Or.grid,Or.info,{sizing:xr,resize:ts,section:Io}),Ct(jt),Bn(jt,E1),Or.lockedColumns.length>0&&xa(jt,E1,Or.lockedColumns.join(",")),Vt.some({cursor:Or.cursor,newRows:Tr.newRows,newCells:Tr.newCells})})},nB=(it,ft)=>Rv(ft.element).bind(vt=>XM(it,vt).map(Ct=>({...Ct,generators:ft.generators,clipboard:ft.clipboard}))),rw=(it,ft)=>JM(it,ft,an).map(vt=>({cells:vt,generators:ft.generators,clipboard:ft.clipboard})),uL=(it,ft)=>ft.mergable,dx=(it,ft)=>ft.unmergable,wy=(it,ft)=>JM(it,ft,an),F1=(it,ft)=>JM(it,ft,vt=>!vt.isLocked),m2=(it,ft)=>XM(it,ft).exists(vt=>!vt.isLocked),QM=(it,ft)=>mo(ft,vt=>m2(it,vt)),aE=(it,ft)=>uL(it,ft).filter(vt=>QM(it,vt.cells)),iT=(it,ft)=>dx(it,ft).filter(vt=>QM(it,vt)),sw=(it,ft,vt,Ct)=>{const Ft=Su(it).rows;if(Ft.length===0)return it;for(let jt=ft.startRow;jt<=ft.finishRow;jt++)for(let en=ft.startCol;en<=ft.finishCol;en++){const pn=Ft[jt],En=M0(pn,en).isLocked;bp(pn,en,Lp(Ct(),!1,En))}return it},D3=(it,ft,vt,Ct)=>{const Ft=Su(it).rows;let jt=!0;for(let en=0;en<Ft.length;en++)for(let pn=0;pn<q0(Ft[0]);pn++){const En=Ft[en],to=M0(En,pn),Io=to.element,hr=vt(Io,ft);hr&&!jt?bp(En,pn,Lp(Ct(),!0,to.isLocked)):hr&&(jt=!1)}return it},z1=(it,ft)=>On(it,(vt,Ct)=>ln(vt,Ft=>ft(Ft.element,Ct.element))?vt:vt.concat([Ct]),[]),T_=(it,ft,vt,Ct)=>(ft>0&&ft<it[0].cells.length&&An(it,Ft=>{const jt=Ft.cells[ft-1];let en=0;const pn=Ct();for(;Ft.cells.length>ft+en&&vt(jt.element,Ft.cells[ft+en].element);)bp(Ft,ft+en,Lp(pn,!0,Ft.cells[ft+en].isLocked)),en++}),it),dL=(it,ft,vt,Ct)=>{const Ft=Su(it).rows;if(ft>0&&ft<Ft.length){const jt=Ft[ft-1].cells,en=z1(jt,vt);An(en,pn=>{let En=Vt.none();for(let to=ft;to<Ft.length;to++)for(let Io=0;Io<q0(Ft[0]);Io++){const hr=Ft[to],Or=M0(hr,Io);vt(Or.element,pn.element)&&(En.isNone()&&(En=Vt.some(Ct())),En.each(xr=>{bp(hr,Io,Lp(xr,!0,Or.isLocked))}))}})}return it},Cm=it=>{const ft=jt=>jt(it),vt=Et(it),Ct=()=>Ft,Ft={tag:!0,inner:it,fold:(jt,en)=>en(it),isValue:an,isError:Pn,map:jt=>aT.value(jt(it)),mapError:Ct,bind:ft,exists:ft,forall:ft,getOr:vt,or:Ct,getOrThunk:vt,orThunk:Ct,getOrDie:vt,each:jt=>{jt(it)},toOptional:()=>Vt.some(it)};return Ft},lE=it=>{const ft=()=>vt,vt={tag:!1,inner:it,fold:(Ct,Ft)=>Ct(it),isValue:Pn,isError:an,map:ft,mapError:Ct=>aT.error(Ct(it)),bind:ft,exists:Pn,forall:an,getOr:$t,or:$t,getOrThunk:dn,orThunk:dn,getOrDie:Jt(String(it)),each:Tt,toOptional:Vt.none};return vt},aT={value:Cm,error:lE,fromOption:(it,ft)=>it.fold(()=>lE(ft),Cm)},N3=(it,ft,vt)=>{if(it.row>=ft.length||it.column>q0(ft[0]))return aT.error("invalid start address out of table bounds, row: "+it.row+", column: "+it.column);const Ct=ft.slice(it.row),Ft=Ct[0].cells.slice(it.column),jt=q0(vt[0]),en=vt.length;return aT.value({rowDelta:Ct.length-en,colDelta:Ft.length-jt})},y2=(it,ft)=>{const vt=q0(it[0]),Ct=q0(ft[0]);return{rowDelta:0,colDelta:vt-Ct}},iw=(it,ft)=>{const vt=it.length,Ct=ft.length;return{rowDelta:vt-Ct,colDelta:0}},qv=(it,ft,vt,Ct)=>{const Ft=ft.section==="colgroup"?vt.col:vt.cell;return uo(it,jt=>Lp(Ft(),!0,Ct(jt)))},hv=(it,ft,vt,Ct)=>{const Ft=it[it.length-1];return it.concat(uo(ft,()=>{const jt=Ft.section==="colgroup"?vt.colgroup:vt.row,en=ly(Ft,jt,$t),pn=qv(en.cells.length,en,vt,En=>sr(Ct,En.toString()));return Fv(en,pn)}))},e4=(it,ft,vt,Ct)=>Ln(it,Ft=>{const jt=qv(ft,Ft,vt,Pn);return Ww(Ft,Ct,jt)}),fL=(it,ft,vt)=>Ln(it,Ct=>On(vt,(Ft,jt)=>{const en=qv(1,Ct,ft,an)[0];return Ks(Ft,jt,en)},Ct)),I_=(it,ft,vt)=>{const Ct=ft.colDelta<0?e4:$t,Ft=ft.rowDelta<0?hv:$t,jt=by(it),en=q0(it[0]),pn=ln(jt,Io=>Io===en-1),En=Ct(it,Math.abs(ft.colDelta),vt,pn?en-1:en),to=by(En);return Ft(En,Math.abs(ft.rowDelta),vt,mn(to,an))},fx=(it,ft,vt,Ct)=>{const Ft=M0(it[ft],vt),jt=Zt(Ct,Ft.element),en=it[ft];return it.length>1&&q0(en)>1&&(vt>0&&jt(p0(en,vt-1))||vt<en.cells.length-1&&jt(p0(en,vt+1))||ft>0&&jt(p0(it[ft-1],vt))||ft<it.length-1&&jt(p0(it[ft+1],vt)))},lT=(it,ft,vt,Ct,Ft,jt)=>{const en=it.row,pn=it.column,En=vt.length,to=q0(vt[0]),Io=en+En,hr=pn+to+jt.length,Or=mn(jt,an);for(let Tr=en;Tr<Io;Tr++){let xr=0;for(let ts=pn;ts<hr;ts++){if(Or[ts]){xr++;continue}fx(ft,Tr,ts,Ft)&&D3(ft,p0(ft[Tr],ts),Ft,Ct.cell);const ar=ts-pn-xr,wr=M0(vt[Tr-en],ar),kr=wr.element,Fs=Ct.replace(kr);bp(ft[Tr],ts,Lp(Fs,!0,wr.isLocked))}}return ft},zl=(it,ft,vt)=>{const Ct=q0(ft[0]),Ft=Su(ft).cols.length+it.row,jt=uo(Ct-it.column,pn=>pn+it.column),en=Yt(jt,pn=>mo(vt,En=>En!==pn)).getOr(Ct-1);return{row:Ft,column:en}},v0=(it,ft,vt)=>no(vt,Ct=>Ct>=it.column&&Ct<=q0(ft[0])+it.column),b2=(it,ft,vt,Ct,Ft)=>{const jt=by(ft),en=zl(it,ft,jt),pn=Su(vt).rows,En=v0(en,pn,jt);return N3(en,ft,pn).map(Io=>{const hr={...Io,colDelta:Io.colDelta-En.length},Or=I_(ft,hr,Ct),Tr=by(Or),xr=v0(en,pn,Tr);return lT(en,Or,pn,Ct,Ft,xr)})},zC=(it,ft,vt,Ct,Ft)=>{T_(ft,it,Ft,Ct.cell);const jt=iw(vt,ft),en=I_(vt,jt,Ct),pn=iw(ft,en),En=I_(ft,pn,Ct);return Ln(En,(to,Io)=>Ww(to,it,en[Io].cells))},qu=(it,ft,vt,Ct,Ft)=>{dL(ft,it,Ft,Ct.cell);const jt=by(ft),en=y2(ft,vt),pn={...en,colDelta:en.colDelta-jt.length},En=I_(ft,pn,Ct),{cols:to,rows:Io}=Su(En),hr=by(En),Or=y2(vt,ft),Tr={...Or,colDelta:Or.colDelta+hr.length},xr=fL(vt,Ct,hr),ts=I_(xr,Tr,Ct);return[...to,...Io.slice(0,it),...ts,...Io.slice(it,Io.length)]},v2=(it,ft,vt,Ct)=>ly(it,Ft=>Ct(Ft,vt),ft),hx=(it,ft,vt,Ct,Ft)=>{const{rows:jt,cols:en}=Su(it),pn=jt.slice(0,ft),En=jt.slice(ft),to=v2(jt[vt],(Io,hr)=>ft>0&&ft<jt.length&&Ct(p0(jt[ft-1],hr),p0(jt[ft],hr))?M0(jt[ft],hr):Lp(Ft(Io.element,Ct),!0,Io.isLocked),Ct,Ft);return[...en,...pn,to,...En]},t4=(it,ft,vt,Ct,Ft,jt,en)=>{if(vt==="colgroup"||!Ct){const pn=M0(it,Ft);return Lp(en(pn.element,jt),!0,!1)}else return M0(it,ft)},hL=(it,ft,vt,Ct,Ft)=>Ln(it,jt=>{const en=ft>0&&ft<q0(jt)&&Ct(p0(jt,ft-1),p0(jt,ft)),pn=t4(jt,ft,jt.section,en,vt,Ct,Ft);return Ks(jt,ft,pn)}),n4=(it,ft)=>Ho(it,vt=>{const Ct=vt.cells,Ft=Ro(ft,(jt,en)=>en>=0&&en<jt.length?jt.slice(0,en).concat(jt.slice(en+1)):jt,Ct);return Ft.length>0?[Xp(vt.element,Ft,vt.section,vt.isNew)]:[]}),Zu=(it,ft,vt)=>{const{rows:Ct,cols:Ft}=Su(it);return[...Ft,...Ct.slice(0,ft),...Ct.slice(vt+1)]},cE=(it,ft,vt,Ct)=>p0(it[ft],vt)!==void 0&&ft>0&&Ct(p0(it[ft-1],vt),p0(it[ft],vt)),pL=(it,ft,vt)=>ft>0&&vt(p0(it,ft-1),p0(it,ft)),o4=(it,ft,vt,Ct)=>cE(it,ft,vt,Ct)||pL(it[ft],vt,Ct),_2=(it,ft)=>mo(ft,$t)&&rT(it.cells)?an:(Ct,Ft,jt)=>!(Vs(Ct.element)==="th"&&ft[jt]),Zv=(it,ft)=>mo(ft,$t)&&rT(it)?an:(Ct,Ft,jt)=>!(Vs(Ct.element)==="th"&&ft[Ft]),uE=(it,ft,vt,Ct)=>{const Ft=en=>en==="row"?ap(ft):Vu(ft),jt=en=>Ft(en)?`${en}group`:en;return it?rE(ft)?jt(vt):null:Ct&&rE(ft)?jt(vt==="row"?"col":"row"):null},px=(it,ft)=>(vt,Ct,Ft)=>Vt.some(uE(it,vt.element,"col",ft[Ft])),Wr=(it,ft)=>(vt,Ct)=>Vt.some(uE(it,vt.element,"row",ft[Ct])),r4=(it,ft,vt)=>Lp(vt(it.element,ft),!0,it.isLocked),cT=(it,ft,vt,Ct,Ft,jt,en)=>{const pn=En=>ln(ft,to=>vt(En.element,to.element));return Ln(it,(En,to)=>zv(En,(Io,hr)=>{if(pn(Io)){const Or=en(Io,to,hr)?Ft(Io,vt,Ct):Io;return jt(Or,to,hr).each(Tr=>{Uu(Or.element,{scope:Vt.from(Tr)})}),Or}else return Io}))},s4=(it,ft,vt)=>Ho(it,(Ct,Ft)=>o4(it,Ft,ft,vt)?[]:[M0(Ct,ft)]),i4=(it,ft,vt)=>{const Ct=it[ft];return Ho(Ct.cells,(Ft,jt)=>o4(it,ft,jt,vt)?[]:[Ft])},L3=(it,ft,vt,Ct,Ft)=>{const jt=Su(it).rows,en=Ho(ft,Io=>s4(jt,Io,Ct)),pn=Ln(jt,Io=>rT(Io.cells)),En=Zv(en,pn),to=Wr(vt,pn);return cT(it,en,Ct,Ft,r4,to,En)},F3=(it,ft,vt,Ct,Ft,jt,en)=>{const{cols:pn,rows:En}=Su(it),to=En[ft[0]],Io=Ho(ft,ar=>i4(En,ar,Ft)),hr=Ln(to.cells,(ar,wr)=>rT(s4(En,wr,Ft))),Or=[...En];An(ft,ar=>{Or[ar]=en.transformRow(En[ar],vt)});const Tr=[...pn,...Or],xr=_2(to,hr),ts=px(Ct,hr);return cT(Tr,Io,Ft,jt,en.transformCell,ts,xr)},BC=(it,ft,vt,Ct)=>{const Ft=Su(it).rows,jt=Ln(ft,en=>M0(Ft[en.row],en.column));return cT(it,jt,vt,Ct,r4,Vt.none,an)},x2={generate:it=>{if(!nt(it))throw new Error("cases must be an array");if(it.length===0)throw new Error("there must be at least one case");const ft=[],vt={};return An(it,(Ct,Ft)=>{const jt=zn(Ct);if(jt.length!==1)throw new Error("one and only one name per case");const en=jt[0],pn=Ct[en];if(vt[en]!==void 0)throw new Error("duplicate key detected:"+en);if(en==="cata")throw new Error("cannot have a case named cata (sorry)");if(!nt(pn))throw new Error("case arguments must be an array");ft.push(en),vt[en]=(...En)=>{const to=En.length;if(to!==pn.length)throw new Error("Wrong number of arguments to case "+en+". Expected "+pn.length+" ("+pn+"), got "+to);return{fold:(...hr)=>{if(hr.length!==it.length)throw new Error("Wrong number of arguments to fold. Expected "+it.length+", got "+hr.length);return hr[Ft].apply(null,En)},match:hr=>{const Or=zn(hr);if(ft.length!==Or.length)throw new Error("Wrong number of arguments to match. Expected: "+ft.join(",")+`
Actual: `+Or.join(","));if(!mo(ft,xr=>Vn(Or,xr)))throw new Error("Not all branches were specified when using match. Specified: "+Or.join(", ")+`
Required: `+ft.join(", "));return hr[en].apply(null,En)},log:hr=>{console.log(hr,{constructors:ft,constructor:en,params:En})}}}}),vt}},$C={...x2.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},dT=(it,ft)=>it.length===0?$C.none():it.length===1?$C.only(0):ft===0?$C.left(0,1):ft===it.length-1?$C.right(ft-1,ft):ft>0&&ft<it.length-1?$C.middle(ft-1,ft,ft+1):$C.none(),Kv=(it,ft,vt,Ct,Ft)=>{const jt=it.slice(0),en=dT(it,ft),pn=Et(Ln(jt,Et(0))),En=Or=>Ct.singleColumnWidth(jt[Or],vt),to=(Or,Tr)=>Ft.calcLeftEdgeDeltas(jt,Or,Tr,vt,Ct.minCellWidth(),Ct.isRelative),Io=(Or,Tr,xr)=>Ft.calcMiddleDeltas(jt,Or,Tr,xr,vt,Ct.minCellWidth(),Ct.isRelative),hr=(Or,Tr)=>Ft.calcRightEdgeDeltas(jt,Or,Tr,vt,Ct.minCellWidth(),Ct.isRelative);return en.fold(pn,En,to,Io,hr)},gL=(it,ft,vt)=>{let Ct=0;for(let Ft=it;Ft<ft;Ft++)Ct+=vt[Ft]!==void 0?vt[Ft]:0;return Ct},fT=(it,ft)=>{const vt=xl.justCells(it);return Ln(vt,Ct=>{const Ft=gL(Ct.column,Ct.column+Ct.colspan,ft);return{element:Ct.element,width:Ft,colspan:Ct.colspan}})},hT=(it,ft)=>{const vt=xl.justColumns(it);return Ln(vt,(Ct,Ft)=>({element:Ct.element,width:ft[Ft],colspan:Ct.colspan}))},mL=(it,ft)=>Ln(it.all,(vt,Ct)=>({element:vt.element,height:ft[Ct]})),yL=it=>Ro(it,(ft,vt)=>ft+vt,0),a4=(it,ft)=>xl.hasColumns(it)?hT(it,ft):fT(it,ft),fE=(it,ft,vt)=>{const Ct=a4(it,ft);An(Ct,Ft=>{vt.setElementWidth(Ft.element,Ft.width)})},l4=(it,ft,vt,Ct,Ft)=>{const jt=xl.fromTable(it),en=Ft.getCellDelta(ft),pn=Ft.getWidths(jt,Ft),En=vt===jt.grid.columns-1,to=Ct.clampTableDelta(pn,vt,en,Ft.minCellWidth(),En),Io=Kv(pn,vt,to,Ft,Ct),hr=Ln(Io,(Or,Tr)=>Or+pn[Tr]);fE(jt,hr,Ft),Ct.resizeTable(Ft.adjustTableWidth,to,En)},z3=(it,ft,vt)=>{const Ct=xl.fromTable(it),Ft=bC(Ct,it),jt=Ln(Ft,(En,to)=>vt===to?Math.max(ft+En,u_()):En),en=mL(Ct,jt);An(en,En=>{T1(En.element,En.height)}),An(xl.justCells(Ct),En=>{Yw(En.element)});const pn=yL(jt);T1(it,pn)},bL=(it,ft,vt,Ct,Ft)=>{const jt=xl.generate(ft),en=Ct.getWidths(jt,Ct),pn=Ct.pixelWidth(),{newSizes:En,delta:to}=Ft.calcRedestributedWidths(en,pn,vt.pixelDelta,Ct.isRelative);fE(jt,En,Ct),Ct.adjustTableWidth(to)},hE=(it,ft,vt,Ct)=>{const Ft=xl.generate(ft),jt=Ct.getWidths(Ft,Ct);fE(Ft,jt,Ct)},GC=it=>On(it,(vt,Ct)=>ln(vt,jt=>jt.column===Ct.column)?vt:vt.concat([Ct]),[]).sort((vt,Ct)=>vt.column-Ct.column),aw=Fr("col"),pT=Fr("colgroup"),B3=it=>Vs(it)==="tr"||pT(it),gT=it=>{const ft=Tp(it,"colspan",1),vt=Tp(it,"rowspan",1);return{element:it,colspan:ft,rowspan:vt}},$3=(it,ft=gT)=>{const vt=pn=>aw(pn.element)?it.col(pn):it.cell(pn),Ct=pn=>pT(pn.element)?it.colgroup(pn):it.row(pn),Ft=pn=>{if(B3(pn))return Ct({element:pn});{const En=pn,to=vt(ft(En));return jt=Vt.some({item:En,replacement:to}),to}};let jt=Vt.none();return{getOrInit:(pn,En)=>jt.fold(()=>Ft(pn),to=>En(pn,to.item)?to.replacement:Ft(pn))}},G3=it=>ft=>{const vt=[],Ct=(en,pn)=>Yt(vt,En=>pn(En.item,en)),Ft=en=>{const pn=it==="td"?{scope:null}:{},En=ft.replace(en,it,pn);return vt.push({item:en,sub:En}),En};return{replaceOrInit:(en,pn)=>{if(B3(en)||aw(en))return en;{const En=en;return Ct(En,pn).fold(()=>Ft(En),to=>pn(en,to.item)?to.sub:Ft(En))}}}},j3=it=>Un(it,"scope").map(ft=>ft.substr(0,3)),Cy={modification:$3,transform:G3,merging:it=>({unmerge:Ct=>{const Ft=j3(Ct);return Ft.each(jt=>xa(Ct,"scope",jt)),()=>{const jt=it.cell({element:Ct,colspan:1,rowspan:1});return rp(jt,"width"),rp(Ct,"width"),Ft.each(en=>xa(jt,"scope",en)),jt}},merge:Ct=>{const Ft=()=>{const jt=V0(Ln(Ct,j3));if(jt.length===0)return Vt.none();{const en=jt[0],pn=["row","col"];return ln(jt,to=>to!==en&&Vn(pn,to))?Vt.none():Vt.from(en)}};return rp(Ct[0],"width"),Ft().fold(()=>Bn(Ct[0],"scope"),jt=>xa(Ct[0],"scope",jt+"group")),Et(Ct[0])}})},w2=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],u4=(it,ft)=>{const vt=it.property().name(ft);return Vn(["ol","ul"],vt)},lw=(it,ft)=>{const vt=it.property().name(ft);return Vn(w2,vt)},C2=(it,ft)=>Vn(["br","img","hr","input"],it.property().name(ft)),U3=ix(),Uo=it=>lw(U3,it),Yv=it=>u4(U3,it),k2=it=>C2(U3,it),vL=it=>{const ft=Fr("br"),vt=En=>mo(En,to=>ft(to)||go(to)&&_h(to).trim().length===0),Ct=En=>Vs(En)==="li"||cr(En,Yv).isSome(),Ft=En=>sm(En).map(to=>Uo(to)?!0:k2(to)?Vs(to)!=="img":!1).getOr(!1),jt=En=>n2(En).bind(to=>{const Io=Ft(to);return Nl(to).map(hr=>Io===!0||Ct(hr)||ft(to)||Uo(hr)&&!lr(En,hr)?[]:[ro.fromTag("br")])}).getOr([]),pn=(()=>{const En=Ho(it,to=>{const Io=_s(to);return vt(Io)?[]:Io.concat(jt(to))});return En.length===0?[ro.fromTag("br")]:En})();Np(it[0]),Dp(it[0],pn)},pE=it=>Jx(it,!0),pv=it=>{Mv(it).length===0&&fp(it)},jC=(it,ft)=>({grid:it,cursor:ft}),d4=it=>Nn(it,ft=>Nn(ft.cells,vt=>{const Ct=vt.element;return c_(pE(Ct),Ct)})),f4=(it,ft,vt)=>{var Ct,Ft;const jt=Su(it).rows;return Vt.from((Ft=(Ct=jt[ft])===null||Ct===void 0?void 0:Ct.cells[vt])===null||Ft===void 0?void 0:Ft.element).filter(pE).orThunk(()=>d4(jt))},_0=(it,ft,vt)=>{const Ct=f4(it,ft,vt);return jC(it,Ct)},mT=it=>On(it,(vt,Ct)=>ln(vt,jt=>jt.row===Ct.row)?vt:vt.concat([Ct]),[]).sort((vt,Ct)=>vt.row-Ct.row),h4=(it,ft,vt,Ct)=>{const Ft=ft[0].row,jt=mT(ft),en=Ro(jt,(pn,En)=>({grid:hx(pn.grid,Ft,En.row+pn.delta,vt,Ct.getOrInit),delta:pn.delta+1}),{grid:it,delta:0}).grid;return _0(en,Ft,ft[0].column)},_L=(it,ft,vt,Ct)=>{const Ft=mT(ft),jt=Ft[Ft.length-1],en=jt.row+jt.rowspan,pn=Ro(Ft,(En,to)=>hx(En,en,to.row,vt,Ct.getOrInit),it);return _0(pn,en,ft[0].column)},g4=(it,ft,vt,Ct)=>{const Ft=ft.details,jt=GC(Ft),en=jt[0].column,pn=Ro(jt,(En,to)=>({grid:hL(En.grid,en,to.column+En.delta,vt,Ct.getOrInit),delta:En.delta+1}),{grid:it,delta:0}).grid;return _0(pn,Ft[0].row,en)},xL=(it,ft,vt,Ct)=>{const Ft=ft.details,jt=Ft[Ft.length-1],en=jt.column+jt.colspan,pn=GC(Ft),En=Ro(pn,(to,Io)=>hL(to,en,Io.column,vt,Ct.getOrInit),it);return _0(En,Ft[0].row,en)},m4=(it,ft,vt,Ct)=>{const Ft=GC(ft),jt=Ln(Ft,pn=>pn.column),en=L3(it,jt,!0,vt,Ct.replaceOrInit);return _0(en,ft[0].row,ft[0].column)},wL=(it,ft,vt,Ct)=>{const Ft=BC(it,ft,vt,Ct.replaceOrInit);return _0(Ft,ft[0].row,ft[0].column)},CL=(it,ft,vt,Ct)=>{const Ft=GC(ft),jt=Ln(Ft,pn=>pn.column),en=L3(it,jt,!1,vt,Ct.replaceOrInit);return _0(en,ft[0].row,ft[0].column)},y4=(it,ft,vt,Ct)=>{const Ft=BC(it,ft,vt,Ct.replaceOrInit);return _0(Ft,ft[0].row,ft[0].column)},UC=(it,ft)=>(vt,Ct,Ft,jt,en)=>{const pn=mT(Ct),En=Ln(pn,Io=>Io.row),to=F3(vt,En,it,ft,Ft,jt.replaceOrInit,en);return _0(to,Ct[0].row,Ct[0].column)},kL=UC("thead",!0),b4=UC("tbody",!1),SL=UC("tfoot",!1),mp=(it,ft,vt,Ct)=>{const Ft=GC(ft.details),jt=n4(it,Ln(Ft,pn=>pn.column)),en=jt.length>0?jt[0].cells.length-1:0;return _0(jt,Ft[0].row,Math.min(Ft[0].column,en))},H3=(it,ft,vt,Ct)=>{const Ft=mT(ft),jt=Zu(it,Ft[0].row,Ft[Ft.length-1].row),en=Math.max(Su(jt).rows.length-1,0);return _0(jt,Math.min(ft[0].row,en),ft[0].column)},v4=(it,ft,vt,Ct)=>{const Ft=ft.cells;vL(Ft);const jt=sw(it,ft.bounds,vt,Ct.merge(Ft));return jC(jt,Vt.from(Ft[0]))},_4=(it,ft,vt,Ct)=>{const jt=Ro(ft,(en,pn)=>D3(en,pn,vt,Ct.unmerge(pn)),it);return jC(jt,Vt.from(ft[0]))},V3=(it,ft,vt,Ct)=>{const jt=((En,to)=>{const Io=xl.fromTable(En);return FC(Io,to,!0)})(ft.clipboard,ft.generators),en=sy(ft.row,ft.column);return b2(en,it,jt,ft.generators,vt).fold(()=>jC(it,Vt.some(ft.element)),En=>_0(En,ft.row,ft.column))},km=(it,ft,vt)=>{const Ct=K_(it,vt.section),Ft=xl.generate(Ct);return FC(Ft,ft,!0)},Uy=(it,ft,vt,Ct)=>{const Ft=Su(it).rows,jt=ft.cells[0].column,en=Ft[ft.cells[0].row],pn=km(ft.clipboard,ft.generators,en),En=zC(jt,it,pn,ft.generators,vt);return _0(En,ft.cells[0].row,ft.cells[0].column)},x4=(it,ft,vt,Ct)=>{const Ft=Su(it).rows,jt=ft.cells[ft.cells.length-1].column+ft.cells[ft.cells.length-1].colspan,en=Ft[ft.cells[0].row],pn=km(ft.clipboard,ft.generators,en),En=zC(jt,it,pn,ft.generators,vt);return _0(En,ft.cells[0].row,jt)},W3=(it,ft,vt,Ct)=>{const Ft=Su(it).rows,jt=ft.cells[0].row,en=Ft[jt],pn=km(ft.clipboard,ft.generators,en),En=qu(jt,it,pn,ft.generators,vt);return _0(En,ft.cells[0].row,ft.cells[0].column)},q3=(it,ft,vt,Ct)=>{const Ft=Su(it).rows,jt=ft.cells[ft.cells.length-1].row+ft.cells[ft.cells.length-1].rowspan,en=Ft[ft.cells[0].row],pn=km(ft.clipboard,ft.generators,en),En=qu(jt,it,pn,ft.generators,vt);return _0(En,jt,ft.cells[0].column)},EL=(it,ft)=>{const vt=xl.fromTable(it);return wy(vt,ft).bind(Ft=>{const jt=Ft[Ft.length-1],en=Ft[0].column,pn=jt.column+jt.colspan,En=lo(Ln(vt.all,to=>no(to.cells,Io=>Io.column>=en&&Io.column<pn)));return OC(En)}).getOr("")},yT=(it,ft)=>{const vt=xl.fromTable(it);return wy(vt,ft).bind(OC).getOr("")},w4=(it,ft)=>{const vt=xl.fromTable(it);return wy(vt,ft).bind(Ft=>{const jt=Ft[Ft.length-1],en=Ft[0].row,pn=jt.row+jt.rowspan,En=vt.all.slice(en,pn);return WM(En)}).getOr("")},gE=(it,ft,vt,Ct)=>hE(it,ft,vt,Ct.sizing),C4=(it,ft,vt,Ct)=>bL(it,ft,vt,Ct.sizing,Ct.resize),pm=(it,ft)=>ln(ft,vt=>vt.column===0&&vt.isLocked),AL=(it,ft)=>ln(ft,vt=>vt.column+vt.colspan>=it.grid.columns&&vt.isLocked),gv=(it,ft)=>{const vt=v_(it),Ct=GC(ft);return On(Ct,(Ft,jt)=>{const pn=vt[jt.column].map(Lv).getOr(0);return Ft+pn},0)},np=it=>(ft,vt)=>wy(ft,vt).filter(Ct=>!(it?pm:AL)(ft,Ct)).map(Ct=>({details:Ct,pixelDelta:gv(ft,Ct)})),R_=(it,ft)=>F1(it,ft).map(vt=>({details:vt,pixelDelta:-gv(it,vt)})),HC=it=>(ft,vt)=>rw(ft,vt).filter(Ct=>!(it?pm:AL)(ft,Ct.cells)),Z3=Cy.transform("th"),mE=Cy.transform("td"),k4=i0(h4,wy,Tt,Tt,Cy.modification),cw=i0(_L,wy,Tt,Tt,Cy.modification),a0=i0(g4,np(!0),C4,Tt,Cy.modification),M_=i0(xL,np(!1),C4,Tt,Cy.modification),S4=i0(mp,R_,C4,pv,Cy.modification),TL=i0(H3,wy,Tt,pv,Cy.modification),K3=i0(m4,F1,Tt,Tt,Z3),bT=i0(CL,F1,Tt,Tt,mE),Y3=i0(kL,F1,Tt,Tt,Z3),X3=i0(b4,F1,Tt,Tt,mE),vT=i0(SL,F1,Tt,Tt,mE),qr=i0(wL,F1,Tt,Tt,Z3),yE=i0(y4,F1,Tt,Tt,mE),J3=i0(v4,aE,gE,Tt,Cy.merging),E4=i0(_4,iT,gE,Tt,Cy.merging),IL=i0(V3,nB,gE,Tt,Cy.modification),l0=i0(Uy,HC(!0),Tt,Tt,Cy.modification),T4=i0(x4,HC(!1),Tt,Tt,Cy.modification),uw=i0(W3,rw,Tt,Tt,Cy.modification),I4=i0(q3,rw,Tt,Tt,Cy.modification),Q3=EL,R4=yT,c0=w4,dw=(it,ft)=>it.dispatch("NewRow",{node:ft}),e5=(it,ft)=>it.dispatch("NewCell",{node:ft}),S2=(it,ft,vt)=>{it.dispatch("TableModified",{...vt,table:ft})},RL=(it,ft,vt,Ct,Ft)=>{it.dispatch("TableSelectionChange",{cells:ft,start:vt,finish:Ct,otherCells:Ft})},gm=it=>{it.dispatch("TableSelectionClear")},mm=(it,ft,vt,Ct,Ft)=>{it.dispatch("ObjectResizeStart",{target:ft,width:vt,height:Ct,origin:Ft})},n0=(it,ft,vt,Ct,Ft)=>{it.dispatch("ObjectResized",{target:ft,width:vt,height:Ct,origin:Ft})},ym={structure:!1,style:!0},hu={structure:!0,style:!1},tm={structure:!0,style:!0},_T=(it,ft)=>O1(it)?Bt.percentageSize(ft):e0(it)?Bt.pixelSize(ft):Bt.getTableSize(ft),t5=(it,ft,vt)=>{const Ct=bm=>Vs(fy(bm))==="table",Ft=bm=>!Ct(it)||f2(bm).rows>1,jt=bm=>!Ct(it)||f2(bm).columns>1,en=Kx(it),pn=s2(it)?Tt:nT,En=bm=>{switch(Bp(it)){case"section":return NC.section();case"sectionCells":return NC.sectionCells();case"cells":return NC.cells();default:return NC.getTableSectionType(bm,"section")}},to=(bm,lI)=>lI.cursor.fold(()=>{const _x=Mv(bm);return rn(_x).filter(Os).map($a=>{vt.clearSelectedCells(bm.dom);const w0=it.dom.createRng();return w0.selectNode($a.dom),it.selection.setRng(w0),xa($a,"data-mce-selected","1"),w0})},_x=>{const $a=RC(_x),w0=it.dom.createRng();return w0.setStart($a.element.dom,$a.offset),w0.setEnd($a.element.dom,$a.offset),it.selection.setRng(w0),vt.clearSelectedCells(bm.dom),Vt.some(w0)}),Io=(bm,lI,_x,$a)=>(w0,cI,uI=!1)=>{jy(w0);const $P=ro.fromDom(it.getDoc()),Sw=Z0(_x,$P,en),q2={sizing:_T(it,w0),resize:s2(it)?ow():ux(),section:En(w0)};return lI(w0)?bm(w0,cI,Sw,q2).bind(dI=>{ft.refresh(w0.dom),An(dI.newRows,WE=>{dw(it,WE.dom)}),An(dI.newCells,WE=>{e5(it,WE.dom)});const R8=to(w0,dI);return Os(w0)&&(jy(w0),uI||S2(it,w0.dom,$a)),R8.map(WE=>({rng:WE,effect:$a}))}):Vt.none()},hr=Io(TL,Ft,Tt,hu),Or=Io(S4,jt,Tt,hu),Tr=Io(k4,an,Tt,hu),xr=Io(cw,an,Tt,hu),ts=Io(a0,an,pn,hu),ar=Io(M_,an,pn,hu),wr=Io(J3,an,Tt,hu),kr=Io(E4,an,Tt,hu),Fs=Io(l0,an,Tt,hu),Fl=Io(T4,an,Tt,hu),vu=Io(uw,an,Tt,hu),Ku=Io(I4,an,Tt,hu),up=Io(IL,an,Tt,tm),Ky=Io(qr,an,Tt,hu),U1=Io(yE,an,Tt,hu),W2=Io(K3,an,Tt,hu),N_=Io(bT,an,Tt,hu),Nu=Io(Y3,an,Tt,hu),Q0=Io(X3,an,Tt,hu),ey=Io(vT,an,Tt,hu);return{deleteRow:hr,deleteColumn:Or,insertRowsBefore:Tr,insertRowsAfter:xr,insertColumnsBefore:ts,insertColumnsAfter:ar,mergeCells:wr,unmergeCells:kr,pasteColsBefore:Fs,pasteColsAfter:Fl,pasteRowsBefore:vu,pasteRowsAfter:Ku,pasteCells:up,makeCellsHeader:Ky,unmakeCellsHeader:U1,makeColumnsHeader:W2,unmakeColumnsHeader:N_,makeRowsHeader:Nu,makeRowsBody:Q0,makeRowsFooter:ey,getTableRowType:c0,getTableCellType:R4,getTableColType:Q3}},n5=(it,ft,vt)=>{const Ct=Tp(it,ft,1);vt===1||Ct<=1?Bn(it,ft):xa(it,ft,Math.min(vt,Ct))},o5=(it,ft)=>vt=>{const Ct=vt.column+vt.colspan-1,Ft=vt.column;return Ct>=it&&Ft<ft},M4=(it,ft,vt)=>{if(xl.hasColumns(it)){const Ct=no(xl.justColumns(it),o5(ft,vt)),Ft=Ln(Ct,en=>{const pn=Wm(en.element);return n5(pn,"span",vt-ft),pn}),jt=ro.fromTag("colgroup");return Dp(jt,Ft),[jt]}else return[]},P4=(it,ft,vt)=>Ln(it.all,Ct=>{const Ft=no(Ct.cells,o5(ft,vt)),jt=Ln(Ft,pn=>{const En=Wm(pn.element);return n5(En,"colspan",vt-ft),En}),en=ro.fromTag("tr");return Dp(en,jt),en}),bE=(it,ft)=>{const vt=xl.fromTable(it);return F1(vt,ft).map(Ft=>{const jt=Ft[Ft.length-1],en=Ft[0].column,pn=jt.column+jt.colspan,En=M4(vt,en,pn),to=P4(vt,en,pn);return[...En,...to]})},xT=(it,ft,vt)=>{const Ct=xl.fromTable(it);return wy(Ct,ft).bind(jt=>{const en=FC(Ct,vt,!1),En=Su(en).rows.slice(jt[0].row,jt[jt.length-1].row+jt[jt.length-1].rowspan),to=Ho(En,hr=>{const Or=no(hr.cells,Tr=>!Tr.isLocked);return Or.length>0?[{...hr,cells:Or}]:[]}),Io=O3(to);return c_(Io.length>0,Io)}).map(jt=>KM(jt))},vE=x2.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),O4=(it,ft,vt)=>{const Ct=vt.substring(0,vt.length-it.length),Ft=parseFloat(Ct);return Ct===Ft.toString()?ft(Ft):vE.invalid(vt)},E2={...vE,from:it=>Mm(it,"%")?O4("%",vE.percent,it):Mm(it,"px")?O4("px",vE.pixels,it):vE.invalid(it)},ky=(it,ft)=>Ln(it,vt=>E2.from(vt).fold(()=>vt,Ft=>Ft/ft*100+"%",Ft=>Ft+"%")),ML=(it,ft,vt)=>{const Ct=vt/ft;return Ln(it,Ft=>E2.from(Ft).fold(()=>Ft,en=>en*Ct+"px",en=>en/100*vt+"px"))},PL=(it,ft)=>{const vt=it.fold(()=>Et(""),Ct=>{const Ft=Ct/ft;return Et(Ft+"px")},()=>{const Ct=100/ft;return Et(Ct+"%")});return uo(ft,vt)},mv=(it,ft,vt)=>it.fold(()=>ft,Ct=>ML(ft,vt,Ct),Ct=>ky(ft,vt)),VC=(it,ft,vt)=>{const Ct=E2.from(vt),Ft=mo(it,jt=>jt==="0px")?PL(Ct,it.length):mv(Ct,it,ft);return r5(Ft)},T2=(it,ft)=>it.length===0?ft:Ro(it,(vt,Ct)=>E2.from(Ct).fold(Et(0),$t,$t)+vt,0),P_=(it,ft)=>{const vt=Math.floor(it);return{value:vt+ft,remainder:it-vt}},N0=(it,ft)=>E2.from(it).fold(Et(it),vt=>vt+ft+"px",vt=>vt+ft+"%"),r5=it=>{if(it.length===0)return it;const ft=Ro(it,(Ct,Ft)=>{const jt=E2.from(Ft).fold(()=>({value:Ft,remainder:0}),en=>P_(en,"px"),en=>({value:en+"%",remainder:0}));return{output:[jt.value].concat(Ct.output),remainder:Ct.remainder+jt.remainder}},{output:[],remainder:0}),vt=ft.output;return vt.slice(0,vt.length-1).concat([N0(vt[vt.length-1],Math.round(ft.remainder))])},fw=E2.from,D4=(it,ft,vt)=>{An(ft,Ct=>{const Ft=it.slice(Ct.column,Ct.colspan+Ct.column),jt=T2(Ft,my());Xs(Ct.element,"width",jt+vt)})},wT=(it,ft,vt)=>{An(ft,(Ct,Ft)=>{const jt=T2([it[Ft]],my());Xs(Ct.element,"width",jt+vt)})},s5=(it,ft,vt)=>{An(vt,Ct=>{rp(Ct.element,"height")}),An(ft,(Ct,Ft)=>{Xs(Ct.element,"height",it[Ft])})},_E=it=>fw(it).fold(Et("px"),Et("px"),Et("%")),CT=(it,ft,vt)=>{const Ct=xl.fromTable(it),Ft=Ct.all,jt=xl.justCells(Ct),en=xl.justColumns(Ct);ft.each(pn=>{const En=_E(pn),to=Wl(it),Io=hm(Ct,it),hr=VC(Io,to,pn);xl.hasColumns(Ct)?wT(hr,en,En):D4(hr,jt,En),Xs(it,"width",pn)}),vt.each(pn=>{const En=rr(it),to=Rp(Ct,it),Io=VC(to,En,pn);s5(Io,Ft,jt),Xs(it,"height",pn)})},N4=_y,L4=YS,F4=__,xE=it=>{Bn(it,"width"),Bn(it,"height")},I2=it=>{const ft=Jm(it);CT(it,Vt.some(ft),Vt.none()),xE(it)},wE=it=>{const ft=Jw(it);CT(it,Vt.some(ft),Vt.none()),xE(it)},OL=it=>{const ft=Qp(it);CT(it,Vt.none(),Vt.some(ft)),xE(it)},i5=it=>{rp(it,"width");const ft=I0(it),vt=ft.length>0?ft:Mv(it);An(vt,Ct=>{rp(Ct,"width"),xE(Ct)}),xE(it)},DL={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},kT=()=>ro.fromTag("th"),NL=()=>ro.fromTag("td"),z4=()=>ro.fromTag("col"),LL=(it,ft,vt,Ct)=>{const Ft=ro.fromTag("tr");for(let jt=0;jt<it;jt++){const en=Ct<ft||jt<vt?kT():NL();jt<vt&&xa(en,"scope","row"),Ct<ft&&xa(en,"scope","col"),ku(en,ro.fromTag("br")),ku(Ft,en)}return Ft},B4=it=>{const ft=ro.fromTag("colgroup");return uo(it,()=>ku(ft,z4())),ft},CE=(it,ft,vt,Ct)=>uo(it,Ft=>LL(ft,vt,Ct,Ft)),$4=(it,ft,vt,Ct,Ft,jt=DL)=>{const en=ro.fromTag("table"),pn=Ft!=="cells";gu(en,jt.styles),ju(en,jt.attributes),jt.colGroups&&ku(en,B4(ft));const En=Math.min(it,vt);if(pn&&vt>0){const Tr=ro.fromTag("thead");ku(en,Tr);const ts=CE(vt,ft,Ft==="sectionCells"?En:0,Ct);Dp(Tr,ts)}const to=ro.fromTag("tbody");ku(en,to);const Io=pn?it-En:it,Or=CE(Io,ft,pn?0:vt,Ct);return Dp(to,Or),en},J0=it=>it.dom.innerHTML,a5=it=>{const ft=ro.fromTag("div"),vt=ro.fromDom(it.dom.cloneNode(!0));return ku(ft,vt),J0(ft)},G4=(it,ft)=>{it.selection.select(ft.dom,!0),it.selection.collapse(!0)},l5=(it,ft)=>{f0(ft,"td,th").each(Zt(G4,it))},kE=(it,ft)=>{An(Zl(ft,"tr"),vt=>{dw(it,vt.dom),An(Zl(vt,"th,td"),Ct=>{e5(it,Ct.dom)})})},FL=it=>_(it)&&it.indexOf("%")!==-1,zL=(it,ft,vt,Ct,Ft)=>{const jt=ZA(it),en={styles:jt,attributes:qA(it),colGroups:nL(it)};return it.undoManager.ignore(()=>{const pn=$4(vt,ft,Ft,Ct,Bp(it),en);xa(pn,"data-mce-id","__mce");const En=a5(pn);it.insertContent(En),it.addVisual()}),f0(fy(it),'table[data-mce-id="__mce"]').map(pn=>(e0(it)?wE(pn):Yx(it)?i5(pn):(O1(it)||FL(jt.width))&&I2(pn),jy(pn),Bn(pn,"data-mce-id"),kE(it,pn),l5(it,pn),pn.dom)).getOrNull()},BL=(it,ft,vt,Ct={})=>{const Ft=jt=>wt(jt)&&jt>0;if(Ft(ft)&&Ft(vt)){const jt=Ct.headerRows||0,en=Ct.headerColumns||0;return zL(it,vt,ft,en,jt)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var ST=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const j4="x-tinymce/dom-table-",c5=j4+"rows",u5=j4+"columns",SE=it=>{const ft=ST.FakeClipboardItem(it);ST.write([ft])},d5=it=>{var ft;const vt=(ft=ST.read())!==null&&ft!==void 0?ft:[];return Nn(vt,Ct=>Vt.from(Ct.getType(it)))},U4=it=>{d5(it).isSome()&&ST.clear()},H4=it=>{it.fold($L,ft=>SE({[c5]:ft}))},V4=()=>d5(c5),$L=()=>U4(c5),W4=it=>{it.fold(q4,ft=>SE({[u5]:ft}))},f5=()=>d5(u5),q4=()=>U4(u5),hw=it=>Vp(eE(it),Gy(it)).filter(wl),Z4=it=>eT(eE(it),Gy(it)).filter(wl),GL=(it,ft)=>{const vt=Gy(it),Ct=()=>hw(it).each(ar=>{Zm(ar,vt).filter(Nt(vt)).each(wr=>{const kr=ro.fromText("");if(Cp(wr,kr),fp(wr),it.dom.isEmpty(it.getBody()))it.setContent(""),it.selection.setCursorLocation();else{const Fs=it.dom.createRng();Fs.setStart(kr.dom,0),Fs.setEnd(kr.dom,0),it.selection.setRng(Fs),it.nodeChanged()}})}),Ft=ar=>hw(it).each(wr=>{Yx(it)||e0(it)||O1(it)||Zm(wr,vt).each(Fs=>{ar==="relative"&&!N4(Fs)?I2(Fs):ar==="fixed"&&!L4(Fs)?wE(Fs):ar==="responsive"&&!F4(Fs)&&i5(Fs),jy(Fs),S2(it,Fs.dom,hu)})}),jt=ar=>Zm(ar,vt),en=ar=>Z4(it).bind(wr=>jt(wr).map(kr=>ar(kr,wr))),pn=(ar,wr)=>{en(kr=>{it.formatter.toggle("tableclass",{value:wr},kr.dom),S2(it,kr.dom,ym)})},En=(ar,wr)=>{en(kr=>{const Fs=bu(it),vu=mo(Fs,Ku=>it.formatter.match("tablecellclass",{value:wr},Ku.dom))?it.formatter.remove:it.formatter.apply;An(Fs,Ku=>vu("tablecellclass",{value:wr},Ku.dom)),S2(it,kr.dom,ym)})},to=()=>{hw(it).each(ar=>{Zm(ar,vt).each(wr=>{qm(wr,"caption").fold(()=>{const kr=ro.fromTag("caption");ku(kr,ro.fromText("Caption")),g1(wr,kr,0),it.selection.setCursorLocation(kr.dom,0)},kr=>{Fr("caption")(ar)&&nr("td",wr).each(Fs=>it.selection.setCursorLocation(Fs.dom,0)),fp(kr)}),S2(it,wr.dom,hu)})})},Io=ar=>{it.focus()},hr=(ar,wr=!1)=>en((kr,Fs)=>{const Fl=lx(bu(it),kr,Fs);ar(kr,Fl,wr).each(Io)}),Or=()=>en((ar,wr)=>{const kr=lx(bu(it),ar,wr),Fs=Z0(Tt,ro.fromDom(it.getDoc()),Vt.none());return xT(ar,kr,Fs)}),Tr=()=>en((ar,wr)=>{const kr=lx(bu(it),ar,wr);return bE(ar,kr)}),xr=(ar,wr)=>wr().each(kr=>{const Fs=Ln(kr,Fl=>Wm(Fl));en((Fl,vu)=>{const Ku=K0(ro.fromDom(it.getDoc())),up=T3(bu(it),vu,Fs,Ku);ar(Fl,up).each(Io)})}),ts=ar=>(wr,kr)=>Ir(kr,"type").each(Fs=>{hr(ar(Fs),kr.no_events)});Hn({mceTableSplitCells:()=>hr(ft.unmergeCells),mceTableMergeCells:()=>hr(ft.mergeCells),mceTableInsertRowBefore:()=>hr(ft.insertRowsBefore),mceTableInsertRowAfter:()=>hr(ft.insertRowsAfter),mceTableInsertColBefore:()=>hr(ft.insertColumnsBefore),mceTableInsertColAfter:()=>hr(ft.insertColumnsAfter),mceTableDeleteCol:()=>hr(ft.deleteColumn),mceTableDeleteRow:()=>hr(ft.deleteRow),mceTableCutCol:()=>Tr().each(ar=>{W4(ar),hr(ft.deleteColumn)}),mceTableCutRow:()=>Or().each(ar=>{H4(ar),hr(ft.deleteRow)}),mceTableCopyCol:()=>Tr().each(ar=>W4(ar)),mceTableCopyRow:()=>Or().each(ar=>H4(ar)),mceTablePasteColBefore:()=>xr(ft.pasteColsBefore,f5),mceTablePasteColAfter:()=>xr(ft.pasteColsAfter,f5),mceTablePasteRowBefore:()=>xr(ft.pasteRowsBefore,V4),mceTablePasteRowAfter:()=>xr(ft.pasteRowsAfter,V4),mceTableDelete:Ct,mceTableCellToggleClass:En,mceTableToggleClass:pn,mceTableToggleCaption:to,mceTableSizingMode:(ar,wr)=>Ft(wr),mceTableCellType:ts(ar=>ar==="th"?ft.makeCellsHeader:ft.unmakeCellsHeader),mceTableColType:ts(ar=>ar==="th"?ft.makeColumnsHeader:ft.unmakeColumnsHeader),mceTableRowType:ts(ar=>{switch(ar){case"header":return ft.makeRowsHeader;case"footer":return ft.makeRowsFooter;default:return ft.makeRowsBody}})},(ar,wr)=>it.addCommand(wr,ar)),it.addCommand("mceInsertTable",(ar,wr)=>{BL(it,wr.rows,wr.columns,wr.options)}),it.addCommand("mceTableApplyCellStyle",(ar,wr)=>{const kr=vu=>"tablecell"+vu.toLowerCase().replace("-","");if(!_e(wr))return;const Fs=no(bu(it),wl);if(Fs.length===0)return;const Fl=oo(wr,(vu,Ku)=>it.formatter.has(kr(Ku))&&_(vu));as(Fl)||(Hn(Fl,(vu,Ku)=>{const up=kr(Ku);An(Fs,Ky=>{vu===""?it.formatter.remove(up,{value:null},Ky.dom,!0):it.formatter.apply(up,{value:vu},Ky.dom)})}),jt(Fs[0]).each(vu=>S2(it,vu.dom,ym)))})},jL=(it,ft)=>{const vt=Gy(it),Ct=Ft=>eT(eE(it)).bind(jt=>Zm(jt,vt).map(en=>{const pn=lx(bu(it),en,jt);return Ft(en,pn)})).getOr("");Hn({mceTableRowType:()=>Ct(ft.getTableRowType),mceTableCellType:()=>Ct(ft.getTableCellType),mceTableColType:()=>Ct(ft.getTableColType)},(Ft,jt)=>it.addQueryValueHandler(jt,Ft))},ET=x2.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Xv=(it,ft,vt,Ct)=>it.fold(ft,vt,Ct),AT=it=>it.fold($t,$t,$t),TT=ET.before,h5=ET.on,K4=ET.after,nm={before:TT,on:h5,after:K4,cata:Xv,getStart:AT},WC={create:(it,ft)=>({selection:it,kill:ft})},pw=(it,ft)=>{const vt=it.document.createRange();return vt.selectNode(ft.dom),vt},IT=(it,ft)=>{const vt=it.document.createRange();return X4(vt,ft),vt},X4=(it,ft)=>it.selectNodeContents(ft.dom),UL=(it,ft)=>{ft.fold(vt=>{it.setStartBefore(vt.dom)},(vt,Ct)=>{it.setStart(vt.dom,Ct)},vt=>{it.setStartAfter(vt.dom)})},HL=(it,ft)=>{ft.fold(vt=>{it.setEndBefore(vt.dom)},(vt,Ct)=>{it.setEnd(vt.dom,Ct)},vt=>{it.setEndAfter(vt.dom)})},J4=(it,ft,vt)=>{const Ct=it.document.createRange();return UL(Ct,ft),HL(Ct,vt),Ct},EE=(it,ft,vt,Ct,Ft)=>{const jt=it.document.createRange();return jt.setStart(ft.dom,vt),jt.setEnd(Ct.dom,Ft),jt},p5=it=>({left:it.left,top:it.top,right:it.right,bottom:it.bottom,width:it.width,height:it.height}),VL=it=>{const ft=it.getClientRects(),vt=ft.length>0?ft[0]:it.getBoundingClientRect();return vt.width>0||vt.height>0?Vt.some(vt).map(p5):Vt.none()},qC=x2.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Q4=(it,ft,vt)=>ft(ro.fromDom(vt.startContainer),vt.startOffset,ro.fromDom(vt.endContainer),vt.endOffset),eP=(it,ft)=>ft.match({domRange:vt=>({ltr:Et(vt),rtl:Vt.none}),relative:(vt,Ct)=>({ltr:x1(()=>J4(it,vt,Ct)),rtl:x1(()=>Vt.some(J4(it,Ct,vt)))}),exact:(vt,Ct,Ft,jt)=>({ltr:x1(()=>EE(it,vt,Ct,Ft,jt)),rtl:x1(()=>Vt.some(EE(it,Ft,jt,vt,Ct)))})}),tP=(it,ft)=>{const vt=ft.ltr();return vt.collapsed?ft.rtl().filter(Ft=>Ft.collapsed===!1).map(Ft=>qC.rtl(ro.fromDom(Ft.endContainer),Ft.endOffset,ro.fromDom(Ft.startContainer),Ft.startOffset)).getOrThunk(()=>Q4(it,qC.ltr,vt)):Q4(it,qC.ltr,vt)},g5=(it,ft)=>{const vt=eP(it,ft);return tP(it,vt)},RT=(it,ft)=>g5(it,ft).match({ltr:(Ct,Ft,jt,en)=>{const pn=it.document.createRange();return pn.setStart(Ct.dom,Ft),pn.setEnd(jt.dom,en),pn},rtl:(Ct,Ft,jt,en)=>{const pn=it.document.createRange();return pn.setStart(jt.dom,en),pn.setEnd(Ct.dom,Ft),pn}});qC.ltr,qC.rtl;const gw={create:(it,ft,vt,Ct)=>({start:it,soffset:ft,finish:vt,foffset:Ct})},oP={create:(it,ft,vt,Ct)=>({start:nm.on(it,ft),finish:nm.on(vt,Ct)})},rP=(it,ft)=>{const vt=RT(it,ft);return gw.create(ro.fromDom(vt.startContainer),vt.startOffset,ro.fromDom(vt.endContainer),vt.endOffset)},MT=oP.create,qL=(it,ft,vt,Ct,Ft,jt,en)=>lr(vt,Ft)&&Ct===jt?Vt.none():kp(vt,"td,th",ft).bind(pn=>kp(Ft,"td,th",ft).bind(En=>R2(it,ft,pn,En,en))),R2=(it,ft,vt,Ct,Ft)=>lr(vt,Ct)?Vt.none():Y0(vt,Ct,ft).bind(jt=>{const en=jt.boxes.getOr([]);return en.length>1?(Ft(it,en,jt.start,jt.finish),Vt.some(WC.create(Vt.some(MT(vt,0,vt,Nm(vt))),!0))):Vt.none()}),PT=(it,ft,vt,Ct,Ft)=>{const jt=en=>(Ft.clearBeforeUpdate(vt),Ft.selectRange(vt,en.boxes,en.start,en.finish),en.boxes);return u2(Ct,it,ft,Ft.firstSelectedSelector,Ft.lastSelectedSelector).map(jt)},AE=(it,ft)=>({item:it,mode:ft}),sP=(it,ft,vt,Ct=ZC)=>it.property().parent(ft).map(Ft=>AE(Ft,Ct)),ZC=(it,ft,vt,Ct=KC)=>vt.sibling(it,ft).map(Ft=>AE(Ft,Ct)),KC=(it,ft,vt,Ct=KC)=>{const Ft=it.property().children(ft);return vt.first(Ft).map(en=>AE(en,Ct))},ZL=[{current:sP,next:ZC,fallback:Vt.none()},{current:ZC,next:KC,fallback:Vt.some(sP)},{current:KC,next:KC,fallback:Vt.some(ZC)}],iP=(it,ft,vt,Ct,Ft=ZL)=>Yt(Ft,en=>en.current===vt).bind(en=>en.current(it,ft,Ct,en.next).orThunk(()=>en.fallback.bind(pn=>iP(it,ft,pn,Ct)))),YC={left:()=>({sibling:(vt,Ct)=>vt.query().prevSibling(Ct),first:vt=>vt.length>0?Vt.some(vt[vt.length-1]):Vt.none()}),right:()=>({sibling:(vt,Ct)=>vt.query().nextSibling(Ct),first:vt=>vt.length>0?Vt.some(vt[0]):Vt.none()})},m5=(it,ft,vt,Ct,Ft,jt)=>iP(it,ft,Ct,Ft).bind(pn=>jt(pn.item)?Vt.none():vt(pn.item)?Vt.some(pn.item):m5(it,pn.item,vt,pn.mode,Ft,jt)),y5=(it,ft,vt,Ct)=>m5(it,ft,vt,ZC,YC.left(),Ct),YL=(it,ft,vt,Ct)=>m5(it,ft,vt,ZC,YC.right(),Ct),b5=it=>ft=>it.property().children(ft).length===0,aP=(it,ft,vt)=>XC(it,ft,b5(it),vt),lP=(it,ft,vt)=>cP(it,ft,b5(it),vt),XC=y5,cP=YL,OT=ix(),mw=(it,ft)=>aP(OT,it,ft),gx=(it,ft)=>lP(OT,it,ft),TE=(it,ft,vt)=>XC(OT,it,ft,vt),IE=(it,ft,vt)=>cP(OT,it,ft,vt),XL=(it,ft,vt)=>cr(it,ft,vt).isSome(),Sy=x2.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),B1=(it,ft,vt)=>{const Ct=it.getRect(ft),Ft=it.getRect(vt);return Ft.right>Ct.left&&Ft.left<Ct.right},v5=it=>kp(it,"tr"),yw={...Sy,verify:(it,ft,vt,Ct,Ft,jt,en)=>kp(Ct,"td,th",en).bind(pn=>kp(ft,"td,th",en).map(En=>lr(pn,En)?lr(Ct,pn)&&Nm(pn)===Ft?jt(En):Sy.none("in same cell"):c2(v5,[pn,En]).fold(()=>B1(it,En,pn)?Sy.success():jt(En),to=>jt(En)))).getOr(Sy.none("default")),cata:(it,ft,vt,Ct,Ft)=>it.fold(ft,vt,Ct,Ft)},JC=(it,ft,vt,Ct)=>({parent:it,children:ft,element:vt,index:Ct}),o0=it=>Nl(it).bind(ft=>{const vt=_s(ft);return _5(vt,it).map(Ct=>JC(ft,vt,it,Ct))}),_5=(it,ft)=>jr(it,Zt(lr,ft)),DT=Fr("br"),P2=(it,ft,vt)=>ft(it,vt).bind(Ct=>go(Ct)&&_h(Ct).trim().length===0?P2(Ct,ft,vt):Vt.some(Ct)),RE=(it,ft,vt)=>vt.traverse(ft).orThunk(()=>P2(ft,vt.gather,it)).map(vt.relative),QL=(it,ft)=>Al(it,ft).filter(DT).orThunk(()=>Al(it,ft-1).filter(DT)),x5=(it,ft,vt,Ct)=>QL(ft,vt).bind(Ft=>Ct.traverse(Ft).fold(()=>P2(Ft,Ct.gather,it).map(Ct.relative),jt=>o0(jt).map(en=>nm.on(en.parent,en.index)))),ME=(it,ft,vt,Ct)=>(DT(ft)?RE(it,ft,Ct):x5(it,ft,vt,Ct)).map(jt=>({start:jt,finish:jt})),r0=it=>yw.cata(it,ft=>Vt.none(),()=>Vt.none(),ft=>Vt.some(tT(ft,0)),ft=>Vt.some(tT(ft,Nm(ft)))),w5=(it,ft)=>({left:it.left,top:it.top+ft,right:it.right,bottom:it.bottom+ft}),yv=(it,ft)=>({left:it.left,top:it.top-ft,right:it.right,bottom:it.bottom-ft}),C5=(it,ft,vt)=>({left:it.left+ft,top:it.top+vt,right:it.right+ft,bottom:it.bottom+vt}),QC=it=>it.top,_k=it=>it.bottom,k5=(it,ft,vt)=>vt>=0&&vt<Nm(ft)?it.getRangedRect(ft,vt,ft,vt+1):vt>0?it.getRangedRect(ft,vt-1,ft,vt):Vt.none(),mx=it=>({left:it.left,top:it.top,right:it.right,bottom:it.bottom}),S5=(it,ft)=>Vt.some(it.getRect(ft)),E5=(it,ft,vt)=>_a(ft)?S5(it,ft).map(mx):go(ft)?k5(it,ft,vt).map(mx):Vt.none(),A5=(it,ft)=>_a(ft)?S5(it,ft).map(mx):go(ft)?it.getRangedRect(ft,0,ft,Nm(ft)).map(mx):Vt.none(),O_=5,NT=100,u0=x2.generate([{none:[]},{retry:["caret"]}]),uP=(it,ft)=>it.left<ft.left||Math.abs(ft.right-it.left)<1||it.left>ft.right,T5=(it,ft,vt)=>du(ft,Uo).fold(Pn,Ct=>A5(it,Ct).exists(Ft=>uP(vt,Ft))),I5=(it,ft,vt,Ct,Ft)=>{const jt=w5(Ft,O_);return Math.abs(vt.bottom-Ct.bottom)<1||vt.top>Ft.bottom?u0.retry(jt):vt.top===Ft.bottom?u0.retry(w5(Ft,1)):T5(it,ft,Ft)?u0.retry(C5(jt,O_,0)):u0.none()},R5={point:QC,adjuster:(it,ft,vt,Ct,Ft)=>{const jt=yv(Ft,O_);return Math.abs(vt.top-Ct.top)<1||vt.bottom<Ft.top?u0.retry(jt):vt.bottom===Ft.top?u0.retry(yv(Ft,1)):T5(it,ft,Ft)?u0.retry(C5(jt,O_,0)):u0.none()},move:yv,gather:mw},fP={point:_k,adjuster:I5,move:w5,gather:gx},hP=(it,ft,vt)=>it.elementFromPoint(ft,vt).filter(Ct=>Vs(Ct)==="table").isSome(),Hy=(it,ft,vt,Ct,Ft)=>bw(it,ft,vt,ft.move(Ct,O_),Ft),bw=(it,ft,vt,Ct,Ft)=>Ft===0?Vt.some(Ct):hP(it,Ct.left,ft.point(Ct))?Hy(it,ft,vt,Ct,Ft-1):it.situsFromPoint(Ct.left,ft.point(Ct)).bind(jt=>jt.start.fold(Vt.none,en=>A5(it,en).bind(pn=>ft.adjuster(it,en,pn,vt,Ct).fold(Vt.none,En=>bw(it,ft,vt,En,Ft-1))).orThunk(()=>Vt.some(Ct)),Vt.none)),pP=(it,ft,vt)=>it.point(ft)>vt.getInnerHeight()?Vt.some(it.point(ft)-vt.getInnerHeight()):it.point(ft)<0?Vt.some(-it.point(ft)):Vt.none(),O2=(it,ft,vt)=>{const Ct=it.move(vt,O_),Ft=bw(ft,it,vt,Ct,NT).getOr(Ct);return pP(it,Ft,ft).fold(()=>ft.situsFromPoint(Ft.left,it.point(Ft)),jt=>(ft.scrollBy(0,jt),ft.situsFromPoint(Ft.left,it.point(Ft)-jt)))},L0={tryUp:Zt(O2,R5),tryDown:Zt(O2,fP),getJumpSize:Et(O_)},Ey=20,F0=(it,ft,vt)=>it.getSelection().bind(Ct=>ME(ft,Ct.finish,Ct.foffset,vt).fold(()=>Vt.some(tT(Ct.finish,Ct.foffset)),Ft=>{const jt=it.fromSitus(Ft),en=yw.verify(it,Ct.finish,Ct.foffset,jt.finish,jt.foffset,vt.failure,ft);return r0(en)})),Vy=(it,ft,vt,Ct,Ft,jt)=>jt===0?Vt.none():D2(it,ft,vt,Ct,Ft).bind(en=>{const pn=it.fromSitus(en),En=yw.verify(it,vt,Ct,pn.finish,pn.foffset,Ft.failure,ft);return yw.cata(En,()=>Vt.none(),()=>Vt.some(en),to=>lr(vt,to)&&Ct===0?LT(it,vt,Ct,yv,Ft):Vy(it,ft,to,0,Ft,jt-1),to=>lr(vt,to)&&Ct===Nm(to)?LT(it,vt,Ct,w5,Ft):Vy(it,ft,to,Nm(to),Ft,jt-1))}),LT=(it,ft,vt,Ct,Ft)=>E5(it,ft,vt).bind(jt=>Wy(it,Ft,Ct(jt,L0.getJumpSize()))),Wy=(it,ft,vt)=>{const Ct=Qu().browser;return Ct.isChromium()||Ct.isSafari()||Ct.isFirefox()?ft.retry(it,vt):Vt.none()},D2=(it,ft,vt,Ct,Ft)=>E5(it,vt,Ct).bind(jt=>Wy(it,Ft,jt)),gP=(it,ft,vt)=>F0(it,ft,vt).bind(Ct=>Vy(it,ft,Ct.element,Ct.offset,vt,Ey).map(it.fromSitus)),sB=(it,ft)=>XL(it,vt=>Nl(vt).exists(Ct=>lr(Ct,ft))),e8=(it,ft,vt,Ct,Ft)=>kp(Ct,"td,th",ft).bind(jt=>kp(jt,"table",ft).bind(en=>sB(Ft,en)?gP(it,ft,vt).bind(pn=>kp(pn.finish,"td,th",ft).map(En=>({start:jt,finish:En,range:pn}))):Vt.none())),M5=(it,ft,vt,Ct,Ft,jt)=>jt(Ct,ft).orThunk(()=>e8(it,ft,vt,Ct,Ft).map(en=>{const pn=en.range;return WC.create(Vt.some(MT(pn.start,pn.soffset,pn.finish,pn.foffset)),!0)})),t8=(it,ft)=>kp(it,"tr",ft).bind(vt=>kp(vt,"table",ft).bind(Ct=>{const Ft=Zl(Ct,"tr");return lr(vt,Ft[0])?TE(Ct,jt=>n2(jt).isSome(),ft).map(jt=>{const en=Nm(jt);return WC.create(Vt.some(MT(jt,en,jt,en)),!0)}):Vt.none()})),FT=(it,ft)=>kp(it,"tr",ft).bind(vt=>kp(vt,"table",ft).bind(Ct=>{const Ft=Zl(Ct,"tr");return lr(vt,Ft[Ft.length-1])?IE(Ct,jt=>Zx(jt).isSome(),ft).map(jt=>WC.create(Vt.some(MT(jt,0,jt,0)),!0)):Vt.none()})),s0=(it,ft,vt,Ct,Ft,jt,en)=>e8(it,vt,Ct,Ft,jt).bind(pn=>R2(ft,vt,pn.start,pn.finish,en)),PE=it=>{let ft=it;return{get:()=>ft,set:Ft=>{ft=Ft}}},OE=it=>{const ft=PE(Vt.none()),vt=()=>ft.get().each(it);return{clear:()=>{vt(),ft.set(Vt.none())},isSet:()=>ft.get().isSome(),get:()=>ft.get(),set:pn=>{vt(),ft.set(Vt.some(pn))}}},vw=()=>{const it=OE(Tt);return{...it,on:vt=>it.get().each(vt)}},P5=(it,ft)=>kp(it,"td,th",ft),zT=it=>Xl(it).exists(Jx),O5=(it,ft,vt,Ct)=>{const Ft=vw(),jt=Ft.clear,en=Io=>{Ft.on(hr=>{Ct.clearBeforeUpdate(ft),P5(Io.target,vt).each(Or=>{Y0(hr,Or,vt).each(Tr=>{const xr=Tr.boxes.getOr([]);if(xr.length===1){const ts=xr[0],ar=i2(ts)==="false",wr=fu(LM(Io.target),ts,lr);ar&&wr&&Ct.selectRange(ft,xr,ts,ts)}else xr.length>1&&(Ct.selectRange(ft,xr,Tr.start,Tr.finish),it.selectContents(Or))})})})};return{clearstate:jt,mousedown:Io=>{Ct.clear(ft),P5(Io.target,vt).filter(zT).each(Ft.set)},mouseover:Io=>{en(Io)},mouseup:Io=>{en(Io),jt()}}},BT={traverse:sm,gather:gx,relative:nm.before,retry:L0.tryDown,failure:yw.failedDown},D5={traverse:Kp,gather:mw,relative:nm.before,retry:L0.tryUp,failure:yw.failedUp},eS=it=>ft=>ft===it,yx=eS(38),DE=eS(40),N2=it=>it>=37&&it<=40,bx={isBackward:eS(37),isForward:eS(39)},mP={isBackward:eS(39),isForward:eS(37)},Ay=it=>{const ft=it!==void 0?it.dom:document,vt=ft.body.scrollLeft||ft.documentElement.scrollLeft,Ct=ft.body.scrollTop||ft.documentElement.scrollTop;return cs(vt,Ct)},N5=(it,ft,vt)=>{const Ft=(vt!==void 0?vt.dom:document).defaultView;Ft&&Ft.scrollBy(it,ft)},_w=x2.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),L2=it=>_w.exact(it.start,it.soffset,it.finish,it.foffset),$T=it=>it.match({domRange:ft=>ro.fromDom(ft.startContainer),relative:(ft,vt)=>nm.getStart(ft),exact:(ft,vt,Ct,Ft)=>ft}),GT=_w.domRange,n8=_w.relative,o8=_w.exact,yP=it=>{const ft=$T(it);return ks(ft)},bP=gw.create,F2={domRange:GT,relative:n8,exact:o8,exactFromRange:L2,getWin:yP,range:bP},tS=(it,ft,vt)=>{var Ct;return Vt.from((Ct=it.caretPositionFromPoint)===null||Ct===void 0?void 0:Ct.call(it,ft,vt)).bind(Ft=>{if(Ft.offsetNode===null)return Vt.none();const jt=it.createRange();return jt.setStart(Ft.offsetNode,Ft.offset),jt.collapse(),Vt.some(jt)})},NE=(it,ft,vt)=>{var Ct;return Vt.from((Ct=it.caretRangeFromPoint)===null||Ct===void 0?void 0:Ct.call(it,ft,vt))},r8=(it,ft,vt)=>it.caretPositionFromPoint?tS(it,ft,vt):it.caretRangeFromPoint?NE(it,ft,vt):Vt.none(),vP=(it,ft,vt)=>{const Ct=it.document;return r8(Ct,ft,vt).map(Ft=>gw.create(ro.fromDom(Ft.startContainer),Ft.startOffset,ro.fromDom(Ft.endContainer),Ft.endOffset))},LE=(it,ft)=>{const vt=Vs(it);return vt==="input"?nm.after(it):Vn(["br","img"],vt)?ft===0?nm.before(it):nm.after(it):nm.on(it,ft)},jT=(it,ft)=>{const vt=it.fold(nm.before,LE,nm.after),Ct=ft.fold(nm.before,LE,nm.after);return F2.relative(vt,Ct)},L5=(it,ft,vt,Ct)=>{const Ft=LE(it,ft),jt=LE(vt,Ct);return F2.relative(Ft,jt)},_P=(it,ft,vt,Ct)=>{const jt=es(it).dom.createRange();return jt.setStart(it.dom,ft),jt.setEnd(vt.dom,Ct),jt},UT=(it,ft,vt,Ct)=>{const Ft=_P(it,ft,vt,Ct),jt=lr(it,vt)&&ft===Ct;return Ft.collapsed&&!jt},nS=it=>Vt.from(it.getSelection()),xP=(it,ft)=>{nS(it).each(vt=>{vt.removeAllRanges(),vt.addRange(ft)})},z2=(it,ft,vt,Ct,Ft)=>{const jt=EE(it,ft,vt,Ct,Ft);xP(it,jt)},Ul=(it,ft,vt,Ct,Ft,jt)=>{ft.collapse(vt.dom,Ct),ft.extend(Ft.dom,jt)},vx=(it,ft)=>g5(it,ft).match({ltr:(vt,Ct,Ft,jt)=>{z2(it,vt,Ct,Ft,jt)},rtl:(vt,Ct,Ft,jt)=>{nS(it).each(en=>{if(en.setBaseAndExtent)en.setBaseAndExtent(vt.dom,Ct,Ft.dom,jt);else if(en.extend)try{Ul(it,en,vt,Ct,Ft,jt)}catch{z2(it,Ft,jt,vt,Ct)}else z2(it,Ft,jt,vt,Ct)})}}),xw=(it,ft,vt,Ct,Ft)=>{const jt=L5(ft,vt,Ct,Ft);vx(it,jt)},HT=(it,ft,vt)=>{const Ct=jT(ft,vt);vx(it,Ct)},F5=it=>{if(it.rangeCount>0){const ft=it.getRangeAt(0),vt=it.getRangeAt(it.rangeCount-1);return Vt.some(gw.create(ro.fromDom(ft.startContainer),ft.startOffset,ro.fromDom(vt.endContainer),vt.endOffset))}else return Vt.none()},FE=it=>{if(it.anchorNode===null||it.focusNode===null)return F5(it);{const ft=ro.fromDom(it.anchorNode),vt=ro.fromDom(it.focusNode);return UT(ft,it.anchorOffset,vt,it.focusOffset)?Vt.some(gw.create(ft,it.anchorOffset,vt,it.focusOffset)):F5(it)}},B2=(it,ft,vt=!0)=>{const Ft=(vt?IT:pw)(it,ft);xP(it,Ft)},zE=it=>nS(it).filter(ft=>ft.rangeCount>0).bind(FE),VT=it=>zE(it).map(ft=>F2.exact(ft.start,ft.soffset,ft.finish,ft.foffset)),wP=(it,ft)=>{const vt=RT(it,ft);return VL(vt)},s8=(it,ft,vt)=>vP(it,ft,vt),$2=it=>{nS(it).each(ft=>ft.removeAllRanges())},WT=it=>({elementFromPoint:(ar,wr)=>ro.fromPoint(ro.fromDom(it.document),ar,wr),getRect:ar=>ar.dom.getBoundingClientRect(),getRangedRect:(ar,wr,kr,Fs)=>{const Fl=F2.exact(ar,wr,kr,Fs);return wP(it,Fl)},getSelection:()=>VT(it).map(ar=>rP(it,ar)),fromSitus:ar=>{const wr=F2.relative(ar.start,ar.finish);return rP(it,wr)},situsFromPoint:(ar,wr)=>s8(it,ar,wr).map(kr=>oP.create(kr.start,kr.soffset,kr.finish,kr.foffset)),clearSelection:()=>{$2(it)},collapseSelection:(ar=!1)=>{VT(it).each(wr=>wr.fold(kr=>kr.collapse(ar),(kr,Fs)=>{const Fl=ar?kr:Fs;HT(it,Fl,Fl)},(kr,Fs,Fl,vu)=>{const Ku=ar?kr:Fl,up=ar?Fs:vu;xw(it,Ku,up,Ku,up)}))},setSelection:ar=>{xw(it,ar.start,ar.soffset,ar.finish,ar.foffset)},setRelativeSelection:(ar,wr)=>{HT(it,ar,wr)},selectNode:ar=>{B2(it,ar,!1)},selectContents:ar=>{B2(it,ar)},getInnerHeight:()=>it.innerHeight,getScrollY:()=>Ay(ro.fromDom(it.document)).top,scrollBy:(ar,wr)=>{N5(ar,wr,ro.fromDom(it.document))}}),ww=(it,ft)=>({rows:it,cols:ft}),z5=(it,ft,vt,Ct)=>{const Ft=WT(it),jt=O5(Ft,ft,vt,Ct);return{clearstate:jt.clearstate,mousedown:jt.mousedown,mouseover:jt.mouseover,mouseup:jt.mouseup}},B5=it=>du(it,Jr).exists(Jx),G2=(it,ft)=>B5(it)||B5(ft),$5=(it,ft,vt,Ct)=>{const Ft=WT(it),jt=()=>(Ct.clear(ft),Vt.none());return{keydown:(En,to,Io,hr,Or,Tr)=>{const xr=En.raw,ts=xr.which,ar=xr.shiftKey===!0;return EC(ft,Ct.selectedSelector).fold(()=>(N2(ts)&&!ar&&Ct.clearBeforeUpdate(ft),N2(ts)&&ar&&!G2(to,hr)?Vt.none:DE(ts)&&ar?Zt(s0,Ft,ft,vt,BT,hr,to,Ct.selectRange):yx(ts)&&ar?Zt(s0,Ft,ft,vt,D5,hr,to,Ct.selectRange):DE(ts)?Zt(M5,Ft,vt,BT,hr,to,FT):yx(ts)?Zt(M5,Ft,vt,D5,hr,to,t8):Vt.none),kr=>{const Fs=Fl=>()=>Nn(Fl,Ku=>PT(Ku.rows,Ku.cols,ft,kr,Ct)).fold(()=>tw(ft,Ct.firstSelectedSelector,Ct.lastSelectedSelector).map(Ku=>{const up=DE(ts)||Tr.isForward(ts)?nm.after:nm.before;return Ft.setRelativeSelection(nm.on(Ku.first,0),up(Ku.table)),Ct.clear(ft),WC.create(Vt.none(),!0)}),Ku=>Vt.some(WC.create(Vt.none(),!0)));return N2(ts)&&ar&&!G2(to,hr)?Vt.none:DE(ts)&&ar?Fs([ww(1,0)]):yx(ts)&&ar?Fs([ww(-1,0)]):Tr.isBackward(ts)&&ar?Fs([ww(0,-1),ww(-1,0)]):Tr.isForward(ts)&&ar?Fs([ww(0,1),ww(1,0)]):N2(ts)&&!ar?jt:Vt.none})()},keyup:(En,to,Io,hr,Or)=>EC(ft,Ct.selectedSelector).fold(()=>{const Tr=En.raw,xr=Tr.which;return Tr.shiftKey===!0&&N2(xr)&&G2(to,hr)?qL(ft,vt,to,Io,hr,Or,Ct.selectRange):Vt.none()},Vt.none)}},CP=(it,ft,vt,Ct)=>{const Ft=WT(it);return(jt,en)=>{Ct.clearBeforeUpdate(ft),Y0(jt,en,vt).each(pn=>{const En=pn.boxes.getOr([]);Ct.selectRange(ft,En,pn.start,pn.finish),Ft.selectContents(en),Ft.collapseSelection()})}},kP=(it,ft)=>{const vt=Au(it,ft);return vt===void 0||vt===""?[]:vt.split(" ")},D_=(it,ft,vt)=>{const Ft=kP(it,ft).concat([vt]);return xa(it,ft,Ft.join(" ")),!0},SP=(it,ft,vt)=>{const Ct=no(kP(it,ft),Ft=>Ft!==vt);return Ct.length>0?xa(it,ft,Ct.join(" ")):Bn(it,ft),!1},qT=it=>it.dom.classList!==void 0,bv=it=>kP(it,"class"),zm=(it,ft)=>D_(it,"class",ft),i8=(it,ft)=>SP(it,"class",ft),$1=(it,ft)=>{qT(it)?it.dom.classList.add(ft):zm(it,ft)},a8=it=>{(qT(it)?it.dom.classList:bv(it)).length===0&&Bn(it,"class")},EP=(it,ft)=>{qT(it)?it.dom.classList.remove(ft):i8(it,ft),a8(it)},BE=(it,ft)=>qT(it)&&it.dom.classList.contains(ft),oS=(it,ft)=>{An(ft,vt=>{EP(it,vt)})},AP=it=>ft=>{$1(ft,it)},TP=it=>ft=>{oS(ft,it)},IP={byClass:it=>{const ft=AP(it.selected),vt=TP([it.selected,it.lastSelected,it.firstSelected]),Ct=jt=>{const en=Zl(jt,it.selectedSelector);An(en,vt)};return{clearBeforeUpdate:Ct,clear:Ct,selectRange:(jt,en,pn,En)=>{Ct(jt),An(en,ft),$1(pn,it.firstSelected),$1(En,it.lastSelected)},selectedSelector:it.selectedSelector,firstSelectedSelector:it.firstSelectedSelector,lastSelectedSelector:it.lastSelectedSelector}},byAttr:(it,ft,vt)=>{const Ct=En=>{Bn(En,it.selected),Bn(En,it.firstSelected),Bn(En,it.lastSelected)},Ft=En=>{xa(En,it.selected,"1")},jt=En=>{en(En),vt()},en=En=>{const to=Zl(En,`${it.selectedSelector},${it.firstSelectedSelector},${it.lastSelectedSelector}`);An(to,Ct)};return{clearBeforeUpdate:en,clear:jt,selectRange:(En,to,Io,hr)=>{jt(En),An(to,Ft),xa(Io,it.firstSelected,"1"),xa(hr,it.lastSelected,"1"),ft(to,Io,hr)},selectedSelector:it.selectedSelector,firstSelectedSelector:it.firstSelectedSelector,lastSelectedSelector:it.lastSelectedSelector}}},zr=(it,ft,vt,Ct)=>{switch(it.tag){case"none":return ft();case"single":return Ct(it.element);case"multiple":return vt(it.elements)}},Bm=()=>({tag:"none"}),ZT=it=>({tag:"multiple",elements:it}),$m=it=>({tag:"single",element:it}),vv=(it,ft,vt)=>({get:()=>QA(it(),vt).fold(()=>ft().fold(Bm,$m),ZT)}),G5=(it,ft)=>{const vt=it.slice(0,ft[ft.length-1].row+1),Ct=O3(vt);return Ho(Ct,Ft=>{const jt=Ft.cells.slice(0,ft[ft.length-1].column+1);return Ln(jt,en=>en.element)})},$E=(it,ft)=>{const vt=it.slice(ft[0].row+ft[0].rowspan-1,it.length),Ct=O3(vt);return Ho(Ct,Ft=>{const jt=Ft.cells.slice(ft[0].column+ft[0].colspan-1,Ft.cells.length);return Ln(jt,en=>en.element)})},rS=(it,ft,vt)=>{const Ct=xl.fromTable(it);return wy(Ct,ft).map(jt=>{const en=FC(Ct,vt,!1),{rows:pn}=Su(en),En=G5(pn,jt),to=$E(pn,jt);return{upOrLeftCells:En,downOrRightCells:to}})},RP=(it,ft,vt,Ct,Ft,jt,en)=>({target:it,x:ft,y:vt,stop:Ct,prevent:Ft,kill:jt,raw:en}),Cw=it=>{const ft=ro.fromDom($l(it).getOr(it.target)),vt=()=>it.stopPropagation(),Ct=()=>it.preventDefault(),Ft=Rt(Ct,vt);return RP(ft,it.clientX,it.clientY,vt,Ct,Ft,it)},sS=(it,ft)=>vt=>{it(vt)&&ft(Cw(vt))},l8=(it,ft,vt,Ct,Ft)=>{const jt=sS(vt,Ct);return it.dom.addEventListener(ft,jt,Ft),{unbind:Zt(u8,it,ft,jt,Ft)}},c8=(it,ft,vt,Ct)=>l8(it,ft,vt,Ct,!1),u8=(it,ft,vt,Ct)=>{it.dom.removeEventListener(ft,vt,Ct)},MP=an,j2=(it,ft,vt)=>c8(it,ft,MP,vt),iS=Cw,U2=it=>!BE(ro.fromDom(it.target),"ephox-snooker-resizer-bar"),KT=(it,ft)=>{const vt=vv(()=>ro.fromDom(it.getBody()),()=>eT(eE(it),Gy(it)),d2.selectedSelector),Ct=(En,to,Io)=>{Zm(to).each(Or=>{const Tr=Ln(En,kr=>kr.dom),xr=Kx(it),ts=Z0(Tt,ro.fromDom(it.getDoc()),xr),ar=bu(it),wr=rS(Or,{selection:ar},ts).map(kr=>Tn(kr,Fs=>Ln(Fs,Fl=>Fl.dom))).getOrUndefined();RL(it,Tr,to.dom,Io.dom,wr)})},Ft=()=>gm(it),jt=IP.byAttr(d2,Ct,Ft);return it.on("init",En=>{const to=it.getWin(),Io=fy(it),hr=Gy(it),Or=()=>{const Nu=it.selection,Q0=ro.fromDom(Nu.getStart()),ey=ro.fromDom(Nu.getEnd());c2(Zm,[Q0,ey]).fold(()=>jt.clear(Io),Tt)},Tr=z5(to,Io,hr,jt),xr=$5(to,Io,hr,jt),ts=CP(to,Io,hr,jt),ar=Nu=>Nu.raw.shiftKey===!0;it.on("TableSelectorChange",Nu=>ts(Nu.start,Nu.finish));const wr=(Nu,Q0)=>{ar(Nu)&&(Q0.kill&&Nu.kill(),Q0.selection.each(ey=>{const xv=F2.relative(ey.start,ey.finish),Js=RT(to,xv);it.selection.setRng(Js)}))},kr=Nu=>{const Q0=iS(Nu);if(Q0.raw.shiftKey&&N2(Q0.raw.which)){const ey=it.selection.getRng(),xv=ro.fromDom(ey.startContainer),Js=ro.fromDom(ey.endContainer);xr.keyup(Q0,xv,ey.startOffset,Js,ey.endOffset).each(hy=>{wr(Q0,hy)})}},Fs=Nu=>{const Q0=iS(Nu);ft.hide();const ey=it.selection.getRng(),xv=ro.fromDom(ey.startContainer),Js=ro.fromDom(ey.endContainer),hy=nn(bx,mP)(ro.fromDom(it.selection.getStart()));xr.keydown(Q0,xv,ey.startOffset,Js,ey.endOffset,hy).each(bm=>{wr(Q0,bm)}),ft.show()},Fl=Nu=>Nu.button===0,vu=Nu=>Nu.buttons===void 0?!0:(Nu.buttons&1)!==0,Ku=Nu=>{Tr.clearstate()},up=Nu=>{Fl(Nu)&&U2(Nu)&&Tr.mousedown(iS(Nu))},Ky=Nu=>{vu(Nu)&&U2(Nu)&&Tr.mouseover(iS(Nu))},U1=Nu=>{Fl(Nu)&&U2(Nu)&&Tr.mouseup(iS(Nu))},N_=(()=>{const Nu=PE(ro.fromDom(Io)),Q0=PE(0);return{touchEnd:xv=>{const Js=ro.fromDom(xv.target);if(Fr("td")(Js)||Fr("th")(Js)){const hy=Nu.get(),bm=Q0.get();lr(hy,Js)&&xv.timeStamp-bm<300&&(xv.preventDefault(),ts(Js,Js))}Nu.set(Js),Q0.set(xv.timeStamp)}}})();it.on("dragstart",Ku),it.on("mousedown",up),it.on("mouseover",Ky),it.on("mouseup",U1),it.on("touchend",N_.touchEnd),it.on("keyup",kr),it.on("keydown",Fs),it.on("NodeChange",Or)}),it.on("PreInit",()=>{it.serializer.addTempAttr(d2.firstSelected),it.serializer.addTempAttr(d2.lastSelected)}),{getSelectedCells:()=>zr(vt.get(),Et([]),En=>Ln(En,to=>to.dom),En=>[En.dom]),clearSelectedCells:En=>jt.clear(ro.fromDom(En))}},qy=it=>{let ft=[];return{bind:jt=>{if(jt===void 0)throw new Error("Event bind error: undefined handler");ft.push(jt)},unbind:jt=>{ft=no(ft,en=>en!==jt)},trigger:(...jt)=>{const en={};An(it,(pn,En)=>{en[pn]=jt[En]}),An(ft,pn=>{pn(en)})}}},G1=it=>{const ft=Tn(it,Ct=>({bind:Ct.bind,unbind:Ct.unbind})),vt=Tn(it,Ct=>Ct.trigger);return{registry:ft,trigger:vt}},H2=(it,ft)=>{let vt=null;const Ct=()=>{rt(vt)||(clearTimeout(vt),vt=null)};return{cancel:Ct,throttle:(...jt)=>{Ct(),vt=setTimeout(()=>{vt=null,it.apply(null,jt)},ft)}}},aS=it=>it.slice(0).sort(),YT=(it,ft)=>{throw new Error("All required keys ("+aS(it).join(", ")+") were not specified. Specified keys were: "+aS(ft).join(", ")+".")},XT=it=>{throw new Error("Unsupported keys for object: "+aS(it).join(", "))},d8=(it,ft)=>{if(!nt(ft))throw new Error("The "+it+" fields must be an array. Was: "+ft+".");An(ft,vt=>{if(!_(vt))throw new Error("The value "+vt+" in the "+it+" fields was not a string.")})},f8=(it,ft)=>{throw new Error("All values need to be of type: "+ft+". Keys ("+aS(it).join(", ")+") were not.")},h8=it=>{const ft=aS(it);Yt(ft,(Ct,Ft)=>Ft<ft.length-1&&Ct===ft[Ft+1]).each(Ct=>{throw new Error("The field: "+Ct+" occurs more than once in the combined fields: ["+ft.join(", ")+"].")})},p8=(it,ft)=>PP(it,ft,{validate:xt,label:"function"}),PP=(it,ft,vt)=>{if(ft.length===0)throw new Error("You must specify at least one required field.");return d8("required",ft),h8(ft),Ct=>{const Ft=zn(Ct);mo(ft,pn=>Vn(Ft,pn))||YT(ft,Ft),it(ft,Ft);const en=no(ft,pn=>!vt.validate(Ct[pn],pn));return en.length>0&&f8(en,vt.label),Ct}},OP=(it,ft)=>{const vt=no(ft,Ct=>!Vn(it,Ct));vt.length>0&&XT(vt)},j5=it=>p8(OP,it),JT=j5(["compare","extract","mutate","sink"]),x0=j5(["element","start","stop","destroy"]),_v=j5(["forceDrop","drop","move","delayDrop"]),Zy=()=>{let it=Vt.none();const ft=()=>{it=Vt.none()},vt=(jt,en)=>{const pn=it.map(En=>jt.compare(En,en));return it=Vt.some(en),pn},Ct=(jt,en)=>{en.extract(jt).each(En=>{vt(en,En).each(Io=>{Ft.trigger.move(Io)})})},Ft=G1({move:qy(["info"])});return{onEvent:Ct,reset:ft,events:Ft.registry}},GE=()=>{const it=G1({move:qy(["info"])});return{onEvent:Tt,reset:Tt,events:it.registry}},U5=()=>{const it=GE(),ft=Zy();let vt=it;return{on:()=>{vt.reset(),vt=ft},off:()=>{vt.reset(),vt=it},isOn:()=>vt===ft,onEvent:(pn,En)=>{vt.onEvent(pn,En)},events:ft.events}},DP=(it,ft,vt)=>{let Ct=!1;const Ft=G1({start:qy([]),stop:qy([])}),jt=U5(),en=()=>{xr.stop(),jt.isOn()&&(jt.off(),Ft.trigger.stop())},pn=H2(en,200),En=ar=>{xr.start(ar),jt.on(),Ft.trigger.start()},to=ar=>{pn.cancel(),jt.onEvent(ar,ft)};jt.events.move.bind(ar=>{ft.mutate(it,ar.info)});const Io=()=>{Ct=!0},hr=()=>{Ct=!1},Or=()=>Ct,Tr=ar=>(...wr)=>{Ct&&ar.apply(null,wr)},xr=ft.sink(_v({forceDrop:en,drop:Tr(en),move:Tr(to),delayDrop:Tr(pn.throttle)}),vt),ts=()=>{xr.destroy()};return{element:xr.element,go:En,on:Io,off:hr,isActive:Or,destroy:ts,events:Ft.registry}},QT=it=>{const ft=it.replace(/\./g,"-");return{resolve:Ct=>ft+"-"+Ct}},eI=QT("ephox-dragster").resolve,m8=it=>{const ft={layerClass:eI("blocker"),...it},vt=ro.fromTag("div");return xa(vt,"role","presentation"),gu(vt,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),$1(vt,eI("blocker")),$1(vt,ft.layerClass),{element:Et(vt),destroy:()=>{fp(vt)}}};var nI=JT({compare:(it,ft)=>cs(ft.left-it.left,ft.top-it.top),extract:it=>Vt.some(cs(it.x,it.y)),sink:(it,ft)=>{const vt=m8(ft),Ct=j2(vt.element(),"mousedown",it.forceDrop),Ft=j2(vt.element(),"mouseup",it.drop),jt=j2(vt.element(),"mousemove",it.move),en=j2(vt.element(),"mouseout",it.delayDrop),pn=()=>{vt.destroy(),Ft.unbind(),jt.unbind(),en.unbind(),Ct.unbind()},En=Io=>{ku(Io,vt.element())},to=()=>{fp(vt.element())};return x0({element:vt.element,start:En,stop:to,destroy:pn})},mutate:(it,ft)=>{it.mutate(ft.left,ft.top)}});const Du=(it,ft={})=>{var vt;const Ct=(vt=ft.mode)!==null&&vt!==void 0?vt:nI;return DP(it,Ct,ft)},j1=QT("ephox-snooker").resolve,LP=()=>{const it=G1({drag:qy(["xDelta","yDelta"])});return{mutate:(vt,Ct)=>{it.trigger.drag(vt,Ct)},events:it.registry}},H5=()=>{const it=G1({drag:qy(["xDelta","yDelta","target"])});let ft=Vt.none();const vt=LP();return vt.events.drag.bind(jt=>{ft.each(en=>{it.trigger.drag(jt.xDelta,jt.yDelta,en)})}),{assign:jt=>{ft=Vt.some(jt)},get:()=>ft,mutate:vt.mutate,events:it.registry}},lS=(it,ft,vt,Ct,Ft)=>{const jt=ro.fromTag("div");return gu(jt,{position:"absolute",left:ft-Ct/2+"px",top:vt+"px",height:Ft+"px",width:Ct+"px"}),ju(jt,{"data-column":it,role:"presentation"}),jt},oI=(it,ft,vt,Ct,Ft)=>{const jt=ro.fromTag("div");return gu(jt,{position:"absolute",left:ft+"px",top:vt-Ft/2+"px",height:Ft+"px",width:Ct+"px"}),ju(jt,{"data-row":it,role:"presentation"}),jt},jE=j1("resizer-bar"),V5=j1("resizer-rows"),FP=j1("resizer-cols"),W5=7,zP=(it,ft)=>Ho(it.all,(vt,Ct)=>ft(vt.element)?[Ct]:[]),UE=(it,ft)=>{const vt=[];return uo(it.grid.columns,Ct=>{xl.getColumnAt(it,Ct).map(jt=>jt.element).forall(ft)&&vt.push(Ct)}),no(vt,Ct=>{const Ft=xl.filterItems(it,jt=>jt.column===Ct);return mo(Ft,jt=>ft(jt.element))})},V2=it=>{const ft=Zl(it.parent(),"."+jE);An(ft,fp)},rI=(it,ft,vt)=>{const Ct=it.origin();An(ft,Ft=>{Ft.each(jt=>{const en=vt(Ct,jt);$1(en,jE),ku(it.parent(),en)})})},v8=(it,ft,vt,Ct)=>{rI(it,ft,(Ft,jt)=>{const en=lS(jt.col,jt.x-Ft.left,vt.top-Ft.top,W5,Ct);return $1(en,FP),en})},_8=(it,ft,vt,Ct)=>{rI(it,ft,(Ft,jt)=>{const en=oI(jt.row,vt.left-Ft.left,jt.y-Ft.top,Ct,W5);return $1(en,V5),en})},x8=(it,ft,vt,Ct,Ft)=>{const jt=Xm(vt),en=ft.isResizable,pn=Ct.length>0?vs.positions(Ct,vt):[],En=pn.length>0?zP(it,en):[],to=no(pn,(Tr,xr)=>ln(En,ts=>xr===ts));_8(ft,to,jt,Lv(vt));const Io=Ft.length>0?nx.positions(Ft,vt):[],hr=Io.length>0?UE(it,en):[],Or=no(Io,(Tr,xr)=>ln(hr,ts=>xr===ts));v8(ft,Or,jt,xs(vt))},Ty=(it,ft)=>{if(V2(it),it.isResizable(ft)){const vt=xl.fromTable(ft),Ct=Dt(vt),Ft=v_(vt);x8(vt,it,ft,Ct,Ft)}},d0=(it,ft)=>{const vt=Zl(it.parent(),"."+jE);An(vt,ft)},cS=it=>{d0(it,ft=>{Xs(ft,"display","none")})},lB=it=>{d0(it,ft=>{Xs(ft,"display","block")})},w8=it=>BE(it,V5),C8=it=>BE(it,FP),Ll=j1("resizer-bar-dragging"),k8=it=>{const ft=H5(),vt=Du(ft,{});let Ct=Vt.none();const Ft=(xr,ts)=>Vt.from(Au(xr,ts));ft.events.drag.bind(xr=>{Ft(xr.target,"data-row").each(ts=>{const ar=zu(xr.target,"top");Xs(xr.target,"top",ar+xr.yDelta+"px")}),Ft(xr.target,"data-column").each(ts=>{const ar=zu(xr.target,"left");Xs(xr.target,"left",ar+xr.xDelta+"px")})});const jt=(xr,ts)=>{const ar=zu(xr,ts),wr=Tp(xr,"data-initial-"+ts,0);return ar-wr};vt.events.stop.bind(()=>{ft.get().each(xr=>{Ct.each(ts=>{Ft(xr,"data-row").each(ar=>{const wr=jt(xr,"top");Bn(xr,"data-initial-top"),Tr.trigger.adjustHeight(ts,wr,parseInt(ar,10))}),Ft(xr,"data-column").each(ar=>{const wr=jt(xr,"left");Bn(xr,"data-initial-left"),Tr.trigger.adjustWidth(ts,wr,parseInt(ar,10))}),Ty(it,ts)})})});const en=(xr,ts)=>{Tr.trigger.startAdjust(),ft.assign(xr),xa(xr,"data-initial-"+ts,zu(xr,ts)),$1(xr,Ll),Xs(xr,"opacity","0.2"),vt.go(it.parent())},pn=j2(it.parent(),"mousedown",xr=>{w8(xr.target)&&en(xr.target,"top"),C8(xr.target)&&en(xr.target,"left")}),En=xr=>lr(xr,it.view()),to=xr=>kp(xr,"table",En).filter(Jx),Io=j2(it.view(),"mouseover",xr=>{to(xr.target).fold(()=>{Os(xr.target)&&V2(it)},ts=>{vt.isActive()&&(Ct=Vt.some(ts),Ty(it,ts))})}),hr=()=>{pn.unbind(),Io.unbind(),vt.destroy(),V2(it)},Or=xr=>{Ty(it,xr)},Tr=G1({adjustHeight:qy(["table","delta","row"]),adjustWidth:qy(["table","delta","column"]),startAdjust:qy([])});return{destroy:hr,refresh:Or,on:vt.on,off:vt.off,hideBars:Zt(cS,it),showBars:Zt(lB,it),events:Tr.registry}},q5={create:(it,ft,vt)=>{const Ct=vs,Ft=nx,jt=k8(it),en=G1({beforeResize:qy(["table","type"]),afterResize:qy(["table","type"]),startDrag:qy([])});return jt.events.adjustHeight.bind(pn=>{const En=pn.table;en.trigger.beforeResize(En,"row");const to=Ct.delta(pn.delta,En);z3(En,to,pn.row),en.trigger.afterResize(En,"row")}),jt.events.startAdjust.bind(pn=>{en.trigger.startDrag()}),jt.events.adjustWidth.bind(pn=>{const En=pn.table;en.trigger.beforeResize(En,"col");const to=Ft.delta(pn.delta,En),Io=vt(En);l4(En,to,pn.column,ft,Io),en.trigger.afterResize(En,"col")}),{on:jt.on,off:jt.off,refreshBars:jt.refresh,hideBars:jt.hideBars,showBars:jt.showBars,destroy:jt.destroy,events:en.registry}}},HE={only:(it,ft)=>{const vt=Po(it)?hs(it):it;return{parent:Et(vt),view:Et(it),origin:Et(cs(0,0)),isResizable:ft}},detached:(it,ft,vt)=>{const Ct=()=>Xm(ft);return{parent:Et(ft),view:Et(it),origin:Ct,isResizable:vt}},body:(it,ft,vt)=>({parent:Et(ft),view:Et(it),origin:Et(cs(0,0)),isResizable:vt})},E8=()=>{const it=ro.fromTag("div");return gu(it,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),ku(Pu(),it),it},A8=(it,ft)=>it.inline?HE.body(ro.fromDom(it.getBody()),E8(),ft):HE.only(ro.fromDom(it.getDoc()),ft),Z5=(it,ft)=>{it.inline&&fp(ft.parent())},sI=it=>bt(it)&&it.nodeName==="TABLE",iI="bar-",dB=it=>Au(it,"data-mce-resize")!=="false",T8=it=>{const ft=xl.fromTable(it);xl.hasColumns(ft)||An(Mv(it),vt=>{const Ct=pp(vt,"width");Xs(vt,"width",Ct),Bn(vt,"width")})},VE=it=>T0(it,"corner-"),K5=it=>A0(it,"corner-"),I8=it=>{const ft=vw(),vt=vw(),Ct=vw();let Ft,jt,en,pn;const En=wr=>_T(it,wr),to=()=>P1(it)?ux():ow(),Io=wr=>f2(wr).columns,hr=wr=>f2(wr).rows,Or=(wr,kr,Fs,Fl)=>{const vu=K5(kr),Ku=Mm(vu,"e"),up=T0(vu,"n");if(jt===""&&I2(wr),pn===""&&OL(wr),Fs!==Ft&&jt!==""){Xs(wr,"width",jt);const Ky=to(),U1=En(wr),W2=P1(it)||Ku?Io(wr)-1:0;l4(wr,Fs-Ft,W2,Ky,U1)}else if(y3(jt)){const Ky=parseFloat(jt.replace("%","")),U1=Fs*Ky/Ft;Xs(wr,"width",U1+"%")}if(kC(jt)&&T8(wr),Fl!==en&&pn!==""){Xs(wr,"height",pn);const Ky=up?0:hr(wr)-1;z3(wr,Fl-en,Ky)}},Tr=()=>{vt.on(wr=>{wr.destroy()}),Ct.on(wr=>{Z5(it,wr)})};return it.on("init",()=>{const wr=A8(it,dB);if(Ct.set(wr),tL(it)&&WA(it)){const kr=to(),Fs=q5.create(wr,kr,En);it.mode.isReadOnly()||Fs.on(),Fs.events.startDrag.bind(Fl=>{ft.set(it.selection.getRng())}),Fs.events.beforeResize.bind(Fl=>{const vu=Fl.table.dom;mm(it,vu,tE(vu),CC(vu),iI+Fl.type)}),Fs.events.afterResize.bind(Fl=>{const vu=Fl.table,Ku=vu.dom;jy(vu),ft.on(up=>{it.selection.setRng(up),it.focus()}),n0(it,Ku,tE(Ku),CC(Ku),iI+Fl.type),it.undoManager.add()}),vt.set(Fs)}}),it.on("ObjectResizeStart",wr=>{const kr=wr.target;if(sI(kr)&&!it.mode.isReadOnly()){const Fs=ro.fromDom(kr);An(it.dom.select(".mce-clonedresizable"),Fl=>{it.dom.addClass(Fl,"mce-"+VA(it)+"-columns")}),!L4(Fs)&&e0(it)?wE(Fs):!N4(Fs)&&O1(it)&&I2(Fs),F4(Fs)&&T0(wr.origin,iI)&&I2(Fs),Ft=wr.width,jt=Yx(it)?"":FM(it,kr).getOr(""),en=wr.height,pn=zM(it,kr).getOr("")}}),it.on("ObjectResized",wr=>{const kr=wr.target;if(sI(kr)){const Fs=ro.fromDom(kr),Fl=wr.origin;VE(Fl)&&Or(Fs,Fl,wr.width,wr.height),jy(Fs),S2(it,Fs.dom,ym)}}),it.on("SwitchMode",()=>{vt.on(wr=>{it.mode.isReadOnly()?(wr.off(),wr.hideBars()):(wr.on(),wr.showBars())})}),it.on("dragstart dragend",wr=>{vt.on(kr=>{wr.type==="dragstart"?(kr.hideBars(),kr.off()):(kr.on(),kr.showBars())})}),it.on("remove",()=>{Tr()}),{refresh:wr=>{vt.on(kr=>kr.refreshBars(ro.fromDom(wr)))},hide:()=>{vt.on(wr=>wr.hideBars())},show:()=>{vt.on(wr=>wr.showBars())}}},BP=it=>{JS(it);const ft=I8(it),vt=KT(it,ft),Ct=t5(it,ft,vt);return GL(it,Ct),jL(it,Ct),Jz(it,Ct),{getSelectedCells:vt.getSelectedCells,clearSelectedCells:vt.clearSelectedCells}},Rs=it=>({table:BP(it)});var aI=()=>{o.add("dom",Rs)};aI()})();(function(){const o=Object.getPrototypeOf,e=(h,j,tt)=>{var st;return tt(h,j.prototype)?!0:((st=h.constructor)===null||st===void 0?void 0:st.name)===j.name},s=h=>{const j=typeof h;return h===null?"null":j==="object"&&Array.isArray(h)?"array":j==="object"&&e(h,String,(tt,st)=>st.isPrototypeOf(tt))?"string":j},a=h=>j=>s(j)===h,d=h=>j=>typeof j===h,b=h=>j=>h===j,_=(h,j)=>nt(h)&&e(h,j,(tt,st)=>o(tt)===st),_e=a("string"),nt=a("object"),rt=h=>_(h,Object),ct=a("array"),dt=b(null),pt=d("boolean"),bt=b(void 0),xt=h=>h==null,wt=h=>!xt(h),Tt=d("function"),Rt=d("number"),Mt=(h,j)=>{if(ct(h)){for(let tt=0,st=h.length;tt<st;++tt)if(!j(h[tt]))return!1;return!0}return!1},Et=()=>{},$t=h=>()=>h(),Xt=(h,j)=>(...tt)=>h(j.apply(null,tt)),Zt=(h,j)=>tt=>h(j(tt)),Nt=h=>()=>h,Jt=h=>h,dn=(h,j)=>h===j;function Pn(h,...j){return(...tt)=>{const st=j.concat(tt);return h.apply(null,st)}}const an=h=>j=>!h(j),Vt=h=>()=>{throw new Error(h)},ao=h=>h(),hn=Nt(!1),fn=Nt(!0);class It{constructor(j,tt){this.tag=j,this.value=tt}static some(j){return new It(!0,j)}static none(){return It.singletonNone}fold(j,tt){return this.tag?tt(this.value):j()}isSome(){return this.tag}isNone(){return!this.tag}map(j){return this.tag?It.some(j(this.value)):It.none()}bind(j){return this.tag?j(this.value):It.none()}exists(j){return this.tag&&j(this.value)}forall(j){return!this.tag||j(this.value)}filter(j){return!this.tag||j(this.value)?this:It.none()}getOr(j){return this.tag?this.value:j}or(j){return this.tag?this:j}getOrThunk(j){return this.tag?this.value:j()}orThunk(j){return this.tag?this:j()}getOrDie(j){if(this.tag)return this.value;throw new Error(j??"Called getOrDie on None")}static from(j){return wt(j)?It.some(j):It.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(j){this.tag&&j(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}It.singletonNone=new It(!1);const Vn=Array.prototype.slice,ln=Array.prototype.indexOf,uo=Array.prototype.push,Ln=(h,j)=>ln.call(h,j),An=(h,j)=>{const tt=Ln(h,j);return tt===-1?It.none():It.some(tt)},Wn=(h,j)=>Ln(h,j)>-1,er=(h,j)=>{for(let tt=0,st=h.length;tt<st;tt++){const ut=h[tt];if(j(ut,tt))return!0}return!1},no=(h,j)=>{const tt=[];for(let st=0;st<h;st++)tt.push(j(st));return tt},Ro=(h,j)=>{const tt=[];for(let st=0;st<h.length;st+=j){const ut=Vn.call(h,st,st+j);tt.push(ut)}return tt},On=(h,j)=>{const tt=h.length,st=new Array(tt);for(let ut=0;ut<tt;ut++){const mt=h[ut];st[ut]=j(mt,ut)}return st},_o=(h,j)=>{for(let tt=0,st=h.length;tt<st;tt++){const ut=h[tt];j(ut,tt)}},Yt=(h,j)=>{for(let tt=h.length-1;tt>=0;tt--){const st=h[tt];j(st,tt)}},jr=(h,j)=>{const tt=[],st=[];for(let ut=0,mt=h.length;ut<mt;ut++){const yt=h[ut];(j(yt,ut)?tt:st).push(yt)}return{pass:tt,fail:st}},lo=(h,j)=>{const tt=[];for(let st=0,ut=h.length;st<ut;st++){const mt=h[st];j(mt,st)&&tt.push(mt)}return tt},Ho=(h,j,tt)=>(Yt(h,(st,ut)=>{tt=j(tt,st,ut)}),tt),mo=(h,j,tt)=>(_o(h,(st,ut)=>{tt=j(tt,st,ut)}),tt),Co=(h,j,tt)=>{for(let st=0,ut=h.length;st<ut;st++){const mt=h[st];if(j(mt,st))return It.some(mt);if(tt(mt,st))break}return It.none()},mn=(h,j)=>Co(h,j,hn),wn=(h,j)=>{for(let tt=0,st=h.length;tt<st;tt++){const ut=h[tt];if(j(ut,tt))return It.some(tt)}return It.none()},Dn=h=>{const j=[];for(let tt=0,st=h.length;tt<st;++tt){if(!ct(h[tt]))throw new Error("Arr.flatten item "+tt+" was not an array, input: "+h);uo.apply(j,h[tt])}return j},rn=(h,j)=>Dn(On(h,j)),Cn=(h,j)=>{for(let tt=0,st=h.length;tt<st;++tt){const ut=h[tt];if(j(ut,tt)!==!0)return!1}return!0},Nn=h=>{const j=Vn.call(h,0);return j.reverse(),j},zn=(h,j)=>lo(h,tt=>!Wn(j,tt)),So=(h,j)=>{const tt={};for(let st=0,ut=h.length;st<ut;st++){const mt=h[st];tt[String(mt)]=j(mt,st)}return tt},Hn=h=>[h],Tn=(h,j)=>{const tt=Vn.call(h,0);return tt.sort(j),tt},Jn=(h,j)=>j>=0&&j<h.length?It.some(h[j]):It.none(),bo=h=>Jn(h,0),$n=h=>Jn(h,h.length-1),oo=Tt(Array.from)?Array.from:h=>Vn.call(h),wo=(h,j)=>{for(let tt=0;tt<h.length;tt++){const st=j(h[tt],tt);if(st.isSome())return st}return It.none()},Oo=Object.keys,Ir=Object.hasOwnProperty,sr=(h,j)=>{const tt=Oo(h);for(let st=0,ut=tt.length;st<ut;st++){const mt=tt[st],yt=h[mt];j(yt,mt)}},vr=(h,j)=>as(h,(tt,st)=>({k:st,v:j(tt,st)})),as=(h,j)=>{const tt={};return sr(h,(st,ut)=>{const mt=j(st,ut);tt[mt.k]=mt.v}),tt},_r=h=>(j,tt)=>{h[tt]=j},fs=(h,j,tt,st)=>{sr(h,(ut,mt)=>{(j(ut,mt)?tt:st)(ut,mt)})},Ss=(h,j)=>{const tt={},st={};return fs(h,j,_r(tt),_r(st)),{t:tt,f:st}},As=(h,j)=>{const tt={};return fs(h,j,_r(tt),Et),tt},_l=(h,j)=>{const tt=[];return sr(h,(st,ut)=>{tt.push(j(st,ut))}),tt},Zr=(h,j)=>{const tt=Oo(h);for(let st=0,ut=tt.length;st<ut;st++){const mt=tt[st],yt=h[mt];if(j(yt,mt,h))return It.some(yt)}return It.none()},Ml=h=>_l(h,Jt),tr=(h,j)=>Ms(h,j)?It.from(h[j]):It.none(),Ms=(h,j)=>Ir.call(h,j),cu=(h,j)=>Ms(h,j)&&h[j]!==void 0&&h[j]!==null,ou=(h,j,tt=dn)=>h.exists(st=>tt(st,j)),Yl=(h,j,tt=dn)=>wu(h,j,tt).getOr(h.isNone()&&j.isNone()),xu=h=>{const j=[],tt=st=>{j.push(st)};for(let st=0;st<h.length;st++)h[st].each(tt);return j},Vs=h=>{const j=[];for(let tt=0;tt<h.length;tt++){const st=h[tt];if(st.isSome())j.push(st.getOrDie());else return It.none()}return It.some(j)},wu=(h,j,tt)=>h.isSome()&&j.isSome()?It.some(tt(h.getOrDie(),j.getOrDie())):It.none(),iu=(h,j,tt,st)=>h.isSome()&&j.isSome()&&tt.isSome()?It.some(st(h.getOrDie(),j.getOrDie(),tt.getOrDie())):It.none(),ba=(h,j)=>h!=null?It.some(j(h)):It.none(),Jr=(h,j)=>h?It.some(j):It.none(),_a=(h,j)=>h+j,go=(h,j)=>h.substring(j),Po=(h,j,tt)=>j===""||h.length>=j.length&&h.substr(tt,tt+j.length)===j,Sr=(h,j)=>xa(h,j)?go(h,j.length):h,Fr=(h,j)=>ju(h,j)?h:_a(h,j),Us=(h,j,tt=0,st)=>{const ut=h.indexOf(j,tt);return ut!==-1?bt(st)?!0:ut+j.length<=st:!1},xa=(h,j)=>Po(h,j,0),ju=(h,j)=>Po(h,j,h.length-j.length),Au=(h=>j=>j.replace(h,""))(/^\s+|\s+$/g),Un=h=>h.length>0,Bn=h=>!Un(h),Mo=h=>h.style!==void 0&&Tt(h.style.getPropertyValue),jo=(h,j)=>{const st=(j||document).createElement("div");if(st.innerHTML=h,!st.hasChildNodes()||st.childNodes.length>1){const ut="HTML does not have a single root node";throw console.error(ut,h),new Error(ut)}return Ns(st.childNodes[0])},ss=(h,j)=>{const st=(j||document).createElement(h);return Ns(st)},Cs=(h,j)=>{const st=(j||document).createTextNode(h);return Ns(st)},Ns=h=>{if(h==null)throw new Error("Node cannot be null or undefined");return{dom:h}},ro={fromHtml:jo,fromTag:ss,fromText:Cs,fromDom:Ns,fromPoint:(h,j,tt)=>It.from(h.dom.elementFromPoint(j,tt)).map(Ns)},Ls=typeof window<"u"?window:Function("return this;")(),Kn=(h,j)=>{let tt=j??Ls;for(let st=0;st<h.length&&tt!==void 0&&tt!==null;++st)tt=tt[h[st]];return tt},eo=(h,j)=>{const tt=h.split(".");return Kn(tt,j)},nr=(h,j)=>eo(h,j),lr=(h,j)=>{const tt=nr(h,j);if(tt==null)throw new Error(h+" not available on this browser");return tt},Rr=Object.getPrototypeOf,Qr=h=>lr("HTMLElement",h),es=h=>{const j=eo("ownerDocument.defaultView",h);return nt(h)&&(Qr(j).prototype.isPrototypeOf(h)||/^HTML\w*Element$/.test(Rr(h).constructor.name))},Hr=9,hs=11,ks=1,Nl=3,Xl=h=>h.dom.nodeName.toLowerCase(),uu=h=>h.dom.nodeType,Kp=h=>j=>uu(j)===h,sm=h=>_s(h)&&es(h.dom),_s=Kp(ks),Al=Kp(Nl),Pl=Kp(Hr),wp=Kp(hs),Cp=h=>j=>_s(j)&&Xl(j)===h,dp=(h,j)=>{const tt=h.dom;if(tt.nodeType!==ks)return!1;{const st=tt;if(st.matches!==void 0)return st.matches(j);if(st.msMatchesSelector!==void 0)return st.msMatchesSelector(j);if(st.webkitMatchesSelector!==void 0)return st.webkitMatchesSelector(j);if(st.mozMatchesSelector!==void 0)return st.mozMatchesSelector(j);throw new Error("Browser lacks native selectors")}},ku=h=>h.nodeType!==ks&&h.nodeType!==Hr&&h.nodeType!==hs||h.childElementCount===0,g1=(h,j)=>{const tt=j===void 0?document:j.dom;return ku(tt)?[]:On(tt.querySelectorAll(h),ro.fromDom)},Vm=(h,j)=>{const tt=j===void 0?document:j.dom;return ku(tt)?It.none():It.from(tt.querySelector(h)).map(ro.fromDom)},Vl=(h,j)=>h.dom===j.dom,Dp=(h,j)=>{const tt=h.dom,st=j.dom;return tt===st?!1:tt.contains(st)},Np=h=>ro.fromDom(h.dom.ownerDocument),fp=h=>Pl(h)?h:Np(h),ry=h=>ro.fromDom(fp(h).dom.documentElement),im=h=>ro.fromDom(fp(h).dom.defaultView),Yp=h=>It.from(h.dom.parentNode).map(ro.fromDom),Wm=h=>Yp(h),Tm=h=>It.from(h.dom.parentElement).map(ro.fromDom),py=(h,j)=>{const tt=Tt(j)?j:hn;let st=h.dom;const ut=[];for(;st.parentNode!==null&&st.parentNode!==void 0;){const mt=st.parentNode,yt=ro.fromDom(mt);if(ut.push(yt),tt(yt)===!0)break;st=mt}return ut},gy=h=>It.from(h.dom.offsetParent).map(ro.fromDom),U0=h=>It.from(h.dom.nextSibling).map(ro.fromDom),Im=h=>On(h.dom.childNodes,ro.fromDom),Ap=(h,j)=>{const tt=h.dom.childNodes;return It.from(tt[j]).map(ro.fromDom)},sy=h=>Ap(h,0),iy=(h,j)=>({element:h,offset:j}),Dy=(h,j)=>{const tt=Im(h);return tt.length>0&&j<tt.length?iy(tt[j],0):iy(h,j)},E0=h=>wp(h)&&wt(h.dom.host),hp=h=>ro.fromDom(h.dom.getRootNode()),Rm=h=>E0(h)?h:ro.fromDom(fp(h).dom.body),Lp=h=>Xp(h).isSome(),Xp=h=>{const j=hp(h);return E0(j)?It.some(j):It.none()},Ny=h=>ro.fromDom(h.dom.host),Ly=h=>{if(wt(h.target)){const j=ro.fromDom(h.target);if(_s(j)&&un(j)&&h.composed&&h.composedPath){const tt=h.composedPath();if(tt)return bo(tt)}}return It.from(h.target)},un=h=>wt(h.dom.shadowRoot),Fn=h=>{const j=Al(h)?h.dom.parentNode:h.dom;if(j==null||j.ownerDocument===null)return!1;const tt=j.ownerDocument;return Xp(ro.fromDom(j)).fold(()=>tt.body.contains(j),Zt(Fn,Ny))},fo=()=>Wo(ro.fromDom(document)),Wo=h=>{const j=h.dom.body;if(j==null)throw new Error("Body is not available yet");return ro.fromDom(j)},pr=(h,j,tt)=>{if(_e(tt)||pt(tt)||Rt(tt))h.setAttribute(j,tt+"");else throw console.error("Invalid call to Attribute.set. Key ",j,":: Value ",tt,":: Element ",h),new Error("Attribute value was not simple")},Vo=(h,j,tt)=>{pr(h.dom,j,tt)},$l=(h,j)=>{const tt=h.dom;sr(j,(st,ut)=>{pr(tt,ut,st)})},Kr=(h,j)=>{const tt=h.dom.getAttribute(j);return tt===null?void 0:tt},Os=(h,j)=>It.from(Kr(h,j)),Pu=(h,j)=>{const tt=h.dom;return tt&&tt.hasAttribute?tt.hasAttribute(j):!1},Kt=(h,j)=>{h.dom.removeAttribute(j)},vn=h=>mo(h.dom.attributes,(j,tt)=>(j[tt.name]=tt.value,j),{}),qn=(h,j,tt)=>{if(!_e(tt))throw console.error("Invalid call to CSS.set. Property ",j,":: Value ",tt,":: Element ",h),new Error("CSS value must be a string: "+tt);Mo(h)&&h.style.setProperty(j,tt)},Eo=(h,j)=>{Mo(h)&&h.style.removeProperty(j)},Xo=(h,j,tt)=>{const st=h.dom;qn(st,j,tt)},Zs=(h,j)=>{const tt=h.dom;sr(j,(st,ut)=>{qn(tt,ut,st)})},Zl=(h,j)=>{const tt=h.dom;sr(j,(st,ut)=>{st.fold(()=>{Eo(tt,ut)},mt=>{qn(tt,ut,mt)})})},ru=(h,j)=>{const tt=h.dom,ut=window.getComputedStyle(tt).getPropertyValue(j);return ut===""&&!Fn(h)?cr(tt,j):ut},cr=(h,j)=>Mo(h)?h.style.getPropertyValue(j):"",du=(h,j)=>{const tt=h.dom,st=cr(tt,j);return It.from(st).filter(ut=>ut.length>0)},Fp=h=>{const j={},tt=h.dom;if(Mo(tt))for(let st=0;st<tt.style.length;st++){const ut=tt.style.item(st);j[ut]=tt.style[ut]}return j},H0=(h,j,tt)=>{const st=ro.fromTag(h);return Xo(st,j,tt),du(st,j).isSome()},Bs=(h,j)=>{const tt=h.dom;Eo(tt,j),ou(Os(h,"style").map(Au),"")&&Kt(h,"style")},qm=h=>h.dom.offsetWidth,f0=(h,j)=>{const tt=(kt,Ot)=>{if(!Rt(Ot)&&!Ot.match(/^[0-9]+$/))throw new Error(h+".set accepts only positive integer values. Value was "+Ot);const zt=kt.dom;Mo(zt)&&(zt.style[h]=Ot+"px")},st=kt=>{const Ot=j(kt);if(Ot<=0||Ot===null){const zt=ru(kt,h);return parseFloat(zt)||0}return Ot},ut=st,mt=(kt,Ot)=>mo(Ot,(zt,Gt)=>{const Wt=ru(kt,Gt),sn=Wt===void 0?0:parseInt(Wt,10);return isNaN(sn)?zt:zt+sn},0);return{set:tt,get:st,getOuter:ut,aggregate:mt,max:(kt,Ot,zt)=>{const Gt=mt(kt,zt);return Ot>Gt?Ot-Gt:0}}},kp=f0("height",h=>{const j=h.dom;return Fn(h)?j.getBoundingClientRect().height:j.offsetHeight}),fu=h=>kp.get(h),V0=h=>kp.getOuter(h),zx=(h,j)=>{const tt=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],st=kp.max(h,j,tt);Xo(h,"max-height",st+"px")},c_=(h,j)=>({left:h,top:j,translate:(st,ut)=>c_(h+st,j+ut)}),Hu=c_,m1=h=>{const j=h.getBoundingClientRect();return Hu(j.left,j.top)},A0=(h,j)=>h!==void 0?h:j!==void 0?j:0,Fu=h=>{const j=h.dom.ownerDocument,tt=j.body,st=j.defaultView,ut=j.documentElement;if(tt===h.dom)return Hu(tt.offsetLeft,tt.offsetTop);const mt=A0(st==null?void 0:st.pageYOffset,ut.scrollTop),yt=A0(st==null?void 0:st.pageXOffset,ut.scrollLeft),kt=A0(ut.clientTop,tt.clientTop),Ot=A0(ut.clientLeft,tt.clientLeft);return T0(h).translate(yt-Ot,mt-kt)},T0=h=>{const j=h.dom,st=j.ownerDocument.body;return st===j?Hu(st.offsetLeft,st.offsetTop):Fn(h)?m1(j):Hu(0,0)},Mm=f0("width",h=>h.dom.offsetWidth),y1=(h,j)=>Mm.set(h,j),bn=h=>Mm.get(h),Sn=h=>Mm.getOuter(h),Ao=(h,j)=>{const tt=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],st=Mm.max(h,j,tt);Xo(h,"max-width",st+"px")},qo=h=>{let j=!1,tt;return(...st)=>(j||(j=!0,tt=h.apply(null,st)),tt)},ps=(h,j,tt,st)=>{const ut=h.isiOS()&&/ipad/i.test(tt)===!0,mt=h.isiOS()&&!ut,yt=h.isiOS()||h.isAndroid(),kt=yt||st("(pointer:coarse)"),Ot=ut||!mt&&yt&&st("(min-device-width:768px)"),zt=mt||yt&&!Ot,Gt=j.isSafari()&&h.isiOS()&&/safari/i.test(tt)===!1,Wt=!zt&&!Ot&&!Gt;return{isiPad:Nt(ut),isiPhone:Nt(mt),isTablet:Nt(Ot),isPhone:Nt(zt),isTouch:Nt(kt),isAndroid:h.isAndroid,isiOS:h.isiOS,isWebView:Nt(Gt),isDesktop:Nt(Wt)}},Tl=(h,j)=>{for(let tt=0;tt<h.length;tt++){const st=h[tt];if(st.test(j))return st}},Xs=(h,j)=>{const tt=Tl(h,j);if(!tt)return{major:0,minor:0};const st=ut=>Number(j.replace(tt,"$"+ut));return Pm(st(1),st(2))},gu=(h,j)=>{const tt=String(j).toLowerCase();return h.length===0?pp():Xs(h,tt)},pp=()=>Pm(0,0),Pm=(h,j)=>({major:h,minor:j}),am={nu:Pm,detect:gu,unknown:pp},rp=(h,j)=>wo(j.brands,tt=>{const st=tt.brand.toLowerCase();return mn(h,ut=>{var mt;return st===((mt=ut.brand)===null||mt===void 0?void 0:mt.toLowerCase())}).map(ut=>({current:ut.name,version:am.nu(parseInt(tt.version,10),0)}))}),ip=(h,j)=>{const tt=String(j).toLowerCase();return mn(h,st=>st.search(tt))},Tp=(h,j)=>ip(h,j).map(tt=>{const st=am.detect(tt.versionRegexes,j);return{current:tt.name,version:st}}),lm=(h,j)=>ip(h,j).map(tt=>{const st=am.detect(tt.versionRegexes,j);return{current:tt.name,version:st}}),Vu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ap=h=>j=>Us(j,h),zu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:h=>Us(h,"edge/")&&Us(h,"chrome")&&Us(h,"safari")&&Us(h,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Vu],search:h=>Us(h,"chrome")&&!Us(h,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:h=>Us(h,"msie")||Us(h,"trident")},{name:"Opera",versionRegexes:[Vu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ap("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ap("firefox")},{name:"Safari",versionRegexes:[Vu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:h=>(Us(h,"safari")||Us(h,"mobile/"))&&Us(h,"applewebkit")}],my=[{name:"Windows",search:ap("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:h=>Us(h,"iphone")||Us(h,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ap("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ap("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ap("linux"),versionRegexes:[]},{name:"Solaris",search:ap("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ap("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ap("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],u_={browsers:Nt(zu),oses:Nt(my)},ov="Edge",b1="Chromium",v1="IE",Rv="Opera",Mv="Firefox",I0="Safari",Zm=()=>Bw({current:void 0,version:am.unknown()}),Bw=h=>{const j=h.current,tt=h.version,st=ut=>()=>j===ut;return{current:j,version:tt,isEdge:st(ov),isChromium:st(b1),isIE:st(v1),isOpera:st(Rv),isFirefox:st(Mv),isSafari:st(I0)}},Fy={unknown:Zm,nu:Bw,edge:Nt(ov),chromium:Nt(b1),ie:Nt(v1),opera:Nt(Rv),firefox:Nt(Mv),safari:Nt(I0)},Bx="Windows",_1="iOS",$x="Android",K_="Linux",x1="macOS",Y_="Solaris",Gx="FreeBSD",Pv="ChromeOS",$w=()=>Qn({current:void 0,version:am.unknown()}),Qn=h=>{const j=h.current,tt=h.version,st=ut=>()=>j===ut;return{current:j,version:tt,isWindows:st(Bx),isiOS:st(_1),isAndroid:st($x),isMacOS:st(x1),isLinux:st(K_),isSolaris:st(Y_),isFreeBSD:st(Gx),isChromeOS:st(Pv)}},w1={unknown:$w,nu:Qn,windows:Nt(Bx),ios:Nt(_1),android:Nt($x),linux:Nt(K_),macos:Nt(x1),solaris:Nt(Y_),freebsd:Nt(Gx),chromeos:Nt(Pv)},cC={detect:(h,j,tt)=>{const st=u_.browsers(),ut=u_.oses(),mt=j.bind(Ot=>rp(st,Ot)).orThunk(()=>Tp(st,h)).fold(Fy.unknown,Fy.nu),yt=lm(ut,h).fold(w1.unknown,w1.nu),kt=ps(yt,mt,h,tt);return{browser:mt,os:yt,deviceType:kt}}},uC=h=>window.matchMedia(h).matches;let Ov=qo(()=>cC.detect(window.navigator.userAgent,It.from(window.navigator.userAgentData),uC));const _i=()=>Ov(),Om=(h,j,tt,st,ut,mt,yt)=>({target:h,x:j,y:tt,stop:st,prevent:ut,kill:mt,raw:yt}),cm=h=>{const j=ro.fromDom(Ly(h).getOr(h.target)),tt=()=>h.stopPropagation(),st=()=>h.preventDefault(),ut=Xt(st,tt);return Om(j,h.clientX,h.clientY,tt,st,ut,h)},Dv=(h,j)=>tt=>{h(tt)&&j(cm(tt))},jx=(h,j,tt,st,ut)=>{const mt=Dv(tt,st);return h.dom.addEventListener(j,mt,ut),{unbind:Pn(X_,h,j,mt,ut)}},d_=(h,j,tt,st)=>jx(h,j,tt,st,!1),Dm=(h,j,tt,st)=>jx(h,j,tt,st,!0),X_=(h,j,tt,st)=>{h.dom.removeEventListener(j,tt,st)},rv=(h,j)=>{Yp(h).each(st=>{st.dom.insertBefore(j.dom,h.dom)})},J_=(h,j)=>{U0(h).fold(()=>{Yp(h).each(ut=>{Km(ut,j)})},st=>{rv(st,j)})},sv=(h,j)=>{sy(h).fold(()=>{Km(h,j)},st=>{h.dom.insertBefore(j.dom,st.dom)})},Km=(h,j)=>{h.dom.appendChild(j.dom)},dC=(h,j,tt)=>{Ap(h,tt).fold(()=>{Km(h,j)},st=>{rv(st,j)})},f_=(h,j)=>{_o(j,tt=>{Km(h,tt)})},Jp=h=>{h.dom.textContent="",_o(Im(h),j=>{h0(j)})},h0=h=>{const j=h.dom;j.parentNode!==null&&j.parentNode.removeChild(j)},Ym=h=>{const j=h!==void 0?h.dom:document,tt=j.body.scrollLeft||j.documentElement.scrollLeft,st=j.body.scrollTop||j.documentElement.scrollTop;return Hu(tt,st)},k1=(h,j,tt)=>{const ut=(tt!==void 0?tt.dom:document).defaultView;ut&&ut.scrollTo(h,j)},h_=h=>{const j=h===void 0?window:h;return _i().browser.isFirefox()?It.none():It.from(j.visualViewport)},Gw=(h,j,tt,st)=>({x:h,y:j,width:tt,height:st,right:h+tt,bottom:j+st}),p_=h=>{const j=h===void 0?window:h,tt=j.document,st=Ym(ro.fromDom(tt));return h_(j).fold(()=>{const ut=j.document.documentElement,mt=ut.clientWidth,yt=ut.clientHeight;return Gw(st.left,st.top,mt,yt)},ut=>Gw(Math.max(ut.pageLeft,st.left),Math.max(ut.pageTop,st.top),ut.width,ut.height))},yy=()=>ro.fromDom(document),g_=(h,j)=>h.view(j).fold(Nt([]),st=>{const ut=h.owner(st),mt=g_(h,ut);return[st].concat(mt)}),WS=(h,j)=>{const tt=j.owner(h),st=g_(j,tt);return It.some(st)};var Uw=Object.freeze({__proto__:null,view:h=>{var j;return(h.dom===document?It.none():It.from((j=h.dom.defaultView)===null||j===void 0?void 0:j.frameElement)).map(ro.fromDom)},owner:h=>Np(h)});const m_=h=>{const j=yy(),tt=Ym(j);return WS(h,Uw).fold(Pn(Fu,h),ut=>{const mt=T0(h),yt=Ho(ut,(kt,Ot)=>{const zt=T0(Ot);return{left:kt.left+zt.left,top:kt.top+zt.top}},{left:0,top:0});return Hu(yt.left+mt.left+tt.left,yt.top+mt.top+tt.top)})},S1=(h,j,tt)=>({point:h,width:j,height:tt}),Q_=(h,j,tt,st)=>({x:h,y:j,width:tt,height:st}),Qu=(h,j,tt,st)=>({x:h,y:j,width:tt,height:st,right:h+tt,bottom:j+st}),_d=h=>{const j=Fu(h),tt=Sn(h),st=V0(h);return Qu(j.left,j.top,tt,st)},Nv=h=>{const j=m_(h),tt=Sn(h),st=V0(h);return Qu(j.left,j.top,tt,st)},ay=(h,j)=>{const tt=Math.max(h.x,j.x),st=Math.max(h.y,j.y),ut=Math.min(h.right,j.right),mt=Math.min(h.bottom,j.bottom),yt=ut-tt,kt=mt-st;return Qu(tt,st,yt,kt)},Hw=(h,j)=>mo(j,(tt,st)=>ay(tt,st),h),zp=()=>p_(window),ls=h=>{let j=h;return{get:()=>j,set:ut=>{j=ut}}},iv=h=>{const j=ls(It.none()),tt=()=>j.get().each(h);return{clear:()=>{tt(),j.set(It.none())},isSet:()=>j.get().isSome(),get:()=>j.get(),set:kt=>{tt(),j.set(It.some(kt))}}},Vw=()=>iv(h=>h.destroy()),W0=()=>iv(h=>h.unbind()),Wl=()=>{const h=iv(Et);return{...h,on:tt=>h.get().each(tt)}};var Lv=tinymce.util.Tools.resolve("tinymce.ThemeManager");const ex=h=>{const j=mt=>mt(h),tt=Nt(h),st=()=>ut,ut={tag:!0,inner:h,fold:(mt,yt)=>yt(h),isValue:fn,isError:hn,map:mt=>Ks.value(mt(h)),mapError:st,bind:j,exists:j,forall:j,getOr:tt,or:st,getOrThunk:tt,orThunk:st,getOrDie:tt,each:mt=>{mt(h)},toOptional:()=>It.some(h)};return ut},Ux=h=>{const j=()=>tt,tt={tag:!1,inner:h,fold:(st,ut)=>st(h),isValue:hn,isError:fn,map:j,mapError:st=>Ks.error(st(h)),bind:j,exists:hn,forall:fn,getOr:Jt,or:Jt,getOrThunk:ao,orThunk:ao,getOrDie:Vt(String(h)),each:Et,toOptional:It.none};return tt},Ks={value:ex,error:Ux,fromOption:(h,j)=>h.fold(()=>Ux(j),ex)};var bp;(function(h){h[h.Error=0]="Error",h[h.Value=1]="Value"})(bp||(bp={}));const Fv=(h,j,tt)=>h.stype===bp.Error?j(h.serror):tt(h.svalue),zv=h=>{const j=[],tt=[];return _o(h,st=>{Fv(st,ut=>tt.push(ut),ut=>j.push(ut))}),{values:j,errors:tt}},M0=(h,j)=>h.stype===bp.Error?{stype:bp.Error,serror:j(h.serror)}:h,p0=(h,j)=>h.stype===bp.Value?{stype:bp.Value,svalue:j(h.svalue)}:h,q0=(h,j)=>h.stype===bp.Value?j(h.svalue):h,Su=(h,j)=>h.stype===bp.Error?j(h.serror):h,ly=h=>({stype:bp.Value,svalue:h}),E1=h=>({stype:bp.Error,serror:h}),lp={fromResult:h=>h.fold(E1,ly),toResult:h=>Fv(h,Ks.error,Ks.value),svalue:ly,partition:zv,serror:E1,bind:q0,bindError:Su,map:p0,mapError:M0,fold:Fv},Bv=(h,j,tt,st)=>({tag:"field",key:h,newKey:j,presence:tt,prop:st}),y_=(h,j)=>({tag:"custom",newKey:h,instantiator:j}),mu=(h,j,tt)=>{switch(h.tag){case"field":return j(h.key,h.newKey,h.presence,h.prop);case"custom":return tt(h.newKey,h.instantiator)}},vy=(h,j)=>j,Hx=(h,j)=>rt(h)&&rt(j)?Ou(h,j):j,av=h=>(...j)=>{if(j.length===0)throw new Error("Can't merge zero objects");const tt={};for(let st=0;st<j.length;st++){const ut=j[st];for(const mt in ut)Ms(ut,mt)&&(tt[mt]=h(tt[mt],ut[mt]))}return tt},Ou=av(Hx),$v=av(vy),g0=()=>({tag:"required",process:{}}),b_=h=>({tag:"defaultedThunk",process:h}),xl=h=>b_(Nt(h)),v_=()=>({tag:"option",process:{}}),Vx=h=>({tag:"mergeWithThunk",process:h}),Dt=h=>Vx(Nt(h)),Ut=(h,j)=>h.length>0?lp.svalue(Ou(j,$v.apply(void 0,h))):lp.svalue(j),nn=h=>Xt(lp.serror,Dn)(h),rr={consolidateObj:(h,j)=>{const tt=lp.partition(h);return tt.errors.length>0?nn(tt.errors):Ut(tt.values,j)},consolidateArr:h=>{const j=lp.partition(h);return j.errors.length>0?nn(j.errors):lp.svalue(j.values)}},xs=h=>nt(h)&&Oo(h).length>100?" removed due to size":JSON.stringify(h,null,2),qs=h=>{const j=h.length>10?h.slice(0,10).concat([{path:[],getErrorInfo:Nt("... (only showing first ten failures)")}]):h;return On(j,tt=>"Failed path: ("+tt.path.join(" > ")+`)
`+tt.getErrorInfo())},$s=(h,j)=>lp.serror([{path:h,getErrorInfo:j}]),cs=(h,j,tt)=>$s(h,()=>'Could not find valid *required* value for "'+j+'" in '+xs(tt)),_f=(h,j)=>$s(h,()=>'Choice schema did not contain choice key: "'+j+'"'),Ip=(h,j,tt)=>$s(h,()=>'The chosen schema: "'+tt+'" did not exist in branches: '+xs(j)),Xm=(h,j)=>$s(h,()=>"There are unsupported fields: ["+j.join(", ")+"] specified"),Gv=(h,j)=>$s(h,Nt(j)),tx=h=>{const j=(st,ut)=>lp.bindError(h(ut),mt=>Gv(st,mt)),tt=Nt("val");return{extract:j,toString:tt}},qw=tx(lp.svalue),m0=(h,j,tt,st)=>tr(j,tt).fold(()=>cs(h,tt,j),st),Zw=(h,j,tt,st)=>{const ut=tr(h,j).getOrThunk(()=>tt(h));return st(ut)},UA=(h,j,tt)=>tt(tr(h,j)),qS=(h,j,tt,st)=>{const ut=tr(h,j).map(mt=>mt===!0?tt(h):mt);return st(ut)},um=(h,j,tt,st,ut)=>{const mt=kt=>ut.extract(j.concat([st]),kt),yt=kt=>kt.fold(()=>lp.svalue(It.none()),Ot=>{const zt=ut.extract(j.concat([st]),Ot);return lp.map(zt,It.some)});switch(h.tag){case"required":return m0(j,tt,st,mt);case"defaultedThunk":return Zw(tt,st,h.process,mt);case"option":return UA(tt,st,yt);case"defaultedOptionThunk":return qS(tt,st,h.process,yt);case"mergeWithThunk":return Zw(tt,st,Nt({}),kt=>{const Ot=Ou(h.process(tt),kt);return mt(Ot)})}},hC=(h,j,tt)=>{const st={},ut=[];for(const mt of tt)mu(mt,(yt,kt,Ot,zt)=>{const Gt=um(Ot,h,j,yt,zt);lp.fold(Gt,Wt=>{ut.push(...Wt)},Wt=>{st[kt]=Wt})},(yt,kt)=>{st[yt]=kt(j)});return ut.length>0?lp.serror(ut):lp.svalue(st)},dm=h=>({extract:(st,ut)=>h().extract(st,ut),toString:()=>h().toString()}),pC=h=>Oo(As(h,wt)),cy=h=>{const j=vs(h),tt=Ho(h,(ut,mt)=>mu(mt,yt=>Ou(ut,{[yt]:!0}),Nt(ut)),{});return{extract:(ut,mt)=>{const yt=pt(mt)?[]:pC(mt),kt=lo(yt,Ot=>!cu(tt,Ot));return kt.length===0?j.extract(ut,mt):Xm(ut,kt)},toString:j.toString}},vs=h=>({extract:(st,ut)=>hC(st,ut,h),toString:()=>`obj{
`+On(h,ut=>mu(ut,(mt,yt,kt,Ot)=>mt+" -> "+Ot.toString(),(mt,yt)=>"state("+mt+")")).join(`
`)+"}"}),uy=h=>({extract:(st,ut)=>{const mt=On(ut,(yt,kt)=>h.extract(st.concat(["["+kt+"]"]),yt));return rr.consolidateArr(mt)},toString:()=>"array("+h.toString()+")"}),ZS=(h,j)=>{const tt=j!==void 0?j:Jt;return{extract:(mt,yt)=>{const kt=[];for(const Ot of h){const zt=Ot.extract(mt,yt);if(zt.stype===bp.Value)return{stype:bp.Value,svalue:tt(zt.svalue)};kt.push(zt)}return rr.consolidateArr(kt)},toString:()=>"oneOf("+On(h,mt=>mt.toString()).join(", ")+")"}},gC=(h,j)=>{const tt=(mt,yt)=>uy(tx(h)).extract(mt,yt);return{extract:(mt,yt)=>{const kt=Oo(yt),Ot=tt(mt,kt);return lp.bind(Ot,zt=>{const Gt=On(zt,Wt=>Bv(Wt,Wt,g0(),j));return vs(Gt).extract(mt,yt)})},toString:()=>"setOf("+j.toString()+")"}},nx=(h,j)=>{const tt=qo(j);return{extract:(mt,yt)=>tt().extract(mt,yt),toString:()=>tt().toString()}},KS=Xt(uy,vs),zy=Nt(qw),jv=(h,j)=>tx(tt=>{const st=typeof tt;return h(tt)?lp.svalue(tt):lp.serror(`Expected type: ${j} but got: ${st}`)}),ox=jv(Rt,"number"),Nr=jv(_e,"string"),By=jv(pt,"boolean"),mC=jv(Tt,"function"),Wx=h=>{if(Object(h)!==h)return!0;switch({}.toString.call(h).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(h).every(j=>Wx(h[j]));default:return!1}},$y=tx(h=>Wx(h)?lp.svalue(h):lp.serror("Expected value to be acceptable for sending via postMessage")),Kw=(h,j,tt,st)=>tr(tt,st).fold(()=>Ip(h,tt,st),mt=>mt.extract(h.concat(["branch: "+st]),j)),rx=(h,j)=>({extract:(ut,mt)=>tr(mt,h).fold(()=>_f(ut,h),kt=>Kw(ut,mt,j,kt)),toString:()=>"chooseOn("+h+"). Possible values: "+Oo(j)}),T1=()=>uy(qw),Yw=h=>tx(j=>h(j).fold(lp.serror,lp.svalue)),lv=(h,j)=>gC(tt=>lp.fromResult(h(tt)),j),HA=(h,j,tt)=>{const st=j.extract([h],tt);return lp.mapError(st,ut=>({input:tt,errors:ut}))},cp=(h,j,tt)=>lp.toResult(HA(h,j,tt)),dr=h=>h.fold(j=>{throw new Error(sx(j))},Jt),y0=(h,j,tt)=>dr(cp(h,j,tt)),sx=h=>`Errors: 
`+qs(h.errors).join(`
`)+`

Input object: `+xs(h.input),Sp=(h,j)=>rx(h,vr(j,vs)),qx=(h,j)=>nx(h,j),fm=Bv,Jl=y_,Xw=h=>Yw(j=>Wn(h,j)?Ks.value(j):Ks.error(`Unsupported value: "${j}", choose one of "${h.join(", ")}".`)),Jo=h=>fm(h,h,g0(),zy()),Ql=(h,j)=>fm(h,h,g0(),j),Jw=h=>Ql(h,ox),Qp=h=>Ql(h,Nr),Jm=(h,j)=>fm(h,h,g0(),Xw(j)),_y=h=>Ql(h,mC),YS=(h,j)=>fm(h,h,v_(),tx(tt=>lp.serror("The field: "+h+" is forbidden. "+j))),__=(h,j)=>fm(h,h,g0(),vs(j)),XS=(h,j)=>fm(h,h,g0(),KS(j)),dy=(h,j)=>fm(h,h,g0(),uy(j)),Kl=h=>fm(h,h,v_(),zy()),Uv=(h,j)=>fm(h,h,v_(),j),Qw=h=>Uv(h,ox),_g=h=>Uv(h,Nr),yC=(h,j)=>Uv(h,Xw(j)),cv=h=>Uv(h,mC),e2=(h,j)=>Uv(h,uy(j)),hm=(h,j)=>Uv(h,vs(j)),Qm=(h,j)=>Uv(h,cy(j)),ko=(h,j)=>fm(h,h,xl(j),zy()),Eu=(h,j,tt)=>fm(h,h,xl(j),tt),bC=(h,j)=>Eu(h,j,ox),Rp=(h,j)=>Eu(h,j,Nr),wm=(h,j,tt)=>Eu(h,j,Xw(tt)),em=(h,j)=>Eu(h,j,By),Wu=(h,j)=>Eu(h,j,mC),vC=(h,j)=>Eu(h,j,$y),x_=(h,j,tt)=>Eu(h,j,uy(tt)),Pt=(h,j,tt)=>Eu(h,j,vs(tt)),tn={generate:h=>{if(!ct(h))throw new Error("cases must be an array");if(h.length===0)throw new Error("there must be at least one case");const j=[],tt={};return _o(h,(st,ut)=>{const mt=Oo(st);if(mt.length!==1)throw new Error("one and only one name per case");const yt=mt[0],kt=st[yt];if(tt[yt]!==void 0)throw new Error("duplicate key detected:"+yt);if(yt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ct(kt))throw new Error("case arguments must be an array");j.push(yt),tt[yt]=(...Ot)=>{const zt=Ot.length;if(zt!==kt.length)throw new Error("Wrong number of arguments to case "+yt+". Expected "+kt.length+" ("+kt+"), got "+zt);return{fold:(...Wt)=>{if(Wt.length!==h.length)throw new Error("Wrong number of arguments to fold. Expected "+h.length+", got "+Wt.length);return Wt[ut].apply(null,Ot)},match:Wt=>{const sn=Oo(Wt);if(j.length!==sn.length)throw new Error("Wrong number of arguments to match. Expected: "+j.join(",")+`
Actual: `+sn.join(","));if(!Cn(j,xn=>Wn(sn,xn)))throw new Error("Not all branches were specified when using match. Specified: "+sn.join(", ")+`
Required: `+j.join(", "));return Wt[yt].apply(null,Ot)},log:Wt=>{console.log(Wt,{constructors:j,constructor:yt,params:Ot})}}}}),tt}};tn.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const _n=h=>{const j=[],tt=[];return _o(h,st=>{st.fold(ut=>{j.push(ut)},ut=>{tt.push(ut)})}),{errors:j,values:tt}},co=(h,j)=>{const tt={};return sr(h,(st,ut)=>{Wn(j,ut)||(tt[ut]=st)}),tt},Yo=(h,j)=>({[h]:j}),yr=h=>{const j={};return _o(h,tt=>{j[tt.key]=tt.value}),j},Yr=(h,j)=>co(h,j),Ps=(h,j)=>Yo(h,j),Ys=h=>yr(h),Bu=(h,j)=>h.length===0?Ks.value(j):Ks.value(Ou(j,$v.apply(void 0,h))),su=h=>Ks.error(Dn(h)),_h=(h,j)=>{const tt=_n(h);return tt.errors.length>0?su(tt.errors):Bu(tt.values,j)},P0=h=>Tt(h)?h:hn,xy=(h,j,tt)=>{let st=h.dom;const ut=P0(tt);for(;st.parentNode;){st=st.parentNode;const mt=ro.fromDom(st),yt=j(mt);if(yt.isSome())return yt;if(ut(mt))break}return It.none()},Nm=(h,j,tt)=>{const st=j(h),ut=P0(tt);return st.orThunk(()=>ut(h)?It.none():xy(h,j,ut))},Hv=(h,j)=>Vl(h.element,j.event.target),I1={can:fn,abort:hn,run:Et},R1=h=>{if(!cu(h,"can")&&!cu(h,"abort")&&!cu(h,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(h,null,2)+" does not have can, abort, or run!");return{...I1,...h}},w_=(h,j)=>(...tt)=>mo(h,(st,ut)=>st&&j(ut).apply(void 0,tt),!0),Zx=(h,j)=>(...tt)=>mo(h,(st,ut)=>st||j(ut).apply(void 0,tt),!1),n2=h=>Tt(h)?{can:fn,abort:hn,run:h}:h,_C=h=>{const j=w_(h,ut=>ut.can),tt=Zx(h,ut=>ut.abort);return{can:j,abort:tt,run:(...ut)=>{_o(h,mt=>{mt.run.apply(void 0,ut)})}}},Hp=Nt,uv=Hp("touchstart"),C_=Hp("touchmove"),Gl=Hp("touchend"),tp=Hp("touchcancel"),gp=Hp("mousedown"),b0=Hp("mousemove"),xC=Hp("mouseout"),wC=Hp("mouseup"),Z0=Hp("mouseover"),K0=Hp("focusin"),NM=Hp("focusout"),dv=Hp("keydown"),o2=Hp("keyup"),M1=Hp("input"),k_=Hp("change"),r2=Hp("click"),eL=Hp("transitioncancel"),JS=Hp("transitionend"),Kx=Hp("transitionstart"),tL=Hp("selectstart"),Bp=h=>Nt("alloy."+h),VA={tap:Bp("tap")},P1=Bp("focus"),s2=Bp("blur.post"),QS=Bp("paste.post"),O1=Bp("receive"),e0=Bp("execute"),Yx=Bp("focus.item"),WA=VA.tap,Xx=Bp("longpress"),Lm=Bp("sandbox.close"),qA=Bp("typeahead.cancel"),ZA=Bp("system.init"),nL=Bp("system.touchmove"),LM=Bp("system.touchend"),Jx=Bp("system.scroll"),i2=Bp("system.resize"),fy=Bp("system.attached"),Gy=Bp("system.detached"),jy=Bp("system.dismissRequested"),eE=Bp("system.repositionRequested"),tE=Bp("focusmanager.shifted"),CC=Bp("slotcontainer.visibility"),m3=Bp("system.external.element.scroll"),FM=Bp("change.tab"),zM=Bp("dismiss.tab"),y3=Bp("highlight"),kC=Bp("dehighlight"),wl=(h,j)=>{YA(h,h.element,j,{})},rs=(h,j,tt)=>{YA(h,h.element,j,tt)},Qx=h=>{wl(h,e0())},KA=(h,j,tt)=>{YA(h,j,tt,{})},YA=(h,j,tt,st)=>{const ut={target:j,...st};h.getSystem().triggerEvent(tt,j,ut)},b3=(h,j,tt,st)=>{const ut={...st,target:j};h.getSystem().triggerEvent(tt,j,ut)},XA=(h,j,tt,st)=>{h.getSystem().triggerEvent(tt,j,st.event)},yu=h=>Ys(h),v3=(h,j)=>({key:h,value:R1({abort:j})}),BM=(h,j)=>({key:h,value:R1({can:j})}),_3=h=>({key:h,value:R1({run:(j,tt)=>{tt.event.prevent()}})}),Qo=(h,j)=>({key:h,value:R1({run:j})}),SC=(h,j,tt)=>({key:h,value:R1({run:(st,ut)=>{j.apply(void 0,[st,ut].concat(tt))}})}),$M=h=>j=>Qo(h,j),a2=h=>j=>({key:h,value:R1({run:(tt,st)=>{Hv(tt,st)&&j(tt,st)}})}),GM=(h,j)=>Qo(h,(tt,st)=>{tt.getSystem().getByUid(j).each(ut=>{XA(ut,ut.element,h,st)})}),ix=(h,j,tt)=>{const st=j.partUids[tt];return GM(h,st)},JA=(h,j)=>Qo(h,(tt,st)=>{const ut=st.event,mt=tt.getSystem().getByDom(ut.target).getOrThunk(()=>Nm(ut.target,kt=>tt.getSystem().getByDom(kt).toOptional(),hn).getOr(tt));j(tt,mt,st)}),l2=h=>Qo(h,(j,tt)=>{tt.cut()}),nE=h=>Qo(h,(j,tt)=>{tt.stop()}),ew=(h,j)=>a2(h)(j),ep=a2(fy()),S_=a2(Gy()),jM=a2(ZA()),ax=$M(e0()),x3=(h,j,tt)=>{const st=tt.toString(),ut=st.indexOf(")")+1,mt=st.indexOf("("),yt=st.substring(mt+1,ut-1).split(/,\s*/);return h.toFunctionAnnotation=()=>({name:j,parameters:c2(yt.slice(0,1).concat(yt.slice(3)))}),h},c2=h=>On(h,j=>ju(j,"/*")?j.substring(0,j.length-2):j),w3=(h,j)=>{const tt=h.toString(),st=tt.indexOf(")")+1,ut=tt.indexOf("("),mt=tt.substring(ut+1,st-1).split(/,\s*/);return h.toFunctionAnnotation=()=>({name:j,parameters:c2(mt)}),h},C3=(h,j)=>{const tt=j.toString(),st=tt.indexOf(")")+1,ut=tt.indexOf("("),mt=tt.substring(ut+1,st-1).split(/,\s*/);return h.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:c2(mt.slice(1))}),h},Y0=h=>({classes:bt(h.classes)?[]:h.classes,attributes:bt(h.attributes)?{}:h.attributes,styles:bt(h.styles)?{}:h.styles}),EC=(h,j)=>({...h,attributes:{...h.attributes,...j.attributes},styles:{...h.styles,...j.styles},classes:h.classes.concat(j.classes)}),oL=(h,j,tt)=>ax(st=>{tt(st,h,j)}),tw=(h,j,tt)=>jM((st,ut)=>{tt(st,h,j)}),rL=(h,j,tt,st,ut,mt)=>{const yt=cy(h),kt=hm(j,[Qm("config",h)]);return oE(yt,kt,j,tt,st,ut,mt)},u2=(h,j,tt,st,ut,mt)=>{const yt=h,kt=hm(j,[Uv("config",h)]);return oE(yt,kt,j,tt,st,ut,mt)},QA=(h,j,tt)=>x3((ut,...mt)=>{const yt=[ut].concat(mt);return ut.config({name:Nt(h)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+h+". Using API: "+tt)},kt=>{const Ot=Array.prototype.slice.call(yt,1);return j.apply(void 0,[ut,kt.config,kt.state].concat(Ot))})},tt,j),sL=h=>({key:h,value:void 0}),oE=(h,j,tt,st,ut,mt,yt)=>{const kt=Wt=>cu(Wt,tt)?Wt[tt]():It.none(),Ot=vr(ut,(Wt,sn)=>QA(tt,Wt,sn)),Gt={...vr(mt,(Wt,sn)=>w3(Wt,sn)),...Ot,revoke:Pn(sL,tt),config:Wt=>{const sn=y0(tt+"-config",h,Wt);return{key:tt,value:{config:sn,me:Gt,configAsRaw:qo(()=>y0(tt+"-config",h,Wt)),initialConfig:Wt,state:yt}}},schema:Nt(j),exhibit:(Wt,sn)=>wu(kt(Wt),tr(st,"exhibit"),(cn,xn)=>xn(sn,cn.config,cn.state)).getOrThunk(()=>Y0({})),name:Nt(tt),handlers:Wt=>kt(Wt).map(sn=>tr(st,"events").getOr(()=>({}))(sn.config,sn.state)).getOr({})};return Gt},D1={init:()=>O0({readState:Nt("No State required")})},O0=h=>h,gr=h=>Ys(h),AC=cy([Jo("fields"),Jo("name"),ko("active",{}),ko("apis",{}),ko("state",D1),ko("extra",{})]),Fm=h=>{const j=y0("Creating behaviour: "+h.name,AC,h);return rL(j.fields,j.name,j.active,j.apis,j.extra,j.state)},k3=cy([Jo("branchKey"),Jo("branches"),Jo("name"),ko("active",{}),ko("apis",{}),ko("state",D1),ko("extra",{})]),S3=h=>{const j=y0("Creating behaviour: "+h.name,k3,h);return u2(Sp(j.branchKey,j.branches),j.name,j.active,j.apis,j.extra,j.state)},E3=Nt(void 0),$u=(h,j)=>{const tt=Kr(h,j);return tt===void 0||tt===""?[]:tt.split(" ")},iL=(h,j,tt)=>{const ut=$u(h,j).concat([tt]);return Vo(h,j,ut.join(" ")),!0},d2=(h,j,tt)=>{const st=lo($u(h,j),ut=>ut!==tt);return st.length>0?Vo(h,j,st.join(" ")):Kt(h,j),!1},lx=h=>h.dom.classList!==void 0,TC=h=>$u(h,"class"),T3=(h,j)=>iL(h,"class",j),E_=(h,j)=>d2(h,"class",j),UM=(h,j)=>Wn(TC(h),j)?E_(h,j):T3(h,j),Vp=(h,j)=>{lx(h)?h.dom.classList.add(j):T3(h,j)},eT=h=>{(lx(h)?h.dom.classList:TC(h)).length===0&&Kt(h,"class")},bu=(h,j)=>{lx(h)?h.dom.classList.remove(j):E_(h,j),eT(h)},I3=(h,j)=>{const tt=lx(h)?h.dom.classList.toggle(j):UM(h,j);return eT(h),tt},X0=(h,j)=>lx(h)&&h.dom.classList.contains(j),IC=(h,j)=>{_o(j,tt=>{Vp(h,tt)})},N1=(h,j)=>{_o(j,tt=>{bu(h,tt)})},Jz=(h,j)=>{_o(j,tt=>{I3(h,tt)})},tT=(h,j)=>Cn(j,tt=>X0(h,tt)),aL=h=>{const j=h.dom.classList,tt=new Array(j.length);for(let st=0;st<j.length;st++){const ut=j.item(st);ut!==null&&(tt[st]=ut)}return tt},HM=h=>lx(h)?aL(h):TC(h),Vv=(h,j,tt,st,ut)=>{const mt=yt=>yt+"px";return{position:h,left:j.map(mt),top:tt.map(mt),right:st.map(mt),bottom:ut.map(mt)}},L1=h=>({...h,position:It.some(h.position)}),D0=(h,j)=>{Zl(h,L1(j))},RC=h=>(ou(du(h,"position"),"fixed")?It.none():gy(h)).orThunk(()=>{const st=ro.fromTag("span");return Yp(h).bind(ut=>{Km(ut,st);const mt=gy(st);return h0(st),mt})}),nT=h=>RC(h).map(Fu).getOrThunk(()=>Hu(0,0)),oT=(h,j)=>{const tt=h.element;Vp(tt,j.transitionClass),bu(tt,j.fadeOutClass),Vp(tt,j.fadeInClass),j.onShow(h)},MC=(h,j)=>{const tt=h.element;Vp(tt,j.transitionClass),bu(tt,j.fadeInClass),Vp(tt,j.fadeOutClass),j.onHide(h)},nw=(h,j)=>h.y<j.bottom&&h.bottom>j.y,A_=(h,j)=>h.y>=j.y,PC=(h,j)=>h.bottom<=j.bottom,ow=(h,j,tt)=>({location:"top",leftX:j,topY:tt.bounds.y-h.y}),ux=(h,j,tt)=>({location:"bottom",leftX:j,bottomY:h.bottom-tt.bounds.bottom}),f2=h=>h.box.x-h.win.x,rE=(h,j,tt)=>{const st=j.win,ut=j.box,mt=f2(j);return wo(h,yt=>{switch(yt){case"bottom":return PC(ut,tt.bounds)?It.none():It.some(ux(st,mt,tt));case"top":return A_(ut,tt.bounds)?It.none():It.some(ow(st,mt,tt));default:return It.none()}}).getOr({location:"no-dock"})},rT=(h,j,tt)=>Cn(h,st=>{switch(st){case"bottom":return PC(j,tt.bounds);case"top":return A_(j,tt.bounds)}}),VM=(h,j)=>{const tt=j.optScrollEnv.fold(Nt(h.bounds.y),st=>st.scrollElmTop+(h.bounds.y-st.currentScrollTop));return Hu(h.bounds.x,tt)},R3=(h,j)=>{const tt=j.optScrollEnv.fold(Nt(h.y),st=>h.y+st.currentScrollTop-st.scrollElmTop);return Hu(h.x,tt)},OC=(h,j,tt)=>tt.getInitialPos().map(st=>{const ut=VM(st,j);return{box:Qu(ut.left,ut.top,bn(h),fu(h)),location:st.location}}),WM=(h,j,tt,st,ut)=>{const mt=R3(j,tt),yt=Qu(mt.left,mt.top,j.width,j.height);st.setInitialPos({style:Fp(h),position:ru(h,"position")||"static",bounds:yt,location:ut.location})},lL=(h,j,tt,st,ut)=>{st.getInitialPos().fold(()=>WM(h,j,tt,st,ut),()=>Et)},sT=(h,j,tt)=>tt.getInitialPos().bind(st=>{var ut;switch(tt.clearInitialPos(),st.position){case"static":return It.some({morph:"static"});case"absolute":const mt=RC(h).getOr(fo()),yt=_d(mt),kt=(ut=mt.dom.scrollTop)!==null&&ut!==void 0?ut:0;return It.some({morph:"absolute",positionCss:Vv("absolute",tr(st.style,"left").map(Ot=>j.x-yt.x),tr(st.style,"top").map(Ot=>j.y-yt.y+kt),tr(st.style,"right").map(Ot=>yt.right-j.right),tr(st.style,"bottom").map(Ot=>yt.bottom-j.bottom))});default:return It.none()}}),M3=(h,j,tt)=>OC(h,j,tt).filter(({box:st})=>rT(tt.getModes(),st,j)).bind(({box:st})=>sT(h,st,tt)),sE=h=>{switch(h.location){case"top":return It.some({morph:"fixed",positionCss:Vv("fixed",It.some(h.leftX),It.some(h.topY),It.none(),It.none())});case"bottom":return It.some({morph:"fixed",positionCss:Vv("fixed",It.some(h.leftX),It.none(),It.none(),It.some(h.bottomY))});default:return It.none()}},P3=(h,j,tt)=>{const st=_d(h),ut=zp(),mt=rE(tt.getModes(),{win:ut,box:st},j);return mt.location==="top"||mt.location==="bottom"?(WM(h,st,j,tt,mt),sE(mt)):It.none()},DC=(h,j,tt)=>M3(h,j,tt).orThunk(()=>j.optScrollEnv.bind(st=>OC(h,j,tt)).bind(({box:st,location:ut})=>{const mt=zp(),yt=f2({win:mt,box:st}),kt=ut==="top"?ow(mt,yt,j):ux(mt,yt,j);return sE(kt)})),Qz=(h,j,tt)=>{const st=h.element;return ou(du(st,"position"),"fixed")?DC(st,j,tt):P3(st,j,tt)},eB=(h,j,tt)=>{const st=h.element;return OC(st,j,tt).bind(({box:ut})=>sT(st,ut,tt))},NC=(h,j,tt,st)=>{const ut=_d(h),mt=zp(),yt=f2({win:mt,box:ut}),kt=st(mt,yt,j);return kt.location==="bottom"||kt.location==="top"?(lL(h,ut,j,tt,kt),sE(kt)):It.none()},Wv=(h,j,tt)=>{tt.setDocked(!1),_o(["left","right","top","bottom","position"],st=>Bs(h.element,st)),j.onUndocked(h)},iE=(h,j,tt,st)=>{const ut=st.position==="fixed";tt.setDocked(ut),D0(h.element,st),(ut?j.onDocked:j.onUndocked)(h)},qM=(h,j,tt,st,ut=!1)=>{j.contextual.each(mt=>{mt.lazyContext(h).each(yt=>{const kt=nw(yt,st.bounds);kt!==tt.isVisible()&&(tt.setVisible(kt),ut&&!kt?(IC(h.element,[mt.fadeOutClass]),mt.onHide(h)):(kt?oT:MC)(h,mt))})})},ZM=(h,j,tt,st,ut)=>{qM(h,j,tt,st,!0),iE(h,j,tt,ut.positionCss)},KM=(h,j,tt,st,ut)=>{switch(ut.morph){case"static":return Wv(h,j,tt);case"absolute":return iE(h,j,tt,ut.positionCss);case"fixed":return ZM(h,j,tt,st,ut)}},h2=(h,j,tt)=>{const st=j.lazyViewport(h);qM(h,j,tt,st),Qz(h,st,tt).each(ut=>{KM(h,j,tt,st,ut)})},tB=(h,j,tt)=>{const st=h.element;tt.setDocked(!1);const ut=j.lazyViewport(h);eB(h,ut,tt).each(mt=>{switch(mt.morph){case"static":{Wv(h,j,tt);break}case"absolute":{iE(h,j,tt,mt.positionCss);break}}}),tt.setVisible(!0),j.contextual.each(mt=>{N1(st,[mt.fadeInClass,mt.fadeOutClass,mt.transitionClass]),mt.onShow(h)}),g2(h,j,tt)},g2=(h,j,tt)=>{h.getSystem().isConnected()&&h2(h,j,tt)},LC=(h,j,tt)=>{tt.isDocked()&&tB(h,j,tt)},YM=h=>(j,tt,st)=>{const ut=tt.lazyViewport(j);NC(j.element,ut,st,h).each(yt=>{ZM(j,tt,st,ut,yt)})},FC=YM(ow),cL=YM(ux);var i0=Object.freeze({__proto__:null,refresh:g2,reset:LC,isDocked:(h,j,tt)=>tt.isDocked(),getModes:(h,j,tt)=>tt.getModes(),setModes:(h,j,tt,st)=>tt.setModes(st),forceDockToTop:FC,forceDockToBottom:cL}),rw=Object.freeze({__proto__:null,events:(h,j)=>yu([ew(JS(),(tt,st)=>{h.contextual.each(ut=>{X0(tt.element,ut.transitionClass)&&(N1(tt.element,[ut.transitionClass,ut.fadeInClass]),(j.isVisible()?ut.onShown:ut.onHidden)(tt)),st.stop()})}),Qo(Jx(),(tt,st)=>{g2(tt,h,j)}),Qo(m3(),(tt,st)=>{g2(tt,h,j)}),Qo(i2(),(tt,st)=>{LC(tt,h,j)})])});const uL=(h,j)=>{const st=(j||document).createElement("div");return st.innerHTML=h,Im(ro.fromDom(st))},dx=h=>h.dom.innerHTML,wy=(h,j)=>{const st=Np(h).dom,ut=ro.fromDom(st.createDocumentFragment()),mt=uL(j,st);f_(ut,mt),Jp(h),Km(h,ut)},F1=h=>{const j=ro.fromTag("div"),tt=ro.fromDom(h.dom.cloneNode(!0));return Km(j,tt),dx(j)},m2=(h,j)=>ro.fromDom(h.dom.cloneNode(j)),QM=h=>m2(h,!1),aE=h=>m2(h,!0),iT=h=>{if(E0(h))return"#shadow-root";{const j=QM(h);return F1(j)}},sw=h=>iT(h),D3="unknown";var z1;(function(h){h[h.STOP=0]="STOP",h[h.NORMAL=1]="NORMAL",h[h.LOGGING=2]="LOGGING"})(z1||(z1={}));const T_=ls({}),dL=(h,j)=>{const tt=[],st=new Date().getTime();return{logEventCut:(ut,mt,yt)=>{tt.push({outcome:"cut",target:mt,purpose:yt})},logEventStopped:(ut,mt,yt)=>{tt.push({outcome:"stopped",target:mt,purpose:yt})},logNoParent:(ut,mt,yt)=>{tt.push({outcome:"no-parent",target:mt,purpose:yt})},logEventNoHandlers:(ut,mt)=>{tt.push({outcome:"no-handlers-left",target:mt})},logEventResponse:(ut,mt,yt)=>{tt.push({outcome:"response",purpose:yt,target:mt})},write:()=>{const ut=new Date().getTime();Wn(["mousemove","mouseover","mouseout",ZA()],h)||console.log(h,{event:h,time:ut-st,target:j.dom,sequence:On(tt,mt=>Wn(["cut","stopped","response"],mt.outcome)?"{"+mt.purpose+"} "+mt.outcome+" at ("+sw(mt.target)+")":mt.outcome)})}}},Cm=(h,j,tt)=>{switch(tr(T_.get(),h).orThunk(()=>{const ut=Oo(T_.get());return wo(ut,mt=>h.indexOf(mt)>-1?It.some(T_.get()[mt]):It.none())}).getOr(z1.NORMAL)){case z1.NORMAL:return tt(y2());case z1.LOGGING:{const ut=dL(h,j),mt=tt(ut);return ut.write(),mt}case z1.STOP:return!0}},lE=["alloy/data/Fields","alloy/debugging/Debugging"],fv=()=>{const h=new Error;if(h.stack!==void 0){const j=h.stack.split(`
`);return mn(j,tt=>tt.indexOf("alloy")>0&&!er(lE,st=>tt.indexOf(st)>-1)).getOr(D3)}else return D3},aT={logEventCut:Et,logEventStopped:Et,logNoParent:Et,logEventNoHandlers:Et,logEventResponse:Et,write:Et},N3=(h,j,tt)=>Cm(h,j,tt),y2=Nt(aT),iw=Nt([Jo("menu"),Jo("selectedMenu")]),qv=Nt([Jo("item"),Jo("selectedItem")]);Nt(vs(qv().concat(iw())));const hv=Nt(vs(qv())),e4=__("initSize",[Jo("numColumns"),Jo("numRows")]),fL=()=>Ql("markers",hv()),I_=()=>__("markers",[Jo("backgroundMenu")].concat(iw()).concat(qv())),fx=h=>__("markers",On(h,Jo)),lT=(h,j,tt)=>(fv(),fm(j,j,tt,Yw(st=>Ks.value((...ut)=>st.apply(void 0,ut))))),zl=h=>lT("onHandler",h,xl(Et)),v0=h=>lT("onKeyboardHandler",h,xl(It.none)),b2=h=>lT("onHandler",h,g0()),zC=h=>lT("onKeyboardHandler",h,g0()),qu=(h,j)=>Jl(h,Nt(j)),v2=h=>Jl(h,Jt),hx=Nt(e4);var t4=[hm("contextual",[Qp("fadeInClass"),Qp("fadeOutClass"),Qp("transitionClass"),_y("lazyContext"),zl("onShow"),zl("onShown"),zl("onHide"),zl("onHidden")]),Wu("lazyViewport",()=>({bounds:zp(),optScrollEnv:It.none()})),x_("modes",["top","bottom"],Nr),zl("onDocked"),zl("onUndocked")],n4=Object.freeze({__proto__:null,init:h=>{const j=ls(!1),tt=ls(!0),st=Wl(),ut=ls(h.modes),mt=()=>`docked:  ${j.get()}, visible: ${tt.get()}, modes: ${ut.get().join(",")}`;return O0({isDocked:j.get,setDocked:j.set,getInitialPos:st.get,setInitialPos:st.set,clearInitialPos:st.clear,isVisible:tt.get,setVisible:tt.set,getModes:ut.get,setModes:ut.set,readState:mt})}});const Zu=Fm({fields:t4,name:"docking",active:rw,apis:i0,state:n4}),cE=(h,j,tt)=>Vl(j,h.element)&&!Vl(j,tt),pL=yu([BM(P1(),(h,j)=>{const tt=j.event,st=tt.originator,ut=tt.target;return cE(h,st,ut)?(console.warn(P1()+` did not get interpreted by the desired target. 
Originator: `+sw(st)+`
Target: `+sw(ut)+`
Check the `+P1()+" event handlers"),!1):!0})]);var o4=Object.freeze({__proto__:null,events:pL});const _2=(h,j,tt,st)=>{const ut=h+j;return ut>st?tt:ut<tt?st:ut},Zv=(h,j,tt)=>Math.min(Math.max(h,j),tt),uE=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let px=0;const Wr=h=>{const tt=new Date().getTime(),st=Math.floor(uE()*1e9);return px++,h+"_"+st+px+String(tt)},r4=Nt("alloy-id-"),cT=Nt("data-alloy-id"),s4=r4(),i4=cT(),L3=(h,j)=>{const tt=Wr(s4+h);return F3(j,tt),tt},F3=(h,j)=>{Object.defineProperty(h.dom,i4,{value:j,writable:!0})},BC=h=>{const j=_s(h)?h.dom[i4]:null;return It.from(j)},dE=h=>Wr(h),x2=Jt,uT=h=>{const j=ut=>`The component must be in a context to execute: ${ut}`+(h?`
`+sw(h().element)+" is not in context.":""),tt=ut=>()=>{throw new Error(j(ut))},st=ut=>()=>{console.warn(j(ut))};return{debugInfo:Nt("fake"),triggerEvent:st("triggerEvent"),triggerFocus:st("triggerFocus"),triggerEscape:st("triggerEscape"),broadcast:st("broadcast"),broadcastOn:st("broadcastOn"),broadcastEvent:st("broadcastEvent"),build:tt("build"),buildOrPatch:tt("buildOrPatch"),addToWorld:tt("addToWorld"),removeFromWorld:tt("removeFromWorld"),addToGui:tt("addToGui"),removeFromGui:tt("removeFromGui"),getByUid:tt("getByUid"),getByDom:tt("getByDom"),isConnected:hn}},$C=uT(),dT=Wr("alloy-premade"),Kv=h=>(Object.defineProperty(h.element.dom,dT,{value:h.uid,writable:!0}),Ps(dT,h)),gL=h=>Ms(h.dom,dT),fT=h=>tr(h,dT),hT=h=>C3((j,...tt)=>h(j.getApis(),j,...tt),h),mL=(h,j)=>{const tt=On(j,ut=>hm(ut.name(),[Jo("config"),ko("state",D1)])),st=cp("component.behaviours",vs(tt),h.behaviours).fold(ut=>{throw new Error(sx(ut)+`
Complete spec:
`+JSON.stringify(h,null,2))},Jt);return{list:j,data:vr(st,ut=>{const mt=ut.map(yt=>({config:yt.config,state:yt.state.init(yt.config)}));return Nt(mt)})}},yL=h=>h.list,a4=h=>h.data,fE=(h,j)=>{const tt={};return sr(h,(st,ut)=>{sr(st,(mt,yt)=>{const kt=tr(tt,yt).getOr([]);tt[yt]=kt.concat([j(ut,mt)])})}),tt},l4=(h,j,tt,st)=>{const ut={...j};_o(tt,Gt=>{ut[Gt.name()]=Gt.exhibit(h,st)});const mt=fE(ut,(Gt,Wt)=>({name:Gt,modification:Wt})),yt=Gt=>Ho(Gt,(Wt,sn)=>({...sn.modification,...Wt}),{}),kt=Ho(mt.classes,(Gt,Wt)=>Wt.modification.concat(Gt),[]),Ot=yt(mt.attributes),zt=yt(mt.styles);return Y0({classes:kt,attributes:Ot,styles:zt})},z3=(h,j,tt,st)=>{try{const ut=Tn(tt,(mt,yt)=>{const kt=mt[j],Ot=yt[j],zt=st.indexOf(kt),Gt=st.indexOf(Ot);if(zt===-1)throw new Error("The ordering for "+h+" does not have an entry for "+kt+`.
Order specified: `+JSON.stringify(st,null,2));if(Gt===-1)throw new Error("The ordering for "+h+" does not have an entry for "+Ot+`.
Order specified: `+JSON.stringify(st,null,2));return zt<Gt?-1:Gt<zt?1:0});return Ks.value(ut)}catch(ut){return Ks.error([ut])}},bL=(h,j)=>({handler:h,purpose:j}),hE=(h,j)=>({cHandler:h,purpose:j}),GC=(h,j)=>hE(Pn.apply(void 0,[h.handler].concat(j)),h.purpose),aw=h=>h.cHandler,pT=(h,j)=>({name:h,handler:j}),B3=(h,j)=>{const tt={};return _o(h,st=>{tt[st.name()]=st.handlers(j)}),tt},gT=(h,j,tt)=>{const st={...tt,...B3(j,h)};return fE(st,pT)},$3=(h,j,tt,st)=>{const ut=gT(h,tt,st);return Cy(ut,j)},G3=h=>{const j=n2(h);return(tt,st,...ut)=>{const mt=[tt,st].concat(ut);j.abort.apply(void 0,mt)?st.stop():j.can.apply(void 0,mt)&&j.run.apply(void 0,mt)}},j3=(h,j)=>Ks.error(["The event ("+h+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(On(j,tt=>tt.name),null,2)]),c4=(h,j,tt)=>{const st=j[tt];return st?z3("Event: "+tt,"name",h,st).map(ut=>{const mt=On(ut,yt=>yt.handler);return _C(mt)}):j3(tt,h)},Cy=(h,j)=>{const tt=_l(h,(st,ut)=>(st.length===1?Ks.value(st[0].handler):c4(st,j,ut)).map(yt=>{const kt=G3(yt),Ot=st.length>1?lo(j[ut],zt=>er(st,Gt=>Gt.name===zt)).join(" > "):st[0].name;return Ps(ut,bL(kt,Ot))}));return _h(tt,{})},w2="alloy.base.behaviour",u4=vs([fm("dom","dom",g0(),vs([Jo("tag"),ko("styles",{}),ko("classes",[]),ko("attributes",{}),Kl("value"),Kl("innerHtml")])),Jo("components"),Jo("uid"),ko("events",{}),ko("apis",{}),fm("eventOrder","eventOrder",Dt({[e0()]:["disabling",w2,"toggling","typeaheadevents"],[P1()]:[w2,"focusing","keying"],[ZA()]:[w2,"disabling","toggling","representing","tooltipping"],[M1()]:[w2,"representing","streaming","invalidating"],[Gy()]:[w2,"representing","item-events","toolbar-button-events","tooltipping"],[gp()]:["focusing",w2,"item-type-events"],[uv()]:["focusing",w2,"item-type-events"],[Z0()]:["item-type-events","tooltipping"],[O1()]:["receiving","reflecting","tooltipping"]}),zy()),Kl("domModification")]),lw=h=>cp("custom.definition",u4,h),C2=h=>({...h.dom,uid:h.uid,domChildren:On(h.components,j=>j.element)}),U3=h=>h.domModification.fold(()=>Y0({}),Y0),Uo=h=>h.events,Yv=h=>h.dom.value,k2=(h,j)=>{if(j===void 0)throw new Error("Value.set was undefined");h.dom.value=j},vL=(h,j,tt)=>Ap(h,j).map(ut=>{if(tt.exists(yt=>!Vl(yt,ut))){const yt=tt.map(Xl).getOr("span"),kt=ro.fromTag(yt);return rv(ut,kt),kt}else return ut}),pE=(h,j,tt)=>{tt.fold(()=>Km(h,j),st=>{Vl(st,j)||(rv(st,j),h0(st))})},pv=(h,j,tt)=>{const st=On(j,tt),ut=Im(h);return _o(ut.slice(st.length),h0),st},jC=(h,j,tt,st)=>{const ut=Ap(h,j),mt=st(tt,ut),yt=vL(h,j,ut);return pE(h,mt.element,yt),mt},d4=(h,j,tt)=>pv(h,j,(st,ut)=>jC(h,ut,st,tt)),f4=(h,j)=>pv(h,j,(tt,st)=>{const ut=Ap(h,st);return pE(h,tt,ut),tt}),_0=(h,j)=>{const tt=Oo(h),st=Oo(j),ut=zn(st,tt),mt=Ss(h,(yt,kt)=>!Ms(j,kt)||yt!==j[kt]).t;return{toRemove:ut,toSet:mt}},mT=(h,j)=>{const{class:tt,style:st,...ut}=vn(j),{toSet:mt,toRemove:yt}=_0(h.attributes,ut),kt=()=>{_o(yt,yo=>Kt(j,yo)),$l(j,mt)},Ot=Fp(j),{toSet:zt,toRemove:Gt}=_0(h.styles,Ot),Wt=()=>{_o(Gt,yo=>Bs(j,yo)),Zs(j,zt)},sn=HM(j),cn=zn(sn,h.classes),xn=zn(h.classes,sn),Mn=()=>{IC(j,xn),N1(j,cn)},vo=yo=>{wy(j,yo)},jn=()=>{const yo=h.domChildren;f4(j,yo)},po=()=>{const yo=j,zo=h.value.getOrUndefined();zo!==Yv(yo)&&k2(yo,zo??"")};return kt(),Mn(),Wt(),h.innerHtml.fold(jn,vo),po(),j},h4=h=>{const j=ro.fromTag(h.tag);$l(j,h.attributes),IC(j,h.classes),Zs(j,h.styles),h.innerHtml.each(st=>wy(j,st));const tt=h.domChildren;return f_(j,tt),h.value.each(st=>{k2(j,st)}),j},_L=(h,j)=>{try{const tt=mT(h,j);return It.some(tt)}catch{return It.none()}},g4=h=>h.innerHtml.isSome()&&h.domChildren.length>0,xL=(h,j)=>{const tt=ut=>Xl(ut)===h.tag&&!g4(h)&&!gL(ut),st=j.filter(tt).bind(ut=>_L(h,ut)).getOrThunk(()=>h4(h));return F3(st,h.uid),st},m4=h=>{const j=tr(h,"behaviours").getOr({});return rn(Oo(j),tt=>{const st=j[tt];return wt(st)?[st.me]:[]})},wL=(h,j)=>mL(h,j),CL=h=>{const j=m4(h);return wL(h,j)},y4=(h,j,tt)=>{const st=C2(h),ut=U3(h),mt={"alloy.base.modification":ut},yt=j.length>0?l4(tt,mt,j,st):ut;return EC(st,yt)},UC=(h,j,tt)=>{const st={"alloy.base.behaviour":Uo(h)};return $3(tt,h.eventOrder,j,st).getOrDie()},kL=(h,j)=>{const tt=()=>yo,st=ls($C),ut=dr(lw(h)),mt=CL(h),yt=yL(mt),kt=a4(mt),Ot=y4(ut,yt,kt),zt=xL(Ot,j),Gt=UC(ut,yt,kt),Wt=ls(ut.components),sn=zo=>{st.set(zo)},cn=()=>{st.set(uT(tt))},xn=()=>{const zo=Im(zt),$o=rn(zo,Cr=>st.get().getByDom(Cr).fold(()=>[],Hn));Wt.set($o)},Mn=zo=>{const $o=kt;return(Tt($o[zo.name()])?$o[zo.name()]:()=>{throw new Error("Could not find "+zo.name()+" in "+JSON.stringify(h,null,2))})()},vo=zo=>Tt(kt[zo.name()]),jn=()=>ut.apis,po=zo=>kt[zo]().map($o=>$o.state.readState()).getOr("not enabled"),yo={uid:h.uid,getSystem:st.get,config:Mn,hasConfigured:vo,spec:h,readState:po,getApis:jn,connect:sn,disconnect:cn,element:zt,syncComponents:xn,components:Wt.get,events:Gt};return yo},b4=(h,j)=>{const tt=tr(h,"components").getOr([]);return j.fold(()=>On(tt,km),st=>On(tt,(ut,mt)=>V3(ut,Ap(st,mt))))},SL=(h,j)=>{const{events:tt,...st}=x2(h),ut=b4(st,j),mt={...st,events:{...o4,...tt},components:ut};return Ks.value(kL(mt,j))},mp=h=>{const j=ro.fromText(h);return H3({element:j})},H3=h=>{const j=y0("external.component",cy([Jo("element"),Kl("uid")]),h),tt=ls(uT()),st=kt=>{tt.set(kt)},ut=()=>{tt.set(uT(()=>yt))},mt=j.uid.getOrThunk(()=>dE("external"));F3(j.element,mt);const yt={uid:mt,getSystem:tt.get,config:It.none,hasConfigured:hn,connect:st,disconnect:ut,getApis:()=>({}),element:j.element,spec:h,readState:Nt("No state"),syncComponents:Et,components:Nt([]),events:{}};return Kv(yt)},v4=dE,_4=h=>Ms(h,"uid"),V3=(h,j)=>fT(h).getOrThunk(()=>{const tt=_4(h)?h:{uid:v4(""),...h};return SL(tt,j).getOrDie()}),km=h=>V3(h,It.none()),Uy=Kv;var x4=(h,j,tt,st,ut)=>h(tt,st)?It.some(tt):Tt(ut)&&ut(tt)?It.none():j(tt,st,ut);const W3=(h,j,tt)=>{let st=h.dom;const ut=Tt(tt)?tt:hn;for(;st.parentNode;){st=st.parentNode;const mt=ro.fromDom(st);if(j(mt))return It.some(mt);if(ut(mt))break}return It.none()},q3=(h,j,tt)=>x4((ut,mt)=>mt(ut),W3,h,j,tt),EL=(h,j)=>{const tt=h.dom;return tt.parentNode?yT(ro.fromDom(tt.parentNode),st=>!Vl(h,st)&&j(st)):It.none()},yT=(h,j)=>{const tt=ut=>j(ro.fromDom(ut));return mn(h.dom.childNodes,tt).map(ro.fromDom)},w4=(h,j)=>{const tt=st=>{for(let ut=0;ut<st.childNodes.length;ut++){const mt=ro.fromDom(st.childNodes[ut]);if(j(mt))return It.some(mt);const yt=tt(st.childNodes[ut]);if(yt.isSome())return yt}return It.none()};return tt(h.dom)},gE=(h,j,tt)=>q3(h,j,tt).isSome(),C4=h=>Vm(h),pm=(h,j,tt)=>W3(h,st=>dp(st,j),tt),AL=(h,j)=>EL(h,tt=>dp(tt,j)),gv=(h,j)=>yT(h,tt=>dp(tt,j)),np=(h,j)=>Vm(j,h),R_=(h,j,tt)=>x4((ut,mt)=>dp(ut,mt),pm,h,j,tt),HC="aria-controls",Z3=h=>q3(h,tt=>{if(!_s(tt))return!1;const st=Kr(tt,"id");return st!==void 0&&st.indexOf(HC)>-1}).bind(tt=>{const st=Kr(tt,"id"),ut=hp(tt);return np(ut,`[${HC}="${st}"]`)}),mE=()=>{const h=Wr(HC);return{id:h,link:st=>{Vo(st,HC,h)},unlink:st=>{Kt(st,HC)}}},k4=(h,j)=>Z3(j).exists(tt=>cw(h,tt)),cw=(h,j)=>gE(j,tt=>Vl(tt,h.element),hn)||k4(h,j),a0=(h,j,tt,st,ut,mt,yt,kt=!1)=>({x:h,y:j,bubble:tt,direction:st,placement:ut,restriction:mt,label:`${yt}-${ut}`,alwaysFit:kt}),M_=tn.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),S4=(h,j,tt,st,ut,mt,yt,kt,Ot)=>h.fold(j,tt,st,ut,mt,yt,kt,Ot),TL=(h,j,tt,st)=>h.fold(j,j,st,st,j,st,tt,tt),K3=(h,j,tt,st)=>h.fold(j,st,j,st,tt,tt,j,st),bT=M_.southeast,Y3=M_.southwest,X3=M_.northeast,vT=M_.northwest,qr=M_.south,yE=M_.north,J3=M_.east,E4=M_.west,IL=(h,j)=>{switch(j){case 1:return h.x;case 0:return h.x+h.width;case 2:return h.y;case 3:return h.y+h.height}},l0=(h,j)=>So(["left","right","top","bottom"],tt=>tr(j,tt).map(st=>IL(h,st))),T4=(h,j,tt)=>{const st=(Ot,zt)=>j[Ot].map(Gt=>{const Wt=Ot==="top"||Ot==="bottom",sn=Wt?tt.top:tt.left,xn=(Ot==="left"||Ot==="top"?Math.max:Math.min)(Gt,zt)+sn;return Wt?Zv(xn,h.y,h.bottom):Zv(xn,h.x,h.right)}).getOr(zt),ut=st("left",h.x),mt=st("top",h.y),yt=st("right",h.right),kt=st("bottom",h.bottom);return Qu(ut,mt,yt-ut,kt-mt)},uw="layout",I4=h=>h.x,Q3=(h,j)=>h.x+h.width/2-j.width/2,R4=(h,j)=>h.x+h.width-j.width,c0=(h,j)=>h.y-j.height,dw=h=>h.y+h.height,e5=(h,j)=>h.y+h.height/2-j.height/2,S2=h=>h.x+h.width,RL=(h,j)=>h.x-j.width,gm=(h,j,tt)=>a0(I4(h),dw(h),tt.southeast(),bT(),"southeast",l0(h,{left:1,top:3}),uw),mm=(h,j,tt)=>a0(R4(h,j),dw(h),tt.southwest(),Y3(),"southwest",l0(h,{right:0,top:3}),uw),n0=(h,j,tt)=>a0(I4(h),c0(h,j),tt.northeast(),X3(),"northeast",l0(h,{left:1,bottom:2}),uw),ym=(h,j,tt)=>a0(R4(h,j),c0(h,j),tt.northwest(),vT(),"northwest",l0(h,{right:0,bottom:2}),uw),hu=(h,j,tt)=>a0(Q3(h,j),c0(h,j),tt.north(),yE(),"north",l0(h,{bottom:2}),uw),tm=(h,j,tt)=>a0(Q3(h,j),dw(h),tt.south(),qr(),"south",l0(h,{top:3}),uw),_T=(h,j,tt)=>a0(S2(h),e5(h,j),tt.east(),J3(),"east",l0(h,{left:0}),uw),t5=(h,j,tt)=>a0(RL(h,j),e5(h,j),tt.west(),E4(),"west",l0(h,{right:1}),uw),n5=()=>[gm,mm,n0,ym,tm,hu,_T,t5],o5=()=>[mm,gm,ym,n0,tm,hu,_T,t5],M4=()=>[n0,ym,gm,mm,hu,tm],P4=()=>[ym,n0,mm,gm,hu,tm],bE=()=>[gm,mm,n0,ym,tm,hu],xT=()=>[mm,gm,ym,n0,tm,hu],vE=(h,j)=>j.universal?h:lo(h,tt=>Wn(j.channels,tt));var oB=Object.freeze({__proto__:null,events:h=>yu([Qo(O1(),(j,tt)=>{const st=h.channels,ut=Oo(st),mt=tt,yt=vE(ut,mt);_o(yt,kt=>{const Ot=st[kt],zt=Ot.schema,Gt=y0("channel["+kt+`] data
Receiver: `+sw(j.element),zt,mt.data);Ot.onReceive(j,Gt)})})])}),E2=[Ql("channels",lv(Ks.value,cy([b2("onReceive"),ko("schema",zy())])))];const ky=Fm({fields:E2,name:"receiving",active:oB});var PL=Object.freeze({__proto__:null,exhibit:(h,j)=>Y0({classes:[],styles:j.useFixed()?{}:{position:"relative"}})});const mv=(h,j=!1)=>h.dom.focus({preventScroll:j}),VC=h=>h.dom.blur(),T2=h=>{const j=hp(h).dom;return h.dom===j.activeElement},P_=(h=yy())=>It.from(h.dom.activeElement).map(ro.fromDom),N0=h=>P_(hp(h)).filter(j=>h.dom.contains(j.dom)),r5=(h,j)=>{const tt=hp(j),st=P_(tt).bind(mt=>{const yt=kt=>Vl(mt,kt);return yt(j)?It.some(j):w4(j,yt)}),ut=h(j);return st.each(mt=>{P_(tt).filter(yt=>Vl(yt,mt)).fold(()=>{mv(mt)},Et)}),ut},fw=tn.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),D4=(h,j,tt,st,ut,mt)=>{const yt=j.rect,kt=yt.x-tt,Ot=yt.y-st,zt=yt.width,Gt=yt.height,Wt=ut-(kt+zt),sn=mt-(Ot+Gt),cn=It.some(kt),xn=It.some(Ot),Mn=It.some(Wt),vo=It.some(sn),jn=It.none();return S4(j.direction,()=>Vv(h,cn,xn,jn,jn),()=>Vv(h,jn,xn,Mn,jn),()=>Vv(h,cn,jn,jn,vo),()=>Vv(h,jn,jn,Mn,vo),()=>Vv(h,cn,xn,jn,jn),()=>Vv(h,cn,jn,jn,vo),()=>Vv(h,cn,xn,jn,jn),()=>Vv(h,jn,xn,Mn,jn))},wT=(h,j)=>h.fold(()=>{const tt=j.rect;return Vv("absolute",It.some(tt.x),It.some(tt.y),It.none(),It.none())},(tt,st,ut,mt)=>D4("absolute",j,tt,st,ut,mt),(tt,st,ut,mt)=>D4("fixed",j,tt,st,ut,mt)),s5=(h,j)=>{const tt=Pn(m_,j),st=h.fold(tt,tt,()=>{const yt=Ym();return m_(j).translate(-yt.left,-yt.top)}),ut=Sn(j),mt=V0(j);return Qu(st.left,st.top,ut,mt)},_E=(h,j)=>j.fold(()=>h.fold(zp,zp,Qu),tt=>h.fold(Nt(tt),Nt(tt),()=>{const st=CT(h,tt.x,tt.y);return Qu(st.left,st.top,tt.width,tt.height)})),CT=(h,j,tt)=>{const st=Hu(j,tt),ut=()=>{const mt=Ym();return st.translate(-mt.left,-mt.top)};return h.fold(Nt(st),Nt(st),ut)},N4=(h,j,tt,st)=>h.fold(j,tt,st);fw.none;const L4=fw.relative,F4=fw.fixed,xE=(h,j)=>({anchorBox:h,origin:j}),I2=(h,j)=>xE(h,j),wE="data-alloy-placement",OL=(h,j)=>{Vo(h,wE,j)},i5=h=>Os(h,wE),DL=h=>Kt(h,wE),kT=tn.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),NL=(h,j)=>{const{x:tt,y:st,right:ut,bottom:mt}=j,{x:yt,y:kt,right:Ot,bottom:zt,width:Gt,height:Wt}=h,sn=yt>=tt&&yt<=ut,cn=kt>=st&&kt<=mt,xn=sn&&cn,Mn=Ot<=ut&&Ot>=tt,vo=zt<=mt&&zt>=st,jn=Mn&&vo,po=Math.min(Gt,yt>=tt?ut-yt:Ot-tt),yo=Math.min(Wt,kt>=st?mt-kt:zt-st);return{originInBounds:xn,sizeInBounds:jn,visibleW:po,visibleH:yo}},z4=(h,j)=>{const{x:tt,y:st,right:ut,bottom:mt}=j,{x:yt,y:kt,width:Ot,height:zt}=h,Gt=Math.max(tt,ut-Ot),Wt=Math.max(st,mt-zt),sn=Zv(yt,tt,Gt),cn=Zv(kt,st,Wt),xn=Math.min(sn+Ot,ut)-sn,Mn=Math.min(cn+zt,mt)-cn;return Qu(sn,cn,xn,Mn)},LL=(h,j,tt)=>{const st=Nt(j.bottom-tt.y),ut=Nt(tt.bottom-j.y),mt=TL(h,ut,ut,st),yt=Nt(j.right-tt.x),kt=Nt(tt.right-j.x);return{maxWidth:K3(h,kt,kt,yt),maxHeight:mt}},B4=(h,j,tt,st)=>{const ut=h.bubble,mt=ut.offset,yt=T4(st,h.restriction,mt),kt=h.x+mt.left,Ot=h.y+mt.top,zt=Qu(kt,Ot,j,tt),{originInBounds:Gt,sizeInBounds:Wt,visibleW:sn,visibleH:cn}=NL(zt,yt),xn=Gt&&Wt,Mn=xn?zt:z4(zt,yt),vo=Mn.width>0&&Mn.height>0,{maxWidth:jn,maxHeight:po}=LL(h.direction,Mn,st),yo={rect:Mn,maxHeight:po,maxWidth:jn,direction:h.direction,placement:h.placement,classes:{on:ut.classesOn,off:ut.classesOff},layout:h.label,testY:Ot};return xn||h.alwaysFit?kT.fit(yo):kT.nofit(yo,sn,cn,vo)},CE=(h,j,tt,st,ut,mt)=>{const yt=st.width,kt=st.height,Ot=(Gt,Wt,sn,cn,xn)=>{const Mn=Gt(tt,st,ut,h,mt),vo=B4(Mn,yt,kt,mt);return vo.fold(Nt(vo),(jn,po,yo,zo)=>(xn===zo?yo>cn||po>sn:!xn&&zo)?vo:kT.nofit(Wt,sn,cn,xn))};return mo(j,(Gt,Wt)=>{const sn=Pn(Ot,Wt);return Gt.fold(Nt(Gt),sn)},kT.nofit({rect:tt,maxHeight:st.height,maxWidth:st.width,direction:bT(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:tt.y},-1,-1,!1)).fold(Jt,Jt)},$4=fn,J0=(h,j,tt)=>d_(h,j,$4,tt),a5=(h,j,tt)=>Dm(h,j,$4,tt),G4=cm,l5=["top","bottom","right","left"],kE="data-alloy-transition-timer",FL=(h,j)=>tT(h,j.classes),zL=(h,j,tt)=>tt.exists(st=>{const ut=h.mode;return ut==="all"?!0:st[ut]!==j[ut]}),BL=(h,j)=>{const tt=st=>parseFloat(st).toFixed(3);return Zr(j,(st,ut)=>{const mt=h[ut].map(tt),yt=st.map(tt);return!Yl(mt,yt)}).isSome()},ST=h=>{const j=mt=>{const kt=ru(h,mt).split(/\s*,\s*/);return lo(kt,Un)},tt=mt=>{if(_e(mt)&&/^[\d.]+/.test(mt)){const yt=parseFloat(mt);return ju(mt,"ms")?yt:yt*1e3}else return 0},st=j("transition-delay"),ut=j("transition-duration");return mo(ut,(mt,yt,kt)=>{const Ot=tt(st[kt])+tt(yt);return Math.max(mt,Ot)},0)},j4=(h,j)=>{const tt=W0(),st=W0();let ut;const mt=zt=>{var Gt;const Wt=(Gt=zt.raw.pseudoElement)!==null&&Gt!==void 0?Gt:"";return Vl(zt.target,h)&&Bn(Wt)&&Wn(l5,zt.raw.propertyName)},yt=zt=>{if(xt(zt)||mt(zt)){tt.clear(),st.clear();const Gt=zt==null?void 0:zt.raw.type;(xt(Gt)||Gt===JS())&&(clearTimeout(ut),Kt(h,kE),N1(h,j.classes))}},kt=J0(h,Kx(),zt=>{mt(zt)&&(kt.unbind(),tt.set(J0(h,JS(),yt)),st.set(J0(h,eL(),yt)))}),Ot=ST(h);requestAnimationFrame(()=>{ut=setTimeout(yt,Ot+17),Vo(h,kE,ut)})},c5=(h,j)=>{IC(h,j.classes),Os(h,kE).each(tt=>{clearTimeout(parseInt(tt,10)),Kt(h,kE)}),j4(h,j)},u5=(h,j,tt,st,ut,mt)=>{const yt=zL(st,ut,mt);if(yt||FL(h,st)){Xo(h,"position",tt.position);const kt=s5(j,h),Ot=wT(j,{...ut,rect:kt}),zt=So(l5,Gt=>Ot[Gt]);BL(tt,zt)&&(Zl(h,zt),yt&&c5(h,st),qm(h))}else N1(h,st.classes)},SE=h=>({width:Sn(h),height:V0(h)}),d5=(h,j,tt,st)=>{Bs(j,"max-height"),Bs(j,"max-width");const ut=SE(j);return CE(j,st.preference,h,ut,tt,st.bounds)},U4=(h,j)=>{const tt=j.classes;N1(h,tt.off),IC(h,tt.on)},H4=(h,j,tt)=>{const st=tt.maxHeightFunction;st(h,j.maxHeight)},V4=(h,j,tt)=>{const st=tt.maxWidthFunction;st(h,j.maxWidth)},$L=(h,j,tt)=>{const st=wT(tt.origin,j);tt.transition.each(ut=>{u5(h,tt.origin,st,ut,j,tt.lastPlacement)}),D0(h,st)},W4=(h,j)=>{OL(h,j.placement)},f5=(h,j)=>{zx(h,Math.floor(j))},q4=Nt((h,j)=>{f5(h,j),Zs(h,{"overflow-x":"hidden","overflow-y":"auto"})}),hw=Nt((h,j)=>{f5(h,j)}),Z4=(h,j,tt)=>h[j]===void 0?tt:h[j],GL=(h,j,tt,st,ut,mt,yt,kt)=>{const Ot=Z4(yt,"maxHeightFunction",q4()),zt=Z4(yt,"maxWidthFunction",Et),Gt=h.anchorBox,Wt=h.origin,sn={bounds:_E(Wt,mt),origin:Wt,preference:st,maxHeightFunction:Ot,maxWidthFunction:zt,lastPlacement:ut,transition:kt};return jL(Gt,j,tt,sn)},jL=(h,j,tt,st)=>{const ut=d5(h,j,tt,st);return $L(j,ut,st),W4(j,ut),U4(j,ut),H4(j,ut,st),V4(j,ut,st),{layout:ut.layout,placement:ut.placement}},ET=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Xv=(h,j,tt,st=1)=>{const ut=h*st,mt=j*st,yt=Ot=>tr(tt,Ot).getOr([]),kt=(Ot,zt,Gt)=>{const Wt=zn(ET,Gt);return{offset:Hu(Ot,zt),classesOn:rn(Gt,yt),classesOff:rn(Wt,yt)}};return{southeast:()=>kt(-h,j,["top","alignLeft"]),southwest:()=>kt(h,j,["top","alignRight"]),south:()=>kt(-h/2,j,["top","alignCentre"]),northeast:()=>kt(-h,-j,["bottom","alignLeft"]),northwest:()=>kt(h,-j,["bottom","alignRight"]),north:()=>kt(-h/2,-j,["bottom","alignCentre"]),east:()=>kt(h,-j/2,["valignCentre","left"]),west:()=>kt(-h,-j/2,["valignCentre","right"]),insetNortheast:()=>kt(ut,mt,["top","alignLeft","inset"]),insetNorthwest:()=>kt(-ut,mt,["top","alignRight","inset"]),insetNorth:()=>kt(-ut/2,mt,["top","alignCentre","inset"]),insetSoutheast:()=>kt(ut,-mt,["bottom","alignLeft","inset"]),insetSouthwest:()=>kt(-ut,-mt,["bottom","alignRight","inset"]),insetSouth:()=>kt(-ut/2,-mt,["bottom","alignCentre","inset"]),insetEast:()=>kt(-ut,-mt/2,["valignCentre","right","inset"]),insetWest:()=>kt(ut,-mt/2,["valignCentre","left","inset"])}},AT=()=>Xv(0,0,{}),TT=Jt,h5=(h,j)=>tt=>K4(tt)==="rtl"?j:h,K4=h=>ru(h,"direction")==="rtl"?"rtl":"ltr";var nm;(function(h){h.TopToBottom="toptobottom",h.BottomToTop="bottomtotop"})(nm||(nm={}));const Y4="data-alloy-vertical-dir",WC=h=>gE(h,j=>_s(j)&&Kr(j,"data-alloy-vertical-dir")===nm.BottomToTop),pw=()=>hm("layouts",[Jo("onLtr"),Jo("onRtl"),Kl("onBottomLtr"),Kl("onBottomRtl")]),IT=(h,j,tt,st,ut,mt,yt)=>{const kt=yt.map(WC).getOr(!1),Ot=j.layouts.map(cn=>cn.onLtr(h)),zt=j.layouts.map(cn=>cn.onRtl(h)),Gt=kt?j.layouts.bind(cn=>cn.onBottomLtr.map(xn=>xn(h))).or(Ot).getOr(ut):Ot.getOr(tt),Wt=kt?j.layouts.bind(cn=>cn.onBottomRtl.map(xn=>xn(h))).or(zt).getOr(mt):zt.getOr(st);return h5(Gt,Wt)(h)},X4=(h,j,tt)=>{const st=j.hotspot,ut=s5(tt,st.element),mt=IT(h.element,j,bE(),xT(),M4(),P4(),It.some(j.hotspot.element));return It.some(TT({anchorBox:ut,bubble:j.bubble.getOr(AT()),overrides:j.overrides,layouts:mt}))};var UL=[Jo("hotspot"),Kl("bubble"),ko("overrides",{}),pw(),qu("placement",X4)];const HL=(h,j,tt)=>{const st=CT(tt,j.x,j.y),ut=Qu(st.left,st.top,j.width,j.height),mt=IT(h.element,j,n5(),o5(),n5(),o5(),It.none());return It.some(TT({anchorBox:ut,bubble:j.bubble,overrides:j.overrides,layouts:mt}))};var J4=[Jo("x"),Jo("y"),ko("height",0),ko("width",0),ko("bubble",AT()),ko("overrides",{}),pw(),qu("placement",HL)];const EE=tn.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),p5=h=>h.fold(Jt,(j,tt,st)=>j.translate(-tt,-st)),VL=h=>h.fold(Jt,Jt),qC=h=>mo(h,(j,tt)=>j.translate(tt.left,tt.top),Hu(0,0)),Q4=h=>{const j=On(h,p5);return qC(j)},eP=h=>{const j=On(h,VL);return qC(j)},tP=EE.screen,g5=EE.absolute,RT=(h,j,tt)=>{const st=im(tt.root).dom,ut=mt=>{const yt=Np(mt),kt=Np(h.element);return Vl(yt,kt)};return It.from(st.frameElement).map(ro.fromDom).filter(ut).map(Fu)},nP=(h,j,tt)=>{const st=Np(h.element),ut=Ym(st),mt=RT(h,j,tt).getOr(ut);return g5(mt,ut.left,ut.top)},gw=(h,j,tt,st)=>{const ut=tP(Hu(h,j));return It.some(S1(ut,tt,st))},WL=(h,j,tt,st,ut)=>h.map(mt=>{const yt=[j,mt.point],kt=N4(st,()=>eP(yt),()=>eP(yt),()=>Q4(yt)),Ot=Q_(kt.left,kt.top,mt.width,mt.height),zt=tt.showAbove?M4():bE(),Gt=tt.showAbove?P4():xT(),Wt=IT(ut,tt,zt,Gt,zt,Gt,It.none());return TT({anchorBox:Ot,bubble:tt.bubble.getOr(AT()),overrides:tt.overrides,layouts:Wt})}),oP=(h,j,tt)=>{const st=nP(h,tt,j);return j.node.filter(Fn).bind(ut=>{const mt=ut.dom.getBoundingClientRect(),yt=gw(mt.left,mt.top,mt.width,mt.height),kt=j.node.getOr(h.element);return WL(yt,st,j,tt,kt)})};var rP=[Jo("node"),Jo("root"),Kl("bubble"),pw(),ko("overrides",{}),ko("showAbove",!1),qu("placement",oP)];const MT="\uFEFF",qL="",PT={create:(h,j,tt,st)=>({start:h,soffset:j,finish:tt,foffset:st})},AE=tn.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),sP=(h,j,tt,st)=>h.fold(j,tt,st),ZC=h=>h.fold(Jt,Jt,Jt),KC=AE.before,ZL=AE.on,iP=AE.after,KL={before:KC,on:ZL,after:iP,cata:sP,getStart:ZC},M2=tn.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),YC=h=>M2.exact(h.start,h.soffset,h.finish,h.foffset),m5=h=>h.match({domRange:j=>ro.fromDom(j.startContainer),relative:(j,tt)=>KL.getStart(j),exact:(j,tt,st,ut)=>j}),y5=M2.domRange,YL=M2.relative,b5=M2.exact,aP=h=>{const j=m5(h);return im(j)},lP=PT.create,XC={domRange:y5,relative:YL,exact:b5,exactFromRange:YC,getWin:aP,range:lP},cP=(h,j)=>{j.fold(tt=>{h.setStartBefore(tt.dom)},(tt,st)=>{h.setStart(tt.dom,st)},tt=>{h.setStartAfter(tt.dom)})},OT=(h,j)=>{j.fold(tt=>{h.setEndBefore(tt.dom)},(tt,st)=>{h.setEnd(tt.dom,st)},tt=>{h.setEndAfter(tt.dom)})},mw=(h,j,tt)=>{const st=h.document.createRange();return cP(st,j),OT(st,tt),st},gx=(h,j,tt,st,ut)=>{const mt=h.document.createRange();return mt.setStart(j.dom,tt),mt.setEnd(st.dom,ut),mt},TE=h=>({left:h.left,top:h.top,right:h.right,bottom:h.bottom,width:h.width,height:h.height}),IE=h=>{const j=h.getClientRects(),tt=j.length>0?j[0]:h.getBoundingClientRect();return tt.width>0||tt.height>0?It.some(tt).map(TE):It.none()},XL=h=>{const j=h.getBoundingClientRect();return j.width>0||j.height>0?It.some(j).map(TE):It.none()},Sy=tn.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),B1=(h,j,tt)=>j(ro.fromDom(tt.startContainer),tt.startOffset,ro.fromDom(tt.endContainer),tt.endOffset),v5=(h,j)=>j.match({domRange:tt=>({ltr:Nt(tt),rtl:It.none}),relative:(tt,st)=>({ltr:qo(()=>mw(h,tt,st)),rtl:qo(()=>It.some(mw(h,st,tt)))}),exact:(tt,st,ut,mt)=>({ltr:qo(()=>gx(h,tt,st,ut,mt)),rtl:qo(()=>It.some(gx(h,ut,mt,tt,st)))})}),JL=(h,j)=>{const tt=j.ltr();return tt.collapsed?j.rtl().filter(ut=>ut.collapsed===!1).map(ut=>Sy.rtl(ro.fromDom(ut.endContainer),ut.endOffset,ro.fromDom(ut.startContainer),ut.startOffset)).getOrThunk(()=>B1(h,Sy.ltr,tt)):B1(h,Sy.ltr,tt)},rB=(h,j)=>{const tt=v5(h,j);return JL(h,tt)},yw=(h,j)=>rB(h,j).match({ltr:(st,ut,mt,yt)=>{const kt=h.document.createRange();return kt.setStart(st.dom,ut),kt.setEnd(mt.dom,yt),kt},rtl:(st,ut,mt,yt)=>{const kt=h.document.createRange();return kt.setStart(mt.dom,yt),kt.setEnd(st.dom,ut),kt}});Sy.ltr,Sy.rtl;const JC=(h,j,tt)=>lo(py(h,tt),j),o0=(h,j)=>g1(j,h),_5=(h,j,tt,st)=>{const mt=Np(h).dom.createRange();return mt.setStart(h.dom,j),mt.setEnd(tt.dom,st),mt},DT=(h,j,tt,st)=>{const ut=_5(h,j,tt,st),mt=Vl(h,tt)&&j===st;return ut.collapsed&&!mt},P2=h=>It.from(h.getSelection()),RE=h=>{if(h.rangeCount>0){const j=h.getRangeAt(0),tt=h.getRangeAt(h.rangeCount-1);return It.some(PT.create(ro.fromDom(j.startContainer),j.startOffset,ro.fromDom(tt.endContainer),tt.endOffset))}else return It.none()},QL=h=>{if(h.anchorNode===null||h.focusNode===null)return RE(h);{const j=ro.fromDom(h.anchorNode),tt=ro.fromDom(h.focusNode);return DT(j,h.anchorOffset,tt,h.focusOffset)?It.some(PT.create(j,h.anchorOffset,tt,h.focusOffset)):RE(h)}},x5=h=>P2(h).filter(j=>j.rangeCount>0).bind(QL),ME=(h,j)=>{const tt=yw(h,j);return IE(tt)},r0=(h,j)=>{const tt=yw(h,j);return XL(tt)},yv=((h,j)=>{const tt=mt=>{if(!h(mt))throw new Error("Can only get "+j+" value of a "+j+" node");return st(mt).getOr("")},st=mt=>h(mt)?It.from(mt.dom.nodeValue):It.none();return{get:tt,getOption:st,set:(mt,yt)=>{if(!h(mt))throw new Error("Can only set raw "+j+" value of a "+j+" node");mt.dom.nodeValue=yt}}})(Al,"text"),C5=h=>yv.get(h),QC=(h,j)=>({element:h,offset:j}),_k=(h,j)=>{const tt=Im(h);if(tt.length===0)return QC(h,j);if(j<tt.length)return QC(tt[j],0);{const st=tt[tt.length-1],ut=Al(st)?C5(st).length:Im(st).length;return QC(st,ut)}},k5=(h,j)=>Al(h)?QC(h,j):_k(h,j),mx=h=>h.foffset!==void 0,S5=(h,j)=>j.getSelection.getOrThunk(()=>()=>x5(h))().map(st=>{if(mx(st)){const ut=k5(st.start,st.soffset),mt=k5(st.finish,st.foffset);return XC.range(ut.element,ut.offset,mt.element,mt.offset)}else return st}),E5=(h,j,tt)=>{const st=im(j.root).dom,ut=nP(h,tt,j),mt=S5(st,j).bind(Ot=>{if(mx(Ot))return r0(st,XC.exactFromRange(Ot)).orThunk(()=>{const Gt=ro.fromText(MT);rv(Ot.start,Gt);const Wt=ME(st,XC.exact(Gt,0,Gt,1));return h0(Gt),Wt}).bind(Gt=>gw(Gt.left,Gt.top,Gt.width,Gt.height));{const zt=vr(Ot,Wt=>Wt.dom.getBoundingClientRect()),Gt={left:Math.min(zt.firstCell.left,zt.lastCell.left),right:Math.max(zt.firstCell.right,zt.lastCell.right),top:Math.min(zt.firstCell.top,zt.lastCell.top),bottom:Math.max(zt.firstCell.bottom,zt.lastCell.bottom)};return gw(Gt.left,Gt.top,Gt.right-Gt.left,Gt.bottom-Gt.top)}}),kt=S5(st,j).bind(Ot=>mx(Ot)?_s(Ot.start)?It.some(Ot.start):Tm(Ot.start):It.some(Ot.firstCell)).getOr(h.element);return WL(mt,ut,j,tt,kt)};var A5=[Kl("getSelection"),Jo("root"),Kl("bubble"),pw(),ko("overrides",{}),ko("showAbove",!1),qu("placement",E5)];const O_="link-layout",NT=h=>h.x+h.width,u0=(h,j)=>h.x-j.width,uP=(h,j)=>h.y-j.height+h.height,T5=h=>h.y,I5=(h,j,tt)=>a0(NT(h),T5(h),tt.southeast(),bT(),"southeast",l0(h,{left:0,top:2}),O_),dP=(h,j,tt)=>a0(u0(h,j),T5(h),tt.southwest(),Y3(),"southwest",l0(h,{right:1,top:2}),O_),R5=(h,j,tt)=>a0(NT(h),uP(h,j),tt.northeast(),X3(),"northeast",l0(h,{left:0,bottom:3}),O_),fP=(h,j,tt)=>a0(u0(h,j),uP(h,j),tt.northwest(),vT(),"northwest",l0(h,{right:1,bottom:3}),O_),hP=()=>[I5,dP,R5,fP],Hy=()=>[dP,I5,fP,R5],bw=(h,j,tt)=>{const st=s5(tt,j.item.element),ut=IT(h.element,j,hP(),Hy(),hP(),Hy(),It.none());return It.some(TT({anchorBox:st,bubble:AT(),overrides:j.overrides,layouts:ut}))};var pP=[Jo("item"),pw(),ko("overrides",{}),qu("placement",bw)],O2=Sp("type",{selection:A5,node:rP,hotspot:UL,submenu:pP,makeshift:J4});const L0=[dy("classes",Nr),wm("mode","all",["all","layout","placement"])],Ey=[ko("useFixed",hn),Kl("getBounds")],F0=[Ql("anchor",O2),hm("transition",L0)],Vy=()=>{const h=document.documentElement;return F4(0,0,h.clientWidth,h.clientHeight)},LT=h=>{const j=Fu(h.element),tt=h.element.dom.getBoundingClientRect();return L4(j.left,j.top,tt.width,tt.height)},Wy=(h,j,tt,st,ut,mt)=>{const yt=I2(j.anchorBox,h);return GL(yt,st.element,j.bubble,j.layouts,ut,tt,j.overrides,mt)},D2=(h,j,tt,st,ut)=>{const mt=It.none();gP(h,j,tt,st,ut,mt)},gP=(h,j,tt,st,ut,mt)=>{const yt=y0("placement.info",vs(F0),ut),kt=yt.anchor,Ot=st.element,zt=tt.get(st.uid);r5(()=>{Xo(Ot,"position","fixed");const Gt=du(Ot,"visibility");Xo(Ot,"visibility","hidden");const Wt=j.useFixed()?Vy():LT(h);kt.placement(h,kt,Wt).each(sn=>{const cn=mt.orThunk(()=>j.getBounds.map(ao)),xn=Wy(Wt,sn,cn,st,zt,yt.transition);tt.set(st.uid,xn)}),Gt.fold(()=>{Bs(Ot,"visibility")},sn=>{Xo(Ot,"visibility",sn)}),du(Ot,"left").isNone()&&du(Ot,"top").isNone()&&du(Ot,"right").isNone()&&du(Ot,"bottom").isNone()&&ou(du(Ot,"position"),"fixed")&&Bs(Ot,"position")},Ot)};var M5=Object.freeze({__proto__:null,position:D2,positionWithinBounds:gP,getMode:(h,j,tt)=>j.useFixed()?"fixed":"absolute",reset:(h,j,tt,st)=>{const ut=st.element;_o(["position","left","right","top","bottom"],mt=>Bs(ut,mt)),DL(ut),tt.clear(st.uid)}}),FT=Object.freeze({__proto__:null,init:()=>{let h={};return O0({readState:()=>h,clear:ut=>{wt(ut)?delete h[ut]:h={}},set:(ut,mt)=>{h[ut]=mt},get:ut=>tr(h,ut)})}});const s0=Fm({fields:Ey,name:"positioning",active:PL,apis:M5,state:FT}),PE=h=>h.getSystem().isConnected(),OE=h=>{wl(h,Gy());const j=h.components();_o(j,OE)},vw=h=>{const j=h.components();_o(j,vw),wl(h,fy())},P5=(h,j)=>{h.getSystem().addToWorld(j),Fn(h.element)&&vw(j)},zT=h=>{OE(h),h.getSystem().removeFromWorld(h)},O5=(h,j)=>{Km(h.element,j.element)},BT=h=>{_o(h.components(),j=>h0(j.element)),Jp(h.element),h.syncComponents()},D5=(h,j,tt)=>{const st=h.components();BT(h);const ut=tt(j),mt=zn(st,ut);_o(mt,yt=>{OE(yt),h.getSystem().removeFromWorld(yt)}),_o(ut,yt=>{PE(yt)?O5(h,yt):(h.getSystem().addToWorld(yt),O5(h,yt),Fn(h.element)&&vw(yt))}),h.syncComponents()},eS=(h,j,tt)=>{const st=h.components(),ut=rn(j,kt=>fT(kt).toArray());_o(st,kt=>{Wn(ut,kt)||zT(kt)});const mt=tt(j),yt=zn(st,mt);_o(yt,kt=>{PE(kt)&&zT(kt)}),_o(mt,kt=>{PE(kt)||P5(h,kt)}),h.syncComponents()},yx=(h,j)=>{DE(h,j,Km)},DE=(h,j,tt)=>{h.getSystem().addToWorld(j),tt(h.element,j.element),Fn(h.element)&&vw(j),h.syncComponents()},N2=h=>{OE(h),h0(h.element),h.getSystem().removeFromWorld(h)},bx=h=>{const j=Yp(h.element).bind(tt=>h.getSystem().getByDom(tt).toOptional());N2(h),j.each(tt=>{tt.syncComponents()})},mP=h=>{const j=h.components();_o(j,N2),Jp(h.element),h.syncComponents()},Ay=(h,j)=>{_w(h,j,Km)},N5=(h,j)=>{_w(h,j,J_)},_w=(h,j,tt)=>{tt(h,j.element);const st=Im(j.element);_o(st,ut=>{j.getByDom(ut).each(vw)})},L2=h=>{const j=Im(h.element);_o(j,tt=>{h.getByDom(tt).each(OE)}),h0(h.element)},$T=(h,j,tt,st)=>{tt.get().each(yt=>{mP(h)});const ut=j.getAttachPoint(h);yx(ut,h);const mt=h.getSystem().build(st);return yx(h,mt),tt.set(mt),mt},GT=(h,j,tt,st)=>{const ut=$T(h,j,tt,st);return j.onOpen(h,ut),ut},n8=(h,j,tt,st)=>tt.get().map(()=>$T(h,j,tt,st)),o8=(h,j,tt,st,ut)=>{vP(h,j),GT(h,j,tt,st),ut(),jT(h,j)},yP=(h,j,tt)=>{tt.get().each(st=>{mP(h),bx(h),j.onClose(h,st),tt.clear()})},bP=(h,j,tt)=>tt.isOpen(),F2=(h,j,tt,st)=>bP(h,j,tt)&&tt.get().exists(ut=>j.isPartOf(h,ut,st)),tS=(h,j,tt)=>tt.get(),NE=(h,j,tt,st)=>{du(h.element,j).fold(()=>{Kt(h.element,tt)},ut=>{Vo(h.element,tt,ut)}),Xo(h.element,j,st)},r8=(h,j,tt)=>{Os(h.element,tt).fold(()=>Bs(h.element,j),st=>Xo(h.element,j,st))},vP=(h,j,tt)=>{const st=j.getAttachPoint(h);Xo(h.element,"position",s0.getMode(st)),NE(h,"visibility",j.cloakVisibilityAttr,"hidden")},LE=h=>er(["top","left","right","bottom"],j=>du(h,j).isSome()),jT=(h,j,tt)=>{LE(h.element)||Bs(h.element,"position"),r8(h,"visibility",j.cloakVisibilityAttr)};var L5=Object.freeze({__proto__:null,cloak:vP,decloak:jT,open:GT,openWhileCloaked:o8,close:yP,isOpen:bP,isPartOf:F2,getState:tS,setContent:n8}),UT=Object.freeze({__proto__:null,events:(h,j)=>yu([Qo(Lm(),(tt,st)=>{yP(tt,h,j)})])}),nS=[zl("onOpen"),zl("onClose"),Jo("isPartOf"),Jo("getAttachPoint"),ko("cloakVisibilityAttr","data-precloak-visibility")],z2=Object.freeze({__proto__:null,init:()=>{const h=Wl(),j=Nt("not-implemented");return O0({readState:j,isOpen:h.isSet,clear:h.clear,set:h.set,get:h.get})}});const Ul=Fm({fields:nS,name:"sandboxing",active:UT,apis:L5,state:z2}),vx=Nt("dismiss.popups"),xw=Nt("reposition.popups"),HT=Nt("mouse.released"),F5=cy([ko("isExtraPart",hn),hm("fireEventInstead",[ko("event",jy())])]),FE=h=>{const j=y0("Dismissal",F5,h);return{[vx()]:{schema:cy([Jo("target")]),onReceive:(tt,st)=>{Ul.isOpen(tt)&&(Ul.isPartOf(tt,st.target)||j.isExtraPart(tt,st.target)||j.fireEventInstead.fold(()=>Ul.close(tt),mt=>wl(tt,mt.event)))}}}},B2=cy([hm("fireEventInstead",[ko("event",eE())]),_y("doReposition")]),zE=h=>{const j=y0("Reposition",B2,h);return{[xw()]:{onReceive:tt=>{Ul.isOpen(tt)&&j.fireEventInstead.fold(()=>j.doReposition(tt),st=>wl(tt,st.event))}}}},VT=(h,j,tt)=>{j.store.manager.onLoad(h,j,tt)},wP=(h,j,tt)=>{j.store.manager.onUnload(h,j,tt)};var ww=Object.freeze({__proto__:null,onLoad:VT,onUnload:wP,setValue:(h,j,tt,st)=>{j.store.manager.setValue(h,j,tt,st)},getValue:(h,j,tt)=>j.store.manager.getValue(h,j,tt),getState:(h,j,tt)=>tt}),B5=Object.freeze({__proto__:null,events:(h,j)=>{const tt=h.resetOnDom?[ep((st,ut)=>{VT(st,h,j)}),S_((st,ut)=>{wP(st,h,j)})]:[tw(h,j,VT)];return yu(tt)}});const G2=()=>{const h=ls(null),j=()=>({mode:"memory",value:h.get()}),tt=()=>h.get()===null,st=()=>{h.set(null)};return O0({set:h.set,get:h.get,isNotSet:tt,clear:st,readState:j})},$5=()=>O0({readState:Et}),CP=()=>{const h=ls({}),j=ls({});return O0({readState:()=>({mode:"dataset",dataByValue:h.get(),dataByText:j.get()}),lookup:yt=>tr(h.get(),yt).orThunk(()=>tr(j.get(),yt)),update:yt=>{const kt=h.get(),Ot=j.get(),zt={},Gt={};_o(yt,Wt=>{zt[Wt.value]=Wt,tr(Wt,"meta").each(sn=>{tr(sn,"text").each(cn=>{Gt[cn]=Wt})})}),h.set({...kt,...zt}),j.set({...Ot,...Gt})},clear:()=>{h.set({}),j.set({})}})};var D_=Object.freeze({__proto__:null,memory:G2,dataset:CP,manual:$5,init:h=>h.store.manager.state(h)});const SP=(h,j,tt,st)=>{const ut=j.store;tt.update([st]),ut.setValue(h,st),j.onSetValue(h,st)},qT=(h,j,tt)=>{const st=j.store,ut=st.getDataKey(h);return tt.lookup(ut).getOrThunk(()=>st.getFallbackEntry(ut))},bv=(h,j,tt)=>{j.store.initialValue.each(ut=>{SP(h,j,tt,ut)})},zm=(h,j,tt)=>{tt.clear()};var i8=[Kl("initialValue"),Jo("getFallbackEntry"),Jo("getDataKey"),Jo("setValue"),qu("manager",{setValue:SP,getValue:qT,onLoad:bv,onUnload:zm,state:CP})];const $1=(h,j,tt)=>j.store.getValue(h),a8=(h,j,tt,st)=>{j.store.setValue(h,st),j.onSetValue(h,st)},EP=(h,j,tt)=>{j.store.initialValue.each(st=>{j.store.setValue(h,st)})};var BE=[Jo("getValue"),ko("setValue",Et),Kl("initialValue"),qu("manager",{setValue:a8,getValue:$1,onLoad:EP,onUnload:Et,state:D1.init})];const oS=(h,j,tt,st)=>{tt.set(st),j.onSetValue(h,st)},AP=(h,j,tt)=>tt.get(),TP=(h,j,tt)=>{j.store.initialValue.each(st=>{tt.isNotSet()&&tt.set(st)})},iB=(h,j,tt)=>{tt.clear()};var aB=[Kl("initialValue"),qu("manager",{setValue:oS,getValue:AP,onLoad:TP,onUnload:iB,state:G2})],IP=[Eu("store",{mode:"memory"},Sp("mode",{memory:aB,manual:BE,dataset:i8})),zl("onSetValue"),ko("resetOnDom",!1)];const zr=Fm({fields:IP,name:"representing",active:B5,apis:ww,extra:{setValueFrom:(h,j)=>{const tt=zr.getValue(j);zr.setValue(h,tt)}},state:D_}),Bm=(h,j)=>Pt(h,{},On(j,tt=>YS(tt.name(),"Cannot configure "+tt.name()+" for "+h)).concat([Jl("dump",Jt)])),ZT=h=>h.dump,$m=(h,j)=>({...gr(j),...h.dump}),vv={field:Bm,augment:$m,get:ZT},G5="placeholder",$E=tn.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),rS=h=>Ms(h,"uiType"),RP=(h,j,tt,st)=>h.exists(ut=>ut!==tt.owner)?$E.single(!0,Nt(tt)):tr(st,tt.name).fold(()=>{throw new Error("Unknown placeholder component: "+tt.name+`
Known: [`+Oo(st)+`]
Namespace: `+h.getOr("none")+`
Spec: `+JSON.stringify(tt,null,2))},ut=>ut.replace()),Cw=(h,j,tt,st)=>rS(tt)&&tt.uiType===G5?RP(h,j,tt,st):$E.single(!1,Nt(tt)),sS=(h,j,tt,st)=>Cw(h,j,tt,st).fold((mt,yt)=>{const kt=rS(tt)?yt(j,tt.config,tt.validated):yt(j),Ot=tr(kt,"components").getOr([]),zt=rn(Ot,Gt=>sS(h,j,Gt,st));return[{...kt,components:zt}]},(mt,yt)=>{if(rS(tt)){const kt=yt(j,tt.config,tt.validated);return tt.validated.preprocess.getOr(Jt)(kt)}else return yt(j)}),l8=(h,j,tt,st)=>rn(tt,ut=>sS(h,j,ut,st)),c8=(h,j)=>{let tt=!1;const st=()=>tt,ut=()=>{if(tt)throw new Error("Trying to use the same placeholder more than once: "+h);return tt=!0,j},mt=()=>j.fold((yt,kt)=>yt,(yt,kt)=>yt);return{name:Nt(h),required:mt,used:st,replace:ut}},u8=(h,j,tt,st)=>{const ut=vr(st,(yt,kt)=>c8(kt,yt)),mt=l8(h,j,tt,ut);return sr(ut,yt=>{if(yt.used()===!1&&yt.required())throw new Error("Placeholder: "+yt.name()+` was not found in components list
Namespace: `+h.getOr("none")+`
Components: `+JSON.stringify(j.components,null,2))}),mt},MP=$E.single,j2=$E.multiple,iS=Nt(G5),U2=tn.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),KT=ko("factory",{sketch:Jt}),qy=ko("schema",[]),G1=Jo("name"),H2=fm("pname","pname",b_(h=>"<alloy."+Wr(h.name)+">"),zy()),aS=Jl("schema",()=>[Kl("preprocess")]),YT=ko("defaults",Nt({})),XT=ko("overrides",Nt({})),d8=vs([KT,qy,G1,H2,YT,XT]),f8=vs([KT,qy,G1,YT,XT]),h8=vs([KT,qy,G1,H2,YT,XT]),p8=vs([KT,aS,G1,Jo("unit"),H2,YT,XT]),PP=h=>h.fold(It.some,It.none,It.some,It.some),OP=h=>{const j=tt=>tt.name;return h.fold(j,j,j,j)},j5=h=>h.fold(Jt,Jt,Jt,Jt),JT=(h,j)=>tt=>{const st=y0("Converting part type",j,tt);return h(st)},x0=JT(U2.required,d8),_v=JT(U2.external,f8),Zy=JT(U2.optional,h8),GE=JT(U2.group,p8),U5=Nt("entirety");var DP=Object.freeze({__proto__:null,required:x0,external:_v,optional:Zy,group:GE,asNamedPart:PP,name:OP,asCommon:j5,original:U5});const QT=(h,j,tt,st)=>Ou(j.defaults(h,tt,st),tt,{uid:h.partUids[j.name]},j.overrides(h,tt,st)),g8=(h,j,tt)=>{const st={},ut={};return _o(tt,mt=>{mt.fold(yt=>{st[yt.pname]=MP(!0,(kt,Ot,zt)=>yt.factory.sketch(QT(kt,yt,Ot,zt)))},yt=>{const kt=j.parts[yt.name];ut[yt.name]=Nt(yt.factory.sketch(QT(j,yt,kt[U5()]),kt))},yt=>{st[yt.pname]=MP(!1,(kt,Ot,zt)=>yt.factory.sketch(QT(kt,yt,Ot,zt)))},yt=>{st[yt.pname]=j2(!0,(kt,Ot,zt)=>{const Gt=kt[yt.name];return On(Gt,Wt=>yt.factory.sketch(Ou(yt.defaults(kt,Wt,zt),Wt,yt.overrides(kt,Wt))))})})}),{internals:Nt(st),externals:Nt(ut)}},eI=(h,j)=>{const tt={};return _o(j,st=>{PP(st).each(ut=>{const mt=m8(h,ut.pname);tt[ut.name]=yt=>{const kt=y0("Part: "+ut.name+" in "+h,vs(ut.schema),yt);return{...mt,config:yt,validated:kt}}})}),tt},m8=(h,j)=>({uiType:iS(),owner:h,name:j}),tI=(h,j,tt)=>({uiType:iS(),owner:h,name:j,config:tt,validated:{}}),y8=h=>rn(h,j=>j.fold(It.none,It.some,It.none,It.none).map(tt=>__(tt.name,tt.schema.concat([v2(U5())]))).toArray()),b8=h=>On(h,OP),NP=(h,j,tt)=>g8(h,j,tt),nI=(h,j,tt)=>u8(It.some(h),j,j.components,tt),Du=(h,j,tt)=>{const st=j.partUids[tt];return h.getSystem().getByUid(st).toOptional()},Br=(h,j,tt)=>Du(h,j,tt).getOrDie("Could not find part: "+tt),j1=(h,j,tt)=>{const st={},ut=j.partUids,mt=h.getSystem();return _o(tt,yt=>{st[yt]=Nt(mt.getByUid(ut[yt]))}),st},LP=(h,j)=>{const tt=h.getSystem();return vr(j.partUids,(st,ut)=>Nt(tt.getByUid(st)))},H5=h=>Oo(h.partUids),lS=(h,j,tt)=>{const st={},ut=j.partUids,mt=h.getSystem();return _o(tt,yt=>{st[yt]=Nt(mt.getByUid(ut[yt]).getOrDie())}),st},oI=(h,j)=>{const tt=b8(j);return Ys(On(tt,st=>({key:st,value:h+"-"+st})))},jE=h=>fm("partUids","partUids",Vx(j=>oI(j.uid,h)),zy());var V5=Object.freeze({__proto__:null,generate:eI,generateOne:tI,schemas:y8,names:b8,substitutes:NP,components:nI,defaultUids:oI,defaultUidsSchema:jE,getAllParts:LP,getAllPartNames:H5,getPart:Du,getPartOrDie:Br,getParts:j1,getPartsOrDie:lS});const FP=(h,j)=>(h.length>0?[__("parts",h)]:[]).concat([Jo("uid"),ko("dom",{}),ko("components",[]),v2("originalSpec"),ko("debug.sketcher",{})]).concat(j),W5=(h,j,tt,st,ut)=>{const mt=FP(st,ut);return y0(h+" [SpecSchema]",cy(mt.concat(j)),tt)},zP=(h,j,tt,st)=>{const ut=rI(st),mt=W5(h,j,ut,[],[]);return tt(mt,ut)},UE=(h,j,tt,st,ut)=>{const mt=rI(ut),yt=y8(tt),kt=jE(tt),Ot=W5(h,j,mt,yt,[kt]),zt=NP(h,Ot,tt),Gt=nI(h,Ot,zt.internals());return st(Ot,Gt,mt,zt.externals())},V2=h=>Ms(h,"uid"),rI=h=>V2(h)?h:{...h,uid:dE("uid")},v8=h=>h.uid!==void 0,_8=cy([Jo("name"),Jo("factory"),Jo("configFields"),ko("apis",{}),ko("extraApis",{})]),x8=cy([Jo("name"),Jo("factory"),Jo("configFields"),Jo("partFields"),ko("apis",{}),ko("extraApis",{})]),Ty=h=>{const j=y0("Sketcher for "+h.name,_8,h),tt=mt=>zP(j.name,j.configFields,j.factory,mt),st=vr(j.apis,hT),ut=vr(j.extraApis,(mt,yt)=>w3(mt,yt));return{name:j.name,configFields:j.configFields,sketch:tt,...st,...ut}},d0=h=>{const j=y0("Sketcher for "+h.name,x8,h),tt=yt=>UE(j.name,j.configFields,j.partFields,j.factory,yt),st=eI(j.name,j.partFields),ut=vr(j.apis,hT),mt=vr(j.extraApis,(yt,kt)=>w3(yt,kt));return{name:j.name,partFields:j.partFields,configFields:j.configFields,sketch:tt,parts:st,...ut,...mt}},cS=h=>Cp("input")(h)&&Kr(h,"type")!=="radio"||Cp("textarea")(h);var w8=Object.freeze({__proto__:null,getCurrent:(h,j,tt)=>j.find(h)});const C8=[Jo("find")],Ll=Fm({fields:C8,name:"composing",apis:w8}),k8=["input","button","textarea","select"],S8=(h,j,tt)=>{(j.disabled()?Z5:sI)(h,j)},q5=(h,j)=>j.useNative===!0&&Wn(k8,Xl(h.element)),cB=h=>Pu(h.element,"disabled"),uB=h=>{Vo(h.element,"disabled","disabled")},kw=h=>{Kt(h.element,"disabled")},HE=h=>Kr(h.element,"aria-disabled")==="true",E8=h=>{Vo(h.element,"aria-disabled","true")},A8=h=>{Vo(h.element,"aria-disabled","false")},Z5=(h,j,tt)=>{j.disableClass.each(ut=>{Vp(h.element,ut)}),(q5(h,j)?uB:E8)(h),j.onDisabled(h)},sI=(h,j,tt)=>{j.disableClass.each(ut=>{bu(h.element,ut)}),(q5(h,j)?kw:A8)(h),j.onEnabled(h)},iI=(h,j)=>q5(h,j)?cB(h):HE(h);var T8=Object.freeze({__proto__:null,enable:sI,disable:Z5,isDisabled:iI,onLoad:S8,set:(h,j,tt,st)=>{(st?Z5:sI)(h,j)}}),I8=Object.freeze({__proto__:null,exhibit:(h,j)=>Y0({classes:j.disabled()?j.disableClass.toArray():[]}),events:(h,j)=>yu([v3(e0(),(tt,st)=>iI(tt,h)),tw(h,j,S8)])}),BP=[Wu("disabled",hn),ko("useNative",!0),Kl("disableClass"),zl("onDisabled"),zl("onEnabled")];const Rs=Fm({fields:BP,name:"disabling",active:I8,apis:T8}),aI=(h,j,tt,st)=>{const ut=o0(h.element,"."+j.highlightClass);_o(ut,mt=>{er(st,kt=>Vl(kt.element,mt))||(bu(mt,j.highlightClass),h.getSystem().getByDom(mt).each(kt=>{j.onDehighlight(h,kt),wl(kt,kC())}))})},it=(h,j,tt)=>aI(h,j,tt,[]),ft=(h,j,tt,st)=>{pn(h,j,tt,st)&&(bu(st.element,j.highlightClass),j.onDehighlight(h,st),wl(st,kC()))},vt=(h,j,tt,st)=>{aI(h,j,tt,[st]),pn(h,j,tt,st)||(Vp(st.element,j.highlightClass),j.onHighlight(h,st),wl(st,y3()))},Ct=(h,j,tt)=>{Io(h,j).each(st=>{vt(h,j,tt,st)})},Ft=(h,j,tt)=>{hr(h,j).each(st=>{vt(h,j,tt,st)})},jt=(h,j,tt,st)=>{to(h,j,tt,st).fold(ut=>{throw ut},ut=>{vt(h,j,tt,ut)})},en=(h,j,tt,st)=>{const ut=ts(h,j);mn(ut,st).each(yt=>{vt(h,j,tt,yt)})},pn=(h,j,tt,st)=>X0(st.element,j.highlightClass),En=(h,j,tt)=>np(h.element,"."+j.highlightClass).bind(st=>h.getSystem().getByDom(st).toOptional()),to=(h,j,tt,st)=>{const ut=o0(h.element,"."+j.itemClass);return It.from(ut[st]).fold(()=>Ks.error(new Error("No element found with index "+st)),h.getSystem().getByDom)},Io=(h,j,tt)=>np(h.element,"."+j.itemClass).bind(st=>h.getSystem().getByDom(st).toOptional()),hr=(h,j,tt)=>{const st=o0(h.element,"."+j.itemClass);return(st.length>0?It.some(st[st.length-1]):It.none()).bind(mt=>h.getSystem().getByDom(mt).toOptional())},Or=(h,j,tt,st)=>{const ut=o0(h.element,"."+j.itemClass);return wn(ut,yt=>X0(yt,j.highlightClass)).bind(yt=>{const kt=_2(yt,st,0,ut.length-1);return h.getSystem().getByDom(ut[kt]).toOptional()})},Tr=(h,j,tt)=>Or(h,j,tt,-1),xr=(h,j,tt)=>Or(h,j,tt,1),ts=(h,j,tt)=>{const st=o0(h.element,"."+j.itemClass);return xu(On(st,ut=>h.getSystem().getByDom(ut).toOptional()))};var ar=Object.freeze({__proto__:null,dehighlightAll:it,dehighlight:ft,highlight:vt,highlightFirst:Ct,highlightLast:Ft,highlightAt:jt,highlightBy:en,isHighlighted:pn,getHighlighted:En,getFirst:Io,getLast:hr,getPrevious:Tr,getNext:xr,getCandidates:ts}),wr=[Jo("highlightClass"),Jo("itemClass"),zl("onHighlight"),zl("onDehighlight")];const kr=Fm({fields:wr,name:"highlighting",apis:ar}),Fs=[8],Fl=[9],vu=[13],Ku=[27],up=[32],Ky=[37],U1=[38],W2=[39],N_=[40],Nu=(h,j,tt)=>{const st=Nn(h.slice(0,j)),ut=Nn(h.slice(j+1));return mn(st.concat(ut),tt)},Q0=(h,j,tt)=>{const st=Nn(h.slice(0,j));return mn(st,tt)},ey=(h,j,tt)=>{const st=h.slice(0,j),ut=h.slice(j+1);return mn(ut.concat(st),tt)},xv=(h,j,tt)=>{const st=h.slice(j+1);return mn(st,tt)},Js=h=>j=>{const tt=j.raw;return Wn(h,tt.which)},hy=h=>j=>Cn(h,tt=>tt(j)),bm=h=>h.raw.shiftKey===!0,lI=h=>h.raw.ctrlKey===!0,_x=an(bm),$a=(h,j)=>({matches:h,classification:j}),w0=(h,j)=>mn(h,st=>st.matches(j)).map(st=>st.classification),cI=(h,j,tt)=>{j.exists(ut=>tt.exists(mt=>Vl(mt,ut)))||rs(h,tE(),{prevFocus:j,newFocus:tt})},uI=()=>{const h=tt=>N0(tt.element);return{get:h,set:(tt,st)=>{const ut=h(tt);tt.getSystem().triggerFocus(st,tt.element);const mt=h(tt);cI(tt,ut,mt)}}},$P=()=>{const h=tt=>kr.getHighlighted(tt).map(st=>st.element);return{get:h,set:(tt,st)=>{const ut=h(tt);tt.getSystem().getByDom(st).fold(Et,yt=>{kr.highlight(tt,yt)});const mt=h(tt);cI(tt,ut,mt)}}};var Sw;(function(h){h.OnFocusMode="onFocus",h.OnEnterOrSpaceMode="onEnterOrSpace",h.OnApiMode="onApi"})(Sw||(Sw={}));const q2=(h,j,tt,st,ut)=>{const mt=()=>h.concat([ko("focusManager",uI()),Eu("focusInside","onFocus",Yw(zt=>Wn(["onFocus","onEnterOrSpace","onApi"],zt)?Ks.value(zt):Ks.error("Invalid value for focusInside"))),qu("handler",Ot),qu("state",j),qu("sendFocusIn",ut)]),yt=(zt,Gt,Wt,sn,cn)=>{const xn=Wt(zt,Gt,sn,cn);return w0(xn,Gt.event).bind(Mn=>Mn(zt,Gt,sn,cn))},Ot={schema:mt,processKey:yt,toEvents:(zt,Gt)=>{const Wt=zt.focusInside!==Sw.OnFocusMode?It.none():ut(zt).map(xn=>Qo(P1(),(Mn,vo)=>{xn(Mn,zt,Gt),vo.stop()})),sn=(xn,Mn)=>{const vo=Js(up.concat(vu))(Mn.event);zt.focusInside===Sw.OnEnterOrSpaceMode&&vo&&Hv(xn,Mn)&&ut(zt).each(jn=>{jn(xn,zt,Gt),Mn.stop()})},cn=[Qo(dv(),(xn,Mn)=>{yt(xn,Mn,tt,zt,Gt).fold(()=>{sn(xn,Mn)},vo=>{Mn.stop()})}),Qo(o2(),(xn,Mn)=>{yt(xn,Mn,st,zt,Gt).each(vo=>{Mn.stop()})})];return yu(Wt.toArray().concat(cn))}};return Ot},dI=h=>{const j=[Kl("onEscape"),Kl("onEnter"),ko("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ko("firstTabstop",0),ko("useTabstopAt",fn),Kl("visibilitySelector")].concat([h]),tt=(jn,po)=>{const yo=jn.visibilitySelector.bind(zo=>R_(po,zo)).getOr(po);return fu(yo)>0},st=(jn,po)=>{const yo=o0(jn.element,po.selector),zo=lo(yo,$o=>tt(po,$o));return It.from(zo[po.firstTabstop])},ut=(jn,po)=>po.focusManager.get(jn).bind(yo=>R_(yo,po.selector)),mt=(jn,po)=>tt(jn,po)&&jn.useTabstopAt(po),yt=(jn,po,yo)=>{st(jn,po).each(zo=>{po.focusManager.set(jn,zo)})},kt=(jn,po,yo,zo,$o)=>$o(po,yo,Cr=>mt(zo,Cr)).fold(()=>zo.cyclic?It.some(!0):It.none(),Cr=>(zo.focusManager.set(jn,Cr),It.some(!0))),Ot=(jn,po,yo,zo)=>{const $o=o0(jn.element,yo.selector);return ut(jn,yo).bind(Cr=>wn($o,Pn(Vl,Cr)).bind(Ko=>kt(jn,$o,Ko,yo,zo)))},zt=(jn,po,yo)=>{const zo=yo.cyclic?Nu:Q0;return Ot(jn,po,yo,zo)},Gt=(jn,po,yo)=>{const zo=yo.cyclic?ey:xv;return Ot(jn,po,yo,zo)},Wt=jn=>Wm(jn).bind(sy).exists(po=>Vl(po,jn)),sn=(jn,po,yo)=>ut(jn,yo).filter(zo=>!yo.useTabstopAt(zo)).bind(zo=>(Wt(zo)?zt:Gt)(jn,po,yo)),cn=(jn,po,yo)=>yo.onEnter.bind(zo=>zo(jn,po)),xn=(jn,po,yo)=>yo.onEscape.bind(zo=>zo(jn,po)),Mn=Nt([$a(hy([bm,Js(Fl)]),zt),$a(Js(Fl),Gt),$a(hy([_x,Js(vu)]),cn)]),vo=Nt([$a(Js(Ku),xn),$a(Js(Fl),sn)]);return q2(j,D1.init,Mn,vo,()=>It.some(yt))};var R8=dI(Jl("cyclic",hn)),WE=dI(Jl("cyclic",fn));const VZ=(h,j,tt)=>(KA(h,tt,e0()),It.some(!0)),Z2=(h,j,tt)=>cS(tt)&&Js(up)(j.event)?It.none():VZ(h,j,tt),qE=(h,j)=>It.some(!0),fB=[ko("execute",Z2),ko("useSpace",!1),ko("useEnter",!0),ko("useControlEnter",!1),ko("useDown",!1)],GP=(h,j,tt)=>tt.execute(h,j,h.element),WZ=(h,j,tt,st)=>{const ut=tt.useSpace&&!cS(h.element)?up:[],mt=tt.useEnter?vu:[],yt=tt.useDown?N_:[],kt=ut.concat(mt).concat(yt);return[$a(Js(kt),GP)].concat(tt.useControlEnter?[$a(hy([lI,Js(vu)]),GP)]:[])},hB=(h,j,tt,st)=>tt.useSpace&&!cS(h.element)?[$a(Js(up),qE)]:[];var qZ=q2(fB,D1.init,WZ,hB,()=>It.none());const M8=()=>{const h=Wl();return O0({readState:()=>h.get().map(ut=>({numRows:String(ut.numRows),numColumns:String(ut.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(ut,mt)=>{h.set({numRows:ut,numColumns:mt})},getNumRows:()=>h.get().map(ut=>ut.numRows),getNumColumns:()=>h.get().map(ut=>ut.numColumns)})};var KZ=Object.freeze({__proto__:null,flatgrid:M8,init:h=>h.state(h)});const pB=h=>(j,tt,st,ut)=>{const mt=h(j.element);return gB(mt,j,tt,st,ut)},P8=(h,j)=>{const tt=h5(h,j);return pB(tt)},O8=(h,j)=>{const tt=h5(j,h);return pB(tt)},D8=h=>(j,tt,st,ut)=>gB(h,j,tt,st,ut),gB=(h,j,tt,st,ut)=>st.focusManager.get(j).bind(yt=>h(j.element,yt,st,ut)).map(yt=>(st.focusManager.set(j,yt),!0)),Y5=D8,jP=D8,UP=D8,die=h=>h.offsetWidth<=0&&h.offsetHeight<=0,N8=h=>!die(h.dom),YZ=(h,j)=>wn(h,j).map(tt=>({index:tt,candidates:h})),mB=(h,j,tt)=>{const st=yt=>Vl(yt,j),ut=o0(h,tt),mt=lo(ut,N8);return YZ(mt,st)},Jv=(h,j)=>wn(h,tt=>Vl(j,tt)),yB=(h,j,tt,st)=>{const ut=Math.floor(j/tt),mt=j%tt;return st(ut,mt).bind(yt=>{const kt=yt.row*tt+yt.column;return kt>=0&&kt<h.length?It.some(h[kt]):It.none()})},bB=(h,j,tt,st,ut)=>yB(h,j,st,(mt,yt)=>{const Ot=mt===tt-1?h.length-mt*st:st,zt=_2(yt,ut,0,Ot-1);return It.some({row:mt,column:zt})}),vB=(h,j,tt,st,ut)=>yB(h,j,st,(mt,yt)=>{const kt=_2(mt,ut,0,tt-1),zt=kt===tt-1?h.length-kt*st:st,Gt=Zv(yt,0,zt-1);return It.some({row:kt,column:Gt})}),XZ=(h,j,tt,st)=>bB(h,j,tt,st,1),JZ=(h,j,tt,st)=>bB(h,j,tt,st,-1),fI=(h,j,tt,st)=>vB(h,j,tt,st,-1),L8=(h,j,tt,st)=>vB(h,j,tt,st,1),QZ=[Jo("selector"),ko("execute",Z2),v0("onEscape"),ko("captureTab",!1),hx()],F8=(h,j,tt)=>{np(h.element,j.selector).each(st=>{j.focusManager.set(h,st)})},HP=(h,j)=>j.focusManager.get(h).bind(tt=>R_(tt,j.selector)),z8=(h,j,tt,st)=>HP(h,tt).bind(ut=>tt.execute(h,j,ut)),VP=h=>(j,tt,st,ut)=>mB(j,tt,st.selector).bind(mt=>h(mt.candidates,mt.index,ut.getNumRows().getOr(st.initSize.numRows),ut.getNumColumns().getOr(st.initSize.numColumns))),_B=(h,j,tt)=>tt.captureTab?It.some(!0):It.none(),eK=(h,j,tt)=>tt.onEscape(h,j),xB=VP(JZ),wB=VP(XZ),tK=VP(fI),nK=VP(L8),CB=Nt([$a(Js(Ky),P8(xB,wB)),$a(Js(W2),O8(xB,wB)),$a(Js(U1),Y5(tK)),$a(Js(N_),jP(nK)),$a(hy([bm,Js(Fl)]),_B),$a(hy([_x,Js(Fl)]),_B),$a(Js(up.concat(vu)),z8)]),WP=Nt([$a(Js(Ku),eK),$a(Js(up),qE)]);var oK=q2(QZ,M8,CB,WP,()=>It.some(F8));const kB=(h,j,tt,st,ut)=>{const mt=kt=>Xl(kt)==="button"&&Kr(kt,"disabled")==="disabled",yt=(kt,Ot,zt)=>ut(kt,Ot,st,0,zt.length-1,zt[Ot],Gt=>mt(zt[Gt])?yt(kt,Gt,zt):It.from(zt[Gt]));return mB(h,tt,j).bind(kt=>{const Ot=kt.index,zt=kt.candidates;return yt(Ot,Ot,zt)})},SB=(h,j,tt,st)=>kB(h,j,tt,st,(ut,mt,yt,kt,Ot,zt,Gt)=>{const Wt=Zv(mt+yt,kt,Ot);return Wt===ut?It.from(zt):Gt(Wt)}),qP=(h,j,tt,st)=>kB(h,j,tt,st,(ut,mt,yt,kt,Ot,zt,Gt)=>{const Wt=_2(mt,yt,kt,Ot);return Wt===ut?It.none():Gt(Wt)}),hI=[Jo("selector"),ko("getInitial",It.none),ko("execute",Z2),v0("onEscape"),ko("executeOnMove",!1),ko("allowVertical",!0),ko("allowHorizontal",!0),ko("cycles",!0)],EB=(h,j)=>j.focusManager.get(h).bind(tt=>R_(tt,j.selector)),B8=(h,j,tt)=>EB(h,tt).bind(st=>tt.execute(h,j,st)),$8=(h,j,tt)=>{j.getInitial(h).orThunk(()=>np(h.element,j.selector)).each(st=>{j.focusManager.set(h,st)})},AB=(h,j,tt)=>(tt.cycles?qP:SB)(h,tt.selector,j,-1),G8=(h,j,tt)=>(tt.cycles?qP:SB)(h,tt.selector,j,1),j8=h=>(j,tt,st,ut)=>h(j,tt,st,ut).bind(()=>st.executeOnMove?B8(j,tt,st):It.some(!0)),TB=(h,j,tt)=>tt.onEscape(h,j),IB=(h,j,tt,st)=>{const ut=[...tt.allowHorizontal?Ky:[]].concat(tt.allowVertical?U1:[]),mt=[...tt.allowHorizontal?W2:[]].concat(tt.allowVertical?N_:[]);return[$a(Js(ut),j8(P8(AB,G8))),$a(Js(mt),j8(O8(AB,G8))),$a(Js(vu),B8),$a(Js(up),B8)]},RB=Nt([$a(Js(up),qE),$a(Js(Ku),TB)]);var rK=q2(hI,D1.init,IB,RB,()=>It.some($8));const ZP=(h,j,tt)=>It.from(h[j]).bind(st=>It.from(st[tt]).map(ut=>({rowIndex:j,columnIndex:tt,cell:ut}))),MB=(h,j,tt,st)=>{const mt=h[j].length,yt=_2(tt,st,0,mt-1);return ZP(h,j,yt)},KP=(h,j,tt,st)=>{const ut=_2(tt,st,0,h.length-1),mt=h[ut].length,yt=Zv(j,0,mt-1);return ZP(h,ut,yt)},PB=(h,j,tt,st)=>{const mt=h[j].length,yt=Zv(tt+st,0,mt-1);return ZP(h,j,yt)},X5=(h,j,tt,st)=>{const ut=Zv(tt+st,0,h.length-1),mt=h[ut].length,yt=Zv(j,0,mt-1);return ZP(h,ut,yt)},sK=(h,j,tt)=>MB(h,j,tt,1),OB=(h,j,tt)=>MB(h,j,tt,-1),Iy=(h,j,tt)=>KP(h,tt,j,-1),iK=(h,j,tt)=>KP(h,tt,j,1),DB=(h,j,tt)=>PB(h,j,tt,-1),NB=(h,j,tt)=>PB(h,j,tt,1),aK=(h,j,tt)=>X5(h,tt,j,-1),LB=(h,j,tt)=>X5(h,tt,j,1),FB=[__("selectors",[Jo("row"),Jo("cell")]),ko("cycles",!0),ko("previousSelector",It.none),ko("execute",Z2)],lK=(h,j,tt)=>{j.previousSelector(h).orThunk(()=>{const ut=j.selectors;return np(h.element,ut.cell)}).each(ut=>{j.focusManager.set(h,ut)})},cK=(h,j,tt)=>N0(h.element).bind(st=>tt.execute(h,j,st)),uK=(h,j)=>On(h,tt=>o0(tt,j.selectors.cell)),YP=(h,j)=>(tt,st,ut)=>{const mt=ut.cycles?h:j;return R_(st,ut.selectors.row).bind(yt=>{const kt=o0(yt,ut.selectors.cell);return Jv(kt,st).bind(Ot=>{const zt=o0(tt,ut.selectors.row);return Jv(zt,yt).bind(Gt=>{const Wt=uK(zt,ut);return mt(Wt,Gt,Ot).map(sn=>sn.cell)})})})},U8=YP(OB,DB),zB=YP(sK,NB),dK=YP(Iy,aK),BB=YP(iK,LB),$B=Nt([$a(Js(Ky),P8(U8,zB)),$a(Js(W2),O8(U8,zB)),$a(Js(U1),Y5(dK)),$a(Js(N_),jP(BB)),$a(Js(up.concat(vu)),cK)]),GB=Nt([$a(Js(up),qE)]);var fK=q2(FB,D1.init,$B,GB,()=>It.some(lK));const hK=[Jo("selector"),ko("execute",Z2),ko("moveOnTab",!1)],jB=(h,j,tt)=>tt.focusManager.get(h).bind(st=>tt.execute(h,j,st)),pK=(h,j,tt)=>{np(h.element,j.selector).each(st=>{j.focusManager.set(h,st)})},H8=(h,j,tt)=>qP(h,tt.selector,j,-1),V8=(h,j,tt)=>qP(h,tt.selector,j,1),uS=(h,j,tt,st)=>tt.moveOnTab?UP(H8)(h,j,tt,st):It.none(),UB=(h,j,tt,st)=>tt.moveOnTab?UP(V8)(h,j,tt,st):It.none(),HB=Nt([$a(Js(U1),UP(H8)),$a(Js(N_),UP(V8)),$a(hy([bm,Js(Fl)]),uS),$a(hy([_x,Js(Fl)]),UB),$a(Js(vu),jB),$a(Js(up),jB)]),VB=Nt([$a(Js(up),qE)]);var gK=q2(hK,D1.init,HB,VB,()=>It.some(pK));const pI=[v0("onSpace"),v0("onEnter"),v0("onShiftEnter"),v0("onLeft"),v0("onRight"),v0("onTab"),v0("onShiftTab"),v0("onUp"),v0("onDown"),v0("onEscape"),ko("stopSpaceKeyup",!1),Kl("focusIn")],mK=(h,j,tt)=>[$a(Js(up),tt.onSpace),$a(hy([_x,Js(vu)]),tt.onEnter),$a(hy([bm,Js(vu)]),tt.onShiftEnter),$a(hy([bm,Js(Fl)]),tt.onShiftTab),$a(hy([_x,Js(Fl)]),tt.onTab),$a(Js(U1),tt.onUp),$a(Js(N_),tt.onDown),$a(Js(Ky),tt.onLeft),$a(Js(W2),tt.onRight),$a(Js(up),tt.onSpace)],yK=(h,j,tt)=>[...tt.stopSpaceKeyup?[$a(Js(up),qE)]:[],$a(Js(Ku),tt.onEscape)];var WB=q2(pI,D1.init,mK,yK,h=>h.focusIn);const bK=R8.schema(),vK=WE.schema(),_K=rK.schema(),qB=oK.schema(),W8=fK.schema(),q8=qZ.schema(),xK=gK.schema(),dS=WB.schema();var ZB=Object.freeze({__proto__:null,acyclic:bK,cyclic:vK,flow:_K,flatgrid:qB,matrix:W8,execution:q8,menu:xK,special:dS});const KB=h=>cu(h,"setGridSize"),ys=S3({branchKey:"mode",branches:ZB,name:"keying",active:{events:(h,j)=>h.handler.toEvents(h,j)},apis:{focusIn:(h,j,tt)=>{j.sendFocusIn(j).fold(()=>{h.getSystem().triggerFocus(h.element,h.element)},st=>{st(h,j,tt)})},setGridSize:(h,j,tt,st,ut)=>{KB(tt)?tt.setGridSize(st,ut):console.error("Layout does not support setGridSize")}},state:KZ}),YB=(h,j)=>{r5(()=>{D5(h,j,()=>On(j,h.getSystem().build))},h.element)},gI=(h,j)=>{r5(()=>{eS(h,j,()=>d4(h.element,j,h.getSystem().buildOrPatch))},h.element)},J5=(h,j,tt,st)=>{zT(j);const ut=jC(h.element,tt,st,h.getSystem().buildOrPatch);P5(h,ut),h.syncComponents()},XP=(h,j,tt)=>{const st=h.getSystem().build(tt);DE(h,st,j)},Z8=(h,j,tt,st)=>{bx(j),XP(h,(ut,mt)=>dC(ut,mt,tt),st)},fS=(h,j,tt,st)=>(j.reuseDom?gI:YB)(h,st),hS=(h,j,tt,st)=>{XP(h,Km,st)},wK=(h,j,tt,st)=>{XP(h,sv,st)},CK=(h,j,tt,st)=>{const ut=Q5(h);mn(ut,yt=>Vl(st.element,yt.element)).each(bx)},Q5=(h,j)=>h.components(),Ew=(h,j,tt,st,ut)=>{const mt=Q5(h);return It.from(mt[st]).map(yt=>(ut.fold(()=>bx(yt),kt=>{(j.reuseDom?J5:Z8)(h,yt,st,kt)}),yt))};var kK=Object.freeze({__proto__:null,append:hS,prepend:wK,remove:CK,replaceAt:Ew,replaceBy:(h,j,tt,st,ut)=>{const mt=Q5(h);return wn(mt,st).bind(yt=>Ew(h,j,tt,yt,ut))},set:fS,contents:Q5});const Gs=Fm({fields:[em("reuseDom",!0)],name:"replacing",apis:kK}),JB=(h,j)=>{const tt=yu(j);return Fm({fields:[Jo("enabled")],name:h,active:{events:Nt(tt)}})},Ws=(h,j)=>{const tt=JB(h,j);return{key:h,value:{config:{},me:tt,configAsRaw:Nt({}),initialConfig:{},state:D1}}},JP=(h,j)=>{j.ignore||(mv(h.element),j.onFocus(h))};var EK=Object.freeze({__proto__:null,focus:JP,blur:(h,j)=>{j.ignore||VC(h.element)},isFocused:h=>T2(h.element)}),Y8=Object.freeze({__proto__:null,exhibit:(h,j)=>{const tt=j.ignore?{}:{attributes:{tabindex:"-1"}};return Y0(tt)},events:h=>yu([Qo(P1(),(j,tt)=>{JP(j,h),tt.stop()})].concat(h.stopMousedown?[Qo(gp(),(j,tt)=>{tt.event.prevent()})]:[]))}),QP=[zl("onFocus"),ko("stopMousedown",!1),ko("ignore",!1)];const Ds=Fm({fields:QP,name:"focusing",active:Y8,apis:EK}),AK=h=>({init:()=>{const tt=ls(h);return{get:()=>tt.get(),set:kt=>tt.set(kt),clear:()=>tt.set(h),readState:()=>tt.get()}}}),QB=(h,j,tt)=>{const st=j.aria;st.update(h,st,tt.get())},e$=(h,j,tt)=>{j.toggleClass.each(st=>{tt.get()?Vp(h.element,st):bu(h.element,st)})},mI=(h,j,tt,st)=>{const ut=tt.get();tt.set(st),e$(h,j,tt),QB(h,j,tt),ut!==st&&j.onToggled(h,st)},X8=(h,j,tt)=>{mI(h,j,tt,!tt.get())},TK=(h,j,tt)=>{mI(h,j,tt,!0)},J8=(h,j,tt)=>{mI(h,j,tt,!1)},IK=(h,j,tt)=>tt.get(),t$=(h,j,tt)=>{mI(h,j,tt,j.selected)};var RK=Object.freeze({__proto__:null,onLoad:t$,toggle:X8,isOn:IK,on:TK,off:J8,set:mI}),PK=Object.freeze({__proto__:null,exhibit:()=>Y0({}),events:(h,j)=>{const tt=oL(h,j,X8),st=tw(h,j,t$);return yu(Dn([h.toggleOnExecute?[tt]:[],[st]]))}});const OK=(h,j,tt)=>{Vo(h.element,"aria-pressed",tt),j.syncWithExpanded&&o$(h,j,tt)},n$=(h,j,tt)=>{Vo(h.element,"aria-selected",tt)},eR=(h,j,tt)=>{Vo(h.element,"aria-checked",tt)},o$=(h,j,tt)=>{Vo(h.element,"aria-expanded",tt)};var tR=[ko("selected",!1),Kl("toggleClass"),ko("toggleOnExecute",!0),zl("onToggled"),Eu("aria",{mode:"none"},Sp("mode",{pressed:[ko("syncWithExpanded",!1),qu("update",OK)],checked:[qu("update",eR)],expanded:[qu("update",o$)],selected:[qu("update",n$)],none:[qu("update",Et)]}))];const na=Fm({fields:tR,name:"toggling",active:PK,apis:RK,state:AK(!1)}),Q8=()=>{const h=(j,tt)=>{tt.stop(),Qx(j)};return[Qo(r2(),h),Qo(WA(),h),l2(uv()),l2(gp())]},nR=h=>{const j=tt=>ax((st,ut)=>{tt(st),ut.stop()});return yu(Dn([h.map(j).toArray(),Q8()]))},r$="alloy.item-hover",s$="alloy.item-focus",e6="alloy.item-toggled",i$=h=>{(N0(h.element).isNone()||Ds.isFocused(h))&&(Ds.isFocused(h)||Ds.focus(h),rs(h,r$,{item:h}))},t6=h=>{rs(h,s$,{item:h})},DK=(h,j)=>{rs(h,e6,{item:h,state:j})},a$=Nt(r$),l$=Nt(s$),eO=Nt(e6),n6=h=>h.role.fold(()=>h.toggling.map(j=>j.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Jt),o6=(h,j)=>({aria:{mode:j?"selected":"checked"},...As(h,(tt,st)=>st!=="exclusive"),onToggled:(tt,st)=>{Tt(h.onToggled)&&h.onToggled(tt,st),DK(tt,st)}}),NK=h=>({dom:h.dom,domModification:{...h.domModification,attributes:{role:n6(h),...h.domModification.attributes,"aria-haspopup":h.hasSubmenu,...h.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:vv.augment(h.itemBehaviours,[h.toggling.fold(na.revoke,j=>na.config(o6(j,h.role.exists(tt=>tt==="option")))),Ds.config({ignore:h.ignoreFocus,stopMousedown:h.ignoreFocus,onFocus:j=>{t6(j)}}),ys.config({mode:"execution"}),zr.config({store:{mode:"memory",initialValue:h.data}}),Ws("item-type-events",[...Q8(),Qo(Z0(),i$),Qo(Yx(),Ds.focus)])]),components:h.components,eventOrder:h.eventOrder}),LK=[Jo("data"),Jo("components"),Jo("dom"),ko("hasSubmenu",!1),Kl("toggling"),Kl("role"),vv.field("itemBehaviours",[na,Ds,ys,zr]),ko("ignoreFocus",!1),ko("domModification",{}),qu("builder",NK),ko("eventOrder",{})],FK=h=>({dom:h.dom,components:h.components,events:yu([nE(Yx())])}),zK=[Jo("dom"),Jo("components"),qu("builder",FK)],tO=Nt("item-widget"),nO=Nt([x0({name:"widget",overrides:h=>({behaviours:gr([zr.config({store:{mode:"manual",getValue:j=>h.data,setValue:Et}})])})})]),BK=h=>{const j=NP(tO(),h,nO()),tt=nI(tO(),h,j.internals()),st=mt=>Du(mt,h,"widget").map(yt=>(ys.focusIn(yt),yt)),ut=(mt,yt)=>cS(yt.event.target)?It.none():(h.autofocus&&yt.setSource(mt.element),It.none());return{dom:h.dom,components:tt,domModification:h.domModification,events:yu([ax((mt,yt)=>{st(mt).each(kt=>{yt.stop()})}),Qo(Z0(),i$),Qo(Yx(),(mt,yt)=>{h.autofocus?st(mt):Ds.focus(mt)})]),behaviours:vv.augment(h.widgetBehaviours,[zr.config({store:{mode:"memory",initialValue:h.data}}),Ds.config({ignore:h.ignoreFocus,onFocus:mt=>{t6(mt)}}),ys.config({mode:"special",focusIn:h.autofocus?mt=>{st(mt)}:E3(),onLeft:ut,onRight:ut,onEscape:(mt,yt)=>!Ds.isFocused(mt)&&!h.autofocus?(Ds.focus(mt),It.some(!0)):(h.autofocus&&yt.setSource(mt.element),It.none())})])}},$K=[Jo("uid"),Jo("data"),Jo("components"),Jo("dom"),ko("autofocus",!1),ko("ignoreFocus",!1),vv.field("widgetBehaviours",[zr,Ds,ys]),ko("domModification",{}),jE(nO()),qu("builder",BK)],GK=Sp("type",{widget:$K,item:LK,separator:zK}),jK=(h,j)=>({mode:"flatgrid",selector:"."+h.markers.item,initSize:{numColumns:j.initSize.numColumns,numRows:j.initSize.numRows},focusManager:h.focusManager}),UK=(h,j)=>({mode:"matrix",selectors:{row:j.rowSelector,cell:"."+h.markers.item},previousSelector:j.previousSelector,focusManager:h.focusManager}),HK=(h,j)=>({mode:"menu",selector:"."+h.markers.item,moveOnTab:j.moveOnTab,focusManager:h.focusManager}),c$=Nt([GE({factory:{sketch:h=>{const j=y0("menu.spec item",GK,h);return j.builder(j)}},name:"items",unit:"item",defaults:(h,j)=>Ms(j,"uid")?j:{...j,uid:dE("item")},overrides:(h,j)=>({type:j.type,ignoreFocus:h.fakeFocus,domModification:{classes:[h.markers.item]}})})]),VK=Nt([_g("role"),Jo("value"),Jo("items"),Jo("dom"),Jo("components"),ko("eventOrder",{}),Bm("menuBehaviours",[kr,zr,Ll,ys]),Eu("movement",{mode:"menu",moveOnTab:!0},Sp("mode",{grid:[hx(),qu("config",jK)],matrix:[qu("config",UK),Jo("rowSelector"),ko("previousSelector",It.none)],menu:[ko("moveOnTab",!0),qu("config",HK)]})),fL(),ko("fakeFocus",!1),ko("focusManager",uI()),zl("onHighlight"),zl("onDehighlight"),ko("showMenuRole",!0)]),u$=Nt("alloy.menu-focus"),WK=(h,j)=>{const tt=o0(h.element,'[role="menuitemradio"][aria-checked="true"]');_o(tt,st=>{Vl(st,j.element)||h.getSystem().getByDom(st).each(ut=>{na.off(ut)})})},qK=(h,j,tt,st)=>({uid:h.uid,dom:h.dom,markers:h.markers,behaviours:$m(h.menuBehaviours,[kr.config({highlightClass:h.markers.selectedItem,itemClass:h.markers.item,onHighlight:h.onHighlight,onDehighlight:h.onDehighlight}),zr.config({store:{mode:"memory",initialValue:h.value}}),Ll.config({find:It.some}),ys.config(h.movement.config(h,h.movement))]),events:yu([Qo(l$(),(ut,mt)=>{const yt=mt.event;ut.getSystem().getByDom(yt.target).each(kt=>{kr.highlight(ut,kt),mt.stop(),rs(ut,u$(),{menu:ut,item:kt})})}),Qo(a$(),(ut,mt)=>{const yt=mt.event.item;kr.highlight(ut,yt)}),Qo(eO(),(ut,mt)=>{const{item:yt,state:kt}=mt.event;kt&&Kr(yt.element,"role")==="menuitemradio"&&WK(ut,yt)})]),components:j,eventOrder:h.eventOrder,...h.showMenuRole?{domModification:{attributes:{role:h.role.getOr("menu")}}}:{}}),ZE=d0({name:"Menu",configFields:VK(),partFields:c$(),factory:qK}),KE=h=>as(h,(j,tt)=>({k:j,v:tt})),d$=(h,j,tt,st)=>tr(tt,st).bind(ut=>tr(h,ut).bind(mt=>{const yt=d$(h,j,tt,mt);return It.some([mt].concat(yt))})).getOr([]),ZK=(h,j)=>{const tt={};sr(h,(yt,kt)=>{_o(yt,Ot=>{tt[Ot]=kt})});const st=j,ut=KE(j),mt=vr(ut,(yt,kt)=>[kt].concat(d$(tt,st,ut,kt)));return vr(tt,yt=>tr(mt,yt).getOr([yt]))},YE=()=>{const h=ls({}),j=ls({}),tt=ls({}),st=Wl(),ut=ls({}),mt=()=>{h.set({}),j.set({}),tt.set({}),st.clear()},yt=()=>st.get().isNone(),kt=($o,Cr)=>{j.set({...j.get(),[$o]:{type:"prepared",menu:Cr}})},Ot=($o,Cr,Ur,Ko)=>{st.set($o),h.set(Ur),j.set(Cr),ut.set(Ko);const Vr=ZK(Ko,Ur);tt.set(Vr)},zt=$o=>Zr(h.get(),(Cr,Ur)=>Cr===$o),Gt=($o,Cr,Ur)=>Mn($o).bind(Ko=>zt($o).bind(Vr=>Cr(Vr).map(Dr=>({triggeredMenu:Ko,triggeringItem:Dr,triggeringPath:Ur})))),Wt=($o,Cr)=>{const Ur=lo(jn($o).toArray(),Ko=>Mn(Ko).isSome());return tr(tt.get(),$o).bind(Ko=>{const Vr=Nn(Ur.concat(Ko)),Dr=rn(Vr,(Xr,Il)=>Gt(Xr,Cr,Vr.slice(0,Il+1)).fold(()=>ou(st.get(),Xr)?[]:[It.none()],Ju=>[It.some(Ju)]));return Vs(Dr)})},sn=$o=>tr(h.get(),$o).map(Cr=>{const Ur=tr(tt.get(),$o).getOr([]);return[Cr].concat(Ur)}),cn=$o=>tr(tt.get(),$o).bind(Cr=>Cr.length>1?It.some(Cr.slice(1)):It.none()),xn=$o=>tr(tt.get(),$o),Mn=$o=>vo($o).bind(r6),vo=$o=>tr(j.get(),$o),jn=$o=>tr(h.get(),$o);return{setMenuBuilt:kt,setContents:Ot,expand:sn,refresh:xn,collapse:cn,lookupMenu:vo,lookupItem:jn,otherMenus:$o=>{const Cr=ut.get();return zn(Oo(Cr),$o)},getPrimary:()=>st.get().bind(Mn),getMenus:()=>j.get(),clear:mt,isClear:yt,getTriggeringPath:Wt}},r6=h=>h.type==="prepared"?It.some(h.menu):It.none(),f$={init:YE,extractPreparedMenu:r6},K2=Wr("tiered-menu-item-highlight"),h$=Wr("tiered-menu-item-dehighlight");var Ry;(function(h){h[h.HighlightMenuAndItem=0]="HighlightMenuAndItem",h[h.HighlightJustMenu=1]="HighlightJustMenu",h[h.HighlightNone=2]="HighlightNone"})(Ry||(Ry={}));const H1=(h,j)=>{const tt=Wl(),st=(ur,Pr,zs)=>vr(zs,(Qs,ms)=>{const Hs=()=>ZE.sketch({...Qs,value:ms,markers:h.markers,fakeFocus:h.fakeFocus,onHighlight:(Ru,_u)=>{rs(Ru,K2,{menuComp:Ru,itemComp:_u})},onDehighlight:(Ru,_u)=>{rs(Ru,h$,{menuComp:Ru,itemComp:_u})},focusManager:h.fakeFocus?$P():uI()});return ms===Pr?{type:"prepared",menu:ur.getSystem().build(Hs())}:{type:"notbuilt",nbMenu:Hs}}),ut=f$.init(),mt=ur=>{const Pr=st(ur,h.data.primary,h.data.menus),zs=Ot();return ut.setContents(h.data.primary,Pr,h.data.expansions,zs),ut.getPrimary()},yt=ur=>zr.getValue(ur).value,kt=(ur,Pr,zs)=>wo(Pr,Qs=>{if(!Qs.getSystem().isConnected())return It.none();const ms=kr.getCandidates(Qs);return mn(ms,Hs=>yt(Hs)===zs)}),Ot=ur=>vr(h.data.menus,(Pr,zs)=>rn(Pr.items,Qs=>Qs.type==="separator"?[]:[Qs.data.value])),zt=kr.highlight,Gt=(ur,Pr)=>{zt(ur,Pr),kr.getHighlighted(Pr).orThunk(()=>kr.getFirst(Pr)).each(zs=>{h.fakeFocus?kr.highlight(Pr,zs):KA(ur,zs.element,Yx())})},Wt=(ur,Pr)=>xu(On(Pr,zs=>ur.lookupMenu(zs).bind(Qs=>Qs.type==="prepared"?It.some(Qs.menu):It.none()))),sn=(ur,Pr,zs)=>{const Qs=Wt(Pr,Pr.otherMenus(zs));_o(Qs,ms=>{N1(ms.element,[h.markers.backgroundMenu]),h.stayInDom||Gs.remove(ur,ms)})},cn=ur=>tt.get().getOrThunk(()=>{const Pr={},zs=o0(ur.element,`.${h.markers.item}`),Qs=lo(zs,ms=>Kr(ms,"aria-haspopup")==="true");return _o(Qs,ms=>{ur.getSystem().getByDom(ms).each(Hs=>{const Ru=yt(Hs);Pr[Ru]=Hs})}),tt.set(Pr),Pr}),xn=(ur,Pr)=>{const zs=cn(ur);sr(zs,(Qs,ms)=>{const Hs=Wn(Pr,ms);Vo(Qs.element,"aria-expanded",Hs)})},Mn=(ur,Pr,zs)=>It.from(zs[0]).bind(Qs=>Pr.lookupMenu(Qs).bind(ms=>{if(ms.type==="notbuilt")return It.none();{const Hs=ms.menu,Ru=Wt(Pr,zs.slice(1));return _o(Ru,_u=>{Vp(_u.element,h.markers.backgroundMenu)}),Fn(Hs.element)||Gs.append(ur,Uy(Hs)),N1(Hs.element,[h.markers.backgroundMenu]),Gt(ur,Hs),sn(ur,Pr,zs),It.some(Hs)}}));let vo;(function(ur){ur[ur.HighlightSubmenu=0]="HighlightSubmenu",ur[ur.HighlightParent=1]="HighlightParent"})(vo||(vo={}));const jn=(ur,Pr,zs)=>{if(zs.type==="notbuilt"){const Qs=ur.getSystem().build(zs.nbMenu());return ut.setMenuBuilt(Pr,Qs),Qs}else return zs.menu},po=(ur,Pr,zs=vo.HighlightSubmenu)=>{if(Pr.hasConfigured(Rs)&&Rs.isDisabled(Pr))return It.some(Pr);{const Qs=yt(Pr);return ut.expand(Qs).bind(ms=>(xn(ur,ms),It.from(ms[0]).bind(Hs=>ut.lookupMenu(Hs).bind(Ru=>{const _u=jn(ur,Hs,Ru);return Fn(_u.element)||Gs.append(ur,Uy(_u)),h.onOpenSubmenu(ur,Pr,_u,Nn(ms)),zs===vo.HighlightSubmenu?(kr.highlightFirst(_u),Mn(ur,ut,ms)):(kr.dehighlightAll(_u),It.some(Pr))}))))}},yo=(ur,Pr)=>{const zs=yt(Pr);return ut.collapse(zs).bind(Qs=>(xn(ur,Qs),Mn(ur,ut,Qs).map(ms=>(h.onCollapseMenu(ur,Pr,ms),ms))))},zo=(ur,Pr)=>{const zs=yt(Pr);return ut.refresh(zs).bind(Qs=>(xn(ur,Qs),Mn(ur,ut,Qs)))},$o=(ur,Pr)=>cS(Pr.element)?It.none():po(ur,Pr,vo.HighlightSubmenu),Cr=(ur,Pr)=>cS(Pr.element)?It.none():yo(ur,Pr),Ur=(ur,Pr)=>yo(ur,Pr).orThunk(()=>h.onEscape(ur,Pr).map(()=>ur)),Ko=ur=>(Pr,zs)=>R_(zs.getSource(),`.${h.markers.item}`).bind(Qs=>Pr.getSystem().getByDom(Qs).toOptional().bind(ms=>ur(Pr,ms).map(fn))),Vr=yu([Qo(u$(),(ur,Pr)=>{const zs=Pr.event.item;ut.lookupItem(yt(zs)).each(()=>{const Qs=Pr.event.menu;kr.highlight(ur,Qs);const ms=yt(Pr.event.item);ut.refresh(ms).each(Hs=>sn(ur,ut,Hs))})}),ax((ur,Pr)=>{const zs=Pr.event.target;ur.getSystem().getByDom(zs).each(Qs=>{yt(Qs).indexOf("collapse-item")===0&&yo(ur,Qs),po(ur,Qs,vo.HighlightSubmenu).fold(()=>{h.onExecute(ur,Qs)},Et)})}),ep((ur,Pr)=>{mt(ur).each(zs=>{Gs.append(ur,Uy(zs)),h.onOpenMenu(ur,zs),h.highlightOnOpen===Ry.HighlightMenuAndItem?Gt(ur,zs):h.highlightOnOpen===Ry.HighlightJustMenu&&zt(ur,zs)})}),Qo(K2,(ur,Pr)=>{h.onHighlightItem(ur,Pr.event.menuComp,Pr.event.itemComp)}),Qo(h$,(ur,Pr)=>{h.onDehighlightItem(ur,Pr.event.menuComp,Pr.event.itemComp)}),...h.navigateOnHover?[Qo(a$(),(ur,Pr)=>{const zs=Pr.event.item;zo(ur,zs),po(ur,zs,vo.HighlightParent),h.onHover(ur,zs)})]:[]]),Dr=ur=>kr.getHighlighted(ur).bind(kr.getHighlighted),Xr=ur=>{Dr(ur).each(Pr=>{yo(ur,Pr)})},Il=ur=>{ut.getPrimary().each(Pr=>{Gt(ur,Pr)})},Ju=ur=>It.from(ur.components()[0]).filter(Pr=>Kr(Pr.element,"role")==="menu"),ns={collapseMenu:Xr,highlightPrimary:Il,repositionMenus:ur=>{ut.getPrimary().bind(zs=>Dr(ur).bind(Qs=>{const ms=yt(Qs),Hs=Ml(ut.getMenus()),Ru=xu(On(Hs,f$.extractPreparedMenu));return ut.getTriggeringPath(ms,_u=>kt(ur,Ru,_u))}).map(Qs=>({primary:zs,triggeringPath:Qs}))).fold(()=>{Ju(ur).each(zs=>{h.onRepositionMenu(ur,zs,[])})},({primary:zs,triggeringPath:Qs})=>{h.onRepositionMenu(ur,zs,Qs)})}};return{uid:h.uid,dom:h.dom,markers:h.markers,behaviours:$m(h.tmenuBehaviours,[ys.config({mode:"special",onRight:Ko($o),onLeft:Ko(Cr),onEscape:Ko(Ur),focusIn:(ur,Pr)=>{ut.getPrimary().each(zs=>{KA(ur,zs.element,Yx())})}}),kr.config({highlightClass:h.markers.selectedMenu,itemClass:h.markers.menu}),Ll.config({find:ur=>kr.getHighlighted(ur)}),Gs.config({})]),eventOrder:h.eventOrder,apis:ns,events:Vr}},p$=Nt("collapse-item"),g$=(h,j,tt)=>({primary:h,menus:j,expansions:tt}),m$=(h,j)=>({primary:h,menus:Ps(h,j),expansions:{}}),KK=h=>({value:Wr(p$()),meta:{text:h}}),Aw=Ty({name:"TieredMenu",configFields:[zC("onExecute"),zC("onEscape"),b2("onOpenMenu"),b2("onOpenSubmenu"),zl("onRepositionMenu"),zl("onCollapseMenu"),ko("highlightOnOpen",Ry.HighlightMenuAndItem),__("data",[Jo("primary"),Jo("menus"),Jo("expansions")]),ko("fakeFocus",!1),zl("onHighlightItem"),zl("onDehighlightItem"),zl("onHover"),I_(),Jo("dom"),ko("navigateOnHover",!0),ko("stayInDom",!1),Bm("tmenuBehaviours",[ys,kr,Ll,Gs]),ko("eventOrder",{})],apis:{collapseMenu:(h,j)=>{h.collapseMenu(j)},highlightPrimary:(h,j)=>{h.highlightPrimary(j)},repositionMenus:(h,j)=>{h.repositionMenus(j)}},factory:H1,extraApis:{tieredData:g$,singleData:m$,collapseItem:KK}}),y$=(h,j,tt,st,ut)=>{const mt=()=>h.lazySink(j),yt=st.type==="horizontal"?{layouts:{onLtr:()=>bE(),onRtl:()=>xT()}}:{},kt=zt=>zt.length===2,Ot=zt=>kt(zt)?yt:{};return Aw.sketch({dom:{tag:"div"},data:st.data,markers:st.menu.markers,highlightOnOpen:st.menu.highlightOnOpen,fakeFocus:st.menu.fakeFocus,onEscape:()=>(Ul.close(j),h.onEscape.map(zt=>zt(j)),It.some(!0)),onExecute:()=>It.some(!0),onOpenMenu:(zt,Gt)=>{s0.positionWithinBounds(mt().getOrDie(),Gt,tt,ut())},onOpenSubmenu:(zt,Gt,Wt,sn)=>{const cn=mt().getOrDie();s0.position(cn,Wt,{anchor:{type:"submenu",item:Gt,...Ot(sn)}})},onRepositionMenu:(zt,Gt,Wt)=>{const sn=mt().getOrDie();s0.positionWithinBounds(sn,Gt,tt,ut()),_o(Wt,cn=>{const xn=Ot(cn.triggeringPath);s0.position(sn,cn.triggeredMenu,{anchor:{type:"submenu",item:cn.triggeringItem,...xn}})})}})},YK=(h,j)=>{const tt=(sn,cn)=>h.getRelated(sn).exists(Mn=>cw(Mn,cn)),st=(sn,cn)=>{Ul.setContent(sn,cn)},ut=(sn,cn,xn)=>{const Mn=It.none;mt(sn,cn,xn,Mn)},mt=(sn,cn,xn,Mn)=>{const vo=h.lazySink(sn).getOrDie();Ul.openWhileCloaked(sn,cn,()=>s0.positionWithinBounds(vo,sn,xn,Mn())),zr.setValue(sn,It.some({mode:"position",config:xn,getBounds:Mn}))},yt=(sn,cn,xn)=>{kt(sn,cn,xn,It.none)},kt=(sn,cn,xn,Mn)=>{const vo=y$(h,sn,cn,xn,Mn);Ul.open(sn,vo),zr.setValue(sn,It.some({mode:"menu",menu:vo}))},Ot=sn=>{Ul.isOpen(sn)&&(zr.setValue(sn,It.none()),Ul.close(sn))},zt=sn=>Ul.getState(sn),Gt=sn=>{Ul.isOpen(sn)&&zr.getValue(sn).each(cn=>{switch(cn.mode){case"menu":Ul.getState(sn).each(Aw.repositionMenus);break;case"position":const xn=h.lazySink(sn).getOrDie();s0.positionWithinBounds(xn,sn,cn.config,cn.getBounds());break}})},Wt={setContent:st,showAt:ut,showWithinBounds:mt,showMenuAt:yt,showMenuWithinBounds:kt,hide:Ot,getContent:zt,reposition:Gt,isOpen:Ul.isOpen};return{uid:h.uid,dom:h.dom,behaviours:$m(h.inlineBehaviours,[Ul.config({isPartOf:(sn,cn,xn)=>cw(cn,xn)||tt(sn,xn),getAttachPoint:sn=>h.lazySink(sn).getOrDie(),onOpen:sn=>{h.onShow(sn)},onClose:sn=>{h.onHide(sn)}}),zr.config({store:{mode:"memory",initialValue:It.none()}}),ky.config({channels:{...FE({isExtraPart:j.isExtraPart,...h.fireDismissalEventInstead.map(sn=>({fireEventInstead:{event:sn.event}})).getOr({})}),...zE({...h.fireRepositionEventInstead.map(sn=>({fireEventInstead:{event:sn.event}})).getOr({}),doReposition:Gt})}})]),eventOrder:h.eventOrder,apis:Wt}},vp=Ty({name:"InlineView",configFields:[Jo("lazySink"),zl("onShow"),zl("onHide"),cv("onEscape"),Bm("inlineBehaviours",[Ul,zr,ky]),hm("fireDismissalEventInstead",[ko("event",jy())]),hm("fireRepositionEventInstead",[ko("event",eE())]),ko("getRelated",It.none),ko("isExtraPart",hn),ko("eventOrder",It.none)],factory:YK,apis:{showAt:(h,j,tt,st)=>{h.showAt(j,tt,st)},showWithinBounds:(h,j,tt,st,ut)=>{h.showWithinBounds(j,tt,st,ut)},showMenuAt:(h,j,tt,st)=>{h.showMenuAt(j,tt,st)},showMenuWithinBounds:(h,j,tt,st,ut)=>{h.showMenuWithinBounds(j,tt,st,ut)},hide:(h,j)=>{h.hide(j)},isOpen:(h,j)=>h.isOpen(j),getContent:(h,j)=>h.getContent(j),setContent:(h,j,tt)=>{h.setContent(j,tt)},reposition:(h,j)=>{h.reposition(j)}}});var XE=tinymce.util.Tools.resolve("tinymce.util.Delay"),pS=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),b$=tinymce.util.Tools.resolve("tinymce.EditorManager"),JE=tinymce.util.Tools.resolve("tinymce.Env"),Qv;(function(h){h.default="wrap",h.floating="floating",h.sliding="sliding",h.scrolling="scrolling"})(Qv||(Qv={}));var oR;(function(h){h.auto="auto",h.top="top",h.bottom="bottom"})(oR||(oR={}));const Iu=h=>j=>j.options.get(h),yI=h=>j=>It.from(h(j)),v$=h=>{const j=JE.deviceType.isPhone(),tt=JE.deviceType.isTablet()||j,st=h.options.register,ut=yt=>_e(yt)||yt===!1,mt=yt=>_e(yt)||Rt(yt);st("skin",{processor:yt=>_e(yt)||yt===!1,default:"oxide"}),st("skin_url",{processor:"string"}),st("height",{processor:mt,default:Math.max(h.getElement().offsetHeight,400)}),st("width",{processor:mt,default:pS.DOM.getStyle(h.getElement(),"width")}),st("min_height",{processor:"number",default:100}),st("min_width",{processor:"number"}),st("max_height",{processor:"number"}),st("max_width",{processor:"number"}),st("style_formats",{processor:"object[]"}),st("style_formats_merge",{processor:"boolean",default:!1}),st("style_formats_autohide",{processor:"boolean",default:!1}),st("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),st("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),st("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),st("font_size_input_default_unit",{processor:"string",default:"pt"}),st("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),st("content_langs",{processor:"object[]"}),st("removed_menuitems",{processor:"string",default:""}),st("menubar",{processor:yt=>_e(yt)||pt(yt),default:!j}),st("menu",{processor:"object",default:{}}),st("toolbar",{processor:yt=>pt(yt)||_e(yt)||ct(yt)?{value:yt,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),no(9,yt=>{st("toolbar"+(yt+1),{processor:"string"})}),st("toolbar_mode",{processor:"string",default:tt?"scrolling":"floating"}),st("toolbar_groups",{processor:"object",default:{}}),st("toolbar_location",{processor:"string",default:oR.auto}),st("toolbar_persist",{processor:"boolean",default:!1}),st("toolbar_sticky",{processor:"boolean",default:h.inline}),st("toolbar_sticky_offset",{processor:"number",default:0}),st("fixed_toolbar_container",{processor:"string",default:""}),st("fixed_toolbar_container_target",{processor:"object"}),st("ui_mode",{processor:"string",default:"combined"}),st("file_picker_callback",{processor:"function"}),st("file_picker_validator_handler",{processor:"function"}),st("file_picker_types",{processor:"string"}),st("typeahead_urls",{processor:"boolean",default:!0}),st("anchor_top",{processor:ut,default:"#top"}),st("anchor_bottom",{processor:ut,default:"#bottom"}),st("draggable_modal",{processor:"boolean",default:!1}),st("statusbar",{processor:"boolean",default:!0}),st("elementpath",{processor:"boolean",default:!0}),st("branding",{processor:"boolean",default:!0}),st("promotion",{processor:"boolean",default:!0}),st("resize",{processor:yt=>yt==="both"||pt(yt),default:!JE.deviceType.isTouch()}),st("sidebar_show",{processor:"string"}),st("help_accessibility",{processor:"boolean",default:h.hasPlugin("help")}),st("default_font_stack",{processor:"string[]",default:[]})},_$=Iu("readonly"),s6=Iu("height"),rR=Iu("width"),i6=yI(Iu("min_width")),QE=yI(Iu("min_height")),eA=yI(Iu("max_width")),oO=yI(Iu("max_height")),a6=yI(Iu("style_formats")),x$=Iu("style_formats_merge"),w$=Iu("style_formats_autohide"),C$=Iu("content_langs"),k$=Iu("removed_menuitems"),gS=Iu("toolbar_mode"),l6=Iu("toolbar_groups"),rO=Iu("toolbar_location"),c6=Iu("fixed_toolbar_container"),XK=Iu("fixed_toolbar_container_target"),u6=Iu("toolbar_persist"),S$=Iu("toolbar_sticky_offset"),E$=Iu("menubar"),sO=Iu("toolbar"),d6=Iu("file_picker_callback"),A$=Iu("file_picker_validator_handler"),T$=Iu("font_size_input_default_unit"),iO=Iu("file_picker_types"),f6=Iu("typeahead_urls"),h6=Iu("anchor_top"),I$=Iu("anchor_bottom"),aO=Iu("draggable_modal"),R$=Iu("statusbar"),M$=Iu("elementpath"),p6=Iu("branding"),P$=Iu("resize"),O$=Iu("paste_as_text"),g6=Iu("sidebar_show"),lO=Iu("promotion"),D$=Iu("help_accessibility"),sR=Iu("default_font_stack"),m6=h=>h.options.get("skin")===!1,cO=h=>h.options.get("menubar")!==!1,y6=h=>{const j=h.options.get("skin_url");if(m6(h))return j;if(j)return h.documentBaseURI.toAbsolute(j);{const tt=h.options.get("skin");return b$.baseURL+"/skins/ui/"+tt}},uO=h=>It.from(h.options.get("skin_url")),N$=h=>h.options.get("line_height_formats").split(" "),dO=h=>{const j=sO(h),tt=_e(j),st=ct(j)&&j.length>0;return!iR(h)&&(st||tt||j===!0)},fO=h=>{const j=no(9,st=>h.options.get("toolbar"+(st+1))),tt=lo(j,_e);return Jr(tt.length>0,tt)},iR=h=>fO(h).fold(()=>{const j=sO(h);return Mt(j,_e)&&j.length>0},fn),b6=h=>rO(h)===oR.bottom,hO=h=>{var j;if(!h.inline)return It.none();const tt=(j=c6(h))!==null&&j!==void 0?j:"";if(tt.length>0)return np(fo(),tt);const st=XK(h);return wt(st)?It.some(ro.fromDom(st)):It.none()},L_=h=>h.inline&&hO(h).isSome(),v6=h=>hO(h).getOrThunk(()=>Rm(hp(ro.fromDom(h.getElement())))),_6=h=>h.inline&&!cO(h)&&!dO(h)&&!iR(h),mS=h=>(h.options.get("toolbar_sticky")||h.inline)&&!L_(h)&&!_6(h),Y2=h=>!L_(h)&&h.options.get("ui_mode")==="split",L$=h=>{const j=h.options.get("menu");return vr(j,tt=>({...tt,items:tt.items}))};var JK=Object.freeze({__proto__:null,get ToolbarMode(){return Qv},get ToolbarLocation(){return oR},register:v$,getSkinUrl:y6,getSkinUrlOption:uO,isReadOnly:_$,isSkinDisabled:m6,getHeightOption:s6,getWidthOption:rR,getMinWidthOption:i6,getMinHeightOption:QE,getMaxWidthOption:eA,getMaxHeightOption:oO,getUserStyleFormats:a6,shouldMergeStyleFormats:x$,shouldAutoHideStyleFormats:w$,getLineHeightFormats:N$,getContentLanguages:C$,getRemovedMenuItems:k$,isMenubarEnabled:cO,isMultipleToolbars:iR,isToolbarEnabled:dO,isToolbarPersist:u6,getMultipleToolbarsOption:fO,getUiContainer:v6,useFixedContainer:L_,isSplitUiMode:Y2,getToolbarMode:gS,isDraggableModal:aO,isDistractionFree:_6,isStickyToolbar:mS,getStickyToolbarOffset:S$,getToolbarLocation:rO,isToolbarLocationBottom:b6,getToolbarGroups:l6,getMenus:L$,getMenubar:E$,getToolbar:sO,getFilePickerCallback:d6,getFilePickerTypes:iO,useTypeaheadUrls:f6,getAnchorTop:h6,getAnchorBottom:I$,getFilePickerValidatorHandler:A$,getFontSizeInputDefaultUnit:T$,useStatusBar:R$,useElementPath:M$,promotionEnabled:lO,useBranding:p6,getResize:P$,getPasteAsText:O$,getSidebarShow:g6,useHelpAccessibility:D$,getDefaultFontStack:sR});const F$=["visible","hidden","clip"],z$=h=>Au(h).length>0&&!Wn(F$,h),x6=h=>{if(sm(h)){const j=ru(h,"overflow-x"),tt=ru(h,"overflow-y");return z$(j)||z$(tt)}else return!1},w6=h=>h.plugins.fullscreen&&h.plugins.fullscreen.isFullscreen(),C6=(h,j)=>{const tt=JC(j,x6),st=tt.length===0?Xp(j).map(Ny).map(ut=>JC(ut,x6)).getOr([]):tt;return bo(st).map(ut=>({element:ut,others:st.slice(1),isFullscreen:()=>w6(h)}))},yS=(h,j)=>Y2(h)?C6(h,j):It.none(),bS=h=>{const j=[...On(h.others,_d),zp()];return h.isFullscreen()?zp():Hw(_d(h.element),j)},Sm=Ty({name:"Button",factory:h=>{const j=nR(h.action),tt=h.dom.tag,st=mt=>tr(h.dom,"attributes").bind(yt=>tr(yt,mt)),ut=()=>{if(tt==="button"){const mt=st("type").getOr("button"),yt=st("role").map(kt=>({role:kt})).getOr({});return{type:mt,...yt}}else return{role:h.role.getOr(st("role").getOr("button"))}};return{uid:h.uid,dom:h.dom,components:h.components,events:j,behaviours:vv.augment(h.buttonBehaviours,[Ds.config({}),ys.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:ut()},eventOrder:h.eventOrder}},configFields:[ko("uid",void 0),Jo("dom"),ko("components",[]),vv.field("buttonBehaviours",[Ds,ys]),Kl("action"),Kl("role"),ko("eventOrder",{})]}),QK=h=>{const j=h.dom.attributes!==void 0?h.dom.attributes:[];return mo(j,(tt,st)=>st.name==="class"?tt:{...tt,[st.name]:st.value},{})},eY=h=>Array.prototype.slice.call(h.dom.classList,0),xx=h=>{const j=ro.fromHtml(h),tt=Im(j),st=QK(j),ut=eY(j),mt=tt.length===0?{}:{innerHtml:dx(j)};return{tag:Xl(j),classes:ut,attributes:st,...mt}},nu=h=>{const j=v8(h)&&cu(h,"uid")?h.uid:dE("memento");return{get:mt=>mt.getSystem().getByUid(j).getOrDie(),getOpt:mt=>mt.getSystem().getByUid(j).toOptional(),asSpec:()=>({...h,uid:j})}};var k6=Object.freeze({__proto__:null,exhibit:(h,j)=>Y0({attributes:Ys([{key:j.tabAttr,value:"true"}])})}),tY=[ko("tabAttr","data-alloy-tabstop")];const op=Fm({fields:tY,name:"tabstopping",active:k6}),pO=Wr("tooltip.exclusive"),aR=Wr("tooltip.show"),lR=Wr("tooltip.hide"),cR=Wr("tooltip.immediateHide"),uR=Wr("tooltip.immediateShow"),B$=(h,j,tt)=>{h.getSystem().broadcastOn([pO],{})};var nY=Object.freeze({__proto__:null,hideAllExclusive:B$,immediateOpenClose:(h,j,tt,st)=>wl(h,st?uR:cR),isEnabled:(h,j,tt)=>tt.isEnabled(),setComponents:(h,j,tt,st)=>{tt.getTooltip().each(ut=>{ut.getSystem().isConnected()&&Gs.set(ut,st)})},setEnabled:(h,j,tt,st)=>tt.setEnabled(st)}),oY=Object.freeze({__proto__:null,events:(h,j)=>{const tt=yt=>{j.getTooltip().each(kt=>{kt.getSystem().isConnected()&&(bx(kt),h.onHide(yt,kt),j.clearTooltip())}),j.clearTimer()},st=yt=>{if(!j.isShowing()&&j.isEnabled()){B$(yt);const kt=h.lazySink(yt).getOrDie(),Ot=yt.getSystem().build({dom:h.tooltipDom,components:h.tooltipComponents,events:yu(h.mode==="normal"?[Qo(Z0(),zt=>{wl(yt,aR)}),Qo(xC(),zt=>{wl(yt,lR)})]:[]),behaviours:gr([Gs.config({})])});j.setTooltip(Ot),yx(kt,Ot),h.onShow(yt,Ot),s0.position(kt,Ot,{anchor:h.anchor(yt)})}},ut=yt=>{j.getTooltip().each(kt=>{const Ot=h.lazySink(yt).getOrDie();s0.position(Ot,kt,{anchor:h.anchor(yt)})})},mt=()=>{switch(h.mode){case"normal":return[Qo(K0(),yt=>{wl(yt,uR)}),Qo(s2(),yt=>{wl(yt,cR)}),Qo(Z0(),yt=>{wl(yt,aR)}),Qo(xC(),yt=>{wl(yt,lR)})];case"follow-highlight":return[Qo(y3(),(yt,kt)=>{wl(yt,aR)}),Qo(kC(),yt=>{wl(yt,lR)})];case"children-normal":return[Qo(K0(),(yt,kt)=>{N0(yt.element).each(Ot=>{dp(kt.event.target,"[data-mce-tooltip]")&&j.getTooltip().fold(()=>{wl(yt,uR)},zt=>{j.isShowing()&&(h.onShow(yt,zt),ut(yt))})})}),Qo(s2(),yt=>{N0(yt.element).fold(()=>{wl(yt,cR)},Et)}),Qo(Z0(),yt=>{np(yt.element,"[data-mce-tooltip]:hover").each(kt=>{j.getTooltip().fold(()=>{wl(yt,aR)},Ot=>{j.isShowing()&&(h.onShow(yt,Ot),ut(yt))})})}),Qo(xC(),yt=>{np(yt.element,"[data-mce-tooltip]:hover").fold(()=>{wl(yt,lR)},Et)})];default:return[Qo(K0(),(yt,kt)=>{N0(yt.element).each(Ot=>{dp(kt.event.target,"[data-mce-tooltip]")&&j.getTooltip().fold(()=>{wl(yt,uR)},zt=>{j.isShowing()&&(h.onShow(yt,zt),ut(yt))})})}),Qo(s2(),yt=>{N0(yt.element).fold(()=>{wl(yt,cR)},Et)})]}};return yu(Dn([[jM(yt=>{h.onSetup(yt)}),Qo(aR,yt=>{j.resetTimer(()=>{st(yt)},h.delayForShow())}),Qo(lR,yt=>{j.resetTimer(()=>{tt(yt)},h.delayForHide())}),Qo(uR,yt=>{j.resetTimer(()=>{st(yt)},0)}),Qo(cR,yt=>{j.resetTimer(()=>{tt(yt)},0)}),Qo(O1(),(yt,kt)=>{const Ot=kt;Ot.universal||Wn(Ot.channels,pO)&&tt(yt)}),S_(yt=>{tt(yt)})],mt()]))}}),S6=[Jo("lazySink"),Jo("tooltipDom"),ko("exclusive",!0),ko("tooltipComponents",[]),Wu("delayForShow",Nt(300)),Wu("delayForHide",Nt(300)),Wu("onSetup",Et),wm("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),ko("anchor",h=>({type:"hotspot",hotspot:h,layouts:{onLtr:Nt([tm,hu,gm,n0,mm,ym]),onRtl:Nt([tm,hu,gm,n0,mm,ym])},bubble:Xv(0,-2,{})})),zl("onHide"),zl("onShow")],rY=Object.freeze({__proto__:null,init:()=>{const h=ls(!0),j=Wl(),tt=Wl(),st=()=>{j.on(clearTimeout)},ut=(yt,kt)=>{st(),j.set(setTimeout(yt,kt))},mt=Nt("not-implemented");return O0({getTooltip:tt.get,isShowing:tt.isSet,setTooltip:tt.set,clearTooltip:tt.clear,clearTimer:st,resetTimer:ut,readState:mt,isEnabled:()=>h.get(),setEnabled:yt=>h.set(yt)})}});const Mp=Fm({fields:S6,name:"tooltipping",active:oY,state:rY,apis:nY});/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:E6,setPrototypeOf:$$,isFrozen:sY,getPrototypeOf:iY,getOwnPropertyDescriptor:aY}=Object;let{freeze:wv,seal:F_,create:gO}=Object,{apply:A6,construct:T6}=typeof Reflect<"u"&&Reflect;wv||(wv=function(j){return j}),F_||(F_=function(j){return j}),A6||(A6=function(j,tt,st){return j.apply(tt,st)}),T6||(T6=function(j,tt){return new j(...tt)});const mO=V1(Array.prototype.forEach),G$=V1(Array.prototype.pop),dR=V1(Array.prototype.push),yO=V1(String.prototype.toLowerCase),I6=V1(String.prototype.toString),j$=V1(String.prototype.match),fR=V1(String.prototype.replace),lY=V1(String.prototype.indexOf),cY=V1(String.prototype.trim),wx=V1(Object.prototype.hasOwnProperty),Cv=V1(RegExp.prototype.test),vS=R6(TypeError);function V1(h){return function(j){for(var tt=arguments.length,st=new Array(tt>1?tt-1:0),ut=1;ut<tt;ut++)st[ut-1]=arguments[ut];return A6(h,j,st)}}function R6(h){return function(){for(var j=arguments.length,tt=new Array(j),st=0;st<j;st++)tt[st]=arguments[st];return T6(h,tt)}}function Yu(h,j){let tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yO;$$&&$$(h,null);let st=j.length;for(;st--;){let ut=j[st];if(typeof ut=="string"){const mt=tt(ut);mt!==ut&&(sY(j)||(j[st]=mt),ut=mt)}h[ut]=!0}return h}function uY(h){for(let j=0;j<h.length;j++)wx(h,j)||(h[j]=null);return h}function tA(h){const j=gO(null);for(const[tt,st]of E6(h))wx(h,tt)&&(Array.isArray(st)?j[tt]=uY(st):st&&typeof st=="object"&&st.constructor===Object?j[tt]=tA(st):j[tt]=st);return j}function bI(h,j){for(;h!==null;){const st=aY(h,j);if(st){if(st.get)return V1(st.get);if(typeof st.value=="function")return V1(st.value)}h=iY(h)}function tt(){return null}return tt}const U$=wv(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),hR=wv(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),pR=wv(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),H$=wv(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),gR=wv(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),bO=wv(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),M6=wv(["#text"]),Cx=wv(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),mR=wv(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),V$=wv(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),vO=wv(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),dY=F_(/\{\{[\w\W]*|[\w\W]*\}\}/gm),fY=F_(/<%[\w\W]*|[\w\W]*%>/gm),yR=F_(/\${[\w\W]*}/gm),hY=F_(/^data-[\-\w.\u00B7-\uFFFF]/),W$=F_(/^aria-[\-\w]+$/),_O=F_(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),pY=F_(/^(?:\w+script|data):/i),P6=F_(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),xO=F_(/^html$/i),gY=F_(/^[a-z][.\w]*(-[.\w]+)+$/i);var O6=Object.freeze({__proto__:null,MUSTACHE_EXPR:dY,ERB_EXPR:fY,TMPLIT_EXPR:yR,DATA_ATTR:hY,ARIA_ATTR:W$,IS_ALLOWED_URI:_O,IS_SCRIPT_OR_DATA:pY,ATTR_WHITESPACE:P6,DOCTYPE_NAME:xO,CUSTOM_ELEMENT:gY});const vI={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},mY=function(){return typeof window>"u"?null:window},q$=function(j,tt){if(typeof j!="object"||typeof j.createPolicy!="function")return null;let st=null;const ut="data-tt-policy-suffix";tt&&tt.hasAttribute(ut)&&(st=tt.getAttribute(ut));const mt="dompurify"+(st?"#"+st:"");try{return j.createPolicy(mt,{createHTML(yt){return yt},createScriptURL(yt){return yt}})}catch{return console.warn("TrustedTypes policy "+mt+" could not be created."),null}};function D6(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mY();const j=Bl=>D6(Bl);if(j.version="3.1.7",j.removed=[],!h||!h.document||h.document.nodeType!==vI.document)return j.isSupported=!1,j;let{document:tt}=h;const st=tt,ut=st.currentScript,{DocumentFragment:mt,HTMLTemplateElement:yt,Node:kt,Element:Ot,NodeFilter:zt,NamedNodeMap:Gt=h.NamedNodeMap||h.MozNamedAttrMap,HTMLFormElement:Wt,DOMParser:sn,trustedTypes:cn}=h,xn=Ot.prototype,Mn=bI(xn,"cloneNode"),vo=bI(xn,"remove"),jn=bI(xn,"nextSibling"),po=bI(xn,"childNodes"),yo=bI(xn,"parentNode");if(typeof yt=="function"){const Bl=tt.createElement("template");Bl.content&&Bl.content.ownerDocument&&(tt=Bl.content.ownerDocument)}let zo,$o="";const{implementation:Cr,createNodeIterator:Ur,createDocumentFragment:Ko,getElementsByTagName:Vr}=tt,{importNode:Dr}=st;let Xr={};j.isSupported=typeof E6=="function"&&typeof yo=="function"&&Cr&&Cr.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Il,ERB_EXPR:Ju,TMPLIT_EXPR:tu,DATA_ATTR:ns,ARIA_ATTR:ur,IS_SCRIPT_OR_DATA:Pr,ATTR_WHITESPACE:zs,CUSTOM_ELEMENT:Qs}=O6;let{IS_ALLOWED_URI:ms}=O6,Hs=null;const Ru=Yu({},[...U$,...hR,...pR,...gR,...M6]);let _u=null;const ev=Yu({},[...Cx,...mR,...V$,...vO]);let xp=Object.seal(gO(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),c1=null,G0=null,u1=!0,d1=!0,W_=!1,AM=!0,Lw=!1,$z=!0,BA=!1,Gz=!1,Hse=!1,LN=!1,$Z=!1,GZ=!1,vae=!0,_ae=!1;const lle="user-content-";let Vse=!0,jz=!1,FN={},zN=null;const xae=Yu({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let wae=null;const Cae=Yu({},["audio","video","img","source","image","track"]);let Wse=null;const kae=Yu({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),jZ="http://www.w3.org/1998/Math/MathML",UZ="http://www.w3.org/2000/svg",$A="http://www.w3.org/1999/xhtml";let BN=$A,qse=!1,Zse=null;const cle=Yu({},[jZ,UZ,$A],I6);let Uz=null;const ule=["application/xhtml+xml","text/html"],dle="text/html";let tv=null,$N=null;const fle=tt.createElement("form"),Sae=function(Bo){return Bo instanceof RegExp||Bo instanceof Function},Kse=function(){let Bo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!($N&&$N===Bo)){if((!Bo||typeof Bo!="object")&&(Bo={}),Bo=tA(Bo),Uz=ule.indexOf(Bo.PARSER_MEDIA_TYPE)===-1?dle:Bo.PARSER_MEDIA_TYPE,tv=Uz==="application/xhtml+xml"?I6:yO,Hs=wx(Bo,"ALLOWED_TAGS")?Yu({},Bo.ALLOWED_TAGS,tv):Ru,_u=wx(Bo,"ALLOWED_ATTR")?Yu({},Bo.ALLOWED_ATTR,tv):ev,Zse=wx(Bo,"ALLOWED_NAMESPACES")?Yu({},Bo.ALLOWED_NAMESPACES,I6):cle,Wse=wx(Bo,"ADD_URI_SAFE_ATTR")?Yu(tA(kae),Bo.ADD_URI_SAFE_ATTR,tv):kae,wae=wx(Bo,"ADD_DATA_URI_TAGS")?Yu(tA(Cae),Bo.ADD_DATA_URI_TAGS,tv):Cae,zN=wx(Bo,"FORBID_CONTENTS")?Yu({},Bo.FORBID_CONTENTS,tv):xae,c1=wx(Bo,"FORBID_TAGS")?Yu({},Bo.FORBID_TAGS,tv):{},G0=wx(Bo,"FORBID_ATTR")?Yu({},Bo.FORBID_ATTR,tv):{},FN=wx(Bo,"USE_PROFILES")?Bo.USE_PROFILES:!1,u1=Bo.ALLOW_ARIA_ATTR!==!1,d1=Bo.ALLOW_DATA_ATTR!==!1,W_=Bo.ALLOW_UNKNOWN_PROTOCOLS||!1,AM=Bo.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Lw=Bo.SAFE_FOR_TEMPLATES||!1,$z=Bo.SAFE_FOR_XML!==!1,BA=Bo.WHOLE_DOCUMENT||!1,LN=Bo.RETURN_DOM||!1,$Z=Bo.RETURN_DOM_FRAGMENT||!1,GZ=Bo.RETURN_TRUSTED_TYPE||!1,Hse=Bo.FORCE_BODY||!1,vae=Bo.SANITIZE_DOM!==!1,_ae=Bo.SANITIZE_NAMED_PROPS||!1,Vse=Bo.KEEP_CONTENT!==!1,jz=Bo.IN_PLACE||!1,ms=Bo.ALLOWED_URI_REGEXP||_O,BN=Bo.NAMESPACE||$A,xp=Bo.CUSTOM_ELEMENT_HANDLING||{},Bo.CUSTOM_ELEMENT_HANDLING&&Sae(Bo.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(xp.tagNameCheck=Bo.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Bo.CUSTOM_ELEMENT_HANDLING&&Sae(Bo.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(xp.attributeNameCheck=Bo.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Bo.CUSTOM_ELEMENT_HANDLING&&typeof Bo.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(xp.allowCustomizedBuiltInElements=Bo.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Lw&&(d1=!1),$Z&&(LN=!0),FN&&(Hs=Yu({},M6),_u=[],FN.html===!0&&(Yu(Hs,U$),Yu(_u,Cx)),FN.svg===!0&&(Yu(Hs,hR),Yu(_u,mR),Yu(_u,vO)),FN.svgFilters===!0&&(Yu(Hs,pR),Yu(_u,mR),Yu(_u,vO)),FN.mathMl===!0&&(Yu(Hs,gR),Yu(_u,V$),Yu(_u,vO))),Bo.ADD_TAGS&&(Hs===Ru&&(Hs=tA(Hs)),Yu(Hs,Bo.ADD_TAGS,tv)),Bo.ADD_ATTR&&(_u===ev&&(_u=tA(_u)),Yu(_u,Bo.ADD_ATTR,tv)),Bo.ADD_URI_SAFE_ATTR&&Yu(Wse,Bo.ADD_URI_SAFE_ATTR,tv),Bo.FORBID_CONTENTS&&(zN===xae&&(zN=tA(zN)),Yu(zN,Bo.FORBID_CONTENTS,tv)),Vse&&(Hs["#text"]=!0),BA&&Yu(Hs,["html","head","body"]),Hs.table&&(Yu(Hs,["tbody"]),delete c1.tbody),Bo.TRUSTED_TYPES_POLICY){if(typeof Bo.TRUSTED_TYPES_POLICY.createHTML!="function")throw vS('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Bo.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw vS('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');zo=Bo.TRUSTED_TYPES_POLICY,$o=zo.createHTML("")}else zo===void 0&&(zo=q$(cn,ut)),zo!==null&&typeof $o=="string"&&($o=zo.createHTML(""));wv&&wv(Bo),$N=Bo}},Eae=Yu({},["mi","mo","mn","ms","mtext"]),Aae=Yu({},["annotation-xml"]),hle=Yu({},["title","style","font","a","script"]),Tae=Yu({},[...hR,...pR,...H$]),Iae=Yu({},[...gR,...bO]),ple=function(Bo){let ws=yo(Bo);(!ws||!ws.tagName)&&(ws={namespaceURI:BN,tagName:"template"});const Rl=yO(Bo.tagName),Hm=yO(ws.tagName);return Zse[Bo.namespaceURI]?Bo.namespaceURI===UZ?ws.namespaceURI===$A?Rl==="svg":ws.namespaceURI===jZ?Rl==="svg"&&(Hm==="annotation-xml"||Eae[Hm]):!!Tae[Rl]:Bo.namespaceURI===jZ?ws.namespaceURI===$A?Rl==="math":ws.namespaceURI===UZ?Rl==="math"&&Aae[Hm]:!!Iae[Rl]:Bo.namespaceURI===$A?ws.namespaceURI===UZ&&!Aae[Hm]||ws.namespaceURI===jZ&&!Eae[Hm]?!1:!Iae[Rl]&&(hle[Rl]||!Tae[Rl]):!!(Uz==="application/xhtml+xml"&&Zse[Bo.namespaceURI]):!1},$S=function(Bo){dR(j.removed,{element:Bo});try{yo(Bo).removeChild(Bo)}catch{vo(Bo)}},Hz=function(Bo,ws){try{dR(j.removed,{attribute:ws.getAttributeNode(Bo),from:ws})}catch{dR(j.removed,{attribute:null,from:ws})}if(ws.removeAttribute(Bo),Bo==="is"&&!_u[Bo])if(LN||$Z)try{$S(ws)}catch{}else try{ws.setAttribute(Bo,"")}catch{}},Rae=function(Bo){let ws=null,Rl=null;if(Hse)Bo="<remove></remove>"+Bo;else{const nv=j$(Bo,/^[\r\n\t ]+/);Rl=nv&&nv[0]}Uz==="application/xhtml+xml"&&BN===$A&&(Bo='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Bo+"</body></html>");const Hm=zo?zo.createHTML(Bo):Bo;if(BN===$A)try{ws=new sn().parseFromString(Hm,Uz)}catch{}if(!ws||!ws.documentElement){ws=Cr.createDocument(BN,"template",null);try{ws.documentElement.innerHTML=qse?$o:Hm}catch{}}const f1=ws.body||ws.documentElement;return Bo&&Rl&&f1.insertBefore(tt.createTextNode(Rl),f1.childNodes[0]||null),BN===$A?Vr.call(ws,BA?"html":"body")[0]:BA?ws.documentElement:f1},Mae=function(Bo){return Ur.call(Bo.ownerDocument||Bo,Bo,zt.SHOW_ELEMENT|zt.SHOW_COMMENT|zt.SHOW_TEXT|zt.SHOW_PROCESSING_INSTRUCTION|zt.SHOW_CDATA_SECTION,null)},Pae=function(Bo){return Bo instanceof Wt&&(typeof Bo.nodeName!="string"||typeof Bo.textContent!="string"||typeof Bo.removeChild!="function"||!(Bo.attributes instanceof Gt)||typeof Bo.removeAttribute!="function"||typeof Bo.setAttribute!="function"||typeof Bo.namespaceURI!="string"||typeof Bo.insertBefore!="function"||typeof Bo.hasChildNodes!="function")},Oae=function(Bo){return typeof kt=="function"&&Bo instanceof kt},GA=function(Bo,ws,Rl){Xr[Bo]&&mO(Xr[Bo],Hm=>{Hm.call(j,ws,Rl,$N)})},Dae=function(Bo){let ws=null;if(GA("beforeSanitizeElements",Bo,null),Pae(Bo))return $S(Bo),!0;const Rl=tv(Bo.nodeName);if(GA("uponSanitizeElement",Bo,{tagName:Rl,allowedTags:Hs}),Bo.hasChildNodes()&&!Oae(Bo.firstElementChild)&&Cv(/<[/\w]/g,Bo.innerHTML)&&Cv(/<[/\w]/g,Bo.textContent)||Bo.nodeType===vI.progressingInstruction||$z&&Bo.nodeType===vI.comment&&Cv(/<[/\w]/g,Bo.data))return $S(Bo),!0;if(!Hs[Rl]||c1[Rl]){if(!c1[Rl]&&Lae(Rl)&&(xp.tagNameCheck instanceof RegExp&&Cv(xp.tagNameCheck,Rl)||xp.tagNameCheck instanceof Function&&xp.tagNameCheck(Rl)))return!1;if(Vse&&!zN[Rl]){const Hm=yo(Bo)||Bo.parentNode,f1=po(Bo)||Bo.childNodes;if(f1&&Hm){const nv=f1.length;for(let q_=nv-1;q_>=0;--q_){const GS=Mn(f1[q_],!0);GS.__removalCount=(Bo.__removalCount||0)+1,Hm.insertBefore(GS,jn(Bo))}}}return $S(Bo),!0}return Bo instanceof Ot&&!ple(Bo)||(Rl==="noscript"||Rl==="noembed"||Rl==="noframes")&&Cv(/<\/no(script|embed|frames)/i,Bo.innerHTML)?($S(Bo),!0):(Lw&&Bo.nodeType===vI.text&&(ws=Bo.textContent,mO([Il,Ju,tu],Hm=>{ws=fR(ws,Hm," ")}),Bo.textContent!==ws&&(dR(j.removed,{element:Bo.cloneNode()}),Bo.textContent=ws)),GA("afterSanitizeElements",Bo,null),!1)},Nae=function(Bo,ws,Rl){if(vae&&(ws==="id"||ws==="name")&&(Rl in tt||Rl in fle))return!1;if(!(d1&&!G0[ws]&&Cv(ns,ws))){if(!(u1&&Cv(ur,ws))){if(!_u[ws]||G0[ws]){if(!(Lae(Bo)&&(xp.tagNameCheck instanceof RegExp&&Cv(xp.tagNameCheck,Bo)||xp.tagNameCheck instanceof Function&&xp.tagNameCheck(Bo))&&(xp.attributeNameCheck instanceof RegExp&&Cv(xp.attributeNameCheck,ws)||xp.attributeNameCheck instanceof Function&&xp.attributeNameCheck(ws))||ws==="is"&&xp.allowCustomizedBuiltInElements&&(xp.tagNameCheck instanceof RegExp&&Cv(xp.tagNameCheck,Rl)||xp.tagNameCheck instanceof Function&&xp.tagNameCheck(Rl))))return!1}else if(!Wse[ws]){if(!Cv(ms,fR(Rl,zs,""))){if(!((ws==="src"||ws==="xlink:href"||ws==="href")&&Bo!=="script"&&lY(Rl,"data:")===0&&wae[Bo])){if(!(W_&&!Cv(Pr,fR(Rl,zs,"")))){if(Rl)return!1}}}}}}return!0},Lae=function(Bo){return Bo!=="annotation-xml"&&j$(Bo,Qs)},Fae=function(Bo){GA("beforeSanitizeAttributes",Bo,null);const{attributes:ws}=Bo;if(!ws)return;const Rl={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_u};let Hm=ws.length;for(;Hm--;){const f1=ws[Hm],{name:nv,namespaceURI:q_,value:GS}=f1,Vz=tv(nv);let Iv=nv==="value"?GS:cY(GS);const mle=Iv;if(Rl.attrName=Vz,Rl.attrValue=Iv,Rl.keepAttr=!0,Rl.forceKeepAttr=void 0,GA("uponSanitizeAttribute",Bo,Rl),Iv=Rl.attrValue,Rl.forceKeepAttr)continue;if(!Rl.keepAttr){Hz(nv,Bo);continue}if(!AM&&Cv(/\/>/i,Iv)){Hz(nv,Bo);continue}Lw&&mO([Il,Ju,tu],Bae=>{Iv=fR(Iv,Bae," ")});const zae=tv(Bo.nodeName);if(!Nae(zae,Vz,Iv)){Hz(nv,Bo);continue}if(_ae&&(Vz==="id"||Vz==="name")&&(Hz(nv,Bo),Iv=lle+Iv),$z&&Cv(/((--!?|])>)|<\/(style|title)/i,Iv)){Hz(nv,Bo);continue}if(zo&&typeof cn=="object"&&typeof cn.getAttributeType=="function"&&!q_)switch(cn.getAttributeType(zae,Vz)){case"TrustedHTML":{Iv=zo.createHTML(Iv);break}case"TrustedScriptURL":{Iv=zo.createScriptURL(Iv);break}}if(Iv!==mle)try{q_?Bo.setAttributeNS(q_,nv,Iv):Bo.setAttribute(nv,Iv),Pae(Bo)?$S(Bo):G$(j.removed)}catch{}}GA("afterSanitizeAttributes",Bo,null)},gle=function Bl(Bo){let ws=null;const Rl=Mae(Bo);for(GA("beforeSanitizeShadowDOM",Bo,null);ws=Rl.nextNode();)GA("uponSanitizeShadowNode",ws,null),!Dae(ws)&&(ws.content instanceof mt&&Bl(ws.content),Fae(ws));GA("afterSanitizeShadowDOM",Bo,null)};return j.sanitize=function(Bl){let Bo=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ws=null,Rl=null,Hm=null,f1=null;if(qse=!Bl,qse&&(Bl="<!-->"),typeof Bl!="string"&&!Oae(Bl))if(typeof Bl.toString=="function"){if(Bl=Bl.toString(),typeof Bl!="string")throw vS("dirty is not a string, aborting")}else throw vS("toString is not a function");if(!j.isSupported)return Bl;if(Gz||Kse(Bo),j.removed=[],typeof Bl=="string"&&(jz=!1),jz){if(Bl.nodeName){const GS=tv(Bl.nodeName);if(!Hs[GS]||c1[GS])throw vS("root node is forbidden and cannot be sanitized in-place")}}else if(Bl instanceof kt)ws=Rae("<!---->"),Rl=ws.ownerDocument.importNode(Bl,!0),Rl.nodeType===vI.element&&Rl.nodeName==="BODY"||Rl.nodeName==="HTML"?ws=Rl:ws.appendChild(Rl);else{if(!LN&&!Lw&&!BA&&Bl.indexOf("<")===-1)return zo&&GZ?zo.createHTML(Bl):Bl;if(ws=Rae(Bl),!ws)return LN?null:GZ?$o:""}ws&&Hse&&$S(ws.firstChild);const nv=Mae(jz?Bl:ws);for(;Hm=nv.nextNode();)Dae(Hm)||(Hm.content instanceof mt&&gle(Hm.content),Fae(Hm));if(jz)return Bl;if(LN){if($Z)for(f1=Ko.call(ws.ownerDocument);ws.firstChild;)f1.appendChild(ws.firstChild);else f1=ws;return(_u.shadowroot||_u.shadowrootmode)&&(f1=Dr.call(st,f1,!0)),f1}let q_=BA?ws.outerHTML:ws.innerHTML;return BA&&Hs["!doctype"]&&ws.ownerDocument&&ws.ownerDocument.doctype&&ws.ownerDocument.doctype.name&&Cv(xO,ws.ownerDocument.doctype.name)&&(q_="<!DOCTYPE "+ws.ownerDocument.doctype.name+`>
`+q_),Lw&&mO([Il,Ju,tu],GS=>{q_=fR(q_,GS," ")}),zo&&GZ?zo.createHTML(q_):q_},j.setConfig=function(){let Bl=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Kse(Bl),Gz=!0},j.clearConfig=function(){$N=null,Gz=!1},j.isValidAttribute=function(Bl,Bo,ws){$N||Kse({});const Rl=tv(Bl),Hm=tv(Bo);return Nae(Rl,Hm,ws)},j.addHook=function(Bl,Bo){typeof Bo=="function"&&(Xr[Bl]=Xr[Bl]||[],dR(Xr[Bl],Bo))},j.removeHook=function(Bl){if(Xr[Bl])return G$(Xr[Bl])},j.removeHooks=function(Bl){Xr[Bl]&&(Xr[Bl]=[])},j.removeAllHooks=function(){Xr={}},j}var yY=D6();const Z$=h=>yY().sanitize(h);var W1=tinymce.util.Tools.resolve("tinymce.util.I18n");const bY={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},K$="temporary-placeholder",wO=h=>()=>tr(h,K$).getOr("!not found!"),CO=(h,j)=>{const tt=h.toLowerCase();if(W1.isRtl()){const st=Fr(tt,"-rtl");return Ms(j,st)?st:tt}else return tt},Y$=(h,j)=>tr(j,CO(h,j)),N6=(h,j)=>{const tt=j();return Y$(h,tt).getOrThunk(wO(tt))},bR=(h,j,tt)=>{const st=j();return Y$(h,st).or(tt).getOrThunk(wO(st))},X$=h=>W1.isRtl()?Ms(bY,h):!1,J$=()=>Ws("add-focusable",[ep(h=>{gv(h.element,"svg").each(j=>Vo(j,"focusable","false"))})]),Q$=(h,j,tt,st)=>{var ut,mt;const yt=X$(j)?["tox-icon--flip"]:[],kt=tr(tt,CO(j,tt)).or(st).getOrThunk(wO(tt));return{dom:{tag:h.tag,attributes:(ut=h.attributes)!==null&&ut!==void 0?ut:{},classes:h.classes.concat(yt),innerHtml:kt},behaviours:gr([...(mt=h.behaviours)!==null&&mt!==void 0?mt:[],J$()])}},e1=(h,j,tt,st=It.none())=>Q$(j,h,tt(),st),vY=(h,j,tt)=>{const st=tt(),ut=mn(h,mt=>Ms(st,CO(mt,st)));return Q$(j,ut.getOr(K$),st,It.none())},_Y={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},kO=Ty({name:"Notification",factory:h=>{const j=Wr("notification-text"),tt=nu({dom:xx(`<p id=${j}>${Z$(h.backstageProvider.translate(h.text))}</p>`),behaviours:gr([Gs.config({})])}),st=xn=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${xn}%`}}}),ut=xn=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${xn}%`}}),mt=nu({dom:{tag:"div",classes:h.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[st(0)]},ut(0)],behaviours:gr([Gs.config({})])}),Ot={updateProgress:(xn,Mn)=>{xn.getSystem().isConnected()&&mt.getOpt(xn).each(vo=>{Gs.set(vo,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[st(Mn)]},ut(Mn)])})},updateText:(xn,Mn)=>{if(xn.getSystem().isConnected()){const vo=tt.get(xn);Gs.set(vo,[mp(Mn)])}}},zt=Dn([h.icon.toArray(),h.level.toArray(),h.level.bind(xn=>It.from(_Y[xn])).toArray()]),Gt=nu(Sm.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":h.backstageProvider.translate("Close")}},components:[e1("close",{tag:"span",classes:["tox-icon"]},h.iconProvider)],buttonBehaviours:gr([op.config({}),Mp.config({...h.backstageProvider.tooltips.getConfig({tooltipText:h.backstageProvider.translate("Close")})})]),action:xn=>{h.onAction(xn)}})),Wt=vY(zt,{tag:"div",classes:["tox-notification__icon"]},h.iconProvider),sn={dom:{tag:"div",classes:["tox-notification__body"]},components:[tt.asSpec()],behaviours:gr([Gs.config({})])},cn=[Wt,sn];return{uid:h.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":j},classes:h.level.map(xn=>["tox-notification","tox-notification--in",`tox-notification--${xn}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:gr([op.config({}),Ds.config({}),ys.config({mode:"special",onEscape:xn=>(h.onAction(xn),It.some(!0))})]),components:cn.concat(h.progress?[mt.asSpec()]:[]).concat([Gt.asSpec()]),apis:Ot}},configFields:[Kl("level"),Jo("progress"),Kl("icon"),Jo("onAction"),Jo("text"),Jo("iconProvider"),Jo("backstageProvider")],apis:{updateProgress:(h,j,tt)=>{h.updateProgress(j,tt)},updateText:(h,j,tt)=>{h.updateText(j,tt)}}});var eG=(h,j,tt,st)=>{const ut=j.backstage.shared,mt=()=>ro.fromDom(h.queryCommandValue("ToggleView")===""?h.getContentAreaContainer():h.getContainer()),yt=()=>{const Wt=_d(mt());return It.some(Wt)},kt=Wt=>{yt().each(sn=>{_o(Wt,cn=>{Bs(cn.element,"width"),bn(cn.element)>sn.width&&Xo(cn.element,"width",sn.width+"px")})})};return{open:(Wt,sn,cn)=>{const xn=()=>{const po=Cr=>{Gs.remove(Cr,Mn),vo()},yo=(Cr,Ur)=>{Im(Cr.element).length===0?zo(Cr,Ur):$o(Cr,Ur)},zo=(Cr,Ur)=>{vp.hide(Cr),st.clear(),Ur&&h.focus()},$o=(Cr,Ur)=>{Ur&&ys.focusIn(Cr)};st.on(Cr=>{sn();const Ur=cn();po(Cr),yo(Cr,Ur)})},Mn=km(kO.sketch({text:Wt.text,level:Wn(["success","error","warning","warn","info"],Wt.type)?Wt.type:void 0,progress:Wt.progressBar===!0,icon:Wt.icon,onAction:xn,iconProvider:ut.providers.icons,backstageProvider:ut.providers}));if(st.isSet()){const po=Uy(Mn);st.on(yo=>{Gs.append(yo,po),vp.reposition(yo),Zu.refresh(yo),kt(yo.components())})}else{const po=km(vp.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:ut.getSink,fireDismissalEventInstead:{},...ut.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:gr([ys.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Gs.config({}),...mS(h)&&!ut.header.isPositionedAtTop()?[]:[Zu.config({contextual:{lazyContext:()=>It.some(_d(mt())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Cr=>yS(h,Cr.element).map(Ko=>({bounds:bS(Ko),optScrollEnv:It.some({currentScrollTop:Ko.element.dom.scrollTop,scrollElmTop:Fu(Ko.element).top})})).getOrThunk(()=>({bounds:zp(),optScrollEnv:It.none()}))})]])})),yo=Uy(Mn),zo={maxHeightFunction:hw()},$o={...ut.anchors.banner(),overrides:zo};st.set(po),tt.add(po),vp.showWithinBounds(po,yo,{anchor:$o},yt)}Rt(Wt.timeout)&&Wt.timeout>0&&XE.setEditorTimeout(h,()=>{xn()},Wt.timeout);const vo=()=>{st.on(po=>{vp.reposition(po),Zu.refresh(po),kt(po.components())})};return{close:xn,reposition:vo,text:po=>{kO.updateText(Mn,po)},settings:Wt,getEl:()=>Mn.element.dom,progressBar:{value:po=>{kO.updateProgress(Mn,po)}}}},close:Wt=>{Wt.close()},getArgs:Wt=>Wt.settings}};const CY={setup:(h,j)=>{const tt=(ut,mt)=>{rs(ut,dv(),{raw:mt})},st=()=>h.getMenu().bind(kr.getHighlighted);j.on("keydown",ut=>{const mt=ut.which;h.isActive()&&(h.isMenuOpen()?mt===13?(st().each(Qx),ut.preventDefault()):mt===40?(st().fold(()=>{h.getMenu().each(kr.highlightFirst)},yt=>{tt(yt,ut)}),ut.preventDefault(),ut.stopImmediatePropagation()):(mt===37||mt===38||mt===39)&&st().each(yt=>{tt(yt,ut),ut.preventDefault(),ut.stopImmediatePropagation()}):(mt===13||mt===38||mt===40)&&h.cancelIfNecessary())}),j.on("NodeChange",()=>{h.isActive()&&!h.isProcessingAction()&&!j.queryCommandState("mceAutoCompleterInRange")&&h.cancelIfNecessary()})}};var L6;(function(h){h[h.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",h[h.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(L6||(L6={}));var z_=L6;const vR="tox-menu-nav__js",_I="tox-collection__item",SO="tox-swatch",tG={normal:vR,color:SO},F6="tox-collection__item--enabled",kY="tox-collection__group-heading",EO="tox-collection__item-icon",z6="tox-collection__item-label",nG="tox-collection__item-accessory",B6="tox-collection__item-caret",nA="tox-collection__item-checkmark",oA="tox-collection__item--active",AO="tox-collection__item-container",TO="tox-collection__item-container--column",oG="tox-collection__item-container--row",rG="tox-collection__item-container--align-right",sG="tox-collection__item-container--align-left",iG="tox-collection__item-container--valign-top",$6="tox-collection__item-container--valign-middle",aG="tox-collection__item-container--valign-bottom",lG=h=>tr(tG,h).getOr(vR),cG=h=>h==="color"?"tox-swatches":"tox-menu",IO=h=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:cG(h),tieredMenu:"tox-tiered-menu"}),_S=h=>{const j=IO(h);return{backgroundMenu:j.backgroundMenu,selectedMenu:j.selectedMenu,menu:j.menu,selectedItem:j.selectedItem,item:lG(h)}},uG=(h,j,tt)=>{const st=IO(tt);return{tag:"div",classes:Dn([[st.menu,`tox-menu-${j}-column`],h?[st.hasIcons]:[]])}},SY=[ZE.parts.items({})],_R=(h,j,tt)=>{const st=IO(tt);return{dom:{tag:"div",classes:Dn([[st.tieredMenu]])},markers:_S(tt)}},dG=Nt([Kl("data"),ko("inputAttributes",{}),ko("inputStyles",{}),ko("tag","input"),ko("inputClasses",[]),zl("onSetValue"),ko("styles",{}),ko("eventOrder",{}),Bm("inputBehaviours",[zr,Ds]),ko("selectOnFocus",!0)]),fG=h=>gr([Ds.config({onFocus:h.selectOnFocus?j=>{const tt=j.element,st=Yv(tt);tt.dom.setSelectionRange(0,st.length)}:Et})]),EY=h=>({...fG(h),...$m(h.inputBehaviours,[zr.config({store:{mode:"manual",...h.data.map(j=>({initialValue:j})).getOr({}),getValue:j=>Yv(j.element),setValue:(j,tt)=>{Yv(j.element)!==tt&&k2(j.element,tt)}},onSetValue:h.onSetValue})])}),hG=h=>({tag:h.tag,attributes:{type:"text",...h.inputAttributes},styles:h.inputStyles,classes:h.inputClasses}),pG=(h,j)=>({uid:h.uid,dom:hG(h),components:[],behaviours:EY(h),eventOrder:h.eventOrder}),kx=Ty({name:"Input",configFields:dG(),factory:pG}),G6=Wr("refetch-trigger-event"),gG=Wr("redirect-menu-item-interaction"),mG="tox-menu__searcher",RO=h=>np(h.element,`.${mG}`).bind(j=>h.getSystem().getByDom(j).toOptional()),yG=RO,AY=(h,j)=>{zr.setValue(h,j.fetchPattern),h.element.dom.selectionStart=j.selectionStart,h.element.dom.selectionEnd=j.selectionEnd},xR=h=>{const j=zr.getValue(h),tt=h.element.dom.selectionStart,st=h.element.dom.selectionEnd;return{fetchPattern:j,selectionStart:tt,selectionEnd:st}},TY=(h,j)=>{Os(j.element,"id").each(tt=>Vo(h.element,"aria-activedescendant",tt))},bG=h=>{const j=(ut,mt)=>(mt.cut(),It.none()),tt=(ut,mt)=>{const yt={interactionEvent:mt.event,eventType:mt.event.raw.type};return rs(ut,gG,yt),It.some(!0)},st="searcher-events";return{dom:{tag:"div",classes:[_I]},components:[kx.sketch({inputClasses:[mG,"tox-textfield"],inputAttributes:{...h.placeholder.map(ut=>({placeholder:h.i18n(ut)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:gr([Ws(st,[Qo(M1(),ut=>{wl(ut,G6)}),Qo(dv(),(ut,mt)=>{mt.event.raw.key==="Escape"&&mt.stop()})]),ys.config({mode:"special",onLeft:j,onRight:j,onSpace:j,onEnter:tt,onEscape:tt,onUp:tt,onDown:tt})]),eventOrder:{keydown:[st,ys.name()]}})]}},MO="tox-collection--results__js",j6=h=>{var j;return h.dom?{...h,dom:{...h.dom,attributes:{...(j=h.dom.attributes)!==null&&j!==void 0?j:{},id:Wr("aria-item-search-result-id"),"aria-selected":"false"}}}:h},PO=(h,j)=>tt=>{const st=Ro(tt,j);return On(st,ut=>({dom:h,components:ut}))},IY=h=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[ZE.parts.items({preprocess:h!=="auto"?PO({tag:"div",classes:["tox-swatches__row"]},h):Jt})]}]}),vG=h=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[ZE.parts.items({preprocess:PO({tag:"div",classes:["tox-collection__group"]},h)})]}),U6=(h,j)=>{const tt=[];let st=[];return _o(h,(ut,mt)=>{j(ut,mt)?(st.length>0&&tt.push(st),st=[],(Ms(ut.dom,"innerHtml")||ut.components&&ut.components.length>0)&&st.push(ut)):st.push(ut)}),st.length>0&&tt.push(st),On(tt,ut=>({dom:{tag:"div",classes:["tox-collection__group"]},components:ut}))},OO=(h,j,tt)=>ZE.parts.items({preprocess:st=>{const ut=On(st,tt);return h!=="auto"&&h>1?PO({tag:"div",classes:["tox-collection__group"]},h)(ut):U6(ut,(mt,yt)=>j[yt].type==="separator")}}),H6=(h,j,tt=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(h===1?["tox-collection--list"]:["tox-collection--grid"])},components:[OO(h,j,Jt)]}),RY=(h,j,tt=!0)=>{const st=Wr("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",MO].concat(h===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:st}},components:[OO(h,j,j6)]}},MY=(h,j,tt)=>{const st=Wr("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(h===1?["tox-collection--list"]:["tox-collection--grid"])},components:[bG({i18n:W1.translate,placeholder:tt.placeholder}),{dom:{tag:"div",classes:[...h===1?["tox-collection--list"]:["tox-collection--grid"],MO],attributes:{id:st}},components:[OO(h,j,j6)]}]}},PY=(h,j=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[ZE.parts.items({preprocess:tt=>U6(tt,(st,ut)=>h[ut].type==="separator")})]}),DO=h=>er(h,j=>"icon"in j&&j.icon!==void 0),Tw=h=>(console.error(sx(h)),console.log(h),It.none()),_G=(h,j,tt,st,ut)=>{const mt=PY(tt);return{value:h,dom:mt.dom,components:mt.components,items:tt}},V6=(h,j,tt,st,ut)=>{const mt=()=>ut.menuType!=="searchable"?H6(st,tt):ut.searchMode.searchMode==="search-with-field"?MY(st,tt,ut.searchMode):RY(st,tt);if(ut.menuType==="color"){const yt=IY(st);return{value:h,dom:yt.dom,components:yt.components,items:tt}}else if(ut.menuType==="normal"&&st==="auto"){const yt=H6(st,tt);return{value:h,dom:yt.dom,components:yt.components,items:tt}}else if(ut.menuType==="normal"||ut.menuType==="searchable"){const yt=mt();return{value:h,dom:yt.dom,components:yt.components,items:tt}}else if(ut.menuType==="listpreview"&&st!=="auto"){const yt=vG(st);return{value:h,dom:yt.dom,components:yt.components,items:tt}}else return{value:h,dom:uG(j,st,ut.menuType),components:SY,items:tt}},om=Qp("type"),W6=Qp("name"),q6=Qp("label"),X2=Qp("text"),xG=Qp("title"),wG=Qp("icon"),rA=Qp("value"),CG=_y("fetch"),OY=_y("getSubmenuItems"),xI=_y("onAction"),kG=_y("onItemAction"),sA=Wu("onSetup",()=>Et),DY=_g("name"),J2=_g("text"),SG=_g("role"),n1=_g("icon"),wR=_g("tooltip"),Z6=_g("label"),K6=_g("shortcut"),EG=cv("select"),wI=em("active",!1),NY=em("borderless",!1),B_=em("enabled",!0),NO=em("primary",!1),AG=h=>ko("columns",h),Y6=ko("meta",{}),X6=Wu("onAction",Et),xS=h=>Rp("type",h),LO=h=>fm("name","name",b_(()=>Wr(`${h}-name`)),Nr),LY=h=>fm("value","value",b_(()=>Wr(`${h}-value`)),zy()),TG=vs([om,J2]),FY=h=>cp("separatormenuitem",TG,h),kv=vs([xS("autocompleteitem"),wI,B_,Y6,rA,J2,n1]),$_=h=>cp("Autocompleter.Separator",TG,h),IG=h=>cp("Autocompleter.Item",kv,h),iA=[B_,wR,n1,J2,sA,Rp("context","mode:design")],J6=vs([om,xI,K6].concat(iA)),CR=h=>cp("toolbarbutton",J6,h),FO=[wI].concat(iA),kR=vs(FO.concat([om,xI,K6])),SR=h=>cp("ToggleButton",kR,h),zO=[Wu("predicate",hn),wm("scope","node",["node","editor"]),wm("position","selection",["node","selection","line"])],RG=iA.concat([xS("contextformbutton"),NO,xI,Jl("original",Jt)]),ER=FO.concat([xS("contextformbutton"),NO,xI,Jl("original",Jt)]),zY=iA.concat([xS("contextformbutton")]),BY=FO.concat([xS("contextformtogglebutton")]),Sx=Sp("type",{contextformbutton:RG,contextformtogglebutton:ER}),Sv=vs([xS("contextform"),Wu("initValue",Nt("")),Z6,dy("commands",Sx),Uv("launch",Sp("type",{contextformbutton:zY,contextformtogglebutton:BY}))].concat(zO)),AR=h=>cp("ContextForm",Sv,h),q1=vs([xS("contexttoolbar"),Qp("items")].concat(zO)),$Y=h=>cp("ContextToolbar",q1,h),Xu=[om,Qp("src"),_g("alt"),x_("classes",[],Nr)],GY=vs(Xu),aA=[om,X2,DY,x_("classes",["tox-collection__item-label"],Nr)],TR=vs(aA),Q6=dm(()=>rx("type",{cardimage:GY,cardtext:TR,cardcontainer:eF})),eF=vs([om,Rp("direction","horizontal"),Rp("align","left"),Rp("valign","middle"),dy("items",Q6)]),wS=[B_,J2,SG,K6,LY("menuitem"),Y6,Rp("context","mode:design")],jY=vs([om,Z6,dy("items",Q6),sA,X6].concat(wS)),tF=h=>cp("cardmenuitem",jY,h),UY=vs([om,wI,n1].concat(wS)),MG=h=>cp("choicemenuitem",UY,h),nF=[om,Qp("fancytype"),X6],oF=[ko("initData",{})].concat(nF),PG=[cv("select"),Pt("initData",{},[em("allowCustomColors",!0),Rp("storageKey","default"),e2("colors",zy())])].concat(nF),BO=Sp("fancytype",{inserttable:oF,colorswatch:PG}),HY=h=>cp("fancymenuitem",BO,h),VY=vs([om,sA,X6,n1].concat(wS)),WY=h=>cp("menuitem",VY,h),qY=vs([om,OY,sA,n1].concat(wS)),ZY=h=>cp("nestedmenuitem",qY,h),OG=vs([om,n1,wI,sA,xI].concat(wS)),KY=h=>cp("togglemenuitem",OG,h),rF=(h,j,tt)=>{const st=o0(h.element,"."+tt);if(st.length>0){const ut=wn(st,mt=>{const yt=mt.dom.getBoundingClientRect().top,kt=st[0].dom.getBoundingClientRect().top;return Math.abs(yt-kt)>j}).getOr(st.length);return It.some({numColumns:ut,numRows:Math.ceil(st.length/ut)})}else return It.none()},sF=(h,j)=>gr([Ws(h,j)]),CI={namedEvents:sF,unnamedEvents:h=>sF(Wr("unnamed-events"),h)},IR=h=>h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o1={item:h=>Rs.config({disabled:h,disableClass:"tox-collection__item--state-disabled"}),button:h=>Rs.config({disabled:h}),splitButton:h=>Rs.config({disabled:h,disableClass:"tox-tbtn--disabled"}),toolbarButton:h=>Rs.config({disabled:h,disableClass:"tox-tbtn--disabled",useNative:!1})},$O=(h,j)=>{const tt=h.getApi(j);return st=>{st(tt)}},CS=(h,j)=>ep(tt=>{$O(h,tt)(ut=>{const mt=h.onSetup(ut);Tt(mt)&&j.set(mt)})}),kS=(h,j)=>S_(tt=>$O(h,tt)(j.get())),NG="silver.uistate",RR=(h,j)=>{const st=h.mainUi.outerContainer.element,ut=[h.mainUi.mothership,...h.uiMotherships];j==="setDisabled"&&_o(ut,mt=>{mt.broadcastOn([vx()],{target:st})}),_o(ut,mt=>{mt.broadcastOn([NG],j)})},LG=(h,j)=>{h.on("init SwitchMode",tt=>{RR(j,tt.type)}),h.on("NodeChange",tt=>{h.ui.isEnabled()?RR(j,tt.type):RR(j,"setDisabled")}),_$(h)&&h.mode.set("readonly")},Wp=h=>ky.config({channels:{[NG]:{onReceive:(j,tt)=>{if(tt==="setDisabled"||tt==="setEnabled"){Rs.set(j,tt==="setDisabled");return}const{contextType:st,shouldDisable:ut}=h();st==="mode"&&!Wn(["switchmode","init"],tt)||Rs.set(j,ut)}}}}),G_=(h,j)=>ax((tt,st)=>{$O(h,tt)(h.onAction),!h.triggersSubmenu&&j===z_.CLOSE_ON_EXECUTE&&(tt.getSystem().isConnected()&&wl(tt,Lm()),st.stop())}),XY={[e0()]:["disabling","alloy.base.behaviour","toggling","item-events"]},SS=xu,lA=(h,j,tt,st)=>{const ut=ls(Et);return{type:"item",dom:j.dom,components:SS(j.optComponents),data:h.data,eventOrder:XY,hasSubmenu:h.triggersSubmenu,itemBehaviours:gr([Ws("item-events",[G_(h,tt),CS(h,ut),kS(h,ut)]),o1.item(()=>!h.enabled||st.checkUiComponentContext(h.context).shouldDisable),Wp(()=>st.checkUiComponentContext(h.context)),Gs.config({})].concat(h.itemBehaviours))}},cA=h=>({value:h.value,meta:{text:h.text.getOr(""),...h.meta}}),iF=h=>{const j=JE.os.isMacOS()||JE.os.isiOS(),ut=j?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},mt=h.split("+"),yt=On(mt,kt=>{const Ot=kt.toLowerCase().trim();return Ms(ut,Ot)?ut[Ot]:kt});return j?yt.join(""):yt.join("+")},GO=(h,j,tt=[EO])=>e1(h,{tag:"div",classes:tt},j),aF=h=>({dom:{tag:"div",classes:[z6]},components:[mp(W1.translate(h))]}),lF=(h,j)=>({dom:{tag:"div",classes:j,innerHtml:h}}),JY=(h,j)=>({dom:{tag:"div",classes:[z6]},components:[{dom:{tag:h.tag,styles:h.styles},components:[mp(W1.translate(j))]}]}),QY=h=>({dom:{tag:"div",classes:[nG]},components:[mp(iF(h))]}),FG=h=>GO("checkmark",h,[nA]),eX=h=>GO("chevron-right",h,[B6]),tX=h=>GO("chevron-down",h,[B6]),nX=(h,j)=>{const tt=h.direction==="vertical"?TO:oG,st=h.align==="left"?sG:rG;return{dom:{tag:"div",classes:[AO,tt,st,(()=>{switch(h.valign){case"top":return iG;case"middle":return $6;case"bottom":return aG}})()]},components:j}},oX=(h,j,tt)=>({dom:{tag:"img",classes:j,attributes:{src:h,alt:tt.getOr("")}}}),zG=(h,j,tt)=>{const st="custom",ut="remove",mt=h.value,yt=h.iconContent.map(zt=>bR(zt,j.icons,tt)),kt=h.ariaLabel.map(zt=>({"aria-label":j.translate(zt),"data-mce-name":zt})).getOr({});return{dom:(()=>{const zt=SO,Gt=yt.getOr(""),Wt={tag:"div",attributes:kt,classes:[zt]};return mt===st?{...Wt,tag:"button",classes:[...Wt.classes,"tox-swatches__picker-btn"],innerHtml:Gt}:mt===ut?{...Wt,classes:[...Wt.classes,"tox-swatch--remove"],innerHtml:Gt}:wt(mt)?{...Wt,attributes:{...Wt.attributes,"data-mce-color":mt},styles:{"background-color":mt},innerHtml:Gt}:Wt})(),optComponents:[]}},cF=h=>{const j=h.map(tt=>({attributes:{id:Wr("menu-item"),"aria-label":W1.translate(tt)}})).getOr({});return{tag:"div",classes:[vR,_I],...j}},BG=(h,j,tt,st)=>{const ut={tag:"div",classes:[EO]},mt=sn=>e1(sn,ut,j.icons,st),yt=()=>It.some({dom:ut}),kt=tt?h.iconContent.map(mt).orThunk(yt):It.none(),Ot=h.checkMark,zt=It.from(h.meta).fold(()=>aF,sn=>Ms(sn,"style")?Pn(JY,sn.style):aF),Gt=h.htmlContent.fold(()=>h.textContent.map(zt),sn=>It.some(lF(sn,[z6])));return{dom:cF(h.ariaLabel),optComponents:[kt,Gt,h.shortcutContent.map(QY),Ot,h.caret]}},MR=(h,j,tt,st=It.none())=>h.presets==="color"?zG(h,j,st):BG(h,j,tt,st),$G=(h,j,tt)=>tr(h,"tooltipWorker").map(st=>[Mp.config({lazySink:j.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:ut=>({type:"submenu",item:ut,overrides:{maxHeightFunction:hw}}),mode:"follow-highlight",onShow:(ut,mt)=>{st(yt=>{Mp.setComponents(ut,[H3({element:ro.fromDom(yt)})])})}})]).getOrThunk(()=>tt.map(st=>[Mp.config({...j.providers.tooltips.getConfig({tooltipText:st}),mode:"follow-highlight"})]).getOr([])),rX=h=>pS.DOM.encode(h),uA=(h,j)=>{const tt=W1.translate(h),st=rX(tt);if(j.length>0){const ut=new RegExp(IR(j),"gi");return st.replace(ut,mt=>`<span class="tox-autocompleter-highlight">${mt}</span>`)}else return st},sX=(h,j,tt,st,ut,mt,yt,kt=!0)=>{const Ot=MR({presets:st,textContent:It.none(),htmlContent:tt?h.text.map(Gt=>uA(Gt,j)):It.none(),ariaLabel:h.text,iconContent:h.icon,shortcutContent:It.none(),checkMark:It.none(),caret:It.none(),value:h.value},yt.providers,kt,h.icon),zt=h.text.filter(Gt=>!tt&&Gt!=="");return lA({context:"mode:design",data:cA(h),enabled:h.enabled,getApi:Nt({}),onAction:Gt=>ut(h.value,h.meta),onSetup:Nt(Et),triggersSubmenu:!1,itemBehaviours:$G(h,yt,zt)},Ot,mt,yt.providers)},uF=(h,j)=>On(h,tt=>{switch(tt.type){case"cardcontainer":return nX(tt,uF(tt.items,j));case"cardimage":return oX(tt.src,tt.classes,tt.alt);case"cardtext":const ut=tt.name.exists(mt=>Wn(j.cardText.highlightOn,mt))?It.from(j.cardText.matchText).getOr(""):"";return lF(uA(tt.text,ut),tt.classes)}}),GG=(h,j,tt,st)=>{const ut=yt=>({isEnabled:()=>!Rs.isDisabled(yt),setEnabled:kt=>{Rs.set(yt,!kt),_o(o0(yt.element,"*"),Ot=>{yt.getSystem().getByDom(Ot).each(zt=>{zt.hasConfigured(Rs)&&Rs.set(zt,!kt)})})}}),mt={dom:cF(h.label),optComponents:[It.some({dom:{tag:"div",classes:[AO,oG]},components:uF(h.items,st)})]};return lA({context:"mode:design",data:cA({text:It.none(),...h}),enabled:h.enabled,getApi:ut,onAction:h.onAction,onSetup:h.onSetup,triggersSubmenu:!1,itemBehaviours:It.from(st.itemBehaviours).getOr([])},mt,j,tt.providers)},jG=(h,j,tt,st,ut,mt,yt,kt=!0)=>{const Ot=Wt=>({setActive:sn=>{na.set(Wt,sn)},isActive:()=>na.isOn(Wt),isEnabled:()=>!Rs.isDisabled(Wt),setEnabled:sn=>Rs.set(Wt,!sn)}),zt=MR({presets:tt,textContent:j?h.text:It.none(),htmlContent:It.none(),ariaLabel:h.text,iconContent:h.icon,shortcutContent:j?h.shortcut:It.none(),checkMark:j?It.some(FG(yt.icons)):It.none(),caret:It.none(),value:h.value},yt,kt),Gt=h.text.filter(Nt(!j)).map(Wt=>Mp.config(yt.tooltips.getConfig({tooltipText:yt.translate(Wt)})));return Ou(lA({context:h.context,data:cA(h),enabled:h.enabled,getApi:Ot,onAction:Wt=>st(h.value),onSetup:Wt=>(Wt.setActive(ut),Et),triggersSubmenu:!1,itemBehaviours:[...Gt.toArray()]},zt,mt,yt),{toggling:{toggleClass:F6,toggleOnExecute:!1,selected:h.active,exclusive:!0}})},dF=eI(tO(),nO()),jO=h=>({value:UG(h)}),UO=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,HO=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,fF=h=>UO.test(h)||HO.test(h),UG=h=>Sr(h,"#").toUpperCase(),HG=h=>fF(h)?It.some({value:UG(h)}):It.none(),iX=h=>({value:h.value.replace(UO,(tt,st,ut,mt)=>st+st+ut+ut+mt+mt)}),aX=h=>{const j=iX(h),tt=HO.exec(j.value);return tt===null?["FFFFFF","FF","FF","FF"]:tt},hF=h=>{const j=h.toString(16);return(j.length===1?"0"+j:j).toUpperCase()},kI=h=>{const j=hF(h.red)+hF(h.green)+hF(h.blue);return jO(j)},pF=Math.min,gF=Math.max,VO=Math.round,lX=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,cX=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,dA=(h,j,tt,st)=>({red:h,green:j,blue:tt,alpha:st}),mF=h=>{const j=parseInt(h,10);return j.toString()===h&&j>=0&&j<=255},VG=h=>{let j,tt,st;const ut=(h.hue||0)%360;let mt=h.saturation/100,yt=h.value/100;if(mt=gF(0,pF(mt,1)),yt=gF(0,pF(yt,1)),mt===0)return j=tt=st=VO(255*yt),dA(j,tt,st,1);const kt=ut/60,Ot=yt*mt,zt=Ot*(1-Math.abs(kt%2-1)),Gt=yt-Ot;switch(Math.floor(kt)){case 0:j=Ot,tt=zt,st=0;break;case 1:j=zt,tt=Ot,st=0;break;case 2:j=0,tt=Ot,st=zt;break;case 3:j=0,tt=zt,st=Ot;break;case 4:j=zt,tt=0,st=Ot;break;case 5:j=Ot,tt=0,st=zt;break;default:j=tt=st=0}return j=VO(255*(j+Gt)),tt=VO(255*(tt+Gt)),st=VO(255*(st+Gt)),dA(j,tt,st,1)},PR=h=>{const j=aX(h),tt=parseInt(j[1],16),st=parseInt(j[2],16),ut=parseInt(j[3],16);return dA(tt,st,ut,1)},WG=(h,j,tt,st)=>{const ut=parseInt(h,10),mt=parseInt(j,10),yt=parseInt(tt,10),kt=parseFloat(st);return dA(ut,mt,yt,kt)},yF=h=>{const j=lX.exec(h);if(j!==null)return It.some(WG(j[1],j[2],j[3],"1"));const tt=cX.exec(h);return tt!==null?It.some(WG(tt[1],tt[2],tt[3],tt[4])):It.none()},qG=h=>`rgba(${h.red},${h.green},${h.blue},${h.alpha})`,ZG=dA(255,0,0,1),KG=h=>{h.dispatch("SkinLoaded")},uX=(h,j)=>{h.dispatch("SkinLoadError",j)},dX=h=>{h.dispatch("ResizeEditor")},bF=(h,j)=>{h.dispatch("ResizeContent",j)},fX=(h,j)=>{h.dispatch("ScrollContent",j)},YG=(h,j)=>{h.dispatch("TextColorChange",j)},WO=(h,j)=>{h.dispatch("AfterProgressState",{state:j})},XG=(h,j)=>h.dispatch("ResolveName",{name:j.nodeName.toLowerCase(),target:j}),hX=(h,j)=>{h.dispatch("ToggleToolbarDrawer",{state:j})},pX=(h,j)=>{h.dispatch("StylesTextUpdate",j)},gX=(h,j)=>{h.dispatch("AlignTextUpdate",j)},mX=(h,j)=>{h.dispatch("FontSizeTextUpdate",j)},yX=(h,j)=>{h.dispatch("FontSizeInputTextUpdate",j)},bX=(h,j)=>{h.dispatch("BlocksTextUpdate",j)},vF=(h,j)=>{h.dispatch("FontFamilyTextUpdate",j)},JG=h=>{h.dispatch("ToggleSidebar")},QG=h=>{h.dispatch("ToggleView")},qO=(h,j)=>()=>{h(),j()},ty=h=>fA(h,"NodeChange",j=>{j.setEnabled(h.selection.isEditable())}),vX=(h,j)=>tt=>{const st=W0(),ut=()=>{tt.setActive(h.formatter.match(j));const mt=h.formatter.formatChanged(j,tt.setActive);st.set(mt)};return h.initialized?ut():h.once("init",ut),()=>{h.off("init",ut),st.clear()}},ZO=(h,j)=>tt=>{const st=ty(h)(tt),ut=vX(h,j)(tt);return()=>{st(),ut()}},fA=(h,j,tt)=>st=>{const ut=()=>tt(st),mt=()=>{tt(st),h.on(j,ut)};return h.initialized?mt():h.once("init",mt),()=>{h.off("init",mt),h.off(j,ut)}},_j=h=>j=>()=>{h.undoManager.transact(()=>{h.focus(),h.execCommand("mceToggleFormat",!1,j.format)})},Ev=(h,j)=>()=>h.execCommand(j);var hA=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const $j={},_X=(h,j=10)=>{const tt=hA.getItem(h),st=_e(tt)?JSON.parse(tt):[],mt=(zt=>j-zt.length<0?zt.slice(0,j):zt)(st),yt=zt=>{An(mt,zt).each(kt),mt.unshift(zt),mt.length>j&&mt.pop(),hA.setItem(h,JSON.stringify(mt))},kt=zt=>{mt.splice(zt,1)};return{add:yt,state:()=>mt.slice(0)}},eU=h=>tr($j,h).getOrThunk(()=>{const j=`tinymce-custom-colors-${h}`,tt=hA.getItem(j);if(xt(tt)){const ut=hA.getItem("tinymce-custom-colors");hA.setItem(j,wt(ut)?ut:"[]")}const st=_X(j,10);return $j[h]=st,st}),xX=h=>On(eU(h).state(),j=>({type:"choiceitem",text:j,icon:"checkmark",value:j})),OR=(h,j)=>{eU(h).add(j)},pA=(h,j,tt)=>({hue:h,saturation:j,value:tt}),DR=h=>{let j=0,tt=0,st=0;const ut=h.red/255,mt=h.green/255,yt=h.blue/255,kt=Math.min(ut,Math.min(mt,yt)),Ot=Math.max(ut,Math.max(mt,yt));if(kt===Ot)return st=kt,pA(0,0,st*100);const zt=ut===kt?mt-yt:yt===kt?ut-mt:yt-ut;return j=ut===kt?3:yt===kt?1:5,j=60*(j-zt/(Ot-kt)),tt=(Ot-kt)/Ot,st=Ot,pA(Math.round(j),Math.round(tt*100),Math.round(st*100))},tU=h=>DR(PR(h)),nU=h=>kI(VG(h)),wX=h=>HG(h).orThunk(()=>yF(h).map(kI)).getOrThunk(()=>{const j=document.createElement("canvas");j.height=1,j.width=1;const tt=j.getContext("2d");tt.clearRect(0,0,j.width,j.height),tt.fillStyle="#FFFFFF",tt.fillStyle=h,tt.fillRect(0,0,1,1);const st=tt.getImageData(0,0,1,1).data,ut=st[0],mt=st[1],yt=st[2],kt=st[3];return kI(dA(ut,mt,yt,kt))}),NR="forecolor",LR="hilitecolor",KO=5,oU=h=>rU(h.map((j,tt)=>tt%2===0?"#"+wX(j).value:j)),rU=h=>{const j=[];for(let tt=0;tt<h.length;tt+=2)j.push({text:h[tt+1],value:h[tt],icon:"checkmark",type:"choiceitem"});return j},Ex=h=>j=>j.options.get(h),_F="#000000",CX=h=>{const j=h.options.register,tt=mt=>Mt(mt,_e)?{value:oU(mt),valid:!0}:{valid:!1,message:"Must be an array of strings."},st=mt=>Mt(mt,_e)?{value:rU(mt),valid:!0}:{valid:!1,message:"Must be an array of strings."},ut=mt=>Rt(mt)&&mt>0?{value:mt,valid:!0}:{valid:!1,message:"Must be a positive number."};j("color_map",{processor:tt,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),j("color_map_raw",{processor:st}),j("color_map_background",{processor:tt}),j("color_map_foreground",{processor:tt}),j("color_cols",{processor:ut,default:xF(h)}),j("color_cols_foreground",{processor:ut,default:sU(h,NR)}),j("color_cols_background",{processor:ut,default:sU(h,LR)}),j("custom_colors",{processor:"boolean",default:!0}),j("color_default_foreground",{processor:"string",default:_F}),j("color_default_background",{processor:"string",default:_F})},YO=(h,j)=>j===NR&&h.options.isSet("color_map_foreground")?Ex("color_map_foreground")(h):j===LR&&h.options.isSet("color_map_background")?Ex("color_map_background")(h):h.options.isSet("color_map_raw")?Ex("color_map_raw")(h):Ex("color_map")(h),xF=(h,j="default")=>Math.max(KO,Math.ceil(Math.sqrt(YO(h,j).length))),sU=(h,j)=>{const tt=Ex("color_cols")(h),st=xF(h,j);return tt===xF(h)?st:tt},iU=(h,j="default")=>Math.round(j===NR?Ex("color_cols_foreground")(h):j===LR?Ex("color_cols_background")(h):Ex("color_cols")(h)),aU=Ex("custom_colors"),kX=Ex("color_default_foreground"),SX=Ex("color_default_background"),EX="rgba(0, 0, 0, 0)",AX=h=>yF(h).exists(j=>j.alpha!==0),lU=h=>Nm(h,j=>{if(_s(j)){const tt=ru(j,"background-color");return Jr(AX(tt),tt)}else return It.none()}).getOr(EX),cU=(h,j)=>{const tt=ro.fromDom(h.selection.getStart()),st=j==="hilitecolor"?lU(tt):ru(tt,"color");return yF(st).map(ut=>"#"+kI(ut).value)},TX=(h,j,tt)=>{h.undoManager.transact(()=>{h.focus(),h.formatter.apply(j,{value:tt}),h.nodeChanged()})},Iw=(h,j)=>{h.undoManager.transact(()=>{h.focus(),h.formatter.remove(j,{value:null},void 0,!0),h.nodeChanged()})},IX=h=>{h.addCommand("mceApplyTextcolor",(j,tt)=>{TX(h,j,tt)}),h.addCommand("mceRemoveTextcolor",j=>{Iw(h,j)})},uU=h=>{const j="choiceitem",tt={type:j,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return h?[tt,{type:j,text:"Custom color",icon:"color-picker",value:"custom"}]:[tt]},FR=(h,j,tt,st)=>{tt==="custom"?mU(h)(mt=>{mt.each(yt=>{OR(j,yt),h.execCommand("mceApplyTextcolor",j,yt),st(yt)})},cU(h,j).getOr(_F)):tt==="remove"?(st(""),h.execCommand("mceRemoveTextcolor",j)):(st(tt),h.execCommand("mceApplyTextcolor",j,tt))},Em=(h,j,tt)=>h.concat(xX(j).concat(uU(tt))),dU=(h,j,tt)=>st=>{st(Em(h,j,tt))},wF=(h,j,tt)=>{const st=j==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";h.setIconFill(st,tt)},fU=(h,j)=>{h.setTooltip(j)},hU=(h,j)=>tt=>{const st=cU(h,j);return ou(st,tt.toUpperCase())},CF=(h,j,tt)=>{if(Bn(tt))return j==="forecolor"?"Text color":"Background color";const st=j==="forecolor"?"Text color {0}":"Background color {0}",ut=Em(YO(h,j),j,!1),mt=mn(ut,yt=>yt.value===tt).getOr({text:""}).text;return h.translate([st,h.translate(mt)])},pU=(h,j,tt,st)=>{h.ui.registry.addSplitButton(j,{tooltip:CF(h,tt,st.get()),presets:"color",icon:j==="forecolor"?"text-color":"highlight-bg-color",select:hU(h,tt),columns:iU(h,tt),fetch:dU(YO(h,tt),tt,aU(h)),onAction:ut=>{FR(h,tt,st.get(),Et)},onItemAction:(ut,mt)=>{FR(h,tt,mt,yt=>{st.set(yt),YG(h,{name:j,color:yt})})},onSetup:ut=>{wF(ut,j,st.get());const mt=yt=>{yt.name===j&&(wF(ut,yt.name,yt.color),fU(ut,CF(h,tt,yt.color)))};return h.on("TextColorChange",mt),qO(ty(h)(ut),()=>{h.off("TextColorChange",mt)})}})},gU=(h,j,tt,st,ut)=>{h.ui.registry.addNestedMenuItem(j,{text:st,icon:j==="forecolor"?"text-color":"highlight-bg-color",onSetup:mt=>(fU(mt,CF(h,tt,ut.get())),wF(mt,j,ut.get()),ty(h)(mt)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:hU(h,tt),initData:{storageKey:tt},onAction:mt=>{FR(h,tt,mt.value,yt=>{ut.set(yt),YG(h,{name:j,color:yt})})}}]})},mU=h=>(j,tt)=>{let st=!1;const ut=kt=>{const zt=kt.getData().colorpicker;st?(j(It.from(zt)),kt.close()):h.windowManager.alert(h.translate(["Invalid hex color code: {0}",zt]))},mt=(kt,Ot)=>{Ot.name==="hex-valid"&&(st=Ot.value)},yt={colorpicker:tt};h.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:yt,onAction:mt,onSubmit:ut,onClose:Et,onCancel:()=>{j(It.none())}})},RX=h=>{IX(h);const j=kX(h),tt=SX(h),st=ls(j),ut=ls(tt);pU(h,"forecolor","forecolor",st),pU(h,"backcolor","hilitecolor",ut),gU(h,"forecolor","forecolor","Text color",st),gU(h,"backcolor","hilitecolor","Background color",ut)},kF=(h,j,tt,st,ut,mt,yt,kt)=>{const Ot=DO(j),Gt=MX(j,tt,st,ut!=="color"?"normal":"color",mt,yt,kt);return V6(h,Ot,Gt,st,{menuType:ut})},MX=(h,j,tt,st,ut,mt,yt)=>xu(On(h,kt=>kt.type==="choiceitem"?MG(kt).fold(Tw,Ot=>It.some(jG(Ot,tt===1,st,j,mt(Ot.value),ut,yt,DO(h)))):It.none())),XO=(h,j)=>{const tt=_S(j);return h===1?{mode:"menu",moveOnTab:!0}:h==="auto"?{mode:"grid",selector:"."+tt.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(j==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:ut=>j==="color"?np(ut.element,"[aria-checked=true]"):It.none()}},PX=(h,j)=>h===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:h==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:j==="color"?".tox-swatches__row":".tox-collection__group",cell:j==="color"?`.${SO}`:`.${_I}`}},OX=(h,j)=>{const tt=DX(h,j),st=j.colorinput.getColorCols(h.initData.storageKey),ut="color",yt={...kF(Wr("menu-value"),tt,kt=>{h.onAction({value:kt})},st,ut,z_.CLOSE_ON_EXECUTE,h.select.getOr(hn),j.shared.providers),markers:_S(ut),movement:XO(st,ut),showMenuRole:!1};return{type:"widget",data:{value:Wr("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[dF.widget(ZE.sketch(yt))]}},DX=(h,j)=>{const tt=h.initData.allowCustomColors&&j.colorinput.hasCustomColors();return h.initData.colors.fold(()=>Em(j.colorinput.getColors(h.initData.storageKey),h.initData.storageKey,tt),st=>st.concat(uU(tt)))},yU=Wr("cell-over"),bU=Wr("cell-execute"),NX=h=>(j,tt)=>h.shared.providers.translate(["{0} columns, {1} rows",tt,j]),LX=(h,j,tt)=>{const st=yt=>rs(yt,yU,{row:h,col:j}),ut=yt=>rs(yt,bU,{row:h,col:j}),mt=(yt,kt)=>{kt.stop(),ut(yt)};return km({dom:{tag:"div",attributes:{role:"button","aria-label":tt}},behaviours:gr([Ws("insert-table-picker-cell",[Qo(Z0(),Ds.focus),Qo(e0(),ut),Qo(r2(),mt),Qo(WA(),mt)]),na.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ds.config({onFocus:st})])})},FX=(h,j,tt)=>{const st=[];for(let ut=0;ut<j;ut++){const mt=[];for(let yt=0;yt<tt;yt++){const kt=h(ut+1,yt+1);mt.push(LX(ut,yt,kt))}st.push(mt)}return st},zX=(h,j,tt,st,ut)=>{for(let mt=0;mt<st;mt++)for(let yt=0;yt<ut;yt++)na.set(h[mt][yt],mt<=j&&yt<=tt)},BX=h=>rn(h,j=>On(j,Uy)),vU=(h,j)=>mp(`${j}x${h}`),$X={inserttable:(h,j)=>{const ut=NX(j),mt=FX(ut,10,10),yt=vU(0,0),kt=nu({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[yt],behaviours:gr([Gs.config({})])});return{type:"widget",data:{value:Wr("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[dF.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:BX(mt).concat(kt.asSpec()),behaviours:gr([Ws("insert-table-picker",[ep(Ot=>{Gs.set(kt.get(Ot),[yt])}),JA(yU,(Ot,zt,Gt)=>{const{row:Wt,col:sn}=Gt.event;zX(mt,Wt,sn,10,10),Gs.set(kt.get(Ot),[vU(Wt+1,sn+1)])}),JA(bU,(Ot,zt,Gt)=>{const{row:Wt,col:sn}=Gt.event;wl(Ot,Lm()),h.onAction({numRows:Wt+1,numColumns:sn+1})})]),ys.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:OX},_U=(h,j)=>tr($X,h.fancytype).map(tt=>tt(h,j)),GX=(h,j,tt,st=!0,ut=!1)=>{const mt=ut?tX(tt.icons):eX(tt.icons),yt=Ot=>({isEnabled:()=>!Rs.isDisabled(Ot),setEnabled:zt=>Rs.set(Ot,!zt),setIconFill:(zt,Gt)=>{np(Ot.element,`svg path[class="${zt}"], rect[class="${zt}"]`).each(Wt=>{Vo(Wt,"fill",Gt)})},setTooltip:zt=>{const Gt=tt.translate(zt);Vo(Ot.element,"aria-label",Gt)}}),kt=MR({presets:"normal",iconContent:h.icon,textContent:h.text,htmlContent:It.none(),ariaLabel:h.text,caret:It.some(mt),checkMark:It.none(),shortcutContent:h.shortcut},tt,st);return lA({context:h.context,data:cA(h),getApi:yt,enabled:h.enabled,onAction:Et,onSetup:h.onSetup,triggersSubmenu:!0,itemBehaviours:[]},kt,j,tt)},xU=(h,j,tt,st=!0)=>{const ut=yt=>({isEnabled:()=>!Rs.isDisabled(yt),setEnabled:kt=>Rs.set(yt,!kt)}),mt=MR({presets:"normal",iconContent:h.icon,textContent:h.text,htmlContent:It.none(),ariaLabel:h.text,caret:It.none(),checkMark:It.none(),shortcutContent:h.shortcut},tt,st);return lA({context:h.context,data:cA(h),getApi:ut,enabled:h.enabled,onAction:h.onAction,onSetup:h.onSetup,triggersSubmenu:!1,itemBehaviours:[]},mt,j,tt)},jX=h=>({type:"separator",dom:{tag:"div",classes:[_I,kY]},components:h.text.map(mp).toArray()}),UX=(h,j,tt,st=!0)=>{const ut=yt=>({setActive:kt=>{na.set(yt,kt)},isActive:()=>na.isOn(yt),isEnabled:()=>!Rs.isDisabled(yt),setEnabled:kt=>Rs.set(yt,!kt)}),mt=MR({iconContent:h.icon,textContent:h.text,htmlContent:It.none(),ariaLabel:h.text,checkMark:It.some(FG(tt.icons)),caret:It.none(),shortcutContent:h.shortcut,presets:"normal",meta:h.meta},tt,st);return Ou(lA({context:h.context,data:cA(h),enabled:h.enabled,getApi:ut,onAction:h.onAction,onSetup:h.onSetup,triggersSubmenu:!1,itemBehaviours:[]},mt,j,tt),{toggling:{toggleClass:F6,toggleOnExecute:!1,selected:h.active},role:h.role.getOrUndefined()})},HX=sX,SF=jX,VX=xU,WX=GX,qX=UX,ZX=_U,wU=GG;var YX=Object.freeze({__proto__:null,getCoupled:(h,j,tt,st)=>tt.getOrCreate(h,j,st),getExistingCoupled:(h,j,tt,st)=>tt.getExisting(h,j,st)}),CU=[Ql("others",lv(Ks.value,zy()))],XX=Object.freeze({__proto__:null,init:()=>{const h={},j=(mt,yt)=>{if(Oo(mt.others).length===0)throw new Error("Cannot find any known coupled components");return tr(h,yt)},tt=(mt,yt,kt)=>j(yt,kt).getOrThunk(()=>{const zt=tr(yt.others,kt).getOrDie("No information found for coupled component: "+kt)(mt),Gt=mt.getSystem().build(zt);return h[kt]=Gt,Gt}),st=(mt,yt,kt)=>j(yt,kt).orThunk(()=>(tr(yt.others,kt).getOrDie("No information found for coupled component: "+kt),It.none())),ut=Nt({});return O0({readState:ut,getExisting:st,getOrCreate:tt})}});const $p=Fm({fields:CU,name:"coupling",apis:YX,state:XX}),EF=h=>{let j=It.none(),tt=[];const st=zt=>EF(Gt=>{ut(Wt=>{Gt(zt(Wt))})}),ut=zt=>{yt()?Ot(zt):tt.push(zt)},mt=zt=>{yt()||(j=It.some(zt),kt(tt),tt=[])},yt=()=>j.isSome(),kt=zt=>{_o(zt,Ot)},Ot=zt=>{j.each(Gt=>{setTimeout(()=>{zt(Gt)},0)})};return h(mt),{get:ut,map:st,isReady:yt}},JX={nu:EF,pure:h=>EF(j=>{j(h)})},QX=h=>{setTimeout(()=>{throw h},0)},SI=h=>{const j=Ot=>{h().then(Ot,QX)};return{map:Ot=>SI(()=>h().then(Ot)),bind:Ot=>SI(()=>h().then(zt=>Ot(zt).toPromise())),anonBind:Ot=>SI(()=>h().then(()=>Ot.toPromise())),toLazy:()=>JX.nu(j),toCached:()=>{let Ot=null;return SI(()=>(Ot===null&&(Ot=h()),Ot))},toPromise:h,get:j}},z0={nu:h=>SI(()=>new Promise(h)),pure:h=>SI(()=>Promise.resolve(h))},kU=Nt("sink"),SU=Nt(Zy({name:kU(),overrides:Nt({dom:{tag:"div"},behaviours:gr([s0.config({useFixed:fn})]),events:yu([l2(dv()),l2(gp()),l2(r2())])})})),AF=(h,j)=>{const tt=h.getHotspot(j).getOr(j),st="hotspot",ut=h.getAnchorOverrides();return h.layouts.fold(()=>({type:st,hotspot:tt,overrides:ut}),mt=>({type:st,hotspot:tt,overrides:ut,layouts:mt}))},eJ=(h,j,tt)=>{const st=h.fetch;return st(tt).map(j)},tJ=(h,j,tt,st,ut,mt,yt)=>{const kt=eJ(h,j,st),Ot=EU(st,h);return kt.map(zt=>zt.bind(Gt=>{const Wt=Gt.menus[Gt.primary];return It.from(Wt).each(sn=>{h.listRole.each(cn=>{sn.role=cn})}),It.from(Aw.sketch({...mt.menu(),uid:dE(""),data:Gt,highlightOnOpen:yt,onOpenMenu:(sn,cn)=>{const xn=Ot().getOrDie();s0.position(xn,cn,{anchor:tt}),Ul.decloak(ut)},onOpenSubmenu:(sn,cn,xn)=>{const Mn=Ot().getOrDie();s0.position(Mn,xn,{anchor:{type:"submenu",item:cn}}),Ul.decloak(ut)},onRepositionMenu:(sn,cn,xn)=>{const Mn=Ot().getOrDie();s0.position(Mn,cn,{anchor:tt}),_o(xn,vo=>{s0.position(Mn,vo.triggeredMenu,{anchor:{type:"submenu",item:vo.triggeringItem}})})},onEscape:()=>(Ds.focus(st),Ul.close(ut),It.some(!0))}))}))},JO=(h,j,tt,st,ut,mt,yt)=>{const kt=AF(h,tt);return tJ(h,j,kt,tt,st,ut,yt).map(zt=>(zt.fold(()=>{Ul.isOpen(st)&&Ul.close(st)},Gt=>{Ul.cloak(st),Ul.open(st,Gt),mt(st)}),st))},nJ=(h,j,tt,st,ut,mt,yt)=>(Ul.close(st),z0.pure(st)),TF=(h,j,tt,st,ut,mt)=>{const yt=$p.getCoupled(tt,"sandbox");return(Ul.isOpen(yt)?nJ:JO)(h,j,tt,yt,st,ut,mt)},IF=(h,j,tt)=>{const st=Ll.getCurrent(j).getOr(j),ut=bn(h.element);tt?Xo(st.element,"min-width",ut+"px"):y1(st.element,ut)},EU=(h,j)=>h.getSystem().getByUid(j.uid+"-"+kU()).map(tt=>()=>Ks.value(tt)).getOrThunk(()=>j.lazySink.fold(()=>()=>Ks.error(new Error("No internal sink is specified, nor could an external sink be found")),tt=>()=>tt(h))),AU=h=>{Ul.getState(h).each(j=>{Aw.repositionMenus(j)})},RF=(h,j,tt)=>{const st=mE(),ut=(kt,Ot)=>{const zt=AF(h,j);st.link(j.element),h.matchWidth&&IF(zt.hotspot,Ot,h.useMinWidth),h.onOpen(zt,kt,Ot),tt!==void 0&&tt.onOpen!==void 0&&tt.onOpen(kt,Ot)},mt=(kt,Ot)=>{st.unlink(j.element),yt().getOr(Ot).element.dom.dispatchEvent(new window.FocusEvent("focusout")),tt!==void 0&&tt.onClose!==void 0&&tt.onClose(kt,Ot)},yt=EU(j,h);return{dom:{tag:"div",classes:h.sandboxClasses,attributes:{id:st.id}},behaviours:vv.augment(h.sandboxBehaviours,[zr.config({store:{mode:"memory",initialValue:j}}),Ul.config({onOpen:ut,onClose:mt,isPartOf:(kt,Ot,zt)=>cw(Ot,zt)||cw(j,zt),getAttachPoint:()=>yt().getOrDie()}),Ll.config({find:kt=>Ul.getState(kt).bind(Ot=>Ll.getCurrent(Ot))}),ky.config({channels:{...FE({isExtraPart:hn}),...zE({doReposition:AU})}})])}},MF=h=>{const j=$p.getCoupled(h,"sandbox");AU(j)},QO=()=>[ko("sandboxClasses",[]),vv.field("sandboxBehaviours",[Ll,ky,Ul,zr])],oJ=Nt([Jo("dom"),Jo("fetch"),zl("onOpen"),v0("onExecute"),ko("getHotspot",It.some),ko("getAnchorOverrides",Nt({})),pw(),Bm("dropdownBehaviours",[na,$p,ys,Ds]),Jo("toggleClass"),ko("eventOrder",{}),Kl("lazySink"),ko("matchWidth",!1),ko("useMinWidth",!1),Kl("role"),Kl("listRole")].concat(QO())),rJ=Nt([_v({schema:[I_(),ko("fakeFocus",!1)],name:"menu",defaults:h=>({onExecute:h.onExecute})}),SU()]),TU=(h,j,tt,st)=>{const ut=Gt=>tr(h.dom,"attributes").bind(Wt=>tr(Wt,Gt)),mt=Gt=>{Ul.getState(Gt).each(Wt=>{Aw.highlightPrimary(Wt)})},yt=(Gt,Wt,sn)=>TF(h,Jt,Gt,st,Wt,sn),kt=Gt=>{yt(Gt,mt,Ry.HighlightMenuAndItem).get(Et)},Ot={expand:Gt=>{na.isOn(Gt)||yt(Gt,Et,Ry.HighlightNone).get(Et)},open:Gt=>{na.isOn(Gt)||yt(Gt,Et,Ry.HighlightMenuAndItem).get(Et)},refetch:Gt=>$p.getExistingCoupled(Gt,"sandbox").fold(()=>yt(Gt,Et,Ry.HighlightMenuAndItem).map(Et),sn=>JO(h,Jt,Gt,sn,st,Et,Ry.HighlightMenuAndItem).map(Et)),isOpen:na.isOn,close:Gt=>{na.isOn(Gt)&&yt(Gt,Et,Ry.HighlightMenuAndItem).get(Et)},repositionMenus:Gt=>{na.isOn(Gt)&&MF(Gt)}},zt=(Gt,Wt)=>(Qx(Gt),It.some(!0));return{uid:h.uid,dom:h.dom,components:j,behaviours:$m(h.dropdownBehaviours,[na.config({toggleClass:h.toggleClass,aria:{mode:"expanded"}}),$p.config({others:{sandbox:Gt=>RF(h,Gt,{onOpen:()=>na.on(Gt),onClose:()=>na.off(Gt)})}}),ys.config({mode:"special",onSpace:zt,onEnter:zt,onDown:(Gt,Wt)=>{if(r1.isOpen(Gt)){const sn=$p.getCoupled(Gt,"sandbox");mt(sn)}else r1.open(Gt);return It.some(!0)},onEscape:(Gt,Wt)=>r1.isOpen(Gt)?(r1.close(Gt),It.some(!0)):It.none()}),Ds.config({})]),events:nR(It.some(kt)),eventOrder:{...h.eventOrder,[e0()]:["disabling","toggling","alloy.base.behaviour"]},apis:Ot,domModification:{attributes:{"aria-haspopup":h.listRole.getOr("true"),...h.role.fold(()=>({}),Gt=>({role:Gt})),...h.dom.tag==="button"?{type:ut("type").getOr("button")}:{}}}}},r1=d0({name:"Dropdown",configFields:oJ(),partFields:rJ(),factory:TU,apis:{open:(h,j)=>h.open(j),refetch:(h,j)=>h.refetch(j),expand:(h,j)=>h.expand(j),close:(h,j)=>h.close(j),isOpen:(h,j)=>h.isOpen(j),repositionMenus:(h,j)=>h.repositionMenus(j)}}),sJ=h=>{switch(h.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:h}}},iJ=h=>{const j=zr.getValue(h),tt=RO(h).map(xR);r1.refetch(j).get(()=>{const st=$p.getCoupled(j,"sandbox");tt.each(ut=>RO(st).each(mt=>AY(mt,ut)))})},aJ=(h,j)=>{lJ(h).each(tt=>{b3(h,tt.element,j.event.eventType,j.event.interactionEvent)})},lJ=h=>Ul.getState(h).bind(kr.getHighlighted).bind(kr.getHighlighted),cJ=h=>X0(h.element,MO)?It.some(h.element):np(h.element,"."+MO),zR=(h,j,tt)=>{yG(h).each(st=>{TY(st,tt),cJ(j).each(mt=>{Os(mt,"id").each(yt=>Vo(st.element,"aria-controls",yt))})}),Vo(tt.element,"aria-selected","true")},uJ=(h,j,tt)=>{Vo(tt.element,"aria-selected","false")},eD=h=>{yG(h).each(j=>Ds.focus(j))},dJ=h=>$p.getExistingCoupled(h,"sandbox").bind(RO).map(xR).map(tt=>tt.fetchPattern).getOr("");var tD;(function(h){h[h.ContentFocus=0]="ContentFocus",h[h.UiFocus=1]="UiFocus"})(tD||(tD={}));const fJ=(h,j,tt,st,ut)=>{const mt=tt.shared.providers,yt=kt=>ut?{...kt,shortcut:It.none(),icon:kt.text.isSome()?It.none():kt.icon}:kt;switch(h.type){case"menuitem":return WY(h).fold(Tw,kt=>It.some(VX(yt(kt),j,mt,st)));case"nestedmenuitem":return ZY(h).fold(Tw,kt=>It.some(WX(yt(kt),j,mt,st,ut)));case"togglemenuitem":return KY(h).fold(Tw,kt=>It.some(qX(yt(kt),j,mt,st)));case"separator":return FY(h).fold(Tw,kt=>It.some(SF(kt)));case"fancymenuitem":return HY(h).fold(Tw,kt=>ZX(kt,tt));default:return console.error("Unknown item in general menu",h),It.none()}},hJ=(h,j,tt,st,ut,mt,yt)=>{const kt=st===1,Ot=!kt||DO(h);return xu(On(h,zt=>{switch(zt.type){case"separator":return $_(zt).fold(Tw,Gt=>It.some(SF(Gt)));case"cardmenuitem":return tF(zt).fold(Tw,Gt=>It.some(wU({...Gt,onAction:Wt=>{Gt.onAction(Wt),tt(Gt.value,Gt.meta)}},ut,mt,{itemBehaviours:$G(Gt.meta,mt,It.none()),cardText:{matchText:j,highlightOn:yt}})));case"autocompleteitem":default:return IG(zt).fold(Tw,Gt=>It.some(HX(Gt,j,kt,"normal",tt,ut,mt,Ot)))}}))},pJ=(h,j,tt,st,ut,mt)=>{const yt=DO(j),kt=xu(On(j,Gt=>{const Wt=cn=>ut?!Ms(cn,"text"):yt,sn=cn=>fJ(cn,tt,st,Wt(cn),ut);return Gt.type==="nestedmenuitem"&&Gt.getSubmenuItems().length<=0?sn({...Gt,enabled:!1}):sn(Gt)})),Ot=sJ(mt);return(ut?_G:V6)(h,yt,kt,1,Ot)},EI=h=>Aw.singleData(h.value,h),AI=(h,j,tt,st)=>{const ut=XO(j,st),mt=_S(st);return{data:EI({...h,movement:ut,menuBehaviours:CI.unnamedEvents(j!=="auto"?[]:[ep((yt,kt)=>{rF(yt,4,mt.item).each(({numColumns:Ot,numRows:zt})=>{ys.setGridSize(yt,zt,Ot)})})])}),menu:{markers:_S(st),fakeFocus:tt===tD.ContentFocus}}},IU=h=>PT.create(ro.fromDom(h.startContainer),h.startOffset,ro.fromDom(h.endContainer),h.endOffset),mJ={register:(h,j)=>{const tt=Wr("autocompleter"),st=ls(!1),ut=ls(!1),mt=Wl(),yt=km(vp.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:tt}},components:[],fireDismissalEventInstead:{},inlineBehaviours:gr([Ws("dismissAutocompleter",[Qo(jy(),()=>Wt()),Qo(y3(),(jn,po)=>{Os(po.event.target,"id").each(yo=>Vo(ro.fromDom(h.getBody()),"aria-activedescendant",yo))})])]),lazySink:j.getSink})),kt=()=>vp.isOpen(yt),Ot=ut.get,zt=()=>{if(kt()){vp.hide(yt),h.dom.remove(tt,!1);const jn=ro.fromDom(h.getBody());Os(jn,"aria-owns").filter(po=>po===tt).each(()=>{Kt(jn,"aria-owns"),Kt(jn,"aria-activedescendant")})}},Gt=()=>vp.getContent(yt).bind(jn=>Jn(jn.components(),0)),Wt=()=>h.execCommand("mceAutocompleterClose"),sn=jn=>{const po=wo(jn,yo=>It.from(yo.columns)).getOr(1);return rn(jn,yo=>{const zo=yo.items;return hJ(zo,yo.matchText,($o,Cr)=>{const Ur={hide:()=>Wt(),reload:Ko=>{zt(),h.execCommand("mceAutocompleterReload",!1,{fetchOptions:Ko})}};h.execCommand("mceAutocompleterRefreshActiveRange"),mt.get().each(Ko=>{st.set(!0),yo.onAction(Ur,Ko,$o,Cr),st.set(!1)})},po,z_.BUBBLE_TO_SANDBOX,j,yo.highlightOn)})},cn=(jn,po)=>{const yo=wo(jn,zo=>It.from(zo.columns)).getOr(1);vp.showMenuAt(yt,{anchor:{type:"selection",getSelection:()=>mt.get().map(IU),root:ro.fromDom(h.getBody())}},AI(V6("autocompleter-value",!0,po,yo,{menuType:"normal"}),yo,tD.ContentFocus,"normal")),Gt().each(kr.highlightFirst)},xn=jn=>{const po=sn(jn);po.length>0?(cn(jn,po),Vo(ro.fromDom(h.getBody()),"aria-owns",tt),h.inline||Mn()):zt()},Mn=()=>{h.dom.get(tt)&&h.dom.remove(tt,!1);const jn=h.getDoc().documentElement,po=h.selection.getNode(),yo=aE(yt.element);Zs(yo,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${po.offsetTop}px`,left:`${po.offsetLeft}px`}),h.dom.add(jn,yo.dom),np(yo,'[role="menu"]').each(zo=>{Bs(zo,"position"),Bs(zo,"max-height")})};h.on("AutocompleterStart",({lookupData:jn})=>{ut.set(!0),st.set(!1),xn(jn)}),h.on("AutocompleterUpdate",({lookupData:jn})=>xn(jn)),h.on("AutocompleterUpdateActiveRange",({range:jn})=>mt.set(jn)),h.on("AutocompleterEnd",()=>{zt(),ut.set(!1),st.set(!1),mt.clear()});const vo={cancelIfNecessary:Wt,isMenuOpen:kt,isActive:Ot,isProcessingAction:st.get,getMenu:Gt};CY.setup(vo,h)}},BR=(h,j,tt)=>R_(h,j,tt).isSome(),RU=(h,j)=>{let tt=null;return{cancel:()=>{tt!==null&&(clearTimeout(tt),tt=null)},schedule:(...mt)=>{tt=setTimeout(()=>{h.apply(null,mt),tt=null},j)}}},MU=5,yJ=400,PU=h=>{const j=h.raw;return j.touches===void 0||j.touches.length!==1?It.none():It.some(j.touches[0])},bJ=(h,j)=>{const tt=Math.abs(h.clientX-j.x),st=Math.abs(h.clientY-j.y);return tt>MU||st>MU},vJ=h=>{const j=Wl(),tt=ls(!1),st=RU(zt=>{h.triggerEvent(Xx(),zt),tt.set(!0)},yJ),ut=zt=>(PU(zt).each(Gt=>{st.cancel();const Wt={x:Gt.clientX,y:Gt.clientY,target:zt.target};st.schedule(zt),tt.set(!1),j.set(Wt)}),It.none()),mt=zt=>(st.cancel(),PU(zt).each(Gt=>{j.on(Wt=>{bJ(Gt,Wt)&&j.clear()})}),It.none()),yt=zt=>{st.cancel();const Gt=Wt=>Vl(Wt.target,zt.target);return j.get().filter(Gt).map(Wt=>tt.get()?(zt.prevent(),!1):h.triggerEvent(WA(),zt))},kt=Ys([{key:uv(),value:ut},{key:C_(),value:mt},{key:Gl(),value:yt}]);return{fireIfReady:(zt,Gt)=>tr(kt,Gt).bind(Wt=>Wt(zt))}},_J=h=>h.raw.which===Fs[0]&&!Wn(["input","textarea"],Xl(h.target))&&!BR(h.target,'[contenteditable="true"]'),xJ=(h,j)=>{const tt={stopBackspace:!0,...j},st=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],ut=vJ(tt),mt=On(st.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),cn=>J0(h,cn,xn=>{ut.fireIfReady(xn,cn).each(vo=>{vo&&xn.kill()}),tt.triggerEvent(cn,xn)&&xn.kill()})),yt=Wl(),kt=J0(h,"paste",cn=>{ut.fireIfReady(cn,"paste").each(Mn=>{Mn&&cn.kill()}),tt.triggerEvent("paste",cn)&&cn.kill(),yt.set(setTimeout(()=>{tt.triggerEvent(QS(),cn)},0))}),Ot=J0(h,"keydown",cn=>{tt.triggerEvent("keydown",cn)?cn.kill():tt.stopBackspace&&_J(cn)&&cn.prevent()}),zt=J0(h,"focusin",cn=>{tt.triggerEvent("focusin",cn)&&cn.kill()}),Gt=Wl(),Wt=J0(h,"focusout",cn=>{tt.triggerEvent("focusout",cn)&&cn.kill(),Gt.set(setTimeout(()=>{tt.triggerEvent(s2(),cn)},0))});return{unbind:()=>{_o(mt,cn=>{cn.unbind()}),Ot.unbind(),zt.unbind(),Wt.unbind(),kt.unbind(),yt.on(clearTimeout),Gt.on(clearTimeout)}}},OU=(h,j)=>{const tt=tr(h,"target").getOr(j);return ls(tt)},DU=(h,j)=>{const tt=ls(!1),st=ls(!1);return{stop:()=>{tt.set(!0)},cut:()=>{st.set(!0)},isStopped:tt.get,isCut:st.get,event:h,setSource:j.set,getSource:j.get}},TI=h=>{const j=ls(!1);return{stop:()=>{j.set(!0)},cut:Et,isStopped:j.get,isCut:hn,event:h,setSource:Vt("Cannot set source of a broadcasted event"),getSource:Vt("Cannot get source of a broadcasted event")}},Ax=tn.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),NU=(h,j,tt,st,ut,mt)=>{const yt=h(j,st),kt=DU(tt,ut);return yt.fold(()=>(mt.logEventNoHandlers(j,st),Ax.complete()),Ot=>{const zt=Ot.descHandler;return aw(zt)(kt),kt.isStopped()?(mt.logEventStopped(j,Ot.element,zt.purpose),Ax.stopped()):kt.isCut()?(mt.logEventCut(j,Ot.element,zt.purpose),Ax.complete()):Yp(Ot.element).fold(()=>(mt.logNoParent(j,Ot.element,zt.purpose),Ax.complete()),Wt=>(mt.logEventResponse(j,Ot.element,zt.purpose),Ax.resume(Wt)))})},PF=(h,j,tt,st,ut,mt)=>NU(h,j,tt,st,ut,mt).fold(fn,yt=>PF(h,j,tt,yt,ut,mt),hn),LU=(h,j,tt,st,ut)=>{const mt=OU(tt,st);return NU(h,j,tt,st,mt,ut)},nD=(h,j,tt)=>{const st=TI(j);return _o(h,ut=>{const mt=ut.descHandler;aw(mt)(st)}),st.isStopped()},wJ=(h,j,tt,st)=>II(h,j,tt,tt.target,st),II=(h,j,tt,st,ut)=>{const mt=OU(tt,st);return PF(h,j,tt,st,mt,ut)},$R=(h,j)=>({element:h,descHandler:j}),CJ=(h,j)=>({id:h,descHandler:j}),kJ=()=>{const h={},j=(yt,kt,Ot)=>{sr(Ot,(zt,Gt)=>{const Wt=h[Gt]!==void 0?h[Gt]:{};Wt[kt]=GC(zt,yt),h[Gt]=Wt})},tt=(yt,kt)=>BC(kt).bind(Ot=>tr(yt,Ot)).map(Ot=>$R(kt,Ot));return{registerId:j,unregisterId:yt=>{sr(h,(kt,Ot)=>{Ms(kt,yt)&&delete kt[yt]})},filterByType:yt=>tr(h,yt).map(kt=>_l(kt,(Ot,zt)=>CJ(zt,Ot))).getOr([]),find:(yt,kt,Ot)=>tr(h,kt).bind(zt=>Nm(Ot,Gt=>tt(zt,Gt),yt))}},SJ=()=>{const h=kJ(),j={},tt=zt=>{const Gt=zt.element;return BC(Gt).getOrThunk(()=>L3("uid-",zt.element))},st=(zt,Gt)=>{const Wt=j[Gt];if(Wt===zt)mt(zt);else throw new Error('The tagId "'+Gt+'" is already used by: '+sw(Wt.element)+`
Cannot use it for: `+sw(zt.element)+`
The conflicting element is`+(Fn(Wt.element)?" ":" not ")+"already in the DOM")},ut=zt=>{const Gt=tt(zt);cu(j,Gt)&&st(zt,Gt);const Wt=[zt];h.registerId(Wt,Gt,zt.events),j[Gt]=zt},mt=zt=>{BC(zt.element).each(Gt=>{delete j[Gt],h.unregisterId(Gt)})};return{find:(zt,Gt,Wt)=>h.find(zt,Gt,Wt),filter:zt=>h.filterByType(zt),register:ut,unregister:mt,getById:zt=>tr(j,zt)}},Tx=Ty({name:"Container",factory:h=>{const{attributes:j,...tt}=h.dom;return{uid:h.uid,dom:{tag:"div",attributes:{role:"presentation",...j},...tt},components:h.components,behaviours:ZT(h.containerBehaviours),events:h.events,domModification:h.domModification,eventOrder:h.eventOrder}},configFields:[ko("components",[]),Bm("containerBehaviours",[]),ko("events",{}),ko("domModification",{}),ko("eventOrder",{})]}),OF=h=>{const j=jn=>Yp(h.element).fold(fn,po=>Vl(jn,po)),tt=SJ(),st=(jn,po)=>tt.find(j,jn,po),ut=xJ(h.element,{triggerEvent:(jn,po)=>N3(jn,po.target,yo=>wJ(st,jn,po,yo))}),mt={debugInfo:Nt("real"),triggerEvent:(jn,po,yo)=>{N3(jn,po,zo=>II(st,jn,yo,po,zo))},triggerFocus:(jn,po)=>{BC(jn).fold(()=>{mv(jn)},yo=>{N3(P1(),jn,zo=>(LU(st,P1(),{originator:po,kill:Et,prevent:Et,target:jn},jn,zo),!1))})},triggerEscape:(jn,po)=>{mt.triggerEvent("keydown",jn.element,po.event)},getByUid:jn=>Mn(jn),getByDom:jn=>vo(jn),build:km,buildOrPatch:V3,addToGui:jn=>{Ot(jn)},removeFromGui:jn=>{zt(jn)},addToWorld:jn=>{yt(jn)},removeFromWorld:jn=>{kt(jn)},broadcast:jn=>{sn(jn)},broadcastOn:(jn,po)=>{cn(jn,po)},broadcastEvent:(jn,po)=>{xn(jn,po)},isConnected:fn},yt=jn=>{jn.connect(mt),Al(jn.element)||(tt.register(jn),_o(jn.components(),yt),mt.triggerEvent(ZA(),jn.element,{target:jn.element}))},kt=jn=>{Al(jn.element)||(_o(jn.components(),kt),tt.unregister(jn)),jn.disconnect()},Ot=jn=>{yx(h,jn)},zt=jn=>{bx(jn)},Gt=()=>{ut.unbind(),h0(h.element)},Wt=jn=>{const po=tt.filter(O1());_o(po,yo=>{const zo=yo.descHandler;aw(zo)(jn)})},sn=jn=>{Wt({universal:!0,data:jn})},cn=(jn,po)=>{Wt({universal:!1,channels:jn,data:po})},xn=(jn,po)=>{const yo=tt.filter(jn);return nD(yo,po)},Mn=jn=>tt.getById(jn).fold(()=>Ks.error(new Error('Could not find component with uid: "'+jn+'" in system.')),Ks.value),vo=jn=>{const po=BC(jn).getOr("not found");return Mn(po)};return yt(h),{root:h,element:h.element,destroy:Gt,add:Ot,remove:zt,getByUid:Mn,getByDom:vo,addToWorld:yt,removeFromWorld:kt,broadcast:sn,broadcastOn:cn,broadcastEvent:xn}},oD=(h,j)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:On(h.items,j.interpreter)}),EJ=Nt([ko("prefix","form-field"),Bm("fieldBehaviours",[Ll,zr])]),DF=Nt([Zy({schema:[Jo("dom")],name:"label"}),Zy({factory:{sketch:h=>({uid:h.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:h.text}})},schema:[Jo("text")],name:"aria-descriptor"}),x0({factory:{sketch:h=>{const j=Yr(h,["factory"]);return h.factory.sketch(j)}},schema:[Jo("factory")],name:"field"})]),AJ=(h,j,tt,st)=>{const ut=$m(h.fieldBehaviours,[Ll.config({find:kt=>Du(kt,h,"field")}),zr.config({store:{mode:"manual",getValue:kt=>Ll.getCurrent(kt).bind(zr.getValue),setValue:(kt,Ot)=>{Ll.getCurrent(kt).each(zt=>{zr.setValue(zt,Ot)})}}})]),mt=yu([ep((kt,Ot)=>{const zt=j1(kt,h,["label","field","aria-descriptor"]);zt.field().each(Gt=>{const Wt=Wr(h.prefix);zt.label().each(sn=>{Vo(sn.element,"for",Wt),Vo(Gt.element,"id",Wt)}),zt["aria-descriptor"]().each(sn=>{const cn=Wr(h.prefix);Vo(sn.element,"id",cn),Vo(Gt.element,"aria-describedby",cn)})})})]),yt={getField:kt=>Du(kt,h,"field"),getLabel:kt=>Du(kt,h,"label")};return{uid:h.uid,dom:h.dom,components:j,behaviours:ut,events:mt,apis:yt}},pu=d0({name:"FormField",configFields:EJ(),partFields:DF(),factory:AJ,apis:{getField:(h,j)=>h.getField(j),getLabel:(h,j)=>h.getLabel(j)}});var TJ=tinymce.util.Tools.resolve("tinymce.html.Entities");const RI=(h,j,tt,st)=>{const ut=RJ(h,j,tt,st);return pu.sketch(ut)},IJ=(h,j)=>RI(h,j,[],[]),RJ=(h,j,tt,st)=>({dom:NF(tt),components:h.toArray().concat([j]),fieldBehaviours:gr(st)}),MJ=()=>NF([]),NF=h=>({tag:"div",classes:["tox-form__group"].concat(h)}),ES=(h,j)=>pu.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[mp(j.translate(h))]}),Yy=Wr("form-component-change"),GR=Wr("form-close"),AS=Wr("form-cancel"),Rw=Wr("form-action"),MI=Wr("form-submit"),rD=Wr("form-block"),LF=Wr("form-unblock"),FU=Wr("form-tabchange"),zU=Wr("form-resize"),PJ=(h,j,tt)=>{const st=h.label.map(cn=>ES(cn,j)),ut=j.icons(),mt=cn=>{var xn;return(xn=ut[cn])!==null&&xn!==void 0?xn:cn},yt=cn=>(xn,Mn)=>{R_(Mn.event.target,"[data-collection-item-value]").each(vo=>{cn(xn,Mn,vo,Kr(vo,"data-collection-item-value"))})},kt=(cn,xn)=>{const vo=j.checkUiComponentContext("mode:design").shouldDisable||j.isDisabled()?" tox-collection__item--state-disabled":"",jn=On(xn,zo=>{const $o=W1.translate(zo.text),Cr=h.columns===1?`<div class="tox-collection__item-label">${$o}</div>`:"",Ur=`<div class="tox-collection__item-icon">${mt(zo.icon)}</div>`,Ko={_:" "," - ":" ","-":" "},Vr=$o.replace(/\_| \- |\-/g,Dr=>Ko[Dr]);return`<div data-mce-tooltip="${Vr}" class="tox-collection__item${vo}" tabindex="-1" data-collection-item-value="${TJ.encodeAllRaw(zo.value)}" aria-label="${Vr}">${Ur}${Cr}</div>`}),po=h.columns!=="auto"&&h.columns>1?Ro(jn,h.columns):[jn],yo=On(po,zo=>`<div class="tox-collection__group">${zo.join("")}</div>`);wy(cn.element,yo.join(""))},Ot=yt((cn,xn,Mn,vo)=>{xn.stop(),j.checkUiComponentContext("mode:design").shouldDisable||j.isDisabled()||rs(cn,Rw,{name:h.name,value:vo})}),zt=[Qo(Z0(),yt((cn,xn,Mn)=>{mv(Mn,!0)})),Qo(r2(),Ot),Qo(WA(),Ot),Qo(K0(),yt((cn,xn,Mn)=>{np(cn.element,"."+oA).each(vo=>{bu(vo,oA)}),Vp(Mn,oA)})),Qo(NM(),yt(cn=>{np(cn.element,"."+oA).each(xn=>{bu(xn,oA),VC(xn)})})),ax(yt((cn,xn,Mn,vo)=>{rs(cn,Rw,{name:h.name,value:vo})}))],Gt=(cn,xn)=>On(o0(cn.element,".tox-collection__item"),xn),Wt=pu.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(h.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Jt},behaviours:gr([Rs.config({disabled:()=>j.checkUiComponentContext(h.context).shouldDisable,onDisabled:cn=>{Gt(cn,xn=>{Vp(xn,"tox-collection__item--state-disabled"),Vo(xn,"aria-disabled",!0)})},onEnabled:cn=>{Gt(cn,xn=>{bu(xn,"tox-collection__item--state-disabled"),Kt(xn,"aria-disabled")})}}),Wp(()=>j.checkUiComponentContext(h.context)),Gs.config({}),Mp.config({...j.tooltips.getConfig({tooltipText:"",onShow:cn=>{np(cn.element,"."+oA+"[data-mce-tooltip]").each(xn=>{Os(xn,"data-mce-tooltip").each(Mn=>{Mp.setComponents(cn,j.tooltips.getComponents({tooltipText:Mn}))})})}}),mode:"children-keyboard-focus",anchor:cn=>({type:"node",node:np(cn.element,"."+oA).orThunk(()=>C4(".tox-collection__item")),root:cn.element,layouts:{onLtr:Nt([tm,hu,gm,n0,mm,ym]),onRtl:Nt([tm,hu,gm,n0,mm,ym])},bubble:Xv(0,-2,{})})}),zr.config({store:{mode:"memory",initialValue:tt.getOr([])},onSetValue:(cn,xn)=>{kt(cn,xn),h.columns==="auto"&&rF(cn,5,"tox-collection__item").each(({numRows:Mn,numColumns:vo})=>{ys.setGridSize(cn,Mn,vo)}),wl(cn,zU)}}),op.config({}),ys.config(PX(h.columns,"normal")),Ws("collection-events",zt)]),eventOrder:{[e0()]:["disabling","alloy.base.behaviour","collection-events"],[K0()]:["collection-events","tooltipping"]}});return RI(st,Wt,["tox-form__group--collection"],[])},OJ=["input","textarea"],FF=h=>{const j=Xl(h);return Wn(OJ,j)},gA=(h,j)=>{const tt=j.getRoot(h).getOr(h.element);bu(tt,j.invalidClass),j.notify.each(st=>{FF(h.element)&&Vo(h.element,"aria-invalid",!1),st.getContainer(h).each(ut=>{wy(ut,st.validHtml)}),st.onValid(h)})},BU=(h,j,tt,st)=>{const ut=j.getRoot(h).getOr(h.element);Vp(ut,j.invalidClass),j.notify.each(mt=>{FF(h.element)&&Vo(h.element,"aria-invalid",!0),mt.getContainer(h).each(yt=>{wy(yt,st)}),mt.onInvalid(h,st)})},$U=(h,j,tt)=>j.validator.fold(()=>z0.pure(Ks.value(!0)),st=>st.validate(h)),zF=(h,j,tt)=>(j.notify.each(st=>{st.onValidate(h)}),$U(h,j).map(st=>h.getSystem().isConnected()?st.fold(ut=>(BU(h,j,tt,ut),Ks.error(ut)),ut=>(gA(h,j),Ks.value(ut))):Ks.error("No longer in system")));var Z1=Object.freeze({__proto__:null,markValid:gA,markInvalid:BU,query:$U,run:zF,isInvalid:(h,j)=>{const tt=j.getRoot(h).getOr(h.element);return X0(tt,j.invalidClass)}}),jU=Object.freeze({__proto__:null,events:(h,j)=>h.validator.map(tt=>yu([Qo(tt.onEvent,st=>{zF(st,h,j).get(Jt)})].concat(tt.validateOnLoad?[ep(st=>{zF(st,h,j).get(Et)})]:[]))).getOr({})}),DJ=[Jo("invalidClass"),ko("getRoot",It.none),hm("notify",[ko("aria","alert"),ko("getContainer",It.none),ko("validHtml",""),zl("onValid"),zl("onInvalid"),zl("onValidate")]),hm("validator",[Jo("validate"),ko("onEvent","input"),ko("validateOnLoad",!0)])];const Mw=Fm({fields:DJ,name:"invalidating",active:jU,apis:Z1,extra:{validation:h=>j=>{const tt=zr.getValue(j);return z0.pure(h(tt))}}});var UU=Object.freeze({__proto__:null,events:()=>yu([v3(tL(),fn)]),exhibit:()=>Y0({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const PI=Fm({fields:[],name:"unselecting",active:UU}),NJ=(h,j)=>r1.sketch({dom:h.dom,components:h.components,toggleClass:"mce-active",dropdownBehaviours:gr([o1.button(()=>j.providers.isDisabled()||j.providers.checkUiComponentContext(h.context).shouldDisable),Wp(()=>j.providers.checkUiComponentContext(h.context)),PI.config({}),op.config({})]),layouts:h.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:j.getSink,fetch:tt=>z0.nu(st=>h.fetch(st)).map(st=>It.from(EI(Ou(kF(Wr("menu-value"),st,ut=>{h.onItemAction(tt,ut)},h.columns,h.presets,z_.CLOSE_ON_EXECUTE,hn,j.providers),{movement:XO(h.columns,h.presets)})))),parts:{menu:_R(!1,1,h.presets)}}),HU=Wr("color-input-change"),$F=Wr("color-swatch-change"),VU=Wr("color-picker-cancel"),WU=(h,j,tt,st)=>{const ut=pu.parts.field({factory:kx,inputClasses:["tox-textfield"],data:st,onSetValue:zt=>Mw.run(zt).get(Et),inputBehaviours:gr([Rs.config({disabled:()=>j.providers.isDisabled()||j.providers.checkUiComponentContext(h.context).shouldDisable}),Wp(()=>j.providers.checkUiComponentContext(h.context)),op.config({}),Mw.config({invalidClass:"tox-textbox-field-invalid",getRoot:zt=>Tm(zt.element),notify:{onValid:zt=>{const Gt=zr.getValue(zt);rs(zt,HU,{color:Gt})}},validator:{validateOnLoad:!1,validate:zt=>{const Gt=zr.getValue(zt);if(Gt.length===0)return z0.pure(Ks.value(!0));{const Wt=ro.fromTag("span");Xo(Wt,"background-color",Gt);const sn=du(Wt,"background-color").fold(()=>Ks.error("blah"),cn=>Ks.value(Gt));return z0.pure(sn)}}}})]),selectOnFocus:!1}),mt=h.label.map(zt=>ES(zt,j.providers)),yt=(zt,Gt)=>{rs(zt,$F,{value:Gt})},kt=(zt,Gt)=>{Ot.getOpt(zt).each(Wt=>{Gt==="custom"?tt.colorPicker(sn=>{sn.fold(()=>wl(Wt,VU),cn=>{yt(Wt,cn),OR(h.storageKey,cn)})},"#ffffff"):Gt==="remove"?yt(Wt,""):yt(Wt,Gt)})},Ot=nu(NJ({dom:{tag:"span",attributes:{"aria-label":j.providers.translate("Color swatch")}},layouts:{onRtl:()=>[mm,gm,tm],onLtr:()=>[gm,mm,tm]},components:[],fetch:dU(tt.getColors(h.storageKey),h.storageKey,tt.hasCustomColors()),columns:tt.getColorCols(h.storageKey),presets:"color",onItemAction:kt,context:h.context},j));return pu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:mt.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[ut,Ot.asSpec()]}]),fieldBehaviours:gr([Ws("form-field-events",[Qo(HU,(zt,Gt)=>{Ot.getOpt(zt).each(Wt=>{Xo(Wt.element,"background-color",Gt.event.color)}),rs(zt,Yy,{name:h.name})}),Qo($F,(zt,Gt)=>{pu.getField(zt).each(Wt=>{zr.setValue(Wt,Gt.event.value),Ll.getCurrent(zt).each(Ds.focus)})}),Qo(VU,(zt,Gt)=>{pu.getField(zt).each(Wt=>{Ll.getCurrent(zt).each(Ds.focus)})})])])})},qU=Zy({schema:[Jo("dom")],name:"label"}),Q2=h=>Zy({name:""+h+"-edge",overrides:j=>j.model.manager.edgeActions[h].fold(()=>({}),st=>({events:yu([SC(uv(),(ut,mt,yt)=>st(ut,yt),[j]),SC(gp(),(ut,mt,yt)=>st(ut,yt),[j]),SC(b0(),(ut,mt,yt)=>{yt.mouseIsDown.get()&&st(ut,yt)},[j])])}))}),LJ=Q2("top-left"),FJ=Q2("top"),zJ=Q2("top-right"),BJ=Q2("right"),$J=Q2("bottom-right"),GJ=Q2("bottom"),GF=Q2("bottom-left"),jJ=Q2("left"),UJ=x0({name:"thumb",defaults:Nt({dom:{styles:{position:"absolute"}}}),overrides:h=>({events:yu([ix(uv(),h,"spectrum"),ix(C_(),h,"spectrum"),ix(Gl(),h,"spectrum"),ix(gp(),h,"spectrum"),ix(b0(),h,"spectrum"),ix(wC(),h,"spectrum")])})}),jR=h=>bm(h.event),HJ=x0({schema:[Jl("mouseIsDown",()=>ls(!1))],name:"spectrum",overrides:h=>{const tt=h.model.manager,st=(ut,mt)=>tt.getValueFromEvent(mt).map(yt=>tt.setValueFrom(ut,h,yt));return{behaviours:gr([ys.config({mode:"special",onLeft:(ut,mt)=>tt.onLeft(ut,h,jR(mt)),onRight:(ut,mt)=>tt.onRight(ut,h,jR(mt)),onUp:(ut,mt)=>tt.onUp(ut,h,jR(mt)),onDown:(ut,mt)=>tt.onDown(ut,h,jR(mt))}),op.config({}),Ds.config({})]),events:yu([Qo(uv(),st),Qo(C_(),st),Qo(gp(),st),Qo(b0(),(ut,mt)=>{h.mouseIsDown.get()&&st(ut,mt)})])}}});var VJ=[qU,jJ,BJ,FJ,GJ,LJ,zJ,GF,$J,UJ,HJ];const UR=Nt("slider.change.value"),WJ=h=>h.type.indexOf("touch")!==-1,jF=h=>{const j=h.event.raw;if(WJ(j)){const tt=j;return tt.touches!==void 0&&tt.touches.length===1?It.some(tt.touches[0]).map(st=>Hu(st.clientX,st.clientY)):It.none()}else{const tt=j;return tt.clientX!==void 0?It.some(tt).map(st=>Hu(st.clientX,st.clientY)):It.none()}},qJ="top",ZU="right",KU="bottom",ZJ="left",mA=h=>h.model.minX,yA=h=>h.model.minY,sD=h=>h.model.minX-1,iD=h=>h.model.minY-1,bA=h=>h.model.maxX,TS=h=>h.model.maxY,HR=h=>h.model.maxX+1,VR=h=>h.model.maxY+1,aD=(h,j,tt)=>j(h)-tt(h),UF=h=>aD(h,bA,mA),lD=h=>aD(h,TS,yA),YU=h=>UF(h)/2,XU=h=>lD(h)/2,OI=(h,j)=>j?h.stepSize*h.speedMultiplier:h.stepSize,JU=h=>h.snapToGrid,cD=h=>h.snapStart,Pw=h=>h.rounded,uD=(h,j)=>h[j+"-edge"]!==void 0,DI=h=>uD(h,ZJ),QU=h=>uD(h,ZU),dD=h=>uD(h,qJ),eH=h=>uD(h,KU),eC=h=>h.model.value.get(),IS=(h,j)=>({x:h,y:j}),K1=(h,j)=>{rs(h,UR(),{value:j})},KJ=(h,j)=>{K1(h,IS(sD(j),iD(j)))},HF=(h,j)=>{K1(h,iD(j))},VF=(h,j)=>{K1(h,IS(YU(j),iD(j)))},WF=(h,j)=>{K1(h,IS(HR(j),iD(j)))},YJ=(h,j)=>{K1(h,HR(j))},s1=(h,j)=>{K1(h,IS(HR(j),XU(j)))},XJ=(h,j)=>{K1(h,IS(HR(j),VR(j)))},JJ=(h,j)=>{K1(h,VR(j))},tH=(h,j)=>{K1(h,IS(YU(j),VR(j)))},nH=(h,j)=>{K1(h,IS(sD(j),VR(j)))},QJ=(h,j)=>{K1(h,sD(j))},eQ=(h,j)=>{K1(h,IS(sD(j),XU(j)))},qF=(h,j,tt,st)=>h<j?h:h>tt?tt:h===j?j-1:Math.max(j,h-st),ZF=(h,j,tt,st)=>h>tt?h:h<j?j:h===tt?tt+1:Math.min(tt,h+st),oH=(h,j,tt)=>Math.max(j,Math.min(tt,h)),tQ=(h,j,tt,st,ut)=>ut.fold(()=>{const mt=h-j,yt=Math.round(mt/st)*st;return oH(j+yt,j-1,tt+1)},mt=>{const yt=(h-mt)%st,kt=Math.round(yt/st),Ot=Math.floor((h-mt)/st),zt=Math.floor((tt-mt)/st),Gt=Math.min(zt,Ot+kt),Wt=mt+Gt*st;return Math.max(mt,Wt)}),nQ=(h,j,tt)=>Math.min(tt,Math.max(h,j))-j,KF=h=>{const{min:j,max:tt,range:st,value:ut,step:mt,snap:yt,snapStart:kt,rounded:Ot,hasMinEdge:zt,hasMaxEdge:Gt,minBound:Wt,maxBound:sn,screenRange:cn}=h,xn=zt?j-1:j,Mn=Gt?tt+1:tt;if(ut<Wt)return xn;if(ut>sn)return Mn;{const vo=nQ(ut,Wt,sn),jn=oH(vo/cn*st+j,xn,Mn);return yt&&jn>=j&&jn<=tt?tQ(jn,j,tt,mt,kt):Ot?Math.round(jn):jn}},rH=h=>{const{min:j,max:tt,range:st,value:ut,hasMinEdge:mt,hasMaxEdge:yt,maxBound:kt,maxOffset:Ot,centerMinEdge:zt,centerMaxEdge:Gt}=h;return ut<j?mt?0:zt:ut>tt?yt?kt:Gt:(ut-j)/st*Ot},YF="top",sH="right",XF="bottom",WR="left",iH="width",aH="height",Ix=h=>h.element.dom.getBoundingClientRect(),Y1=(h,j)=>h[j],NI=h=>{const j=Ix(h);return Y1(j,WR)},lH=h=>{const j=Ix(h);return Y1(j,sH)},LI=h=>{const j=Ix(h);return Y1(j,YF)},vA=h=>{const j=Ix(h);return Y1(j,XF)},JF=h=>{const j=Ix(h);return Y1(j,iH)},QF=h=>{const j=Ix(h);return Y1(j,aH)},e7=(h,j,tt)=>(h+j)/2-tt,cH=(h,j)=>{const tt=Ix(h),st=Ix(j),ut=Y1(tt,WR),mt=Y1(tt,sH),yt=Y1(st,WR);return e7(ut,mt,yt)},uH=(h,j)=>{const tt=Ix(h),st=Ix(j),ut=Y1(tt,YF),mt=Y1(tt,XF),yt=Y1(st,YF);return e7(ut,mt,yt)},_A=(h,j)=>{rs(h,UR(),{value:j})},t7=(h,j,tt)=>{const st={min:mA(j),max:bA(j),range:UF(j),value:tt,step:OI(j),snap:JU(j),snapStart:cD(j),rounded:Pw(j),hasMinEdge:DI(j),hasMaxEdge:QU(j),minBound:NI(h),maxBound:lH(h),screenRange:JF(h)};return KF(st)},oQ=(h,j,tt)=>{const st=t7(h,j,tt);return _A(h,st),st},dH=(h,j)=>{const tt=mA(j);_A(h,tt)},fH=(h,j)=>{const tt=bA(j);_A(h,tt)},n7=(h,j,tt,st)=>{const mt=(h>0?ZF:qF)(eC(tt),mA(tt),bA(tt),OI(tt,st));return _A(j,mt),It.some(mt)},o7=h=>(j,tt,st)=>n7(h,j,tt,st).map(fn),My=h=>jF(h).map(tt=>tt.left),hH=(h,j,tt,st,ut)=>{const yt=JF(h),kt=st.bind(Gt=>It.some(cH(Gt,h))).getOr(0),Ot=ut.bind(Gt=>It.some(cH(Gt,h))).getOr(yt),zt={min:mA(j),max:bA(j),range:UF(j),value:tt,hasMinEdge:DI(j),hasMaxEdge:QU(j),minBound:NI(h),minOffset:0,maxBound:lH(h),maxOffset:yt,centerMinEdge:kt,centerMaxEdge:Ot};return rH(zt)},r7=(h,j,tt,st,ut,mt)=>{const yt=hH(j,mt,tt,st,ut);return NI(j)-NI(h)+yt},rQ=(h,j,tt,st)=>{const ut=eC(tt),mt=r7(h,st.getSpectrum(h),ut,st.getLeftEdge(h),st.getRightEdge(h),tt),yt=bn(j.element)/2;Xo(j.element,"left",mt-yt+"px")},pH=o7(-1),sQ=o7(1),iQ=It.none,aQ=It.none,gH={"top-left":It.none(),top:It.none(),"top-right":It.none(),right:It.some(YJ),"bottom-right":It.none(),bottom:It.none(),"bottom-left":It.none(),left:It.some(QJ)};var Ow=Object.freeze({__proto__:null,setValueFrom:oQ,setToMin:dH,setToMax:fH,findValueOfOffset:t7,getValueFromEvent:My,findPositionOfValue:r7,setPositionFromValue:rQ,onLeft:pH,onRight:sQ,onUp:iQ,onDown:aQ,edgeActions:gH});const FI=(h,j)=>{rs(h,UR(),{value:j})},fD=(h,j,tt)=>{const st={min:yA(j),max:TS(j),range:lD(j),value:tt,step:OI(j),snap:JU(j),snapStart:cD(j),rounded:Pw(j),hasMinEdge:dD(j),hasMaxEdge:eH(j),minBound:LI(h),maxBound:vA(h),screenRange:QF(h)};return KF(st)},hD=(h,j,tt)=>{const st=fD(h,j,tt);return FI(h,st),st},s7=(h,j)=>{const tt=yA(j);FI(h,tt)},lQ=(h,j)=>{const tt=TS(j);FI(h,tt)},cQ=(h,j,tt,st)=>{const mt=(h>0?ZF:qF)(eC(tt),yA(tt),TS(tt),OI(tt,st));return FI(j,mt),It.some(mt)},mH=h=>(j,tt,st)=>cQ(h,j,tt,st).map(fn),uQ=h=>jF(h).map(tt=>tt.top),dQ=(h,j,tt,st,ut)=>{const yt=QF(h),kt=st.bind(Gt=>It.some(uH(Gt,h))).getOr(0),Ot=ut.bind(Gt=>It.some(uH(Gt,h))).getOr(yt),zt={min:yA(j),max:TS(j),range:lD(j),value:tt,hasMinEdge:dD(j),hasMaxEdge:eH(j),minBound:LI(h),minOffset:0,maxBound:vA(h),maxOffset:yt,centerMinEdge:kt,centerMaxEdge:Ot};return rH(zt)},i7=(h,j,tt,st,ut,mt)=>{const yt=dQ(j,mt,tt,st,ut);return LI(j)-LI(h)+yt},fQ=(h,j,tt,st)=>{const ut=eC(tt),mt=i7(h,st.getSpectrum(h),ut,st.getTopEdge(h),st.getBottomEdge(h),tt),yt=fu(j.element)/2;Xo(j.element,"top",mt-yt+"px")},yH=It.none,hQ=It.none,Dw=mH(-1),pD=mH(1),pQ={"top-left":It.none(),top:It.some(HF),"top-right":It.none(),right:It.none(),"bottom-right":It.none(),bottom:It.some(JJ),"bottom-left":It.none(),left:It.none()};var gQ=Object.freeze({__proto__:null,setValueFrom:hD,setToMin:s7,setToMax:lQ,findValueOfOffset:fD,getValueFromEvent:uQ,findPositionOfValue:i7,setPositionFromValue:fQ,onLeft:yH,onRight:hQ,onUp:Dw,onDown:pD,edgeActions:pQ});const qR=(h,j)=>{rs(h,UR(),{value:j})},ZR=(h,j)=>({x:h,y:j}),a7=(h,j,tt)=>{const st=t7(h,j,tt.left),ut=fD(h,j,tt.top),mt=ZR(st,ut);return qR(h,mt),mt},gD=(h,j,tt,st,ut)=>{const mt=h>0?ZF:qF,yt=j?eC(st).x:mt(eC(st).x,mA(st),bA(st),OI(st,ut)),kt=j?mt(eC(st).y,yA(st),TS(st),OI(st,ut)):eC(st).y;return qR(tt,ZR(yt,kt)),It.some(yt)},RS=(h,j)=>(tt,st,ut)=>gD(h,j,tt,st,ut).map(fn),KR=(h,j)=>{const tt=mA(j),st=yA(j);qR(h,ZR(tt,st))},bH=(h,j)=>{const tt=bA(j),st=TS(j);qR(h,ZR(tt,st))},vH=h=>jF(h),_H=(h,j,tt,st)=>{const ut=eC(tt),mt=r7(h,st.getSpectrum(h),ut.x,st.getLeftEdge(h),st.getRightEdge(h),tt),yt=i7(h,st.getSpectrum(h),ut.y,st.getTopEdge(h),st.getBottomEdge(h),tt),kt=bn(j.element)/2,Ot=fu(j.element)/2;Xo(j.element,"left",mt-kt+"px"),Xo(j.element,"top",yt-Ot+"px")},xH=RS(-1,!1),mQ=RS(1,!1),yQ=RS(-1,!0),bQ=RS(1,!0),vQ={"top-left":It.some(KJ),top:It.some(VF),"top-right":It.some(WF),right:It.some(s1),"bottom-right":It.some(XJ),bottom:It.some(tH),"bottom-left":It.some(nH),left:It.some(eQ)};var _Q=Object.freeze({__proto__:null,setValueFrom:a7,setToMin:KR,setToMax:bH,getValueFromEvent:vH,setPositionFromValue:_H,onLeft:xH,onRight:mQ,onUp:yQ,onDown:bQ,edgeActions:vQ});const wH=[ko("stepSize",1),ko("speedMultiplier",10),ko("onChange",Et),ko("onChoose",Et),ko("onInit",Et),ko("onDragStart",Et),ko("onDragEnd",Et),ko("snapToGrid",!1),ko("rounded",!0),Kl("snapStart"),Ql("model",Sp("mode",{x:[ko("minX",0),ko("maxX",100),Jl("value",h=>ls(h.mode.minX)),Jo("getInitialValue"),qu("manager",Ow)],y:[ko("minY",0),ko("maxY",100),Jl("value",h=>ls(h.mode.minY)),Jo("getInitialValue"),qu("manager",gQ)],xy:[ko("minX",0),ko("maxX",100),ko("minY",0),ko("maxY",100),Jl("value",h=>ls({x:h.mode.minX,y:h.mode.minY})),Jo("getInitialValue"),qu("manager",_Q)]})),Bm("sliderBehaviours",[ys,zr]),Jl("mouseIsDown",()=>ls(!1))],j_=d0({name:"Slider",configFields:wH,partFields:VJ,factory:(h,j,tt,st)=>{const ut=$o=>Br($o,h,"thumb"),mt=$o=>Br($o,h,"spectrum"),yt=$o=>Du($o,h,"left-edge"),kt=$o=>Du($o,h,"right-edge"),Ot=$o=>Du($o,h,"top-edge"),zt=$o=>Du($o,h,"bottom-edge"),Gt=h.model,Wt=Gt.manager,sn=($o,Cr)=>{Wt.setPositionFromValue($o,Cr,h,{getLeftEdge:yt,getRightEdge:kt,getTopEdge:Ot,getBottomEdge:zt,getSpectrum:mt})},cn=($o,Cr)=>{Gt.value.set(Cr);const Ur=ut($o);sn($o,Ur)},xn=($o,Cr)=>{cn($o,Cr);const Ur=ut($o);return h.onChange($o,Ur,Cr),It.some(!0)},Mn=$o=>{Wt.setToMin($o,h)},vo=$o=>{Wt.setToMax($o,h)},jn=$o=>{const Cr=()=>{Du($o,h,"thumb").each(Ko=>{const Vr=Gt.value.get();h.onChoose($o,Ko,Vr)})},Ur=h.mouseIsDown.get();h.mouseIsDown.set(!1),Ur&&Cr()},po=($o,Cr)=>{Cr.stop(),h.mouseIsDown.set(!0),h.onDragStart($o,ut($o))},yo=($o,Cr)=>{Cr.stop(),h.onDragEnd($o,ut($o)),jn($o)},zo=$o=>{Du($o,h,"spectrum").map(ys.focusIn)};return{uid:h.uid,dom:h.dom,components:j,behaviours:$m(h.sliderBehaviours,[ys.config({mode:"special",focusIn:zo}),zr.config({store:{mode:"manual",getValue:$o=>Gt.value.get(),setValue:cn}}),ky.config({channels:{[HT()]:{onReceive:jn}}})]),events:yu([Qo(UR(),($o,Cr)=>{xn($o,Cr.event.value)}),ep(($o,Cr)=>{const Ur=Gt.getInitialValue();Gt.value.set(Ur);const Ko=ut($o);sn($o,Ko);const Vr=mt($o);h.onInit($o,Ko,Vr,Gt.value.get())}),Qo(uv(),po),Qo(Gl(),yo),Qo(gp(),($o,Cr)=>{zo($o),po($o,Cr)}),Qo(wC(),yo)]),apis:{resetToMin:Mn,resetToMax:vo,setValue:cn,refresh:sn},domModification:{styles:{position:"relative"}}}},apis:{setValue:(h,j,tt)=>{h.setValue(j,tt)},resetToMin:(h,j)=>{h.resetToMin(j)},resetToMax:(h,j)=>{h.resetToMax(j)},refresh:(h,j)=>{h.refresh(j)}}}),mD=Wr("rgb-hex-update"),CH=Wr("slider-update"),l7=Wr("palette-update"),YR=(h,j)=>{const tt=j_.parts.spectrum({dom:{tag:"div",classes:[j("hue-slider-spectrum")],attributes:{role:"presentation"}}}),st=j_.parts.thumb({dom:{tag:"div",classes:[j("hue-slider-thumb")],attributes:{role:"presentation"}}});return j_.sketch({dom:{tag:"div",classes:[j("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:Nt(0)},components:[tt,st],sliderBehaviours:gr([Ds.config({})]),onChange:(ut,mt,yt)=>{Vo(ut.element,"aria-valuenow",Math.floor(360-yt*3.6)),rs(ut,CH,{value:yt})}})},kH="form",SH=[Bm("formBehaviours",[zr])],EH=h=>"<alloy.field."+h+">",wQ=h=>{const j=(()=>{const mt=[];return{field:(kt,Ot)=>(mt.push(kt),tI(kH,EH(kt),Ot)),record:Nt(mt)}})(),tt=h(j),st=j.record(),ut=On(st,mt=>x0({name:mt,pname:EH(mt)}));return UE(kH,SH,ut,kQ,tt)},CQ=(h,j)=>h.fold(()=>Ks.error(j),Ks.value),kQ=(h,j)=>({uid:h.uid,dom:h.dom,components:j,behaviours:$m(h.formBehaviours,[zr.config({store:{mode:"manual",getValue:tt=>{const st=LP(tt,h);return vr(st,(ut,mt)=>ut().bind(yt=>{const kt=Ll.getCurrent(yt);return CQ(kt,new Error(`Cannot find a current component to extract the value from for form part '${mt}': `+sw(yt.element)))}).map(zr.getValue))},setValue:(tt,st)=>{sr(st,(ut,mt)=>{Du(tt,h,mt).each(yt=>{Ll.getCurrent(yt).each(kt=>{zr.setValue(kt,ut)})})})}}})]),apis:{getField:(tt,st)=>Du(tt,h,st).bind(Ll.getCurrent)}}),xA={getField:hT((h,j,tt)=>h.getField(j,tt)),sketch:wQ},AH=Wr("valid-input"),c7=Wr("invalid-input"),yD=Wr("validating-input"),Rx="colorcustom.rgb.",u7={isEnabled:fn,setEnabled:Et,immediatelyShow:Et,immediatelyHide:Et},TH=(h,j,tt,st,ut,mt)=>{const yt=(Mn,vo)=>{const jn=vo.get();Mn!==jn.isEnabled()&&(jn.setEnabled(Mn),Mn?jn.immediatelyShow():jn.immediatelyHide())},kt=(Mn,vo,jn)=>Mw.config({invalidClass:j("invalid"),notify:{onValidate:po=>{rs(po,yD,{type:Mn})},onValid:po=>{yt(!1,jn),rs(po,AH,{type:Mn,value:zr.getValue(po)})},onInvalid:po=>{yt(!0,jn),rs(po,c7,{type:Mn,value:zr.getValue(po)})}},validator:{validate:po=>{const yo=zr.getValue(po),zo=vo(yo)?Ks.value(!0):Ks.error(h("aria.input.invalid"));return z0.pure(zo)},validateOnLoad:!1}}),Ot=(Mn,vo,jn,po,yo)=>{const zo=ls(u7),$o=h(Rx+"range"),Cr=pu.parts.label({dom:{tag:"label"},components:[mp(jn)]}),Ur=pu.parts.field({data:yo,factory:kx,inputAttributes:{type:"text","aria-label":po,...vo==="hex"?{"aria-live":"polite"}:{}},inputClasses:[j("textfield")],inputBehaviours:gr([kt(vo,Mn,zo),op.config({}),Mp.config({...ut({tooltipText:"",onSetup:tu=>{zo.set({isEnabled:()=>Mp.isEnabled(tu),setEnabled:ns=>Mp.setEnabled(tu,ns),immediatelyShow:()=>Mp.immediateOpenClose(tu,!0),immediatelyHide:()=>Mp.immediateOpenClose(tu,!1)}),Mp.setEnabled(tu,!1)},onShow:(tu,ns)=>{Mp.setComponents(tu,[{dom:{tag:"p",classes:[j("rgb-warning-note")]},components:[mp(h(vo==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:tu=>{Mw.isInvalid(tu)&&Mw.run(tu).get(Et)}}),Ko=Wr("aria-invalid"),Vr=nu(mt("invalid",It.some(Ko),"warning")),Dr=nu({dom:{tag:"div",classes:[j("invalid-icon")]},components:[Vr.asSpec()]}),Xr=[Cr,Ur,Dr.asSpec()],Il=vo!=="hex"?[pu.parts["aria-descriptor"]({text:$o})]:[],Ju=Xr.concat(Il);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[j("rgb-container")]},components:Ju}},zt=(Mn,vo)=>{const jn=kI(vo);return xA.getField(Mn,"hex").each(po=>{Ds.isFocused(po)||zr.setValue(Mn,{hex:jn.value})}),jn},Gt=(Mn,vo)=>{const jn=vo.red,po=vo.green,yo=vo.blue;zr.setValue(Mn,{red:jn,green:po,blue:yo})},Wt=nu({dom:{tag:"div",classes:[j("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),sn=(Mn,vo)=>{Wt.getOpt(Mn).each(jn=>{Xo(jn.element,"background-color","#"+vo.value)})};return Ty({factory:()=>{const Mn={red:ls(It.some(255)),green:ls(It.some(255)),blue:ls(It.some(255)),hex:ls(It.some("ffffff"))},vo=(ns,ur)=>{const Pr=PR(ur);Gt(ns,Pr),zo(Pr)},jn=ns=>Mn[ns].get(),po=(ns,ur)=>{Mn[ns].set(ur)},yo=()=>jn("red").bind(ns=>jn("green").bind(ur=>jn("blue").map(Pr=>dA(ns,ur,Pr,1)))),zo=ns=>{const ur=ns.red,Pr=ns.green,zs=ns.blue;po("red",It.some(ur)),po("green",It.some(Pr)),po("blue",It.some(zs))},$o=(ns,ur)=>{const Pr=ur.event;Pr.type!=="hex"?po(Pr.type,It.none()):st(ns)},Cr=(ns,ur)=>{tt(ns);const Pr=jO(ur);po("hex",It.some(Pr.value));const zs=PR(Pr);Gt(ns,zs),zo(zs),rs(ns,mD,{hex:Pr}),sn(ns,Pr)},Ur=(ns,ur,Pr)=>{const zs=parseInt(Pr,10);po(ur,It.some(zs)),yo().each(Qs=>{const ms=zt(ns,Qs);rs(ns,mD,{hex:ms}),sn(ns,ms)})},Ko=ns=>ns.type==="hex",Vr=(ns,ur)=>{const Pr=ur.event;Ko(Pr)?Cr(ns,Pr.value):Ur(ns,Pr.type,Pr.value)},Dr=ns=>({label:h(Rx+ns+".label"),description:h(Rx+ns+".description")}),Xr=Dr("red"),Il=Dr("green"),Ju=Dr("blue"),tu=Dr("hex");return Ou(xA.sketch(ns=>({dom:{tag:"form",classes:[j("rgb-form")],attributes:{"aria-label":h("aria.color.picker")}},components:[ns.field("red",pu.sketch(Ot(mF,"red",Xr.label,Xr.description,255))),ns.field("green",pu.sketch(Ot(mF,"green",Il.label,Il.description,255))),ns.field("blue",pu.sketch(Ot(mF,"blue",Ju.label,Ju.description,255))),ns.field("hex",pu.sketch(Ot(fF,"hex",tu.label,tu.description,"ffffff"))),Wt.asSpec()],formBehaviours:gr([Mw.config({invalidClass:j("form-invalid")}),Ws("rgb-form-events",[Qo(AH,Vr),Qo(c7,$o),Qo(yD,$o)])])})),{apis:{updateHex:(ns,ur)=>{zr.setValue(ns,{hex:ur.value}),vo(ns,ur),sn(ns,ur)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(Mn,vo,jn)=>{Mn.updateHex(vo,jn)}},extraApis:{}})},IH=(h,j)=>{const tt=j_.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[j("sv-palette-spectrum")]}}),st=j_.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[j("sv-palette-thumb")],innerHtml:`<div class=${j("sv-palette-inner-thumb")} role="presentation"></div>`}}),ut=(zt,Gt)=>{const{width:Wt,height:sn}=zt,cn=zt.getContext("2d");if(cn===null)return;cn.fillStyle=Gt,cn.fillRect(0,0,Wt,sn);const xn=cn.createLinearGradient(0,0,Wt,0);xn.addColorStop(0,"rgba(255,255,255,1)"),xn.addColorStop(1,"rgba(255,255,255,0)"),cn.fillStyle=xn,cn.fillRect(0,0,Wt,sn);const Mn=cn.createLinearGradient(0,0,0,sn);Mn.addColorStop(0,"rgba(0,0,0,0)"),Mn.addColorStop(1,"rgba(0,0,0,1)"),cn.fillStyle=Mn,cn.fillRect(0,0,Wt,sn)},mt=(zt,Gt)=>{const Wt=zt.components()[0].element.dom,sn=pA(Gt,100,100),cn=VG(sn);ut(Wt,qG(cn))},yt=(zt,Gt)=>{const Wt=DR(PR(Gt));j_.setValue(zt,{x:Wt.saturation,y:100-Wt.value}),Vo(zt.element,"aria-valuetext",h(["Saturation {0}%, Brightness {1}%",Wt.saturation,Wt.value]))};return Ty({factory:zt=>{const Gt=Nt({x:0,y:0}),Wt=(xn,Mn,vo)=>{Rt(vo)||Vo(xn.element,"aria-valuetext",h(["Saturation {0}%, Brightness {1}%",Math.floor(vo.x),Math.floor(100-vo.y)])),rs(xn,l7,{value:vo})},sn=(xn,Mn,vo,jn)=>{ut(vo.element.dom,qG(ZG))},cn=gr([Ll.config({find:It.some}),Ds.config({})]);return j_.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":h(["Saturation {0}%, Brightness {1}%",0,0])},classes:[j("sv-palette")]},model:{mode:"xy",getInitialValue:Gt},rounded:!1,components:[tt,st],onChange:Wt,onInit:sn,sliderBehaviours:cn})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(zt,Gt,Wt)=>{mt(Gt,Wt)},setThumb:(zt,Gt,Wt)=>{yt(Gt,Wt)}},extraApis:{}})},d7=(h,j,tt,st)=>{const ut=yt=>{const kt=TH(h,j,yt.onValidHex,yt.onInvalidHex,tt,st),Ot=IH(h,j),zt=Ko=>(100-Ko)/100*360,Gt=Ko=>100-Ko/360*100,Wt={paletteRgba:ls(ZG),paletteHue:ls(0)},sn=nu(YR(h,j)),cn=nu(Ot.sketch({})),xn=nu(kt.sketch({})),Mn=(Ko,Vr,Dr)=>{cn.getOpt(Ko).each(Xr=>{Ot.setHue(Xr,Dr)})},vo=(Ko,Vr)=>{xn.getOpt(Ko).each(Dr=>{kt.updateHex(Dr,Vr)})},jn=(Ko,Vr,Dr)=>{sn.getOpt(Ko).each(Xr=>{j_.setValue(Xr,Gt(Dr))})},po=(Ko,Vr)=>{cn.getOpt(Ko).each(Dr=>{Ot.setThumb(Dr,Vr)})},yo=(Ko,Vr)=>{const Dr=PR(Ko);Wt.paletteRgba.set(Dr),Wt.paletteHue.set(Vr)},zo=(Ko,Vr,Dr,Xr)=>{yo(Vr,Dr),_o(Xr,Il=>{Il(Ko,Vr,Dr)})},$o=()=>{const Ko=[vo];return(Vr,Dr)=>{const Xr=Dr.event.value,Il=Wt.paletteHue.get(),Ju=pA(Il,Xr.x,100-Xr.y),tu=nU(Ju);zo(Vr,tu,Il,Ko)}},Cr=()=>{const Ko=[Mn,vo];return(Vr,Dr)=>{const Xr=zt(Dr.event.value),Il=Wt.paletteRgba.get(),Ju=DR(Il),tu=pA(Xr,Ju.saturation,Ju.value),ns=nU(tu);zo(Vr,ns,Xr,Ko)}},Ur=()=>{const Ko=[Mn,jn,po];return(Vr,Dr)=>{const Xr=Dr.event.hex,Il=tU(Xr);zo(Vr,Xr,Il.hue,Ko)}};return{uid:yt.uid,dom:yt.dom,components:[cn.asSpec(),sn.asSpec(),xn.asSpec()],behaviours:gr([Ws("colour-picker-events",[Qo(mD,Ur()),Qo(l7,$o()),Qo(CH,Cr())]),Ll.config({find:Ko=>xn.getOpt(Ko)}),ys.config({mode:"acyclic"})])}};return Ty({name:"ColourPicker",configFields:[Jo("dom"),ko("onValidHex",Et),ko("onInvalidHex",Et)],factory:ut})},X1={self:()=>Ll.config({find:It.some}),memento:h=>Ll.config({find:h.getOpt}),childAt:h=>Ll.config({find:j=>Ap(j.element,h).bind(tt=>j.getSystem().getByDom(tt).toOptional())})},AQ=vs([ko("preprocess",Jt),ko("postprocess",Jt)]),TQ=(h,j)=>{const tt=y0("RepresentingConfigs.memento processors",AQ,j);return zr.config({store:{mode:"manual",getValue:st=>{const ut=h.get(st),mt=zr.getValue(ut);return tt.postprocess(mt)},setValue:(st,ut)=>{const mt=tt.preprocess(ut),yt=h.get(st);zr.setValue(yt,mt)}}})},wA=(h,j,tt)=>zr.config({store:{mode:"manual",...h.map(st=>({initialValue:st})).getOr({}),getValue:j,setValue:tt}}),RH=(h,j,tt)=>wA(h,st=>j(st.element),(st,ut)=>tt(st.element,ut)),IQ=h=>RH(h,dx,wy),XR=h=>zr.config({store:{mode:"memory",initialValue:h}}),MH={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},RQ=h=>j=>_e(j)?h.translate(MH[j]):h.translate(j),MQ=(h,j,tt)=>{const st=zt=>"tox-"+zt,ut=(zt,Gt,Wt=zt,sn=zt)=>e1(Wt,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+zt],attributes:{title:j.translate(sn),"aria-live":"polite",...Gt.fold(()=>({}),cn=>({id:cn}))}},j.icons),mt=d7(RQ(j),st,j.tooltips.getConfig,ut),yt=zt=>{rs(zt,Rw,{name:"hex-valid",value:!0})},kt=zt=>{rs(zt,Rw,{name:"hex-valid",value:!1})},Ot=nu(mt.sketch({dom:{tag:"div",classes:[st("color-picker-container")],attributes:{role:"presentation"}},onValidHex:yt,onInvalidHex:kt}));return{dom:{tag:"div"},components:[Ot.asSpec()],behaviours:gr([wA(tt,zt=>{const Gt=Ot.get(zt);return Ll.getCurrent(Gt).bind(cn=>zr.getValue(cn).hex).map(cn=>"#"+Sr(cn,"#")).getOr("")},(zt,Gt)=>{const Wt=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,sn=It.from(Wt.exec(Gt)).bind(Mn=>Jn(Mn,1)),cn=Ot.get(zt);Ll.getCurrent(cn).fold(()=>{console.log("Can not find form")},Mn=>{zr.setValue(Mn,{hex:sn.getOr("")}),xA.getField(Mn,"hex").each(vo=>{wl(vo,M1())})})}),X1.self()])}};var PQ=tinymce.util.Tools.resolve("tinymce.Resource");const JR=h=>Ms(h,"init"),OQ=h=>{const j=Wl(),tt=nu({dom:{tag:h.tag}}),st=Wl(),ut=!JR(h)&&h.onFocus.isSome()?[Ds.config({onFocus:mt=>{h.onFocus.each(yt=>{yt(mt.element.dom)})}}),op.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:gr([Ws("custom-editor-events",[ep(mt=>{tt.getOpt(mt).each(yt=>{(JR(h)?h.init(yt.element.dom):PQ.load(h.scriptId,h.scriptUrl).then(kt=>kt(yt.element.dom,h.settings))).then(kt=>{st.on(Ot=>{kt.setValue(Ot)}),st.clear(),j.set(kt)})})})]),wA(It.none(),()=>j.get().fold(()=>st.get().getOr(""),mt=>mt.getValue()),(mt,yt)=>{j.get().fold(()=>st.set(yt),kt=>kt.setValue(yt))}),X1.self()].concat(ut)),components:[tt.asSpec()]}};var tC=tinymce.util.Tools.resolve("tinymce.util.Tools");const bD=Wr("browse.files.event"),PH=(h,j)=>{const tt=tC.explode(j.getOption("images_file_types")),st=ut=>er(tt,mt=>ju(ut.name.toLowerCase(),`.${mt.toLowerCase()}`));return lo(oo(h),st)},DQ=(h,j,tt)=>{const st=(sn,cn)=>{cn.stop()},ut=sn=>(cn,xn)=>{_o(sn,Mn=>{Mn(cn,xn)})},mt=(sn,cn)=>{var xn;if(!Rs.isDisabled(sn)){const Mn=cn.event.raw;rs(sn,bD,{files:(xn=Mn.dataTransfer)===null||xn===void 0?void 0:xn.files})}},yt=(sn,cn)=>{const xn=cn.event.raw.target;rs(sn,bD,{files:xn.files})},kt=(sn,cn)=>{cn&&(zr.setValue(sn,PH(cn,j)),rs(sn,Yy,{name:h.name}))},Ot=nu({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:gr([Ws("input-file-events",[l2(r2()),l2(WA())])])}),zt=h.label.map(sn=>ES(sn,j)),Gt=pu.parts.field({factory:Sm,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[mp(j.translate("Browse for an image")),Ot.asSpec()],action:sn=>{Ot.get(sn).element.dom.click()},buttonBehaviours:gr([X1.self(),XR(tt.getOr([])),op.config({}),o1.button(()=>j.checkUiComponentContext(h.context).shouldDisable),Wp(()=>j.checkUiComponentContext(h.context))])}),Wt={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:gr([Rs.config({disabled:()=>j.checkUiComponentContext(h.context).shouldDisable}),Wp(()=>j.checkUiComponentContext(h.context)),na.config({toggleClass:"dragenter",toggleOnExecute:!1}),Ws("dropzone-events",[Qo("dragenter",ut([st,na.toggle])),Qo("dragleave",ut([st,na.toggle])),Qo("dragover",st),Qo("drop",ut([st,mt])),Qo(k_(),yt)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[mp(j.translate("Drop an image here"))]},Gt]}]};return RI(zt,Wt,["tox-form__group--stretched"],[Ws("handle-files",[Qo(bD,(sn,cn)=>{pu.getField(sn).each(xn=>{kt(xn,cn.event.files)})})])])},NQ=(h,j)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${h.columns}col`]},components:On(h.items,j.interpreter)}),h7=(h,j)=>{let tt=null,st=null;return{cancel:()=>{dt(tt)||(clearTimeout(tt),tt=null,st=null)},throttle:(...yt)=>{st=yt,dt(tt)&&(tt=setTimeout(()=>{const kt=st;tt=null,st=null,h.apply(null,kt)},j))}}},LQ=(h,j)=>{let tt=null;return{cancel:()=>{dt(tt)||(clearTimeout(tt),tt=null)},throttle:(...mt)=>{dt(tt)&&(tt=setTimeout(()=>{tt=null,h.apply(null,mt)},j))}}},vD=(h,j)=>{let tt=null;const st=()=>{dt(tt)||(clearTimeout(tt),tt=null)};return{cancel:st,throttle:(...mt)=>{st(),tt=setTimeout(()=>{tt=null,h.apply(null,mt)},j)}}},p7=Wr("alloy-fake-before-tabstop"),g7=Wr("alloy-fake-after-tabstop"),OH=h=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:h},behaviours:gr([Ds.config({ignore:!0}),op.config({})])}),m7=(h,j)=>({dom:{tag:"div",classes:["tox-navobj",...h.getOr([])]},components:[OH([p7]),j,OH([g7])],behaviours:gr([X1.childAt(1)])}),y7=(h,j)=>{rs(h,dv(),{raw:{which:9,shiftKey:j}})},FQ=(h,j)=>{const tt=j.element;X0(tt,p7)?y7(h,!0):X0(tt,g7)&&y7(h,!1)},QR=h=>BR(h,["."+p7,"."+g7].join(","),hn),_D=Wr("update-dialog"),DH=Wr("update-title"),b7=Wr("update-body"),NH=Wr("update-footer"),v7=Wr("body-send-message"),xD=Wr("dialog-focus-shifted"),_7=_i().browser,eM=_7.isSafari(),zQ=_7.isFirefox(),LH=eM||zQ,BQ=_7.isChromium(),$Q=({scrollTop:h,scrollHeight:j,clientHeight:tt})=>Math.ceil(h)+tt>=j,FH=(h,j)=>h.scrollTo(0,j==="bottom"?99999999:j),GQ=(h,j)=>{const tt=h.body;return It.from(!/^<!DOCTYPE (html|HTML)/.test(j)&&(!BQ&&!eM||wt(tt)&&(tt.scrollTop!==0||Math.abs(tt.scrollHeight-tt.clientHeight)>1))?tt:h.documentElement)},wD=(h,j,tt)=>{const st=h.dom;It.from(st.contentDocument).fold(tt,ut=>{let mt=0;const yt=GQ(ut,j).map(Ot=>(mt=Ot.scrollTop,Ot)).forall($Q),kt=()=>{const Ot=st.contentWindow;wt(Ot)&&(yt?FH(Ot,"bottom"):!yt&&LH&&mt!==0&&FH(Ot,mt))};eM&&st.addEventListener("load",kt,{once:!0}),ut.open(),ut.write(j),ut.close(),eM||kt()})},jQ=Jr(LH,eM?500:200).map(h=>h7(wD,h)),UQ=(h,j)=>{const tt=ls(h.getOr(""));return{getValue:st=>tt.get(),setValue:(st,ut)=>{if(tt.get()!==ut){const mt=st.element,yt=()=>Vo(mt,"srcdoc",ut);j?jQ.fold(Nt(wD),kt=>kt.throttle)(mt,ut,yt):yt()}tt.set(ut)}}},tM=(h,j,tt)=>{const st="tox-dialog__iframe",ut=h.transparent?[]:[`${st}--opaque`],mt=h.border?["tox-navobj-bordered"]:[],yt={...h.label.map(Wt=>({title:Wt})).getOr({}),...tt.map(Wt=>({srcdoc:Wt})).getOr({}),...h.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},kt=UQ(tt,h.streamContent),Ot=h.label.map(Wt=>ES(Wt,j)),zt=Wt=>m7(It.from(mt),{uid:Wt.uid,dom:{tag:"iframe",attributes:yt,classes:[st,...ut]},behaviours:gr([op.config({}),Ds.config({}),wA(tt,kt.getValue,kt.setValue),ky.config({channels:{[xD]:{onReceive:(sn,cn)=>{cn.newFocus.each(xn=>{Tm(sn.element).each(Mn=>{(Vl(sn.element,xn)?Vp:bu)(Mn,"tox-navobj-bordered-focus")})})}}}})])}),Gt=pu.parts.field({factory:{sketch:zt}});return RI(Ot,Gt,["tox-form__group--stretched"],[])},x7=h=>new Promise((j,tt)=>{const st=()=>{mt(),j(h)},ut=[J0(h,"load",st),J0(h,"error",()=>{mt(),tt("Unable to load data from image: "+h.dom.src)})],mt=()=>_o(ut,yt=>yt.unbind());h.dom.complete&&st()}),HQ=(h,j,tt,st,ut)=>{const mt=tt*ut,yt=st*ut,kt=Math.max(0,h/2-mt/2),Ot=Math.max(0,j/2-yt/2);return{left:kt.toString()+"px",top:Ot.toString()+"px",width:mt.toString()+"px",height:yt.toString()+"px"}},VQ=(h,j,tt)=>{const st=bn(h),ut=fu(h);return Math.min(st/j,ut/tt,1)},w7=(h,j)=>{const tt=ls(j.getOr({url:""})),st=nu({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:j.map(Ot=>({src:Ot.url})).getOr({})}}),ut=nu({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[st.asSpec()]}),mt=(Ot,zt)=>{const Gt={url:zt.url};zt.zoom.each(sn=>Gt.zoom=sn),zt.cachedWidth.each(sn=>Gt.cachedWidth=sn),zt.cachedHeight.each(sn=>Gt.cachedHeight=sn),tt.set(Gt);const Wt=()=>{const{cachedWidth:sn,cachedHeight:cn,zoom:xn}=Gt;if(!bt(sn)&&!bt(cn)){if(bt(xn)){const vo=VQ(Ot.element,sn,cn);Gt.zoom=vo}const Mn=HQ(bn(Ot.element),fu(Ot.element),sn,cn,Gt.zoom);ut.getOpt(Ot).each(vo=>{Zs(vo.element,Mn)})}};st.getOpt(Ot).each(sn=>{const cn=sn.element;zt.url!==Kr(cn,"src")&&(Vo(cn,"src",zt.url),bu(Ot.element,"tox-imagepreview__loaded")),Wt(),x7(cn).then(xn=>{Ot.getSystem().isConnected()&&(Vp(Ot.element,"tox-imagepreview__loaded"),Gt.cachedWidth=xn.dom.naturalWidth,Gt.cachedHeight=xn.dom.naturalHeight,Wt())})})},yt={};h.height.each(Ot=>yt.height=Ot);const kt=j.map(Ot=>({url:Ot.url,zoom:It.from(Ot.zoom),cachedWidth:It.from(Ot.cachedWidth),cachedHeight:It.from(Ot.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:yt,attributes:{role:"presentation"}},components:[ut.asSpec()],behaviours:gr([X1.self(),wA(kt,()=>tt.get(),mt)])}},WQ=(h,j,tt)=>{const st="tox-label",ut=h.align==="center"?[`${st}--center`]:[],mt=h.align==="end"?[`${st}--end`]:[],yt=nu({dom:{tag:"label",classes:[st,...ut,...mt]},components:[mp(j.providers.translate(h.label))]}),kt=On(h.items,j.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[yt.asSpec(),...kt],behaviours:gr([X1.self(),Gs.config({}),IQ(It.none()),ys.config({mode:"acyclic"}),Ws("label",[ep(Ot=>{h.for.each(zt=>{tt(zt).each(Gt=>{yt.getOpt(Ot).each(Wt=>{var sn;const cn=(sn=Kr(Gt.element,"id"))!==null&&sn!==void 0?sn:Wr("form-field");Vo(Gt.element,"id",cn),Vo(Wt.element,"for",cn)})})})})])])}},CD=Wr("toolbar.button.execute"),zH=h=>ax((j,tt)=>{$O(h,j)(st=>{rs(j,CD,{buttonApi:st}),h.onAction(st)})}),CA=Wr("common-button-display-events"),BH={[e0()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[fy()]:["toolbar-button-events",CA],[Gy()]:["toolbar-button-events","dropdown-events","tooltipping"],[gp()]:["focusing","alloy.base.behaviour",CA]},kD=h=>Xo(h.element,"width",ru(h.element,"width")),C7=(h,j,tt)=>e1(h,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:tt},j),k7=(h,j)=>C7(h,j,[]),nC=(h,j)=>C7(h,j,[Gs.config({})]),S7=(h,j,tt)=>({dom:{tag:"span",classes:[`${j}__select-label`]},components:[mp(tt.translate(h))],behaviours:gr([Gs.config({})])}),J1=Wr("update-menu-text"),MS=Wr("update-menu-icon"),SD=(h,j,tt,st)=>{const ut=ls(Et),mt=h.text.map(Mn=>nu(S7(Mn,j,tt.providers))),yt=h.icon.map(Mn=>nu(nC(Mn,tt.providers.icons))),kt=(Mn,vo)=>{const jn=zr.getValue(Mn);return Ds.focus(jn),rs(jn,"keydown",{raw:vo.event.raw}),r1.close(jn),It.some(!0)},Ot=h.role.fold(()=>({}),Mn=>({role:Mn})),zt=It.from(h.listRole).map(Mn=>({listRole:Mn})).getOr({}),Gt=h.ariaLabel.fold(()=>({}),Mn=>({"aria-label":tt.providers.translate(Mn)})),Wt=e1("chevron-down",{tag:"div",classes:[`${j}__select-chevron`]},tt.providers.icons),sn=Wr("common-button-display-events"),cn="dropdown-events";return nu(r1.sketch({...h.uid?{uid:h.uid}:{},...Ot,...zt,dom:{tag:"button",classes:[j,`${j}--select`].concat(On(h.classes,Mn=>`${j}--${Mn}`)),attributes:{...Gt,...wt(st)?{"data-mce-name":st}:{}}},components:SS([yt.map(Mn=>Mn.asSpec()),mt.map(Mn=>Mn.asSpec()),It.some(Wt)]),matchWidth:!0,useMinWidth:!0,onOpen:(Mn,vo,jn)=>{h.searchable&&eD(jn)},dropdownBehaviours:gr([...h.dropdownBehaviours,o1.button(()=>h.disabled||tt.providers.checkUiComponentContext(h.context).shouldDisable),Wp(()=>tt.providers.checkUiComponentContext(h.context)),PI.config({}),Gs.config({}),...h.tooltip.map(Mn=>Mp.config(tt.providers.tooltips.getConfig({tooltipText:tt.providers.translate(Mn)}))).toArray(),Ws(cn,[CS(h,ut),kS(h,ut)]),Ws(sn,[ep((Mn,vo)=>{h.listRole!=="listbox"&&kD(Mn)})]),Ws("update-dropdown-width-variable",[Qo(i2(),(Mn,vo)=>r1.close(Mn))]),Ws("menubutton-update-display-text",[Qo(J1,(Mn,vo)=>{mt.bind(jn=>jn.getOpt(Mn)).each(jn=>{Gs.set(jn,[mp(tt.providers.translate(vo.event.text))])})}),Qo(MS,(Mn,vo)=>{yt.bind(jn=>jn.getOpt(Mn)).each(jn=>{Gs.set(jn,[nC(vo.event.icon,tt.providers.icons)])})})])]),eventOrder:Ou(BH,{[gp()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[fy()]:["toolbar-button-events",Mp.name(),cn,sn]}),sandboxBehaviours:gr([ys.config({mode:"special",onLeft:kt,onRight:kt}),Ws("dropdown-sandbox-events",[Qo(G6,(Mn,vo)=>{iJ(Mn),vo.stop()}),Qo(gG,(Mn,vo)=>{aJ(Mn,vo),vo.stop()})])]),lazySink:tt.getSink,toggleClass:`${j}--active`,parts:{menu:{..._R(!1,h.columns,h.presets),fakeFocus:h.searchable,...h.listRole==="listbox"?{}:{onHighlightItem:zR,onCollapseMenu:(Mn,vo,jn)=>{kr.getHighlighted(jn).each(po=>{zR(Mn,jn,po)})},onDehighlightItem:uJ}}},getAnchorOverrides:()=>({maxHeightFunction:(Mn,vo)=>{q4()(Mn,vo-10)}}),fetch:Mn=>z0.nu(Pn(h.fetch,Mn))})).asSpec()},$H=h=>_e(h),GH=h=>h.type==="separator",qQ=h=>Ms(h,"getSubmenuItems"),ZQ={type:"separator"},jH=(h,j)=>{const tt=mo(h,(st,ut)=>$H(ut)?ut===""?st:ut==="|"?st.length>0&&!GH(st[st.length-1])?st.concat([ZQ]):st:Ms(j,ut.toLowerCase())?st.concat([j[ut.toLowerCase()]]):st:st.concat([ut]),[]);return tt.length>0&&GH(tt[tt.length-1])&&tt.pop(),tt},KQ=(h,j)=>{const tt=h.getSubmenuItems(),st=HH(tt,j),ut=Ou(st.menus,{[h.value]:st.items}),mt=Ou(st.expansions,{[h.value]:h.value});return{item:h,menus:ut,expansions:mt}},UH=h=>{const j=tr(h,"value").getOrThunk(()=>Wr("generated-menu-item"));return Ou({value:j},h)},HH=(h,j)=>{const tt=jH(_e(h)?h.split(" "):h,j);return Ho(tt,(st,ut)=>{if(qQ(ut)){const mt=UH(ut),yt=KQ(mt,j);return{menus:Ou(st.menus,yt.menus),items:[yt.item,...st.items],expansions:Ou(st.expansions,yt.expansions)}}else return{...st,items:[ut,...st.items]}},{menus:{},expansions:{},items:[]})},YQ=h=>h.search.fold(()=>({searchMode:"no-search"}),j=>({searchMode:"search-with-field",placeholder:j.placeholder})),E7=h=>h.search.fold(()=>({searchMode:"no-search"}),j=>({searchMode:"search-with-results"})),zI=(h,j,tt,st)=>{const ut=Wr("primary-menu"),mt=HH(h,tt.shared.providers.menuItems());if(mt.items.length===0)return It.none();const yt=YQ(st),kt=pJ(ut,mt.items,j,tt,st.isHorizontalMenu,yt),Ot=E7(st),zt=vr(mt.menus,(Wt,sn)=>pJ(sn,Wt,j,tt,!1,Ot)),Gt=Ou(zt,Ps(ut,kt));return It.from(Aw.tieredData(ut,Gt,mt.expansions))},ED=h=>!Ms(h,"items"),VH="data-value",AD=(h,j,tt,st,ut)=>On(tt,mt=>ED(mt)?{type:"togglemenuitem",...ut?{}:{role:"option"},text:mt.text,value:mt.value,active:mt.value===st,onAction:()=>{zr.setValue(h,mt.value),rs(h,Yy,{name:j}),Ds.focus(h)}}:{type:"nestedmenuitem",text:mt.text,getSubmenuItems:()=>AD(h,j,mt.items,st,ut)}),A7=(h,j)=>wo(h,tt=>ED(tt)?Jr(tt.value===j,tt):A7(tt.items,j)),WH=(h,j,tt)=>{const st=er(h.items,zt=>!ED(zt)),ut=j.shared.providers,mt=tt.bind(zt=>A7(h.items,zt)).orThunk(()=>bo(h.items).filter(ED)),yt=h.label.map(zt=>ES(zt,ut)),kt=pu.parts.field({dom:{},factory:{sketch:zt=>SD({context:h.context,uid:zt.uid,text:mt.map(Gt=>Gt.text),icon:It.none(),tooltip:It.none(),role:Jr(!st,"combobox"),...st?{}:{listRole:"listbox"},ariaLabel:h.label,fetch:(Gt,Wt)=>{const sn=AD(Gt,h.name,h.items,zr.getValue(Gt),st);Wt(zI(sn,z_.CLOSE_ON_EXECUTE,j,{isHorizontalMenu:!1,search:It.none()}))},onSetup:Nt(Et),getApi:Nt({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[op.config({}),wA(mt.map(Gt=>Gt.value),Gt=>Kr(Gt.element,VH),(Gt,Wt)=>{A7(h.items,Wt).each(sn=>{Vo(Gt.element,VH,sn.value),rs(Gt,J1,{text:sn.text})})})]},"tox-listbox",j.shared)}}),Ot={dom:{tag:"div",classes:["tox-listboxfield"]},components:[kt]};return pu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Dn([yt.toArray(),[Ot]]),fieldBehaviours:gr([Rs.config({disabled:()=>!h.enabled||ut.checkUiComponentContext(h.context).shouldDisable,onDisabled:zt=>{pu.getField(zt).each(Rs.disable)},onEnabled:zt=>{pu.getField(zt).each(Rs.enable)}})])})},XQ=(h,j)=>({dom:{tag:"div",classes:h.classes},components:On(h.items,j.shared.interpreter)}),qH=(h,j)=>{const tt=On(h.options,ut=>({dom:{tag:"option",value:ut.value,innerHtml:ut.text}})),st=h.data.map(ut=>Ps("initialValue",ut)).getOr({});return{uid:h.uid,dom:{tag:"select",classes:h.selectClasses,attributes:h.selectAttributes},components:tt,behaviours:$m(h.selectBehaviours,[Ds.config({}),zr.config({store:{mode:"manual",getValue:ut=>Yv(ut.element),setValue:(ut,mt)=>{const yt=bo(h.options);mn(h.options,Ot=>Ot.value===mt).isSome()?k2(ut.element,mt):ut.element.dom.selectedIndex===-1&&mt===""&&yt.each(Ot=>k2(ut.element,Ot.value))},...st}})])}},JQ=Ty({name:"HtmlSelect",configFields:[Jo("options"),Bm("selectBehaviours",[Ds,zr]),ko("selectClasses",[]),ko("selectAttributes",{}),Kl("data")],factory:qH}),QQ=(h,j,tt)=>{const st=On(h.items,Ot=>({text:j.translate(Ot.text),value:Ot.value})),ut=h.label.map(Ot=>ES(Ot,j)),mt=pu.parts.field({dom:{},...tt.map(Ot=>({data:Ot})).getOr({}),selectAttributes:{size:h.size},options:st,factory:JQ,selectBehaviours:gr([Rs.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable}),op.config({}),Ws("selectbox-change",[Qo(k_(),(Ot,zt)=>{rs(Ot,Yy,{name:h.name})})])])}),yt=h.size>1?It.none():It.some(e1("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},j.icons)),kt={dom:{tag:"div",classes:["tox-selectfield"]},components:Dn([[mt],yt.toArray()])};return pu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Dn([ut.toArray(),[kt]]),fieldBehaviours:gr([Rs.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable,onDisabled:Ot=>{pu.getField(Ot).each(Rs.disable)},onEnabled:Ot=>{pu.getField(Ot).each(Rs.enable)}}),Wp(()=>j.checkUiComponentContext(h.context))])})},eee=Nt([ko("field1Name","field1"),ko("field2Name","field2"),b2("onLockedChange"),fx(["lockClass"]),ko("locked",!1),vv.field("coupledFieldBehaviours",[Ll,zr])]),tee=(h,j,tt)=>Du(h,j,tt).bind(Ll.getCurrent),ZH=(h,j)=>x0({factory:pu,name:h,overrides:tt=>({fieldBehaviours:gr([Ws("coupled-input-behaviour",[Qo(M1(),st=>{tee(st,tt,j).each(ut=>{Du(st,tt,"lock").each(mt=>{na.isOn(mt)&&tt.onLockedChange(st,ut,mt)})})})])])})}),KH=Nt([ZH("field1","field2"),ZH("field2","field1"),x0({factory:Sm,schema:[Jo("dom")],name:"lock",overrides:h=>({buttonBehaviours:gr([na.config({selected:h.locked,toggleClass:h.markers.lockClass,aria:{mode:"pressed"}})])})})]),nee=(h,j,tt,st)=>({uid:h.uid,dom:h.dom,components:j,behaviours:vv.augment(h.coupledFieldBehaviours,[Ll.config({find:It.some}),zr.config({store:{mode:"manual",getValue:ut=>{const mt=lS(ut,h,["field1","field2"]);return{[h.field1Name]:zr.getValue(mt.field1()),[h.field2Name]:zr.getValue(mt.field2())}},setValue:(ut,mt)=>{const yt=lS(ut,h,["field1","field2"]);cu(mt,h.field1Name)&&zr.setValue(yt.field1(),mt[h.field1Name]),cu(mt,h.field2Name)&&zr.setValue(yt.field2(),mt[h.field2Name])}}})]),apis:{getField1:ut=>Du(ut,h,"field1"),getField2:ut=>Du(ut,h,"field2"),getLock:ut=>Du(ut,h,"lock")}}),i1=d0({name:"FormCoupledInputs",configFields:eee(),partFields:KH(),factory:nee,apis:{getField1:(h,j)=>h.getField1(j),getField2:(h,j)=>h.getField2(j),getLock:(h,j)=>h.getLock(j)}}),YH=h=>{const j={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},tt=ut=>ut in j?j[ut]:1;let st=h.value.toFixed(tt(h.unit));return st.indexOf(".")!==-1&&(st=st.replace(/\.?0*$/,"")),st+h.unit},T7=h=>{const tt=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(h);if(tt!==null){const st=parseFloat(tt[1]),ut=tt[2];return Ks.value({value:st,unit:ut})}else return Ks.error(h)},XH=(h,j)=>{const tt={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},st=ut=>Ms(tt,ut);return h.unit===j?It.some(h.value):st(h.unit)&&st(j)?tt[h.unit]===tt[j]?It.some(h.value):It.some(h.value/tt[h.unit]*tt[j]):It.none()},I7=h=>It.none(),JH=(h,j)=>tt=>XH(tt,j).map(st=>({value:st*h,unit:j})),oee=(h,j)=>{const tt=T7(h).toOptional(),st=T7(j).toOptional();return wu(tt,st,(ut,mt)=>XH(ut,mt.unit).map(yt=>mt.value/yt).map(yt=>JH(yt,mt.unit)).getOr(I7)).getOr(I7)},ree=(h,j)=>{let tt=I7;const st=Wr("ratio-event"),ut=cn=>e1(cn,{tag:"span",classes:["tox-icon","tox-lock-icon__"+cn]},j.icons),mt=h.label.getOr("Constrain proportions"),yt=j.translate(mt),kt=i1.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":yt,"data-mce-name":mt}},components:[ut("lock"),ut("unlock")],buttonBehaviours:gr([Rs.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable}),Wp(()=>j.checkUiComponentContext(h.context)),op.config({}),Mp.config(j.tooltips.getConfig({tooltipText:yt}))])}),Ot=cn=>({dom:{tag:"div",classes:["tox-form__group"]},components:cn}),zt=cn=>pu.parts.field({factory:kx,inputClasses:["tox-textfield"],inputBehaviours:gr([Rs.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable}),Wp(()=>j.checkUiComponentContext(h.context)),op.config({}),Ws("size-input-events",[Qo(K0(),(xn,Mn)=>{rs(xn,st,{isField1:cn})}),Qo(k_(),(xn,Mn)=>{rs(xn,Yy,{name:h.name})})])]),selectOnFocus:!1}),Gt=cn=>({dom:{tag:"label",classes:["tox-label"]},components:[mp(j.translate(cn))]}),Wt=i1.parts.field1(Ot([pu.parts.label(Gt("Width")),zt(!0)])),sn=i1.parts.field2(Ot([pu.parts.label(Gt("Height")),zt(!1)]));return i1.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[Wt,sn,Ot([Gt(qL),kt])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(cn,xn,Mn)=>{T7(zr.getValue(cn)).each(vo=>{tt(vo).each(jn=>{zr.setValue(xn,YH(jn))})})},coupledFieldBehaviours:gr([Rs.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable,onDisabled:cn=>{i1.getField1(cn).bind(pu.getField).each(Rs.disable),i1.getField2(cn).bind(pu.getField).each(Rs.disable),i1.getLock(cn).each(Rs.disable)},onEnabled:cn=>{i1.getField1(cn).bind(pu.getField).each(Rs.enable),i1.getField2(cn).bind(pu.getField).each(Rs.enable),i1.getLock(cn).each(Rs.enable)}}),Wp(()=>j.checkUiComponentContext("mode:design")),Ws("size-input-events2",[Qo(st,(cn,xn)=>{const Mn=xn.event.isField1,vo=Mn?i1.getField1(cn):i1.getField2(cn),jn=Mn?i1.getField2(cn):i1.getField1(cn),po=vo.map(zr.getValue).getOr(""),yo=jn.map(zr.getValue).getOr("");tt=oee(po,yo)})])])})},see=(h,j,tt)=>{const st=j_.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[mp(j.translate(h.label))]}),ut=j_.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),mt=j_.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return j_.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:h.min,maxX:h.max,getInitialValue:Nt(tt.getOrThunk(()=>(Math.abs(h.max)-Math.abs(h.min))/2))},components:[st,ut,mt],sliderBehaviours:gr([X1.self(),Ds.config({})]),onChoose:(yt,kt,Ot)=>{rs(yt,Yy,{name:h.name,value:Ot})},onChange:(yt,kt,Ot)=>{rs(yt,Yy,{name:h.name,value:Ot})}})},QH=(h,j)=>{const tt=kt=>({dom:{tag:"th",innerHtml:j.translate(kt)}}),st=kt=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:On(kt,tt)}]}),ut=kt=>({dom:{tag:"td",innerHtml:j.translate(kt)}}),mt=kt=>({dom:{tag:"tr"},components:On(kt,ut)}),yt=kt=>({dom:{tag:"tbody"},components:On(kt,mt)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[st(h.header),yt(h.cells)],behaviours:gr([op.config({}),Ds.config({})])}},R7=(h,j)=>{const tt=h.label.map(cn=>ES(cn,j)),st=[Rs.config({disabled:()=>h.disabled||j.checkUiComponentContext(h.context).shouldDisable}),Wp(()=>j.checkUiComponentContext(h.context)),ys.config({mode:"execution",useEnter:h.multiline!==!0,useControlEnter:h.multiline===!0,execute:cn=>(wl(cn,MI),It.some(!0))}),Ws("textfield-change",[Qo(M1(),(cn,xn)=>{rs(cn,Yy,{name:h.name})}),Qo(QS(),(cn,xn)=>{rs(cn,Yy,{name:h.name})})]),op.config({})],ut=h.validation.map(cn=>Mw.config({getRoot:xn=>Tm(xn.element),invalidClass:"tox-invalid",validator:{validate:xn=>{const Mn=zr.getValue(xn),vo=cn.validator(Mn);return z0.pure(vo===!0?Ks.value(Mn):Ks.error(vo))},validateOnLoad:cn.validateOnLoad}})).toArray(),mt=h.placeholder.fold(Nt({}),cn=>({placeholder:j.translate(cn)})),yt=h.inputMode.fold(Nt({}),cn=>({inputmode:cn})),kt={...mt,...yt,"data-mce-name":h.name},Ot=pu.parts.field({tag:h.multiline===!0?"textarea":"input",...h.data.map(cn=>({data:cn})).getOr({}),inputAttributes:kt,inputClasses:[h.classname],inputBehaviours:gr(Dn([st,ut])),selectOnFocus:!1,factory:kx}),zt=h.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[Ot]}:Ot,Wt=(h.flex?["tox-form__group--stretched"]:[]).concat(h.maximized?["tox-form-group--maximize"]:[]),sn=[Rs.config({disabled:()=>h.disabled||j.checkUiComponentContext(h.context).shouldDisable,onDisabled:cn=>{pu.getField(cn).each(Rs.disable)},onEnabled:cn=>{pu.getField(cn).each(Rs.enable)}}),Wp(()=>j.checkUiComponentContext(h.context))];return RI(tt,zt,Wt,sn)},eV=(h,j,tt)=>R7({name:h.name,multiline:!1,label:h.label,inputMode:h.inputMode,placeholder:h.placeholder,flex:!1,disabled:!h.enabled,classname:"tox-textfield",validation:It.none(),maximized:h.maximized,data:tt,context:h.context},j),TD=(h,j,tt)=>R7({name:h.name,multiline:!0,label:h.label,inputMode:It.none(),placeholder:h.placeholder,flex:!0,disabled:!h.enabled,classname:"tox-textarea",validation:It.none(),maximized:h.maximized,data:tt,context:h.context},j),nM=(h,j)=>j.getAnimationRoot.fold(()=>h.element,tt=>tt(h)),oC=h=>h.dimension.property,kA=(h,j)=>h.dimension.getDimension(j),ID=(h,j)=>{const tt=nM(h,j);N1(tt,[j.shrinkingClass,j.growingClass])},RD=(h,j)=>{bu(h.element,j.openClass),Vp(h.element,j.closedClass),Xo(h.element,oC(j),"0px"),qm(h.element)},M7=(h,j)=>{bu(h.element,j.closedClass),Vp(h.element,j.openClass),Bs(h.element,oC(j))},tV=(h,j,tt,st)=>{tt.setCollapsed(),Xo(h.element,oC(j),kA(j,h.element)),ID(h,j),RD(h,j),j.onStartShrink(h),j.onShrunk(h)},iee=(h,j,tt,st)=>{const ut=st.getOrThunk(()=>kA(j,h.element));tt.setCollapsed(),Xo(h.element,oC(j),ut),qm(h.element);const mt=nM(h,j);bu(mt,j.growingClass),Vp(mt,j.shrinkingClass),RD(h,j),j.onStartShrink(h)},P7=(h,j,tt)=>{const st=kA(j,h.element);(st==="0px"?tV:iee)(h,j,tt,It.some(st))},O7=(h,j,tt)=>{const st=nM(h,j),ut=X0(st,j.shrinkingClass),mt=kA(j,h.element);M7(h,j);const yt=kA(j,h.element);(ut?()=>{Xo(h.element,oC(j),mt),qm(h.element)}:()=>{RD(h,j)})(),bu(st,j.shrinkingClass),Vp(st,j.growingClass),M7(h,j),Xo(h.element,oC(j),yt),tt.setExpanded(),j.onStartGrow(h)},aee=(h,j,tt)=>{if(tt.isExpanded()){Bs(h.element,oC(j));const st=kA(j,h.element);Xo(h.element,oC(j),st)}},lee=(h,j,tt)=>{tt.isExpanded()||O7(h,j,tt)},nV=(h,j,tt)=>{tt.isExpanded()&&P7(h,j,tt)},cee=(h,j,tt)=>{tt.isExpanded()&&tV(h,j,tt)},uee=(h,j,tt)=>tt.isExpanded(),js=(h,j,tt)=>tt.isCollapsed(),BI=(h,j,tt)=>{const st=nM(h,j);return X0(st,j.growingClass)===!0},D7=(h,j,tt)=>{const st=nM(h,j);return X0(st,j.shrinkingClass)===!0};var oV=Object.freeze({__proto__:null,refresh:aee,grow:lee,shrink:nV,immediateShrink:cee,hasGrown:uee,hasShrunk:js,isGrowing:BI,isShrinking:D7,isTransitioning:(h,j,tt)=>BI(h,j)||D7(h,j),toggleGrow:(h,j,tt)=>{(tt.isExpanded()?P7:O7)(h,j,tt)},disableTransitions:ID,immediateGrow:(h,j,tt)=>{tt.isExpanded()||(M7(h,j),Xo(h.element,oC(j),kA(j,h.element)),ID(h,j),tt.setExpanded(),j.onStartGrow(h),j.onGrown(h))}}),pee=Object.freeze({__proto__:null,exhibit:(h,j,tt)=>{const st=j.expanded;return Y0(st?{classes:[j.openClass],styles:{}}:{classes:[j.closedClass],styles:Ps(j.dimension.property,"0px")})},events:(h,j)=>yu([ew(JS(),(tt,st)=>{st.event.raw.propertyName===h.dimension.property&&(ID(tt,h),j.isExpanded()&&Bs(tt.element,h.dimension.property),(j.isExpanded()?h.onGrown:h.onShrunk)(tt))})])}),rV=[Jo("closedClass"),Jo("openClass"),Jo("shrinkingClass"),Jo("growingClass"),Kl("getAnimationRoot"),zl("onShrunk"),zl("onStartShrink"),zl("onGrown"),zl("onStartGrow"),ko("expanded",!1),Ql("dimension",Sp("property",{width:[qu("property","width"),qu("getDimension",h=>bn(h)+"px")],height:[qu("property","height"),qu("getDimension",h=>fu(h)+"px")]}))],gee=Object.freeze({__proto__:null,init:h=>{const j=ls(h.expanded),tt=()=>"expanded: "+j.get();return O0({isExpanded:()=>j.get()===!0,isCollapsed:()=>j.get()===!1,setCollapsed:Pn(j.set,!1),setExpanded:Pn(j.set,!0),readState:tt})}});const Xy=Fm({fields:rV,name:"sliding",active:pee,apis:oV,state:gee}),N7=h=>({isEnabled:()=>!Rs.isDisabled(h),setEnabled:j=>Rs.set(h,!j),setActive:j=>{const tt=h.element;j?(Vp(tt,"tox-tbtn--enabled"),Vo(tt,"aria-pressed",!0)):(bu(tt,"tox-tbtn--enabled"),Kt(tt,"aria-pressed"))},isActive:()=>X0(h.element,"tox-tbtn--enabled"),setText:j=>{rs(h,J1,{text:j})},setIcon:j=>rs(h,MS,{icon:j})}),SA=(h,j,tt,st,ut=!0,mt)=>SD({text:h.text,icon:h.icon,tooltip:h.tooltip,ariaLabel:h.tooltip,searchable:h.search.isSome(),role:st,fetch:(yt,kt)=>{const Ot={pattern:h.search.isSome()?dJ(yt):""};h.fetch(zt=>{kt(zI(zt,z_.CLOSE_ON_EXECUTE,tt,{isHorizontalMenu:!1,search:h.search}))},Ot,N7(yt))},onSetup:h.onSetup,getApi:N7,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...ut?[op.config({})]:[]],context:h.context},j,tt.shared,mt),sV=(h,j,tt)=>{const st=mt=>yt=>{const kt=!yt.isActive();yt.setActive(kt),mt.storage.set(kt),tt.shared.getSink().each(Ot=>{j().getOpt(Ot).each(zt=>{mv(zt.element),rs(zt,Rw,{name:mt.name,value:mt.storage.get()})})})},ut=mt=>yt=>{yt.setActive(mt.storage.get())};return mt=>{mt(On(h,yt=>{const kt=yt.text.fold(()=>({}),Ot=>({text:Ot}));return{type:yt.type,active:!1,...kt,context:yt.context,onAction:st(yt),onSetup:ut(yt)}}))}},iV=h=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":h}},components:[mp(h)]}),aV=(h,j,tt)=>{h.customStateIcon.each(st=>j.push(cV(st,tt.shared.providers.icons,h.customStateIconTooltip.fold(()=>[],ut=>[Mp.config(tt.shared.providers.tooltips.getConfig({tooltipText:ut}))]),["tox-icon-custom-state"],h.customStateIconTooltip.fold(()=>({}),ut=>({title:ut})))))},lV=Wr("leaf-label-event-id"),L7=({leaf:h,onLeafAction:j,visible:tt,treeId:st,selectedId:ut,backstage:mt})=>{const yt=h.menu.map(Ot=>SA(Ot,"tox-mbtn",mt,It.none(),tt)),kt=[iV(h.title)];return aV(h,kt,mt),yt.each(Ot=>kt.push(Ot)),Sm.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(tt?["tox-tree--leaf__label--visible"]:[])},components:kt,role:"treeitem",action:Ot=>{j(h.id),Ot.getSystem().broadcastOn([`update-active-item-${st}`],{value:h.id})},eventOrder:{[dv()]:[lV,"keying"]},buttonBehaviours:gr([...tt?[op.config({})]:[],na.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),ky.config({channels:{[`update-active-item-${st}`]:{onReceive:(Ot,zt)=>{(zt.value===h.id?na.on:na.off)(Ot)}}}}),Ws(lV,[ep((Ot,zt)=>{ut.each(Gt=>{(Gt===h.id?na.on:na.off)(Ot)})}),Qo(dv(),(Ot,zt)=>{const Gt=zt.event.raw.code==="ArrowLeft",Wt=zt.event.raw.code==="ArrowRight";Gt?(pm(Ot.element,".tox-tree--directory").each(sn=>{Ot.getSystem().getByDom(sn).each(cn=>{gv(sn,".tox-tree--directory__label").each(xn=>{cn.getSystem().getByDom(xn).each(Ds.focus)})})}),zt.stop()):Wt&&zt.stop()})])])})},cV=(h,j,tt,st,ut)=>e1(h,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(st||[]),behaviours:tt,attributes:ut},j),mee=(h,j)=>cV(h,j,[]),uV=Wr("directory-label-event-id"),yee=({directory:h,visible:j,noChildren:tt,backstage:st})=>{const ut=h.menu.map(kt=>SA(kt,"tox-mbtn",st,It.none())),mt=[{dom:{tag:"div",classes:["tox-chevron"]},components:[mee("chevron-right",st.shared.providers.icons)]},iV(h.title)];aV(h,mt,st),ut.each(kt=>{mt.push(kt)});const yt=kt=>{pm(kt.element,".tox-tree--directory").each(Ot=>{kt.getSystem().getByDom(Ot).each(zt=>{const Gt=!na.isOn(zt);na.toggle(zt),rs(kt,"expand-tree-node",{expanded:Gt,node:h.id})})})};return Sm.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(j?["tox-tree--directory__label--visible"]:[])},components:mt,action:yt,eventOrder:{[dv()]:[uV,"keying"]},buttonBehaviours:gr([...j?[op.config({})]:[],Ws(uV,[Qo(dv(),(kt,Ot)=>{const zt=Ot.event.raw.code==="ArrowRight",Gt=Ot.event.raw.code==="ArrowLeft";zt&&tt&&Ot.stop(),(zt||Gt)&&pm(kt.element,".tox-tree--directory").each(Wt=>{kt.getSystem().getByDom(Wt).each(sn=>{!na.isOn(sn)&&zt||na.isOn(sn)&&Gt?(yt(kt),Ot.stop()):Gt&&!na.isOn(sn)&&(pm(sn.element,".tox-tree--directory").each(cn=>{gv(cn,".tox-tree--directory__label").each(xn=>{sn.getSystem().getByDom(xn).each(Ds.focus)})}),Ot.stop())})})})])])})},bee=({children:h,onLeafAction:j,visible:tt,treeId:st,expandedIds:ut,selectedId:mt,backstage:yt})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:h.map(kt=>kt.type==="leaf"?L7({leaf:kt,selectedId:mt,onLeafAction:j,visible:tt,treeId:st,backstage:yt}):PD({directory:kt,expandedIds:ut,selectedId:mt,onLeafAction:j,labelTabstopping:tt,treeId:st,backstage:yt})),behaviours:gr([Xy.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:tt}),Gs.config({})])}),vee=Wr("directory-event-id"),PD=({directory:h,onLeafAction:j,labelTabstopping:tt,treeId:st,backstage:ut,expandedIds:mt,selectedId:yt})=>{const{children:kt}=h,Ot=ls(mt),zt=Wt=>kt.map(sn=>sn.type==="leaf"?L7({leaf:sn,selectedId:yt,onLeafAction:j,visible:Wt,treeId:st,backstage:ut}):PD({directory:sn,expandedIds:Ot.get(),selectedId:yt,onLeafAction:j,labelTabstopping:Wt,treeId:st,backstage:ut})),Gt=mt.includes(h.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[yee({directory:h,visible:tt,noChildren:h.children.length===0,backstage:ut}),bee({children:kt,expandedIds:mt,selectedId:yt,onLeafAction:j,visible:Gt,treeId:st,backstage:ut})],behaviours:gr([Ws(vee,[ep((Wt,sn)=>{na.set(Wt,Gt)}),Qo("expand-tree-node",(Wt,sn)=>{const{expanded:cn,node:xn}=sn.event;Ot.set(cn?[...Ot.get(),xn]:Ot.get().filter(Mn=>Mn!==xn))})]),na.config({...h.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(Wt,sn)=>{const cn=Wt.components()[1],xn=zt(sn);sn?Xy.grow(cn):Xy.shrink(cn),Gs.set(cn,xn)}})])}},_ee=Wr("tree-event-id"),xee=(h,j)=>{const tt=h.onLeafAction.getOr(Et),st=h.onToggleExpand.getOr(Et),ut=h.defaultExpandedIds,mt=ls(ut),yt=ls(h.defaultSelectedId),kt=Wr("tree-id"),Ot=(zt,Gt)=>h.items.map(Wt=>Wt.type==="leaf"?L7({leaf:Wt,selectedId:zt,onLeafAction:tt,visible:!0,treeId:kt,backstage:j}):PD({directory:Wt,selectedId:zt,onLeafAction:tt,expandedIds:Gt,labelTabstopping:!0,treeId:kt,backstage:j}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:Ot(yt.get(),mt.get()),behaviours:gr([ys.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Ws(_ee,[Qo("expand-tree-node",(zt,Gt)=>{const{expanded:Wt,node:sn}=Gt.event;mt.set(Wt?[...mt.get(),sn]:mt.get().filter(cn=>cn!==sn)),st(mt.get(),{expanded:Wt,node:sn})})]),ky.config({channels:{[`update-active-item-${kt}`]:{onReceive:(zt,Gt)=>{yt.set(It.some(Gt.value)),Gs.set(zt,Ot(It.some(Gt.value),mt.get()))}}}}),Gs.config({})])}};var wee=Object.freeze({__proto__:null,events:(h,j)=>{const st=h.stream.streams.setup(h,j);return yu([Qo(h.event,st),S_(()=>j.cancel())].concat(h.cancelEvent.map(ut=>[Qo(ut,()=>j.cancel())]).getOr([])))}});const dV=h=>{const j=ls(null);return O0({readState:()=>({timer:j.get()!==null?"set":"unset"}),setTimer:mt=>{j.set(mt)},cancel:()=>{const mt=j.get();mt!==null&&mt.cancel()}})};var Cee=Object.freeze({__proto__:null,throttle:dV,init:h=>h.stream.streams.state(h)});const kee=(h,j)=>{const tt=h.stream,st=vD(h.onStream,tt.delay);return j.setTimer(st),(ut,mt)=>{st.throttle(ut,mt),tt.stopEvent&&mt.stop()}};var See=[Ql("stream",Sp("mode",{throttle:[Jo("delay"),ko("stopEvent",!0),qu("streams",{setup:kee,state:dV})]})),ko("event","input"),Kl("cancelEvent"),b2("onStream")];const F7=Fm({fields:See,name:"streaming",active:wee,state:Cee}),OD=(h,j,tt)=>{const st=zr.getValue(tt);zr.setValue(j,st),fV(j)},z7=(h,j)=>{const tt=h.element,st=Yv(tt),ut=tt.dom;Kr(tt,"type")!=="number"&&j(ut,st)},fV=h=>{z7(h,(j,tt)=>j.setSelectionRange(tt.length,tt.length))},Eee=(h,j)=>{z7(h,(tt,st)=>tt.setSelectionRange(j,st.length))},Aee=(h,j,tt)=>{if(h.selectsOver){const st=zr.getValue(j),ut=h.getDisplayText(st),mt=zr.getValue(tt);return h.getDisplayText(mt).indexOf(ut)===0?It.some(()=>{OD(h,j,tt),Eee(j,ut.length)}):It.none()}else return It.none()},B7=Nt("alloy.typeahead.itemexecute"),Tee=(h,j,tt,st)=>{const ut=(Wt,sn,cn)=>{h.previewing.set(!1);const xn=$p.getCoupled(Wt,"sandbox");if(Ul.isOpen(xn))Ll.getCurrent(xn).each(Mn=>{kr.getHighlighted(Mn).fold(()=>{cn(Mn)},()=>{XA(xn,Mn.element,"keydown",sn)})});else{const Mn=vo=>{Ll.getCurrent(vo).each(cn)};JO(h,yt(Wt),Wt,xn,st,Mn,Ry.HighlightMenuAndItem).get(Et)}},mt=fG(h),yt=Wt=>sn=>sn.map(cn=>{const xn=Ml(cn.menus),Mn=rn(xn,jn=>lo(jn.items,po=>po.type==="item"));return zr.getState(Wt).update(On(Mn,jn=>jn.data)),cn}),kt=Wt=>Ll.getCurrent(Wt),Ot="typeaheadevents",zt=[Ds.config({}),zr.config({onSetValue:h.onSetValue,store:{mode:"dataset",getDataKey:Wt=>Yv(Wt.element),getFallbackEntry:Wt=>({value:Wt,meta:{}}),setValue:(Wt,sn)=>{k2(Wt.element,h.model.getDisplayText(sn))},...h.initialData.map(Wt=>Ps("initialValue",Wt)).getOr({})}}),F7.config({stream:{mode:"throttle",delay:h.responseTime,stopEvent:!1},onStream:(Wt,sn)=>{const cn=$p.getCoupled(Wt,"sandbox");if(Ds.isFocused(Wt)&&Yv(Wt.element).length>=h.minChars){const Mn=kt(cn).bind(jn=>kr.getHighlighted(jn).map(zr.getValue));h.previewing.set(!0);const vo=jn=>{kt(cn).each(po=>{Mn.fold(()=>{h.model.selectsOver&&kr.highlightFirst(po)},yo=>{kr.highlightBy(po,zo=>zr.getValue(zo).value===yo.value),kr.getHighlighted(po).orThunk(()=>(kr.highlightFirst(po),It.none()))})})};JO(h,yt(Wt),Wt,cn,st,vo,Ry.HighlightJustMenu).get(Et)}},cancelEvent:qA()}),ys.config({mode:"special",onDown:(Wt,sn)=>(ut(Wt,sn,kr.highlightFirst),It.some(!0)),onEscape:Wt=>{const sn=$p.getCoupled(Wt,"sandbox");return Ul.isOpen(sn)?(Ul.close(sn),It.some(!0)):It.none()},onUp:(Wt,sn)=>(ut(Wt,sn,kr.highlightLast),It.some(!0)),onEnter:Wt=>{const sn=$p.getCoupled(Wt,"sandbox"),cn=Ul.isOpen(sn);if(cn&&!h.previewing.get())return kt(sn).bind(xn=>kr.getHighlighted(xn)).map(xn=>(rs(Wt,B7(),{item:xn}),!0));{const xn=zr.getValue(Wt);return wl(Wt,qA()),h.onExecute(sn,Wt,xn),cn&&Ul.close(sn),It.some(!0)}}}),na.config({toggleClass:h.markers.openClass,aria:{mode:"expanded"}}),$p.config({others:{sandbox:Wt=>RF(h,Wt,{onOpen:()=>na.on(Wt),onClose:()=>{h.lazyTypeaheadComp.get().each(sn=>Kt(sn.element,"aria-activedescendant")),na.off(Wt)}})}}),Ws(Ot,[ep(Wt=>{h.lazyTypeaheadComp.set(It.some(Wt))}),S_(Wt=>{h.lazyTypeaheadComp.set(It.none())}),ax(Wt=>{const sn=Et;TF(h,yt(Wt),Wt,st,sn,Ry.HighlightMenuAndItem).get(Et)}),Qo(B7(),(Wt,sn)=>{const cn=$p.getCoupled(Wt,"sandbox");OD(h.model,Wt,sn.event.item),wl(Wt,qA()),h.onItemExecute(Wt,cn,sn.event.item,zr.getValue(Wt)),Ul.close(cn),fV(Wt)})].concat(h.dismissOnBlur?[Qo(s2(),Wt=>{const sn=$p.getCoupled(Wt,"sandbox");N0(sn.element).isNone()&&Ul.close(sn)})]:[]))],Gt={[Gy()]:[zr.name(),F7.name(),Ot],...h.eventOrder};return{uid:h.uid,dom:hG(Ou(h,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...mt,...$m(h.typeaheadBehaviours,zt)},eventOrder:Gt}},Iee=Nt([Kl("lazySink"),Jo("fetch"),ko("minChars",5),ko("responseTime",1e3),zl("onOpen"),ko("getHotspot",It.some),ko("getAnchorOverrides",Nt({})),ko("layouts",It.none()),ko("eventOrder",{}),Pt("model",{},[ko("getDisplayText",h=>h.meta!==void 0&&h.meta.text!==void 0?h.meta.text:h.value),ko("selectsOver",!0),ko("populateFromBrowse",!0)]),zl("onSetValue"),v0("onExecute"),zl("onItemExecute"),ko("inputClasses",[]),ko("inputAttributes",{}),ko("inputStyles",{}),ko("matchWidth",!0),ko("useMinWidth",!1),ko("dismissOnBlur",!0),fx(["openClass"]),Kl("initialData"),Kl("listRole"),Bm("typeaheadBehaviours",[Ds,zr,F7,ys,na,$p]),Jl("lazyTypeaheadComp",()=>ls(It.none)),Jl("previewing",()=>ls(!0))].concat(dG()).concat(QO())),hV=Nt([_v({schema:[I_()],name:"menu",overrides:h=>({fakeFocus:!0,onHighlightItem:(j,tt,st)=>{h.previewing.get()?h.lazyTypeaheadComp.get().each(ut=>{Aee(h.model,ut,st).fold(()=>{h.model.selectsOver?(kr.dehighlight(tt,st),h.previewing.set(!0)):h.previewing.set(!1)},mt=>{mt(),h.previewing.set(!1)})}):h.lazyTypeaheadComp.get().each(ut=>{h.model.populateFromBrowse&&OD(h.model,ut,st),Os(st.element,"id").each(mt=>Vo(ut.element,"aria-activedescendant",mt))})},onExecute:(j,tt)=>h.lazyTypeaheadComp.get().map(st=>(rs(st,B7(),{item:tt}),!0)),onHover:(j,tt)=>{h.previewing.set(!1),h.lazyTypeaheadComp.get().each(st=>{h.model.populateFromBrowse&&OD(h.model,st,tt)})}})})]),Ree=d0({name:"Typeahead",configFields:Iee(),partFields:hV(),factory:Tee}),Q1=h=>({...h,toCached:()=>Q1(h.toCached()),bindFuture:Ot=>Q1(h.bind(zt=>zt.fold(Gt=>z0.pure(Ks.error(Gt)),Gt=>Ot(Gt)))),bindResult:Ot=>Q1(h.map(zt=>zt.bind(Ot))),mapResult:Ot=>Q1(h.map(zt=>zt.map(Ot))),mapError:Ot=>Q1(h.map(zt=>zt.mapError(Ot))),foldResult:(Ot,zt)=>h.map(Gt=>Gt.fold(Ot,zt)),withTimeout:(Ot,zt)=>Q1(z0.nu(Gt=>{let Wt=!1;const sn=setTimeout(()=>{Wt=!0,Gt(Ks.error(zt()))},Ot);h.get(cn=>{Wt||(clearTimeout(sn),Gt(cn))})}))}),pV=h=>Q1(z0.nu(h)),$7=h=>Q1(z0.pure(Ks.value(h))),mV={nu:pV,wrap:Q1,pure:$7,value:$7,error:h=>Q1(z0.pure(Ks.error(h))),fromResult:h=>Q1(z0.pure(h)),fromFuture:h=>Q1(h.map(Ks.value)),fromPromise:h=>pV(j=>{h.then(tt=>{j(Ks.value(tt))},tt=>{j(Ks.error(tt))})})},DD=(h,j,tt=[],st,ut,mt,yt)=>{const kt=j.fold(()=>({}),Gt=>({action:Gt})),Ot={buttonBehaviours:gr([o1.item(()=>!h.enabled||yt.checkUiComponentContext(h.context).shouldDisable),Wp(()=>yt.checkUiComponentContext(h.context)),op.config({}),...mt.map(Gt=>Mp.config(yt.tooltips.getConfig({tooltipText:yt.translate(Gt)}))).toArray(),Ws("button press",[_3("click")])].concat(tt)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...kt},zt=Ou(Ot,{dom:st});return Ou(zt,{components:ut})},yV=(h,j,tt,st=[],ut)=>{const mt=h.tooltip.map(zt=>({"aria-label":tt.translate(zt)})).getOr({}),yt={tag:"button",classes:["tox-tbtn"],attributes:{...mt,"data-mce-name":ut}},kt=h.icon.map(zt=>k7(zt,tt.icons)),Ot=SS([kt]);return DD(h,j,st,yt,Ot,h.tooltip,tt)},G7=h=>{switch(h){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},bV=(h,j,tt,st=[],ut=[])=>{const mt=tt.translate(h.text),yt=h.icon.map(cn=>k7(cn,tt.icons)),kt=[yt.getOrThunk(()=>mp(mt))],Ot=h.buttonType.getOr(!h.primary&&!h.borderless?"secondary":"primary"),Wt={tag:"button",classes:[...G7(Ot),...yt.isSome()?["tox-button--icon"]:[],...h.borderless?["tox-button--naked"]:[],...ut],attributes:{"aria-label":mt,"data-mce-name":h.text}},sn=h.icon.map(Nt(mt));return DD(h,j,st,Wt,kt,sn,tt)},U_=(h,j,tt,st=[],ut=[])=>{const mt=bV(h,It.some(j),tt,st,ut);return Sm.sketch(mt)},oM=(h,j)=>tt=>{j==="custom"?rs(tt,Rw,{name:h,value:{}}):j==="submit"?wl(tt,MI):j==="cancel"?wl(tt,AS):console.error("Unknown button type: ",j)},ND=(h,j)=>j==="menu",Oee=(h,j)=>j==="custom"||j==="cancel"||j==="submit",j7=(h,j)=>j==="togglebutton",Dee=(h,j,tt)=>{var st,ut;const mt=h.icon.map(yo=>nC(yo,j.icons)).map(nu),yt=yo=>{rs(yo,Rw,{name:h.name,value:{setIcon:zo=>{mt.map($o=>$o.getOpt(yo).each(Cr=>{Gs.set(Cr,[nC(zo,j.icons)])}))}}})},kt=h.buttonType.getOr(h.primary?"primary":"secondary"),Ot={...h,name:(st=h.name)!==null&&st!==void 0?st:"",primary:kt==="primary",tooltip:h.tooltip,enabled:(ut=h.enabled)!==null&&ut!==void 0?ut:!1,borderless:!1},zt=Ot.tooltip.or(h.text).map(yo=>({"aria-label":j.translate(yo)})).getOr({}),Gt=G7(kt??"secondary"),Wt=h.icon.isSome()&&h.text.isSome(),sn={tag:"button",classes:[...Gt.concat(h.icon.isSome()?["tox-button--icon"]:[]),...h.active?["tox-button--enabled"]:[],...Wt?["tox-button--icon-and-text"]:[]],attributes:{...zt,...wt(tt)?{"data-mce-name":tt}:{}}},cn=[],xn=j.translate(h.text.getOr("")),Mn=mp(xn),jn=[...SS([mt.map(yo=>yo.asSpec())]),...h.text.isSome()?[Mn]:[]],po=DD(Ot,It.some(yt),cn,sn,jn,h.tooltip,j);return Sm.sketch(po)},$I=(h,j,tt)=>{if(ND(h,j)){const st=()=>yt,ut=h,mt={...h,type:"menubutton",search:It.none(),onSetup:kt=>(kt.setEnabled(h.enabled),Et),fetch:sV(ut.items,st,tt)},yt=nu(SA(mt,"tox-tbtn",tt,It.none(),!0,h.text.or(h.tooltip).getOrUndefined()));return yt.asSpec()}else if(Oee(h,j)){const st=oM(h.name,j),ut={...h,context:j==="cancel"?"any":h.context,borderless:!1};return U_(ut,st,tt.shared.providers,[])}else{if(j7(h,j))return Dee(h,tt.shared.providers,h.text.or(h.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",j),new Error("Unknown footer button type")}},vV=(h,j)=>{const tt=oM(h.name,"custom");return IJ(It.none(),pu.parts.field({factory:Sm,...bV(h,It.some(tt),j,[XR(""),X1.self()])}))},U7={type:"separator"},Nee=h=>({type:"menuitem",value:h.url,text:h.title,meta:{attach:h.attach},onAction:Et}),H7=(h,j)=>({type:"menuitem",value:j,text:h,meta:{attach:void 0},onAction:Et}),_V=h=>On(h,Nee),Lee=(h,j)=>lo(j,tt=>tt.type===h),xV=(h,j)=>_V(Lee(h,j)),V7=h=>xV("header",h.targets),Fee=h=>xV("anchor",h.targets),zee=h=>It.from(h.anchorTop).map(j=>H7("<top>",j)).toArray(),wV=h=>It.from(h.anchorBottom).map(j=>H7("<bottom>",j)).toArray(),CV=h=>On(h,j=>H7(j,j)),Bee=h=>mo(h,(j,tt)=>j.length===0||tt.length===0?j.concat(tt):j.concat(U7,tt),[]),W7=(h,j)=>{const tt=h.toLowerCase();return lo(j,st=>{var ut;const mt=st.meta!==void 0&&st.meta.text!==void 0?st.meta.text:st.text,yt=(ut=st.value)!==null&&ut!==void 0?ut:"";return Us(mt.toLowerCase(),tt)||Us(yt.toLowerCase(),tt)})},$ee=(h,j,tt)=>{var st,ut;const mt=zr.getValue(j),yt=(ut=(st=mt==null?void 0:mt.meta)===null||st===void 0?void 0:st.text)!==null&&ut!==void 0?ut:mt.value;return tt.getLinkInformation().fold(()=>[],Ot=>{const zt=W7(yt,CV(tt.getHistory(h)));return h==="file"?Bee([zt,W7(yt,V7(Ot)),W7(yt,Dn([zee(Ot),Fee(Ot),wV(Ot)]))]):zt})},kV=Wr("aria-invalid"),SV=(h,j,tt,st)=>{const ut=j.shared.providers,mt=po=>{const yo=zr.getValue(po);tt.addToHistory(yo.value,h.filetype)},yt={...st.map(po=>({initialData:po})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":kV,type:"url"},minChars:0,responseTime:0,fetch:po=>{const yo=$ee(h.filetype,po,tt),zo=zI(yo,z_.BUBBLE_TO_SANDBOX,j,{isHorizontalMenu:!1,search:It.none()});return z0.pure(zo)},getHotspot:po=>xn.getOpt(po),onSetValue:(po,yo)=>{po.hasConfigured(Mw)&&Mw.run(po).get(Et)},typeaheadBehaviours:gr([...tt.getValidationHandler().map(po=>Mw.config({getRoot:yo=>Tm(yo.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(yo,zo)=>{Gt.getOpt(yo).each($o=>{Vo($o.element,"title",ut.translate(zo))})}},validator:{validate:yo=>{const zo=zr.getValue(yo);return mV.nu($o=>{po({type:h.filetype,url:zo.value},Cr=>{if(Cr.status==="invalid"){const Ur=Ks.error(Cr.message);$o(Ur)}else{const Ur=Ks.value(Cr.message);$o(Ur)}})})},validateOnLoad:!1}})).toArray(),Rs.config({disabled:()=>!h.enabled||ut.checkUiComponentContext(h.context).shouldDisable}),op.config({}),Ws("urlinput-events",[Qo(M1(),po=>{const yo=Yv(po.element),zo=yo.trim();zo!==yo&&k2(po.element,zo),h.filetype==="file"&&rs(po,Yy,{name:h.name})}),Qo(k_(),po=>{rs(po,Yy,{name:h.name}),mt(po)}),Qo(QS(),po=>{rs(po,Yy,{name:h.name}),mt(po)})])]),eventOrder:{[M1()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:po=>po.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:j.shared.getSink,parts:{menu:_R(!1,1,"normal")},onExecute:(po,yo,zo)=>{rs(yo,MI,{})},onItemExecute:(po,yo,zo,$o)=>{mt(po),rs(po,Yy,{name:h.name})}},kt=pu.parts.field({...yt,factory:Ree}),Ot=h.label.map(po=>ES(po,ut)),Gt=nu(((po,yo,zo=po,$o=po)=>e1(zo,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+po],attributes:{title:ut.translate($o),"aria-live":"polite",...yo.fold(()=>({}),Cr=>({id:Cr}))}},ut.icons))("invalid",It.some(kV),"warning")),Wt=nu({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[Gt.asSpec()]}),sn=tt.getUrlPicker(h.filetype),cn=Wr("browser.url.event"),xn=nu({dom:{tag:"div",classes:["tox-control-wrap"]},components:[kt,Wt.asSpec()],behaviours:gr([Rs.config({disabled:()=>!h.enabled||ut.checkUiComponentContext(h.context).shouldDisable})])}),Mn=nu(U_({context:h.context,name:h.name,icon:It.some("browse"),text:h.picker_text.or(h.label).getOr(""),enabled:h.enabled,primary:!1,buttonType:It.none(),borderless:!0},po=>wl(po,cn),ut,[],["tox-browse-url"])),vo=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Dn([[xn.asSpec()],sn.map(()=>Mn.asSpec()).toArray()])}),jn=po=>{Ll.getCurrent(po).each(yo=>{const zo=zr.getValue(yo),$o={fieldname:h.name,...zo};sn.each(Cr=>{Cr($o).get(Ur=>{zr.setValue(yo,Ur),rs(po,Yy,{name:h.name})})})})};return pu.sketch({dom:MJ(),components:Ot.toArray().concat([vo()]),fieldBehaviours:gr([Rs.config({disabled:()=>!h.enabled||ut.checkUiComponentContext(h.context).shouldDisable,onDisabled:po=>{pu.getField(po).each(Rs.disable),Mn.getOpt(po).each(Rs.disable)},onEnabled:po=>{pu.getField(po).each(Rs.enable),Mn.getOpt(po).each(Rs.enable)}}),Wp(()=>ut.checkUiComponentContext(h.context)),Ws("url-input-events",[Qo(cn,jn)])])})},Mx=(h,j)=>{const tt=N6(h.icon,j.icons);return Tx.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${h.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:h.url?void 0:tt},components:h.url?[Sm.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:tt,attributes:{title:j.translate(h.iconTooltip)}},action:st=>rs(st,Rw,{name:"alert-banner",value:h.url}),buttonBehaviours:gr([J$()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:j.translate(h.text)}}]})},q7=(h,j)=>{h.dom.checked=j},Gee=h=>h.dom.checked,jee=(h,j,tt)=>{const st=Ot=>(Ot.element.dom.click(),It.some(!0)),ut=pu.parts.field({factory:{sketch:Jt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:gr([X1.self(),Rs.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable,onDisabled:Ot=>{Tm(Ot.element).each(zt=>Vp(zt,"tox-checkbox--disabled"))},onEnabled:Ot=>{Tm(Ot.element).each(zt=>bu(zt,"tox-checkbox--disabled"))}}),op.config({}),Ds.config({}),RH(tt,Gee,q7),ys.config({mode:"special",onEnter:st,onSpace:st,stopSpaceKeyup:!0}),Ws("checkbox-events",[Qo(k_(),(Ot,zt)=>{rs(Ot,Yy,{name:h.name})})])])}),mt=pu.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[mp(j.translate(h.label))],behaviours:gr([PI.config({})])}),yt=Ot=>e1(Ot==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+Ot]},j.icons),kt=nu({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[yt("checked"),yt("unchecked")]});return pu.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[ut,kt.asSpec(),mt],fieldBehaviours:gr([Rs.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable}),Wp(()=>j.checkUiComponentContext(h.context))])})},Uee=(h,j)=>{const tt=["tox-form__group",...h.stretched?["tox-form__group--stretched"]:[]],st=Ws("htmlpanel",[ep(ut=>{h.onInit(ut.element.dom)})]);return h.presets==="presentation"?Tx.sketch({dom:{tag:"div",classes:tt,innerHtml:h.html},containerBehaviours:gr([Mp.config({...j.tooltips.getConfig({tooltipText:"",onShow:ut=>{np(ut.element,"[data-mce-tooltip]:hover").orThunk(()=>N0(ut.element)).each(mt=>{Os(mt,"data-mce-tooltip").each(yt=>{Mp.setComponents(ut,j.tooltips.getComponents({tooltipText:yt}))})})}}),mode:"children-normal",anchor:ut=>({type:"node",node:np(ut.element,"[data-mce-tooltip]:hover").orThunk(()=>N0(ut.element).filter(mt=>Os(mt,"data-mce-tooltip").isSome())),root:ut.element,layouts:{onLtr:Nt([tm,hu,gm,n0,mm,ym]),onRtl:Nt([tm,hu,gm,n0,mm,ym])},bubble:Xv(0,-2,{})})}),st])}):Tx.sketch({dom:{tag:"div",classes:tt,innerHtml:h.html,attributes:{role:"document"}},containerBehaviours:gr([op.config({}),Ds.config({}),st])})},Gm=h=>(j,tt,st,ut,mt)=>tr(tt,"name").fold(()=>h(tt,ut,It.none(),mt),yt=>j.field(yt,h(tt,ut,tr(st,yt),mt))),Hee=h=>(j,tt,st,ut,mt)=>{const yt=Ou(tt,{source:"dynamic"});return Gm(h)(j,yt,st,ut,mt)},EV={bar:Gm((h,j)=>oD(h,j.shared)),collection:Gm((h,j,tt)=>PJ(h,j.shared.providers,tt)),alertbanner:Gm((h,j)=>Mx(h,j.shared.providers)),input:Gm((h,j,tt)=>eV(h,j.shared.providers,tt)),textarea:Gm((h,j,tt)=>TD(h,j.shared.providers,tt)),label:Gm((h,j,tt,st)=>WQ(h,j.shared,st)),iframe:Hee((h,j,tt)=>tM(h,j.shared.providers,tt)),button:Gm((h,j)=>vV(h,j.shared.providers)),checkbox:Gm((h,j,tt)=>jee(h,j.shared.providers,tt)),colorinput:Gm((h,j,tt)=>WU(h,j.shared,j.colorinput,tt)),colorpicker:Gm((h,j,tt)=>MQ(h,j.shared.providers,tt)),dropzone:Gm((h,j,tt)=>DQ(h,j.shared.providers,tt)),grid:Gm((h,j)=>NQ(h,j.shared)),listbox:Gm((h,j,tt)=>WH(h,j,tt)),selectbox:Gm((h,j,tt)=>QQ(h,j.shared.providers,tt)),sizeinput:Gm((h,j)=>ree(h,j.shared.providers)),slider:Gm((h,j,tt)=>see(h,j.shared.providers,tt)),urlinput:Gm((h,j,tt)=>SV(h,j,j.urlinput,tt)),customeditor:Gm(OQ),htmlpanel:Gm((h,j)=>Uee(h,j.shared.providers)),imagepreview:Gm((h,j,tt)=>w7(h,tt)),table:Gm((h,j)=>QH(h,j.shared.providers)),tree:Gm((h,j)=>xee(h,j)),panel:Gm((h,j)=>XQ(h,j))},AV={field:(h,j)=>j,record:Nt([])},Vee=(h,j,tt,st,ut)=>{const mt=Ou(st,{shared:{interpreter:yt=>TV(h,yt,tt,mt,ut)}});return TV(h,j,tt,mt,ut)},TV=(h,j,tt,st,ut)=>tr(EV,j.type).fold(()=>(console.error(`Unknown factory type "${j.type}", defaulting to container: `,j),j),mt=>mt(h,j,tt,st,ut)),C0=(h,j,tt,st)=>TV(AV,h,j,tt,st),Nw="layout-inset",Z7=h=>h.x,rM=(h,j)=>h.x+h.width/2-j.width/2,K7=(h,j)=>h.x+h.width-j.width,Y7=h=>h.y,X7=(h,j)=>h.y+h.height-j.height,IV=(h,j)=>h.y+h.height/2-j.height/2,LD=(h,j,tt)=>a0(K7(h,j),X7(h,j),tt.insetSouthwest(),vT(),"southwest",l0(h,{right:0,bottom:3}),Nw),FD=(h,j,tt)=>a0(Z7(h),X7(h,j),tt.insetSoutheast(),X3(),"southeast",l0(h,{left:1,bottom:3}),Nw),sM=(h,j,tt)=>a0(K7(h,j),Y7(h),tt.insetNorthwest(),Y3(),"northwest",l0(h,{right:0,top:2}),Nw),iM=(h,j,tt)=>a0(Z7(h),Y7(h),tt.insetNortheast(),bT(),"northeast",l0(h,{left:1,top:2}),Nw),e_=(h,j,tt)=>a0(rM(h,j),Y7(h),tt.insetNorth(),qr(),"north",l0(h,{top:2}),Nw),PS=(h,j,tt)=>a0(rM(h,j),X7(h,j),tt.insetSouth(),yE(),"south",l0(h,{bottom:3}),Nw),J7=(h,j,tt)=>a0(K7(h,j),IV(h,j),tt.insetEast(),E4(),"east",l0(h,{right:0}),Nw),Q7=(h,j,tt)=>a0(Z7(h),IV(h,j),tt.insetWest(),J3(),"west",l0(h,{left:1}),Nw),Wee=h=>{switch(h){case"north":return e_;case"northeast":return iM;case"northwest":return sM;case"south":return PS;case"southeast":return FD;case"southwest":return LD;case"east":return J7;case"west":return Q7}},e9=(h,j,tt,st,ut)=>i5(st).map(Wee).getOr(e_)(h,j,tt,st,ut),qee=h=>{switch(h){case"north":return PS;case"northeast":return FD;case"northwest":return LD;case"south":return e_;case"southeast":return iM;case"southwest":return sM;case"east":return Q7;case"west":return J7}},Zee=(h,j,tt,st,ut)=>i5(st).map(qee).getOr(e_)(h,j,tt,st,ut),GI={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},Gie=(h,j,tt)=>{const ut={maxHeightFunction:hw()},mt=()=>({type:"node",root:Rm(hp(h())),node:It.from(h()),bubble:Xv(12,12,GI),layouts:{onRtl:()=>[iM],onLtr:()=>[sM]},overrides:ut}),yt=()=>({type:"hotspot",hotspot:j(),bubble:Xv(-12,12,GI),layouts:{onRtl:()=>[gm,mm,tm],onLtr:()=>[mm,gm,tm]},overrides:ut});return()=>tt()?mt():yt()},jie=(h,j,tt,st)=>{const mt={maxHeightFunction:hw()},yt=()=>({type:"node",root:Rm(hp(j())),node:It.from(j()),bubble:Xv(12,12,GI),layouts:{onRtl:()=>[e_],onLtr:()=>[e_]},overrides:mt}),kt=()=>h?{type:"node",root:Rm(hp(j())),node:It.from(j()),bubble:Xv(0,-V0(j()),GI),layouts:{onRtl:()=>[hu],onLtr:()=>[hu]},overrides:mt}:{type:"hotspot",hotspot:tt(),bubble:Xv(0,0,GI),layouts:{onRtl:()=>[hu],onLtr:()=>[hu]},overrides:mt};return()=>st()?yt():kt()},Kee=(h,j,tt)=>{const st=()=>({type:"node",root:Rm(hp(h())),node:It.from(h()),layouts:{onRtl:()=>[e_],onLtr:()=>[e_]}}),ut=()=>({type:"hotspot",hotspot:j(),layouts:{onRtl:()=>[tm],onLtr:()=>[tm]}});return()=>tt()?st():ut()},Yee=(h,j)=>()=>({type:"selection",root:j(),getSelection:()=>{const tt=h.selection.getRng(),st=h.model.table.getSelectedCells();if(st.length>1){const ut=st[0],mt=st[st.length-1],yt={firstCell:ro.fromDom(ut),lastCell:ro.fromDom(mt)};return It.some(yt)}return It.some(XC.range(ro.fromDom(tt.startContainer),tt.startOffset,ro.fromDom(tt.endContainer),tt.endOffset))}}),Xee=h=>j=>({type:"node",root:h(),node:j}),RV=(h,j,tt,st)=>{const ut=L_(h),mt=()=>ro.fromDom(h.getBody()),yt=()=>ro.fromDom(h.getContentAreaContainer()),kt=()=>ut||!st();return{inlineDialog:Gie(yt,j,kt),inlineBottomDialog:jie(h.inline,yt,tt,kt),banner:Kee(yt,j,kt),cursor:Yee(h,mt),node:Xee(mt)}},t9=h=>(j,tt)=>{mU(h)(j,tt)},Jee=h=>()=>aU(h),Qee=h=>j=>YO(h,j),MV=h=>j=>iU(h,j),ete=h=>({colorPicker:t9(h),hasCustomColors:Jee(h),getColors:Qee(h),getColorCols:MV(h)}),tte=h=>()=>aO(h),nte=h=>({isDraggableModal:tte(h)}),ote=h=>{const j=ls(b6(h)?"bottom":"top");return{isPositionedAtTop:()=>j.get()==="top",getDockingMode:j.get,setDockingMode:j.set}},zD=h=>cu(h,"items"),n9=h=>cu(h,"format"),PV=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],rte=h=>Ms(h,"items"),ste=h=>Ms(h,"block"),ite=h=>Ms(h,"inline"),OV=h=>Ms(h,"selector"),DV=h=>mo(h,(j,tt)=>{if(rte(tt)){const st=DV(tt.items);return{customFormats:j.customFormats.concat(st.customFormats),formats:j.formats.concat([{title:tt.title,items:st.formats}])}}else if(ite(tt)||ste(tt)||OV(tt)){const ut=`custom-${_e(tt.name)?tt.name:tt.title.toLowerCase()}`;return{customFormats:j.customFormats.concat([{name:ut,format:tt}]),formats:j.formats.concat([{title:tt.title,format:ut,icon:tt.icon}])}}else return{...j,formats:j.formats.concat(tt)}},{customFormats:[],formats:[]}),BD=(h,j)=>{const tt=DV(j),st=ut=>{_o(ut,mt=>{h.formatter.has(mt.name)||h.formatter.register(mt.name,mt.format)})};return h.formatter?st(tt.customFormats):h.on("init",()=>{st(tt.customFormats)}),tt.formats},NV=h=>a6(h).map(j=>{const tt=BD(h,j);return x$(h)?PV.concat(tt):tt}).getOr(PV),$D=h=>{const j=Oo(h);return j.length===1&&Wn(j,"title")},LV=(h,j,tt)=>({...h,type:"formatter",isSelected:j(h.format),getStylePreview:tt(h.format)}),GD=(h,j,tt,st)=>{const ut=Ot=>LV(Ot,tt,st),mt=Ot=>{const zt=kt(Ot.items);return{...Ot,type:"submenu",getStyleItems:Nt(zt)}},yt=Ot=>{const zt=_e(Ot.name)?Ot.name:Wr(Ot.title),Gt=`custom-${zt}`,Wt={...Ot,type:"formatter",format:Gt,isSelected:tt(Gt),getStylePreview:st(Gt)};return h.formatter.register(zt,Wt),Wt},kt=Ot=>On(Ot,zt=>zD(zt)?mt(zt):n9(zt)?ut(zt):$D(zt)?{...zt,type:"separator"}:yt(zt));return kt(j)},aM=h=>{const j=kt=>()=>h.formatter.match(kt),tt=kt=>()=>{const Ot=h.formatter.get(kt);return Ot!==void 0?It.some({tag:Ot.length>0&&(Ot[0].inline||Ot[0].block)||"div",styles:h.dom.parseStyle(h.formatter.getCssText(kt))}):It.none()},st=ls([]),ut=ls([]),mt=ls(!1);return h.on("PreInit",kt=>{const Ot=NV(h),zt=GD(h,Ot,j,tt);st.set(zt)}),h.on("addStyleModifications",kt=>{const Ot=GD(h,kt.items,j,tt);ut.set(Ot),mt.set(kt.replace)}),{getData:()=>{const kt=mt.get()?[]:st.get(),Ot=ut.get();return kt.concat(Ot)}}},FV=h=>{let st=0;const ut=()=>st>0,mt=kt=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[mp(kt.tooltipText)]}];return{getConfig:kt=>({delayForShow:()=>ut()?60:300,delayForHide:Nt(300),exclusive:!0,lazySink:h,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:mt(kt),onShow:(Ot,zt)=>{st++,kt.onShow&&kt.onShow(Ot,zt)},onHide:(Ot,zt)=>{st--,kt.onHide&&kt.onHide(Ot,zt)},onSetup:kt.onSetup}),getComponents:mt}},ate=h=>wt(h)&&h.nodeType===1,zV=tC.trim,o9=h=>j=>!!(ate(j)&&(j.contentEditable===h||j.getAttribute("data-mce-contenteditable")===h)),BV=o9("true"),lte=o9("false"),jD=(h,j,tt,st,ut)=>({type:h,title:j,url:tt,level:st,attach:ut}),UD=h=>{let j=h;for(;j=j.parentNode;){const tt=j.contentEditable;if(tt&&tt!=="inherit")return BV(j)}return!1},cte=(h,j)=>On(o0(ro.fromDom(j),h),tt=>tt.dom),$V=h=>h.innerText||h.textContent,jI=h=>h.id?h.id:Wr("h"),GV=h=>h&&h.nodeName==="A"&&(h.id||h.name)!==void 0,jV=h=>GV(h)&&HD(h),r9=h=>h&&/^(H[1-6])$/.test(h.nodeName),HD=h=>UD(h)&&!lte(h),s9=h=>r9(h)&&HD(h),ute=h=>r9(h)?parseInt(h.nodeName.substr(1),10):0,dte=h=>{var j;const tt=jI(h),st=()=>{h.id=tt};return jD("header",(j=$V(h))!==null&&j!==void 0?j:"","#"+tt,ute(h),st)},fte=h=>{const j=h.id||h.name,tt=$V(h);return jD("anchor",tt||"#"+j,"#"+j,0,Et)},i9=h=>On(lo(h,s9),dte),hte=h=>On(lo(h,jV),fte),pte=h=>cte("h1,h2,h3,h4,h5,h6,a:not([href])",h),gte=h=>zV(h.title).length>0,mte={find:h=>{const j=pte(h);return lo(i9(j).concat(hte(j)),gte)}},VD="tinymce-url-history",UV=5,a9=h=>_e(h)&&/^https?/.test(h),yte=h=>ct(h)&&h.length<=UV&&Cn(h,a9),UI=h=>nt(h)&&Zr(h,j=>!yte(j)).isNone(),HV=()=>{const h=hA.getItem(VD);if(h===null)return{};let j;try{j=JSON.parse(h)}catch(tt){if(tt instanceof SyntaxError)return console.log("Local storage "+VD+" was not valid JSON",tt),{};throw tt}return UI(j)?j:(console.log("Local storage "+VD+" was not valid format",j),{})},bte=h=>{if(!UI(h))throw new Error(`Bad format for history:
`+JSON.stringify(h));hA.setItem(VD,JSON.stringify(h))},l9=h=>{const j=HV();return tr(j,h).getOr([])},VV=(h,j)=>{if(!a9(h))return;const tt=HV(),st=tr(tt,j).getOr([]),ut=lo(st,mt=>mt!==h);tt[j]=[h].concat(ut).slice(0,UV),bte(tt)},WV=h=>!!h,vte=h=>vr(tC.makeMap(h,/[, ]/),WV),c9=h=>It.from(d6(h)),_te=h=>{const j=It.from(iO(h)).filter(WV).map(vte);return c9(h).fold(hn,tt=>j.fold(fn,st=>Oo(st).length>0?st:!1))},xte=(h,j)=>{const tt=_te(h);return pt(tt)?tt?c9(h):It.none():tt[j]?c9(h):It.none()},wte=(h,j)=>xte(h,j).map(tt=>st=>z0.nu(ut=>{const mt=(kt,Ot)=>{if(!_e(kt))throw new Error("Expected value to be string");if(Ot!==void 0&&!nt(Ot))throw new Error("Expected meta to be a object");ut({value:kt,meta:Ot})},yt={filetype:j,fieldname:st.fieldname,...It.from(st.meta).getOr({})};tt.call(h,mt,st.value,yt)})),qV=h=>It.from(h).filter(_e).getOrUndefined(),Cte=h=>f6(h)?It.some({targets:mte.find(h.getBody()),anchorTop:qV(h6(h)),anchorBottom:qV(I$(h))}):It.none(),kte=h=>It.from(A$(h)),Hie=h=>({getHistory:l9,addToHistory:VV,getLinkInformation:()=>Cte(h),getValidationHandler:()=>kte(h),getUrlPicker:j=>wte(h,j)}),Ste=(h,j,tt,st)=>{const ut=ls(!1),mt=ote(j),yt={icons:()=>j.ui.registry.getAll().icons,menuItems:()=>j.ui.registry.getAll().menuItems,translate:W1.translate,isDisabled:()=>!j.ui.isEnabled(),getOption:j.options.get,tooltips:FV(h.dialog),checkUiComponentContext:jn=>{const[po,yo=""]=jn.split(":"),zo=j.ui.registry.getAll().contexts,$o=tr(zo,po).fold(()=>tr(zo,"mode").map(Cr=>Cr("design")).getOr(!1),Cr=>yo.charAt(0)==="!"?!Cr(yo.slice(1)):Cr(yo));return{contextType:po,shouldDisable:!$o}}},kt=Hie(j),Ot=aM(j),zt=ete(j),Gt=nte(j),Wt=()=>ut.get(),sn=jn=>ut.set(jn),cn={shared:{providers:yt,anchors:RV(j,tt,st,mt.isPositionedAtTop),header:mt},urlinput:kt,styles:Ot,colorinput:zt,dialog:Gt,isContextMenuOpen:Wt,setContextMenuState:sn},xn=jn=>It.none(),Mn={...cn,shared:{...cn.shared,interpreter:jn=>C0(jn,{},Mn,xn),getSink:h.popup}},vo={...cn,shared:{...cn.shared,interpreter:jn=>C0(jn,{},vo,xn),getSink:h.dialog}};return{popup:Mn,dialog:vo}},ZV=(h,j,tt)=>{const st=(Ko,Vr)=>{_o([j,...tt],Dr=>{Dr.broadcastEvent(Ko,Vr)})},ut=(Ko,Vr)=>{_o([j,...tt],Dr=>{Dr.broadcastOn([Ko],Vr)})},mt=Ko=>ut(vx(),{target:Ko.target}),yt=yy(),kt=J0(yt,"touchstart",mt),Ot=J0(yt,"touchmove",Ko=>st(nL(),Ko)),zt=J0(yt,"touchend",Ko=>st(LM(),Ko)),Gt=J0(yt,"mousedown",mt),Wt=J0(yt,"mouseup",Ko=>{Ko.raw.button===0&&ut(HT(),{target:Ko.target})}),sn=Ko=>ut(vx(),{target:ro.fromDom(Ko.target)}),cn=Ko=>{Ko.button===0&&ut(HT(),{target:ro.fromDom(Ko.target)})},xn=()=>{_o(h.editorManager.get(),Ko=>{h!==Ko&&Ko.dispatch("DismissPopups",{relatedTarget:h})})},Mn=Ko=>st(Jx(),G4(Ko)),vo=Ko=>{ut(xw(),{}),st(i2(),G4(Ko))},jn=hp(ro.fromDom(h.getElement())),po=a5(jn,"scroll",Ko=>{requestAnimationFrame(()=>{const Vr=h.getContainer();if(Vr!=null){const Xr=yS(h,j.element).map(Il=>[Il.element,...Il.others]).getOr([]);er(Xr,Il=>Vl(Il,Ko.target))&&(h.dispatch("ElementScroll",{target:Ko.target.dom}),st(m3(),Ko))}})}),yo=()=>ut(xw(),{}),zo=Ko=>{Ko.state&&ut(vx(),{target:ro.fromDom(h.getContainer())})},$o=Ko=>{ut(vx(),{target:ro.fromDom(Ko.relatedTarget.getContainer())})},Cr=Ko=>h.dispatch("focusin",Ko),Ur=Ko=>h.dispatch("focusout",Ko);h.on("PostRender",()=>{h.on("click",sn),h.on("tap",sn),h.on("mouseup",cn),h.on("mousedown",xn),h.on("ScrollWindow",Mn),h.on("ResizeWindow",vo),h.on("ResizeEditor",yo),h.on("AfterProgressState",zo),h.on("DismissPopups",$o),_o([j,...tt],Ko=>{Ko.element.dom.addEventListener("focusin",Cr),Ko.element.dom.addEventListener("focusout",Ur)})}),h.on("remove",()=>{h.off("click",sn),h.off("tap",sn),h.off("mouseup",cn),h.off("mousedown",xn),h.off("ScrollWindow",Mn),h.off("ResizeWindow",vo),h.off("ResizeEditor",yo),h.off("AfterProgressState",zo),h.off("DismissPopups",$o),_o([j,...tt],Ko=>{Ko.element.dom.removeEventListener("focusin",Cr),Ko.element.dom.removeEventListener("focusout",Ur)}),Gt.unbind(),kt.unbind(),Ot.unbind(),zt.unbind(),Wt.unbind(),po.unbind()}),h.on("detach",()=>{_o([j,...tt],L2),_o([j,...tt],Ko=>Ko.destroy())})},jm=V5,t_=DP,KV=Nt([ko("shell",!1),Jo("makeItem"),ko("setupItem",Et),vv.field("listBehaviours",[Gs])]),Ete=Zy({name:"items",overrides:()=>({behaviours:gr([Gs.config({})])})}),Ate=Nt([Ete]),Tte=Nt("CustomList"),Ite=(h,j,tt,st)=>{const ut=(kt,Ot)=>{yt(kt).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},zt=>{const Gt=Gs.contents(zt),Wt=Ot.length,sn=Wt-Gt.length,cn=sn>0?no(sn,()=>h.makeItem()):[],xn=Gt.slice(Wt);_o(xn,vo=>Gs.remove(zt,vo)),_o(cn,vo=>Gs.append(zt,vo));const Mn=Gs.contents(zt);_o(Mn,(vo,jn)=>{h.setupItem(kt,vo,Ot[jn],jn)})})},mt=h.shell?{behaviours:[Gs.config({})],components:[]}:{behaviours:[],components:j},yt=kt=>h.shell?It.some(kt):Du(kt,h,"items");return{uid:h.uid,dom:h.dom,components:mt.components,behaviours:$m(h.listBehaviours,mt.behaviours),apis:{setItems:ut}}},YV=d0({name:Tte(),configFields:KV(),partFields:Ate(),factory:Ite,apis:{setItems:(h,j,tt)=>{h.setItems(j,tt)}}}),HI=Nt([Jo("dom"),ko("shell",!0),Bm("toolbarBehaviours",[Gs])]),XV=Nt([Zy({name:"groups",overrides:()=>({behaviours:gr([Gs.config({})])})})]),Mte=(h,j,tt,st)=>{const ut=(kt,Ot)=>{mt(kt).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},zt=>{Gs.set(zt,Ot)})},mt=kt=>h.shell?It.some(kt):Du(kt,h,"groups"),yt=h.shell?{behaviours:[Gs.config({})],components:[]}:{behaviours:[],components:j};return{uid:h.uid,dom:h.dom,components:yt.components,behaviours:$m(h.toolbarBehaviours,yt.behaviours),apis:{setGroups:ut,refresh:Et},domModification:{attributes:{role:"group"}}}},H_=d0({name:"Toolbar",configFields:HI(),partFields:XV(),factory:Mte,apis:{setGroups:(h,j,tt)=>{h.setGroups(j,tt)}}}),Pte=Et,Ote=hn,JV=Nt([]);var EA=Object.freeze({__proto__:null,setup:Pte,isDocked:Ote,getBehaviours:JV});const WD=Nt(Wr("toolbar-height-change")),a1={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},lM="tox-tinymce--toolbar-sticky-on",u9="tox-tinymce--toolbar-sticky-off",QV=(h,j)=>{const tt=Np(j),ut=im(j).dom.innerHeight,mt=Ym(tt),yt=ro.fromDom(h.elm),kt=Nv(yt),Ot=fu(yt),zt=kt.y,Gt=zt+Ot,Wt=Fu(j),sn=fu(j),cn=Wt.top,xn=cn+sn,Mn=Math.abs(cn-mt.top)<2,vo=Math.abs(xn-(mt.top+ut))<2;if(Mn&&zt<xn)k1(mt.left,zt-sn,tt);else if(vo&&Gt>cn){const jn=zt-ut+Ot+sn;k1(mt.left,jn,tt)}},cM=(h,j)=>Wn(Zu.getModes(h),j),eW=h=>{const j=st=>V0(st)+(parseInt(ru(st,"margin-top"),10)||0)+(parseInt(ru(st,"margin-bottom"),10)||0),tt=h.element;Tm(tt).each(st=>{const ut="padding-"+Zu.getModes(h)[0];if(Zu.isDocked(h)){const mt=bn(st);Xo(tt,"width",mt+"px"),Xo(st,ut,j(tt)+"px")}else Bs(tt,"width"),Bs(st,ut)})},tW=(h,j)=>{j?(bu(h,a1.fadeOutClass),IC(h,[a1.transitionClass,a1.fadeInClass])):(bu(h,a1.fadeInClass),IC(h,[a1.fadeOutClass,a1.transitionClass]))},nW=(h,j)=>{const tt=ro.fromDom(h.getContainer());j?(Vp(tt,lM),bu(tt,u9)):(Vp(tt,u9),bu(tt,lM))},Dte=(h,j)=>{const tt=Np(j);P_(tt).filter(st=>!Vl(j,st)).filter(st=>Vl(st,ro.fromDom(tt.dom.body))||Dp(h,st)).each(()=>mv(j))},Nte=(h,j)=>N0(h).orThunk(()=>j().toOptional().bind(tt=>N0(tt.element))),Lte=(h,j,tt)=>{h.inline||(j.header.isPositionedAtTop()||h.on("ResizeEditor",()=>{tt().each(Zu.reset)}),h.on("ResizeWindow ResizeEditor",()=>{tt().each(eW)}),h.on("SkinLoaded",()=>{tt().each(st=>{Zu.isDocked(st)?Zu.reset(st):Zu.refresh(st)})}),h.on("FullscreenStateChanged",()=>{tt().each(Zu.reset)})),h.on("AfterScrollIntoView",st=>{tt().each(ut=>{Zu.refresh(ut);const mt=ut.element;N8(mt)&&QV(st,mt)})}),h.on("PostRender",()=>{nW(h,!1)})},VI=h=>h().map(Zu.isDocked).getOr(!1),uM=()=>[ky.config({channels:{[WD()]:{onReceive:eW}}})],qD=(h,j)=>{const tt=Wl(),st=j.getSink,ut=kt=>{st().each(Ot=>kt(Ot.element))},mt=kt=>{h.inline||eW(kt),nW(h,Zu.isDocked(kt)),kt.getSystem().broadcastOn([xw()],{}),st().each(Ot=>Ot.getSystem().broadcastOn([xw()],{}))},yt=h.inline?[]:uM();return[Ds.config({}),Zu.config({contextual:{lazyContext:kt=>{const Ot=V0(kt.element),zt=h.inline?h.getContentAreaContainer():h.getContainer();return It.from(zt).map(Gt=>{const Wt=_d(ro.fromDom(Gt));return yS(h,kt.element).fold(()=>{const cn=Wt.height-Ot,xn=Wt.y+(cM(kt,"top")?0:Ot);return Qu(Wt.x,xn,Wt.width,cn)},cn=>{const xn=ay(Wt,bS(cn)),Mn=cM(kt,"top")?xn.y:xn.y+Ot;return Qu(xn.x,Mn,xn.width,xn.height-Ot)})})},onShow:()=>{ut(kt=>tW(kt,!0))},onShown:kt=>{ut(Ot=>N1(Ot,[a1.transitionClass,a1.fadeInClass])),tt.get().each(Ot=>{Dte(kt.element,Ot),tt.clear()})},onHide:kt=>{Nte(kt.element,st).fold(tt.clear,tt.set),ut(Ot=>tW(Ot,!1))},onHidden:()=>{ut(kt=>N1(kt,[a1.transitionClass]))},...a1},lazyViewport:kt=>yS(h,kt.element).fold(()=>{const zt=zp(),Gt=S$(h),Wt=zt.y+(cM(kt,"top")&&!w6(h)?Gt:0),sn=zt.height-(cM(kt,"bottom")?Gt:0);return{bounds:Qu(zt.x,Wt,zt.width,sn),optScrollEnv:It.none()}},zt=>({bounds:bS(zt),optScrollEnv:It.some({currentScrollTop:zt.element.dom.scrollTop,scrollElmTop:Fu(zt.element).top})})),modes:[j.header.getDockingMode()],onDocked:mt,onUndocked:mt}),...yt]};var Fte=Object.freeze({__proto__:null,setup:Lte,isDocked:VI,getBehaviours:qD});const zte=h=>{const j=h.editor,tt=h.sticky?qD:JV;return{uid:h.uid,dom:h.dom,components:h.components,behaviours:gr(tt(j,h.sharedBackstage))}},d9=vs([om,Ql("items",ZS([KS([W6,dy("items",Nr)]),Nr]))].concat(iA)),Bte=h=>cp("GroupToolbarButton",d9,h),dM=[_g("text"),_g("tooltip"),_g("icon"),Eu("search",!1,ZS([By,vs([_g("placeholder")])],h=>pt(h)?h?It.some({placeholder:It.none()}):It.none():It.some(h))),_y("fetch"),Wu("onSetup",()=>Et),Rp("context","mode:design")],f9=vs([om,...dM]),oW=h=>cp("menubutton",f9,h),$te=vs([om,wR,n1,J2,EG,CG,sA,wm("presets","normal",["normal","color","listpreview"]),AG(1),xI,kG,Rp("context","mode:design")]),Gte=h=>cp("SplitButton",$te,h);var h9=Ty({factory:(h,j)=>{const tt=(ut,mt)=>{const yt=On(mt,kt=>{const Ot={type:"menubutton",text:kt.text,fetch:Gt=>{Gt(kt.getItems())},context:"any"},zt=oW(Ot).mapError(Gt=>sx(Gt)).getOrDie();return SA(zt,"tox-mbtn",j.backstage,It.some("menuitem"))});Gs.set(ut,yt)},st={focus:ys.focusIn,setMenus:tt};return{uid:h.uid,dom:h.dom,components:[],behaviours:gr([Gs.config({}),Ws("menubar-events",[ep(ut=>{h.onSetup(ut)}),Qo(Z0(),(ut,mt)=>{np(ut.element,".tox-mbtn--active").each(yt=>{R_(mt.event.target,".tox-mbtn").each(kt=>{Vl(yt,kt)||ut.getSystem().getByDom(yt).each(Ot=>{ut.getSystem().getByDom(kt).each(zt=>{r1.expand(zt),r1.close(Ot),Ds.focus(zt)})})})})}),Qo(tE(),(ut,mt)=>{mt.event.prevFocus.bind(yt=>ut.getSystem().getByDom(yt).toOptional()).each(yt=>{mt.event.newFocus.bind(kt=>ut.getSystem().getByDom(kt).toOptional()).each(kt=>{r1.isOpen(yt)&&(r1.expand(kt),r1.close(yt))})})})]),ys.config({mode:"flow",selector:".tox-mbtn",onEscape:ut=>(h.onEscape(ut),It.some(!0))}),op.config({})]),apis:st,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Jo("dom"),Jo("uid"),Jo("onEscape"),Jo("backstage"),ko("onSetup",Et)],apis:{focus:(h,j)=>{h.focus(j)},setMenus:(h,j,tt)=>{h.setMenus(j,tt)}}});const jte="Upgrade",rW="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",sW=h=>({uid:h.uid,dom:h.dom,components:[{dom:{tag:"a",attributes:{href:rW,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:jte}}]}),ZD="container",Ute=[Bm("slotBehaviours",[])],fM=h=>"<alloy.field."+h+">",KD=h=>{const j=(()=>{const mt=[];return{slot:(kt,Ot)=>(mt.push(kt),tI(ZD,fM(kt),Ot)),record:Nt(mt)}})(),tt=h(j),st=j.record(),ut=On(st,mt=>x0({name:mt,pname:fM(mt)}));return UE(ZD,Ute,ut,iW,tt)},iW=(h,j)=>{const tt=Mn=>H5(h),st=(Mn,vo)=>Du(Mn,h,vo),ut=(Mn,vo)=>(jn,po)=>Du(jn,h,po).map(yo=>Mn(yo,po)).getOr(vo),mt=Mn=>(vo,jn)=>{_o(jn,po=>Mn(vo,po))},yt=(Mn,vo)=>Kr(Mn.element,"aria-hidden")!=="true",kt=(Mn,vo)=>{if(!yt(Mn)){const jn=Mn.element;Bs(jn,"display"),Kt(jn,"aria-hidden"),rs(Mn,CC(),{name:vo,visible:!0})}},Ot=(Mn,vo)=>{if(yt(Mn)){const jn=Mn.element;Xo(jn,"display","none"),Vo(jn,"aria-hidden","true"),rs(Mn,CC(),{name:vo,visible:!1})}},zt=ut(yt,!1),Gt=ut(Ot),Wt=mt(Gt),sn=Mn=>Wt(Mn,tt()),cn=ut(kt),xn={getSlotNames:tt,getSlot:st,isShowing:zt,hideSlot:Gt,hideAllSlots:sn,showSlot:cn};return{uid:h.uid,dom:h.dom,components:j,behaviours:ZT(h.slotBehaviours),apis:xn}},ny={...vr({getSlotNames:(h,j)=>h.getSlotNames(j),getSlot:(h,j,tt)=>h.getSlot(j,tt),isShowing:(h,j,tt)=>h.isShowing(j,tt),hideSlot:(h,j,tt)=>h.hideSlot(j,tt),hideAllSlots:(h,j)=>h.hideAllSlots(j),showSlot:(h,j,tt)=>h.showSlot(j,tt)},h=>hT(h)),sketch:KD},Hte=vs([n1,wR,Wu("onShow",Et),Wu("onHide",Et),sA]),Vte=h=>cp("sidebar",Hte,h),p9=h=>{const{sidebars:j}=h.ui.registry.getAll();_o(Oo(j),tt=>{const st=j[tt],ut=()=>ou(It.from(h.queryCommandValue("ToggleSidebar")),tt);h.ui.registry.addToggleButton(tt,{icon:st.icon,tooltip:st.tooltip,onAction:mt=>{h.execCommand("ToggleSidebar",!1,tt),mt.setActive(ut())},onSetup:mt=>{mt.setActive(ut());const yt=()=>mt.setActive(ut());return h.on("ToggleSidebar",yt),()=>{h.off("ToggleSidebar",yt)}},context:"any"})})},Wte=h=>({element:()=>h.element.dom}),g9=(h,j)=>{const tt=On(Oo(j),st=>{const ut=j[st],mt=dr(Vte(ut));return{name:st,getApi:Wte,onSetup:mt.onSetup,onShow:mt.onShow,onHide:mt.onHide}});return On(tt,st=>{const ut=ls(Et);return h.slot(st.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:CI.unnamedEvents([CS(st,ut),kS(st,ut),Qo(CC(),(mt,yt)=>{const kt=yt.event;mn(tt,zt=>zt.name===kt.name).each(zt=>{(kt.visible?zt.onShow:zt.onHide)(zt.getApi(mt))})})])})})},qte=h=>ny.sketch(j=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:g9(j,h),slotBehaviours:CI.unnamedEvents([ep(tt=>ny.hideAllSlots(tt))])})),m9=(h,j,tt)=>{Ll.getCurrent(h).each(ut=>{Gs.set(ut,[qte(j)]);const mt=tt==null?void 0:tt.toLowerCase();_e(mt)&&Ms(j,mt)&&Ll.getCurrent(ut).each(yt=>{ny.showSlot(yt,mt),Xy.immediateGrow(ut),Bs(ut.element,"width"),YD(h.element,"region")})})},YD=(h,j)=>{Vo(h,"role",j)},Zte=(h,j)=>{Ll.getCurrent(h).each(st=>{Ll.getCurrent(st).each(mt=>{Xy.hasGrown(st)?ny.isShowing(mt,j)?(Xy.shrink(st),YD(h.element,"presentation")):(ny.hideAllSlots(mt),ny.showSlot(mt,j),YD(h.element,"region")):(ny.hideAllSlots(mt),ny.showSlot(mt,j),Xy.grow(st),YD(h.element,"region"))})})},Kte=h=>Ll.getCurrent(h).bind(tt=>Xy.isGrowing(tt)||Xy.hasGrown(tt)?Ll.getCurrent(tt).bind(mt=>mn(ny.getSlotNames(mt),yt=>ny.isShowing(mt,yt))):It.none()),y9=Wr("FixSizeEvent"),b9=Wr("AutoSizeEvent"),Zie=h=>({uid:h.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:gr([op.config({}),Ds.config({}),Xy.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:j=>{Ll.getCurrent(j).each(ny.hideAllSlots),wl(j,b9)},onGrown:j=>{wl(j,b9)},onStartGrow:j=>{rs(j,y9,{width:du(j.element,"width").getOr("")})},onStartShrink:j=>{rs(j,y9,{width:bn(j.element)+"px"})}}),Gs.config({}),Ll.config({find:j=>{const tt=Gs.contents(j);return bo(tt)}})])}],behaviours:gr([X1.childAt(0),Ws("sidebar-sliding-events",[Qo(y9,(j,tt)=>{Xo(j.element,"width",tt.event.width)}),Qo(b9,(j,tt)=>{Bs(j.element,"width")})])])});var aW=Object.freeze({__proto__:null,block:(h,j,tt,st)=>{Vo(h.element,"aria-busy",!0);const ut=j.getRoot(h).getOr(h),mt=gr([ys.config({mode:"special",onTab:()=>It.some(!0),onShiftTab:()=>It.some(!0)}),Ds.config({})]),yt=st(ut,mt),kt=ut.getSystem().build(yt);Gs.append(ut,Uy(kt)),kt.hasConfigured(ys)&&j.focus&&ys.focusIn(kt),tt.isBlocked()||j.onBlock(h),tt.blockWith(()=>Gs.remove(ut,kt))},unblock:(h,j,tt)=>{Kt(h.element,"aria-busy"),tt.isBlocked()&&j.onUnblock(h),tt.clear()},isBlocked:(h,j,tt)=>tt.isBlocked()}),Xte=[Wu("getRoot",It.none),em("focus",!0),zl("onBlock"),zl("onUnblock")],Jte=Object.freeze({__proto__:null,init:()=>{const h=Vw(),j=tt=>{h.set({destroy:tt})};return O0({readState:h.isSet,blockWith:j,clear:h.clear,isBlocked:h.isSet})}});const Px=Fm({fields:Xte,name:"blocking",apis:aW,state:Jte}),Qte=h=>(j,tt)=>({dom:{tag:"div",attributes:{"aria-label":h.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:xx('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),v9=h=>Ll.getCurrent(h).each(j=>mv(j.element,!0)),ene=(h,j)=>{const tt="tabindex",st=`data-mce-${tt}`;It.from(h.iframeElement).map(ro.fromDom).each(ut=>{j?(Os(ut,tt).each(mt=>Vo(ut,st,mt)),Vo(ut,tt,-1)):(Kt(ut,tt),Os(ut,st).each(mt=>{Vo(ut,tt,mt),Kt(ut,st)}))})},tne=(h,j,tt,st)=>{const ut=j.element;if(ene(h,tt),tt)Px.block(j,Qte(st)),Bs(ut,"display"),Kt(ut,"aria-hidden"),h.hasFocus()&&v9(j);else{const mt=Ll.getCurrent(j).exists(yt=>T2(yt.element));Px.unblock(j),Xo(ut,"display","none"),Vo(ut,"aria-hidden","true"),mt&&h.focus()}},nne=h=>({uid:h.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:gr([Gs.config({}),Px.config({focus:!1}),Ll.config({find:j=>bo(j.components())})]),components:[]}),Xie=h=>h.type==="focusin",Jie=h=>Xie(h)?(h.composed?bo(h.composedPath()):It.from(h.target)).map(ro.fromDom).filter(_s).exists(tt=>X0(tt,"mce-pastebin")):!1,lW=(h,j,tt)=>{const st=ls(!1),ut=Wl(),mt=kt=>{st.get()&&!Jie(kt)&&(kt.preventDefault(),v9(j()),h.editorManager.setActive(h))};h.inline||h.on("PreInit",()=>{h.dom.bind(h.getWin(),"focusin",mt),h.on("BeforeExecCommand",kt=>{kt.command.toLowerCase()==="mcefocus"&&kt.value!==!0&&mt(kt)})});const yt=kt=>{kt!==st.get()&&(st.set(kt),tne(h,j(),kt,tt.providers),WO(h,kt))};h.on("ProgressState",kt=>{if(ut.on(clearTimeout),Rt(kt.time)){const Ot=XE.setEditorTimeout(h,()=>yt(kt.state),kt.time);ut.set(Ot)}else yt(kt.state),ut.clear()})},cW=(h,j)=>mo(h,(ut,mt)=>j(mt,ut.len).fold(Nt(ut),kt=>({len:kt.finish,list:ut.list.concat([kt])})),{len:0,list:[]}).list,_9=(h,j,tt)=>({within:h,extra:j,withinWidth:tt}),uW=(h,j,tt)=>{const st=cW(h,(kt,Ot)=>{const zt=tt(kt);return It.some({element:kt,start:Ot,finish:Ot+zt,width:zt})}),ut=lo(st,kt=>kt.finish<=j),mt=Ho(ut,(kt,Ot)=>kt+Ot.width,0),yt=st.slice(ut.length);return{within:ut,extra:yt,withinWidth:mt}},Py=h=>On(h,j=>j.element),one=(h,j,tt)=>{const st=Py(h.concat(j));return _9(st,[],tt)},dW=(h,j,tt,st)=>{const ut=Py(h).concat([tt]);return _9(ut,Py(j),st)},fW=(h,j,tt)=>_9(Py(h),[],tt),rne=(h,j,tt)=>{const st=uW(j,h,tt);return st.extra.length===0?It.some(st):It.none()},hM=(h,j,tt,st)=>{const ut=rne(h,j,tt).getOrThunk(()=>uW(j,h-tt(st),tt)),mt=ut.within,yt=ut.extra,kt=ut.withinWidth;return yt.length===1&&yt[0].width<=tt(st)?one(mt,yt,kt):yt.length>=1?dW(mt,yt,st,kt):fW(mt,yt,kt)},hW=(h,j)=>{const tt=On(j,st=>Uy(st));H_.setGroups(h,tt)},XD=h=>wo(h,j=>N0(j.element).bind(tt=>j.getSystem().getByDom(tt).toOptional())),pW=(h,j,tt)=>{const st=j.builtGroups.get();if(st.length===0)return;const ut=Br(h,j,"primary"),mt=$p.getCoupled(h,"overflowGroup");Xo(ut.element,"visibility","hidden");const yt=st.concat([mt]),kt=XD(yt);tt([]),hW(ut,yt);const Ot=bn(ut.element),zt=hM(Ot,j.builtGroups.get(),Gt=>Math.ceil(Gt.element.dom.getBoundingClientRect().width),mt);zt.extra.length===0?(Gs.remove(ut,mt),tt([])):(hW(ut,zt.within),tt(zt.extra)),Bs(ut.element,"visibility"),qm(ut.element),kt.each(Ds.focus)},pM=Nt([Bm("splitToolbarBehaviours",[$p]),Jl("builtGroups",()=>ls([]))]),sne=Nt([fx(["overflowToggledClass"]),cv("getOverflowBounds"),Jo("lazySink"),Jl("overflowGroups",()=>ls([])),zl("onOpened"),zl("onClosed")].concat(pM())),ine=Nt([x0({factory:H_,schema:HI(),name:"primary"}),_v({schema:HI(),name:"overflow"}),_v({name:"overflow-button"}),_v({name:"overflow-group"})]),Av=Nt((h,j)=>{Ao(h,Math.floor(j))}),ane=Nt([fx(["toggledClass"]),Jo("lazySink"),_y("fetch"),cv("getBounds"),hm("fireDismissalEventInstead",[ko("event",jy())]),pw(),zl("onToggled")]),JD=Nt([_v({name:"button",overrides:h=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:gr([na.config({toggleClass:h.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:h.onToggled})])})}),_v({factory:H_,schema:HI(),name:"toolbar",overrides:h=>({toolbarBehaviours:gr([ys.config({mode:"cyclic",onEscape:j=>(Du(j,h,"button").each(Ds.focus),It.none())})])})})]),gM=Wl(),gW=(h,j)=>{gM.set(!0),x9(h,j),gM.clear()},x9=(h,j)=>{const tt=$p.getCoupled(h,"toolbarSandbox");Ul.isOpen(tt)?Ul.close(tt):Ul.open(tt,j.toolbar())},QD=(h,j,tt,st)=>{const ut=tt.getBounds.map(yt=>yt()),mt=tt.lazySink(h).getOrDie();s0.positionWithinBounds(mt,j,{anchor:{type:"hotspot",hotspot:h,layouts:st,overrides:{maxWidthFunction:Av()}}},ut)},mW=(h,j,tt,st,ut)=>{H_.setGroups(j,ut),QD(h,j,tt,st),na.on(h)},lne=(h,j,tt)=>{const st=mE(),ut=(yt,kt)=>{const Ot=gM.get().getOr(!1);tt.fetch().get(zt=>{mW(h,kt,tt,j.layouts,zt),st.link(h.element),Ot||ys.focusIn(kt)})},mt=()=>{na.off(h),gM.get().getOr(!1)||Ds.focus(h),st.unlink(h.element)};return{dom:{tag:"div",attributes:{id:st.id}},behaviours:gr([ys.config({mode:"special",onEscape:yt=>(Ul.close(yt),It.some(!0))}),Ul.config({onOpen:ut,onClose:mt,isPartOf:(yt,kt,Ot)=>cw(kt,Ot)||cw(h,Ot),getAttachPoint:()=>tt.lazySink(h).getOrDie()}),ky.config({channels:{...FE({isExtraPart:hn,...tt.fireDismissalEventInstead.map(yt=>({fireEventInstead:{event:yt.event}})).getOr({})}),...zE({doReposition:()=>{Ul.getState($p.getCoupled(h,"toolbarSandbox")).each(yt=>{QD(h,yt,tt,j.layouts)})}})}})])}},OS=d0({name:"FloatingToolbarButton",factory:(h,j,tt,st)=>({...Sm.sketch({...st.button(),action:ut=>{x9(ut,st)},buttonBehaviours:vv.augment({dump:st.button().buttonBehaviours},[$p.config({others:{toolbarSandbox:ut=>lne(ut,tt,h)}})])}),apis:{setGroups:(ut,mt)=>{Ul.getState($p.getCoupled(ut,"toolbarSandbox")).each(yt=>{mW(ut,yt,h,tt.layouts,mt)})},reposition:ut=>{Ul.getState($p.getCoupled(ut,"toolbarSandbox")).each(mt=>{QD(ut,mt,h,tt.layouts)})},toggle:ut=>{x9(ut,st)},toggleWithoutFocusing:ut=>{gW(ut,st)},getToolbar:ut=>Ul.getState($p.getCoupled(ut,"toolbarSandbox")),isOpen:ut=>Ul.isOpen($p.getCoupled(ut,"toolbarSandbox"))}}),configFields:ane(),partFields:JD(),apis:{setGroups:(h,j,tt)=>{h.setGroups(j,tt)},reposition:(h,j)=>{h.reposition(j)},toggle:(h,j)=>{h.toggle(j)},toggleWithoutFocusing:(h,j)=>{h.toggleWithoutFocusing(j)},getToolbar:(h,j)=>h.getToolbar(j),isOpen:(h,j)=>h.isOpen(j)}}),cne=Nt([Jo("items"),fx(["itemSelector"]),Bm("tgroupBehaviours",[ys])]),une=Nt([GE({name:"items",unit:"item"})]),dne=(h,j,tt,st)=>({uid:h.uid,dom:h.dom,components:j,behaviours:$m(h.tgroupBehaviours,[ys.config({mode:"flow",selector:h.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),mM=d0({name:"ToolbarGroup",configFields:cne(),partFields:une(),factory:dne}),w9=h=>On(h,j=>Uy(j)),C9=(h,j,tt)=>{pW(h,tt,st=>{tt.overflowGroups.set(st),j.getOpt(h).each(ut=>{OS.setGroups(ut,w9(st))})})},fne=(h,j,tt,st)=>{const ut=nu(OS.sketch({fetch:()=>z0.nu(mt=>{mt(w9(h.overflowGroups.get()))}),layouts:{onLtr:()=>[mm,gm],onRtl:()=>[gm,mm],onBottomLtr:()=>[ym,n0],onBottomRtl:()=>[n0,ym]},getBounds:tt.getOverflowBounds,lazySink:h.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:h.markers.overflowToggledClass},parts:{button:st["overflow-button"](),toolbar:st.overflow()},onToggled:(mt,yt)=>h[yt?"onOpened":"onClosed"](mt)}));return{uid:h.uid,dom:h.dom,components:j,behaviours:$m(h.splitToolbarBehaviours,[$p.config({others:{overflowGroup:()=>mM.sketch({...st["overflow-group"](),items:[ut.asSpec()]})}})]),apis:{setGroups:(mt,yt)=>{h.builtGroups.set(On(yt,mt.getSystem().build)),C9(mt,ut,h)},refresh:mt=>C9(mt,ut,h),toggle:mt=>{ut.getOpt(mt).each(yt=>{OS.toggle(yt)})},toggleWithoutFocusing:mt=>{ut.getOpt(mt).each(OS.toggleWithoutFocusing)},isOpen:mt=>ut.getOpt(mt).map(OS.isOpen).getOr(!1),reposition:mt=>{ut.getOpt(mt).each(yt=>{OS.reposition(yt)})},getOverflow:mt=>ut.getOpt(mt).bind(OS.getToolbar)},domModification:{attributes:{role:"group"}}}},yW=d0({name:"SplitFloatingToolbar",configFields:sne(),partFields:ine(),factory:fne,apis:{setGroups:(h,j,tt)=>{h.setGroups(j,tt)},refresh:(h,j)=>{h.refresh(j)},reposition:(h,j)=>{h.reposition(j)},toggle:(h,j)=>{h.toggle(j)},toggleWithoutFocusing:(h,j)=>{h.toggle(j)},isOpen:(h,j)=>h.isOpen(j),getOverflow:(h,j)=>h.getOverflow(j)}}),bW=Nt([fx(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),zl("onOpened"),zl("onClosed")].concat(pM())),vW=Nt([x0({factory:H_,schema:HI(),name:"primary"}),x0({factory:H_,schema:HI(),name:"overflow",overrides:h=>({toolbarBehaviours:gr([Xy.config({dimension:{property:"height"},closedClass:h.markers.closedClass,openClass:h.markers.openClass,shrinkingClass:h.markers.shrinkingClass,growingClass:h.markers.growingClass,onShrunk:j=>{Du(j,h,"overflow-button").each(tt=>{na.off(tt)}),h.onClosed(j)},onGrown:j=>{h.onOpened(j)},onStartGrow:j=>{Du(j,h,"overflow-button").each(na.on)}}),ys.config({mode:"acyclic",onEscape:j=>(Du(j,h,"overflow-button").each(Ds.focus),It.some(!0))})])})}),_v({name:"overflow-button",overrides:h=>({buttonBehaviours:gr([na.config({toggleClass:h.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),_v({name:"overflow-group"})]),_W=(h,j)=>Du(h,j,"overflow").map(Xy.hasGrown).getOr(!1),k9=(h,j,tt)=>{Du(h,j,"overflow-button").each(st=>{Du(h,j,"overflow").each(ut=>{if(S9(h,j),Xy.hasShrunk(ut)){const mt=j.onOpened;j.onOpened=yt=>{tt||ys.focusIn(ut),mt(yt),j.onOpened=mt}}else{const mt=j.onClosed;j.onClosed=yt=>{tt||Ds.focus(st),mt(yt),j.onClosed=mt}}Xy.toggleGrow(ut)})})},S9=(h,j)=>{Du(h,j,"overflow").each(tt=>{pW(h,j,st=>{const ut=On(st,mt=>Uy(mt));H_.setGroups(tt,ut)}),Du(h,j,"overflow-button").each(st=>{Xy.hasGrown(tt)&&na.on(st)}),Xy.refresh(tt)})},hne=(h,j,tt,st)=>{const ut="alloy.toolbar.toggle",mt=(yt,kt)=>{const Ot=On(kt,yt.getSystem().build);h.builtGroups.set(Ot)};return{uid:h.uid,dom:h.dom,components:j,behaviours:$m(h.splitToolbarBehaviours,[$p.config({others:{overflowGroup:yt=>mM.sketch({...st["overflow-group"](),items:[Sm.sketch({...st["overflow-button"](),action:kt=>{wl(yt,ut)}})]})}}),Ws("toolbar-toggle-events",[Qo(ut,yt=>{k9(yt,h,!1)})])]),apis:{setGroups:(yt,kt)=>{mt(yt,kt),S9(yt,h)},refresh:yt=>S9(yt,h),toggle:yt=>{k9(yt,h,!1)},toggleWithoutFocusing:yt=>{k9(yt,h,!0)},isOpen:yt=>_W(yt,h)},domModification:{attributes:{role:"group"}}}},eN=d0({name:"SplitSlidingToolbar",configFields:bW(),partFields:vW(),factory:hne,apis:{setGroups:(h,j,tt)=>{h.setGroups(j,tt)},refresh:(h,j)=>{h.refresh(j)},toggle:(h,j)=>{h.toggle(j)},isOpen:(h,j)=>h.isOpen(j)}}),xW=h=>{const j=h.title.fold(()=>({}),tt=>({attributes:{title:tt}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...j},components:[mM.parts.items({})],items:h.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:gr([op.config({}),Ds.config({})])}},tN=h=>mM.sketch(xW(h)),wW=(h,j)=>{const tt=ep(st=>{const ut=On(h.initGroups,tN);H_.setGroups(st,ut)});return gr([o1.toolbarButton(()=>h.providers.checkUiComponentContext("any").shouldDisable),Wp(()=>h.providers.checkUiComponentContext("any")),ys.config({mode:j,onEscape:h.onEscape,selector:".tox-toolbar__group"}),Ws("toolbar-events",[tt])])},CW=h=>{const j=h.cyclicKeying?"cyclic":"acyclic";return{uid:h.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":xW({title:It.none(),items:[]}),"overflow-button":yV({context:"any",name:"more",icon:It.some("more-drawer"),enabled:!0,tooltip:It.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:It.none(),borderless:!1},It.none(),h.providers,[],"overflow-button")},splitToolbarBehaviours:wW(h,j)}},pne=h=>{const j=CW(h),tt=4,st=yW.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return yW.sketch({...j,lazySink:h.getSink,getOverflowBounds:()=>{const ut=h.moreDrawerData.lazyHeader().element,mt=Nv(ut),yt=ry(ut),kt=Nv(yt),Ot=Math.max(yt.dom.scrollHeight,kt.height);return Qu(mt.x+tt,kt.y,mt.width-tt*2,Ot)},parts:{...j.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:h.attributes}}},components:[st],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:ut=>h.onToggled(ut,!0),onClosed:ut=>h.onToggled(ut,!1)})},gne=h=>{const j=eN.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),tt=eN.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),st=CW(h);return eN.sketch({...st,components:[j,tt],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:ut=>{ut.getSystem().broadcastOn([WD()],{type:"opened"}),h.onToggled(ut,!0)},onClosed:ut=>{ut.getSystem().broadcastOn([WD()],{type:"closed"}),h.onToggled(ut,!1)}})},nN=h=>{const j=h.cyclicKeying?"cyclic":"acyclic";return H_.sketch({uid:h.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(h.type===Qv.scrolling?["tox-toolbar--scrolling"]:[])},components:[H_.parts.groups({})],toolbarBehaviours:wW(h,j)})},kW=[J2,n1,_g("tooltip"),wm("buttonType","secondary",["primary","secondary"]),em("borderless",!1),_y("onAction"),Rp("context","mode:design")],mne=[...kW,X2,Jm("type",["button"])],yne=[...kW,em("active",!1),Jm("type",["togglebutton"])],E9={button:mne,togglebutton:yne},bne=[Jm("type",["group"]),x_("buttons",[],Sp("type",E9))],vne=Sp("type",{...E9,group:bne}),A9=vs([x_("buttons",[],vne),_y("onShow"),_y("onHide")]),_ne=h=>cp("view",A9,h),oN=(h,j)=>{var tt,st;const ut=h.type==="togglebutton",mt=h.icon.map(yo=>nC(yo,j.icons)).map(nu),kt=yo=>{const zo=Ko=>{mt.map(Vr=>Vr.getOpt(yo).each(Dr=>{Gs.set(Dr,[nC(Ko,j.icons)])}))},$o=Ko=>{const Vr=yo.element;Ko?(Vp(Vr,"tox-button--enabled"),Vo(Vr,"aria-pressed",!0)):(bu(Vr,"tox-button--enabled"),Kt(Vr,"aria-pressed"))},Cr=()=>X0(yo.element,"tox-button--enabled"),Ur=()=>mv(yo.element);if(ut)return h.onAction({setIcon:zo,setActive:$o,isActive:Cr,focus:Ur});if(h.type==="button")return h.onAction({setIcon:zo})},Ot={...h,name:ut?h.text.getOr(h.icon.getOr("")):(tt=h.text)!==null&&tt!==void 0?tt:h.icon.getOr(""),primary:h.buttonType==="primary",buttonType:It.from(h.buttonType),tooltip:h.tooltip,icon:h.icon,enabled:!0,borderless:h.borderless},zt=G7((st=h.buttonType)!==null&&st!==void 0?st:"secondary"),Gt=ut?h.text.map(j.translate):It.some(j.translate(h.text)),Wt=Gt.map(mp),sn=Ot.tooltip.or(Gt).map(yo=>({"aria-label":j.translate(yo)})).getOr({}),cn=mt.map(yo=>yo.asSpec()),xn=SS([cn,Wt]),Mn=h.icon.isSome()&&Wt.isSome(),vo={tag:"button",classes:zt.concat(...h.icon.isSome()&&!Mn?["tox-button--icon"]:[]).concat(...Mn?["tox-button--icon-and-text"]:[]).concat(...h.borderless?["tox-button--naked"]:[]).concat(...h.type==="togglebutton"&&h.active?["tox-button--enabled"]:[]),attributes:sn},jn=[],po=DD(Ot,It.some(kt),jn,vo,xn,h.tooltip,j);return Sm.sketch(po)},SW=(h,j)=>oN(h,j),EW=(h,j)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:On(h.buttons,tt=>SW(tt,j))}),AW=_i().deviceType,xne=AW.isPhone(),eae=AW.isTablet(),wne=h=>{let j=!1;const tt=On(h.buttons,st=>st.type==="group"?(j=!0,EW(st,h.providers)):SW(st,h.providers));return{uid:h.uid,dom:{tag:"div",classes:[j?"tox-view__toolbar":"tox-view__header",...xne||eae?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:gr([Ds.config({}),ys.config({mode:"flow",selector:"button, .tox-button",focusInside:Sw.OnEnterOrSpaceMode})]),components:j?tt:[Tx.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Tx.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:tt})]}},Cne=h=>({uid:h.uid,behaviours:gr([Ds.config({}),op.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),T9=(h,j,tt,st)=>{const ut={getPane:mt=>jm.getPart(mt,h,"pane"),getOnShow:mt=>h.viewConfig.onShow,getOnHide:mt=>h.viewConfig.onHide};return{uid:h.uid,dom:h.dom,components:j,behaviours:gr([Ds.config({}),ys.config({mode:"cyclic",focusInside:Sw.OnEnterOrSpaceMode})]),apis:ut}};var WI=d0({name:"silver.View",configFields:[Jo("viewConfig")],partFields:[Zy({factory:{sketch:wne},schema:[Jo("buttons"),Jo("providers")],name:"header"}),Zy({factory:{sketch:Cne},schema:[],name:"pane"})],factory:T9,apis:{getPane:(h,j)=>h.getPane(j),getOnShow:(h,j)=>h.getOnShow(j),getOnHide:(h,j)=>h.getOnHide(j)}});const rN=(h,j,tt)=>_l(j,(st,ut)=>{const mt=dr(_ne(st));return h.slot(ut,WI.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:mt,components:[...mt.buttons.length>0?[WI.parts.header({buttons:mt.buttons,providers:tt})]:[],WI.parts.pane({})]}))}),TW=(h,j)=>ny.sketch(tt=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:rN(tt,h,j),slotBehaviours:CI.unnamedEvents([ep(st=>ny.hideAllSlots(st))])})),I9=h=>mn(ny.getSlotNames(h),j=>ny.isShowing(h,j)),R9=h=>{const j=h.element;Xo(j,"display","none"),Vo(j,"aria-hidden","true")},kne=h=>{const j=h.element;Bs(j,"display"),Kt(j,"aria-hidden")},IW=h=>({getContainer:Nt(h)}),AA=(h,j,tt)=>{ny.getSlot(h,j).each(st=>{WI.getPane(st).each(ut=>{tt(st)(IW(ut.element.dom))})})},RW=(h,j)=>AA(h,j,WI.getOnShow),Sne=(h,j)=>AA(h,j,WI.getOnHide);var sN=Ty({factory:(h,j)=>{const mt={setViews:(yt,kt)=>{Gs.set(yt,[TW(kt,j.backstage.shared.providers)])},whichView:yt=>Ll.getCurrent(yt).bind(I9),toggleView:(yt,kt,Ot,zt)=>Ll.getCurrent(yt).exists(Gt=>{const Wt=I9(Gt),sn=Wt.exists(xn=>zt===xn),cn=ny.getSlot(Gt,zt).isSome();return cn&&(ny.hideAllSlots(Gt),sn?(R9(yt),kt()):(Ot(),kne(yt),ny.showSlot(Gt,zt),RW(Gt,zt)),Wt.each(xn=>Sne(Gt,xn))),cn})};return{uid:h.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:gr([Gs.config({}),Ll.config({find:yt=>{const kt=Gs.contents(yt);return bo(kt)}})]),apis:mt}},name:"silver.ViewWrapper",configFields:[Jo("backstage")],apis:{setViews:(h,j,tt)=>h.setViews(j,tt),toggleView:(h,j,tt,st,ut)=>h.toggleView(j,tt,st,ut),whichView:(h,j)=>h.whichView(j)}});const M9=(h,j,tt)=>{let st=!1;const ut=yt=>{AL(yt,".tox-statusbar").each(kt=>{ru(kt,"display")==="none"&&Kr(kt,"aria-hidden")==="true"?(Bs(kt,"display"),Kt(kt,"aria-hidden")):(Xo(kt,"display","none"),Vo(kt,"aria-hidden","true"))})},mt={getSocket:yt=>jm.getPart(yt,h,"socket"),setSidebar:(yt,kt,Ot)=>{jm.getPart(yt,h,"sidebar").each(zt=>m9(zt,kt,Ot))},toggleSidebar:(yt,kt)=>{jm.getPart(yt,h,"sidebar").each(Ot=>Zte(Ot,kt))},whichSidebar:yt=>jm.getPart(yt,h,"sidebar").bind(Kte).getOrNull(),getHeader:yt=>jm.getPart(yt,h,"header"),getToolbar:yt=>jm.getPart(yt,h,"toolbar"),setToolbar:(yt,kt)=>{jm.getPart(yt,h,"toolbar").each(Ot=>{const zt=On(kt,tN);Ot.getApis().setGroups(Ot,zt)})},setToolbars:(yt,kt)=>{jm.getPart(yt,h,"multiple-toolbar").each(Ot=>{const zt=On(kt,Gt=>On(Gt,tN));YV.setItems(Ot,zt)})},refreshToolbar:yt=>{jm.getPart(yt,h,"toolbar").each(Ot=>Ot.getApis().refresh(Ot))},toggleToolbarDrawer:yt=>{jm.getPart(yt,h,"toolbar").each(kt=>{ba(kt.getApis().toggle,Ot=>Ot(kt))})},toggleToolbarDrawerWithoutFocusing:yt=>{jm.getPart(yt,h,"toolbar").each(kt=>{ba(kt.getApis().toggleWithoutFocusing,Ot=>Ot(kt))})},isToolbarDrawerToggled:yt=>jm.getPart(yt,h,"toolbar").bind(kt=>It.from(kt.getApis().isOpen).map(Ot=>Ot(kt))).getOr(!1),getThrobber:yt=>jm.getPart(yt,h,"throbber"),focusToolbar:yt=>{jm.getPart(yt,h,"toolbar").orThunk(()=>jm.getPart(yt,h,"multiple-toolbar")).each(Ot=>{ys.focusIn(Ot)})},setMenubar:(yt,kt)=>{jm.getPart(yt,h,"menubar").each(Ot=>{h9.setMenus(Ot,kt)})},focusMenubar:yt=>{jm.getPart(yt,h,"menubar").each(kt=>{h9.focus(kt)})},setViews:(yt,kt)=>{jm.getPart(yt,h,"viewWrapper").each(Ot=>{sN.setViews(Ot,kt)})},toggleView:(yt,kt)=>jm.getPart(yt,h,"viewWrapper").exists(Ot=>sN.toggleView(Ot,()=>mt.showMainView(yt),()=>mt.hideMainView(yt),kt)),whichView:yt=>jm.getPart(yt,h,"viewWrapper").bind(sN.whichView).getOrNull(),hideMainView:yt=>{st=mt.isToolbarDrawerToggled(yt),st&&mt.toggleToolbarDrawer(yt),jm.getPart(yt,h,"editorContainer").each(kt=>{const Ot=kt.element;ut(Ot),Xo(Ot,"display","none"),Vo(Ot,"aria-hidden","true")})},showMainView:yt=>{st&&mt.toggleToolbarDrawer(yt),jm.getPart(yt,h,"editorContainer").each(kt=>{const Ot=kt.element;ut(Ot),Bs(Ot,"display"),Kt(Ot,"aria-hidden")})}};return{uid:h.uid,dom:h.dom,components:j,apis:mt,behaviours:h.behaviours}},Ene=t_.optional({factory:h9,name:"menubar",schema:[Jo("backstage")]}),Ane=h=>h.type===Qv.sliding?gne:h.type===Qv.floating?pne:nN,MW=t_.optional({factory:{sketch:h=>YV.sketch({uid:h.uid,dom:h.dom,listBehaviours:gr([ys.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>nN({type:h.type,uid:Wr("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:h.providers,onEscape:()=>(h.onEscape(),It.some(!0))}),setupItem:(j,tt,st,ut)=>{H_.setGroups(tt,st)},shell:!0})},name:"multiple-toolbar",schema:[Jo("dom"),Jo("onEscape")]}),PW=t_.optional({factory:{sketch:h=>{const j=Ane(h),tt={type:h.type,uid:h.uid,onEscape:()=>(h.onEscape(),It.some(!0)),onToggled:(st,ut)=>h.onToolbarToggled(ut),cyclicKeying:!1,initGroups:[],getSink:h.getSink,providers:h.providers,moreDrawerData:{lazyToolbar:h.lazyToolbar,lazyMoreButton:h.lazyMoreButton,lazyHeader:h.lazyHeader},attributes:h.attributes};return j(tt)}},name:"toolbar",schema:[Jo("dom"),Jo("onEscape"),Jo("getSink")]}),iN=t_.optional({factory:{sketch:zte},name:"header",schema:[Jo("dom")]}),P9=t_.optional({factory:{sketch:sW},name:"promotion",schema:[Jo("dom")]}),Tne=t_.optional({name:"socket",schema:[Jo("dom")]}),Ine=t_.optional({factory:{sketch:Zie},name:"sidebar",schema:[Jo("dom")]}),OW=t_.optional({factory:{sketch:nne},name:"throbber",schema:[Jo("dom")]}),Rne=t_.optional({factory:sN,name:"viewWrapper",schema:[Jo("backstage")]}),Mne=h=>({uid:h.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:h.components}),Pne=t_.optional({factory:{sketch:Mne},name:"editorContainer",schema:[]});var Gu=d0({name:"OuterContainer",factory:M9,configFields:[Jo("dom"),Jo("behaviours")],partFields:[iN,Ene,PW,MW,Tne,Ine,P9,OW,Rne,Pne],apis:{getSocket:(h,j)=>h.getSocket(j),setSidebar:(h,j,tt,st)=>{h.setSidebar(j,tt,st)},toggleSidebar:(h,j,tt)=>{h.toggleSidebar(j,tt)},whichSidebar:(h,j)=>h.whichSidebar(j),getHeader:(h,j)=>h.getHeader(j),getToolbar:(h,j)=>h.getToolbar(j),setToolbar:(h,j,tt)=>{h.setToolbar(j,tt)},setToolbars:(h,j,tt)=>{h.setToolbars(j,tt)},refreshToolbar:(h,j)=>h.refreshToolbar(j),toggleToolbarDrawer:(h,j)=>{h.toggleToolbarDrawer(j)},toggleToolbarDrawerWithoutFocusing:(h,j)=>{h.toggleToolbarDrawerWithoutFocusing(j)},isToolbarDrawerToggled:(h,j)=>h.isToolbarDrawerToggled(j),getThrobber:(h,j)=>h.getThrobber(j),setMenubar:(h,j,tt)=>{h.setMenubar(j,tt)},focusMenubar:(h,j)=>{h.focusMenubar(j)},focusToolbar:(h,j)=>{h.focusToolbar(j)},setViews:(h,j,tt)=>{h.setViews(j,tt)},toggleView:(h,j,tt)=>h.toggleView(j,tt),whichView:(h,j)=>h.whichView(j)}});const One="file edit view insert format tools table help",DW={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},O9=(h,j,tt)=>{const st=k$(tt).split(/[ ,]/);return{text:h.title,getItems:()=>rn(h.items,ut=>{const mt=ut.toLowerCase();return mt.trim().length===0?[]:er(st,yt=>yt===mt)?[]:mt==="separator"||mt==="|"?[{type:"separator"}]:j.menuItems[mt]?[j.menuItems[mt]]:[]})}},D9=h=>h.split(" "),NW=(h,j)=>{const tt={...DW,...j.menus},st=Oo(j.menus).length>0,ut=j.menubar===void 0||j.menubar===!0?D9(One):D9(j.menubar===!1?"":j.menubar),mt=lo(ut,kt=>{const Ot=Ms(DW,kt);return st?Ot||tr(j.menus,kt).exists(zt=>Ms(zt,"items")):Ot}),yt=On(mt,kt=>{const Ot=tt[kt];return O9({title:Ot.title,items:D9(Ot.items)},j,h)});return lo(yt,kt=>{const Ot=zt=>_e(zt)||zt.type!=="separator";return kt.getItems().length>0&&er(kt.getItems(),Ot)})},LW=h=>{const j=()=>{h._skinLoaded=!0,KG(h)};return()=>{h.initialized?j():h.on("init",j)}},Dne=(h,j)=>()=>uX(h,{message:j}),N9=(h,j,tt)=>(h.on("remove",()=>tt.unload(j)),tt.load(j)),L9=(h,j,tt,st)=>(h.on("remove",()=>st.unloadRawCss(j)),st.loadRawCss(j,tt)),FW=async(h,j)=>{const st="ui/"+uO(h).getOr("default")+"/skin.css",ut=tinymce.Resource.get(st);if(_e(ut))L9(h,st,ut,h.ui.styleSheetLoader);else{const mt=h.editorManager.suffix,yt=j+`/skin${mt}.css`;return N9(h,yt,h.ui.styleSheetLoader)}},Nne=async(h,j)=>{if(Lp(ro.fromDom(h.getElement()))){const ut="ui/"+uO(h).getOr("default")+"/skin.shadowdom.css",mt=tinymce.Resource.get(ut);if(_e(mt))L9(h,ut,mt,pS.DOM.styleSheetLoader);else{const yt=h.editorManager.suffix,kt=j+`/skin.shadowdom${yt}.css`;return N9(h,kt,pS.DOM.styleSheetLoader)}}},Lne=async(h,j)=>{const tt=()=>{const ut=y6(j),mt=j.editorManager.suffix;ut&&j.contentCSS.push(ut+(h?"/content.inline":"/content")+`${mt}.css`)};uO(j).fold(tt,ut=>{const mt="ui/"+ut+(h?"/content.inline":"/content")+".css",yt=tinymce.Resource.get(mt);_e(yt)?L9(j,mt,yt,j.ui.styleSheetLoader):tt()});const st=y6(j);if(!m6(j)&&_e(st))return Promise.all([FW(j,st),Nne(j,st)]).then()},zW=(h,j)=>Lne(h,j).then(LW(j),Dne(j,"Skin could not be loaded")),BW=Pn(zW,!1),Fne=Pn(zW,!0),qI=(h,j,tt)=>Bn(tt)?h.translate(j):h.translate([j,h.translate(tt)]),zne=(h,j)=>{const tt=(yt,kt,Ot,zt)=>{const Gt=h.shared.providers.translate(yt.title);if(yt.type==="separator")return It.some({type:"separator",text:Gt});if(yt.type==="submenu"){const Wt=rn(yt.getStyleItems(),sn=>st(sn,kt,zt));return kt===0&&Wt.length<=0?It.none():It.some({type:"nestedmenuitem",text:Gt,enabled:Wt.length>0,getSubmenuItems:()=>rn(yt.getStyleItems(),sn=>st(sn,kt,zt))})}else return It.some({type:"togglemenuitem",text:Gt,icon:yt.icon,active:yt.isSelected(zt),enabled:!Ot,onAction:j.onAction(yt),...yt.getStylePreview().fold(()=>({}),Wt=>({meta:{style:Wt}}))})},st=(yt,kt,Ot)=>{const zt=yt.type==="formatter"&&j.isInvalid(yt);return kt===0?zt?[]:tt(yt,kt,!1,Ot).toArray():tt(yt,kt,zt,Ot).toArray()},ut=yt=>{const kt=j.getCurrentValue(),Ot=j.shouldHide?0:1;return rn(yt,zt=>st(zt,Ot,kt))};return{validateItems:ut,getFetch:(yt,kt)=>(Ot,zt)=>{const Gt=kt(),Wt=ut(Gt),sn=zI(Wt,z_.CLOSE_ON_EXECUTE,yt,{isHorizontalMenu:!1,search:It.none()});zt(sn)}}},DS=(h,j)=>{const tt=j.dataset,st=tt.type==="basic"?()=>On(tt.data,ut=>LV(ut,j.isSelectedFor,j.getPreviewFor)):tt.getData;return{items:zne(h,j),getStyleItems:st}},TA=(h,j,tt,st,ut,mt)=>{const{items:yt,getStyleItems:kt}=DS(j,tt),Ot=ls(tt.tooltip),zt=Wt=>({getComponent:Nt(Wt),setTooltip:sn=>{const cn=j.shared.providers.translate(sn);Vo(Wt.element,"aria-label",cn),Ot.set(sn)}}),Gt=Wt=>{const sn=cn=>Wt.setTooltip(qI(h,st(cn.value),cn.value));return h.on(ut,sn),qO(fA(h,"NodeChange",cn=>{const xn=cn.getComponent();tt.updateText(xn),Rs.set(cn.getComponent(),!h.selection.isEditable())})(Wt),()=>h.off(ut,sn))};return SD({context:"mode:design",text:tt.icon.isSome()?It.none():tt.text,icon:tt.icon,ariaLabel:It.some(tt.tooltip),tooltip:It.none(),role:It.none(),fetch:yt.getFetch(j,kt),onSetup:Gt,getApi:zt,columns:1,presets:"normal",classes:tt.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Mp.config({...j.shared.providers.tooltips.getConfig({tooltipText:j.shared.providers.translate(tt.tooltip),onShow:Wt=>{if(tt.tooltip!==Ot.get()){const sn=j.shared.providers.translate(Ot.get());Mp.setComponents(Wt,j.shared.providers.tooltips.getComponents({tooltipText:sn}))}}})})]},"tox-tbtn",j.shared,mt)},Bne=h=>On(h,j=>{let tt=j,st=j;const ut=j.split("=");return ut.length>1&&(tt=ut[0],st=ut[1]),{title:tt,format:st}}),$ne=h=>({type:"basic",data:h});var ZI;(function(h){h[h.SemiColon=0]="SemiColon",h[h.Space=1]="Space"})(ZI||(ZI={}));const Gne=(h,j)=>j===ZI.SemiColon?h.replace(/;$/,"").split(";"):h.split(" "),F9=(h,j,tt)=>{const st=h.options.get(j);return{type:"basic",data:Bne(Gne(st,tt))}},jne="Align",$W=Nt("Alignment {0}"),GW="left",z9=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],B9=h=>{const j=()=>mn(z9,kt=>h.formatter.match(kt.format)),tt=kt=>()=>h.formatter.match(kt),st=kt=>It.none,ut=kt=>{const zt=j().fold(Nt(GW),Gt=>Gt.title.toLowerCase());rs(kt,MS,{icon:`align-${zt}`}),gX(h,{value:zt})},mt=$ne(z9),yt=kt=>()=>mn(z9,Ot=>Ot.format===kt.format).each(Ot=>h.execCommand(Ot.command));return{tooltip:qI(h,$W(),GW),text:It.none(),icon:It.some("align-left"),isSelectedFor:tt,getCurrentValue:It.none,getPreviewFor:st,onAction:yt,updateText:ut,dataset:mt,shouldHide:!1,isInvalid:kt=>!h.formatter.canApply(kt.format)}},aN=(h,j)=>TA(h,j,B9(h),$W,"AlignTextUpdate","align"),$9=(h,j)=>{const tt=DS(j,B9(h));h.ui.registry.addNestedMenuItem("align",{text:j.shared.providers.translate(jne),onSetup:ty(h),getSubmenuItems:()=>tt.items.validateItems(tt.getStyleItems())})},G9=(h,j)=>{const tt=j(),st=On(tt,ut=>ut.format);return It.from(h.formatter.closest(st)).bind(ut=>mn(tt,mt=>mt.format===ut))},NS="Blocks",j9=Nt("Block {0}"),U9="Paragraph",jW=h=>{const j=mt=>()=>h.formatter.match(mt),tt=mt=>()=>{const yt=h.formatter.get(mt);return yt?It.some({tag:yt.length>0&&(yt[0].inline||yt[0].block)||"div",styles:h.dom.parseStyle(h.formatter.getCssText(mt))}):It.none()},st=mt=>{const kt=G9(h,()=>ut.data).fold(Nt(U9),Ot=>Ot.title);rs(mt,J1,{text:kt}),bX(h,{value:kt})},ut=F9(h,"block_formats",ZI.SemiColon);return{tooltip:qI(h,j9(),U9),text:It.some(U9),icon:It.none(),isSelectedFor:j,getCurrentValue:It.none,getPreviewFor:tt,onAction:_j(h),updateText:st,dataset:ut,shouldHide:!1,isInvalid:mt=>!h.formatter.canApply(mt.format)}},Une=(h,j)=>TA(h,j,jW(h),j9,"BlocksTextUpdate","blocks"),Hne=(h,j)=>{const tt=DS(j,jW(h));h.ui.registry.addNestedMenuItem("blocks",{text:NS,onSetup:ty(h),getSubmenuItems:()=>tt.items.validateItems(tt.getStyleItems())})},Vne="Fonts",UW=Nt("Font {0}"),H9="System Font",HW=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],VW=h=>{const j=h.split(/\s*,\s*/);return On(j,tt=>tt.replace(/^['"]+|['"]+$/g,""))},WW=(h,j)=>j.length>0&&Cn(j,tt=>h.indexOf(tt.toLowerCase())>-1),V9=(h,j)=>{if(h.indexOf("-apple-system")===0||j.length>0){const tt=VW(h.toLowerCase());return WW(tt,HW)||WW(tt,j)}else return!1},qW=h=>{const j=()=>{const Ot=xn=>xn?VW(xn)[0]:"",zt=h.queryCommandValue("FontName"),Gt=kt.data,Wt=zt?zt.toLowerCase():"",sn=sR(h);return{matchOpt:mn(Gt,xn=>{const Mn=xn.format;return Mn.toLowerCase()===Wt||Ot(Mn).toLowerCase()===Ot(Wt).toLowerCase()}).orThunk(()=>Jr(V9(Wt,sn),{title:H9,format:Wt})),font:zt}},tt=Ot=>zt=>zt.exists(Gt=>Gt.format===Ot),st=()=>{const{matchOpt:Ot}=j();return Ot},ut=Ot=>()=>It.some({tag:"div",styles:Ot.indexOf("dings")===-1?{"font-family":Ot}:{}}),mt=Ot=>()=>{h.undoManager.transact(()=>{h.focus(),h.execCommand("FontName",!1,Ot.format)})},yt=Ot=>{const{matchOpt:zt,font:Gt}=j(),Wt=zt.fold(Nt(Gt),sn=>sn.title);rs(Ot,J1,{text:Wt}),vF(h,{value:Wt})},kt=F9(h,"font_family_formats",ZI.SemiColon);return{tooltip:qI(h,UW(),H9),text:It.some(H9),icon:It.none(),isSelectedFor:tt,getCurrentValue:st,getPreviewFor:ut,onAction:mt,updateText:yt,dataset:kt,shouldHide:!1,isInvalid:hn}},Wne=(h,j)=>TA(h,j,qW(h),UW,"FontFamilyTextUpdate","fontfamily"),qne=(h,j)=>{const tt=DS(j,qW(h));h.ui.registry.addNestedMenuItem("fontfamily",{text:j.shared.providers.translate(Vne),onSetup:ty(h),getSubmenuItems:()=>tt.items.validateItems(tt.getStyleItems())})},Zne={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Kne=(()=>{const h="[0-9]+",tt="[eE]"+("[+-]?"+h),st="\\.",ut=kt=>`(?:${kt})?`,yt=`[+-]?(?:${["Infinity",h+st+ut(h)+ut(tt),st+h+ut(tt),h+ut(tt)].join("|")})`;return new RegExp(`^(${yt})(.*)$`)})(),Yne=(h,j)=>er(j,tt=>er(Zne[tt],st=>h===st)),yM=(h,j)=>It.from(Kne.exec(h)).bind(st=>{const ut=Number(st[1]),mt=st[2];return Yne(mt,j)?It.some({value:ut,unit:mt}):It.none()}),ZW=(h,j)=>yM(h,j).map(({value:tt,unit:st})=>tt+st),W9={tab:Nt(9),escape:Nt(27),enter:Nt(13),backspace:Nt(8),delete:Nt(46),left:Nt(37),up:Nt(38),right:Nt(39),down:Nt(40),space:Nt(32),home:Nt(36),end:Nt(35),pageUp:Nt(33),pageDown:Nt(34)},Xne=(h,j,tt,st)=>{let ut=It.none();const mt=yo=>yo.map(zo=>zr.getValue(zo)).getOr(""),yt=fA(h,"NodeChange SwitchMode",yo=>{const zo=yo.getComponent();ut=It.some(zo),tt.updateInputValue(zo),Rs.set(zo,!h.selection.isEditable())}),kt=yo=>({getComponent:Nt(yo)}),Ot=ls(Et),zt=Wr("custom-number-input-events"),Gt=(yo,zo,$o)=>{const Cr=mt(ut),Ur=tt.getNewValue(Cr,yo),Ko=Cr.length-`${Ur}`.length,Vr=ut.map(Xr=>Xr.element.dom.selectionStart-Ko),Dr=ut.map(Xr=>Xr.element.dom.selectionEnd-Ko);tt.onAction(Ur,$o),ut.each(Xr=>{zr.setValue(Xr,Ur),zo&&(Vr.each(Il=>Xr.element.dom.selectionStart=Il),Dr.each(Il=>Xr.element.dom.selectionEnd=Il))})},Wt=(yo,zo)=>Gt(($o,Cr)=>$o-Cr,yo,zo),sn=(yo,zo)=>Gt(($o,Cr)=>$o+Cr,yo,zo),cn=yo=>Tm(yo.element).fold(It.none,zo=>(mv(zo),It.some(!0))),xn=yo=>T2(yo.element)?(sy(yo.element).each(zo=>mv(zo)),It.some(!0)):It.none(),Mn=(yo,zo,$o,Cr)=>{const Ur=ls(Et),Ko=j.shared.providers.translate($o),Vr=Wr("altExecuting"),Dr=fA(h,"NodeChange SwitchMode",Il=>{Rs.set(Il.getComponent(),!h.selection.isEditable())}),Xr=Il=>{Rs.isDisabled(Il)||yo(!0)};return Sm.sketch({dom:{tag:"button",attributes:{"aria-label":Ko,"data-mce-name":zo},classes:Cr.concat(zo)},components:[k7(zo,j.shared.providers.icons)],buttonBehaviours:gr([Rs.config({}),Mp.config(j.shared.providers.tooltips.getConfig({tooltipText:Ko})),Ws(Vr,[CS({onSetup:Dr,getApi:kt},Ur),kS({getApi:kt},Ur),Qo(dv(),(Il,Ju)=>{(Ju.event.raw.keyCode===W9.space()||Ju.event.raw.keyCode===W9.enter())&&(Rs.isDisabled(Il)||yo(!1))}),Qo(r2(),Xr),Qo(Gl(),Xr)])]),eventOrder:{[dv()]:[Vr,"keying"],[r2()]:[Vr,"alloy.base.behaviour"],[Gl()]:[Vr,"alloy.base.behaviour"],[fy()]:["alloy.base.behaviour",Vr,"tooltipping"],[Gy()]:[Vr,"tooltipping"]}})},vo=nu(Mn(yo=>Wt(!1,yo),"minus","Decrease font size",[])),jn=nu(Mn(yo=>sn(!1,yo),"plus","Increase font size",[])),po=nu({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[kx.sketch({inputBehaviours:gr([Rs.config({}),Ws(zt,[CS({onSetup:yt,getApi:kt},Ot),kS({getApi:kt},Ot)]),Ws("input-update-display-text",[Qo(J1,(yo,zo)=>{zr.setValue(yo,zo.event.text)}),Qo(NM(),yo=>{tt.onAction(zr.getValue(yo))}),Qo(k_(),yo=>{tt.onAction(zr.getValue(yo))})]),ys.config({mode:"special",onEnter:yo=>(Gt(Jt,!0,!0),It.some(!0)),onEscape:cn,onUp:yo=>(sn(!0,!1),It.some(!0)),onDown:yo=>(Wt(!0,!1),It.some(!0)),onLeft:(yo,zo)=>(zo.cut(),It.none()),onRight:(yo,zo)=>(zo.cut(),It.none())})])})],behaviours:gr([Ds.config({}),ys.config({mode:"special",onEnter:xn,onSpace:xn,onEscape:cn}),Ws("input-wrapper-events",[Qo(Z0(),yo=>{_o([vo,jn],zo=>{const $o=ro.fromDom(zo.get(yo).element.dom);T2($o)&&VC($o)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...wt(st)?{"data-mce-name":st}:{}}},components:[vo.asSpec(),po.asSpec(),jn.asSpec()],behaviours:gr([Ds.config({}),ys.config({mode:"flow",focusInside:Sw.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:yo=>T2(yo.element)?It.none():(mv(yo.element),It.some(!0))})])}},KW="Font sizes",YW=Nt("Font size {0}"),XW="12pt",Jne={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},JW={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},Qne=(h,j)=>{const tt=Math.pow(10,j);return Math.round(h*tt)/tt},QW=(h,j)=>/[0-9.]+px$/.test(h)?Qne(parseInt(h,10)*72/96,j||0)+"pt":tr(JW,h).getOr(h),eoe=h=>tr(Jne,h).getOr(""),tq=h=>{const j=()=>{let Ot=It.none();const zt=kt.data,Gt=h.queryCommandValue("FontSize");if(Gt)for(let Wt=3;Ot.isNone()&&Wt>=0;Wt--){const sn=QW(Gt,Wt),cn=eoe(sn);Ot=mn(zt,xn=>xn.format===Gt||xn.format===sn||xn.format===cn)}return{matchOpt:Ot,size:Gt}},tt=Ot=>zt=>zt.exists(Gt=>Gt.format===Ot),st=()=>{const{matchOpt:Ot}=j();return Ot},ut=Nt(It.none),mt=Ot=>()=>{h.undoManager.transact(()=>{h.focus(),h.execCommand("FontSize",!1,Ot.format)})},yt=Ot=>{const{matchOpt:zt,size:Gt}=j(),Wt=zt.fold(Nt(Gt),sn=>sn.title);rs(Ot,J1,{text:Wt}),mX(h,{value:Wt})},kt=F9(h,"font_size_formats",ZI.Space);return{tooltip:qI(h,YW(),XW),text:It.some(XW),icon:It.none(),isSelectedFor:tt,getPreviewFor:ut,getCurrentValue:st,onAction:mt,updateText:yt,dataset:kt,shouldHide:!1,isInvalid:hn}},toe=(h,j)=>TA(h,j,tq(h),YW,"FontSizeTextUpdate","fontsize"),noe=h=>{var j;const tt={step:1};return(j={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[h])!==null&&j!==void 0?j:tt},ooe=16,roe=h=>h>=0,soe=h=>{const j=()=>h.queryCommandValue("FontSize");return{updateInputValue:st=>rs(st,J1,{text:j()}),onAction:(st,ut)=>h.execCommand("FontSize",!1,st,{skip_focus:!ut}),getNewValue:(st,ut)=>{yM(st,["unsupportedLength","empty"]);const mt=j(),yt=yM(st,["unsupportedLength","empty"]).or(yM(mt,["unsupportedLength","empty"])),kt=yt.map(sn=>sn.value).getOr(ooe),Ot=T$(h),zt=yt.map(sn=>sn.unit).filter(sn=>sn!=="").getOr(Ot),Gt=ut(kt,noe(zt).step),Wt=`${roe(Gt)?Gt:kt}${zt}`;return Wt!==mt&&yX(h,{value:Wt}),Wt}}},nq=(h,j)=>Xne(h,j,soe(h),"fontsizeinput"),ioe=(h,j)=>{const tt=DS(j,tq(h));h.ui.registry.addNestedMenuItem("fontsize",{text:KW,onSetup:ty(h),getSubmenuItems:()=>tt.items.validateItems(tt.getStyleItems())})},aoe="Formats",oq=h=>Bn(h)?"Formats":"Format {0}",rq=(h,j)=>{const tt="Formats",st=yt=>()=>h.formatter.match(yt),ut=yt=>()=>{const kt=h.formatter.get(yt);return kt!==void 0?It.some({tag:kt.length>0&&(kt[0].inline||kt[0].block)||"div",styles:h.dom.parseStyle(h.formatter.getCssText(yt))}):It.none()},mt=yt=>{const kt=Wt=>zD(Wt)?rn(Wt.items,kt):n9(Wt)?[{title:Wt.title,format:Wt.format}]:[],Ot=rn(NV(h),kt),Gt=G9(h,Nt(Ot)).fold(Nt({title:tt,tooltipLabel:""}),Wt=>({title:Wt.title,tooltipLabel:Wt.title}));rs(yt,J1,{text:Gt.title}),pX(h,{value:Gt.tooltipLabel})};return{tooltip:qI(h,oq(""),""),text:It.some(tt),icon:It.none(),isSelectedFor:st,getCurrentValue:It.none,getPreviewFor:ut,onAction:_j(h),updateText:mt,shouldHide:w$(h),isInvalid:yt=>!h.formatter.canApply(yt.format),dataset:j}},loe=(h,j)=>{const tt={type:"advanced",...j.styles};return TA(h,j,rq(h,tt),oq,"StylesTextUpdate","styles")},coe=(h,j)=>{const tt={type:"advanced",...j.styles},st=DS(j,rq(h,tt));h.ui.registry.addNestedMenuItem("styles",{text:aoe,onSetup:ty(h),getSubmenuItems:()=>st.items.validateItems(st.getStyleItems())})},uoe=Nt([Jo("toggleClass"),Jo("fetch"),b2("onExecute"),ko("getHotspot",It.some),ko("getAnchorOverrides",Nt({})),pw(),b2("onItemExecute"),Kl("lazySink"),Jo("dom"),zl("onOpen"),Bm("splitDropdownBehaviours",[$p,ys,Ds]),ko("matchWidth",!1),ko("useMinWidth",!1),ko("eventOrder",{}),Kl("role"),Kl("listRole")].concat(QO())),sq=x0({factory:Sm,schema:[Jo("dom")],name:"arrow",defaults:()=>({buttonBehaviours:gr([Ds.revoke()])}),overrides:h=>({dom:{tag:"span",attributes:{role:"presentation"}},action:j=>{j.getSystem().getByUid(h.uid).each(Qx)},buttonBehaviours:gr([na.config({toggleOnExecute:!1,toggleClass:h.toggleClass})])})}),doe=x0({factory:Sm,schema:[Jo("dom")],name:"button",defaults:()=>({buttonBehaviours:gr([Ds.revoke()])}),overrides:h=>({dom:{tag:"span",attributes:{role:"presentation"}},action:j=>{j.getSystem().getByUid(h.uid).each(tt=>{h.onExecute(tt,j)})}})}),foe=Nt([sq,doe,Zy({factory:{sketch:h=>({uid:h.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:h.text}})},schema:[Jo("text")],name:"aria-descriptor"}),_v({schema:[I_()],name:"menu",defaults:h=>({onExecute:(j,tt)=>{j.getSystem().getByUid(h.uid).each(st=>{h.onItemExecute(st,j,tt)})}})}),SU()]),iq=(h,j,tt,st)=>{const ut=Gt=>{Ll.getCurrent(Gt).each(Wt=>{kr.highlightFirst(Wt),ys.focusIn(Wt)})},mt=Gt=>{TF(h,Jt,Gt,st,ut,Ry.HighlightMenuAndItem).get(Et)},yt=Gt=>(mt(Gt),It.some(!0)),kt=Gt=>{const Wt=Br(Gt,h,"button");return Qx(Wt),It.some(!0)},Ot={...yu([ep((Gt,Wt)=>{Du(Gt,h,"aria-descriptor").each(cn=>{const xn=Wr("aria");Vo(cn.element,"id",xn),Vo(Gt.element,"aria-describedby",xn)})})]),...nR(It.some(mt))},zt={repositionMenus:Gt=>{na.isOn(Gt)&&MF(Gt)}};return{uid:h.uid,dom:h.dom,components:j,apis:zt,eventOrder:{...h.eventOrder,[e0()]:["disabling","toggling","alloy.base.behaviour"]},events:Ot,behaviours:$m(h.splitDropdownBehaviours,[$p.config({others:{sandbox:Gt=>{const Wt=Br(Gt,h,"arrow");return RF(h,Gt,{onOpen:()=>{na.on(Wt),na.on(Gt)},onClose:()=>{na.off(Wt),na.off(Gt)}})}}}),ys.config({mode:"special",onSpace:kt,onEnter:kt,onDown:yt}),Ds.config({}),na.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:h.role.getOr("button"),"aria-haspopup":!0}}}},lN=d0({name:"SplitDropdown",configFields:uoe(),partFields:foe(),factory:iq,apis:{repositionMenus:(h,j)=>h.repositionMenus(j)}}),q9=h=>({isEnabled:()=>!Rs.isDisabled(h),setEnabled:j=>Rs.set(h,!j),setText:j=>rs(h,J1,{text:j}),setIcon:j=>rs(h,MS,{icon:j})}),aq=h=>({setActive:j=>{na.set(h,j)},isActive:()=>na.isOn(h),isEnabled:()=>!Rs.isDisabled(h),setEnabled:j=>Rs.set(h,!j),setText:j=>rs(h,J1,{text:j}),setIcon:j=>rs(h,MS,{icon:j})}),lq=(h,j)=>h.map(tt=>({"aria-label":j.translate(tt)})).getOr({}),cq=Wr("focus-button"),Z9=(h,j,tt,st,ut,mt,yt)=>{const kt=j.map(zt=>nu(S7(zt,"tox-tbtn",ut))),Ot=h.map(zt=>nu(nC(zt,ut.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(j.isSome()?["tox-tbtn--select"]:[]),attributes:{...lq(tt,ut),...wt(yt)?{"data-mce-name":yt}:{}}},components:SS([Ot.map(zt=>zt.asSpec()),kt.map(zt=>zt.asSpec())]),eventOrder:{[gp()]:["focusing","alloy.base.behaviour",CA],[fy()]:[CA,"toolbar-group-button-events"]},buttonBehaviours:gr([o1.toolbarButton(()=>ut.checkUiComponentContext(mt).shouldDisable),Wp(()=>ut.checkUiComponentContext(mt)),Ws(CA,[ep((zt,Gt)=>kD(zt)),Qo(J1,(zt,Gt)=>{kt.bind(Wt=>Wt.getOpt(zt)).each(Wt=>{Gs.set(Wt,[mp(ut.translate(Gt.event.text))])})}),Qo(MS,(zt,Gt)=>{Ot.bind(Wt=>Wt.getOpt(zt)).each(Wt=>{Gs.set(Wt,[nC(Gt.event.icon,ut.icons)])})}),Qo(gp(),(zt,Gt)=>{Gt.event.prevent(),wl(zt,cq)})])].concat(st.getOr([])))}},KI=(h,j,tt,st,ut)=>{const mt=j.shared,yt=ls(Et),kt={toolbarButtonBehaviours:[],getApi:q9,onSetup:h.onSetup},Ot=[Ws("toolbar-group-button-events",[CS(kt,yt),kS(kt,yt)])];return OS.sketch({lazySink:mt.getSink,fetch:()=>z0.nu(zt=>{zt(On(tt(h.items),tN))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:Z9(h.icon,h.text,h.tooltip,It.some(Ot),mt.providers,h.context,ut),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:st}}}})},uq=(h,j,tt,st)=>{var ut;const mt=ls(Et),yt=Z9(h.icon,h.text,h.tooltip,It.none(),tt,h.context,st);return Sm.sketch({dom:yt.dom,components:yt.components,eventOrder:BH,buttonBehaviours:{...gr([Ws("toolbar-button-events",[zH({onAction:h.onAction,getApi:j.getApi}),CS(j,mt),kS(j,mt)]),...h.tooltip.map(kt=>Mp.config(tt.tooltips.getConfig({tooltipText:tt.translate(kt)+h.shortcut.map(Ot=>` (${iF(Ot)})`).getOr("")}))).toArray(),o1.toolbarButton(()=>!h.enabled||tt.checkUiComponentContext(h.context).shouldDisable),Wp(()=>tt.checkUiComponentContext(h.context))].concat(j.toolbarButtonBehaviours)),[CA]:(ut=yt.buttonBehaviours)===null||ut===void 0?void 0:ut[CA]}})},hoe=(h,j,tt)=>dq(h,j,[],tt),dq=(h,j,tt,st)=>uq(h,{toolbarButtonBehaviours:tt.length>0?[Ws("toolbarButtonWith",tt)]:[],getApi:q9,onSetup:h.onSetup},j,st),poe=(h,j,tt)=>fq(h,j,[],tt),fq=(h,j,tt,st)=>uq(h,{toolbarButtonBehaviours:[Gs.config({}),na.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(tt.length>0?[Ws("toolbarToggleButtonWith",tt)]:[]),getApi:aq,onSetup:h.onSetup},j,st),goe=(h,j,tt)=>st=>z0.nu(ut=>j.fetch(ut)).map(ut=>It.from(EI(Ou(kF(Wr("menu-value"),ut,mt=>{j.onItemAction(h(st),mt)},j.columns,j.presets,z_.CLOSE_ON_EXECUTE,j.select.getOr(hn),tt),{movement:XO(j.columns,j.presets),menuBehaviours:CI.unnamedEvents(j.columns!=="auto"?[]:[ep((mt,yt)=>{rF(mt,4,lG(j.presets)).each(({numRows:kt,numColumns:Ot})=>{ys.setGridSize(mt,kt,Ot)})})])})))),moe=(h,j,tt)=>{const st=ls(h.tooltip.getOr("")),ut=kt=>({isEnabled:()=>!Rs.isDisabled(kt),setEnabled:Ot=>Rs.set(kt,!Ot),setIconFill:(Ot,zt)=>{np(kt.element,`svg path[class="${Ot}"], rect[class="${Ot}"]`).each(Gt=>{Vo(Gt,"fill",zt)})},setActive:Ot=>{Vo(kt.element,"aria-pressed",Ot),np(kt.element,"span").each(zt=>{kt.getSystem().getByDom(zt).each(Gt=>na.set(Gt,Ot))})},isActive:()=>np(kt.element,"span").exists(Ot=>kt.getSystem().getByDom(Ot).exists(na.isOn)),setText:Ot=>np(kt.element,"span").each(zt=>kt.getSystem().getByDom(zt).each(Gt=>rs(Gt,J1,{text:Ot}))),setIcon:Ot=>np(kt.element,"span").each(zt=>kt.getSystem().getByDom(zt).each(Gt=>rs(Gt,MS,{icon:Ot}))),setTooltip:Ot=>{const zt=j.providers.translate(Ot);Vo(kt.element,"aria-label",zt),st.set(Ot)}}),mt=ls(Et),yt={getApi:ut,onSetup:h.onSetup};return lN.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...lq(h.tooltip,j.providers),...wt(tt)?{"data-mce-name":tt}:{}}},onExecute:kt=>{const Ot=ut(kt);Ot.isEnabled()&&h.onAction(Ot)},onItemExecute:(kt,Ot,zt)=>{},splitDropdownBehaviours:gr([Ws("split-dropdown-events",[ep((kt,Ot)=>kD(kt)),Qo(cq,Ds.focus),CS(yt,mt),kS(yt,mt)]),o1.splitButton(()=>j.providers.isDisabled()||j.providers.checkUiComponentContext(h.context).shouldDisable),Wp(()=>j.providers.checkUiComponentContext(h.context)),PI.config({}),...h.tooltip.map(kt=>Mp.config({...j.providers.tooltips.getConfig({tooltipText:j.providers.translate(kt),onShow:Ot=>{if(st.get()!==kt){const zt=j.providers.translate(st.get());Mp.setComponents(Ot,j.providers.tooltips.getComponents({tooltipText:zt}))}}})})).toArray()]),eventOrder:{[fy()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Gy()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:j.getSink,fetch:goe(ut,h,j.providers),parts:{menu:_R(!1,h.columns,h.presets)},components:[lN.parts.button(Z9(h.icon,h.text,It.none(),It.some([na.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),o1.toolbarButton(hn),Wp(Nt({contextType:"any",shouldDisable:!1}))]),j.providers,h.context)),lN.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:N6("chevron-down",j.providers.icons)},buttonBehaviours:gr([o1.splitButton(hn),Wp(Nt({contextType:"any",shouldDisable:!1}))])}),lN.parts["aria-descriptor"]({text:j.providers.translate("To open the popup, press Shift+Enter")})]})},yoe=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],IA=(h,j)=>(tt,st,ut,mt)=>{const yt=h(tt).mapError(kt=>sx(kt)).getOrDie();return j(yt,st,ut,mt)},boe={button:IA(CR,(h,j,tt,st)=>hoe(h,j.shared.providers,st)),togglebutton:IA(SR,(h,j,tt,st)=>poe(h,j.shared.providers,st)),menubutton:IA(oW,(h,j,tt,st)=>SA(h,"tox-tbtn",j,It.none(),!1,st)),splitbutton:IA(Gte,(h,j,tt,st)=>moe(h,j.shared,st)),grouptoolbarbutton:IA(Bte,(h,j,tt,st)=>{const ut=tt.ui.registry.getAll().buttons,mt=kt=>cN(tt,{buttons:ut,toolbar:kt,allowToolbarGroups:!1},j,It.none()),yt={[Y4]:j.shared.header.isPositionedAtTop()?nm.TopToBottom:nm.BottomToTop};switch(gS(tt)){case Qv.floating:return KI(h,j,mt,yt,st);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},voe=(h,j,tt,st)=>tr(boe,h.type).fold(()=>(console.error("skipping button defined by",h),It.none()),ut=>It.some(ut(h,j,tt,st))),K9={styles:loe,fontsize:toe,fontsizeinput:nq,fontfamily:Wne,blocks:Une,align:aN},hq=h=>{const j=On(yoe,tt=>{const st=lo(tt.items,ut=>Ms(h,ut)||Ms(K9,ut));return{name:tt.name,items:st}});return lo(j,tt=>tt.items.length>0)},_oe=h=>{const j=h.split("|");return On(j,tt=>({items:tt.trim().split(" ")}))},xoe=h=>Mt(h,j=>Ms(j,"name")&&Ms(j,"items")),woe=h=>{const j=h.toolbar,tt=h.buttons;return j===!1?[]:j===void 0||j===!0?hq(tt):_e(j)?_oe(j):xoe(j)?j:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Coe=(h,j,tt,st,ut,mt)=>tr(j,tt.toLowerCase()).orThunk(()=>mt.bind(yt=>wo(yt,kt=>tr(j,kt+tt.toLowerCase())))).fold(()=>tr(K9,tt.toLowerCase()).map(yt=>yt(h,ut)),yt=>yt.type==="grouptoolbarbutton"&&!st?(console.warn(`Ignoring the '${tt}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),It.none()):voe(yt,ut,h,tt.toLowerCase())),cN=(h,j,tt,st)=>{const ut=woe(j),mt=On(ut,yt=>{const kt=rn(yt.items,Ot=>Ot.trim().length===0?[]:Coe(h,j.buttons,Ot,j.allowToolbarGroups,tt,st).toArray());return{title:It.from(h.translate(yt.name)),items:kt}});return lo(mt,yt=>yt.items.length>0)},pq=(h,j,tt,st)=>{const ut=j.mainUi.outerContainer,mt=tt.toolbar,yt=tt.buttons;if(Mt(mt,_e)){const kt=mt.map(Ot=>{const zt={toolbar:Ot,buttons:yt,allowToolbarGroups:tt.allowToolbarGroups};return cN(h,zt,st,It.none())});Gu.setToolbars(ut,kt)}else Gu.setToolbar(ut,cN(h,tt,st,It.none()))},Y9=_i(),koe=Y9.os.isiOS()&&Y9.os.version.major<=12,Soe=(h,j)=>{const{uiMotherships:tt}=j,st=h.dom;let ut=h.getWin();const mt=h.getDoc().documentElement,yt=ls(Hu(ut.innerWidth,ut.innerHeight)),kt=ls(Hu(mt.offsetWidth,mt.offsetHeight)),Ot=()=>{const sn=yt.get();(sn.left!==ut.innerWidth||sn.top!==ut.innerHeight)&&(yt.set(Hu(ut.innerWidth,ut.innerHeight)),bF(h))},zt=()=>{const sn=h.getDoc().documentElement,cn=kt.get();(cn.left!==sn.offsetWidth||cn.top!==sn.offsetHeight)&&(kt.set(Hu(sn.offsetWidth,sn.offsetHeight)),bF(h))},Gt=sn=>{fX(h,sn)};st.bind(ut,"resize",Ot),st.bind(ut,"scroll",Gt);const Wt=a5(ro.fromDom(h.getBody()),"load",zt);h.on("hide",()=>{_o(tt,sn=>{Xo(sn.element,"display","none")})}),h.on("show",()=>{_o(tt,sn=>{Bs(sn.element,"display")})}),h.on("NodeChange",zt),h.on("remove",()=>{Wt.unbind(),st.unbind(ut,"resize",Ot),st.unbind(ut,"scroll",Gt),ut=null})},Eoe=(h,j,tt)=>{Y2(h)&&N5(tt.mainUi.mothership.element,tt.popupUi.mothership),Ay(j,tt.dialogUi.mothership)};var uN=Object.freeze({__proto__:null,render:(h,j,tt,st,ut)=>{const{mainUi:mt,uiMotherships:yt}=j,kt=ls(0),Ot=mt.outerContainer;BW(h);const zt=ro.fromDom(ut.targetNode),Gt=Rm(hp(zt));N5(zt,mt.mothership),Eoe(h,Gt,j),h.on("PostRender",()=>{Gu.setSidebar(Ot,tt.sidebar,g6(h))}),h.on("SkinLoaded",()=>{pq(h,j,tt,st),kt.set(h.getWin().innerWidth),Gu.setMenubar(Ot,NW(h,tt)),Gu.setViews(Ot,tt.views),Soe(h,j)});const Wt=Gu.getSocket(Ot).getOrDie("Could not find expected socket element");if(koe){Zs(Wt.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Mn=LQ(()=>{h.dispatch("ScrollContent")},20),vo=J0(Wt.element,"scroll",Mn.throttle);h.on("remove",vo.unbind)}LG(h,j),h.addCommand("ToggleSidebar",(Mn,vo)=>{Gu.toggleSidebar(Ot,vo),JG(h)}),h.addQueryValueHandler("ToggleSidebar",()=>{var Mn;return(Mn=Gu.whichSidebar(Ot))!==null&&Mn!==void 0?Mn:""}),h.addCommand("ToggleView",(Mn,vo)=>{if(Gu.toggleView(Ot,vo)){const jn=Ot.element;mt.mothership.broadcastOn([vx()],{target:jn}),_o(yt,po=>{po.broadcastOn([vx()],{target:jn})}),dt(Gu.whichView(Ot))&&(h.focus(),h.nodeChanged(),Gu.refreshToolbar(Ot)),QG(h)}}),h.addQueryValueHandler("ToggleView",()=>{var Mn;return(Mn=Gu.whichView(Ot))!==null&&Mn!==void 0?Mn:""});const sn=gS(h),cn=()=>{Gu.refreshToolbar(j.mainUi.outerContainer)};(sn===Qv.sliding||sn===Qv.floating)&&h.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Mn=h.getWin().innerWidth;Mn!==kt.get()&&(cn(),kt.set(Mn))});const xn={setEnabled:Mn=>{RR(j,Mn?"setEnabled":"setDisabled")},isEnabled:()=>!Rs.isDisabled(Ot)};return{iframeContainer:Wt.element.dom,editorContainer:Ot.element.dom,api:xn}}});const gq=h=>/^[0-9\.]+(|px)$/i.test(""+h)?It.some(parseInt(""+h,10)):It.none(),YI=h=>Rt(h)?h+"px":h,RA=(h,j,tt)=>{const st=j.filter(mt=>h<mt),ut=tt.filter(mt=>h>mt);return st.or(ut).getOr(h)},mq=h=>{const j=s6(h),tt=QE(h),st=oO(h);return gq(j).map(ut=>RA(ut,tt,st))},Aoe=h=>mq(h).getOr(s6(h)),yq=h=>{const j=rR(h),tt=i6(h),st=eA(h);return gq(j).map(ut=>RA(ut,tt,st))},Toe=h=>yq(h).getOr(rR(h)),{ToolbarLocation:X9,ToolbarMode:bq}=JK,dN=40,vq=(h,j,tt,st,ut)=>{const{mainUi:mt,uiMotherships:yt}=tt,kt=pS.DOM,Ot=L_(h),zt=mS(h),Gt=eA(h).or(yq(h)),Wt=st.shared.header,sn=Wt.isPositionedAtTop,cn=150,xn=gS(h),Mn=xn===bq.sliding||xn===bq.floating,vo=ls(!1),jn=()=>vo.get()&&!h.removed,po=ns=>Mn?ns.fold(Nt(0),ur=>ur.components().length>1?fu(ur.components()[1].element):0):0,yo=ns=>{switch(rO(h)){case X9.auto:const ur=Gu.getToolbar(mt.outerContainer),Pr=po(ur),zs=fu(ns.element)-Pr,Qs=_d(j);if(Qs.y>zs)return"top";{const Hs=ry(j),Ru=Math.max(Hs.dom.scrollHeight,fu(Hs));return Qs.bottom<Ru-zs||zp().bottom<Qs.bottom-zs?"bottom":"top"}case X9.bottom:return"bottom";case X9.top:default:return"top"}},zo=ns=>{ut.on(ur=>{Zu.setModes(ur,[ns]),Wt.setDockingMode(ns);const Pr=sn()?nm.TopToBottom:nm.BottomToTop;Vo(ur.element,Y4,Pr)})},$o=()=>{ut.on(ns=>{const ur=Gt.getOrThunk(()=>p_().width-T0(j).left-10);Xo(ns.element,"max-width",ur+"px")})},Cr=(ns,ur)=>{ut.on(Pr=>{const zs=Gu.getToolbar(mt.outerContainer),Qs=po(zs),ms=_d(j),Hs=Ur(h,mt.outerContainer.element),Ru=()=>Hs.fold(()=>ms.x,G0=>{const u1=_d(G0);return Vl(G0,fo())?ms.x:ms.x-u1.x}),_u=()=>Hs.fold(()=>sn()?Math.max(ms.y-fu(Pr.element)+Qs,0):ms.bottom,G0=>{var u1;const d1=_d(G0),W_=(u1=G0.dom.scrollTop)!==null&&u1!==void 0?u1:0,Lw=Vl(G0,fo())?Math.max(ms.y-fu(Pr.element)+Qs,0):ms.y-d1.y+W_-fu(Pr.element)+Qs;return sn()?Lw:ms.bottom}),ev=Ru(),xp=Jr(ns,Math.ceil(mt.outerContainer.element.dom.getBoundingClientRect().width)).filter(G0=>G0>cn).map(G0=>{const u1=ur.getOr(Ym()),d1=window.innerWidth-(ev-u1.left),W_=Math.max(Math.min(G0,d1),cn);return d1<G0&&Xo(mt.outerContainer.element,"width",W_+"px"),{width:W_+"px"}}).getOr({width:"max-content"}),c1={position:"absolute",left:Math.round(ev)+"px",top:_u()+"px"};Zs(mt.outerContainer.element,{...c1,...xp})})},Ur=(ns,ur)=>Y2(ns)?RC(ur):It.none(),Ko=()=>{_o(yt,ns=>{ns.broadcastOn([xw()],{})})},Vr=()=>!Ot&&(Fu(mt.outerContainer.element).left+Sn(mt.outerContainer.element)>=window.innerWidth-dN||du(mt.outerContainer.element,"width").isSome())?(Xo(mt.outerContainer.element,"position","absolute"),Xo(mt.outerContainer.element,"left","0px"),Bs(mt.outerContainer.element,"width"),!0):!1,Dr=ns=>{if(!jn())return;Ot||$o();const ur=Ym(),Pr=Ot?!1:Vr();if(Mn&&Gu.refreshToolbar(mt.outerContainer),!Ot){const zs=Ym(),Qs=Jr(ur.left!==zs.left,ur);Cr(Pr,Qs),Qs.each(ms=>{k1(ms.left,zs.top)})}zt&&ut.on(ns),Ko()},Xr=()=>Ot||!zt||!jn()?!1:ut.get().exists(ns=>{const ur=Wt.getDockingMode(),Pr=yo(ns);return Pr!==ur?(zo(Pr),!0):!1});return{isVisible:jn,isPositionedAtTop:sn,show:()=>{vo.set(!0),Xo(mt.outerContainer.element,"display","flex"),kt.addClass(h.getBody(),"mce-edit-focus"),_o(yt,ns=>{Bs(ns.element,"display")}),Xr(),Y2(h)?Dr(ns=>Zu.isDocked(ns)?Zu.reset(ns):Zu.refresh(ns)):Dr(Zu.refresh)},hide:()=>{vo.set(!1),Xo(mt.outerContainer.element,"display","none"),kt.removeClass(h.getBody(),"mce-edit-focus"),_o(yt,ns=>{Xo(ns.element,"display","none")})},update:Dr,updateMode:()=>{Xr()&&Dr(Zu.reset)},repositionPopups:Ko}},J9=(h,j)=>{const tt=_d(h);return{pos:j?tt.y:tt.bottom,bounds:tt}},_q=(h,j,tt,st)=>{const ut=ls(J9(j,tt.isPositionedAtTop())),mt=zt=>{const{pos:Gt,bounds:Wt}=J9(j,tt.isPositionedAtTop()),{pos:sn,bounds:cn}=ut.get(),xn=Wt.height!==cn.height||Wt.width!==cn.width;ut.set({pos:Gt,bounds:Wt}),xn&&bF(h,zt),tt.isVisible()&&(sn!==Gt?tt.update(Zu.reset):xn&&(tt.updateMode(),tt.repositionPopups()))};st||(h.on("activate",tt.show),h.on("deactivate",tt.hide)),h.on("SkinLoaded ResizeWindow",()=>tt.update(Zu.reset)),h.on("NodeChange keydown",zt=>{requestAnimationFrame(()=>mt(zt))});let yt=0;const kt=vD(()=>tt.update(Zu.refresh),33);h.on("ScrollWindow",()=>{const zt=Ym().left;zt!==yt&&(yt=zt,kt.throttle()),tt.updateMode()}),Y2(h)&&h.on("ElementScroll",zt=>{tt.update(Zu.refresh)});const Ot=W0();Ot.set(a5(ro.fromDom(h.getBody()),"load",zt=>mt(zt.raw))),h.on("remove",()=>{Ot.clear()})};var Roe=Object.freeze({__proto__:null,render:(h,j,tt,st,ut)=>{const{mainUi:mt}=j,yt=Wl(),kt=ro.fromDom(ut.targetNode),Ot=vq(h,kt,j,st,yt),zt=u6(h);Fne(h);const Gt=()=>{if(yt.isSet()){Ot.show();return}yt.set(Gu.getHeader(mt.outerContainer).getOrDie());const sn=v6(h);Y2(h)?(N5(kt,mt.mothership),N5(kt,j.popupUi.mothership)):Ay(sn,mt.mothership),Ay(sn,j.dialogUi.mothership);const cn=()=>{pq(h,j,tt,st),Gu.setMenubar(mt.outerContainer,NW(h,tt)),Ot.show(),_q(h,kt,Ot,zt),h.nodeChanged()};zt?h.once("SkinLoaded",cn):cn()};h.on("show",Gt),h.on("hide",Ot.hide),zt||(h.on("focus",Gt),h.on("blur",Ot.hide)),h.on("init",()=>{(h.hasFocus()||zt)&&Gt()}),LG(h,j);const Wt={show:Gt,hide:Ot.hide,setEnabled:sn=>{RR(j,sn?"setEnabled":"setDisabled")},isEnabled:()=>!Rs.isDisabled(mt.outerContainer)};return{editorContainer:mt.outerContainer.element.dom,api:Wt}}});const xq=()=>{const h=Wl(),j=Wl(),tt=Wl();return{dialogUi:h,popupUi:j,mainUi:tt,getUiMotherships:()=>{const mt=h.get().map(kt=>kt.mothership),yt=j.get().map(kt=>kt.mothership);return mt.fold(()=>yt.toArray(),kt=>yt.fold(()=>[kt],Ot=>Vl(kt.element,Ot.element)?[kt]:[kt,Ot]))},lazyGetInOuterOrDie:(mt,yt)=>()=>tt.get().bind(kt=>yt(kt.outerContainer)).getOrDie(`Could not find ${mt} element in OuterContainer`)}},Moe="contexttoolbar-show",wq="contexttoolbar-hide",Poe=h=>({hide:()=>wl(h,Lm()),getValue:()=>zr.getValue(h)}),Cq=(h,j)=>Qo(CD,(tt,st)=>{const ut=h.get(tt),mt=Poe(ut);j.onAction(mt,st.event.buttonApi)}),Ooe=(h,j,tt)=>{const{primary:st,...ut}=j.original,mt=dr(CR({...ut,type:"button",onAction:Et}));return dq(mt,tt,[Cq(h,j)])},bM=(h,j,tt)=>{const{primary:st,...ut}=j.original,mt=dr(SR({...ut,type:"togglebutton",onAction:Et}));return fq(mt,tt,[Cq(h,j)])},Doe=h=>h.type==="contextformtogglebutton",Noe=(h,j,tt)=>Doe(j)?bM(h,j,tt):Ooe(h,j,tt),Loe=(h,j,tt)=>{const st=On(j,yt=>nu(Noe(h,yt,tt)));return{asSpecs:()=>On(st,yt=>yt.asSpec()),findPrimary:yt=>wo(j,(kt,Ot)=>kt.primary?It.from(st[Ot]).bind(zt=>zt.getOpt(yt)).filter(an(Rs.isDisabled)):It.none())}},Q9=(h,j)=>{const tt=h.label.fold(()=>({}),mt=>({"aria-label":mt})),st=nu(kx.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:h.initValue(),inputAttributes:tt,selectOnFocus:!0,inputBehaviours:gr([Rs.config({disabled:()=>j.checkUiComponentContext("mode:design").shouldDisable}),Wp(()=>j.checkUiComponentContext("mode:design")),ys.config({mode:"special",onEnter:mt=>ut.findPrimary(mt).map(yt=>(Qx(yt),!0)),onLeft:(mt,yt)=>(yt.cut(),It.none()),onRight:(mt,yt)=>(yt.cut(),It.none())})])})),ut=Loe(st,h.commands,j);return[{title:It.none(),items:[st.asSpec()]},{title:It.none(),items:ut.asSpecs()}]},kq={renderContextForm:(h,j,tt)=>nN({type:h,uid:Wr("context-toolbar"),initGroups:Q9(j,tt),onEscape:It.none,cyclicKeying:!0,providers:tt}),buildInitGroups:Q9},Sq=(h,j,tt)=>j.bottom-h.y>=tt&&h.bottom-j.y>=tt,Foe=h=>{const j=h.getBoundingClientRect();if(j.height<=0&&j.width<=0){const tt=Dy(ro.fromDom(h.startContainer),h.startOffset).element;return(Al(tt)?Yp(tt):It.some(tt)).filter(_s).map(ut=>ut.dom.getBoundingClientRect()).getOr(j)}else return j},ez=h=>{const j=h.selection.getRng(),tt=Foe(j);if(h.inline){const st=Ym();return Qu(st.left+tt.left,st.top+tt.top,tt.width,tt.height)}else{const st=Nv(ro.fromDom(h.getBody()));return Qu(st.x+tt.left,st.y+tt.top,tt.width,tt.height)}},zoe=(h,j)=>j.filter(tt=>Fn(tt)&&sm(tt)).map(Nv).getOrThunk(()=>ez(h)),Boe=(h,j,tt)=>{const st=Math.max(h.x+tt,j.x),ut=Math.min(h.right-tt,j.right);return{x:st,width:ut-st}},vM=(h,j,tt,st,ut,mt)=>{const yt=ro.fromDom(h.getContainer()),kt=np(yt,".tox-editor-header").getOr(yt),Ot=_d(kt),zt=Ot.y>=j.bottom,Gt=st&&!zt;if(h.inline&&Gt)return{y:Math.max(Ot.bottom+mt,tt.y),bottom:tt.bottom};if(h.inline&&!Gt)return{y:tt.y,bottom:Math.min(Ot.y-mt,tt.bottom)};const Wt=ut==="line"?_d(yt):j;return Gt?{y:Math.max(Ot.bottom+mt,tt.y),bottom:Math.min(Wt.bottom-mt,tt.bottom)}:{y:Math.max(Wt.y+mt,tt.y),bottom:Math.min(Ot.y-mt,tt.bottom)}},tz=(h,j,tt,st=0)=>{const ut=p_(window),mt=_d(ro.fromDom(h.getContentAreaContainer())),yt=cO(h)||dO(h)||iR(h),{x:kt,width:Ot}=Boe(mt,ut,st);if(h.inline&&!yt)return Qu(kt,ut.y,Ot,ut.height);{const zt=j.header.isPositionedAtTop(),{y:Gt,bottom:Wt}=vM(h,mt,ut,zt,tt,st);return Qu(kt,Gt,Ot,Wt-Gt)}},fN=12,Eq={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},nz={maxHeightFunction:hw(),maxWidthFunction:Av()},oz=(h,j)=>{const tt=h.selection.getRng(),st=Dy(ro.fromDom(tt.startContainer),tt.startOffset);return tt.startContainer===tt.endContainer&&tt.startOffset===tt.endOffset-1&&Vl(st.element,j)},Aq=(h,j,tt)=>{const st=du(h,"position");Xo(h,"position",j);const ut=tt(h);return st.each(mt=>Xo(h,"position",mt)),ut},rz=h=>h==="node",$oe=(h,j,tt,st,ut)=>{const mt=ez(h),yt=st.lastElement().exists(kt=>Vl(tt,kt));if(oz(h,tt))return yt?e9:e_;if(yt)return Aq(j,st.getMode(),()=>Sq(mt,_d(j),-20)&&!st.isReposition()?Zee:e9);{const kt=st.getMode()==="fixed"?ut.y+Ym().top:ut.y,Ot=fu(j)+fN;return kt+Ot<=mt.y?e_:PS}},XI=(h,j,tt,st)=>{const ut=Ot=>(zt,Gt,Wt,sn,cn)=>{const xn=$oe(h,sn,Ot,tt,cn),Mn={...zt,y:cn.y,height:cn.height};return{...xn(Mn,Gt,Wt,sn,cn),alwaysFit:!0}},mt=Ot=>rz(st)?[ut(Ot)]:[];return j?{onLtr:Ot=>[tm,gm,mm,n0,ym,hu].concat(mt(Ot)),onRtl:Ot=>[tm,mm,gm,ym,n0,hu].concat(mt(Ot))}:{onLtr:Ot=>[hu,tm,n0,gm,ym,mm].concat(mt(Ot)),onRtl:Ot=>[hu,tm,ym,mm,n0,gm].concat(mt(Ot))}},hN=(h,j,tt,st)=>j==="line"?{bubble:Xv(fN,0,Eq),layouts:{onLtr:()=>[_T],onRtl:()=>[t5]},overrides:nz}:{bubble:Xv(0,fN,Eq,1/fN),layouts:XI(h,tt,st,j),overrides:nz},JI=(h,j)=>{const tt=lo(j,mt=>mt.predicate(h.dom)),{pass:st,fail:ut}=jr(tt,mt=>mt.type==="contexttoolbar");return{contextToolbars:st,contextForms:ut}},sz=h=>{if(h.length<=1)return h;{const j=mt=>er(h,yt=>yt.position===mt),tt=mt=>lo(h,yt=>yt.position===mt),st=j("selection"),ut=j("node");if(st||ut)if(ut&&st){const mt=tt("node"),yt=On(tt("selection"),kt=>({...kt,position:"node"}));return mt.concat(yt)}else return tt(st?"selection":"node");else return tt("line")}},iz=h=>{if(h.length<=1)return h;{const j=st=>mn(h,ut=>ut.position===st);return j("selection").orThunk(()=>j("node")).orThunk(()=>j("line")).map(st=>st.position).fold(()=>[],st=>lo(h,ut=>ut.position===st))}},Tq=(h,j,tt)=>{const st=JI(h,j);if(st.contextForms.length>0)return It.some({elem:h,toolbars:[st.contextForms[0]]});{const ut=JI(h,tt);if(ut.contextForms.length>0)return It.some({elem:h,toolbars:[ut.contextForms[0]]});if(st.contextToolbars.length>0||ut.contextToolbars.length>0){const mt=sz(st.contextToolbars.concat(ut.contextToolbars));return It.some({elem:h,toolbars:mt})}else return It.none()}},pN=(h,j,tt)=>h(j)?It.none():xy(j,st=>{if(_s(st)){const{contextToolbars:ut,contextForms:mt}=JI(st,tt.inNodeScope),yt=mt.length>0?mt:iz(ut);return yt.length>0?It.some({elem:st,toolbars:yt}):It.none()}else return It.none()},h),Iq=(h,j)=>{const tt=ro.fromDom(j.getBody()),st=yt=>Vl(yt,tt),ut=yt=>!st(yt)&&!Dp(tt,yt),mt=ro.fromDom(j.selection.getNode());return ut(mt)?It.none():Tq(mt,h.inNodeScope,h.inEditorScope).orThunk(()=>pN(st,mt,h))},Rq=(h,j)=>{const tt={},st=[],ut=[],mt={},yt={},kt=(Gt,Wt)=>{const sn=dr(AR(Wt));tt[Gt]=sn,sn.launch.map(cn=>{mt["form:"+Gt]={...Wt.launch,type:cn.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{j(sn)}}}),sn.scope==="editor"?ut.push(sn):st.push(sn),yt[Gt]=sn},Ot=(Gt,Wt)=>{$Y(Wt).each(sn=>{Wt.scope==="editor"?ut.push(sn):st.push(sn),yt[Gt]=sn})},zt=Oo(h);return _o(zt,Gt=>{const Wt=h[Gt];Wt.type==="contextform"?kt(Gt,Wt):Wt.type==="contexttoolbar"&&Ot(Gt,Wt)}),{forms:tt,inNodeScope:st,inEditorScope:ut,lookupTable:yt,formNavigators:mt}},mN=Wr("forward-slide"),Mq=Wr("backward-slide"),yN=Wr("change-slide-event"),az="tox-pop--resizing",Goe=h=>{const j=ls([]);return vp.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:tt=>{j.set([]),vp.getContent(tt).each(st=>{Bs(st.element,"visibility")}),bu(tt.element,az),Bs(tt.element,"width")},inlineBehaviours:gr([Ws("context-toolbar-events",[ew(JS(),(tt,st)=>{st.event.raw.propertyName==="width"&&(bu(tt.element,az),Bs(tt.element,"width"))}),Qo(yN,(tt,st)=>{const ut=tt.element;Bs(ut,"width");const mt=bn(ut);vp.setContent(tt,st.event.contents),Vp(ut,az);const yt=bn(ut);Xo(ut,"width",mt+"px"),vp.getContent(tt).each(kt=>{st.event.focus.bind(Ot=>(mv(Ot),N0(ut))).orThunk(()=>(ys.focusIn(kt),P_(hp(ut))))}),setTimeout(()=>{Xo(tt.element,"width",yt+"px")},0)}),Qo(mN,(tt,st)=>{vp.getContent(tt).each(ut=>{j.set(j.get().concat([{bar:ut,focus:P_(hp(tt.element))}]))}),rs(tt,yN,{contents:st.event.forwardContents,focus:It.none()})}),Qo(Mq,(tt,st)=>{$n(j.get()).each(ut=>{j.set(j.get().slice(0,j.get().length-1)),rs(tt,yN,{contents:Uy(ut.bar),focus:ut.focus})})})]),ys.config({mode:"special",onEscape:tt=>$n(j.get()).fold(()=>h.onEscape(),st=>(wl(tt,Mq),It.some(!0)))})]),lazySink:()=>Ks.value(h.sink)})},QI="tox-pop--transition",Pq=(h,j,tt,st)=>{const ut=st.backstage,mt=ut.shared,yt=_i().deviceType.isTouch,kt=Wl(),Ot=Wl(),zt=Wl(),Gt=km(Goe({sink:tt,onEscape:()=>(h.focus(),It.some(!0))})),Wt=()=>{const Dr=zt.get().getOr("node"),Xr=rz(Dr)?1:0;return tz(h,mt,Dr,Xr)},sn=()=>!h.removed&&!(yt()&&ut.isContextMenuOpen()),cn=Dr=>ou(wu(Dr,kt.get(),Vl),!0),xn=()=>{if(sn()){const Dr=Wt(),Xr=ou(zt.get(),"node")?zoe(h,kt.get()):ez(h);return Dr.height<=0||!Sq(Xr,Dr,.01)}else return!0},Mn=()=>{kt.clear(),Ot.clear(),zt.clear(),vp.hide(Gt)},vo=()=>{if(vp.isOpen(Gt)){const Dr=Gt.element;Bs(Dr,"display"),xn()?Xo(Dr,"display","none"):(Ot.set(0),vp.reposition(Gt))}},jn=Dr=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Dr],behaviours:gr([ys.config({mode:"acyclic"}),Ws("pop-dialog-wrap-events",[ep(Xr=>{h.shortcuts.add("ctrl+F9","focus statusbar",()=>ys.focusIn(Xr))}),S_(Xr=>{h.shortcuts.remove("ctrl+F9")})])])}),po=qo(()=>Rq(j,Dr=>{const Xr=$o([Dr]);rs(Gt,mN,{forwardContents:jn(Xr)})})),yo=(Dr,Xr)=>cN(h,{buttons:Dr,toolbar:Xr.items,allowToolbarGroups:!1},st.backstage,It.some(["form:"])),zo=(Dr,Xr)=>kq.buildInitGroups(Dr,Xr),$o=Dr=>{const{buttons:Xr}=h.ui.registry.getAll(),Il=po(),Ju={...Xr,...Il.formNavigators},tu=gS(h)===Qv.scrolling?Qv.scrolling:Qv.default,ns=Dn(On(Dr,ur=>ur.type==="contexttoolbar"?yo(Ju,ur):zo(ur,mt.providers)));return nN({type:tu,uid:Wr("context-toolbar"),initGroups:ns,onEscape:It.none,cyclicKeying:!0,providers:mt.providers})},Cr=(Dr,Xr)=>{const Il=Dr==="node"?mt.anchors.node(Xr):mt.anchors.cursor(),Ju=hN(h,Dr,yt(),{lastElement:kt.get,isReposition:()=>ou(Ot.get(),0),getMode:()=>s0.getMode(tt)});return Ou(Il,Ju)},Ur=(Dr,Xr)=>{if(Vr.cancel(),!sn())return;const Il=$o(Dr),Ju=Dr[0].position,tu=Cr(Ju,Xr);zt.set(Ju),Ot.set(1);const ns=Gt.element;Bs(ns,"display"),cn(Xr)||(bu(ns,QI),s0.reset(tt,Gt)),vp.showWithinBounds(Gt,jn(Il),{anchor:tu,transition:{classes:[QI],mode:"placement"}},()=>It.some(Wt())),Xr.fold(kt.clear,kt.set),xn()&&Xo(ns,"display","none")};let Ko=!1;const Vr=vD(()=>{if(!(!h.hasFocus()||h.removed||Ko))if(X0(Gt.element,QI))Vr.throttle();else{const Dr=po();Iq(Dr,h).fold(Mn,Xr=>{Ur(Xr.toolbars,It.some(Xr.elem))})}},17);h.on("init",()=>{h.on("remove",Mn),h.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",vo),h.on("click keyup focus SetContent",Vr.throttle),h.on(wq,Mn),h.on(Moe,Dr=>{const Xr=po();tr(Xr.lookupTable,Dr.toolbarKey).each(Il=>{Ur([Il],Jr(Dr.target!==h,Dr.target)),vp.getContent(Gt).each(ys.focusIn)})}),h.on("focusout",Dr=>{XE.setEditorTimeout(h,()=>{N0(tt.element).isNone()&&N0(Gt.element).isNone()&&Mn()},0)}),h.on("SwitchMode",()=>{h.mode.isReadOnly()&&Mn()}),h.on("ExecCommand",({command:Dr})=>{Dr.toLowerCase()==="toggleview"&&Mn()}),h.on("AfterProgressState",Dr=>{Dr.state?Mn():h.hasFocus()&&Vr.throttle()}),h.on("dragstart",()=>{Ko=!0}),h.on("dragend drop",()=>{Ko=!1}),h.on("NodeChange",Dr=>{N0(Gt.element).fold(Vr.throttle,Et)})})},joe=h=>{_o([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],tt=>{h.ui.registry.addToggleButton(tt.name,{tooltip:tt.text,icon:tt.icon,onAction:Ev(h,tt.cmd),onSetup:ZO(h,tt.name)})}),h.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:ty(h),onAction:Ev(h,"JustifyNone")})},Oq=(h,j)=>{const tt=()=>{const st=j.getOptions(h),ut=j.getCurrent(h).map(j.hash),mt=Wl();return On(st,yt=>({type:"togglemenuitem",text:j.display(yt),onSetup:kt=>{const Ot=Gt=>{Gt&&(mt.on(Wt=>Wt.setActive(!1)),mt.set(kt)),kt.setActive(Gt)};Ot(ou(ut,j.hash(yt)));const zt=j.watcher(h,yt,Ot);return()=>{mt.clear(),zt()}},onAction:()=>j.setCurrent(h,yt)}))};h.ui.registry.addMenuButton(j.name,{tooltip:j.text,icon:j.icon,fetch:st=>st(tt()),onSetup:j.onToolbarSetup}),h.ui.registry.addNestedMenuItem(j.name,{type:"nestedmenuitem",text:j.text,getSubmenuItems:tt,onSetup:j.onMenuSetup})},Uoe=h=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:N$,hash:j=>ZW(j,["fixed","relative","empty"]).getOr(j),display:Jt,watcher:(j,tt,st)=>j.formatter.formatChanged("lineheight",st,!1,{value:tt}).unbind,getCurrent:j=>It.from(j.queryCommandValue("LineHeight")),setCurrent:(j,tt)=>j.execCommand("LineHeight",!1,tt),onToolbarSetup:ty(h),onMenuSetup:ty(h)}),Hoe=h=>It.from(C$(h)).map(tt=>({name:"language",text:"Language",icon:"language",getOptions:Nt(tt),hash:st=>bt(st.customCode)?st.code:`${st.code}/${st.customCode}`,display:st=>st.title,watcher:(st,ut,mt)=>{var yt;return st.formatter.formatChanged("lang",mt,!1,{value:ut.code,customValue:(yt=ut.customCode)!==null&&yt!==void 0?yt:null}).unbind},getCurrent:st=>{const ut=ro.fromDom(st.selection.getNode());return Nm(ut,mt=>It.some(mt).filter(_s).bind(yt=>Os(yt,"lang").map(Ot=>{const zt=Os(yt,"data-mce-lang").getOrUndefined();return{code:Ot,customCode:zt,title:""}})))},setCurrent:(st,ut)=>st.execCommand("Lang",!1,ut),onToolbarSetup:st=>{const ut=W0();return st.setActive(h.formatter.match("lang",{},void 0,!0)),ut.set(h.formatter.formatChanged("lang",st.setActive,!0)),qO(ut.clear,ty(h)(st))},onMenuSetup:ty(h)})),Voe=h=>{Oq(h,Uoe(h)),Hoe(h).each(j=>Oq(h,j))},Dq=(h,j)=>{$9(h,j),qne(h,j),coe(h,j),Hne(h,j),ioe(h,j)},Nq=h=>{h.ui.registry.addContext("editable",()=>h.selection.isEditable()),h.ui.registry.addContext("mode",j=>h.mode.get()===j),h.ui.registry.addContext("any",fn),h.ui.registry.addContext("formatting",j=>h.formatter.canApply(j)),h.ui.registry.addContext("insert",j=>h.schema.isValidChild(h.selection.getNode().tagName,j))},Lq=h=>fA(h,"NodeChange",j=>{j.setEnabled(h.queryCommandState("outdent")&&h.selection.isEditable())}),Fq=h=>{h.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Lq(h),onAction:Ev(h,"outdent")}),h.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:ty(h),onAction:Ev(h,"indent")})},Woe=h=>{Fq(h)},lz=(h,j)=>tt=>{tt.setActive(j.get());const st=ut=>{j.set(ut.state),tt.setActive(ut.state)};return h.on("PastePlainTextToggle",st),qO(()=>h.off("PastePlainTextToggle",st),ty(h)(tt))},zq=h=>{const j=ls(O$(h)),tt=()=>h.execCommand("mceTogglePlainTextPaste");h.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:tt,onSetup:lz(h,j)}),h.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:tt,onSetup:lz(h,j)})},cz=(h,j)=>()=>{h.execCommand("mceToggleFormat",!1,j)},rae=h=>{tC.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(j,tt)=>{h.ui.registry.addToggleButton(j.name,{tooltip:j.text,icon:j.icon,onSetup:ZO(h,j.name),onAction:cz(h,j.name),shortcut:j.shortcut})});for(let j=1;j<=6;j++){const tt="h"+j,st=`Access+${j}`;h.ui.registry.addToggleButton(tt,{text:tt.toUpperCase(),tooltip:"Heading "+j,onSetup:ZO(h,tt),onAction:cz(h,tt),shortcut:st})}},qoe=h=>{tC.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],j=>{h.ui.registry.addButton(j.name,{tooltip:j.text,icon:j.icon,onAction:Ev(h,j.action),shortcut:j.shortcut,context:j.context})}),tC.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],j=>{h.ui.registry.addButton(j.name,{tooltip:j.text,icon:j.icon,onSetup:ty(h),onAction:Ev(h,j.action)})})},Zoe=h=>{tC.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],j=>{h.ui.registry.addToggleButton(j.name,{tooltip:j.text,icon:j.icon,onAction:Ev(h,j.action),onSetup:ZO(h,j.name)})})},Koe=h=>{rae(h),qoe(h),Zoe(h)},Yoe=h=>{tC.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],j=>{h.ui.registry.addMenuItem(j.name,{text:j.text,icon:j.icon,shortcut:j.shortcut,onAction:Ev(h,j.action),context:j.context})}),tC.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],j=>{h.ui.registry.addMenuItem(j.name,{text:j.text,icon:j.icon,shortcut:j.shortcut,onSetup:ty(h),onAction:Ev(h,j.action)})}),h.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:ty(h),onAction:cz(h,"code")})},Xoe=h=>{Koe(h),Yoe(h)},bN=(h,j)=>fA(h,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",tt=>{tt.setEnabled(!h.mode.isReadOnly()&&h.undoManager[j]())}),Joe=h=>{h.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:bN(h,"hasUndo"),onAction:Ev(h,"undo")}),h.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:bN(h,"hasRedo"),onAction:Ev(h,"redo")})},Qoe=h=>{h.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:bN(h,"hasUndo"),onAction:Ev(h,"undo"),shortcut:"Meta+Z"}),h.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:bN(h,"hasRedo"),onAction:Ev(h,"redo"),shortcut:"Meta+Y"})},ere=h=>{Joe(h),Qoe(h)},tre=h=>fA(h,"VisualAid",j=>{j.setActive(h.hasVisual)}),nre=h=>{h.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:tre(h),onAction:Ev(h,"mceToggleVisualAid"),context:"any"})},ore=h=>{h.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Ev(h,"mceToggleVisualAid"),context:"any"})},rre=h=>{ore(h),nre(h)},Bq=(h,j)=>{joe(h),Xoe(h),Dq(h,j),ere(h),RX(h),rre(h),Woe(h),Voe(h),zq(h),Nq(h)},sre=h=>_e(h)?h.split(/[ ,]/):h,$q=h=>j=>j.options.get(h),ire=h=>{const j=h.options.register;j("contextmenu_avoid_overlap",{processor:"string",default:""}),j("contextmenu_never_use_native",{processor:"boolean",default:!1}),j("contextmenu",{processor:tt=>tt===!1?{value:[],valid:!0}:_e(tt)||Mt(tt,_e)?{value:sre(tt),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},Gq=$q("contextmenu_never_use_native"),are=$q("contextmenu_avoid_overlap"),lre=h=>jq(h).length===0,jq=h=>{const j=h.ui.registry.getAll().contextMenus,tt=h.options.get("contextmenu");return h.options.isSet("contextmenu")?tt:lo(tt,st=>Ms(j,st))},_M=(h,j)=>({type:"makeshift",x:h,y:j}),cre=(h,j,tt)=>_M(h.x+j,h.y+tt),vN=h=>h.type==="longpress"||h.type.indexOf("touch")===0,ure=h=>{if(vN(h)){const j=h.touches[0];return _M(j.pageX,j.pageY)}else return _M(h.pageX,h.pageY)},dre=h=>{if(vN(h)){const j=h.touches[0];return _M(j.clientX,j.clientY)}else return _M(h.clientX,h.clientY)},uz=(h,j)=>{const tt=pS.DOM.getPos(h);return cre(j,tt.x,tt.y)},Uq=(h,j)=>j.type==="contextmenu"||j.type==="longpress"?h.inline?ure(j):uz(h.getContentAreaContainer(),dre(j)):dz(h),dz=h=>({type:"selection",root:ro.fromDom(h.selection.getNode())}),fre=h=>({type:"node",node:It.some(ro.fromDom(h.selection.getNode())),root:ro.fromDom(h.getBody())}),Hq=(h,j,tt)=>{switch(tt){case"node":return fre(h);case"point":return Uq(h,j);case"selection":return dz(h)}},hre=(h,j,tt,st,ut,mt)=>{const yt=tt(),kt=Hq(h,j,mt);zI(yt,z_.CLOSE_ON_EXECUTE,st,{isHorizontalMenu:!1,search:It.none()}).map(Ot=>{j.preventDefault(),vp.showMenuAt(ut,{anchor:kt},{menu:{markers:_S("normal")},data:Ot})})},pre={onLtr:()=>[tm,gm,mm,n0,ym,hu,e_,PS,iM,FD,sM,LD],onRtl:()=>[tm,mm,gm,ym,n0,hu,e_,PS,sM,LD,iM,FD]},gre=12,fz={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},mre=(h,j)=>{const tt=h.selection;if(tt.isCollapsed()||j.touches.length<1)return!1;{const st=j.touches[0],ut=tt.getRng();return ME(h.getWin(),XC.domRange(ut)).exists(yt=>yt.left<=st.clientX&&yt.right>=st.clientX&&yt.top<=st.clientY&&yt.bottom>=st.clientY)}},Vq=h=>{const j=h.selection.getRng(),tt=()=>{XE.setEditorTimeout(h,()=>{h.selection.setRng(j)},10),mt()};h.once("touchend",tt);const st=yt=>{yt.preventDefault(),yt.stopImmediatePropagation()};h.on("mousedown",st,!0);const ut=()=>mt();h.once("longpresscancel",ut);const mt=()=>{h.off("touchend",tt),h.off("longpresscancel",ut),h.off("mousedown",st)}},yre=(h,j,tt)=>{const st=Hq(h,j,tt);return{bubble:Xv(0,tt==="point"?gre:0,fz),layouts:pre,overrides:{maxWidthFunction:Av(),maxHeightFunction:hw()},...st}},bre=(h,j,tt,st,ut,mt,yt)=>{const kt=yre(h,j,mt);zI(tt,z_.CLOSE_ON_EXECUTE,st,{isHorizontalMenu:!0,search:It.none()}).map(Ot=>{j.preventDefault();const zt=yt?Ry.HighlightMenuAndItem:Ry.HighlightNone;vp.showMenuWithinBounds(ut,{anchor:kt},{menu:{markers:_S("normal"),highlightOnOpen:zt},data:Ot,type:"horizontal"},()=>It.some(tz(h,st.shared,mt==="node"?"node":"selection"))),h.dispatch(wq)})},hz=(h,j,tt,st,ut,mt)=>{const yt=_i(),kt=yt.os.isiOS(),Ot=yt.os.isMacOS(),zt=yt.os.isAndroid(),Gt=yt.deviceType.isTouch(),Wt=()=>!(zt||kt||Ot&&Gt),sn=()=>{const cn=tt();bre(h,j,cn,st,ut,mt,Wt())};if((Ot||kt)&&mt!=="node"){const cn=()=>{Vq(h),sn()};mre(h,j)?cn():(h.once("selectionchange",cn),h.once("touchend",()=>h.off("selectionchange",cn)))}else sn()},Wq=h=>_e(h)?h==="|":h.type==="separator",_N={type:"separator"},qq=h=>{const j=tt=>({text:tt.text,icon:tt.icon,enabled:tt.enabled,shortcut:tt.shortcut});if(_e(h))return h;switch(h.type){case"separator":return _N;case"submenu":return{type:"nestedmenuitem",...j(h),getSubmenuItems:()=>{const st=h.getSubmenuItems();return _e(st)?st:On(st,qq)}};default:const tt=h;return{type:"menuitem",...j(tt),onAction:$t(tt.onAction)}}},Zq=(h,j)=>{if(j.length===0)return h;const st=$n(h).filter(ut=>!Wq(ut)).fold(()=>[],ut=>[_N]);return h.concat(st).concat(j).concat([_N])},pz=(h,j,tt)=>{const st=mo(j,(ut,mt)=>tr(h,mt.toLowerCase()).map(yt=>{const kt=yt.update(tt);if(_e(kt)&&Un(Au(kt)))return Zq(ut,kt.split(" "));if(ct(kt)&&kt.length>0){const Ot=On(kt,qq);return Zq(ut,Ot)}else return ut}).getOrThunk(()=>ut.concat([mt])),[]);return st.length>0&&Wq(st[st.length-1])&&st.pop(),st},vre=(h,j)=>j.ctrlKey&&!Gq(h),_re=h=>h.type==="longpress"||Ms(h,"touches"),Kq=(h,j)=>!_re(j)&&(j.button!==2||j.target===h.getBody()&&j.pointerType===""),Yq=(h,j)=>Kq(h,j)?h.selection.getStart(!0):j.target,xre=(h,j)=>{const tt=are(h),st=Kq(h,j)?"selection":"point";if(Un(tt)){const ut=Yq(h,j);return BR(ro.fromDom(ut),tt)?"node":st}else return st},Xq=(h,j,tt)=>{const ut=_i().deviceType.isTouch,mt=km(vp.sketch({dom:{tag:"div"},lazySink:j,onEscape:()=>h.focus(),onShow:()=>tt.setContextMenuState(!0),onHide:()=>tt.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:gr([Ws("dismissContextMenu",[Qo(jy(),(Ot,zt)=>{Ul.close(Ot),h.focus()})])])})),yt=()=>vp.hide(mt),kt=Ot=>{if(Gq(h)&&Ot.preventDefault(),vre(h,Ot)||lre(h))return;const zt=xre(h,Ot),Gt=()=>{const sn=Yq(h,Ot),cn=h.ui.registry.getAll(),xn=jq(h);return pz(cn.contextMenus,xn,sn)};(ut()?hz:hre)(h,Ot,Gt,tt,mt,zt)};h.on("init",()=>{const Ot="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(ut()?"":" ResizeWindow");h.on(Ot,yt),h.on("longpress contextmenu",kt)})},gz=tn.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),xN=h=>j=>j.translate(-h.left,-h.top),wN=h=>j=>j.translate(h.left,h.top),rC=h=>(j,tt)=>mo(h,(st,ut)=>ut(st),Hu(j,tt)),CN=(h,j,tt)=>h.fold(rC([wN(tt),xN(j)]),rC([xN(j)]),rC([])),e3=(h,j,tt)=>h.fold(rC([wN(tt)]),rC([]),rC([wN(j)])),Jq=(h,j,tt)=>h.fold(rC([]),rC([xN(tt)]),rC([wN(j),xN(tt)])),wre=(h,j,tt,st,ut,mt)=>{const yt=e3(h,ut,mt),kt=e3(j,ut,mt);return Math.abs(yt.left-kt.left)<=tt&&Math.abs(yt.top-kt.top)<=st},Qq=(h,j,tt,st,ut,mt)=>{const yt=e3(h,ut,mt),kt=e3(j,ut,mt),Ot=Math.abs(yt.left-kt.left),zt=Math.abs(yt.top-kt.top);return Hu(Ot,zt)},eZ=(h,j,tt)=>{const st=h.fold((ut,mt)=>({position:It.some("absolute"),left:It.some(ut+"px"),top:It.some(mt+"px")}),(ut,mt)=>({position:It.some("absolute"),left:It.some(ut-tt.left+"px"),top:It.some(mt-tt.top+"px")}),(ut,mt)=>({position:It.some("fixed"),left:It.some(ut+"px"),top:It.some(mt+"px")}));return{right:It.none(),bottom:It.none(),...st}},tZ=(h,j,tt)=>h.fold((st,ut)=>kN(st+j,ut+tt),(st,ut)=>LS(st+j,ut+tt),(st,ut)=>n_(st+j,ut+tt)),mz=(h,j,tt,st)=>{const ut=(mt,yt)=>(kt,Ot)=>{const zt=mt(j,tt,st);return yt(kt.getOr(zt.left),Ot.getOr(zt.top))};return h.fold(ut(Jq,kN),ut(e3,LS),ut(CN,n_))},kN=gz.offset,LS=gz.absolute,n_=gz.fixed,yz=(h,j)=>{const tt=Kr(h,j);return bt(tt)?NaN:parseInt(tt,10)},Cre=(h,j)=>{const tt=h.element,st=yz(tt,j.leftAttr),ut=yz(tt,j.topAttr);return isNaN(st)||isNaN(ut)?It.none():It.some(Hu(st,ut))},kre=(h,j,tt)=>{const st=h.element;Vo(st,j.leftAttr,tt.left+"px"),Vo(st,j.topAttr,tt.top+"px")},Sre=(h,j)=>{const tt=h.element;Kt(tt,j.leftAttr),Kt(tt,j.topAttr)},Ere=(h,j,tt,st)=>Cre(h,j).fold(()=>tt,ut=>n_(ut.left+st.left,ut.top+st.top)),nZ=(h,j,tt,st,ut,mt)=>{const yt=Ere(h,j,tt,st),kt=j.mustSnap?Tre(h,j,yt,ut,mt):Ire(h,j,yt,ut,mt),Ot=CN(yt,ut,mt);return kre(h,j,Ot),kt.fold(()=>({coord:n_(Ot.left,Ot.top),extra:It.none()}),zt=>({coord:zt.output,extra:zt.extra}))},Are=(h,j)=>{Sre(h,j)},oZ=(h,j,tt,st)=>wo(h,ut=>{const mt=ut.sensor;return wre(j,mt,ut.range.left,ut.range.top,tt,st)?It.some({output:mz(ut.output,j,tt,st),extra:ut.extra}):It.none()}),Tre=(h,j,tt,st,ut)=>{const mt=j.getSnapPoints(h);return oZ(mt,tt,st,ut).orThunk(()=>mo(mt,(Ot,zt)=>{const Gt=zt.sensor,Wt=Qq(tt,Gt,zt.range.left,zt.range.top,st,ut);return Ot.deltas.fold(()=>({deltas:It.some(Wt),snap:It.some(zt)}),sn=>{const cn=(Wt.left+Wt.top)/2,xn=(sn.left+sn.top)/2;return cn<=xn?{deltas:It.some(Wt),snap:It.some(zt)}:Ot})},{deltas:It.none(),snap:It.none()}).snap.map(Ot=>({output:mz(Ot.output,tt,st,ut),extra:Ot.extra})))},Ire=(h,j,tt,st,ut)=>{const mt=j.getSnapPoints(h);return oZ(mt,tt,st,ut)},Rre=(h,j,tt)=>({coord:mz(h.output,h.output,j,tt),extra:h.extra});var Mre=Object.freeze({__proto__:null,snapTo:(h,j,tt,st)=>{const ut=j.getTarget(h.element);if(j.repositionTarget){const mt=Np(h.element),yt=Ym(mt),kt=nT(ut),Ot=Rre(st,yt,kt),zt=eZ(Ot.coord,yt,kt);Zl(ut,zt)}}});const bz="data-initial-z-index",Pre=h=>{Yp(h.element).filter(_s).each(j=>{Os(j,bz).fold(()=>Bs(j,"z-index"),tt=>Xo(j,"z-index",tt)),Kt(j,bz)})},Ore=h=>{Yp(h.element).filter(_s).each(j=>{du(j,"z-index").each(tt=>{Vo(j,bz,tt)}),Xo(j,"z-index",ru(h.element,"z-index"))})},vz=(h,j)=>{h.getSystem().addToGui(j),Ore(j)},rZ=h=>{Pre(h),h.getSystem().removeFromGui(h)},sZ=(h,j,tt)=>h.getSystem().build(Tx.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[j]},events:tt}));var xM=hm("snaps",[Jo("getSnapPoints"),zl("onSensor"),Jo("leftAttr"),Jo("topAttr"),ko("lazyViewport",zp),ko("mustSnap",!1)]);const _z=[ko("useFixed",hn),Jo("blockerClass"),ko("getTarget",Jt),ko("onDrag",Et),ko("repositionTarget",!0),ko("onDrop",Et),Wu("getBounds",zp),xM],Dre=h=>iu(du(h,"left"),du(h,"top"),du(h,"position"),(j,tt,st)=>(st==="fixed"?n_:kN)(parseInt(j,10),parseInt(tt,10))).getOrThunk(()=>{const j=Fu(h);return LS(j.left,j.top)}),xz=(h,j,tt,st,ut)=>{const mt=ut.bounds,yt=e3(j,tt,st),kt=Zv(yt.left,mt.x,mt.x+mt.width-ut.width),Ot=Zv(yt.top,mt.y,mt.y+mt.height-ut.height),zt=LS(kt,Ot);return j.fold(()=>{const Gt=Jq(zt,tt,st);return kN(Gt.left,Gt.top)},Nt(zt),()=>{const Gt=CN(zt,tt,st);return n_(Gt.left,Gt.top)})},Nre=(h,j,tt,st,ut,mt,yt)=>{const kt=j.fold(()=>{const Ot=tZ(tt,mt.left,mt.top),zt=CN(Ot,st,ut);return n_(zt.left,zt.top)},Ot=>{const zt=nZ(h,Ot,tt,mt,st,ut);return zt.extra.each(Gt=>{Ot.onSensor(h,Gt)}),zt.coord});return xz(h,kt,st,ut,yt)},Lre=(h,j,tt,st)=>{const ut=j.getTarget(h.element);if(j.repositionTarget){const mt=Np(h.element),yt=Ym(mt),kt=nT(ut),Ot=Dre(ut),zt=Nre(h,j.snaps,Ot,yt,kt,st,tt),Gt=eZ(zt,yt,kt);Zl(ut,Gt)}j.onDrag(h,ut,st)},iZ=(h,j)=>({bounds:h.getBounds(),height:V0(j.element),width:Sn(j.element)}),wz=(h,j,tt,st,ut)=>{const mt=tt.update(st,ut),yt=tt.getStartData().getOrThunk(()=>iZ(j,h));mt.each(kt=>{Lre(h,j,yt,kt)})},aZ=(h,j,tt,st)=>{j.each(rZ),tt.snaps.each(mt=>{Are(h,mt)});const ut=tt.getTarget(h.element);st.reset(),tt.onDrop(h,ut)},Cz=h=>(j,tt)=>{const st=ut=>{tt.setStartData(iZ(j,ut))};return yu([Qo(Jx(),ut=>{tt.getStartData().each(()=>st(ut))}),...h(j,tt,st)])},Fre=h=>yu([Qo(gp(),h.forceDrop),Qo(wC(),h.drop),Qo(b0(),(j,tt)=>{h.move(tt.event)}),Qo(xC(),h.delayDrop)]);var zre=Object.freeze({__proto__:null,getData:h=>It.from(Hu(h.x,h.y)),getDelta:(h,j)=>Hu(j.left-h.left,j.top-h.top)});const lZ=(h,j,tt)=>[Qo(gp(),(st,ut)=>{if(ut.event.raw.button!==0)return;ut.stop();const yt=()=>aZ(st,It.some(zt),h,j),kt=RU(yt,200),Ot={drop:yt,delayDrop:kt.schedule,forceDrop:yt,move:Wt=>{kt.cancel(),wz(st,h,j,zre,Wt)}},zt=sZ(st,h.blockerClass,Fre(Ot));(()=>{tt(st),vz(st,zt)})()})],Bre=[..._z,qu("dragger",{handlers:Cz(lZ)})],$re=h=>yu([Qo(uv(),h.forceDrop),Qo(Gl(),h.drop),Qo(tp(),h.drop),Qo(C_(),(j,tt)=>{h.move(tt.event)})]),Gre=h=>{const j=h[0];return It.some(Hu(j.clientX,j.clientY))};var cZ=Object.freeze({__proto__:null,getData:h=>{const tt=h.raw.touches;return tt.length===1?Gre(tt):It.none()},getDelta:(h,j)=>Hu(j.left-h.left,j.top-h.top)});const wM=(h,j,tt)=>{const st=Wl(),ut=mt=>{aZ(mt,st.get(),h,j),st.clear()};return[Qo(uv(),(mt,yt)=>{yt.stop();const kt=()=>ut(mt),Ot={drop:kt,delayDrop:Et,forceDrop:kt,move:Wt=>{wz(mt,h,j,cZ,Wt)}},zt=sZ(mt,h.blockerClass,$re(Ot));st.set(zt),(()=>{tt(mt),vz(mt,zt)})()}),Qo(C_(),(mt,yt)=>{yt.stop(),wz(mt,h,j,cZ,yt.event)}),Qo(Gl(),(mt,yt)=>{yt.stop(),ut(mt)}),Qo(tp(),ut)]},jre=[..._z,qu("dragger",{handlers:Cz(wM)})],Ure=(h,j,tt)=>[...lZ(h,j,tt),...wM(h,j,tt)],Hre=[..._z,qu("dragger",{handlers:Cz(Ure)})];var uZ=Object.freeze({__proto__:null,mouse:Bre,touch:jre,mouseOrTouch:Hre}),Vre=Object.freeze({__proto__:null,init:()=>{let h=It.none(),j=It.none();const tt=()=>{h=It.none(),j=It.none()},st=(Ot,zt)=>{const Gt=h.map(Wt=>Ot.getDelta(Wt,zt));return h=It.some(zt),Gt},ut=(Ot,zt)=>Ot.getData(zt).bind(Gt=>st(Ot,Gt)),mt=Ot=>{j=It.some(Ot)},yt=()=>j,kt=Nt({});return O0({readState:kt,reset:tt,update:ut,getStartData:yt,setStartData:mt})}});const MA=S3({branchKey:"mode",branches:uZ,name:"dragging",active:{events:(h,j)=>h.dragger.handlers(h,j)},extra:{snap:h=>({sensor:h.sensor,range:h.range,output:h.output,extra:It.from(h.extra)})},state:Vre,apis:Mre}),kz=40,SN=kz/2,EN=(h,j,tt,st,ut,mt)=>h.fold(()=>MA.snap({sensor:LS(tt-SN,st-SN),range:Hu(ut,mt),output:LS(It.some(tt),It.some(st)),extra:{td:j}}),yt=>{const kt=tt-SN,Ot=st-SN,zt=kz,Gt=kz,Wt=yt.element.dom.getBoundingClientRect();return MA.snap({sensor:LS(kt,Ot),range:Hu(zt,Gt),output:LS(It.some(tt-Wt.width/2),It.some(st-Wt.height/2)),extra:{td:j}})}),Sz=(h,j,tt)=>{const st=(ut,mt)=>ut.exists(yt=>Vl(yt,mt));return{getSnapPoints:h,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(ut,mt)=>{const yt=mt.td;st(j.get(),yt)||(j.set(yt),tt(yt))},mustSnap:!0}},dZ=h=>nu(Sm.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:gr([MA.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:h}),PI.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),Wre=(h,j)=>{const tt=ls([]),st=ls([]),ut=ls(!1),mt=Wl(),yt=Wl(),kt=Ur=>{const Ko=Nv(Ur);return EN(cn.getOpt(j),Ur,Ko.x,Ko.y,Ko.width,Ko.height)},Ot=()=>On(tt.get(),Ur=>kt(Ur)),zt=Ur=>{const Ko=Nv(Ur);return EN(xn.getOpt(j),Ur,Ko.right,Ko.bottom,Ko.width,Ko.height)},Gt=()=>On(st.get(),Ur=>zt(Ur)),Wt=Sz(Ot,mt,Ur=>{yt.get().each(Ko=>{h.dispatch("TableSelectorChange",{start:Ur,finish:Ko})})}),sn=Sz(Gt,yt,Ur=>{mt.get().each(Ko=>{h.dispatch("TableSelectorChange",{start:Ko,finish:Ur})})}),cn=dZ(Wt),xn=dZ(sn),Mn=km(cn.asSpec()),vo=km(xn.asSpec()),jn=(Ur,Ko,Vr,Dr)=>{const Xr=Ko.dom.getBoundingClientRect();Bs(Ur.element,"display");const Il=im(ro.fromDom(h.getBody())).dom.innerHeight,Ju=Vr(Xr),tu=Dr(Xr,Il);(Ju||tu)&&Xo(Ur.element,"display","none")},po=(Ur,Ko,Vr,Dr)=>{const Xr=Vr(Ko);MA.snapTo(Ur,Xr),jn(Ur,Ko,tu=>tu[Dr]<0,(tu,ns)=>tu[Dr]>ns)},yo=Ur=>po(Mn,Ur,kt,"top"),zo=()=>mt.get().each(yo),$o=Ur=>po(vo,Ur,zt,"bottom"),Cr=()=>yt.get().each($o);if(_i().deviceType.isTouch()){const Ur=Ko=>On(Ko,ro.fromDom);h.on("TableSelectionChange",Ko=>{ut.get()||(yx(j,Mn),yx(j,vo),ut.set(!0));const Vr=ro.fromDom(Ko.start),Dr=ro.fromDom(Ko.finish);mt.set(Vr),yt.set(Dr),It.from(Ko.otherCells).each(Xr=>{tt.set(Ur(Xr.upOrLeftCells)),st.set(Ur(Xr.downOrRightCells)),yo(Vr),$o(Dr)})}),h.on("ResizeEditor ResizeWindow ScrollContent",()=>{zo(),Cr()}),h.on("TableSelectionClear",()=>{ut.get()&&(bx(Mn),bx(vo),ut.set(!1)),mt.clear(),yt.clear()})}};var qre=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const Zre=(h,j)=>{const tt=It.from(Kr(h,"id")).getOrThunk(()=>{const st=Wr("aria");return Vo(j,"id",st),st});Vo(h,"aria-describedby",tt)},Kre=h=>{Kt(h,"aria-describedby")},Yre=h=>h.nodeName==="BR"||!!h.getAttribute("data-mce-bogus")||h.getAttribute("data-mce-type")==="bookmark",Xre=(h,j,tt)=>{var st;const ut=(st=j.delimiter)!==null&&st!==void 0?st:"",mt=(zt,Gt,Wt)=>Sm.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":Wt}},components:[mp(zt)],action:sn=>{h.focus(),h.selection.select(Gt),h.nodeChanged()},buttonBehaviours:gr([Mp.config({...tt.tooltips.getConfig({tooltipText:tt.translate(["Select the {0} element",Gt.nodeName.toLowerCase()]),onShow:(sn,cn)=>{Zre(sn.element,cn.element)},onHide:sn=>{Kre(sn.element)}})}),o1.button(tt.isDisabled),Wp(()=>tt.checkUiComponentContext("any"))])}),yt=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[mp(` ${ut} `)]}),kt=zt=>mo(zt,(Gt,Wt,sn)=>{const cn=mt(Wt.name,Wt.element,sn);return sn===0?Gt.concat([cn]):Gt.concat([yt(),cn])},[]),Ot=zt=>{const Gt=[];let Wt=zt.length;for(;Wt-- >0;){const sn=zt[Wt];if(sn.nodeType===1&&!Yre(sn)){const cn=XG(h,sn);if(cn.isDefaultPrevented()||Gt.push({name:cn.name,element:sn}),cn.isPropagationStopped())break}}return Gt};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:gr([ys.config({mode:"flow",selector:"div[role=button]"}),Rs.config({disabled:tt.isDisabled}),Wp(()=>tt.checkUiComponentContext("any")),op.config({}),Gs.config({}),Ws("elementPathEvents",[ep((zt,Gt)=>{h.shortcuts.add("alt+F11","focus statusbar elementpath",()=>ys.focusIn(zt)),h.on("NodeChange",Wt=>{const sn=Ot(Wt.parents),cn=sn.length>0?kt(sn):[];Gs.set(zt,cn)})})])]),components:[]}};var FS;(function(h){h[h.None=0]="None",h[h.Both=1]="Both",h[h.Vertical=2]="Vertical"})(FS||(FS={}));const Jre=(h,j,tt,st,ut)=>{const mt={height:RA(st+j.top,QE(h),oO(h))};return tt===FS.Both&&(mt.width=RA(ut+j.left,i6(h),eA(h))),mt},fZ=(h,j,tt)=>{const st=ro.fromDom(h.getContainer()),ut=Jre(h,j,tt,fu(st),bn(st));sr(ut,(mt,yt)=>{Rt(mt)&&Xo(st,yt,YI(mt))}),dX(h)},Qre=h=>{const j=P$(h);return j===!1?FS.None:j==="both"?FS.Both:FS.Vertical},AN=(h,j,tt,st)=>{const mt=Hu(tt*20,st*20);return fZ(h,mt,j),It.some(!0)},ese=(h,j)=>{const tt=Qre(h);if(tt===FS.None)return It.none();const st=tt===FS.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return It.some(e1("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":j.translate(st),"data-mce-name":"resize-handle"},behaviours:[MA.config({mode:"mouse",repositionTarget:!1,onDrag:(ut,mt,yt)=>fZ(h,yt,tt),blockerClass:"tox-blocker"}),ys.config({mode:"special",onLeft:()=>AN(h,tt,-1,0),onRight:()=>AN(h,tt,1,0),onUp:()=>AN(h,tt,0,-1),onDown:()=>AN(h,tt,0,1)}),op.config({}),Ds.config({}),Mp.config(j.tooltips.getConfig({tooltipText:j.translate("Resize")}))]},j.icons))},tse=(h,j)=>{const tt=(st,ut,mt)=>Gs.set(st,[mp(j.translate(["{0} "+mt,ut[mt]]))]);return Sm.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:gr([o1.button(j.isDisabled),Wp(()=>j.checkUiComponentContext("any")),op.config({}),Gs.config({}),zr.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Ws("wordcount-events",[ax(st=>{const ut=zr.getValue(st),mt=ut.mode==="words"?"characters":"words";zr.setValue(st,{mode:mt,count:ut.count}),tt(st,ut.count,mt)}),ep(st=>{h.on("wordCountUpdate",ut=>{const{mode:mt}=zr.getValue(st);zr.setValue(st,{mode:mt,count:ut.wordCount}),tt(st,ut.wordCount,mt)})})])]),eventOrder:{[e0()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},hZ=(h,j)=>{const tt=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":h.translate(["Build with {0}","TinyMCE"])},innerHtml:h.translate(["Build with {0}",qre.trim()])},behaviours:gr([Ds.config({})])}]}),st=()=>{const kt=iF("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[mp(W1.translate(["Press {0} for help",kt]))]}},ut=()=>{const kt=[];return h.hasPlugin("wordcount")&&kt.push(tse(h,j)),p6(h)&&kt.push(tt()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:kt}},mt=()=>{const kt=[],Ot=D$(h),zt=M$(h),Gt=p6(h)||h.hasPlugin("wordcount"),Wt=()=>{const sn="tox-statusbar__text-container--flex-start",cn="tox-statusbar__text-container--flex-end",xn="tox-statusbar__text-container--space-around";if(Ot){const Mn="tox-statusbar__text-container-3-cols";return!Gt&&!zt?[Mn,xn]:Gt&&!zt?[Mn,cn]:[Mn,sn]}return[Gt&&!zt?cn:sn]};return zt&&kt.push(Xre(h,{},j)),Ot&&kt.push(st()),Gt&&kt.push(ut()),kt.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...Wt()]},components:kt}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const kt=mt(),Ot=ese(h,j);return kt.concat(Ot.toArray())})()}},pZ=(h,j)=>j.get().getOrDie(`UI for ${h} has not been rendered`),nse=(h,j)=>{const tt=h.inline,st=tt?Roe:uN,ut=mS(h)?Fte:EA,mt=xq(),yt=Wl(),kt=Wl(),Ot=Wl(),sn=_i().deviceType.isTouch()?["tox-platform-touch"]:[],cn=b6(h),xn=gS(h),Mn=nu({dom:{tag:"div",classes:["tox-anchorbar"]}}),vo=nu({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),jn=()=>mt.mainUi.get().map(ms=>ms.outerContainer).bind(Gu.getHeader),po=()=>Ks.fromOption(mt.dialogUi.get().map(ms=>ms.sink),"UI has not been rendered"),yo=()=>Ks.fromOption(mt.popupUi.get().map(ms=>ms.sink),"(popup) UI has not been rendered"),zo=mt.lazyGetInOuterOrDie("anchor bar",Mn.getOpt),$o=mt.lazyGetInOuterOrDie("bottom anchor bar",vo.getOpt),Cr=mt.lazyGetInOuterOrDie("toolbar",Gu.getToolbar),Ur=mt.lazyGetInOuterOrDie("throbber",Gu.getThrobber),Ko=Ste({popup:yo,dialog:po},h,zo,$o),Vr=()=>{const ms={attributes:{[Y4]:cn?nm.BottomToTop:nm.TopToBottom}},Hs=Gu.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Ko.popup,onEscape:()=>{h.focus()}}),Ru=Gu.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Ko.popup.shared.getSink,providers:Ko.popup.shared.providers,onEscape:()=>{h.focus()},onToolbarToggled:Lw=>{hX(h,Lw)},type:xn,lazyToolbar:Cr,lazyHeader:()=>jn().getOrDie("Could not find header element"),...ms}),_u=Gu.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Ko.popup.shared.providers,onEscape:()=>{h.focus()},type:xn}),ev=iR(h),xp=dO(h),c1=cO(h),G0=lO(h),u1=Dr(),d1=ev||xp||c1,W_=()=>ev?[_u]:xp?[Ru]:[],AM=G0?[u1,Hs]:[Hs];return Gu.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(d1?[]:["tox-editor-header--empty"]),...ms},components:Dn([c1?AM:[],W_(),L_(h)?[]:[Mn.asSpec()]]),sticky:mS(h),editor:h,sharedBackstage:Ko.popup.shared})},Dr=()=>Gu.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Xr=()=>{const ms=Gu.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Hs=Gu.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[ms,Hs]}},Il=()=>{const ms=v6(h),Hs=Vl(fo(),ms)&&ru(ms,"display")==="grid",Ru={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(sn),attributes:{...W1.isRtl()?{dir:"rtl"}:{}}},behaviours:gr([s0.config({useFixed:()=>ut.isDocked(jn)})])},_u={dom:{styles:{width:document.body.clientWidth+"px"}},events:yu([Qo(i2(),c1=>{Xo(c1.element,"width",document.body.clientWidth+"px")})])},ev=km(Ou(Ru,Hs?_u:{})),xp=OF(ev);return kt.set(xp),{sink:ev,mothership:xp}},Ju=()=>{const ms={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(sn),attributes:{...W1.isRtl()?{dir:"rtl"}:{}}},behaviours:gr([s0.config({useFixed:()=>ut.isDocked(jn),getBounds:()=>j.getPopupSinkBounds()})])},Hs=km(ms),Ru=OF(Hs);return Ot.set(Ru),{sink:Hs,mothership:Ru}},tu=()=>{const ms=Vr(),Hs=Xr(),Ru=Gu.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Ko.popup}),_u=Gu.parts.viewWrapper({backstage:Ko.popup}),ev=R$(h)&&!tt?It.some(hZ(h,Ko.popup.shared.providers)):It.none(),xp=Dn([cn?[]:[ms],tt?[]:[Hs],cn?[ms]:[]]),c1=Gu.parts.editorContainer({components:Dn([xp,tt?[]:[vo.asSpec()]])}),G0=_6(h),u1={role:"application",...W1.isRtl()?{dir:"rtl"}:{},...G0?{"aria-hidden":"true"}:{}},d1=km(Gu.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(tt?["tox-tinymce-inline"]:[]).concat(cn?["tox-tinymce--toolbar-bottom"]:[]).concat(sn),styles:{visibility:"hidden",...G0?{opacity:"0",border:"0"}:{}},attributes:u1},components:[c1,...tt?[]:[_u,...ev.toArray()],Ru],behaviours:gr([Wp(()=>Ko.popup.shared.providers.checkUiComponentContext("any")),Rs.config({disableClass:"tox-tinymce--disabled"}),ys.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),W_=OF(d1);return yt.set(W_),{mothership:W_,outerContainer:d1}},ns=ms=>{const Hs=YI(Aoe(h)),Ru=YI(Toe(h));return h.inline||(H0("div","width",Ru)&&Xo(ms.element,"width",Ru),H0("div","height",Hs)?Xo(ms.element,"height",Hs):Xo(ms.element,"height","400px")),Hs},ur=ms=>{h.addShortcut("alt+F9","focus menubar",()=>{Gu.focusMenubar(ms)}),h.addShortcut("alt+F10","focus toolbar",()=>{Gu.focusToolbar(ms)}),h.addCommand("ToggleToolbarDrawer",(Hs,Ru)=>{Ru!=null&&Ru.skipFocus?Gu.toggleToolbarDrawerWithoutFocusing(ms):Gu.toggleToolbarDrawer(ms)}),h.addQueryStateHandler("ToggleToolbarDrawer",()=>Gu.isToolbarDrawerToggled(ms))},Pr=ms=>{const{mainUi:Hs,popupUi:Ru,uiMotherships:_u}=ms;vr(l6(h),(BA,Gz)=>{h.ui.registry.addGroupToolbarButton(Gz,BA)});const{buttons:ev,menuItems:xp,contextToolbars:c1,sidebars:G0,views:u1}=h.ui.registry.getAll(),d1=fO(h),W_={menuItems:xp,menus:L$(h),menubar:E$(h),toolbar:d1.getOrThunk(()=>sO(h)),allowToolbarGroups:xn===Qv.floating,buttons:ev,sidebar:G0,views:u1};ur(Hs.outerContainer),ZV(h,Hs.mothership,_u),ut.setup(h,Ko.popup.shared,jn),Bq(h,Ko.popup),Xq(h,Ko.popup.shared.getSink,Ko.popup),p9(h),lW(h,Ur,Ko.popup.shared),Pq(h,c1,Ru.sink,{backstage:Ko.popup}),Wre(h,Ru.sink);const AM=h.getElement(),Lw=ns(Hs.outerContainer),$z={targetNode:AM,height:Lw};return st.render(h,ms,W_,Ko.popup,$z)},zs=ms=>(Ot.set(ms.mothership),ms),Qs=()=>{const ms=tu(),Hs=Il(),Ru=Y2(h)?Ju():zs(Hs);mt.dialogUi.set(Hs),mt.popupUi.set(Ru),mt.mainUi.set(ms);const _u={popupUi:Ru,dialogUi:Hs,mainUi:ms,uiMotherships:mt.getUiMotherships()};return Pr(_u)};return{popups:{backstage:Ko.popup,getMothership:()=>pZ("popups",Ot)},dialogs:{backstage:Ko.dialog,getMothership:()=>pZ("dialogs",kt)},renderUI:Qs}},ose=h=>h.dom.textContent,rse=(h,j)=>{const tt=Os(h,"id").fold(()=>{const st=Wr("dialog-label");return Vo(j,"id",st),st},Jt);Vo(h,"aria-labelledby",tt)},sse=Nt([Jo("lazySink"),Kl("dragBlockClass"),Wu("getBounds",zp),ko("useTabstopAt",fn),ko("firstTabstop",0),ko("eventOrder",{}),Bm("modalBehaviours",[ys]),v0("onExecute"),zC("onEscape")]),Ez={sketch:Jt},ise=Nt([Zy({name:"draghandle",overrides:(h,j)=>({behaviours:gr([MA.config({mode:"mouse",getTarget:tt=>pm(tt,'[role="dialog"]').getOr(tt),blockerClass:h.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(j,null,2)).message),getBounds:h.getDragBounds})])})}),x0({schema:[Jo("dom")],name:"title"}),x0({factory:Ez,schema:[Jo("dom")],name:"close"}),x0({factory:Ez,schema:[Jo("dom")],name:"body"}),Zy({factory:Ez,schema:[Jo("dom")],name:"footer"}),_v({factory:{sketch:(h,j)=>({...h,dom:j.dom,components:j.components})},schema:[ko("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ko("components",[])],name:"blocker"})]),ase=(h,j,tt,st)=>{const ut=Wl(),mt=xn=>{ut.set(xn);const Mn=h.lazySink(xn).getOrDie(),vo=st.blocker(),jn=Mn.getSystem().build({...vo,components:vo.components.concat([Uy(xn)]),behaviours:gr([Ds.config({}),Ws("dialog-blocker-events",[ew(K0(),()=>{Px.isBlocked(xn)?Et():ys.focusIn(xn)})])])});yx(Mn,jn),ys.focusIn(xn)},yt=xn=>{ut.clear(),Yp(xn.element).each(Mn=>{xn.getSystem().getByDom(Mn).each(vo=>{bx(vo)})})},kt=xn=>Br(xn,h,"body"),Ot=xn=>Du(xn,h,"footer"),zt=(xn,Mn)=>{Px.block(xn,Mn)},Gt=xn=>{Px.unblock(xn)},Wt=Wr("modal-events"),sn={...h.eventOrder,[fy()]:[Wt].concat(h.eventOrder["alloy.system.attached"]||[])},cn=_i();return{uid:h.uid,dom:h.dom,components:j,apis:{show:mt,hide:yt,getBody:kt,getFooter:Ot,setIdle:Gt,setBusy:zt},eventOrder:sn,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:$m(h.modalBehaviours,[Gs.config({}),ys.config({mode:"cyclic",onEnter:h.onExecute,onEscape:h.onEscape,useTabstopAt:h.useTabstopAt,firstTabstop:h.firstTabstop}),Px.config({getRoot:ut.get}),Ws(Wt,[ep(xn=>{const Mn=Br(xn,h,"title").element,vo=ose(Mn);cn.os.isMacOS()&&wt(vo)?Vo(xn.element,"aria-label",vo):rse(xn.element,Mn)})])])}},Am=d0({name:"ModalDialog",configFields:sse(),partFields:ise(),factory:ase,apis:{show:(h,j)=>{h.show(j)},hide:(h,j)=>{h.hide(j)},getBody:(h,j)=>h.getBody(j),getFooter:(h,j)=>h.getFooter(j),setBusy:(h,j,tt)=>{h.setBusy(j,tt)},setIdle:(h,j)=>{h.setIdle(j)}}}),gZ=vs([om,W6].concat(wS)),lse=By,CM=[LO("button"),n1,wm("align","end",["start","end"]),NO,B_,yC("buttonType",["primary","secondary"]),Rp("context","mode:design")],Az=[...CM,X2],Tz=[Jm("type",["submit","cancel","custom"]),...Az],cse=[Jm("type",["menu"]),J2,wR,n1,dy("items",gZ),...CM],use=[...CM,Jm("type",["togglebutton"]),wR,n1,J2,em("active",!1)],dse=Sp("type",{submit:Tz,cancel:Tz,custom:Tz,menu:cse,togglebutton:use}),fse=[om,X2,Jm("level",["info","warn","error","success"]),wG,ko("url","")],hse=vs(fse),n3=h=>[om,h],pse=[om,X2,B_,LO("button"),n1,NY,yC("buttonType",["primary","secondary","toolbar"]),NO,Rp("context","mode:design")],gse=vs(pse),o3=[om,W6],Ox=o3.concat([Z6]),mse=o3.concat([q6,B_,Rp("context","mode:design")]),yse=vs(mse),bse=By,Iz=Ox.concat([AG("auto"),Rp("context","mode:design")]),kM=vs(Iz),Rz=KS([rA,X2,wG]),TN=Ox.concat([Rp("storageKey","default"),Rp("context","mode:design")]),PA=vs(TN),IN=Nr,mZ=vs(Ox),yZ=Nr,bZ=o3.concat([Rp("tag","textarea"),Qp("scriptId"),Qp("scriptUrl"),cv("onFocus"),vC("settings",void 0)]),vse=o3.concat([Rp("tag","textarea"),_y("init")]),_se=Yw(h=>cp("customeditor.old",cy(vse),h).orThunk(()=>cp("customeditor.new",cy(bZ),h))),xse=Nr,vZ=Ox.concat([Rp("context","mode:design")]),_Z=vs(vZ),Mz=T1(),wse=h=>[om,Jw("columns"),h],Cse=[om,Qp("html"),wm("presets","presentation",["presentation","document"]),Wu("onInit",Et),em("stretched",!1)],kse=vs(Cse),xZ=Ox.concat([em("border",!1),em("sandboxed",!0),em("streamContent",!1),em("transparent",!0)]),Sse=vs(xZ),Ese=Nr,Ase=vs(o3.concat([_g("height")])),Pz=vs([Qp("url"),Qw("zoom"),Qw("cachedWidth"),Qw("cachedHeight")]),Oz=Ox.concat([_g("inputMode"),_g("placeholder"),em("maximized",!1),B_,Rp("context","mode:design")]),Tse=vs(Oz),wZ=Nr,Ise=h=>[om,q6,h,wm("align","start",["start","center","end"]),_g("for")],Rse=[X2,rA],CZ=[X2,dy("items",qx("items",()=>kZ))],kZ=ZS([vs(Rse),vs(CZ)]),Mse=Ox.concat([dy("items",kZ),B_,Rp("context","mode:design")]),OA=vs(Mse),SZ=Nr,Pse=Ox.concat([XS("items",[X2,rA]),bC("size",1),B_,Rp("context","mode:design")]),RN=vs(Pse),r3=Nr,MN=Ox.concat([em("constrain",!0),B_,Rp("context","mode:design")]),EZ=vs(MN),SM=vs([Qp("width"),Qp("height")]),Jy=o3.concat([q6,bC("min",0),bC("max",0)]),PN=vs(Jy),AZ=ox,TZ=[om,dy("header",Nr),dy("cells",uy(Nr))],Ose=vs(TZ),Dse=Ox.concat([_g("placeholder"),em("maximized",!1),B_,Rp("context","mode:design")]),zS=vs(Dse),gae=Nr,IZ=[Jm("type",["directory","leaf"]),xG,Qp("id"),Uv("menu",f9),_g("customStateIcon"),_g("customStateIconTooltip")],DA=vs(IZ),ON=IZ.concat([dy("children",qx("children",()=>rx("type",{directory:Dz,leaf:DA})))]),Dz=vs(ON),Lse=rx("type",{directory:Dz,leaf:DA}),Fse=[om,dy("items",Lse),cv("onLeafAction"),cv("onToggleExpand"),x_("defaultExpandedIds",[],Nr),_g("defaultSelectedId")],zse=vs(Fse),Bse=Ox.concat([wm("filetype","file",["image","media","file"]),B_,_g("picker_text"),Rp("context","mode:design")]),s3=vs(Bse),mae=vs([rA,Y6]),Nz=h=>fm("items","items",g0(),uy(Yw(j=>cp(`Checking item of ${h}`,Lz,j).fold(tt=>Ks.error(sx(tt)),tt=>Ks.value(tt))))),Lz=dm(()=>rx("type",{alertbanner:hse,bar:vs(n3(Nz("bar"))),button:gse,checkbox:yse,colorinput:PA,colorpicker:mZ,dropzone:_Z,grid:vs(wse(Nz("grid"))),iframe:Sse,input:Tse,listbox:OA,selectbox:RN,sizeinput:EZ,slider:PN,textarea:zS,urlinput:s3,customeditor:_se,htmlpanel:kse,imagepreview:Ase,collection:kM,label:vs(Ise(Nz("label"))),table:Ose,tree:zse,panel:RZ})),yae=[om,ko("classes",[]),dy("items",Lz)],RZ=vs(yae),$se=[LO("tab"),xG,dy("items",Lz)],EM=[om,XS("tabs",$se)],Gse=vs(EM),jse=Az,MZ=dse,Use=vs([Qp("title"),Ql("body",rx("type",{panel:RZ,tabpanel:Gse})),Rp("size","normal"),x_("buttons",[],MZ),ko("initialData",{}),Wu("onAction",Et),Wu("onChange",Et),Wu("onSubmit",Et),Wu("onClose",Et),Wu("onCancel",Et),Wu("onTabChange",Et)]),bae=h=>cp("dialog",Use,h),c=vs([Jm("type",["cancel","custom"]),...jse]),g=vs([Qp("title"),Qp("url"),Qw("height"),Qw("width"),e2("buttons",c),Wu("onAction",Et),Wu("onCancel",Et),Wu("onClose",Et),Wu("onMessage",Et)]),$=h=>cp("dialog",g,h),et=h=>nt(h)?[h].concat(rn(Ml(h),et)):ct(h)?rn(h,et):[],ot=h=>_e(h.type)&&_e(h.name),at={checkbox:bse,colorinput:IN,colorpicker:yZ,dropzone:Mz,input:wZ,iframe:Ese,imagepreview:Pz,selectbox:r3,sizeinput:SM,slider:AZ,listbox:SZ,size:SM,textarea:gae,urlinput:mae,customeditor:xse,collection:Rz,togglemenuitem:lse},ht=h=>It.from(at[h.type]),_t=h=>lo(et(h),ot),St=h=>{const j=_t(h),tt=rn(j,st=>ht(st).fold(()=>[],ut=>[Ql(st.name,ut)]));return vs(tt)},Lt=h=>{var j;const tt=dr(bae(h)),st=St(h),ut=(j=h.initialData)!==null&&j!==void 0?j:{};return{internalDialog:tt,dataValidator:st,initialData:ut}},Ht={open:(h,j)=>{const tt=Lt(j);return h(tt.internalDialog,tt.initialData,tt.dataValidator)},openUrl:(h,j)=>{const tt=dr($(j));return h(tt)},redial:h=>Lt(h)};var Qt=Object.freeze({__proto__:null,events:(h,j)=>{const tt=(st,ut)=>{h.updateState.each(mt=>{const yt=mt(st,ut);j.set(yt)}),h.renderComponents.each(mt=>{const yt=mt(ut,j.get());(h.reuseDom?gI:YB)(st,yt)})};return yu([Qo(O1(),(st,ut)=>{const mt=ut;if(!mt.universal){const yt=h.channel;Wn(mt.channels,yt)&&tt(st,mt.data)}}),ep((st,ut)=>{h.initialData.each(mt=>{tt(st,mt)})})])}}),kn=Object.freeze({__proto__:null,getState:(h,j,tt)=>tt}),yn=[Jo("channel"),Kl("renderComponents"),Kl("updateState"),Kl("initialData"),em("reuseDom",!0)],so=Object.freeze({__proto__:null,init:()=>{const h=ls(It.none()),j=()=>h.set(It.none());return{readState:()=>h.get().getOr("none"),get:h.get,set:h.set,clear:j}}});const ho=Fm({fields:yn,name:"reflecting",active:Qt,apis:kn,state:so}),xo=h=>{const j=[],tt={};return sr(h,(st,ut)=>{st.fold(()=>{j.push(ut)},mt=>{tt[ut]=mt})}),j.length>0?Ks.error(j):Ks.value(tt)},To=(h,j,tt,st)=>{const ut=nu(xA.sketch(mt=>({dom:{tag:"div",classes:["tox-form"].concat(h.classes)},components:On(h.items,yt=>Vee(mt,yt,j,tt,st))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[ut.asSpec()]}],behaviours:gr([ys.config({mode:"acyclic",useTabstopAt:an(QR)}),X1.memento(ut),TQ(ut,{postprocess:mt=>xo(mt).fold(yt=>(console.error(yt),{}),Jt)}),Ws("dialog-body-panel",[Qo(K0(),(mt,yt)=>{mt.getSystem().broadcastOn([xD],{newFocus:It.some(yt.event.target)})})])])}},or=(h,j)=>({uid:h.uid,dom:h.dom,components:h.components,events:nR(h.action),behaviours:$m(h.tabButtonBehaviours,[Ds.config({}),ys.config({mode:"execution",useSpace:!0,useEnter:!0}),zr.config({store:{mode:"memory",initialValue:h.value}})]),domModification:h.domModification}),mr=Ty({name:"TabButton",configFields:[ko("uid",void 0),Jo("value"),fm("dom","dom",Vx(()=>({attributes:{role:"tab",id:Wr("aria"),"aria-selected":"false"}})),zy()),Kl("action"),ko("domModification",{}),Bm("tabButtonBehaviours",[Ds,ys,zr]),Jo("view")],factory:or}),$r=Nt([Jo("tabs"),Jo("dom"),ko("clickToDismiss",!1),Bm("tabbarBehaviours",[kr,ys]),fx(["tabClass","selectedClass"])]),Zo=GE({factory:mr,name:"tabs",unit:"tab",overrides:h=>{const j=(st,ut)=>{kr.dehighlight(st,ut),rs(st,zM(),{tabbar:st,button:ut})},tt=(st,ut)=>{kr.highlight(st,ut),rs(st,FM(),{tabbar:st,button:ut})};return{action:st=>{const ut=st.getSystem().getByUid(h.uid).getOrDie(),mt=kr.isHighlighted(ut,st);(mt&&h.clickToDismiss?j:mt?Et:tt)(ut,st)},domModification:{classes:[h.markers.tabClass]}}}}),Lo=Nt([Zo]),ir=(h,j,tt,st)=>({uid:h.uid,dom:h.dom,components:j,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:$m(h.tabbarBehaviours,[kr.config({highlightClass:h.markers.selectedClass,itemClass:h.markers.tabClass,onHighlight:(ut,mt)=>{Vo(mt.element,"aria-selected","true")},onDehighlight:(ut,mt)=>{Vo(mt.element,"aria-selected","false")}}),ys.config({mode:"flow",getInitial:ut=>kr.getHighlighted(ut).map(mt=>mt.element),selector:"."+h.markers.tabClass,executeOnMove:!0})])}),Gr=d0({name:"Tabbar",configFields:$r(),partFields:Lo(),factory:ir}),gs=(h,j)=>({uid:h.uid,dom:h.dom,behaviours:$m(h.tabviewBehaviours,[Gs.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Cl=Ty({name:"Tabview",configFields:[Bm("tabviewBehaviours",[Gs])],factory:gs}),Sl=Nt([ko("selectFirst",!0),zl("onChangeTab"),zl("onDismissTab"),ko("tabs",[]),Bm("tabSectionBehaviours",[])]),au=x0({factory:Gr,schema:[Jo("dom"),__("markers",[Jo("tabClass"),Jo("selectedClass")])],name:"tabbar",defaults:h=>({tabs:h.tabs})}),Cu=x0({factory:Cl,name:"tabview"}),jp=Nt([au,Cu]),k0=(h,j,tt,st)=>{const ut=yt=>{const kt=zr.getValue(yt);Du(yt,h,"tabview").each(Ot=>{mn(h.tabs,Gt=>Gt.value===kt).each(Gt=>{const Wt=Gt.view();Os(yt.element,"id").each(sn=>{Vo(Ot.element,"aria-labelledby",sn)}),Gs.set(Ot,Wt),h.onChangeTab(Ot,yt,Wt)})})},mt=(yt,kt)=>{Du(yt,h,"tabbar").each(Ot=>{kt(Ot).each(Qx)})};return{uid:h.uid,dom:h.dom,components:j,behaviours:ZT(h.tabSectionBehaviours),events:yu(Dn([h.selectFirst?[ep((yt,kt)=>{mt(yt,kr.getFirst)})]:[],[Qo(FM(),(yt,kt)=>{const Ot=kt.event.button;ut(Ot)}),Qo(zM(),(yt,kt)=>{const Ot=kt.event.button;h.onDismissTab(yt,Ot)})]])),apis:{getViewItems:yt=>Du(yt,h,"tabview").map(kt=>Gs.contents(kt)).getOr([]),showTab:(yt,kt)=>{mt(yt,zt=>{const Gt=kr.getCandidates(zt);return mn(Gt,sn=>zr.getValue(sn)===kt).filter(sn=>!kr.isHighlighted(zt,sn))})}}}},qp=d0({name:"TabSection",configFields:Sl(),partFields:jp(),factory:k0,apis:{getViewItems:(h,j)=>h.getViewItems(j),showTab:(h,j,tt)=>{h.showTab(j,tt)}}}),Er=(h,j,tt)=>On(h,(st,ut)=>{Gs.set(tt,h[ut].view());const mt=j.dom.getBoundingClientRect();return Gs.set(tt,[]),mt.height}),ds=h=>bo(Tn(h,(j,tt)=>j>tt?-1:j<tt?1:0)),_c=(h,j,tt)=>{const st=ry(h).dom,ut=pm(h,".tox-dialog-wrap").getOr(h),mt=ru(ut,"position")==="fixed";let yt;mt?yt=Math.max(st.clientHeight,window.innerHeight):yt=Math.max(st.offsetHeight,st.scrollHeight);const kt=fu(j),zt=j.dom.offsetLeft>=tt.dom.offsetLeft+bn(tt)?Math.max(fu(tt),kt):kt,Gt=parseInt(ru(h,"margin-top"),10)||0,Wt=parseInt(ru(h,"margin-bottom"),10)||0,cn=fu(h)+Gt+Wt-zt;return yt-cn},Lr=(h,j)=>{bo(h).each(tt=>qp.showTab(j,tt.value))},Ts=(h,j)=>{Xo(h,"height",j+"px"),Xo(h,"flex-basis",j+"px")},Is=(h,j,tt)=>{pm(h,'[role="dialog"]').each(st=>{np(st,'[role="tablist"]').each(ut=>{tt.get().map(mt=>(Xo(j,"height","0"),Xo(j,"flex-basis","0"),Math.min(mt,_c(st,j,ut)))).each(mt=>{Ts(j,mt)})})})},Mr=h=>np(h,'[role="tabpanel"]'),El=h=>{const j=Wl();return{extraEvents:[ep(ut=>{const mt=ut.element;Mr(mt).each(yt=>{Xo(yt,"visibility","hidden"),ut.getSystem().getByDom(yt).toOptional().each(kt=>{const Ot=Er(h,yt,kt);ds(Ot).fold(j.clear,j.set)}),Is(mt,yt,j),Bs(yt,"visibility"),Lr(h,ut),requestAnimationFrame(()=>{Is(mt,yt,j)})})}),Qo(i2(),ut=>{const mt=ut.element;Mr(mt).each(yt=>{Is(mt,yt,j)})}),Qo(zU,(ut,mt)=>{const yt=ut.element;Mr(yt).each(kt=>{const Ot=P_(hp(kt));Xo(kt,"visibility","hidden");const zt=du(kt,"height").map(sn=>parseInt(sn,10));Bs(kt,"height"),Bs(kt,"flex-basis");const Gt=kt.dom.getBoundingClientRect().height;zt.forall(sn=>Gt>sn)?(j.set(Gt),Is(yt,kt,j)):zt.each(sn=>{Ts(kt,sn)}),Bs(kt,"visibility"),Ot.each(mv)})})],selectFirst:!1}},Ol="send-data-to-section",vm="send-data-to-view",Lu=(h,j,tt,st)=>{const ut=ls({}),mt=Gt=>{const Wt=zr.getValue(Gt),sn=xo(Wt).getOr({}),cn=ut.get(),xn=Ou(cn,sn);ut.set(xn)},yt=Gt=>{const Wt=ut.get();zr.setValue(Gt,Wt)},kt=ls(null),Ot=On(h.tabs,Gt=>({value:Gt.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[mp(tt.shared.providers.translate(Gt.title))],view:()=>[xA.sketch(Wt=>({dom:{tag:"div",classes:["tox-form"]},components:On(Gt.items,sn=>Vee(Wt,sn,j,tt,st)),formBehaviours:gr([ys.config({mode:"acyclic",useTabstopAt:an(QR)}),Ws("TabView.form.events",[ep(yt),S_(mt)]),ky.config({channels:Ys([{key:Ol,value:{onReceive:mt}},{key:vm,value:{onReceive:yt}}])})])}))]})),zt=El(Ot);return qp.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(Gt,Wt,sn)=>{const cn=zr.getValue(Wt);rs(Gt,FU,{name:cn,oldName:kt.get()}),kt.set(cn)},tabs:Ot,components:[qp.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Gr.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:gr([op.config({})])}),qp.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:zt.selectFirst,tabSectionBehaviours:gr([Ws("tabpanel",zt.extraEvents),ys.config({mode:"acyclic"}),Ll.config({find:Gt=>bo(qp.getViewItems(Gt))}),wA(It.none(),Gt=>(Gt.getSystem().broadcastOn([Ol],{}),ut.get()),(Gt,Wt)=>{ut.set(Wt),Gt.getSystem().broadcastOn([vm],{})})])})},S0=(h,j,tt,st,ut,mt)=>{const yt=zt=>{const Gt=zt.body;switch(Gt.type){case"tabpanel":return[Lu(Gt,zt.initialData,st,mt)];default:return[To(Gt,zt.initialData,st,mt)]}},kt=(zt,Gt)=>It.some({isTabPanel:()=>Gt.body.type==="tabpanel"}),Ot={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...tt.map(zt=>({id:zt})).getOr({}),...ut?Ot:{}}},components:[],behaviours:gr([X1.childAt(0),ho.config({channel:`${b7}-${j}`,updateState:kt,renderComponents:yt,initialData:h})])}},Qy=(h,j,tt,st,ut,mt)=>S0(h,j,It.some(tt),st,ut,mt),Dx=(h,j,tt,st)=>{const ut=S0(h,j,It.none(),tt,!1,st);return Am.parts.body(ut)},oy=h=>{const j={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[m7(It.none(),{dom:{tag:"iframe",attributes:{src:h.url}},behaviours:gr([op.config({}),Ds.config({})])})]}],behaviours:gr([ys.config({mode:"acyclic",useTabstopAt:an(QR)})])};return Am.parts.body(j)},l1=JE.deviceType.isTouch(),o_=(h,j)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[h,j]}),B0=(h,j)=>Am.parts.close(Sm.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":j.translate("Close")}},action:h,buttonBehaviours:gr([op.config({})])})),_b=()=>Am.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),us=(h,j)=>Am.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:xx(`<p>${Z$(j.translate(h))}</p>`)}]}]}),Hl=h=>Am.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:h}),Pp=(h,j)=>[Tx.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:h}),Tx.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:j})],_m=h=>{const j="tox-dialog",tt=j+"-wrap",st=tt+"__backdrop",ut=j+"__disable-scroll";return Am.sketch({lazySink:h.lazySink,onEscape:mt=>(h.onEscape(mt),It.some(!0)),useTabstopAt:mt=>!QR(mt),firstTabstop:h.firstTabstop,dom:{tag:"div",classes:[j].concat(h.extraClasses),styles:{position:"relative",...h.extraStyles}},components:[h.header,h.body,...h.footer.toArray()],parts:{blocker:{dom:xx(`<div class="${tt}"></div>`),components:[{dom:{tag:"div",classes:l1?[st,st+"--opaque"]:[st]}}]}},dragBlockClass:tt,modalBehaviours:gr([Ds.config({}),Ws("dialog-events",h.dialogEvents.concat([ew(K0(),(mt,yt)=>{Px.isBlocked(mt)?Et():ys.focusIn(mt)}),Qo(tE(),(mt,yt)=>{mt.getSystem().broadcastOn([xD],{newFocus:yt.event.newFocus})})])),Ws("scroll-lock",[ep(()=>{Vp(fo(),ut)}),S_(()=>{bu(fo(),ut)})]),...h.extraBehaviours]),eventOrder:{[e0()]:["dialog-events"],[fy()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Gy()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...h.eventOrder}})},Um=h=>Sm.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":h.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:gr([op.config({}),Mp.config(h.tooltips.getConfig({tooltipText:h.translate("Close")}))]),components:[e1("close",{tag:"span",classes:["tox-icon"]},h.icons)],action:j=>{wl(j,AS)}}),xm=(h,j,tt,st)=>{const ut=mt=>[mp(st.translate(mt.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...tt.map(mt=>({id:mt})).getOr({})}},components:[],behaviours:gr([ho.config({channel:`${DH}-${j}`,initialData:h,renderComponents:ut})])}},_p=()=>({dom:xx('<div class="tox-dialog__draghandle"></div>')}),Ep=(h,j,tt,st)=>Tx.sketch({dom:xx('<div class="tox-dialog__header"></div>'),components:[xm(h,j,It.some(tt),st),_p(),Um(st)],containerBehaviours:gr([MA.config({mode:"mouse",blockerClass:"blocker",getTarget:ut=>R_(ut,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Oy=(h,j,tt)=>{const st=Am.parts.title(xm(h,j,It.none(),tt)),ut=Am.parts.draghandle(_p()),mt=Am.parts.close(Um(tt)),yt=[st].concat(h.draggable?[ut]:[]).concat([mt]);return Tx.sketch({dom:xx('<div class="tox-dialog__header"></div>'),components:yt})},r_=(h,j,tt)=>Oy({title:tt.shared.providers.translate(h),draggable:tt.dialog.isDraggableModal()},j,tt.shared.providers),Nx=(h,j,tt,st)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":tt.translate(h)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${st.getOr(0)}px`,position:"absolute"}},behaviours:j,components:[{dom:xx('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),V_=(h,j,tt)=>({onClose:()=>tt.closeWindow(),onBlock:st=>{const ut=np(h().element,".tox-dialog__header").map(mt=>fu(mt));Am.setBusy(h(),(mt,yt)=>Nx(st.message,yt,j,ut))},onUnblock:()=>{Am.setIdle(h())}}),NA="tox-dialog--fullscreen",BS="tox-dialog--width-lg",sC="tox-dialog--width-md",Tv=h=>{switch(h){case"large":return It.some(BS);case"medium":return It.some(sC);default:return It.none()}},iC=(h,j)=>{const tt=ro.fromDom(j.element.dom);X0(tt,NA)||(N1(tt,[BS,sC]),Tv(h).each(st=>Vp(tt,st)))},i3=(h,j)=>{const tt=ro.fromDom(h.element.dom),st=HM(tt),ut=mn(st,mt=>mt===BS||mt===sC).or(Tv(j));Jz(tt,[NA,...ut.toArray()])},LA=(h,j,tt)=>km(_m({...h,firstTabstop:1,lazySink:tt.shared.getSink,extraBehaviours:[XR({}),...h.extraBehaviours],onEscape:st=>{wl(st,AS)},dialogEvents:j,eventOrder:{[O1()]:[ho.name(),ky.name()],[fy()]:["scroll-lock",ho.name(),"messages","dialog-events","alloy.base.behaviour"],[Gy()]:["alloy.base.behaviour","dialog-events","messages",ho.name(),"scroll-lock"]}})),DN=(h,j={})=>{const tt=st=>{const ut=On(st.items,mt=>{const yt=tr(j,mt.name).getOr(ls(!1));return{...mt,storage:yt}});return{...st,items:ut}};return On(h,st=>st.type==="menu"?tt(st):st)},FA=h=>mo(h,(j,tt)=>tt.type==="menu"?mo(tt.items,(ut,mt)=>(ut[mt.name]=mt.storage,ut),j):j,{}),Fz=(h,j)=>[JA(K0(),FQ),h(GR,(tt,st,ut,mt)=>{T2(mt.element)&&P_(hp(mt.element)).each(VC),j.onClose(),st.onClose()}),h(AS,(tt,st,ut,mt)=>{st.onCancel(tt),wl(mt,GR)}),Qo(LF,(tt,st)=>j.onUnblock()),Qo(rD,(tt,st)=>j.onBlock(st.event))],PZ=(h,j)=>{const tt=(ut,mt)=>Qo(ut,(yt,kt)=>{st(yt,(Ot,zt)=>{mt(h(),Ot,kt.event,yt)})}),st=(ut,mt)=>{ho.getState(ut).get().each(yt=>{mt(yt,ut)})};return[...Fz(tt,j),tt(Rw,(ut,mt,yt)=>{mt.onAction(ut,{name:yt.name})})]},$0=(h,j,tt)=>{const st=(mt,yt)=>Qo(mt,(kt,Ot)=>{ut(kt,(zt,Gt)=>{yt(h(),zt,Ot.event,kt)})}),ut=(mt,yt)=>{ho.getState(mt).get().each(kt=>{yt(kt.internalDialog,mt)})};return[...Fz(st,j),st(MI,(mt,yt)=>yt.onSubmit(mt)),st(Yy,(mt,yt,kt)=>{yt.onChange(mt,{name:kt.name})}),st(Rw,(mt,yt,kt,Ot)=>{const zt=()=>Ot.getSystem().isConnected()?ys.focusIn(Ot):void 0,Gt=cn=>Pu(cn,"disabled")||Os(cn,"aria-disabled").exists(xn=>xn==="true"),Wt=hp(Ot.element),sn=P_(Wt);yt.onAction(mt,{name:kt.name,value:kt.value}),P_(Wt).fold(zt,cn=>{Gt(cn)||sn.exists(xn=>Dp(cn,xn)&&Gt(xn))?zt():tt().toOptional().filter(xn=>!Dp(xn.element,cn)).each(zt)})}),st(FU,(mt,yt,kt)=>{yt.onTabChange(mt,{newTabName:kt.name,oldTabName:kt.oldName})}),S_(mt=>{const yt=h();zr.setValue(mt,yt.getData())})]},s_=(h,j)=>$I(h,h.type,j),NN=(h,j,tt)=>mn(j,st=>st.name===tt).bind(st=>st.memento.getOpt(h)),No=(h,j)=>{const tt=j.map(kt=>kt.footerButtons).getOr([]),st=jr(tt,kt=>kt.align==="start"),ut=(kt,Ot)=>Tx.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${kt}`]},components:On(Ot,zt=>zt.memento.asSpec())}),mt=ut("start",st.pass),yt=ut("end",st.fail);return[mt,yt]},Do=(h,j,tt)=>{const st=(ut,mt)=>{const yt=On(mt.buttons,Ot=>{const zt=nu(s_(Ot,tt));return{name:Ot.name,align:Ot.align,memento:zt}}),kt=Ot=>NN(ut,yt,Ot);return It.some({lookupByName:kt,footerButtons:yt})};return{dom:xx('<div class="tox-dialog__footer"></div>'),components:[],behaviours:gr([ho.config({channel:`${NH}-${j}`,initialData:h,updateState:st,renderComponents:No})])}},Ar=(h,j,tt)=>Do(h,j,tt),br=(h,j,tt)=>Am.parts.footer(Do(h,j,tt)),Es=(h,j)=>{if(h.getRoot().getSystem().isConnected()){const st=Ll.getCurrent(h.getFormWrapper()).getOr(h.getFormWrapper());return xA.getField(st,j).orThunk(()=>h.getFooter().bind(yt=>ho.getState(yt).get()).bind(yt=>yt.lookupByName(j)))}else return It.none()},eu=(h,j)=>{const tt=h.getRoot();return ho.getState(tt).get().map(st=>dr(cp("data",st.dataValidator,j))).getOr(j)},Op=(h,j,tt)=>{const st=xn=>{const Mn=h.getRoot();Mn.getSystem().isConnected()&&xn(Mn)},cn={getData:()=>{const xn=h.getRoot(),Mn=xn.getSystem().isConnected()?h.getFormWrapper():xn,vo=zr.getValue(Mn),jn=vr(tt,po=>po.get());return{...vo,...jn}},setData:xn=>{st(Mn=>{const vo=cn.getData(),jn=Ou(vo,xn),po=eu(h,jn),yo=h.getFormWrapper();zr.setValue(yo,po),sr(tt,(zo,$o)=>{Ms(jn,$o)&&zo.set(jn[$o])})})},setEnabled:(xn,Mn)=>{Es(h,xn).each(Mn?Rs.enable:Rs.disable)},focus:xn=>{Es(h,xn).each(Ds.focus)},block:xn=>{if(!_e(xn))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");st(Mn=>{rs(Mn,rD,{message:xn})})},unblock:()=>{st(xn=>{wl(xn,LF)})},showTab:xn=>{st(Mn=>{const vo=h.getBody();ho.getState(vo).get().exists(po=>po.isTabPanel())&&Ll.getCurrent(vo).each(po=>{qp.showTab(po,xn)})})},redial:xn=>{st(Mn=>{const vo=h.getId(),jn=j(xn),po=DN(jn.internalDialog.buttons,tt);Mn.getSystem().broadcastOn([`${_D}-${vo}`],jn),Mn.getSystem().broadcastOn([`${DH}-${vo}`],jn.internalDialog),Mn.getSystem().broadcastOn([`${b7}-${vo}`],jn.internalDialog),Mn.getSystem().broadcastOn([`${NH}-${vo}`],{...jn.internalDialog,buttons:po}),cn.setData(jn.initialData)})},close:()=>{st(xn=>{wl(xn,GR)})},toggleFullscreen:h.toggleFullscreen};return cn},Lx=(h,j,tt)=>{const st=Wr("dialog"),ut=h.internalDialog,mt=r_(ut.title,st,tt),yt=ls(ut.size),kt=yo=>Es(jn,yo),Ot=Tv(yt.get()).toArray(),zt=(yo,zo)=>(yt.set(zo.internalDialog.size),iC(zo.internalDialog.size,yo),It.some(zo)),Gt=Dx({body:ut.body,initialData:ut.initialData},st,tt,kt),Wt=DN(ut.buttons),sn=FA(Wt),cn=Jr(Wt.length!==0,br({buttons:Wt},st,tt)),xn=$0(()=>po,V_(()=>vo,tt.shared.providers,j),tt.shared.getSink),Mn={id:st,header:mt,body:Gt,footer:cn,extraClasses:Ot,extraBehaviours:[ho.config({channel:`${_D}-${st}`,updateState:zt,initialData:h})],extraStyles:{}},vo=LA(Mn,xn,tt),jn=(()=>{const yo=()=>{const $o=Am.getBody(vo);return Ll.getCurrent($o).getOr($o)},zo=()=>{i3(vo,yt.get())};return{getId:Nt(st),getRoot:Nt(vo),getBody:()=>Am.getBody(vo),getFooter:()=>Am.getFooter(vo),getFormWrapper:yo,toggleFullscreen:zo}})(),po=Op(jn,j.redial,sn);return{dialog:vo,instanceApi:po}},i_=(h,j,tt,st=!1,ut)=>{const mt=Wr("dialog"),yt=Wr("dialog-label"),kt=Wr("dialog-content"),Ot=h.internalDialog,zt=Vr=>Es(Ur,Vr),Gt=ls(Ot.size),Wt=Tv(Gt.get()).toArray(),sn=(Vr,Dr)=>(Gt.set(Dr.internalDialog.size),iC(Dr.internalDialog.size,Vr),ut(),It.some(Dr)),cn=nu(Ep({title:Ot.title,draggable:!0},mt,yt,tt.shared.providers)),xn=nu(Qy({body:Ot.body,initialData:Ot.initialData},mt,kt,tt,st,zt)),Mn=DN(Ot.buttons),vo=FA(Mn),jn=Jr(Mn.length!==0,nu(Ar({buttons:Mn},mt,tt))),po=$0(()=>Ko,{onBlock:Vr=>{Px.block($o,(Dr,Xr)=>{const Il=cn.getOpt($o).map(Ju=>fu(Ju.element));return Nx(Vr.message,Xr,tt.shared.providers,Il)})},onUnblock:()=>{Px.unblock($o)},onClose:()=>j.closeWindow()},tt.shared.getSink),yo="tox-dialog-inline",zo=_i().os,$o=km({dom:{tag:"div",classes:["tox-dialog",yo,...Wt],attributes:{role:"dialog",...zo.isMacOS()?{"aria-label":Ot.title}:{"aria-labelledby":yt}}},eventOrder:{[O1()]:[ho.name(),ky.name()],[e0()]:["execute-on-form"],[fy()]:["reflecting","execute-on-form"]},behaviours:gr([ys.config({mode:"cyclic",onEscape:Vr=>(wl(Vr,GR),It.some(!0)),useTabstopAt:Vr=>!QR(Vr)&&(Xl(Vr)!=="button"||Kr(Vr,"disabled")!=="disabled"),firstTabstop:1}),ho.config({channel:`${_D}-${mt}`,updateState:sn,initialData:h}),Ds.config({}),Ws("execute-on-form",po.concat([ew(K0(),(Vr,Dr)=>{ys.focusIn(Vr)}),Qo(tE(),(Vr,Dr)=>{Vr.getSystem().broadcastOn([xD],{newFocus:Dr.event.newFocus})})])),Px.config({getRoot:()=>It.some($o)}),Gs.config({}),XR({})]),components:[cn.asSpec(),xn.asSpec(),...jn.map(Vr=>Vr.asSpec()).toArray()]}),Cr=()=>{i3($o,Gt.get())},Ur={getId:Nt(mt),getRoot:Nt($o),getFooter:()=>jn.map(Vr=>Vr.get($o)),getBody:()=>xn.get($o),getFormWrapper:()=>{const Vr=xn.get($o);return Ll.getCurrent(Vr).getOr(Vr)},toggleFullscreen:Cr},Ko=Op(Ur,j.redial,vo);return{dialog:$o,instanceApi:Ko}};var zA=tinymce.util.Tools.resolve("tinymce.util.URI");const OZ=h=>{const j=yt=>{h.getSystem().isConnected()&&yt(h)};return{block:yt=>{if(!_e(yt))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");j(kt=>{rs(kt,rD,{message:yt})})},unblock:()=>{j(yt=>{wl(yt,LF)})},close:()=>{j(yt=>{wl(yt,GR)})},sendMessage:yt=>{j(kt=>{kt.getSystem().broadcastOn([v7],yt)})}}},DZ=["insertContent","setContent","execCommand","close","block","unblock"],zz=h=>nt(h)&&DZ.indexOf(h.mceAction)!==-1,NZ=h=>!zz(h)&&nt(h)&&Ms(h,"mceAction"),aC=(h,j,tt)=>{switch(tt.mceAction){case"insertContent":h.insertContent(tt.content);break;case"setContent":h.setContent(tt.content);break;case"execCommand":const st=pt(tt.ui)?tt.ui:!1;h.execCommand(tt.cmd,st,tt.value);break;case"close":j.close();break;case"block":j.block(tt.message);break;case"unblock":j.unblock();break}},LZ=(h,j,tt,st)=>{const ut=Wr("dialog"),mt=r_(h.title,ut,st),yt=oy(h),kt=h.buttons.bind(yo=>yo.length===0?It.none():It.some(br({buttons:yo},ut,st))),Ot=PZ(()=>po,V_(()=>jn,st.shared.providers,j)),zt={...h.height.fold(()=>({}),yo=>({height:yo+"px","max-height":yo+"px"})),...h.width.fold(()=>({}),yo=>({width:yo+"px","max-width":yo+"px"}))},Gt=h.width.isNone()&&h.height.isNone()?["tox-dialog--width-lg"]:[],Wt=new zA(h.url,{base_uri:new zA(window.location.href)}),sn=`${Wt.protocol}://${Wt.host}${Wt.port?":"+Wt.port:""}`,cn=W0(),xn=(yo,zo)=>It.some(zo),Mn=[ho.config({channel:`${_D}-${ut}`,updateState:xn,initialData:h}),Ws("messages",[ep(()=>{const yo=J0(ro.fromDom(window),"message",zo=>{if(Wt.isSameOrigin(new zA(zo.raw.origin))){const $o=zo.raw.data;zz($o)?aC(tt,po,$o):NZ($o)&&h.onMessage(po,$o)}});cn.set(yo)}),S_(cn.clear)]),ky.config({channels:{[v7]:{onReceive:(yo,zo)=>{np(yo.element,"iframe").each($o=>{const Cr=$o.dom.contentWindow;wt(Cr)&&Cr.postMessage(zo,sn)})}}}})],jn=LA({id:ut,header:mt,body:yt,footer:kt,extraClasses:Gt,extraBehaviours:Mn,extraStyles:zt},Ot,st),po=OZ(jn);return{dialog:jn,instanceApi:po}},FZ=h=>{const j=h.shared;return{open:(st,ut)=>{const mt=()=>{Am.hide(zt),ut()},yt=nu($I({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:It.some("primary"),align:"end",enabled:!0,icon:It.none()},"cancel",h)),kt=_b(),Ot=B0(mt,j.providers),zt=km(_m({lazySink:()=>j.getSink(),header:o_(kt,Ot),body:us(st,j.providers),footer:It.some(Hl(Pp([],[yt.asSpec()]))),onEscape:mt,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Qo(AS,mt)],eventOrder:{}}));Am.show(zt);const Gt=yt.get(zt);Ds.focus(Gt)}}},zZ=h=>{const j=h.shared;return{open:(st,ut)=>{const mt=sn=>{Am.hide(Gt),ut(sn)},yt=nu($I({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:It.some("primary"),align:"end",enabled:!0,icon:It.none()},"submit",h)),kt=$I({context:"any",name:"no",text:"No",primary:!1,buttonType:It.some("secondary"),align:"end",enabled:!0,icon:It.none()},"cancel",h),Ot=_b(),zt=B0(()=>mt(!1),j.providers),Gt=km(_m({lazySink:()=>j.getSink(),header:o_(Ot,zt),body:us(st,j.providers),footer:It.some(Hl(Pp([],[kt,yt.asSpec()]))),onEscape:()=>mt(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Qo(AS,()=>mt(!1)),Qo(MI,()=>mt(!0))],eventOrder:{}}));Am.show(Gt);const Wt=yt.get(Gt);Ds.focus(Wt)}}},Bz=(h,j)=>dr(cp("data",j,h)),BZ=h=>BR(h,".tox-alert-dialog")||BR(h,".tox-confirm-dialog"),Dl=(h,j,tt)=>j&&tt?[]:[Zu.config({contextual:{lazyContext:()=>It.some(_d(ro.fromDom(h.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:st=>yS(h,st.element).map(mt=>({bounds:bS(mt),optScrollEnv:It.some({currentScrollTop:mt.element.dom.scrollTop,scrollElmTop:Fu(mt.element).top})})).getOrThunk(()=>({bounds:zp(),optScrollEnv:It.none()}))})],Fo=h=>{const j=h.editor,tt=mS(j),st=FZ(h.backstages.dialog),ut=zZ(h.backstages.dialog),mt=(xn,Mn,vo)=>{if(!bt(Mn)){if(Mn.inline==="toolbar")return zt(xn,h.backstages.popup.shared.anchors.inlineDialog(),vo,Mn);if(Mn.inline==="bottom")return Gt(xn,h.backstages.popup.shared.anchors.inlineBottomDialog(),vo,Mn);if(Mn.inline==="cursor")return zt(xn,h.backstages.popup.shared.anchors.cursor(),vo,Mn)}return Ot(xn,vo)},yt=(xn,Mn)=>kt(xn,Mn),kt=(xn,Mn)=>{const vo=jn=>{const po=LZ(jn,{closeWindow:()=>{Am.hide(po.dialog),Mn(po.instanceApi)}},j,h.backstages.dialog);return Am.show(po.dialog),po.instanceApi};return Ht.openUrl(vo,xn)},Ot=(xn,Mn)=>{const vo=(jn,po,yo)=>{const zo=po,Cr=Lx({dataValidator:yo,initialData:zo,internalDialog:jn},{redial:Ht.redial,closeWindow:()=>{Am.hide(Cr.dialog),Mn(Cr.instanceApi)}},h.backstages.dialog);return Am.show(Cr.dialog),Cr.instanceApi.setData(zo),Cr.instanceApi};return Ht.open(vo,xn)},zt=(xn,Mn,vo,jn)=>{const po=(yo,zo,$o)=>{const Cr=Bz(zo,$o),Ur=Wl(),Ko=h.backstages.popup.shared.header.isPositionedAtTop(),Vr={dataValidator:$o,initialData:Cr,internalDialog:yo},Dr=()=>Ur.on(tu=>{vp.reposition(tu),(!tt||!Ko)&&Zu.refresh(tu)}),Xr=i_(Vr,{redial:Ht.redial,closeWindow:()=>{Ur.on(vp.hide),j.off("ResizeEditor",Dr),Ur.clear(),vo(Xr.instanceApi)}},h.backstages.popup,jn.ariaAttrs,Dr),Il=km(vp.sketch({lazySink:h.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:jn.persistent?{event:"doNotDismissYet"}:{},...Ko?{}:{fireRepositionEventInstead:{}},inlineBehaviours:gr([Ws("window-manager-inline-events",[Qo(jy(),(tu,ns)=>{wl(Xr.dialog,AS)})]),...Dl(j,tt,Ko)]),isExtraPart:(tu,ns)=>BZ(ns)}));Ur.set(Il);const Ju=()=>{const tu=j.inline?fo():ro.fromDom(j.getContainer()),ns=_d(tu);return It.some(ns)};return vp.showWithinBounds(Il,Uy(Xr.dialog),{anchor:Mn},Ju),(!tt||!Ko)&&(Zu.refresh(Il),j.on("ResizeEditor",Dr)),Xr.instanceApi.setData(Cr),ys.focusIn(Xr.dialog),Xr.instanceApi};return Ht.open(po,xn)},Gt=(xn,Mn,vo,jn)=>{const po=(yo,zo,$o)=>{const Cr=Bz(zo,$o),Ur=Wl(),Ko=h.backstages.popup.shared.header.isPositionedAtTop(),Vr={dataValidator:$o,initialData:Cr,internalDialog:yo},Dr=()=>Ur.on(tu=>{vp.reposition(tu),Zu.refresh(tu)}),Xr=i_(Vr,{redial:Ht.redial,closeWindow:()=>{Ur.on(vp.hide),j.off("ResizeEditor ScrollWindow ElementScroll",Dr),Ur.clear(),vo(Xr.instanceApi)}},h.backstages.popup,jn.ariaAttrs,Dr),Il=km(vp.sketch({lazySink:h.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:jn.persistent?{event:"doNotDismissYet"}:{},...Ko?{}:{fireRepositionEventInstead:{}},inlineBehaviours:gr([Ws("window-manager-inline-events",[Qo(jy(),(tu,ns)=>{wl(Xr.dialog,AS)})]),Zu.config({contextual:{lazyContext:()=>It.some(_d(ro.fromDom(j.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:tu=>yS(j,tu.element).map(ur=>({bounds:bS(ur),optScrollEnv:It.some({currentScrollTop:ur.element.dom.scrollTop,scrollElmTop:Fu(ur.element).top})})).getOrThunk(()=>({bounds:zp(),optScrollEnv:It.none()}))})]),isExtraPart:(tu,ns)=>BZ(ns)}));Ur.set(Il);const Ju=()=>h.backstages.popup.shared.getSink().toOptional().bind(tu=>{const ns=yS(j,tu.element),ur=15,Pr=ns.map(ms=>bS(ms)).getOr(zp()),zs=_d(ro.fromDom(j.getContentAreaContainer())),Qs=ay(zs,Pr);return It.some(Qu(Qs.x,Qs.y,Qs.width,Qs.height-ur))});return vp.showWithinBounds(Il,Uy(Xr.dialog),{anchor:Mn},Ju),Zu.refresh(Il),j.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Dr),Xr.instanceApi.setData(Cr),ys.focusIn(Xr.dialog),Xr.instanceApi};return Ht.open(po,xn)};return{open:mt,openUrl:yt,alert:(xn,Mn)=>{st.open(xn,Mn)},close:xn=>{xn.close()},confirm:(xn,Mn)=>{ut.open(xn,Mn)}}},bs=h=>{v$(h),CX(h),ire(h)};var yl=()=>{Lv.add("silver",h=>{bs(h);let j=()=>zp();const{dialogs:tt,popups:st,renderUI:ut}=nse(h,{getPopupSinkBounds:()=>j()}),mt=()=>{const zt=ut();return yS(h,st.getMothership().element).each(Wt=>{j=()=>bS(Wt)}),zt};mJ.register(h,st.backstage.shared);const yt=Fo({editor:h,backstages:{popup:st.backstage,dialog:tt.backstage}}),kt=Wl(),Ot=()=>eG(h,{backstage:st.backstage},st.getMothership(),kt);return{renderUI:mt,getWindowManagerImpl:Nt(yt),getNotificationManagerImpl:Ot}})};yl()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});tinymce.Resource.add("ui/default/skin.css",`.tox{box-shadow:none;box-sizing:content-box;color:#222f3e;cursor:auto;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:16px;font-style:normal;font-weight:400;line-height:normal;-webkit-tap-highlight-color:transparent;-webkit-text-decoration:none;text-decoration:none;text-shadow:none;text-transform:none;vertical-align:initial;white-space:normal}.tox :not(svg):not(rect){box-sizing:inherit;color:inherit;cursor:inherit;direction:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;line-height:inherit;-webkit-tap-highlight-color:inherit;text-align:inherit;text-decoration:inherit;text-shadow:inherit;text-transform:inherit;vertical-align:inherit;white-space:inherit}.tox :not(svg):not(rect){background:0 0;border:0;box-shadow:none;float:none;height:auto;margin:0;max-width:none;outline:0;padding:0;position:static;width:auto}.tox:not([dir=rtl]){direction:ltr;text-align:left}.tox[dir=rtl]{direction:rtl;text-align:right}.tox-tinymce{border:2px solid #eee;border-radius:10px;box-shadow:none;box-sizing:border-box;display:flex;flex-direction:column;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;overflow:hidden;position:relative;visibility:inherit!important}.tox.tox-tinymce-inline{border:none;box-shadow:none;overflow:initial}.tox.tox-tinymce-inline .tox-editor-container{overflow:initial}.tox.tox-tinymce-inline .tox-editor-header{background-color:#fff;border:2px solid #eee;border-radius:10px;box-shadow:none;overflow:hidden}.tox-tinymce-aux{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;z-index:1300}.tox-tinymce :focus,.tox-tinymce-aux :focus{outline:0}button::-moz-focus-inner{border:0}.tox[dir=rtl] .tox-icon--flip svg{transform:rotateY(180deg)}.tox .accessibility-issue__header{align-items:center;display:flex;margin-bottom:4px}.tox .accessibility-issue__description{align-items:stretch;border-radius:6px;display:flex;justify-content:space-between}.tox .accessibility-issue__description>div{padding-bottom:4px}.tox .accessibility-issue__description>div>div{align-items:center;display:flex;margin-bottom:4px}.tox .accessibility-issue__description>div>div .tox-icon svg{display:block}.tox .accessibility-issue__repair{margin-top:16px}.tox .tox-dialog__body-content .accessibility-issue--info .accessibility-issue__description{background-color:rgba(0,101,216,.1);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--info .tox-form__group h2{color:#006ce7}.tox .tox-dialog__body-content .accessibility-issue--info .tox-icon svg{fill:#006ce7}.tox .tox-dialog__body-content .accessibility-issue--info a.tox-button--naked.tox-button--icon{background-color:#006ce7;color:#fff}.tox .tox-dialog__body-content .accessibility-issue--info a.tox-button--naked.tox-button--icon:focus,.tox .tox-dialog__body-content .accessibility-issue--info a.tox-button--naked.tox-button--icon:hover{background-color:#0060ce}.tox .tox-dialog__body-content .accessibility-issue--info a.tox-button--naked.tox-button--icon:active{background-color:#0054b4}.tox .tox-dialog__body-content .accessibility-issue--warn .accessibility-issue__description{background-color:rgba(255,165,0,.08);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--warn .tox-form__group h2{color:#8f5d00}.tox .tox-dialog__body-content .accessibility-issue--warn .tox-icon svg{fill:#8f5d00}.tox .tox-dialog__body-content .accessibility-issue--warn a.tox-button--naked.tox-button--icon{background-color:#ffe89d;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--warn a.tox-button--naked.tox-button--icon:focus,.tox .tox-dialog__body-content .accessibility-issue--warn a.tox-button--naked.tox-button--icon:hover{background-color:#f2d574;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--warn a.tox-button--naked.tox-button--icon:active{background-color:#e8c657;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--error .accessibility-issue__description{background-color:rgba(204,0,0,.1);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--error .tox-form__group h2{color:#c00}.tox .tox-dialog__body-content .accessibility-issue--error .tox-icon svg{fill:#c00}.tox .tox-dialog__body-content .accessibility-issue--error a.tox-button--naked.tox-button--icon{background-color:#f2bfbf;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--error a.tox-button--naked.tox-button--icon:focus,.tox .tox-dialog__body-content .accessibility-issue--error a.tox-button--naked.tox-button--icon:hover{background-color:#e9a4a4;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--error a.tox-button--naked.tox-button--icon:active{background-color:#ee9494;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--success .accessibility-issue__description{background-color:rgba(120,171,70,.1);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--success .accessibility-issue__description>:last-child{display:none}.tox .tox-dialog__body-content .accessibility-issue--success .tox-form__group h2{color:#527530}.tox .tox-dialog__body-content .accessibility-issue--success .tox-icon svg{fill:#527530}.tox .tox-dialog__body-content .accessibility-issue__header .tox-form__group h1,.tox .tox-dialog__body-content .tox-form__group .accessibility-issue__description h2{font-size:14px;margin-top:0}.tox:not([dir=rtl]) .tox-dialog__body-content .accessibility-issue__header .tox-button{margin-left:4px}.tox:not([dir=rtl]) .tox-dialog__body-content .accessibility-issue__header>:nth-last-child(2){margin-left:auto}.tox:not([dir=rtl]) .tox-dialog__body-content .accessibility-issue__description{padding:4px 4px 4px 8px}.tox[dir=rtl] .tox-dialog__body-content .accessibility-issue__header .tox-button{margin-right:4px}.tox[dir=rtl] .tox-dialog__body-content .accessibility-issue__header>:nth-last-child(2){margin-right:auto}.tox[dir=rtl] .tox-dialog__body-content .accessibility-issue__description{padding:4px 8px 4px 4px}.tox .mce-codemirror{background:#fff;bottom:0;font-size:13px;left:0;position:absolute;right:0;top:0;z-index:1}.tox .mce-codemirror.tox-inline-codemirror{margin:8px;position:absolute}.tox .tox-advtemplate .tox-form__grid{flex:1}.tox .tox-advtemplate .tox-form__grid>div:first-child{display:flex;flex-direction:column;width:30%}.tox .tox-advtemplate .tox-form__grid>div:first-child>div:nth-child(2){flex-basis:0;flex-grow:1;overflow:auto}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-advtemplate .tox-form__grid>div:first-child{width:100%}}.tox .tox-advtemplate iframe{border-color:#eee;border-radius:10px;border-style:solid;border-width:1px;margin:0 10px}.tox .tox-anchorbar{display:flex;flex:0 0 auto}.tox .tox-bottom-anchorbar{display:flex;flex:0 0 auto}.tox .tox-bar{display:flex;flex:0 0 auto}.tox .tox-button{background-color:#006ce7;background-image:none;background-position:0 0;background-repeat:repeat;border-color:#006ce7;border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:14px;font-style:normal;font-weight:700;letter-spacing:normal;line-height:24px;margin:0;outline:0;padding:4px 16px;position:relative;text-align:center;-webkit-text-decoration:none;text-decoration:none;text-transform:none;white-space:nowrap}.tox .tox-button::before{border-radius:6px;bottom:-1px;box-shadow:inset 0 0 0 1px #fff,0 0 0 2px #006ce7;content:'';left:-1px;opacity:0;pointer-events:none;position:absolute;right:-1px;top:-1px}.tox .tox-button[disabled]{background-color:#006ce7;background-image:none;border-color:#006ce7;box-shadow:none;color:rgba(255,255,255,.5);cursor:not-allowed}.tox .tox-button:focus:not(:disabled){background-color:#0060ce;background-image:none;border-color:#0060ce;box-shadow:none;color:#fff}.tox .tox-button:focus:not(:disabled)::before{opacity:1}.tox .tox-button:hover:not(:disabled){background-color:#0060ce;background-image:none;border-color:#0060ce;box-shadow:none;color:#fff}.tox .tox-button:active:not(:disabled){background-color:#0054b4;background-image:none;border-color:#0054b4;box-shadow:none;color:#fff}.tox .tox-button.tox-button--enabled{background-color:#0054b4;background-image:none;border-color:#0054b4;box-shadow:none;color:#fff}.tox .tox-button.tox-button--enabled[disabled]{background-color:#0054b4;background-image:none;border-color:#0054b4;box-shadow:none;color:rgba(255,255,255,.5);cursor:not-allowed}.tox .tox-button.tox-button--enabled:focus:not(:disabled){background-color:#00489b;background-image:none;border-color:#00489b;box-shadow:none;color:#fff}.tox .tox-button.tox-button--enabled:hover:not(:disabled){background-color:#00489b;background-image:none;border-color:#00489b;box-shadow:none;color:#fff}.tox .tox-button.tox-button--enabled:active:not(:disabled){background-color:#003c81;background-image:none;border-color:#003c81;box-shadow:none;color:#fff}.tox .tox-button--icon-and-text,.tox .tox-button.tox-button--icon-and-text,.tox .tox-button.tox-button--secondary.tox-button--icon-and-text{display:flex;padding:5px 4px}.tox .tox-button--icon-and-text .tox-icon svg,.tox .tox-button.tox-button--icon-and-text .tox-icon svg,.tox .tox-button.tox-button--secondary.tox-button--icon-and-text .tox-icon svg{display:block;fill:currentColor}.tox .tox-button--secondary{background-color:#f0f0f0;background-image:none;background-position:0 0;background-repeat:repeat;border-color:#f0f0f0;border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;color:#222f3e;font-size:14px;font-style:normal;font-weight:700;letter-spacing:normal;outline:0;padding:4px 16px;-webkit-text-decoration:none;text-decoration:none;text-transform:none}.tox .tox-button--secondary[disabled]{background-color:#f0f0f0;background-image:none;border-color:#f0f0f0;box-shadow:none;color:rgba(34,47,62,.5)}.tox .tox-button--secondary:focus:not(:disabled){background-color:#e3e3e3;background-image:none;border-color:#e3e3e3;box-shadow:none;color:#222f3e}.tox .tox-button--secondary:hover:not(:disabled){background-color:#e3e3e3;background-image:none;border-color:#e3e3e3;box-shadow:none;color:#222f3e}.tox .tox-button--secondary:active:not(:disabled){background-color:#d6d6d6;background-image:none;border-color:#d6d6d6;box-shadow:none;color:#222f3e}.tox .tox-button--secondary.tox-button--enabled{background-color:#a8c8ed;background-image:none;border-color:#a8c8ed;box-shadow:none;color:#222f3e}.tox .tox-button--secondary.tox-button--enabled[disabled]{background-color:#a8c8ed;background-image:none;border-color:#a8c8ed;box-shadow:none;color:rgba(34,47,62,.5)}.tox .tox-button--secondary.tox-button--enabled:focus:not(:disabled){background-color:#93bbe9;background-image:none;border-color:#93bbe9;box-shadow:none;color:#222f3e}.tox .tox-button--secondary.tox-button--enabled:hover:not(:disabled){background-color:#93bbe9;background-image:none;border-color:#93bbe9;box-shadow:none;color:#222f3e}.tox .tox-button--secondary.tox-button--enabled:active:not(:disabled){background-color:#7daee4;background-image:none;border-color:#7daee4;box-shadow:none;color:#222f3e}.tox .tox-button--icon,.tox .tox-button.tox-button--icon,.tox .tox-button.tox-button--secondary.tox-button--icon{padding:4px}.tox .tox-button--icon .tox-icon svg,.tox .tox-button.tox-button--icon .tox-icon svg,.tox .tox-button.tox-button--secondary.tox-button--icon .tox-icon svg{display:block;fill:currentColor}.tox .tox-button-link{background:0;border:none;box-sizing:border-box;cursor:pointer;display:inline-block;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:16px;font-weight:400;line-height:1.3;margin:0;padding:0;white-space:nowrap}.tox .tox-button-link--sm{font-size:14px}.tox .tox-button--naked{background-color:transparent;border-color:transparent;box-shadow:unset;color:#222f3e}.tox .tox-button--naked[disabled]{background-color:rgba(34,47,62,.12);border-color:transparent;box-shadow:unset;color:rgba(34,47,62,.5)}.tox .tox-button--naked:hover:not(:disabled){background-color:rgba(34,47,62,.12);border-color:transparent;box-shadow:unset;color:#222f3e}.tox .tox-button--naked:focus:not(:disabled){background-color:rgba(34,47,62,.12);border-color:transparent;box-shadow:unset;color:#222f3e}.tox .tox-button--naked:active:not(:disabled){background-color:rgba(34,47,62,.18);border-color:transparent;box-shadow:unset;color:#222f3e}.tox .tox-button--naked .tox-icon svg{fill:currentColor}.tox .tox-button--naked.tox-button--icon:hover:not(:disabled){color:#222f3e}.tox .tox-checkbox{align-items:center;border-radius:6px;cursor:pointer;display:flex;height:36px;min-width:36px}.tox .tox-checkbox__input{height:1px;overflow:hidden;position:absolute;top:auto;width:1px}.tox .tox-checkbox__icons{align-items:center;border-radius:6px;box-shadow:0 0 0 2px transparent;box-sizing:content-box;display:flex;height:24px;justify-content:center;padding:calc(4px - 1px);width:24px}.tox .tox-checkbox__icons .tox-checkbox-icon__unchecked svg{display:block;fill:rgba(34,47,62,0.3)}@media (forced-colors:active){.tox .tox-checkbox__icons .tox-checkbox-icon__unchecked svg{fill:currentColor!important}}.tox .tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{display:none;fill:#006ce7}.tox .tox-checkbox__icons .tox-checkbox-icon__checked svg{display:none;fill:#006ce7}.tox .tox-checkbox--disabled{color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__checked svg{fill:rgba(34,47,62,0.5)}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__unchecked svg{fill:rgba(34,47,62,0.5)}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{fill:rgba(34,47,62,0.5)}.tox input.tox-checkbox__input:checked+.tox-checkbox__icons .tox-checkbox-icon__unchecked svg{display:none}.tox input.tox-checkbox__input:checked+.tox-checkbox__icons .tox-checkbox-icon__checked svg{display:block}.tox input.tox-checkbox__input:indeterminate+.tox-checkbox__icons .tox-checkbox-icon__unchecked svg{display:none}.tox input.tox-checkbox__input:indeterminate+.tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{display:block}.tox input.tox-checkbox__input:focus+.tox-checkbox__icons{border-radius:6px;box-shadow:inset 0 0 0 1px #006ce7;padding:calc(4px - 1px)}.tox:not([dir=rtl]) .tox-checkbox__label{margin-left:4px}.tox:not([dir=rtl]) .tox-checkbox__input{left:-10000px}.tox:not([dir=rtl]) .tox-bar .tox-checkbox{margin-left:4px}.tox[dir=rtl] .tox-checkbox__label{margin-right:4px}.tox[dir=rtl] .tox-checkbox__input{right:-10000px}.tox[dir=rtl] .tox-bar .tox-checkbox{margin-right:4px}.tox .tox-collection--toolbar .tox-collection__group{display:flex;padding:0}.tox .tox-collection--grid .tox-collection__group{display:flex;flex-wrap:wrap;max-height:208px;overflow-x:hidden;overflow-y:auto;padding:0}.tox .tox-collection--list .tox-collection__group{border-bottom-width:0;border-color:#e3e3e3;border-left-width:0;border-right-width:0;border-style:solid;border-top-width:1px;padding:4px 0}.tox .tox-collection--list .tox-collection__group:first-child{border-top-width:0}.tox .tox-collection__group-heading{background-color:#fcfcfc;color:rgba(34,47,62,.7);cursor:default;font-size:12px;font-style:normal;font-weight:400;margin-bottom:4px;margin-top:-4px;padding:4px 8px;text-transform:none;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.tox .tox-collection__item{align-items:center;border-radius:3px;color:#222f3e;display:flex;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.tox .tox-collection--list .tox-collection__item{padding:4px 8px}.tox .tox-collection--toolbar .tox-collection__item{border-radius:3px;padding:4px}.tox .tox-collection--grid .tox-collection__item{border-radius:3px;padding:4px}.tox .tox-collection--list .tox-collection__item--enabled:not(.tox-collection__item--state-disabled){background-color:#fff;color:#222f3e}.tox .tox-collection--list .tox-collection__item--active:not(.tox-collection__item--state-disabled){background-color:#006ce7;color:#fff}@media (forced-colors:active){.tox .tox-collection--list .tox-collection__item--active:not(.tox-collection__item--state-disabled){border:solid 1px}}.tox .tox-collection--grid .tox-collection__item--enabled:not(.tox-collection__item--state-disabled){background-color:#a6ccf7;color:#222f3e}.tox .tox-collection--grid .tox-collection__item--active:not(.tox-collection__item--state-disabled){background-color:#f0f0f0;color:#222f3e;position:relative;z-index:1}.tox .tox-collection--grid .tox-collection__item--active:not(.tox-collection__item--state-disabled):focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7 inset;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-collection--grid .tox-collection__item--active:not(.tox-collection__item--state-disabled):focus::after{border:2px solid highlight}}.tox .tox-collection--toolbar .tox-collection__item--enabled:not(.tox-collection__item--state-disabled){background-color:#a6ccf7;color:#222f3e}@media (forced-colors:active){.tox .tox-collection--toolbar .tox-collection__item--enabled:not(.tox-collection__item--state-disabled){border-radius:3px;outline:solid 1px}}.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled){color:#222f3e;background-color:#fff;position:relative}.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled):hover{background-color:#f0f0f0;color:#222f3e}.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled):focus{background-color:#f0f0f0;color:#222f3e}.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled):focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled):focus::after{border:2px solid highlight}}@media (forced-colors:active){.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled):hover{border-radius:3px;outline:solid 1px}}.tox .tox-collection__item-checkmark,.tox .tox-collection__item-icon{align-items:center;display:flex;height:24px;justify-content:center;width:24px}.tox .tox-collection__item-checkmark svg,.tox .tox-collection__item-icon svg{fill:currentColor}.tox .tox-collection--toolbar-lg .tox-collection__item-icon{height:48px;width:48px}.tox .tox-collection__item-label{color:currentColor;display:inline-block;flex:1;font-size:14px;font-style:normal;font-weight:400;line-height:24px;max-width:100%;text-transform:none;word-break:break-all}.tox .tox-collection__item-accessory{color:currentColor;display:inline-block;font-size:14px;height:24px;line-height:24px;text-transform:none}.tox .tox-collection__item-caret{align-items:center;display:flex;min-height:24px}.tox .tox-collection__item-caret::after{content:'';font-size:0;min-height:inherit}.tox .tox-collection__item-caret svg{fill:currentColor}.tox .tox-collection__item--state-disabled{background-color:transparent;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-collection__item--state-disabled .tox-collection__item-caret svg{fill:rgba(34,47,62,0.5)}.tox .tox-collection--list .tox-collection__item:not(.tox-collection__item--enabled) .tox-collection__item-checkmark svg{display:none}.tox .tox-collection--list .tox-collection__item:not(.tox-collection__item--enabled) .tox-collection__item-accessory+.tox-collection__item-checkmark{display:none}.tox .tox-collection--horizontal{background-color:#fff;border:1px solid #e3e3e3;border-radius:6px;box-shadow:0 0 2px 0 rgba(34,47,62,.2),0 4px 8px 0 rgba(34,47,62,.15);display:flex;flex:0 0 auto;flex-shrink:0;flex-wrap:nowrap;margin-bottom:0;overflow-x:auto;padding:0}.tox .tox-collection--horizontal .tox-collection__group{align-items:center;display:flex;flex-wrap:nowrap;margin:0;padding:0 4px}.tox .tox-collection--horizontal .tox-collection__item{height:28px;margin:6px 1px 5px 0;padding:0 4px}.tox .tox-collection--horizontal .tox-collection__item-label{white-space:nowrap}.tox .tox-collection--horizontal .tox-collection__item-caret{margin-left:4px}.tox .tox-collection__item-container{display:flex}.tox .tox-collection__item-container--row{align-items:center;flex:1 1 auto;flex-direction:row}.tox .tox-collection__item-container--row.tox-collection__item-container--align-left{margin-right:auto}.tox .tox-collection__item-container--row.tox-collection__item-container--align-right{justify-content:flex-end;margin-left:auto}.tox .tox-collection__item-container--row.tox-collection__item-container--valign-top{align-items:flex-start;margin-bottom:auto}.tox .tox-collection__item-container--row.tox-collection__item-container--valign-middle{align-items:center}.tox .tox-collection__item-container--row.tox-collection__item-container--valign-bottom{align-items:flex-end;margin-top:auto}.tox .tox-collection__item-container--column{align-self:center;flex:1 1 auto;flex-direction:column}.tox .tox-collection__item-container--column.tox-collection__item-container--align-left{align-items:flex-start}.tox .tox-collection__item-container--column.tox-collection__item-container--align-right{align-items:flex-end}.tox .tox-collection__item-container--column.tox-collection__item-container--valign-top{align-self:flex-start}.tox .tox-collection__item-container--column.tox-collection__item-container--valign-middle{align-self:center}.tox .tox-collection__item-container--column.tox-collection__item-container--valign-bottom{align-self:flex-end}.tox:not([dir=rtl]) .tox-collection--horizontal .tox-collection__group:not(:last-of-type){border-right:1px solid transparent}.tox:not([dir=rtl]) .tox-collection--list .tox-collection__item>:not(:first-child){margin-left:8px}.tox:not([dir=rtl]) .tox-collection--list .tox-collection__item>.tox-collection__item-label:first-child{margin-left:4px}.tox:not([dir=rtl]) .tox-collection__item-accessory{margin-left:16px;text-align:right}.tox:not([dir=rtl]) .tox-collection .tox-collection__item-caret{margin-left:16px}.tox[dir=rtl] .tox-collection--horizontal .tox-collection__group:not(:last-of-type){border-left:1px solid transparent}.tox[dir=rtl] .tox-collection--list .tox-collection__item>:not(:first-child){margin-right:8px}.tox[dir=rtl] .tox-collection--list .tox-collection__item>.tox-collection__item-label:first-child{margin-right:4px}.tox[dir=rtl] .tox-collection__item-accessory{margin-right:16px;text-align:left}.tox[dir=rtl] .tox-collection .tox-collection__item-caret{margin-right:16px;transform:rotateY(180deg)}.tox[dir=rtl] .tox-collection--horizontal .tox-collection__item-caret{margin-right:4px}@media (forced-colors:active){.tox .tox-hue-slider,.tox .tox-rgb-form .tox-rgba-preview{background-color:currentColor!important;border:1px solid highlight!important;forced-color-adjust:none}}.tox .tox-color-picker-container{display:flex;flex-direction:row;height:225px;margin:0}.tox .tox-sv-palette{box-sizing:border-box;display:flex;height:100%}.tox .tox-sv-palette-spectrum{height:100%}.tox .tox-sv-palette,.tox .tox-sv-palette-spectrum{width:225px}.tox .tox-sv-palette-thumb{background:0 0;border:1px solid #000;border-radius:50%;box-sizing:content-box;height:12px;position:absolute;width:12px}.tox .tox-sv-palette-inner-thumb{border:1px solid #fff;border-radius:50%;height:10px;position:absolute;width:10px}.tox .tox-hue-slider{box-sizing:border-box;height:100%;width:25px}.tox .tox-hue-slider-spectrum{background:linear-gradient(to bottom,red,#ff0080,#f0f,#8000ff,#00f,#0080ff,#0ff,#00ff80,#0f0,#80ff00,#ff0,#ff8000,red);height:100%;width:100%}.tox .tox-hue-slider,.tox .tox-hue-slider-spectrum{width:20px}.tox .tox-hue-slider-spectrum:focus,.tox .tox-sv-palette-spectrum:focus{outline:#08f solid}.tox .tox-hue-slider-thumb{background:#fff;border:1px solid #000;box-sizing:content-box;height:4px;width:100%}.tox .tox-rgb-form{display:flex;flex-direction:column;justify-content:space-between}.tox .tox-rgb-form div{align-items:center;display:flex;justify-content:space-between;margin-bottom:5px;width:inherit}.tox .tox-rgb-form input{min-width:6em}.tox .tox-rgb-form input.tox-invalid{border:1px solid red!important;box-shadow:0 0 0 1px red}.tox .tox-rgb-container{position:relative}.tox .tox-rgb-form .tox-invalid-icon{align-content:center;align-items:center;display:none;height:100%;position:absolute;right:0;top:0}.tox .tox-rgb-form .tox-invalid-icon .tox-control-wrap__status-icon-invalid{margin:0}.tox .tox-rgb-warning-note{background-color:#f5cccc;border:1px solid #f0b3b3;border-radius:3px;color:#77181f;padding:3px}.tox input.tox-invalid+.tox-invalid-icon{display:flex}.tox .tox-rgb-form .tox-rgba-preview{border:1px solid #000;flex-grow:2;margin-bottom:0}.tox:not([dir=rtl]) .tox-sv-palette{margin-right:15px}.tox:not([dir=rtl]) .tox-hue-slider{margin-right:15px}.tox:not([dir=rtl]) .tox-hue-slider-thumb{margin-left:-1px}.tox:not([dir=rtl]) .tox-rgb-form label{margin-right:.5em}.tox[dir=rtl] .tox-sv-palette{margin-left:15px}.tox[dir=rtl] .tox-hue-slider{margin-left:15px}.tox[dir=rtl] .tox-hue-slider-thumb{margin-right:-1px}.tox[dir=rtl] .tox-rgb-form label{margin-left:.5em}.tox .tox-toolbar .tox-swatches,.tox .tox-toolbar__overflow .tox-swatches,.tox .tox-toolbar__primary .tox-swatches{margin:5px 0 6px 11px}.tox .tox-collection--list .tox-collection__group .tox-swatches-menu{border:0;margin:-4px -4px}.tox .tox-swatches__row{display:flex}@media (forced-colors:active){.tox .tox-swatches__row{forced-color-adjust:none}}.tox .tox-swatch{height:30px;transition:transform .15s,box-shadow .15s;width:30px}.tox .tox-swatch:focus,.tox .tox-swatch:hover{box-shadow:0 0 0 1px rgba(127,127,127,.3) inset;transform:scale(.8)}.tox .tox-swatch--remove{align-items:center;display:flex;justify-content:center}.tox .tox-swatch--remove svg path{stroke:#e74c3c}.tox .tox-swatches__picker-btn{align-items:center;background-color:transparent;border:0;cursor:pointer;display:flex;height:30px;justify-content:center;outline:0;padding:0;width:30px}.tox .tox-swatches__picker-btn svg{fill:#222f3e;height:24px;width:24px}.tox .tox-swatches__picker-btn:hover{background:#f0f0f0}.tox div.tox-swatch:not(.tox-swatch--remove) svg{display:none;fill:#222f3e;height:24px;margin:calc((30px - 24px)/ 2) calc((30px - 24px)/ 2);width:24px}.tox div.tox-swatch:not(.tox-swatch--remove) svg path{fill:#fff;paint-order:stroke;stroke:#222f3e;stroke-width:2px}.tox div.tox-swatch:not(.tox-swatch--remove).tox-collection__item--enabled svg{display:block}.tox:not([dir=rtl]) .tox-swatches__picker-btn{margin-left:auto}.tox[dir=rtl] .tox-swatches__picker-btn{margin-right:auto}.tox .tox-conversations{display:flex;flex-direction:column;position:relative;height:100%;min-width:300px;max-width:300px;width:300px}.tox .tox-conversations__header{align-items:center;display:flex;justify-content:space-between;box-shadow:0 4px 8px 0 rgba(34,47,62,.1);padding:8px 12px;background:#fff}.tox .tox-conversations__title{font-size:20px;font-weight:400;padding:8px 0 8px 0;color:#222f3e;line-height:28px}.tox .tox-comment{background:#fff;border:1px solid #eee;border-radius:6px;padding:8px 8px 16px 8px;position:relative}.tox .tox-comment:hover{box-shadow:0 4px 8px 0 rgba(34,47,62,.1)}.tox .tox-comment.tox-comment--selected{background-color:#fff2c9;border:1px solid #ffcf30;box-shadow:0 4px 8px 0 rgba(34,47,62,.1)}.tox .tox-comment.tox-comment--selected:focus{border:2px solid #006ce7;margin:-1px}.tox .tox-comment.tox-comment--selected:focus:not(:first-child){margin-top:7px}.tox .tox-comment.tox-comment--selected .tox-comment__single{margin-bottom:12px}.tox .tox-comment.tox-comment--selected .tox-comment__single:focus{position:relative}.tox .tox-comment.tox-comment--selected .tox-comment__single:focus::after{top:-9px;pointer-events:none;position:absolute;content:"";display:block;bottom:-9px;left:-9px;right:-9px;border-radius:6px;border:2px solid #006ce7}.tox .tox-comment__header{align-items:center;color:#222f3e;display:flex;justify-content:space-between}.tox .tox-comment__date{color:#222f3e;font-size:12px;line-height:18px}.tox .tox-comment__body{color:#222f3e;font-size:14px;font-style:normal;font-weight:400;line-height:1.3;margin-top:8px;position:relative;text-transform:initial;transition:max-height .5s cubic-bezier(0, 1, 0, 1);white-space:pre-wrap}.tox .tox-comment__body.tox-comment__body--expanded{max-height:100em;transition:max-height 1s ease-in-out}.tox .tox-comment__body.tox-comment__body--pending{transition:max-height 0s}.tox .tox-comment__body p{margin:0}.tox .tox-comment__body textarea{resize:none;white-space:normal;width:100%}.tox .tox-comment__loading-text{align-items:center;color:#222f3e;display:flex;flex-direction:column;position:relative}.tox .tox-comment__loading-text>div{padding-bottom:16px}.tox .tox-comment__overlaytext{bottom:0;flex-direction:column;font-size:14px;left:0;padding:1em;position:absolute;right:0;top:0;z-index:10}.tox .tox-comment__overlaytext p{background-color:#fff;box-shadow:0 0 8px 8px #fff;color:#222f3e;text-align:center}.tox .tox-comment__overlaytext div:nth-of-type(2){font-size:.8em}.tox .tox-comment__expander{padding-top:8px}.tox .tox-comment__expander p{color:rgba(34,47,62,.7);font-size:14px;font-style:normal}.tox .tox-comment__expander p:focus{font-weight:700}.tox .tox-comment__buttonspacing{padding-top:16px;text-align:center}.tox .tox-tbtn.tox-comment__mention-btn{display:flex;width:34px;height:34px;padding:5px;justify-content:center;align-items:center;margin:0;background-color:transparent}.tox .tox-comment-thread{background:#fff;position:relative;border-radius:6px;background-color:transparent}.tox .tox-comment-thread>:not(:first-child){margin-top:8px}.tox .tox-comment-thread__overlay::after{background:#fff;bottom:0;content:"";display:flex;left:0;opacity:.9;position:absolute;right:0;top:0;z-index:5}.tox .tox-comment__reply{display:flex;flex-shrink:0;flex-wrap:wrap;justify-content:flex-end;margin-top:8px}.tox .tox-comment__reply>:first-child{margin-bottom:8px;width:100%}.tox .tox-comment__edit{display:flex;flex-wrap:wrap;justify-content:flex-end;margin-top:8px}.tox .tox-comment__gradient::after{background:linear-gradient(rgba(255,255,255,0),#fff);bottom:0;content:"";display:block;height:5em;margin-top:-40px;position:absolute;width:100%}.tox .tox-comment__overlay{background:#fff;bottom:0;display:flex;flex-direction:column;flex-grow:1;left:0;opacity:.9;position:absolute;right:0;text-align:center;top:0;z-index:5}.tox .tox-comment__busy-spinner{align-items:center;background-color:#fff;bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:20}.tox .tox-comment__scroll{display:flex;flex-direction:column;flex-shrink:1;overflow:auto;padding:12px;scroll-behavior:smooth}.tox .tox-comment--disappearing{transition:opacity .5s ease}.tox .tox-comment[data-transitioning-destination=deleting]{opacity:0}.tox .tox-skeleton .tox-skeleton__line{height:16px;width:100%;background:linear-gradient(to right,rgba(240,240,240,.5) 8%,rgba(240,240,240,.7) 18%,rgba(240,240,240,.5) 33%);animation:wave 2s infinite ease-out}.tox .tox-skeleton .tox-skeleton__circle{height:36px;width:36px;margin-right:8px;border-radius:100%;background:linear-gradient(to right,rgba(240,240,240,.5) 8%,rgba(240,240,240,.7) 18%,rgba(240,240,240,.5) 33%);animation:wave 2s infinite ease-out}@keyframes wave{0%{background-position:-268px 0}100%{background-position:268px 0}}.tox .tox-ring-loader{width:10px;height:10px;border:1px solid #fff;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}@keyframes rotation{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.tox:not([dir=rtl]) .tox-comment__edit{margin-left:8px}.tox:not([dir=rtl]) .tox-comment__buttonspacing>:last-child,.tox:not([dir=rtl]) .tox-comment__edit>:last-child,.tox:not([dir=rtl]) .tox-comment__reply>:last-child{margin-left:8px}.tox[dir=rtl] .tox-comment__edit{margin-right:8px}.tox[dir=rtl] .tox-comment__buttonspacing>:last-child,.tox[dir=rtl] .tox-comment__edit>:last-child,.tox[dir=rtl] .tox-comment__reply>:last-child{margin-right:8px}.tox .tox-user{align-items:center;display:flex}.tox .tox-user__avatar svg{fill:rgba(34,47,62,0.7)}.tox .tox-user__avatar img{border-radius:50%;height:36px;object-fit:cover;vertical-align:middle;width:36px}.tox .tox-user__name{color:#222f3e;font-size:14px;font-style:normal;font-weight:700;line-height:18px;text-transform:none}.tox:not([dir=rtl]) .tox-user__avatar img,.tox:not([dir=rtl]) .tox-user__avatar svg{margin-right:8px}.tox:not([dir=rtl]) .tox-user__avatar+.tox-user__name{margin-left:8px}.tox[dir=rtl] .tox-user__avatar img,.tox[dir=rtl] .tox-user__avatar svg{margin-left:8px}.tox[dir=rtl] .tox-user__avatar+.tox-user__name{margin-right:8px}.tox .tox-dialog-wrap{align-items:center;bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1100}.tox .tox-dialog-wrap__backdrop{background-color:rgba(255,255,255,.75);bottom:0;left:0;position:absolute;right:0;top:0;z-index:1}.tox .tox-dialog-wrap__backdrop--opaque{background-color:#fff}.tox .tox-dialog{background-color:#fff;border-color:#eee;border-radius:10px;border-style:solid;border-width:0;box-shadow:0 16px 16px -10px rgba(34,47,62,.15),0 0 40px 1px rgba(34,47,62,.15);display:flex;flex-direction:column;max-height:100%;max-width:480px;overflow:hidden;position:relative;width:95vw;z-index:2}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-dialog{align-self:flex-start;margin:8px auto;max-height:calc(100vh - 8px * 2);width:calc(100vw - 16px)}}.tox .tox-dialog-inline{z-index:1100}.tox .tox-dialog__header{align-items:center;background-color:#fff;border-bottom:none;color:#222f3e;display:flex;font-size:16px;justify-content:space-between;padding:8px 16px 0 16px;position:relative}.tox .tox-dialog__header .tox-button{z-index:1}.tox .tox-dialog__draghandle{cursor:grab;height:100%;left:0;position:absolute;top:0;width:100%}.tox .tox-dialog__draghandle:active{cursor:grabbing}.tox .tox-dialog__dismiss{margin-left:auto}.tox .tox-dialog__title{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:20px;font-style:normal;font-weight:400;line-height:1.3;margin:0;text-transform:none}.tox .tox-dialog__body{color:#222f3e;display:flex;flex:1;font-size:16px;font-style:normal;font-weight:400;line-height:1.3;min-width:0;text-align:left;text-transform:none}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-dialog__body{flex-direction:column}}.tox .tox-dialog__body-nav{align-items:flex-start;display:flex;flex-direction:column;flex-shrink:0;padding:16px 16px}@media only screen and (min-width:768px){.tox .tox-dialog__body-nav{max-width:11em}}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-dialog__body-nav{flex-direction:row;-webkit-overflow-scrolling:touch;overflow-x:auto;padding-bottom:0}}.tox .tox-dialog__body-nav-item{border-bottom:2px solid transparent;color:rgba(34,47,62,.7);display:inline-block;flex-shrink:0;font-size:14px;line-height:1.3;margin-bottom:8px;max-width:13em;-webkit-text-decoration:none;text-decoration:none}.tox .tox-dialog__body-nav-item:focus{background-color:rgba(0,108,231,.1)}.tox .tox-dialog__body-nav-item--active{border-bottom:2px solid #006ce7;color:#006ce7}@media (forced-colors:active){.tox .tox-dialog__body-nav-item--active{border-bottom:2px solid highlight;color:highlight}}.tox .tox-dialog__body-content{box-sizing:border-box;display:flex;flex:1;flex-direction:column;max-height:min(650px,calc(100vh - 110px));overflow:auto;-webkit-overflow-scrolling:touch;padding:16px 16px}.tox .tox-dialog__body-content>*{margin-bottom:0;margin-top:16px}.tox .tox-dialog__body-content>:first-child{margin-top:0}.tox .tox-dialog__body-content>:last-child{margin-bottom:0}.tox .tox-dialog__body-content>:only-child{margin-bottom:0;margin-top:0}.tox .tox-dialog__body-content a{color:#006ce7;cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-dialog__body-content a:focus,.tox .tox-dialog__body-content a:hover{color:#003c81;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-dialog__body-content a:focus-visible{border-radius:1px;outline:2px solid #006ce7;outline-offset:2px}.tox .tox-dialog__body-content a:active{color:#00244e;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-dialog__body-content svg{fill:#222f3e}.tox .tox-dialog__body-content strong{font-weight:700}.tox .tox-dialog__body-content ul{list-style-type:disc}.tox .tox-dialog__body-content dd,.tox .tox-dialog__body-content ol,.tox .tox-dialog__body-content ul{padding-inline-start:2.5rem}.tox .tox-dialog__body-content dl,.tox .tox-dialog__body-content ol,.tox .tox-dialog__body-content ul{margin-bottom:16px}.tox .tox-dialog__body-content dd,.tox .tox-dialog__body-content dl,.tox .tox-dialog__body-content dt,.tox .tox-dialog__body-content ol,.tox .tox-dialog__body-content ul{display:block;margin-inline-end:0;margin-inline-start:0}.tox .tox-dialog__body-content .tox-form__group h1{color:#222f3e;font-size:20px;font-style:normal;font-weight:700;letter-spacing:normal;margin-bottom:16px;margin-top:2rem;text-transform:none}.tox .tox-dialog__body-content .tox-form__group h2{color:#222f3e;font-size:16px;font-style:normal;font-weight:700;letter-spacing:normal;margin-bottom:16px;margin-top:2rem;text-transform:none}.tox .tox-dialog__body-content .tox-form__group p{margin-bottom:16px}.tox .tox-dialog__body-content .tox-form__group h1:first-child,.tox .tox-dialog__body-content .tox-form__group h2:first-child,.tox .tox-dialog__body-content .tox-form__group p:first-child{margin-top:0}.tox .tox-dialog__body-content .tox-form__group h1:last-child,.tox .tox-dialog__body-content .tox-form__group h2:last-child,.tox .tox-dialog__body-content .tox-form__group p:last-child{margin-bottom:0}.tox .tox-dialog__body-content .tox-form__group h1:only-child,.tox .tox-dialog__body-content .tox-form__group h2:only-child,.tox .tox-dialog__body-content .tox-form__group p:only-child{margin-bottom:0;margin-top:0}.tox .tox-dialog__body-content .tox-form__group .tox-label.tox-label--center{text-align:center}.tox .tox-dialog__body-content .tox-form__group .tox-label.tox-label--end{text-align:end}.tox .tox-dialog--width-lg{height:650px;max-width:1200px}.tox .tox-dialog--fullscreen{height:100%;max-width:100%}.tox .tox-dialog--fullscreen .tox-dialog__body-content{max-height:100%}.tox .tox-dialog--width-md{max-width:800px}.tox .tox-dialog--width-md .tox-dialog__body-content{overflow:auto}.tox .tox-dialog__body-content--centered{text-align:center}.tox .tox-dialog__footer{align-items:center;background-color:#fff;border-top:none;display:flex;justify-content:space-between;padding:8px 16px}.tox .tox-dialog__footer-end,.tox .tox-dialog__footer-start{display:flex}.tox .tox-dialog__busy-spinner{align-items:center;background-color:rgba(255,255,255,.75);bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:3}.tox .tox-dialog__table{border-collapse:collapse;width:100%}.tox .tox-dialog__table thead th{font-weight:700;padding-bottom:8px}.tox .tox-dialog__table thead th:first-child{padding-right:8px}.tox .tox-dialog__table tbody tr{border-bottom:1px solid #626262}.tox .tox-dialog__table tbody tr:last-child{border-bottom:none}.tox .tox-dialog__table td{padding-bottom:8px;padding-top:8px}.tox .tox-dialog__table td:first-child{padding-right:8px}.tox .tox-dialog__iframe{min-height:200px}.tox .tox-dialog__iframe.tox-dialog__iframe--opaque{background:#fff}.tox .tox-navobj-bordered{position:relative}.tox .tox-navobj-bordered::before{border:1px solid #eee;border-radius:6px;content:'';inset:0;opacity:1;pointer-events:none;position:absolute;z-index:1}.tox .tox-navobj-bordered iframe{border-radius:6px}.tox .tox-navobj-bordered-focus.tox-navobj-bordered::before{border-color:#006ce7;box-shadow:0 0 0 1px #006ce7;outline:0}.tox .tox-dialog__popups{position:absolute;width:100%;z-index:1100}.tox .tox-dialog__body-iframe{display:flex;flex:1;flex-direction:column}.tox .tox-dialog__body-iframe .tox-navobj{display:flex;flex:1}.tox .tox-dialog__body-iframe .tox-navobj :nth-child(2){flex:1;height:100%}.tox .tox-dialog-dock-fadeout{opacity:0;visibility:hidden}.tox .tox-dialog-dock-fadein{opacity:1;visibility:visible}.tox .tox-dialog-dock-transition{transition:visibility 0s linear .3s,opacity .3s ease}.tox .tox-dialog-dock-transition.tox-dialog-dock-fadein{transition-delay:0s}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox:not([dir=rtl]) .tox-dialog__body-nav{margin-right:0}}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox:not([dir=rtl]) .tox-dialog__body-nav-item:not(:first-child){margin-left:8px}}.tox:not([dir=rtl]) .tox-dialog__footer .tox-dialog__footer-end>*,.tox:not([dir=rtl]) .tox-dialog__footer .tox-dialog__footer-start>*{margin-left:8px}.tox[dir=rtl] .tox-dialog__body{text-align:right}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox[dir=rtl] .tox-dialog__body-nav{margin-left:0}}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox[dir=rtl] .tox-dialog__body-nav-item:not(:first-child){margin-right:8px}}.tox[dir=rtl] .tox-dialog__footer .tox-dialog__footer-end>*,.tox[dir=rtl] .tox-dialog__footer .tox-dialog__footer-start>*{margin-right:8px}body.tox-dialog__disable-scroll{overflow:hidden}.tox .tox-dropzone-container{display:flex;flex:1}.tox .tox-dropzone{align-items:center;background:#fff;border:2px dashed #eee;box-sizing:border-box;display:flex;flex-direction:column;flex-grow:1;justify-content:center;min-height:100px;padding:10px}.tox .tox-dropzone p{color:rgba(34,47,62,.7);margin:0 0 16px 0}.tox .tox-edit-area{display:flex;flex:1;overflow:hidden;position:relative}.tox .tox-edit-area::before{border:2px solid #006ce7;border-radius:4px;content:'';inset:0;opacity:0;pointer-events:none;position:absolute;transition:opacity .15s;z-index:1}@media (forced-colors:active){.tox .tox-edit-area::before{border:2px solid highlight}}.tox .tox-edit-area__iframe{background-color:#fff;border:0;box-sizing:border-box;flex:1;height:100%;position:absolute;width:100%}.tox.tox-edit-focus .tox-edit-area::before{opacity:1}.tox.tox-inline-edit-area{border:1px dotted #eee}.tox .tox-editor-container{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.tox .tox-editor-header{display:grid;grid-template-columns:1fr min-content;z-index:2}.tox:not(.tox-tinymce-inline) .tox-editor-header{background-color:#fff;border-bottom:none;box-shadow:0 2px 2px -2px rgba(34,47,62,.1),0 8px 8px -4px rgba(34,47,62,.07);padding:4px 0}.tox:not(.tox-tinymce-inline) .tox-editor-header:not(.tox-editor-dock-transition){transition:box-shadow .5s}.tox:not(.tox-tinymce-inline).tox-tinymce--toolbar-bottom .tox-editor-header{border-top:1px solid #e3e3e3;box-shadow:none}.tox:not(.tox-tinymce-inline).tox-tinymce--toolbar-sticky-on .tox-editor-header{background-color:#fff;box-shadow:0 2px 2px -2px rgba(34,47,62,.2),0 8px 8px -4px rgba(34,47,62,.15);padding:4px 0}.tox:not(.tox-tinymce-inline).tox-tinymce--toolbar-sticky-on.tox-tinymce--toolbar-bottom .tox-editor-header{box-shadow:0 2px 2px -2px rgba(34,47,62,.2),0 8px 8px -4px rgba(34,47,62,.15)}.tox.tox:not(.tox-tinymce-inline) .tox-editor-header.tox-editor-header--empty{background:0 0;border:none;box-shadow:none;padding:0}.tox-editor-dock-fadeout{opacity:0;visibility:hidden}.tox-editor-dock-fadein{opacity:1;visibility:visible}.tox-editor-dock-transition{transition:visibility 0s linear .25s,opacity .25s ease}.tox-editor-dock-transition.tox-editor-dock-fadein{transition-delay:0s}.tox .tox-control-wrap{flex:1;position:relative}.tox .tox-control-wrap:not(.tox-control-wrap--status-invalid) .tox-control-wrap__status-icon-invalid,.tox .tox-control-wrap:not(.tox-control-wrap--status-unknown) .tox-control-wrap__status-icon-unknown,.tox .tox-control-wrap:not(.tox-control-wrap--status-valid) .tox-control-wrap__status-icon-valid{display:none}.tox .tox-control-wrap svg{display:block}.tox .tox-control-wrap__status-icon-wrap{position:absolute;top:50%;transform:translateY(-50%)}.tox .tox-control-wrap__status-icon-invalid svg{fill:#c00}.tox .tox-control-wrap__status-icon-unknown svg{fill:orange}.tox .tox-control-wrap__status-icon-valid svg{fill:green}.tox:not([dir=rtl]) .tox-control-wrap--status-invalid .tox-textfield,.tox:not([dir=rtl]) .tox-control-wrap--status-unknown .tox-textfield,.tox:not([dir=rtl]) .tox-control-wrap--status-valid .tox-textfield{padding-right:32px}.tox:not([dir=rtl]) .tox-control-wrap__status-icon-wrap{right:4px}.tox[dir=rtl] .tox-control-wrap--status-invalid .tox-textfield,.tox[dir=rtl] .tox-control-wrap--status-unknown .tox-textfield,.tox[dir=rtl] .tox-control-wrap--status-valid .tox-textfield{padding-left:32px}.tox[dir=rtl] .tox-control-wrap__status-icon-wrap{left:4px}.tox .tox-custom-preview{border-color:#eee;border-radius:6px;border-style:solid;border-width:1px;flex:1;padding:8px}.tox .tox-autocompleter{max-width:25em}.tox .tox-autocompleter .tox-menu{box-sizing:border-box;max-width:25em}.tox .tox-autocompleter .tox-autocompleter-highlight{font-weight:700}.tox .tox-color-input{display:flex;position:relative;z-index:1}.tox .tox-color-input .tox-textfield{z-index:-1}.tox .tox-color-input span{border-color:rgba(34 47 3.1%);border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;height:24px;position:absolute;top:6px;width:24px}@media (forced-colors:active){.tox .tox-color-input span{border-color:currentColor;border-width:2px!important;forced-color-adjust:none}}.tox .tox-color-input span:focus:not([aria-disabled=true]),.tox .tox-color-input span:hover:not([aria-disabled=true]){border-color:#006ce7;cursor:pointer}.tox .tox-color-input span::before{background-image:linear-gradient(45deg,rgba(0,0,0,.25) 25%,transparent 25%),linear-gradient(-45deg,rgba(0,0,0,.25) 25%,transparent 25%),linear-gradient(45deg,transparent 75%,rgba(0,0,0,.25) 75%),linear-gradient(-45deg,transparent 75%,rgba(0,0,0,.25) 75%);background-position:0 0,0 6px,6px -6px,-6px 0;background-size:12px 12px;border:1px solid #fff;border-radius:6px;box-sizing:border-box;content:'';height:24px;left:-1px;position:absolute;top:-1px;width:24px;z-index:-1}@media (forced-colors:active){.tox .tox-color-input span::before{border:none}}.tox .tox-color-input span[aria-disabled=true]{cursor:not-allowed}.tox:not([dir=rtl]) .tox-color-input .tox-textfield{padding-left:36px}.tox:not([dir=rtl]) .tox-color-input span{left:6px}.tox[dir=rtl] .tox-color-input .tox-textfield{padding-right:36px}.tox[dir=rtl] .tox-color-input span{right:6px}.tox .tox-label,.tox .tox-toolbar-label{color:rgba(34,47,62,.7);display:block;font-size:14px;font-style:normal;font-weight:400;line-height:1.3;padding:0 8px 0 0;text-transform:none;white-space:nowrap}.tox .tox-toolbar-label{padding:0 8px}.tox[dir=rtl] .tox-label{padding:0 0 0 8px}.tox .tox-form{display:flex;flex:1;flex-direction:column}.tox .tox-form__group{box-sizing:border-box;margin-bottom:4px}.tox .tox-form-group--maximize{flex:1}.tox .tox-form__group--error{color:#c00}.tox .tox-form__group--collection{display:flex}.tox .tox-form__grid{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.tox .tox-form__grid--2col>.tox-form__group{width:calc(50% - (8px / 2))}.tox .tox-form__grid--3col>.tox-form__group{width:calc(100% / 3 - (8px / 2))}.tox .tox-form__grid--4col>.tox-form__group{width:calc(25% - (8px / 2))}.tox .tox-form__controls-h-stack{align-items:center;display:flex}.tox .tox-form__group--inline{align-items:center;display:flex}.tox .tox-form__group--stretched{display:flex;flex:1;flex-direction:column}.tox .tox-form__group--stretched .tox-textarea{flex:1}.tox .tox-form__group--stretched .tox-navobj{display:flex;flex:1}.tox .tox-form__group--stretched .tox-navobj :nth-child(2){flex:1;height:100%}.tox:not([dir=rtl]) .tox-form__controls-h-stack>:not(:first-child){margin-left:4px}.tox[dir=rtl] .tox-form__controls-h-stack>:not(:first-child){margin-right:4px}.tox .tox-lock.tox-locked .tox-lock-icon__unlock,.tox .tox-lock:not(.tox-locked) .tox-lock-icon__lock{display:none}.tox .tox-listboxfield .tox-listbox--select,.tox .tox-textarea,.tox .tox-textarea-wrap .tox-textarea:focus,.tox .tox-textfield,.tox .tox-toolbar-textfield{appearance:none;background-color:#fff;border-color:#eee;border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;color:#222f3e;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:16px;line-height:24px;margin:0;min-height:34px;outline:0;padding:5px 5.5px;resize:none;width:100%}.tox .tox-textarea[disabled],.tox .tox-textfield[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85);cursor:not-allowed}.tox .tox-custom-editor:focus-within,.tox .tox-listboxfield .tox-listbox--select:focus,.tox .tox-textarea-wrap:focus-within,.tox .tox-textarea:focus,.tox .tox-textfield:focus{background-color:#fff;border-color:#006ce7;box-shadow:0 0 0 1px #006ce7;outline:0}.tox .tox-toolbar-textfield{border-width:0;margin-bottom:3px;margin-top:2px;max-width:250px}.tox .tox-naked-btn{background-color:transparent;border:0;border-color:transparent;box-shadow:unset;color:#006ce7;cursor:pointer;display:block;margin:0;padding:0}.tox .tox-naked-btn svg{display:block;fill:#222f3e}.tox:not([dir=rtl]) .tox-toolbar-textfield+*{margin-left:4px}.tox[dir=rtl] .tox-toolbar-textfield+*{margin-right:4px}.tox .tox-listboxfield{cursor:pointer;position:relative}.tox .tox-listboxfield .tox-listbox--select[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85);cursor:not-allowed}.tox .tox-listbox__select-label{cursor:default;flex:1;margin:0 4px}.tox .tox-listbox__select-chevron{align-items:center;display:flex;justify-content:center;width:16px}.tox .tox-listbox__select-chevron svg{fill:#222f3e}@media (forced-colors:active){.tox .tox-listbox__select-chevron svg{fill:currentColor!important}}.tox .tox-listboxfield .tox-listbox--select{align-items:center;display:flex}.tox:not([dir=rtl]) .tox-listboxfield svg{right:8px}.tox[dir=rtl] .tox-listboxfield svg{left:8px}.tox .tox-selectfield{cursor:pointer;position:relative}.tox .tox-selectfield select{appearance:none;background-color:#fff;border-color:#eee;border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;color:#222f3e;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:16px;line-height:24px;margin:0;min-height:34px;outline:0;padding:5px 5.5px;resize:none;width:100%}.tox .tox-selectfield select[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85);cursor:not-allowed}.tox .tox-selectfield select::-ms-expand{display:none}.tox .tox-selectfield select:focus{background-color:#fff;border-color:#006ce7;box-shadow:0 0 0 1px #006ce7;outline:0}.tox .tox-selectfield svg{pointer-events:none;position:absolute;top:50%;transform:translateY(-50%)}.tox:not([dir=rtl]) .tox-selectfield select[size="0"],.tox:not([dir=rtl]) .tox-selectfield select[size="1"]{padding-right:24px}.tox:not([dir=rtl]) .tox-selectfield svg{right:8px}.tox[dir=rtl] .tox-selectfield select[size="0"],.tox[dir=rtl] .tox-selectfield select[size="1"]{padding-left:24px}.tox[dir=rtl] .tox-selectfield svg{left:8px}.tox .tox-textarea-wrap{border-color:#eee;border-radius:6px;border-style:solid;border-width:1px;display:flex;flex:1;overflow:hidden}.tox .tox-textarea{appearance:textarea;white-space:pre-wrap}.tox .tox-textarea-wrap .tox-textarea{border:none}.tox .tox-textarea-wrap .tox-textarea:focus{border:none}.tox-fullscreen{border:0;height:100%;margin:0;overflow:hidden;overscroll-behavior:none;padding:0;touch-action:pinch-zoom;width:100%}.tox.tox-tinymce.tox-fullscreen .tox-statusbar__resize-handle{display:none}.tox-shadowhost.tox-fullscreen,.tox.tox-tinymce.tox-fullscreen{left:0;position:fixed;top:0;z-index:1200}.tox.tox-tinymce.tox-fullscreen{background-color:transparent}.tox-fullscreen .tox.tox-tinymce-aux,.tox-fullscreen~.tox.tox-tinymce-aux{z-index:1201}.tox .tox-help__more-link{list-style:none;margin-top:1em}.tox .tox-imagepreview{background-color:#666;height:380px;overflow:hidden;position:relative;width:100%}.tox .tox-imagepreview.tox-imagepreview__loaded{overflow:auto}.tox .tox-imagepreview__container{display:flex;left:100vw;position:absolute;top:100vw}.tox .tox-imagepreview__image{background:url(data:image/gif;base64,R0lGODdhDAAMAIABAMzMzP///ywAAAAADAAMAAACFoQfqYeabNyDMkBQb81Uat85nxguUAEAOw==)}.tox .tox-image-tools .tox-spacer{flex:1}.tox .tox-image-tools .tox-bar{align-items:center;display:flex;height:60px;justify-content:center}.tox .tox-image-tools .tox-imagepreview,.tox .tox-image-tools .tox-imagepreview+.tox-bar{margin-top:8px}.tox .tox-image-tools .tox-croprect-block{background:#000;opacity:.5;position:absolute;zoom:1}.tox .tox-image-tools .tox-croprect-handle{border:2px solid #fff;height:20px;left:0;position:absolute;top:0;width:20px}.tox .tox-image-tools .tox-croprect-handle-move{border:0;cursor:move;position:absolute}.tox .tox-image-tools .tox-croprect-handle-nw{border-width:2px 0 0 2px;cursor:nw-resize;left:100px;margin:-2px 0 0 -2px;top:100px}.tox .tox-image-tools .tox-croprect-handle-ne{border-width:2px 2px 0 0;cursor:ne-resize;left:200px;margin:-2px 0 0 -20px;top:100px}.tox .tox-image-tools .tox-croprect-handle-sw{border-width:0 0 2px 2px;cursor:sw-resize;left:100px;margin:-20px 2px 0 -2px;top:200px}.tox .tox-image-tools .tox-croprect-handle-se{border-width:0 2px 2px 0;cursor:se-resize;left:200px;margin:-20px 0 0 -20px;top:200px}.tox .tox-insert-table-picker{background-color:#fff;display:flex;flex-wrap:wrap;width:170px}.tox .tox-insert-table-picker>div{border-color:#eee;border-style:solid;border-width:0 1px 1px 0;box-sizing:border-box;height:17px;width:17px}.tox .tox-collection--list .tox-collection__group .tox-insert-table-picker{margin:-4px -4px}.tox .tox-insert-table-picker .tox-insert-table-picker__selected{background-color:#006ce7;border-color:#eee}@media (forced-colors:active){.tox .tox-insert-table-picker .tox-insert-table-picker__selected{border-color:Highlight;filter:contrast(50%)}}.tox .tox-insert-table-picker__label{color:rgba(34,47,62,.7);display:block;font-size:14px;padding:4px;text-align:center;width:100%}.tox:not([dir=rtl]) .tox-insert-table-picker>div:nth-child(10n){border-right:0}.tox[dir=rtl] .tox-insert-table-picker>div:nth-child(10n+1){border-right:0}.tox .tox-menu{background-color:#fff;border:1px solid transparent;border-radius:6px;box-shadow:0 0 2px 0 rgba(34,47,62,.2),0 4px 8px 0 rgba(34,47,62,.15);display:inline-block;overflow:hidden;vertical-align:top;z-index:1150}.tox .tox-menu.tox-collection.tox-collection--list{padding:0 4px}.tox .tox-menu.tox-collection.tox-collection--toolbar{padding:8px}.tox .tox-menu.tox-collection.tox-collection--grid{padding:8px}@media only screen and (min-width:768px){.tox .tox-menu .tox-collection__item-label{overflow-wrap:break-word;word-break:normal}.tox .tox-dialog__popups .tox-menu .tox-collection__item-label{word-break:break-all}}.tox .tox-menu__label blockquote,.tox .tox-menu__label code,.tox .tox-menu__label h1,.tox .tox-menu__label h2,.tox .tox-menu__label h3,.tox .tox-menu__label h4,.tox .tox-menu__label h5,.tox .tox-menu__label h6,.tox .tox-menu__label p{margin:0}.tox .tox-menubar{background:repeating-linear-gradient(transparent 0 1px,transparent 1px 39px) center top 39px/100% calc(100% - 39px) no-repeat;background-color:#fff;display:flex;flex:0 0 auto;flex-shrink:0;flex-wrap:wrap;grid-column:1/-1;grid-row:1;padding:0 11px 0 12px}.tox .tox-promotion+.tox-menubar{grid-column:1}.tox .tox-promotion{background:repeating-linear-gradient(transparent 0 1px,transparent 1px 39px) center top 39px/100% calc(100% - 39px) no-repeat;background-color:#fff;grid-column:2;grid-row:1;padding-inline-end:8px;padding-inline-start:4px;padding-top:5px}.tox .tox-promotion-link{align-items:unsafe center;background-color:#e8f1f8;border-radius:5px;color:#086be6;cursor:pointer;display:flex;font-size:14px;height:26.6px;padding:4px 8px;white-space:nowrap}.tox .tox-promotion-link:hover{background-color:#b4d7ff}.tox .tox-promotion-link:focus{background-color:#d9edf7}.tox .tox-mbtn{align-items:center;background:#fff;border:0;border-radius:3px;box-shadow:none;color:#222f3e;display:flex;flex:0 0 auto;font-size:14px;font-style:normal;font-weight:400;height:28px;justify-content:center;margin:5px 1px 6px 0;outline:0;padding:0 4px;text-transform:none;width:auto}.tox .tox-mbtn[disabled]{background-color:#fff;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-mbtn:focus:not(:disabled){background:#fff;border:0;box-shadow:none;color:#222f3e;position:relative;z-index:1}.tox .tox-mbtn:focus:not(:disabled)::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-mbtn:focus:not(:disabled)::after{border:2px solid highlight}}.tox .tox-mbtn--active,.tox .tox-mbtn:not(:disabled).tox-mbtn--active:focus{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-mbtn:hover:not(:disabled):not(.tox-mbtn--active){background:#f0f0f0;border:0;box-shadow:none;color:#222f3e}.tox .tox-mbtn__select-label{cursor:default;font-weight:400;margin:0 4px}.tox .tox-mbtn[disabled] .tox-mbtn__select-label{cursor:not-allowed}.tox .tox-mbtn__select-chevron{align-items:center;display:flex;justify-content:center;width:16px;display:none}.tox .tox-notification{border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;display:grid;font-size:14px;font-weight:400;grid-template-columns:minmax(40px,1fr) auto minmax(40px,1fr);margin-left:auto;margin-right:auto;margin-top:4px;opacity:0;padding:4px;transition:transform .1s ease-in,opacity 150ms ease-in;width:max-content}.tox .tox-notification a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification p{font-size:14px;font-weight:400}.tox .tox-notification:focus{border-color:#006ce7;box-shadow:0 0 0 1px #006ce7}.tox .tox-notification--in{opacity:1}.tox .tox-notification--success{background-color:#e4eeda;border-color:#d7e6c8;color:#222f3e}.tox .tox-notification--success p{color:#222f3e}.tox .tox-notification--success a{color:#517342}.tox .tox-notification--success a:focus,.tox .tox-notification--success a:hover{color:#24321d;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--success a:focus-visible{border-radius:1px;outline:2px solid #517342;outline-offset:2px}.tox .tox-notification--success a:active{color:#0d120a;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--success svg{fill:#222f3e}.tox .tox-notification--error{background-color:#f5cccc;border-color:#f0b3b3;color:#222f3e}.tox .tox-notification--error p{color:#222f3e}.tox .tox-notification--error a{color:#77181f}.tox .tox-notification--error a:focus,.tox .tox-notification--error a:hover{color:#220709;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--error a:focus-visible{border-radius:1px;outline:2px solid #77181f;outline-offset:2px}.tox .tox-notification--error a:active{color:#000;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--error svg{fill:#222f3e}.tox .tox-notification--warn,.tox .tox-notification--warning{background-color:#fff5cc;border-color:#fff0b3;color:#222f3e}.tox .tox-notification--warn p,.tox .tox-notification--warning p{color:#222f3e}.tox .tox-notification--warn a,.tox .tox-notification--warning a{color:#7a6e25}.tox .tox-notification--warn a:focus,.tox .tox-notification--warn a:hover,.tox .tox-notification--warning a:focus,.tox .tox-notification--warning a:hover{color:#2c280d;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--warn a:focus-visible,.tox .tox-notification--warning a:focus-visible{border-radius:1px;outline:2px solid #7a6e25;outline-offset:2px}.tox .tox-notification--warn a:active,.tox .tox-notification--warning a:active{color:#050502;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--warn svg,.tox .tox-notification--warning svg{fill:#222f3e}.tox .tox-notification--info{background-color:#d6e7fb;border-color:#c1dbf9;color:#222f3e}.tox .tox-notification--info p{color:#222f3e}.tox .tox-notification--info a{color:#2a64a6}.tox .tox-notification--info a:focus,.tox .tox-notification--info a:hover{color:#163355;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--info a:focus-visible{border-radius:1px;outline:2px solid #2a64a6;outline-offset:2px}.tox .tox-notification--info a:active{color:#0b1a2c;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--info svg{fill:#222f3e}.tox .tox-notification__body{align-self:center;color:#222f3e;font-size:14px;grid-column-end:3;grid-column-start:2;grid-row-end:2;grid-row-start:1;text-align:center;white-space:normal;word-break:break-all;word-break:break-word}.tox .tox-notification__body>*{margin:0}.tox .tox-notification__body>*+*{margin-top:1rem}.tox .tox-notification__icon{align-self:center;grid-column-end:2;grid-column-start:1;grid-row-end:2;grid-row-start:1;justify-self:end}.tox .tox-notification__icon svg{display:block}.tox .tox-notification__dismiss{align-self:start;grid-column-end:4;grid-column-start:3;grid-row-end:2;grid-row-start:1;justify-self:end}.tox .tox-notification .tox-progress-bar{grid-column-end:4;grid-column-start:1;grid-row-end:3;grid-row-start:2;justify-self:center}.tox .tox-notification-container-dock-fadeout{opacity:0;visibility:hidden}.tox .tox-notification-container-dock-fadein{opacity:1;visibility:visible}.tox .tox-notification-container-dock-transition{transition:visibility 0s linear .3s,opacity .3s ease}.tox .tox-notification-container-dock-transition.tox-notification-container-dock-fadein{transition-delay:0s}.tox .tox-pop{display:inline-block;position:relative}.tox .tox-pop--resizing{transition:width .1s ease}.tox .tox-pop--resizing .tox-toolbar,.tox .tox-pop--resizing .tox-toolbar__group{flex-wrap:nowrap}.tox .tox-pop--transition{transition:.15s ease;transition-property:left,right,top,bottom}.tox .tox-pop--transition::after,.tox .tox-pop--transition::before{transition:all .15s,visibility 0s,opacity 75ms ease 75ms}.tox .tox-pop__dialog{background-color:#fff;border:1px solid #eee;border-radius:6px;box-shadow:0 0 2px 0 rgba(34,47,62,.2),0 4px 8px 0 rgba(34,47,62,.15);min-width:0;overflow:hidden}.tox .tox-pop__dialog>:not(.tox-toolbar){margin:4px 4px 4px 8px}.tox .tox-pop__dialog .tox-toolbar{background-color:transparent;margin-bottom:-1px}.tox .tox-pop::after,.tox .tox-pop::before{border-style:solid;content:'';display:block;height:0;opacity:1;position:absolute;width:0}@media (forced-colors:active){.tox .tox-pop::after,.tox .tox-pop::before{content:none}}.tox .tox-pop.tox-pop--inset::after,.tox .tox-pop.tox-pop--inset::before{opacity:0;transition:all 0s .15s,visibility 0s,opacity 75ms ease}.tox .tox-pop.tox-pop--bottom::after,.tox .tox-pop.tox-pop--bottom::before{left:50%;top:100%}.tox .tox-pop.tox-pop--bottom::after{border-color:#fff transparent transparent transparent;border-width:8px;margin-left:-8px;margin-top:-1px}.tox .tox-pop.tox-pop--bottom::before{border-color:#eee transparent transparent transparent;border-width:9px;margin-left:-9px}.tox .tox-pop.tox-pop--top::after,.tox .tox-pop.tox-pop--top::before{left:50%;top:0;transform:translateY(-100%)}.tox .tox-pop.tox-pop--top::after{border-color:transparent transparent #fff transparent;border-width:8px;margin-left:-8px;margin-top:1px}.tox .tox-pop.tox-pop--top::before{border-color:transparent transparent #eee transparent;border-width:9px;margin-left:-9px}.tox .tox-pop.tox-pop--left::after,.tox .tox-pop.tox-pop--left::before{left:0;top:calc(50% - 1px);transform:translateY(-50%)}.tox .tox-pop.tox-pop--left::after{border-color:transparent #fff transparent transparent;border-width:8px;margin-left:-15px}.tox .tox-pop.tox-pop--left::before{border-color:transparent #eee transparent transparent;border-width:10px;margin-left:-19px}.tox .tox-pop.tox-pop--right::after,.tox .tox-pop.tox-pop--right::before{left:100%;top:calc(50% + 1px);transform:translateY(-50%)}.tox .tox-pop.tox-pop--right::after{border-color:transparent transparent transparent #fff;border-width:8px;margin-left:-1px}.tox .tox-pop.tox-pop--right::before{border-color:transparent transparent transparent #eee;border-width:10px;margin-left:-1px}.tox .tox-pop.tox-pop--align-left::after,.tox .tox-pop.tox-pop--align-left::before{left:20px}.tox .tox-pop.tox-pop--align-right::after,.tox .tox-pop.tox-pop--align-right::before{left:calc(100% - 20px)}.tox .tox-sidebar-wrap{display:flex;flex-direction:row;flex-grow:1;min-height:0}.tox .tox-sidebar{background-color:#f0f0f0;display:flex;flex-direction:row;justify-content:flex-end}.tox .tox-sidebar__slider{display:flex;overflow:hidden}.tox .tox-sidebar__pane-container{display:flex}.tox .tox-sidebar__pane{display:flex}.tox .tox-sidebar--sliding-closed{opacity:0}.tox .tox-sidebar--sliding-open{opacity:1}.tox .tox-sidebar--sliding-growing,.tox .tox-sidebar--sliding-shrinking{transition:width .5s ease,opacity .5s ease}.tox .tox-selector{background-color:#4099ff;border-color:#4099ff;border-style:solid;border-width:1px;box-sizing:border-box;display:inline-block;height:10px;position:absolute;width:10px}.tox.tox-platform-touch .tox-selector{height:12px;width:12px}.tox .tox-slider{align-items:center;display:flex;flex:1;height:24px;justify-content:center;position:relative}.tox .tox-slider__rail{background-color:transparent;border:1px solid #eee;border-radius:6px;height:10px;min-width:120px;width:100%}.tox .tox-slider__handle{background-color:#006ce7;border:2px solid #0054b4;border-radius:6px;box-shadow:none;height:24px;left:50%;position:absolute;top:50%;transform:translateX(-50%) translateY(-50%);width:14px}.tox .tox-form__controls-h-stack>.tox-slider:not(:first-of-type){margin-inline-start:8px}.tox .tox-form__controls-h-stack>.tox-form__group+.tox-slider{margin-inline-start:32px}.tox .tox-form__controls-h-stack>.tox-slider+.tox-form__group{margin-inline-start:32px}.tox .tox-source-code{overflow:auto}.tox .tox-spinner{display:flex}.tox .tox-spinner>div{animation:tam-bouncing-dots 1.5s ease-in-out 0s infinite both;background-color:rgba(34,47,62,.7);border-radius:100%;height:8px;width:8px}.tox .tox-spinner>div:first-child{animation-delay:-.32s}.tox .tox-spinner>div:nth-child(2){animation-delay:-.16s}@keyframes tam-bouncing-dots{0%,100%,80%{transform:scale(0)}40%{transform:scale(1)}}.tox:not([dir=rtl]) .tox-spinner>div:not(:first-child){margin-left:4px}.tox[dir=rtl] .tox-spinner>div:not(:first-child){margin-right:4px}.tox .tox-statusbar{align-items:center;background-color:#fff;border-top:1px solid #e3e3e3;color:rgba(34,47,62,.7);display:flex;flex:0 0 auto;font-size:14px;font-weight:400;height:25px;overflow:hidden;padding:0 8px;position:relative;text-transform:none}.tox .tox-statusbar__path{display:flex;flex:1 1 auto;text-overflow:ellipsis;white-space:nowrap}.tox .tox-statusbar__right-container{display:flex;justify-content:flex-end;white-space:nowrap}.tox .tox-statusbar__help-text{text-align:center}.tox .tox-statusbar__text-container{align-items:flex-start;display:flex;flex:1 1 auto;height:16px;justify-content:space-between}@media only screen and (min-width:768px){.tox .tox-statusbar__text-container.tox-statusbar__text-container-3-cols>.tox-statusbar__help-text,.tox .tox-statusbar__text-container.tox-statusbar__text-container-3-cols>.tox-statusbar__path,.tox .tox-statusbar__text-container.tox-statusbar__text-container-3-cols>.tox-statusbar__right-container{flex:0 0 calc(100% / 3)}}.tox .tox-statusbar__text-container.tox-statusbar__text-container--flex-end{justify-content:flex-end}.tox .tox-statusbar__text-container.tox-statusbar__text-container--flex-start{justify-content:flex-start}.tox .tox-statusbar__text-container.tox-statusbar__text-container--space-around{justify-content:space-around}.tox .tox-statusbar__path>*{display:inline;white-space:nowrap}.tox .tox-statusbar__wordcount{flex:0 0 auto;margin-left:1ch}@media only screen and (max-width:767px){.tox .tox-statusbar__text-container .tox-statusbar__help-text{display:none}.tox .tox-statusbar__text-container .tox-statusbar__help-text:only-child{display:block}}.tox .tox-statusbar a,.tox .tox-statusbar__path-item,.tox .tox-statusbar__wordcount{color:rgba(34,47,62,.7);position:relative;-webkit-text-decoration:none;text-decoration:none}.tox .tox-statusbar a:focus:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar a:hover:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__path-item:focus:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__path-item:hover:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__wordcount:focus:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__wordcount:hover:not(:disabled):not([aria-disabled=true]){color:#222f3e;cursor:pointer}.tox .tox-statusbar a:focus-visible::after,.tox .tox-statusbar__path-item:focus-visible::after,.tox .tox-statusbar__wordcount:focus-visible::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-statusbar a:focus-visible::after,.tox .tox-statusbar__path-item:focus-visible::after,.tox .tox-statusbar__wordcount:focus-visible::after{border:2px solid highlight}}.tox .tox-statusbar__branding svg{fill:rgba(34,47,62,0.8);height:1em;margin-left:.3em;width:auto}@media (forced-colors:active){.tox .tox-statusbar__branding svg{fill:currentColor}}.tox .tox-statusbar__branding a{align-items:center;display:inline-flex}.tox .tox-statusbar__branding a:focus:not(:disabled):not([aria-disabled=true]) svg,.tox .tox-statusbar__branding a:hover:not(:disabled):not([aria-disabled=true]) svg{fill:#222f3e}.tox .tox-statusbar__resize-handle{align-items:flex-end;align-self:stretch;cursor:nwse-resize;display:flex;flex:0 0 auto;justify-content:flex-end;margin-bottom:3px;margin-left:4px;margin-right:calc(3px - 8px);margin-top:3px;padding-bottom:0;padding-left:0;padding-right:0;position:relative}.tox .tox-statusbar__resize-handle svg{display:block;fill:rgba(34,47,62,0.5)}.tox .tox-statusbar__resize-handle:focus svg,.tox .tox-statusbar__resize-handle:hover svg{fill:#222f3e}.tox .tox-statusbar__resize-handle:focus-visible{background-color:transparent;border-radius:1px 1px 5px 1px;box-shadow:0 0 0 2px transparent}.tox .tox-statusbar__resize-handle:focus-visible::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-statusbar__resize-handle:focus-visible::after{border:2px solid highlight}}.tox .tox-statusbar__resize-handle:only-child{margin-left:auto}.tox:not([dir=rtl]) .tox-statusbar__path>*{margin-right:4px}.tox:not([dir=rtl]) .tox-statusbar__branding{margin-left:2ch}.tox[dir=rtl] .tox-statusbar{flex-direction:row-reverse}.tox[dir=rtl] .tox-statusbar__path>*{margin-left:4px}.tox[dir=rtl] .tox-statusbar__branding svg{margin-left:0;margin-right:.3em}.tox .tox-throbber{z-index:1299}.tox .tox-throbber__busy-spinner{align-items:center;background-color:rgba(255,255,255,.6);bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0}.tox .tox-tbtn{align-items:center;background:#fff;border:0;border-radius:3px;box-shadow:none;color:#222f3e;display:flex;flex:0 0 auto;font-size:14px;font-style:normal;font-weight:400;height:28px;justify-content:center;margin:6px 1px 5px 0;outline:0;padding:0;text-transform:none;width:34px}@media (forced-colors:active){.tox .tox-tbtn.tox-tbtn:hover,.tox .tox-tbtn:hover{outline:1px dashed currentColor}.tox .tox-tbtn.tox-tbtn--active,.tox .tox-tbtn.tox-tbtn--enabled,.tox .tox-tbtn.tox-tbtn--enabled:focus,.tox .tox-tbtn.tox-tbtn--enabled:hover,.tox .tox-tbtn:focus:not(.tox-tbtn--disabled){outline:1px solid currentColor;position:relative}}.tox .tox-tbtn svg{display:block;fill:#222f3e}@media (forced-colors:active){.tox .tox-tbtn svg{fill:currentColor!important}.tox .tox-tbtn svg.tox-tbtn--enabled,.tox .tox-tbtn svg:focus:not(.tox-tbtn--disabled){fill:currentColor!important}.tox .tox-tbtn svg .tox-tbtn:disabled,.tox .tox-tbtn svg .tox-tbtn:disabled:hover,.tox .tox-tbtn svg.tox-tbtn--disabled,.tox .tox-tbtn svg.tox-tbtn--disabled:hover{filter:contrast(0%)}}.tox .tox-tbtn.tox-tbtn-more{padding-left:5px;padding-right:5px;width:inherit}.tox .tox-tbtn:focus{background:#fff;border:0;box-shadow:none;position:relative;z-index:1}.tox .tox-tbtn:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-tbtn:focus::after{border:2px solid highlight}}.tox .tox-tbtn:hover{background:#f0f0f0;border:0;box-shadow:none;color:#222f3e}.tox .tox-tbtn:hover svg{fill:#222f3e}.tox .tox-tbtn:active{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-tbtn:active svg{fill:#222f3e}.tox .tox-tbtn--disabled .tox-tbtn--enabled svg{fill:rgba(34,47,62,0.5)}.tox .tox-tbtn--disabled,.tox .tox-tbtn--disabled:hover,.tox .tox-tbtn:disabled,.tox .tox-tbtn:disabled:hover{background:#fff;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-tbtn--disabled svg,.tox .tox-tbtn--disabled:hover svg,.tox .tox-tbtn:disabled svg,.tox .tox-tbtn:disabled:hover svg{fill:rgba(34,47,62,0.5)}.tox .tox-tbtn--active,.tox .tox-tbtn--enabled,.tox .tox-tbtn--enabled:focus,.tox .tox-tbtn--enabled:hover{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e;position:relative}.tox .tox-tbtn--active>*,.tox .tox-tbtn--enabled:focus>*,.tox .tox-tbtn--enabled:hover>*,.tox .tox-tbtn--enabled>*{transform:none}.tox .tox-tbtn--active svg,.tox .tox-tbtn--enabled svg,.tox .tox-tbtn--enabled:focus svg,.tox .tox-tbtn--enabled:hover svg{fill:#222f3e}.tox .tox-tbtn--active.tox-tbtn--disabled svg,.tox .tox-tbtn--enabled.tox-tbtn--disabled svg,.tox .tox-tbtn--enabled:focus.tox-tbtn--disabled svg,.tox .tox-tbtn--enabled:hover.tox-tbtn--disabled svg{fill:rgba(34,47,62,0.5)}.tox .tox-tbtn--enabled:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-tbtn--enabled:focus::after{border:2px solid highlight}}.tox .tox-tbtn:focus:not(.tox-tbtn--disabled){color:#222f3e}.tox .tox-tbtn:focus:not(.tox-tbtn--disabled) svg{fill:#222f3e}.tox .tox-tbtn:active>*{transform:none}.tox .tox-tbtn--md{height:42px;width:51px}.tox .tox-tbtn--lg{flex-direction:column;height:56px;width:68px}.tox .tox-tbtn--return{align-self:stretch;height:unset;width:16px}.tox .tox-tbtn--labeled{padding:0 4px;width:unset}.tox .tox-tbtn__vlabel{display:block;font-size:10px;font-weight:400;letter-spacing:-.025em;margin-bottom:4px;white-space:nowrap}.tox .tox-number-input{background:#f7f7f7;border-radius:3px;display:flex;margin:6px 1px 5px 0;position:relative;width:auto}.tox .tox-number-input:focus{background:#f7f7f7}.tox .tox-number-input:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-number-input:focus::after{border:2px solid highlight}}.tox .tox-number-input .tox-input-wrapper{display:flex;pointer-events:none;position:relative;text-align:center}.tox .tox-number-input .tox-input-wrapper:focus{background-color:#f7f7f7;z-index:1}.tox .tox-number-input .tox-input-wrapper:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-number-input .tox-input-wrapper:focus::after{border:2px solid highlight}}.tox .tox-number-input .tox-input-wrapper:has(input:focus)::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-number-input .tox-input-wrapper:has(input:focus)::after{border:2px solid highlight}}.tox .tox-number-input input{border-radius:3px;color:#222f3e;font-size:14px;margin:2px 0;pointer-events:all;position:relative;width:60px}.tox .tox-number-input input:hover{background:#f0f0f0;color:#222f3e}.tox .tox-number-input input:focus{background-color:#f7f7f7}.tox .tox-number-input input:disabled{background:#fff;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-number-input button{color:#222f3e;height:28px;position:relative;text-align:center;width:24px}@media (forced-colors:active){.tox .tox-number-input button:active,.tox .tox-number-input button:focus,.tox .tox-number-input button:hover{outline:1px solid currentColor!important}}.tox .tox-number-input button svg{display:block;fill:#222f3e;margin:0 auto;transform:scale(.67)}@media (forced-colors:active){.tox .tox-number-input button svg,.tox .tox-number-input button svg:active,.tox .tox-number-input button svg:hover{fill:currentColor!important}.tox .tox-number-input button svg:disabled{filter:contrast(0)}}.tox .tox-number-input button:focus{background:#f7f7f7;z-index:1}.tox .tox-number-input button:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-number-input button:focus::after{border:2px solid highlight}}.tox .tox-number-input button:hover{background:#f0f0f0;border:0;box-shadow:none;color:#222f3e}.tox .tox-number-input button:hover svg{fill:#222f3e}.tox .tox-number-input button:active{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-number-input button:active svg{fill:#222f3e}.tox .tox-number-input button:disabled{background:#fff;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-number-input button:disabled svg{fill:rgba(34,47,62,0.5)}.tox .tox-number-input button.minus{border-radius:3px 0 0 3px}.tox .tox-number-input button.plus{border-radius:0 3px 3px 0}.tox .tox-number-input:focus:not(:active)>.tox-input-wrapper,.tox .tox-number-input:focus:not(:active)>button{background:#f7f7f7}.tox .tox-tbtn--select{margin:6px 1px 5px 0;padding:0 4px;width:auto}.tox .tox-tbtn__select-label{cursor:default;font-weight:400;height:initial;margin:0 4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tox .tox-tbtn__select-chevron{align-items:center;display:flex;justify-content:center;width:16px}.tox .tox-tbtn__select-chevron svg{fill:rgba(34,47,62,0.5)}@media (forced-colors:active){.tox .tox-tbtn__select-chevron svg{fill:currentColor}}.tox .tox-tbtn--bespoke{background:#f7f7f7}.tox .tox-tbtn--bespoke:focus{background:#f7f7f7}.tox .tox-tbtn--bespoke+.tox-tbtn--bespoke{margin-inline-start:4px}.tox .tox-tbtn--bespoke .tox-tbtn__select-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:7em}.tox .tox-tbtn--disabled .tox-tbtn__select-label,.tox .tox-tbtn--select:disabled .tox-tbtn__select-label{cursor:not-allowed}.tox .tox-split-button{border:0;border-radius:3px;box-sizing:border-box;display:flex;margin:6px 1px 5px 0}.tox .tox-split-button:hover{box-shadow:0 0 0 1px #f0f0f0 inset}.tox .tox-split-button:focus{background:#fff;box-shadow:none;color:#222f3e;position:relative;z-index:1}.tox .tox-split-button:focus::after{pointer-events:none;border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-split-button:focus::after{border:2px solid highlight}}.tox .tox-split-button>*{border-radius:0}.tox .tox-split-button>:first-child{border-bottom-left-radius:3px;border-top-left-radius:3px}.tox .tox-split-button>:nth-child(2){border-bottom-right-radius:3px;border-top-right-radius:3px}.tox .tox-split-button__chevron{width:16px}.tox .tox-split-button__chevron svg{fill:rgba(34,47,62,0.5)}@media (forced-colors:active){.tox .tox-split-button__chevron svg{fill:currentColor}}.tox .tox-split-button .tox-tbtn{margin:0}.tox .tox-split-button:focus .tox-tbtn{background-color:transparent}.tox .tox-split-button.tox-tbtn--disabled .tox-tbtn:focus,.tox .tox-split-button.tox-tbtn--disabled .tox-tbtn:hover,.tox .tox-split-button.tox-tbtn--disabled:focus,.tox .tox-split-button.tox-tbtn--disabled:hover{background:#fff;box-shadow:none;color:rgba(34,47,62,.5)}.tox.tox-platform-touch .tox-split-button .tox-tbtn--select{padding:0 0}.tox.tox-platform-touch .tox-split-button .tox-tbtn:not(.tox-tbtn--select):first-child{width:30px}.tox.tox-platform-touch .tox-split-button__chevron{width:20px}.tox .tox-split-button.tox-tbtn--disabled svg .tox-icon-highlight-bg-color__color,.tox .tox-split-button.tox-tbtn--disabled svg .tox-icon-text-color__color{opacity:.3}.tox .tox-toolbar-overlord{background-color:#fff}.tox .tox-toolbar,.tox .tox-toolbar__overflow,.tox .tox-toolbar__primary{background-attachment:local;background-color:#fff;background-image:repeating-linear-gradient(#e3e3e3 0 1px,transparent 1px 39px);background-position:center top 40px;background-repeat:no-repeat;background-size:calc(100% - 11px * 2) calc(100% - 41px);display:flex;flex:0 0 auto;flex-shrink:0;flex-wrap:wrap;padding:0 0;transform:perspective(1px)}.tox .tox-toolbar-overlord>.tox-toolbar,.tox .tox-toolbar-overlord>.tox-toolbar__overflow,.tox .tox-toolbar-overlord>.tox-toolbar__primary{background-position:center top 0;background-size:calc(100% - 11px * 2) calc(100% - 0px)}.tox .tox-toolbar__overflow.tox-toolbar__overflow--closed{height:0;opacity:0;padding-bottom:0;padding-top:0;visibility:hidden}.tox .tox-toolbar__overflow--growing{transition:height .3s ease,opacity .2s linear .1s}.tox .tox-toolbar__overflow--shrinking{transition:opacity .3s ease,height .2s linear .1s,visibility 0s linear .3s}.tox .tox-anchorbar,.tox .tox-toolbar-overlord{grid-column:1/-1}.tox .tox-menubar+.tox-toolbar,.tox .tox-menubar+.tox-toolbar-overlord{border-top:1px solid transparent;margin-top:-1px;padding-bottom:1px;padding-top:1px}@media (forced-colors:active){.tox .tox-menubar+.tox-toolbar,.tox .tox-menubar+.tox-toolbar-overlord{outline:1px solid currentColor}}.tox .tox-toolbar--scrolling{flex-wrap:nowrap;overflow-x:auto}.tox .tox-pop .tox-toolbar{border-width:0}.tox .tox-toolbar--no-divider{background-image:none}.tox .tox-toolbar-overlord .tox-toolbar:not(.tox-toolbar--scrolling):first-child,.tox .tox-toolbar-overlord .tox-toolbar__primary{background-position:center top 39px}.tox .tox-editor-header>.tox-toolbar--scrolling,.tox .tox-toolbar-overlord .tox-toolbar--scrolling:first-child{background-image:none}.tox.tox-tinymce-aux .tox-toolbar__overflow{background-color:#fff;background-position:center top 43px;background-size:calc(100% - 8px * 2) calc(100% - 51px);border:none;border-radius:6px;box-shadow:0 0 2px 0 rgba(34,47,62,.2),0 4px 8px 0 rgba(34,47,62,.15);overscroll-behavior:none;padding:4px 0}@media (forced-colors:active){.tox.tox-tinymce-aux .tox-toolbar__overflow{border:solid}}.tox-pop .tox-pop__dialog .tox-toolbar{background-position:center top 43px;background-size:calc(100% - 11px * 2) calc(100% - 51px);padding:4px 0}.tox .tox-toolbar__group{align-items:center;display:flex;flex-wrap:wrap;margin:0 0;padding:0 11px 0 12px}.tox .tox-toolbar__group--pull-right{margin-left:auto}.tox .tox-toolbar--scrolling .tox-toolbar__group{flex-shrink:0;flex-wrap:nowrap}.tox:not([dir=rtl]) .tox-toolbar__group:not(:last-of-type){border-right:1px solid transparent}.tox[dir=rtl] .tox-toolbar__group:not(:last-of-type){border-left:1px solid transparent}.tox .tox-tooltip{display:inline-block;max-width:15em;padding:8px;pointer-events:none;position:relative;width:max-content;z-index:1150}.tox .tox-tooltip__body{background-color:#222f3e;border-radius:6px;box-shadow:none;color:#fff;font-size:12px;font-style:normal;font-weight:600;overflow-wrap:break-word;padding:4px 6px;text-transform:none}@media (forced-colors:active){.tox .tox-tooltip__body{outline:outset 1px}}.tox .tox-tooltip__arrow{position:absolute}.tox .tox-tooltip--down .tox-tooltip__arrow{border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #222f3e;bottom:0;left:50%;position:absolute;transform:translateX(-50%)}.tox .tox-tooltip--up .tox-tooltip__arrow{border-bottom:8px solid #222f3e;border-left:8px solid transparent;border-right:8px solid transparent;left:50%;position:absolute;top:0;transform:translateX(-50%)}.tox .tox-tooltip--right .tox-tooltip__arrow{border-bottom:8px solid transparent;border-left:8px solid #222f3e;border-top:8px solid transparent;position:absolute;right:0;top:50%;transform:translateY(-50%)}.tox .tox-tooltip--left .tox-tooltip__arrow{border-bottom:8px solid transparent;border-right:8px solid #222f3e;border-top:8px solid transparent;left:0;position:absolute;top:50%;transform:translateY(-50%)}.tox .tox-tree{display:flex;flex-direction:column}.tox .tox-tree .tox-trbtn{align-items:center;background:0 0;border:0;border-radius:4px;box-shadow:none;color:#222f3e;display:flex;flex:0 0 auto;font-size:14px;font-style:normal;font-weight:400;height:28px;margin-bottom:4px;margin-top:4px;outline:0;overflow:hidden;padding:0;padding-left:8px;text-transform:none}.tox .tox-tree .tox-trbtn .tox-tree__label{cursor:default;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tox .tox-tree .tox-trbtn svg{display:block;fill:#222f3e}.tox .tox-tree .tox-trbtn:focus{background:#f0f0f0;border:0;box-shadow:none}.tox .tox-tree .tox-trbtn:hover{background:#f0f0f0;border:0;box-shadow:none;color:#222f3e}.tox .tox-tree .tox-trbtn:hover svg{fill:#222f3e}.tox .tox-tree .tox-trbtn:active{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-tree .tox-trbtn:active svg{fill:#222f3e}.tox .tox-tree .tox-trbtn--disabled,.tox .tox-tree .tox-trbtn--disabled:hover,.tox .tox-tree .tox-trbtn:disabled,.tox .tox-tree .tox-trbtn:disabled:hover{background:0 0;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-tree .tox-trbtn--disabled svg,.tox .tox-tree .tox-trbtn--disabled:hover svg,.tox .tox-tree .tox-trbtn:disabled svg,.tox .tox-tree .tox-trbtn:disabled:hover svg{fill:rgba(34,47,62,0.5)}.tox .tox-tree .tox-trbtn--enabled,.tox .tox-tree .tox-trbtn--enabled:hover{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-tree .tox-trbtn--enabled:hover>*,.tox .tox-tree .tox-trbtn--enabled>*{transform:none}.tox .tox-tree .tox-trbtn--enabled svg,.tox .tox-tree .tox-trbtn--enabled:hover svg{fill:#222f3e}.tox .tox-tree .tox-trbtn:focus:not(.tox-trbtn--disabled){color:#222f3e}.tox .tox-tree .tox-trbtn:focus:not(.tox-trbtn--disabled) svg{fill:#222f3e}.tox .tox-tree .tox-trbtn:active>*{transform:none}.tox .tox-tree .tox-trbtn--return{align-self:stretch;height:unset;width:16px}.tox .tox-tree .tox-trbtn--labeled{padding:0 4px;width:unset}.tox .tox-tree .tox-trbtn__vlabel{display:block;font-size:10px;font-weight:400;letter-spacing:-.025em;margin-bottom:4px;white-space:nowrap}.tox .tox-tree .tox-tree--directory{display:flex;flex-direction:column}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label{font-weight:700}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-mbtn{margin-left:auto}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-mbtn svg{fill:transparent}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-mbtn.tox-mbtn--active svg,.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-mbtn:focus svg{fill:#222f3e}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:focus .tox-mbtn svg,.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:hover .tox-mbtn svg{fill:#222f3e}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:hover:has(.tox-mbtn:hover){background-color:transparent;color:#222f3e}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:hover:has(.tox-mbtn:hover) .tox-chevron svg{fill:#222f3e}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-chevron{margin-right:6px}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:has(+ .tox-tree--directory__children--growing) .tox-chevron,.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:has(+ .tox-tree--directory__children--shrinking) .tox-chevron{transition:transform .5s ease-in-out}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:has(+ .tox-tree--directory__children--growing) .tox-chevron,.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:has(+ .tox-tree--directory__children--open) .tox-chevron{transform:rotate(90deg)}.tox .tox-tree .tox-tree--leaf__label{font-weight:400}.tox .tox-tree .tox-tree--leaf__label .tox-mbtn{margin-left:auto}.tox .tox-tree .tox-tree--leaf__label .tox-mbtn svg{fill:transparent}.tox .tox-tree .tox-tree--leaf__label .tox-mbtn.tox-mbtn--active svg,.tox .tox-tree .tox-tree--leaf__label .tox-mbtn:focus svg{fill:#222f3e}.tox .tox-tree .tox-tree--leaf__label:hover .tox-mbtn svg{fill:#222f3e}.tox .tox-tree .tox-tree--leaf__label:hover:has(.tox-mbtn:hover){background-color:transparent;color:#222f3e}.tox .tox-tree .tox-tree--leaf__label:hover:has(.tox-mbtn:hover) .tox-chevron svg{fill:#222f3e}.tox .tox-tree .tox-icon-custom-state{flex-grow:1;display:flex;justify-content:flex-end}.tox .tox-tree .tox-tree--directory__children{overflow:hidden;padding-left:16px}.tox .tox-tree .tox-tree--directory__children.tox-tree--directory__children--growing,.tox .tox-tree .tox-tree--directory__children.tox-tree--directory__children--shrinking{transition:height .5s ease-in-out}.tox .tox-tree .tox-trbtn.tox-tree--leaf__label{display:flex;justify-content:space-between}.tox .tox-revisionhistory__pane{padding:0!important}.tox .tox-revisionhistory__container{display:flex;flex-direction:column;height:100%}.tox .tox-revisionhistory{background-color:#fff;border-top:1px solid #f0f0f0;display:flex;flex:1;height:100%;margin-top:8px;overflow-x:auto;overflow-y:hidden;position:relative;width:100%}.tox .tox-revisionhistory--align-right{margin-left:auto}.tox .tox-revisionhistory__iframe{flex:1}.tox .tox-revisionhistory__sidebar{display:flex;flex-direction:column;height:100%;min-width:248px;width:316px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__sidebar-title{background-color:#fff;box-shadow:0 4px 8px 0 rgba(34,47,62,.1);color:#222f3e;font-size:20px;font-weight:400;line-height:28px;padding:12px;z-index:1}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions{background-color:#f0f0f0;display:flex;flex:1;flex-direction:column;gap:12px;overflow-y:auto;padding:10px 12px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions:focus{height:100%;position:relative;z-index:1}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0;border-radius:6px;bottom:1px;left:1px;right:1px;top:1px}@media (forced-colors:active){.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions:focus::after{border:2px solid highlight}}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card{background-color:#fff;border:1px solid #f0f0f0;border-radius:6px;color:#222f3e;cursor:pointer;display:flex;flex-direction:column;font-size:14px;gap:12px;padding:12px;width:100%}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card:hover{box-shadow:0 4px 8px 0 rgba(34,47,62,.1)}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card:focus{position:relative;z-index:1}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7 #006ce7;content:'';left:0;position:absolute;right:0;top:0;border-radius:6px;box-shadow:0 0 0 2px #006ce7;box-shadow:0 0 0 2px #006ce7!important}@media (forced-colors:active){.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card:focus::after{border:2px solid highlight}}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card.tox-revisionhistory__card--selected{background-color:#fff5cc;box-shadow:0 4px 8px 0 rgba(34,47,62,.1);position:relative}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card.tox-revisionhistory__card--selected::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7 #e3b82a;content:'';left:0;position:absolute;right:0;top:0;border-radius:6px;box-shadow:0 0 0 2px #e3b82a}@media (forced-colors:active){.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card.tox-revisionhistory__card--selected::after{border:2px solid highlight}}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card-date{display:flex;gap:12px;justify-content:space-between}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card-date-label{font-size:16px;line-height:24px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card-label{font-size:12px;font-weight:600;line-height:24px;padding:0}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card-author{align-items:center;display:flex;flex:1 0 0;gap:8px;height:36px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card-author-name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px;font-weight:700;line-height:18px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__avatar{border-radius:50%;height:36px;object-fit:cover;vertical-align:middle;width:36px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__norevision{color:rgba(34,47,62,.7);font-size:16px;line-height:24px;padding:5px 5.5px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card-check-icon{color:#222f3e;height:24px}.tox .tox-view-wrap,.tox .tox-view-wrap__slot-container{background-color:#fff;display:flex;flex:1;flex-direction:column;height:100%}.tox .tox-view{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.tox .tox-view__header{align-items:center;display:flex;font-size:16px;justify-content:space-between;padding:10px 10px 2px 10px;position:relative}.tox .tox-view__label{color:#222f3e;font-weight:700;line-height:24px;padding:4px 16px;text-align:center;white-space:nowrap}.tox .tox-view__label--normal{font-size:16px}.tox .tox-view__label--large{font-size:20px}.tox .tox-view--mobile.tox-view__header,.tox .tox-view--mobile.tox-view__toolbar{padding:8px}.tox .tox-view--scrolling{flex-wrap:nowrap;overflow-x:auto}.tox .tox-view__toolbar{display:flex;flex-direction:row;gap:8px;justify-content:space-between;overflow-x:auto;padding:10px 10px 2px 10px}.tox .tox-view__toolbar__group{display:flex;flex-direction:row;gap:12px}.tox .tox-view__header-end,.tox .tox-view__header-start{display:flex}.tox .tox-view__pane{height:100%;padding:8px;position:relative;width:100%}.tox .tox-view__pane_panel{border:1px solid #eee;border-radius:6px}.tox:not([dir=rtl]) .tox-view__header .tox-view__header-end>*,.tox:not([dir=rtl]) .tox-view__header .tox-view__header-start>*{margin-left:8px}.tox[dir=rtl] .tox-view__header .tox-view__header-end>*,.tox[dir=rtl] .tox-view__header .tox-view__header-start>*{margin-right:8px}.tox .tox-well{border:1px solid #eee;border-radius:6px;padding:8px;width:100%}.tox .tox-well>:first-child{margin-top:0}.tox .tox-well>:last-child{margin-bottom:0}.tox .tox-well>:only-child{margin:0}.tox .tox-custom-editor{border:1px solid #eee;border-radius:6px;display:flex;flex:1;overflow:hidden;position:relative}.tox .tox-dialog-loading::before{background-color:rgba(0,0,0,.5);content:"";height:100%;position:absolute;width:100%;z-index:1000}.tox .tox-tab{cursor:pointer}.tox .tox-dialog__content-js{display:flex;flex:1}.tox .tox-dialog__body-content .tox-collection{display:flex;flex:1}`);(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(hn,fn,It)=>{const Vn=fn==="UL"?"InsertUnorderedList":"InsertOrderedList";hn.execCommand(Vn,!1,It===!1?null:{"list-style-type":It})},s=hn=>{hn.addCommand("ApplyUnorderedListStyle",(fn,It)=>{e(hn,"UL",It["list-style-type"])}),hn.addCommand("ApplyOrderedListStyle",(fn,It)=>{e(hn,"OL",It["list-style-type"])})},a=hn=>fn=>fn.options.get(hn),d=hn=>{const fn=hn.options.register;fn("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),fn("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},b=a("advlist_number_styles"),_=a("advlist_bullet_styles"),_e=hn=>hn==null,nt=hn=>!_e(hn);var rt=tinymce.util.Tools.resolve("tinymce.util.Tools");class ct{constructor(fn,It){this.tag=fn,this.value=It}static some(fn){return new ct(!0,fn)}static none(){return ct.singletonNone}fold(fn,It){return this.tag?It(this.value):fn()}isSome(){return this.tag}isNone(){return!this.tag}map(fn){return this.tag?ct.some(fn(this.value)):ct.none()}bind(fn){return this.tag?fn(this.value):ct.none()}exists(fn){return this.tag&&fn(this.value)}forall(fn){return!this.tag||fn(this.value)}filter(fn){return!this.tag||fn(this.value)?this:ct.none()}getOr(fn){return this.tag?this.value:fn}or(fn){return this.tag?this:fn}getOrThunk(fn){return this.tag?this.value:fn()}orThunk(fn){return this.tag?this:fn()}getOrDie(fn){if(this.tag)return this.value;throw new Error(fn??"Called getOrDie on None")}static from(fn){return nt(fn)?ct.some(fn):ct.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(fn){this.tag&&fn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ct.singletonNone=new ct(!1);const dt=(hn,fn,It)=>{for(let Vn=0,ln=hn.length;Vn<ln;Vn++){const uo=hn[Vn];if(fn(uo,Vn))return ct.some(uo);if(It(uo,Vn))break}return ct.none()},pt=hn=>/\btox\-/.test(hn.className),bt=(hn,fn)=>hn.dom.isChildOf(fn,hn.getBody()),xt=hn=>fn=>nt(fn)&&hn.test(fn.nodeName),wt=xt(/^(OL|UL|DL)$/),Tt=xt(/^(TH|TD)$/),Rt=(hn,fn,It)=>dt(fn,Vn=>wt(Vn)&&!pt(Vn),Tt).exists(Vn=>Vn.nodeName===It&&bt(hn,Vn)),Mt=hn=>{const fn=hn.dom.getParent(hn.selection.getNode(),"ol,ul"),It=hn.dom.getStyle(fn,"listStyleType");return ct.from(It)},Et=(hn,fn)=>fn!==null&&!hn.dom.isEditable(fn),$t=(hn,fn)=>{const It=hn.dom.getParent(fn,"ol,ul,dl");return Et(hn,It)||!hn.selection.isEditable()},Xt=(hn,fn)=>{const It=hn.selection.getNode();return fn({parents:hn.dom.getParents(It),element:It}),hn.on("NodeChange",fn),()=>hn.off("NodeChange",fn)},Zt=hn=>hn.replace(/\-/g," ").replace(/\b\w/g,fn=>fn.toUpperCase()),Nt=hn=>_e(hn)||hn==="default"?"":hn,Jt=(hn,fn)=>It=>{const Vn=(uo,Ln)=>{const An=uo.selection.getStart(!0);It.setActive(Rt(uo,Ln,fn)),It.setEnabled(!$t(uo,An))};return Xt(hn,uo=>Vn(hn,uo.parents))},dn=(hn,fn,It,Vn,ln,uo)=>{hn.ui.registry.addSplitButton(fn,{tooltip:It,icon:ln==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:Ln=>{const An=rt.map(uo,Wn=>{const er=ln==="OL"?"num":"bull",no=Wn==="disc"||Wn==="decimal"?"default":Wn,Ro=Nt(Wn),On=Zt(Wn);return{type:"choiceitem",value:Ro,icon:"list-"+er+"-"+no,text:On}});Ln(An)},onAction:()=>hn.execCommand(Vn),onItemAction:(Ln,An)=>{e(hn,ln,An)},select:Ln=>Mt(hn).map(Wn=>Ln===Wn).getOr(!1),onSetup:Jt(hn,ln)})},Pn=(hn,fn,It,Vn,ln,uo)=>{hn.ui.registry.addToggleButton(fn,{active:!1,tooltip:It,icon:ln==="OL"?"ordered-list":"unordered-list",onSetup:Jt(hn,ln),onAction:()=>hn.queryCommandState(Vn)||uo===""?hn.execCommand(Vn):e(hn,ln,uo)})},an=(hn,fn,It,Vn,ln,uo)=>{uo.length>1?dn(hn,fn,It,Vn,ln,uo):Pn(hn,fn,It,Vn,ln,Nt(uo[0]))},Vt=hn=>{an(hn,"numlist","Numbered list","InsertOrderedList","OL",b(hn)),an(hn,"bullist","Bullet list","InsertUnorderedList","UL",_(hn))};var ao=()=>{o.add("advlist",hn=>{hn.hasPlugin("lists")?(d(hn),Vt(hn),s(hn)):console.error("Please use the Lists plugin together with the List Styles plugin.")})};ao()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),s=tinymce.util.Tools.resolve("tinymce.util.Tools");const a=hn=>fn=>fn.options.get(hn),d=hn=>{const fn=hn.options.register;fn("allow_html_in_named_anchor",{processor:"boolean",default:!1})},b=a("allow_html_in_named_anchor"),_="a:not([href])",_e=hn=>!hn,nt=hn=>hn.getAttribute("id")||hn.getAttribute("name")||"",rt=hn=>hn.nodeName.toLowerCase()==="a",ct=hn=>rt(hn)&&!hn.getAttribute("href")&&nt(hn)!=="",dt=hn=>ct(hn)&&!hn.firstChild,pt=hn=>{const fn=hn.dom;e(fn).walk(hn.selection.getRng(),It=>{s.each(It,Vn=>{dt(Vn)&&fn.remove(Vn,!1)})})},bt=hn=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(hn),xt=hn=>hn.dom.getParent(hn.selection.getStart(),_),wt=hn=>{const fn=xt(hn);return fn?nt(fn):""},Tt=(hn,fn)=>{hn.undoManager.transact(()=>{b(hn)||hn.selection.collapse(!0),hn.selection.isCollapsed()?hn.insertContent(hn.dom.createHTML("a",{id:fn})):(pt(hn),hn.formatter.remove("namedAnchor",void 0,void 0,!0),hn.formatter.apply("namedAnchor",{value:fn}),hn.addVisual())})},Rt=(hn,fn,It)=>{It.removeAttribute("name"),It.id=fn,hn.addVisual(),hn.undoManager.add()},Mt=(hn,fn)=>{const It=xt(hn);It?Rt(hn,fn,It):Tt(hn,fn),hn.focus()},Et=(hn,fn)=>bt(fn)?(Mt(hn,fn),!0):(hn.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),$t=hn=>{const fn=wt(hn);hn.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:fn},onSubmit:It=>{Et(hn,It.getData().id)&&It.close()}})},Xt=hn=>{hn.addCommand("mceAnchor",()=>{$t(hn)})},Zt=hn=>_e(hn.attr("href"))&&!_e(hn.attr("id")||hn.attr("name")),Nt=hn=>Zt(hn)&&!hn.firstChild,Jt=hn=>fn=>{for(let It=0;It<fn.length;It++){const Vn=fn[It];Nt(Vn)&&Vn.attr("contenteditable",hn)}},dn=hn=>{hn.on("PreInit",()=>{hn.parser.addNodeFilter("a",Jt("false")),hn.serializer.addNodeFilter("a",Jt(null))})},Pn=hn=>{hn.formatter.register("namedAnchor",{inline:"a",selector:_,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(fn,It,Vn)=>ct(fn)})},an=hn=>fn=>{const It=()=>{fn.setEnabled(hn.selection.isEditable())};return hn.on("NodeChange",It),It(),()=>{hn.off("NodeChange",It)}},Vt=hn=>{const fn=()=>hn.execCommand("mceAnchor");hn.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:fn,onSetup:It=>{const Vn=hn.selection.selectorChangedWithUnbind("a:not([href])",It.setActive).unbind,ln=an(hn)(It);return()=>{Vn(),ln()}}}),hn.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:fn,onSetup:an(hn)})};var ao=()=>{o.add("anchor",hn=>{d(hn),dn(hn),Xt(hn),Vt(hn),hn.on("PreInit",()=>{Pn(hn)})})};ao()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,s=no=>Ro=>Ro.options.get(no),a=no=>{const Ro=no.options.register;Ro("autolink_pattern",{processor:"regexp",default:new RegExp("^"+e().source+"$","i")}),Ro("link_default_target",{processor:"string"}),Ro("link_default_protocol",{processor:"string",default:"https"})},d=s("autolink_pattern"),b=s("link_default_target"),_=s("link_default_protocol"),_e=s("allow_unsafe_link_target"),nt=(no,Ro,On)=>{var _o;return On(no,Ro.prototype)?!0:((_o=no.constructor)===null||_o===void 0?void 0:_o.name)===Ro.name},rt=no=>{const Ro=typeof no;return no===null?"null":Ro==="object"&&Array.isArray(no)?"array":Ro==="object"&&nt(no,String,(On,_o)=>_o.isPrototypeOf(On))?"string":Ro},ct=no=>Ro=>rt(Ro)===no,dt=no=>Ro=>no===Ro,pt=ct("string"),bt=dt(void 0),xt=no=>no==null,wt=no=>!xt(no),Tt=no=>Ro=>!no(Ro),Rt=Object.hasOwnProperty,Mt=(no,Ro)=>Rt.call(no,Ro),Et=(no,Ro,On)=>no.length>=Ro.length&&no.substr(On,On+Ro.length)===Ro,$t=(no,Ro,On=0,_o)=>{const Yt=no.indexOf(Ro,On);return Yt!==-1?bt(_o)?!0:Yt+Ro.length<=_o:!1},Xt=(no,Ro)=>Et(no,Ro,0),Zt="\uFEFF",Nt=no=>no===Zt,Jt=no=>no.replace(/\uFEFF/g,"");var dn=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const Pn=no=>no.nodeType===3,an=no=>no.nodeType===1,Vt=no=>/^[(\[{ \u00a0]$/.test(no),ao=no=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(no),hn=no=>/[?!,.;:]/.test(no),fn=(no,Ro,On)=>{for(let _o=Ro-1;_o>=0;_o--){const Yt=no.charAt(_o);if(!Nt(Yt)&&On(Yt))return _o}return-1},It=(no,Ro)=>{let On=no,_o=Ro;for(;an(On)&&On.childNodes[_o];)On=On.childNodes[_o],_o=Pn(On)?On.data.length:On.childNodes.length;return{container:On,offset:_o}},Vn=(no,Ro)=>{var On;const _o=no.schema.getVoidElements(),Yt=d(no),{dom:jr,selection:lo}=no;if(jr.getParent(lo.getNode(),"a[href]")!==null||no.mode.isReadOnly())return null;const Ho=lo.getRng(),mo=dn(jr,Hn=>jr.isBlock(Hn)||Mt(_o,Hn.nodeName.toLowerCase())||jr.getContentEditable(Hn)==="false"),{container:Co,offset:mn}=It(Ho.endContainer,Ho.endOffset),wn=(On=jr.getParent(Co,jr.isBlock))!==null&&On!==void 0?On:jr.getRoot(),Dn=mo.backwards(Co,mn+Ro,(Hn,Tn)=>{const Jn=Hn.data,bo=fn(Jn,Tn,Tt(Vt));return bo===-1||hn(Jn[bo])?bo:bo+1},wn);if(!Dn)return null;let rn=Dn.container;const Cn=mo.backwards(Dn.container,Dn.offset,(Hn,Tn)=>{rn=Hn;const Jn=fn(Hn.data,Tn,Vt);return Jn===-1?Jn:Jn+1},wn),Nn=jr.createRng();Cn?Nn.setStart(Cn.container,Cn.offset):Nn.setStart(rn,0),Nn.setEnd(Dn.container,Dn.offset);const So=Jt(Nn.toString()).match(Yt);if(So){let Hn=So[0];return Xt(Hn,"www.")?Hn=_(no)+"://"+Hn:$t(Hn,"@")&&!ao(Hn)&&(Hn="mailto:"+Hn),{rng:Nn,url:Hn}}else return null},ln=(no,Ro)=>{const{dom:On,selection:_o}=no,{rng:Yt,url:jr}=Ro,lo=_o.getBookmark();_o.setRng(Yt);const Ho="createlink",mo={command:Ho,ui:!1,value:jr};if(!no.dispatch("BeforeExecCommand",mo).isDefaultPrevented()){no.getDoc().execCommand(Ho,!1,jr),no.dispatch("ExecCommand",mo);const mn=b(no);if(pt(mn)){const wn=_o.getNode();On.setAttrib(wn,"target",mn),mn==="_blank"&&!_e(no)&&On.setAttrib(wn,"rel","noopener")}}_o.moveToBookmark(lo),no.nodeChanged()},uo=no=>{const Ro=Vn(no,-1);wt(Ro)&&ln(no,Ro)},Ln=uo,An=no=>{const Ro=Vn(no,0);wt(Ro)&&ln(no,Ro)},Wn=no=>{no.on("keydown",Ro=>{Ro.keyCode===13&&!Ro.isDefaultPrevented()&&An(no)}),no.on("keyup",Ro=>{Ro.keyCode===32?uo(no):(Ro.keyCode===48&&Ro.shiftKey||Ro.keyCode===221)&&Ln(no)})};var er=()=>{o.add("autolink",no=>{a(no),Wn(no)})};er()})();(function(){const o=Mt=>{let Et=Mt;return{get:()=>Et,set:Zt=>{Et=Zt}}};var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),s=tinymce.util.Tools.resolve("tinymce.Env");const a=Mt=>Mt.dispatch("ResizeEditor"),d=Mt=>Et=>Et.options.get(Mt),b=Mt=>{const Et=Mt.options.register;Et("autoresize_overflow_padding",{processor:"number",default:1}),Et("autoresize_bottom_margin",{processor:"number",default:50})},_=d("min_height"),_e=d("max_height"),nt=d("autoresize_overflow_padding"),rt=d("autoresize_bottom_margin"),ct=Mt=>Mt.plugins.fullscreen&&Mt.plugins.fullscreen.isFullscreen(),dt=(Mt,Et)=>{const $t=Mt.getBody();$t&&($t.style.overflowY=Et?"":"hidden",Et||($t.scrollTop=0))},pt=(Mt,Et,$t,Xt)=>{var Zt;const Nt=parseInt((Zt=Mt.getStyle(Et,$t,Xt))!==null&&Zt!==void 0?Zt:"",10);return isNaN(Nt)?0:Nt},bt=Mt=>{if((Mt==null?void 0:Mt.type.toLowerCase())==="setcontent"){const Et=Mt;return Et.selection===!0||Et.paste===!0}else return!1},xt=(Mt,Et,$t,Xt)=>{var Zt;const Nt=Mt.dom,Jt=Mt.getDoc();if(!Jt)return;if(ct(Mt)){dt(Mt,!0);return}const dn=Jt.documentElement,Pn=Xt?Xt():nt(Mt),an=(Zt=_(Mt))!==null&&Zt!==void 0?Zt:Mt.getElement().offsetHeight;let Vt=an;const ao=pt(Nt,dn,"margin-top",!0),hn=pt(Nt,dn,"margin-bottom",!0);let fn=dn.offsetHeight+ao+hn+Pn;fn<0&&(fn=0);const It=Mt.getContainer().offsetHeight,Vn=Mt.getContentAreaContainer().offsetHeight,ln=It-Vn;fn+ln>an&&(Vt=fn+ln);const uo=_e(Mt);uo&&Vt>uo?(Vt=uo,dt(Mt,!0)):dt(Mt,!1);const Ln=Et.get();if(Ln.set&&(Mt.dom.setStyles(Mt.getDoc().documentElement,{"min-height":0}),Mt.dom.setStyles(Mt.getBody(),{"min-height":"inherit"})),Vt!==Ln.totalHeight&&(fn-Pn!==Ln.contentHeight||!Ln.set)){const An=Vt-Ln.totalHeight;if(Nt.setStyle(Mt.getContainer(),"height",Vt+"px"),Et.set({totalHeight:Vt,contentHeight:fn,set:!0}),a(Mt),s.browser.isSafari()&&(s.os.isMacOS()||s.os.isiOS())){const Wn=Mt.getWin();Wn.scrollTo(Wn.pageXOffset,Wn.pageYOffset)}Mt.hasFocus()&&bt($t)&&Mt.selection.scrollIntoView(),(s.browser.isSafari()||s.browser.isChromium())&&An<0&&xt(Mt,Et,$t,Xt)}},wt=(Mt,Et)=>{const $t=()=>rt(Mt);Mt.on("init",Xt=>{const Zt=nt(Mt),Nt=Mt.dom;Nt.setStyles(Mt.getDoc().documentElement,{height:"auto"}),s.browser.isEdge()||s.browser.isIE()?Nt.setStyles(Mt.getBody(),{paddingLeft:Zt,paddingRight:Zt,"min-height":0}):Nt.setStyles(Mt.getBody(),{paddingLeft:Zt,paddingRight:Zt}),xt(Mt,Et,Xt,$t)}),Mt.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",Xt=>{xt(Mt,Et,Xt,$t)})},Tt=(Mt,Et)=>{Mt.addCommand("mceAutoResize",()=>{xt(Mt,Et)})};var Rt=()=>{e.add("autoresize",Mt=>{if(b(Mt),Mt.options.isSet("resize")||Mt.options.set("resize",!1),!Mt.inline){const Et=o({totalHeight:0,contentHeight:0,set:!1});Tt(Mt,Et),wt(Mt,Et)}})};Rt()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(ln,uo,Ln)=>{var An;return Ln(ln,uo.prototype)?!0:((An=ln.constructor)===null||An===void 0?void 0:An.name)===uo.name},s=ln=>{const uo=typeof ln;return ln===null?"null":uo==="object"&&Array.isArray(ln)?"array":uo==="object"&&e(ln,String,(Ln,An)=>An.isPrototypeOf(Ln))?"string":uo},a=ln=>uo=>s(uo)===ln,d=ln=>uo=>ln===uo,b=a("string"),_=d(void 0);var _e=tinymce.util.Tools.resolve("tinymce.util.Delay"),nt=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),rt=tinymce.util.Tools.resolve("tinymce.util.Tools");const ct=ln=>ln.dispatch("RestoreDraft"),dt=ln=>ln.dispatch("StoreDraft"),pt=ln=>ln.dispatch("RemoveDraft"),bt=ln=>{const uo={s:1e3,m:6e4},Ln=/^(\d+)([ms]?)$/.exec(ln);return(Ln&&Ln[2]?uo[Ln[2]]:1)*parseInt(ln,10)},xt=ln=>uo=>uo.options.get(ln),wt=ln=>{const uo=ln.options.register,Ln=An=>{const Wn=b(An);return Wn?{value:bt(An),valid:Wn}:{valid:!1,message:"Must be a string."}};uo("autosave_ask_before_unload",{processor:"boolean",default:!0}),uo("autosave_prefix",{processor:"string",default:"tinymce-autosave-{path}{query}{hash}-{id}-"}),uo("autosave_restore_when_empty",{processor:"boolean",default:!1}),uo("autosave_interval",{processor:Ln,default:"30s"}),uo("autosave_retention",{processor:Ln,default:"20m"})},Tt=xt("autosave_ask_before_unload"),Rt=xt("autosave_restore_when_empty"),Mt=xt("autosave_interval"),Et=xt("autosave_retention"),$t=ln=>{const uo=document.location;return ln.options.get("autosave_prefix").replace(/{path}/g,uo.pathname).replace(/{query}/g,uo.search).replace(/{hash}/g,uo.hash).replace(/{id}/g,ln.id)},Xt=(ln,uo)=>{if(_(uo))return ln.dom.isEmpty(ln.getBody());{const Ln=rt.trim(uo);if(Ln==="")return!0;{const An=new DOMParser().parseFromString(Ln,"text/html");return ln.dom.isEmpty(An)}}},Zt=ln=>{var uo;const Ln=parseInt((uo=nt.getItem($t(ln)+"time"))!==null&&uo!==void 0?uo:"0",10)||0;return new Date().getTime()-Ln>Et(ln)?(Nt(ln,!1),!1):!0},Nt=(ln,uo)=>{const Ln=$t(ln);nt.removeItem(Ln+"draft"),nt.removeItem(Ln+"time"),uo!==!1&&pt(ln)},Jt=ln=>{const uo=$t(ln);!Xt(ln)&&ln.isDirty()&&(nt.setItem(uo+"draft",ln.getContent({format:"raw",no_events:!0})),nt.setItem(uo+"time",new Date().getTime().toString()),dt(ln))},dn=ln=>{var uo;const Ln=$t(ln);Zt(ln)&&(ln.setContent((uo=nt.getItem(Ln+"draft"))!==null&&uo!==void 0?uo:"",{format:"raw"}),ct(ln))},Pn=ln=>{const uo=Mt(ln);_e.setEditorInterval(ln,()=>{Jt(ln)},uo)},an=ln=>{ln.undoManager.transact(()=>{dn(ln),Nt(ln)}),ln.focus()},Vt=ln=>({hasDraft:()=>Zt(ln),storeDraft:()=>Jt(ln),restoreDraft:()=>dn(ln),removeDraft:uo=>Nt(ln,uo),isEmpty:uo=>Xt(ln,uo)});var ao=tinymce.util.Tools.resolve("tinymce.EditorManager");const hn=ln=>{ln.editorManager.on("BeforeUnload",uo=>{let Ln;rt.each(ao.get(),An=>{An.plugins.autosave&&An.plugins.autosave.storeDraft(),!Ln&&An.isDirty()&&Tt(An)&&(Ln=An.translate("You have unsaved changes are you sure you want to navigate away?"))}),Ln&&(uo.preventDefault(),uo.returnValue=Ln)})},fn=ln=>uo=>{const Ln=()=>Zt(ln)&&!ln.mode.isReadOnly();uo.setEnabled(Ln());const An=()=>uo.setEnabled(Ln());return ln.on("StoreDraft RestoreDraft RemoveDraft",An),()=>ln.off("StoreDraft RestoreDraft RemoveDraft",An)},It=ln=>{Pn(ln);const uo=()=>{an(ln)};ln.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:uo,onSetup:fn(ln)}),ln.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:uo,onSetup:fn(ln)})};var Vn=()=>{o.add("autosave",ln=>(wt(ln),hn(ln),It(ln),ln.on("init",()=>{Rt(ln)&&ln.dom.isEmpty(ln.getBody())&&dn(ln)}),Vt(ln)))};Vn()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(mn,wn)=>mn.dispatch("insertCustomChar",{chr:wn}),s=(mn,wn)=>{const Dn=e(mn,wn).chr;mn.execCommand("mceInsertContent",!1,Dn)},a=(mn,wn,Dn)=>{var rn;return Dn(mn,wn.prototype)?!0:((rn=mn.constructor)===null||rn===void 0?void 0:rn.name)===wn.name},d=mn=>{const wn=typeof mn;return mn===null?"null":wn==="object"&&Array.isArray(mn)?"array":wn==="object"&&a(mn,String,(Dn,rn)=>rn.isPrototypeOf(Dn))?"string":wn},b=mn=>wn=>d(wn)===mn,_=mn=>wn=>typeof wn===mn,_e=mn=>wn=>mn===wn,nt=b("array"),rt=_e(null),ct=_e(void 0),dt=mn=>mn==null,pt=mn=>!dt(mn),bt=_("function"),wt=(mn=>()=>mn)(!1);class Tt{constructor(wn,Dn){this.tag=wn,this.value=Dn}static some(wn){return new Tt(!0,wn)}static none(){return Tt.singletonNone}fold(wn,Dn){return this.tag?Dn(this.value):wn()}isSome(){return this.tag}isNone(){return!this.tag}map(wn){return this.tag?Tt.some(wn(this.value)):Tt.none()}bind(wn){return this.tag?wn(this.value):Tt.none()}exists(wn){return this.tag&&wn(this.value)}forall(wn){return!this.tag||wn(this.value)}filter(wn){return!this.tag||wn(this.value)?this:Tt.none()}getOr(wn){return this.tag?this.value:wn}or(wn){return this.tag?this:wn}getOrThunk(wn){return this.tag?this.value:wn()}orThunk(wn){return this.tag?this:wn()}getOrDie(wn){if(this.tag)return this.value;throw new Error(wn??"Called getOrDie on None")}static from(wn){return pt(wn)?Tt.some(wn):Tt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(wn){this.tag&&wn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Tt.singletonNone=new Tt(!1);const Rt=Array.prototype.push,Mt=(mn,wn)=>{const Dn=mn.length,rn=new Array(Dn);for(let Cn=0;Cn<Dn;Cn++){const Nn=mn[Cn];rn[Cn]=wn(Nn,Cn)}return rn},Et=(mn,wn)=>{for(let Dn=0,rn=mn.length;Dn<rn;Dn++){const Cn=mn[Dn];wn(Cn,Dn)}},$t=(mn,wn,Dn)=>{for(let rn=0,Cn=mn.length;rn<Cn;rn++){const Nn=mn[rn];if(wn(Nn,rn))return Tt.some(Nn);if(Dn(Nn,rn))break}return Tt.none()},Xt=(mn,wn)=>$t(mn,wn,wt),Zt=mn=>{const wn=[];for(let Dn=0,rn=mn.length;Dn<rn;++Dn){if(!nt(mn[Dn]))throw new Error("Arr.flatten item "+Dn+" was not an array, input: "+mn);Rt.apply(wn,mn[Dn])}return wn},Nt=(mn,wn)=>Zt(Mt(mn,wn));var Jt=tinymce.util.Tools.resolve("tinymce.util.Tools");const dn=mn=>wn=>wn.options.get(mn),Pn=mn=>{const wn=mn.options.register,Dn=rn=>bt(rn)||nt(rn);wn("charmap",{processor:Dn}),wn("charmap_append",{processor:Dn})},an=dn("charmap"),Vt=dn("charmap_append"),ao=Jt.isArray,hn="User Defined",fn=()=>[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}],It=mn=>Jt.grep(mn,wn=>ao(wn)&&wn.length===2),Vn=mn=>ao(mn)?It(mn):typeof mn=="function"?mn():[],ln=(mn,wn)=>{const Dn=an(mn);Dn&&(wn=[{name:hn,characters:Vn(Dn)}]);const rn=Vt(mn);if(rn){const Cn=Jt.grep(wn,Nn=>Nn.name===hn);return Cn.length?(Cn[0].characters=[...Cn[0].characters,...Vn(rn)],wn):wn.concat({name:hn,characters:Vn(rn)})}return wn},uo=mn=>{const wn=ln(mn,fn());return wn.length>1?[{name:"All",characters:Nt(wn,Dn=>Dn.characters)}].concat(wn):wn},Ln=mn=>({getCharMap:()=>uo(mn),insertChar:rn=>{s(mn,rn)}}),An=mn=>{let wn=mn;return{get:()=>wn,set:Cn=>{wn=Cn}}},Wn=(mn,wn)=>{let Dn=null;const rn=()=>{rt(Dn)||(clearTimeout(Dn),Dn=null)};return{cancel:rn,throttle:(...Nn)=>{rn(),Dn=setTimeout(()=>{Dn=null,mn.apply(null,Nn)},wn)}}},er=(mn,wn,Dn=0,rn)=>{const Cn=mn.indexOf(wn,Dn);return Cn!==-1?ct(rn)?!0:Cn+wn.length<=rn:!1},no=String.fromCodePoint,Ro=(mn,wn,Dn)=>er(no(mn).toLowerCase(),Dn)?!0:er(wn.toLowerCase(),Dn)||er(wn.toLowerCase().replace(/\s+/g,""),Dn),On=(mn,wn)=>{const Dn=[],rn=wn.toLowerCase();return Et(mn.characters,Cn=>{Ro(Cn[0],Cn[1],rn)&&Dn.push(Cn)}),Mt(Dn,Cn=>({text:Cn[1],value:no(Cn[0]),icon:no(Cn[0])}))},_o="pattern",Yt=(mn,wn)=>{const Dn=()=>[{label:"Search",type:"input",name:_o},{type:"collection",name:"results"}],rn=()=>Mt(wn,wo=>({title:wo.name,name:wo.name,items:Dn()})),Cn=()=>({type:"panel",items:Dn()}),Nn=()=>({type:"tabpanel",tabs:rn()}),zn=wn.length===1?An(hn):An("All"),So=(wo,Oo)=>{Xt(wn,Ir=>Ir.name===zn.get()).each(Ir=>{const sr=On(Ir,Oo);wo.setData({results:sr})})},Tn=Wn(wo=>{const Oo=wo.getData().pattern;So(wo,Oo)},40),Jn=wn.length===1?Cn():Nn(),bo={pattern:"",results:On(wn[0],"")},$n={title:"Special Character",size:"normal",body:Jn,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:bo,onAction:(wo,Oo)=>{Oo.name==="results"&&(s(mn,Oo.value),wo.close())},onTabChange:(wo,Oo)=>{zn.set(Oo.newTabName),Tn.throttle(wo)},onChange:(wo,Oo)=>{Oo.name===_o&&Tn.throttle(wo)}};mn.windowManager.open($n).focus(_o)},jr=(mn,wn)=>{mn.addCommand("mceShowCharmap",()=>{Yt(mn,wn)})},lo=(mn,wn)=>{mn.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(Dn,rn)=>new Promise((Cn,Nn)=>{Cn(On(wn,Dn))}),onAction:(Dn,rn,Cn)=>{mn.selection.setRng(rn),mn.insertContent(Cn),Dn.hide()}})},Ho=mn=>wn=>{const Dn=()=>{wn.setEnabled(mn.selection.isEditable())};return mn.on("NodeChange",Dn),Dn(),()=>{mn.off("NodeChange",Dn)}},mo=mn=>{const wn=()=>mn.execCommand("mceShowCharmap");mn.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:wn,onSetup:Ho(mn)}),mn.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:wn,onSetup:Ho(mn)})};var Co=()=>{o.add("charmap",mn=>{Pn(mn);const wn=uo(mn);return jr(mn,wn),mo(mn),lo(mn,wn[0]),Ln(mn)})};Co()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(_e,nt)=>{_e.focus(),_e.undoManager.transact(()=>{_e.setContent(nt)}),_e.selection.setCursorLocation(),_e.nodeChanged()},s=_e=>_e.getContent({source_view:!0}),a=_e=>{const nt=s(_e);_e.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:nt},onSubmit:rt=>{e(_e,rt.getData().code),rt.close()}})},d=_e=>{_e.addCommand("mceCodeEditor",()=>{a(_e)})},b=_e=>{const nt=()=>_e.execCommand("mceCodeEditor");_e.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:nt}),_e.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:nt})};var _=()=>{o.add("code",_e=>(d(_e),b(_e),{}))};_()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=It=>It==null,s=It=>!e(It),a=()=>{},d=It=>()=>It;class b{constructor(Vn,ln){this.tag=Vn,this.value=ln}static some(Vn){return new b(!0,Vn)}static none(){return b.singletonNone}fold(Vn,ln){return this.tag?ln(this.value):Vn()}isSome(){return this.tag}isNone(){return!this.tag}map(Vn){return this.tag?b.some(Vn(this.value)):b.none()}bind(Vn){return this.tag?Vn(this.value):b.none()}exists(Vn){return this.tag&&Vn(this.value)}forall(Vn){return!this.tag||Vn(this.value)}filter(Vn){return!this.tag||Vn(this.value)?this:b.none()}getOr(Vn){return this.tag?this.value:Vn}or(Vn){return this.tag?this:Vn}getOrThunk(Vn){return this.tag?this.value:Vn()}orThunk(Vn){return this.tag?this:Vn()}getOrDie(Vn){if(this.tag)return this.value;throw new Error(Vn??"Called getOrDie on None")}static from(Vn){return s(Vn)?b.some(Vn):b.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Vn){this.tag&&Vn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}b.singletonNone=new b(!1);const _=(It,Vn)=>Vn>=0&&Vn<It.length?b.some(It[Vn]):b.none(),_e=It=>_(It,0);var nt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");const rt=typeof window<"u"?window:Function("return this;")(),ct=function(It,Vn,ln){const uo=window.Prism;window.Prism={manual:!0};var Ln=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{},An=function(Wn){var er=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,no=0,Ro={},On={manual:Wn.Prism&&Wn.Prism.manual,disableWorkerMessageHandler:Wn.Prism&&Wn.Prism.disableWorkerMessageHandler,util:{encode:function rn(Cn){return Cn instanceof _o?new _o(Cn.type,rn(Cn.content),Cn.alias):Array.isArray(Cn)?Cn.map(rn):Cn.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(rn){return Object.prototype.toString.call(rn).slice(8,-1)},objId:function(rn){return rn.__id||Object.defineProperty(rn,"__id",{value:++no}),rn.__id},clone:function rn(Cn,Nn){Nn=Nn||{};var zn,So;switch(On.util.type(Cn)){case"Object":if(So=On.util.objId(Cn),Nn[So])return Nn[So];zn={},Nn[So]=zn;for(var Hn in Cn)Cn.hasOwnProperty(Hn)&&(zn[Hn]=rn(Cn[Hn],Nn));return zn;case"Array":return So=On.util.objId(Cn),Nn[So]?Nn[So]:(zn=[],Nn[So]=zn,Cn.forEach(function(Tn,Jn){zn[Jn]=rn(Tn,Nn)}),zn);default:return Cn}},getLanguage:function(rn){for(;rn;){var Cn=er.exec(rn.className);if(Cn)return Cn[1].toLowerCase();rn=rn.parentElement}return"none"},setLanguage:function(rn,Cn){rn.className=rn.className.replace(RegExp(er,"gi"),""),rn.classList.add("language-"+Cn)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(zn){var rn=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(zn.stack)||[])[1];if(rn){var Cn=document.getElementsByTagName("script");for(var Nn in Cn)if(Cn[Nn].src==rn)return Cn[Nn]}return null}},isActive:function(rn,Cn,Nn){for(var zn="no-"+Cn;rn;){var So=rn.classList;if(So.contains(Cn))return!0;if(So.contains(zn))return!1;rn=rn.parentElement}return!!Nn}},languages:{plain:Ro,plaintext:Ro,text:Ro,txt:Ro,extend:function(rn,Cn){var Nn=On.util.clone(On.languages[rn]);for(var zn in Cn)Nn[zn]=Cn[zn];return Nn},insertBefore:function(rn,Cn,Nn,zn){zn=zn||On.languages;var So=zn[rn],Hn={};for(var Tn in So)if(So.hasOwnProperty(Tn)){if(Tn==Cn)for(var Jn in Nn)Nn.hasOwnProperty(Jn)&&(Hn[Jn]=Nn[Jn]);Nn.hasOwnProperty(Tn)||(Hn[Tn]=So[Tn])}var bo=zn[rn];return zn[rn]=Hn,On.languages.DFS(On.languages,function($n,oo){oo===bo&&$n!=rn&&(this[$n]=Hn)}),Hn},DFS:function rn(Cn,Nn,zn,So){So=So||{};var Hn=On.util.objId;for(var Tn in Cn)if(Cn.hasOwnProperty(Tn)){Nn.call(Cn,Tn,Cn[Tn],zn||Tn);var Jn=Cn[Tn],bo=On.util.type(Jn);bo==="Object"&&!So[Hn(Jn)]?(So[Hn(Jn)]=!0,rn(Jn,Nn,null,So)):bo==="Array"&&!So[Hn(Jn)]&&(So[Hn(Jn)]=!0,rn(Jn,Nn,Tn,So))}}},plugins:{},highlightAll:function(rn,Cn){On.highlightAllUnder(document,rn,Cn)},highlightAllUnder:function(rn,Cn,Nn){var zn={callback:Nn,container:rn,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};On.hooks.run("before-highlightall",zn),zn.elements=Array.prototype.slice.apply(zn.container.querySelectorAll(zn.selector)),On.hooks.run("before-all-elements-highlight",zn);for(var So=0,Hn;Hn=zn.elements[So++];)On.highlightElement(Hn,Cn===!0,zn.callback)},highlightElement:function(rn,Cn,Nn){var zn=On.util.getLanguage(rn),So=On.languages[zn];On.util.setLanguage(rn,zn);var Hn=rn.parentElement;Hn&&Hn.nodeName.toLowerCase()==="pre"&&On.util.setLanguage(Hn,zn);var Tn=rn.textContent,Jn={element:rn,language:zn,grammar:So,code:Tn};function bo(oo){Jn.highlightedCode=oo,On.hooks.run("before-insert",Jn),Jn.element.innerHTML=Jn.highlightedCode,On.hooks.run("after-highlight",Jn),On.hooks.run("complete",Jn),Nn&&Nn.call(Jn.element)}if(On.hooks.run("before-sanity-check",Jn),Hn=Jn.element.parentElement,Hn&&Hn.nodeName.toLowerCase()==="pre"&&!Hn.hasAttribute("tabindex")&&Hn.setAttribute("tabindex","0"),!Jn.code){On.hooks.run("complete",Jn),Nn&&Nn.call(Jn.element);return}if(On.hooks.run("before-highlight",Jn),!Jn.grammar){bo(On.util.encode(Jn.code));return}if(Cn&&Wn.Worker){var $n=new Worker(On.filename);$n.onmessage=function(oo){bo(oo.data)},$n.postMessage(JSON.stringify({language:Jn.language,code:Jn.code,immediateClose:!0}))}else bo(On.highlight(Jn.code,Jn.grammar,Jn.language))},highlight:function(rn,Cn,Nn){var zn={code:rn,grammar:Cn,language:Nn};if(On.hooks.run("before-tokenize",zn),!zn.grammar)throw new Error('The language "'+zn.language+'" has no grammar.');return zn.tokens=On.tokenize(zn.code,zn.grammar),On.hooks.run("after-tokenize",zn),_o.stringify(On.util.encode(zn.tokens),zn.language)},tokenize:function(rn,Cn){var Nn=Cn.rest;if(Nn){for(var zn in Nn)Cn[zn]=Nn[zn];delete Cn.rest}var So=new lo;return Ho(So,So.head,rn),jr(rn,So,Cn,So.head,0),Co(So)},hooks:{all:{},add:function(rn,Cn){var Nn=On.hooks.all;Nn[rn]=Nn[rn]||[],Nn[rn].push(Cn)},run:function(rn,Cn){var Nn=On.hooks.all[rn];if(!(!Nn||!Nn.length))for(var zn=0,So;So=Nn[zn++];)So(Cn)}},Token:_o};Wn.Prism=On;function _o(rn,Cn,Nn,zn){this.type=rn,this.content=Cn,this.alias=Nn,this.length=(zn||"").length|0}_o.stringify=function rn(Cn,Nn){if(typeof Cn=="string")return Cn;if(Array.isArray(Cn)){var zn="";return Cn.forEach(function(bo){zn+=rn(bo,Nn)}),zn}var So={type:Cn.type,content:rn(Cn.content,Nn),tag:"span",classes:["token",Cn.type],attributes:{},language:Nn},Hn=Cn.alias;Hn&&(Array.isArray(Hn)?Array.prototype.push.apply(So.classes,Hn):So.classes.push(Hn)),On.hooks.run("wrap",So);var Tn="";for(var Jn in So.attributes)Tn+=" "+Jn+'="'+(So.attributes[Jn]||"").replace(/"/g,"&quot;")+'"';return"<"+So.tag+' class="'+So.classes.join(" ")+'"'+Tn+">"+So.content+"</"+So.tag+">"};function Yt(rn,Cn,Nn,zn){rn.lastIndex=Cn;var So=rn.exec(Nn);if(So&&zn&&So[1]){var Hn=So[1].length;So.index+=Hn,So[0]=So[0].slice(Hn)}return So}function jr(rn,Cn,Nn,zn,So,Hn){for(var Tn in Nn)if(!(!Nn.hasOwnProperty(Tn)||!Nn[Tn])){var Jn=Nn[Tn];Jn=Array.isArray(Jn)?Jn:[Jn];for(var bo=0;bo<Jn.length;++bo){if(Hn&&Hn.cause==Tn+","+bo)return;var $n=Jn[bo],oo=$n.inside,wo=!!$n.lookbehind,Oo=!!$n.greedy,Ir=$n.alias;if(Oo&&!$n.pattern.global){var sr=$n.pattern.toString().match(/[imsuy]*$/)[0];$n.pattern=RegExp($n.pattern.source,sr+"g")}for(var vr=$n.pattern||$n,as=zn.next,_r=So;as!==Cn.tail&&!(Hn&&_r>=Hn.reach);_r+=as.value.length,as=as.next){var fs=as.value;if(Cn.length>rn.length)return;if(!(fs instanceof _o)){var Ss=1,As;if(Oo){if(As=Yt(vr,_r,rn,wo),!As||As.index>=rn.length)break;var tr=As.index,_l=As.index+As[0].length,Zr=_r;for(Zr+=as.value.length;tr>=Zr;)as=as.next,Zr+=as.value.length;if(Zr-=as.value.length,_r=Zr,as.value instanceof _o)continue;for(var Ml=as;Ml!==Cn.tail&&(Zr<_l||typeof Ml.value=="string");Ml=Ml.next)Ss++,Zr+=Ml.value.length;Ss--,fs=rn.slice(_r,Zr),As.index-=_r}else if(As=Yt(vr,0,fs,wo),!As)continue;var tr=As.index,Ms=As[0],cu=fs.slice(0,tr),ou=fs.slice(tr+Ms.length),Yl=_r+fs.length;Hn&&Yl>Hn.reach&&(Hn.reach=Yl);var xu=as.prev;cu&&(xu=Ho(Cn,xu,cu),_r+=cu.length),mo(Cn,xu,Ss);var Vs=new _o(Tn,oo?On.tokenize(Ms,oo):Ms,Ir,Ms);if(as=Ho(Cn,xu,Vs),ou&&Ho(Cn,as,ou),Ss>1){var wu={cause:Tn+","+bo,reach:Yl};jr(rn,Cn,Nn,as.prev,_r,wu),Hn&&wu.reach>Hn.reach&&(Hn.reach=wu.reach)}}}}}}function lo(){var rn={value:null,prev:null,next:null},Cn={value:null,prev:rn,next:null};rn.next=Cn,this.head=rn,this.tail=Cn,this.length=0}function Ho(rn,Cn,Nn){var zn=Cn.next,So={value:Nn,prev:Cn,next:zn};return Cn.next=So,zn.prev=So,rn.length++,So}function mo(rn,Cn,Nn){for(var zn=Cn.next,So=0;So<Nn&&zn!==rn.tail;So++)zn=zn.next;Cn.next=zn,zn.prev=Cn,rn.length-=So}function Co(rn){for(var Cn=[],Nn=rn.head.next;Nn!==rn.tail;)Cn.push(Nn.value),Nn=Nn.next;return Cn}if(!Wn.document)return Wn.addEventListener&&(On.disableWorkerMessageHandler||Wn.addEventListener("message",function(rn){var Cn=JSON.parse(rn.data),Nn=Cn.language,zn=Cn.code,So=Cn.immediateClose;Wn.postMessage(On.highlight(zn,On.languages[Nn],Nn)),So&&Wn.close()},!1)),On;var mn=On.util.currentScript();mn&&(On.filename=mn.src,mn.hasAttribute("data-manual")&&(On.manual=!0));function wn(){On.manual||On.highlightAll()}if(!On.manual){var Dn=document.readyState;Dn==="loading"||Dn==="interactive"&&mn&&mn.defer?document.addEventListener("DOMContentLoaded",wn):window.requestAnimationFrame?window.requestAnimationFrame(wn):window.setTimeout(wn,16)}return On}(Ln);return An.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(Wn){function er(no,Ro){return"___"+no.toUpperCase()+Ro+"___"}Object.defineProperties(Wn.languages["markup-templating"]={},{buildPlaceholders:{value:function(no,Ro,On,_o){if(no.language===Ro){var Yt=no.tokenStack=[];no.code=no.code.replace(On,function(jr){if(typeof _o=="function"&&!_o(jr))return jr;for(var lo=Yt.length,Ho;no.code.indexOf(Ho=er(Ro,lo))!==-1;)++lo;return Yt[lo]=jr,Ho}),no.grammar=Wn.languages.markup}}},tokenizePlaceholders:{value:function(no,Ro){if(no.language!==Ro||!no.tokenStack)return;no.grammar=Wn.languages[Ro];var On=0,_o=Object.keys(no.tokenStack);function Yt(jr){for(var lo=0;lo<jr.length&&!(On>=_o.length);lo++){var Ho=jr[lo];if(typeof Ho=="string"||Ho.content&&typeof Ho.content=="string"){var mo=_o[On],Co=no.tokenStack[mo],mn=typeof Ho=="string"?Ho:Ho.content,wn=er(Ro,mo),Dn=mn.indexOf(wn);if(Dn>-1){++On;var rn=mn.substring(0,Dn),Cn=new Wn.Token(Ro,Wn.tokenize(Co,no.grammar),"language-"+Ro,Co),Nn=mn.substring(Dn+wn.length),zn=[];rn&&zn.push.apply(zn,Yt([rn])),zn.push(Cn),Nn&&zn.push.apply(zn,Yt([Nn])),typeof Ho=="string"?jr.splice.apply(jr,[lo,1].concat(zn)):Ho.content=zn}}else Ho.content&&Yt(Ho.content)}return jr}Yt(no.tokens)}}})}(An),An.languages.c=An.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),An.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),An.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},An.languages.c.string],char:An.languages.c.char,comment:An.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:An.languages.c}}}}),An.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete An.languages.c.boolean,function(Wn){var er=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,no=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return er.source});Wn.languages.cpp=Wn.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return er.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:er,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),Wn.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return no})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),Wn.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:Wn.languages.cpp}}}}),Wn.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),Wn.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:Wn.languages.extend("cpp",{})}}),Wn.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},Wn.languages.cpp["base-clause"])}(An),function(Wn){function er(As,_l){return As.replace(/<<(\d+)>>/g,function(Zr,Ml){return"(?:"+_l[+Ml]+")"})}function no(As,_l,Zr){return RegExp(er(As,_l),"")}function Ro(As,_l){for(var Zr=0;Zr<_l;Zr++)As=As.replace(/<<self>>/g,function(){return"(?:"+As+")"});return As.replace(/<<self>>/g,"[^\\s\\S]")}var On={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function _o(As){return"\\b(?:"+As.trim().replace(/ /g,"|")+")\\b"}var Yt=_o(On.typeDeclaration),jr=RegExp(_o(On.type+" "+On.typeDeclaration+" "+On.contextual+" "+On.other)),lo=_o(On.typeDeclaration+" "+On.contextual+" "+On.other),Ho=_o(On.type+" "+On.typeDeclaration+" "+On.other),mo=Ro(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),Co=Ro(/\((?:[^()]|<<self>>)*\)/.source,2),mn=/@?\b[A-Za-z_]\w*\b/.source,wn=er(/<<0>>(?:\s*<<1>>)?/.source,[mn,mo]),Dn=er(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[lo,wn]),rn=/\[\s*(?:,\s*)*\]/.source,Cn=er(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[Dn,rn]),Nn=er(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[mo,Co,rn]),zn=er(/\(<<0>>+(?:,<<0>>+)+\)/.source,[Nn]),So=er(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[zn,Dn,rn]),Hn={keyword:jr,punctuation:/[<>()?,.:[\]]/},Tn=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,Jn=/"(?:\\.|[^\\"\r\n])*"/.source,bo=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;Wn.languages.csharp=Wn.languages.extend("clike",{string:[{pattern:no(/(^|[^$\\])<<0>>/.source,[bo]),lookbehind:!0,greedy:!0},{pattern:no(/(^|[^@$\\])<<0>>/.source,[Jn]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:no(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[Dn]),lookbehind:!0,inside:Hn},{pattern:no(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[mn,So]),lookbehind:!0,inside:Hn},{pattern:no(/(\busing\s+)<<0>>(?=\s*=)/.source,[mn]),lookbehind:!0},{pattern:no(/(\b<<0>>\s+)<<1>>/.source,[Yt,wn]),lookbehind:!0,inside:Hn},{pattern:no(/(\bcatch\s*\(\s*)<<0>>/.source,[Dn]),lookbehind:!0,inside:Hn},{pattern:no(/(\bwhere\s+)<<0>>/.source,[mn]),lookbehind:!0},{pattern:no(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[Cn]),lookbehind:!0,inside:Hn},{pattern:no(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[So,Ho,mn]),inside:Hn}],keyword:jr,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),Wn.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),Wn.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:no(/([(,]\s*)<<0>>(?=\s*:)/.source,[mn]),lookbehind:!0,alias:"punctuation"}}),Wn.languages.insertBefore("csharp","class-name",{namespace:{pattern:no(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[mn]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:no(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[Co]),lookbehind:!0,alias:"class-name",inside:Hn},"return-type":{pattern:no(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[So,Dn]),inside:Hn,alias:"class-name"},"constructor-invocation":{pattern:no(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[So]),lookbehind:!0,inside:Hn,alias:"class-name"},"generic-method":{pattern:no(/<<0>>\s*<<1>>(?=\s*\()/.source,[mn,mo]),inside:{function:no(/^<<0>>/.source,[mn]),generic:{pattern:RegExp(mo),alias:"class-name",inside:Hn}}},"type-list":{pattern:no(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[Yt,wn,mn,So,jr.source,Co,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:no(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[wn,Co]),lookbehind:!0,greedy:!0,inside:Wn.languages.csharp},keyword:jr,"class-name":{pattern:RegExp(So),greedy:!0,inside:Hn},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var $n=Jn+"|"+Tn,oo=er(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[$n]),wo=Ro(er(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[oo]),2),Oo=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,Ir=er(/<<0>>(?:\s*\(<<1>>*\))?/.source,[Dn,wo]);Wn.languages.insertBefore("csharp","class-name",{attribute:{pattern:no(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[Oo,Ir]),lookbehind:!0,greedy:!0,inside:{target:{pattern:no(/^<<0>>(?=\s*:)/.source,[Oo]),alias:"keyword"},"attribute-arguments":{pattern:no(/\(<<0>>*\)/.source,[wo]),inside:Wn.languages.csharp},"class-name":{pattern:RegExp(Dn),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var sr=/:[^}\r\n]+/.source,vr=Ro(er(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[oo]),2),as=er(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[vr,sr]),_r=Ro(er(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[$n]),2),fs=er(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[_r,sr]);function Ss(As,_l){return{interpolation:{pattern:no(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[As]),lookbehind:!0,inside:{"format-string":{pattern:no(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[_l,sr]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:Wn.languages.csharp}}},string:/[\s\S]+/}}Wn.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:no(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[as]),lookbehind:!0,greedy:!0,inside:Ss(as,vr)},{pattern:no(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[fs]),lookbehind:!0,greedy:!0,inside:Ss(fs,_r)}],char:{pattern:RegExp(Tn),greedy:!0}}),Wn.languages.dotnet=Wn.languages.cs=Wn.languages.csharp}(An),function(Wn){var er=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;Wn.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+er.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+er.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+er.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+er.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:er,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},Wn.languages.css.atrule.inside.rest=Wn.languages.css;var no=Wn.languages.markup;no&&(no.tag.addInlined("style","css"),no.tag.addAttribute("style","css"))}(An),function(Wn){var er=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,no=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,Ro={pattern:RegExp(/(^|[^\w.])/.source+no+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};Wn.languages.java=Wn.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[Ro,{pattern:RegExp(/(^|[^\w.])/.source+no+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:Ro.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+no+/[A-Z]\w*\b/.source),lookbehind:!0,inside:Ro.inside}],keyword:er,function:[Wn.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),Wn.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),Wn.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":Ro,keyword:er,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+no+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:Ro.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+no+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:Ro.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return er.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(An),An.languages.javascript=An.languages.extend("clike",{"class-name":[An.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),An.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,An.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:An.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:An.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:An.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:An.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:An.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),An.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:An.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),An.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),An.languages.markup&&(An.languages.markup.tag.addInlined("script","javascript"),An.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),An.languages.js=An.languages.javascript,An.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},An.languages.markup.tag.inside["attr-value"].inside.entity=An.languages.markup.entity,An.languages.markup.doctype.inside["internal-subset"].inside=An.languages.markup,An.hooks.add("wrap",function(Wn){Wn.type==="entity"&&(Wn.attributes.title=Wn.content.replace(/&amp;/,"&"))}),Object.defineProperty(An.languages.markup.tag,"addInlined",{value:function(er,no){var Ro={};Ro["language-"+no]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:An.languages[no]},Ro.cdata=/^<!\[CDATA\[|\]\]>$/i;var On={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:Ro}};On["language-"+no]={pattern:/[\s\S]+/,inside:An.languages[no]};var _o={};_o[er]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return er}),"i"),lookbehind:!0,greedy:!0,inside:On},An.languages.insertBefore("markup","cdata",_o)}}),Object.defineProperty(An.languages.markup.tag,"addAttribute",{value:function(Wn,er){An.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+Wn+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[er,"language-"+er],inside:An.languages[er]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),An.languages.html=An.languages.markup,An.languages.mathml=An.languages.markup,An.languages.svg=An.languages.markup,An.languages.xml=An.languages.extend("markup",{}),An.languages.ssml=An.languages.xml,An.languages.atom=An.languages.xml,An.languages.rss=An.languages.xml,function(Wn){var er=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,no=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],Ro=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,On=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,_o=/[{}\[\](),:;]/;Wn.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:er,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:no,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:Ro,operator:On,punctuation:_o};var Yt={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:Wn.languages.php},jr=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:Yt}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:Yt}}];Wn.languages.insertBefore("php","variable",{string:jr,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:er,string:jr,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:no,number:Ro,operator:On,punctuation:_o}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),Wn.hooks.add("before-tokenize",function(lo){if(/<\?/.test(lo.code)){var Ho=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;Wn.languages["markup-templating"].buildPlaceholders(lo,"php",Ho)}}),Wn.hooks.add("after-tokenize",function(lo){Wn.languages["markup-templating"].tokenizePlaceholders(lo,"php")})}(An),An.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},An.languages.python["string-interpolation"].inside.interpolation.inside.rest=An.languages.python,An.languages.py=An.languages.python,function(Wn){Wn.languages.ruby=Wn.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),Wn.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var er={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:Wn.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete Wn.languages.ruby.function;var no="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",Ro=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;Wn.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+no+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:er,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:er,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+Ro),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+Ro+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),Wn.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+no),greedy:!0,inside:{interpolation:er,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:er,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:er,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+no),greedy:!0,inside:{interpolation:er,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:er,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete Wn.languages.ruby.string,Wn.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),Wn.languages.rb=Wn.languages.ruby}(An),window.Prism=uo,An}(),dt=It=>Vn=>Vn.options.get(It),pt=It=>{const Vn=It.options.register;Vn("codesample_languages",{processor:"object[]"}),Vn("codesample_global_prismjs",{processor:"boolean",default:!1})},bt=dt("codesample_languages"),xt=dt("codesample_global_prismjs"),wt=It=>rt.Prism&&xt(It)?rt.Prism:ct,Tt=It=>s(It)&&It.nodeName==="PRE"&&It.className.indexOf("language-")!==-1,Rt=It=>{const Vn=It.selection?It.selection.getNode():null;return Tt(Vn)?b.some(Vn):b.none()},Mt=(It,Vn,ln)=>{const uo=It.dom;It.undoManager.transact(()=>{const Ln=Rt(It);return ln=nt.DOM.encode(ln),Ln.fold(()=>{It.insertContent('<pre id="__new" class="language-'+Vn+'">'+ln+"</pre>");const An=uo.select("#__new")[0];uo.setAttrib(An,"id",null),It.selection.select(An)},An=>{uo.setAttrib(An,"class","language-"+Vn),An.innerHTML=ln,wt(It).highlightElement(An),It.selection.select(An)})})},Et=It=>Rt(It).bind(ln=>b.from(ln.textContent)).getOr(""),$t=It=>{const Vn=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],ln=bt(It);return ln||Vn},Xt=(It,Vn)=>Rt(It).fold(()=>Vn,uo=>{const Ln=uo.className.match(/language-(\w+)/);return Ln?Ln[1]:Vn}),Zt=It=>{const Vn=$t(It),ln=_e(Vn).fold(d(""),An=>An.value),uo=Xt(It,ln),Ln=Et(It);It.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"listbox",name:"language",label:"Language",items:Vn},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:uo,code:Ln},onSubmit:An=>{const Wn=An.getData();Mt(It,Wn.language,Wn.code),An.close()}})},Nt=It=>{It.addCommand("codesample",()=>{const Vn=It.selection.getNode();It.selection.isCollapsed()||Tt(Vn)?Zt(It):It.formatter.toggle("code")})},dn=(It=>Vn=>Vn.replace(It,""))(/^\s+|\s+$/g);var Pn=tinymce.util.Tools.resolve("tinymce.util.Tools");const an=It=>{It.on("PreProcess",Vn=>{const ln=It.dom,uo=ln.select("pre[contenteditable=false]",Vn.node);Pn.each(Pn.grep(uo,Tt),Ln=>{const An=Ln.textContent;ln.setAttrib(Ln,"class",dn(ln.getAttrib(Ln,"class"))),ln.setAttrib(Ln,"contentEditable",null),ln.setAttrib(Ln,"data-mce-highlighted",null);let Wn;for(;Wn=Ln.firstChild;)Ln.removeChild(Wn);const er=ln.add(Ln,"code");er.textContent=An})}),It.on("SetContent",()=>{const Vn=It.dom,ln=Pn.grep(Vn.select("pre"),uo=>Tt(uo)&&Vn.getAttrib(uo,"data-mce-highlighted")!=="true");ln.length&&It.undoManager.transact(()=>{Pn.each(ln,uo=>{var Ln;Pn.each(Vn.select("br",uo),An=>{Vn.replace(It.getDoc().createTextNode(`
`),An)}),uo.innerHTML=Vn.encode((Ln=uo.textContent)!==null&&Ln!==void 0?Ln:""),wt(It).highlightElement(uo),Vn.setAttrib(uo,"data-mce-highlighted",!0),uo.className=dn(uo.className)})})}),It.on("PreInit",()=>{It.parser.addNodeFilter("pre",Vn=>{var ln;for(let uo=0,Ln=Vn.length;uo<Ln;uo++){const An=Vn[uo];((ln=An.attr("class"))!==null&&ln!==void 0?ln:"").indexOf("language-")!==-1&&(An.attr("contenteditable","false"),An.attr("data-mce-highlighted","false"))}})})},Vt=(It,Vn=a)=>ln=>{const uo=()=>{ln.setEnabled(It.selection.isEditable()),Vn(ln)};return It.on("NodeChange",uo),uo(),()=>{It.off("NodeChange",uo)}},ao=It=>{const Vn=It.selection.getStart();return It.dom.is(Vn,'pre[class*="language-"]')},hn=It=>{const Vn=()=>It.execCommand("codesample");It.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:Vn,onSetup:Vt(It,ln=>{ln.setActive(ao(It))})}),It.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:Vn,onSetup:Vt(It)})};var fn=()=>{o.add("codesample",It=>{pt(It),an(It),hn(It),Nt(It),It.on("dblclick",Vn=>{Tt(Vn.target)&&Zt(It)})})};fn()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=($n,oo,wo)=>{var Oo;return wo($n,oo.prototype)?!0:((Oo=$n.constructor)===null||Oo===void 0?void 0:Oo.name)===oo.name},s=$n=>{const oo=typeof $n;return $n===null?"null":oo==="object"&&Array.isArray($n)?"array":oo==="object"&&e($n,String,(wo,Oo)=>Oo.isPrototypeOf(wo))?"string":oo},a=$n=>oo=>s(oo)===$n,d=$n=>oo=>typeof oo===$n,b=a("string"),_=d("boolean"),_e=$n=>$n==null,nt=$n=>!_e($n),rt=d("function"),ct=d("number"),dt=($n,oo)=>wo=>$n(oo(wo)),bt=($n=>()=>$n)(!1);class xt{constructor(oo,wo){this.tag=oo,this.value=wo}static some(oo){return new xt(!0,oo)}static none(){return xt.singletonNone}fold(oo,wo){return this.tag?wo(this.value):oo()}isSome(){return this.tag}isNone(){return!this.tag}map(oo){return this.tag?xt.some(oo(this.value)):xt.none()}bind(oo){return this.tag?oo(this.value):xt.none()}exists(oo){return this.tag&&oo(this.value)}forall(oo){return!this.tag||oo(this.value)}filter(oo){return!this.tag||oo(this.value)?this:xt.none()}getOr(oo){return this.tag?this.value:oo}or(oo){return this.tag?this:oo}getOrThunk(oo){return this.tag?this.value:oo()}orThunk(oo){return this.tag?this:oo()}getOrDie(oo){if(this.tag)return this.value;throw new Error(oo??"Called getOrDie on None")}static from(oo){return nt(oo)?xt.some(oo):xt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(oo){this.tag&&oo(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}xt.singletonNone=new xt(!1);const wt=($n,oo)=>{const wo=$n.length,Oo=new Array(wo);for(let Ir=0;Ir<wo;Ir++){const sr=$n[Ir];Oo[Ir]=oo(sr,Ir)}return Oo},Tt=($n,oo)=>{for(let wo=0,Oo=$n.length;wo<Oo;wo++){const Ir=$n[wo];oo(Ir,wo)}},Rt=($n,oo)=>{const wo=[];for(let Oo=0,Ir=$n.length;Oo<Ir;Oo++){const sr=$n[Oo];oo(sr,Oo)&&wo.push(sr)}return wo},Mt=11,Et=1,$t=3,Xt=($n,oo)=>{const Oo=(oo||document).createElement("div");if(Oo.innerHTML=$n,!Oo.hasChildNodes()||Oo.childNodes.length>1){const Ir="HTML does not have a single root node";throw console.error(Ir,$n),new Error(Ir)}return Jt(Oo.childNodes[0])},Zt=($n,oo)=>{const Oo=(oo||document).createElement($n);return Jt(Oo)},Nt=($n,oo)=>{const Oo=(oo||document).createTextNode($n);return Jt(Oo)},Jt=$n=>{if($n==null)throw new Error("Node cannot be null or undefined");return{dom:$n}},Pn={fromHtml:Xt,fromTag:Zt,fromText:Nt,fromDom:Jt,fromPoint:($n,oo,wo)=>xt.from($n.dom.elementFromPoint(oo,wo)).map(Jt)},an=($n,oo)=>{const wo=$n.dom;if(wo.nodeType!==Et)return!1;{const Oo=wo;if(Oo.matches!==void 0)return Oo.matches(oo);if(Oo.msMatchesSelector!==void 0)return Oo.msMatchesSelector(oo);if(Oo.webkitMatchesSelector!==void 0)return Oo.webkitMatchesSelector(oo);if(Oo.mozMatchesSelector!==void 0)return Oo.mozMatchesSelector(oo);throw new Error("Browser lacks native selectors")}};typeof window<"u"||Function("return this;")();const Vt=$n=>$n.dom.nodeName.toLowerCase(),ao=$n=>$n.dom.nodeType,hn=$n=>oo=>ao(oo)===$n,fn=hn(Et),It=hn($t),Vn=hn(Mt),ln=$n=>oo=>fn(oo)&&Vt(oo)===$n,uo=$n=>xt.from($n.dom.parentNode).map(Pn.fromDom),Ln=$n=>wt($n.dom.childNodes,Pn.fromDom),An=($n,oo,wo)=>{if(b(wo)||_(wo)||ct(wo))$n.setAttribute(oo,wo+"");else throw console.error("Invalid call to Attribute.set. Key ",oo,":: Value ",wo,":: Element ",$n),new Error("Attribute value was not simple")},Wn=($n,oo,wo)=>{An($n.dom,oo,wo)},er=($n,oo)=>{$n.dom.removeAttribute(oo)},no=$n=>Vn($n)&&nt($n.dom.host),Ro=$n=>Pn.fromDom($n.dom.getRootNode()),On=$n=>{const oo=Ro($n);return no(oo)?xt.some(oo):xt.none()},_o=$n=>Pn.fromDom($n.dom.host),Yt=$n=>{const oo=It($n)?$n.dom.parentNode:$n.dom;if(oo==null||oo.ownerDocument===null)return!1;const wo=oo.ownerDocument;return On(Pn.fromDom(oo)).fold(()=>wo.body.contains(oo),dt(Yt,_o))},jr=($n,oo,wo)=>{let Oo=$n.dom;const Ir=rt(wo)?wo:bt;for(;Oo.parentNode;){Oo=Oo.parentNode;const sr=Pn.fromDom(Oo);if(oo(sr))return xt.some(sr);if(Ir(sr))break}return xt.none()},lo=($n,oo,wo)=>jr($n,Oo=>an(Oo,oo),wo),Ho=$n=>$n.style!==void 0&&rt($n.style.getPropertyValue),mo=($n,oo)=>{const wo=$n.dom,Ir=window.getComputedStyle(wo).getPropertyValue(oo);return Ir===""&&!Yt($n)?Co(wo,oo):Ir},Co=($n,oo)=>Ho($n)?$n.style.getPropertyValue(oo):"",mn=$n=>mo($n,"direction")==="rtl"?"rtl":"ltr",wn=($n,oo)=>Rt(Ln($n),oo),Dn=($n,oo)=>wn($n,wo=>an(wo,oo)),rn=$n=>uo($n).filter(fn),Cn=($n,oo)=>(oo?lo($n,"ol,ul"):xt.some($n)).getOr($n),Nn=ln("li"),zn=($n,oo,wo)=>{Tt(oo,Oo=>{const Ir=Pn.fromDom(Oo),sr=Nn(Ir),vr=Cn(Ir,sr);rn(vr).each(_r=>{if($n.setStyle(vr.dom,"direction",null),mn(_r)===wo?er(vr,"dir"):Wn(vr,"dir",wo),mn(vr)!==wo&&$n.setStyle(vr.dom,"direction",wo),sr){const Ss=Dn(vr,"li[dir],li[style]");Tt(Ss,As=>{er(As,"dir"),$n.setStyle(As.dom,"direction",null)})}})})},So=($n,oo)=>{$n.selection.isEditable()&&(zn($n.dom,$n.selection.getSelectedBlocks(),oo),$n.nodeChanged())},Hn=$n=>{$n.addCommand("mceDirectionLTR",()=>{So($n,"ltr")}),$n.addCommand("mceDirectionRTL",()=>{So($n,"rtl")})},Tn=($n,oo)=>wo=>{const Oo=Ir=>{const sr=Pn.fromDom(Ir.element);wo.setActive(mn(sr)===oo),wo.setEnabled($n.selection.isEditable())};return $n.on("NodeChange",Oo),wo.setEnabled($n.selection.isEditable()),()=>$n.off("NodeChange",Oo)},Jn=$n=>{$n.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>$n.execCommand("mceDirectionLTR"),onSetup:Tn($n,"ltr")}),$n.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>$n.execCommand("mceDirectionRTL"),onSetup:Tn($n,"rtl")})};var bo=()=>{o.add("directionality",$n=>{Hn($n),Jn($n)})};bo()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=Cn=>Nn=>Cn===Nn,s=e(null),a=e(void 0),d=Cn=>Cn==null,b=Cn=>!d(Cn),_=()=>{},nt=(Cn=>()=>Cn)(!1);class rt{constructor(Nn,zn){this.tag=Nn,this.value=zn}static some(Nn){return new rt(!0,Nn)}static none(){return rt.singletonNone}fold(Nn,zn){return this.tag?zn(this.value):Nn()}isSome(){return this.tag}isNone(){return!this.tag}map(Nn){return this.tag?rt.some(Nn(this.value)):rt.none()}bind(Nn){return this.tag?Nn(this.value):rt.none()}exists(Nn){return this.tag&&Nn(this.value)}forall(Nn){return!this.tag||Nn(this.value)}filter(Nn){return!this.tag||Nn(this.value)?this:rt.none()}getOr(Nn){return this.tag?this.value:Nn}or(Nn){return this.tag?this:Nn}getOrThunk(Nn){return this.tag?this.value:Nn()}orThunk(Nn){return this.tag?this:Nn()}getOrDie(Nn){if(this.tag)return this.value;throw new Error(Nn??"Called getOrDie on None")}static from(Nn){return b(Nn)?rt.some(Nn):rt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Nn){this.tag&&Nn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}rt.singletonNone=new rt(!1);const ct=(Cn,Nn)=>{for(let zn=0,So=Cn.length;zn<So;zn++){const Hn=Cn[zn];if(Nn(Hn,zn))return!0}return!1},dt=(Cn,Nn)=>{const zn=Cn.length,So=new Array(zn);for(let Hn=0;Hn<zn;Hn++){const Tn=Cn[Hn];So[Hn]=Nn(Tn,Hn)}return So},pt=(Cn,Nn)=>{for(let zn=0,So=Cn.length;zn<So;zn++){const Hn=Cn[zn];Nn(Hn,zn)}},bt=Cn=>{let Nn=Cn;return{get:()=>Nn,set:Hn=>{Nn=Hn}}},xt=(Cn,Nn)=>{let zn=null;const So=()=>{s(zn)||(clearTimeout(zn),zn=null)};return{cancel:So,throttle:(...Tn)=>{So(),zn=setTimeout(()=>{zn=null,Cn.apply(null,Tn)},Nn)}}},wt=(Cn,Nn)=>{Cn.insertContent(Nn)},Tt=Object.keys,Rt=Object.hasOwnProperty,Mt=(Cn,Nn)=>{const zn=Tt(Cn);for(let So=0,Hn=zn.length;So<Hn;So++){const Tn=zn[So],Jn=Cn[Tn];Nn(Jn,Tn)}},Et=(Cn,Nn)=>$t(Cn,(zn,So)=>({k:So,v:Nn(zn,So)})),$t=(Cn,Nn)=>{const zn={};return Mt(Cn,(So,Hn)=>{const Tn=Nn(So,Hn);zn[Tn.k]=Tn.v}),zn},Xt=(Cn,Nn)=>Rt.call(Cn,Nn),Jt=(Cn=>(...Nn)=>{if(Nn.length===0)throw new Error("Can't merge zero objects");const zn={};for(let So=0;So<Nn.length;So++){const Hn=Nn[So];for(const Tn in Hn)Xt(Hn,Tn)&&(zn[Tn]=Cn(zn[Tn],Hn[Tn]))}return zn})((Cn,Nn)=>Nn),dn=Cn=>{const Nn=bt(rt.none()),zn=()=>Nn.get().each(Cn);return{clear:()=>{zn(),Nn.set(rt.none())},isSet:()=>Nn.get().isSome(),get:()=>Nn.get(),set:bo=>{zn(),Nn.set(rt.some(bo))}}},Pn=()=>{const Cn=dn(_);return{...Cn,on:zn=>Cn.get().each(zn)}},an=(Cn,Nn,zn)=>Nn===""||Cn.length>=Nn.length&&Cn.substr(zn,zn+Nn.length)===Nn,Vt=(Cn,Nn,zn=0,So)=>{const Hn=Cn.indexOf(Nn,zn);return Hn!==-1?a(So)?!0:Hn+Nn.length<=So:!1},ao=(Cn,Nn)=>an(Cn,Nn,0);var hn=tinymce.util.Tools.resolve("tinymce.Resource");const fn="tinymce.plugins.emoticons",It=Cn=>Nn=>Nn.options.get(Cn),Vn=(Cn,Nn)=>{const zn=Cn.options.register;zn("emoticons_database",{processor:"string",default:"emojis"}),zn("emoticons_database_url",{processor:"string",default:`${Nn}/js/${ln(Cn)}${Cn.suffix}.js`}),zn("emoticons_database_id",{processor:"string",default:fn}),zn("emoticons_append",{processor:"object",default:{}}),zn("emoticons_images_url",{processor:"string",default:"https://cdnjs.cloudflare.com/ajax/libs/twemoji/15.1.0/72x72/"})},ln=It("emoticons_database"),uo=It("emoticons_database_url"),Ln=It("emoticons_database_id"),An=It("emoticons_append"),Wn=It("emoticons_images_url"),er="All",no={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},Ro=(Cn,Nn)=>Xt(Cn,Nn)?Cn[Nn]:Nn,On=Cn=>{const Nn=An(Cn);return Et(Nn,zn=>({keywords:[],category:"user",...zn}))},_o=(Cn,Nn,zn)=>{const So=Pn(),Hn=Pn(),Tn=Wn(Cn),Jn=sr=>ao(sr.char,"<img")?sr.char.replace(/src="([^"]+)"/,(vr,as)=>`src="${Tn}${as}"`):sr.char,bo=sr=>{const vr={},as=[];Mt(sr,(_r,fs)=>{const Ss={title:fs,keywords:_r.keywords,char:Jn(_r),category:Ro(no,_r.category)},As=vr[Ss.category]!==void 0?vr[Ss.category]:[];vr[Ss.category]=As.concat([Ss]),as.push(Ss)}),So.set(vr),Hn.set(as)};Cn.on("init",()=>{hn.load(zn,Nn).then(sr=>{const vr=On(Cn);bo(Jt(sr,vr))},sr=>{console.log(`Failed to load emojis: ${sr}`),So.set({}),Hn.set([])})});const $n=sr=>sr===er?oo():So.get().bind(vr=>rt.from(vr[sr])).getOr([]),oo=()=>Hn.get().getOr([]),wo=()=>[er].concat(Tt(So.get().getOr({}))),Oo=()=>Ir()?Promise.resolve(!0):new Promise((sr,vr)=>{let as=15;const _r=setInterval(()=>{Ir()?(clearInterval(_r),sr(!0)):(as--,as<0&&(console.log("Could not load emojis from url: "+Nn),clearInterval(_r),vr(!1)))},100)}),Ir=()=>So.isSet()&&Hn.isSet();return{listCategories:wo,hasLoaded:Ir,waitForLoad:Oo,listAll:oo,listCategory:$n}},Yt=(Cn,Nn)=>Vt(Cn.title.toLowerCase(),Nn)||ct(Cn.keywords,zn=>Vt(zn.toLowerCase(),Nn)),jr=(Cn,Nn,zn)=>{const So=[],Hn=Nn.toLowerCase(),Tn=zn.fold(()=>nt,Jn=>bo=>bo>=Jn);for(let Jn=0;Jn<Cn.length&&!((Nn.length===0||Yt(Cn[Jn],Hn))&&(So.push({value:Cn[Jn].char,text:Cn[Jn].title,icon:Cn[Jn].char}),Tn(So.length)));Jn++);return So},lo="pattern",Ho=(Cn,Nn)=>{const zn={pattern:"",results:jr(Nn.listAll(),"",rt.some(300))},So=bt(er),Hn=wo=>{const Oo=wo.getData(),Ir=So.get(),sr=Nn.listCategory(Ir),vr=jr(sr,Oo[lo],Ir===er?rt.some(300):rt.none());wo.setData({results:vr})},Tn=xt(wo=>{Hn(wo)},200),Jn={label:"Search",type:"input",name:lo},bo={type:"collection",name:"results"},$n=()=>({title:"Emojis",size:"normal",body:{type:"tabpanel",tabs:dt(Nn.listCategories(),Oo=>({title:Oo,name:Oo,items:[Jn,bo]}))},initialData:zn,onTabChange:(Oo,Ir)=>{So.set(Ir.newTabName),Tn.throttle(Oo)},onChange:Tn.throttle,onAction:(Oo,Ir)=>{Ir.name==="results"&&(wt(Cn,Ir.value),Oo.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}),oo=Cn.windowManager.open($n());oo.focus(lo),Nn.hasLoaded()||(oo.block("Loading emojis..."),Nn.waitForLoad().then(()=>{oo.redial($n()),Tn.throttle(oo),oo.focus(lo),oo.unblock()}).catch(wo=>{oo.redial({title:"Emojis",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"Could not load emojis"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),oo.focus(lo),oo.unblock()}))},mo=(Cn,Nn)=>{Cn.addCommand("mceEmoticons",()=>Ho(Cn,Nn))},Co=Cn=>{Cn.on("PreInit",()=>{Cn.parser.addAttributeFilter("data-emoticon",Nn=>{pt(Nn,zn=>{zn.attr("data-mce-resize","false"),zn.attr("data-mce-placeholder","1")})})})},mn=(Cn,Nn)=>{Cn.ui.registry.addAutocompleter("emoticons",{trigger:":",columns:"auto",minChars:2,fetch:(zn,So)=>Nn.waitForLoad().then(()=>{const Hn=Nn.listAll();return jr(Hn,zn,rt.some(So))}),onAction:(zn,So,Hn)=>{Cn.selection.setRng(So),Cn.insertContent(Hn),zn.hide()}})},wn=Cn=>Nn=>{const zn=()=>{Nn.setEnabled(Cn.selection.isEditable())};return Cn.on("NodeChange",zn),zn(),()=>{Cn.off("NodeChange",zn)}},Dn=Cn=>{const Nn=()=>Cn.execCommand("mceEmoticons");Cn.ui.registry.addButton("emoticons",{tooltip:"Emojis",icon:"emoji",onAction:Nn,onSetup:wn(Cn)}),Cn.ui.registry.addMenuItem("emoticons",{text:"Emojis...",icon:"emoji",onAction:Nn,onSetup:wn(Cn)})};var rn=()=>{o.add("emoticons",(Cn,Nn)=>{Vn(Cn,Nn);const zn=uo(Cn),So=Ln(Cn),Hn=_o(Cn,zn,So);return mo(Cn,Hn),Dn(Cn),mn(Cn,Hn),Co(Cn),{getAllEmojis:()=>Hn.waitForLoad().then(()=>Hn.listAll())}})};rn()})();(function(){const o=bn=>{let Sn=bn;return{get:()=>Sn,set:ps=>{Sn=ps}}};var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=bn=>({isFullscreen:()=>bn.get()!==null}),a=(bn,Sn,Ao)=>{var qo;return Ao(bn,Sn.prototype)?!0:((qo=bn.constructor)===null||qo===void 0?void 0:qo.name)===Sn.name},d=bn=>{const Sn=typeof bn;return bn===null?"null":Sn==="object"&&Array.isArray(bn)?"array":Sn==="object"&&a(bn,String,(Ao,qo)=>qo.isPrototypeOf(Ao))?"string":Sn},b=bn=>Sn=>d(Sn)===bn,_=bn=>Sn=>typeof Sn===bn,_e=bn=>Sn=>bn===Sn,nt=b("string"),rt=b("object"),ct=b("array"),dt=_e(null),pt=_("boolean"),bt=_e(void 0),xt=bn=>bn==null,wt=bn=>!xt(bn),Tt=_("function"),Rt=_("number"),Mt=()=>{},Et=(bn,Sn)=>(...Ao)=>bn(Sn.apply(null,Ao)),$t=(bn,Sn)=>Ao=>bn(Sn(Ao)),Xt=bn=>()=>bn;function Zt(bn,...Sn){return(...Ao)=>{const qo=Sn.concat(Ao);return bn.apply(null,qo)}}const Nt=Xt(!1),Jt=Xt(!0);class dn{constructor(Sn,Ao){this.tag=Sn,this.value=Ao}static some(Sn){return new dn(!0,Sn)}static none(){return dn.singletonNone}fold(Sn,Ao){return this.tag?Ao(this.value):Sn()}isSome(){return this.tag}isNone(){return!this.tag}map(Sn){return this.tag?dn.some(Sn(this.value)):dn.none()}bind(Sn){return this.tag?Sn(this.value):dn.none()}exists(Sn){return this.tag&&Sn(this.value)}forall(Sn){return!this.tag||Sn(this.value)}filter(Sn){return!this.tag||Sn(this.value)?this:dn.none()}getOr(Sn){return this.tag?this.value:Sn}or(Sn){return this.tag?this:Sn}getOrThunk(Sn){return this.tag?this.value:Sn()}orThunk(Sn){return this.tag?this:Sn()}getOrDie(Sn){if(this.tag)return this.value;throw new Error(Sn??"Called getOrDie on None")}static from(Sn){return wt(Sn)?dn.some(Sn):dn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Sn){this.tag&&Sn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}dn.singletonNone=new dn(!1);const Pn=Array.prototype.push,an=(bn,Sn)=>{const Ao=bn.length,qo=new Array(Ao);for(let ps=0;ps<Ao;ps++){const Tl=bn[ps];qo[ps]=Sn(Tl,ps)}return qo},Vt=(bn,Sn)=>{for(let Ao=0,qo=bn.length;Ao<qo;Ao++){const ps=bn[Ao];Sn(ps,Ao)}},ao=(bn,Sn)=>{const Ao=[];for(let qo=0,ps=bn.length;qo<ps;qo++){const Tl=bn[qo];Sn(Tl,qo)&&Ao.push(Tl)}return Ao},hn=(bn,Sn,Ao)=>{for(let qo=0,ps=bn.length;qo<ps;qo++){const Tl=bn[qo];if(Sn(Tl,qo))return dn.some(Tl);if(Ao(Tl,qo))break}return dn.none()},fn=(bn,Sn)=>hn(bn,Sn,Nt),It=bn=>{const Sn=[];for(let Ao=0,qo=bn.length;Ao<qo;++Ao){if(!ct(bn[Ao]))throw new Error("Arr.flatten item "+Ao+" was not an array, input: "+bn);Pn.apply(Sn,bn[Ao])}return Sn},Vn=(bn,Sn)=>It(an(bn,Sn)),ln=(bn,Sn)=>Sn>=0&&Sn<bn.length?dn.some(bn[Sn]):dn.none(),uo=bn=>ln(bn,0),Ln=(bn,Sn)=>{for(let Ao=0;Ao<bn.length;Ao++){const qo=Sn(bn[Ao],Ao);if(qo.isSome())return qo}return dn.none()},An=(bn,Sn,Ao)=>bn.isSome()&&Sn.isSome()?dn.some(Ao(bn.getOrDie(),Sn.getOrDie())):dn.none(),Wn=bn=>{const Sn=o(dn.none()),Ao=()=>Sn.get().each(bn);return{clear:()=>{Ao(),Sn.set(dn.none())},isSet:()=>Sn.get().isSome(),get:()=>Sn.get(),set:gu=>{Ao(),Sn.set(dn.some(gu))}}},er=()=>Wn(bn=>bn.unbind()),no=()=>{const bn=Wn(Mt);return{...bn,on:Ao=>bn.get().each(Ao)}},Ro=(bn,Sn)=>{let Ao=null;return{cancel:()=>{dt(Ao)||(clearTimeout(Ao),Ao=null)},throttle:(...Tl)=>{dt(Ao)&&(Ao=setTimeout(()=>{Ao=null,bn.apply(null,Tl)},Sn))}}},On=Object.keys,_o=(bn,Sn)=>{const Ao=On(bn);for(let qo=0,ps=Ao.length;qo<ps;qo++){const Tl=Ao[qo],Xs=bn[Tl];Sn(Xs,Tl)}},Yt=typeof window<"u"?window:Function("return this;")(),jr=(bn,Sn)=>{let Ao=Sn??Yt;for(let qo=0;qo<bn.length&&Ao!==void 0&&Ao!==null;++qo)Ao=Ao[bn[qo]];return Ao},lo=(bn,Sn)=>{const Ao=bn.split(".");return jr(Ao,Sn)},Ho=(bn,Sn)=>lo(bn,Sn),mo=(bn,Sn)=>{const Ao=Ho(bn,Sn);if(Ao==null)throw new Error(bn+" not available on this browser");return Ao},Co=Object.getPrototypeOf,mn=bn=>mo("HTMLElement",bn),wn=bn=>{const Sn=lo("ownerDocument.defaultView",bn);return rt(bn)&&(mn(Sn).prototype.isPrototypeOf(bn)||/^HTML\w*Element$/.test(Co(bn).constructor.name))},Dn=9,rn=11,Cn=1,Nn=3,zn=bn=>bn.dom.nodeType,So=bn=>Sn=>zn(Sn)===bn,Hn=bn=>Tn(bn)&&wn(bn.dom),Tn=So(Cn),Jn=So(Nn),bo=So(rn),$n=(bn,Sn,Ao)=>{if(nt(Ao)||pt(Ao)||Rt(Ao))bn.setAttribute(Sn,Ao+"");else throw console.error("Invalid call to Attribute.set. Key ",Sn,":: Value ",Ao,":: Element ",bn),new Error("Attribute value was not simple")},oo=(bn,Sn,Ao)=>{$n(bn.dom,Sn,Ao)},wo=(bn,Sn)=>{const Ao=bn.dom.getAttribute(Sn);return Ao===null?void 0:Ao},Oo=(bn,Sn)=>{bn.dom.removeAttribute(Sn)},Ir=bn=>bn.dom.classList!==void 0,sr=(bn,Sn)=>Ir(bn)&&bn.dom.classList.contains(Sn),vr=(bn,Sn,Ao=0,qo)=>{const ps=bn.indexOf(Sn,Ao);return ps!==-1?bt(qo)?!0:ps+Sn.length<=qo:!1},as=bn=>bn.style!==void 0&&Tt(bn.style.getPropertyValue),_r=(bn,Sn)=>{const qo=(Sn||document).createElement("div");if(qo.innerHTML=bn,!qo.hasChildNodes()||qo.childNodes.length>1){const ps="HTML does not have a single root node";throw console.error(ps,bn),new Error(ps)}return As(qo.childNodes[0])},fs=(bn,Sn)=>{const qo=(Sn||document).createElement(bn);return As(qo)},Ss=(bn,Sn)=>{const qo=(Sn||document).createTextNode(bn);return As(qo)},As=bn=>{if(bn==null)throw new Error("Node cannot be null or undefined");return{dom:bn}},Zr={fromHtml:_r,fromTag:fs,fromText:Ss,fromDom:As,fromPoint:(bn,Sn,Ao)=>dn.from(bn.dom.elementFromPoint(Sn,Ao)).map(As)},Ml=(bn,Sn)=>{const Ao=bn.dom;if(Ao.nodeType!==Cn)return!1;{const qo=Ao;if(qo.matches!==void 0)return qo.matches(Sn);if(qo.msMatchesSelector!==void 0)return qo.msMatchesSelector(Sn);if(qo.webkitMatchesSelector!==void 0)return qo.webkitMatchesSelector(Sn);if(qo.mozMatchesSelector!==void 0)return qo.mozMatchesSelector(Sn);throw new Error("Browser lacks native selectors")}},tr=bn=>bn.nodeType!==Cn&&bn.nodeType!==Dn&&bn.nodeType!==rn||bn.childElementCount===0,Ms=(bn,Sn)=>{const Ao=document;return tr(Ao)?[]:an(Ao.querySelectorAll(bn),Zr.fromDom)},cu=(bn,Sn)=>bn.dom===Sn.dom,ou=bn=>Zr.fromDom(bn.dom.ownerDocument),Yl=bn=>dn.from(bn.dom.parentNode).map(Zr.fromDom),xu=(bn,Sn)=>{const Ao=Tt(Sn)?Sn:Nt;let qo=bn.dom;const ps=[];for(;qo.parentNode!==null&&qo.parentNode!==void 0;){const Tl=qo.parentNode,Xs=Zr.fromDom(Tl);if(ps.push(Xs),Ao(Xs)===!0)break;qo=Tl}return ps},Vs=bn=>{const Sn=Ao=>ao(Ao,qo=>!cu(bn,qo));return Yl(bn).map(iu).map(Sn).getOr([])},wu=bn=>dn.from(bn.dom.nextSibling).map(Zr.fromDom),iu=bn=>an(bn.dom.childNodes,Zr.fromDom),ba=bn=>bo(bn)&&wt(bn.dom.host),Jr=bn=>Zr.fromDom(bn.dom.getRootNode()),_a=bn=>{const Sn=Jr(bn);return ba(Sn)?dn.some(Sn):dn.none()},go=bn=>Zr.fromDom(bn.dom.host),Po=bn=>{if(wt(bn.target)){const Sn=Zr.fromDom(bn.target);if(Tn(Sn)&&Sr(Sn)&&bn.composed&&bn.composedPath){const Ao=bn.composedPath();if(Ao)return uo(Ao)}}return dn.from(bn.target)},Sr=bn=>wt(bn.dom.shadowRoot),Fr=bn=>{const Sn=Jn(bn)?bn.dom.parentNode:bn.dom;if(Sn==null||Sn.ownerDocument===null)return!1;const Ao=Sn.ownerDocument;return _a(Zr.fromDom(Sn)).fold(()=>Ao.body.contains(Sn),$t(Fr,go))},Us=bn=>{const Sn=bn.dom.body;if(Sn==null)throw new Error("Body is not available yet");return Zr.fromDom(Sn)},xa=(bn,Sn,Ao)=>{if(!nt(Ao))throw console.error("Invalid call to CSS.set. Property ",Sn,":: Value ",Ao,":: Element ",bn),new Error("CSS value must be a string: "+Ao);as(bn)&&bn.style.setProperty(Sn,Ao)},ju=(bn,Sn,Ao)=>{const qo=bn.dom;xa(qo,Sn,Ao)},Uu=(bn,Sn)=>{const Ao=bn.dom;_o(Sn,(qo,ps)=>{xa(Ao,ps,qo)})},Au=(bn,Sn)=>{const Ao=bn.dom,ps=window.getComputedStyle(Ao).getPropertyValue(Sn);return ps===""&&!Fr(bn)?Un(Ao,Sn):ps},Un=(bn,Sn)=>as(bn)?bn.style.getPropertyValue(Sn):"",Bn=(bn,Sn,Ao,qo,ps,Tl,Xs)=>({target:bn,x:Sn,y:Ao,stop:qo,prevent:ps,kill:Tl,raw:Xs}),Mo=bn=>{const Sn=Zr.fromDom(Po(bn).getOr(bn.target)),Ao=()=>bn.stopPropagation(),qo=()=>bn.preventDefault(),ps=Et(qo,Ao);return Bn(Sn,bn.clientX,bn.clientY,Ao,qo,ps,bn)},jo=(bn,Sn)=>Ao=>{bn(Ao)&&Sn(Mo(Ao))},ss=(bn,Sn,Ao,qo,ps)=>{const Tl=jo(Ao,qo);return bn.dom.addEventListener(Sn,Tl,ps),{unbind:Zt(Ns,bn,Sn,Tl,ps)}},Cs=(bn,Sn,Ao,qo)=>ss(bn,Sn,Ao,qo,!1),Ns=(bn,Sn,Ao,qo)=>{bn.dom.removeEventListener(Sn,Ao,qo)},Tu=Jt,ro=(bn,Sn,Ao)=>Cs(bn,Sn,Tu,Ao),Ls=bn=>{let Sn=!1,Ao;return(...qo)=>(Sn||(Sn=!0,Ao=bn.apply(null,qo)),Ao)},Kn=(bn,Sn,Ao,qo)=>{const ps=bn.isiOS()&&/ipad/i.test(Ao)===!0,Tl=bn.isiOS()&&!ps,Xs=bn.isiOS()||bn.isAndroid(),gu=Xs||qo("(pointer:coarse)"),pp=ps||!Tl&&Xs&&qo("(min-device-width:768px)"),Pm=Tl||Xs&&!pp,am=Sn.isSafari()&&bn.isiOS()&&/safari/i.test(Ao)===!1,rp=!Pm&&!pp&&!am;return{isiPad:Xt(ps),isiPhone:Xt(Tl),isTablet:Xt(pp),isPhone:Xt(Pm),isTouch:Xt(gu),isAndroid:bn.isAndroid,isiOS:bn.isiOS,isWebView:Xt(am),isDesktop:Xt(rp)}},eo=(bn,Sn)=>{for(let Ao=0;Ao<bn.length;Ao++){const qo=bn[Ao];if(qo.test(Sn))return qo}},nr=(bn,Sn)=>{const Ao=eo(bn,Sn);if(!Ao)return{major:0,minor:0};const qo=ps=>Number(Sn.replace(Ao,"$"+ps));return Qr(qo(1),qo(2))},lr=(bn,Sn)=>{const Ao=String(Sn).toLowerCase();return bn.length===0?Rr():nr(bn,Ao)},Rr=()=>Qr(0,0),Qr=(bn,Sn)=>({major:bn,minor:Sn}),es={nu:Qr,detect:lr,unknown:Rr},Hr=(bn,Sn)=>Ln(Sn.brands,Ao=>{const qo=Ao.brand.toLowerCase();return fn(bn,ps=>{var Tl;return qo===((Tl=ps.brand)===null||Tl===void 0?void 0:Tl.toLowerCase())}).map(ps=>({current:ps.name,version:es.nu(parseInt(Ao.version,10),0)}))}),hs=(bn,Sn)=>{const Ao=String(Sn).toLowerCase();return fn(bn,qo=>qo.search(Ao))},ks=(bn,Sn)=>hs(bn,Sn).map(Ao=>{const qo=es.detect(Ao.versionRegexes,Sn);return{current:Ao.name,version:qo}}),Nl=(bn,Sn)=>hs(bn,Sn).map(Ao=>{const qo=es.detect(Ao.versionRegexes,Sn);return{current:Ao.name,version:qo}}),Xl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,uu=bn=>Sn=>vr(Sn,bn),Kp=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:bn=>vr(bn,"edge/")&&vr(bn,"chrome")&&vr(bn,"safari")&&vr(bn,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Xl],search:bn=>vr(bn,"chrome")&&!vr(bn,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:bn=>vr(bn,"msie")||vr(bn,"trident")},{name:"Opera",versionRegexes:[Xl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:uu("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:uu("firefox")},{name:"Safari",versionRegexes:[Xl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:bn=>(vr(bn,"safari")||vr(bn,"mobile/"))&&vr(bn,"applewebkit")}],sm=[{name:"Windows",search:uu("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:bn=>vr(bn,"iphone")||vr(bn,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:uu("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:uu("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:uu("linux"),versionRegexes:[]},{name:"Solaris",search:uu("sunos"),versionRegexes:[]},{name:"FreeBSD",search:uu("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:uu("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],_s={browsers:Xt(Kp),oses:Xt(sm)},Al="Edge",Pl="Chromium",wp="IE",Cp="Opera",dp="Firefox",ku="Safari",g1=()=>Vm({current:void 0,version:es.unknown()}),Vm=bn=>{const Sn=bn.current,Ao=bn.version,qo=ps=>()=>Sn===ps;return{current:Sn,version:Ao,isEdge:qo(Al),isChromium:qo(Pl),isIE:qo(wp),isOpera:qo(Cp),isFirefox:qo(dp),isSafari:qo(ku)}},Vl={unknown:g1,nu:Vm,edge:Xt(Al),chromium:Xt(Pl),ie:Xt(wp),opera:Xt(Cp),firefox:Xt(dp),safari:Xt(ku)},Dp="Windows",Np="iOS",fp="Android",ry="Linux",im="macOS",Yp="Solaris",Wm="FreeBSD",Tm="ChromeOS",py=()=>gy({current:void 0,version:es.unknown()}),gy=bn=>{const Sn=bn.current,Ao=bn.version,qo=ps=>()=>Sn===ps;return{current:Sn,version:Ao,isWindows:qo(Dp),isiOS:qo(Np),isAndroid:qo(fp),isMacOS:qo(im),isLinux:qo(ry),isSolaris:qo(Yp),isFreeBSD:qo(Wm),isChromeOS:qo(Tm)}},U0={unknown:py,nu:gy,windows:Xt(Dp),ios:Xt(Np),android:Xt(fp),linux:Xt(ry),macos:Xt(im),solaris:Xt(Yp),freebsd:Xt(Wm),chromeos:Xt(Tm)},Ap={detect:(bn,Sn,Ao)=>{const qo=_s.browsers(),ps=_s.oses(),Tl=Sn.bind(pp=>Hr(qo,pp)).orThunk(()=>ks(qo,bn)).fold(Vl.unknown,Vl.nu),Xs=Nl(ps,bn).fold(U0.unknown,U0.nu),gu=Kn(Xs,Tl,bn,Ao);return{browser:Tl,os:Xs,deviceType:gu}}},sy=bn=>window.matchMedia(bn).matches;let iy=Ls(()=>Ap.detect(window.navigator.userAgent,dn.from(window.navigator.userAgentData),sy));const Dy=()=>iy(),E0=(bn,Sn)=>({left:bn,top:Sn,translate:(qo,ps)=>E0(bn+qo,Sn+ps)}),hp=E0,Rm=bn=>{const Sn=bn!==void 0?bn.dom:document,Ao=Sn.body.scrollLeft||Sn.documentElement.scrollLeft,qo=Sn.body.scrollTop||Sn.documentElement.scrollTop;return hp(Ao,qo)},Lp=bn=>{const Sn=bn===void 0?window:bn;return Dy().browser.isFirefox()?dn.none():dn.from(Sn.visualViewport)},Xp=(bn,Sn,Ao,qo)=>({x:bn,y:Sn,width:Ao,height:qo,right:bn+Ao,bottom:Sn+qo}),Ny=bn=>{const Sn=bn===void 0?window:bn,Ao=Sn.document,qo=Rm(Zr.fromDom(Ao));return Lp(Sn).fold(()=>{const ps=Sn.document.documentElement,Tl=ps.clientWidth,Xs=ps.clientHeight;return Xp(qo.left,qo.top,Tl,Xs)},ps=>Xp(Math.max(ps.pageLeft,qo.left),Math.max(ps.pageTop,qo.top),ps.width,ps.height))},Ly=(bn,Sn,Ao)=>Lp(Ao).map(qo=>{const ps=Tl=>Sn(Mo(Tl));return qo.addEventListener(bn,ps),{unbind:()=>qo.removeEventListener(bn,ps)}}).getOrThunk(()=>({unbind:Mt}));var un=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Fn=tinymce.util.Tools.resolve("tinymce.Env");const fo=(bn,Sn)=>{bn.dispatch("FullscreenStateChanged",{state:Sn}),bn.dispatch("ResizeEditor")},Wo=bn=>Sn=>Sn.options.get(bn),pr=bn=>{const Sn=bn.options.register;Sn("fullscreen_native",{processor:"boolean",default:!1})},Vo=Wo("fullscreen_native"),$l=bn=>{const Sn=Zr.fromDom(bn.getElement());return _a(Sn).map(go).getOrThunk(()=>Us(ou(Sn)))},Kr=bn=>bn.fullscreenElement!==void 0?bn.fullscreenElement:bn.msFullscreenElement!==void 0?bn.msFullscreenElement:bn.webkitFullscreenElement!==void 0?bn.webkitFullscreenElement:null,Os=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",Pu=bn=>{const Sn=bn.dom;Sn.requestFullscreen?Sn.requestFullscreen():Sn.msRequestFullscreen?Sn.msRequestFullscreen():Sn.webkitRequestFullScreen&&Sn.webkitRequestFullScreen()},Kt=bn=>{const Sn=bn.dom;Sn.exitFullscreen?Sn.exitFullscreen():Sn.msExitFullscreen?Sn.msExitFullscreen():Sn.webkitCancelFullScreen&&Sn.webkitCancelFullScreen()},vn=bn=>bn.dom===Kr(ou(bn).dom),qn=(bn,Sn,Ao)=>ao(xu(bn,Ao),Sn),Eo=(bn,Sn)=>ao(Vs(bn),Sn),Xo=bn=>Ms(bn),Zs=(bn,Sn,Ao)=>qn(bn,qo=>Ml(qo,Sn),Ao),Zl=(bn,Sn)=>Eo(bn,Ao=>Ml(Ao,Sn)),ru="data-ephox-mobile-fullscreen-style",cr="display:none!important;",du="position:absolute!important;",Fp="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",H0="background-color:rgb(255,255,255)!important;",Bs=Fn.os.isAndroid(),qm=bn=>{const Sn=Au(bn,"background-color");return Sn!==void 0&&Sn!==""?"background-color:"+Sn+"!important":H0},f0=(bn,Sn,Ao)=>{const qo=Pm=>Zl(Pm,"*:not(.tox-silver-sink)"),ps=Pm=>am=>{const rp=wo(am,"style"),ip=rp===void 0?"no-styles":rp.trim();ip!==Pm&&(oo(am,ru,ip),Uu(am,bn.parseStyle(Pm)))},Tl=Zs(Sn,"*"),Xs=Vn(Tl,qo),gu=qm(Ao);Vt(Xs,ps(cr)),Vt(Tl,ps(du+Fp+gu)),ps((Bs===!0?"":du)+Fp+gu)(Sn)},kp=bn=>{const Sn=Xo("["+ru+"]");Vt(Sn,Ao=>{const qo=wo(Ao,ru);qo&&qo!=="no-styles"?Uu(Ao,bn.parseStyle(qo)):Oo(Ao,"style"),Oo(Ao,ru)})},fu=un.DOM,V0=()=>Ny(window),zx=bn=>window.scrollTo(bn.x,bn.y),c_=Lp().fold(()=>({bind:Mt,unbind:Mt}),bn=>{const Sn=no(),Ao=er(),qo=er(),ps=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Tl=()=>{window.requestAnimationFrame(()=>{Sn.on(Pm=>Uu(Pm,{top:bn.offsetTop+"px",left:bn.offsetLeft+"px",height:bn.height+"px",width:bn.width+"px"}))})},Xs=Ro(()=>{ps(),Tl()},50);return{bind:Pm=>{Sn.set(Pm),Xs.throttle(),Ao.set(Ly("resize",Xs.throttle)),qo.set(Ly("scroll",Xs.throttle))},unbind:()=>{Sn.on(()=>{Ao.clear(),qo.clear()}),Sn.clear()}}}),Hu=(bn,Sn)=>{const Ao=document.body,qo=document.documentElement,ps=bn.getContainer(),Tl=Zr.fromDom(ps),Xs=wu(Tl).filter(ap=>Hn(ap)&&sr(ap,"tox-silver-sink")),gu=$l(bn),pp=Sn.get(),Pm=Zr.fromDom(bn.getBody()),am=Fn.deviceType.isTouch(),rp=ps.style,ip=bn.iframeElement,Tp=ip==null?void 0:ip.style,lm=ap=>{ap(Ao,"tox-fullscreen"),ap(qo,"tox-fullscreen"),ap(ps,"tox-fullscreen"),_a(Tl).map(zu=>go(zu).dom).each(zu=>{ap(zu,"tox-fullscreen"),ap(zu,"tox-shadowhost")})},Vu=()=>{am&&kp(bn.dom),lm(fu.removeClass),c_.unbind(),dn.from(Sn.get()).each(ap=>ap.fullscreenChangeHandler.unbind())};if(pp)pp.fullscreenChangeHandler.unbind(),Vo(bn)&&vn(gu)&&Kt(ou(gu)),Tp.width=pp.iframeWidth,Tp.height=pp.iframeHeight,rp.width=pp.containerWidth,rp.height=pp.containerHeight,rp.top=pp.containerTop,rp.left=pp.containerLeft,An(Xs,pp.sinkCssPosition,(ap,zu)=>{ju(ap,"position",zu)}),Vu(),zx(pp.scrollPos),Sn.set(null),fo(bn,!1),bn.off("remove",Vu);else{const ap=ro(ou(gu),Os(),my=>{Vo(bn)&&!vn(gu)&&Sn.get()!==null&&Hu(bn,Sn)}),zu={scrollPos:V0(),containerWidth:rp.width,containerHeight:rp.height,containerTop:rp.top,containerLeft:rp.left,iframeWidth:Tp.width,iframeHeight:Tp.height,fullscreenChangeHandler:ap,sinkCssPosition:Xs.map(my=>Au(my,"position"))};am&&f0(bn.dom,Tl,Pm),Tp.width=Tp.height="100%",rp.width=rp.height="",lm(fu.addClass),Xs.each(my=>{ju(my,"position","fixed")}),c_.bind(Tl),bn.on("remove",Vu),Sn.set(zu),Vo(bn)&&Pu(gu),fo(bn,!0)}},m1=(bn,Sn)=>{bn.addCommand("mceFullScreen",()=>{Hu(bn,Sn)})};var A0=tinymce.util.Tools.resolve("tinymce.util.VK");const Fu=(bn,Sn)=>{bn.on("init",()=>{bn.on("keydown",Ao=>{Ao.keyCode===A0.TAB&&!(Ao.metaKey||Ao.ctrlKey)&&Sn.get()&&Ao.preventDefault()})})},T0=(bn,Sn)=>Ao=>{Ao.setActive(Sn.get()!==null);const qo=ps=>Ao.setActive(ps.state);return bn.on("FullscreenStateChanged",qo),()=>bn.off("FullscreenStateChanged",qo)},Mm=(bn,Sn)=>{const Ao=()=>bn.execCommand("mceFullScreen");bn.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:Ao,onSetup:T0(bn,Sn),context:"any"}),bn.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:Ao,onSetup:T0(bn,Sn),shortcut:"Meta+Shift+F",context:"any"})};var y1=()=>{e.add("fullscreen",bn=>{const Sn=o(null);return bn.inline||(pr(bn),m1(bn,Sn),Mm(bn,Sn),Fu(bn,Sn),bn.addShortcut("Meta+Shift+F","","mceFullScreen")),s(Sn)})};y1()})();(function(){const o=Hn=>{let Tn=Hn;return{get:()=>Tn,set:$n=>{Tn=$n}}};var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let a=0;const d=Hn=>{const Jn=new Date().getTime(),bo=Math.floor(s()*1e9);return a++,Hn+"_"+bo+a+String(Jn)},b=Hn=>({addTab:Jn=>{var bo;const $n=(bo=Jn.name)!==null&&bo!==void 0?bo:d("tab-name"),oo=Hn.get();oo[$n]=Jn,Hn.set(oo)}}),_=(Hn,Tn)=>{Hn.addCommand("mceHelp",Tn)},_e=Hn=>Tn=>Tn.options.get(Hn),nt=Hn=>{const Tn=Hn.options.register;Tn("help_tabs",{processor:"array"})},rt=_e("help_tabs"),ct=_e("forced_plugins"),dt=(Hn,Tn)=>{Hn.ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:Tn,context:"any"}),Hn.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:Tn,context:"any"})},pt=(Hn,Tn,Jn)=>{var bo;return Jn(Hn,Tn.prototype)?!0:((bo=Hn.constructor)===null||bo===void 0?void 0:bo.name)===Tn.name},bt=Hn=>{const Tn=typeof Hn;return Hn===null?"null":Tn==="object"&&Array.isArray(Hn)?"array":Tn==="object"&&pt(Hn,String,(Jn,bo)=>bo.isPrototypeOf(Jn))?"string":Tn},xt=Hn=>Tn=>bt(Tn)===Hn,wt=Hn=>Tn=>typeof Tn===Hn,Tt=Hn=>Tn=>Hn===Tn,Rt=xt("string"),Mt=Tt(void 0),Et=Hn=>Hn==null,$t=Hn=>!Et(Hn),Xt=wt("function"),Nt=(Hn=>()=>Hn)(!1);class Jt{constructor(Tn,Jn){this.tag=Tn,this.value=Jn}static some(Tn){return new Jt(!0,Tn)}static none(){return Jt.singletonNone}fold(Tn,Jn){return this.tag?Jn(this.value):Tn()}isSome(){return this.tag}isNone(){return!this.tag}map(Tn){return this.tag?Jt.some(Tn(this.value)):Jt.none()}bind(Tn){return this.tag?Tn(this.value):Jt.none()}exists(Tn){return this.tag&&Tn(this.value)}forall(Tn){return!this.tag||Tn(this.value)}filter(Tn){return!this.tag||Tn(this.value)?this:Jt.none()}getOr(Tn){return this.tag?this.value:Tn}or(Tn){return this.tag?this:Tn}getOrThunk(Tn){return this.tag?this.value:Tn()}orThunk(Tn){return this.tag?this:Tn()}getOrDie(Tn){if(this.tag)return this.value;throw new Error(Tn??"Called getOrDie on None")}static from(Tn){return $t(Tn)?Jt.some(Tn):Jt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Tn){this.tag&&Tn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Jt.singletonNone=new Jt(!1);const dn=Array.prototype.slice,Pn=Array.prototype.indexOf,an=(Hn,Tn)=>Pn.call(Hn,Tn),Vt=(Hn,Tn)=>an(Hn,Tn)>-1,ao=(Hn,Tn)=>{const Jn=Hn.length,bo=new Array(Jn);for(let $n=0;$n<Jn;$n++){const oo=Hn[$n];bo[$n]=Tn(oo,$n)}return bo},hn=(Hn,Tn)=>{const Jn=[];for(let bo=0,$n=Hn.length;bo<$n;bo++){const oo=Hn[bo];Tn(oo,bo)&&Jn.push(oo)}return Jn},fn=(Hn,Tn,Jn)=>{for(let bo=0,$n=Hn.length;bo<$n;bo++){const oo=Hn[bo];if(Tn(oo,bo))return Jt.some(oo);if(Jn(oo,bo))break}return Jt.none()},It=(Hn,Tn)=>fn(Hn,Tn,Nt),Vn=(Hn,Tn)=>{const Jn=dn.call(Hn,0);return Jn.sort(Tn),Jn},ln=Object.keys,uo=Object.hasOwnProperty,Ln=(Hn,Tn)=>An(Hn,Tn)?Jt.from(Hn[Tn]):Jt.none(),An=(Hn,Tn)=>uo.call(Hn,Tn),Wn=Hn=>{const Tn=[],Jn=bo=>{Tn.push(bo)};for(let bo=0;bo<Hn.length;bo++)Hn[bo].each(Jn);return Tn};var er=tinymce.util.Tools.resolve("tinymce.Resource"),no=tinymce.util.Tools.resolve("tinymce.util.I18n");const Ro=(Hn,Tn)=>er.load(`tinymce.html-i18n.help-keynav.${Tn}`,`${Hn}/js/i18n/keynav/${Tn}.js`),On=Hn=>Ro(Hn,no.getCode()).catch(()=>Ro(Hn,"en")),_o=(Hn,Tn)=>{Hn.on("init",()=>{On(Tn)})},Yt=async Hn=>({name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:await On(Hn)}]});var jr=tinymce.util.Tools.resolve("tinymce.Env");const lo=Hn=>{const Tn=jr.os.isMacOS()||jr.os.isiOS(),$n=Tn?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},oo=Hn.split("+"),wo=ao(oo,Oo=>{const Ir=Oo.toLowerCase().trim();return An($n,Ir)?$n[Ir]:Oo});return Tn?wo.join("").replace(/\s/,""):wo.join("+")},Ho=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Alt + F12"],action:"Focus to notification"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],mo=()=>{const Hn=ao(Ho,Jn=>{const bo=ao(Jn.shortcuts,lo).join(" or ");return[Jn.action,bo]});return{name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:Hn}]}},Co=ao([{key:"accordion",name:"Accordion"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"image",name:"Image"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"advlist",name:"List Styles"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"pagebreak",name:"Page Break"},{key:"preview",name:"Preview"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"table",name:"Table"},{key:"textcolor",name:"Text Color"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"typography",name:"Advanced Typography",type:"premium",slug:"advanced-typography"},{key:"ai",name:"AI Assistant",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"advcode",name:"Enhanced Code Editor",type:"premium"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium",slug:"introduction-to-mediaembed"},{key:"advtable",name:"Enhanced Tables",type:"premium"},{key:"exportpdf",name:"Export to PDF",type:"premium"},{key:"exportword",name:"Export to Word",type:"premium"},{key:"footnotes",name:"Footnotes",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"editimage",name:"Image Editing",type:"premium"},{key:"importword",name:"Import from Word",type:"premium"},{key:"inlinecss",name:"Inline CSS",type:"premium",slug:"inline-css"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"math",name:"Math",type:"premium"},{key:"markdown",name:"Markdown",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"mergetags",name:"Merge Tags",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium",slug:"introduction-to-powerpaste"},{key:"revisionhistory",name:"Revision History",type:"premium"},{key:"tinymcespellchecker",name:"Spell Checker",type:"premium",slug:"introduction-to-tiny-spellchecker"},{key:"autocorrect",name:"Spelling Autocorrect",type:"premium"},{key:"tableofcontents",name:"Table of Contents",type:"premium"},{key:"advtemplate",name:"Templates",type:"premium",slug:"advanced-templates"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"introduction-to-tiny-comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium",slug:"tinydrive-introduction"}],Hn=>({...Hn,type:Hn.type||"opensource",slug:Hn.slug||Hn.key})),mn=Hn=>{const Tn=()=>{const sr=hn(Co,({type:_r})=>_r==="premium"),vr=Vn(ao(sr,_r=>_r.name),(_r,fs)=>_r.localeCompare(fs)),as=ao(vr,_r=>`<li>${_r}</li>`).join("");return"<div><p><b>"+no.translate("Premium plugins:")+"</b></p><ul>"+as+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=help_dialog_plugin_tab&utm_source=tiny&utm_medium=referral&utm_term=read_more&utm_content=premium_plugin_heading" rel="noopener" target="_blank" data-alloy-tabstop="true" tabindex="-1">'+no.translate("Learn more...")+"</a></li></ul></div>"},Jn=sr=>`<a data-alloy-tabstop="true" tabindex="-1" href="${sr.url}" target="_blank" rel="noopener">${sr.name}</a>`,bo=(sr,vr)=>{const as=sr.plugins[vr].getMetadata;if(Xt(as)){const _r=as();return{name:_r.name,html:Jn(_r)}}else return{name:vr,html:vr}},$n=(sr,vr)=>It(Co,as=>as.key===vr).fold(()=>bo(sr,vr),as=>{const _r=as.type==="premium"?`${as.name}*`:as.name,fs=Jn({name:_r,url:`https://www.tiny.cloud/docs/tinymce/7/${as.slug}/`});return{name:_r,html:fs}}),oo=sr=>{const vr=ln(sr.plugins),as=ct(sr);return Mt(as)?vr:hn(vr,_r=>!Vt(as,_r))},wo=sr=>{const vr=oo(sr),as=Vn(ao(vr,_l=>$n(sr,_l)),(_l,Zr)=>_l.name.localeCompare(Zr.name)),_r=ao(as,_l=>"<li>"+_l.html+"</li>"),fs=_r.length,Ss=_r.join("");return"<p><b>"+no.translate(["Plugins installed ({0}):",fs])+"</b></p><ul>"+Ss+"</ul>"};return{name:"plugins",title:"Plugins",items:[{type:"htmlpanel",presets:"document",html:[(sr=>sr==null?"":"<div>"+wo(sr)+"</div>")(Hn),Tn()].join("")}]}};var wn=tinymce.util.Tools.resolve("tinymce.EditorManager");const Dn=()=>{const Jn='<a data-alloy-tabstop="true" tabindex="-1" href="https://www.tiny.cloud/docs/tinymce/7/changelog/?utm_campaign=help_dialog_version_tab&utm_source=tiny&utm_medium=referral" rel="noopener" target="_blank">TinyMCE '+(($n,oo)=>$n.indexOf("@")===0?"X.X.X":$n+"."+oo)(wn.majorVersion,wn.minorVersion)+"</a>";return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+no.translate(["You are using {0}",Jn])+"</p>",presets:"document"}]}},rn=(Hn,Tn)=>{const Jn={},bo=ao(Hn,$n=>{var oo;if(Rt($n))return An(Tn,$n)&&(Jn[$n]=Tn[$n]),$n;{const wo=(oo=$n.name)!==null&&oo!==void 0?oo:d("tab-name");return Jn[wo]=$n,wo}});return{tabs:Jn,names:bo}},Cn=Hn=>{const Tn=ln(Hn),Jn=Tn.indexOf("versions");return Jn!==-1&&(Tn.splice(Jn,1),Tn.push("versions")),{tabs:Hn,names:Tn}},Nn=async(Hn,Tn,Jn)=>{const bo=mo(),$n=await Yt(Jn),oo=mn(Hn),wo=Dn(),Oo={[bo.name]:bo,[$n.name]:$n,[oo.name]:oo,[wo.name]:wo,...Tn.get()};return Jt.from(rt(Hn)).fold(()=>Cn(Oo),Ir=>rn(Ir,Oo))},zn=(Hn,Tn,Jn)=>()=>{Nn(Hn,Tn,Jn).then(({tabs:bo,names:$n})=>{const oo=ao($n,Ir=>Ln(bo,Ir)),Oo={type:"tabpanel",tabs:Wn(oo)};Hn.windowManager.open({title:"Help",size:"medium",body:Oo,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})})};var So=()=>{e.add("help",(Hn,Tn)=>{const Jn=o({}),bo=b(Jn);nt(Hn);const $n=zn(Hn,Jn,Tn);return dt(Hn,$n),_(Hn,$n),Hn.shortcuts.add("Alt+0","Open help dialog","mceHelp"),_o(Hn,Tn),bo})};So()})();tinymce.Resource.add("tinymce.html-i18n.help-keynav.en",`<h1>Begin keyboard navigation</h1>

<dl>
  <dt>Focus the Menu bar</dt>
  <dd>Windows or Linux: Alt+F9</dd>
  <dd>macOS: &#x2325;F9</dd>
  <dt>Focus the Toolbar</dt>
  <dd>Windows or Linux: Alt+F10</dd>
  <dd>macOS: &#x2325;F10</dd>
  <dt>Focus the footer</dt>
  <dd>Windows or Linux: Alt+F11</dd>
  <dd>macOS: &#x2325;F11</dd>
  <dt>Focus the notification</dt>
  <dd>Windows or Linux: Alt+F12</dd>
  <dd>macOS: &#x2325;F12</dd>
  <dt>Focus a contextual toolbar</dt>
  <dd>Windows, Linux or macOS: Ctrl+F9</dd>
</dl>

<p>Navigation will start at the first UI item, which will be highlighted, or underlined in the case of the first item in
  the Footer element path.</p>

<h1>Navigate between UI sections</h1>

<p>To move from one UI section to the next, press <strong>Tab</strong>.</p>

<p>To move from one UI section to the previous, press <strong>Shift+Tab</strong>.</p>

<p>The <strong>Tab</strong> order of these UI sections is:</p>

<ol>
  <li>Menu bar</li>
  <li>Each toolbar group</li>
  <li>Sidebar</li>
  <li>Element path in the footer</li>
  <li>Word count toggle button in the footer</li>
  <li>Branding link in the footer</li>
  <li>Editor resize handle in the footer</li>
</ol>

<p>If a UI section is not present, it is skipped.</p>

<p>If the footer has keyboard navigation focus, and there is no visible sidebar, pressing <strong>Shift+Tab</strong>
  moves focus to the first toolbar group, not the last.</p>

<h1>Navigate within UI sections</h1>

<p>To move from one UI element to the next, press the appropriate <strong>Arrow</strong> key.</p>

<p>The <strong>Left</strong> and <strong>Right</strong> arrow keys</p>

<ul>
  <li>move between menus in the menu bar.</li>
  <li>open a sub-menu in a menu.</li>
  <li>move between buttons in a toolbar group.</li>
  <li>move between items in the footers element path.</li>
</ul>

<p>The <strong>Down</strong> and <strong>Up</strong> arrow keys</p>

<ul>
  <li>move between menu items in a menu.</li>
  <li>move between items in a toolbar pop-up menu.</li>
</ul>

<p><strong>Arrow</strong> keys cycle within the focused UI section.</p>

<p>To close an open menu, an open sub-menu, or an open pop-up menu, press the <strong>Esc</strong> key.</p>

<p>If the current focus is at the top of a particular UI section, pressing the <strong>Esc</strong> key also exits
  keyboard navigation entirely.</p>

<h1>Execute a menu item or toolbar button</h1>

<p>When the desired menu item or toolbar button is highlighted, press <strong>Return</strong>, <strong>Enter</strong>,
  or the <strong>Space bar</strong> to execute the item.</p>

<h1>Navigate non-tabbed dialogs</h1>

<p>In non-tabbed dialogs, the first interactive component takes focus when the dialog opens.</p>

<p>Navigate between interactive dialog components by pressing <strong>Tab</strong> or <strong>Shift+Tab</strong>.</p>

<h1>Navigate tabbed dialogs</h1>

<p>In tabbed dialogs, the first button in the tab menu takes focus when the dialog opens.</p>

<p>Navigate between interactive components of this dialog tab by pressing <strong>Tab</strong> or
  <strong>Shift+Tab</strong>.</p>

<p>Switch to another dialog tab by giving the tab menu focus and then pressing the appropriate <strong>Arrow</strong>
  key to cycle through the available tabs.</p>
`);(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=Object.getPrototypeOf,s=(Kt,vn,qn)=>{var Eo;return qn(Kt,vn.prototype)?!0:((Eo=Kt.constructor)===null||Eo===void 0?void 0:Eo.name)===vn.name},a=Kt=>{const vn=typeof Kt;return Kt===null?"null":vn==="object"&&Array.isArray(Kt)?"array":vn==="object"&&s(Kt,String,(qn,Eo)=>Eo.isPrototypeOf(qn))?"string":vn},d=Kt=>vn=>a(vn)===Kt,b=Kt=>vn=>typeof vn===Kt,_=Kt=>vn=>Kt===vn,_e=(Kt,vn)=>rt(Kt)&&s(Kt,vn,(qn,Eo)=>e(qn)===Eo),nt=d("string"),rt=d("object"),ct=Kt=>_e(Kt,Object),dt=d("array"),pt=_(null),bt=b("boolean"),xt=Kt=>Kt==null,wt=Kt=>!xt(Kt),Tt=b("function"),Rt=b("number"),Mt=(Kt,vn)=>{if(dt(Kt)){for(let qn=0,Eo=Kt.length;qn<Eo;++qn)if(!vn(Kt[qn]))return!1;return!0}return!1},Et=()=>{};class $t{constructor(vn,qn){this.tag=vn,this.value=qn}static some(vn){return new $t(!0,vn)}static none(){return $t.singletonNone}fold(vn,qn){return this.tag?qn(this.value):vn()}isSome(){return this.tag}isNone(){return!this.tag}map(vn){return this.tag?$t.some(vn(this.value)):$t.none()}bind(vn){return this.tag?vn(this.value):$t.none()}exists(vn){return this.tag&&vn(this.value)}forall(vn){return!this.tag||vn(this.value)}filter(vn){return!this.tag||vn(this.value)?this:$t.none()}getOr(vn){return this.tag?this.value:vn}or(vn){return this.tag?this:vn}getOrThunk(vn){return this.tag?this.value:vn()}orThunk(vn){return this.tag?this:vn()}getOrDie(vn){if(this.tag)return this.value;throw new Error(vn??"Called getOrDie on None")}static from(vn){return wt(vn)?$t.some(vn):$t.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(vn){this.tag&&vn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}$t.singletonNone=new $t(!1);const Xt=Object.keys,Zt=Object.hasOwnProperty,Nt=(Kt,vn)=>{const qn=Xt(Kt);for(let Eo=0,Xo=qn.length;Eo<Xo;Eo++){const Zs=qn[Eo],Zl=Kt[Zs];vn(Zl,Zs)}},Jt=Kt=>(vn,qn)=>{Kt[qn]=vn},dn=(Kt,vn,qn,Eo)=>{Nt(Kt,(Xo,Zs)=>{(vn(Xo,Zs)?qn:Eo)(Xo,Zs)})},Pn=(Kt,vn)=>{const qn={};return dn(Kt,vn,Jt(qn),Et),qn},an=(Kt,vn)=>Zt.call(Kt,vn),Vt=(Kt,vn)=>an(Kt,vn)&&Kt[vn]!==void 0&&Kt[vn]!==null,ao=Array.prototype.push,hn=Kt=>{const vn=[];for(let qn=0,Eo=Kt.length;qn<Eo;++qn){if(!dt(Kt[qn]))throw new Error("Arr.flatten item "+qn+" was not an array, input: "+Kt);ao.apply(vn,Kt[qn])}return vn},fn=(Kt,vn)=>vn>=0&&vn<Kt.length?$t.some(Kt[vn]):$t.none(),It=Kt=>fn(Kt,0),Vn=(Kt,vn)=>{for(let qn=0;qn<Kt.length;qn++){const Eo=vn(Kt[qn],qn);if(Eo.isSome())return Eo}return $t.none()};typeof window<"u"||Function("return this;")();const ln=(Kt,vn,qn)=>{if(nt(qn)||bt(qn)||Rt(qn))Kt.setAttribute(vn,qn+"");else throw console.error("Invalid call to Attribute.set. Key ",vn,":: Value ",qn,":: Element ",Kt),new Error("Attribute value was not simple")},uo=(Kt,vn,qn)=>{ln(Kt.dom,vn,qn)},Ln=(Kt,vn)=>{Kt.dom.removeAttribute(vn)},An=(Kt,vn)=>{const Eo=(vn||document).createElement("div");if(Eo.innerHTML=Kt,!Eo.hasChildNodes()||Eo.childNodes.length>1){const Xo="HTML does not have a single root node";throw console.error(Xo,Kt),new Error(Xo)}return no(Eo.childNodes[0])},Wn=(Kt,vn)=>{const Eo=(vn||document).createElement(Kt);return no(Eo)},er=(Kt,vn)=>{const Eo=(vn||document).createTextNode(Kt);return no(Eo)},no=Kt=>{if(Kt==null)throw new Error("Node cannot be null or undefined");return{dom:Kt}},On={fromHtml:An,fromTag:Wn,fromText:er,fromDom:no,fromPoint:(Kt,vn,qn)=>$t.from(Kt.dom.elementFromPoint(vn,qn)).map(no)};var _o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Yt=tinymce.util.Tools.resolve("tinymce.util.URI");const jr=Kt=>Kt.length>0,lo=Kt=>vn=>vn.options.get(Kt),Ho=Kt=>{const vn=Kt.options.register;vn("image_dimensions",{processor:"boolean",default:!0}),vn("image_advtab",{processor:"boolean",default:!1}),vn("image_uploadtab",{processor:"boolean",default:!0}),vn("image_prepend_url",{processor:"string",default:""}),vn("image_class_list",{processor:"object[]"}),vn("image_description",{processor:"boolean",default:!0}),vn("image_title",{processor:"boolean",default:!1}),vn("image_caption",{processor:"boolean",default:!1}),vn("image_list",{processor:qn=>{const Eo=qn===!1||nt(qn)||Mt(qn,rt)||Tt(qn);return Eo?{value:qn,valid:Eo}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},mo=lo("image_dimensions"),Co=lo("image_advtab"),mn=lo("image_uploadtab"),wn=lo("image_prepend_url"),Dn=lo("image_class_list"),rn=lo("image_description"),Cn=lo("image_title"),Nn=lo("image_caption"),zn=lo("image_list"),So=lo("a11y_advanced_options"),Hn=lo("automatic_uploads"),Tn=Kt=>jr(Kt.options.get("images_upload_url")),Jn=Kt=>wt(Kt.options.get("images_upload_handler")),bo=(Kt,vn)=>Math.max(parseInt(Kt,10),parseInt(vn,10)),$n=Kt=>new Promise(vn=>{const qn=document.createElement("img"),Eo=Zs=>{qn.onload=qn.onerror=null,qn.parentNode&&qn.parentNode.removeChild(qn),vn(Zs)};qn.onload=()=>{const Zs=bo(qn.width,qn.clientWidth),Zl=bo(qn.height,qn.clientHeight),ru={width:Zs,height:Zl};Eo(Promise.resolve(ru))},qn.onerror=()=>{Eo(Promise.reject(`Failed to get image dimensions for: ${Kt}`))};const Xo=qn.style;Xo.visibility="hidden",Xo.position="fixed",Xo.bottom=Xo.left="0px",Xo.width=Xo.height="auto",document.body.appendChild(qn),qn.src=Kt}),oo=Kt=>(Kt&&(Kt=Kt.replace(/px$/,"")),Kt),wo=Kt=>(Kt.length>0&&/^[0-9]+$/.test(Kt)&&(Kt+="px"),Kt),Oo=Kt=>{if(Kt.margin){const vn=String(Kt.margin).split(" ");switch(vn.length){case 1:Kt["margin-top"]=Kt["margin-top"]||vn[0],Kt["margin-right"]=Kt["margin-right"]||vn[0],Kt["margin-bottom"]=Kt["margin-bottom"]||vn[0],Kt["margin-left"]=Kt["margin-left"]||vn[0];break;case 2:Kt["margin-top"]=Kt["margin-top"]||vn[0],Kt["margin-right"]=Kt["margin-right"]||vn[1],Kt["margin-bottom"]=Kt["margin-bottom"]||vn[0],Kt["margin-left"]=Kt["margin-left"]||vn[1];break;case 3:Kt["margin-top"]=Kt["margin-top"]||vn[0],Kt["margin-right"]=Kt["margin-right"]||vn[1],Kt["margin-bottom"]=Kt["margin-bottom"]||vn[2],Kt["margin-left"]=Kt["margin-left"]||vn[1];break;case 4:Kt["margin-top"]=Kt["margin-top"]||vn[0],Kt["margin-right"]=Kt["margin-right"]||vn[1],Kt["margin-bottom"]=Kt["margin-bottom"]||vn[2],Kt["margin-left"]=Kt["margin-left"]||vn[3]}delete Kt.margin}return Kt},Ir=(Kt,vn)=>{const qn=zn(Kt);nt(qn)?fetch(qn).then(Eo=>{Eo.ok&&Eo.json().then(vn)}):Tt(qn)?qn(vn):vn(qn)},sr=(Kt,vn,qn)=>{const Eo=()=>{qn.onload=qn.onerror=null,Kt.selection&&(Kt.selection.select(qn),Kt.nodeChanged())};qn.onload=()=>{!vn.width&&!vn.height&&mo(Kt)&&Kt.dom.setAttribs(qn,{width:String(qn.clientWidth),height:String(qn.clientHeight)}),Eo()},qn.onerror=Eo},vr=Kt=>new Promise((vn,qn)=>{const Eo=new FileReader;Eo.onload=()=>{vn(Eo.result)},Eo.onerror=()=>{var Xo;qn((Xo=Eo.error)===null||Xo===void 0?void 0:Xo.message)},Eo.readAsDataURL(Kt)}),as=Kt=>Kt.nodeName==="IMG"&&(Kt.hasAttribute("data-mce-object")||Kt.hasAttribute("data-mce-placeholder")),_r=(Kt,vn)=>{const qn=Kt.options.get;return Yt.isDomSafe(vn,"img",{allow_html_data_urls:qn("allow_html_data_urls"),allow_script_urls:qn("allow_script_urls"),allow_svg_data_urls:qn("allow_svg_data_urls")})},fs=_o.DOM,Ss=Kt=>Kt.style.marginLeft&&Kt.style.marginRight&&Kt.style.marginLeft===Kt.style.marginRight?oo(Kt.style.marginLeft):"",As=Kt=>Kt.style.marginTop&&Kt.style.marginBottom&&Kt.style.marginTop===Kt.style.marginBottom?oo(Kt.style.marginTop):"",_l=Kt=>Kt.style.borderWidth?oo(Kt.style.borderWidth):"",Zr=(Kt,vn)=>{var qn;return Kt.hasAttribute(vn)&&(qn=Kt.getAttribute(vn))!==null&&qn!==void 0?qn:""},Ml=Kt=>Kt.parentNode!==null&&Kt.parentNode.nodeName==="FIGURE",tr=(Kt,vn,qn)=>{qn===""||qn===null?Kt.removeAttribute(vn):Kt.setAttribute(vn,qn)},Ms=Kt=>{const vn=fs.create("figure",{class:"image"});fs.insertAfter(vn,Kt),vn.appendChild(Kt),vn.appendChild(fs.create("figcaption",{contentEditable:"true"},"Caption")),vn.contentEditable="false"},cu=Kt=>{const vn=Kt.parentNode;wt(vn)&&(fs.insertAfter(Kt,vn),fs.remove(vn))},ou=Kt=>{Ml(Kt)?cu(Kt):Ms(Kt)},Yl=(Kt,vn)=>{const qn=Kt.getAttribute("style"),Eo=vn(qn!==null?qn:"");Eo.length>0?(Kt.setAttribute("style",Eo),Kt.setAttribute("data-mce-style",Eo)):Kt.removeAttribute("style")},xu=(Kt,vn)=>(qn,Eo,Xo)=>{const Zs=qn.style;Zs[Eo]?(Zs[Eo]=wo(Xo),Yl(qn,vn)):tr(qn,Eo,Xo)},Vs=(Kt,vn)=>Kt.style[vn]?oo(Kt.style[vn]):Zr(Kt,vn),wu=(Kt,vn)=>{const qn=wo(vn);Kt.style.marginLeft=qn,Kt.style.marginRight=qn},iu=(Kt,vn)=>{const qn=wo(vn);Kt.style.marginTop=qn,Kt.style.marginBottom=qn},ba=(Kt,vn)=>{const qn=wo(vn);Kt.style.borderWidth=qn},Jr=(Kt,vn)=>{Kt.style.borderStyle=vn},_a=Kt=>{var vn;return(vn=Kt.style.borderStyle)!==null&&vn!==void 0?vn:""},go=Kt=>wt(Kt)&&Kt.nodeName==="FIGURE",Po=Kt=>Kt.nodeName==="IMG",Sr=Kt=>fs.getAttrib(Kt,"alt").length===0&&fs.getAttrib(Kt,"role")==="presentation",Fr=Kt=>Sr(Kt)?"":Zr(Kt,"alt"),Us=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),xa=(Kt,vn)=>{var qn;const Eo=document.createElement("img");return tr(Eo,"style",vn.style),(Ss(Eo)||vn.hspace!=="")&&wu(Eo,vn.hspace),(As(Eo)||vn.vspace!=="")&&iu(Eo,vn.vspace),(_l(Eo)||vn.border!=="")&&ba(Eo,vn.border),(_a(Eo)||vn.borderStyle!=="")&&Jr(Eo,vn.borderStyle),Kt((qn=Eo.getAttribute("style"))!==null&&qn!==void 0?qn:"")},ju=(Kt,vn)=>{const qn=document.createElement("img");if(jo(Kt,{...vn,caption:!1},qn),Un(qn,vn.alt,vn.isDecorative),vn.caption){const Eo=fs.create("figure",{class:"image"});return Eo.appendChild(qn),Eo.appendChild(fs.create("figcaption",{contentEditable:"true"},"Caption")),Eo.contentEditable="false",Eo}else return qn},Uu=(Kt,vn)=>({src:Zr(vn,"src"),alt:Fr(vn),title:Zr(vn,"title"),width:Vs(vn,"width"),height:Vs(vn,"height"),class:Zr(vn,"class"),style:Kt(Zr(vn,"style")),caption:Ml(vn),hspace:Ss(vn),vspace:As(vn),border:_l(vn),borderStyle:_a(vn),isDecorative:Sr(vn)}),Au=(Kt,vn,qn,Eo,Xo)=>{qn[Eo]!==vn[Eo]&&Xo(Kt,Eo,String(qn[Eo]))},Un=(Kt,vn,qn)=>{if(qn){fs.setAttrib(Kt,"role","presentation");const Eo=On.fromDom(Kt);uo(Eo,"alt","")}else{if(pt(vn)){const Eo=On.fromDom(Kt);Ln(Eo,"alt")}else{const Eo=On.fromDom(Kt);uo(Eo,"alt",vn)}fs.getAttrib(Kt,"role")==="presentation"&&fs.setAttrib(Kt,"role","")}},Bn=(Kt,vn,qn)=>{(qn.alt!==vn.alt||qn.isDecorative!==vn.isDecorative)&&Un(Kt,qn.alt,qn.isDecorative)},Mo=(Kt,vn)=>(qn,Eo,Xo)=>{Kt(qn,Xo),Yl(qn,vn)},jo=(Kt,vn,qn)=>{const Eo=Uu(Kt,qn);Au(qn,Eo,vn,"caption",(Xo,Zs,Zl)=>ou(Xo)),Au(qn,Eo,vn,"src",tr),Au(qn,Eo,vn,"title",tr),Au(qn,Eo,vn,"width",xu("width",Kt)),Au(qn,Eo,vn,"height",xu("height",Kt)),Au(qn,Eo,vn,"class",tr),Au(qn,Eo,vn,"style",Mo((Xo,Zs)=>tr(Xo,"style",Zs),Kt)),Au(qn,Eo,vn,"hspace",Mo(wu,Kt)),Au(qn,Eo,vn,"vspace",Mo(iu,Kt)),Au(qn,Eo,vn,"border",Mo(ba,Kt)),Au(qn,Eo,vn,"borderStyle",Mo(Jr,Kt)),Bn(qn,Eo,vn)},ss=(Kt,vn)=>{const qn=Kt.dom.styles.parse(vn),Eo=Oo(qn),Xo=Kt.dom.styles.parse(Kt.dom.styles.serialize(Eo));return Kt.dom.styles.serialize(Xo)},Cs=Kt=>{const vn=Kt.selection.getNode(),qn=Kt.dom.getParent(vn,"figure.image");return qn?Kt.dom.select("img",qn)[0]:vn&&(vn.nodeName!=="IMG"||as(vn))?null:vn},Ns=(Kt,vn)=>{var qn;const Eo=Kt.dom,Xo=Pn(Kt.schema.getTextBlockElements(),(Zl,ru)=>!Kt.schema.isValidChild(ru,"figure")),Zs=Eo.getParent(vn.parentNode,Zl=>Vt(Xo,Zl.nodeName),Kt.getBody());return Zs&&(qn=Eo.split(Zs,vn))!==null&&qn!==void 0?qn:vn},Tu=Kt=>{const vn=Cs(Kt);return vn?Uu(qn=>ss(Kt,qn),vn):Us()},ro=(Kt,vn)=>{const qn=ju(Xo=>ss(Kt,Xo),vn);Kt.dom.setAttrib(qn,"data-mce-id","__mcenew"),Kt.focus(),Kt.selection.setContent(qn.outerHTML);const Eo=Kt.dom.select('*[data-mce-id="__mcenew"]')[0];if(Kt.dom.setAttrib(Eo,"data-mce-id",null),go(Eo)){const Xo=Ns(Kt,Eo);Kt.selection.select(Xo)}else Kt.selection.select(Eo)},Ls=(Kt,vn)=>{Kt.dom.setAttrib(vn,"src",vn.getAttribute("src"))},Kn=(Kt,vn)=>{if(vn){const qn=Kt.dom.is(vn.parentNode,"figure.image")?vn.parentNode:vn;Kt.dom.remove(qn),Kt.focus(),Kt.nodeChanged(),Kt.dom.isEmpty(Kt.getBody())&&(Kt.setContent(""),Kt.selection.setCursorLocation())}},eo=(Kt,vn)=>{const qn=Cs(Kt);if(qn)if(jo(Eo=>ss(Kt,Eo),vn,qn),Ls(Kt,qn),go(qn.parentNode)){const Eo=qn.parentNode;Ns(Kt,Eo),Kt.selection.select(qn.parentNode)}else Kt.selection.select(qn),sr(Kt,vn,qn)},nr=(Kt,vn)=>{const qn=vn.src;return{...vn,src:_r(Kt,qn)?qn:""}},lr=(Kt,vn)=>{const qn=Cs(Kt);if(qn){const Xo={...Uu(Zl=>ss(Kt,Zl),qn),...vn},Zs=nr(Kt,Xo);Xo.src?eo(Kt,Zs):Kn(Kt,qn)}else vn.src&&ro(Kt,{...Us(),...vn})},es=(Kt=>(...vn)=>{if(vn.length===0)throw new Error("Can't merge zero objects");const qn={};for(let Eo=0;Eo<vn.length;Eo++){const Xo=vn[Eo];for(const Zs in Xo)an(Xo,Zs)&&(qn[Zs]=Kt(qn[Zs],Xo[Zs]))}return qn})((Kt,vn)=>ct(Kt)&&ct(vn)?es(Kt,vn):vn);var Hr=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),hs=tinymce.util.Tools.resolve("tinymce.util.Tools");const ks=Kt=>nt(Kt.value)?Kt.value:"",Nl=Kt=>nt(Kt.text)?Kt.text:nt(Kt.title)?Kt.title:"",Xl=(Kt,vn)=>{const qn=[];return hs.each(Kt,Eo=>{const Xo=Nl(Eo);if(Eo.menu!==void 0){const Zs=Xl(Eo.menu,vn);qn.push({text:Xo,items:Zs})}else{const Zs=vn(Eo);qn.push({text:Xo,value:Zs})}}),qn},uu=(Kt=ks)=>vn=>vn?$t.from(vn).map(qn=>Xl(qn,Kt)):$t.none(),Kp=Kt=>uu(ks)(Kt),sm=Kt=>an(Kt,"items"),_s=(Kt,vn)=>Vn(Kt,qn=>sm(qn)?_s(qn.items,vn):qn.value===vn?$t.some(qn):$t.none()),Pl={sanitizer:uu,sanitize:Kp,findEntry:(Kt,vn)=>Kt.bind(qn=>_s(qn,vn))},Cp={makeTab:Kt=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},dp=Kt=>{const vn=Pl.sanitizer(fu=>Kt.convertURL(fu.value||fu.url||"","src")),qn=new Promise(fu=>{Ir(Kt,V0=>{fu(vn(V0).map(zx=>hn([[{text:"None",value:""}],zx])))})}),Eo=Pl.sanitize(Dn(Kt)),Xo=Co(Kt),Zs=mn(Kt),Zl=Tn(Kt),ru=Jn(Kt),cr=Tu(Kt),du=rn(Kt),Fp=Cn(Kt),H0=mo(Kt),Bs=Nn(Kt),qm=So(Kt),f0=Hn(Kt),kp=$t.some(wn(Kt)).filter(fu=>nt(fu)&&fu.length>0);return qn.then(fu=>({image:cr,imageList:fu,classList:Eo,hasAdvTab:Xo,hasUploadTab:Zs,hasUploadUrl:Zl,hasUploadHandler:ru,hasDescription:du,hasImageTitle:Fp,hasDimensions:H0,hasImageCaption:Bs,prependURL:kp,hasAccessibilityOptions:qm,automaticUploads:f0}))},ku=Kt=>{const vn={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},qn=Kt.imageList.map(Fp=>({name:"images",type:"listbox",label:"Image list",items:Fp})),Eo={name:"alt",type:"input",label:"Alternative description",enabled:!(Kt.hasAccessibilityOptions&&Kt.image.isDecorative)},Xo={name:"title",type:"input",label:"Image title"},Zs={name:"dimensions",type:"sizeinput"},Zl={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},ru=Kt.classList.map(Fp=>({name:"classes",type:"listbox",label:"Class",items:Fp})),cr={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},du=Fp=>Fp?{type:"grid",columns:2}:{type:"panel"};return hn([[vn],qn.toArray(),Kt.hasAccessibilityOptions&&Kt.hasDescription?[Zl]:[],Kt.hasDescription?[Eo]:[],Kt.hasImageTitle?[Xo]:[],Kt.hasDimensions?[Zs]:[],[{...du(Kt.classList.isSome()&&Kt.hasImageCaption),items:hn([ru.toArray(),Kt.hasImageCaption?[cr]:[]])}]])},Vm={makeTab:Kt=>({title:"General",name:"general",items:ku(Kt)}),makeItems:ku},Dp={makeTab:Kt=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Np=Kt=>({prevImage:Pl.findEntry(Kt.imageList,Kt.image.src),prevAlt:Kt.image.alt,open:!0}),fp=Kt=>({src:{value:Kt.src,meta:{}},images:Kt.src,alt:Kt.alt,title:Kt.title,dimensions:{width:Kt.width,height:Kt.height},classes:Kt.class,caption:Kt.caption,style:Kt.style,vspace:Kt.vspace,border:Kt.border,hspace:Kt.hspace,borderstyle:Kt.borderStyle,fileinput:[],isDecorative:Kt.isDecorative}),ry=(Kt,vn)=>({src:Kt.src.value,alt:(Kt.alt===null||Kt.alt.length===0)&&vn?null:Kt.alt,title:Kt.title,width:Kt.dimensions.width,height:Kt.dimensions.height,class:Kt.classes,style:Kt.style,caption:Kt.caption,hspace:Kt.hspace,vspace:Kt.vspace,border:Kt.border,borderStyle:Kt.borderstyle,isDecorative:Kt.isDecorative}),im=(Kt,vn)=>/^(?:[a-zA-Z]+:)?\/\//.test(vn)?$t.none():Kt.prependURL.bind(qn=>vn.substring(0,qn.length)!==qn?$t.some(qn+vn):$t.none()),Yp=(Kt,vn)=>{const qn=vn.getData();im(Kt,qn.src.value).each(Eo=>{vn.setData({src:{value:Eo,meta:qn.src.meta}})})},Wm=(Kt,vn,qn)=>{Kt.hasDescription&&nt(qn.alt)&&(vn.alt=qn.alt),Kt.hasAccessibilityOptions&&(vn.isDecorative=qn.isDecorative||vn.isDecorative||!1),Kt.hasImageTitle&&nt(qn.title)&&(vn.title=qn.title),Kt.hasDimensions&&(nt(qn.width)&&(vn.dimensions.width=qn.width),nt(qn.height)&&(vn.dimensions.height=qn.height)),nt(qn.class)&&Pl.findEntry(Kt.classList,qn.class).each(Eo=>{vn.classes=Eo.value}),Kt.hasImageCaption&&bt(qn.caption)&&(vn.caption=qn.caption),Kt.hasAdvTab&&(nt(qn.style)&&(vn.style=qn.style),nt(qn.vspace)&&(vn.vspace=qn.vspace),nt(qn.border)&&(vn.border=qn.border),nt(qn.hspace)&&(vn.hspace=qn.hspace),nt(qn.borderstyle)&&(vn.borderstyle=qn.borderstyle))},Tm=(Kt,vn)=>{const qn=vn.getData(),Eo=qn.src.meta;if(Eo!==void 0){const Xo=es({},qn);Wm(Kt,Xo,Eo),vn.setData(Xo)}},py=(Kt,vn,qn,Eo)=>{const Xo=Eo.getData(),Zs=Xo.src.value,Zl=Xo.src.meta||{};!Zl.width&&!Zl.height&&vn.hasDimensions&&(jr(Zs)?Kt.imageSize(Zs).then(ru=>{qn.open&&Eo.setData({dimensions:ru})}).catch(ru=>console.error(ru)):Eo.setData({dimensions:{width:"",height:""}}))},gy=(Kt,vn,qn)=>{const Eo=qn.getData(),Xo=Pl.findEntry(Kt.imageList,Eo.src.value);vn.prevImage=Xo,qn.setData({images:Xo.map(Zs=>Zs.value).getOr("")})},U0=(Kt,vn,qn,Eo)=>{Yp(vn,Eo),Tm(vn,Eo),py(Kt,vn,qn,Eo),gy(vn,qn,Eo)},Im=(Kt,vn,qn,Eo)=>{const Xo=Eo.getData(),Zs=Pl.findEntry(vn.imageList,Xo.images);Zs.each(Zl=>{Xo.alt===""||qn.prevImage.map(cr=>cr.text===Xo.alt).getOr(!1)?Zl.value===""?Eo.setData({src:Zl,alt:qn.prevAlt}):Eo.setData({src:Zl,alt:Zl.text}):Eo.setData({src:Zl})}),qn.prevImage=Zs,U0(Kt,vn,qn,Eo)},Ap=(Kt,vn,qn,Eo)=>{const Xo=Eo.getData();Eo.block("Uploading image"),It(Xo.fileinput).fold(()=>{Eo.unblock()},Zs=>{const Zl=URL.createObjectURL(Zs),ru=()=>{Eo.unblock(),URL.revokeObjectURL(Zl)},cr=du=>{Eo.setData({src:{value:du,meta:{}}}),Eo.showTab("general"),U0(Kt,vn,qn,Eo),Eo.focus("src")};vr(Zs).then(du=>{const Fp=Kt.createBlobCache(Zs,Zl,du);vn.automaticUploads?Kt.uploadImage(Fp).then(H0=>{cr(H0.url),ru()}).catch(H0=>{ru(),Kt.alertErr(H0,()=>{Eo.focus("fileinput")})}):(Kt.addToBlobCache(Fp),cr(Fp.blobUri()),Eo.unblock())})})},sy=(Kt,vn,qn)=>(Eo,Xo)=>{Xo.name==="src"?U0(Kt,vn,qn,Eo):Xo.name==="images"?Im(Kt,vn,qn,Eo):Xo.name==="alt"?qn.prevAlt=Eo.getData().alt:Xo.name==="fileinput"?Ap(Kt,vn,qn,Eo):Xo.name==="isDecorative"&&Eo.setEnabled("alt",!Eo.getData().isDecorative)},iy=Kt=>()=>{Kt.open=!1},Dy=Kt=>Kt.hasAdvTab||Kt.hasUploadUrl||Kt.hasUploadHandler?{type:"tabpanel",tabs:hn([[Vm.makeTab(Kt)],Kt.hasAdvTab?[Cp.makeTab(Kt)]:[],Kt.hasUploadTab&&(Kt.hasUploadUrl||Kt.hasUploadHandler)?[Dp.makeTab(Kt)]:[]])}:{type:"panel",items:Vm.makeItems(Kt)},E0=(Kt,vn,qn)=>Eo=>{const Xo=es(fp(vn.image),Eo.getData()),Zs={...Xo,style:xa(qn.normalizeCss,ry(Xo,!1))};Kt.execCommand("mceUpdateImage",!1,ry(Zs,vn.hasAccessibilityOptions)),Kt.editorUpload.uploadImagesAuto(),Eo.close()},hp=Kt=>vn=>_r(Kt,vn)?$n(Kt.documentBaseURI.toAbsolute(vn)).then(qn=>({width:String(qn.width),height:String(qn.height)})):Promise.resolve({width:"",height:""}),Rm=Kt=>(vn,qn,Eo)=>{var Xo;return Kt.editorUpload.blobCache.create({blob:vn,blobUri:qn,name:(Xo=vn.name)===null||Xo===void 0?void 0:Xo.replace(/\.[^\.]+$/,""),filename:vn.name,base64:Eo.split(",")[1]})},Lp=Kt=>vn=>{Kt.editorUpload.blobCache.add(vn)},Xp=Kt=>(vn,qn)=>{Kt.windowManager.alert(vn,qn)},Ny=Kt=>vn=>ss(Kt,vn),Ly=Kt=>vn=>Kt.dom.parseStyle(vn),un=Kt=>(vn,qn)=>Kt.dom.serializeStyle(vn,qn),Fn=Kt=>vn=>Hr(Kt).upload([vn],!1).then(qn=>{var Eo;return qn.length===0?Promise.reject("Failed to upload image"):qn[0].status===!1?Promise.reject((Eo=qn[0].error)===null||Eo===void 0?void 0:Eo.message):qn[0]}),fo=Kt=>{const vn={imageSize:hp(Kt),addToBlobCache:Lp(Kt),createBlobCache:Rm(Kt),alertErr:Xp(Kt),normalizeCss:Ny(Kt),parseStyle:Ly(Kt),serializeStyle:un(Kt),uploadImage:Fn(Kt)};return{open:()=>{dp(Kt).then(Eo=>{const Xo=Np(Eo);return{title:"Insert/Edit Image",size:"normal",body:Dy(Eo),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:fp(Eo.image),onSubmit:E0(Kt,Eo,vn),onChange:sy(vn,Eo,Xo),onClose:iy(Xo)}}).then(Kt.windowManager.open)}}},Wo=Kt=>{Kt.addCommand("mceImage",fo(Kt).open),Kt.addCommand("mceUpdateImage",(vn,qn)=>{Kt.undoManager.transact(()=>lr(Kt,qn))})},pr=Kt=>{const vn=Kt.attr("class");return wt(vn)&&/\bimage\b/.test(vn)},Vo=Kt=>vn=>{let qn=vn.length;const Eo=Xo=>{Xo.attr("contenteditable",Kt?"true":null)};for(;qn--;){const Xo=vn[qn];pr(Xo)&&(Xo.attr("contenteditable",Kt?"false":null),hs.each(Xo.getAll("figcaption"),Eo))}},$l=Kt=>{Kt.on("PreInit",()=>{Kt.parser.addNodeFilter("figure",Vo(!0)),Kt.serializer.addNodeFilter("figure",Vo(!1))})},Kr=Kt=>vn=>{const qn=()=>{vn.setEnabled(Kt.selection.isEditable())};return Kt.on("NodeChange",qn),qn(),()=>{Kt.off("NodeChange",qn)}},Os=Kt=>{Kt.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:fo(Kt).open,onSetup:vn=>{vn.setActive(wt(Cs(Kt)));const qn=Kt.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",vn.setActive).unbind,Eo=Kr(Kt)(vn);return()=>{qn(),Eo()}}}),Kt.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:fo(Kt).open,onSetup:Kr(Kt)}),Kt.ui.registry.addContextMenu("image",{update:vn=>Kt.selection.isEditable()&&(go(vn)||Po(vn)&&!as(vn))?["image"]:[]})};var Pu=()=>{o.add("image",Kt=>{Ho(Kt),$l(Kt),Os(Kt),Wo(Kt)})};Pu()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(lo,Ho,mo)=>{var Co;return mo(lo,Ho.prototype)?!0:((Co=lo.constructor)===null||Co===void 0?void 0:Co.name)===Ho.name},s=lo=>{const Ho=typeof lo;return lo===null?"null":Ho==="object"&&Array.isArray(lo)?"array":Ho==="object"&&e(lo,String,(mo,Co)=>Co.isPrototypeOf(mo))?"string":Ho},a=lo=>Ho=>s(Ho)===lo,d=lo=>Ho=>typeof Ho===lo,b=a("string"),_=a("object"),_e=a("array"),nt=d("function");var rt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ct=tinymce.util.Tools.resolve("tinymce.EditorManager"),dt=tinymce.util.Tools.resolve("tinymce.Env"),pt=tinymce.util.Tools.resolve("tinymce.util.Tools");const bt=lo=>Ho=>Ho.options.get(lo),xt=lo=>{const Ho=lo.options.register,mo=Co=>b(Co)||nt(Co)||_(Co);Ho("importcss_merge_classes",{processor:"boolean",default:!0}),Ho("importcss_exclusive",{processor:"boolean",default:!0}),Ho("importcss_selector_converter",{processor:"function"}),Ho("importcss_selector_filter",{processor:mo}),Ho("importcss_file_filter",{processor:mo}),Ho("importcss_groups",{processor:"object[]"}),Ho("importcss_append",{processor:"boolean",default:!1})},wt=bt("importcss_merge_classes"),Tt=bt("importcss_exclusive"),Rt=bt("importcss_selector_converter"),Mt=bt("importcss_selector_filter"),Et=bt("importcss_groups"),$t=bt("importcss_append"),Xt=bt("importcss_file_filter"),Zt=bt("skin"),Nt=bt("skin_url"),Jt=Array.prototype.push,dn=(lo,Ho)=>{const mo=lo.length,Co=new Array(mo);for(let mn=0;mn<mo;mn++){const wn=lo[mn];Co[mn]=Ho(wn,mn)}return Co},Pn=lo=>{const Ho=[];for(let mo=0,Co=lo.length;mo<Co;++mo){if(!_e(lo[mo]))throw new Error("Arr.flatten item "+mo+" was not an array, input: "+lo);Jt.apply(Ho,lo[mo])}return Ho},an=(lo,Ho)=>Pn(dn(lo,Ho)),Vt=()=>{const lo=[],Ho=[],mo={};return{addItemToGroup:(Dn,rn)=>{mo[Dn]?mo[Dn].push(rn):(Ho.push(Dn),mo[Dn]=[rn])},addItem:Dn=>{lo.push(Dn)},toFormats:()=>an(Ho,rn=>{const Cn=mo[rn];return Cn.length===0?[]:[{title:rn,items:Cn}]}).concat(lo)}},ao=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,hn=lo=>{const Ho=dt.cacheSuffix;return b(lo)&&(lo=lo.replace("?"+Ho,"").replace("&"+Ho,"")),lo},fn=(lo,Ho)=>{const mo=Zt(lo);if(mo){const Co=Nt(lo),mn=Co?lo.documentBaseURI.toAbsolute(Co):ct.baseURL+"/skins/ui/"+mo,wn=ct.baseURL+"/skins/content/",Dn=lo.editorManager.suffix;return Ho===mn+"/content"+(lo.inline?".inline":"")+`${Dn}.css`||Ho.indexOf(wn)!==-1}return!1},It=lo=>b(lo)?Ho=>Ho.indexOf(lo)!==-1:lo instanceof RegExp?Ho=>lo.test(Ho):lo,Vn=lo=>lo.styleSheet,ln=lo=>lo.selectorText,uo=(lo,Ho,mo)=>{const Co=[],mn={},wn=(Dn,rn)=>{let Cn=Dn.href,Nn;if(Cn=hn(Cn),!(!Cn||mo&&!mo(Cn,rn)||fn(lo,Cn))){pt.each(Dn.imports,zn=>{wn(zn,!0)});try{Nn=Dn.cssRules||Dn.rules}catch{}pt.each(Nn,zn=>{Vn(zn)&&zn.styleSheet?wn(zn.styleSheet,!0):ln(zn)&&pt.each(zn.selectorText.split(","),So=>{Co.push(pt.trim(So))})})}};pt.each(lo.contentCSS,Dn=>{mn[Dn]=!0}),mo||(mo=(Dn,rn)=>rn||mn[Dn]);try{pt.each(Ho.styleSheets,Dn=>{wn(Dn)})}catch{}return Co},Ln=(lo,Ho)=>{let mo={};const Co=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(Ho);if(!Co)return;const mn=Co[1],wn=Co[2].substr(1).split(".").join(" "),Dn=pt.makeMap("a,img");return Co[1]?(mo={title:Ho},lo.schema.getTextBlockElements()[mn]?mo.block=mn:lo.schema.getBlockElements()[mn]||Dn[mn.toLowerCase()]?mo.selector=mn:mo.inline=mn):Co[2]&&(mo={inline:"span",title:Ho.substr(1),classes:wn}),wt(lo)?mo.classes=wn:mo.attributes={class:wn},mo},An=(lo,Ho)=>pt.grep(lo,mo=>!mo.filter||mo.filter(Ho)),Wn=lo=>pt.map(lo,Ho=>pt.extend({},Ho,{original:Ho,selectors:{},filter:It(Ho.filter)})),er=(lo,Ho)=>Ho===null||Tt(lo),no=(lo,Ho,mo,Co)=>!(er(lo,mo)?Ho in Co:Ho in mo.selectors),Ro=(lo,Ho,mo,Co)=>{er(lo,mo)?Co[Ho]=!0:mo.selectors[Ho]=!0},On=(lo,Ho,mo,Co)=>{let mn;const wn=Rt(lo);return Co&&Co.selector_converter?mn=Co.selector_converter:wn?mn=wn:mn=()=>Ln(lo,mo),mn.call(Ho,mo,Co)},_o=lo=>{lo.on("init",()=>{const Ho=Vt(),mo={},Co=It(Mt(lo)),mn=Wn(Et(lo)),wn=(rn,Cn)=>{if(no(lo,rn,Cn,mo)){Ro(lo,rn,Cn,mo);const Nn=On(lo,lo.plugins.importcss,rn,Cn);if(Nn){const zn=Nn.name||rt.DOM.uniqueId();return lo.formatter.register(zn,Nn),{title:Nn.title,format:zn}}}return null};pt.each(uo(lo,lo.getDoc(),It(Xt(lo))),rn=>{if(!ao.test(rn)&&(!Co||Co(rn))){const Cn=An(mn,rn);if(Cn.length>0)pt.each(Cn,Nn=>{const zn=wn(rn,Nn);zn&&Ho.addItemToGroup(Nn.title,zn)});else{const Nn=wn(rn,null);Nn&&Ho.addItem(Nn)}}});const Dn=Ho.toFormats();lo.dispatch("addStyleModifications",{items:Dn,replace:!$t(lo)})})},Yt=lo=>({convertSelectorToFormat:mo=>Ln(lo,mo)});var jr=()=>{o.add("importcss",lo=>(xt(lo),_o(lo),Yt(lo)))};jr()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=Zt=>Nt=>Nt.options.get(Zt),s=Zt=>{const Nt=Zt.options.register;Nt("insertdatetime_dateformat",{processor:"string",default:Zt.translate("%Y-%m-%d")}),Nt("insertdatetime_timeformat",{processor:"string",default:Zt.translate("%H:%M:%S")}),Nt("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),Nt("insertdatetime_element",{processor:"boolean",default:!1})},a=e("insertdatetime_dateformat"),d=e("insertdatetime_timeformat"),b=e("insertdatetime_formats"),_=e("insertdatetime_element"),_e=Zt=>{const Nt=b(Zt);return Nt.length>0?Nt[0]:d(Zt)},nt="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),rt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),ct="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dt="January February March April May June July August September October November December".split(" "),pt=(Zt,Nt)=>{if(Zt=""+Zt,Zt.length<Nt)for(let Jt=0;Jt<Nt-Zt.length;Jt++)Zt="0"+Zt;return Zt},bt=(Zt,Nt,Jt=new Date)=>(Nt=Nt.replace("%D","%m/%d/%Y"),Nt=Nt.replace("%r","%I:%M:%S %p"),Nt=Nt.replace("%Y",""+Jt.getFullYear()),Nt=Nt.replace("%y",""+Jt.getYear()),Nt=Nt.replace("%m",pt(Jt.getMonth()+1,2)),Nt=Nt.replace("%d",pt(Jt.getDate(),2)),Nt=Nt.replace("%H",""+pt(Jt.getHours(),2)),Nt=Nt.replace("%M",""+pt(Jt.getMinutes(),2)),Nt=Nt.replace("%S",""+pt(Jt.getSeconds(),2)),Nt=Nt.replace("%I",""+((Jt.getHours()+11)%12+1)),Nt=Nt.replace("%p",Jt.getHours()<12?"AM":"PM"),Nt=Nt.replace("%B",""+Zt.translate(dt[Jt.getMonth()])),Nt=Nt.replace("%b",""+Zt.translate(ct[Jt.getMonth()])),Nt=Nt.replace("%A",""+Zt.translate(rt[Jt.getDay()])),Nt=Nt.replace("%a",""+Zt.translate(nt[Jt.getDay()])),Nt=Nt.replace("%%","%"),Nt),xt=(Zt,Nt,Jt,dn)=>{const Pn=Zt.dom.create("time",{datetime:Jt},dn);Zt.dom.replace(Pn,Nt),Zt.selection.select(Pn,!0),Zt.selection.collapse(!1)},wt=(Zt,Nt)=>{if(_(Zt)&&Zt.selection.isEditable()){const Jt=bt(Zt,Nt);let dn;/%[HMSIp]/.test(Nt)?dn=bt(Zt,"%Y-%m-%dT%H:%M"):dn=bt(Zt,"%Y-%m-%d");const Pn=Zt.dom.getParent(Zt.selection.getStart(),"time");Pn?xt(Zt,Pn,dn,Jt):Zt.insertContent('<time datetime="'+dn+'">'+Jt+"</time>")}else Zt.insertContent(bt(Zt,Nt))},Tt=Zt=>{Zt.addCommand("mceInsertDate",(Nt,Jt)=>{wt(Zt,Jt??a(Zt))}),Zt.addCommand("mceInsertTime",(Nt,Jt)=>{wt(Zt,Jt??d(Zt))})},Rt=Zt=>{let Nt=Zt;return{get:()=>Nt,set:Pn=>{Nt=Pn}}};var Mt=tinymce.util.Tools.resolve("tinymce.util.Tools");const Et=Zt=>Nt=>{const Jt=()=>{Nt.setEnabled(Zt.selection.isEditable())};return Zt.on("NodeChange",Jt),Jt(),()=>{Zt.off("NodeChange",Jt)}},$t=Zt=>{const Nt=b(Zt),Jt=Rt(_e(Zt)),dn=an=>Zt.execCommand("mceInsertDate",!1,an);Zt.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:an=>an===Jt.get(),fetch:an=>{an(Mt.map(Nt,Vt=>({type:"choiceitem",text:bt(Zt,Vt),value:Vt})))},onAction:an=>{dn(Jt.get())},onItemAction:(an,Vt)=>{Jt.set(Vt),dn(Vt)},onSetup:Et(Zt)});const Pn=an=>()=>{Jt.set(an),dn(an)};Zt.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>Mt.map(Nt,an=>({type:"menuitem",text:bt(Zt,an),onAction:Pn(an)})),onSetup:Et(Zt)})};var Xt=()=>{o.add("insertdatetime",Zt=>{s(Zt),Tt(Zt),$t(Zt)})};Xt()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(un,Fn,fo)=>{var Wo;return fo(un,Fn.prototype)?!0:((Wo=un.constructor)===null||Wo===void 0?void 0:Wo.name)===Fn.name},s=un=>{const Fn=typeof un;return un===null?"null":Fn==="object"&&Array.isArray(un)?"array":Fn==="object"&&e(un,String,(fo,Wo)=>Wo.isPrototypeOf(fo))?"string":Fn},a=un=>Fn=>s(Fn)===un,d=un=>Fn=>typeof Fn===un,b=un=>Fn=>un===Fn,_=a("string"),_e=a("object"),nt=a("array"),rt=b(null),ct=d("boolean"),dt=un=>un==null,pt=un=>!dt(un),bt=d("function"),xt=(un,Fn)=>{if(nt(un)){for(let fo=0,Wo=un.length;fo<Wo;++fo)if(!Fn(un[fo]))return!1;return!0}return!1},wt=()=>{},Tt=un=>()=>un,Rt=(un,Fn)=>un===Fn;class Mt{constructor(Fn,fo){this.tag=Fn,this.value=fo}static some(Fn){return new Mt(!0,Fn)}static none(){return Mt.singletonNone}fold(Fn,fo){return this.tag?fo(this.value):Fn()}isSome(){return this.tag}isNone(){return!this.tag}map(Fn){return this.tag?Mt.some(Fn(this.value)):Mt.none()}bind(Fn){return this.tag?Fn(this.value):Mt.none()}exists(Fn){return this.tag&&Fn(this.value)}forall(Fn){return!this.tag||Fn(this.value)}filter(Fn){return!this.tag||Fn(this.value)?this:Mt.none()}getOr(Fn){return this.tag?this.value:Fn}or(Fn){return this.tag?this:Fn}getOrThunk(Fn){return this.tag?this.value:Fn()}orThunk(Fn){return this.tag?this:Fn()}getOrDie(Fn){if(this.tag)return this.value;throw new Error(Fn??"Called getOrDie on None")}static from(Fn){return pt(Fn)?Mt.some(Fn):Mt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Fn){this.tag&&Fn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Mt.singletonNone=new Mt(!1);const Et=Array.prototype.indexOf,$t=Array.prototype.push,Xt=(un,Fn)=>Et.call(un,Fn),Zt=(un,Fn)=>Xt(un,Fn)>-1,Nt=(un,Fn)=>{const fo=un.length,Wo=new Array(fo);for(let pr=0;pr<fo;pr++){const Vo=un[pr];Wo[pr]=Fn(Vo,pr)}return Wo},Jt=(un,Fn)=>{for(let fo=0,Wo=un.length;fo<Wo;fo++){const pr=un[fo];Fn(pr,fo)}},dn=(un,Fn,fo)=>(Jt(un,(Wo,pr)=>{fo=Fn(fo,Wo,pr)}),fo),Pn=un=>{const Fn=[];for(let fo=0,Wo=un.length;fo<Wo;++fo){if(!nt(un[fo]))throw new Error("Arr.flatten item "+fo+" was not an array, input: "+un);$t.apply(Fn,un[fo])}return Fn},an=(un,Fn)=>Pn(Nt(un,Fn)),Vt=(un,Fn)=>{for(let fo=0;fo<un.length;fo++){const Wo=Fn(un[fo],fo);if(Wo.isSome())return Wo}return Mt.none()},ao=(un,Fn,fo=Rt)=>un.exists(Wo=>fo(Wo,Fn)),hn=un=>{const Fn=[],fo=Wo=>{Fn.push(Wo)};for(let Wo=0;Wo<un.length;Wo++)un[Wo].each(fo);return Fn},fn=(un,Fn)=>un?Mt.some(Fn):Mt.none(),It=un=>Fn=>Fn.options.get(un),Vn=un=>{const Fn=un.options.register;Fn("link_assume_external_targets",{processor:fo=>{const Wo=_(fo)||ct(fo);return Wo?fo===!0?{value:1,valid:Wo}:fo==="http"||fo==="https"?{value:fo,valid:Wo}:{value:0,valid:Wo}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),Fn("link_context_toolbar",{processor:"boolean",default:!1}),Fn("link_list",{processor:fo=>_(fo)||bt(fo)||xt(fo,_e)}),Fn("link_default_target",{processor:"string"}),Fn("link_default_protocol",{processor:"string",default:"https"}),Fn("link_target_list",{processor:fo=>ct(fo)||xt(fo,_e),default:!0}),Fn("link_rel_list",{processor:"object[]",default:[]}),Fn("link_class_list",{processor:"object[]",default:[]}),Fn("link_title",{processor:"boolean",default:!0}),Fn("allow_unsafe_link_target",{processor:"boolean",default:!1}),Fn("link_quicklink",{processor:"boolean",default:!1})},ln=It("link_assume_external_targets"),uo=It("link_context_toolbar"),Ln=It("link_list"),An=It("link_default_target"),Wn=It("link_default_protocol"),er=It("link_target_list"),no=It("link_rel_list"),Ro=It("link_class_list"),On=It("link_title"),_o=It("allow_unsafe_link_target"),Yt=It("link_quicklink"),jr=Object.keys,lo=Object.hasOwnProperty,Ho=(un,Fn)=>{const fo=jr(un);for(let Wo=0,pr=fo.length;Wo<pr;Wo++){const Vo=fo[Wo],$l=un[Vo];Fn($l,Vo)}},mo=un=>(Fn,fo)=>{un[fo]=Fn},Co=(un,Fn,fo,Wo)=>{Ho(un,(pr,Vo)=>{(Fn(pr,Vo)?fo:Wo)(pr,Vo)})},mn=(un,Fn)=>{const fo={};return Co(un,Fn,mo(fo),wt),fo},wn=(un,Fn)=>lo.call(un,Fn),Dn=(un,Fn)=>wn(un,Fn)&&un[Fn]!==void 0&&un[Fn]!==null;var rn=tinymce.util.Tools.resolve("tinymce.util.URI"),Cn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Nn=tinymce.util.Tools.resolve("tinymce.util.Tools");const zn=un=>pt(un)&&un.nodeName.toLowerCase()==="a",So=un=>zn(un)&&!!Jn(un),Hn=(un,Fn)=>{if(un.collapsed)return[];{const fo=un.cloneContents(),Wo=fo.firstChild,pr=new Cn(Wo,fo),Vo=[];let $l=Wo;do Fn($l)&&Vo.push($l);while($l=pr.next());return Vo}},Tn=un=>/^\w+:/i.test(un),Jn=un=>{var Fn,fo;return(fo=(Fn=un.getAttribute("data-mce-href"))!==null&&Fn!==void 0?Fn:un.getAttribute("href"))!==null&&fo!==void 0?fo:""},bo=(un,Fn)=>{const fo=["noopener"],Wo=un?un.split(/\s+/):[],pr=Os=>Nn.trim(Os.sort().join(" ")),Vo=Os=>(Os=$l(Os),Os.length>0?Os.concat(fo):fo),$l=Os=>Os.filter(Pu=>Nn.inArray(fo,Pu)===-1),Kr=Fn?Vo(Wo):$l(Wo);return Kr.length>0?pr(Kr):""},$n=un=>un.replace(/\uFEFF/g,""),oo=(un,Fn)=>(Fn=Fn||Ir(un.selection.getRng())[0]||un.selection.getNode(),fs(Fn)?Mt.from(un.dom.select("a[href]",Fn)[0]):Mt.from(un.dom.getParent(Fn,"a[href]"))),wo=(un,Fn)=>oo(un,Fn).isSome(),Oo=(un,Fn)=>{const fo=Fn.fold(()=>un.getContent({format:"text"}),Wo=>Wo.innerText||Wo.textContent||"");return $n(fo)},Ir=un=>Hn(un,So),sr=un=>Nn.grep(un,So),vr=un=>sr(un).length>0,as=un=>Ir(un).length>0,_r=un=>{const Fn=un.schema.getTextInlineElements(),fo=Vo=>Vo.nodeType===1&&!zn(Vo)&&!wn(Fn,Vo.nodeName.toLowerCase());if(oo(un).exists(Vo=>Vo.hasAttribute("data-mce-block")))return!1;const pr=un.selection.getRng();return pr.collapsed?!0:Hn(pr,fo).length===0},fs=un=>pt(un)&&un.nodeName==="FIGURE"&&/\bimage\b/i.test(un.className),Ss=un=>dn(["title","rel","class","target"],(fo,Wo)=>(un[Wo].each(pr=>{fo[Wo]=pr.length>0?pr:null}),fo),{href:un.href}),As=(un,Fn)=>(Fn==="http"||Fn==="https")&&!Tn(un)?Fn+"://"+un:un,_l=(un,Fn)=>{const fo={...Fn};if(no(un).length===0&&!_o(un)){const Wo=bo(fo.rel,fo.target==="_blank");fo.rel=Wo||null}return Mt.from(fo.target).isNone()&&er(un)===!1&&(fo.target=An(un)),fo.href=As(fo.href,ln(un)),fo},Zr=(un,Fn,fo,Wo)=>{fo.each(pr=>{wn(Fn,"innerText")?Fn.innerText=pr:Fn.textContent=pr}),un.dom.setAttribs(Fn,Wo),un.selection.select(Fn)},Ml=(un,Fn,fo,Wo)=>{const pr=un.dom;fs(Fn)?iu(pr,Fn,Wo):fo.fold(()=>{un.execCommand("mceInsertLink",!1,Wo)},Vo=>{un.insertContent(pr.createHTML("a",Wo,pr.encode(Vo)))})},tr=(un,Fn,fo)=>{const Wo=un.selection.getNode(),pr=oo(un,Wo),Vo=_l(un,Ss(fo));un.undoManager.transact(()=>{fo.href===Fn.href&&Fn.attach(),pr.fold(()=>{Ml(un,Wo,fo.text,Vo)},$l=>{un.focus(),Zr(un,$l,fo.text,Vo)})})},Ms=un=>{const Fn=un.dom,fo=un.selection,Wo=fo.getBookmark(),pr=fo.getRng().cloneRange(),Vo=Fn.getParent(pr.startContainer,"a[href]",un.getBody()),$l=Fn.getParent(pr.endContainer,"a[href]",un.getBody());Vo&&pr.setStartBefore(Vo),$l&&pr.setEndAfter($l),fo.setRng(pr),un.execCommand("unlink"),fo.moveToBookmark(Wo)},cu=un=>{un.undoManager.transact(()=>{const Fn=un.selection.getNode();fs(Fn)?wu(un,Fn):Ms(un),un.focus()})},ou=un=>{const{class:Fn,href:fo,rel:Wo,target:pr,text:Vo,title:$l}=un;return mn({class:Fn.getOrNull(),href:fo,rel:Wo.getOrNull(),target:pr.getOrNull(),text:Vo.getOrNull(),title:$l.getOrNull()},(Kr,Os)=>rt(Kr)===!1)},Yl=(un,Fn)=>{const fo=un.options.get,Wo={allow_html_data_urls:fo("allow_html_data_urls"),allow_script_urls:fo("allow_script_urls"),allow_svg_data_urls:fo("allow_svg_data_urls")},pr=Fn.href;return{...Fn,href:rn.isDomSafe(pr,"a",Wo)?pr:""}},xu=(un,Fn,fo)=>{const Wo=Yl(un,fo);un.hasPlugin("rtc",!0)?un.execCommand("createlink",!1,ou(Wo)):tr(un,Fn,Wo)},Vs=un=>{un.hasPlugin("rtc",!0)?un.execCommand("unlink"):cu(un)},wu=(un,Fn)=>{var fo;const Wo=un.dom.select("img",Fn)[0];if(Wo){const pr=un.dom.getParents(Wo,"a[href]",Fn)[0];pr&&((fo=pr.parentNode)===null||fo===void 0||fo.insertBefore(Wo,pr),un.dom.remove(pr))}},iu=(un,Fn,fo)=>{var Wo;const pr=un.select("img",Fn)[0];if(pr){const Vo=un.create("a",fo);(Wo=pr.parentNode)===null||Wo===void 0||Wo.insertBefore(Vo,pr),Vo.appendChild(pr)}},ba=un=>_(un.value)?un.value:"",Jr=un=>_(un.text)?un.text:_(un.title)?un.title:"",_a=(un,Fn)=>{const fo=[];return Nn.each(un,Wo=>{const pr=Jr(Wo);if(Wo.menu!==void 0){const Vo=_a(Wo.menu,Fn);fo.push({text:pr,items:Vo})}else{const Vo=Fn(Wo);fo.push({text:pr,value:Vo})}}),fo},go=(un=ba)=>Fn=>Mt.from(Fn).map(fo=>_a(fo,un)),Fr={sanitize:un=>go(ba)(un),sanitizeWith:go,createUi:(un,Fn)=>fo=>({name:un,type:"listbox",label:Fn,items:fo}),getValue:ba},Us=un=>Dn(un,"items"),xa=(un,Fn)=>Vt(Fn,fo=>Us(fo)?xa(un,fo.items):fn(fo.value===un,fo)),ju=(un,Fn,fo,Wo)=>{const pr=Wo[Fn],Vo=un.length>0;return pr!==void 0?xa(pr,fo).map($l=>({url:{value:$l.value,meta:{text:Vo?un:$l.text,attach:wt}},text:Vo?un:$l.text})):Mt.none()},Uu=(un,Fn)=>Fn==="link"?un.link:Fn==="anchor"?un.anchor:Mt.none(),Un={init:(un,Fn)=>{const fo={text:un.text,title:un.title},Wo=Os=>{var Pu;return fn(fo.title.length<=0,Mt.from((Pu=Os.meta)===null||Pu===void 0?void 0:Pu.title).getOr(""))},pr=Os=>{var Pu;return fn(fo.text.length<=0,Mt.from((Pu=Os.meta)===null||Pu===void 0?void 0:Pu.text).getOr(Os.value))},Vo=Os=>{const Pu=pr(Os.url),Kt=Wo(Os.url);return Pu.isSome()||Kt.isSome()?Mt.some({...Pu.map(vn=>({text:vn})).getOr({}),...Kt.map(vn=>({title:vn})).getOr({})}):Mt.none()},$l=(Os,Pu)=>{const Kt=Uu(Fn,Pu).getOr([]);return ju(fo.text,Pu,Kt,Os)};return{onChange:(Os,Pu)=>{const Kt=Pu.name;return Kt==="url"?Vo(Os()):Zt(["anchor","link"],Kt)?$l(Os(),Kt):((Kt==="text"||Kt==="title")&&(fo[Kt]=Os()[Kt]),Mt.none())}}},getDelta:ju};var Bn=tinymce.util.Tools.resolve("tinymce.util.Delay");const Mo=(un,Fn,fo)=>{const Wo=un.selection.getRng();Bn.setEditorTimeout(un,()=>{un.windowManager.confirm(Fn,pr=>{un.selection.setRng(Wo),fo(pr)})})},jo=un=>{const Fn=un.href;return Fn.indexOf("@")>0&&Fn.indexOf("/")===-1&&Fn.indexOf("mailto:")===-1?Mt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Wo=>({...Wo,href:"mailto:"+Fn})}):Mt.none()},ss=(un,Fn)=>fo=>{const Wo=fo.href;return un===1&&!Tn(Wo)||un===0&&/^\s*www(\.|\d\.)/i.test(Wo)?Mt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${Fn}:// prefix?`,preprocess:Vo=>({...Vo,href:Fn+"://"+Wo})}):Mt.none()},Ns={preprocess:(un,Fn)=>Vt([jo,ss(ln(un),Wn(un))],fo=>fo(Fn)).fold(()=>Promise.resolve(Fn),fo=>new Promise(Wo=>{Mo(un,fo.message,pr=>{Wo(pr?fo.preprocess(Fn):Fn)})}))},ro={getAnchors:un=>{const Fn=un.dom.select("a:not([href])"),fo=an(Fn,Wo=>{const pr=Wo.name||Wo.id;return pr?[{text:pr,value:"#"+pr}]:[]});return fo.length>0?Mt.some([{text:"None",value:""}].concat(fo)):Mt.none()}},Kn={getClasses:un=>{const Fn=Ro(un);return Fn.length>0?Fr.sanitize(Fn):Mt.none()}},eo=un=>{try{return Mt.some(JSON.parse(un))}catch{return Mt.none()}},lr={getLinks:un=>{const Fn=Wo=>un.convertURL(Wo.value||Wo.url||"","href"),fo=Ln(un);return new Promise(Wo=>{_(fo)?fetch(fo).then(pr=>pr.ok?pr.text().then(eo):Promise.reject()).then(Wo,()=>Wo(Mt.none())):bt(fo)?fo(pr=>Wo(Mt.some(pr))):Wo(Mt.from(fo))}).then(Wo=>Wo.bind(Fr.sanitizeWith(Fn)).map(pr=>pr.length>0?[{text:"None",value:""}].concat(pr):pr))}},Qr={getRels:(un,Fn)=>{const fo=no(un);if(fo.length>0){const Wo=ao(Fn,"_blank"),pr=_o(un)===!1,Vo=Kr=>bo(Fr.getValue(Kr),Wo);return(pr?Fr.sanitizeWith(Vo):Fr.sanitize)(fo)}return Mt.none()}},es=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],hs={getTargets:un=>{const Fn=er(un);return nt(Fn)?Fr.sanitize(Fn).orThunk(()=>Mt.some(es)):Fn===!1?Mt.none():Mt.some(es)}},ks=(un,Fn,fo)=>{const Wo=un.getAttrib(Fn,fo);return Wo!==null&&Wo.length>0?Mt.some(Wo):Mt.none()},Nl=(un,Fn)=>{const fo=un.dom,pr=_r(un)?Mt.some(Oo(un.selection,Fn)):Mt.none(),Vo=Fn.bind(Kt=>Mt.from(fo.getAttrib(Kt,"href"))),$l=Fn.bind(Kt=>Mt.from(fo.getAttrib(Kt,"target"))),Kr=Fn.bind(Kt=>ks(fo,Kt,"rel")),Os=Fn.bind(Kt=>ks(fo,Kt,"class")),Pu=Fn.bind(Kt=>ks(fo,Kt,"title"));return{url:Vo,text:pr,title:Pu,target:$l,rel:Kr,linkClass:Os}},uu={collect:(un,Fn)=>lr.getLinks(un).then(fo=>{const Wo=Nl(un,Fn);return{anchor:Wo,catalogs:{targets:hs.getTargets(un),rels:Qr.getRels(un,Wo.target),classes:Kn.getClasses(un),anchor:ro.getAnchors(un),link:fo},optNode:Fn,flags:{titleEnabled:On(un)}}})},Kp=(un,Fn)=>fo=>{const Wo=fo.getData();if(!Wo.url.value){Vs(un),fo.close();return}const pr=Kr=>Mt.from(Wo[Kr]).filter(Os=>!ao(Fn.anchor[Kr],Os)),Vo={href:Wo.url.value,text:pr("text"),target:pr("target"),rel:pr("rel"),class:pr("linkClass"),title:pr("title")},$l={href:Wo.url.value,attach:Wo.url.meta!==void 0&&Wo.url.meta.attach?Wo.url.meta.attach:wt};Ns.preprocess(un,Vo).then(Kr=>{xu(un,$l,Kr)}),fo.close()},sm=un=>{const Fn=oo(un);return uu.collect(un,Fn)},_s=(un,Fn)=>{const fo=un.anchor,Wo=fo.url.getOr("");return{url:{value:Wo,meta:{original:{value:Wo}}},text:fo.text.getOr(""),title:fo.title.getOr(""),anchor:Wo,link:Wo,rel:fo.rel.getOr(""),target:fo.target.or(Fn).getOr(""),linkClass:fo.linkClass.getOr("")}},Al=(un,Fn,fo)=>{const Wo=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],pr=un.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Vo=un.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],$l=Mt.from(An(fo)),Kr=_s(un,$l),Os=un.catalogs,Pu=Un.init(Kr,Os);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Pn([Wo,pr,Vo,hn([Os.anchor.map(Fr.createUi("anchor","Anchors")),Os.rels.map(Fr.createUi("rel","Rel")),Os.targets.map(Fr.createUi("target","Open link in...")),Os.link.map(Fr.createUi("link","Link list")),Os.classes.map(Fr.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Kr,onChange:(vn,{name:qn})=>{Pu.onChange(vn.getData,{name:qn}).each(Eo=>{vn.setData(Eo)})},onSubmit:Fn}},Pl=un=>{sm(un).then(fo=>{const Wo=Kp(un,fo);return Al(fo,Wo,un)}).then(fo=>{un.windowManager.open(fo)})},wp=un=>{un.addCommand("mceLink",(Fn,fo)=>{(fo==null?void 0:fo.dialog)===!0||!Yt(un)?Pl(un):un.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Cp=un=>{un.addShortcut("Meta+K","",()=>{un.execCommand("mceLink")})},dp=un=>{let Fn=un;return{get:()=>Fn,set:pr=>{Fn=pr}}},ku=un=>{const Fn=dp(Mt.none()),fo=()=>Fn.get().each(un);return{clear:()=>{fo(),Fn.set(Mt.none())},isSet:()=>Fn.get().isSome(),get:()=>Fn.get(),set:Kr=>{fo(),Fn.set(Mt.some(Kr))}}},g1=()=>{const un=ku(wt);return{...un,on:fo=>un.get().each(fo)}},Vm=(un,Fn)=>un.substring(Fn),Vl=(un,Fn,fo)=>Fn===""||un.length>=Fn.length&&un.substr(fo,fo+Fn.length)===Fn,Dp=(un,Fn)=>Np(un,Fn)?Vm(un,Fn.length):un,Np=(un,Fn)=>Vl(un,Fn,0);var fp=tinymce.util.Tools.resolve("tinymce.util.VK");const ry=(un,Fn)=>{document.body.appendChild(un),un.dispatchEvent(Fn),document.body.removeChild(un)},im=un=>{const Fn=document.createElement("a");Fn.target="_blank",Fn.href=un,Fn.rel="noreferrer noopener";const fo=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(fo),ry(Fn,fo)},Yp=un=>un.altKey===!0&&un.shiftKey===!1&&un.ctrlKey===!1&&un.metaKey===!1,Wm=(un,Fn)=>{if(Fn){const fo=Jn(Fn);if(/^#/.test(fo)){const Wo=un.dom.select(`${fo},[name="${Dp(fo,"#")}"]`);Wo.length&&un.selection.scrollIntoView(Wo[0],!0)}else im(Fn.href)}},Tm=un=>{const Fn=un.selection.getRng(),fo=Fn.startContainer;return So(fo)&&Fn.startContainer===Fn.endContainer&&un.dom.select("img",fo).length===1},py=(un,Fn)=>{const fo=sr(un.dom.getParents(Fn));return fn(fo.length===1,fo[0])},gy=un=>{const Fn=Ir(un.selection.getRng());return fn(Fn.length>0,Fn[0]).or(py(un,un.selection.getNode()))},U0=un=>un.selection.isCollapsed()||Tm(un)?py(un,un.selection.getStart()):gy(un),Im=un=>{const Fn=g1(),fo=()=>Fn.get().or(U0(un)),Wo=()=>fo().each(pr=>Wm(un,pr));return un.on("contextmenu",pr=>{py(un,pr.target).each(Fn.set)}),un.on("SelectionChange",()=>{Fn.isSet()||U0(un).each(Fn.set)}),un.on("click",pr=>{Fn.clear();const Vo=sr(un.dom.getParents(pr.target));Vo.length===1&&fp.metaKeyPressed(pr)&&(pr.preventDefault(),Wm(un,Vo[0]))}),un.on("keydown",pr=>{Fn.clear(),!pr.isDefaultPrevented()&&pr.keyCode===13&&Yp(pr)&&fo().each(Vo=>{pr.preventDefault(),Wm(un,Vo)})}),{gotoSelectedLink:Wo}},Ap=un=>()=>{un.execCommand("mceLink",!1,{dialog:!0})},sy=(un,Fn)=>(un.on("NodeChange",Fn),()=>un.off("NodeChange",Fn)),iy=un=>Fn=>{const fo=()=>{Fn.setActive(!un.mode.isReadOnly()&&wo(un,un.selection.getNode())),Fn.setEnabled(un.selection.isEditable())};return fo(),sy(un,fo)},Dy=un=>Fn=>{const fo=()=>{Fn.setEnabled(un.selection.isEditable())};return fo(),sy(un,fo)},E0=un=>Fn=>{const fo=Vo=>vr(Vo)||as(un.selection.getRng()),Wo=un.dom.getParents(un.selection.getStart()),pr=Vo=>{Fn.setEnabled(fo(Vo)&&un.selection.isEditable())};return pr(Wo),sy(un,Vo=>pr(Vo.parents))},hp=(un,Fn)=>{un.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:Ap(un),onSetup:iy(un)}),un.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Fn.gotoSelectedLink,onSetup:E0(un)}),un.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Vs(un),onSetup:E0(un)})},Rm=(un,Fn)=>{un.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Fn.gotoSelectedLink,onSetup:E0(un)}),un.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Ap(un),onSetup:Dy(un)}),un.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Vs(un),onSetup:E0(un)})},Lp=un=>{const Fn="link unlink openlink",fo="link";un.ui.registry.addContextMenu("link",{update:Wo=>un.dom.isEditable(Wo)?vr(un.dom.getParents(Wo,"a"))?Fn:fo:""})},Xp=(un,Fn)=>{const fo=Vo=>{Vo.selection.collapse(!1)},Wo=Vo=>{const $l=un.selection.getNode();return Vo.setEnabled(wo(un,$l)&&un.selection.isEditable()),wt},pr=Vo=>{const $l=oo(un),Kr=_r(un);if($l.isNone()&&Kr){const Os=Oo(un.selection,$l);return fn(Os.length===0,Vo)}else return Mt.none()};un.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:iy(un)},label:"Link",predicate:Vo=>uo(un)&&wo(un,Vo),initValue:()=>oo(un).fold(Tt(""),Jn),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Vo=>{const $l=un.selection.getNode();return Vo.setActive(wo(un,$l)),iy(un)(Vo)},onAction:Vo=>{const $l=Vo.getValue(),Kr=pr($l);xu(un,{href:$l,attach:wt},{href:$l,text:Kr,title:Mt.none(),rel:Mt.none(),target:Mt.from(An(un)),class:Mt.none()}),fo(un),Vo.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Wo,onAction:Vo=>{Vs(un),Vo.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Wo,onAction:Vo=>{Fn.gotoSelectedLink(),Vo.hide()}}]})},Ny=un=>{const Fn=Im(un);hp(un,Fn),Rm(un,Fn),Lp(un),Xp(un,Fn)};var Ly=()=>{o.add("link",un=>{Vn(un),wp(un),Ny(un),Cp(un)})};Ly()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(Dt,Ut,nn)=>{var Gn;return nn(Dt,Ut.prototype)?!0:((Gn=Dt.constructor)===null||Gn===void 0?void 0:Gn.name)===Ut.name},s=Dt=>{const Ut=typeof Dt;return Dt===null?"null":Ut==="object"&&Array.isArray(Dt)?"array":Ut==="object"&&e(Dt,String,(nn,Gn)=>Gn.isPrototypeOf(nn))?"string":Ut},a=Dt=>Ut=>s(Ut)===Dt,d=Dt=>Ut=>typeof Ut===Dt,b=a("string"),_=a("object"),_e=a("array"),nt=d("boolean"),rt=Dt=>Dt==null,ct=Dt=>!rt(Dt),dt=d("function"),pt=d("number"),bt=()=>{},xt=(Dt,Ut)=>nn=>Dt(Ut(nn)),wt=Dt=>()=>Dt,Tt=(Dt,Ut)=>Dt===Ut;function Rt(Dt,...Ut){return(...nn)=>{const Gn=Ut.concat(nn);return Dt.apply(null,Gn)}}const Mt=Dt=>Ut=>!Dt(Ut),Et=wt(!1);class $t{constructor(Ut,nn){this.tag=Ut,this.value=nn}static some(Ut){return new $t(!0,Ut)}static none(){return $t.singletonNone}fold(Ut,nn){return this.tag?nn(this.value):Ut()}isSome(){return this.tag}isNone(){return!this.tag}map(Ut){return this.tag?$t.some(Ut(this.value)):$t.none()}bind(Ut){return this.tag?Ut(this.value):$t.none()}exists(Ut){return this.tag&&Ut(this.value)}forall(Ut){return!this.tag||Ut(this.value)}filter(Ut){return!this.tag||Ut(this.value)?this:$t.none()}getOr(Ut){return this.tag?this.value:Ut}or(Ut){return this.tag?this:Ut}getOrThunk(Ut){return this.tag?this.value:Ut()}orThunk(Ut){return this.tag?this:Ut()}getOrDie(Ut){if(this.tag)return this.value;throw new Error(Ut??"Called getOrDie on None")}static from(Ut){return ct(Ut)?$t.some(Ut):$t.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ut){this.tag&&Ut(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}$t.singletonNone=new $t(!1);const Xt=Array.prototype.slice,Zt=Array.prototype.indexOf,Nt=Array.prototype.push,Jt=(Dt,Ut)=>Zt.call(Dt,Ut),dn=(Dt,Ut)=>Jt(Dt,Ut)>-1,Pn=(Dt,Ut)=>{for(let nn=0,Gn=Dt.length;nn<Gn;nn++){const io=Dt[nn];if(Ut(io,nn))return!0}return!1},an=(Dt,Ut)=>{const nn=Dt.length,Gn=new Array(nn);for(let io=0;io<nn;io++){const rr=Dt[io];Gn[io]=Ut(rr,io)}return Gn},Vt=(Dt,Ut)=>{for(let nn=0,Gn=Dt.length;nn<Gn;nn++){const io=Dt[nn];Ut(io,nn)}},ao=(Dt,Ut)=>{const nn=[];for(let Gn=0,io=Dt.length;Gn<io;Gn++){const rr=Dt[Gn];Ut(rr,Gn)&&nn.push(rr)}return nn},hn=(Dt,Ut)=>{if(Dt.length===0)return[];{let nn=Ut(Dt[0]);const Gn=[];let io=[];for(let rr=0,xs=Dt.length;rr<xs;rr++){const qs=Dt[rr],$s=Ut(qs);$s!==nn&&(Gn.push(io),io=[]),nn=$s,io.push(qs)}return io.length!==0&&Gn.push(io),Gn}},fn=(Dt,Ut,nn)=>(Vt(Dt,(Gn,io)=>{nn=Ut(nn,Gn,io)}),nn),It=(Dt,Ut,nn)=>{for(let Gn=0,io=Dt.length;Gn<io;Gn++){const rr=Dt[Gn];if(Ut(rr,Gn))return $t.some(rr);if(nn(rr,Gn))break}return $t.none()},Vn=(Dt,Ut)=>It(Dt,Ut,Et),ln=Dt=>{const Ut=[];for(let nn=0,Gn=Dt.length;nn<Gn;++nn){if(!_e(Dt[nn]))throw new Error("Arr.flatten item "+nn+" was not an array, input: "+Dt);Nt.apply(Ut,Dt[nn])}return Ut},uo=(Dt,Ut)=>ln(an(Dt,Ut)),Ln=Dt=>{const Ut=Xt.call(Dt,0);return Ut.reverse(),Ut},An=(Dt,Ut)=>Ut>=0&&Ut<Dt.length?$t.some(Dt[Ut]):$t.none(),Wn=Dt=>An(Dt,0),er=Dt=>An(Dt,Dt.length-1),no=(Dt,Ut)=>{const nn=[],Gn=dt(Ut)?io=>Pn(nn,rr=>Ut(rr,io)):io=>dn(nn,io);for(let io=0,rr=Dt.length;io<rr;io++){const xs=Dt[io];Gn(xs)||nn.push(xs)}return nn},Ro=(Dt,Ut,nn=Tt)=>Dt.exists(Gn=>nn(Gn,Ut)),On=(Dt,Ut,nn=Tt)=>_o(Dt,Ut,nn).getOr(Dt.isNone()&&Ut.isNone()),_o=(Dt,Ut,nn)=>Dt.isSome()&&Ut.isSome()?$t.some(nn(Dt.getOrDie(),Ut.getOrDie())):$t.none(),Yt=8,jr=11,lo=1,Ho=3,mo=(Dt,Ut)=>{const Gn=(Ut||document).createElement("div");if(Gn.innerHTML=Dt,!Gn.hasChildNodes()||Gn.childNodes.length>1){const io="HTML does not have a single root node";throw console.error(io,Dt),new Error(io)}return wn(Gn.childNodes[0])},Co=(Dt,Ut)=>{const Gn=(Ut||document).createElement(Dt);return wn(Gn)},mn=(Dt,Ut)=>{const Gn=(Ut||document).createTextNode(Dt);return wn(Gn)},wn=Dt=>{if(Dt==null)throw new Error("Node cannot be null or undefined");return{dom:Dt}},rn={fromHtml:mo,fromTag:Co,fromText:mn,fromDom:wn,fromPoint:(Dt,Ut,nn)=>$t.from(Dt.dom.elementFromPoint(Ut,nn)).map(wn)},Cn=(Dt,Ut)=>{const nn=Dt.dom;if(nn.nodeType!==lo)return!1;{const Gn=nn;if(Gn.matches!==void 0)return Gn.matches(Ut);if(Gn.msMatchesSelector!==void 0)return Gn.msMatchesSelector(Ut);if(Gn.webkitMatchesSelector!==void 0)return Gn.webkitMatchesSelector(Ut);if(Gn.mozMatchesSelector!==void 0)return Gn.mozMatchesSelector(Ut);throw new Error("Browser lacks native selectors")}},Nn=(Dt,Ut)=>Dt.dom===Ut.dom,zn=(Dt,Ut)=>{const nn=Dt.dom,Gn=Ut.dom;return nn===Gn?!1:nn.contains(Gn)},So=Cn,Hn=typeof window<"u"?window:Function("return this;")(),Tn=(Dt,Ut)=>{let nn=Ut??Hn;for(let Gn=0;Gn<Dt.length&&nn!==void 0&&nn!==null;++Gn)nn=nn[Dt[Gn]];return nn},Jn=(Dt,Ut)=>{const nn=Dt.split(".");return Tn(nn,Ut)},bo=(Dt,Ut)=>Jn(Dt,Ut),$n=(Dt,Ut)=>{const nn=bo(Dt,Ut);if(nn==null)throw new Error(Dt+" not available on this browser");return nn},oo=Object.getPrototypeOf,wo=Dt=>$n("HTMLElement",Dt),Oo=Dt=>{const Ut=Jn("ownerDocument.defaultView",Dt);return _(Dt)&&(wo(Ut).prototype.isPrototypeOf(Dt)||/^HTML\w*Element$/.test(oo(Dt).constructor.name))},Ir=Dt=>Dt.dom.nodeName.toLowerCase(),sr=Dt=>Dt.dom.nodeType,vr=Dt=>Ut=>sr(Ut)===Dt,as=Dt=>sr(Dt)===Yt||Ir(Dt)==="#comment",_r=Dt=>fs(Dt)&&Oo(Dt.dom),fs=vr(lo),Ss=vr(Ho),As=vr(jr),_l=Dt=>Ut=>fs(Ut)&&Ir(Ut)===Dt,Zr=Dt=>$t.from(Dt.dom.parentNode).map(rn.fromDom),Ml=Dt=>$t.from(Dt.dom.parentElement).map(rn.fromDom),tr=Dt=>$t.from(Dt.dom.nextSibling).map(rn.fromDom),Ms=Dt=>an(Dt.dom.childNodes,rn.fromDom),cu=(Dt,Ut)=>{const nn=Dt.dom.childNodes;return $t.from(nn[Ut]).map(rn.fromDom)},ou=Dt=>cu(Dt,0),Yl=Dt=>cu(Dt,Dt.dom.childNodes.length-1),xu=Dt=>As(Dt)&&ct(Dt.dom.host),Vs=Dt=>rn.fromDom(Dt.dom.getRootNode()),wu=Dt=>{const Ut=Vs(Dt);return xu(Ut)?$t.some(Ut):$t.none()},iu=Dt=>rn.fromDom(Dt.dom.host),ba=Dt=>{const Ut=Ss(Dt)?Dt.dom.parentNode:Dt.dom;if(Ut==null||Ut.ownerDocument===null)return!1;const nn=Ut.ownerDocument;return wu(rn.fromDom(Ut)).fold(()=>nn.body.contains(Ut),xt(ba,iu))};var Jr=(Dt,Ut,nn,Gn,io)=>Dt(nn,Gn)?$t.some(nn):dt(io)&&io(nn)?$t.none():Ut(nn,Gn,io);const _a=(Dt,Ut,nn)=>{let Gn=Dt.dom;const io=dt(nn)?nn:Et;for(;Gn.parentNode;){Gn=Gn.parentNode;const rr=rn.fromDom(Gn);if(Ut(rr))return $t.some(rr);if(io(rr))break}return $t.none()},go=(Dt,Ut,nn)=>Jr((io,rr)=>rr(io),_a,Dt,Ut,nn),Po=(Dt,Ut,nn)=>_a(Dt,Gn=>Cn(Gn,Ut),nn),Sr=(Dt,Ut,nn)=>Jr((io,rr)=>Cn(io,rr),Po,Dt,Ut,nn),Fr=Dt=>Sr(Dt,"[contenteditable]"),Us=(Dt,Ut=!1)=>ba(Dt)?Dt.dom.isContentEditable:Fr(Dt).fold(wt(Ut),nn=>xa(nn)==="true"),xa=Dt=>Dt.dom.contentEditable,ju=(Dt,Ut)=>{Zr(Dt).each(Gn=>{Gn.dom.insertBefore(Ut.dom,Dt.dom)})},Uu=(Dt,Ut)=>{tr(Dt).fold(()=>{Zr(Dt).each(io=>{Un(io,Ut)})},Gn=>{ju(Gn,Ut)})},Au=(Dt,Ut)=>{ou(Dt).fold(()=>{Un(Dt,Ut)},Gn=>{Dt.dom.insertBefore(Ut.dom,Gn.dom)})},Un=(Dt,Ut)=>{Dt.dom.appendChild(Ut.dom)},Bn=(Dt,Ut)=>{Vt(Ut,nn=>{ju(Dt,nn)})},Mo=(Dt,Ut)=>{Vt(Ut,nn=>{Un(Dt,nn)})},jo=Dt=>{Dt.dom.textContent="",Vt(Ms(Dt),Ut=>{ss(Ut)})},ss=Dt=>{const Ut=Dt.dom;Ut.parentNode!==null&&Ut.parentNode.removeChild(Ut)};var Cs=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Ns=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Tu=tinymce.util.Tools.resolve("tinymce.util.VK");const ro=Dt=>an(Dt,rn.fromDom),Ls=Object.keys,Kn=(Dt,Ut)=>{const nn=Ls(Dt);for(let Gn=0,io=nn.length;Gn<io;Gn++){const rr=nn[Gn],xs=Dt[rr];Ut(xs,rr)}},eo=Dt=>(Ut,nn)=>{Dt[nn]=Ut},nr=(Dt,Ut,nn,Gn)=>{Kn(Dt,(io,rr)=>{(Ut(io,rr)?nn:Gn)(io,rr)})},lr=(Dt,Ut)=>{const nn={};return nr(Dt,Ut,eo(nn),bt),nn},Rr=(Dt,Ut,nn)=>{if(b(nn)||nt(nn)||pt(nn))Dt.setAttribute(Ut,nn+"");else throw console.error("Invalid call to Attribute.set. Key ",Ut,":: Value ",nn,":: Element ",Dt),new Error("Attribute value was not simple")},Qr=(Dt,Ut)=>{const nn=Dt.dom;Kn(Ut,(Gn,io)=>{Rr(nn,io,Gn)})},es=Dt=>fn(Dt.dom.attributes,(Ut,nn)=>(Ut[nn.name]=nn.value,Ut),{}),Hr=(Dt,Ut)=>rn.fromDom(Dt.dom.cloneNode(Ut)),hs=Dt=>Hr(Dt,!0),ks=(Dt,Ut)=>{const nn=rn.fromTag(Ut),Gn=es(Dt);return Qr(nn,Gn),nn},Nl=(Dt,Ut)=>{const nn=ks(Dt,Ut);Uu(Dt,nn);const Gn=Ms(Dt);return Mo(nn,Gn),ss(Dt),nn};var Xl=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),uu=tinymce.util.Tools.resolve("tinymce.util.Tools");const Kp=Dt=>Ut=>ct(Ut)&&Ut.nodeName.toLowerCase()===Dt,sm=Dt=>Ut=>ct(Ut)&&Dt.test(Ut.nodeName),_s=Dt=>ct(Dt)&&Dt.nodeType===3,Al=Dt=>ct(Dt)&&Dt.nodeType===1,Pl=sm(/^(OL|UL|DL)$/),wp=sm(/^(OL|UL)$/),Cp=Kp("ol"),dp=sm(/^(LI|DT|DD)$/),ku=sm(/^(DT|DD)$/),g1=sm(/^(TH|TD)$/),Vm=Kp("br"),Vl=Dt=>{var Ut;return((Ut=Dt.parentNode)===null||Ut===void 0?void 0:Ut.firstChild)===Dt},Dp=(Dt,Ut)=>ct(Ut)&&Ut.nodeName in Dt.schema.getTextBlockElements(),Np=(Dt,Ut)=>ct(Dt)&&Dt.nodeName in Ut,fp=(Dt,Ut)=>ct(Ut)&&Ut.nodeName in Dt.schema.getVoidElements(),ry=(Dt,Ut)=>Vm(Ut)?Dt.isBlock(Ut.nextSibling)&&!Vm(Ut.previousSibling):!1,im=(Dt,Ut,nn)=>{const Gn=Dt.isEmpty(Ut);return nn&&Dt.select("span[data-mce-type=bookmark]",Ut).length>0?!1:Gn},Yp=(Dt,Ut)=>Dt.isChildOf(Ut,Dt.getRoot()),Wm=Dt=>Ut=>Ut.options.get(Dt),Tm=Dt=>{const Ut=Dt.options.register;Ut("lists_indent_on_tab",{processor:"boolean",default:!0})},py=Wm("lists_indent_on_tab"),gy=Wm("forced_root_block"),U0=Wm("forced_root_block_attrs"),Im=(Dt,Ut,nn={})=>{const Gn=Dt.dom,io=Dt.schema.getBlockElements(),rr=Gn.createFragment(),xs=gy(Dt),qs=U0(Dt);let $s,cs,_f=!1;for(cs=Gn.create(xs,{...qs,...nn.style?{style:nn.style}:{}}),Np(Ut.firstChild,io)||rr.appendChild(cs);$s=Ut.firstChild;){const Ip=$s.nodeName;!_f&&(Ip!=="SPAN"||$s.getAttribute("data-mce-type")!=="bookmark")&&(_f=!0),Np($s,io)?(rr.appendChild($s),cs=null):(cs||(cs=Gn.create(xs,qs),rr.appendChild(cs)),cs.appendChild($s))}return!_f&&cs&&cs.appendChild(Gn.create("br",{"data-mce-bogus":"1"})),rr},Ap=Xl.DOM,sy=(Dt,Ut,nn)=>{const Gn=cs=>{const _f=cs.parentNode;_f&&uu.each(io,Ip=>{_f.insertBefore(Ip,nn.parentNode)}),Ap.remove(cs)},io=Ap.select('span[data-mce-type="bookmark"]',Ut),rr=Im(Dt,nn),xs=Ap.createRng();xs.setStartAfter(nn),xs.setEndAfter(Ut);const qs=xs.extractContents();for(let cs=qs.firstChild;cs;cs=cs.firstChild)if(cs.nodeName==="LI"&&Dt.dom.isEmpty(cs)){Ap.remove(cs);break}Dt.dom.isEmpty(qs)||Ap.insertAfter(qs,Ut),Ap.insertAfter(rr,Ut);const $s=nn.parentElement;$s&&im(Dt.dom,$s)&&Gn($s),Ap.remove(nn),im(Dt.dom,Ut)&&Ap.remove(Ut)},iy=_l("dd"),Dy=_l("dt"),E0=(Dt,Ut)=>{iy(Ut)?Nl(Ut,"dt"):Dy(Ut)&&Ml(Ut).each(nn=>sy(Dt,nn.dom,Ut.dom))},hp=Dt=>{Dy(Dt)&&Nl(Dt,"dd")},Rm=(Dt,Ut,nn)=>{Ut==="Indent"?Vt(nn,hp):Vt(nn,Gn=>E0(Dt,Gn))},Lp=(Dt,Ut)=>{if(_s(Dt))return{container:Dt,offset:Ut};const nn=Cs.getNode(Dt,Ut);return _s(nn)?{container:nn,offset:Ut>=Dt.childNodes.length?nn.data.length:0}:nn.previousSibling&&_s(nn.previousSibling)?{container:nn.previousSibling,offset:nn.previousSibling.data.length}:nn.nextSibling&&_s(nn.nextSibling)?{container:nn.nextSibling,offset:0}:{container:Dt,offset:Ut}},Xp=Dt=>{const Ut=Dt.cloneRange(),nn=Lp(Dt.startContainer,Dt.startOffset);Ut.setStart(nn.container,nn.offset);const Gn=Lp(Dt.endContainer,Dt.endOffset);return Ut.setEnd(Gn.container,Gn.offset),Ut},Ny=["OL","UL","DL"],Ly=Ny.join(","),un=(Dt,Ut)=>{const nn=Ut||Dt.selection.getStart(!0);return Dt.dom.getParent(nn,Ly,Pu(Dt,nn))},Fn=(Dt,Ut)=>ct(Dt)&&Ut.length===1&&Ut[0]===Dt,fo=Dt=>ao(Dt.querySelectorAll(Ly),Pl),Wo=Dt=>{const Ut=un(Dt),nn=Dt.selection.getSelectedBlocks();return Fn(Ut,nn)?fo(Ut):ao(nn,Gn=>Pl(Gn)&&Ut!==Gn)},pr=(Dt,Ut)=>{const nn=uu.map(Ut,Gn=>{const io=Dt.dom.getParent(Gn,"li,dd,dt",Pu(Dt,Gn));return io||Gn});return no(nn)},Vo=Dt=>{const Ut=Dt.selection.getSelectedBlocks();return ao(pr(Dt,Ut),dp)},$l=Dt=>ao(Vo(Dt),ku),Kr=(Dt,Ut)=>{const nn=Dt.dom.getParents(Ut,"TD,TH");return nn.length>0?nn[0]:Dt.getBody()},Os=(Dt,Ut)=>!Pl(Ut)&&!dp(Ut)&&Pn(Ny,nn=>Dt.isValidChild(Ut.nodeName,nn)),Pu=(Dt,Ut)=>{const nn=Dt.dom.getParents(Ut,Dt.dom.isBlock),Gn=rr=>rr.nodeName.toLowerCase()!==gy(Dt);return Vn(nn,rr=>Gn(rr)&&Os(Dt.schema,rr)).getOr(Dt.getBody())},Kt=Dt=>Zr(Dt).exists(Ut=>dp(Ut.dom)&&ou(Ut).exists(nn=>!Pl(nn.dom))&&Yl(Ut).exists(nn=>!Pl(nn.dom))),vn=(Dt,Ut)=>{const nn=Dt.dom.getParents(Ut,"ol,ul",Pu(Dt,Ut));return er(nn)},qn=Dt=>{const Ut=vn(Dt,Dt.selection.getStart()),nn=ao(Dt.selection.getSelectedBlocks(),wp);return Ut.toArray().concat(nn)},Eo=Dt=>{const Ut=Dt.selection.getStart();return Dt.dom.getParents(Ut,"ol,ul",Pu(Dt,Ut))},Xo=Dt=>{const Ut=qn(Dt),nn=Eo(Dt);return Vn(nn,Gn=>Kt(rn.fromDom(Gn))).fold(()=>Zs(Dt,Ut),Gn=>[Gn])},Zs=(Dt,Ut)=>{const nn=an(Ut,Gn=>vn(Dt,Gn).getOr(Gn));return no(nn)},Zl=Dt=>/\btox\-/.test(Dt.className),ru=(Dt,Ut)=>It(Dt,Pl,g1).exists(nn=>nn.nodeName===Ut&&!Zl(nn)),cr=(Dt,Ut)=>Ut!==null&&!Dt.dom.isEditable(Ut),du=Dt=>{const Ut=un(Dt);return cr(Dt,Ut)||!Dt.selection.isEditable()},Fp=(Dt,Ut)=>{const nn=Dt.dom.getParent(Ut,"ol,ul,dl");return cr(Dt,nn)||!Dt.selection.isEditable()},H0=(Dt,Ut)=>{const nn=Dt.selection.getNode();return Ut({parents:Dt.dom.getParents(nn),element:nn}),Dt.on("NodeChange",Ut),()=>Dt.off("NodeChange",Ut)},Bs=(Dt,Ut)=>{const Gn=document.createDocumentFragment();return Vt(Dt,io=>{Gn.appendChild(io.dom)}),rn.fromDom(Gn)},qm=(Dt,Ut,nn)=>Dt.dispatch("ListMutation",{action:Ut,element:nn}),kp=(Dt=>Ut=>Ut.replace(Dt,""))(/^\s+|\s+$/g),fu=Dt=>Dt.length>0,V0=Dt=>!fu(Dt),zx=Dt=>Dt.style!==void 0&&dt(Dt.style.getPropertyValue),c_=(Dt,Ut,nn)=>{if(!b(nn))throw console.error("Invalid call to CSS.set. Property ",Ut,":: Value ",nn,":: Element ",Dt),new Error("CSS value must be a string: "+nn);zx(Dt)&&Dt.style.setProperty(Ut,nn)},Hu=(Dt,Ut,nn)=>{const Gn=Dt.dom;c_(Gn,Ut,nn)},m1=Dt=>So(Dt,"OL,UL"),A0=Dt=>So(Dt,"LI"),Fu=Dt=>ou(Dt).exists(m1),T0=Dt=>Yl(Dt).exists(m1),Mm=Dt=>"listAttributes"in Dt,y1=Dt=>"isComment"in Dt,bn=Dt=>"isFragment"in Dt,Sn=Dt=>Dt.depth>0,Ao=Dt=>Dt.isSelected,qo=Dt=>{const Ut=Ms(Dt),nn=T0(Dt)?Ut.slice(0,-1):Ut;return an(nn,hs)},ps=(Dt,Ut,nn)=>Zr(Dt).filter(fs).map(Gn=>({depth:Ut,dirty:!1,isSelected:nn,content:qo(Dt),itemAttributes:es(Dt),listAttributes:es(Gn),listType:Ir(Gn),isInPreviousLi:!1})),Tl=(Dt,Ut)=>{Un(Dt.item,Ut.list)},Xs=Dt=>{for(let Ut=1;Ut<Dt.length;Ut++)Tl(Dt[Ut-1],Dt[Ut])},gu=(Dt,Ut)=>{_o(er(Dt),Wn(Ut),Tl)},pp=(Dt,Ut)=>{const nn={list:rn.fromTag(Ut,Dt),item:rn.fromTag("li",Dt)};return Un(nn.list,nn.item),nn},Pm=(Dt,Ut,nn)=>{const Gn=[];for(let io=0;io<nn;io++)Gn.push(pp(Dt,Mm(Ut)?Ut.listType:Ut.parentListType));return Gn},am=(Dt,Ut)=>{for(let nn=0;nn<Dt.length-1;nn++)Hu(Dt[nn].item,"list-style-type","none");er(Dt).each(nn=>{Mm(Ut)&&(Qr(nn.list,Ut.listAttributes),Qr(nn.item,Ut.itemAttributes)),Mo(nn.item,Ut.content)})},rp=(Dt,Ut)=>{Ir(Dt.list)!==Ut.listType&&(Dt.list=Nl(Dt.list,Ut.listType)),Qr(Dt.list,Ut.listAttributes)},ip=(Dt,Ut,nn)=>{const Gn=rn.fromTag("li",Dt);return Qr(Gn,Ut),Mo(Gn,nn),Gn},Tp=(Dt,Ut)=>{Un(Dt.list,Ut),Dt.item=Ut},lm=(Dt,Ut,nn)=>{const Gn=Ut.slice(0,nn.depth);return er(Gn).each(io=>{if(Mm(nn)){const rr=ip(Dt,nn.itemAttributes,nn.content);Tp(io,rr),rp(io,nn)}else if(bn(nn))Mo(io.item,nn.content);else{const rr=rn.fromHtml(`<!--${nn.content}-->`);Un(io.list,rr)}}),Gn},Vu=(Dt,Ut,nn)=>{const Gn=Pm(Dt,nn,nn.depth-Ut.length);return Xs(Gn),am(Gn,nn),gu(Ut,Gn),Ut.concat(Gn)},ap=(Dt,Ut)=>{let nn=$t.none();const Gn=fn(Ut,(io,rr,xs)=>y1(rr)?xs===0?(nn=$t.some(rr),io):lm(Dt,io,rr):rr.depth>io.length?Vu(Dt,io,rr):lm(Dt,io,rr),[]);return nn.each(io=>{const rr=rn.fromHtml(`<!--${io.content}-->`);Wn(Gn).each(xs=>{Au(xs.list,rr)})}),Wn(Gn).map(io=>io.list)},zu=(Dt,Ut)=>{switch(Dt){case"Indent":Ut.depth++;break;case"Outdent":Ut.depth--;break;case"Flatten":Ut.depth=0}Ut.dirty=!0},my=(Dt,Ut)=>{Mm(Dt)&&Mm(Ut)&&(Dt.listType=Ut.listType,Dt.listAttributes={...Ut.listAttributes})},u_=Dt=>{Dt.listAttributes=lr(Dt.listAttributes,(Ut,nn)=>nn!=="start")},ov=(Dt,Ut)=>{const nn=Dt[Ut].depth,Gn=rr=>rr.depth===nn&&!rr.dirty,io=rr=>rr.depth<nn;return It(Ln(Dt.slice(0,Ut)),Gn,io).orThunk(()=>It(Dt.slice(Ut+1),Gn,io))},b1=Dt=>(Vt(Dt,(Ut,nn)=>{ov(Dt,nn).fold(()=>{Ut.dirty&&Mm(Ut)&&u_(Ut)},Gn=>my(Ut,Gn))}),Dt),v1=Dt=>{let Ut=Dt;return{get:()=>Ut,set:io=>{Ut=io}}},Rv=(Dt,Ut,nn,Gn)=>{var io;if(as(Gn))return[{depth:Dt+1,content:(io=Gn.dom.nodeValue)!==null&&io!==void 0?io:"",dirty:!1,isSelected:!1,isComment:!0}];Ut.each(qs=>{Nn(qs.start,Gn)&&nn.set(!0)});const rr=ps(Gn,Dt,nn.get());Ut.each(qs=>{Nn(qs.end,Gn)&&nn.set(!1)});const xs=Yl(Gn).filter(m1).map(qs=>I0(Dt,Ut,nn,qs)).getOr([]);return rr.toArray().concat(xs)},Mv=(Dt,Ut,nn,Gn)=>ou(Gn).filter(m1).fold(()=>Rv(Dt,Ut,nn,Gn),io=>{const rr=fn(Ms(Gn),(xs,qs,$s)=>{if($s===0)return xs;if(A0(qs))return xs.concat(Rv(Dt,Ut,nn,qs));{const cs={isFragment:!0,depth:Dt,content:[qs],isSelected:!1,dirty:!1,parentListType:Ir(io)};return xs.concat(cs)}},[]);return I0(Dt,Ut,nn,io).concat(rr)}),I0=(Dt,Ut,nn,Gn)=>uo(Ms(Gn),io=>{const rr=m1(io)?I0:Mv,xs=Dt+1;return rr(xs,Ut,nn,io)}),Zm=(Dt,Ut)=>{const nn=v1(!1),Gn=0;return an(Dt,io=>({sourceList:io,entries:I0(Gn,Ut,nn,io)}))},Bw=(Dt,Ut)=>{const nn=b1(Ut);return an(nn,Gn=>{const io=y1(Gn)?Bs([rn.fromHtml(`<!--${Gn.content}-->`)]):Bs(Gn.content),rr=Mm(Gn)?Gn.itemAttributes:{};return rn.fromDom(Im(Dt,io.dom,rr))})},Fy=(Dt,Ut)=>{const nn=b1(Ut);return ap(Dt.contentDocument,nn).toArray()},Bx=(Dt,Ut)=>uo(hn(Ut,Sn),nn=>Wn(nn).exists(Sn)?Fy(Dt,nn):Bw(Dt,nn)),_1=(Dt,Ut)=>{Vt(ao(Dt,Ao),nn=>zu(Ut,nn))},$x=Dt=>{const Ut=an(Vo(Dt),rn.fromDom);return _o(Vn(Ut,Mt(Fu)),Vn(Ln(Ut),Mt(Fu)),(nn,Gn)=>({start:nn,end:Gn}))},K_=(Dt,Ut,nn)=>{const Gn=Zm(Ut,$x(Dt));Vt(Gn,io=>{_1(io.entries,nn);const rr=Bx(Dt,io.entries);Vt(rr,xs=>{qm(Dt,nn==="Indent"?"IndentList":"OutdentList",xs.dom)}),Bn(io.sourceList,rr),ss(io.sourceList)})},x1=(Dt,Ut)=>{const nn=ro(Xo(Dt)),Gn=ro($l(Dt));let io=!1;if(nn.length||Gn.length){const rr=Dt.selection.getBookmark();K_(Dt,nn,Ut),Rm(Dt,Ut,Gn),Dt.selection.moveToBookmark(rr),Dt.selection.setRng(Xp(Dt.selection.getRng())),Dt.nodeChanged(),io=!0}return io},Y_=(Dt,Ut)=>!du(Dt)&&x1(Dt,Ut),Gx=Dt=>Y_(Dt,"Indent"),Pv=Dt=>Y_(Dt,"Outdent"),$w=Dt=>Y_(Dt,"Flatten"),Qn="\uFEFF",w1=Dt=>Dt===Qn,R0=(Dt,Ut,nn)=>_a(Dt,Ut,nn).isSome(),cC=(Dt,Ut)=>R0(Dt,Rt(Nn,Ut));var uC=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Ov=Xl.DOM,_i=Dt=>{const Ut={},nn=Gn=>{let io=Dt[Gn?"startContainer":"endContainer"],rr=Dt[Gn?"startOffset":"endOffset"];if(Al(io)){const xs=Ov.create("span",{"data-mce-type":"bookmark"});io.hasChildNodes()?(rr=Math.min(rr,io.childNodes.length-1),Gn?io.insertBefore(xs,io.childNodes[rr]):Ov.insertAfter(xs,io.childNodes[rr])):io.appendChild(xs),io=xs,rr=0}Ut[Gn?"startContainer":"endContainer"]=io,Ut[Gn?"startOffset":"endOffset"]=rr};return nn(!0),Dt.collapsed||nn(),Ut},Om=Dt=>{const Ut=Gn=>{const io=qs=>{var $s;let cs=($s=qs.parentNode)===null||$s===void 0?void 0:$s.firstChild,_f=0;for(;cs;){if(cs===qs)return _f;(!Al(cs)||cs.getAttribute("data-mce-type")!=="bookmark")&&_f++,cs=cs.nextSibling}return-1};let rr=Dt[Gn?"startContainer":"endContainer"],xs=Dt[Gn?"startOffset":"endOffset"];if(rr){if(Al(rr)&&rr.parentNode){const qs=rr;xs=io(rr),rr=rr.parentNode,Ov.remove(qs),!rr.hasChildNodes()&&Ov.isBlock(rr)&&rr.appendChild(Ov.create("br"))}Dt[Gn?"startContainer":"endContainer"]=rr,Dt[Gn?"startOffset":"endOffset"]=xs}};Ut(!0),Ut();const nn=Ov.createRng();return nn.setStart(Dt.startContainer,Dt.startOffset),Dt.endContainer&&nn.setEnd(Dt.endContainer,Dt.endOffset),Xp(nn)},cm=Dt=>{switch(Dt){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Dv=(Dt,Ut,nn)=>{const Gn=nn["list-style-type"]?nn["list-style-type"]:null;Dt.setStyle(Ut,"list-style-type",Gn)},jx=(Dt,Ut)=>{uu.each(Ut,(nn,Gn)=>{Dt.setAttribute(Gn,nn)})},d_=(Dt,Ut,nn)=>{jx(Ut,nn["list-attributes"]),uu.each(Dt.select("li",Ut),Gn=>{jx(Gn,nn["list-item-attributes"])})},Dm=(Dt,Ut,nn)=>{Dv(Dt,Ut,nn),d_(Dt,Ut,nn)},X_=(Dt,Ut,nn)=>{uu.each(nn,Gn=>Dt.setStyle(Ut,Gn,""))},rv=(Dt,Ut)=>ct(Ut)&&!Np(Ut,Dt.schema.getBlockElements()),J_=(Dt,Ut,nn,Gn)=>{let io=Ut[nn?"startContainer":"endContainer"];const rr=Ut[nn?"startOffset":"endOffset"];Al(io)&&(io=io.childNodes[Math.min(rr,io.childNodes.length-1)]||io),!nn&&Vm(io.nextSibling)&&(io=io.nextSibling);const xs=$s=>{for(;!Dt.dom.isBlock($s)&&$s.parentNode&&Gn!==$s;)$s=$s.parentNode;return $s},qs=($s,cs)=>{var _f;const Ip=new Ns($s,xs($s)),Xm=cs?"next":"prev";let Gv;for(;Gv=Ip[Xm]();)if(!(fp(Dt,Gv)||w1(Gv.textContent)||((_f=Gv.textContent)===null||_f===void 0?void 0:_f.length)===0))return $t.some(Gv);return $t.none()};if(nn&&_s(io))if(w1(io.textContent))io=qs(io,!1).getOr(io);else for(io.parentNode!==null&&rv(Dt,io.parentNode)&&(io=io.parentNode);io.previousSibling!==null&&(rv(Dt,io.previousSibling)||_s(io.previousSibling));)io=io.previousSibling;if(!nn&&_s(io))if(w1(io.textContent))io=qs(io,!0).getOr(io);else for(io.parentNode!==null&&rv(Dt,io.parentNode)&&(io=io.parentNode);io.nextSibling!==null&&(rv(Dt,io.nextSibling)||_s(io.nextSibling));)io=io.nextSibling;for(;io.parentNode!==Gn;){const $s=io.parentNode;if(Dp(Dt,io)||/^(TD|TH)$/.test($s.nodeName))return io;io=$s}return io},sv=(Dt,Ut,nn)=>{const Gn=[],io=Dt.dom,rr=J_(Dt,Ut,!0,nn),xs=J_(Dt,Ut,!1,nn);let qs;const $s=[];for(let cs=rr;cs&&($s.push(cs),cs!==xs);cs=cs.nextSibling);return uu.each($s,cs=>{var _f;if(Dp(Dt,cs)){Gn.push(cs),qs=null;return}if(io.isBlock(cs)||Vm(cs)){Vm(cs)&&io.remove(cs),qs=null;return}const Ip=cs.nextSibling;if(uC.isBookmarkNode(cs)&&(Pl(Ip)||Dp(Dt,Ip)||!Ip&&cs.parentNode===nn)){qs=null;return}qs||(qs=io.create("p"),(_f=cs.parentNode)===null||_f===void 0||_f.insertBefore(qs,cs),Gn.push(qs)),qs.appendChild(cs)}),Gn},Km=(Dt,Ut,nn)=>{const Gn=Dt.getStyle(Ut,"list-style-type");let io=nn?nn["list-style-type"]:"";return io=io===null?"":io,Gn===io},dC=(Dt,Ut)=>{const nn=Dt.selection.getStart(!0),Gn=J_(Dt,Ut,!0,Dt.getBody());return cC(rn.fromDom(Gn),rn.fromDom(Ut.commonAncestorContainer))?Ut.commonAncestorContainer:nn},f_=(Dt,Ut,nn)=>{const Gn=Dt.selection.getRng();let io="LI";const rr=Pu(Dt,dC(Dt,Gn)),xs=Dt.dom;if(xs.getContentEditable(Dt.selection.getNode())==="false")return;Ut=Ut.toUpperCase(),Ut==="DL"&&(io="DT");const qs=_i(Gn),$s=ao(sv(Dt,Gn,rr),Dt.dom.isEditable);uu.each($s,cs=>{let _f;const Ip=cs.previousSibling,Xm=cs.parentNode;dp(Xm)||(Ip&&Pl(Ip)&&Ip.nodeName===Ut&&Km(xs,Ip,nn)?(_f=Ip,cs=xs.rename(cs,io),Ip.appendChild(cs)):(_f=xs.create(Ut),Xm.insertBefore(_f,cs),_f.appendChild(cs),cs=xs.rename(cs,io)),X_(xs,cs,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Dm(xs,_f,nn),h_(Dt.dom,_f))}),Dt.selection.setRng(Om(qs))},Jp=(Dt,Ut)=>Pl(Dt)&&Dt.nodeName===(Ut==null?void 0:Ut.nodeName),h0=(Dt,Ut,nn)=>{const Gn=Dt.getStyle(Ut,"list-style-type",!0),io=Dt.getStyle(nn,"list-style-type",!0);return Gn===io},Ym=(Dt,Ut)=>Dt.className===Ut.className,k1=(Dt,Ut,nn)=>Jp(Ut,nn)&&h0(Dt,Ut,nn)&&Ym(Ut,nn),h_=(Dt,Ut)=>{let nn,Gn=Ut.nextSibling;if(k1(Dt,Ut,Gn)){const io=Gn;for(;nn=io.firstChild;)Ut.appendChild(nn);Dt.remove(io)}if(Gn=Ut.previousSibling,k1(Dt,Ut,Gn)){const io=Gn;for(;nn=io.lastChild;)Ut.insertBefore(nn,Ut.firstChild);Dt.remove(io)}},Gw=(Dt,Ut,nn,Gn)=>{if(Ut.nodeName!==nn){const io=Dt.dom.rename(Ut,nn);Dm(Dt.dom,io,Gn),qm(Dt,cm(nn),io)}else Dm(Dt.dom,Ut,Gn),qm(Dt,cm(nn),Ut)},p_=(Dt,Ut,nn,Gn)=>{if(Ut.classList.forEach((io,rr,xs)=>{io.startsWith("tox-")&&(xs.remove(io),xs.length===0&&Ut.removeAttribute("class"))}),Ut.nodeName!==nn){const io=Dt.dom.rename(Ut,nn);Dm(Dt.dom,io,Gn),qm(Dt,cm(nn),io)}else Dm(Dt.dom,Ut,Gn),qm(Dt,cm(nn),Ut)},yy=(Dt,Ut,nn,Gn,io)=>{const rr=Pl(Ut);if(rr&&Ut.nodeName===Gn&&!g_(io)&&!Zl(Ut))$w(Dt);else{f_(Dt,Gn,io);const xs=_i(Dt.selection.getRng()),qs=rr?[Ut,...nn]:nn,$s=rr&&Zl(Ut)?p_:Gw;uu.each(qs,cs=>{$s(Dt,cs,Gn,io)}),Dt.selection.setRng(Om(xs))}},g_=Dt=>"list-style-type"in Dt,WS=(Dt,Ut,nn,Gn)=>{if(Ut!==Dt.getBody())if(Ut)if(Ut.nodeName===nn&&!g_(Gn)&&!Zl(Ut))$w(Dt);else{const io=_i(Dt.selection.getRng());Zl(Ut)&&Ut.classList.forEach((xs,qs,$s)=>{xs.startsWith("tox-")&&($s.remove(xs),$s.length===0&&Ut.removeAttribute("class"))}),Dm(Dt.dom,Ut,Gn);const rr=Dt.dom.rename(Ut,nn);h_(Dt.dom,rr),Dt.selection.setRng(Om(io)),f_(Dt,nn,Gn),qm(Dt,cm(nn),rr)}else f_(Dt,nn,Gn),qm(Dt,cm(nn),Ut)},jw=(Dt,Ut,nn)=>{const Gn=un(Dt);if(Fp(Dt,Gn))return;const io=Wo(Dt),rr=_(nn)?nn:{};io.length>0?yy(Dt,Gn,io,Ut,rr):WS(Dt,Gn,Ut,rr)},fC=Xl.DOM,Uw=(Dt,Ut)=>{const nn=Ut.parentElement;if(nn&&nn.nodeName==="LI"&&nn.firstChild===Ut){const Gn=nn.previousSibling;Gn&&Gn.nodeName==="LI"?(Gn.appendChild(Ut),im(Dt,nn)&&fC.remove(nn)):fC.setStyle(nn,"listStyleType","none")}if(Pl(nn)){const Gn=nn.previousSibling;Gn&&Gn.nodeName==="LI"&&Gn.appendChild(Ut)}},m_=(Dt,Ut)=>{const nn=uu.grep(Dt.select("ol,ul",Ut));uu.each(nn,Gn=>{Uw(Dt,Gn)})},S1=(Dt,Ut,nn,Gn)=>{let io=Ut.startContainer;const rr=Ut.startOffset;if(_s(io)&&(nn?rr<io.data.length:rr>0))return io;const xs=Dt.schema.getNonEmptyElements();Al(io)&&(io=Cs.getNode(io,rr));const qs=new Ns(io,Gn);nn&&ry(Dt.dom,io)&&qs.next();const $s=nn?qs.next.bind(qs):qs.prev2.bind(qs);for(;io=$s();)if(io.nodeName==="LI"&&!io.hasChildNodes()||xs[io.nodeName]||_s(io)&&io.data.length>0)return io;return null},Q_=(Dt,Ut)=>{const nn=Ut.childNodes;return nn.length===1&&!Pl(nn[0])&&Dt.isBlock(nn[0])},Qu=Dt=>$t.from(Dt).map(rn.fromDom).filter(_r).exists(Ut=>Us(Ut)&&!dn(["details"],Ir(Ut))),_d=(Dt,Ut)=>{Q_(Dt,Ut)&&Qu(Ut.firstChild)&&Dt.remove(Ut.firstChild,!0)},Nv=(Dt,Ut,nn)=>{let Gn;const io=Q_(Dt,nn)?nn.firstChild:nn;if(_d(Dt,Ut),!im(Dt,Ut,!0))for(;Gn=Ut.firstChild;)io.appendChild(Gn)},ay=(Dt,Ut,nn)=>{let Gn;const io=Ut.parentNode;if(!Yp(Dt,Ut)||!Yp(Dt,nn))return;Pl(nn.lastChild)&&(Gn=nn.lastChild),io===nn.lastChild&&Vm(io.previousSibling)&&Dt.remove(io.previousSibling);const rr=nn.lastChild;rr&&Vm(rr)&&Ut.hasChildNodes()&&Dt.remove(rr),im(Dt,nn,!0)&&jo(rn.fromDom(nn)),Nv(Dt,Ut,nn),Gn&&nn.appendChild(Gn);const qs=zn(rn.fromDom(nn),rn.fromDom(Ut))?Dt.getParents(Ut,Pl,nn):[];Dt.remove(Ut),Vt(qs,$s=>{im(Dt,$s)&&$s!==Dt.getRoot()&&Dt.remove($s)})},Hw=(Dt,Ut,nn)=>{jo(rn.fromDom(nn)),ay(Dt.dom,Ut,nn),Dt.selection.setCursorLocation(nn,0)},zp=(Dt,Ut,nn,Gn)=>{const io=Dt.dom;if(io.isEmpty(Gn))Hw(Dt,nn,Gn);else{const rr=_i(Ut);ay(io,nn,Gn),Dt.selection.setRng(Om(rr))}},ls=(Dt,Ut,nn,Gn)=>{const io=_i(Ut);ay(Dt.dom,nn,Gn);const rr=Om(io);Dt.selection.setRng(rr)},iv=(Dt,Ut)=>{const nn=Dt.dom,Gn=Dt.selection,io=Gn.getStart(),rr=Kr(Dt,io),xs=nn.getParent(Gn.getStart(),"LI",rr);if(xs){const qs=xs.parentElement;if(qs===Dt.getBody()&&im(nn,qs))return!0;const $s=Xp(Gn.getRng()),cs=nn.getParent(S1(Dt,$s,Ut,rr),"LI",rr),_f=cs&&(Ut?nn.isChildOf(xs,cs):nn.isChildOf(cs,xs));if(cs&&cs!==xs&&!_f)return Dt.undoManager.transact(()=>{Ut?zp(Dt,$s,cs,xs):Vl(xs)?Pv(Dt):ls(Dt,$s,xs,cs)}),!0;if(_f&&!Ut&&cs!==xs)return Dt.undoManager.transact(()=>{if($s.commonAncestorContainer.parentElement){const Ip=_i($s),Xm=$s.commonAncestorContainer.parentElement;Nv(nn,$s.commonAncestorContainer.parentElement,cs),Xm.remove();const Gv=Om(Ip);Dt.selection.setRng(Gv)}}),!0;if(!cs&&!Ut&&$s.startOffset===0&&$s.endOffset===0)return Dt.undoManager.transact(()=>{$w(Dt)}),!0}return!1},Vw=(Dt,Ut,nn)=>{const Gn=Dt.getParent(Ut.parentNode,Dt.isBlock,nn);Dt.remove(Ut),Gn&&Dt.isEmpty(Gn)&&Dt.remove(Gn)},W0=(Dt,Ut)=>{const nn=Dt.dom,Gn=Dt.selection.getStart(),io=Kr(Dt,Gn),rr=nn.getParent(Gn,nn.isBlock,io);if(rr&&nn.isEmpty(rr,void 0,{checkRootAsContent:!0})){const xs=Xp(Dt.selection.getRng()),qs=nn.getParent(S1(Dt,xs,Ut,io),"LI",io);if(qs){const $s=Xm=>dn(["td","th","caption"],Ir(Xm)),cs=Xm=>Xm.dom===io,_f=go(rn.fromDom(qs),$s,cs),Ip=go(rn.fromDom(xs.startContainer),$s,cs);return On(_f,Ip,Nn)?(Dt.undoManager.transact(()=>{const Xm=qs.parentNode;Vw(nn,rr,io),h_(nn,Xm),Dt.selection.select(qs,!0),Dt.selection.collapse(Ut)}),!0):!1}}return!1},Wl=(Dt,Ut)=>iv(Dt,Ut)||W0(Dt,Ut),Lv=Dt=>{const Ut=Dt.selection.getStart(),nn=Kr(Dt,Ut);return Dt.dom.getParent(Ut,"LI,DT,DD",nn)||Vo(Dt).length>0},ex=Dt=>Lv(Dt)?(Dt.undoManager.transact(()=>{let Ut=!0;const nn=()=>Ut=!1;Dt.on("input",nn),Dt.execCommand("Delete"),Dt.off("input",nn),Ut&&Dt.dispatch("input"),m_(Dt.dom,Dt.getBody())}),!0):!1,Ux=(Dt,Ut)=>{const nn=Dt.selection;return!Fp(Dt,nn.getNode())&&(nn.isCollapsed()?Wl(Dt,Ut):ex(Dt))},Ww=Dt=>{Dt.on("ExecCommand",Ut=>{const nn=Ut.command.toLowerCase();(nn==="delete"||nn==="forwarddelete")&&Lv(Dt)&&m_(Dt.dom,Dt.getBody())}),Dt.on("keydown",Ut=>{Ut.keyCode===Tu.BACKSPACE?Ux(Dt,!1)&&Ut.preventDefault():Ut.keyCode===Tu.DELETE&&Ux(Dt,!0)&&Ut.preventDefault()})},Ks=Dt=>({backspaceDelete:Ut=>{Ux(Dt,Ut)}}),bp=(Dt,Ut)=>{const nn=un(Dt);nn===null||Fp(Dt,nn)||Dt.undoManager.transact(()=>{_(Ut.styles)&&Dt.dom.setStyles(nn,Ut.styles),_(Ut.attrs)&&Kn(Ut.attrs,(Gn,io)=>Dt.dom.setAttrib(nn,io,Gn))})},Fv=Dt=>{const Ut=Ln(kp(Dt).split("")),nn=an(Ut,(Gn,io)=>{const rr=Gn.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,io)*rr});return fn(nn,(Gn,io)=>Gn+io,0)},zv=Dt=>{if(Dt--,Dt<0)return"";{const Ut=Dt%26,nn=Math.floor(Dt/26),Gn=zv(nn),io=String.fromCharCode(65+Ut);return Gn+io}},M0=Dt=>/^[A-Z]+$/.test(Dt),p0=Dt=>/^[a-z]+$/.test(Dt),q0=Dt=>/^[0-9]+$/.test(Dt),Su=Dt=>q0(Dt)?2:M0(Dt)?0:p0(Dt)?1:V0(Dt)?3:4,ly=Dt=>{switch(Su(Dt)){case 2:return $t.some({listStyleType:$t.none(),start:Dt});case 0:return $t.some({listStyleType:$t.some("upper-alpha"),start:Fv(Dt).toString()});case 1:return $t.some({listStyleType:$t.some("lower-alpha"),start:Fv(Dt).toString()});case 3:return $t.some({listStyleType:$t.none(),start:""});case 4:return $t.none()}},E1=Dt=>{const Ut=parseInt(Dt.start,10);return Ro(Dt.listStyleType,"upper-alpha")?zv(Ut):Ro(Dt.listStyleType,"lower-alpha")?zv(Ut).toLowerCase():Dt.start},Up=Dt=>{const Ut=un(Dt);!Cp(Ut)||Fp(Dt,Ut)||Dt.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:E1({start:Dt.dom.getAttrib(Ut,"start","1"),listStyleType:$t.from(Dt.dom.getStyle(Ut,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:nn=>{const Gn=nn.getData();ly(Gn.start).each(io=>{Dt.execCommand("mceListUpdate",!1,{attrs:{start:io.start==="1"?"":io.start},styles:{"list-style-type":io.listStyleType.getOr("")}})}),nn.close()}})},by=(Dt,Ut)=>()=>{const nn=un(Dt);return ct(nn)&&nn.nodeName===Ut},lp=Dt=>{Dt.addCommand("mceListProps",()=>{Up(Dt)})},Bv=Dt=>{Dt.on("BeforeExecCommand",Ut=>{const nn=Ut.command.toLowerCase();nn==="indent"?Gx(Dt):nn==="outdent"&&Pv(Dt)}),Dt.addCommand("InsertUnorderedList",(Ut,nn)=>{jw(Dt,"UL",nn)}),Dt.addCommand("InsertOrderedList",(Ut,nn)=>{jw(Dt,"OL",nn)}),Dt.addCommand("InsertDefinitionList",(Ut,nn)=>{jw(Dt,"DL",nn)}),Dt.addCommand("RemoveList",()=>{$w(Dt)}),lp(Dt),Dt.addCommand("mceListUpdate",(Ut,nn)=>{_(nn)&&bp(Dt,nn)}),Dt.addQueryStateHandler("InsertUnorderedList",by(Dt,"UL")),Dt.addQueryStateHandler("InsertOrderedList",by(Dt,"OL")),Dt.addQueryStateHandler("InsertDefinitionList",by(Dt,"DL"))};var y_=tinymce.util.Tools.resolve("tinymce.html.Node");const mu=Dt=>Dt.type===3,vy=Dt=>Dt.length===0,Hx=Dt=>{const Ut=(io,rr)=>{const xs=y_.create("li");Vt(io,qs=>xs.append(qs)),rr?Dt.insert(xs,rr,!0):Dt.append(xs)},nn=(io,rr)=>mu(rr)?[...io,rr]:!vy(io)&&!mu(rr)?(Ut(io,rr),[]):io,Gn=fn(Dt.children(),nn,[]);vy(Gn)||Ut(Gn)},av=Dt=>{Dt.on("PreInit",()=>{const{parser:Ut}=Dt;Ut.addNodeFilter("ul,ol",nn=>Vt(nn,Hx))})},Ou=Dt=>{Dt.on("keydown",Ut=>{Ut.keyCode!==Tu.TAB||Tu.metaKeyPressed(Ut)||Dt.undoManager.transact(()=>{(Ut.shiftKey?Pv(Dt):Gx(Dt))&&Ut.preventDefault()})})},$v=Dt=>{py(Dt)&&Ou(Dt),Ww(Dt)},g0=(Dt,Ut)=>nn=>{const Gn=io=>{nn.setActive(ru(io.parents,Ut)),nn.setEnabled(!Fp(Dt,io.element)&&Dt.selection.isEditable())};return nn.setEnabled(Dt.selection.isEditable()),H0(Dt,Gn)},b_=Dt=>{const Ut=nn=>()=>Dt.execCommand(nn);Dt.hasPlugin("advlist")||(Dt.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:Ut("InsertOrderedList"),onSetup:g0(Dt,"OL")}),Dt.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:Ut("InsertUnorderedList"),onSetup:g0(Dt,"UL")}))},xl=(Dt,Ut)=>nn=>H0(Dt,io=>nn.setEnabled(ru(io.parents,Ut)&&!Fp(Dt,io.element))),v_=Dt=>{const Ut={text:"List properties...",icon:"ordered-list",onAction:()=>Dt.execCommand("mceListProps"),onSetup:xl(Dt,"OL")};Dt.ui.registry.addMenuItem("listprops",Ut),Dt.ui.registry.addContextMenu("lists",{update:nn=>{const Gn=un(Dt,nn);return Cp(Gn)?["listprops"]:[]}})};var Vx=()=>{o.add("lists",Dt=>(Tm(Dt),av(Dt),Dt.hasPlugin("rtc",!0)?lp(Dt):($v(Dt),Bv(Dt)),b_(Dt),v_(Dt),Ks(Dt)))};Vx()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(Un,Bn,Mo)=>{var jo;return Mo(Un,Bn.prototype)?!0:((jo=Un.constructor)===null||jo===void 0?void 0:jo.name)===Bn.name},s=Un=>{const Bn=typeof Un;return Un===null?"null":Bn==="object"&&Array.isArray(Un)?"array":Bn==="object"&&e(Un,String,(Mo,jo)=>jo.isPrototypeOf(Mo))?"string":Bn},a=Un=>Bn=>s(Bn)===Un,d=a("string"),b=a("object"),_=a("array"),_e=Un=>Un==null,nt=Un=>!_e(Un);class rt{constructor(Bn,Mo){this.tag=Bn,this.value=Mo}static some(Bn){return new rt(!0,Bn)}static none(){return rt.singletonNone}fold(Bn,Mo){return this.tag?Mo(this.value):Bn()}isSome(){return this.tag}isNone(){return!this.tag}map(Bn){return this.tag?rt.some(Bn(this.value)):rt.none()}bind(Bn){return this.tag?Bn(this.value):rt.none()}exists(Bn){return this.tag&&Bn(this.value)}forall(Bn){return!this.tag||Bn(this.value)}filter(Bn){return!this.tag||Bn(this.value)?this:rt.none()}getOr(Bn){return this.tag?this.value:Bn}or(Bn){return this.tag?this:Bn}getOrThunk(Bn){return this.tag?this.value:Bn()}orThunk(Bn){return this.tag?this:Bn()}getOrDie(Bn){if(this.tag)return this.value;throw new Error(Bn??"Called getOrDie on None")}static from(Bn){return nt(Bn)?rt.some(Bn):rt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Bn){this.tag&&Bn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}rt.singletonNone=new rt(!1);const ct=Array.prototype.push,dt=(Un,Bn)=>{for(let Mo=0,jo=Un.length;Mo<jo;Mo++){const ss=Un[Mo];Bn(ss,Mo)}},pt=Un=>{const Bn=[];for(let Mo=0,jo=Un.length;Mo<jo;++Mo){if(!_(Un[Mo]))throw new Error("Arr.flatten item "+Mo+" was not an array, input: "+Un);ct.apply(Bn,Un[Mo])}return Bn},bt=Un=>{let Bn=Un;return{get:()=>Bn,set:ss=>{Bn=ss}}},xt=Object.keys,wt=Object.hasOwnProperty,Tt=(Un,Bn)=>{const Mo=xt(Un);for(let jo=0,ss=Mo.length;jo<ss;jo++){const Cs=Mo[jo],Ns=Un[Cs];Bn(Ns,Cs)}},Rt=(Un,Bn)=>Mt(Un,Bn)?rt.from(Un[Bn]):rt.none(),Mt=(Un,Bn)=>wt.call(Un,Bn),Et=Un=>Bn=>Bn.options.get(Un),$t=Un=>{const Bn=Un.options.register;Bn("audio_template_callback",{processor:"function"}),Bn("video_template_callback",{processor:"function"}),Bn("iframe_template_callback",{processor:"function"}),Bn("media_live_embeds",{processor:"boolean",default:!0}),Bn("media_filter_html",{processor:"boolean",default:!0}),Bn("media_url_resolver",{processor:"function"}),Bn("media_alt_source",{processor:"boolean",default:!0}),Bn("media_poster",{processor:"boolean",default:!0}),Bn("media_dimensions",{processor:"boolean",default:!0})},Xt=Et("audio_template_callback"),Zt=Et("video_template_callback"),Nt=Et("iframe_template_callback"),Jt=Et("media_live_embeds"),dn=Et("media_filter_html"),Pn=Et("media_url_resolver"),an=Et("media_alt_source"),Vt=Et("media_poster"),ao=Et("media_dimensions");var hn=tinymce.util.Tools.resolve("tinymce.util.Tools"),fn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),It=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Vn=fn.DOM,ln=Un=>Un.replace(/px$/,""),uo=Un=>{const Bn=Un.attr("style"),Mo=Bn?Vn.parseStyle(Bn):{};return{type:"ephox-embed-iri",source:Un.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:Rt(Mo,"max-width").map(ln).getOr(""),height:Rt(Mo,"max-height").map(ln).getOr("")}},Ln=(Un,Bn)=>{let Mo={};const ss=It({validate:!1,forced_root_block:!1},Bn).parse(Un);for(let Cs=ss;Cs;Cs=Cs.walk())if(Cs.type===1){const Ns=Cs.name;if(Cs.attr("data-ephox-embed-iri")){Mo=uo(Cs);break}else!Mo.source&&Ns==="param"&&(Mo.source=Cs.attr("movie")),(Ns==="iframe"||Ns==="object"||Ns==="embed"||Ns==="video"||Ns==="audio")&&(Mo.type||(Mo.type=Ns),Mo=hn.extend(Cs.attributes.map,Mo)),Ns==="source"&&(Mo.source?Mo.altsource||(Mo.altsource=Cs.attr("src")):Mo.source=Cs.attr("src")),Ns==="img"&&!Mo.poster&&(Mo.poster=Cs.attr("src"))}return Mo.source=Mo.source||Mo.src||"",Mo.altsource=Mo.altsource||"",Mo.poster=Mo.poster||"",Mo},An=Un=>{var Bn;const Mo={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},jo=(Bn=Un.toLowerCase().split(".").pop())!==null&&Bn!==void 0?Bn:"";return Rt(Mo,jo).getOr("")};var Wn=tinymce.util.Tools.resolve("tinymce.html.Node"),er=tinymce.util.Tools.resolve("tinymce.html.Serializer");const no=(Un,Bn={})=>It({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...Bn},Un),Ro=fn.DOM,On=Un=>/^[0-9.]+$/.test(Un)?Un+"px":Un,_o=(Un,Bn)=>{const Mo=Bn.attr("style"),jo=Mo?Ro.parseStyle(Mo):{};nt(Un.width)&&(jo["max-width"]=On(Un.width)),nt(Un.height)&&(jo["max-height"]=On(Un.height)),Bn.attr("style",Ro.serializeStyle(jo))},Yt=["source","altsource"],jr=(Un,Bn,Mo,jo)=>{let ss=0,Cs=0;const Ns=no(jo);Ns.addNodeFilter("source",ro=>ss=ro.length);const Tu=Ns.parse(Un);for(let ro=Tu;ro;ro=ro.walk())if(ro.type===1){const Ls=ro.name;if(ro.attr("data-ephox-embed-iri")){_o(Bn,ro);break}else{switch(Ls){case"video":case"object":case"embed":case"img":case"iframe":Bn.height!==void 0&&Bn.width!==void 0&&(ro.attr("width",Bn.width),ro.attr("height",Bn.height));break}if(Mo)switch(Ls){case"video":ro.attr("poster",Bn.poster),ro.attr("src",null);for(let eo=ss;eo<2;eo++)if(Bn[Yt[eo]]){const nr=new Wn("source",1);nr.attr("src",Bn[Yt[eo]]),nr.attr("type",Bn[Yt[eo]+"mime"]||null),ro.append(nr)}break;case"iframe":ro.attr("src",Bn.source);break;case"object":const Kn=ro.getAll("img").length>0;if(Bn.poster&&!Kn){ro.attr("src",Bn.poster);const eo=new Wn("img",1);eo.attr("src",Bn.poster),eo.attr("width",Bn.width),eo.attr("height",Bn.height),ro.append(eo)}break;case"source":if(Cs<2&&(ro.attr("src",Bn[Yt[Cs]]),ro.attr("type",Bn[Yt[Cs]+"mime"]||null),!Bn[Yt[Cs]])){ro.remove();continue}Cs++;break;case"img":Bn.poster||ro.remove();break}}}return er({},jo).serialize(Tu)},lo=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],Ho=Un=>{const Bn=Un.match(/^(https?:\/\/|www\.)(.+)$/i);return Bn&&Bn.length>1?Bn[1]==="www."?"https://":Bn[1]:"https://"},mo=(Un,Bn)=>{const Mo=Ho(Bn),jo=Un.regex.exec(Bn);let ss=Mo+Un.url;if(nt(jo))for(let Cs=0;Cs<jo.length;Cs++)ss=ss.replace("$"+Cs,()=>jo[Cs]?jo[Cs]:"");return ss.replace(/\?$/,"")},Co=Un=>{const Bn=lo.filter(Mo=>Mo.regex.test(Un));return Bn.length>0?hn.extend({},Bn[0],{url:mo(Bn[0],Un)}):null},mn=(Un,Bn)=>{if(Bn)return Bn(Un);{const Mo=Un.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+Un.source+'" width="'+Un.width+'" height="'+Un.height+'"'+Mo+"></iframe>"}},wn=Un=>{let Bn='<object data="'+Un.source+'" width="'+Un.width+'" height="'+Un.height+'" type="application/x-shockwave-flash">';return Un.poster&&(Bn+='<img src="'+Un.poster+'" width="'+Un.width+'" height="'+Un.height+'" />'),Bn+="</object>",Bn},Dn=(Un,Bn)=>Bn?Bn(Un):'<audio controls="controls" src="'+Un.source+'">'+(Un.altsource?`
<source src="`+Un.altsource+'"'+(Un.altsourcemime?' type="'+Un.altsourcemime+'"':"")+` />
`:"")+"</audio>",rn=(Un,Bn)=>Bn?Bn(Un):'<video width="'+Un.width+'" height="'+Un.height+'"'+(Un.poster?' poster="'+Un.poster+'"':"")+` controls="controls">
<source src="`+Un.source+'"'+(Un.sourcemime?' type="'+Un.sourcemime+'"':"")+` />
`+(Un.altsource?'<source src="'+Un.altsource+'"'+(Un.altsourcemime?' type="'+Un.altsourcemime+'"':"")+` />
`:"")+"</video>",Cn=(Un,Bn)=>{var Mo;const jo=hn.extend({},Bn);if(!jo.source&&(hn.extend(jo,Ln((Mo=jo.embed)!==null&&Mo!==void 0?Mo:"",Un.schema)),!jo.source))return"";jo.altsource||(jo.altsource=""),jo.poster||(jo.poster=""),jo.source=Un.convertURL(jo.source,"source"),jo.altsource=Un.convertURL(jo.altsource,"source"),jo.sourcemime=An(jo.source),jo.altsourcemime=An(jo.altsource),jo.poster=Un.convertURL(jo.poster,"poster");const ss=Co(jo.source);if(ss&&(jo.source=ss.url,jo.type=ss.type,jo.allowfullscreen=ss.allowFullscreen,jo.width=jo.width||String(ss.w),jo.height=jo.height||String(ss.h)),jo.embed)return jr(jo.embed,jo,!0,Un.schema);{const Cs=Xt(Un),Ns=Zt(Un),Tu=Nt(Un);return jo.width=jo.width||"300",jo.height=jo.height||"150",hn.each(jo,(ro,Ls)=>{jo[Ls]=Un.dom.encode(""+ro)}),jo.type==="iframe"?mn(jo,Tu):jo.sourcemime==="application/x-shockwave-flash"?wn(jo):jo.sourcemime.indexOf("audio")!==-1?Dn(jo,Cs):rn(jo,Ns)}},Nn=Un=>Un.hasAttribute("data-mce-object")||Un.hasAttribute("data-ephox-embed-iri"),zn=Un=>{Un.on("mousedown",Bn=>{const Mo=Un.dom.getParent(Bn.target,".mce-preview-object");Mo&&Un.dom.getAttrib(Mo,"data-mce-selected")==="2"&&Bn.stopImmediatePropagation()}),Un.on("click keyup touchend",()=>{const Bn=Un.selection.getNode();Bn&&Un.dom.hasClass(Bn,"mce-preview-object")&&Un.dom.getAttrib(Bn,"data-mce-selected")&&Bn.setAttribute("data-mce-selected","2")}),Un.on("ObjectResized",Bn=>{const Mo=Bn.target;if(Mo.getAttribute("data-mce-object")){let jo=Mo.getAttribute("data-mce-html");jo&&(jo=unescape(jo),Mo.setAttribute("data-mce-html",escape(jr(jo,{width:String(Bn.width),height:String(Bn.height)},!1,Un.schema))))}})},So={},Hn=(Un,Bn,Mo)=>new Promise((jo,ss)=>{const Cs=Ns=>(Ns.html&&(So[Un.source]=Ns),jo({url:Un.source,html:Ns.html?Ns.html:Bn(Un)}));So[Un.source]?Cs(So[Un.source]):Mo({url:Un.source}).then(Cs).catch(ss)}),Tn=(Un,Bn)=>Promise.resolve({html:Bn(Un),url:Un.source}),Jn=Un=>Bn=>Cn(Un,Bn),bo=(Un,Bn)=>{const Mo=Pn(Un);return Mo?Hn(Bn,Jn(Un),Mo):Tn(Bn,Jn(Un))},$n=Un=>Mt(So,Un),oo=(Un,Bn)=>Rt(Bn,Un).bind(Mo=>Rt(Mo,"meta")),wo=(Un,Bn,Mo)=>jo=>{const ss=()=>Rt(Un,jo),Cs=()=>Rt(Bn,jo),Ns=Ls=>Rt(Ls,"value").bind(Kn=>Kn.length>0?rt.some(Kn):rt.none()),Tu=()=>ss().bind(Ls=>b(Ls)?Ns(Ls).orThunk(Cs):Cs().orThunk(()=>rt.from(Ls))),ro=()=>Cs().orThunk(()=>ss().bind(Ls=>b(Ls)?Ns(Ls):rt.from(Ls)));return{[jo]:(jo===Mo?Tu():ro()).getOr("")}},Oo=(Un,Bn)=>{const Mo={};return Rt(Un,"dimensions").each(jo=>{dt(["width","height"],ss=>{Rt(Bn,ss).orThunk(()=>Rt(jo,ss)).each(Cs=>Mo[ss]=Cs)})}),Mo},Ir=(Un,Bn)=>{const Mo=Bn&&Bn!=="dimensions"?oo(Bn,Un).getOr({}):{},jo=wo(Un,Mo,Bn);return{...jo("source"),...jo("altsource"),...jo("poster"),...jo("embed"),...Oo(Un,Mo)}},sr=Un=>{const Bn={...Un,source:{value:Rt(Un,"source").getOr("")},altsource:{value:Rt(Un,"altsource").getOr("")},poster:{value:Rt(Un,"poster").getOr("")}};return dt(["width","height"],Mo=>{Rt(Un,Mo).each(jo=>{const ss=Bn.dimensions||{};ss[Mo]=jo,Bn.dimensions=ss})}),Bn},vr=Un=>Bn=>{const Mo=Bn&&Bn.msg?"Media embed handler error: "+Bn.msg:"Media embed handler threw unknown error.";Un.notificationManager.open({type:"error",text:Mo})},as=Un=>{const Bn=Un.selection.getNode(),Mo=Nn(Bn)?Un.serializer.serialize(Bn,{selection:!0}):"",jo=Ln(Mo,Un.schema),Cs=(()=>{if(As(jo.source,jo.type)){const Ns=Un.dom.getRect(Bn);return{width:Ns.w.toString().replace(/px$/,""),height:Ns.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Mo,...jo,...Cs}},_r=(Un,Bn)=>Mo=>{if(d(Mo.url)&&Mo.url.trim().length>0){const jo=Mo.html,Cs={...Ln(jo,Bn.schema),source:Mo.url,embed:jo};Un.setData(sr(Cs))}},fs=(Un,Bn)=>{const Mo=Un.dom.select("*[data-mce-object]");for(let jo=0;jo<Bn.length;jo++)for(let ss=Mo.length-1;ss>=0;ss--)Bn[jo]===Mo[ss]&&Mo.splice(ss,1);Un.selection.select(Mo[0])},Ss=(Un,Bn)=>{const Mo=Un.dom.select("*[data-mce-object]");Un.insertContent(Bn),fs(Un,Mo),Un.nodeChanged()},As=(Un,Bn)=>nt(Bn)&&Bn==="ephox-embed-iri"&&nt(Co(Un)),_l=(Un,Bn)=>((jo,ss)=>jo.width!==ss.width||jo.height!==ss.height)(Un,Bn)&&As(Bn.source,Un.type),Zr=(Un,Bn,Mo)=>{var jo;Bn.embed=_l(Un,Bn)&&ao(Mo)?Cn(Mo,{...Bn,embed:""}):jr((jo=Bn.embed)!==null&&jo!==void 0?jo:"",Bn,!1,Mo.schema),Bn.embed&&(Un.source===Bn.source||$n(Bn.source))?Ss(Mo,Bn.embed):bo(Mo,Bn).then(ss=>{Ss(Mo,ss.html)}).catch(vr(Mo))},Ml=Un=>{const Bn=as(Un),Mo=bt(Bn),jo=sr(Bn),ss=(Hr,hs)=>{const ks=Ir(hs.getData(),"source");Hr.source!==ks.source&&(_r(es,Un)({url:ks.source,html:""}),bo(Un,ks).then(_r(es,Un)).catch(vr(Un)))},Cs=Hr=>{var hs;const ks=Ir(Hr.getData()),Nl=Ln((hs=ks.embed)!==null&&hs!==void 0?hs:"",Un.schema);Hr.setData(sr(Nl))},Ns=(Hr,hs,ks)=>{const Nl=Ir(Hr.getData(),hs),Xl=_l(ks,Nl)&&ao(Un)?{...Nl,embed:""}:Nl,uu=Cn(Un,Xl);Hr.setData(sr({...Xl,embed:uu}))},Tu=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],ro=ao(Un)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Ls={title:"General",name:"general",items:pt([Tu,ro])},eo={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},nr=[];an(Un)&&nr.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),Vt(Un)&&nr.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const lr={title:"Advanced",name:"advanced",items:nr},Rr=[Ls,eo];nr.length>0&&Rr.push(lr);const Qr={type:"tabpanel",tabs:Rr},es=Un.windowManager.open({title:"Insert/Edit Media",size:"normal",body:Qr,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Hr=>{const hs=Ir(Hr.getData());Zr(Mo.get(),hs,Un),Hr.close()},onChange:(Hr,hs)=>{switch(hs.name){case"source":ss(Mo.get(),Hr);break;case"embed":Cs(Hr);break;case"dimensions":case"altsource":case"poster":Ns(Hr,hs.name,Mo.get());break}Mo.set(Ir(Hr.getData()))},initialData:jo})},tr=Un=>({showDialog:()=>{Ml(Un)}}),Ms=Un=>{const Bn=()=>{Ml(Un)};Un.addCommand("mceMedia",Bn)},cu=(Un,Bn,Mo)=>Un.length>=Bn.length&&Un.substr(Mo,Mo+Bn.length)===Bn,ou=(Un,Bn)=>cu(Un,Bn,0);var Yl=tinymce.util.Tools.resolve("tinymce.Env");const xu=Un=>{const Bn=Un.name;return Bn==="iframe"||Bn==="video"||Bn==="audio"},Vs=(Un,Bn,Mo,jo=null)=>{const ss=Un.attr(Mo);return nt(ss)?ss:Mt(Bn,Mo)?null:jo},wu=(Un,Bn,Mo)=>{const jo=Bn.name==="img"||Un.name==="video",ss=jo?"300":null,Cs=Un.name==="audio"?"30":"150",Ns=jo?Cs:null;Bn.attr({width:Vs(Un,Mo,"width",ss),height:Vs(Un,Mo,"height",Ns)})},iu=(Un,Bn,Mo,jo)=>{const ss=no(Un.schema).parse(jo,{context:Bn});for(;ss.firstChild;)Mo.append(ss.firstChild)},ba=(Un,Bn)=>{const Mo=Bn.name,jo=new Wn("img",1);return _a(Un,Bn,jo),wu(Bn,jo,{}),jo.attr({style:Bn.attr("style"),src:Yl.transparentSrc,"data-mce-object":Mo,class:"mce-object mce-object-"+Mo}),jo},Jr=(Un,Bn)=>{var Mo;const jo=Bn.name,ss=new Wn("span",1);ss.attr({contentEditable:"false",style:Bn.attr("style"),"data-mce-object":jo,class:"mce-preview-object mce-object-"+jo}),_a(Un,Bn,ss);const Cs=Un.dom.parseStyle((Mo=Bn.attr("style"))!==null&&Mo!==void 0?Mo:""),Ns=new Wn(jo,1);if(wu(Bn,Ns,Cs),Ns.attr({src:Bn.attr("src"),style:Bn.attr("style"),class:Bn.attr("class")}),jo==="iframe")Ns.attr({allowfullscreen:Bn.attr("allowfullscreen"),frameborder:"0",sandbox:Bn.attr("sandbox"),referrerpolicy:Bn.attr("referrerpolicy")});else{dt(["controls","crossorigin","currentTime","loop","muted","poster","preload"],Kn=>{Ns.attr(Kn,Bn.attr(Kn))});const Ls=ss.attr("data-mce-html");nt(Ls)&&iu(Un,jo,Ns,unescape(Ls))}const Tu=new Wn("span",1);return Tu.attr("class","mce-shim"),ss.append(Ns),ss.append(Tu),ss},_a=(Un,Bn,Mo)=>{var jo;const ss=(jo=Bn.attributes)!==null&&jo!==void 0?jo:[];let Cs=ss.length;for(;Cs--;){const Ls=ss[Cs].name;let Kn=ss[Cs].value;Ls!=="width"&&Ls!=="height"&&Ls!=="style"&&!ou(Ls,"data-mce-")&&((Ls==="data"||Ls==="src")&&(Kn=Un.convertURL(Kn,Ls)),Mo.attr("data-mce-p-"+Ls,Kn))}const Ns=er({inner:!0},Un.schema),Tu=new Wn("div",1);dt(Bn.children(),Ls=>Tu.append(Ls));const ro=Ns.serialize(Tu);ro&&(Mo.attr("data-mce-html",escape(ro)),Mo.empty())},go=Un=>{const Bn=Un.attr("class");return d(Bn)&&/\btiny-pageembed\b/.test(Bn)},Po=Un=>{let Bn=Un;for(;Bn=Bn.parent;)if(Bn.attr("data-ephox-embed-iri")||go(Bn))return!0;return!1},Sr=Un=>Bn=>{let Mo=Bn.length,jo;for(;Mo--;)jo=Bn[Mo],jo.parent&&(jo.parent.attr("data-mce-object")||(xu(jo)&&Jt(Un)?Po(jo)||jo.replace(Jr(Un,jo)):Po(jo)||jo.replace(ba(Un,jo))))},Fr=(Un,Bn,Mo)=>{const jo=Un.options.get,ss=jo("xss_sanitization"),Cs=dn(Un);return no(Un.schema,{sanitize:ss,validate:Cs}).parse(Mo,{context:Bn})},Us=Un=>{Un.on("PreInit",()=>{const{schema:Bn,serializer:Mo,parser:jo}=Un,ss=Bn.getBoolAttrs();dt("webkitallowfullscreen mozallowfullscreen".split(" "),Cs=>{ss[Cs]={}}),Tt({embed:["wmode"]},(Cs,Ns)=>{const Tu=Bn.getElementRule(Ns);Tu&&dt(Cs,ro=>{Tu.attributes[ro]={},Tu.attributesOrder.push(ro)})}),jo.addNodeFilter("iframe,video,audio,object,embed",Sr(Un)),Mo.addAttributeFilter("data-mce-object",(Cs,Ns)=>{var Tu;let ro=Cs.length;for(;ro--;){const Ls=Cs[ro];if(!Ls.parent)continue;const Kn=Ls.attr(Ns),eo=new Wn(Kn,1);if(Kn!=="audio"){const Qr=Ls.attr("class");Qr&&Qr.indexOf("mce-preview-object")!==-1&&Ls.firstChild?eo.attr({width:Ls.firstChild.attr("width"),height:Ls.firstChild.attr("height")}):eo.attr({width:Ls.attr("width"),height:Ls.attr("height")})}eo.attr({style:Ls.attr("style")});const nr=(Tu=Ls.attributes)!==null&&Tu!==void 0?Tu:[];let lr=nr.length;for(;lr--;){const Qr=nr[lr].name;Qr.indexOf("data-mce-p-")===0&&eo.attr(Qr.substr(11),nr[lr].value)}const Rr=Ls.attr("data-mce-html");if(Rr){const Qr=Fr(Un,Kn,unescape(Rr));dt(Qr.children(),es=>eo.append(es))}Ls.replace(eo)}})}),Un.on("SetContent",()=>{const Bn=Un.dom;dt(Bn.select("span.mce-preview-object"),Mo=>{Bn.select("span.mce-shim",Mo).length===0&&Bn.add(Mo,"span",{class:"mce-shim"})})})},xa=Un=>{Un.on("ResolveName",Bn=>{let Mo;Bn.target.nodeType===1&&(Mo=Bn.target.getAttribute("data-mce-object"))&&(Bn.name=Mo)})},ju=Un=>Bn=>{const Mo=()=>{Bn.setEnabled(Un.selection.isEditable())};return Un.on("NodeChange",Mo),Mo(),()=>{Un.off("NodeChange",Mo)}},Uu=Un=>{const Bn=()=>Un.execCommand("mceMedia");Un.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:Bn,onSetup:Mo=>{const jo=Un.selection;Mo.setActive(Nn(jo.getNode()));const ss=jo.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Mo.setActive).unbind,Cs=ju(Un)(Mo);return()=>{ss(),Cs()}}}),Un.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:Bn,onSetup:ju(Un)})};var Au=()=>{o.add("media",Un=>($t(Un),Ms(Un),Uu(Un),xa(Un),Us(Un),zn(Un),tr(Un)))};Au()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=Rt=>Mt=>typeof Mt===Rt,s=e("boolean"),a=e("number"),d=Rt=>Mt=>Mt.options.get(Rt),b=Rt=>{const Mt=Rt.options.register;Mt("nonbreaking_force_tab",{processor:Et=>s(Et)?{value:Et?3:0,valid:!0}:a(Et)?{value:Et,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),Mt("nonbreaking_wrap",{processor:"boolean",default:!0})},_=d("nonbreaking_force_tab"),_e=d("nonbreaking_wrap"),nt=(Rt,Mt)=>{let Et="";for(let $t=0;$t<Mt;$t++)Et+=Rt;return Et},rt=Rt=>Rt.plugins.visualchars?Rt.plugins.visualchars.isEnabled():!1,ct=(Rt,Mt)=>{const Et=()=>rt(Rt)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap",$t=()=>`<span class="${Et()}" contenteditable="false">${nt("&nbsp;",Mt)}</span>`,Zt=_e(Rt)||Rt.plugins.visualchars?$t():nt("&nbsp;",Mt);Rt.undoManager.transact(()=>Rt.insertContent(Zt))},dt=Rt=>{Rt.addCommand("mceNonBreaking",()=>{ct(Rt,1)})};var pt=tinymce.util.Tools.resolve("tinymce.util.VK");const bt=Rt=>{const Mt=_(Rt);Mt>0&&Rt.on("keydown",Et=>{if(Et.keyCode===pt.TAB&&!Et.isDefaultPrevented()){if(Et.shiftKey)return;Et.preventDefault(),Et.stopImmediatePropagation(),ct(Rt,Mt)}})},xt=Rt=>Mt=>{const Et=()=>{Mt.setEnabled(Rt.selection.isEditable())};return Rt.on("NodeChange",Et),Et(),()=>{Rt.off("NodeChange",Et)}},wt=Rt=>{const Mt=()=>Rt.execCommand("mceNonBreaking");Rt.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:Mt,onSetup:xt(Rt)}),Rt.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:Mt,onSetup:xt(Rt)})};var Tt=()=>{o.add("nonbreaking",Rt=>{b(Rt),dt(Rt),wt(Rt),bt(Rt)})};Tt()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.Env");const s=xt=>wt=>wt.options.get(xt),a=xt=>{const wt=xt.options.register;wt("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),wt("pagebreak_split_block",{processor:"boolean",default:!1})},d=s("pagebreak_separator"),b=s("pagebreak_split_block"),_="mce-pagebreak",_e=xt=>{const wt=`<img src="${e.transparentSrc}" class="${_}" data-mce-resize="false" data-mce-placeholder />`;return xt?`<p>${wt}</p>`:wt},nt=xt=>{const wt=d(xt),Tt=()=>b(xt),Rt=new RegExp(wt.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,Mt=>"\\"+Mt),"gi");xt.on("BeforeSetContent",Mt=>{Mt.content=Mt.content.replace(Rt,_e(Tt()))}),xt.on("PreInit",()=>{xt.serializer.addNodeFilter("img",Mt=>{let Et=Mt.length,$t,Xt;for(;Et--;)if($t=Mt[Et],Xt=$t.attr("class"),Xt&&Xt.indexOf(_)!==-1){const Zt=$t.parent;if(Zt&&xt.schema.getBlockElements()[Zt.name]&&Tt()){Zt.type=3,Zt.value=wt,Zt.raw=!0,$t.remove();continue}$t.type=3,$t.value=wt,$t.raw=!0}})})},rt=xt=>{xt.addCommand("mcePageBreak",()=>{xt.insertContent(_e(b(xt)))})},ct=xt=>{xt.on("ResolveName",wt=>{wt.target.nodeName==="IMG"&&xt.dom.hasClass(wt.target,_)&&(wt.name="pagebreak")})},dt=xt=>wt=>{const Tt=()=>{wt.setEnabled(xt.selection.isEditable())};return xt.on("NodeChange",Tt),Tt(),()=>{xt.off("NodeChange",Tt)}},pt=xt=>{const wt=()=>xt.execCommand("mcePageBreak");xt.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:wt,onSetup:dt(xt)}),xt.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:wt,onSetup:dt(xt)})};var bt=()=>{o.add("pagebreak",xt=>{a(xt),rt(xt),pt(xt),nt(xt),ct(xt)})};bt()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.Env"),s=tinymce.util.Tools.resolve("tinymce.util.Tools");const a=bt=>xt=>xt.options.get(bt),d=a("content_style"),b=a("content_css_cors"),_=a("body_class"),_e=a("body_id"),nt=bt=>{var xt;let wt="";const Tt=bt.dom.encode,Rt=(xt=d(bt))!==null&&xt!==void 0?xt:"";wt+='<base href="'+Tt(bt.documentBaseURI.getURI())+'">';const Mt=b(bt)?' crossorigin="anonymous"':"";s.each(bt.contentCSS,Pn=>{wt+='<link type="text/css" rel="stylesheet" href="'+Tt(bt.documentBaseURI.toAbsolute(Pn))+'"'+Mt+">"}),Rt&&(wt+='<style type="text/css">'+Rt+"</style>");const Et=_e(bt),$t=_(bt),Zt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(e.os.isMacOS()||e.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",Nt=bt.getBody().dir,Jt=Nt?' dir="'+Tt(Nt)+'"':"";return"<!DOCTYPE html><html><head>"+wt+'</head><body id="'+Tt(Et)+'" class="mce-content-body '+Tt($t)+'"'+Jt+">"+bt.getContent()+Zt+"</body></html>"},rt=bt=>{const xt=nt(bt);bt.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:xt}}).focus("close")},ct=bt=>{bt.addCommand("mcePreview",()=>{rt(bt)})},dt=bt=>{const xt=()=>bt.execCommand("mcePreview");bt.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:xt,context:"any"}),bt.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:xt,context:"any"})};var pt=()=>{o.add("preview",bt=>{ct(bt),dt(bt)})};pt()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(mo,Co,mn)=>{var wn;return mn(mo,Co.prototype)?!0:((wn=mo.constructor)===null||wn===void 0?void 0:wn.name)===Co.name},s=mo=>{const Co=typeof mo;return mo===null?"null":Co==="object"&&Array.isArray(mo)?"array":Co==="object"&&e(mo,String,(mn,wn)=>wn.isPrototypeOf(mn))?"string":Co},a=mo=>Co=>s(Co)===mo,d=mo=>Co=>typeof Co===mo,b=a("string"),_=d("boolean"),_e=mo=>mo==null,nt=mo=>!_e(mo),rt=d("function"),ct=mo=>Co=>Co.options.get(mo),dt=mo=>{const Co=mo.options.register,mn=Cn=>Nn=>{const zn=_(Nn)||b(Nn);return zn?_(Nn)?{value:Nn?Cn:"",valid:zn}:{value:Nn.trim(),valid:zn}:{valid:!1,message:"Must be a boolean or string."}},wn="bold italic | quicklink h2 h3 blockquote";Co("quickbars_selection_toolbar",{processor:mn(wn),default:wn});const Dn="quickimage quicktable";Co("quickbars_insert_toolbar",{processor:mn(Dn),default:Dn});const rn="alignleft aligncenter alignright";Co("quickbars_image_toolbar",{processor:mn(rn),default:rn})},pt=ct("quickbars_selection_toolbar"),bt=ct("quickbars_insert_toolbar"),xt=ct("quickbars_image_toolbar"),wt=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Tt=0;const Rt=mo=>{const mn=new Date().getTime(),wn=Math.floor(wt()*1e9);return Tt++,mo+"_"+wn+Tt+String(mn)},Mt=(mo,Co,mn)=>{mo.execCommand("mceInsertTable",!1,{rows:mn,columns:Co})},Et=(mo,Co,mn)=>{const wn=mo.editorUpload.blobCache,Dn=wn.create(Rt("mceu"),mn,Co);wn.add(Dn),mo.insertContent(mo.dom.createHTML("img",{src:Dn.blobUri()}))},$t=mo=>new Promise(Co=>{const mn=new FileReader;mn.onloadend=()=>{Co(mn.result.split(",")[1])},mn.readAsDataURL(mo)});var Xt=tinymce.util.Tools.resolve("tinymce.util.Delay");const Zt=mo=>new Promise(Co=>{let mn=!1;const wn=document.createElement("input");wn.type="file",wn.accept="image/*",wn.style.position="fixed",wn.style.left="0",wn.style.top="0",wn.style.opacity="0.001",document.body.appendChild(wn);const Dn=Nn=>{var zn;mn||((zn=wn.parentNode)===null||zn===void 0||zn.removeChild(wn),mn=!0,Co(Nn))},rn=Nn=>{Dn(Array.prototype.slice.call(Nn.target.files))};wn.addEventListener("input",rn),wn.addEventListener("change",rn);const Cn=Nn=>{const zn=()=>{Dn([])};mn||(Nn.type==="focusin"?Xt.setEditorTimeout(mo,zn,1e3):zn()),mo.off("focusin remove",Cn)};mo.on("focusin remove",Cn),wn.click()}),Nt=mo=>{mo.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{Zt(mo).then(Co=>{if(Co.length>0){const mn=Co[0];$t(mn).then(wn=>{Et(mo,wn,mn)})}})}}),mo.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{Mt(mo,2,2)}})},dn=(mo=>()=>mo)(!1);class Pn{constructor(Co,mn){this.tag=Co,this.value=mn}static some(Co){return new Pn(!0,Co)}static none(){return Pn.singletonNone}fold(Co,mn){return this.tag?mn(this.value):Co()}isSome(){return this.tag}isNone(){return!this.tag}map(Co){return this.tag?Pn.some(Co(this.value)):Pn.none()}bind(Co){return this.tag?Co(this.value):Pn.none()}exists(Co){return this.tag&&Co(this.value)}forall(Co){return!this.tag||Co(this.value)}filter(Co){return!this.tag||Co(this.value)?this:Pn.none()}getOr(Co){return this.tag?this.value:Co}or(Co){return this.tag?this:Co}getOrThunk(Co){return this.tag?this.value:Co()}orThunk(Co){return this.tag?this:Co()}getOrDie(Co){if(this.tag)return this.value;throw new Error(Co??"Called getOrDie on None")}static from(Co){return nt(Co)?Pn.some(Co):Pn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Co){this.tag&&Co(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Pn.singletonNone=new Pn(!1),typeof window<"u"||Function("return this;")();const an=1,Vt=mo=>mo.dom.nodeName.toLowerCase(),ao=(mo,Co)=>{const mn=mo.dom;return mn&&mn.hasAttribute?mn.hasAttribute(Co):!1};var hn=(mo,Co,mn,wn,Dn)=>mo(mn,wn)?Pn.some(mn):rt(Dn)&&Dn(mn)?Pn.none():Co(mn,wn,Dn);const fn=(mo,Co)=>{const wn=(Co||document).createElement("div");if(wn.innerHTML=mo,!wn.hasChildNodes()||wn.childNodes.length>1){const Dn="HTML does not have a single root node";throw console.error(Dn,mo),new Error(Dn)}return ln(wn.childNodes[0])},It=(mo,Co)=>{const wn=(Co||document).createElement(mo);return ln(wn)},Vn=(mo,Co)=>{const wn=(Co||document).createTextNode(mo);return ln(wn)},ln=mo=>{if(mo==null)throw new Error("Node cannot be null or undefined");return{dom:mo}},Ln={fromHtml:fn,fromTag:It,fromText:Vn,fromDom:ln,fromPoint:(mo,Co,mn)=>Pn.from(mo.dom.elementFromPoint(Co,mn)).map(ln)},An=(mo,Co)=>{const mn=mo.dom;if(mn.nodeType!==an)return!1;{const wn=mn;if(wn.matches!==void 0)return wn.matches(Co);if(wn.msMatchesSelector!==void 0)return wn.msMatchesSelector(Co);if(wn.webkitMatchesSelector!==void 0)return wn.webkitMatchesSelector(Co);if(wn.mozMatchesSelector!==void 0)return wn.mozMatchesSelector(Co);throw new Error("Browser lacks native selectors")}},Wn=(mo,Co,mn)=>{let wn=mo.dom;const Dn=rt(mn)?mn:dn;for(;wn.parentNode;){wn=wn.parentNode;const rn=Ln.fromDom(wn);if(Co(rn))return Pn.some(rn);if(Dn(rn))break}return Pn.none()},er=(mo,Co,mn)=>hn((Dn,rn)=>rn(Dn),Wn,mo,Co,mn),no=(mo,Co,mn)=>er(mo,Co,mn).isSome(),Ro=(mo,Co,mn)=>Wn(mo,wn=>An(wn,Co),mn),On=(mo,Co,mn)=>hn((Dn,rn)=>An(Dn,rn),Ro,mo,Co,mn),_o=mo=>{const Co=bt(mo);Co.length>0&&mo.ui.registry.addContextToolbar("quickblock",{predicate:mn=>{const wn=Ln.fromDom(mn),Dn=mo.schema.getTextBlockElements(),rn=Cn=>Cn.dom===mo.getBody();return!ao(wn,"data-mce-bogus")&&On(wn,'table,[data-mce-bogus="all"]',rn).fold(()=>no(wn,Cn=>Vt(Cn)in Dn&&mo.dom.isEmpty(Cn.dom),rn),dn)},items:Co,position:"line",scope:"editor"})},Yt=mo=>mo.dom.classList!==void 0,jr=(mo,Co)=>Yt(mo)&&mo.dom.classList.contains(Co),lo=mo=>{const Co=Cn=>mo.dom.isEditable(Cn),mn=Cn=>Co(Cn.parentElement),wn=Cn=>{const Nn=Cn.nodeName==="FIGURE"&&/image/i.test(Cn.className),zn=Cn.nodeName==="IMG"||Nn,So=jr(Ln.fromDom(Cn),"mce-pagebreak");return zn&&mn(Cn)&&!So},Dn=xt(mo);Dn.length>0&&mo.ui.registry.addContextToolbar("imageselection",{predicate:wn,items:Dn,position:"node"});const rn=pt(mo);rn.length>0&&mo.ui.registry.addContextToolbar("textselection",{predicate:Cn=>!wn(Cn)&&!mo.selection.isCollapsed()&&Co(Cn),items:rn,position:"selection",scope:"editor"})};var Ho=()=>{o.add("quickbars",mo=>{dt(mo),Nt(mo),_o(mo),lo(mo)})};Ho()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=(Rt=>Mt=>typeof Mt===Rt)("function");var a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),d=tinymce.util.Tools.resolve("tinymce.util.Tools");const b=Rt=>Mt=>Mt.options.get(Rt),_=Rt=>{const Mt=Rt.options.register;Mt("save_enablewhendirty",{processor:"boolean",default:!0}),Mt("save_onsavecallback",{processor:"function"}),Mt("save_oncancelcallback",{processor:"function"})},_e=b("save_enablewhendirty"),nt=b("save_onsavecallback"),rt=b("save_oncancelcallback"),ct=(Rt,Mt)=>{Rt.notificationManager.open({text:Mt,type:"error"})},dt=Rt=>{const Mt=a.DOM.getParent(Rt.id,"form");if(_e(Rt)&&!Rt.isDirty())return;Rt.save();const Et=nt(Rt);if(s(Et)){Et.call(Rt,Rt),Rt.nodeChanged();return}Mt?(Rt.setDirty(!1),(!Mt.onsubmit||Mt.onsubmit())&&(typeof Mt.submit=="function"?Mt.submit():ct(Rt,"Error: Form submit field collision.")),Rt.nodeChanged()):ct(Rt,"Error: No form element found.")},pt=Rt=>{const Mt=d.trim(Rt.startContent),Et=rt(Rt);if(s(Et)){Et.call(Rt,Rt);return}Rt.resetContent(Mt)},bt=Rt=>{Rt.addCommand("mceSave",()=>{dt(Rt)}),Rt.addCommand("mceCancel",()=>{pt(Rt)})},xt=Rt=>Mt=>{const Et=()=>{Mt.setEnabled(!_e(Rt)||Rt.isDirty())};return Et(),Rt.on("NodeChange dirty",Et),()=>Rt.off("NodeChange dirty",Et)},wt=Rt=>{Rt.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>Rt.execCommand("mceSave"),onSetup:xt(Rt),shortcut:"Meta+S"}),Rt.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>Rt.execCommand("mceCancel"),onSetup:xt(Rt)}),Rt.addShortcut("Meta+S","","mceSave")};var Tt=()=>{o.add("save",Rt=>{_(Rt),wt(Rt),bt(Rt)})};Tt()})();(function(){const o=Kn=>{let eo=Kn;return{get:()=>eo,set:Rr=>{eo=Rr}}};var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=(Kn,eo,nr)=>{var lr;return nr(Kn,eo.prototype)?!0:((lr=Kn.constructor)===null||lr===void 0?void 0:lr.name)===eo.name},a=Kn=>{const eo=typeof Kn;return Kn===null?"null":eo==="object"&&Array.isArray(Kn)?"array":eo==="object"&&s(Kn,String,(nr,lr)=>lr.isPrototypeOf(nr))?"string":eo},d=Kn=>eo=>a(eo)===Kn,b=Kn=>eo=>typeof eo===Kn,_=d("string"),_e=d("array"),nt=b("boolean"),rt=Kn=>Kn==null,ct=Kn=>!rt(Kn),dt=b("number"),pt=()=>{},bt=Kn=>()=>Kn,xt=bt(!0),Tt=bt("[~|!-*+-\\/:;?@\\[-`{};----------------------------------------------]");class Rt{constructor(eo,nr){this.tag=eo,this.value=nr}static some(eo){return new Rt(!0,eo)}static none(){return Rt.singletonNone}fold(eo,nr){return this.tag?nr(this.value):eo()}isSome(){return this.tag}isNone(){return!this.tag}map(eo){return this.tag?Rt.some(eo(this.value)):Rt.none()}bind(eo){return this.tag?eo(this.value):Rt.none()}exists(eo){return this.tag&&eo(this.value)}forall(eo){return!this.tag||eo(this.value)}filter(eo){return!this.tag||eo(this.value)?this:Rt.none()}getOr(eo){return this.tag?this.value:eo}or(eo){return this.tag?this:eo}getOrThunk(eo){return this.tag?this.value:eo()}orThunk(eo){return this.tag?this:eo()}getOrDie(eo){if(this.tag)return this.value;throw new Error(eo??"Called getOrDie on None")}static from(eo){return ct(eo)?Rt.some(eo):Rt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(eo){this.tag&&eo(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Rt.singletonNone=new Rt(!1);const Mt=Tt;var Et=tinymce.util.Tools.resolve("tinymce.Env"),$t=tinymce.util.Tools.resolve("tinymce.util.Tools");const Xt=Array.prototype.slice,Zt=Array.prototype.push,Nt=(Kn,eo)=>{const nr=Kn.length,lr=new Array(nr);for(let Rr=0;Rr<nr;Rr++){const Qr=Kn[Rr];lr[Rr]=eo(Qr,Rr)}return lr},Jt=(Kn,eo)=>{for(let nr=0,lr=Kn.length;nr<lr;nr++){const Rr=Kn[nr];eo(Rr,nr)}},dn=(Kn,eo)=>{for(let nr=Kn.length-1;nr>=0;nr--){const lr=Kn[nr];eo(lr,nr)}},Pn=(Kn,eo)=>{if(Kn.length===0)return[];{let nr=eo(Kn[0]);const lr=[];let Rr=[];for(let Qr=0,es=Kn.length;Qr<es;Qr++){const Hr=Kn[Qr],hs=eo(Hr);hs!==nr&&(lr.push(Rr),Rr=[]),nr=hs,Rr.push(Hr)}return Rr.length!==0&&lr.push(Rr),lr}},an=(Kn,eo,nr)=>(Jt(Kn,(lr,Rr)=>{nr=eo(nr,lr,Rr)}),nr),Vt=Kn=>{const eo=[];for(let nr=0,lr=Kn.length;nr<lr;++nr){if(!_e(Kn[nr]))throw new Error("Arr.flatten item "+nr+" was not an array, input: "+Kn);Zt.apply(eo,Kn[nr])}return eo},ao=(Kn,eo)=>Vt(Nt(Kn,eo)),hn=(Kn,eo)=>{const nr=Xt.call(Kn,0);return nr.sort(eo),nr},fn=Object.hasOwnProperty,It=(Kn,eo)=>fn.call(Kn,eo);typeof window<"u"||Function("return this;")();const Vn=9,ln=11,uo=1,Ln=3,An=Kn=>Kn.dom.nodeType,er=(Kn=>eo=>An(eo)===Kn)(Ln),no=(Kn,eo,nr)=>{if(_(nr)||nt(nr)||dt(nr))Kn.setAttribute(eo,nr+"");else throw console.error("Invalid call to Attribute.set. Key ",eo,":: Value ",nr,":: Element ",Kn),new Error("Attribute value was not simple")},Ro=(Kn,eo,nr)=>{no(Kn.dom,eo,nr)},On=(Kn,eo)=>{const lr=(eo||document).createElement("div");if(lr.innerHTML=Kn,!lr.hasChildNodes()||lr.childNodes.length>1){const Rr="HTML does not have a single root node";throw console.error(Rr,Kn),new Error(Rr)}return jr(lr.childNodes[0])},_o=(Kn,eo)=>{const lr=(eo||document).createElement(Kn);return jr(lr)},Yt=(Kn,eo)=>{const lr=(eo||document).createTextNode(Kn);return jr(lr)},jr=Kn=>{if(Kn==null)throw new Error("Node cannot be null or undefined");return{dom:Kn}},Ho={fromHtml:On,fromTag:_o,fromText:Yt,fromDom:jr,fromPoint:(Kn,eo,nr)=>Rt.from(Kn.dom.elementFromPoint(eo,nr)).map(jr)},mo=Kn=>Kn.nodeType!==uo&&Kn.nodeType!==Vn&&Kn.nodeType!==ln||Kn.childElementCount===0,Co=(Kn,eo)=>{const nr=eo===void 0?document:eo.dom;return mo(nr)?[]:Nt(nr.querySelectorAll(Kn),Ho.fromDom)},mn=Kn=>Rt.from(Kn.dom.parentNode).map(Ho.fromDom),wn=Kn=>Nt(Kn.dom.childNodes,Ho.fromDom),Dn=(Kn,eo)=>({element:Kn,offset:eo}),rn=(Kn,eo)=>{const nr=wn(Kn);return nr.length>0&&eo<nr.length?Dn(nr[eo],0):Dn(Kn,eo)},Cn=(Kn,eo)=>{mn(Kn).each(lr=>{lr.dom.insertBefore(eo.dom,Kn.dom)})},Nn=(Kn,eo)=>{Kn.dom.appendChild(eo.dom)},zn=(Kn,eo)=>{Cn(Kn,eo),Nn(eo,Kn)},Hn=((Kn,eo)=>{const nr=Qr=>{if(!Kn(Qr))throw new Error("Can only get "+eo+" value of a "+eo+" node");return lr(Qr).getOr("")},lr=Qr=>Kn(Qr)?Rt.from(Qr.dom.nodeValue):Rt.none();return{get:nr,getOption:lr,set:(Qr,es)=>{if(!Kn(Qr))throw new Error("Can only set raw "+eo+" value of a "+eo+" node");Qr.dom.nodeValue=es}}})(er,"text"),Tn=Kn=>Hn.get(Kn),Jn=(Kn,eo,nr)=>(Kn.compareDocumentPosition(eo)&nr)!==0,bo=(Kn,eo)=>Jn(Kn,eo,Node.DOCUMENT_POSITION_PRECEDING),$n=(Kn,eo)=>Co(eo,Kn);var oo=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const wo=(Kn,eo)=>Kn.isBlock(eo)||It(Kn.schema.getVoidElements(),eo.nodeName),Oo=(Kn,eo)=>!Kn.isEditable(eo),Ir=(Kn,eo)=>Kn.getContentEditable(eo)==="true"&&eo.parentNode&&!Kn.isEditable(eo.parentNode),sr=(Kn,eo)=>!Kn.isBlock(eo)&&It(Kn.schema.getWhitespaceElements(),eo.nodeName),vr=(Kn,eo)=>wo(Kn,eo)||Oo(Kn,eo)||sr(Kn,eo)||Ir(Kn,eo),as=Kn=>Kn.nodeType===3,_r=()=>({sOffset:0,fOffset:0,elements:[]}),fs=(Kn,eo)=>rn(Ho.fromDom(Kn),eo),Ss=(Kn,eo,nr,lr,Rr,Qr=!0)=>{let es=Qr?eo(!1):nr;for(;es;){const Hr=Oo(Kn,es);if(Hr||sr(Kn,es)){if(Hr?lr.cef(es):lr.boundary(es))break;es=eo(!0);continue}else if(wo(Kn,es)){if(lr.boundary(es))break}else as(es)&&lr.text(es);if(es===Rr)break;es=eo(!1)}},As=(Kn,eo,nr,lr,Rr)=>{var Qr;if(vr(Kn,nr))return;const es=(Qr=Kn.getParent(lr,Kn.isBlock))!==null&&Qr!==void 0?Qr:Kn.getRoot(),Hr=new oo(nr,es),hs=Rr?Hr.next.bind(Hr):Hr.prev.bind(Hr);Ss(Kn,hs,nr,{boundary:xt,cef:xt,text:ks=>{Rr?eo.fOffset+=ks.length:eo.sOffset+=ks.length,eo.elements.push(Ho.fromDom(ks))}})},_l=(Kn,eo,nr,lr,Rr,Qr=!0)=>{const es=new oo(nr,eo),Hr=[];let hs=_r();As(Kn,hs,nr,eo,!1);const ks=()=>(hs.elements.length>0&&(Hr.push(hs),hs=_r()),!1);return Ss(Kn,es.next.bind(es),nr,{boundary:ks,cef:Nl=>(ks(),Rr&&Hr.push(...Rr.cef(Nl)),!1),text:Nl=>{hs.elements.push(Ho.fromDom(Nl)),Rr&&Rr.text(Nl,hs)}},lr,Qr),lr&&As(Kn,hs,lr,eo,!0),ks(),Hr},Zr=(Kn,eo)=>{const nr=fs(eo.startContainer,eo.startOffset),lr=nr.element.dom,Rr=fs(eo.endContainer,eo.endOffset),Qr=Rr.element.dom;return _l(Kn,eo.commonAncestorContainer,lr,Qr,{text:(es,Hr)=>{es===Qr?Hr.fOffset+=es.length-Rr.offset:es===lr&&(Hr.sOffset+=nr.offset)},cef:es=>{const Hr=ao($n(Ho.fromDom(es),"*[contenteditable=true]"),hs=>{const ks=hs.dom;return _l(Kn,ks,ks)});return hn(Hr,(hs,ks)=>bo(hs.elements[0].dom,ks.elements[0].dom)?1:-1)}},!1)},Ml=(Kn,eo)=>eo.collapsed?[]:Zr(Kn,eo),tr=(Kn,eo)=>{const nr=Kn.createRng();return nr.selectNode(eo),Ml(Kn,nr)},Ms=(Kn,eo)=>ao(eo,nr=>tr(Kn,nr)),cu=(Kn,eo,nr=0,lr=Kn.length)=>{const Rr=eo.regex;Rr.lastIndex=nr;const Qr=[];let es;for(;es=Rr.exec(Kn);){const Hr=es[eo.matchIndex],hs=es.index+es[0].indexOf(Hr),ks=hs+Hr.length;if(ks>lr)break;Qr.push({start:hs,finish:ks}),Rr.lastIndex=ks}return Qr},ou=(Kn,eo)=>{const nr=an(Kn,(lr,Rr)=>{const Qr=Tn(Rr),es=lr.last,Hr=es+Qr.length,hs=ao(eo,(ks,Nl)=>ks.start<Hr&&ks.finish>es?[{element:Rr,start:Math.max(es,ks.start)-es,finish:Math.min(Hr,ks.finish)-es,matchId:Nl}]:[]);return{results:lr.results.concat(hs),last:Hr}},{results:[],last:0}).results;return Pn(nr,lr=>lr.matchId)},Yl=(Kn,eo)=>ao(eo,nr=>{const lr=nr.elements,Rr=Nt(lr,Tn).join(""),Qr=cu(Rr,Kn,nr.sOffset,Rr.length-nr.fOffset);return ou(lr,Qr)}),xu=(Kn,eo)=>{dn(Kn,(nr,lr)=>{dn(nr,Rr=>{const Qr=Ho.fromDom(eo.cloneNode(!1));Ro(Qr,"data-mce-index",lr);const es=Rr.element.dom;if(es.length===Rr.finish&&Rr.start===0)zn(Rr.element,Qr);else{es.length!==Rr.finish&&es.splitText(Rr.finish);const Hr=es.splitText(Rr.start);zn(Ho.fromDom(Hr),Qr)}})})},Vs=(Kn,eo,nr,lr)=>{const Rr=tr(Kn,nr),Qr=Yl(eo,Rr);return xu(Qr,lr),Qr.length},wu=(Kn,eo,nr,lr)=>{const Rr=nr.getBookmark(),Qr=Kn.select("td[data-mce-selected],th[data-mce-selected]"),es=Qr.length>0?Ms(Kn,Qr):Ml(Kn,nr.getRng()),Hr=Yl(eo,es);return xu(Hr,lr),nr.moveToBookmark(Rr),Hr.length},iu=Kn=>Kn.getAttribute("data-mce-index"),ba=(Kn,eo,nr,lr)=>{const Rr=Kn.dom.create("span",{"data-mce-bogus":1});Rr.className="mce-match-marker";const Qr=Kn.getBody();return Au(Kn,eo,!1),lr?wu(Kn.dom,nr,Kn.selection,Rr):Vs(Kn.dom,nr,Qr,Rr)},Jr=Kn=>{var eo;const nr=Kn.parentNode;Kn.firstChild&&nr.insertBefore(Kn.firstChild,Kn),(eo=Kn.parentNode)===null||eo===void 0||eo.removeChild(Kn)},_a=(Kn,eo)=>{const nr=[],lr=$t.toArray(Kn.getBody().getElementsByTagName("span"));if(lr.length)for(let Rr=0;Rr<lr.length;Rr++){const Qr=iu(lr[Rr]);Qr===null||!Qr.length||Qr===eo.toString()&&nr.push(lr[Rr])}return nr},go=(Kn,eo,nr)=>{const lr=eo.get();let Rr=lr.index;const Qr=Kn.dom;nr?Rr+1===lr.count?Rr=0:Rr++:Rr-1===-1?Rr=lr.count-1:Rr--,Qr.removeClass(_a(Kn,lr.index),"mce-match-marker-selected");const es=_a(Kn,Rr);return es.length?(Qr.addClass(_a(Kn,Rr),"mce-match-marker-selected"),Kn.selection.scrollIntoView(es[0]),Rr):-1},Po=(Kn,eo)=>{const nr=eo.parentNode;Kn.remove(eo),nr&&Kn.isEmpty(nr)&&Kn.remove(nr)},Sr=(Kn,eo)=>{const lr="("+Kn.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return eo?`(?:^|\\s|${Mt()})`+lr+`(?=$|\\s|${Mt()})`:lr},Fr=(Kn,eo,nr,lr,Rr,Qr)=>{const es=Kn.selection,Hr=Sr(nr,Rr),hs=es.isForward(),ks={regex:new RegExp(Hr,lr?"g":"gi"),matchIndex:1},Nl=ba(Kn,eo,ks,Qr);if(Et.browser.isSafari()&&es.setRng(es.getRng(),hs),Nl){const Xl=go(Kn,eo,!0);eo.set({index:Xl,count:Nl,text:nr,matchCase:lr,wholeWord:Rr,inSelection:Qr})}return Nl},Us=(Kn,eo)=>{const nr=go(Kn,eo,!0);eo.set({...eo.get(),index:nr})},xa=(Kn,eo)=>{const nr=go(Kn,eo,!1);eo.set({...eo.get(),index:nr})},ju=Kn=>{const eo=iu(Kn);return eo!==null&&eo.length>0},Uu=(Kn,eo,nr,lr,Rr)=>{const Qr=eo.get(),es=Qr.index;let Hr,hs=es;lr=lr!==!1;const ks=Kn.getBody(),Nl=$t.grep($t.toArray(ks.getElementsByTagName("span")),ju);for(let Xl=0;Xl<Nl.length;Xl++){const uu=iu(Nl[Xl]);let Kp=Hr=parseInt(uu,10);if(Rr||Kp===Qr.index){for(nr.length?(Nl[Xl].innerText=nr,Jr(Nl[Xl])):Po(Kn.dom,Nl[Xl]);Nl[++Xl];)if(Kp=parseInt(iu(Nl[Xl]),10),Kp===Hr)Po(Kn.dom,Nl[Xl]);else{Xl--;break}lr&&hs--}else Hr>es&&Nl[Xl].setAttribute("data-mce-index",String(Hr-1))}return eo.set({...Qr,count:Rr?0:Qr.count-1,index:hs}),lr?Us(Kn,eo):xa(Kn,eo),!Rr&&eo.get().count>0},Au=(Kn,eo,nr)=>{let lr,Rr;const Qr=eo.get(),es=$t.toArray(Kn.getBody().getElementsByTagName("span"));for(let Hr=0;Hr<es.length;Hr++){const hs=iu(es[Hr]);hs!==null&&hs.length&&(hs===Qr.index.toString()&&(lr||(lr=es[Hr].firstChild),Rr=es[Hr].firstChild),Jr(es[Hr]))}if(eo.set({...Qr,index:-1,count:0,text:""}),lr&&Rr){const Hr=Kn.dom.createRng();return Hr.setStart(lr,0),Hr.setEnd(Rr,Rr.data.length),nr!==!1&&Kn.selection.setRng(Hr),Hr}else return},Un=(Kn,eo)=>eo.get().count>1,Bn=(Kn,eo)=>eo.get().count>1,Mo=(Kn,eo)=>({done:Hr=>Au(Kn,eo,Hr),find:(Hr,hs,ks,Nl=!1)=>Fr(Kn,eo,Hr,hs,ks,Nl),next:()=>Us(Kn,eo),prev:()=>xa(Kn,eo),replace:(Hr,hs,ks)=>Uu(Kn,eo,Hr,hs,ks)}),jo=Kn=>{const eo=o(Rt.none()),nr=()=>eo.get().each(Kn);return{clear:()=>{nr(),eo.set(Rt.none())},isSet:()=>eo.get().isSome(),get:()=>eo.get(),set:Hr=>{nr(),eo.set(Rt.some(Hr))}}},ss=()=>{const Kn=jo(pt);return{...Kn,on:nr=>Kn.get().each(nr)}},Cs=(Kn,eo)=>{const nr=ss();Kn.undoManager.add();const lr=$t.trim(Kn.selection.getContent({format:"text"})),Rr=_s=>{_s.setEnabled("next",Un(Kn,eo)),_s.setEnabled("prev",Bn(Kn,eo))},Qr=_s=>{const Al=_s.getData(),Pl=eo.get();eo.set({...Pl,matchCase:Al.matchcase,wholeWord:Al.wholewords,inSelection:Al.inselection})},es=(_s,Al)=>{Jt(["replace","replaceall","prev","next"],Cp=>_s.setEnabled(Cp,!Al))},Hr=(_s,Al)=>{Al.redial(sm(_s,Al.getData()))},hs=(_s,Al)=>{Et.browser.isSafari()&&Et.deviceType.isTouch()&&(Al==="find"||Al==="replace"||Al==="replaceall")&&_s.focus(Al)},ks=_s=>{Au(Kn,eo,!1),es(_s,!0),Rr(_s)},Nl=_s=>{const Al=_s.getData(),Pl=eo.get();if(!Al.findtext.length){ks(_s);return}if(Pl.text===Al.findtext&&Pl.matchCase===Al.matchcase&&Pl.wholeWord===Al.wholewords)Us(Kn,eo);else{const wp=Fr(Kn,eo,Al.findtext,Al.matchcase,Al.wholewords,Al.inselection);wp<=0&&Hr(!0,_s),es(_s,wp===0)}Rr(_s)},Xl=eo.get(),uu={findtext:lr,replacetext:"",wholewords:Xl.wholeWord,matchcase:Xl.matchCase,inselection:Xl.inSelection},Kp=_s=>{const Al=[{type:"label",label:"Find",for:"findtext",items:[{type:"bar",items:[{type:"input",name:"findtext",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]}]},{type:"input",name:"replacetext",label:"Replace with",inputMode:"search"}];return _s&&Al.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),Al},sm=(_s,Al)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:Kp(_s)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:Al,onChange:(Pl,wp)=>{_s&&Hr(!1,Pl),wp.name==="findtext"&&eo.get().count>0&&ks(Pl)},onAction:(Pl,wp)=>{const Cp=Pl.getData();switch(wp.name){case"find":Nl(Pl);break;case"replace":Uu(Kn,eo,Cp.replacetext)?Rr(Pl):ks(Pl);break;case"replaceall":Uu(Kn,eo,Cp.replacetext,!0,!0),ks(Pl);break;case"prev":xa(Kn,eo),Rr(Pl);break;case"next":Us(Kn,eo),Rr(Pl);break;case"matchcase":case"wholewords":case"inselection":Hr(!1,Pl),Qr(Pl),ks(Pl);break}hs(Pl,wp.name)},onSubmit:Pl=>{Nl(Pl),hs(Pl,"find")},onClose:()=>{Kn.focus(),Au(Kn,eo),Kn.undoManager.add()}});nr.set(Kn.windowManager.open(sm(!1,uu),{inline:"toolbar"}))},Ns=(Kn,eo)=>{Kn.addCommand("SearchReplace",()=>{Cs(Kn,eo)})},Tu=(Kn,eo)=>()=>{Cs(Kn,eo)},ro=(Kn,eo)=>{Kn.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:Tu(Kn,eo),icon:"search"}),Kn.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:Tu(Kn,eo),icon:"search",shortcut:"Meta+F"}),Kn.shortcuts.add("Meta+F","",Tu(Kn,eo))};var Ls=()=>{e.add("searchreplace",Kn=>{const eo=o({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return Ns(Kn,eo),ro(Kn,eo),Mo(Kn,eo)})};Ls()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(Pt,Bt,tn)=>{var _n;return tn(Pt,Bt.prototype)?!0:((_n=Pt.constructor)===null||_n===void 0?void 0:_n.name)===Bt.name},s=Pt=>{const Bt=typeof Pt;return Pt===null?"null":Bt==="object"&&Array.isArray(Pt)?"array":Bt==="object"&&e(Pt,String,(tn,_n)=>_n.isPrototypeOf(tn))?"string":Bt},a=Pt=>Bt=>s(Bt)===Pt,d=Pt=>Bt=>typeof Bt===Pt,b=Pt=>Bt=>Pt===Bt,_=a("string"),_e=a("array"),nt=d("boolean"),rt=b(void 0),ct=Pt=>Pt==null,dt=Pt=>!ct(Pt),pt=d("function"),bt=d("number"),xt=()=>{},wt=(Pt,Bt)=>tn=>Pt(Bt(tn)),Tt=Pt=>()=>Pt,Rt=Pt=>Pt,Mt=(Pt,Bt)=>Pt===Bt;function Et(Pt,...Bt){return(...tn)=>{const _n=Bt.concat(tn);return Pt.apply(null,_n)}}const $t=Pt=>{Pt()},Xt=Tt(!1),Zt=Tt(!0);class Nt{constructor(Bt,tn){this.tag=Bt,this.value=tn}static some(Bt){return new Nt(!0,Bt)}static none(){return Nt.singletonNone}fold(Bt,tn){return this.tag?tn(this.value):Bt()}isSome(){return this.tag}isNone(){return!this.tag}map(Bt){return this.tag?Nt.some(Bt(this.value)):Nt.none()}bind(Bt){return this.tag?Bt(this.value):Nt.none()}exists(Bt){return this.tag&&Bt(this.value)}forall(Bt){return!this.tag||Bt(this.value)}filter(Bt){return!this.tag||Bt(this.value)?this:Nt.none()}getOr(Bt){return this.tag?this.value:Bt}or(Bt){return this.tag?this:Bt}getOrThunk(Bt){return this.tag?this.value:Bt()}orThunk(Bt){return this.tag?this:Bt()}getOrDie(Bt){if(this.tag)return this.value;throw new Error(Bt??"Called getOrDie on None")}static from(Bt){return dt(Bt)?Nt.some(Bt):Nt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Bt){this.tag&&Bt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Nt.singletonNone=new Nt(!1);const Jt=Object.keys,dn=Object.hasOwnProperty,Pn=(Pt,Bt)=>{const tn=Jt(Pt);for(let _n=0,co=tn.length;_n<co;_n++){const Yo=tn[_n],yr=Pt[Yo];Bt(yr,Yo)}},an=Pt=>(Bt,tn)=>{Pt[tn]=Bt},Vt=(Pt,Bt,tn,_n)=>{Pn(Pt,(co,Yo)=>{(Bt(co,Yo)?tn:_n)(co,Yo)})},ao=(Pt,Bt)=>{const tn={};return Vt(Pt,Bt,an(tn),xt),tn},hn=(Pt,Bt)=>{const tn=[];return Pn(Pt,(_n,co)=>{tn.push(Bt(_n,co))}),tn},fn=Pt=>hn(Pt,Rt),It=Pt=>Jt(Pt).length,Vn=(Pt,Bt)=>ln(Pt,Bt)?Nt.from(Pt[Bt]):Nt.none(),ln=(Pt,Bt)=>dn.call(Pt,Bt),uo=(Pt,Bt)=>ln(Pt,Bt)&&Pt[Bt]!==void 0&&Pt[Bt]!==null,Ln=Pt=>{for(const Bt in Pt)if(dn.call(Pt,Bt))return!1;return!0},An=Array.prototype.indexOf,Wn=Array.prototype.push,er=(Pt,Bt)=>An.call(Pt,Bt),no=(Pt,Bt)=>er(Pt,Bt)>-1,Ro=(Pt,Bt)=>{for(let tn=0,_n=Pt.length;tn<_n;tn++){const co=Pt[tn];if(Bt(co,tn))return!0}return!1},On=(Pt,Bt)=>{const tn=[];for(let _n=0;_n<Pt;_n++)tn.push(Bt(_n));return tn},_o=(Pt,Bt)=>{const tn=Pt.length,_n=new Array(tn);for(let co=0;co<tn;co++){const Yo=Pt[co];_n[co]=Bt(Yo,co)}return _n},Yt=(Pt,Bt)=>{for(let tn=0,_n=Pt.length;tn<_n;tn++){const co=Pt[tn];Bt(co,tn)}},jr=(Pt,Bt)=>{for(let tn=Pt.length-1;tn>=0;tn--){const _n=Pt[tn];Bt(_n,tn)}},lo=(Pt,Bt)=>{const tn=[],_n=[];for(let co=0,Yo=Pt.length;co<Yo;co++){const yr=Pt[co];(Bt(yr,co)?tn:_n).push(yr)}return{pass:tn,fail:_n}},Ho=(Pt,Bt)=>{const tn=[];for(let _n=0,co=Pt.length;_n<co;_n++){const Yo=Pt[_n];Bt(Yo,_n)&&tn.push(Yo)}return tn},mo=(Pt,Bt,tn)=>(jr(Pt,(_n,co)=>{tn=Bt(tn,_n,co)}),tn),Co=(Pt,Bt,tn)=>(Yt(Pt,(_n,co)=>{tn=Bt(tn,_n,co)}),tn),mn=(Pt,Bt,tn)=>{for(let _n=0,co=Pt.length;_n<co;_n++){const Yo=Pt[_n];if(Bt(Yo,_n))return Nt.some(Yo);if(tn(Yo,_n))break}return Nt.none()},wn=(Pt,Bt)=>mn(Pt,Bt,Xt),Dn=Pt=>{const Bt=[];for(let tn=0,_n=Pt.length;tn<_n;++tn){if(!_e(Pt[tn]))throw new Error("Arr.flatten item "+tn+" was not an array, input: "+Pt);Wn.apply(Bt,Pt[tn])}return Bt},rn=(Pt,Bt)=>Dn(_o(Pt,Bt)),Cn=(Pt,Bt)=>{for(let tn=0,_n=Pt.length;tn<_n;++tn){const co=Pt[tn];if(Bt(co,tn)!==!0)return!1}return!0},Nn=(Pt,Bt)=>{const tn={};for(let _n=0,co=Pt.length;_n<co;_n++){const Yo=Pt[_n];tn[String(Yo)]=Bt(Yo,_n)}return tn},zn=(Pt,Bt)=>Bt>=0&&Bt<Pt.length?Nt.some(Pt[Bt]):Nt.none(),So=Pt=>zn(Pt,0),Hn=Pt=>zn(Pt,Pt.length-1),Tn=(Pt,Bt)=>{for(let tn=0;tn<Pt.length;tn++){const _n=Bt(Pt[tn],tn);if(_n.isSome())return _n}return Nt.none()},Jn=8,bo=9,$n=11,oo=1,wo=3,Oo=(Pt,Bt)=>{const _n=(Bt||document).createElement("div");if(_n.innerHTML=Pt,!_n.hasChildNodes()||_n.childNodes.length>1){const co="HTML does not have a single root node";throw console.error(co,Pt),new Error(co)}return vr(_n.childNodes[0])},Ir=(Pt,Bt)=>{const _n=(Bt||document).createElement(Pt);return vr(_n)},sr=(Pt,Bt)=>{const _n=(Bt||document).createTextNode(Pt);return vr(_n)},vr=Pt=>{if(Pt==null)throw new Error("Node cannot be null or undefined");return{dom:Pt}},_r={fromHtml:Oo,fromTag:Ir,fromText:sr,fromDom:vr,fromPoint:(Pt,Bt,tn)=>Nt.from(Pt.dom.elementFromPoint(Bt,tn)).map(vr)},fs=(Pt,Bt)=>{const tn=Pt.dom;if(tn.nodeType!==oo)return!1;{const _n=tn;if(_n.matches!==void 0)return _n.matches(Bt);if(_n.msMatchesSelector!==void 0)return _n.msMatchesSelector(Bt);if(_n.webkitMatchesSelector!==void 0)return _n.webkitMatchesSelector(Bt);if(_n.mozMatchesSelector!==void 0)return _n.mozMatchesSelector(Bt);throw new Error("Browser lacks native selectors")}},Ss=Pt=>Pt.nodeType!==oo&&Pt.nodeType!==bo&&Pt.nodeType!==$n||Pt.childElementCount===0,As=(Pt,Bt)=>{const tn=Bt===void 0?document:Bt.dom;return Ss(tn)?[]:_o(tn.querySelectorAll(Pt),_r.fromDom)},_l=(Pt,Bt)=>{const tn=Bt===void 0?document:Bt.dom;return Ss(tn)?Nt.none():Nt.from(tn.querySelector(Pt)).map(_r.fromDom)},Zr=(Pt,Bt)=>Pt.dom===Bt.dom,Ml=fs;typeof window<"u"||Function("return this;")();const tr=Pt=>Pt.dom.nodeName.toLowerCase(),Ms=Pt=>Pt.dom.nodeType,cu=Pt=>Bt=>Ms(Bt)===Pt,ou=Pt=>Ms(Pt)===Jn||tr(Pt)==="#comment",Yl=cu(oo),xu=cu(wo),Vs=cu(bo),wu=cu($n),iu=Pt=>Bt=>Yl(Bt)&&tr(Bt)===Pt,ba=Pt=>_r.fromDom(Pt.dom.ownerDocument),Jr=Pt=>Vs(Pt)?Pt:ba(Pt),_a=Pt=>Nt.from(Pt.dom.parentNode).map(_r.fromDom),go=(Pt,Bt)=>{const tn=pt(Bt)?Bt:Xt;let _n=Pt.dom;const co=[];for(;_n.parentNode!==null&&_n.parentNode!==void 0;){const Yo=_n.parentNode,yr=_r.fromDom(Yo);if(co.push(yr),tn(yr)===!0)break;_n=Yo}return co},Po=Pt=>Nt.from(Pt.dom.previousSibling).map(_r.fromDom),Sr=Pt=>Nt.from(Pt.dom.nextSibling).map(_r.fromDom),Fr=Pt=>_o(Pt.dom.childNodes,_r.fromDom),Us=(Pt,Bt)=>{const tn=Pt.dom.childNodes;return Nt.from(tn[Bt]).map(_r.fromDom)},xa=Pt=>Us(Pt,0),ju=Pt=>wu(Pt)&&dt(Pt.dom.host),Uu=Pt=>_r.fromDom(Pt.dom.getRootNode()),Au=Pt=>{const Bt=Uu(Pt);return ju(Bt)?Nt.some(Bt):Nt.none()},Un=Pt=>_r.fromDom(Pt.dom.host),Bn=Pt=>{const Bt=xu(Pt)?Pt.dom.parentNode:Pt.dom;if(Bt==null||Bt.ownerDocument===null)return!1;const tn=Bt.ownerDocument;return Au(_r.fromDom(Bt)).fold(()=>tn.body.contains(Bt),wt(Bn,Un))};var Mo=(Pt,Bt,tn,_n,co)=>Pt(tn,_n)?Nt.some(tn):pt(co)&&co(tn)?Nt.none():Bt(tn,_n,co);const jo=(Pt,Bt,tn)=>{let _n=Pt.dom;const co=pt(tn)?tn:Xt;for(;_n.parentNode;){_n=_n.parentNode;const Yo=_r.fromDom(_n);if(Bt(Yo))return Nt.some(Yo);if(co(Yo))break}return Nt.none()},ss=(Pt,Bt,tn)=>Mo((co,Yo)=>Yo(co),jo,Pt,Bt,tn),Cs=(Pt,Bt)=>{const tn=co=>Bt(_r.fromDom(co));return wn(Pt.dom.childNodes,tn).map(_r.fromDom)},Ns=(Pt,Bt,tn)=>jo(Pt,_n=>fs(_n,Bt),tn),Tu=(Pt,Bt)=>Cs(Pt,tn=>fs(tn,Bt)),ro=(Pt,Bt)=>_l(Bt,Pt),Ls=(Pt,Bt,tn)=>Mo((co,Yo)=>fs(co,Yo),Ns,Pt,Bt,tn),Kn=Pt=>Ls(Pt,"[contenteditable]"),eo=(Pt,Bt=!1)=>Bn(Pt)?Pt.dom.isContentEditable:Kn(Pt).fold(Tt(Bt),tn=>nr(tn)==="true"),nr=Pt=>Pt.dom.contentEditable,lr=Pt=>Pt.nodeName.toLowerCase(),Rr=Pt=>_r.fromDom(Pt.getBody()),Qr=Pt=>Bt=>Zr(Bt,Rr(Pt)),es=Pt=>Pt?Pt.replace(/px$/,""):"",Hr=Pt=>/^\d+(\.\d+)?$/.test(Pt)?Pt+"px":Pt,hs=Pt=>_r.fromDom(Pt.selection.getStart()),ks=Pt=>_r.fromDom(Pt.selection.getEnd()),Nl=Pt=>ss(Pt,iu("table")).forall(eo),Xl=(Pt,Bt)=>Ho(Fr(Pt),Bt),uu=(Pt,Bt)=>{let tn=[];return Yt(Fr(Pt),_n=>{Bt(_n)&&(tn=tn.concat([_n])),tn=tn.concat(uu(_n,Bt))}),tn},Kp=(Pt,Bt)=>Xl(Pt,tn=>fs(tn,Bt)),sm=(Pt,Bt)=>As(Bt,Pt),_s=(Pt,Bt,tn)=>{if(_(tn)||nt(tn)||bt(tn))Pt.setAttribute(Bt,tn+"");else throw console.error("Invalid call to Attribute.set. Key ",Bt,":: Value ",tn,":: Element ",Pt),new Error("Attribute value was not simple")},Al=(Pt,Bt,tn)=>{_s(Pt.dom,Bt,tn)},Pl=(Pt,Bt)=>{const tn=Pt.dom;Pn(Bt,(_n,co)=>{_s(tn,co,_n)})},wp=(Pt,Bt)=>{const tn=Pt.dom.getAttribute(Bt);return tn===null?void 0:tn},Cp=(Pt,Bt)=>Nt.from(wp(Pt,Bt)),dp=(Pt,Bt)=>{Pt.dom.removeAttribute(Bt)},ku=Pt=>Co(Pt.dom.attributes,(Bt,tn)=>(Bt[tn.name]=tn.value,Bt),{}),g1=(Pt,Bt,tn=Mt)=>Pt.exists(_n=>tn(_n,Bt)),Vm=Pt=>{const Bt=[],tn=_n=>{Bt.push(_n)};for(let _n=0;_n<Pt.length;_n++)Pt[_n].each(tn);return Bt},Vl=(Pt,Bt,tn)=>Pt.isSome()&&Bt.isSome()?Nt.some(tn(Pt.getOrDie(),Bt.getOrDie())):Nt.none(),Dp=Pt=>Pt.bind(Rt),Np=(Pt,Bt)=>Pt?Nt.some(Bt):Nt.none(),fp=(Pt,Bt)=>Pt.substring(Bt),ry=(Pt,Bt,tn)=>Bt===""||Pt.length>=Bt.length&&Pt.substr(tn,tn+Bt.length)===Bt,im=(Pt,Bt)=>Yp(Pt,Bt)?fp(Pt,Bt.length):Pt,Yp=(Pt,Bt)=>ry(Pt,Bt,0),Tm=(Pt=>Bt=>Bt.replace(Pt,""))(/^\s+|\s+$/g),py=Pt=>Pt.length>0,gy=Pt=>!py(Pt),U0=(Pt,Bt=10)=>{const tn=parseInt(Pt,Bt);return isNaN(tn)?Nt.none():Nt.some(tn)},Im=Pt=>{const Bt=parseFloat(Pt);return isNaN(Bt)?Nt.none():Nt.some(Bt)},Ap=Pt=>Pt.style!==void 0&&pt(Pt.style.getPropertyValue),sy=(Pt,Bt,tn)=>{if(!_(tn))throw console.error("Invalid call to CSS.set. Property ",Bt,":: Value ",tn,":: Element ",Pt),new Error("CSS value must be a string: "+tn);Ap(Pt)&&Pt.style.setProperty(Bt,tn)},iy=(Pt,Bt)=>{Ap(Pt)&&Pt.style.removeProperty(Bt)},Dy=(Pt,Bt,tn)=>{const _n=Pt.dom;sy(_n,Bt,tn)},E0=(Pt,Bt)=>{const tn=Pt.dom,co=window.getComputedStyle(tn).getPropertyValue(Bt);return co===""&&!Bn(Pt)?hp(tn,Bt):co},hp=(Pt,Bt)=>Ap(Pt)?Pt.style.getPropertyValue(Bt):"",Rm=(Pt,Bt)=>{const tn=Pt.dom,_n=hp(tn,Bt);return Nt.from(_n).filter(co=>co.length>0)},Lp=(Pt,Bt)=>{const tn=Pt.dom;iy(tn,Bt),g1(Cp(Pt,"style").map(Tm),"")&&dp(Pt,"style")},Xp=(Pt,Bt,tn=0)=>Cp(Pt,Bt).map(_n=>parseInt(_n,10)).getOr(tn),Ny=(Pt,Bt)=>Ly(Pt,Bt,Zt),Ly=(Pt,Bt,tn)=>rn(Fr(Pt),_n=>fs(_n,Bt)?tn(_n)?[_n]:[]:Ly(_n,Bt,tn)),un=["tfoot","thead","tbody","colgroup"],Fn=Pt=>no(un,Pt),fo=(Pt,Bt)=>({rows:Pt,columns:Bt}),Wo=(Pt,Bt,tn)=>({element:Pt,rowspan:Bt,colspan:tn}),pr=(Pt,Bt,tn,_n,co,Yo)=>({element:Pt,rowspan:Bt,colspan:tn,row:_n,column:co,isLocked:Yo}),Vo=(Pt,Bt,tn)=>({element:Pt,cells:Bt,section:tn}),$l=(Pt,Bt,tn,_n)=>({startRow:Pt,startCol:Bt,finishRow:tn,finishCol:_n}),Kr=(Pt,Bt,tn)=>({element:Pt,colspan:Bt,column:tn}),Os=(Pt,Bt)=>({element:Pt,columns:Bt}),Pu=(Pt,Bt,tn=Xt)=>{if(tn(Bt))return Nt.none();if(no(Pt,tr(Bt)))return Nt.some(Bt);const _n=co=>fs(co,"table")||tn(co);return Ns(Bt,Pt.join(","),_n)},Kt=(Pt,Bt)=>Pu(["td","th"],Pt,Bt),vn=Pt=>Ny(Pt,"th,td"),qn=Pt=>fs(Pt,"colgroup")?Kp(Pt,"col"):rn(Zs(Pt),Bt=>Kp(Bt,"col")),Eo=(Pt,Bt)=>Ls(Pt,"table",Bt),Xo=Pt=>Ny(Pt,"tr"),Zs=Pt=>Eo(Pt).fold(Tt([]),Bt=>Kp(Bt,"colgroup")),Zl=(Pt,Bt)=>_o(Pt,tn=>{if(tr(tn)==="colgroup"){const _n=_o(qn(tn),co=>{const Yo=Xp(co,"span",1);return Wo(co,1,Yo)});return Vo(tn,_n,"colgroup")}else{const _n=_o(vn(tn),co=>{const Yo=Xp(co,"rowspan",1),yr=Xp(co,"colspan",1);return Wo(co,Yo,yr)});return Vo(tn,_n,Bt(tn))}}),ru=Pt=>_a(Pt).map(Bt=>{const tn=tr(Bt);return Fn(tn)?tn:"tbody"}).getOr("tbody"),cr=Pt=>{const Bt=Xo(Pt),_n=[...Zs(Pt),...Bt];return Zl(_n,ru)},du="data-snooker-locked-cols",Fp=Pt=>Cp(Pt,du).bind(Bt=>Nt.from(Bt.match(/\d+/g))).map(Bt=>Nn(Bt,Zt)),H0=(Pt,Bt)=>Pt+","+Bt,Bs=(Pt,Bt,tn)=>Nt.from(Pt.access[H0(Bt,tn)]),qm=(Pt,Bt,tn)=>{const _n=f0(Pt,co=>tn(Bt,co.element));return _n.length>0?Nt.some(_n[0]):Nt.none()},f0=(Pt,Bt)=>{const tn=rn(Pt.all,_n=>_n.cells);return Ho(tn,Bt)},kp=Pt=>{const Bt={};let tn=0;return Yt(Pt.cells,_n=>{const co=_n.colspan;On(co,Yo=>{const yr=tn+Yo;Bt[yr]=Kr(_n.element,co,yr)}),tn+=co}),Bt},fu=Pt=>{const Bt={},tn=[],co=So(Pt).map(P0=>P0.element).bind(Eo).bind(Fp).getOr({});let Yo=0,yr=0,Yr=0;const{pass:Ps,fail:Ys}=lo(Pt,P0=>P0.section==="colgroup");Yt(Ys,P0=>{const xy=[];Yt(P0.cells,Nm=>{let Hv=0;for(;Bt[H0(Yr,Hv)]!==void 0;)Hv++;const I1=uo(co,Hv.toString()),R1=pr(Nm.element,Nm.rowspan,Nm.colspan,Yr,Hv,I1);for(let w_=0;w_<Nm.colspan;w_++)for(let Zx=0;Zx<Nm.rowspan;Zx++){const n2=Yr+Zx,_C=Hv+w_,Hp=H0(n2,_C);Bt[Hp]=R1,yr=Math.max(yr,_C+1)}xy.push(R1)}),Yo++,tn.push(Vo(P0.element,xy,P0.section)),Yr++});const{columns:Bu,colgroups:su}=Hn(Ps).map(P0=>{const xy=kp(P0);return{colgroups:[Os(P0.element,fn(xy))],columns:xy}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:fo(Yo,yr),access:Bt,all:tn,columns:Bu,colgroups:su}},A0={fromTable:Pt=>{const Bt=cr(Pt);return fu(Bt)},generate:fu,getAt:Bs,findItem:qm,filterItems:f0,justCells:Pt=>rn(Pt.all,Bt=>Bt.cells),justColumns:Pt=>fn(Pt.columns),hasColumns:Pt=>Jt(Pt.columns).length>0,getColumnAt:(Pt,Bt)=>Nt.from(Pt.columns[Bt])};var Fu=tinymce.util.Tools.resolve("tinymce.util.Tools");const T0=(Pt,Bt,tn)=>{const _n=Pt.select("td,th",Bt);let co;for(let Yo=0;Yo<_n.length;Yo++){const yr=Pt.getStyle(_n[Yo],tn);if(rt(co)&&(co=yr),co!==yr)return""}return co},Mm=(Pt,Bt,tn)=>{Fu.each("left center right".split(" "),_n=>{_n!==tn&&Pt.formatter.remove("align"+_n,{},Bt)}),tn&&Pt.formatter.apply("align"+tn,{},Bt)},y1=(Pt,Bt,tn)=>{Fu.each("top middle bottom".split(" "),_n=>{_n!==tn&&Pt.formatter.remove("valign"+_n,{},Bt)}),tn&&Pt.formatter.apply("valign"+tn,{},Bt)},bn=(Pt,Bt,tn)=>{Pt.dispatch("TableModified",{...tn,table:Bt})},Sn=(Pt,Bt)=>Im(Pt).getOr(Bt),Ao=(Pt,Bt,tn)=>Sn(E0(Pt,Bt),tn),qo=(Pt,Bt,tn,_n)=>{const co=Ao(Pt,`padding-${tn}`,0),Yo=Ao(Pt,`padding-${_n}`,0),yr=Ao(Pt,`border-${tn}-width`,0),Yr=Ao(Pt,`border-${_n}-width`,0);return Bt-co-Yo-yr-Yr},ps=(Pt,Bt)=>{const tn=Pt.dom,_n=tn.getBoundingClientRect().width||tn.offsetWidth;return Bt==="border-box"?_n:qo(Pt,_n,"left","right")},Xs=Pt=>ps(Pt,"content-box");var gu=tinymce.util.Tools.resolve("tinymce.Env");const pp="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Pm=On(5,Pt=>{const Bt=`${Pt+1}px`;return{title:Bt,value:Bt}}),am=_o(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],Pt=>({title:Pt,value:Pt.toLowerCase()})),rp="100%",ip=Pt=>{var Bt;const tn=Pt.dom,_n=(Bt=tn.getParent(Pt.selection.getStart(),tn.isBlock))!==null&&Bt!==void 0?Bt:Pt.getBody();return Xs(_r.fromDom(_n))+"px"},Tp=(Pt,Bt)=>x1(Pt)||!I0(Pt)?Bt:K_(Pt)?{...Bt,width:ip(Pt)}:{...Bt,width:rp},lm=(Pt,Bt)=>x1(Pt)||I0(Pt)?Bt:K_(Pt)?{...Bt,width:ip(Pt)}:{...Bt,width:rp},Vu=Pt=>Bt=>Bt.options.get(Pt),ap=Pt=>{const Bt=Pt.options.register;Bt("table_border_widths",{processor:"object[]",default:Pm}),Bt("table_border_styles",{processor:"object[]",default:am}),Bt("table_cell_advtab",{processor:"boolean",default:!0}),Bt("table_row_advtab",{processor:"boolean",default:!0}),Bt("table_advtab",{processor:"boolean",default:!0}),Bt("table_appearance_options",{processor:"boolean",default:!0}),Bt("table_grid",{processor:"boolean",default:!gu.deviceType.isTouch()}),Bt("table_cell_class_list",{processor:"object[]",default:[]}),Bt("table_row_class_list",{processor:"object[]",default:[]}),Bt("table_class_list",{processor:"object[]",default:[]}),Bt("table_toolbar",{processor:"string",default:pp}),Bt("table_background_color_map",{processor:"object[]",default:[]}),Bt("table_border_color_map",{processor:"object[]",default:[]})},zu=Vu("table_sizing_mode"),my=Vu("table_border_widths"),u_=Vu("table_border_styles"),ov=Vu("table_cell_advtab"),b1=Vu("table_row_advtab"),v1=Vu("table_advtab"),Rv=Vu("table_appearance_options"),Mv=Vu("table_grid"),I0=Vu("table_style_by_css"),Zm=Vu("table_cell_class_list"),Bw=Vu("table_row_class_list"),Fy=Vu("table_class_list"),Bx=Vu("table_toolbar"),_1=Vu("table_background_color_map"),$x=Vu("table_border_color_map"),K_=Pt=>zu(Pt)==="fixed",x1=Pt=>zu(Pt)==="responsive",Y_=Pt=>{const Bt=Pt.options,tn=Bt.get("table_default_styles");return Bt.isSet("table_default_styles")?tn:Tp(Pt,tn)},Gx=Pt=>{const Bt=Pt.options,tn=Bt.get("table_default_attributes");return Bt.isSet("table_default_attributes")?tn:lm(Pt,tn)},Pv=(Pt,Bt)=>Bt.column>=Pt.startCol&&Bt.column+Bt.colspan-1<=Pt.finishCol&&Bt.row>=Pt.startRow&&Bt.row+Bt.rowspan-1<=Pt.finishRow,$w=(Pt,Bt)=>{let tn=!0;const _n=Et(Pv,Bt);for(let co=Bt.startRow;co<=Bt.finishRow;co++)for(let Yo=Bt.startCol;Yo<=Bt.finishCol;Yo++)tn=tn&&A0.getAt(Pt,co,Yo).exists(_n);return tn?Nt.some(Bt):Nt.none()},Qn=(Pt,Bt)=>$l(Math.min(Pt.row,Bt.row),Math.min(Pt.column,Bt.column),Math.max(Pt.row+Pt.rowspan-1,Bt.row+Bt.rowspan-1),Math.max(Pt.column+Pt.colspan-1,Bt.column+Bt.colspan-1)),w1=(Pt,Bt,tn)=>{const _n=A0.findItem(Pt,Bt,Zr),co=A0.findItem(Pt,tn,Zr);return _n.bind(Yo=>co.map(yr=>Qn(Yo,yr)))},R0=(Pt,Bt,tn)=>w1(Pt,Bt,tn).bind(_n=>$w(Pt,_n)),cC=(Pt,Bt,tn)=>{const _n=uC(Pt);return R0(_n,Bt,tn)},uC=A0.fromTable,Ov=(Pt,Bt)=>{_a(Pt).each(_n=>{_n.dom.insertBefore(Bt.dom,Pt.dom)})},_i=(Pt,Bt)=>{Sr(Pt).fold(()=>{_a(Pt).each(co=>{cm(co,Bt)})},_n=>{Ov(_n,Bt)})},Om=(Pt,Bt)=>{xa(Pt).fold(()=>{cm(Pt,Bt)},_n=>{Pt.dom.insertBefore(Bt.dom,_n.dom)})},cm=(Pt,Bt)=>{Pt.dom.appendChild(Bt.dom)},Dv=(Pt,Bt)=>{Ov(Pt,Bt),cm(Bt,Pt)},jx=(Pt,Bt)=>{Yt(Bt,(tn,_n)=>{const co=_n===0?Pt:Bt[_n-1];_i(co,tn)})},d_=(Pt,Bt)=>{Yt(Bt,tn=>{cm(Pt,tn)})},Dm=Pt=>{const Bt=Pt.dom;Bt.parentNode!==null&&Bt.parentNode.removeChild(Bt)},X_=Pt=>{const Bt=Fr(Pt);Bt.length>0&&jx(Pt,Bt),Dm(Pt)},J_=((Pt,Bt)=>{const tn=Yo=>{if(!Pt(Yo))throw new Error("Can only get "+Bt+" value of a "+Bt+" node");return _n(Yo).getOr("")},_n=Yo=>Pt(Yo)?Nt.from(Yo.dom.nodeValue):Nt.none();return{get:tn,getOption:_n,set:(Yo,yr)=>{if(!Pt(Yo))throw new Error("Can only set raw "+Bt+" value of a "+Bt+" node");Yo.dom.nodeValue=yr}}})(xu,"text"),sv=Pt=>J_.get(Pt),Km=(Pt,Bt)=>J_.set(Pt,Bt);var dC=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],f_=()=>{const Pt=Ys=>_r.fromDom(Ys.dom.cloneNode(!1)),Bt=Ys=>Jr(Ys).dom,tn=Ys=>Yl(Ys)?tr(Ys)==="body"?!0:no(dC,tr(Ys)):!1,_n=Ys=>Yl(Ys)?no(["br","img","hr","input"],tr(Ys)):!1,co=Ys=>Yl(Ys)&&wp(Ys,"contenteditable")==="false",Yo=(Ys,Bu)=>Ys.dom.compareDocumentPosition(Bu.dom),yr=(Ys,Bu)=>{const su=ku(Ys);Pl(Bu,su)},Yr=Ys=>{const Bu=tr(Ys);return no(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Bu)},Ps=Ys=>Yl(Ys)?Cp(Ys,"lang"):Nt.none();return{up:Tt({selector:Ns,closest:Ls,predicate:jo,all:go}),down:Tt({selector:sm,predicate:uu}),styles:Tt({get:E0,getRaw:Rm,set:Dy,remove:Lp}),attrs:Tt({get:wp,set:Al,remove:dp,copyTo:yr}),insert:Tt({before:Ov,after:_i,afterAll:jx,append:cm,appendAll:d_,prepend:Om,wrap:Dv}),remove:Tt({unwrap:X_,remove:Dm}),create:Tt({nu:_r.fromTag,clone:Pt,text:_r.fromText}),query:Tt({comparePosition:Yo,prevSibling:Po,nextSibling:Sr}),property:Tt({children:Fr,name:tr,parent:_a,document:Bt,isText:xu,isComment:ou,isElement:Yl,isSpecial:Yr,getLanguage:Ps,getText:sv,setText:Km,isBoundary:tn,isEmptyTag:_n,isNonEditable:co}),eq:Zr,is:Ml}};const Jp=(Pt,Bt,tn,_n)=>{const co=tn[0],Yo=tn.slice(1);return _n(Pt,Bt,co,Yo)},h0=(Pt,Bt,tn)=>tn.length>0?Jp(Pt,Bt,tn,Ym):Nt.none(),Ym=(Pt,Bt,tn,_n)=>{const co=Bt(Pt,tn);return mo(_n,(Yo,yr)=>{const Yr=Bt(Pt,yr);return k1(Pt,Yo,Yr)},co)},k1=(Pt,Bt,tn)=>Bt.bind(_n=>tn.filter(Et(Pt.eq,_n))),h_=h0,Gw=f_(),p_=(Pt,Bt)=>h_(Gw,(tn,_n)=>Pt(_n),Bt),yy=Pt=>Ns(Pt,"table"),g_=(Pt,Bt)=>{const tn=sm(Pt,Bt);return tn.length>0?Nt.some(tn):Nt.none()},WS=(Pt,Bt,tn)=>ro(Pt,Bt).bind(_n=>ro(Pt,tn).bind(co=>p_(yy,[_n,co]).map(Yo=>({first:_n,last:co,table:Yo})))),jw=(Pt,Bt)=>g_(Pt,Bt),fC=(Pt,Bt,tn)=>WS(Pt,Bt,tn).bind(_n=>{const co=Ps=>Zr(Pt,Ps),Yo="thead,tfoot,tbody,table",yr=Ns(_n.first,Yo,co),Yr=Ns(_n.last,Yo,co);return yr.bind(Ps=>Yr.bind(Ys=>Zr(Ps,Ys)?cC(_n.table,_n.first,_n.last):Nt.none()))}),Uw=Pt=>_o(Pt,_r.fromDom),m_="data-mce-selected",S1="td["+m_+"],th["+m_+"]",Q_="data-mce-first-selected",Qu="td["+Q_+"],th["+Q_+"]",_d="data-mce-last-selected",Nv="td["+_d+"],th["+_d+"]",ay={selected:m_,selectedSelector:S1,firstSelected:Q_,firstSelectedSelector:Qu,lastSelected:_d,lastSelectedSelector:Nv},Hw=Pt=>Eo(Pt).bind(Bt=>jw(Bt,ay.firstSelectedSelector)).fold(Tt(Pt),Bt=>Bt[0]),zp=Pt=>(Bt,tn)=>{const _n=tr(Bt),co=_n==="col"||_n==="colgroup"?Hw(Bt):Bt;return Ls(co,Pt,tn)},ls=zp("th,td,caption"),iv=zp("th,td"),Vw=Pt=>Uw(Pt.model.table.getSelectedCells()),W0=(Pt,Bt)=>{const tn=iv(Pt),_n=tn.bind(co=>Eo(co)).map(co=>Xo(co));return Vl(tn,_n,(co,Yo)=>Ho(Yo,yr=>Ro(Uw(yr.dom.cells),Yr=>wp(Yr,Bt)==="1"||Zr(Yr,co)))).getOr([])},Wl=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Lv=Pt=>({value:Ks(Pt)}),ex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Ux=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Ww=Pt=>ex.test(Pt)||Ux.test(Pt),Ks=Pt=>im(Pt,"#").toUpperCase(),bp=Pt=>Ww(Pt)?Nt.some({value:Ks(Pt)}):Nt.none(),Fv=Pt=>{const Bt=Pt.toString(16);return(Bt.length===1?"0"+Bt:Bt).toUpperCase()},zv=Pt=>{const Bt=Fv(Pt.red)+Fv(Pt.green)+Fv(Pt.blue);return Lv(Bt)},M0=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,p0=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,q0=(Pt,Bt,tn,_n)=>({red:Pt,green:Bt,blue:tn,alpha:_n}),Su=(Pt,Bt,tn,_n)=>{const co=parseInt(Pt,10),Yo=parseInt(Bt,10),yr=parseInt(tn,10),Yr=parseFloat(_n);return q0(co,Yo,yr,Yr)},ly=Pt=>{const Bt=M0.exec(Pt);if(Bt!==null)return Nt.some(Su(Bt[1],Bt[2],Bt[3],"1"));const tn=p0.exec(Pt);return tn!==null?Nt.some(Su(tn[1],tn[2],tn[3],tn[4])):Nt.none()},E1=Pt=>bp(Pt).orThunk(()=>ly(Pt).map(zv)).getOrThunk(()=>{const Bt=document.createElement("canvas");Bt.height=1,Bt.width=1;const tn=Bt.getContext("2d");tn.clearRect(0,0,Bt.width,Bt.height),tn.fillStyle="#FFFFFF",tn.fillStyle=Pt,tn.fillRect(0,0,1,1);const _n=tn.getImageData(0,0,1,1).data,co=_n[0],Yo=_n[1],yr=_n[2],Yr=_n[3];return zv(q0(co,Yo,yr,Yr))}),Up=Pt=>ly(Pt).map(zv).map(Bt=>"#"+Bt.value).getOr(Pt),by=Pt=>{let Bt=Pt;return{get:()=>Bt,set:co=>{Bt=co}}},lp=Pt=>{const Bt=by(Nt.none()),tn=()=>Bt.get().each(Pt);return{clear:()=>{tn(),Bt.set(Nt.none())},isSet:()=>Bt.get().isSome(),get:()=>Bt.get(),set:Yr=>{tn(),Bt.set(Nt.some(Yr))}}},Bv=()=>lp(Pt=>Pt.unbind()),y_=(Pt,Bt,tn)=>_n=>{const co=Bv(),Yo=gy(tn),yr=()=>{const Yr=Vw(Pt),Ps=Ys=>Pt.formatter.match(Bt,{value:tn},Ys.dom,Yo);Yo?(_n.setActive(!Ro(Yr,Ps)),co.set(Pt.formatter.formatChanged(Bt,Ys=>_n.setActive(!Ys),!0))):(_n.setActive(Cn(Yr,Ps)),co.set(Pt.formatter.formatChanged(Bt,_n.setActive,!1,{value:tn})))};return Pt.initialized?yr():Pt.on("init",yr),co.clear},mu=Pt=>uo(Pt,"menu"),vy=Pt=>_o(Pt,Bt=>{const tn=Bt.text||Bt.title||"";return mu(Bt)?{text:tn,items:vy(Bt.menu)}:{text:tn,value:Bt.value}}),Hx=Pt=>Pt.length?Nt.some(vy([{text:"Select...",value:"mce-no-match"},...Pt])):Nt.none(),av=(Pt,Bt,tn,_n)=>_o(Bt,co=>{const Yo=co.text||co.title;return mu(co)?{type:"nestedmenuitem",text:Yo,getSubmenuItems:()=>av(Pt,co.menu,tn,_n)}:{text:Yo,type:"togglemenuitem",onAction:()=>_n(co.value),onSetup:y_(Pt,tn,co.value)}}),Ou=(Pt,Bt)=>tn=>{Pt.execCommand("mceTableApplyCellStyle",!1,{[Bt]:tn})},$v=Pt=>rn(Pt,Bt=>mu(Bt)?[{...Bt,menu:$v(Bt.menu)}]:py(Bt.value)?[Bt]:[]),g0=(Pt,Bt,tn,_n)=>co=>co(av(Pt,Bt,tn,_n)),b_=(Pt,Bt,tn)=>{const _n=_o(Bt,co=>({text:co.title,value:"#"+E1(co.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:_n.length>0?_n:void 0,allowCustomColors:!1},onAction:co=>{const Yo=co.value==="remove"?"":co.value;Pt.execCommand("mceTableApplyCellStyle",!1,{[tn]:Yo})}}]},xl=Pt=>()=>{const tn=Pt.queryCommandValue("mceTableRowType")==="header"?"body":"header";Pt.execCommand("mceTableRowType",!1,{type:tn})},v_=Pt=>()=>{const tn=Pt.queryCommandValue("mceTableColType")==="th"?"td":"th";Pt.execCommand("mceTableColType",!1,{type:tn})},Vx=Pt=>Hx(Zm(Pt)).map(Bt=>({name:"class",type:"listbox",label:"Class",items:Bt})),Dt=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Wl}],Ut=Pt=>Dt.concat(Vx(Pt).toArray()),nn=(Pt,Bt)=>{const _n=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(vy(u_(Pt)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:Bt==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(_n):_n}},io={normal:(Pt,Bt)=>{const tn=Pt.dom;return{setAttrib:(yr,Yr)=>{tn.setAttrib(Bt,yr,Yr)},setStyle:(yr,Yr)=>{tn.setStyle(Bt,yr,Yr)},setFormat:(yr,Yr)=>{Yr===""?Pt.formatter.remove(yr,{value:null},Bt,!0):Pt.formatter.apply(yr,{value:Yr},Bt)}}}},rr=iu("th"),xs=(Pt,Bt)=>Pt&&Bt?"sectionCells":Pt?"section":"cells",qs=Pt=>{const Bt=Pt.section==="thead",tn=g1($s(Pt.cells),"th");return Pt.section==="tfoot"?{type:"footer"}:Bt||tn?{type:"header",subType:xs(Bt,tn)}:{type:"body"}},$s=Pt=>{const Bt=Ho(Pt,tn=>rr(tn.element));return Bt.length===0?Nt.some("td"):Bt.length===Pt.length?Nt.some("th"):Nt.none()},cs=Pt=>{const Bt=_o(Pt,co=>qs(co).type),tn=no(Bt,"header"),_n=no(Bt,"footer");if(!tn&&!_n)return Nt.some("body");{const co=no(Bt,"body");return tn&&!co&&!_n?Nt.some("header"):!tn&&!co&&_n?Nt.some("footer"):Nt.none()}},_f=Pt=>{let Bt=!1,tn;return(..._n)=>(Bt||(Bt=!0,tn=Pt.apply(null,_n)),tn)},Ip=(Pt,Bt)=>Tn(Pt.all,tn=>wn(tn.cells,_n=>Zr(Bt,_n.element))),Xm=(Pt,Bt,tn)=>{const _n=_o(Bt.selection,Yo=>Kt(Yo).bind(yr=>Ip(Pt,yr)).filter(tn)),co=Vm(_n);return Np(co.length>0,co)},Gv=(Pt,Bt)=>Bt.mergable,tx=(Pt,Bt)=>Bt.unmergable,qw=(Pt,Bt)=>Xm(Pt,Bt,Zt),m0=(Pt,Bt)=>Ip(Pt,Bt).exists(tn=>!tn.isLocked),Zw=(Pt,Bt)=>Cn(Bt,tn=>m0(Pt,tn)),UA=(Pt,Bt)=>Gv(Pt,Bt).filter(tn=>Zw(Pt,tn.cells)),qS=(Pt,Bt)=>tx(Pt,Bt).filter(tn=>Zw(Pt,tn));({...{generate:Pt=>{if(!_e(Pt))throw new Error("cases must be an array");if(Pt.length===0)throw new Error("there must be at least one case");const Bt=[],tn={};return Yt(Pt,(_n,co)=>{const Yo=Jt(_n);if(Yo.length!==1)throw new Error("one and only one name per case");const yr=Yo[0],Yr=_n[yr];if(tn[yr]!==void 0)throw new Error("duplicate key detected:"+yr);if(yr==="cata")throw new Error("cannot have a case named cata (sorry)");if(!_e(Yr))throw new Error("case arguments must be an array");Bt.push(yr),tn[yr]=(...Ps)=>{const Ys=Ps.length;if(Ys!==Yr.length)throw new Error("Wrong number of arguments to case "+yr+". Expected "+Yr.length+" ("+Yr+"), got "+Ys);return{fold:(...su)=>{if(su.length!==Pt.length)throw new Error("Wrong number of arguments to fold. Expected "+Pt.length+", got "+su.length);return su[co].apply(null,Ps)},match:su=>{const _h=Jt(su);if(Bt.length!==_h.length)throw new Error("Wrong number of arguments to match. Expected: "+Bt.join(",")+`
Actual: `+_h.join(","));if(!Cn(Bt,xy=>no(_h,xy)))throw new Error("Not all branches were specified when using match. Specified: "+_h.join(", ")+`
Required: `+Bt.join(", "));return su[yr].apply(null,Ps)},log:su=>{console.log(su,{constructors:Bt,constructor:yr,params:Ps})}}}}),tn}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const cy=(Pt,Bt)=>{const tn=A0.fromTable(Pt);return qw(tn,Bt).bind(co=>{const Yo=co[co.length-1],yr=co[0].row,Yr=Yo.row+Yo.rowspan,Ps=tn.all.slice(yr,Yr);return cs(Ps)}).getOr("")},vs=Pt=>Yp(Pt,"rgb")?Up(Pt):Pt,uy=Pt=>{const Bt=_r.fromDom(Pt);return{borderwidth:Rm(Bt,"border-width").getOr(""),borderstyle:Rm(Bt,"border-style").getOr(""),bordercolor:Rm(Bt,"border-color").map(vs).getOr(""),backgroundcolor:Rm(Bt,"background-color").map(vs).getOr("")}},ZS=Pt=>{const Bt=Pt[0],tn=Pt.slice(1);return Yt(tn,_n=>{Yt(Jt(Bt),co=>{Pn(_n,(Yo,yr)=>{const Yr=Bt[co];Yr!==""&&co===yr&&Yr!==Yo&&(Bt[co]=co==="class"?"mce-no-match":"")})})}),Bt},gC=(Pt,Bt,tn,_n)=>wn(Pt,co=>!rt(tn.formatter.matchNode(_n,Bt+co))).getOr(""),nx=Et(gC,["left","center","right"],"align"),KS=Et(gC,["top","middle","bottom"],"valign"),zy=(Pt,Bt)=>{const tn=Y_(Pt),_n=Gx(Pt),co=()=>({borderstyle:Vn(tn,"border-style").getOr(""),bordercolor:vs(Vn(tn,"border-color").getOr("")),backgroundcolor:vs(Vn(tn,"background-color").getOr(""))}),Yo={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},yr=()=>{const Bu=tn["border-width"];return I0(Pt)&&Bu?{border:Bu}:Vn(_n,"border").fold(()=>({}),su=>({border:su}))},Yr=Bt?co():{},Ps=()=>{const Bu=Vn(tn,"border-spacing").or(Vn(_n,"cellspacing")).fold(()=>({}),_h=>({cellspacing:_h})),su=Vn(tn,"border-padding").or(Vn(_n,"cellpadding")).fold(()=>({}),_h=>({cellpadding:_h}));return{...Bu,...su}};return{...Yo,...tn,..._n,...Yr,...yr(),...Ps()}},jv=Pt=>Eo(_r.fromDom(Pt)).map(Bt=>{const tn={selection:Uw(Pt.cells)};return cy(Bt,tn)}).getOr(""),ox=(Pt,Bt,tn)=>{const _n=(Yr,Ps)=>{const Ys=Rm(_r.fromDom(Ps),"border-width");return I0(Pt)&&Ys.isSome()?Ys.getOr(""):Yr.getAttrib(Ps,"border")||T0(Pt.dom,Ps,"border-width")||T0(Pt.dom,Ps,"border")||""},co=Pt.dom,Yo=I0(Pt)?co.getStyle(Bt,"border-spacing")||co.getAttrib(Bt,"cellspacing"):co.getAttrib(Bt,"cellspacing")||co.getStyle(Bt,"border-spacing"),yr=I0(Pt)?T0(co,Bt,"padding")||co.getAttrib(Bt,"cellpadding"):co.getAttrib(Bt,"cellpadding")||T0(co,Bt,"padding");return{width:co.getStyle(Bt,"width")||co.getAttrib(Bt,"width"),height:co.getStyle(Bt,"height")||co.getAttrib(Bt,"height"),cellspacing:Yo??"",cellpadding:yr??"",border:_n(co,Bt),caption:!!co.select("caption",Bt)[0],class:co.getAttrib(Bt,"class",""),align:nx(Pt,Bt),...tn?uy(Bt):{}}},Nr=(Pt,Bt,tn)=>{const _n=Pt.dom;return{height:_n.getStyle(Bt,"height")||_n.getAttrib(Bt,"height"),class:_n.getAttrib(Bt,"class",""),type:jv(Bt),align:nx(Pt,Bt),...tn?uy(Bt):{}}},By=(Pt,Bt,tn,_n)=>{const co=Pt.dom,Yo=_n.getOr(Bt);return{width:((Yr,Ps)=>co.getStyle(Yr,Ps)||co.getAttrib(Yr,Ps))(Yo,"width"),scope:co.getAttrib(Bt,"scope"),celltype:lr(Bt),class:co.getAttrib(Bt,"class",""),halign:nx(Pt,Bt),valign:KS(Pt,Bt),...tn?uy(Bt):{}}},mC=(Pt,Bt)=>{const tn=A0.fromTable(Pt),_n=A0.justCells(tn),co=Ho(_n,Yo=>Ro(Bt,yr=>Zr(Yo.element,yr)));return _o(co,Yo=>({element:Yo.element.dom,column:A0.getColumnAt(tn,Yo.column).map(yr=>yr.element.dom)}))},Wx=(Pt,Bt,tn,_n)=>{_n("scope")&&Pt.setAttrib("scope",tn.scope),_n("class")&&tn.class!=="mce-no-match"&&Pt.setAttrib("class",tn.class),_n("width")&&Bt.setStyle("width",Hr(tn.width))},$y=(Pt,Bt,tn)=>{tn("backgroundcolor")&&Pt.setFormat("tablecellbackgroundcolor",Bt.backgroundcolor),tn("bordercolor")&&Pt.setFormat("tablecellbordercolor",Bt.bordercolor),tn("borderstyle")&&Pt.setFormat("tablecellborderstyle",Bt.borderstyle),tn("borderwidth")&&Pt.setFormat("tablecellborderwidth",Hr(Bt.borderwidth))},Kw=(Pt,Bt,tn,_n)=>{const co=Bt.length===1;Yt(Bt,Yo=>{const yr=Yo.element,Yr=co?Zt:_n,Ps=io.normal(Pt,yr),Ys=Yo.column.map(Bu=>io.normal(Pt,Bu)).getOr(Ps);Wx(Ps,Ys,tn,Yr),ov(Pt)&&$y(Ps,tn,Yr),_n("halign")&&Mm(Pt,yr,tn.halign),_n("valign")&&y1(Pt,yr,tn.valign)})},rx=(Pt,Bt)=>{Pt.execCommand("mceTableCellType",!1,{type:Bt.celltype,no_events:!0})},T1=(Pt,Bt,tn,_n)=>{const co=ao(_n,(Yo,yr)=>tn[yr]!==Yo);It(co)>0&&Bt.length>=1&&Eo(Bt[0]).each(Yo=>{const yr=mC(Yo,Bt),Yr=It(ao(co,(Ys,Bu)=>Bu!=="scope"&&Bu!=="celltype"))>0,Ps=ln(co,"celltype");(Yr||ln(co,"scope"))&&Kw(Pt,yr,_n,Et(ln,co)),Ps&&rx(Pt,_n),bn(Pt,Yo.dom,{structure:Ps,style:Yr})})},Yw=(Pt,Bt,tn,_n)=>{const co=_n.getData();_n.close(),Pt.undoManager.transact(()=>{T1(Pt,Bt,tn,co),Pt.focus()})},lv=(Pt,Bt)=>{const tn=Eo(Bt[0]).map(_n=>_o(mC(_n,Bt),co=>By(Pt,co.element,ov(Pt),co.column)));return ZS(tn.getOrDie())},HA=Pt=>{const Bt=Vw(Pt);if(Bt.length===0)return;const tn=lv(Pt,Bt),_n={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ut(Pt)},nn(Pt,"cell")]},co={type:"panel",items:[{type:"grid",columns:2,items:Ut(Pt)}]};Pt.windowManager.open({title:"Cell Properties",size:"normal",body:ov(Pt)?_n:co,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:tn,onSubmit:Et(Yw,Pt,Bt,tn)})},cp=Pt=>Hx(Bw(Pt)).map(Bt=>({name:"class",type:"listbox",label:"Class",items:Bt})),dr=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],y0=Pt=>dr.concat(cp(Pt).toArray()),sx=(Pt,Bt,tn)=>{tn("class")&&Bt.class!=="mce-no-match"&&Pt.setAttrib("class",Bt.class),tn("height")&&Pt.setStyle("height",Hr(Bt.height))},Sp=(Pt,Bt,tn)=>{tn("backgroundcolor")&&Pt.setStyle("background-color",Bt.backgroundcolor),tn("bordercolor")&&Pt.setStyle("border-color",Bt.bordercolor),tn("borderstyle")&&Pt.setStyle("border-style",Bt.borderstyle)},qx=(Pt,Bt,tn,_n)=>{const Yo=Bt.length===1?Zt:_n;Yt(Bt,yr=>{const Yr=Kp(_r.fromDom(yr),"td,th"),Ps=io.normal(Pt,yr);sx(Ps,tn,Yo),b1(Pt)&&Sp(Ps,tn,Yo),_n("height")&&Yt(Yr,Ys=>{Pt.dom.setStyle(Ys.dom,"height",null)}),_n("align")&&Mm(Pt,yr,tn.align)})},fm=(Pt,Bt)=>{Pt.execCommand("mceTableRowType",!1,{type:Bt.type,no_events:!0})},Jl=(Pt,Bt,tn,_n)=>{const co=ao(_n,(Yo,yr)=>tn[yr]!==Yo);if(It(co)>0){const Yo=ln(co,"type"),yr=Yo?It(co)>1:!0;yr&&qx(Pt,Bt,_n,Et(ln,co)),Yo&&fm(Pt,_n),Eo(_r.fromDom(Bt[0])).each(Yr=>bn(Pt,Yr.dom,{structure:Yo,style:yr}))}},Xw=(Pt,Bt,tn,_n)=>{const co=_n.getData();_n.close(),Pt.undoManager.transact(()=>{Jl(Pt,Bt,tn,co),Pt.focus()})},Jo=Pt=>{const Bt=W0(hs(Pt),ay.selected);if(Bt.length===0)return;const tn=_o(Bt,yr=>Nr(Pt,yr.dom,b1(Pt))),_n=ZS(tn),co={type:"tabpanel",tabs:[{title:"General",name:"general",items:y0(Pt)},nn(Pt,"row")]},Yo={type:"panel",items:[{type:"grid",columns:2,items:y0(Pt)}]};Pt.windowManager.open({title:"Row Properties",size:"normal",body:b1(Pt)?co:Yo,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:_n,onSubmit:Et(Xw,Pt,_o(Bt,yr=>yr.dom),_n)})},Ql=(Pt,Bt,tn)=>{const _n=tn?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],co=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Yo=Rv(Pt)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],yr=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Yr=Bt.length>0?[{name:"class",type:"listbox",label:"Class",items:Bt}]:[];return _n.concat(co).concat(Yo).concat(yr).concat(Yr)},Jw=(Pt,Bt,tn,_n)=>{if(Bt.tagName==="TD"||Bt.tagName==="TH")_(tn)&&dt(_n)?Pt.setStyle(Bt,tn,_n):Pt.setStyles(Bt,tn);else if(Bt.children)for(let co=0;co<Bt.children.length;co++)Jw(Pt,Bt.children[co],tn,_n)},Qp=(Pt,Bt,tn,_n)=>{const co=Pt.dom,Yo={},yr={},Yr=I0(Pt),Ps=v1(Pt),Ys=parseFloat(tn.border)===0;if(!rt(tn.class)&&tn.class!=="mce-no-match"&&(Yo.class=tn.class),yr.height=Hr(tn.height),Yr?yr.width=Hr(tn.width):co.getAttrib(Bt,"width")&&(Yo.width=es(tn.width)),Yr?(Ys?(Yo.border=0,yr["border-width"]=""):(yr["border-width"]=Hr(tn.border),Yo.border=1),yr["border-spacing"]=Hr(tn.cellspacing)):(Yo.border=Ys?0:tn.border,Yo.cellpadding=tn.cellpadding,Yo.cellspacing=tn.cellspacing),Yr&&Bt.children){const Bu={};if(Ys?Bu["border-width"]="":_n.border&&(Bu["border-width"]=Hr(tn.border)),_n.cellpadding&&(Bu.padding=Hr(tn.cellpadding)),Ps&&_n.bordercolor&&(Bu["border-color"]=tn.bordercolor),!Ln(Bu))for(let su=0;su<Bt.children.length;su++)Jw(co,Bt.children[su],Bu)}if(Ps){const Bu=tn;yr["background-color"]=Bu.backgroundcolor,yr["border-color"]=Bu.bordercolor,yr["border-style"]=Bu.borderstyle}co.setStyles(Bt,{...Y_(Pt),...yr}),co.setAttribs(Bt,{...Gx(Pt),...Yo})},Jm=(Pt,Bt,tn,_n)=>{const co=Pt.dom,Yo=_n.getData(),yr=ao(Yo,(Yr,Ps)=>tn[Ps]!==Yr);_n.close(),Pt.undoManager.transact(()=>{if(!Bt){const Yr=U0(Yo.cols).getOr(1),Ps=U0(Yo.rows).getOr(1);Pt.execCommand("mceInsertTable",!1,{rows:Ps,columns:Yr}),Bt=iv(hs(Pt),Qr(Pt)).bind(Ys=>Eo(Ys,Qr(Pt))).map(Ys=>Ys.dom).getOrDie()}if(It(yr)>0){const Yr={border:ln(yr,"border"),bordercolor:ln(yr,"bordercolor"),cellpadding:ln(yr,"cellpadding")};Qp(Pt,Bt,Yo,Yr);const Ps=co.select("caption",Bt)[0];(Ps&&!Yo.caption||!Ps&&Yo.caption)&&Pt.execCommand("mceTableToggleCaption"),Mm(Pt,Bt,Yo.align)}if(Pt.focus(),Pt.addVisual(),It(yr)>0){const Yr=ln(yr,"caption"),Ps=Yr?It(yr)>1:!0;bn(Pt,Bt,{structure:Yr,style:Ps})}})},_y=(Pt,Bt)=>{const tn=Pt.dom;let _n,co=zy(Pt,v1(Pt));Bt?(co.cols="1",co.rows="1",v1(Pt)&&(co.borderstyle="",co.bordercolor="",co.backgroundcolor="")):(_n=tn.getParent(Pt.selection.getStart(),"table",Pt.getBody()),_n?co=ox(Pt,_n,v1(Pt)):v1(Pt)&&(co.borderstyle="",co.bordercolor="",co.backgroundcolor=""));const Yo=Hx(Fy(Pt));Yo.isSome()&&co.class&&(co.class=co.class.replace(/\s*mce\-item\-table\s*/g,""));const yr={type:"grid",columns:2,items:Ql(Pt,Yo.getOr([]),Bt)},Yr=()=>({type:"panel",items:[yr]}),Ps=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[yr]},nn(Pt,"table")]}),Ys=v1(Pt)?Ps():Yr();Pt.windowManager.open({title:"Table Properties",size:"normal",body:Ys,onSubmit:Et(Jm,Pt,_n,co),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:co})},YS=Pt=>{const Bt=tn=>{Nl(hs(Pt))&&tn()};Pn({mceTableProps:Et(_y,Pt,!1),mceTableRowProps:Et(Jo,Pt),mceTableCellProps:Et(HA,Pt),mceInsertTableDialog:Et(_y,Pt,!0)},(tn,_n)=>Pt.addCommand(_n,()=>Bt(tn)))},__=(Pt,Bt)=>Tu(Pt,Bt).isSome(),XS=Rt,dy=Pt=>{const Bt=(_n,co)=>Cp(_n,co).exists(Yo=>parseInt(Yo,10)>1),tn=_n=>Bt(_n,"rowspan")||Bt(_n,"colspan");return Pt.length>0&&Cn(Pt,tn)?Nt.some(Pt):Nt.none()},Kl=(Pt,Bt,tn)=>Bt.length<=1?Nt.none():fC(Pt,tn.firstSelectedSelector,tn.lastSelectedSelector).map(_n=>({bounds:_n,cells:Bt})),Uv=Pt=>({element:Pt,mergable:Nt.none(),unmergable:Nt.none(),selection:[Pt]}),Qw=(Pt,Bt,tn)=>({element:tn,mergable:Kl(Bt,Pt,ay),unmergable:dy(Pt),selection:XS(Pt)}),_g=Pt=>{const Bt=by(Nt.none()),tn=by([]);let _n=Nt.none();const co=iu("caption"),Yo=Gl=>_n.forall(tp=>!tp[Gl]),yr=()=>ls(hs(Pt),Qr(Pt)),Yr=()=>ls(ks(Pt),Qr(Pt)),Ps=()=>yr().bind(Gl=>Dp(Vl(Eo(Gl),Yr().bind(Eo),(tp,gp)=>Zr(tp,gp)?co(Gl)?Nt.some(Uv(Gl)):Nt.some(Qw(Vw(Pt),tp,Gl)):Nt.none()))),Ys=Gl=>Eo(Gl.element).map(gp=>{const b0=A0.fromTable(gp),xC=qw(b0,Gl).getOr([]),wC=Co(xC,(Z0,K0)=>(K0.isLocked&&(Z0.onAny=!0,K0.column===0?Z0.onFirst=!0:K0.column+K0.colspan>=b0.grid.columns&&(Z0.onLast=!0)),Z0),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:UA(b0,Gl).isSome(),unmergeable:qS(b0,Gl).isSome(),locked:wC}}),Bu=()=>{Bt.set(_f(Ps)()),_n=Bt.get().bind(Ys),Yt(tn.get(),$t)},su=Gl=>(Gl(),tn.set(tn.get().concat([Gl])),()=>{tn.set(Ho(tn.get(),tp=>tp!==Gl))}),_h=(Gl,tp)=>su(()=>Bt.get().fold(()=>{Gl.setEnabled(!1)},gp=>{Gl.setEnabled(!tp(gp)&&Pt.selection.isEditable())})),P0=(Gl,tp,gp)=>su(()=>Bt.get().fold(()=>{Gl.setEnabled(!1),Gl.setActive(!1)},b0=>{Gl.setEnabled(!tp(b0)&&Pt.selection.isEditable()),Gl.setActive(gp(b0))})),xy=Gl=>_n.exists(tp=>tp.locked[Gl]),Nm=Gl=>_h(Gl,tp=>!1),Hv=Gl=>_h(Gl,tp=>co(tp.element)),I1=Gl=>tp=>_h(tp,gp=>co(gp.element)||xy(Gl)),R1=Gl=>tp=>_h(tp,gp=>co(gp.element)||Gl().isNone()),w_=(Gl,tp)=>gp=>_h(gp,b0=>co(b0.element)||Gl().isNone()||xy(tp)),Zx=Gl=>_h(Gl,tp=>Yo("mergeable")),n2=Gl=>_h(Gl,tp=>Yo("unmergeable")),_C=Gl=>P0(Gl,Xt,tp=>Eo(tp.element,Qr(Pt)).exists(b0=>__(b0,"caption"))),Hp=(Gl,tp)=>gp=>P0(gp,b0=>co(b0.element),()=>Pt.queryCommandValue(Gl)===tp),uv=Hp("mceTableRowType","header"),C_=Hp("mceTableColType","th");return Pt.on("NodeChange ExecCommand TableSelectorChange",Bu),{onSetupTable:Nm,onSetupCellOrRow:Hv,onSetupColumn:I1,onSetupPasteable:R1,onSetupPasteableColumn:w_,onSetupMergeable:Zx,onSetupUnmergeable:n2,resetTargets:Bu,onSetupTableWithCaption:_C,onSetupTableRowHeaders:uv,onSetupTableColumnHeaders:C_,targets:Bt.get}};var yC=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const cv="x-tinymce/dom-table-",e2=cv+"rows",hm=cv+"columns",Qm=Pt=>{var Bt;const tn=(Bt=yC.read())!==null&&Bt!==void 0?Bt:[];return Tn(tn,_n=>Nt.from(_n.getType(Pt)))},ko=()=>Qm(e2),Eu=()=>Qm(hm),bC=Pt=>Bt=>{const tn=()=>{Bt.setEnabled(Pt.selection.isEditable())};return Pt.on("NodeChange",tn),tn(),()=>{Pt.off("NodeChange",tn)}},Rp=(Pt,Bt)=>{Pt.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:bC(Pt),fetch:Yr=>Yr("inserttable | cell row column | advtablesort | tableprops deletetable")});const tn=Yr=>()=>Pt.execCommand(Yr),_n=(Yr,Ps)=>{Pt.queryCommandSupported(Ps.command)&&Pt.ui.registry.addButton(Yr,{...Ps,onAction:pt(Ps.onAction)?Ps.onAction:tn(Ps.command)})},co=(Yr,Ps)=>{Pt.queryCommandSupported(Ps.command)&&Pt.ui.registry.addToggleButton(Yr,{...Ps,onAction:pt(Ps.onAction)?Ps.onAction:tn(Ps.command)})};_n("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:Bt.onSetupTable}),_n("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:Bt.onSetupTable}),_n("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:Bt.onSetupCellOrRow}),_n("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:Bt.onSetupMergeable}),_n("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:Bt.onSetupUnmergeable}),_n("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:Bt.onSetupCellOrRow}),_n("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:Bt.onSetupCellOrRow}),_n("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:Bt.onSetupCellOrRow}),_n("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:Bt.onSetupCellOrRow}),_n("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:Bt.onSetupColumn("onFirst")}),_n("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:Bt.onSetupColumn("onLast")}),_n("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:Bt.onSetupColumn("onAny")}),_n("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:Bt.onSetupCellOrRow}),_n("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:Bt.onSetupCellOrRow}),_n("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:Bt.onSetupPasteable(ko)}),_n("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:Bt.onSetupPasteable(ko)}),_n("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:Bt.onSetupColumn("onAny")}),_n("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:Bt.onSetupColumn("onAny")}),_n("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:Bt.onSetupPasteableColumn(Eu,"onFirst")}),_n("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:Bt.onSetupPasteableColumn(Eu,"onLast")}),_n("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:bC(Pt)});const Yo=$v(Fy(Pt));Yo.length!==0&&Pt.queryCommandSupported("mceTableToggleClass")&&Pt.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:g0(Pt,Yo,"tableclass",Yr=>Pt.execCommand("mceTableToggleClass",!1,Yr)),onSetup:Bt.onSetupTable});const yr=$v(Zm(Pt));yr.length!==0&&Pt.queryCommandSupported("mceTableCellToggleClass")&&Pt.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:g0(Pt,yr,"tablecellclass",Yr=>Pt.execCommand("mceTableCellToggleClass",!1,Yr)),onSetup:Bt.onSetupCellOrRow}),Pt.queryCommandSupported("mceTableApplyCellStyle")&&(Pt.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:g0(Pt,Wl,"tablecellverticalalign",Ou(Pt,"vertical-align")),onSetup:Bt.onSetupCellOrRow}),Pt.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:g0(Pt,my(Pt),"tablecellborderwidth",Ou(Pt,"border-width")),onSetup:Bt.onSetupCellOrRow}),Pt.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:g0(Pt,u_(Pt),"tablecellborderstyle",Ou(Pt,"border-style")),onSetup:Bt.onSetupCellOrRow}),Pt.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Yr=>Yr(b_(Pt,_1(Pt),"background-color")),onSetup:Bt.onSetupCellOrRow}),Pt.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Yr=>Yr(b_(Pt,$x(Pt),"border-color")),onSetup:Bt.onSetupCellOrRow})),co("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:Bt.onSetupTableWithCaption}),co("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:xl(Pt),onSetup:Bt.onSetupTableRowHeaders}),co("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:v_(Pt),onSetup:Bt.onSetupTableColumnHeaders})},wm=Pt=>{const Bt=_n=>Pt.dom.is(_n,"table")&&Pt.getBody().contains(_n)&&Pt.dom.isEditable(_n.parentNode),tn=Bx(Pt);tn.length>0&&Pt.ui.registry.addContextToolbar("table",{predicate:Bt,items:tn,scope:"node",position:"node"})},em=Pt=>Bt=>{const tn=()=>{Bt.setEnabled(Pt.selection.isEditable())};return Pt.on("NodeChange",tn),tn(),()=>{Pt.off("NodeChange",tn)}},Wu=(Pt,Bt)=>{const tn=su=>()=>Pt.execCommand(su),_n=(su,_h)=>Pt.queryCommandSupported(_h.command)?(Pt.ui.registry.addMenuItem(su,{..._h,onAction:pt(_h.onAction)?_h.onAction:tn(_h.command)}),!0):!1,co=(su,_h)=>{Pt.queryCommandSupported(_h.command)&&Pt.ui.registry.addToggleMenuItem(su,{..._h,onAction:pt(_h.onAction)?_h.onAction:tn(_h.command)})},Yo=su=>{Pt.execCommand("mceInsertTable",!1,{rows:su.numRows,columns:su.numColumns})},yr=[_n("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:Bt.onSetupCellOrRow}),_n("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:Bt.onSetupCellOrRow}),_n("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:Bt.onSetupCellOrRow}),_n("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:Bt.onSetupCellOrRow}),_n("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:Bt.onSetupCellOrRow}),_n("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:Bt.onSetupCellOrRow}),_n("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:Bt.onSetupPasteable(ko)}),_n("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:Bt.onSetupPasteable(ko)})],Yr=[_n("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:Bt.onSetupColumn("onFirst")}),_n("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:Bt.onSetupColumn("onLast")}),_n("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:Bt.onSetupColumn("onAny")}),_n("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:Bt.onSetupColumn("onAny")}),_n("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:Bt.onSetupColumn("onAny")}),_n("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:Bt.onSetupPasteableColumn(Eu,"onFirst")}),_n("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:Bt.onSetupPasteableColumn(Eu,"onLast")})],Ps=[_n("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:Bt.onSetupCellOrRow}),_n("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:Bt.onSetupMergeable}),_n("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:Bt.onSetupUnmergeable})];Mv(Pt)?Pt.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Yo}],onSetup:em(Pt)}):Pt.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:tn("mceInsertTableDialog"),onSetup:em(Pt)}),Pt.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:tn("mceInsertTableDialog"),onSetup:em(Pt)}),_n("tableprops",{text:"Table properties",onSetup:Bt.onSetupTable,command:"mceTableProps"}),_n("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:Bt.onSetupTable,command:"mceTableDelete"}),no(yr,!0)&&Pt.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Tt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),no(Yr,!0)&&Pt.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Tt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),no(Ps,!0)&&Pt.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Tt("tablecellprops tablemergecells tablesplitcells")}),Pt.ui.registry.addContextMenu("table",{update:()=>(Bt.resetTargets(),Bt.targets().fold(Tt(""),su=>tr(su.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Ys=$v(Fy(Pt));Ys.length!==0&&Pt.queryCommandSupported("mceTableToggleClass")&&Pt.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>av(Pt,Ys,"tableclass",su=>Pt.execCommand("mceTableToggleClass",!1,su)),onSetup:Bt.onSetupTable});const Bu=$v(Zm(Pt));Bu.length!==0&&Pt.queryCommandSupported("mceTableCellToggleClass")&&Pt.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>av(Pt,Bu,"tablecellclass",su=>Pt.execCommand("mceTableCellToggleClass",!1,su)),onSetup:Bt.onSetupCellOrRow}),Pt.queryCommandSupported("mceTableApplyCellStyle")&&(Pt.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>av(Pt,Wl,"tablecellverticalalign",Ou(Pt,"vertical-align")),onSetup:Bt.onSetupCellOrRow}),Pt.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>av(Pt,my(Pt),"tablecellborderwidth",Ou(Pt,"border-width")),onSetup:Bt.onSetupCellOrRow}),Pt.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>av(Pt,u_(Pt),"tablecellborderstyle",Ou(Pt,"border-style")),onSetup:Bt.onSetupCellOrRow}),Pt.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>b_(Pt,_1(Pt),"background-color"),onSetup:Bt.onSetupCellOrRow}),Pt.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>b_(Pt,$x(Pt),"border-color"),onSetup:Bt.onSetupCellOrRow})),co("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:Bt.onSetupTableWithCaption}),co("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:xl(Pt),onSetup:Bt.onSetupTableRowHeaders}),co("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:v_(Pt),onSetup:Bt.onSetupTableRowHeaders})},vC=Pt=>{const Bt=_g(Pt);ap(Pt),YS(Pt),Wu(Pt,Bt),Rp(Pt,Bt),wm(Pt)};var x_=()=>{o.add("table",vC)};x_()})();(function(){const o=pt=>{let bt=pt;return{get:()=>bt,set:Tt=>{bt=Tt}}};var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=(pt,bt)=>{pt.dispatch("VisualBlocks",{state:bt})},a=(pt,bt,xt)=>{pt.dom.toggleClass(pt.getBody(),"mce-visualblocks"),xt.set(!xt.get()),s(pt,xt.get())},d=(pt,bt,xt)=>{pt.addCommand("mceVisualBlocks",()=>{a(pt,bt,xt)})},b=pt=>bt=>bt.options.get(pt),_=pt=>{const bt=pt.options.register;bt("visualblocks_default_state",{processor:"boolean",default:!1})},_e=b("visualblocks_default_state"),nt=(pt,bt,xt)=>{pt.on("PreviewFormats AfterPreviewFormats",wt=>{xt.get()&&pt.dom.toggleClass(pt.getBody(),"mce-visualblocks",wt.type==="afterpreviewformats")}),pt.on("init",()=>{_e(pt)&&a(pt,bt,xt)})},rt=(pt,bt)=>xt=>{xt.setActive(bt.get());const wt=Tt=>xt.setActive(Tt.state);return pt.on("VisualBlocks",wt),()=>pt.off("VisualBlocks",wt)},ct=(pt,bt)=>{const xt=()=>pt.execCommand("mceVisualBlocks");pt.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:xt,onSetup:rt(pt,bt),context:"any"}),pt.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:xt,onSetup:rt(pt,bt),context:"any"})};var dt=()=>{e.add("visualblocks",(pt,bt)=>{_(pt);const xt=o(!1);d(pt,bt,xt),ct(pt,xt),nt(pt,bt,xt)})};dt()})();(function(){const o=go=>{let Po=go;return{get:()=>Po,set:Us=>{Po=Us}}};var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=go=>({isEnabled:()=>go.get()}),a=(go,Po)=>go.dispatch("VisualChars",{state:Po}),d=(go,Po,Sr)=>{var Fr;return Sr(go,Po.prototype)?!0:((Fr=go.constructor)===null||Fr===void 0?void 0:Fr.name)===Po.name},b=go=>{const Po=typeof go;return go===null?"null":Po==="object"&&Array.isArray(go)?"array":Po==="object"&&d(go,String,(Sr,Fr)=>Fr.isPrototypeOf(Sr))?"string":Po},_=go=>Po=>b(Po)===go,_e=go=>Po=>typeof Po===go,nt=go=>Po=>go===Po,rt=_("string"),ct=_("object"),dt=nt(null),pt=_e("boolean"),bt=go=>go==null,xt=go=>!bt(go),wt=_e("number");class Tt{constructor(Po,Sr){this.tag=Po,this.value=Sr}static some(Po){return new Tt(!0,Po)}static none(){return Tt.singletonNone}fold(Po,Sr){return this.tag?Sr(this.value):Po()}isSome(){return this.tag}isNone(){return!this.tag}map(Po){return this.tag?Tt.some(Po(this.value)):Tt.none()}bind(Po){return this.tag?Po(this.value):Tt.none()}exists(Po){return this.tag&&Po(this.value)}forall(Po){return!this.tag||Po(this.value)}filter(Po){return!this.tag||Po(this.value)?this:Tt.none()}getOr(Po){return this.tag?this.value:Po}or(Po){return this.tag?this:Po}getOrThunk(Po){return this.tag?this.value:Po()}orThunk(Po){return this.tag?this:Po()}getOrDie(Po){if(this.tag)return this.value;throw new Error(Po??"Called getOrDie on None")}static from(Po){return xt(Po)?Tt.some(Po):Tt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Po){this.tag&&Po(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Tt.singletonNone=new Tt(!1);const Rt=(go,Po)=>{const Sr=go.length,Fr=new Array(Sr);for(let Us=0;Us<Sr;Us++){const xa=go[Us];Fr[Us]=Po(xa,Us)}return Fr},Mt=(go,Po)=>{for(let Sr=0,Fr=go.length;Sr<Fr;Sr++){const Us=go[Sr];Po(Us,Sr)}},Et=(go,Po)=>{const Sr=[];for(let Fr=0,Us=go.length;Fr<Us;Fr++){const xa=go[Fr];Po(xa,Fr)&&Sr.push(xa)}return Sr},$t=Object.keys,Xt=(go,Po)=>{const Sr=$t(go);for(let Fr=0,Us=Sr.length;Fr<Us;Fr++){const xa=Sr[Fr],ju=go[xa];Po(ju,xa)}},Zt=typeof window<"u"?window:Function("return this;")(),Nt=(go,Po)=>{let Sr=Po??Zt;for(let Fr=0;Fr<go.length&&Sr!==void 0&&Sr!==null;++Fr)Sr=Sr[go[Fr]];return Sr},Jt=(go,Po)=>{const Sr=go.split(".");return Nt(Sr,Po)},dn=(go,Po)=>Jt(go,Po),Pn=(go,Po)=>{const Sr=dn(go,Po);if(Sr==null)throw new Error(go+" not available on this browser");return Sr},an=Object.getPrototypeOf,Vt=go=>Pn("HTMLElement",go),ao=go=>{const Po=Jt("ownerDocument.defaultView",go);return ct(go)&&(Vt(Po).prototype.isPrototypeOf(go)||/^HTML\w*Element$/.test(an(go).constructor.name))},hn=1,fn=3,It=go=>go.dom.nodeType,Vn=go=>go.dom.nodeValue,ln=go=>Po=>It(Po)===go,uo=go=>Ln(go)&&ao(go.dom),Ln=ln(hn),An=ln(fn),Wn=(go,Po,Sr)=>{if(rt(Sr)||pt(Sr)||wt(Sr))go.setAttribute(Po,Sr+"");else throw console.error("Invalid call to Attribute.set. Key ",Po,":: Value ",Sr,":: Element ",go),new Error("Attribute value was not simple")},er=(go,Po,Sr)=>{Wn(go.dom,Po,Sr)},no=(go,Po)=>{const Sr=go.dom.getAttribute(Po);return Sr===null?void 0:Sr},Ro=(go,Po)=>{go.dom.removeAttribute(Po)},On=(go,Po)=>{const Sr=no(go,Po);return Sr===void 0||Sr===""?[]:Sr.split(" ")},_o=(go,Po,Sr)=>{const Us=On(go,Po).concat([Sr]);return er(go,Po,Us.join(" ")),!0},Yt=(go,Po,Sr)=>{const Fr=Et(On(go,Po),Us=>Us!==Sr);return Fr.length>0?er(go,Po,Fr.join(" ")):Ro(go,Po),!1},jr=go=>go.dom.classList!==void 0,lo=go=>On(go,"class"),Ho=(go,Po)=>_o(go,"class",Po),mo=(go,Po)=>Yt(go,"class",Po),Co=(go,Po)=>{jr(go)?go.dom.classList.add(Po):Ho(go,Po)},mn=go=>{(jr(go)?go.dom.classList:lo(go)).length===0&&Ro(go,"class")},wn=(go,Po)=>{jr(go)?go.dom.classList.remove(Po):mo(go,Po),mn(go)},Dn=(go,Po)=>{const Fr=(Po||document).createElement("div");if(Fr.innerHTML=go,!Fr.hasChildNodes()||Fr.childNodes.length>1){const Us="HTML does not have a single root node";throw console.error(Us,go),new Error(Us)}return Nn(Fr.childNodes[0])},rn=(go,Po)=>{const Fr=(Po||document).createElement(go);return Nn(Fr)},Cn=(go,Po)=>{const Fr=(Po||document).createTextNode(go);return Nn(Fr)},Nn=go=>{if(go==null)throw new Error("Node cannot be null or undefined");return{dom:go}},So={fromHtml:Dn,fromTag:rn,fromText:Cn,fromDom:Nn,fromPoint:(go,Po,Sr)=>Tt.from(go.dom.elementFromPoint(Po,Sr)).map(Nn)},Hn={"":"nbsp","":"shy"},Tn=(go,Po)=>{let Sr="";return Xt(go,(Fr,Us)=>{Sr+=Us}),new RegExp("["+Sr+"]",Po?"g":"")},Jn=go=>{let Po="";return Xt(go,Sr=>{Po&&(Po+=","),Po+="span.mce-"+Sr}),Po},bo=Tn(Hn),$n=Tn(Hn,!0),oo=Jn(Hn),wo="mce-nbsp",Oo=go=>go.dom.contentEditable,Ir=go=>'<span data-mce-bogus="1" class="mce-'+Hn[go]+'">'+go+"</span>",sr=go=>go.nodeName.toLowerCase()==="span"&&go.classList.contains("mce-nbsp-wrap"),vr=go=>{const Po=Vn(go);return An(go)&&rt(Po)&&bo.test(Po)},as=go=>uo(go)&&Oo(go)==="false",_r=(go,Po)=>{if(uo(go)&&!sr(go.dom)){const Sr=Oo(go);if(Sr==="true")return!0;if(Sr==="false")return!1}return Po},fs=(go,Po,Sr)=>{let Fr=[];const Us=go.dom,xa=Rt(Us.childNodes,So.fromDom),ju=Uu=>sr(Uu.dom)||!as(Uu);return Mt(xa,Uu=>{Sr&&ju(Uu)&&Po(Uu)&&(Fr=Fr.concat([Uu])),Fr=Fr.concat(fs(Uu,Po,_r(Uu,Sr)))}),Fr},Ss=(go,Po)=>{for(;go.parentNode;){if(go.parentNode===Po)return Po;go=go.parentNode}},As=go=>go.replace($n,Ir),_l=(go,Po)=>{const Sr=go.dom,Fr=fs(So.fromDom(Po),vr,go.dom.isEditable(Po));Mt(Fr,Us=>{var xa;const ju=Us.dom.parentNode;if(sr(ju))Co(So.fromDom(ju),wo);else{const Uu=As(Sr.encode((xa=Vn(Us))!==null&&xa!==void 0?xa:"")),Au=Sr.create("div",{},Uu);let Un;for(;Un=Au.lastChild;)Sr.insertAfter(Un,Us.dom);go.dom.remove(Us.dom)}})},Zr=(go,Po)=>{const Sr=go.dom.select(oo,Po);Mt(Sr,Fr=>{sr(Fr)?wn(So.fromDom(Fr),wo):go.dom.remove(Fr,!0)})},Ml=go=>{const Po=go.getBody(),Sr=go.selection.getBookmark();let Fr=Ss(go.selection.getNode(),Po);Fr=Fr!==void 0?Fr:Po,Zr(go,Fr),_l(go,Fr),go.selection.moveToBookmark(Sr)},tr=(go,Po)=>{a(go,Po.get());const Sr=go.getBody();Po.get()===!0?_l(go,Sr):Zr(go,Sr)},Ms=(go,Po)=>{Po.set(!Po.get());const Sr=go.selection.getBookmark();tr(go,Po),go.selection.moveToBookmark(Sr)},cu=(go,Po)=>{go.addCommand("mceVisualChars",()=>{Ms(go,Po)})},ou=go=>Po=>Po.options.get(go),Yl=go=>{const Po=go.options.register;Po("visualchars_default_state",{processor:"boolean",default:!1})},xu=ou("visualchars_default_state"),Vs=(go,Po)=>{go.on("init",()=>{tr(go,Po)})},wu=(go,Po)=>{let Sr=null;return{cancel:()=>{dt(Sr)||(clearTimeout(Sr),Sr=null)},throttle:(...xa)=>{dt(Sr)&&(Sr=setTimeout(()=>{Sr=null,go.apply(null,xa)},Po))}}},iu=(go,Po)=>{const Sr=wu(()=>{Ml(go)},300);go.on("keydown",Fr=>{Po.get()===!0&&(Fr.keyCode===13?Ml(go):Sr.throttle())}),go.on("remove",Sr.cancel)},ba=(go,Po)=>Sr=>{Sr.setActive(Po.get());const Fr=Us=>Sr.setActive(Us.state);return go.on("VisualChars",Fr),()=>go.off("VisualChars",Fr)},Jr=(go,Po)=>{const Sr=()=>go.execCommand("mceVisualChars");go.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:Sr,onSetup:ba(go,Po),context:"any"}),go.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:Sr,onSetup:ba(go,Po),context:"any"})};var _a=()=>{e.add("visualchars",go=>{Yl(go);const Po=o(xu(go));return cu(go,Po),Jr(go,Po),iu(go,Po),Vs(go,Po),s(Po)})};_a()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=(mn=>wn=>mn===wn)(null),a=mn=>mn,d=(mn,wn)=>{const Dn=mn.length,rn=new Array(Dn);for(let Cn=0;Cn<Dn;Cn++){const Nn=mn[Cn];rn[Cn]=wn(Nn,Cn)}return rn},_={aletter:"[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]",midnumlet:"[-'\\.]",midletter:"[:]",midnum:"[+*/,;;]",numeric:"[0-9---------------------------------]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[------------------------------------------------------------------------------------------------------]",format:"[----\uFEFF-]",katakana:"[-------]",extendnumlet:"[=_--<>]",punctuation:"[~|!-*+-\\/:;?@\\[-`{};----------------------------------------------]"},_e={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},nt=[new RegExp(_.aletter),new RegExp(_.midnumlet),new RegExp(_.midletter),new RegExp(_.midnum),new RegExp(_.numeric),new RegExp(_.cr),new RegExp(_.lf),new RegExp(_.newline),new RegExp(_.extend),new RegExp(_.format),new RegExp(_.katakana),new RegExp(_.extendnumlet),new RegExp("@")],rt="",ct=new RegExp("^"+_.punctuation+"$"),dt=/^\s+$/,pt=nt,bt=_e.OTHER,xt=mn=>{let wn=bt;const Dn=pt.length;for(let rn=0;rn<Dn;++rn){const Cn=pt[rn];if(Cn&&Cn.test(mn)){wn=rn;break}}return wn},wt=mn=>{const wn={};return Dn=>{if(wn[Dn])return wn[Dn];{const rn=mn(Dn);return wn[Dn]=rn,rn}}},Tt=mn=>{const wn=wt(xt);return d(mn,wn)},Rt=(mn,wn)=>{const Dn=mn[wn],rn=mn[wn+1];if(wn<0||wn>mn.length-1&&wn!==0||Dn===_e.ALETTER&&rn===_e.ALETTER)return!1;const Cn=mn[wn+2];if(Dn===_e.ALETTER&&(rn===_e.MIDLETTER||rn===_e.MIDNUMLET||rn===_e.AT)&&Cn===_e.ALETTER)return!1;const Nn=mn[wn-1];return(Dn===_e.MIDLETTER||Dn===_e.MIDNUMLET||rn===_e.AT)&&rn===_e.ALETTER&&Nn===_e.ALETTER||(Dn===_e.NUMERIC||Dn===_e.ALETTER)&&(rn===_e.NUMERIC||rn===_e.ALETTER)||(Dn===_e.MIDNUM||Dn===_e.MIDNUMLET)&&rn===_e.NUMERIC&&Nn===_e.NUMERIC||Dn===_e.NUMERIC&&(rn===_e.MIDNUM||rn===_e.MIDNUMLET)&&Cn===_e.NUMERIC||(Dn===_e.EXTEND||Dn===_e.FORMAT)&&(rn===_e.ALETTER||rn===_e.NUMERIC||rn===_e.KATAKANA||rn===_e.EXTEND||rn===_e.FORMAT)||(rn===_e.EXTEND||rn===_e.FORMAT&&(Cn===_e.ALETTER||Cn===_e.NUMERIC||Cn===_e.KATAKANA||Cn===_e.EXTEND||Cn===_e.FORMAT))&&(Dn===_e.ALETTER||Dn===_e.NUMERIC||Dn===_e.KATAKANA||Dn===_e.EXTEND||Dn===_e.FORMAT)||Dn===_e.CR&&rn===_e.LF?!1:Dn===_e.NEWLINE||Dn===_e.CR||Dn===_e.LF||rn===_e.NEWLINE||rn===_e.CR||rn===_e.LF?!0:!(Dn===_e.KATAKANA&&rn===_e.KATAKANA||rn===_e.EXTENDNUMLET&&(Dn===_e.ALETTER||Dn===_e.NUMERIC||Dn===_e.KATAKANA||Dn===_e.EXTENDNUMLET)||Dn===_e.EXTENDNUMLET&&(rn===_e.ALETTER||rn===_e.NUMERIC||rn===_e.KATAKANA)||Dn===_e.AT)},Mt=rt,Et=dt,$t=ct,Xt=mn=>mn==="http"||mn==="https",Zt=(mn,wn)=>{let Dn;for(Dn=wn;Dn<mn.length&&!Et.test(mn[Dn]);Dn++);return Dn},Nt=(mn,wn)=>{const Dn=Zt(mn,wn+1);return mn.slice(wn+1,Dn).join(Mt).substr(0,3)==="://"?Dn:wn},Jt=(mn,wn,Dn,rn)=>{const Cn=[],Nn=[];let zn=[];for(let So=0;So<Dn.length;++So)if(zn.push(mn[So]),Rt(Dn,So)){const Hn=wn[So];if((rn.includeWhitespace||!Et.test(Hn))&&(rn.includePunctuation||!$t.test(Hn))){const Tn=So-zn.length+1,Jn=So+1,bo=wn.slice(Tn,Jn).join(Mt);if(Xt(bo)){const $n=Nt(wn,So),oo=mn.slice(Jn,$n);Array.prototype.push.apply(zn,oo),So=$n}wn[So+1]==="."&&/^([a-zA-Z]\.)+$/.test(bo+".")?(zn.push(mn[So+1]),Nn.push({start:Tn,end:Jn+1})):Nn.push({start:Tn,end:Jn}),Cn.push(zn)}zn=[]}return{words:Cn,indices:Nn}},dn=()=>({includeWhitespace:!1,includePunctuation:!1}),Pn=(mn,wn,Dn)=>{Dn={...dn(),...Dn};const rn=d(mn,wn),Cn=Tt(rn);return Jt(mn,rn,Cn,Dn)},Vt=(mn,wn,Dn)=>Pn(mn,wn,Dn).words,ao=mn=>mn.replace(/\uFEFF/g,"");var hn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const fn=(mn,wn)=>{const Dn=wn.getBlockElements(),rn=wn.getVoidElements(),Cn=Tn=>Dn[Tn.nodeName]||rn[Tn.nodeName],Nn=[];let zn="";const So=new hn(mn,mn);let Hn;for(;Hn=So.next();)Hn.nodeType===3?zn+=ao(Hn.data):Cn(Hn)&&zn.length&&(Nn.push(zn),zn="");return zn.length&&Nn.push(zn),Nn},It=mn=>mn.replace(/\u200B/g,""),Vn=mn=>mn.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,ln=(mn,wn)=>{const Dn=It(fn(mn,wn).join(`
`));return Vt(Dn.split(""),a).length},uo=(mn,wn)=>{const Dn=fn(mn,wn).join("");return Vn(Dn)},Ln=(mn,wn)=>{const Dn=fn(mn,wn).join("").replace(/\s/g,"");return Vn(Dn)},An=(mn,wn)=>()=>wn(mn.getBody(),mn.schema),Wn=(mn,wn)=>()=>wn(mn.selection.getRng().cloneContents(),mn.schema),er=mn=>An(mn,ln),no=mn=>({body:{getWordCount:er(mn),getCharacterCount:An(mn,uo),getCharacterCountWithoutSpaces:An(mn,Ln)},selection:{getWordCount:Wn(mn,ln),getCharacterCount:Wn(mn,uo),getCharacterCountWithoutSpaces:Wn(mn,Ln)},getCount:er(mn)}),Ro=(mn,wn)=>{mn.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(wn.body.getWordCount()),String(wn.selection.getWordCount())],["Characters (no spaces)",String(wn.body.getCharacterCountWithoutSpaces()),String(wn.selection.getCharacterCountWithoutSpaces())],["Characters",String(wn.body.getCharacterCount()),String(wn.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},On=(mn,wn)=>{mn.addCommand("mceWordCount",()=>Ro(mn,wn))},_o=(mn,wn)=>{let Dn=null;return{cancel:()=>{s(Dn)||(clearTimeout(Dn),Dn=null)},throttle:(...Nn)=>{s(Dn)&&(Dn=setTimeout(()=>{Dn=null,mn.apply(null,Nn)},wn))}}};var Yt=tinymce.util.Tools.resolve("tinymce.util.Delay");const jr=(mn,wn)=>{mn.dispatch("wordCountUpdate",{wordCount:{words:wn.body.getWordCount(),characters:wn.body.getCharacterCount(),charactersWithoutSpaces:wn.body.getCharacterCountWithoutSpaces()}})},lo=(mn,wn)=>{jr(mn,wn)},Ho=(mn,wn,Dn)=>{const rn=_o(()=>lo(mn,wn),Dn);mn.on("init",()=>{lo(mn,wn),Yt.setEditorTimeout(mn,()=>{mn.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",rn.throttle)},0),mn.on("remove",rn.cancel)})},mo=mn=>{const wn=()=>mn.execCommand("mceWordCount");mn.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:wn,context:"any"}),mn.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:wn,context:"any"})};var Co=(mn=300)=>{o.add("wordcount",wn=>{const Dn=no(wn);return On(wn,Dn),mo(wn),Ho(wn,Dn,mn),Dn})};Co()})();window.tinymce.Resource.add("tinymce.plugins.emoticons",{grinning:{keywords:["face","smile","happy","joy",":D","grin"],char:"",fitzpatrick_scale:!1,category:"people"},grimacing:{keywords:["face","grimace","teeth"],char:"",fitzpatrick_scale:!1,category:"people"},grin:{keywords:["face","happy","smile","joy","kawaii"],char:"",fitzpatrick_scale:!1,category:"people"},joy:{keywords:["face","cry","tears","weep","happy","happytears","haha"],char:"",fitzpatrick_scale:!1,category:"people"},rofl:{keywords:["face","rolling","floor","laughing","lol","haha"],char:"",fitzpatrick_scale:!1,category:"people"},partying:{keywords:["face","celebration","woohoo"],char:"",fitzpatrick_scale:!1,category:"people"},smiley:{keywords:["face","happy","joy","haha",":D",":)","smile","funny"],char:"",fitzpatrick_scale:!1,category:"people"},smile:{keywords:["face","happy","joy","funny","haha","laugh","like",":D",":)"],char:"",fitzpatrick_scale:!1,category:"people"},sweat_smile:{keywords:["face","hot","happy","laugh","sweat","smile","relief"],char:"",fitzpatrick_scale:!1,category:"people"},laughing:{keywords:["happy","joy","lol","satisfied","haha","face","glad","XD","laugh"],char:"",fitzpatrick_scale:!1,category:"people"},innocent:{keywords:["face","angel","heaven","halo"],char:"",fitzpatrick_scale:!1,category:"people"},wink:{keywords:["face","happy","mischievous","secret",";)","smile","eye"],char:"",fitzpatrick_scale:!1,category:"people"},blush:{keywords:["face","smile","happy","flushed","crush","embarrassed","shy","joy"],char:"",fitzpatrick_scale:!1,category:"people"},slightly_smiling_face:{keywords:["face","smile"],char:"",fitzpatrick_scale:!1,category:"people"},upside_down_face:{keywords:["face","flipped","silly","smile"],char:"",fitzpatrick_scale:!1,category:"people"},relaxed:{keywords:["face","blush","massage","happiness"],char:"",fitzpatrick_scale:!1,category:"people"},yum:{keywords:["happy","joy","tongue","smile","face","silly","yummy","nom","delicious","savouring"],char:"",fitzpatrick_scale:!1,category:"people"},relieved:{keywords:["face","relaxed","phew","massage","happiness"],char:"",fitzpatrick_scale:!1,category:"people"},heart_eyes:{keywords:["face","love","like","affection","valentines","infatuation","crush","heart"],char:"",fitzpatrick_scale:!1,category:"people"},smiling_face_with_three_hearts:{keywords:["face","love","like","affection","valentines","infatuation","crush","hearts","adore"],char:"",fitzpatrick_scale:!1,category:"people"},kissing_heart:{keywords:["face","love","like","affection","valentines","infatuation","kiss"],char:"",fitzpatrick_scale:!1,category:"people"},kissing:{keywords:["love","like","face","3","valentines","infatuation","kiss"],char:"",fitzpatrick_scale:!1,category:"people"},kissing_smiling_eyes:{keywords:["face","affection","valentines","infatuation","kiss"],char:"",fitzpatrick_scale:!1,category:"people"},kissing_closed_eyes:{keywords:["face","love","like","affection","valentines","infatuation","kiss"],char:"",fitzpatrick_scale:!1,category:"people"},stuck_out_tongue_winking_eye:{keywords:["face","prank","childish","playful","mischievous","smile","wink","tongue"],char:"",fitzpatrick_scale:!1,category:"people"},zany:{keywords:["face","goofy","crazy"],char:"",fitzpatrick_scale:!1,category:"people"},raised_eyebrow:{keywords:["face","distrust","scepticism","disapproval","disbelief","surprise"],char:"",fitzpatrick_scale:!1,category:"people"},monocle:{keywords:["face","stuffy","wealthy"],char:"",fitzpatrick_scale:!1,category:"people"},stuck_out_tongue_closed_eyes:{keywords:["face","prank","playful","mischievous","smile","tongue"],char:"",fitzpatrick_scale:!1,category:"people"},stuck_out_tongue:{keywords:["face","prank","childish","playful","mischievous","smile","tongue"],char:"",fitzpatrick_scale:!1,category:"people"},money_mouth_face:{keywords:["face","rich","dollar","money"],char:"",fitzpatrick_scale:!1,category:"people"},nerd_face:{keywords:["face","nerdy","geek","dork"],char:"",fitzpatrick_scale:!1,category:"people"},sunglasses:{keywords:["face","cool","smile","summer","beach","sunglass"],char:"",fitzpatrick_scale:!1,category:"people"},star_struck:{keywords:["face","smile","starry","eyes","grinning"],char:"",fitzpatrick_scale:!1,category:"people"},clown_face:{keywords:["face"],char:"",fitzpatrick_scale:!1,category:"people"},cowboy_hat_face:{keywords:["face","cowgirl","hat"],char:"",fitzpatrick_scale:!1,category:"people"},hugs:{keywords:["face","smile","hug"],char:"",fitzpatrick_scale:!1,category:"people"},smirk:{keywords:["face","smile","mean","prank","smug","sarcasm"],char:"",fitzpatrick_scale:!1,category:"people"},no_mouth:{keywords:["face","hellokitty"],char:"",fitzpatrick_scale:!1,category:"people"},neutral_face:{keywords:["indifference","meh",":|","neutral"],char:"",fitzpatrick_scale:!1,category:"people"},expressionless:{keywords:["face","indifferent","-_-","meh","deadpan"],char:"",fitzpatrick_scale:!1,category:"people"},unamused:{keywords:["indifference","bored","straight face","serious","sarcasm","unimpressed","skeptical","dubious","side_eye"],char:"",fitzpatrick_scale:!1,category:"people"},roll_eyes:{keywords:["face","eyeroll","frustrated"],char:"",fitzpatrick_scale:!1,category:"people"},thinking:{keywords:["face","hmmm","think","consider"],char:"",fitzpatrick_scale:!1,category:"people"},lying_face:{keywords:["face","lie","pinocchio"],char:"",fitzpatrick_scale:!1,category:"people"},hand_over_mouth:{keywords:["face","whoops","shock","surprise"],char:"",fitzpatrick_scale:!1,category:"people"},shushing:{keywords:["face","quiet","shhh"],char:"",fitzpatrick_scale:!1,category:"people"},symbols_over_mouth:{keywords:["face","swearing","cursing","cussing","profanity","expletive"],char:"",fitzpatrick_scale:!1,category:"people"},exploding_head:{keywords:["face","shocked","mind","blown"],char:"",fitzpatrick_scale:!1,category:"people"},flushed:{keywords:["face","blush","shy","flattered"],char:"",fitzpatrick_scale:!1,category:"people"},disappointed:{keywords:["face","sad","upset","depressed",":("],char:"",fitzpatrick_scale:!1,category:"people"},worried:{keywords:["face","concern","nervous",":("],char:"",fitzpatrick_scale:!1,category:"people"},angry:{keywords:["mad","face","annoyed","frustrated"],char:"",fitzpatrick_scale:!1,category:"people"},rage:{keywords:["angry","mad","hate","despise"],char:"",fitzpatrick_scale:!1,category:"people"},pensive:{keywords:["face","sad","depressed","upset"],char:"",fitzpatrick_scale:!1,category:"people"},confused:{keywords:["face","indifference","huh","weird","hmmm",":/"],char:"",fitzpatrick_scale:!1,category:"people"},slightly_frowning_face:{keywords:["face","frowning","disappointed","sad","upset"],char:"",fitzpatrick_scale:!1,category:"people"},frowning_face:{keywords:["face","sad","upset","frown"],char:"",fitzpatrick_scale:!1,category:"people"},persevere:{keywords:["face","sick","no","upset","oops"],char:"",fitzpatrick_scale:!1,category:"people"},confounded:{keywords:["face","confused","sick","unwell","oops",":S"],char:"",fitzpatrick_scale:!1,category:"people"},tired_face:{keywords:["sick","whine","upset","frustrated"],char:"",fitzpatrick_scale:!1,category:"people"},weary:{keywords:["face","tired","sleepy","sad","frustrated","upset"],char:"",fitzpatrick_scale:!1,category:"people"},pleading:{keywords:["face","begging","mercy"],char:"",fitzpatrick_scale:!1,category:"people"},triumph:{keywords:["face","gas","phew","proud","pride"],char:"",fitzpatrick_scale:!1,category:"people"},open_mouth:{keywords:["face","surprise","impressed","wow","whoa",":O"],char:"",fitzpatrick_scale:!1,category:"people"},scream:{keywords:["face","munch","scared","omg"],char:"",fitzpatrick_scale:!1,category:"people"},fearful:{keywords:["face","scared","terrified","nervous","oops","huh"],char:"",fitzpatrick_scale:!1,category:"people"},cold_sweat:{keywords:["face","nervous","sweat"],char:"",fitzpatrick_scale:!1,category:"people"},hushed:{keywords:["face","woo","shh"],char:"",fitzpatrick_scale:!1,category:"people"},frowning:{keywords:["face","aw","what"],char:"",fitzpatrick_scale:!1,category:"people"},anguished:{keywords:["face","stunned","nervous"],char:"",fitzpatrick_scale:!1,category:"people"},cry:{keywords:["face","tears","sad","depressed","upset",":'("],char:"",fitzpatrick_scale:!1,category:"people"},disappointed_relieved:{keywords:["face","phew","sweat","nervous"],char:"",fitzpatrick_scale:!1,category:"people"},drooling_face:{keywords:["face"],char:"",fitzpatrick_scale:!1,category:"people"},sleepy:{keywords:["face","tired","rest","nap"],char:"",fitzpatrick_scale:!1,category:"people"},sweat:{keywords:["face","hot","sad","tired","exercise"],char:"",fitzpatrick_scale:!1,category:"people"},hot:{keywords:["face","feverish","heat","red","sweating"],char:"",fitzpatrick_scale:!1,category:"people"},cold:{keywords:["face","blue","freezing","frozen","frostbite","icicles"],char:"",fitzpatrick_scale:!1,category:"people"},sob:{keywords:["face","cry","tears","sad","upset","depressed"],char:"",fitzpatrick_scale:!1,category:"people"},dizzy_face:{keywords:["spent","unconscious","xox","dizzy"],char:"",fitzpatrick_scale:!1,category:"people"},astonished:{keywords:["face","xox","surprised","poisoned"],char:"",fitzpatrick_scale:!1,category:"people"},zipper_mouth_face:{keywords:["face","sealed","zipper","secret"],char:"",fitzpatrick_scale:!1,category:"people"},nauseated_face:{keywords:["face","vomit","gross","green","sick","throw up","ill"],char:"",fitzpatrick_scale:!1,category:"people"},sneezing_face:{keywords:["face","gesundheit","sneeze","sick","allergy"],char:"",fitzpatrick_scale:!1,category:"people"},vomiting:{keywords:["face","sick"],char:"",fitzpatrick_scale:!1,category:"people"},mask:{keywords:["face","sick","ill","disease"],char:"",fitzpatrick_scale:!1,category:"people"},face_with_thermometer:{keywords:["sick","temperature","thermometer","cold","fever"],char:"",fitzpatrick_scale:!1,category:"people"},face_with_head_bandage:{keywords:["injured","clumsy","bandage","hurt"],char:"",fitzpatrick_scale:!1,category:"people"},woozy:{keywords:["face","dizzy","intoxicated","tipsy","wavy"],char:"",fitzpatrick_scale:!1,category:"people"},sleeping:{keywords:["face","tired","sleepy","night","zzz"],char:"",fitzpatrick_scale:!1,category:"people"},zzz:{keywords:["sleepy","tired","dream"],char:"",fitzpatrick_scale:!1,category:"people"},poop:{keywords:["hankey","shitface","fail","turd","shit"],char:"",fitzpatrick_scale:!1,category:"people"},smiling_imp:{keywords:["devil","horns"],char:"",fitzpatrick_scale:!1,category:"people"},imp:{keywords:["devil","angry","horns"],char:"",fitzpatrick_scale:!1,category:"people"},japanese_ogre:{keywords:["monster","red","mask","halloween","scary","creepy","devil","demon","japanese","ogre"],char:"",fitzpatrick_scale:!1,category:"people"},japanese_goblin:{keywords:["red","evil","mask","monster","scary","creepy","japanese","goblin"],char:"",fitzpatrick_scale:!1,category:"people"},skull:{keywords:["dead","skeleton","creepy","death"],char:"",fitzpatrick_scale:!1,category:"people"},ghost:{keywords:["halloween","spooky","scary"],char:"",fitzpatrick_scale:!1,category:"people"},alien:{keywords:["UFO","paul","weird","outer_space"],char:"",fitzpatrick_scale:!1,category:"people"},robot:{keywords:["computer","machine","bot"],char:"",fitzpatrick_scale:!1,category:"people"},smiley_cat:{keywords:["animal","cats","happy","smile"],char:"",fitzpatrick_scale:!1,category:"people"},smile_cat:{keywords:["animal","cats","smile"],char:"",fitzpatrick_scale:!1,category:"people"},joy_cat:{keywords:["animal","cats","haha","happy","tears"],char:"",fitzpatrick_scale:!1,category:"people"},heart_eyes_cat:{keywords:["animal","love","like","affection","cats","valentines","heart"],char:"",fitzpatrick_scale:!1,category:"people"},smirk_cat:{keywords:["animal","cats","smirk"],char:"",fitzpatrick_scale:!1,category:"people"},kissing_cat:{keywords:["animal","cats","kiss"],char:"",fitzpatrick_scale:!1,category:"people"},scream_cat:{keywords:["animal","cats","munch","scared","scream"],char:"",fitzpatrick_scale:!1,category:"people"},crying_cat_face:{keywords:["animal","tears","weep","sad","cats","upset","cry"],char:"",fitzpatrick_scale:!1,category:"people"},pouting_cat:{keywords:["animal","cats"],char:"",fitzpatrick_scale:!1,category:"people"},palms_up:{keywords:["hands","gesture","cupped","prayer"],char:"",fitzpatrick_scale:!0,category:"people"},raised_hands:{keywords:["gesture","hooray","yea","celebration","hands"],char:"",fitzpatrick_scale:!0,category:"people"},clap:{keywords:["hands","praise","applause","congrats","yay"],char:"",fitzpatrick_scale:!0,category:"people"},wave:{keywords:["hands","gesture","goodbye","solong","farewell","hello","hi","palm"],char:"",fitzpatrick_scale:!0,category:"people"},call_me_hand:{keywords:["hands","gesture"],char:"",fitzpatrick_scale:!0,category:"people"},"+1":{keywords:["thumbsup","yes","awesome","good","agree","accept","cool","hand","like"],char:"",fitzpatrick_scale:!0,category:"people"},"-1":{keywords:["thumbsdown","no","dislike","hand"],char:"",fitzpatrick_scale:!0,category:"people"},facepunch:{keywords:["angry","violence","fist","hit","attack","hand"],char:"",fitzpatrick_scale:!0,category:"people"},fist:{keywords:["fingers","hand","grasp"],char:"",fitzpatrick_scale:!0,category:"people"},fist_left:{keywords:["hand","fistbump"],char:"",fitzpatrick_scale:!0,category:"people"},fist_right:{keywords:["hand","fistbump"],char:"",fitzpatrick_scale:!0,category:"people"},v:{keywords:["fingers","ohyeah","hand","peace","victory","two"],char:"",fitzpatrick_scale:!0,category:"people"},ok_hand:{keywords:["fingers","limbs","perfect","ok","okay"],char:"",fitzpatrick_scale:!0,category:"people"},raised_hand:{keywords:["fingers","stop","highfive","palm","ban"],char:"",fitzpatrick_scale:!0,category:"people"},raised_back_of_hand:{keywords:["fingers","raised","backhand"],char:"",fitzpatrick_scale:!0,category:"people"},open_hands:{keywords:["fingers","butterfly","hands","open"],char:"",fitzpatrick_scale:!0,category:"people"},muscle:{keywords:["arm","flex","hand","summer","strong","biceps"],char:"",fitzpatrick_scale:!0,category:"people"},pray:{keywords:["please","hope","wish","namaste","highfive"],char:"",fitzpatrick_scale:!0,category:"people"},foot:{keywords:["kick","stomp"],char:"",fitzpatrick_scale:!0,category:"people"},leg:{keywords:["kick","limb"],char:"",fitzpatrick_scale:!0,category:"people"},handshake:{keywords:["agreement","shake"],char:"",fitzpatrick_scale:!1,category:"people"},point_up:{keywords:["hand","fingers","direction","up"],char:"",fitzpatrick_scale:!0,category:"people"},point_up_2:{keywords:["fingers","hand","direction","up"],char:"",fitzpatrick_scale:!0,category:"people"},point_down:{keywords:["fingers","hand","direction","down"],char:"",fitzpatrick_scale:!0,category:"people"},point_left:{keywords:["direction","fingers","hand","left"],char:"",fitzpatrick_scale:!0,category:"people"},point_right:{keywords:["fingers","hand","direction","right"],char:"",fitzpatrick_scale:!0,category:"people"},fu:{keywords:["hand","fingers","rude","middle","flipping"],char:"",fitzpatrick_scale:!0,category:"people"},raised_hand_with_fingers_splayed:{keywords:["hand","fingers","palm"],char:"",fitzpatrick_scale:!0,category:"people"},love_you:{keywords:["hand","fingers","gesture"],char:"",fitzpatrick_scale:!0,category:"people"},metal:{keywords:["hand","fingers","evil_eye","sign_of_horns","rock_on"],char:"",fitzpatrick_scale:!0,category:"people"},crossed_fingers:{keywords:["good","lucky"],char:"",fitzpatrick_scale:!0,category:"people"},vulcan_salute:{keywords:["hand","fingers","spock","star trek"],char:"",fitzpatrick_scale:!0,category:"people"},writing_hand:{keywords:["lower_left_ballpoint_pen","stationery","write","compose"],char:"",fitzpatrick_scale:!0,category:"people"},selfie:{keywords:["camera","phone"],char:"",fitzpatrick_scale:!0,category:"people"},nail_care:{keywords:["beauty","manicure","finger","fashion","nail"],char:"",fitzpatrick_scale:!0,category:"people"},lips:{keywords:["mouth","kiss"],char:"",fitzpatrick_scale:!1,category:"people"},tooth:{keywords:["teeth","dentist"],char:"",fitzpatrick_scale:!1,category:"people"},tongue:{keywords:["mouth","playful"],char:"",fitzpatrick_scale:!1,category:"people"},ear:{keywords:["face","hear","sound","listen"],char:"",fitzpatrick_scale:!0,category:"people"},nose:{keywords:["smell","sniff"],char:"",fitzpatrick_scale:!0,category:"people"},eye:{keywords:["face","look","see","watch","stare"],char:"",fitzpatrick_scale:!1,category:"people"},eyes:{keywords:["look","watch","stalk","peek","see"],char:"",fitzpatrick_scale:!1,category:"people"},brain:{keywords:["smart","intelligent"],char:"",fitzpatrick_scale:!1,category:"people"},bust_in_silhouette:{keywords:["user","person","human"],char:"",fitzpatrick_scale:!1,category:"people"},busts_in_silhouette:{keywords:["user","person","human","group","team"],char:"",fitzpatrick_scale:!1,category:"people"},speaking_head:{keywords:["user","person","human","sing","say","talk"],char:"",fitzpatrick_scale:!1,category:"people"},baby:{keywords:["child","boy","girl","toddler"],char:"",fitzpatrick_scale:!0,category:"people"},child:{keywords:["gender-neutral","young"],char:"",fitzpatrick_scale:!0,category:"people"},boy:{keywords:["man","male","guy","teenager"],char:"",fitzpatrick_scale:!0,category:"people"},girl:{keywords:["female","woman","teenager"],char:"",fitzpatrick_scale:!0,category:"people"},adult:{keywords:["gender-neutral","person"],char:"",fitzpatrick_scale:!0,category:"people"},man:{keywords:["mustache","father","dad","guy","classy","sir","moustache"],char:"",fitzpatrick_scale:!0,category:"people"},woman:{keywords:["female","girls","lady"],char:"",fitzpatrick_scale:!0,category:"people"},blonde_woman:{keywords:["woman","female","girl","blonde","person"],char:"",fitzpatrick_scale:!0,category:"people"},blonde_man:{keywords:["man","male","boy","blonde","guy","person"],char:"",fitzpatrick_scale:!0,category:"people"},bearded_person:{keywords:["person","bewhiskered"],char:"",fitzpatrick_scale:!0,category:"people"},older_adult:{keywords:["human","elder","senior","gender-neutral"],char:"",fitzpatrick_scale:!0,category:"people"},older_man:{keywords:["human","male","men","old","elder","senior"],char:"",fitzpatrick_scale:!0,category:"people"},older_woman:{keywords:["human","female","women","lady","old","elder","senior"],char:"",fitzpatrick_scale:!0,category:"people"},man_with_gua_pi_mao:{keywords:["male","boy","chinese"],char:"",fitzpatrick_scale:!0,category:"people"},woman_with_headscarf:{keywords:["female","hijab","mantilla","tichel"],char:"",fitzpatrick_scale:!0,category:"people"},woman_with_turban:{keywords:["female","indian","hinduism","arabs","woman"],char:"",fitzpatrick_scale:!0,category:"people"},man_with_turban:{keywords:["male","indian","hinduism","arabs"],char:"",fitzpatrick_scale:!0,category:"people"},policewoman:{keywords:["woman","police","law","legal","enforcement","arrest","911","female"],char:"",fitzpatrick_scale:!0,category:"people"},policeman:{keywords:["man","police","law","legal","enforcement","arrest","911"],char:"",fitzpatrick_scale:!0,category:"people"},construction_worker_woman:{keywords:["female","human","wip","build","construction","worker","labor","woman"],char:"",fitzpatrick_scale:!0,category:"people"},construction_worker_man:{keywords:["male","human","wip","guy","build","construction","worker","labor"],char:"",fitzpatrick_scale:!0,category:"people"},guardswoman:{keywords:["uk","gb","british","female","royal","woman"],char:"",fitzpatrick_scale:!0,category:"people"},guardsman:{keywords:["uk","gb","british","male","guy","royal"],char:"",fitzpatrick_scale:!0,category:"people"},female_detective:{keywords:["human","spy","detective","female","woman"],char:"",fitzpatrick_scale:!0,category:"people"},male_detective:{keywords:["human","spy","detective"],char:"",fitzpatrick_scale:!0,category:"people"},woman_health_worker:{keywords:["doctor","nurse","therapist","healthcare","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_health_worker:{keywords:["doctor","nurse","therapist","healthcare","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_farmer:{keywords:["rancher","gardener","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_farmer:{keywords:["rancher","gardener","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_cook:{keywords:["chef","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_cook:{keywords:["chef","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_student:{keywords:["graduate","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_student:{keywords:["graduate","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_singer:{keywords:["rockstar","entertainer","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_singer:{keywords:["rockstar","entertainer","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_teacher:{keywords:["instructor","professor","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_teacher:{keywords:["instructor","professor","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_factory_worker:{keywords:["assembly","industrial","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_factory_worker:{keywords:["assembly","industrial","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_technologist:{keywords:["coder","developer","engineer","programmer","software","woman","human","laptop","computer"],char:"",fitzpatrick_scale:!0,category:"people"},man_technologist:{keywords:["coder","developer","engineer","programmer","software","man","human","laptop","computer"],char:"",fitzpatrick_scale:!0,category:"people"},woman_office_worker:{keywords:["business","manager","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_office_worker:{keywords:["business","manager","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_mechanic:{keywords:["plumber","woman","human","wrench"],char:"",fitzpatrick_scale:!0,category:"people"},man_mechanic:{keywords:["plumber","man","human","wrench"],char:"",fitzpatrick_scale:!0,category:"people"},woman_scientist:{keywords:["biologist","chemist","engineer","physicist","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_scientist:{keywords:["biologist","chemist","engineer","physicist","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_artist:{keywords:["painter","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_artist:{keywords:["painter","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_firefighter:{keywords:["fireman","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_firefighter:{keywords:["fireman","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_pilot:{keywords:["aviator","plane","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_pilot:{keywords:["aviator","plane","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_astronaut:{keywords:["space","rocket","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_astronaut:{keywords:["space","rocket","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_judge:{keywords:["justice","court","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_judge:{keywords:["justice","court","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_superhero:{keywords:["woman","female","good","heroine","superpowers"],char:"",fitzpatrick_scale:!0,category:"people"},man_superhero:{keywords:["man","male","good","hero","superpowers"],char:"",fitzpatrick_scale:!0,category:"people"},woman_supervillain:{keywords:["woman","female","evil","bad","criminal","heroine","superpowers"],char:"",fitzpatrick_scale:!0,category:"people"},man_supervillain:{keywords:["man","male","evil","bad","criminal","hero","superpowers"],char:"",fitzpatrick_scale:!0,category:"people"},mrs_claus:{keywords:["woman","female","xmas","mother christmas"],char:"",fitzpatrick_scale:!0,category:"people"},santa:{keywords:["festival","man","male","xmas","father christmas"],char:"",fitzpatrick_scale:!0,category:"people"},sorceress:{keywords:["woman","female","mage","witch"],char:"",fitzpatrick_scale:!0,category:"people"},wizard:{keywords:["man","male","mage","sorcerer"],char:"",fitzpatrick_scale:!0,category:"people"},woman_elf:{keywords:["woman","female"],char:"",fitzpatrick_scale:!0,category:"people"},man_elf:{keywords:["man","male"],char:"",fitzpatrick_scale:!0,category:"people"},woman_vampire:{keywords:["woman","female"],char:"",fitzpatrick_scale:!0,category:"people"},man_vampire:{keywords:["man","male","dracula"],char:"",fitzpatrick_scale:!0,category:"people"},woman_zombie:{keywords:["woman","female","undead","walking dead"],char:"",fitzpatrick_scale:!1,category:"people"},man_zombie:{keywords:["man","male","dracula","undead","walking dead"],char:"",fitzpatrick_scale:!1,category:"people"},woman_genie:{keywords:["woman","female"],char:"",fitzpatrick_scale:!1,category:"people"},man_genie:{keywords:["man","male"],char:"",fitzpatrick_scale:!1,category:"people"},mermaid:{keywords:["woman","female","merwoman","ariel"],char:"",fitzpatrick_scale:!0,category:"people"},merman:{keywords:["man","male","triton"],char:"",fitzpatrick_scale:!0,category:"people"},woman_fairy:{keywords:["woman","female"],char:"",fitzpatrick_scale:!0,category:"people"},man_fairy:{keywords:["man","male"],char:"",fitzpatrick_scale:!0,category:"people"},angel:{keywords:["heaven","wings","halo"],char:"",fitzpatrick_scale:!0,category:"people"},pregnant_woman:{keywords:["baby"],char:"",fitzpatrick_scale:!0,category:"people"},breastfeeding:{keywords:["nursing","baby"],char:"",fitzpatrick_scale:!0,category:"people"},princess:{keywords:["girl","woman","female","blond","crown","royal","queen"],char:"",fitzpatrick_scale:!0,category:"people"},prince:{keywords:["boy","man","male","crown","royal","king"],char:"",fitzpatrick_scale:!0,category:"people"},bride_with_veil:{keywords:["couple","marriage","wedding","woman","bride"],char:"",fitzpatrick_scale:!0,category:"people"},man_in_tuxedo:{keywords:["couple","marriage","wedding","groom"],char:"",fitzpatrick_scale:!0,category:"people"},running_woman:{keywords:["woman","walking","exercise","race","running","female"],char:"",fitzpatrick_scale:!0,category:"people"},running_man:{keywords:["man","walking","exercise","race","running"],char:"",fitzpatrick_scale:!0,category:"people"},walking_woman:{keywords:["human","feet","steps","woman","female"],char:"",fitzpatrick_scale:!0,category:"people"},walking_man:{keywords:["human","feet","steps"],char:"",fitzpatrick_scale:!0,category:"people"},dancer:{keywords:["female","girl","woman","fun"],char:"",fitzpatrick_scale:!0,category:"people"},man_dancing:{keywords:["male","boy","fun","dancer"],char:"",fitzpatrick_scale:!0,category:"people"},dancing_women:{keywords:["female","bunny","women","girls"],char:"",fitzpatrick_scale:!1,category:"people"},dancing_men:{keywords:["male","bunny","men","boys"],char:"",fitzpatrick_scale:!1,category:"people"},couple:{keywords:["pair","people","human","love","date","dating","like","affection","valentines","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},two_men_holding_hands:{keywords:["pair","couple","love","like","bromance","friendship","people","human"],char:"",fitzpatrick_scale:!1,category:"people"},two_women_holding_hands:{keywords:["pair","friendship","couple","love","like","female","people","human"],char:"",fitzpatrick_scale:!1,category:"people"},bowing_woman:{keywords:["woman","female","girl"],char:"",fitzpatrick_scale:!0,category:"people"},bowing_man:{keywords:["man","male","boy"],char:"",fitzpatrick_scale:!0,category:"people"},man_facepalming:{keywords:["man","male","boy","disbelief"],char:"",fitzpatrick_scale:!0,category:"people"},woman_facepalming:{keywords:["woman","female","girl","disbelief"],char:"",fitzpatrick_scale:!0,category:"people"},woman_shrugging:{keywords:["woman","female","girl","confused","indifferent","doubt"],char:"",fitzpatrick_scale:!0,category:"people"},man_shrugging:{keywords:["man","male","boy","confused","indifferent","doubt"],char:"",fitzpatrick_scale:!0,category:"people"},tipping_hand_woman:{keywords:["female","girl","woman","human","information"],char:"",fitzpatrick_scale:!0,category:"people"},tipping_hand_man:{keywords:["male","boy","man","human","information"],char:"",fitzpatrick_scale:!0,category:"people"},no_good_woman:{keywords:["female","girl","woman","nope"],char:"",fitzpatrick_scale:!0,category:"people"},no_good_man:{keywords:["male","boy","man","nope"],char:"",fitzpatrick_scale:!0,category:"people"},ok_woman:{keywords:["women","girl","female","pink","human","woman"],char:"",fitzpatrick_scale:!0,category:"people"},ok_man:{keywords:["men","boy","male","blue","human","man"],char:"",fitzpatrick_scale:!0,category:"people"},raising_hand_woman:{keywords:["female","girl","woman"],char:"",fitzpatrick_scale:!0,category:"people"},raising_hand_man:{keywords:["male","boy","man"],char:"",fitzpatrick_scale:!0,category:"people"},pouting_woman:{keywords:["female","girl","woman"],char:"",fitzpatrick_scale:!0,category:"people"},pouting_man:{keywords:["male","boy","man"],char:"",fitzpatrick_scale:!0,category:"people"},frowning_woman:{keywords:["female","girl","woman","sad","depressed","discouraged","unhappy"],char:"",fitzpatrick_scale:!0,category:"people"},frowning_man:{keywords:["male","boy","man","sad","depressed","discouraged","unhappy"],char:"",fitzpatrick_scale:!0,category:"people"},haircut_woman:{keywords:["female","girl","woman"],char:"",fitzpatrick_scale:!0,category:"people"},haircut_man:{keywords:["male","boy","man"],char:"",fitzpatrick_scale:!0,category:"people"},massage_woman:{keywords:["female","girl","woman","head"],char:"",fitzpatrick_scale:!0,category:"people"},massage_man:{keywords:["male","boy","man","head"],char:"",fitzpatrick_scale:!0,category:"people"},woman_in_steamy_room:{keywords:["female","woman","spa","steamroom","sauna"],char:"",fitzpatrick_scale:!0,category:"people"},man_in_steamy_room:{keywords:["male","man","spa","steamroom","sauna"],char:"",fitzpatrick_scale:!0,category:"people"},couple_with_heart_woman_man:{keywords:["pair","love","like","affection","human","dating","valentines","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},couple_with_heart_woman_woman:{keywords:["pair","love","like","affection","human","dating","valentines","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},couple_with_heart_man_man:{keywords:["pair","love","like","affection","human","dating","valentines","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},couplekiss_man_woman:{keywords:["pair","valentines","love","like","dating","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},couplekiss_woman_woman:{keywords:["pair","valentines","love","like","dating","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},couplekiss_man_man:{keywords:["pair","valentines","love","like","dating","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_woman_boy:{keywords:["home","parents","child","mom","dad","father","mother","people","human"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_woman_girl:{keywords:["home","parents","people","human","child"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_woman_girl_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_woman_boy_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_woman_girl_girl:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_woman_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_woman_girl:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_woman_girl_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_woman_boy_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_woman_girl_girl:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_man_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_man_girl:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_man_girl_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_man_boy_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_man_girl_girl:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_boy:{keywords:["home","parent","people","human","child"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_girl:{keywords:["home","parent","people","human","child"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_girl_boy:{keywords:["home","parent","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_boy_boy:{keywords:["home","parent","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_girl_girl:{keywords:["home","parent","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_boy:{keywords:["home","parent","people","human","child"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_girl:{keywords:["home","parent","people","human","child"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_girl_boy:{keywords:["home","parent","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_boy_boy:{keywords:["home","parent","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_girl_girl:{keywords:["home","parent","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},yarn:{keywords:["ball","crochet","knit"],char:"",fitzpatrick_scale:!1,category:"people"},thread:{keywords:["needle","sewing","spool","string"],char:"",fitzpatrick_scale:!1,category:"people"},coat:{keywords:["jacket"],char:"",fitzpatrick_scale:!1,category:"people"},labcoat:{keywords:["doctor","experiment","scientist","chemist"],char:"",fitzpatrick_scale:!1,category:"people"},womans_clothes:{keywords:["fashion","shopping_bags","female"],char:"",fitzpatrick_scale:!1,category:"people"},tshirt:{keywords:["fashion","cloth","casual","shirt","tee"],char:"",fitzpatrick_scale:!1,category:"people"},jeans:{keywords:["fashion","shopping"],char:"",fitzpatrick_scale:!1,category:"people"},necktie:{keywords:["shirt","suitup","formal","fashion","cloth","business"],char:"",fitzpatrick_scale:!1,category:"people"},dress:{keywords:["clothes","fashion","shopping"],char:"",fitzpatrick_scale:!1,category:"people"},bikini:{keywords:["swimming","female","woman","girl","fashion","beach","summer"],char:"",fitzpatrick_scale:!1,category:"people"},kimono:{keywords:["dress","fashion","women","female","japanese"],char:"",fitzpatrick_scale:!1,category:"people"},lipstick:{keywords:["female","girl","fashion","woman"],char:"",fitzpatrick_scale:!1,category:"people"},kiss:{keywords:["face","lips","love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"people"},footprints:{keywords:["feet","tracking","walking","beach"],char:"",fitzpatrick_scale:!1,category:"people"},flat_shoe:{keywords:["ballet","slip-on","slipper"],char:"",fitzpatrick_scale:!1,category:"people"},high_heel:{keywords:["fashion","shoes","female","pumps","stiletto"],char:"",fitzpatrick_scale:!1,category:"people"},sandal:{keywords:["shoes","fashion","flip flops"],char:"",fitzpatrick_scale:!1,category:"people"},boot:{keywords:["shoes","fashion"],char:"",fitzpatrick_scale:!1,category:"people"},mans_shoe:{keywords:["fashion","male"],char:"",fitzpatrick_scale:!1,category:"people"},athletic_shoe:{keywords:["shoes","sports","sneakers"],char:"",fitzpatrick_scale:!1,category:"people"},hiking_boot:{keywords:["backpacking","camping","hiking"],char:"",fitzpatrick_scale:!1,category:"people"},socks:{keywords:["stockings","clothes"],char:"",fitzpatrick_scale:!1,category:"people"},gloves:{keywords:["hands","winter","clothes"],char:"",fitzpatrick_scale:!1,category:"people"},scarf:{keywords:["neck","winter","clothes"],char:"",fitzpatrick_scale:!1,category:"people"},womans_hat:{keywords:["fashion","accessories","female","lady","spring"],char:"",fitzpatrick_scale:!1,category:"people"},tophat:{keywords:["magic","gentleman","classy","circus"],char:"",fitzpatrick_scale:!1,category:"people"},billed_hat:{keywords:["cap","baseball"],char:"",fitzpatrick_scale:!1,category:"people"},rescue_worker_helmet:{keywords:["construction","build"],char:"",fitzpatrick_scale:!1,category:"people"},mortar_board:{keywords:["school","college","degree","university","graduation","cap","hat","legal","learn","education"],char:"",fitzpatrick_scale:!1,category:"people"},crown:{keywords:["king","kod","leader","royalty","lord"],char:"",fitzpatrick_scale:!1,category:"people"},school_satchel:{keywords:["student","education","bag","backpack"],char:"",fitzpatrick_scale:!1,category:"people"},luggage:{keywords:["packing","travel"],char:"",fitzpatrick_scale:!1,category:"people"},pouch:{keywords:["bag","accessories","shopping"],char:"",fitzpatrick_scale:!1,category:"people"},purse:{keywords:["fashion","accessories","money","sales","shopping"],char:"",fitzpatrick_scale:!1,category:"people"},handbag:{keywords:["fashion","accessory","accessories","shopping"],char:"",fitzpatrick_scale:!1,category:"people"},briefcase:{keywords:["business","documents","work","law","legal","job","career"],char:"",fitzpatrick_scale:!1,category:"people"},eyeglasses:{keywords:["fashion","accessories","eyesight","nerdy","dork","geek"],char:"",fitzpatrick_scale:!1,category:"people"},dark_sunglasses:{keywords:["face","cool","accessories"],char:"",fitzpatrick_scale:!1,category:"people"},goggles:{keywords:["eyes","protection","safety"],char:"",fitzpatrick_scale:!1,category:"people"},ring:{keywords:["wedding","propose","marriage","valentines","diamond","fashion","jewelry","gem","engagement"],char:"",fitzpatrick_scale:!1,category:"people"},closed_umbrella:{keywords:["weather","rain","drizzle"],char:"",fitzpatrick_scale:!1,category:"people"},dog:{keywords:["animal","friend","nature","woof","puppy","pet","faithful"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cat:{keywords:["animal","meow","nature","pet","kitten"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},mouse:{keywords:["animal","nature","cheese_wedge","rodent"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hamster:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},rabbit:{keywords:["animal","nature","pet","spring","magic","bunny"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},fox_face:{keywords:["animal","nature","face"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},bear:{keywords:["animal","nature","wild"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},panda_face:{keywords:["animal","nature","panda"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},koala:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},tiger:{keywords:["animal","cat","danger","wild","nature","roar"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},lion:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cow:{keywords:["beef","ox","animal","nature","moo","milk"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},pig:{keywords:["animal","oink","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},pig_nose:{keywords:["animal","oink"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},frog:{keywords:["animal","nature","croak","toad"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},squid:{keywords:["animal","nature","ocean","sea"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},octopus:{keywords:["animal","creature","ocean","sea","nature","beach"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},shrimp:{keywords:["animal","ocean","nature","seafood"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},monkey_face:{keywords:["animal","nature","circus"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},gorilla:{keywords:["animal","nature","circus"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},see_no_evil:{keywords:["monkey","animal","nature","haha"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hear_no_evil:{keywords:["animal","monkey","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},speak_no_evil:{keywords:["monkey","animal","nature","omg"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},monkey:{keywords:["animal","nature","banana","circus"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},chicken:{keywords:["animal","cluck","nature","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},penguin:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},bird:{keywords:["animal","nature","fly","tweet","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},baby_chick:{keywords:["animal","chicken","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hatching_chick:{keywords:["animal","chicken","egg","born","baby","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hatched_chick:{keywords:["animal","chicken","baby","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},duck:{keywords:["animal","nature","bird","mallard"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},eagle:{keywords:["animal","nature","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},owl:{keywords:["animal","nature","bird","hoot"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},bat:{keywords:["animal","nature","blind","vampire"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},wolf:{keywords:["animal","nature","wild"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},boar:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},horse:{keywords:["animal","brown","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},unicorn:{keywords:["animal","nature","mystical"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},honeybee:{keywords:["animal","insect","nature","bug","spring","honey"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},bug:{keywords:["animal","insect","nature","worm"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},butterfly:{keywords:["animal","insect","nature","caterpillar"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},snail:{keywords:["slow","animal","shell"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},beetle:{keywords:["animal","insect","nature","ladybug"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},ant:{keywords:["animal","insect","nature","bug"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},grasshopper:{keywords:["animal","cricket","chirp"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},spider:{keywords:["animal","arachnid"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},scorpion:{keywords:["animal","arachnid"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},crab:{keywords:["animal","crustacean"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},snake:{keywords:["animal","evil","nature","hiss","python"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},lizard:{keywords:["animal","nature","reptile"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},"t-rex":{keywords:["animal","nature","dinosaur","tyrannosaurus","extinct"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sauropod:{keywords:["animal","nature","dinosaur","brachiosaurus","brontosaurus","diplodocus","extinct"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},turtle:{keywords:["animal","slow","nature","tortoise"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},tropical_fish:{keywords:["animal","swim","ocean","beach","nemo"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},fish:{keywords:["animal","food","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},blowfish:{keywords:["animal","nature","food","sea","ocean"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dolphin:{keywords:["animal","nature","fish","sea","ocean","flipper","fins","beach"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},shark:{keywords:["animal","nature","fish","sea","ocean","jaws","fins","beach"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},whale:{keywords:["animal","nature","sea","ocean"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},whale2:{keywords:["animal","nature","sea","ocean"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},crocodile:{keywords:["animal","nature","reptile","lizard","alligator"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},leopard:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},zebra:{keywords:["animal","nature","stripes","safari"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},tiger2:{keywords:["animal","nature","roar"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},water_buffalo:{keywords:["animal","nature","ox","cow"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},ox:{keywords:["animal","cow","beef"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cow2:{keywords:["beef","ox","animal","nature","moo","milk"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},deer:{keywords:["animal","nature","horns","venison"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dromedary_camel:{keywords:["animal","hot","desert","hump"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},camel:{keywords:["animal","nature","hot","desert","hump"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},giraffe:{keywords:["animal","nature","spots","safari"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},elephant:{keywords:["animal","nature","nose","th","circus"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},rhinoceros:{keywords:["animal","nature","horn"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},goat:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},ram:{keywords:["animal","sheep","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sheep:{keywords:["animal","nature","wool","shipit"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},racehorse:{keywords:["animal","gamble","luck"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},pig2:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},rat:{keywords:["animal","mouse","rodent"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},mouse2:{keywords:["animal","nature","rodent"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},rooster:{keywords:["animal","nature","chicken"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},turkey:{keywords:["animal","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dove:{keywords:["animal","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dog2:{keywords:["animal","nature","friend","doge","pet","faithful"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},poodle:{keywords:["dog","animal","101","nature","pet"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cat2:{keywords:["animal","meow","pet","cats"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},rabbit2:{keywords:["animal","nature","pet","magic","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},chipmunk:{keywords:["animal","nature","rodent","squirrel"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hedgehog:{keywords:["animal","nature","spiny"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},raccoon:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},llama:{keywords:["animal","nature","alpaca"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hippopotamus:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},kangaroo:{keywords:["animal","nature","australia","joey","hop","marsupial"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},badger:{keywords:["animal","nature","honey"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},swan:{keywords:["animal","nature","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},peacock:{keywords:["animal","nature","peahen","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},parrot:{keywords:["animal","nature","bird","pirate","talk"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},lobster:{keywords:["animal","nature","bisque","claws","seafood"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},mosquito:{keywords:["animal","nature","insect","malaria"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},paw_prints:{keywords:["animal","tracking","footprints","dog","cat","pet","feet"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dragon:{keywords:["animal","myth","nature","chinese","green"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dragon_face:{keywords:["animal","myth","nature","chinese","green"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cactus:{keywords:["vegetable","plant","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},christmas_tree:{keywords:["festival","vacation","december","xmas","celebration"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},evergreen_tree:{keywords:["plant","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},deciduous_tree:{keywords:["plant","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},palm_tree:{keywords:["plant","vegetable","nature","summer","beach","mojito","tropical"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},seedling:{keywords:["plant","nature","grass","lawn","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},herb:{keywords:["vegetable","plant","medicine","weed","grass","lawn"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},shamrock:{keywords:["vegetable","plant","nature","irish","clover"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},four_leaf_clover:{keywords:["vegetable","plant","nature","lucky","irish"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},bamboo:{keywords:["plant","nature","vegetable","panda","pine_decoration"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},tanabata_tree:{keywords:["plant","nature","branch","summer"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},leaves:{keywords:["nature","plant","tree","vegetable","grass","lawn","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},fallen_leaf:{keywords:["nature","plant","vegetable","leaves"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},maple_leaf:{keywords:["nature","plant","vegetable","ca","fall"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},ear_of_rice:{keywords:["nature","plant"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hibiscus:{keywords:["plant","vegetable","flowers","beach"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sunflower:{keywords:["nature","plant","fall"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},rose:{keywords:["flowers","valentines","love","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},wilted_flower:{keywords:["plant","nature","flower"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},tulip:{keywords:["flowers","plant","nature","summer","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},blossom:{keywords:["nature","flowers","yellow"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cherry_blossom:{keywords:["nature","plant","spring","flower"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},bouquet:{keywords:["flowers","nature","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},mushroom:{keywords:["plant","vegetable"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},chestnut:{keywords:["food","squirrel"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},jack_o_lantern:{keywords:["halloween","light","pumpkin","creepy","fall"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},shell:{keywords:["nature","sea","beach"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},spider_web:{keywords:["animal","insect","arachnid","silk"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},earth_americas:{keywords:["globe","world","USA","international"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},earth_africa:{keywords:["globe","world","international"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},earth_asia:{keywords:["globe","world","east","international"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},full_moon:{keywords:["nature","yellow","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},waning_gibbous_moon:{keywords:["nature","twilight","planet","space","night","evening","sleep","waxing_gibbous_moon"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},last_quarter_moon:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},waning_crescent_moon:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},new_moon:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},waxing_crescent_moon:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},first_quarter_moon:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},waxing_gibbous_moon:{keywords:["nature","night","sky","gray","twilight","planet","space","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},new_moon_with_face:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},full_moon_with_face:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},first_quarter_moon_with_face:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},last_quarter_moon_with_face:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sun_with_face:{keywords:["nature","morning","sky"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},crescent_moon:{keywords:["night","sleep","sky","evening","magic"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},star:{keywords:["night","yellow"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},star2:{keywords:["night","sparkle","awesome","good","magic"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dizzy:{keywords:["star","sparkle","shoot","magic"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sparkles:{keywords:["stars","shine","shiny","cool","awesome","good","magic"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},comet:{keywords:["space"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sunny:{keywords:["weather","nature","brightness","summer","beach","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sun_behind_small_cloud:{keywords:["weather"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},partly_sunny:{keywords:["weather","nature","cloudy","morning","fall","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sun_behind_large_cloud:{keywords:["weather"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sun_behind_rain_cloud:{keywords:["weather"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cloud:{keywords:["weather","sky"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cloud_with_rain:{keywords:["weather"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cloud_with_lightning_and_rain:{keywords:["weather","lightning"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cloud_with_lightning:{keywords:["weather","thunder"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},zap:{keywords:["thunder","weather","lightning bolt","fast"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},fire:{keywords:["hot","cook","flame"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},boom:{keywords:["bomb","explode","explosion","collision","blown"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},snowflake:{keywords:["winter","season","cold","weather","christmas","xmas"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cloud_with_snow:{keywords:["weather"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},snowman:{keywords:["winter","season","cold","weather","christmas","xmas","frozen","without_snow"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},snowman_with_snow:{keywords:["winter","season","cold","weather","christmas","xmas","frozen"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},wind_face:{keywords:["gust","air"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dash:{keywords:["wind","air","fast","shoo","fart","smoke","puff"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},tornado:{keywords:["weather","cyclone","twister"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},fog:{keywords:["weather"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},open_umbrella:{keywords:["weather","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},umbrella:{keywords:["rainy","weather","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},droplet:{keywords:["water","drip","faucet","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sweat_drops:{keywords:["water","drip","oops"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},ocean:{keywords:["sea","water","wave","nature","tsunami","disaster"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},green_apple:{keywords:["fruit","nature"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},apple:{keywords:["fruit","mac","school"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},pear:{keywords:["fruit","nature","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},tangerine:{keywords:["food","fruit","nature","orange"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},lemon:{keywords:["fruit","nature"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},banana:{keywords:["fruit","food","monkey"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},watermelon:{keywords:["fruit","food","picnic","summer"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},grapes:{keywords:["fruit","food","wine"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},strawberry:{keywords:["fruit","food","nature"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},melon:{keywords:["fruit","nature","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cherries:{keywords:["food","fruit"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},peach:{keywords:["fruit","nature","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},pineapple:{keywords:["fruit","nature","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},coconut:{keywords:["fruit","nature","food","palm"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},kiwi_fruit:{keywords:["fruit","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},mango:{keywords:["fruit","food","tropical"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},avocado:{keywords:["fruit","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},broccoli:{keywords:["fruit","food","vegetable"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},tomato:{keywords:["fruit","vegetable","nature","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},eggplant:{keywords:["vegetable","nature","food","aubergine"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cucumber:{keywords:["fruit","food","pickle"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},carrot:{keywords:["vegetable","food","orange"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},hot_pepper:{keywords:["food","spicy","chilli","chili"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},potato:{keywords:["food","tuber","vegatable","starch"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},corn:{keywords:["food","vegetable","plant"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},leafy_greens:{keywords:["food","vegetable","plant","bok choy","cabbage","kale","lettuce"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},sweet_potato:{keywords:["food","nature"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},peanuts:{keywords:["food","nut"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},honey_pot:{keywords:["bees","sweet","kitchen"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},croissant:{keywords:["food","bread","french"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},bread:{keywords:["food","wheat","breakfast","toast"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},baguette_bread:{keywords:["food","bread","french"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},bagel:{keywords:["food","bread","bakery","schmear"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},pretzel:{keywords:["food","bread","twisted"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cheese:{keywords:["food","chadder"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},egg:{keywords:["food","chicken","breakfast"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},bacon:{keywords:["food","breakfast","pork","pig","meat"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},steak:{keywords:["food","cow","meat","cut","chop","lambchop","porkchop"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},pancakes:{keywords:["food","breakfast","flapjacks","hotcakes"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},poultry_leg:{keywords:["food","meat","drumstick","bird","chicken","turkey"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},meat_on_bone:{keywords:["good","food","drumstick"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},bone:{keywords:["skeleton"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},fried_shrimp:{keywords:["food","animal","appetizer","summer"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},fried_egg:{keywords:["food","breakfast","kitchen","egg"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},hamburger:{keywords:["meat","fast food","beef","cheeseburger","mcdonalds","burger king"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},fries:{keywords:["chips","snack","fast food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},stuffed_flatbread:{keywords:["food","flatbread","stuffed","gyro"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},hotdog:{keywords:["food","frankfurter"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},pizza:{keywords:["food","party"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},sandwich:{keywords:["food","lunch","bread"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},canned_food:{keywords:["food","soup"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},spaghetti:{keywords:["food","italian","noodle"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},taco:{keywords:["food","mexican"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},burrito:{keywords:["food","mexican"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},green_salad:{keywords:["food","healthy","lettuce"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},shallow_pan_of_food:{keywords:["food","cooking","casserole","paella"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},ramen:{keywords:["food","japanese","noodle","chopsticks"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},stew:{keywords:["food","meat","soup"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},fish_cake:{keywords:["food","japan","sea","beach","narutomaki","pink","swirl","kamaboko","surimi","ramen"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},fortune_cookie:{keywords:["food","prophecy"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},sushi:{keywords:["food","fish","japanese","rice"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},bento:{keywords:["food","japanese","box"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},curry:{keywords:["food","spicy","hot","indian"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},rice_ball:{keywords:["food","japanese"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},rice:{keywords:["food","china","asian"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},rice_cracker:{keywords:["food","japanese"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},oden:{keywords:["food","japanese"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},dango:{keywords:["food","dessert","sweet","japanese","barbecue","meat"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},shaved_ice:{keywords:["hot","dessert","summer"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},ice_cream:{keywords:["food","hot","dessert"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},icecream:{keywords:["food","hot","dessert","summer"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},pie:{keywords:["food","dessert","pastry"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cake:{keywords:["food","dessert"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cupcake:{keywords:["food","dessert","bakery","sweet"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},moon_cake:{keywords:["food","autumn"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},birthday:{keywords:["food","dessert","cake"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},custard:{keywords:["dessert","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},candy:{keywords:["snack","dessert","sweet","lolly"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},lollipop:{keywords:["food","snack","candy","sweet"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},chocolate_bar:{keywords:["food","snack","dessert","sweet"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},popcorn:{keywords:["food","movie theater","films","snack"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},dumpling:{keywords:["food","empanada","pierogi","potsticker"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},doughnut:{keywords:["food","dessert","snack","sweet","donut"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cookie:{keywords:["food","snack","oreo","chocolate","sweet","dessert"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},milk_glass:{keywords:["beverage","drink","cow"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},beer:{keywords:["relax","beverage","drink","drunk","party","pub","summer","alcohol","booze"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},beers:{keywords:["relax","beverage","drink","drunk","party","pub","summer","alcohol","booze"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},clinking_glasses:{keywords:["beverage","drink","party","alcohol","celebrate","cheers","wine","champagne","toast"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},wine_glass:{keywords:["drink","beverage","drunk","alcohol","booze"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},tumbler_glass:{keywords:["drink","beverage","drunk","alcohol","liquor","booze","bourbon","scotch","whisky","glass","shot"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cocktail:{keywords:["drink","drunk","alcohol","beverage","booze","mojito"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},tropical_drink:{keywords:["beverage","cocktail","summer","beach","alcohol","booze","mojito"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},champagne:{keywords:["drink","wine","bottle","celebration"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},sake:{keywords:["wine","drink","drunk","beverage","japanese","alcohol","booze"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},tea:{keywords:["drink","bowl","breakfast","green","british"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cup_with_straw:{keywords:["drink","soda"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},coffee:{keywords:["beverage","caffeine","latte","espresso"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},baby_bottle:{keywords:["food","container","milk"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},salt:{keywords:["condiment","shaker"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},spoon:{keywords:["cutlery","kitchen","tableware"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},fork_and_knife:{keywords:["cutlery","kitchen"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},plate_with_cutlery:{keywords:["food","eat","meal","lunch","dinner","restaurant"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},bowl_with_spoon:{keywords:["food","breakfast","cereal","oatmeal","porridge"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},takeout_box:{keywords:["food","leftovers"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},chopsticks:{keywords:["food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},soccer:{keywords:["sports","football"],char:"",fitzpatrick_scale:!1,category:"activity"},basketball:{keywords:["sports","balls","NBA"],char:"",fitzpatrick_scale:!1,category:"activity"},football:{keywords:["sports","balls","NFL"],char:"",fitzpatrick_scale:!1,category:"activity"},baseball:{keywords:["sports","balls"],char:"",fitzpatrick_scale:!1,category:"activity"},softball:{keywords:["sports","balls"],char:"",fitzpatrick_scale:!1,category:"activity"},tennis:{keywords:["sports","balls","green"],char:"",fitzpatrick_scale:!1,category:"activity"},volleyball:{keywords:["sports","balls"],char:"",fitzpatrick_scale:!1,category:"activity"},rugby_football:{keywords:["sports","team"],char:"",fitzpatrick_scale:!1,category:"activity"},flying_disc:{keywords:["sports","frisbee","ultimate"],char:"",fitzpatrick_scale:!1,category:"activity"},"8ball":{keywords:["pool","hobby","game","luck","magic"],char:"",fitzpatrick_scale:!1,category:"activity"},golf:{keywords:["sports","business","flag","hole","summer"],char:"",fitzpatrick_scale:!1,category:"activity"},golfing_woman:{keywords:["sports","business","woman","female"],char:"",fitzpatrick_scale:!1,category:"activity"},golfing_man:{keywords:["sports","business"],char:"",fitzpatrick_scale:!0,category:"activity"},ping_pong:{keywords:["sports","pingpong"],char:"",fitzpatrick_scale:!1,category:"activity"},badminton:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},goal_net:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},ice_hockey:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},field_hockey:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},lacrosse:{keywords:["sports","ball","stick"],char:"",fitzpatrick_scale:!1,category:"activity"},cricket:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},ski:{keywords:["sports","winter","cold","snow"],char:"",fitzpatrick_scale:!1,category:"activity"},skier:{keywords:["sports","winter","snow"],char:"",fitzpatrick_scale:!1,category:"activity"},snowboarder:{keywords:["sports","winter"],char:"",fitzpatrick_scale:!0,category:"activity"},person_fencing:{keywords:["sports","fencing","sword"],char:"",fitzpatrick_scale:!1,category:"activity"},women_wrestling:{keywords:["sports","wrestlers"],char:"",fitzpatrick_scale:!1,category:"activity"},men_wrestling:{keywords:["sports","wrestlers"],char:"",fitzpatrick_scale:!1,category:"activity"},woman_cartwheeling:{keywords:["gymnastics"],char:"",fitzpatrick_scale:!0,category:"activity"},man_cartwheeling:{keywords:["gymnastics"],char:"",fitzpatrick_scale:!0,category:"activity"},woman_playing_handball:{keywords:["sports"],char:"",fitzpatrick_scale:!0,category:"activity"},man_playing_handball:{keywords:["sports"],char:"",fitzpatrick_scale:!0,category:"activity"},ice_skate:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},curling_stone:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},skateboard:{keywords:["board"],char:"",fitzpatrick_scale:!1,category:"activity"},sled:{keywords:["sleigh","luge","toboggan"],char:"",fitzpatrick_scale:!1,category:"activity"},bow_and_arrow:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},fishing_pole_and_fish:{keywords:["food","hobby","summer"],char:"",fitzpatrick_scale:!1,category:"activity"},boxing_glove:{keywords:["sports","fighting"],char:"",fitzpatrick_scale:!1,category:"activity"},martial_arts_uniform:{keywords:["judo","karate","taekwondo"],char:"",fitzpatrick_scale:!1,category:"activity"},rowing_woman:{keywords:["sports","hobby","water","ship","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},rowing_man:{keywords:["sports","hobby","water","ship"],char:"",fitzpatrick_scale:!0,category:"activity"},climbing_woman:{keywords:["sports","hobby","woman","female","rock"],char:"",fitzpatrick_scale:!0,category:"activity"},climbing_man:{keywords:["sports","hobby","man","male","rock"],char:"",fitzpatrick_scale:!0,category:"activity"},swimming_woman:{keywords:["sports","exercise","human","athlete","water","summer","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},swimming_man:{keywords:["sports","exercise","human","athlete","water","summer"],char:"",fitzpatrick_scale:!0,category:"activity"},woman_playing_water_polo:{keywords:["sports","pool"],char:"",fitzpatrick_scale:!0,category:"activity"},man_playing_water_polo:{keywords:["sports","pool"],char:"",fitzpatrick_scale:!0,category:"activity"},woman_in_lotus_position:{keywords:["woman","female","meditation","yoga","serenity","zen","mindfulness"],char:"",fitzpatrick_scale:!0,category:"activity"},man_in_lotus_position:{keywords:["man","male","meditation","yoga","serenity","zen","mindfulness"],char:"",fitzpatrick_scale:!0,category:"activity"},surfing_woman:{keywords:["sports","ocean","sea","summer","beach","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},surfing_man:{keywords:["sports","ocean","sea","summer","beach"],char:"",fitzpatrick_scale:!0,category:"activity"},bath:{keywords:["clean","shower","bathroom"],char:"",fitzpatrick_scale:!0,category:"activity"},basketball_woman:{keywords:["sports","human","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},basketball_man:{keywords:["sports","human"],char:"",fitzpatrick_scale:!0,category:"activity"},weight_lifting_woman:{keywords:["sports","training","exercise","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},weight_lifting_man:{keywords:["sports","training","exercise"],char:"",fitzpatrick_scale:!0,category:"activity"},biking_woman:{keywords:["sports","bike","exercise","hipster","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},biking_man:{keywords:["sports","bike","exercise","hipster"],char:"",fitzpatrick_scale:!0,category:"activity"},mountain_biking_woman:{keywords:["transportation","sports","human","race","bike","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},mountain_biking_man:{keywords:["transportation","sports","human","race","bike"],char:"",fitzpatrick_scale:!0,category:"activity"},horse_racing:{keywords:["animal","betting","competition","gambling","luck"],char:"",fitzpatrick_scale:!0,category:"activity"},business_suit_levitating:{keywords:["suit","business","levitate","hover","jump"],char:"",fitzpatrick_scale:!0,category:"activity"},trophy:{keywords:["win","award","contest","place","ftw","ceremony"],char:"",fitzpatrick_scale:!1,category:"activity"},running_shirt_with_sash:{keywords:["play","pageant"],char:"",fitzpatrick_scale:!1,category:"activity"},medal_sports:{keywords:["award","winning"],char:"",fitzpatrick_scale:!1,category:"activity"},medal_military:{keywords:["award","winning","army"],char:"",fitzpatrick_scale:!1,category:"activity"},"1st_place_medal":{keywords:["award","winning","first"],char:"",fitzpatrick_scale:!1,category:"activity"},"2nd_place_medal":{keywords:["award","second"],char:"",fitzpatrick_scale:!1,category:"activity"},"3rd_place_medal":{keywords:["award","third"],char:"",fitzpatrick_scale:!1,category:"activity"},reminder_ribbon:{keywords:["sports","cause","support","awareness"],char:"",fitzpatrick_scale:!1,category:"activity"},rosette:{keywords:["flower","decoration","military"],char:"",fitzpatrick_scale:!1,category:"activity"},ticket:{keywords:["event","concert","pass"],char:"",fitzpatrick_scale:!1,category:"activity"},tickets:{keywords:["sports","concert","entrance"],char:"",fitzpatrick_scale:!1,category:"activity"},performing_arts:{keywords:["acting","theater","drama"],char:"",fitzpatrick_scale:!1,category:"activity"},art:{keywords:["design","paint","draw","colors"],char:"",fitzpatrick_scale:!1,category:"activity"},circus_tent:{keywords:["festival","carnival","party"],char:"",fitzpatrick_scale:!1,category:"activity"},woman_juggling:{keywords:["juggle","balance","skill","multitask"],char:"",fitzpatrick_scale:!0,category:"activity"},man_juggling:{keywords:["juggle","balance","skill","multitask"],char:"",fitzpatrick_scale:!0,category:"activity"},microphone:{keywords:["sound","music","PA","sing","talkshow"],char:"",fitzpatrick_scale:!1,category:"activity"},headphones:{keywords:["music","score","gadgets"],char:"",fitzpatrick_scale:!1,category:"activity"},musical_score:{keywords:["treble","clef","compose"],char:"",fitzpatrick_scale:!1,category:"activity"},musical_keyboard:{keywords:["piano","instrument","compose"],char:"",fitzpatrick_scale:!1,category:"activity"},drum:{keywords:["music","instrument","drumsticks","snare"],char:"",fitzpatrick_scale:!1,category:"activity"},saxophone:{keywords:["music","instrument","jazz","blues"],char:"",fitzpatrick_scale:!1,category:"activity"},trumpet:{keywords:["music","brass"],char:"",fitzpatrick_scale:!1,category:"activity"},guitar:{keywords:["music","instrument"],char:"",fitzpatrick_scale:!1,category:"activity"},violin:{keywords:["music","instrument","orchestra","symphony"],char:"",fitzpatrick_scale:!1,category:"activity"},clapper:{keywords:["movie","film","record"],char:"",fitzpatrick_scale:!1,category:"activity"},video_game:{keywords:["play","console","PS4","controller"],char:"",fitzpatrick_scale:!1,category:"activity"},space_invader:{keywords:["game","arcade","play"],char:"",fitzpatrick_scale:!1,category:"activity"},dart:{keywords:["game","play","bar","target","bullseye"],char:"",fitzpatrick_scale:!1,category:"activity"},game_die:{keywords:["dice","random","tabletop","play","luck"],char:"",fitzpatrick_scale:!1,category:"activity"},chess_pawn:{keywords:["expendable"],char:"",fitzpatrick_scale:!1,category:"activity"},slot_machine:{keywords:["bet","gamble","vegas","fruit machine","luck","casino"],char:"",fitzpatrick_scale:!1,category:"activity"},jigsaw:{keywords:["interlocking","puzzle","piece"],char:"",fitzpatrick_scale:!1,category:"activity"},bowling:{keywords:["sports","fun","play"],char:"",fitzpatrick_scale:!1,category:"activity"},red_car:{keywords:["red","transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},taxi:{keywords:["uber","vehicle","cars","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},blue_car:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},bus:{keywords:["car","vehicle","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},trolleybus:{keywords:["bart","transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},racing_car:{keywords:["sports","race","fast","formula","f1"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},police_car:{keywords:["vehicle","cars","transportation","law","legal","enforcement"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},ambulance:{keywords:["health","911","hospital"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},fire_engine:{keywords:["transportation","cars","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},minibus:{keywords:["vehicle","car","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},truck:{keywords:["cars","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},articulated_lorry:{keywords:["vehicle","cars","transportation","express"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},tractor:{keywords:["vehicle","car","farming","agriculture"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},kick_scooter:{keywords:["vehicle","kick","razor"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},motorcycle:{keywords:["race","sports","fast"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},bike:{keywords:["sports","bicycle","exercise","hipster"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},motor_scooter:{keywords:["vehicle","vespa","sasha"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},rotating_light:{keywords:["police","ambulance","911","emergency","alert","error","pinged","law","legal"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},oncoming_police_car:{keywords:["vehicle","law","legal","enforcement","911"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},oncoming_bus:{keywords:["vehicle","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},oncoming_automobile:{keywords:["car","vehicle","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},oncoming_taxi:{keywords:["vehicle","cars","uber"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},aerial_tramway:{keywords:["transportation","vehicle","ski"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},mountain_cableway:{keywords:["transportation","vehicle","ski"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},suspension_railway:{keywords:["vehicle","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},railway_car:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},train:{keywords:["transportation","vehicle","carriage","public","travel"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},monorail:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},bullettrain_side:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},bullettrain_front:{keywords:["transportation","vehicle","speed","fast","public","travel"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},light_rail:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},mountain_railway:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},steam_locomotive:{keywords:["transportation","vehicle","train"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},train2:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},metro:{keywords:["transportation","blue-square","mrt","underground","tube"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},tram:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},station:{keywords:["transportation","vehicle","public"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},flying_saucer:{keywords:["transportation","vehicle","ufo"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},helicopter:{keywords:["transportation","vehicle","fly"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},small_airplane:{keywords:["flight","transportation","fly","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},airplane:{keywords:["vehicle","transportation","flight","fly"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},flight_departure:{keywords:["airport","flight","landing"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},flight_arrival:{keywords:["airport","flight","boarding"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},sailboat:{keywords:["ship","summer","transportation","water","sailing"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},motor_boat:{keywords:["ship"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},speedboat:{keywords:["ship","transportation","vehicle","summer"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},ferry:{keywords:["boat","ship","yacht"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},passenger_ship:{keywords:["yacht","cruise","ferry"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},rocket:{keywords:["launch","ship","staffmode","NASA","outer space","outer_space","fly"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},artificial_satellite:{keywords:["communication","gps","orbit","spaceflight","NASA","ISS"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},seat:{keywords:["sit","airplane","transport","bus","flight","fly"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},canoe:{keywords:["boat","paddle","water","ship"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},anchor:{keywords:["ship","ferry","sea","boat"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},construction:{keywords:["wip","progress","caution","warning"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},fuelpump:{keywords:["gas station","petroleum"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},busstop:{keywords:["transportation","wait"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},vertical_traffic_light:{keywords:["transportation","driving"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},traffic_light:{keywords:["transportation","signal"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},checkered_flag:{keywords:["contest","finishline","race","gokart"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},ship:{keywords:["transportation","titanic","deploy"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},ferris_wheel:{keywords:["photo","carnival","londoneye"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},roller_coaster:{keywords:["carnival","playground","photo","fun"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},carousel_horse:{keywords:["photo","carnival"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},building_construction:{keywords:["wip","working","progress"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},foggy:{keywords:["photo","mountain"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},tokyo_tower:{keywords:["photo","japanese"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},factory:{keywords:["building","industry","pollution","smoke"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},fountain:{keywords:["photo","summer","water","fresh"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},rice_scene:{keywords:["photo","japan","asia","tsukimi"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},mountain:{keywords:["photo","nature","environment"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},mountain_snow:{keywords:["photo","nature","environment","winter","cold"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},mount_fuji:{keywords:["photo","mountain","nature","japanese"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},volcano:{keywords:["photo","nature","disaster"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},japan:{keywords:["nation","country","japanese","asia"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},camping:{keywords:["photo","outdoors","tent"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},tent:{keywords:["photo","camping","outdoors"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},national_park:{keywords:["photo","environment","nature"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},motorway:{keywords:["road","cupertino","interstate","highway"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},railway_track:{keywords:["train","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},sunrise:{keywords:["morning","view","vacation","photo"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},sunrise_over_mountains:{keywords:["view","vacation","photo"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},desert:{keywords:["photo","warm","saharah"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},beach_umbrella:{keywords:["weather","summer","sunny","sand","mojito"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},desert_island:{keywords:["photo","tropical","mojito"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},city_sunrise:{keywords:["photo","good morning","dawn"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},city_sunset:{keywords:["photo","evening","sky","buildings"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},cityscape:{keywords:["photo","night life","urban"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},night_with_stars:{keywords:["evening","city","downtown"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},bridge_at_night:{keywords:["photo","sanfrancisco"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},milky_way:{keywords:["photo","space","stars"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},stars:{keywords:["night","photo"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},sparkler:{keywords:["stars","night","shine"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},fireworks:{keywords:["photo","festival","carnival","congratulations"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},rainbow:{keywords:["nature","happy","unicorn_face","photo","sky","spring"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},houses:{keywords:["buildings","photo"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},european_castle:{keywords:["building","royalty","history"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},japanese_castle:{keywords:["photo","building"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},stadium:{keywords:["photo","place","sports","concert","venue"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},statue_of_liberty:{keywords:["american","newyork"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},house:{keywords:["building","home"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},house_with_garden:{keywords:["home","plant","nature"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},derelict_house:{keywords:["abandon","evict","broken","building"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},office:{keywords:["building","bureau","work"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},department_store:{keywords:["building","shopping","mall"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},post_office:{keywords:["building","envelope","communication"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},european_post_office:{keywords:["building","email"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},hospital:{keywords:["building","health","surgery","doctor"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},bank:{keywords:["building","money","sales","cash","business","enterprise"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},hotel:{keywords:["building","accomodation","checkin"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},convenience_store:{keywords:["building","shopping","groceries"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},school:{keywords:["building","student","education","learn","teach"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},love_hotel:{keywords:["like","affection","dating"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},wedding:{keywords:["love","like","affection","couple","marriage","bride","groom"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},classical_building:{keywords:["art","culture","history"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},church:{keywords:["building","religion","christ"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},mosque:{keywords:["islam","worship","minaret"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},synagogue:{keywords:["judaism","worship","temple","jewish"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},kaaba:{keywords:["mecca","mosque","islam"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},shinto_shrine:{keywords:["temple","japan","kyoto"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},watch:{keywords:["time","accessories"],char:"",fitzpatrick_scale:!1,category:"objects"},iphone:{keywords:["technology","apple","gadgets","dial"],char:"",fitzpatrick_scale:!1,category:"objects"},calling:{keywords:["iphone","incoming"],char:"",fitzpatrick_scale:!1,category:"objects"},computer:{keywords:["technology","laptop","screen","display","monitor"],char:"",fitzpatrick_scale:!1,category:"objects"},keyboard:{keywords:["technology","computer","type","input","text"],char:"",fitzpatrick_scale:!1,category:"objects"},desktop_computer:{keywords:["technology","computing","screen"],char:"",fitzpatrick_scale:!1,category:"objects"},printer:{keywords:["paper","ink"],char:"",fitzpatrick_scale:!1,category:"objects"},computer_mouse:{keywords:["click"],char:"",fitzpatrick_scale:!1,category:"objects"},trackball:{keywords:["technology","trackpad"],char:"",fitzpatrick_scale:!1,category:"objects"},joystick:{keywords:["game","play"],char:"",fitzpatrick_scale:!1,category:"objects"},clamp:{keywords:["tool"],char:"",fitzpatrick_scale:!1,category:"objects"},minidisc:{keywords:["technology","record","data","disk","90s"],char:"",fitzpatrick_scale:!1,category:"objects"},floppy_disk:{keywords:["oldschool","technology","save","90s","80s"],char:"",fitzpatrick_scale:!1,category:"objects"},cd:{keywords:["technology","dvd","disk","disc","90s"],char:"",fitzpatrick_scale:!1,category:"objects"},dvd:{keywords:["cd","disk","disc"],char:"",fitzpatrick_scale:!1,category:"objects"},vhs:{keywords:["record","video","oldschool","90s","80s"],char:"",fitzpatrick_scale:!1,category:"objects"},camera:{keywords:["gadgets","photography"],char:"",fitzpatrick_scale:!1,category:"objects"},camera_flash:{keywords:["photography","gadgets"],char:"",fitzpatrick_scale:!1,category:"objects"},video_camera:{keywords:["film","record"],char:"",fitzpatrick_scale:!1,category:"objects"},movie_camera:{keywords:["film","record"],char:"",fitzpatrick_scale:!1,category:"objects"},film_projector:{keywords:["video","tape","record","movie"],char:"",fitzpatrick_scale:!1,category:"objects"},film_strip:{keywords:["movie"],char:"",fitzpatrick_scale:!1,category:"objects"},telephone_receiver:{keywords:["technology","communication","dial"],char:"",fitzpatrick_scale:!1,category:"objects"},phone:{keywords:["technology","communication","dial","telephone"],char:"",fitzpatrick_scale:!1,category:"objects"},pager:{keywords:["bbcall","oldschool","90s"],char:"",fitzpatrick_scale:!1,category:"objects"},fax:{keywords:["communication","technology"],char:"",fitzpatrick_scale:!1,category:"objects"},tv:{keywords:["technology","program","oldschool","show","television"],char:"",fitzpatrick_scale:!1,category:"objects"},radio:{keywords:["communication","music","podcast","program"],char:"",fitzpatrick_scale:!1,category:"objects"},studio_microphone:{keywords:["sing","recording","artist","talkshow"],char:"",fitzpatrick_scale:!1,category:"objects"},level_slider:{keywords:["scale"],char:"",fitzpatrick_scale:!1,category:"objects"},control_knobs:{keywords:["dial"],char:"",fitzpatrick_scale:!1,category:"objects"},compass:{keywords:["magnetic","navigation","orienteering"],char:"",fitzpatrick_scale:!1,category:"objects"},stopwatch:{keywords:["time","deadline"],char:"",fitzpatrick_scale:!1,category:"objects"},timer_clock:{keywords:["alarm"],char:"",fitzpatrick_scale:!1,category:"objects"},alarm_clock:{keywords:["time","wake"],char:"",fitzpatrick_scale:!1,category:"objects"},mantelpiece_clock:{keywords:["time"],char:"",fitzpatrick_scale:!1,category:"objects"},hourglass_flowing_sand:{keywords:["oldschool","time","countdown"],char:"",fitzpatrick_scale:!1,category:"objects"},hourglass:{keywords:["time","clock","oldschool","limit","exam","quiz","test"],char:"",fitzpatrick_scale:!1,category:"objects"},satellite:{keywords:["communication","future","radio","space"],char:"",fitzpatrick_scale:!1,category:"objects"},battery:{keywords:["power","energy","sustain"],char:"",fitzpatrick_scale:!1,category:"objects"},electric_plug:{keywords:["charger","power"],char:"",fitzpatrick_scale:!1,category:"objects"},bulb:{keywords:["light","electricity","idea"],char:"",fitzpatrick_scale:!1,category:"objects"},flashlight:{keywords:["dark","camping","sight","night"],char:"",fitzpatrick_scale:!1,category:"objects"},candle:{keywords:["fire","wax"],char:"",fitzpatrick_scale:!1,category:"objects"},fire_extinguisher:{keywords:["quench"],char:"",fitzpatrick_scale:!1,category:"objects"},wastebasket:{keywords:["bin","trash","rubbish","garbage","toss"],char:"",fitzpatrick_scale:!1,category:"objects"},oil_drum:{keywords:["barrell"],char:"",fitzpatrick_scale:!1,category:"objects"},money_with_wings:{keywords:["dollar","bills","payment","sale"],char:"",fitzpatrick_scale:!1,category:"objects"},dollar:{keywords:["money","sales","bill","currency"],char:"",fitzpatrick_scale:!1,category:"objects"},yen:{keywords:["money","sales","japanese","dollar","currency"],char:"",fitzpatrick_scale:!1,category:"objects"},euro:{keywords:["money","sales","dollar","currency"],char:"",fitzpatrick_scale:!1,category:"objects"},pound:{keywords:["british","sterling","money","sales","bills","uk","england","currency"],char:"",fitzpatrick_scale:!1,category:"objects"},moneybag:{keywords:["dollar","payment","coins","sale"],char:"",fitzpatrick_scale:!1,category:"objects"},credit_card:{keywords:["money","sales","dollar","bill","payment","shopping"],char:"",fitzpatrick_scale:!1,category:"objects"},gem:{keywords:["blue","ruby","diamond","jewelry"],char:"",fitzpatrick_scale:!1,category:"objects"},balance_scale:{keywords:["law","fairness","weight"],char:"",fitzpatrick_scale:!1,category:"objects"},toolbox:{keywords:["tools","diy","fix","maintainer","mechanic"],char:"",fitzpatrick_scale:!1,category:"objects"},wrench:{keywords:["tools","diy","ikea","fix","maintainer"],char:"",fitzpatrick_scale:!1,category:"objects"},hammer:{keywords:["tools","build","create"],char:"",fitzpatrick_scale:!1,category:"objects"},hammer_and_pick:{keywords:["tools","build","create"],char:"",fitzpatrick_scale:!1,category:"objects"},hammer_and_wrench:{keywords:["tools","build","create"],char:"",fitzpatrick_scale:!1,category:"objects"},pick:{keywords:["tools","dig"],char:"",fitzpatrick_scale:!1,category:"objects"},nut_and_bolt:{keywords:["handy","tools","fix"],char:"",fitzpatrick_scale:!1,category:"objects"},gear:{keywords:["cog"],char:"",fitzpatrick_scale:!1,category:"objects"},brick:{keywords:["bricks"],char:"",fitzpatrick_scale:!1,category:"objects"},chains:{keywords:["lock","arrest"],char:"",fitzpatrick_scale:!1,category:"objects"},magnet:{keywords:["attraction","magnetic"],char:"",fitzpatrick_scale:!1,category:"objects"},gun:{keywords:["violence","weapon","pistol","revolver"],char:"",fitzpatrick_scale:!1,category:"objects"},bomb:{keywords:["boom","explode","explosion","terrorism"],char:"",fitzpatrick_scale:!1,category:"objects"},firecracker:{keywords:["dynamite","boom","explode","explosion","explosive"],char:"",fitzpatrick_scale:!1,category:"objects"},hocho:{keywords:["knife","blade","cutlery","kitchen","weapon"],char:"",fitzpatrick_scale:!1,category:"objects"},dagger:{keywords:["weapon"],char:"",fitzpatrick_scale:!1,category:"objects"},crossed_swords:{keywords:["weapon"],char:"",fitzpatrick_scale:!1,category:"objects"},shield:{keywords:["protection","security"],char:"",fitzpatrick_scale:!1,category:"objects"},smoking:{keywords:["kills","tobacco","cigarette","joint","smoke"],char:"",fitzpatrick_scale:!1,category:"objects"},skull_and_crossbones:{keywords:["poison","danger","deadly","scary","death","pirate","evil"],char:"",fitzpatrick_scale:!1,category:"objects"},coffin:{keywords:["vampire","dead","die","death","rip","graveyard","cemetery","casket","funeral","box"],char:"",fitzpatrick_scale:!1,category:"objects"},funeral_urn:{keywords:["dead","die","death","rip","ashes"],char:"",fitzpatrick_scale:!1,category:"objects"},amphora:{keywords:["vase","jar"],char:"",fitzpatrick_scale:!1,category:"objects"},crystal_ball:{keywords:["disco","party","magic","circus","fortune_teller"],char:"",fitzpatrick_scale:!1,category:"objects"},prayer_beads:{keywords:["dhikr","religious"],char:"",fitzpatrick_scale:!1,category:"objects"},nazar_amulet:{keywords:["bead","charm"],char:"",fitzpatrick_scale:!1,category:"objects"},barber:{keywords:["hair","salon","style"],char:"",fitzpatrick_scale:!1,category:"objects"},alembic:{keywords:["distilling","science","experiment","chemistry"],char:"",fitzpatrick_scale:!1,category:"objects"},telescope:{keywords:["stars","space","zoom","science","astronomy"],char:"",fitzpatrick_scale:!1,category:"objects"},microscope:{keywords:["laboratory","experiment","zoomin","science","study"],char:"",fitzpatrick_scale:!1,category:"objects"},hole:{keywords:["embarrassing"],char:"",fitzpatrick_scale:!1,category:"objects"},pill:{keywords:["health","medicine","doctor","pharmacy","drug"],char:"",fitzpatrick_scale:!1,category:"objects"},syringe:{keywords:["health","hospital","drugs","blood","medicine","needle","doctor","nurse"],char:"",fitzpatrick_scale:!1,category:"objects"},dna:{keywords:["biologist","genetics","life"],char:"",fitzpatrick_scale:!1,category:"objects"},microbe:{keywords:["amoeba","bacteria","germs"],char:"",fitzpatrick_scale:!1,category:"objects"},petri_dish:{keywords:["bacteria","biology","culture","lab"],char:"",fitzpatrick_scale:!1,category:"objects"},test_tube:{keywords:["chemistry","experiment","lab","science"],char:"",fitzpatrick_scale:!1,category:"objects"},thermometer:{keywords:["weather","temperature","hot","cold"],char:"",fitzpatrick_scale:!1,category:"objects"},broom:{keywords:["cleaning","sweeping","witch"],char:"",fitzpatrick_scale:!1,category:"objects"},basket:{keywords:["laundry"],char:"",fitzpatrick_scale:!1,category:"objects"},toilet_paper:{keywords:["roll"],char:"",fitzpatrick_scale:!1,category:"objects"},label:{keywords:["sale","tag"],char:"",fitzpatrick_scale:!1,category:"objects"},bookmark:{keywords:["favorite","label","save"],char:"",fitzpatrick_scale:!1,category:"objects"},toilet:{keywords:["restroom","wc","washroom","bathroom","potty"],char:"",fitzpatrick_scale:!1,category:"objects"},shower:{keywords:["clean","water","bathroom"],char:"",fitzpatrick_scale:!1,category:"objects"},bathtub:{keywords:["clean","shower","bathroom"],char:"",fitzpatrick_scale:!1,category:"objects"},soap:{keywords:["bar","bathing","cleaning","lather"],char:"",fitzpatrick_scale:!1,category:"objects"},sponge:{keywords:["absorbing","cleaning","porous"],char:"",fitzpatrick_scale:!1,category:"objects"},lotion_bottle:{keywords:["moisturizer","sunscreen"],char:"",fitzpatrick_scale:!1,category:"objects"},key:{keywords:["lock","door","password"],char:"",fitzpatrick_scale:!1,category:"objects"},old_key:{keywords:["lock","door","password"],char:"",fitzpatrick_scale:!1,category:"objects"},couch_and_lamp:{keywords:["read","chill"],char:"",fitzpatrick_scale:!1,category:"objects"},sleeping_bed:{keywords:["bed","rest"],char:"",fitzpatrick_scale:!0,category:"objects"},bed:{keywords:["sleep","rest"],char:"",fitzpatrick_scale:!1,category:"objects"},door:{keywords:["house","entry","exit"],char:"",fitzpatrick_scale:!1,category:"objects"},bellhop_bell:{keywords:["service"],char:"",fitzpatrick_scale:!1,category:"objects"},teddy_bear:{keywords:["plush","stuffed"],char:"",fitzpatrick_scale:!1,category:"objects"},framed_picture:{keywords:["photography"],char:"",fitzpatrick_scale:!1,category:"objects"},world_map:{keywords:["location","direction"],char:"",fitzpatrick_scale:!1,category:"objects"},parasol_on_ground:{keywords:["weather","summer"],char:"",fitzpatrick_scale:!1,category:"objects"},moyai:{keywords:["rock","easter island","moai"],char:"",fitzpatrick_scale:!1,category:"objects"},shopping:{keywords:["mall","buy","purchase"],char:"",fitzpatrick_scale:!1,category:"objects"},shopping_cart:{keywords:["trolley"],char:"",fitzpatrick_scale:!1,category:"objects"},balloon:{keywords:["party","celebration","birthday","circus"],char:"",fitzpatrick_scale:!1,category:"objects"},flags:{keywords:["fish","japanese","koinobori","carp","banner"],char:"",fitzpatrick_scale:!1,category:"objects"},ribbon:{keywords:["decoration","pink","girl","bowtie"],char:"",fitzpatrick_scale:!1,category:"objects"},gift:{keywords:["present","birthday","christmas","xmas"],char:"",fitzpatrick_scale:!1,category:"objects"},confetti_ball:{keywords:["festival","party","birthday","circus"],char:"",fitzpatrick_scale:!1,category:"objects"},tada:{keywords:["party","congratulations","birthday","magic","circus","celebration"],char:"",fitzpatrick_scale:!1,category:"objects"},dolls:{keywords:["japanese","toy","kimono"],char:"",fitzpatrick_scale:!1,category:"objects"},wind_chime:{keywords:["nature","ding","spring","bell"],char:"",fitzpatrick_scale:!1,category:"objects"},crossed_flags:{keywords:["japanese","nation","country","border"],char:"",fitzpatrick_scale:!1,category:"objects"},izakaya_lantern:{keywords:["light","paper","halloween","spooky"],char:"",fitzpatrick_scale:!1,category:"objects"},red_envelope:{keywords:["gift"],char:"",fitzpatrick_scale:!1,category:"objects"},email:{keywords:["letter","postal","inbox","communication"],char:"",fitzpatrick_scale:!1,category:"objects"},envelope_with_arrow:{keywords:["email","communication"],char:"",fitzpatrick_scale:!1,category:"objects"},incoming_envelope:{keywords:["email","inbox"],char:"",fitzpatrick_scale:!1,category:"objects"},"e-mail":{keywords:["communication","inbox"],char:"",fitzpatrick_scale:!1,category:"objects"},love_letter:{keywords:["email","like","affection","envelope","valentines"],char:"",fitzpatrick_scale:!1,category:"objects"},postbox:{keywords:["email","letter","envelope"],char:"",fitzpatrick_scale:!1,category:"objects"},mailbox_closed:{keywords:["email","communication","inbox"],char:"",fitzpatrick_scale:!1,category:"objects"},mailbox:{keywords:["email","inbox","communication"],char:"",fitzpatrick_scale:!1,category:"objects"},mailbox_with_mail:{keywords:["email","inbox","communication"],char:"",fitzpatrick_scale:!1,category:"objects"},mailbox_with_no_mail:{keywords:["email","inbox"],char:"",fitzpatrick_scale:!1,category:"objects"},package:{keywords:["mail","gift","cardboard","box","moving"],char:"",fitzpatrick_scale:!1,category:"objects"},postal_horn:{keywords:["instrument","music"],char:"",fitzpatrick_scale:!1,category:"objects"},inbox_tray:{keywords:["email","documents"],char:"",fitzpatrick_scale:!1,category:"objects"},outbox_tray:{keywords:["inbox","email"],char:"",fitzpatrick_scale:!1,category:"objects"},scroll:{keywords:["documents","ancient","history","paper"],char:"",fitzpatrick_scale:!1,category:"objects"},page_with_curl:{keywords:["documents","office","paper"],char:"",fitzpatrick_scale:!1,category:"objects"},bookmark_tabs:{keywords:["favorite","save","order","tidy"],char:"",fitzpatrick_scale:!1,category:"objects"},receipt:{keywords:["accounting","expenses"],char:"",fitzpatrick_scale:!1,category:"objects"},bar_chart:{keywords:["graph","presentation","stats"],char:"",fitzpatrick_scale:!1,category:"objects"},chart_with_upwards_trend:{keywords:["graph","presentation","stats","recovery","business","economics","money","sales","good","success"],char:"",fitzpatrick_scale:!1,category:"objects"},chart_with_downwards_trend:{keywords:["graph","presentation","stats","recession","business","economics","money","sales","bad","failure"],char:"",fitzpatrick_scale:!1,category:"objects"},page_facing_up:{keywords:["documents","office","paper","information"],char:"",fitzpatrick_scale:!1,category:"objects"},date:{keywords:["calendar","schedule"],char:"",fitzpatrick_scale:!1,category:"objects"},calendar:{keywords:["schedule","date","planning"],char:"",fitzpatrick_scale:!1,category:"objects"},spiral_calendar:{keywords:["date","schedule","planning"],char:"",fitzpatrick_scale:!1,category:"objects"},card_index:{keywords:["business","stationery"],char:"",fitzpatrick_scale:!1,category:"objects"},card_file_box:{keywords:["business","stationery"],char:"",fitzpatrick_scale:!1,category:"objects"},ballot_box:{keywords:["election","vote"],char:"",fitzpatrick_scale:!1,category:"objects"},file_cabinet:{keywords:["filing","organizing"],char:"",fitzpatrick_scale:!1,category:"objects"},clipboard:{keywords:["stationery","documents"],char:"",fitzpatrick_scale:!1,category:"objects"},spiral_notepad:{keywords:["memo","stationery"],char:"",fitzpatrick_scale:!1,category:"objects"},file_folder:{keywords:["documents","business","office"],char:"",fitzpatrick_scale:!1,category:"objects"},open_file_folder:{keywords:["documents","load"],char:"",fitzpatrick_scale:!1,category:"objects"},card_index_dividers:{keywords:["organizing","business","stationery"],char:"",fitzpatrick_scale:!1,category:"objects"},newspaper_roll:{keywords:["press","headline"],char:"",fitzpatrick_scale:!1,category:"objects"},newspaper:{keywords:["press","headline"],char:"",fitzpatrick_scale:!1,category:"objects"},notebook:{keywords:["stationery","record","notes","paper","study"],char:"",fitzpatrick_scale:!1,category:"objects"},closed_book:{keywords:["read","library","knowledge","textbook","learn"],char:"",fitzpatrick_scale:!1,category:"objects"},green_book:{keywords:["read","library","knowledge","study"],char:"",fitzpatrick_scale:!1,category:"objects"},blue_book:{keywords:["read","library","knowledge","learn","study"],char:"",fitzpatrick_scale:!1,category:"objects"},orange_book:{keywords:["read","library","knowledge","textbook","study"],char:"",fitzpatrick_scale:!1,category:"objects"},notebook_with_decorative_cover:{keywords:["classroom","notes","record","paper","study"],char:"",fitzpatrick_scale:!1,category:"objects"},ledger:{keywords:["notes","paper"],char:"",fitzpatrick_scale:!1,category:"objects"},books:{keywords:["literature","library","study"],char:"",fitzpatrick_scale:!1,category:"objects"},open_book:{keywords:["book","read","library","knowledge","literature","learn","study"],char:"",fitzpatrick_scale:!1,category:"objects"},safety_pin:{keywords:["diaper"],char:"",fitzpatrick_scale:!1,category:"objects"},link:{keywords:["rings","url"],char:"",fitzpatrick_scale:!1,category:"objects"},paperclip:{keywords:["documents","stationery"],char:"",fitzpatrick_scale:!1,category:"objects"},paperclips:{keywords:["documents","stationery"],char:"",fitzpatrick_scale:!1,category:"objects"},scissors:{keywords:["stationery","cut"],char:"",fitzpatrick_scale:!1,category:"objects"},triangular_ruler:{keywords:["stationery","math","architect","sketch"],char:"",fitzpatrick_scale:!1,category:"objects"},straight_ruler:{keywords:["stationery","calculate","length","math","school","drawing","architect","sketch"],char:"",fitzpatrick_scale:!1,category:"objects"},abacus:{keywords:["calculation"],char:"",fitzpatrick_scale:!1,category:"objects"},pushpin:{keywords:["stationery","mark","here"],char:"",fitzpatrick_scale:!1,category:"objects"},round_pushpin:{keywords:["stationery","location","map","here"],char:"",fitzpatrick_scale:!1,category:"objects"},triangular_flag_on_post:{keywords:["mark","milestone","place"],char:"",fitzpatrick_scale:!1,category:"objects"},white_flag:{keywords:["losing","loser","lost","surrender","give up","fail"],char:"",fitzpatrick_scale:!1,category:"objects"},black_flag:{keywords:["pirate"],char:"",fitzpatrick_scale:!1,category:"objects"},rainbow_flag:{keywords:["flag","rainbow","pride","gay","lgbt","glbt","queer","homosexual","lesbian","bisexual","transgender"],char:"",fitzpatrick_scale:!1,category:"objects"},closed_lock_with_key:{keywords:["security","privacy"],char:"",fitzpatrick_scale:!1,category:"objects"},lock:{keywords:["security","password","padlock"],char:"",fitzpatrick_scale:!1,category:"objects"},unlock:{keywords:["privacy","security"],char:"",fitzpatrick_scale:!1,category:"objects"},lock_with_ink_pen:{keywords:["security","secret"],char:"",fitzpatrick_scale:!1,category:"objects"},pen:{keywords:["stationery","writing","write"],char:"",fitzpatrick_scale:!1,category:"objects"},fountain_pen:{keywords:["stationery","writing","write"],char:"",fitzpatrick_scale:!1,category:"objects"},black_nib:{keywords:["pen","stationery","writing","write"],char:"",fitzpatrick_scale:!1,category:"objects"},memo:{keywords:["write","documents","stationery","pencil","paper","writing","legal","exam","quiz","test","study","compose"],char:"",fitzpatrick_scale:!1,category:"objects"},pencil2:{keywords:["stationery","write","paper","writing","school","study"],char:"",fitzpatrick_scale:!1,category:"objects"},crayon:{keywords:["drawing","creativity"],char:"",fitzpatrick_scale:!1,category:"objects"},paintbrush:{keywords:["drawing","creativity","art"],char:"",fitzpatrick_scale:!1,category:"objects"},mag:{keywords:["search","zoom","find","detective"],char:"",fitzpatrick_scale:!1,category:"objects"},mag_right:{keywords:["search","zoom","find","detective"],char:"",fitzpatrick_scale:!1,category:"objects"},heart:{keywords:["love","like","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},orange_heart:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},yellow_heart:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},green_heart:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},blue_heart:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},purple_heart:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_heart:{keywords:["evil"],char:"",fitzpatrick_scale:!1,category:"symbols"},broken_heart:{keywords:["sad","sorry","break","heart","heartbreak"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_heart_exclamation:{keywords:["decoration","love"],char:"",fitzpatrick_scale:!1,category:"symbols"},two_hearts:{keywords:["love","like","affection","valentines","heart"],char:"",fitzpatrick_scale:!1,category:"symbols"},revolving_hearts:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},heartbeat:{keywords:["love","like","affection","valentines","pink","heart"],char:"",fitzpatrick_scale:!1,category:"symbols"},heartpulse:{keywords:["like","love","affection","valentines","pink"],char:"",fitzpatrick_scale:!1,category:"symbols"},sparkling_heart:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},cupid:{keywords:["love","like","heart","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},gift_heart:{keywords:["love","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},heart_decoration:{keywords:["purple-square","love","like"],char:"",fitzpatrick_scale:!1,category:"symbols"},peace_symbol:{keywords:["hippie"],char:"",fitzpatrick_scale:!1,category:"symbols"},latin_cross:{keywords:["christianity"],char:"",fitzpatrick_scale:!1,category:"symbols"},star_and_crescent:{keywords:["islam"],char:"",fitzpatrick_scale:!1,category:"symbols"},om:{keywords:["hinduism","buddhism","sikhism","jainism"],char:"",fitzpatrick_scale:!1,category:"symbols"},wheel_of_dharma:{keywords:["hinduism","buddhism","sikhism","jainism"],char:"",fitzpatrick_scale:!1,category:"symbols"},star_of_david:{keywords:["judaism"],char:"",fitzpatrick_scale:!1,category:"symbols"},six_pointed_star:{keywords:["purple-square","religion","jewish","hexagram"],char:"",fitzpatrick_scale:!1,category:"symbols"},menorah:{keywords:["hanukkah","candles","jewish"],char:"",fitzpatrick_scale:!1,category:"symbols"},yin_yang:{keywords:["balance"],char:"",fitzpatrick_scale:!1,category:"symbols"},orthodox_cross:{keywords:["suppedaneum","religion"],char:"",fitzpatrick_scale:!1,category:"symbols"},place_of_worship:{keywords:["religion","church","temple","prayer"],char:"",fitzpatrick_scale:!1,category:"symbols"},ophiuchus:{keywords:["sign","purple-square","constellation","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},aries:{keywords:["sign","purple-square","zodiac","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},taurus:{keywords:["purple-square","sign","zodiac","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},gemini:{keywords:["sign","zodiac","purple-square","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},cancer:{keywords:["sign","zodiac","purple-square","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},leo:{keywords:["sign","purple-square","zodiac","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},virgo:{keywords:["sign","zodiac","purple-square","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},libra:{keywords:["sign","purple-square","zodiac","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},scorpius:{keywords:["sign","zodiac","purple-square","astrology","scorpio"],char:"",fitzpatrick_scale:!1,category:"symbols"},sagittarius:{keywords:["sign","zodiac","purple-square","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},capricorn:{keywords:["sign","zodiac","purple-square","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},aquarius:{keywords:["sign","purple-square","zodiac","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},pisces:{keywords:["purple-square","sign","zodiac","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},id:{keywords:["purple-square","words"],char:"",fitzpatrick_scale:!1,category:"symbols"},atom_symbol:{keywords:["science","physics","chemistry"],char:"",fitzpatrick_scale:!1,category:"symbols"},u7a7a:{keywords:["kanji","japanese","chinese","empty","sky","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},u5272:{keywords:["cut","divide","chinese","kanji","pink-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},radioactive:{keywords:["nuclear","danger"],char:"",fitzpatrick_scale:!1,category:"symbols"},biohazard:{keywords:["danger"],char:"",fitzpatrick_scale:!1,category:"symbols"},mobile_phone_off:{keywords:["mute","orange-square","silence","quiet"],char:"",fitzpatrick_scale:!1,category:"symbols"},vibration_mode:{keywords:["orange-square","phone"],char:"",fitzpatrick_scale:!1,category:"symbols"},u6709:{keywords:["orange-square","chinese","have","kanji"],char:"",fitzpatrick_scale:!1,category:"symbols"},u7121:{keywords:["nothing","chinese","kanji","japanese","orange-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},u7533:{keywords:["chinese","japanese","kanji","orange-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},u55b6:{keywords:["japanese","opening hours","orange-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},u6708:{keywords:["chinese","month","moon","japanese","orange-square","kanji"],char:"",fitzpatrick_scale:!1,category:"symbols"},eight_pointed_black_star:{keywords:["orange-square","shape","polygon"],char:"",fitzpatrick_scale:!1,category:"symbols"},vs:{keywords:["words","orange-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},accept:{keywords:["ok","good","chinese","kanji","agree","yes","orange-circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_flower:{keywords:["japanese","spring"],char:"",fitzpatrick_scale:!1,category:"symbols"},ideograph_advantage:{keywords:["chinese","kanji","obtain","get","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},secret:{keywords:["privacy","chinese","sshh","kanji","red-circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},congratulations:{keywords:["chinese","kanji","japanese","red-circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},u5408:{keywords:["japanese","chinese","join","kanji","red-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},u6e80:{keywords:["full","chinese","japanese","red-square","kanji"],char:"",fitzpatrick_scale:!1,category:"symbols"},u7981:{keywords:["kanji","japanese","chinese","forbidden","limit","restricted","red-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},a:{keywords:["red-square","alphabet","letter"],char:"",fitzpatrick_scale:!1,category:"symbols"},b:{keywords:["red-square","alphabet","letter"],char:"",fitzpatrick_scale:!1,category:"symbols"},ab:{keywords:["red-square","alphabet"],char:"",fitzpatrick_scale:!1,category:"symbols"},cl:{keywords:["alphabet","words","red-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},o2:{keywords:["alphabet","red-square","letter"],char:"",fitzpatrick_scale:!1,category:"symbols"},sos:{keywords:["help","red-square","words","emergency","911"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_entry:{keywords:["limit","security","privacy","bad","denied","stop","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},name_badge:{keywords:["fire","forbid"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_entry_sign:{keywords:["forbid","stop","limit","denied","disallow","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},x:{keywords:["no","delete","remove","cancel","red"],char:"",fitzpatrick_scale:!1,category:"symbols"},o:{keywords:["circle","round"],char:"",fitzpatrick_scale:!1,category:"symbols"},stop_sign:{keywords:["stop"],char:"",fitzpatrick_scale:!1,category:"symbols"},anger:{keywords:["angry","mad"],char:"",fitzpatrick_scale:!1,category:"symbols"},hotsprings:{keywords:["bath","warm","relax"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_pedestrians:{keywords:["rules","crossing","walking","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},do_not_litter:{keywords:["trash","bin","garbage","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_bicycles:{keywords:["cyclist","prohibited","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},"non-potable_water":{keywords:["drink","faucet","tap","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},underage:{keywords:["18","drink","pub","night","minor","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_mobile_phones:{keywords:["iphone","mute","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},exclamation:{keywords:["heavy_exclamation_mark","danger","surprise","punctuation","wow","warning"],char:"",fitzpatrick_scale:!1,category:"symbols"},grey_exclamation:{keywords:["surprise","punctuation","gray","wow","warning"],char:"",fitzpatrick_scale:!1,category:"symbols"},question:{keywords:["doubt","confused"],char:"",fitzpatrick_scale:!1,category:"symbols"},grey_question:{keywords:["doubts","gray","huh","confused"],char:"",fitzpatrick_scale:!1,category:"symbols"},bangbang:{keywords:["exclamation","surprise"],char:"",fitzpatrick_scale:!1,category:"symbols"},interrobang:{keywords:["wat","punctuation","surprise"],char:"",fitzpatrick_scale:!1,category:"symbols"},100:{keywords:["score","perfect","numbers","century","exam","quiz","test","pass","hundred"],char:"",fitzpatrick_scale:!1,category:"symbols"},low_brightness:{keywords:["sun","afternoon","warm","summer"],char:"",fitzpatrick_scale:!1,category:"symbols"},high_brightness:{keywords:["sun","light"],char:"",fitzpatrick_scale:!1,category:"symbols"},trident:{keywords:["weapon","spear"],char:"",fitzpatrick_scale:!1,category:"symbols"},fleur_de_lis:{keywords:["decorative","scout"],char:"",fitzpatrick_scale:!1,category:"symbols"},part_alternation_mark:{keywords:["graph","presentation","stats","business","economics","bad"],char:"",fitzpatrick_scale:!1,category:"symbols"},warning:{keywords:["exclamation","wip","alert","error","problem","issue"],char:"",fitzpatrick_scale:!1,category:"symbols"},children_crossing:{keywords:["school","warning","danger","sign","driving","yellow-diamond"],char:"",fitzpatrick_scale:!1,category:"symbols"},beginner:{keywords:["badge","shield"],char:"",fitzpatrick_scale:!1,category:"symbols"},recycle:{keywords:["arrow","environment","garbage","trash"],char:"",fitzpatrick_scale:!1,category:"symbols"},u6307:{keywords:["chinese","point","green-square","kanji"],char:"",fitzpatrick_scale:!1,category:"symbols"},chart:{keywords:["green-square","graph","presentation","stats"],char:"",fitzpatrick_scale:!1,category:"symbols"},sparkle:{keywords:["stars","green-square","awesome","good","fireworks"],char:"",fitzpatrick_scale:!1,category:"symbols"},eight_spoked_asterisk:{keywords:["star","sparkle","green-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},negative_squared_cross_mark:{keywords:["x","green-square","no","deny"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_check_mark:{keywords:["green-square","ok","agree","vote","election","answer","tick"],char:"",fitzpatrick_scale:!1,category:"symbols"},diamond_shape_with_a_dot_inside:{keywords:["jewel","blue","gem","crystal","fancy"],char:"",fitzpatrick_scale:!1,category:"symbols"},cyclone:{keywords:["weather","swirl","blue","cloud","vortex","spiral","whirlpool","spin","tornado","hurricane","typhoon"],char:"",fitzpatrick_scale:!1,category:"symbols"},loop:{keywords:["tape","cassette"],char:"",fitzpatrick_scale:!1,category:"symbols"},globe_with_meridians:{keywords:["earth","international","world","internet","interweb","i18n"],char:"",fitzpatrick_scale:!1,category:"symbols"},m:{keywords:["alphabet","blue-circle","letter"],char:"",fitzpatrick_scale:!1,category:"symbols"},atm:{keywords:["money","sales","cash","blue-square","payment","bank"],char:"",fitzpatrick_scale:!1,category:"symbols"},sa:{keywords:["japanese","blue-square","katakana"],char:"",fitzpatrick_scale:!1,category:"symbols"},passport_control:{keywords:["custom","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},customs:{keywords:["passport","border","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},baggage_claim:{keywords:["blue-square","airport","transport"],char:"",fitzpatrick_scale:!1,category:"symbols"},left_luggage:{keywords:["blue-square","travel"],char:"",fitzpatrick_scale:!1,category:"symbols"},wheelchair:{keywords:["blue-square","disabled","a11y","accessibility"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_smoking:{keywords:["cigarette","blue-square","smell","smoke"],char:"",fitzpatrick_scale:!1,category:"symbols"},wc:{keywords:["toilet","restroom","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},parking:{keywords:["cars","blue-square","alphabet","letter"],char:"",fitzpatrick_scale:!1,category:"symbols"},potable_water:{keywords:["blue-square","liquid","restroom","cleaning","faucet"],char:"",fitzpatrick_scale:!1,category:"symbols"},mens:{keywords:["toilet","restroom","wc","blue-square","gender","male"],char:"",fitzpatrick_scale:!1,category:"symbols"},womens:{keywords:["purple-square","woman","female","toilet","loo","restroom","gender"],char:"",fitzpatrick_scale:!1,category:"symbols"},baby_symbol:{keywords:["orange-square","child"],char:"",fitzpatrick_scale:!1,category:"symbols"},restroom:{keywords:["blue-square","toilet","refresh","wc","gender"],char:"",fitzpatrick_scale:!1,category:"symbols"},put_litter_in_its_place:{keywords:["blue-square","sign","human","info"],char:"",fitzpatrick_scale:!1,category:"symbols"},cinema:{keywords:["blue-square","record","film","movie","curtain","stage","theater"],char:"",fitzpatrick_scale:!1,category:"symbols"},signal_strength:{keywords:["blue-square","reception","phone","internet","connection","wifi","bluetooth","bars"],char:"",fitzpatrick_scale:!1,category:"symbols"},koko:{keywords:["blue-square","here","katakana","japanese","destination"],char:"",fitzpatrick_scale:!1,category:"symbols"},ng:{keywords:["blue-square","words","shape","icon"],char:"",fitzpatrick_scale:!1,category:"symbols"},ok:{keywords:["good","agree","yes","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},up:{keywords:["blue-square","above","high"],char:"",fitzpatrick_scale:!1,category:"symbols"},cool:{keywords:["words","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},new:{keywords:["blue-square","words","start"],char:"",fitzpatrick_scale:!1,category:"symbols"},free:{keywords:["blue-square","words"],char:"",fitzpatrick_scale:!1,category:"symbols"},zero:{keywords:["0","numbers","blue-square","null"],char:"0",fitzpatrick_scale:!1,category:"symbols"},one:{keywords:["blue-square","numbers","1"],char:"1",fitzpatrick_scale:!1,category:"symbols"},two:{keywords:["numbers","2","prime","blue-square"],char:"2",fitzpatrick_scale:!1,category:"symbols"},three:{keywords:["3","numbers","prime","blue-square"],char:"3",fitzpatrick_scale:!1,category:"symbols"},four:{keywords:["4","numbers","blue-square"],char:"4",fitzpatrick_scale:!1,category:"symbols"},five:{keywords:["5","numbers","blue-square","prime"],char:"5",fitzpatrick_scale:!1,category:"symbols"},six:{keywords:["6","numbers","blue-square"],char:"6",fitzpatrick_scale:!1,category:"symbols"},seven:{keywords:["7","numbers","blue-square","prime"],char:"7",fitzpatrick_scale:!1,category:"symbols"},eight:{keywords:["8","blue-square","numbers"],char:"8",fitzpatrick_scale:!1,category:"symbols"},nine:{keywords:["blue-square","numbers","9"],char:"9",fitzpatrick_scale:!1,category:"symbols"},keycap_ten:{keywords:["numbers","10","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},asterisk:{keywords:["star","keycap"],char:"*",fitzpatrick_scale:!1,category:"symbols"},1234:{keywords:["numbers","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},eject_button:{keywords:["blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_forward:{keywords:["blue-square","right","direction","play"],char:"",fitzpatrick_scale:!1,category:"symbols"},pause_button:{keywords:["pause","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},next_track_button:{keywords:["forward","next","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},stop_button:{keywords:["blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},record_button:{keywords:["blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},play_or_pause_button:{keywords:["blue-square","play","pause"],char:"",fitzpatrick_scale:!1,category:"symbols"},previous_track_button:{keywords:["backward"],char:"",fitzpatrick_scale:!1,category:"symbols"},fast_forward:{keywords:["blue-square","play","speed","continue"],char:"",fitzpatrick_scale:!1,category:"symbols"},rewind:{keywords:["play","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},twisted_rightwards_arrows:{keywords:["blue-square","shuffle","music","random"],char:"",fitzpatrick_scale:!1,category:"symbols"},repeat:{keywords:["loop","record"],char:"",fitzpatrick_scale:!1,category:"symbols"},repeat_one:{keywords:["blue-square","loop"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_backward:{keywords:["blue-square","left","direction"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_up_small:{keywords:["blue-square","triangle","direction","point","forward","top"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_down_small:{keywords:["blue-square","direction","bottom"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_double_up:{keywords:["blue-square","direction","top"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_double_down:{keywords:["blue-square","direction","bottom"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_right:{keywords:["blue-square","next"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_left:{keywords:["blue-square","previous","back"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_up:{keywords:["blue-square","continue","top","direction"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_down:{keywords:["blue-square","direction","bottom"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_upper_right:{keywords:["blue-square","point","direction","diagonal","northeast"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_lower_right:{keywords:["blue-square","direction","diagonal","southeast"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_lower_left:{keywords:["blue-square","direction","diagonal","southwest"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_upper_left:{keywords:["blue-square","point","direction","diagonal","northwest"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_up_down:{keywords:["blue-square","direction","way","vertical"],char:"",fitzpatrick_scale:!1,category:"symbols"},left_right_arrow:{keywords:["shape","direction","horizontal","sideways"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrows_counterclockwise:{keywords:["blue-square","sync","cycle"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_right_hook:{keywords:["blue-square","return","rotate","direction"],char:"",fitzpatrick_scale:!1,category:"symbols"},leftwards_arrow_with_hook:{keywords:["back","return","blue-square","undo","enter"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_heading_up:{keywords:["blue-square","direction","top"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_heading_down:{keywords:["blue-square","direction","bottom"],char:"",fitzpatrick_scale:!1,category:"symbols"},hash:{keywords:["symbol","blue-square","twitter"],char:"#",fitzpatrick_scale:!1,category:"symbols"},information_source:{keywords:["blue-square","alphabet","letter"],char:"",fitzpatrick_scale:!1,category:"symbols"},abc:{keywords:["blue-square","alphabet"],char:"",fitzpatrick_scale:!1,category:"symbols"},abcd:{keywords:["blue-square","alphabet"],char:"",fitzpatrick_scale:!1,category:"symbols"},capital_abcd:{keywords:["alphabet","words","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},symbols:{keywords:["blue-square","music","note","ampersand","percent","glyphs","characters"],char:"",fitzpatrick_scale:!1,category:"symbols"},musical_note:{keywords:["score","tone","sound"],char:"",fitzpatrick_scale:!1,category:"symbols"},notes:{keywords:["music","score"],char:"",fitzpatrick_scale:!1,category:"symbols"},wavy_dash:{keywords:["draw","line","moustache","mustache","squiggle","scribble"],char:"",fitzpatrick_scale:!1,category:"symbols"},curly_loop:{keywords:["scribble","draw","shape","squiggle"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_check_mark:{keywords:["ok","nike","answer","yes","tick"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrows_clockwise:{keywords:["sync","cycle","round","repeat"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_plus_sign:{keywords:["math","calculation","addition","more","increase"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_minus_sign:{keywords:["math","calculation","subtract","less"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_division_sign:{keywords:["divide","math","calculation"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_multiplication_x:{keywords:["math","calculation"],char:"",fitzpatrick_scale:!1,category:"symbols"},infinity:{keywords:["forever"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_dollar_sign:{keywords:["money","sales","payment","currency","buck"],char:"",fitzpatrick_scale:!1,category:"symbols"},currency_exchange:{keywords:["money","sales","dollar","travel"],char:"",fitzpatrick_scale:!1,category:"symbols"},copyright:{keywords:["ip","license","circle","law","legal"],char:"",fitzpatrick_scale:!1,category:"symbols"},registered:{keywords:["alphabet","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},tm:{keywords:["trademark","brand","law","legal"],char:"",fitzpatrick_scale:!1,category:"symbols"},end:{keywords:["words","arrow"],char:"",fitzpatrick_scale:!1,category:"symbols"},back:{keywords:["arrow","words","return"],char:"",fitzpatrick_scale:!1,category:"symbols"},on:{keywords:["arrow","words"],char:"",fitzpatrick_scale:!1,category:"symbols"},top:{keywords:["words","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},soon:{keywords:["arrow","words"],char:"",fitzpatrick_scale:!1,category:"symbols"},ballot_box_with_check:{keywords:["ok","agree","confirm","black-square","vote","election","yes","tick"],char:"",fitzpatrick_scale:!1,category:"symbols"},radio_button:{keywords:["input","old","music","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_circle:{keywords:["shape","round"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_circle:{keywords:["shape","button","round"],char:"",fitzpatrick_scale:!1,category:"symbols"},red_circle:{keywords:["shape","error","danger"],char:"",fitzpatrick_scale:!1,category:"symbols"},large_blue_circle:{keywords:["shape","icon","button"],char:"",fitzpatrick_scale:!1,category:"symbols"},small_orange_diamond:{keywords:["shape","jewel","gem"],char:"",fitzpatrick_scale:!1,category:"symbols"},small_blue_diamond:{keywords:["shape","jewel","gem"],char:"",fitzpatrick_scale:!1,category:"symbols"},large_orange_diamond:{keywords:["shape","jewel","gem"],char:"",fitzpatrick_scale:!1,category:"symbols"},large_blue_diamond:{keywords:["shape","jewel","gem"],char:"",fitzpatrick_scale:!1,category:"symbols"},small_red_triangle:{keywords:["shape","direction","up","top"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_small_square:{keywords:["shape","icon"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_small_square:{keywords:["shape","icon"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_large_square:{keywords:["shape","icon","button"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_large_square:{keywords:["shape","icon","stone","button"],char:"",fitzpatrick_scale:!1,category:"symbols"},small_red_triangle_down:{keywords:["shape","direction","bottom"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_medium_square:{keywords:["shape","button","icon"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_medium_square:{keywords:["shape","stone","icon"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_medium_small_square:{keywords:["icon","shape","button"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_medium_small_square:{keywords:["shape","stone","icon","button"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_square_button:{keywords:["shape","input","frame"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_square_button:{keywords:["shape","input"],char:"",fitzpatrick_scale:!1,category:"symbols"},speaker:{keywords:["sound","volume","silence","broadcast"],char:"",fitzpatrick_scale:!1,category:"symbols"},sound:{keywords:["volume","speaker","broadcast"],char:"",fitzpatrick_scale:!1,category:"symbols"},loud_sound:{keywords:["volume","noise","noisy","speaker","broadcast"],char:"",fitzpatrick_scale:!1,category:"symbols"},mute:{keywords:["sound","volume","silence","quiet"],char:"",fitzpatrick_scale:!1,category:"symbols"},mega:{keywords:["sound","speaker","volume"],char:"",fitzpatrick_scale:!1,category:"symbols"},loudspeaker:{keywords:["volume","sound"],char:"",fitzpatrick_scale:!1,category:"symbols"},bell:{keywords:["sound","notification","christmas","xmas","chime"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_bell:{keywords:["sound","volume","mute","quiet","silent"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_joker:{keywords:["poker","cards","game","play","magic"],char:"",fitzpatrick_scale:!1,category:"symbols"},mahjong:{keywords:["game","play","chinese","kanji"],char:"",fitzpatrick_scale:!1,category:"symbols"},spades:{keywords:["poker","cards","suits","magic"],char:"",fitzpatrick_scale:!1,category:"symbols"},clubs:{keywords:["poker","cards","magic","suits"],char:"",fitzpatrick_scale:!1,category:"symbols"},hearts:{keywords:["poker","cards","magic","suits"],char:"",fitzpatrick_scale:!1,category:"symbols"},diamonds:{keywords:["poker","cards","magic","suits"],char:"",fitzpatrick_scale:!1,category:"symbols"},flower_playing_cards:{keywords:["game","sunset","red"],char:"",fitzpatrick_scale:!1,category:"symbols"},thought_balloon:{keywords:["bubble","cloud","speech","thinking","dream"],char:"",fitzpatrick_scale:!1,category:"symbols"},right_anger_bubble:{keywords:["caption","speech","thinking","mad"],char:"",fitzpatrick_scale:!1,category:"symbols"},speech_balloon:{keywords:["bubble","words","message","talk","chatting"],char:"",fitzpatrick_scale:!1,category:"symbols"},left_speech_bubble:{keywords:["words","message","talk","chatting"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock1:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock2:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock3:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock4:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock5:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock6:{keywords:["time","late","early","schedule","dawn","dusk"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock7:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock8:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock9:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock10:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock11:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock12:{keywords:["time","noon","midnight","midday","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock130:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock230:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock330:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock430:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock530:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock630:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock730:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock830:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock930:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock1030:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock1130:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock1230:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},afghanistan:{keywords:["af","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},aland_islands:{keywords:["land","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},albania:{keywords:["al","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},algeria:{keywords:["dz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},american_samoa:{keywords:["american","ws","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},andorra:{keywords:["ad","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},angola:{keywords:["ao","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},anguilla:{keywords:["ai","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},antarctica:{keywords:["aq","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},antigua_barbuda:{keywords:["antigua","barbuda","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},argentina:{keywords:["ar","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},armenia:{keywords:["am","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},aruba:{keywords:["aw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},australia:{keywords:["au","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},austria:{keywords:["at","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},azerbaijan:{keywords:["az","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bahamas:{keywords:["bs","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bahrain:{keywords:["bh","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bangladesh:{keywords:["bd","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},barbados:{keywords:["bb","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},belarus:{keywords:["by","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},belgium:{keywords:["be","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},belize:{keywords:["bz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},benin:{keywords:["bj","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bermuda:{keywords:["bm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bhutan:{keywords:["bt","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bolivia:{keywords:["bo","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},caribbean_netherlands:{keywords:["bonaire","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bosnia_herzegovina:{keywords:["bosnia","herzegovina","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},botswana:{keywords:["bw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},brazil:{keywords:["br","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},british_indian_ocean_territory:{keywords:["british","indian","ocean","territory","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},british_virgin_islands:{keywords:["british","virgin","islands","bvi","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},brunei:{keywords:["bn","darussalam","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bulgaria:{keywords:["bg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},burkina_faso:{keywords:["burkina","faso","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},burundi:{keywords:["bi","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cape_verde:{keywords:["cabo","verde","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cambodia:{keywords:["kh","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cameroon:{keywords:["cm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},canada:{keywords:["ca","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},canary_islands:{keywords:["canary","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cayman_islands:{keywords:["cayman","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},central_african_republic:{keywords:["central","african","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},chad:{keywords:["td","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},chile:{keywords:["flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cn:{keywords:["china","chinese","prc","flag","country","nation","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},christmas_island:{keywords:["christmas","island","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cocos_islands:{keywords:["cocos","keeling","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},colombia:{keywords:["co","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},comoros:{keywords:["km","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},congo_brazzaville:{keywords:["congo","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},congo_kinshasa:{keywords:["congo","democratic","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cook_islands:{keywords:["cook","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},costa_rica:{keywords:["costa","rica","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},croatia:{keywords:["hr","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cuba:{keywords:["cu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},curacao:{keywords:["curaao","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cyprus:{keywords:["cy","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},czech_republic:{keywords:["cz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},denmark:{keywords:["dk","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},djibouti:{keywords:["dj","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},dominica:{keywords:["dm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},dominican_republic:{keywords:["dominican","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},ecuador:{keywords:["ec","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},egypt:{keywords:["eg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},el_salvador:{keywords:["el","salvador","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},equatorial_guinea:{keywords:["equatorial","gn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},eritrea:{keywords:["er","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},estonia:{keywords:["ee","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},ethiopia:{keywords:["et","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},eu:{keywords:["european","union","flag","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},falkland_islands:{keywords:["falkland","islands","malvinas","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},faroe_islands:{keywords:["faroe","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},fiji:{keywords:["fj","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},finland:{keywords:["fi","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},fr:{keywords:["banner","flag","nation","france","french","country"],char:"",fitzpatrick_scale:!1,category:"flags"},french_guiana:{keywords:["french","guiana","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},french_polynesia:{keywords:["french","polynesia","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},french_southern_territories:{keywords:["french","southern","territories","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},gabon:{keywords:["ga","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},gambia:{keywords:["gm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},georgia:{keywords:["ge","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},de:{keywords:["german","nation","flag","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},ghana:{keywords:["gh","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},gibraltar:{keywords:["gi","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},greece:{keywords:["gr","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},greenland:{keywords:["gl","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},grenada:{keywords:["gd","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guadeloupe:{keywords:["gp","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guam:{keywords:["gu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guatemala:{keywords:["gt","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guernsey:{keywords:["gg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guinea:{keywords:["gn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guinea_bissau:{keywords:["gw","bissau","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guyana:{keywords:["gy","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},haiti:{keywords:["ht","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},honduras:{keywords:["hn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},hong_kong:{keywords:["hong","kong","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},hungary:{keywords:["hu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},iceland:{keywords:["is","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},india:{keywords:["in","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},indonesia:{keywords:["flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},iran:{keywords:["iran,","islamic","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},iraq:{keywords:["iq","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},ireland:{keywords:["ie","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},isle_of_man:{keywords:["isle","man","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},israel:{keywords:["il","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},it:{keywords:["italy","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cote_divoire:{keywords:["ivory","coast","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},jamaica:{keywords:["jm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},jp:{keywords:["japanese","nation","flag","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},jersey:{keywords:["je","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},jordan:{keywords:["jo","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kazakhstan:{keywords:["kz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kenya:{keywords:["ke","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kiribati:{keywords:["ki","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kosovo:{keywords:["xk","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kuwait:{keywords:["kw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kyrgyzstan:{keywords:["kg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},laos:{keywords:["lao","democratic","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},latvia:{keywords:["lv","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},lebanon:{keywords:["lb","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},lesotho:{keywords:["ls","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},liberia:{keywords:["lr","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},libya:{keywords:["ly","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},liechtenstein:{keywords:["li","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},lithuania:{keywords:["lt","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},luxembourg:{keywords:["lu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},macau:{keywords:["macao","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},macedonia:{keywords:["macedonia,","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},madagascar:{keywords:["mg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},malawi:{keywords:["mw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},malaysia:{keywords:["my","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},maldives:{keywords:["mv","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mali:{keywords:["ml","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},malta:{keywords:["mt","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},marshall_islands:{keywords:["marshall","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},martinique:{keywords:["mq","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mauritania:{keywords:["mr","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mauritius:{keywords:["mu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mayotte:{keywords:["yt","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mexico:{keywords:["mx","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},micronesia:{keywords:["micronesia,","federated","states","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},moldova:{keywords:["moldova,","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},monaco:{keywords:["mc","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mongolia:{keywords:["mn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},montenegro:{keywords:["me","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},montserrat:{keywords:["ms","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},morocco:{keywords:["ma","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mozambique:{keywords:["mz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},myanmar:{keywords:["mm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},namibia:{keywords:["na","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},nauru:{keywords:["nr","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},nepal:{keywords:["np","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},netherlands:{keywords:["nl","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},new_caledonia:{keywords:["new","caledonia","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},new_zealand:{keywords:["new","zealand","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},nicaragua:{keywords:["ni","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},niger:{keywords:["ne","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},nigeria:{keywords:["flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},niue:{keywords:["nu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},norfolk_island:{keywords:["norfolk","island","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},northern_mariana_islands:{keywords:["northern","mariana","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},north_korea:{keywords:["north","korea","nation","flag","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},norway:{keywords:["no","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},oman:{keywords:["om_symbol","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},pakistan:{keywords:["pk","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},palau:{keywords:["pw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},palestinian_territories:{keywords:["palestine","palestinian","territories","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},panama:{keywords:["pa","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},papua_new_guinea:{keywords:["papua","new","guinea","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},paraguay:{keywords:["py","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},peru:{keywords:["pe","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},philippines:{keywords:["ph","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},pitcairn_islands:{keywords:["pitcairn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},poland:{keywords:["pl","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},portugal:{keywords:["pt","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},puerto_rico:{keywords:["puerto","rico","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},qatar:{keywords:["qa","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},reunion:{keywords:["runion","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},romania:{keywords:["ro","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},ru:{keywords:["russian","federation","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},rwanda:{keywords:["rw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},st_barthelemy:{keywords:["saint","barthlemy","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},st_helena:{keywords:["saint","helena","ascension","tristan","cunha","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},st_kitts_nevis:{keywords:["saint","kitts","nevis","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},st_lucia:{keywords:["saint","lucia","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},st_pierre_miquelon:{keywords:["saint","pierre","miquelon","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},st_vincent_grenadines:{keywords:["saint","vincent","grenadines","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},samoa:{keywords:["ws","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},san_marino:{keywords:["san","marino","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},sao_tome_principe:{keywords:["sao","tome","principe","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},saudi_arabia:{keywords:["flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},senegal:{keywords:["sn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},serbia:{keywords:["rs","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},seychelles:{keywords:["sc","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},sierra_leone:{keywords:["sierra","leone","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},singapore:{keywords:["sg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},sint_maarten:{keywords:["sint","maarten","dutch","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},slovakia:{keywords:["sk","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},slovenia:{keywords:["si","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},solomon_islands:{keywords:["solomon","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},somalia:{keywords:["so","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},south_africa:{keywords:["south","africa","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},south_georgia_south_sandwich_islands:{keywords:["south","georgia","sandwich","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kr:{keywords:["south","korea","nation","flag","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},south_sudan:{keywords:["south","sd","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},es:{keywords:["spain","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},sri_lanka:{keywords:["sri","lanka","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},sudan:{keywords:["sd","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},suriname:{keywords:["sr","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},swaziland:{keywords:["sz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},sweden:{keywords:["se","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},switzerland:{keywords:["ch","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},syria:{keywords:["syrian","arab","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},taiwan:{keywords:["tw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tajikistan:{keywords:["tj","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tanzania:{keywords:["tanzania,","united","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},thailand:{keywords:["th","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},timor_leste:{keywords:["timor","leste","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},togo:{keywords:["tg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tokelau:{keywords:["tk","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tonga:{keywords:["to","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},trinidad_tobago:{keywords:["trinidad","tobago","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tunisia:{keywords:["tn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tr:{keywords:["turkey","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},turkmenistan:{keywords:["flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},turks_caicos_islands:{keywords:["turks","caicos","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tuvalu:{keywords:["flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},uganda:{keywords:["ug","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},ukraine:{keywords:["ua","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},united_arab_emirates:{keywords:["united","arab","emirates","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},uk:{keywords:["united","kingdom","great","britain","northern","ireland","flag","nation","country","banner","british","UK","english","england","union jack"],char:"",fitzpatrick_scale:!1,category:"flags"},england:{keywords:["flag","english"],char:"",fitzpatrick_scale:!1,category:"flags"},scotland:{keywords:["flag","scottish"],char:"",fitzpatrick_scale:!1,category:"flags"},wales:{keywords:["flag","welsh"],char:"",fitzpatrick_scale:!1,category:"flags"},us:{keywords:["united","states","america","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},us_virgin_islands:{keywords:["virgin","islands","us","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},uruguay:{keywords:["uy","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},uzbekistan:{keywords:["uz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},vanuatu:{keywords:["vu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},vatican_city:{keywords:["vatican","city","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},venezuela:{keywords:["ve","bolivarian","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},vietnam:{keywords:["viet","nam","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},wallis_futuna:{keywords:["wallis","futuna","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},western_sahara:{keywords:["western","sahara","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},yemen:{keywords:["ye","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},zambia:{keywords:["zm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},zimbabwe:{keywords:["zw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},united_nations:{keywords:["un","flag","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},pirate_flag:{keywords:["skull","crossbones","flag","banner"],char:"",fitzpatrick_scale:!1,category:"flags"}});tinymce.Resource.add("content/default/content.css",`body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;line-height:1.4;margin:1rem}table{border-collapse:collapse}table:not([cellpadding]) td,table:not([cellpadding]) th{padding:.4rem}table[border]:not([border="0"]):not([style*=border-width]) td,table[border]:not([border="0"]):not([style*=border-width]) th{border-width:1px}table[border]:not([border="0"]):not([style*=border-style]) td,table[border]:not([border="0"]):not([style*=border-style]) th{border-style:solid}table[border]:not([border="0"]):not([style*=border-color]) td,table[border]:not([border="0"]):not([style*=border-color]) th{border-color:#ccc}figure{display:table;margin:1rem auto}figure figcaption{color:#999;display:block;margin-top:.25rem;text-align:center}hr{border-color:#ccc;border-style:solid;border-width:1px 0 0 0}code{background-color:#e8e8e8;border-radius:3px;padding:.1rem .2rem}.mce-content-body:not([dir=rtl]) blockquote{border-left:2px solid #ccc;margin-left:1.5rem;padding-left:1rem}.mce-content-body[dir=rtl] blockquote{border-right:2px solid #ccc;margin-right:1.5rem;padding-right:1rem}`);tinymce.Resource.add("content/dark/content.css",`body{background-color:#222f3e;color:#fff;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;line-height:1.4;margin:1rem}a{color:#4099ff}table{border-collapse:collapse}table:not([cellpadding]) td,table:not([cellpadding]) th{padding:.4rem}table[border]:not([border="0"]):not([style*=border-width]) td,table[border]:not([border="0"]):not([style*=border-width]) th{border-width:1px}table[border]:not([border="0"]):not([style*=border-style]) td,table[border]:not([border="0"]):not([style*=border-style]) th{border-style:solid}table[border]:not([border="0"]):not([style*=border-color]) td,table[border]:not([border="0"]):not([style*=border-color]) th{border-color:#6d737b}figure{display:table;margin:1rem auto}figure figcaption{color:#8a8f97;display:block;margin-top:.25rem;text-align:center}hr{border-color:#6d737b;border-style:solid;border-width:1px 0 0 0}code{background-color:#6d737b;border-radius:3px;padding:.1rem .2rem}.mce-content-body:not([dir=rtl]) blockquote{border-left:2px solid #6d737b;margin-left:1.5rem;padding-left:1rem}.mce-content-body[dir=rtl] blockquote{border-right:2px solid #6d737b;margin-right:1.5rem;padding-right:1rem}`);tinymce.Resource.add("content/tinymce-5-dark/content.css",`body{background-color:#2f3742;color:#dfe0e4;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;line-height:1.4;margin:1rem}a{color:#4099ff}table{border-collapse:collapse}table:not([cellpadding]) td,table:not([cellpadding]) th{padding:.4rem}table[border]:not([border="0"]):not([style*=border-width]) td,table[border]:not([border="0"]):not([style*=border-width]) th{border-width:1px}table[border]:not([border="0"]):not([style*=border-style]) td,table[border]:not([border="0"]):not([style*=border-style]) th{border-style:solid}table[border]:not([border="0"]):not([style*=border-color]) td,table[border]:not([border="0"]):not([style*=border-color]) th{border-color:#6d737b}figure{display:table;margin:1rem auto}figure figcaption{color:#8a8f97;display:block;margin-top:.25rem;text-align:center}hr{border-color:#6d737b;border-style:solid;border-width:1px 0 0 0}code{background-color:#6d737b;border-radius:3px;padding:.1rem .2rem}.mce-content-body:not([dir=rtl]) blockquote{border-left:2px solid #6d737b;margin-left:1.5rem;padding-left:1rem}.mce-content-body[dir=rtl] blockquote{border-right:2px solid #6d737b;margin-right:1.5rem;padding-right:1rem}`);tinymce.Resource.add("ui/default/content.css",`.mce-content-body .mce-item-anchor{background:transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'8'%20height%3D'12'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20d%3D'M0%200L8%200%208%2012%204.09117821%209%200%2012z'%2F%3E%3C%2Fsvg%3E%0A") no-repeat center}.mce-content-body .mce-item-anchor:empty{cursor:default;display:inline-block;height:12px!important;padding:0 2px;-webkit-user-modify:read-only;-moz-user-modify:read-only;-webkit-user-select:all;user-select:all;width:8px!important}.mce-content-body .mce-item-anchor:not(:empty){background-position-x:2px;display:inline-block;padding-left:12px}.mce-content-body .mce-item-anchor[data-mce-selected]{outline-offset:1px}.tox-comments-visible .tox-comment[contenteditable=false]:not([data-mce-selected]),.tox-comments-visible span.tox-comment img:not([data-mce-selected]),.tox-comments-visible span.tox-comment span.mce-preview-object:not([data-mce-selected]),.tox-comments-visible span.tox-comment>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment>video:not([data-mce-selected]){outline:3px solid #ffe796}.tox-comments-visible .tox-comment[contenteditable=false][data-mce-annotation-active=true]:not([data-mce-selected]){outline:3px solid #ffcf30}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] img:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] span.mce-preview-object:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>video:not([data-mce-selected]){outline:3px solid #ffcf30}.tox-comments-visible span.tox-comment:not([data-mce-selected]){background-color:#ffe796;outline:0}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]:not([data-mce-selected=inline-boundary]){background-color:#ffcf30}.tox-comments-visible span.tox-comment[data-mce-selected]{background-color:#ffcf30;border-radius:3px;box-shadow:0 0 0 2px #006ce7}.tox-checklist>li:not(.tox-checklist--hidden){list-style:none;margin:.25em 0}.tox-checklist>li:not(.tox-checklist--hidden)::before{content:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-unchecked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2215%22%20height%3D%2215%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill-rule%3D%22nonzero%22%20stroke%3D%22%234C4C4C%22%20rx%3D%222%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A");cursor:pointer;height:1em;margin-left:-1.5em;margin-top:.125em;position:absolute;width:1em}.tox-checklist li:not(.tox-checklist--hidden).tox-checklist--checked::before{content:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-checked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%234099FF%22%20fill-rule%3D%22nonzero%22%20rx%3D%222%22%2F%3E%3Cpath%20id%3D%22Path%22%20fill%3D%22%23FFF%22%20fill-rule%3D%22nonzero%22%20d%3D%22M11.5703186%2C3.14417309%20C11.8516238%2C2.73724603%2012.4164781%2C2.62829933%2012.83558%2C2.89774797%20C13.260121%2C3.17069355%2013.3759736%2C3.72932262%2013.0909105%2C4.14168582%20L7.7580587%2C11.8560195%20C7.43776896%2C12.3193404%206.76483983%2C12.3852142%206.35607322%2C11.9948725%20L3.02491697%2C8.8138662%20C2.66090143%2C8.46625845%202.65798871%2C7.89594698%203.01850234%2C7.54483354%20C3.373942%2C7.19866177%203.94940006%2C7.19592841%204.30829608%2C7.5386474%20L6.85276923%2C9.9684299%20L11.5703186%2C3.14417309%20Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A")}[dir=rtl] .tox-checklist>li:not(.tox-checklist--hidden)::before{margin-left:0;margin-right:-1.5em}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;hyphens:none}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.mce-content-body{overflow-wrap:break-word;word-wrap:break-word}.mce-content-body .mce-visual-caret{background-color:#000;background-color:currentColor;position:absolute}.mce-content-body .mce-visual-caret-hidden{display:none}.mce-content-body [data-mce-caret]{left:-1000px;margin:0;padding:0;position:absolute;right:auto;top:0}.mce-content-body .mce-offscreen-selection{left:-2000000px;max-width:1000000px;position:absolute}.mce-content-body [contentEditable=false]{cursor:default}.mce-content-body [contentEditable=true]{cursor:text}.tox-cursor-format-painter{cursor:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%0A%20%20%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M15%2C6%20C15%2C5.45%2014.55%2C5%2014%2C5%20L6%2C5%20C5.45%2C5%205%2C5.45%205%2C6%20L5%2C10%20C5%2C10.55%205.45%2C11%206%2C11%20L14%2C11%20C14.55%2C11%2015%2C10.55%2015%2C10%20L15%2C9%20L16%2C9%20L16%2C12%20L9%2C12%20L9%2C19%20C9%2C19.55%209.45%2C20%2010%2C20%20L11%2C20%20C11.55%2C20%2012%2C19.55%2012%2C19%20L12%2C14%20L18%2C14%20L18%2C7%20L15%2C7%20L15%2C6%20Z%22%2F%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M1%2C1%20L8.25%2C1%20C8.66421356%2C1%209%2C1.33578644%209%2C1.75%20L9%2C1.75%20C9%2C2.16421356%208.66421356%2C2.5%208.25%2C2.5%20L2.5%2C2.5%20L2.5%2C8.25%20C2.5%2C8.66421356%202.16421356%2C9%201.75%2C9%20L1.75%2C9%20C1.33578644%2C9%201%2C8.66421356%201%2C8.25%20L1%2C1%20Z%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A"),default}div.mce-footnotes hr{margin-inline:0 auto;width:25%}div.mce-footnotes li>a.mce-footnotes-backlink{-webkit-text-decoration:none;text-decoration:none}@media print{sup.mce-footnote a{color:#000;-webkit-text-decoration:none;text-decoration:none}div.mce-footnotes{page-break-inside:avoid;break-inside:avoid;width:100%}div.mce-footnotes li>a.mce-footnotes-backlink{display:none}}tiny-math-block{display:flex;justify-content:center;margin:16px 0 16px 0}tiny-math-inline{display:inline-block}.mce-content-body figure.align-left{float:left}.mce-content-body figure.align-right{float:right}.mce-content-body figure.image.align-center{display:table;margin-left:auto;margin-right:auto}.mce-preview-object{border:1px solid gray;display:inline-block;line-height:0;margin:0 2px;position:relative}.mce-preview-object .mce-shim{background:url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");height:100%;left:0;position:absolute;top:0;width:100%}.mce-preview-object[data-mce-selected="2"] .mce-shim{display:none}.mce-content-body .mce-mergetag{cursor:default!important;-webkit-user-select:none;user-select:none}.mce-content-body .mce-mergetag:hover{background-color:rgba(0,108,231,.1)}.mce-content-body .mce-mergetag-affix{background-color:rgba(0,108,231,.1);color:#006ce7}.mce-object{background:transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M4%203h16a1%201%200%200%201%201%201v16a1%201%200%200%201-1%201H4a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1zm1%202v14h14V5H5zm4.79%202.565l5.64%204.028a.5.5%200%200%201%200%20.814l-5.64%204.028a.5.5%200%200%201-.79-.407V7.972a.5.5%200%200%201%20.79-.407z%22%2F%3E%3C%2Fsvg%3E%0A") no-repeat center;border:1px dashed #aaa}.mce-pagebreak{border:1px dashed #aaa;cursor:default;display:block;height:5px;margin-top:15px;page-break-before:always;width:100%}@media print{.mce-pagebreak{border:0}}.tiny-pageembed .mce-shim{background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);height:100%;left:0;position:absolute;top:0;width:100%}.tiny-pageembed[data-mce-selected="2"] .mce-shim{display:none}.tiny-pageembed{display:inline-block;position:relative}.tiny-pageembed--16by9,.tiny-pageembed--1by1,.tiny-pageembed--21by9,.tiny-pageembed--4by3{display:block;overflow:hidden;padding:0;position:relative;width:100%}.tiny-pageembed--21by9{padding-top:42.857143%}.tiny-pageembed--16by9{padding-top:56.25%}.tiny-pageembed--4by3{padding-top:75%}.tiny-pageembed--1by1{padding-top:100%}.tiny-pageembed--16by9 iframe,.tiny-pageembed--1by1 iframe,.tiny-pageembed--21by9 iframe,.tiny-pageembed--4by3 iframe{border:0;height:100%;left:0;position:absolute;top:0;width:100%}.mce-content-body[data-mce-placeholder]{position:relative}.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:rgba(34,47,62,.7);content:attr(data-mce-placeholder);position:absolute}@media (forced-colors:active){.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:highlight;filter:brightness(30%);z-index:-1}}.mce-content-body:not([dir=rtl])[data-mce-placeholder]:not(.mce-visualblocks)::before{left:1px}.mce-content-body[dir=rtl][data-mce-placeholder]:not(.mce-visualblocks)::before{right:1px}.mce-content-body div.mce-resizehandle{background-color:#4099ff;border-color:#4099ff;border-style:solid;border-width:1px;box-sizing:border-box;height:10px;position:absolute;width:10px;z-index:1298}.mce-content-body div.mce-resizehandle:hover{background-color:#4099ff}.mce-content-body div.mce-resizehandle:first-of-type{cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(2){cursor:nesw-resize}.mce-content-body div.mce-resizehandle:nth-of-type(3){cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(4){cursor:nesw-resize}.mce-content-body .mce-resize-backdrop{z-index:10000}.mce-content-body .mce-clonedresizable{cursor:default;opacity:.5;outline:1px dashed black;position:absolute;z-index:10001}.mce-content-body .mce-clonedresizable.mce-resizetable-columns td,.mce-content-body .mce-clonedresizable.mce-resizetable-columns th{border:0}.mce-content-body .mce-resize-helper{background:#555;background:rgba(0 0 0%);border:1px;border-radius:3px;color:#fff;display:none;font-family:sans-serif;font-size:12px;line-height:14px;margin:5px 10px;padding:5px;position:absolute;white-space:nowrap;z-index:10002}.tox-rtc-user-selection{position:relative}.tox-rtc-user-cursor{bottom:0;cursor:default;position:absolute;top:0;width:2px}.tox-rtc-user-cursor::before{background-color:inherit;border-radius:50%;content:'';display:block;height:8px;position:absolute;right:-3px;top:-3px;width:8px}.tox-rtc-user-cursor:hover::after{background-color:inherit;border-radius:100px;box-sizing:border-box;color:#fff;content:attr(data-user);display:block;font-size:12px;font-weight:700;left:-5px;min-height:8px;min-width:8px;padding:0 12px;position:absolute;top:-11px;white-space:nowrap;z-index:1000}.tox-rtc-user-selection--1 .tox-rtc-user-cursor{background-color:#2dc26b}.tox-rtc-user-selection--2 .tox-rtc-user-cursor{background-color:#e03e2d}.tox-rtc-user-selection--3 .tox-rtc-user-cursor{background-color:#f1c40f}.tox-rtc-user-selection--4 .tox-rtc-user-cursor{background-color:#3598db}.tox-rtc-user-selection--5 .tox-rtc-user-cursor{background-color:#b96ad9}.tox-rtc-user-selection--6 .tox-rtc-user-cursor{background-color:#e67e23}.tox-rtc-user-selection--7 .tox-rtc-user-cursor{background-color:#aaa69d}.tox-rtc-user-selection--8 .tox-rtc-user-cursor{background-color:#f368e0}.tox-rtc-remote-image{background:#eaeaea url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2236%22%20height%3D%2212%22%20viewBox%3D%220%200%2036%2012%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%3Ccircle%20cx%3D%226%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2218%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.33s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2230%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.66s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%3C%2Fsvg%3E%0A") no-repeat center center;border:1px solid #ccc;min-height:240px;min-width:320px}.mce-match-marker{background:#aaa;color:#fff}.mce-match-marker-selected{background:#39f;color:#fff}.mce-match-marker-selected::selection{background:#39f;color:#fff}.mce-content-body audio[data-mce-selected],.mce-content-body details[data-mce-selected],.mce-content-body embed[data-mce-selected],.mce-content-body img[data-mce-selected],.mce-content-body object[data-mce-selected],.mce-content-body table[data-mce-selected],.mce-content-body video[data-mce-selected]{outline:3px solid #b4d7ff}.mce-content-body hr[data-mce-selected]{outline:3px solid #b4d7ff;outline-offset:1px}.mce-content-body [contentEditable=false] [contentEditable=true]:focus{outline:3px solid #b4d7ff}.mce-content-body [contentEditable=false] [contentEditable=true]:hover{outline:3px solid #b4d7ff}.mce-content-body [contentEditable=false][data-mce-selected]{cursor:not-allowed;outline:3px solid #b4d7ff}.mce-content-body [data-mce-selected=inline-boundary]{background-color:#b4d7ff}.mce-content-body .mce-edit-focus{outline:3px solid #b4d7ff}.mce-content-body td[data-mce-selected],.mce-content-body th[data-mce-selected]{position:relative}.mce-content-body td[data-mce-selected]::selection,.mce-content-body th[data-mce-selected]::selection{background:0 0}.mce-content-body td[data-mce-selected] *,.mce-content-body th[data-mce-selected] *{outline:0;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{background-color:rgba(180,215,255,.7);border:1px solid rgba(180,215,255,.7);bottom:-1px;content:'';left:-1px;mix-blend-mode:multiply;position:absolute;right:-1px;top:-1px}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{border-color:rgba(0,84,180,.7)}}.mce-content-body img[data-mce-selected]::selection{background:0 0}.ephox-snooker-resizer-bar{background-color:#b4d7ff;opacity:0;-webkit-user-select:none;user-select:none}.ephox-snooker-resizer-cols{cursor:col-resize}.ephox-snooker-resizer-rows{cursor:row-resize}.ephox-snooker-resizer-bar.ephox-snooker-resizer-bar-dragging{opacity:1}.mce-spellchecker-word{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%23ff0000'%20fill%3D'none'%20stroke-linecap%3D'round'%20stroke-opacity%3D'.75'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default;height:2rem}.mce-spellchecker-grammar{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%2300A835'%20fill%3D'none'%20stroke-linecap%3D'round'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default}.mce-toc{border:1px solid gray}.mce-toc h2{margin:4px}.mce-toc ul>li{list-style-type:none}[data-mce-block]{display:block}.mce-item-table:not([border]),.mce-item-table:not([border]) caption,.mce-item-table:not([border]) td,.mce-item-table:not([border]) th,.mce-item-table[border="0"],.mce-item-table[border="0"] caption,.mce-item-table[border="0"] td,.mce-item-table[border="0"] th,table[style*="border-width: 0px"],table[style*="border-width: 0px"] caption,table[style*="border-width: 0px"] td,table[style*="border-width: 0px"] th{border:1px dashed #bbb}.mce-visualblocks address,.mce-visualblocks article,.mce-visualblocks aside,.mce-visualblocks blockquote,.mce-visualblocks div:not([data-mce-bogus]),.mce-visualblocks dl,.mce-visualblocks figcaption,.mce-visualblocks figure,.mce-visualblocks h1,.mce-visualblocks h2,.mce-visualblocks h3,.mce-visualblocks h4,.mce-visualblocks h5,.mce-visualblocks h6,.mce-visualblocks hgroup,.mce-visualblocks ol,.mce-visualblocks p,.mce-visualblocks pre,.mce-visualblocks section,.mce-visualblocks ul{background-repeat:no-repeat;border:1px dashed #bbb;margin-left:3px;padding-top:10px}.mce-visualblocks p{background-image:url(data:image/gif;base64,R0lGODlhCQAJAJEAAAAAAP///7u7u////yH5BAEAAAMALAAAAAAJAAkAAAIQnG+CqCN/mlyvsRUpThG6AgA7)}.mce-visualblocks h1{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGu1JuxHoAfRNRW3TWXyF2YiRUAOw==)}.mce-visualblocks h2{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8Hybbx4oOuqgTynJd6bGlWg3DkJzoaUAAAOw==)}.mce-visualblocks h3{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIZjI8Hybbx4oOuqgTynJf2Ln2NOHpQpmhAAQA7)}.mce-visualblocks h4{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxInR0zqeAdhtJlXwV1oCll2HaWgAAOw==)}.mce-visualblocks h5{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjane4iq5GlW05GgIkIZUAAAOw==)}.mce-visualblocks h6{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjan04jep1iZ1XRlAo5bVgAAOw==)}.mce-visualblocks div:not([data-mce-bogus]){background-image:url(data:image/gif;base64,R0lGODlhEgAKAIABALu7u////yH5BAEAAAEALAAAAAASAAoAAAIfjI9poI0cgDywrhuxfbrzDEbQM2Ei5aRjmoySW4pAAQA7)}.mce-visualblocks section{background-image:url(data:image/gif;base64,R0lGODlhKAAKAIABALu7u////yH5BAEAAAEALAAAAAAoAAoAAAI5jI+pywcNY3sBWHdNrplytD2ellDeSVbp+GmWqaDqDMepc8t17Y4vBsK5hDyJMcI6KkuYU+jpjLoKADs=)}.mce-visualblocks article{background-image:url(data:image/gif;base64,R0lGODlhKgAKAIABALu7u////yH5BAEAAAEALAAAAAAqAAoAAAI6jI+pywkNY3wG0GBvrsd2tXGYSGnfiF7ikpXemTpOiJScasYoDJJrjsG9gkCJ0ag6KhmaIe3pjDYBBQA7)}.mce-visualblocks blockquote{background-image:url(data:image/gif;base64,R0lGODlhPgAKAIABALu7u////yH5BAEAAAEALAAAAAA+AAoAAAJPjI+py+0Knpz0xQDyuUhvfoGgIX5iSKZYgq5uNL5q69asZ8s5rrf0yZmpNkJZzFesBTu8TOlDVAabUyatguVhWduud3EyiUk45xhTTgMBBQA7)}.mce-visualblocks address{background-image:url(data:image/gif;base64,R0lGODlhLQAKAIABALu7u////yH5BAEAAAEALAAAAAAtAAoAAAI/jI+pywwNozSP1gDyyZcjb3UaRpXkWaXmZW4OqKLhBmLs+K263DkJK7OJeifh7FicKD9A1/IpGdKkyFpNmCkAADs=)}.mce-visualblocks pre{background-image:url(data:image/gif;base64,R0lGODlhFQAKAIABALu7uwAAACH5BAEAAAEALAAAAAAVAAoAAAIjjI+ZoN0cgDwSmnpz1NCueYERhnibZVKLNnbOq8IvKpJtVQAAOw==)}.mce-visualblocks figure{background-image:url(data:image/gif;base64,R0lGODlhJAAKAIAAALu7u////yH5BAEAAAEALAAAAAAkAAoAAAI0jI+py+2fwAHUSFvD3RlvG4HIp4nX5JFSpnZUJ6LlrM52OE7uSWosBHScgkSZj7dDKnWAAgA7)}.mce-visualblocks figcaption{border:1px dashed #bbb}.mce-visualblocks hgroup{background-image:url(data:image/gif;base64,R0lGODlhJwAKAIABALu7uwAAACH5BAEAAAEALAAAAAAnAAoAAAI3jI+pywYNI3uB0gpsRtt5fFnfNZaVSYJil4Wo03Hv6Z62uOCgiXH1kZIIJ8NiIxRrAZNMZAtQAAA7)}.mce-visualblocks aside{background-image:url(data:image/gif;base64,R0lGODlhHgAKAIABAKqqqv///yH5BAEAAAEALAAAAAAeAAoAAAItjI+pG8APjZOTzgtqy7I3f1yehmQcFY4WKZbqByutmW4aHUd6vfcVbgudgpYCADs=)}.mce-visualblocks ul{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIAAALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGuYnqUVSjvw26DzzXiqIDlVwAAOw==)}.mce-visualblocks ol{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybH6HHt0qourxC6CvzXieHyeWQAAOw==)}.mce-visualblocks dl{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybEOnmOvUoWznTqeuEjNSCqeGRUAOw==)}.mce-visualblocks:not([dir=rtl]) address,.mce-visualblocks:not([dir=rtl]) article,.mce-visualblocks:not([dir=rtl]) aside,.mce-visualblocks:not([dir=rtl]) blockquote,.mce-visualblocks:not([dir=rtl]) div:not([data-mce-bogus]),.mce-visualblocks:not([dir=rtl]) dl,.mce-visualblocks:not([dir=rtl]) figcaption,.mce-visualblocks:not([dir=rtl]) figure,.mce-visualblocks:not([dir=rtl]) h1,.mce-visualblocks:not([dir=rtl]) h2,.mce-visualblocks:not([dir=rtl]) h3,.mce-visualblocks:not([dir=rtl]) h4,.mce-visualblocks:not([dir=rtl]) h5,.mce-visualblocks:not([dir=rtl]) h6,.mce-visualblocks:not([dir=rtl]) hgroup,.mce-visualblocks:not([dir=rtl]) ol,.mce-visualblocks:not([dir=rtl]) p,.mce-visualblocks:not([dir=rtl]) pre,.mce-visualblocks:not([dir=rtl]) section,.mce-visualblocks:not([dir=rtl]) ul{margin-left:3px}.mce-visualblocks[dir=rtl] address,.mce-visualblocks[dir=rtl] article,.mce-visualblocks[dir=rtl] aside,.mce-visualblocks[dir=rtl] blockquote,.mce-visualblocks[dir=rtl] div:not([data-mce-bogus]),.mce-visualblocks[dir=rtl] dl,.mce-visualblocks[dir=rtl] figcaption,.mce-visualblocks[dir=rtl] figure,.mce-visualblocks[dir=rtl] h1,.mce-visualblocks[dir=rtl] h2,.mce-visualblocks[dir=rtl] h3,.mce-visualblocks[dir=rtl] h4,.mce-visualblocks[dir=rtl] h5,.mce-visualblocks[dir=rtl] h6,.mce-visualblocks[dir=rtl] hgroup,.mce-visualblocks[dir=rtl] ol,.mce-visualblocks[dir=rtl] p,.mce-visualblocks[dir=rtl] pre,.mce-visualblocks[dir=rtl] section,.mce-visualblocks[dir=rtl] ul{background-position-x:right;margin-right:3px}.mce-nbsp,.mce-shy{background:#aaa}.mce-shy::after{content:'-'}body{font-family:sans-serif}table{border-collapse:collapse}`);tinymce.Resource.add("ui/dark/content.css",`.mce-content-body .mce-item-anchor{background:transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'8'%20height%3D'12'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20d%3D'M0%200L8%200%208%2012%204.09117821%209%200%2012z'%20fill%3D%22%23cccccc%22%2F%3E%3C%2Fsvg%3E%0A") no-repeat center}.mce-content-body .mce-item-anchor:empty{cursor:default;display:inline-block;height:12px!important;padding:0 2px;-webkit-user-modify:read-only;-moz-user-modify:read-only;-webkit-user-select:all;user-select:all;width:8px!important}.mce-content-body .mce-item-anchor:not(:empty){background-position-x:2px;display:inline-block;padding-left:12px}.mce-content-body .mce-item-anchor[data-mce-selected]{outline-offset:1px}.tox-comments-visible .tox-comment[contenteditable=false]:not([data-mce-selected]),.tox-comments-visible span.tox-comment img:not([data-mce-selected]),.tox-comments-visible span.tox-comment span.mce-preview-object:not([data-mce-selected]),.tox-comments-visible span.tox-comment>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment>video:not([data-mce-selected]){outline:3px solid #1b3b60}.tox-comments-visible .tox-comment[contenteditable=false][data-mce-annotation-active=true]:not([data-mce-selected]){outline:3px solid #006ce7}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] img:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] span.mce-preview-object:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>video:not([data-mce-selected]){outline:3px solid #006ce7}.tox-comments-visible span.tox-comment:not([data-mce-selected]){background-color:#1b3b60;outline:0}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]:not([data-mce-selected=inline-boundary]){background-color:#1b3b60}.tox-comments-visible span.tox-comment[data-mce-selected]{background-color:#1b3b60;border-radius:3px;box-shadow:0 0 0 2px #006ce7}.tox-checklist>li:not(.tox-checklist--hidden){list-style:none;margin:.25em 0}.tox-checklist>li:not(.tox-checklist--hidden)::before{content:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-unchecked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2215%22%20height%3D%2215%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill-rule%3D%22nonzero%22%20stroke%3D%22%236d737b%22%20rx%3D%222%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A");cursor:pointer;height:1em;margin-left:-1.5em;margin-top:.125em;position:absolute;width:1em}.tox-checklist li:not(.tox-checklist--hidden).tox-checklist--checked::before{content:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-checked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%234099FF%22%20fill-rule%3D%22nonzero%22%20rx%3D%222%22%2F%3E%3Cpath%20id%3D%22Path%22%20fill%3D%22%23FFF%22%20fill-rule%3D%22nonzero%22%20d%3D%22M11.5703186%2C3.14417309%20C11.8516238%2C2.73724603%2012.4164781%2C2.62829933%2012.83558%2C2.89774797%20C13.260121%2C3.17069355%2013.3759736%2C3.72932262%2013.0909105%2C4.14168582%20L7.7580587%2C11.8560195%20C7.43776896%2C12.3193404%206.76483983%2C12.3852142%206.35607322%2C11.9948725%20L3.02491697%2C8.8138662%20C2.66090143%2C8.46625845%202.65798871%2C7.89594698%203.01850234%2C7.54483354%20C3.373942%2C7.19866177%203.94940006%2C7.19592841%204.30829608%2C7.5386474%20L6.85276923%2C9.9684299%20L11.5703186%2C3.14417309%20Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A")}[dir=rtl] .tox-checklist>li:not(.tox-checklist--hidden)::before{margin-left:0;margin-right:-1.5em}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:0 0;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#282a36}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#6272a4}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ff79c6}.token.boolean,.token.number{color:#bd93f9}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#50fa7b}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#f1fa8c}.token.keyword{color:#8be9fd}.token.important,.token.regex{color:#ffb86c}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.mce-content-body{overflow-wrap:break-word;word-wrap:break-word}.mce-content-body .mce-visual-caret{background-color:#000;background-color:currentColor;position:absolute}.mce-content-body .mce-visual-caret-hidden{display:none}.mce-content-body [data-mce-caret]{left:-1000px;margin:0;padding:0;position:absolute;right:auto;top:0}.mce-content-body .mce-offscreen-selection{left:-2000000px;max-width:1000000px;position:absolute}.mce-content-body [contentEditable=false]{cursor:default}.mce-content-body [contentEditable=true]{cursor:text}.tox-cursor-format-painter{cursor:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%0A%20%20%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M15%2C6%20C15%2C5.45%2014.55%2C5%2014%2C5%20L6%2C5%20C5.45%2C5%205%2C5.45%205%2C6%20L5%2C10%20C5%2C10.55%205.45%2C11%206%2C11%20L14%2C11%20C14.55%2C11%2015%2C10.55%2015%2C10%20L15%2C9%20L16%2C9%20L16%2C12%20L9%2C12%20L9%2C19%20C9%2C19.55%209.45%2C20%2010%2C20%20L11%2C20%20C11.55%2C20%2012%2C19.55%2012%2C19%20L12%2C14%20L18%2C14%20L18%2C7%20L15%2C7%20L15%2C6%20Z%22%2F%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M1%2C1%20L8.25%2C1%20C8.66421356%2C1%209%2C1.33578644%209%2C1.75%20L9%2C1.75%20C9%2C2.16421356%208.66421356%2C2.5%208.25%2C2.5%20L2.5%2C2.5%20L2.5%2C8.25%20C2.5%2C8.66421356%202.16421356%2C9%201.75%2C9%20L1.75%2C9%20C1.33578644%2C9%201%2C8.66421356%201%2C8.25%20L1%2C1%20Z%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A"),default}div.mce-footnotes hr{margin-inline:0 auto;width:25%}div.mce-footnotes li>a.mce-footnotes-backlink{-webkit-text-decoration:none;text-decoration:none}@media print{sup.mce-footnote a{color:#000;-webkit-text-decoration:none;text-decoration:none}div.mce-footnotes{page-break-inside:avoid;break-inside:avoid;width:100%}div.mce-footnotes li>a.mce-footnotes-backlink{display:none}}tiny-math-block{display:flex;justify-content:center;margin:16px 0 16px 0}tiny-math-inline{display:inline-block}.mce-content-body figure.align-left{float:left}.mce-content-body figure.align-right{float:right}.mce-content-body figure.image.align-center{display:table;margin-left:auto;margin-right:auto}.mce-preview-object{border:1px solid gray;display:inline-block;line-height:0;margin:0 2px;position:relative}.mce-preview-object .mce-shim{background:url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");height:100%;left:0;position:absolute;top:0;width:100%}.mce-preview-object[data-mce-selected="2"] .mce-shim{display:none}.mce-content-body .mce-mergetag{cursor:default!important;-webkit-user-select:none;user-select:none}.mce-content-body .mce-mergetag:hover{background-color:rgba(0,108,231,.3)}.mce-content-body .mce-mergetag-affix{background-color:rgba(0,108,231,.3);color:#006ce7}.mce-object{background:transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M4%203h16a1%201%200%200%201%201%201v16a1%201%200%200%201-1%201H4a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1zm1%202v14h14V5H5zm4.79%202.565l5.64%204.028a.5.5%200%200%201%200%20.814l-5.64%204.028a.5.5%200%200%201-.79-.407V7.972a.5.5%200%200%201%20.79-.407z%22%20fill%3D%22%23cccccc%22%2F%3E%3C%2Fsvg%3E%0A") no-repeat center;border:1px dashed #aaa}.mce-pagebreak{border:1px dashed #aaa;cursor:default;display:block;height:5px;margin-top:15px;page-break-before:always;width:100%}@media print{.mce-pagebreak{border:0}}.tiny-pageembed .mce-shim{background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);height:100%;left:0;position:absolute;top:0;width:100%}.tiny-pageembed[data-mce-selected="2"] .mce-shim{display:none}.tiny-pageembed{display:inline-block;position:relative}.tiny-pageembed--16by9,.tiny-pageembed--1by1,.tiny-pageembed--21by9,.tiny-pageembed--4by3{display:block;overflow:hidden;padding:0;position:relative;width:100%}.tiny-pageembed--21by9{padding-top:42.857143%}.tiny-pageembed--16by9{padding-top:56.25%}.tiny-pageembed--4by3{padding-top:75%}.tiny-pageembed--1by1{padding-top:100%}.tiny-pageembed--16by9 iframe,.tiny-pageembed--1by1 iframe,.tiny-pageembed--21by9 iframe,.tiny-pageembed--4by3 iframe{border:0;height:100%;left:0;position:absolute;top:0;width:100%}.mce-content-body[data-mce-placeholder]{position:relative}.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:rgba(34,47,62,.7);content:attr(data-mce-placeholder);position:absolute}@media (forced-colors:active){.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:highlight;filter:brightness(30%);z-index:-1}}.mce-content-body:not([dir=rtl])[data-mce-placeholder]:not(.mce-visualblocks)::before{left:1px}.mce-content-body[dir=rtl][data-mce-placeholder]:not(.mce-visualblocks)::before{right:1px}.mce-content-body div.mce-resizehandle{background-color:#4099ff;border-color:#4099ff;border-style:solid;border-width:1px;box-sizing:border-box;height:10px;position:absolute;width:10px;z-index:1298}.mce-content-body div.mce-resizehandle:hover{background-color:#4099ff}.mce-content-body div.mce-resizehandle:first-of-type{cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(2){cursor:nesw-resize}.mce-content-body div.mce-resizehandle:nth-of-type(3){cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(4){cursor:nesw-resize}.mce-content-body .mce-resize-backdrop{z-index:10000}.mce-content-body .mce-clonedresizable{cursor:default;opacity:.5;outline:1px dashed black;position:absolute;z-index:10001}.mce-content-body .mce-clonedresizable.mce-resizetable-columns td,.mce-content-body .mce-clonedresizable.mce-resizetable-columns th{border:0}.mce-content-body .mce-resize-helper{background:#555;background:rgba(0 0 0%);border:1px;border-radius:3px;color:#fff;display:none;font-family:sans-serif;font-size:12px;line-height:14px;margin:5px 10px;padding:5px;position:absolute;white-space:nowrap;z-index:10002}.tox-rtc-user-selection{position:relative}.tox-rtc-user-cursor{bottom:0;cursor:default;position:absolute;top:0;width:2px}.tox-rtc-user-cursor::before{background-color:inherit;border-radius:50%;content:'';display:block;height:8px;position:absolute;right:-3px;top:-3px;width:8px}.tox-rtc-user-cursor:hover::after{background-color:inherit;border-radius:100px;box-sizing:border-box;color:#fff;content:attr(data-user);display:block;font-size:12px;font-weight:700;left:-5px;min-height:8px;min-width:8px;padding:0 12px;position:absolute;top:-11px;white-space:nowrap;z-index:1000}.tox-rtc-user-selection--1 .tox-rtc-user-cursor{background-color:#2dc26b}.tox-rtc-user-selection--2 .tox-rtc-user-cursor{background-color:#e03e2d}.tox-rtc-user-selection--3 .tox-rtc-user-cursor{background-color:#f1c40f}.tox-rtc-user-selection--4 .tox-rtc-user-cursor{background-color:#3598db}.tox-rtc-user-selection--5 .tox-rtc-user-cursor{background-color:#b96ad9}.tox-rtc-user-selection--6 .tox-rtc-user-cursor{background-color:#e67e23}.tox-rtc-user-selection--7 .tox-rtc-user-cursor{background-color:#aaa69d}.tox-rtc-user-selection--8 .tox-rtc-user-cursor{background-color:#f368e0}.tox-rtc-remote-image{background:#eaeaea url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2236%22%20height%3D%2212%22%20viewBox%3D%220%200%2036%2012%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%3Ccircle%20cx%3D%226%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2218%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.33s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2230%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.66s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%3C%2Fsvg%3E%0A") no-repeat center center;border:1px solid #ccc;min-height:240px;min-width:320px}.mce-match-marker{background:#aaa;color:#fff}.mce-match-marker-selected{background:#39f;color:#fff}.mce-match-marker-selected::selection{background:#39f;color:#fff}.mce-content-body audio[data-mce-selected],.mce-content-body details[data-mce-selected],.mce-content-body embed[data-mce-selected],.mce-content-body img[data-mce-selected],.mce-content-body object[data-mce-selected],.mce-content-body table[data-mce-selected],.mce-content-body video[data-mce-selected]{outline:3px solid #4099ff}.mce-content-body hr[data-mce-selected]{outline:3px solid #4099ff;outline-offset:1px}.mce-content-body [contentEditable=false] [contentEditable=true]:focus{outline:3px solid #4099ff}.mce-content-body [contentEditable=false] [contentEditable=true]:hover{outline:3px solid #4099ff}.mce-content-body [contentEditable=false][data-mce-selected]{cursor:not-allowed;outline:3px solid #4099ff}.mce-content-body [data-mce-selected=inline-boundary]{background-color:#4099ff}.mce-content-body .mce-edit-focus{outline:3px solid #4099ff}.mce-content-body td[data-mce-selected],.mce-content-body th[data-mce-selected]{position:relative}.mce-content-body td[data-mce-selected]::selection,.mce-content-body th[data-mce-selected]::selection{background:0 0}.mce-content-body td[data-mce-selected] *,.mce-content-body th[data-mce-selected] *{outline:0;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{background-color:rgba(180,215,255,.7);border:1px solid transparent;bottom:-1px;content:'';left:-1px;mix-blend-mode:lighten;position:absolute;right:-1px;top:-1px}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{border-color:rgba(0,84,180,.7)}}.mce-content-body img[data-mce-selected]::selection{background:0 0}.ephox-snooker-resizer-bar{background-color:#4099ff;opacity:0;-webkit-user-select:none;user-select:none}.ephox-snooker-resizer-cols{cursor:col-resize}.ephox-snooker-resizer-rows{cursor:row-resize}.ephox-snooker-resizer-bar.ephox-snooker-resizer-bar-dragging{opacity:1}.mce-spellchecker-word{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%23ff0000'%20fill%3D'none'%20stroke-linecap%3D'round'%20stroke-opacity%3D'.75'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default;height:2rem}.mce-spellchecker-grammar{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%2300A835'%20fill%3D'none'%20stroke-linecap%3D'round'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default}.mce-toc{border:1px solid gray}.mce-toc h2{margin:4px}.mce-toc ul>li{list-style-type:none}[data-mce-block]{display:block}.mce-item-table:not([border]),.mce-item-table:not([border]) caption,.mce-item-table:not([border]) td,.mce-item-table:not([border]) th,.mce-item-table[border="0"],.mce-item-table[border="0"] caption,.mce-item-table[border="0"] td,.mce-item-table[border="0"] th,table[style*="border-width: 0px"],table[style*="border-width: 0px"] caption,table[style*="border-width: 0px"] td,table[style*="border-width: 0px"] th{border:1px dashed #bbb}.mce-visualblocks address,.mce-visualblocks article,.mce-visualblocks aside,.mce-visualblocks blockquote,.mce-visualblocks div:not([data-mce-bogus]),.mce-visualblocks dl,.mce-visualblocks figcaption,.mce-visualblocks figure,.mce-visualblocks h1,.mce-visualblocks h2,.mce-visualblocks h3,.mce-visualblocks h4,.mce-visualblocks h5,.mce-visualblocks h6,.mce-visualblocks hgroup,.mce-visualblocks ol,.mce-visualblocks p,.mce-visualblocks pre,.mce-visualblocks section,.mce-visualblocks ul{background-repeat:no-repeat;border:1px dashed #bbb;margin-left:3px;padding-top:10px}.mce-visualblocks p{background-image:url(data:image/gif;base64,R0lGODlhCQAJAJEAAAAAAP///7u7u////yH5BAEAAAMALAAAAAAJAAkAAAIQnG+CqCN/mlyvsRUpThG6AgA7)}.mce-visualblocks h1{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGu1JuxHoAfRNRW3TWXyF2YiRUAOw==)}.mce-visualblocks h2{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8Hybbx4oOuqgTynJd6bGlWg3DkJzoaUAAAOw==)}.mce-visualblocks h3{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIZjI8Hybbx4oOuqgTynJf2Ln2NOHpQpmhAAQA7)}.mce-visualblocks h4{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxInR0zqeAdhtJlXwV1oCll2HaWgAAOw==)}.mce-visualblocks h5{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjane4iq5GlW05GgIkIZUAAAOw==)}.mce-visualblocks h6{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjan04jep1iZ1XRlAo5bVgAAOw==)}.mce-visualblocks div:not([data-mce-bogus]){background-image:url(data:image/gif;base64,R0lGODlhEgAKAIABALu7u////yH5BAEAAAEALAAAAAASAAoAAAIfjI9poI0cgDywrhuxfbrzDEbQM2Ei5aRjmoySW4pAAQA7)}.mce-visualblocks section{background-image:url(data:image/gif;base64,R0lGODlhKAAKAIABALu7u////yH5BAEAAAEALAAAAAAoAAoAAAI5jI+pywcNY3sBWHdNrplytD2ellDeSVbp+GmWqaDqDMepc8t17Y4vBsK5hDyJMcI6KkuYU+jpjLoKADs=)}.mce-visualblocks article{background-image:url(data:image/gif;base64,R0lGODlhKgAKAIABALu7u////yH5BAEAAAEALAAAAAAqAAoAAAI6jI+pywkNY3wG0GBvrsd2tXGYSGnfiF7ikpXemTpOiJScasYoDJJrjsG9gkCJ0ag6KhmaIe3pjDYBBQA7)}.mce-visualblocks blockquote{background-image:url(data:image/gif;base64,R0lGODlhPgAKAIABALu7u////yH5BAEAAAEALAAAAAA+AAoAAAJPjI+py+0Knpz0xQDyuUhvfoGgIX5iSKZYgq5uNL5q69asZ8s5rrf0yZmpNkJZzFesBTu8TOlDVAabUyatguVhWduud3EyiUk45xhTTgMBBQA7)}.mce-visualblocks address{background-image:url(data:image/gif;base64,R0lGODlhLQAKAIABALu7u////yH5BAEAAAEALAAAAAAtAAoAAAI/jI+pywwNozSP1gDyyZcjb3UaRpXkWaXmZW4OqKLhBmLs+K263DkJK7OJeifh7FicKD9A1/IpGdKkyFpNmCkAADs=)}.mce-visualblocks pre{background-image:url(data:image/gif;base64,R0lGODlhFQAKAIABALu7uwAAACH5BAEAAAEALAAAAAAVAAoAAAIjjI+ZoN0cgDwSmnpz1NCueYERhnibZVKLNnbOq8IvKpJtVQAAOw==)}.mce-visualblocks figure{background-image:url(data:image/gif;base64,R0lGODlhJAAKAIAAALu7u////yH5BAEAAAEALAAAAAAkAAoAAAI0jI+py+2fwAHUSFvD3RlvG4HIp4nX5JFSpnZUJ6LlrM52OE7uSWosBHScgkSZj7dDKnWAAgA7)}.mce-visualblocks figcaption{border:1px dashed #bbb}.mce-visualblocks hgroup{background-image:url(data:image/gif;base64,R0lGODlhJwAKAIABALu7uwAAACH5BAEAAAEALAAAAAAnAAoAAAI3jI+pywYNI3uB0gpsRtt5fFnfNZaVSYJil4Wo03Hv6Z62uOCgiXH1kZIIJ8NiIxRrAZNMZAtQAAA7)}.mce-visualblocks aside{background-image:url(data:image/gif;base64,R0lGODlhHgAKAIABAKqqqv///yH5BAEAAAEALAAAAAAeAAoAAAItjI+pG8APjZOTzgtqy7I3f1yehmQcFY4WKZbqByutmW4aHUd6vfcVbgudgpYCADs=)}.mce-visualblocks ul{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIAAALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGuYnqUVSjvw26DzzXiqIDlVwAAOw==)}.mce-visualblocks ol{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybH6HHt0qourxC6CvzXieHyeWQAAOw==)}.mce-visualblocks dl{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybEOnmOvUoWznTqeuEjNSCqeGRUAOw==)}.mce-visualblocks:not([dir=rtl]) address,.mce-visualblocks:not([dir=rtl]) article,.mce-visualblocks:not([dir=rtl]) aside,.mce-visualblocks:not([dir=rtl]) blockquote,.mce-visualblocks:not([dir=rtl]) div:not([data-mce-bogus]),.mce-visualblocks:not([dir=rtl]) dl,.mce-visualblocks:not([dir=rtl]) figcaption,.mce-visualblocks:not([dir=rtl]) figure,.mce-visualblocks:not([dir=rtl]) h1,.mce-visualblocks:not([dir=rtl]) h2,.mce-visualblocks:not([dir=rtl]) h3,.mce-visualblocks:not([dir=rtl]) h4,.mce-visualblocks:not([dir=rtl]) h5,.mce-visualblocks:not([dir=rtl]) h6,.mce-visualblocks:not([dir=rtl]) hgroup,.mce-visualblocks:not([dir=rtl]) ol,.mce-visualblocks:not([dir=rtl]) p,.mce-visualblocks:not([dir=rtl]) pre,.mce-visualblocks:not([dir=rtl]) section,.mce-visualblocks:not([dir=rtl]) ul{margin-left:3px}.mce-visualblocks[dir=rtl] address,.mce-visualblocks[dir=rtl] article,.mce-visualblocks[dir=rtl] aside,.mce-visualblocks[dir=rtl] blockquote,.mce-visualblocks[dir=rtl] div:not([data-mce-bogus]),.mce-visualblocks[dir=rtl] dl,.mce-visualblocks[dir=rtl] figcaption,.mce-visualblocks[dir=rtl] figure,.mce-visualblocks[dir=rtl] h1,.mce-visualblocks[dir=rtl] h2,.mce-visualblocks[dir=rtl] h3,.mce-visualblocks[dir=rtl] h4,.mce-visualblocks[dir=rtl] h5,.mce-visualblocks[dir=rtl] h6,.mce-visualblocks[dir=rtl] hgroup,.mce-visualblocks[dir=rtl] ol,.mce-visualblocks[dir=rtl] p,.mce-visualblocks[dir=rtl] pre,.mce-visualblocks[dir=rtl] section,.mce-visualblocks[dir=rtl] ul{background-position-x:right;margin-right:3px}.mce-nbsp,.mce-shy{background:#aaa}.mce-shy::after{content:'-'}body{font-family:sans-serif}table{border-collapse:collapse}`);tinymce.Resource.add("ui/tinymce-5-dark/content.css",`.mce-content-body .mce-item-anchor{background:transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'8'%20height%3D'12'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20d%3D'M0%200L8%200%208%2012%204.09117821%209%200%2012z'%20fill%3D%22%23cccccc%22%2F%3E%3C%2Fsvg%3E%0A") no-repeat center}.mce-content-body .mce-item-anchor:empty{cursor:default;display:inline-block;height:12px!important;padding:0 2px;-webkit-user-modify:read-only;-moz-user-modify:read-only;-webkit-user-select:all;user-select:all;width:8px!important}.mce-content-body .mce-item-anchor:not(:empty){background-position-x:2px;display:inline-block;padding-left:12px}.mce-content-body .mce-item-anchor[data-mce-selected]{outline-offset:1px}.tox-comments-visible .tox-comment[contenteditable=false]:not([data-mce-selected]),.tox-comments-visible span.tox-comment img:not([data-mce-selected]),.tox-comments-visible span.tox-comment span.mce-preview-object:not([data-mce-selected]),.tox-comments-visible span.tox-comment>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment>video:not([data-mce-selected]){outline:3px solid #4e4f3b}.tox-comments-visible .tox-comment[contenteditable=false][data-mce-annotation-active=true]:not([data-mce-selected]){outline:3px solid #ffcf30}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] img:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] span.mce-preview-object:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>video:not([data-mce-selected]){outline:3px solid #ffcf30}.tox-comments-visible span.tox-comment:not([data-mce-selected]){background-color:#4e4f3b;outline:0}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]:not([data-mce-selected=inline-boundary]){background-color:#4e4f3b}.tox-comments-visible span.tox-comment[data-mce-selected]{background-color:#4e4f3b;border-radius:3px;box-shadow:0 0 0 2px #006ce7}.tox-checklist>li:not(.tox-checklist--hidden){list-style:none;margin:.25em 0}.tox-checklist>li:not(.tox-checklist--hidden)::before{content:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-unchecked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2215%22%20height%3D%2215%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill-rule%3D%22nonzero%22%20stroke%3D%22%236d737b%22%20rx%3D%222%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A");cursor:pointer;height:1em;margin-left:-1.5em;margin-top:.125em;position:absolute;width:1em}.tox-checklist li:not(.tox-checklist--hidden).tox-checklist--checked::before{content:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-checked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%234099FF%22%20fill-rule%3D%22nonzero%22%20rx%3D%222%22%2F%3E%3Cpath%20id%3D%22Path%22%20fill%3D%22%23FFF%22%20fill-rule%3D%22nonzero%22%20d%3D%22M11.5703186%2C3.14417309%20C11.8516238%2C2.73724603%2012.4164781%2C2.62829933%2012.83558%2C2.89774797%20C13.260121%2C3.17069355%2013.3759736%2C3.72932262%2013.0909105%2C4.14168582%20L7.7580587%2C11.8560195%20C7.43776896%2C12.3193404%206.76483983%2C12.3852142%206.35607322%2C11.9948725%20L3.02491697%2C8.8138662%20C2.66090143%2C8.46625845%202.65798871%2C7.89594698%203.01850234%2C7.54483354%20C3.373942%2C7.19866177%203.94940006%2C7.19592841%204.30829608%2C7.5386474%20L6.85276923%2C9.9684299%20L11.5703186%2C3.14417309%20Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A")}[dir=rtl] .tox-checklist>li:not(.tox-checklist--hidden)::before{margin-left:0;margin-right:-1.5em}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:0 0;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#282a36}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#6272a4}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ff79c6}.token.boolean,.token.number{color:#bd93f9}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#50fa7b}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#f1fa8c}.token.keyword{color:#8be9fd}.token.important,.token.regex{color:#ffb86c}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.mce-content-body{overflow-wrap:break-word;word-wrap:break-word}.mce-content-body .mce-visual-caret{background-color:#000;background-color:currentColor;position:absolute}.mce-content-body .mce-visual-caret-hidden{display:none}.mce-content-body [data-mce-caret]{left:-1000px;margin:0;padding:0;position:absolute;right:auto;top:0}.mce-content-body .mce-offscreen-selection{left:-2000000px;max-width:1000000px;position:absolute}.mce-content-body [contentEditable=false]{cursor:default}.mce-content-body [contentEditable=true]{cursor:text}.tox-cursor-format-painter{cursor:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%0A%20%20%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M15%2C6%20C15%2C5.45%2014.55%2C5%2014%2C5%20L6%2C5%20C5.45%2C5%205%2C5.45%205%2C6%20L5%2C10%20C5%2C10.55%205.45%2C11%206%2C11%20L14%2C11%20C14.55%2C11%2015%2C10.55%2015%2C10%20L15%2C9%20L16%2C9%20L16%2C12%20L9%2C12%20L9%2C19%20C9%2C19.55%209.45%2C20%2010%2C20%20L11%2C20%20C11.55%2C20%2012%2C19.55%2012%2C19%20L12%2C14%20L18%2C14%20L18%2C7%20L15%2C7%20L15%2C6%20Z%22%2F%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M1%2C1%20L8.25%2C1%20C8.66421356%2C1%209%2C1.33578644%209%2C1.75%20L9%2C1.75%20C9%2C2.16421356%208.66421356%2C2.5%208.25%2C2.5%20L2.5%2C2.5%20L2.5%2C8.25%20C2.5%2C8.66421356%202.16421356%2C9%201.75%2C9%20L1.75%2C9%20C1.33578644%2C9%201%2C8.66421356%201%2C8.25%20L1%2C1%20Z%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A"),default}div.mce-footnotes hr{margin-inline:0 auto;width:25%}div.mce-footnotes li>a.mce-footnotes-backlink{-webkit-text-decoration:none;text-decoration:none}@media print{sup.mce-footnote a{color:#000;-webkit-text-decoration:none;text-decoration:none}div.mce-footnotes{page-break-inside:avoid;break-inside:avoid;width:100%}div.mce-footnotes li>a.mce-footnotes-backlink{display:none}}tiny-math-block{display:flex;justify-content:center;margin:16px 0 16px 0}tiny-math-inline{display:inline-block}.mce-content-body figure.align-left{float:left}.mce-content-body figure.align-right{float:right}.mce-content-body figure.image.align-center{display:table;margin-left:auto;margin-right:auto}.mce-preview-object{border:1px solid gray;display:inline-block;line-height:0;margin:0 2px;position:relative}.mce-preview-object .mce-shim{background:url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");height:100%;left:0;position:absolute;top:0;width:100%}.mce-preview-object[data-mce-selected="2"] .mce-shim{display:none}.mce-content-body .mce-mergetag{cursor:default!important;-webkit-user-select:none;user-select:none}.mce-content-body .mce-mergetag:hover{background-color:rgba(0,108,231,.3)}.mce-content-body .mce-mergetag-affix{background-color:rgba(0,108,231,.3);color:#006ce7}.mce-object{background:transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M4%203h16a1%201%200%200%201%201%201v16a1%201%200%200%201-1%201H4a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1zm1%202v14h14V5H5zm4.79%202.565l5.64%204.028a.5.5%200%200%201%200%20.814l-5.64%204.028a.5.5%200%200%201-.79-.407V7.972a.5.5%200%200%201%20.79-.407z%22%20fill%3D%22%23cccccc%22%2F%3E%3C%2Fsvg%3E%0A") no-repeat center;border:1px dashed #aaa}.mce-pagebreak{border:1px dashed #aaa;cursor:default;display:block;height:5px;margin-top:15px;page-break-before:always;width:100%}@media print{.mce-pagebreak{border:0}}.tiny-pageembed .mce-shim{background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);height:100%;left:0;position:absolute;top:0;width:100%}.tiny-pageembed[data-mce-selected="2"] .mce-shim{display:none}.tiny-pageembed{display:inline-block;position:relative}.tiny-pageembed--16by9,.tiny-pageembed--1by1,.tiny-pageembed--21by9,.tiny-pageembed--4by3{display:block;overflow:hidden;padding:0;position:relative;width:100%}.tiny-pageembed--21by9{padding-top:42.857143%}.tiny-pageembed--16by9{padding-top:56.25%}.tiny-pageembed--4by3{padding-top:75%}.tiny-pageembed--1by1{padding-top:100%}.tiny-pageembed--16by9 iframe,.tiny-pageembed--1by1 iframe,.tiny-pageembed--21by9 iframe,.tiny-pageembed--4by3 iframe{border:0;height:100%;left:0;position:absolute;top:0;width:100%}.mce-content-body[data-mce-placeholder]{position:relative}.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:rgba(34,47,62,.7);content:attr(data-mce-placeholder);position:absolute}@media (forced-colors:active){.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:highlight;filter:brightness(30%);z-index:-1}}.mce-content-body:not([dir=rtl])[data-mce-placeholder]:not(.mce-visualblocks)::before{left:1px}.mce-content-body[dir=rtl][data-mce-placeholder]:not(.mce-visualblocks)::before{right:1px}.mce-content-body div.mce-resizehandle{background-color:#4099ff;border-color:#4099ff;border-style:solid;border-width:1px;box-sizing:border-box;height:10px;position:absolute;width:10px;z-index:1298}.mce-content-body div.mce-resizehandle:hover{background-color:#4099ff}.mce-content-body div.mce-resizehandle:first-of-type{cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(2){cursor:nesw-resize}.mce-content-body div.mce-resizehandle:nth-of-type(3){cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(4){cursor:nesw-resize}.mce-content-body .mce-resize-backdrop{z-index:10000}.mce-content-body .mce-clonedresizable{cursor:default;opacity:.5;outline:1px dashed black;position:absolute;z-index:10001}.mce-content-body .mce-clonedresizable.mce-resizetable-columns td,.mce-content-body .mce-clonedresizable.mce-resizetable-columns th{border:0}.mce-content-body .mce-resize-helper{background:#555;background:rgba(0 0 0%);border:1px;border-radius:3px;color:#fff;display:none;font-family:sans-serif;font-size:12px;line-height:14px;margin:5px 10px;padding:5px;position:absolute;white-space:nowrap;z-index:10002}.tox-rtc-user-selection{position:relative}.tox-rtc-user-cursor{bottom:0;cursor:default;position:absolute;top:0;width:2px}.tox-rtc-user-cursor::before{background-color:inherit;border-radius:50%;content:'';display:block;height:8px;position:absolute;right:-3px;top:-3px;width:8px}.tox-rtc-user-cursor:hover::after{background-color:inherit;border-radius:100px;box-sizing:border-box;color:#fff;content:attr(data-user);display:block;font-size:12px;font-weight:700;left:-5px;min-height:8px;min-width:8px;padding:0 12px;position:absolute;top:-11px;white-space:nowrap;z-index:1000}.tox-rtc-user-selection--1 .tox-rtc-user-cursor{background-color:#2dc26b}.tox-rtc-user-selection--2 .tox-rtc-user-cursor{background-color:#e03e2d}.tox-rtc-user-selection--3 .tox-rtc-user-cursor{background-color:#f1c40f}.tox-rtc-user-selection--4 .tox-rtc-user-cursor{background-color:#3598db}.tox-rtc-user-selection--5 .tox-rtc-user-cursor{background-color:#b96ad9}.tox-rtc-user-selection--6 .tox-rtc-user-cursor{background-color:#e67e23}.tox-rtc-user-selection--7 .tox-rtc-user-cursor{background-color:#aaa69d}.tox-rtc-user-selection--8 .tox-rtc-user-cursor{background-color:#f368e0}.tox-rtc-remote-image{background:#eaeaea url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2236%22%20height%3D%2212%22%20viewBox%3D%220%200%2036%2012%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%3Ccircle%20cx%3D%226%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2218%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.33s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2230%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.66s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%3C%2Fsvg%3E%0A") no-repeat center center;border:1px solid #ccc;min-height:240px;min-width:320px}.mce-match-marker{background:#aaa;color:#fff}.mce-match-marker-selected{background:#39f;color:#fff}.mce-match-marker-selected::selection{background:#39f;color:#fff}.mce-content-body audio[data-mce-selected],.mce-content-body details[data-mce-selected],.mce-content-body embed[data-mce-selected],.mce-content-body img[data-mce-selected],.mce-content-body object[data-mce-selected],.mce-content-body table[data-mce-selected],.mce-content-body video[data-mce-selected]{outline:3px solid #4099ff}.mce-content-body hr[data-mce-selected]{outline:3px solid #4099ff;outline-offset:1px}.mce-content-body [contentEditable=false] [contentEditable=true]:focus{outline:3px solid #4099ff}.mce-content-body [contentEditable=false] [contentEditable=true]:hover{outline:3px solid #4099ff}.mce-content-body [contentEditable=false][data-mce-selected]{cursor:not-allowed;outline:3px solid #4099ff}.mce-content-body [data-mce-selected=inline-boundary]{background-color:#4099ff}.mce-content-body .mce-edit-focus{outline:3px solid #4099ff}.mce-content-body td[data-mce-selected],.mce-content-body th[data-mce-selected]{position:relative}.mce-content-body td[data-mce-selected]::selection,.mce-content-body th[data-mce-selected]::selection{background:0 0}.mce-content-body td[data-mce-selected] *,.mce-content-body th[data-mce-selected] *{outline:0;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{background-color:rgba(180,215,255,.7);border:1px solid transparent;bottom:-1px;content:'';left:-1px;mix-blend-mode:lighten;position:absolute;right:-1px;top:-1px}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{border-color:rgba(0,84,180,.7)}}.mce-content-body img[data-mce-selected]::selection{background:0 0}.ephox-snooker-resizer-bar{background-color:#4099ff;opacity:0;-webkit-user-select:none;user-select:none}.ephox-snooker-resizer-cols{cursor:col-resize}.ephox-snooker-resizer-rows{cursor:row-resize}.ephox-snooker-resizer-bar.ephox-snooker-resizer-bar-dragging{opacity:1}.mce-spellchecker-word{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%23ff0000'%20fill%3D'none'%20stroke-linecap%3D'round'%20stroke-opacity%3D'.75'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default;height:2rem}.mce-spellchecker-grammar{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%2300A835'%20fill%3D'none'%20stroke-linecap%3D'round'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default}.mce-toc{border:1px solid gray}.mce-toc h2{margin:4px}.mce-toc ul>li{list-style-type:none}[data-mce-block]{display:block}.mce-item-table:not([border]),.mce-item-table:not([border]) caption,.mce-item-table:not([border]) td,.mce-item-table:not([border]) th,.mce-item-table[border="0"],.mce-item-table[border="0"] caption,.mce-item-table[border="0"] td,.mce-item-table[border="0"] th,table[style*="border-width: 0px"],table[style*="border-width: 0px"] caption,table[style*="border-width: 0px"] td,table[style*="border-width: 0px"] th{border:1px dashed #bbb}.mce-visualblocks address,.mce-visualblocks article,.mce-visualblocks aside,.mce-visualblocks blockquote,.mce-visualblocks div:not([data-mce-bogus]),.mce-visualblocks dl,.mce-visualblocks figcaption,.mce-visualblocks figure,.mce-visualblocks h1,.mce-visualblocks h2,.mce-visualblocks h3,.mce-visualblocks h4,.mce-visualblocks h5,.mce-visualblocks h6,.mce-visualblocks hgroup,.mce-visualblocks ol,.mce-visualblocks p,.mce-visualblocks pre,.mce-visualblocks section,.mce-visualblocks ul{background-repeat:no-repeat;border:1px dashed #bbb;margin-left:3px;padding-top:10px}.mce-visualblocks p{background-image:url(data:image/gif;base64,R0lGODlhCQAJAJEAAAAAAP///7u7u////yH5BAEAAAMALAAAAAAJAAkAAAIQnG+CqCN/mlyvsRUpThG6AgA7)}.mce-visualblocks h1{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGu1JuxHoAfRNRW3TWXyF2YiRUAOw==)}.mce-visualblocks h2{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8Hybbx4oOuqgTynJd6bGlWg3DkJzoaUAAAOw==)}.mce-visualblocks h3{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIZjI8Hybbx4oOuqgTynJf2Ln2NOHpQpmhAAQA7)}.mce-visualblocks h4{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxInR0zqeAdhtJlXwV1oCll2HaWgAAOw==)}.mce-visualblocks h5{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjane4iq5GlW05GgIkIZUAAAOw==)}.mce-visualblocks h6{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjan04jep1iZ1XRlAo5bVgAAOw==)}.mce-visualblocks div:not([data-mce-bogus]){background-image:url(data:image/gif;base64,R0lGODlhEgAKAIABALu7u////yH5BAEAAAEALAAAAAASAAoAAAIfjI9poI0cgDywrhuxfbrzDEbQM2Ei5aRjmoySW4pAAQA7)}.mce-visualblocks section{background-image:url(data:image/gif;base64,R0lGODlhKAAKAIABALu7u////yH5BAEAAAEALAAAAAAoAAoAAAI5jI+pywcNY3sBWHdNrplytD2ellDeSVbp+GmWqaDqDMepc8t17Y4vBsK5hDyJMcI6KkuYU+jpjLoKADs=)}.mce-visualblocks article{background-image:url(data:image/gif;base64,R0lGODlhKgAKAIABALu7u////yH5BAEAAAEALAAAAAAqAAoAAAI6jI+pywkNY3wG0GBvrsd2tXGYSGnfiF7ikpXemTpOiJScasYoDJJrjsG9gkCJ0ag6KhmaIe3pjDYBBQA7)}.mce-visualblocks blockquote{background-image:url(data:image/gif;base64,R0lGODlhPgAKAIABALu7u////yH5BAEAAAEALAAAAAA+AAoAAAJPjI+py+0Knpz0xQDyuUhvfoGgIX5iSKZYgq5uNL5q69asZ8s5rrf0yZmpNkJZzFesBTu8TOlDVAabUyatguVhWduud3EyiUk45xhTTgMBBQA7)}.mce-visualblocks address{background-image:url(data:image/gif;base64,R0lGODlhLQAKAIABALu7u////yH5BAEAAAEALAAAAAAtAAoAAAI/jI+pywwNozSP1gDyyZcjb3UaRpXkWaXmZW4OqKLhBmLs+K263DkJK7OJeifh7FicKD9A1/IpGdKkyFpNmCkAADs=)}.mce-visualblocks pre{background-image:url(data:image/gif;base64,R0lGODlhFQAKAIABALu7uwAAACH5BAEAAAEALAAAAAAVAAoAAAIjjI+ZoN0cgDwSmnpz1NCueYERhnibZVKLNnbOq8IvKpJtVQAAOw==)}.mce-visualblocks figure{background-image:url(data:image/gif;base64,R0lGODlhJAAKAIAAALu7u////yH5BAEAAAEALAAAAAAkAAoAAAI0jI+py+2fwAHUSFvD3RlvG4HIp4nX5JFSpnZUJ6LlrM52OE7uSWosBHScgkSZj7dDKnWAAgA7)}.mce-visualblocks figcaption{border:1px dashed #bbb}.mce-visualblocks hgroup{background-image:url(data:image/gif;base64,R0lGODlhJwAKAIABALu7uwAAACH5BAEAAAEALAAAAAAnAAoAAAI3jI+pywYNI3uB0gpsRtt5fFnfNZaVSYJil4Wo03Hv6Z62uOCgiXH1kZIIJ8NiIxRrAZNMZAtQAAA7)}.mce-visualblocks aside{background-image:url(data:image/gif;base64,R0lGODlhHgAKAIABAKqqqv///yH5BAEAAAEALAAAAAAeAAoAAAItjI+pG8APjZOTzgtqy7I3f1yehmQcFY4WKZbqByutmW4aHUd6vfcVbgudgpYCADs=)}.mce-visualblocks ul{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIAAALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGuYnqUVSjvw26DzzXiqIDlVwAAOw==)}.mce-visualblocks ol{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybH6HHt0qourxC6CvzXieHyeWQAAOw==)}.mce-visualblocks dl{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybEOnmOvUoWznTqeuEjNSCqeGRUAOw==)}.mce-visualblocks:not([dir=rtl]) address,.mce-visualblocks:not([dir=rtl]) article,.mce-visualblocks:not([dir=rtl]) aside,.mce-visualblocks:not([dir=rtl]) blockquote,.mce-visualblocks:not([dir=rtl]) div:not([data-mce-bogus]),.mce-visualblocks:not([dir=rtl]) dl,.mce-visualblocks:not([dir=rtl]) figcaption,.mce-visualblocks:not([dir=rtl]) figure,.mce-visualblocks:not([dir=rtl]) h1,.mce-visualblocks:not([dir=rtl]) h2,.mce-visualblocks:not([dir=rtl]) h3,.mce-visualblocks:not([dir=rtl]) h4,.mce-visualblocks:not([dir=rtl]) h5,.mce-visualblocks:not([dir=rtl]) h6,.mce-visualblocks:not([dir=rtl]) hgroup,.mce-visualblocks:not([dir=rtl]) ol,.mce-visualblocks:not([dir=rtl]) p,.mce-visualblocks:not([dir=rtl]) pre,.mce-visualblocks:not([dir=rtl]) section,.mce-visualblocks:not([dir=rtl]) ul{margin-left:3px}.mce-visualblocks[dir=rtl] address,.mce-visualblocks[dir=rtl] article,.mce-visualblocks[dir=rtl] aside,.mce-visualblocks[dir=rtl] blockquote,.mce-visualblocks[dir=rtl] div:not([data-mce-bogus]),.mce-visualblocks[dir=rtl] dl,.mce-visualblocks[dir=rtl] figcaption,.mce-visualblocks[dir=rtl] figure,.mce-visualblocks[dir=rtl] h1,.mce-visualblocks[dir=rtl] h2,.mce-visualblocks[dir=rtl] h3,.mce-visualblocks[dir=rtl] h4,.mce-visualblocks[dir=rtl] h5,.mce-visualblocks[dir=rtl] h6,.mce-visualblocks[dir=rtl] hgroup,.mce-visualblocks[dir=rtl] ol,.mce-visualblocks[dir=rtl] p,.mce-visualblocks[dir=rtl] pre,.mce-visualblocks[dir=rtl] section,.mce-visualblocks[dir=rtl] ul{background-position-x:right;margin-right:3px}.mce-nbsp,.mce-shy{background:#aaa}.mce-shy::after{content:'-'}body{font-family:sans-serif}table{border-collapse:collapse}`);function TinyMCEditor(o){return jsxRuntimeExports.jsx(Editor$1,{licenseKey:"gpl",...o})}function TestTinyMCEditor(){const o=reactExports.useRef(null),e=()=>{o.current&&console.log(o.current.getContent())};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TinyMCEditor,{onInit:(s,a)=>o.current=a,initialValue:"<p>This is the initial content of the editor.</p>",init:{content_css:"tinymce-5-dark",skin:"tinymce-5-dark",height:500,menubar:!1,plugins:["advlist","anchor","autolink","help","image","link","lists","searchreplace","table","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}),jsxRuntimeExports.jsx(Button,{onClick:e,children:"Log editor content"})]})}var __rest=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const ButtonsGroup=reactExports.memo(reactExports.forwardRef((o,e)=>{const{id:s,className:a,buttonsSize:d="medium",buttonsIconPosition:b="left",inlineLayoutWhen:_="never",alignment:_e="left",buttonsEquisized:nt=!1,isReverseOrder:rt=!1,buttons:ct,style:dt}=o,pt=__rest(o,["id","className","buttonsSize","buttonsIconPosition","inlineLayoutWhen","alignment","buttonsEquisized","isReverseOrder","buttons","style"]);assert$1();const bt=useAnalyticsId({defaultIdPrefix:"fr-btns-group",explicitlyProvidedId:s}),xt=cx$1(fr.cx("fr-btns-group",d!=="medium"&&`fr-btns-group--${(()=>{switch(d){case"small":return"sm";case"large":return"lg"}})()}`,_!=="never"&&`fr-btns-group--inline${(()=>{switch(_){case"always":return"";case"sm and up":return"-sm";case"md and up":return"-md";case"lg and up":return"-lg"}})()}`,nt&&"fr-btns-group--equisized",`fr-btns-group--${_e}`,rt&&"fr-btns-group--inline-reverse",`fr-btns-group--icon-${b}`),a);return React.createElement("ul",Object.assign({id:bt,className:xt,style:dt,ref:e},pt),ct.map((wt,Tt)=>React.createElement("li",{key:Tt},React.createElement(Button,Object.assign({},wt)))))}));ButtonsGroup.displayName=symToStr({ButtonsGroup});function OrderedMap(o){this.content=o}OrderedMap.prototype={constructor:OrderedMap,find:function(o){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===o)return e;return-1},get:function(o){var e=this.find(o);return e==-1?void 0:this.content[e+1]},update:function(o,e,s){var a=s&&s!=o?this.remove(s):this,d=a.find(o),b=a.content.slice();return d==-1?b.push(s||o,e):(b[d+1]=e,s&&(b[d]=s)),new OrderedMap(b)},remove:function(o){var e=this.find(o);if(e==-1)return this;var s=this.content.slice();return s.splice(e,2),new OrderedMap(s)},addToStart:function(o,e){return new OrderedMap([o,e].concat(this.remove(o).content))},addToEnd:function(o,e){var s=this.remove(o).content.slice();return s.push(o,e),new OrderedMap(s)},addBefore:function(o,e,s){var a=this.remove(e),d=a.content.slice(),b=a.find(o);return d.splice(b==-1?d.length:b,0,e,s),new OrderedMap(d)},forEach:function(o){for(var e=0;e<this.content.length;e+=2)o(this.content[e],this.content[e+1])},prepend:function(o){return o=OrderedMap.from(o),o.size?new OrderedMap(o.content.concat(this.subtract(o).content)):this},append:function(o){return o=OrderedMap.from(o),o.size?new OrderedMap(this.subtract(o).content.concat(o.content)):this},subtract:function(o){var e=this;o=OrderedMap.from(o);for(var s=0;s<o.content.length;s+=2)e=e.remove(o.content[s]);return e},toObject:function(){var o={};return this.forEach(function(e,s){o[e]=s}),o},get size(){return this.content.length>>1}};OrderedMap.from=function(o){if(o instanceof OrderedMap)return o;var e=[];if(o)for(var s in o)e.push(s,o[s]);return new OrderedMap(e)};function findDiffStart(o,e,s){for(let a=0;;a++){if(a==o.childCount||a==e.childCount)return o.childCount==e.childCount?null:s;let d=o.child(a),b=e.child(a);if(d==b){s+=d.nodeSize;continue}if(!d.sameMarkup(b))return s;if(d.isText&&d.text!=b.text){for(let _=0;d.text[_]==b.text[_];_++)s++;return s}if(d.content.size||b.content.size){let _=findDiffStart(d.content,b.content,s+1);if(_!=null)return _}s+=d.nodeSize}}function findDiffEnd(o,e,s,a){for(let d=o.childCount,b=e.childCount;;){if(d==0||b==0)return d==b?null:{a:s,b:a};let _=o.child(--d),_e=e.child(--b),nt=_.nodeSize;if(_==_e){s-=nt,a-=nt;continue}if(!_.sameMarkup(_e))return{a:s,b:a};if(_.isText&&_.text!=_e.text){let rt=0,ct=Math.min(_.text.length,_e.text.length);for(;rt<ct&&_.text[_.text.length-rt-1]==_e.text[_e.text.length-rt-1];)rt++,s--,a--;return{a:s,b:a}}if(_.content.size||_e.content.size){let rt=findDiffEnd(_.content,_e.content,s-1,a-1);if(rt)return rt}s-=nt,a-=nt}}class Fragment{constructor(e,s){if(this.content=e,this.size=s||0,s==null)for(let a=0;a<e.length;a++)this.size+=e[a].nodeSize}nodesBetween(e,s,a,d=0,b){for(let _=0,_e=0;_e<s;_++){let nt=this.content[_],rt=_e+nt.nodeSize;if(rt>e&&a(nt,d+_e,b||null,_)!==!1&&nt.content.size){let ct=_e+1;nt.nodesBetween(Math.max(0,e-ct),Math.min(nt.content.size,s-ct),a,d+ct)}_e=rt}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,s,a,d){let b="",_=!0;return this.nodesBetween(e,s,(_e,nt)=>{let rt=_e.isText?_e.text.slice(Math.max(e,nt)-nt,s-nt):_e.isLeaf?d?typeof d=="function"?d(_e):d:_e.type.spec.leafText?_e.type.spec.leafText(_e):"":"";_e.isBlock&&(_e.isLeaf&&rt||_e.isTextblock)&&a&&(_?_=!1:b+=a),b+=rt},0),b}append(e){if(!e.size)return this;if(!this.size)return e;let s=this.lastChild,a=e.firstChild,d=this.content.slice(),b=0;for(s.isText&&s.sameMarkup(a)&&(d[d.length-1]=s.withText(s.text+a.text),b=1);b<e.content.length;b++)d.push(e.content[b]);return new Fragment(d,this.size+e.size)}cut(e,s=this.size){if(e==0&&s==this.size)return this;let a=[],d=0;if(s>e)for(let b=0,_=0;_<s;b++){let _e=this.content[b],nt=_+_e.nodeSize;nt>e&&((_<e||nt>s)&&(_e.isText?_e=_e.cut(Math.max(0,e-_),Math.min(_e.text.length,s-_)):_e=_e.cut(Math.max(0,e-_-1),Math.min(_e.content.size,s-_-1))),a.push(_e),d+=_e.nodeSize),_=nt}return new Fragment(a,d)}cutByIndex(e,s){return e==s?Fragment.empty:e==0&&s==this.content.length?this:new Fragment(this.content.slice(e,s))}replaceChild(e,s){let a=this.content[e];if(a==s)return this;let d=this.content.slice(),b=this.size+s.nodeSize-a.nodeSize;return d[e]=s,new Fragment(d,b)}addToStart(e){return new Fragment([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Fragment(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let s=0;s<this.content.length;s++)if(!this.content[s].eq(e.content[s]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let s=this.content[e];if(!s)throw new RangeError("Index "+e+" out of range for "+this);return s}maybeChild(e){return this.content[e]||null}forEach(e){for(let s=0,a=0;s<this.content.length;s++){let d=this.content[s];e(d,a,s),a+=d.nodeSize}}findDiffStart(e,s=0){return findDiffStart(this,e,s)}findDiffEnd(e,s=this.size,a=e.size){return findDiffEnd(this,e,s,a)}findIndex(e,s=-1){if(e==0)return retIndex(0,e);if(e==this.size)return retIndex(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let a=0,d=0;;a++){let b=this.child(a),_=d+b.nodeSize;if(_>=e)return _==e||s>0?retIndex(a+1,_):retIndex(a,d);d=_}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,s){if(!s)return Fragment.empty;if(!Array.isArray(s))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(s.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Fragment.empty;let s,a=0;for(let d=0;d<e.length;d++){let b=e[d];a+=b.nodeSize,d&&b.isText&&e[d-1].sameMarkup(b)?(s||(s=e.slice(0,d)),s[s.length-1]=b.withText(s[s.length-1].text+b.text)):s&&s.push(b)}return new Fragment(s||e,a)}static from(e){if(!e)return Fragment.empty;if(e instanceof Fragment)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Fragment([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(o,e){return found.index=o,found.offset=e,found}function compareDeep(o,e){if(o===e)return!0;if(!(o&&typeof o=="object")||!(e&&typeof e=="object"))return!1;let s=Array.isArray(o);if(Array.isArray(e)!=s)return!1;if(s){if(o.length!=e.length)return!1;for(let a=0;a<o.length;a++)if(!compareDeep(o[a],e[a]))return!1}else{for(let a in o)if(!(a in e)||!compareDeep(o[a],e[a]))return!1;for(let a in e)if(!(a in o))return!1}return!0}let Mark$1=class aie{constructor(e,s){this.type=e,this.attrs=s}addToSet(e){let s,a=!1;for(let d=0;d<e.length;d++){let b=e[d];if(this.eq(b))return e;if(this.type.excludes(b.type))s||(s=e.slice(0,d));else{if(b.type.excludes(this.type))return e;!a&&b.type.rank>this.type.rank&&(s||(s=e.slice(0,d)),s.push(this),a=!0),s&&s.push(b)}}return s||(s=e.slice()),a||s.push(this),s}removeFromSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return e.slice(0,s).concat(e.slice(s+1));return e}isInSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return!0;return!1}eq(e){return this==e||this.type==e.type&&compareDeep(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let s in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,s){if(!s)throw new RangeError("Invalid input for Mark.fromJSON");let a=e.marks[s.type];if(!a)throw new RangeError(`There is no mark type ${s.type} in this schema`);let d=a.create(s.attrs);return a.checkAttrs(d.attrs),d}static sameSet(e,s){if(e==s)return!0;if(e.length!=s.length)return!1;for(let a=0;a<e.length;a++)if(!e[a].eq(s[a]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return aie.none;if(e instanceof aie)return[e];let s=e.slice();return s.sort((a,d)=>a.type.rank-d.type.rank),s}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(e,s,a){this.content=e,this.openStart=s,this.openEnd=a}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,s){let a=insertInto(this.content,e+this.openStart,s);return a&&new Slice(a,this.openStart,this.openEnd)}removeBetween(e,s){return new Slice(removeRange(this.content,e+this.openStart,s+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,s){if(!s)return Slice.empty;let a=s.openStart||0,d=s.openEnd||0;if(typeof a!="number"||typeof d!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(e,s.content),a,d)}static maxOpen(e,s=!0){let a=0,d=0;for(let b=e.firstChild;b&&!b.isLeaf&&(s||!b.type.spec.isolating);b=b.firstChild)a++;for(let b=e.lastChild;b&&!b.isLeaf&&(s||!b.type.spec.isolating);b=b.lastChild)d++;return new Slice(e,a,d)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(o,e,s){let{index:a,offset:d}=o.findIndex(e),b=o.maybeChild(a),{index:_,offset:_e}=o.findIndex(s);if(d==e||b.isText){if(_e!=s&&!o.child(_).isText)throw new RangeError("Removing non-flat range");return o.cut(0,e).append(o.cut(s))}if(a!=_)throw new RangeError("Removing non-flat range");return o.replaceChild(a,b.copy(removeRange(b.content,e-d-1,s-d-1)))}function insertInto(o,e,s,a){let{index:d,offset:b}=o.findIndex(e),_=o.maybeChild(d);if(b==e||_.isText)return o.cut(0,e).append(s).append(o.cut(e));let _e=insertInto(_.content,e-b-1,s);return _e&&o.replaceChild(d,_.copy(_e))}function replace(o,e,s){if(s.openStart>o.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(o.depth-s.openStart!=e.depth-s.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(o,e,s,0)}function replaceOuter(o,e,s,a){let d=o.index(a),b=o.node(a);if(d==e.index(a)&&a<o.depth-s.openStart){let _=replaceOuter(o,e,s,a+1);return b.copy(b.content.replaceChild(d,_))}else if(s.content.size)if(!s.openStart&&!s.openEnd&&o.depth==a&&e.depth==a){let _=o.parent,_e=_.content;return close(_,_e.cut(0,o.parentOffset).append(s.content).append(_e.cut(e.parentOffset)))}else{let{start:_,end:_e}=prepareSliceForReplace(s,o);return close(b,replaceThreeWay(o,_,_e,e,a))}else return close(b,replaceTwoWay(o,e,a))}function checkJoin(o,e){if(!e.type.compatibleContent(o.type))throw new ReplaceError("Cannot join "+e.type.name+" onto "+o.type.name)}function joinable$1(o,e,s){let a=o.node(s);return checkJoin(a,e.node(s)),a}function addNode(o,e){let s=e.length-1;s>=0&&o.isText&&o.sameMarkup(e[s])?e[s]=o.withText(e[s].text+o.text):e.push(o)}function addRange(o,e,s,a){let d=(e||o).node(s),b=0,_=e?e.index(s):d.childCount;o&&(b=o.index(s),o.depth>s?b++:o.textOffset&&(addNode(o.nodeAfter,a),b++));for(let _e=b;_e<_;_e++)addNode(d.child(_e),a);e&&e.depth==s&&e.textOffset&&addNode(e.nodeBefore,a)}function close(o,e){return o.type.checkContent(e),o.copy(e)}function replaceThreeWay(o,e,s,a,d){let b=o.depth>d&&joinable$1(o,e,d+1),_=a.depth>d&&joinable$1(s,a,d+1),_e=[];return addRange(null,o,d,_e),b&&_&&e.index(d)==s.index(d)?(checkJoin(b,_),addNode(close(b,replaceThreeWay(o,e,s,a,d+1)),_e)):(b&&addNode(close(b,replaceTwoWay(o,e,d+1)),_e),addRange(e,s,d,_e),_&&addNode(close(_,replaceTwoWay(s,a,d+1)),_e)),addRange(a,null,d,_e),new Fragment(_e)}function replaceTwoWay(o,e,s){let a=[];if(addRange(null,o,s,a),o.depth>s){let d=joinable$1(o,e,s+1);addNode(close(d,replaceTwoWay(o,e,s+1)),a)}return addRange(e,null,s,a),new Fragment(a)}function prepareSliceForReplace(o,e){let s=e.depth-o.openStart,d=e.node(s).copy(o.content);for(let b=s-1;b>=0;b--)d=e.node(b).copy(Fragment.from(d));return{start:d.resolveNoCache(o.openStart+s),end:d.resolveNoCache(d.content.size-o.openEnd-s)}}class ResolvedPos{constructor(e,s,a){this.pos=e,this.path=s,this.parentOffset=a,this.depth=s.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,s=this.index(this.depth);if(s==e.childCount)return null;let a=this.pos-this.path[this.path.length-1],d=e.child(s);return a?e.child(s).cut(a):d}get nodeBefore(){let e=this.index(this.depth),s=this.pos-this.path[this.path.length-1];return s?this.parent.child(e).cut(0,s):e==0?null:this.parent.child(e-1)}posAtIndex(e,s){s=this.resolveDepth(s);let a=this.path[s*3],d=s==0?0:this.path[s*3-1]+1;for(let b=0;b<e;b++)d+=a.child(b).nodeSize;return d}marks(){let e=this.parent,s=this.index();if(e.content.size==0)return Mark$1.none;if(this.textOffset)return e.child(s).marks;let a=e.maybeChild(s-1),d=e.maybeChild(s);if(!a){let _e=a;a=d,d=_e}let b=a.marks;for(var _=0;_<b.length;_++)b[_].type.spec.inclusive===!1&&(!d||!b[_].isInSet(d.marks))&&(b=b[_--].removeFromSet(b));return b}marksAcross(e){let s=this.parent.maybeChild(this.index());if(!s||!s.isInline)return null;let a=s.marks,d=e.parent.maybeChild(e.index());for(var b=0;b<a.length;b++)a[b].type.spec.inclusive===!1&&(!d||!a[b].isInSet(d.marks))&&(a=a[b--].removeFromSet(a));return a}sharedDepth(e){for(let s=this.depth;s>0;s--)if(this.start(s)<=e&&this.end(s)>=e)return s;return 0}blockRange(e=this,s){if(e.pos<this.pos)return e.blockRange(this);for(let a=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);a>=0;a--)if(e.pos<=this.end(a)&&(!s||s(this.node(a))))return new NodeRange(this,e,a);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let s=1;s<=this.depth;s++)e+=(e?"/":"")+this.node(s).type.name+"_"+this.index(s-1);return e+":"+this.parentOffset}static resolve(e,s){if(!(s>=0&&s<=e.content.size))throw new RangeError("Position "+s+" out of range");let a=[],d=0,b=s;for(let _=e;;){let{index:_e,offset:nt}=_.content.findIndex(b),rt=b-nt;if(a.push(_,_e,d+nt),!rt||(_=_.child(_e),_.isText))break;b=rt-1,d+=nt+1}return new ResolvedPos(s,a,b)}static resolveCached(e,s){let a=resolveCache.get(e);if(a)for(let b=0;b<a.elts.length;b++){let _=a.elts[b];if(_.pos==s)return _}else resolveCache.set(e,a=new ResolveCache);let d=a.elts[a.i]=ResolvedPos.resolve(e,s);return a.i=(a.i+1)%resolveCacheSize,d}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(e,s,a){this.$from=e,this.$to=s,this.depth=a}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$2=class lie{constructor(e,s,a,d=Mark$1.none){this.type=e,this.attrs=s,this.marks=d,this.content=a||Fragment.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,s,a,d=0){this.content.nodesBetween(e,s,a,d,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,s,a,d){return this.content.textBetween(e,s,a,d)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,s,a){return this.type==e&&compareDeep(this.attrs,s||e.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,a||Mark$1.none)}copy(e=null){return e==this.content?this:new lie(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new lie(this.type,this.attrs,this.content,e)}cut(e,s=this.content.size){return e==0&&s==this.content.size?this:this.copy(this.content.cut(e,s))}slice(e,s=this.content.size,a=!1){if(e==s)return Slice.empty;let d=this.resolve(e),b=this.resolve(s),_=a?0:d.sharedDepth(s),_e=d.start(_),rt=d.node(_).content.cut(d.pos-_e,b.pos-_e);return new Slice(rt,d.depth-_,b.depth-_)}replace(e,s,a){return replace(this.resolve(e),this.resolve(s),a)}nodeAt(e){for(let s=this;;){let{index:a,offset:d}=s.content.findIndex(e);if(s=s.maybeChild(a),!s)return null;if(d==e||s.isText)return s;e-=d+1}}childAfter(e){let{index:s,offset:a}=this.content.findIndex(e);return{node:this.content.maybeChild(s),index:s,offset:a}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:s,offset:a}=this.content.findIndex(e);if(a<e)return{node:this.content.child(s),index:s,offset:a};let d=this.content.child(s-1);return{node:d,index:s-1,offset:a-d.nodeSize}}resolve(e){return ResolvedPos.resolveCached(this,e)}resolveNoCache(e){return ResolvedPos.resolve(this,e)}rangeHasMark(e,s,a){let d=!1;return s>e&&this.nodesBetween(e,s,b=>(a.isInSet(b.marks)&&(d=!0),!d)),d}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,e)}contentMatchAt(e){let s=this.type.contentMatch.matchFragment(this.content,0,e);if(!s)throw new Error("Called contentMatchAt on a node with invalid content");return s}canReplace(e,s,a=Fragment.empty,d=0,b=a.childCount){let _=this.contentMatchAt(e).matchFragment(a,d,b),_e=_&&_.matchFragment(this.content,s);if(!_e||!_e.validEnd)return!1;for(let nt=d;nt<b;nt++)if(!this.type.allowsMarks(a.child(nt).marks))return!1;return!0}canReplaceWith(e,s,a,d){if(d&&!this.type.allowsMarks(d))return!1;let b=this.contentMatchAt(e).matchType(a),_=b&&b.matchFragment(this.content,s);return _?_.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Mark$1.none;for(let s=0;s<this.marks.length;s++){let a=this.marks[s];a.type.checkAttrs(a.attrs),e=a.addToSet(e)}if(!Mark$1.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(s=>s.type.name)}`);this.content.forEach(s=>s.check())}toJSON(){let e={type:this.type.name};for(let s in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(s=>s.toJSON())),e}static fromJSON(e,s){if(!s)throw new RangeError("Invalid input for Node.fromJSON");let a;if(s.marks){if(!Array.isArray(s.marks))throw new RangeError("Invalid mark data for Node.fromJSON");a=s.marks.map(e.markFromJSON)}if(s.type=="text"){if(typeof s.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(s.text,a)}let d=Fragment.fromJSON(e,s.content),b=e.nodeType(s.type).create(s.attrs,d,a);return b.type.checkAttrs(b.attrs),b}};Node$2.prototype.text=void 0;class TextNode extends Node$2{constructor(e,s,a,d){if(super(e,s,null,d),!a)throw new RangeError("Empty text nodes are not allowed");this.text=a}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,s){return this.text.slice(e,s)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new TextNode(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new TextNode(this.type,this.attrs,e,this.marks)}cut(e=0,s=this.text.length){return e==0&&s==this.text.length?this:this.withText(this.text.slice(e,s))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function wrapMarks(o,e){for(let s=o.length-1;s>=0;s--)e=o[s].type.name+"("+e+")";return e}class ContentMatch{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,s){let a=new TokenStream(e,s);if(a.next==null)return ContentMatch.empty;let d=parseExpr(a);a.next&&a.err("Unexpected trailing text");let b=dfa(nfa(d));return checkForDeadEnds(b,a),b}matchType(e){for(let s=0;s<this.next.length;s++)if(this.next[s].type==e)return this.next[s].next;return null}matchFragment(e,s=0,a=e.childCount){let d=this;for(let b=s;d&&b<a;b++)d=d.matchType(e.child(b).type);return d}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:s}=this.next[e];if(!(s.isText||s.hasRequiredAttrs()))return s}return null}compatible(e){for(let s=0;s<this.next.length;s++)for(let a=0;a<e.next.length;a++)if(this.next[s].type==e.next[a].type)return!0;return!1}fillBefore(e,s=!1,a=0){let d=[this];function b(_,_e){let nt=_.matchFragment(e,a);if(nt&&(!s||nt.validEnd))return Fragment.from(_e.map(rt=>rt.createAndFill()));for(let rt=0;rt<_.next.length;rt++){let{type:ct,next:dt}=_.next[rt];if(!(ct.isText||ct.hasRequiredAttrs())&&d.indexOf(dt)==-1){d.push(dt);let pt=b(dt,_e.concat(ct));if(pt)return pt}}return null}return b(this,[])}findWrapping(e){for(let a=0;a<this.wrapCache.length;a+=2)if(this.wrapCache[a]==e)return this.wrapCache[a+1];let s=this.computeWrapping(e);return this.wrapCache.push(e,s),s}computeWrapping(e){let s=Object.create(null),a=[{match:this,type:null,via:null}];for(;a.length;){let d=a.shift(),b=d.match;if(b.matchType(e)){let _=[];for(let _e=d;_e.type;_e=_e.via)_.push(_e.type);return _.reverse()}for(let _=0;_<b.next.length;_++){let{type:_e,next:nt}=b.next[_];!_e.isLeaf&&!_e.hasRequiredAttrs()&&!(_e.name in s)&&(!d.type||nt.validEnd)&&(a.push({match:_e.contentMatch,type:_e,via:d}),s[_e.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function s(a){e.push(a);for(let d=0;d<a.next.length;d++)e.indexOf(a.next[d].next)==-1&&s(a.next[d].next)}return s(this),e.map((a,d)=>{let b=d+(a.validEnd?"*":" ")+" ";for(let _=0;_<a.next.length;_++)b+=(_?", ":"")+a.next[_].type.name+"->"+e.indexOf(a.next[_].next);return b}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(e,s){this.string=e,this.nodeTypes=s,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function parseExpr(o){let e=[];do e.push(parseExprSeq(o));while(o.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function parseExprSeq(o){let e=[];do e.push(parseExprSubscript(o));while(o.next&&o.next!=")"&&o.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function parseExprSubscript(o){let e=parseExprAtom(o);for(;;)if(o.eat("+"))e={type:"plus",expr:e};else if(o.eat("*"))e={type:"star",expr:e};else if(o.eat("?"))e={type:"opt",expr:e};else if(o.eat("{"))e=parseExprRange(o,e);else break;return e}function parseNum(o){/\D/.test(o.next)&&o.err("Expected number, got '"+o.next+"'");let e=Number(o.next);return o.pos++,e}function parseExprRange(o,e){let s=parseNum(o),a=s;return o.eat(",")&&(o.next!="}"?a=parseNum(o):a=-1),o.eat("}")||o.err("Unclosed braced range"),{type:"range",min:s,max:a,expr:e}}function resolveName(o,e){let s=o.nodeTypes,a=s[e];if(a)return[a];let d=[];for(let b in s){let _=s[b];_.isInGroup(e)&&d.push(_)}return d.length==0&&o.err("No node type or group '"+e+"' found"),d}function parseExprAtom(o){if(o.eat("(")){let e=parseExpr(o);return o.eat(")")||o.err("Missing closing paren"),e}else if(/\W/.test(o.next))o.err("Unexpected token '"+o.next+"'");else{let e=resolveName(o,o.next).map(s=>(o.inline==null?o.inline=s.isInline:o.inline!=s.isInline&&o.err("Mixing inline and block content"),{type:"name",value:s}));return o.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function nfa(o){let e=[[]];return d(b(o,0),s()),e;function s(){return e.push([])-1}function a(_,_e,nt){let rt={term:nt,to:_e};return e[_].push(rt),rt}function d(_,_e){_.forEach(nt=>nt.to=_e)}function b(_,_e){if(_.type=="choice")return _.exprs.reduce((nt,rt)=>nt.concat(b(rt,_e)),[]);if(_.type=="seq")for(let nt=0;;nt++){let rt=b(_.exprs[nt],_e);if(nt==_.exprs.length-1)return rt;d(rt,_e=s())}else if(_.type=="star"){let nt=s();return a(_e,nt),d(b(_.expr,nt),nt),[a(nt)]}else if(_.type=="plus"){let nt=s();return d(b(_.expr,_e),nt),d(b(_.expr,nt),nt),[a(nt)]}else{if(_.type=="opt")return[a(_e)].concat(b(_.expr,_e));if(_.type=="range"){let nt=_e;for(let rt=0;rt<_.min;rt++){let ct=s();d(b(_.expr,nt),ct),nt=ct}if(_.max==-1)d(b(_.expr,nt),nt);else for(let rt=_.min;rt<_.max;rt++){let ct=s();a(nt,ct),d(b(_.expr,nt),ct),nt=ct}return[a(nt)]}else{if(_.type=="name")return[a(_e,void 0,_.value)];throw new Error("Unknown expr type")}}}}function cmp(o,e){return e-o}function nullFrom(o,e){let s=[];return a(e),s.sort(cmp);function a(d){let b=o[d];if(b.length==1&&!b[0].term)return a(b[0].to);s.push(d);for(let _=0;_<b.length;_++){let{term:_e,to:nt}=b[_];!_e&&s.indexOf(nt)==-1&&a(nt)}}}function dfa(o){let e=Object.create(null);return s(nullFrom(o,0));function s(a){let d=[];a.forEach(_=>{o[_].forEach(({term:_e,to:nt})=>{if(!_e)return;let rt;for(let ct=0;ct<d.length;ct++)d[ct][0]==_e&&(rt=d[ct][1]);nullFrom(o,nt).forEach(ct=>{rt||d.push([_e,rt=[]]),rt.indexOf(ct)==-1&&rt.push(ct)})})});let b=e[a.join(",")]=new ContentMatch(a.indexOf(o.length-1)>-1);for(let _=0;_<d.length;_++){let _e=d[_][1].sort(cmp);b.next.push({type:d[_][0],next:e[_e.join(",")]||s(_e)})}return b}}function checkForDeadEnds(o,e){for(let s=0,a=[o];s<a.length;s++){let d=a[s],b=!d.validEnd,_=[];for(let _e=0;_e<d.next.length;_e++){let{type:nt,next:rt}=d.next[_e];_.push(nt.name),b&&!(nt.isText||nt.hasRequiredAttrs())&&(b=!1),a.indexOf(rt)==-1&&a.push(rt)}b&&e.err("Only non-generatable nodes ("+_.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(o){let e=Object.create(null);for(let s in o){let a=o[s];if(!a.hasDefault)return null;e[s]=a.default}return e}function computeAttrs(o,e){let s=Object.create(null);for(let a in o){let d=e&&e[a];if(d===void 0){let b=o[a];if(b.hasDefault)d=b.default;else throw new RangeError("No value supplied for attribute "+a)}s[a]=d}return s}function checkAttrs(o,e,s,a){for(let d in e)if(!(d in o))throw new RangeError(`Unsupported attribute ${d} for ${s} of type ${d}`);for(let d in o){let b=o[d];b.validate&&b.validate(e[d])}}function initAttrs(o,e){let s=Object.create(null);if(e)for(let a in e)s[a]=new Attribute(o,a,e[a]);return s}let NodeType$1=class sle{constructor(e,s,a){this.name=e,this.schema=s,this.spec=a,this.markSet=null,this.groups=a.group?a.group.split(" "):[],this.attrs=initAttrs(e,a.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(a.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,e)}create(e=null,s,a){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$2(this,this.computeAttrs(e),Fragment.from(s),Mark$1.setFrom(a))}createChecked(e=null,s,a){return s=Fragment.from(s),this.checkContent(s),new Node$2(this,this.computeAttrs(e),s,Mark$1.setFrom(a))}createAndFill(e=null,s,a){if(e=this.computeAttrs(e),s=Fragment.from(s),s.size){let _=this.contentMatch.fillBefore(s);if(!_)return null;s=_.append(s)}let d=this.contentMatch.matchFragment(s),b=d&&d.fillBefore(Fragment.empty,!0);return b?new Node$2(this,e,s.append(b),Mark$1.setFrom(a)):null}validContent(e){let s=this.contentMatch.matchFragment(e);if(!s||!s.validEnd)return!1;for(let a=0;a<e.childCount;a++)if(!this.allowsMarks(e.child(a).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){checkAttrs(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let s=0;s<e.length;s++)if(!this.allowsMarkType(e[s].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let s;for(let a=0;a<e.length;a++)this.allowsMarkType(e[a].type)?s&&s.push(e[a]):s||(s=e.slice(0,a));return s?s.length?s:Mark$1.none:e}static compile(e,s){let a=Object.create(null);e.forEach((b,_)=>a[b]=new sle(b,s,_));let d=s.spec.topNode||"doc";if(!a[d])throw new RangeError("Schema is missing its top node type ('"+d+"')");if(!a.text)throw new RangeError("Every schema needs a 'text' type");for(let b in a.text.attrs)throw new RangeError("The text node type should not have attributes");return a}};function validateType(o,e,s){let a=s.split("|");return d=>{let b=d===null?"null":typeof d;if(a.indexOf(b)<0)throw new RangeError(`Expected value of type ${a} for attribute ${e} on type ${o}, got ${b}`)}}class Attribute{constructor(e,s,a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default,this.validate=typeof a.validate=="string"?validateType(e,s,a.validate):a.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(e,s,a,d){this.name=e,this.rank=s,this.schema=a,this.spec=d,this.attrs=initAttrs(e,d.attrs),this.excluded=null;let b=defaultAttrs(this.attrs);this.instance=b?new Mark$1(this,b):null}create(e=null){return!e&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,e))}static compile(e,s){let a=Object.create(null),d=0;return e.forEach((b,_)=>a[b]=new MarkType(b,d++,s,_)),a}removeFromSet(e){for(var s=0;s<e.length;s++)e[s].type==this&&(e=e.slice(0,s).concat(e.slice(s+1)),s--);return e}isInSet(e){for(let s=0;s<e.length;s++)if(e[s].type==this)return e[s]}checkAttrs(e){checkAttrs(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Schema{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let s=this.spec={};for(let d in e)s[d]=e[d];s.nodes=OrderedMap.from(e.nodes),s.marks=OrderedMap.from(e.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let a=Object.create(null);for(let d in this.nodes){if(d in this.marks)throw new RangeError(d+" can not be both a node and a mark");let b=this.nodes[d],_=b.spec.content||"",_e=b.spec.marks;if(b.contentMatch=a[_]||(a[_]=ContentMatch.parse(_,this.nodes)),b.inlineContent=b.contentMatch.inlineContent,b.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!b.isInline||!b.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=b}b.markSet=_e=="_"?null:_e?gatherMarks(this,_e.split(" ")):_e==""||!b.inlineContent?[]:null}for(let d in this.marks){let b=this.marks[d],_=b.spec.excludes;b.excluded=_==null?[b]:_==""?[]:gatherMarks(this,_.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,s=null,a,d){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof NodeType$1){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(s,a,d)}text(e,s){let a=this.nodes.text;return new TextNode(a,a.defaultAttrs,e,Mark$1.setFrom(s))}mark(e,s){return typeof e=="string"&&(e=this.marks[e]),e.create(s)}nodeFromJSON(e){return Node$2.fromJSON(this,e)}markFromJSON(e){return Mark$1.fromJSON(this,e)}nodeType(e){let s=this.nodes[e];if(!s)throw new RangeError("Unknown node type: "+e);return s}}function gatherMarks(o,e){let s=[];for(let a=0;a<e.length;a++){let d=e[a],b=o.marks[d],_=b;if(b)s.push(b);else for(let _e in o.marks){let nt=o.marks[_e];(d=="_"||nt.spec.group&&nt.spec.group.split(" ").indexOf(d)>-1)&&s.push(_=nt)}if(!_)throw new SyntaxError("Unknown mark type: '"+e[a]+"'")}return s}function isTagRule(o){return o.tag!=null}function isStyleRule(o){return o.style!=null}let DOMParser$1=class cie{constructor(e,s){this.schema=e,this.rules=s,this.tags=[],this.styles=[];let a=this.matchedStyles=[];s.forEach(d=>{if(isTagRule(d))this.tags.push(d);else if(isStyleRule(d)){let b=/[^=]*/.exec(d.style)[0];a.indexOf(b)<0&&a.push(b),this.styles.push(d)}}),this.normalizeLists=!this.tags.some(d=>{if(!/^(ul|ol)\b/.test(d.tag)||!d.node)return!1;let b=e.nodes[d.node];return b.contentMatch.matchType(b)})}parse(e,s={}){let a=new ParseContext(this,s,!1);return a.addAll(e,Mark$1.none,s.from,s.to),a.finish()}parseSlice(e,s={}){let a=new ParseContext(this,s,!0);return a.addAll(e,Mark$1.none,s.from,s.to),Slice.maxOpen(a.finish())}matchTag(e,s,a){for(let d=a?this.tags.indexOf(a)+1:0;d<this.tags.length;d++){let b=this.tags[d];if(matches(e,b.tag)&&(b.namespace===void 0||e.namespaceURI==b.namespace)&&(!b.context||s.matchesContext(b.context))){if(b.getAttrs){let _=b.getAttrs(e);if(_===!1)continue;b.attrs=_||void 0}return b}}}matchStyle(e,s,a,d){for(let b=d?this.styles.indexOf(d)+1:0;b<this.styles.length;b++){let _=this.styles[b],_e=_.style;if(!(_e.indexOf(e)!=0||_.context&&!a.matchesContext(_.context)||_e.length>e.length&&(_e.charCodeAt(e.length)!=61||_e.slice(e.length+1)!=s))){if(_.getAttrs){let nt=_.getAttrs(s);if(nt===!1)continue;_.attrs=nt||void 0}return _}}}static schemaRules(e){let s=[];function a(d){let b=d.priority==null?50:d.priority,_=0;for(;_<s.length;_++){let _e=s[_];if((_e.priority==null?50:_e.priority)<b)break}s.splice(_,0,d)}for(let d in e.marks){let b=e.marks[d].spec.parseDOM;b&&b.forEach(_=>{a(_=copy(_)),_.mark||_.ignore||_.clearMark||(_.mark=d)})}for(let d in e.nodes){let b=e.nodes[d].spec.parseDOM;b&&b.forEach(_=>{a(_=copy(_)),_.node||_.ignore||_.mark||(_.node=d)})}return s}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new cie(e,cie.schemaRules(e)))}};const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(o,e,s){return e!=null?(e?OPT_PRESERVE_WS:0)|(e==="full"?OPT_PRESERVE_WS_FULL:0):o&&o.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:s&~OPT_OPEN_LEFT}class NodeContext{constructor(e,s,a,d,b,_){this.type=e,this.attrs=s,this.marks=a,this.solid=d,this.options=_,this.content=[],this.activeMarks=Mark$1.none,this.match=b||(_&OPT_OPEN_LEFT?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let s=this.type.contentMatch.fillBefore(Fragment.from(e));if(s)this.match=this.type.contentMatch.matchFragment(s);else{let a=this.type.contentMatch,d;return(d=a.findWrapping(e.type))?(this.match=a,d):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&OPT_PRESERVE_WS)){let a=this.content[this.content.length-1],d;if(a&&a.isText&&(d=/[ \t\r\n\u000c]+$/.exec(a.text))){let b=a;a.text.length==d[0].length?this.content.pop():this.content[this.content.length-1]=b.withText(b.text.slice(0,b.text.length-d[0].length))}}let s=Fragment.from(this.content);return!e&&this.match&&(s=s.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,s,this.marks):s}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!blockTags.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(e,s,a){this.parser=e,this.options=s,this.isOpen=a,this.open=0;let d=s.topNode,b,_=wsOptionsFor(null,s.preserveWhitespace,0)|(a?OPT_OPEN_LEFT:0);d?b=new NodeContext(d.type,d.attrs,Mark$1.none,!0,s.topMatch||d.type.contentMatch,_):a?b=new NodeContext(null,null,Mark$1.none,!0,null,_):b=new NodeContext(e.schema.topNodeType,null,Mark$1.none,!0,null,_),this.nodes=[b],this.find=s.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,s){e.nodeType==3?this.addTextNode(e,s):e.nodeType==1&&this.addElement(e,s)}addTextNode(e,s){let a=e.nodeValue,d=this.top;if(d.options&OPT_PRESERVE_WS_FULL||d.inlineContext(e)||/[^ \t\r\n\u000c]/.test(a)){if(d.options&OPT_PRESERVE_WS)d.options&OPT_PRESERVE_WS_FULL?a=a.replace(/\r\n?/g,`
`):a=a.replace(/\r?\n|\r/g," ");else if(a=a.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(a)&&this.open==this.nodes.length-1){let b=d.content[d.content.length-1],_=e.previousSibling;(!b||_&&_.nodeName=="BR"||b.isText&&/[ \t\r\n\u000c]$/.test(b.text))&&(a=a.slice(1))}a&&this.insertNode(this.parser.schema.text(a),s),this.findInText(e)}else this.findInside(e)}addElement(e,s,a){let d=e.nodeName.toLowerCase(),b;listTags.hasOwnProperty(d)&&this.parser.normalizeLists&&normalizeList(e);let _=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(b=this.parser.matchTag(e,this,a));if(_?_.ignore:ignoreTags.hasOwnProperty(d))this.findInside(e),this.ignoreFallback(e,s);else if(!_||_.skip||_.closeParent){_&&_.closeParent?this.open=Math.max(0,this.open-1):_&&_.skip.nodeType&&(e=_.skip);let _e,nt=this.top,rt=this.needsBlock;if(blockTags.hasOwnProperty(d))nt.content.length&&nt.content[0].isInline&&this.open&&(this.open--,nt=this.top),_e=!0,nt.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,s);return}let ct=_&&_.skip?s:this.readStyles(e,s);ct&&this.addAll(e,ct),_e&&this.sync(nt),this.needsBlock=rt}else{let _e=this.readStyles(e,s);_e&&this.addElementByRule(e,_,_e,_.consuming===!1?b:void 0)}}leafFallback(e,s){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),s)}ignoreFallback(e,s){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),s)}readStyles(e,s){let a=e.style;if(a&&a.length)for(let d=0;d<this.parser.matchedStyles.length;d++){let b=this.parser.matchedStyles[d],_=a.getPropertyValue(b);if(_)for(let _e=void 0;;){let nt=this.parser.matchStyle(b,_,this,_e);if(!nt)break;if(nt.ignore)return null;if(nt.clearMark?s=s.filter(rt=>!nt.clearMark(rt)):s=s.concat(this.parser.schema.marks[nt.mark].create(nt.attrs)),nt.consuming===!1)_e=nt;else break}}return s}addElementByRule(e,s,a,d){let b,_;if(s.node)if(_=this.parser.schema.nodes[s.node],_.isLeaf)this.insertNode(_.create(s.attrs),a)||this.leafFallback(e,a);else{let nt=this.enter(_,s.attrs||null,a,s.preserveWhitespace);nt&&(b=!0,a=nt)}else{let nt=this.parser.schema.marks[s.mark];a=a.concat(nt.create(s.attrs))}let _e=this.top;if(_&&_.isLeaf)this.findInside(e);else if(d)this.addElement(e,a,d);else if(s.getContent)this.findInside(e),s.getContent(e,this.parser.schema).forEach(nt=>this.insertNode(nt,a));else{let nt=e;typeof s.contentElement=="string"?nt=e.querySelector(s.contentElement):typeof s.contentElement=="function"?nt=s.contentElement(e):s.contentElement&&(nt=s.contentElement),this.findAround(e,nt,!0),this.addAll(nt,a),this.findAround(e,nt,!1)}b&&this.sync(_e)&&this.open--}addAll(e,s,a,d){let b=a||0;for(let _=a?e.childNodes[a]:e.firstChild,_e=d==null?null:e.childNodes[d];_!=_e;_=_.nextSibling,++b)this.findAtPoint(e,b),this.addDOM(_,s);this.findAtPoint(e,b)}findPlace(e,s){let a,d;for(let b=this.open;b>=0;b--){let _=this.nodes[b],_e=_.findWrapping(e);if(_e&&(!a||a.length>_e.length)&&(a=_e,d=_,!_e.length)||_.solid)break}if(!a)return null;this.sync(d);for(let b=0;b<a.length;b++)s=this.enterInner(a[b],null,s,!1);return s}insertNode(e,s){if(e.isInline&&this.needsBlock&&!this.top.type){let d=this.textblockFromContext();d&&(s=this.enterInner(d,null,s))}let a=this.findPlace(e,s);if(a){this.closeExtra();let d=this.top;d.match&&(d.match=d.match.matchType(e.type));let b=Mark$1.none;for(let _ of a.concat(e.marks))(d.type?d.type.allowsMarkType(_.type):markMayApply(_.type,e.type))&&(b=_.addToSet(b));return d.content.push(e.mark(b)),!0}return!1}enter(e,s,a,d){let b=this.findPlace(e.create(s),a);return b&&(b=this.enterInner(e,s,a,!0,d)),b}enterInner(e,s,a,d=!1,b){this.closeExtra();let _=this.top;_.match=_.match&&_.match.matchType(e);let _e=wsOptionsFor(e,b,_.options);_.options&OPT_OPEN_LEFT&&_.content.length==0&&(_e|=OPT_OPEN_LEFT);let nt=Mark$1.none;return a=a.filter(rt=>(_.type?_.type.allowsMarkType(rt.type):markMayApply(rt.type,e))?(nt=rt.addToSet(nt),!1):!0),this.nodes.push(new NodeContext(e,s,nt,d,null,_e)),this.open++,a}closeExtra(e=!1){let s=this.nodes.length-1;if(s>this.open){for(;s>this.open;s--)this.nodes[s-1].content.push(this.nodes[s].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let s=this.open;s>=0;s--)if(this.nodes[s]==e)return this.open=s,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let s=this.open;s>=0;s--){let a=this.nodes[s].content;for(let d=a.length-1;d>=0;d--)e+=a[d].nodeSize;s&&e++}return e}findAtPoint(e,s){if(this.find)for(let a=0;a<this.find.length;a++)this.find[a].node==e&&this.find[a].offset==s&&(this.find[a].pos=this.currentPos)}findInside(e){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&(this.find[s].pos=this.currentPos)}findAround(e,s,a){if(e!=s&&this.find)for(let d=0;d<this.find.length;d++)this.find[d].pos==null&&e.nodeType==1&&e.contains(this.find[d].node)&&s.compareDocumentPosition(this.find[d].node)&(a?2:4)&&(this.find[d].pos=this.currentPos)}findInText(e){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&(this.find[s].pos=this.currentPos-(e.nodeValue.length-this.find[s].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let s=e.split("/"),a=this.options.context,d=!this.isOpen&&(!a||a.parent.type==this.nodes[0].type),b=-(a?a.depth+1:0)+(d?0:1),_=(_e,nt)=>{for(;_e>=0;_e--){let rt=s[_e];if(rt==""){if(_e==s.length-1||_e==0)continue;for(;nt>=b;nt--)if(_(_e-1,nt))return!0;return!1}else{let ct=nt>0||nt==0&&d?this.nodes[nt].type:a&&nt>=b?a.node(nt-b).type:null;if(!ct||ct.name!=rt&&!ct.isInGroup(rt))return!1;nt--}}return!0};return _(s.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let s=e.depth;s>=0;s--){let a=e.node(s).contentMatchAt(e.indexAfter(s)).defaultType;if(a&&a.isTextblock&&a.defaultAttrs)return a}for(let s in this.parser.schema.nodes){let a=this.parser.schema.nodes[s];if(a.isTextblock&&a.defaultAttrs)return a}}}function normalizeList(o){for(let e=o.firstChild,s=null;e;e=e.nextSibling){let a=e.nodeType==1?e.nodeName.toLowerCase():null;a&&listTags.hasOwnProperty(a)&&s?(s.appendChild(e),e=s):a=="li"?s=e:a&&(s=null)}}function matches(o,e){return(o.matches||o.msMatchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector).call(o,e)}function copy(o){let e={};for(let s in o)e[s]=o[s];return e}function markMayApply(o,e){let s=e.schema.nodes;for(let a in s){let d=s[a];if(!d.allowsMarkType(o))continue;let b=[],_=_e=>{b.push(_e);for(let nt=0;nt<_e.edgeCount;nt++){let{type:rt,next:ct}=_e.edge(nt);if(rt==e||b.indexOf(ct)<0&&_(ct))return!0}};if(_(d.contentMatch))return!0}}class DOMSerializer{constructor(e,s){this.nodes=e,this.marks=s}serializeFragment(e,s={},a){a||(a=doc$1(s).createDocumentFragment());let d=a,b=[];return e.forEach(_=>{if(b.length||_.marks.length){let _e=0,nt=0;for(;_e<b.length&&nt<_.marks.length;){let rt=_.marks[nt];if(!this.marks[rt.type.name]){nt++;continue}if(!rt.eq(b[_e][0])||rt.type.spec.spanning===!1)break;_e++,nt++}for(;_e<b.length;)d=b.pop()[1];for(;nt<_.marks.length;){let rt=_.marks[nt++],ct=this.serializeMark(rt,_.isInline,s);ct&&(b.push([rt,d]),d.appendChild(ct.dom),d=ct.contentDOM||ct.dom)}}d.appendChild(this.serializeNodeInner(_,s))}),a}serializeNodeInner(e,s){let{dom:a,contentDOM:d}=renderSpec(doc$1(s),this.nodes[e.type.name](e),null,e.attrs);if(d){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,s,d)}return a}serializeNode(e,s={}){let a=this.serializeNodeInner(e,s);for(let d=e.marks.length-1;d>=0;d--){let b=this.serializeMark(e.marks[d],e.isInline,s);b&&((b.contentDOM||b.dom).appendChild(a),a=b.dom)}return a}serializeMark(e,s,a={}){let d=this.marks[e.type.name];return d&&renderSpec(doc$1(a),d(e,s),null,e.attrs)}static renderSpec(e,s,a=null,d){return renderSpec(e,s,a,d)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let s=gatherToDOM(e.nodes);return s.text||(s.text=a=>a.text),s}static marksFromSchema(e){return gatherToDOM(e.marks)}}function gatherToDOM(o){let e={};for(let s in o){let a=o[s].spec.toDOM;a&&(e[s]=a)}return e}function doc$1(o){return o.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(o){let e=suspiciousAttributeCache.get(o);return e===void 0&&suspiciousAttributeCache.set(o,e=suspiciousAttributesInner(o)),e}function suspiciousAttributesInner(o){let e=null;function s(a){if(a&&typeof a=="object")if(Array.isArray(a))if(typeof a[0]=="string")e||(e=[]),e.push(a);else for(let d=0;d<a.length;d++)s(a[d]);else for(let d in a)s(a[d])}return s(o),e}function renderSpec(o,e,s,a){if(typeof e=="string")return{dom:o.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let d=e[0],b;if(typeof d!="string")throw new RangeError("Invalid array passed to renderSpec");if(a&&(b=suspiciousAttributes(a))&&b.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let _=d.indexOf(" ");_>0&&(s=d.slice(0,_),d=d.slice(_+1));let _e,nt=s?o.createElementNS(s,d):o.createElement(d),rt=e[1],ct=1;if(rt&&typeof rt=="object"&&rt.nodeType==null&&!Array.isArray(rt)){ct=2;for(let dt in rt)if(rt[dt]!=null){let pt=dt.indexOf(" ");pt>0?nt.setAttributeNS(dt.slice(0,pt),dt.slice(pt+1),rt[dt]):nt.setAttribute(dt,rt[dt])}}for(let dt=ct;dt<e.length;dt++){let pt=e[dt];if(pt===0){if(dt<e.length-1||dt>ct)throw new RangeError("Content hole must be the only child of its parent node");return{dom:nt,contentDOM:nt}}else{let{dom:bt,contentDOM:xt}=renderSpec(o,pt,s,a);if(nt.appendChild(bt),xt){if(_e)throw new RangeError("Multiple content holes");_e=xt}}}return{dom:nt,contentDOM:_e}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(o,e){return o+e*factor16}function recoverIndex(o){return o&lower16}function recoverOffset(o){return(o-(o&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(e,s,a){this.pos=e,this.delInfo=s,this.recover=a}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(e,s=!1){if(this.ranges=e,this.inverted=s,!e.length&&StepMap.empty)return StepMap.empty}recover(e){let s=0,a=recoverIndex(e);if(!this.inverted)for(let d=0;d<a;d++)s+=this.ranges[d*3+2]-this.ranges[d*3+1];return this.ranges[a*3]+s+recoverOffset(e)}mapResult(e,s=1){return this._map(e,s,!1)}map(e,s=1){return this._map(e,s,!0)}_map(e,s,a){let d=0,b=this.inverted?2:1,_=this.inverted?1:2;for(let _e=0;_e<this.ranges.length;_e+=3){let nt=this.ranges[_e]-(this.inverted?d:0);if(nt>e)break;let rt=this.ranges[_e+b],ct=this.ranges[_e+_],dt=nt+rt;if(e<=dt){let pt=rt?e==nt?-1:e==dt?1:s:s,bt=nt+d+(pt<0?0:ct);if(a)return bt;let xt=e==(s<0?nt:dt)?null:makeRecover(_e/3,e-nt),wt=e==nt?DEL_AFTER:e==dt?DEL_BEFORE:DEL_ACROSS;return(s<0?e!=nt:e!=dt)&&(wt|=DEL_SIDE),new MapResult(bt,wt,xt)}d+=ct-rt}return a?e+d:new MapResult(e+d,0,null)}touches(e,s){let a=0,d=recoverIndex(s),b=this.inverted?2:1,_=this.inverted?1:2;for(let _e=0;_e<this.ranges.length;_e+=3){let nt=this.ranges[_e]-(this.inverted?a:0);if(nt>e)break;let rt=this.ranges[_e+b],ct=nt+rt;if(e<=ct&&_e==d*3)return!0;a+=this.ranges[_e+_]-rt}return!1}forEach(e){let s=this.inverted?2:1,a=this.inverted?1:2;for(let d=0,b=0;d<this.ranges.length;d+=3){let _=this.ranges[d],_e=_-(this.inverted?b:0),nt=_+(this.inverted?0:b),rt=this.ranges[d+s],ct=this.ranges[d+a];e(_e,_e+rt,nt,nt+ct),b+=ct-rt}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?StepMap.empty:new StepMap(e<0?[0,-e,0]:[0,0,e])}}StepMap.empty=new StepMap([]);class Mapping{constructor(e=[],s,a=0,d=e.length){this.maps=e,this.mirror=s,this.from=a,this.to=d}slice(e=0,s=this.maps.length){return new Mapping(this.maps,this.mirror,e,s)}copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,s){this.to=this.maps.push(e),s!=null&&this.setMirror(this.maps.length-1,s)}appendMapping(e){for(let s=0,a=this.maps.length;s<e.maps.length;s++){let d=e.getMirror(s);this.appendMap(e.maps[s],d!=null&&d<s?a+d:void 0)}}getMirror(e){if(this.mirror){for(let s=0;s<this.mirror.length;s++)if(this.mirror[s]==e)return this.mirror[s+(s%2?-1:1)]}}setMirror(e,s){this.mirror||(this.mirror=[]),this.mirror.push(e,s)}appendMappingInverted(e){for(let s=e.maps.length-1,a=this.maps.length+e.maps.length;s>=0;s--){let d=e.getMirror(s);this.appendMap(e.maps[s].invert(),d!=null&&d>s?a-d-1:void 0)}}invert(){let e=new Mapping;return e.appendMappingInverted(this),e}map(e,s=1){if(this.mirror)return this._map(e,s,!0);for(let a=this.from;a<this.to;a++)e=this.maps[a].map(e,s);return e}mapResult(e,s=1){return this._map(e,s,!1)}_map(e,s,a){let d=0;for(let b=this.from;b<this.to;b++){let _=this.maps[b],_e=_.mapResult(e,s);if(_e.recover!=null){let nt=this.getMirror(b);if(nt!=null&&nt>b&&nt<this.to){b=nt,e=this.maps[nt].recover(_e.recover);continue}}d|=_e.delInfo,e=_e.pos}return a?e:new MapResult(e,d,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(e){return null}static fromJSON(e,s){if(!s||!s.stepType)throw new RangeError("Invalid input for Step.fromJSON");let a=stepsByID[s.stepType];if(!a)throw new RangeError(`No step type ${s.stepType} defined`);return a.fromJSON(e,s)}static jsonID(e,s){if(e in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+e);return stepsByID[e]=s,s.prototype.jsonID=e,s}}class StepResult{constructor(e,s){this.doc=e,this.failed=s}static ok(e){return new StepResult(e,null)}static fail(e){return new StepResult(null,e)}static fromReplace(e,s,a,d){try{return StepResult.ok(e.replace(s,a,d))}catch(b){if(b instanceof ReplaceError)return StepResult.fail(b.message);throw b}}}function mapFragment(o,e,s){let a=[];for(let d=0;d<o.childCount;d++){let b=o.child(d);b.content.size&&(b=b.copy(mapFragment(b.content,e,b))),b.isInline&&(b=e(b,s,d)),a.push(b)}return Fragment.fromArray(a)}class AddMarkStep extends Step{constructor(e,s,a){super(),this.from=e,this.to=s,this.mark=a}apply(e){let s=e.slice(this.from,this.to),a=e.resolve(this.from),d=a.node(a.sharedDepth(this.to)),b=new Slice(mapFragment(s.content,(_,_e)=>!_.isAtom||!_e.type.allowsMarkType(this.mark.type)?_:_.mark(this.mark.addToSet(_.marks)),d),s.openStart,s.openEnd);return StepResult.fromReplace(e,this.from,this.to,b)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(e){let s=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return s.deleted&&a.deleted||s.pos>=a.pos?null:new AddMarkStep(s.pos,a.pos,this.mark)}merge(e){return e instanceof AddMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new AddMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(s.from,s.to,e.markFromJSON(s.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(e,s,a){super(),this.from=e,this.to=s,this.mark=a}apply(e){let s=e.slice(this.from,this.to),a=new Slice(mapFragment(s.content,d=>d.mark(this.mark.removeFromSet(d.marks)),e),s.openStart,s.openEnd);return StepResult.fromReplace(e,this.from,this.to,a)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(e){let s=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return s.deleted&&a.deleted||s.pos>=a.pos?null:new RemoveMarkStep(s.pos,a.pos,this.mark)}merge(e){return e instanceof RemoveMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new RemoveMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(s.from,s.to,e.markFromJSON(s.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(e,s){super(),this.pos=e,this.mark=s}apply(e){let s=e.nodeAt(this.pos);if(!s)return StepResult.fail("No node at mark step's position");let a=s.type.create(s.attrs,null,this.mark.addToSet(s.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(a),0,s.isLeaf?0:1))}invert(e){let s=e.nodeAt(this.pos);if(s){let a=this.mark.addToSet(s.marks);if(a.length==s.marks.length){for(let d=0;d<s.marks.length;d++)if(!s.marks[d].isInSet(a))return new AddNodeMarkStep(this.pos,s.marks[d]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new AddNodeMarkStep(s.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(s.pos,e.markFromJSON(s.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(e,s){super(),this.pos=e,this.mark=s}apply(e){let s=e.nodeAt(this.pos);if(!s)return StepResult.fail("No node at mark step's position");let a=s.type.create(s.attrs,null,this.mark.removeFromSet(s.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(a),0,s.isLeaf?0:1))}invert(e){let s=e.nodeAt(this.pos);return!s||!this.mark.isInSet(s.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new RemoveNodeMarkStep(s.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(s.pos,e.markFromJSON(s.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(e,s,a,d=!1){super(),this.from=e,this.to=s,this.slice=a,this.structure=d}apply(e){return this.structure&&contentBetween(e,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(e){return new ReplaceStep(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let s=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return s.deletedAcross&&a.deletedAcross?null:new ReplaceStep(s.pos,Math.max(s.pos,a.pos),this.slice)}merge(e){if(!(e instanceof ReplaceStep)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let s=this.slice.size+e.slice.size==0?Slice.empty:new Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ReplaceStep(this.from,this.to+(e.to-e.from),s,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let s=this.slice.size+e.slice.size==0?Slice.empty:new Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ReplaceStep(e.from,this.to,s,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(s.from,s.to,Slice.fromJSON(e,s.slice),!!s.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(e,s,a,d,b,_,_e=!1){super(),this.from=e,this.to=s,this.gapFrom=a,this.gapTo=d,this.slice=b,this.insert=_,this.structure=_e}apply(e){if(this.structure&&(contentBetween(e,this.from,this.gapFrom)||contentBetween(e,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let s=e.slice(this.gapFrom,this.gapTo);if(s.openStart||s.openEnd)return StepResult.fail("Gap is not a flat range");let a=this.slice.insertAt(this.insert,s.content);return a?StepResult.fromReplace(e,this.from,this.to,a):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let s=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+s,this.from+this.insert,this.from+this.insert+s,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let s=e.mapResult(this.from,1),a=e.mapResult(this.to,-1),d=this.from==this.gapFrom?s.pos:e.map(this.gapFrom,-1),b=this.to==this.gapTo?a.pos:e.map(this.gapTo,1);return s.deletedAcross&&a.deletedAcross||d<s.pos||b>a.pos?null:new ReplaceAroundStep(s.pos,a.pos,d,b,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number"||typeof s.gapFrom!="number"||typeof s.gapTo!="number"||typeof s.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(s.from,s.to,s.gapFrom,s.gapTo,Slice.fromJSON(e,s.slice),s.insert,!!s.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(o,e,s){let a=o.resolve(e),d=s-e,b=a.depth;for(;d>0&&b>0&&a.indexAfter(b)==a.node(b).childCount;)b--,d--;if(d>0){let _=a.node(b).maybeChild(a.indexAfter(b));for(;d>0;){if(!_||_.isLeaf)return!0;_=_.firstChild,d--}}return!1}function addMark(o,e,s,a){let d=[],b=[],_,_e;o.doc.nodesBetween(e,s,(nt,rt,ct)=>{if(!nt.isInline)return;let dt=nt.marks;if(!a.isInSet(dt)&&ct.type.allowsMarkType(a.type)){let pt=Math.max(rt,e),bt=Math.min(rt+nt.nodeSize,s),xt=a.addToSet(dt);for(let wt=0;wt<dt.length;wt++)dt[wt].isInSet(xt)||(_&&_.to==pt&&_.mark.eq(dt[wt])?_.to=bt:d.push(_=new RemoveMarkStep(pt,bt,dt[wt])));_e&&_e.to==pt?_e.to=bt:b.push(_e=new AddMarkStep(pt,bt,a))}}),d.forEach(nt=>o.step(nt)),b.forEach(nt=>o.step(nt))}function removeMark(o,e,s,a){let d=[],b=0;o.doc.nodesBetween(e,s,(_,_e)=>{if(!_.isInline)return;b++;let nt=null;if(a instanceof MarkType){let rt=_.marks,ct;for(;ct=a.isInSet(rt);)(nt||(nt=[])).push(ct),rt=ct.removeFromSet(rt)}else a?a.isInSet(_.marks)&&(nt=[a]):nt=_.marks;if(nt&&nt.length){let rt=Math.min(_e+_.nodeSize,s);for(let ct=0;ct<nt.length;ct++){let dt=nt[ct],pt;for(let bt=0;bt<d.length;bt++){let xt=d[bt];xt.step==b-1&&dt.eq(d[bt].style)&&(pt=xt)}pt?(pt.to=rt,pt.step=b):d.push({style:dt,from:Math.max(_e,e),to:rt,step:b})}}}),d.forEach(_=>o.step(new RemoveMarkStep(_.from,_.to,_.style)))}function clearIncompatible(o,e,s,a=s.contentMatch,d=!0){let b=o.doc.nodeAt(e),_=[],_e=e+1;for(let nt=0;nt<b.childCount;nt++){let rt=b.child(nt),ct=_e+rt.nodeSize,dt=a.matchType(rt.type);if(!dt)_.push(new ReplaceStep(_e,ct,Slice.empty));else{a=dt;for(let pt=0;pt<rt.marks.length;pt++)s.allowsMarkType(rt.marks[pt].type)||o.step(new RemoveMarkStep(_e,ct,rt.marks[pt]));if(d&&rt.isText&&s.whitespace!="pre"){let pt,bt=/\r?\n|\r/g,xt;for(;pt=bt.exec(rt.text);)xt||(xt=new Slice(Fragment.from(s.schema.text(" ",s.allowedMarks(rt.marks))),0,0)),_.push(new ReplaceStep(_e+pt.index,_e+pt.index+pt[0].length,xt))}}_e=ct}if(!a.validEnd){let nt=a.fillBefore(Fragment.empty,!0);o.replace(_e,_e,new Slice(nt,0,0))}for(let nt=_.length-1;nt>=0;nt--)o.step(_[nt])}function canCut(o,e,s){return(e==0||o.canReplace(e,o.childCount))&&(s==o.childCount||o.canReplace(0,s))}function liftTarget(o){let s=o.parent.content.cutByIndex(o.startIndex,o.endIndex);for(let a=o.depth;;--a){let d=o.$from.node(a),b=o.$from.index(a),_=o.$to.indexAfter(a);if(a<o.depth&&d.canReplace(b,_,s))return a;if(a==0||d.type.spec.isolating||!canCut(d,b,_))break}return null}function lift$2(o,e,s){let{$from:a,$to:d,depth:b}=e,_=a.before(b+1),_e=d.after(b+1),nt=_,rt=_e,ct=Fragment.empty,dt=0;for(let xt=b,wt=!1;xt>s;xt--)wt||a.index(xt)>0?(wt=!0,ct=Fragment.from(a.node(xt).copy(ct)),dt++):nt--;let pt=Fragment.empty,bt=0;for(let xt=b,wt=!1;xt>s;xt--)wt||d.after(xt+1)<d.end(xt)?(wt=!0,pt=Fragment.from(d.node(xt).copy(pt)),bt++):rt++;o.step(new ReplaceAroundStep(nt,rt,_,_e,new Slice(ct.append(pt),dt,bt),ct.size-dt,!0))}function findWrapping(o,e,s=null,a=o){let d=findWrappingOutside(o,e),b=d&&findWrappingInside(a,e);return b?d.map(withAttrs).concat({type:e,attrs:s}).concat(b.map(withAttrs)):null}function withAttrs(o){return{type:o,attrs:null}}function findWrappingOutside(o,e){let{parent:s,startIndex:a,endIndex:d}=o,b=s.contentMatchAt(a).findWrapping(e);if(!b)return null;let _=b.length?b[0]:e;return s.canReplaceWith(a,d,_)?b:null}function findWrappingInside(o,e){let{parent:s,startIndex:a,endIndex:d}=o,b=s.child(a),_=e.contentMatch.findWrapping(b.type);if(!_)return null;let nt=(_.length?_[_.length-1]:e).contentMatch;for(let rt=a;nt&&rt<d;rt++)nt=nt.matchType(s.child(rt).type);return!nt||!nt.validEnd?null:_}function wrap(o,e,s){let a=Fragment.empty;for(let _=s.length-1;_>=0;_--){if(a.size){let _e=s[_].type.contentMatch.matchFragment(a);if(!_e||!_e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}a=Fragment.from(s[_].type.create(s[_].attrs,a))}let d=e.start,b=e.end;o.step(new ReplaceAroundStep(d,b,d,b,new Slice(a,0,0),s.length,!0))}function setBlockType$1(o,e,s,a,d){if(!a.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let b=o.steps.length;o.doc.nodesBetween(e,s,(_,_e)=>{let nt=typeof d=="function"?d(_):d;if(_.isTextblock&&!_.hasMarkup(a,nt)&&canChangeType(o.doc,o.mapping.slice(b).map(_e),a)){let rt=null;if(a.schema.linebreakReplacement){let bt=a.whitespace=="pre",xt=!!a.contentMatch.matchType(a.schema.linebreakReplacement);bt&&!xt?rt=!1:!bt&&xt&&(rt=!0)}rt===!1&&replaceLinebreaks(o,_,_e,b),clearIncompatible(o,o.mapping.slice(b).map(_e,1),a,void 0,rt===null);let ct=o.mapping.slice(b),dt=ct.map(_e,1),pt=ct.map(_e+_.nodeSize,1);return o.step(new ReplaceAroundStep(dt,pt,dt+1,pt-1,new Slice(Fragment.from(a.create(nt,null,_.marks)),0,0),1,!0)),rt===!0&&replaceNewlines(o,_,_e,b),!1}})}function replaceNewlines(o,e,s,a){e.forEach((d,b)=>{if(d.isText){let _,_e=/\r?\n|\r/g;for(;_=_e.exec(d.text);){let nt=o.mapping.slice(a).map(s+1+b+_.index);o.replaceWith(nt,nt+1,e.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(o,e,s,a){e.forEach((d,b)=>{if(d.type==d.type.schema.linebreakReplacement){let _=o.mapping.slice(a).map(s+1+b);o.replaceWith(_,_+1,e.type.schema.text(`
`))}})}function canChangeType(o,e,s){let a=o.resolve(e),d=a.index();return a.parent.canReplaceWith(d,d+1,s)}function setNodeMarkup(o,e,s,a,d){let b=o.doc.nodeAt(e);if(!b)throw new RangeError("No node at given position");s||(s=b.type);let _=s.create(a,null,d||b.marks);if(b.isLeaf)return o.replaceWith(e,e+b.nodeSize,_);if(!s.validContent(b.content))throw new RangeError("Invalid content for node type "+s.name);o.step(new ReplaceAroundStep(e,e+b.nodeSize,e+1,e+b.nodeSize-1,new Slice(Fragment.from(_),0,0),1,!0))}function canSplit(o,e,s=1,a){let d=o.resolve(e),b=d.depth-s,_=a&&a[a.length-1]||d.parent;if(b<0||d.parent.type.spec.isolating||!d.parent.canReplace(d.index(),d.parent.childCount)||!_.type.validContent(d.parent.content.cutByIndex(d.index(),d.parent.childCount)))return!1;for(let rt=d.depth-1,ct=s-2;rt>b;rt--,ct--){let dt=d.node(rt),pt=d.index(rt);if(dt.type.spec.isolating)return!1;let bt=dt.content.cutByIndex(pt,dt.childCount),xt=a&&a[ct+1];xt&&(bt=bt.replaceChild(0,xt.type.create(xt.attrs)));let wt=a&&a[ct]||dt;if(!dt.canReplace(pt+1,dt.childCount)||!wt.type.validContent(bt))return!1}let _e=d.indexAfter(b),nt=a&&a[0];return d.node(b).canReplaceWith(_e,_e,nt?nt.type:d.node(b+1).type)}function split(o,e,s=1,a){let d=o.doc.resolve(e),b=Fragment.empty,_=Fragment.empty;for(let _e=d.depth,nt=d.depth-s,rt=s-1;_e>nt;_e--,rt--){b=Fragment.from(d.node(_e).copy(b));let ct=a&&a[rt];_=Fragment.from(ct?ct.type.create(ct.attrs,_):d.node(_e).copy(_))}o.step(new ReplaceStep(e,e,new Slice(b.append(_),s,s),!0))}function canJoin(o,e){let s=o.resolve(e),a=s.index();return joinable(s.nodeBefore,s.nodeAfter)&&s.parent.canReplace(a,a+1)}function canAppendWithSubstitutedLinebreaks(o,e){e.content.size||o.type.compatibleContent(e.type);let s=o.contentMatchAt(o.childCount),{linebreakReplacement:a}=o.type.schema;for(let d=0;d<e.childCount;d++){let b=e.child(d),_=b.type==a?o.type.schema.nodes.text:b.type;if(s=s.matchType(_),!s||!o.type.allowsMarks(b.marks))return!1}return s.validEnd}function joinable(o,e){return!!(o&&e&&!o.isLeaf&&canAppendWithSubstitutedLinebreaks(o,e))}function joinPoint(o,e,s=-1){let a=o.resolve(e);for(let d=a.depth;;d--){let b,_,_e=a.index(d);if(d==a.depth?(b=a.nodeBefore,_=a.nodeAfter):s>0?(b=a.node(d+1),_e++,_=a.node(d).maybeChild(_e)):(b=a.node(d).maybeChild(_e-1),_=a.node(d+1)),b&&!b.isTextblock&&joinable(b,_)&&a.node(d).canReplace(_e,_e+1))return e;if(d==0)break;e=s<0?a.before(d):a.after(d)}}function join(o,e,s){let a=null,{linebreakReplacement:d}=o.doc.type.schema,b=o.doc.resolve(e-s),_=b.node().type;if(d&&_.inlineContent){let ct=_.whitespace=="pre",dt=!!_.contentMatch.matchType(d);ct&&!dt?a=!1:!ct&&dt&&(a=!0)}let _e=o.steps.length;if(a===!1){let ct=o.doc.resolve(e+s);replaceLinebreaks(o,ct.node(),ct.before(),_e)}_.inlineContent&&clearIncompatible(o,e+s-1,_,b.node().contentMatchAt(b.index()),a==null);let nt=o.mapping.slice(_e),rt=nt.map(e-s);if(o.step(new ReplaceStep(rt,nt.map(e+s,-1),Slice.empty,!0)),a===!0){let ct=o.doc.resolve(rt);replaceNewlines(o,ct.node(),ct.before(),o.steps.length)}return o}function insertPoint(o,e,s){let a=o.resolve(e);if(a.parent.canReplaceWith(a.index(),a.index(),s))return e;if(a.parentOffset==0)for(let d=a.depth-1;d>=0;d--){let b=a.index(d);if(a.node(d).canReplaceWith(b,b,s))return a.before(d+1);if(b>0)return null}if(a.parentOffset==a.parent.content.size)for(let d=a.depth-1;d>=0;d--){let b=a.indexAfter(d);if(a.node(d).canReplaceWith(b,b,s))return a.after(d+1);if(b<a.node(d).childCount)return null}return null}function dropPoint(o,e,s){let a=o.resolve(e);if(!s.content.size)return e;let d=s.content;for(let b=0;b<s.openStart;b++)d=d.firstChild.content;for(let b=1;b<=(s.openStart==0&&s.size?2:1);b++)for(let _=a.depth;_>=0;_--){let _e=_==a.depth?0:a.pos<=(a.start(_+1)+a.end(_+1))/2?-1:1,nt=a.index(_)+(_e>0?1:0),rt=a.node(_),ct=!1;if(b==1)ct=rt.canReplace(nt,nt,d);else{let dt=rt.contentMatchAt(nt).findWrapping(d.firstChild.type);ct=dt&&rt.canReplaceWith(nt,nt,dt[0])}if(ct)return _e==0?a.pos:_e<0?a.before(_+1):a.after(_+1)}return null}function replaceStep(o,e,s=e,a=Slice.empty){if(e==s&&!a.size)return null;let d=o.resolve(e),b=o.resolve(s);return fitsTrivially(d,b,a)?new ReplaceStep(e,s,a):new Fitter(d,b,a).fit()}function fitsTrivially(o,e,s){return!s.openStart&&!s.openEnd&&o.start()==e.start()&&o.parent.canReplace(o.index(),e.index(),s.content)}class Fitter{constructor(e,s,a){this.$from=e,this.$to=s,this.unplaced=a,this.frontier=[],this.placed=Fragment.empty;for(let d=0;d<=e.depth;d++){let b=e.node(d);this.frontier.push({type:b.type,match:b.contentMatchAt(e.indexAfter(d))})}for(let d=e.depth;d>0;d--)this.placed=Fragment.from(e.node(d).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let rt=this.findFittable();rt?this.placeNodes(rt):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),s=this.placed.size-this.depth-this.$from.depth,a=this.$from,d=this.close(e<0?this.$to:a.doc.resolve(e));if(!d)return null;let b=this.placed,_=a.depth,_e=d.depth;for(;_&&_e&&b.childCount==1;)b=b.firstChild.content,_--,_e--;let nt=new Slice(b,_,_e);return e>-1?new ReplaceAroundStep(a.pos,e,this.$to.pos,this.$to.end(),nt,s):nt.size||a.pos!=this.$to.pos?new ReplaceStep(a.pos,d.pos,nt):null}findFittable(){let e=this.unplaced.openStart;for(let s=this.unplaced.content,a=0,d=this.unplaced.openEnd;a<e;a++){let b=s.firstChild;if(s.childCount>1&&(d=0),b.type.spec.isolating&&d<=a){e=a;break}s=b.content}for(let s=1;s<=2;s++)for(let a=s==1?e:this.unplaced.openStart;a>=0;a--){let d,b=null;a?(b=contentAt(this.unplaced.content,a-1).firstChild,d=b.content):d=this.unplaced.content;let _=d.firstChild;for(let _e=this.depth;_e>=0;_e--){let{type:nt,match:rt}=this.frontier[_e],ct,dt=null;if(s==1&&(_?rt.matchType(_.type)||(dt=rt.fillBefore(Fragment.from(_),!1)):b&&nt.compatibleContent(b.type)))return{sliceDepth:a,frontierDepth:_e,parent:b,inject:dt};if(s==2&&_&&(ct=rt.findWrapping(_.type)))return{sliceDepth:a,frontierDepth:_e,parent:b,wrap:ct};if(b&&rt.matchType(b.type))break}}}openMore(){let{content:e,openStart:s,openEnd:a}=this.unplaced,d=contentAt(e,s);return!d.childCount||d.firstChild.isLeaf?!1:(this.unplaced=new Slice(e,s+1,Math.max(a,d.size+s>=e.size-a?s+1:0)),!0)}dropNode(){let{content:e,openStart:s,openEnd:a}=this.unplaced,d=contentAt(e,s);if(d.childCount<=1&&s>0){let b=e.size-s<=s+d.size;this.unplaced=new Slice(dropFromFragment(e,s-1,1),s-1,b?s-1:a)}else this.unplaced=new Slice(dropFromFragment(e,s,1),s,a)}placeNodes({sliceDepth:e,frontierDepth:s,parent:a,inject:d,wrap:b}){for(;this.depth>s;)this.closeFrontierNode();if(b)for(let wt=0;wt<b.length;wt++)this.openFrontierNode(b[wt]);let _=this.unplaced,_e=a?a.content:_.content,nt=_.openStart-e,rt=0,ct=[],{match:dt,type:pt}=this.frontier[s];if(d){for(let wt=0;wt<d.childCount;wt++)ct.push(d.child(wt));dt=dt.matchFragment(d)}let bt=_e.size+e-(_.content.size-_.openEnd);for(;rt<_e.childCount;){let wt=_e.child(rt),Tt=dt.matchType(wt.type);if(!Tt)break;rt++,(rt>1||nt==0||wt.content.size)&&(dt=Tt,ct.push(closeNodeStart(wt.mark(pt.allowedMarks(wt.marks)),rt==1?nt:0,rt==_e.childCount?bt:-1)))}let xt=rt==_e.childCount;xt||(bt=-1),this.placed=addToFragment(this.placed,s,Fragment.from(ct)),this.frontier[s].match=dt,xt&&bt<0&&a&&a.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let wt=0,Tt=_e;wt<bt;wt++){let Rt=Tt.lastChild;this.frontier.push({type:Rt.type,match:Rt.contentMatchAt(Rt.childCount)}),Tt=Rt.content}this.unplaced=xt?e==0?Slice.empty:new Slice(dropFromFragment(_.content,e-1,1),e-1,bt<0?_.openEnd:e-1):new Slice(dropFromFragment(_.content,e,rt),_.openStart,_.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],s;if(!e.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(s=this.findCloseLevel(this.$to))&&s.depth==this.depth)return-1;let{depth:a}=this.$to,d=this.$to.after(a);for(;a>1&&d==this.$to.end(--a);)++d;return d}findCloseLevel(e){e:for(let s=Math.min(this.depth,e.depth);s>=0;s--){let{match:a,type:d}=this.frontier[s],b=s<e.depth&&e.end(s+1)==e.pos+(e.depth-(s+1)),_=contentAfterFits(e,s,d,a,b);if(_){for(let _e=s-1;_e>=0;_e--){let{match:nt,type:rt}=this.frontier[_e],ct=contentAfterFits(e,_e,rt,nt,!0);if(!ct||ct.childCount)continue e}return{depth:s,fit:_,move:b?e.doc.resolve(e.after(s+1)):e}}}}close(e){let s=this.findCloseLevel(e);if(!s)return null;for(;this.depth>s.depth;)this.closeFrontierNode();s.fit.childCount&&(this.placed=addToFragment(this.placed,s.depth,s.fit)),e=s.move;for(let a=s.depth+1;a<=e.depth;a++){let d=e.node(a),b=d.type.contentMatch.fillBefore(d.content,!0,e.index(a));this.openFrontierNode(d.type,d.attrs,b)}return e}openFrontierNode(e,s=null,a){let d=this.frontier[this.depth];d.match=d.match.matchType(e),this.placed=addToFragment(this.placed,this.depth,Fragment.from(e.create(s,a))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let s=this.frontier.pop().match.fillBefore(Fragment.empty,!0);s.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,s))}}function dropFromFragment(o,e,s){return e==0?o.cutByIndex(s,o.childCount):o.replaceChild(0,o.firstChild.copy(dropFromFragment(o.firstChild.content,e-1,s)))}function addToFragment(o,e,s){return e==0?o.append(s):o.replaceChild(o.childCount-1,o.lastChild.copy(addToFragment(o.lastChild.content,e-1,s)))}function contentAt(o,e){for(let s=0;s<e;s++)o=o.firstChild.content;return o}function closeNodeStart(o,e,s){if(e<=0)return o;let a=o.content;return e>1&&(a=a.replaceChild(0,closeNodeStart(a.firstChild,e-1,a.childCount==1?s-1:0))),e>0&&(a=o.type.contentMatch.fillBefore(a).append(a),s<=0&&(a=a.append(o.type.contentMatch.matchFragment(a).fillBefore(Fragment.empty,!0)))),o.copy(a)}function contentAfterFits(o,e,s,a,d){let b=o.node(e),_=d?o.indexAfter(e):o.index(e);if(_==b.childCount&&!s.compatibleContent(b.type))return null;let _e=a.fillBefore(b.content,!0,_);return _e&&!invalidMarks(s,b.content,_)?_e:null}function invalidMarks(o,e,s){for(let a=s;a<e.childCount;a++)if(!o.allowsMarks(e.child(a).marks))return!0;return!1}function definesContent(o){return o.spec.defining||o.spec.definingForContent}function replaceRange(o,e,s,a){if(!a.size)return o.deleteRange(e,s);let d=o.doc.resolve(e),b=o.doc.resolve(s);if(fitsTrivially(d,b,a))return o.step(new ReplaceStep(e,s,a));let _=coveredDepths(d,o.doc.resolve(s));_[_.length-1]==0&&_.pop();let _e=-(d.depth+1);_.unshift(_e);for(let pt=d.depth,bt=d.pos-1;pt>0;pt--,bt--){let xt=d.node(pt).type.spec;if(xt.defining||xt.definingAsContext||xt.isolating)break;_.indexOf(pt)>-1?_e=pt:d.before(pt)==bt&&_.splice(1,0,-pt)}let nt=_.indexOf(_e),rt=[],ct=a.openStart;for(let pt=a.content,bt=0;;bt++){let xt=pt.firstChild;if(rt.push(xt),bt==a.openStart)break;pt=xt.content}for(let pt=ct-1;pt>=0;pt--){let bt=rt[pt],xt=definesContent(bt.type);if(xt&&!bt.sameMarkup(d.node(Math.abs(_e)-1)))ct=pt;else if(xt||!bt.type.isTextblock)break}for(let pt=a.openStart;pt>=0;pt--){let bt=(pt+ct+1)%(a.openStart+1),xt=rt[bt];if(xt)for(let wt=0;wt<_.length;wt++){let Tt=_[(wt+nt)%_.length],Rt=!0;Tt<0&&(Rt=!1,Tt=-Tt);let Mt=d.node(Tt-1),Et=d.index(Tt-1);if(Mt.canReplaceWith(Et,Et,xt.type,xt.marks))return o.replace(d.before(Tt),Rt?b.after(Tt):s,new Slice(closeFragment(a.content,0,a.openStart,bt),bt,a.openEnd))}}let dt=o.steps.length;for(let pt=_.length-1;pt>=0&&(o.replace(e,s,a),!(o.steps.length>dt));pt--){let bt=_[pt];bt<0||(e=d.before(bt),s=b.after(bt))}}function closeFragment(o,e,s,a,d){if(e<s){let b=o.firstChild;o=o.replaceChild(0,b.copy(closeFragment(b.content,e+1,s,a,b)))}if(e>a){let b=d.contentMatchAt(0),_=b.fillBefore(o).append(o);o=_.append(b.matchFragment(_).fillBefore(Fragment.empty,!0))}return o}function replaceRangeWith(o,e,s,a){if(!a.isInline&&e==s&&o.doc.resolve(e).parent.content.size){let d=insertPoint(o.doc,e,a.type);d!=null&&(e=s=d)}o.replaceRange(e,s,new Slice(Fragment.from(a),0,0))}function deleteRange$1(o,e,s){let a=o.doc.resolve(e),d=o.doc.resolve(s),b=coveredDepths(a,d);for(let _=0;_<b.length;_++){let _e=b[_],nt=_==b.length-1;if(nt&&_e==0||a.node(_e).type.contentMatch.validEnd)return o.delete(a.start(_e),d.end(_e));if(_e>0&&(nt||a.node(_e-1).canReplace(a.index(_e-1),d.indexAfter(_e-1))))return o.delete(a.before(_e),d.after(_e))}for(let _=1;_<=a.depth&&_<=d.depth;_++)if(e-a.start(_)==a.depth-_&&s>a.end(_)&&d.end(_)-s!=d.depth-_&&a.start(_-1)==d.start(_-1)&&a.node(_-1).canReplace(a.index(_-1),d.index(_-1)))return o.delete(a.before(_),s);o.delete(e,s)}function coveredDepths(o,e){let s=[],a=Math.min(o.depth,e.depth);for(let d=a;d>=0;d--){let b=o.start(d);if(b<o.pos-(o.depth-d)||e.end(d)>e.pos+(e.depth-d)||o.node(d).type.spec.isolating||e.node(d).type.spec.isolating)break;(b==e.start(d)||d==o.depth&&d==e.depth&&o.parent.inlineContent&&e.parent.inlineContent&&d&&e.start(d-1)==b-1)&&s.push(d)}return s}class AttrStep extends Step{constructor(e,s,a){super(),this.pos=e,this.attr=s,this.value=a}apply(e){let s=e.nodeAt(this.pos);if(!s)return StepResult.fail("No node at attribute step's position");let a=Object.create(null);for(let b in s.attrs)a[b]=s.attrs[b];a[this.attr]=this.value;let d=s.type.create(a,null,s.marks);return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(d),0,s.isLeaf?0:1))}getMap(){return StepMap.empty}invert(e){return new AttrStep(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new AttrStep(s.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,s){if(typeof s.pos!="number"||typeof s.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(s.pos,s.attr,s.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(e,s){super(),this.attr=e,this.value=s}apply(e){let s=Object.create(null);for(let d in e.attrs)s[d]=e.attrs[d];s[this.attr]=this.value;let a=e.type.create(s,e.content,e.marks);return StepResult.ok(a)}getMap(){return StepMap.empty}invert(e){return new DocAttrStep(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,s){if(typeof s.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(s.attr,s.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function o(e){let s=Error.call(this,e);return s.__proto__=o.prototype,s};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";class Transform{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let s=this.maybeStep(e);if(s.failed)throw new TransformError(s.failed);return this}maybeStep(e){let s=e.apply(this.doc);return s.failed||this.addStep(e,s.doc),s}get docChanged(){return this.steps.length>0}addStep(e,s){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=s}replace(e,s=e,a=Slice.empty){let d=replaceStep(this.doc,e,s,a);return d&&this.step(d),this}replaceWith(e,s,a){return this.replace(e,s,new Slice(Fragment.from(a),0,0))}delete(e,s){return this.replace(e,s,Slice.empty)}insert(e,s){return this.replaceWith(e,e,s)}replaceRange(e,s,a){return replaceRange(this,e,s,a),this}replaceRangeWith(e,s,a){return replaceRangeWith(this,e,s,a),this}deleteRange(e,s){return deleteRange$1(this,e,s),this}lift(e,s){return lift$2(this,e,s),this}join(e,s=1){return join(this,e,s),this}wrap(e,s){return wrap(this,e,s),this}setBlockType(e,s=e,a,d=null){return setBlockType$1(this,e,s,a,d),this}setNodeMarkup(e,s,a=null,d){return setNodeMarkup(this,e,s,a,d),this}setNodeAttribute(e,s,a){return this.step(new AttrStep(e,s,a)),this}setDocAttribute(e,s){return this.step(new DocAttrStep(e,s)),this}addNodeMark(e,s){return this.step(new AddNodeMarkStep(e,s)),this}removeNodeMark(e,s){if(!(s instanceof Mark$1)){let a=this.doc.nodeAt(e);if(!a)throw new RangeError("No node at position "+e);if(s=s.isInSet(a.marks),!s)return this}return this.step(new RemoveNodeMarkStep(e,s)),this}split(e,s=1,a){return split(this,e,s,a),this}addMark(e,s,a){return addMark(this,e,s,a),this}removeMark(e,s,a){return removeMark(this,e,s,a),this}clearIncompatible(e,s,a){return clearIncompatible(this,e,s,a),this}}const classesById=Object.create(null);class Selection{constructor(e,s,a){this.$anchor=e,this.$head=s,this.ranges=a||[new SelectionRange(e.min(s),e.max(s))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let s=0;s<e.length;s++)if(e[s].$from.pos!=e[s].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,s=Slice.empty){let a=s.content.lastChild,d=null;for(let _e=0;_e<s.openEnd;_e++)d=a,a=a.lastChild;let b=e.steps.length,_=this.ranges;for(let _e=0;_e<_.length;_e++){let{$from:nt,$to:rt}=_[_e],ct=e.mapping.slice(b);e.replaceRange(ct.map(nt.pos),ct.map(rt.pos),_e?Slice.empty:s),_e==0&&selectionToInsertionEnd$1(e,b,(a?a.isInline:d&&d.isTextblock)?-1:1)}}replaceWith(e,s){let a=e.steps.length,d=this.ranges;for(let b=0;b<d.length;b++){let{$from:_,$to:_e}=d[b],nt=e.mapping.slice(a),rt=nt.map(_.pos),ct=nt.map(_e.pos);b?e.deleteRange(rt,ct):(e.replaceRangeWith(rt,ct,s),selectionToInsertionEnd$1(e,a,s.isInline?-1:1))}}static findFrom(e,s,a=!1){let d=e.parent.inlineContent?new TextSelection(e):findSelectionIn(e.node(0),e.parent,e.pos,e.index(),s,a);if(d)return d;for(let b=e.depth-1;b>=0;b--){let _=s<0?findSelectionIn(e.node(0),e.node(b),e.before(b+1),e.index(b),s,a):findSelectionIn(e.node(0),e.node(b),e.after(b+1),e.index(b)+1,s,a);if(_)return _}return null}static near(e,s=1){return this.findFrom(e,s)||this.findFrom(e,-s)||new AllSelection(e.node(0))}static atStart(e){return findSelectionIn(e,e,0,0,1)||new AllSelection(e)}static atEnd(e){return findSelectionIn(e,e,e.content.size,e.childCount,-1)||new AllSelection(e)}static fromJSON(e,s){if(!s||!s.type)throw new RangeError("Invalid input for Selection.fromJSON");let a=classesById[s.type];if(!a)throw new RangeError(`No selection type ${s.type} defined`);return a.fromJSON(e,s)}static jsonID(e,s){if(e in classesById)throw new RangeError("Duplicate use of selection JSON ID "+e);return classesById[e]=s,s.prototype.jsonID=e,s}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(e,s){this.$from=e,this.$to=s}}let warnedAboutTextSelection=!1;function checkTextSelection(o){!warnedAboutTextSelection&&!o.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+o.parent.type.name+")"))}class TextSelection extends Selection{constructor(e,s=e){checkTextSelection(e),checkTextSelection(s),super(e,s)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,s){let a=e.resolve(s.map(this.head));if(!a.parent.inlineContent)return Selection.near(a);let d=e.resolve(s.map(this.anchor));return new TextSelection(d.parent.inlineContent?d:a,a)}replace(e,s=Slice.empty){if(super.replace(e,s),s==Slice.empty){let a=this.$from.marksAcross(this.$to);a&&e.ensureMarks(a)}}eq(e){return e instanceof TextSelection&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,s){if(typeof s.anchor!="number"||typeof s.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(e.resolve(s.anchor),e.resolve(s.head))}static create(e,s,a=s){let d=e.resolve(s);return new this(d,a==s?d:e.resolve(a))}static between(e,s,a){let d=e.pos-s.pos;if((!a||d)&&(a=d>=0?1:-1),!s.parent.inlineContent){let b=Selection.findFrom(s,a,!0)||Selection.findFrom(s,-a,!0);if(b)s=b.$head;else return Selection.near(s,a)}return e.parent.inlineContent||(d==0?e=s:(e=(Selection.findFrom(e,-a,!0)||Selection.findFrom(e,a,!0)).$anchor,e.pos<s.pos!=d<0&&(e=s))),new TextSelection(e,s)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(e,s){this.anchor=e,this.head=s}map(e){return new TextBookmark(e.map(this.anchor),e.map(this.head))}resolve(e){return TextSelection.between(e.resolve(this.anchor),e.resolve(this.head))}}class NodeSelection extends Selection{constructor(e){let s=e.nodeAfter,a=e.node(0).resolve(e.pos+s.nodeSize);super(e,a),this.node=s}map(e,s){let{deleted:a,pos:d}=s.mapResult(this.anchor),b=e.resolve(d);return a?Selection.near(b):new NodeSelection(b)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(e){return e instanceof NodeSelection&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(e,s){if(typeof s.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(e.resolve(s.anchor))}static create(e,s){return new NodeSelection(e.resolve(s))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(e){this.anchor=e}map(e){let{deleted:s,pos:a}=e.mapResult(this.anchor);return s?new TextBookmark(a,a):new NodeBookmark(a)}resolve(e){let s=e.resolve(this.anchor),a=s.nodeAfter;return a&&NodeSelection.isSelectable(a)?new NodeSelection(s):Selection.near(s)}}class AllSelection extends Selection{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,s=Slice.empty){if(s==Slice.empty){e.delete(0,e.doc.content.size);let a=Selection.atStart(e.doc);a.eq(e.selection)||e.setSelection(a)}else super.replace(e,s)}toJSON(){return{type:"all"}}static fromJSON(e){return new AllSelection(e)}map(e){return new AllSelection(e)}eq(e){return e instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(o){return new AllSelection(o)}};function findSelectionIn(o,e,s,a,d,b=!1){if(e.inlineContent)return TextSelection.create(o,s);for(let _=a-(d>0?0:1);d>0?_<e.childCount:_>=0;_+=d){let _e=e.child(_);if(_e.isAtom){if(!b&&NodeSelection.isSelectable(_e))return NodeSelection.create(o,s-(d<0?_e.nodeSize:0))}else{let nt=findSelectionIn(o,_e,s+d,d<0?_e.childCount:0,d,b);if(nt)return nt}s+=_e.nodeSize*d}return null}function selectionToInsertionEnd$1(o,e,s){let a=o.steps.length-1;if(a<e)return;let d=o.steps[a];if(!(d instanceof ReplaceStep||d instanceof ReplaceAroundStep))return;let b=o.mapping.maps[a],_;b.forEach((_e,nt,rt,ct)=>{_==null&&(_=ct)}),o.setSelection(Selection.near(o.doc.resolve(_),s))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=UPDATED_MARKS,this}ensureMarks(e){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(e,s){super.addStep(e,s),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,s=!0){let a=this.selection;return s&&(e=e.mark(this.storedMarks||(a.empty?a.$from.marks():a.$from.marksAcross(a.$to)||Mark$1.none))),a.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,s,a){let d=this.doc.type.schema;if(s==null)return e?this.replaceSelectionWith(d.text(e),!0):this.deleteSelection();{if(a==null&&(a=s),a=a??s,!e)return this.deleteRange(s,a);let b=this.storedMarks;if(!b){let _=this.doc.resolve(s);b=a==s?_.marks():_.marksAcross(this.doc.resolve(a))}return this.replaceRangeWith(s,a,d.text(e,b)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(e,s){return this.meta[typeof e=="string"?e:e.key]=s,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(o,e){return!e||!o?o:o.bind(e)}class FieldDesc{constructor(e,s,a){this.name=e,this.init=bind(s.init,a),this.apply=bind(s.apply,a)}}const baseFields=[new FieldDesc("doc",{init(o){return o.doc||o.schema.topNodeType.createAndFill()},apply(o){return o.doc}}),new FieldDesc("selection",{init(o,e){return o.selection||Selection.atStart(e.doc)},apply(o){return o.selection}}),new FieldDesc("storedMarks",{init(o){return o.storedMarks||null},apply(o,e,s,a){return a.selection.$cursor?o.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(o,e){return o.scrolledIntoView?e+1:e}})];class Configuration{constructor(e,s){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),s&&s.forEach(a=>{if(this.pluginsByKey[a.key])throw new RangeError("Adding different instances of a keyed plugin ("+a.key+")");this.plugins.push(a),this.pluginsByKey[a.key]=a,a.spec.state&&this.fields.push(new FieldDesc(a.key,a.spec.state,a))})}}class EditorState{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,s=-1){for(let a=0;a<this.config.plugins.length;a++)if(a!=s){let d=this.config.plugins[a];if(d.spec.filterTransaction&&!d.spec.filterTransaction.call(d,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let s=[e],a=this.applyInner(e),d=null;for(;;){let b=!1;for(let _=0;_<this.config.plugins.length;_++){let _e=this.config.plugins[_];if(_e.spec.appendTransaction){let nt=d?d[_].n:0,rt=d?d[_].state:this,ct=nt<s.length&&_e.spec.appendTransaction.call(_e,nt?s.slice(nt):s,rt,a);if(ct&&a.filterTransaction(ct,_)){if(ct.setMeta("appendedTransaction",e),!d){d=[];for(let dt=0;dt<this.config.plugins.length;dt++)d.push(dt<_?{state:a,n:s.length}:{state:this,n:0})}s.push(ct),a=a.applyInner(ct),b=!0}d&&(d[_]={state:a,n:s.length})}}if(!b)return{state:a,transactions:s}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let s=new EditorState(this.config),a=this.config.fields;for(let d=0;d<a.length;d++){let b=a[d];s[b.name]=b.apply(e,this[b.name],this,s)}return s}get tr(){return new Transaction(this)}static create(e){let s=new Configuration(e.doc?e.doc.type.schema:e.schema,e.plugins),a=new EditorState(s);for(let d=0;d<s.fields.length;d++)a[s.fields[d].name]=s.fields[d].init(e,a);return a}reconfigure(e){let s=new Configuration(this.schema,e.plugins),a=s.fields,d=new EditorState(s);for(let b=0;b<a.length;b++){let _=a[b].name;d[_]=this.hasOwnProperty(_)?this[_]:a[b].init(e,d)}return d}toJSON(e){let s={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(s.storedMarks=this.storedMarks.map(a=>a.toJSON())),e&&typeof e=="object")for(let a in e){if(a=="doc"||a=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let d=e[a],b=d.spec.state;b&&b.toJSON&&(s[a]=b.toJSON.call(d,this[d.key]))}return s}static fromJSON(e,s,a){if(!s)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let d=new Configuration(e.schema,e.plugins),b=new EditorState(d);return d.fields.forEach(_=>{if(_.name=="doc")b.doc=Node$2.fromJSON(e.schema,s.doc);else if(_.name=="selection")b.selection=Selection.fromJSON(b.doc,s.selection);else if(_.name=="storedMarks")s.storedMarks&&(b.storedMarks=s.storedMarks.map(e.schema.markFromJSON));else{if(a)for(let _e in a){let nt=a[_e],rt=nt.spec.state;if(nt.key==_.name&&rt&&rt.fromJSON&&Object.prototype.hasOwnProperty.call(s,_e)){b[_.name]=rt.fromJSON.call(nt,e,s[_e],b);return}}b[_.name]=_.init(e,b)}}),b}}function bindProps(o,e,s){for(let a in o){let d=o[a];d instanceof Function?d=d.bind(e):a=="handleDOMEvents"&&(d=bindProps(d,e,{})),s[a]=d}return s}class Plugin{constructor(e){this.spec=e,this.props={},e.props&&bindProps(e.props,this,this.props),this.key=e.key?e.key.key:createKey("plugin")}getState(e){return e[this.key]}}const keys=Object.create(null);function createKey(o){return o in keys?o+"$"+ ++keys[o]:(keys[o]=0,o+"$")}class PluginKey{constructor(e="key"){this.key=createKey(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const domIndex=function(o){for(var e=0;;e++)if(o=o.previousSibling,!o)return e},parentNode=function(o){let e=o.assignedSlot||o.parentNode;return e&&e.nodeType==11?e.host:e};let reusedRange=null;const textRange=function(o,e,s){let a=reusedRange||(reusedRange=document.createRange());return a.setEnd(o,s??o.nodeValue.length),a.setStart(o,e||0),a},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(o,e,s,a){return s&&(scanFor(o,e,s,a,-1)||scanFor(o,e,s,a,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(o,e,s,a,d){for(;;){if(o==s&&e==a)return!0;if(e==(d<0?0:nodeSize(o))){let b=o.parentNode;if(!b||b.nodeType!=1||hasBlockDesc(o)||atomElements.test(o.nodeName)||o.contentEditable=="false")return!1;e=domIndex(o)+(d<0?0:1),o=b}else if(o.nodeType==1){if(o=o.childNodes[e+(d<0?-1:0)],o.contentEditable=="false")return!1;e=d<0?nodeSize(o):0}else return!1}}function nodeSize(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function textNodeBefore$1(o,e){for(;;){if(o.nodeType==3&&e)return o;if(o.nodeType==1&&e>0){if(o.contentEditable=="false")return null;o=o.childNodes[e-1],e=nodeSize(o)}else if(o.parentNode&&!hasBlockDesc(o))e=domIndex(o),o=o.parentNode;else return null}}function textNodeAfter$1(o,e){for(;;){if(o.nodeType==3&&e<o.nodeValue.length)return o;if(o.nodeType==1&&e<o.childNodes.length){if(o.contentEditable=="false")return null;o=o.childNodes[e],e=0}else if(o.parentNode&&!hasBlockDesc(o))e=domIndex(o)+1,o=o.parentNode;else return null}}function isOnEdge(o,e,s){for(let a=e==0,d=e==nodeSize(o);a||d;){if(o==s)return!0;let b=domIndex(o);if(o=o.parentNode,!o)return!1;a=a&&b==0,d=d&&b==nodeSize(o)}}function hasBlockDesc(o){let e;for(let s=o;s&&!(e=s.pmViewDesc);s=s.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==o||e.contentDOM==o)}const selectionCollapsed=function(o){return o.focusNode&&isEquivalentPosition(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)};function keyEvent(o,e){let s=document.createEvent("Event");return s.initEvent("keydown",!0,!0),s.keyCode=o,s.key=s.code=e,s}function deepActiveElement(o){let e=o.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function caretFromPoint(o,e,s){if(o.caretPositionFromPoint)try{let a=o.caretPositionFromPoint(e,s);if(a)return{node:a.offsetNode,offset:Math.min(nodeSize(a.offsetNode),a.offset)}}catch{}if(o.caretRangeFromPoint){let a=o.caretRangeFromPoint(e,s);if(a)return{node:a.startContainer,offset:Math.min(nodeSize(a.startContainer),a.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$1=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$1&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$1&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$1&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(o){let e=o.defaultView&&o.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:o.documentElement.clientWidth,top:0,bottom:o.documentElement.clientHeight}}function getSide(o,e){return typeof o=="number"?o:o[e]}function clientRect(o){let e=o.getBoundingClientRect(),s=e.width/o.offsetWidth||1,a=e.height/o.offsetHeight||1;return{left:e.left,right:e.left+o.clientWidth*s,top:e.top,bottom:e.top+o.clientHeight*a}}function scrollRectIntoView(o,e,s){let a=o.someProp("scrollThreshold")||0,d=o.someProp("scrollMargin")||5,b=o.dom.ownerDocument;for(let _=s||o.dom;_;_=parentNode(_)){if(_.nodeType!=1)continue;let _e=_,nt=_e==b.body,rt=nt?windowRect(b):clientRect(_e),ct=0,dt=0;if(e.top<rt.top+getSide(a,"top")?dt=-(rt.top-e.top+getSide(d,"top")):e.bottom>rt.bottom-getSide(a,"bottom")&&(dt=e.bottom-e.top>rt.bottom-rt.top?e.top+getSide(d,"top")-rt.top:e.bottom-rt.bottom+getSide(d,"bottom")),e.left<rt.left+getSide(a,"left")?ct=-(rt.left-e.left+getSide(d,"left")):e.right>rt.right-getSide(a,"right")&&(ct=e.right-rt.right+getSide(d,"right")),ct||dt)if(nt)b.defaultView.scrollBy(ct,dt);else{let pt=_e.scrollLeft,bt=_e.scrollTop;dt&&(_e.scrollTop+=dt),ct&&(_e.scrollLeft+=ct);let xt=_e.scrollLeft-pt,wt=_e.scrollTop-bt;e={left:e.left-xt,top:e.top-wt,right:e.right-xt,bottom:e.bottom-wt}}if(nt||/^(fixed|sticky)$/.test(getComputedStyle(_).position))break}}function storeScrollPos(o){let e=o.dom.getBoundingClientRect(),s=Math.max(0,e.top),a,d;for(let b=(e.left+e.right)/2,_=s+1;_<Math.min(innerHeight,e.bottom);_+=5){let _e=o.root.elementFromPoint(b,_);if(!_e||_e==o.dom||!o.dom.contains(_e))continue;let nt=_e.getBoundingClientRect();if(nt.top>=s-20){a=_e,d=nt.top;break}}return{refDOM:a,refTop:d,stack:scrollStack(o.dom)}}function scrollStack(o){let e=[],s=o.ownerDocument;for(let a=o;a&&(e.push({dom:a,top:a.scrollTop,left:a.scrollLeft}),o!=s);a=parentNode(a));return e}function resetScrollPos({refDOM:o,refTop:e,stack:s}){let a=o?o.getBoundingClientRect().top:0;restoreScrollStack(s,a==0?0:a-e)}function restoreScrollStack(o,e){for(let s=0;s<o.length;s++){let{dom:a,top:d,left:b}=o[s];a.scrollTop!=d+e&&(a.scrollTop=d+e),a.scrollLeft!=b&&(a.scrollLeft=b)}}let preventScrollSupported=null;function focusPreventScroll(o){if(o.setActive)return o.setActive();if(preventScrollSupported)return o.focus(preventScrollSupported);let e=scrollStack(o);o.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(e,0))}function findOffsetInNode(o,e){let s,a=2e8,d,b=0,_=e.top,_e=e.top,nt,rt;for(let ct=o.firstChild,dt=0;ct;ct=ct.nextSibling,dt++){let pt;if(ct.nodeType==1)pt=ct.getClientRects();else if(ct.nodeType==3)pt=textRange(ct).getClientRects();else continue;for(let bt=0;bt<pt.length;bt++){let xt=pt[bt];if(xt.top<=_&&xt.bottom>=_e){_=Math.max(xt.bottom,_),_e=Math.min(xt.top,_e);let wt=xt.left>e.left?xt.left-e.left:xt.right<e.left?e.left-xt.right:0;if(wt<a){s=ct,a=wt,d=wt&&s.nodeType==3?{left:xt.right<e.left?xt.right:xt.left,top:e.top}:e,ct.nodeType==1&&wt&&(b=dt+(e.left>=(xt.left+xt.right)/2?1:0));continue}}else xt.top>e.top&&!nt&&xt.left<=e.left&&xt.right>=e.left&&(nt=ct,rt={left:Math.max(xt.left,Math.min(xt.right,e.left)),top:xt.top});!s&&(e.left>=xt.right&&e.top>=xt.top||e.left>=xt.left&&e.top>=xt.bottom)&&(b=dt+1)}}return!s&&nt&&(s=nt,d=rt,a=0),s&&s.nodeType==3?findOffsetInText(s,d):!s||a&&s.nodeType==1?{node:o,offset:b}:findOffsetInNode(s,d)}function findOffsetInText(o,e){let s=o.nodeValue.length,a=document.createRange();for(let d=0;d<s;d++){a.setEnd(o,d+1),a.setStart(o,d);let b=singleRect(a,1);if(b.top!=b.bottom&&inRect(e,b))return{node:o,offset:d+(e.left>=(b.left+b.right)/2?1:0)}}return{node:o,offset:0}}function inRect(o,e){return o.left>=e.left-1&&o.left<=e.right+1&&o.top>=e.top-1&&o.top<=e.bottom+1}function targetKludge(o,e){let s=o.parentNode;return s&&/^li$/i.test(s.nodeName)&&e.left<o.getBoundingClientRect().left?s:o}function posFromElement(o,e,s){let{node:a,offset:d}=findOffsetInNode(e,s),b=-1;if(a.nodeType==1&&!a.firstChild){let _=a.getBoundingClientRect();b=_.left!=_.right&&s.left>(_.left+_.right)/2?1:-1}return o.docView.posFromDOM(a,d,b)}function posFromCaret(o,e,s,a){let d=-1;for(let b=e,_=!1;b!=o.dom;){let _e=o.docView.nearestDesc(b,!0);if(!_e)return null;if(_e.dom.nodeType==1&&(_e.node.isBlock&&_e.parent||!_e.contentDOM)){let nt=_e.dom.getBoundingClientRect();if(_e.node.isBlock&&_e.parent&&(!_&&nt.left>a.left||nt.top>a.top?d=_e.posBefore:(!_&&nt.right<a.left||nt.bottom<a.top)&&(d=_e.posAfter),_=!0),!_e.contentDOM&&d<0&&!_e.node.isText)return(_e.node.isBlock?a.top<(nt.top+nt.bottom)/2:a.left<(nt.left+nt.right)/2)?_e.posBefore:_e.posAfter}b=_e.dom.parentNode}return d>-1?d:o.docView.posFromDOM(e,s,-1)}function elementFromPoint(o,e,s){let a=o.childNodes.length;if(a&&s.top<s.bottom)for(let d=Math.max(0,Math.min(a-1,Math.floor(a*(e.top-s.top)/(s.bottom-s.top))-2)),b=d;;){let _=o.childNodes[b];if(_.nodeType==1){let _e=_.getClientRects();for(let nt=0;nt<_e.length;nt++){let rt=_e[nt];if(inRect(e,rt))return elementFromPoint(_,e,rt)}}if((b=(b+1)%a)==d)break}return o}function posAtCoords(o,e){let s=o.dom.ownerDocument,a,d=0,b=caretFromPoint(s,e.left,e.top);b&&({node:a,offset:d}=b);let _=(o.root.elementFromPoint?o.root:s).elementFromPoint(e.left,e.top),_e;if(!_||!o.dom.contains(_.nodeType!=1?_.parentNode:_)){let rt=o.dom.getBoundingClientRect();if(!inRect(e,rt)||(_=elementFromPoint(o.dom,e,rt),!_))return null}if(safari)for(let rt=_;a&&rt;rt=parentNode(rt))rt.draggable&&(a=void 0);if(_=targetKludge(_,e),a){if(gecko&&a.nodeType==1&&(d=Math.min(d,a.childNodes.length),d<a.childNodes.length)){let ct=a.childNodes[d],dt;ct.nodeName=="IMG"&&(dt=ct.getBoundingClientRect()).right<=e.left&&dt.bottom>e.top&&d++}let rt;webkit&&d&&a.nodeType==1&&(rt=a.childNodes[d-1]).nodeType==1&&rt.contentEditable=="false"&&rt.getBoundingClientRect().top>=e.top&&d--,a==o.dom&&d==a.childNodes.length-1&&a.lastChild.nodeType==1&&e.top>a.lastChild.getBoundingClientRect().bottom?_e=o.state.doc.content.size:(d==0||a.nodeType!=1||a.childNodes[d-1].nodeName!="BR")&&(_e=posFromCaret(o,a,d,e))}_e==null&&(_e=posFromElement(o,_,e));let nt=o.docView.nearestDesc(_,!0);return{pos:_e,inside:nt?nt.posAtStart-nt.border:-1}}function nonZero(o){return o.top<o.bottom||o.left<o.right}function singleRect(o,e){let s=o.getClientRects();if(s.length){let a=s[e<0?0:s.length-1];if(nonZero(a))return a}return Array.prototype.find.call(s,nonZero)||o.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(o,e,s){let{node:a,offset:d,atom:b}=o.docView.domFromPos(e,s<0?-1:1),_=webkit||gecko;if(a.nodeType==3)if(_&&(BIDI.test(a.nodeValue)||(s<0?!d:d==a.nodeValue.length))){let nt=singleRect(textRange(a,d,d),s);if(gecko&&d&&/\s/.test(a.nodeValue[d-1])&&d<a.nodeValue.length){let rt=singleRect(textRange(a,d-1,d-1),-1);if(rt.top==nt.top){let ct=singleRect(textRange(a,d,d+1),-1);if(ct.top!=nt.top)return flattenV(ct,ct.left<rt.left)}}return nt}else{let nt=d,rt=d,ct=s<0?1:-1;return s<0&&!d?(rt++,ct=-1):s>=0&&d==a.nodeValue.length?(nt--,ct=1):s<0?nt--:rt++,flattenV(singleRect(textRange(a,nt,rt),ct),ct<0)}if(!o.state.doc.resolve(e-(b||0)).parent.inlineContent){if(b==null&&d&&(s<0||d==nodeSize(a))){let nt=a.childNodes[d-1];if(nt.nodeType==1)return flattenH(nt.getBoundingClientRect(),!1)}if(b==null&&d<nodeSize(a)){let nt=a.childNodes[d];if(nt.nodeType==1)return flattenH(nt.getBoundingClientRect(),!0)}return flattenH(a.getBoundingClientRect(),s>=0)}if(b==null&&d&&(s<0||d==nodeSize(a))){let nt=a.childNodes[d-1],rt=nt.nodeType==3?textRange(nt,nodeSize(nt)-(_?0:1)):nt.nodeType==1&&(nt.nodeName!="BR"||!nt.nextSibling)?nt:null;if(rt)return flattenV(singleRect(rt,1),!1)}if(b==null&&d<nodeSize(a)){let nt=a.childNodes[d];for(;nt.pmViewDesc&&nt.pmViewDesc.ignoreForCoords;)nt=nt.nextSibling;let rt=nt?nt.nodeType==3?textRange(nt,0,_?0:1):nt.nodeType==1?nt:null:null;if(rt)return flattenV(singleRect(rt,-1),!0)}return flattenV(singleRect(a.nodeType==3?textRange(a):a,-s),s>=0)}function flattenV(o,e){if(o.width==0)return o;let s=e?o.left:o.right;return{top:o.top,bottom:o.bottom,left:s,right:s}}function flattenH(o,e){if(o.height==0)return o;let s=e?o.top:o.bottom;return{top:s,bottom:s,left:o.left,right:o.right}}function withFlushedState(o,e,s){let a=o.state,d=o.root.activeElement;a!=e&&o.updateState(e),d!=o.dom&&o.focus();try{return s()}finally{a!=e&&o.updateState(a),d!=o.dom&&d&&d.focus()}}function endOfTextblockVertical(o,e,s){let a=e.selection,d=s=="up"?a.$from:a.$to;return withFlushedState(o,e,()=>{let{node:b}=o.docView.domFromPos(d.pos,s=="up"?-1:1);for(;;){let _e=o.docView.nearestDesc(b,!0);if(!_e)break;if(_e.node.isBlock){b=_e.contentDOM||_e.dom;break}b=_e.dom.parentNode}let _=coordsAtPos(o,d.pos,1);for(let _e=b.firstChild;_e;_e=_e.nextSibling){let nt;if(_e.nodeType==1)nt=_e.getClientRects();else if(_e.nodeType==3)nt=textRange(_e,0,_e.nodeValue.length).getClientRects();else continue;for(let rt=0;rt<nt.length;rt++){let ct=nt[rt];if(ct.bottom>ct.top+1&&(s=="up"?_.top-ct.top>(ct.bottom-_.top)*2:ct.bottom-_.bottom>(_.bottom-ct.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(o,e,s){let{$head:a}=e.selection;if(!a.parent.isTextblock)return!1;let d=a.parentOffset,b=!d,_=d==a.parent.content.size,_e=o.domSelection();return _e?!maybeRTL.test(a.parent.textContent)||!_e.modify?s=="left"||s=="backward"?b:_:withFlushedState(o,e,()=>{let{focusNode:nt,focusOffset:rt,anchorNode:ct,anchorOffset:dt}=o.domSelectionRange(),pt=_e.caretBidiLevel;_e.modify("move",s,"character");let bt=a.depth?o.docView.domAfterPos(a.before()):o.dom,{focusNode:xt,focusOffset:wt}=o.domSelectionRange(),Tt=xt&&!bt.contains(xt.nodeType==1?xt:xt.parentNode)||nt==xt&&rt==wt;try{_e.collapse(ct,dt),nt&&(nt!=ct||rt!=dt)&&_e.extend&&_e.extend(nt,rt)}catch{}return pt!=null&&(_e.caretBidiLevel=pt),Tt}):a.pos==a.start()||a.pos==a.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(o,e,s){return cachedState==e&&cachedDir==s?cachedResult:(cachedState=e,cachedDir=s,cachedResult=s=="up"||s=="down"?endOfTextblockVertical(o,e,s):endOfTextblockHorizontal(o,e,s))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(e,s,a,d){this.parent=e,this.children=s,this.dom=a,this.contentDOM=d,this.dirty=NOT_DIRTY,a.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,s,a){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let s=0;s<this.children.length;s++)e+=this.children[s].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let s=0,a=this.posAtStart;;s++){let d=this.children[s];if(d==e)return a;a+=d.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,s,a){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(a<0){let b,_;if(e==this.contentDOM)b=e.childNodes[s-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;b=e.previousSibling}for(;b&&!((_=b.pmViewDesc)&&_.parent==this);)b=b.previousSibling;return b?this.posBeforeChild(_)+_.size:this.posAtStart}else{let b,_;if(e==this.contentDOM)b=e.childNodes[s];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;b=e.nextSibling}for(;b&&!((_=b.pmViewDesc)&&_.parent==this);)b=b.nextSibling;return b?this.posBeforeChild(_):this.posAtEnd}let d;if(e==this.dom&&this.contentDOM)d=s>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))d=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(s==0)for(let b=e;;b=b.parentNode){if(b==this.dom){d=!1;break}if(b.previousSibling)break}if(d==null&&s==e.childNodes.length)for(let b=e;;b=b.parentNode){if(b==this.dom){d=!0;break}if(b.nextSibling)break}}return d??a>0?this.posAtEnd:this.posAtStart}nearestDesc(e,s=!1){for(let a=!0,d=e;d;d=d.parentNode){let b=this.getDesc(d),_;if(b&&(!s||b.node))if(a&&(_=b.nodeDOM)&&!(_.nodeType==1?_.contains(e.nodeType==1?e:e.parentNode):_==e))a=!1;else return b}}getDesc(e){let s=e.pmViewDesc;for(let a=s;a;a=a.parent)if(a==this)return s}posFromDOM(e,s,a){for(let d=e;d;d=d.parentNode){let b=this.getDesc(d);if(b)return b.localPosFromDOM(e,s,a)}return-1}descAt(e){for(let s=0,a=0;s<this.children.length;s++){let d=this.children[s],b=a+d.size;if(a==e&&b!=a){for(;!d.border&&d.children.length;)d=d.children[0];return d}if(e<b)return d.descAt(e-a-d.border);a=b}}domFromPos(e,s){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let a=0,d=0;for(let b=0;a<this.children.length;a++){let _=this.children[a],_e=b+_.size;if(_e>e||_ instanceof TrailingHackViewDesc){d=e-b;break}b=_e}if(d)return this.children[a].domFromPos(d-this.children[a].border,s);for(let b;a&&!(b=this.children[a-1]).size&&b instanceof WidgetViewDesc&&b.side>=0;a--);if(s<=0){let b,_=!0;for(;b=a?this.children[a-1]:null,!(!b||b.dom.parentNode==this.contentDOM);a--,_=!1);return b&&s&&_&&!b.border&&!b.domAtom?b.domFromPos(b.size,s):{node:this.contentDOM,offset:b?domIndex(b.dom)+1:0}}else{let b,_=!0;for(;b=a<this.children.length?this.children[a]:null,!(!b||b.dom.parentNode==this.contentDOM);a++,_=!1);return b&&_&&!b.border&&!b.domAtom?b.domFromPos(0,s):{node:this.contentDOM,offset:b?domIndex(b.dom):this.contentDOM.childNodes.length}}}parseRange(e,s,a=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:s,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let d=-1,b=-1;for(let _=a,_e=0;;_e++){let nt=this.children[_e],rt=_+nt.size;if(d==-1&&e<=rt){let ct=_+nt.border;if(e>=ct&&s<=rt-nt.border&&nt.node&&nt.contentDOM&&this.contentDOM.contains(nt.contentDOM))return nt.parseRange(e,s,ct);e=_;for(let dt=_e;dt>0;dt--){let pt=this.children[dt-1];if(pt.size&&pt.dom.parentNode==this.contentDOM&&!pt.emptyChildAt(1)){d=domIndex(pt.dom)+1;break}e-=pt.size}d==-1&&(d=0)}if(d>-1&&(rt>s||_e==this.children.length-1)){s=rt;for(let ct=_e+1;ct<this.children.length;ct++){let dt=this.children[ct];if(dt.size&&dt.dom.parentNode==this.contentDOM&&!dt.emptyChildAt(-1)){b=domIndex(dt.dom);break}s+=dt.size}b==-1&&(b=this.contentDOM.childNodes.length);break}_=rt}return{node:this.contentDOM,from:e,to:s,fromOffset:d,toOffset:b}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let s=this.children[e<0?0:this.children.length-1];return s.size==0||s.emptyChildAt(e)}domAfterPos(e){let{node:s,offset:a}=this.domFromPos(e,0);if(s.nodeType!=1||a==s.childNodes.length)throw new RangeError("No node after pos "+e);return s.childNodes[a]}setSelection(e,s,a,d=!1){let b=Math.min(e,s),_=Math.max(e,s);for(let pt=0,bt=0;pt<this.children.length;pt++){let xt=this.children[pt],wt=bt+xt.size;if(b>bt&&_<wt)return xt.setSelection(e-bt-xt.border,s-bt-xt.border,a,d);bt=wt}let _e=this.domFromPos(e,e?-1:1),nt=s==e?_e:this.domFromPos(s,s?-1:1),rt=a.getSelection(),ct=!1;if((gecko||safari)&&e==s){let{node:pt,offset:bt}=_e;if(pt.nodeType==3){if(ct=!!(bt&&pt.nodeValue[bt-1]==`
`),ct&&bt==pt.nodeValue.length)for(let xt=pt,wt;xt;xt=xt.parentNode){if(wt=xt.nextSibling){wt.nodeName=="BR"&&(_e=nt={node:wt.parentNode,offset:domIndex(wt)+1});break}let Tt=xt.pmViewDesc;if(Tt&&Tt.node&&Tt.node.isBlock)break}}else{let xt=pt.childNodes[bt-1];ct=xt&&(xt.nodeName=="BR"||xt.contentEditable=="false")}}if(gecko&&rt.focusNode&&rt.focusNode!=nt.node&&rt.focusNode.nodeType==1){let pt=rt.focusNode.childNodes[rt.focusOffset];pt&&pt.contentEditable=="false"&&(d=!0)}if(!(d||ct&&safari)&&isEquivalentPosition(_e.node,_e.offset,rt.anchorNode,rt.anchorOffset)&&isEquivalentPosition(nt.node,nt.offset,rt.focusNode,rt.focusOffset))return;let dt=!1;if((rt.extend||e==s)&&!ct){rt.collapse(_e.node,_e.offset);try{e!=s&&rt.extend(nt.node,nt.offset),dt=!0}catch{}}if(!dt){if(e>s){let bt=_e;_e=nt,nt=bt}let pt=document.createRange();pt.setEnd(nt.node,nt.offset),pt.setStart(_e.node,_e.offset),rt.removeAllRanges(),rt.addRange(pt)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,s){for(let a=0,d=0;d<this.children.length;d++){let b=this.children[d],_=a+b.size;if(a==_?e<=_&&s>=a:e<_&&s>a){let _e=a+b.border,nt=_-b.border;if(e>=_e&&s<=nt){this.dirty=e==a||s==_?CONTENT_DIRTY:CHILD_DIRTY,e==_e&&s==nt&&(b.contentLost||b.dom.parentNode!=this.contentDOM)?b.dirty=NODE_DIRTY:b.markDirty(e-_e,s-_e);return}else b.dirty=b.dom==b.contentDOM&&b.dom.parentNode==this.contentDOM&&!b.children.length?CONTENT_DIRTY:NODE_DIRTY}a=_}this.dirty=CONTENT_DIRTY}markParentsDirty(){let e=1;for(let s=this.parent;s;s=s.parent,e++){let a=e==1?CONTENT_DIRTY:CHILD_DIRTY;s.dirty<a&&(s.dirty=a)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class WidgetViewDesc extends ViewDesc{constructor(e,s,a,d){let b,_=s.type.toDOM;if(typeof _=="function"&&(_=_(a,()=>{if(!b)return d;if(b.parent)return b.parent.posBeforeChild(b)})),!s.type.spec.raw){if(_.nodeType!=1){let _e=document.createElement("span");_e.appendChild(_),_=_e}_.contentEditable="false",_.classList.add("ProseMirror-widget")}super(e,[],_,null),this.widget=s,this.widget=s,b=this}matchesWidget(e){return this.dirty==NOT_DIRTY&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let s=this.widget.spec.stopEvent;return s?s(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(e,s,a,d){super(e,[],s,null),this.textDOM=a,this.text=d}get size(){return this.text.length}localPosFromDOM(e,s){return e!=this.textDOM?this.posAtStart+(s?this.size:0):this.posAtStart+s}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class MarkViewDesc extends ViewDesc{constructor(e,s,a,d,b){super(e,[],a,d),this.mark=s,this.spec=b}static create(e,s,a,d){let b=d.nodeViews[s.type.name],_=b&&b(s,d,a);return(!_||!_.dom)&&(_=DOMSerializer.renderSpec(document,s.type.spec.toDOM(s,a),null,s.attrs)),new MarkViewDesc(e,s,_.dom,_.contentDOM||_.dom,_)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=NODE_DIRTY&&this.mark.eq(e)}markDirty(e,s){if(super.markDirty(e,s),this.dirty!=NOT_DIRTY){let a=this.parent;for(;!a.node;)a=a.parent;a.dirty<this.dirty&&(a.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(e,s,a){let d=MarkViewDesc.create(this.parent,this.mark,!0,a),b=this.children,_=this.size;s<_&&(b=replaceNodes(b,s,_,a)),e>0&&(b=replaceNodes(b,0,e,a));for(let _e=0;_e<b.length;_e++)b[_e].parent=d;return d.children=b,d}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(e,s,a,d,b,_,_e,nt,rt){super(e,[],b,_),this.node=s,this.outerDeco=a,this.innerDeco=d,this.nodeDOM=_e}static create(e,s,a,d,b,_){let _e=b.nodeViews[s.type.name],nt,rt=_e&&_e(s,b,()=>{if(!nt)return _;if(nt.parent)return nt.parent.posBeforeChild(nt)},a,d),ct=rt&&rt.dom,dt=rt&&rt.contentDOM;if(s.isText){if(!ct)ct=document.createTextNode(s.text);else if(ct.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else ct||({dom:ct,contentDOM:dt}=DOMSerializer.renderSpec(document,s.type.spec.toDOM(s),null,s.attrs));!dt&&!s.isText&&ct.nodeName!="BR"&&(ct.hasAttribute("contenteditable")||(ct.contentEditable="false"),s.type.spec.draggable&&(ct.draggable=!0));let pt=ct;return ct=applyOuterDeco(ct,a,s),rt?nt=new CustomNodeViewDesc(e,s,a,d,ct,dt||null,pt,rt,b,_+1):s.isText?new TextViewDesc(e,s,a,d,ct,pt,b):new NodeViewDesc(e,s,a,d,ct,dt||null,pt,b,_+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let s=this.children.length-1;s>=0;s--){let a=this.children[s];if(this.dom.contains(a.dom.parentNode)){e.contentElement=a.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Fragment.empty)}return e}matchesNode(e,s,a){return this.dirty==NOT_DIRTY&&e.eq(this.node)&&sameOuterDeco(s,this.outerDeco)&&a.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,s){let a=this.node.inlineContent,d=s,b=e.composing?this.localCompositionInfo(e,s):null,_=b&&b.pos>-1?b:null,_e=b&&b.pos<0,nt=new ViewTreeUpdater(this,_&&_.node,e);iterDeco(this.node,this.innerDeco,(rt,ct,dt)=>{rt.spec.marks?nt.syncToMarks(rt.spec.marks,a,e):rt.type.side>=0&&!dt&&nt.syncToMarks(ct==this.node.childCount?Mark$1.none:this.node.child(ct).marks,a,e),nt.placeWidget(rt,e,d)},(rt,ct,dt,pt)=>{nt.syncToMarks(rt.marks,a,e);let bt;nt.findNodeMatch(rt,ct,dt,pt)||_e&&e.state.selection.from>d&&e.state.selection.to<d+rt.nodeSize&&(bt=nt.findIndexWithChild(b.node))>-1&&nt.updateNodeAt(rt,ct,dt,bt,e)||nt.updateNextNode(rt,ct,dt,e,pt,d)||nt.addNode(rt,ct,dt,e,d),d+=rt.nodeSize}),nt.syncToMarks([],a,e),this.node.isTextblock&&nt.addTextblockHacks(),nt.destroyRest(),(nt.changed||this.dirty==CONTENT_DIRTY)&&(_&&this.protectLocalComposition(e,_),renderDescs(this.contentDOM,this.children,e),ios&&iosHacks(this.dom))}localCompositionInfo(e,s){let{from:a,to:d}=e.state.selection;if(!(e.state.selection instanceof TextSelection)||a<s||d>s+this.node.content.size)return null;let b=e.input.compositionNode;if(!b||!this.dom.contains(b.parentNode))return null;if(this.node.inlineContent){let _=b.nodeValue,_e=findTextInFragment(this.node.content,_,a-s,d-s);return _e<0?null:{node:b,pos:_e,text:_}}else return{node:b,pos:-1,text:""}}protectLocalComposition(e,{node:s,pos:a,text:d}){if(this.getDesc(s))return;let b=s;for(;b.parentNode!=this.contentDOM;b=b.parentNode){for(;b.previousSibling;)b.parentNode.removeChild(b.previousSibling);for(;b.nextSibling;)b.parentNode.removeChild(b.nextSibling);b.pmViewDesc&&(b.pmViewDesc=void 0)}let _=new CompositionViewDesc(this,b,s,d);e.input.compositionNodes.push(_),this.children=replaceNodes(this.children,a,a+d.length,e,_)}update(e,s,a,d){return this.dirty==NODE_DIRTY||!e.sameMarkup(this.node)?!1:(this.updateInner(e,s,a,d),!0)}updateInner(e,s,a,d){this.updateOuterDeco(s),this.node=e,this.innerDeco=a,this.contentDOM&&this.updateChildren(d,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(e){if(sameOuterDeco(e,this.outerDeco))return;let s=this.nodeDOM.nodeType!=1,a=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,s),computeOuterDeco(e,this.node,s)),this.dom!=a&&(a.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(o,e,s,a,d){applyOuterDeco(a,e,o);let b=new NodeViewDesc(void 0,o,e,s,a,a,a,d,0);return b.contentDOM&&b.updateChildren(d,0),b}class TextViewDesc extends NodeViewDesc{constructor(e,s,a,d,b,_,_e){super(e,s,a,d,b,null,_,_e,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,s,a,d){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(s),(this.dirty!=NOT_DIRTY||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,d.trackWrites==this.nodeDOM&&(d.trackWrites=null)),this.node=e,this.dirty=NOT_DIRTY,!0)}inParent(){let e=this.parent.contentDOM;for(let s=this.nodeDOM;s;s=s.parentNode)if(s==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,s,a){return e==this.nodeDOM?this.posAtStart+Math.min(s,this.node.text.length):super.localPosFromDOM(e,s,a)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,s,a){let d=this.node.cut(e,s),b=document.createTextNode(d.text);return new TextViewDesc(this.parent,d,this.outerDeco,this.innerDeco,b,b,a)}markDirty(e,s){super.markDirty(e,s),this.dom!=this.nodeDOM&&(e==0||s==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(e){return this.node.text==e}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==NOT_DIRTY&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(e,s,a,d,b,_,_e,nt,rt,ct){super(e,s,a,d,b,_,_e,rt,ct),this.spec=nt}update(e,s,a,d){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let b=this.spec.update(e,s,a);return b&&this.updateInner(e,s,a,d),b}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,s,a,d)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,s,a,d){this.spec.setSelection?this.spec.setSelection(e,s,a):super.setSelection(e,s,a,d)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function renderDescs(o,e,s){let a=o.firstChild,d=!1;for(let b=0;b<e.length;b++){let _=e[b],_e=_.dom;if(_e.parentNode==o){for(;_e!=a;)a=rm(a),d=!0;a=a.nextSibling}else d=!0,o.insertBefore(_e,a);if(_ instanceof MarkViewDesc){let nt=a?a.previousSibling:o.lastChild;renderDescs(_.contentDOM,_.children,s),a=nt?nt.nextSibling:o.firstChild}}for(;a;)a=rm(a),d=!0;d&&s.trackWrites==o&&(s.trackWrites=null)}const OuterDecoLevel=function(o){o&&(this.nodeName=o)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(o,e,s){if(o.length==0)return noDeco;let a=s?noDeco[0]:new OuterDecoLevel,d=[a];for(let b=0;b<o.length;b++){let _=o[b].type.attrs;if(_){_.nodeName&&d.push(a=new OuterDecoLevel(_.nodeName));for(let _e in _){let nt=_[_e];nt!=null&&(s&&d.length==1&&d.push(a=new OuterDecoLevel(e.isInline?"span":"div")),_e=="class"?a.class=(a.class?a.class+" ":"")+nt:_e=="style"?a.style=(a.style?a.style+";":"")+nt:_e!="nodeName"&&(a[_e]=nt))}}}return d}function patchOuterDeco(o,e,s,a){if(s==noDeco&&a==noDeco)return e;let d=e;for(let b=0;b<a.length;b++){let _=a[b],_e=s[b];if(b){let nt;_e&&_e.nodeName==_.nodeName&&d!=o&&(nt=d.parentNode)&&nt.nodeName.toLowerCase()==_.nodeName||(nt=document.createElement(_.nodeName),nt.pmIsDeco=!0,nt.appendChild(d),_e=noDeco[0]),d=nt}patchAttributes(d,_e||noDeco[0],_)}return d}function patchAttributes(o,e,s){for(let a in e)a!="class"&&a!="style"&&a!="nodeName"&&!(a in s)&&o.removeAttribute(a);for(let a in s)a!="class"&&a!="style"&&a!="nodeName"&&s[a]!=e[a]&&o.setAttribute(a,s[a]);if(e.class!=s.class){let a=e.class?e.class.split(" ").filter(Boolean):[],d=s.class?s.class.split(" ").filter(Boolean):[];for(let b=0;b<a.length;b++)d.indexOf(a[b])==-1&&o.classList.remove(a[b]);for(let b=0;b<d.length;b++)a.indexOf(d[b])==-1&&o.classList.add(d[b]);o.classList.length==0&&o.removeAttribute("class")}if(e.style!=s.style){if(e.style){let a=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,d;for(;d=a.exec(e.style);)o.style.removeProperty(d[1])}s.style&&(o.style.cssText+=s.style)}}function applyOuterDeco(o,e,s){return patchOuterDeco(o,o,noDeco,computeOuterDeco(e,s,o.nodeType!=1))}function sameOuterDeco(o,e){if(o.length!=e.length)return!1;for(let s=0;s<o.length;s++)if(!o[s].type.eq(e[s].type))return!1;return!0}function rm(o){let e=o.nextSibling;return o.parentNode.removeChild(o),e}class ViewTreeUpdater{constructor(e,s,a){this.lock=s,this.view=a,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=preMatch(e.node.content,e)}destroyBetween(e,s){if(e!=s){for(let a=e;a<s;a++)this.top.children[a].destroy();this.top.children.splice(e,s-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,s,a){let d=0,b=this.stack.length>>1,_=Math.min(b,e.length);for(;d<_&&(d==b-1?this.top:this.stack[d+1<<1]).matchesMark(e[d])&&e[d].type.spec.spanning!==!1;)d++;for(;d<b;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),b--;for(;b<e.length;){this.stack.push(this.top,this.index+1);let _e=-1;for(let nt=this.index;nt<Math.min(this.index+3,this.top.children.length);nt++){let rt=this.top.children[nt];if(rt.matchesMark(e[b])&&!this.isLocked(rt.dom)){_e=nt;break}}if(_e>-1)_e>this.index&&(this.changed=!0,this.destroyBetween(this.index,_e)),this.top=this.top.children[this.index];else{let nt=MarkViewDesc.create(this.top,e[b],s,a);this.top.children.splice(this.index,0,nt),this.top=nt,this.changed=!0}this.index=0,b++}}findNodeMatch(e,s,a,d){let b=-1,_;if(d>=this.preMatch.index&&(_=this.preMatch.matches[d-this.preMatch.index]).parent==this.top&&_.matchesNode(e,s,a))b=this.top.children.indexOf(_,this.index);else for(let _e=this.index,nt=Math.min(this.top.children.length,_e+5);_e<nt;_e++){let rt=this.top.children[_e];if(rt.matchesNode(e,s,a)&&!this.preMatch.matched.has(rt)){b=_e;break}}return b<0?!1:(this.destroyBetween(this.index,b),this.index++,!0)}updateNodeAt(e,s,a,d,b){let _=this.top.children[d];return _.dirty==NODE_DIRTY&&_.dom==_.contentDOM&&(_.dirty=CONTENT_DIRTY),_.update(e,s,a,b)?(this.destroyBetween(this.index,d),this.index++,!0):!1}findIndexWithChild(e){for(;;){let s=e.parentNode;if(!s)return-1;if(s==this.top.contentDOM){let a=e.pmViewDesc;if(a){for(let d=this.index;d<this.top.children.length;d++)if(this.top.children[d]==a)return d}return-1}e=s}}updateNextNode(e,s,a,d,b,_){for(let _e=this.index;_e<this.top.children.length;_e++){let nt=this.top.children[_e];if(nt instanceof NodeViewDesc){let rt=this.preMatch.matched.get(nt);if(rt!=null&&rt!=b)return!1;let ct=nt.dom,dt,pt=this.isLocked(ct)&&!(e.isText&&nt.node&&nt.node.isText&&nt.nodeDOM.nodeValue==e.text&&nt.dirty!=NODE_DIRTY&&sameOuterDeco(s,nt.outerDeco));if(!pt&&nt.update(e,s,a,d))return this.destroyBetween(this.index,_e),nt.dom!=ct&&(this.changed=!0),this.index++,!0;if(!pt&&(dt=this.recreateWrapper(nt,e,s,a,d,_)))return this.destroyBetween(this.index,_e),this.top.children[this.index]=dt,dt.contentDOM&&(dt.dirty=CONTENT_DIRTY,dt.updateChildren(d,_+1),dt.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,s,a,d,b,_){if(e.dirty||s.isAtom||!e.children.length||!e.node.content.eq(s.content)||!sameOuterDeco(a,e.outerDeco)||!d.eq(e.innerDeco))return null;let _e=NodeViewDesc.create(this.top,s,a,d,b,_);if(_e.contentDOM){_e.children=e.children,e.children=[];for(let nt of _e.children)nt.parent=_e}return e.destroy(),_e}addNode(e,s,a,d,b){let _=NodeViewDesc.create(this.top,e,s,a,d,b);_.contentDOM&&_.updateChildren(d,b+1),this.top.children.splice(this.index++,0,_),this.changed=!0}placeWidget(e,s,a){let d=this.index<this.top.children.length?this.top.children[this.index]:null;if(d&&d.matchesWidget(e)&&(e==d.widget||!d.widget.type.toDOM.parentNode))this.index++;else{let b=new WidgetViewDesc(this.top,e,s,a);this.top.children.splice(this.index++,0,b),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],s=this.top;for(;e instanceof MarkViewDesc;)s=e,e=s.children[s.children.length-1];(!e||!(e instanceof TextViewDesc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((safari||chrome)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",s),this.addHackNode("BR",this.top))}addHackNode(e,s){if(s==this.top&&this.index<s.children.length&&s.children[this.index].matchesHack(e))this.index++;else{let a=document.createElement(e);e=="IMG"&&(a.className="ProseMirror-separator",a.alt=""),e=="BR"&&(a.className="ProseMirror-trailingBreak");let d=new TrailingHackViewDesc(this.top,[],a,null);s!=this.top?s.children.push(d):s.children.splice(this.index++,0,d),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function preMatch(o,e){let s=e,a=s.children.length,d=o.childCount,b=new Map,_=[];e:for(;d>0;){let _e;for(;;)if(a){let rt=s.children[a-1];if(rt instanceof MarkViewDesc)s=rt,a=rt.children.length;else{_e=rt,a--;break}}else{if(s==e)break e;a=s.parent.children.indexOf(s),s=s.parent}let nt=_e.node;if(nt){if(nt!=o.child(d-1))break;--d,b.set(_e,d),_.push(_e)}}return{index:d,matched:b,matches:_.reverse()}}function compareSide(o,e){return o.type.side-e.type.side}function iterDeco(o,e,s,a){let d=e.locals(o),b=0;if(d.length==0){for(let rt=0;rt<o.childCount;rt++){let ct=o.child(rt);a(ct,d,e.forChild(b,ct),rt),b+=ct.nodeSize}return}let _=0,_e=[],nt=null;for(let rt=0;;){let ct,dt;for(;_<d.length&&d[_].to==b;){let Tt=d[_++];Tt.widget&&(ct?(dt||(dt=[ct])).push(Tt):ct=Tt)}if(ct)if(dt){dt.sort(compareSide);for(let Tt=0;Tt<dt.length;Tt++)s(dt[Tt],rt,!!nt)}else s(ct,rt,!!nt);let pt,bt;if(nt)bt=-1,pt=nt,nt=null;else if(rt<o.childCount)bt=rt,pt=o.child(rt++);else break;for(let Tt=0;Tt<_e.length;Tt++)_e[Tt].to<=b&&_e.splice(Tt--,1);for(;_<d.length&&d[_].from<=b&&d[_].to>b;)_e.push(d[_++]);let xt=b+pt.nodeSize;if(pt.isText){let Tt=xt;_<d.length&&d[_].from<Tt&&(Tt=d[_].from);for(let Rt=0;Rt<_e.length;Rt++)_e[Rt].to<Tt&&(Tt=_e[Rt].to);Tt<xt&&(nt=pt.cut(Tt-b),pt=pt.cut(0,Tt-b),xt=Tt,bt=-1)}else for(;_<d.length&&d[_].to<xt;)_++;let wt=pt.isInline&&!pt.isLeaf?_e.filter(Tt=>!Tt.inline):_e.slice();a(pt,wt,e.forChild(b,pt),bt),b=xt}}function iosHacks(o){if(o.nodeName=="UL"||o.nodeName=="OL"){let e=o.style.cssText;o.style.cssText=e+"; list-style: square !important",window.getComputedStyle(o).listStyle,o.style.cssText=e}}function findTextInFragment(o,e,s,a){for(let d=0,b=0;d<o.childCount&&b<=a;){let _=o.child(d++),_e=b;if(b+=_.nodeSize,!_.isText)continue;let nt=_.text;for(;d<o.childCount;){let rt=o.child(d++);if(b+=rt.nodeSize,!rt.isText)break;nt+=rt.text}if(b>=s){if(b>=a&&nt.slice(a-e.length-_e,a-_e)==e)return a-e.length;let rt=_e<a?nt.lastIndexOf(e,a-_e-1):-1;if(rt>=0&&rt+e.length+_e>=s)return _e+rt;if(s==a&&nt.length>=a+e.length-_e&&nt.slice(a-_e,a-_e+e.length)==e)return a}}return-1}function replaceNodes(o,e,s,a,d){let b=[];for(let _=0,_e=0;_<o.length;_++){let nt=o[_],rt=_e,ct=_e+=nt.size;rt>=s||ct<=e?b.push(nt):(rt<e&&b.push(nt.slice(0,e-rt,a)),d&&(b.push(d),d=void 0),ct>s&&b.push(nt.slice(s-rt,nt.size,a)))}return b}function selectionFromDOM(o,e=null){let s=o.domSelectionRange(),a=o.state.doc;if(!s.focusNode)return null;let d=o.docView.nearestDesc(s.focusNode),b=d&&d.size==0,_=o.docView.posFromDOM(s.focusNode,s.focusOffset,1);if(_<0)return null;let _e=a.resolve(_),nt,rt;if(selectionCollapsed(s)){for(nt=_;d&&!d.node;)d=d.parent;let dt=d.node;if(d&&dt.isAtom&&NodeSelection.isSelectable(dt)&&d.parent&&!(dt.isInline&&isOnEdge(s.focusNode,s.focusOffset,d.dom))){let pt=d.posBefore;rt=new NodeSelection(_==pt?_e:a.resolve(pt))}}else{if(s instanceof o.dom.ownerDocument.defaultView.Selection&&s.rangeCount>1){let dt=_,pt=_;for(let bt=0;bt<s.rangeCount;bt++){let xt=s.getRangeAt(bt);dt=Math.min(dt,o.docView.posFromDOM(xt.startContainer,xt.startOffset,1)),pt=Math.max(pt,o.docView.posFromDOM(xt.endContainer,xt.endOffset,-1))}if(dt<0)return null;[nt,_]=pt==o.state.selection.anchor?[pt,dt]:[dt,pt],_e=a.resolve(_)}else nt=o.docView.posFromDOM(s.anchorNode,s.anchorOffset,1);if(nt<0)return null}let ct=a.resolve(nt);if(!rt){let dt=e=="pointer"||o.state.selection.head<_e.pos&&!b?1:-1;rt=selectionBetween(o,ct,_e,dt)}return rt}function editorOwnsSelection(o){return o.editable?o.hasFocus():hasSelection(o)&&document.activeElement&&document.activeElement.contains(o.dom)}function selectionToDOM(o,e=!1){let s=o.state.selection;if(syncNodeSelection(o,s),!!editorOwnsSelection(o)){if(!e&&o.input.mouseDown&&o.input.mouseDown.allowDefault&&chrome){let a=o.domSelectionRange(),d=o.domObserver.currentSelection;if(a.anchorNode&&d.anchorNode&&isEquivalentPosition(a.anchorNode,a.anchorOffset,d.anchorNode,d.anchorOffset)){o.input.mouseDown.delayedSelectionSync=!0,o.domObserver.setCurSelection();return}}if(o.domObserver.disconnectSelection(),o.cursorWrapper)selectCursorWrapper(o);else{let{anchor:a,head:d}=s,b,_;brokenSelectBetweenUneditable&&!(s instanceof TextSelection)&&(s.$from.parent.inlineContent||(b=temporarilyEditableNear(o,s.from)),!s.empty&&!s.$from.parent.inlineContent&&(_=temporarilyEditableNear(o,s.to))),o.docView.setSelection(a,d,o.root,e),brokenSelectBetweenUneditable&&(b&&resetEditable(b),_&&resetEditable(_)),s.visible?o.dom.classList.remove("ProseMirror-hideselection"):(o.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(o))}o.domObserver.setCurSelection(),o.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(o,e){let{node:s,offset:a}=o.docView.domFromPos(e,0),d=a<s.childNodes.length?s.childNodes[a]:null,b=a?s.childNodes[a-1]:null;if(safari&&d&&d.contentEditable=="false")return setEditable(d);if((!d||d.contentEditable=="false")&&(!b||b.contentEditable=="false")){if(d)return setEditable(d);if(b)return setEditable(b)}}function setEditable(o){return o.contentEditable="true",safari&&o.draggable&&(o.draggable=!1,o.wasDraggable=!0),o}function resetEditable(o){o.contentEditable="false",o.wasDraggable&&(o.draggable=!0,o.wasDraggable=null)}function removeClassOnSelectionChange(o){let e=o.dom.ownerDocument;e.removeEventListener("selectionchange",o.input.hideSelectionGuard);let s=o.domSelectionRange(),a=s.anchorNode,d=s.anchorOffset;e.addEventListener("selectionchange",o.input.hideSelectionGuard=()=>{(s.anchorNode!=a||s.anchorOffset!=d)&&(e.removeEventListener("selectionchange",o.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(o)||o.state.selection.visible)&&o.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(o){let e=o.domSelection(),s=document.createRange();if(!e)return;let a=o.cursorWrapper.dom,d=a.nodeName=="IMG";d?s.setStart(a.parentNode,domIndex(a)+1):s.setStart(a,0),s.collapse(!0),e.removeAllRanges(),e.addRange(s),!d&&!o.state.selection.visible&&ie$1&&ie_version<=11&&(a.disabled=!0,a.disabled=!1)}function syncNodeSelection(o,e){if(e instanceof NodeSelection){let s=o.docView.descAt(e.from);s!=o.lastSelectedViewDesc&&(clearNodeSelection(o),s&&s.selectNode(),o.lastSelectedViewDesc=s)}else clearNodeSelection(o)}function clearNodeSelection(o){o.lastSelectedViewDesc&&(o.lastSelectedViewDesc.parent&&o.lastSelectedViewDesc.deselectNode(),o.lastSelectedViewDesc=void 0)}function selectionBetween(o,e,s,a){return o.someProp("createSelectionBetween",d=>d(o,e,s))||TextSelection.between(e,s,a)}function hasFocusAndSelection(o){return o.editable&&!o.hasFocus()?!1:hasSelection(o)}function hasSelection(o){let e=o.domSelectionRange();if(!e.anchorNode)return!1;try{return o.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(o.editable||o.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function anchorInRightPlace(o){let e=o.docView.domFromPos(o.state.selection.anchor,0),s=o.domSelectionRange();return isEquivalentPosition(e.node,e.offset,s.anchorNode,s.anchorOffset)}function moveSelectionBlock(o,e){let{$anchor:s,$head:a}=o.selection,d=e>0?s.max(a):s.min(a),b=d.parent.inlineContent?d.depth?o.doc.resolve(e>0?d.after():d.before()):null:d;return b&&Selection.findFrom(b,e)}function apply(o,e){return o.dispatch(o.state.tr.setSelection(e).scrollIntoView()),!0}function selectHorizontally(o,e,s){let a=o.state.selection;if(a instanceof TextSelection)if(s.indexOf("s")>-1){let{$head:d}=a,b=d.textOffset?null:e<0?d.nodeBefore:d.nodeAfter;if(!b||b.isText||!b.isLeaf)return!1;let _=o.state.doc.resolve(d.pos+b.nodeSize*(e<0?-1:1));return apply(o,new TextSelection(a.$anchor,_))}else if(a.empty){if(o.endOfTextblock(e>0?"forward":"backward")){let d=moveSelectionBlock(o.state,e);return d&&d instanceof NodeSelection?apply(o,d):!1}else if(!(mac$2&&s.indexOf("m")>-1)){let d=a.$head,b=d.textOffset?null:e<0?d.nodeBefore:d.nodeAfter,_;if(!b||b.isText)return!1;let _e=e<0?d.pos-b.nodeSize:d.pos;return b.isAtom||(_=o.docView.descAt(_e))&&!_.contentDOM?NodeSelection.isSelectable(b)?apply(o,new NodeSelection(e<0?o.state.doc.resolve(d.pos-b.nodeSize):d)):webkit?apply(o,new TextSelection(o.state.doc.resolve(e<0?_e:_e+b.nodeSize))):!1:!1}}else return!1;else{if(a instanceof NodeSelection&&a.node.isInline)return apply(o,new TextSelection(e>0?a.$to:a.$from));{let d=moveSelectionBlock(o.state,e);return d?apply(o,d):!1}}}function nodeLen(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function isIgnorable(o,e){let s=o.pmViewDesc;return s&&s.size==0&&(e<0||o.nextSibling||o.nodeName!="BR")}function skipIgnoredNodes(o,e){return e<0?skipIgnoredNodesBefore(o):skipIgnoredNodesAfter(o)}function skipIgnoredNodesBefore(o){let e=o.domSelectionRange(),s=e.focusNode,a=e.focusOffset;if(!s)return;let d,b,_=!1;for(gecko&&s.nodeType==1&&a<nodeLen(s)&&isIgnorable(s.childNodes[a],-1)&&(_=!0);;)if(a>0){if(s.nodeType!=1)break;{let _e=s.childNodes[a-1];if(isIgnorable(_e,-1))d=s,b=--a;else if(_e.nodeType==3)s=_e,a=s.nodeValue.length;else break}}else{if(isBlockNode(s))break;{let _e=s.previousSibling;for(;_e&&isIgnorable(_e,-1);)d=s.parentNode,b=domIndex(_e),_e=_e.previousSibling;if(_e)s=_e,a=nodeLen(s);else{if(s=s.parentNode,s==o.dom)break;a=0}}}_?setSelFocus(o,s,a):d&&setSelFocus(o,d,b)}function skipIgnoredNodesAfter(o){let e=o.domSelectionRange(),s=e.focusNode,a=e.focusOffset;if(!s)return;let d=nodeLen(s),b,_;for(;;)if(a<d){if(s.nodeType!=1)break;let _e=s.childNodes[a];if(isIgnorable(_e,1))b=s,_=++a;else break}else{if(isBlockNode(s))break;{let _e=s.nextSibling;for(;_e&&isIgnorable(_e,1);)b=_e.parentNode,_=domIndex(_e)+1,_e=_e.nextSibling;if(_e)s=_e,a=0,d=nodeLen(s);else{if(s=s.parentNode,s==o.dom)break;a=d=0}}}b&&setSelFocus(o,b,_)}function isBlockNode(o){let e=o.pmViewDesc;return e&&e.node&&e.node.isBlock}function textNodeAfter(o,e){for(;o&&e==o.childNodes.length&&!hasBlockDesc(o);)e=domIndex(o)+1,o=o.parentNode;for(;o&&e<o.childNodes.length;){let s=o.childNodes[e];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;o=s,e=0}}function textNodeBefore(o,e){for(;o&&!e&&!hasBlockDesc(o);)e=domIndex(o),o=o.parentNode;for(;o&&e;){let s=o.childNodes[e-1];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;o=s,e=o.childNodes.length}}function setSelFocus(o,e,s){if(e.nodeType!=3){let b,_;(_=textNodeAfter(e,s))?(e=_,s=0):(b=textNodeBefore(e,s))&&(e=b,s=b.nodeValue.length)}let a=o.domSelection();if(!a)return;if(selectionCollapsed(a)){let b=document.createRange();b.setEnd(e,s),b.setStart(e,s),a.removeAllRanges(),a.addRange(b)}else a.extend&&a.extend(e,s);o.domObserver.setCurSelection();let{state:d}=o;setTimeout(()=>{o.state==d&&selectionToDOM(o)},50)}function findDirection(o,e){let s=o.state.doc.resolve(e);if(!(chrome||windows)&&s.parent.inlineContent){let d=o.coordsAtPos(e);if(e>s.start()){let b=o.coordsAtPos(e-1),_=(b.top+b.bottom)/2;if(_>d.top&&_<d.bottom&&Math.abs(b.left-d.left)>1)return b.left<d.left?"ltr":"rtl"}if(e<s.end()){let b=o.coordsAtPos(e+1),_=(b.top+b.bottom)/2;if(_>d.top&&_<d.bottom&&Math.abs(b.left-d.left)>1)return b.left>d.left?"ltr":"rtl"}}return getComputedStyle(o.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(o,e,s){let a=o.state.selection;if(a instanceof TextSelection&&!a.empty||s.indexOf("s")>-1||mac$2&&s.indexOf("m")>-1)return!1;let{$from:d,$to:b}=a;if(!d.parent.inlineContent||o.endOfTextblock(e<0?"up":"down")){let _=moveSelectionBlock(o.state,e);if(_&&_ instanceof NodeSelection)return apply(o,_)}if(!d.parent.inlineContent){let _=e<0?d:b,_e=a instanceof AllSelection?Selection.near(_,e):Selection.findFrom(_,e);return _e?apply(o,_e):!1}return!1}function stopNativeHorizontalDelete(o,e){if(!(o.state.selection instanceof TextSelection))return!0;let{$head:s,$anchor:a,empty:d}=o.state.selection;if(!s.sameParent(a))return!0;if(!d)return!1;if(o.endOfTextblock(e>0?"forward":"backward"))return!0;let b=!s.textOffset&&(e<0?s.nodeBefore:s.nodeAfter);if(b&&!b.isText){let _=o.state.tr;return e<0?_.delete(s.pos-b.nodeSize,s.pos):_.delete(s.pos,s.pos+b.nodeSize),o.dispatch(_),!0}return!1}function switchEditable(o,e,s){o.domObserver.stop(),e.contentEditable=s,o.domObserver.start()}function safariDownArrowBug(o){if(!safari||o.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:s}=o.domSelectionRange();if(e&&e.nodeType==1&&s==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let a=e.firstChild;switchEditable(o,a,"true"),setTimeout(()=>switchEditable(o,a,"false"),20)}return!1}function getMods(o){let e="";return o.ctrlKey&&(e+="c"),o.metaKey&&(e+="m"),o.altKey&&(e+="a"),o.shiftKey&&(e+="s"),e}function captureKeyDown(o,e){let s=e.keyCode,a=getMods(e);if(s==8||mac$2&&s==72&&a=="c")return stopNativeHorizontalDelete(o,-1)||skipIgnoredNodes(o,-1);if(s==46&&!e.shiftKey||mac$2&&s==68&&a=="c")return stopNativeHorizontalDelete(o,1)||skipIgnoredNodes(o,1);if(s==13||s==27)return!0;if(s==37||mac$2&&s==66&&a=="c"){let d=s==37?findDirection(o,o.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(o,d,a)||skipIgnoredNodes(o,d)}else if(s==39||mac$2&&s==70&&a=="c"){let d=s==39?findDirection(o,o.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(o,d,a)||skipIgnoredNodes(o,d)}else{if(s==38||mac$2&&s==80&&a=="c")return selectVertically(o,-1,a)||skipIgnoredNodes(o,-1);if(s==40||mac$2&&s==78&&a=="c")return safariDownArrowBug(o)||selectVertically(o,1,a)||skipIgnoredNodes(o,1);if(a==(mac$2?"m":"c")&&(s==66||s==73||s==89||s==90))return!0}return!1}function serializeForClipboard(o,e){o.someProp("transformCopied",bt=>{e=bt(e,o)});let s=[],{content:a,openStart:d,openEnd:b}=e;for(;d>1&&b>1&&a.childCount==1&&a.firstChild.childCount==1;){d--,b--;let bt=a.firstChild;s.push(bt.type.name,bt.attrs!=bt.type.defaultAttrs?bt.attrs:null),a=bt.content}let _=o.someProp("clipboardSerializer")||DOMSerializer.fromSchema(o.state.schema),_e=detachedDoc(),nt=_e.createElement("div");nt.appendChild(_.serializeFragment(a,{document:_e}));let rt=nt.firstChild,ct,dt=0;for(;rt&&rt.nodeType==1&&(ct=wrapMap[rt.nodeName.toLowerCase()]);){for(let bt=ct.length-1;bt>=0;bt--){let xt=_e.createElement(ct[bt]);for(;nt.firstChild;)xt.appendChild(nt.firstChild);nt.appendChild(xt),dt++}rt=nt.firstChild}rt&&rt.nodeType==1&&rt.setAttribute("data-pm-slice",`${d} ${b}${dt?` -${dt}`:""} ${JSON.stringify(s)}`);let pt=o.someProp("clipboardTextSerializer",bt=>bt(e,o))||e.content.textBetween(0,e.content.size,`

`);return{dom:nt,text:pt,slice:e}}function parseFromClipboard(o,e,s,a,d){let b=d.parent.type.spec.code,_,_e;if(!s&&!e)return null;let nt=e&&(a||b||!s);if(nt){if(o.someProp("transformPastedText",pt=>{e=pt(e,b||a,o)}),b)return e?new Slice(Fragment.from(o.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Slice.empty;let dt=o.someProp("clipboardTextParser",pt=>pt(e,d,a,o));if(dt)_e=dt;else{let pt=d.marks(),{schema:bt}=o.state,xt=DOMSerializer.fromSchema(bt);_=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(wt=>{let Tt=_.appendChild(document.createElement("p"));wt&&Tt.appendChild(xt.serializeNode(bt.text(wt,pt)))})}}else o.someProp("transformPastedHTML",dt=>{s=dt(s,o)}),_=readHTML(s),webkit&&restoreReplacedSpaces(_);let rt=_&&_.querySelector("[data-pm-slice]"),ct=rt&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(rt.getAttribute("data-pm-slice")||"");if(ct&&ct[3])for(let dt=+ct[3];dt>0;dt--){let pt=_.firstChild;for(;pt&&pt.nodeType!=1;)pt=pt.nextSibling;if(!pt)break;_=pt}if(_e||(_e=(o.someProp("clipboardParser")||o.someProp("domParser")||DOMParser$1.fromSchema(o.state.schema)).parseSlice(_,{preserveWhitespace:!!(nt||ct),context:d,ruleFromNode(pt){return pt.nodeName=="BR"&&!pt.nextSibling&&pt.parentNode&&!inlineParents.test(pt.parentNode.nodeName)?{ignore:!0}:null}})),ct)_e=addContext(closeSlice(_e,+ct[1],+ct[2]),ct[4]);else if(_e=Slice.maxOpen(normalizeSiblings(_e.content,d),!0),_e.openStart||_e.openEnd){let dt=0,pt=0;for(let bt=_e.content.firstChild;dt<_e.openStart&&!bt.type.spec.isolating;dt++,bt=bt.firstChild);for(let bt=_e.content.lastChild;pt<_e.openEnd&&!bt.type.spec.isolating;pt++,bt=bt.lastChild);_e=closeSlice(_e,dt,pt)}return o.someProp("transformPasted",dt=>{_e=dt(_e,o)}),_e}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(o,e){if(o.childCount<2)return o;for(let s=e.depth;s>=0;s--){let d=e.node(s).contentMatchAt(e.index(s)),b,_=[];if(o.forEach(_e=>{if(!_)return;let nt=d.findWrapping(_e.type),rt;if(!nt)return _=null;if(rt=_.length&&b.length&&addToSibling(nt,b,_e,_[_.length-1],0))_[_.length-1]=rt;else{_.length&&(_[_.length-1]=closeRight(_[_.length-1],b.length));let ct=withWrappers(_e,nt);_.push(ct),d=d.matchType(ct.type),b=nt}}),_)return Fragment.from(_)}return o}function withWrappers(o,e,s=0){for(let a=e.length-1;a>=s;a--)o=e[a].create(null,Fragment.from(o));return o}function addToSibling(o,e,s,a,d){if(d<o.length&&d<e.length&&o[d]==e[d]){let b=addToSibling(o,e,s,a.lastChild,d+1);if(b)return a.copy(a.content.replaceChild(a.childCount-1,b));if(a.contentMatchAt(a.childCount).matchType(d==o.length-1?s.type:o[d+1]))return a.copy(a.content.append(Fragment.from(withWrappers(s,o,d+1))))}}function closeRight(o,e){if(e==0)return o;let s=o.content.replaceChild(o.childCount-1,closeRight(o.lastChild,e-1)),a=o.contentMatchAt(o.childCount).fillBefore(Fragment.empty,!0);return o.copy(s.append(a))}function closeRange(o,e,s,a,d,b){let _=e<0?o.firstChild:o.lastChild,_e=_.content;return o.childCount>1&&(b=0),d<a-1&&(_e=closeRange(_e,e,s,a,d+1,b)),d>=s&&(_e=e<0?_.contentMatchAt(0).fillBefore(_e,b<=d).append(_e):_e.append(_.contentMatchAt(_.childCount).fillBefore(Fragment.empty,!0))),o.replaceChild(e<0?0:o.childCount-1,_.copy(_e))}function closeSlice(o,e,s){return e<o.openStart&&(o=new Slice(closeRange(o.content,-1,e,o.openStart,0,o.openEnd),e,o.openEnd)),s<o.openEnd&&(o=new Slice(closeRange(o.content,1,s,o.openEnd,0,0),o.openStart,s)),o}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(o){let e=window.trustedTypes;return e?(_policy||(_policy=e.createPolicy("ProseMirrorClipboard",{createHTML:s=>s})),_policy.createHTML(o)):o}function readHTML(o){let e=/^(\s*<meta [^>]*>)*/.exec(o);e&&(o=o.slice(e[0].length));let s=detachedDoc().createElement("div"),a=/<([a-z][^>\s]+)/i.exec(o),d;if((d=a&&wrapMap[a[1].toLowerCase()])&&(o=d.map(b=>"<"+b+">").join("")+o+d.map(b=>"</"+b+">").reverse().join("")),s.innerHTML=maybeWrapTrusted(o),d)for(let b=0;b<d.length;b++)s=s.querySelector(d[b])||s;return s}function restoreReplacedSpaces(o){let e=o.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let s=0;s<e.length;s++){let a=e[s];a.childNodes.length==1&&a.textContent==""&&a.parentNode&&a.parentNode.replaceChild(o.ownerDocument.createTextNode(" "),a)}}function addContext(o,e){if(!o.size)return o;let s=o.content.firstChild.type.schema,a;try{a=JSON.parse(e)}catch{return o}let{content:d,openStart:b,openEnd:_}=o;for(let _e=a.length-2;_e>=0;_e-=2){let nt=s.nodes[a[_e]];if(!nt||nt.hasRequiredAttrs())break;d=Fragment.from(nt.create(a[_e+1],d)),b++,_++}return new Slice(d,b,_)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(o){for(let e in handlers){let s=handlers[e];o.dom.addEventListener(e,o.input.eventHandlers[e]=a=>{eventBelongsToView(o,a)&&!runCustomHandler(o,a)&&(o.editable||!(a.type in editHandlers))&&s(o,a)},passiveHandlers[e]?{passive:!0}:void 0)}safari&&o.dom.addEventListener("input",()=>null),ensureListeners(o)}function setSelectionOrigin(o,e){o.input.lastSelectionOrigin=e,o.input.lastSelectionTime=Date.now()}function destroyInput(o){o.domObserver.stop();for(let e in o.input.eventHandlers)o.dom.removeEventListener(e,o.input.eventHandlers[e]);clearTimeout(o.input.composingTimeout),clearTimeout(o.input.lastIOSEnterFallbackTimeout)}function ensureListeners(o){o.someProp("handleDOMEvents",e=>{for(let s in e)o.input.eventHandlers[s]||o.dom.addEventListener(s,o.input.eventHandlers[s]=a=>runCustomHandler(o,a))})}function runCustomHandler(o,e){return o.someProp("handleDOMEvents",s=>{let a=s[e.type];return a?a(o,e)||e.defaultPrevented:!1})}function eventBelongsToView(o,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let s=e.target;s!=o.dom;s=s.parentNode)if(!s||s.nodeType==11||s.pmViewDesc&&s.pmViewDesc.stopEvent(e))return!1;return!0}function dispatchEvent(o,e){!runCustomHandler(o,e)&&handlers[e.type]&&(o.editable||!(e.type in editHandlers))&&handlers[e.type](o,e)}editHandlers.keydown=(o,e)=>{let s=e;if(o.input.shiftKey=s.keyCode==16||s.shiftKey,!inOrNearComposition(o,s)&&(o.input.lastKeyCode=s.keyCode,o.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&s.keyCode==13)))if(s.keyCode!=229&&o.domObserver.forceFlush(),ios&&s.keyCode==13&&!s.ctrlKey&&!s.altKey&&!s.metaKey){let a=Date.now();o.input.lastIOSEnter=a,o.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{o.input.lastIOSEnter==a&&(o.someProp("handleKeyDown",d=>d(o,keyEvent(13,"Enter"))),o.input.lastIOSEnter=0)},200)}else o.someProp("handleKeyDown",a=>a(o,s))||captureKeyDown(o,s)?s.preventDefault():setSelectionOrigin(o,"key")};editHandlers.keyup=(o,e)=>{e.keyCode==16&&(o.input.shiftKey=!1)};editHandlers.keypress=(o,e)=>{let s=e;if(inOrNearComposition(o,s)||!s.charCode||s.ctrlKey&&!s.altKey||mac$2&&s.metaKey)return;if(o.someProp("handleKeyPress",d=>d(o,s))){s.preventDefault();return}let a=o.state.selection;if(!(a instanceof TextSelection)||!a.$from.sameParent(a.$to)){let d=String.fromCharCode(s.charCode);!/[\r\n]/.test(d)&&!o.someProp("handleTextInput",b=>b(o,a.$from.pos,a.$to.pos,d))&&o.dispatch(o.state.tr.insertText(d).scrollIntoView()),s.preventDefault()}};function eventCoords(o){return{left:o.clientX,top:o.clientY}}function isNear(o,e){let s=e.x-o.clientX,a=e.y-o.clientY;return s*s+a*a<100}function runHandlerOnContext(o,e,s,a,d){if(a==-1)return!1;let b=o.state.doc.resolve(a);for(let _=b.depth+1;_>0;_--)if(o.someProp(e,_e=>_>b.depth?_e(o,s,b.nodeAfter,b.before(_),d,!0):_e(o,s,b.node(_),b.before(_),d,!1)))return!0;return!1}function updateSelection(o,e,s){if(o.focused||o.focus(),o.state.selection.eq(e))return;let a=o.state.tr.setSelection(e);a.setMeta("pointer",!0),o.dispatch(a)}function selectClickedLeaf(o,e){if(e==-1)return!1;let s=o.state.doc.resolve(e),a=s.nodeAfter;return a&&a.isAtom&&NodeSelection.isSelectable(a)?(updateSelection(o,new NodeSelection(s)),!0):!1}function selectClickedNode(o,e){if(e==-1)return!1;let s=o.state.selection,a,d;s instanceof NodeSelection&&(a=s.node);let b=o.state.doc.resolve(e);for(let _=b.depth+1;_>0;_--){let _e=_>b.depth?b.nodeAfter:b.node(_);if(NodeSelection.isSelectable(_e)){a&&s.$from.depth>0&&_>=s.$from.depth&&b.before(s.$from.depth+1)==s.$from.pos?d=b.before(s.$from.depth):d=b.before(_);break}}return d!=null?(updateSelection(o,NodeSelection.create(o.state.doc,d)),!0):!1}function handleSingleClick(o,e,s,a,d){return runHandlerOnContext(o,"handleClickOn",e,s,a)||o.someProp("handleClick",b=>b(o,e,a))||(d?selectClickedNode(o,s):selectClickedLeaf(o,s))}function handleDoubleClick(o,e,s,a){return runHandlerOnContext(o,"handleDoubleClickOn",e,s,a)||o.someProp("handleDoubleClick",d=>d(o,e,a))}function handleTripleClick(o,e,s,a){return runHandlerOnContext(o,"handleTripleClickOn",e,s,a)||o.someProp("handleTripleClick",d=>d(o,e,a))||defaultTripleClick(o,s,a)}function defaultTripleClick(o,e,s){if(s.button!=0)return!1;let a=o.state.doc;if(e==-1)return a.inlineContent?(updateSelection(o,TextSelection.create(a,0,a.content.size)),!0):!1;let d=a.resolve(e);for(let b=d.depth+1;b>0;b--){let _=b>d.depth?d.nodeAfter:d.node(b),_e=d.before(b);if(_.inlineContent)updateSelection(o,TextSelection.create(a,_e+1,_e+1+_.content.size));else if(NodeSelection.isSelectable(_))updateSelection(o,NodeSelection.create(a,_e));else continue;return!0}}function forceDOMFlush(o){return endComposition(o)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(o,e)=>{let s=e;o.input.shiftKey=s.shiftKey;let a=forceDOMFlush(o),d=Date.now(),b="singleClick";d-o.input.lastClick.time<500&&isNear(s,o.input.lastClick)&&!s[selectNodeModifier]&&(o.input.lastClick.type=="singleClick"?b="doubleClick":o.input.lastClick.type=="doubleClick"&&(b="tripleClick")),o.input.lastClick={time:d,x:s.clientX,y:s.clientY,type:b};let _=o.posAtCoords(eventCoords(s));_&&(b=="singleClick"?(o.input.mouseDown&&o.input.mouseDown.done(),o.input.mouseDown=new MouseDown(o,_,s,!!a)):(b=="doubleClick"?handleDoubleClick:handleTripleClick)(o,_.pos,_.inside,s)?s.preventDefault():setSelectionOrigin(o,"pointer"))};class MouseDown{constructor(e,s,a,d){this.view=e,this.pos=s,this.event=a,this.flushed=d,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!a[selectNodeModifier],this.allowDefault=a.shiftKey;let b,_;if(s.inside>-1)b=e.state.doc.nodeAt(s.inside),_=s.inside;else{let ct=e.state.doc.resolve(s.pos);b=ct.parent,_=ct.depth?ct.before():0}const _e=d?null:a.target,nt=_e?e.docView.nearestDesc(_e,!0):null;this.target=nt&&nt.dom.nodeType==1?nt.dom:null;let{selection:rt}=e.state;(a.button==0&&b.type.spec.draggable&&b.type.spec.selectable!==!1||rt instanceof NodeSelection&&rt.from<=_&&rt.to>_)&&(this.mightDrag={node:b,pos:_,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(eventCoords(e))),this.updateAllowDefault(e),this.allowDefault||!s?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,s.pos,s.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(s.pos))),e.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(e){this.updateAllowDefault(e),setSelectionOrigin(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=o=>{o.input.lastTouch=Date.now(),forceDOMFlush(o),setSelectionOrigin(o,"pointer")};handlers.touchmove=o=>{o.input.lastTouch=Date.now(),setSelectionOrigin(o,"pointer")};handlers.contextmenu=o=>forceDOMFlush(o);function inOrNearComposition(o,e){return o.composing?!0:safari&&Math.abs(e.timeStamp-o.input.compositionEndedAt)<500?(o.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=o=>{if(!o.composing){o.domObserver.flush();let{state:e}=o,s=e.selection.$to;if(e.selection instanceof TextSelection&&(e.storedMarks||!s.textOffset&&s.parentOffset&&s.nodeBefore.marks.some(a=>a.type.spec.inclusive===!1)))o.markCursor=o.state.storedMarks||s.marks(),endComposition(o,!0),o.markCursor=null;else if(endComposition(o,!e.selection.empty),gecko&&e.selection.empty&&s.parentOffset&&!s.textOffset&&s.nodeBefore.marks.length){let a=o.domSelectionRange();for(let d=a.focusNode,b=a.focusOffset;d&&d.nodeType==1&&b!=0;){let _=b<0?d.lastChild:d.childNodes[b-1];if(!_)break;if(_.nodeType==3){let _e=o.domSelection();_e&&_e.collapse(_,_.nodeValue.length);break}else d=_,b=-1}}o.input.composing=!0}scheduleComposeEnd(o,timeoutComposition)};editHandlers.compositionend=(o,e)=>{o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=e.timeStamp,o.input.compositionPendingChanges=o.domObserver.pendingRecords().length?o.input.compositionID:0,o.input.compositionNode=null,o.input.compositionPendingChanges&&Promise.resolve().then(()=>o.domObserver.flush()),o.input.compositionID++,scheduleComposeEnd(o,20))};function scheduleComposeEnd(o,e){clearTimeout(o.input.composingTimeout),e>-1&&(o.input.composingTimeout=setTimeout(()=>endComposition(o),e))}function clearComposition(o){for(o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=timestampFromCustomEvent());o.input.compositionNodes.length>0;)o.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(o){let e=o.domSelectionRange();if(!e.focusNode)return null;let s=textNodeBefore$1(e.focusNode,e.focusOffset),a=textNodeAfter$1(e.focusNode,e.focusOffset);if(s&&a&&s!=a){let d=a.pmViewDesc,b=o.domObserver.lastChangedTextNode;if(s==b||a==b)return b;if(!d||!d.isText(a.nodeValue))return a;if(o.input.compositionNode==a){let _=s.pmViewDesc;if(!(!_||!_.isText(s.nodeValue)))return a}}return s||a}function timestampFromCustomEvent(){let o=document.createEvent("Event");return o.initEvent("event",!0,!0),o.timeStamp}function endComposition(o,e=!1){if(!(android&&o.domObserver.flushingSoon>=0)){if(o.domObserver.forceFlush(),clearComposition(o),e||o.docView&&o.docView.dirty){let s=selectionFromDOM(o);return s&&!s.eq(o.state.selection)?o.dispatch(o.state.tr.setSelection(s)):(o.markCursor||e)&&!o.state.selection.empty?o.dispatch(o.state.tr.deleteSelection()):o.updateState(o.state),!0}return!1}}function captureCopy(o,e){if(!o.dom.parentNode)return;let s=o.dom.parentNode.appendChild(document.createElement("div"));s.appendChild(e),s.style.cssText="position: fixed; left: -10000px; top: 10px";let a=getSelection(),d=document.createRange();d.selectNodeContents(e),o.dom.blur(),a.removeAllRanges(),a.addRange(d),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),o.focus()},50)}const brokenClipboardAPI=ie$1&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(o,e)=>{let s=e,a=o.state.selection,d=s.type=="cut";if(a.empty)return;let b=brokenClipboardAPI?null:s.clipboardData,_=a.content(),{dom:_e,text:nt}=serializeForClipboard(o,_);b?(s.preventDefault(),b.clearData(),b.setData("text/html",_e.innerHTML),b.setData("text/plain",nt)):captureCopy(o,_e),d&&o.dispatch(o.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(o){return o.openStart==0&&o.openEnd==0&&o.content.childCount==1?o.content.firstChild:null}function capturePaste(o,e){if(!o.dom.parentNode)return;let s=o.input.shiftKey||o.state.selection.$from.parent.type.spec.code,a=o.dom.parentNode.appendChild(document.createElement(s?"textarea":"div"));s||(a.contentEditable="true"),a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus();let d=o.input.shiftKey&&o.input.lastKeyCode!=45;setTimeout(()=>{o.focus(),a.parentNode&&a.parentNode.removeChild(a),s?doPaste(o,a.value,null,d,e):doPaste(o,a.textContent,a.innerHTML,d,e)},50)}function doPaste(o,e,s,a,d){let b=parseFromClipboard(o,e,s,a,o.state.selection.$from);if(o.someProp("handlePaste",nt=>nt(o,d,b||Slice.empty)))return!0;if(!b)return!1;let _=sliceSingleNode(b),_e=_?o.state.tr.replaceSelectionWith(_,a):o.state.tr.replaceSelection(b);return o.dispatch(_e.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(o){let e=o.getData("text/plain")||o.getData("Text");if(e)return e;let s=o.getData("text/uri-list");return s?s.replace(/\r?\n/g," "):""}editHandlers.paste=(o,e)=>{let s=e;if(o.composing&&!android)return;let a=brokenClipboardAPI?null:s.clipboardData,d=o.input.shiftKey&&o.input.lastKeyCode!=45;a&&doPaste(o,getText$1(a),a.getData("text/html"),d,s)?s.preventDefault():capturePaste(o,s)};class Dragging{constructor(e,s,a){this.slice=e,this.move=s,this.node=a}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";handlers.dragstart=(o,e)=>{let s=e,a=o.input.mouseDown;if(a&&a.done(),!s.dataTransfer)return;let d=o.state.selection,b=d.empty?null:o.posAtCoords(eventCoords(s)),_;if(!(b&&b.pos>=d.from&&b.pos<=(d instanceof NodeSelection?d.to-1:d.to))){if(a&&a.mightDrag)_=NodeSelection.create(o.state.doc,a.mightDrag.pos);else if(s.target&&s.target.nodeType==1){let dt=o.docView.nearestDesc(s.target,!0);dt&&dt.node.type.spec.draggable&&dt!=o.docView&&(_=NodeSelection.create(o.state.doc,dt.posBefore))}}let _e=(_||o.state.selection).content(),{dom:nt,text:rt,slice:ct}=serializeForClipboard(o,_e);(!s.dataTransfer.files.length||!chrome||chrome_version>120)&&s.dataTransfer.clearData(),s.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",nt.innerHTML),s.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||s.dataTransfer.setData("text/plain",rt),o.dragging=new Dragging(ct,!s[dragCopyModifier],_)};handlers.dragend=o=>{let e=o.dragging;window.setTimeout(()=>{o.dragging==e&&(o.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(o,e)=>e.preventDefault();editHandlers.drop=(o,e)=>{let s=e,a=o.dragging;if(o.dragging=null,!s.dataTransfer)return;let d=o.posAtCoords(eventCoords(s));if(!d)return;let b=o.state.doc.resolve(d.pos),_=a&&a.slice;_?o.someProp("transformPasted",xt=>{_=xt(_,o)}):_=parseFromClipboard(o,getText$1(s.dataTransfer),brokenClipboardAPI?null:s.dataTransfer.getData("text/html"),!1,b);let _e=!!(a&&!s[dragCopyModifier]);if(o.someProp("handleDrop",xt=>xt(o,s,_||Slice.empty,_e))){s.preventDefault();return}if(!_)return;s.preventDefault();let nt=_?dropPoint(o.state.doc,b.pos,_):b.pos;nt==null&&(nt=b.pos);let rt=o.state.tr;if(_e){let{node:xt}=a;xt?xt.replace(rt):rt.deleteSelection()}let ct=rt.mapping.map(nt),dt=_.openStart==0&&_.openEnd==0&&_.content.childCount==1,pt=rt.doc;if(dt?rt.replaceRangeWith(ct,ct,_.content.firstChild):rt.replaceRange(ct,ct,_),rt.doc.eq(pt))return;let bt=rt.doc.resolve(ct);if(dt&&NodeSelection.isSelectable(_.content.firstChild)&&bt.nodeAfter&&bt.nodeAfter.sameMarkup(_.content.firstChild))rt.setSelection(new NodeSelection(bt));else{let xt=rt.mapping.map(nt);rt.mapping.maps[rt.mapping.maps.length-1].forEach((wt,Tt,Rt,Mt)=>xt=Mt),rt.setSelection(selectionBetween(o,bt,rt.doc.resolve(xt)))}o.focus(),o.dispatch(rt.setMeta("uiEvent","drop"))};handlers.focus=o=>{o.input.lastFocus=Date.now(),o.focused||(o.domObserver.stop(),o.dom.classList.add("ProseMirror-focused"),o.domObserver.start(),o.focused=!0,setTimeout(()=>{o.docView&&o.hasFocus()&&!o.domObserver.currentSelection.eq(o.domSelectionRange())&&selectionToDOM(o)},20))};handlers.blur=(o,e)=>{let s=e;o.focused&&(o.domObserver.stop(),o.dom.classList.remove("ProseMirror-focused"),o.domObserver.start(),s.relatedTarget&&o.dom.contains(s.relatedTarget)&&o.domObserver.currentSelection.clear(),o.focused=!1)};handlers.beforeinput=(o,e)=>{if(chrome&&android&&e.inputType=="deleteContentBackward"){o.domObserver.flushSoon();let{domChangeCount:a}=o.input;setTimeout(()=>{if(o.input.domChangeCount!=a||(o.dom.blur(),o.focus(),o.someProp("handleKeyDown",b=>b(o,keyEvent(8,"Backspace")))))return;let{$cursor:d}=o.state.selection;d&&d.pos>0&&o.dispatch(o.state.tr.delete(d.pos-1,d.pos).scrollIntoView())},50)}};for(let o in editHandlers)handlers[o]=editHandlers[o];function compareObjs(o,e){if(o==e)return!0;for(let s in o)if(o[s]!==e[s])return!1;for(let s in e)if(!(s in o))return!1;return!0}class WidgetType{constructor(e,s){this.toDOM=e,this.spec=s||noSpec,this.side=this.spec.side||0}map(e,s,a,d){let{pos:b,deleted:_}=e.mapResult(s.from+d,this.side<0?-1:1);return _?null:new Decoration(b-a,b-a,this)}valid(){return!0}eq(e){return this==e||e instanceof WidgetType&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&compareObjs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class InlineType{constructor(e,s){this.attrs=e,this.spec=s||noSpec}map(e,s,a,d){let b=e.map(s.from+d,this.spec.inclusiveStart?-1:1)-a,_=e.map(s.to+d,this.spec.inclusiveEnd?1:-1)-a;return b>=_?null:new Decoration(b,_,this)}valid(e,s){return s.from<s.to}eq(e){return this==e||e instanceof InlineType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}static is(e){return e.type instanceof InlineType}destroy(){}}class NodeType{constructor(e,s){this.attrs=e,this.spec=s||noSpec}map(e,s,a,d){let b=e.mapResult(s.from+d,1);if(b.deleted)return null;let _=e.mapResult(s.to+d,-1);return _.deleted||_.pos<=b.pos?null:new Decoration(b.pos-a,_.pos-a,this)}valid(e,s){let{index:a,offset:d}=e.content.findIndex(s.from),b;return d==s.from&&!(b=e.child(a)).isText&&d+b.nodeSize==s.to}eq(e){return this==e||e instanceof NodeType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}destroy(){}}class Decoration{constructor(e,s,a){this.from=e,this.to=s,this.type=a}copy(e,s){return new Decoration(e,s,this.type)}eq(e,s=0){return this.type.eq(e.type)&&this.from+s==e.from&&this.to+s==e.to}map(e,s,a){return this.type.map(e,this,s,a)}static widget(e,s,a){return new Decoration(e,e,new WidgetType(s,a))}static inline(e,s,a,d){return new Decoration(e,s,new InlineType(a,d))}static node(e,s,a,d){return new Decoration(e,s,new NodeType(a,d))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(e,s){this.local=e.length?e:none,this.children=s.length?s:none}static create(e,s){return s.length?buildTree(s,e,0,noSpec):empty}find(e,s,a){let d=[];return this.findInner(e??0,s??1e9,d,0,a),d}findInner(e,s,a,d,b){for(let _=0;_<this.local.length;_++){let _e=this.local[_];_e.from<=s&&_e.to>=e&&(!b||b(_e.spec))&&a.push(_e.copy(_e.from+d,_e.to+d))}for(let _=0;_<this.children.length;_+=3)if(this.children[_]<s&&this.children[_+1]>e){let _e=this.children[_]+1;this.children[_+2].findInner(e-_e,s-_e,a,d+_e,b)}}map(e,s,a){return this==empty||e.maps.length==0?this:this.mapInner(e,s,0,0,a||noSpec)}mapInner(e,s,a,d,b){let _;for(let _e=0;_e<this.local.length;_e++){let nt=this.local[_e].map(e,a,d);nt&&nt.type.valid(s,nt)?(_||(_=[])).push(nt):b.onRemove&&b.onRemove(this.local[_e].spec)}return this.children.length?mapChildren(this.children,_||[],e,s,a,d,b):_?new DecorationSet(_.sort(byPos),none):empty}add(e,s){return s.length?this==empty?DecorationSet.create(e,s):this.addInner(e,s,0):this}addInner(e,s,a){let d,b=0;e.forEach((_e,nt)=>{let rt=nt+a,ct;if(ct=takeSpansForNode(s,_e,rt)){for(d||(d=this.children.slice());b<d.length&&d[b]<nt;)b+=3;d[b]==nt?d[b+2]=d[b+2].addInner(_e,ct,rt+1):d.splice(b,0,nt,nt+_e.nodeSize,buildTree(ct,_e,rt+1,noSpec)),b+=3}});let _=moveSpans(b?withoutNulls(s):s,-a);for(let _e=0;_e<_.length;_e++)_[_e].type.valid(e,_[_e])||_.splice(_e--,1);return new DecorationSet(_.length?this.local.concat(_).sort(byPos):this.local,d||this.children)}remove(e){return e.length==0||this==empty?this:this.removeInner(e,0)}removeInner(e,s){let a=this.children,d=this.local;for(let b=0;b<a.length;b+=3){let _,_e=a[b]+s,nt=a[b+1]+s;for(let ct=0,dt;ct<e.length;ct++)(dt=e[ct])&&dt.from>_e&&dt.to<nt&&(e[ct]=null,(_||(_=[])).push(dt));if(!_)continue;a==this.children&&(a=this.children.slice());let rt=a[b+2].removeInner(_,_e+1);rt!=empty?a[b+2]=rt:(a.splice(b,3),b-=3)}if(d.length){for(let b=0,_;b<e.length;b++)if(_=e[b])for(let _e=0;_e<d.length;_e++)d[_e].eq(_,s)&&(d==this.local&&(d=this.local.slice()),d.splice(_e--,1))}return a==this.children&&d==this.local?this:d.length||a.length?new DecorationSet(d,a):empty}forChild(e,s){if(this==empty)return this;if(s.isLeaf)return DecorationSet.empty;let a,d;for(let _e=0;_e<this.children.length;_e+=3)if(this.children[_e]>=e){this.children[_e]==e&&(a=this.children[_e+2]);break}let b=e+1,_=b+s.content.size;for(let _e=0;_e<this.local.length;_e++){let nt=this.local[_e];if(nt.from<_&&nt.to>b&&nt.type instanceof InlineType){let rt=Math.max(b,nt.from)-b,ct=Math.min(_,nt.to)-b;rt<ct&&(d||(d=[])).push(nt.copy(rt,ct))}}if(d){let _e=new DecorationSet(d.sort(byPos),none);return a?new DecorationGroup([_e,a]):_e}return a||empty}eq(e){if(this==e)return!0;if(!(e instanceof DecorationSet)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let s=0;s<this.local.length;s++)if(!this.local[s].eq(e.local[s]))return!1;for(let s=0;s<this.children.length;s+=3)if(this.children[s]!=e.children[s]||this.children[s+1]!=e.children[s+1]||!this.children[s+2].eq(e.children[s+2]))return!1;return!0}locals(e){return removeOverlap(this.localsInner(e))}localsInner(e){if(this==empty)return none;if(e.inlineContent||!this.local.some(InlineType.is))return this.local;let s=[];for(let a=0;a<this.local.length;a++)this.local[a].type instanceof InlineType||s.push(this.local[a]);return s}forEachSet(e){e(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(e){this.members=e}map(e,s){const a=this.members.map(d=>d.map(e,s,noSpec));return DecorationGroup.from(a)}forChild(e,s){if(s.isLeaf)return DecorationSet.empty;let a=[];for(let d=0;d<this.members.length;d++){let b=this.members[d].forChild(e,s);b!=empty&&(b instanceof DecorationGroup?a=a.concat(b.members):a.push(b))}return DecorationGroup.from(a)}eq(e){if(!(e instanceof DecorationGroup)||e.members.length!=this.members.length)return!1;for(let s=0;s<this.members.length;s++)if(!this.members[s].eq(e.members[s]))return!1;return!0}locals(e){let s,a=!0;for(let d=0;d<this.members.length;d++){let b=this.members[d].localsInner(e);if(b.length)if(!s)s=b;else{a&&(s=s.slice(),a=!1);for(let _=0;_<b.length;_++)s.push(b[_])}}return s?removeOverlap(a?s:s.sort(byPos)):none}static from(e){switch(e.length){case 0:return empty;case 1:return e[0];default:return new DecorationGroup(e.every(s=>s instanceof DecorationSet)?e:e.reduce((s,a)=>s.concat(a instanceof DecorationSet?a:a.members),[]))}}forEachSet(e){for(let s=0;s<this.members.length;s++)this.members[s].forEachSet(e)}}function mapChildren(o,e,s,a,d,b,_){let _e=o.slice();for(let rt=0,ct=b;rt<s.maps.length;rt++){let dt=0;s.maps[rt].forEach((pt,bt,xt,wt)=>{let Tt=wt-xt-(bt-pt);for(let Rt=0;Rt<_e.length;Rt+=3){let Mt=_e[Rt+1];if(Mt<0||pt>Mt+ct-dt)continue;let Et=_e[Rt]+ct-dt;bt>=Et?_e[Rt+1]=pt<=Et?-2:-1:pt>=ct&&Tt&&(_e[Rt]+=Tt,_e[Rt+1]+=Tt)}dt+=Tt}),ct=s.maps[rt].map(ct,-1)}let nt=!1;for(let rt=0;rt<_e.length;rt+=3)if(_e[rt+1]<0){if(_e[rt+1]==-2){nt=!0,_e[rt+1]=-1;continue}let ct=s.map(o[rt]+b),dt=ct-d;if(dt<0||dt>=a.content.size){nt=!0;continue}let pt=s.map(o[rt+1]+b,-1),bt=pt-d,{index:xt,offset:wt}=a.content.findIndex(dt),Tt=a.maybeChild(xt);if(Tt&&wt==dt&&wt+Tt.nodeSize==bt){let Rt=_e[rt+2].mapInner(s,Tt,ct+1,o[rt]+b+1,_);Rt!=empty?(_e[rt]=dt,_e[rt+1]=bt,_e[rt+2]=Rt):(_e[rt+1]=-2,nt=!0)}else nt=!0}if(nt){let rt=mapAndGatherRemainingDecorations(_e,o,e,s,d,b,_),ct=buildTree(rt,a,0,_);e=ct.local;for(let dt=0;dt<_e.length;dt+=3)_e[dt+1]<0&&(_e.splice(dt,3),dt-=3);for(let dt=0,pt=0;dt<ct.children.length;dt+=3){let bt=ct.children[dt];for(;pt<_e.length&&_e[pt]<bt;)pt+=3;_e.splice(pt,0,ct.children[dt],ct.children[dt+1],ct.children[dt+2])}}return new DecorationSet(e.sort(byPos),_e)}function moveSpans(o,e){if(!e||!o.length)return o;let s=[];for(let a=0;a<o.length;a++){let d=o[a];s.push(new Decoration(d.from+e,d.to+e,d.type))}return s}function mapAndGatherRemainingDecorations(o,e,s,a,d,b,_){function _e(nt,rt){for(let ct=0;ct<nt.local.length;ct++){let dt=nt.local[ct].map(a,d,rt);dt?s.push(dt):_.onRemove&&_.onRemove(nt.local[ct].spec)}for(let ct=0;ct<nt.children.length;ct+=3)_e(nt.children[ct+2],nt.children[ct]+rt+1)}for(let nt=0;nt<o.length;nt+=3)o[nt+1]==-1&&_e(o[nt+2],e[nt]+b+1);return s}function takeSpansForNode(o,e,s){if(e.isLeaf)return null;let a=s+e.nodeSize,d=null;for(let b=0,_;b<o.length;b++)(_=o[b])&&_.from>s&&_.to<a&&((d||(d=[])).push(_),o[b]=null);return d}function withoutNulls(o){let e=[];for(let s=0;s<o.length;s++)o[s]!=null&&e.push(o[s]);return e}function buildTree(o,e,s,a){let d=[],b=!1;e.forEach((_e,nt)=>{let rt=takeSpansForNode(o,_e,nt+s);if(rt){b=!0;let ct=buildTree(rt,_e,s+nt+1,a);ct!=empty&&d.push(nt,nt+_e.nodeSize,ct)}});let _=moveSpans(b?withoutNulls(o):o,-s).sort(byPos);for(let _e=0;_e<_.length;_e++)_[_e].type.valid(e,_[_e])||(a.onRemove&&a.onRemove(_[_e].spec),_.splice(_e--,1));return _.length||d.length?new DecorationSet(_,d):empty}function byPos(o,e){return o.from-e.from||o.to-e.to}function removeOverlap(o){let e=o;for(let s=0;s<e.length-1;s++){let a=e[s];if(a.from!=a.to)for(let d=s+1;d<e.length;d++){let b=e[d];if(b.from==a.from){b.to!=a.to&&(e==o&&(e=o.slice()),e[d]=b.copy(b.from,a.to),insertAhead(e,d+1,b.copy(a.to,b.to)));continue}else{b.from<a.to&&(e==o&&(e=o.slice()),e[s]=a.copy(a.from,b.from),insertAhead(e,d,a.copy(b.from,a.to)));break}}}return e}function insertAhead(o,e,s){for(;e<o.length&&byPos(s,o[e])>0;)e++;o.splice(e,0,s)}function viewDecorations(o){let e=[];return o.someProp("decorations",s=>{let a=s(o.state);a&&a!=empty&&e.push(a)}),o.cursorWrapper&&e.push(DecorationSet.create(o.state.doc,[o.cursorWrapper.deco])),DecorationGroup.from(e)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$1&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class DOMObserver{constructor(e,s){this.view=e,this.handleDOMChange=s,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(a=>{for(let d=0;d<a.length;d++)this.queue.push(a[d]);ie$1&&ie_version<=11&&a.some(d=>d.type=="childList"&&d.removedNodes.length||d.type=="characterData"&&d.oldValue.length>d.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=a=>{this.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let s=0;s<e.length;s++)this.queue.push(e[s]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$1&&ie_version<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let s=new Set,a;for(let b=e.focusNode;b;b=parentNode(b))s.add(b);for(let b=e.anchorNode;b;b=parentNode(b))if(s.has(b)){a=b;break}let d=a&&this.view.docView.nearestDesc(a);if(d&&d.ignoreMutation({type:"selection",target:a.nodeType==3?a.parentNode:a}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let s=this.pendingRecords();s.length&&(this.queue=[]);let a=e.domSelectionRange(),d=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(a)&&hasFocusAndSelection(e)&&!this.ignoreSelectionChange(a),b=-1,_=-1,_e=!1,nt=[];if(e.editable)for(let ct=0;ct<s.length;ct++){let dt=this.registerMutation(s[ct],nt);dt&&(b=b<0?dt.from:Math.min(dt.from,b),_=_<0?dt.to:Math.max(dt.to,_),dt.typeOver&&(_e=!0))}if(gecko&&nt.length){let ct=nt.filter(dt=>dt.nodeName=="BR");if(ct.length==2){let[dt,pt]=ct;dt.parentNode&&dt.parentNode.parentNode==pt.parentNode?pt.remove():dt.remove()}else{let{focusNode:dt}=this.currentSelection;for(let pt of ct){let bt=pt.parentNode;bt&&bt.nodeName=="LI"&&(!dt||blockParent(e,dt)!=bt)&&pt.remove()}}}let rt=null;b<0&&d&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&selectionCollapsed(a)&&(rt=selectionFromDOM(e))&&rt.eq(Selection.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,selectionToDOM(e),this.currentSelection.set(a),e.scrollToSelection()):(b>-1||d)&&(b>-1&&(e.docView.markDirty(b,_),checkCSS(e)),this.handleDOMChange(b,_,_e,nt),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(a)||selectionToDOM(e),this.currentSelection.set(a))}registerMutation(e,s){if(s.indexOf(e.target)>-1)return null;let a=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(a==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!a||a.ignoreMutation(e))return null;if(e.type=="childList"){for(let ct=0;ct<e.addedNodes.length;ct++){let dt=e.addedNodes[ct];s.push(dt),dt.nodeType==3&&(this.lastChangedTextNode=dt)}if(a.contentDOM&&a.contentDOM!=a.dom&&!a.contentDOM.contains(e.target))return{from:a.posBefore,to:a.posAfter};let d=e.previousSibling,b=e.nextSibling;if(ie$1&&ie_version<=11&&e.addedNodes.length)for(let ct=0;ct<e.addedNodes.length;ct++){let{previousSibling:dt,nextSibling:pt}=e.addedNodes[ct];(!dt||Array.prototype.indexOf.call(e.addedNodes,dt)<0)&&(d=dt),(!pt||Array.prototype.indexOf.call(e.addedNodes,pt)<0)&&(b=pt)}let _=d&&d.parentNode==e.target?domIndex(d)+1:0,_e=a.localPosFromDOM(e.target,_,-1),nt=b&&b.parentNode==e.target?domIndex(b):e.target.childNodes.length,rt=a.localPosFromDOM(e.target,nt,1);return{from:_e,to:rt}}else return e.type=="attributes"?{from:a.posAtStart-a.border,to:a.posAtEnd+a.border}:(this.lastChangedTextNode=e.target,{from:a.posAtStart,to:a.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(o){if(!cssChecked.has(o)&&(cssChecked.set(o,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(o.dom).whiteSpace)!==-1)){if(o.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(o,e){let s=e.startContainer,a=e.startOffset,d=e.endContainer,b=e.endOffset,_=o.domAtPos(o.state.selection.anchor);return isEquivalentPosition(_.node,_.offset,d,b)&&([s,a,d,b]=[d,b,s,a]),{anchorNode:s,anchorOffset:a,focusNode:d,focusOffset:b}}function safariShadowSelectionRange(o,e){if(e.getComposedRanges){let d=e.getComposedRanges(o.root)[0];if(d)return rangeToSelectionRange(o,d)}let s;function a(d){d.preventDefault(),d.stopImmediatePropagation(),s=d.getTargetRanges()[0]}return o.dom.addEventListener("beforeinput",a,!0),document.execCommand("indent"),o.dom.removeEventListener("beforeinput",a,!0),s?rangeToSelectionRange(o,s):null}function blockParent(o,e){for(let s=e.parentNode;s&&s!=o.dom;s=s.parentNode){let a=o.docView.nearestDesc(s,!0);if(a&&a.node.isBlock)return s}return null}function parseBetween(o,e,s){let{node:a,fromOffset:d,toOffset:b,from:_,to:_e}=o.docView.parseRange(e,s),nt=o.domSelectionRange(),rt,ct=nt.anchorNode;if(ct&&o.dom.contains(ct.nodeType==1?ct:ct.parentNode)&&(rt=[{node:ct,offset:nt.anchorOffset}],selectionCollapsed(nt)||rt.push({node:nt.focusNode,offset:nt.focusOffset})),chrome&&o.input.lastKeyCode===8)for(let Tt=b;Tt>d;Tt--){let Rt=a.childNodes[Tt-1],Mt=Rt.pmViewDesc;if(Rt.nodeName=="BR"&&!Mt){b=Tt;break}if(!Mt||Mt.size)break}let dt=o.state.doc,pt=o.someProp("domParser")||DOMParser$1.fromSchema(o.state.schema),bt=dt.resolve(_),xt=null,wt=pt.parse(a,{topNode:bt.parent,topMatch:bt.parent.contentMatchAt(bt.index()),topOpen:!0,from:d,to:b,preserveWhitespace:bt.parent.type.whitespace=="pre"?"full":!0,findPositions:rt,ruleFromNode,context:bt});if(rt&&rt[0].pos!=null){let Tt=rt[0].pos,Rt=rt[1]&&rt[1].pos;Rt==null&&(Rt=Tt),xt={anchor:Tt+_,head:Rt+_}}return{doc:wt,sel:xt,from:_,to:_e}}function ruleFromNode(o){let e=o.pmViewDesc;if(e)return e.parseRule();if(o.nodeName=="BR"&&o.parentNode){if(safari&&/^(ul|ol)$/i.test(o.parentNode.nodeName)){let s=document.createElement("div");return s.appendChild(document.createElement("li")),{skip:s}}else if(o.parentNode.lastChild==o||safari&&/^(tr|table)$/i.test(o.parentNode.nodeName))return{ignore:!0}}else if(o.nodeName=="IMG"&&o.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(o,e,s,a,d){let b=o.input.compositionPendingChanges||(o.composing?o.input.compositionID:0);if(o.input.compositionPendingChanges=0,e<0){let dn=o.input.lastSelectionTime>Date.now()-50?o.input.lastSelectionOrigin:null,Pn=selectionFromDOM(o,dn);if(Pn&&!o.state.selection.eq(Pn)){if(chrome&&android&&o.input.lastKeyCode===13&&Date.now()-100<o.input.lastKeyCodeTime&&o.someProp("handleKeyDown",Vt=>Vt(o,keyEvent(13,"Enter"))))return;let an=o.state.tr.setSelection(Pn);dn=="pointer"?an.setMeta("pointer",!0):dn=="key"&&an.scrollIntoView(),b&&an.setMeta("composition",b),o.dispatch(an)}return}let _=o.state.doc.resolve(e),_e=_.sharedDepth(s);e=_.before(_e+1),s=o.state.doc.resolve(s).after(_e+1);let nt=o.state.selection,rt=parseBetween(o,e,s),ct=o.state.doc,dt=ct.slice(rt.from,rt.to),pt,bt;o.input.lastKeyCode===8&&Date.now()-100<o.input.lastKeyCodeTime?(pt=o.state.selection.to,bt="end"):(pt=o.state.selection.from,bt="start"),o.input.lastKeyCode=null;let xt=findDiff(dt.content,rt.doc.content,rt.from,pt,bt);if(xt&&o.input.domChangeCount++,(ios&&o.input.lastIOSEnter>Date.now()-225||android)&&d.some(dn=>dn.nodeType==1&&!isInline.test(dn.nodeName))&&(!xt||xt.endA>=xt.endB)&&o.someProp("handleKeyDown",dn=>dn(o,keyEvent(13,"Enter")))){o.input.lastIOSEnter=0;return}if(!xt)if(a&&nt instanceof TextSelection&&!nt.empty&&nt.$head.sameParent(nt.$anchor)&&!o.composing&&!(rt.sel&&rt.sel.anchor!=rt.sel.head))xt={start:nt.from,endA:nt.to,endB:nt.to};else{if(rt.sel){let dn=resolveSelection(o,o.state.doc,rt.sel);if(dn&&!dn.eq(o.state.selection)){let Pn=o.state.tr.setSelection(dn);b&&Pn.setMeta("composition",b),o.dispatch(Pn)}}return}o.state.selection.from<o.state.selection.to&&xt.start==xt.endB&&o.state.selection instanceof TextSelection&&(xt.start>o.state.selection.from&&xt.start<=o.state.selection.from+2&&o.state.selection.from>=rt.from?xt.start=o.state.selection.from:xt.endA<o.state.selection.to&&xt.endA>=o.state.selection.to-2&&o.state.selection.to<=rt.to&&(xt.endB+=o.state.selection.to-xt.endA,xt.endA=o.state.selection.to)),ie$1&&ie_version<=11&&xt.endB==xt.start+1&&xt.endA==xt.start&&xt.start>rt.from&&rt.doc.textBetween(xt.start-rt.from-1,xt.start-rt.from+1)==" "&&(xt.start--,xt.endA--,xt.endB--);let wt=rt.doc.resolveNoCache(xt.start-rt.from),Tt=rt.doc.resolveNoCache(xt.endB-rt.from),Rt=ct.resolve(xt.start),Mt=wt.sameParent(Tt)&&wt.parent.inlineContent&&Rt.end()>=xt.endA,Et;if((ios&&o.input.lastIOSEnter>Date.now()-225&&(!Mt||d.some(dn=>dn.nodeName=="DIV"||dn.nodeName=="P"))||!Mt&&wt.pos<rt.doc.content.size&&!wt.sameParent(Tt)&&(Et=Selection.findFrom(rt.doc.resolve(wt.pos+1),1,!0))&&Et.head==Tt.pos)&&o.someProp("handleKeyDown",dn=>dn(o,keyEvent(13,"Enter")))){o.input.lastIOSEnter=0;return}if(o.state.selection.anchor>xt.start&&looksLikeBackspace(ct,xt.start,xt.endA,wt,Tt)&&o.someProp("handleKeyDown",dn=>dn(o,keyEvent(8,"Backspace")))){android&&chrome&&o.domObserver.suppressSelectionUpdates();return}chrome&&android&&xt.endB==xt.start&&(o.input.lastAndroidDelete=Date.now()),android&&!Mt&&wt.start()!=Tt.start()&&Tt.parentOffset==0&&wt.depth==Tt.depth&&rt.sel&&rt.sel.anchor==rt.sel.head&&rt.sel.head==xt.endA&&(xt.endB-=2,Tt=rt.doc.resolveNoCache(xt.endB-rt.from),setTimeout(()=>{o.someProp("handleKeyDown",function(dn){return dn(o,keyEvent(13,"Enter"))})},20));let $t=xt.start,Xt=xt.endA,Zt,Nt,Jt;if(Mt){if(wt.pos==Tt.pos)ie$1&&ie_version<=11&&wt.parentOffset==0&&(o.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(o),20)),Zt=o.state.tr.delete($t,Xt),Nt=ct.resolve(xt.start).marksAcross(ct.resolve(xt.endA));else if(xt.endA==xt.endB&&(Jt=isMarkChange(wt.parent.content.cut(wt.parentOffset,Tt.parentOffset),Rt.parent.content.cut(Rt.parentOffset,xt.endA-Rt.start()))))Zt=o.state.tr,Jt.type=="add"?Zt.addMark($t,Xt,Jt.mark):Zt.removeMark($t,Xt,Jt.mark);else if(wt.parent.child(wt.index()).isText&&wt.index()==Tt.index()-(Tt.textOffset?0:1)){let dn=wt.parent.textBetween(wt.parentOffset,Tt.parentOffset);if(o.someProp("handleTextInput",Pn=>Pn(o,$t,Xt,dn)))return;Zt=o.state.tr.insertText(dn,$t,Xt)}}if(Zt||(Zt=o.state.tr.replace($t,Xt,rt.doc.slice(xt.start-rt.from,xt.endB-rt.from))),rt.sel){let dn=resolveSelection(o,Zt.doc,rt.sel);dn&&!(chrome&&android&&o.composing&&dn.empty&&(xt.start!=xt.endB||o.input.lastAndroidDelete<Date.now()-100)&&(dn.head==$t||dn.head==Zt.mapping.map(Xt)-1)||ie$1&&dn.empty&&dn.head==$t)&&Zt.setSelection(dn)}Nt&&Zt.ensureMarks(Nt),b&&Zt.setMeta("composition",b),o.dispatch(Zt.scrollIntoView())}function resolveSelection(o,e,s){return Math.max(s.anchor,s.head)>e.content.size?null:selectionBetween(o,e.resolve(s.anchor),e.resolve(s.head))}function isMarkChange(o,e){let s=o.firstChild.marks,a=e.firstChild.marks,d=s,b=a,_,_e,nt;for(let ct=0;ct<a.length;ct++)d=a[ct].removeFromSet(d);for(let ct=0;ct<s.length;ct++)b=s[ct].removeFromSet(b);if(d.length==1&&b.length==0)_e=d[0],_="add",nt=ct=>ct.mark(_e.addToSet(ct.marks));else if(d.length==0&&b.length==1)_e=b[0],_="remove",nt=ct=>ct.mark(_e.removeFromSet(ct.marks));else return null;let rt=[];for(let ct=0;ct<e.childCount;ct++)rt.push(nt(e.child(ct)));if(Fragment.from(rt).eq(o))return{mark:_e,type:_}}function looksLikeBackspace(o,e,s,a,d){if(s-e<=d.pos-a.pos||skipClosingAndOpening(a,!0,!1)<d.pos)return!1;let b=o.resolve(e);if(!a.parent.isTextblock){let _e=b.nodeAfter;return _e!=null&&s==e+_e.nodeSize}if(b.parentOffset<b.parent.content.size||!b.parent.isTextblock)return!1;let _=o.resolve(skipClosingAndOpening(b,!0,!0));return!_.parent.isTextblock||_.pos>s||skipClosingAndOpening(_,!0,!1)<s?!1:a.parent.content.cut(a.parentOffset).eq(_.parent.content)}function skipClosingAndOpening(o,e,s){let a=o.depth,d=e?o.end():o.pos;for(;a>0&&(e||o.indexAfter(a)==o.node(a).childCount);)a--,d++,e=!1;if(s){let b=o.node(a).maybeChild(o.indexAfter(a));for(;b&&!b.isLeaf;)b=b.firstChild,d++}return d}function findDiff(o,e,s,a,d){let b=o.findDiffStart(e,s);if(b==null)return null;let{a:_,b:_e}=o.findDiffEnd(e,s+o.size,s+e.size);if(d=="end"){let nt=Math.max(0,b-Math.min(_,_e));a-=_+nt-b}if(_<b&&o.size<e.size){let nt=a<=b&&a>=_?b-a:0;b-=nt,b&&b<e.size&&isSurrogatePair(e.textBetween(b-1,b+1))&&(b+=nt?1:-1),_e=b+(_e-_),_=b}else if(_e<b){let nt=a<=b&&a>=_e?b-a:0;b-=nt,b&&b<o.size&&isSurrogatePair(o.textBetween(b-1,b+1))&&(b+=nt?1:-1),_=b+(_-_e),_e=b}return{start:b,endA:_,endB:_e}}function isSurrogatePair(o){if(o.length!=2)return!1;let e=o.charCodeAt(0),s=o.charCodeAt(1);return e>=56320&&e<=57343&&s>=55296&&s<=56319}class EditorView{constructor(e,s){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=s,this.state=s.state,this.directPlugins=s.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(a,d,b,_)=>readDOMChange(this,a,d,b,_)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let s in e)this._props[s]=e[s];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let s=this._props;this._props=e,e.plugins&&(e.plugins.forEach(checkStateComponent),this.directPlugins=e.plugins),this.updateStateInner(e.state,s)}setProps(e){let s={};for(let a in this._props)s[a]=this._props[a];s.state=this.state;for(let a in e)s[a]=e[a];this.update(s)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,s){var a;let d=this.state,b=!1,_=!1;e.storedMarks&&this.composing&&(clearComposition(this),_=!0),this.state=e;let _e=d.plugins!=e.plugins||this._props.plugins!=s.plugins;if(_e||this._props.plugins!=s.plugins||this._props.nodeViews!=s.nodeViews){let bt=buildNodeViews(this);changedNodeViews(bt,this.nodeViews)&&(this.nodeViews=bt,b=!0)}(_e||s.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let nt=viewDecorations(this),rt=computeDocDeco(this),ct=d.plugins!=e.plugins&&!d.doc.eq(e.doc)?"reset":e.scrollToSelection>d.scrollToSelection?"to selection":"preserve",dt=b||!this.docView.matchesNode(e.doc,rt,nt);(dt||!e.selection.eq(d.selection))&&(_=!0);let pt=ct=="preserve"&&_&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(_){this.domObserver.stop();let bt=dt&&(ie$1||chrome)&&!this.composing&&!d.selection.empty&&!e.selection.empty&&selectionContextChanged(d.selection,e.selection);if(dt){let xt=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(b||!this.docView.update(e.doc,rt,nt,this))&&(this.docView.updateOuterDeco(rt),this.docView.destroy(),this.docView=docViewDesc(e.doc,rt,nt,this.dom,this)),xt&&!this.trackWrites&&(bt=!0)}bt||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,bt):(syncNodeSelection(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(d),!((a=this.dragging)===null||a===void 0)&&a.node&&!d.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,d),ct=="reset"?this.dom.scrollTop=0:ct=="to selection"?this.scrollToSelection():pt&&resetScrollPos(pt)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",s=>s(this)))if(this.state.selection instanceof NodeSelection){let s=this.docView.domAfterPos(this.state.selection.from);s.nodeType==1&&scrollRectIntoView(this,s.getBoundingClientRect(),e)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s];a.spec.view&&this.pluginViews.push(a.spec.view(this))}for(let s=0;s<this.state.plugins.length;s++){let a=this.state.plugins[s];a.spec.view&&this.pluginViews.push(a.spec.view(this))}}else for(let s=0;s<this.pluginViews.length;s++){let a=this.pluginViews[s];a.update&&a.update(this,e)}}updateDraggedNode(e,s){let a=e.node,d=-1;if(this.state.doc.nodeAt(a.from)==a.node)d=a.from;else{let b=a.from+(this.state.doc.content.size-s.doc.content.size);(b>0&&this.state.doc.nodeAt(b))==a.node&&(d=b)}this.dragging=new Dragging(e.slice,e.move,d<0?void 0:NodeSelection.create(this.state.doc,d))}someProp(e,s){let a=this._props&&this._props[e],d;if(a!=null&&(d=s?s(a):a))return d;for(let _=0;_<this.directPlugins.length;_++){let _e=this.directPlugins[_].props[e];if(_e!=null&&(d=s?s(_e):_e))return d}let b=this.state.plugins;if(b)for(let _=0;_<b.length;_++){let _e=b[_].props[e];if(_e!=null&&(d=s?s(_e):_e))return d}}hasFocus(){if(ie$1){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let s=this.dom.parentNode;s;s=s.parentNode)if(s.nodeType==9||s.nodeType==11&&s.host)return s.getSelection||(Object.getPrototypeOf(s).getSelection=()=>s.ownerDocument.getSelection()),this._root=s}return e||document}updateRoot(){this._root=null}posAtCoords(e){return posAtCoords(this,e)}coordsAtPos(e,s=1){return coordsAtPos(this,e,s)}domAtPos(e,s=0){return this.docView.domFromPos(e,s)}nodeDOM(e){let s=this.docView.descAt(e);return s?s.nodeDOM:null}posAtDOM(e,s,a=-1){let d=this.docView.posFromDOM(e,s,a);if(d==null)throw new RangeError("DOM position not inside the editor");return d}endOfTextblock(e,s){return endOfTextblock(this,s||this.state,e)}pasteHTML(e,s){return doPaste(this,"",e,!1,s||new ClipboardEvent("paste"))}pasteText(e,s){return doPaste(this,e,null,!0,s||new ClipboardEvent("paste"))}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return dispatchEvent(this,e)}dispatch(e){let s=this._props.dispatchTransaction;s?s.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function computeDocDeco(o){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(o.editable),o.someProp("attributes",s=>{if(typeof s=="function"&&(s=s(o.state)),s)for(let a in s)a=="class"?e.class+=" "+s[a]:a=="style"?e.style=(e.style?e.style+";":"")+s[a]:!e[a]&&a!="contenteditable"&&a!="nodeName"&&(e[a]=String(s[a]))}),e.translate||(e.translate="no"),[Decoration.node(0,o.state.doc.content.size,e)]}function updateCursorWrapper(o){if(o.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),o.cursorWrapper={dom:e,deco:Decoration.widget(o.state.selection.from,e,{raw:!0,marks:o.markCursor})}}else o.cursorWrapper=null}function getEditable(o){return!o.someProp("editable",e=>e(o.state)===!1)}function selectionContextChanged(o,e){let s=Math.min(o.$anchor.sharedDepth(o.head),e.$anchor.sharedDepth(e.head));return o.$anchor.start(s)!=e.$anchor.start(s)}function buildNodeViews(o){let e=Object.create(null);function s(a){for(let d in a)Object.prototype.hasOwnProperty.call(e,d)||(e[d]=a[d])}return o.someProp("nodeViews",s),o.someProp("markViews",s),e}function changedNodeViews(o,e){let s=0,a=0;for(let d in o){if(o[d]!=e[d])return!0;s++}for(let d in e)a++;return s!=a}function checkStateComponent(o){if(o.spec.state||o.spec.filterTransaction||o.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(o){var e=mac$1&&o.metaKey&&o.shiftKey&&!o.ctrlKey&&!o.altKey||ie&&o.shiftKey&&o.key&&o.key.length==1||o.key=="Unidentified",s=!e&&o.key||(o.shiftKey?shift:base)[o.keyCode]||o.key||"Unidentified";return s=="Esc"&&(s="Escape"),s=="Del"&&(s="Delete"),s=="Left"&&(s="ArrowLeft"),s=="Up"&&(s="ArrowUp"),s=="Right"&&(s="ArrowRight"),s=="Down"&&(s="ArrowDown"),s}const mac=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function normalizeKeyName$1(o){let e=o.split(/-(?!$)/),s=e[e.length-1];s=="Space"&&(s=" ");let a,d,b,_;for(let _e=0;_e<e.length-1;_e++){let nt=e[_e];if(/^(cmd|meta|m)$/i.test(nt))_=!0;else if(/^a(lt)?$/i.test(nt))a=!0;else if(/^(c|ctrl|control)$/i.test(nt))d=!0;else if(/^s(hift)?$/i.test(nt))b=!0;else if(/^mod$/i.test(nt))mac?_=!0:d=!0;else throw new Error("Unrecognized modifier name: "+nt)}return a&&(s="Alt-"+s),d&&(s="Ctrl-"+s),_&&(s="Meta-"+s),b&&(s="Shift-"+s),s}function normalize(o){let e=Object.create(null);for(let s in o)e[normalizeKeyName$1(s)]=o[s];return e}function modifiers(o,e,s=!0){return e.altKey&&(o="Alt-"+o),e.ctrlKey&&(o="Ctrl-"+o),e.metaKey&&(o="Meta-"+o),s&&e.shiftKey&&(o="Shift-"+o),o}function keymap(o){return new Plugin({props:{handleKeyDown:keydownHandler(o)}})}function keydownHandler(o){let e=normalize(o);return function(s,a){let d=keyName(a),b,_=e[modifiers(d,a)];if(_&&_(s.state,s.dispatch,s))return!0;if(d.length==1&&d!=" "){if(a.shiftKey){let _e=e[modifiers(d,a,!1)];if(_e&&_e(s.state,s.dispatch,s))return!0}if((a.shiftKey||a.altKey||a.metaKey||d.charCodeAt(0)>127)&&(b=base[a.keyCode])&&b!=d){let _e=e[modifiers(b,a)];if(_e&&_e(s.state,s.dispatch,s))return!0}}return!1}}const deleteSelection$1=(o,e)=>o.selection.empty?!1:(e&&e(o.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(o,e){let{$cursor:s}=o.selection;return!s||(e?!e.endOfTextblock("backward",o):s.parentOffset>0)?null:s}const joinBackward$1=(o,e,s)=>{let a=atBlockStart(o,s);if(!a)return!1;let d=findCutBefore(a);if(!d){let _=a.blockRange(),_e=_&&liftTarget(_);return _e==null?!1:(e&&e(o.tr.lift(_,_e).scrollIntoView()),!0)}let b=d.nodeBefore;if(deleteBarrier(o,d,e,-1))return!0;if(a.parent.content.size==0&&(textblockAt(b,"end")||NodeSelection.isSelectable(b)))for(let _=a.depth;;_--){let _e=replaceStep(o.doc,a.before(_),a.after(_),Slice.empty);if(_e&&_e.slice.size<_e.to-_e.from){if(e){let nt=o.tr.step(_e);nt.setSelection(textblockAt(b,"end")?Selection.findFrom(nt.doc.resolve(nt.mapping.map(d.pos,-1)),-1):NodeSelection.create(nt.doc,d.pos-b.nodeSize)),e(nt.scrollIntoView())}return!0}if(_==1||a.node(_-1).childCount>1)break}return b.isAtom&&d.depth==a.depth-1?(e&&e(o.tr.delete(d.pos-b.nodeSize,d.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(o,e,s)=>{let a=atBlockStart(o,s);if(!a)return!1;let d=findCutBefore(a);return d?joinTextblocksAround(o,d,e):!1},joinTextblockForward$1=(o,e,s)=>{let a=atBlockEnd(o,s);if(!a)return!1;let d=findCutAfter(a);return d?joinTextblocksAround(o,d,e):!1};function joinTextblocksAround(o,e,s){let a=e.nodeBefore,d=a,b=e.pos-1;for(;!d.isTextblock;b--){if(d.type.spec.isolating)return!1;let ct=d.lastChild;if(!ct)return!1;d=ct}let _=e.nodeAfter,_e=_,nt=e.pos+1;for(;!_e.isTextblock;nt++){if(_e.type.spec.isolating)return!1;let ct=_e.firstChild;if(!ct)return!1;_e=ct}let rt=replaceStep(o.doc,b,nt,Slice.empty);if(!rt||rt.from!=b||rt instanceof ReplaceStep&&rt.slice.size>=nt-b)return!1;if(s){let ct=o.tr.step(rt);ct.setSelection(TextSelection.create(ct.doc,b)),s(ct.scrollIntoView())}return!0}function textblockAt(o,e,s=!1){for(let a=o;a;a=e=="start"?a.firstChild:a.lastChild){if(a.isTextblock)return!0;if(s&&a.childCount!=1)return!1}return!1}const selectNodeBackward$1=(o,e,s)=>{let{$head:a,empty:d}=o.selection,b=a;if(!d)return!1;if(a.parent.isTextblock){if(s?!s.endOfTextblock("backward",o):a.parentOffset>0)return!1;b=findCutBefore(a)}let _=b&&b.nodeBefore;return!_||!NodeSelection.isSelectable(_)?!1:(e&&e(o.tr.setSelection(NodeSelection.create(o.doc,b.pos-_.nodeSize)).scrollIntoView()),!0)};function findCutBefore(o){if(!o.parent.type.spec.isolating)for(let e=o.depth-1;e>=0;e--){if(o.index(e)>0)return o.doc.resolve(o.before(e+1));if(o.node(e).type.spec.isolating)break}return null}function atBlockEnd(o,e){let{$cursor:s}=o.selection;return!s||(e?!e.endOfTextblock("forward",o):s.parentOffset<s.parent.content.size)?null:s}const joinForward$1=(o,e,s)=>{let a=atBlockEnd(o,s);if(!a)return!1;let d=findCutAfter(a);if(!d)return!1;let b=d.nodeAfter;if(deleteBarrier(o,d,e,1))return!0;if(a.parent.content.size==0&&(textblockAt(b,"start")||NodeSelection.isSelectable(b))){let _=replaceStep(o.doc,a.before(),a.after(),Slice.empty);if(_&&_.slice.size<_.to-_.from){if(e){let _e=o.tr.step(_);_e.setSelection(textblockAt(b,"start")?Selection.findFrom(_e.doc.resolve(_e.mapping.map(d.pos)),1):NodeSelection.create(_e.doc,_e.mapping.map(d.pos))),e(_e.scrollIntoView())}return!0}}return b.isAtom&&d.depth==a.depth-1?(e&&e(o.tr.delete(d.pos,d.pos+b.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(o,e,s)=>{let{$head:a,empty:d}=o.selection,b=a;if(!d)return!1;if(a.parent.isTextblock){if(s?!s.endOfTextblock("forward",o):a.parentOffset<a.parent.content.size)return!1;b=findCutAfter(a)}let _=b&&b.nodeAfter;return!_||!NodeSelection.isSelectable(_)?!1:(e&&e(o.tr.setSelection(NodeSelection.create(o.doc,b.pos)).scrollIntoView()),!0)};function findCutAfter(o){if(!o.parent.type.spec.isolating)for(let e=o.depth-1;e>=0;e--){let s=o.node(e);if(o.index(e)+1<s.childCount)return o.doc.resolve(o.after(e+1));if(s.type.spec.isolating)break}return null}const joinUp$1=(o,e)=>{let s=o.selection,a=s instanceof NodeSelection,d;if(a){if(s.node.isTextblock||!canJoin(o.doc,s.from))return!1;d=s.from}else if(d=joinPoint(o.doc,s.from,-1),d==null)return!1;if(e){let b=o.tr.join(d);a&&b.setSelection(NodeSelection.create(b.doc,d-o.doc.resolve(d).nodeBefore.nodeSize)),e(b.scrollIntoView())}return!0},joinDown$1=(o,e)=>{let s=o.selection,a;if(s instanceof NodeSelection){if(s.node.isTextblock||!canJoin(o.doc,s.to))return!1;a=s.to}else if(a=joinPoint(o.doc,s.to,1),a==null)return!1;return e&&e(o.tr.join(a).scrollIntoView()),!0},lift$1=(o,e)=>{let{$from:s,$to:a}=o.selection,d=s.blockRange(a),b=d&&liftTarget(d);return b==null?!1:(e&&e(o.tr.lift(d,b).scrollIntoView()),!0)},newlineInCode$1=(o,e)=>{let{$head:s,$anchor:a}=o.selection;return!s.parent.type.spec.code||!s.sameParent(a)?!1:(e&&e(o.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(o){for(let e=0;e<o.edgeCount;e++){let{type:s}=o.edge(e);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}const exitCode$1=(o,e)=>{let{$head:s,$anchor:a}=o.selection;if(!s.parent.type.spec.code||!s.sameParent(a))return!1;let d=s.node(-1),b=s.indexAfter(-1),_=defaultBlockAt$1(d.contentMatchAt(b));if(!_||!d.canReplaceWith(b,b,_))return!1;if(e){let _e=s.after(),nt=o.tr.replaceWith(_e,_e,_.createAndFill());nt.setSelection(Selection.near(nt.doc.resolve(_e),1)),e(nt.scrollIntoView())}return!0},createParagraphNear$1=(o,e)=>{let s=o.selection,{$from:a,$to:d}=s;if(s instanceof AllSelection||a.parent.inlineContent||d.parent.inlineContent)return!1;let b=defaultBlockAt$1(d.parent.contentMatchAt(d.indexAfter()));if(!b||!b.isTextblock)return!1;if(e){let _=(!a.parentOffset&&d.index()<d.parent.childCount?a:d).pos,_e=o.tr.insert(_,b.createAndFill());_e.setSelection(TextSelection.create(_e.doc,_+1)),e(_e.scrollIntoView())}return!0},liftEmptyBlock$1=(o,e)=>{let{$cursor:s}=o.selection;if(!s||s.parent.content.size)return!1;if(s.depth>1&&s.after()!=s.end(-1)){let b=s.before();if(canSplit(o.doc,b))return e&&e(o.tr.split(b).scrollIntoView()),!0}let a=s.blockRange(),d=a&&liftTarget(a);return d==null?!1:(e&&e(o.tr.lift(a,d).scrollIntoView()),!0)},selectParentNode$1=(o,e)=>{let{$from:s,to:a}=o.selection,d,b=s.sharedDepth(a);return b==0?!1:(d=s.before(b),e&&e(o.tr.setSelection(NodeSelection.create(o.doc,d))),!0)};function joinMaybeClear(o,e,s){let a=e.nodeBefore,d=e.nodeAfter,b=e.index();return!a||!d||!a.type.compatibleContent(d.type)?!1:!a.content.size&&e.parent.canReplace(b-1,b)?(s&&s(o.tr.delete(e.pos-a.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(b,b+1)||!(d.isTextblock||canJoin(o.doc,e.pos))?!1:(s&&s(o.tr.join(e.pos).scrollIntoView()),!0)}function deleteBarrier(o,e,s,a){let d=e.nodeBefore,b=e.nodeAfter,_,_e,nt=d.type.spec.isolating||b.type.spec.isolating;if(!nt&&joinMaybeClear(o,e,s))return!0;let rt=!nt&&e.parent.canReplace(e.index(),e.index()+1);if(rt&&(_=(_e=d.contentMatchAt(d.childCount)).findWrapping(b.type))&&_e.matchType(_[0]||b.type).validEnd){if(s){let bt=e.pos+b.nodeSize,xt=Fragment.empty;for(let Rt=_.length-1;Rt>=0;Rt--)xt=Fragment.from(_[Rt].create(null,xt));xt=Fragment.from(d.copy(xt));let wt=o.tr.step(new ReplaceAroundStep(e.pos-1,bt,e.pos,bt,new Slice(xt,1,0),_.length,!0)),Tt=wt.doc.resolve(bt+2*_.length);Tt.nodeAfter&&Tt.nodeAfter.type==d.type&&canJoin(wt.doc,Tt.pos)&&wt.join(Tt.pos),s(wt.scrollIntoView())}return!0}let ct=b.type.spec.isolating||a>0&&nt?null:Selection.findFrom(e,1),dt=ct&&ct.$from.blockRange(ct.$to),pt=dt&&liftTarget(dt);if(pt!=null&&pt>=e.depth)return s&&s(o.tr.lift(dt,pt).scrollIntoView()),!0;if(rt&&textblockAt(b,"start",!0)&&textblockAt(d,"end")){let bt=d,xt=[];for(;xt.push(bt),!bt.isTextblock;)bt=bt.lastChild;let wt=b,Tt=1;for(;!wt.isTextblock;wt=wt.firstChild)Tt++;if(bt.canReplace(bt.childCount,bt.childCount,wt.content)){if(s){let Rt=Fragment.empty;for(let Et=xt.length-1;Et>=0;Et--)Rt=Fragment.from(xt[Et].copy(Rt));let Mt=o.tr.step(new ReplaceAroundStep(e.pos-xt.length,e.pos+b.nodeSize,e.pos+Tt,e.pos+b.nodeSize-Tt,new Slice(Rt,xt.length,0),0,!0));s(Mt.scrollIntoView())}return!0}}return!1}function selectTextblockSide(o){return function(e,s){let a=e.selection,d=o<0?a.$from:a.$to,b=d.depth;for(;d.node(b).isInline;){if(!b)return!1;b--}return d.node(b).isTextblock?(s&&s(e.tr.setSelection(TextSelection.create(e.doc,o<0?d.start(b):d.end(b)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(o,e=null){return function(s,a){let{$from:d,$to:b}=s.selection,_=d.blockRange(b),_e=_&&findWrapping(_,o,e);return _e?(a&&a(s.tr.wrap(_,_e).scrollIntoView()),!0):!1}}function setBlockType(o,e=null){return function(s,a){let d=!1;for(let b=0;b<s.selection.ranges.length&&!d;b++){let{$from:{pos:_},$to:{pos:_e}}=s.selection.ranges[b];s.doc.nodesBetween(_,_e,(nt,rt)=>{if(d)return!1;if(!(!nt.isTextblock||nt.hasMarkup(o,e)))if(nt.type==o)d=!0;else{let ct=s.doc.resolve(rt),dt=ct.index();d=ct.parent.canReplaceWith(dt,dt+1,o)}})}if(!d)return!1;if(a){let b=s.tr;for(let _=0;_<s.selection.ranges.length;_++){let{$from:{pos:_e},$to:{pos:nt}}=s.selection.ranges[_];b.setBlockType(_e,nt,o,e)}a(b.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(o,e=null){return function(s,a){let{$from:d,$to:b}=s.selection,_=d.blockRange(b),_e=!1,nt=_;if(!_)return!1;if(_.depth>=2&&d.node(_.depth-1).type.compatibleContent(o)&&_.startIndex==0){if(d.index(_.depth-1)==0)return!1;let ct=s.doc.resolve(_.start-2);nt=new NodeRange(ct,ct,_.depth),_.endIndex<_.parent.childCount&&(_=new NodeRange(d,s.doc.resolve(b.end(_.depth)),_.depth)),_e=!0}let rt=findWrapping(nt,o,e,_);return rt?(a&&a(doWrapInList(s.tr,_,rt,_e,o).scrollIntoView()),!0):!1}}function doWrapInList(o,e,s,a,d){let b=Fragment.empty;for(let ct=s.length-1;ct>=0;ct--)b=Fragment.from(s[ct].type.create(s[ct].attrs,b));o.step(new ReplaceAroundStep(e.start-(a?2:0),e.end,e.start,e.end,new Slice(b,0,0),s.length,!0));let _=0;for(let ct=0;ct<s.length;ct++)s[ct].type==d&&(_=ct+1);let _e=s.length-_,nt=e.start+s.length-(a?2:0),rt=e.parent;for(let ct=e.startIndex,dt=e.endIndex,pt=!0;ct<dt;ct++,pt=!1)!pt&&canSplit(o.doc,nt,_e)&&(o.split(nt,_e),nt+=2*_e),nt+=rt.child(ct).nodeSize;return o}function liftListItem$1(o){return function(e,s){let{$from:a,$to:d}=e.selection,b=a.blockRange(d,_=>_.childCount>0&&_.firstChild.type==o);return b?s?a.node(b.depth-1).type==o?liftToOuterList(e,s,o,b):liftOutOfList(e,s,b):!0:!1}}function liftToOuterList(o,e,s,a){let d=o.tr,b=a.end,_=a.$to.end(a.depth);b<_&&(d.step(new ReplaceAroundStep(b-1,_,b,_,new Slice(Fragment.from(s.create(null,a.parent.copy())),1,0),1,!0)),a=new NodeRange(d.doc.resolve(a.$from.pos),d.doc.resolve(_),a.depth));const _e=liftTarget(a);if(_e==null)return!1;d.lift(a,_e);let nt=d.mapping.map(b,-1)-1;return canJoin(d.doc,nt)&&d.join(nt),e(d.scrollIntoView()),!0}function liftOutOfList(o,e,s){let a=o.tr,d=s.parent;for(let bt=s.end,xt=s.endIndex-1,wt=s.startIndex;xt>wt;xt--)bt-=d.child(xt).nodeSize,a.delete(bt-1,bt+1);let b=a.doc.resolve(s.start),_=b.nodeAfter;if(a.mapping.map(s.end)!=s.start+b.nodeAfter.nodeSize)return!1;let _e=s.startIndex==0,nt=s.endIndex==d.childCount,rt=b.node(-1),ct=b.index(-1);if(!rt.canReplace(ct+(_e?0:1),ct+1,_.content.append(nt?Fragment.empty:Fragment.from(d))))return!1;let dt=b.pos,pt=dt+_.nodeSize;return a.step(new ReplaceAroundStep(dt-(_e?1:0),pt+(nt?1:0),dt+1,pt-1,new Slice((_e?Fragment.empty:Fragment.from(d.copy(Fragment.empty))).append(nt?Fragment.empty:Fragment.from(d.copy(Fragment.empty))),_e?0:1,nt?0:1),_e?0:1)),e(a.scrollIntoView()),!0}function sinkListItem$1(o){return function(e,s){let{$from:a,$to:d}=e.selection,b=a.blockRange(d,rt=>rt.childCount>0&&rt.firstChild.type==o);if(!b)return!1;let _=b.startIndex;if(_==0)return!1;let _e=b.parent,nt=_e.child(_-1);if(nt.type!=o)return!1;if(s){let rt=nt.lastChild&&nt.lastChild.type==_e.type,ct=Fragment.from(rt?o.create():null),dt=new Slice(Fragment.from(o.create(null,Fragment.from(_e.type.create(null,ct)))),rt?3:1,0),pt=b.start,bt=b.end;s(e.tr.step(new ReplaceAroundStep(pt-(rt?3:1),bt,pt,bt,dt,1,!0)).scrollIntoView())}return!0}}function createChainableState(o){const{state:e,transaction:s}=o;let{selection:a}=s,{doc:d}=s,{storedMarks:b}=s;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return b},get selection(){return a},get doc(){return d},get tr(){return a=s.selection,d=s.doc,b=s.storedMarks,s}}}class CommandManager{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:s,state:a}=this,{view:d}=s,{tr:b}=a,_=this.buildProps(b);return Object.fromEntries(Object.entries(e).map(([_e,nt])=>[_e,(...ct)=>{const dt=nt(...ct)(_);return!b.getMeta("preventDispatch")&&!this.hasCustomState&&d.dispatch(b),dt}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,s=!0){const{rawCommands:a,editor:d,state:b}=this,{view:_}=d,_e=[],nt=!!e,rt=e||b.tr,ct=()=>(!nt&&s&&!rt.getMeta("preventDispatch")&&!this.hasCustomState&&_.dispatch(rt),_e.every(pt=>pt===!0)),dt={...Object.fromEntries(Object.entries(a).map(([pt,bt])=>[pt,(...wt)=>{const Tt=this.buildProps(rt,s),Rt=bt(...wt)(Tt);return _e.push(Rt),dt}])),run:ct};return dt}createCan(e){const{rawCommands:s,state:a}=this,d=!1,b=e||a.tr,_=this.buildProps(b,d);return{...Object.fromEntries(Object.entries(s).map(([nt,rt])=>[nt,(...ct)=>rt(...ct)({..._,dispatch:void 0})])),chain:()=>this.createChain(b,d)}}buildProps(e,s=!0){const{rawCommands:a,editor:d,state:b}=this,{view:_}=d,_e={tr:e,editor:d,view:_,state:createChainableState({state:b,transaction:e}),dispatch:s?()=>{}:void 0,chain:()=>this.createChain(e,s),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(a).map(([nt,rt])=>[nt,(...ct)=>rt(...ct)(_e)]))}};return _e}}class EventEmitter{constructor(){this.callbacks={}}on(e,s){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(s),this}emit(e,...s){const a=this.callbacks[e];return a&&a.forEach(d=>d.apply(this,s)),this}off(e,s){const a=this.callbacks[e];return a&&(s?this.callbacks[e]=a.filter(d=>d!==s):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function getExtensionField(o,e,s){return o.config[e]===void 0&&o.parent?getExtensionField(o.parent,e,s):typeof o.config[e]=="function"?o.config[e].bind({...s,parent:o.parent?getExtensionField(o.parent,e,s):null}):o.config[e]}function splitExtensions(o){const e=o.filter(d=>d.type==="extension"),s=o.filter(d=>d.type==="node"),a=o.filter(d=>d.type==="mark");return{baseExtensions:e,nodeExtensions:s,markExtensions:a}}function getAttributesFromExtensions(o){const e=[],{nodeExtensions:s,markExtensions:a}=splitExtensions(o),d=[...s,...a],b={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return o.forEach(_=>{const _e={name:_.name,options:_.options,storage:_.storage,extensions:d},nt=getExtensionField(_,"addGlobalAttributes",_e);if(!nt)return;nt().forEach(ct=>{ct.types.forEach(dt=>{Object.entries(ct.attributes).forEach(([pt,bt])=>{e.push({type:dt,name:pt,attribute:{...b,...bt}})})})})}),d.forEach(_=>{const _e={name:_.name,options:_.options,storage:_.storage},nt=getExtensionField(_,"addAttributes",_e);if(!nt)return;const rt=nt();Object.entries(rt).forEach(([ct,dt])=>{const pt={...b,...dt};typeof(pt==null?void 0:pt.default)=="function"&&(pt.default=pt.default()),pt!=null&&pt.isRequired&&(pt==null?void 0:pt.default)===void 0&&delete pt.default,e.push({type:_.name,name:ct,attribute:pt})})}),e}function getNodeType(o,e){if(typeof o=="string"){if(!e.nodes[o])throw Error(`There is no node type named '${o}'. Maybe you forgot to add the extension?`);return e.nodes[o]}return o}function mergeAttributes(...o){return o.filter(e=>!!e).reduce((e,s)=>{const a={...e};return Object.entries(s).forEach(([d,b])=>{if(!a[d]){a[d]=b;return}if(d==="class"){const _e=b?b.split(" "):[],nt=a[d]?a[d].split(" "):[],rt=_e.filter(ct=>!nt.includes(ct));a[d]=[...nt,...rt].join(" ")}else if(d==="style"){const _e=b?b.split(";").map(ct=>ct.trim()).filter(Boolean):[],nt=a[d]?a[d].split(";").map(ct=>ct.trim()).filter(Boolean):[],rt=new Map;nt.forEach(ct=>{const[dt,pt]=ct.split(":").map(bt=>bt.trim());rt.set(dt,pt)}),_e.forEach(ct=>{const[dt,pt]=ct.split(":").map(bt=>bt.trim());rt.set(dt,pt)}),a[d]=Array.from(rt.entries()).map(([ct,dt])=>`${ct}: ${dt}`).join("; ")}else a[d]=b}),a},{})}function getRenderedAttributes(o,e){return e.filter(s=>s.type===o.type.name).filter(s=>s.attribute.rendered).map(s=>s.attribute.renderHTML?s.attribute.renderHTML(o.attrs)||{}:{[s.name]:o.attrs[s.name]}).reduce((s,a)=>mergeAttributes(s,a),{})}function isFunction(o){return typeof o=="function"}function callOrReturn(o,e=void 0,...s){return isFunction(o)?e?o.bind(e)(...s):o(...s):o}function isEmptyObject(o={}){return Object.keys(o).length===0&&o.constructor===Object}function fromString(o){return typeof o!="string"?o:o.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(o):o==="true"?!0:o==="false"?!1:o}function injectExtensionAttributesToParseRule(o,e){return"style"in o?o:{...o,getAttrs:s=>{const a=o.getAttrs?o.getAttrs(s):o.attrs;if(a===!1)return!1;const d=e.reduce((b,_)=>{const _e=_.attribute.parseHTML?_.attribute.parseHTML(s):fromString(s.getAttribute(_.name));return _e==null?b:{...b,[_.name]:_e}},{});return{...a,...d}}}}function cleanUpSchemaItem(o){return Object.fromEntries(Object.entries(o).filter(([e,s])=>e==="attrs"&&isEmptyObject(s)?!1:s!=null))}function getSchemaByResolvedExtensions(o,e){var s;const a=getAttributesFromExtensions(o),{nodeExtensions:d,markExtensions:b}=splitExtensions(o),_=(s=d.find(rt=>getExtensionField(rt,"topNode")))===null||s===void 0?void 0:s.name,_e=Object.fromEntries(d.map(rt=>{const ct=a.filter(Rt=>Rt.type===rt.name),dt={name:rt.name,options:rt.options,storage:rt.storage,editor:e},pt=o.reduce((Rt,Mt)=>{const Et=getExtensionField(Mt,"extendNodeSchema",dt);return{...Rt,...Et?Et(rt):{}}},{}),bt=cleanUpSchemaItem({...pt,content:callOrReturn(getExtensionField(rt,"content",dt)),marks:callOrReturn(getExtensionField(rt,"marks",dt)),group:callOrReturn(getExtensionField(rt,"group",dt)),inline:callOrReturn(getExtensionField(rt,"inline",dt)),atom:callOrReturn(getExtensionField(rt,"atom",dt)),selectable:callOrReturn(getExtensionField(rt,"selectable",dt)),draggable:callOrReturn(getExtensionField(rt,"draggable",dt)),code:callOrReturn(getExtensionField(rt,"code",dt)),whitespace:callOrReturn(getExtensionField(rt,"whitespace",dt)),defining:callOrReturn(getExtensionField(rt,"defining",dt)),isolating:callOrReturn(getExtensionField(rt,"isolating",dt)),attrs:Object.fromEntries(ct.map(Rt=>{var Mt;return[Rt.name,{default:(Mt=Rt==null?void 0:Rt.attribute)===null||Mt===void 0?void 0:Mt.default}]}))}),xt=callOrReturn(getExtensionField(rt,"parseHTML",dt));xt&&(bt.parseDOM=xt.map(Rt=>injectExtensionAttributesToParseRule(Rt,ct)));const wt=getExtensionField(rt,"renderHTML",dt);wt&&(bt.toDOM=Rt=>wt({node:Rt,HTMLAttributes:getRenderedAttributes(Rt,ct)}));const Tt=getExtensionField(rt,"renderText",dt);return Tt&&(bt.toText=Tt),[rt.name,bt]})),nt=Object.fromEntries(b.map(rt=>{const ct=a.filter(Tt=>Tt.type===rt.name),dt={name:rt.name,options:rt.options,storage:rt.storage,editor:e},pt=o.reduce((Tt,Rt)=>{const Mt=getExtensionField(Rt,"extendMarkSchema",dt);return{...Tt,...Mt?Mt(rt):{}}},{}),bt=cleanUpSchemaItem({...pt,inclusive:callOrReturn(getExtensionField(rt,"inclusive",dt)),excludes:callOrReturn(getExtensionField(rt,"excludes",dt)),group:callOrReturn(getExtensionField(rt,"group",dt)),spanning:callOrReturn(getExtensionField(rt,"spanning",dt)),code:callOrReturn(getExtensionField(rt,"code",dt)),attrs:Object.fromEntries(ct.map(Tt=>{var Rt;return[Tt.name,{default:(Rt=Tt==null?void 0:Tt.attribute)===null||Rt===void 0?void 0:Rt.default}]}))}),xt=callOrReturn(getExtensionField(rt,"parseHTML",dt));xt&&(bt.parseDOM=xt.map(Tt=>injectExtensionAttributesToParseRule(Tt,ct)));const wt=getExtensionField(rt,"renderHTML",dt);return wt&&(bt.toDOM=Tt=>wt({mark:Tt,HTMLAttributes:getRenderedAttributes(Tt,ct)})),[rt.name,bt]}));return new Schema({topNode:_,nodes:_e,marks:nt})}function getSchemaTypeByName(o,e){return e.nodes[o]||e.marks[o]||null}function isExtensionRulesEnabled(o,e){return Array.isArray(e)?e.some(s=>(typeof s=="string"?s:s.name)===o.name):e}const getTextContentFromNodes=(o,e=500)=>{let s="";const a=o.parentOffset;return o.parent.nodesBetween(Math.max(0,a-e),a,(d,b,_,_e)=>{var nt,rt;const ct=((rt=(nt=d.type.spec).toText)===null||rt===void 0?void 0:rt.call(nt,{node:d,pos:b,parent:_,index:_e}))||d.textContent||"%leaf%";s+=d.isAtom&&!d.isText?ct:ct.slice(0,Math.max(0,a-b))}),s};function isRegExp(o){return Object.prototype.toString.call(o)==="[object RegExp]"}class InputRule{constructor(e){this.find=e.find,this.handler=e.handler}}const inputRuleMatcherHandler=(o,e)=>{if(isRegExp(e))return e.exec(o);const s=e(o);if(!s)return null;const a=[s.text];return a.index=s.index,a.input=o,a.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),a.push(s.replaceWith)),a};function run$1(o){var e;const{editor:s,from:a,to:d,text:b,rules:_,plugin:_e}=o,{view:nt}=s;if(nt.composing)return!1;const rt=nt.state.doc.resolve(a);if(rt.parent.type.spec.code||!((e=rt.nodeBefore||rt.nodeAfter)===null||e===void 0)&&e.marks.find(pt=>pt.type.spec.code))return!1;let ct=!1;const dt=getTextContentFromNodes(rt)+b;return _.forEach(pt=>{if(ct)return;const bt=inputRuleMatcherHandler(dt,pt.find);if(!bt)return;const xt=nt.state.tr,wt=createChainableState({state:nt.state,transaction:xt}),Tt={from:a-(bt[0].length-b.length),to:d},{commands:Rt,chain:Mt,can:Et}=new CommandManager({editor:s,state:wt});pt.handler({state:wt,range:Tt,match:bt,commands:Rt,chain:Mt,can:Et})===null||!xt.steps.length||(xt.setMeta(_e,{transform:xt,from:a,to:d,text:b}),nt.dispatch(xt),ct=!0)}),ct}function inputRulesPlugin(o){const{editor:e,rules:s}=o,a=new Plugin({state:{init(){return null},apply(d,b){const _=d.getMeta(a);if(_)return _;const _e=d.getMeta("applyInputRules");return!!_e&&setTimeout(()=>{const{from:rt,text:ct}=_e,dt=rt+ct.length;run$1({editor:e,from:rt,to:dt,text:ct,rules:s,plugin:a})}),d.selectionSet||d.docChanged?null:b}},props:{handleTextInput(d,b,_,_e){return run$1({editor:e,from:b,to:_,text:_e,rules:s,plugin:a})},handleDOMEvents:{compositionend:d=>(setTimeout(()=>{const{$cursor:b}=d.state.selection;b&&run$1({editor:e,from:b.pos,to:b.pos,text:"",rules:s,plugin:a})}),!1)},handleKeyDown(d,b){if(b.key!=="Enter")return!1;const{$cursor:_}=d.state.selection;return _?run$1({editor:e,from:_.pos,to:_.pos,text:`
`,rules:s,plugin:a}):!1}},isInputRules:!0});return a}function getType(o){return Object.prototype.toString.call(o).slice(8,-1)}function isPlainObject(o){return getType(o)!=="Object"?!1:o.constructor===Object&&Object.getPrototypeOf(o)===Object.prototype}function mergeDeep(o,e){const s={...o};return isPlainObject(o)&&isPlainObject(e)&&Object.keys(e).forEach(a=>{isPlainObject(e[a])&&isPlainObject(o[a])?s[a]=mergeDeep(o[a],e[a]):s[a]=e[a]}),s}class Mark{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Mark(e)}configure(e={}){const s=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return s.name=this.name,s.parent=this.parent,s}extend(e={}){const s=new Mark(e);return s.parent=this,this.child=s,s.name=e.name?e.name:s.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=callOrReturn(getExtensionField(s,"addOptions",{name:s.name})),s.storage=callOrReturn(getExtensionField(s,"addStorage",{name:s.name,options:s.options})),s}static handleExit({editor:e,mark:s}){const{tr:a}=e.state,d=e.state.selection.$from;if(d.pos===d.end()){const _=d.marks();if(!!!_.find(rt=>(rt==null?void 0:rt.type.name)===s.name))return!1;const nt=_.find(rt=>(rt==null?void 0:rt.type.name)===s.name);return nt&&a.removeStoredMark(nt),a.insertText(" ",d.pos),e.view.dispatch(a),!0}return!1}}function isNumber(o){return typeof o=="number"}class PasteRule{constructor(e){this.find=e.find,this.handler=e.handler}}const pasteRuleMatcherHandler=(o,e,s)=>{if(isRegExp(e))return[...o.matchAll(e)];const a=e(o,s);return a?a.map(d=>{const b=[d.text];return b.index=d.index,b.input=o,b.data=d.data,d.replaceWith&&(d.text.includes(d.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),b.push(d.replaceWith)),b}):[]};function run(o){const{editor:e,state:s,from:a,to:d,rule:b,pasteEvent:_,dropEvent:_e}=o,{commands:nt,chain:rt,can:ct}=new CommandManager({editor:e,state:s}),dt=[];return s.doc.nodesBetween(a,d,(bt,xt)=>{if(!bt.isTextblock||bt.type.spec.code)return;const wt=Math.max(a,xt),Tt=Math.min(d,xt+bt.content.size),Rt=bt.textBetween(wt-xt,Tt-xt,void 0,"");pasteRuleMatcherHandler(Rt,b.find,_).forEach(Et=>{if(Et.index===void 0)return;const $t=wt+Et.index+1,Xt=$t+Et[0].length,Zt={from:s.tr.mapping.map($t),to:s.tr.mapping.map(Xt)},Nt=b.handler({state:s,range:Zt,match:Et,commands:nt,chain:rt,can:ct,pasteEvent:_,dropEvent:_e});dt.push(Nt)})}),dt.every(bt=>bt!==null)}const createClipboardPasteEvent=o=>{var e;const s=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=s.clipboardData)===null||e===void 0||e.setData("text/html",o),s};function pasteRulesPlugin(o){const{editor:e,rules:s}=o;let a=null,d=!1,b=!1,_=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,_e=typeof DragEvent<"u"?new DragEvent("drop"):null;const nt=({state:ct,from:dt,to:pt,rule:bt,pasteEvt:xt})=>{const wt=ct.tr,Tt=createChainableState({state:ct,transaction:wt});if(!(!run({editor:e,state:Tt,from:Math.max(dt-1,0),to:pt.b-1,rule:bt,pasteEvent:xt,dropEvent:_e})||!wt.steps.length))return _e=typeof DragEvent<"u"?new DragEvent("drop"):null,_=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,wt};return s.map(ct=>new Plugin({view(dt){const pt=bt=>{var xt;a=!((xt=dt.dom.parentElement)===null||xt===void 0)&&xt.contains(bt.target)?dt.dom.parentElement:null};return window.addEventListener("dragstart",pt),{destroy(){window.removeEventListener("dragstart",pt)}}},props:{handleDOMEvents:{drop:(dt,pt)=>(b=a===dt.dom.parentElement,_e=pt,!1),paste:(dt,pt)=>{var bt;const xt=(bt=pt.clipboardData)===null||bt===void 0?void 0:bt.getData("text/html");return _=pt,d=!!(xt!=null&&xt.includes("data-pm-slice")),!1}}},appendTransaction:(dt,pt,bt)=>{const xt=dt[0],wt=xt.getMeta("uiEvent")==="paste"&&!d,Tt=xt.getMeta("uiEvent")==="drop"&&!b,Rt=xt.getMeta("applyPasteRules"),Mt=!!Rt;if(!wt&&!Tt&&!Mt)return;if(Mt){const{from:Xt,text:Zt}=Rt,Nt=Xt+Zt.length,Jt=createClipboardPasteEvent(Zt);return nt({rule:ct,state:bt,from:Xt,to:{b:Nt},pasteEvt:Jt})}const Et=pt.doc.content.findDiffStart(bt.doc.content),$t=pt.doc.content.findDiffEnd(bt.doc.content);if(!(!isNumber(Et)||!$t||Et===$t.b))return nt({rule:ct,state:bt,from:Et,to:$t,pasteEvt:_})}}))}function findDuplicates(o){const e=o.filter((s,a)=>o.indexOf(s)!==a);return Array.from(new Set(e))}class ExtensionManager{constructor(e,s){this.splittableMarks=[],this.editor=s,this.extensions=ExtensionManager.resolve(e),this.schema=getSchemaByResolvedExtensions(this.extensions,s),this.setupExtensions()}static resolve(e){const s=ExtensionManager.sort(ExtensionManager.flatten(e)),a=findDuplicates(s.map(d=>d.name));return a.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${a.map(d=>`'${d}'`).join(", ")}]. This can lead to issues.`),s}static flatten(e){return e.map(s=>{const a={name:s.name,options:s.options,storage:s.storage},d=getExtensionField(s,"addExtensions",a);return d?[s,...this.flatten(d())]:s}).flat(10)}static sort(e){return e.sort((a,d)=>{const b=getExtensionField(a,"priority")||100,_=getExtensionField(d,"priority")||100;return b>_?-1:b<_?1:0})}get commands(){return this.extensions.reduce((e,s)=>{const a={name:s.name,options:s.options,storage:s.storage,editor:this.editor,type:getSchemaTypeByName(s.name,this.schema)},d=getExtensionField(s,"addCommands",a);return d?{...e,...d()}:e},{})}get plugins(){const{editor:e}=this,s=ExtensionManager.sort([...this.extensions].reverse()),a=[],d=[],b=s.map(_=>{const _e={name:_.name,options:_.options,storage:_.storage,editor:e,type:getSchemaTypeByName(_.name,this.schema)},nt=[],rt=getExtensionField(_,"addKeyboardShortcuts",_e);let ct={};if(_.type==="mark"&&getExtensionField(_,"exitable",_e)&&(ct.ArrowRight=()=>Mark.handleExit({editor:e,mark:_})),rt){const wt=Object.fromEntries(Object.entries(rt()).map(([Tt,Rt])=>[Tt,()=>Rt({editor:e})]));ct={...ct,...wt}}const dt=keymap(ct);nt.push(dt);const pt=getExtensionField(_,"addInputRules",_e);isExtensionRulesEnabled(_,e.options.enableInputRules)&&pt&&a.push(...pt());const bt=getExtensionField(_,"addPasteRules",_e);isExtensionRulesEnabled(_,e.options.enablePasteRules)&&bt&&d.push(...bt());const xt=getExtensionField(_,"addProseMirrorPlugins",_e);if(xt){const wt=xt();nt.push(...wt)}return nt}).flat();return[inputRulesPlugin({editor:e,rules:a}),...pasteRulesPlugin({editor:e,rules:d}),...b]}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:s}=splitExtensions(this.extensions);return Object.fromEntries(s.filter(a=>!!getExtensionField(a,"addNodeView")).map(a=>{const d=this.attributes.filter(nt=>nt.type===a.name),b={name:a.name,options:a.options,storage:a.storage,editor:e,type:getNodeType(a.name,this.schema)},_=getExtensionField(a,"addNodeView",b);if(!_)return[];const _e=(nt,rt,ct,dt,pt)=>{const bt=getRenderedAttributes(nt,d);return _()({node:nt,view:rt,getPos:ct,decorations:dt,innerDecorations:pt,editor:e,extension:a,HTMLAttributes:bt})};return[a.name,_e]}))}setupExtensions(){this.extensions.forEach(e=>{var s;this.editor.extensionStorage[e.name]=e.storage;const a={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:getSchemaTypeByName(e.name,this.schema)};e.type==="mark"&&(!((s=callOrReturn(getExtensionField(e,"keepOnSplit",a)))!==null&&s!==void 0)||s)&&this.splittableMarks.push(e.name);const d=getExtensionField(e,"onBeforeCreate",a),b=getExtensionField(e,"onCreate",a),_=getExtensionField(e,"onUpdate",a),_e=getExtensionField(e,"onSelectionUpdate",a),nt=getExtensionField(e,"onTransaction",a),rt=getExtensionField(e,"onFocus",a),ct=getExtensionField(e,"onBlur",a),dt=getExtensionField(e,"onDestroy",a);d&&this.editor.on("beforeCreate",d),b&&this.editor.on("create",b),_&&this.editor.on("update",_),_e&&this.editor.on("selectionUpdate",_e),nt&&this.editor.on("transaction",nt),rt&&this.editor.on("focus",rt),ct&&this.editor.on("blur",ct),dt&&this.editor.on("destroy",dt)})}}class Extension{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Extension(e)}configure(e={}){const s=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return s.name=this.name,s.parent=this.parent,s}extend(e={}){const s=new Extension({...this.config,...e});return s.parent=this,this.child=s,s.name=e.name?e.name:s.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=callOrReturn(getExtensionField(s,"addOptions",{name:s.name})),s.storage=callOrReturn(getExtensionField(s,"addStorage",{name:s.name,options:s.options})),s}}function getTextBetween(o,e,s){const{from:a,to:d}=e,{blockSeparator:b=`

`,textSerializers:_={}}=s||{};let _e="";return o.nodesBetween(a,d,(nt,rt,ct,dt)=>{var pt;nt.isBlock&&rt>a&&(_e+=b);const bt=_==null?void 0:_[nt.type.name];if(bt)return ct&&(_e+=bt({node:nt,pos:rt,parent:ct,index:dt,range:e})),!1;nt.isText&&(_e+=(pt=nt==null?void 0:nt.text)===null||pt===void 0?void 0:pt.slice(Math.max(a,rt)-rt,d-rt))}),_e}function getTextSerializersFromSchema(o){return Object.fromEntries(Object.entries(o.nodes).filter(([,e])=>e.spec.toText).map(([e,s])=>[e,s.spec.toText]))}const ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:o}=this,{state:e,schema:s}=o,{doc:a,selection:d}=e,{ranges:b}=d,_=Math.min(...b.map(ct=>ct.$from.pos)),_e=Math.max(...b.map(ct=>ct.$to.pos)),nt=getTextSerializersFromSchema(s);return getTextBetween(a,{from:_,to:_e},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:nt})}}})]}}),blur=()=>({editor:o,view:e})=>(requestAnimationFrame(()=>{var s;o.isDestroyed||(e.dom.blur(),(s=window==null?void 0:window.getSelection())===null||s===void 0||s.removeAllRanges())}),!0),clearContent=(o=!1)=>({commands:e})=>e.setContent("",o),clearNodes=()=>({state:o,tr:e,dispatch:s})=>{const{selection:a}=e,{ranges:d}=a;return s&&d.forEach(({$from:b,$to:_})=>{o.doc.nodesBetween(b.pos,_.pos,(_e,nt)=>{if(_e.type.isText)return;const{doc:rt,mapping:ct}=e,dt=rt.resolve(ct.map(nt)),pt=rt.resolve(ct.map(nt+_e.nodeSize)),bt=dt.blockRange(pt);if(!bt)return;const xt=liftTarget(bt);if(_e.type.isTextblock){const{defaultType:wt}=dt.parent.contentMatchAt(dt.index());e.setNodeMarkup(bt.start,wt)}(xt||xt===0)&&e.lift(bt,xt)})}),!0},command=o=>e=>o(e),createParagraphNear=()=>({state:o,dispatch:e})=>createParagraphNear$1(o,e),cut=(o,e)=>({editor:s,tr:a})=>{const{state:d}=s,b=d.doc.slice(o.from,o.to);a.deleteRange(o.from,o.to);const _=a.mapping.map(e);return a.insert(_,b.content),a.setSelection(new TextSelection(a.doc.resolve(_-1))),!0},deleteCurrentNode=()=>({tr:o,dispatch:e})=>{const{selection:s}=o,a=s.$anchor.node();if(a.content.size>0)return!1;const d=o.selection.$anchor;for(let b=d.depth;b>0;b-=1)if(d.node(b).type===a.type){if(e){const _e=d.before(b),nt=d.after(b);o.delete(_e,nt).scrollIntoView()}return!0}return!1},deleteNode=o=>({tr:e,state:s,dispatch:a})=>{const d=getNodeType(o,s.schema),b=e.selection.$anchor;for(let _=b.depth;_>0;_-=1)if(b.node(_).type===d){if(a){const nt=b.before(_),rt=b.after(_);e.delete(nt,rt).scrollIntoView()}return!0}return!1},deleteRange=o=>({tr:e,dispatch:s})=>{const{from:a,to:d}=o;return s&&e.delete(a,d),!0},deleteSelection=()=>({state:o,dispatch:e})=>deleteSelection$1(o,e),enter=()=>({commands:o})=>o.keyboardShortcut("Enter"),exitCode=()=>({state:o,dispatch:e})=>exitCode$1(o,e);function objectIncludes(o,e,s={strict:!0}){const a=Object.keys(e);return a.length?a.every(d=>s.strict?e[d]===o[d]:isRegExp(e[d])?e[d].test(o[d]):e[d]===o[d]):!0}function findMarkInSet(o,e,s={}){return o.find(a=>a.type===e&&objectIncludes(a.attrs,s))}function isMarkInSet(o,e,s={}){return!!findMarkInSet(o,e,s)}function getMarkRange(o,e,s={}){if(!o||!e)return;let a=o.parent.childAfter(o.parentOffset);if((!a.node||!a.node.marks.some(rt=>rt.type===e))&&(a=o.parent.childBefore(o.parentOffset)),!a.node||!a.node.marks.some(rt=>rt.type===e))return;const d=findMarkInSet([...a.node.marks],e,s);if(!d)return;let b=a.index,_=o.start()+a.offset,_e=b+1,nt=_+a.node.nodeSize;for(findMarkInSet([...a.node.marks],e,s);b>0&&d.isInSet(o.parent.child(b-1).marks);)b-=1,_-=o.parent.child(b).nodeSize;for(;_e<o.parent.childCount&&isMarkInSet([...o.parent.child(_e).marks],e,s);)nt+=o.parent.child(_e).nodeSize,_e+=1;return{from:_,to:nt}}function getMarkType(o,e){if(typeof o=="string"){if(!e.marks[o])throw Error(`There is no mark type named '${o}'. Maybe you forgot to add the extension?`);return e.marks[o]}return o}const extendMarkRange=(o,e={})=>({tr:s,state:a,dispatch:d})=>{const b=getMarkType(o,a.schema),{doc:_,selection:_e}=s,{$from:nt,from:rt,to:ct}=_e;if(d){const dt=getMarkRange(nt,b,e);if(dt&&dt.from<=rt&&dt.to>=ct){const pt=TextSelection.create(_,dt.from,dt.to);s.setSelection(pt)}}return!0},first=o=>e=>{const s=typeof o=="function"?o(e):o;for(let a=0;a<s.length;a+=1)if(s[a](e))return!0;return!1};function isTextSelection(o){return o instanceof TextSelection}function minMax(o=0,e=0,s=0){return Math.min(Math.max(o,e),s)}function resolveFocusPosition(o,e=null){if(!e)return null;const s=Selection.atStart(o),a=Selection.atEnd(o);if(e==="start"||e===!0)return s;if(e==="end")return a;const d=s.from,b=a.to;return e==="all"?TextSelection.create(o,minMax(0,d,b),minMax(o.content.size,d,b)):TextSelection.create(o,minMax(e,d,b),minMax(e,d,b))}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const focus=(o=null,e={})=>({editor:s,view:a,tr:d,dispatch:b})=>{e={scrollIntoView:!0,...e};const _=()=>{isiOS()&&a.dom.focus(),requestAnimationFrame(()=>{s.isDestroyed||(a.focus(),e!=null&&e.scrollIntoView&&s.commands.scrollIntoView())})};if(a.hasFocus()&&o===null||o===!1)return!0;if(b&&o===null&&!isTextSelection(s.state.selection))return _(),!0;const _e=resolveFocusPosition(d.doc,o)||s.state.selection,nt=s.state.selection.eq(_e);return b&&(nt||d.setSelection(_e),nt&&d.storedMarks&&d.setStoredMarks(d.storedMarks),_()),!0},forEach=(o,e)=>s=>o.every((a,d)=>e(a,{...s,index:d})),insertContent=(o,e)=>({tr:s,commands:a})=>a.insertContentAt({from:s.selection.from,to:s.selection.to},o,e),removeWhitespaces=o=>{const e=o.childNodes;for(let s=e.length-1;s>=0;s-=1){const a=e[s];a.nodeType===3&&a.nodeValue&&/^(\n\s\s|\n)$/.test(a.nodeValue)?o.removeChild(a):a.nodeType===1&&removeWhitespaces(a)}return o};function elementFromString(o){const e=`<body>${o}</body>`,s=new window.DOMParser().parseFromString(e,"text/html").body;return removeWhitespaces(s)}function createNodeFromContent(o,e,s){s={slice:!0,parseOptions:{},...s};const a=typeof o=="object"&&o!==null,d=typeof o=="string";if(a)try{if(Array.isArray(o)&&o.length>0)return Fragment.fromArray(o.map(_e=>e.nodeFromJSON(_e)));const _=e.nodeFromJSON(o);return s.errorOnInvalidContent&&_.check(),_}catch(b){if(s.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:b});return console.warn("[tiptap warn]: Invalid content.","Passed value:",o,"Error:",b),createNodeFromContent("",e,s)}if(d){if(s.errorOnInvalidContent){let _=!1,_e="";const nt=new Schema({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:rt=>(_=!0,_e=typeof rt=="string"?rt:rt.outerHTML,null)}]}})});if(s.slice?DOMParser$1.fromSchema(nt).parseSlice(elementFromString(o),s.parseOptions):DOMParser$1.fromSchema(nt).parse(elementFromString(o),s.parseOptions),s.errorOnInvalidContent&&_)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${_e}`)})}const b=DOMParser$1.fromSchema(e);return s.slice?b.parseSlice(elementFromString(o),s.parseOptions).content:b.parse(elementFromString(o),s.parseOptions)}return createNodeFromContent("",e,s)}function selectionToInsertionEnd(o,e,s){const a=o.steps.length-1;if(a<e)return;const d=o.steps[a];if(!(d instanceof ReplaceStep||d instanceof ReplaceAroundStep))return;const b=o.mapping.maps[a];let _=0;b.forEach((_e,nt,rt,ct)=>{_===0&&(_=ct)}),o.setSelection(Selection.near(o.doc.resolve(_),s))}const isFragment=o=>!("type"in o),insertContentAt=(o,e,s)=>({tr:a,dispatch:d,editor:b})=>{var _;if(d){s={parseOptions:b.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...s};let _e;try{_e=createNodeFromContent(e,b.schema,{parseOptions:{preserveWhitespace:"full",...s.parseOptions},errorOnInvalidContent:(_=s.errorOnInvalidContent)!==null&&_!==void 0?_:b.options.enableContentCheck})}catch(xt){return b.emit("contentError",{editor:b,error:xt,disableCollaboration:()=>{b.storage.collaboration&&(b.storage.collaboration.isDisabled=!0)}}),!1}let{from:nt,to:rt}=typeof o=="number"?{from:o,to:o}:{from:o.from,to:o.to},ct=!0,dt=!0;if((isFragment(_e)?_e:[_e]).forEach(xt=>{xt.check(),ct=ct?xt.isText&&xt.marks.length===0:!1,dt=dt?xt.isBlock:!1}),nt===rt&&dt){const{parent:xt}=a.doc.resolve(nt);xt.isTextblock&&!xt.type.spec.code&&!xt.childCount&&(nt-=1,rt+=1)}let bt;ct?(Array.isArray(e)?bt=e.map(xt=>xt.text||"").join(""):typeof e=="object"&&e&&e.text?bt=e.text:bt=e,a.insertText(bt,nt,rt)):(bt=_e,a.replaceWith(nt,rt,bt)),s.updateSelection&&selectionToInsertionEnd(a,a.steps.length-1,-1),s.applyInputRules&&a.setMeta("applyInputRules",{from:nt,text:bt}),s.applyPasteRules&&a.setMeta("applyPasteRules",{from:nt,text:bt})}return!0},joinUp=()=>({state:o,dispatch:e})=>joinUp$1(o,e),joinDown=()=>({state:o,dispatch:e})=>joinDown$1(o,e),joinBackward=()=>({state:o,dispatch:e})=>joinBackward$1(o,e),joinForward=()=>({state:o,dispatch:e})=>joinForward$1(o,e),joinItemBackward=()=>({state:o,dispatch:e,tr:s})=>{try{const a=joinPoint(o.doc,o.selection.$from.pos,-1);return a==null?!1:(s.join(a,2),e&&e(s),!0)}catch{return!1}},joinItemForward=()=>({state:o,dispatch:e,tr:s})=>{try{const a=joinPoint(o.doc,o.selection.$from.pos,1);return a==null?!1:(s.join(a,2),e&&e(s),!0)}catch{return!1}},joinTextblockBackward=()=>({state:o,dispatch:e})=>joinTextblockBackward$1(o,e),joinTextblockForward=()=>({state:o,dispatch:e})=>joinTextblockForward$1(o,e);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(o){const e=o.split(/-(?!$)/);let s=e[e.length-1];s==="Space"&&(s=" ");let a,d,b,_;for(let _e=0;_e<e.length-1;_e+=1){const nt=e[_e];if(/^(cmd|meta|m)$/i.test(nt))_=!0;else if(/^a(lt)?$/i.test(nt))a=!0;else if(/^(c|ctrl|control)$/i.test(nt))d=!0;else if(/^s(hift)?$/i.test(nt))b=!0;else if(/^mod$/i.test(nt))isiOS()||isMacOS()?_=!0:d=!0;else throw new Error(`Unrecognized modifier name: ${nt}`)}return a&&(s=`Alt-${s}`),d&&(s=`Ctrl-${s}`),_&&(s=`Meta-${s}`),b&&(s=`Shift-${s}`),s}const keyboardShortcut=o=>({editor:e,view:s,tr:a,dispatch:d})=>{const b=normalizeKeyName(o).split(/-(?!$)/),_=b.find(rt=>!["Alt","Ctrl","Meta","Shift"].includes(rt)),_e=new KeyboardEvent("keydown",{key:_==="Space"?" ":_,altKey:b.includes("Alt"),ctrlKey:b.includes("Ctrl"),metaKey:b.includes("Meta"),shiftKey:b.includes("Shift"),bubbles:!0,cancelable:!0}),nt=e.captureTransaction(()=>{s.someProp("handleKeyDown",rt=>rt(s,_e))});return nt==null||nt.steps.forEach(rt=>{const ct=rt.map(a.mapping);ct&&d&&a.maybeStep(ct)}),!0};function isNodeActive(o,e,s={}){const{from:a,to:d,empty:b}=o.selection,_=e?getNodeType(e,o.schema):null,_e=[];o.doc.nodesBetween(a,d,(dt,pt)=>{if(dt.isText)return;const bt=Math.max(a,pt),xt=Math.min(d,pt+dt.nodeSize);_e.push({node:dt,from:bt,to:xt})});const nt=d-a,rt=_e.filter(dt=>_?_.name===dt.node.type.name:!0).filter(dt=>objectIncludes(dt.node.attrs,s,{strict:!1}));return b?!!rt.length:rt.reduce((dt,pt)=>dt+pt.to-pt.from,0)>=nt}const lift=(o,e={})=>({state:s,dispatch:a})=>{const d=getNodeType(o,s.schema);return isNodeActive(s,d,e)?lift$1(s,a):!1},liftEmptyBlock=()=>({state:o,dispatch:e})=>liftEmptyBlock$1(o,e),liftListItem=o=>({state:e,dispatch:s})=>{const a=getNodeType(o,e.schema);return liftListItem$1(a)(e,s)},newlineInCode=()=>({state:o,dispatch:e})=>newlineInCode$1(o,e);function getSchemaTypeNameByName(o,e){return e.nodes[o]?"node":e.marks[o]?"mark":null}function deleteProps(o,e){const s=typeof e=="string"?[e]:e;return Object.keys(o).reduce((a,d)=>(s.includes(d)||(a[d]=o[d]),a),{})}const resetAttributes=(o,e)=>({tr:s,state:a,dispatch:d})=>{let b=null,_=null;const _e=getSchemaTypeNameByName(typeof o=="string"?o:o.name,a.schema);return _e?(_e==="node"&&(b=getNodeType(o,a.schema)),_e==="mark"&&(_=getMarkType(o,a.schema)),d&&s.selection.ranges.forEach(nt=>{a.doc.nodesBetween(nt.$from.pos,nt.$to.pos,(rt,ct)=>{b&&b===rt.type&&s.setNodeMarkup(ct,void 0,deleteProps(rt.attrs,e)),_&&rt.marks.length&&rt.marks.forEach(dt=>{_===dt.type&&s.addMark(ct,ct+rt.nodeSize,_.create(deleteProps(dt.attrs,e)))})})}),!0):!1},scrollIntoView=()=>({tr:o,dispatch:e})=>(e&&o.scrollIntoView(),!0),selectAll=()=>({tr:o,commands:e})=>e.setTextSelection({from:0,to:o.doc.content.size}),selectNodeBackward=()=>({state:o,dispatch:e})=>selectNodeBackward$1(o,e),selectNodeForward=()=>({state:o,dispatch:e})=>selectNodeForward$1(o,e),selectParentNode=()=>({state:o,dispatch:e})=>selectParentNode$1(o,e),selectTextblockEnd=()=>({state:o,dispatch:e})=>selectTextblockEnd$1(o,e),selectTextblockStart=()=>({state:o,dispatch:e})=>selectTextblockStart$1(o,e);function createDocument(o,e,s={},a={}){return createNodeFromContent(o,e,{slice:!1,parseOptions:s,errorOnInvalidContent:a.errorOnInvalidContent})}const setContent=(o,e=!1,s={},a={})=>({editor:d,tr:b,dispatch:_,commands:_e})=>{var nt,rt;const{doc:ct}=b;if(s.preserveWhitespace!=="full"){const dt=createDocument(o,d.schema,s,{errorOnInvalidContent:(nt=a.errorOnInvalidContent)!==null&&nt!==void 0?nt:d.options.enableContentCheck});return _&&b.replaceWith(0,ct.content.size,dt).setMeta("preventUpdate",!e),!0}return _&&b.setMeta("preventUpdate",!e),_e.insertContentAt({from:0,to:ct.content.size},o,{parseOptions:s,errorOnInvalidContent:(rt=a.errorOnInvalidContent)!==null&&rt!==void 0?rt:d.options.enableContentCheck})};function getMarkAttributes(o,e){const s=getMarkType(e,o.schema),{from:a,to:d,empty:b}=o.selection,_=[];b?(o.storedMarks&&_.push(...o.storedMarks),_.push(...o.selection.$head.marks())):o.doc.nodesBetween(a,d,nt=>{_.push(...nt.marks)});const _e=_.find(nt=>nt.type.name===s.name);return _e?{..._e.attrs}:{}}function defaultBlockAt(o){for(let e=0;e<o.edgeCount;e+=1){const{type:s}=o.edge(e);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}function findParentNodeClosestToPos(o,e){for(let s=o.depth;s>0;s-=1){const a=o.node(s);if(e(a))return{pos:s>0?o.before(s):0,start:o.start(s),depth:s,node:a}}}function findParentNode(o){return e=>findParentNodeClosestToPos(e.$from,o)}function getHTMLFromFragment(o,e){const s=DOMSerializer.fromSchema(e).serializeFragment(o),d=document.implementation.createHTMLDocument().createElement("div");return d.appendChild(s),d.innerHTML}function getText(o,e){const s={from:0,to:o.content.size};return getTextBetween(o,s,e)}function getNodeAttributes(o,e){const s=getNodeType(e,o.schema),{from:a,to:d}=o.selection,b=[];o.doc.nodesBetween(a,d,_e=>{b.push(_e)});const _=b.reverse().find(_e=>_e.type.name===s.name);return _?{..._.attrs}:{}}function getAttributes(o,e){const s=getSchemaTypeNameByName(typeof e=="string"?e:e.name,o.schema);return s==="node"?getNodeAttributes(o,e):s==="mark"?getMarkAttributes(o,e):{}}function getMarksBetween(o,e,s){const a=[];return o===e?s.resolve(o).marks().forEach(d=>{const b=s.resolve(o),_=getMarkRange(b,d.type);_&&a.push({mark:d,..._})}):s.nodesBetween(o,e,(d,b)=>{!d||(d==null?void 0:d.nodeSize)===void 0||a.push(...d.marks.map(_=>({from:b,to:b+d.nodeSize,mark:_})))}),a}function getSplittedAttributes(o,e,s){return Object.fromEntries(Object.entries(s).filter(([a])=>{const d=o.find(b=>b.type===e&&b.name===a);return d?d.attribute.keepOnSplit:!1}))}function isMarkActive(o,e,s={}){const{empty:a,ranges:d}=o.selection,b=e?getMarkType(e,o.schema):null;if(a)return!!(o.storedMarks||o.selection.$from.marks()).filter(dt=>b?b.name===dt.type.name:!0).find(dt=>objectIncludes(dt.attrs,s,{strict:!1}));let _=0;const _e=[];if(d.forEach(({$from:dt,$to:pt})=>{const bt=dt.pos,xt=pt.pos;o.doc.nodesBetween(bt,xt,(wt,Tt)=>{if(!wt.isText&&!wt.marks.length)return;const Rt=Math.max(bt,Tt),Mt=Math.min(xt,Tt+wt.nodeSize),Et=Mt-Rt;_+=Et,_e.push(...wt.marks.map($t=>({mark:$t,from:Rt,to:Mt})))})}),_===0)return!1;const nt=_e.filter(dt=>b?b.name===dt.mark.type.name:!0).filter(dt=>objectIncludes(dt.mark.attrs,s,{strict:!1})).reduce((dt,pt)=>dt+pt.to-pt.from,0),rt=_e.filter(dt=>b?dt.mark.type!==b&&dt.mark.type.excludes(b):!0).reduce((dt,pt)=>dt+pt.to-pt.from,0);return(nt>0?nt+rt:nt)>=_}function isActive(o,e,s={}){if(!e)return isNodeActive(o,null,s)||isMarkActive(o,null,s);const a=getSchemaTypeNameByName(e,o.schema);return a==="node"?isNodeActive(o,e,s):a==="mark"?isMarkActive(o,e,s):!1}function isList(o,e){const{nodeExtensions:s}=splitExtensions(e),a=s.find(_=>_.name===o);if(!a)return!1;const d={name:a.name,options:a.options,storage:a.storage},b=callOrReturn(getExtensionField(a,"group",d));return typeof b!="string"?!1:b.split(" ").includes("list")}function isNodeEmpty(o,{checkChildren:e=!0,ignoreWhitespace:s=!1}={}){var a;if(s){if(o.type.name==="hardBreak")return!0;if(o.isText)return/^\s*$/m.test((a=o.text)!==null&&a!==void 0?a:"")}if(o.isText)return!o.text;if(o.isAtom||o.isLeaf)return!1;if(o.content.childCount===0)return!0;if(e){let d=!0;return o.content.forEach(b=>{d!==!1&&(isNodeEmpty(b,{ignoreWhitespace:s,checkChildren:e})||(d=!1))}),d}return!1}function isNodeSelection(o){return o instanceof NodeSelection}function canSetMark(o,e,s){var a;const{selection:d}=e;let b=null;if(isTextSelection(d)&&(b=d.$cursor),b){const _e=(a=o.storedMarks)!==null&&a!==void 0?a:b.marks();return!!s.isInSet(_e)||!_e.some(nt=>nt.type.excludes(s))}const{ranges:_}=d;return _.some(({$from:_e,$to:nt})=>{let rt=_e.depth===0?o.doc.inlineContent&&o.doc.type.allowsMarkType(s):!1;return o.doc.nodesBetween(_e.pos,nt.pos,(ct,dt,pt)=>{if(rt)return!1;if(ct.isInline){const bt=!pt||pt.type.allowsMarkType(s),xt=!!s.isInSet(ct.marks)||!ct.marks.some(wt=>wt.type.excludes(s));rt=bt&&xt}return!rt}),rt})}const setMark=(o,e={})=>({tr:s,state:a,dispatch:d})=>{const{selection:b}=s,{empty:_,ranges:_e}=b,nt=getMarkType(o,a.schema);if(d)if(_){const rt=getMarkAttributes(a,nt);s.addStoredMark(nt.create({...rt,...e}))}else _e.forEach(rt=>{const ct=rt.$from.pos,dt=rt.$to.pos;a.doc.nodesBetween(ct,dt,(pt,bt)=>{const xt=Math.max(bt,ct),wt=Math.min(bt+pt.nodeSize,dt);pt.marks.find(Rt=>Rt.type===nt)?pt.marks.forEach(Rt=>{nt===Rt.type&&s.addMark(xt,wt,nt.create({...Rt.attrs,...e}))}):s.addMark(xt,wt,nt.create(e))})});return canSetMark(a,s,nt)},setMeta=(o,e)=>({tr:s})=>(s.setMeta(o,e),!0),setNode=(o,e={})=>({state:s,dispatch:a,chain:d})=>{const b=getNodeType(o,s.schema);return b.isTextblock?d().command(({commands:_})=>setBlockType(b,e)(s)?!0:_.clearNodes()).command(({state:_})=>setBlockType(b,e)(_,a)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=o=>({tr:e,dispatch:s})=>{if(s){const{doc:a}=e,d=minMax(o,0,a.content.size),b=NodeSelection.create(a,d);e.setSelection(b)}return!0},setTextSelection=o=>({tr:e,dispatch:s})=>{if(s){const{doc:a}=e,{from:d,to:b}=typeof o=="number"?{from:o,to:o}:o,_=TextSelection.atStart(a).from,_e=TextSelection.atEnd(a).to,nt=minMax(d,_,_e),rt=minMax(b,_,_e),ct=TextSelection.create(a,nt,rt);e.setSelection(ct)}return!0},sinkListItem=o=>({state:e,dispatch:s})=>{const a=getNodeType(o,e.schema);return sinkListItem$1(a)(e,s)};function ensureMarks(o,e){const s=o.storedMarks||o.selection.$to.parentOffset&&o.selection.$from.marks();if(s){const a=s.filter(d=>e==null?void 0:e.includes(d.type.name));o.tr.ensureMarks(a)}}const splitBlock=({keepMarks:o=!0}={})=>({tr:e,state:s,dispatch:a,editor:d})=>{const{selection:b,doc:_}=e,{$from:_e,$to:nt}=b,rt=d.extensionManager.attributes,ct=getSplittedAttributes(rt,_e.node().type.name,_e.node().attrs);if(b instanceof NodeSelection&&b.node.isBlock)return!_e.parentOffset||!canSplit(_,_e.pos)?!1:(a&&(o&&ensureMarks(s,d.extensionManager.splittableMarks),e.split(_e.pos).scrollIntoView()),!0);if(!_e.parent.isBlock)return!1;const dt=nt.parentOffset===nt.parent.content.size,pt=_e.depth===0?void 0:defaultBlockAt(_e.node(-1).contentMatchAt(_e.indexAfter(-1)));let bt=dt&&pt?[{type:pt,attrs:ct}]:void 0,xt=canSplit(e.doc,e.mapping.map(_e.pos),1,bt);if(!bt&&!xt&&canSplit(e.doc,e.mapping.map(_e.pos),1,pt?[{type:pt}]:void 0)&&(xt=!0,bt=pt?[{type:pt,attrs:ct}]:void 0),a){if(xt&&(b instanceof TextSelection&&e.deleteSelection(),e.split(e.mapping.map(_e.pos),1,bt),pt&&!dt&&!_e.parentOffset&&_e.parent.type!==pt)){const wt=e.mapping.map(_e.before()),Tt=e.doc.resolve(wt);_e.node(-1).canReplaceWith(Tt.index(),Tt.index()+1,pt)&&e.setNodeMarkup(e.mapping.map(_e.before()),pt)}o&&ensureMarks(s,d.extensionManager.splittableMarks),e.scrollIntoView()}return xt},splitListItem=(o,e={})=>({tr:s,state:a,dispatch:d,editor:b})=>{var _;const _e=getNodeType(o,a.schema),{$from:nt,$to:rt}=a.selection,ct=a.selection.node;if(ct&&ct.isBlock||nt.depth<2||!nt.sameParent(rt))return!1;const dt=nt.node(-1);if(dt.type!==_e)return!1;const pt=b.extensionManager.attributes;if(nt.parent.content.size===0&&nt.node(-1).childCount===nt.indexAfter(-1)){if(nt.depth===2||nt.node(-3).type!==_e||nt.index(-2)!==nt.node(-2).childCount-1)return!1;if(d){let Rt=Fragment.empty;const Mt=nt.index(-1)?1:nt.index(-2)?2:3;for(let Jt=nt.depth-Mt;Jt>=nt.depth-3;Jt-=1)Rt=Fragment.from(nt.node(Jt).copy(Rt));const Et=nt.indexAfter(-1)<nt.node(-2).childCount?1:nt.indexAfter(-2)<nt.node(-3).childCount?2:3,$t={...getSplittedAttributes(pt,nt.node().type.name,nt.node().attrs),...e},Xt=((_=_e.contentMatch.defaultType)===null||_===void 0?void 0:_.createAndFill($t))||void 0;Rt=Rt.append(Fragment.from(_e.createAndFill(null,Xt)||void 0));const Zt=nt.before(nt.depth-(Mt-1));s.replace(Zt,nt.after(-Et),new Slice(Rt,4-Mt,0));let Nt=-1;s.doc.nodesBetween(Zt,s.doc.content.size,(Jt,dn)=>{if(Nt>-1)return!1;Jt.isTextblock&&Jt.content.size===0&&(Nt=dn+1)}),Nt>-1&&s.setSelection(TextSelection.near(s.doc.resolve(Nt))),s.scrollIntoView()}return!0}const bt=rt.pos===nt.end()?dt.contentMatchAt(0).defaultType:null,xt={...getSplittedAttributes(pt,dt.type.name,dt.attrs),...e},wt={...getSplittedAttributes(pt,nt.node().type.name,nt.node().attrs),...e};s.delete(nt.pos,rt.pos);const Tt=bt?[{type:_e,attrs:xt},{type:bt,attrs:wt}]:[{type:_e,attrs:xt}];if(!canSplit(s.doc,nt.pos,2))return!1;if(d){const{selection:Rt,storedMarks:Mt}=a,{splittableMarks:Et}=b.extensionManager,$t=Mt||Rt.$to.parentOffset&&Rt.$from.marks();if(s.split(nt.pos,2,Tt).scrollIntoView(),!$t||!d)return!0;const Xt=$t.filter(Zt=>Et.includes(Zt.type.name));s.ensureMarks(Xt)}return!0},joinListBackwards=(o,e)=>{const s=findParentNode(_=>_.type===e)(o.selection);if(!s)return!0;const a=o.doc.resolve(Math.max(0,s.pos-1)).before(s.depth);if(a===void 0)return!0;const d=o.doc.nodeAt(a);return s.node.type===(d==null?void 0:d.type)&&canJoin(o.doc,s.pos)&&o.join(s.pos),!0},joinListForwards=(o,e)=>{const s=findParentNode(_=>_.type===e)(o.selection);if(!s)return!0;const a=o.doc.resolve(s.start).after(s.depth);if(a===void 0)return!0;const d=o.doc.nodeAt(a);return s.node.type===(d==null?void 0:d.type)&&canJoin(o.doc,a)&&o.join(a),!0},toggleList=(o,e,s,a={})=>({editor:d,tr:b,state:_,dispatch:_e,chain:nt,commands:rt,can:ct})=>{const{extensions:dt,splittableMarks:pt}=d.extensionManager,bt=getNodeType(o,_.schema),xt=getNodeType(e,_.schema),{selection:wt,storedMarks:Tt}=_,{$from:Rt,$to:Mt}=wt,Et=Rt.blockRange(Mt),$t=Tt||wt.$to.parentOffset&&wt.$from.marks();if(!Et)return!1;const Xt=findParentNode(Zt=>isList(Zt.type.name,dt))(wt);if(Et.depth>=1&&Xt&&Et.depth-Xt.depth<=1){if(Xt.node.type===bt)return rt.liftListItem(xt);if(isList(Xt.node.type.name,dt)&&bt.validContent(Xt.node.content)&&_e)return nt().command(()=>(b.setNodeMarkup(Xt.pos,bt),!0)).command(()=>joinListBackwards(b,bt)).command(()=>joinListForwards(b,bt)).run()}return!s||!$t||!_e?nt().command(()=>ct().wrapInList(bt,a)?!0:rt.clearNodes()).wrapInList(bt,a).command(()=>joinListBackwards(b,bt)).command(()=>joinListForwards(b,bt)).run():nt().command(()=>{const Zt=ct().wrapInList(bt,a),Nt=$t.filter(Jt=>pt.includes(Jt.type.name));return b.ensureMarks(Nt),Zt?!0:rt.clearNodes()}).wrapInList(bt,a).command(()=>joinListBackwards(b,bt)).command(()=>joinListForwards(b,bt)).run()},toggleMark=(o,e={},s={})=>({state:a,commands:d})=>{const{extendEmptyMarkRange:b=!1}=s,_=getMarkType(o,a.schema);return isMarkActive(a,_,e)?d.unsetMark(_,{extendEmptyMarkRange:b}):d.setMark(_,e)},toggleNode=(o,e,s={})=>({state:a,commands:d})=>{const b=getNodeType(o,a.schema),_=getNodeType(e,a.schema),_e=isNodeActive(a,b,s);let nt;return a.selection.$anchor.sameParent(a.selection.$head)&&(nt=a.selection.$anchor.parent.attrs),_e?d.setNode(_,nt):d.setNode(b,{...nt,...s})},toggleWrap=(o,e={})=>({state:s,commands:a})=>{const d=getNodeType(o,s.schema);return isNodeActive(s,d,e)?a.lift(d):a.wrapIn(d,e)},undoInputRule=()=>({state:o,dispatch:e})=>{const s=o.plugins;for(let a=0;a<s.length;a+=1){const d=s[a];let b;if(d.spec.isInputRules&&(b=d.getState(o))){if(e){const _=o.tr,_e=b.transform;for(let nt=_e.steps.length-1;nt>=0;nt-=1)_.step(_e.steps[nt].invert(_e.docs[nt]));if(b.text){const nt=_.doc.resolve(b.from).marks();_.replaceWith(b.from,b.to,o.schema.text(b.text,nt))}else _.delete(b.from,b.to)}return!0}}return!1},unsetAllMarks=()=>({tr:o,dispatch:e})=>{const{selection:s}=o,{empty:a,ranges:d}=s;return a||e&&d.forEach(b=>{o.removeMark(b.$from.pos,b.$to.pos)}),!0},unsetMark=(o,e={})=>({tr:s,state:a,dispatch:d})=>{var b;const{extendEmptyMarkRange:_=!1}=e,{selection:_e}=s,nt=getMarkType(o,a.schema),{$from:rt,empty:ct,ranges:dt}=_e;if(!d)return!0;if(ct&&_){let{from:pt,to:bt}=_e;const xt=(b=rt.marks().find(Tt=>Tt.type===nt))===null||b===void 0?void 0:b.attrs,wt=getMarkRange(rt,nt,xt);wt&&(pt=wt.from,bt=wt.to),s.removeMark(pt,bt,nt)}else dt.forEach(pt=>{s.removeMark(pt.$from.pos,pt.$to.pos,nt)});return s.removeStoredMark(nt),!0},updateAttributes=(o,e={})=>({tr:s,state:a,dispatch:d})=>{let b=null,_=null;const _e=getSchemaTypeNameByName(typeof o=="string"?o:o.name,a.schema);return _e?(_e==="node"&&(b=getNodeType(o,a.schema)),_e==="mark"&&(_=getMarkType(o,a.schema)),d&&s.selection.ranges.forEach(nt=>{const rt=nt.$from.pos,ct=nt.$to.pos;a.doc.nodesBetween(rt,ct,(dt,pt)=>{b&&b===dt.type&&s.setNodeMarkup(pt,void 0,{...dt.attrs,...e}),_&&dt.marks.length&&dt.marks.forEach(bt=>{if(_===bt.type){const xt=Math.max(pt,rt),wt=Math.min(pt+dt.nodeSize,ct);s.addMark(xt,wt,_.create({...bt.attrs,...e}))}})})}),!0):!1},wrapIn=(o,e={})=>({state:s,dispatch:a})=>{const d=getNodeType(o,s.schema);return wrapIn$1(d,e)(s,a)},wrapInList=(o,e={})=>({state:s,dispatch:a})=>{const d=getNodeType(o,s.schema);return wrapInList$1(d,e)(s,a)};var commands=Object.freeze({__proto__:null,blur,clearContent,clearNodes,command,createParagraphNear,cut,deleteCurrentNode,deleteNode,deleteRange,deleteSelection,enter,exitCode,extendMarkRange,first,focus,forEach,insertContent,insertContentAt,joinBackward,joinDown,joinForward,joinItemBackward,joinItemForward,joinTextblockBackward,joinTextblockForward,joinUp,keyboardShortcut,lift,liftEmptyBlock,liftListItem,newlineInCode,resetAttributes,scrollIntoView,selectAll,selectNodeBackward,selectNodeForward,selectParentNode,selectTextblockEnd,selectTextblockStart,setContent,setMark,setMeta,setNode,setNodeSelection,setTextSelection,sinkListItem,splitBlock,splitListItem,toggleList,toggleMark,toggleNode,toggleWrap,undoInputRule,unsetAllMarks,unsetMark,updateAttributes,wrapIn,wrapInList});const Commands=Extension.create({name:"commands",addCommands(){return{...commands}}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(o,e,s,a)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:s,moved:a})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:o}=this;return[new Plugin({key:new PluginKey("focusEvents"),props:{handleDOMEvents:{focus:(e,s)=>{o.isFocused=!0;const a=o.state.tr.setMeta("focus",{event:s}).setMeta("addToHistory",!1);return e.dispatch(a),!1},blur:(e,s)=>{o.isFocused=!1;const a=o.state.tr.setMeta("blur",{event:s}).setMeta("addToHistory",!1);return e.dispatch(a),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const o=()=>this.editor.commands.first(({commands:_})=>[()=>_.undoInputRule(),()=>_.command(({tr:_e})=>{const{selection:nt,doc:rt}=_e,{empty:ct,$anchor:dt}=nt,{pos:pt,parent:bt}=dt,xt=dt.parent.isTextblock&&pt>0?_e.doc.resolve(pt-1):dt,wt=xt.parent.type.spec.isolating,Tt=dt.pos-dt.parentOffset,Rt=wt&&xt.parent.childCount===1?Tt===dt.pos:Selection.atStart(rt).from===pt;return!ct||!bt.type.isTextblock||bt.textContent.length||!Rt||Rt&&dt.parent.type.name==="paragraph"?!1:_.clearNodes()}),()=>_.deleteSelection(),()=>_.joinBackward(),()=>_.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:_})=>[()=>_.deleteSelection(),()=>_.deleteCurrentNode(),()=>_.joinForward(),()=>_.selectNodeForward()]),a={Enter:()=>this.editor.commands.first(({commands:_})=>[()=>_.newlineInCode(),()=>_.createParagraphNear(),()=>_.liftEmptyBlock(),()=>_.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:o,"Mod-Backspace":o,"Shift-Backspace":o,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},d={...a},b={...a,"Ctrl-h":o,"Alt-Backspace":o,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?b:d},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(o,e,s)=>{const a=o.some(wt=>wt.docChanged)&&!e.doc.eq(s.doc),d=o.some(wt=>wt.getMeta("preventClearDocument"));if(!a||d)return;const{empty:b,from:_,to:_e}=e.selection,nt=Selection.atStart(e.doc).from,rt=Selection.atEnd(e.doc).to;if(b||!(_===nt&&_e===rt)||!isNodeEmpty(s.doc))return;const pt=s.tr,bt=createChainableState({state:s,transaction:pt}),{commands:xt}=new CommandManager({editor:this.editor,state:bt});if(xt.clearNodes(),!!pt.steps.length)return pt}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(o,e,s)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:s})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class NodePos{get name(){return this.node.type.name}constructor(e,s,a=!1,d=null){this.currentNode=null,this.actualDepth=null,this.isBlock=a,this.resolvedPos=e,this.editor=s,this.currentNode=d}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let s=this.from,a=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}s=this.from+1,a=this.to-1}this.editor.commands.insertContentAt({from:s,to:a},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),s=this.resolvedPos.doc.resolve(e);return new NodePos(s,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new NodePos(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new NodePos(e,this.editor)}get children(){const e=[];return this.node.content.forEach((s,a)=>{const d=s.isBlock&&!s.isTextblock,b=s.isAtom&&!s.isText,_=this.pos+a+(b?0:1),_e=this.resolvedPos.doc.resolve(_);if(!d&&_e.depth<=this.depth)return;const nt=new NodePos(_e,this.editor,d,d?s:null);d&&(nt.actualDepth=this.depth+1),e.push(new NodePos(_e,this.editor,d,d?s:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,s={}){let a=null,d=this.parent;for(;d&&!a;){if(d.node.type.name===e)if(Object.keys(s).length>0){const b=d.node.attrs,_=Object.keys(s);for(let _e=0;_e<_.length;_e+=1){const nt=_[_e];if(b[nt]!==s[nt])break}}else a=d;d=d.parent}return a}querySelector(e,s={}){return this.querySelectorAll(e,s,!0)[0]||null}querySelectorAll(e,s={},a=!1){let d=[];if(!this.children||this.children.length===0)return d;const b=Object.keys(s);return this.children.forEach(_=>{a&&d.length>0||(_.node.type.name===e&&b.every(nt=>s[nt]===_.node.attrs[nt])&&d.push(_),!(a&&d.length>0)&&(d=d.concat(_.querySelectorAll(e,s,a))))}),d}setAttribute(e){const{tr:s}=this.editor.state;s.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(s)}}const style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function createStyleTag(o,e,s){const a=document.querySelector("style[data-tiptap-style]");if(a!==null)return a;const d=document.createElement("style");return e&&d.setAttribute("nonce",e),d.setAttribute("data-tiptap-style",""),d.innerHTML=o,document.getElementsByTagName("head")[0].appendChild(d),d}class Editor extends EventEmitter{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:s})=>{throw s},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:s,slice:a,moved:d})=>this.options.onDrop(s,a,d)),this.on("paste",({event:s,slice:a})=>this.options.onPaste(s,a)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,s=!0){this.setOptions({editable:e}),s&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,s){const a=isFunction(s)?s(e,[...this.state.plugins]):[...this.state.plugins,e],d=this.state.reconfigure({plugins:a});return this.view.updateState(d),d}unregisterPlugin(e){if(this.isDestroyed)return;const s=this.state.plugins;let a=s;if([].concat(e).forEach(b=>{const _=typeof b=="string"?`${b}$`:b.key;a=s.filter(_e=>!_e.key.startsWith(_))}),s.length===a.length)return;const d=this.state.reconfigure({plugins:a});return this.view.updateState(d),d}createExtensionManager(){var e,s;const d=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(s=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||s===void 0?void 0:s.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste].filter(b=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[b.name]!==!1:!0):[],...this.options.extensions].filter(b=>["extension","node","mark"].includes(b==null?void 0:b.type));this.extensionManager=new ExtensionManager(d,this)}createCommandManager(){this.commandManager=new CommandManager({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e;try{e=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(b){if(!(b instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(b.message))throw b;this.emit("contentError",{editor:this,error:b,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(_=>_.name!=="collaboration"),this.createExtensionManager()}}),e=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const s=resolveFocusPosition(e,this.options.autofocus);this.view=new EditorView(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:EditorState.create({doc:e,selection:s||void 0})}),this.view.dom.setAttribute("role","textbox"),this.view.dom.getAttribute("aria-label")||this.view.dom.setAttribute("aria-label","Rich-Text Editor");const a=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(a),this.createNodeViews(),this.prependClass();const d=this.view.dom;d.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const s=this.capturedTransaction;return this.capturedTransaction=null,s}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(_=>{var _e;return(_e=this.capturedTransaction)===null||_e===void 0?void 0:_e.step(_)});return}const s=this.state.apply(e),a=!this.state.selection.eq(s.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:s}),this.view.updateState(s),this.emit("transaction",{editor:this,transaction:e}),a&&this.emit("selectionUpdate",{editor:this,transaction:e});const d=e.getMeta("focus"),b=e.getMeta("blur");d&&this.emit("focus",{editor:this,event:d.event,transaction:e}),b&&this.emit("blur",{editor:this,event:b.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return getAttributes(this.state,e)}isActive(e,s){const a=typeof e=="string"?e:null,d=typeof e=="string"?s:e;return isActive(this.state,a,d)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:s=`

`,textSerializers:a={}}=e||{};return getText(this.state.doc,{blockSeparator:s,textSerializers:{...getTextSerializersFromSchema(this.schema),...a}})}get isEmpty(){return isNodeEmpty(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,s){var a;return((a=this.$doc)===null||a===void 0?void 0:a.querySelector(e,s))||null}$nodes(e,s){var a;return((a=this.$doc)===null||a===void 0?void 0:a.querySelectorAll(e,s))||null}$pos(e){const s=this.state.doc.resolve(e);return new NodePos(s,this)}get $doc(){return this.$pos(0)}}function markInputRule(o){return new InputRule({find:o.find,handler:({state:e,range:s,match:a})=>{const d=callOrReturn(o.getAttributes,void 0,a);if(d===!1||d===null)return null;const{tr:b}=e,_=a[a.length-1],_e=a[0];if(_){const nt=_e.search(/\S/),rt=s.from+_e.indexOf(_),ct=rt+_.length;if(getMarksBetween(s.from,s.to,e.doc).filter(bt=>bt.mark.type.excluded.find(wt=>wt===o.type&&wt!==bt.mark.type)).filter(bt=>bt.to>rt).length)return null;ct<s.to&&b.delete(ct,s.to),rt>s.from&&b.delete(s.from+nt,rt);const pt=s.from+nt+_.length;b.addMark(s.from+nt,pt,o.type.create(d||{})),b.removeStoredMark(o.type)}}})}function nodeInputRule(o){return new InputRule({find:o.find,handler:({state:e,range:s,match:a})=>{const d=callOrReturn(o.getAttributes,void 0,a)||{},{tr:b}=e,_=s.from;let _e=s.to;const nt=o.type.create(d);if(a[1]){const rt=a[0].lastIndexOf(a[1]);let ct=_+rt;ct>_e?ct=_e:_e=ct+a[1].length;const dt=a[0][a[0].length-1];b.insertText(dt,_+a[0].length-1),b.replaceWith(ct,_e,nt)}else if(a[0]){const rt=o.type.isInline?_:_-1;b.insert(rt,o.type.create(d)).delete(b.mapping.map(_),b.mapping.map(_e))}b.scrollIntoView()}})}function textblockTypeInputRule(o){return new InputRule({find:o.find,handler:({state:e,range:s,match:a})=>{const d=e.doc.resolve(s.from),b=callOrReturn(o.getAttributes,void 0,a)||{};if(!d.node(-1).canReplaceWith(d.index(-1),d.indexAfter(-1),o.type))return null;e.tr.delete(s.from,s.to).setBlockType(s.from,s.from,o.type,b)}})}function wrappingInputRule(o){return new InputRule({find:o.find,handler:({state:e,range:s,match:a,chain:d})=>{const b=callOrReturn(o.getAttributes,void 0,a)||{},_=e.tr.delete(s.from,s.to),nt=_.doc.resolve(s.from).blockRange(),rt=nt&&findWrapping(nt,o.type,b);if(!rt)return null;if(_.wrap(nt,rt),o.keepMarks&&o.editor){const{selection:dt,storedMarks:pt}=e,{splittableMarks:bt}=o.editor.extensionManager,xt=pt||dt.$to.parentOffset&&dt.$from.marks();if(xt){const wt=xt.filter(Tt=>bt.includes(Tt.type.name));_.ensureMarks(wt)}}if(o.keepAttributes){const dt=o.type.name==="bulletList"||o.type.name==="orderedList"?"listItem":"taskList";d().updateAttributes(dt,b).run()}const ct=_.doc.resolve(s.from-1).nodeBefore;ct&&ct.type===o.type&&canJoin(_.doc,s.from-1)&&(!o.joinPredicate||o.joinPredicate(a,ct))&&_.join(s.from-1)}})}let Node$1=class uie{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new uie(e)}configure(e={}){const s=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return s.name=this.name,s.parent=this.parent,s}extend(e={}){const s=new uie(e);return s.parent=this,this.child=s,s.name=e.name?e.name:s.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=callOrReturn(getExtensionField(s,"addOptions",{name:s.name})),s.storage=callOrReturn(getExtensionField(s,"addStorage",{name:s.name,options:s.options})),s}};function markPasteRule(o){return new PasteRule({find:o.find,handler:({state:e,range:s,match:a,pasteEvent:d})=>{const b=callOrReturn(o.getAttributes,void 0,a,d);if(b===!1||b===null)return null;const{tr:_}=e,_e=a[a.length-1],nt=a[0];let rt=s.to;if(_e){const ct=nt.search(/\S/),dt=s.from+nt.indexOf(_e),pt=dt+_e.length;if(getMarksBetween(s.from,s.to,e.doc).filter(xt=>xt.mark.type.excluded.find(Tt=>Tt===o.type&&Tt!==xt.mark.type)).filter(xt=>xt.to>dt).length)return null;pt<s.to&&_.delete(pt,s.to),dt>s.from&&_.delete(s.from+ct,dt),rt=s.from+ct+_e.length,_.addMark(s.from+ct,rt,o.type.create(b||{})),_.removeStoredMark(o.type)}}})}const TextStyle=Mark.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:o=>o.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:o}){return["span",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:o,commands:e})=>{const s=getMarkAttributes(o,this.type);return Object.entries(s).some(([,d])=>!!d)?!0:e.unsetMark(this.name)}}}}),Color=Extension.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:o=>{var e;return(e=o.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:o=>o.color?{style:`color: ${o.color}`}:{}}}}]},addCommands(){return{setColor:o=>({chain:e})=>e().setMark("textStyle",{color:o}).run(),unsetColor:()=>({chain:o})=>o().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),ListItem=Node$1.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:o}){return["li",mergeAttributes(this.options.HTMLAttributes,o),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production_min;function requireUseSyncExternalStoreShim_production_min(){if(hasRequiredUseSyncExternalStoreShim_production_min)return useSyncExternalStoreShim_production_min;hasRequiredUseSyncExternalStoreShim_production_min=1;var o=React;function e(dt,pt){return dt===pt&&(dt!==0||1/dt===1/pt)||dt!==dt&&pt!==pt}var s=typeof Object.is=="function"?Object.is:e,a=o.useState,d=o.useEffect,b=o.useLayoutEffect,_=o.useDebugValue;function _e(dt,pt){var bt=pt(),xt=a({inst:{value:bt,getSnapshot:pt}}),wt=xt[0].inst,Tt=xt[1];return b(function(){wt.value=bt,wt.getSnapshot=pt,nt(wt)&&Tt({inst:wt})},[dt,bt,pt]),d(function(){return nt(wt)&&Tt({inst:wt}),dt(function(){nt(wt)&&Tt({inst:wt})})},[dt]),_(bt),bt}function nt(dt){var pt=dt.getSnapshot;dt=dt.value;try{var bt=pt();return!s(dt,bt)}catch{return!0}}function rt(dt,pt){return pt()}var ct=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?rt:_e;return useSyncExternalStoreShim_production_min.useSyncExternalStore=o.useSyncExternalStore!==void 0?o.useSyncExternalStore:ct,useSyncExternalStoreShim_production_min}shim.exports=requireUseSyncExternalStoreShim_production_min();var shimExports=shim.exports;const mergeRefs=(...o)=>e=>{o.forEach(s=>{typeof s=="function"?s(e):s&&(s.current=e)})},Portals=({contentComponent:o})=>{const e=shimExports.useSyncExternalStore(o.subscribe,o.getSnapshot,o.getServerSnapshot);return React.createElement(React.Fragment,null,Object.values(e))};function getInstance(){const o=new Set;let e={};return{subscribe(s){return o.add(s),()=>{o.delete(s)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(s,a){e={...e,[s]:ReactDOM.createPortal(a.reactElement,a.element,s)},o.forEach(d=>d())},removeRenderer(s){const a={...e};delete a[s],e=a,o.forEach(d=>d())}}}class PureEditorContent extends React.Component{constructor(e){var s;super(e),this.editorContentRef=React.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((s=e.editor)===null||s===void 0)&&s.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const s=this.editorContentRef.current;s.append(...e.options.element.childNodes),e.setOptions({element:s}),e.contentComponent=getInstance(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(a=>a.hasContentComponentInitialized?a:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const s=document.createElement("div");s.append(...e.options.element.childNodes),e.setOptions({element:s})}render(){const{editor:e,innerRef:s,...a}=this.props;return React.createElement(React.Fragment,null,React.createElement("div",{ref:mergeRefs(s,this.editorContentRef),...a}),(e==null?void 0:e.contentComponent)&&React.createElement(Portals,{contentComponent:e.contentComponent}))}}const EditorContentWithKey=reactExports.forwardRef((o,e)=>{const s=React.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[o.editor]);return React.createElement(PureEditorContent,{key:s,innerRef:e,...o})}),EditorContent=React.memo(EditorContentWithKey);var react=function o(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var a,d,b;if(Array.isArray(e)){if(a=e.length,a!=s.length)return!1;for(d=a;d--!==0;)if(!o(e[d],s[d]))return!1;return!0}if(e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(d of e.entries())if(!s.has(d[0]))return!1;for(d of e.entries())if(!o(d[1],s.get(d[0])))return!1;return!0}if(e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(d of e.entries())if(!s.has(d[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if(a=e.length,a!=s.length)return!1;for(d=a;d--!==0;)if(e[d]!==s[d])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(b=Object.keys(e),a=b.length,a!==Object.keys(s).length)return!1;for(d=a;d--!==0;)if(!Object.prototype.hasOwnProperty.call(s,b[d]))return!1;for(d=a;d--!==0;){var _=b[d];if(!(_==="_owner"&&e.$$typeof)&&!o(e[_],s[_]))return!1}return!0}return e!==e&&s!==s},deepEqual=getDefaultExportFromCjs(react),withSelector={exports:{}},withSelector_production_min={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production_min;function requireWithSelector_production_min(){if(hasRequiredWithSelector_production_min)return withSelector_production_min;hasRequiredWithSelector_production_min=1;var o=React,e=shimExports;function s(rt,ct){return rt===ct&&(rt!==0||1/rt===1/ct)||rt!==rt&&ct!==ct}var a=typeof Object.is=="function"?Object.is:s,d=e.useSyncExternalStore,b=o.useRef,_=o.useEffect,_e=o.useMemo,nt=o.useDebugValue;return withSelector_production_min.useSyncExternalStoreWithSelector=function(rt,ct,dt,pt,bt){var xt=b(null);if(xt.current===null){var wt={hasValue:!1,value:null};xt.current=wt}else wt=xt.current;xt=_e(function(){function Rt(Zt){if(!Mt){if(Mt=!0,Et=Zt,Zt=pt(Zt),bt!==void 0&&wt.hasValue){var Nt=wt.value;if(bt(Nt,Zt))return $t=Nt}return $t=Zt}if(Nt=$t,a(Et,Zt))return Nt;var Jt=pt(Zt);return bt!==void 0&&bt(Nt,Jt)?Nt:(Et=Zt,$t=Jt)}var Mt=!1,Et,$t,Xt=dt===void 0?null:dt;return[function(){return Rt(ct())},Xt===null?void 0:function(){return Rt(Xt())}]},[ct,dt,pt,bt]);var Tt=d(rt,xt[0],xt[1]);return _(function(){wt.hasValue=!0,wt.value=Tt},[Tt]),nt(Tt),Tt},withSelector_production_min}withSelector.exports=requireWithSelector_production_min();var withSelectorExports=withSelector.exports;class EditorStateManager{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const s=()=>{this.transactionNumber+=1,this.subscribers.forEach(d=>d())},a=this.editor;return a.on("transaction",s),()=>{a.off("transaction",s)}}}}function useEditorState(o){var e;const[s]=reactExports.useState(()=>new EditorStateManager(o.editor)),a=withSelectorExports.useSyncExternalStoreWithSelector(s.subscribe,s.getSnapshot,s.getServerSnapshot,o.selector,(e=o.equalityFn)!==null&&e!==void 0?e:deepEqual);return reactExports.useEffect(()=>s.watch(o.editor),[o.editor,s]),reactExports.useDebugValue(a),a}const isDev=!1,isSSR=typeof window>"u",isNext=isSSR||!!(typeof window<"u"&&window.next);class EditorInstanceManager{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(s=>s())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return isSSR||isNext?null:this.createEditor();if(this.options.current.immediatelyRender&&isSSR&&isDev)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...a)=>{var d,b;return(b=(d=this.options.current).onBeforeCreate)===null||b===void 0?void 0:b.call(d,...a)},onBlur:(...a)=>{var d,b;return(b=(d=this.options.current).onBlur)===null||b===void 0?void 0:b.call(d,...a)},onCreate:(...a)=>{var d,b;return(b=(d=this.options.current).onCreate)===null||b===void 0?void 0:b.call(d,...a)},onDestroy:(...a)=>{var d,b;return(b=(d=this.options.current).onDestroy)===null||b===void 0?void 0:b.call(d,...a)},onFocus:(...a)=>{var d,b;return(b=(d=this.options.current).onFocus)===null||b===void 0?void 0:b.call(d,...a)},onSelectionUpdate:(...a)=>{var d,b;return(b=(d=this.options.current).onSelectionUpdate)===null||b===void 0?void 0:b.call(d,...a)},onTransaction:(...a)=>{var d,b;return(b=(d=this.options.current).onTransaction)===null||b===void 0?void 0:b.call(d,...a)},onUpdate:(...a)=>{var d,b;return(b=(d=this.options.current).onUpdate)===null||b===void 0?void 0:b.call(d,...a)},onContentError:(...a)=>{var d,b;return(b=(d=this.options.current).onContentError)===null||b===void 0?void 0:b.call(d,...a)},onDrop:(...a)=>{var d,b;return(b=(d=this.options.current).onDrop)===null||b===void 0?void 0:b.call(d,...a)},onPaste:(...a)=>{var d,b;return(b=(d=this.options.current).onPaste)===null||b===void 0?void 0:b.call(d,...a)}};return new Editor(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((a,d)=>a===e[d]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,s=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){s&&s.setOptions(this.options.current);return}s&&!s.isDestroyed&&(s.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function useEditor(o={},e=[]){const s=reactExports.useRef(o);s.current=o;const[a]=reactExports.useState(()=>new EditorInstanceManager(s)),d=shimExports.useSyncExternalStore(a.subscribe,a.getEditor,a.getServerSnapshot);return reactExports.useDebugValue(d),reactExports.useEffect(a.onRender(e)),useEditorState({editor:d,selector:({transactionNumber:b})=>o.shouldRerenderOnTransaction===!1?null:o.immediatelyRender&&b===0?0:b+1}),d}const EditorContext=reactExports.createContext({editor:null}),EditorConsumer=EditorContext.Consumer,useCurrentEditor=()=>reactExports.useContext(EditorContext);function EditorProvider({children:o,slotAfter:e,slotBefore:s,editorContainerProps:a={},...d}){const b=useEditor(d);return b?React.createElement(EditorContext.Provider,{value:{editor:b}},s,React.createElement(EditorConsumer,null,({editor:_})=>React.createElement(EditorContent,{editor:_,...a})),o,e):null}const ReactNodeViewContext=reactExports.createContext({onDragStart:void 0}),useReactNodeView=()=>reactExports.useContext(ReactNodeViewContext);React.forwardRef((o,e)=>{const{onDragStart:s}=useReactNodeView(),a=o.as||"div";return React.createElement(a,{...o,ref:e,"data-node-view-wrapper":"",onDragStart:s,style:{whiteSpace:"normal",...o.style}})});const inputRegex$4=/^\s*>\s$/,Blockquote=Node$1.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:o}){return["blockquote",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{setBlockquote:()=>({commands:o})=>o.wrapIn(this.name),toggleBlockquote:()=>({commands:o})=>o.toggleWrap(this.name),unsetBlockquote:()=>({commands:o})=>o.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$4,type:this.type})]}}),starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:o=>o.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:o=>o.type.name===this.name},{style:"font-weight",getAttrs:o=>/^(bold(er)?|[5-9]\d{2,})$/.test(o)&&null}]},renderHTML({HTMLAttributes:o}){return["strong",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{setBold:()=>({commands:o})=>o.setMark(this.name),toggleBold:()=>({commands:o})=>o.toggleMark(this.name),unsetBold:()=>({commands:o})=>o.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),ListItemName$1="listItem",TextStyleName$1="textStyle",inputRegex$3=/^\s*([-+*])\s$/,BulletList=Node$1.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:o}){return["ul",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{toggleBulletList:()=>({commands:o,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName$1,this.editor.getAttributes(TextStyleName$1)).run():o.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let o=wrappingInputRule({find:inputRegex$3,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(o=wrappingInputRule({find:inputRegex$3,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyleName$1),editor:this.editor})),[o]}}),inputRegex$2=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,pasteRegex$1=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:o}){return["code",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{setCode:()=>({commands:o})=>o.setMark(this.name),toggleCode:()=>({commands:o})=>o.toggleMark(this.name),unsetCode:()=>({commands:o})=>o.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$2,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node$1.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:o=>{var e;const{languageClassPrefix:s}=this.options,b=[...((e=o.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(_=>_.startsWith(s)).map(_=>_.replace(s,""))[0];return b||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:o,HTMLAttributes:e}){return["pre",mergeAttributes(this.options.HTMLAttributes,e),["code",{class:o.attrs.language?this.options.languageClassPrefix+o.attrs.language:null},0]]},addCommands(){return{setCodeBlock:o=>({commands:e})=>e.setNode(this.name,o),toggleCodeBlock:o=>({commands:e})=>e.toggleNode(this.name,"paragraph",o)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:o,$anchor:e}=this.editor.state.selection,s=e.pos===1;return!o||e.parent.type.name!==this.name?!1:s||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:o})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=o,{selection:s}=e,{$from:a,empty:d}=s;if(!d||a.parent.type!==this.type)return!1;const b=a.parentOffset===a.parent.nodeSize-2,_=a.parent.textContent.endsWith(`

`);return!b||!_?!1:o.chain().command(({tr:_e})=>(_e.delete(a.pos-2,a.pos),!0)).exitCode().run()},ArrowDown:({editor:o})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=o,{selection:s,doc:a}=e,{$from:d,empty:b}=s;if(!b||d.parent.type!==this.type||!(d.parentOffset===d.parent.nodeSize-2))return!1;const _e=d.after();return _e===void 0?!1:a.nodeAt(_e)?o.commands.command(({tr:rt})=>(rt.setSelection(Selection.near(a.resolve(_e))),!0)):o.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:o=>({language:o[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:o=>({language:o[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(o,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const s=e.clipboardData.getData("text/plain"),a=e.clipboardData.getData("vscode-editor-data"),d=a?JSON.parse(a):void 0,b=d==null?void 0:d.mode;if(!s||!b)return!1;const{tr:_,schema:_e}=o.state,nt=_e.text(s.replace(/\r\n?/g,`
`));return _.replaceSelectionWith(this.type.create({language:b},nt)),_.selection.$from.parent.type!==this.type&&_.setSelection(TextSelection.near(_.doc.resolve(Math.max(0,_.selection.from-2)))),_.setMeta("paste",!0),o.dispatch(_),!0}}})]}}),Document=Node$1.create({name:"doc",topNode:!0,content:"block+"});function dropCursor(o={}){return new Plugin({view(e){return new DropCursorView(e,o)}})}class DropCursorView{constructor(e,s){var a;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(a=s.width)!==null&&a!==void 0?a:1,this.color=s.color===!1?void 0:s.color||"black",this.class=s.class,this.handlers=["dragover","dragend","drop","dragleave"].map(d=>{let b=_=>{this[d](_)};return e.dom.addEventListener(d,b),{name:d,handler:b}})}destroy(){this.handlers.forEach(({name:e,handler:s})=>this.editorView.dom.removeEventListener(e,s))}update(e,s){this.cursorPos!=null&&s.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),s=!e.parent.inlineContent,a;if(s){let _e=e.nodeBefore,nt=e.nodeAfter;if(_e||nt){let rt=this.editorView.nodeDOM(this.cursorPos-(_e?_e.nodeSize:0));if(rt){let ct=rt.getBoundingClientRect(),dt=_e?ct.bottom:ct.top;_e&&nt&&(dt=(dt+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),a={left:ct.left,right:ct.right,top:dt-this.width/2,bottom:dt+this.width/2}}}}if(!a){let _e=this.editorView.coordsAtPos(this.cursorPos);a={left:_e.left-this.width/2,right:_e.left+this.width/2,top:_e.top,bottom:_e.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",s),this.element.classList.toggle("prosemirror-dropcursor-inline",!s);let b,_;if(!d||d==document.body&&getComputedStyle(d).position=="static")b=-pageXOffset,_=-pageYOffset;else{let _e=d.getBoundingClientRect();b=_e.left-d.scrollLeft,_=_e.top-d.scrollTop}this.element.style.left=a.left-b+"px",this.element.style.top=a.top-_+"px",this.element.style.width=a.right-a.left+"px",this.element.style.height=a.bottom-a.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let s=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),a=s&&s.inside>=0&&this.editorView.state.doc.nodeAt(s.inside),d=a&&a.type.spec.disableDropCursor,b=typeof d=="function"?d(this.editorView,s,e):d;if(s&&!b){let _=s.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let _e=dropPoint(this.editorView.state.doc,_,this.editorView.dragging.slice);_e!=null&&(_=_e)}this.setCursor(_),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});class GapCursor extends Selection{constructor(e){super(e,e)}map(e,s){let a=e.resolve(s.map(this.head));return GapCursor.valid(a)?new GapCursor(a):Selection.near(a)}content(){return Slice.empty}eq(e){return e instanceof GapCursor&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(e.resolve(s.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(e){let s=e.parent;if(s.isTextblock||!closedBefore(e)||!closedAfter(e))return!1;let a=s.type.spec.allowGapCursor;if(a!=null)return a;let d=s.contentMatchAt(e.index()).defaultType;return d&&d.isTextblock}static findGapCursorFrom(e,s,a=!1){e:for(;;){if(!a&&GapCursor.valid(e))return e;let d=e.pos,b=null;for(let _=e.depth;;_--){let _e=e.node(_);if(s>0?e.indexAfter(_)<_e.childCount:e.index(_)>0){b=_e.child(s>0?e.indexAfter(_):e.index(_)-1);break}else if(_==0)return null;d+=s;let nt=e.doc.resolve(d);if(GapCursor.valid(nt))return nt}for(;;){let _=s>0?b.firstChild:b.lastChild;if(!_){if(b.isAtom&&!b.isText&&!NodeSelection.isSelectable(b)){e=e.doc.resolve(d+b.nodeSize*s),a=!1;continue e}break}b=_,d+=s;let _e=e.doc.resolve(d);if(GapCursor.valid(_e))return _e}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(e){this.pos=e}map(e){return new GapBookmark(e.map(this.pos))}resolve(e){let s=e.resolve(this.pos);return GapCursor.valid(s)?new GapCursor(s):Selection.near(s)}}function closedBefore(o){for(let e=o.depth;e>=0;e--){let s=o.index(e),a=o.node(e);if(s==0){if(a.type.spec.isolating)return!0;continue}for(let d=a.child(s-1);;d=d.lastChild){if(d.childCount==0&&!d.inlineContent||d.isAtom||d.type.spec.isolating)return!0;if(d.inlineContent)return!1}}return!0}function closedAfter(o){for(let e=o.depth;e>=0;e--){let s=o.indexAfter(e),a=o.node(e);if(s==a.childCount){if(a.type.spec.isolating)return!0;continue}for(let d=a.child(s);;d=d.firstChild){if(d.childCount==0&&!d.inlineContent||d.isAtom||d.type.spec.isolating)return!0;if(d.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(o,e,s){return e.pos==s.pos&&GapCursor.valid(s)?new GapCursor(s):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(o,e){const s=o=="vert"?e>0?"down":"up":e>0?"right":"left";return function(a,d,b){let _=a.selection,_e=e>0?_.$to:_.$from,nt=_.empty;if(_ instanceof TextSelection){if(!b.endOfTextblock(s)||_e.depth==0)return!1;nt=!1,_e=a.doc.resolve(e>0?_e.after():_e.before())}let rt=GapCursor.findGapCursorFrom(_e,e,nt);return rt?(d&&d(a.tr.setSelection(new GapCursor(rt))),!0):!1}}function handleClick(o,e,s){if(!o||!o.editable)return!1;let a=o.state.doc.resolve(e);if(!GapCursor.valid(a))return!1;let d=o.posAtCoords({left:s.clientX,top:s.clientY});return d&&d.inside>-1&&NodeSelection.isSelectable(o.state.doc.nodeAt(d.inside))?!1:(o.dispatch(o.state.tr.setSelection(new GapCursor(a))),!0)}function beforeinput(o,e){if(e.inputType!="insertCompositionText"||!(o.state.selection instanceof GapCursor))return!1;let{$from:s}=o.state.selection,a=s.parent.contentMatchAt(s.index()).findWrapping(o.state.schema.nodes.text);if(!a)return!1;let d=Fragment.empty;for(let _=a.length-1;_>=0;_--)d=Fragment.from(a[_].createAndFill(null,d));let b=o.state.tr.replace(s.pos,s.pos,new Slice(d,0,0));return b.setSelection(TextSelection.near(b.doc.resolve(s.pos+1))),o.dispatch(b),!1}function drawGapCursor(o){if(!(o.selection instanceof GapCursor))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",DecorationSet.create(o.doc,[Decoration.widget(o.selection.head,e,{key:"gapcursor"})])}const Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(o){var e;const s={name:o.name,options:o.options,storage:o.storage};return{allowGapCursor:(e=callOrReturn(getExtensionField(o,"allowGapCursor",s)))!==null&&e!==void 0?e:null}}}),HardBreak=Node$1.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:o}){return["br",mergeAttributes(this.options.HTMLAttributes,o)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:o,chain:e,state:s,editor:a})=>o.first([()=>o.exitCode(),()=>o.command(()=>{const{selection:d,storedMarks:b}=s;if(d.$from.parent.type.spec.isolating)return!1;const{keepMarks:_}=this.options,{splittableMarks:_e}=a.extensionManager,nt=b||d.$to.parentOffset&&d.$from.marks();return e().insertContent({type:this.name}).command(({tr:rt,dispatch:ct})=>{if(ct&&nt&&_){const dt=nt.filter(pt=>_e.includes(pt.type.name));rt.ensureMarks(dt)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node$1.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(o=>({tag:`h${o}`,attrs:{level:o}}))},renderHTML({node:o,HTMLAttributes:e}){return[`h${this.options.levels.includes(o.attrs.level)?o.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:o=>({commands:e})=>this.options.levels.includes(o.level)?e.setNode(this.name,o):!1,toggleHeading:o=>({commands:e})=>this.options.levels.includes(o.level)?e.toggleNode(this.name,"paragraph",o):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((o,e)=>({...o,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(o=>textblockTypeInputRule({find:new RegExp(`^(#{1,${o}})\\s$`),type:this.type,getAttributes:{level:o}}))}});var GOOD_LEAF_SIZE=200,RopeSequence=function o(){};RopeSequence.prototype.append=function o(e){return e.length?(e=RopeSequence.from(e),!this.length&&e||e.length<GOOD_LEAF_SIZE&&this.leafAppend(e)||this.length<GOOD_LEAF_SIZE&&e.leafPrepend(this)||this.appendInner(e)):this};RopeSequence.prototype.prepend=function o(e){return e.length?RopeSequence.from(e).append(this):this};RopeSequence.prototype.appendInner=function o(e){return new Append(this,e)};RopeSequence.prototype.slice=function o(e,s){return e===void 0&&(e=0),s===void 0&&(s=this.length),e>=s?RopeSequence.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,s))};RopeSequence.prototype.get=function o(e){if(!(e<0||e>=this.length))return this.getInner(e)};RopeSequence.prototype.forEach=function o(e,s,a){s===void 0&&(s=0),a===void 0&&(a=this.length),s<=a?this.forEachInner(e,s,a,0):this.forEachInvertedInner(e,s,a,0)};RopeSequence.prototype.map=function o(e,s,a){s===void 0&&(s=0),a===void 0&&(a=this.length);var d=[];return this.forEach(function(b,_){return d.push(e(b,_))},s,a),d};RopeSequence.from=function o(e){return e instanceof RopeSequence?e:e&&e.length?new Leaf(e):RopeSequence.empty};var Leaf=function(o){function e(a){o.call(this),this.values=a}o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e;var s={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(d,b){return d==0&&b==this.length?this:new e(this.values.slice(d,b))},e.prototype.getInner=function(d){return this.values[d]},e.prototype.forEachInner=function(d,b,_,_e){for(var nt=b;nt<_;nt++)if(d(this.values[nt],_e+nt)===!1)return!1},e.prototype.forEachInvertedInner=function(d,b,_,_e){for(var nt=b-1;nt>=_;nt--)if(d(this.values[nt],_e+nt)===!1)return!1},e.prototype.leafAppend=function(d){if(this.length+d.length<=GOOD_LEAF_SIZE)return new e(this.values.concat(d.flatten()))},e.prototype.leafPrepend=function(d){if(this.length+d.length<=GOOD_LEAF_SIZE)return new e(d.flatten().concat(this.values))},s.length.get=function(){return this.values.length},s.depth.get=function(){return 0},Object.defineProperties(e.prototype,s),e}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(o){function e(s,a){o.call(this),this.left=s,this.right=a,this.length=s.length+a.length,this.depth=Math.max(s.depth,a.depth)+1}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(a){return a<this.left.length?this.left.get(a):this.right.get(a-this.left.length)},e.prototype.forEachInner=function(a,d,b,_){var _e=this.left.length;if(d<_e&&this.left.forEachInner(a,d,Math.min(b,_e),_)===!1||b>_e&&this.right.forEachInner(a,Math.max(d-_e,0),Math.min(this.length,b)-_e,_+_e)===!1)return!1},e.prototype.forEachInvertedInner=function(a,d,b,_){var _e=this.left.length;if(d>_e&&this.right.forEachInvertedInner(a,d-_e,Math.max(b,_e)-_e,_+_e)===!1||b<_e&&this.left.forEachInvertedInner(a,Math.min(d,_e),b,_)===!1)return!1},e.prototype.sliceInner=function(a,d){if(a==0&&d==this.length)return this;var b=this.left.length;return d<=b?this.left.slice(a,d):a>=b?this.right.slice(a-b,d-b):this.left.slice(a,b).append(this.right.slice(0,d-b))},e.prototype.leafAppend=function(a){var d=this.right.leafAppend(a);if(d)return new e(this.left,d)},e.prototype.leafPrepend=function(a){var d=this.left.leafPrepend(a);if(d)return new e(d,this.right)},e.prototype.appendInner=function(a){return this.left.depth>=Math.max(this.right.depth,a.depth)+1?new e(this.left,new e(this.right,a)):new e(this,a)},e}(RopeSequence);const max_empty_items=500;class Branch{constructor(e,s){this.items=e,this.eventCount=s}popEvent(e,s){if(this.eventCount==0)return null;let a=this.items.length;for(;;a--)if(this.items.get(a-1).selection){--a;break}let d,b;s&&(d=this.remapping(a,this.items.length),b=d.maps.length);let _=e.tr,_e,nt,rt=[],ct=[];return this.items.forEach((dt,pt)=>{if(!dt.step){d||(d=this.remapping(a,pt+1),b=d.maps.length),b--,ct.push(dt);return}if(d){ct.push(new Item(dt.map));let bt=dt.step.map(d.slice(b)),xt;bt&&_.maybeStep(bt).doc&&(xt=_.mapping.maps[_.mapping.maps.length-1],rt.push(new Item(xt,void 0,void 0,rt.length+ct.length))),b--,xt&&d.appendMap(xt,b)}else _.maybeStep(dt.step);if(dt.selection)return _e=d?dt.selection.map(d.slice(b)):dt.selection,nt=new Branch(this.items.slice(0,a).append(ct.reverse().concat(rt)),this.eventCount-1),!1},this.items.length,0),{remaining:nt,transform:_,selection:_e}}addTransform(e,s,a,d){let b=[],_=this.eventCount,_e=this.items,nt=!d&&_e.length?_e.get(_e.length-1):null;for(let ct=0;ct<e.steps.length;ct++){let dt=e.steps[ct].invert(e.docs[ct]),pt=new Item(e.mapping.maps[ct],dt,s),bt;(bt=nt&&nt.merge(pt))&&(pt=bt,ct?b.pop():_e=_e.slice(0,_e.length-1)),b.push(pt),s&&(_++,s=void 0),d||(nt=pt)}let rt=_-a.depth;return rt>DEPTH_OVERFLOW&&(_e=cutOffEvents(_e,rt),_-=rt),new Branch(_e.append(b),_)}remapping(e,s){let a=new Mapping;return this.items.forEach((d,b)=>{let _=d.mirrorOffset!=null&&b-d.mirrorOffset>=e?a.maps.length-d.mirrorOffset:void 0;a.appendMap(d.map,_)},e,s),a}addMaps(e){return this.eventCount==0?this:new Branch(this.items.append(e.map(s=>new Item(s))),this.eventCount)}rebased(e,s){if(!this.eventCount)return this;let a=[],d=Math.max(0,this.items.length-s),b=e.mapping,_=e.steps.length,_e=this.eventCount;this.items.forEach(pt=>{pt.selection&&_e--},d);let nt=s;this.items.forEach(pt=>{let bt=b.getMirror(--nt);if(bt==null)return;_=Math.min(_,bt);let xt=b.maps[bt];if(pt.step){let wt=e.steps[bt].invert(e.docs[bt]),Tt=pt.selection&&pt.selection.map(b.slice(nt+1,bt));Tt&&_e++,a.push(new Item(xt,wt,Tt))}else a.push(new Item(xt))},d);let rt=[];for(let pt=s;pt<_;pt++)rt.push(new Item(b.maps[pt]));let ct=this.items.slice(0,d).append(rt).append(a),dt=new Branch(ct,_e);return dt.emptyItemCount()>max_empty_items&&(dt=dt.compress(this.items.length-a.length)),dt}emptyItemCount(){let e=0;return this.items.forEach(s=>{s.step||e++}),e}compress(e=this.items.length){let s=this.remapping(0,e),a=s.maps.length,d=[],b=0;return this.items.forEach((_,_e)=>{if(_e>=e)d.push(_),_.selection&&b++;else if(_.step){let nt=_.step.map(s.slice(a)),rt=nt&&nt.getMap();if(a--,rt&&s.appendMap(rt,a),nt){let ct=_.selection&&_.selection.map(s.slice(a));ct&&b++;let dt=new Item(rt.invert(),nt,ct),pt,bt=d.length-1;(pt=d.length&&d[bt].merge(dt))?d[bt]=pt:d.push(dt)}}else _.map&&a--},this.items.length,0),new Branch(RopeSequence.from(d.reverse()),b)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(o,e){let s;return o.forEach((a,d)=>{if(a.selection&&e--==0)return s=d,!1}),o.slice(s)}class Item{constructor(e,s,a,d){this.map=e,this.step=s,this.selection=a,this.mirrorOffset=d}merge(e){if(this.step&&e.step&&!e.selection){let s=e.step.merge(this.step);if(s)return new Item(s.getMap().invert(),s,this.selection)}}}class HistoryState{constructor(e,s,a,d,b){this.done=e,this.undone=s,this.prevRanges=a,this.prevTime=d,this.prevComposition=b}}const DEPTH_OVERFLOW=20;function applyTransaction(o,e,s,a){let d=s.getMeta(historyKey),b;if(d)return d.historyState;s.getMeta(closeHistoryKey)&&(o=new HistoryState(o.done,o.undone,null,0,-1));let _=s.getMeta("appendedTransaction");if(s.steps.length==0)return o;if(_&&_.getMeta(historyKey))return _.getMeta(historyKey).redo?new HistoryState(o.done.addTransform(s,void 0,a,mustPreserveItems(e)),o.undone,rangesFor(s.mapping.maps),o.prevTime,o.prevComposition):new HistoryState(o.done,o.undone.addTransform(s,void 0,a,mustPreserveItems(e)),null,o.prevTime,o.prevComposition);if(s.getMeta("addToHistory")!==!1&&!(_&&_.getMeta("addToHistory")===!1)){let _e=s.getMeta("composition"),nt=o.prevTime==0||!_&&o.prevComposition!=_e&&(o.prevTime<(s.time||0)-a.newGroupDelay||!isAdjacentTo(s,o.prevRanges)),rt=_?mapRanges(o.prevRanges,s.mapping):rangesFor(s.mapping.maps);return new HistoryState(o.done.addTransform(s,nt?e.selection.getBookmark():void 0,a,mustPreserveItems(e)),Branch.empty,rt,s.time,_e??o.prevComposition)}else return(b=s.getMeta("rebased"))?new HistoryState(o.done.rebased(s,b),o.undone.rebased(s,b),mapRanges(o.prevRanges,s.mapping),o.prevTime,o.prevComposition):new HistoryState(o.done.addMaps(s.mapping.maps),o.undone.addMaps(s.mapping.maps),mapRanges(o.prevRanges,s.mapping),o.prevTime,o.prevComposition)}function isAdjacentTo(o,e){if(!e)return!1;if(!o.docChanged)return!0;let s=!1;return o.mapping.maps[0].forEach((a,d)=>{for(let b=0;b<e.length;b+=2)a<=e[b+1]&&d>=e[b]&&(s=!0)}),s}function rangesFor(o){let e=[];for(let s=o.length-1;s>=0&&e.length==0;s--)o[s].forEach((a,d,b,_)=>e.push(b,_));return e}function mapRanges(o,e){if(!o)return null;let s=[];for(let a=0;a<o.length;a+=2){let d=e.map(o[a],1),b=e.map(o[a+1],-1);d<=b&&s.push(d,b)}return s}function histTransaction(o,e,s){let a=mustPreserveItems(e),d=historyKey.get(e).spec.config,b=(s?o.undone:o.done).popEvent(e,a);if(!b)return null;let _=b.selection.resolve(b.transform.doc),_e=(s?o.done:o.undone).addTransform(b.transform,e.selection.getBookmark(),d,a),nt=new HistoryState(s?_e:b.remaining,s?b.remaining:_e,null,0,-1);return b.transform.setSelection(_).setMeta(historyKey,{redo:s,historyState:nt})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(o){let e=o.plugins;if(cachedPreserveItemsPlugins!=e){cachedPreserveItems=!1,cachedPreserveItemsPlugins=e;for(let s=0;s<e.length;s++)if(e[s].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(o={}){return o={depth:o.depth||100,newGroupDelay:o.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(e,s,a){return applyTransaction(s,a,e,o)}},config:o,props:{handleDOMEvents:{beforeinput(e,s){let a=s.inputType,d=a=="historyUndo"?undo:a=="historyRedo"?redo:null;return d?(s.preventDefault(),d(e.state,e.dispatch)):!1}}}})}function buildCommand(o,e){return(s,a)=>{let d=historyKey.getState(s);if(!d||(o?d.undone:d.done).eventCount==0)return!1;if(a){let b=histTransaction(d,s,o);b&&a(e?b.scrollIntoView():b)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0),History=Extension.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:o,dispatch:e})=>undo(o,e),redo:()=>({state:o,dispatch:e})=>redo(o,e)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),HorizontalRule=Node$1.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:o}){return["hr",mergeAttributes(this.options.HTMLAttributes,o)]},addCommands(){return{setHorizontalRule:()=>({chain:o,state:e})=>{const{selection:s}=e,{$from:a,$to:d}=s,b=o();return a.parentOffset===0?b.insertContentAt({from:Math.max(a.pos-1,0),to:d.pos},{type:this.name}):isNodeSelection(s)?b.insertContentAt(d.pos,{type:this.name}):b.insertContent({type:this.name}),b.command(({tr:_,dispatch:_e})=>{var nt;if(_e){const{$to:rt}=_.selection,ct=rt.end();if(rt.nodeAfter)rt.nodeAfter.isTextblock?_.setSelection(TextSelection.create(_.doc,rt.pos+1)):rt.nodeAfter.isBlock?_.setSelection(NodeSelection.create(_.doc,rt.pos)):_.setSelection(TextSelection.create(_.doc,rt.pos));else{const dt=(nt=rt.parent.type.contentMatch.defaultType)===null||nt===void 0?void 0:nt.create();dt&&(_.insert(ct,dt),_.setSelection(TextSelection.create(_.doc,ct+1)))}_.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:o=>o.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:o=>o.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:o}){return["em",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{setItalic:()=>({commands:o})=>o.setMark(this.name),toggleItalic:()=>({commands:o})=>o.toggleMark(this.name),unsetItalic:()=>({commands:o})=>o.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}}),ListItemName="listItem",TextStyleName="textStyle",inputRegex$1=/^(\d+)\.\s$/,OrderedList=Node$1.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:o=>o.hasAttribute("start")?parseInt(o.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:o=>o.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:o}){const{start:e,...s}=o;return e===1?["ol",mergeAttributes(this.options.HTMLAttributes,s),0]:["ol",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{toggleOrderedList:()=>({commands:o,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName,this.editor.getAttributes(TextStyleName)).run():o.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let o=wrappingInputRule({find:inputRegex$1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,s)=>s.childCount+s.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(o=wrappingInputRule({find:inputRegex$1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(TextStyleName)}),joinPredicate:(e,s)=>s.childCount+s.attrs.start===+e[1],editor:this.editor})),[o]}}),Paragraph=Node$1.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:o}){return["p",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{setParagraph:()=>({commands:o})=>o.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:o=>o.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:o}){return["s",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{setStrike:()=>({commands:o})=>o.setMark(this.name),toggleStrike:()=>({commands:o})=>o.toggleMark(this.name),unsetStrike:()=>({commands:o})=>o.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),Text=Node$1.create({name:"text",group:"inline"}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var o,e,s,a,d,b,_,_e,nt,rt,ct,dt,pt,bt,xt,wt,Tt,Rt;const Mt=[];return this.options.bold!==!1&&Mt.push(Bold.configure((o=this.options)===null||o===void 0?void 0:o.bold)),this.options.blockquote!==!1&&Mt.push(Blockquote.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&Mt.push(BulletList.configure((s=this.options)===null||s===void 0?void 0:s.bulletList)),this.options.code!==!1&&Mt.push(Code.configure((a=this.options)===null||a===void 0?void 0:a.code)),this.options.codeBlock!==!1&&Mt.push(CodeBlock.configure((d=this.options)===null||d===void 0?void 0:d.codeBlock)),this.options.document!==!1&&Mt.push(Document.configure((b=this.options)===null||b===void 0?void 0:b.document)),this.options.dropcursor!==!1&&Mt.push(Dropcursor.configure((_=this.options)===null||_===void 0?void 0:_.dropcursor)),this.options.gapcursor!==!1&&Mt.push(Gapcursor.configure((_e=this.options)===null||_e===void 0?void 0:_e.gapcursor)),this.options.hardBreak!==!1&&Mt.push(HardBreak.configure((nt=this.options)===null||nt===void 0?void 0:nt.hardBreak)),this.options.heading!==!1&&Mt.push(Heading.configure((rt=this.options)===null||rt===void 0?void 0:rt.heading)),this.options.history!==!1&&Mt.push(History.configure((ct=this.options)===null||ct===void 0?void 0:ct.history)),this.options.horizontalRule!==!1&&Mt.push(HorizontalRule.configure((dt=this.options)===null||dt===void 0?void 0:dt.horizontalRule)),this.options.italic!==!1&&Mt.push(Italic.configure((pt=this.options)===null||pt===void 0?void 0:pt.italic)),this.options.listItem!==!1&&Mt.push(ListItem.configure((bt=this.options)===null||bt===void 0?void 0:bt.listItem)),this.options.orderedList!==!1&&Mt.push(OrderedList.configure((xt=this.options)===null||xt===void 0?void 0:xt.orderedList)),this.options.paragraph!==!1&&Mt.push(Paragraph.configure((wt=this.options)===null||wt===void 0?void 0:wt.paragraph)),this.options.strike!==!1&&Mt.push(Strike.configure((Tt=this.options)===null||Tt===void 0?void 0:Tt.strike)),this.options.text!==!1&&Mt.push(Text.configure((Rt=this.options)===null||Rt===void 0?void 0:Rt.text)),Mt}}),MenuBar=()=>{const{editor:o}=useCurrentEditor();return o?jsxRuntimeExports.jsxs("div",{className:fr.cx("fr-grid-row"),children:[jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[{onClick:()=>o.chain().focus().toggleBold().run(),disabled:!o.can().chain().focus().toggleBold().run(),priority:o.isActive("bold")?"secondary":"tertiary no outline",iconId:"ri-bold",title:"Gras"},{onClick:()=>o.chain().focus().toggleItalic().run(),disabled:!o.can().chain().focus().toggleItalic().run(),priority:o.isActive("italic")?"secondary":"tertiary no outline",iconId:"ri-italic",title:"Italique"},{onClick:()=>o.chain().focus().toggleStrike().run(),disabled:!o.can().chain().focus().toggleStrike().run(),priority:o.isActive("strike")?"secondary":"tertiary no outline",iconId:"ri-strikethrough",title:"Barr"}],buttonsEquisized:!0,inlineLayoutWhen:"always",buttonsSize:"small"}),jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[{onClick:()=>o.chain().focus().toggleCode().run(),disabled:!o.can().chain().focus().toggleCode().run(),priority:o.isActive("code")?"secondary":"tertiary no outline",iconId:"ri-code-s-slash-line",title:"Code"},{onClick:()=>o.chain().focus().setParagraph().run(),priority:o.isActive("paragraph")?"secondary":"tertiary no outline",iconId:"ri-paragraph",title:"Paragraphe"}],buttonsEquisized:!0,inlineLayoutWhen:"always",buttonsSize:"small"}),jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[1,2,3,4,5,6].map(e=>({onClick:()=>o.chain().focus().toggleHeading({level:e}).run(),priority:o.isActive("heading",{level:e})?"secondary":"tertiary no outline",title:`Titre ${e}`,iconId:`ri-h-${e}`})),buttonsEquisized:!0,inlineLayoutWhen:"always",buttonsSize:"small"}),jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[{onClick:()=>o.chain().focus().toggleBulletList().run(),priority:o.isActive("bulletList")?"secondary":"tertiary no outline",iconId:"ri-list-unordered",title:"Liste  puces"},{onClick:()=>o.chain().focus().toggleOrderedList().run(),priority:o.isActive("orderedList")?"secondary":"tertiary no outline",iconId:"ri-list-ordered",title:"Liste ordonne"}],buttonsEquisized:!0,inlineLayoutWhen:"always",buttonsSize:"small"}),jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[{onClick:()=>o.chain().focus().toggleCodeBlock().run(),priority:o.isActive("codeBlock")?"secondary":"tertiary no outline",iconId:"ri-code-block",title:"Bloc de code"},{onClick:()=>o.chain().focus().toggleBlockquote().run(),priority:o.isActive("blockquote")?"secondary":"tertiary no outline",iconId:"ri-double-quotes-l",title:"Citation"}],buttonsEquisized:!0,inlineLayoutWhen:"always",buttonsSize:"small"}),jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[{onClick:()=>o.chain().focus().undo().run(),disabled:!o.can().chain().focus().undo().run(),priority:"tertiary no outline",iconId:"ri-arrow-go-back-line",title:"Dfaire"},{onClick:()=>o.chain().focus().redo().run(),disabled:!o.can().chain().focus().redo().run(),priority:"tertiary no outline",iconId:"ri-arrow-go-forward-line",title:"Refaire"}],buttonsEquisized:!0,inlineLayoutWhen:"always",buttonsSize:"small"})]}):null},extensions=[Color.configure({types:[TextStyle.name,ListItem.name]}),TextStyle.configure({types:[ListItem.name]}),StarterKit.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1}})],initialContent=`
<h2>
  Hi there,
</h2>
<p>
  this is a <em>basic</em> example of <strong>Tiptap</strong>. Sure, there are all kind of basic text styles youd probably expect from a text editor. But wait until you see the lists:
</p>
<ul>
  <li>
    Thats a bullet list with one 
  </li>
  <li>
     or two list items.
  </li>
</ul>
<p>
  Isnt that great? And all of that is editable. But wait, theres more. Lets try a code block:
</p>
<pre><code class="language-css">body {
  display: none;
}</code></pre>
<p>
  I know, I know, this is impressive. Its only the tip of the iceberg though. Give it a try and click a little bit around. Dont forget to check the other examples too.
</p>
<blockquote>
  Wow, thats amazing. Good work, boy! 
  <br />
   Mom
</blockquote>
`,Tiptap=()=>{const[o,e]=reactExports.useState(initialContent);return reactExports.useEffect(()=>{console.log(o)},[o]),jsxRuntimeExports.jsx(EditorProvider,{slotBefore:jsxRuntimeExports.jsx(MenuBar,{}),extensions,content:o,onUpdate:s=>{e(s.editor.getHTML())}})},TestTiptapEditor=()=>jsxRuntimeExports.jsx(Tiptap,{}),RouterRenderer=()=>{switch(useRoute().name){case"home":return"Accueil";case"map":return jsxRuntimeExports.jsx(ExtentMap,{});case"test_tinymceditor":return jsxRuntimeExports.jsx(TestTinyMCEditor,{});case"test_tiptap_editor":return jsxRuntimeExports.jsx(TestTiptapEditor,{});case"personal_data":return"Donnes personnelles";default:return"404"}},queryClient=new QueryClient,persister=createSyncStoragePersister({storage:window.localStorage});function App(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{brandTop:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["INTITULE",jsxRuntimeExports.jsx("br",{}),"OFFICIEL"]}),serviceTitle:"Nom du site / service",homeLinkProps:{...routes.home().link,title:"Accueil"},navigation:[{text:"Accueil",linkProps:routes.home().link},{text:"Cartes",linkProps:routes.map().link},{text:"Test TinyMCE",linkProps:routes.test_tinymceditor().link},{text:"Test Tiptap Editor",linkProps:routes.test_tiptap_editor().link},{text:"Donnes personnelles",linkProps:routes.personal_data().link},{text:"Lien externe",linkProps:{href:"https://example.fr",target:"_blank"},isActive:!1}],quickAccessItems:[headerFooterDisplayItem]}),jsxRuntimeExports.jsx(ConsentBannerAndConsentManagement,{}),jsxRuntimeExports.jsx("main",{children:jsxRuntimeExports.jsx(RouteProvider,{children:jsxRuntimeExports.jsx("div",{className:fr.cx("fr-container"),children:jsxRuntimeExports.jsxs(PersistQueryClientProvider,{client:queryClient,persistOptions:{persister},children:[jsxRuntimeExports.jsx(ReactQueryDevtools2,{initialIsOpen:!1}),jsxRuntimeExports.jsx(RouterRenderer,{})]})})})}),jsxRuntimeExports.jsx(Footer,{accessibility:"fully compliant",contentDescription:`
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor 
                        incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, 
                        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. 
                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore 
                        eu fugiat nulla pariatur. 
                    `,bottomItems:[jsxRuntimeExports.jsx(FooterPersonalDataPolicyItem,{}),jsxRuntimeExports.jsx(FooterConsentManagementItem,{}),headerFooterDisplayItem]})]})}startReactDsfr({defaultColorScheme:"system"});createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}))});export default ble();
