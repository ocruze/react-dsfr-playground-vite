var qae=o=>{throw TypeError(o)};var kle=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports);var oie=(o,e,s)=>e.has(o)||qae("Cannot "+s);var jo=(o,e,s)=>(oie(o,e,"read from private field"),s?s.call(o):e.get(o)),fu=(o,e,s)=>e.has(o)?qae("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,s),xa=(o,e,s,a)=>(oie(o,e,"write to private field"),a?a.call(o,s):e.set(o,s),s),Nu=(o,e,s)=>(oie(o,e,"access private method"),s);var XZ=(o,e,s,a)=>({set _(d){xa(o,e,d,s)},get _(){return jo(o,e,a)}});var Sle=kle(exports=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))a(d);new MutationObserver(d=>{for(const b of d)if(b.type==="childList")for(const _ of b.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&a(_)}).observe(document,{childList:!0,subtree:!0});function s(d){const b={};return d.integrity&&(b.integrity=d.integrity),d.referrerPolicy&&(b.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?b.credentials="include":d.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function a(d){if(d.ep)return;d.ep=!0;const b=s(d);fetch(d.href,b)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$2(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$2(o){return o===null||typeof o!="object"?null:(o=z$1&&o[z$1]||o["@@iterator"],typeof o=="function"?o:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(o,e,s){this.props=o,this.context=e,this.refs=D$1,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(o,e){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,e,"setState")};E$1.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(o,e,s){this.props=o,this.context=e,this.refs=D$1,this.updater=s||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$2=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(o,e,s){var a,d={},b=null,_=null;if(e!=null)for(a in e.ref!==void 0&&(_=e.ref),e.key!==void 0&&(b=""+e.key),e)J.call(e,a)&&!L$1.hasOwnProperty(a)&&(d[a]=e[a]);var _e=arguments.length-2;if(_e===1)d.children=s;else if(1<_e){for(var ot=Array(_e),st=0;st<_e;st++)ot[st]=arguments[st+2];d.children=ot}if(o&&o.defaultProps)for(a in _e=o.defaultProps,_e)d[a]===void 0&&(d[a]=_e[a]);return{$$typeof:l$1,type:o,key:b,ref:_,props:d,_owner:K$1.current}}function N$1(o,e){return{$$typeof:l$1,type:o.type,key:e,ref:o.ref,props:o.props,_owner:o._owner}}function O$2(o){return typeof o=="object"&&o!==null&&o.$$typeof===l$1}function escape$1(o){var e={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(s){return e[s]})}var P$1=/\/+/g;function Q$1(o,e){return typeof o=="object"&&o!==null&&o.key!=null?escape$1(""+o.key):e.toString(36)}function R$1(o,e,s,a,d){var b=typeof o;(b==="undefined"||b==="boolean")&&(o=null);var _=!1;if(o===null)_=!0;else switch(b){case"string":case"number":_=!0;break;case"object":switch(o.$$typeof){case l$1:case n$1:_=!0}}if(_)return _=o,d=d(_),o=a===""?"."+Q$1(_,0):a,I$2(d)?(s="",o!=null&&(s=o.replace(P$1,"$&/")+"/"),R$1(d,e,s,"",function(st){return st})):d!=null&&(O$2(d)&&(d=N$1(d,s+(!d.key||_&&_.key===d.key?"":(""+d.key).replace(P$1,"$&/")+"/")+o)),e.push(d)),1;if(_=0,a=a===""?".":a+":",I$2(o))for(var _e=0;_e<o.length;_e++){b=o[_e];var ot=a+Q$1(b,_e);_+=R$1(b,e,s,ot,d)}else if(ot=A$2(o),typeof ot=="function")for(o=ot.call(o),_e=0;!(b=o.next()).done;)b=b.value,ot=a+Q$1(b,_e++),_+=R$1(b,e,s,ot,d);else if(b==="object")throw e=String(o),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return _}function S$1(o,e,s){if(o==null)return o;var a=[],d=0;return R$1(o,a,"","",function(b){return e.call(s,b,d++)}),a}function T$1(o){if(o._status===-1){var e=o._result;e=e(),e.then(function(s){(o._status===0||o._status===-1)&&(o._status=1,o._result=s)},function(s){(o._status===0||o._status===-1)&&(o._status=2,o._result=s)}),o._status===-1&&(o._status=0,o._result=e)}if(o._status===1)return o._result.default;throw o._result}var U$1={current:null},V$2={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(o,e,s){S$1(o,function(){e.apply(this,arguments)},s)},count:function(o){var e=0;return S$1(o,function(){e++}),e},toArray:function(o){return S$1(o,function(e){return e})||[]},only:function(o){if(!O$2(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(o,e,s){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var a=C$1({},o.props),d=o.key,b=o.ref,_=o._owner;if(e!=null){if(e.ref!==void 0&&(b=e.ref,_=K$1.current),e.key!==void 0&&(d=""+e.key),o.type&&o.type.defaultProps)var _e=o.type.defaultProps;for(ot in e)J.call(e,ot)&&!L$1.hasOwnProperty(ot)&&(a[ot]=e[ot]===void 0&&_e!==void 0?_e[ot]:e[ot])}var ot=arguments.length-2;if(ot===1)a.children=s;else if(1<ot){_e=Array(ot);for(var st=0;st<ot;st++)_e[st]=arguments[st+2];a.children=_e}return{$$typeof:l$1,type:o.type,key:d,ref:b,props:a,_owner:_}};react_production_min.createContext=function(o){return o={$$typeof:u,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:t,_context:o},o.Consumer=o};react_production_min.createElement=M$2;react_production_min.createFactory=function(o){var e=M$2.bind(null,o);return e.type=o,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(o){return{$$typeof:v$1,render:o}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(o){return{$$typeof:y,_payload:{_status:-1,_result:o},_init:T$1}};react_production_min.memo=function(o,e){return{$$typeof:x,type:o,compare:e===void 0?null:e}};react_production_min.startTransition=function(o){var e=V$2.transition;V$2.transition={};try{o()}finally{V$2.transition=e}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(o,e){return U$1.current.useCallback(o,e)};react_production_min.useContext=function(o){return U$1.current.useContext(o)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(o){return U$1.current.useDeferredValue(o)};react_production_min.useEffect=function(o,e){return U$1.current.useEffect(o,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(o,e,s){return U$1.current.useImperativeHandle(o,e,s)};react_production_min.useInsertionEffect=function(o,e){return U$1.current.useInsertionEffect(o,e)};react_production_min.useLayoutEffect=function(o,e){return U$1.current.useLayoutEffect(o,e)};react_production_min.useMemo=function(o,e){return U$1.current.useMemo(o,e)};react_production_min.useReducer=function(o,e,s){return U$1.current.useReducer(o,e,s)};react_production_min.useRef=function(o){return U$1.current.useRef(o)};react_production_min.useState=function(o){return U$1.current.useState(o)};react_production_min.useSyncExternalStore=function(o,e,s){return U$1.current.useSyncExternalStore(o,e,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react$1.exports=react_production_min;var reactExports=react$1.exports;const React=getDefaultExportFromCjs$2(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(o,e,s){var a,d={},b=null,_=null;s!==void 0&&(b=""+s),e.key!==void 0&&(b=""+e.key),e.ref!==void 0&&(_=e.ref);for(a in e)m$1.call(e,a)&&!p$1.hasOwnProperty(a)&&(d[a]=e[a]);if(o&&o.defaultProps)for(a in e=o.defaultProps,e)d[a]===void 0&&(d[a]=e[a]);return{$$typeof:k,type:o,key:b,ref:_,props:d,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const scriptRel="modulepreload",assetsURL=function(o){return"/react-dsfr-playground-vite/"+o},seen={},__vitePreload=function(e,s,a){let d=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),_e=(_==null?void 0:_.nonce)||(_==null?void 0:_.getAttribute("nonce"));d=Promise.allSettled(s.map(ot=>{if(ot=assetsURL(ot),ot in seen)return;seen[ot]=!0;const st=ot.endsWith(".css"),ct=st?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${ot}"]${ct}`))return;const ft=document.createElement("link");if(ft.rel=st?"stylesheet":scriptRel,st||(ft.as="script"),ft.crossOrigin="",ft.href=ot,_e&&ft.setAttribute("nonce",_e),document.head.appendChild(ft),st)return new Promise((mt,bt)=>{ft.addEventListener("load",mt),ft.addEventListener("error",()=>bt(new Error(`Unable to preload CSS for ${ot}`)))})}))}function b(_){const _e=new Event("vite:preloadError",{cancelable:!0});if(_e.payload=_,window.dispatchEvent(_e),!_e.defaultPrevented)throw _}return d.then(_=>{for(const _e of _||[])_e.status==="rejected"&&b(_e.reason);return e().catch(b)})},isBrowser=typeof window=="object"&&typeof document=="object",overwriteReadonlyProp=(o,e,s)=>{try{o[e]=s}catch{}if(o[e]===s)return s;let a;const d=Object.getOwnPropertyDescriptor(o,e)||{enumerable:!0,configurable:!0};if(d.get)throw new Error(`Probably a wrong ides to overwrite ${String(e)} getter`);try{Object.defineProperty(o,e,{...d,value:s})}catch(b){a=b}if(o[e]!==s)throw a||new Error("Can't assign");return s},id$1=o=>o,assertIsRefWrapper={ref:id$1(void 0)};class AssertionError extends Error{constructor(e){if(super("Wrong assertion encountered"+(e?`: "${e}"`:"")),Object.setPrototypeOf(this,new.target.prototype),!!this.stack)try{overwriteReadonlyProp(this,"stack",this.stack.split(`
`).filter((...[,s])=>s!==1&&s!==2).join(`
`))}catch{}}}function assert$1(o,e){if(arguments.length===0&&(o=!0),assertIsRefWrapper.ref!==void 0){assertIsRefWrapper.ref=void 0;return}if(!o)throw new AssertionError(e)}const errorMessage=[`Wrong usage of the ${is.name} function refer to`,`https://docs.tsafe.dev/${is.name.toLowerCase()}`].join(" ");function is(o){const e={};if(assertIsRefWrapper.ref!==void 0)throw assertIsRefWrapper.ref=void 0,new Error(errorMessage);return assertIsRefWrapper.ref=e,Promise.resolve().then(()=>{if(assertIsRefWrapper.ref===e)throw new Error(errorMessage)}),null}function createStatefulObservable(o){const e=[],{get:s,set:a}=(()=>{let d;function b(_){d=[_],e.forEach(_e=>_e(_))}return{get:()=>(d===void 0&&(b(o()),assert$1(!is())),d[0]),set:b}})();return Object.defineProperty({current:null,subscribe:d=>(e.push(d),{unsubscribe:()=>e.splice(e.indexOf(d),1)})},"current",{enumerable:!0,get:s,set:a})}function useObservable(o,e){reactExports.useEffect(()=>{const s=[];return o({registerSubscription:a=>s.push(a)}),()=>{s.forEach(a=>a.unsubscribe()),s.length=0}},e)}function useRerenderOnChange(o){const[,e]=reactExports.useState(()=>o.current);useObservable(({registerSubscription:s})=>{const a=o.subscribe(d=>e(()=>d));s(a)},[o])}function useConstCallback(o){const e=reactExports.useRef(null);return e.current=o,reactExports.useState(()=>(...s)=>e.current(...s))[0]}const colorOptions={grey:{_1000_50:{default:"var(--grey-1000-50)",hover:"var(--grey-1000-50-hover)",active:"var(--grey-1000-50-active)"},_975_75:{default:"var(--grey-975-75)",hover:"var(--grey-975-75-hover)",active:"var(--grey-975-75-active)"},_950_100:{default:"var(--grey-950-100)",hover:"var(--grey-950-100-hover)",active:"var(--grey-950-100-active)"},_200_850:{default:"var(--grey-200-850)",hover:"var(--grey-200-850-hover)",active:"var(--grey-200-850-active)"},_925_125:{default:"var(--grey-925-125)"},_1000_75:{default:"var(--grey-1000-75)",hover:"var(--grey-1000-75-hover)",active:"var(--grey-1000-75-active)"},_1000_100:{default:"var(--grey-1000-100)",hover:"var(--grey-1000-100-hover)",active:"var(--grey-1000-100-active)"},_975_100:{default:"var(--grey-975-100)",hover:"var(--grey-975-100-hover)",active:"var(--grey-975-100-active)"},_975_125:{default:"var(--grey-975-125)",hover:"var(--grey-975-125-hover)",active:"var(--grey-975-125-active)"},_950_125:{default:"var(--grey-950-125)",hover:"var(--grey-950-125-hover)",active:"var(--grey-950-125-active)"},_950_150:{default:"var(--grey-950-150)",hover:"var(--grey-950-150-hover)",active:"var(--grey-950-150-active)"},_50_1000:{default:"var(--grey-50-1000)"},_425_625:{default:"var(--grey-425-625)"},_625_425:{default:"var(--grey-625-425)"},_0_1000:{default:"var(--grey-0-1000)"},_900_175:{default:"var(--grey-900-175)"}},blueFrance:{_975_75:{default:"var(--blue-france-975-75)",hover:"var(--blue-france-975-75-hover)",active:"var(--blue-france-975-75-active)"},_950_100:{default:"var(--blue-france-950-100)",hover:"var(--blue-france-950-100-hover)",active:"var(--blue-france-950-100-active)"},sun113_625:{default:"var(--blue-france-sun-113-625)",hover:"var(--blue-france-sun-113-625-hover)",active:"var(--blue-france-sun-113-625-active)"},_925_125:{default:"var(--blue-france-925-125)",hover:"var(--blue-france-925-125-hover)",active:"var(--blue-france-925-125-active)"},_975sun113:{default:"var(--blue-france-975-sun-113)"},main525:{default:"var(--blue-france-main-525)"},_850_200:{default:"var(--blue-france-850-200)"}},redMarianne:{_975_75:{default:"var(--red-marianne-975-75)",hover:"var(--red-marianne-975-75-hover)",active:"var(--red-marianne-975-75-active)"},_950_100:{default:"var(--red-marianne-950-100)",hover:"var(--red-marianne-950-100-hover)",active:"var(--red-marianne-950-100-active)"},_425_625:{default:"var(--red-marianne-425-625)",hover:"var(--red-marianne-425-625-hover)",active:"var(--red-marianne-425-625-active)"},_925_125:{default:"var(--red-marianne-925-125)",hover:"var(--red-marianne-925-125-hover)",active:"var(--red-marianne-925-125-active)"},main472:{default:"var(--red-marianne-main-472)"},_850_200:{default:"var(--red-marianne-850-200)"}},info:{_950_100:{default:"var(--info-950-100)",hover:"var(--info-950-100-hover)",active:"var(--info-950-100-active)"},_425_625:{default:"var(--info-425-625)",hover:"var(--info-425-625-hover)",active:"var(--info-425-625-active)"},_975_75:{default:"var(--info-975-75)"}},success:{_950_100:{default:"var(--success-950-100)",hover:"var(--success-950-100-hover)",active:"var(--success-950-100-active)"},_425_625:{default:"var(--success-425-625)",hover:"var(--success-425-625-hover)",active:"var(--success-425-625-active)"},_975_75:{default:"var(--success-975-75)"}},warning:{_950_100:{default:"var(--warning-950-100)",hover:"var(--warning-950-100-hover)",active:"var(--warning-950-100-active)"},_425_625:{default:"var(--warning-425-625)",hover:"var(--warning-425-625-hover)",active:"var(--warning-425-625-active)"},_975_75:{default:"var(--warning-975-75)"}},error:{_950_100:{default:"var(--error-950-100)",hover:"var(--error-950-100-hover)",active:"var(--error-950-100-active)"},_425_625:{default:"var(--error-425-625)",hover:"var(--error-425-625-hover)",active:"var(--error-425-625-active)"},_975_75:{default:"var(--error-975-75)"}},greenTilleulVerveine:{_975_75:{default:"var(--green-tilleul-verveine-975-75)",hover:"var(--green-tilleul-verveine-975-75-hover)",active:"var(--green-tilleul-verveine-975-75-active)"},_950_100:{default:"var(--green-tilleul-verveine-950-100)",hover:"var(--green-tilleul-verveine-950-100-hover)",active:"var(--green-tilleul-verveine-950-100-active)"},sun418moon817:{default:"var(--green-tilleul-verveine-sun-418-moon-817)",hover:"var(--green-tilleul-verveine-sun-418-moon-817-hover)",active:"var(--green-tilleul-verveine-sun-418-moon-817-active)"},_925_125:{default:"var(--green-tilleul-verveine-925-125)",hover:"var(--green-tilleul-verveine-925-125-hover)",active:"var(--green-tilleul-verveine-925-125-active)"},main707:{default:"var(--green-tilleul-verveine-main-707)"},_850_200:{default:"var(--green-tilleul-verveine-850-200)"}},greenBourgeon:{_975_75:{default:"var(--green-bourgeon-975-75)",hover:"var(--green-bourgeon-975-75-hover)",active:"var(--green-bourgeon-975-75-active)"},_950_100:{default:"var(--green-bourgeon-950-100)",hover:"var(--green-bourgeon-950-100-hover)",active:"var(--green-bourgeon-950-100-active)"},sun425moon759:{default:"var(--green-bourgeon-sun-425-moon-759)",hover:"var(--green-bourgeon-sun-425-moon-759-hover)",active:"var(--green-bourgeon-sun-425-moon-759-active)"},_925_125:{default:"var(--green-bourgeon-925-125)",hover:"var(--green-bourgeon-925-125-hover)",active:"var(--green-bourgeon-925-125-active)"},main640:{default:"var(--green-bourgeon-main-640)"},_850_200:{default:"var(--green-bourgeon-850-200)"}},greenEmeraude:{_975_75:{default:"var(--green-emeraude-975-75)",hover:"var(--green-emeraude-975-75-hover)",active:"var(--green-emeraude-975-75-active)"},_950_100:{default:"var(--green-emeraude-950-100)",hover:"var(--green-emeraude-950-100-hover)",active:"var(--green-emeraude-950-100-active)"},sun425moon753:{default:"var(--green-emeraude-sun-425-moon-753)",hover:"var(--green-emeraude-sun-425-moon-753-hover)",active:"var(--green-emeraude-sun-425-moon-753-active)"},_925_125:{default:"var(--green-emeraude-925-125)",hover:"var(--green-emeraude-925-125-hover)",active:"var(--green-emeraude-925-125-active)"},main632:{default:"var(--green-emeraude-main-632)"},_850_200:{default:"var(--green-emeraude-850-200)"}},greenMenthe:{_975_75:{default:"var(--green-menthe-975-75)",hover:"var(--green-menthe-975-75-hover)",active:"var(--green-menthe-975-75-active)"},_950_100:{default:"var(--green-menthe-950-100)",hover:"var(--green-menthe-950-100-hover)",active:"var(--green-menthe-950-100-active)"},sun373moon652:{default:"var(--green-menthe-sun-373-moon-652)",hover:"var(--green-menthe-sun-373-moon-652-hover)",active:"var(--green-menthe-sun-373-moon-652-active)"},_925_125:{default:"var(--green-menthe-925-125)",hover:"var(--green-menthe-925-125-hover)",active:"var(--green-menthe-925-125-active)"},main548:{default:"var(--green-menthe-main-548)"},_850_200:{default:"var(--green-menthe-850-200)"}},greenArchipel:{_975_75:{default:"var(--green-archipel-975-75)",hover:"var(--green-archipel-975-75-hover)",active:"var(--green-archipel-975-75-active)"},_950_100:{default:"var(--green-archipel-950-100)",hover:"var(--green-archipel-950-100-hover)",active:"var(--green-archipel-950-100-active)"},sun391moon716:{default:"var(--green-archipel-sun-391-moon-716)",hover:"var(--green-archipel-sun-391-moon-716-hover)",active:"var(--green-archipel-sun-391-moon-716-active)"},_925_125:{default:"var(--green-archipel-925-125)",hover:"var(--green-archipel-925-125-hover)",active:"var(--green-archipel-925-125-active)"},main557:{default:"var(--green-archipel-main-557)"},_850_200:{default:"var(--green-archipel-850-200)"}},blueEcume:{_975_75:{default:"var(--blue-ecume-975-75)",hover:"var(--blue-ecume-975-75-hover)",active:"var(--blue-ecume-975-75-active)"},_950_100:{default:"var(--blue-ecume-950-100)",hover:"var(--blue-ecume-950-100-hover)",active:"var(--blue-ecume-950-100-active)"},sun247moon675:{default:"var(--blue-ecume-sun-247-moon-675)",hover:"var(--blue-ecume-sun-247-moon-675-hover)",active:"var(--blue-ecume-sun-247-moon-675-active)"},_925_125:{default:"var(--blue-ecume-925-125)",hover:"var(--blue-ecume-925-125-hover)",active:"var(--blue-ecume-925-125-active)"},main400:{default:"var(--blue-ecume-main-400)"},_850_200:{default:"var(--blue-ecume-850-200)"}},blueCumulus:{_975_75:{default:"var(--blue-cumulus-975-75)",hover:"var(--blue-cumulus-975-75-hover)",active:"var(--blue-cumulus-975-75-active)"},_950_100:{default:"var(--blue-cumulus-950-100)",hover:"var(--blue-cumulus-950-100-hover)",active:"var(--blue-cumulus-950-100-active)"},sun368moon732:{default:"var(--blue-cumulus-sun-368-moon-732)",hover:"var(--blue-cumulus-sun-368-moon-732-hover)",active:"var(--blue-cumulus-sun-368-moon-732-active)"},_925_125:{default:"var(--blue-cumulus-925-125)",hover:"var(--blue-cumulus-925-125-hover)",active:"var(--blue-cumulus-925-125-active)"},main526:{default:"var(--blue-cumulus-main-526)"},_850_200:{default:"var(--blue-cumulus-850-200)"}},purpleGlycine:{_975_75:{default:"var(--purple-glycine-975-75)",hover:"var(--purple-glycine-975-75-hover)",active:"var(--purple-glycine-975-75-active)"},_950_100:{default:"var(--purple-glycine-950-100)",hover:"var(--purple-glycine-950-100-hover)",active:"var(--purple-glycine-950-100-active)"},sun319moon630:{default:"var(--purple-glycine-sun-319-moon-630)",hover:"var(--purple-glycine-sun-319-moon-630-hover)",active:"var(--purple-glycine-sun-319-moon-630-active)"},_925_125:{default:"var(--purple-glycine-925-125)",hover:"var(--purple-glycine-925-125-hover)",active:"var(--purple-glycine-925-125-active)"},main494:{default:"var(--purple-glycine-main-494)"},_850_200:{default:"var(--purple-glycine-850-200)"}},pinkMacaron:{_975_75:{default:"var(--pink-macaron-975-75)",hover:"var(--pink-macaron-975-75-hover)",active:"var(--pink-macaron-975-75-active)"},_950_100:{default:"var(--pink-macaron-950-100)",hover:"var(--pink-macaron-950-100-hover)",active:"var(--pink-macaron-950-100-active)"},sun406moon833:{default:"var(--pink-macaron-sun-406-moon-833)",hover:"var(--pink-macaron-sun-406-moon-833-hover)",active:"var(--pink-macaron-sun-406-moon-833-active)"},_925_125:{default:"var(--pink-macaron-925-125)",hover:"var(--pink-macaron-925-125-hover)",active:"var(--pink-macaron-925-125-active)"},main689:{default:"var(--pink-macaron-main-689)"},_850_200:{default:"var(--pink-macaron-850-200)"}},pinkTuile:{_975_75:{default:"var(--pink-tuile-975-75)",hover:"var(--pink-tuile-975-75-hover)",active:"var(--pink-tuile-975-75-active)"},_950_100:{default:"var(--pink-tuile-950-100)",hover:"var(--pink-tuile-950-100-hover)",active:"var(--pink-tuile-950-100-active)"},sun425moon750:{default:"var(--pink-tuile-sun-425-moon-750)",hover:"var(--pink-tuile-sun-425-moon-750-hover)",active:"var(--pink-tuile-sun-425-moon-750-active)"},_925_125:{default:"var(--pink-tuile-925-125)",hover:"var(--pink-tuile-925-125-hover)",active:"var(--pink-tuile-925-125-active)"},main556:{default:"var(--pink-tuile-main-556)"},_850_200:{default:"var(--pink-tuile-850-200)"}},yellowTournesol:{_975_75:{default:"var(--yellow-tournesol-975-75)",hover:"var(--yellow-tournesol-975-75-hover)",active:"var(--yellow-tournesol-975-75-active)"},_950_100:{default:"var(--yellow-tournesol-950-100)",hover:"var(--yellow-tournesol-950-100-hover)",active:"var(--yellow-tournesol-950-100-active)"},sun407moon922:{default:"var(--yellow-tournesol-sun-407-moon-922)",hover:"var(--yellow-tournesol-sun-407-moon-922-hover)",active:"var(--yellow-tournesol-sun-407-moon-922-active)"},_925_125:{default:"var(--yellow-tournesol-925-125)",hover:"var(--yellow-tournesol-925-125-hover)",active:"var(--yellow-tournesol-925-125-active)"},main731:{default:"var(--yellow-tournesol-main-731)"},_850_200:{default:"var(--yellow-tournesol-850-200)"}},yellowMoutarde:{_975_75:{default:"var(--yellow-moutarde-975-75)",hover:"var(--yellow-moutarde-975-75-hover)",active:"var(--yellow-moutarde-975-75-active)"},_950_100:{default:"var(--yellow-moutarde-950-100)",hover:"var(--yellow-moutarde-950-100-hover)",active:"var(--yellow-moutarde-950-100-active)"},sun348moon860:{default:"var(--yellow-moutarde-sun-348-moon-860)",hover:"var(--yellow-moutarde-sun-348-moon-860-hover)",active:"var(--yellow-moutarde-sun-348-moon-860-active)"},_925_125:{default:"var(--yellow-moutarde-925-125)",hover:"var(--yellow-moutarde-925-125-hover)",active:"var(--yellow-moutarde-925-125-active)"},main679:{default:"var(--yellow-moutarde-main-679)"},_850_200:{default:"var(--yellow-moutarde-850-200)"}},orangeTerreBattue:{_975_75:{default:"var(--orange-terre-battue-975-75)",hover:"var(--orange-terre-battue-975-75-hover)",active:"var(--orange-terre-battue-975-75-active)"},_950_100:{default:"var(--orange-terre-battue-950-100)",hover:"var(--orange-terre-battue-950-100-hover)",active:"var(--orange-terre-battue-950-100-active)"},sun370moon672:{default:"var(--orange-terre-battue-sun-370-moon-672)",hover:"var(--orange-terre-battue-sun-370-moon-672-hover)",active:"var(--orange-terre-battue-sun-370-moon-672-active)"},_925_125:{default:"var(--orange-terre-battue-925-125)",hover:"var(--orange-terre-battue-925-125-hover)",active:"var(--orange-terre-battue-925-125-active)"},main645:{default:"var(--orange-terre-battue-main-645)"},_850_200:{default:"var(--orange-terre-battue-850-200)"}},brownCafeCreme:{_975_75:{default:"var(--brown-cafe-creme-975-75)",hover:"var(--brown-cafe-creme-975-75-hover)",active:"var(--brown-cafe-creme-975-75-active)"},_950_100:{default:"var(--brown-cafe-creme-950-100)",hover:"var(--brown-cafe-creme-950-100-hover)",active:"var(--brown-cafe-creme-950-100-active)"},sun383moon885:{default:"var(--brown-cafe-creme-sun-383-moon-885)",hover:"var(--brown-cafe-creme-sun-383-moon-885-hover)",active:"var(--brown-cafe-creme-sun-383-moon-885-active)"},_925_125:{default:"var(--brown-cafe-creme-925-125)",hover:"var(--brown-cafe-creme-925-125-hover)",active:"var(--brown-cafe-creme-925-125-active)"},main782:{default:"var(--brown-cafe-creme-main-782)"},_850_200:{default:"var(--brown-cafe-creme-850-200)"}},brownCaramel:{_975_75:{default:"var(--brown-caramel-975-75)",hover:"var(--brown-caramel-975-75-hover)",active:"var(--brown-caramel-975-75-active)"},_950_100:{default:"var(--brown-caramel-950-100)",hover:"var(--brown-caramel-950-100-hover)",active:"var(--brown-caramel-950-100-active)"},sun425moon901:{default:"var(--brown-caramel-sun-425-moon-901)",hover:"var(--brown-caramel-sun-425-moon-901-hover)",active:"var(--brown-caramel-sun-425-moon-901-active)"},_925_125:{default:"var(--brown-caramel-925-125)",hover:"var(--brown-caramel-925-125-hover)",active:"var(--brown-caramel-925-125-active)"},main648:{default:"var(--brown-caramel-main-648)"},_850_200:{default:"var(--brown-caramel-850-200)"}},brownOpera:{_975_75:{default:"var(--brown-opera-975-75)",hover:"var(--brown-opera-975-75-hover)",active:"var(--brown-opera-975-75-active)"},_950_100:{default:"var(--brown-opera-950-100)",hover:"var(--brown-opera-950-100-hover)",active:"var(--brown-opera-950-100-active)"},sun395moon820:{default:"var(--brown-opera-sun-395-moon-820)",hover:"var(--brown-opera-sun-395-moon-820-hover)",active:"var(--brown-opera-sun-395-moon-820-active)"},_925_125:{default:"var(--brown-opera-925-125)",hover:"var(--brown-opera-925-125-hover)",active:"var(--brown-opera-925-125-active)"},main680:{default:"var(--brown-opera-main-680)"},_850_200:{default:"var(--brown-opera-850-200)"}},beigeGrisGalet:{_975_75:{default:"var(--beige-gris-galet-975-75)",hover:"var(--beige-gris-galet-975-75-hover)",active:"var(--beige-gris-galet-975-75-active)"},_950_100:{default:"var(--beige-gris-galet-950-100)",hover:"var(--beige-gris-galet-950-100-hover)",active:"var(--beige-gris-galet-950-100-active)"},sun407moon821:{default:"var(--beige-gris-galet-sun-407-moon-821)",hover:"var(--beige-gris-galet-sun-407-moon-821-hover)",active:"var(--beige-gris-galet-sun-407-moon-821-active)"},_925_125:{default:"var(--beige-gris-galet-925-125)",hover:"var(--beige-gris-galet-925-125-hover)",active:"var(--beige-gris-galet-925-125-active)"},main702:{default:"var(--beige-gris-galet-main-702)"},_850_200:{default:"var(--beige-gris-galet-850-200)"}}};function getColorOptionsHex(o){const{isDark:e}=o;return{grey:{_1000_50:{default:e?"#161616":"#ffffff",hover:e?"#343434":"#f6f6f6",active:e?"#474747":"#ededed"},_975_75:{default:e?"#1e1e1e":"#f6f6f6",hover:e?"#3f3f3f":"#dfdfdf",active:e?"#525252":"#cfcfcf"},_950_100:{default:e?"#242424":"#eeeeee",hover:e?"#474747":"#d2d2d2",active:e?"#5b5b5b":"#c1c1c1"},_200_850:{default:e?"#cecece":"#3a3a3a",hover:e?"#a8a8a8":"#616161",active:e?"#939393":"#777777"},_925_125:{default:e?"#2a2a2a":"#e5e5e5"},_1000_75:{default:e?"#1e1e1e":"#ffffff",hover:e?"#3f3f3f":"#f6f6f6",active:e?"#525252":"#ededed"},_1000_100:{default:e?"#242424":"#ffffff",hover:e?"#474747":"#f6f6f6",active:e?"#5b5b5b":"#ededed"},_975_100:{default:e?"#242424":"#f6f6f6",hover:e?"#474747":"#dfdfdf",active:e?"#5b5b5b":"#cfcfcf"},_975_125:{default:e?"#2a2a2a":"#f6f6f6",hover:e?"#4e4e4e":"#dfdfdf",active:e?"#636363":"#cfcfcf"},_950_125:{default:e?"#2a2a2a":"#eeeeee",hover:e?"#4e4e4e":"#d2d2d2",active:e?"#636363":"#c1c1c1"},_950_150:{default:e?"#2f2f2f":"#eeeeee",hover:e?"#545454":"#d2d2d2",active:e?"#696969":"#c1c1c1"},_50_1000:{default:e?"#ffffff":"#161616"},_425_625:{default:e?"#929292":"#666666"},_625_425:{default:e?"#666666":"#929292"},_0_1000:{default:e?"#ffffff":"#0"},_900_175:{default:e?"#353535":"#dddddd"}},blueFrance:{_975_75:{default:e?"#1b1b35":"#f5f5fe",hover:e?"#3a3a68":"#dcdcfc",active:e?"#4d4d83":"#cbcbfa"},_950_100:{default:e?"#21213f":"#ececfe",hover:e?"#424275":"#cecefc",active:e?"#56568c":"#bbbbfc"},sun113_625:{default:e?"#8585f6":"#000091",hover:e?"#b1b1f9":"#1212ff",active:e?"#c6c6fb":"#2323ff"},_925_125:{default:e?"#272747":"#e3e3fd",hover:e?"#4a4a7d":"#c1c1fb",active:e?"#5e5e90":"#adadf9"},_975sun113:{default:e?"#000091":"#f5f5fe"},main525:{default:"#6a6af4"},_850_200:{default:e?"#313178":"#cacafb"}},redMarianne:{_975_75:{default:e?"#2b1919":"#fef4f4",hover:e?"#573737":"#fcd7d7",active:e?"#704848":"#fac4c4"},_950_100:{default:e?"#331f1f":"#fee9e9",hover:e?"#613f3f":"#fdc5c5",active:e?"#7b5151":"#fcafaf"},_425_625:{default:e?"#f95c5e":"#c9191e",hover:e?"#fa9293":"#f93f42",active:e?"#fbabac":"#f95a5c"},_925_125:{default:e?"#3b2424":"#fddede",hover:e?"#6b4545":"#fbb6b6",active:e?"#865757":"#fa9e9e"},main472:{default:"#e1000f"},_850_200:{default:e?"#5e2a2b":"#fcbfbf"}},info:{_950_100:{default:e?"#1d2437":"#e8edff",hover:e?"#3b4767":"#c2d1ff",active:e?"#4c5b83":"#a9bfff"},_425_625:{default:e?"#518fff":"#0063cb",hover:e?"#98b4ff":"#3b87ff",active:e?"#b4c7ff":"#6798ff"},_975_75:{default:e?"#171d2e":"#f4f6ff"}},success:{_950_100:{default:e?"#19271d":"#b8fec9",hover:e?"#344c3b":"#46fd89",active:e?"#44624d":"#34eb7b"},_425_625:{default:e?"#27a658":"#18753c",hover:e?"#36d975":"#27a959",active:e?"#3df183":"#2fc368"},_975_75:{default:e?"#142117":"#dffee6"}},warning:{_950_100:{default:e?"#361e19":"#ffe9e6",hover:e?"#663d35":"#ffc6bd",active:e?"#824f44":"#ffb0a2"},_425_625:{default:e?"#fc5d00":"#b34000",hover:e?"#ff8c73":"#ff6218",active:e?"#ffa595":"#ff7a55"},_975_75:{default:e?"#2d1814":"#fff4f3"}},error:{_950_100:{default:e?"#391c1c":"#ffe9e9",hover:e?"#6c3a3a":"#ffc5c5",active:e?"#894b4b":"#ffafaf"},_425_625:{default:e?"#ff5655":"#ce0500",hover:e?"#ff8c8c":"#ff2725",active:e?"#ffa6a6":"#ff4140"},_975_75:{default:e?"#301717":"#fff4f4"}},greenTilleulVerveine:{_975_75:{default:e?"#201e14":"#fef7da",hover:e?"#433f2e":"#fce552",active:e?"#57533d":"#ebd54c"},_950_100:{default:e?"#272419":"#fceeac",hover:e?"#4c4734":"#e8d45c",active:e?"#615b44":"#d4c254"},sun418moon817:{default:e?"#d8c634":"#66673d",hover:e?"#fee943":"#929359",active:e?"#fef1ab":"#a7a967"},_925_125:{default:e?"#2d2a1d":"#fbe769",hover:e?"#534f39":"#d7c655",active:e?"#696349":"#c2b24c"},main707:{default:"#b7a73f"},_850_200:{default:e?"#3f3a20":"#e2cf58"}},greenBourgeon:{_975_75:{default:e?"#182014":"#e6feda",hover:e?"#35432e":"#a7fc62",active:e?"#46573d":"#98ed4d"},_950_100:{default:e?"#1e2719":"#c9fcac",hover:e?"#3d4c34":"#9ae95d",active:e?"#4e6144":"#8dd555"},sun425moon759:{default:e?"#99c221":"#447049",hover:e?"#baec2a":"#639f6a",active:e?"#c9fd2e":"#72b77a"},_925_125:{default:e?"#232d1d":"#a9fb68",hover:e?"#435339":"#8ed654",active:e?"#556949":"#7fc04b"},main640:{default:"#68a532"},_850_200:{default:e?"#2a401a":"#95e257"}},greenEmeraude:{_975_75:{default:e?"#142018":"#e3fdeb",hover:e?"#2e4335":"#94f9b9",active:e?"#3d5846":"#6df1a3"},_950_100:{default:e?"#19271e":"#c3fad5",hover:e?"#344c3d":"#77eda5",active:e?"#44624f":"#6dd897"},sun425moon753:{default:e?"#34cb6a":"#297254",hover:e?"#42fb84":"#3ea47a",active:e?"#80fda3":"#49bc8d"},_925_125:{default:e?"#1e2e23":"#9ef9be",hover:e?"#3b5543":"#69df97",active:e?"#4b6b55":"#5ec988"},main632:{default:"#00a95f"},_850_200:{default:e?"#21402c":"#6fe49d"}},greenMenthe:{_975_75:{default:e?"#15201e":"#dffdf7",hover:e?"#30433f":"#84f9e7",active:e?"#3f5753":"#70ebd8"},_950_100:{default:e?"#1a2624":"#bafaee",hover:e?"#364b47":"#79e7d5",active:e?"#46605b":"#6fd3c3"},sun373moon652:{default:e?"#21ab8e":"#37635f",hover:e?"#2eddb8":"#53918c",active:e?"#34f4cc":"#62a9a2"},_925_125:{default:e?"#1f2d2a":"#8bf8e7",hover:e?"#3c534e":"#6ed5c5",active:e?"#4d6963":"#62bfb1"},main548:{default:"#009081"},_850_200:{default:e?"#223f3a":"#73e0cf"}},greenArchipel:{_975_75:{default:e?"#152021":"#e5fbfd",hover:e?"#2f4345":"#99f2f8",active:e?"#3f5759":"#73e9f0"},_950_100:{default:e?"#1a2628":"#c7f6fc",hover:e?"#364a4e":"#64ecf8",active:e?"#465f63":"#5bd8e3"},sun391moon716:{default:e?"#34bab5":"#006a6f",hover:e?"#43e9e2":"#009fa7",active:e?"#4cfdf6":"#00bbc3"},_925_125:{default:e?"#1f2c2e":"#a6f2fa",hover:e?"#3c5255":"#62dbe5",active:e?"#4d676b":"#58c5cf"},main557:{default:"#009099"},_850_200:{default:e?"#233e41":"#60e0eb"}},blueEcume:{_975_75:{default:e?"#171d2f":"#f4f6fe",hover:e?"#333e5e":"#d7dffb",active:e?"#445179":"#c3cffa"},_950_100:{default:e?"#1d2437":"#e9edfe",hover:e?"#3b4767":"#c5d0fc",active:e?"#4c5b83":"#adbffc"},sun247moon675:{default:e?"#869ece":"#2f4077",hover:e?"#b8c5e2":"#4e68bb",active:e?"#ced6ea":"#667dcf"},_925_125:{default:e?"#222940":"#dee5fd",hover:e?"#424d73":"#b4c5fb",active:e?"#536190":"#99b3f9"},main400:{default:"#465f9d"},_850_200:{default:e?"#273962":"#bfccfb"}},blueCumulus:{_975_75:{default:e?"#171e2b":"#f3f6fe",hover:e?"#333f56":"#d3dffc",active:e?"#43536f":"#bed0fa"},_950_100:{default:e?"#1c2433":"#e6eefe",hover:e?"#3a4761":"#bcd3fc",active:e?"#4a5b7b":"#9fc3fc"},sun368moon732:{default:e?"#7ab1e8":"#3558a2",hover:e?"#bad2f2":"#5982e0",active:e?"#d2e2f6":"#7996e6"},_925_125:{default:e?"#212a3a":"#dae6fd",hover:e?"#404f69":"#a9c8fb",active:e?"#516384":"#8ab8f9"},main526:{default:"#417dc4"},_850_200:{default:e?"#263b58":"#b6cffb"}},purpleGlycine:{_975_75:{default:e?"#251a24":"#fef3fd",hover:e?"#4c394a":"#fcd4f8",active:e?"#634a60":"#fabff5"},_950_100:{default:e?"#2c202b":"#fee7fc",hover:e?"#554053":"#fdc0f8",active:e?"#6c536a":"#fca8f6"},sun319moon630:{default:e?"#ce70cc":"#6e445a",hover:e?"#dfa4dd":"#a66989",active:e?"#e7bbe6":"#bb7f9e"},_925_125:{default:e?"#332632":"#fddbfa",hover:e?"#5d485c":"#fbaff5",active:e?"#755b73":"#fa96f2"},main494:{default:"#a558a0"},_850_200:{default:e?"#502e4d":"#fbb8f6"}},pinkMacaron:{_975_75:{default:e?"#261b19":"#fef4f2",hover:e?"#4e3a37":"#fcd8d0",active:e?"#654c48":"#fac5b8"},_950_100:{default:e?"#2e211f":"#fee9e6",hover:e?"#58423f":"#fdc6bd",active:e?"#705551":"#fcb0a2"},sun406moon833:{default:e?"#ffb7ae":"#8d533e",hover:e?"#ffe0dc":"#ca795c",active:e?"#fff0ee":"#e08e73"},_925_125:{default:e?"#352724":"#fddfda",hover:e?"#614a45":"#fbb8ab",active:e?"#795d57":"#faa18d"},main689:{default:"#e18b76"},_850_200:{default:e?"#52312a":"#fcc0b4"}},pinkTuile:{_975_75:{default:e?"#281b19":"#fef4f3",hover:e?"#513a37":"#fcd7d3",active:e?"#694c48":"#fac4be"},_950_100:{default:e?"#2f211f":"#fee9e7",hover:e?"#5a423e":"#fdc6c0",active:e?"#725550":"#fcb0a7"},sun425moon750:{default:e?"#ff9575":"#a94645",hover:e?"#ffc4b7":"#d5706f",active:e?"#ffd8d0":"#da8a89"},_925_125:{default:e?"#372624":"#fddfdb",hover:e?"#644845":"#fbb8ad",active:e?"#7d5b57":"#faa191"},main556:{default:"#ce614a"},_850_200:{default:e?"#55302a":"#fcbfb7"}},yellowTournesol:{_975_75:{default:e?"#221d11":"#fef6e3",hover:e?"#473e29":"#fce086",active:e?"#5c5136":"#f5d24b"},_950_100:{default:e?"#292416":"#feecc2",hover:e?"#4f472f":"#fbd335",active:e?"#655b3d":"#e6c130"},sun407moon922:{default:e?"#ffe552":"#716043",hover:e?"#e1c700":"#a28a62",active:e?"#cab300":"#ba9f72"},_925_125:{default:e?"#302a1a":"#fde39c",hover:e?"#584e34":"#e9c53b",active:e?"#6f6342":"#d3b235"},main731:{default:"#c8aa39"},_850_200:{default:e?"#43391a":"#efcb3a"}},yellowMoutarde:{_975_75:{default:e?"#231d14":"#fef5e8",hover:e?"#483e2e":"#fcdca3",active:e?"#5e513d":"#fbcd64"},_950_100:{default:e?"#2a2319":"#feebd0",hover:e?"#514534":"#fdcd6d",active:e?"#685944":"#f4be30"},sun348moon860:{default:e?"#ffca00":"#695240",hover:e?"#cda200":"#9b7b61",active:e?"#b28c00":"#b58f72"},_925_125:{default:e?"#30291d":"#fde2b5",hover:e?"#584d39":"#f6c43c",active:e?"#6f6149":"#dfb135"},main679:{default:"#c3992a"},_850_200:{default:e?"#453820":"#fcc63a"}},orangeTerreBattue:{_975_75:{default:e?"#281a16":"#fef4f2",hover:e?"#513932":"#fcd8d0",active:e?"#6a4b42":"#fac5b8"},_950_100:{default:e?"#31201c":"#fee9e5",hover:e?"#5d403a":"#fdc6ba",active:e?"#77534a":"#fcb09e"},sun370moon672:{default:e?"#ff732c":"#755348",hover:e?"#ffa48b":"#ab7b6b",active:e?"#ffbbab":"#c68f7d"},_925_125:{default:e?"#382621":"#fddfd8",hover:e?"#664840":"#fbb8a5",active:e?"#7f5b51":"#faa184"},main645:{default:"#e4794a"},_850_200:{default:e?"#543125":"#fcc0b0"}},brownCafeCreme:{_975_75:{default:e?"#211d16":"#fbf6ed",hover:e?"#453e31":"#f2deb6",active:e?"#5a5141":"#eacf91"},_950_100:{default:e?"#28241c":"#f7ecdb",hover:e?"#4e4739":"#edce94",active:e?"#635b4a":"#dabd84"},sun383moon885:{default:e?"#ecd7a2":"#685c48",hover:e?"#c5b386":"#97866a",active:e?"#af9f77":"#ae9b7b"},_925_125:{default:e?"#2e2a21":"#f4e3c7",hover:e?"#554e3f":"#e1c386",active:e?"#6b6351":"#ccb078"},main782:{default:"#d1b781"},_850_200:{default:e?"#423925":"#e7ca8e"}},brownCaramel:{_975_75:{default:e?"#251c16":"#fbf5f2",hover:e?"#4c3c31":"#f1dbcf",active:e?"#624e41":"#ecc9b5"},_950_100:{default:e?"#2c221c":"#f7ebe5",hover:e?"#554439":"#eccbb9",active:e?"#6c574a":"#e6b79a"},sun425moon901:{default:e?"#fbd8ab":"#845d48",hover:e?"#efb547":"#bb8568",active:e?"#d6a23e":"#d69978"},_925_125:{default:e?"#332821":"#f3e2d9",hover:e?"#5d4b40":"#e7bea6",active:e?"#755f51":"#e1a982"},main648:{default:"#c08c65"},_850_200:{default:e?"#4b3525":"#eac7b2"}},brownOpera:{_975_75:{default:e?"#241c17":"#fbf5f2",hover:e?"#4a3c33":"#f1dbcf",active:e?"#604f44":"#ecc9b5"},_950_100:{default:e?"#2b221c":"#f7ece4",hover:e?"#53443a":"#eccdb3",active:e?"#6a574a":"#e6ba90"},sun395moon820:{default:e?"#e6be92":"#745b47",hover:e?"#f2e2d3":"#a78468",active:e?"#f8f0e9":"#c09979"},_925_125:{default:e?"#322821":"#f3e2d7",hover:e?"#5c4b40":"#e7bfa0",active:e?"#735f51":"#deaa7e"},main680:{default:"#bd987a"},_850_200:{default:e?"#493625":"#eac7ad"}},beigeGrisGalet:{_975_75:{default:e?"#211d19":"#f9f6f2",hover:e?"#453e37":"#eadecd",active:e?"#595148":"#e1ceb1"},_950_100:{default:e?"#28231f":"#f3ede5",hover:e?"#4e453f":"#e1d0b5",active:e?"#635950":"#d1bea2"},sun407moon821:{default:e?"#d0c3b7":"#6a6156",hover:e?"#eae5e1":"#988b7c",active:e?"#f4f2f0":"#afa08f"},_925_125:{default:e?"#2e2924":"#eee4d9",hover:e?"#554d45":"#dbc3a4",active:e?"#6b6157":"#c6b094"},main702:{default:"#aea397"},_850_200:{default:e?"#433829":"#e0cab0"}}}}const colorDecisions={background:{default:{grey:{default:"var(--background-default-grey)",hover:"var(--background-default-grey-hover)",active:"var(--background-default-grey-active)"}},alt:{grey:{default:"var(--background-alt-grey)",hover:"var(--background-alt-grey-hover)",active:"var(--background-alt-grey-active)"},blueFrance:{default:"var(--background-alt-blue-france)",hover:"var(--background-alt-blue-france-hover)",active:"var(--background-alt-blue-france-active)"},redMarianne:{default:"var(--background-alt-red-marianne)",hover:"var(--background-alt-red-marianne-hover)",active:"var(--background-alt-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-alt-green-tilleul-verveine)",hover:"var(--background-alt-green-tilleul-verveine-hover)",active:"var(--background-alt-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-alt-green-bourgeon)",hover:"var(--background-alt-green-bourgeon-hover)",active:"var(--background-alt-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-alt-green-emeraude)",hover:"var(--background-alt-green-emeraude-hover)",active:"var(--background-alt-green-emeraude-active)"},greenMenthe:{default:"var(--background-alt-green-menthe)",hover:"var(--background-alt-green-menthe-hover)",active:"var(--background-alt-green-menthe-active)"},greenArchipel:{default:"var(--background-alt-green-archipel)",hover:"var(--background-alt-green-archipel-hover)",active:"var(--background-alt-green-archipel-active)"},blueEcume:{default:"var(--background-alt-blue-ecume)",hover:"var(--background-alt-blue-ecume-hover)",active:"var(--background-alt-blue-ecume-active)"},blueCumulus:{default:"var(--background-alt-blue-cumulus)",hover:"var(--background-alt-blue-cumulus-hover)",active:"var(--background-alt-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-alt-purple-glycine)",hover:"var(--background-alt-purple-glycine-hover)",active:"var(--background-alt-purple-glycine-active)"},pinkMacaron:{default:"var(--background-alt-pink-macaron)",hover:"var(--background-alt-pink-macaron-hover)",active:"var(--background-alt-pink-macaron-active)"},pinkTuile:{default:"var(--background-alt-pink-tuile)",hover:"var(--background-alt-pink-tuile-hover)",active:"var(--background-alt-pink-tuile-active)"},yellowTournesol:{default:"var(--background-alt-yellow-tournesol)",hover:"var(--background-alt-yellow-tournesol-hover)",active:"var(--background-alt-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-alt-yellow-moutarde)",hover:"var(--background-alt-yellow-moutarde-hover)",active:"var(--background-alt-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-alt-orange-terre-battue)",hover:"var(--background-alt-orange-terre-battue-hover)",active:"var(--background-alt-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-alt-brown-cafe-creme)",hover:"var(--background-alt-brown-cafe-creme-hover)",active:"var(--background-alt-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-alt-brown-caramel)",hover:"var(--background-alt-brown-caramel-hover)",active:"var(--background-alt-brown-caramel-active)"},brownOpera:{default:"var(--background-alt-brown-opera)",hover:"var(--background-alt-brown-opera-hover)",active:"var(--background-alt-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-alt-beige-gris-galet)",hover:"var(--background-alt-beige-gris-galet-hover)",active:"var(--background-alt-beige-gris-galet-active)"}},contrast:{grey:{default:"var(--background-contrast-grey)",hover:"var(--background-contrast-grey-hover)",active:"var(--background-contrast-grey-active)"},blueFrance:{default:"var(--background-contrast-blue-france)",hover:"var(--background-contrast-blue-france-hover)",active:"var(--background-contrast-blue-france-active)"},redMarianne:{default:"var(--background-contrast-red-marianne)",hover:"var(--background-contrast-red-marianne-hover)",active:"var(--background-contrast-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-contrast-green-tilleul-verveine)",hover:"var(--background-contrast-green-tilleul-verveine-hover)",active:"var(--background-contrast-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-contrast-green-bourgeon)",hover:"var(--background-contrast-green-bourgeon-hover)",active:"var(--background-contrast-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-contrast-green-emeraude)",hover:"var(--background-contrast-green-emeraude-hover)",active:"var(--background-contrast-green-emeraude-active)"},greenMenthe:{default:"var(--background-contrast-green-menthe)",hover:"var(--background-contrast-green-menthe-hover)",active:"var(--background-contrast-green-menthe-active)"},greenArchipel:{default:"var(--background-contrast-green-archipel)",hover:"var(--background-contrast-green-archipel-hover)",active:"var(--background-contrast-green-archipel-active)"},blueEcume:{default:"var(--background-contrast-blue-ecume)",hover:"var(--background-contrast-blue-ecume-hover)",active:"var(--background-contrast-blue-ecume-active)"},blueCumulus:{default:"var(--background-contrast-blue-cumulus)",hover:"var(--background-contrast-blue-cumulus-hover)",active:"var(--background-contrast-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-contrast-purple-glycine)",hover:"var(--background-contrast-purple-glycine-hover)",active:"var(--background-contrast-purple-glycine-active)"},pinkMacaron:{default:"var(--background-contrast-pink-macaron)",hover:"var(--background-contrast-pink-macaron-hover)",active:"var(--background-contrast-pink-macaron-active)"},pinkTuile:{default:"var(--background-contrast-pink-tuile)",hover:"var(--background-contrast-pink-tuile-hover)",active:"var(--background-contrast-pink-tuile-active)"},yellowTournesol:{default:"var(--background-contrast-yellow-tournesol)",hover:"var(--background-contrast-yellow-tournesol-hover)",active:"var(--background-contrast-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-contrast-yellow-moutarde)",hover:"var(--background-contrast-yellow-moutarde-hover)",active:"var(--background-contrast-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-contrast-orange-terre-battue)",hover:"var(--background-contrast-orange-terre-battue-hover)",active:"var(--background-contrast-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-contrast-brown-cafe-creme)",hover:"var(--background-contrast-brown-cafe-creme-hover)",active:"var(--background-contrast-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-contrast-brown-caramel)",hover:"var(--background-contrast-brown-caramel-hover)",active:"var(--background-contrast-brown-caramel-active)"},brownOpera:{default:"var(--background-contrast-brown-opera)",hover:"var(--background-contrast-brown-opera-hover)",active:"var(--background-contrast-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-contrast-beige-gris-galet)",hover:"var(--background-contrast-beige-gris-galet-hover)",active:"var(--background-contrast-beige-gris-galet-active)"},info:{default:"var(--background-contrast-info)",hover:"var(--background-contrast-info-hover)",active:"var(--background-contrast-info-active)"},success:{default:"var(--background-contrast-success)",hover:"var(--background-contrast-success-hover)",active:"var(--background-contrast-success-active)"},warning:{default:"var(--background-contrast-warning)",hover:"var(--background-contrast-warning-hover)",active:"var(--background-contrast-warning-active)"},error:{default:"var(--background-contrast-error)",hover:"var(--background-contrast-error-hover)",active:"var(--background-contrast-error-active)"}},flat:{grey:{default:"var(--background-flat-grey)"},blueFrance:{default:"var(--background-flat-blue-france)"},redMarianne:{default:"var(--background-flat-red-marianne)"},greenTilleulVerveine:{default:"var(--background-flat-green-tilleul-verveine)"},greenBourgeon:{default:"var(--background-flat-green-bourgeon)"},greenEmeraude:{default:"var(--background-flat-green-emeraude)"},greenMenthe:{default:"var(--background-flat-green-menthe)"},greenArchipel:{default:"var(--background-flat-green-archipel)"},blueEcume:{default:"var(--background-flat-blue-ecume)"},blueCumulus:{default:"var(--background-flat-blue-cumulus)"},purpleGlycine:{default:"var(--background-flat-purple-glycine)"},pinkMacaron:{default:"var(--background-flat-pink-macaron)"},pinkTuile:{default:"var(--background-flat-pink-tuile)"},yellowTournesol:{default:"var(--background-flat-yellow-tournesol)"},yellowMoutarde:{default:"var(--background-flat-yellow-moutarde)"},orangeTerreBattue:{default:"var(--background-flat-orange-terre-battue)"},brownCafeCreme:{default:"var(--background-flat-brown-cafe-creme)"},brownCaramel:{default:"var(--background-flat-brown-caramel)"},brownOpera:{default:"var(--background-flat-brown-opera)"},beigeGrisGalet:{default:"var(--background-flat-beige-gris-galet)"},info:{default:"var(--background-flat-info)"},success:{default:"var(--background-flat-success)"},warning:{default:"var(--background-flat-warning)"},error:{default:"var(--background-flat-error)"}},actionHigh:{grey:{default:"var(--background-action-high-grey)",hover:"var(--background-action-high-grey-hover)",active:"var(--background-action-high-grey-active)"},blueFrance:{default:"var(--background-action-high-blue-france)",hover:"var(--background-action-high-blue-france-hover)",active:"var(--background-action-high-blue-france-active)"},redMarianne:{default:"var(--background-action-high-red-marianne)",hover:"var(--background-action-high-red-marianne-hover)",active:"var(--background-action-high-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-action-high-green-tilleul-verveine)",hover:"var(--background-action-high-green-tilleul-verveine-hover)",active:"var(--background-action-high-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-action-high-green-bourgeon)",hover:"var(--background-action-high-green-bourgeon-hover)",active:"var(--background-action-high-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-action-high-green-emeraude)",hover:"var(--background-action-high-green-emeraude-hover)",active:"var(--background-action-high-green-emeraude-active)"},greenMenthe:{default:"var(--background-action-high-green-menthe)",hover:"var(--background-action-high-green-menthe-hover)",active:"var(--background-action-high-green-menthe-active)"},greenArchipel:{default:"var(--background-action-high-green-archipel)",hover:"var(--background-action-high-green-archipel-hover)",active:"var(--background-action-high-green-archipel-active)"},blueEcume:{default:"var(--background-action-high-blue-ecume)",hover:"var(--background-action-high-blue-ecume-hover)",active:"var(--background-action-high-blue-ecume-active)"},blueCumulus:{default:"var(--background-action-high-blue-cumulus)",hover:"var(--background-action-high-blue-cumulus-hover)",active:"var(--background-action-high-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-action-high-purple-glycine)",hover:"var(--background-action-high-purple-glycine-hover)",active:"var(--background-action-high-purple-glycine-active)"},pinkMacaron:{default:"var(--background-action-high-pink-macaron)",hover:"var(--background-action-high-pink-macaron-hover)",active:"var(--background-action-high-pink-macaron-active)"},pinkTuile:{default:"var(--background-action-high-pink-tuile)",hover:"var(--background-action-high-pink-tuile-hover)",active:"var(--background-action-high-pink-tuile-active)"},yellowTournesol:{default:"var(--background-action-high-yellow-tournesol)",hover:"var(--background-action-high-yellow-tournesol-hover)",active:"var(--background-action-high-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-action-high-yellow-moutarde)",hover:"var(--background-action-high-yellow-moutarde-hover)",active:"var(--background-action-high-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-action-high-orange-terre-battue)",hover:"var(--background-action-high-orange-terre-battue-hover)",active:"var(--background-action-high-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-action-high-brown-cafe-creme)",hover:"var(--background-action-high-brown-cafe-creme-hover)",active:"var(--background-action-high-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-action-high-brown-caramel)",hover:"var(--background-action-high-brown-caramel-hover)",active:"var(--background-action-high-brown-caramel-active)"},brownOpera:{default:"var(--background-action-high-brown-opera)",hover:"var(--background-action-high-brown-opera-hover)",active:"var(--background-action-high-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-action-high-beige-gris-galet)",hover:"var(--background-action-high-beige-gris-galet-hover)",active:"var(--background-action-high-beige-gris-galet-active)"},info:{default:"var(--background-action-high-info)",hover:"var(--background-action-high-info-hover)",active:"var(--background-action-high-info-active)"},success:{default:"var(--background-action-high-success)",hover:"var(--background-action-high-success-hover)",active:"var(--background-action-high-success-active)"},warning:{default:"var(--background-action-high-warning)",hover:"var(--background-action-high-warning-hover)",active:"var(--background-action-high-warning-active)"},error:{default:"var(--background-action-high-error)",hover:"var(--background-action-high-error-hover)",active:"var(--background-action-high-error-active)"}},actionLow:{blueFrance:{default:"var(--background-action-low-blue-france)",hover:"var(--background-action-low-blue-france-hover)",active:"var(--background-action-low-blue-france-active)"},redMarianne:{default:"var(--background-action-low-red-marianne)",hover:"var(--background-action-low-red-marianne-hover)",active:"var(--background-action-low-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-action-low-green-tilleul-verveine)",hover:"var(--background-action-low-green-tilleul-verveine-hover)",active:"var(--background-action-low-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-action-low-green-bourgeon)",hover:"var(--background-action-low-green-bourgeon-hover)",active:"var(--background-action-low-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-action-low-green-emeraude)",hover:"var(--background-action-low-green-emeraude-hover)",active:"var(--background-action-low-green-emeraude-active)"},greenMenthe:{default:"var(--background-action-low-green-menthe)",hover:"var(--background-action-low-green-menthe-hover)",active:"var(--background-action-low-green-menthe-active)"},greenArchipel:{default:"var(--background-action-low-green-archipel)",hover:"var(--background-action-low-green-archipel-hover)",active:"var(--background-action-low-green-archipel-active)"},blueEcume:{default:"var(--background-action-low-blue-ecume)",hover:"var(--background-action-low-blue-ecume-hover)",active:"var(--background-action-low-blue-ecume-active)"},blueCumulus:{default:"var(--background-action-low-blue-cumulus)",hover:"var(--background-action-low-blue-cumulus-hover)",active:"var(--background-action-low-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-action-low-purple-glycine)",hover:"var(--background-action-low-purple-glycine-hover)",active:"var(--background-action-low-purple-glycine-active)"},pinkMacaron:{default:"var(--background-action-low-pink-macaron)",hover:"var(--background-action-low-pink-macaron-hover)",active:"var(--background-action-low-pink-macaron-active)"},pinkTuile:{default:"var(--background-action-low-pink-tuile)",hover:"var(--background-action-low-pink-tuile-hover)",active:"var(--background-action-low-pink-tuile-active)"},yellowTournesol:{default:"var(--background-action-low-yellow-tournesol)",hover:"var(--background-action-low-yellow-tournesol-hover)",active:"var(--background-action-low-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-action-low-yellow-moutarde)",hover:"var(--background-action-low-yellow-moutarde-hover)",active:"var(--background-action-low-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-action-low-orange-terre-battue)",hover:"var(--background-action-low-orange-terre-battue-hover)",active:"var(--background-action-low-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-action-low-brown-cafe-creme)",hover:"var(--background-action-low-brown-cafe-creme-hover)",active:"var(--background-action-low-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-action-low-brown-caramel)",hover:"var(--background-action-low-brown-caramel-hover)",active:"var(--background-action-low-brown-caramel-active)"},brownOpera:{default:"var(--background-action-low-brown-opera)",hover:"var(--background-action-low-brown-opera-hover)",active:"var(--background-action-low-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-action-low-beige-gris-galet)",hover:"var(--background-action-low-beige-gris-galet-hover)",active:"var(--background-action-low-beige-gris-galet-active)"}},active:{blueFrance:{default:"var(--background-active-blue-france)",hover:"var(--background-active-blue-france-hover)",active:"var(--background-active-blue-france-active)"},redMarianne:{default:"var(--background-active-red-marianne)",hover:"var(--background-active-red-marianne-hover)",active:"var(--background-active-red-marianne-active)"}},open:{blueFrance:{default:"var(--background-open-blue-france)",hover:"var(--background-open-blue-france-hover)",active:"var(--background-open-blue-france-active)"},redMarianne:{default:"var(--background-open-red-marianne)",hover:"var(--background-open-red-marianne-hover)",active:"var(--background-open-red-marianne-active)"}},disabled:{grey:{default:"var(--background-disabled-grey)"}},raised:{grey:{default:"var(--background-raised-grey)",hover:"var(--background-raised-grey-hover)",active:"var(--background-raised-grey-active)"}},overlap:{grey:{default:"var(--background-overlap-grey)",hover:"var(--background-overlap-grey-hover)",active:"var(--background-overlap-grey-active)"}},lifted:{grey:{default:"var(--background-lifted-grey)",hover:"var(--background-lifted-grey-hover)",active:"var(--background-lifted-grey-active)"}},altRaised:{grey:{default:"var(--background-alt-raised-grey)",hover:"var(--background-alt-raised-grey-hover)",active:"var(--background-alt-raised-grey-active)"}},altOverlap:{grey:{default:"var(--background-alt-overlap-grey)",hover:"var(--background-alt-overlap-grey-hover)",active:"var(--background-alt-overlap-grey-active)"}},contrastRaised:{grey:{default:"var(--background-contrast-raised-grey)",hover:"var(--background-contrast-raised-grey-hover)",active:"var(--background-contrast-raised-grey-active)"}},contrastOverlap:{grey:{default:"var(--background-contrast-overlap-grey)",hover:"var(--background-contrast-overlap-grey-hover)",active:"var(--background-contrast-overlap-grey-active)"}}},text:{default:{grey:{default:"var(--text-default-grey)"},info:{default:"var(--text-default-info)"},success:{default:"var(--text-default-success)"},warning:{default:"var(--text-default-warning)"},error:{default:"var(--text-default-error)"}},actionHigh:{grey:{default:"var(--text-action-high-grey)"},blueFrance:{default:"var(--text-action-high-blue-france)"},redMarianne:{default:"var(--text-action-high-red-marianne)"},greenTilleulVerveine:{default:"var(--text-action-high-green-tilleul-verveine)"},greenBourgeon:{default:"var(--text-action-high-green-bourgeon)"},greenEmeraude:{default:"var(--text-action-high-green-emeraude)"},greenMenthe:{default:"var(--text-action-high-green-menthe)"},greenArchipel:{default:"var(--text-action-high-green-archipel)"},blueEcume:{default:"var(--text-action-high-blue-ecume)"},blueCumulus:{default:"var(--text-action-high-blue-cumulus)"},purpleGlycine:{default:"var(--text-action-high-purple-glycine)"},pinkMacaron:{default:"var(--text-action-high-pink-macaron)"},pinkTuile:{default:"var(--text-action-high-pink-tuile)"},yellowTournesol:{default:"var(--text-action-high-yellow-tournesol)"},yellowMoutarde:{default:"var(--text-action-high-yellow-moutarde)"},orangeTerreBattue:{default:"var(--text-action-high-orange-terre-battue)"},brownCafeCreme:{default:"var(--text-action-high-brown-cafe-creme)"},brownCaramel:{default:"var(--text-action-high-brown-caramel)"},brownOpera:{default:"var(--text-action-high-brown-opera)"},beigeGrisGalet:{default:"var(--text-action-high-beige-gris-galet)"}},title:{grey:{default:"var(--text-title-grey)"},blueFrance:{default:"var(--text-title-blue-france)"},redMarianne:{default:"var(--text-title-red-marianne)"}},label:{grey:{default:"var(--text-label-grey)"},blueFrance:{default:"var(--text-label-blue-france)"},redMarianne:{default:"var(--text-label-red-marianne)"},greenTilleulVerveine:{default:"var(--text-label-green-tilleul-verveine)"},greenBourgeon:{default:"var(--text-label-green-bourgeon)"},greenEmeraude:{default:"var(--text-label-green-emeraude)"},greenMenthe:{default:"var(--text-label-green-menthe)"},greenArchipel:{default:"var(--text-label-green-archipel)"},blueEcume:{default:"var(--text-label-blue-ecume)"},blueCumulus:{default:"var(--text-label-blue-cumulus)"},purpleGlycine:{default:"var(--text-label-purple-glycine)"},pinkMacaron:{default:"var(--text-label-pink-macaron)"},pinkTuile:{default:"var(--text-label-pink-tuile)"},yellowTournesol:{default:"var(--text-label-yellow-tournesol)"},yellowMoutarde:{default:"var(--text-label-yellow-moutarde)"},orangeTerreBattue:{default:"var(--text-label-orange-terre-battue)"},brownCafeCreme:{default:"var(--text-label-brown-cafe-creme)"},brownCaramel:{default:"var(--text-label-brown-caramel)"},brownOpera:{default:"var(--text-label-brown-opera)"},beigeGrisGalet:{default:"var(--text-label-beige-gris-galet)"}},active:{grey:{default:"var(--text-active-grey)"},blueFrance:{default:"var(--text-active-blue-france)"},redMarianne:{default:"var(--text-active-red-marianne)"}},mention:{grey:{default:"var(--text-mention-grey)"}},inverted:{grey:{default:"var(--text-inverted-grey)"},blueFrance:{default:"var(--text-inverted-blue-france)"},redMarianne:{default:"var(--text-inverted-red-marianne)"},info:{default:"var(--text-inverted-info)"},success:{default:"var(--text-inverted-success)"},warning:{default:"var(--text-inverted-warning)"},error:{default:"var(--text-inverted-error)"},greenTilleulVerveine:{default:"var(--text-inverted-green-tilleul-verveine)"},greenBourgeon:{default:"var(--text-inverted-green-bourgeon)"},greenEmeraude:{default:"var(--text-inverted-green-emeraude)"},greenMenthe:{default:"var(--text-inverted-green-menthe)"},greenArchipel:{default:"var(--text-inverted-green-archipel)"},blueEcume:{default:"var(--text-inverted-blue-ecume)"},blueCumulus:{default:"var(--text-inverted-blue-cumulus)"},purpleGlycine:{default:"var(--text-inverted-purple-glycine)"},pinkMacaron:{default:"var(--text-inverted-pink-macaron)"},pinkTuile:{default:"var(--text-inverted-pink-tuile)"},yellowTournesol:{default:"var(--text-inverted-yellow-tournesol)"},yellowMoutarde:{default:"var(--text-inverted-yellow-moutarde)"},orangeTerreBattue:{default:"var(--text-inverted-orange-terre-battue)"},brownCafeCreme:{default:"var(--text-inverted-brown-cafe-creme)"},brownCaramel:{default:"var(--text-inverted-brown-caramel)"},brownOpera:{default:"var(--text-inverted-brown-opera)"},beigeGrisGalet:{default:"var(--text-inverted-beige-gris-galet)"}},disabled:{grey:{default:"var(--text-disabled-grey)"}},blackWhite:{grey:{default:"var(--text-black-white-grey)"}}},border:{default:{grey:{default:"var(--border-default-grey)"},blueFrance:{default:"var(--border-default-blue-france)"},redMarianne:{default:"var(--border-default-red-marianne)"},greenTilleulVerveine:{default:"var(--border-default-green-tilleul-verveine)"},greenBourgeon:{default:"var(--border-default-green-bourgeon)"},greenEmeraude:{default:"var(--border-default-green-emeraude)"},greenMenthe:{default:"var(--border-default-green-menthe)"},greenArchipel:{default:"var(--border-default-green-archipel)"},blueEcume:{default:"var(--border-default-blue-ecume)"},blueCumulus:{default:"var(--border-default-blue-cumulus)"},purpleGlycine:{default:"var(--border-default-purple-glycine)"},pinkMacaron:{default:"var(--border-default-pink-macaron)"},pinkTuile:{default:"var(--border-default-pink-tuile)"},yellowTournesol:{default:"var(--border-default-yellow-tournesol)"},yellowMoutarde:{default:"var(--border-default-yellow-moutarde)"},orangeTerreBattue:{default:"var(--border-default-orange-terre-battue)"},brownCafeCreme:{default:"var(--border-default-brown-cafe-creme)"},brownCaramel:{default:"var(--border-default-brown-caramel)"},brownOpera:{default:"var(--border-default-brown-opera)"},beigeGrisGalet:{default:"var(--border-default-beige-gris-galet)"}},contrast:{grey:{default:"var(--border-contrast-grey)"}},active:{blueFrance:{default:"var(--border-active-blue-france)"},redMarianne:{default:"var(--border-active-red-marianne)"}},actionHigh:{grey:{default:"var(--border-action-high-grey)"},blueFrance:{default:"var(--border-action-high-blue-france)"},redMarianne:{default:"var(--border-action-high-red-marianne)"},info:{default:"var(--border-action-high-info)"},success:{default:"var(--border-action-high-success)"},warning:{default:"var(--border-action-high-warning)"},error:{default:"var(--border-action-high-error)"}},actionLow:{blueFrance:{default:"var(--border-action-low-blue-france)"},redMarianne:{default:"var(--border-action-low-red-marianne)"},greenTilleulVerveine:{default:"var(--border-action-low-green-tilleul-verveine)"},greenBourgeon:{default:"var(--border-action-low-green-bourgeon)"},greenEmeraude:{default:"var(--border-action-low-green-emeraude)"},greenMenthe:{default:"var(--border-action-low-green-menthe)"},greenArchipel:{default:"var(--border-action-low-green-archipel)"},blueEcume:{default:"var(--border-action-low-blue-ecume)"},blueCumulus:{default:"var(--border-action-low-blue-cumulus)"},purpleGlycine:{default:"var(--border-action-low-purple-glycine)"},pinkMacaron:{default:"var(--border-action-low-pink-macaron)"},pinkTuile:{default:"var(--border-action-low-pink-tuile)"},yellowTournesol:{default:"var(--border-action-low-yellow-tournesol)"},yellowMoutarde:{default:"var(--border-action-low-yellow-moutarde)"},orangeTerreBattue:{default:"var(--border-action-low-orange-terre-battue)"},brownCafeCreme:{default:"var(--border-action-low-brown-cafe-creme)"},brownCaramel:{default:"var(--border-action-low-brown-caramel)"},brownOpera:{default:"var(--border-action-low-brown-opera)"},beigeGrisGalet:{default:"var(--border-action-low-beige-gris-galet)"}},open:{blueFrance:{default:"var(--border-open-blue-france)"},redMarianne:{default:"var(--border-open-red-marianne)"}},plain:{grey:{default:"var(--border-plain-grey)"},blueFrance:{default:"var(--border-plain-blue-france)"},redMarianne:{default:"var(--border-plain-red-marianne)"},info:{default:"var(--border-plain-info)"},success:{default:"var(--border-plain-success)"},warning:{default:"var(--border-plain-warning)"},error:{default:"var(--border-plain-error)"},greenTilleulVerveine:{default:"var(--border-plain-green-tilleul-verveine)"},greenBourgeon:{default:"var(--border-plain-green-bourgeon)"},greenEmeraude:{default:"var(--border-plain-green-emeraude)"},greenMenthe:{default:"var(--border-plain-green-menthe)"},greenArchipel:{default:"var(--border-plain-green-archipel)"},blueEcume:{default:"var(--border-plain-blue-ecume)"},blueCumulus:{default:"var(--border-plain-blue-cumulus)"},purpleGlycine:{default:"var(--border-plain-purple-glycine)"},pinkMacaron:{default:"var(--border-plain-pink-macaron)"},pinkTuile:{default:"var(--border-plain-pink-tuile)"},yellowTournesol:{default:"var(--border-plain-yellow-tournesol)"},yellowMoutarde:{default:"var(--border-plain-yellow-moutarde)"},orangeTerreBattue:{default:"var(--border-plain-orange-terre-battue)"},brownCafeCreme:{default:"var(--border-plain-brown-cafe-creme)"},brownCaramel:{default:"var(--border-plain-brown-caramel)"},brownOpera:{default:"var(--border-plain-brown-opera)"},beigeGrisGalet:{default:"var(--border-plain-beige-gris-galet)"}},disabled:{grey:{default:"var(--border-disabled-grey)"}}},artwork:{major:{blueFrance:{default:"var(--artwork-major-blue-france)",hover:"var(--artwork-major-blue-france-hover)",active:"var(--artwork-major-blue-france-active)"},redMarianne:{default:"var(--artwork-major-red-marianne)",hover:"var(--artwork-major-red-marianne-hover)",active:"var(--artwork-major-red-marianne-active)"},greenTilleulVerveine:{default:"var(--artwork-major-green-tilleul-verveine)",hover:"var(--artwork-major-green-tilleul-verveine-hover)",active:"var(--artwork-major-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--artwork-major-green-bourgeon)",hover:"var(--artwork-major-green-bourgeon-hover)",active:"var(--artwork-major-green-bourgeon-active)"},greenEmeraude:{default:"var(--artwork-major-green-emeraude)",hover:"var(--artwork-major-green-emeraude-hover)",active:"var(--artwork-major-green-emeraude-active)"},greenMenthe:{default:"var(--artwork-major-green-menthe)",hover:"var(--artwork-major-green-menthe-hover)",active:"var(--artwork-major-green-menthe-active)"},greenArchipel:{default:"var(--artwork-major-green-archipel)",hover:"var(--artwork-major-green-archipel-hover)",active:"var(--artwork-major-green-archipel-active)"},blueEcume:{default:"var(--artwork-major-blue-ecume)",hover:"var(--artwork-major-blue-ecume-hover)",active:"var(--artwork-major-blue-ecume-active)"},blueCumulus:{default:"var(--artwork-major-blue-cumulus)",hover:"var(--artwork-major-blue-cumulus-hover)",active:"var(--artwork-major-blue-cumulus-active)"},purpleGlycine:{default:"var(--artwork-major-purple-glycine)",hover:"var(--artwork-major-purple-glycine-hover)",active:"var(--artwork-major-purple-glycine-active)"},pinkMacaron:{default:"var(--artwork-major-pink-macaron)",hover:"var(--artwork-major-pink-macaron-hover)",active:"var(--artwork-major-pink-macaron-active)"},pinkTuile:{default:"var(--artwork-major-pink-tuile)",hover:"var(--artwork-major-pink-tuile-hover)",active:"var(--artwork-major-pink-tuile-active)"},yellowTournesol:{default:"var(--artwork-major-yellow-tournesol)",hover:"var(--artwork-major-yellow-tournesol-hover)",active:"var(--artwork-major-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--artwork-major-yellow-moutarde)",hover:"var(--artwork-major-yellow-moutarde-hover)",active:"var(--artwork-major-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--artwork-major-orange-terre-battue)",hover:"var(--artwork-major-orange-terre-battue-hover)",active:"var(--artwork-major-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--artwork-major-brown-cafe-creme)",hover:"var(--artwork-major-brown-cafe-creme-hover)",active:"var(--artwork-major-brown-cafe-creme-active)"},brownCaramel:{default:"var(--artwork-major-brown-caramel)",hover:"var(--artwork-major-brown-caramel-hover)",active:"var(--artwork-major-brown-caramel-active)"},brownOpera:{default:"var(--artwork-major-brown-opera)",hover:"var(--artwork-major-brown-opera-hover)",active:"var(--artwork-major-brown-opera-active)"},beigeGrisGalet:{default:"var(--artwork-major-beige-gris-galet)",hover:"var(--artwork-major-beige-gris-galet-hover)",active:"var(--artwork-major-beige-gris-galet-active)"}},minor:{blueFrance:{default:"var(--artwork-minor-blue-france)"},redMarianne:{default:"var(--artwork-minor-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-minor-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-minor-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-minor-green-emeraude)"},greenMenthe:{default:"var(--artwork-minor-green-menthe)"},greenArchipel:{default:"var(--artwork-minor-green-archipel)"},blueEcume:{default:"var(--artwork-minor-blue-ecume)"},blueCumulus:{default:"var(--artwork-minor-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-minor-purple-glycine)"},pinkMacaron:{default:"var(--artwork-minor-pink-macaron)"},pinkTuile:{default:"var(--artwork-minor-pink-tuile)"},yellowTournesol:{default:"var(--artwork-minor-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-minor-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-minor-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-minor-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-minor-brown-caramel)"},brownOpera:{default:"var(--artwork-minor-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-minor-beige-gris-galet)"}},decorative:{grey:{default:"var(--artwork-decorative-grey)"},blueFrance:{default:"var(--artwork-decorative-blue-france)"},redMarianne:{default:"var(--artwork-decorative-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-decorative-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-decorative-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-decorative-green-emeraude)"},greenMenthe:{default:"var(--artwork-decorative-green-menthe)"},greenArchipel:{default:"var(--artwork-decorative-green-archipel)"},blueEcume:{default:"var(--artwork-decorative-blue-ecume)"},blueCumulus:{default:"var(--artwork-decorative-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-decorative-purple-glycine)"},pinkMacaron:{default:"var(--artwork-decorative-pink-macaron)"},pinkTuile:{default:"var(--artwork-decorative-pink-tuile)"},yellowTournesol:{default:"var(--artwork-decorative-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-decorative-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-decorative-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-decorative-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-decorative-brown-caramel)"},brownOpera:{default:"var(--artwork-decorative-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-decorative-beige-gris-galet)"}},background:{grey:{default:"var(--artwork-background-grey)"},blueFrance:{default:"var(--artwork-background-blue-france)"},redMarianne:{default:"var(--artwork-background-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-background-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-background-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-background-green-emeraude)"},greenMenthe:{default:"var(--artwork-background-green-menthe)"},greenArchipel:{default:"var(--artwork-background-green-archipel)"},blueEcume:{default:"var(--artwork-background-blue-ecume)"},blueCumulus:{default:"var(--artwork-background-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-background-purple-glycine)"},pinkMacaron:{default:"var(--artwork-background-pink-macaron)"},pinkTuile:{default:"var(--artwork-background-pink-tuile)"},yellowTournesol:{default:"var(--artwork-background-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-background-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-background-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-background-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-background-brown-caramel)"},brownOpera:{default:"var(--artwork-background-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-background-beige-gris-galet)"}},motif:{grey:{default:"var(--artwork-motif-grey)"},blueFrance:{default:"var(--artwork-motif-blue-france)"},redMarianne:{default:"var(--artwork-motif-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-motif-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-motif-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-motif-green-emeraude)"},greenMenthe:{default:"var(--artwork-motif-green-menthe)"},greenArchipel:{default:"var(--artwork-motif-green-archipel)"},blueEcume:{default:"var(--artwork-motif-blue-ecume)"},blueCumulus:{default:"var(--artwork-motif-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-motif-purple-glycine)"},pinkMacaron:{default:"var(--artwork-motif-pink-macaron)"},pinkTuile:{default:"var(--artwork-motif-pink-tuile)"},yellowTournesol:{default:"var(--artwork-motif-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-motif-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-motif-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-motif-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-motif-brown-caramel)"},brownOpera:{default:"var(--artwork-motif-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-motif-beige-gris-galet)"}}}};function getColorDecisionsHex(o){const{colorOptions:e}=o;return{background:{default:{grey:{default:e.grey._1000_50.default,hover:e.grey._1000_50.hover,active:e.grey._1000_50.active}},alt:{grey:{default:e.grey._975_75.default,hover:e.grey._975_75.hover,active:e.grey._975_75.active},blueFrance:{default:e.blueFrance._975_75.default,hover:e.blueFrance._975_75.hover,active:e.blueFrance._975_75.active},redMarianne:{default:e.redMarianne._975_75.default,hover:e.redMarianne._975_75.hover,active:e.redMarianne._975_75.active},greenTilleulVerveine:{default:e.greenTilleulVerveine._975_75.default,hover:e.greenTilleulVerveine._975_75.hover,active:e.greenTilleulVerveine._975_75.active},greenBourgeon:{default:e.greenBourgeon._975_75.default,hover:e.greenBourgeon._975_75.hover,active:e.greenBourgeon._975_75.active},greenEmeraude:{default:e.greenEmeraude._975_75.default,hover:e.greenEmeraude._975_75.hover,active:e.greenEmeraude._975_75.active},greenMenthe:{default:e.greenMenthe._975_75.default,hover:e.greenMenthe._975_75.hover,active:e.greenMenthe._975_75.active},greenArchipel:{default:e.greenArchipel._975_75.default,hover:e.greenArchipel._975_75.hover,active:e.greenArchipel._975_75.active},blueEcume:{default:e.blueEcume._975_75.default,hover:e.blueEcume._975_75.hover,active:e.blueEcume._975_75.active},blueCumulus:{default:e.blueCumulus._975_75.default,hover:e.blueCumulus._975_75.hover,active:e.blueCumulus._975_75.active},purpleGlycine:{default:e.purpleGlycine._975_75.default,hover:e.purpleGlycine._975_75.hover,active:e.purpleGlycine._975_75.active},pinkMacaron:{default:e.pinkMacaron._975_75.default,hover:e.pinkMacaron._975_75.hover,active:e.pinkMacaron._975_75.active},pinkTuile:{default:e.pinkTuile._975_75.default,hover:e.pinkTuile._975_75.hover,active:e.pinkTuile._975_75.active},yellowTournesol:{default:e.yellowTournesol._975_75.default,hover:e.yellowTournesol._975_75.hover,active:e.yellowTournesol._975_75.active},yellowMoutarde:{default:e.yellowMoutarde._975_75.default,hover:e.yellowMoutarde._975_75.hover,active:e.yellowMoutarde._975_75.active},orangeTerreBattue:{default:e.orangeTerreBattue._975_75.default,hover:e.orangeTerreBattue._975_75.hover,active:e.orangeTerreBattue._975_75.active},brownCafeCreme:{default:e.brownCafeCreme._975_75.default,hover:e.brownCafeCreme._975_75.hover,active:e.brownCafeCreme._975_75.active},brownCaramel:{default:e.brownCaramel._975_75.default,hover:e.brownCaramel._975_75.hover,active:e.brownCaramel._975_75.active},brownOpera:{default:e.brownOpera._975_75.default,hover:e.brownOpera._975_75.hover,active:e.brownOpera._975_75.active},beigeGrisGalet:{default:e.beigeGrisGalet._975_75.default,hover:e.beigeGrisGalet._975_75.hover,active:e.beigeGrisGalet._975_75.active}},contrast:{grey:{default:e.grey._950_100.default,hover:e.grey._950_100.hover,active:e.grey._950_100.active},blueFrance:{default:e.blueFrance._950_100.default,hover:e.blueFrance._950_100.hover,active:e.blueFrance._950_100.active},redMarianne:{default:e.redMarianne._950_100.default,hover:e.redMarianne._950_100.hover,active:e.redMarianne._950_100.active},greenTilleulVerveine:{default:e.greenTilleulVerveine._950_100.default,hover:e.greenTilleulVerveine._950_100.hover,active:e.greenTilleulVerveine._950_100.active},greenBourgeon:{default:e.greenBourgeon._950_100.default,hover:e.greenBourgeon._950_100.hover,active:e.greenBourgeon._950_100.active},greenEmeraude:{default:e.greenEmeraude._950_100.default,hover:e.greenEmeraude._950_100.hover,active:e.greenEmeraude._950_100.active},greenMenthe:{default:e.greenMenthe._950_100.default,hover:e.greenMenthe._950_100.hover,active:e.greenMenthe._950_100.active},greenArchipel:{default:e.greenArchipel._950_100.default,hover:e.greenArchipel._950_100.hover,active:e.greenArchipel._950_100.active},blueEcume:{default:e.blueEcume._950_100.default,hover:e.blueEcume._950_100.hover,active:e.blueEcume._950_100.active},blueCumulus:{default:e.blueCumulus._950_100.default,hover:e.blueCumulus._950_100.hover,active:e.blueCumulus._950_100.active},purpleGlycine:{default:e.purpleGlycine._950_100.default,hover:e.purpleGlycine._950_100.hover,active:e.purpleGlycine._950_100.active},pinkMacaron:{default:e.pinkMacaron._950_100.default,hover:e.pinkMacaron._950_100.hover,active:e.pinkMacaron._950_100.active},pinkTuile:{default:e.pinkTuile._950_100.default,hover:e.pinkTuile._950_100.hover,active:e.pinkTuile._950_100.active},yellowTournesol:{default:e.yellowTournesol._950_100.default,hover:e.yellowTournesol._950_100.hover,active:e.yellowTournesol._950_100.active},yellowMoutarde:{default:e.yellowMoutarde._950_100.default,hover:e.yellowMoutarde._950_100.hover,active:e.yellowMoutarde._950_100.active},orangeTerreBattue:{default:e.orangeTerreBattue._950_100.default,hover:e.orangeTerreBattue._950_100.hover,active:e.orangeTerreBattue._950_100.active},brownCafeCreme:{default:e.brownCafeCreme._950_100.default,hover:e.brownCafeCreme._950_100.hover,active:e.brownCafeCreme._950_100.active},brownCaramel:{default:e.brownCaramel._950_100.default,hover:e.brownCaramel._950_100.hover,active:e.brownCaramel._950_100.active},brownOpera:{default:e.brownOpera._950_100.default,hover:e.brownOpera._950_100.hover,active:e.brownOpera._950_100.active},beigeGrisGalet:{default:e.beigeGrisGalet._950_100.default,hover:e.beigeGrisGalet._950_100.hover,active:e.beigeGrisGalet._950_100.active},info:{default:e.info._950_100.default,hover:e.info._950_100.hover,active:e.info._950_100.active},success:{default:e.success._950_100.default,hover:e.success._950_100.hover,active:e.success._950_100.active},warning:{default:e.warning._950_100.default,hover:e.warning._950_100.hover,active:e.warning._950_100.active},error:{default:e.error._950_100.default,hover:e.error._950_100.hover,active:e.error._950_100.active}},flat:{grey:{default:e.grey._200_850.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default}},actionHigh:{grey:{default:e.grey._200_850.default,hover:e.grey._200_850.hover,active:e.grey._200_850.active},blueFrance:{default:e.blueFrance.sun113_625.default,hover:e.blueFrance.sun113_625.hover,active:e.blueFrance.sun113_625.active},redMarianne:{default:e.redMarianne._425_625.default,hover:e.redMarianne._425_625.hover,active:e.redMarianne._425_625.active},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default,hover:e.greenTilleulVerveine.sun418moon817.hover,active:e.greenTilleulVerveine.sun418moon817.active},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default,hover:e.greenBourgeon.sun425moon759.hover,active:e.greenBourgeon.sun425moon759.active},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default,hover:e.greenEmeraude.sun425moon753.hover,active:e.greenEmeraude.sun425moon753.active},greenMenthe:{default:e.greenMenthe.sun373moon652.default,hover:e.greenMenthe.sun373moon652.hover,active:e.greenMenthe.sun373moon652.active},greenArchipel:{default:e.greenArchipel.sun391moon716.default,hover:e.greenArchipel.sun391moon716.hover,active:e.greenArchipel.sun391moon716.active},blueEcume:{default:e.blueEcume.sun247moon675.default,hover:e.blueEcume.sun247moon675.hover,active:e.blueEcume.sun247moon675.active},blueCumulus:{default:e.blueCumulus.sun368moon732.default,hover:e.blueCumulus.sun368moon732.hover,active:e.blueCumulus.sun368moon732.active},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default,hover:e.purpleGlycine.sun319moon630.hover,active:e.purpleGlycine.sun319moon630.active},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default,hover:e.pinkMacaron.sun406moon833.hover,active:e.pinkMacaron.sun406moon833.active},pinkTuile:{default:e.pinkTuile.sun425moon750.default,hover:e.pinkTuile.sun425moon750.hover,active:e.pinkTuile.sun425moon750.active},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default,hover:e.yellowTournesol.sun407moon922.hover,active:e.yellowTournesol.sun407moon922.active},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default,hover:e.yellowMoutarde.sun348moon860.hover,active:e.yellowMoutarde.sun348moon860.active},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default,hover:e.orangeTerreBattue.sun370moon672.hover,active:e.orangeTerreBattue.sun370moon672.active},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default,hover:e.brownCafeCreme.sun383moon885.hover,active:e.brownCafeCreme.sun383moon885.active},brownCaramel:{default:e.brownCaramel.sun425moon901.default,hover:e.brownCaramel.sun425moon901.hover,active:e.brownCaramel.sun425moon901.active},brownOpera:{default:e.brownOpera.sun395moon820.default,hover:e.brownOpera.sun395moon820.hover,active:e.brownOpera.sun395moon820.active},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default,hover:e.beigeGrisGalet.sun407moon821.hover,active:e.beigeGrisGalet.sun407moon821.active},info:{default:e.info._425_625.default,hover:e.info._425_625.hover,active:e.info._425_625.active},success:{default:e.success._425_625.default,hover:e.success._425_625.hover,active:e.success._425_625.active},warning:{default:e.warning._425_625.default,hover:e.warning._425_625.hover,active:e.warning._425_625.active},error:{default:e.error._425_625.default,hover:e.error._425_625.hover,active:e.error._425_625.active}},actionLow:{blueFrance:{default:e.blueFrance._925_125.default,hover:e.blueFrance._925_125.hover,active:e.blueFrance._925_125.active},redMarianne:{default:e.redMarianne._925_125.default,hover:e.redMarianne._925_125.hover,active:e.redMarianne._925_125.active},greenTilleulVerveine:{default:e.greenTilleulVerveine._925_125.default,hover:e.greenTilleulVerveine._925_125.hover,active:e.greenTilleulVerveine._925_125.active},greenBourgeon:{default:e.greenBourgeon._925_125.default,hover:e.greenBourgeon._925_125.hover,active:e.greenBourgeon._925_125.active},greenEmeraude:{default:e.greenEmeraude._925_125.default,hover:e.greenEmeraude._925_125.hover,active:e.greenEmeraude._925_125.active},greenMenthe:{default:e.greenMenthe._925_125.default,hover:e.greenMenthe._925_125.hover,active:e.greenMenthe._925_125.active},greenArchipel:{default:e.greenArchipel._925_125.default,hover:e.greenArchipel._925_125.hover,active:e.greenArchipel._925_125.active},blueEcume:{default:e.blueEcume._925_125.default,hover:e.blueEcume._925_125.hover,active:e.blueEcume._925_125.active},blueCumulus:{default:e.blueCumulus._925_125.default,hover:e.blueCumulus._925_125.hover,active:e.blueCumulus._925_125.active},purpleGlycine:{default:e.purpleGlycine._925_125.default,hover:e.purpleGlycine._925_125.hover,active:e.purpleGlycine._925_125.active},pinkMacaron:{default:e.pinkMacaron._925_125.default,hover:e.pinkMacaron._925_125.hover,active:e.pinkMacaron._925_125.active},pinkTuile:{default:e.pinkTuile._925_125.default,hover:e.pinkTuile._925_125.hover,active:e.pinkTuile._925_125.active},yellowTournesol:{default:e.yellowTournesol._925_125.default,hover:e.yellowTournesol._925_125.hover,active:e.yellowTournesol._925_125.active},yellowMoutarde:{default:e.yellowMoutarde._925_125.default,hover:e.yellowMoutarde._925_125.hover,active:e.yellowMoutarde._925_125.active},orangeTerreBattue:{default:e.orangeTerreBattue._925_125.default,hover:e.orangeTerreBattue._925_125.hover,active:e.orangeTerreBattue._925_125.active},brownCafeCreme:{default:e.brownCafeCreme._925_125.default,hover:e.brownCafeCreme._925_125.hover,active:e.brownCafeCreme._925_125.active},brownCaramel:{default:e.brownCaramel._925_125.default,hover:e.brownCaramel._925_125.hover,active:e.brownCaramel._925_125.active},brownOpera:{default:e.brownOpera._925_125.default,hover:e.brownOpera._925_125.hover,active:e.brownOpera._925_125.active},beigeGrisGalet:{default:e.beigeGrisGalet._925_125.default,hover:e.beigeGrisGalet._925_125.hover,active:e.beigeGrisGalet._925_125.active}},active:{blueFrance:{default:e.blueFrance.sun113_625.default,hover:e.blueFrance.sun113_625.hover,active:e.blueFrance.sun113_625.active},redMarianne:{default:e.redMarianne._425_625.default,hover:e.redMarianne._425_625.hover,active:e.redMarianne._425_625.active}},open:{blueFrance:{default:e.blueFrance._925_125.default,hover:e.blueFrance._925_125.hover,active:e.blueFrance._925_125.active},redMarianne:{default:e.redMarianne._925_125.default,hover:e.redMarianne._925_125.hover,active:e.redMarianne._925_125.active}},disabled:{grey:{default:e.grey._925_125.default}},raised:{grey:{default:e.grey._1000_75.default,hover:e.grey._1000_75.hover,active:e.grey._1000_75.active}},overlap:{grey:{default:e.grey._1000_100.default,hover:e.grey._1000_100.hover,active:e.grey._1000_100.active}},lifted:{grey:{default:e.grey._1000_75.default,hover:e.grey._1000_75.hover,active:e.grey._1000_75.active}},altRaised:{grey:{default:e.grey._975_100.default,hover:e.grey._975_100.hover,active:e.grey._975_100.active}},altOverlap:{grey:{default:e.grey._975_125.default,hover:e.grey._975_125.hover,active:e.grey._975_125.active}},contrastRaised:{grey:{default:e.grey._950_125.default,hover:e.grey._950_125.hover,active:e.grey._950_125.active}},contrastOverlap:{grey:{default:e.grey._950_150.default,hover:e.grey._950_150.hover,active:e.grey._950_150.active}}},text:{default:{grey:{default:e.grey._200_850.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default}},actionHigh:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default}},title:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default}},label:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default}},active:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default}},mention:{grey:{default:e.grey._425_625.default}},inverted:{grey:{default:e.grey._1000_50.default},blueFrance:{default:e.blueFrance._975sun113.default},redMarianne:{default:e.redMarianne._975_75.default},info:{default:e.info._975_75.default},success:{default:e.success._975_75.default},warning:{default:e.warning._975_75.default},error:{default:e.error._975_75.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._975_75.default},greenBourgeon:{default:e.greenBourgeon._975_75.default},greenEmeraude:{default:e.greenEmeraude._975_75.default},greenMenthe:{default:e.greenMenthe._975_75.default},greenArchipel:{default:e.greenArchipel._975_75.default},blueEcume:{default:e.blueEcume._975_75.default},blueCumulus:{default:e.blueCumulus._975_75.default},purpleGlycine:{default:e.purpleGlycine._975_75.default},pinkMacaron:{default:e.pinkMacaron._975_75.default},pinkTuile:{default:e.pinkTuile._975_75.default},yellowTournesol:{default:e.yellowTournesol._975_75.default},yellowMoutarde:{default:e.yellowMoutarde._975_75.default},orangeTerreBattue:{default:e.orangeTerreBattue._975_75.default},brownCafeCreme:{default:e.brownCafeCreme._975_75.default},brownCaramel:{default:e.brownCaramel._975_75.default},brownOpera:{default:e.brownOpera._975_75.default},beigeGrisGalet:{default:e.beigeGrisGalet._975_75.default}},disabled:{grey:{default:e.grey._625_425.default}},blackWhite:{grey:{default:e.grey._0_1000.default}}},border:{default:{grey:{default:e.grey._900_175.default},blueFrance:{default:e.blueFrance.main525.default},redMarianne:{default:e.redMarianne.main472.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.main707.default},greenBourgeon:{default:e.greenBourgeon.main640.default},greenEmeraude:{default:e.greenEmeraude.main632.default},greenMenthe:{default:e.greenMenthe.main548.default},greenArchipel:{default:e.greenArchipel.main557.default},blueEcume:{default:e.blueEcume.main400.default},blueCumulus:{default:e.blueCumulus.main526.default},purpleGlycine:{default:e.purpleGlycine.main494.default},pinkMacaron:{default:e.pinkMacaron.main689.default},pinkTuile:{default:e.pinkTuile.main556.default},yellowTournesol:{default:e.yellowTournesol.main731.default},yellowMoutarde:{default:e.yellowMoutarde.main679.default},orangeTerreBattue:{default:e.orangeTerreBattue.main645.default},brownCafeCreme:{default:e.brownCafeCreme.main782.default},brownCaramel:{default:e.brownCaramel.main648.default},brownOpera:{default:e.brownOpera.main680.default},beigeGrisGalet:{default:e.beigeGrisGalet.main702.default}},contrast:{grey:{default:e.grey._625_425.default}},active:{blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default}},actionHigh:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default}},actionLow:{blueFrance:{default:e.blueFrance._850_200.default},redMarianne:{default:e.redMarianne._850_200.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._850_200.default},greenBourgeon:{default:e.greenBourgeon._850_200.default},greenEmeraude:{default:e.greenEmeraude._850_200.default},greenMenthe:{default:e.greenMenthe._850_200.default},greenArchipel:{default:e.greenArchipel._850_200.default},blueEcume:{default:e.blueEcume._850_200.default},blueCumulus:{default:e.blueCumulus._850_200.default},purpleGlycine:{default:e.purpleGlycine._850_200.default},pinkMacaron:{default:e.pinkMacaron._850_200.default},pinkTuile:{default:e.pinkTuile._850_200.default},yellowTournesol:{default:e.yellowTournesol._850_200.default},yellowMoutarde:{default:e.yellowMoutarde._850_200.default},orangeTerreBattue:{default:e.orangeTerreBattue._850_200.default},brownCafeCreme:{default:e.brownCafeCreme._850_200.default},brownCaramel:{default:e.brownCaramel._850_200.default},brownOpera:{default:e.brownOpera._850_200.default},beigeGrisGalet:{default:e.beigeGrisGalet._850_200.default}},open:{blueFrance:{default:e.blueFrance._925_125.default},redMarianne:{default:e.redMarianne._925_125.default}},plain:{grey:{default:e.grey._200_850.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default}},disabled:{grey:{default:e.grey._925_125.default}}},artwork:{major:{blueFrance:{default:e.blueFrance.sun113_625.default,hover:e.blueFrance.sun113_625.hover,active:e.blueFrance.sun113_625.active},redMarianne:{default:e.redMarianne._425_625.default,hover:e.redMarianne._425_625.hover,active:e.redMarianne._425_625.active},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default,hover:e.greenTilleulVerveine.sun418moon817.hover,active:e.greenTilleulVerveine.sun418moon817.active},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default,hover:e.greenBourgeon.sun425moon759.hover,active:e.greenBourgeon.sun425moon759.active},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default,hover:e.greenEmeraude.sun425moon753.hover,active:e.greenEmeraude.sun425moon753.active},greenMenthe:{default:e.greenMenthe.sun373moon652.default,hover:e.greenMenthe.sun373moon652.hover,active:e.greenMenthe.sun373moon652.active},greenArchipel:{default:e.greenArchipel.sun391moon716.default,hover:e.greenArchipel.sun391moon716.hover,active:e.greenArchipel.sun391moon716.active},blueEcume:{default:e.blueEcume.sun247moon675.default,hover:e.blueEcume.sun247moon675.hover,active:e.blueEcume.sun247moon675.active},blueCumulus:{default:e.blueCumulus.sun368moon732.default,hover:e.blueCumulus.sun368moon732.hover,active:e.blueCumulus.sun368moon732.active},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default,hover:e.purpleGlycine.sun319moon630.hover,active:e.purpleGlycine.sun319moon630.active},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default,hover:e.pinkMacaron.sun406moon833.hover,active:e.pinkMacaron.sun406moon833.active},pinkTuile:{default:e.pinkTuile.sun425moon750.default,hover:e.pinkTuile.sun425moon750.hover,active:e.pinkTuile.sun425moon750.active},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default,hover:e.yellowTournesol.sun407moon922.hover,active:e.yellowTournesol.sun407moon922.active},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default,hover:e.yellowMoutarde.sun348moon860.hover,active:e.yellowMoutarde.sun348moon860.active},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default,hover:e.orangeTerreBattue.sun370moon672.hover,active:e.orangeTerreBattue.sun370moon672.active},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default,hover:e.brownCafeCreme.sun383moon885.hover,active:e.brownCafeCreme.sun383moon885.active},brownCaramel:{default:e.brownCaramel.sun425moon901.default,hover:e.brownCaramel.sun425moon901.hover,active:e.brownCaramel.sun425moon901.active},brownOpera:{default:e.brownOpera.sun395moon820.default,hover:e.brownOpera.sun395moon820.hover,active:e.brownOpera.sun395moon820.active},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default,hover:e.beigeGrisGalet.sun407moon821.hover,active:e.beigeGrisGalet.sun407moon821.active}},minor:{blueFrance:{default:e.blueFrance.main525.default},redMarianne:{default:e.redMarianne.main472.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.main707.default},greenBourgeon:{default:e.greenBourgeon.main640.default},greenEmeraude:{default:e.greenEmeraude.main632.default},greenMenthe:{default:e.greenMenthe.main548.default},greenArchipel:{default:e.greenArchipel.main557.default},blueEcume:{default:e.blueEcume.main400.default},blueCumulus:{default:e.blueCumulus.main526.default},purpleGlycine:{default:e.purpleGlycine.main494.default},pinkMacaron:{default:e.pinkMacaron.main689.default},pinkTuile:{default:e.pinkTuile.main556.default},yellowTournesol:{default:e.yellowTournesol.main731.default},yellowMoutarde:{default:e.yellowMoutarde.main679.default},orangeTerreBattue:{default:e.orangeTerreBattue.main645.default},brownCafeCreme:{default:e.brownCafeCreme.main782.default},brownCaramel:{default:e.brownCaramel.main648.default},brownOpera:{default:e.brownOpera.main680.default},beigeGrisGalet:{default:e.beigeGrisGalet.main702.default}},decorative:{grey:{default:e.grey._950_100.default},blueFrance:{default:e.blueFrance._950_100.default},redMarianne:{default:e.redMarianne._950_100.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._950_100.default},greenBourgeon:{default:e.greenBourgeon._950_100.default},greenEmeraude:{default:e.greenEmeraude._950_100.default},greenMenthe:{default:e.greenMenthe._950_100.default},greenArchipel:{default:e.greenArchipel._950_100.default},blueEcume:{default:e.blueEcume._950_100.default},blueCumulus:{default:e.blueCumulus._950_100.default},purpleGlycine:{default:e.purpleGlycine._950_100.default},pinkMacaron:{default:e.pinkMacaron._950_100.default},pinkTuile:{default:e.pinkTuile._950_100.default},yellowTournesol:{default:e.yellowTournesol._950_100.default},yellowMoutarde:{default:e.yellowMoutarde._950_100.default},orangeTerreBattue:{default:e.orangeTerreBattue._950_100.default},brownCafeCreme:{default:e.brownCafeCreme._950_100.default},brownCaramel:{default:e.brownCaramel._950_100.default},brownOpera:{default:e.brownOpera._950_100.default},beigeGrisGalet:{default:e.beigeGrisGalet._950_100.default}},background:{grey:{default:e.grey._975_75.default},blueFrance:{default:e.blueFrance._975_75.default},redMarianne:{default:e.redMarianne._975_75.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._975_75.default},greenBourgeon:{default:e.greenBourgeon._975_75.default},greenEmeraude:{default:e.greenEmeraude._975_75.default},greenMenthe:{default:e.greenMenthe._975_75.default},greenArchipel:{default:e.greenArchipel._975_75.default},blueEcume:{default:e.blueEcume._975_75.default},blueCumulus:{default:e.blueCumulus._975_75.default},purpleGlycine:{default:e.purpleGlycine._975_75.default},pinkMacaron:{default:e.pinkMacaron._975_75.default},pinkTuile:{default:e.pinkTuile._975_75.default},yellowTournesol:{default:e.yellowTournesol._975_75.default},yellowMoutarde:{default:e.yellowMoutarde._975_75.default},orangeTerreBattue:{default:e.orangeTerreBattue._975_75.default},brownCafeCreme:{default:e.brownCafeCreme._975_75.default},brownCaramel:{default:e.brownCaramel._975_75.default},brownOpera:{default:e.brownOpera._975_75.default},beigeGrisGalet:{default:e.beigeGrisGalet._975_75.default}},motif:{grey:{default:e.grey._925_125.default},blueFrance:{default:e.blueFrance._925_125.default},redMarianne:{default:e.redMarianne._925_125.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._925_125.default},greenBourgeon:{default:e.greenBourgeon._925_125.default},greenEmeraude:{default:e.greenEmeraude._925_125.default},greenMenthe:{default:e.greenMenthe._925_125.default},greenArchipel:{default:e.greenArchipel._925_125.default},blueEcume:{default:e.blueEcume._925_125.default},blueCumulus:{default:e.blueCumulus._925_125.default},purpleGlycine:{default:e.purpleGlycine._925_125.default},pinkMacaron:{default:e.pinkMacaron._925_125.default},pinkTuile:{default:e.pinkTuile._925_125.default},yellowTournesol:{default:e.yellowTournesol._925_125.default},yellowMoutarde:{default:e.yellowMoutarde._925_125.default},orangeTerreBattue:{default:e.orangeTerreBattue._925_125.default},brownCafeCreme:{default:e.brownCafeCreme._925_125.default},brownCaramel:{default:e.brownCaramel._925_125.default},brownOpera:{default:e.brownOpera._925_125.default},beigeGrisGalet:{default:e.beigeGrisGalet._925_125.default}}}}}const colors={options:colorOptions,decisions:colorDecisions,getHex:(()=>{const o=({isDark:s})=>{const a=getColorOptionsHex({isDark:s}),d=getColorDecisionsHex({colorOptions:a});return{options:a,decisions:d}},e={light:void 0,dark:void 0};return({isDark:s})=>{var a,d;return(a=e[d=s?"dark":"light"])!==null&&a!==void 0?a:e[d]=o({isDark:s})}})()},breakpointsValuesUnit="em",breakpointKeys=["xs","sm","md","lg","xl"],breakpointsValues={xs:0,sm:36,md:48,lg:62,xl:78};assert$1();function getBaseFontSizePx(){if(!isBrowser)return 16;const o=document.querySelector("html");assert$1(o!==null);const s=window.getComputedStyle(o).getPropertyValue("font-size");return parseFloat(s)}const epsilon=.003125,breakpoints={up:o=>`@media (min-width:${breakpointsValues[o]}${breakpointsValuesUnit})`,down:o=>`@media (max-width:${breakpointsValues[o]-epsilon}${breakpointsValuesUnit})`,between:(o,e)=>`@media (min-width:${breakpointsValues[o]}${breakpointsValuesUnit}) and (max-width:${breakpointsValues[e]-epsilon}${breakpointsValuesUnit})`,only:o=>breakpointKeys.indexOf(o)+1<breakpointKeys.length?breakpoints.between(o,breakpointKeys[breakpointKeys.indexOf(o)+1]):breakpoints.up((assert$1(o!=="xs"),o)),not:o=>{const e=breakpointKeys.indexOf(o);if(e===0)return breakpoints.up(breakpointKeys[1]);if(e===breakpointKeys.length-1){const s=breakpointKeys[e];return assert$1(s!=="xs"),breakpoints.down(s)}return breakpoints.between(o,breakpointKeys[breakpointKeys.indexOf(o)+1]).replace("@media","@media not all and")},values:(()=>{const o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(()=>{const e="xs";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="sm";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="md";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="lg";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="xl";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})());return assert$1(),o})(),valuesUnit:breakpointsValuesUnit,emValues:(assert$1(),breakpointsValues),getPxValues:()=>{assert$1();const o=getBaseFontSizePx();return Object.fromEntries(Object.entries(breakpointsValues).map(([e,s])=>[e,s*o]))}};function capitalize(o){return o.charAt(0).toUpperCase()+o.slice(1)}const spacingTokenByValue={"1v":"0.25rem","1w":"0.5rem","2v":"0.5rem","3v":"0.75rem","2w":"1rem","4v":"1rem","5v":"1.25rem","3w":"1.5rem","6v":"1.5rem","7v":"1.75rem","4w":"2rem","8v":"2rem","9v":"2.25rem","10v":"2.5rem","5w":"2.5rem","11v":"2.75rem","12v":"3rem","6w":"3rem","13v":"3.25rem","14v":"3.5rem","7w":"3.5rem","15v":"3.75rem","16v":"4rem","8w":"4rem","17v":"4.25rem","18v":"4.5rem","9w":"4.5rem","19v":"4.75rem","10w":"5rem","20v":"5rem","21v":"5.25rem","11w":"5.5rem","22v":"5.5rem","23v":"5.75rem","12w":"6rem","24v":"6rem","25v":"6.25rem","13w":"6.5rem","26v":"6.5rem","27v":"6.75rem","14w":"7rem","28v":"7rem","29v":"7.25rem","15w":"7.5rem","30v":"7.5rem","31v":"7.75rem","16w":"8rem","32v":"8rem"};function spacing(o,e){if(["padding","margin"].indexOf(o)>=0){const s=o;assert$1(e!==void 0);const a={},d=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(()=>{const{rightLeft:b}=e;return b!==void 0&&{right:b,left:b}})()),(()=>{const{topBottom:b}=e;return b!==void 0&&{top:b,bottom:b}})()),e.top!==void 0&&{top:e.top}),e.right!==void 0&&{right:e.right}),e.bottom!==void 0&&{bottom:e.bottom}),e.left!==void 0&&{left:e.left});return["top","right","bottom","left"].forEach(b=>{const _=d[b];_!==void 0&&(a[`${s}${capitalize(b)}`]=typeof _=="number"||_==="auto"?_:spacingTokenByValue[_])}),a}else return spacingTokenByValue[o]}function typeGuard(o,e){return e}const cx$1=(...o)=>{const e=o.length;let s=0,a="";for(;s<e;s++){const d=o[s];if(d==null)continue;let b;switch(typeof d){case"boolean":break;case"object":{if(Array.isArray(d))b=cx$1(...d);else{assert$1(!typeGuard(d,!1)),b="";for(const _ in d)d[_]&&_&&(b&&(b+=" "),b+=_)}break}default:b=d}b&&(a&&(a+=" "),a+=b)}return a},cx=cx$1,typography=[{selector:"h6",style:{fontWeight:700,fontSize:"1.125rem",lineHeight:"1.5rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.25rem",lineHeight:"1.75rem"}}},{selector:"h5",style:{fontWeight:700,fontSize:"1.25rem",lineHeight:"1.75rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.375rem",lineHeight:"1.75rem"}}},{selector:"h4",style:{fontWeight:700,fontSize:"1.375rem",lineHeight:"1.75rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.5rem",lineHeight:"2rem"}}},{selector:"h3",style:{fontWeight:700,fontSize:"1.5rem",lineHeight:"2rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.75rem",lineHeight:"2.25rem"}}},{selector:"h2",style:{fontWeight:700,fontSize:"1.75rem",lineHeight:"2.25rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"2rem",lineHeight:"2.5rem"}}},{selector:"h1",style:{fontWeight:700,fontSize:"2rem",lineHeight:"2.5rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"2.5rem",lineHeight:"3rem"}}},{selector:"p",style:{fontSize:"1rem",lineHeight:"1.5rem",margin:"var(--text-spacing)"}},{selector:".fr-text--light",style:{fontWeight:"300 !important"}},{selector:".fr-text--regular",style:{fontWeight:"400 !important"}},{selector:".fr-text--bold",style:{fontWeight:"700 !important"}},{selector:".fr-text--heavy",style:{fontWeight:"900 !important"}},{selector:".fr-display--xs",style:{fontWeight:"700 !important",fontSize:"2.5rem !important",lineHeight:"3rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"3rem !important",lineHeight:"3.5rem !important"}}},{selector:".fr-display--sm",style:{fontWeight:"700 !important",fontSize:"3rem !important",lineHeight:"3.5rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"3.5rem !important",lineHeight:"4rem !important"}}},{selector:".fr-display--md",style:{fontWeight:"700 !important",fontSize:"3.5rem !important",lineHeight:"4rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"4rem !important",lineHeight:"4.5rem !important"}}},{selector:".fr-display--lg",style:{fontWeight:"700 !important",fontSize:"4rem !important",lineHeight:"4.5rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"4.5rem !important",lineHeight:"5rem !important"}}},{selector:".fr-display--xl",style:{fontWeight:"700 !important",fontSize:"4.5rem !important",lineHeight:"5rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"5rem !important",lineHeight:"5.5rem !important"}}},{selector:".fr-text--alt",style:{fontFamily:'"Spectral", georgia, serif !important'}},{selector:".fr-text--xs",style:{fontSize:"0.75rem !important",lineHeight:"1.25rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--sm",style:{fontSize:"0.875rem !important",lineHeight:"1.5rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--md",style:{fontSize:"1rem !important",lineHeight:"1.5rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--lg",style:{fontSize:"1.125rem !important",lineHeight:"1.75rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--xl",style:{fontSize:"1.25rem !important",lineHeight:"2rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--lead",style:{fontSize:"1.25rem !important",lineHeight:"2rem !important",margin:"var(--text-spacing)"}}],fr={breakpoints,spacing,cx,colors,typography},data_fr_theme="data-fr-theme",data_fr_scheme="data-fr-scheme",rootColorSchemeStyleTagId="dsfr-root-color-scheme";var define_process_env_default={};const $clientSideIsDark=createStatefulObservable(()=>{if(typeof process=="object"&&define_process_env_default.JEST_WORKER_ID!==void 0)return!1;throw new Error(["react-dsfr not initialized.","Refer to the documentation for setup instructions","If it used to work but after an update you're getting this error","it usually means that you have multiple copies of @codegouvfr/react-dsfr in your node_modules","@codegouvfr/react-dsfr is a singleton, try removing your lock file and node_module."].join(" "))}),$isAfterFirstEffect=createStatefulObservable(()=>!1);function getCurrentIsDarkFromHtmlAttribute(){const o=document.documentElement.getAttribute(data_fr_theme);switch(o){case null:return;case"light":return!1;case"dark":return!0}assert$1(!1,`Unrecognized ${data_fr_theme} attribute value: ${o}`)}function startClientSideIsDarkLogic(o){const{doPersistDarkModePreferenceWithCookie:e,registerEffectAction:s,colorSchemeExplicitlyProvidedAsParameter:a,doCheckNonce:d=!1,trustedTypesPolicyName:b}=o,{clientSideIsDark:_,ssrWasPerformedWithIsDark:_e}=(()=>{var ct,ft,mt;const bt=getCurrentIsDarkFromHtmlAttribute();if(bt!==void 0)return{clientSideIsDark:bt,ssrWasPerformedWithIsDark:(ct=window.ssrWasPerformedWithIsDark)!==null&&ct!==void 0?ct:bt};const wt=(()=>{if(a!=="system")switch(a){case"dark":return!0;case"light":return!1}})(),Ct=(()=>{const Pt=localStorage.getItem("scheme");if(Pt!==null&&Pt!=="system")switch(Pt){case"dark":return!0;case"light":return!1}})(),Rt=(()=>{if(window.matchMedia)return window.matchMedia("(prefers-color-scheme: dark)").matches})(),It=!1;return{ssrWasPerformedWithIsDark:wt??It,clientSideIsDark:(mt=(ft=Ct??wt)!==null&&ft!==void 0?ft:Rt)!==null&&mt!==void 0?mt:It}})(),ot=window.trustedTypes,st=typeof ot<"u"?ot.createPolicy(b,{createHTML:ct=>ct}):{createHTML:ct=>ct};$clientSideIsDark.current=_,[data_fr_scheme,data_fr_theme].forEach(ct=>document.documentElement.setAttribute(ct,_?"dark":"light")),new MutationObserver(()=>{const ct=getCurrentIsDarkFromHtmlAttribute();assert$1(ct!==void 0),$clientSideIsDark.current=ct}).observe(document.documentElement,{attributes:!0,attributeFilter:[data_fr_theme]});{const ct=ft=>{if(!e)return;let bt=`${data_fr_theme}=${ft?"dark":"light"};path=/;max-age=31536000;SameSite=Strict`;e:{const{hostname:wt}=window.location;if(/(^localhost$)|(^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$)/.test(wt))break e;bt+=`;domain=${wt}`}document.cookie=bt};ct($clientSideIsDark.current),$clientSideIsDark.subscribe(ct)}{const ct=ft=>{var mt;const bt=window.ssrNonce;if(d&&!bt)return;(mt=document.getElementById(rootColorSchemeStyleTagId))===null||mt===void 0||mt.remove();const wt=document.createElement("style");wt.id=rootColorSchemeStyleTagId,bt&&wt.setAttribute("nonce",bt),wt.innerHTML=st.createHTML(`:root { color-scheme: ${ft?"dark":"light"}; }`),document.head.appendChild(wt)};ct($clientSideIsDark.current),$clientSideIsDark.subscribe(ct)}{const ct=ft=>{var mt;const bt="theme-color";(mt=document.querySelector(`meta[name=${bt}]`))===null||mt===void 0||mt.remove();const wt=document.createElement("meta");wt.name=bt,wt.content=fr.colors.getHex({isDark:ft}).decisions.background.default.grey.default,document.head.appendChild(wt)};ct($clientSideIsDark.current),$clientSideIsDark.subscribe(ct)}s(()=>$isAfterFirstEffect.current=!0)}class Deferred{constructor(){this.isPending=!0;let e,s;this.pr=new Promise((a,d)=>{e=b=>{overwriteReadonlyProp(this,"isPending",!1),a(b)},s=b=>{overwriteReadonlyProp(this,"isPending",!1),d(b)}}),this.resolve=e,this.reject=s}}let isStarted=!1;async function start$1(o){const{defaultColorScheme:e,verbose:s,nextParams:a,doCheckNonce:d,trustedTypesPolicyName:b}=o;if(assert$1(isBrowser),isStarted)return;isStarted=!0;const _=a===void 0?_e=>_e():a.registerEffectAction;startClientSideIsDarkLogic({colorSchemeExplicitlyProvidedAsParameter:e,doPersistDarkModePreferenceWithCookie:a===void 0?!1:a.doPersistDarkModePreferenceWithCookie,registerEffectAction:_,doCheckNonce:d,trustedTypesPolicyName:b}),window.dsfr={verbose:s,mode:"react"},await __vitePreload(()=>import("./dsfr.module-dw2D8BKj.js"),[]),dDsfrLoaded.resolve(),_(()=>{window.dsfr.start()})}const dDsfrLoaded=new Deferred,prDsfrLoaded=dDsfrLoaded.pr;var __rest$a=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};let Link$1=o=>{const e=o,{href:s}=e,a=__rest$a(e,["href"]);e:{if(s!=="#"||!("onClick"in a))break e;return assert$1(is()),React.createElement("button",Object.assign({},a,{className:cx$1(fr.cx("fr-link"),a.className)}))}return React.createElement("a",Object.assign({href:s},a))};function setLink(o){Link$1=e=>{var s;{const a=e,{to:d,href:b}=a,_=__rest$a(a,["to","href"]),_e=(s=typeof d=="string"?d:void 0)!==null&&s!==void 0?s:typeof b=="string"?b:void 0;e:{if(_e!=="#"||!("onClick"in _))break e;return assert$1(is()),React.createElement("button",Object.assign({},_,{className:cx$1(fr.cx("fr-link"),_.className)}))}e:{if(_e===void 0||!_e.startsWith("//")&&!/^https?:\/\//.test(_e))break e;return React.createElement("a",Object.assign({href:_e,target:"_blank",rel:"noreferrer"},_))}e:{if(_e===void 0||!_e.startsWith("#"))break e;return React.createElement("a",Object.assign({href:_e},_))}e:{if(_e===void 0||!/^[a-z]+:/.test(_e))break e;return React.createElement("a",Object.assign({href:_e},_))}}return React.createElement(o.Link,Object.assign({},e))}}function getLink(){return{Link:Link$1}}function getLanguageBestApprox(o){const{languages:e,languageLike:s}=o;e:{const a=e.find(d=>d.toLowerCase()===s.toLowerCase());if(a===void 0)break e;return a}e:{const a=s.split("-")[0].toLowerCase(),d=e.find(b=>b.toLowerCase().includes(a));if(d===void 0)break e;return d}}let useLang_glob=()=>"fr";function setUseLang(o){useLang_glob=o.useLang}function useLang(){return useLang_glob()}function createComponentI18nApi(o){const{componentName:e,frMessages:s}=o,a={fr:s};function d(){const _=useLang(),_e=reactExports.useMemo(()=>{const st=getLanguageBestApprox({languages:Object.keys(a),languageLike:_});return st??"fr"},[_]);function ot(st,ct){var ft;const mt=(ft=a[_e][st])!==null&&ft!==void 0?ft:a.fr[st];return ct===void 0?mt:mt(ct)}return{t:ot}}function b(_){const{lang:_e,messages:ot}=_;Object.entries(ot).filter(([,st])=>st!==void 0).forEach(([st,ct])=>{var ft,mt;return((ft=(mt=a)[_e])!==null&&ft!==void 0?ft:mt[_e]={})[st]=ct})}return{useTranslation:d,[`add${capitalize(e)}Translations`]:b}}function startReactDsfr(o){const{defaultColorScheme:e,verbose:s=!1,Link:a,useLang:d,nonce:b,trustedTypesPolicyName:_="react-dsfr"}=o;a!==void 0&&setLink({Link:a}),d!==void 0&&setUseLang({useLang:d}),assert$1(b!=="","nonce cannot be an empty string");const _e=b!==void 0;_e&&(window.ssrNonce=b),start$1({defaultColorScheme:e,verbose:s,doCheckNonce:_e,trustedTypesPolicyName:_,nextParams:void 0})}var reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function e(cn,fo){var Fn=cn.length;cn.push(fo);e:for(;0<Fn;){var Tn=Fn-1>>>1,qn=cn[Tn];if(0<d(qn,fo))cn[Tn]=fo,cn[Fn]=qn,Fn=Tn;else break e}}function s(cn){return cn.length===0?null:cn[0]}function a(cn){if(cn.length===0)return null;var fo=cn[0],Fn=cn.pop();if(Fn!==fo){cn[0]=Fn;e:for(var Tn=0,qn=cn.length,nr=qn>>>1;Tn<nr;){var oo=2*(Tn+1)-1,Mo=cn[oo],Dn=oo+1,xo=cn[Dn];if(0>d(Mo,Fn))Dn<qn&&0>d(xo,Mo)?(cn[Tn]=xo,cn[Dn]=Fn,Tn=Dn):(cn[Tn]=Mo,cn[oo]=Fn,Tn=oo);else if(Dn<qn&&0>d(xo,Fn))cn[Tn]=xo,cn[Dn]=Fn,Tn=Dn;else break e}}return fo}function d(cn,fo){var Fn=cn.sortIndex-fo.sortIndex;return Fn!==0?Fn:cn.id-fo.id}if(typeof performance=="object"&&typeof performance.now=="function"){var b=performance;o.unstable_now=function(){return b.now()}}else{var _=Date,_e=_.now();o.unstable_now=function(){return _.now()-_e}}var ot=[],st=[],ct=1,ft=null,mt=3,bt=!1,wt=!1,Ct=!1,Rt=typeof setTimeout=="function"?setTimeout:null,It=typeof clearTimeout=="function"?clearTimeout:null,Pt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Tt(cn){for(var fo=s(st);fo!==null;){if(fo.callback===null)a(st);else if(fo.startTime<=cn)a(st),fo.sortIndex=fo.expirationTime,e(ot,fo);else break;fo=s(st)}}function Gt(cn){if(Ct=!1,Tt(cn),!wt)if(s(ot)!==null)wt=!0,Mt(Jt);else{var fo=s(st);fo!==null&&Hn(Gt,fo.startTime-cn)}}function Jt(cn,fo){wt=!1,Ct&&(Ct=!1,It(Qt),Qt=-1),bt=!0;var Fn=mt;try{for(Tt(fo),ft=s(ot);ft!==null&&(!(ft.expirationTime>fo)||cn&&!ln());){var Tn=ft.callback;if(typeof Tn=="function"){ft.callback=null,mt=ft.priorityLevel;var qn=Tn(ft.expirationTime<=fo);fo=o.unstable_now(),typeof qn=="function"?ft.callback=qn:ft===s(ot)&&a(ot),Tt(fo)}else a(ot);ft=s(ot)}if(ft!==null)var nr=!0;else{var oo=s(st);oo!==null&&Hn(Gt,oo.startTime-fo),nr=!1}return nr}finally{ft=null,mt=Fn,bt=!1}}var qt=!1,Nt=null,Qt=-1,fn=5,Mn=-1;function ln(){return!(o.unstable_now()-Mn<fn)}function Wt(){if(Nt!==null){var cn=o.unstable_now();Mn=cn;var fo=!0;try{fo=Nt(!0,cn)}finally{fo?so():(qt=!1,Nt=null)}}else qt=!1}var so;if(typeof Pt=="function")so=function(){Pt(Wt)};else if(typeof MessageChannel<"u"){var pn=new MessageChannel,hn=pn.port2;pn.port1.onmessage=Wt,so=function(){hn.postMessage(null)}}else so=function(){Rt(Wt,0)};function Mt(cn){Nt=cn,qt||(qt=!0,so())}function Hn(cn,fo){Qt=Rt(function(){cn(o.unstable_now())},fo)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(cn){cn.callback=null},o.unstable_continueExecution=function(){wt||bt||(wt=!0,Mt(Jt))},o.unstable_forceFrameRate=function(cn){0>cn||125<cn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fn=0<cn?Math.floor(1e3/cn):5},o.unstable_getCurrentPriorityLevel=function(){return mt},o.unstable_getFirstCallbackNode=function(){return s(ot)},o.unstable_next=function(cn){switch(mt){case 1:case 2:case 3:var fo=3;break;default:fo=mt}var Fn=mt;mt=fo;try{return cn()}finally{mt=Fn}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(cn,fo){switch(cn){case 1:case 2:case 3:case 4:case 5:break;default:cn=3}var Fn=mt;mt=cn;try{return fo()}finally{mt=Fn}},o.unstable_scheduleCallback=function(cn,fo,Fn){var Tn=o.unstable_now();switch(typeof Fn=="object"&&Fn!==null?(Fn=Fn.delay,Fn=typeof Fn=="number"&&0<Fn?Tn+Fn:Tn):Fn=Tn,cn){case 1:var qn=-1;break;case 2:qn=250;break;case 5:qn=1073741823;break;case 4:qn=1e4;break;default:qn=5e3}return qn=Fn+qn,cn={id:ct++,callback:fo,priorityLevel:cn,startTime:Fn,expirationTime:qn,sortIndex:-1},Fn>Tn?(cn.sortIndex=Fn,e(st,cn),s(ot)===null&&cn===s(st)&&(Ct?(It(Qt),Qt=-1):Ct=!0,Hn(Gt,Fn-Tn))):(cn.sortIndex=qn,e(ot,cn),wt||bt||(wt=!0,Mt(Jt))),cn},o.unstable_shouldYield=ln,o.unstable_wrapCallback=function(cn){var fo=mt;return function(){var Fn=mt;mt=fo;try{return cn.apply(this,arguments)}finally{mt=Fn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(o){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+o,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+o+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(o,e){ha(o,e),ha(o+"Capture",e)}function ha(o,e){for(ea[o]=e,o=0;o<e.length;o++)da.add(e[o])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(o){return ja.call(ma,o)?!0:ja.call(la,o)?!1:ka.test(o)?ma[o]=!0:(la[o]=!0,!1)}function pa(o,e,s,a){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function qa(o,e,s,a){if(e===null||typeof e>"u"||pa(o,e,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v(o,e,s,a,d,b,_){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=a,this.attributeNamespace=d,this.mustUseProperty=s,this.propertyName=o,this.type=e,this.sanitizeURL=b,this.removeEmptyString=_}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){z[o]=new v(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var e=o[0];z[e]=new v(e,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){z[o]=new v(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){z[o]=new v(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){z[o]=new v(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){z[o]=new v(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){z[o]=new v(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){z[o]=new v(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){z[o]=new v(o,5,!1,o.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var e=o.replace(ra,sa);z[e]=new v(e,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var e=o.replace(ra,sa);z[e]=new v(e,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var e=o.replace(ra,sa);z[e]=new v(e,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){z[o]=new v(o,1,!1,o.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){z[o]=new v(o,1,!1,o.toLowerCase(),null,!0,!0)});function ta$1(o,e,s,a){var d=z.hasOwnProperty(e)?z[e]:null;(d!==null?d.type!==0:a||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,s,d,a)&&(s=null),a||d===null?oa(e)&&(s===null?o.removeAttribute(e):o.setAttribute(e,""+s)):d.mustUseProperty?o[d.propertyName]=s===null?d.type===3?!1:"":s:(e=d.attributeName,a=d.attributeNamespace,s===null?o.removeAttribute(e):(d=d.type,s=d===3||d===4&&s===!0?"":""+s,a?o.setAttributeNS(a,e,s):o.setAttribute(e,s))))}var ua$1=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(o){return o===null||typeof o!="object"?null:(o=Ja&&o[Ja]||o["@@iterator"],typeof o=="function"?o:null)}var A$1=Object.assign,La;function Ma(o){if(La===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+o}var Na=!1;function Oa(o,e){if(!o||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(st){var a=st}Reflect.construct(o,[],e)}else{try{e.call()}catch(st){a=st}o.call(e.prototype)}else{try{throw Error()}catch(st){a=st}o()}}catch(st){if(st&&a&&typeof st.stack=="string"){for(var d=st.stack.split(`
`),b=a.stack.split(`
`),_=d.length-1,_e=b.length-1;1<=_&&0<=_e&&d[_]!==b[_e];)_e--;for(;1<=_&&0<=_e;_--,_e--)if(d[_]!==b[_e]){if(_!==1||_e!==1)do if(_--,_e--,0>_e||d[_]!==b[_e]){var ot=`
`+d[_].replace(" at new "," at ");return o.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",o.displayName)),ot}while(1<=_&&0<=_e);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(o=o?o.displayName||o.name:"")?Ma(o):""}function Pa(o){switch(o.tag){case 5:return Ma(o.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return o=Oa(o.type,!1),o;case 11:return o=Oa(o.type.render,!1),o;case 1:return o=Oa(o.type,!0),o;default:return""}}function Qa(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ca:return(o.displayName||"Context")+".Consumer";case Ba:return(o._context.displayName||"Context")+".Provider";case Da:var e=o.render;return o=o.displayName,o||(o=e.displayName||e.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ga:return e=o.displayName||null,e!==null?e:Qa(o.type)||"Memo";case Ha:e=o._payload,o=o._init;try{return Qa(o(e))}catch{}}return null}function Ra(o){var e=o.type;switch(o.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=e.render,o=o.displayName||o.name||"",e.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ta(o){var e=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(o){var e=Ta(o)?"checked":"value",s=Object.getOwnPropertyDescriptor(o.constructor.prototype,e),a=""+o[e];if(!o.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,b=s.set;return Object.defineProperty(o,e,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,b.call(this,_)}}),Object.defineProperty(o,e,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){o._valueTracker=null,delete o[e]}}}}function Va(o){o._valueTracker||(o._valueTracker=Ua(o))}function Wa(o){if(!o)return!1;var e=o._valueTracker;if(!e)return!0;var s=e.getValue(),a="";return o&&(a=Ta(o)?o.checked?"true":"false":o.value),o=a,o!==s?(e.setValue(o),!0):!1}function Xa(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ya(o,e){var s=e.checked;return A$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??o._wrapperState.initialChecked})}function Za(o,e){var s=e.defaultValue==null?"":e.defaultValue,a=e.checked!=null?e.checked:e.defaultChecked;s=Sa(e.value!=null?e.value:s),o._wrapperState={initialChecked:a,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(o,e){e=e.checked,e!=null&&ta$1(o,"checked",e,!1)}function bb(o,e){ab(o,e);var s=Sa(e.value),a=e.type;if(s!=null)a==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+s):o.value!==""+s&&(o.value=""+s);else if(a==="submit"||a==="reset"){o.removeAttribute("value");return}e.hasOwnProperty("value")?cb(o,e.type,s):e.hasOwnProperty("defaultValue")&&cb(o,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(o.defaultChecked=!!e.defaultChecked)}function db(o,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var a=e.type;if(!(a!=="submit"&&a!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+o._wrapperState.initialValue,s||e===o.value||(o.value=e),o.defaultValue=e}s=o.name,s!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,s!==""&&(o.name=s)}function cb(o,e,s){(e!=="number"||Xa(o.ownerDocument)!==o)&&(s==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+s&&(o.defaultValue=""+s))}var eb=Array.isArray;function fb(o,e,s,a){if(o=o.options,e){e={};for(var d=0;d<s.length;d++)e["$"+s[d]]=!0;for(s=0;s<o.length;s++)d=e.hasOwnProperty("$"+o[s].value),o[s].selected!==d&&(o[s].selected=d),d&&a&&(o[s].defaultSelected=!0)}else{for(s=""+Sa(s),e=null,d=0;d<o.length;d++){if(o[d].value===s){o[d].selected=!0,a&&(o[d].defaultSelected=!0);return}e!==null||o[d].disabled||(e=o[d])}e!==null&&(e.selected=!0)}}function gb(o,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A$1({},e,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function hb(o,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(p(92));if(eb(s)){if(1<s.length)throw Error(p(93));s=s[0]}e=s}e==null&&(e=""),s=e}o._wrapperState={initialValue:Sa(s)}}function ib(o,e){var s=Sa(e.value),a=Sa(e.defaultValue);s!=null&&(s=""+s,s!==o.value&&(o.value=s),e.defaultValue==null&&o.defaultValue!==s&&(o.defaultValue=s)),a!=null&&(o.defaultValue=""+a)}function jb(o){var e=o.textContent;e===o._wrapperState.initialValue&&e!==""&&e!==null&&(o.value=e)}function kb(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(o,e){return o==null||o==="http://www.w3.org/1999/xhtml"?kb(e):o==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var mb,nb=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,a,d){MSApp.execUnsafeLocalFunction(function(){return o(e,s,a,d)})}:o}(function(o,e){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;e.firstChild;)o.appendChild(e.firstChild)}});function ob(o,e){if(e){var s=o.firstChild;if(s&&s===o.lastChild&&s.nodeType===3){s.nodeValue=e;return}}o.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(o){qb.forEach(function(e){e=e+o.charAt(0).toUpperCase()+o.substring(1),pb[e]=pb[o]})});function rb(o,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||pb.hasOwnProperty(o)&&pb[o]?(""+e).trim():e+"px"}function sb(o,e){o=o.style;for(var s in e)if(e.hasOwnProperty(s)){var a=s.indexOf("--")===0,d=rb(s,e[s],a);s==="float"&&(s="cssFloat"),a?o.setProperty(s,d):o[s]=d}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(o,e){if(e){if(tb[o]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,o));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(o,e){if(o.indexOf("-")===-1)return typeof e.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yb=null,zb=null,Ab=null;function Bb(o){if(o=Cb(o)){if(typeof yb!="function")throw Error(p(280));var e=o.stateNode;e&&(e=Db(e),yb(o.stateNode,o.type,e))}}function Eb(o){zb?Ab?Ab.push(o):Ab=[o]:zb=o}function Fb(){if(zb){var o=zb,e=Ab;if(Ab=zb=null,Bb(o),e)for(o=0;o<e.length;o++)Bb(e[o])}}function Gb(o,e){return o(e)}function Hb(){}var Ib=!1;function Jb(o,e,s){if(Ib)return o(e,s);Ib=!0;try{return Gb(o,e,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(o,e){var s=o.stateNode;if(s===null)return null;var a=Db(s);if(a===null)return null;s=a[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(o=o.type,a=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!a;break e;default:o=!1}if(o)return null;if(s&&typeof s!="function")throw Error(p(231,e,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(o,e,s,a,d,b,_,_e,ot){var st=Array.prototype.slice.call(arguments,3);try{e.apply(s,st)}catch(ct){this.onError(ct)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(o){Ob=!0,Pb=o}};function Tb(o,e,s,a,d,b,_,_e,ot){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(o,e,s,a,d,b,_,_e,ot){if(Tb.apply(this,arguments),Ob){if(Ob){var st=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=st)}}function Vb(o){var e=o,s=o;if(o.alternate)for(;e.return;)e=e.return;else{o=e;do e=o,e.flags&4098&&(s=e.return),o=e.return;while(o)}return e.tag===3?s:null}function Wb(o){if(o.tag===13){var e=o.memoizedState;if(e===null&&(o=o.alternate,o!==null&&(e=o.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(o){if(Vb(o)!==o)throw Error(p(188))}function Yb(o){var e=o.alternate;if(!e){if(e=Vb(o),e===null)throw Error(p(188));return e!==o?null:o}for(var s=o,a=e;;){var d=s.return;if(d===null)break;var b=d.alternate;if(b===null){if(a=d.return,a!==null){s=a;continue}break}if(d.child===b.child){for(b=d.child;b;){if(b===s)return Xb(d),o;if(b===a)return Xb(d),e;b=b.sibling}throw Error(p(188))}if(s.return!==a.return)s=d,a=b;else{for(var _=!1,_e=d.child;_e;){if(_e===s){_=!0,s=d,a=b;break}if(_e===a){_=!0,a=d,s=b;break}_e=_e.sibling}if(!_){for(_e=b.child;_e;){if(_e===s){_=!0,s=b,a=d;break}if(_e===a){_=!0,a=b,s=d;break}_e=_e.sibling}if(!_)throw Error(p(189))}}if(s.alternate!==a)throw Error(p(190))}if(s.tag!==3)throw Error(p(188));return s.stateNode.current===s?o:e}function Zb(o){return o=Yb(o),o!==null?$b(o):null}function $b(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var e=$b(o);if(e!==null)return e;o=o.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(o){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,o,void 0,(o.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(o){return o>>>=0,o===0?32:31-(pc(o)/qc|0)|0}var rc=64,sc=4194304;function tc(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function uc(o,e){var s=o.pendingLanes;if(s===0)return 0;var a=0,d=o.suspendedLanes,b=o.pingedLanes,_=s&268435455;if(_!==0){var _e=_&~d;_e!==0?a=tc(_e):(b&=_,b!==0&&(a=tc(b)))}else _=s&~d,_!==0?a=tc(_):b!==0&&(a=tc(b));if(a===0)return 0;if(e!==0&&e!==a&&!(e&d)&&(d=a&-a,b=e&-e,d>=b||d===16&&(b&4194240)!==0))return e;if(a&4&&(a|=s&16),e=o.entangledLanes,e!==0)for(o=o.entanglements,e&=a;0<e;)s=31-oc(e),d=1<<s,a|=o[s],e&=~d;return a}function vc(o,e){switch(o){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(o,e){for(var s=o.suspendedLanes,a=o.pingedLanes,d=o.expirationTimes,b=o.pendingLanes;0<b;){var _=31-oc(b),_e=1<<_,ot=d[_];ot===-1?(!(_e&s)||_e&a)&&(d[_]=vc(_e,e)):ot<=e&&(o.expiredLanes|=_e),b&=~_e}}function xc(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function yc(){var o=rc;return rc<<=1,!(rc&4194240)&&(rc=64),o}function zc(o){for(var e=[],s=0;31>s;s++)e.push(o);return e}function Ac(o,e,s){o.pendingLanes|=e,e!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,e=31-oc(e),o[e]=s}function Bc(o,e){var s=o.pendingLanes&~e;o.pendingLanes=e,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=e,o.mutableReadLanes&=e,o.entangledLanes&=e,e=o.entanglements;var a=o.eventTimes;for(o=o.expirationTimes;0<s;){var d=31-oc(s),b=1<<d;e[d]=0,a[d]=-1,o[d]=-1,s&=~b}}function Cc(o,e){var s=o.entangledLanes|=e;for(o=o.entanglements;s;){var a=31-oc(s),d=1<<a;d&e|o[a]&e&&(o[a]|=e),s&=~d}}var C=0;function Dc(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(o,e){switch(o){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(o,e,s,a,d,b){return o===null||o.nativeEvent!==b?(o={blockedOn:e,domEventName:s,eventSystemFlags:a,nativeEvent:b,targetContainers:[d]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),o):(o.eventSystemFlags|=a,e=o.targetContainers,d!==null&&e.indexOf(d)===-1&&e.push(d),o)}function Uc(o,e,s,a,d){switch(e){case"focusin":return Lc=Tc(Lc,o,e,s,a,d),!0;case"dragenter":return Mc=Tc(Mc,o,e,s,a,d),!0;case"mouseover":return Nc=Tc(Nc,o,e,s,a,d),!0;case"pointerover":var b=d.pointerId;return Oc.set(b,Tc(Oc.get(b)||null,o,e,s,a,d)),!0;case"gotpointercapture":return b=d.pointerId,Pc.set(b,Tc(Pc.get(b)||null,o,e,s,a,d)),!0}return!1}function Vc(o){var e=Wc(o.target);if(e!==null){var s=Vb(e);if(s!==null){if(e=s.tag,e===13){if(e=Wb(s),e!==null){o.blockedOn=e,Ic(o.priority,function(){Gc(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){o.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xc(o){if(o.blockedOn!==null)return!1;for(var e=o.targetContainers;0<e.length;){var s=Yc(o.domEventName,o.eventSystemFlags,e[0],o.nativeEvent);if(s===null){s=o.nativeEvent;var a=new s.constructor(s.type,s);wb=a,s.target.dispatchEvent(a),wb=null}else return e=Cb(s),e!==null&&Fc(e),o.blockedOn=s,!1;e.shift()}return!0}function Zc(o,e,s){Xc(o)&&s.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(o,e){o.blockedOn===e&&(o.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(o){function e(d){return ad(d,o)}if(0<Kc.length){ad(Kc[0],o);for(var s=1;s<Kc.length;s++){var a=Kc[s];a.blockedOn===o&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,o),Mc!==null&&ad(Mc,o),Nc!==null&&ad(Nc,o),Oc.forEach(e),Pc.forEach(e),s=0;s<Qc.length;s++)a=Qc[s],a.blockedOn===o&&(a.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(o,e,s,a){var d=C,b=cd.transition;cd.transition=null;try{C=1,fd(o,e,s,a)}finally{C=d,cd.transition=b}}function gd(o,e,s,a){var d=C,b=cd.transition;cd.transition=null;try{C=4,fd(o,e,s,a)}finally{C=d,cd.transition=b}}function fd(o,e,s,a){if(dd){var d=Yc(o,e,s,a);if(d===null)hd(o,e,a,id,s),Sc(o,a);else if(Uc(d,o,e,s,a))a.stopPropagation();else if(Sc(o,a),e&4&&-1<Rc.indexOf(o)){for(;d!==null;){var b=Cb(d);if(b!==null&&Ec(b),b=Yc(o,e,s,a),b===null&&hd(o,e,a,id,s),b===d)break;d=b}d!==null&&a.stopPropagation()}else hd(o,e,a,null,s)}}var id=null;function Yc(o,e,s,a){if(id=null,o=xb(a),o=Wc(o),o!==null)if(e=Vb(o),e===null)o=null;else if(s=e.tag,s===13){if(o=Wb(e),o!==null)return o;o=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;o=null}else e!==o&&(o=null);return id=o,null}function jd(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var o,e=ld,s=e.length,a,d="value"in kd?kd.value:kd.textContent,b=d.length;for(o=0;o<s&&e[o]===d[o];o++);var _=s-o;for(a=1;a<=_&&e[s-a]===d[b-a];a++);return md=d.slice(o,1<a?1-a:void 0)}function od(o){var e=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&e===13&&(o=13)):o=e,o===10&&(o=13),32<=o||o===13?o:0}function pd(){return!0}function qd(){return!1}function rd(o){function e(s,a,d,b,_){this._reactName=s,this._targetInst=d,this.type=a,this.nativeEvent=b,this.target=_,this.currentTarget=null;for(var _e in o)o.hasOwnProperty(_e)&&(s=o[_e],this[_e]=s?s(b):b[_e]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==yd&&(yd&&o.type==="mousemove"?(wd=o.screenX-yd.screenX,xd=o.screenY-yd.screenY):xd=wd=0,yd=o),wd)},movementY:function(o){return"movementY"in o?o.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(o){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(o):(o=Od[o])?!!e[o]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(o){if(o.key){var e=Md[o.key]||o.key;if(e!=="Unidentified")return e}return o.type==="keypress"?(o=od(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Nd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(o){return o.type==="keypress"?od(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?od(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(o,e){switch(o){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ie$2=!1;function je(o,e){switch(o){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return o=e.data,o===ee&&fe?null:o;default:return null}}function ke(o,e){if(ie$2)return o==="compositionend"||!ae&&ge(o,e)?(o=nd(),md=ld=kd=null,ie$2=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(o){var e=o&&o.nodeName&&o.nodeName.toLowerCase();return e==="input"?!!le[o.type]:e==="textarea"}function ne(o,e,s,a){Eb(a),e=oe(e,"onChange"),0<e.length&&(s=new td("onChange","change",null,s,a),o.push({event:s,listeners:e}))}var pe=null,qe=null;function re(o){se(o,0)}function te(o){var e=ue(o);if(Wa(e))return o}function ve(o,e){if(o==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(o){if(o.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,o,xb(o)),Jb(re,e)}}function Ce(o,e,s){o==="focusin"?(Ae(),pe=e,qe=s,pe.attachEvent("onpropertychange",Be)):o==="focusout"&&Ae()}function De(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return te(qe)}function Ee(o,e){if(o==="click")return te(e)}function Fe(o,e){if(o==="input"||o==="change")return te(e)}function Ge(o,e){return o===e&&(o!==0||1/o===1/e)||o!==o&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(o,e){if(He(o,e))return!0;if(typeof o!="object"||o===null||typeof e!="object"||e===null)return!1;var s=Object.keys(o),a=Object.keys(e);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var d=s[a];if(!ja.call(e,d)||!He(o[d],e[d]))return!1}return!0}function Je(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ke(o,e){var s=Je(o);o=0;for(var a;s;){if(s.nodeType===3){if(a=o+s.textContent.length,o<=e&&a>=e)return{node:s,offset:e-o};o=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(o,e){return o&&e?o===e?!0:o&&o.nodeType===3?!1:e&&e.nodeType===3?Le(o,e.parentNode):"contains"in o?o.contains(e):o.compareDocumentPosition?!!(o.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var o=window,e=Xa();e instanceof o.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)o=e.contentWindow;else break;e=Xa(o.document)}return e}function Ne(o){var e=o&&o.nodeName&&o.nodeName.toLowerCase();return e&&(e==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||e==="textarea"||o.contentEditable==="true")}function Oe(o){var e=Me(),s=o.focusedElem,a=o.selectionRange;if(e!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(a!==null&&Ne(s)){if(e=a.start,o=a.end,o===void 0&&(o=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(o,s.value.length);else if(o=(e=s.ownerDocument||document)&&e.defaultView||window,o.getSelection){o=o.getSelection();var d=s.textContent.length,b=Math.min(a.start,d);a=a.end===void 0?b:Math.min(a.end,d),!o.extend&&b>a&&(d=a,a=b,b=d),d=Ke(s,b);var _=Ke(s,a);d&&_&&(o.rangeCount!==1||o.anchorNode!==d.node||o.anchorOffset!==d.offset||o.focusNode!==_.node||o.focusOffset!==_.offset)&&(e=e.createRange(),e.setStart(d.node,d.offset),o.removeAllRanges(),b>a?(o.addRange(e),o.extend(_.node,_.offset)):(e.setEnd(_.node,_.offset),o.addRange(e)))}}for(e=[],o=s;o=o.parentNode;)o.nodeType===1&&e.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)o=e[s],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(o,e,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(e=new td("onSelect","select",null,e,s),o.push({event:e,listeners:a}),e.target=Qe)))}function Ve(o,e){var s={};return s[o.toLowerCase()]=e.toLowerCase(),s["Webkit"+o]="webkit"+e,s["Moz"+o]="moz"+e,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(o){if(Xe[o])return Xe[o];if(!We[o])return o;var e=We[o],s;for(s in e)if(e.hasOwnProperty(s)&&s in Ye)return Xe[o]=e[s];return o}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(o,e){df.set(o,e),fa(e,[o])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(o,e,s){var a=o.type||"unknown-event";o.currentTarget=s,Ub(a,e,void 0,o),o.currentTarget=null}function se(o,e){e=(e&4)!==0;for(var s=0;s<o.length;s++){var a=o[s],d=a.event;a=a.listeners;e:{var b=void 0;if(e)for(var _=a.length-1;0<=_;_--){var _e=a[_],ot=_e.instance,st=_e.currentTarget;if(_e=_e.listener,ot!==b&&d.isPropagationStopped())break e;nf(d,_e,st),b=ot}else for(_=0;_<a.length;_++){if(_e=a[_],ot=_e.instance,st=_e.currentTarget,_e=_e.listener,ot!==b&&d.isPropagationStopped())break e;nf(d,_e,st),b=ot}}}if(Qb)throw o=Rb,Qb=!1,Rb=null,o}function D(o,e){var s=e[of];s===void 0&&(s=e[of]=new Set);var a=o+"__bubble";s.has(a)||(pf(e,o,2,!1),s.add(a))}function qf(o,e,s){var a=0;e&&(a|=4),pf(s,o,a,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(o){if(!o[rf]){o[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,o),qf(s,!0,o))});var e=o.nodeType===9?o:o.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(o,e,s,a){switch(jd(e)){case 1:var d=ed;break;case 4:d=gd;break;default:d=fd}s=d.bind(null,e,s,o),d=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(d=!0),a?d!==void 0?o.addEventListener(e,s,{capture:!0,passive:d}):o.addEventListener(e,s,!0):d!==void 0?o.addEventListener(e,s,{passive:d}):o.addEventListener(e,s,!1)}function hd(o,e,s,a,d){var b=a;if(!(e&1)&&!(e&2)&&a!==null)e:for(;;){if(a===null)return;var _=a.tag;if(_===3||_===4){var _e=a.stateNode.containerInfo;if(_e===d||_e.nodeType===8&&_e.parentNode===d)break;if(_===4)for(_=a.return;_!==null;){var ot=_.tag;if((ot===3||ot===4)&&(ot=_.stateNode.containerInfo,ot===d||ot.nodeType===8&&ot.parentNode===d))return;_=_.return}for(;_e!==null;){if(_=Wc(_e),_===null)return;if(ot=_.tag,ot===5||ot===6){a=b=_;continue e}_e=_e.parentNode}}a=a.return}Jb(function(){var st=b,ct=xb(s),ft=[];e:{var mt=df.get(o);if(mt!==void 0){var bt=td,wt=o;switch(o){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":bt=Rd;break;case"focusin":wt="focus",bt=Fd;break;case"focusout":wt="blur",bt=Fd;break;case"beforeblur":case"afterblur":bt=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=Vd;break;case $e:case af:case bf:bt=Hd;break;case cf:bt=Xd;break;case"scroll":bt=vd;break;case"wheel":bt=Zd;break;case"copy":case"cut":case"paste":bt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=Td}var Ct=(e&4)!==0,Rt=!Ct&&o==="scroll",It=Ct?mt!==null?mt+"Capture":null:mt;Ct=[];for(var Pt=st,Tt;Pt!==null;){Tt=Pt;var Gt=Tt.stateNode;if(Tt.tag===5&&Gt!==null&&(Tt=Gt,It!==null&&(Gt=Kb(Pt,It),Gt!=null&&Ct.push(tf(Pt,Gt,Tt)))),Rt)break;Pt=Pt.return}0<Ct.length&&(mt=new bt(mt,wt,null,s,ct),ft.push({event:mt,listeners:Ct}))}}if(!(e&7)){e:{if(mt=o==="mouseover"||o==="pointerover",bt=o==="mouseout"||o==="pointerout",mt&&s!==wb&&(wt=s.relatedTarget||s.fromElement)&&(Wc(wt)||wt[uf]))break e;if((bt||mt)&&(mt=ct.window===ct?ct:(mt=ct.ownerDocument)?mt.defaultView||mt.parentWindow:window,bt?(wt=s.relatedTarget||s.toElement,bt=st,wt=wt?Wc(wt):null,wt!==null&&(Rt=Vb(wt),wt!==Rt||wt.tag!==5&&wt.tag!==6)&&(wt=null)):(bt=null,wt=st),bt!==wt)){if(Ct=Bd,Gt="onMouseLeave",It="onMouseEnter",Pt="mouse",(o==="pointerout"||o==="pointerover")&&(Ct=Td,Gt="onPointerLeave",It="onPointerEnter",Pt="pointer"),Rt=bt==null?mt:ue(bt),Tt=wt==null?mt:ue(wt),mt=new Ct(Gt,Pt+"leave",bt,s,ct),mt.target=Rt,mt.relatedTarget=Tt,Gt=null,Wc(ct)===st&&(Ct=new Ct(It,Pt+"enter",wt,s,ct),Ct.target=Tt,Ct.relatedTarget=Rt,Gt=Ct),Rt=Gt,bt&&wt)t:{for(Ct=bt,It=wt,Pt=0,Tt=Ct;Tt;Tt=vf(Tt))Pt++;for(Tt=0,Gt=It;Gt;Gt=vf(Gt))Tt++;for(;0<Pt-Tt;)Ct=vf(Ct),Pt--;for(;0<Tt-Pt;)It=vf(It),Tt--;for(;Pt--;){if(Ct===It||It!==null&&Ct===It.alternate)break t;Ct=vf(Ct),It=vf(It)}Ct=null}else Ct=null;bt!==null&&wf(ft,mt,bt,Ct,!1),wt!==null&&Rt!==null&&wf(ft,Rt,wt,Ct,!0)}}e:{if(mt=st?ue(st):window,bt=mt.nodeName&&mt.nodeName.toLowerCase(),bt==="select"||bt==="input"&&mt.type==="file")var Jt=ve;else if(me(mt))if(we)Jt=Fe;else{Jt=De;var qt=Ce}else(bt=mt.nodeName)&&bt.toLowerCase()==="input"&&(mt.type==="checkbox"||mt.type==="radio")&&(Jt=Ee);if(Jt&&(Jt=Jt(o,st))){ne(ft,Jt,s,ct);break e}qt&&qt(o,mt,st),o==="focusout"&&(qt=mt._wrapperState)&&qt.controlled&&mt.type==="number"&&cb(mt,"number",mt.value)}switch(qt=st?ue(st):window,o){case"focusin":(me(qt)||qt.contentEditable==="true")&&(Qe=qt,Re=st,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ft,s,ct);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ft,s,ct)}var Nt;if(ae)e:{switch(o){case"compositionstart":var Qt="onCompositionStart";break e;case"compositionend":Qt="onCompositionEnd";break e;case"compositionupdate":Qt="onCompositionUpdate";break e}Qt=void 0}else ie$2?ge(o,s)&&(Qt="onCompositionEnd"):o==="keydown"&&s.keyCode===229&&(Qt="onCompositionStart");Qt&&(de&&s.locale!=="ko"&&(ie$2||Qt!=="onCompositionStart"?Qt==="onCompositionEnd"&&ie$2&&(Nt=nd()):(kd=ct,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),qt=oe(st,Qt),0<qt.length&&(Qt=new Ld(Qt,o,null,s,ct),ft.push({event:Qt,listeners:qt}),Nt?Qt.data=Nt:(Nt=he(s),Nt!==null&&(Qt.data=Nt)))),(Nt=ce?je(o,s):ke(o,s))&&(st=oe(st,"onBeforeInput"),0<st.length&&(ct=new Ld("onBeforeInput","beforeinput",null,s,ct),ft.push({event:ct,listeners:st}),ct.data=Nt))}se(ft,e)})}function tf(o,e,s){return{instance:o,listener:e,currentTarget:s}}function oe(o,e){for(var s=e+"Capture",a=[];o!==null;){var d=o,b=d.stateNode;d.tag===5&&b!==null&&(d=b,b=Kb(o,s),b!=null&&a.unshift(tf(o,b,d)),b=Kb(o,e),b!=null&&a.push(tf(o,b,d))),o=o.return}return a}function vf(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function wf(o,e,s,a,d){for(var b=e._reactName,_=[];s!==null&&s!==a;){var _e=s,ot=_e.alternate,st=_e.stateNode;if(ot!==null&&ot===a)break;_e.tag===5&&st!==null&&(_e=st,d?(ot=Kb(s,b),ot!=null&&_.unshift(tf(s,ot,_e))):d||(ot=Kb(s,b),ot!=null&&_.push(tf(s,ot,_e)))),s=s.return}_.length!==0&&o.push({event:e,listeners:_})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(o){return(typeof o=="string"?o:""+o).replace(xf,`
`).replace(yf,"")}function Af(o,e,s){if(e=zf(e),zf(o)!==e&&s)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(o,e){return o==="textarea"||o==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(o){return Hf.resolve(null).then(o).catch(If)}:Ff;function If(o){setTimeout(function(){throw o})}function Kf(o,e){var s=e,a=0;do{var d=s.nextSibling;if(o.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(a===0){o.removeChild(d),bd(e);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=d}while(s);bd(e)}function Lf(o){for(;o!=null;o=o.nextSibling){var e=o.nodeType;if(e===1||e===3)break;if(e===8){if(e=o.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return o}function Mf(o){o=o.previousSibling;for(var e=0;o;){if(o.nodeType===8){var s=o.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return o;e--}else s==="/$"&&e++}o=o.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(o){var e=o[Of];if(e)return e;for(var s=o.parentNode;s;){if(e=s[uf]||s[Of]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(o=Mf(o);o!==null;){if(s=o[Of])return s;o=Mf(o)}return e}o=s,s=o.parentNode}return null}function Cb(o){return o=o[Of]||o[uf],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ue(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(p(33))}function Db(o){return o[Pf]||null}var Sf=[],Tf=-1;function Uf(o){return{current:o}}function E(o){0>Tf||(o.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(o,e){Tf++,Sf[Tf]=o.current,o.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(o,e){var s=o.type.contextTypes;if(!s)return Vf;var a=o.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===e)return a.__reactInternalMemoizedMaskedChildContext;var d={},b;for(b in s)d[b]=e[b];return a&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=e,o.__reactInternalMemoizedMaskedChildContext=d),d}function Zf(o){return o=o.childContextTypes,o!=null}function $f(){E(Wf),E(H)}function ag(o,e,s){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,s)}function bg(o,e,s){var a=o.stateNode;if(e=e.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var d in a)if(!(d in e))throw Error(p(108,Ra(o)||"Unknown",d));return A$1({},s,a)}function cg(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,o),G(Wf,Wf.current),!0}function dg(o,e,s){var a=o.stateNode;if(!a)throw Error(p(169));s?(o=bg(o,e,Xf),a.__reactInternalMemoizedMergedChildContext=o,E(Wf),E(H),G(H,o)):E(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(o){eg===null?eg=[o]:eg.push(o)}function ig(o){fg=!0,hg(o)}function jg(){if(!gg&&eg!==null){gg=!0;var o=0,e=C;try{var s=eg;for(C=1;o<s.length;o++){var a=s[o];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(d){throw eg!==null&&(eg=eg.slice(o+1)),ac(fc,jg),d}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(o,e){kg[lg++]=ng,kg[lg++]=mg,mg=o,ng=e}function ug(o,e,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=o;var a=rg;o=sg;var d=32-oc(a)-1;a&=~(1<<d),s+=1;var b=32-oc(e)+d;if(30<b){var _=d-d%5;b=(a&(1<<_)-1).toString(32),a>>=_,d-=_,rg=1<<32-oc(e)+d|s<<d|a,sg=b+o}else rg=1<<b|s<<d|a,sg=o}function vg(o){o.return!==null&&(tg(o,1),ug(o,1,0))}function wg(o){for(;o===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;o===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(o,e){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=o,e=o.deletions,e===null?(o.deletions=[s],o.flags|=16):e.push(s)}function Cg(o,e){switch(o.tag){case 5:var s=o.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(o.stateNode=e,xg=o,yg=Lf(e.firstChild),!0):!1;case 6:return e=o.pendingProps===""||e.nodeType!==3?null:e,e!==null?(o.stateNode=e,xg=o,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=qg!==null?{id:rg,overflow:sg}:null,o.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=e,s.return=o,o.child=s,xg=o,yg=null,!0):!1;default:return!1}}function Dg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Eg(o){if(I$1){var e=yg;if(e){var s=e;if(!Cg(o,e)){if(Dg(o))throw Error(p(418));e=Lf(s.nextSibling);var a=xg;e&&Cg(o,e)?Ag(a,s):(o.flags=o.flags&-4097|2,I$1=!1,xg=o)}}else{if(Dg(o))throw Error(p(418));o.flags=o.flags&-4097|2,I$1=!1,xg=o}}}function Fg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;xg=o}function Gg(o){if(o!==xg)return!1;if(!I$1)return Fg(o),I$1=!0,!1;var e;if((e=o.tag!==3)&&!(e=o.tag!==5)&&(e=o.type,e=e!=="head"&&e!=="body"&&!Ef(o.type,o.memoizedProps)),e&&(e=yg)){if(Dg(o))throw Hg(),Error(p(418));for(;e;)Ag(o,e),e=Lf(e.nextSibling)}if(Fg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(p(317));e:{for(o=o.nextSibling,e=0;o;){if(o.nodeType===8){var s=o.data;if(s==="/$"){if(e===0){yg=Lf(o.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}o=o.nextSibling}yg=null}}else yg=xg?Lf(o.stateNode.nextSibling):null;return!0}function Hg(){for(var o=yg;o;)o=Lf(o.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(o){zg===null?zg=[o]:zg.push(o)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(o,e,s){if(o=s.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p(309));var a=s.stateNode}if(!a)throw Error(p(147,o));var d=a,b=""+o;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===b?e.ref:(e=function(_){var _e=d.refs;_===null?delete _e[b]:_e[b]=_},e._stringRef=b,e)}if(typeof o!="string")throw Error(p(284));if(!s._owner)throw Error(p(290,o))}return o}function Mg(o,e){throw o=Object.prototype.toString.call(e),Error(p(31,o==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":o))}function Ng(o){var e=o._init;return e(o._payload)}function Og(o){function e(It,Pt){if(o){var Tt=It.deletions;Tt===null?(It.deletions=[Pt],It.flags|=16):Tt.push(Pt)}}function s(It,Pt){if(!o)return null;for(;Pt!==null;)e(It,Pt),Pt=Pt.sibling;return null}function a(It,Pt){for(It=new Map;Pt!==null;)Pt.key!==null?It.set(Pt.key,Pt):It.set(Pt.index,Pt),Pt=Pt.sibling;return It}function d(It,Pt){return It=Pg(It,Pt),It.index=0,It.sibling=null,It}function b(It,Pt,Tt){return It.index=Tt,o?(Tt=It.alternate,Tt!==null?(Tt=Tt.index,Tt<Pt?(It.flags|=2,Pt):Tt):(It.flags|=2,Pt)):(It.flags|=1048576,Pt)}function _(It){return o&&It.alternate===null&&(It.flags|=2),It}function _e(It,Pt,Tt,Gt){return Pt===null||Pt.tag!==6?(Pt=Qg(Tt,It.mode,Gt),Pt.return=It,Pt):(Pt=d(Pt,Tt),Pt.return=It,Pt)}function ot(It,Pt,Tt,Gt){var Jt=Tt.type;return Jt===ya?ct(It,Pt,Tt.props.children,Gt,Tt.key):Pt!==null&&(Pt.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===Ha&&Ng(Jt)===Pt.type)?(Gt=d(Pt,Tt.props),Gt.ref=Lg(It,Pt,Tt),Gt.return=It,Gt):(Gt=Rg(Tt.type,Tt.key,Tt.props,null,It.mode,Gt),Gt.ref=Lg(It,Pt,Tt),Gt.return=It,Gt)}function st(It,Pt,Tt,Gt){return Pt===null||Pt.tag!==4||Pt.stateNode.containerInfo!==Tt.containerInfo||Pt.stateNode.implementation!==Tt.implementation?(Pt=Sg(Tt,It.mode,Gt),Pt.return=It,Pt):(Pt=d(Pt,Tt.children||[]),Pt.return=It,Pt)}function ct(It,Pt,Tt,Gt,Jt){return Pt===null||Pt.tag!==7?(Pt=Tg(Tt,It.mode,Gt,Jt),Pt.return=It,Pt):(Pt=d(Pt,Tt),Pt.return=It,Pt)}function ft(It,Pt,Tt){if(typeof Pt=="string"&&Pt!==""||typeof Pt=="number")return Pt=Qg(""+Pt,It.mode,Tt),Pt.return=It,Pt;if(typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case va:return Tt=Rg(Pt.type,Pt.key,Pt.props,null,It.mode,Tt),Tt.ref=Lg(It,null,Pt),Tt.return=It,Tt;case wa:return Pt=Sg(Pt,It.mode,Tt),Pt.return=It,Pt;case Ha:var Gt=Pt._init;return ft(It,Gt(Pt._payload),Tt)}if(eb(Pt)||Ka(Pt))return Pt=Tg(Pt,It.mode,Tt,null),Pt.return=It,Pt;Mg(It,Pt)}return null}function mt(It,Pt,Tt,Gt){var Jt=Pt!==null?Pt.key:null;if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return Jt!==null?null:_e(It,Pt,""+Tt,Gt);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va:return Tt.key===Jt?ot(It,Pt,Tt,Gt):null;case wa:return Tt.key===Jt?st(It,Pt,Tt,Gt):null;case Ha:return Jt=Tt._init,mt(It,Pt,Jt(Tt._payload),Gt)}if(eb(Tt)||Ka(Tt))return Jt!==null?null:ct(It,Pt,Tt,Gt,null);Mg(It,Tt)}return null}function bt(It,Pt,Tt,Gt,Jt){if(typeof Gt=="string"&&Gt!==""||typeof Gt=="number")return It=It.get(Tt)||null,_e(Pt,It,""+Gt,Jt);if(typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case va:return It=It.get(Gt.key===null?Tt:Gt.key)||null,ot(Pt,It,Gt,Jt);case wa:return It=It.get(Gt.key===null?Tt:Gt.key)||null,st(Pt,It,Gt,Jt);case Ha:var qt=Gt._init;return bt(It,Pt,Tt,qt(Gt._payload),Jt)}if(eb(Gt)||Ka(Gt))return It=It.get(Tt)||null,ct(Pt,It,Gt,Jt,null);Mg(Pt,Gt)}return null}function wt(It,Pt,Tt,Gt){for(var Jt=null,qt=null,Nt=Pt,Qt=Pt=0,fn=null;Nt!==null&&Qt<Tt.length;Qt++){Nt.index>Qt?(fn=Nt,Nt=null):fn=Nt.sibling;var Mn=mt(It,Nt,Tt[Qt],Gt);if(Mn===null){Nt===null&&(Nt=fn);break}o&&Nt&&Mn.alternate===null&&e(It,Nt),Pt=b(Mn,Pt,Qt),qt===null?Jt=Mn:qt.sibling=Mn,qt=Mn,Nt=fn}if(Qt===Tt.length)return s(It,Nt),I$1&&tg(It,Qt),Jt;if(Nt===null){for(;Qt<Tt.length;Qt++)Nt=ft(It,Tt[Qt],Gt),Nt!==null&&(Pt=b(Nt,Pt,Qt),qt===null?Jt=Nt:qt.sibling=Nt,qt=Nt);return I$1&&tg(It,Qt),Jt}for(Nt=a(It,Nt);Qt<Tt.length;Qt++)fn=bt(Nt,It,Qt,Tt[Qt],Gt),fn!==null&&(o&&fn.alternate!==null&&Nt.delete(fn.key===null?Qt:fn.key),Pt=b(fn,Pt,Qt),qt===null?Jt=fn:qt.sibling=fn,qt=fn);return o&&Nt.forEach(function(ln){return e(It,ln)}),I$1&&tg(It,Qt),Jt}function Ct(It,Pt,Tt,Gt){var Jt=Ka(Tt);if(typeof Jt!="function")throw Error(p(150));if(Tt=Jt.call(Tt),Tt==null)throw Error(p(151));for(var qt=Jt=null,Nt=Pt,Qt=Pt=0,fn=null,Mn=Tt.next();Nt!==null&&!Mn.done;Qt++,Mn=Tt.next()){Nt.index>Qt?(fn=Nt,Nt=null):fn=Nt.sibling;var ln=mt(It,Nt,Mn.value,Gt);if(ln===null){Nt===null&&(Nt=fn);break}o&&Nt&&ln.alternate===null&&e(It,Nt),Pt=b(ln,Pt,Qt),qt===null?Jt=ln:qt.sibling=ln,qt=ln,Nt=fn}if(Mn.done)return s(It,Nt),I$1&&tg(It,Qt),Jt;if(Nt===null){for(;!Mn.done;Qt++,Mn=Tt.next())Mn=ft(It,Mn.value,Gt),Mn!==null&&(Pt=b(Mn,Pt,Qt),qt===null?Jt=Mn:qt.sibling=Mn,qt=Mn);return I$1&&tg(It,Qt),Jt}for(Nt=a(It,Nt);!Mn.done;Qt++,Mn=Tt.next())Mn=bt(Nt,It,Qt,Mn.value,Gt),Mn!==null&&(o&&Mn.alternate!==null&&Nt.delete(Mn.key===null?Qt:Mn.key),Pt=b(Mn,Pt,Qt),qt===null?Jt=Mn:qt.sibling=Mn,qt=Mn);return o&&Nt.forEach(function(Wt){return e(It,Wt)}),I$1&&tg(It,Qt),Jt}function Rt(It,Pt,Tt,Gt){if(typeof Tt=="object"&&Tt!==null&&Tt.type===ya&&Tt.key===null&&(Tt=Tt.props.children),typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va:e:{for(var Jt=Tt.key,qt=Pt;qt!==null;){if(qt.key===Jt){if(Jt=Tt.type,Jt===ya){if(qt.tag===7){s(It,qt.sibling),Pt=d(qt,Tt.props.children),Pt.return=It,It=Pt;break e}}else if(qt.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===Ha&&Ng(Jt)===qt.type){s(It,qt.sibling),Pt=d(qt,Tt.props),Pt.ref=Lg(It,qt,Tt),Pt.return=It,It=Pt;break e}s(It,qt);break}else e(It,qt);qt=qt.sibling}Tt.type===ya?(Pt=Tg(Tt.props.children,It.mode,Gt,Tt.key),Pt.return=It,It=Pt):(Gt=Rg(Tt.type,Tt.key,Tt.props,null,It.mode,Gt),Gt.ref=Lg(It,Pt,Tt),Gt.return=It,It=Gt)}return _(It);case wa:e:{for(qt=Tt.key;Pt!==null;){if(Pt.key===qt)if(Pt.tag===4&&Pt.stateNode.containerInfo===Tt.containerInfo&&Pt.stateNode.implementation===Tt.implementation){s(It,Pt.sibling),Pt=d(Pt,Tt.children||[]),Pt.return=It,It=Pt;break e}else{s(It,Pt);break}else e(It,Pt);Pt=Pt.sibling}Pt=Sg(Tt,It.mode,Gt),Pt.return=It,It=Pt}return _(It);case Ha:return qt=Tt._init,Rt(It,Pt,qt(Tt._payload),Gt)}if(eb(Tt))return wt(It,Pt,Tt,Gt);if(Ka(Tt))return Ct(It,Pt,Tt,Gt);Mg(It,Tt)}return typeof Tt=="string"&&Tt!==""||typeof Tt=="number"?(Tt=""+Tt,Pt!==null&&Pt.tag===6?(s(It,Pt.sibling),Pt=d(Pt,Tt),Pt.return=It,It=Pt):(s(It,Pt),Pt=Qg(Tt,It.mode,Gt),Pt.return=It,It=Pt),_(It)):s(It,Pt)}return Rt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(o){var e=Wg.current;E(Wg),o._currentValue=e}function bh(o,e,s){for(;o!==null;){var a=o.alternate;if((o.childLanes&e)!==e?(o.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),o===s)break;o=o.return}}function ch(o,e){Xg=o,Zg=Yg=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&e&&(dh=!0),o.firstContext=null)}function eh(o){var e=o._currentValue;if(Zg!==o)if(o={context:o,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=o,Xg.dependencies={lanes:0,firstContext:o}}else Yg=Yg.next=o;return e}var fh=null;function gh(o){fh===null?fh=[o]:fh.push(o)}function hh(o,e,s,a){var d=e.interleaved;return d===null?(s.next=s,gh(e)):(s.next=d.next,d.next=s),e.interleaved=s,ih(o,a)}function ih(o,e){o.lanes|=e;var s=o.alternate;for(s!==null&&(s.lanes|=e),s=o,o=o.return;o!==null;)o.childLanes|=e,s=o.alternate,s!==null&&(s.childLanes|=e),s=o,o=o.return;return s.tag===3?s.stateNode:null}var jh=!1;function kh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(o,e){o=o.updateQueue,e.updateQueue===o&&(e.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function mh(o,e){return{eventTime:o,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(o,e,s){var a=o.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var d=a.pending;return d===null?e.next=e:(e.next=d.next,d.next=e),a.pending=e,ih(o,s)}return d=a.interleaved,d===null?(e.next=e,gh(a)):(e.next=d.next,d.next=e),a.interleaved=e,ih(o,s)}function oh(o,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var a=e.lanes;a&=o.pendingLanes,s|=a,e.lanes=s,Cc(o,s)}}function ph(o,e){var s=o.updateQueue,a=o.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var d=null,b=null;if(s=s.firstBaseUpdate,s!==null){do{var _={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};b===null?d=b=_:b=b.next=_,s=s.next}while(s!==null);b===null?d=b=e:b=b.next=e}else d=b=e;s={baseState:a.baseState,firstBaseUpdate:d,lastBaseUpdate:b,shared:a.shared,effects:a.effects},o.updateQueue=s;return}o=s.lastBaseUpdate,o===null?s.firstBaseUpdate=e:o.next=e,s.lastBaseUpdate=e}function qh(o,e,s,a){var d=o.updateQueue;jh=!1;var b=d.firstBaseUpdate,_=d.lastBaseUpdate,_e=d.shared.pending;if(_e!==null){d.shared.pending=null;var ot=_e,st=ot.next;ot.next=null,_===null?b=st:_.next=st,_=ot;var ct=o.alternate;ct!==null&&(ct=ct.updateQueue,_e=ct.lastBaseUpdate,_e!==_&&(_e===null?ct.firstBaseUpdate=st:_e.next=st,ct.lastBaseUpdate=ot))}if(b!==null){var ft=d.baseState;_=0,ct=st=ot=null,_e=b;do{var mt=_e.lane,bt=_e.eventTime;if((a&mt)===mt){ct!==null&&(ct=ct.next={eventTime:bt,lane:0,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null});e:{var wt=o,Ct=_e;switch(mt=e,bt=s,Ct.tag){case 1:if(wt=Ct.payload,typeof wt=="function"){ft=wt.call(bt,ft,mt);break e}ft=wt;break e;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=Ct.payload,mt=typeof wt=="function"?wt.call(bt,ft,mt):wt,mt==null)break e;ft=A$1({},ft,mt);break e;case 2:jh=!0}}_e.callback!==null&&_e.lane!==0&&(o.flags|=64,mt=d.effects,mt===null?d.effects=[_e]:mt.push(_e))}else bt={eventTime:bt,lane:mt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},ct===null?(st=ct=bt,ot=ft):ct=ct.next=bt,_|=mt;if(_e=_e.next,_e===null){if(_e=d.shared.pending,_e===null)break;mt=_e,_e=mt.next,mt.next=null,d.lastBaseUpdate=mt,d.shared.pending=null}}while(!0);if(ct===null&&(ot=ft),d.baseState=ot,d.firstBaseUpdate=st,d.lastBaseUpdate=ct,e=d.shared.interleaved,e!==null){d=e;do _|=d.lane,d=d.next;while(d!==e)}else b===null&&(d.shared.lanes=0);rh|=_,o.lanes=_,o.memoizedState=ft}}function sh(o,e,s){if(o=e.effects,e.effects=null,o!==null)for(e=0;e<o.length;e++){var a=o[e],d=a.callback;if(d!==null){if(a.callback=null,a=s,typeof d!="function")throw Error(p(191,d));d.call(a)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(o){if(o===th)throw Error(p(174));return o}function yh(o,e){switch(G(wh,e),G(vh,o),G(uh,th),o=e.nodeType,o){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:o=o===8?e.parentNode:e,e=o.namespaceURI||null,o=o.tagName,e=lb(e,o)}E(uh),G(uh,e)}function zh(){E(uh),E(vh),E(wh)}function Ah(o){xh(wh.current);var e=xh(uh.current),s=lb(e,o.type);e!==s&&(G(vh,o),G(uh,s))}function Bh(o){vh.current===o&&(E(uh),E(vh))}var L=Uf(0);function Ch(o){for(var e=o;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===o)break;for(;e.sibling===null;){if(e.return===null||e.return===o)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var o=0;o<Dh.length;o++)Dh[o]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua$1.ReactCurrentDispatcher,Gh=ua$1.ReactCurrentBatchConfig,Hh=0,M$1=null,N=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(o,e){if(e===null)return!1;for(var s=0;s<e.length&&s<o.length;s++)if(!He(o[s],e[s]))return!1;return!0}function Nh(o,e,s,a,d,b){if(Hh=b,M$1=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=o===null||o.memoizedState===null?Oh:Ph,o=s(a,d),Jh){b=0;do{if(Jh=!1,Kh=0,25<=b)throw Error(p(301));b+=1,O$1=N=null,e.updateQueue=null,Fh.current=Qh,o=s(a,d)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O$1=N=M$1=null,Ih=!1,e)throw Error(p(300));return o}function Sh(){var o=Kh!==0;return Kh=0,o}function Th(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=o:O$1=O$1.next=o,O$1}function Uh(){if(N===null){var o=M$1.alternate;o=o!==null?o.memoizedState:null}else o=N.next;var e=O$1===null?M$1.memoizedState:O$1.next;if(e!==null)O$1=e,N=o;else{if(o===null)throw Error(p(310));N=o,o={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O$1===null?M$1.memoizedState=O$1=o:O$1=O$1.next=o}return O$1}function Vh(o,e){return typeof e=="function"?e(o):e}function Wh(o){var e=Uh(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=o;var a=N,d=a.baseQueue,b=s.pending;if(b!==null){if(d!==null){var _=d.next;d.next=b.next,b.next=_}a.baseQueue=d=b,s.pending=null}if(d!==null){b=d.next,a=a.baseState;var _e=_=null,ot=null,st=b;do{var ct=st.lane;if((Hh&ct)===ct)ot!==null&&(ot=ot.next={lane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),a=st.hasEagerState?st.eagerState:o(a,st.action);else{var ft={lane:ct,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null};ot===null?(_e=ot=ft,_=a):ot=ot.next=ft,M$1.lanes|=ct,rh|=ct}st=st.next}while(st!==null&&st!==b);ot===null?_=a:ot.next=_e,He(a,e.memoizedState)||(dh=!0),e.memoizedState=a,e.baseState=_,e.baseQueue=ot,s.lastRenderedState=a}if(o=s.interleaved,o!==null){d=o;do b=d.lane,M$1.lanes|=b,rh|=b,d=d.next;while(d!==o)}else d===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Xh(o){var e=Uh(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=o;var a=s.dispatch,d=s.pending,b=e.memoizedState;if(d!==null){s.pending=null;var _=d=d.next;do b=o(b,_.action),_=_.next;while(_!==d);He(b,e.memoizedState)||(dh=!0),e.memoizedState=b,e.baseQueue===null&&(e.baseState=b),s.lastRenderedState=b}return[b,a]}function Yh(){}function Zh(o,e){var s=M$1,a=Uh(),d=e(),b=!He(a.memoizedState,d);if(b&&(a.memoizedState=d,dh=!0),a=a.queue,$h(ai.bind(null,s,a,o),[o]),a.getSnapshot!==e||b||O$1!==null&&O$1.memoizedState.tag&1){if(s.flags|=2048,bi(9,ci.bind(null,s,a,d,e),void 0,null),Q===null)throw Error(p(349));Hh&30||di(s,e,d)}return d}function di(o,e,s){o.flags|=16384,o={getSnapshot:e,value:s},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.stores=[o]):(s=e.stores,s===null?e.stores=[o]:s.push(o))}function ci(o,e,s,a){e.value=s,e.getSnapshot=a,ei(e)&&fi(o)}function ai(o,e,s){return s(function(){ei(e)&&fi(o)})}function ei(o){var e=o.getSnapshot;o=o.value;try{var s=e();return!He(o,s)}catch{return!0}}function fi(o){var e=ih(o,1);e!==null&&gi(e,o,1,-1)}function hi(o){var e=Th();return typeof o=="function"&&(o=o()),e.memoizedState=e.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:o},e.queue=o,o=o.dispatch=ii.bind(null,M$1,o),[e.memoizedState,o]}function bi(o,e,s,a){return o={tag:o,create:e,destroy:s,deps:a,next:null},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.lastEffect=o.next=o):(s=e.lastEffect,s===null?e.lastEffect=o.next=o:(a=s.next,s.next=o,o.next=a,e.lastEffect=o)),o}function ji(){return Uh().memoizedState}function ki(o,e,s,a){var d=Th();M$1.flags|=o,d.memoizedState=bi(1|e,s,void 0,a===void 0?null:a)}function li(o,e,s,a){var d=Uh();a=a===void 0?null:a;var b=void 0;if(N!==null){var _=N.memoizedState;if(b=_.destroy,a!==null&&Mh(a,_.deps)){d.memoizedState=bi(e,s,b,a);return}}M$1.flags|=o,d.memoizedState=bi(1|e,s,b,a)}function mi(o,e){return ki(8390656,8,o,e)}function $h(o,e){return li(2048,8,o,e)}function ni(o,e){return li(4,2,o,e)}function oi(o,e){return li(4,4,o,e)}function pi(o,e){if(typeof e=="function")return o=o(),e(o),function(){e(null)};if(e!=null)return o=o(),e.current=o,function(){e.current=null}}function qi(o,e,s){return s=s!=null?s.concat([o]):null,li(4,4,pi.bind(null,e,o),s)}function ri(){}function si(o,e){var s=Uh();e=e===void 0?null:e;var a=s.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(s.memoizedState=[o,e],o)}function ti(o,e){var s=Uh();e=e===void 0?null:e;var a=s.memoizedState;return a!==null&&e!==null&&Mh(e,a[1])?a[0]:(o=o(),s.memoizedState=[o,e],o)}function ui(o,e,s){return Hh&21?(He(s,e)||(s=yc(),M$1.lanes|=s,rh|=s,o.baseState=!0),e):(o.baseState&&(o.baseState=!1,dh=!0),o.memoizedState=s)}function vi(o,e){var s=C;C=s!==0&&4>s?s:4,o(!0);var a=Gh.transition;Gh.transition={};try{o(!1),e()}finally{C=s,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(o,e,s){var a=yi(o);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},zi(o))Ai(e,s);else if(s=hh(o,e,s,a),s!==null){var d=R();gi(s,o,a,d),Bi(s,e,a)}}function ii(o,e,s){var a=yi(o),d={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(zi(o))Ai(e,d);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=e.lastRenderedReducer,b!==null))try{var _=e.lastRenderedState,_e=b(_,s);if(d.hasEagerState=!0,d.eagerState=_e,He(_e,_)){var ot=e.interleaved;ot===null?(d.next=d,gh(e)):(d.next=ot.next,ot.next=d),e.interleaved=d;return}}catch{}finally{}s=hh(o,e,d,a),s!==null&&(d=R(),gi(s,o,a,d),Bi(s,e,a))}}function zi(o){var e=o.alternate;return o===M$1||e!==null&&e===M$1}function Ai(o,e){Jh=Ih=!0;var s=o.pending;s===null?e.next=e:(e.next=s.next,s.next=e),o.pending=e}function Bi(o,e,s){if(s&4194240){var a=e.lanes;a&=o.pendingLanes,s|=a,e.lanes=s,Cc(o,s)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(o,e){return Th().memoizedState=[o,e===void 0?null:e],o},useContext:eh,useEffect:mi,useImperativeHandle:function(o,e,s){return s=s!=null?s.concat([o]):null,ki(4194308,4,pi.bind(null,e,o),s)},useLayoutEffect:function(o,e){return ki(4194308,4,o,e)},useInsertionEffect:function(o,e){return ki(4,2,o,e)},useMemo:function(o,e){var s=Th();return e=e===void 0?null:e,o=o(),s.memoizedState=[o,e],o},useReducer:function(o,e,s){var a=Th();return e=s!==void 0?s(e):e,a.memoizedState=a.baseState=e,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:e},a.queue=o,o=o.dispatch=xi.bind(null,M$1,o),[a.memoizedState,o]},useRef:function(o){var e=Th();return o={current:o},e.memoizedState=o},useState:hi,useDebugValue:ri,useDeferredValue:function(o){return Th().memoizedState=o},useTransition:function(){var o=hi(!1),e=o[0];return o=vi.bind(null,o[1]),Th().memoizedState=o,[e,o]},useMutableSource:function(){},useSyncExternalStore:function(o,e,s){var a=M$1,d=Th();if(I$1){if(s===void 0)throw Error(p(407));s=s()}else{if(s=e(),Q===null)throw Error(p(349));Hh&30||di(a,e,s)}d.memoizedState=s;var b={value:s,getSnapshot:e};return d.queue=b,mi(ai.bind(null,a,b,o),[o]),a.flags|=2048,bi(9,ci.bind(null,a,b,s,e),void 0,null),s},useId:function(){var o=Th(),e=Q.identifierPrefix;if(I$1){var s=sg,a=rg;s=(a&~(1<<32-oc(a)-1)).toString(32)+s,e=":"+e+"R"+s,s=Kh++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Lh++,e=":"+e+"r"+s.toString(32)+":";return o.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(o){var e=Uh();return ui(e,N.memoizedState,o)},useTransition:function(){var o=Wh(Vh)[0],e=Uh().memoizedState;return[o,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(o){var e=Uh();return N===null?e.memoizedState=o:ui(e,N.memoizedState,o)},useTransition:function(){var o=Xh(Vh)[0],e=Uh().memoizedState;return[o,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(o,e){if(o&&o.defaultProps){e=A$1({},e),o=o.defaultProps;for(var s in o)e[s]===void 0&&(e[s]=o[s]);return e}return e}function Di(o,e,s,a){e=o.memoizedState,s=s(a,e),s=s==null?e:A$1({},e,s),o.memoizedState=s,o.lanes===0&&(o.updateQueue.baseState=s)}var Ei={isMounted:function(o){return(o=o._reactInternals)?Vb(o)===o:!1},enqueueSetState:function(o,e,s){o=o._reactInternals;var a=R(),d=yi(o),b=mh(a,d);b.payload=e,s!=null&&(b.callback=s),e=nh(o,b,d),e!==null&&(gi(e,o,d,a),oh(e,o,d))},enqueueReplaceState:function(o,e,s){o=o._reactInternals;var a=R(),d=yi(o),b=mh(a,d);b.tag=1,b.payload=e,s!=null&&(b.callback=s),e=nh(o,b,d),e!==null&&(gi(e,o,d,a),oh(e,o,d))},enqueueForceUpdate:function(o,e){o=o._reactInternals;var s=R(),a=yi(o),d=mh(s,a);d.tag=2,e!=null&&(d.callback=e),e=nh(o,d,a),e!==null&&(gi(e,o,a,s),oh(e,o,a))}};function Fi(o,e,s,a,d,b,_){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(a,b,_):e.prototype&&e.prototype.isPureReactComponent?!Ie(s,a)||!Ie(d,b):!0}function Gi(o,e,s){var a=!1,d=Vf,b=e.contextType;return typeof b=="object"&&b!==null?b=eh(b):(d=Zf(e)?Xf:H.current,a=e.contextTypes,b=(a=a!=null)?Yf(o,d):Vf),e=new e(s,b),o.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,o.stateNode=e,e._reactInternals=o,a&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=d,o.__reactInternalMemoizedMaskedChildContext=b),e}function Hi(o,e,s,a){o=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,a),e.state!==o&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(o,e,s,a){var d=o.stateNode;d.props=s,d.state=o.memoizedState,d.refs={},kh(o);var b=e.contextType;typeof b=="object"&&b!==null?d.context=eh(b):(b=Zf(e)?Xf:H.current,d.context=Yf(o,b)),d.state=o.memoizedState,b=e.getDerivedStateFromProps,typeof b=="function"&&(Di(o,e,b,s),d.state=o.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(e=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),e!==d.state&&Ei.enqueueReplaceState(d,d.state,null),qh(o,s,d,a),d.state=o.memoizedState),typeof d.componentDidMount=="function"&&(o.flags|=4194308)}function Ji(o,e){try{var s="",a=e;do s+=Pa(a),a=a.return;while(a);var d=s}catch(b){d=`
Error generating stack: `+b.message+`
`+b.stack}return{value:o,source:e,stack:d,digest:null}}function Ki(o,e,s){return{value:o,source:null,stack:s??null,digest:e??null}}function Li(o,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(o,e,s){s=mh(-1,s),s.tag=3,s.payload={element:null};var a=e.value;return s.callback=function(){Oi||(Oi=!0,Pi=a),Li(o,e)},s}function Qi(o,e,s){s=mh(-1,s),s.tag=3;var a=o.type.getDerivedStateFromError;if(typeof a=="function"){var d=e.value;s.payload=function(){return a(d)},s.callback=function(){Li(o,e)}}var b=o.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(s.callback=function(){Li(o,e),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var _=e.stack;this.componentDidCatch(e.value,{componentStack:_!==null?_:""})}),s}function Si(o,e,s){var a=o.pingCache;if(a===null){a=o.pingCache=new Mi;var d=new Set;a.set(e,d)}else d=a.get(e),d===void 0&&(d=new Set,a.set(e,d));d.has(s)||(d.add(s),o=Ti.bind(null,o,e,s),e.then(o,o))}function Ui(o){do{var e;if((e=o.tag===13)&&(e=o.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return o;o=o.return}while(o!==null);return null}function Vi(o,e,s,a,d){return o.mode&1?(o.flags|=65536,o.lanes=d,o):(o===e?o.flags|=65536:(o.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=mh(-1,1),e.tag=2,nh(s,e,1))),s.lanes|=1),o)}var Wi=ua$1.ReactCurrentOwner,dh=!1;function Xi(o,e,s,a){e.child=o===null?Vg(e,null,s,a):Ug(e,o.child,s,a)}function Yi(o,e,s,a,d){s=s.render;var b=e.ref;return ch(e,d),a=Nh(o,e,s,a,b,d),s=Sh(),o!==null&&!dh?(e.updateQueue=o.updateQueue,e.flags&=-2053,o.lanes&=~d,Zi(o,e,d)):(I$1&&s&&vg(e),e.flags|=1,Xi(o,e,a,d),e.child)}function $i(o,e,s,a,d){if(o===null){var b=s.type;return typeof b=="function"&&!aj(b)&&b.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=b,bj(o,e,b,a,d)):(o=Rg(s.type,null,a,e,e.mode,d),o.ref=e.ref,o.return=e,e.child=o)}if(b=o.child,!(o.lanes&d)){var _=b.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(_,a)&&o.ref===e.ref)return Zi(o,e,d)}return e.flags|=1,o=Pg(b,a),o.ref=e.ref,o.return=e,e.child=o}function bj(o,e,s,a,d){if(o!==null){var b=o.memoizedProps;if(Ie(b,a)&&o.ref===e.ref)if(dh=!1,e.pendingProps=a=b,(o.lanes&d)!==0)o.flags&131072&&(dh=!0);else return e.lanes=o.lanes,Zi(o,e,d)}return cj(o,e,s,a,d)}function dj(o,e,s){var a=e.pendingProps,d=a.children,b=o!==null?o.memoizedState:null;if(a.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=s;else{if(!(s&1073741824))return o=b!==null?b.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:o,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=o,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=b!==null?b.baseLanes:s,G(ej,fj),fj|=a}else b!==null?(a=b.baseLanes|s,e.memoizedState=null):a=s,G(ej,fj),fj|=a;return Xi(o,e,d,s),e.child}function gj(o,e){var s=e.ref;(o===null&&s!==null||o!==null&&o.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function cj(o,e,s,a,d){var b=Zf(s)?Xf:H.current;return b=Yf(e,b),ch(e,d),s=Nh(o,e,s,a,b,d),a=Sh(),o!==null&&!dh?(e.updateQueue=o.updateQueue,e.flags&=-2053,o.lanes&=~d,Zi(o,e,d)):(I$1&&a&&vg(e),e.flags|=1,Xi(o,e,s,d),e.child)}function hj(o,e,s,a,d){if(Zf(s)){var b=!0;cg(e)}else b=!1;if(ch(e,d),e.stateNode===null)ij(o,e),Gi(e,s,a),Ii(e,s,a,d),a=!0;else if(o===null){var _=e.stateNode,_e=e.memoizedProps;_.props=_e;var ot=_.context,st=s.contextType;typeof st=="object"&&st!==null?st=eh(st):(st=Zf(s)?Xf:H.current,st=Yf(e,st));var ct=s.getDerivedStateFromProps,ft=typeof ct=="function"||typeof _.getSnapshotBeforeUpdate=="function";ft||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(_e!==a||ot!==st)&&Hi(e,_,a,st),jh=!1;var mt=e.memoizedState;_.state=mt,qh(e,a,_,d),ot=e.memoizedState,_e!==a||mt!==ot||Wf.current||jh?(typeof ct=="function"&&(Di(e,s,ct,a),ot=e.memoizedState),(_e=jh||Fi(e,s,_e,a,mt,ot,st))?(ft||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(e.flags|=4194308)):(typeof _.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=ot),_.props=a,_.state=ot,_.context=st,a=_e):(typeof _.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{_=e.stateNode,lh(o,e),_e=e.memoizedProps,st=e.type===e.elementType?_e:Ci(e.type,_e),_.props=st,ft=e.pendingProps,mt=_.context,ot=s.contextType,typeof ot=="object"&&ot!==null?ot=eh(ot):(ot=Zf(s)?Xf:H.current,ot=Yf(e,ot));var bt=s.getDerivedStateFromProps;(ct=typeof bt=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(_e!==ft||mt!==ot)&&Hi(e,_,a,ot),jh=!1,mt=e.memoizedState,_.state=mt,qh(e,a,_,d);var wt=e.memoizedState;_e!==ft||mt!==wt||Wf.current||jh?(typeof bt=="function"&&(Di(e,s,bt,a),wt=e.memoizedState),(st=jh||Fi(e,s,st,a,mt,wt,ot)||!1)?(ct||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(a,wt,ot),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(a,wt,ot)),typeof _.componentDidUpdate=="function"&&(e.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof _.componentDidUpdate!="function"||_e===o.memoizedProps&&mt===o.memoizedState||(e.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||_e===o.memoizedProps&&mt===o.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=wt),_.props=a,_.state=wt,_.context=ot,a=st):(typeof _.componentDidUpdate!="function"||_e===o.memoizedProps&&mt===o.memoizedState||(e.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||_e===o.memoizedProps&&mt===o.memoizedState||(e.flags|=1024),a=!1)}return jj(o,e,s,a,b,d)}function jj(o,e,s,a,d,b){gj(o,e);var _=(e.flags&128)!==0;if(!a&&!_)return d&&dg(e,s,!1),Zi(o,e,b);a=e.stateNode,Wi.current=e;var _e=_&&typeof s.getDerivedStateFromError!="function"?null:a.render();return e.flags|=1,o!==null&&_?(e.child=Ug(e,o.child,null,b),e.child=Ug(e,null,_e,b)):Xi(o,e,_e,b),e.memoizedState=a.state,d&&dg(e,s,!0),e.child}function kj(o){var e=o.stateNode;e.pendingContext?ag(o,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(o,e.context,!1),yh(o,e.containerInfo)}function lj(o,e,s,a,d){return Ig(),Jg(d),e.flags|=256,Xi(o,e,s,a),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(o){return{baseLanes:o,cachePool:null,transitions:null}}function oj(o,e,s){var a=e.pendingProps,d=L.current,b=!1,_=(e.flags&128)!==0,_e;if((_e=_)||(_e=o!==null&&o.memoizedState===null?!1:(d&2)!==0),_e?(b=!0,e.flags&=-129):(o===null||o.memoizedState!==null)&&(d|=1),G(L,d&1),o===null)return Eg(e),o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(e.mode&1?o.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(_=a.children,o=a.fallback,b?(a=e.mode,b=e.child,_={mode:"hidden",children:_},!(a&1)&&b!==null?(b.childLanes=0,b.pendingProps=_):b=pj(_,a,0,null),o=Tg(o,a,s,null),b.return=e,o.return=e,b.sibling=o,e.child=b,e.child.memoizedState=nj(s),e.memoizedState=mj,o):qj(e,_));if(d=o.memoizedState,d!==null&&(_e=d.dehydrated,_e!==null))return rj(o,e,_,a,_e,d,s);if(b){b=a.fallback,_=e.mode,d=o.child,_e=d.sibling;var ot={mode:"hidden",children:a.children};return!(_&1)&&e.child!==d?(a=e.child,a.childLanes=0,a.pendingProps=ot,e.deletions=null):(a=Pg(d,ot),a.subtreeFlags=d.subtreeFlags&14680064),_e!==null?b=Pg(_e,b):(b=Tg(b,_,s,null),b.flags|=2),b.return=e,a.return=e,a.sibling=b,e.child=a,a=b,b=e.child,_=o.child.memoizedState,_=_===null?nj(s):{baseLanes:_.baseLanes|s,cachePool:null,transitions:_.transitions},b.memoizedState=_,b.childLanes=o.childLanes&~s,e.memoizedState=mj,a}return b=o.child,o=b.sibling,a=Pg(b,{mode:"visible",children:a.children}),!(e.mode&1)&&(a.lanes=s),a.return=e,a.sibling=null,o!==null&&(s=e.deletions,s===null?(e.deletions=[o],e.flags|=16):s.push(o)),e.child=a,e.memoizedState=null,a}function qj(o,e){return e=pj({mode:"visible",children:e},o.mode,0,null),e.return=o,o.child=e}function sj(o,e,s,a){return a!==null&&Jg(a),Ug(e,o.child,null,s),o=qj(e,e.pendingProps.children),o.flags|=2,e.memoizedState=null,o}function rj(o,e,s,a,d,b,_){if(s)return e.flags&256?(e.flags&=-257,a=Ki(Error(p(422))),sj(o,e,_,a)):e.memoizedState!==null?(e.child=o.child,e.flags|=128,null):(b=a.fallback,d=e.mode,a=pj({mode:"visible",children:a.children},d,0,null),b=Tg(b,d,_,null),b.flags|=2,a.return=e,b.return=e,a.sibling=b,e.child=a,e.mode&1&&Ug(e,o.child,null,_),e.child.memoizedState=nj(_),e.memoizedState=mj,b);if(!(e.mode&1))return sj(o,e,_,null);if(d.data==="$!"){if(a=d.nextSibling&&d.nextSibling.dataset,a)var _e=a.dgst;return a=_e,b=Error(p(419)),a=Ki(b,a,void 0),sj(o,e,_,a)}if(_e=(_&o.childLanes)!==0,dh||_e){if(a=Q,a!==null){switch(_&-_){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(a.suspendedLanes|_)?0:d,d!==0&&d!==b.retryLane&&(b.retryLane=d,ih(o,d),gi(a,o,d,-1))}return tj(),a=Ki(Error(p(421))),sj(o,e,_,a)}return d.data==="$?"?(e.flags|=128,e.child=o.child,e=uj.bind(null,o),d._reactRetry=e,null):(o=b.treeContext,yg=Lf(d.nextSibling),xg=e,I$1=!0,zg=null,o!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=o.id,sg=o.overflow,qg=e),e=qj(e,a.children),e.flags|=4096,e)}function vj(o,e,s){o.lanes|=e;var a=o.alternate;a!==null&&(a.lanes|=e),bh(o.return,e,s)}function wj(o,e,s,a,d){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:d}:(b.isBackwards=e,b.rendering=null,b.renderingStartTime=0,b.last=a,b.tail=s,b.tailMode=d)}function xj(o,e,s){var a=e.pendingProps,d=a.revealOrder,b=a.tail;if(Xi(o,e,a.children,s),a=L.current,a&2)a=a&1|2,e.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=e.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&vj(o,s,e);else if(o.tag===19)vj(o,s,e);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}a&=1}if(G(L,a),!(e.mode&1))e.memoizedState=null;else switch(d){case"forwards":for(s=e.child,d=null;s!==null;)o=s.alternate,o!==null&&Ch(o)===null&&(d=s),s=s.sibling;s=d,s===null?(d=e.child,e.child=null):(d=s.sibling,s.sibling=null),wj(e,!1,d,s,b);break;case"backwards":for(s=null,d=e.child,e.child=null;d!==null;){if(o=d.alternate,o!==null&&Ch(o)===null){e.child=d;break}o=d.sibling,d.sibling=s,s=d,d=o}wj(e,!0,s,null,b);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(o,e){!(e.mode&1)&&o!==null&&(o.alternate=null,e.alternate=null,e.flags|=2)}function Zi(o,e,s){if(o!==null&&(e.dependencies=o.dependencies),rh|=e.lanes,!(s&e.childLanes))return null;if(o!==null&&e.child!==o.child)throw Error(p(153));if(e.child!==null){for(o=e.child,s=Pg(o,o.pendingProps),e.child=s,s.return=e;o.sibling!==null;)o=o.sibling,s=s.sibling=Pg(o,o.pendingProps),s.return=e;s.sibling=null}return e.child}function yj(o,e,s){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var a=e.type._context,d=e.memoizedProps.value;G(Wg,a._currentValue),a._currentValue=d;break;case 13:if(a=e.memoizedState,a!==null)return a.dehydrated!==null?(G(L,L.current&1),e.flags|=128,null):s&e.child.childLanes?oj(o,e,s):(G(L,L.current&1),o=Zi(o,e,s),o!==null?o.sibling:null);G(L,L.current&1);break;case 19:if(a=(s&e.childLanes)!==0,o.flags&128){if(a)return xj(o,e,s);e.flags|=128}if(d=e.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),G(L,L.current),a)break;return null;case 22:case 23:return e.lanes=0,dj(o,e,s)}return Zi(o,e,s)}var zj,Aj,Bj,Cj;zj=function(o,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Aj=function(){};Bj=function(o,e,s,a){var d=o.memoizedProps;if(d!==a){o=e.stateNode,xh(uh.current);var b=null;switch(s){case"input":d=Ya(o,d),a=Ya(o,a),b=[];break;case"select":d=A$1({},d,{value:void 0}),a=A$1({},a,{value:void 0}),b=[];break;case"textarea":d=gb(o,d),a=gb(o,a),b=[];break;default:typeof d.onClick!="function"&&typeof a.onClick=="function"&&(o.onclick=Bf)}ub(s,a);var _;s=null;for(st in d)if(!a.hasOwnProperty(st)&&d.hasOwnProperty(st)&&d[st]!=null)if(st==="style"){var _e=d[st];for(_ in _e)_e.hasOwnProperty(_)&&(s||(s={}),s[_]="")}else st!=="dangerouslySetInnerHTML"&&st!=="children"&&st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(ea.hasOwnProperty(st)?b||(b=[]):(b=b||[]).push(st,null));for(st in a){var ot=a[st];if(_e=d!=null?d[st]:void 0,a.hasOwnProperty(st)&&ot!==_e&&(ot!=null||_e!=null))if(st==="style")if(_e){for(_ in _e)!_e.hasOwnProperty(_)||ot&&ot.hasOwnProperty(_)||(s||(s={}),s[_]="");for(_ in ot)ot.hasOwnProperty(_)&&_e[_]!==ot[_]&&(s||(s={}),s[_]=ot[_])}else s||(b||(b=[]),b.push(st,s)),s=ot;else st==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,_e=_e?_e.__html:void 0,ot!=null&&_e!==ot&&(b=b||[]).push(st,ot)):st==="children"?typeof ot!="string"&&typeof ot!="number"||(b=b||[]).push(st,""+ot):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&(ea.hasOwnProperty(st)?(ot!=null&&st==="onScroll"&&D("scroll",o),b||_e===ot||(b=[])):(b=b||[]).push(st,ot))}s&&(b=b||[]).push("style",s);var st=b;(e.updateQueue=st)&&(e.flags|=4)}};Cj=function(o,e,s,a){s!==a&&(e.flags|=4)};function Dj(o,e){if(!I$1)switch(o.tailMode){case"hidden":e=o.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?o.tail=null:s.sibling=null;break;case"collapsed":s=o.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e||o.tail===null?o.tail=null:o.tail.sibling=null:a.sibling=null}}function S(o){var e=o.alternate!==null&&o.alternate.child===o.child,s=0,a=0;if(e)for(var d=o.child;d!==null;)s|=d.lanes|d.childLanes,a|=d.subtreeFlags&14680064,a|=d.flags&14680064,d.return=o,d=d.sibling;else for(d=o.child;d!==null;)s|=d.lanes|d.childLanes,a|=d.subtreeFlags,a|=d.flags,d.return=o,d=d.sibling;return o.subtreeFlags|=a,o.childLanes=s,e}function Ej(o,e,s){var a=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return a=e.stateNode,zh(),E(Wf),E(H),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(o===null||o.child===null)&&(Gg(e)?e.flags|=4:o===null||o.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(o,e),S(e),null;case 5:Bh(e);var d=xh(wh.current);if(s=e.type,o!==null&&e.stateNode!=null)Bj(o,e,s,a,d),o.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!a){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(o=xh(uh.current),Gg(e)){a=e.stateNode,s=e.type;var b=e.memoizedProps;switch(a[Of]=e,a[Pf]=b,o=(e.mode&1)!==0,s){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(d=0;d<lf.length;d++)D(lf[d],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za(a,b),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!b.multiple},D("invalid",a);break;case"textarea":hb(a,b),D("invalid",a)}ub(s,b),d=null;for(var _ in b)if(b.hasOwnProperty(_)){var _e=b[_];_==="children"?typeof _e=="string"?a.textContent!==_e&&(b.suppressHydrationWarning!==!0&&Af(a.textContent,_e,o),d=["children",_e]):typeof _e=="number"&&a.textContent!==""+_e&&(b.suppressHydrationWarning!==!0&&Af(a.textContent,_e,o),d=["children",""+_e]):ea.hasOwnProperty(_)&&_e!=null&&_==="onScroll"&&D("scroll",a)}switch(s){case"input":Va(a),db(a,b,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(a.onclick=Bf)}a=d,e.updateQueue=a,a!==null&&(e.flags|=4)}else{_=d.nodeType===9?d:d.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=kb(s)),o==="http://www.w3.org/1999/xhtml"?s==="script"?(o=_.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof a.is=="string"?o=_.createElement(s,{is:a.is}):(o=_.createElement(s),s==="select"&&(_=o,a.multiple?_.multiple=!0:a.size&&(_.size=a.size))):o=_.createElementNS(o,s),o[Of]=e,o[Pf]=a,zj(o,e,!1,!1),e.stateNode=o;e:{switch(_=vb(s,a),s){case"dialog":D("cancel",o),D("close",o),d=a;break;case"iframe":case"object":case"embed":D("load",o),d=a;break;case"video":case"audio":for(d=0;d<lf.length;d++)D(lf[d],o);d=a;break;case"source":D("error",o),d=a;break;case"img":case"image":case"link":D("error",o),D("load",o),d=a;break;case"details":D("toggle",o),d=a;break;case"input":Za(o,a),d=Ya(o,a),D("invalid",o);break;case"option":d=a;break;case"select":o._wrapperState={wasMultiple:!!a.multiple},d=A$1({},a,{value:void 0}),D("invalid",o);break;case"textarea":hb(o,a),d=gb(o,a),D("invalid",o);break;default:d=a}ub(s,d),_e=d;for(b in _e)if(_e.hasOwnProperty(b)){var ot=_e[b];b==="style"?sb(o,ot):b==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,ot!=null&&nb(o,ot)):b==="children"?typeof ot=="string"?(s!=="textarea"||ot!=="")&&ob(o,ot):typeof ot=="number"&&ob(o,""+ot):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(ea.hasOwnProperty(b)?ot!=null&&b==="onScroll"&&D("scroll",o):ot!=null&&ta$1(o,b,ot,_))}switch(s){case"input":Va(o),db(o,a,!1);break;case"textarea":Va(o),jb(o);break;case"option":a.value!=null&&o.setAttribute("value",""+Sa(a.value));break;case"select":o.multiple=!!a.multiple,b=a.value,b!=null?fb(o,!!a.multiple,b,!1):a.defaultValue!=null&&fb(o,!!a.multiple,a.defaultValue,!0);break;default:typeof d.onClick=="function"&&(o.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(o&&e.stateNode!=null)Cj(o,e,o.memoizedProps,a);else{if(typeof a!="string"&&e.stateNode===null)throw Error(p(166));if(s=xh(wh.current),xh(uh.current),Gg(e)){if(a=e.stateNode,s=e.memoizedProps,a[Of]=e,(b=a.nodeValue!==s)&&(o=xg,o!==null))switch(o.tag){case 3:Af(a.nodeValue,s,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,s,(o.mode&1)!==0)}b&&(e.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Of]=e,e.stateNode=a}return S(e),null;case 13:if(E(L),a=e.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,b=!1;else if(b=Gg(e),a!==null&&a.dehydrated!==null){if(o===null){if(!b)throw Error(p(318));if(b=e.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(p(317));b[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),b=!1}else zg!==null&&(Fj(zg),zg=null),b=!0;if(!b)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(a=a!==null,a!==(o!==null&&o.memoizedState!==null)&&a&&(e.child.flags|=8192,e.mode&1&&(o===null||L.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return zh(),Aj(o,e),o===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return ah(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(L),b=e.memoizedState,b===null)return S(e),null;if(a=(e.flags&128)!==0,_=b.rendering,_===null)if(a)Dj(b,!1);else{if(T!==0||o!==null&&o.flags&128)for(o=e.child;o!==null;){if(_=Ch(o),_!==null){for(e.flags|=128,Dj(b,!1),a=_.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),e.subtreeFlags=0,a=s,s=e.child;s!==null;)b=s,o=a,b.flags&=14680066,_=b.alternate,_===null?(b.childLanes=0,b.lanes=o,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=_.childLanes,b.lanes=_.lanes,b.child=_.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=_.memoizedProps,b.memoizedState=_.memoizedState,b.updateQueue=_.updateQueue,b.type=_.type,o=_.dependencies,b.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s=s.sibling;return G(L,L.current&1|2),e.child}o=o.sibling}b.tail!==null&&B()>Gj&&(e.flags|=128,a=!0,Dj(b,!1),e.lanes=4194304)}else{if(!a)if(o=Ch(_),o!==null){if(e.flags|=128,a=!0,s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Dj(b,!0),b.tail===null&&b.tailMode==="hidden"&&!_.alternate&&!I$1)return S(e),null}else 2*B()-b.renderingStartTime>Gj&&s!==1073741824&&(e.flags|=128,a=!0,Dj(b,!1),e.lanes=4194304);b.isBackwards?(_.sibling=e.child,e.child=_):(s=b.last,s!==null?s.sibling=_:e.child=_,b.last=_)}return b.tail!==null?(e=b.tail,b.rendering=e,b.tail=e.sibling,b.renderingStartTime=B(),e.sibling=null,s=L.current,G(L,a?s&1|2:s&1),e):(S(e),null);case 22:case 23:return Hj(),a=e.memoizedState!==null,o!==null&&o.memoizedState!==null!==a&&(e.flags|=8192),a&&e.mode&1?fj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(o,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),o=e.flags,o&65536?(e.flags=o&-65537|128,e):null;case 3:return zh(),E(Wf),E(H),Eh(),o=e.flags,o&65536&&!(o&128)?(e.flags=o&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L),o=e.memoizedState,o!==null&&o.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return o=e.flags,o&65536?(e.flags=o&-65537|128,e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(o,e){var s=o.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){W(o,e,a)}else s.current=null}function Mj(o,e,s){try{s()}catch(a){W(o,e,a)}}var Nj=!1;function Oj(o,e){if(Cf=dd,o=Me(),Ne(o)){if("selectionStart"in o)var s={start:o.selectionStart,end:o.selectionEnd};else e:{s=(s=o.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var d=a.anchorOffset,b=a.focusNode;a=a.focusOffset;try{s.nodeType,b.nodeType}catch{s=null;break e}var _=0,_e=-1,ot=-1,st=0,ct=0,ft=o,mt=null;t:for(;;){for(var bt;ft!==s||d!==0&&ft.nodeType!==3||(_e=_+d),ft!==b||a!==0&&ft.nodeType!==3||(ot=_+a),ft.nodeType===3&&(_+=ft.nodeValue.length),(bt=ft.firstChild)!==null;)mt=ft,ft=bt;for(;;){if(ft===o)break t;if(mt===s&&++st===d&&(_e=_),mt===b&&++ct===a&&(ot=_),(bt=ft.nextSibling)!==null)break;ft=mt,mt=ft.parentNode}ft=bt}s=_e===-1||ot===-1?null:{start:_e,end:ot}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:o,selectionRange:s},dd=!1,V$1=e;V$1!==null;)if(e=V$1,o=e.child,(e.subtreeFlags&1028)!==0&&o!==null)o.return=e,V$1=o;else for(;V$1!==null;){e=V$1;try{var wt=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(wt!==null){var Ct=wt.memoizedProps,Rt=wt.memoizedState,It=e.stateNode,Pt=It.getSnapshotBeforeUpdate(e.elementType===e.type?Ct:Ci(e.type,Ct),Rt);It.__reactInternalSnapshotBeforeUpdate=Pt}break;case 3:var Tt=e.stateNode.containerInfo;Tt.nodeType===1?Tt.textContent="":Tt.nodeType===9&&Tt.documentElement&&Tt.removeChild(Tt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(Gt){W(e,e.return,Gt)}if(o=e.sibling,o!==null){o.return=e.return,V$1=o;break}V$1=e.return}return wt=Nj,Nj=!1,wt}function Pj(o,e,s){var a=e.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&o)===o){var b=d.destroy;d.destroy=void 0,b!==void 0&&Mj(e,s,b)}d=d.next}while(d!==a)}}function Qj(o,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&o)===o){var a=s.create;s.destroy=a()}s=s.next}while(s!==e)}}function Rj(o){var e=o.ref;if(e!==null){var s=o.stateNode;switch(o.tag){case 5:o=s;break;default:o=s}typeof e=="function"?e(o):e.current=o}}function Sj(o){var e=o.alternate;e!==null&&(o.alternate=null,Sj(e)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(e=o.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Tj(o){return o.tag===5||o.tag===3||o.tag===4}function Uj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Tj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Vj(o,e,s){var a=o.tag;if(a===5||a===6)o=o.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(o,e):s.insertBefore(o,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(o,s)):(e=s,e.appendChild(o)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Bf));else if(a!==4&&(o=o.child,o!==null))for(Vj(o,e,s),o=o.sibling;o!==null;)Vj(o,e,s),o=o.sibling}function Wj(o,e,s){var a=o.tag;if(a===5||a===6)o=o.stateNode,e?s.insertBefore(o,e):s.appendChild(o);else if(a!==4&&(o=o.child,o!==null))for(Wj(o,e,s),o=o.sibling;o!==null;)Wj(o,e,s),o=o.sibling}var X=null,Xj=!1;function Yj(o,e,s){for(s=s.child;s!==null;)Zj(o,e,s),s=s.sibling}function Zj(o,e,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Lj(s,e);case 6:var a=X,d=Xj;X=null,Yj(o,e,s),X=a,Xj=d,X!==null&&(Xj?(o=X,s=s.stateNode,o.nodeType===8?o.parentNode.removeChild(s):o.removeChild(s)):X.removeChild(s.stateNode));break;case 18:X!==null&&(Xj?(o=X,s=s.stateNode,o.nodeType===8?Kf(o.parentNode,s):o.nodeType===1&&Kf(o,s),bd(o)):Kf(X,s.stateNode));break;case 4:a=X,d=Xj,X=s.stateNode.containerInfo,Xj=!0,Yj(o,e,s),X=a,Xj=d;break;case 0:case 11:case 14:case 15:if(!U&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){d=a=a.next;do{var b=d,_=b.destroy;b=b.tag,_!==void 0&&(b&2||b&4)&&Mj(s,e,_),d=d.next}while(d!==a)}Yj(o,e,s);break;case 1:if(!U&&(Lj(s,e),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(_e){W(s,e,_e)}Yj(o,e,s);break;case 21:Yj(o,e,s);break;case 22:s.mode&1?(U=(a=U)||s.memoizedState!==null,Yj(o,e,s),U=a):Yj(o,e,s);break;default:Yj(o,e,s)}}function ak(o){var e=o.updateQueue;if(e!==null){o.updateQueue=null;var s=o.stateNode;s===null&&(s=o.stateNode=new Kj),e.forEach(function(a){var d=bk.bind(null,o,a);s.has(a)||(s.add(a),a.then(d,d))})}}function ck(o,e){var s=e.deletions;if(s!==null)for(var a=0;a<s.length;a++){var d=s[a];try{var b=o,_=e,_e=_;e:for(;_e!==null;){switch(_e.tag){case 5:X=_e.stateNode,Xj=!1;break e;case 3:X=_e.stateNode.containerInfo,Xj=!0;break e;case 4:X=_e.stateNode.containerInfo,Xj=!0;break e}_e=_e.return}if(X===null)throw Error(p(160));Zj(b,_,d),X=null,Xj=!1;var ot=d.alternate;ot!==null&&(ot.return=null),d.return=null}catch(st){W(d,e,st)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,o),e=e.sibling}function dk(o,e){var s=o.alternate,a=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ck(e,o),ek(o),a&4){try{Pj(3,o,o.return),Qj(3,o)}catch(Ct){W(o,o.return,Ct)}try{Pj(5,o,o.return)}catch(Ct){W(o,o.return,Ct)}}break;case 1:ck(e,o),ek(o),a&512&&s!==null&&Lj(s,s.return);break;case 5:if(ck(e,o),ek(o),a&512&&s!==null&&Lj(s,s.return),o.flags&32){var d=o.stateNode;try{ob(d,"")}catch(Ct){W(o,o.return,Ct)}}if(a&4&&(d=o.stateNode,d!=null)){var b=o.memoizedProps,_=s!==null?s.memoizedProps:b,_e=o.type,ot=o.updateQueue;if(o.updateQueue=null,ot!==null)try{_e==="input"&&b.type==="radio"&&b.name!=null&&ab(d,b),vb(_e,_);var st=vb(_e,b);for(_=0;_<ot.length;_+=2){var ct=ot[_],ft=ot[_+1];ct==="style"?sb(d,ft):ct==="dangerouslySetInnerHTML"?nb(d,ft):ct==="children"?ob(d,ft):ta$1(d,ct,ft,st)}switch(_e){case"input":bb(d,b);break;case"textarea":ib(d,b);break;case"select":var mt=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!b.multiple;var bt=b.value;bt!=null?fb(d,!!b.multiple,bt,!1):mt!==!!b.multiple&&(b.defaultValue!=null?fb(d,!!b.multiple,b.defaultValue,!0):fb(d,!!b.multiple,b.multiple?[]:"",!1))}d[Pf]=b}catch(Ct){W(o,o.return,Ct)}}break;case 6:if(ck(e,o),ek(o),a&4){if(o.stateNode===null)throw Error(p(162));d=o.stateNode,b=o.memoizedProps;try{d.nodeValue=b}catch(Ct){W(o,o.return,Ct)}}break;case 3:if(ck(e,o),ek(o),a&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(Ct){W(o,o.return,Ct)}break;case 4:ck(e,o),ek(o);break;case 13:ck(e,o),ek(o),d=o.child,d.flags&8192&&(b=d.memoizedState!==null,d.stateNode.isHidden=b,!b||d.alternate!==null&&d.alternate.memoizedState!==null||(fk=B())),a&4&&ak(o);break;case 22:if(ct=s!==null&&s.memoizedState!==null,o.mode&1?(U=(st=U)||ct,ck(e,o),U=st):ck(e,o),ek(o),a&8192){if(st=o.memoizedState!==null,(o.stateNode.isHidden=st)&&!ct&&o.mode&1)for(V$1=o,ct=o.child;ct!==null;){for(ft=V$1=ct;V$1!==null;){switch(mt=V$1,bt=mt.child,mt.tag){case 0:case 11:case 14:case 15:Pj(4,mt,mt.return);break;case 1:Lj(mt,mt.return);var wt=mt.stateNode;if(typeof wt.componentWillUnmount=="function"){a=mt,s=mt.return;try{e=a,wt.props=e.memoizedProps,wt.state=e.memoizedState,wt.componentWillUnmount()}catch(Ct){W(a,s,Ct)}}break;case 5:Lj(mt,mt.return);break;case 22:if(mt.memoizedState!==null){gk(ft);continue}}bt!==null?(bt.return=mt,V$1=bt):gk(ft)}ct=ct.sibling}e:for(ct=null,ft=o;;){if(ft.tag===5){if(ct===null){ct=ft;try{d=ft.stateNode,st?(b=d.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(_e=ft.stateNode,ot=ft.memoizedProps.style,_=ot!=null&&ot.hasOwnProperty("display")?ot.display:null,_e.style.display=rb("display",_))}catch(Ct){W(o,o.return,Ct)}}}else if(ft.tag===6){if(ct===null)try{ft.stateNode.nodeValue=st?"":ft.memoizedProps}catch(Ct){W(o,o.return,Ct)}}else if((ft.tag!==22&&ft.tag!==23||ft.memoizedState===null||ft===o)&&ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===o)break e;for(;ft.sibling===null;){if(ft.return===null||ft.return===o)break e;ct===ft&&(ct=null),ft=ft.return}ct===ft&&(ct=null),ft.sibling.return=ft.return,ft=ft.sibling}}break;case 19:ck(e,o),ek(o),a&4&&ak(o);break;case 21:break;default:ck(e,o),ek(o)}}function ek(o){var e=o.flags;if(e&2){try{e:{for(var s=o.return;s!==null;){if(Tj(s)){var a=s;break e}s=s.return}throw Error(p(160))}switch(a.tag){case 5:var d=a.stateNode;a.flags&32&&(ob(d,""),a.flags&=-33);var b=Uj(o);Wj(o,b,d);break;case 3:case 4:var _=a.stateNode.containerInfo,_e=Uj(o);Vj(o,_e,_);break;default:throw Error(p(161))}}catch(ot){W(o,o.return,ot)}o.flags&=-3}e&4096&&(o.flags&=-4097)}function hk(o,e,s){V$1=o,ik(o)}function ik(o,e,s){for(var a=(o.mode&1)!==0;V$1!==null;){var d=V$1,b=d.child;if(d.tag===22&&a){var _=d.memoizedState!==null||Jj;if(!_){var _e=d.alternate,ot=_e!==null&&_e.memoizedState!==null||U;_e=Jj;var st=U;if(Jj=_,(U=ot)&&!st)for(V$1=d;V$1!==null;)_=V$1,ot=_.child,_.tag===22&&_.memoizedState!==null?jk(d):ot!==null?(ot.return=_,V$1=ot):jk(d);for(;b!==null;)V$1=b,ik(b),b=b.sibling;V$1=d,Jj=_e,U=st}kk(o)}else d.subtreeFlags&8772&&b!==null?(b.return=d,V$1=b):kk(o)}}function kk(o){for(;V$1!==null;){var e=V$1;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var a=e.stateNode;if(e.flags&4&&!U)if(s===null)a.componentDidMount();else{var d=e.elementType===e.type?s.memoizedProps:Ci(e.type,s.memoizedProps);a.componentDidUpdate(d,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var b=e.updateQueue;b!==null&&sh(e,b,a);break;case 3:var _=e.updateQueue;if(_!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}sh(e,_,s)}break;case 5:var _e=e.stateNode;if(s===null&&e.flags&4){s=_e;var ot=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":ot.autoFocus&&s.focus();break;case"img":ot.src&&(s.src=ot.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var st=e.alternate;if(st!==null){var ct=st.memoizedState;if(ct!==null){var ft=ct.dehydrated;ft!==null&&bd(ft)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Rj(e)}catch(mt){W(e,e.return,mt)}}if(e===o){V$1=null;break}if(s=e.sibling,s!==null){s.return=e.return,V$1=s;break}V$1=e.return}}function gk(o){for(;V$1!==null;){var e=V$1;if(e===o){V$1=null;break}var s=e.sibling;if(s!==null){s.return=e.return,V$1=s;break}V$1=e.return}}function jk(o){for(;V$1!==null;){var e=V$1;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Qj(4,e)}catch(ot){W(e,s,ot)}break;case 1:var a=e.stateNode;if(typeof a.componentDidMount=="function"){var d=e.return;try{a.componentDidMount()}catch(ot){W(e,d,ot)}}var b=e.return;try{Rj(e)}catch(ot){W(e,b,ot)}break;case 5:var _=e.return;try{Rj(e)}catch(ot){W(e,_,ot)}}}catch(ot){W(e,e.return,ot)}if(e===o){V$1=null;break}var _e=e.sibling;if(_e!==null){_e.return=e.return,V$1=_e;break}V$1=e.return}}var lk=Math.ceil,mk=ua$1.ReactCurrentDispatcher,nk=ua$1.ReactCurrentOwner,ok=ua$1.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z$1=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk$1=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(o){return o.mode&1?K&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(o=C,o!==0||(o=window.event,o=o===void 0?16:jd(o.type)),o):1}function gi(o,e,s,a){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(o,s,a),(!(K&2)||o!==Q)&&(o===Q&&(!(K&2)&&(qk|=s),T===4&&Ck(o,Z$1)),Dk(o,a),s===1&&K===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(o,e){var s=o.callbackNode;wc(o,e);var a=uc(o,o===Q?Z$1:0);if(a===0)s!==null&&bc(s),o.callbackNode=null,o.callbackPriority=0;else if(e=a&-a,o.callbackPriority!==e){if(s!=null&&bc(s),e===1)o.tag===0?ig(Ek.bind(null,o)):hg(Ek.bind(null,o)),Jf(function(){!(K&6)&&jg()}),s=null;else{switch(Dc(a)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Fk(s,Gk.bind(null,o))}o.callbackPriority=e,o.callbackNode=s}}function Gk(o,e){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var s=o.callbackNode;if(Hk()&&o.callbackNode!==s)return null;var a=uc(o,o===Q?Z$1:0);if(a===0)return null;if(a&30||a&o.expiredLanes||e)e=Ik(o,a);else{e=a;var d=K;K|=2;var b=Jk();(Q!==o||Z$1!==e)&&(uk=null,Gj=B()+500,Kk(o,e));do try{Lk();break}catch(_e){Mk(o,_e)}while(!0);$g(),mk.current=b,K=d,Y!==null?e=0:(Q=null,Z$1=0,e=T)}if(e!==0){if(e===2&&(d=xc(o),d!==0&&(a=d,e=Nk(o,d))),e===1)throw s=pk,Kk(o,0),Ck(o,a),Dk(o,B()),s;if(e===6)Ck(o,a);else{if(d=o.current.alternate,!(a&30)&&!Ok(d)&&(e=Ik(o,a),e===2&&(b=xc(o),b!==0&&(a=b,e=Nk(o,b))),e===1))throw s=pk,Kk(o,0),Ck(o,a),Dk(o,B()),s;switch(o.finishedWork=d,o.finishedLanes=a,e){case 0:case 1:throw Error(p(345));case 2:Pk(o,tk$1,uk);break;case 3:if(Ck(o,a),(a&130023424)===a&&(e=fk+500-B(),10<e)){if(uc(o,0)!==0)break;if(d=o.suspendedLanes,(d&a)!==a){R(),o.pingedLanes|=o.suspendedLanes&d;break}o.timeoutHandle=Ff(Pk.bind(null,o,tk$1,uk),e);break}Pk(o,tk$1,uk);break;case 4:if(Ck(o,a),(a&4194240)===a)break;for(e=o.eventTimes,d=-1;0<a;){var _=31-oc(a);b=1<<_,_=e[_],_>d&&(d=_),a&=~b}if(a=d,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){o.timeoutHandle=Ff(Pk.bind(null,o,tk$1,uk),a);break}Pk(o,tk$1,uk);break;case 5:Pk(o,tk$1,uk);break;default:throw Error(p(329))}}}return Dk(o,B()),o.callbackNode===s?Gk.bind(null,o):null}function Nk(o,e){var s=sk;return o.current.memoizedState.isDehydrated&&(Kk(o,e).flags|=256),o=Ik(o,e),o!==2&&(e=tk$1,tk$1=s,e!==null&&Fj(e)),o}function Fj(o){tk$1===null?tk$1=o:tk$1.push.apply(tk$1,o)}function Ok(o){for(var e=o;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var d=s[a],b=d.getSnapshot;d=d.value;try{if(!He(b(),d))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===o)break;for(;e.sibling===null;){if(e.return===null||e.return===o)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(o,e){for(e&=~rk,e&=~qk,o.suspendedLanes|=e,o.pingedLanes&=~e,o=o.expirationTimes;0<e;){var s=31-oc(e),a=1<<s;o[s]=-1,e&=~a}}function Ek(o){if(K&6)throw Error(p(327));Hk();var e=uc(o,0);if(!(e&1))return Dk(o,B()),null;var s=Ik(o,e);if(o.tag!==0&&s===2){var a=xc(o);a!==0&&(e=a,s=Nk(o,a))}if(s===1)throw s=pk,Kk(o,0),Ck(o,e),Dk(o,B()),s;if(s===6)throw Error(p(345));return o.finishedWork=o.current.alternate,o.finishedLanes=e,Pk(o,tk$1,uk),Dk(o,B()),null}function Qk(o,e){var s=K;K|=1;try{return o(e)}finally{K=s,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(o){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var s=ok.transition,a=C;try{if(ok.transition=null,C=1,o)return o()}finally{C=a,ok.transition=s,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(o,e){o.finishedWork=null,o.finishedLanes=0;var s=o.timeoutHandle;if(s!==-1&&(o.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var a=s;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}s=s.return}if(Q=o,Y=o=Pg(o.current,null),Z$1=fj=e,T=0,pk=null,rk=qk=rh=0,tk$1=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(s=fh[e],a=s.interleaved,a!==null){s.interleaved=null;var d=a.next,b=s.pending;if(b!==null){var _=b.next;b.next=d,a.next=_}s.pending=a}fh=null}return o}function Mk(o,e){do{var s=Y;try{if($g(),Fh.current=Rh,Ih){for(var a=M$1.memoizedState;a!==null;){var d=a.queue;d!==null&&(d.pending=null),a=a.next}Ih=!1}if(Hh=0,O$1=N=M$1=null,Jh=!1,Kh=0,nk.current=null,s===null||s.return===null){T=1,pk=e,Y=null;break}e:{var b=o,_=s.return,_e=s,ot=e;if(e=Z$1,_e.flags|=32768,ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var st=ot,ct=_e,ft=ct.tag;if(!(ct.mode&1)&&(ft===0||ft===11||ft===15)){var mt=ct.alternate;mt?(ct.updateQueue=mt.updateQueue,ct.memoizedState=mt.memoizedState,ct.lanes=mt.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var bt=Ui(_);if(bt!==null){bt.flags&=-257,Vi(bt,_,_e,b,e),bt.mode&1&&Si(b,st,e),e=bt,ot=st;var wt=e.updateQueue;if(wt===null){var Ct=new Set;Ct.add(ot),e.updateQueue=Ct}else wt.add(ot);break e}else{if(!(e&1)){Si(b,st,e),tj();break e}ot=Error(p(426))}}else if(I$1&&_e.mode&1){var Rt=Ui(_);if(Rt!==null){!(Rt.flags&65536)&&(Rt.flags|=256),Vi(Rt,_,_e,b,e),Jg(Ji(ot,_e));break e}}b=ot=Ji(ot,_e),T!==4&&(T=2),sk===null?sk=[b]:sk.push(b),b=_;do{switch(b.tag){case 3:b.flags|=65536,e&=-e,b.lanes|=e;var It=Ni(b,ot,e);ph(b,It);break e;case 1:_e=ot;var Pt=b.type,Tt=b.stateNode;if(!(b.flags&128)&&(typeof Pt.getDerivedStateFromError=="function"||Tt!==null&&typeof Tt.componentDidCatch=="function"&&(Ri===null||!Ri.has(Tt)))){b.flags|=65536,e&=-e,b.lanes|=e;var Gt=Qi(b,_e,e);ph(b,Gt);break e}}b=b.return}while(b!==null)}Sk(s)}catch(Jt){e=Jt,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(!0)}function Jk(){var o=mk.current;return mk.current=Rh,o===null?Rh:o}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z$1)}function Ik(o,e){var s=K;K|=2;var a=Jk();(Q!==o||Z$1!==e)&&(uk=null,Kk(o,e));do try{Tk();break}catch(d){Mk(o,d)}while(!0);if($g(),K=s,mk.current=a,Y!==null)throw Error(p(261));return Q=null,Z$1=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(o){var e=Vk(o.alternate,o,fj);o.memoizedProps=o.pendingProps,e===null?Sk(o):Y=e,nk.current=null}function Sk(o){var e=o;do{var s=e.alternate;if(o=e.return,e.flags&32768){if(s=Ij(s,e),s!==null){s.flags&=32767,Y=s;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{T=6,Y=null;return}}else if(s=Ej(s,e,fj),s!==null){Y=s;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=o}while(e!==null);T===0&&(T=5)}function Pk(o,e,s){var a=C,d=ok.transition;try{ok.transition=null,C=1,Wk(o,e,s,a)}finally{ok.transition=d,C=a}return null}function Wk(o,e,s,a){do Hk();while(wk!==null);if(K&6)throw Error(p(327));s=o.finishedWork;var d=o.finishedLanes;if(s===null)return null;if(o.finishedWork=null,o.finishedLanes=0,s===o.current)throw Error(p(177));o.callbackNode=null,o.callbackPriority=0;var b=s.lanes|s.childLanes;if(Bc(o,b),o===Q&&(Y=Q=null,Z$1=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),b=(s.flags&15990)!==0,s.subtreeFlags&15990||b){b=ok.transition,ok.transition=null;var _=C;C=1;var _e=K;K|=4,nk.current=null,Oj(o,s),dk(s,o),Oe(Df),dd=!!Cf,Df=Cf=null,o.current=s,hk(s),dc(),K=_e,C=_,ok.transition=b}else o.current=s;if(vk&&(vk=!1,wk=o,xk=d),b=o.pendingLanes,b===0&&(Ri=null),mc(s.stateNode),Dk(o,B()),e!==null)for(a=o.onRecoverableError,s=0;s<e.length;s++)d=e[s],a(d.value,{componentStack:d.stack,digest:d.digest});if(Oi)throw Oi=!1,o=Pi,Pi=null,o;return xk&1&&o.tag!==0&&Hk(),b=o.pendingLanes,b&1?o===zk?yk++:(yk=0,zk=o):yk=0,jg(),null}function Hk(){if(wk!==null){var o=Dc(xk),e=ok.transition,s=C;try{if(ok.transition=null,C=16>o?16:o,wk===null)var a=!1;else{if(o=wk,wk=null,xk=0,K&6)throw Error(p(331));var d=K;for(K|=4,V$1=o.current;V$1!==null;){var b=V$1,_=b.child;if(V$1.flags&16){var _e=b.deletions;if(_e!==null){for(var ot=0;ot<_e.length;ot++){var st=_e[ot];for(V$1=st;V$1!==null;){var ct=V$1;switch(ct.tag){case 0:case 11:case 15:Pj(8,ct,b)}var ft=ct.child;if(ft!==null)ft.return=ct,V$1=ft;else for(;V$1!==null;){ct=V$1;var mt=ct.sibling,bt=ct.return;if(Sj(ct),ct===st){V$1=null;break}if(mt!==null){mt.return=bt,V$1=mt;break}V$1=bt}}}var wt=b.alternate;if(wt!==null){var Ct=wt.child;if(Ct!==null){wt.child=null;do{var Rt=Ct.sibling;Ct.sibling=null,Ct=Rt}while(Ct!==null)}}V$1=b}}if(b.subtreeFlags&2064&&_!==null)_.return=b,V$1=_;else e:for(;V$1!==null;){if(b=V$1,b.flags&2048)switch(b.tag){case 0:case 11:case 15:Pj(9,b,b.return)}var It=b.sibling;if(It!==null){It.return=b.return,V$1=It;break e}V$1=b.return}}var Pt=o.current;for(V$1=Pt;V$1!==null;){_=V$1;var Tt=_.child;if(_.subtreeFlags&2064&&Tt!==null)Tt.return=_,V$1=Tt;else e:for(_=Pt;V$1!==null;){if(_e=V$1,_e.flags&2048)try{switch(_e.tag){case 0:case 11:case 15:Qj(9,_e)}}catch(Jt){W(_e,_e.return,Jt)}if(_e===_){V$1=null;break e}var Gt=_e.sibling;if(Gt!==null){Gt.return=_e.return,V$1=Gt;break e}V$1=_e.return}}if(K=d,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,o)}catch{}a=!0}return a}finally{C=s,ok.transition=e}}return!1}function Xk(o,e,s){e=Ji(s,e),e=Ni(o,e,1),o=nh(o,e,1),e=R(),o!==null&&(Ac(o,1,e),Dk(o,e))}function W(o,e,s){if(o.tag===3)Xk(o,o,s);else for(;e!==null;){if(e.tag===3){Xk(e,o,s);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){o=Ji(s,o),o=Qi(e,o,1),e=nh(e,o,1),o=R(),e!==null&&(Ac(e,1,o),Dk(e,o));break}}e=e.return}}function Ti(o,e,s){var a=o.pingCache;a!==null&&a.delete(e),e=R(),o.pingedLanes|=o.suspendedLanes&s,Q===o&&(Z$1&s)===s&&(T===4||T===3&&(Z$1&130023424)===Z$1&&500>B()-fk?Kk(o,0):rk|=s),Dk(o,e)}function Yk(o,e){e===0&&(o.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var s=R();o=ih(o,e),o!==null&&(Ac(o,e,s),Dk(o,s))}function uj(o){var e=o.memoizedState,s=0;e!==null&&(s=e.retryLane),Yk(o,s)}function bk(o,e){var s=0;switch(o.tag){case 13:var a=o.stateNode,d=o.memoizedState;d!==null&&(s=d.retryLane);break;case 19:a=o.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(e),Yk(o,s)}var Vk;Vk=function(o,e,s){if(o!==null)if(o.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(o.lanes&s)&&!(e.flags&128))return dh=!1,yj(o,e,s);dh=!!(o.flags&131072)}else dh=!1,I$1&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var a=e.type;ij(o,e),o=e.pendingProps;var d=Yf(e,H.current);ch(e,s),d=Nh(null,e,a,o,d,s);var b=Sh();return e.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(a)?(b=!0,cg(e)):b=!1,e.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,kh(e),d.updater=Ei,e.stateNode=d,d._reactInternals=e,Ii(e,a,o,s),e=jj(null,e,a,!0,b,s)):(e.tag=0,I$1&&b&&vg(e),Xi(null,e,d,s),e=e.child),e;case 16:a=e.elementType;e:{switch(ij(o,e),o=e.pendingProps,d=a._init,a=d(a._payload),e.type=a,d=e.tag=Zk(a),o=Ci(a,o),d){case 0:e=cj(null,e,a,o,s);break e;case 1:e=hj(null,e,a,o,s);break e;case 11:e=Yi(null,e,a,o,s);break e;case 14:e=$i(null,e,a,Ci(a.type,o),s);break e}throw Error(p(306,a,""))}return e;case 0:return a=e.type,d=e.pendingProps,d=e.elementType===a?d:Ci(a,d),cj(o,e,a,d,s);case 1:return a=e.type,d=e.pendingProps,d=e.elementType===a?d:Ci(a,d),hj(o,e,a,d,s);case 3:e:{if(kj(e),o===null)throw Error(p(387));a=e.pendingProps,b=e.memoizedState,d=b.element,lh(o,e),qh(e,a,null,s);var _=e.memoizedState;if(a=_.element,b.isDehydrated)if(b={element:a,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},e.updateQueue.baseState=b,e.memoizedState=b,e.flags&256){d=Ji(Error(p(423)),e),e=lj(o,e,a,s,d);break e}else if(a!==d){d=Ji(Error(p(424)),e),e=lj(o,e,a,s,d);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I$1=!0,zg=null,s=Vg(e,null,a,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),a===d){e=Zi(o,e,s);break e}Xi(o,e,a,s)}e=e.child}return e;case 5:return Ah(e),o===null&&Eg(e),a=e.type,d=e.pendingProps,b=o!==null?o.memoizedProps:null,_=d.children,Ef(a,d)?_=null:b!==null&&Ef(a,b)&&(e.flags|=32),gj(o,e),Xi(o,e,_,s),e.child;case 6:return o===null&&Eg(e),null;case 13:return oj(o,e,s);case 4:return yh(e,e.stateNode.containerInfo),a=e.pendingProps,o===null?e.child=Ug(e,null,a,s):Xi(o,e,a,s),e.child;case 11:return a=e.type,d=e.pendingProps,d=e.elementType===a?d:Ci(a,d),Yi(o,e,a,d,s);case 7:return Xi(o,e,e.pendingProps,s),e.child;case 8:return Xi(o,e,e.pendingProps.children,s),e.child;case 12:return Xi(o,e,e.pendingProps.children,s),e.child;case 10:e:{if(a=e.type._context,d=e.pendingProps,b=e.memoizedProps,_=d.value,G(Wg,a._currentValue),a._currentValue=_,b!==null)if(He(b.value,_)){if(b.children===d.children&&!Wf.current){e=Zi(o,e,s);break e}}else for(b=e.child,b!==null&&(b.return=e);b!==null;){var _e=b.dependencies;if(_e!==null){_=b.child;for(var ot=_e.firstContext;ot!==null;){if(ot.context===a){if(b.tag===1){ot=mh(-1,s&-s),ot.tag=2;var st=b.updateQueue;if(st!==null){st=st.shared;var ct=st.pending;ct===null?ot.next=ot:(ot.next=ct.next,ct.next=ot),st.pending=ot}}b.lanes|=s,ot=b.alternate,ot!==null&&(ot.lanes|=s),bh(b.return,s,e),_e.lanes|=s;break}ot=ot.next}}else if(b.tag===10)_=b.type===e.type?null:b.child;else if(b.tag===18){if(_=b.return,_===null)throw Error(p(341));_.lanes|=s,_e=_.alternate,_e!==null&&(_e.lanes|=s),bh(_,s,e),_=b.sibling}else _=b.child;if(_!==null)_.return=b;else for(_=b;_!==null;){if(_===e){_=null;break}if(b=_.sibling,b!==null){b.return=_.return,_=b;break}_=_.return}b=_}Xi(o,e,d.children,s),e=e.child}return e;case 9:return d=e.type,a=e.pendingProps.children,ch(e,s),d=eh(d),a=a(d),e.flags|=1,Xi(o,e,a,s),e.child;case 14:return a=e.type,d=Ci(a,e.pendingProps),d=Ci(a.type,d),$i(o,e,a,d,s);case 15:return bj(o,e,e.type,e.pendingProps,s);case 17:return a=e.type,d=e.pendingProps,d=e.elementType===a?d:Ci(a,d),ij(o,e),e.tag=1,Zf(a)?(o=!0,cg(e)):o=!1,ch(e,s),Gi(e,a,d),Ii(e,a,d,s),jj(null,e,a,!0,o,s);case 19:return xj(o,e,s);case 22:return dj(o,e,s)}throw Error(p(156,e.tag))};function Fk(o,e){return ac(o,e)}function $k(o,e,s,a){this.tag=o,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(o,e,s,a){return new $k(o,e,s,a)}function aj(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Zk(o){if(typeof o=="function")return aj(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Da)return 11;if(o===Ga)return 14}return 2}function Pg(o,e){var s=o.alternate;return s===null?(s=Bg(o.tag,e,o.key,o.mode),s.elementType=o.elementType,s.type=o.type,s.stateNode=o.stateNode,s.alternate=o,o.alternate=s):(s.pendingProps=e,s.type=o.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=o.flags&14680064,s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=o.sibling,s.index=o.index,s.ref=o.ref,s}function Rg(o,e,s,a,d,b){var _=2;if(a=o,typeof o=="function")aj(o)&&(_=1);else if(typeof o=="string")_=5;else e:switch(o){case ya:return Tg(s.children,d,b,e);case za:_=8,d|=8;break;case Aa:return o=Bg(12,s,e,d|2),o.elementType=Aa,o.lanes=b,o;case Ea:return o=Bg(13,s,e,d),o.elementType=Ea,o.lanes=b,o;case Fa:return o=Bg(19,s,e,d),o.elementType=Fa,o.lanes=b,o;case Ia:return pj(s,d,b,e);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ba:_=10;break e;case Ca:_=9;break e;case Da:_=11;break e;case Ga:_=14;break e;case Ha:_=16,a=null;break e}throw Error(p(130,o==null?o:typeof o,""))}return e=Bg(_,s,e,d),e.elementType=o,e.type=a,e.lanes=b,e}function Tg(o,e,s,a){return o=Bg(7,o,a,e),o.lanes=s,o}function pj(o,e,s,a){return o=Bg(22,o,a,e),o.elementType=Ia,o.lanes=s,o.stateNode={isHidden:!1},o}function Qg(o,e,s){return o=Bg(6,o,null,e),o.lanes=s,o}function Sg(o,e,s){return e=Bg(4,o.children!==null?o.children:[],o.key,e),e.lanes=s,e.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},e}function al(o,e,s,a,d){this.tag=e,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function bl(o,e,s,a,d,b,_,_e,ot){return o=new al(o,e,s,_e,ot),e===1?(e=1,b===!0&&(e|=8)):e=0,b=Bg(3,null,null,e),o.current=b,b.stateNode=o,b.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(b),o}function cl(o,e,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:o,containerInfo:e,implementation:s}}function dl(o){if(!o)return Vf;o=o._reactInternals;e:{if(Vb(o)!==o||o.tag!==1)throw Error(p(170));var e=o;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(o.tag===1){var s=o.type;if(Zf(s))return bg(o,s,e)}return e}function el(o,e,s,a,d,b,_,_e,ot){return o=bl(s,a,!0,o,d,b,_,_e,ot),o.context=dl(null),s=o.current,a=R(),d=yi(s),b=mh(a,d),b.callback=e??null,nh(s,b,d),o.current.lanes=d,Ac(o,d,a),Dk(o,a),o}function fl(o,e,s,a){var d=e.current,b=R(),_=yi(d);return s=dl(s),e.context===null?e.context=s:e.pendingContext=s,e=mh(b,_),e.payload={element:o},a=a===void 0?null:a,a!==null&&(e.callback=a),o=nh(d,e,_),o!==null&&(gi(o,d,_,b),oh(o,d,_)),_}function gl(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function hl(o,e){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var s=o.retryLane;o.retryLane=s!==0&&s<e?s:e}}function il(o,e){hl(o,e),(o=o.alternate)&&hl(o,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(o){console.error(o)};function ll(o){this._internalRoot=o}ml.prototype.render=ll.prototype.render=function(o){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(o,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var e=o.containerInfo;Rk(function(){fl(null,o,null,null)}),e[uf]=null}};function ml(o){this._internalRoot=o}ml.prototype.unstable_scheduleHydration=function(o){if(o){var e=Hc();o={blockedOn:null,target:o,priority:e};for(var s=0;s<Qc.length&&e!==0&&e<Qc[s].priority;s++);Qc.splice(s,0,o),s===0&&Vc(o)}};function nl(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function ol(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(o,e,s,a,d){if(d){if(typeof a=="function"){var b=a;a=function(){var st=gl(_);b.call(st)}}var _=el(e,a,o,0,null,!1,!1,"",pl);return o._reactRootContainer=_,o[uf]=_.current,sf(o.nodeType===8?o.parentNode:o),Rk(),_}for(;d=o.lastChild;)o.removeChild(d);if(typeof a=="function"){var _e=a;a=function(){var st=gl(ot);_e.call(st)}}var ot=bl(o,0,!1,null,null,!1,!1,"",pl);return o._reactRootContainer=ot,o[uf]=ot.current,sf(o.nodeType===8?o.parentNode:o),Rk(function(){fl(e,ot,s,a)}),ot}function rl(o,e,s,a,d){var b=s._reactRootContainer;if(b){var _=b;if(typeof d=="function"){var _e=d;d=function(){var ot=gl(_);_e.call(ot)}}fl(e,_,o,d)}else _=ql(s,e,o,d,a);return gl(_)}Ec=function(o){switch(o.tag){case 3:var e=o.stateNode;if(e.current.memoizedState.isDehydrated){var s=tc(e.pendingLanes);s!==0&&(Cc(e,s|1),Dk(e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var a=ih(o,1);if(a!==null){var d=R();gi(a,o,1,d)}}),il(o,1)}};Fc=function(o){if(o.tag===13){var e=ih(o,134217728);if(e!==null){var s=R();gi(e,o,134217728,s)}il(o,134217728)}};Gc=function(o){if(o.tag===13){var e=yi(o),s=ih(o,e);if(s!==null){var a=R();gi(s,o,e,a)}il(o,e)}};Hc=function(){return C};Ic=function(o,e){var s=C;try{return C=o,e()}finally{C=s}};yb=function(o,e,s){switch(e){case"input":if(bb(o,s),e=s.name,s.type==="radio"&&e!=null){for(s=o;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var a=s[e];if(a!==o&&a.form===o.form){var d=Db(a);if(!d)throw Error(p(90));Wa(a),bb(a,d)}}}break;case"textarea":ib(o,s);break;case"select":e=s.value,e!=null&&fb(o,!!s.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Zb(o),o===null?null:o.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(o,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(o,e,null,s)};reactDom_production_min.createRoot=function(o,e){if(!nl(o))throw Error(p(299));var s=!1,a="",d=kl;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onRecoverableError!==void 0&&(d=e.onRecoverableError)),e=bl(o,1,!1,null,null,s,!1,a,d),o[uf]=e.current,sf(o.nodeType===8?o.parentNode:o),new ll(e)};reactDom_production_min.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var e=o._reactInternals;if(e===void 0)throw typeof o.render=="function"?Error(p(188)):(o=Object.keys(o).join(","),Error(p(268,o)));return o=Zb(e),o=o===null?null:o.stateNode,o};reactDom_production_min.flushSync=function(o){return Rk(o)};reactDom_production_min.hydrate=function(o,e,s){if(!ol(e))throw Error(p(200));return rl(null,o,e,!0,s)};reactDom_production_min.hydrateRoot=function(o,e,s){if(!nl(o))throw Error(p(405));var a=s!=null&&s.hydratedSources||null,d=!1,b="",_=kl;if(s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(b=s.identifierPrefix),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),e=el(e,null,o,1,s??null,d,!1,b,_),o[uf]=e.current,sf(o),a)for(o=0;o<a.length;o++)s=a[o],d=s._getVersion,d=d(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,d]:e.mutableSourceEagerHydrationData.push(s,d);return new ml(e)};reactDom_production_min.render=function(o,e,s){if(!ol(e))throw Error(p(200));return rl(null,o,e,!1,s)};reactDom_production_min.unmountComponentAtNode=function(o){if(!ol(o))throw Error(p(40));return o._reactRootContainer?(Rk(function(){rl(null,null,o,!1,function(){o._reactRootContainer=null,o[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(o,e,s,a){if(!ol(s))throw Error(p(200));if(o==null||o._reactInternals===void 0)throw Error(p(38));return rl(o,e,s,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(o){console.error(o)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs$2(reactDomExports);var createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;function symToStr(o){return Object.keys(o)[0]}let wrap$1;function setBrandTopAndHomeLinkProps(o){wrap$1=o}function getBrandTopAndHomeLinkProps(){return wrap$1}var __rest$9=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const Footer=reactExports.memo(reactExports.forwardRef((o,e)=>{const{id:s,className:a,classes:d={},contentDescription:b,websiteMapLinkProps:_,accessibilityLinkProps:_e,accessibility:ot,termsLinkProps:st,bottomItems:ct=[],partnersLogos:ft,operatorLogo:mt,license:bt,brandTop:wt,homeLinkProps:Ct,style:Rt,linkList:It,domains:Pt=["info.gouv.fr","service-public.fr","legifrance.gouv.fr","data.gouv.fr"]}=o,Tt=__rest$9(o,["id","className","classes","contentDescription","websiteMapLinkProps","accessibilityLinkProps","accessibility","termsLinkProps","bottomItems","partnersLogos","operatorLogo","license","brandTop","homeLinkProps","style","linkList","domains"]);assert$1();const Gt=s??"fr-footer",{brandTop:Jt,homeLinkProps:qt}=(()=>{const ln=getBrandTopAndHomeLinkProps(),Wt=wt??(ln==null?void 0:ln.brandTop),so=Ct??(ln==null?void 0:ln.homeLinkProps),pn=" hasn't been provided to the Footer and we cannot retrieve it from the Header (it's probably client side)";if(Wt===void 0)throw new Error(symToStr({brandTop:Wt})+pn);if(so===void 0)throw new Error(symToStr({homeLinkProps:so})+pn);return{brandTop:Wt,homeLinkProps:so}})(),{Link:Nt}=getLink(),{t:Qt}=useTranslation$7(),{main:fn,sub:Mn=[]}=ft??{};return React.createElement("footer",Object.assign({id:Gt,className:cx$1(fr.cx("fr-footer"),d.root,a),role:"contentinfo",ref:e,style:Rt},Tt),It!==void 0&&React.createElement("div",{className:fr.cx("fr-footer__top")},React.createElement("div",{className:fr.cx("fr-container")},React.createElement("div",{className:fr.cx("fr-grid-row","fr-grid-row--gutters")},It.map((ln,Wt)=>ln!==void 0&&React.createElement("div",{key:`fr-footer__top-cat-${Wt}`,className:fr.cx("fr-col-12","fr-col-sm-3","fr-col-md-2")},(ln==null?void 0:ln.categoryName)&&React.createElement("h3",{className:fr.cx("fr-footer__top-cat")},ln==null?void 0:ln.categoryName),React.createElement("ul",{className:fr.cx("fr-footer__top-list")},ln==null?void 0:ln.links.map((so,pn)=>React.createElement("li",{key:`fr-footer__top-link-${pn}`},React.createElement(Nt,Object.assign({},so==null?void 0:so.linkProps,{className:fr.cx("fr-footer__top-link")}),so==null?void 0:so.text))))))))),React.createElement("div",{className:fr.cx("fr-container")},React.createElement("div",{className:cx$1(fr.cx("fr-footer__body"),d.body)},React.createElement("div",{className:cx$1(fr.cx("fr-footer__brand","fr-enlarge-link"),d.brand)},(()=>{const ln=React.createElement("p",{className:cx$1(fr.cx("fr-logo"),d.logo)},Jt);return mt!==void 0?ln:React.createElement(Nt,Object.assign({},qt),ln)})(),mt!==void 0&&React.createElement(Nt,Object.assign({},qt,{className:cx$1(fr.cx("fr-footer__brand-link"),d.brandLink,qt.className)}),React.createElement("img",{className:cx$1(fr.cx("fr-footer__logo"),d.operatorLogo),style:(()=>{switch(mt.orientation){case"vertical":return{width:"3.5rem"};case"horizontal":return{maxWidth:"9.0625rem"}}})(),src:mt.imgUrl,alt:mt.alt}))),React.createElement("div",{className:cx$1(fr.cx("fr-footer__content"),d.content)},b!==void 0&&React.createElement("p",{className:cx$1(fr.cx("fr-footer__content-desc"),d.contentDesc)},b),React.createElement("ul",{className:cx$1(fr.cx("fr-footer__content-list"),d.contentList)},Pt.map((ln,Wt)=>React.createElement("li",{className:cx$1(fr.cx("fr-footer__content-item"),d.contentItem),key:Wt},React.createElement("a",{className:cx$1(fr.cx("fr-footer__content-link"),d.contentLink),target:"_blank",href:`https://${ln}`,title:`${ln} - ${Qt("open new window")}`},ln)))))),ft!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners"),d.partners)},React.createElement("h4",{className:cx$1(fr.cx("fr-footer__partners-title"),d.partnersTitle)},Qt("our partners")),React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners-logos"),d.partnersLogos)},fn!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners-main"),d.partnersMain)},(()=>{var ln,Wt;const so=React.createElement("img",{alt:fn.alt,style:{height:"5.625rem"},src:fn.imgUrl,className:cx$1(fr.cx("fr-footer__logo"),d.logo)});return fn.linkProps!==void 0||fn.href!==void 0?React.createElement(Nt,Object.assign({},fn.linkProps,{href:(ln=fn.href)!==null&&ln!==void 0?ln:(Wt=fn.linkProps)===null||Wt===void 0?void 0:Wt.href,className:cx$1(fr.cx("fr-footer__partners-link","fr-raw-link"),d.partnersLink)}),so):so})()),Mn.length!==0&&React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners-sub"),d.partnersSub)},React.createElement("ul",null,Mn.map((ln,Wt)=>{var so,pn;const hn=React.createElement("img",{alt:ln.alt,src:ln.imgUrl,style:{height:"5.625rem"},className:cx$1(fr.cx("fr-footer__logo"),d.logo)}),Mt=ln.linkProps!==void 0||ln.href!==void 0;return React.createElement("li",{key:Wt},Mt?React.createElement(Nt,Object.assign({},ln.linkProps,{href:(so=ln.href)!==null&&so!==void 0?so:(pn=ln.linkProps)===null||pn===void 0?void 0:pn.href,className:cx$1(fr.cx("fr-footer__partners-link","fr-raw-link"),d.partnersLink)}),hn):hn)}))))),React.createElement("div",{className:cx$1(fr.cx("fr-footer__bottom"),d.bottom)},React.createElement("ul",{className:cx$1(fr.cx("fr-footer__bottom-list"),d.bottomList)},[..._===void 0?[]:[id$1({text:Qt("website map"),linkProps:_})],id$1({text:`${Qt("accessibility")} : ${Qt(ot)}`,linkProps:_e??{}}),...st===void 0?[]:[id$1({text:Qt("terms"),linkProps:st})],...ct].map((ln,Wt)=>React.createElement("li",{className:cx$1(fr.cx("fr-footer__bottom-item"),d.bottomItem,a),key:Wt},typeGuard(ln,ln instanceof Object&&"text"in ln)?React.createElement(FooterBottomItem,{classes:{bottomLink:d.bottomLink},bottomItem:ln}):ln))),React.createElement("div",{className:cx$1(fr.cx("fr-footer__bottom-copy"),d.bottomCopy)},React.createElement("p",null,bt===void 0?Qt("license mention",{licenseUrl:"https://github.com/etalab/licence-ouverte/blob/master/LO.md"}):bt)))))}));Footer.displayName=symToStr({Footer});const{useTranslation:useTranslation$7,addFooterTranslations}=createComponentI18nApi({componentName:symToStr({Footer}),frMessages:{"hide message":"Masquer le message","website map":"Plan du site",accessibility:"Accessibilit","non compliant":"non conforme","partially compliant":"partiellement conforme","fully compliant":"totalement conforme",terms:"Mentions lgales","cookies management":"Gestion des cookies","license mention":o=>React.createElement(React.Fragment,null,"Sauf mention explicite de proprit intellectuelle dtenue par des tiers, les contenus de ce site sont proposs sous"," ",React.createElement("a",{href:o.licenseUrl,target:"_blank",title:"licence etalab-2.0 - ouvre une nouvelle fentre"},"licence etalab-2.0")),"our partners":"Nos partenaires","open new window":"ouvre une nouvelle fentre"}});addFooterTranslations({lang:"en",messages:{"hide message":"Hide the message","website map":"Website map",accessibility:"Accessibility","non compliant":"non compliant","partially compliant":"partially compliant","fully compliant":"fully compliant","license mention":o=>React.createElement(React.Fragment,null,"Unless stated otherwise, all content of this website is under the"," ",React.createElement("a",{href:o.licenseUrl,target:"_blank",title:"etalab-2.0 license - open a new window"},"etalab-2.0 license")),"open new window":"open new window"}});addFooterTranslations({lang:"es",messages:{"hide message":"Occultar el mesage"}});function FooterBottomItem(o){const{className:e,bottomItem:s,classes:a={}}=o,{Link:d}=getLink(),b=cx$1(fr.cx("fr-footer__bottom-link",...s.iconId!==void 0?[s.iconId,"fr-link--icon-left"]:[]),a.bottomLink,a.root,e);return s.linkProps!==void 0?Object.keys(s.linkProps).length===0?React.createElement("span",{className:b},s.text):React.createElement(d,Object.assign({},s.linkProps,{className:cx$1(b,s.linkProps.className)}),s.text):React.createElement("button",Object.assign({},s.buttonProps,{className:cx$1(b,s.buttonProps.className)}),s.text)}function generateValidHtmlId(o){const{text:e,fallback:s}=o;if(typeof e!="string"||e==="")return s!==void 0?`-${s}`:"";let a=e.replace(/\s+/g,"");return a=a.replace(/[^a-zA-Z0-9]/g,"_"),`-${a}`}var __rest$8=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const Menu=reactExports.memo(reactExports.forwardRef((o,e)=>{const{id:s,classes:a={},style:d,links:b}=o,_=__rest$8(o,["id","classes","style","links"]);assert$1();const{Link:_e}=getLink();return React.createElement("div",Object.assign({className:cx$1(fr.cx("fr-menu"),a.root),style:d,id:s,ref:e},_),React.createElement("ul",{className:cx$1(fr.cx("fr-menu__list"),a.list)},b.map(({text:ot,linkProps:st,isActive:ct=!1},ft)=>{var mt;return React.createElement("li",{key:ft},React.createElement(_e,Object.assign({},st,{id:(mt=st.id)!==null&&mt!==void 0?mt:`${s}-link${generateValidHtmlId({text:ot})}-${ft}`,className:cx$1(fr.cx("fr-nav__link"),st.className)},ct&&{"aria-current":"page"}),ot))})))}));Menu.displayName=symToStr({Menu});var __rest$7=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const MegaMenu=reactExports.memo(reactExports.forwardRef((o,e)=>{var s;const{id:a,classes:d={},style:b,leader:_,categories:_e}=o,ot=__rest$7(o,["id","classes","style","leader","categories"]);assert$1();const{t:st}=useTranslation$6(),{Link:ct}=getLink();return React.createElement("div",Object.assign({className:cx$1(fr.cx("fr-mega-menu"),d.root),style:b,tabIndex:-1,id:a,ref:e},ot),React.createElement("div",{className:fr.cx("fr-container","fr-container--fluid","fr-container-lg")},React.createElement("button",{className:fr.cx("fr-link--close","fr-link"),"aria-controls":a},st("close")),React.createElement("div",{className:fr.cx("fr-grid-row","fr-grid-row-lg--gutters")},_!==void 0&&React.createElement("div",{className:fr.cx("fr-col-12","fr-col-lg-8","fr-col-offset-lg-4--right","fr-mb-4v")},React.createElement("div",{className:cx$1(fr.cx("fr-mega-menu__leader"),d.leader)},React.createElement("h4",{className:fr.cx("fr-h4","fr-mb-2v")},_.title),React.createElement("p",{className:fr.cx("fr-hidden","fr-displayed-lg")},_.paragraph),_.link!==void 0&&React.createElement(ct,Object.assign({},_.link.linkProps,{id:(s=_.link.linkProps.id)!==null&&s!==void 0?s:`${a}-leader-link${generateValidHtmlId({text:_.link.text})}`,className:cx$1(fr.cx("fr-link","fr-icon-arrow-right-line","fr-link--icon-right","fr-link--align-on-content"),_.link.linkProps.className)}),_.link.text))),_e.map(({categoryMainLink:ft,links:mt},bt)=>{var wt;return React.createElement("div",{className:fr.cx("fr-col-12","fr-col-lg-3"),key:bt},React.createElement("h5",{className:cx$1(fr.cx("fr-mega-menu__category"),d.category)},React.createElement(ct,Object.assign({},ft.linkProps,{id:(wt=ft.linkProps.id)!==null&&wt!==void 0?wt:`${a}-category-link${generateValidHtmlId({text:ft.text})}-${bt}`,className:cx$1(fr.cx("fr-nav__link"),ft.linkProps.className)}),ft.text)),React.createElement("ul",{className:cx$1(fr.cx("fr-mega-menu__list"),d.list)},mt.map(({linkProps:Ct,text:Rt,isActive:It},Pt)=>{var Tt;return React.createElement("li",{key:Pt},React.createElement(ct,Object.assign({},Ct,{id:(Tt=Ct.id)!==null&&Tt!==void 0?Tt:`${a}-link${generateValidHtmlId({text:Rt})}-${bt}-${Pt}`,className:cx$1(fr.cx("fr-nav__link"),Ct.className)},It?{"aria-current":"page"}:{}),Rt))})))}))))}));MegaMenu.displayName=symToStr({MegaMenu});const{useTranslation:useTranslation$6,addMegaMenuTranslations}=createComponentI18nApi({componentName:symToStr({MegaMenu}),frMessages:{close:"Fermer"}});addMegaMenuTranslations({lang:"en",messages:{close:"Close"}});function useAnalyticsId(o){const{explicitlyProvidedId:e,defaultIdPrefix:s}=o,a=reactExports.useId();return e??`${s}-${a}`}var __rest$6=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const MainNavigation=reactExports.memo(reactExports.forwardRef((o,e)=>{const{className:s,items:a,classes:d={},style:b,id:_}=o,_e=__rest$6(o,["className","items","classes","style","id"]);assert$1();const{t:ot}=useTranslation$5(),{Link:st}=getLink(),ct=useAnalyticsId({explicitlyProvidedId:_,defaultIdPrefix:"main-navigation"}),ft=mt=>`${ct}-menu-${mt}`;return React.createElement("nav",Object.assign({id:ct,className:cx$1(fr.cx("fr-nav"),d.root,s),style:b,role:"navigation","aria-label":ot("main menu"),ref:e},_e),React.createElement("ul",{className:cx$1(fr.cx("fr-nav__list"),d.list)},a.map(({className:mt,text:bt,isActive:wt=!1,linkProps:Ct,menuLinks:Rt=[],megaMenu:It,buttonProps:Pt={}},Tt)=>{var Gt,Jt;return React.createElement("li",{key:Tt,className:cx$1(fr.cx("fr-nav__item"),d.item,mt)},Ct!==void 0?React.createElement(st,Object.assign({},Ct,{id:(Gt=Ct.id)!==null&&Gt!==void 0?Gt:`${ct}-link-${Tt}`,className:cx$1(fr.cx("fr-nav__link"),d.link,Ct.className)},wt&&{"aria-current":"page"}),bt):React.createElement(React.Fragment,null,React.createElement("button",Object.assign({},Pt,{id:(Jt=Pt.id)!==null&&Jt!==void 0?Jt:`${ct}-button-${Tt}`,className:cx$1(fr.cx("fr-nav__btn"),Pt.className,d.btn),"aria-expanded":!1,"aria-controls":ft(Tt)},wt&&{"aria-current":!0}),bt),Rt.length!==0&&React.createElement(Menu,{classes:{root:cx$1(fr.cx("fr-collapse"),d.root),list:d.menuList},links:Rt,id:ft(Tt)}),It!==void 0&&React.createElement(MegaMenu,{classes:{root:cx$1(fr.cx("fr-collapse"),d.megaMenu),leader:d.megaMenuLeader,category:d.megaMenuCategory,list:d.menuList},id:ft(Tt),leader:It.leader,categories:It.categories})))})))}));MainNavigation.displayName=symToStr({MainNavigation});const{useTranslation:useTranslation$5,addMainNavigationTranslations}=createComponentI18nApi({componentName:symToStr({MainNavigation}),frMessages:{"main menu":"Menu principal"}});addMainNavigationTranslations({lang:"en",messages:{"main menu":"Main menu"}});const ArtworkLightSvg="/react-dsfr-playground-vite/assets/light-BcMY7tSa.svg",ArtworkDarkSvg="/react-dsfr-playground-vite/assets/dark-BLRRW9zh.svg",ArtworkSystemSvg="/react-dsfr-playground-vite/assets/system-BJKRkqTi.svg";function getAssetUrl(o){return typeof o=="string"?o:o.src}var __rest$5=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const Button=reactExports.memo(reactExports.forwardRef((o,e)=>{var s,a;const{id:d,className:b,children:_,title:_e,iconId:ot,iconPosition:st="left",priority:ct="primary",size:ft="medium",linkProps:mt,onClick:bt,nativeButtonProps:wt,disabled:Ct,type:Rt,style:It,value:Pt}=o,Tt=__rest$5(o,["id","className","children","title","iconId","iconPosition","priority","size","linkProps","onClick","nativeButtonProps","disabled","type","style","value"]);assert$1();const Gt=useAnalyticsId({defaultIdPrefix:"fr-button",explicitlyProvidedId:d}),{Link:Jt}=getLink(),qt=cx$1(fr.cx("fr-btn",ct!=="primary"&&`fr-btn--${ct==="tertiary no outline"?"tertiary-no-outline":ct}`,ft!=="medium"&&`fr-btn--${(()=>{switch(ft){case"small":return"sm";case"large":return"lg"}})()}`,...ot===void 0?[]:[ot,_!==void 0&&`fr-btn--icon-${st}`]),mt!==void 0&&mt.className,b);return mt!==void 0?React.createElement(Jt,Object.assign({},mt,{id:(s=d??mt.id)!==null&&s!==void 0?s:Gt,title:_e??mt.title,className:cx$1(mt==null?void 0:mt.className,qt),style:Object.assign(Object.assign({},mt==null?void 0:mt.style),It),ref:e},Tt),_):React.createElement("button",Object.assign({},wt,{id:(a=d??(wt==null?void 0:wt.id))!==null&&a!==void 0?a:Gt,className:cx$1(wt==null?void 0:wt.className,qt),style:Object.assign(Object.assign({},wt==null?void 0:wt.style),It),type:Rt??(wt==null?void 0:wt.type),title:_e??(wt==null?void 0:wt.title),onClick:bt??(wt==null?void 0:wt.onClick),disabled:Ct??(wt==null?void 0:wt.disabled),ref:e,value:Pt},Tt),_)}));Button.displayName=symToStr({Button});var __rest$4=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const Modal=reactExports.memo(reactExports.forwardRef((o,e)=>{const{className:s,id:a,title:d,children:b,concealingBackdrop:_=!0,topAnchor:_e=!1,iconId:ot,buttons:st,size:ct="medium",style:ft}=o;__rest$4(o,["className","id","title","children","concealingBackdrop","topAnchor","iconId","buttons","size","style"]),assert$1();const mt=st===void 0?void 0:st instanceof Array?st:[st],{t:bt}=useTranslation$4(),wt=`fr-modal-title-${a}`;return React.createElement("dialog",{"aria-labelledby":wt,role:"dialog",id:a,className:cx$1(fr.cx("fr-modal",_e&&"fr-modal--top"),s),style:ft,ref:e,"data-fr-concealing-backdrop":_},React.createElement("div",{className:fr.cx("fr-container","fr-container--fluid","fr-container-md")},React.createElement("div",{className:fr.cx("fr-grid-row","fr-grid-row--center")},React.createElement("div",{className:(()=>{switch(ct){case"large":return fr.cx("fr-col-12","fr-col-md-10","fr-col-lg-8");case"small":return fr.cx("fr-col-12","fr-col-md-6","fr-col-lg-4");case"medium":return fr.cx("fr-col-12","fr-col-md-8","fr-col-lg-6")}})()},React.createElement("div",{className:fr.cx("fr-modal__body")},React.createElement("div",{className:fr.cx("fr-modal__header")},React.createElement("button",{className:fr.cx("fr-btn--close","fr-btn"),title:bt("close"),"aria-controls":a,type:"button"},bt("close"))),React.createElement("div",{className:fr.cx("fr-modal__content")},React.createElement("h1",{id:wt,className:fr.cx("fr-modal__title")},ot!==void 0&&React.createElement("span",{className:fr.cx(ot,"fr-fi--lg"),"aria-hidden":!0}),d),b),mt!==void 0&&React.createElement("div",{className:"fr-modal__footer"},React.createElement("ul",{className:fr.cx("fr-btns-group","fr-btns-group--right","fr-btns-group--inline-reverse","fr-btns-group--inline-lg","fr-btns-group--icon-left")},[...mt].reverse().map((Ct,Rt)=>{var It,{doClosesModal:Pt=!0}=Ct,Tt=__rest$4(Ct,["doClosesModal"]);return React.createElement("li",{key:Rt},React.createElement(Button,Object.assign({},Tt,{priority:(It=Tt.priority)!==null&&It!==void 0?It:Rt===0?"primary":"secondary"},Pt?"linkProps"in Tt?{linkProps:Object.assign(Object.assign({},Tt.linkProps),{"aria-controls":a})}:{nativeButtonProps:Object.assign(Object.assign({},Tt.nativeButtonProps),{"aria-controls":a})}:{})))}))))))))}));Modal.displayName=symToStr({Modal});const{useTranslation:useTranslation$4,addModalTranslations}=createComponentI18nApi({componentName:symToStr({Modal}),frMessages:{close:"Fermer"}});addModalTranslations({lang:"en",messages:{close:"Close"}});addModalTranslations({lang:"es",messages:{close:"Cerrar"}});function createModal(o){const{isOpenedByDefault:e,id:s}=o,a={id:`${s}-control-button`,"aria-controls":s,"data-fr-opened":e},d=`${s}-hidden-control-button`;function b(ot){return React.createElement(React.Fragment,null,React.createElement(Button,{nativeButtonProps:Object.assign(Object.assign({},a),{id:d,type:"button",tabIndex:-1,"aria-hidden":!0}),className:fr.cx("fr-hidden")}," "),React.createElement(Modal,Object.assign({},ot,{id:s})))}b.displayName=`${s}-modal`,overwriteReadonlyProp(b,"name",b.displayName);function _(){const ot=document.getElementById(s);window.dsfr(ot).modal.disclose()}function _e(){const ot=document.getElementById(s);window.dsfr(ot).modal.conceal()}return{Component:b,buttonProps:a,open:_,close:_e,isOpenedByDefault:e,id:s}}const modal=createModal({isOpenedByDefault:!1,id:"fr-theme-modal"}),headerFooterDisplayItem={buttonProps:modal.buttonProps,iconId:"fr-icon-theme-fill",text:(()=>{function o(){const{t:e}=useTranslation$3();return React.createElement(React.Fragment,null,e("display settings"))}return React.createElement(o,null)})()};function Display(){const{t:o}=useTranslation$3(),{getInputId:e}=function(){const a=reactExports.useId();function d(b){return`${a}-${b}`}return{getInputId:d}}();return React.createElement(modal.Component,{title:o("display settings"),size:"small"},React.createElement("div",{className:"fr-display"},React.createElement("div",{className:fr.cx("fr-form-group")},React.createElement("fieldset",{className:fr.cx("fr-fieldset")},React.createElement("legend",{className:fr.cx("fr-fieldset__legend","fr-text--regular")},o("pick a theme")),React.createElement("div",{className:fr.cx("fr-fieldset__content")},["light","dark","system"].map(s=>React.createElement("div",{key:s,className:fr.cx("fr-radio-group","fr-radio-rich")},React.createElement("input",{value:s,type:"radio",id:e(s),name:"fr-radios-theme"}),React.createElement("label",{className:"fr-label",htmlFor:e(s)},o(`${s} theme`),s==="system"&&React.createElement("span",{className:fr.cx("fr-hint-text")},o("system theme hint"))),React.createElement("div",{className:fr.cx("fr-radio-rich__img")},React.createElement("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"80px",height:"80px",viewBox:"0 0 80 80"},["artwork-decorative","artwork-minor","artwork-major"].map(a=>React.createElement("use",{key:a,className:fr.cx(`fr-${a}`),xlinkHref:`${getAssetUrl((()=>{switch(s){case"dark":return ArtworkDarkSvg;case"light":return ArtworkLightSvg;case"system":return ArtworkSystemSvg}})())}#${a}`})))))))))))}Display.displayName=symToStr({Display});const{useTranslation:useTranslation$3,addDisplayTranslations}=createComponentI18nApi({componentName:symToStr({Display}),frMessages:{"display settings":"Paramtres d'affichage",close:"Fermer","pick a theme":"Choisissez un thme pour personnaliser l'apparence du site.","light theme":"Thme clair","dark theme":"Thme sombre","system theme":"Systme.","system theme hint":"Utilise les paramtres systme."}});addDisplayTranslations({lang:"en",messages:{"display settings":"Display settings",close:"Close","pick a theme":"Pick a theme to customize the website's look.","light theme":"Light theme","dark theme":"Dark theme","system theme":"System.","system theme hint":"Use system preference"}});addDisplayTranslations({lang:"es",messages:{"display settings":"Parmetro de visualizacin",close:"Cerrar","pick a theme":"Elija un tema para personalizar el aspecto del sitio."}});var __rest$3=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const SearchBar=reactExports.memo(reactExports.forwardRef((o,e)=>{const{className:s,id:a,label:d,big:b=!1,classes:_={},style:_e,renderInput:ot=({className:It,id:Pt,placeholder:Tt,type:Gt})=>React.createElement("input",{className:It,id:Pt,placeholder:Tt,type:Gt}),clearInputOnSearch:st=!1,allowEmptySearch:ct=!1,onButtonClick:ft}=o,mt=__rest$3(o,["className","id","label","big","classes","style","renderInput","clearInputOnSearch","allowEmptySearch","onButtonClick"]);assert$1();const{t:bt}=useTranslation$2(),wt=d??bt("label"),Ct=useAnalyticsId({defaultIdPrefix:"fr-search-bar",explicitlyProvidedId:a}),Rt=`search-${Ct}-input`;return React.createElement("div",Object.assign({id:Ct,className:cx$1(fr.cx("fr-search-bar",b&&"fr-search-bar--lg"),_.root,s),role:"search",ref:e,style:_e},mt),React.createElement("label",{className:cx$1(fr.cx("fr-label"),_.label),htmlFor:Rt},wt),ot({className:fr.cx("fr-input"),placeholder:wt,type:"search",id:Rt}),React.createElement(SearchButton,{clearInputOnSearch:st,id:`${Ct}-button`,searchInputId:Rt,allowEmptySearch:ct,onClick:ft}))}));SearchBar.displayName=symToStr({SearchBar});const{useTranslation:useTranslation$2,addSearchBarTranslations}=createComponentI18nApi({componentName:symToStr({SearchBar}),frMessages:{label:"Rechercher"}});addSearchBarTranslations({lang:"en",messages:{label:"Search"}});function observeInputValue(o){const{inputElement:e,callback:s}=o,a=[];{const b=Object.getOwnPropertyDescriptor(e,"value");a.push(()=>{assert$1(b!==void 0),Object.defineProperty(e,"value",b)});const _=Object.getPrototypeOf(e),_e=Object.getOwnPropertyDescriptor(_,"value");Object.defineProperty(e,"value",{get:function(...ot){return _e.get.apply(this,ot)},set:function(...ot){_e.set.apply(this,ot);const st=this.value;return s(),st}})}e.addEventListener("input",(()=>{const b=()=>{s()};return a.push(()=>e.removeEventListener("input",b)),b})()),e.addEventListener("keydown",(()=>{const b=_=>{if(_.key==="Escape"){const _e=setTimeout(()=>{a.splice(a.indexOf(ot),1),s()},50),ot=()=>{clearTimeout(_e)};a.push(ot)}};return a.push(()=>e.removeEventListener("keyup",b)),b})());function d(){a.forEach(b=>b())}return{cleanup:d}}function SearchButton(o){const{searchInputId:e,clearInputOnSearch:s,allowEmptySearch:a,onClick:d,id:b}=o,{t:_}=useTranslation$2(),[,_e]=reactExports.useReducer(Ct=>Ct+1,0),[{focusInputElement:ot,getInputValue:st,resetInputValue:ct,getIsInputFocused:ft},mt]=reactExports.useState(()=>({getInputValue:id$1(()=>""),resetInputValue:id$1(()=>{}),focusInputElement:id$1(()=>{}),getIsInputFocused:id$1(()=>!1)})),bt=useConstCallback(()=>{const Ct=st();if(!a&&Ct===""){ot();return}d==null||d(Ct),s&&ct()}),wt=d===void 0;return reactExports.useEffect(()=>{const Ct=document.getElementById(e);assert$1(Ct!==null,`${e} should be mounted`),assert$1("value"in Ct&&typeof Ct.value=="string",`${e} is not an HTML input`),assert$1(is()),mt({focusInputElement:()=>Ct.focus(),getInputValue:()=>Ct.value,resetInputValue:()=>Ct.value="",getIsInputFocused:()=>document.activeElement===Ct});const Rt=[];{const{cleanup:It}=observeInputValue({inputElement:Ct,callback:()=>_e()});Rt.push(It)}return wt&&(Ct.addEventListener("focus",(()=>{const It=()=>_e();return Rt.push(()=>Ct.removeEventListener("focus",It)),It})()),Ct.addEventListener("blur",(()=>{const It=()=>_e();return Rt.push(()=>Ct.removeEventListener("blur",It)),It})())),wt||(Ct.addEventListener("keydown",(()=>{const It=Pt=>{Pt.key==="Enter"&&(bt(),Ct.blur())};return Rt.push(()=>Ct.removeEventListener("keydown",It)),It})()),Ct.addEventListener("keydown",(()=>{const It=Pt=>{Pt.key==="Escape"&&Ct.blur()};return Rt.push(()=>Ct.removeEventListener("keydown",It)),It})())),()=>{Rt.forEach(It=>It())}},[e,wt]),d===void 0&&(ft()||st()!=="")?null:React.createElement("button",{id:b,className:fr.cx("fr-btn"),title:_("label"),onClick:bt,style:d!==void 0?void 0:{position:"absolute",right:0}},_("label"))}var __rest$2=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const headerMenuModalIdPrefix="header-menu-modal",Header=reactExports.memo(reactExports.forwardRef((o,e)=>{const{className:s,id:a,brandTop:d,serviceTitle:b,serviceTagline:_,homeLinkProps:_e,navigation:ot=void 0,quickAccessItems:st=[],operatorLogo:ct,renderSearchInput:ft,clearSearchInputOnSearch:mt=!1,allowEmptySearch:bt=!1,onSearchButtonClick:wt,classes:Ct={},style:Rt}=o,It=__rest$2(o,["className","id","brandTop","serviceTitle","serviceTagline","homeLinkProps","navigation","quickAccessItems","operatorLogo","renderSearchInput","clearSearchInputOnSearch","allowEmptySearch","onSearchButtonClick","classes","style"]);assert$1();const Pt=a??"fr-header",Tt=`${headerMenuModalIdPrefix}-${Pt}`,Gt=`${Pt}-menu-button`,Jt=`${Pt}-search-modal`,qt=`${Pt}-search-input`,Nt=ft!==void 0||wt!==void 0;setBrandTopAndHomeLinkProps({brandTop:d,homeLinkProps:_e});const{t:Qt}=useTranslation$1(),{t:fn}=useTranslation$2(),{Link:Mn}=getLink(),ln=so=>React.createElement("ul",{className:fr.cx("fr-btns-group")},st.map((pn,hn)=>React.createElement("li",{key:hn},(()=>{const Mt=typeGuard(pn,pn instanceof Object&&"text"in pn)?React.createElement(HeaderQuickAccessItem,{quickAccessItem:pn}):pn;return Mt===null?null:reactExports.cloneElement(Mt,{id:`${Pt}-quick-access-item-${hn}${(()=>{switch(so){case"mobile":return"-mobile";case"desktop":return""}assert$1()})()}`})})()))),Wt=(ct==null?void 0:ct.linkProps)!==void 0;return React.createElement(React.Fragment,null,React.createElement(Display,null),React.createElement("header",Object.assign({role:"banner",id:Pt,className:cx$1(fr.cx("fr-header"),Ct.root,s),ref:e,style:Rt},It),React.createElement("div",{className:cx$1(fr.cx("fr-header__body"),Ct.body)},React.createElement("div",{className:cx$1(fr.cx("fr-container"),Ct.container)},React.createElement("div",{className:cx$1(fr.cx("fr-header__body-row"),Ct.bodyRow)},React.createElement("div",{className:cx$1(fr.cx("fr-header__brand",!Wt&&"fr-enlarge-link"),Ct.brand)},React.createElement("div",{className:cx$1(fr.cx("fr-header__brand-top"),Ct.brandTop)},React.createElement("div",{className:cx$1(fr.cx("fr-header__logo"),Ct.logo)},(()=>{const so=React.createElement("p",{className:fr.cx("fr-logo")},d);return b!==void 0?so:React.createElement(Mn,Object.assign({},_e),so)})()),ct!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-header__operator",Wt&&"fr-enlarge-link"),Ct.operator)},(()=>{const so=React.createElement("img",{className:cx$1(fr.cx("fr-responsive-img"),Ct.operator),style:(()=>{switch(ct.orientation){case"vertical":return{width:"3.5rem"};case"horizontal":return{maxWidth:"9.0625rem"}}})(),src:ct.imgUrl,alt:ct.alt});return Wt?React.createElement(Mn,Object.assign({},ct.linkProps),so):so})()),(st.length>0||ot!==void 0||Nt)&&React.createElement("div",{className:cx$1(fr.cx("fr-header__navbar"),Ct.navbar)},Nt&&React.createElement("button",{id:`${Pt}-search-button`,className:fr.cx("fr-btn--search","fr-btn"),"data-fr-opened":!1,"aria-controls":Jt,title:fn("label")},fn("label")),React.createElement("button",{className:fr.cx("fr-btn--menu","fr-btn"),"data-fr-opened":"false","aria-controls":Tt,"aria-haspopup":"menu",id:Gt,title:Qt("menu")},Qt("menu")))),b!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-header__service",Wt&&"fr-enlarge-link"),Ct.service)},React.createElement(Mn,Object.assign({},_e),React.createElement("p",{className:cx$1(fr.cx("fr-header__service-title"),Ct.serviceTitle)},b)),_!==void 0&&React.createElement("p",{className:cx$1(fr.cx("fr-header__service-tagline"),Ct.serviceTagline)},_))),(st.length>0||Nt)&&React.createElement("div",{className:fr.cx("fr-header__tools")},st.length>0&&React.createElement("div",{className:cx$1(fr.cx("fr-header__tools-links"),Ct.toolsLinks)},ln("desktop")),Nt&&React.createElement("div",{className:fr.cx("fr-header__search","fr-modal"),id:Jt,"aria-labelledby":`${Pt}-search-bar-button`},React.createElement("div",{className:fr.cx("fr-container","fr-container-lg--fluid")},React.createElement("button",{id:`${Pt}-search-button`,className:fr.cx("fr-btn--close","fr-btn"),"aria-controls":Jt,title:Qt("close")},Qt("close")),React.createElement("div",{className:fr.cx("fr-search-bar"),role:"search"},React.createElement("label",{className:fr.cx("fr-label"),htmlFor:qt},fn("label")),(ft??(({className:so,id:pn,placeholder:hn,type:Mt})=>React.createElement("input",{className:so,id:pn,placeholder:hn,type:Mt})))({className:fr.cx("fr-input"),id:qt,placeholder:fn("label"),type:"search"}),React.createElement(SearchButton,{id:`${Pt}-search-bar-button`,searchInputId:qt,onClick:wt,clearInputOnSearch:mt,allowEmptySearch:bt})))))))),(ot!==void 0||st.length!==0)&&React.createElement("div",{className:cx$1(fr.cx("fr-header__menu","fr-modal"),Ct.menu),id:Tt,"aria-labelledby":Gt},React.createElement("div",{className:fr.cx("fr-container")},React.createElement("button",{id:`${Pt}-mobile-overlay-button-close`,className:fr.cx("fr-btn--close","fr-btn"),"aria-controls":Tt,title:Qt("close")},Qt("close")),React.createElement("div",{className:cx$1(fr.cx("fr-header__menu-links"),Ct.menuLinks)},ln("mobile")),ot!==void 0&&(ot instanceof Array?React.createElement(MainNavigation,{id:`${Pt}-main-navigation`,items:ot}):ot)))))}));Header.displayName=symToStr({Header});const{useTranslation:useTranslation$1,addHeaderTranslations}=createComponentI18nApi({componentName:symToStr({Header}),frMessages:{menu:"Menu",close:"Fermer"}});addHeaderTranslations({lang:"en",messages:{close:"Close"}});function HeaderQuickAccessItem(o){const{className:e,quickAccessItem:s,id:a}=o,{Link:d}=getLink();return s.linkProps!==void 0?React.createElement(d,Object.assign({},s.linkProps,{className:cx$1(fr.cx("fr-btn",s.iconId),s.linkProps.className,e),id:a}),s.text):React.createElement("button",Object.assign({},s.buttonProps,{className:cx$1(fr.cx("fr-btn",s.iconId),s.buttonProps.className,e),id:a}),s.text)}function noop$3(){}function createSyncStoragePersister({storage:o,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:s=1e3,serialize:a=JSON.stringify,deserialize:d=JSON.parse,retry:b}){if(o){const _=_e=>{try{o.setItem(e,a(_e));return}catch(ot){return ot}};return{persistClient:throttle$1(_e=>{let ot=_e,st=_(ot),ct=0;for(;st&&ot;)ct++,ot=b==null?void 0:b({persistedClient:ot,error:st,errorCount:ct}),ot&&(st=_(ot))},s),restoreClient:()=>{const _e=o.getItem(e);if(_e)return d(_e)},removeClient:()=>{o.removeItem(e)}}}return{persistClient:noop$3,restoreClient:()=>{},removeClient:noop$3}}function throttle$1(o,e=100){let s=null,a;return function(...d){a=d,s===null&&(s=setTimeout(()=>{o(...a),s=null},e))}}var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(o){return this.listeners.add(o),this.onSubscribe(),()=>{this.listeners.delete(o),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$2(){}function functionalUpdate(o,e){return typeof o=="function"?o(e):o}function isValidTimeout(o){return typeof o=="number"&&o>=0&&o!==1/0}function timeUntilStale(o,e){return Math.max(o+(e||0)-Date.now(),0)}function resolveStaleTime(o,e){return typeof o=="function"?o(e):o}function resolveEnabled(o,e){return typeof o=="function"?o(e):o}function matchQuery(o,e){const{type:s="all",exact:a,fetchStatus:d,predicate:b,queryKey:_,stale:_e}=o;if(_){if(a){if(e.queryHash!==hashQueryKeyByOptions(_,e.options))return!1}else if(!partialMatchKey(e.queryKey,_))return!1}if(s!=="all"){const ot=e.isActive();if(s==="active"&&!ot||s==="inactive"&&ot)return!1}return!(typeof _e=="boolean"&&e.isStale()!==_e||d&&d!==e.state.fetchStatus||b&&!b(e))}function matchMutation(o,e){const{exact:s,status:a,predicate:d,mutationKey:b}=o;if(b){if(!e.options.mutationKey)return!1;if(s){if(hashKey(e.options.mutationKey)!==hashKey(b))return!1}else if(!partialMatchKey(e.options.mutationKey,b))return!1}return!(a&&e.state.status!==a||d&&!d(e))}function hashQueryKeyByOptions(o,e){return((e==null?void 0:e.queryKeyHashFn)||hashKey)(o)}function hashKey(o){return JSON.stringify(o,(e,s)=>isPlainObject$1(s)?Object.keys(s).sort().reduce((a,d)=>(a[d]=s[d],a),{}):s)}function partialMatchKey(o,e){return o===e?!0:typeof o!=typeof e?!1:o&&e&&typeof o=="object"&&typeof e=="object"?!Object.keys(e).some(s=>!partialMatchKey(o[s],e[s])):!1}function replaceEqualDeep(o,e){if(o===e)return o;const s=isPlainArray(o)&&isPlainArray(e);if(s||isPlainObject$1(o)&&isPlainObject$1(e)){const a=s?o:Object.keys(o),d=a.length,b=s?e:Object.keys(e),_=b.length,_e=s?[]:{};let ot=0;for(let st=0;st<_;st++){const ct=s?st:b[st];(!s&&a.includes(ct)||s)&&o[ct]===void 0&&e[ct]===void 0?(_e[ct]=void 0,ot++):(_e[ct]=replaceEqualDeep(o[ct],e[ct]),_e[ct]===o[ct]&&o[ct]!==void 0&&ot++)}return d===_&&ot===d?o:_e}return e}function shallowEqualObjects(o,e){if(!e||Object.keys(o).length!==Object.keys(e).length)return!1;for(const s in o)if(o[s]!==e[s])return!1;return!0}function isPlainArray(o){return Array.isArray(o)&&o.length===Object.keys(o).length}function isPlainObject$1(o){if(!hasObjectPrototype(o))return!1;const e=o.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!hasObjectPrototype(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(o)!==Object.prototype)}function hasObjectPrototype(o){return Object.prototype.toString.call(o)==="[object Object]"}function sleep(o){return new Promise(e=>{setTimeout(e,o)})}function replaceData(o,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(o,e):s.structuralSharing!==!1?replaceEqualDeep(o,e):e}function addToEnd(o,e,s=0){const a=[...o,e];return s&&a.length>s?a.slice(1):a}function addToStart(o,e,s=0){const a=[e,...o];return s&&a.length>s?a.slice(0,-1):a}var skipToken=Symbol();function ensureQueryFn(o,e){return!o.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!o.queryFn||o.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${o.queryHash}'`)):o.queryFn}var L4,g3,qN,Zae,FocusManager=(Zae=class extends Subscribable{constructor(){super();fu(this,L4);fu(this,g3);fu(this,qN);xa(this,qN,e=>{if(!isServer&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){jo(this,g3)||this.setEventListener(jo(this,qN))}onUnsubscribe(){var e;this.hasListeners()||((e=jo(this,g3))==null||e.call(this),xa(this,g3,void 0))}setEventListener(e){var s;xa(this,qN,e),(s=jo(this,g3))==null||s.call(this),xa(this,g3,e(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(e){jo(this,L4)!==e&&(xa(this,L4,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof jo(this,L4)=="boolean"?jo(this,L4):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},L4=new WeakMap,g3=new WeakMap,qN=new WeakMap,Zae),focusManager=new FocusManager,ZN,m3,KN,Kae,OnlineManager=(Kae=class extends Subscribable{constructor(){super();fu(this,ZN,!0);fu(this,m3);fu(this,KN);xa(this,KN,e=>{if(!isServer&&window.addEventListener){const s=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}}})}onSubscribe(){jo(this,m3)||this.setEventListener(jo(this,KN))}onUnsubscribe(){var e;this.hasListeners()||((e=jo(this,m3))==null||e.call(this),xa(this,m3,void 0))}setEventListener(e){var s;xa(this,KN,e),(s=jo(this,m3))==null||s.call(this),xa(this,m3,e(this.setOnline.bind(this)))}setOnline(e){jo(this,ZN)!==e&&(xa(this,ZN,e),this.listeners.forEach(a=>{a(e)}))}isOnline(){return jo(this,ZN)}},ZN=new WeakMap,m3=new WeakMap,KN=new WeakMap,Kae),onlineManager=new OnlineManager;function pendingThenable(){let o,e;const s=new Promise((d,b)=>{o=d,e=b});s.status="pending",s.catch(()=>{});function a(d){Object.assign(s,d),delete s.resolve,delete s.reject}return s.resolve=d=>{a({status:"fulfilled",value:d}),o(d)},s.reject=d=>{a({status:"rejected",reason:d}),e(d)},s}function defaultRetryDelay(o){return Math.min(1e3*2**o,3e4)}function canFetch(o){return(o??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(o){super("CancelledError"),this.revert=o==null?void 0:o.revert,this.silent=o==null?void 0:o.silent}};function isCancelledError(o){return o instanceof CancelledError}function createRetryer(o){let e=!1,s=0,a=!1,d;const b=pendingThenable(),_=Ct=>{var Rt;a||(mt(new CancelledError(Ct)),(Rt=o.abort)==null||Rt.call(o))},_e=()=>{e=!0},ot=()=>{e=!1},st=()=>focusManager.isFocused()&&(o.networkMode==="always"||onlineManager.isOnline())&&o.canRun(),ct=()=>canFetch(o.networkMode)&&o.canRun(),ft=Ct=>{var Rt;a||(a=!0,(Rt=o.onSuccess)==null||Rt.call(o,Ct),d==null||d(),b.resolve(Ct))},mt=Ct=>{var Rt;a||(a=!0,(Rt=o.onError)==null||Rt.call(o,Ct),d==null||d(),b.reject(Ct))},bt=()=>new Promise(Ct=>{var Rt;d=It=>{(a||st())&&Ct(It)},(Rt=o.onPause)==null||Rt.call(o)}).then(()=>{var Ct;d=void 0,a||(Ct=o.onContinue)==null||Ct.call(o)}),wt=()=>{if(a)return;let Ct;const Rt=s===0?o.initialPromise:void 0;try{Ct=Rt??o.fn()}catch(It){Ct=Promise.reject(It)}Promise.resolve(Ct).then(ft).catch(It=>{var qt;if(a)return;const Pt=o.retry??(isServer?0:3),Tt=o.retryDelay??defaultRetryDelay,Gt=typeof Tt=="function"?Tt(s,It):Tt,Jt=Pt===!0||typeof Pt=="number"&&s<Pt||typeof Pt=="function"&&Pt(s,It);if(e||!Jt){mt(It);return}s++,(qt=o.onFail)==null||qt.call(o,s,It),sleep(Gt).then(()=>st()?void 0:bt()).then(()=>{e?mt(It):wt()})})};return{promise:b,cancel:_,continue:()=>(d==null||d(),b),cancelRetry:_e,continueRetry:ot,canStart:ct,start:()=>(ct()?wt():bt().then(wt),b)}}function createNotifyManager(){let o=[],e=0,s=_e=>{_e()},a=_e=>{_e()},d=_e=>setTimeout(_e,0);const b=_e=>{e?o.push(_e):d(()=>{s(_e)})},_=()=>{const _e=o;o=[],_e.length&&d(()=>{a(()=>{_e.forEach(ot=>{s(ot)})})})};return{batch:_e=>{let ot;e++;try{ot=_e()}finally{e--,e||_()}return ot},batchCalls:_e=>(...ot)=>{b(()=>{_e(...ot)})},schedule:b,setNotifyFunction:_e=>{s=_e},setBatchNotifyFunction:_e=>{a=_e},setScheduler:_e=>{d=_e}}}var notifyManager=createNotifyManager(),F4,Yae,Removable=(Yae=class{constructor(){fu(this,F4)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&xa(this,F4,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(o){this.gcTime=Math.max(this.gcTime||0,o??(isServer?1/0:5*60*1e3))}clearGcTimeout(){jo(this,F4)&&(clearTimeout(jo(this,F4)),xa(this,F4,void 0))}},F4=new WeakMap,Yae),YN,XN,Gw,b1,tB,z4,fC,qA,Xae,Query=(Xae=class extends Removable{constructor(e){super();fu(this,fC);fu(this,YN);fu(this,XN);fu(this,Gw);fu(this,b1);fu(this,tB);fu(this,z4);xa(this,z4,!1),xa(this,tB,e.defaultOptions),this.setOptions(e.options),this.observers=[],xa(this,Gw,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,xa(this,YN,getDefaultState$1(this.options)),this.state=e.state??jo(this,YN),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=jo(this,b1))==null?void 0:e.promise}setOptions(e){this.options={...jo(this,tB),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&jo(this,Gw).remove(this)}setData(e,s){const a=replaceData(this.state.data,e,this.options);return Nu(this,fC,qA).call(this,{data:a,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),a}setState(e,s){Nu(this,fC,qA).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var a,d;const s=(a=jo(this,b1))==null?void 0:a.promise;return(d=jo(this,b1))==null||d.cancel(e),s?s.then(noop$2).catch(noop$2):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(jo(this,YN))}isActive(){return this.observers.some(e=>resolveEnabled(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(a=>a.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=jo(this,b1))==null||s.continue()}onOnline(){var s;const e=this.observers.find(a=>a.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=jo(this,b1))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),jo(this,Gw).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(jo(this,b1)&&(jo(this,z4)?jo(this,b1).cancel({revert:!0}):jo(this,b1).cancelRetry()),this.scheduleGc()),jo(this,Gw).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Nu(this,fC,qA).call(this,{type:"invalidate"})}fetch(e,s){var ot,st,ct;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(jo(this,b1))return jo(this,b1).continueRetry(),jo(this,b1).promise}if(e&&this.setOptions(e),!this.options.queryFn){const ft=this.observers.find(mt=>mt.options.queryFn);ft&&this.setOptions(ft.options)}const a=new AbortController,d=ft=>{Object.defineProperty(ft,"signal",{enumerable:!0,get:()=>(xa(this,z4,!0),a.signal)})},b=()=>{const ft=ensureQueryFn(this.options,s),mt={queryKey:this.queryKey,meta:this.meta};return d(mt),xa(this,z4,!1),this.options.persister?this.options.persister(ft,mt,this):ft(mt)},_={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:b};d(_),(ot=this.options.behavior)==null||ot.onFetch(_,this),xa(this,XN,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((st=_.fetchOptions)==null?void 0:st.meta))&&Nu(this,fC,qA).call(this,{type:"fetch",meta:(ct=_.fetchOptions)==null?void 0:ct.meta});const _e=ft=>{var mt,bt,wt,Ct;isCancelledError(ft)&&ft.silent||Nu(this,fC,qA).call(this,{type:"error",error:ft}),isCancelledError(ft)||((bt=(mt=jo(this,Gw).config).onError)==null||bt.call(mt,ft,this),(Ct=(wt=jo(this,Gw).config).onSettled)==null||Ct.call(wt,this.state.data,ft,this)),this.scheduleGc()};return xa(this,b1,createRetryer({initialPromise:s==null?void 0:s.initialPromise,fn:_.fetchFn,abort:a.abort.bind(a),onSuccess:ft=>{var mt,bt,wt,Ct;if(ft===void 0){_e(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(ft)}catch(Rt){_e(Rt);return}(bt=(mt=jo(this,Gw).config).onSuccess)==null||bt.call(mt,ft,this),(Ct=(wt=jo(this,Gw).config).onSettled)==null||Ct.call(wt,ft,this.state.error,this),this.scheduleGc()},onError:_e,onFail:(ft,mt)=>{Nu(this,fC,qA).call(this,{type:"failed",failureCount:ft,error:mt})},onPause:()=>{Nu(this,fC,qA).call(this,{type:"pause"})},onContinue:()=>{Nu(this,fC,qA).call(this,{type:"continue"})},retry:_.options.retry,retryDelay:_.options.retryDelay,networkMode:_.options.networkMode,canRun:()=>!0})),jo(this,b1).start()}},YN=new WeakMap,XN=new WeakMap,Gw=new WeakMap,b1=new WeakMap,tB=new WeakMap,z4=new WeakMap,fC=new WeakSet,qA=function(e){const s=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...fetchState(a.data,this.options),fetchMeta:e.meta??null};case"success":return{...a,data:e.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const d=e.error;return isCancelledError(d)&&d.revert&&jo(this,XN)?{...jo(this,XN),fetchStatus:"idle"}:{...a,error:d,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:d,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=s(this.state),notifyManager.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),jo(this,Gw).notify({query:this,type:"updated",action:e})})},Xae);function fetchState(o,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(e.networkMode)?"fetching":"paused",...o===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(o){const e=typeof o.initialData=="function"?o.initialData():o.initialData,s=e!==void 0,a=s?typeof o.initialDataUpdatedAt=="function"?o.initialDataUpdatedAt():o.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var qS,Jae,QueryCache=(Jae=class extends Subscribable{constructor(e={}){super();fu(this,qS);this.config=e,xa(this,qS,new Map)}build(e,s,a){const d=s.queryKey,b=s.queryHash??hashQueryKeyByOptions(d,s);let _=this.get(b);return _||(_=new Query({cache:this,queryKey:d,queryHash:b,options:e.defaultQueryOptions(s),state:a,defaultOptions:e.getQueryDefaults(d)}),this.add(_)),_}add(e){jo(this,qS).has(e.queryHash)||(jo(this,qS).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=jo(this,qS).get(e.queryHash);s&&(e.destroy(),s===e&&jo(this,qS).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return jo(this,qS).get(e)}getAll(){return[...jo(this,qS).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(a=>matchQuery(s,a))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(a=>matchQuery(e,a)):s}notify(e){notifyManager.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},qS=new WeakMap,Jae),ZS,d_,B4,KS,h3,Qae,Mutation=(Qae=class extends Removable{constructor(e){super();fu(this,KS);fu(this,ZS);fu(this,d_);fu(this,B4);this.mutationId=e.mutationId,xa(this,d_,e.mutationCache),xa(this,ZS,[]),this.state=e.state||getDefaultState(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){jo(this,ZS).includes(e)||(jo(this,ZS).push(e),this.clearGcTimeout(),jo(this,d_).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){xa(this,ZS,jo(this,ZS).filter(s=>s!==e)),this.scheduleGc(),jo(this,d_).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){jo(this,ZS).length||(this.state.status==="pending"?this.scheduleGc():jo(this,d_).remove(this))}continue(){var e;return((e=jo(this,B4))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var d,b,_,_e,ot,st,ct,ft,mt,bt,wt,Ct,Rt,It,Pt,Tt,Gt,Jt,qt,Nt;xa(this,B4,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(Qt,fn)=>{Nu(this,KS,h3).call(this,{type:"failed",failureCount:Qt,error:fn})},onPause:()=>{Nu(this,KS,h3).call(this,{type:"pause"})},onContinue:()=>{Nu(this,KS,h3).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>jo(this,d_).canRun(this)}));const s=this.state.status==="pending",a=!jo(this,B4).canStart();try{if(!s){Nu(this,KS,h3).call(this,{type:"pending",variables:e,isPaused:a}),await((b=(d=jo(this,d_).config).onMutate)==null?void 0:b.call(d,e,this));const fn=await((_e=(_=this.options).onMutate)==null?void 0:_e.call(_,e));fn!==this.state.context&&Nu(this,KS,h3).call(this,{type:"pending",context:fn,variables:e,isPaused:a})}const Qt=await jo(this,B4).start();return await((st=(ot=jo(this,d_).config).onSuccess)==null?void 0:st.call(ot,Qt,e,this.state.context,this)),await((ft=(ct=this.options).onSuccess)==null?void 0:ft.call(ct,Qt,e,this.state.context)),await((bt=(mt=jo(this,d_).config).onSettled)==null?void 0:bt.call(mt,Qt,null,this.state.variables,this.state.context,this)),await((Ct=(wt=this.options).onSettled)==null?void 0:Ct.call(wt,Qt,null,e,this.state.context)),Nu(this,KS,h3).call(this,{type:"success",data:Qt}),Qt}catch(Qt){try{throw await((It=(Rt=jo(this,d_).config).onError)==null?void 0:It.call(Rt,Qt,e,this.state.context,this)),await((Tt=(Pt=this.options).onError)==null?void 0:Tt.call(Pt,Qt,e,this.state.context)),await((Jt=(Gt=jo(this,d_).config).onSettled)==null?void 0:Jt.call(Gt,void 0,Qt,this.state.variables,this.state.context,this)),await((Nt=(qt=this.options).onSettled)==null?void 0:Nt.call(qt,void 0,Qt,e,this.state.context)),Qt}finally{Nu(this,KS,h3).call(this,{type:"error",error:Qt})}}finally{jo(this,d_).runNext(this)}}},ZS=new WeakMap,d_=new WeakMap,B4=new WeakMap,KS=new WeakSet,h3=function(e){const s=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),notifyManager.batch(()=>{jo(this,ZS).forEach(a=>{a.onMutationUpdate(e)}),jo(this,d_).notify({mutation:this,type:"updated",action:e})})},Qae);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gx,nB,ele,MutationCache=(ele=class extends Subscribable{constructor(e={}){super();fu(this,Gx);fu(this,nB);this.config=e,xa(this,Gx,new Map),xa(this,nB,Date.now())}build(e,s,a){const d=new Mutation({mutationCache:this,mutationId:++XZ(this,nB)._,options:e.defaultMutationOptions(s),state:a});return this.add(d),d}add(e){const s=scopeFor(e),a=jo(this,Gx).get(s)??[];a.push(e),jo(this,Gx).set(s,a),this.notify({type:"added",mutation:e})}remove(e){var a;const s=scopeFor(e);if(jo(this,Gx).has(s)){const d=(a=jo(this,Gx).get(s))==null?void 0:a.filter(b=>b!==e);d&&(d.length===0?jo(this,Gx).delete(s):jo(this,Gx).set(s,d))}this.notify({type:"removed",mutation:e})}canRun(e){var a;const s=(a=jo(this,Gx).get(scopeFor(e)))==null?void 0:a.find(d=>d.state.status==="pending");return!s||s===e}runNext(e){var a;const s=(a=jo(this,Gx).get(scopeFor(e)))==null?void 0:a.find(d=>d!==e&&d.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...jo(this,Gx).values()].flat()}find(e){const s={exact:!0,...e};return this.getAll().find(a=>matchMutation(s,a))}findAll(e={}){return this.getAll().filter(s=>matchMutation(e,s))}notify(e){notifyManager.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return notifyManager.batch(()=>Promise.all(e.map(s=>s.continue().catch(noop$2))))}},Gx=new WeakMap,nB=new WeakMap,ele);function scopeFor(o){var e;return((e=o.options.scope)==null?void 0:e.id)??String(o.mutationId)}function infiniteQueryBehavior(o){return{onFetch:(e,s)=>{var ct,ft,mt,bt,wt;const a=e.options,d=(mt=(ft=(ct=e.fetchOptions)==null?void 0:ct.meta)==null?void 0:ft.fetchMore)==null?void 0:mt.direction,b=((bt=e.state.data)==null?void 0:bt.pages)||[],_=((wt=e.state.data)==null?void 0:wt.pageParams)||[];let _e={pages:[],pageParams:[]},ot=0;const st=async()=>{let Ct=!1;const Rt=Tt=>{Object.defineProperty(Tt,"signal",{enumerable:!0,get:()=>(e.signal.aborted?Ct=!0:e.signal.addEventListener("abort",()=>{Ct=!0}),e.signal)})},It=ensureQueryFn(e.options,e.fetchOptions),Pt=async(Tt,Gt,Jt)=>{if(Ct)return Promise.reject();if(Gt==null&&Tt.pages.length)return Promise.resolve(Tt);const qt={queryKey:e.queryKey,pageParam:Gt,direction:Jt?"backward":"forward",meta:e.options.meta};Rt(qt);const Nt=await It(qt),{maxPages:Qt}=e.options,fn=Jt?addToStart:addToEnd;return{pages:fn(Tt.pages,Nt,Qt),pageParams:fn(Tt.pageParams,Gt,Qt)}};if(d&&b.length){const Tt=d==="backward",Gt=Tt?getPreviousPageParam:getNextPageParam,Jt={pages:b,pageParams:_},qt=Gt(a,Jt);_e=await Pt(Jt,qt,Tt)}else{const Tt=o??b.length;do{const Gt=ot===0?_[0]??a.initialPageParam:getNextPageParam(a,_e);if(ot>0&&Gt==null)break;_e=await Pt(_e,Gt),ot++}while(ot<Tt)}return _e};e.options.persister?e.fetchFn=()=>{var Ct,Rt;return(Rt=(Ct=e.options).persister)==null?void 0:Rt.call(Ct,st,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=st}}}function getNextPageParam(o,{pages:e,pageParams:s}){const a=e.length-1;return e.length>0?o.getNextPageParam(e[a],e,s[a],s):void 0}function getPreviousPageParam(o,{pages:e,pageParams:s}){var a;return e.length>0?(a=o.getPreviousPageParam)==null?void 0:a.call(o,e[0],e,s[0],s):void 0}var W0,y3,b3,JN,QN,v3,eL,tL,tle,QueryClient=(tle=class{constructor(o={}){fu(this,W0);fu(this,y3);fu(this,b3);fu(this,JN);fu(this,QN);fu(this,v3);fu(this,eL);fu(this,tL);xa(this,W0,o.queryCache||new QueryCache),xa(this,y3,o.mutationCache||new MutationCache),xa(this,b3,o.defaultOptions||{}),xa(this,JN,new Map),xa(this,QN,new Map),xa(this,v3,0)}mount(){XZ(this,v3)._++,jo(this,v3)===1&&(xa(this,eL,focusManager.subscribe(async o=>{o&&(await this.resumePausedMutations(),jo(this,W0).onFocus())})),xa(this,tL,onlineManager.subscribe(async o=>{o&&(await this.resumePausedMutations(),jo(this,W0).onOnline())})))}unmount(){var o,e;XZ(this,v3)._--,jo(this,v3)===0&&((o=jo(this,eL))==null||o.call(this),xa(this,eL,void 0),(e=jo(this,tL))==null||e.call(this),xa(this,tL,void 0))}isFetching(o){return jo(this,W0).findAll({...o,fetchStatus:"fetching"}).length}isMutating(o){return jo(this,y3).findAll({...o,status:"pending"}).length}getQueryData(o){var s;const e=this.defaultQueryOptions({queryKey:o});return(s=jo(this,W0).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(o){const e=this.getQueryData(o.queryKey);if(e===void 0)return this.fetchQuery(o);{const s=this.defaultQueryOptions(o),a=jo(this,W0).build(this,s);return o.revalidateIfStale&&a.isStaleByTime(resolveStaleTime(s.staleTime,a))&&this.prefetchQuery(s),Promise.resolve(e)}}getQueriesData(o){return jo(this,W0).findAll(o).map(({queryKey:e,state:s})=>{const a=s.data;return[e,a]})}setQueryData(o,e,s){const a=this.defaultQueryOptions({queryKey:o}),d=jo(this,W0).get(a.queryHash),b=d==null?void 0:d.state.data,_=functionalUpdate(e,b);if(_!==void 0)return jo(this,W0).build(this,a).setData(_,{...s,manual:!0})}setQueriesData(o,e,s){return notifyManager.batch(()=>jo(this,W0).findAll(o).map(({queryKey:a})=>[a,this.setQueryData(a,e,s)]))}getQueryState(o){var s;const e=this.defaultQueryOptions({queryKey:o});return(s=jo(this,W0).get(e.queryHash))==null?void 0:s.state}removeQueries(o){const e=jo(this,W0);notifyManager.batch(()=>{e.findAll(o).forEach(s=>{e.remove(s)})})}resetQueries(o,e){const s=jo(this,W0),a={type:"active",...o};return notifyManager.batch(()=>(s.findAll(o).forEach(d=>{d.reset()}),this.refetchQueries(a,e)))}cancelQueries(o={},e={}){const s={revert:!0,...e},a=notifyManager.batch(()=>jo(this,W0).findAll(o).map(d=>d.cancel(s)));return Promise.all(a).then(noop$2).catch(noop$2)}invalidateQueries(o={},e={}){return notifyManager.batch(()=>{if(jo(this,W0).findAll(o).forEach(a=>{a.invalidate()}),o.refetchType==="none")return Promise.resolve();const s={...o,type:o.refetchType??o.type??"active"};return this.refetchQueries(s,e)})}refetchQueries(o={},e){const s={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},a=notifyManager.batch(()=>jo(this,W0).findAll(o).filter(d=>!d.isDisabled()).map(d=>{let b=d.fetch(void 0,s);return s.throwOnError||(b=b.catch(noop$2)),d.state.fetchStatus==="paused"?Promise.resolve():b}));return Promise.all(a).then(noop$2)}fetchQuery(o){const e=this.defaultQueryOptions(o);e.retry===void 0&&(e.retry=!1);const s=jo(this,W0).build(this,e);return s.isStaleByTime(resolveStaleTime(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(o){return this.fetchQuery(o).then(noop$2).catch(noop$2)}fetchInfiniteQuery(o){return o.behavior=infiniteQueryBehavior(o.pages),this.fetchQuery(o)}prefetchInfiniteQuery(o){return this.fetchInfiniteQuery(o).then(noop$2).catch(noop$2)}ensureInfiniteQueryData(o){return o.behavior=infiniteQueryBehavior(o.pages),this.ensureQueryData(o)}resumePausedMutations(){return onlineManager.isOnline()?jo(this,y3).resumePausedMutations():Promise.resolve()}getQueryCache(){return jo(this,W0)}getMutationCache(){return jo(this,y3)}getDefaultOptions(){return jo(this,b3)}setDefaultOptions(o){xa(this,b3,o)}setQueryDefaults(o,e){jo(this,JN).set(hashKey(o),{queryKey:o,defaultOptions:e})}getQueryDefaults(o){const e=[...jo(this,JN).values()];let s={};return e.forEach(a=>{partialMatchKey(o,a.queryKey)&&(s={...s,...a.defaultOptions})}),s}setMutationDefaults(o,e){jo(this,QN).set(hashKey(o),{mutationKey:o,defaultOptions:e})}getMutationDefaults(o){const e=[...jo(this,QN).values()];let s={};return e.forEach(a=>{partialMatchKey(o,a.mutationKey)&&(s={...s,...a.defaultOptions})}),s}defaultQueryOptions(o){if(o._defaulted)return o;const e={...jo(this,b3).queries,...this.getQueryDefaults(o.queryKey),...o,_defaulted:!0};return e.queryHash||(e.queryHash=hashQueryKeyByOptions(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===skipToken&&(e.enabled=!1),e}defaultMutationOptions(o){return o!=null&&o._defaulted?o:{...jo(this,b3).mutations,...(o==null?void 0:o.mutationKey)&&this.getMutationDefaults(o.mutationKey),...o,_defaulted:!0}}clear(){jo(this,W0).clear(),jo(this,y3).clear()}},W0=new WeakMap,y3=new WeakMap,b3=new WeakMap,JN=new WeakMap,QN=new WeakMap,v3=new WeakMap,eL=new WeakMap,tL=new WeakMap,tle),J_,xp,oB,f_,$4,nL,_3,YS,rB,oL,rL,G4,j4,x3,sL,Jp,Qz,rie,sie,iie,aie,lie,cie,uie,ole,nle,QueryObserver=(nle=class extends Subscribable{constructor(e,s){super();fu(this,Jp);fu(this,J_);fu(this,xp);fu(this,oB);fu(this,f_);fu(this,$4);fu(this,nL);fu(this,_3);fu(this,YS);fu(this,rB);fu(this,oL);fu(this,rL);fu(this,G4);fu(this,j4);fu(this,x3);fu(this,sL,new Set);this.options=s,xa(this,J_,e),xa(this,YS,null),xa(this,_3,pendingThenable()),this.options.experimental_prefetchInRender||jo(this,_3).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(jo(this,xp).addObserver(this),shouldFetchOnMount(jo(this,xp),this.options)?Nu(this,Jp,Qz).call(this):this.updateResult(),Nu(this,Jp,aie).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(jo(this,xp),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(jo(this,xp),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Nu(this,Jp,lie).call(this),Nu(this,Jp,cie).call(this),jo(this,xp).removeObserver(this)}setOptions(e,s){const a=this.options,d=jo(this,xp);if(this.options=jo(this,J_).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof resolveEnabled(this.options.enabled,jo(this,xp))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Nu(this,Jp,uie).call(this),jo(this,xp).setOptions(this.options),a._defaulted&&!shallowEqualObjects(this.options,a)&&jo(this,J_).getQueryCache().notify({type:"observerOptionsUpdated",query:jo(this,xp),observer:this});const b=this.hasListeners();b&&shouldFetchOptionally(jo(this,xp),d,this.options,a)&&Nu(this,Jp,Qz).call(this),this.updateResult(s),b&&(jo(this,xp)!==d||resolveEnabled(this.options.enabled,jo(this,xp))!==resolveEnabled(a.enabled,jo(this,xp))||resolveStaleTime(this.options.staleTime,jo(this,xp))!==resolveStaleTime(a.staleTime,jo(this,xp)))&&Nu(this,Jp,rie).call(this);const _=Nu(this,Jp,sie).call(this);b&&(jo(this,xp)!==d||resolveEnabled(this.options.enabled,jo(this,xp))!==resolveEnabled(a.enabled,jo(this,xp))||_!==jo(this,x3))&&Nu(this,Jp,iie).call(this,_)}getOptimisticResult(e){const s=jo(this,J_).getQueryCache().build(jo(this,J_),e),a=this.createResult(s,e);return shouldAssignObserverCurrentProperties(this,a)&&(xa(this,f_,a),xa(this,nL,this.options),xa(this,$4,jo(this,xp).state)),a}getCurrentResult(){return jo(this,f_)}trackResult(e,s){const a={};return Object.keys(e).forEach(d=>{Object.defineProperty(a,d,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(d),s==null||s(d),e[d])})}),a}trackProp(e){jo(this,sL).add(e)}getCurrentQuery(){return jo(this,xp)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=jo(this,J_).defaultQueryOptions(e),a=jo(this,J_).getQueryCache().build(jo(this,J_),s);return a.fetch().then(()=>this.createResult(a,s))}fetch(e){return Nu(this,Jp,Qz).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),jo(this,f_)))}createResult(e,s){var Qt;const a=jo(this,xp),d=this.options,b=jo(this,f_),_=jo(this,$4),_e=jo(this,nL),st=e!==a?e.state:jo(this,oB),{state:ct}=e;let ft={...ct},mt=!1,bt;if(s._optimisticResults){const fn=this.hasListeners(),Mn=!fn&&shouldFetchOnMount(e,s),ln=fn&&shouldFetchOptionally(e,a,s,d);(Mn||ln)&&(ft={...ft,...fetchState(ct.data,e.options)}),s._optimisticResults==="isRestoring"&&(ft.fetchStatus="idle")}let{error:wt,errorUpdatedAt:Ct,status:Rt}=ft;if(s.select&&ft.data!==void 0)if(b&&ft.data===(_==null?void 0:_.data)&&s.select===jo(this,rB))bt=jo(this,oL);else try{xa(this,rB,s.select),bt=s.select(ft.data),bt=replaceData(b==null?void 0:b.data,bt,s),xa(this,oL,bt),xa(this,YS,null)}catch(fn){xa(this,YS,fn)}else bt=ft.data;if(s.placeholderData!==void 0&&bt===void 0&&Rt==="pending"){let fn;if(b!=null&&b.isPlaceholderData&&s.placeholderData===(_e==null?void 0:_e.placeholderData))fn=b.data;else if(fn=typeof s.placeholderData=="function"?s.placeholderData((Qt=jo(this,rL))==null?void 0:Qt.state.data,jo(this,rL)):s.placeholderData,s.select&&fn!==void 0)try{fn=s.select(fn),xa(this,YS,null)}catch(Mn){xa(this,YS,Mn)}fn!==void 0&&(Rt="success",bt=replaceData(b==null?void 0:b.data,fn,s),mt=!0)}jo(this,YS)&&(wt=jo(this,YS),bt=jo(this,oL),Ct=Date.now(),Rt="error");const It=ft.fetchStatus==="fetching",Pt=Rt==="pending",Tt=Rt==="error",Gt=Pt&&It,Jt=bt!==void 0,Nt={status:Rt,fetchStatus:ft.fetchStatus,isPending:Pt,isSuccess:Rt==="success",isError:Tt,isInitialLoading:Gt,isLoading:Gt,data:bt,dataUpdatedAt:ft.dataUpdatedAt,error:wt,errorUpdatedAt:Ct,failureCount:ft.fetchFailureCount,failureReason:ft.fetchFailureReason,errorUpdateCount:ft.errorUpdateCount,isFetched:ft.dataUpdateCount>0||ft.errorUpdateCount>0,isFetchedAfterMount:ft.dataUpdateCount>st.dataUpdateCount||ft.errorUpdateCount>st.errorUpdateCount,isFetching:It,isRefetching:It&&!Pt,isLoadingError:Tt&&!Jt,isPaused:ft.fetchStatus==="paused",isPlaceholderData:mt,isRefetchError:Tt&&Jt,isStale:isStale(e,s),refetch:this.refetch,promise:jo(this,_3)};if(this.options.experimental_prefetchInRender){const fn=Wt=>{Nt.status==="error"?Wt.reject(Nt.error):Nt.data!==void 0&&Wt.resolve(Nt.data)},Mn=()=>{const Wt=xa(this,_3,Nt.promise=pendingThenable());fn(Wt)},ln=jo(this,_3);switch(ln.status){case"pending":e.queryHash===a.queryHash&&fn(ln);break;case"fulfilled":(Nt.status==="error"||Nt.data!==ln.value)&&Mn();break;case"rejected":(Nt.status!=="error"||Nt.error!==ln.reason)&&Mn();break}}return Nt}updateResult(e){const s=jo(this,f_),a=this.createResult(jo(this,xp),this.options);if(xa(this,$4,jo(this,xp).state),xa(this,nL,this.options),jo(this,$4).data!==void 0&&xa(this,rL,jo(this,xp)),shallowEqualObjects(a,s))return;xa(this,f_,a);const d={},b=()=>{if(!s)return!0;const{notifyOnChangeProps:_}=this.options,_e=typeof _=="function"?_():_;if(_e==="all"||!_e&&!jo(this,sL).size)return!0;const ot=new Set(_e??jo(this,sL));return this.options.throwOnError&&ot.add("error"),Object.keys(jo(this,f_)).some(st=>{const ct=st;return jo(this,f_)[ct]!==s[ct]&&ot.has(ct)})};(e==null?void 0:e.listeners)!==!1&&b()&&(d.listeners=!0),Nu(this,Jp,ole).call(this,{...d,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Nu(this,Jp,aie).call(this)}},J_=new WeakMap,xp=new WeakMap,oB=new WeakMap,f_=new WeakMap,$4=new WeakMap,nL=new WeakMap,_3=new WeakMap,YS=new WeakMap,rB=new WeakMap,oL=new WeakMap,rL=new WeakMap,G4=new WeakMap,j4=new WeakMap,x3=new WeakMap,sL=new WeakMap,Jp=new WeakSet,Qz=function(e){Nu(this,Jp,uie).call(this);let s=jo(this,xp).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(noop$2)),s},rie=function(){Nu(this,Jp,lie).call(this);const e=resolveStaleTime(this.options.staleTime,jo(this,xp));if(isServer||jo(this,f_).isStale||!isValidTimeout(e))return;const a=timeUntilStale(jo(this,f_).dataUpdatedAt,e)+1;xa(this,G4,setTimeout(()=>{jo(this,f_).isStale||this.updateResult()},a))},sie=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(jo(this,xp)):this.options.refetchInterval)??!1},iie=function(e){Nu(this,Jp,cie).call(this),xa(this,x3,e),!(isServer||resolveEnabled(this.options.enabled,jo(this,xp))===!1||!isValidTimeout(jo(this,x3))||jo(this,x3)===0)&&xa(this,j4,setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&Nu(this,Jp,Qz).call(this)},jo(this,x3)))},aie=function(){Nu(this,Jp,rie).call(this),Nu(this,Jp,iie).call(this,Nu(this,Jp,sie).call(this))},lie=function(){jo(this,G4)&&(clearTimeout(jo(this,G4)),xa(this,G4,void 0))},cie=function(){jo(this,j4)&&(clearInterval(jo(this,j4)),xa(this,j4,void 0))},uie=function(){const e=jo(this,J_).getQueryCache().build(jo(this,J_),this.options);if(e===jo(this,xp))return;const s=jo(this,xp);xa(this,xp,e),xa(this,oB,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},ole=function(e){notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(jo(this,f_))}),jo(this,J_).getQueryCache().notify({query:jo(this,xp),type:"observerResultsUpdated"})})},nle);function shouldLoadOnMount(o,e){return resolveEnabled(e.enabled,o)!==!1&&o.state.data===void 0&&!(o.state.status==="error"&&e.retryOnMount===!1)}function shouldFetchOnMount(o,e){return shouldLoadOnMount(o,e)||o.state.data!==void 0&&shouldFetchOn(o,e,e.refetchOnMount)}function shouldFetchOn(o,e,s){if(resolveEnabled(e.enabled,o)!==!1){const a=typeof s=="function"?s(o):s;return a==="always"||a!==!1&&isStale(o,e)}return!1}function shouldFetchOptionally(o,e,s,a){return(o!==e||resolveEnabled(a.enabled,o)===!1)&&(!s.suspense||o.state.status!=="error")&&isStale(o,s)}function isStale(o,e){return resolveEnabled(e.enabled,o)!==!1&&o.isStaleByTime(resolveStaleTime(e.staleTime,o))}function shouldAssignObserverCurrentProperties(o,e){return!shallowEqualObjects(o.getCurrentResult(),e)}function defaultTransformerFn(o){return o}function dehydrateMutation(o){return{mutationKey:o.options.mutationKey,state:o.state,...o.options.scope&&{scope:o.options.scope},...o.meta&&{meta:o.meta}}}function dehydrateQuery(o,e){var s;return{state:{...o.state,...o.state.data!==void 0&&{data:e(o.state.data)}},queryKey:o.queryKey,queryHash:o.queryHash,...o.state.status==="pending"&&{promise:(s=o.promise)==null?void 0:s.then(e).catch(a=>Promise.reject(new Error("redacted")))},...o.meta&&{meta:o.meta}}}function defaultShouldDehydrateMutation(o){return o.state.isPaused}function defaultShouldDehydrateQuery(o){return o.state.status==="success"}function dehydrate(o,e={}){var _e,ot,st;const s=e.shouldDehydrateMutation??((_e=o.getDefaultOptions().dehydrate)==null?void 0:_e.shouldDehydrateMutation)??defaultShouldDehydrateMutation,a=o.getMutationCache().getAll().flatMap(ct=>s(ct)?[dehydrateMutation(ct)]:[]),d=e.shouldDehydrateQuery??((ot=o.getDefaultOptions().dehydrate)==null?void 0:ot.shouldDehydrateQuery)??defaultShouldDehydrateQuery,b=e.serializeData??((st=o.getDefaultOptions().dehydrate)==null?void 0:st.serializeData)??defaultTransformerFn,_=o.getQueryCache().getAll().flatMap(ct=>d(ct)?[dehydrateQuery(ct,b)]:[]);return{mutations:a,queries:_}}function hydrate(o,e,s){var ot,st;if(typeof e!="object"||e===null)return;const a=o.getMutationCache(),d=o.getQueryCache(),b=((ot=s==null?void 0:s.defaultOptions)==null?void 0:ot.deserializeData)??((st=o.getDefaultOptions().hydrate)==null?void 0:st.deserializeData)??defaultTransformerFn,_=e.mutations||[],_e=e.queries||[];_.forEach(({state:ct,...ft})=>{var mt,bt;a.build(o,{...(mt=o.getDefaultOptions().hydrate)==null?void 0:mt.mutations,...(bt=s==null?void 0:s.defaultOptions)==null?void 0:bt.mutations,...ft},ct)}),_e.forEach(({queryKey:ct,state:ft,queryHash:mt,meta:bt,promise:wt})=>{var It,Pt;let Ct=d.get(mt);const Rt=ft.data===void 0?ft.data:b(ft.data);if(Ct){if(Ct.state.dataUpdatedAt<ft.dataUpdatedAt){const{fetchStatus:Tt,...Gt}=ft;Ct.setState({...Gt,data:Rt})}}else Ct=d.build(o,{...(It=o.getDefaultOptions().hydrate)==null?void 0:It.queries,...(Pt=s==null?void 0:s.defaultOptions)==null?void 0:Pt.queries,queryKey:ct,queryHash:mt,meta:bt},{...ft,data:Rt,fetchStatus:"idle"});if(wt){const Tt=Promise.resolve(wt).then(b);Ct.fetch(void 0,{initialPromise:Tt})}})}var QueryClientContext=reactExports.createContext(void 0),useQueryClient=o=>{const e=reactExports.useContext(QueryClientContext);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},QueryClientProvider=({client:o,children:e})=>(reactExports.useEffect(()=>(o.mount(),()=>{o.unmount()}),[o]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:o,children:e})),IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext),IsRestoringProvider=IsRestoringContext.Provider;function createValue(){let o=!1;return{clearReset:()=>{o=!1},reset:()=>{o=!0},isReset:()=>o}}var QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext);function shouldThrowError(o,e){return typeof o=="function"?o(...e):!!o}function noop$1(){}var ensurePreventErrorBoundaryRetry=(o,e)=>{(o.suspense||o.throwOnError||o.experimental_prefetchInRender)&&(e.isReset()||(o.retryOnMount=!1))},useClearResetErrorBoundary=o=>{reactExports.useEffect(()=>{o.clearReset()},[o])},getHasError=({result:o,errorResetBoundary:e,throwOnError:s,query:a})=>o.isError&&!e.isReset()&&!o.isFetching&&a&&shouldThrowError(s,[o.error,a]),ensureSuspenseTimers=o=>{o.suspense&&(o.staleTime===void 0&&(o.staleTime=1e3),typeof o.gcTime=="number"&&(o.gcTime=Math.max(o.gcTime,1e3)))},willFetch=(o,e)=>o.isLoading&&o.isFetching&&!e,shouldSuspend=(o,e)=>(o==null?void 0:o.suspense)&&e.isPending,fetchOptimistic=(o,e,s)=>e.fetchOptimistic(o).catch(()=>{s.clearReset()});function useBaseQuery(o,e,s){var ct,ft,mt,bt,wt;const a=useQueryClient(),d=useIsRestoring(),b=useQueryErrorResetBoundary(),_=a.defaultQueryOptions(o);(ft=(ct=a.getDefaultOptions().queries)==null?void 0:ct._experimental_beforeQuery)==null||ft.call(ct,_),_._optimisticResults=d?"isRestoring":"optimistic",ensureSuspenseTimers(_),ensurePreventErrorBoundaryRetry(_,b),useClearResetErrorBoundary(b);const _e=!a.getQueryCache().get(_.queryHash),[ot]=reactExports.useState(()=>new e(a,_)),st=ot.getOptimisticResult(_);if(reactExports.useSyncExternalStore(reactExports.useCallback(Ct=>{const Rt=d?()=>{}:ot.subscribe(notifyManager.batchCalls(Ct));return ot.updateResult(),Rt},[ot,d]),()=>ot.getCurrentResult(),()=>ot.getCurrentResult()),reactExports.useEffect(()=>{ot.setOptions(_,{listeners:!1})},[_,ot]),shouldSuspend(_,st))throw fetchOptimistic(_,ot,b);if(getHasError({result:st,errorResetBoundary:b,throwOnError:_.throwOnError,query:a.getQueryCache().get(_.queryHash)}))throw st.error;if((bt=(mt=a.getDefaultOptions().queries)==null?void 0:mt._experimental_afterQuery)==null||bt.call(mt,_,st),_.experimental_prefetchInRender&&!isServer&&willFetch(st,d)){const Ct=_e?fetchOptimistic(_,ot,b):(wt=a.getQueryCache().get(_.queryHash))==null?void 0:wt.promise;Ct==null||Ct.catch(noop$1).finally(()=>{ot.updateResult()})}return _.notifyOnChangeProps?st:ot.trackResult(st)}function useQuery(o,e){return useBaseQuery(o,QueryObserver)}var ReactQueryDevtools2=function(){return null},cacheEventTypes=["added","removed","updated"];function isCacheEventType(o){return cacheEventTypes.includes(o)}async function persistQueryClientRestore({queryClient:o,persister:e,maxAge:s=1e3*60*60*24,buster:a="",hydrateOptions:d}){try{const b=await e.restoreClient();if(b)if(b.timestamp){const _=Date.now()-b.timestamp>s,_e=b.buster!==a;_||_e?e.removeClient():hydrate(o,b.clientState,d)}else e.removeClient()}catch{e.removeClient()}}async function persistQueryClientSave({queryClient:o,persister:e,buster:s="",dehydrateOptions:a}){const d={buster:s,timestamp:Date.now(),clientState:dehydrate(o,a)};await e.persistClient(d)}function persistQueryClientSubscribe(o){const e=o.queryClient.getQueryCache().subscribe(a=>{isCacheEventType(a.type)&&persistQueryClientSave(o)}),s=o.queryClient.getMutationCache().subscribe(a=>{isCacheEventType(a.type)&&persistQueryClientSave(o)});return()=>{e(),s()}}var PersistQueryClientProvider=({client:o,children:e,persistOptions:s,onSuccess:a,...d})=>{const[b,_]=reactExports.useState(!0),_e=reactExports.useRef({persistOptions:s,onSuccess:a}),ot=reactExports.useRef(!1);return reactExports.useEffect(()=>{_e.current={persistOptions:s,onSuccess:a}}),reactExports.useEffect(()=>{const st={..._e.current.persistOptions,queryClient:o};return ot.current||(ot.current=!0,persistQueryClientRestore(st).then(async()=>{var ct,ft;try{await((ft=(ct=_e.current).onSuccess)==null?void 0:ft.call(ct))}finally{_(!1)}})),b?void 0:persistQueryClientSubscribe(st)},[o,b]),jsxRuntimeExports.jsx(QueryClientProvider,{client:o,...d,children:jsxRuntimeExports.jsx(IsRestoringProvider,{value:b,children:e})})};function createUseConsent(o){const{useFinalityConsent:e,processConsentChanges:s,useConsentCallback:a}=o;return{useConsent:isBrowser?_e=>{const{consentCallback:ot}=_e??{};a({consentCallback:ot});const st=e();return{assumeConsent:useConstCallback(ft=>s({type:"atomic change",finality:ft,isConsentGiven:!0})),finalityConsent:st}}:()=>({finalityConsent:void 0,assumeConsent:()=>{throw new Error("Cannot assume consent on the server side")}})}}function deepCopy(o){return JSON.parse(JSON.stringify(o))}var __rest$1=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};function finalityConsentToChanges(o){return Object.entries(o.finalityConsent).filter(([e])=>e!=="isFullConsent").map(([e,s])=>typeof s=="boolean"?[{finality:e,isConsentGiven:s}]:Object.entries(s).filter(([a])=>a!=="isFullConsent").map(([a,d])=>({finality:`${e}.${a}`,isConsentGiven:(assert$1(typeof d=="boolean"),d)}))).reduce((e,s)=>[...e,...s],[])}function createProcessConsentChanges(o){const{finalities:e,getFinalityConsent:s,setFinalityConsent:a,consentCallback:d}=o,b=[];d!==void 0&&b.push(d);function _(ot){const{consentCallback:st}=ot,ct=useConstCallback(ft=>st==null?void 0:st(ft));b.includes(ct)||b.push(ct),reactExports.useEffect(()=>()=>{b.splice(b.indexOf(ct),1)},[])}return{processConsentChanges:async ot=>{if(ot.type==="no changes but trigger consent callbacks"){const mt=s();if(mt===void 0)return;await Promise.all(b.map(bt=>bt({finalityConsent:mt,finalityConsent_prev:mt})));return}const st=(()=>{switch(ot.type){case"grantAll":return e.map(mt=>({finality:mt,isConsentGiven:!0}));case"denyAll":return e.map(mt=>({finality:mt,isConsentGiven:!1}));case"atomic change":return[{finality:ot.finality,isConsentGiven:ot.isConsentGiven}];case"new finalityConsent explicitly provided":return finalityConsentToChanges({finalityConsent:ot.finalityConsent})}})(),ct=s();let ft=ct===void 0?createFullDenyFinalityConsent(e):deepCopy(ct);for(const{finality:mt,isConsentGiven:bt}of st)ft=updateFinalityConsent({finalityConsent:ft,finality:mt,isConsentGiven:bt});a({finalityConsent:ft,prAllConsentCallbacksRun:Promise.all(b.map(mt=>mt({finalityConsent:ft,finalityConsent_prev:ct}))).then(()=>{})})},useConsentCallback:_}}function createFullDenyFinalityConsent(o){var e;const s={isFullConsent:!1};for(const a of o){const[d,b]=a.split(".");if(b===void 0){s[d]=!1;continue}((e=s[d])!==null&&e!==void 0?e:s[d]={isFullConsent:!1})[b]=!1}return s}function updateFinalityConsent(o){const{finality:e,finalityConsent:s,isConsentGiven:a}=o,[d,b]=e.split(".");assert$1(is());const _=deepCopy(s),_e=d;_[_e];const ot=__rest$1(_,["isFullConsent",typeof _e=="symbol"?_e:_e+""]);if(b===void 0)return Object.assign(Object.assign({},ot),{[d]:a,isFullConsent:a&&!Object.values(ot).map(bt=>typeof bt=="boolean"?bt:bt.isFullConsent).includes(!1)});const st=deepCopy(s[d]),ct=b;st[ct];const ft=__rest$1(st,["isFullConsent",typeof ct=="symbol"?ct:ct+""]),mt=a&&!Object.keys(ft).map(bt=>ft[bt]).includes(!1);return Object.assign(Object.assign({},ot),{[d]:Object.assign(Object.assign({},ft),{[b]:a,isFullConsent:mt}),isFullConsent:mt&&!Object.values(ot).map(bt=>typeof bt=="boolean"?bt:bt.isFullConsent).includes(!1)})}const{useTranslation,addConsentManagementTranslations}=createComponentI18nApi({componentName:"ConsentManagement",frMessages:{"all services pref":"Prfrences pour tous les services.","personal data cookies":"Donnes personnelles et cookies","accept all":"Tout accepter","accept all - title":"Autoriser tous les cookies","refuse all":"Tout refuser","refuse all - title":"Refuser tous les cookies",accept:"Accepter",refuse:"Refuser","confirm choices":"Confirmer mes choix","about cookies":o=>` propos des cookies sur ${o.hostname}`,"welcome message":o=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Bienvenue ! Nous utilisons des cookies pour amliorer votre exprience et les services disponibles sur ce site.",o.personalDataPolicyLinkProps!==void 0&&React.createElement(React.Fragment,null," ","Pour en savoir plus, visitez la page"," ",React.createElement(e,Object.assign({},o.personalDataPolicyLinkProps),"Donnes personnelles et cookies"),".")," Vous pouvez,  tout moment, avoir le contrle sur les cookies que vous souhaitez activer.")},customize:"Personnaliser","customize cookies - title":"Personnaliser les cookies","consent modal title":"Panneau de gestion des cookies","cookies management":"Gestion des cookies","personal data":"Donnes personnelles","preferences for all services":o=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Prfrences pour tous les services.",React.createElement("br",null),o.personalDataPolicyLinkProps!==void 0&&React.createElement(e,Object.assign({},o.personalDataPolicyLinkProps),"Donnes personnelles et cookies"))},"see more details":"Voir plus de dtails","hide details":"Cacher les dtails","mandatory cookies":"Cookies obligatoires","mandatory cookies - description":"Ce site utilise des cookies ncessaires  son bon fonctionnement qui ne peuvent pas tre dsactivs.","confirm my choices":"Confirmer mes choix"}});addConsentManagementTranslations({lang:"en",messages:{"all services pref":"Preferences for all services.","personal data cookies":"Personal data and cookies","accept all":"Accept all","accept all - title":"Accept all cookies","refuse all":"Refuse all","refuse all - title":"Refuse all cookies",accept:"Accept",refuse:"Refuse","confirm choices":"Confirm my choices","about cookies":o=>`About cookies on ${o.hostname}`,"welcome message":o=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Welcome to our website! We use cookies to improve your experience and the services available services available on this site.",o.personalDataPolicyLinkProps!==void 0&&React.createElement(React.Fragment,null,"To learn more, visit the"," ",React.createElement(e,Object.assign({},o.personalDataPolicyLinkProps),'"Personal Data and Cookies"')," ","page.")," You can, at any time, have control over which cookies you wish to enable at any time.")},customize:"Customize","customize cookies - title":"Customize cookies","consent modal title":"Cookie management panel","cookies management":"Cookies management","preferences for all services":o=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Preferences for all services ",React.createElement("br",null),o.personalDataPolicyLinkProps!==void 0&&React.createElement(e,Object.assign({},o.personalDataPolicyLinkProps),"Personal data and cookies"))},"see more details":"See more details","hide details":"Hide details","mandatory cookies":"Mandatory cookies","mandatory cookies - description":"This site uses cookies necessary for its proper functioning which cannot be deactivated.","confirm my choices":"Confirm my choices"}});function createConsentBanner(o){const{personalDataPolicyLinkProps:e,processConsentChanges:s,consentModalButtonProps:a}=o;function d(){const{t:b}=useTranslation(),[_,_e]=reactExports.useState(""),[ot,st]=reactExports.useState(!1);reactExports.useEffect(()=>{isBrowser&&_e(location.host)},[]);const ct="fr-consent-banner";return React.createElement(React.Fragment,null,React.createElement("div",{id:ct,className:fr.cx("fr-consent-banner")},React.createElement("h2",{className:fr.cx("fr-h6")},b("about cookies",{hostname:_})),React.createElement("div",null,React.createElement("p",{className:fr.cx("fr-text--sm")},b("welcome message",{personalDataPolicyLinkProps:e}))),React.createElement("ul",{className:fr.cx("fr-consent-banner__buttons","fr-btns-group","fr-btns-group--right","fr-btns-group--inline-reverse","fr-btns-group--inline-sm")},React.createElement("li",null,React.createElement("button",{id:`${ct}-button-accept-all`,className:fr.cx("fr-btn"),title:b("accept all - title"),onClick:async()=>{st(!0),await s({type:"grantAll"}),st(!1)},disabled:ot},b("accept all"))),React.createElement("li",null,React.createElement("button",{id:`${ct}-button-refuse-app`,className:fr.cx("fr-btn"),title:b("refuse all - title"),onClick:()=>{st(!0),s({type:"denyAll"}),st(!1)},disabled:ot},b("refuse all"))),React.createElement("li",null,React.createElement("button",Object.assign({id:`${ct}-button-customize`,className:fr.cx("fr-btn","fr-btn--secondary"),title:b("customize cookies - title"),disabled:ot},a),b("customize"))))))}return{ConsentBanner:d}}function useIsModalOpen(o,e){const{id:s,isOpenedByDefault:a}=o,[d,b]=reactExports.useState(a),_=useConstCallback(()=>e);return reactExports.useEffect(()=>{const _e=[],ot=ft=>{const mt=()=>{b(!1),setTimeout(()=>{var It,Pt;(Pt=(It=_())===null||It===void 0?void 0:It.onConceal)===null||Pt===void 0||Pt.call(It)},0)},bt=()=>{var It,Pt;b(!0),(Pt=(It=_())===null||It===void 0?void 0:It.onDisclose)===null||Pt===void 0||Pt.call(It)};ft.addEventListener("dsfr.conceal",mt),ft.addEventListener("dsfr.disclose",bt);const wt=()=>{ft.removeEventListener("dsfr.conceal",mt),ft.removeEventListener("dsfr.disclose",bt)};_e.push(wt);const Ct=new MutationObserver(It=>{It.find(Tt=>Array.from(Tt.removedNodes).indexOf(ft)!==-1)!==void 0&&(_e.splice(_e.indexOf(wt),1),Ct.disconnect(),_e.splice(_e.indexOf(Rt),1),b(!1),st({isInitialCall:!1}))});Ct.observe(document,{childList:!0,subtree:!0});const Rt=()=>Ct.disconnect();_e.push(Rt)},st=ft=>{const{isInitialCall:mt}=ft;mt&&assert$1(!a,[`The ${s} modal isn't initially mounted,`,`it's ok but in this case ${symToStr({isOpenedByDefault:a})} must be set to false.`,"This limitation is to prevent inconsistent state in SSR setups."].join(" "));const bt=new MutationObserver((Ct,Rt)=>{const It=Ct.map(Pt=>Array.from(Pt.addedNodes)).reduce((Pt,Tt)=>Pt.concat(Tt),[]).find(Pt=>Pt.nodeType===Node.ELEMENT_NODE&&Pt.nodeName==="DIALOG"&&Pt.id===s);It!==void 0&&(Rt.disconnect(),_e.splice(_e.indexOf(wt),1),ot(It),a&&b(!0))});bt.observe(document,{childList:!0,subtree:!0});const wt=()=>bt.disconnect();_e.push(wt)},ct=document.getElementById(s);return ct!==null?ot(ct):st({isInitialCall:!0}),()=>{_e.forEach(ft=>ft())}},[s]),d}function objectKeys(o){return Object.keys(o)}function exclude(o){const e=o instanceof Object?s=>o.indexOf(s)<0:s=>s!==o;return function(s){return e(s)}}function useConst(o){const[e]=reactExports.useState(o);return e}function createConsentManagement$1(o){const{finalityDescription:e,personalDataPolicyLinkProps:s,useFinalityConsent:a,processConsentChanges:d,finalities:b}=o,_=createModal({isOpenedByDefault:!1,id:"fr-consent-modal"});function _e(){const mt=useLang(),{t:bt}=useTranslation(),wt=reactExports.useMemo(()=>typeof e=="function"?e({lang:mt}):e,[mt]),{processLocalConsentChange:Ct,localFinalityConsent:Rt}=function(){const Jt=a(),qt=useConst(()=>createStatefulObservable(()=>Jt??createFullDenyFinalityConsent(b)));useRerenderOnChange(qt),reactExports.useEffect(()=>{Jt!==void 0&&(qt.current=Jt)},[Jt]);const{processConsentChanges:Nt}=createProcessConsentChanges({consentCallback:void 0,finalities:b,getFinalityConsent:()=>qt.current,setFinalityConsent:({finalityConsent:fn})=>qt.current=fn});return{processLocalConsentChange:Nt,localFinalityConsent:qt.current}}(),[It,Pt]=reactExports.useState(!1),Tt=Gt=>async()=>{switch(Pt(!0),Gt){case"apply local changes":await d({type:"new finalityConsent explicitly provided",finalityConsent:Rt});break;case"denyAll":case"grantAll":Ct({type:Gt}),await d({type:Gt});break}Pt(!1),_.close()};return React.createElement(_.Component,{title:bt("consent modal title"),size:"large"},React.createElement("div",null,React.createElement("div",{className:fr.cx("fr-consent-service","fr-consent-manager__header")},React.createElement("fieldset",{className:fr.cx("fr-fieldset","fr-fieldset--inline")},React.createElement("legend",{className:fr.cx("fr-consent-service__title")},bt("preferences for all services",{personalDataPolicyLinkProps:s})),React.createElement("div",{className:fr.cx("fr-consent-service__radios")},React.createElement("div",{className:fr.cx("fr-btns-group","fr-btns-group--inline","fr-btns-group--right")},React.createElement("button",{id:`${_.id}-button-accept-all`,title:bt("accept all - title"),className:fr.cx("fr-btn"),onClick:Tt("grantAll"),disabled:It},bt("accept all"))," ",React.createElement("button",{id:`${_.id}-button-refuse-all`,title:bt("refuse all - title"),className:fr.cx("fr-btn","fr-btn--secondary"),disabled:It,onClick:Tt("denyAll")},bt("refuse all")))))),React.createElement(ot,{title:bt("mandatory cookies"),description:bt("mandatory cookies - description"),finalityConsent:!0,onChange:void 0,subFinalities:void 0}),objectKeys(wt).map(Gt=>({finality:(assert$1(typeof Gt=="string"),Gt),wrap:wt[Gt]})).map(({finality:Gt,wrap:Jt})=>React.createElement(ot,{key:Gt,title:Jt.title,description:Jt.description,subFinalities:Jt.subFinalities,onChange:({subFinality:qt,isConsentGiven:Nt})=>(qt!==void 0?[`${Gt}.${qt}`]:Jt.subFinalities===void 0?[Gt]:Object.keys(Jt.subFinalities).map(Qt=>`${Gt}.${Qt}`)).forEach(Qt=>Ct({type:"atomic change",finality:Qt,isConsentGiven:Nt})),finalityConsent:Rt[Gt]})),React.createElement("ul",{className:fr.cx("fr-consent-manager__buttons","fr-btns-group","fr-btns-group--right","fr-btns-group--inline-sm")},React.createElement("li",null,React.createElement("button",{id:`${_.id}-button-confirm`,className:fr.cx("fr-btn"),disabled:It,onClick:Tt("apply local changes")},bt("confirm choices"))))))}function ot(mt){const{title:bt,description:wt,subFinalities:Ct,finalityConsent:Rt,onChange:It}=mt,{t:Pt}=useTranslation(),{legendId:Tt,descriptionId:Gt,acceptInputId:Jt,refuseInputId:qt,subFinalityDivId:Nt}=function(){const Wt=reactExports.useId(),so=`finality-${Wt}-legend`,pn=`finality-${Wt}-desc`,hn=`consent-finality-${Wt}-accept`,Mt=`consent-finality-${Wt}-refuse`,Hn=`finality-${Wt}-collapse`;return{legendId:so,descriptionId:pn,acceptInputId:hn,refuseInputId:Mt,subFinalityDivId:Hn}}(),Qt=reactExports.useMemo(()=>typeof Rt=="boolean"?Rt?"full consent":"full refusal":Rt.isFullConsent?"full consent":Object.keys(Rt).filter(exclude("isFullConsent")).map(ln=>Rt[ln]).includes(!0)?"partial consent":"full refusal",[Rt]),[fn,Mn]=reactExports.useState(!0);return React.createElement("div",{className:fr.cx("fr-consent-service")},React.createElement("fieldset",{"aria-labelledby":`${Tt} ${Gt}`,role:"group",className:fr.cx("fr-fieldset")},React.createElement("legend",{id:Tt,className:fr.cx("fr-consent-service__title")},bt),React.createElement("div",{className:fr.cx("fr-consent-service__radios")},React.createElement("div",{className:fr.cx("fr-radio-group")},React.createElement("input",Object.assign({type:"radio",id:Jt,checked:Qt==="full consent"},It===void 0?{disabled:!0}:{onChange:()=>It({subFinality:void 0,isConsentGiven:!0})})),React.createElement("label",{className:"fr-label",htmlFor:Jt},Pt("accept"))),React.createElement("div",{className:fr.cx("fr-radio-group")},React.createElement("input",Object.assign({type:"radio",id:qt,checked:Qt==="full refusal"},It===void 0?{disabled:!0}:{onChange:()=>It({subFinality:void 0,isConsentGiven:!1})})),React.createElement("label",{className:fr.cx("fr-label"),htmlFor:qt},Pt("refuse")))),wt!==void 0&&React.createElement("p",{className:fr.cx("fr-consent-service__desc")},wt),Ct!==void 0&&(assert$1(typeof Rt!="boolean"),assert$1(It!==void 0),React.createElement(React.Fragment,null,React.createElement("div",{className:fr.cx("fr-consent-service__collapse")},React.createElement("button",{className:fr.cx("fr-consent-service__collapse-btn"),"aria-expanded":"false","aria-describedby":Tt,"aria-controls":Nt,onClick:()=>Mn(!fn)},Pt(fn?"see more details":"hide details"))),React.createElement("div",{className:fr.cx("fr-consent-services","fr-collapse"),id:Nt},Object.entries(Ct).map(([ln,Wt])=>React.createElement(st,{key:ln,title:Wt,isConsentGiven:Rt[ln],onChange:({isConsentGiven:so})=>It({subFinality:ln,isConsentGiven:so})})))))))}function st(mt){const{title:bt,onChange:wt,isConsentGiven:Ct}=mt,{t:Rt}=useTranslation(),{acceptInputId:It,refuseInputId:Pt}=function(){const Gt=reactExports.useId(),Jt=`consent-finality-${Gt}-service-accept`,qt=`consent-finality-${Gt}-service-refuse`;return{acceptInputId:Jt,refuseInputId:qt}}();return React.createElement("div",{className:fr.cx("fr-consent-service")},React.createElement("fieldset",{className:fr.cx("fr-fieldset","fr-fieldset--inline")},React.createElement("legend",{className:fr.cx("fr-consent-service__title")},bt),React.createElement("div",{className:"fr-consent-service__radios fr-fieldset--inline"},React.createElement("div",{className:"fr-radio-group"},React.createElement("input",{type:"radio",id:It,checked:Ct,onChange:()=>wt({isConsentGiven:!0})}),React.createElement("label",{className:fr.cx("fr-label"),htmlFor:It},Rt("accept"))),React.createElement("div",{className:fr.cx("fr-radio-group")},React.createElement("input",{type:"radio",id:Pt,checked:!Ct,onChange:()=>wt({isConsentGiven:!1})}),React.createElement("label",{className:fr.cx("fr-label"),htmlFor:Pt},Rt("refuse"))))))}const ct=_.buttonProps;function ft(){return useIsModalOpen(_)}return{ConsentManagement:_e,consentModalButtonProps:ct,useIsConsentManagementOpen:ft}}function createConsentBannerAndConsentManagement(o){const{finalityDescription:e,useFinalityConsent:s,processConsentChanges:a,personalDataPolicyLinkProps:d,finalities:b}=o,{ConsentManagement:_,consentModalButtonProps:_e,useIsConsentManagementOpen:ot}=createConsentManagement$1({finalityDescription:e,personalDataPolicyLinkProps:d,useFinalityConsent:s,processConsentChanges:a,finalities:b}),{ConsentBanner:st}=createConsentBanner({personalDataPolicyLinkProps:d,processConsentChanges:a,consentModalButtonProps:_e}),{FooterConsentManagementItem:ct}=createFooterConsentManagementItem({consentModalButtonProps:_e});let ft=()=>{a({type:"no changes but trigger consent callbacks"}),ft=void 0};function mt(){const[wt,Ct]=reactExports.useReducer(()=>!0,!1);reactExports.useEffect(()=>{ft==null||ft(),Ct()},[]);const Rt=s(),It=ot();return wt?React.createElement(React.Fragment,null,Rt===void 0&&!It&&React.createElement(st,null),React.createElement(_,null)):null}const{FooterPersonalDataPolicyItem:bt}=createFooterPersonalDataPolicyItem({personalDataPolicyLinkProps:d});return{ConsentBannerAndConsentManagement:mt,FooterConsentManagementItem:ct,FooterPersonalDataPolicyItem:bt}}function createFooterConsentManagementItem(o){const{consentModalButtonProps:e}=o;function s(){const{t:a}=useTranslation();return React.createElement(FooterBottomItem,{bottomItem:{buttonProps:e,text:a("cookies management")}})}return{FooterConsentManagementItem:s}}function createFooterPersonalDataPolicyItem(o){const{personalDataPolicyLinkProps:e}=o;function s(){const{t:a}=useTranslation();if(e===void 0)throw new Error(["You should provide a personalDataPolicyLinkProps to createConsentManagement if","you want to add a link to the personal data policy in the footer"].join(" "));return React.createElement(FooterBottomItem,{bottomItem:{text:a("personal data"),linkProps:e}})}return{FooterPersonalDataPolicyItem:s}}const defaultLocalStorageKeyPrefix="@codegouvfr/react-dsfr finalityConsent";function createConsentManagement(o){const{finalityDescription:e,personalDataPolicyLinkProps:s,consentCallback:a,localStorageKeyPrefix:d=defaultLocalStorageKeyPrefix}=o,b=getFinalitiesFromFinalityDescription({finalityDescription:typeof e=="function"?e({lang:"fr"}):e}),_=`${d} ${b.join("-")}`,_e=createStatefulObservable(()=>{if(!isBrowser)return;const Ct=localStorage.getItem(_);if(Ct!==null)return JSON.parse(Ct)}),{processConsentChanges:ot,useConsentCallback:st}=createProcessConsentChanges({consentCallback:a,finalities:b,getFinalityConsent:()=>_e.current,setFinalityConsent:({finalityConsent:Ct,prAllConsentCallbacksRun:Rt})=>{localStorage.setItem(_,JSON.stringify(Ct)),Rt.then(()=>_e.current=Ct)}});function ct(){useRerenderOnChange(_e);const[Ct,Rt]=reactExports.useReducer(()=>!0,!0);if(reactExports.useEffect(()=>{Rt()},[]),!!Ct)return _e.current}const{useConsent:ft}=createUseConsent({useFinalityConsent:ct,processConsentChanges:ot,useConsentCallback:st}),{ConsentBannerAndConsentManagement:mt,FooterConsentManagementItem:bt,FooterPersonalDataPolicyItem:wt}=createConsentBannerAndConsentManagement({finalityDescription:e,personalDataPolicyLinkProps:s,processConsentChanges:ot,useFinalityConsent:ct,finalities:b});return{useConsent:ft,ConsentBannerAndConsentManagement:mt,FooterConsentManagementItem:bt,FooterPersonalDataPolicyItem:wt}}function getFinalitiesFromFinalityDescription(o){const{finalityDescription:e}=o,s=[];for(const a in e){const d=e[a],{subFinalities:b}=d;if(b===void 0){s.push(a);continue}for(const _ in b)s.push(`${a}.${_}`)}return s}async function startEulerianAnalytics(o){return await prDsfrLoaded,window.dsfr.analytics=o,await __vitePreload(()=>import("./analytics.module.min-BQeBmxFq.js"),[]),await dsfr.analytics.readiness,{enable:()=>{window.dsfr.analytics.opt.enable()},disable:()=>{window.dsfr.analytics.opt.disable()}}}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)({}).hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$2.apply(null,arguments)}var Action;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(Action||(Action={}));var readOnly=function(o){return o},BeforeUnloadEventType="beforeunload",HashChangeEventType="hashchange",PopStateEventType="popstate";function createBrowserHistory(o){o===void 0&&(o={});var e=o,s=e.window,a=s===void 0?document.defaultView:s,d=a.history;function b(){var Nt=a.location,Qt=Nt.pathname,fn=Nt.search,Mn=Nt.hash,ln=d.state||{};return[ln.idx,readOnly({pathname:Qt,search:fn,hash:Mn,state:ln.usr||null,key:ln.key||"default"})]}var _=null;function _e(){if(_)bt.call(_),_=null;else{var Nt=Action.Pop,Qt=b(),fn=Qt[0],Mn=Qt[1];if(bt.length){if(fn!=null){var ln=ct-fn;ln&&(_={action:Nt,location:Mn,retry:function(){Jt(ln*-1)}},Jt(ln))}}else Pt(Nt)}}a.addEventListener(PopStateEventType,_e);var ot=Action.Pop,st=b(),ct=st[0],ft=st[1],mt=createEvents(),bt=createEvents();ct==null&&(ct=0,d.replaceState(_extends$2({},d.state,{idx:ct}),""));function wt(Nt){return typeof Nt=="string"?Nt:createPath(Nt)}function Ct(Nt,Qt){return Qt===void 0&&(Qt=null),readOnly(_extends$2({pathname:ft.pathname,hash:"",search:""},typeof Nt=="string"?parsePath(Nt):Nt,{state:Qt,key:createKey$1()}))}function Rt(Nt,Qt){return[{usr:Nt.state,key:Nt.key,idx:Qt},wt(Nt)]}function It(Nt,Qt,fn){return!bt.length||(bt.call({action:Nt,location:Qt,retry:fn}),!1)}function Pt(Nt){ot=Nt;var Qt=b();ct=Qt[0],ft=Qt[1],mt.call({action:ot,location:ft})}function Tt(Nt,Qt){var fn=Action.Push,Mn=Ct(Nt,Qt);function ln(){Tt(Nt,Qt)}if(It(fn,Mn,ln)){var Wt=Rt(Mn,ct+1),so=Wt[0],pn=Wt[1];try{d.pushState(so,"",pn)}catch{a.location.assign(pn)}Pt(fn)}}function Gt(Nt,Qt){var fn=Action.Replace,Mn=Ct(Nt,Qt);function ln(){Gt(Nt,Qt)}if(It(fn,Mn,ln)){var Wt=Rt(Mn,ct),so=Wt[0],pn=Wt[1];d.replaceState(so,"",pn),Pt(fn)}}function Jt(Nt){d.go(Nt)}var qt={get action(){return ot},get location(){return ft},createHref:wt,push:Tt,replace:Gt,go:Jt,back:function(){Jt(-1)},forward:function(){Jt(1)},listen:function(Qt){return mt.push(Qt)},block:function(Qt){var fn=bt.push(Qt);return bt.length===1&&a.addEventListener(BeforeUnloadEventType,promptBeforeUnload),function(){fn(),bt.length||a.removeEventListener(BeforeUnloadEventType,promptBeforeUnload)}}};return qt}function createHashHistory(o){o===void 0&&(o={});var e=o,s=e.window,a=s===void 0?document.defaultView:s,d=a.history;function b(){var Qt=parsePath(a.location.hash.substr(1)),fn=Qt.pathname,Mn=fn===void 0?"/":fn,ln=Qt.search,Wt=ln===void 0?"":ln,so=Qt.hash,pn=so===void 0?"":so,hn=d.state||{};return[hn.idx,readOnly({pathname:Mn,search:Wt,hash:pn,state:hn.usr||null,key:hn.key||"default"})]}var _=null;function _e(){if(_)bt.call(_),_=null;else{var Qt=Action.Pop,fn=b(),Mn=fn[0],ln=fn[1];if(bt.length){if(Mn!=null){var Wt=ct-Mn;Wt&&(_={action:Qt,location:ln,retry:function(){qt(Wt*-1)}},qt(Wt))}}else Tt(Qt)}}a.addEventListener(PopStateEventType,_e),a.addEventListener(HashChangeEventType,function(){var Qt=b(),fn=Qt[1];createPath(fn)!==createPath(ft)&&_e()});var ot=Action.Pop,st=b(),ct=st[0],ft=st[1],mt=createEvents(),bt=createEvents();ct==null&&(ct=0,d.replaceState(_extends$2({},d.state,{idx:ct}),""));function wt(){var Qt=document.querySelector("base"),fn="";if(Qt&&Qt.getAttribute("href")){var Mn=a.location.href,ln=Mn.indexOf("#");fn=ln===-1?Mn:Mn.slice(0,ln)}return fn}function Ct(Qt){return wt()+"#"+(typeof Qt=="string"?Qt:createPath(Qt))}function Rt(Qt,fn){return fn===void 0&&(fn=null),readOnly(_extends$2({pathname:ft.pathname,hash:"",search:""},typeof Qt=="string"?parsePath(Qt):Qt,{state:fn,key:createKey$1()}))}function It(Qt,fn){return[{usr:Qt.state,key:Qt.key,idx:fn},Ct(Qt)]}function Pt(Qt,fn,Mn){return!bt.length||(bt.call({action:Qt,location:fn,retry:Mn}),!1)}function Tt(Qt){ot=Qt;var fn=b();ct=fn[0],ft=fn[1],mt.call({action:ot,location:ft})}function Gt(Qt,fn){var Mn=Action.Push,ln=Rt(Qt,fn);function Wt(){Gt(Qt,fn)}if(Pt(Mn,ln,Wt)){var so=It(ln,ct+1),pn=so[0],hn=so[1];try{d.pushState(pn,"",hn)}catch{a.location.assign(hn)}Tt(Mn)}}function Jt(Qt,fn){var Mn=Action.Replace,ln=Rt(Qt,fn);function Wt(){Jt(Qt,fn)}if(Pt(Mn,ln,Wt)){var so=It(ln,ct),pn=so[0],hn=so[1];d.replaceState(pn,"",hn),Tt(Mn)}}function qt(Qt){d.go(Qt)}var Nt={get action(){return ot},get location(){return ft},createHref:Ct,push:Gt,replace:Jt,go:qt,back:function(){qt(-1)},forward:function(){qt(1)},listen:function(fn){return mt.push(fn)},block:function(fn){var Mn=bt.push(fn);return bt.length===1&&a.addEventListener(BeforeUnloadEventType,promptBeforeUnload),function(){Mn(),bt.length||a.removeEventListener(BeforeUnloadEventType,promptBeforeUnload)}}};return Nt}function createMemoryHistory(o){o===void 0&&(o={});var e=o,s=e.initialEntries,a=s===void 0?["/"]:s,d=e.initialIndex,b=a.map(function(Tt){var Gt=readOnly(_extends$2({pathname:"/",search:"",hash:"",state:null,key:createKey$1()},typeof Tt=="string"?parsePath(Tt):Tt));return Gt}),_=clamp$1(d??b.length-1,0,b.length-1),_e=Action.Pop,ot=b[_],st=createEvents(),ct=createEvents();function ft(Tt){return typeof Tt=="string"?Tt:createPath(Tt)}function mt(Tt,Gt){return Gt===void 0&&(Gt=null),readOnly(_extends$2({pathname:ot.pathname,search:"",hash:""},typeof Tt=="string"?parsePath(Tt):Tt,{state:Gt,key:createKey$1()}))}function bt(Tt,Gt,Jt){return!ct.length||(ct.call({action:Tt,location:Gt,retry:Jt}),!1)}function wt(Tt,Gt){_e=Tt,ot=Gt,st.call({action:_e,location:ot})}function Ct(Tt,Gt){var Jt=Action.Push,qt=mt(Tt,Gt);function Nt(){Ct(Tt,Gt)}bt(Jt,qt,Nt)&&(_+=1,b.splice(_,b.length,qt),wt(Jt,qt))}function Rt(Tt,Gt){var Jt=Action.Replace,qt=mt(Tt,Gt);function Nt(){Rt(Tt,Gt)}bt(Jt,qt,Nt)&&(b[_]=qt,wt(Jt,qt))}function It(Tt){var Gt=clamp$1(_+Tt,0,b.length-1),Jt=Action.Pop,qt=b[Gt];function Nt(){It(Tt)}bt(Jt,qt,Nt)&&(_=Gt,wt(Jt,qt))}var Pt={get index(){return _},get action(){return _e},get location(){return ot},createHref:ft,push:Ct,replace:Rt,go:It,back:function(){It(-1)},forward:function(){It(1)},listen:function(Gt){return st.push(Gt)},block:function(Gt){return ct.push(Gt)}};return Pt}function clamp$1(o,e,s){return Math.min(Math.max(o,e),s)}function promptBeforeUnload(o){o.preventDefault(),o.returnValue=""}function createEvents(){var o=[];return{get length(){return o.length},push:function(s){return o.push(s),function(){o=o.filter(function(a){return a!==s})}},call:function(s){o.forEach(function(a){return a&&a(s)})}}}function createKey$1(){return Math.random().toString(36).substr(2,8)}function createPath(o){var e=o.pathname,s=e===void 0?"/":e,a=o.search,d=a===void 0?"":a,b=o.hash,_=b===void 0?"":b;return d&&d!=="?"&&(s+=d.charAt(0)==="?"?d:"?"+d),_&&_!=="#"&&(s+=_.charAt(0)==="#"?_:"#"+_),s}function parsePath(o){var e={};if(o){var s=o.indexOf("#");s>=0&&(e.hash=o.substr(s),o=o.substr(0,s));var a=o.indexOf("?");a>=0&&(e.search=o.substr(a),o=o.substr(0,a)),o&&(e.pathname=o)}return e}function _extends$1(){return _extends$1=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$1.apply(this,arguments)}function _unsupportedIterableToArray(o,e){if(o){if(typeof o=="string")return _arrayLikeToArray(o,e);var s=Object.prototype.toString.call(o).slice(8,-1);if(s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set")return Array.from(o);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray(o,e)}}function _arrayLikeToArray(o,e){(e==null||e>o.length)&&(e=o.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=o[s];return a}function _createForOfIteratorHelperLoose(o,e){var s=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(s)return(s=s.call(o)).next.bind(s);if(Array.isArray(o)||(s=_unsupportedIterableToArray(o))||e){s&&(o=s);var a=0;return function(){return a>=o.length?{done:!0}:{done:!1,value:o[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function asArray$1(o){return Array.isArray(o)?o:[o]}function buildPathDefs(o,e,s){var a=Object.keys(e).map(function(_){var _e=_extends$1({paramName:_},e[_]);return _e}),d={};a.forEach(function(_){var _e=_.paramName;d[_e]=getParamId(_e)});var b=s(d);return asArray$1(b).map(function(_){if(_.length===1)return[];for(var _e=_.split("/").slice(1),ot={},st=[],ct=_createForOfIteratorHelperLoose(_e),ft;!(ft=ct()).done;){for(var mt=ft.value,bt=null,wt=_createForOfIteratorHelperLoose(a),Ct;!(Ct=wt()).done;){var Rt=Ct.value;mt.indexOf(getParamId(Rt.paramName))>=0&&(bt=Rt,ot[Rt.paramName]=!0)}if(bt){var It=mt.split(getParamId(bt.paramName)),Pt=It[0],Tt=It[1];st.push({leading:Pt,trailing:Tt,namedParamDef:bt})}else st.push({leading:mt,trailing:"",namedParamDef:null})}return st.filter(function(Gt){var Jt,qt;return((Jt=Gt.namedParamDef)==null?void 0:Jt["~internal"].optional)||((qt=Gt.namedParamDef)==null?void 0:qt["~internal"].trailing)}).length,st[st.length-1].namedParamDef,a.map(function(Gt){var Jt=Gt.paramName;return Jt}).filter(function(Gt){return!ot[Gt]}),st})}function getParamId(o){return"${p."+o+"}"}function getParamDefsOfType(o,e){var s={};return Object.keys(e).forEach(function(a){var d=e[a];d["~internal"].kind===o&&(s[a]=d)}),s}function createLocation(o){var e=o.paramCollection,s=o.paramDefCollection,a=o.arraySeparator,d=o.queryStringSerializer,b=o.pathDefs,_=o.baseUrl,_e={path:{},query:{},state:{}},ot=function(Rt){var It,Pt=e[Rt];if(Pt===void 0)return"continue";var Tt=s[Rt],Gt=Tt["~internal"].kind!=="state"&&!Tt["~internal"].trailing,Jt=(It=Tt["~internal"].valueSerializer.urlEncode)!=null?It:Gt,qt=function(fn){var Mn;return Tt["~internal"].array?Mn=fn.length===0?null:fn.map(function(ln){return stringify(Tt,ln,Jt)}).join(a):Mn=stringify(Tt,fn,Jt),Mn},Nt=qt(Pt);if(Tt["~internal"].kind==="query"&&Tt["~internal"].default!==void 0&&qt(Tt["~internal"].default)===Nt)return"continue";_e[Tt["~internal"].kind][Rt]={valueSerializerId:Tt["~internal"].valueSerializer.id,array:Tt["~internal"].array,value:Nt}};for(var st in s)var ct=ot(st);var ft="/"+b[0].filter(function(Ct){var Rt=Ct.namedParamDef;return!(Rt!=null&&Rt["~internal"].optional&&_e.path[Rt.paramName]===void 0)}).map(function(Ct){var Rt=Ct.namedParamDef,It=Ct.leading,Pt=Ct.trailing,Tt=Rt?_e.path[Rt.paramName].value:"";return It+Tt+Pt}).join("/"),mt=Object.keys(_e.query).length>0,bt=mt?d.stringify(_e.query):void 0,wt=Object.keys(_e.state).length===0?void 0:Object.keys(_e.state).reduce(function(Ct,Rt){var It;return _extends$1({},Ct,(It={},It[Rt]=_e.state[Rt].value,It))},{});return{fullPath:(_==="/"?"":_)+ft,path:ft,query:bt,state:wt}}function stringify(o,e,s){var a=o["~internal"].valueSerializer.stringify(e);return s?encodeURIComponent(a):a}var noMatch={__noMatch:!0},stringUtils={startsWith,endsWith,splitFirst};function startsWith(o,e){for(var s=0;s<e.length;s++)if(e[s]!==o[s])return!1;return!0}function endsWith(o,e){for(var s=1;s<=e.length;s++)if(e[e.length-s]!==o[o.length-s])return!1;return!0}function splitFirst(o,e){var s=o.split(e),a=s[0],d=s.slice(1);return[a,d.join(e)]}var endsWith$1=stringUtils.endsWith,startsWith$1=stringUtils.startsWith;function getPathMatch(o){for(var e=o.path,s=o.pathDefs,a=o.arraySeparator,d=0;d<s.length;d++){var b=_(s[d]);if(b!==!1)return _extends$1({},b,{primaryPath:d===0})}return!1;function _(_e){var ot={};if(e==="/"&&_e.length===0)return{params:ot,numExtraneousParams:0};var st=e.length>1&&endsWith$1(e,"/");st&&(e=e.slice(0,e.length-1));for(var ct=e.split("/").slice(1),ft=function(Ct){var Rt,It,Pt=Ct>=_e.length?null:_e[Ct],Tt=Ct>=ct.length?null:ct[Ct];if(Pt===null)return{v:!1};var Gt=_e.length-1-Ct;if(Tt===null){var Jt;return Gt!==0||!((Jt=Pt.namedParamDef)!=null&&Jt["~internal"].optional)?{v:!1}:"break"}if((Rt=Pt.namedParamDef)!=null&&Rt["~internal"].trailing&&(Tt=ct.slice(Ct).join("/")),!startsWith$1(Tt,Pt.leading))return{v:!1};var qt=Tt.slice(Pt.leading.length);if(!endsWith$1(qt,Pt.trailing))return{v:!1};var Nt=qt.slice(0,qt.length-Pt.trailing.length);if(!Pt.namedParamDef)return Nt===""?"continue":{v:!1};if(Nt==="")return Pt.namedParamDef["~internal"].optional?"continue":{v:!1};var Qt=(It=Pt.namedParamDef["~internal"].valueSerializer.urlEncode)!=null?It:!Pt.namedParamDef["~internal"].trailing,fn=void 0;if(Pt.namedParamDef["~internal"].array){if(fn=Nt.split(a).map(function(Mn){var ln;return(ln=Pt.namedParamDef)==null?void 0:ln["~internal"].valueSerializer.parse(Qt?decodeURIComponent(Mn):Mn)}),fn.some(function(Mn){return Mn===noMatch}))return{v:!1}}else if(fn=Pt.namedParamDef["~internal"].valueSerializer.parse(Qt?decodeURIComponent(Nt):Nt),fn===noMatch)return{v:!1};if(Pt.namedParamDef["~internal"].trailing&&st&&Pt.trailing===""&&(fn=fn+"/"),ot[Pt.namedParamDef.paramName]=fn,Pt.namedParamDef["~internal"].trailing)return"break"},mt=0;mt<Math.max(_e.length,ct.length);mt++){var bt=ft(mt);if(bt==="break")break;if(bt!=="continue"&&typeof bt=="object")return bt.v}return{params:ot,numExtraneousParams:0}}}function getObjectMatch(o){for(var e=o.object,s=o.paramDefs,a=o.urlEncodeDefault,d=o.arraySeparator,b={},_=Object.keys(s).map(function(mt){return _extends$1({name:mt},s[mt])}),_e=_extends$1({},e),ot=function(){var bt=ct.value,wt=e[bt.name];if(delete _e[bt.name],wt===void 0)return bt["~internal"].optional?"continue":{v:!1};var Ct=void 0;if(wt===null)if(bt["~internal"].array)Ct=[];else return bt["~internal"].optional?"continue":{v:!1};else if(bt["~internal"].array){if(Ct=wt.split(d).map(function(It){var Pt;return bt["~internal"].valueSerializer.parse(((Pt=bt["~internal"].valueSerializer.urlEncode)!=null?Pt:a)?decodeURIComponent(It):It)}),Ct.some(function(It){return It===noMatch}))return bt["~internal"].optional?"continue":{v:!1}}else{var Rt;if(Ct=bt["~internal"].valueSerializer.parse(((Rt=bt["~internal"].valueSerializer.urlEncode)!=null?Rt:a)?decodeURIComponent(wt):wt),Ct===noMatch)return bt["~internal"].optional?"continue":{v:!1}}b[bt.name]=Ct},st=_createForOfIteratorHelperLoose(_),ct;!(ct=st()).done;){var ft=ot();if(ft!=="continue"&&typeof ft=="object")return ft.v}return{params:b,numExtraneousParams:Object.keys(_e).length}}function getStateMatch(o,e,s){return getObjectMatch({object:o??{},paramDefs:e,urlEncodeDefault:!1,arraySeparator:s})}function getQueryMatch(o,e,s,a){var d={};return o&&(d=s.parse(o)),getObjectMatch({object:d,paramDefs:e,urlEncodeDefault:!0,arraySeparator:a})}function createMatcher(o){var e=o.pathDefs,s=o.params,a=getParamDefsOfType("query",s),d=getParamDefsOfType("state",s),b={};return Object.keys(s).forEach(function(_){var _e=s[_];_e["~internal"].default!==void 0&&(b[_]=_e["~internal"].default)}),function(_){var _e=_.routerLocation,ot=_.arraySeparator,st=_.queryStringSerializer;if(_e.path===void 0)return!1;var ct=getPathMatch({path:_e.path,pathDefs:e,arraySeparator:ot});if(ct===!1)return!1;var ft=getQueryMatch(_e.query,a,st,ot);if(ft===!1)return!1;var mt=getStateMatch(_e.state,d,ot);return mt===!1?!1:{primaryPath:ct.primaryPath,params:_extends$1({},b,ct.params,ft.params,mt.params),numExtraneousParams:ct.numExtraneousParams+ft.numExtraneousParams+mt.numExtraneousParams}}}function preventDefaultLinkClickBehavior(o){o===void 0&&(o={});var e=o,s=!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey),a=!e.target||!e.target.target||e.target.target==="_self";return a&&!e.defaultPrevented&&e.button===0&&!s?(e&&e.preventDefault&&e.preventDefault(),!0):!1}var startsWith$2=stringUtils.startsWith;function buildRoute(o){var e=o.routeName,s=o.params,a=o.location,d=o.routerContext,b=d.navigate,_=d.history,_e=_.createHref({pathname:e===!1?a.fullPath:a.path,search:a.query?"?"+a.query:""});startsWith$2(_e,"#")&&(_e="/"+_e),e!==!1&&d.baseUrl!=="/"&&(_e=d.baseUrl+_e);var ot={name:e,params:s,href:_e,link:{href:_e,onClick:function(ct){if(preventDefaultLinkClickBehavior(ct))return ot.push()}},action:null,push:function(){return b(_extends$1({},ot,{action:"push"}),!0)},replace:function(){return b(_extends$1({},ot,{action:"replace"}),!0)}};return ot}function createRouteBuilder(o,e,s){var a=buildPathDefs(o,getParamDefsOfType("path",e["~internal"].params),e["~internal"].path),d=function(_){_===void 0&&(_={});var _e=s(),ot=_e.arraySeparator,st=_e.queryStringSerializer,ct=_e.baseUrl,ft=_extends$1({},_);Object.keys(e["~internal"].params).forEach(function(bt){var wt=e["~internal"].params[bt];ft[bt]===void 0&&wt["~internal"].default!==void 0&&(ft[bt]=wt["~internal"].default)});var mt=createLocation({paramCollection:_,paramDefCollection:e["~internal"].params,arraySeparator:ot,queryStringSerializer:st,pathDefs:a,baseUrl:ct});return buildRoute({routeName:o,params:ft,location:mt,routerContext:_e})};return Object.defineProperty(d,"name",{value:o}),d["~internal"]={type:"RouteBuilder",match:createMatcher({pathDefs:a,params:e["~internal"].params}),pathDefs:a,Route:null},d}function createQueryStringSerializer(o){var e,s;o===void 0&&(o={});var a=(e=o.queryStringArrayFormat)!=null?e:"singleKeyWithBracket",d=(s=o.arraySeparator)!=null?s:",",b=a==="multiKey"||a==="multiKeyWithBracket",_=a==="multiKey"||a==="singleKey"?"":"[]";return{parse:function(ot){for(var st={},ct=_createForOfIteratorHelperLoose(ot.split("&")),ft;!(ft=ct()).done;){var mt=ft.value,bt=mt.split("="),wt=bt[0],Ct=bt[1],Rt=bt.slice(2);if(!(wt===void 0||Rt.length>0)){var It=decodeURIComponent(stringUtils.endsWith(wt,_)?wt.slice(0,wt.length-_.length):wt);Ct===void 0?st[It]=null:st[It]&&b?st[It]+=""+d+Ct:st[It]=Ct}}return st},stringify:function(ot){return Object.keys(ot).map(function(st){var ct=encodeURIComponent(st),ft=ot[st].array?""+ct+_:ct,mt=ot[st].value;if(mt===null)return ft;if(ot[st].array&&b){var bt=mt.split(d);return bt.map(function(wt){return ft+"="+wt}).join("&")}return ft+"="+mt}).join("&")}}}function getMatchingRoute(o,e){var s=e.getRoutes,a=e.queryStringSerializer,d=e.arraySeparator,b=s(),_=!1;for(var _e in b){var ot=b[_e]["~internal"].match({routerLocation:o,queryStringSerializer:a,arraySeparator:d});if(ot!==!1){if(ot.numExtraneousParams===0)return{route:b[_e](ot.params),primaryPath:ot.primaryPath};(_===!1||ot.numExtraneousParams<_.numExtraneousParams)&&(_=_extends$1({},ot,{routeName:_e}))}}return _?{route:b[_.routeName](_.params),primaryPath:_.primaryPath}:{route:buildRoute({routeName:!1,params:{},location:o,routerContext:e}),primaryPath:!0}}var startsWith$3=stringUtils.startsWith;function convertToRouterLocationFromHistoryLocation(o,e){return{fullPath:o.pathname,path:startsWith$3(o.pathname,e)?e!=="/"?o.pathname.replace(e,""):o.pathname:void 0,query:o.search?startsWith$3(o.search,"?")?o.search.slice(1):o.search:void 0,state:typeof o.state=="object"&&o.state!==null?o.state.state:void 0}}var splitFirst$1=stringUtils.splitFirst;function getRouteByHref(o,e,s){var a=splitFirst$1(o,"?"),d=a[0],b=a[1],_=convertToRouterLocationFromHistoryLocation({pathname:d,search:b,state:e},s.baseUrl);return getMatchingRoute(_,s)}function createNavigationHandlerManager(o){var e=o.startListening,s=o.stopListening,a=[],d=0;return{add:_,getHandlers:b};function b(){return a.map(function(_e){var ot=_e.handler;return ot})}function _(_e){var ot=d++;return a.push({id:ot,handler:_e}),a.length===1&&e(),st;function st(){var ct=a.map(function(ft){var mt=ft.id;return mt}).indexOf(ot);ct>=0&&(a.splice(ct,1),a.length===0&&s())}}}function attemptScrollToTop(o,e){if(o.action==="push"&&typeof window=="object"&&window!==null&&typeof window.scroll=="function"&&e!==!1&&typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string"&&!(navigator.userAgent.indexOf("Node.js")>0||navigator.userAgent.indexOf("jsdom")>0))try{window.scroll(0,0)}catch{}}function serializeStateParams(o,e){var s={};if(o.name)for(var a=Object.keys(o.params).sort(),d=_createForOfIteratorHelperLoose(a),b;!(b=d()).done;){var _=b.value,_e=e[o.name]["~internal"].params[_]["~internal"];if(_e.kind==="state"){var ot=o.params[_];s[_]=_e.valueSerializer.stringify(ot)}}return s}var splitFirst$2=stringUtils.splitFirst;function createRouter(){for(var o,e,s,a,d,b=arguments.length,_=new Array(b),_e=0;_e<b;_e++)_[_e]=arguments[_e];var ot=parseArgs(_),st=ot.routeDefs,ct=ot.opts,ft=createNavigationHandlerManager({startListening:function(){Rt=Ct.listen(function(so){if(It){It=!1;return}var pn=convertToRouterLocationFromHistoryLocation(so.location,mt),hn=so.action.toLowerCase(),Mt=getMatchingRoute(pn,ln()),Hn=Mt.route,cn=Mt.primaryPath;Mn(_extends$1({},Hn,{action:hn}),cn)})},stopListening:function(){return Rt==null?void 0:Rt()}}),mt=(o=ct.baseUrl)!=null?o:"/",bt=(e=(s=ct.arrayFormat)==null?void 0:s.separator)!=null?e:",",wt=(a=ct.queryStringSerializer)!=null?a:createQueryStringSerializer({queryStringArrayFormat:(d=ct.arrayFormat)==null?void 0:d.queryString,arraySeparator:bt}),Ct,Rt,It=!1,Pt=!1,Tt=null,Gt=null,Jt=[];Qt(ct.session);var qt=createRouteBuilderCollection(ln),Nt={routes:qt,session:{push:function(so,pn){var hn=getRouteByHref(so,pn,ln()),Mt=hn.route,Hn=hn.primaryPath;return fn(_extends$1({},Mt,{action:"push"}),Hn)},replace:function(so,pn){var hn=getRouteByHref(so,pn,ln()),Mt=hn.route,Hn=hn.primaryPath;return fn(_extends$1({},Mt,{action:"replace"}),Hn)},back:function(so){so===void 0&&(so=1),Ct.go(-so)},forward:function(so){so===void 0&&(so=1),Ct.go(so)},getInitialRoute:function(){if(!Tt){var so=getMatchingRoute(convertToRouterLocationFromHistoryLocation(Ct.location,mt),ln());so.primaryPath||(Pt=!0,so.route.replace(),so=getMatchingRoute(convertToRouterLocationFromHistoryLocation(Ct.location,mt),ln())),Tt=so.route}return Tt},reset:function(so){return Qt(so)},block:function(so){Jt.push(so);var pn=Ct.block(function(hn){var Mt=getMatchingRoute(convertToRouterLocationFromHistoryLocation(hn.location,mt),ln()),Hn=Mt.route,cn=hn.action.toLowerCase();so({route:_extends$1({},Hn,{action:cn}),retry:hn.retry})});return function(){Jt.splice(Jt.findIndex(function(hn){return hn===so}),1),pn()}},listen:function(so){return ft.add(so)}}};return Nt;function Qt(Wt){Wt===void 0&&(Wt={type:typeof window<"u"&&typeof window.document<"u"?"browser":"memory"}),Tt=null,Wt.type==="memory"?Ct=createMemoryHistory({initialEntries:Wt.initialEntries,initialIndex:Wt.initialIndex}):Wt.type==="hash"?Ct=createHashHistory({window:Wt.window}):Ct=createBrowserHistory({window:Wt.window})}function fn(Wt,so){var pn;if(Jt.length>0){Jt.forEach(function(fo){fo({route:Wt,retry:function(){Wt[Wt.action==="push"?"push":"replace"]()}})});return}var hn=serializeStateParams(Wt,st);if(!(((pn=Gt)==null?void 0:pn.href)===Wt.href&&JSON.stringify(serializeStateParams(Gt,st))===JSON.stringify(hn))){Pt?Pt=!1:Mn(Wt,so),It=!0;var Mt=splitFirst$2(Wt.href,"?"),Hn=Mt[0],cn=Mt[1];Ct[Wt.action==="replace"?"replace":"push"]({pathname:Hn,search:cn?"?"+cn:"",hash:""},hn?{state:hn}:void 0)}}function Mn(Wt,so){if(!so){Wt.replace();return}for(var pn=_createForOfIteratorHelperLoose(ft.getHandlers()),hn;!(hn=pn()).done;){var Mt=hn.value;Mt(Wt)}attemptScrollToTop(Wt,ct.scrollToTop),Gt=Wt}function ln(){return{queryStringSerializer:wt,arraySeparator:bt,navigate:fn,history:Ct,routeDefs:st,getRoutes:function(){return qt},baseUrl:mt}}}function parseArgs(o){var e=o.length===1?o[0]:o[1],s=o.length===1?{}:o[0];return{routeDefs:e,opts:s}}function createRouteBuilderCollection(o){var e={},s=o(),a=s.routeDefs;for(var d in a){var b=a[d];e[d]=createRouteBuilder(d,b,o)}return e}function defineRoute(){for(var o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];var a=parseArgs$1(e),d={"~internal":{type:"RouteDef",params:a.params,path:a.path},extend:function(){for(var _=arguments.length,_e=new Array(_),ot=0;ot<_;ot++)_e[ot]=arguments[ot];var st=parseArgs$1(_e),ct=st.params,ft=st.path,mt=Object.keys(a.params),bt=Object.keys(ct);return mt.filter(function(wt){return bt.indexOf(wt)>=0}),defineRoute(_extends$1({},ct,a.params),function(wt){var Ct,Rt=asArray$1(a.path(Pt(mt))),It=asArray$1(ft(Pt(bt)));return(Ct=[]).concat.apply(Ct,Rt.map(function(Tt){return It.map(function(Gt){return Tt==="/"?Gt:Tt+(Gt==="/"?"":Gt)})}));function Pt(Tt){var Gt={};return Tt.forEach(function(Jt){Gt[Jt]=wt[Jt]}),Gt}})}};return d}function parseArgs$1(o){return o.length===1?{params:{},path:function(){return o[0]}}:{params:o[0],path:o[1]}}function createRouter$1(){for(var o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];var a=parseArgs(e),d=a.opts,b=a.routeDefs,_=createRouter(_extends$1({},d,{scrollToTop:!1}),b),_e=reactExports.createContext(null);return _extends$1({},_,{RouteProvider:ot,useRoute:st});function ot(ct){var ft=reactExports.useState(_.session.getInitialRoute()),mt=ft[0],bt=ft[1];return reactExports.useLayoutEffect(function(){return _.session.listen(bt)},[]),reactExports.useEffect(function(){attemptScrollToTop(mt,d.scrollToTop)},[mt]),reactExports.createElement(_e.Provider,{value:mt},ct.children)}function st(){var ct=reactExports.useContext(_e);return ct}}const{RouteProvider,useRoute,routes}=createRouter$1({home:defineRoute("/"),map:defineRoute("/cartes"),test_tinymceditor:defineRoute("/test-tinymceditor"),test_tiptap_editor:defineRoute("/test-tiptap-editor"),personal_data:defineRoute("/donnees-personnelles")}),prEulerianApi=startEulerianAnalytics({domain:"acwg.cartes.gouv.fr",site:{environment:"development",entity:"IGN"}}),{ConsentBannerAndConsentManagement,FooterConsentManagementItem,FooterPersonalDataPolicyItem,useConsent}=createConsentManagement({finalityDescription:()=>({eulerianAnalytics:{title:"Eulerian Analytics",description:["En cliquant sur 'Accepter', vous consentez  l'utilisation des cookies pour nous","aider  amliorer notre site web en collectant et en rapportant des informations","sur votre utilisation grce  Eulerian Analytics. Si vous n'tes pas d'accord, veuillez","cliquer sur 'Refuser'. Votre exprience de navigation ne sera pas affecte."].join(" ")}}),personalDataPolicyLinkProps:routes.personal_data().link,consentCallback:async({finalityConsent:o})=>{const e=await prEulerianApi;o.eulerianAnalytics?(console.log("Enabling eulerian analytics"),e.enable()):(console.log("Disabling eulerian analytics"),e.disable())}}),exceptions=["GPoverviewMap"];function getSameSideOpenedPanel(o,e){var s=[...exceptions,e],a=[];if(o.includes("left")){var d=document.getElementById("position-container-bottom-left"),b=document.getElementById("position-container-top-left");a=[...d.children,...b.children]}if(o.includes("right")){var _=document.getElementById("position-container-bottom-right"),_e=document.getElementById("position-container-top-right");a=[..._.children,..._e.children]}return a.filter(ot=>{var st=ot.id.match(/(\w+)-[0-9]+/)[1],ct=s.includes(st),ft=ot.getElementsByTagName("button")[0].getAttribute("aria-pressed");if(ft==="true"&&!ct)return ot})}var PanelManager=function(o,e){var s=getSameSideOpenedPanel(o,e);s.length>0&&s[0].getElementsByTagName("button")[0].click()},Widget={onPanelOpen:function(){PanelManager(this.options.position,this.element.id.match(/(\w+)-[0-9]+/)[1])}};class BaseEvent{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ObjectEventType={PROPERTYCHANGE:"propertychange"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function binarySearch$1(o,e,s){let a,d;s=s||ascending;let b=0,_=o.length,_e=!1;for(;b<_;)a=b+(_-b>>1),d=+s(o[a],e),d<0?b=a+1:(_=a,_e=!d);return _e?b:~b}function ascending(o,e){return o>e?1:o<e?-1:0}function linearFindNearest(o,e,s){if(o[0]<=e)return 0;const a=o.length;if(e<=o[a-1])return a-1;if(typeof s=="function"){for(let d=1;d<a;++d){const b=o[d];if(b===e)return d;if(b<e)return s(e,o[d-1],b)>0?d-1:d}return a-1}if(s>0){for(let d=1;d<a;++d)if(o[d]<e)return d-1;return a-1}if(s<0){for(let d=1;d<a;++d)if(o[d]<=e)return d;return a-1}for(let d=1;d<a;++d){if(o[d]==e)return d;if(o[d]<e)return o[d-1]-e<e-o[d]?d-1:d}return a-1}function reverseSubArray(o,e,s){for(;e<s;){const a=o[e];o[e]=o[s],o[s]=a,++e,--s}}function extend$4(o,e){const s=Array.isArray(e)?e:[e],a=s.length;for(let d=0;d<a;d++)o[o.length]=s[d]}function equals$2(o,e){const s=o.length;if(s!==e.length)return!1;for(let a=0;a<s;a++)if(o[a]!==e[a])return!1;return!0}function isSorted(o,e,s){const a=e||ascending;return o.every(function(d,b){if(b===0)return!0;const _=a(o[b-1],d);return!(_>0||_===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(o){let e=!1,s,a,d;return function(){const b=Array.prototype.slice.call(arguments);return(!e||this!==d||!equals$2(b,a))&&(e=!0,d=this,a=b,s=o.apply(this,arguments)),s}}function toPromise(o){function e(){let s;try{s=o()}catch(a){return Promise.reject(a)}return s instanceof Promise?s:Promise.resolve(s)}return e()}function clear$1(o){for(const e in o)delete o[e]}function isEmpty$1(o){let e;for(e in o)return!1;return!e}class Target extends Disposable{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,s){if(!e||!s)return;const a=this.listeners_||(this.listeners_={}),d=a[e]||(a[e]=[]);d.includes(s)||d.push(s)}dispatchEvent(e){const s=typeof e=="string",a=s?e:e.type,d=this.listeners_&&this.listeners_[a];if(!d)return;const b=s?new BaseEvent(e):e;b.target||(b.target=this.eventTarget_||this);const _=this.dispatching_||(this.dispatching_={}),_e=this.pendingRemovals_||(this.pendingRemovals_={});a in _||(_[a]=0,_e[a]=0),++_[a];let ot;for(let st=0,ct=d.length;st<ct;++st)if("handleEvent"in d[st]?ot=d[st].handleEvent(b):ot=d[st].call(this,b),ot===!1||b.propagationStopped){ot=!1;break}if(--_[a]===0){let st=_e[a];for(delete _e[a];st--;)this.removeEventListener(a,VOID);delete _[a]}return ot}disposeInternal(){this.listeners_&&clear$1(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,s){if(!this.listeners_)return;const a=this.listeners_[e];if(!a)return;const d=a.indexOf(s);d!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(a[d]=VOID,++this.pendingRemovals_[e]):(a.splice(d,1),a.length===0&&delete this.listeners_[e]))}}const EventType={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function listen(o,e,s,a,d){if(a&&a!==o&&(s=s.bind(a)),d){const _=s;s=function(){o.removeEventListener(e,s),_.apply(this,arguments)}}const b={target:o,type:e,listener:s};return o.addEventListener(e,s),b}function listenOnce(o,e,s,a){return listen(o,e,s,a,!0)}function unlistenByKey(o){o&&o.target&&(o.target.removeEventListener(o.type,o.listener),clear$1(o))}class Observable extends Target{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType.CHANGE)}getRevision(){return this.revision_}onInternal(e,s){if(Array.isArray(e)){const a=e.length,d=new Array(a);for(let b=0;b<a;++b)d[b]=listen(this,e[b],s);return d}return listen(this,e,s)}onceInternal(e,s){let a;if(Array.isArray(e)){const d=e.length;a=new Array(d);for(let b=0;b<d;++b)a[b]=listenOnce(this,e[b],s)}else a=listenOnce(this,e,s);return s.ol_key=a,a}unInternal(e,s){const a=s.ol_key;if(a)unByKey(a);else if(Array.isArray(e))for(let d=0,b=e.length;d<b;++d)this.removeEventListener(e[d],s);else this.removeEventListener(e,s)}}Observable.prototype.on;Observable.prototype.once;Observable.prototype.un;function unByKey(o){if(Array.isArray(o))for(let e=0,s=o.length;e<s;++e)unlistenByKey(o[e]);else unlistenByKey(o)}function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(o){return o.ol_uid||(o.ol_uid=String(++uidCounter_))}class ObjectEvent extends BaseEvent{constructor(e,s,a){super(e),this.key=s,this.oldValue=a}}class BaseObject extends Observable{constructor(e){super(),this.on,this.once,this.un,getUid(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let s;return this.values_&&this.values_.hasOwnProperty(e)&&(s=this.values_[e]),s}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,s){let a;a=`change:${e}`,this.hasListener(a)&&this.dispatchEvent(new ObjectEvent(a,e,s)),a=ObjectEventType.PROPERTYCHANGE,this.hasListener(a)&&this.dispatchEvent(new ObjectEvent(a,e,s))}addChangeListener(e,s){this.addEventListener(`change:${e}`,s)}removeChangeListener(e,s){this.removeEventListener(`change:${e}`,s)}set(e,s,a){const d=this.values_||(this.values_={});if(a)d[e]=s;else{const b=d[e];d[e]=s,b!==s&&this.notify(e,b)}}setProperties(e,s){for(const a in e)this.set(a,e[a],s)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,s){if(this.values_&&e in this.values_){const a=this.values_[e];delete this.values_[e],isEmpty$1(this.values_)&&(this.values_=null),s||this.notify(e,a)}}}const MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ua=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",FIREFOX=ua.includes("firefox"),SAFARI=ua.includes("safari")&&!ua.includes("chrom");SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua));const WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio<"u"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image<"u"&&Image.prototype.decode,PASSIVE_EVENT_LISTENERS=function(){let o=!1;try{const e=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return o}();function createCanvasContext2D(o,e,s,a){let d;return s&&s.length?d=s.shift():WORKER_OFFSCREEN_CANVAS?d=new OffscreenCanvas(o||300,e||300):d=document.createElement("canvas"),o&&(d.width=o),e&&(d.height=e),d.getContext("2d",a)}function releaseCanvas(o){const e=o.canvas;e.width=1,e.height=1,o.clearRect(0,0,1,1)}function outerWidth(o){let e=o.offsetWidth;const s=getComputedStyle(o);return e+=parseInt(s.marginLeft,10)+parseInt(s.marginRight,10),e}function outerHeight(o){let e=o.offsetHeight;const s=getComputedStyle(o);return e+=parseInt(s.marginTop,10)+parseInt(s.marginBottom,10),e}function replaceNode(o,e){const s=e.parentNode;s&&s.replaceChild(o,e)}function removeNode(o){return o&&o.parentNode?o.parentNode.removeChild(o):null}function removeChildren(o){for(;o.lastChild;)o.removeChild(o.lastChild)}function replaceChildren(o,e){const s=o.childNodes;for(let a=0;;++a){const d=s[a],b=e[a];if(!d&&!b)break;if(d!==b){if(!d){o.appendChild(b);continue}if(!b){o.removeChild(d),--a;continue}o.insertBefore(b,d)}}}class Control extends BaseObject{constructor(e){super();const s=e.element;s&&!e.target&&!s.style.pointerEvents&&(s.style.pointerEvents="auto"),this.element=s||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){removeNode(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&removeNode(this.element);for(let s=0,a=this.listenerKeys.length;s<a;++s)unlistenByKey(this.listenerKeys[s]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var checkDsfr=function(){var o=getComputedStyle(document.documentElement),e=o.getPropertyValue("--blue-france-sun-113-625");return e!==""},ControlExtended=class extends Control{constructor(e){super(e)}setPosition(e){if(this.getMap()){var s=new PositionFactory(this);s.set(e)}}updatePosition(e){if(this.getMap()){var s=new PositionFactory(this);s.update(e)}}};const ANCHORS=["top-left","top-right","bottom-left","bottom-right"];var jw,rle,eB,die;class PositionFactory{constructor(e){fu(this,jw);return this.caller=e,this.container=null,Nu(this,jw,eB).call(this,"top-left"),Nu(this,jw,eB).call(this,"top-right"),Nu(this,jw,eB).call(this,"bottom-left"),Nu(this,jw,eB).call(this,"bottom-right"),this}set(e){ANCHORS.includes(e.toLowerCase())&&(Nu(this,jw,die).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}update(e){ANCHORS.includes(e.toLowerCase())&&Nu(this,jw,die).call(this,e,!0)}}jw=new WeakSet,rle=function(e){var s=this.container.children["position-container-"+e];return!!s},eB=function(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!Nu(this,jw,rle).call(this,e)){var s=document.createElement("div");s.id="position-container-"+e,s.className="position position-container-"+e,this.container.appendChild(s)}},die=function(e,s){var a=this;const d=ct=>{var ft=a.container.children["position-container-"+ct];return ft.children.length},b=ct=>{var ft=a.container.children["position-container-"+ct],mt=ft.offsetWidth;return mt},_=ct=>{var ft=a.container.children["position-container-"+ct],mt=ft.offsetHeight;if(s){ct.includes("top")&&(mt=0);for(let bt=0;bt<ft.children.length;bt++){if(ft.children[bt].id===a.caller.element.id){mt=ct.includes("bottom")?mt-a.caller.element.offsetHeight:mt*-1;break}mt-=ft.children[bt].offsetHeight}}return mt},_e=ct=>{ct.style.top="unset",ct.style.bottom="unset",ct.style.left="unset",ct.style.right="unset"};_e(this.caller.element),this.caller.element.style.position="unset";var ot=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(ot.length!==0){var st=0;ot.forEach(ct=>{if(ct.nodeName.toLowerCase()==="dialog"){switch(_e(ct),e.toLowerCase()){case"top-left":checkDsfr()?ct.style.top="0px":ct.style.top=d(e)?_(e)+"px":"0px",ct.style.left=b(e)+st+"px";break;case"bottom-left":checkDsfr()?ct.style.top="0px":ct.style.bottom=d(e)?_(e)+"px":"0px",ct.style.left=b(e)+st+"px";break;case"top-right":checkDsfr()?ct.style.top="0px":ct.style.top=d(e)?_(e)+"px":"0px",ct.style.right=b(e)+st+"px";break;case"bottom-right":checkDsfr()?ct.style.top="0px":ct.style.bottom=d(e)?_(e)+"px":"0px",ct.style.right=b(e)+st+"px";break}st+=ct.offsetWidth}})}};var Helper$1={detectSupport:function(){var o=!0,e=window.navigator.userAgent.toLowerCase();return(e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1||e.indexOf("android")!==-1||e.indexOf("mobile")!==-1||e.indexOf("blackberry")!==-1||e.indexOf("tablet")!==-1||e.indexOf("phone")!==-1||e.indexOf("touch")!==-1)&&(o=!1),(e.indexOf("msie")!==-1||e.indexOf("trident")!==-1)&&(o=!0),o},assign:function(o,e){o=o||{};for(var s in e)e.hasOwnProperty(s)&&(o[s]=e[s]);return o},mergeParams:function(o,e,s){if(!(typeof o>"u"||typeof e>"u")){typeof s>"u"&&(s=!0);for(var a in e)e.hasOwnProperty(a)&&(typeof e[a]=="object"?o.hasOwnProperty(a)?this.mergeParams(o[a],e[a],s):o[a]=e[a]:o.hasOwnProperty(a)?s&&(o[a]=e[a]):o[a]=e[a])}}},SelectorID={generate:function(){var o=Math.floor(Date.now());return function(){return o++}}(),name:function(o){var e=null,s=o.lastIndexOf("-");return s===-1?e=o:e=o.substring(0,s),e},index:function(o){var e=null,s=this.name(o),a=s.lastIndexOf("_");return a!==-1&&(e=s.substring(a+1)),e},uuid:function(o){var e=null,s=o.lastIndexOf("-");return s!==-1&&(e=parseInt(o.substring(s+1),10)),e}},loglevel={exports:{}};(function(o){(function(e,s){o.exports?o.exports=s():e.log=s()})(commonjsGlobal,function(){var e=function(){},s="undefined",a=typeof window!==s&&typeof window.navigator!==s&&/Trident\/|MSIE /.test(window.navigator.userAgent),d=["trace","debug","info","warn","error"],b={},_=null;function _e(Ct,Rt){var It=Ct[Rt];if(typeof It.bind=="function")return It.bind(Ct);try{return Function.prototype.bind.call(It,Ct)}catch{return function(){return Function.prototype.apply.apply(It,[Ct,arguments])}}}function ot(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function st(Ct){return Ct==="debug"&&(Ct="log"),typeof console===s?!1:Ct==="trace"&&a?ot:console[Ct]!==void 0?_e(console,Ct):console.log!==void 0?_e(console,"log"):e}function ct(){for(var Ct=this.getLevel(),Rt=0;Rt<d.length;Rt++){var It=d[Rt];this[It]=Rt<Ct?e:this.methodFactory(It,Ct,this.name)}if(this.log=this.debug,typeof console===s&&Ct<this.levels.SILENT)return"No console available for logging"}function ft(Ct){return function(){typeof console!==s&&(ct.call(this),this[Ct].apply(this,arguments))}}function mt(Ct,Rt,It){return st(Ct)||ft.apply(this,arguments)}function bt(Ct,Rt){var It=this,Pt,Tt,Gt,Jt="loglevel";typeof Ct=="string"?Jt+=":"+Ct:typeof Ct=="symbol"&&(Jt=void 0);function qt(ln){var Wt=(d[ln]||"silent").toUpperCase();if(!(typeof window===s||!Jt)){try{window.localStorage[Jt]=Wt;return}catch{}try{window.document.cookie=encodeURIComponent(Jt)+"="+Wt+";"}catch{}}}function Nt(){var ln;if(!(typeof window===s||!Jt)){try{ln=window.localStorage[Jt]}catch{}if(typeof ln===s)try{var Wt=window.document.cookie,so=encodeURIComponent(Jt),pn=Wt.indexOf(so+"=");pn!==-1&&(ln=/^([^;]+)/.exec(Wt.slice(pn+so.length+1))[1])}catch{}return It.levels[ln]===void 0&&(ln=void 0),ln}}function Qt(){if(!(typeof window===s||!Jt)){try{window.localStorage.removeItem(Jt)}catch{}try{window.document.cookie=encodeURIComponent(Jt)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function fn(ln){var Wt=ln;if(typeof Wt=="string"&&It.levels[Wt.toUpperCase()]!==void 0&&(Wt=It.levels[Wt.toUpperCase()]),typeof Wt=="number"&&Wt>=0&&Wt<=It.levels.SILENT)return Wt;throw new TypeError("log.setLevel() called with invalid level: "+ln)}It.name=Ct,It.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},It.methodFactory=Rt||mt,It.getLevel=function(){return Gt??Tt??Pt},It.setLevel=function(ln,Wt){return Gt=fn(ln),Wt!==!1&&qt(Gt),ct.call(It)},It.setDefaultLevel=function(ln){Tt=fn(ln),Nt()||It.setLevel(ln,!1)},It.resetLevel=function(){Gt=null,Qt(),ct.call(It)},It.enableAll=function(ln){It.setLevel(It.levels.TRACE,ln)},It.disableAll=function(ln){It.setLevel(It.levels.SILENT,ln)},It.rebuild=function(){if(_!==It&&(Pt=fn(_.getLevel())),ct.call(It),_===It)for(var ln in b)b[ln].rebuild()},Pt=fn(_?_.getLevel():"WARN");var Mn=Nt();Mn!=null&&(Gt=fn(Mn)),ct.call(It)}_=new bt,_.getLogger=function(Rt){if(typeof Rt!="symbol"&&typeof Rt!="string"||Rt==="")throw new TypeError("You must supply a name when creating a logger.");var It=b[Rt];return It||(It=b[Rt]=new bt(Rt,_.methodFactory)),It};var wt=typeof window!==s?window.log:void 0;return _.noConflict=function(){return typeof window!==s&&window.log===_&&(window.log=wt),_},_.getLoggers=function(){return b},_.default=_,_})})(loglevel);var loglevelExports=loglevel.exports,LoggerByDefault$1={getLogger:function(o){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var s=o||"default";return loglevelExports.getLogger(s)},disableAll:function(){var o=loglevelExports.getLoggers();for(const e in o)Object.hasOwnProperty.call(o,e)&&o[e].disableAll()},enableAll:function(){var o=loglevelExports.getLoggers();for(const e in o)Object.hasOwnProperty.call(o,e)&&o[e].enableAll()}};window.Gp&&(window.Gp.Logger=LoggerByDefault$1);LoggerByDefault$1.getLogger("draggable");var Draggable={dragElement:function(o,e,s){let a=0,d=0,b=0,_=0,_e=0,ot=0;e?e.addEventListener("mousedown",ft,!0):o.addEventListener("mousedown",ft,!0);var st,ct={bottom:0,left:0,right:0,top:0};function ft(wt){wt=wt||window.event,wt.preventDefault(),a=wt.clientX,d=wt.clientY,st=o.getBoundingClientRect();const Ct=s.getBoundingClientRect();ct={bottom:Ct.bottom,left:Ct.left,right:Ct.right,top:Ct.top},document.addEventListener("mouseup",mt,!0),document.addEventListener("mousemove",bt,!0)}function mt(){_e-=b,ot-=_,document.removeEventListener("mouseup",mt,!0),document.removeEventListener("mousemove",bt,!0)}function bt(wt){wt=wt||window.event;let Ct=wt.clientX,Rt=wt.clientY,It=b,Pt=_;b=a-Ct,_=d-Rt;var Tt=st.left-b,Gt=st.top-_;if(Tt<ct.left||Gt<ct.top||Tt+st.width>ct.right||Gt+st.height>ct.bottom)b=It,_=Pt;else{let Jt=_e-b,qt=ot-_;o.style.transform="translate("+Jt+"px,"+qt+"px)"}}}},Config$1={configuration:{},isConfigLoaded:function(){if(this.configuration&&Object.keys(this.configuration).length!==0)return!0;var o=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{};return o.Gp&&o.Gp.Config&&o.Gp.Config.layers&&Object.keys(o.Gp.Config.layers).length!==0?(this.configuration=o.Gp.Config,!0):!1}};const METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Projection$1=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$2=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection$1{constructor(e){super({code:e,units:"m",extent:EXTENT$2,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(s,a){return s/Math.cosh(a[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(o,e,s){const a=o.length;s=s>1?s:2,e===void 0&&(s>2?e=o.slice():e=new Array(a));for(let d=0;d<a;d+=s){e[d]=HALF_SIZE*o[d]/180;let b=RADIUS$1*Math.log(Math.tan(Math.PI*(+o[d+1]+90)/360));b>MAX_SAFE_Y?b=MAX_SAFE_Y:b<-MAX_SAFE_Y&&(b=-MAX_SAFE_Y),e[d+1]=b}return e}function toEPSG4326(o,e,s){const a=o.length;s=s>1?s:2,e===void 0&&(s>2?e=o.slice():e=new Array(a));for(let d=0;d<a;d+=s)e[d]=180*o[d]/HALF_SIZE,e[d+1]=360*Math.atan(Math.exp(o[d+1]/RADIUS$1))/Math.PI-90;return e}const RADIUS=6378137,EXTENT$1=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection$1{constructor(e,s){super({code:e,units:"degrees",extent:EXTENT$1,axisOrientation:s,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT$1})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache$1={};function get$5(o){return cache$1[o]||cache$1[o.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$3(o,e){cache$1[o]=e}let transforms={};function add$2(o,e,s){const a=o.getCode(),d=e.getCode();a in transforms||(transforms[a]={}),transforms[a][d]=s}function get$4(o,e){let s;return o in transforms&&e in transforms[o]&&(s=transforms[o][e]),s}const Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(o){const e=createEmpty();for(let s=0,a=o.length;s<a;++s)extendCoordinate(e,o[s]);return e}function _boundingExtentXYs(o,e,s){const a=Math.min.apply(null,o),d=Math.min.apply(null,e),b=Math.max.apply(null,o),_=Math.max.apply(null,e);return createOrUpdate$2(a,d,b,_,s)}function buffer(o,e,s){return s?(s[0]=o[0]-e,s[1]=o[1]-e,s[2]=o[2]+e,s[3]=o[3]+e,s):[o[0]-e,o[1]-e,o[2]+e,o[3]+e]}function clone$1(o,e){return e?(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e):o.slice()}function closestSquaredDistanceXY(o,e,s){let a,d;return e<o[0]?a=o[0]-e:o[2]<e?a=e-o[2]:a=0,s<o[1]?d=o[1]-s:o[3]<s?d=s-o[3]:d=0,a*a+d*d}function containsCoordinate(o,e){return containsXY(o,e[0],e[1])}function containsExtent(o,e){return o[0]<=e[0]&&e[2]<=o[2]&&o[1]<=e[1]&&e[3]<=o[3]}function containsXY(o,e,s){return o[0]<=e&&e<=o[2]&&o[1]<=s&&s<=o[3]}function coordinateRelationship(o,e){const s=o[0],a=o[1],d=o[2],b=o[3],_=e[0],_e=e[1];let ot=Relationship.UNKNOWN;return _<s?ot=ot|Relationship.LEFT:_>d&&(ot=ot|Relationship.RIGHT),_e<a?ot=ot|Relationship.BELOW:_e>b&&(ot=ot|Relationship.ABOVE),ot===Relationship.UNKNOWN&&(ot=Relationship.INTERSECTING),ot}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(o,e,s,a,d){return d?(d[0]=o,d[1]=e,d[2]=s,d[3]=a,d):[o,e,s,a]}function createOrUpdateEmpty(o){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,o)}function createOrUpdateFromCoordinate(o,e){const s=o[0],a=o[1];return createOrUpdate$2(s,a,s,a,e)}function createOrUpdateFromFlatCoordinates(o,e,s,a,d){const b=createOrUpdateEmpty(d);return extendFlatCoordinates(b,o,e,s,a)}function equals$1(o,e){return o[0]==e[0]&&o[2]==e[2]&&o[1]==e[1]&&o[3]==e[3]}function extend$3(o,e){return e[0]<o[0]&&(o[0]=e[0]),e[2]>o[2]&&(o[2]=e[2]),e[1]<o[1]&&(o[1]=e[1]),e[3]>o[3]&&(o[3]=e[3]),o}function extendCoordinate(o,e){e[0]<o[0]&&(o[0]=e[0]),e[0]>o[2]&&(o[2]=e[0]),e[1]<o[1]&&(o[1]=e[1]),e[1]>o[3]&&(o[3]=e[1])}function extendFlatCoordinates(o,e,s,a,d){for(;s<a;s+=d)extendXY(o,e[s],e[s+1]);return o}function extendXY(o,e,s){o[0]=Math.min(o[0],e),o[1]=Math.min(o[1],s),o[2]=Math.max(o[2],e),o[3]=Math.max(o[3],s)}function forEachCorner(o,e){let s;return s=e(getBottomLeft(o)),s||(s=e(getBottomRight(o)),s)||(s=e(getTopRight(o)),s)||(s=e(getTopLeft(o)),s)?s:!1}function getArea(o){let e=0;return isEmpty(o)||(e=getWidth(o)*getHeight(o)),e}function getBottomLeft(o){return[o[0],o[1]]}function getBottomRight(o){return[o[2],o[1]]}function getCenter(o){return[(o[0]+o[2])/2,(o[1]+o[3])/2]}function getCorner(o,e){let s;if(e==="bottom-left")s=getBottomLeft(o);else if(e==="bottom-right")s=getBottomRight(o);else if(e==="top-left")s=getTopLeft(o);else if(e==="top-right")s=getTopRight(o);else throw new Error("Invalid corner");return s}function getForViewAndSize(o,e,s,a,d){const[b,_,_e,ot,st,ct,ft,mt]=getRotatedViewport(o,e,s,a);return createOrUpdate$2(Math.min(b,_e,st,ft),Math.min(_,ot,ct,mt),Math.max(b,_e,st,ft),Math.max(_,ot,ct,mt),d)}function getRotatedViewport(o,e,s,a){const d=e*a[0]/2,b=e*a[1]/2,_=Math.cos(s),_e=Math.sin(s),ot=d*_,st=d*_e,ct=b*_,ft=b*_e,mt=o[0],bt=o[1];return[mt-ot+ft,bt-st-ct,mt-ot-ft,bt-st+ct,mt+ot-ft,bt+st+ct,mt+ot+ft,bt+st-ct,mt-ot+ft,bt-st-ct]}function getHeight(o){return o[3]-o[1]}function getIntersection(o,e,s){const a=s||createEmpty();return intersects$1(o,e)?(o[0]>e[0]?a[0]=o[0]:a[0]=e[0],o[1]>e[1]?a[1]=o[1]:a[1]=e[1],o[2]<e[2]?a[2]=o[2]:a[2]=e[2],o[3]<e[3]?a[3]=o[3]:a[3]=e[3]):createOrUpdateEmpty(a),a}function getTopLeft(o){return[o[0],o[3]]}function getTopRight(o){return[o[2],o[3]]}function getWidth(o){return o[2]-o[0]}function intersects$1(o,e){return o[0]<=e[2]&&o[2]>=e[0]&&o[1]<=e[3]&&o[3]>=e[1]}function isEmpty(o){return o[2]<o[0]||o[3]<o[1]}function returnOrUpdate(o,e){return e?(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e):o}function intersectsSegment(o,e,s){let a=!1;const d=coordinateRelationship(o,e),b=coordinateRelationship(o,s);if(d===Relationship.INTERSECTING||b===Relationship.INTERSECTING)a=!0;else{const _=o[0],_e=o[1],ot=o[2],st=o[3],ct=e[0],ft=e[1],mt=s[0],bt=s[1],wt=(bt-ft)/(mt-ct);let Ct,Rt;b&Relationship.ABOVE&&!(d&Relationship.ABOVE)&&(Ct=mt-(bt-st)/wt,a=Ct>=_&&Ct<=ot),!a&&b&Relationship.RIGHT&&!(d&Relationship.RIGHT)&&(Rt=bt-(mt-ot)*wt,a=Rt>=_e&&Rt<=st),!a&&b&Relationship.BELOW&&!(d&Relationship.BELOW)&&(Ct=mt-(bt-_e)/wt,a=Ct>=_&&Ct<=ot),!a&&b&Relationship.LEFT&&!(d&Relationship.LEFT)&&(Rt=bt-(mt-_)*wt,a=Rt>=_e&&Rt<=st)}return a}function applyTransform(o,e,s,a){if(isEmpty(o))return createOrUpdateEmpty(s);let d=[];d=[o[0],o[1],o[2],o[1],o[2],o[3],o[0],o[3]],e(d,d,2);const b=[],_=[];for(let _e=0,ot=d.length;_e<ot;_e+=2)b.push(d[_e]),_.push(d[_e+1]);return _boundingExtentXYs(b,_,s)}function wrapX$2(o,e){const s=e.getExtent(),a=getCenter(o);if(e.canWrapX()&&(a[0]<s[0]||a[0]>=s[2])){const d=getWidth(s),_=Math.floor((a[0]-s[0])/d)*d;o[0]-=_,o[2]-=_}return o}function wrapAndSliceX(o,e){if(e.canWrapX()){const s=e.getExtent();if(!isFinite(o[0])||!isFinite(o[2]))return[[s[0],o[1],s[2],o[3]]];wrapX$2(o,e);const a=getWidth(s);if(getWidth(o)>a)return[[s[0],o[1],s[2],o[3]]];if(o[0]<s[0])return[[o[0]+a,o[1],s[2],o[3]],[s[0],o[1],o[2],o[3]]];if(o[2]>s[2])return[[o[0],o[1],s[2],o[3]],[s[0],o[1],o[2]-a,o[3]]]}return[o]}function clamp(o,e,s){return Math.min(Math.max(o,e),s)}function squaredSegmentDistance(o,e,s,a,d,b){const _=d-s,_e=b-a;if(_!==0||_e!==0){const ot=((o-s)*_+(e-a)*_e)/(_*_+_e*_e);ot>1?(s=d,a=b):ot>0&&(s+=_*ot,a+=_e*ot)}return squaredDistance$1(o,e,s,a)}function squaredDistance$1(o,e,s,a){const d=s-o,b=a-e;return d*d+b*b}function solveLinearSystem(o){const e=o.length;for(let a=0;a<e;a++){let d=a,b=Math.abs(o[a][a]);for(let _e=a+1;_e<e;_e++){const ot=Math.abs(o[_e][a]);ot>b&&(b=ot,d=_e)}if(b===0)return null;const _=o[d];o[d]=o[a],o[a]=_;for(let _e=a+1;_e<e;_e++){const ot=-o[_e][a]/o[a][a];for(let st=a;st<e+1;st++)a==st?o[_e][st]=0:o[_e][st]+=ot*o[a][st]}}const s=new Array(e);for(let a=e-1;a>=0;a--){s[a]=o[a][e]/o[a][a];for(let d=a-1;d>=0;d--)o[d][e]-=o[d][a]*s[a]}return s}function toRadians(o){return o*Math.PI/180}function modulo(o,e){const s=o%e;return s*e<0?s+e:s}function lerp(o,e,s){return o+s*(e-o)}function toFixed(o,e){const s=Math.pow(10,e);return Math.round(o*s)/s}function round(o,e){return Math.round(toFixed(o,e))}function floor(o,e){return Math.floor(toFixed(o,e))}function ceil(o,e){return Math.ceil(toFixed(o,e))}function compareVersions(o,e){const s=(""+o).split("."),a=(""+e).split(".");for(let d=0;d<Math.max(s.length,a.length);d++){const b=parseInt(s[d]||"0",10),_=parseInt(a[d]||"0",10);if(b>_)return 1;if(_>b)return-1}return 0}function add$1(o,e){return o[0]+=+e[0],o[1]+=+e[1],o}function closestOnSegment(o,e){const s=o[0],a=o[1],d=e[0],b=e[1],_=d[0],_e=d[1],ot=b[0],st=b[1],ct=ot-_,ft=st-_e,mt=ct===0&&ft===0?0:(ct*(s-_)+ft*(a-_e))/(ct*ct+ft*ft||0);let bt,wt;return mt<=0?(bt=_,wt=_e):mt>=1?(bt=ot,wt=st):(bt=_+mt*ct,wt=_e+mt*ft),[bt,wt]}function equals(o,e){let s=!0;for(let a=o.length-1;a>=0;--a)if(o[a]!=e[a]){s=!1;break}return s}function rotate$1(o,e){const s=Math.cos(e),a=Math.sin(e),d=o[0]*s-o[1]*a,b=o[1]*s+o[0]*a;return o[0]=d,o[1]=b,o}function scale$3(o,e){return o[0]*=e,o[1]*=e,o}function squaredDistance(o,e){const s=o[0]-e[0],a=o[1]-e[1];return s*s+a*a}function distance(o,e){return Math.sqrt(squaredDistance(o,e))}function squaredDistanceToSegment(o,e){return squaredDistance(o,closestOnSegment(o,e))}function wrapX$1(o,e){if(e.canWrapX()){const s=getWidth(e.getExtent()),a=getWorldsAway(o,e,s);a&&(o[0]-=a*s)}return o}function getWorldsAway(o,e,s){const a=e.getExtent();let d=0;return e.canWrapX()&&(o[0]<a[0]||o[0]>a[2])&&(s=s||getWidth(a),d=Math.floor((o[0]-a[0])/s)),d}const DEFAULT_RADIUS=63710088e-1;function getDistance(o,e,s){s=s||DEFAULT_RADIUS;const a=toRadians(o[1]),d=toRadians(e[1]),b=(d-a)/2,_=toRadians(e[0]-o[0])/2,_e=Math.sin(b)*Math.sin(b)+Math.sin(_)*Math.sin(_)*Math.cos(a)*Math.cos(d);return 2*s*Math.atan2(Math.sqrt(_e),Math.sqrt(1-_e))}function warn$1(...o){console.warn(...o)}let showCoordinateWarning=!0;function disableCoordinateWarning(o){showCoordinateWarning=!1}function cloneTransform(o,e){if(e!==void 0){for(let s=0,a=o.length;s<a;++s)e[s]=o[s];e=e}else e=o.slice();return e}function identityTransform(o,e){if(e!==void 0&&o!==e){for(let s=0,a=o.length;s<a;++s)e[s]=o[s];o=e}return o}function addProjection(o){add$3(o.getCode(),o),add$2(o,o,cloneTransform)}function addProjections(o){o.forEach(addProjection)}function get$3(o){return typeof o=="string"?get$5(o):o||null}function getPointResolution(o,e,s,a){o=get$3(o);let d;const b=o.getPointResolutionFunc();if(b){if(d=b(e,s),a&&a!==o.getUnits()){const _=o.getMetersPerUnit();_&&(d=d*_/METERS_PER_UNIT$1[a])}}else{const _=o.getUnits();if(_=="degrees"&&!a||a=="degrees")d=e;else{const _e=getTransformFromProjections(o,get$3("EPSG:4326"));if(_e===identityTransform&&_!=="degrees")d=e*o.getMetersPerUnit();else{let st=[s[0]-e/2,s[1],s[0]+e/2,s[1],s[0],s[1]-e/2,s[0],s[1]+e/2];st=_e(st,st,2);const ct=getDistance(st.slice(0,2),st.slice(2,4)),ft=getDistance(st.slice(4,6),st.slice(6,8));d=(ct+ft)/2}const ot=a?METERS_PER_UNIT$1[a]:o.getMetersPerUnit();ot!==void 0&&(d/=ot)}}return d}function addEquivalentProjections(o){addProjections(o),o.forEach(function(e){o.forEach(function(s){e!==s&&add$2(e,s,cloneTransform)})})}function addEquivalentTransforms(o,e,s,a){o.forEach(function(d){e.forEach(function(b){add$2(d,b,s),add$2(b,d,a)})})}function createProjection(o,e){return o?typeof o=="string"?get$3(o):o:get$3(e)}function createTransformFromCoordinateTransform(o){return function(e,s,a){const d=e.length;a=a!==void 0?a:2,s=s!==void 0?s:new Array(d);for(let b=0;b<d;b+=a){const _=o(e.slice(b,b+a)),_e=_.length;for(let ot=0,st=a;ot<st;++ot)s[b+ot]=ot>=_e?e[b+ot]:_[ot]}return s}}function addCoordinateTransforms(o,e,s,a){const d=get$3(o),b=get$3(e);add$2(d,b,createTransformFromCoordinateTransform(s)),add$2(b,d,createTransformFromCoordinateTransform(a))}function fromLonLat(o,e){return disableCoordinateWarning(),transform$1(o,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function equivalent(o,e){if(o===e)return!0;const s=o.getUnits()===e.getUnits();return(o.getCode()===e.getCode()||getTransformFromProjections(o,e)===cloneTransform)&&s}function getTransformFromProjections(o,e){const s=o.getCode(),a=e.getCode();let d=get$4(s,a);return d||(d=identityTransform),d}function getTransform(o,e){const s=get$3(o),a=get$3(e);return getTransformFromProjections(s,a)}function transform$1(o,e,s){return getTransform(e,s)(o,void 0,o.length)}function transformExtent(o,e,s,a){const d=getTransform(e,s);return applyTransform(o,d,void 0)}function toUserCoordinate(o,e){return o}function fromUserCoordinate(o,e){return showCoordinateWarning&&!equals(o,[0,0])&&o[0]>=-180&&o[0]<=180&&o[1]>=-90&&o[1]<=90&&(showCoordinateWarning=!1,warn$1("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),o}function toUserExtent(o,e){return o}function fromUserExtent(o,e){return o}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();const LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function assert(o,e){if(!o)throw new Error(e)}class BaseLayer extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const s=Object.assign({},e);typeof e.properties=="object"&&(delete s.properties,Object.assign(s,e.properties)),s[LayerProperty.OPACITY]=e.opacity!==void 0?e.opacity:1,assert(typeof s[LayerProperty.OPACITY]=="number","Layer opacity must be a number"),s[LayerProperty.VISIBLE]=e.visible!==void 0?e.visible:!0,s[LayerProperty.Z_INDEX]=e.zIndex,s[LayerProperty.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,s[LayerProperty.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,s[LayerProperty.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,s[LayerProperty.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=s.className!==void 0?s.className:"ol-layer",delete s.className,this.setProperties(s),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const s=this.state_||{layer:this,managed:e===void 0?!0:e},a=this.getZIndex();return s.opacity=clamp(Math.round(this.getOpacity()*100)/100,0,1),s.visible=this.getVisible(),s.extent=this.getExtent(),s.zIndex=a===void 0&&!s.managed?1/0:a,s.maxResolution=this.getMaxResolution(),s.minResolution=Math.max(this.getMinResolution(),0),s.minZoom=this.getMinZoom(),s.maxZoom=this.getMaxZoom(),this.state_=s,s}getLayersArray(e){return abstract()}getLayerStatesArray(e){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(LayerProperty.EXTENT,e)}setMaxResolution(e){this.set(LayerProperty.MAX_RESOLUTION,e)}setMinResolution(e){this.set(LayerProperty.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(LayerProperty.MAX_ZOOM,e)}setMinZoom(e){this.set(LayerProperty.MIN_ZOOM,e)}setOpacity(e){assert(typeof e=="number","Layer opacity must be a number"),this.set(LayerProperty.OPACITY,e)}setVisible(e){this.set(LayerProperty.VISIBLE,e)}setZIndex(e){this.set(LayerProperty.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const RenderEventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ViewHint={ANIMATING:0,INTERACTING:1},ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256;function createExtent(o,e,s){return function(a,d,b,_,_e){if(!a)return;if(!d&&!e)return a;const ot=e?0:b[0]*d,st=e?0:b[1]*d,ct=_e?_e[0]:0,ft=_e?_e[1]:0;let mt=o[0]+ot/2+ct,bt=o[2]-ot/2+ct,wt=o[1]+st/2+ft,Ct=o[3]-st/2+ft;mt>bt&&(mt=(bt+mt)/2,bt=mt),wt>Ct&&(wt=(Ct+wt)/2,Ct=wt);let Rt=clamp(a[0],mt,bt),It=clamp(a[1],wt,Ct);if(_&&s&&d){const Pt=30*d;Rt+=-Pt*Math.log(1+Math.max(0,mt-a[0])/Pt)+Pt*Math.log(1+Math.max(0,a[0]-bt)/Pt),It+=-Pt*Math.log(1+Math.max(0,wt-a[1])/Pt)+Pt*Math.log(1+Math.max(0,a[1]-Ct)/Pt)}return[Rt,It]}}function none$2(o){return o}function getViewportClampedResolution(o,e,s,a){const d=getWidth(e)/s[0],b=getHeight(e)/s[1];return a?Math.min(o,Math.max(d,b)):Math.min(o,Math.min(d,b))}function getSmoothClampedResolution(o,e,s){let a=Math.min(o,e);const d=50;return a*=Math.log(1+d*Math.max(0,o/e-1))/d+1,s&&(a=Math.max(a,s),a/=Math.log(1+d*Math.max(0,s/o-1))/d+1),clamp(a,s/2,e*2)}function createSnapToResolutions(o,e,s,a){return e=e!==void 0?e:!0,function(d,b,_,_e){if(d!==void 0){const ot=o[0],st=o[o.length-1],ct=s?getViewportClampedResolution(ot,s,_,a):ot;if(_e)return e?getSmoothClampedResolution(d,ct,st):clamp(d,st,ct);const ft=Math.min(ct,d),mt=Math.floor(linearFindNearest(o,ft,b));return o[mt]>ct&&mt<o.length-1?o[mt+1]:o[mt]}}}function createSnapToPower(o,e,s,a,d,b){return a=a!==void 0?a:!0,s=s!==void 0?s:0,function(_,_e,ot,st){if(_!==void 0){const ct=d?getViewportClampedResolution(e,d,ot,b):e;if(st)return a?getSmoothClampedResolution(_,ct,s):clamp(_,s,ct);const ft=1e-9,mt=Math.ceil(Math.log(e/ct)/Math.log(o)-ft),bt=-_e*(.5-ft)+.5,wt=Math.min(ct,_),Ct=Math.floor(Math.log(e/wt)/Math.log(o)+bt),Rt=Math.max(mt,Ct),It=e/Math.pow(o,Rt);return clamp(It,s,ct)}}}function createMinMaxResolution(o,e,s,a,d){return s=s!==void 0?s:!0,function(b,_,_e,ot){if(b!==void 0){const st=a?getViewportClampedResolution(o,a,_e,d):o;return!s||!ot?clamp(b,e,st):getSmoothClampedResolution(b,st,e)}}}function disable(o){if(o!==void 0)return 0}function none$1(o){if(o!==void 0)return o}function createSnapToN(o){const e=2*Math.PI/o;return function(s,a){if(a)return s;if(s!==void 0)return s=Math.floor(s/e+.5)*e,s}}function createSnapToZero(o){const e=toRadians(5);return function(s,a){return a||s===void 0?s:Math.abs(s)<=e?0:s}}function easeIn(o){return Math.pow(o,3)}function easeOut(o){return 1-easeIn(1-o)}function inAndOut(o){return 3*o*o-2*o*o*o}function linear(o){return o}const tmp_=new Array(6);function create(){return[1,0,0,1,0,0]}function reset$1(o){return set(o,1,0,0,1,0,0)}function multiply(o,e){const s=o[0],a=o[1],d=o[2],b=o[3],_=o[4],_e=o[5],ot=e[0],st=e[1],ct=e[2],ft=e[3],mt=e[4],bt=e[5];return o[0]=s*ot+d*st,o[1]=a*ot+b*st,o[2]=s*ct+d*ft,o[3]=a*ct+b*ft,o[4]=s*mt+d*bt+_,o[5]=a*mt+b*bt+_e,o}function set(o,e,s,a,d,b,_){return o[0]=e,o[1]=s,o[2]=a,o[3]=d,o[4]=b,o[5]=_,o}function setFromArray(o,e){return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[4]=e[4],o[5]=e[5],o}function apply$1(o,e){const s=e[0],a=e[1];return e[0]=o[0]*s+o[2]*a+o[4],e[1]=o[1]*s+o[3]*a+o[5],e}function scale$2(o,e,s){return multiply(o,set(tmp_,e,0,0,s,0,0))}function makeScale(o,e,s){return set(o,e,0,0,s,0,0)}function translate$1(o,e,s){return multiply(o,set(tmp_,1,0,0,1,e,s))}function compose(o,e,s,a,d,b,_,_e){const ot=Math.sin(b),st=Math.cos(b);return o[0]=a*st,o[1]=d*ot,o[2]=-a*ot,o[3]=d*st,o[4]=_*a*st-_e*a*ot+e,o[5]=_*d*ot+_e*d*st+s,o}function makeInverse(o,e){const s=determinant(e);assert(s!==0,"Transformation matrix cannot be inverted");const a=e[0],d=e[1],b=e[2],_=e[3],_e=e[4],ot=e[5];return o[0]=_/s,o[1]=-d/s,o[2]=-b/s,o[3]=a/s,o[4]=(b*ot-_*_e)/s,o[5]=-(a*ot-d*_e)/s,o}function determinant(o){return o[0]*o[3]-o[1]*o[2]}let transformStringDiv;function toString$3(o){const e="matrix("+o.join(", ")+")";if(WORKER_OFFSCREEN_CANVAS)return e;const s=transformStringDiv||(transformStringDiv=document.createElement("div"));return s.style.transform=e,s.style.transform}function transform2D(o,e,s,a,d,b){b=b||[];let _=0;for(let _e=e;_e<s;_e+=a){const ot=o[_e],st=o[_e+1];b[_++]=d[0]*ot+d[2]*st+d[4],b[_++]=d[1]*ot+d[3]*st+d[5]}return b&&b.length!=_&&(b.length=_),b}function rotate(o,e,s,a,d,b,_){_=_||[];const _e=Math.cos(d),ot=Math.sin(d),st=b[0],ct=b[1];let ft=0;for(let mt=e;mt<s;mt+=a){const bt=o[mt]-st,wt=o[mt+1]-ct;_[ft++]=st+bt*_e-wt*ot,_[ft++]=ct+bt*ot+wt*_e;for(let Ct=mt+2;Ct<mt+a;++Ct)_[ft++]=o[Ct]}return _&&_.length!=ft&&(_.length=ft),_}function scale$1(o,e,s,a,d,b,_,_e){_e=_e||[];const ot=_[0],st=_[1];let ct=0;for(let ft=e;ft<s;ft+=a){const mt=o[ft]-ot,bt=o[ft+1]-st;_e[ct++]=ot+d*mt,_e[ct++]=st+b*bt;for(let wt=ft+2;wt<ft+a;++wt)_e[ct++]=o[wt]}return _e&&_e.length!=ct&&(_e.length=ct),_e}function translate(o,e,s,a,d,b,_){_=_||[];let _e=0;for(let ot=e;ot<s;ot+=a){_[_e++]=o[ot]+d,_[_e++]=o[ot+1]+b;for(let st=ot+2;st<ot+a;++st)_[_e++]=o[st]}return _&&_.length!=_e&&(_.length=_e),_}const tmpTransform$1=create();class Geometry extends BaseObject{constructor(){super(),this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne((e,s,a)=>{if(!a)return this.getSimplifiedGeometry(s);const d=this.clone();return d.applyTransform(a),d.getSimplifiedGeometry(s)})}simplifyTransformed(e,s){return this.simplifyTransformedInternal(this.getRevision(),e,s)}clone(){return abstract()}closestPointXY(e,s,a,d){return abstract()}containsXY(e,s){const a=this.getClosestPoint([e,s]);return a[0]===e&&a[1]===s}getClosestPoint(e,s){return s=s||[NaN,NaN],this.closestPointXY(e[0],e[1],s,1/0),s}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const s=this.computeExtent(this.extent_);(isNaN(s[0])||isNaN(s[1]))&&createOrUpdateEmpty(s),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,e)}rotate(e,s){abstract()}scale(e,s,a){abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return abstract()}getType(){return abstract()}applyTransform(e){abstract()}intersectsExtent(e){return abstract()}translate(e,s){abstract()}transform(e,s){const a=get$3(e),d=a.getUnits()=="tile-pixels"?function(b,_,_e){const ot=a.getExtent(),st=a.getWorldExtent(),ct=getHeight(st)/getHeight(ot);return compose(tmpTransform$1,st[0],st[3],ct,-ct,0,0,0),transform2D(b,0,b.length,_e,tmpTransform$1,_),getTransform(a,s)(b,_,_e)}:getTransform(a,s);return this.applyTransform(d),this}}class SimpleGeometry extends Geometry{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const s=this.getSimplifiedGeometryInternal(e);return s.getFlatCoordinates().length<this.flatCoordinates.length?s:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,s){this.stride=getStrideForLayout(e),this.layout=e,this.flatCoordinates=s}setCoordinates(e,s){abstract()}setLayout(e,s,a){let d;if(e)d=getStrideForLayout(e);else{for(let b=0;b<a;++b){if(s.length===0){this.layout="XY",this.stride=2;return}s=s[0]}d=s.length,e=getLayoutForStride(d)}this.layout=e,this.stride=d}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,s){const a=this.getFlatCoordinates();if(a){const d=this.getStride();rotate(a,0,a.length,d,e,s,a),this.changed()}}scale(e,s,a){s===void 0&&(s=e),a||(a=getCenter(this.getExtent()));const d=this.getFlatCoordinates();if(d){const b=this.getStride();scale$1(d,0,d.length,b,e,s,a,d),this.changed()}}translate(e,s){const a=this.getFlatCoordinates();if(a){const d=this.getStride();translate(a,0,a.length,d,e,s,a),this.changed()}}}function getLayoutForStride(o){let e;return o==2?e="XY":o==3?e="XYZ":o==4&&(e="XYZM"),e}function getStrideForLayout(o){let e;return o=="XY"?e=2:o=="XYZ"||o=="XYM"?e=3:o=="XYZM"&&(e=4),e}function transformGeom2D(o,e,s){const a=o.getFlatCoordinates();if(!a)return null;const d=o.getStride();return transform2D(a,0,a.length,d,e,s)}function assignClosest(o,e,s,a,d,b,_){const _e=o[e],ot=o[e+1],st=o[s]-_e,ct=o[s+1]-ot;let ft;if(st===0&&ct===0)ft=e;else{const mt=((d-_e)*st+(b-ot)*ct)/(st*st+ct*ct);if(mt>1)ft=s;else if(mt>0){for(let bt=0;bt<a;++bt)_[bt]=lerp(o[e+bt],o[s+bt],mt);_.length=a;return}else ft=e}for(let mt=0;mt<a;++mt)_[mt]=o[ft+mt];_.length=a}function maxSquaredDelta(o,e,s,a,d){let b=o[e],_=o[e+1];for(e+=a;e<s;e+=a){const _e=o[e],ot=o[e+1],st=squaredDistance$1(b,_,_e,ot);st>d&&(d=st),b=_e,_=ot}return d}function arrayMaxSquaredDelta(o,e,s,a,d){for(let b=0,_=s.length;b<_;++b){const _e=s[b];d=maxSquaredDelta(o,e,_e,a,d),e=_e}return d}function multiArrayMaxSquaredDelta(o,e,s,a,d){for(let b=0,_=s.length;b<_;++b){const _e=s[b];d=arrayMaxSquaredDelta(o,e,_e,a,d),e=_e[_e.length-1]}return d}function assignClosestPoint(o,e,s,a,d,b,_,_e,ot,st,ct){if(e==s)return st;let ft,mt;if(d===0){if(mt=squaredDistance$1(_,_e,o[e],o[e+1]),mt<st){for(ft=0;ft<a;++ft)ot[ft]=o[e+ft];return ot.length=a,mt}return st}ct=ct||[NaN,NaN];let bt=e+a;for(;bt<s;)if(assignClosest(o,bt-a,bt,a,_,_e,ct),mt=squaredDistance$1(_,_e,ct[0],ct[1]),mt<st){for(st=mt,ft=0;ft<a;++ft)ot[ft]=ct[ft];ot.length=a,bt+=a}else bt+=a*Math.max((Math.sqrt(mt)-Math.sqrt(st))/d|0,1);if(b&&(assignClosest(o,s-a,e,a,_,_e,ct),mt=squaredDistance$1(_,_e,ct[0],ct[1]),mt<st)){for(st=mt,ft=0;ft<a;++ft)ot[ft]=ct[ft];ot.length=a}return st}function assignClosestArrayPoint(o,e,s,a,d,b,_,_e,ot,st,ct){ct=ct||[NaN,NaN];for(let ft=0,mt=s.length;ft<mt;++ft){const bt=s[ft];st=assignClosestPoint(o,e,bt,a,d,b,_,_e,ot,st,ct),e=bt}return st}function assignClosestMultiArrayPoint(o,e,s,a,d,b,_,_e,ot,st,ct){ct=ct||[NaN,NaN];for(let ft=0,mt=s.length;ft<mt;++ft){const bt=s[ft];st=assignClosestArrayPoint(o,e,bt,a,d,b,_,_e,ot,st,ct),e=bt[bt.length-1]}return st}function deflateCoordinate(o,e,s,a){for(let d=0,b=s.length;d<b;++d)o[e++]=s[d];return e}function deflateCoordinates(o,e,s,a){for(let d=0,b=s.length;d<b;++d){const _=s[d];for(let _e=0;_e<a;++_e)o[e++]=_[_e]}return e}function deflateCoordinatesArray(o,e,s,a,d){d=d||[];let b=0;for(let _=0,_e=s.length;_<_e;++_){const ot=deflateCoordinates(o,e,s[_],a);d[b++]=ot,e=ot}return d.length=b,d}function deflateMultiCoordinatesArray(o,e,s,a,d){d=d||[];let b=0;for(let _=0,_e=s.length;_<_e;++_){const ot=deflateCoordinatesArray(o,e,s[_],a,d[b]);ot.length===0&&(ot[0]=e),d[b++]=ot,e=ot[ot.length-1]}return d.length=b,d}function douglasPeucker(o,e,s,a,d,b,_){const _e=(s-e)/a;if(_e<3){for(;e<s;e+=a)b[_++]=o[e],b[_++]=o[e+1];return _}const ot=new Array(_e);ot[0]=1,ot[_e-1]=1;const st=[e,s-a];let ct=0;for(;st.length>0;){const ft=st.pop(),mt=st.pop();let bt=0;const wt=o[mt],Ct=o[mt+1],Rt=o[ft],It=o[ft+1];for(let Pt=mt+a;Pt<ft;Pt+=a){const Tt=o[Pt],Gt=o[Pt+1],Jt=squaredSegmentDistance(Tt,Gt,wt,Ct,Rt,It);Jt>bt&&(ct=Pt,bt=Jt)}bt>d&&(ot[(ct-e)/a]=1,mt+a<ct&&st.push(mt,ct),ct+a<ft&&st.push(ct,ft))}for(let ft=0;ft<_e;++ft)ot[ft]&&(b[_++]=o[e+ft*a],b[_++]=o[e+ft*a+1]);return _}function douglasPeuckerArray(o,e,s,a,d,b,_,_e){for(let ot=0,st=s.length;ot<st;++ot){const ct=s[ot];_=douglasPeucker(o,e,ct,a,d,b,_),_e.push(_),e=ct}return _}function snap(o,e){return e*Math.round(o/e)}function quantize(o,e,s,a,d,b,_){if(e==s)return _;let _e=snap(o[e],d),ot=snap(o[e+1],d);e+=a,b[_++]=_e,b[_++]=ot;let st,ct;do if(st=snap(o[e],d),ct=snap(o[e+1],d),e+=a,e==s)return b[_++]=st,b[_++]=ct,_;while(st==_e&&ct==ot);for(;e<s;){const ft=snap(o[e],d),mt=snap(o[e+1],d);if(e+=a,ft==st&&mt==ct)continue;const bt=st-_e,wt=ct-ot,Ct=ft-_e,Rt=mt-ot;if(bt*Rt==wt*Ct&&(bt<0&&Ct<bt||bt==Ct||bt>0&&Ct>bt)&&(wt<0&&Rt<wt||wt==Rt||wt>0&&Rt>wt)){st=ft,ct=mt;continue}b[_++]=st,b[_++]=ct,_e=st,ot=ct,st=ft,ct=mt}return b[_++]=st,b[_++]=ct,_}function quantizeArray(o,e,s,a,d,b,_,_e){for(let ot=0,st=s.length;ot<st;++ot){const ct=s[ot];_=quantize(o,e,ct,a,d,b,_),_e.push(_),e=ct}return _}function quantizeMultiArray(o,e,s,a,d,b,_,_e){for(let ot=0,st=s.length;ot<st;++ot){const ct=s[ot],ft=[];_=quantizeArray(o,e,ct,a,d,b,_,ft),_e.push(ft),e=ct[ct.length-1]}return _}function inflateCoordinates(o,e,s,a,d){d=d!==void 0?d:[];let b=0;for(let _=e;_<s;_+=a)d[b++]=o.slice(_,_+a);return d.length=b,d}function inflateCoordinatesArray(o,e,s,a,d){d=d!==void 0?d:[];let b=0;for(let _=0,_e=s.length;_<_e;++_){const ot=s[_];d[b++]=inflateCoordinates(o,e,ot,a,d[b]),e=ot}return d.length=b,d}function inflateMultiCoordinatesArray(o,e,s,a,d){d=d!==void 0?d:[];let b=0;for(let _=0,_e=s.length;_<_e;++_){const ot=s[_];d[b++]=ot.length===1&&ot[0]===e?[]:inflateCoordinatesArray(o,e,ot,a,d[b]),e=ot[ot.length-1]}return d.length=b,d}function linearRing(o,e,s,a){let d=0,b=o[s-a],_=o[s-a+1];for(;e<s;e+=a){const _e=o[e],ot=o[e+1];d+=_*_e-b*ot,b=_e,_=ot}return d/2}function linearRings(o,e,s,a){let d=0;for(let b=0,_=s.length;b<_;++b){const _e=s[b];d+=linearRing(o,e,_e,a),e=_e}return d}function linearRingss$1(o,e,s,a){let d=0;for(let b=0,_=s.length;b<_;++b){const _e=s[b];d+=linearRings(o,e,_e,a),e=_e[_e.length-1]}return d}class LinearRing extends SimpleGeometry{constructor(e,s){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,s!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(s,e):this.setCoordinates(e,s)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,s,a,d){return d<closestSquaredDistanceXY(this.getExtent(),e,s)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,s,a,d))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const s=[];return s.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,s,0),new LinearRing(s,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,s){this.setLayout(s,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}let Point$1=class sle extends SimpleGeometry{constructor(e,s){super(),this.setCoordinates(e,s)}clone(){const e=new sle(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,s,a,d){const b=this.flatCoordinates,_=squaredDistance$1(e,s,b[0],b[1]);if(_<d){const _e=this.stride;for(let ot=0;ot<_e;++ot)a[ot]=b[ot];return a.length=_e,_}return d}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,s){this.setLayout(s,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}};function linearRingContainsExtent(o,e,s,a,d){return!forEachCorner(d,function(_){return!linearRingContainsXY(o,e,s,a,_[0],_[1])})}function linearRingContainsXY(o,e,s,a,d,b){let _=0,_e=o[s-a],ot=o[s-a+1];for(;e<s;e+=a){const st=o[e],ct=o[e+1];ot<=b?ct>b&&(st-_e)*(b-ot)-(d-_e)*(ct-ot)>0&&_++:ct<=b&&(st-_e)*(b-ot)-(d-_e)*(ct-ot)<0&&_--,_e=st,ot=ct}return _!==0}function linearRingsContainsXY(o,e,s,a,d,b){if(s.length===0||!linearRingContainsXY(o,e,s[0],a,d,b))return!1;for(let _=1,_e=s.length;_<_e;++_)if(linearRingContainsXY(o,s[_-1],s[_],a,d,b))return!1;return!0}function linearRingssContainsXY(o,e,s,a,d,b){if(s.length===0)return!1;for(let _=0,_e=s.length;_<_e;++_){const ot=s[_];if(linearRingsContainsXY(o,e,ot,a,d,b))return!0;e=ot[ot.length-1]}return!1}function getInteriorPointOfArray(o,e,s,a,d,b,_){let _e,ot,st,ct,ft,mt,bt;const wt=d[b+1],Ct=[];for(let Pt=0,Tt=s.length;Pt<Tt;++Pt){const Gt=s[Pt];for(ct=o[Gt-a],mt=o[Gt-a+1],_e=e;_e<Gt;_e+=a)ft=o[_e],bt=o[_e+1],(wt<=mt&&bt<=wt||mt<=wt&&wt<=bt)&&(st=(wt-mt)/(bt-mt)*(ft-ct)+ct,Ct.push(st)),ct=ft,mt=bt}let Rt=NaN,It=-1/0;for(Ct.sort(ascending),ct=Ct[0],_e=1,ot=Ct.length;_e<ot;++_e){ft=Ct[_e];const Pt=Math.abs(ft-ct);Pt>It&&(st=(ct+ft)/2,linearRingsContainsXY(o,e,s,a,st,wt)&&(Rt=st,It=Pt)),ct=ft}return isNaN(Rt)&&(Rt=d[b]),_?(_.push(Rt,wt,It),_):[Rt,wt,It]}function getInteriorPointsOfMultiArray(o,e,s,a,d){let b=[];for(let _=0,_e=s.length;_<_e;++_){const ot=s[_];b=getInteriorPointOfArray(o,e,ot,a,d,2*_,b),e=ot[ot.length-1]}return b}function forEach$1(o,e,s,a,d){let b;for(e+=a;e<s;e+=a)if(b=d(o.slice(e-a,e),o.slice(e,e+a)),b)return b;return!1}function intersectsLineString(o,e,s,a,d){const b=extendFlatCoordinates(createEmpty(),o,e,s,a);return intersects$1(d,b)?containsExtent(d,b)||b[0]>=d[0]&&b[2]<=d[2]||b[1]>=d[1]&&b[3]<=d[3]?!0:forEach$1(o,e,s,a,function(_,_e){return intersectsSegment(d,_,_e)}):!1}function intersectsLineStringArray(o,e,s,a,d){for(let b=0,_=s.length;b<_;++b){if(intersectsLineString(o,e,s[b],a,d))return!0;e=s[b]}return!1}function intersectsLinearRing(o,e,s,a,d){return!!(intersectsLineString(o,e,s,a,d)||linearRingContainsXY(o,e,s,a,d[0],d[1])||linearRingContainsXY(o,e,s,a,d[0],d[3])||linearRingContainsXY(o,e,s,a,d[2],d[1])||linearRingContainsXY(o,e,s,a,d[2],d[3]))}function intersectsLinearRingArray(o,e,s,a,d){if(!intersectsLinearRing(o,e,s[0],a,d))return!1;if(s.length===1)return!0;for(let b=1,_=s.length;b<_;++b)if(linearRingContainsExtent(o,s[b-1],s[b],a,d)&&!intersectsLineString(o,s[b-1],s[b],a,d))return!1;return!0}function intersectsLinearRingMultiArray(o,e,s,a,d){for(let b=0,_=s.length;b<_;++b){const _e=s[b];if(intersectsLinearRingArray(o,e,_e,a,d))return!0;e=_e[_e.length-1]}return!1}function coordinates(o,e,s,a){for(;e<s-a;){for(let d=0;d<a;++d){const b=o[e+d];o[e+d]=o[s-a+d],o[s-a+d]=b}e+=a,s-=a}}function linearRingIsClockwise(o,e,s,a){let d=0,b=o[s-a],_=o[s-a+1];for(;e<s;e+=a){const _e=o[e],ot=o[e+1];d+=(_e-b)*(ot+_),b=_e,_=ot}return d===0?void 0:d>0}function linearRingsAreOriented(o,e,s,a,d){d=d!==void 0?d:!1;for(let b=0,_=s.length;b<_;++b){const _e=s[b],ot=linearRingIsClockwise(o,e,_e,a);if(b===0){if(d&&ot||!d&&!ot)return!1}else if(d&&!ot||!d&&ot)return!1;e=_e}return!0}function linearRingssAreOriented(o,e,s,a,d){for(let b=0,_=s.length;b<_;++b){const _e=s[b];if(!linearRingsAreOriented(o,e,_e,a,d))return!1;_e.length&&(e=_e[_e.length-1])}return!0}function orientLinearRings(o,e,s,a,d){d=d!==void 0?d:!1;for(let b=0,_=s.length;b<_;++b){const _e=s[b],ot=linearRingIsClockwise(o,e,_e,a);(b===0?d&&ot||!d&&!ot:d&&!ot||!d&&ot)&&coordinates(o,e,_e,a),e=_e}return e}function orientLinearRingsArray(o,e,s,a,d){for(let b=0,_=s.length;b<_;++b)e=orientLinearRings(o,e,s[b],a,d);return e}function inflateEnds(o,e){const s=[];let a=0,d=0,b;for(let _=0,_e=e.length;_<_e;++_){const ot=e[_],st=linearRingIsClockwise(o,a,ot,2);if(b===void 0&&(b=st),st===b)s.push(e.slice(d,_+1));else{if(s.length===0)continue;s[s.length-1].push(e[d])}d=_+1,a=ot}return s}class Polygon extends SimpleGeometry{constructor(e,s,a){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,s!==void 0&&a?(this.setFlatCoordinates(s,e),this.ends_=a):this.setCoordinates(e,s)}appendLinearRing(e){this.flatCoordinates?extend$4(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,s,a,d){return d<closestSquaredDistanceXY(this.getExtent(),e,s)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,s,a,d))}containsXY(e,s){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,s)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let s;return e!==void 0?(s=this.getOrientedFlatCoordinates().slice(),orientLinearRings(s,0,this.ends_,this.stride,e)):s=this.flatCoordinates,inflateCoordinatesArray(s,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new LinearRing(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,s=this.flatCoordinates,a=this.ends_,d=[];let b=0;for(let _=0,_e=a.length;_<_e;++_){const ot=a[_],st=new LinearRing(s.slice(b,ot),e);d.push(st),b=ot}return d}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const s=[],a=[];return s.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),s,0,a),new Polygon(s,"XY",a)}getType(){return"Polygon"}intersectsExtent(e){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,s){this.setLayout(s,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const a=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=a.length===0?0:a[a.length-1],this.changed()}}function fromExtent(o){if(isEmpty(o))throw new Error("Cannot create polygon from empty extent");const e=o[0],s=o[1],a=o[2],d=o[3],b=[e,s,e,d,a,d,a,s,e,s];return new Polygon(b,"XY",[b.length])}const DEFAULT_MIN_ZOOM=0;class View extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&disableCoordinateWarning(),e.center&&(e.center=fromUserCoordinate(e.center,this.projection_)),e.extent&&(e.extent=fromUserExtent(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const s=Object.assign({},e);for(const _e in ViewProperty)delete s[_e];this.setProperties(s,!0);const a=createResolutionConstraint(e);this.maxResolution_=a.maxResolution,this.minResolution_=a.minResolution,this.zoomFactor_=a.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=a.minZoom;const d=createCenterConstraint(e),b=a.constraint,_=createRotationConstraint(e);this.constraints_={center:d,resolution:b,rotation:_},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let s=this.padding_;this.padding_=e;const a=this.getCenterInternal();if(a){const d=e||[0,0,0,0];s=s||[0,0,0,0];const b=this.getResolution(),_=b/2*(d[3]-s[3]+s[1]-d[1]),_e=b/2*(d[0]-s[0]+s[2]-d[2]);this.setCenterInternal([a[0]+_,a[1]-_e])}}getUpdatedOptions_(e){const s=this.getProperties();return s.resolution!==void 0?s.resolution=this.getResolution():s.zoom=this.getZoom(),s.center=this.getCenterInternal(),s.rotation=this.getRotation(),Object.assign({},s,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const s=new Array(arguments.length);for(let a=0;a<s.length;++a){let d=arguments[a];d.center&&(d=Object.assign({},d),d.center=fromUserCoordinate(d.center,this.getProjection())),d.anchor&&(d=Object.assign({},d),d.anchor=fromUserCoordinate(d.anchor,this.getProjection())),s[a]=d}this.animateInternal.apply(this,s)}animateInternal(e){let s=arguments.length,a;s>1&&typeof arguments[s-1]=="function"&&(a=arguments[s-1],--s);let d=0;for(;d<s&&!this.isDef();++d){const ct=arguments[d];ct.center&&this.setCenterInternal(ct.center),ct.zoom!==void 0?this.setZoom(ct.zoom):ct.resolution&&this.setResolution(ct.resolution),ct.rotation!==void 0&&this.setRotation(ct.rotation)}if(d===s){a&&animationCallback(a,!0);return}let b=Date.now(),_=this.targetCenter_.slice(),_e=this.targetResolution_,ot=this.targetRotation_;const st=[];for(;d<s;++d){const ct=arguments[d],ft={start:b,complete:!1,anchor:ct.anchor,duration:ct.duration!==void 0?ct.duration:1e3,easing:ct.easing||inAndOut,callback:a};if(ct.center&&(ft.sourceCenter=_,ft.targetCenter=ct.center.slice(),_=ft.targetCenter),ct.zoom!==void 0?(ft.sourceResolution=_e,ft.targetResolution=this.getResolutionForZoom(ct.zoom),_e=ft.targetResolution):ct.resolution&&(ft.sourceResolution=_e,ft.targetResolution=ct.resolution,_e=ft.targetResolution),ct.rotation!==void 0){ft.sourceRotation=ot;const mt=modulo(ct.rotation-ot+Math.PI,2*Math.PI)-Math.PI;ft.targetRotation=ot+mt,ot=ft.targetRotation}isNoopAnimation(ft)?ft.complete=!0:b+=ft.duration,st.push(ft)}this.animations_.push(st),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let e;for(let s=0,a=this.animations_.length;s<a;++s){const d=this.animations_[s];if(d[0].callback&&animationCallback(d[0].callback,!1),!e)for(let b=0,_=d.length;b<_;++b){const _e=d[b];if(!_e.complete){e=_e.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let s=!1;for(let a=this.animations_.length-1;a>=0;--a){const d=this.animations_[a];let b=!0;for(let _=0,_e=d.length;_<_e;++_){const ot=d[_];if(ot.complete)continue;const st=e-ot.start;let ct=ot.duration>0?st/ot.duration:1;ct>=1?(ot.complete=!0,ct=1):b=!1;const ft=ot.easing(ct);if(ot.sourceCenter){const mt=ot.sourceCenter[0],bt=ot.sourceCenter[1],wt=ot.targetCenter[0],Ct=ot.targetCenter[1];this.nextCenter_=ot.targetCenter;const Rt=mt+ft*(wt-mt),It=bt+ft*(Ct-bt);this.targetCenter_=[Rt,It]}if(ot.sourceResolution&&ot.targetResolution){const mt=ft===1?ot.targetResolution:ot.sourceResolution+ft*(ot.targetResolution-ot.sourceResolution);if(ot.anchor){const bt=this.getViewportSize_(this.getRotation()),wt=this.constraints_.resolution(mt,0,bt,!0);this.targetCenter_=this.calculateCenterZoom(wt,ot.anchor)}this.nextResolution_=ot.targetResolution,this.targetResolution_=mt,this.applyTargetState_(!0)}if(ot.sourceRotation!==void 0&&ot.targetRotation!==void 0){const mt=ft===1?modulo(ot.targetRotation+Math.PI,2*Math.PI)-Math.PI:ot.sourceRotation+ft*(ot.targetRotation-ot.sourceRotation);if(ot.anchor){const bt=this.constraints_.rotation(mt,!0);this.targetCenter_=this.calculateCenterRotate(bt,ot.anchor)}this.nextRotation_=ot.targetRotation,this.targetRotation_=mt}if(this.applyTargetState_(!0),s=!0,!ot.complete)break}if(b){this.animations_[a]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const _=d[0].callback;_&&animationCallback(_,!0)}}this.animations_=this.animations_.filter(Boolean),s&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,s){let a;const d=this.getCenterInternal();return d!==void 0&&(a=[d[0]-s[0],d[1]-s[1]],rotate$1(a,e-this.getRotation()),add$1(a,s)),a}calculateCenterZoom(e,s){let a;const d=this.getCenterInternal(),b=this.getResolution();if(d!==void 0&&b!==void 0){const _=s[0]-e*(s[0]-d[0])/b,_e=s[1]-e*(s[1]-d[1])/b;a=[_,_e]}return a}getViewportSize_(e){const s=this.viewportSize_;if(e){const a=s[0],d=s[1];return[Math.abs(a*Math.cos(e))+Math.abs(d*Math.sin(e)),Math.abs(a*Math.sin(e))+Math.abs(d*Math.cos(e))]}return s}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&toUserCoordinate(e,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const s=this.calculateExtentInternal(e);return toUserExtent(s,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const s=this.getCenterInternal();assert(s,"The view center is not defined");const a=this.getResolution();assert(a!==void 0,"The view resolution is not defined");const d=this.getRotation();return assert(d!==void 0,"The view rotation is not defined"),getForViewAndSize(s,a,d,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,s){return this.getResolutionForExtentInternal(fromUserExtent(e,this.getProjection()),s)}getResolutionForExtentInternal(e,s){s=s||this.getViewportSizeMinusPadding_();const a=getWidth(e)/s[0],d=getHeight(e)/s[1];return Math.max(a,d)}getResolutionForValueFunction(e){e=e||2;const s=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,d=Math.log(s/a)/Math.log(e);return function(b){return s/Math.pow(e,b*d)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(e){const s=Math.log(e||2),a=this.getConstrainedResolution(this.maxResolution_),d=this.minResolution_,b=Math.log(a/d)/s;return function(_){return Math.log(a/_)/s/b}}getViewportSizeMinusPadding_(e){let s=this.getViewportSize_(e);const a=this.padding_;return a&&(s=[s[0]-a[1]-a[3],s[1]-a[0]-a[2]]),s}getState(){const e=this.getProjection(),s=this.getResolution(),a=this.getRotation();let d=this.getCenterInternal();const b=this.padding_;if(b){const _=this.getViewportSizeMinusPadding_();d=calculateCenterOn(d,this.getViewportSize_(),[_[0]/2+b[3],_[1]/2+b[0]],s,a)}return{center:d.slice(0),projection:e!==void 0?e:null,resolution:s,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:a,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const s=this.getResolution();return s!==void 0&&(e=this.getZoomForResolution(s)),e}getZoomForResolution(e){let s=this.minZoom_||0,a,d;if(this.resolutions_){const b=linearFindNearest(this.resolutions_,e,1);s=b,a=this.resolutions_[b],b==this.resolutions_.length-1?d=2:d=a/this.resolutions_[b+1]}else a=this.maxResolution_,d=this.zoomFactor_;return s+Math.log(a/e)/Math.log(d)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const s=clamp(Math.floor(e),0,this.resolutions_.length-2),a=this.resolutions_[s]/this.resolutions_[s+1];return this.resolutions_[s]/Math.pow(a,clamp(e-s,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,s){let a;if(assert(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){assert(!isEmpty(e),"Cannot fit empty extent provided as `geometry`");const d=fromUserExtent(e,this.getProjection());a=fromExtent(d)}else if(e.getType()==="Circle"){const d=fromUserExtent(e.getExtent(),this.getProjection());a=fromExtent(d),a.rotate(this.getRotation(),getCenter(d))}else a=e;this.fitInternal(a,s)}rotatedExtentForGeometry(e){const s=this.getRotation(),a=Math.cos(s),d=Math.sin(-s),b=e.getFlatCoordinates(),_=e.getStride();let _e=1/0,ot=1/0,st=-1/0,ct=-1/0;for(let ft=0,mt=b.length;ft<mt;ft+=_){const bt=b[ft]*a-b[ft+1]*d,wt=b[ft]*d+b[ft+1]*a;_e=Math.min(_e,bt),ot=Math.min(ot,wt),st=Math.max(st,bt),ct=Math.max(ct,wt)}return[_e,ot,st,ct]}fitInternal(e,s){s=s||{};let a=s.size;a||(a=this.getViewportSizeMinusPadding_());const d=s.padding!==void 0?s.padding:[0,0,0,0],b=s.nearest!==void 0?s.nearest:!1;let _;s.minResolution!==void 0?_=s.minResolution:s.maxZoom!==void 0?_=this.getResolutionForZoom(s.maxZoom):_=0;const _e=this.rotatedExtentForGeometry(e);let ot=this.getResolutionForExtentInternal(_e,[a[0]-d[1]-d[3],a[1]-d[0]-d[2]]);ot=isNaN(ot)?_:Math.max(ot,_),ot=this.getConstrainedResolution(ot,b?0:1);const st=this.getRotation(),ct=Math.sin(st),ft=Math.cos(st),mt=getCenter(_e);mt[0]+=(d[1]-d[3])/2*ot,mt[1]+=(d[0]-d[2])/2*ot;const bt=mt[0]*ft-mt[1]*ct,wt=mt[1]*ft+mt[0]*ct,Ct=this.getConstrainedCenter([bt,wt],ot),Rt=s.callback?s.callback:VOID;s.duration!==void 0?this.animateInternal({resolution:ot,center:Ct,duration:s.duration,easing:s.easing},Rt):(this.targetResolution_=ot,this.targetCenter_=Ct,this.applyTargetState_(!1,!0),animationCallback(Rt,!0))}centerOn(e,s,a){this.centerOnInternal(fromUserCoordinate(e,this.getProjection()),s,a)}centerOnInternal(e,s,a){this.setCenterInternal(calculateCenterOn(e,s,a,this.getResolution(),this.getRotation()))}calculateCenterShift(e,s,a,d){let b;const _=this.padding_;if(_&&e){const _e=this.getViewportSizeMinusPadding_(-a),ot=calculateCenterOn(e,d,[_e[0]/2+_[3],_e[1]/2+_[0]],s,a);b=[e[0]-ot[0],e[1]-ot[1]]}return b}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const s=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([s[0]+e[0],s[1]+e[1]])}adjustCenterInternal(e){const s=this.targetCenter_;this.setCenterInternal([s[0]+e[0],s[1]+e[1]])}adjustResolution(e,s){s=s&&fromUserCoordinate(s,this.getProjection()),this.adjustResolutionInternal(e,s)}adjustResolutionInternal(e,s){const a=this.getAnimating()||this.getInteracting(),d=this.getViewportSize_(this.getRotation()),b=this.constraints_.resolution(this.targetResolution_*e,0,d,a);s&&(this.targetCenter_=this.calculateCenterZoom(b,s)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,s){this.adjustResolution(Math.pow(this.zoomFactor_,-e),s)}adjustRotation(e,s){s&&(s=fromUserCoordinate(s,this.getProjection())),this.adjustRotationInternal(e,s)}adjustRotationInternal(e,s){const a=this.getAnimating()||this.getInteracting(),d=this.constraints_.rotation(this.targetRotation_+e,a);s&&(this.targetCenter_=this.calculateCenterRotate(d,s)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,s){return this.hints_[e]+=s,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,s){const a=this.getAnimating()||this.getInteracting()||s,d=this.constraints_.rotation(this.targetRotation_,a),b=this.getViewportSize_(d),_=this.constraints_.resolution(this.targetResolution_,0,b,a),_e=this.constraints_.center(this.targetCenter_,_,b,a,this.calculateCenterShift(this.targetCenter_,_,d,b));this.get(ViewProperty.ROTATION)!==d&&this.set(ViewProperty.ROTATION,d),this.get(ViewProperty.RESOLUTION)!==_&&(this.set(ViewProperty.RESOLUTION,_),this.set("zoom",this.getZoom(),!0)),(!_e||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),_e))&&this.set(ViewProperty.CENTER,_e),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,s,a){e=e!==void 0?e:200;const d=s||0,b=this.constraints_.rotation(this.targetRotation_),_=this.getViewportSize_(b),_e=this.constraints_.resolution(this.targetResolution_,d,_),ot=this.constraints_.center(this.targetCenter_,_e,_,!1,this.calculateCenterShift(this.targetCenter_,_e,b,_));if(e===0&&!this.cancelAnchor_){this.targetResolution_=_e,this.targetRotation_=b,this.targetCenter_=ot,this.applyTargetState_();return}a=a||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==_e||this.getRotation()!==b||!this.getCenterInternal()||!equals(this.getCenterInternal(),ot))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:b,center:ot,resolution:_e,duration:e,easing:easeOut,anchor:a}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(e,s,a){a=a&&fromUserCoordinate(a,this.getProjection()),this.endInteractionInternal(e,s,a)}endInteractionInternal(e,s,a){this.getInteracting()&&(this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(e,s,a))}getConstrainedCenter(e,s){const a=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,s||this.getResolution(),a)}getConstrainedZoom(e,s){const a=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(a,s))}getConstrainedResolution(e,s){s=s||0;const a=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,s,a)}}function animationCallback(o,e){setTimeout(function(){o(e)},0)}function createCenterConstraint(o){if(o.extent!==void 0){const s=o.smoothExtentConstraint!==void 0?o.smoothExtentConstraint:!0;return createExtent(o.extent,o.constrainOnlyCenter,s)}const e=createProjection(o.projection,"EPSG:3857");if(o.multiWorld!==!0&&e.isGlobal()){const s=e.getExtent().slice();return s[0]=-1/0,s[2]=1/0,createExtent(s,!1,!1)}return none$2}function createResolutionConstraint(o){let e,s,a,_=o.minZoom!==void 0?o.minZoom:DEFAULT_MIN_ZOOM,_e=o.maxZoom!==void 0?o.maxZoom:28;const ot=o.zoomFactor!==void 0?o.zoomFactor:2,st=o.multiWorld!==void 0?o.multiWorld:!1,ct=o.smoothResolutionConstraint!==void 0?o.smoothResolutionConstraint:!0,ft=o.showFullExtent!==void 0?o.showFullExtent:!1,mt=createProjection(o.projection,"EPSG:3857"),bt=mt.getExtent();let wt=o.constrainOnlyCenter,Ct=o.extent;if(!st&&!Ct&&mt.isGlobal()&&(wt=!1,Ct=bt),o.resolutions!==void 0){const Rt=o.resolutions;s=Rt[_],a=Rt[_e]!==void 0?Rt[_e]:Rt[Rt.length-1],o.constrainResolution?e=createSnapToResolutions(Rt,ct,!wt&&Ct,ft):e=createMinMaxResolution(s,a,ct,!wt&&Ct,ft)}else{const It=(bt?Math.max(getWidth(bt),getHeight(bt)):360*METERS_PER_UNIT$1.degrees/mt.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(2,DEFAULT_MIN_ZOOM),Pt=It/Math.pow(2,28-DEFAULT_MIN_ZOOM);s=o.maxResolution,s!==void 0?_=0:s=It/Math.pow(ot,_),a=o.minResolution,a===void 0&&(o.maxZoom!==void 0?o.maxResolution!==void 0?a=s/Math.pow(ot,_e):a=It/Math.pow(ot,_e):a=Pt),_e=_+Math.floor(Math.log(s/a)/Math.log(ot)),a=s/Math.pow(ot,_e-_),o.constrainResolution?e=createSnapToPower(ot,s,a,ct,!wt&&Ct,ft):e=createMinMaxResolution(s,a,ct,!wt&&Ct,ft)}return{constraint:e,maxResolution:s,minResolution:a,minZoom:_,zoomFactor:ot}}function createRotationConstraint(o){if(o.enableRotation!==void 0?o.enableRotation:!0){const s=o.constrainRotation;return s===void 0||s===!0?createSnapToZero():s===!1?none$1:typeof s=="number"?createSnapToN(s):none$1}return disable}function isNoopAnimation(o){return!(o.sourceCenter&&o.targetCenter&&!equals(o.sourceCenter,o.targetCenter)||o.sourceResolution!==o.targetResolution||o.sourceRotation!==o.targetRotation)}function calculateCenterOn(o,e,s,a,d){const b=Math.cos(-d);let _=Math.sin(-d),_e=o[0]*b-o[1]*_,ot=o[1]*b+o[0]*_;_e+=(e[0]/2-s[0])*a,ot+=(s[1]-e[1]/2)*a,_=-_;const st=_e*b-ot*_,ct=ot*b+_e*_;return[st,ct]}class Layer extends BaseLayer{constructor(e){const s=Object.assign({},e);delete s.source,super(s),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const a=e.source?e.source:null;this.setSource(a)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=listen(e,EventType.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let s;const a=this.getMapInternal();!e&&a&&(e=a.getView()),e instanceof View?s={viewState:e.getState(),extent:e.calculateExtent()}:s=e,!s.layerStatesArray&&a&&(s.layerStatesArray=a.getLayerGroup().getLayerStatesArray());let d;s.layerStatesArray?d=s.layerStatesArray.find(_=>_.layer===this):d=this.getLayerState();const b=this.getExtent();return inView(d,s.viewState)&&(!b||intersects$1(b,s.extent))}getAttributions(e){if(!this.isVisible(e))return[];let s;const a=this.getSource();if(a&&(s=a.getAttributions()),!s)return[];const d=e instanceof View?e.getViewStateAndExtent():e;let b=s(d);return Array.isArray(b)||(b=[b]),b}render(e,s){const a=this.getRenderer();return a.prepareFrame(e)?(this.rendered=!0,a.renderFrame(e,s)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(LayerProperty.MAP,e)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(e){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=listen(e,RenderEventType.PRECOMPOSE,function(s){const d=s.frameState.layerStatesArray,b=this.getLayerState(!1);assert(!d.some(function(_){return _.layer===b.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),d.push(b)},this),this.mapRenderKey_=listen(this,EventType.CHANGE,e.render,e),this.changed())}setSource(e){this.set(LayerProperty.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function inView(o,e){if(!o.visible)return!1;const s=e.resolution;if(s<o.minResolution||s>=o.maxResolution)return!1;const a=e.zoom;return a>o.minZoom&&a<=o.maxZoom}const TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer{constructor(e){e=e||{};const s=Object.assign({},e);delete s.preload,delete s.useInterimTilesOnError,super(s),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(e){this.set(TileProperty.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class LayerRenderer extends Observable{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return abstract()}getData(e){return null}prepareFrame(e){return abstract()}renderFrame(e,s){return abstract()}loadedTileCallback(e,s,a){e[s]||(e[s]={}),e[s][a.tileCoord.toString()]=a}createLoadedTileFinder(e,s,a){return(d,b)=>{const _=this.loadedTileCallback.bind(this,a,d);return e.forEachLoadedTile(s,d,b,_)}}forEachFeatureAtCoordinate(e,s,a,d,b){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const s=e.target;(s.getState()===ImageState.LOADED||s.getState()===ImageState.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let s=e.getState();return s!=ImageState.LOADED&&s!=ImageState.ERROR&&e.addEventListener(EventType.CHANGE,this.boundHandleImageChange_),s==ImageState.IDLE&&(e.load(),s=e.getState()),s==ImageState.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}class RenderEvent extends BaseEvent{constructor(e,s,a,d){super(e),this.inversePixelTransform=s,this.frameState=a,this.context=d}}const rgb={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var xyz={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};xyz.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};xyz.max=xyz.whitepoint[2].D65;xyz.rgb=function(o,e){e=e||xyz.whitepoint[2].E;var s=o[0]/e[0],a=o[1]/e[1],d=o[2]/e[2],b,_,_e;return b=s*3.240969941904521+a*-1.537383177570093+d*-.498610760293,_=s*-.96924363628087+a*1.87596750150772+d*.041555057407175,_e=s*.055630079696993+a*-.20397695888897+d*1.056971514242878,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b=b*12.92,_=_>.0031308?1.055*Math.pow(_,1/2.4)-.055:_=_*12.92,_e=_e>.0031308?1.055*Math.pow(_e,1/2.4)-.055:_e=_e*12.92,b=Math.min(Math.max(0,b),1),_=Math.min(Math.max(0,_),1),_e=Math.min(Math.max(0,_e),1),[b*255,_*255,_e*255]};rgb.xyz=function(o,e){var s=o[0]/255,a=o[1]/255,d=o[2]/255;s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92;var b=s*.41239079926595+a*.35758433938387+d*.18048078840183,_=s*.21263900587151+a*.71516867876775+d*.072192315360733,_e=s*.019330818715591+a*.11919477979462+d*.95053215224966;return e=e||xyz.whitepoint[2].E,[b*e[0],_*e[1],_e*e[2]]};const luv={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(o,e,s){var a,d,b,_,_e,ot,st,ct,ft,mt,bt,wt,Ct;if(b=o[0],_=o[1],_e=o[2],b===0)return[0,0,0];var Rt=.0011070564598794539;return e=e||"D65",s=s||2,ft=xyz.whitepoint[s][e][0],mt=xyz.whitepoint[s][e][1],bt=xyz.whitepoint[s][e][2],wt=4*ft/(ft+15*mt+3*bt),Ct=9*mt/(ft+15*mt+3*bt),a=_/(13*b)+wt||0,d=_e/(13*b)+Ct||0,st=b>8?mt*Math.pow((b+16)/116,3):mt*b*Rt,ot=st*9*a/(4*d)||0,ct=st*(12-3*a-20*d)/(4*d)||0,[ot,st,ct]}};xyz.luv=function(o,e,s){var a,d,b,_,_e,ot,st,ct,ft,mt,bt,wt,Ct,Rt=.008856451679035631,It=903.2962962962961;e=e||"D65",s=s||2,ft=xyz.whitepoint[s][e][0],mt=xyz.whitepoint[s][e][1],bt=xyz.whitepoint[s][e][2],wt=4*ft/(ft+15*mt+3*bt),Ct=9*mt/(ft+15*mt+3*bt),ot=o[0],st=o[1],ct=o[2],a=4*ot/(ot+15*st+3*ct)||0,d=9*st/(ot+15*st+3*ct)||0;var Pt=st/mt;return b=Pt<=Rt?It*Pt:116*Math.pow(Pt,1/3)-16,_=13*b*(a-wt),_e=13*b*(d-Ct),[b,_,_e]};var lchuv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(o){var e=o[0],s=o[1],a=o[2],d,b,_;return _=a/360*2*Math.PI,d=s*Math.cos(_),b=s*Math.sin(_),[e,d,b]},xyz:function(o){return luv.xyz(lchuv.luv(o))}};luv.lchuv=function(o){var e=o[0],s=o[1],a=o[2],d=Math.sqrt(s*s+a*a),b=Math.atan2(a,s),_=b*360/2/Math.PI;return _<0&&(_+=360),[e,d,_]};xyz.lchuv=function(o){return luv.lchuv(xyz.luv(o))};const names$z={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$3(o){var ct,ft;var e,s=[],a=1,d;if(typeof o=="number")return{space:"rgb",values:[o>>>16,(o&65280)>>>8,o&255],alpha:1};if(typeof o=="number")return{space:"rgb",values:[o>>>16,(o&65280)>>>8,o&255],alpha:1};if(o=String(o).toLowerCase(),names$z[o])s=names$z[o].slice(),d="rgb";else if(o==="transparent")a=0,d="rgb",s=[0,0,0];else if(o[0]==="#"){var b=o.slice(1),_=b.length,_e=_<=4;a=1,_e?(s=[parseInt(b[0]+b[0],16),parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16)],_===4&&(a=parseInt(b[3]+b[3],16)/255)):(s=[parseInt(b[0]+b[1],16),parseInt(b[2]+b[3],16),parseInt(b[4]+b[5],16)],_===8&&(a=parseInt(b[6]+b[7],16)/255)),s[0]||(s[0]=0),s[1]||(s[1]=0),s[2]||(s[2]=0),d="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(o)){var ot=e[1];d=ot.replace(/a$/,"");var st=d==="cmyk"?4:d==="gray"?1:3;s=e[2].trim().split(/\s*[,\/]\s*|\s+/),d==="color"&&(d=s.shift()),s=s.map(function(mt,bt){if(mt[mt.length-1]==="%")return mt=parseFloat(mt)/100,bt===3?mt:d==="rgb"?mt*255:d[0]==="h"||d[0]==="l"&&!bt?mt*100:d==="lab"?mt*125:d==="lch"?bt<2?mt*150:mt*360:d[0]==="o"&&!bt?mt:d==="oklab"?mt*.4:d==="oklch"?bt<2?mt*.4:mt*360:mt;if(d[bt]==="h"||bt===2&&d[d.length-1]==="h"){if(baseHues[mt]!==void 0)return baseHues[mt];if(mt.endsWith("deg"))return parseFloat(mt);if(mt.endsWith("turn"))return parseFloat(mt)*360;if(mt.endsWith("grad"))return parseFloat(mt)*360/400;if(mt.endsWith("rad"))return parseFloat(mt)*180/Math.PI}return mt==="none"?0:parseFloat(mt)}),a=s.length>st?s.pop():1}else/[0-9](?:\s|\/|,)/.test(o)&&(s=o.match(/([0-9]+)/g).map(function(mt){return parseFloat(mt)}),d=((ft=(ct=o.match(/([a-z])/ig))==null?void 0:ct.join(""))==null?void 0:ft.toLowerCase())||"rgb");return{space:d,values:s,alpha:a}}const hsl={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(o){var e=o[0]/360,s=o[1]/100,a=o[2]/100,d,b,_,_e,ot,st=0;if(s===0)return ot=a*255,[ot,ot,ot];for(b=a<.5?a*(1+s):a+s-a*s,d=2*a-b,_e=[0,0,0];st<3;)_=e+1/3*-(st-1),_<0?_++:_>1&&_--,ot=6*_<1?d+(b-d)*6*_:2*_<1?b:3*_<2?d+(b-d)*(2/3-_)*6:d,_e[st++]=ot*255;return _e}};rgb.hsl=function(o){var e=o[0]/255,s=o[1]/255,a=o[2]/255,d=Math.min(e,s,a),b=Math.max(e,s,a),_=b-d,_e,ot,st;return b===d?_e=0:e===b?_e=(s-a)/_:s===b?_e=2+(a-e)/_:a===b&&(_e=4+(e-s)/_),_e=Math.min(_e*60,360),_e<0&&(_e+=360),st=(d+b)/2,b===d?ot=0:st<=.5?ot=_/(b+d):ot=_/(2-b-d),[_e,ot*100,st*100]};function rgba$1(o){Array.isArray(o)&&o.raw&&(o=String.raw(...arguments)),o instanceof Number&&(o=+o);var e,s=parse$3(o);if(!s.space)return[];const a=s.space[0]==="h"?hsl.min:rgb.min,d=s.space[0]==="h"?hsl.max:rgb.max;return e=Array(3),e[0]=Math.min(Math.max(s.values[0],a[0]),d[0]),e[1]=Math.min(Math.max(s.values[1],a[1]),d[1]),e[2]=Math.min(Math.max(s.values[2],a[2]),d[2]),s.space[0]==="h"&&(e=hsl.rgb(e)),e.push(Math.min(Math.max(s.alpha,0),1)),e}function asString(o){return typeof o=="string"?o:toString$2(o)}const MAX_CACHE_SIZE=1024,cache={};let cacheSize=0;function withAlpha(o){if(o.length===4)return o;const e=o.slice();return e[3]=1,e}function rgbaToLcha(o){const e=xyz.lchuv(rgb.xyz(o));return e[3]=o[3],e}function lchaToRgba(o){const e=xyz.rgb(lchuv.xyz(o));return e[3]=o[3],e}function fromString$1(o){if(cache.hasOwnProperty(o))return cache[o];if(cacheSize>=MAX_CACHE_SIZE){let s=0;for(const a in cache)s++&3||(delete cache[a],--cacheSize)}const e=rgba$1(o);if(e.length!==4)throw new Error('Failed to parse "'+o+'" as color');for(const s of e)if(isNaN(s))throw new Error('Failed to parse "'+o+'" as color');return normalize$1(e),cache[o]=e,++cacheSize,e}function asArray(o){return Array.isArray(o)?o:fromString$1(o)}function normalize$1(o){return o[0]=clamp(o[0]+.5|0,0,255),o[1]=clamp(o[1]+.5|0,0,255),o[2]=clamp(o[2]+.5|0,0,255),o[3]=clamp(o[3],0,1),o}function toString$2(o){let e=o[0];e!=(e|0)&&(e=e+.5|0);let s=o[1];s!=(s|0)&&(s=s+.5|0);let a=o[2];a!=(a|0)&&(a=a+.5|0);const d=o[3]===void 0?1:Math.round(o[3]*100)/100;return"rgba("+e+","+s+","+a+","+d+")"}function isStringColor(o){try{return fromString$1(o),!0}catch{return!1}}const canvasPool$2=[];let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class CanvasLayerRenderer extends LayerRenderer{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=create(),this.pixelTransform=create(),this.inversePixelTransform=create(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,s,a){pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);let d;try{pixelContext.drawImage(e,s,a,1,1,0,0,1,1),d=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return d}getBackground(e){let a=this.getLayer().getBackground();return typeof a=="function"&&(a=a(e.viewState.resolution)),a||void 0}useContainer(e,s,a){const d=this.getLayer().getClassName();let b,_;if(e&&e.className===d&&(!a||e&&e.style.backgroundColor&&equals$2(asArray(e.style.backgroundColor),asArray(a)))){const _e=e.firstElementChild;_e instanceof HTMLCanvasElement&&(_=_e.getContext("2d"))}if(_&&_.canvas.style.transform===s?(this.container=e,this.context=_,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){b=document.createElement("div"),b.className=d;let _e=b.style;_e.position="absolute",_e.width="100%",_e.height="100%",_=createCanvasContext2D();const ot=_.canvas;b.appendChild(ot),_e=ot.style,_e.position="absolute",_e.left="0",_e.transformOrigin="top left",this.container=b,this.context=_}!this.containerReused&&a&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=a)}clipUnrotated(e,s,a){const d=getTopLeft(a),b=getTopRight(a),_=getBottomRight(a),_e=getBottomLeft(a);apply$1(s.coordinateToPixelTransform,d),apply$1(s.coordinateToPixelTransform,b),apply$1(s.coordinateToPixelTransform,_),apply$1(s.coordinateToPixelTransform,_e);const ot=this.inversePixelTransform;apply$1(ot,d),apply$1(ot,b),apply$1(ot,_),apply$1(ot,_e),e.save(),e.beginPath(),e.moveTo(Math.round(d[0]),Math.round(d[1])),e.lineTo(Math.round(b[0]),Math.round(b[1])),e.lineTo(Math.round(_[0]),Math.round(_[1])),e.lineTo(Math.round(_e[0]),Math.round(_e[1])),e.clip()}dispatchRenderEvent_(e,s,a){const d=this.getLayer();if(d.hasListener(e)){const b=new RenderEvent(e,this.inversePixelTransform,a,s);d.dispatchEvent(b)}}preRender(e,s){this.frameState=s,this.dispatchRenderEvent_(RenderEventType.PRERENDER,e,s)}postRender(e,s){this.dispatchRenderEvent_(RenderEventType.POSTRENDER,e,s)}getRenderTransform(e,s,a,d,b,_,_e){const ot=b/2,st=_/2,ct=d/s,ft=-ct,mt=-e[0]+_e,bt=-e[1];return compose(this.tempTransform,ot,st,ct,ft,-a,mt,bt)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Tile extends Target{constructor(e,s,a){super(),a=a||{},this.tileCoord=e,this.state=s,this.interimTile=null,this.key="",this.transition_=a.transition===void 0?250:a.transition,this.transitionStarts_={},this.interpolate=!!a.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.state===TileState.ERROR&&this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==TileState.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let s=this;do{if(e.getState()==TileState.LOADED){e.interimTile=null;break}e.getState()==TileState.LOADING?s=e:e.getState()==TileState.IDLE?s.interimTile=e.interimTile:s=e,e=s.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==TileState.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){abstract()}getAlpha(e,s){if(!this.transition_)return 1;let a=this.transitionStarts_[e];if(!a)a=s,this.transitionStarts_[e]=a;else if(a===-1)return 1;const d=s-a+1e3/60;return d>=this.transition_?1:easeIn(d/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}function listenImage(o,e,s){const a=o;let d=!0,b=!1,_=!1;const _e=[listenOnce(a,EventType.LOAD,function(){_=!0,b||e()})];return a.src&&IMAGE_DECODE?(b=!0,a.decode().then(function(){d&&e()}).catch(function(ot){d&&(_?e():s())})):_e.push(listenOnce(a,EventType.ERROR,s)),function(){d=!1,_e.forEach(unlistenByKey)}}function load(o,e){return new Promise((s,a)=>{function d(){_(),s(o)}function b(){_(),a(new Error("Image load error"))}function _(){o.removeEventListener("load",d),o.removeEventListener("error",b)}o.addEventListener("load",d),o.addEventListener("error",b)})}function decodeFallback(o,e){return e&&(o.src=e),o.src&&IMAGE_DECODE?new Promise((s,a)=>o.decode().then(()=>s(o)).catch(d=>o.complete&&o.width?s(o):a(d))):load(o)}class ImageTile extends Tile{constructor(e,s,a,d,b,_){super(e,s,_),this.crossOrigin_=d,this.src_=a,this.key=a,this.image_=new Image,d!==null&&(this.image_.crossOrigin=d),this.unlisten_=null,this.tileLoadFunction_=b}getImage(){return this.image_}setImage(e){this.image_=e,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function getBlankImage(){const o=createCanvasContext2D(1,1);return o.fillStyle="rgba(0,0,0,0)",o.fillRect(0,0,1,1),o.canvas}const ERROR_THRESHOLD=.5,MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(e,s,a,d,b,_){this.sourceProj_=e,this.targetProj_=s;let _e={};const ot=getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(Pt){const Tt=Pt[0]+"/"+Pt[1];return _e[Tt]||(_e[Tt]=ot(Pt)),_e[Tt]},this.maxSourceExtent_=d,this.errorThresholdSquared_=b*b,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!d&&!!this.sourceProj_.getExtent()&&getWidth(d)>=getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const st=getTopLeft(a),ct=getTopRight(a),ft=getBottomRight(a),mt=getBottomLeft(a),bt=this.transformInv_(st),wt=this.transformInv_(ct),Ct=this.transformInv_(ft),Rt=this.transformInv_(mt),It=MAX_SUBDIVISION+(_?Math.max(0,Math.ceil(Math.log2(getArea(a)/(_*_*256*256)))):0);if(this.addQuad_(st,ct,ft,mt,bt,wt,Ct,Rt,It),this.wrapsXInSource_){let Pt=1/0;this.triangles_.forEach(function(Tt,Gt,Jt){Pt=Math.min(Pt,Tt.source[0][0],Tt.source[1][0],Tt.source[2][0])}),this.triangles_.forEach(Tt=>{if(Math.max(Tt.source[0][0],Tt.source[1][0],Tt.source[2][0])-Pt>this.sourceWorldWidth_/2){const Gt=[[Tt.source[0][0],Tt.source[0][1]],[Tt.source[1][0],Tt.source[1][1]],[Tt.source[2][0],Tt.source[2][1]]];Gt[0][0]-Pt>this.sourceWorldWidth_/2&&(Gt[0][0]-=this.sourceWorldWidth_),Gt[1][0]-Pt>this.sourceWorldWidth_/2&&(Gt[1][0]-=this.sourceWorldWidth_),Gt[2][0]-Pt>this.sourceWorldWidth_/2&&(Gt[2][0]-=this.sourceWorldWidth_);const Jt=Math.min(Gt[0][0],Gt[1][0],Gt[2][0]);Math.max(Gt[0][0],Gt[1][0],Gt[2][0])-Jt<this.sourceWorldWidth_/2&&(Tt.source=Gt)}})}_e={}}addTriangle_(e,s,a,d,b,_){this.triangles_.push({source:[d,b,_],target:[e,s,a]})}addQuad_(e,s,a,d,b,_,_e,ot,st){const ct=boundingExtent([b,_,_e,ot]),ft=this.sourceWorldWidth_?getWidth(ct)/this.sourceWorldWidth_:null,mt=this.sourceWorldWidth_,bt=this.sourceProj_.canWrapX()&&ft>.5&&ft<1;let wt=!1;if(st>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const Rt=boundingExtent([e,s,a,d]);wt=getWidth(Rt)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||wt}!bt&&this.sourceProj_.isGlobal()&&ft&&(wt=ft>MAX_TRIANGLE_WIDTH||wt)}if(!wt&&this.maxSourceExtent_&&isFinite(ct[0])&&isFinite(ct[1])&&isFinite(ct[2])&&isFinite(ct[3])&&!intersects$1(ct,this.maxSourceExtent_))return;let Ct=0;if(!wt&&(!isFinite(b[0])||!isFinite(b[1])||!isFinite(_[0])||!isFinite(_[1])||!isFinite(_e[0])||!isFinite(_e[1])||!isFinite(ot[0])||!isFinite(ot[1]))){if(st>0)wt=!0;else if(Ct=(!isFinite(b[0])||!isFinite(b[1])?8:0)+(!isFinite(_[0])||!isFinite(_[1])?4:0)+(!isFinite(_e[0])||!isFinite(_e[1])?2:0)+(!isFinite(ot[0])||!isFinite(ot[1])?1:0),Ct!=1&&Ct!=2&&Ct!=4&&Ct!=8)return}if(st>0){if(!wt){const Rt=[(e[0]+a[0])/2,(e[1]+a[1])/2],It=this.transformInv_(Rt);let Pt;bt?Pt=(modulo(b[0],mt)+modulo(_e[0],mt))/2-modulo(It[0],mt):Pt=(b[0]+_e[0])/2-It[0];const Tt=(b[1]+_e[1])/2-It[1];wt=Pt*Pt+Tt*Tt>this.errorThresholdSquared_}if(wt){if(Math.abs(e[0]-a[0])<=Math.abs(e[1]-a[1])){const Rt=[(s[0]+a[0])/2,(s[1]+a[1])/2],It=this.transformInv_(Rt),Pt=[(d[0]+e[0])/2,(d[1]+e[1])/2],Tt=this.transformInv_(Pt);this.addQuad_(e,s,Rt,Pt,b,_,It,Tt,st-1),this.addQuad_(Pt,Rt,a,d,Tt,It,_e,ot,st-1)}else{const Rt=[(e[0]+s[0])/2,(e[1]+s[1])/2],It=this.transformInv_(Rt),Pt=[(a[0]+d[0])/2,(a[1]+d[1])/2],Tt=this.transformInv_(Pt);this.addQuad_(e,Rt,Pt,d,b,It,Tt,ot,st-1),this.addQuad_(Rt,s,a,Pt,It,_,_e,Tt,st-1)}return}}if(bt){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}Ct&11||this.addTriangle_(e,a,d,b,_e,ot),Ct&14||this.addTriangle_(e,a,s,b,_e,_),Ct&&(Ct&13||this.addTriangle_(s,d,e,_,ot,b),Ct&7||this.addTriangle_(s,d,a,_,ot,_e))}calculateSourceExtent(){const e=createEmpty();return this.triangles_.forEach(function(s,a,d){const b=s.source;extendCoordinate(e,b[0]),extendCoordinate(e,b[1]),extendCoordinate(e,b[2])}),e}getTriangles(){return this.triangles_}}let brokenDiagonalRendering_;const canvasPool$1=[];function drawTestTriangle(o,e,s,a,d){o.beginPath(),o.moveTo(0,0),o.lineTo(e,s),o.lineTo(a,d),o.closePath(),o.save(),o.clip(),o.fillRect(0,0,Math.max(e,a)+1,Math.max(s,d)),o.restore()}function verifyBrokenDiagonalRendering(o,e){return Math.abs(o[e*4]-210)>2||Math.abs(o[e*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const o=createCanvasContext2D(6,6,canvasPool$1);o.globalCompositeOperation="lighter",o.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(o,4,5,4,0),drawTestTriangle(o,4,5,0,5);const e=o.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(e,0)||verifyBrokenDiagonalRendering(e,4)||verifyBrokenDiagonalRendering(e,8),releaseCanvas(o),canvasPool$1.push(o.canvas)}return brokenDiagonalRendering_}function calculateSourceResolution(o,e,s,a){const d=transform$1(s,e,o);let b=getPointResolution(e,a,s);const _=e.getMetersPerUnit();_!==void 0&&(b*=_);const _e=o.getMetersPerUnit();_e!==void 0&&(b/=_e);const ot=o.getExtent();if(!ot||containsCoordinate(ot,d)){const st=getPointResolution(o,b,d)/b;isFinite(st)&&st>0&&(b/=st)}return b}function calculateSourceExtentResolution(o,e,s,a){const d=getCenter(s);let b=calculateSourceResolution(o,e,d,a);return(!isFinite(b)||b<=0)&&forEachCorner(s,function(_){return b=calculateSourceResolution(o,e,_,a),isFinite(b)&&b>0}),b}function render(o,e,s,a,d,b,_,_e,ot,st,ct,ft,mt){const bt=createCanvasContext2D(Math.round(s*o),Math.round(s*e),canvasPool$1);if(ft||(bt.imageSmoothingEnabled=!1),ot.length===0)return bt.canvas;bt.scale(s,s);function wt(Pt){return Math.round(Pt*s)/s}bt.globalCompositeOperation="lighter";const Ct=createEmpty();ot.forEach(function(Pt,Tt,Gt){extend$3(Ct,Pt.extent)});let Rt;{const Pt=getWidth(Ct),Tt=getHeight(Ct);Rt=createCanvasContext2D(Math.round(s*Pt/a),Math.round(s*Tt/a),canvasPool$1),ft||(Rt.imageSmoothingEnabled=!1);const Gt=s/a;ot.forEach(function(Jt,qt,Nt){const Qt=Jt.extent[0]-Ct[0],fn=-(Jt.extent[3]-Ct[3]),Mn=getWidth(Jt.extent),ln=getHeight(Jt.extent);Jt.image.width>0&&Jt.image.height>0&&Rt.drawImage(Jt.image,st,st,Jt.image.width-2*st,Jt.image.height-2*st,Qt*Gt,fn*Gt,Mn*Gt,ln*Gt)})}const It=getTopLeft(_);return _e.getTriangles().forEach(function(Pt,Tt,Gt){const Jt=Pt.source,qt=Pt.target;let Nt=Jt[0][0],Qt=Jt[0][1],fn=Jt[1][0],Mn=Jt[1][1],ln=Jt[2][0],Wt=Jt[2][1];const so=wt((qt[0][0]-It[0])/b),pn=wt(-(qt[0][1]-It[1])/b),hn=wt((qt[1][0]-It[0])/b),Mt=wt(-(qt[1][1]-It[1])/b),Hn=wt((qt[2][0]-It[0])/b),cn=wt(-(qt[2][1]-It[1])/b),fo=Nt,Fn=Qt;Nt=0,Qt=0,fn-=fo,Mn-=Fn,ln-=fo,Wt-=Fn;const Tn=[[fn,Mn,0,0,hn-so],[ln,Wt,0,0,Hn-so],[0,0,fn,Mn,Mt-pn],[0,0,ln,Wt,cn-pn]],qn=solveLinearSystem(Tn);if(!qn)return;if(bt.save(),bt.beginPath(),isBrokenDiagonalRendering()||!ft){bt.moveTo(hn,Mt);const oo=4,Mo=so-hn,Dn=pn-Mt;for(let xo=0;xo<oo;xo++)bt.lineTo(hn+wt((xo+1)*Mo/oo),Mt+wt(xo*Dn/(oo-1))),xo!=oo-1&&bt.lineTo(hn+wt((xo+1)*Mo/oo),Mt+wt((xo+1)*Dn/(oo-1)));bt.lineTo(Hn,cn)}else bt.moveTo(hn,Mt),bt.lineTo(so,pn),bt.lineTo(Hn,cn);bt.clip(),bt.transform(qn[0],qn[2],qn[1],qn[3],so,pn),bt.translate(Ct[0]-fo,Ct[3]-Fn);let nr;if(Rt)nr=Rt.canvas,bt.scale(a/s,-a/s);else{const oo=ot[0],Mo=oo.extent;nr=oo.image,bt.scale(getWidth(Mo)/nr.width,-getHeight(Mo)/nr.height)}bt.drawImage(nr,0,0),bt.restore()}),Rt&&(releaseCanvas(Rt),canvasPool$1.push(Rt.canvas)),ct&&(bt.save(),bt.globalCompositeOperation="source-over",bt.strokeStyle="black",bt.lineWidth=1,_e.getTriangles().forEach(function(Pt,Tt,Gt){const Jt=Pt.target,qt=(Jt[0][0]-It[0])/b,Nt=-(Jt[0][1]-It[1])/b,Qt=(Jt[1][0]-It[0])/b,fn=-(Jt[1][1]-It[1])/b,Mn=(Jt[2][0]-It[0])/b,ln=-(Jt[2][1]-It[1])/b;bt.beginPath(),bt.moveTo(Qt,fn),bt.lineTo(qt,Nt),bt.lineTo(Mn,ln),bt.closePath(),bt.stroke()}),bt.restore()),bt.canvas}class ReprojTile extends Tile{constructor(e,s,a,d,b,_,_e,ot,st,ct,ft,mt){super(b,TileState.IDLE,mt),this.renderEdges_=ft!==void 0?ft:!1,this.pixelRatio_=_e,this.gutter_=ot,this.canvas_=null,this.sourceTileGrid_=s,this.targetTileGrid_=d,this.wrappedTileCoord_=_||b,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const bt=d.getTileCoordExtent(this.wrappedTileCoord_),wt=this.targetTileGrid_.getExtent();let Ct=this.sourceTileGrid_.getExtent();const Rt=wt?getIntersection(bt,wt):bt;if(getArea(Rt)===0){this.state=TileState.EMPTY;return}const It=e.getExtent();It&&(Ct?Ct=getIntersection(Ct,It):Ct=It);const Pt=d.getResolution(this.wrappedTileCoord_[0]),Tt=calculateSourceExtentResolution(e,a,Rt,Pt);if(!isFinite(Tt)||Tt<=0){this.state=TileState.EMPTY;return}const Gt=ct!==void 0?ct:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(e,a,Rt,Ct,Tt*Gt,Pt),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=s.getZForResolution(Tt);let Jt=this.triangulation_.calculateSourceExtent();if(Ct&&(e.canWrapX()?(Jt[1]=clamp(Jt[1],Ct[1],Ct[3]),Jt[3]=clamp(Jt[3],Ct[1],Ct[3])):Jt=getIntersection(Jt,Ct)),!getArea(Jt))this.state=TileState.EMPTY;else{const qt=s.getTileRangeForExtentAndZ(Jt,this.sourceZ_);for(let Nt=qt.minX;Nt<=qt.maxX;Nt++)for(let Qt=qt.minY;Qt<=qt.maxY;Qt++){const fn=st(this.sourceZ_,Nt,Qt,_e);fn&&this.sourceTiles_.push(fn)}this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(s=>{s&&s.getState()==TileState.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(s.tileCoord),image:s.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=TileState.ERROR;else{const s=this.wrappedTileCoord_[0],a=this.targetTileGrid_.getTileSize(s),d=typeof a=="number"?a:a[0],b=typeof a=="number"?a:a[1],_=this.targetTileGrid_.getResolution(s),_e=this.sourceTileGrid_.getResolution(this.sourceZ_),ot=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render(d,b,this.pixelRatio_,_e,this.sourceTileGrid_.getExtent(),_,ot,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(s=>{const a=s.getState();if(a==TileState.IDLE||a==TileState.LOADING){e++;const d=listen(s,EventType.CHANGE,function(b){const _=s.getState();(_==TileState.LOADED||_==TileState.ERROR||_==TileState.EMPTY)&&(unlistenByKey(d),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(d)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(s,a,d){s.getState()==TileState.IDLE&&s.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas(this.canvas_.getContext("2d")),canvasPool$1.push(this.canvas_),this.canvas_=null),super.release()}}class TileRange{constructor(e,s,a,d){this.minX=e,this.maxX=s,this.minY=a,this.maxY=d}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,s){return this.minX<=e&&e<=this.maxX&&this.minY<=s&&s<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function createOrUpdate$1(o,e,s,a,d){return d!==void 0?(d.minX=o,d.maxX=e,d.minY=s,d.maxY=a,d):new TileRange(o,e,s,a)}function hasArea(o){return o[0]>0&&o[1]>0}function scale(o,e,s){return s===void 0&&(s=[0,0]),s[0]=o[0]*e+.5|0,s[1]=o[1]*e+.5|0,s}function toSize(o,e){return Array.isArray(o)?o:(e===void 0?e=[o,o]:(e[0]=o,e[1]=o),e)}class CanvasTileLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=createEmpty(),this.tmpTileRange_=new TileRange(0,0,0,0)}isDrawableTile(e){const s=this.getLayer(),a=e.getState(),d=s.getUseInterimTilesOnError();return a==TileState.LOADED||a==TileState.EMPTY||a==TileState.ERROR&&!d}getTile(e,s,a,d){const b=d.pixelRatio,_=d.viewState.projection,_e=this.getLayer();let st=_e.getSource().getTile(e,s,a,b,_);return st.getState()==TileState.ERROR&&_e.getUseInterimTilesOnError()&&_e.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(st)||(st=st.getInterimTile()),st}getData(e){const s=this.frameState;if(!s)return null;const a=this.getLayer(),d=apply$1(s.pixelToCoordinateTransform,e.slice()),b=a.getExtent();if(b&&!containsCoordinate(b,d))return null;const _=s.pixelRatio,_e=s.viewState.projection,ot=s.viewState,st=a.getRenderSource(),ct=st.getTileGridForProjection(ot.projection),ft=st.getTilePixelRatio(s.pixelRatio);for(let mt=ct.getZForResolution(ot.resolution);mt>=ct.getMinZoom();--mt){const bt=ct.getTileCoordForCoordAndZ(d,mt),wt=st.getTile(mt,bt[1],bt[2],_,_e);if(!(wt instanceof ImageTile||wt instanceof ReprojTile)||wt instanceof ReprojTile&&wt.getState()===TileState.EMPTY)return null;if(wt.getState()!==TileState.LOADED)continue;const Ct=ct.getOrigin(mt),Rt=toSize(ct.getTileSize(mt)),It=ct.getResolution(mt),Pt=Math.floor(ft*((d[0]-Ct[0])/It-bt[1]*Rt[0])),Tt=Math.floor(ft*((Ct[1]-d[1])/It-bt[2]*Rt[1])),Gt=Math.round(ft*st.getGutterForProjection(ot.projection));return this.getImageData(wt.getImage(),Pt+Gt,Tt+Gt)}return null}loadedTileCallback(e,s,a){return this.isDrawableTile(a)?super.loadedTileCallback(e,s,a):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,s){const a=e.layerStatesArray[e.layerIndex],d=e.viewState,b=d.projection,_=d.resolution,_e=d.center,ot=d.rotation,st=e.pixelRatio,ct=this.getLayer(),ft=ct.getSource(),mt=ft.getRevision(),bt=ft.getTileGridForProjection(b),wt=bt.getZForResolution(_,ft.zDirection),Ct=bt.getResolution(wt);let Rt=e.extent;const It=e.viewState.resolution,Pt=ft.getTilePixelRatio(st),Tt=Math.round(getWidth(Rt)/It*st),Gt=Math.round(getHeight(Rt)/It*st),Jt=a.extent&&fromUserExtent(a.extent);Jt&&(Rt=getIntersection(Rt,fromUserExtent(a.extent)));const qt=Ct*Tt/2/Pt,Nt=Ct*Gt/2/Pt,Qt=[_e[0]-qt,_e[1]-Nt,_e[0]+qt,_e[1]+Nt],fn=bt.getTileRangeForExtentAndZ(Rt,wt),Mn={};Mn[wt]={};const ln=this.createLoadedTileFinder(ft,b,Mn),Wt=this.tmpExtent,so=this.tmpTileRange_;this.newTiles_=!1;const pn=ot?getRotatedViewport(d.center,It,ot,e.size):void 0;for(let nr=fn.minX;nr<=fn.maxX;++nr)for(let oo=fn.minY;oo<=fn.maxY;++oo){if(ot&&!bt.tileCoordIntersectsViewport([wt,nr,oo],pn))continue;const Mo=this.getTile(wt,nr,oo,e);if(this.isDrawableTile(Mo)){const Xt=getUid(this);if(Mo.getState()==TileState.LOADED){Mn[wt][Mo.tileCoord.toString()]=Mo;let Ur=Mo.inTransition(Xt);Ur&&a.opacity!==1&&(Mo.endTransition(Xt),Ur=!1),!this.newTiles_&&(Ur||!this.renderedTiles.includes(Mo))&&(this.newTiles_=!0)}if(Mo.getAlpha(Xt,e.time)===1)continue}const Dn=bt.getTileCoordChildTileRange(Mo.tileCoord,so,Wt);let xo=!1;Dn&&(xo=ln(wt+1,Dn)),xo||bt.forEachTileCoordParentTileRange(Mo.tileCoord,ln,so,Wt)}const hn=Ct/_*st/Pt;compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/st,1/st,ot,-Tt/2,-Gt/2);const Mt=toString$3(this.pixelTransform);this.useContainer(s,Mt,this.getBackground(e));const Hn=this.context,cn=Hn.canvas;makeInverse(this.inversePixelTransform,this.pixelTransform),compose(this.tempTransform,Tt/2,Gt/2,hn,hn,0,-Tt/2,-Gt/2),cn.width!=Tt||cn.height!=Gt?(cn.width=Tt,cn.height=Gt):this.containerReused||Hn.clearRect(0,0,Tt,Gt),Jt&&this.clipUnrotated(Hn,e,Jt),ft.getInterpolate()||(Hn.imageSmoothingEnabled=!1),this.preRender(Hn,e),this.renderedTiles.length=0;let fo=Object.keys(Mn).map(Number);fo.sort(ascending);let Fn,Tn,qn;a.opacity===1&&(!this.containerReused||ft.getOpaque(e.viewState.projection))?fo=fo.reverse():(Fn=[],Tn=[]);for(let nr=fo.length-1;nr>=0;--nr){const oo=fo[nr],Mo=ft.getTilePixelSize(oo,st,b),xo=bt.getResolution(oo)/Ct,Xt=Mo[0]*xo*hn,Ur=Mo[1]*xo*hn,co=bt.getTileCoordForCoordAndZ(getTopLeft(Qt),oo),Vo=bt.getTileCoordExtent(co),yo=apply$1(this.tempTransform,[Pt*(Vo[0]-Qt[0])/Ct,Pt*(Qt[3]-Vo[3])/Ct]),ko=Pt*ft.getGutterForProjection(b),yn=Mn[oo];for(const Cn in yn){const Nn=yn[Cn],sn=Nn.tileCoord,kn=co[1]-sn[1],Ln=Math.round(yo[0]-(kn-1)*Xt),Bn=co[2]-sn[2],Eo=Math.round(yo[1]-(Bn-1)*Ur),Wn=Math.round(yo[0]-kn*Xt),Rn=Math.round(yo[1]-Bn*Ur),Qn=Ln-Wn,vo=Eo-Rn,Gn=wt===oo,ro=Gn&&Nn.getAlpha(getUid(this),e.time)!==1;let Co=!1;if(!ro)if(Fn){qn=[Wn,Rn,Wn+Qn,Rn,Wn+Qn,Rn+vo,Wn,Rn+vo];for(let Do=0,Mr=Fn.length;Do<Mr;++Do)if(wt!==oo&&oo<Tn[Do]){const ar=Fn[Do];intersects$1([Wn,Rn,Wn+Qn,Rn+vo],[ar[0],ar[3],ar[4],ar[7]])&&(Co||(Hn.save(),Co=!0),Hn.beginPath(),Hn.moveTo(qn[0],qn[1]),Hn.lineTo(qn[2],qn[3]),Hn.lineTo(qn[4],qn[5]),Hn.lineTo(qn[6],qn[7]),Hn.moveTo(ar[6],ar[7]),Hn.lineTo(ar[4],ar[5]),Hn.lineTo(ar[2],ar[3]),Hn.lineTo(ar[0],ar[1]),Hn.clip())}Fn.push(qn),Tn.push(oo)}else Hn.clearRect(Wn,Rn,Qn,vo);this.drawTileImage(Nn,e,Wn,Rn,Qn,vo,ko,Gn),Fn&&!ro?(Co&&Hn.restore(),this.renderedTiles.unshift(Nn)):this.renderedTiles.push(Nn),this.updateUsedTiles(e.usedTiles,ft,Nn)}}return this.renderedRevision=mt,this.renderedResolution=Ct,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,Qt),this.renderedExtent_=Qt,this.renderedPixelRatio=st,this.renderedProjection=b,this.manageTilePyramid(e,ft,bt,st,b,Rt,wt,ct.getPreload()),this.scheduleExpireCache(e,ft),this.postRender(Hn,e),a.extent&&Hn.restore(),Hn.imageSmoothingEnabled=!0,Mt!==cn.style.transform&&(cn.style.transform=Mt),this.container}drawTileImage(e,s,a,d,b,_,_e,ot){const st=this.getTileImage(e);if(!st)return;const ct=getUid(this),ft=s.layerStatesArray[s.layerIndex],mt=ft.opacity*(ot?e.getAlpha(ct,s.time):1),bt=mt!==this.context.globalAlpha;bt&&(this.context.save(),this.context.globalAlpha=mt),this.context.drawImage(st,_e,_e,st.width-2*_e,st.height-2*_e,a,d,b,_),bt&&this.context.restore(),mt!==ft.opacity?s.animate=!0:ot&&e.endTransition(ct)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,s){if(s.canExpireCache()){const a=(function(d,b,_){const _e=getUid(d);_e in _.usedTiles&&d.expireCache(_.viewState.projection,_.usedTiles[_e])}).bind(null,s);e.postRenderFunctions.push(a)}}updateUsedTiles(e,s,a){const d=getUid(s);d in e||(e[d]={}),e[d][a.getKey()]=!0}manageTilePyramid(e,s,a,d,b,_,_e,ot,st){const ct=getUid(s);ct in e.wantedTiles||(e.wantedTiles[ct]={});const ft=e.wantedTiles[ct],mt=e.tileQueue,bt=a.getMinZoom(),wt=e.viewState.rotation,Ct=wt?getRotatedViewport(e.viewState.center,e.viewState.resolution,wt,e.size):void 0;let Rt=0,It,Pt,Tt,Gt,Jt,qt;for(qt=bt;qt<=_e;++qt)for(Pt=a.getTileRangeForExtentAndZ(_,qt,Pt),Tt=a.getResolution(qt),Gt=Pt.minX;Gt<=Pt.maxX;++Gt)for(Jt=Pt.minY;Jt<=Pt.maxY;++Jt)wt&&!a.tileCoordIntersectsViewport([qt,Gt,Jt],Ct)||(_e-qt<=ot?(++Rt,It=s.getTile(qt,Gt,Jt,d,b),It.getState()==TileState.IDLE&&(ft[It.getKey()]=!0,mt.isKeyQueued(It.getKey())||mt.enqueue([It,ct,a.getTileCoordCenter(It.tileCoord),Tt])),st!==void 0&&st(It)):s.useTile(qt,Gt,Jt,b));s.updateCacheSize(Rt,b)}}class TileLayer extends BaseTileLayer{constructor(e){super(e)}createRenderer(){return new CanvasTileLayerRenderer(this)}}var LoggerByDefault={getLogger:function(o){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var s=o||"default";return loglevelExports.getLogger(s)}},MessagesResources={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(o,e){if(Object.keys(arguments).length===0)return"Message indefined !";var s=Array.prototype.slice.call(arguments),a=s.shift(),d=s,b=this[a];try{Array.isArray(d)&&d.length>0?b=b.replace("%var%",d.join(" - ")):b=b.replace("%var%","%var% (not specified)")}catch{}return b}},Helper={normalyzeParameters:function(o){var e=null;if(o){var s=[];for(var a in o)if(o.hasOwnProperty(a)){var d=o[a];d||(d=""),s.push(a+"="+d)}e=s.join("&")}return e},normalyzeUrl:function(o,e,s){var a=o;if(o){if(o.split("?").length-1>=2){var d=o.search(/\?/)+1;a=o.substring(0,d)+o.slice(d).replace(/\?/g,"&")}var b=o.indexOf("?");b===-1&&(a+="?"),b!==-1&&b!==o.length-1&&(a+="&")}return e&&(typeof e=="string"?(e=e.replace("?",""),a+=e):a+=this.normalyzeParameters(e)),s&&(a=encodeURIComponent(a)),a},indent:function(o,e){var s=o||0;return new Array(s+1).join("	")+e}};function commonjsRequire(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var es6Promise={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(o,e){(function(s,a){o.exports=a()})(commonjsGlobal,function(){function s(Rn){var Qn=typeof Rn;return Rn!==null&&(Qn==="object"||Qn==="function")}function a(Rn){return typeof Rn=="function"}var d=void 0;Array.isArray?d=Array.isArray:d=function(Rn){return Object.prototype.toString.call(Rn)==="[object Array]"};var b=d,_=0,_e=void 0,ot=void 0,st=function(Qn,vo){qt[_]=Qn,qt[_+1]=vo,_+=2,_===2&&(ot?ot(Nt):fn())};function ct(Rn){ot=Rn}function ft(Rn){st=Rn}var mt=typeof window<"u"?window:void 0,bt=mt||{},wt=bt.MutationObserver||bt.WebKitMutationObserver,Ct=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",Rt=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function It(){return function(){return process.nextTick(Nt)}}function Pt(){return typeof _e<"u"?function(){_e(Nt)}:Jt()}function Tt(){var Rn=0,Qn=new wt(Nt),vo=document.createTextNode("");return Qn.observe(vo,{characterData:!0}),function(){vo.data=Rn=++Rn%2}}function Gt(){var Rn=new MessageChannel;return Rn.port1.onmessage=Nt,function(){return Rn.port2.postMessage(0)}}function Jt(){var Rn=setTimeout;return function(){return Rn(Nt,1)}}var qt=new Array(1e3);function Nt(){for(var Rn=0;Rn<_;Rn+=2){var Qn=qt[Rn],vo=qt[Rn+1];Qn(vo),qt[Rn]=void 0,qt[Rn+1]=void 0}_=0}function Qt(){try{var Rn=Function("return this")().require("vertx");return _e=Rn.runOnLoop||Rn.runOnContext,Pt()}catch{return Jt()}}var fn=void 0;Ct?fn=It():wt?fn=Tt():Rt?fn=Gt():mt===void 0&&typeof commonjsRequire=="function"?fn=Qt():fn=Jt();function Mn(Rn,Qn){var vo=this,Gn=new this.constructor(so);Gn[Wt]===void 0&&ko(Gn);var ro=vo._state;if(ro){var Co=arguments[ro-1];st(function(){return Ur(ro,Gn,Co,vo._result)})}else xo(vo,Gn,Rn,Qn);return Gn}function ln(Rn){var Qn=this;if(Rn&&typeof Rn=="object"&&Rn.constructor===Qn)return Rn;var vo=new Qn(so);return nr(vo,Rn),vo}var Wt=Math.random().toString(36).substring(2);function so(){}var pn=void 0,hn=1,Mt=2;function Hn(){return new TypeError("You cannot resolve a promise with itself")}function cn(){return new TypeError("A promises callback cannot return that same promise.")}function fo(Rn,Qn,vo,Gn){try{Rn.call(Qn,vo,Gn)}catch(ro){return ro}}function Fn(Rn,Qn,vo){st(function(Gn){var ro=!1,Co=fo(vo,Qn,function(Do){ro||(ro=!0,Qn!==Do?nr(Gn,Do):Mo(Gn,Do))},function(Do){ro||(ro=!0,Dn(Gn,Do))},"Settle: "+(Gn._label||" unknown promise"));!ro&&Co&&(ro=!0,Dn(Gn,Co))},Rn)}function Tn(Rn,Qn){Qn._state===hn?Mo(Rn,Qn._result):Qn._state===Mt?Dn(Rn,Qn._result):xo(Qn,void 0,function(vo){return nr(Rn,vo)},function(vo){return Dn(Rn,vo)})}function qn(Rn,Qn,vo){Qn.constructor===Rn.constructor&&vo===Mn&&Qn.constructor.resolve===ln?Tn(Rn,Qn):vo===void 0?Mo(Rn,Qn):a(vo)?Fn(Rn,Qn,vo):Mo(Rn,Qn)}function nr(Rn,Qn){if(Rn===Qn)Dn(Rn,Hn());else if(s(Qn)){var vo=void 0;try{vo=Qn.then}catch(Gn){Dn(Rn,Gn);return}qn(Rn,Qn,vo)}else Mo(Rn,Qn)}function oo(Rn){Rn._onerror&&Rn._onerror(Rn._result),Xt(Rn)}function Mo(Rn,Qn){Rn._state===pn&&(Rn._result=Qn,Rn._state=hn,Rn._subscribers.length!==0&&st(Xt,Rn))}function Dn(Rn,Qn){Rn._state===pn&&(Rn._state=Mt,Rn._result=Qn,st(oo,Rn))}function xo(Rn,Qn,vo,Gn){var ro=Rn._subscribers,Co=ro.length;Rn._onerror=null,ro[Co]=Qn,ro[Co+hn]=vo,ro[Co+Mt]=Gn,Co===0&&Rn._state&&st(Xt,Rn)}function Xt(Rn){var Qn=Rn._subscribers,vo=Rn._state;if(Qn.length!==0){for(var Gn=void 0,ro=void 0,Co=Rn._result,Do=0;Do<Qn.length;Do+=3)Gn=Qn[Do],ro=Qn[Do+vo],Gn?Ur(vo,Gn,ro,Co):ro(Co);Rn._subscribers.length=0}}function Ur(Rn,Qn,vo,Gn){var ro=a(vo),Co=void 0,Do=void 0,Mr=!0;if(ro){try{Co=vo(Gn)}catch(ar){Mr=!1,Do=ar}if(Qn===Co){Dn(Qn,cn());return}}else Co=Gn;Qn._state!==pn||(ro&&Mr?nr(Qn,Co):Mr===!1?Dn(Qn,Do):Rn===hn?Mo(Qn,Co):Rn===Mt&&Dn(Qn,Co))}function co(Rn,Qn){try{Qn(function(Gn){nr(Rn,Gn)},function(Gn){Dn(Rn,Gn)})}catch(vo){Dn(Rn,vo)}}var Vo=0;function yo(){return Vo++}function ko(Rn){Rn[Wt]=Vo++,Rn._state=void 0,Rn._result=void 0,Rn._subscribers=[]}function yn(){return new Error("Array Methods must be provided an Array")}var Cn=function(){function Rn(Qn,vo){this._instanceConstructor=Qn,this.promise=new Qn(so),this.promise[Wt]||ko(this.promise),b(vo)?(this.length=vo.length,this._remaining=vo.length,this._result=new Array(this.length),this.length===0?Mo(this.promise,this._result):(this.length=this.length||0,this._enumerate(vo),this._remaining===0&&Mo(this.promise,this._result))):Dn(this.promise,yn())}return Rn.prototype._enumerate=function(vo){for(var Gn=0;this._state===pn&&Gn<vo.length;Gn++)this._eachEntry(vo[Gn],Gn)},Rn.prototype._eachEntry=function(vo,Gn){var ro=this._instanceConstructor,Co=ro.resolve;if(Co===ln){var Do=void 0,Mr=void 0,ar=!1;try{Do=vo.then}catch(us){ar=!0,Mr=us}if(Do===Mn&&vo._state!==pn)this._settledAt(vo._state,Gn,vo._result);else if(typeof Do!="function")this._remaining--,this._result[Gn]=vo;else if(ro===Eo){var xr=new ro(so);ar?Dn(xr,Mr):qn(xr,vo,Do),this._willSettleAt(xr,Gn)}else this._willSettleAt(new ro(function(us){return us(vo)}),Gn)}else this._willSettleAt(Co(vo),Gn)},Rn.prototype._settledAt=function(vo,Gn,ro){var Co=this.promise;Co._state===pn&&(this._remaining--,vo===Mt?Dn(Co,ro):this._result[Gn]=ro),this._remaining===0&&Mo(Co,this._result)},Rn.prototype._willSettleAt=function(vo,Gn){var ro=this;xo(vo,void 0,function(Co){return ro._settledAt(hn,Gn,Co)},function(Co){return ro._settledAt(Mt,Gn,Co)})},Rn}();function Nn(Rn){return new Cn(this,Rn).promise}function sn(Rn){var Qn=this;return b(Rn)?new Qn(function(vo,Gn){for(var ro=Rn.length,Co=0;Co<ro;Co++)Qn.resolve(Rn[Co]).then(vo,Gn)}):new Qn(function(vo,Gn){return Gn(new TypeError("You must pass an array to race."))})}function kn(Rn){var Qn=this,vo=new Qn(so);return Dn(vo,Rn),vo}function Ln(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Bn(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Eo=function(){function Rn(Qn){this[Wt]=yo(),this._result=this._state=void 0,this._subscribers=[],so!==Qn&&(typeof Qn!="function"&&Ln(),this instanceof Rn?co(this,Qn):Bn())}return Rn.prototype.catch=function(vo){return this.then(null,vo)},Rn.prototype.finally=function(vo){var Gn=this,ro=Gn.constructor;return a(vo)?Gn.then(function(Co){return ro.resolve(vo()).then(function(){return Co})},function(Co){return ro.resolve(vo()).then(function(){throw Co})}):Gn.then(vo,vo)},Rn}();Eo.prototype.then=Mn,Eo.all=Nn,Eo.race=sn,Eo.resolve=ln,Eo.reject=kn,Eo._setScheduler=ct,Eo._setAsap=ft,Eo._asap=st;function Wn(){var Rn=void 0;if(typeof commonjsGlobal<"u")Rn=commonjsGlobal;else if(typeof self<"u")Rn=self;else try{Rn=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Qn=Rn.Promise;if(Qn){var vo=null;try{vo=Object.prototype.toString.call(Qn.resolve())}catch{}if(vo==="[object Promise]"&&!Qn.cast)return}Rn.Promise=Eo}return Eo.polyfill=Wn,Eo.Promise=Eo,Eo})})(es6Promise);var es6PromiseExports=es6Promise.exports;const ES6Promise=getDefaultExportFromCjs$2(es6PromiseExports);var XHR={call:function(o){var e=LoggerByDefault.getLogger("XHR");if(e.trace("[XHR::call()]"),ES6Promise.polyfill(),!o.url)throw new Error("missing parameter : url is not defined !");if(!o.method)throw new Error("missing parameter : method is not defined !");o.format||(o.format="text");var s={};switch(s.url=o.url,s.data=o.data?o.data:null,s.method=o.method,s.timeOut=o.timeOut||0,s.scope=o.scope||this,s.proxy=o.proxy||null,s.content=o.content||null,s.headers=o.headers||{referer:"http://localhost"},o.method){case"DELETE":case"GET":break;case"PUT":case"POST":s.content=o.content?o.content:"application/x-www-form-urlencoded",s.headers=o.headers?o.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(o.format){case"text":this.__call(s).then(function(a){e.trace(a),o.onResponse.call(this,a)}).catch(function(a){o.onFailure.call(this,a)});break;case"json":this.__callJSON(s).then(function(a){e.trace(a),o.onResponse.call(this,a)}).catch(function(a){o.onFailure.call(this,a)});break;case"xml":this.__callXML(s).then(function(a){e.trace(a),o.onResponse.call(this,a)}).catch(function(a){o.onFailure.call(this,a)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(o){var e=LoggerByDefault.getLogger("XHR");e.trace("[XHR::__call()]");var s=new Promise(function(a,d){var b=o.method==="POST"||o.method==="PUT"?1:0;o.data&&(typeof o.data=="object"&&Object.keys(o.data).length||typeof o.data=="string"&&o.data.length)&&!b&&(o.url=Helper.normalyzeUrl(o.url,o.data)),e.trace("URL = ",o.url);var _=null;if(typeof window>"u"){var _e=require("node-fetch"),ot={headers:{Referer:"https://localhost"}};return o.data&&typeof o.data=="string"&&b&&(ot={method:o.method,body:o.data,headers:{"Content-Type":o.content,Referer:"https://localhost"}}),_e(o.url,ot).then(function(mt){if(mt.ok)a(mt.text());else{var bt="Errors Occured on Http Request (status : '"+mt.statusText+"' | url : '"+mt.url+"')",wt=mt.status;d({message:bt,status:wt})}}).catch(function(mt){d({message:mt,status:-1})})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),_=new XMLHttpRequest,_.open(o.method,o.url,!0),_.overrideMimeType=o.content;var st=null;o.timeOut>0&&(e.trace("XHR - TimeOut actif !"),st=window.setTimeout(function(){var mt="TimeOut Occured on Http Request with XMLHttpRequest !";d({message:mt,status:-1})},o.timeOut)),b&&(e.trace("data = ",o.data),_.setRequestHeader("Content-type",o.content)),_.onerror=function(mt){console.log(mt),d(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},_.ontimeout=function(mt){console.log(mt),d(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},_.onreadystatechange=function(mt){if(_.readyState===4)if(_.status===200)window.clearTimeout(st),a(_.response);else{var bt="Errors Occured on Http Request (status : '"+mt.target.statusText+"' | url : '"+mt.target.responseURL+"' | response : '"+mt.target.response+"')",wt=mt.target.status;d({message:bt,status:wt})}};var ct=o.data&&b?o.data:null;_.send(ct)}else if(window.XDomainRequest){e.trace("XDomainRequest"),_=new XDomainRequest,_.open(o.method,o.url),_.overrideMimeType=o.content,o.timeOut>0&&(_.timeout=o.timeout,e.trace("XHR - TimeOut actif !")),b&&_.setRequestHeader("Content-type",o.content),_.onerror=function(){d(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},_.ontimeout=function(){d(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},_.onload=function(mt){if(_.status===200)a(_.responseText);else{var bt="Errors Occured on Http Request (status : '"+mt.target.statusText+"' | url : '"+mt.target.responseURL+"')",wt=mt.target.status;d({message:bt,status:wt})}};var ft=o.data&&b?o.data:null;_.send(ft)}else throw new Error("CORS not supported")});return s},__callJSON:function(o){return this.__call(o).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",o.url,e)})},__callXML:function(o){return this.__call(o).then(function(e){var s;if(typeof window>"u"){var a=require("@xmldom/xmldom").DOMParser;s=new a().parseFromString(e,"text/xml")}else if(window.DOMParser){var d=new window.DOMParser;s=d.parseFromString(e,"text/xml")}else s=new window.ActiveXObject("Microsoft.XMLDOM"),s.async=!1,s.loadXML(e);return s}).catch(function(e){console.log("__callXML failed on : ",o.url,e)})}},JSONP={uuid:function(){var o=Math.floor(Date.now());return function(){return o++}}(),call:function(o){var e=LoggerByDefault.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!o)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!o.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(o.timeOut||(e.info("setting 'options.timeOut' default value"),o.timeOut=0),!o.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var s=typeof o.callbackSuffix=="string"?o.callbackSuffix:this.uuid(),a=!1,d=!1,b=o.url.indexOf("callback=");if(b!==-1){a=!0;var _=o.url.indexOf("&",b);_===-1&&(_=o.url.length);var _e=o.url.substring(b+9,_);_e&&(d=!0,o.callbackName=_e,e.info("setting 'options.callbackName' value ("+o.callbackName+") from 'options.url' parameter"))}if(!a){var ot=o.url.indexOf("?");ot===-1?o.url=o.url+"?callback=":ot===o.url.length?o.url=o.url+"callback=":o.url=o.url+"&callback=",e.info("setting callback default key in 'options.url' : "+o.url)}var st=o.callbackName?!0:d;if(d||(o.callbackName||(e.info("setting 'options.callbackName' default value"),o.callbackName="callback",(s||s==="")&&(o.callbackName+=s)),o.url=o.url.replace("callback=","callback="+o.callbackName),e.info("setting callback function name in 'options.url' : "+o.url)),o.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),o.onTimeOut=function(){console.log("TimeOut while invoking url : "+o.url)}),!st){var ct=this,ft=null;o.timeOut>0&&(ft=window.setTimeout(function(){window[o.callbackName]=function(){},o.onTimeOut(),ct._deleteScript(s)},o.timeOut)),window[o.callbackName]=function(mt){window.clearTimeout(ft),o.onResponse(mt),ct._deleteScript(s)}}this._createScript(s,o.url)},_createScript:function(o,e){var s,a=document.getElementById("results"+o);s=document.createElement("script"),s.setAttribute("type","text/javascript"),s.setAttribute("src",e),s.setAttribute("charset","UTF-8"),s.setAttribute("id","results"+o),s.setAttribute("async","true");var d=document.documentElement||document.getElementsByTagName("head")[0];a===null?d.appendChild(s):d.replaceChild(s,a)},_deleteScript:function(o){var e=document.getElementById("results"+o);if(e){var s=e.parentNode||document.documentElement;if(!s)return;s.removeChild(e)}}},Protocol={send:function(o){var e=o||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&o.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(o.protocol==="XHR"||o.format==="json"?e.wrap=!1:o.protocol==="JSONP"&&o.format==="xml"&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var s={};s.output=e.output,s.callback=e.callback,delete s.callback,e.url=Helper.normalyzeUrl(o.url,s)}switch(e.protocol){case"XHR":o.method==="GET"&&o.nocache&&(e.url=Helper.normalyzeUrl(e.url,{t:new Date().getTime()})),XHR.call(e);break;case"JSONP":e.data&&(e.url=Helper.normalyzeUrl(e.url,e.data)),JSONP.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function ErrorService(o){if(!(this instanceof ErrorService))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=o;typeof o=="string"||o instanceof String?(this.message=o,this.status=-1,this.type=ErrorService.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=new Error().stack}ErrorService.TYPE_SRVERR="SERVICE_ERROR";ErrorService.TYPE_USEERR="USAGE_ERROR";ErrorService.TYPE_UNKERR="UNKNOWN_ERROR";ErrorService.prototype=Object.create(Error.prototype,{constructor:{value:ErrorService,writable:!0,configurable:!0}});const name$1="geoportal-access-lib",version$2="3.4.3",date$1="21/08/2024",description$1="French Geoportal resources access library",module$1="src/Gp.js",main="dist/GpServices-src.js",homepage$1="https://github.com/IGNF/geoportal-access-lib#readme",scripts={clean:'echo "Warning: no yet implemented!" && exit 0',setup:"npm install",cover:"nyc --reporter=lcov --reporter=text npm run test",eslint:"eslint src/",build:"webpack --mode=none","build:prod":"webpack --mode=production","build:dev":"webpack --mode=development",test:'mocha-webpack --reporter mochawesome --reporter-options reportDir=test-report,reportFilename=index --webpack-config ./test/webpack/webpack.test.js --glob "test_*.js" test/spec/',"test:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.js","test:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.docker.js","test:end-to-end:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.js","test:end-to-end:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.docker.js",sample:"npm run sample:serve","sample:serve":"webpack-dev-server --mode=none --open-page samples/index-src.html --https --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:prod":"webpack-dev-server --mode=production --open-page samples/index-prod.html --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:dev":"webpack-dev-server --mode=development --open-page samples/index-map.html --content-base . --output-public-path '/dist/' --port 9001 --open",doc:"npm run doc:serve","doc:serve":"webpack-dev-server --content-base jsdoc --port 9001 --open"},engines$1={node:"<=16"},nyc={include:["src/**/*.js"],instrument:!1,sourceMap:!1},repository$1={type:"git",url:"https://github.com/IGNF/geoportal-access-lib.git"},keywords$1=["geoplateforme","geoportail","webservice","javascript","es6"],author$1="IGNF",license$1="CECILL-B",dependencies$1={"es6-promise":"^4.2.4","node-fetch":"^2.6.1","@xmldom/xmldom":"^0.8.10"},devDependencies={"@babel/core":"^7.12.10","@babel/plugin-transform-template-literals":"^7.12.1","@babel/preset-env":"^7.12.11","babel-loader":"^8.2.2",chai:"^4.1.2","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^5.1.2",eslint:"^7.18.0","eslint-config-standard":"^16.0.2","eslint-loader":"^4.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^5.0.0",glob:"^7.1.2","handlebars-layouts":"^3.1.4","handlebars-webpack-plugin":"^1.4.1","html-webpack-plugin":"^4.5.1","istanbul-instrumenter-loader":"^3.0.1","jsdoc-webpack-plugin":"^0.3.0",loglevel:"^1.6.1",mocha:"^7.2.0","mocha-loader":"^5.1.5","mocha-webpack":"^2.0.0-beta.0",mochawesome:"^6.2.1",nyc:"^15.1.0",path:"^0.12.7","replace-bundle-webpack-plugin":"^1.0.0",sinon:"^9.2.4","sinon-es6":"0.0.3","speed-measure-webpack-plugin":"^1.4.2","string-template":"^1.0.0","terser-webpack-plugin":"^2.3.8",webpack:"^4.46.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-node-externals":"^2.5.2","webpack-shell-plugin":"^0.5.0"},bundledDependencies=[],peerDependencies={},optionalDependencies={},Pkg$1={name:name$1,version:version$2,date:date$1,description:description$1,module:module$1,main,homepage:homepage$1,scripts,engines:engines$1,nyc,repository:repository$1,keywords:keywords$1,author:author$1,license:license$1,dependencies:dependencies$1,devDependencies,bundledDependencies,peerDependencies,optionalDependencies};function CommonService(o){if(!(this instanceof CommonService))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR"));this.logger=LoggerByDefault.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(a){console.log("onSuccess - la reponse est la suivante : ",a)},onFailure:function(a){a.status===200||!a.status?console.log("onFailure : ",a.message):console.log("onFailure - Erreur (",a.status,") : ",a.message)}};for(var e in o)o.hasOwnProperty(e)&&(this.options[e]=o[e]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(a){console.log("onSuccess - la rponse brute du service est la suivante : ",a)});var s=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!s)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod=typeof o.httpMethod=="string"?o.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof o.protocol=="string"?o.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=o.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}CommonService.prototype={constructor:CommonService,call:function(){this.logger.trace("CommonService::call ()");var o=this;function e(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(o,b,s)}e.call(o);function s(_){this.logger.trace("CommonService::onBuildRequest : ",_),this.callService.call(o,b,a)}function a(_){this.logger.trace("CommonService::onCallService : ",_),this.analyzeResponse.call(o,b,d)}function d(_){if(this.logger.trace("CommonService::onAnalyzeResponse : ",_),_)this.options.onSuccess.call(this,_);else return b.call(this,new ErrorService("Analyse de la reponse en chec !?"))}function b(_){this.logger.trace("CommonService::onError()");var _e=_;_e instanceof ErrorService||(_e=new ErrorService(_.message)),this.options.onFailure.call(this,_e)}},buildRequest:function(o,e){this.logger.error("overwritten method !"),o&&o.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(o,e){var s=null,a=this.request,d=!!(this.options.proxyURL&&this.options.protocol==="XHR"),b={"gp-access-lib":Pkg$1.version};this.options.apiKey&&(b.apiKey=this.options.apiKey),this.options.serverUrl=Helper.normalyzeUrl(this.options.serverUrl,b,!1),d&&(this.options.httpMethod==="GET"&&(s=this.options.proxyURL+Helper.normalyzeUrl(this.options.serverUrl,this.request,!0),a=null),this.options.httpMethod==="POST"&&(s=this.options.proxyURL+Helper.normalyzeUrl(this.options.serverUrl,null,!0),a=this.request));var _=this,_e={url:s||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:a,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(ot){_.logger.trace("callService::onResponse()");var st=null;if(_.options.protocol==="XHR"&&(_.logger.trace("Response XHR",ot),st=ot),_.options.protocol==="JSONP")if(_.logger.trace("Response JSON",ot),ot)if(ot.http)if(ot.http.status!==200){o.call(_,new ErrorService({status:ot.http.status,message:ot.http.error,type:ErrorService.TYPE_SRVERR}));return}else st=ot.xml,_.options.rawResponse&&(st=ot);else st=ot;else{o.call(_,new ErrorService("Le contenu de la reponse est vide !?"));return}if(typeof _.options.onBeforeParse=="function"){var ct=_.options.onBeforeParse(st);typeof ct=="string"&&(st=ct)}_.response=st,e.call(_,st)},onFailure:function(ot){_.logger.trace("callService::onFailure()"),ot.type=ErrorService.TYPE_SRVERR,o.call(_,new ErrorService(ot))},onTimeOut:function(){_.logger.trace("callService::onTimeOut()"),o.call(_,new ErrorService("TimeOut!"))}};Protocol.send(_e)},analyzeResponse:function(o,e){this.logger.error("overwritten method !"),o&&o.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};var DefaultUrlService={ssl:!0,newUrl:function(o){var e="data.geopf.fr",s;return DefaultUrlService.ssl===!1?s="http://":s="https://",s+e+o},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":DefaultUrlService.newUrl(this.new_key["elevation-json"]),"elevation-xml":DefaultUrlService.newUrl(this.new_key["elevation-xml"]),"profil-json":DefaultUrlService.newUrl(this.new_key["profil-json"]),"profil-xml":DefaultUrlService.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(o){Array.isArray(o)||(o=o.split(","));for(var e=[],s=0;s<o.length;s++)e[s]=this._key+o[s]+"Config.json";return e}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}}};function ConfigInterface(){if(!(this instanceof ConfigInterface))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}ConfigInterface.prototype={constructor:ConfigInterface,isKeyConfLoaded:function(o){if(o)return!!this.generalOptions.apiKeys[o]},getLayersId:function(o){return this.generalOptions.apiKeys[o]},getLayerId:function(o,e){if(!(!o||!e)){var s=null;if(this.layers){var a=this.layers;for(var d in a)if(a.hasOwnProperty(d)){var b=d.split("$");if(o===b[0]&&b[1]){var _=b[1].split(":"),_e=b[1].split(";");if(_e[1]===e.toUpperCase()){s=d;break}if(_[2]===e.toUpperCase()){s=d;break}}}}if(s)return s}},getLayersConf:function(o){var e={},s=this.getLayersId(o);if(s)for(var a=0;a<s.length;a++){var d=s[a];e[d]=this.layers[d]}return e},getLayerConf:function(o){if(this.layers)return this.layers[o]},getLayerParams:function(o,e){var s={};if((e==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var a=this.getLayerId(o,e);if(a){var d=this.getLayerConf(a),b=this.getLayerKey(a);if(b.length===0)return;for(var _=0;_<b.length;_++)d.serviceParams.serverUrl[b[_]]&&(s.url=d.serviceParams.serverUrl[b[_]]);if(/\/v\//.test(s.url)?s.styles=" ":s.styles=d.styles[0].name,s.version=d.serviceParams.version,s.format=d.formats[0].name,s.projection=d.defaultProjection,s.minScale=d.globalConstraint.minScaleDenominator,s.maxScale=d.globalConstraint.maxScaleDenominator,s.extent=d.globalConstraint.bbox,s.legends=d.legends,s.title=d.title,s.description=d.description,e==="WMS"&&(s.metadata=d.metadata),d.wmtsOptions){s.tileMatrixSetLimits=d.wmtsOptions.tileMatrixSetLimits;var _e=d.wmtsOptions.tileMatrixSetLink;if(_e){s.TMSLink=_e;var ot=this.getTMSConf(_e);s.matrixIds=Object.keys(ot.tileMatrices),s.tileMatrices=ot.tileMatrices,s.nativeResolutions=ot.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return s},getLayerKey:function(o){var e=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var s=this.generalOptions.apiKeys;for(var a in s){var d=s[a];d.forEach(function(b){b===o&&e.push(a)})}}return e},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(o){if(this.tileMatrixSets)return this.tileMatrixSets[o]},getGlobalConstraints:function(o){var e={};if(o){var s=this.getLayerConf(o);e.projection=s.defaultProjection,e.minScale=s.globalConstraint.minScaleDenominator,e.maxScale=s.globalConstraint.maxScaleDenominator,e.extent=s.globalConstraint.bbox}return e}};function Config(o){if(!(this instanceof Config))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=LoggerByDefault.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var e=o.onSuccess!==null&&typeof o.onSuccess=="function";if(!e)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));!o.apiKey&&!o.customConfigFile&&(o.apiKey="full"),this.options={},this.options.onSuccess=o.onSuccess,this.options.onFailure=o.onFailure,this.options.sync=o.sync||!1,this.options.listConfigUrls=o.customConfigFile?[o.customConfigFile]:Array.isArray(o.apiKey)?DefaultUrlService.Config.url(o.apiKey):DefaultUrlService.Config.url(o.apiKey.split(","))}Config.prototype=Object.create(CommonService.prototype,{});Config.prototype.constructor=Config;Config.prototype.buildRequest=function(o,e){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){o.call(this,new Error("url by default not found !"));return}e.call(this,this.listConfigUrls)};Config.prototype.callService=function(o,e){this.options.sync?__callServiceSync.call(this,o,e):__callService.call(this,o,e)};var __callService=function(o,e){this.listConfigResults=[];let s=null;if(typeof window>"u"){var a=require("node-fetch");s=a}else s=window.fetch;var d=_=>s(_,{credentials:"same-origin"}).then(_e=>{if(_e.ok)return _e.json().then(ot=>ot).catch(ot=>{throw new Error("Exception Json : "+ot)});throw new Error("Exception HTTP : "+_e.status+" (status code) !")}).catch(_e=>new Promise((ot,st)=>{st(_e)})),b=[];for(let _=0;_<this.listConfigUrls.length;_++){const _e=this.listConfigUrls[_];b.push(d(_e))}Promise.all(b).then(_=>{if(!_)throw new Error("results config empty !?");_.forEach(_e=>{this.listConfigResults.push(_e)})}).then(()=>{e.call(this,this.listConfigResults)}).catch(_=>{o.call(this,_)})},__callServiceSync=function(o,e){this.listConfigResults=[];for(var s=0;s<this.listConfigUrls.length;s++){const d=this.listConfigUrls[s],b=new XMLHttpRequest;if(b.open("GET",d,!1),b.send(null),b.status===200){var a=JSON.parse(b.responseText);this.listConfigResults.push(a)}}this.listConfigResults.length!==0?e.call(this,this.listConfigResults):o.call(this,new Error("..."))};Config.prototype.analyzeResponse=function(o,e){var s=function(_e){for(var ot={},st={},ct={},ft=0;ft<_e.length;ft++){if(!_e[ft].generalOptions||!_e[ft].layers)return;st={...st,..._e[ft].generalOptions.apiKeys},ot={...ot,..._e[ft].layers},ct={...ct,..._e[ft].tileMatrixSets}}var mt={generalOptions:{apiKeys:st},layers:ot,tileMatrixSets:ct};return mt},a=s(this.listConfigResults);if(!a){o.call(this,new Error("configuration structure not conforme !"));return}var d=new ConfigInterface;Object.assign(d,a);var b=typeof window<"u"?window:{};if(b.Gp||(b.Gp={}),b.Gp.Config){Object.assign(b.Gp.Config,d);for(var _ in d)b.Gp.Config[_]=d[_]}else b.Gp.Config=d;e.call(this,b.Gp.Config)};function AltiRequest(o){if(!(this instanceof AltiRequest))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=o||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}AltiRequest.CLASSNAME="AltiRequest";AltiRequest.prototype={constructor:AltiRequest,setPositions:function(o){for(var e=[],s=0;s<o.length;s++){var a=o[s];a.lon&&a.lat&&e.push(a)}this.positions=e},getPositions:function(o){if(!o)return this.positions;var e=this.positions.length-1;return o>e||o<e?(this.logger.warn("index out of range !"),this.positions):this.positions[o]},addPositions:function(o){for(var e=0;e<o.length;e++){var s=o[e];s.lon&&s.lat&&this.positions.push(o[e])}},getLon:function(){for(var o=[],e=0;e<this.positions.length;e++)o.push(this.positions[e].lon);return this.logger.trace(o),o.join(this.delimiter)},getLat:function(){for(var o=[],e=0;e<this.positions.length;e++)o.push(this.positions[e].lat);return this.logger.trace(o),o.join(this.delimiter)}};AltiRequest.prototype.getData=function(){var o=[];return o.push({k:"lon",v:this.getLon()}),o.push({k:"lat",v:this.getLat()}),o.push({k:"delimiter",v:this.delimiter}),o.push({k:"indent",v:this.indent}),o.push({k:"crs",v:this.crs}),o.push({k:"format",v:this.format}),o};function AltiElevationRequest(o){if(!(this instanceof AltiElevationRequest))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}AltiElevationRequest.prototype=Object.create(AltiRequest.prototype,{zonly:{get:function(){return this._zonly},set:function(o){this._zonly=o}}});AltiElevationRequest.prototype.constructor=AltiElevationRequest;AltiElevationRequest.prototype.getData=function(){var o=[];return o.push({k:"lon",v:this.getLon()}),o.push({k:"lat",v:this.getLat()}),o.push({k:"indent",v:this.indent}),o.push({k:"crs",v:this.crs}),o.push({k:"zonly",v:this.zonly}),o.push({k:"format",v:this.format}),o.push({k:"resource",v:this.resource}),o};function AltiProfilRequest(o){if(!(this instanceof AltiProfilRequest))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}AltiProfilRequest.prototype=Object.create(AltiRequest.prototype,{sampling:{get:function(){return this._sampling},set:function(o){this._sampling=o}}});AltiProfilRequest.prototype.constructor=AltiProfilRequest;AltiProfilRequest.prototype.getData=function(){var o=[];return o.push({k:"lon",v:this.getLon()}),o.push({k:"lat",v:this.getLat()}),o.push({k:"indent",v:this.indent}),o.push({k:"crs",v:this.crs}),o.push({k:"sampling",v:this.sampling}),o.push({k:"format",v:this.format}),o.push({k:"resource",v:this.resource}),o};function AltiRequestREST(o){if(this.logger=LoggerByDefault.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof AltiRequestREST))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=o||{},!this.options)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new AltiElevationRequest(this.options.param);break;case"Profil":this.DataObject=new AltiProfilRequest(this.options.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}AltiRequestREST.prototype={requestString:null,constructor:AltiRequestREST,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
resource='__RESOURCE__'
measures='__MEASURES__'
`,input:{point:`zonly=__ZONLY__
`,profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var o="";return this.method==="POST"?o=this.template.post.value:this.method==="GET"&&(o=this.template.get.value),o=o.replace(/__LON__/g,this.DataObject.getLon()),o=o.replace(/__LAT__/g,this.DataObject.getLat()),o=o.replace(/__INDENT__/g,this.DataObject.indent),o=o.replace(/__CRS__/g,this.DataObject.crs),o=o.replace(/__RESOURCE__/g,this.DataObject.resource),o=o.replace(/__MEASURES__/g,this.DataObject.measures),o=o+this.__addDataInputs(),this.logger.trace("traduction tmpl",o),this.requestString=o,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var o;if(this.method==="POST")o=this.template.post;else if(this.method==="GET")o=this.template.get;else throw new Error("No other HTTP method supported by the service !");var e=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return e=o.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if(this.DataObject.CLASSNAME==="AltiProfilRequest")return e=o.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function WPS(o){if(this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof WPS))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=o||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}WPS.prototype={requestString:null,constructor:WPS,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var o=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return o.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var o="";if(this.method==="POST")o=this.template.post.value;else if(this.method==="GET")o=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return o=o.replace(/__SERVICE__/g,this.paramservice),o=o.replace(/__VERSION__/g,this.paramversion),o=o.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),o=o.replace(/__IDENTIFIER__/g,this.paramidentifier),o=o.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(o=o.replace(/__NAMESPACE__/g,this.namespaceByDefault),o=o.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),o=o.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),o?(this.requestString=o,this.logger.trace("traduction tmpl",o),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var o=this.method==="GET"?this.template.get.input:this.template.post.input,e=this.method==="GET"?";":"",s="",a=this,d=this.DataObject.getData(),b=0;b<d.length;b++)(function(_){e&&(e=_===d.length-1?"":";"),s=s.concat(a.__addDataInput(o,d[_].k,d[_].v),e)})(b);return s},__addDataInput:function(o,e,s){var a=o;return a=a.replace(/__KEY__/g,e),a=a.replace(/__DATA__/g,s),a},setMethod:function(o){o==="GET"||o==="POST"?this.method=o:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var AltiRequestWPS={build:function(o){var e=LoggerByDefault.getLogger("AltiRequestWPS");if(e.trace(["AltiRequestWPS::build()"]),!o)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!o.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var s=null;switch(o.type){case"Elevation":o.wps.identifier="gs:WPSElevation",s=new AltiElevationRequest(o.param);break;case"Profil":o.wps.identifier="gs:WPSLineElevation",s=new AltiProfilRequest(o.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var a={data:s,method:o.method,param:o.wps},d=new WPS(a);if(!d.processRequestString())throw new Error("Enable to process request !");return d.requestString}},AltiRequestFactory={build:function(o){var e=LoggerByDefault.getLogger("AltiRequestFactory");e.trace(["AltiRequestFactory::build()"]);var s=null,a={type:o.sampling?"Profil":"Elevation",method:o.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};a.param.positions=o.positions,a.param.format=o.outputFormat,a.param.sampling=o.sampling,a.param.zonly=o.zonly,a.param.measures=o.measures,a.param.resource=o.resource;var d=o.onError!==null&&typeof o.onError=="function",b=o.onSuccess!==null&&typeof o.onSuccess=="function",_=null;switch(o.api){case"REST":var _e=new AltiRequestREST(a);if(!_e.processRequestString()){if(_="Error in process request (rest) !",d){o.onError.call(o.scope,new ErrorService(_));return}throw new Error(_)}s=_e.requestString;break;case"WPS":if(a.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},s=AltiRequestWPS.build(a),!s){if(_="Error in process request (wps) !",d){o.onError.call(o.scope,new ErrorService(_));return}throw new Error(_)}break;default:if(_="Type of API is not supported by service (REST or WPS) !",d){o.onError.call(o.scope,new ErrorService(_));return}throw new Error(_)}return b&&o.onSuccess.call(o.scope,s),s}};function XML$1(o){if(!(this instanceof XML$1))throw new TypeError("XML constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,o&&(o.xmlString&&typeof o.xmlString=="string"&&(this.xmlString=o.xmlString,this.xmlDoc=__getXMLDOC(o.xmlString)),o.reader&&this.setReader(o.reader))}XML$1.prototype={constructor:XML$1,getXMLString:function(){return this.xmlString},setXMLString:function(o){o&&typeof o=="string"&&(this.xmlString=o,this.xmlDoc=__getXMLDOC(o))},getReader:function(){return this.reader},setReader:function(o){o&&o.read&&typeof o.read=="function"&&(this.reader=o)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(o){this.xmlDoc=o},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=__getXMLDOC(this.xmlString)),this.xmlDoc){var o=__getRootNode(this.xmlDoc);if(o){var e;return this.reader&&this.reader.read?e=this.reader.read(o):(e={},e[o.nodeName]=__readDefault(o)),e}else return{}}}};function __getXMLDOC(o){if(typeof window>"u"){var e=require("@xmldom/xmldom").DOMParser;return new e().parseFromString(o,"text/xml")}else{var s,a,d="Erreur lors du parsing de la rponse du service : XML non conforme";if(window.ActiveXObject){a=new window.ActiveXObject("Microsoft.XMLDOM"),a.async=!1,a.loadXML(o);var b=a.parseError;if(b.errorCode)throw b.line&&b.linepos&&(d+="( ligne "+b.line+", colonne "+b.linepos),b.reason&&(d+=":  "+b.reason+")"),new Error(d);return a}else if(window.DOMParser){s=new window.DOMParser;try{a=s.parseFromString(o,"text/xml")}catch(st){throw st.message==="SyntaxError"?new Error(d):new Error("Erreur lors du parsing de la rponse du service : "+st.message)}if(a.getElementsByTagName("parsererror").length>0)for(var _=a.getElementsByTagName("parsererror"),_e=0;_e<_.length;_e++){var ot=_[_e].innerHTML;if(ot.indexOf("Huge input lookup")===-1)throw d+="("+ot+")",new Error(d)}else if(!a.documentElement)throw new Error(d);return a}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function __getRootNode(o){var e;return o.nodeType===9?e=o.documentElement:o.nodeType===1&&(e=o),e}function __readDefault(o){var e={};if(o.attributes.length>0){var s=__getAttributes(o);e.attributes=s}if(o.hasChildNodes()){for(var a={},d,b=o.childNodes,_=0;_<b.length;_++)if(d=b[_],d.nodeType===3)e.textContent=d.nodeValue;else if(d.nodeType===1)if(a=__readDefault(d),!e[d.nodeName])e[d.nodeName]=a;else{if(!Array.isArray(e[d.nodeName])){var _e=e[d.nodeName];e[d.nodeName]=[],e[d.nodeName].push(_e)}e[d.nodeName].push(a)}}return e}function __getAttributes(o){if(o.attributes.length>0){for(var e={},s=o.attributes,a=0;a<s.length;a++){var d=s[a];e[d.nodeName]=d.nodeValue}return e}}function AltiResponse(){if(!(this instanceof AltiResponse))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}AltiResponse.prototype={constructor:AltiResponse};function Elevation(){if(!(this instanceof Elevation))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Elevation.prototype={constructor:Elevation};function Measure(){if(!(this instanceof Measure))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Measure.prototype={constructor:Measure};var AltiResponseReader={};AltiResponseReader.READERS={elevations:function(o){var e=new AltiResponse;if(o.hasChildNodes())for(var s=o.childNodes,a,d,b=0;b<s.length;b++)a=s[b],AltiResponseReader.READERS[a.nodeName]&&(d=AltiResponseReader.READERS[a.nodeName](a),e.elevations.push(d));return e},elevation:function(o){var e=new Elevation;if(o.hasChildNodes())for(var s=o.childNodes,a,d=0;d<s.length;d++)a=s[d],AltiResponseReader.READERS[a.nodeName]&&AltiResponseReader.READERS[a.nodeName](a,e);return e},lat:function(o,e){var s=o.firstChild;if(s&&s.nodeType===3)e.lat=parseFloat(s.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : latitude attendue mais absente")},lon:function(o,e){var s=o.firstChild;if(s&&s.nodeType===3)e.lon=parseFloat(s.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : longitude attendue mais absente")},z:function(o,e){var s=o.firstChild;if(s&&s.nodeType===3)if(e)e.z=parseFloat(s.nodeValue);else return e=new Elevation,e.z=parseFloat(s.nodeValue),e;else throw new Error("Erreur dans la lecture de la rponse du service : altitude attendue mais absente")},acc:function(o,e){var s=o.firstChild;if(s&&s.nodeType===3)e.acc=parseFloat(s.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : prcision (acc) attendue mais absente")},source_name:function(o,e){var s=o.firstChild;if(s&&s.nodeType===3)e.source_name=s.nodeValue;else throw new Error("Erreur dans la lecture de la rponse du service : source_name attendue mais absente")},source_measure:function(o,e){var s=o.firstChild;if(s&&s.nodeType===3)e.source_measure=s.nodeValue;else throw new Error("Erreur dans la lecture de la rponse du service : source_measure attendue mais absente")},measures:function(o,e){e.measures=[];var s;if(o.hasChildNodes())for(var a=o.childNodes,d,b,_=0;_<a.length;_++){s=new Measure,d=a[_],b=d.childNodes;for(var _e=0;_e<b.length;_e++)if(AltiResponseReader.READERS[b[_e].nodeName])AltiResponseReader.READERS[b[_e].nodeName](b[_e],s);else throw new Error("Erreur dans la lecture de la rponse du service : measures attendues mais absentes");e.measures.push(s)}},exceptionreport:function(o){var e={};if(o.hasChildNodes())for(var s=o.childNodes,a,d=0;d<s.length;d++)a=s[d],a.nodeName==="Exception"&&(e.exceptionReport=AltiResponseReader.READERS.exception(a));return e},exception:function(o){var e={},s=o.getAttribute("exceptionCode");s&&(e.exceptionCode=s);var a=o.firstChild;return a&&a.nodeType===3&&(e.exception=a.nodeValue),e},error:function(o){var e={error:{}};if(o.hasChildNodes())for(var s=o.childNodes,a,d=0;d<s.length;d++){a=s[d];var b;a.nodeType===1&&a.nodeName==="code"&&(b=a.firstChild,b&&b.nodeType===3&&(e.error.code=b.nodeValue)),a.nodeType===1&&a.nodeName==="description"&&(b=a.firstChild,b&&b.nodeType===3&&(e.error.description=b.nodeValue))}return e}};AltiResponseReader.read=function(o){if(o.nodeName==="elevations"){var e=AltiResponseReader.READERS.elevations(o);return e}else if(o.nodeName==="ExceptionReport"){var s=AltiResponseReader.READERS.exceptionreport(o);return s}else if(o.nodeName==="error"){var a=AltiResponseReader.READERS.error(o);return a}else throw new Error("Erreur lors de la lecture de la rponse : elle n'est pas au format attendu.")};var AltiResponseFactory={build:function(o){var e=LoggerByDefault.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var s=null;if(o.response)if(o.rawResponse)e.trace("analyze response : raw"),s=o.response;else{switch(o.outputFormat){case"xml":e.trace("analyze response : xml");try{var a=new XML$1({reader:AltiResponseReader});if(typeof o.response=="string"?a.setXMLString(o.response):a.setXMLDoc(o.response),s=a.parse(),!s)throw new Error(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(ft){var d=ft.message;o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",d),status:200,type:ErrorService.TYPE_SRVERR}));return}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof o.response);var b=null;if(typeof o.response=="string"?b=JSON.parse(o.response):b=o.response,b&&b.error){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",b.error.description),status:200,type:ErrorService.TYPE_SRVERR}));return}if(b){var _=b.elevations,_e=new AltiResponse,ot;if(Array.isArray(_)&&_.length)for(var st=0;st<_.length;st++)ot=new Elevation,typeof _[st]=="object"?(_[st].lon&&(ot.lon=_[st].lon),_[st].lat&&(ot.lat=_[st].lat),_[st].z&&(ot.z=_[st].z),_[st].acc&&(ot.acc=_[st].acc),_[st].measures&&(ot.measures=_[st].measures)):typeof _[st]=="number"&&(ot.z=_[st]),Array.isArray(_e.elevations)&&_e.elevations.push(ot);s=_e}if(!s){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}break;default:o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(s.exceptionReport){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",s.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}else if(s.error){var ct=s.error.description;o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",ct),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}o.onSuccess.call(o.scope,s)}};function Alti(o){if(!(this instanceof Alti))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",CommonService.apply(this,arguments),this.logger=LoggerByDefault.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!o.positions)throw new Error(MessagesResources.getMessage("PARAM_MISSING","positions"));if(o.positions.length===0)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=o.positions,this.options.outputFormat=typeof o.outputFormat=="string"?o.outputFormat.toLowerCase():"xml",this.options.resource=o.resource||"ign_rge_alti_wld",this.options.sampling=o.sampling||null,this.options.api=typeof o.api=="string"?o.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=o.zonly||!1,this.options.measures=o.measures||!1,!this.options.serverUrl){var e=DefaultUrlService.Alti.newUrl(),s=null;switch(this.options.api){case"WPS":s=e.wps;break;case"REST":var a=(o.sampling?"profil":"elevation")+"-"+this.options.outputFormat;s=e[a];break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","api"))}if(!s)throw new Error("Url by default not found !");this.options.serverUrl=s,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var d=this.options.serverUrl.lastIndexOf(".");if(d!==-1){var b=this.options.serverUrl.substring(d+1);if(b&&b.length<5)switch(this.logger.trace("Server Extension URL : "+b),b.toLowerCase()){case"json":case"xml":this.options.outputFormat=b.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}Alti.prototype=Object.create(CommonService.prototype,{});Alti.prototype.constructor=Alti;Alti.prototype.buildRequest=function(o,e){var s={httpMethod:this.options.httpMethod,onSuccess:function(a){this.request=a,e.call(this,this.request)},onError:o,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};AltiRequestFactory.build(s)};Alti.prototype.analyzeResponse=function(o,e){if(this.response){var s={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:o,onSuccess:e,scope:this};AltiResponseFactory.build(s)}else o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function GeocodeParamREST(o){if(!(this instanceof GeocodeParamREST))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=o||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}GeocodeParamREST.CLASSNAME="GeocodeParamREST";GeocodeParamREST.prototype={constructor:GeocodeParamREST,getFilters:function(){var o={};for(var e in this.filters)this.filters.hasOwnProperty(e)&&(o[e]=this.filters[e]);return o},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};GeocodeParamREST.prototype.getParams=function(){var o=[];this.geocodeMethod==="search"&&o.push({k:"q",v:this.query}),this.index&&o.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&o.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(o.push({k:"lon",v:this.lon}),o.push({k:"lat",v:this.lat})),this.maxResp&&o.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&o.push({k:"returntruegeometry",v:this.returnTrueGeometry});const e=this.getFilters();for(var s in e)o.push({k:s,v:e[s]});return o};function GeocodeRequestREST(o){if(this.logger=LoggerByDefault.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof GeocodeRequestREST))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!o)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=o}GeocodeRequestREST.prototype={requestString:null,constructor:GeocodeRequestREST,processRequestString:function(){var o="";const s=new GeocodeParamREST(this.settings).getParams();for(var a=0;a<s.length;a++){var d=s[a];o&&(o+="&"),o+=d.k+"="+d.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+o,this.logger.trace(this.requestString),this.requestString}};var GeocodeRequestFactory={build:function(o){var e=LoggerByDefault.getLogger("GeocodeRequestFactory");e.trace(["GeocodeRequestFactory::build()"]);var s=o||{},a=new GeocodeRequestREST(s);if(!a.processRequestString())throw new Error("Error process request (rest) !");var d=a.requestString;return e.trace(d),d}};function GeocodeResponse(){if(!(this instanceof GeocodeResponse))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}GeocodeResponse.prototype={constructor:GeocodeResponse};function GeocodedLocation(){if(!(this instanceof GeocodedLocation))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}GeocodedLocation.prototype={constructor:GeocodedLocation};function GeocodeResponseParser(){if(!(this instanceof GeocodeResponseParser))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}GeocodeResponseParser.prototype={constructor:GeocodeResponseParser,parse:function(o){var e=new GeocodeResponse;const s=JSON.parse(o);if(s.type==="FeatureCollection")for(var a=0;a<s.features.length;++a)_parseFeature(s.features[a],e);else if(s.type==="Feature")_parseFeature(s,e);else{if(s.type==="SERVICE_ERROR")return _parseError(s);var d=MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",s.type);throw new ErrorService({message:d,type:ErrorService.TYPE_UNKERR,status:200})}return e}};function _parseFeature(o,e){var s=new GeocodedLocation;if(o.geometry&&o.geometry.type==="Point"&&(s.position={lon:o.geometry.coordinates[0],lat:o.geometry.coordinates[1]}),o.properties){for(var a in o.properties)a==="score"?s.accuracy=o.properties[a]:a==="_type"?o.properties[a]==="address"?s.type="StreetAddress":o.properties[a]==="poi"?s.type="PositionOfInterest":(o.properties[a]==="parcel"||o.properties[a]==="cadastral")&&(s.type="CadastralParcel"):s.placeAttributes[a]=o.properties[a];o.properties._type==="address"&&(s.matchType=o.properties.number!==void 0&&o.properties.number!==null?"street number":"street")}e.locations.push(s)}function _parseError(o){return{exceptionReport:o}}var GeocodeReponseFactory={build:function(o){var e=null;if(o.response)if(o.rawResponse)e=o.response;else{try{if(e=new GeocodeResponseParser().parse(o.response),!e)throw new Error("L'analyse de la rponse du service !?")}catch(a){var s=a.message;typeof o.response=="string"?s+="('"+o.response+"')":s+="('"+o.response.documentElement.innerHTML+"')",o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",s),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY"),type:ErrorService.TYPE_SRVERR,status:-1}));return}o.onSuccess.call(o.scope,e)}};function Geocode(o){if(!(this instanceof Geocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=LoggerByDefault.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var e=this.patchOptionConvertor(o);if(e.serverUrl||(e.serverUrl=DefaultUrlService.Geocode.newUrl()),CommonService.apply(this,[e]),!e.hasOwnProperty("query"))throw new Error(MessagesResources.getMessage("PARAM_MISSING","query"));if(this.options.query=e.query,e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var s=Object.keys(e.filters),a=0;a<s.length;a++){var d=s[a];(typeof e.filters[d]>"u"||typeof e.filters[d]=="object"&&Object.keys(e.filters[d]).length===0||typeof e.filters[d]=="string"&&e.filters[d].length===0||Array.isArray(e.filters[d])&&e.filters[d].length===0)&&delete this.options.filters[d]}this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Geocode.prototype=Object.create(CommonService.prototype,{});Geocode.prototype.constructor=Geocode;Geocode.prototype.patchOptionConvertor=function(o){const e=o;return e.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),e.query||(e.query=e.location),delete e.location),e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filters||(e.filters=e.filterOptions,e.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filters.type)&&e.filters.type.length>0?e.index=e.filters.type[0]:e.index=e.filters.type),delete e.filters.type),e.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete e.filters.bbox)),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete e.returnFreeForm),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Geocode.prototype.buildRequest=function(o,e){var s={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(s),this.request?e.call(this,this.request):o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Geocode.prototype.analyzeResponse=function(o,e){if(this.response){var s={response:this.response,rawResponse:this.options.rawResponse,onError:o,onSuccess:e,scope:this};GeocodeReponseFactory.build(s)}else o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ReverseGeocode(o){if(!(this instanceof ReverseGeocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=LoggerByDefault.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var e=this.patchOptionConvertor(o);if(e.serverUrl||(e.serverUrl=DefaultUrlService.ReverseGeocode.newUrl()),CommonService.apply(this,[e]),e.searchGeometry)this.options.searchGeometry=e.searchGeometry;else if(!e.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","searchGeometry"));if(e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var s=Object.keys(e.filters),a=0;a<s.length;a++){var d=s[a];(typeof e.filters[d]>"u"||typeof e.filters[d]=="object"&&Object.keys(e.filters[d]).length===0||typeof e.filters[d]=="string"&&e.filters[d].length===0||Array.isArray(e.filters[d])&&e.filters[d].length===0)&&delete this.options.filters[d]}this.options.position=e.position,this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}ReverseGeocode.prototype=Object.create(CommonService.prototype,{});ReverseGeocode.prototype.constructor=ReverseGeocode;ReverseGeocode.prototype.patchOptionConvertor=function(o){var e=o;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filterOptions.type)&&e.filterOptions.type.length>0?e.index=e.filterOptions.type[0]:e.index=e.filterOptions.type),delete e.filterOptions.type),e.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),e.searchGeometry||(e.searchGeometry=this.bbox2Json(e.filterOptions.bbox)),delete e.filterOptions.bbox),e.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),e.searchGeometry||(e.searchGeometry=this.circle2Json(e.filterOptions.circle)),delete e.filterOptions.circle),e.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),e.searchGeometry||(e.searchGeometry=this.polygon2Json(e.filterOptions.polygon)),delete e.filterOptions.polygon),!e.filters&&Object.keys(e.filterOptions).length>0&&(e.filters=e.filterOptions),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};ReverseGeocode.prototype.buildRequest=function(o,e){var s={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(s),this.request?e.call(this,this.request):o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};ReverseGeocode.prototype.analyzeResponse=function(o,e){if(this.response){var s={response:this.response,rawResponse:this.options.rawResponse,onError:o,onSuccess:e,scope:this};GeocodeReponseFactory.build(s)}else o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};ReverseGeocode.prototype.bbox2Json=function(o){return{type:"Polygon",coordinates:[[[o.left,o.top],[o.right,o.top],[o.right,o.bottom],[o.left,o.bottom],[o.left,o.top]]]}};ReverseGeocode.prototype.circle2Json=function(o){return{type:"Circle",radius:o.radius,coordinates:[o.x,o.y]}};ReverseGeocode.prototype.polygon2Json=function(o){for(var e={type:"Polygon",coordinates:[[]]},s=0;s<o.length;++s)e.coordinates[0].push([o[s].x,o[s].y]);return e};ReverseGeocode.geoEPSG=["EPSG:4326"];function AutoCompleteResponse(){if(!(this instanceof AutoCompleteResponse))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}AutoCompleteResponse.prototype={constructor:AutoCompleteResponse};function SuggestedLocation(){if(!(this instanceof SuggestedLocation))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}SuggestedLocation.prototype={constructor:SuggestedLocation};var AutoCompleteResponseFactory={build:function(o){var e=LoggerByDefault.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var s=null;if(o.response)if(o.rawResponse)e.trace("analyze response : raw"),s=o.response;else{var a=null;if(typeof o.response=="string"?a=JSON.parse(o.response):a=o.response,a){if(a.error){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",a.error.description),status:a.error.code,type:ErrorService.TYPE_SRVERR}));return}if(s=new AutoCompleteResponse,a.results&&Array.isArray(a.results))for(var d=null,b=0;b<a.results.length;b++){var _=a.results[b];d=new SuggestedLocation,_&&(_.country==="StreetAddress"?(d.street=_.street,d.type="StreetAddress"):_.country==="PositionOfInterest"&&(d.poi=_.street,d.type="PositionOfInterest",d.poiType=_.poiType),d.position&&(d.position.x=_.x,d.position.y=_.y),d.kind=_.kind,d.commune=_.city,d.fullText=_.fulltext,d.postalCode=_.zipcode,d.classification=_.classification),s.suggestedLocations.push(d)}else{o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!s.suggestedLocations.length){o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!s){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(s.exceptionReport){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",s.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}o.onSuccess.call(o.scope,s)}};function AutoComplete(o){if(!(this instanceof AutoComplete))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=LoggerByDefault.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var e=this.patchOptionConvertor(o);if(e.serverUrl||(e.serverUrl=DefaultUrlService.AutoComplete.newUrl()),CommonService.apply(this,arguments),!e.text)throw new Error(MessagesResources.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.type||(e.type=["StreetAddress,PositionOfInterest"]),this.options.type=e.type,this.options.territory=e.terr||"",this.options.maximumResponses=e.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gre pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}AutoComplete.prototype=Object.create(CommonService.prototype,{});AutoComplete.prototype.constructor=AutoComplete;AutoComplete.prototype.patchOptionConvertor=function(o){const e=o;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.type||(e.type=e.filterOptions.type)),e.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),e.terr||(e.terr=e.filterOptions.territory)),delete e.filterOptions),e};AutoComplete.prototype.buildRequest=function(o,e){var s="";this.options.territory&&(s=this.options.territory);var a="";this.options.type&&(a=this.options.type.join(",")),this.request=Helper.normalyzeParameters({text:encodeURIComponent(this.options.text),type:a,terr:s,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};AutoComplete.prototype.analyzeResponse=function(o,e){if(this.response){var s={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:o,scope:this};AutoCompleteResponseFactory.build(s)}else o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function RouteParamREST(o){if(!(this instanceof RouteParamREST))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=o||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}RouteParamREST.CLASSNAME="RouteParamREST";RouteParamREST.prototype={constructor:RouteParamREST,getIntermediates:function(){var o=[];if(this.intermediates.length!==0)for(var e=0;e<this.intermediates.length;e++){var s=this.intermediates[e];o.push(s.x+","+s.y)}return o.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var o=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)o.push(JSON.stringify(this.constraints[e]));return o.join("|")}};RouteParamREST.prototype.getParams=function(){var o=[];return o.push({k:"resource",v:this.resource}),o.push({k:"start",v:this.start}),o.push({k:"end",v:this.end}),o.push({k:"geometryFormat",v:"geojson"}),this.optimization&&o.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&o.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&o.push({k:"profile",v:this.getProfile()}),this.constraints&&o.push({k:"constraints",v:this.getConstraints()}),this.crs&&o.push({k:"crs",v:this.crs}),this.distanceUnit&&o.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&o.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&o.push({k:"waysAttributes",v:this.getWaysAttributes()}),o};function RouteRequestREST(o){if(this.logger=LoggerByDefault.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof RouteRequestREST))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!o)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=o}RouteRequestREST.prototype={requestString:null,constructor:RouteRequestREST,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var o=new RouteParamREST(this.settings),e=o.getParams(),s="",a=0;a<e.length;a++){var d=e[a];s&&(s+="&"),s+=d.k+"="+d.v}return this.logger.trace(s),this.requestString=s,this.requestString}};var RouteRequestFactory={build:function(o){var e=LoggerByDefault.getLogger("RouteRequestFactory");e.trace(["RouteRequestFactory::build()"]);var s=null,a=o||{},d=o.onError!==null&&typeof o.onError=="function",b=null,_=new RouteRequestREST(a);if(!_.processRequestString()){if(b="Error process request (rest) !",d){o.onError.call(o.scope,new ErrorService(b));return}throw new Error(b)}return s=_.requestString,s}};function RouteResponse(){if(!(this instanceof RouteResponse))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}RouteResponse.prototype={constructor:RouteResponse};function RouteInstruction(){if(!(this instanceof RouteInstruction))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}RouteInstruction.prototype={constructor:RouteInstruction};var RouteResponseFactory={build:function(o){var e=LoggerByDefault.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var s=null;if(o.response)if(o.rawResponse)e.trace("analyze response : raw"),s=o.response;else{e.trace("analyze response : json");var a;if(typeof o.response=="string"?a=JSON.parse(o.response):a=o.response,a){if(a.message){o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",a.message)));return}var d=[],b=[],_=[];if(s=new RouteResponse,s.hasOwnProperty("totalTime")&&(s.totalTime=parseFloat(a.duration)),s.hasOwnProperty("totalDistance")&&(s.totalDistance=parseFloat(a.distance)),s.hasOwnProperty("bbox")&&(s.bbox.left=parseFloat(a.bbox[0]),s.bbox.bottom=parseFloat(a.bbox[1]),s.bbox.right=parseFloat(a.bbox[2]),s.bbox.top=parseFloat(a.bbox[3])),s.hasOwnProperty("routeGeometry")&&!o.geometryInInstructions&&(s.routeGeometry=a.geometry),s.hasOwnProperty("routeInstructions")&&o.geometryInInstructions){var _e=a.portions,ot;if(Array.isArray(_e)&&_e.length)for(ot=0;ot<_e.length;ot++)d.push(_e[ot]);if(d.length)for(ot=0;ot<d.length;ot++)b.push(d[ot].steps);if(b.length)for(ot=0;ot<b.length;ot++)_=_.concat(b[ot]);_.forEach(function(st){switch(s.routeInstructions.push(new RouteInstruction),s.routeInstructions[s.routeInstructions.length-1].duration=st.duration,s.routeInstructions[s.routeInstructions.length-1].distance=st.distance,s.routeInstructions[s.routeInstructions.length-1].code="",s.routeInstructions[s.routeInstructions.length-1].instruction="",s.routeInstructions[s.routeInstructions.length-1].geometry=st.geometry,st.name==="Valeur non renseigne"&&(st.name=""),st.instruction.type){case"turn":s.routeInstructions[s.routeInstructions.length-1].instruction+="Tourner";break;case"new name":s.routeInstructions[s.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":s.routeInstructions[s.routeInstructions.length-1].instruction+="Dpart";break;case"arrive":s.routeInstructions[s.routeInstructions.length-1].instruction+="Arrive";break;case"merge":s.routeInstructions[s.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":s.routeInstructions[s.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":s.routeInstructions[s.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":s.routeInstructions[s.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":s.routeInstructions[s.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":s.routeInstructions[s.routeInstructions.length-1].instruction+=" la fin de la route, prendre";break;case"use lane":s.routeInstructions[s.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":s.routeInstructions[s.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":s.routeInstructions[s.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":s.routeInstructions[s.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":s.routeInstructions[s.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":s.routeInstructions[s.routeInstructions.length-1].instruction+="";break;default:s.routeInstructions[s.routeInstructions.length-1].instruction+="?"+st.instruction.type+"?";break}if(st.instruction.modifier)switch(st.instruction.modifier){case"uturn":s.routeInstructions[s.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":s.routeInstructions[s.routeInstructions.length-1].instruction+=" compltement  droite";break;case"right":s.routeInstructions[s.routeInstructions.length-1].instruction+="  droite";break;case"slight right":s.routeInstructions[s.routeInstructions.length-1].instruction+=" lgrement  droite";break;case"straight":s.routeInstructions[s.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":s.routeInstructions[s.routeInstructions.length-1].instruction+=" lgrement  gauche";break;case"left":s.routeInstructions[s.routeInstructions.length-1].instruction+="  gauche";break;case"sharp left":s.routeInstructions[s.routeInstructions.length-1].instruction+=" compltement  gauche";break;default:s.routeInstructions[s.routeInstructions.length-1].instruction+=" ?"+st.instruction.modifier+"?";break}st.instruction.exit&&(s.routeInstructions[s.routeInstructions.length-1].instruction+=`${st.instruction.exit}e sortie`),st.attributes.name&&((st.attributes.name.nom_1_droite||st.attributes.name.toponyme)&&(s.routeInstructions[s.routeInstructions.length-1].instruction+=" sur"),st.attributes.name.nom_1_droite&&(s.routeInstructions[s.routeInstructions.length-1].instruction+=` ${st.attributes.name.nom_1_droite}`),st.attributes.name.toponyme&&(s.routeInstructions[s.routeInstructions.length-1].instruction+=` ${st.attributes.name.toponyme}`))})}}if(!s){o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(s.exceptionReport){o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}o.onSuccess.call(o.scope,s)}};function Route(o){if(!(this instanceof Route))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",CommonService.apply(this,arguments),this.logger=LoggerByDefault.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!o.startPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint"));if(o.startPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.x"));if(o.startPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.y"));if(!o.endPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint"));if(o.endPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.x"));if(o.endPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.y"));if(o.outputFormat&&o.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=o.resource||"bdtopo-osrm",this.options.startPoint=o.startPoint,this.options.endPoint=o.endPoint,this.options.viaPoints=o.viaPoints||[],this.options.routePreference=o.routePreference||"fastest",o.graph?(o.graph==="Voiture"&&(this.options.graph="car"),o.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],o.constraints)if(Array.isArray(o.constraints))for(var e=0;e<o.constraints.length;e++)this.options.constraints.push(o.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var s={},a={},d={};if(o.exclusions&&o.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var b=0;b<o.exclusions.length;b++){if(typeof o.exclusions[b]=="string")o.exclusions[b]=o.exclusions[b].toLowerCase();else continue;o.exclusions[b]==="toll"&&(d.constraintType="banned",d.key="wayType",d.operator="=",d.value="autoroute",this.options.constraints.push(d)),o.exclusions[b]==="tunnel"&&(s.constraintType="banned",s.key="wayType",s.operator="=",s.value="tunnel",this.options.constraints.push(s)),o.exclusions[b]==="bridge"&&(a.constraintType="banned",a.key="wayType",a.operator="=",a.value="pont",this.options.constraints.push(a))}}if(this.options.geometryInInstructions=o.geometryInInstructions||!1,this.options.provideBbox=o.provideBbox||!0,this.options.distanceUnit=o.distanceUnit||"m",this.options.timeUnit=o.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=o.srs||"EPSG:4326",this.options.waysAttributes=o.waysAttributes||[],!this.options.serverUrl){var _=DefaultUrlService.Route.newUrl();if(!_)throw new Error("Url by default not found !");this.options.serverUrl=_,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Route.prototype=Object.create(CommonService.prototype,{});Route.prototype.constructor=Route;Route.prototype.buildRequest=function(o,e){var s={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=RouteRequestFactory.build(s),this.request?e.call(this,this.request):o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Route.prototype.analyzeResponse=function(o,e){if(this.response){var s={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:o,onSuccess:e,scope:this,geometryInInstructions:this.options.geometryInInstructions};RouteResponseFactory.build(s)}else o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ProcessIsoCurveParam(o){if(!(this instanceof ProcessIsoCurveParam))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=o||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance,this.distanceUnit==="m"&&this.costValue>=5e4&&(this.distanceUnit="km",this.costValue/=1e3)):(this.costType="time",this.costValue=this.options.time)}ProcessIsoCurveParam.CLASSNAME="ProcessIsoCurveParam";ProcessIsoCurveParam.prototype={constructor:ProcessIsoCurveParam,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var o=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)o.push(JSON.stringify(this.constraints[e]));return o.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};ProcessIsoCurveParam.prototype.getParams=function(){var o=[];return o.push({k:"resource",v:this.resource}),o.push({k:"point",v:this.getLocation()}),o.push({k:"direction",v:this.getDirection()}),o.push({k:"costType",v:this.costType}),o.push({k:"costValue",v:this.costValue}),o.push({k:"profile",v:this.profile}),o.push({k:"timeUnit",v:this.timeUnit}),o.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&o.push({k:"crs",v:this.crs}),this.constraints&&o.push({k:"constraints",v:this.getConstraints()}),o};function ProcessIsoCurveRequest(o){if(this.logger=LoggerByDefault.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ProcessIsoCurveRequest))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!o)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=o,this.mode=this.settings.httpMethod||"GET"}ProcessIsoCurveRequest.prototype={requestString:null,constructor:ProcessIsoCurveRequest,processRequestString:function(){var o="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var s=new ProcessIsoCurveParam(this.settings),a=s.getParams();for(e=0;e<a.length;e++){var d=a[e];o&&(o+="&"),o+=d.k+"="+d.v}break;case"POST":this.logger.trace("Process POST Request");var b={};b.resource=this.settings.resource,b.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(b.costType="distance",b.costValue=this.settings.distance):(b.costType="time",b.costValue=this.settings.time),b.profile=this.settings.graph,this.settings.reverse?b.direction="arrival":b.direction="departure",b.constraints=this.settings.constraints,b.distanceUnit=this.settings.distanceUnit,b.timeUnit=this.settings.timeUnit,b.crs=this.settings.srs,o=JSON.stringify(b);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(o),this.requestString=o,this.requestString}};function ProcessIsoCurveResponse(){if(!(this instanceof ProcessIsoCurveResponse))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}ProcessIsoCurveResponse.prototype={constructor:ProcessIsoCurveResponse};var ProcessIsoCurveResponseFactory={build:function(o){var e=LoggerByDefault.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var s=null;if(o.response)if(o.rawResponse)e.trace("analyze response : raw"),s=o.response;else{e.trace("analyze response : json");var a;if(typeof o.response=="string"?a=JSON.parse(o.response):a=o.response,s=new ProcessIsoCurveResponse,a){a.costType==="distance"?(s.time="",s.distance=a.costValue):(s.time=a.costValue,s.distance=""),s.message="",s.id="",s.srs=a.crs,s.geometry=a.geometry;var d=a.point.split(",");s.location&&(s.location.x=d[0],s.location.y=d[1])}else{o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",o.response)));return}if(s.exceptionReport){o.onError.call(o.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",s.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{o.onError.call(o.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}o.onSuccess.call(o.scope,s)}};function ProcessIsoCurve(o){if(!(this instanceof ProcessIsoCurve))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",CommonService.apply(this,arguments),this.logger=LoggerByDefault.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!o.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position"));if(o.position.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.x"));if(o.position.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.y"));if(!o.time&&!o.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!o.time&&o.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),o.time&&!o.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=o.resource||"bdtopo-valhalla",this.options.exclusions=o.exclusions||[],this.options.reverse=o.reverse||!1,this.options.srs=o.srs||"EPSG:4326",this.options.distanceUnit=o.distanceUnit||"m",this.options.timeUnit=o.timeUnit||"second",o.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,o.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,o.graph?(o.graph==="Voiture"&&(this.options.graph="car"),o.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],o.constraints)if(Array.isArray(o.constraints))for(var e=0;e<o.constraints.length;e++)this.options.constraints.push(o.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var s={},a={},d={};if(o.exclusions&&o.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var b=0;b<o.exclusions.length;b++){if(typeof o.exclusions[b]=="string")o.exclusions[b]=o.exclusions[b].toLowerCase();else continue;o.exclusions[b]==="toll"&&(d.constraintType="banned",d.key="wayType",d.operator="=",d.value="autoroute",this.options.constraints.push(d)),o.exclusions[b]==="tunnel"&&(s.constraintType="banned",s.key="wayType",s.operator="=",s.value="tunnel",this.options.constraints.push(s)),o.exclusions[b]==="bridge"&&(a.constraintType="banned",a.key="wayType",a.operator="=",a.value="pont",this.options.constraints.push(a))}}if(this.options.outputFormat=typeof o.outputFormat=="string"?o.outputFormat.toLowerCase():"json",o.outputFormat&&o.outputFormat!=="json")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var _=DefaultUrlService.ProcessIsoCurve.newUrl();if(!_)throw new Error("Url by default not found !");this.options.serverUrl=_,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}ProcessIsoCurve.prototype=Object.create(CommonService.prototype,{});ProcessIsoCurve.prototype.constructor=ProcessIsoCurve;ProcessIsoCurve.prototype.buildRequest=function(o,e){try{var s=new ProcessIsoCurveRequest(this.options);if(!s.processRequestString())throw new Error(MessagesResources.getMessage("SERVICE_REQUEST_BUILD"));this.request=s.requestString}catch(a){o.call(this,new ErrorService(a.message));return}e.call(this,this.request)};ProcessIsoCurve.prototype.analyzeResponse=function(o,e){if(this.response){var s={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:o,scope:this};ProcessIsoCurveResponseFactory.build(s)}else o.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};var Services={getConfig:function(o){var e=new Config(o);e.call()},getAltitude:function(o){var e=new Alti(o);e.call()},geocode:function(o){var e=new Geocode(o);e.call()},reverseGeocode:function(o){var e=new ReverseGeocode(o);e.call()},autoComplete:function(o){var e=new AutoComplete(o);e.call()},route:function(o){var e=new Route(o);e.call()},isoCurve:function(o){var e=new ProcessIsoCurve(o);e.call()}};const servicesVersion=Pkg$1.version,servicesDate=Pkg$1.date;var Gp={};Gp.servicesVersion=servicesVersion;Gp.servicesDate=servicesDate;Gp.Protocols={};Gp.Protocols.XHR=XHR;Gp.Services=Services;Gp.Services.DefaultUrl=DefaultUrlService;Gp.Services.AltiResponse=AltiResponse;Gp.Services.Alti={};Gp.Services.Alti.Elevation=Elevation;Gp.Services.AutoCompleteResponse=AutoCompleteResponse;Gp.Services.AutoComplete={};Gp.Services.AutoComplete.SuggestedLocation=SuggestedLocation;Gp.Services.Config=Config;Gp.Services.IsoCurveResponse=ProcessIsoCurveResponse;Gp.Services.RouteResponse=RouteResponse;Gp.Services.Route={};Gp.Services.Route.RouteInstruction=RouteInstruction;Gp.Error=ErrorService;Gp.Helper=Helper;class LRUCache{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let s=this.oldest_;for(;s;)e(s.value_,s.key_,this),s=s.newer}get(e,s){const a=this.entries_[e];return assert(a!==void 0,"Tried to get a value for a key that does not exist in the cache"),a===this.newest_||(a===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(a.newer.older=a.older,a.older.newer=a.newer),a.newer=null,a.older=this.newest_,this.newest_.newer=a,this.newest_=a),a.value_}remove(e){const s=this.entries_[e];return assert(s!==void 0,"Tried to get a value for a key that does not exist in the cache"),s===this.newest_?(this.newest_=s.older,this.newest_&&(this.newest_.newer=null)):s===this.oldest_?(this.oldest_=s.newer,this.oldest_&&(this.oldest_.older=null)):(s.newer.older=s.older,s.older.newer=s.newer),delete this.entries_[e],--this.count_,s.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let s=0,a;for(a=this.newest_;a;a=a.older)e[s++]=a.key_;return e}getValues(){const e=new Array(this.count_);let s=0,a;for(a=this.newest_;a;a=a.older)e[s++]=a.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var s;return(s=this.entries_[e])==null?void 0:s.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,s){this.get(e),this.entries_[e].value_=s}set(e,s){assert(!(e in this.entries_),"Tried to set a value for a key that is used already");const a={key_:e,newer:null,older:this.newest_,value_:s};this.newest_?this.newest_.newer=a:this.oldest_=a,this.newest_=a,this.entries_[e]=a,++this.count_}setSize(e){this.highWaterMark=e}}function createOrUpdate(o,e,s,a){return a!==void 0?(a[0]=o,a[1]=e,a[2]=s,a):[o,e,s]}function getKeyZXY(o,e,s){return o+"/"+e+"/"+s}function getKey$1(o){return getKeyZXY(o[0],o[1],o[2])}function getCacheKeyForTileKey(o){const[e,s,a]=o.substring(o.lastIndexOf("/")+1,o.length).split(",").map(Number);return getKeyZXY(e,s,a)}function fromKey(o){return o.split("/").map(Number)}function hash(o){return(o[1]<<o[0])+o[2]}function withinExtentAndZ(o,e){const s=o[0],a=o[1],d=o[2];if(e.getMinZoom()>s||s>e.getMaxZoom())return!1;const b=e.getFullTileRange(s);return b?b.containsXY(a,d):!0}class TileCache extends LRUCache{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),a=fromKey(e)[0];this.forEach(d=>{d.tileCoord[0]!==a&&(this.remove(getKey$1(d.tileCoord)),d.release())})}}const TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Source extends BaseObject{constructor(e){super(),this.projection=get$3(e.projection),this.attributions_=adaptAttributions(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const s=this;this.viewPromise_=new Promise(function(a,d){s.viewResolver=a,s.viewRejector=d})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=adaptAttributions(e),this.changed()}setState(e){this.state_=e,this.changed()}}function adaptAttributions(o){return o?Array.isArray(o)?function(e){return o}:typeof o=="function"?o:function(e){return[o]}:null}const tmpTileCoord=[0,0,0],DECIMALS$1=5;class TileGrid{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,assert(isSorted(this.resolutions_,(d,b)=>b-d),"`resolutions` must be sorted in descending order");let s;if(!e.origins){for(let d=0,b=this.resolutions_.length-1;d<b;++d)if(!s)s=this.resolutions_[d]/this.resolutions_[d+1];else if(this.resolutions_[d]/this.resolutions_[d+1]!==s){s=void 0;break}}this.zoomFactor_=s,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,assert(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const a=e.extent;a!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(a)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=a!==void 0?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((d,b)=>{const _=new TileRange(Math.min(0,d[0]),Math.max(d[0]-1,-1),Math.min(0,d[1]),Math.max(d[1]-1,-1));if(a){const _e=this.getTileRangeForExtentAndZ(a,b);_.minX=Math.max(_e.minX,_.minX),_.maxX=Math.min(_e.maxX,_.maxX),_.minY=Math.max(_e.minY,_.minY),_.maxY=Math.min(_e.maxY,_.maxY)}return _}):a&&this.calculateTileRanges_(a)}forEachTileCoord(e,s,a){const d=this.getTileRangeForExtentAndZ(e,s);for(let b=d.minX,_=d.maxX;b<=_;++b)for(let _e=d.minY,ot=d.maxY;_e<=ot;++_e)a([s,b,_e])}forEachTileCoordParentTileRange(e,s,a,d){let b,_,_e,ot=null,st=e[0]-1;for(this.zoomFactor_===2?(_=e[1],_e=e[2]):ot=this.getTileCoordExtent(e,d);st>=this.minZoom;){if(_!==void 0&&_e!==void 0?(_=Math.floor(_/2),_e=Math.floor(_e/2),b=createOrUpdate$1(_,_,_e,_e,a)):b=this.getTileRangeForExtentAndZ(ot,st,a),s(st,b))return!0;--st}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,s,a){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const b=e[1]*2,_=e[2]*2;return createOrUpdate$1(b,b+1,_,_+1,s)}const d=this.getTileCoordExtent(e,a||this.tmpExtent_);return this.getTileRangeForExtentAndZ(d,e[0]+1,s)}return null}getTileRangeForTileCoordAndZ(e,s,a){if(s>this.maxZoom||s<this.minZoom)return null;const d=e[0],b=e[1],_=e[2];if(s===d)return createOrUpdate$1(b,_,b,_,a);if(this.zoomFactor_){const ot=Math.pow(this.zoomFactor_,s-d),st=Math.floor(b*ot),ct=Math.floor(_*ot);if(s<d)return createOrUpdate$1(st,st,ct,ct,a);const ft=Math.floor(ot*(b+1))-1,mt=Math.floor(ot*(_+1))-1;return createOrUpdate$1(st,ft,ct,mt,a)}const _e=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(_e,s,a)}getTileRangeForExtentAndZ(e,s,a){this.getTileCoordForXYAndZ_(e[0],e[3],s,!1,tmpTileCoord);const d=tmpTileCoord[1],b=tmpTileCoord[2];this.getTileCoordForXYAndZ_(e[2],e[1],s,!0,tmpTileCoord);const _=tmpTileCoord[1],_e=tmpTileCoord[2];return createOrUpdate$1(d,_,b,_e,a)}getTileCoordCenter(e){const s=this.getOrigin(e[0]),a=this.getResolution(e[0]),d=toSize(this.getTileSize(e[0]),this.tmpSize_);return[s[0]+(e[1]+.5)*d[0]*a,s[1]-(e[2]+.5)*d[1]*a]}getTileCoordExtent(e,s){const a=this.getOrigin(e[0]),d=this.getResolution(e[0]),b=toSize(this.getTileSize(e[0]),this.tmpSize_),_=a[0]+e[1]*b[0]*d,_e=a[1]-(e[2]+1)*b[1]*d,ot=_+b[0]*d,st=_e+b[1]*d;return createOrUpdate$2(_,_e,ot,st,s)}getTileCoordForCoordAndResolution(e,s,a){return this.getTileCoordForXYAndResolution_(e[0],e[1],s,!1,a)}getTileCoordForXYAndResolution_(e,s,a,d,b){const _=this.getZForResolution(a),_e=a/this.getResolution(_),ot=this.getOrigin(_),st=toSize(this.getTileSize(_),this.tmpSize_);let ct=_e*(e-ot[0])/a/st[0],ft=_e*(ot[1]-s)/a/st[1];return d?(ct=ceil(ct,DECIMALS$1)-1,ft=ceil(ft,DECIMALS$1)-1):(ct=floor(ct,DECIMALS$1),ft=floor(ft,DECIMALS$1)),createOrUpdate(_,ct,ft,b)}getTileCoordForXYAndZ_(e,s,a,d,b){const _=this.getOrigin(a),_e=this.getResolution(a),ot=toSize(this.getTileSize(a),this.tmpSize_);let st=(e-_[0])/_e/ot[0],ct=(_[1]-s)/_e/ot[1];return d?(st=ceil(st,DECIMALS$1)-1,ct=ceil(ct,DECIMALS$1)-1):(st=floor(st,DECIMALS$1),ct=floor(ct,DECIMALS$1)),createOrUpdate(a,st,ct,b)}getTileCoordForCoordAndZ(e,s,a){return this.getTileCoordForXYAndZ_(e[0],e[1],s,!1,a)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,s){const a=linearFindNearest(this.resolutions_,e,s||0);return clamp(a,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,s){return intersectsLinearRing(s,0,s.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const s=this.resolutions_.length,a=new Array(s);for(let d=this.minZoom;d<s;++d)a[d]=this.getTileRangeForExtentAndZ(e,d);this.fullTileRanges_=a}}class WMTSTileGrid extends TileGrid{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function createFromCapabilitiesMatrixSet(o,e,s){const a=[],d=[],b=[],_=[],_e=[];s=s!==void 0?s:[];const ot="SupportedCRS",st="TileMatrix",ct="Identifier",ft="ScaleDenominator",mt="TopLeftCorner",bt="TileWidth",wt="TileHeight",Ct=o[ot],Rt=get$3(Ct),It=Rt.getMetersPerUnit(),Pt=Rt.getAxisOrientation().substr(0,2)=="ne";return o[st].sort(function(Tt,Gt){return Gt[ft]-Tt[ft]}),o[st].forEach(function(Tt){let Gt;if(s.length>0?Gt=s.find(function(Jt){return Tt[ct]==Jt[st]?!0:Tt[ct].includes(":")?!1:o[ct]+":"+Tt[ct]===Jt[st]}):Gt=!0,Gt){d.push(Tt[ct]);const Jt=Tt[ft]*28e-5/It,qt=Tt[bt],Nt=Tt[wt];Pt?b.push([Tt[mt][1],Tt[mt][0]]):b.push(Tt[mt]),a.push(Jt),_.push(qt==Nt?qt:[qt,Nt]),_e.push([Tt.MatrixWidth,Tt.MatrixHeight])}}),new WMTSTileGrid({extent:e,origins:b,resolutions:a,matrixIds:d,tileSizes:_,sizes:_e})}function getForProjection(o){let e=o.getDefaultTileGrid();return e||(e=createForProjection(o),o.setDefaultTileGrid(e)),e}function wrapX(o,e,s){const a=e[0],d=o.getTileCoordCenter(e),b=extentFromProjection(s);if(!containsCoordinate(b,d)){const _=getWidth(b),_e=Math.ceil((b[0]-d[0])/_);return d[0]+=_*_e,o.getTileCoordForCoordAndZ(d,a)}return e}function createForExtent(o,e,s,a){a=a!==void 0?a:"top-left";const d=resolutionsFromExtent(o,e,s);return new TileGrid({extent:o,origin:getCorner(o,a),resolutions:d,tileSize:s})}function createXYZ(o){const e=o||{},s=e.extent||get$3("EPSG:3857").getExtent(),a={extent:s,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(s,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid(a)}function resolutionsFromExtent(o,e,s,a){e=e!==void 0?e:DEFAULT_MAX_ZOOM,s=toSize(s!==void 0?s:DEFAULT_TILE_SIZE);const d=getHeight(o),b=getWidth(o);a=a>0?a:Math.max(b/s[0],d/s[1]);const _=e+1,_e=new Array(_);for(let ot=0;ot<_;++ot)_e[ot]=a/Math.pow(2,ot);return _e}function createForProjection(o,e,s,a){const d=extentFromProjection(o);return createForExtent(d,e,s,a)}function extentFromProjection(o){o=get$3(o);let e=o.getExtent();if(!e){const s=180*METERS_PER_UNIT$1.degrees/o.getMetersPerUnit();e=createOrUpdate$2(-s,-s,s,s)}return e}class TileSource extends Source{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const s=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),s),this.tileCache=new TileCache(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,s){const a=this.getTileCacheForProjection(e);a&&a.expireCache(s)}forEachLoadedTile(e,s,a,d){const b=this.getTileCacheForProjection(e);if(!b)return!1;let _=!0,_e,ot,st;for(let ct=a.minX;ct<=a.maxX;++ct)for(let ft=a.minY;ft<=a.maxY;++ft)ot=getKeyZXY(s,ct,ft),st=!1,b.containsKey(ot)&&(_e=b.get(ot),st=_e.getState()===TileState.LOADED,st&&(st=d(_e)!==!1)),st||(_=!1);return _}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const s=e?this.getTileGridForProjection(e):this.tileGrid;return s?s.getResolutions():null}getTile(e,s,a,d,b){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:getForProjection(e)}getTileCacheForProjection(e){const s=this.getProjection();return assert(s===null||equivalent(s,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,s,a){const d=this.getTileGridForProjection(a),b=this.getTilePixelRatio(s),_=toSize(d.getTileSize(e),this.tmpSize);return b==1?_:scale(_,b,this.tmpSize)}getTileCoordForTileUrlFunction(e,s){s=s!==void 0?s:this.getProjection();const a=this.getTileGridForProjection(s);return this.getWrapX()&&s.isGlobal()&&(e=wrapX(a,e,s)),withinExtentAndZ(e,a)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,s){const a=this.getTileCacheForProjection(s);e>a.highWaterMark&&(a.highWaterMark=e)}useTile(e,s,a,d){}}class TileSourceEvent extends BaseEvent{constructor(e,s){super(e),this.tile=s}}function createFromTemplate(o,e){const s=/\{z\}/g,a=/\{x\}/g,d=/\{y\}/g,b=/\{-y\}/g;return function(_,_e,ot){if(_)return o.replace(s,_[0].toString()).replace(a,_[1].toString()).replace(d,_[2].toString()).replace(b,function(){const st=_[0],ct=e.getFullTileRange(st);if(!ct)throw new Error("The {-y} placeholder requires a tile grid with extent");return(ct.getHeight()-_[2]-1).toString()})}}function createFromTemplates(o,e){const s=o.length,a=new Array(s);for(let d=0;d<s;++d)a[d]=createFromTemplate(o[d],e);return createFromTileUrlFunctions(a)}function createFromTileUrlFunctions(o){return o.length===1?o[0]:function(e,s,a){if(!e)return;const d=hash(e),b=modulo(d,o.length);return o[b](e,s,a)}}function expandUrl(o){const e=[];let s=/\{([a-z])-([a-z])\}/.exec(o);if(s){const a=s[1].charCodeAt(0),d=s[2].charCodeAt(0);let b;for(b=a;b<=d;++b)e.push(o.replace(s[0],String.fromCharCode(b)));return e}if(s=/\{(\d+)-(\d+)\}/.exec(o),s){const a=parseInt(s[2],10);for(let d=parseInt(s[1],10);d<=a;d++)e.push(o.replace(s[0],d.toString()));return e}return e.push(o),e}class UrlTile extends TileSource{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const s=e.target,a=getUid(s),d=s.getState();let b;d==TileState.LOADING?(this.tileLoadingKeys_[a]=!0,b=TileEventType.TILELOADSTART):a in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[a],b=d==TileState.ERROR?TileEventType.TILELOADERROR:d==TileState.LOADED?TileEventType.TILELOADEND:void 0),b!=null&&this.dispatchEvent(new TileSourceEvent(b,s))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,s){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof s<"u"?this.setKey(s):this.changed()}setUrl(e){const s=expandUrl(e);this.urls=s,this.setUrls(s)}setUrls(e){this.urls=e;const s=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(e,this.tileGrid),s):this.setKey(s)}tileUrlFunction(e,s,a){}useTile(e,s,a){const d=getKeyZXY(e,s,a);this.tileCache.containsKey(d)&&this.tileCache.get(d)}}class TileImage extends UrlTile{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ImageTile,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,s){const a=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==a?s:{});for(const d in this.tileCacheForProjection){const b=this.tileCacheForProjection[d];b.expireCache(b==a?s:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const s=this.getProjection();if(this.tileGrid&&(!s||equivalent(s,e)))return this.tileGrid;const a=getUid(e);return a in this.tileGridForProjection||(this.tileGridForProjection[a]=getForProjection(e)),this.tileGridForProjection[a]}getTileCacheForProjection(e){const s=this.getProjection();if(!s||equivalent(s,e))return this.tileCache;const a=getUid(e);return a in this.tileCacheForProjection||(this.tileCacheForProjection[a]=new TileCache(this.tileCache.highWaterMark)),this.tileCacheForProjection[a]}createTile_(e,s,a,d,b,_){const _e=[e,s,a],ot=this.getTileCoordForTileUrlFunction(_e,b),st=ot?this.tileUrlFunction(ot,d,b):void 0,ct=new this.tileClass(_e,st!==void 0?TileState.IDLE:TileState.EMPTY,st!==void 0?st:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return ct.key=_,ct.addEventListener(EventType.CHANGE,this.handleTileChange.bind(this)),ct}getTile(e,s,a,d,b){const _=this.getProjection();if(!_||!b||equivalent(_,b))return this.getTileInternal(e,s,a,d,_||b);const _e=this.getTileCacheForProjection(b),ot=[e,s,a];let st;const ct=getKey$1(ot);_e.containsKey(ct)&&(st=_e.get(ct));const ft=this.getKey();if(st&&st.key==ft)return st;const mt=this.getTileGridForProjection(_),bt=this.getTileGridForProjection(b),wt=this.getTileCoordForTileUrlFunction(ot,b),Ct=new ReprojTile(_,mt,b,bt,ot,wt,this.getTilePixelRatio(d),this.getGutter(),(Rt,It,Pt,Tt)=>this.getTileInternal(Rt,It,Pt,Tt,_),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return Ct.key=ft,st?(Ct.interimTile=st,Ct.refreshInterimChain(),_e.replace(ct,Ct)):_e.set(ct,Ct),Ct}getTileInternal(e,s,a,d,b){let _=null;const _e=getKeyZXY(e,s,a),ot=this.getKey();if(!this.tileCache.containsKey(_e))_=this.createTile_(e,s,a,d,b,ot),this.tileCache.set(_e,_);else if(_=this.tileCache.get(_e),_.key!=ot){const st=_;_=this.createTile_(e,s,a,d,b,ot),st.getState()==TileState.IDLE?_.interimTile=st.interimTile:_.interimTile=st,_.refreshInterimChain(),this.tileCache.replace(_e,_)}return _}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const s in this.tileCacheForProjection)this.tileCacheForProjection[s].clear();this.changed()}}setTileGridForProjection(e,s){const a=get$3(e);if(a){const d=getUid(a);d in this.tileGridForProjection||(this.tileGridForProjection[d]=s)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function defaultTileLoadFunction(o,e){o.getImage().src=e}const DECIMALS=4;function appendParams(o,e){const s=[];Object.keys(e).forEach(function(d){e[d]!==null&&e[d]!==void 0&&s.push(d+"="+encodeURIComponent(e[d]))});const a=s.join("&");return o=o.replace(/[?&]$/,""),o+=o.includes("?")?"&":"?",o+a}const DEFAULT_VERSION="1.3.0";function getRequestUrl(o,e,s,a,d){d.WIDTH=s[0],d.HEIGHT=s[1];const b=a.getAxisOrientation();let _;const _e=compareVersions(d.VERSION,"1.3")>=0;return d[_e?"CRS":"SRS"]=a.getCode(),_e&&b.substr(0,2)=="ne"?_=[e[1],e[0],e[3],e[2]]:_=e,d.BBOX=_.join(","),appendParams(o,d)}function getImageSrc(o,e,s,a,d,b,_){b=Object.assign({REQUEST:"GetMap"},b);const _e=e/s,ot=[round(getWidth(o)/_e,DECIMALS),round(getHeight(o)/_e,DECIMALS)];if(s!=1)switch(_){case"geoserver":const ct=90*s+.5|0;"FORMAT_OPTIONS"in b?b.FORMAT_OPTIONS+=";dpi:"+ct:b.FORMAT_OPTIONS="dpi:"+ct;break;case"mapserver":b.MAP_RESOLUTION=90*s;break;case"carmentaserver":case"qgis":b.DPI=90*s;break;default:throw new Error("Unknown `serverType` configured")}return getRequestUrl(d,o,ot,a,b)}function getRequestParams(o,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:DEFAULT_VERSION,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},o)}class TileWMS extends TileImage{constructor(e){e=e||{};const s=Object.assign({},e.params),a="TRANSPARENT"in s?s.TRANSPARENT:!0;super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!a,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=s,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,s,a,d){const b=get$3(a),_=this.getProjection()||b;let _e=this.getTileGrid();_e||(_e=this.getTileGridForProjection(_));const ot=transform$1(e,b,_),st=calculateSourceResolution(_,b,e,s),ct=_e.getZForResolution(st,this.zDirection),ft=_e.getResolution(ct),mt=_e.getTileCoordForCoordAndZ(ot,ct);if(_e.getResolutions().length<=mt[0])return;let bt=_e.getTileCoordExtent(mt,this.tmpExtent_);const wt=this.gutter_;wt!==0&&(bt=buffer(bt,ft*wt,bt));const Ct={QUERY_LAYERS:this.params_.LAYERS};Object.assign(Ct,getRequestParams(this.params_,"GetFeatureInfo"),d);const Rt=Math.floor((ot[0]-bt[0])/ft),It=Math.floor((bt[3]-ot[1])/ft);return Ct[this.v13_?"I":"X"]=Rt,Ct[this.v13_?"J":"Y"]=It,this.getRequestUrl_(mt,bt,1,_||b,Ct)}getLegendUrl(e,s){if(this.urls[0]===void 0)return;const a={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(s===void 0||s.LAYER===void 0){const d=this.params_.LAYERS;if(!(!Array.isArray(d)||d.length===1))return;a.LAYER=d}if(e!==void 0){const d=this.getProjection()?this.getProjection().getMetersPerUnit():1,b=28e-5;a.SCALE=e*d/b}return Object.assign(a,s),appendParams(this.urls[0],a)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,s,a,d,b){const _=this.urls;if(!_)return;let _e;if(_.length==1)_e=_[0];else{const ot=modulo(hash(e),_.length);_e=_[ot]}return getImageSrc(s,(this.tileGrid||this.getTileGridForProjection(d)).getResolution(e[0]),a,d,_e,b,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const s=[];for(const a in this.params_)s[e++]=a+"-"+this.params_[a];return s.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||DEFAULT_VERSION;this.v13_=compareVersions(e,"1.3")>=0}tileUrlFunction(e,s,a){let d=this.getTileGrid();if(d||(d=this.getTileGridForProjection(a)),d.getResolutions().length<=e[0])return;s!=1&&(!this.hidpi_||this.serverType_===void 0)&&(s=1);const b=d.getResolution(e[0]);let _=d.getTileCoordExtent(e,this.tmpExtent_);const _e=this.gutter_;_e!==0&&(_=buffer(_,b*_e,_));const ot=Object.assign({},getRequestParams(this.params_,"GetMap"));return this.getRequestUrl_(e,_,s,a,ot)}}const name="geopf-extensions-openlayers",description="French Geoportal Extensions for OpenLayers libraries",version$1="1.0.0-beta.0-241",date="05/11/2024",module="src/index.js",directories={},engines={node:">=20"},repository={type:"git",url:"https://github.com/IGNF/geopf-extensions-openlayers.git"},author="IGNF",keywords=["geoportail","geoplateforme","javascript","OpenLayers 8"],license="AGPL-3.0",bugs={url:"https://github.com/IGNF/geopf-extensions-openlayers/issues"},homepage="https://github.com/IGNF/geopf-extensions-openlayers#readme",dependencies={"@gouvfr/dsfr":"^1.11.0","@mapbox/mapbox-gl-style-spec":"14.7.1",eventbusjs:"0.2.0","geoportal-access-lib":"3.4.3",loglevel:"^1.9.1",ol:"8.2.0","ol-mapbox-style":"12.3.5",proj4:"2.12.1",sortablejs:"1.15.3",typescript:"^5.3.3","whatwg-fetch":"3.6.20","@xmldom/xmldom":"^0.9.0"},Pkg={name,description,version:version$1,date,module,directories,engines,repository,author,keywords,license,bugs,homepage,dependencies};LoggerByDefault$1.getLogger("sourcewms");var SourceWMS=class extends TileWMS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var s=e.configuration,a=s?s.params:null,d=e.apiKey;if(!s){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var b=Config$1.configuration.getLayerId(e.layer,"WMS");if(!b)throw new Error(`ERROR : WMS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(s=Config$1.configuration.getLayerConf(b),!s)throw new Error("ERROR : WMS Layer configuration cannot be found in Geoportal.");d=Config$1.configuration.getLayerKey(b)[0],a=Config$1.configuration.getLayerParams(e.layer,"WMS")}var _=e.ssl===!1?"http://":"https://",_e={"gp-ol-ext":Pkg.olExtVersion||Pkg.version};if(a.url.includes("/private/")){var ot=e.apiKey||d;if(!ot)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");_e.apikey=ot}var st={url:Gp.Helper.normalyzeUrl(a.url.replace(/(http|https):\/\//,_),_e,!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:a.version,STYLES:a.styles,FORMAT:a.format}};return Helper$1.mergeParams(st,e.olParams),e.olParams&&!a.originators&&(a.originators=e.olParams.attributions),super(st),this._originators=a.originators,this._legends=e.legends||a.legends,this._metadata=e.metadata||a.metadata,this._title=e.title||a.title,this._description=e.description||a.description,this._quicklookUrl=e.quicklookUrl||a.quicklookUrl,this.name=e.layer,this.service="WMS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=SourceWMS);var LayerWMS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var s=e.configuration;if(!s){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var a=Config$1.configuration.getLayerId(e.layer,"WMS");if(s=Config$1.configuration.getLayerConf(a),!s)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var d;e.olParams&&e.olParams.sourceParams&&(d=e.olParams.sourceParams);var b=new SourceWMS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:d}),_={source:b};if(b.getParams().LAYERS!==void 0&&d&&d.projection){var _e=[s.globalConstraints.extent.left,s.globalConstraints.extent.bottom,s.globalConstraints.extent.right,s.globalConstraints.extent.top];_.extent=transformExtent(_e,"EPSG:4326",d.projection);var ot;typeof d.projection=="string"?ot=get$3(d.projection):typeof d.projection=="object"&&d.projection.getCode()&&(ot=get$3(d.projection.getCode())),ot&&ot.getUnits()&&(ot.getUnits()==="m"?(_.minResolution=(s.globalConstraints.minScale-1)*28e-5,_.maxResolution=(s.globalConstraints.maxScale+1)*28e-5):ot.getUnits()==="degrees"&&(_.minResolution=(s.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),_.maxResolution=(s.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper$1.mergeParams(_,e.olParams),super(_),this.name=e.layer,this.service="WMS",this}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=LayerWMS);let WMTS$1=class extends TileImage{constructor(e){const s=e.requestEncoding!==void 0?e.requestEncoding:"KVP",a=e.tileGrid;let d=e.urls;d===void 0&&e.url!==void 0&&(d=expandUrl(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:a,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:d,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=s,this.setKey(this.getKeyForDimensions_()),d&&d.length>0&&(this.tileUrlFunction=createFromTileUrlFunctions(d.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const s=e.join(`
`);this.setTileUrlFunction(createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate.bind(this))),s)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const s in this.dimensions_)e.push(s+"-"+this.dimensions_[s]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const s=this.requestEncoding_,a={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};s=="KVP"&&Object.assign(a,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=s=="KVP"?appendParams(e,a):e.replace(/\{(\w+?)\}/g,function(_,_e){return _e.toLowerCase()in a?a[_e.toLowerCase()]:_});const d=this.tileGrid,b=this.dimensions_;return function(_,_e,ot){if(!_)return;const st={TileMatrix:d.getMatrixId(_[0]),TileCol:_[1],TileRow:_[2]};Object.assign(st,b);let ct=e;return s=="KVP"?ct=appendParams(ct,st):ct=ct.replace(/\{(\w+?)\}/g,function(ft,mt){return st[mt]}),ct}}};function optionsFromCapabilities(o,e){const a=o.Contents.Layer.find(function(Wt){return Wt.Identifier==e.layer});if(!a)return null;const d=o.Contents.TileMatrixSet;let b;a.TileMatrixSetLink.length>1?"projection"in e?b=a.TileMatrixSetLink.findIndex(function(Wt){const pn=d.find(function(Hn){return Hn.Identifier==Wt.TileMatrixSet}).SupportedCRS,hn=get$3(pn),Mt=get$3(e.projection);return hn&&Mt?equivalent(hn,Mt):pn==e.projection}):b=a.TileMatrixSetLink.findIndex(function(Wt){return Wt.TileMatrixSet==e.matrixSet}):b=0,b<0&&(b=0);const _=a.TileMatrixSetLink[b].TileMatrixSet,_e=a.TileMatrixSetLink[b].TileMatrixSetLimits;let ot=a.Format[0];"format"in e&&(ot=e.format),b=a.Style.findIndex(function(Wt){return"style"in e?Wt.Title==e.style:Wt.isDefault}),b<0&&(b=0);const st=a.Style[b].Identifier,ct={};"Dimension"in a&&a.Dimension.forEach(function(Wt,so,pn){const hn=Wt.Identifier;let Mt=Wt.Default;Mt===void 0&&(Mt=Wt.Value[0]),ct[hn]=Mt});const mt=o.Contents.TileMatrixSet.find(function(Wt){return Wt.Identifier==_});let bt;const wt=mt.SupportedCRS;if(wt&&(bt=get$3(wt)),"projection"in e){const Wt=get$3(e.projection);Wt&&(!bt||equivalent(Wt,bt))&&(bt=Wt)}let Ct=!1;const Rt=bt.getAxisOrientation().substr(0,2)=="ne";let It=mt.TileMatrix[0],Pt={MinTileCol:0,MinTileRow:0,MaxTileCol:It.MatrixWidth-1,MaxTileRow:It.MatrixHeight-1};if(_e){Pt=_e[_e.length-1];const Wt=mt.TileMatrix.find(so=>so.Identifier===Pt.TileMatrix||mt.Identifier+":"+so.Identifier===Pt.TileMatrix);Wt&&(It=Wt)}const Tt=It.ScaleDenominator*28e-5/bt.getMetersPerUnit(),Gt=Rt?[It.TopLeftCorner[1],It.TopLeftCorner[0]]:It.TopLeftCorner,Jt=It.TileWidth*Tt,qt=It.TileHeight*Tt;let Nt=mt.BoundingBox;Nt&&Rt&&(Nt=[Nt[1],Nt[0],Nt[3],Nt[2]]);let Qt=[Gt[0]+Jt*Pt.MinTileCol,Gt[1]-qt*(1+Pt.MaxTileRow),Gt[0]+Jt*(1+Pt.MaxTileCol),Gt[1]-qt*Pt.MinTileRow];if(Nt!==void 0&&!containsExtent(Nt,Qt)){const Wt=a.WGS84BoundingBox,so=get$3("EPSG:4326").getExtent();if(Qt=Nt,Wt)Ct=Wt[0]===so[0]&&Wt[2]===so[2];else{const pn=transformExtent(Nt,mt.SupportedCRS,"EPSG:4326");Ct=pn[0]-1e-10<=so[0]&&pn[2]+1e-10>=so[2]}}const fn=createFromCapabilitiesMatrixSet(mt,Qt,_e),Mn=[];let ln=e.requestEncoding;if(ln=ln!==void 0?ln:"","OperationsMetadata"in o&&"GetTile"in o.OperationsMetadata){const Wt=o.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let so=0,pn=Wt.length;so<pn;++so)if(Wt[so].Constraint){const Mt=Wt[so].Constraint.find(function(Hn){return Hn.name=="GetEncoding"}).AllowedValues.Value;if(ln===""&&(ln=Mt[0]),ln==="KVP")Mt.includes("KVP")&&Mn.push(Wt[so].href);else break}else Wt[so].href&&(ln="KVP",Mn.push(Wt[so].href))}return Mn.length===0&&(ln="REST",a.ResourceURL.forEach(function(Wt){Wt.resourceType==="tile"&&(ot=Wt.format,Mn.push(Wt.template))})),{urls:Mn,layer:e.layer,matrixSet:_,format:ot,projection:bt,requestEncoding:ln,tileGrid:fn,style:st,dimensions:ct,wrapX:Ct,crossOrigin:e.crossOrigin}}var WMTS=class extends WMTS$1{constructor(e){super(e)}getFeatureInfoUrl(e,s,a,d){var b=this.options&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,_=this.tileGrid,_e=this.tileGrid.getTileCoordForCoordAndResolution(e,s),ot=function(Tt,Gt,Jt){var qt=[0,0,0],Nt=createEmpty(),Qt=Tt[1],fn=Tt[2],Mn=Gt.getTileCoordExtent(Tt),ln=Jt.getExtent();if(ln!=null&&Jt.isGlobal()){var Wt=Math.ceil(getWidth(ln)/getWidth(Mn));Qt=Qt%Wt,qt[0]=Tt[0],qt[1]=Qt,qt[2]=Tt[2],Mn=Gt.getTileCoordExtent(qt,Nt)}return intersects$1(Mn,ln)?[Tt[0],Qt,fn]:null},st=_.getTileCoordExtent(_e),ct=ot(_e,_,a);if(!(_.getResolutions().length<=_e[0])){var ft=_.getResolution(_e[0]),mt=_.getMatrixIds()[_e[0]],bt={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:ct[1],TILEROW:ct[2],TILEMATRIX:mt,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};Helper$1.assign(bt,d);var wt=Math.floor((e[0]-st[0])/(ft/b)),Ct=Math.floor((st[3]-e[1])/(ft/b)),Rt=_.getTileSize(_e[0]);wt=Math.min(wt,(Rt[0]|Rt)-1),Ct=Math.max(Ct,0),bt.I=wt,bt.J=Ct;var It=this.urls[0],Pt=Gp.Helper.normalyzeUrl(It,bt);return Pt}}};window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=WMTS);var LayerUtils={getZoomLevelFromScaleDenominator:function(o,e){var s={};switch(e){case"EPSG:2154":s={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:s={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424};break}var a=o*28e-5;for(var d in s)if(s.hasOwnProperty(d)&&s[d]<=a)return d=parseInt(d,10),d;return 0},getAttributions:function(o){var e=o.zoom,s=[];if(o.originators!=null&&o.visibility)for(var a,d=0,b=o.originators.length;d<b;d++){a=!0;for(var _=o.originators[d],_e=o.originators[d].constraints||[],ot=0,st=_e.length;ot<st;ot++){var ct=_e[ot];a=!0;var ft=this.getZoomLevelFromScaleDenominator(ct.maxScaleDenominator,o.crs),mt=this.getZoomLevelFromScaleDenominator(ct.minScaleDenominator,o.crs)||21;ft&&ft>e&&(a=!1),a&&mt&&mt<e&&(a=!1);var bt=ct.bbox;if(a&&bt){a=!1;var wt=o.extent;if(wt){var Ct=[bt.top,bt.left,bt.bottom,bt.right];if(this.intersects(wt,Ct)){a=!0;break}}}}if(a){var Rt=_.logo,It=_.url,Pt=_.name?_.name:"",Tt=_.attribution,Gt=document.createElement("div");Gt.className="gp-control-attribution";var Jt=null;Jt=document.createElement("a"),Jt.className="gp-control-attribution-link",Jt.target="_blank",Gt.appendChild(Jt),It&&(Jt.href=It);var qt=!!Rt,Nt=null;qt?(Nt=document.createElement("img"),Jt?(Nt.className="gp-control-attribution-image",Jt.appendChild(Nt)):(Nt.className="",Gt.appendChild(Nt)),Nt.src=Rt,Nt.title=Tt||Pt,Nt.style.height="30px",Nt.style.width="30px"):Pt?Jt.textContent=Pt:Tt?Jt.textContent=Tt:It?Jt.textContent=It:Jt.textContent="",s.push(Gt.innerHTML+" ")}}return s},intersects:function(o,e){var s=o[1]<=e[3]&&e[1]<=o[3],a=o[2]<=e[0]&&e[2]<=o[0];return s&&a}};LoggerByDefault$1.getLogger("sourcewmts");var SourceWMTS=class extends WMTS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var s=e.configuration,a=s?s.params:null,d=e.apiKey;if(!s){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var b=Config$1.configuration.getLayerId(e.layer,"WMTS");if(!b)throw new Error(`ERROR : WMTS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(s=Config$1.configuration.getLayerConf(b),!s)throw new Error("ERROR : WMTS Layer configuration cannot be found in Geoportal.");d=Config$1.configuration.getLayerKey(b)[0],a=Config$1.configuration.getLayerParams(e.layer,"WMTS")}var _=e.ssl===!1?"http://":"https://",_e={"gp-ol-ext":Pkg.olExtVersion||Pkg.version};if(a.url.includes("/private/")){var ot=e.apiKey||d;if(!ot)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");_e.apikey=ot}var st={url:Gp.Helper.normalyzeUrl(a.url.replace(/(http|https):\/\//,_),_e,!1),version:a.version,style:a.styles,format:a.format,projection:a.projection,maxZoom:LayerUtils.getZoomLevelFromScaleDenominator(a.minScale),layer:e.layer,matrixSet:a.TMSLink,tileGrid:new WMTSTileGrid({resolutions:a.nativeResolutions,matrixIds:a.matrixIds,origin:[Object.values(a.tileMatrices)[0].topLeftCorner.x,Object.values(a.tileMatrices)[0].topLeftCorner.y]})};return Helper$1.mergeParams(st,e.olParams),e.olParams&&!a.originators&&(a.originators=e.olParams.attributions),super(st),this._originators=a.originators,this._legends=e.legends||a.legends,this._metadata=e.metadata||a.metadata,this._description=e.description||a.description,this._title=e.title||a.title,this._quicklookUrl=e.quicklookUrl||a.quicklookUrl,this.name=e.layer,this.service="WMTS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=SourceWMTS);var LayerWMTS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var s=e.configuration;if(!s){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var a=Config$1.configuration.getLayerId(e.layer,"WMTS");if(s=Config$1.configuration.getLayerConf(a),!s)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var d;e.olParams&&e.olParams.sourceParams&&(d=e.olParams.sourceParams);var b=new SourceWMTS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:d}),_={source:b};if(b.getLayer()!==void 0&&s.globalConstraints&&s.globalConstraints.projection){var _e;typeof s.globalConstraints.projection=="string"&&(_e=get$3(s.globalConstraints.projection)),_e&&_e.getUnits()&&(_e.getUnits()==="m"?(_.minResolution=(s.globalConstraints.minScale-1)*28e-5,_.maxResolution=(s.globalConstraints.maxScale+1)*28e-5):_e.getUnits()==="degrees"&&(_.minResolution=(s.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),_.maxResolution=(s.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper$1.mergeParams(_,e.olParams),super(_),this.name=e.layer,this.service="WMTS",this}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=LayerWMTS);function quickselect(o,e,s,a,d){quickselectStep(o,e,s||0,a||o.length-1,d||defaultCompare)}function quickselectStep(o,e,s,a,d){for(;a>s;){if(a-s>600){var b=a-s+1,_=e-s+1,_e=Math.log(b),ot=.5*Math.exp(2*_e/3),st=.5*Math.sqrt(_e*ot*(b-ot)/b)*(_-b/2<0?-1:1),ct=Math.max(s,Math.floor(e-_*ot/b+st)),ft=Math.min(a,Math.floor(e+(b-_)*ot/b+st));quickselectStep(o,e,ct,ft,d)}var mt=o[e],bt=s,wt=a;for(swap(o,s,e),d(o[a],mt)>0&&swap(o,s,a);bt<wt;){for(swap(o,bt,wt),bt++,wt--;d(o[bt],mt)<0;)bt++;for(;d(o[wt],mt)>0;)wt--}d(o[s],mt)===0?swap(o,s,wt):(wt++,swap(o,wt,a)),wt<=e&&(s=wt+1),e<=wt&&(a=wt-1)}}function swap(o,e,s){var a=o[e];o[e]=o[s],o[s]=a}function defaultCompare(o,e){return o<e?-1:o>e?1:0}let RBush$1=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let s=this.data;const a=[];if(!intersects(e,s))return a;const d=this.toBBox,b=[];for(;s;){for(let _=0;_<s.children.length;_++){const _e=s.children[_],ot=s.leaf?d(_e):_e;intersects(e,ot)&&(s.leaf?a.push(_e):contains(e,ot)?this._all(_e,a):b.push(_e))}s=b.pop()}return a}collides(e){let s=this.data;if(!intersects(e,s))return!1;const a=[];for(;s;){for(let d=0;d<s.children.length;d++){const b=s.children[d],_=s.leaf?this.toBBox(b):b;if(intersects(e,_)){if(s.leaf||contains(e,_))return!0;a.push(b)}}s=a.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let a=0;a<e.length;a++)this.insert(e[a]);return this}let s=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=s;else if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){const a=this.data;this.data=s,s=a}this._insert(s,this.data.height-s.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(e,s){if(!e)return this;let a=this.data;const d=this.toBBox(e),b=[],_=[];let _e,ot,st;for(;a||b.length;){if(a||(a=b.pop(),ot=b[b.length-1],_e=_.pop(),st=!0),a.leaf){const ct=findItem(e,a.children,s);if(ct!==-1)return a.children.splice(ct,1),b.push(a),this._condense(b),this}!st&&!a.leaf&&contains(a,d)?(b.push(a),_.push(_e),_e=0,ot=a,a=a.children[0]):ot?(_e++,a=ot.children[_e],st=!1):a=null}return this}toBBox(e){return e}compareMinX(e,s){return e.minX-s.minX}compareMinY(e,s){return e.minY-s.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,s){const a=[];for(;e;)e.leaf?s.push(...e.children):a.push(...e.children),e=a.pop();return s}_build(e,s,a,d){const b=a-s+1;let _=this._maxEntries,_e;if(b<=_)return _e=createNode(e.slice(s,a+1)),calcBBox(_e,this.toBBox),_e;d||(d=Math.ceil(Math.log(b)/Math.log(_)),_=Math.ceil(b/Math.pow(_,d-1))),_e=createNode([]),_e.leaf=!1,_e.height=d;const ot=Math.ceil(b/_),st=ot*Math.ceil(Math.sqrt(_));multiSelect(e,s,a,st,this.compareMinX);for(let ct=s;ct<=a;ct+=st){const ft=Math.min(ct+st-1,a);multiSelect(e,ct,ft,ot,this.compareMinY);for(let mt=ct;mt<=ft;mt+=ot){const bt=Math.min(mt+ot-1,ft);_e.children.push(this._build(e,mt,bt,d-1))}}return calcBBox(_e,this.toBBox),_e}_chooseSubtree(e,s,a,d){for(;d.push(s),!(s.leaf||d.length-1===a);){let b=1/0,_=1/0,_e;for(let ot=0;ot<s.children.length;ot++){const st=s.children[ot],ct=bboxArea(st),ft=enlargedArea(e,st)-ct;ft<_?(_=ft,b=ct<b?ct:b,_e=st):ft===_&&ct<b&&(b=ct,_e=st)}s=_e||s.children[0]}return s}_insert(e,s,a){const d=a?e:this.toBBox(e),b=[],_=this._chooseSubtree(d,this.data,s,b);for(_.children.push(e),extend$2(_,d);s>=0&&b[s].children.length>this._maxEntries;)this._split(b,s),s--;this._adjustParentBBoxes(d,b,s)}_split(e,s){const a=e[s],d=a.children.length,b=this._minEntries;this._chooseSplitAxis(a,b,d);const _=this._chooseSplitIndex(a,b,d),_e=createNode(a.children.splice(_,a.children.length-_));_e.height=a.height,_e.leaf=a.leaf,calcBBox(a,this.toBBox),calcBBox(_e,this.toBBox),s?e[s-1].children.push(_e):this._splitRoot(a,_e)}_splitRoot(e,s){this.data=createNode([e,s]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(e,s,a){let d,b=1/0,_=1/0;for(let _e=s;_e<=a-s;_e++){const ot=distBBox(e,0,_e,this.toBBox),st=distBBox(e,_e,a,this.toBBox),ct=intersectionArea(ot,st),ft=bboxArea(ot)+bboxArea(st);ct<b?(b=ct,d=_e,_=ft<_?ft:_):ct===b&&ft<_&&(_=ft,d=_e)}return d||a-s}_chooseSplitAxis(e,s,a){const d=e.leaf?this.compareMinX:compareNodeMinX,b=e.leaf?this.compareMinY:compareNodeMinY,_=this._allDistMargin(e,s,a,d),_e=this._allDistMargin(e,s,a,b);_<_e&&e.children.sort(d)}_allDistMargin(e,s,a,d){e.children.sort(d);const b=this.toBBox,_=distBBox(e,0,s,b),_e=distBBox(e,a-s,a,b);let ot=bboxMargin(_)+bboxMargin(_e);for(let st=s;st<a-s;st++){const ct=e.children[st];extend$2(_,e.leaf?b(ct):ct),ot+=bboxMargin(_)}for(let st=a-s-1;st>=s;st--){const ct=e.children[st];extend$2(_e,e.leaf?b(ct):ct),ot+=bboxMargin(_e)}return ot}_adjustParentBBoxes(e,s,a){for(let d=a;d>=0;d--)extend$2(s[d],e)}_condense(e){for(let s=e.length-1,a;s>=0;s--)e[s].children.length===0?s>0?(a=e[s-1].children,a.splice(a.indexOf(e[s]),1)):this.clear():calcBBox(e[s],this.toBBox)}};function findItem(o,e,s){if(!s)return e.indexOf(o);for(let a=0;a<e.length;a++)if(s(o,e[a]))return a;return-1}function calcBBox(o,e){distBBox(o,0,o.children.length,e,o)}function distBBox(o,e,s,a,d){d||(d=createNode(null)),d.minX=1/0,d.minY=1/0,d.maxX=-1/0,d.maxY=-1/0;for(let b=e;b<s;b++){const _=o.children[b];extend$2(d,o.leaf?a(_):_)}return d}function extend$2(o,e){return o.minX=Math.min(o.minX,e.minX),o.minY=Math.min(o.minY,e.minY),o.maxX=Math.max(o.maxX,e.maxX),o.maxY=Math.max(o.maxY,e.maxY),o}function compareNodeMinX(o,e){return o.minX-e.minX}function compareNodeMinY(o,e){return o.minY-e.minY}function bboxArea(o){return(o.maxX-o.minX)*(o.maxY-o.minY)}function bboxMargin(o){return o.maxX-o.minX+(o.maxY-o.minY)}function enlargedArea(o,e){return(Math.max(e.maxX,o.maxX)-Math.min(e.minX,o.minX))*(Math.max(e.maxY,o.maxY)-Math.min(e.minY,o.minY))}function intersectionArea(o,e){const s=Math.max(o.minX,e.minX),a=Math.max(o.minY,e.minY),d=Math.min(o.maxX,e.maxX),b=Math.min(o.maxY,e.maxY);return Math.max(0,d-s)*Math.max(0,b-a)}function contains(o,e){return o.minX<=e.minX&&o.minY<=e.minY&&e.maxX<=o.maxX&&e.maxY<=o.maxY}function intersects(o,e){return e.minX<=o.maxX&&e.minY<=o.maxY&&e.maxX>=o.minX&&e.maxY>=o.minY}function createNode(o){return{children:o,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(o,e,s,a,d){const b=[e,s];for(;b.length;){if(s=b.pop(),e=b.pop(),s-e<=a)continue;const _=e+Math.ceil((s-e)/a/2)*a;quickselect(o,_,e,s,d),b.push(e,_,_,s)}}class ImageStyle{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=toSize(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(e){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(e){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e)}listenImageChange(e){abstract()}load(){abstract()}unlistenImageChange(e){abstract()}}function asColorLike(o){return Array.isArray(o)?toString$2(o):o}const CLASS_HIDDEN="ol-hidden",CLASS_SELECTABLE="ol-selectable",CLASS_UNSELECTABLE="ol-unselectable",CLASS_UNSUPPORTED="ol-unsupported",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(o){const e=o.match(fontRegEx);if(!e)return null;const s={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let a=0,d=fontRegExMatchIndex.length;a<d;++a){const b=e[a+1];b!==void 0&&(s[fontRegExMatchIndex[a]]=b)}return s.families=s.family.split(/,\s?/),s},defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject;let measureContext$1=null,measureFont;const textHeights={},registerFont=function(){const e="32px ",s=["monospace","serif"],a=s.length,d="wmytzilWMYTZIL@#/&?$%10";let b,_;function _e(st,ct,ft){let mt=!0;for(let bt=0;bt<a;++bt){const wt=s[bt];if(_=measureTextWidth(st+" "+ct+" "+e+wt,d),ft!=wt){const Ct=measureTextWidth(st+" "+ct+" "+e+ft+","+wt,d);mt=mt&&Ct!=_}}return!!mt}function ot(){let st=!0;const ct=checkedFonts.getKeys();for(let ft=0,mt=ct.length;ft<mt;++ft){const bt=ct[ft];checkedFonts.get(bt)<100&&(_e.apply(this,bt.split(`
`))?(clear$1(textHeights),measureContext$1=null,measureFont=void 0,checkedFonts.set(bt,100)):(checkedFonts.set(bt,checkedFonts.get(bt)+1,!0),st=!1))}st&&(clearInterval(b),b=void 0)}return function(st){const ct=getFontParameters(st);if(!ct)return;const ft=ct.families;for(let mt=0,bt=ft.length;mt<bt;++mt){const wt=ft[mt],Ct=ct.style+`
`+ct.weight+`
`+wt;checkedFonts.get(Ct)===void 0&&(checkedFonts.set(Ct,100,!0),_e(ct.style,ct.weight,wt)||(checkedFonts.set(Ct,0,!0),b===void 0&&(b=setInterval(ot,32))))}}}(),measureTextHeight=function(){let o;return function(e){let s=textHeights[e];if(s==null){if(WORKER_OFFSCREEN_CANVAS){const a=getFontParameters(e),d=measureText$1(e,"g");s=(isNaN(Number(a.lineHeight))?1.2:Number(a.lineHeight))*(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent)}else o||(o=document.createElement("div"),o.innerHTML="M",o.style.minHeight="0",o.style.maxHeight="none",o.style.height="auto",o.style.padding="0",o.style.border="none",o.style.position="absolute",o.style.display="block",o.style.left="-99999px"),o.style.font=e,document.body.appendChild(o),s=o.offsetHeight,document.body.removeChild(o);textHeights[e]=s}return s}}();function measureText$1(o,e){return measureContext$1||(measureContext$1=createCanvasContext2D(1,1)),o!=measureFont&&(measureContext$1.font=o,measureFont=measureContext$1.font),measureContext$1.measureText(e)}function measureTextWidth(o,e){return measureText$1(o,e).width}function measureAndCacheTextWidth(o,e,s){if(e in s)return s[e];const a=e.split(`
`).reduce((d,b)=>Math.max(d,measureTextWidth(o,b)),0);return s[e]=a,a}function getTextDimensions(o,e){const s=[],a=[],d=[];let b=0,_=0,_e=0,ot=0;for(let st=0,ct=e.length;st<=ct;st+=2){const ft=e[st];if(ft===`
`||st===ct){b=Math.max(b,_),d.push(_),_=0,_e+=ot;continue}const mt=e[st+1]||o.font,bt=measureTextWidth(mt,ft);s.push(bt),_+=bt;const wt=measureTextHeight(mt);a.push(wt),ot=Math.max(ot,wt)}return{width:b,height:_e,widths:s,heights:a,lineWidths:d}}function drawImageOrLabel(o,e,s,a,d,b,_,_e,ot,st,ct){o.save(),s!==1&&(o.globalAlpha*=s),e&&o.transform.apply(o,e),a.contextInstructions?(o.translate(ot,st),o.scale(ct[0],ct[1]),executeLabelInstructions(a,o)):ct[0]<0||ct[1]<0?(o.translate(ot,st),o.scale(ct[0],ct[1]),o.drawImage(a,d,b,_,_e,0,0,_,_e)):o.drawImage(a,d,b,_,_e,ot,st,_*ct[0],_e*ct[1]),o.restore()}function executeLabelInstructions(o,e){const s=o.contextInstructions;for(let a=0,d=s.length;a<d;a+=2)Array.isArray(s[a+1])?e[s[a]].apply(e,s[a+1]):e[s[a]]=s[a+1]}class RegularShape extends ImageStyle{constructor(e){const s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:s,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.render()}clone(){const e=this.getScale(),s=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return s.setOpacity(this.getOpacity()),s}getAnchor(){const e=this.size_,s=this.getDisplacement(),a=this.getScaleArray();return[e[0]/2-s[0]/a[0],e[1]/2+s[1]/a[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let s=this.canvases_[e];if(!s){const a=this.renderOptions_,d=createCanvasContext2D(a.size*e,a.size*e);this.draw_(a,d,e),s=d.canvas,this.canvases_[e]=s}return s}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return ImageState.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,s,a){if(s===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return s;let d=this.radius_,b=this.radius2_===void 0?d:this.radius2_;if(d<b){const qt=d;d=b,b=qt}const _=this.radius2_===void 0?this.points_:this.points_*2,_e=2*Math.PI/_,ot=b*Math.sin(_e),st=Math.sqrt(b*b-ot*ot),ct=d-st,ft=Math.sqrt(ot*ot+ct*ct),mt=ft/ot;if(e==="miter"&&mt<=a)return mt*s;const bt=s/2/mt,wt=s/2*(ct/ft),Rt=Math.sqrt((d+bt)*(d+bt)+wt*wt)-d;if(this.radius2_===void 0||e==="bevel")return Rt*2;const It=d*Math.sin(_e),Pt=Math.sqrt(d*d-It*It),Tt=b-Pt,Jt=Math.sqrt(It*It+Tt*Tt)/It;if(Jt<=a){const qt=Jt*s/2-b-d;return 2*Math.max(Rt,qt)}return Rt*2}createRenderOptions(){let e=defaultLineCap,s=defaultLineJoin,a=0,d=null,b=0,_,_e=0;this.stroke_&&(_=asColorLike(this.stroke_.getColor()??defaultStrokeStyle),_e=this.stroke_.getWidth()??defaultLineWidth,d=this.stroke_.getLineDash(),b=this.stroke_.getLineDashOffset()??0,s=this.stroke_.getLineJoin()??defaultLineJoin,e=this.stroke_.getLineCap()??defaultLineCap,a=this.stroke_.getMiterLimit()??defaultMiterLimit);const ot=this.calculateLineJoinSize_(s,_e,a),st=Math.max(this.radius_,this.radius2_||0),ct=Math.ceil(2*st+ot);return{strokeStyle:_,strokeWidth:_e,size:ct,lineCap:e,lineDash:d,lineDashOffset:b,lineJoin:s,miterLimit:a}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,s,a){if(s.scale(a,a),s.translate(e.size/2,e.size/2),this.createPath_(s),this.fill_){let d=this.fill_.getColor();d===null&&(d=defaultFillStyle),s.fillStyle=asColorLike(d),s.fill()}e.strokeStyle&&(s.strokeStyle=e.strokeStyle,s.lineWidth=e.strokeWidth,e.lineDash&&(s.setLineDash(e.lineDash),s.lineDashOffset=e.lineDashOffset),s.lineCap=e.lineCap,s.lineJoin=e.lineJoin,s.miterLimit=e.miterLimit,s.stroke())}createHitDetectionCanvas_(e){let s;if(this.fill_){let a=this.fill_.getColor(),d=0;typeof a=="string"&&(a=asArray(a)),a===null?d=1:Array.isArray(a)&&(d=a.length===4?a[3]:1),d===0&&(s=createCanvasContext2D(e.size,e.size),this.drawHitDetectionCanvas_(e,s))}return s?s.canvas:this.getImage(1)}createPath_(e){let s=this.points_;const a=this.radius_;if(s===1/0)e.arc(0,0,a,0,2*Math.PI);else{const d=this.radius2_===void 0?a:this.radius2_;this.radius2_!==void 0&&(s*=2);const b=this.angle_-Math.PI/2,_=2*Math.PI/s;for(let _e=0;_e<s;_e++){const ot=b+_e*_,st=_e%2===0?a:d;e.lineTo(st*Math.cos(ot),st*Math.sin(ot))}e.closePath()}}drawHitDetectionCanvas_(e,s){s.translate(e.size/2,e.size/2),this.createPath_(s),s.fillStyle=defaultFillStyle,s.fill(),e.strokeStyle&&(s.strokeStyle=e.strokeStyle,s.lineWidth=e.strokeWidth,e.lineDash&&(s.setLineDash(e.lineDash),s.lineDashOffset=e.lineDashOffset),s.lineJoin=e.lineJoin,s.miterLimit=e.miterLimit,s.stroke())}}class CircleStyle extends RegularShape{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),s=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return s.setOpacity(this.getOpacity()),s}setRadius(e){this.radius_=e,this.render()}}class Fill{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new Fill({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}class Stroke{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Stroke({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Style{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Style({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(s){return s.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function toFunction(o){let e;if(typeof o=="function")e=o;else{let s;Array.isArray(o)?s=o:(assert(typeof o.getZIndex=="function","Expected an `Style` or an array of `Style`"),s=[o]),e=function(){return s}}return e}let defaultStyles=null;function createDefaultStyle(o,e){if(!defaultStyles){const s=new Fill({color:"rgba(255,255,255,0.4)"}),a=new Stroke({color:"#3399CC",width:1.25});defaultStyles=[new Style({image:new CircleStyle({fill:s,stroke:a,radius:5}),fill:s,stroke:a})]}return defaultStyles}function createEditingStyle(){const o={},e=[255,255,255,1],s=[0,153,255,1],a=3;return o.Polygon=[new Style({fill:new Fill({color:[255,255,255,.5]})})],o.MultiPolygon=o.Polygon,o.LineString=[new Style({stroke:new Stroke({color:e,width:a+2})}),new Style({stroke:new Stroke({color:s,width:a})})],o.MultiLineString=o.LineString,o.Circle=o.Polygon.concat(o.LineString),o.Point=[new Style({image:new CircleStyle({radius:a*2,fill:new Fill({color:s}),stroke:new Stroke({color:e,width:a/2})}),zIndex:1/0})],o.MultiPoint=o.Point,o.GeometryCollection=o.Polygon.concat(o.LineString,o.Point),o}function defaultGeometryFunction(o){return o.getGeometry()}class IconImageCache{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const s in this.cache_){const a=this.cache_[s];!(e++&3)&&!a.hasListener()&&(delete this.cache_[s],--this.cacheSize_)}}}get(e,s,a){const d=getKey(e,s,a);return d in this.cache_?this.cache_[d]:null}set(e,s,a,d){const b=getKey(e,s,a);this.cache_[b]=d,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function getKey(o,e,s){const a=s?asString(s):"null";return e+":"+o+":"+a}const shared=new IconImageCache;let taintedTestContext=null;class IconImage extends Target{constructor(e,s,a,d,b){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=a,this.canvas_={},this.color_=b,this.imageState_=d===void 0?ImageState.IDLE:d,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=s,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],s=this.size_[1],a=createCanvasContext2D(e,s);a.fillRect(0,0,e,s),this.hitDetectionImage_=a.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ImageState.LOADED)return;const s=this.image_,a=document.createElement("canvas");a.width=Math.ceil(s.width*e),a.height=Math.ceil(s.height*e);const d=a.getContext("2d");d.scale(e,e),d.drawImage(s,0,0),d.globalCompositeOperation="multiply",d.fillStyle=asString(this.color_),d.fillRect(0,0,a.width/e,a.height/e),d.globalCompositeOperation="destination-in",d.drawImage(s,0,0),this.canvas_[e]=a}}function get$2(o,e,s,a,d){let b=e===void 0?void 0:shared.get(e,s,d);return b||(b=new IconImage(o,o instanceof HTMLImageElement?o.src||void 0:e,s,a,d),shared.set(e,s,d,b)),b}function calculateScale(o,e,s,a){return s!==void 0&&a!==void 0?[s/o,a/e]:s!==void 0?s/o:a!==void 0?a/e:1}class Icon extends ImageStyle{constructor(e){e=e||{};const s=e.opacity!==void 0?e.opacity:1,a=e.rotation!==void 0?e.rotation:0,d=e.scale!==void 0?e.scale:1,b=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:s,rotation:a,scale:d,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:b,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const _=e.img!==void 0?e.img:null;let _e=e.src;assert(!(_e!==void 0&&_),"`image` and `src` cannot be provided at the same time"),(_e===void 0||_e.length===0)&&_&&(_e=_.src||getUid(_)),assert(_e!==void 0&&_e.length>0,"A defined and non-empty `src` or `image` must be provided"),assert(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let ot;if(e.src!==void 0?ot=ImageState.IDLE:_!==void 0&&(_ instanceof HTMLImageElement?_.complete?ot=_.src?ImageState.LOADED:ImageState.IDLE:ot=ImageState.LOADING:ot=ImageState.LOADED),this.color_=e.color!==void 0?asArray(e.color):null,this.iconImage_=get$2(_,_e,this.crossOrigin_,ot,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let st,ct;if(e.size)[st,ct]=e.size;else{const ft=this.getImage(1);if(ft.width&&ft.height)st=ft.width,ct=ft.height;else if(ft instanceof HTMLImageElement){this.initialOptions_=e;const mt=()=>{if(this.unlistenImageChange(mt),!this.initialOptions_)return;const bt=this.iconImage_.getSize();this.setScale(calculateScale(bt[0],bt[1],e.width,e.height))};this.listenImageChange(mt);return}}st!==void 0&&this.setScale(calculateScale(st,ct,e.width,e.height))}}clone(){let e,s,a;return this.initialOptions_?(s=this.initialOptions_.width,a=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:s,height:a,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const d=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!d)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=d[0]),this.anchorYUnits_=="fraction"&&(e[1]*=d[1])}if(this.anchorOrigin_!="top-left"){if(!d)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+d[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+d[1])}this.normalizedAnchor_=e}const s=this.getDisplacement(),a=this.getScaleArray();return[e[0]-s[0]/a[0],e[1]+s[1]/a[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const s=this.getSize(),a=this.iconImage_.getSize();if(!s||!a)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=a[0]-s[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=a[1]-s[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(EventType.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(EventType.CHANGE,e)}}const DEFAULT_FILL_COLOR="#333";let Text$2=class ile{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=toSize(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fill({color:DEFAULT_FILL_COLOR}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new ile({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}},numTypes=0;const NoneType=0,BooleanType$1=1<<numTypes++,NumberType$1=1<<numTypes++,StringType$1=1<<numTypes++,ColorType$1=1<<numTypes++,NumberArrayType=1<<numTypes++,AnyType=Math.pow(2,numTypes)-1,typeNames={[BooleanType$1]:"boolean",[NumberType$1]:"number",[StringType$1]:"string",[ColorType$1]:"color",[NumberArrayType]:"number[]"},namedTypes=Object.keys(typeNames).map(Number).sort(ascending);function typeName(o){const e=[];for(const s of namedTypes)includesType(o,s)&&e.push(typeNames[s]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function includesType(o,e){return(o&e)===e}function overlapsType(o,e){return!!(o&e)}function isType(o,e){return o===e}class LiteralExpression{constructor(e,s){this.type=e,this.value=s}}class CallExpression{constructor(e,s,...a){this.type=e,this.operator=s,this.args=a}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function getTypeFromHint(o){switch(o){case"string":return StringType$1;case"color":return ColorType$1;case"number":return NumberType$1;case"boolean":return BooleanType$1;case"number[]":return NumberArrayType;default:throw new Error(`Unrecognized type hint: ${o}`)}}function parse$2(o,e,s){switch(typeof o){case"boolean":return new LiteralExpression(BooleanType$1,o);case"number":return new LiteralExpression(NumberType$1,o);case"string":{let d=StringType$1;return isStringColor(o)&&(d|=ColorType$1),isType(d&s,NoneType)||(d&=s),new LiteralExpression(d,o)}}if(!Array.isArray(o))throw new Error("Expression must be an array or a primitive value");if(o.length===0)throw new Error("Empty expression");if(typeof o[0]=="string")return parseCallExpression(o,e,s);for(const d of o)if(typeof d!="number")throw new Error("Expected an array of numbers");let a=NumberArrayType;return(o.length===3||o.length===4)&&(a|=ColorType$1),s&&(a&=s),new LiteralExpression(a,o)}const Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},parsers={[Ops.Get]:createParser(([o,e])=>e!==void 0?getTypeFromHint(e.value):AnyType,withArgsCount(1,2),withGetArgs),[Ops.Var]:createParser(([o])=>o.type,withArgsCount(1,1),withVarArgs),[Ops.Id]:createParser(NumberType$1|StringType$1,withNoArgs,usesFeatureId),[Ops.Concat]:createParser(StringType$1,withArgsCount(2,1/0),parseArgsOfType(AnyType)),[Ops.GeometryType]:createParser(StringType$1,withNoArgs),[Ops.Resolution]:createParser(NumberType$1,withNoArgs),[Ops.Zoom]:createParser(NumberType$1,withNoArgs),[Ops.Time]:createParser(NumberType$1,withNoArgs),[Ops.Any]:createParser(BooleanType$1,withArgsCount(2,1/0),parseArgsOfType(BooleanType$1)),[Ops.All]:createParser(BooleanType$1,withArgsCount(2,1/0),parseArgsOfType(BooleanType$1)),[Ops.Not]:createParser(BooleanType$1,withArgsCount(1,1),parseArgsOfType(BooleanType$1)),[Ops.Equal]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.NotEqual]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThan]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThanOrEqualTo]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThan]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThanOrEqualTo]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.Multiply]:createParser(o=>{let e=NumberType$1|ColorType$1;for(let s=0;s<o.length;s++)e&=o[s].type;return e},withArgsCount(2,1/0),parseArgsOfType(NumberType$1|ColorType$1),narrowArgsType),[Ops.Divide]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Add]:createParser(NumberType$1,withArgsCount(2,1/0),parseArgsOfType(NumberType$1)),[Ops.Subtract]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Clamp]:createParser(NumberType$1,withArgsCount(3,3),parseArgsOfType(NumberType$1)),[Ops.Mod]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Pow]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Abs]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Floor]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Ceil]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Round]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Sin]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Cos]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Atan]:createParser(NumberType$1,withArgsCount(1,2),parseArgsOfType(NumberType$1)),[Ops.Sqrt]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Match]:createParser(o=>{let e=AnyType;for(let s=2;s<o.length;s+=2)e&=o[s].type;return e&=o[o.length-1].type,e},withArgsCount(4,1/0),withEvenArgs,parseMatchArgs),[Ops.Between]:createParser(BooleanType$1,withArgsCount(3,3),parseArgsOfType(NumberType$1)),[Ops.Interpolate]:createParser(o=>{let e=ColorType$1|NumberType$1;for(let s=3;s<o.length;s+=2)e&=o[s].type;return e},withArgsCount(6,1/0),withEvenArgs,parseInterpolateArgs),[Ops.Case]:createParser(o=>{let e=AnyType;for(let s=1;s<o.length;s+=2)e&=o[s].type;return e&=o[o.length-1].type,e},withArgsCount(3,1/0),withOddArgs,parseCaseArgs),[Ops.In]:createParser(BooleanType$1,withArgsCount(2,2),parseInArgs),[Ops.Number]:createParser(NumberType$1,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.String]:createParser(StringType$1,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.Array]:createParser(o=>o.length===3||o.length===4?NumberArrayType|ColorType$1:NumberArrayType,withArgsCount(1,1/0),parseArgsOfType(NumberType$1)),[Ops.Color]:createParser(ColorType$1,withArgsCount(3,4),parseArgsOfType(NumberType$1)),[Ops.Band]:createParser(NumberType$1,withArgsCount(1,3),parseArgsOfType(NumberType$1)),[Ops.Palette]:createParser(ColorType$1,withArgsCount(2,2),parsePaletteArgs)};function withGetArgs(o,e){const s=parse$2(o[1],e);if(!(s instanceof LiteralExpression))throw new Error("Expected a literal argument for get operation");if(typeof s.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(s.value),o.length===3){const a=parse$2(o[2],e);return[s,a]}return[s]}function withVarArgs(o,e,s,a){const d=o[1];if(typeof d!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(d),!("variables"in e.style)||e.style.variables[d]===void 0)return[new LiteralExpression(AnyType,d)];const b=e.style.variables[d],_=parse$2(b,e);if(_.value=d,a&&!overlapsType(a,_.type))throw new Error(`The variable ${d} has type ${typeName(_.type)} but the following type was expected: ${typeName(a)}`);return[_]}function usesFeatureId(o,e){e.featureId=!0}function withNoArgs(o,e){const s=o[0];if(o.length!==1)throw new Error(`Expected no arguments for ${s} operation`);return[]}function withArgsCount(o,e){return function(s,a){const d=s[0],b=s.length-1;if(o===e){if(b!==o){const _=o===1?"":"s";throw new Error(`Expected ${o} argument${_} for ${d}, got ${b}`)}}else if(b<o||b>e){const _=e===1/0?`${o} or more`:`${o} to ${e}`;throw new Error(`Expected ${_} arguments for ${d}, got ${b}`)}}}function parseArgsOfType(o){return function(e,s){const a=e[0],d=e.length-1,b=new Array(d);for(let _=0;_<d;++_){const _e=parse$2(e[_+1],s);if(!overlapsType(o,_e.type)){const ot=typeName(o),st=typeName(_e.type);throw new Error(`Unexpected type for argument ${_} of ${a} operation, got ${ot} but expected ${st}`)}_e.type&=o,b[_]=_e}return b}}function narrowArgsType(o,e,s){const a=o[0],d=o.length-1;let b=AnyType;for(let _e=0;_e<s.length;++_e)b&=s[_e].type;if(b===NoneType)throw new Error(`No common type could be found for arguments of ${a} operation`);const _=new Array(d);for(let _e=0;_e<d;++_e)_[_e]=parse$2(o[_e+1],e,b);return _}function withOddArgs(o,e){const s=o[0],a=o.length-1;if(a%2===0)throw new Error(`An odd amount of arguments was expected for operation ${s}, got ${JSON.stringify(a)} instead`)}function withEvenArgs(o,e){const s=o[0],a=o.length-1;if(a%2===1)throw new Error(`An even amount of arguments was expected for operation ${s}, got ${JSON.stringify(a)} instead`)}function parseMatchArgs(o,e,s,a){const d=o.length-1;let _=parse$2(o[1],e).type;const _e=parse$2(o[o.length-1],e);let ot=a!==void 0?a&_e.type:_e.type;const st=new Array(d-2);for(let ft=0;ft<d-2;ft+=2){const mt=parse$2(o[ft+2],e),bt=parse$2(o[ft+3],e);_&=mt.type,ot&=bt.type,st[ft]=mt,st[ft+1]=bt}const ct=StringType$1|NumberType$1|BooleanType$1;if(!overlapsType(ct,_))throw new Error(`Expected an input of type ${typeName(ct)} for the interpolate operation, got ${typeName(_)} instead`);if(isType(ot,NoneType))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(o));for(let ft=0;ft<d-2;ft+=2){const mt=parse$2(o[ft+2],e,_),bt=parse$2(o[ft+3],e,ot);st[ft]=mt,st[ft+1]=bt}return[parse$2(o[1],e,_),...st,parse$2(o[o.length-1],e,ot)]}function parseInterpolateArgs(o,e,s,a){const d=o[1];let b;switch(d[0]){case"linear":b=1;break;case"exponential":if(b=d[1],typeof b!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(b)} instead`);break;default:b=null}if(!b)throw new Error(`Invalid interpolation type: ${JSON.stringify(d)}`);b=parse$2(b,e);let _=parse$2(o[2],e);if(!overlapsType(NumberType$1,_.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${typeName(_.type)} instead`);_=parse$2(o[2],e,NumberType$1);const _e=new Array(o.length-3);for(let ot=0;ot<_e.length;ot+=2){let st=parse$2(o[ot+3],e);if(!overlapsType(NumberType$1,st.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${typeName(st.type)} at position ${ot+2} instead`);let ct=parse$2(o[ot+4],e);if(!overlapsType(NumberType$1|ColorType$1,ct.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${typeName(ct.type)} at position ${ot+3} instead`);st=parse$2(o[ot+3],e,NumberType$1),ct=parse$2(o[ot+4],e,NumberType$1|ColorType$1),_e[ot]=st,_e[ot+1]=ct}return[b,_,..._e]}function parseCaseArgs(o,e,s,a){const d=parse$2(o[o.length-1],e);let b=a!==void 0?a&d.type:d.type;const _=new Array(o.length-1);for(let _e=0;_e<_.length-1;_e+=2){const ot=parse$2(o[_e+1],e),st=parse$2(o[_e+2],e);if(!overlapsType(BooleanType$1,ot.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${typeName(ot.type)} at position ${_e} instead`);b&=st.type,_[_e]=ot,_[_e+1]=st}if(isType(b,NoneType))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(o));for(let _e=0;_e<_.length-1;_e+=2)_[_e+1]=parse$2(o[_e+2],e,b);return _[_.length-1]=parse$2(o[o.length-1],e,b),_}function parseInArgs(o,e){let s=o[2];if(!Array.isArray(s))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof s[0]=="string"){if(s[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(s[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');s=s[1]}let a=StringType$1|NumberType$1;const d=new Array(s.length);for(let _=0;_<d.length;_++){const _e=parse$2(s[_],e);a&=_e.type,d[_]=_e}if(isType(a,NoneType))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(o));return[parse$2(o[1],e,a),...d]}function parsePaletteArgs(o,e){const s=parse$2(o[1],e,NumberType$1);if(s.type!==NumberType$1)throw new Error(`The first argument of palette must be an number, got ${typeName(s.type)} instead`);const a=o[2];if(!Array.isArray(a))throw new Error("The second argument of palette must be an array");const d=new Array(a.length);for(let b=0;b<d.length;b++){const _=parse$2(a[b],e,ColorType$1);if(!(_ instanceof LiteralExpression))throw new Error(`The palette color at index ${b} must be a literal value`);if(!overlapsType(_.type,ColorType$1))throw new Error(`The palette color at index ${b} should be of type color, got ${typeName(_.type)} instead`);d[b]=_}return[s,...d]}function createParser(o,...e){return function(s,a,d){const b=s[0];let _=[];for(let ot=0;ot<e.length;ot++)_=e[ot](s,a,_,d)||_;let _e=typeof o=="function"?o(_):o;if(d!==void 0){if(!overlapsType(_e,d))throw new Error(`The following expression was expected to return ${typeName(d)}, but returns ${typeName(_e)} instead: ${JSON.stringify(s)}`);_e&=d}if(_e===NoneType)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(s)}`);return new CallExpression(_e,b,..._)}}function parseCallExpression(o,e,s){const a=o[0],d=parsers[a];if(!d)throw new Error(`Unknown operator: ${a}`);return d(o,e,s)}function newEvaluationContext(){return{variables:{},properties:{},resolution:NaN,featureId:null}}function buildExpression(o,e,s){const a=parse$2(o,s);if(!overlapsType(e,a.type)){const d=typeName(e),b=typeName(a.type);throw new Error(`Expected expression to be of type ${d}, got ${b}`)}return compileExpression(a)}function compileExpression(o,e){if(o instanceof LiteralExpression){if(o.type===ColorType$1&&typeof o.value=="string"){const a=fromString$1(o.value);return function(){return a}}return function(){return o.value}}const s=o.operator;switch(s){case Ops.Number:case Ops.String:return compileAssertionExpression(o);case Ops.Get:case Ops.Var:return compileAccessorExpression(o);case Ops.Id:return a=>a.featureId;case Ops.Concat:{const a=o.args.map(d=>compileExpression(d));return d=>"".concat(...a.map(b=>b(d).toString()))}case Ops.Resolution:return a=>a.resolution;case Ops.Any:case Ops.All:case Ops.Not:return compileLogicalExpression(o);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return compileComparisonExpression(o);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return compileNumericExpression(o);case Ops.Match:return compileMatchExpression(o);case Ops.Interpolate:return compileInterpolateExpression(o);default:throw new Error(`Unsupported operator ${s}`)}}function compileAssertionExpression(o,e){const s=o.operator,a=o.args.length,d=new Array(a);for(let b=0;b<a;++b)d[b]=compileExpression(o.args[b]);switch(s){case Ops.Number:case Ops.String:return b=>{for(let _=0;_<a;++_){const _e=d[_](b);if(typeof _e===s)return _e}throw new Error(`Expected one of the values to be a ${s}`)};default:throw new Error(`Unsupported assertion operator ${s}`)}}function compileAccessorExpression(o,e){const a=o.args[0].value;switch(o.operator){case Ops.Get:return d=>d.properties[a];case Ops.Var:return d=>d.variables[a];default:throw new Error(`Unsupported accessor operator ${o.operator}`)}}function compileComparisonExpression(o,e){const s=o.operator,a=compileExpression(o.args[0]),d=compileExpression(o.args[1]);switch(s){case Ops.Equal:return b=>a(b)===d(b);case Ops.NotEqual:return b=>a(b)!==d(b);case Ops.LessThan:return b=>a(b)<d(b);case Ops.LessThanOrEqualTo:return b=>a(b)<=d(b);case Ops.GreaterThan:return b=>a(b)>d(b);case Ops.GreaterThanOrEqualTo:return b=>a(b)>=d(b);default:throw new Error(`Unsupported comparison operator ${s}`)}}function compileLogicalExpression(o,e){const s=o.operator,a=o.args.length,d=new Array(a);for(let b=0;b<a;++b)d[b]=compileExpression(o.args[b]);switch(s){case Ops.Any:return b=>{for(let _=0;_<a;++_)if(d[_](b))return!0;return!1};case Ops.All:return b=>{for(let _=0;_<a;++_)if(!d[_](b))return!1;return!0};case Ops.Not:return b=>!d[0](b);default:throw new Error(`Unsupported logical operator ${s}`)}}function compileNumericExpression(o,e){const s=o.operator,a=o.args.length,d=new Array(a);for(let b=0;b<a;++b)d[b]=compileExpression(o.args[b]);switch(s){case Ops.Multiply:return b=>{let _=1;for(let _e=0;_e<a;++_e)_*=d[_e](b);return _};case Ops.Divide:return b=>d[0](b)/d[1](b);case Ops.Add:return b=>{let _=0;for(let _e=0;_e<a;++_e)_+=d[_e](b);return _};case Ops.Subtract:return b=>d[0](b)-d[1](b);case Ops.Clamp:return b=>{const _=d[0](b),_e=d[1](b);if(_<_e)return _e;const ot=d[2](b);return _>ot?ot:_};case Ops.Mod:return b=>d[0](b)%d[1](b);case Ops.Pow:return b=>Math.pow(d[0](b),d[1](b));case Ops.Abs:return b=>Math.abs(d[0](b));case Ops.Floor:return b=>Math.floor(d[0](b));case Ops.Ceil:return b=>Math.ceil(d[0](b));case Ops.Round:return b=>Math.round(d[0](b));case Ops.Sin:return b=>Math.sin(d[0](b));case Ops.Cos:return b=>Math.cos(d[0](b));case Ops.Atan:return a===2?b=>Math.atan2(d[0](b),d[1](b)):b=>Math.atan(d[0](b));case Ops.Sqrt:return b=>Math.sqrt(d[0](b));default:throw new Error(`Unsupported numeric operator ${s}`)}}function compileMatchExpression(o,e){const s=o.args.length,a=new Array(s);for(let d=0;d<s;++d)a[d]=compileExpression(o.args[d]);return d=>{const b=a[0](d);for(let _=1;_<s;_+=2)if(b===a[_](d))return a[_+1](d);return a[s-1](d)}}function compileInterpolateExpression(o,e){const s=o.args.length,a=new Array(s);for(let d=0;d<s;++d)a[d]=compileExpression(o.args[d]);return d=>{const b=a[0](d),_=a[1](d);let _e,ot;for(let st=2;st<s;st+=2){const ct=a[st](d);let ft=a[st+1](d);const mt=Array.isArray(ft);if(mt&&(ft=withAlpha(ft)),ct>=_)return st===2?ft:mt?interpolateColor(b,_,_e,ot,ct,ft):interpolateNumber(b,_,_e,ot,ct,ft);_e=ct,ot=ft}return ot}}function interpolateNumber(o,e,s,a,d,b){const _=d-s;if(_===0)return a;const _e=e-s,ot=o===1?_e/_:(Math.pow(o,_e)-1)/(Math.pow(o,_)-1);return a+ot*(b-a)}function interpolateColor(o,e,s,a,d,b){if(d-s===0)return a;const _e=rgbaToLcha(a),ot=rgbaToLcha(b);let st=ot[2]-_e[2];st>180?st-=360:st<-180&&(st+=360);const ct=[interpolateNumber(o,e,s,_e[0],d,ot[0]),interpolateNumber(o,e,s,_e[1],d,ot[1]),_e[2]+interpolateNumber(o,e,s,0,d,st),interpolateNumber(o,e,s,a[3],d,b[3])];return normalize$1(lchaToRgba(ct))}function always$1(o){return!0}function rulesToStyleFunction(o){const e=newParsingContext(),s=buildRuleSet(o,e),a=newEvaluationContext();return function(d,b){if(a.properties=d.getPropertiesInternal(),a.resolution=b,e.featureId){const _=d.getId();_!==void 0?a.featureId=_:a.featureId=null}return s(a)}}function flatStylesToStyleFunction(o){const e=newParsingContext(),s=o.length,a=new Array(s);for(let _=0;_<s;++_)a[_]=buildStyle(o[_],e);const d=newEvaluationContext(),b=new Array(s);return function(_,_e){if(d.properties=_.getPropertiesInternal(),d.resolution=_e,e.featureId){const st=_.getId();st!==void 0?d.featureId=st:d.featureId=null}let ot=0;for(let st=0;st<s;++st){const ct=a[st](d);ct&&(b[ot]=ct,ot+=1)}return b.length=ot,b}}function buildRuleSet(o,e){const s=o.length,a=new Array(s);for(let d=0;d<s;++d){const b=o[d],_="filter"in b?buildExpression(b.filter,BooleanType$1,e):always$1;let _e;if(Array.isArray(b.style)){const ot=b.style.length;_e=new Array(ot);for(let st=0;st<ot;++st)_e[st]=buildStyle(b.style[st],e)}else _e=[buildStyle(b.style,e)];a[d]={filter:_,styles:_e}}return function(d){const b=[];let _=!1;for(let _e=0;_e<s;++_e){const ot=a[_e].filter;if(ot(d)&&!(o[_e].else&&_)){_=!0;for(const st of a[_e].styles){const ct=st(d);ct&&b.push(ct)}}}return b}}function buildStyle(o,e){const s=buildFill(o,"",e),a=buildStroke(o,"",e),d=buildText(o,e),b=buildImage(o,e),_=numberEvaluator(o,"z-index",e);if(!s&&!a&&!d&&!b&&!isEmpty$1(o))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(o));const _e=new Style;return function(ot){let st=!0;if(s){const ct=s(ot);ct&&(st=!1),_e.setFill(ct)}if(a){const ct=a(ot);ct&&(st=!1),_e.setStroke(ct)}if(d){const ct=d(ot);ct&&(st=!1),_e.setText(ct)}if(b){const ct=b(ot);ct&&(st=!1),_e.setImage(ct)}return _&&_e.setZIndex(_(ot)),st?null:_e}}function buildFill(o,e,s){const a=colorLikeEvaluator(o,e+"fill-color",s);if(!a)return null;const d=new Fill;return function(b){const _=a(b);return _==="none"?null:(d.setColor(_),d)}}function buildStroke(o,e,s){const a=numberEvaluator(o,e+"stroke-width",s),d=colorLikeEvaluator(o,e+"stroke-color",s);if(!a&&!d)return null;const b=stringEvaluator(o,e+"stroke-line-cap",s),_=stringEvaluator(o,e+"stroke-line-join",s),_e=numberArrayEvaluator(o,e+"stroke-line-dash",s),ot=numberEvaluator(o,e+"stroke-line-dash-offset",s),st=numberEvaluator(o,e+"stroke-miter-limit",s),ct=new Stroke;return function(ft){if(d){const mt=d(ft);if(mt==="none")return null;ct.setColor(mt)}if(a&&ct.setWidth(a(ft)),b){const mt=b(ft);if(mt!=="butt"&&mt!=="round"&&mt!=="square")throw new Error("Expected butt, round, or square line cap");ct.setLineCap(mt)}if(_){const mt=_(ft);if(mt!=="bevel"&&mt!=="round"&&mt!=="miter")throw new Error("Expected bevel, round, or miter line join");ct.setLineJoin(mt)}return _e&&ct.setLineDash(_e(ft)),ot&&ct.setLineDashOffset(ot(ft)),st&&ct.setMiterLimit(st(ft)),ct}}function buildText(o,e){const s="text-",a=stringEvaluator(o,s+"value",e);if(!a)return null;const d=buildFill(o,s,e),b=buildFill(o,s+"background-",e),_=buildStroke(o,s,e),_e=buildStroke(o,s+"background-",e),ot=stringEvaluator(o,s+"font",e),st=numberEvaluator(o,s+"max-angle",e),ct=numberEvaluator(o,s+"offset-x",e),ft=numberEvaluator(o,s+"offset-y",e),mt=booleanEvaluator(o,s+"overflow",e),bt=stringEvaluator(o,s+"placement",e),wt=numberEvaluator(o,s+"repeat",e),Ct=sizeLikeEvaluator(o,s+"scale",e),Rt=booleanEvaluator(o,s+"rotate-with-view",e),It=numberEvaluator(o,s+"rotation",e),Pt=stringEvaluator(o,s+"align",e),Tt=stringEvaluator(o,s+"justify",e),Gt=stringEvaluator(o,s+"baseline",e),Jt=numberArrayEvaluator(o,s+"padding",e),qt=new Text$2({});return function(Nt){if(qt.setText(a(Nt)),d&&qt.setFill(d(Nt)),b&&qt.setBackgroundFill(b(Nt)),_&&qt.setStroke(_(Nt)),_e&&qt.setBackgroundStroke(_e(Nt)),ot&&qt.setFont(ot(Nt)),st&&qt.setMaxAngle(st(Nt)),ct&&qt.setOffsetX(ct(Nt)),ft&&qt.setOffsetY(ft(Nt)),mt&&qt.setOverflow(mt(Nt)),bt){const Qt=bt(Nt);if(Qt!=="point"&&Qt!=="line")throw new Error("Expected point or line for text-placement");qt.setPlacement(Qt)}if(wt&&qt.setRepeat(wt(Nt)),Ct&&qt.setScale(Ct(Nt)),Rt&&qt.setRotateWithView(Rt(Nt)),It&&qt.setRotation(It(Nt)),Pt){const Qt=Pt(Nt);if(Qt!=="left"&&Qt!=="center"&&Qt!=="right"&&Qt!=="end"&&Qt!=="start")throw new Error("Expected left, right, center, start, or end for text-align");qt.setTextAlign(Qt)}if(Tt){const Qt=Tt(Nt);if(Qt!=="left"&&Qt!=="right"&&Qt!=="center")throw new Error("Expected left, right, or center for text-justify");qt.setJustify(Qt)}if(Gt){const Qt=Gt(Nt);if(Qt!=="bottom"&&Qt!=="top"&&Qt!=="middle"&&Qt!=="alphabetic"&&Qt!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");qt.setTextBaseline(Qt)}return Jt&&qt.setPadding(Jt(Nt)),qt}}function buildImage(o,e){return"icon-src"in o?buildIcon(o,e):"shape-points"in o?buildShape(o,e):"circle-radius"in o?buildCircle(o,e):null}function buildIcon(o,e){const s="icon-",a=s+"src",d=requireString(o[a],a),b=coordinateEvaluator(o,s+"anchor",e),_=sizeLikeEvaluator(o,s+"scale",e),_e=numberEvaluator(o,s+"opacity",e),ot=coordinateEvaluator(o,s+"displacement",e),st=numberEvaluator(o,s+"rotation",e),ct=booleanEvaluator(o,s+"rotate-with-view",e),ft=optionalIconOrigin(o,s+"anchor-origin"),mt=optionalIconAnchorUnits(o,s+"anchor-x-units"),bt=optionalIconAnchorUnits(o,s+"anchor-y-units"),wt=optionalColorLike(o,s+"color"),Ct=optionalString(o,s+"cross-origin"),Rt=optionalNumberArray(o,s+"offset"),It=optionalIconOrigin(o,s+"offset-origin"),Pt=optionalNumber(o,s+"width"),Tt=optionalNumber(o,s+"height"),Gt=optionalSize(o,s+"size"),Jt=optionalDeclutterMode(o,s+"declutter"),qt=new Icon({src:d,anchorOrigin:ft,anchorXUnits:mt,anchorYUnits:bt,color:wt,crossOrigin:Ct,offset:Rt,offsetOrigin:It,height:Tt,width:Pt,size:Gt,declutterMode:Jt});return function(Nt){return _e&&qt.setOpacity(_e(Nt)),ot&&qt.setDisplacement(ot(Nt)),st&&qt.setRotation(st(Nt)),ct&&qt.setRotateWithView(ct(Nt)),_&&qt.setScale(_(Nt)),b&&qt.setAnchor(b(Nt)),qt}}function buildShape(o,e){const s="shape-",a=s+"points",d=requireNumber(o[a],a),b=buildFill(o,s,e),_=buildStroke(o,s,e),_e=sizeLikeEvaluator(o,s+"scale",e),ot=coordinateEvaluator(o,s+"displacement",e),st=numberEvaluator(o,s+"rotation",e),ct=booleanEvaluator(o,s+"rotate-with-view",e),ft=optionalNumber(o,s+"radius"),mt=optionalNumber(o,s+"radius1"),bt=optionalNumber(o,s+"radius2"),wt=optionalNumber(o,s+"angle"),Ct=optionalDeclutterMode(o,s+"declutter-mode"),Rt=new RegularShape({points:d,radius:ft,radius1:mt,radius2:bt,angle:wt,declutterMode:Ct});return function(It){return b&&Rt.setFill(b(It)),_&&Rt.setStroke(_(It)),ot&&Rt.setDisplacement(ot(It)),st&&Rt.setRotation(st(It)),ct&&Rt.setRotateWithView(ct(It)),_e&&Rt.setScale(_e(It)),Rt}}function buildCircle(o,e){const s="circle-",a=buildFill(o,s,e),d=buildStroke(o,s,e),b=numberEvaluator(o,s+"radius",e),_=sizeLikeEvaluator(o,s+"scale",e),_e=coordinateEvaluator(o,s+"displacement",e),ot=numberEvaluator(o,s+"rotation",e),st=booleanEvaluator(o,s+"rotate-with-view",e),ct=optionalDeclutterMode(o,s+"declutter-mode"),ft=new CircleStyle({radius:5,declutterMode:ct});return function(mt){return b&&ft.setRadius(b(mt)),a&&ft.setFill(a(mt)),d&&ft.setStroke(d(mt)),_e&&ft.setDisplacement(_e(mt)),ot&&ft.setRotation(ot(mt)),st&&ft.setRotateWithView(st(mt)),_&&ft.setScale(_(mt)),ft}}function numberEvaluator(o,e,s){if(!(e in o))return;const a=buildExpression(o[e],NumberType$1,s);return function(d){return requireNumber(a(d),e)}}function stringEvaluator(o,e,s){if(!(e in o))return null;const a=buildExpression(o[e],StringType$1,s);return function(d){return requireString(a(d),e)}}function booleanEvaluator(o,e,s){if(!(e in o))return null;const a=buildExpression(o[e],BooleanType$1,s);return function(d){const b=a(d);if(typeof b!="boolean")throw new Error(`Expected a boolean for ${e}`);return b}}function colorLikeEvaluator(o,e,s){if(!(e in o))return null;const a=buildExpression(o[e],ColorType$1|StringType$1,s);return function(d){return requireColorLike(a(d),e)}}function numberArrayEvaluator(o,e,s){if(!(e in o))return null;const a=buildExpression(o[e],NumberArrayType,s);return function(d){return requireNumberArray(a(d),e)}}function coordinateEvaluator(o,e,s){if(!(e in o))return null;const a=buildExpression(o[e],NumberArrayType,s);return function(d){const b=requireNumberArray(a(d),e);if(b.length!==2)throw new Error(`Expected two numbers for ${e}`);return b}}function sizeLikeEvaluator(o,e,s){if(!(e in o))return null;const a=buildExpression(o[e],NumberArrayType|NumberType$1,s);return function(d){return requireSizeLike(a(d),e)}}function optionalNumber(o,e){const s=o[e];if(s!==void 0){if(typeof s!="number")throw new Error(`Expected a number for ${e}`);return s}}function optionalSize(o,e){const s=o[e];if(s!==void 0){if(typeof s=="number")return toSize(s);if(!Array.isArray(s))throw new Error(`Expected a number or size array for ${e}`);if(s.length!==2||typeof s[0]!="number"||typeof s[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return s}}function optionalString(o,e){const s=o[e];if(s!==void 0){if(typeof s!="string")throw new Error(`Expected a string for ${e}`);return s}}function optionalIconOrigin(o,e){const s=o[e];if(s!==void 0){if(s!=="bottom-left"&&s!=="bottom-right"&&s!=="top-left"&&s!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return s}}function optionalIconAnchorUnits(o,e){const s=o[e];if(s!==void 0){if(s!=="pixels"&&s!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return s}}function optionalNumberArray(o,e){const s=o[e];if(s!==void 0)return requireNumberArray(s,e)}function optionalDeclutterMode(o,e){const s=o[e];if(s!==void 0){if(typeof s!="string")throw new Error(`Expected a string for ${e}`);if(s!=="declutter"&&s!=="obstacle"&&s!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return s}}function optionalColorLike(o,e){const s=o[e];if(s!==void 0)return requireColorLike(s,e)}function requireNumberArray(o,e){if(!Array.isArray(o))throw new Error(`Expected an array for ${e}`);const s=o.length;for(let a=0;a<s;++a)if(typeof o[a]!="number")throw new Error(`Expected an array of numbers for ${e}`);return o}function requireString(o,e){if(typeof o!="string")throw new Error(`Expected a string for ${e}`);return o}function requireNumber(o,e){if(typeof o!="number")throw new Error(`Expected a number for ${e}`);return o}function requireColorLike(o,e){if(typeof o=="string")return o;const s=requireNumberArray(o,e),a=s.length;if(a<3||a>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return s}function requireSizeLike(o,e){if(typeof o=="number")return o;const s=requireNumberArray(o,e);if(s.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return s}const Property$3={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer{constructor(e){e=e||{};const s=Object.assign({},e);delete s.style,delete s.renderBuffer,delete s.updateWhileAnimating,delete s.updateWhileInteracting,super(s),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property$3.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new RBush$1(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(Property$3.RENDER_ORDER,e)}setStyle(e){this.style_=toStyleLike(e),this.styleFunction_=e===null?void 0:toFunction(this.style_),this.changed()}}function toStyleLike(o){if(o===void 0)return createDefaultStyle;if(!o)return null;if(typeof o=="function"||o instanceof Style)return o;if(!Array.isArray(o))return flatStylesToStyleFunction([o]);if(o.length===0)return[];const e=o.length,s=o[0];if(s instanceof Style){const d=new Array(e);for(let b=0;b<e;++b){const _=o[b];if(!(_ instanceof Style))throw new Error("Expected a list of style instances");d[b]=_}return d}if("style"in s){const d=new Array(e);for(let b=0;b<e;++b){const _=o[b];if(!("style"in _))throw new Error("Expected a list of rules with a style property");d[b]=_}return rulesToStyleFunction(d)}return flatStylesToStyleFunction(o)}const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];class VectorContext{drawCustom(e,s,a,d){}drawGeometry(e){}setStyle(e){}drawCircle(e,s){}drawFeature(e,s){}drawGeometryCollection(e,s){}drawLineString(e,s){}drawMultiLineString(e,s){}drawMultiPoint(e,s){}drawMultiPolygon(e,s){}drawPoint(e,s){}drawPolygon(e,s){}drawText(e,s){}setFillStrokeStyle(e,s){}setImageStyle(e,s){}setTextStyle(e,s){}}class CanvasBuilder extends VectorContext{constructor(e,s,a,d){super(),this.tolerance=e,this.maxExtent=s,this.pixelRatio=d,this.maxLineWidth=0,this.resolution=a,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const s=this.pixelRatio;return s==1?e:e.map(function(a){return a*s})}appendFlatPointCoordinates(e,s){const a=this.getBufferedMaxExtent(),d=this.tmpCoordinate_,b=this.coordinates;let _=b.length;for(let _e=0,ot=e.length;_e<ot;_e+=s)d[0]=e[_e],d[1]=e[_e+1],containsCoordinate(a,d)&&(b[_++]=d[0],b[_++]=d[1]);return _}appendFlatLineCoordinates(e,s,a,d,b,_){const _e=this.coordinates;let ot=_e.length;const st=this.getBufferedMaxExtent();_&&(s+=d);let ct=e[s],ft=e[s+1];const mt=this.tmpCoordinate_;let bt=!0,wt,Ct,Rt;for(wt=s+d;wt<a;wt+=d)mt[0]=e[wt],mt[1]=e[wt+1],Rt=coordinateRelationship(st,mt),Rt!==Ct?(bt&&(_e[ot++]=ct,_e[ot++]=ft,bt=!1),_e[ot++]=mt[0],_e[ot++]=mt[1]):Rt===Relationship.INTERSECTING?(_e[ot++]=mt[0],_e[ot++]=mt[1],bt=!1):bt=!0,ct=mt[0],ft=mt[1],Ct=Rt;return(b&&bt||wt===s+d)&&(_e[ot++]=ct,_e[ot++]=ft),ot}drawCustomCoordinates_(e,s,a,d,b){for(let _=0,_e=a.length;_<_e;++_){const ot=a[_],st=this.appendFlatLineCoordinates(e,s,ot,d,!1,!1);b.push(st),s=ot}return s}drawCustom(e,s,a,d){this.beginGeometry(e,s);const b=e.getType(),_=e.getStride(),_e=this.coordinates.length;let ot,st,ct,ft,mt;switch(b){case"MultiPolygon":ot=e.getOrientedFlatCoordinates(),ft=[];const bt=e.getEndss();mt=0;for(let wt=0,Ct=bt.length;wt<Ct;++wt){const Rt=[];mt=this.drawCustomCoordinates_(ot,mt,bt[wt],_,Rt),ft.push(Rt)}this.instructions.push([Instruction.CUSTOM,_e,ft,e,a,inflateMultiCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,_e,ft,e,d||a,inflateMultiCoordinatesArray]);break;case"Polygon":case"MultiLineString":ct=[],ot=b=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),mt=this.drawCustomCoordinates_(ot,0,e.getEnds(),_,ct),this.instructions.push([Instruction.CUSTOM,_e,ct,e,a,inflateCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,_e,ct,e,d||a,inflateCoordinatesArray]);break;case"LineString":case"Circle":ot=e.getFlatCoordinates(),st=this.appendFlatLineCoordinates(ot,0,ot.length,_,!1,!1),this.instructions.push([Instruction.CUSTOM,_e,st,e,a,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,_e,st,e,d||a,inflateCoordinates]);break;case"MultiPoint":ot=e.getFlatCoordinates(),st=this.appendFlatPointCoordinates(ot,_),st>_e&&(this.instructions.push([Instruction.CUSTOM,_e,st,e,a,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,_e,st,e,d||a,inflateCoordinates]));break;case"Point":ot=e.getFlatCoordinates(),this.coordinates.push(ot[0],ot[1]),st=this.coordinates.length,this.instructions.push([Instruction.CUSTOM,_e,st,e,a]),this.hitDetectionInstructions.push([Instruction.CUSTOM,_e,st,e,d||a]);break}this.endGeometry(s)}beginGeometry(e,s){this.beginGeometryInstruction1_=[Instruction.BEGIN_GEOMETRY,s,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Instruction.BEGIN_GEOMETRY,s,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let s;const a=e.length;let d,b,_=-1;for(s=0;s<a;++s)d=e[s],b=d[0],b==Instruction.END_GEOMETRY?_=s:b==Instruction.BEGIN_GEOMETRY&&(d[2]=s,reverseSubArray(this.hitDetectionInstructions,_,s),_=-1)}setFillStrokeStyle(e,s){const a=this.state;if(e){const d=e.getColor();a.fillStyle=asColorLike(d||defaultFillStyle)}else a.fillStyle=void 0;if(s){const d=s.getColor();a.strokeStyle=asColorLike(d||defaultStrokeStyle);const b=s.getLineCap();a.lineCap=b!==void 0?b:defaultLineCap;const _=s.getLineDash();a.lineDash=_?_.slice():defaultLineDash;const _e=s.getLineDashOffset();a.lineDashOffset=_e||defaultLineDashOffset;const ot=s.getLineJoin();a.lineJoin=ot!==void 0?ot:defaultLineJoin;const st=s.getWidth();a.lineWidth=st!==void 0?st:defaultLineWidth;const ct=s.getMiterLimit();a.miterLimit=ct!==void 0?ct:defaultMiterLimit,a.lineWidth>this.maxLineWidth&&(this.maxLineWidth=a.lineWidth,this.bufferedMaxExtent_=null)}else a.strokeStyle=void 0,a.lineCap=void 0,a.lineDash=null,a.lineDashOffset=void 0,a.lineJoin=void 0,a.lineWidth=void 0,a.miterLimit=void 0}createFill(e){const s=e.fillStyle,a=[Instruction.SET_FILL_STYLE,s];return typeof s!="string"&&a.push(!0),a}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,s){const a=e.fillStyle;(typeof a!="string"||e.currentFillStyle!=a)&&(a!==void 0&&this.instructions.push(s.call(this,e)),e.currentFillStyle=a)}updateStrokeStyle(e,s){const a=e.strokeStyle,d=e.lineCap,b=e.lineDash,_=e.lineDashOffset,_e=e.lineJoin,ot=e.lineWidth,st=e.miterLimit;(e.currentStrokeStyle!=a||e.currentLineCap!=d||b!=e.currentLineDash&&!equals$2(e.currentLineDash,b)||e.currentLineDashOffset!=_||e.currentLineJoin!=_e||e.currentLineWidth!=ot||e.currentMiterLimit!=st)&&(a!==void 0&&s.call(this,e),e.currentStrokeStyle=a,e.currentLineCap=d,e.currentLineDash=b,e.currentLineDashOffset=_,e.currentLineJoin=_e,e.currentLineWidth=ot,e.currentMiterLimit=st)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const s=[Instruction.END_GEOMETRY,e];this.instructions.push(s),this.hitDetectionInstructions.push(s)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone$1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class CanvasImageBuilder extends CanvasBuilder{constructor(e,s,a,d){super(e,s,a,d),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,s){if(!this.image_)return;this.beginGeometry(e,s);const a=e.getFlatCoordinates(),d=e.getStride(),b=this.coordinates.length,_=this.appendFlatPointCoordinates(a,d);this.instructions.push([Instruction.DRAW_IMAGE,b,_,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,b,_,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(s)}drawMultiPoint(e,s){if(!this.image_)return;this.beginGeometry(e,s);const a=e.getFlatCoordinates(),d=e.getStride(),b=this.coordinates.length,_=this.appendFlatPointCoordinates(a,d);this.instructions.push([Instruction.DRAW_IMAGE,b,_,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,b,_,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(s)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,s){const a=e.getAnchor(),d=e.getSize(),b=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=a[0],this.anchorY_=a[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=d[1],this.opacity_=e.getOpacity(),this.originX_=b[0],this.originY_=b[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=d[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=s}}class CanvasLineStringBuilder extends CanvasBuilder{constructor(e,s,a,d){super(e,s,a,d)}drawFlatCoordinates_(e,s,a,d){const b=this.coordinates.length,_=this.appendFlatLineCoordinates(e,s,a,d,!1,!1),_e=[Instruction.MOVE_TO_LINE_TO,b,_];return this.instructions.push(_e),this.hitDetectionInstructions.push(_e),a}drawLineString(e,s){const a=this.state,d=a.strokeStyle,b=a.lineWidth;if(d===void 0||b===void 0)return;this.updateStrokeStyle(a,this.applyStroke),this.beginGeometry(e,s),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const _=e.getFlatCoordinates(),_e=e.getStride();this.drawFlatCoordinates_(_,0,_.length,_e),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(s)}drawMultiLineString(e,s){const a=this.state,d=a.strokeStyle,b=a.lineWidth;if(d===void 0||b===void 0)return;this.updateStrokeStyle(a,this.applyStroke),this.beginGeometry(e,s),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const _=e.getEnds(),_e=e.getFlatCoordinates(),ot=e.getStride();let st=0;for(let ct=0,ft=_.length;ct<ft;++ct)st=this.drawFlatCoordinates_(_e,st,_[ct],ot);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(s)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(beginPathInstruction)}}class CanvasPolygonBuilder extends CanvasBuilder{constructor(e,s,a,d){super(e,s,a,d)}drawFlatCoordinatess_(e,s,a,d){const b=this.state,_=b.fillStyle!==void 0,_e=b.strokeStyle!==void 0,ot=a.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let st=0;st<ot;++st){const ct=a[st],ft=this.coordinates.length,mt=this.appendFlatLineCoordinates(e,s,ct,d,!0,!_e),bt=[Instruction.MOVE_TO_LINE_TO,ft,mt];this.instructions.push(bt),this.hitDetectionInstructions.push(bt),_e&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),s=ct}return _&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),_e&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),s}drawCircle(e,s){const a=this.state,d=a.fillStyle,b=a.strokeStyle;if(d===void 0&&b===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,s),a.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),a.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,defaultLineDash,defaultLineDashOffset]);const _=e.getFlatCoordinates(),_e=e.getStride(),ot=this.coordinates.length;this.appendFlatLineCoordinates(_,0,_.length,_e,!1,!1);const st=[Instruction.CIRCLE,ot];this.instructions.push(beginPathInstruction,st),this.hitDetectionInstructions.push(beginPathInstruction,st),a.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),a.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(s)}drawPolygon(e,s){const a=this.state,d=a.fillStyle,b=a.strokeStyle;if(d===void 0&&b===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,s),a.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),a.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,defaultLineDash,defaultLineDashOffset]);const _=e.getEnds(),_e=e.getOrientedFlatCoordinates(),ot=e.getStride();this.drawFlatCoordinatess_(_e,0,_,ot),this.endGeometry(s)}drawMultiPolygon(e,s){const a=this.state,d=a.fillStyle,b=a.strokeStyle;if(d===void 0&&b===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,s),a.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),a.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth,a.lineCap,a.lineJoin,a.miterLimit,defaultLineDash,defaultLineDashOffset]);const _=e.getEndss(),_e=e.getOrientedFlatCoordinates(),ot=e.getStride();let st=0;for(let ct=0,ft=_.length;ct<ft;++ct)st=this.drawFlatCoordinatess_(_e,st,_[ct],ot);this.endGeometry(s)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const s=this.coordinates;for(let a=0,d=s.length;a<d;++a)s[a]=snap(s[a],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function lineChunk(o,e,s,a,d){const b=[];let _=s,_e=0,ot=e.slice(s,2);for(;_e<o&&_+d<a;){const[st,ct]=ot.slice(-2),ft=e[_+d],mt=e[_+d+1],bt=Math.sqrt((ft-st)*(ft-st)+(mt-ct)*(mt-ct));if(_e+=bt,_e>=o){const wt=(o-_e+bt)/bt,Ct=lerp(st,ft,wt),Rt=lerp(ct,mt,wt);ot.push(Ct,Rt),b.push(ot),ot=[Ct,Rt],_e==o&&(_+=d),_e=0}else if(_e<o)ot.push(e[_+d],e[_+d+1]),_+=d;else{const wt=bt-_e,Ct=lerp(st,ft,wt/bt),Rt=lerp(ct,mt,wt/bt);ot.push(Ct,Rt),b.push(ot),ot=[Ct,Rt],_e=0,_+=d}}return _e>0&&b.push(ot),b}function matchingChunk(o,e,s,a,d){let b=s,_=s,_e=0,ot=0,st=s,ct,ft,mt,bt,wt,Ct,Rt,It,Pt,Tt;for(ft=s;ft<a;ft+=d){const Gt=e[ft],Jt=e[ft+1];wt!==void 0&&(Pt=Gt-wt,Tt=Jt-Ct,bt=Math.sqrt(Pt*Pt+Tt*Tt),Rt!==void 0&&(ot+=mt,ct=Math.acos((Rt*Pt+It*Tt)/(mt*bt)),ct>o&&(ot>_e&&(_e=ot,b=st,_=ft),ot=0,st=ft-d)),mt=bt,Rt=Pt,It=Tt),wt=Gt,Ct=Jt}return ot+=bt,ot>_e?[st,ft]:[b,_]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends CanvasBuilder{constructor(e,s,a,d){super(e,s,a,d),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[defaultFillStyle]={fillStyle:defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,s){const a=this.textFillState_,d=this.textStrokeState_,b=this.textState_;if(this.text_===""||!b||!a&&!d)return;const _=this.coordinates;let _e=_.length;const ot=e.getType();let st=null,ct=e.getStride();if(b.placement==="line"&&(ot=="LineString"||ot=="MultiLineString"||ot=="Polygon"||ot=="MultiPolygon")){if(!intersects$1(this.getBufferedMaxExtent(),e.getExtent()))return;let ft;if(st=e.getFlatCoordinates(),ot=="LineString")ft=[st.length];else if(ot=="MultiLineString")ft=e.getEnds();else if(ot=="Polygon")ft=e.getEnds().slice(0,1);else if(ot=="MultiPolygon"){const Ct=e.getEndss();ft=[];for(let Rt=0,It=Ct.length;Rt<It;++Rt)ft.push(Ct[Rt][0])}this.beginGeometry(e,s);const mt=b.repeat,bt=mt?void 0:b.textAlign;let wt=0;for(let Ct=0,Rt=ft.length;Ct<Rt;++Ct){let It;mt?It=lineChunk(mt*this.resolution,st,wt,ft[Ct],ct):It=[st.slice(wt,ft[Ct])];for(let Pt=0,Tt=It.length;Pt<Tt;++Pt){const Gt=It[Pt];let Jt=0,qt=Gt.length;if(bt==null){const Qt=matchingChunk(b.maxAngle,Gt,0,Gt.length,2);Jt=Qt[0],qt=Qt[1]}for(let Qt=Jt;Qt<qt;Qt+=ct)_.push(Gt[Qt],Gt[Qt+1]);const Nt=_.length;wt=ft[Ct],this.drawChars_(_e,Nt),_e=Nt}}this.endGeometry(s)}else{let ft=b.overflow?null:[];switch(ot){case"Point":case"MultiPoint":st=e.getFlatCoordinates();break;case"LineString":st=e.getFlatMidpoint();break;case"Circle":st=e.getCenter();break;case"MultiLineString":st=e.getFlatMidpoints(),ct=2;break;case"Polygon":st=e.getFlatInteriorPoint(),b.overflow||ft.push(st[2]/this.resolution),ct=3;break;case"MultiPolygon":const It=e.getFlatInteriorPoints();st=[];for(let Pt=0,Tt=It.length;Pt<Tt;Pt+=3)b.overflow||ft.push(It[Pt+2]/this.resolution),st.push(It[Pt],It[Pt+1]);if(st.length===0)return;ct=2;break}const mt=this.appendFlatPointCoordinates(st,ct);if(mt===_e)return;if(ft&&(mt-_e)/2!==st.length/ct){let It=_e/2;ft=ft.filter((Pt,Tt)=>{const Gt=_[(It+Tt)*2]===st[Tt*ct]&&_[(It+Tt)*2+1]===st[Tt*ct+1];return Gt||--It,Gt})}this.saveTextStates_(),(b.backgroundFill||b.backgroundStroke)&&(this.setFillStrokeStyle(b.backgroundFill,b.backgroundStroke),b.backgroundFill&&this.updateFillStyle(this.state,this.createFill),b.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,s);let bt=b.padding;if(bt!=defaultPadding&&(b.scale[0]<0||b.scale[1]<0)){let It=b.padding[0],Pt=b.padding[1],Tt=b.padding[2],Gt=b.padding[3];b.scale[0]<0&&(Pt=-Pt,Gt=-Gt),b.scale[1]<0&&(It=-It,Tt=-Tt),bt=[It,Pt,Tt,Gt]}const wt=this.pixelRatio;this.instructions.push([Instruction.DRAW_IMAGE,_e,mt,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,bt==defaultPadding?defaultPadding:bt.map(function(It){return It*wt}),!!b.backgroundFill,!!b.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,ft]);const Ct=1/wt,Rt=this.state.fillStyle;b.backgroundFill&&(this.state.fillStyle=defaultFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,_e,mt,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[Ct,Ct],NaN,void 0,this.declutterImageWithText_,bt,!!b.backgroundFill,!!b.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,ft]),b.backgroundFill&&(this.state.fillStyle=Rt,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(s)}}saveTextStates_(){const e=this.textStrokeState_,s=this.textState_,a=this.textFillState_,d=this.strokeKey_;e&&(d in this.strokeStates||(this.strokeStates[d]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const b=this.textKey_;b in this.textStates||(this.textStates[b]={font:s.font,textAlign:s.textAlign||defaultTextAlign,justify:s.justify,textBaseline:s.textBaseline||defaultTextBaseline,scale:s.scale});const _=this.fillKey_;a&&(_ in this.fillStates||(this.fillStates[_]={fillStyle:a.fillStyle}))}drawChars_(e,s){const a=this.textStrokeState_,d=this.textState_,b=this.strokeKey_,_=this.textKey_,_e=this.fillKey_;this.saveTextStates_();const ot=this.pixelRatio,st=TEXT_ALIGN[d.textBaseline],ct=this.textOffsetY_*ot,ft=this.text_,mt=a?a.lineWidth*Math.abs(d.scale[0])/2:0;this.instructions.push([Instruction.DRAW_CHARS,e,s,st,d.overflow,_e,d.maxAngle,ot,ct,b,mt*ot,ft,_,1]),this.hitDetectionInstructions.push([Instruction.DRAW_CHARS,e,s,st,d.overflow,_e&&defaultFillStyle,d.maxAngle,ot,ct,b,mt*ot,ft,_,1/ot])}setTextStyle(e,s){let a,d,b;if(!e)this.text_="";else{const _=e.getFill();_?(d=this.textFillState_,d||(d={},this.textFillState_=d),d.fillStyle=asColorLike(_.getColor()||defaultFillStyle)):(d=null,this.textFillState_=d);const _e=e.getStroke();if(!_e)b=null,this.textStrokeState_=b;else{b=this.textStrokeState_,b||(b={},this.textStrokeState_=b);const wt=_e.getLineDash(),Ct=_e.getLineDashOffset(),Rt=_e.getWidth(),It=_e.getMiterLimit();b.lineCap=_e.getLineCap()||defaultLineCap,b.lineDash=wt?wt.slice():defaultLineDash,b.lineDashOffset=Ct===void 0?defaultLineDashOffset:Ct,b.lineJoin=_e.getLineJoin()||defaultLineJoin,b.lineWidth=Rt===void 0?defaultLineWidth:Rt,b.miterLimit=It===void 0?defaultMiterLimit:It,b.strokeStyle=asColorLike(_e.getColor()||defaultStrokeStyle)}a=this.textState_;const ot=e.getFont()||defaultFont;registerFont(ot);const st=e.getScaleArray();a.overflow=e.getOverflow(),a.font=ot,a.maxAngle=e.getMaxAngle(),a.placement=e.getPlacement(),a.textAlign=e.getTextAlign(),a.repeat=e.getRepeat(),a.justify=e.getJustify(),a.textBaseline=e.getTextBaseline()||defaultTextBaseline,a.backgroundFill=e.getBackgroundFill(),a.backgroundStroke=e.getBackgroundStroke(),a.padding=e.getPadding()||defaultPadding,a.scale=st===void 0?[1,1]:st;const ct=e.getOffsetX(),ft=e.getOffsetY(),mt=e.getRotateWithView(),bt=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=ct===void 0?0:ct,this.textOffsetY_=ft===void 0?0:ft,this.textRotateWithView_=mt===void 0?!1:mt,this.textRotation_=bt===void 0?0:bt,this.strokeKey_=b?(typeof b.strokeStyle=="string"?b.strokeStyle:getUid(b.strokeStyle))+b.lineCap+b.lineDashOffset+"|"+b.lineWidth+b.lineJoin+b.miterLimit+"["+b.lineDash.join()+"]":"",this.textKey_=a.font+a.scale+(a.textAlign||"?")+(a.repeat||"?")+(a.justify||"?")+(a.textBaseline||"?"),this.fillKey_=d?typeof d.fillStyle=="string"?d.fillStyle:"|"+getUid(d.fillStyle):""}this.declutterImageWithText_=s}}const BATCH_CONSTRUCTORS={Circle:CanvasPolygonBuilder,Default:CanvasBuilder,Image:CanvasImageBuilder,LineString:CanvasLineStringBuilder,Polygon:CanvasPolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(e,s,a,d){this.tolerance_=e,this.maxExtent_=s,this.pixelRatio_=d,this.resolution_=a,this.buildersByZIndex_={}}finish(){const e={};for(const s in this.buildersByZIndex_){e[s]=e[s]||{};const a=this.buildersByZIndex_[s];for(const d in a){const b=a[d].finish();e[s][d]=b}}return e}getBuilder(e,s){const a=e!==void 0?e.toString():"0";let d=this.buildersByZIndex_[a];d===void 0&&(d={},this.buildersByZIndex_[a]=d);let b=d[s];if(b===void 0){const _=BATCH_CONSTRUCTORS[s];b=new _(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),d[s]=b}return b}}function drawTextOnPath(o,e,s,a,d,b,_,_e,ot,st,ct,ft){let mt=o[e],bt=o[e+1],wt=0,Ct=0,Rt=0,It=0;function Pt(){wt=mt,Ct=bt,e+=a,mt=o[e],bt=o[e+1],It+=Rt,Rt=Math.sqrt((mt-wt)*(mt-wt)+(bt-Ct)*(bt-Ct))}do Pt();while(e<s-a&&It+Rt<b);let Tt=Rt===0?0:(b-It)/Rt;const Gt=lerp(wt,mt,Tt),Jt=lerp(Ct,bt,Tt),qt=e-a,Nt=It,Qt=b+_e*ot(st,d,ct);for(;e<s-a&&It+Rt<Qt;)Pt();Tt=Rt===0?0:(Qt-It)/Rt;const fn=lerp(wt,mt,Tt),Mn=lerp(Ct,bt,Tt);let ln;if(ft){const Mt=[Gt,Jt,fn,Mn];rotate(Mt,0,4,2,ft,Mt,Mt),ln=Mt[0]>Mt[2]}else ln=Gt>fn;const Wt=Math.PI,so=[],pn=qt+a===e;e=qt,Rt=0,It=Nt,mt=o[e],bt=o[e+1];let hn;if(pn){Pt(),hn=Math.atan2(bt-Ct,mt-wt),ln&&(hn+=hn>0?-Wt:Wt);const Mt=(fn+Gt)/2,Hn=(Mn+Jt)/2;return so[0]=[Mt,Hn,(Qt-b)/2,hn,d],so}d=d.replace(/\n/g," ");for(let Mt=0,Hn=d.length;Mt<Hn;){Pt();let cn=Math.atan2(bt-Ct,mt-wt);if(ln&&(cn+=cn>0?-Wt:Wt),hn!==void 0){let oo=cn-hn;if(oo+=oo>Wt?-2*Wt:oo<-Wt?2*Wt:0,Math.abs(oo)>_)return null}hn=cn;const fo=Mt;let Fn=0;for(;Mt<Hn;++Mt){const oo=ln?Hn-Mt-1:Mt,Mo=_e*ot(st,d[oo],ct);if(e+a<s&&It+Rt<b+Fn+Mo/2)break;Fn+=Mo}if(Mt===fo)continue;const Tn=ln?d.substring(Hn-fo,Hn-Mt):d.substring(fo,Mt);Tt=Rt===0?0:(b+Fn/2-It)/Rt;const qn=lerp(wt,mt,Tt),nr=lerp(Ct,bt,Tt);so.push([qn,nr,Fn/2,cn,Tn]),b+=Fn}return so}function lineStringLength(o,e,s,a){let d=o[e],b=o[e+1],_=0;for(let _e=e+a;_e<s;_e+=a){const ot=o[_e],st=o[_e+1];_+=Math.sqrt((ot-d)*(ot-d)+(st-b)*(st-b)),d=ot,b=st}return _}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(o){return o[3].declutterBox}const rtlRegEx=new RegExp("[-----]");function horizontalTextAlign(o,e){return e==="start"?e=rtlRegEx.test(o)?"right":"left":e==="end"&&(e=rtlRegEx.test(o)?"left":"right"),TEXT_ALIGN[e]}function createTextChunks(o,e,s){return s>0&&o.push(`
`,""),o.push(e,""),o}class Executor{constructor(e,s,a,d){this.overlaps=a,this.pixelRatio=s,this.resolution=e,this.alignFill_,this.instructions=d.instructions,this.coordinates=d.coordinates,this.coordinateCache_={},this.renderedTransform_=create(),this.hitDetectionInstructions=d.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=d.fillStates||{},this.strokeStates=d.strokeStates||{},this.textStates=d.textStates||{},this.widths_={},this.labels_={}}createLabel(e,s,a,d){const b=e+s+a+d;if(this.labels_[b])return this.labels_[b];const _=d?this.strokeStates[d]:null,_e=a?this.fillStates[a]:null,ot=this.textStates[s],st=this.pixelRatio,ct=[ot.scale[0]*st,ot.scale[1]*st],ft=Array.isArray(e),mt=ot.justify?TEXT_ALIGN[ot.justify]:horizontalTextAlign(Array.isArray(e)?e[0]:e,ot.textAlign||defaultTextAlign),bt=d&&_.lineWidth?_.lineWidth:0,wt=ft?e:e.split(`
`).reduce(createTextChunks,[]),{width:Ct,height:Rt,widths:It,heights:Pt,lineWidths:Tt}=getTextDimensions(ot,wt),Gt=Ct+bt,Jt=[],qt=(Gt+2)*ct[0],Nt=(Rt+bt)*ct[1],Qt={width:qt<0?Math.floor(qt):Math.ceil(qt),height:Nt<0?Math.floor(Nt):Math.ceil(Nt),contextInstructions:Jt};(ct[0]!=1||ct[1]!=1)&&Jt.push("scale",ct),d&&(Jt.push("strokeStyle",_.strokeStyle),Jt.push("lineWidth",bt),Jt.push("lineCap",_.lineCap),Jt.push("lineJoin",_.lineJoin),Jt.push("miterLimit",_.miterLimit),Jt.push("setLineDash",[_.lineDash]),Jt.push("lineDashOffset",_.lineDashOffset)),a&&Jt.push("fillStyle",_e.fillStyle),Jt.push("textBaseline","middle"),Jt.push("textAlign","center");const fn=.5-mt;let Mn=mt*Gt+fn*bt;const ln=[],Wt=[];let so=0,pn=0,hn=0,Mt=0,Hn;for(let cn=0,fo=wt.length;cn<fo;cn+=2){const Fn=wt[cn];if(Fn===`
`){pn+=so,so=0,Mn=mt*Gt+fn*bt,++Mt;continue}const Tn=wt[cn+1]||ot.font;Tn!==Hn&&(d&&ln.push("font",Tn),a&&Wt.push("font",Tn),Hn=Tn),so=Math.max(so,Pt[hn]);const qn=[Fn,Mn+fn*It[hn]+mt*(It[hn]-Tt[Mt]),.5*(bt+so)+pn];Mn+=It[hn],d&&ln.push("strokeText",qn),a&&Wt.push("fillText",qn),++hn}return Array.prototype.push.apply(Jt,ln),Array.prototype.push.apply(Jt,Wt),this.labels_[b]=Qt,Qt}replayTextBackground_(e,s,a,d,b,_,_e){e.beginPath(),e.moveTo.apply(e,s),e.lineTo.apply(e,a),e.lineTo.apply(e,d),e.lineTo.apply(e,b),e.lineTo.apply(e,s),_&&(this.alignFill_=_[2],this.fill_(e)),_e&&(this.setStrokeStyle_(e,_e),e.stroke())}calculateImageOrLabelDimensions_(e,s,a,d,b,_,_e,ot,st,ct,ft,mt,bt,wt,Ct,Rt){_e*=mt[0],ot*=mt[1];let It=a-_e,Pt=d-ot;const Tt=b+st>e?e-st:b,Gt=_+ct>s?s-ct:_,Jt=wt[3]+Tt*mt[0]+wt[1],qt=wt[0]+Gt*mt[1]+wt[2],Nt=It-wt[3],Qt=Pt-wt[0];(Ct||ft!==0)&&(p1[0]=Nt,p4[0]=Nt,p1[1]=Qt,p2[1]=Qt,p2[0]=Nt+Jt,p3[0]=p2[0],p3[1]=Qt+qt,p4[1]=p3[1]);let fn;return ft!==0?(fn=compose(create(),a,d,1,1,ft,-a,-d),apply$1(fn,p1),apply$1(fn,p2),apply$1(fn,p3),apply$1(fn,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(Nt,Nt+Jt),Math.min(Qt,Qt+qt),Math.max(Nt,Nt+Jt),Math.max(Qt,Qt+qt),tmpExtent),bt&&(It=Math.round(It),Pt=Math.round(Pt)),{drawImageX:It,drawImageY:Pt,drawImageW:Tt,drawImageH:Gt,originX:st,originY:ct,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:Rt},canvasTransform:fn,scale:mt}}replayImageOrLabel_(e,s,a,d,b,_,_e){const ot=!!(_||_e),st=d.declutterBox,ct=e.canvas,ft=_e?_e[2]*d.scale[0]/2:0;return st.minX-ft<=ct.width/s&&st.maxX+ft>=0&&st.minY-ft<=ct.height/s&&st.maxY+ft>=0&&(ot&&this.replayTextBackground_(e,p1,p2,p3,p4,_,_e),drawImageOrLabel(e,d.canvasTransform,b,a,d.originX,d.originY,d.drawImageW,d.drawImageH,d.drawImageX,d.drawImageY,d.scale)),!0}fill_(e){if(this.alignFill_){const s=apply$1(this.renderedTransform_,[0,0]),a=512*this.pixelRatio;e.save(),e.translate(s[0]%a,s[1]%a),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,s){e.strokeStyle=s[1],e.lineWidth=s[2],e.lineCap=s[3],e.lineJoin=s[4],e.miterLimit=s[5],e.lineDashOffset=s[7],e.setLineDash(s[6])}drawLabelWithPointPlacement_(e,s,a,d){const b=this.textStates[s],_=this.createLabel(e,s,d,a),_e=this.strokeStates[a],ot=this.pixelRatio,st=horizontalTextAlign(Array.isArray(e)?e[0]:e,b.textAlign||defaultTextAlign),ct=TEXT_ALIGN[b.textBaseline||defaultTextBaseline],ft=_e&&_e.lineWidth?_e.lineWidth:0,mt=_.width/ot-2*b.scale[0],bt=st*mt+2*(.5-st)*ft,wt=ct*_.height/ot+2*(.5-ct)*ft;return{label:_,anchorX:bt,anchorY:wt}}execute_(e,s,a,d,b,_,_e,ot){let st;this.pixelCoordinates_&&equals$2(a,this.renderedTransform_)?st=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),st=transform2D(this.coordinates,0,this.coordinates.length,2,a,this.pixelCoordinates_),setFromArray(this.renderedTransform_,a));let ct=0;const ft=d.length;let mt=0,bt,wt,Ct,Rt,It,Pt,Tt,Gt,Jt,qt,Nt,Qt,fn=0,Mn=0,ln=null,Wt=null;const so=this.coordinateCache_,pn=this.viewRotation_,hn=Math.round(Math.atan2(-a[1],a[0])*1e12)/1e12,Mt={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:pn},Hn=this.instructions!=d||this.overlaps?0:200;let cn,fo,Fn,Tn;for(;ct<ft;){const qn=d[ct];switch(qn[0]){case Instruction.BEGIN_GEOMETRY:cn=qn[1],Tn=qn[3],cn.getGeometry()?_e!==void 0&&!intersects$1(_e,Tn.getExtent())?ct=qn[2]+1:++ct:ct=qn[2];break;case Instruction.BEGIN_PATH:fn>Hn&&(this.fill_(e),fn=0),Mn>Hn&&(e.stroke(),Mn=0),!fn&&!Mn&&(e.beginPath(),Rt=NaN,It=NaN),++ct;break;case Instruction.CIRCLE:mt=qn[1];const oo=st[mt],Mo=st[mt+1],Dn=st[mt+2],xo=st[mt+3],Xt=Dn-oo,Ur=xo-Mo,co=Math.sqrt(Xt*Xt+Ur*Ur);e.moveTo(oo+co,Mo),e.arc(oo,Mo,co,0,2*Math.PI,!0),++ct;break;case Instruction.CLOSE_PATH:e.closePath(),++ct;break;case Instruction.CUSTOM:mt=qn[1],bt=qn[2];const Vo=qn[3],yo=qn[4],ko=qn.length==6?qn[5]:void 0;Mt.geometry=Vo,Mt.feature=cn,ct in so||(so[ct]=[]);const yn=so[ct];ko?ko(st,mt,bt,2,yn):(yn[0]=st[mt],yn[1]=st[mt+1],yn.length=2),yo(yn,Mt),++ct;break;case Instruction.DRAW_IMAGE:mt=qn[1],bt=qn[2],Gt=qn[3],wt=qn[4],Ct=qn[5];let Cn=qn[6];const Nn=qn[7],sn=qn[8],kn=qn[9],Ln=qn[10];let Bn=qn[11];const Eo=qn[12];let Wn=qn[13];const Rn=qn[14],Qn=qn[15];if(!Gt&&qn.length>=20){Jt=qn[19],qt=qn[20],Nt=qn[21],Qt=qn[22];const _c=this.drawLabelWithPointPlacement_(Jt,qt,Nt,Qt);Gt=_c.label,qn[3]=Gt;const Su=qn[23];wt=(_c.anchorX-Su)*this.pixelRatio,qn[4]=wt;const Zs=qn[24];Ct=(_c.anchorY-Zs)*this.pixelRatio,qn[5]=Ct,Cn=Gt.height,qn[6]=Cn,Wn=Gt.width,qn[13]=Wn}let vo;qn.length>25&&(vo=qn[25]);let Gn,ro,Co;qn.length>17?(Gn=qn[16],ro=qn[17],Co=qn[18]):(Gn=defaultPadding,ro=!1,Co=!1),Ln&&hn?Bn+=pn:!Ln&&!hn&&(Bn-=pn);let Do=0;for(;mt<bt;mt+=2){if(vo&&vo[Do++]<Wn/this.pixelRatio)continue;const _c=this.calculateImageOrLabelDimensions_(Gt.width,Gt.height,st[mt],st[mt+1],Wn,Cn,wt,Ct,sn,kn,Bn,Eo,b,Gn,ro||Co,cn),Su=[e,s,Gt,_c,Nn,ro?ln:null,Co?Wt:null];if(ot){if(Rn==="none")continue;if(Rn==="obstacle"){ot.insert(_c.declutterBox);continue}else{let Zs,Eu;if(Qn){const uu=bt-mt;if(!Qn[uu]){Qn[uu]=Su;continue}if(Zs=Qn[uu],delete Qn[uu],Eu=getDeclutterBox(Zs),ot.collides(Eu))continue}if(ot.collides(_c.declutterBox))continue;Zs&&(ot.insert(Eu),this.replayImageOrLabel_.apply(this,Zs)),ot.insert(_c.declutterBox)}}this.replayImageOrLabel_.apply(this,Su)}++ct;break;case Instruction.DRAW_CHARS:const Mr=qn[1],ar=qn[2],xr=qn[3],us=qn[4];Qt=qn[5];const wr=qn[6],gs=qn[7],Ts=qn[8];Nt=qn[9];const Rs=qn[10];Jt=qn[11],qt=qn[12];const Cl=[qn[13],qn[13]],Yr=this.textStates[qt],Dl=Yr.font,or=[Yr.scale[0]*gs,Yr.scale[1]*gs];let Ds;Dl in this.widths_?Ds=this.widths_[Dl]:(Ds={},this.widths_[Dl]=Ds);const hu=lineStringLength(st,Mr,ar,2),au=Math.abs(or[0])*measureAndCacheTextWidth(Dl,Jt,Ds);if(us||au<=hu){const _c=this.textStates[qt].textAlign,Su=(hu-au)*horizontalTextAlign(Jt,_c),Zs=drawTextOnPath(st,Mr,ar,2,Jt,Su,wr,Math.abs(or[0]),measureAndCacheTextWidth,Dl,Ds,hn?0:this.viewRotation_);e:if(Zs){const Eu=[];let uu,$a,es,yl,mo;if(Nt)for(uu=0,$a=Zs.length;uu<$a;++uu){mo=Zs[uu],es=mo[4],yl=this.createLabel(es,qt,"",Nt),wt=mo[2]+(or[0]<0?-Rs:Rs),Ct=xr*yl.height+(.5-xr)*2*Rs*or[1]/or[0]-Ts;const Oo=this.calculateImageOrLabelDimensions_(yl.width,yl.height,mo[0],mo[1],yl.width,yl.height,wt,Ct,0,0,mo[3],Cl,!1,defaultPadding,!1,cn);if(ot&&ot.collides(Oo.declutterBox))break e;Eu.push([e,s,yl,Oo,1,null,null])}if(Qt)for(uu=0,$a=Zs.length;uu<$a;++uu){mo=Zs[uu],es=mo[4],yl=this.createLabel(es,qt,Qt,""),wt=mo[2],Ct=xr*yl.height-Ts;const Oo=this.calculateImageOrLabelDimensions_(yl.width,yl.height,mo[0],mo[1],yl.width,yl.height,wt,Ct,0,0,mo[3],Cl,!1,defaultPadding,!1,cn);if(ot&&ot.collides(Oo.declutterBox))break e;Eu.push([e,s,yl,Oo,1,null,null])}ot&&ot.load(Eu.map(getDeclutterBox));for(let Oo=0,Ar=Eu.length;Oo<Ar;++Oo)this.replayImageOrLabel_.apply(this,Eu[Oo])}}++ct;break;case Instruction.END_GEOMETRY:if(_!==void 0){cn=qn[1];const _c=_(cn,Tn);if(_c)return _c}++ct;break;case Instruction.FILL:Hn?fn++:this.fill_(e),++ct;break;case Instruction.MOVE_TO_LINE_TO:for(mt=qn[1],bt=qn[2],fo=st[mt],Fn=st[mt+1],Pt=fo+.5|0,Tt=Fn+.5|0,(Pt!==Rt||Tt!==It)&&(e.moveTo(fo,Fn),Rt=Pt,It=Tt),mt+=2;mt<bt;mt+=2)fo=st[mt],Fn=st[mt+1],Pt=fo+.5|0,Tt=Fn+.5|0,(mt==bt-2||Pt!==Rt||Tt!==It)&&(e.lineTo(fo,Fn),Rt=Pt,It=Tt);++ct;break;case Instruction.SET_FILL_STYLE:ln=qn,this.alignFill_=qn[2],fn&&(this.fill_(e),fn=0,Mn&&(e.stroke(),Mn=0)),e.fillStyle=qn[1],++ct;break;case Instruction.SET_STROKE_STYLE:Wt=qn,Mn&&(e.stroke(),Mn=0),this.setStrokeStyle_(e,qn),++ct;break;case Instruction.STROKE:Hn?Mn++:e.stroke(),++ct;break;default:++ct;break}}fn&&this.fill_(e),Mn&&e.stroke()}execute(e,s,a,d,b,_){this.viewRotation_=d,this.execute_(e,s,a,this.instructions,b,void 0,void 0,_)}executeHitDetection(e,s,a,d,b){return this.viewRotation_=a,this.execute_(e,1,s,this.hitDetectionInstructions,!0,d,b)}}const ORDER=["Polygon","Circle","LineString","Image","Text","Default"];class ExecutorGroup{constructor(e,s,a,d,b,_){this.maxExtent_=e,this.overlaps_=d,this.pixelRatio_=a,this.resolution_=s,this.renderBuffer_=_,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create(),this.createExecutors_(b)}clip(e,s){const a=this.getClipCoords(s);e.beginPath(),e.moveTo(a[0],a[1]),e.lineTo(a[2],a[3]),e.lineTo(a[4],a[5]),e.lineTo(a[6],a[7]),e.clip()}createExecutors_(e){for(const s in e){let a=this.executorsByZIndex_[s];a===void 0&&(a={},this.executorsByZIndex_[s]=a);const d=e[s];for(const b in d){const _=d[b];a[b]=new Executor(this.resolution_,this.pixelRatio_,this.overlaps_,_)}}}hasExecutors(e){for(const s in this.executorsByZIndex_){const a=this.executorsByZIndex_[s];for(let d=0,b=e.length;d<b;++d)if(e[d]in a)return!0}return!1}forEachFeatureAtCoordinate(e,s,a,d,b,_){d=Math.round(d);const _e=d*2+1,ot=compose(this.hitDetectionTransform_,d+.5,d+.5,1/s,-1/s,-a,-e[0],-e[1]),st=!this.hitDetectionContext_;st&&(this.hitDetectionContext_=createCanvasContext2D(_e,_e,void 0,{willReadFrequently:!0}));const ct=this.hitDetectionContext_;ct.canvas.width!==_e||ct.canvas.height!==_e?(ct.canvas.width=_e,ct.canvas.height=_e):st||ct.clearRect(0,0,_e,_e);let ft;this.renderBuffer_!==void 0&&(ft=createEmpty(),extendCoordinate(ft,e),buffer(ft,s*(this.renderBuffer_+d),ft));const mt=getPixelIndexArray(d);let bt;function wt(Jt,qt){const Nt=ct.getImageData(0,0,_e,_e).data;for(let Qt=0,fn=mt.length;Qt<fn;Qt++)if(Nt[mt[Qt]]>0){if(!_||bt!=="Image"&&bt!=="Text"||_.includes(Jt)){const Mn=(mt[Qt]-3)/4,ln=d-Mn%_e,Wt=d-(Mn/_e|0),so=b(Jt,qt,ln*ln+Wt*Wt);if(so)return so}ct.clearRect(0,0,_e,_e);break}}const Ct=Object.keys(this.executorsByZIndex_).map(Number);Ct.sort(ascending);let Rt,It,Pt,Tt,Gt;for(Rt=Ct.length-1;Rt>=0;--Rt){const Jt=Ct[Rt].toString();for(Pt=this.executorsByZIndex_[Jt],It=ORDER.length-1;It>=0;--It)if(bt=ORDER[It],Tt=Pt[bt],Tt!==void 0&&(Gt=Tt.executeHitDetection(ct,ot,a,wt,ft),Gt))return Gt}}getClipCoords(e){const s=this.maxExtent_;if(!s)return null;const a=s[0],d=s[1],b=s[2],_=s[3],_e=[a,d,a,_,b,_,b,d];return transform2D(_e,0,8,2,e,_e),_e}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(e,s,a,d,b,_,_e){const ot=Object.keys(this.executorsByZIndex_).map(Number);ot.sort(ascending),this.maxExtent_&&(e.save(),this.clip(e,a)),_=_||ORDER;let st,ct,ft,mt,bt,wt;for(_e&&ot.reverse(),st=0,ct=ot.length;st<ct;++st){const Ct=ot[st].toString();for(bt=this.executorsByZIndex_[Ct],ft=0,mt=_.length;ft<mt;++ft){const Rt=_[ft];wt=bt[Rt],wt!==void 0&&wt.execute(e,s,a,d,b,_e)}}this.maxExtent_&&e.restore()}}const circlePixelIndexArrayCache={};function getPixelIndexArray(o){if(circlePixelIndexArrayCache[o]!==void 0)return circlePixelIndexArrayCache[o];const e=o*2+1,s=o*o,a=new Array(s+1);for(let b=0;b<=o;++b)for(let _=0;_<=o;++_){const _e=b*b+_*_;if(_e>s)break;let ot=a[_e];ot||(ot=[],a[_e]=ot),ot.push(((o+b)*e+(o+_))*4+3),b>0&&ot.push(((o-b)*e+(o+_))*4+3),_>0&&(ot.push(((o+b)*e+(o-_))*4+3),b>0&&ot.push(((o-b)*e+(o-_))*4+3))}const d=[];for(let b=0,_=a.length;b<_;++b)a[b]&&d.push(...a[b]);return circlePixelIndexArrayCache[o]=d,d}class CanvasImmediateRenderer extends VectorContext{constructor(e,s,a,d,b,_,_e){super(),this.context_=e,this.pixelRatio_=s,this.extent_=a,this.transform_=d,this.transformRotation_=d?toFixed(Math.atan2(d[1],d[0]),10):0,this.viewRotation_=b,this.squaredTolerance_=_,this.userTransform_=_e,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create()}drawImages_(e,s,a,d){if(!this.image_)return;const b=transform2D(e,s,a,d,this.transform_,this.pixelCoordinates_),_=this.context_,_e=this.tmpLocalTransform_,ot=_.globalAlpha;this.imageOpacity_!=1&&(_.globalAlpha=ot*this.imageOpacity_);let st=this.imageRotation_;this.transformRotation_===0&&(st-=this.viewRotation_),this.imageRotateWithView_&&(st+=this.viewRotation_);for(let ct=0,ft=b.length;ct<ft;ct+=2){const mt=b[ct]-this.imageAnchorX_,bt=b[ct+1]-this.imageAnchorY_;if(st!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const wt=mt+this.imageAnchorX_,Ct=bt+this.imageAnchorY_;compose(_e,wt,Ct,1,1,st,-wt,-Ct),_.save(),_.transform.apply(_,_e),_.translate(wt,Ct),_.scale(this.imageScale_[0],this.imageScale_[1]),_.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),_.restore()}else _.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,mt,bt,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(_.globalAlpha=ot)}drawText_(e,s,a,d){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const b=transform2D(e,s,a,d,this.transform_,this.pixelCoordinates_),_=this.context_;let _e=this.textRotation_;for(this.transformRotation_===0&&(_e-=this.viewRotation_),this.textRotateWithView_&&(_e+=this.viewRotation_);s<a;s+=d){const ot=b[s]+this.textOffsetX_,st=b[s+1]+this.textOffsetY_;_e!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(_.save(),_.translate(ot-this.textOffsetX_,st-this.textOffsetY_),_.rotate(_e),_.translate(this.textOffsetX_,this.textOffsetY_),_.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&_.strokeText(this.text_,0,0),this.textFillState_&&_.fillText(this.text_,0,0),_.restore()):(this.textStrokeState_&&_.strokeText(this.text_,ot,st),this.textFillState_&&_.fillText(this.text_,ot,st))}}moveToLineTo_(e,s,a,d,b){const _=this.context_,_e=transform2D(e,s,a,d,this.transform_,this.pixelCoordinates_);_.moveTo(_e[0],_e[1]);let ot=_e.length;b&&(ot-=2);for(let st=2;st<ot;st+=2)_.lineTo(_e[st],_e[st+1]);return b&&_.closePath(),a}drawRings_(e,s,a,d){for(let b=0,_=a.length;b<_;++b)s=this.moveToLineTo_(e,s,a[b],d,!0);return s}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const s=transformGeom2D(e,this.transform_,this.pixelCoordinates_),a=s[2]-s[0],d=s[3]-s[1],b=Math.sqrt(a*a+d*d),_=this.context_;_.beginPath(),_.arc(s[0],s[1],b,0,2*Math.PI),this.fillState_&&_.fill(),this.strokeState_&&_.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,s){const a=s.getGeometryFunction()(e);a&&(this.setStyle(s),this.drawGeometry(a))}drawGeometryCollection(e){const s=e.getGeometriesArray();for(let a=0,d=s.length;a<d;++a)this.drawGeometry(s[a])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const s=e.getFlatCoordinates(),a=e.getStride();this.image_&&this.drawImages_(s,0,s.length,a),this.text_!==""&&this.drawText_(s,0,s.length,a)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const s=e.getFlatCoordinates(),a=e.getStride();this.image_&&this.drawImages_(s,0,s.length,a),this.text_!==""&&this.drawText_(s,0,s.length,a)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const s=this.context_,a=e.getFlatCoordinates();s.beginPath(),this.moveToLineTo_(a,0,a.length,e.getStride(),!1),s.stroke()}if(this.text_!==""){const s=e.getFlatMidpoint();this.drawText_(s,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const s=e.getExtent();if(intersects$1(this.extent_,s)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const a=this.context_,d=e.getFlatCoordinates();let b=0;const _=e.getEnds(),_e=e.getStride();a.beginPath();for(let ot=0,st=_.length;ot<st;++ot)b=this.moveToLineTo_(d,b,_[ot],_e,!1);a.stroke()}if(this.text_!==""){const a=e.getFlatMidpoints();this.drawText_(a,0,a.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const s=this.context_;s.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}if(this.text_!==""){const s=e.getFlatInteriorPoint();this.drawText_(s,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const s=this.context_,a=e.getOrientedFlatCoordinates();let d=0;const b=e.getEndss(),_=e.getStride();s.beginPath();for(let _e=0,ot=b.length;_e<ot;++_e){const st=b[_e];d=this.drawRings_(a,d,st,_)}this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}if(this.text_!==""){const s=e.getFlatInteriorPoints();this.drawText_(s,0,s.length,2)}}}setContextFillState_(e){const s=this.context_,a=this.contextFillState_;a?a.fillStyle!=e.fillStyle&&(a.fillStyle=e.fillStyle,s.fillStyle=e.fillStyle):(s.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const s=this.context_,a=this.contextStrokeState_;a?(a.lineCap!=e.lineCap&&(a.lineCap=e.lineCap,s.lineCap=e.lineCap),equals$2(a.lineDash,e.lineDash)||s.setLineDash(a.lineDash=e.lineDash),a.lineDashOffset!=e.lineDashOffset&&(a.lineDashOffset=e.lineDashOffset,s.lineDashOffset=e.lineDashOffset),a.lineJoin!=e.lineJoin&&(a.lineJoin=e.lineJoin,s.lineJoin=e.lineJoin),a.lineWidth!=e.lineWidth&&(a.lineWidth=e.lineWidth,s.lineWidth=e.lineWidth),a.miterLimit!=e.miterLimit&&(a.miterLimit=e.miterLimit,s.miterLimit=e.miterLimit),a.strokeStyle!=e.strokeStyle&&(a.strokeStyle=e.strokeStyle,s.strokeStyle=e.strokeStyle)):(s.lineCap=e.lineCap,s.setLineDash(e.lineDash),s.lineDashOffset=e.lineDashOffset,s.lineJoin=e.lineJoin,s.lineWidth=e.lineWidth,s.miterLimit=e.miterLimit,s.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const s=this.context_,a=this.contextTextState_,d=e.textAlign?e.textAlign:defaultTextAlign;a?(a.font!=e.font&&(a.font=e.font,s.font=e.font),a.textAlign!=d&&(a.textAlign=d,s.textAlign=d),a.textBaseline!=e.textBaseline&&(a.textBaseline=e.textBaseline,s.textBaseline=e.textBaseline)):(s.font=e.font,s.textAlign=d,s.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:d,textBaseline:e.textBaseline})}setFillStrokeStyle(e,s){if(!e)this.fillState_=null;else{const a=e.getColor();this.fillState_={fillStyle:asColorLike(a||defaultFillStyle)}}if(!s)this.strokeState_=null;else{const a=s.getColor(),d=s.getLineCap(),b=s.getLineDash(),_=s.getLineDashOffset(),_e=s.getLineJoin(),ot=s.getWidth(),st=s.getMiterLimit(),ct=b||defaultLineDash;this.strokeState_={lineCap:d!==void 0?d:defaultLineCap,lineDash:this.pixelRatio_===1?ct:ct.map(ft=>ft*this.pixelRatio_),lineDashOffset:(_||defaultLineDashOffset)*this.pixelRatio_,lineJoin:_e!==void 0?_e:defaultLineJoin,lineWidth:(ot!==void 0?ot:defaultLineWidth)*this.pixelRatio_,miterLimit:st!==void 0?st:defaultMiterLimit,strokeStyle:asColorLike(a||defaultStrokeStyle)}}}setImageStyle(e){let s;if(!e||!(s=e.getSize())){this.image_=null;return}const a=e.getPixelRatio(this.pixelRatio_),d=e.getAnchor(),b=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=d[0]*a,this.imageAnchorY_=d[1]*a,this.imageHeight_=s[1]*a,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=b[0],this.imageOriginY_=b[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const _=e.getScaleArray();this.imageScale_=[_[0]*this.pixelRatio_/a,_[1]*this.pixelRatio_/a],this.imageWidth_=s[0]*a}setTextStyle(e){if(!e)this.text_="";else{const s=e.getFill();if(!s)this.textFillState_=null;else{const bt=s.getColor();this.textFillState_={fillStyle:asColorLike(bt||defaultFillStyle)}}const a=e.getStroke();if(!a)this.textStrokeState_=null;else{const bt=a.getColor(),wt=a.getLineCap(),Ct=a.getLineDash(),Rt=a.getLineDashOffset(),It=a.getLineJoin(),Pt=a.getWidth(),Tt=a.getMiterLimit();this.textStrokeState_={lineCap:wt!==void 0?wt:defaultLineCap,lineDash:Ct||defaultLineDash,lineDashOffset:Rt||defaultLineDashOffset,lineJoin:It!==void 0?It:defaultLineJoin,lineWidth:Pt!==void 0?Pt:defaultLineWidth,miterLimit:Tt!==void 0?Tt:defaultMiterLimit,strokeStyle:asColorLike(bt||defaultStrokeStyle)}}const d=e.getFont(),b=e.getOffsetX(),_=e.getOffsetY(),_e=e.getRotateWithView(),ot=e.getRotation(),st=e.getScaleArray(),ct=e.getText(),ft=e.getTextAlign(),mt=e.getTextBaseline();this.textState_={font:d!==void 0?d:defaultFont,textAlign:ft!==void 0?ft:defaultTextAlign,textBaseline:mt!==void 0?mt:defaultTextBaseline},this.text_=ct!==void 0?Array.isArray(ct)?ct.reduce((bt,wt,Ct)=>bt+=Ct%2?" ":wt,""):ct:"",this.textOffsetX_=b!==void 0?this.pixelRatio_*b:0,this.textOffsetY_=_!==void 0?this.pixelRatio_*_:0,this.textRotateWithView_=_e!==void 0?_e:!1,this.textRotation_=ot!==void 0?ot:0,this.textScale_=[this.pixelRatio_*st[0],this.pixelRatio_*st[1]]}}}const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(o,e,s,a,d,b,_){const _e=o[0]*HIT_DETECT_RESOLUTION,ot=o[1]*HIT_DETECT_RESOLUTION,st=createCanvasContext2D(_e,ot);st.imageSmoothingEnabled=!1;const ct=st.canvas,ft=new CanvasImmediateRenderer(st,HIT_DETECT_RESOLUTION,d,null,_),mt=s.length,bt=Math.floor((256*256*256-1)/mt),wt={};for(let Rt=1;Rt<=mt;++Rt){const It=s[Rt-1],Pt=It.getStyleFunction()||a;if(!Pt)continue;let Tt=Pt(It,b);if(!Tt)continue;Array.isArray(Tt)||(Tt=[Tt]);const Jt=(Rt*bt).toString(16).padStart(7,"#00000");for(let qt=0,Nt=Tt.length;qt<Nt;++qt){const Qt=Tt[qt],fn=Qt.getGeometryFunction()(It);if(!fn||!intersects$1(d,fn.getExtent()))continue;const Mn=Qt.clone(),ln=Mn.getFill();ln&&ln.setColor(Jt);const Wt=Mn.getStroke();Wt&&(Wt.setColor(Jt),Wt.setLineDash(null)),Mn.setText(void 0);const so=Qt.getImage();if(so){const Hn=so.getImageSize();if(!Hn)continue;const cn=createCanvasContext2D(Hn[0],Hn[1],void 0,{alpha:!1}),fo=cn.canvas;cn.fillStyle=Jt,cn.fillRect(0,0,fo.width,fo.height),Mn.setImage(new Icon({img:fo,anchor:so.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:so.getOrigin(),opacity:1,size:so.getSize(),scale:so.getScale(),rotation:so.getRotation(),rotateWithView:so.getRotateWithView()}))}const pn=Mn.getZIndex()||0;let hn=wt[pn];hn||(hn={},wt[pn]=hn,hn.Polygon=[],hn.Circle=[],hn.LineString=[],hn.Point=[]);const Mt=fn.getType();if(Mt==="GeometryCollection"){const Hn=fn.getGeometriesArrayRecursive();for(let cn=0,fo=Hn.length;cn<fo;++cn){const Fn=Hn[cn];hn[Fn.getType().replace("Multi","")].push(Fn,Mn)}}else hn[Mt.replace("Multi","")].push(fn,Mn)}}const Ct=Object.keys(wt).map(Number).sort(ascending);for(let Rt=0,It=Ct.length;Rt<It;++Rt){const Pt=wt[Ct[Rt]];for(const Tt in Pt){const Gt=Pt[Tt];for(let Jt=0,qt=Gt.length;Jt<qt;Jt+=2){ft.setStyle(Gt[Jt+1]);for(let Nt=0,Qt=e.length;Nt<Qt;++Nt)ft.setTransform(e[Nt]),ft.drawGeometry(Gt[Jt])}}}return st.getImageData(0,0,ct.width,ct.height)}function hitDetect(o,e,s){const a=[];if(s){const d=Math.floor(Math.round(o[0])*HIT_DETECT_RESOLUTION),b=Math.floor(Math.round(o[1])*HIT_DETECT_RESOLUTION),_=(clamp(d,0,s.width-1)+clamp(b,0,s.height-1)*s.width)*4,_e=s.data[_],ot=s.data[_+1],ct=s.data[_+2]+256*(ot+256*_e),ft=Math.floor((256*256*256-1)/e.length);ct&&ct%ft===0&&a.push(e[ct/ft-1])}return a}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function defaultOrder(o,e){return parseInt(getUid(o),10)-parseInt(getUid(e),10)}function getSquaredTolerance(o,e){const s=getTolerance(o,e);return s*s}function getTolerance(o,e){return SIMPLIFY_TOLERANCE*o/e}function renderCircleGeometry(o,e,s,a,d){const b=s.getFill(),_=s.getStroke();if(b||_){const ot=o.getBuilder(s.getZIndex(),"Circle");ot.setFillStrokeStyle(b,_),ot.drawCircle(e,a)}const _e=s.getText();if(_e&&_e.getText()){const ot=(d||o).getBuilder(s.getZIndex(),"Text");ot.setTextStyle(_e),ot.drawText(e,a)}}function renderFeature$1(o,e,s,a,d,b,_){let _e=!1;const ot=s.getImage();if(ot){const st=ot.getImageState();st==ImageState.LOADED||st==ImageState.ERROR?ot.unlistenImageChange(d):(st==ImageState.IDLE&&ot.load(),ot.listenImageChange(d),_e=!0)}return renderFeatureInternal(o,e,s,a,b,_),_e}function renderFeatureInternal(o,e,s,a,d,b){const _=s.getGeometryFunction()(e);if(!_)return;const _e=_.simplifyTransformed(a,d);if(s.getRenderer())renderGeometry(o,_e,s,e);else{const st=GEOMETRY_RENDERERS[_e.getType()];st(o,_e,s,e,b)}}function renderGeometry(o,e,s,a){if(e.getType()=="GeometryCollection"){const b=e.getGeometries();for(let _=0,_e=b.length;_<_e;++_)renderGeometry(o,b[_],s,a);return}o.getBuilder(s.getZIndex(),"Default").drawCustom(e,a,s.getRenderer(),s.getHitDetectionRenderer())}function renderGeometryCollectionGeometry(o,e,s,a,d){const b=e.getGeometriesArray();let _,_e;for(_=0,_e=b.length;_<_e;++_){const ot=GEOMETRY_RENDERERS[b[_].getType()];ot(o,b[_],s,a,d)}}function renderLineStringGeometry(o,e,s,a,d){const b=s.getStroke();if(b){const _e=o.getBuilder(s.getZIndex(),"LineString");_e.setFillStrokeStyle(null,b),_e.drawLineString(e,a)}const _=s.getText();if(_&&_.getText()){const _e=(d||o).getBuilder(s.getZIndex(),"Text");_e.setTextStyle(_),_e.drawText(e,a)}}function renderMultiLineStringGeometry(o,e,s,a,d){const b=s.getStroke();if(b){const _e=o.getBuilder(s.getZIndex(),"LineString");_e.setFillStrokeStyle(null,b),_e.drawMultiLineString(e,a)}const _=s.getText();if(_&&_.getText()){const _e=(d||o).getBuilder(s.getZIndex(),"Text");_e.setTextStyle(_),_e.drawText(e,a)}}function renderMultiPolygonGeometry(o,e,s,a,d){const b=s.getFill(),_=s.getStroke();if(_||b){const ot=o.getBuilder(s.getZIndex(),"Polygon");ot.setFillStrokeStyle(b,_),ot.drawMultiPolygon(e,a)}const _e=s.getText();if(_e&&_e.getText()){const ot=(d||o).getBuilder(s.getZIndex(),"Text");ot.setTextStyle(_e),ot.drawText(e,a)}}function renderPointGeometry(o,e,s,a,d){const b=s.getImage(),_=s.getText();let _e;if(b){if(b.getImageState()!=ImageState.LOADED)return;let ot=o;if(d){const ct=b.getDeclutterMode();if(ct!=="none")if(ot=d,ct==="obstacle"){const ft=o.getBuilder(s.getZIndex(),"Image");ft.setImageStyle(b,_e),ft.drawPoint(e,a)}else _&&_.getText()&&(_e={})}const st=ot.getBuilder(s.getZIndex(),"Image");st.setImageStyle(b,_e),st.drawPoint(e,a)}if(_&&_.getText()){let ot=o;d&&(ot=d);const st=ot.getBuilder(s.getZIndex(),"Text");st.setTextStyle(_,_e),st.drawText(e,a)}}function renderMultiPointGeometry(o,e,s,a,d){const b=s.getImage(),_=s.getText();let _e;if(b){if(b.getImageState()!=ImageState.LOADED)return;let ot=o;if(d){const ct=b.getDeclutterMode();if(ct!=="none")if(ot=d,ct==="obstacle"){const ft=o.getBuilder(s.getZIndex(),"Image");ft.setImageStyle(b,_e),ft.drawMultiPoint(e,a)}else _&&_.getText()&&(_e={})}const st=ot.getBuilder(s.getZIndex(),"Image");st.setImageStyle(b,_e),st.drawMultiPoint(e,a)}if(_&&_.getText()){let ot=o;d&&(ot=d);const st=ot.getBuilder(s.getZIndex(),"Text");st.setTextStyle(_,_e),st.drawText(e,a)}}function renderPolygonGeometry(o,e,s,a,d){const b=s.getFill(),_=s.getStroke();if(b||_){const ot=o.getBuilder(s.getZIndex(),"Polygon");ot.setFillStrokeStyle(b,_),ot.drawPolygon(e,a)}const _e=s.getText();if(_e&&_e.getText()){const ot=(d||o).getBuilder(s.getZIndex(),"Text");ot.setTextStyle(_e),ot.drawText(e,a)}}const IMAGE_REPLAYS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},VECTOR_REPLAYS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=create()}prepareTile(e,s,a){let d;const b=e.getState();return(b===TileState.LOADED||b===TileState.ERROR)&&(this.updateExecutorGroup_(e,s,a),this.tileImageNeedsRender_(e)&&(d=!0)),d}getTile(e,s,a,d){const b=d.pixelRatio,_=d.viewState,_e=_.resolution,ot=_.projection,st=this.getLayer(),ct=st.getSource().getTile(e,s,a,b,ot),ft=d.viewHints,mt=!(ft[ViewHint.ANIMATING]||ft[ViewHint.INTERACTING]);return(mt||!ct.wantedResolution)&&(ct.wantedResolution=_e),this.prepareTile(ct,b,ot)&&(mt||Date.now()-d.time<8)&&st.getRenderMode()!=="vector"&&this.renderTileImage_(ct,d),super.getTile(e,s,a,d)}isDrawableTile(e){const s=this.getLayer();return super.isDrawableTile(e)&&(s.getRenderMode()==="vector"?getUid(s)in e.executorGroups:e.hasContext(s))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const s=this.getLayer().getRevision();return this.renderedLayerRevision_!==s&&(this.renderedLayerRevision_=s,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,s,a){const d=this.getLayer(),b=d.getRevision(),_=d.getRenderOrder()||null,_e=e.wantedResolution,ot=e.getReplayState(d);if(!ot.dirty&&ot.renderedResolution===_e&&ot.renderedRevision==b&&ot.renderedRenderOrder==_)return;const st=d.getSource(),ct=d.getDeclutter(),ft=st.getTileGrid(),bt=st.getTileGridForProjection(a).getTileCoordExtent(e.wrappedTileCoord),wt=st.getSourceTiles(s,a,e),Ct=getUid(d);delete e.hitDetectionImageData[Ct],e.executorGroups[Ct]=[],ct&&(e.declutterExecutorGroups[Ct]=[]),ot.dirty=!1;for(let Rt=0,It=wt.length;Rt<It;++Rt){const Pt=wt[Rt];if(Pt.getState()!=TileState.LOADED)continue;const Tt=Pt.tileCoord,Gt=ft.getTileCoordExtent(Tt),Jt=getIntersection(bt,Gt),qt=buffer(Jt,d.getRenderBuffer()*_e,this.tmpExtent),Nt=equals$1(Gt,Jt)?null:qt,Qt=new BuilderGroup(0,qt,_e,s),fn=ct?new BuilderGroup(0,Jt,_e,s):void 0,Mn=getSquaredTolerance(_e,s),ln=function(Mt){let Hn;const cn=Mt.getStyleFunction()||d.getStyleFunction();if(cn&&(Hn=cn(Mt,_e)),Hn){const fo=this.renderFeature(Mt,Mn,Hn,Qt,fn);ot.dirty=ot.dirty||fo}},Wt=Pt.getFeatures();_&&_!==ot.renderedRenderOrder&&Wt.sort(_);for(let Mt=0,Hn=Wt.length;Mt<Hn;++Mt){const cn=Wt[Mt];(!Nt||intersects$1(Nt,cn.getGeometry().getExtent()))&&ln.call(this,cn)}const so=Qt.finish(),pn=d.getRenderMode()!=="vector"&&ct&&wt.length===1?null:Jt,hn=new ExecutorGroup(pn,_e,s,st.getOverlaps(),so,d.getRenderBuffer());if(e.executorGroups[Ct].push(hn),fn){const Mt=new ExecutorGroup(null,_e,s,st.getOverlaps(),fn.finish(),d.getRenderBuffer());e.declutterExecutorGroups[Ct].push(Mt)}}ot.renderedRevision=b,ot.renderedRenderOrder=_,ot.renderedResolution=_e}forEachFeatureAtCoordinate(e,s,a,d,b){const _=s.viewState.resolution,_e=s.viewState.rotation;a=a??0;const ot=this.getLayer(),ct=ot.getSource().getTileGridForProjection(s.viewState.projection),ft=boundingExtent([e]);buffer(ft,_*a,ft);const mt={},bt=function(Rt,It,Pt){let Tt=Rt.getId();Tt===void 0&&(Tt=getUid(Rt));const Gt=mt[Tt];if(Gt){if(Gt!==!0&&Pt<Gt.distanceSq){if(Pt===0)return mt[Tt]=!0,b.splice(b.lastIndexOf(Gt),1),d(Rt,ot,It);Gt.geometry=It,Gt.distanceSq=Pt}}else{if(Pt===0)return mt[Tt]=!0,d(Rt,ot,It);b.push(mt[Tt]={feature:Rt,layer:ot,geometry:It,distanceSq:Pt,callback:d})}},wt=this.renderedTiles;let Ct;for(let Rt=0,It=wt.length;!Ct&&Rt<It;++Rt){const Pt=wt[Rt],Tt=ct.getTileCoordExtent(Pt.wrappedTileCoord);if(!intersects$1(Tt,ft))continue;const Gt=getUid(ot),Jt=[Pt.executorGroups[Gt]],qt=Pt.declutterExecutorGroups[Gt];qt&&Jt.push(qt),Jt.some(Nt=>{const Qt=Nt===qt?s.declutterTree.all().map(fn=>fn.value):null;for(let fn=0,Mn=Nt.length;fn<Mn;++fn)if(Ct=Nt[fn].forEachFeatureAtCoordinate(e,_,_e,a,bt,Qt),Ct)return!0})}return Ct}getFeatures(e){return new Promise((s,a)=>{const d=this.getLayer(),b=getUid(d),_=d.getSource(),_e=this.renderedProjection,ot=_e.getExtent(),st=this.renderedResolution,ct=_.getTileGridForProjection(_e),ft=apply$1(this.renderedPixelToCoordinateTransform_,e.slice()),mt=ct.getTileCoordForCoordAndResolution(ft,st);let bt;for(let Tt=0,Gt=this.renderedTiles.length;Tt<Gt;++Tt)if(mt.toString()===this.renderedTiles[Tt].tileCoord.toString()){if(bt=this.renderedTiles[Tt],bt.getState()===TileState.LOADED){const Jt=ct.getTileCoordExtent(bt.tileCoord);_.getWrapX()&&_e.canWrapX()&&!containsExtent(ot,Jt)&&wrapX$1(ft,_e);break}bt=void 0}if(!bt||bt.loadingSourceTiles>0){s([]);return}const wt=ct.getTileCoordExtent(bt.wrappedTileCoord),Ct=getTopLeft(wt),Rt=[(ft[0]-Ct[0])/st,(Ct[1]-ft[1])/st],It=bt.getSourceTiles().reduce(function(Tt,Gt){return Tt.concat(Gt.getFeatures())},[]);let Pt=bt.hitDetectionImageData[b];if(!Pt){const Tt=toSize(ct.getTileSize(ct.getZForResolution(st,_.zDirection))),Gt=this.renderedRotation_,Jt=[this.getRenderTransform(ct.getTileCoordCenter(bt.wrappedTileCoord),st,0,HIT_DETECT_RESOLUTION,Tt[0]*HIT_DETECT_RESOLUTION,Tt[1]*HIT_DETECT_RESOLUTION,0)];Pt=createHitDetectionImageData(Tt,Jt,It,d.getStyleFunction(),ct.getTileCoordExtent(bt.wrappedTileCoord),bt.getReplayState(d).renderedResolution,Gt),bt.hitDetectionImageData[b]=Pt}s(hitDetect(Rt,It,Pt))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e){const s=this.context,a=s.globalAlpha;s.globalAlpha=this.getLayer().getOpacity();const d=e.viewHints,b=!(d[ViewHint.ANIMATING]||d[ViewHint.INTERACTING]),_=this.renderedTiles;for(let _e=0,ot=_.length;_e<ot;++_e){const st=_[_e],ct=st.declutterExecutorGroups[getUid(this.getLayer())];if(ct)for(let ft=ct.length-1;ft>=0;--ft)ct[ft].execute(this.context,1,this.getTileRenderTransform(st,e),e.viewState.rotation,b,void 0,e.declutterTree)}s.globalAlpha=a}getTileRenderTransform(e,s){const a=s.pixelRatio,d=s.viewState,b=d.center,_=d.resolution,_e=d.rotation,ot=s.size,st=Math.round(ot[0]*a),ct=Math.round(ot[1]*a),mt=this.getLayer().getSource().getTileGridForProjection(s.viewState.projection),bt=e.tileCoord,wt=mt.getTileCoordExtent(e.wrappedTileCoord),Ct=mt.getTileCoordExtent(bt,this.tmpExtent)[0]-wt[0];return multiply(scale$2(this.inversePixelTransform.slice(),1/a,1/a),this.getRenderTransform(b,_,_e,a,st,ct,Ct))}postRender(e,s){const a=s.viewHints,d=!(a[ViewHint.ANIMATING]||a[ViewHint.INTERACTING]);this.renderedPixelToCoordinateTransform_=s.pixelToCoordinateTransform.slice(),this.renderedRotation_=s.viewState.rotation;const b=this.getLayer(),_=b.getRenderMode(),_e=e.globalAlpha;e.globalAlpha=b.getOpacity();const ot=VECTOR_REPLAYS[_],st=s.viewState,ct=st.rotation,ft=b.getSource(),bt=ft.getTileGridForProjection(st.projection).getZForResolution(st.resolution,ft.zDirection),wt=this.renderedTiles,Ct=[],Rt=[];let It=!0;for(let Pt=wt.length-1;Pt>=0;--Pt){const Tt=wt[Pt];It=It&&!Tt.getReplayState(b).dirty;const Gt=Tt.executorGroups[getUid(b)].filter(fn=>fn.hasExecutors(ot));if(Gt.length===0)continue;const Jt=this.getTileRenderTransform(Tt,s),qt=Tt.tileCoord[0];let Nt=!1;const Qt=Gt[0].getClipCoords(Jt);if(Qt){for(let fn=0,Mn=Ct.length;fn<Mn;++fn)if(bt!==qt&&qt<Rt[fn]){const ln=Ct[fn];intersects$1([Qt[0],Qt[3],Qt[4],Qt[7]],[ln[0],ln[3],ln[4],ln[7]])&&(Nt||(e.save(),Nt=!0),e.beginPath(),e.moveTo(Qt[0],Qt[1]),e.lineTo(Qt[2],Qt[3]),e.lineTo(Qt[4],Qt[5]),e.lineTo(Qt[6],Qt[7]),e.moveTo(ln[6],ln[7]),e.lineTo(ln[4],ln[5]),e.lineTo(ln[2],ln[3]),e.lineTo(ln[0],ln[1]),e.clip())}Ct.push(Qt),Rt.push(qt)}for(let fn=0,Mn=Gt.length;fn<Mn;++fn)Gt[fn].execute(e,1,Jt,ct,d,ot);Nt&&e.restore()}e.globalAlpha=_e,this.ready=It,super.postRender(e,s)}renderFeature(e,s,a,d,b){if(!a)return!1;let _=!1;if(Array.isArray(a))for(let _e=0,ot=a.length;_e<ot;++_e)_=renderFeature$1(d,e,a[_e],s,this.boundHandleStyleImageChange_,void 0,b)||_;else _=renderFeature$1(d,e,a,s,this.boundHandleStyleImageChange_,void 0,b);return _}tileImageNeedsRender_(e){const s=this.getLayer();if(s.getRenderMode()==="vector")return!1;const a=e.getReplayState(s),d=s.getRevision(),b=e.wantedResolution;return a.renderedTileResolution!==b||a.renderedTileRevision!==d}renderTileImage_(e,s){const a=this.getLayer(),d=e.getReplayState(a),b=a.getRevision(),_=e.executorGroups[getUid(a)];d.renderedTileRevision=b;const _e=e.wrappedTileCoord,ot=_e[0],st=a.getSource();let ct=s.pixelRatio;const mt=s.viewState.projection,bt=st.getTileGridForProjection(mt),wt=bt.getResolution(e.tileCoord[0]),Ct=s.pixelRatio/e.wantedResolution*wt,Rt=bt.getResolution(ot),It=e.getContext(a);ct=Math.round(Math.max(ct,Ct/ct));const Pt=st.getTilePixelSize(ot,ct,mt);It.canvas.width=Pt[0],It.canvas.height=Pt[1];const Tt=ct/Ct;if(Tt!==1){const Nt=reset$1(this.tmpTransform_);scale$2(Nt,Tt,Tt),It.setTransform.apply(It,Nt)}const Gt=bt.getTileCoordExtent(_e,this.tmpExtent),Jt=Ct/Rt,qt=reset$1(this.tmpTransform_);scale$2(qt,Jt,-Jt),translate$1(qt,-Gt[0],-Gt[3]);for(let Nt=0,Qt=_.length;Nt<Qt;++Nt)_[Nt].execute(It,Tt,qt,0,!0,IMAGE_REPLAYS[a.getRenderMode()]);d.renderedTileResolution=e.wantedResolution}}class VectorTileLayer extends BaseVectorLayer{constructor(e){e=e||{};const s=Object.assign({},e);delete s.preload,delete s.useInterimTilesOnError,super(s),this.on,this.once,this.un;const a=e.renderMode||"hybrid";assert(a=="hybrid"||a=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=a,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new CanvasVectorTileLayerRenderer(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(TileProperty.PRELOAD)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(TileProperty.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}}let VectorTile$1=class extends Tile{constructor(e,s,a,d,b,_){super(e,s,_),this.extent=null,this.format_=d,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=b,this.url_=a,this.key=a}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==TileState.IDLE&&(this.setState(TileState.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,s){this.setFeatures(e)}onError(){this.setState(TileState.ERROR)}setFeatures(e){this.features_=e,this.setState(TileState.LOADED)}setLoader(e){this.loader_=e}};const canvasPool=[];class VectorRenderTile extends Tile{constructor(e,s,a,d){super(e,s,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=d.bind(void 0,this),this.wrappedTileCoord=a}getContext(e){const s=getUid(e);return s in this.context_||(this.context_[s]=createCanvasContext2D(1,1,canvasPool)),this.context_[s]}hasContext(e){return getUid(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const s=getUid(e);return s in this.replayState_||(this.replayState_[s]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[s]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const s=this.context_[e];releaseCanvas(s),canvasPool.push(s.canvas),delete this.context_[e]}super.release()}}let withCredentials=!1;function loadFeaturesXhr(o,e,s,a,d,b,_){const _e=new XMLHttpRequest;_e.open("GET",typeof o=="function"?o(s,a,d):o,!0),e.getType()=="arraybuffer"&&(_e.responseType="arraybuffer"),_e.withCredentials=withCredentials,_e.onload=function(ot){if(!_e.status||_e.status>=200&&_e.status<300){const st=e.getType();let ct;st=="json"?ct=JSON.parse(_e.responseText):st=="text"?ct=_e.responseText:st=="xml"?(ct=_e.responseXML,ct||(ct=new DOMParser().parseFromString(_e.responseText,"application/xml"))):st=="arraybuffer"&&(ct=_e.response),ct?b(e.readFeatures(ct,{extent:s,featureProjection:d}),e.readProjection(ct)):_()}else _()},_e.onerror=_,_e.send()}function xhr(o,e){return function(s,a,d,b,_){const _e=this;loadFeaturesXhr(o,e,s,a,d,function(ot,st){_e.addFeatures(ot),b!==void 0&&b(ot)},_||VOID)}}class VectorTile extends UrlTile{constructor(e){const s=e.projection||"EPSG:3857",a=e.extent||extentFromProjection(s),d=e.tileGrid||createXYZ({extent:a,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:s,state:e.state,tileGrid:d,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultLoadFunction,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new TileCache(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:VectorTile$1,this.tileGrids_={}}getFeaturesInExtent(e){const s=[],a=this.tileCache;if(a.getCount()===0)return s;const d=fromKey(a.peekFirstKey())[0],b=this.tileGrid;return a.forEach(function(_){if(_.tileCoord[0]!==d||_.getState()!==TileState.LOADED)return;const _e=_.getSourceTiles();for(let ot=0,st=_e.length;ot<st;++ot){const ct=_e[ot],ft=ct.tileCoord;if(intersects$1(e,b.getTileCoordExtent(ft))){const mt=ct.getFeatures();if(mt)for(let bt=0,wt=mt.length;bt<wt;++bt){const Ct=mt[bt],Rt=Ct.getGeometry();intersects$1(e,Rt.getExtent())&&s.push(Ct)}}}}),s}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,s){const a=this.getTileCacheForProjection(e),d=Object.keys(s).reduce((b,_)=>{const _e=getCacheKeyForTileKey(_),ot=a.peek(_e);if(ot){const st=ot.sourceTiles;for(let ct=0,ft=st.length;ct<ft;++ct)b[st[ct].getKey()]=!0}return b},{});super.expireCache(e,s),this.sourceTileCache.expireCache(d)}getSourceTiles(e,s,a){if(a.getState()===TileState.IDLE){a.setState(TileState.LOADING);const d=a.wrappedTileCoord,b=this.getTileGridForProjection(s),_=b.getTileCoordExtent(d),_e=d[0],ot=b.getResolution(_e);buffer(_,-ot,_);const st=this.tileGrid,ct=st.getExtent();ct&&getIntersection(_,ct,_);const ft=st.getZForResolution(ot,this.zDirection);st.forEachTileCoord(_,ft,mt=>{const bt=this.tileUrlFunction(mt,e,s),wt=this.sourceTileCache.containsKey(bt)?this.sourceTileCache.get(bt):new this.tileClass(mt,bt?TileState.IDLE:TileState.EMPTY,bt,this.format_,this.tileLoadFunction);a.sourceTiles.push(wt);const Ct=wt.getState();if(Ct<TileState.LOADED){const Rt=It=>{this.handleTileChange(It);const Pt=wt.getState();if(Pt===TileState.LOADED||Pt===TileState.ERROR){const Tt=wt.getKey();Tt in a.errorTileKeys?wt.getState()===TileState.LOADED&&delete a.errorTileKeys[Tt]:a.loadingSourceTiles--,Pt===TileState.ERROR?a.errorTileKeys[Tt]=!0:wt.removeEventListener(EventType.CHANGE,Rt),a.loadingSourceTiles===0&&a.setState(isEmpty$1(a.errorTileKeys)?TileState.LOADED:TileState.ERROR)}};wt.addEventListener(EventType.CHANGE,Rt),a.loadingSourceTiles++}Ct===TileState.IDLE&&(wt.extent=st.getTileCoordExtent(mt),wt.projection=s,wt.resolution=st.getResolution(mt[0]),this.sourceTileCache.set(bt,wt),wt.load())}),a.loadingSourceTiles||a.setState(a.sourceTiles.some(mt=>mt.getState()===TileState.ERROR)?TileState.ERROR:TileState.LOADED)}return a.sourceTiles}getTile(e,s,a,d,b){const _=getKeyZXY(e,s,a),_e=this.getKey();let ot;if(this.tileCache.containsKey(_)&&(ot=this.tileCache.get(_),ot.key===_e))return ot;const st=[e,s,a];let ct=this.getTileCoordForTileUrlFunction(st,b);const ft=this.getTileGrid().getExtent(),mt=this.getTileGridForProjection(b);if(ct&&ft){const Ct=mt.getTileCoordExtent(ct);buffer(Ct,-mt.getResolution(e),Ct),intersects$1(ft,Ct)||(ct=null)}let bt=!0;if(ct!==null){const Ct=this.tileGrid,Rt=mt.getResolution(e),It=Ct.getZForResolution(Rt,1),Pt=mt.getTileCoordExtent(ct);buffer(Pt,-Rt,Pt),Ct.forEachTileCoord(Pt,It,Tt=>{bt=bt&&!this.tileUrlFunction(Tt,d,b)})}const wt=new VectorRenderTile(st,bt?TileState.EMPTY:TileState.IDLE,ct,this.getSourceTiles.bind(this,d,b));return wt.key=_e,ot?(wt.interimTile=ot,wt.refreshInterimChain(),this.tileCache.replace(_,wt)):this.tileCache.set(_,wt),wt}getTileGridForProjection(e){const s=e.getCode();let a=this.tileGrids_[s];if(!a){const d=this.tileGrid,b=d.getResolutions().slice(),_=b.map(function(st,ct){return d.getOrigin(ct)}),_e=b.map(function(st,ct){return d.getTileSize(ct)}),ot=DEFAULT_MAX_ZOOM+1;for(let st=b.length;st<ot;++st)b.push(b[st-1]/2),_.push(_[st-1]),_e.push(_e[st-1]);a=new TileGrid({extent:d.getExtent(),origins:_,resolutions:b,tileSizes:_e}),this.tileGrids_[s]=a}return a}getTilePixelRatio(e){return e}getTilePixelSize(e,s,a){const d=this.getTileGridForProjection(a),b=toSize(d.getTileSize(e),this.tmpSize);return[Math.round(b[0]*s),Math.round(b[1]*s)]}updateCacheSize(e,s){super.updateCacheSize(e*2,s),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(s).highWaterMark}}function defaultLoadFunction(o,e){o.setLoader(function(s,a,d){loadFeaturesXhr(e,o.getFormat(),s,a,d,o.onLoad.bind(o),o.onError.bind(o))})}function jsonp(o,e,s,a){const d=document.createElement("script"),b="olc_"+getUid(e);function _(){delete window[b],d.parentNode.removeChild(d)}d.async=!0,d.src=o+(o.includes("?")?"&":"?")+"callback="+b;const _e=setTimeout(function(){_(),s&&s()},1e4);window[b]=function(ot){clearTimeout(_e),_(),e(ot)},document.head.appendChild(d)}class TileJSON extends TileImage{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:get$3("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const s=new XMLHttpRequest;s.addEventListener("load",this.onXHRLoad_.bind(this)),s.addEventListener("error",this.onXHRError_.bind(this)),s.open("GET",e.url),s.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const s=e.target;if(!s.status||s.status>=200&&s.status<300){let a;try{a=JSON.parse(s.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(a)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const s=get$3("EPSG:4326"),a=this.getProjection();let d;if(e.bounds!==void 0){const st=getTransformFromProjections(s,a);d=applyTransform(e.bounds,st)}const b=extentFromProjection(a),_=e.minzoom||0,_e=e.maxzoom||22,ot=createXYZ({extent:b,maxZoom:_e,minZoom:_,tileSize:this.tileSize_});if(this.tileGrid=ot,this.tileUrlFunction=createFromTemplates(e.tiles,ot),e.attribution&&!this.getAttributions()){const st=d!==void 0?d:b;this.setAttributions(function(ct){return intersects$1(st,ct.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class Feature extends BaseObject{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const s=e;this.setGeometry(s)}else{const s=e;this.setProperties(s)}}clone(){const e=new Feature(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const s=this.getGeometry();s&&e.setGeometry(s.clone());const a=this.getStyle();return a&&e.setStyle(a),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(o){if(typeof o=="function")return o;let e;return Array.isArray(o)?e=o:(assert(typeof o.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[o]),function(){return e}}class Circle extends SimpleGeometry{constructor(e,s,a){super(),a!==void 0&&s===void 0?this.setFlatCoordinates(a,e):(s=s||0,this.setCenterAndRadius(e,s,a))}clone(){const e=new Circle(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,s,a,d){const b=this.flatCoordinates,_=e-b[0],_e=s-b[1],ot=_*_+_e*_e;if(ot<d){if(ot===0)for(let st=0;st<this.stride;++st)a[st]=b[st];else{const st=this.getRadius()/Math.sqrt(ot);a[0]=b[0]+st*_,a[1]=b[1]+st*_e;for(let ct=2;ct<this.stride;++ct)a[ct]=b[ct]}return a.length=this.stride,ot}return d}containsXY(e,s){const a=this.flatCoordinates,d=e-a[0],b=s-a[1];return d*d+b*b<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const s=this.flatCoordinates,a=s[this.stride]-s[0];return createOrUpdate$2(s[0]-a,s[1]-a,s[0]+a,s[1]+a,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],s=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+s*s}getType(){return"Circle"}intersectsExtent(e){const s=this.getExtent();if(intersects$1(e,s)){const a=this.getCenter();return e[0]<=a[0]&&e[2]>=a[0]||e[1]<=a[1]&&e[3]>=a[1]?!0:forEachCorner(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const s=this.stride,a=this.flatCoordinates[s]-this.flatCoordinates[0],d=e.slice();d[s]=d[0]+a;for(let b=1;b<s;++b)d[s+b]=e[b];this.setFlatCoordinates(this.layout,d),this.changed()}setCenterAndRadius(e,s,a){this.setLayout(a,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const d=this.flatCoordinates;let b=deflateCoordinate(d,0,e,this.stride);d[b++]=d[0]+s;for(let _=1,_e=this.stride;_<_e;++_)d[b++]=d[_];d.length=b,this.changed()}getCoordinates(){return null}setCoordinates(e,s){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,s){const a=this.getCenter(),d=this.getStride();this.setCenter(rotate(a,0,a.length,d,e,s,a)),this.changed()}}Circle.prototype.transform;class GeometryCollection extends Geometry{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,s=this.geometries_.length;e<s;++e)this.changeEventsKeys_.push(listen(this.geometries_[e],EventType.CHANGE,this.changed,this))}clone(){const e=new GeometryCollection(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,s,a,d){if(d<closestSquaredDistanceXY(this.getExtent(),e,s))return d;const b=this.geometries_;for(let _=0,_e=b.length;_<_e;++_)d=b[_].closestPointXY(e,s,a,d);return d}containsXY(e,s){const a=this.geometries_;for(let d=0,b=a.length;d<b;++d)if(a[d].containsXY(e,s))return!0;return!1}computeExtent(e){createOrUpdateEmpty(e);const s=this.geometries_;for(let a=0,d=s.length;a<d;++a)extend$3(e,s[a].getExtent());return e}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const s=this.geometries_;for(let a=0,d=s.length;a<d;++a)s[a].getType()===this.getType()?e=e.concat(s[a].getGeometriesArrayRecursive()):e.push(s[a]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const s=[],a=this.geometries_;let d=!1;for(let b=0,_=a.length;b<_;++b){const _e=a[b],ot=_e.getSimplifiedGeometry(e);s.push(ot),ot!==_e&&(d=!0)}if(d){const b=new GeometryCollection(null);return b.setGeometriesArray(s),b}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const s=this.geometries_;for(let a=0,d=s.length;a<d;++a)if(s[a].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,s){const a=this.geometries_;for(let d=0,b=a.length;d<b;++d)a[d].rotate(e,s);this.changed()}scale(e,s,a){a||(a=getCenter(this.getExtent()));const d=this.geometries_;for(let b=0,_=d.length;b<_;++b)d[b].scale(e,s,a);this.changed()}setGeometries(e){this.setGeometriesArray(cloneGeometries(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const s=this.geometries_;for(let a=0,d=s.length;a<d;++a)s[a].applyTransform(e);this.changed()}translate(e,s){const a=this.geometries_;for(let d=0,b=a.length;d<b;++d)a[d].translate(e,s);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(o){const e=[];for(let s=0,a=o.length;s<a;++s)e.push(o[s].clone());return e}function interpolatePoint(o,e,s,a,d,b,_){let _e,ot;const st=(s-e)/a;if(st===1)_e=e;else if(st===2)_e=e,ot=d;else if(st!==0){let ct=o[e],ft=o[e+1],mt=0;const bt=[0];for(let Rt=e+a;Rt<s;Rt+=a){const It=o[Rt],Pt=o[Rt+1];mt+=Math.sqrt((It-ct)*(It-ct)+(Pt-ft)*(Pt-ft)),bt.push(mt),ct=It,ft=Pt}const wt=d*mt,Ct=binarySearch$1(bt,wt);Ct<0?(ot=(wt-bt[-Ct-2])/(bt[-Ct-1]-bt[-Ct-2]),_e=e+(-Ct-2)*a):_e=e+Ct*a}_=_>1?_:2,b=b||new Array(_);for(let ct=0;ct<_;++ct)b[ct]=_e===void 0?NaN:ot===void 0?o[_e+ct]:lerp(o[_e+ct],o[_e+a+ct],ot);return b}function lineStringCoordinateAtM(o,e,s,a,d,b){if(s==e)return null;let _;if(d<o[e+a-1])return b?(_=o.slice(e,e+a),_[a-1]=d,_):null;if(o[s-1]<d)return b?(_=o.slice(s-a,s),_[a-1]=d,_):null;if(d==o[e+a-1])return o.slice(e,e+a);let _e=e/a,ot=s/a;for(;_e<ot;){const mt=_e+ot>>1;d<o[(mt+1)*a-1]?ot=mt:_e=mt+1}const st=o[_e*a-1];if(d==st)return o.slice((_e-1)*a,(_e-1)*a+a);const ct=o[(_e+1)*a-1],ft=(d-st)/(ct-st);_=[];for(let mt=0;mt<a-1;++mt)_.push(lerp(o[(_e-1)*a+mt],o[_e*a+mt],ft));return _.push(d),_}function lineStringsCoordinateAtM(o,e,s,a,d,b,_){if(_)return lineStringCoordinateAtM(o,e,s[s.length-1],a,d,b);let _e;if(d<o[a-1])return b?(_e=o.slice(0,a),_e[a-1]=d,_e):null;if(o[o.length-1]<d)return b?(_e=o.slice(o.length-a),_e[a-1]=d,_e):null;for(let ot=0,st=s.length;ot<st;++ot){const ct=s[ot];if(e!=ct){if(d<o[e+a-1])return null;if(d<=o[ct-1])return lineStringCoordinateAtM(o,e,ct,a,d,!1);e=ct}}return null}class LineString extends SimpleGeometry{constructor(e,s){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,s!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(s,e):this.setCoordinates(e,s)}appendCoordinate(e){extend$4(this.flatCoordinates,e),this.changed()}clone(){const e=new LineString(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,s,a,d){return d<closestSquaredDistanceXY(this.getExtent(),e,s)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,s,a,d))}forEachSegment(e){return forEach$1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,s){return this.layout!="XYM"&&this.layout!="XYZM"?null:(s=s!==void 0?s:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,s))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,s){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,s,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const s=[];return s.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,s,0),new LineString(s,"XY")}getType(){return"LineString"}intersectsExtent(e){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,s){this.setLayout(s,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class MultiLineString extends SimpleGeometry{constructor(e,s,a){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,s);else if(s!==void 0&&a)this.setFlatCoordinates(s,e),this.ends_=a;else{const d=e,b=[],_=[];for(let ot=0,st=d.length;ot<st;++ot){const ct=d[ot];extend$4(b,ct.getFlatCoordinates()),_.push(b.length)}const _e=d.length===0?this.getLayout():d[0].getLayout();this.setFlatCoordinates(_e,b),this.ends_=_}}appendLineString(e){extend$4(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,s,a,d){return d<closestSquaredDistanceXY(this.getExtent(),e,s)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,s,a,d))}getCoordinateAtM(e,s,a){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(s=s!==void 0?s:!1,a=a!==void 0?a:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,s,a))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new LineString(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,s=this.ends_,a=this.layout,d=[];let b=0;for(let _=0,_e=s.length;_<_e;++_){const ot=s[_],st=new LineString(e.slice(b,ot),a);d.push(st),b=ot}return d}getFlatMidpoints(){const e=[],s=this.flatCoordinates;let a=0;const d=this.ends_,b=this.stride;for(let _=0,_e=d.length;_<_e;++_){const ot=d[_],st=interpolatePoint(s,a,ot,b,.5);extend$4(e,st),a=ot}return e}getSimplifiedGeometryInternal(e){const s=[],a=[];return s.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,s,0,a),new MultiLineString(s,"XY",a)}getType(){return"MultiLineString"}intersectsExtent(e){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,s){this.setLayout(s,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const a=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=a.length===0?0:a[a.length-1],this.changed()}}class MultiPoint extends SimpleGeometry{constructor(e,s){super(),s&&!Array.isArray(e[0])?this.setFlatCoordinates(s,e):this.setCoordinates(e,s)}appendPoint(e){extend$4(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new MultiPoint(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,s,a,d){if(d<closestSquaredDistanceXY(this.getExtent(),e,s))return d;const b=this.flatCoordinates,_=this.stride;for(let _e=0,ot=b.length;_e<ot;_e+=_){const st=squaredDistance$1(e,s,b[_e],b[_e+1]);if(st<d){d=st;for(let ct=0;ct<_;++ct)a[ct]=b[_e+ct];a.length=_}}return d}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const s=this.flatCoordinates.length/this.stride;return e<0||s<=e?null:new Point$1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,s=this.layout,a=this.stride,d=[];for(let b=0,_=e.length;b<_;b+=a){const _e=new Point$1(e.slice(b,b+a),s);d.push(_e)}return d}getType(){return"MultiPoint"}intersectsExtent(e){const s=this.flatCoordinates,a=this.stride;for(let d=0,b=s.length;d<b;d+=a){const _=s[d],_e=s[d+1];if(containsXY(e,_,_e))return!0}return!1}setCoordinates(e,s){this.setLayout(s,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function linearRingss(o,e,s,a){const d=[];let b=createEmpty();for(let _=0,_e=s.length;_<_e;++_){const ot=s[_];b=createOrUpdateFromFlatCoordinates(o,e,ot[0],a),d.push((b[0]+b[2])/2,(b[1]+b[3])/2),e=ot[ot.length-1]}return d}class MultiPolygon extends SimpleGeometry{constructor(e,s,a){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!a&&!Array.isArray(e[0])){const d=e,b=[],_=[];for(let _e=0,ot=d.length;_e<ot;++_e){const st=d[_e],ct=b.length,ft=st.getEnds();for(let mt=0,bt=ft.length;mt<bt;++mt)ft[mt]+=ct;extend$4(b,st.getFlatCoordinates()),_.push(ft)}s=d.length===0?this.getLayout():d[0].getLayout(),e=b,a=_}s!==void 0&&a?(this.setFlatCoordinates(s,e),this.endss_=a):this.setCoordinates(e,s)}appendPolygon(e){let s;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),s=e.getEnds().slice(),this.endss_.push();else{const a=this.flatCoordinates.length;extend$4(this.flatCoordinates,e.getFlatCoordinates()),s=e.getEnds().slice();for(let d=0,b=s.length;d<b;++d)s[d]+=a}this.endss_.push(s),this.changed()}clone(){const e=this.endss_.length,s=new Array(e);for(let d=0;d<e;++d)s[d]=this.endss_[d].slice();const a=new MultiPolygon(this.flatCoordinates.slice(),this.layout,s);return a.applyProperties(this),a}closestPointXY(e,s,a,d){return d<closestSquaredDistanceXY(this.getExtent(),e,s)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,s,a,d))}containsXY(e,s){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,s)}getArea(){return linearRingss$1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let s;return e!==void 0?(s=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(s,0,this.endss_,this.stride,e)):s=this.flatCoordinates,inflateMultiCoordinatesArray(s,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const s=[],a=[];return s.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),s,0,a),new MultiPolygon(s,"XY",a)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let s;if(e===0)s=0;else{const b=this.endss_[e-1];s=b[b.length-1]}const a=this.endss_[e].slice(),d=a[a.length-1];if(s!==0)for(let b=0,_=a.length;b<_;++b)a[b]-=s;return new Polygon(this.flatCoordinates.slice(s,d),this.layout,a)}getPolygons(){const e=this.layout,s=this.flatCoordinates,a=this.endss_,d=[];let b=0;for(let _=0,_e=a.length;_<_e;++_){const ot=a[_].slice(),st=ot[ot.length-1];if(b!==0)for(let ft=0,mt=ot.length;ft<mt;++ft)ot[ft]-=b;const ct=new Polygon(s.slice(b,st),e,ot);d.push(ct),b=st}return d}getType(){return"MultiPolygon"}intersectsExtent(e){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,s){this.setLayout(s,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const a=deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(a.length===0)this.flatCoordinates.length=0;else{const d=a[a.length-1];this.flatCoordinates.length=d.length===0?0:d[d.length-1]}this.changed()}}const tmpTransform=create();class RenderFeature{constructor(e,s,a,d,b,_){this.styleFunction,this.extent_,this.id_=_,this.type_=e,this.flatCoordinates_=s,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=a,this.properties_=b,this.squaredTolerance_,this.stride_=d,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=inflateEnds(this.flatCoordinates_,this.ends_),s=linearRingss(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,e,2,s)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let s=0;const a=this.ends_;for(let d=0,b=a.length;d<b;++d){const _=a[d],_e=interpolatePoint(e,s,_,2,.5);extend$4(this.flatMidpoints_,_e),s=_}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,s){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=get$3(e);const s=e.getExtent(),a=e.getWorldExtent();if(s&&a){const d=getHeight(a)/getHeight(s);compose(tmpTransform,a[0],a[3],d,-d,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new RenderFeature(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=memoizeOne((e,s)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),s&&this.simplifiedGeometry_.applyTransform(s);const a=this.simplifiedGeometry_.getFlatCoordinates();let d;switch(this.type_){case"LineString":a.length=douglasPeucker(a,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,a,0),d=[a.length];break;case"MultiLineString":d=[],a.length=douglasPeuckerArray(a,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,a,0,d);break;case"Polygon":d=[],a.length=quantizeArray(a,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),a,0,d);break}return d&&(this.simplifiedGeometry_=new RenderFeature(this.type_,a,d,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;class FeatureFormat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Feature,this.supportedMediaTypes=null}getReadOptions(e,s){if(s){let a=s.dataProjection?get$3(s.dataProjection):this.readProjection(e);s.extent&&a&&a.getUnits()==="tile-pixels"&&(a=get$3(a),a.setWorldExtent(s.extent)),s={dataProjection:a,featureProjection:s.featureProjection}}return this.adaptOptions(s)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return abstract()}readFeature(e,s){return abstract()}readFeatures(e,s){return abstract()}readGeometry(e,s){return abstract()}readProjection(e){return abstract()}writeFeature(e,s){return abstract()}writeFeatures(e,s){return abstract()}writeGeometry(e,s){return abstract()}}function transformGeometryWithOptions(o,e,s){const a=s?get$3(s.featureProjection):null,d=s?get$3(s.dataProjection):null;let b=o;if(a&&d&&!equivalent(a,d)){e&&(b=o.clone());const _=e?a:d,_e=e?d:a;_.getUnits()==="tile-pixels"?b.transform(_,_e):b.applyTransform(getTransform(_,_e))}if(e&&s&&s.decimals!==void 0){const _=Math.pow(10,s.decimals),_e=function(ot){for(let st=0,ct=ot.length;st<ct;++st)ot[st]=Math.round(ot[st]*_)/_;return ot};b===o&&(b=o.clone()),b.applyTransform(_e)}return b}const GeometryConstructor={Point:Point$1,LineString,Polygon,MultiPoint,MultiLineString,MultiPolygon};function orientFlatCoordinates(o,e,s){return Array.isArray(e[0])?(linearRingssAreOriented(o,0,e,s)||(o=o.slice(),orientLinearRingsArray(o,0,e,s)),o):(linearRingsAreOriented(o,0,e,s)||(o=o.slice(),orientLinearRings(o,0,e,s)),o)}function createRenderFeature(o,e){var b;const s=o.geometry;if(!s)return[];if(Array.isArray(s))return s.map(_=>createRenderFeature({...o,geometry:_})).flat();const a=s.type==="MultiPolygon"?"Polygon":s.type;if(a==="GeometryCollection"||a==="Circle")throw new Error("Unsupported geometry type: "+a);const d=s.layout.length;return transformGeometryWithOptions(new RenderFeature(a,a==="Polygon"?orientFlatCoordinates(s.flatCoordinates,s.ends,d):s.flatCoordinates,(b=s.ends)==null?void 0:b.flat(),d,o.properties||{},o.id).enableSimplifyTransformed(),!1,e)}function createGeometry(o,e){if(!o)return null;if(Array.isArray(o)){const a=o.map(d=>createGeometry(d,e));return new GeometryCollection(a)}const s=GeometryConstructor[o.type];return transformGeometryWithOptions(new s(o.flatCoordinates,o.layout,o.ends),!1,e)}var ieee754$1={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754$1.read=function(o,e,s,a,d){var b,_,_e=d*8-a-1,ot=(1<<_e)-1,st=ot>>1,ct=-7,ft=s?d-1:0,mt=s?-1:1,bt=o[e+ft];for(ft+=mt,b=bt&(1<<-ct)-1,bt>>=-ct,ct+=_e;ct>0;b=b*256+o[e+ft],ft+=mt,ct-=8);for(_=b&(1<<-ct)-1,b>>=-ct,ct+=a;ct>0;_=_*256+o[e+ft],ft+=mt,ct-=8);if(b===0)b=1-st;else{if(b===ot)return _?NaN:(bt?-1:1)*(1/0);_=_+Math.pow(2,a),b=b-st}return(bt?-1:1)*_*Math.pow(2,b-a)};ieee754$1.write=function(o,e,s,a,d,b){var _,_e,ot,st=b*8-d-1,ct=(1<<st)-1,ft=ct>>1,mt=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,bt=a?0:b-1,wt=a?1:-1,Ct=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(_e=isNaN(e)?1:0,_=ct):(_=Math.floor(Math.log(e)/Math.LN2),e*(ot=Math.pow(2,-_))<1&&(_--,ot*=2),_+ft>=1?e+=mt/ot:e+=mt*Math.pow(2,1-ft),e*ot>=2&&(_++,ot/=2),_+ft>=ct?(_e=0,_=ct):_+ft>=1?(_e=(e*ot-1)*Math.pow(2,d),_=_+ft):(_e=e*Math.pow(2,ft-1)*Math.pow(2,d),_=0));d>=8;o[s+bt]=_e&255,bt+=wt,_e/=256,d-=8);for(_=_<<d|_e,st+=d;st>0;o[s+bt]=_&255,bt+=wt,_/=256,st-=8);o[s+bt-wt]|=Ct*128};var pbf=Pbf,ieee754=ieee754$1;function Pbf(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0;Pbf.Fixed64=1;Pbf.Bytes=2;Pbf.Fixed32=5;var SHIFT_LEFT_32=65536*65536,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,TEXT_DECODER_MIN_LENGTH=12,utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Pbf.prototype={destroy:function(){this.buf=null},readFields:function(o,e,s){for(s=s||this.length;this.pos<s;){var a=this.readVarint(),d=a>>3,b=this.pos;this.type=a&7,o(d,e,this),this.pos===b&&this.skip(a)}return e},readMessage:function(o,e){return this.readFields(o,e,this.readVarint()+this.pos)},readFixed32:function(){var o=readUInt32(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=readInt32(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,o},readSFixed64:function(){var o=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,o},readFloat:function(){var o=ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var e=this.buf,s,a;return a=e[this.pos++],s=a&127,a<128||(a=e[this.pos++],s|=(a&127)<<7,a<128)||(a=e[this.pos++],s|=(a&127)<<14,a<128)||(a=e[this.pos++],s|=(a&127)<<21,a<128)?s:(a=e[this.pos],s|=(a&15)<<28,readVarintRemainder(s,o,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2===1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,e=this.pos;return this.pos=o,o-e>=TEXT_DECODER_MIN_LENGTH&&utf8TextDecoder?readUtf8TextDecoder(this.buf,e,o):readUtf8(this.buf,e,o)},readBytes:function(){var o=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,o);return this.pos=o,e},readPackedVarint:function(o,e){if(this.type!==Pbf.Bytes)return o.push(this.readVarint(e));var s=readPackedEnd(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(e));return o},readPackedSVarint:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readSVarint());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readBoolean());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readFloat());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readDouble());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readFixed32());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readSFixed32());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readFixed64());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Pbf.Bytes)return o.push(this.readSFixed64());var e=readPackedEnd(this);for(o=o||[];this.pos<e;)o.push(this.readSFixed64());return o},skip:function(o){var e=o&7;if(e===Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(e===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Pbf.Fixed32)this.pos+=4;else if(e===Pbf.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(o,e){this.writeVarint(o<<3|e)},realloc:function(o){for(var e=this.length||16;e<this.pos+o;)e*=2;if(e!==this.length){var s=new Uint8Array(e);s.set(this.buf),this.buf=s,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),writeInt32(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),writeInt32(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),writeInt32(this.buf,o&-1,this.pos),writeInt32(this.buf,Math.floor(o*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),writeInt32(this.buf,o&-1,this.pos),writeInt32(this.buf,Math.floor(o*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(o){if(o=+o||0,o>268435455||o<0){writeBigVarint(o,this);return}this.realloc(4),this.buf[this.pos++]=o&127|(o>127?128:0),!(o<=127)&&(this.buf[this.pos++]=(o>>>=7)&127|(o>127?128:0),!(o<=127)&&(this.buf[this.pos++]=(o>>>=7)&127|(o>127?128:0),!(o<=127)&&(this.buf[this.pos++]=o>>>7&127)))},writeSVarint:function(o){this.writeVarint(o<0?-o*2-1:o*2)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(o.length*4),this.pos++;var e=this.pos;this.pos=writeUtf8(this.buf,o,this.pos);var s=this.pos-e;s>=128&&makeRoomForExtraLength(e,s,this),this.pos=e-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),ieee754.write(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),ieee754.write(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var e=o.length;this.writeVarint(e),this.realloc(e);for(var s=0;s<e;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,e){this.pos++;var s=this.pos;o(e,this);var a=this.pos-s;a>=128&&makeRoomForExtraLength(s,a,this),this.pos=s-1,this.writeVarint(a),this.pos+=a},writeMessage:function(o,e,s){this.writeTag(o,Pbf.Bytes),this.writeRawMessage(e,s)},writePackedVarint:function(o,e){e.length&&this.writeMessage(o,writePackedVarint,e)},writePackedSVarint:function(o,e){e.length&&this.writeMessage(o,writePackedSVarint,e)},writePackedBoolean:function(o,e){e.length&&this.writeMessage(o,writePackedBoolean,e)},writePackedFloat:function(o,e){e.length&&this.writeMessage(o,writePackedFloat,e)},writePackedDouble:function(o,e){e.length&&this.writeMessage(o,writePackedDouble,e)},writePackedFixed32:function(o,e){e.length&&this.writeMessage(o,writePackedFixed32,e)},writePackedSFixed32:function(o,e){e.length&&this.writeMessage(o,writePackedSFixed32,e)},writePackedFixed64:function(o,e){e.length&&this.writeMessage(o,writePackedFixed64,e)},writePackedSFixed64:function(o,e){e.length&&this.writeMessage(o,writePackedSFixed64,e)},writeBytesField:function(o,e){this.writeTag(o,Pbf.Bytes),this.writeBytes(e)},writeFixed32Field:function(o,e){this.writeTag(o,Pbf.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(o,e){this.writeTag(o,Pbf.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(o,e){this.writeTag(o,Pbf.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(o,e){this.writeTag(o,Pbf.Fixed64),this.writeSFixed64(e)},writeVarintField:function(o,e){this.writeTag(o,Pbf.Varint),this.writeVarint(e)},writeSVarintField:function(o,e){this.writeTag(o,Pbf.Varint),this.writeSVarint(e)},writeStringField:function(o,e){this.writeTag(o,Pbf.Bytes),this.writeString(e)},writeFloatField:function(o,e){this.writeTag(o,Pbf.Fixed32),this.writeFloat(e)},writeDoubleField:function(o,e){this.writeTag(o,Pbf.Fixed64),this.writeDouble(e)},writeBooleanField:function(o,e){this.writeVarintField(o,!!e)}};function readVarintRemainder(o,e,s){var a=s.buf,d,b;if(b=a[s.pos++],d=(b&112)>>4,b<128||(b=a[s.pos++],d|=(b&127)<<3,b<128)||(b=a[s.pos++],d|=(b&127)<<10,b<128)||(b=a[s.pos++],d|=(b&127)<<17,b<128)||(b=a[s.pos++],d|=(b&127)<<24,b<128)||(b=a[s.pos++],d|=(b&1)<<31,b<128))return toNum(o,d,e);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(o){return o.type===Pbf.Bytes?o.readVarint()+o.pos:o.pos+1}function toNum(o,e,s){return s?e*4294967296+(o>>>0):(e>>>0)*4294967296+(o>>>0)}function writeBigVarint(o,e){var s,a;if(o>=0?(s=o%4294967296|0,a=o/4294967296|0):(s=~(-o%4294967296),a=~(-o/4294967296),s^4294967295?s=s+1|0:(s=0,a=a+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),writeBigVarintLow(s,a,e),writeBigVarintHigh(a,e)}function writeBigVarintLow(o,e,s){s.buf[s.pos++]=o&127|128,o>>>=7,s.buf[s.pos++]=o&127|128,o>>>=7,s.buf[s.pos++]=o&127|128,o>>>=7,s.buf[s.pos++]=o&127|128,o>>>=7,s.buf[s.pos]=o&127}function writeBigVarintHigh(o,e){var s=(o&7)<<4;e.buf[e.pos++]|=s|((o>>>=3)?128:0),o&&(e.buf[e.pos++]=o&127|((o>>>=7)?128:0),o&&(e.buf[e.pos++]=o&127|((o>>>=7)?128:0),o&&(e.buf[e.pos++]=o&127|((o>>>=7)?128:0),o&&(e.buf[e.pos++]=o&127|((o>>>=7)?128:0),o&&(e.buf[e.pos++]=o&127)))))}function makeRoomForExtraLength(o,e,s){var a=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));s.realloc(a);for(var d=s.pos-1;d>=o;d--)s.buf[d+a]=s.buf[d]}function writePackedVarint(o,e){for(var s=0;s<o.length;s++)e.writeVarint(o[s])}function writePackedSVarint(o,e){for(var s=0;s<o.length;s++)e.writeSVarint(o[s])}function writePackedFloat(o,e){for(var s=0;s<o.length;s++)e.writeFloat(o[s])}function writePackedDouble(o,e){for(var s=0;s<o.length;s++)e.writeDouble(o[s])}function writePackedBoolean(o,e){for(var s=0;s<o.length;s++)e.writeBoolean(o[s])}function writePackedFixed32(o,e){for(var s=0;s<o.length;s++)e.writeFixed32(o[s])}function writePackedSFixed32(o,e){for(var s=0;s<o.length;s++)e.writeSFixed32(o[s])}function writePackedFixed64(o,e){for(var s=0;s<o.length;s++)e.writeFixed64(o[s])}function writePackedSFixed64(o,e){for(var s=0;s<o.length;s++)e.writeSFixed64(o[s])}function readUInt32(o,e){return(o[e]|o[e+1]<<8|o[e+2]<<16)+o[e+3]*16777216}function writeInt32(o,e,s){o[s]=e,o[s+1]=e>>>8,o[s+2]=e>>>16,o[s+3]=e>>>24}function readInt32(o,e){return(o[e]|o[e+1]<<8|o[e+2]<<16)+(o[e+3]<<24)}function readUtf8(o,e,s){for(var a="",d=e;d<s;){var b=o[d],_=null,_e=b>239?4:b>223?3:b>191?2:1;if(d+_e>s)break;var ot,st,ct;_e===1?b<128&&(_=b):_e===2?(ot=o[d+1],(ot&192)===128&&(_=(b&31)<<6|ot&63,_<=127&&(_=null))):_e===3?(ot=o[d+1],st=o[d+2],(ot&192)===128&&(st&192)===128&&(_=(b&15)<<12|(ot&63)<<6|st&63,(_<=2047||_>=55296&&_<=57343)&&(_=null))):_e===4&&(ot=o[d+1],st=o[d+2],ct=o[d+3],(ot&192)===128&&(st&192)===128&&(ct&192)===128&&(_=(b&15)<<18|(ot&63)<<12|(st&63)<<6|ct&63,(_<=65535||_>=1114112)&&(_=null))),_===null?(_=65533,_e=1):_>65535&&(_-=65536,a+=String.fromCharCode(_>>>10&1023|55296),_=56320|_&1023),a+=String.fromCharCode(_),d+=_e}return a}function readUtf8TextDecoder(o,e,s){return utf8TextDecoder.decode(o.subarray(e,s))}function writeUtf8(o,e,s){for(var a=0,d,b;a<e.length;a++){if(d=e.charCodeAt(a),d>55295&&d<57344)if(b)if(d<56320){o[s++]=239,o[s++]=191,o[s++]=189,b=d;continue}else d=b-55296<<10|d-56320|65536,b=null;else{d>56319||a+1===e.length?(o[s++]=239,o[s++]=191,o[s++]=189):b=d;continue}else b&&(o[s++]=239,o[s++]=191,o[s++]=189,b=null);d<128?o[s++]=d:(d<2048?o[s++]=d>>6|192:(d<65536?o[s++]=d>>12|224:(o[s++]=d>>18|240,o[s++]=d>>12&63|128),o[s++]=d>>6&63|128),o[s++]=d&63|128)}return s}const PBF=getDefaultExportFromCjs$2(pbf);class MVT extends FeatureFormat{constructor(e){super(),e=e||{},this.dataProjection=new Projection$1({code:"",units:"tile-pixels"}),this.featureClass_=e.featureClass?e.featureClass:RenderFeature,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,s,a,d){e.pos=s.geometry;const b=e.readVarint()+e.pos;let _=1,_e=0,ot=0,st=0,ct=0,ft=0;for(;e.pos<b;){if(!_e){const mt=e.readVarint();_=mt&7,_e=mt>>3}if(_e--,_===1||_===2)ot+=e.readSVarint(),st+=e.readSVarint(),_===1&&ct>ft&&(d.push(ct),ft=ct),a.push(ot,st),ct+=2;else if(_===7)ct>ft&&(a.push(a[ft],a[ft+1]),ct+=2);else throw new Error("Invalid command found in the PBF")}ct>ft&&(d.push(ct),ft=ct)}createFeature_(e,s,a){const d=s.type;if(d===0)return null;let b;const _=s.properties;let _e;this.idProperty_?(_e=_[this.idProperty_],delete _[this.idProperty_]):_e=s.id,_[this.layerName_]=s.layer.name;const ot=[],st=[];this.readRawGeometry_(e,s,ot,st);const ct=getGeometryType(d,st.length);if(this.featureClass_===RenderFeature)b=new this.featureClass_(ct,ot,st,2,_,_e),b.transform(a.dataProjection);else{let ft;if(ct=="Polygon"){const wt=inflateEnds(ot,st);ft=wt.length>1?new MultiPolygon(ot,"XY",wt):new Polygon(ot,"XY",st)}else ft=ct==="Point"?new Point$1(ot,"XY"):ct==="LineString"?new LineString(ot,"XY"):ct==="MultiPoint"?new MultiPoint(ot,"XY"):ct==="MultiLineString"?new MultiLineString(ot,"XY",st):null;const mt=this.featureClass_;b=new mt,this.geometryName_&&b.setGeometryName(this.geometryName_);const bt=transformGeometryWithOptions(ft,!1,a);b.setGeometry(bt),_e!==void 0&&b.setId(_e),b.setProperties(_,!0)}return b}getType(){return"arraybuffer"}readFeatures(e,s){const a=this.layers_;s=this.adaptOptions(s);const d=get$3(s.dataProjection);d.setWorldExtent(s.extent),s.dataProjection=d;const b=new PBF(e),_=b.readFields(layersPBFReader,{}),_e=[];for(const ot in _){if(a&&!a.includes(ot))continue;const st=_[ot],ct=st?[0,0,st.extent,st.extent]:null;d.setExtent(ct);for(let ft=0,mt=st.length;ft<mt;++ft){const bt=readRawFeature(b,st,ft),wt=this.createFeature_(b,bt,s);wt!==null&&_e.push(wt)}}return _e}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function layersPBFReader(o,e,s){if(o===3){const a={keys:[],values:[],features:[]},d=s.readVarint()+s.pos;s.readFields(layerPBFReader,a,d),a.length=a.features.length,a.length&&(e[a.name]=a)}}function layerPBFReader(o,e,s){if(o===15)e.version=s.readVarint();else if(o===1)e.name=s.readString();else if(o===5)e.extent=s.readVarint();else if(o===2)e.features.push(s.pos);else if(o===3)e.keys.push(s.readString());else if(o===4){let a=null;const d=s.readVarint()+s.pos;for(;s.pos<d;)o=s.readVarint()>>3,a=o===1?s.readString():o===2?s.readFloat():o===3?s.readDouble():o===4?s.readVarint64():o===5?s.readVarint():o===6?s.readSVarint():o===7?s.readBoolean():null;e.values.push(a)}}function featurePBFReader(o,e,s){if(o==1)e.id=s.readVarint();else if(o==2){const a=s.readVarint()+s.pos;for(;s.pos<a;){const d=e.layer.keys[s.readVarint()],b=e.layer.values[s.readVarint()];e.properties[d]=b}}else o==3?e.type=s.readVarint():o==4&&(e.geometry=s.pos)}function readRawFeature(o,e,s){o.pos=e.features[s];const a=o.readVarint()+o.pos,d={layer:e,type:0,properties:{}};return o.readFields(featurePBFReader,d,a),d}function getGeometryType(o,e){let s;return o===1?s=e===1?"Point":"MultiPoint":o===2?s=e===1?"LineString":"MultiLineString":o===3&&(s="Polygon"),s}const CollectionEventType={ADD:"add",REMOVE:"remove"},Property$2={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(e,s,a){super(e),this.element=s,this.index=a}}class Collection extends BaseObject{constructor(e,s){if(super(),this.on,this.once,this.un,s=s||{},this.unique_=!!s.unique,this.array_=e||[],this.unique_)for(let a=0,d=this.array_.length;a<d;++a)this.assertUnique_(this.array_[a],a);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let s=0,a=e.length;s<a;++s)this.push(e[s]);return this}forEach(e){const s=this.array_;for(let a=0,d=s.length;a<d;++a)e(s[a],a,s)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Property$2.LENGTH)}insertAt(e,s){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(s),this.array_.splice(e,0,s),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,s,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const s=this.getLength();return this.insertAt(s,e),this.getLength()}remove(e){const s=this.array_;for(let a=0,d=s.length;a<d;++a)if(s[a]===e)return this.removeAt(a)}removeAt(e){if(e<0||e>=this.getLength())return;const s=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,s,e)),s}setAt(e,s){const a=this.getLength();if(e>=a){this.insertAt(e,s);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(s,e);const d=this.array_[e];this.array_[e]=s,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,d,e)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,s,e))}updateLength_(){this.set(Property$2.LENGTH,this.array_.length)}assertUnique_(e,s){for(let a=0,d=this.array_.length;a<d;++a)if(this.array_[a]===e&&a!==s)throw new Error("Duplicate item added to a unique collection")}}class CanvasVectorLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=createEmpty(),this.wrappedRenderedExtent_=createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,s,a){const d=s.extent,b=s.viewState,_=b.center,_e=b.resolution,ot=b.projection,st=b.rotation,ct=ot.getExtent(),ft=this.getLayer().getSource(),mt=s.pixelRatio,bt=s.viewHints,wt=!(bt[ViewHint.ANIMATING]||bt[ViewHint.INTERACTING]),Ct=this.compositionContext_,Rt=Math.round(s.size[0]*mt),It=Math.round(s.size[1]*mt),Pt=ft.getWrapX()&&ot.canWrapX(),Tt=Pt?getWidth(ct):null,Gt=Pt?Math.ceil((d[2]-ct[2])/Tt)+1:1;let Jt=Pt?Math.floor((d[0]-ct[0])/Tt):0;do{const qt=this.getRenderTransform(_,_e,st,mt,Rt,It,Jt*Tt);e.execute(Ct,1,qt,st,wt,void 0,a)}while(++Jt<Gt)}setupCompositionContext_(){if(this.opacity_!==1){const e=createCanvasContext2D(this.context.canvas.width,this.context.canvas.height,canvasPool$2);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,releaseCanvas(this.compositionContext_),canvasPool$2.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,s){const a=e.pixelRatio,d=e.layerStatesArray[e.layerIndex];makeScale(this.pixelTransform,1/a,1/a),makeInverse(this.inversePixelTransform,this.pixelTransform);const b=toString$3(this.pixelTransform);this.useContainer(s,b,this.getBackground(e));const _=this.context,_e=_.canvas,ot=this.replayGroup_,st=this.declutterExecutorGroup;let ct=ot&&!ot.isEmpty()||st&&!st.isEmpty();if(!ct&&!(this.getLayer().hasListener(RenderEventType.PRERENDER)||this.getLayer().hasListener(RenderEventType.POSTRENDER)))return null;const ft=Math.round(e.size[0]*a),mt=Math.round(e.size[1]*a);_e.width!=ft||_e.height!=mt?(_e.width=ft,_e.height=mt,_e.style.transform!==b&&(_e.style.transform=b)):this.containerReused||_.clearRect(0,0,ft,mt),this.preRender(_,e);const bt=e.viewState;bt.projection,this.opacity_=d.opacity,this.setupCompositionContext_();let wt=!1;if(ct&&d.extent&&this.clipping){const Ct=fromUserExtent(d.extent);ct=intersects$1(Ct,e.extent),wt=ct&&!containsExtent(Ct,e.extent),wt&&this.clipUnrotated(this.compositionContext_,e,Ct)}return ct&&this.renderWorlds(ot,e),wt&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(_,e),this.renderedRotation_!==bt.rotation&&(this.renderedRotation_=bt.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(s=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const a=[this.context.canvas.width,this.context.canvas.height];apply$1(this.pixelTransform,a);const d=this.renderedCenter_,b=this.renderedResolution_,_=this.renderedRotation_,_e=this.renderedProjection_,ot=this.wrappedRenderedExtent_,st=this.getLayer(),ct=[],ft=a[0]*HIT_DETECT_RESOLUTION,mt=a[1]*HIT_DETECT_RESOLUTION;ct.push(this.getRenderTransform(d,b,_,HIT_DETECT_RESOLUTION,ft,mt,0).slice());const bt=st.getSource(),wt=_e.getExtent();if(bt.getWrapX()&&_e.canWrapX()&&!containsExtent(wt,ot)){let Ct=ot[0];const Rt=getWidth(wt);let It=0,Pt;for(;Ct<wt[0];)--It,Pt=Rt*It,ct.push(this.getRenderTransform(d,b,_,HIT_DETECT_RESOLUTION,ft,mt,Pt).slice()),Ct+=Rt;for(It=0,Ct=ot[2];Ct>wt[2];)++It,Pt=Rt*It,ct.push(this.getRenderTransform(d,b,_,HIT_DETECT_RESOLUTION,ft,mt,Pt).slice()),Ct-=Rt}this.hitDetectionImageData_=createHitDetectionImageData(a,ct,this.renderedFeatures_,st.getStyleFunction(),ot,b,_)}s(hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,s,a,d,b){if(!this.replayGroup_)return;const _=s.viewState.resolution,_e=s.viewState.rotation,ot=this.getLayer(),st={},ct=function(bt,wt,Ct){const Rt=getUid(bt),It=st[Rt];if(It){if(It!==!0&&Ct<It.distanceSq){if(Ct===0)return st[Rt]=!0,b.splice(b.lastIndexOf(It),1),d(bt,ot,wt);It.geometry=wt,It.distanceSq=Ct}}else{if(Ct===0)return st[Rt]=!0,d(bt,ot,wt);b.push(st[Rt]={feature:bt,layer:ot,geometry:wt,distanceSq:Ct,callback:d})}};let ft;const mt=[this.replayGroup_];return this.declutterExecutorGroup&&mt.push(this.declutterExecutorGroup),mt.some(bt=>ft=bt.forEachFeatureAtCoordinate(e,_,_e,a,ct,bt===this.declutterExecutorGroup&&s.declutterTree?s.declutterTree.all().map(wt=>wt.value):null)),ft}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const s=this.getLayer(),a=s.getSource();if(!a)return!1;const d=e.viewHints[ViewHint.ANIMATING],b=e.viewHints[ViewHint.INTERACTING],_=s.getUpdateWhileAnimating(),_e=s.getUpdateWhileInteracting();if(this.ready&&!_&&d||!_e&&b)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const ot=e.extent,st=e.viewState,ct=st.projection,ft=st.resolution,mt=e.pixelRatio,bt=s.getRevision(),wt=s.getRenderBuffer();let Ct=s.getRenderOrder();Ct===void 0&&(Ct=defaultOrder);const Rt=st.center.slice(),It=buffer(ot,wt*ft),Pt=It.slice(),Tt=[It.slice()],Gt=ct.getExtent();if(a.getWrapX()&&ct.canWrapX()&&!containsExtent(Gt,e.extent)){const hn=getWidth(Gt),Mt=Math.max(getWidth(It)/2,hn);It[0]=Gt[0]-Mt,It[2]=Gt[2]+Mt,wrapX$1(Rt,ct);const Hn=wrapX$2(Tt[0],ct);Hn[0]<Gt[0]&&Hn[2]<Gt[2]?Tt.push([Hn[0]+hn,Hn[1],Hn[2]+hn,Hn[3]]):Hn[0]>Gt[0]&&Hn[2]>Gt[2]&&Tt.push([Hn[0]-hn,Hn[1],Hn[2]-hn,Hn[3]])}if(this.ready&&this.renderedResolution_==ft&&this.renderedRevision_==bt&&this.renderedRenderOrder_==Ct&&containsExtent(this.wrappedRenderedExtent_,It))return equals$2(this.renderedExtent_,Pt)||(this.hitDetectionImageData_=null,this.renderedExtent_=Pt),this.renderedCenter_=Rt,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const Jt=new BuilderGroup(getTolerance(ft,mt),It,ft,mt);let qt;this.getLayer().getDeclutter()&&(qt=new BuilderGroup(getTolerance(ft,mt),It,ft,mt));let Nt;for(let hn=0,Mt=Tt.length;hn<Mt;++hn)a.loadFeatures(Tt[hn],ft,ct);const Qt=getSquaredTolerance(ft,mt);let fn=!0;const Mn=hn=>{let Mt;const Hn=hn.getStyleFunction()||s.getStyleFunction();if(Hn&&(Mt=Hn(hn,ft)),Mt){const cn=this.renderFeature(hn,Qt,Mt,Jt,Nt,qt);fn=fn&&!cn}},ln=toUserExtent(It),Wt=a.getFeaturesInExtent(ln);Ct&&Wt.sort(Ct);for(let hn=0,Mt=Wt.length;hn<Mt;++hn)Mn(Wt[hn]);this.renderedFeatures_=Wt,this.ready=fn;const so=Jt.finish(),pn=new ExecutorGroup(It,ft,mt,a.getOverlaps(),so,s.getRenderBuffer());return qt&&(this.declutterExecutorGroup=new ExecutorGroup(It,ft,mt,a.getOverlaps(),qt.finish(),s.getRenderBuffer())),this.renderedResolution_=ft,this.renderedRevision_=bt,this.renderedRenderOrder_=Ct,this.renderedExtent_=Pt,this.wrappedRenderedExtent_=It,this.renderedCenter_=Rt,this.renderedProjection_=ct,this.replayGroup_=pn,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,s,a,d,b,_){if(!a)return!1;let _e=!1;if(Array.isArray(a))for(let ot=0,st=a.length;ot<st;++ot)_e=renderFeature$1(d,e,a[ot],s,this.boundHandleStyleImageChange_,b,_)||_e;else _e=renderFeature$1(d,e,a,s,this.boundHandleStyleImageChange_,b,_);return _e}}class VectorLayer extends BaseVectorLayer{constructor(e){super(e)}createRenderer(){return new CanvasVectorLayerRenderer(this)}}class RBush{constructor(e){this.rbush_=new RBush$1(e),this.items_={}}insert(e,s){const a={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:s};this.rbush_.insert(a),this.items_[getUid(s)]=a}load(e,s){const a=new Array(s.length);for(let d=0,b=s.length;d<b;d++){const _=e[d],_e=s[d],ot={minX:_[0],minY:_[1],maxX:_[2],maxY:_[3],value:_e};a[d]=ot,this.items_[getUid(_e)]=ot}this.rbush_.load(a)}remove(e){const s=getUid(e),a=this.items_[s];return delete this.items_[s],this.rbush_.remove(a)!==null}update(e,s){const a=this.items_[getUid(s)],d=[a.minX,a.minY,a.maxX,a.maxY];equals$1(d,e)||(this.remove(s),this.insert(e,s))}getAll(){return this.rbush_.all().map(function(s){return s.value})}getInExtent(e){const s={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(s).map(function(d){return d.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,s){return this.forEach_(this.getInExtent(e),s)}forEach_(e,s){let a;for(let d=0,b=e.length;d<b;d++)if(a=s(e[d]),a)return a;return a}isEmpty(){return isEmpty$1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const s=this.rbush_.toJSON();return createOrUpdate$2(s.minX,s.minY,s.maxX,s.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const s in e.items_)this.items_[s]=e.items_[s]}}const VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function all$1(o,e){return[[-1/0,-1/0,1/0,1/0]]}function bbox(o,e){return[o]}class VectorSourceEvent extends BaseEvent{constructor(e,s,a){super(e),this.feature=s,this.features=a}}class VectorSource extends Source{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=VOID,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(assert(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:all$1;const s=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=s?new RBush:null,this.loadedExtentsRtree_=new RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let a,d;Array.isArray(e.features)?d=e.features:e.features&&(a=e.features,d=a.getArray()),!s&&a===void 0&&(a=new Collection(d)),d!==void 0&&this.addFeaturesInternal(d),a!==void 0&&this.bindFeaturesCollection_(a)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const s=getUid(e);if(!this.addToIndex_(s,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(s,e);const a=e.getGeometry();if(a){const d=a.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(d,e)}else this.nullGeometryFeatures_[s]=e;this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,e))}setupChangeEvents_(e,s){s instanceof RenderFeature||(this.featureChangeKeys_[e]=[listen(s,EventType.CHANGE,this.handleFeatureChange_,this),listen(s,ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,s){let a=!0;if(s.getId()!==void 0){const d=String(s.getId());if(!(d in this.idIndex_))this.idIndex_[d]=s;else if(s instanceof RenderFeature){const b=this.idIndex_[d];b instanceof RenderFeature?Array.isArray(b)?b.push(s):this.idIndex_[d]=[b,s]:a=!1}else a=!1}return a&&(assert(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=s),a}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const s=[],a=[],d=[];for(let b=0,_=e.length;b<_;b++){const _e=e[b],ot=getUid(_e);this.addToIndex_(ot,_e)&&a.push(_e)}for(let b=0,_=a.length;b<_;b++){const _e=a[b],ot=getUid(_e);this.setupChangeEvents_(ot,_e);const st=_e.getGeometry();if(st){const ct=st.getExtent();s.push(ct),d.push(_e)}else this.nullGeometryFeatures_[ot]=_e}if(this.featuresRtree_&&this.featuresRtree_.load(s,d),this.hasListener(VectorEventType.ADDFEATURE))for(let b=0,_=a.length;b<_;b++)this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,a[b]))}bindFeaturesCollection_(e){let s=!1;this.addEventListener(VectorEventType.ADDFEATURE,function(a){s||(s=!0,e.push(a.feature),s=!1)}),this.addEventListener(VectorEventType.REMOVEFEATURE,function(a){s||(s=!0,e.remove(a.feature),s=!1)}),e.addEventListener(CollectionEventType.ADD,a=>{s||(s=!0,this.addFeature(a.element),s=!1)}),e.addEventListener(CollectionEventType.REMOVE,a=>{s||(s=!0,this.removeFeature(a.element),s=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const a in this.featureChangeKeys_)this.featureChangeKeys_[a].forEach(unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const a=d=>{this.removeFeatureInternal(d)};this.featuresRtree_.forEach(a);for(const d in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[d])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const s=new VectorSourceEvent(VectorEventType.CLEAR);this.dispatchEvent(s),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,s){const a=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(a,function(d){const b=d.getGeometry();if(b instanceof RenderFeature||b.intersectsCoordinate(e))return s(d)})}forEachFeatureInExtent(e,s){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,s);this.featuresCollection_&&this.featuresCollection_.forEach(s)}forEachFeatureIntersectingExtent(e,s){return this.forEachFeatureInExtent(e,function(a){const d=a.getGeometry();if(d instanceof RenderFeature||d.intersectsExtent(e)){const b=s(a);if(b)return b}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),isEmpty$1(this.nullGeometryFeatures_)||extend$4(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const s=[];return this.forEachFeatureAtCoordinateDirect(e,function(a){s.push(a)}),s}getFeaturesInExtent(e,s){if(this.featuresRtree_){if(!(s&&s.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const d=wrapAndSliceX(e,s);return[].concat(...d.map(b=>this.featuresRtree_.getInExtent(b)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,s){const a=e[0],d=e[1];let b=null;const _=[NaN,NaN];let _e=1/0;const ot=[-1/0,-1/0,1/0,1/0];return s=s||TRUE,this.featuresRtree_.forEachInExtent(ot,function(st){if(s(st)){const ct=st.getGeometry(),ft=_e;if(_e=ct instanceof RenderFeature?0:ct.closestPointXY(a,d,_,_e),_e<ft){b=st;const mt=Math.sqrt(_e);ot[0]=a-mt,ot[1]=d-mt,ot[2]=a+mt,ot[3]=d+mt}}}),b}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const s=this.idIndex_[e.toString()];return s!==void 0?s:null}getFeatureByUid(e){const s=this.uidIndex_[e];return s!==void 0?s:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const s=e.target,a=getUid(s),d=s.getGeometry();if(!d)a in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(s),this.nullGeometryFeatures_[a]=s);else{const _=d.getExtent();a in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[a],this.featuresRtree_&&this.featuresRtree_.insert(_,s)):this.featuresRtree_&&this.featuresRtree_.update(_,s)}const b=s.getId();if(b!==void 0){const _=b.toString();this.idIndex_[_]!==s&&(this.removeFromIdIndex_(s),this.idIndex_[_]=s)}else this.removeFromIdIndex_(s),this.uidIndex_[a]=s;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE,s))}hasFeature(e){const s=e.getId();return s!==void 0?s in this.idIndex_:getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&isEmpty$1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,s,a){const d=this.loadedExtentsRtree_,b=this.strategy_(e,s,a);for(let _=0,_e=b.length;_<_e;++_){const ot=b[_];d.forEachInExtent(ot,function(ct){return containsExtent(ct.extent,ot)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)),this.loader_.call(this,ot,s,a,ct=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND,void 0,ct))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR))}),d.insert(ot,{extent:ot.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const s=this.loadedExtentsRtree_;let a;s.forEachInExtent(e,function(d){if(equals$1(d.extent,e))return a=d,!0}),a&&s.remove(a)}removeFeature(e){if(!e)return;const s=getUid(e);s in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[s]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const s=getUid(e),a=this.featureChangeKeys_[s];if(!a)return;a.forEach(unlistenByKey),delete this.featureChangeKeys_[s];const d=e.getId();return d!==void 0&&delete this.idIndex_[d.toString()],delete this.uidIndex_[s],this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let s=!1;for(const a in this.idIndex_){const d=this.idIndex_[a];if(e instanceof RenderFeature&&Array.isArray(d)&&d.includes(e))d.splice(d.indexOf(e),1);else if(this.idIndex_[a]===e){delete this.idIndex_[a],s=!0;break}}return s}setLoader(e){this.loader_=e}setUrl(e){assert(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xhr(e,this.format_))}}class Kinetic{constructor(e,s,a){this.decay_=e,this.minVelocity_=s,this.delay_=a,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,s){this.points_.push(e,s,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,s=this.points_.length-3;if(this.points_[s+2]<e)return!1;let a=s-3;for(;a>0&&this.points_[a+2]>e;)a-=3;const d=this.points_[s+2]-this.points_[a+2];if(d<1e3/60)return!1;const b=this.points_[s]-this.points_[a],_=this.points_[s+1]-this.points_[a+1];return this.angle_=Math.atan2(_,b),this.initialVelocity_=Math.sqrt(b*b+_*_)/d,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,s){abstract()}calculateMatrices2D(e){const s=e.viewState,a=e.coordinateToPixelTransform,d=e.pixelToCoordinateTransform;compose(a,e.size[0]/2,e.size[1]/2,1/s.resolution,-1/s.resolution,-s.rotation,-s.center[0],-s.center[1]),makeInverse(d,a)}forEachFeatureAtCoordinate(e,s,a,d,b,_,_e,ot){let st;const ct=s.viewState;function ft(Gt,Jt,qt,Nt){return b.call(_,Jt,Gt?qt:null,Nt)}const mt=ct.projection,bt=wrapX$1(e.slice(),mt),wt=[[0,0]];if(mt.canWrapX()&&d){const Gt=mt.getExtent(),Jt=getWidth(Gt);wt.push([-Jt,0],[Jt,0])}const Ct=s.layerStatesArray,Rt=Ct.length,It=[],Pt=[];for(let Gt=0;Gt<wt.length;Gt++)for(let Jt=Rt-1;Jt>=0;--Jt){const qt=Ct[Jt],Nt=qt.layer;if(Nt.hasRenderer()&&inView(qt,ct)&&_e.call(ot,Nt)){const Qt=Nt.getRenderer(),fn=Nt.getSource();if(Qt&&fn){const Mn=fn.getWrapX()?bt:e,ln=ft.bind(null,qt.managed);Pt[0]=Mn[0]+wt[Gt][0],Pt[1]=Mn[1]+wt[Gt][1],st=Qt.forEachFeatureAtCoordinate(Pt,s,a,ln,It)}if(st)return st}}if(It.length===0)return;const Tt=1/It.length;return It.forEach((Gt,Jt)=>Gt.distanceSq+=Jt*Tt),It.sort((Gt,Jt)=>Gt.distanceSq-Jt.distanceSq),It.some(Gt=>st=Gt.callback(Gt.feature,Gt.layer,Gt.geometry)),st}hasFeatureAtCoordinate(e,s,a,d,b,_){return this.forEachFeatureAtCoordinate(e,s,a,d,TRUE,this,b,_)!==void 0}getMap(){return this.map_}renderFrame(e){abstract()}flushDeclutterItems(e){}scheduleExpireIconCache(e){shared.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(o,e){shared.expire()}class CompositeMapRenderer extends MapRenderer{constructor(e){super(e),this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const s=this.element_.style;s.position="absolute",s.width="100%",s.height="100%",s.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const a=e.getViewport();a.insertBefore(this.element_,a.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(e,s){const a=this.getMap();if(a.hasListener(e)){const d=new RenderEvent(e,void 0,s);a.dispatchEvent(d)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,e);const s=e.layerStatesArray.sort(function(_,_e){return _.zIndex-_e.zIndex}),a=e.viewState;this.children_.length=0;const d=this.declutterLayers_;d.length=0;let b=null;for(let _=0,_e=s.length;_<_e;++_){const ot=s[_];e.layerIndex=_;const st=ot.layer,ct=st.getSourceState();if(!inView(ot,a)||ct!="ready"&&ct!="undefined"){st.unrender();continue}const ft=st.render(e,b);ft&&(ft!==b&&(this.children_.push(ft),b=ft),"getDeclutter"in st&&d.push(st))}this.flushDeclutterItems(e),replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}flushDeclutterItems(e){const s=this.declutterLayers_;for(let a=s.length-1;a>=0;--a)s[a].renderDeclutter(e);s.length=0}}class GroupEvent extends BaseEvent{constructor(e,s){super(e),this.layer=s}}const Property$1={LAYERS:"layers"};class LayerGroup extends BaseLayer{constructor(e){e=e||{};const s=Object.assign({},e);delete s.layers;let a=e.layers;super(s),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property$1.LAYERS,this.handleLayersChanged_),a?Array.isArray(a)?a=new Collection(a.slice(),{unique:!0}):assert(typeof a.getArray=="function","Expected `layers` to be an array or a `Collection`"):a=new Collection(void 0,{unique:!0}),this.setLayers(a)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const a in this.listenerKeys_)this.listenerKeys_[a].forEach(unlistenByKey);clear$1(this.listenerKeys_);const s=e.getArray();for(let a=0,d=s.length;a<d;a++){const b=s[a];this.registerLayerListeners_(b),this.dispatchEvent(new GroupEvent("addlayer",b))}this.changed()}registerLayerListeners_(e){const s=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType.CHANGE,this.handleLayerChange_,this)];e instanceof LayerGroup&&s.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=s}handleLayerGroupAdd_(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))}handleLayersAdd_(e){const s=e.element;this.registerLayerListeners_(s),this.dispatchEvent(new GroupEvent("addlayer",s)),this.changed()}handleLayersRemove_(e){const s=e.element,a=getUid(s);this.listenerKeys_[a].forEach(unlistenByKey),delete this.listenerKeys_[a],this.dispatchEvent(new GroupEvent("removelayer",s)),this.changed()}getLayers(){return this.get(Property$1.LAYERS)}setLayers(e){const s=this.getLayers();if(s){const a=s.getArray();for(let d=0,b=a.length;d<b;++d)this.dispatchEvent(new GroupEvent("removelayer",a[d]))}this.set(Property$1.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(s){s.getLayersArray(e)}),e}getLayerStatesArray(e){const s=e!==void 0?e:[],a=s.length;this.getLayers().forEach(function(_){_.getLayerStatesArray(s)});const d=this.getLayerState();let b=d.zIndex;!e&&d.zIndex===void 0&&(b=0);for(let _=a,_e=s.length;_<_e;_++){const ot=s[_];ot.opacity*=d.opacity,ot.visible=ot.visible&&d.visible,ot.maxResolution=Math.min(ot.maxResolution,d.maxResolution),ot.minResolution=Math.max(ot.minResolution,d.minResolution),ot.minZoom=Math.max(ot.minZoom,d.minZoom),ot.maxZoom=Math.min(ot.maxZoom,d.maxZoom),d.extent!==void 0&&(ot.extent!==void 0?ot.extent=getIntersection(ot.extent,d.extent):ot.extent=d.extent),ot.zIndex===void 0&&(ot.zIndex=b)}return s}getSourceState(){return"ready"}}class MapEvent extends BaseEvent{constructor(e,s,a){super(e),this.map=s,this.frameState=a!==void 0?a:null}}class MapBrowserEvent extends MapEvent{constructor(e,s,a,d,b,_){super(e,s,b),this.originalEvent=a,this.pixel_=null,this.coordinate_=null,this.dragging=d!==void 0?d:!1,this.activePointers=_}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType.CLICK,DBLCLICK:EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class MapBrowserEventHandler extends Target{constructor(e,s){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=s===void 0?1:s,this.down_=null;const a=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=a,this.pointerdownListenerKey_=listen(a,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(a,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(e){let s=new MapBrowserEvent(MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(s),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,s=new MapBrowserEvent(MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(s)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const a=new MapBrowserEvent(MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(a)},250)}updateActivePointers_(e){const s=e,a=s.pointerId;if(s.type==MapBrowserEventType.POINTERUP||s.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[a];for(const d in this.trackedTouches_)if(this.trackedTouches_[d].target!==s.target){delete this.trackedTouches_[d];break}}else(s.type==MapBrowserEventType.POINTERDOWN||s.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[a]=s);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const s=new MapBrowserEvent(MapBrowserEventType.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(s),this.emulateClicks_&&!s.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const s=new MapBrowserEvent(MapBrowserEventType.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(s),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(a,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(a,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const s=new MapBrowserEvent(MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(s)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const s=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,this.map_,e,s))}handleTouchMove_(e){const s=this.originalPointerMoveEvent_;(!s||s.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},DROP=1/0;class PriorityQueue{constructor(e,s){this.priorityFunction_=e,this.keyFunction_=s,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear$1(this.queuedElements_)}dequeue(){const e=this.elements_,s=this.priorities_,a=e[0];e.length==1?(e.length=0,s.length=0):(e[0]=e.pop(),s[0]=s.pop(),this.siftUp_(0));const d=this.keyFunction_(a);return delete this.queuedElements_[d],a}enqueue(e){assert(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const s=this.priorityFunction_(e);return s!=DROP?(this.elements_.push(e),this.priorities_.push(s),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const s=this.elements_,a=this.priorities_,d=s.length,b=s[e],_=a[e],_e=e;for(;e<d>>1;){const ot=this.getLeftChildIndex_(e),st=this.getRightChildIndex_(e),ct=st<d&&a[st]<a[ot]?st:ot;s[e]=s[ct],a[e]=a[ct],e=ct}s[e]=b,a[e]=_,this.siftDown_(_e,e)}siftDown_(e,s){const a=this.elements_,d=this.priorities_,b=a[s],_=d[s];for(;s>e;){const _e=this.getParentIndex_(s);if(d[_e]>_)a[s]=a[_e],d[s]=d[_e],s=_e;else break}a[s]=b,d[s]=_}reprioritize(){const e=this.priorityFunction_,s=this.elements_,a=this.priorities_;let d=0;const b=s.length;let _,_e,ot;for(_e=0;_e<b;++_e)_=s[_e],ot=e(_),ot==DROP?delete this.queuedElements_[this.keyFunction_(_)]:(a[d]=ot,s[d++]=_);s.length=d,a.length=d,this.heapify_()}}class TileQueue extends PriorityQueue{constructor(e,s){super(function(a){return e.apply(null,a)},function(a){return a[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=s,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const s=super.enqueue(e);return s&&e[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_),s}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const s=e.target,a=s.getState();if(a===TileState.LOADED||a===TileState.ERROR||a===TileState.EMPTY){a!==TileState.ERROR&&s.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);const d=s.getKey();d in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[d],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,s){let a=0,d,b,_;for(;this.tilesLoading_<e&&a<s&&this.getCount()>0;)b=this.dequeue()[0],_=b.getKey(),d=b.getState(),d===TileState.IDLE&&!(_ in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[_]=!0,++this.tilesLoading_,++a,b.load())}}function getTilePriority(o,e,s,a,d){if(!o||!(s in o.wantedTiles)||!o.wantedTiles[s][e.getKey()])return DROP;const b=o.viewState.center,_=a[0]-b[0],_e=a[1]-b[1];return 65536*Math.log(d)+Math.sqrt(_*_+_e*_e)/d}class Attribution extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const s=e.className!==void 0?e.className:"ol-attribution",a=e.tipLabel!==void 0?e.tipLabel:"Attributions",d=e.expandClassName!==void 0?e.expandClassName:s+"-expand",b=e.collapseLabel!==void 0?e.collapseLabel:"",_=e.collapseClassName!==void 0?e.collapseClassName:s+"-collapse";typeof b=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=b,this.collapseLabel_.className=_):this.collapseLabel_=b;const _e=e.label!==void 0?e.label:"i";typeof _e=="string"?(this.label_=document.createElement("span"),this.label_.textContent=_e,this.label_.className=d):this.label_=_e;const ot=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=a,this.toggleButton_.appendChild(ot),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const st=s+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),ct=this.element;ct.className=st,ct.appendChild(this.toggleButton_),ct.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const s=Array.from(new Set(this.getMap().getAllLayers().flatMap(d=>d.getAttributions(e)))),a=!this.getMap().getAllLayers().some(d=>d.getSource()&&d.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(a),s}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const s=this.collectSourceAttributions_(e),a=s.length>0;if(this.renderedVisible_!=a&&(this.element.style.display=a?"":"none",this.renderedVisible_=a),!equals$2(s,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let d=0,b=s.length;d<b;++d){const _=document.createElement("li");_.innerHTML=s[d],this.ulElement_.appendChild(_)}this.renderedAttributions_=s}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Rotate extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const s=e.className!==void 0?e.className:"ol-rotate",a=e.label!==void 0?e.label:"",d=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof a=="string"?(this.label_=document.createElement("span"),this.label_.className=d,this.label_.textContent=a):(this.label_=a,this.label_.classList.add(d));const b=e.tipLabel?e.tipLabel:"Reset rotation",_=document.createElement("button");_.className=s+"-reset",_.setAttribute("type","button"),_.title=b,_.appendChild(this.label_),_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const _e=s+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,ot=this.element;ot.className=_e,ot.appendChild(_),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const s=this.getMap().getView();if(!s)return;const a=s.getRotation();a!==void 0&&(this.duration_>0&&a%(2*Math.PI)!==0?s.animate({rotation:0,duration:this.duration_,easing:easeOut}):s.setRotation(0))}render(e){const s=e.frameState;if(!s)return;const a=s.viewState.rotation;if(a!=this.rotation_){const d="rotate("+a+"rad)";if(this.autoHide_){const b=this.element.classList.contains(CLASS_HIDDEN);!b&&a===0?this.element.classList.add(CLASS_HIDDEN):b&&a!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=d}this.rotation_=a}}class Zoom extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const s=e.className!==void 0?e.className:"ol-zoom",a=e.delta!==void 0?e.delta:1,d=e.zoomInClassName!==void 0?e.zoomInClassName:s+"-in",b=e.zoomOutClassName!==void 0?e.zoomOutClassName:s+"-out",_=e.zoomInLabel!==void 0?e.zoomInLabel:"+",_e=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",ot=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",st=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",ct=document.createElement("button");ct.className=d,ct.setAttribute("type","button"),ct.title=ot,ct.appendChild(typeof _=="string"?document.createTextNode(_):_),ct.addEventListener(EventType.CLICK,this.handleClick_.bind(this,a),!1);const ft=document.createElement("button");ft.className=b,ft.setAttribute("type","button"),ft.title=st,ft.appendChild(typeof _e=="string"?document.createTextNode(_e):_e),ft.addEventListener(EventType.CLICK,this.handleClick_.bind(this,-a),!1);const mt=s+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,bt=this.element;bt.className=mt,bt.appendChild(ct),bt.appendChild(ft),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,s){s.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const a=this.getMap().getView();if(!a)return;const d=a.getZoom();if(d!==void 0){const b=a.getConstrainedZoom(d+e);this.duration_>0?(a.getAnimating()&&a.cancelAnimations(),a.animate({zoom:b,duration:this.duration_,easing:easeOut})):a.setZoom(b)}}}function defaults$3(o){o=o||{};const e=new Collection;return(o.zoom!==void 0?o.zoom:!0)&&e.push(new Zoom(o.zoomOptions)),(o.rotate!==void 0?o.rotate:!0)&&e.push(new Rotate(o.rotateOptions)),(o.attribution!==void 0?o.attribution:!0)&&e.push(new Attribution(o.attributionOptions)),e}const InteractionProperty={ACTIVE:"active"};class Interaction extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(InteractionProperty.ACTIVE,e)}setMap(e){this.map_=e}}function pan(o,e,s){const a=o.getCenterInternal();if(a){const d=[a[0]+e[0],a[1]+e[1]];o.animateInternal({duration:s!==void 0?s:250,easing:linear,center:o.getConstrainedCenter(d)})}}function zoomByDelta(o,e,s,a){const d=o.getZoom();if(d===void 0)return;const b=o.getConstrainedZoom(d+e),_=o.getResolutionForZoom(b);o.getAnimating()&&o.cancelAnimations(),o.animate({resolution:_,anchor:s,duration:a!==void 0?a:250,easing:easeOut})}class DoubleClickZoom extends Interaction{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let s=!1;if(e.type==MapBrowserEventType.DBLCLICK){const a=e.originalEvent,d=e.map,b=e.coordinate,_=a.shiftKey?-this.delta_:this.delta_,_e=d.getView();zoomByDelta(_e,_,b,this.duration_),a.preventDefault(),s=!0}return!s}}class PointerInteraction extends Interaction{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let s=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==MapBrowserEventType.POINTERUP){const a=this.handleUpEvent(e);this.handlingDownUpSequence=a&&this.targetPointers.length>0}}else if(e.type==MapBrowserEventType.POINTERDOWN){const a=this.handleDownEvent(e);this.handlingDownUpSequence=a,s=this.stopDown(a)}else e.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(e);return!s}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function centroid(o){const e=o.length;let s=0,a=0;for(let d=0;d<e;d++)s+=o[d].clientX,a+=o[d].clientY;return{clientX:s/e,clientY:a/e}}function all(o){const e=arguments;return function(s){let a=!0;for(let d=0,b=e.length;d<b&&(a=a&&e[d](s),!!a);++d);return a}}const altKeyOnly=function(o){const e=o.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly=function(o){const e=o.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus$1=function(o){const e=o.map.getTargetElement(),s=o.map.getOwnerDocument().activeElement;return e.contains(s)},focusWithTabindex=function(o){return o.map.getTargetElement().hasAttribute("tabindex")?focus$1(o):!0},always=TRUE,mouseActionButton=function(o){const e=o.originalEvent;return e.button==0&&!(WEBKIT&&MAC&&e.ctrlKey)},never=FALSE,singleClick=function(o){return o.type==MapBrowserEventType.SINGLECLICK},noModifierKeys=function(o){const e=o.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},platformModifierKey=function(o){const e=o.originalEvent;return MAC?e.metaKey:e.ctrlKey},shiftKeyOnly=function(o){const e=o.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(o){const e=o.originalEvent,s=e.target.tagName;return s!=="INPUT"&&s!=="SELECT"&&s!=="TEXTAREA"&&!e.target.isContentEditable},mouseOnly=function(o){const e=o.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},primaryAction=function(o){const e=o.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class DragPan extends PointerInteraction{constructor(e){super({stopDown:FALSE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const s=e.condition?e.condition:all(noModifierKeys,primaryAction);this.condition_=e.onFocusOnly?all(focusWithTabindex,s):s,this.noKinetic_=!1}handleDragEvent(e){const s=e.map;this.panning_||(this.panning_=!0,s.getView().beginInteraction());const a=this.targetPointers,d=s.getEventPixel(centroid(a));if(a.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(d[0],d[1]),this.lastCentroid){const b=[this.lastCentroid[0]-d[0],d[1]-this.lastCentroid[1]],_e=e.map.getView();scale$3(b,_e.getResolution()),rotate$1(b,_e.getRotation()),_e.adjustCenterInternal(b)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=d,this.lastPointersCount_=a.length,e.originalEvent.preventDefault()}handleUpEvent(e){const s=e.map,a=s.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const d=this.kinetic_.getDistance(),b=this.kinetic_.getAngle(),_=a.getCenterInternal(),_e=s.getPixelFromCoordinateInternal(_),ot=s.getCoordinateFromPixelInternal([_e[0]-d*Math.cos(b),_e[1]-d*Math.sin(b)]);a.animateInternal({center:a.getConstrainedCenter(ot),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,a.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const a=e.map.getView();return this.lastCentroid=null,a.getAnimating()&&a.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class DragRotate extends PointerInteraction{constructor(e){e=e||{},super({stopDown:FALSE}),this.condition_=e.condition?e.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mouseOnly(e))return;const s=e.map,a=s.getView();if(a.getConstraints().rotation===disable)return;const d=s.getSize(),b=e.pixel,_=Math.atan2(d[1]/2-b[1],b[0]-d[0]/2);if(this.lastAngle_!==void 0){const _e=_-this.lastAngle_;a.adjustRotationInternal(-_e)}this.lastAngle_=_}handleUpEvent(e){return mouseOnly(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mouseOnly(e)&&mouseActionButton(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class RenderBox extends Disposable{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,s=this.endPixel_,a="px",d=this.element_.style;d.left=Math.min(e[0],s[0])+a,d.top=Math.min(e[1],s[1])+a,d.width=Math.abs(s[0]-e[0])+a,d.height=Math.abs(s[1]-e[1])+a}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const s=this.element_.style;s.left="inherit",s.top="inherit",s.width="inherit",s.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,s){this.startPixel_=e,this.endPixel_=s,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,s=this.endPixel_,d=[e,[e[0],s[1]],s,[s[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);d[4]=d[0].slice(),this.geometry_?this.geometry_.setCoordinates([d]):this.geometry_=new Polygon([d])}getGeometry(){return this.geometry_}}const DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(e,s,a){super(e),this.coordinate=s,this.mapBrowserEvent=a}}class DragBox extends PointerInteraction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new RenderBox(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:mouseActionButton,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,s,a){const d=a[0]-s[0],b=a[1]-s[1];return d*d+b*b>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const s=this.boxEndCondition_(e,this.startPixel_,e.pixel);return s&&this.onBoxEnd(e),this.dispatchEvent(new DragBoxEvent(s?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}class DragZoom extends DragBox{constructor(e){e=e||{};const s=e.condition?e.condition:shiftKeyOnly;super({condition:s,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const a=this.getMap().getView();let d=this.getGeometry();if(this.out_){const b=a.rotatedExtentForGeometry(d),_=a.getResolutionForExtentInternal(b),_e=a.getResolution()/_;d=d.clone(),d.scale(_e*_e)}a.fitInternal(d,{duration:this.duration_,easing:easeOut})}}const Key={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KeyboardPan extends Interaction{constructor(e){super(),e=e||{},this.defaultCondition_=function(s){return noModifierKeys(s)&&targetNotEditable(s)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let s=!1;if(e.type==EventType.KEYDOWN){const a=e.originalEvent,d=a.key;if(this.condition_(e)&&(d==Key.DOWN||d==Key.LEFT||d==Key.RIGHT||d==Key.UP)){const _=e.map.getView(),_e=_.getResolution()*this.pixelDelta_;let ot=0,st=0;d==Key.DOWN?st=-_e:d==Key.LEFT?ot=-_e:d==Key.RIGHT?ot=_e:st=_e;const ct=[ot,st];rotate$1(ct,_.getRotation()),pan(_,ct,this.duration_),a.preventDefault(),s=!0}}return!s}}class KeyboardZoom extends Interaction{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(s){return!platformModifierKey(s)&&targetNotEditable(s)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let s=!1;if(e.type==EventType.KEYDOWN||e.type==EventType.KEYPRESS){const a=e.originalEvent,d=a.key;if(this.condition_(e)&&(d==="+"||d==="-")){const b=e.map,_=d==="+"?this.delta_:-this.delta_,_e=b.getView();zoomByDelta(_e,_,void 0,this.duration_),a.preventDefault(),s=!0}}return!s}}class MouseWheelZoom extends Interaction{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const s=e.condition?e.condition:always;this.condition_=e.onFocusOnly?all(focusWithTabindex,s):s,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==EventType.WHEEL)return!0;const a=e.map,d=e.originalEvent;d.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let b;if(e.type==EventType.WHEEL&&(b=d.deltaY,FIREFOX&&d.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(b/=DEVICE_PIXEL_RATIO),d.deltaMode===WheelEvent.DOM_DELTA_LINE&&(b*=40)),b===0)return!1;this.lastDelta_=b;const _=Date.now();this.startTime_===void 0&&(this.startTime_=_),(!this.mode_||_-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(b)<4?"trackpad":"wheel");const _e=a.getView();if(this.mode_==="trackpad"&&!(_e.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(_e.getAnimating()&&_e.cancelAnimations(),_e.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),_e.adjustZoom(-b/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=_,!1;this.totalDelta_+=b;const ot=Math.max(this.timeout_-(_-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,a),ot),!1}handleWheelZoom_(e){const s=e.getView();s.getAnimating()&&s.cancelAnimations();let a=-clamp(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(s.getConstrainResolution()||this.constrainResolution_)&&(a=a?a>0?1:-1:0),zoomByDelta(s,a,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class PinchRotate extends PointerInteraction{constructor(e){e=e||{};const s=e;s.stopDown||(s.stopDown=FALSE),super(s),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let s=0;const a=this.targetPointers[0],d=this.targetPointers[1],b=Math.atan2(d.clientY-a.clientY,d.clientX-a.clientX);if(this.lastAngle_!==void 0){const ot=b-this.lastAngle_;this.rotationDelta_+=ot,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),s=ot}this.lastAngle_=b;const _=e.map,_e=_.getView();_e.getConstraints().rotation!==disable&&(this.anchor_=_.getCoordinateFromPixelInternal(_.getEventPixel(centroid(this.targetPointers))),this.rotating_&&(_.render(),_e.adjustRotationInternal(s,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const s=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||s.getView().beginInteraction(),!0}return!1}}class PinchZoom extends PointerInteraction{constructor(e){e=e||{};const s=e;s.stopDown||(s.stopDown=FALSE),super(s),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let s=1;const a=this.targetPointers[0],d=this.targetPointers[1],b=a.clientX-d.clientX,_=a.clientY-d.clientY,_e=Math.sqrt(b*b+_*_);this.lastDistance_!==void 0&&(s=this.lastDistance_/_e),this.lastDistance_=_e;const ot=e.map,st=ot.getView();s!=1&&(this.lastScaleDelta_=s),this.anchor_=ot.getCoordinateFromPixelInternal(ot.getEventPixel(centroid(this.targetPointers))),ot.render(),st.adjustResolutionInternal(s,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const a=e.map.getView(),d=this.lastScaleDelta_>1?1:-1;return a.endInteraction(this.duration_,d),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const s=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||s.getView().beginInteraction(),!0}return!1}}function defaults$2(o){o=o||{};const e=new Collection,s=new Kinetic(-.005,.05,100);return(o.altShiftDragRotate!==void 0?o.altShiftDragRotate:!0)&&e.push(new DragRotate),(o.doubleClickZoom!==void 0?o.doubleClickZoom:!0)&&e.push(new DoubleClickZoom({delta:o.zoomDelta,duration:o.zoomDuration})),(o.dragPan!==void 0?o.dragPan:!0)&&e.push(new DragPan({onFocusOnly:o.onFocusOnly,kinetic:s})),(o.pinchRotate!==void 0?o.pinchRotate:!0)&&e.push(new PinchRotate),(o.pinchZoom!==void 0?o.pinchZoom:!0)&&e.push(new PinchZoom({duration:o.zoomDuration})),(o.keyboard!==void 0?o.keyboard:!0)&&(e.push(new KeyboardPan),e.push(new KeyboardZoom({delta:o.zoomDelta,duration:o.zoomDuration}))),(o.mouseWheelZoom!==void 0?o.mouseWheelZoom:!0)&&e.push(new MouseWheelZoom({onFocusOnly:o.onFocusOnly,duration:o.zoomDuration})),(o.shiftDragZoom!==void 0?o.shiftDragZoom:!0)&&e.push(new DragZoom({duration:o.zoomDuration})),e}function removeLayerMapProperty(o){if(o instanceof Layer){o.setMapInternal(null);return}o instanceof LayerGroup&&o.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(o,e){if(o instanceof Layer){o.setMapInternal(e);return}if(o instanceof LayerGroup){const s=o.getLayers().getArray();for(let a=0,d=s.length;a<d;++a)setLayerMapProperty(s[a],e)}}let Map$1=class extends BaseObject{constructor(e){super(),e=e||{},this.on,this.once,this.un;const s=createOptionsInternal(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create(),this.pixelToCoordinateTransform_=create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=s.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=s.controls||defaults$3(),this.interactions=s.interactions||defaults$2({onFocusOnly:!0}),this.overlays_=s.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(s.values);const a=this;e.view&&!(e.view instanceof View)&&e.view.then(function(d){a.setView(new View(d))}),this.controls.addEventListener(CollectionEventType.ADD,d=>{d.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.REMOVE,d=>{d.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.ADD,d=>{d.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.REMOVE,d=>{d.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.ADD,d=>{this.addOverlayInternal_(d.element)}),this.overlays_.addEventListener(CollectionEventType.REMOVE,d=>{const b=d.element.getId();b!==void 0&&delete this.overlayIdIndex_[b.toString()],d.element.setMap(null)}),this.controls.forEach(d=>{d.setMap(this)}),this.interactions.forEach(d=>{d.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){setLayerMapProperty(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const s=e.getId();s!==void 0&&(this.overlayIdIndex_[s.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,s,a){if(!this.frameState_||!this.renderer_)return;const d=this.getCoordinateFromPixelInternal(e);a=a!==void 0?a:{};const b=a.hitTolerance!==void 0?a.hitTolerance:0,_=a.layerFilter!==void 0?a.layerFilter:TRUE,_e=a.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(d,this.frameState_,b,_e,s,null,_,null)}getFeaturesAtPixel(e,s){const a=[];return this.forEachFeatureAtPixel(e,function(d){a.push(d)},s),a}getAllLayers(){const e=[];function s(a){a.forEach(function(d){d instanceof LayerGroup?s(d.getLayers()):e.push(d)})}return s(this.getLayers()),e}hasFeatureAtPixel(e,s){if(!this.frameState_||!this.renderer_)return!1;const a=this.getCoordinateFromPixelInternal(e);s=s!==void 0?s:{};const d=s.layerFilter!==void 0?s.layerFilter:TRUE,b=s.hitTolerance!==void 0?s.hitTolerance:0,_=s.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(a,this.frameState_,b,_,d,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const a=this.viewport_.getBoundingClientRect(),d=this.getSize(),b=a.width/d[0],_=a.height/d[1],_e="changedTouches"in e?e.changedTouches[0]:e;return[(_e.clientX-a.left)/b,(_e.clientY-a.top)/_]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const s=this.frameState_;return s?apply$1(s.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const s=this.overlayIdIndex_[e.toString()];return s!==void 0?s:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(e){const s=this.getLayerGroup();if(e instanceof Collection){s.setLayers(e);return}const a=s.getLayers();a.clear(),a.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let s=0,a=e.length;s<a;++s){const d=e[s];if(!d.visible)continue;const b=d.layer.getRenderer();if(b&&!b.ready)return!0;const _=d.layer.getSource();if(_&&_.loading)return!0}return!1}getPixelFromCoordinate(e){const s=fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(s)}getPixelFromCoordinateInternal(e){const s=this.frameState_;return s?apply$1(s.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,s,a,d){return getTilePriority(this.frameState_,e,s,a,d)}handleBrowserEvent(e,s){s=s||e.type;const a=new MapBrowserEvent(s,this,e);this.handleMapBrowserEvent(a)}handleMapBrowserEvent(e){if(!this.frameState_)return;const s=e.originalEvent,a=s.type;if(a===PointerEventType.POINTERDOWN||a===EventType.WHEEL||a===EventType.KEYDOWN){const d=this.getOwnerDocument(),b=this.viewport_.getRootNode?this.viewport_.getRootNode():d,_=s.target;if(this.overlayContainerStopEvent_.contains(_)||!(b===d?d.documentElement:b).contains(_))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const d=this.getInteractions().getArray().slice();for(let b=d.length-1;b>=0;b--){const _=d[b];if(_.getMap()!==this||!_.getActive()||!this.getTargetElement())continue;if(!_.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,s=this.tileQueue_;if(!s.isEmpty()){let d=this.maxTilesLoading_,b=d;if(e){const _=e.viewHints;if(_[ViewHint.ANIMATING]||_[ViewHint.INTERACTING]){const _e=Date.now()-e.time>8;d=_e?0:8,b=_e?0:2}}s.getTilesLoading()<d&&(s.reprioritize(),s.loadMoreTiles(d,b))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(RenderEventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent(MapEventType.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent(MapEventType.LOADSTART,this,e))));const a=this.postRenderFunctions_;for(let d=0,b=a.length;d<b;++d)a[d](this,e);a.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let a=0,d=this.targetChangeHandlerKeys_.length;a<d;++a)unlistenByKey(this.targetChangeHandlerKeys_[a]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,removeNode(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const a=this.targetElement_.getRootNode();a instanceof ShadowRoot&&this.resizeObserver_.unobserve(a.host),this.setSize(void 0)}const e=this.getTarget(),s=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=s,!s)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{s.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler(this,this.moveTolerance_);for(const b in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[b],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);const a=this.keyboardEventTarget_?this.keyboardEventTarget_:s;this.targetChangeHandlerKeys_=[listen(a,EventType.KEYDOWN,this.handleBrowserEvent,this),listen(a,EventType.KEYPRESS,this.handleBrowserEvent,this)];const d=s.getRootNode();d instanceof ShadowRoot&&this.resizeObserver_.observe(d.host),this.resizeObserver_.observe(s)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=listen(e,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(e,EventType.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[listen(e,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(e,EventType.CHANGE,this.render,this),listen(e,"addlayer",this.handleLayerAdd_,this),listen(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let s=0,a=e.length;s<a;++s){const d=e[s].layer;d.hasRenderer()&&d.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){removeLayerMapProperty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const s=this.getSize(),a=this.getView(),d=this.frameState_;let b=null;if(s!==void 0&&hasArea(s)&&a&&a.isDef()){const _=a.getHints(this.frameState_?this.frameState_.viewHints:void 0),_e=a.getState();if(b={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:getForViewAndSize(_e.center,_e.resolution,_e.rotation,s),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:s,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:_e,viewHints:_,wantedTiles:{},mapId:getUid(this),renderTargets:{}},_e.nextCenter&&_e.nextResolution){const ot=isNaN(_e.nextRotation)?_e.rotation:_e.nextRotation;b.nextExtent=getForViewAndSize(_e.nextCenter,_e.nextResolution,ot,s)}}this.frameState_=b,this.renderer_.renderFrame(b),b&&(b.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,b.postRenderFunctions),d&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(b.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent(MapEventType.MOVESTART,this,d)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!b.viewHints[ViewHint.ANIMATING]&&!b.viewHints[ViewHint.INTERACTING]&&!equals$1(b.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent(MapEventType.MOVEEND,this,b)),clone$1(b.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER,this,b)),this.renderComplete_=this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(RenderEventType.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const s=this.getLayerGroup();s&&this.handleLayerRemove_(new GroupEvent("removelayer",s)),this.set(MapProperty.LAYERGROUP,e)}setSize(e){this.set(MapProperty.SIZE,e)}setTarget(e){this.set(MapProperty.TARGET,e)}setView(e){if(!e||e instanceof View){this.set(MapProperty.VIEW,e);return}this.set(MapProperty.VIEW,new View);const s=this;e.then(function(a){s.setView(new View(a))})}updateSize(){const e=this.getTargetElement();let s;if(e){const d=getComputedStyle(e),b=e.offsetWidth-parseFloat(d.borderLeftWidth)-parseFloat(d.paddingLeft)-parseFloat(d.paddingRight)-parseFloat(d.borderRightWidth),_=e.offsetHeight-parseFloat(d.borderTopWidth)-parseFloat(d.paddingTop)-parseFloat(d.paddingBottom)-parseFloat(d.borderBottomWidth);!isNaN(b)&&!isNaN(_)&&(s=[b,_],!hasArea(s)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&warn$1("No map visible because the map container's width or height are 0."))}const a=this.getSize();s&&(!a||!equals$2(s,a))&&(this.setSize(s),this.updateViewportSize_(s))}updateViewportSize_(e){const s=this.getView();s&&s.setViewportSize(e)}};function createOptionsInternal(o){let e=null;o.keyboardEventTarget!==void 0&&(e=typeof o.keyboardEventTarget=="string"?document.getElementById(o.keyboardEventTarget):o.keyboardEventTarget);const s={},a=o.layers&&typeof o.layers.getLayers=="function"?o.layers:new LayerGroup({layers:o.layers});s[MapProperty.LAYERGROUP]=a,s[MapProperty.TARGET]=o.target,s[MapProperty.VIEW]=o.view instanceof View?o.view:new View;let d;o.controls!==void 0&&(Array.isArray(o.controls)?d=new Collection(o.controls.slice()):(assert(typeof o.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),d=o.controls));let b;o.interactions!==void 0&&(Array.isArray(o.interactions)?b=new Collection(o.interactions.slice()):(assert(typeof o.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),b=o.interactions));let _;return o.overlays!==void 0?Array.isArray(o.overlays)?_=new Collection(o.overlays.slice()):(assert(typeof o.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),_=o.overlays):_=new Collection,{controls:d,interactions:b,keyboardEventTarget:e,overlays:_,values:s}}const Property={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Overlay extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property.ELEMENT,this.handleElementChanged),this.addChangeListener(Property.MAP,this.handleMapChanged),this.addChangeListener(Property.OFFSET,this.handleOffsetChanged),this.addChangeListener(Property.POSITION,this.handlePositionChanged),this.addChangeListener(Property.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Property.ELEMENT)}getId(){return this.id}getMap(){return this.get(Property.MAP)||null}getOffset(){return this.get(Property.OFFSET)}getPosition(){return this.get(Property.POSITION)}getPositioning(){return this.get(Property.POSITIONING)}handleElementChanged(){removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(removeNode(this.element),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=listen(e,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();const s=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?s.insertBefore(this.element,s.childNodes[0]||null):s.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Property.ELEMENT,e)}setMap(e){this.set(Property.MAP,e)}setOffset(e){this.set(Property.OFFSET,e)}setPosition(e){this.set(Property.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const s=this.getMap();if(!s||!s.getTargetElement()||!this.get(Property.POSITION))return;const a=this.getRect(s.getTargetElement(),s.getSize()),d=this.getElement(),b=this.getRect(d,[outerWidth(d),outerHeight(d)]);e=e||{};const _=e.margin===void 0?20:e.margin;if(!containsExtent(a,b)){const _e=b[0]-a[0],ot=a[2]-b[2],st=b[1]-a[1],ct=a[3]-b[3],ft=[0,0];if(_e<0?ft[0]=_e-_:ot<0&&(ft[0]=Math.abs(ot)+_),st<0?ft[1]=st-_:ct<0&&(ft[1]=Math.abs(ct)+_),ft[0]!==0||ft[1]!==0){const mt=s.getView().getCenterInternal(),bt=s.getPixelFromCoordinateInternal(mt);if(!bt)return;const wt=[bt[0]+ft[0],bt[1]+ft[1]],Ct=e.animation||{};s.getView().animateInternal({center:s.getCoordinateFromPixelInternal(wt),duration:Ct.duration,easing:Ct.easing})}}}getRect(e,s){const a=e.getBoundingClientRect(),d=a.left+window.pageXOffset,b=a.top+window.pageYOffset;return[d,b,d+s[0],b+s[1]]}setPositioning(e){this.set(Property.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),s=this.getPosition();if(!e||!e.isRendered()||!s){this.setVisible(!1);return}const a=e.getPixelFromCoordinate(s),d=e.getSize();this.updateRenderedPosition(a,d)}updateRenderedPosition(e,s){const a=this.element.style,d=this.getOffset(),b=this.getPositioning();this.setVisible(!0);const _=Math.round(e[0]+d[0])+"px",_e=Math.round(e[1]+d[1])+"px";let ot="0%",st="0%";b=="bottom-right"||b=="center-right"||b=="top-right"?ot="-100%":(b=="bottom-center"||b=="center-center"||b=="top-center")&&(ot="-50%"),b=="bottom-left"||b=="bottom-center"||b=="bottom-right"?st="-100%":(b=="center-left"||b=="center-center"||b=="center-right")&&(st="-50%");const ct=`translate(${ot}, ${st}) translate(${_}, ${_e})`;this.rendered.transform_!=ct&&(this.rendered.transform_=ct,a.transform=ct)}getOptions(){return this.options}}class JSONFeature extends FeatureFormat{constructor(){super()}getType(){return"json"}readFeature(e,s){return this.readFeatureFromObject(getObject(e),this.getReadOptions(e,s))}readFeatures(e,s){return this.readFeaturesFromObject(getObject(e),this.getReadOptions(e,s))}readFeatureFromObject(e,s){return abstract()}readFeaturesFromObject(e,s){return abstract()}readGeometry(e,s){return this.readGeometryFromObject(getObject(e),this.getReadOptions(e,s))}readGeometryFromObject(e,s){return abstract()}readProjection(e){return this.readProjectionFromObject(getObject(e))}readProjectionFromObject(e){return abstract()}writeFeature(e,s){return JSON.stringify(this.writeFeatureObject(e,s))}writeFeatureObject(e,s){return abstract()}writeFeatures(e,s){return JSON.stringify(this.writeFeaturesObject(e,s))}writeFeaturesObject(e,s){return abstract()}writeGeometry(e,s){return JSON.stringify(this.writeGeometryObject(e,s))}writeGeometryObject(e,s){return abstract()}}function getObject(o){if(typeof o=="string"){const e=JSON.parse(o);return e||null}return o!==null?o:null}class GeoJSON extends JSONFeature{constructor(e){e=e||{},super(),this.dataProjection=get$3(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=get$3(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,s){let a=null;e.type==="Feature"?a=e:a={type:"Feature",geometry:e,properties:null};const d=readGeometryInternal(a.geometry);if(this.featureClass===RenderFeature)return createRenderFeature({geometry:d,id:a.id,properties:a.properties},s);const b=new Feature;return this.geometryName_?b.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in a!==void 0&&b.setGeometryName(a.geometry_name),b.setGeometry(createGeometry(d,s)),"id"in a&&b.setId(a.id),a.properties&&b.setProperties(a.properties,!0),b}readFeaturesFromObject(e,s){const a=e;let d=null;if(a.type==="FeatureCollection"){const b=e;d=[];const _=b.features;for(let _e=0,ot=_.length;_e<ot;++_e){const st=this.readFeatureFromObject(_[_e],s);st&&d.push(st)}}else d=[this.readFeatureFromObject(e,s)];return d.flat()}readGeometryFromObject(e,s){return readGeometry(e,s)}readProjectionFromObject(e){const s=e.crs;let a;if(s)if(s.type=="name")a=get$3(s.properties.name);else if(s.type==="EPSG")a=get$3("EPSG:"+s.properties.code);else throw new Error("Unknown SRS type");else a=this.dataProjection;return a}writeFeatureObject(e,s){s=this.adaptOptions(s);const a={type:"Feature",geometry:null,properties:null},d=e.getId();if(d!==void 0&&(a.id=d),!e.hasProperties())return a;const b=e.getProperties(),_=e.getGeometry();return _&&(a.geometry=writeGeometry(_,s),delete b[e.getGeometryName()]),isEmpty$1(b)||(a.properties=b),a}writeFeaturesObject(e,s){s=this.adaptOptions(s);const a=[];for(let d=0,b=e.length;d<b;++d)a.push(this.writeFeatureObject(e[d],s));return{type:"FeatureCollection",features:a}}writeGeometryObject(e,s){return writeGeometry(e,this.adaptOptions(s))}}function readGeometryInternal(o,e){if(!o)return null;let s;switch(o.type){case"Point":{s=readPointGeometry(o);break}case"LineString":{s=readLineStringGeometry(o);break}case"Polygon":{s=readPolygonGeometry(o);break}case"MultiPoint":{s=readMultiPointGeometry(o);break}case"MultiLineString":{s=readMultiLineStringGeometry(o);break}case"MultiPolygon":{s=readMultiPolygonGeometry(o);break}case"GeometryCollection":{s=readGeometryCollectionGeometry(o);break}default:throw new Error("Unsupported GeoJSON type: "+o.type)}return s}function readGeometry(o,e){const s=readGeometryInternal(o);return createGeometry(s,e)}function readGeometryCollectionGeometry(o,e){return o.geometries.map(function(a){return readGeometryInternal(a)})}function readPointGeometry(o){const e=o.coordinates;return{type:"Point",flatCoordinates:e,layout:getLayoutForStride(e.length)}}function readLineStringGeometry(o){const e=o.coordinates,s=e.flat();return{type:"LineString",flatCoordinates:s,ends:[s.length],layout:getLayoutForStride(e[0].length)}}function readMultiLineStringGeometry(o){const e=o.coordinates,s=e[0][0].length,a=[],d=deflateCoordinatesArray(a,0,e,s);return{type:"MultiLineString",flatCoordinates:a,ends:d,layout:getLayoutForStride(s)}}function readMultiPointGeometry(o){const e=o.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:getLayoutForStride(e[0].length)}}function readMultiPolygonGeometry(o){const e=o.coordinates,s=[],a=e[0][0][0].length,d=deflateMultiCoordinatesArray(s,0,e,a);return{type:"MultiPolygon",flatCoordinates:s,ends:d,layout:getLayoutForStride(a)}}function readPolygonGeometry(o){const e=o.coordinates,s=[],a=e[0][0].length,d=deflateCoordinatesArray(s,0,e,a);return{type:"Polygon",flatCoordinates:s,ends:d,layout:getLayoutForStride(a)}}function writeGeometry(o,e){o=transformGeometryWithOptions(o,!0,e);const s=o.getType();let a;switch(s){case"Point":{a=writePointGeometry(o);break}case"LineString":{a=writeLineStringGeometry(o);break}case"Polygon":{a=writePolygonGeometry(o,e);break}case"MultiPoint":{a=writeMultiPointGeometry(o);break}case"MultiLineString":{a=writeMultiLineStringGeometry(o);break}case"MultiPolygon":{a=writeMultiPolygonGeometry(o,e);break}case"GeometryCollection":{a=writeGeometryCollectionGeometry(o,e);break}case"Circle":{a={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+s)}return a}function writeGeometryCollectionGeometry(o,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:o.getGeometriesArray().map(function(a){return writeGeometry(a,e)})}}function writeLineStringGeometry(o,e){return{type:"LineString",coordinates:o.getCoordinates()}}function writeMultiLineStringGeometry(o,e){return{type:"MultiLineString",coordinates:o.getCoordinates()}}function writeMultiPointGeometry(o,e){return{type:"MultiPoint",coordinates:o.getCoordinates()}}function writeMultiPolygonGeometry(o,e){let s;return e&&(s=e.rightHanded),{type:"MultiPolygon",coordinates:o.getCoordinates(s)}}function writePointGeometry(o,e){return{type:"Point",coordinates:o.getCoordinates()}}function writePolygonGeometry(o,e){let s;return e&&(s=e.rightHanded),{type:"Polygon",coordinates:o.getCoordinates(s)}}function getDefaultExportFromCjs$1(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var csscolorparser={},parseCSSColor_1,kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clamp_css_byte(o){return o=Math.round(o),o<0?0:o>255?255:o}function clamp_css_float(o){return o<0?0:o>1?1:o}function parse_css_int(o){return o[o.length-1]==="%"?clamp_css_byte(parseFloat(o)/100*255):clamp_css_byte(parseInt(o))}function parse_css_float(o){return o[o.length-1]==="%"?clamp_css_float(parseFloat(o)/100):clamp_css_float(parseFloat(o))}function css_hue_to_rgb(o,e,s){return s<0?s+=1:s>1&&(s-=1),s*6<1?o+(e-o)*s*6:s*2<1?e:s*3<2?o+(e-o)*(2/3-s)*6:o}function parseCSSColor(o){var e=o.replace(/ /g,"").toLowerCase();if(e in kCSSColorTable)return kCSSColorTable[e].slice();if(e[0]==="#"){if(e.length===4){var s=parseInt(e.substr(1),16);return s>=0&&s<=4095?[(s&3840)>>4|(s&3840)>>8,s&240|(s&240)>>4,s&15|(s&15)<<4,1]:null}else if(e.length===7){var s=parseInt(e.substr(1),16);return s>=0&&s<=16777215?[(s&16711680)>>16,(s&65280)>>8,s&255,1]:null}return null}var a=e.indexOf("("),d=e.indexOf(")");if(a!==-1&&d+1===e.length){var b=e.substr(0,a),_=e.substr(a+1,d-(a+1)).split(","),_e=1;switch(b){case"rgba":if(_.length!==4)return null;_e=parse_css_float(_.pop());case"rgb":return _.length!==3?null:[parse_css_int(_[0]),parse_css_int(_[1]),parse_css_int(_[2]),_e];case"hsla":if(_.length!==4)return null;_e=parse_css_float(_.pop());case"hsl":if(_.length!==3)return null;var ot=(parseFloat(_[0])%360+360)%360/360,st=parse_css_float(_[1]),ct=parse_css_float(_[2]),ft=ct<=.5?ct*(st+1):ct+st-ct*st,mt=ct*2-ft;return[clamp_css_byte(css_hue_to_rgb(mt,ft,ot+1/3)*255),clamp_css_byte(css_hue_to_rgb(mt,ft,ot)*255),clamp_css_byte(css_hue_to_rgb(mt,ft,ot-1/3)*255),_e];default:return null}}return null}try{parseCSSColor_1=csscolorparser.parseCSSColor=parseCSSColor}catch{}let Color$1=class fie{constructor(e,s,a,d=1){this.r=e,this.g=s,this.b=a,this.a=d}static parse(e){if(!e)return;if(e instanceof fie)return e;if(typeof e!="string")return;const s=parseCSSColor_1(e);if(s)return new fie(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3])}toString(){const[e,s,a,d]=this.toArray();return`rgba(${Math.round(e)},${Math.round(s)},${Math.round(a)},${d})`}toArray(){const{r:e,g:s,b:a,a:d}=this;return d===0?[0,0,0,0]:[e*255/d,s*255/d,a*255/d,d]}toArray01(){const{r:e,g:s,b:a,a:d}=this;return d===0?[0,0,0,0]:[e/d,s/d,a/d,d]}toArray01PremultipliedAlpha(){const{r:e,g:s,b:a,a:d}=this;return[e,s,a,d]}};Color$1.black=new Color$1(0,0,0,1);Color$1.white=new Color$1(1,1,1,1);Color$1.transparent=new Color$1(0,0,0,0);Color$1.red=new Color$1(1,0,0,1);Color$1.blue=new Color$1(0,0,1,1);var Color$1$1=Color$1;function convertLiteral(o){return typeof o=="object"?["literal",o]:o}function convertFunction(o,e){let s=o.stops;if(!s)return convertIdentityFunction(o,e);const a=s&&typeof s[0][0]=="object",d=a||o.property!==void 0,b=a||!d;return s=s.map(_=>!d&&e.tokens&&typeof _[1]=="string"?[_[0],convertTokenString(_[1])]:[_[0],convertLiteral(_[1])]),a?convertZoomAndPropertyFunction(o,e,s):b?convertZoomFunction(o,e,s):convertPropertyFunction(o,e,s)}function convertIdentityFunction(o,e){const s=["get",o.property];if(o.default===void 0)return e.type==="string"?["string",s]:s;if(e.type==="enum")return["match",s,Object.keys(e.values),s,o.default];{const a=[e.type==="color"?"to-color":e.type,s,convertLiteral(o.default)];return e.type==="array"&&a.splice(1,0,e.value,e.length||null),a}}function getInterpolateOperator(o){switch(o.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function convertZoomAndPropertyFunction(o,e,s){const a={},d={},b=[];for(let _e=0;_e<s.length;_e++){const ot=s[_e],st=ot[0].zoom;a[st]===void 0&&(a[st]={zoom:st,type:o.type,property:o.property,default:o.default},d[st]=[],b.push(st)),d[st].push([ot[0].value,ot[1]])}if(getFunctionType({},e)==="exponential"){const _e=[getInterpolateOperator(o),["linear"],["zoom"]];for(const ot of b){const st=convertPropertyFunction(a[ot],e,d[ot]);appendStopPair(_e,ot,st,!1)}return _e}else{const _e=["step",["zoom"]];for(const ot of b){const st=convertPropertyFunction(a[ot],e,d[ot]);appendStopPair(_e,ot,st,!0)}return fixupDegenerateStepCurve(_e),_e}}function coalesce(o,e){if(o!==void 0)return o;if(e!==void 0)return e}function getFallback(o,e){const s=convertLiteral(coalesce(o.default,e.default));return s===void 0&&e.type==="resolvedImage"?"":s}function convertPropertyFunction(o,e,s){const a=getFunctionType(o,e),d=["get",o.property];if(a==="categorical"&&typeof s[0][0]=="boolean"){const b=["case"];for(const _ of s)b.push(["==",d,_[0]],_[1]);return b.push(getFallback(o,e)),b}else if(a==="categorical"){const b=["match",d];for(const _ of s)appendStopPair(b,_[0],_[1],!1);return b.push(getFallback(o,e)),b}else if(a==="interval"){const b=["step",["number",d]];for(const _ of s)appendStopPair(b,_[0],_[1],!0);return fixupDegenerateStepCurve(b),o.default===void 0?b:["case",["==",["typeof",d],"number"],b,convertLiteral(o.default)]}else if(a==="exponential"){const b=o.base!==void 0?o.base:1,_=[getInterpolateOperator(o),b===1?["linear"]:["exponential",b],["number",d]];for(const _e of s)appendStopPair(_,_e[0],_e[1],!1);return o.default===void 0?_:["case",["==",["typeof",d],"number"],_,convertLiteral(o.default)]}else throw new Error(`Unknown property function type ${a}`)}function convertZoomFunction(o,e,s,a=["zoom"]){const d=getFunctionType(o,e);let b,_=!1;if(d==="interval")b=["step",a],_=!0;else if(d==="exponential"){const _e=o.base!==void 0?o.base:1;b=[getInterpolateOperator(o),_e===1?["linear"]:["exponential",_e],a]}else throw new Error(`Unknown zoom function type "${d}"`);for(const _e of s)appendStopPair(b,_e[0],_e[1],_);return fixupDegenerateStepCurve(b),b}function fixupDegenerateStepCurve(o){o[0]==="step"&&o.length===3&&(o.push(0),o.push(o[3]))}function appendStopPair(o,e,s,a){o.length>3&&e===o[o.length-2]||(a&&o.length===2||o.push(e),o.push(s))}function getFunctionType(o,e){return o.type?o.type:e.expression.interpolated?"exponential":"interval"}function convertTokenString(o){const e=["concat"],s=/{([^{}]+)}/g;let a=0;for(let d=s.exec(o);d!==null;d=s.exec(o)){const b=o.slice(a,s.lastIndex-d[0].length);a=s.lastIndex,b.length>0&&e.push(b),e.push(["get",d[1]])}if(e.length===1)return o;if(a<o.length)e.push(o.slice(a));else if(e.length===2)return["to-string",e[1]];return e}class ParsingError extends Error{constructor(e,s){super(s),this.message=s,this.key=e}}var ParsingError$1=ParsingError;class Scope{constructor(e,s=[]){this.parent=e,this.bindings={};for(const[a,d]of s)this.bindings[a]=d}concat(e){return new Scope(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var Scope$1=Scope;const NullType={kind:"null"},NumberType={kind:"number"},StringType={kind:"string"},BooleanType={kind:"boolean"},ColorType={kind:"color"},ObjectType={kind:"object"},ValueType={kind:"value"},ErrorType={kind:"error"},CollatorType={kind:"collator"},FormattedType={kind:"formatted"},ResolvedImageType={kind:"resolvedImage"};function array$1(o,e){return{kind:"array",itemType:o,N:e}}function toString$1(o){if(o.kind==="array"){const e=toString$1(o.itemType);return typeof o.N=="number"?`array<${e}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${e}>`}else return o.kind}const valueMemberTypes=[NullType,NumberType,StringType,BooleanType,ColorType,FormattedType,ObjectType,array$1(ValueType),ResolvedImageType];function checkSubtype(o,e){if(e.kind==="error")return null;if(o.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!checkSubtype(o.itemType,e.itemType))&&(typeof o.N!="number"||o.N===e.N))return null}else{if(o.kind===e.kind)return null;if(o.kind==="value"){for(const s of valueMemberTypes)if(!checkSubtype(s,e))return null}}return`Expected ${toString$1(o)} but found ${toString$1(e)} instead.`}function isValidType(o,e){return e.some(s=>s.kind===o.kind)}function isValidNativeType(o,e){return e.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}class Collator{constructor(e,s,a){e?this.sensitivity=s?"variant":"case":this.sensitivity=s?"accent":"base",this.locale=a,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,s){return this.collator.compare(e,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class FormattedSection{constructor(e,s,a,d,b){this.text=e.normalize?e.normalize():e,this.image=s,this.scale=a,this.fontStack=d,this.textColor=b}}class Formatted{constructor(e){this.sections=e}static fromString(e){return new Formatted([new FormattedSection(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Formatted?e:Formatted.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const s of this.sections){if(s.image){e.push(["image",s.image.name]);continue}e.push(s.text);const a={};s.fontStack&&(a["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(a["font-scale"]=s.scale),s.textColor&&(a["text-color"]=["rgba"].concat(s.textColor.toArray())),e.push(a)}return e}}class ResolvedImage{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ResolvedImage({name:e,available:!1}):null}serialize(){return["image",this.name]}}function validateRGBA(o,e,s,a){return typeof o=="number"&&o>=0&&o<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof s=="number"&&s>=0&&s<=255?typeof a>"u"||typeof a=="number"&&a>=0&&a<=1?null:`Invalid rgba value [${[o,e,s,a].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof a=="number"?[o,e,s,a]:[o,e,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function isValue(o){if(o===null)return!0;if(typeof o=="string")return!0;if(typeof o=="boolean")return!0;if(typeof o=="number")return!0;if(o instanceof Color$1$1)return!0;if(o instanceof Collator)return!0;if(o instanceof Formatted)return!0;if(o instanceof ResolvedImage)return!0;if(Array.isArray(o)){for(const e of o)if(!isValue(e))return!1;return!0}else if(typeof o=="object"){for(const e in o)if(!isValue(o[e]))return!1;return!0}else return!1}function typeOf(o){if(o===null)return NullType;if(typeof o=="string")return StringType;if(typeof o=="boolean")return BooleanType;if(typeof o=="number")return NumberType;if(o instanceof Color$1$1)return ColorType;if(o instanceof Collator)return CollatorType;if(o instanceof Formatted)return FormattedType;if(o instanceof ResolvedImage)return ResolvedImageType;if(Array.isArray(o)){const e=o.length;let s;for(const a of o){const d=typeOf(a);if(!s)s=d;else{if(s===d)continue;s=ValueType;break}}return array$1(s||ValueType,e)}else return ObjectType}function toString(o){const e=typeof o;return o===null?"":e==="string"||e==="number"||e==="boolean"?String(o):o instanceof Color$1$1||o instanceof Formatted||o instanceof ResolvedImage?o.toString():JSON.stringify(o)}class Literal{constructor(e,s){this.type=e,this.value=s}static parse(e,s){if(e.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!isValue(e[1]))return s.error("invalid value");const a=e[1];let d=typeOf(a);const b=s.expectedType;return d.kind==="array"&&d.N===0&&b&&b.kind==="array"&&(typeof b.N!="number"||b.N===0)&&(d=b),new Literal(d,a)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Color$1$1?["rgba"].concat(this.value.toArray()):this.value instanceof Formatted?this.value.serialize():this.value}}var Literal$1=Literal;class RuntimeError{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var RuntimeError$1=RuntimeError;const types$2={string:StringType,number:NumberType,boolean:BooleanType,object:ObjectType};class Assertion{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");let a=1,d;const b=e[0];if(b==="array"){let _e;if(e.length>2){const st=e[1];if(typeof st!="string"||!(st in types$2)||st==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);_e=types$2[st],a++}else _e=ValueType;let ot;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return s.error('The length argument to "array" must be a positive integer literal',2);ot=e[2],a++}d=array$1(_e,ot)}else d=types$2[b];const _=[];for(;a<e.length;a++){const _e=s.parse(e[a],a,ValueType);if(!_e)return null;_.push(_e)}return new Assertion(d,_)}evaluate(e){for(let s=0;s<this.args.length;s++){const a=this.args[s].evaluate(e);if(checkSubtype(this.type,typeOf(a))){if(s===this.args.length-1)throw new RuntimeError$1(`Expected value to be of type ${toString$1(this.type)}, but found ${toString$1(typeOf(a))} instead.`)}else return a}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,s=[e.kind];if(e.kind==="array"){const a=e.itemType;if(a.kind==="string"||a.kind==="number"||a.kind==="boolean"){s.push(a.kind);const d=e.N;(typeof d=="number"||this.args.length>1)&&s.push(d)}}return s.concat(this.args.map(a=>a.serialize()))}}var Assertion$1=Assertion;class FormatExpression{constructor(e){this.type=FormattedType,this.sections=e}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");const a=e[1];if(!Array.isArray(a)&&typeof a=="object")return s.error("First argument must be an image or text section.");const d=[];let b=!1;for(let _=1;_<=e.length-1;++_){const _e=e[_];if(b&&typeof _e=="object"&&!Array.isArray(_e)){b=!1;let ot=null;if(_e["font-scale"]&&(ot=s.parse(_e["font-scale"],1,NumberType),!ot))return null;let st=null;if(_e["text-font"]&&(st=s.parse(_e["text-font"],1,array$1(StringType)),!st))return null;let ct=null;if(_e["text-color"]&&(ct=s.parse(_e["text-color"],1,ColorType),!ct))return null;const ft=d[d.length-1];ft.scale=ot,ft.font=st,ft.textColor=ct}else{const ot=s.parse(e[_],1,ValueType);if(!ot)return null;const st=ot.type.kind;if(st!=="string"&&st!=="value"&&st!=="null"&&st!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,d.push({content:ot,scale:null,font:null,textColor:null})}}return new FormatExpression(d)}evaluate(e){const s=a=>{const d=a.content.evaluate(e);return typeOf(d)===ResolvedImageType?new FormattedSection("",d,null,null,null):new FormattedSection(toString(d),null,a.scale?a.scale.evaluate(e):null,a.font?a.font.evaluate(e).join(","):null,a.textColor?a.textColor.evaluate(e):null)};return new Formatted(this.sections.map(s))}eachChild(e){for(const s of this.sections)e(s.content),s.scale&&e(s.scale),s.font&&e(s.font),s.textColor&&e(s.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const s of this.sections){e.push(s.content.serialize());const a={};s.scale&&(a["font-scale"]=s.scale.serialize()),s.font&&(a["text-font"]=s.font.serialize()),s.textColor&&(a["text-color"]=s.textColor.serialize()),e.push(a)}return e}}class ImageExpression{constructor(e){this.type=ResolvedImageType,this.input=e}static parse(e,s){if(e.length!==2)return s.error("Expected two arguments.");const a=s.parse(e[1],1,StringType);return a?new ImageExpression(a):s.error("No image name provided.")}evaluate(e){const s=this.input.evaluate(e),a=ResolvedImage.fromString(s);return a&&e.availableImages&&(a.available=e.availableImages.indexOf(s)>-1),a}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const types$1={"to-boolean":BooleanType,"to-color":ColorType,"to-number":NumberType,"to-string":StringType};class Coercion{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");const a=e[0];if((a==="to-boolean"||a==="to-string")&&e.length!==2)return s.error("Expected one argument.");const d=types$1[a],b=[];for(let _=1;_<e.length;_++){const _e=s.parse(e[_],_,ValueType);if(!_e)return null;b.push(_e)}return new Coercion(d,b)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let s,a;for(const d of this.args){if(s=d.evaluate(e),a=null,s instanceof Color$1$1)return s;if(typeof s=="string"){const b=e.parseColor(s);if(b)return b}else if(Array.isArray(s)&&(s.length<3||s.length>4?a=`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:a=validateRGBA(s[0],s[1],s[2],s[3]),!a))return new Color$1$1(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new RuntimeError$1(a||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}else if(this.type.kind==="number"){let s=null;for(const a of this.args){if(s=a.evaluate(e),s===null)return 0;const d=Number(s);if(!isNaN(d))return d}throw new RuntimeError$1(`Could not convert ${JSON.stringify(s)} to number.`)}else return this.type.kind==="formatted"?Formatted.fromString(toString(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ResolvedImage.fromString(toString(this.args[0].evaluate(e))):toString(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new FormatExpression([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ImageExpression(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(s=>{e.push(s.serialize())}),e}}var Coercion$1=Coercion;const geometryTypes=["Unknown","Point","LineString","Polygon"];class EvaluationContext{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?geometryTypes[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,s=this.featureDistanceData.scale,{x:a,y:d}=this.featureTileCoord,b=a*s-e[0],_=d*s-e[1],_e=this.featureDistanceData.bearing[0],ot=this.featureDistanceData.bearing[1];return _e*b+ot*_}return 0}parseColor(e){let s=this._parseColorCache[e];return s||(s=this._parseColorCache[e]=Color$1$1.parse(e)),s}}var EvaluationContext$1=EvaluationContext;class CompoundExpression{constructor(e,s,a,d){this.name=e,this.type=s,this._evaluate=a,this.args=d}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,s){const a=e[0],d=CompoundExpression.definitions[a];if(!d)return s.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(d)?d[0]:d.type,_=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,_e=_.filter(([st])=>!Array.isArray(st)||st.length===e.length-1);let ot=null;for(const[st,ct]of _e){ot=new ParsingContext$1(s.registry,s.path,null,s.scope);const ft=[];let mt=!1;for(let bt=1;bt<e.length;bt++){const wt=e[bt],Ct=Array.isArray(st)?st[bt-1]:st.type,Rt=ot.parse(wt,1+ft.length,Ct);if(!Rt){mt=!0;break}ft.push(Rt)}if(!mt){if(Array.isArray(st)&&st.length!==ft.length){ot.error(`Expected ${st.length} arguments, but found ${ft.length} instead.`);continue}for(let bt=0;bt<ft.length;bt++){const wt=Array.isArray(st)?st[bt]:st.type,Ct=ft[bt];ot.concat(bt+1).checkSubtype(wt,Ct.type)}if(ot.errors.length===0)return new CompoundExpression(a,b,ct,ft)}}if(_e.length===1)s.errors.push(...ot.errors);else{const ct=(_e.length?_e:_).map(([mt])=>stringifySignature(mt)).join(" | "),ft=[];for(let mt=1;mt<e.length;mt++){const bt=s.parse(e[mt],1+ft.length);if(!bt)return null;ft.push(toString$1(bt.type))}s.error(`Expected arguments of type ${ct}, but found (${ft.join(", ")}) instead.`)}return null}static register(e,s){CompoundExpression.definitions=s;for(const a in s)e[a]=CompoundExpression}}function stringifySignature(o){return Array.isArray(o)?`(${o.map(toString$1).join(", ")})`:`(${toString$1(o.type)}...)`}var CompoundExpression$1=CompoundExpression;class CollatorExpression{constructor(e,s,a){this.type=CollatorType,this.locale=a,this.caseSensitive=e,this.diacriticSensitive=s}static parse(e,s){if(e.length!==2)return s.error("Expected one argument.");const a=e[1];if(typeof a!="object"||Array.isArray(a))return s.error("Collator options argument must be an object.");const d=s.parse(a["case-sensitive"]===void 0?!1:a["case-sensitive"],1,BooleanType);if(!d)return null;const b=s.parse(a["diacritic-sensitive"]===void 0?!1:a["diacritic-sensitive"],1,BooleanType);if(!b)return null;let _=null;return a.locale&&(_=s.parse(a.locale,1,StringType),!_)?null:new CollatorExpression(d,b,_)}evaluate(e){return new Collator(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const EXTENT=8192;function updateBBox(o,e){o[0]=Math.min(o[0],e[0]),o[1]=Math.min(o[1],e[1]),o[2]=Math.max(o[2],e[0]),o[3]=Math.max(o[3],e[1])}function mercatorXfromLng(o){return(180+o)/360}function mercatorYfromLat(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function boxWithinBox(o,e){return!(o[0]<=e[0]||o[2]>=e[2]||o[1]<=e[1]||o[3]>=e[3])}function getTileCoordinates(o,e){const s=mercatorXfromLng(o[0]),a=mercatorYfromLat(o[1]),d=Math.pow(2,e.z);return[Math.round(s*d*EXTENT),Math.round(a*d*EXTENT)]}function onBoundary(o,e,s){const a=o[0]-e[0],d=o[1]-e[1],b=o[0]-s[0],_=o[1]-s[1];return a*_-b*d===0&&a*b<=0&&d*_<=0}function rayIntersect(o,e,s){return e[1]>o[1]!=s[1]>o[1]&&o[0]<(s[0]-e[0])*(o[1]-e[1])/(s[1]-e[1])+e[0]}function pointWithinPolygon(o,e){let s=!1;for(let a=0,d=e.length;a<d;a++){const b=e[a];for(let _=0,_e=b.length;_<_e-1;_++){if(onBoundary(o,b[_],b[_+1]))return!1;rayIntersect(o,b[_],b[_+1])&&(s=!s)}}return s}function pointWithinPolygons(o,e){for(let s=0;s<e.length;s++)if(pointWithinPolygon(o,e[s]))return!0;return!1}function perp(o,e){return o[0]*e[1]-o[1]*e[0]}function twoSided(o,e,s,a){const d=o[0]-s[0],b=o[1]-s[1],_=e[0]-s[0],_e=e[1]-s[1],ot=a[0]-s[0],st=a[1]-s[1],ct=d*st-ot*b,ft=_*st-ot*_e;return ct>0&&ft<0||ct<0&&ft>0}function lineIntersectLine(o,e,s,a){const d=[e[0]-o[0],e[1]-o[1]],b=[a[0]-s[0],a[1]-s[1]];return perp(b,d)===0?!1:!!(twoSided(o,e,s,a)&&twoSided(s,a,o,e))}function lineIntersectPolygon(o,e,s){for(const a of s)for(let d=0;d<a.length-1;++d)if(lineIntersectLine(o,e,a[d],a[d+1]))return!0;return!1}function lineStringWithinPolygon(o,e){for(let s=0;s<o.length;++s)if(!pointWithinPolygon(o[s],e))return!1;for(let s=0;s<o.length-1;++s)if(lineIntersectPolygon(o[s],o[s+1],e))return!1;return!0}function lineStringWithinPolygons(o,e){for(let s=0;s<e.length;s++)if(lineStringWithinPolygon(o,e[s]))return!0;return!1}function getTilePolygon(o,e,s){const a=[];for(let d=0;d<o.length;d++){const b=[];for(let _=0;_<o[d].length;_++){const _e=getTileCoordinates(o[d][_],s);updateBBox(e,_e),b.push(_e)}a.push(b)}return a}function getTilePolygons(o,e,s){const a=[];for(let d=0;d<o.length;d++){const b=getTilePolygon(o[d],e,s);a.push(b)}return a}function updatePoint(o,e,s,a){if(o[0]<s[0]||o[0]>s[2]){const d=a*.5;let b=o[0]-s[0]>d?-a:s[0]-o[0]>d?a:0;b===0&&(b=o[0]-s[2]>d?-a:s[2]-o[0]>d?a:0),o[0]+=b}updateBBox(e,o)}function resetBBox(o){o[0]=o[1]=1/0,o[2]=o[3]=-1/0}function getTilePoints(o,e,s,a){const d=Math.pow(2,a.z)*EXTENT,b=[a.x*EXTENT,a.y*EXTENT],_=[];if(!o)return _;for(const _e of o)for(const ot of _e){const st=[ot.x+b[0],ot.y+b[1]];updatePoint(st,e,s,d),_.push(st)}return _}function getTileLines(o,e,s,a){const d=Math.pow(2,a.z)*EXTENT,b=[a.x*EXTENT,a.y*EXTENT],_=[];if(!o)return _;for(const _e of o){const ot=[];for(const st of _e){const ct=[st.x+b[0],st.y+b[1]];updateBBox(e,ct),ot.push(ct)}_.push(ot)}if(e[2]-e[0]<=d/2){resetBBox(e);for(const _e of _)for(const ot of _e)updatePoint(ot,e,s,d)}return _}function pointsWithinPolygons(o,e){const s=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],d=o.canonicalID();if(!d)return!1;if(e.type==="Polygon"){const b=getTilePolygon(e.coordinates,a,d),_=getTilePoints(o.geometry(),s,a,d);if(!boxWithinBox(s,a))return!1;for(const _e of _)if(!pointWithinPolygon(_e,b))return!1}if(e.type==="MultiPolygon"){const b=getTilePolygons(e.coordinates,a,d),_=getTilePoints(o.geometry(),s,a,d);if(!boxWithinBox(s,a))return!1;for(const _e of _)if(!pointWithinPolygons(_e,b))return!1}return!0}function linesWithinPolygons(o,e){const s=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],d=o.canonicalID();if(!d)return!1;if(e.type==="Polygon"){const b=getTilePolygon(e.coordinates,a,d),_=getTileLines(o.geometry(),s,a,d);if(!boxWithinBox(s,a))return!1;for(const _e of _)if(!lineStringWithinPolygon(_e,b))return!1}if(e.type==="MultiPolygon"){const b=getTilePolygons(e.coordinates,a,d),_=getTileLines(o.geometry(),s,a,d);if(!boxWithinBox(s,a))return!1;for(const _e of _)if(!lineStringWithinPolygons(_e,b))return!1}return!0}class Within{constructor(e,s){this.type=BooleanType,this.geojson=e,this.geometries=s}static parse(e,s){if(e.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const a=e[1];if(a.type==="FeatureCollection")for(let d=0;d<a.features.length;++d){const b=a.features[d].geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new Within(a,a.features[d].geometry)}else if(a.type==="Feature"){const d=a.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Within(a,a.geometry)}else if(a.type==="Polygon"||a.type==="MultiPolygon")return new Within(a,a)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointsWithinPolygons(e,this.geometries);if(e.geometryType()==="LineString")return linesWithinPolygons(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Within$1=Within;function isFeatureConstant(o){if(o instanceof CompoundExpression$1){if(o.name==="get"&&o.args.length===1)return!1;if(o.name==="feature-state")return!1;if(o.name==="has"&&o.args.length===1)return!1;if(o.name==="properties"||o.name==="geometry-type"||o.name==="id")return!1;if(/^filter-/.test(o.name))return!1}if(o instanceof Within$1)return!1;let e=!0;return o.eachChild(s=>{e&&!isFeatureConstant(s)&&(e=!1)}),e}function isStateConstant(o){if(o instanceof CompoundExpression$1&&o.name==="feature-state")return!1;let e=!0;return o.eachChild(s=>{e&&!isStateConstant(s)&&(e=!1)}),e}function isGlobalPropertyConstant(o,e){if(o instanceof CompoundExpression$1&&e.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(a=>{s&&!isGlobalPropertyConstant(a,e)&&(s=!1)}),s}class Var{constructor(e,s){this.type=s.type,this.name=e,this.boundExpression=s}static parse(e,s){if(e.length!==2||typeof e[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const a=e[1];return s.scope.has(a)?new Var(a,s.scope.get(a)):s.error(`Unknown variable "${a}". Make sure "${a}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Var$1=Var;class ParsingContext{constructor(e,s=[],a,d=new Scope$1,b=[]){this.registry=e,this.path=s,this.key=s.map(_=>`[${_}]`).join(""),this.scope=d,this.errors=b,this.expectedType=a}parse(e,s,a,d,b={}){return s?this.concat(s,a,d)._parse(e,b):this._parse(e,b)}_parse(e,s){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function a(d,b,_){return _==="assert"?new Assertion$1(b,[d]):_==="coerce"?new Coercion$1(b,[d]):d}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=e[0];if(typeof d!="string")return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[d];if(b){let _=b.parse(e,this);if(!_)return null;if(this.expectedType){const _e=this.expectedType,ot=_.type;if((_e.kind==="string"||_e.kind==="number"||_e.kind==="boolean"||_e.kind==="object"||_e.kind==="array")&&ot.kind==="value")_=a(_,_e,s.typeAnnotation||"assert");else if((_e.kind==="color"||_e.kind==="formatted"||_e.kind==="resolvedImage")&&(ot.kind==="value"||ot.kind==="string"))_=a(_,_e,s.typeAnnotation||"coerce");else if(this.checkSubtype(_e,ot))return null}if(!(_ instanceof Literal$1)&&_.type.kind!=="resolvedImage"&&isConstant(_)){const _e=new EvaluationContext$1;try{_=new Literal$1(_.type,_.evaluate(_e))}catch(ot){return this.error(ot.message),null}}return _}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,s,a){const d=typeof e=="number"?this.path.concat(e):this.path,b=a?this.scope.concat(a):this.scope;return new ParsingContext(this.registry,d,s||null,b,this.errors)}error(e,...s){const a=`${this.key}${s.map(d=>`[${d}]`).join("")}`;this.errors.push(new ParsingError$1(a,e))}checkSubtype(e,s){const a=checkSubtype(e,s);return a&&this.error(a),a}}var ParsingContext$1=ParsingContext;function isConstant(o){if(o instanceof Var$1)return isConstant(o.boundExpression);if(o instanceof CompoundExpression$1&&o.name==="error")return!1;if(o instanceof CollatorExpression)return!1;if(o instanceof Within$1)return!1;const e=o instanceof Coercion$1||o instanceof Assertion$1;let s=!0;return o.eachChild(a=>{e?s=s&&isConstant(a):s=s&&a instanceof Literal$1}),s?isFeatureConstant(o)&&isGlobalPropertyConstant(o,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function findStopLessThanOrEqualTo(o,e){const s=o.length-1;let a=0,d=s,b=0,_,_e;for(;a<=d;)if(b=Math.floor((a+d)/2),_=o[b],_e=o[b+1],_<=e){if(b===s||e<_e)return b;a=b+1}else if(_>e)d=b-1;else throw new RuntimeError$1("Input is not a number.");return 0}let Step$1=class ale{constructor(e,s,a){this.type=e,this.input=s,this.labels=[],this.outputs=[];for(const[d,b]of a)this.labels.push(d),this.outputs.push(b)}static parse(e,s){if(e.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return s.error("Expected an even number of arguments.");const a=s.parse(e[1],1,NumberType);if(!a)return null;const d=[];let b=null;s.expectedType&&s.expectedType.kind!=="value"&&(b=s.expectedType);for(let _=1;_<e.length;_+=2){const _e=_===1?-1/0:e[_],ot=e[_+1],st=_,ct=_+1;if(typeof _e!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',st);if(d.length&&d[d.length-1][0]>=_e)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',st);const ft=s.parse(ot,ct,b);if(!ft)return null;b=b||ft.type,d.push([_e,ft])}return new ale(b,a,d)}evaluate(e){const s=this.labels,a=this.outputs;if(s.length===1)return a[0].evaluate(e);const d=this.input.evaluate(e);if(d<=s[0])return a[0].evaluate(e);const b=s.length;if(d>=s[b-1])return a[b-1].evaluate(e);const _=findStopLessThanOrEqualTo(s,d);return a[_].evaluate(e)}eachChild(e){e(this.input);for(const s of this.outputs)e(s)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&e.push(this.labels[s]),e.push(this.outputs[s].serialize());return e}};var Step$1$1=Step$1,unitbezier=UnitBezier;function UnitBezier(o,e,s,a){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(a-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=a,this.p2x=s,this.p2y=a}UnitBezier.prototype.sampleCurveX=function(o){return((this.ax*o+this.bx)*o+this.cx)*o};UnitBezier.prototype.sampleCurveY=function(o){return((this.ay*o+this.by)*o+this.cy)*o};UnitBezier.prototype.sampleCurveDerivativeX=function(o){return(3*this.ax*o+2*this.bx)*o+this.cx};UnitBezier.prototype.solveCurveX=function(o,e){typeof e>"u"&&(e=1e-6);var s,a,d,b,_;for(d=o,_=0;_<8;_++){if(b=this.sampleCurveX(d)-o,Math.abs(b)<e)return d;var _e=this.sampleCurveDerivativeX(d);if(Math.abs(_e)<1e-6)break;d=d-b/_e}if(s=0,a=1,d=o,d<s)return s;if(d>a)return a;for(;s<a;){if(b=this.sampleCurveX(d),Math.abs(b-o)<e)return d;o>b?s=d:a=d,d=(a-s)*.5+s}return d};UnitBezier.prototype.solve=function(o,e){return this.sampleCurveY(this.solveCurveX(o,e))};var UnitBezier$1=getDefaultExportFromCjs$1(unitbezier);function number(o,e,s){return o*(1-s)+e*s}function color(o,e,s){return new Color$1$1(number(o.r,e.r,s),number(o.g,e.g,s),number(o.b,e.b,s),number(o.a,e.a,s))}function array(o,e,s){return o.map((a,d)=>number(a,e[d],s))}var interpolate=Object.freeze({__proto__:null,number,color,array});const Xn=.95047,Yn=1,Zn=1.08883,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1,deg2rad$1=Math.PI/180,rad2deg=180/Math.PI;function xyz2lab(o){return o>t3?Math.pow(o,1/3):o/t2+t0}function lab2xyz(o){return o>t1?o*o*o:t2*(o-t0)}function xyz2rgb(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function rgb2xyz(o){return o/=255,o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function rgbToLab(o){const e=rgb2xyz(o.r),s=rgb2xyz(o.g),a=rgb2xyz(o.b),d=xyz2lab((.4124564*e+.3575761*s+.1804375*a)/Xn),b=xyz2lab((.2126729*e+.7151522*s+.072175*a)/Yn),_=xyz2lab((.0193339*e+.119192*s+.9503041*a)/Zn);return{l:116*b-16,a:500*(d-b),b:200*(b-_),alpha:o.a}}function labToRgb(o){let e=(o.l+16)/116,s=isNaN(o.a)?e:e+o.a/500,a=isNaN(o.b)?e:e-o.b/200;return e=Yn*lab2xyz(e),s=Xn*lab2xyz(s),a=Zn*lab2xyz(a),new Color$1$1(xyz2rgb(3.2404542*s-1.5371385*e-.4985314*a),xyz2rgb(-.969266*s+1.8760108*e+.041556*a),xyz2rgb(.0556434*s-.2040259*e+1.0572252*a),o.alpha)}function interpolateLab(o,e,s){return{l:number(o.l,e.l,s),a:number(o.a,e.a,s),b:number(o.b,e.b,s),alpha:number(o.alpha,e.alpha,s)}}function rgbToHcl(o){const{l:e,a:s,b:a}=rgbToLab(o),d=Math.atan2(a,s)*rad2deg;return{h:d<0?d+360:d,c:Math.sqrt(s*s+a*a),l:e,alpha:o.a}}function hclToRgb(o){const e=o.h*deg2rad$1,s=o.c,a=o.l;return labToRgb({l:a,a:Math.cos(e)*s,b:Math.sin(e)*s,alpha:o.alpha})}function interpolateHue(o,e,s){const a=e-o;return o+s*(a>180||a<-180?a-360*Math.round(a/360):a)}function interpolateHcl(o,e,s){return{h:interpolateHue(o.h,e.h,s),c:number(o.c,e.c,s),l:number(o.l,e.l,s),alpha:number(o.alpha,e.alpha,s)}}const lab={forward:rgbToLab,reverse:labToRgb,interpolate:interpolateLab},hcl={forward:rgbToHcl,reverse:hclToRgb,interpolate:interpolateHcl};class Interpolate{constructor(e,s,a,d,b){this.type=e,this.operator=s,this.interpolation=a,this.input=d,this.labels=[],this.outputs=[];for(const[_,_e]of b)this.labels.push(_),this.outputs.push(_e)}static interpolationFactor(e,s,a,d){let b=0;if(e.name==="exponential")b=exponentialInterpolation(s,e.base,a,d);else if(e.name==="linear")b=exponentialInterpolation(s,1,a,d);else if(e.name==="cubic-bezier"){const _=e.controlPoints;b=new UnitBezier$1(_[0],_[1],_[2],_[3]).solve(exponentialInterpolation(s,1,a,d))}return b}static parse(e,s){let[a,d,b,..._]=e;if(!Array.isArray(d)||d.length===0)return s.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const st=d[1];if(typeof st!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:st}}else if(d[0]==="cubic-bezier"){const st=d.slice(1);if(st.length!==4||st.some(ct=>typeof ct!="number"||ct<0||ct>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:st}}else return s.error(`Unknown interpolation type ${String(d[0])}`,1,0);if(e.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return s.error("Expected an even number of arguments.");if(b=s.parse(b,2,NumberType),!b)return null;const _e=[];let ot=null;a==="interpolate-hcl"||a==="interpolate-lab"?ot=ColorType:s.expectedType&&s.expectedType.kind!=="value"&&(ot=s.expectedType);for(let st=0;st<_.length;st+=2){const ct=_[st],ft=_[st+1],mt=st+3,bt=st+4;if(typeof ct!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',mt);if(_e.length&&_e[_e.length-1][0]>=ct)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',mt);const wt=s.parse(ft,bt,ot);if(!wt)return null;ot=ot||wt.type,_e.push([ct,wt])}return ot.kind!=="number"&&ot.kind!=="color"&&!(ot.kind==="array"&&ot.itemType.kind==="number"&&typeof ot.N=="number")?s.error(`Type ${toString$1(ot)} is not interpolatable.`):new Interpolate(ot,a,d,b,_e)}evaluate(e){const s=this.labels,a=this.outputs;if(s.length===1)return a[0].evaluate(e);const d=this.input.evaluate(e);if(d<=s[0])return a[0].evaluate(e);const b=s.length;if(d>=s[b-1])return a[b-1].evaluate(e);const _=findStopLessThanOrEqualTo(s,d),_e=s[_],ot=s[_+1],st=Interpolate.interpolationFactor(this.interpolation,d,_e,ot),ct=a[_].evaluate(e),ft=a[_+1].evaluate(e);return this.operator==="interpolate"?interpolate[this.type.kind.toLowerCase()](ct,ft,st):this.operator==="interpolate-hcl"?hcl.reverse(hcl.interpolate(hcl.forward(ct),hcl.forward(ft),st)):lab.reverse(lab.interpolate(lab.forward(ct),lab.forward(ft),st))}eachChild(e){e(this.input);for(const s of this.outputs)e(s)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,e,this.input.serialize()];for(let a=0;a<this.labels.length;a++)s.push(this.labels[a],this.outputs[a].serialize());return s}}function exponentialInterpolation(o,e,s,a){const d=a-s,b=o-s;return d===0?0:e===1?b/d:(Math.pow(e,b)-1)/(Math.pow(e,d)-1)}var Interpolate$1=Interpolate;class Coalesce{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expectected at least one argument.");let a=null;const d=s.expectedType;d&&d.kind!=="value"&&(a=d);const b=[];for(const _e of e.slice(1)){const ot=s.parse(_e,1+b.length,a,void 0,{typeAnnotation:"omit"});if(!ot)return null;a=a||ot.type,b.push(ot)}return d&&b.some(_e=>checkSubtype(d,_e.type))?new Coalesce(ValueType,b):new Coalesce(a,b)}evaluate(e){let s=null,a=0,d;for(const b of this.args){if(a++,s=b.evaluate(e),s&&s instanceof ResolvedImage&&!s.available&&(d||(d=s),s=null,a===this.args.length))return d;if(s!==null)break}return s}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(s=>{e.push(s.serialize())}),e}}var Coalesce$1=Coalesce;class Let{constructor(e,s){this.type=s.type,this.bindings=[].concat(e),this.result=s}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const s of this.bindings)e(s[1]);e(this.result)}static parse(e,s){if(e.length<4)return s.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const a=[];for(let b=1;b<e.length-1;b+=2){const _=e[b];if(typeof _!="string")return s.error(`Expected string, but found ${typeof _} instead.`,b);if(/[^a-zA-Z0-9_]/.test(_))return s.error("Variable names must contain only alphanumeric characters or '_'.",b);const _e=s.parse(e[b+1],b+1);if(!_e)return null;a.push([_,_e])}const d=s.parse(e[e.length-1],e.length-1,s.expectedType,a);return d?new Let(a,d):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[s,a]of this.bindings)e.push(s,a.serialize());return e.push(this.result.serialize()),e}}var Let$1=Let;class At{constructor(e,s,a){this.type=e,this.index=s,this.input=a}static parse(e,s){if(e.length!==3)return s.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=s.parse(e[1],1,NumberType),d=s.parse(e[2],2,array$1(s.expectedType||ValueType));if(!a||!d)return null;const b=d.type;return new At(b.itemType,a,d)}evaluate(e){const s=this.index.evaluate(e),a=this.input.evaluate(e);if(s<0)throw new RuntimeError$1(`Array index out of bounds: ${s} < 0.`);if(s>=a.length)throw new RuntimeError$1(`Array index out of bounds: ${s} > ${a.length-1}.`);if(s!==Math.floor(s))throw new RuntimeError$1(`Array index must be an integer, but found ${s} instead.`);return a[s]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var At$1=At;class In{constructor(e,s){this.type=BooleanType,this.needle=e,this.haystack=s}static parse(e,s){if(e.length!==3)return s.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const a=s.parse(e[1],1,ValueType),d=s.parse(e[2],2,ValueType);return!a||!d?null:isValidType(a.type,[BooleanType,StringType,NumberType,NullType,ValueType])?new In(a,d):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(a.type)} instead`)}evaluate(e){const s=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(a==null)return!1;if(!isValidNativeType(s,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(s))} instead.`);if(!isValidNativeType(a,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(a))} instead.`);return a.indexOf(s)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var In$1=In;class IndexOf{constructor(e,s,a){this.type=NumberType,this.needle=e,this.haystack=s,this.fromIndex=a}static parse(e,s){if(e.length<=2||e.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=s.parse(e[1],1,ValueType),d=s.parse(e[2],2,ValueType);if(!a||!d)return null;if(!isValidType(a.type,[BooleanType,StringType,NumberType,NullType,ValueType]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(a.type)} instead`);if(e.length===4){const b=s.parse(e[3],3,NumberType);return b?new IndexOf(a,d,b):null}else return new IndexOf(a,d)}evaluate(e){const s=this.needle.evaluate(e),a=this.haystack.evaluate(e);if(!isValidNativeType(s,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(s))} instead.`);if(!isValidNativeType(a,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(a))} instead.`);if(this.fromIndex){const d=this.fromIndex.evaluate(e);return a.indexOf(s,d)}return a.indexOf(s)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var IndexOf$1=IndexOf;class Match{constructor(e,s,a,d,b,_){this.inputType=e,this.type=s,this.input=a,this.cases=d,this.outputs=b,this.otherwise=_}static parse(e,s){if(e.length<5)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return s.error("Expected an even number of arguments.");let a,d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);const b={},_=[];for(let st=2;st<e.length-1;st+=2){let ct=e[st];const ft=e[st+1];Array.isArray(ct)||(ct=[ct]);const mt=s.concat(st);if(ct.length===0)return mt.error("Expected at least one branch label.");for(const wt of ct){if(typeof wt!="number"&&typeof wt!="string")return mt.error("Branch labels must be numbers or strings.");if(typeof wt=="number"&&Math.abs(wt)>Number.MAX_SAFE_INTEGER)return mt.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof wt=="number"&&Math.floor(wt)!==wt)return mt.error("Numeric branch labels must be integer values.");if(!a)a=typeOf(wt);else if(mt.checkSubtype(a,typeOf(wt)))return null;if(typeof b[String(wt)]<"u")return mt.error("Branch labels must be unique.");b[String(wt)]=_.length}const bt=s.parse(ft,st,d);if(!bt)return null;d=d||bt.type,_.push(bt)}const _e=s.parse(e[1],1,ValueType);if(!_e)return null;const ot=s.parse(e[e.length-1],e.length-1,d);return!ot||_e.type.kind!=="value"&&s.concat(1).checkSubtype(a,_e.type)?null:new Match(a,d,_e,b,_,ot)}evaluate(e){const s=this.input.evaluate(e);return(typeOf(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),a=[],d={};for(const _ of s){const _e=d[this.cases[_]];_e===void 0?(d[this.cases[_]]=a.length,a.push([this.cases[_],[_]])):a[_e][1].push(_)}const b=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,_e]of a)_e.length===1?e.push(b(_e[0])):e.push(_e.map(b)),e.push(this.outputs[_].serialize());return e.push(this.otherwise.serialize()),e}}var Match$1=Match;class Case{constructor(e,s,a){this.type=e,this.branches=s,this.otherwise=a}static parse(e,s){if(e.length<4)return s.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return s.error("Expected an odd number of arguments.");let a;s.expectedType&&s.expectedType.kind!=="value"&&(a=s.expectedType);const d=[];for(let _=1;_<e.length-1;_+=2){const _e=s.parse(e[_],_,BooleanType);if(!_e)return null;const ot=s.parse(e[_+1],_+1,a);if(!ot)return null;d.push([_e,ot]),a=a||ot.type}const b=s.parse(e[e.length-1],e.length-1,a);return b?new Case(a,d,b):null}evaluate(e){for(const[s,a]of this.branches)if(s.evaluate(e))return a.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[s,a]of this.branches)e(s),e(a);e(this.otherwise)}outputDefined(){return this.branches.every(([e,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(s=>{e.push(s.serialize())}),e}}var Case$1=Case;let Slice$1=class hie{constructor(e,s,a,d){this.type=e,this.input=s,this.beginIndex=a,this.endIndex=d}static parse(e,s){if(e.length<=2||e.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const a=s.parse(e[1],1,ValueType),d=s.parse(e[2],2,NumberType);if(!a||!d)return null;if(!isValidType(a.type,[array$1(ValueType),StringType,ValueType]))return s.error(`Expected first argument to be of type array or string, but found ${toString$1(a.type)} instead`);if(e.length===4){const b=s.parse(e[3],3,NumberType);return b?new hie(a.type,a,d,b):null}else return new hie(a.type,a,d)}evaluate(e){const s=this.input.evaluate(e),a=this.beginIndex.evaluate(e);if(!isValidNativeType(s,["string","array"]))throw new RuntimeError$1(`Expected first argument to be of type array or string, but found ${toString$1(typeOf(s))} instead.`);if(this.endIndex){const d=this.endIndex.evaluate(e);return s.slice(a,d)}return s.slice(a)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}};var Slice$1$1=Slice$1;function isComparableType(o,e){return o==="=="||o==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function eq(o,e,s){return e===s}function neq(o,e,s){return e!==s}function lt(o,e,s){return e<s}function gt(o,e,s){return e>s}function lteq(o,e,s){return e<=s}function gteq(o,e,s){return e>=s}function eqCollate(o,e,s,a){return a.compare(e,s)===0}function neqCollate(o,e,s,a){return!eqCollate(o,e,s,a)}function ltCollate(o,e,s,a){return a.compare(e,s)<0}function gtCollate(o,e,s,a){return a.compare(e,s)>0}function lteqCollate(o,e,s,a){return a.compare(e,s)<=0}function gteqCollate(o,e,s,a){return a.compare(e,s)>=0}function makeComparison(o,e,s){const a=o!=="=="&&o!=="!=";return class lle{constructor(b,_,_e){this.type=BooleanType,this.lhs=b,this.rhs=_,this.collator=_e,this.hasUntypedArgument=b.type.kind==="value"||_.type.kind==="value"}static parse(b,_){if(b.length!==3&&b.length!==4)return _.error("Expected two or three arguments.");const _e=b[0];let ot=_.parse(b[1],1,ValueType);if(!ot)return null;if(!isComparableType(_e,ot.type))return _.concat(1).error(`"${_e}" comparisons are not supported for type '${toString$1(ot.type)}'.`);let st=_.parse(b[2],2,ValueType);if(!st)return null;if(!isComparableType(_e,st.type))return _.concat(2).error(`"${_e}" comparisons are not supported for type '${toString$1(st.type)}'.`);if(ot.type.kind!==st.type.kind&&ot.type.kind!=="value"&&st.type.kind!=="value")return _.error(`Cannot compare types '${toString$1(ot.type)}' and '${toString$1(st.type)}'.`);a&&(ot.type.kind==="value"&&st.type.kind!=="value"?ot=new Assertion$1(st.type,[ot]):ot.type.kind!=="value"&&st.type.kind==="value"&&(st=new Assertion$1(ot.type,[st])));let ct=null;if(b.length===4){if(ot.type.kind!=="string"&&st.type.kind!=="string"&&ot.type.kind!=="value"&&st.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(ct=_.parse(b[3],3,CollatorType),!ct)return null}return new lle(ot,st,ct)}evaluate(b){const _=this.lhs.evaluate(b),_e=this.rhs.evaluate(b);if(a&&this.hasUntypedArgument){const ot=typeOf(_),st=typeOf(_e);if(ot.kind!==st.kind||!(ot.kind==="string"||ot.kind==="number"))throw new RuntimeError$1(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${ot.kind}, ${st.kind}) instead.`)}if(this.collator&&!a&&this.hasUntypedArgument){const ot=typeOf(_),st=typeOf(_e);if(ot.kind!=="string"||st.kind!=="string")return e(b,_,_e)}return this.collator?s(b,_,_e,this.collator.evaluate(b)):e(b,_,_e)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}serialize(){const b=[o];return this.eachChild(_=>{b.push(_.serialize())}),b}}}const Equals=makeComparison("==",eq,eqCollate),NotEquals=makeComparison("!=",neq,neqCollate),LessThan=makeComparison("<",lt,ltCollate),GreaterThan=makeComparison(">",gt,gtCollate),LessThanOrEqual=makeComparison("<=",lteq,lteqCollate),GreaterThanOrEqual=makeComparison(">=",gteq,gteqCollate);class NumberFormat{constructor(e,s,a,d,b,_){this.type=StringType,this.number=e,this.locale=s,this.currency=a,this.unit=d,this.minFractionDigits=b,this.maxFractionDigits=_}static parse(e,s){if(e.length!==3)return s.error("Expected two arguments.");const a=s.parse(e[1],1,NumberType);if(!a)return null;const d=e[2];if(typeof d!="object"||Array.isArray(d))return s.error("NumberFormat options argument must be an object.");let b=null;if(d.locale&&(b=s.parse(d.locale,1,StringType),!b))return null;let _=null;if(d.currency&&(_=s.parse(d.currency,1,StringType),!_))return null;let _e=null;if(d.unit&&(_e=s.parse(d.unit,1,StringType),!_e))return null;let ot=null;if(d["min-fraction-digits"]&&(ot=s.parse(d["min-fraction-digits"],1,NumberType),!ot))return null;let st=null;return d["max-fraction-digits"]&&(st=s.parse(d["max-fraction-digits"],1,NumberType),!st)?null:new NumberFormat(a,b,_,_e,ot,st)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Length{constructor(e){this.type=NumberType,this.input=e}static parse(e,s){if(e.length!==2)return s.error(`Expected 1 argument, but found ${e.length-1} instead.`);const a=s.parse(e[1],1);return a?a.type.kind!=="array"&&a.type.kind!=="string"&&a.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${toString$1(a.type)} instead.`):new Length(a):null}evaluate(e){const s=this.input.evaluate(e);if(typeof s=="string")return s.length;if(Array.isArray(s))return s.length;throw new RuntimeError$1(`Expected value to be of type string or array, but found ${toString$1(typeOf(s))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(s=>{e.push(s.serialize())}),e}}var Length$1=Length;const expressions={"==":Equals,"!=":NotEquals,">":GreaterThan,"<":LessThan,">=":GreaterThanOrEqual,"<=":LessThanOrEqual,array:Assertion$1,at:At$1,boolean:Assertion$1,case:Case$1,coalesce:Coalesce$1,collator:CollatorExpression,format:FormatExpression,image:ImageExpression,in:In$1,"index-of":IndexOf$1,interpolate:Interpolate$1,"interpolate-hcl":Interpolate$1,"interpolate-lab":Interpolate$1,length:Length$1,let:Let$1,literal:Literal$1,match:Match$1,number:Assertion$1,"number-format":NumberFormat,object:Assertion$1,slice:Slice$1$1,step:Step$1$1,string:Assertion$1,"to-boolean":Coercion$1,"to-color":Coercion$1,"to-number":Coercion$1,"to-string":Coercion$1,var:Var$1,within:Within$1};function rgba(o,[e,s,a,d]){e=e.evaluate(o),s=s.evaluate(o),a=a.evaluate(o);const b=d?d.evaluate(o):1,_=validateRGBA(e,s,a,b);if(_)throw new RuntimeError$1(_);return new Color$1$1(e/255*b,s/255*b,a/255*b,b)}function has(o,e){return o in e}function get$1(o,e){const s=e[o];return typeof s>"u"?null:s}function binarySearch(o,e,s,a){for(;s<=a;){const d=s+a>>1;if(e[d]===o)return!0;e[d]>o?a=d-1:s=d+1}return!1}function varargs(o){return{type:o}}CompoundExpression$1.register(expressions,{error:[ErrorType,[StringType],(o,[e])=>{throw new RuntimeError$1(e.evaluate(o))}],typeof:[StringType,[ValueType],(o,[e])=>toString$1(typeOf(e.evaluate(o)))],"to-rgba":[array$1(NumberType,4),[ColorType],(o,[e])=>e.evaluate(o).toArray()],rgb:[ColorType,[NumberType,NumberType,NumberType],rgba],rgba:[ColorType,[NumberType,NumberType,NumberType,NumberType],rgba],has:{type:BooleanType,overloads:[[[StringType],(o,[e])=>has(e.evaluate(o),o.properties())],[[StringType,ObjectType],(o,[e,s])=>has(e.evaluate(o),s.evaluate(o))]]},get:{type:ValueType,overloads:[[[StringType],(o,[e])=>get$1(e.evaluate(o),o.properties())],[[StringType,ObjectType],(o,[e,s])=>get$1(e.evaluate(o),s.evaluate(o))]]},"feature-state":[ValueType,[StringType],(o,[e])=>get$1(e.evaluate(o),o.featureState||{})],properties:[ObjectType,[],o=>o.properties()],"geometry-type":[StringType,[],o=>o.geometryType()],id:[ValueType,[],o=>o.id()],zoom:[NumberType,[],o=>o.globals.zoom],pitch:[NumberType,[],o=>o.globals.pitch||0],"distance-from-center":[NumberType,[],o=>o.distanceFromCenter()],"heatmap-density":[NumberType,[],o=>o.globals.heatmapDensity||0],"line-progress":[NumberType,[],o=>o.globals.lineProgress||0],"sky-radial-progress":[NumberType,[],o=>o.globals.skyRadialProgress||0],accumulated:[ValueType,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[NumberType,varargs(NumberType),(o,e)=>{let s=0;for(const a of e)s+=a.evaluate(o);return s}],"*":[NumberType,varargs(NumberType),(o,e)=>{let s=1;for(const a of e)s*=a.evaluate(o);return s}],"-":{type:NumberType,overloads:[[[NumberType,NumberType],(o,[e,s])=>e.evaluate(o)-s.evaluate(o)],[[NumberType],(o,[e])=>-e.evaluate(o)]]},"/":[NumberType,[NumberType,NumberType],(o,[e,s])=>e.evaluate(o)/s.evaluate(o)],"%":[NumberType,[NumberType,NumberType],(o,[e,s])=>e.evaluate(o)%s.evaluate(o)],ln2:[NumberType,[],()=>Math.LN2],pi:[NumberType,[],()=>Math.PI],e:[NumberType,[],()=>Math.E],"^":[NumberType,[NumberType,NumberType],(o,[e,s])=>Math.pow(e.evaluate(o),s.evaluate(o))],sqrt:[NumberType,[NumberType],(o,[e])=>Math.sqrt(e.evaluate(o))],log10:[NumberType,[NumberType],(o,[e])=>Math.log(e.evaluate(o))/Math.LN10],ln:[NumberType,[NumberType],(o,[e])=>Math.log(e.evaluate(o))],log2:[NumberType,[NumberType],(o,[e])=>Math.log(e.evaluate(o))/Math.LN2],sin:[NumberType,[NumberType],(o,[e])=>Math.sin(e.evaluate(o))],cos:[NumberType,[NumberType],(o,[e])=>Math.cos(e.evaluate(o))],tan:[NumberType,[NumberType],(o,[e])=>Math.tan(e.evaluate(o))],asin:[NumberType,[NumberType],(o,[e])=>Math.asin(e.evaluate(o))],acos:[NumberType,[NumberType],(o,[e])=>Math.acos(e.evaluate(o))],atan:[NumberType,[NumberType],(o,[e])=>Math.atan(e.evaluate(o))],min:[NumberType,varargs(NumberType),(o,e)=>Math.min(...e.map(s=>s.evaluate(o)))],max:[NumberType,varargs(NumberType),(o,e)=>Math.max(...e.map(s=>s.evaluate(o)))],abs:[NumberType,[NumberType],(o,[e])=>Math.abs(e.evaluate(o))],round:[NumberType,[NumberType],(o,[e])=>{const s=e.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[NumberType,[NumberType],(o,[e])=>Math.floor(e.evaluate(o))],ceil:[NumberType,[NumberType],(o,[e])=>Math.ceil(e.evaluate(o))],"filter-==":[BooleanType,[StringType,ValueType],(o,[e,s])=>o.properties()[e.value]===s.value],"filter-id-==":[BooleanType,[ValueType],(o,[e])=>o.id()===e.value],"filter-type-==":[BooleanType,[StringType],(o,[e])=>o.geometryType()===e.value],"filter-<":[BooleanType,[StringType,ValueType],(o,[e,s])=>{const a=o.properties()[e.value],d=s.value;return typeof a==typeof d&&a<d}],"filter-id-<":[BooleanType,[ValueType],(o,[e])=>{const s=o.id(),a=e.value;return typeof s==typeof a&&s<a}],"filter->":[BooleanType,[StringType,ValueType],(o,[e,s])=>{const a=o.properties()[e.value],d=s.value;return typeof a==typeof d&&a>d}],"filter-id->":[BooleanType,[ValueType],(o,[e])=>{const s=o.id(),a=e.value;return typeof s==typeof a&&s>a}],"filter-<=":[BooleanType,[StringType,ValueType],(o,[e,s])=>{const a=o.properties()[e.value],d=s.value;return typeof a==typeof d&&a<=d}],"filter-id-<=":[BooleanType,[ValueType],(o,[e])=>{const s=o.id(),a=e.value;return typeof s==typeof a&&s<=a}],"filter->=":[BooleanType,[StringType,ValueType],(o,[e,s])=>{const a=o.properties()[e.value],d=s.value;return typeof a==typeof d&&a>=d}],"filter-id->=":[BooleanType,[ValueType],(o,[e])=>{const s=o.id(),a=e.value;return typeof s==typeof a&&s>=a}],"filter-has":[BooleanType,[ValueType],(o,[e])=>e.value in o.properties()],"filter-has-id":[BooleanType,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[BooleanType,[array$1(StringType)],(o,[e])=>e.value.indexOf(o.geometryType())>=0],"filter-id-in":[BooleanType,[array$1(ValueType)],(o,[e])=>e.value.indexOf(o.id())>=0],"filter-in-small":[BooleanType,[StringType,array$1(ValueType)],(o,[e,s])=>s.value.indexOf(o.properties()[e.value])>=0],"filter-in-large":[BooleanType,[StringType,array$1(ValueType)],(o,[e,s])=>binarySearch(o.properties()[e.value],s.value,0,s.value.length-1)],all:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(o,[e,s])=>e.evaluate(o)&&s.evaluate(o)],[varargs(BooleanType),(o,e)=>{for(const s of e)if(!s.evaluate(o))return!1;return!0}]]},any:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(o,[e,s])=>e.evaluate(o)||s.evaluate(o)],[varargs(BooleanType),(o,e)=>{for(const s of e)if(s.evaluate(o))return!0;return!1}]]},"!":[BooleanType,[BooleanType],(o,[e])=>!e.evaluate(o)],"is-supported-script":[BooleanType,[StringType],(o,[e])=>{const s=o.globals&&o.globals.isSupportedScript;return s?s(e.evaluate(o)):!0}],upcase:[StringType,[StringType],(o,[e])=>e.evaluate(o).toUpperCase()],downcase:[StringType,[StringType],(o,[e])=>e.evaluate(o).toLowerCase()],concat:[StringType,varargs(ValueType),(o,e)=>e.map(s=>toString(s.evaluate(o))).join("")],"resolved-locale":[StringType,[CollatorType],(o,[e])=>e.evaluate(o).resolvedLocale()]});var definitions=expressions;function success(o){return{result:"success",value:o}}function error(o){return{result:"error",value:o}}function supportsPropertyExpression(o){return o["property-type"]==="data-driven"}function supportsZoomExpression(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function supportsInterpolation(o){return!!o.expression&&o.expression.interpolated}function isFunction$2(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}class StyleExpression{constructor(e,s){this.expression=e,this._warningHistory={},this._evaluator=new EvaluationContext$1,this._defaultValue=s?getDefaultValue(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(e,s,a,d,b,_,_e,ot){return this._evaluator.globals=e,this._evaluator.feature=s,this._evaluator.featureState=a,this._evaluator.canonical=d||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=_e||null,this._evaluator.featureDistanceData=ot||null,this.expression.evaluate(this._evaluator)}evaluate(e,s,a,d,b,_,_e,ot){this._evaluator.globals=e,this._evaluator.feature=s||null,this._evaluator.featureState=a||null,this._evaluator.canonical=d||null,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=_e||null,this._evaluator.featureDistanceData=ot||null;try{const st=this.expression.evaluate(this._evaluator);if(st==null||typeof st=="number"&&st!==st)return this._defaultValue;if(this._enumValues&&!(st in this._enumValues))throw new RuntimeError$1(`Expected value to be one of ${Object.keys(this._enumValues).map(ct=>JSON.stringify(ct)).join(", ")}, but found ${JSON.stringify(st)} instead.`);return st}catch(st){return this._warningHistory[st.message]||(this._warningHistory[st.message]=!0,typeof console<"u"&&console.warn(st.message)),this._defaultValue}}}function isExpression(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in definitions}function createExpression(o,e){const s=new ParsingContext$1(definitions,[],e?getExpectedType(e):void 0),a=s.parse(o,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return a?success(new StyleExpression(a,e)):error(s.errors)}class ZoomConstantExpression{constructor(e,s){this.kind=e,this._styleExpression=s,this.isStateDependent=e!=="constant"&&!isStateConstant(s.expression)}evaluateWithoutErrorHandling(e,s,a,d,b,_){return this._styleExpression.evaluateWithoutErrorHandling(e,s,a,d,b,_)}evaluate(e,s,a,d,b,_){return this._styleExpression.evaluate(e,s,a,d,b,_)}}class ZoomDependentExpression{constructor(e,s,a,d){this.kind=e,this.zoomStops=a,this._styleExpression=s,this.isStateDependent=e!=="camera"&&!isStateConstant(s.expression),this.interpolationType=d}evaluateWithoutErrorHandling(e,s,a,d,b,_){return this._styleExpression.evaluateWithoutErrorHandling(e,s,a,d,b,_)}evaluate(e,s,a,d,b,_){return this._styleExpression.evaluate(e,s,a,d,b,_)}interpolationFactor(e,s,a){return this.interpolationType?Interpolate$1.interpolationFactor(this.interpolationType,e,s,a):0}}function createPropertyExpression(o,e){if(o=createExpression(o,e),o.result==="error")return o;const s=o.value.expression,a=isFeatureConstant(s);if(!a&&!supportsPropertyExpression(e))return error([new ParsingError$1("","data expressions not supported")]);const d=isGlobalPropertyConstant(s,["zoom","pitch","distance-from-center"]);if(!d&&!supportsZoomExpression(e))return error([new ParsingError$1("","zoom expressions not supported")]);const b=findZoomCurve(s);if(!b&&!d)return error([new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(b instanceof ParsingError$1)return error([b]);if(b instanceof Interpolate$1&&!supportsInterpolation(e))return error([new ParsingError$1("",'"interpolate" expressions cannot be used with this property')]);if(!b)return success(a?new ZoomConstantExpression("constant",o.value):new ZoomConstantExpression("source",o.value));const _=b instanceof Interpolate$1?b.interpolation:void 0;return success(a?new ZoomDependentExpression("camera",o.value,b.labels,_):new ZoomDependentExpression("composite",o.value,b.labels,_))}function findZoomCurve(o){let e=null;if(o instanceof Let$1)e=findZoomCurve(o.result);else if(o instanceof Coalesce$1){for(const s of o.args)if(e=findZoomCurve(s),e)break}else(o instanceof Step$1$1||o instanceof Interpolate$1)&&o.input instanceof CompoundExpression$1&&o.input.name==="zoom"&&(e=o);return e instanceof ParsingError$1||o.eachChild(s=>{const a=findZoomCurve(s);a instanceof ParsingError$1?e=a:!e&&a?e=new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&a&&e!==a&&(e=new ParsingError$1("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function getExpectedType(o){const e={color:ColorType,string:StringType,number:NumberType,enum:StringType,boolean:BooleanType,formatted:FormattedType,resolvedImage:ResolvedImageType};return o.type==="array"?array$1(e[o.value]||ValueType,o.length):e[o.type]}function getDefaultValue(o){return o.type==="color"&&(isFunction$2(o.default)||Array.isArray(o.default))?new Color$1$1(0,0,0,0):o.type==="color"?Color$1$1.parse(o.default)||null:o.default===void 0?null:o.default}function unbundle(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function deepUnbundle(o){if(Array.isArray(o))return o.map(deepUnbundle);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const e={};for(const s in o)e[s]=deepUnbundle(o[s]);return e}return unbundle(o)}var spec={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function isExpressionFilter(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const e of o.slice(1))if(!isExpressionFilter(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function createFilter(o,e="fill"){if(o==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};isExpressionFilter(o)||(o=convertFilter(o));const s=o;let a=!0;try{a=extractStaticFilter(s)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(s,null,2)}
        `)}const d=spec[`filter_${e}`],b=createExpression(a,d);let _=null;if(b.result==="error")throw new Error(b.value.map(ct=>`${ct.key}: ${ct.message}`).join(", "));_=(ct,ft,mt)=>b.value.evaluate(ct,ft,{},mt);let _e=null,ot=null;if(a!==s){const ct=createExpression(s,d);if(ct.result==="error")throw new Error(ct.value.map(ft=>`${ft.key}: ${ft.message}`).join(", "));_e=(ft,mt,bt,wt,Ct)=>ct.value.evaluate(ft,mt,{},bt,void 0,void 0,wt,Ct),ot=!isFeatureConstant(ct.value.expression)}_=_;const st=geometryNeeded(a);return{filter:_,dynamicFilter:_e||void 0,needGeometry:st,needFeature:!!ot}}function extractStaticFilter(o){if(!isDynamicFilter(o))return o;let e=deepUnbundle(o);return unionDynamicBranches(e),e=collapseDynamicBooleanExpressions(e),e}function collapseDynamicBooleanExpressions(o){if(!Array.isArray(o))return o;const e=collapsedExpression(o);return e===!0?e:e.map(s=>collapseDynamicBooleanExpressions(s))}function unionDynamicBranches(o){let e=!1;const s=[];if(o[0]==="case"){for(let a=1;a<o.length-1;a+=2)e=e||isDynamicFilter(o[a]),s.push(o[a+1]);s.push(o[o.length-1])}else if(o[0]==="match"){e=e||isDynamicFilter(o[1]);for(let a=2;a<o.length-1;a+=2)s.push(o[a+1]);s.push(o[o.length-1])}else if(o[0]==="step"){e=e||isDynamicFilter(o[1]);for(let a=1;a<o.length-1;a+=2)s.push(o[a+1])}e&&(o.length=0,o.push("any",...s));for(let a=1;a<o.length;a++)unionDynamicBranches(o[a])}function isDynamicFilter(o){if(!Array.isArray(o))return!1;if(isRootExpressionDynamic(o[0]))return!0;for(let e=1;e<o.length;e++){const s=o[e];if(isDynamicFilter(s))return!0}return!1}function isRootExpressionDynamic(o){return o==="pitch"||o==="distance-from-center"}const dynamicConditionExpressions=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function collapsedExpression(o){if(dynamicConditionExpressions.has(o[0]))for(let e=1;e<o.length;e++){const s=o[e];if(isDynamicFilter(s))return!0}return o}function compare(o,e){return o<e?-1:o>e?1:0}function geometryNeeded(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let e=1;e<o.length;e++)if(geometryNeeded(o[e]))return!0;return!1}function convertFilter(o){if(!o)return!0;const e=o[0];return o.length<=1?e!=="any":e==="=="?convertComparisonOp(o[1],o[2],"=="):e==="!="?convertNegation(convertComparisonOp(o[1],o[2],"==")):e==="<"||e===">"||e==="<="||e===">="?convertComparisonOp(o[1],o[2],e):e==="any"?convertDisjunctionOp(o.slice(1)):e==="all"?["all"].concat(o.slice(1).map(convertFilter)):e==="none"?["all"].concat(o.slice(1).map(convertFilter).map(convertNegation)):e==="in"?convertInOp(o[1],o.slice(2)):e==="!in"?convertNegation(convertInOp(o[1],o.slice(2))):e==="has"?convertHasOp(o[1]):e==="!has"?convertNegation(convertHasOp(o[1])):e==="within"?o:!0}function convertComparisonOp(o,e,s){switch(o){case"$type":return[`filter-type-${s}`,e];case"$id":return[`filter-id-${s}`,e];default:return[`filter-${s}`,o,e]}}function convertDisjunctionOp(o){return["any"].concat(o.map(convertFilter))}function convertInOp(o,e){if(e.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(s=>typeof s!=typeof e[0])?["filter-in-large",o,["literal",e.sort(compare)]]:["filter-in-small",o,["literal",e]]}}function convertHasOp(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function convertNegation(o){return["!",o]}var refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function deref(o,e){const s={};for(const a in o)a!=="ref"&&(s[a]=o[a]);return refProperties.forEach(a=>{a in e&&(s[a]=e[a])}),s}function derefLayers(o){o=o.slice();const e=Object.create(null);for(let s=0;s<o.length;s++)e[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=deref(o[s],e[o[s].ref]));return o}var fontWeights={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},sp=" ",italicRE=/(italic|oblique)$/i,fontCache={},mapboxToCssFont=function(o,e,s){var a=fontCache[o];if(!a){Array.isArray(o)||(o=[o]);for(var d=400,b="normal",_=[],_e,ot,st=0,ct=o.length;st<ct;++st){var ft=o[st],mt=ft.split(" "),bt=mt[mt.length-1].toLowerCase();bt=="normal"||bt=="italic"||bt=="oblique"?(b=ot?b:bt,ot=!0,mt.pop(),bt=mt[mt.length-1].toLowerCase()):italicRE.test(bt)&&(bt=bt.replace(italicRE,""),b=ot?b:mt[mt.length-1].replace(bt,""),ot=!0);for(var wt in fontWeights){var Ct=mt.length>1?mt[mt.length-2].toLowerCase():"";if(bt==wt||bt==wt.replace("-","")||Ct+"-"+bt==wt){d=_e?d:fontWeights[wt],mt.pop(),Ct&&wt.startsWith(Ct)&&mt.pop();break}}!_e&&typeof bt=="number"&&(d=bt,_e=!0);var Rt=mt.join(sp).replace("Klokantech Noto Sans","Noto Sans");Rt.indexOf(sp)!==-1&&(Rt='"'+Rt+'"'),_.push(Rt)}a=fontCache[o]=[b,d,_]}return a[0]+sp+a[1]+sp+e+"px"+(s?"/"+s:"")+sp+a[2]},mb2css=getDefaultExportFromCjs$1(mapboxToCssFont);const mapboxBaseUrl="https://api.mapbox.com";function getMapboxPath(o){const e="mapbox://";return o.indexOf(e)!==0?"":o.slice(e.length)}function normalizeSpriteUrl(o,e,s){const a=getMapboxPath(o);if(!a)return decodeURI(new URL(o,s).href);const d="sprites/";if(a.indexOf(d)!==0)throw new Error(`unexpected sprites url: ${o}`);const b=a.slice(d.length);return`${mapboxBaseUrl}/styles/v1/${b}/sprite?access_token=${e}`}function normalizeStyleUrl(o,e){const s=getMapboxPath(o);if(!s)return decodeURI(new URL(o,location.href).href);const a="styles/";if(s.indexOf(a)!==0)throw new Error(`unexpected style url: ${o}`);const d=s.slice(a.length);return`${mapboxBaseUrl}/styles/v1/${d}?&access_token=${e}`}function normalizeSourceUrl(o,e,s,a){const d=new URL(o,a),b=getMapboxPath(o);if(!b)return e&&(d.searchParams.has(s)||d.searchParams.set(s,e)),decodeURI(d.href);if(b==="mapbox.satellite"){const _=window.devicePixelRatio>=1.5?"@2x":"";return`https://api.mapbox.com/v4/${b}/{z}/{x}/{y}${_}.webp?access_token=${e}`}return`https://{a-d}.tiles.mapbox.com/v4/${b}/{z}/{x}/{y}.vector.pbf?access_token=${e}`}const functionCacheByStyleId={},filterCacheByStyleId={};let styleId=0;function getStyleId(o){return o.id||(o.id=styleId++),o.id}function getStyleFunctionKey(o,e){return getStyleId(o)+"."+getUid(e)}function getFunctionCache(o){let e=functionCacheByStyleId[o.id];return e||(e={},functionCacheByStyleId[getStyleId(o)]=e),e}function getFilterCache(o){let e=filterCacheByStyleId[o.id];return e||(e={},filterCacheByStyleId[getStyleId(o)]=e),e}function deg2rad(o){return o*Math.PI/180}const defaultResolutions=function(){const o=[];for(let e=78271.51696402048;o.length<=24;e/=2)o.push(e);return o}();function createCanvas(o,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(o,e);const s=document.createElement("canvas");return s.width=o,s.height=e,s}function getZoomForResolution(o,e){let s=0;const a=e.length;for(;s<a;++s)if(e[s]<o&&s+1<a){const b=e[s]/e[s+1];return s+Math.log(e[s]/o)/Math.log(b)}return a-1}function getResolutionForZoom(o,e){const s=Math.floor(o),a=Math.pow(2,o-s);return e[s]/a}const pendingRequests={};function fetchResource(o,e,s={},a){if(e in pendingRequests)return a&&(a.request=pendingRequests[e][0]),pendingRequests[e][1];const d=s.transformRequest&&s.transformRequest(e,o)||e,b=toPromise(()=>d).then(_=>(_ instanceof Request||(_=new Request(_)),_.headers.get("Accept")||_.headers.set("Accept","application/json"),a&&(a.request=_),fetch(_).then(function(_e){return delete pendingRequests[e],_e.ok?_e.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(_e){return delete pendingRequests[e],Promise.reject(new Error("Error fetching source "+e))})));return pendingRequests[e]=[d,b],b}function getGlStyle(o,e){if(typeof o=="string")if(o.trim().startsWith("{"))try{const s=JSON.parse(o);return Promise.resolve(s)}catch(s){return Promise.reject(s)}else return o=normalizeStyleUrl(o,e.accessToken),fetchResource("Style",o,e);else return Promise.resolve(o)}const tilejsonCache={};function getTileJson(o,e,s={}){const a=[e,JSON.stringify(o)].toString();let d=tilejsonCache[a];if(!d||s.transformRequest){let b;s.transformRequest&&(b=(_e,ot)=>{const st=s.transformRequest&&s.transformRequest(ot,"Tiles")||ot;if(_e instanceof VectorTile$1)_e.setLoader((ct,ft,mt)=>{toPromise(()=>st).then(bt=>{fetch(bt).then(wt=>wt.arrayBuffer()).then(wt=>{const Rt=_e.getFormat().readFeatures(wt,{extent:ct,featureProjection:mt});_e.setFeatures(Rt)}).catch(wt=>_e.setState(TileState.ERROR))})});else{const ct=_e.getImage();toPromise(()=>st).then(ft=>{ft instanceof Request?fetch(ft).then(mt=>mt.blob()).then(mt=>{const bt=URL.createObjectURL(mt);ct.addEventListener("load",()=>URL.revokeObjectURL(bt)),ct.addEventListener("error",()=>URL.revokeObjectURL(bt)),ct.src=bt}).catch(mt=>_e.setState(TileState.ERROR)):ct.src=ft})}});const _=o.url;if(_&&!o.tiles){const _e=normalizeSourceUrl(_,s.accessToken,s.accessTokenParam||"access_token",e||location.href);if(_.startsWith("mapbox://"))d=Promise.resolve({tileJson:Object.assign({},o,{url:void 0,tiles:expandUrl(_e)}),tileLoadFunction:b});else{const ot={};d=fetchResource("Source",_e,s,ot).then(function(st){return st.tiles=st.tiles.map(function(ct){return st.scheme==="tms"&&(ct=ct.replace("{y}","{-y}")),normalizeSourceUrl(ct,s.accessToken,s.accessTokenParam||"access_token",ot.request.url)}),Promise.resolve({tileJson:st,tileLoadFunction:b})})}}else o=Object.assign({},o,{tiles:o.tiles.map(function(_e){return o.scheme==="tms"&&(_e=_e.replace("{y}","{-y}")),normalizeSourceUrl(_e,s.accessToken,s.accessTokenParam||"access_token",e||location.href)})}),d=Promise.resolve({tileJson:Object.assign({},o),tileLoadFunction:b});tilejsonCache[a]=d}return d}function drawIconHalo(o,e,s,a){const d=[2*s*e.pixelRatio+e.width,2*s*e.pixelRatio+e.height],b=createCanvas(d[0],d[1]),_=b.getContext("2d");_.drawImage(o,e.x,e.y,e.width,e.height,s*e.pixelRatio,s*e.pixelRatio,e.width,e.height);const _e=_.getImageData(0,0,d[0],d[1]);_.globalCompositeOperation="destination-over",_.fillStyle=`rgba(${a.r*255},${a.g*255},${a.b*255},${a.a})`;const ot=_e.data;for(let st=0,ct=_e.width;st<ct;++st)for(let ft=0,mt=_e.height;ft<mt;++ft){const bt=(ft*ct+st)*4;ot[bt+3]>0&&_.arc(st,ft,s*e.pixelRatio,0,2*Math.PI)}return _.fill(),b}function smoothstep(o,e,s){const a=Math.max(0,Math.min(1,(s-o)/(e-o)));return a*a*(3-2*a)}function drawSDF(o,e,s){const a=createCanvas(e.width,e.height),d=a.getContext("2d");d.drawImage(o,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const b=d.getImageData(0,0,e.width,e.height),_=b.data;for(let _e=0,ot=b.width;_e<ot;++_e)for(let st=0,ct=b.height;st<ct;++st){const ft=(st*ot+_e)*4,mt=_[ft+3]/255,bt=.75,wt=.1,Ct=smoothstep(bt-wt,bt+wt,mt);Ct>0?(_[ft+0]=Math.round(255*s.r*Ct),_[ft+1]=Math.round(255*s.g*Ct),_[ft+2]=Math.round(255*s.b*Ct),_[ft+3]=Math.round(255*Ct)):_[ft+3]=0}return d.putImageData(b,0,0),a}const hairSpacePool=Array(256).join("");function applyLetterSpacing(o,e){if(e>=.05){let s="";const a=o.split(`
`),d=hairSpacePool.slice(0,Math.round(e/.1));for(let b=0,_=a.length;b<_;++b)b>0&&(s+=`
`),s+=a[b].split("").join(d);return s}return o}let measureContext;function getMeasureContext(){return measureContext||(measureContext=createCanvas(1,1).getContext("2d")),measureContext}function measureText(o,e){return getMeasureContext().measureText(o).width+(o.length-1)*e}const measureCache={};function wrapText(o,e,s,a){if(o.indexOf(`
`)!==-1){const _=o.split(`
`),_e=[];for(let ot=0,st=_.length;ot<st;++ot)_e.push(wrapText(_[ot],e,s,a));return _e.join(`
`)}const d=s+","+e+","+o+","+a;let b=measureCache[d];if(!b){const _=o.split(" ");if(_.length>1){const _e=getMeasureContext();_e.font=e;const st=_e.measureText("M").width*s;let ct="";const ft=[];for(let mt=0,bt=_.length;mt<bt;++mt){const wt=_[mt],Ct=ct+(ct?" ":"")+wt;measureText(Ct,a)<=st?ct=Ct:(ct&&ft.push(ct),ct=wt)}ct&&ft.push(ct);for(let mt=0,bt=ft.length;mt<bt&&bt>1;++mt){const wt=ft[mt];if(measureText(wt,a)<st*.35){const Ct=mt>0?measureText(ft[mt-1],a):1/0,Rt=mt<bt-1?measureText(ft[mt+1],a):1/0;ft.splice(mt,1),bt-=1,Ct<Rt?(ft[mt-1]+=" "+wt,mt-=1):ft[mt]=wt+" "+ft[mt]}}for(let mt=0,bt=ft.length-1;mt<bt;++mt){const wt=ft[mt],Ct=ft[mt+1];if(measureText(wt,a)>st*.7&&measureText(Ct,a)<st*.6){const Rt=wt.split(" "),It=Rt.pop();measureText(It,a)<st*.2&&(ft[mt]=Rt.join(" "),ft[mt+1]=It+" "+Ct),bt-=1}}b=ft.join(`
`)}else b=o;b=applyLetterSpacing(b,a),measureCache[d]=b}return b}const fontFamilyRegEx=/font-family: ?([^;]*);/,stripQuotesRegEx=/("|')/g;let loadedFontFamilies;function hasFontFamily(o){if(!loadedFontFamilies){loadedFontFamilies={};const e=document.styleSheets;for(let s=0,a=e.length;s<a;++s){const d=e[s];try{const b=d.rules||d.cssRules;if(b)for(let _=0,_e=b.length;_<_e;++_){const ot=b[_];if(ot.type==5){const st=ot.cssText.match(fontFamilyRegEx);loadedFontFamilies[st[1].replace(stripQuotesRegEx,"")]=!0}}}catch{}}}return o in loadedFontFamilies}const processedFontFamilies={};function getFonts(o,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const s=o.toString();if(s in processedFontFamilies)return processedFontFamilies[s];const a=[];for(let d=0,b=o.length;d<b;++d){o[d]=o[d].replace("Arial Unicode MS","Arial");const _=o[d],_e=mb2css(_,1);registerFont(_e);const ot=_e.split(" ");a.push([ot.slice(3).join(" ").replace(/"/g,""),ot[1],ot[0]])}for(let d=0,b=a.length;d<b;++d){const _=a[d],_e=_[0];if(!hasFontFamily(_e)&&checkedFonts.get(`${_[2]}
${_[1]} 
${_e}`)!==100){const ot=e.replace("{font-family}",_e.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",_e.replace(/ /g,"+")).replace("{fontweight}",_[1]).replace("{-fontstyle}",_[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",_[2]);if(!document.querySelector('link[href="'+ot+'"]')){const st=document.createElement("link");st.href=ot,st.rel="stylesheet",document.head.appendChild(st)}}}return processedFontFamilies[s]=o,o}const types={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},anchor={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},expressionData=function(o,e){const s=createPropertyExpression(o,e);if(s.result==="error")throw new Error(s.value.map(a=>`${a.key}: ${a.message}`).join(", "));return s.value},emptyObj$1={},zoomObj={zoom:0};let renderFeatureCoordinates,renderFeature;function getValue(o,e,s,a,d,b,_){const _e=o.id;b||(b={},console.warn("No functionCache provided to getValue()")),b[_e]||(b[_e]={});const ot=b[_e];if(!ot[s]){let st=(o[e]||emptyObj$1)[s];const ct=spec[`${e}_${o.type}`][s];st===void 0&&(st=ct.default);let ft=isExpression(st);if(!ft&&isFunction$2(st)&&(st=convertFunction(st,ct),ft=!0),ft){const mt=expressionData(st,ct);ot[s]=mt.evaluate.bind(mt)}else ct.type=="color"&&(st=Color$1$1.parse(st)),ot[s]=function(){return st}}return zoomObj.zoom=a,ot[s](zoomObj,d,_)}function getDeclutterMode(o,e,s,a,d){return getValue(o,"layout",`${a}-allow-overlap`,e,s,d)?getValue(o,"layout",`${a}-ignore-placement`,e,s,d)?"none":"obstacle":"declutter"}function evaluateFilter(o,e,s,a,d){return d||console.warn("No filterCache provided to evaluateFilter()"),o in d||(d[o]=createFilter(e).filter),zoomObj.zoom=a,d[o](zoomObj,s)}function colorWithOpacity(o,e){if(o){if(o.a===0||e===0)return;const s=o.a;return e=e===void 0?1:e,s===0?"transparent":"rgba("+Math.round(o.r*255/s)+","+Math.round(o.g*255/s)+","+Math.round(o.b*255/s)+","+s*e+")"}return o}const templateRegEx=/\{[^{}}]*\}/g;function fromTemplate(o,e){return o.replace(templateRegEx,function(s){return e[s.slice(1,-1)]||""})}const styleFunctionArgs={};function stylefunction(o,e,s,a=defaultResolutions,d=void 0,b=void 0,_=void 0,_e=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");styleFunctionArgs[getStyleFunctionKey(e,o)]=Array.from(arguments);let ot,st,ct;if(b){if(typeof Image<"u"){const Nt=new Image;let Qt;toPromise(()=>b).then(fn=>{fn instanceof Request?fetch(fn).then(Mn=>Mn.blob()).then(Mn=>{Qt=URL.createObjectURL(Mn),Nt.src=Qt}).catch(()=>{}):(Nt.crossOrigin="anonymous",Nt.src=fn,Qt&&URL.revokeObjectURL(Qt))}),Nt.onload=function(){ot=Nt,st=[Nt.width,Nt.height],o.changed(),Nt.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const Nt=self;Nt.postMessage({action:"loadImage",src:b}),Nt.addEventListener("message",function(fn){fn.data.action==="imageLoaded"&&fn.data.src===b&&(ot=fn.data.image,st=[ot.width,ot.height])})}}const ft=derefLayers(e.layers),mt={},bt=[],wt={},Ct={},Rt=getFunctionCache(e),It=getFilterCache(e);let Pt;for(let Nt=0,Qt=ft.length;Nt<Qt;++Nt){const fn=ft[Nt],Mn=fn.id;if(typeof s=="string"&&fn.source==s||Array.isArray(s)&&s.indexOf(Mn)!==-1){const ln=fn["source-layer"];if(Pt){if(fn.source!==Pt)throw new Error(`Layer "${Mn}" does not use source "${Pt}`)}else{Pt=fn.source;const so=e.sources[Pt];if(!so)throw new Error(`Source "${Pt}" is not defined`);const pn=so.type;if(pn!=="vector"&&pn!=="geojson")throw new Error(`Source "${Pt}" is not of type "vector" or "geojson", but "${pn}"`)}let Wt=mt[ln];Wt||(Wt=[],mt[ln]=Wt),Wt.push({layer:fn,index:Nt}),bt.push(Mn)}}const Tt=new Stroke,Gt=new Fill,Jt=[],qt=function(Nt,Qt,fn){const Mn=Nt.getProperties(),ln=mt[Mn.layer];if(!ln)return;let Wt=a.indexOf(Qt);Wt==-1&&(Wt=getZoomForResolution(Qt,a));const so=types[Nt.getGeometry().getType()],pn={id:Nt.getId(),properties:Mn,type:so},hn=o.get("mapbox-featurestate")[Nt.getId()];let Mt=-1;for(let Hn=0,cn=ln.length;Hn<cn;++Hn){const fo=ln[Hn],Fn=fo.layer,Tn=Fn.id;if(fn!==void 0&&fn!==Tn)continue;const qn=Fn.layout||emptyObj$1,nr=Fn.paint||emptyObj$1;if(qn.visibility==="none"||"minzoom"in Fn&&Wt<Fn.minzoom||"maxzoom"in Fn&&Wt>=Fn.maxzoom)continue;const oo=Fn.filter;if(!oo||evaluateFilter(Tn,oo,pn,Wt,It)){let Mo,Dn,xo,Xt,Ur,co;const Vo=fo.index;if(so==3&&(Fn.type=="fill"||Fn.type=="fill-extrusion"))if(Dn=getValue(Fn,"paint",Fn.type+"-opacity",Wt,pn,Rt,hn),Fn.type+"-pattern"in nr){const Qn=getValue(Fn,"paint",Fn.type+"-pattern",Wt,pn,Rt,hn);if(Qn){const vo=typeof Qn=="string"?fromTemplate(Qn,Mn):Qn.toString();if(ot&&d&&d[vo]){++Mt,co=Jt[Mt],(!co||!co.getFill()||co.getStroke()||co.getText())&&(co=new Style({fill:new Fill}),Jt[Mt]=co),xo=co.getFill(),co.setZIndex(Vo);const Gn=vo+"."+Dn;let ro=Ct[Gn];if(!ro){const Co=d[vo],Do=createCanvas(Co.width,Co.height),Mr=Do.getContext("2d");Mr.globalAlpha=Dn,Mr.drawImage(ot,Co.x,Co.y,Co.width,Co.height,0,0,Co.width,Co.height),ro=Mr.createPattern(Do,"repeat"),Ct[Gn]=ro}xo.setColor(ro)}}}else Mo=colorWithOpacity(getValue(Fn,"paint",Fn.type+"-color",Wt,pn,Rt,hn),Dn),Fn.type+"-outline-color"in nr&&(Ur=colorWithOpacity(getValue(Fn,"paint",Fn.type+"-outline-color",Wt,pn,Rt,hn),Dn)),Ur||(Ur=Mo),(Mo||Ur)&&(++Mt,co=Jt[Mt],(!co||Mo&&!co.getFill()||!Mo&&co.getFill()||Ur&&!co.getStroke()||!Ur&&co.getStroke()||co.getText())&&(co=new Style({fill:Mo?new Fill:void 0,stroke:Ur?new Stroke:void 0}),Jt[Mt]=co),Mo&&(xo=co.getFill(),xo.setColor(Mo)),Ur&&(Xt=co.getStroke(),Xt.setColor(Ur),Xt.setWidth(.5)),co.setZIndex(Vo));if(so!=1&&Fn.type=="line"){"line-pattern"in nr?Mo=void 0:Mo=colorWithOpacity(getValue(Fn,"paint","line-color",Wt,pn,Rt,hn),getValue(Fn,"paint","line-opacity",Wt,pn,Rt,hn));const Qn=getValue(Fn,"paint","line-width",Wt,pn,Rt,hn);Mo&&Qn>0&&(++Mt,co=Jt[Mt],(!co||!co.getStroke()||co.getFill()||co.getText())&&(co=new Style({stroke:new Stroke}),Jt[Mt]=co),Xt=co.getStroke(),Xt.setLineCap(getValue(Fn,"layout","line-cap",Wt,pn,Rt,hn)),Xt.setLineJoin(getValue(Fn,"layout","line-join",Wt,pn,Rt,hn)),Xt.setMiterLimit(getValue(Fn,"layout","line-miter-limit",Wt,pn,Rt,hn)),Xt.setColor(Mo),Xt.setWidth(Qn),Xt.setLineDash(nr["line-dasharray"]?getValue(Fn,"paint","line-dasharray",Wt,pn,Rt,hn).map(function(vo){return vo*Qn}):null),co.setZIndex(Vo))}let yo=!1,ko=null,yn=0,Cn,Nn,sn;if((so==1||so==2)&&"icon-image"in qn){const Qn=getValue(Fn,"layout","icon-image",Wt,pn,Rt,hn);if(Qn){Cn=typeof Qn=="string"?fromTemplate(Qn,Mn):Qn.toString();let vo;const Gn=_e?_e(o,Cn):void 0;if(ot&&d&&d[Cn]||Gn){const ro=getValue(Fn,"layout","icon-rotation-alignment",Wt,pn,Rt,hn);if(so==2){const Co=Nt.getGeometry();if(Co.getFlatMidpoint||Co.getFlatMidpoints){const Do=Co.getExtent();if(Math.sqrt(Math.max(Math.pow((Do[2]-Do[0])/Qt,2),Math.pow((Do[3]-Do[1])/Qt,2)))>150){const ar=Co.getType()==="MultiLineString"?Co.getFlatMidpoints():Co.getFlatMidpoint();if(renderFeature||(renderFeatureCoordinates=[NaN,NaN],renderFeature=new RenderFeature("Point",renderFeatureCoordinates,[],2,{},void 0)),vo=renderFeature,renderFeatureCoordinates[0]=ar[0],renderFeatureCoordinates[1]=ar[1],getValue(Fn,"layout","symbol-placement",Wt,pn,Rt,hn)==="line"&&ro==="map"){const us=Co.getStride(),wr=Co.getFlatCoordinates();for(let gs=0,Ts=wr.length-us;gs<Ts;gs+=us){const Rs=wr[gs],Cl=wr[gs+1],Yr=wr[gs+us],Dl=wr[gs+us+1],or=Math.min(Rs,Yr),Ds=Math.min(Cl,Dl),hu=Math.max(Rs,Yr),au=Math.max(Cl,Dl);if(ar[0]>=or&&ar[0]<=hu&&ar[1]>=Ds&&ar[1]<=au){yn=Math.atan2(Cl-Dl,Yr-Rs);break}}}}}}if(so!==2||vo){const Co=getValue(Fn,"layout","icon-size",Wt,pn,Rt,hn),Do=nr["icon-color"]!==void 0?getValue(Fn,"paint","icon-color",Wt,pn,Rt,hn):null;if(!Do||Do.a!==0){const Mr=getValue(Fn,"paint","icon-halo-color",Wt,pn,Rt,hn),ar=getValue(Fn,"paint","icon-halo-width",Wt,pn,Rt,hn);let xr=`${Cn}.${Co}.${ar}.${Mr}`;if(Do!==null&&(xr+=`.${Do}`),Nn=wt[xr],!Nn){const us=getDeclutterMode(Fn,Wt,pn,"icon",Rt);let wr;"icon-offset"in qn&&(wr=getValue(Fn,"layout","icon-offset",Wt,pn,Rt,hn).slice(0),wr[0]*=Co,wr[1]*=-Co);let gs=Do?[Do.r*255,Do.g*255,Do.b*255,Do.a]:void 0;if(Gn){const Ts={color:gs,rotateWithView:ro==="map",displacement:wr,declutterMode:us,scale:Co};typeof Gn=="string"?Ts.src=Gn:(Ts.img=Gn,Ts.imgSize=[Gn.width,Gn.height]),Nn=new Icon(Ts)}else{const Ts=d[Cn];let Rs,Cl,Yr;ar?Ts.sdf?(Rs=drawIconHalo(drawSDF(ot,Ts,Do||[0,0,0,1]),{x:0,y:0,width:Ts.width,height:Ts.height,pixelRatio:Ts.pixelRatio},ar,Mr),gs=void 0):Rs=drawIconHalo(ot,Ts,ar,Mr):(Ts.sdf?(ct||(ct=drawSDF(ot,{x:0,y:0,width:st[0],height:st[1]},{r:1,g:1,b:1,a:1})),Rs=ct):Rs=ot,Cl=[Ts.width,Ts.height],Yr=[Ts.x,Ts.y]),Nn=new Icon({color:gs,img:Rs,imgSize:st,size:Cl,offset:Yr,rotateWithView:ro==="map",scale:Co/Ts.pixelRatio,displacement:wr,declutterMode:us})}wt[xr]=Nn}}Nn&&(++Mt,co=Jt[Mt],(!co||!co.getImage()||co.getFill()||co.getStroke())&&(co=new Style,Jt[Mt]=co),co.setGeometry(vo),Nn.setRotation(yn+deg2rad(getValue(Fn,"layout","icon-rotate",Wt,pn,Rt,hn))),Nn.setOpacity(getValue(Fn,"paint","icon-opacity",Wt,pn,Rt,hn)),Nn.setAnchor(anchor[getValue(Fn,"layout","icon-anchor",Wt,pn,Rt,hn)]),co.setImage(Nn),ko=co.getText(),co.setText(void 0),co.setZIndex(Vo),yo=!0,sn=!1)}else sn=!0}}}if(so==1&&Fn.type==="circle"){++Mt,co=Jt[Mt],(!co||!co.getImage()||co.getFill()||co.getStroke())&&(co=new Style,Jt[Mt]=co);const Qn="circle-radius"in nr?getValue(Fn,"paint","circle-radius",Wt,pn,Rt,hn):5,vo=colorWithOpacity(getValue(Fn,"paint","circle-stroke-color",Wt,pn,Rt,hn),getValue(Fn,"paint","circle-stroke-opacity",Wt,pn,Rt,hn)),Gn=getValue(Fn,"paint","circle-translate",Wt,pn,Rt,hn),ro=colorWithOpacity(getValue(Fn,"paint","circle-color",Wt,pn,Rt,hn),getValue(Fn,"paint","circle-opacity",Wt,pn,Rt,hn)),Co=getValue(Fn,"paint","circle-stroke-width",Wt,pn,Rt,hn),Do=Qn+"."+vo+"."+ro+"."+Co+"."+Gn[0]+"."+Gn[1];Nn=wt[Do],Nn||(Nn=new CircleStyle({radius:Qn,displacement:[Gn[0],-Gn[1]],stroke:vo&&Co>0?new Stroke({width:Co,color:vo}):void 0,fill:ro?new Fill({color:ro}):void 0,declutterMode:"none"}),wt[Do]=Nn),co.setImage(Nn),ko=co.getText(),co.setText(void 0),co.setGeometry(void 0),co.setZIndex(Vo),yo=!0}let kn,Ln,Bn,Eo,Wn,Rn;if("text-field"in qn){Eo=Math.round(getValue(Fn,"layout","text-size",Wt,pn,Rt,hn));const Qn=getValue(Fn,"layout","text-font",Wt,pn,Rt,hn);Bn=getValue(Fn,"layout","text-line-height",Wt,pn,Rt,hn),Ln=mb2css(_?_(Qn,e.metadata?e.metadata["ol:webfonts"]:void 0):Qn,Eo,Bn),Ln.includes("sans-serif")||(Ln+=",sans-serif"),Wn=getValue(Fn,"layout","text-letter-spacing",Wt,pn,Rt,hn),Rn=getValue(Fn,"layout","text-max-width",Wt,pn,Rt,hn);const vo=getValue(Fn,"layout","text-field",Wt,pn,Rt,hn);typeof vo=="object"&&vo.sections?vo.sections.length===1?kn=vo.toString():kn=vo.sections.reduce((Gn,ro,Co)=>{const Do=ro.fontStack?ro.fontStack.split(","):Qn,Mr=mb2css(_?_(Do):Do,Eo*(ro.scale||1),Bn);let ar=ro.text;if(ar===`
`)return Gn.push(`
`,""),Gn;if(so==2){Gn.push(applyLetterSpacing(ar,Wn),Mr);return}ar=wrapText(ar,Mr,Rn,Wn).split(`
`);for(let xr=0,us=ar.length;xr<us;++xr)xr>0&&Gn.push(`
`,""),Gn.push(ar[xr],Mr);return Gn},[]):kn=fromTemplate(vo,Mn).trim(),Dn=getValue(Fn,"paint","text-opacity",Wt,pn,Rt,hn)}if(kn&&Dn&&!sn){yo||(++Mt,co=Jt[Mt],(!co||!co.getText()||co.getFill()||co.getStroke())&&(co=new Style,Jt[Mt]=co),co.setImage(void 0),co.setGeometry(void 0));const Qn=getDeclutterMode(Fn,Wt,pn,"text",Rt);co.getText()||co.setText(ko),ko=co.getText(),(!ko||"getDeclutterMode"in ko&&ko.getDeclutterMode()!==Qn)&&(ko=new Text$2({padding:[2,2,2,2],declutterMode:Qn}),co.setText(ko));const vo=getValue(Fn,"layout","text-transform",Wt,pn,Rt,hn);vo=="uppercase"?kn=Array.isArray(kn)?kn.map((Dl,or)=>or%2?Dl:Dl.toUpperCase()):kn.toUpperCase():vo=="lowercase"&&(kn=Array.isArray(kn)?kn.map((Dl,or)=>or%2?Dl:Dl.toLowerCase()):kn.toLowerCase());const Gn=Array.isArray(kn)?kn:so==2?applyLetterSpacing(kn,Wn):wrapText(kn,Ln,Rn,Wn);ko.setText(Gn),ko.setFont(Ln),ko.setRotation(deg2rad(getValue(Fn,"layout","text-rotate",Wt,pn,Rt,hn)));const ro=getValue(Fn,"layout","text-anchor",Wt,pn,Rt,hn),Co=yo||so==1?"point":getValue(Fn,"layout","symbol-placement",Wt,pn,Rt,hn);let Do;if(Co==="line-center"?(ko.setPlacement("line"),Do="center"):ko.setPlacement(Co),Co==="line"&&typeof ko.setRepeat=="function"){const Dl=getValue(Fn,"layout","symbol-spacing",Wt,pn,Rt,hn);ko.setRepeat(Dl*2)}ko.setOverflow(Co==="point");let Mr=getValue(Fn,"paint","text-halo-width",Wt,pn,Rt,hn);const ar=getValue(Fn,"layout","text-offset",Wt,pn,Rt,hn),xr=getValue(Fn,"paint","text-translate",Wt,pn,Rt,hn);let us=0,wr=0;if(Co=="point"){Do="center",ro.indexOf("left")!==-1?(Do="left",wr=Mr):ro.indexOf("right")!==-1&&(Do="right",wr=-Mr);const Dl=getValue(Fn,"layout","text-rotation-alignment",Wt,pn,Rt,hn);ko.setRotateWithView(Dl=="map")}else ko.setMaxAngle(deg2rad(getValue(Fn,"layout","text-max-angle",Wt,pn,Rt,hn))*kn.length/Gn.length),ko.setRotateWithView(!1);ko.setTextAlign(Do);let gs="middle";ro.indexOf("bottom")==0?(gs="bottom",us=-Mr-.5*(Bn-1)*Eo):ro.indexOf("top")==0&&(gs="top",us=Mr+.5*(Bn-1)*Eo),ko.setTextBaseline(gs);const Ts=getValue(Fn,"layout","text-justify",Wt,pn,Rt,hn);ko.setJustify(Ts==="auto"?void 0:Ts),ko.setOffsetX(ar[0]*Eo+wr+xr[0]),ko.setOffsetY(ar[1]*Eo+us+xr[1]),Gt.setColor(colorWithOpacity(getValue(Fn,"paint","text-color",Wt,pn,Rt,hn),Dn)),ko.setFill(Gt);const Rs=colorWithOpacity(getValue(Fn,"paint","text-halo-color",Wt,pn,Rt,hn),Dn);if(Rs&&Mr>0){Tt.setColor(Rs),Mr*=2;const Dl=.5*Eo;Tt.setWidth(Mr<=Dl?Mr:Dl),ko.setStroke(Tt)}else ko.setStroke(void 0);const Cl=getValue(Fn,"layout","text-padding",Wt,pn,Rt,hn),Yr=ko.getPadding();Cl!==Yr[0]&&(Yr[0]=Cl,Yr[1]=Cl,Yr[2]=Cl,Yr[3]=Cl),co.setZIndex(Vo)}}}if(Mt>-1)return Jt.length=Mt+1,Jt};return o.setStyle(qt),o.set("mapbox-source",Pt),o.set("mapbox-layers",bt),o.set("mapbox-featurestate",o.get("mapbox-featurestate")||{}),qt}function getTileResolutions(o,e=512){return o.getExtent()?createXYZ({extent:o.getExtent(),tileSize:e,maxZoom:22}).getResolutions():defaultResolutions}function completeOptions(o,e){return e.accessToken||(e=Object.assign({},e),new URL(o).searchParams.forEach((a,d)=>{e.accessToken=a,e.accessTokenParam=d})),e}function applyStyle(o,e,s="",a={},d=void 0){let b,_,_e,ot,st=!0;return typeof s!="string"&&!Array.isArray(s)?(_e=s,ot=_e.source||_e.layers,a=_e):ot=s,typeof a=="string"?(b=a,_e={}):(b=a.styleUrl,_e=a),_e.updateSource===!1&&(st=!1),d||(d=_e.resolutions),!b&&typeof e=="string"&&!e.trim().startsWith("{")&&(b=e),b&&(b=b.startsWith("data:")?location.href:normalizeStyleUrl(b,_e.accessToken),_e=completeOptions(b,_e)),new Promise(function(ct,ft){getGlStyle(e,_e).then(function(mt){if(mt.version!=8)return ft(new Error("glStyle version 8 required."));if(!(o instanceof VectorLayer||o instanceof VectorTileLayer))return ft(new Error("Can only apply to VectorLayer or VectorTileLayer"));const bt=o instanceof VectorTileLayer?"vector":"geojson";if(ot?Array.isArray(ot)?_=mt.layers.find(function(Gt){return Gt.id===ot[0]}).source:_=ot:(_=Object.keys(mt.sources).find(function(Gt){return mt.sources[Gt].type===bt}),ot=_),!_)return ft(new Error(`No ${bt} source found in the glStyle.`));function wt(){if(!st)return Promise.resolve();if(o instanceof VectorTileLayer)return setupVectorSource(mt.sources[_],b,_e).then(function(Nt){const Qt=o.getSource();Qt?Nt!==Qt&&(Qt.setTileUrlFunction(Nt.getTileUrlFunction()),typeof Qt.setUrls=="function"&&typeof Nt.getUrls=="function"&&Qt.setUrls(Nt.getUrls()),Qt.format_||(Qt.format_=Nt.format_),Qt.getAttributions()||Qt.setAttributions(Nt.getAttributions()),Qt.getTileLoadFunction()===defaultLoadFunction&&Qt.setTileLoadFunction(Nt.getTileLoadFunction()),equivalent(Qt.getProjection(),Nt.getProjection())&&(Qt.tileGrid=Nt.getTileGrid())):o.setSource(Nt);const fn=o.getSource().getTileGrid();!isFinite(o.getMaxResolution())&&!isFinite(o.getMinZoom())&&fn.getMinZoom()>0&&o.setMaxResolution(getResolutionForZoom(Math.max(0,fn.getMinZoom()-1e-12),fn.getResolutions()))});const Gt=mt.sources[_];let Jt=o.getSource();(!Jt||Jt.get("mapbox-source")!==Gt)&&(Jt=setupGeoJSONSource(Gt,b,_e));const qt=o.getSource();return qt?Jt!==qt&&(qt.getAttributions()||qt.setAttributions(Jt.getAttributions()),qt.format_||(qt.format_=Jt.getFormat()),qt.url_=Jt.getUrl()):o.setSource(Jt),Promise.resolve()}let Ct,Rt,It,Pt;function Tt(){if(!Pt&&(!mt.sprite||Rt)){if(_e.projection&&!d){const Jt=get$3(_e.projection).getUnits();Jt!=="m"&&(d=defaultResolutions.map(qt=>qt/METERS_PER_UNIT$1[Jt]))}Pt=stylefunction(o,mt,ot,d,Rt,It,(Gt,Jt=_e.webfonts)=>getFonts(Gt,Jt),_e.getImage),o.getStyle()?wt().then(ct).catch(ft):ft(new Error(`Nothing to show for source [${_}]`))}else Pt?(o.setStyle(Pt),wt().then(ct).catch(ft)):ft(new Error("Something went wrong trying to apply style."))}if(mt.sprite){const Gt=new URL(normalizeSpriteUrl(mt.sprite,_e.accessToken,b||location.href));Ct=window.devicePixelRatio>=1.5?.5:1;const Jt=Ct==.5?"@2x":"";let qt=Gt.origin+Gt.pathname+Jt+".json"+Gt.search;new Promise(function(Nt,Qt){fetchResource("Sprite",qt,_e).then(Nt).catch(function(fn){qt=Gt.origin+Gt.pathname+".json"+Gt.search,fetchResource("Sprite",qt,_e).then(Nt).catch(Qt)})}).then(function(Nt){if(Nt===void 0&&ft(new Error("No sprites found.")),Rt=Nt,It=Gt.origin+Gt.pathname+Jt+".png"+Gt.search,_e.transformRequest){const Qt=_e.transformRequest(It,"SpriteImage")||It;(Qt instanceof Request||Qt instanceof Promise)&&(It=Qt)}Tt()}).catch(function(Nt){ft(new Error(`Sprites cannot be loaded: ${qt}: ${Nt.message}`))})}else Tt()}).catch(ft)})}function extentFromTileJSON(o,e){const s=o.bounds;if(s){const a=fromLonLat([s[0],s[1]],e),d=fromLonLat([s[2],s[3]],e);return[a[0],a[1],d[0],d[1]]}return get$3(e).getExtent()}function sourceOptionsFromTileJSON(o,e,s){const a=new TileJSON({tileJSON:e,tileSize:o.tileSize||e.tileSize||512}),d=a.getTileJSON(),b=a.getTileGrid(),_=get$3(s.projection||"EPSG:3857"),_e=extentFromTileJSON(d,_),ot=_.getExtent(),st=d.minzoom||0,ct=d.maxzoom||22,ft={attributions:a.getAttributions(),projection:_,tileGrid:new TileGrid({origin:ot?getTopLeft(ot):b.getOrigin(0),extent:_e||b.getExtent(),minZoom:st,resolutions:getTileResolutions(_,e.tileSize).slice(0,ct+1),tileSize:b.getTileSize(0)})};return Array.isArray(d.tiles)?ft.urls=d.tiles:ft.url=d.tiles,ft}function setupVectorSource(o,e,s){return new Promise(function(a,d){getTileJson(o,e,s).then(function({tileJson:b,tileLoadFunction:_}){const _e=sourceOptionsFromTileJSON(o,b,s);_e.tileLoadFunction=_,_e.format=new MVT,a(new VectorTile(_e))}).catch(d)})}function getBboxTemplate(o){return`{bbox-${(o?o.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function setupGeoJSONSource(o,e,s){const a=s.projection?new GeoJSON({dataProjection:s.projection}):new GeoJSON,d=o.data,b={};if(typeof d=="string"){const _e=normalizeSourceUrl(d,s.accessToken,s.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(_e)){const st=(ft,mt,bt)=>{const wt=getBboxTemplate(bt);return _e.replace(wt,`${ft.join(",")}`)},ct=new VectorSource({attributions:o.attribution,format:a,loader:(ft,mt,bt,wt,Ct)=>{const Rt=typeof st=="function"?st(ft,mt,bt):st;fetchResource("GeoJSON",Rt,s).then(It=>{const Pt=ct.getFormat().readFeatures(It,{featureProjection:bt});ct.addFeatures(Pt),wt(Pt)}).catch(It=>{ct.removeLoadedExtent(ft),Ct()})},strategy:bbox});return ct.set("mapbox-source",o),ct}const ot=new VectorSource({attributions:o.attribution,format:a,url:_e,loader:(st,ct,ft,mt,bt)=>{fetchResource("GeoJSON",_e,s).then(wt=>{const Ct=ot.getFormat().readFeatures(wt,{featureProjection:ft});ot.addFeatures(Ct),mt(Ct)}).catch(wt=>{ot.removeLoadedExtent(st),bt()})}});return ot}b.features=a.readFeatures(d,{featureProjection:"EPSG:3857"});const _=new VectorSource(Object.assign({attributions:o.attribution,format:a},b));return _.set("mapbox-source",o),_}var LayerMapBox=class extends VectorTileLayer{constructor(e,s){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var a=e.ssl===!1?"http://":"https://",d=e.configuration;if(!d){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var b=e.layer+"$GEOPORTAIL:GPP:TMS";if(d=Config$1.configuration.getLayerConf(b),!d)throw new Error("ERROR : Layer ID not found into the catalogue !?")}for(var _=null,_e="",ot=e.style,st=0;st<d.styles.length;st++){var ct=d.styles[st];if(ot&&ct.name===ot){_=ct.url,_e=ct.title;break}else if(!ot&&ct.current){ot=ct.name,_=ct.url,_e=ct.title;break}}if(!_)throw new Error("ERROR : Style URL not found !?");_.replace(/(http|https):\/\//,a);var ft=new VectorTile({state:"loading",format:new MVT});ft._originators=d.originators,ft._legends=d.legends,ft._metadata=d.metadata,ft._description=d.description,ft._title=d.title+" ("+_e+")",ft._quicklookUrl=d.quicklookUrl;var mt={source:ft};return Helper$1.mergeParams(mt,s),e.olParams&&!d.originators&&(ft._originators=e.olParams.attributions),super(mt),this.name=e.layer,this.service="TMS",this.protocol=a,this.sourceId=e.source,this.styleUrl=_,this.setStyleMapBox(),this}setStyleMapBox(){var e=this;fetch(this.styleUrl,{credentials:"same-origin"}).then(function(s){s.ok&&s.json().then(function(a){e.onStyleMapBoxLoad(a)})}).catch(function(s){e.onStyleMapBoxError(s)})}onStyleMapBoxLoad(e){this.sourceId||(this.sourceId=Object.keys(e.sources)[0]);var s=e.sources[this.sourceId];if(!s){this.onStyleMapBoxError({message:"ERROR : Source ID not found !? !"});return}if(s.type!=="vector"){this.onStyleMapBoxError({message:"ERROR : Source TYPE not permitted !"});return}var a=this.getSource();if(s.url){s.url.replace(/(http|https):\/\//,this.protocol);var d=new TileJSON({url:s.url}),b=this,_=d.on("change",function(){if(d.getState()==="ready"){var ot=d.getTileJSON();if(!ot)return;b.set("mapbox-extensions",ot);for(var st=Array.isArray(ot.tiles)?ot.tiles:[ot.tiles],ct=0;ct<s.tiles.length;ct++)st[ct].replace(/(http|https):\/\//,this.protocol);a.setUrls(st),unByKey(_)}})}if(s.tiles){for(var _e=0;_e<s.tiles.length;_e++)s.tiles[_e].replace(/(http|https):\/\//,this.protocol);a.setUrls(s.tiles)}applyStyle(this,e,this.sourceId).then(()=>{a.setState("ready"),this.set("mapbox-styles",e)}).catch(ot=>{this.onStyleMapBoxError(ot)})}onStyleMapBoxError(e){var s=this.getSource();s.setState("error"),console.error(e.message)}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalMapBox=LayerMapBox);const stringToHTML=o=>{var e=function(){if(!window.DOMParser)return!1;var b=new DOMParser;try{b.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var s=new DOMParser,a=s.parseFromString(o,"text/html");return a.body}var d=document.createElement("div");return d.innerHTML=o,d};var CatalogDOM={_addUID:function(o){var e=this.uid?o+"-"+this.uid:o;return e},_createMainContainerElement:function(){var o=document.createElement("div");return o.id=this._addUID("GPcatalog"),o.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",o},_createShowCatalogPictoElement:function(){var o=this,e=document.createElement("button"),s=document.createElement("span");return e.appendChild(s),e.id=this._addUID("GPshowCatalogPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowCatalogPicto gpf-btn gpf-btn--secondary gpf-btn-icon gpf-btn-icon-catalog fr-btn fr-btn--secondary",e.setAttribute("aria-label","Catalogue de donnes"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),o.onShowCatalogClick(a)}):e.attachEvent&&e.attachEvent("onclick",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),o.onShowCatalogClick(a)}),e},_createCatalogPanelElement:function(){var o=document.createElement("dialog");return o.id=this._addUID("GPcatalogPanel"),o.className="GPpanel gpf-panel fr-modal",o},_createCatalogPanelDivElement:function(){var o=document.createElement("div");return o.className="gpf-panel__body fr-modal__body",o},_createCatalogPanelContentDivElement:function(){var o=document.createElement("div");return o.className="gpf-panel__content fr-modal__content",o},_createCatalogPanelHeaderElement:function(){var o=document.createElement("div");return o.className="GPpanelHeader gpf-panel__header fr-modal__header",o},_createCatalogPanelTitleElement:function(o){var e=document.createElement("div");return e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=o,e},_createCatalogPanelCloseElement:function(){var o=this,e=document.createElement("button");e.id=this._addUID("GPcatalogPanelClose"),e.className="GPpanelClose GPcatalogPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(o._addUID("GPshowCatalogPicto")).click(),o.onCloseCatalogClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(o._addUID("GPshowCatalogPicto")).click(),o.onCloseCatalogClick()});var s=document.createElement("span");return s.className="GPelementHidden gpf-visible",s.innerText="Fermer",e.appendChild(s),e},_createCatalogContentDivElement:function(){var o=stringToHTML('<div class="catalog-container-content" style="padding:10px"></div>');return o.firstChild},_createCatalogContentTitleElement:function(o){var e=stringToHTML(`
        <!-- titre -->
        <div class="catalog-container-title">
            <div class="fr-title">
                <h5 style="margin:unset">${o}</h5>
            </div>
        </div>
        `);return e.firstChild},_createCatalogContentSearchElement:function(){var o=`
        <!-- barre de recherche -->
        <!-- https://www.systeme-de-design.gouv.fr/composants-et-modeles/composants/barre-de-recherche -->
        <div class="catalog-container-search" style="padding-top:10px;padding-bottom:20px">
            <div class="fr-search-bar" id="header-search" role="search">
                <label class="fr-label" for="search-input">
                    Recherche
                </label>
                <input class="fr-input" placeholder="Rechercher une donne" type="search" id="search-input" name="search-input" incremental>
                <button id="search-button" class="fr-btn" title="Rechercher">
                    Rechercher
                </button>
            </div>
        </div>
        `,e=stringToHTML(o);const s=e.attachShadow({mode:"open"});s.innerHTML=o.trim();var a=s.getElementById("search-button");a&&a.addEventListener("click",()=>{this.onSearchCatalogButtonClick()});var d=s.getElementById("search-input");return d&&d.addEventListener("search",()=>{this.onSearchCatalogInputChange()}),s},_createCatalogWaitingElement:function(){var o=document.createElement("div");o.id=this._addUID("GPcatalogCalcWaitingContainer"),o.className="GPwaitingContainerHidden gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",o.appendChild(e),o},_createCatalogContentCategoriesTabs:function(o){var e="",s=(Ct,Rt,It,Pt)=>{var Tt="GPtabButton fr-tabs__tab",Gt="false",Jt=-1;return Pt&&(Tt="GPtabButton GPtabButtonActive fr-tabs__tab",Gt="true",Jt=0),`
            <li class="GPtabList" role="presentation">
                <button id="tabbutton-${Ct}_${Rt}" class="${Tt}" tabindex="${Jt}" role="tabbutton" aria-selected="${Gt}" aria-controls="tabpanel-${Ct}-panel_${Rt}">${It}</button>
            </li>
            `},a="",d=Ct=>{var Rt=Ct.default?"checked":"";return`
            <!-- sous categorie -->
            <div class="fr-fieldset__element fr-fieldset__element--inline">
                <div class="fr-radio-group fr-radio-group--sm">
                    <input type="radio" id="radio-inline_${Ct.id}" name="radio-inline" ${Rt} aria-controls="tabcontent-${Ct.id}">
                    <label class="fr-label" for="radio-inline_${Ct.id}">
                        ${Ct.title}
                    </label>
                </div>
            </div>
            `},b=(Ct,Rt)=>{var It="";for(let Tt=0;Tt<Rt.length;Tt++){const Gt=Rt[Tt];a+=d(Gt);var Pt="";Gt.default||(Pt="GPelementHidden gpf-hidden"),It+=`<div class="tabcontent ${Pt}" role="tabpanel-section" id="tabcontent-${Gt.id}"></div>`}return`
            <!-- sous categories -->
            <fieldset class="fr-fieldset" id="radio-inline_${Ct}" aria-labelledby="radio-inline-legend radio-inline-messages">
                ${a}
                <div class="fr-messages-group" id="radio-inline-messages" aria-live="assertive"></div>
            </fieldset>
            ${It}
            `},_="",_e=(Ct,Rt,It,Pt)=>{var Tt="GPtabContent fr-tabs__panel",Gt=-1;It&&(Tt="GPtabContent GPtabContentSelected fr-tabs__panel fr-tabs__panel--selected",Gt=0);var Jt='<div class="tabcontent"></div>';return Pt&&(Jt=b(Rt,Pt)),`
            <!-- panneaux -->
            <div id="tabpanel-${Ct}-panel_${Rt}" class="${Tt}" role="tabpanel" aria-labelledby="tabbutton-${Ct}_${Rt}" tabindex="${Gt}" style="max-height: 250px;overflow-y: auto;">
                ${Jt}
            </div>
            `};for(let Ct=0;Ct<o.length;Ct++){const Rt=o[Ct];e+=s(Ct,Rt.id,Rt.title,Rt.default),_+=_e(Ct,Rt.id,Rt.default,Rt.items)}var ot=`
        <!-- onglets -->
        <div class="catalog-container-tabs">
            <div class="GPtabs fr-tabs">
                <ul class="GPtabsList fr-tabs__list" role="tablist" aria-label="[A modifier | nom du systme d'onglet]">
                    ${e}
                </ul>
                ${_}
            </div>
        </div>
        `,st=stringToHTML(ot.trim());const ct=st.attachShadow({mode:"open"});ct.innerHTML=ot.trim();var ft=ct.querySelectorAll('[role="tabpanel-section"]'),mt=ct.querySelectorAll('[name="radio-inline"]');mt&&mt.forEach(Ct=>{Ct.addEventListener("change",Rt=>{for(let Pt=0;Pt<ft.length;Pt++){const Tt=ft[Pt];Tt.classList.add("gpf-hidden"),Tt.classList.add("GPelementHidden")}var It=document.getElementById(Rt.target.getAttribute("aria-controls"));It.classList.remove("gpf-hidden"),It.classList.remove("GPelementHidden")})});var bt=ct.querySelectorAll('[role="tabpanel"]'),wt=ct.querySelectorAll('[role="tabbutton"]');return wt&&wt.forEach(Ct=>{Ct.addEventListener("click",Rt=>{for(let Pt=0;Pt<wt.length;Pt++){const Tt=wt[Pt];Tt.setAttribute("tabindex",-1),Tt.ariaSelected=!1,Tt.classList.remove("GPtabButtonActive")}Rt.target.setAttribute("tabindex",0),Rt.target.ariaSelected=!0,Rt.target.classList.add("GPtabButtonActive");for(let Pt=0;Pt<bt.length;Pt++){const Tt=bt[Pt];Tt.setAttribute("tabindex",-1),Tt.classList.remove("fr-tabs__panel--selected"),Tt.classList.remove("GPtabContentSelected"),Tt.classList.add("gpf-hidden"),Tt.classList.add("GPelementHidden")}var It=document.getElementById(Rt.target.getAttribute("aria-controls"));It.setAttribute("tabindex",0),It.classList.add("fr-tabs__panel--selected"),It.classList.add("GPtabContentSelected"),It.classList.remove("gpf-hidden"),It.classList.remove("GPelementHidden"),this.onSelectCatalogTabClick(Rt)})}),ct},_createCatalogContentCategoryTabContent:function(o,e){var s=Object.values(e),a="",d=(Tt,Gt,Jt,qt,Nt)=>`
            <div class="fr-fieldset__element" id="fieldset-${Nt}_${Gt}-${qt}">
                <div class="fr-checkbox-group">
                    <input
                        name="checkboxes-${Nt}"
                        id="checkboxes-${Nt}-${Tt}_${Gt}-${qt}"
                        type="checkbox"
                        data-layer="${Gt}:${qt}"
                        aria-describedby="checkboxes-messages-${Nt}-${Tt}_${Gt}-${qt}">
                    <label class="GPlabelActive fr-label" for="checkboxes-${Nt}-${Tt}_${Gt}-${qt}" title="${Jt}">
                        ${Jt} (${qt})
                    </label>
                    <div class="fr-messages-group" id="checkboxes-messages-${Nt}-${Tt}_${Gt}-${qt}" aria-live="assertive"></div>
                </div>
            </div>
            `,b=(Tt,Gt,Jt,qt,Nt)=>`
            <!-- section -->
            <section class="fr-accordion" style="width:100%;">
                <h3 class="fr-accordion__title">
                    <button class="GPcatalogButtonSection fr-accordion__btn" role="button-collapse-${Gt}" aria-expanded="false" aria-controls="accordion-${Tt}">
                        <span class="GPshowCatalogAdvancedTools gpf-hidden" role="button-icon-collapse-${Gt}"></span>${Jt}
                    </button>
                </h3>
                <div class="fr-collapse GPelementHidden" id="accordion-${Tt}">
                    ${Nt}
                </div>
            </section>
            `,_=o.section;_&&(s=s.sort((Tt,Gt)=>Tt[o.filter.field].localeCompare(Gt[o.filter.field])));var _e={};for(let Tt=0;Tt<s.length;Tt++){const Gt=s[Tt];if(_){var ot=Gt[o.filter.field];ot&&(_e.hasOwnProperty(ot)||(_e[ot]=""),_e[ot]+=d(Tt,Gt.name,Gt.title,Gt.service,o.id))}else a+=d(Tt,Gt.name,Gt.title,Gt.service,o.id)}if(_){for(const Tt in _e)if(Object.prototype.hasOwnProperty.call(_e,Tt)){const Gt=_e[Tt];var st=[...Gt.matchAll(/fr-fieldset__element/g)].length,ct=Math.abs(Array.from(Tt).reduce((Jt,qt)=>Math.imul(31,Jt)+qt.charCodeAt(0)|0,0));a+=b(ct,o.id,Tt,st,Gt)}}var ft=`
            <!-- liste de couches -->
            <fieldset class="fr-fieldset" id="checkboxes-${o.id}" aria-labelledby="checkboxes-legend checkboxes-messages">
                ${a}
            </fieldset>
        `,mt=stringToHTML(ft);const bt=mt.attachShadow({mode:"open"});bt.innerHTML=ft.trim();var wt=`checkboxes-${o.id}`,Ct=bt.querySelectorAll('[name="'+wt+'"]');Ct&&Ct.forEach(Tt=>{Tt.addEventListener("click",Gt=>{this.onSelectCatalogEntryClick(Gt)})});var Rt=`button-collapse-${o.id}`,It=bt.querySelectorAll('[role="'+Rt+'"]');It&&It.forEach(Tt=>{Tt.addEventListener("click",Gt=>{Gt.target.ariaExpanded=Gt.target.ariaExpanded!=="true";var Jt=document.getElementById(Gt.target.getAttribute("aria-controls"));Jt&&(Gt.target.ariaExpanded==="true"?(Jt.classList.add("fr-collapse--expanded"),Jt.classList.remove("GPelementHidden")):(Jt.classList.remove("fr-collapse--expanded"),Jt.classList.add("GPelementHidden")))},!1)}),`${o.id}`;var Pt=bt.querySelectorAll('[role="'+Rt+'"]');return Pt&&Pt.forEach(Tt=>{Tt.addEventListener("click",Gt=>{Gt.target.parentElement.click()})}),bt}},logger$5=LoggerByDefault$1.getLogger("widget"),Catalog=class cle extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof cle))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this.showWaiting(),this.initLayersList().then(s=>{logger$5.trace(this,s),this.hideWaiting(),this.dispatchEvent({type:"catalog:loaded",data:s})}).catch(s=>{this.hideWaiting(),logger$5.error(s)}),this}setMap(e){e?(this.draggable&&Draggable.dragElement(this.panelCatalogContainer,this.panelCatalogHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonCatalogShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):this.auto&&this.removeEventsListeners(),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getContainer(){return this.container}initialize(e){this.uid=SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,titlePrimary:"Grer vos couches de donnes",titleSecondary:"",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Donnes",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]}},Helper$1.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.eventsListeners=[],this.buttonCatalogShow=null,this.panelCatalogContainer=null,this.panelCatalogHeaderContainer=null,this.buttonCatalogClose=null,this.contentCatalogContainer=null,this.waitingContainer=null,this.layersList=[],this.categories=this.options.categories.map(s=>{var a=s.items;return s.items&&(a=s.items.map(d=>({title:d.title,id:d.id||Math.abs(Array.from(d.title).reduce((b,_)=>Math.imul(31,b)+_.charCodeAt(0)|0,0)),section:d.hasOwnProperty("section")?d.section:!1,default:d.hasOwnProperty("default")?d.default:!1,filter:d.filter||null}))),{title:s.title,id:s.id||Math.abs(Array.from(s.title).reduce((d,b)=>Math.imul(31,d)+b.charCodeAt(0)|0,0)),default:s.hasOwnProperty("default")?s.default:!1,filter:s.filter||null,items:a||null}}),this.categoryId=(()=>{var s=this.categories.findIndex(a=>a.default);return s===-1&&(s=0,this.categories[s].default=!0),this.categories[s].id})(),this.layersListOnMap={}}initContainer(){var e=this._createMainContainerElement(),s=this.buttonCatalogShow=this._createShowCatalogPictoElement();e.appendChild(s);var a=this.panelCatalogContainer=this._createCatalogPanelElement(),d=this._createCatalogPanelDivElement();a.appendChild(d);var b=this.panelCatalogHeaderContainer=this._createCatalogPanelHeaderElement(),_=this._createCatalogPanelTitleElement(this.options.titlePrimary);b.appendChild(_);var _e=this.buttonCatalogClose=this._createCatalogPanelCloseElement();b.appendChild(_e),d.appendChild(b);var ot=this._createCatalogPanelContentDivElement(),st=this.contentCatalogContainer=this._createCatalogContentDivElement();st.appendChild(this._createCatalogContentTitleElement(this.options.titleSecondary)),this.options.search.display&&st.appendChild(this._createCatalogContentSearchElement());var ct=this.waitingContainer=this._createCatalogWaitingElement();return st.appendChild(ct),ot.appendChild(st),d.appendChild(ot),e.appendChild(a),logger$5.log(e),e}async initLayersList(){var e=null,s=this;const a=st=>{var ct=s.contentCatalogContainer,ft=s._createCatalogContentCategoriesTabs(this.categories);ct.appendChild(ft);var mt=[];s.categories.forEach(Ct=>{if(Ct.items)for(let Rt=0;Rt<Ct.items.length;Rt++){const It=Ct.items[Rt];mt.push(It)}else mt.push(Ct)});var bt=ct.querySelectorAll(".tabcontent");for(let Ct=0;Ct<bt.length;Ct++){const Rt=bt[Ct];var wt=d(mt[Ct],st);Rt.appendChild(s._createCatalogContentCategoryTabContent(mt[Ct],wt))}},d=(st,ct)=>{var ft=ct,mt=st.filter;if(mt){ft={};for(const wt in ct)if(Object.prototype.hasOwnProperty.call(ct,wt)){const Ct=ct[wt];if(Ct[mt.field]){var bt=Array.isArray(mt.value)?mt.value.includes(Ct[mt.field].toString()):mt.value==="*"||Ct[mt.field].toString()===mt.value;bt&&(ft[wt]=Ct,this.layersList[wt].categories.push(st.id))}}}return ft},b=(st,ct)=>ct;if(this.options.configuration.data){e=this.options.configuration.data||{},Config$1.isConfigLoaded()&&Helper$1.mergeParams(e,Config$1.configuration);for(const st in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,st)){const ct=e.layers[st];var _=ct.serviceParams.id.split(":").slice(-1)[0];ct.service=_,ct.categories=[]}var _e=b(this.options.layerFilter,e.layers);return this.layersList=_e,a(_e),new Promise((st,ct)=>{st(e)})}if(this.options.configuration.urls){var ot=[];for(let st=0;st<this.options.configuration.urls.length;st++){const ct=this.options.configuration.urls[st],ft=function(){return fetch(ct,{}).then(function(mt){if(mt.ok)return mt.json().then(function(wt){return wt}).catch(wt=>{logger$5.warn("fetch json exception :",wt)});var bt=new Error("HTTP status code: "+mt.status);throw bt}).catch(mt=>new Promise((bt,wt)=>{logger$5.error("fetch json exception :",mt),wt(mt)}))};ot.push(ft())}try{const st=await Promise.all(ot);e=st[0];for(let ft=1;ft<st.length;ft++){const mt=st[ft];Helper$1.mergeParams(e,mt)}Config$1.isConfigLoaded()&&Helper$1.mergeParams(e,Config$1.configuration);for(const ft in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,ft)){const mt=e.layers[ft];var _=mt.serviceParams.id.split(":").slice(-1)[0];mt.service=_,mt.categories=[]}var _e=b(this.options.layerFilter,e.layers);return this.layersList=_e,a(_e),await new Promise((ft,mt)=>{ft(e)})}catch(st){return await new Promise((ct,ft)=>{ft(st)})}}}addEventsListeners(e){var s=this;this.eventsListeners["map:add"]=function(a){logger$5.trace(a);var d=a.element.name,b=a.element.service;s.layersListOnMap[d+":"+b]=a.element;var _=document.querySelectorAll(`input[data-layer="${d}:${b}"]`);_&&_.forEach(_e=>{_e.checked=!0})},e.getLayers().on("add",this.eventsListeners["map:add"]),this.eventsListeners["map:remove"]=function(a){logger$5.trace(a);var d=a.element.name,b=a.element.service;delete s.layersListOnMap[d+":"+b];var _=document.querySelectorAll(`input[data-layer="${d}:${b}"]`);_&&_.forEach(_e=>{_e.checked=!1})},e.getLayers().on("remove",this.eventsListeners["map:remove"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["map:add"]),delete this.eventsListeners["map:add"],e.getLayers().un("remove",this.eventsListeners["map:remove"]),delete this.eventsListeners["map:remove"]}addLayer(e,s){var a=null;switch(s){case"WMS":a=new LayerWMS({layer:e});break;case"WMTS":a=new LayerWMTS({layer:e});break;case"TMS":a=new LayerMapBox({layer:e})}if(a){var d=this.getMap();d.addLayer(a),this.layersListOnMap[e+":"+s]=a}}removeLayer(e,s){var a=this.layersListOnMap[e+":"+s];if(a){var d=this.getMap();d.removeLayer(a),delete this.layersListOnMap[e+":"+s]}}hideWaiting(){this.waitingContainer.className="GPwaitingContainerHidden  gpf-waiting--hidden"}showWaiting(){this.waitingContainer.className="GPwaitingContainerVisible gpf-waiting--visible"}resetFilteredLayersList(){for(const e in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,e)){const s=this.layersList[e];s.hidden=!1,this.updateFilteredLayersListDOM(s.name,s.service,s.hidden)}}setFilteredLayersList(e){var s=this.options.search.criteria;for(const d in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,d)){const b=this.layersList[d];var a="";for(let _=0;_<s.length;_++){const _e=s[_];b[_e]&&(a+=b[_e].toLowerCase())}b.hidden=!a.includes(e.toLowerCase()),this.updateFilteredLayersListDOM(b.name,b.service,b.hidden)}}updateFilteredLayersListDOM(e,s,a){var d=[];this.categories.forEach(_=>{if(_.items)for(let _e=0;_e<_.items.length;_e++){const ot=_.items[_e];d.push(ot.id)}else d.push(_.id)});for(let _=0;_<d.length;_++){const _e=d[_];var b=document.getElementById(`fieldset-${_e}_${e}-${s}`);b&&(a?(b.classList.add("gpf-hidden"),b.classList.add("GPelementHidden")):(b.classList.remove("gpf-hidden"),b.classList.remove("GPelementHidden")))}}onShowCatalogClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$5.trace(e)}onCloseCatalogClick(e){logger$5.trace(e)}onSelectCatalogTabClick(e){logger$5.trace(e);var s=e.target.id,a=s.split("_")[1];this.categoryId=a}onSelectCatalogEntryClick(e){logger$5.trace(e);var s=e.target.id.split("_")[1],a=s.split("-")[0],d=s.split("-")[1],b={};e.target.checked?(this.options.addToMap&&this.addLayer(a,d),this.dispatchEvent({type:"catalog:layer:add",name:a,service:d,layer:b})):(this.options.addToMap&&this.removeLayer(a,d),this.dispatchEvent({type:"catalog:layer:remove",name:a,service:d,layer:b}))}onSearchCatalogButtonClick(){var e=document.getElementById("search-input").value;this.setFilteredLayersList(e)}onSearchCatalogInputChange(){this.onSearchCatalogButtonClick()}};Object.assign(Catalog.prototype,CatalogDOM);Object.assign(Catalog.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Catalog=Catalog);const events=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],FullScreenEventType={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FullScreen extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const s=e.label!==void 0?e.label:"";this.labelNode_=typeof s=="string"?document.createTextNode(s):s;const a=e.labelActive!==void 0?e.labelActive:"";this.labelActiveNode_=typeof a=="string"?document.createTextNode(a):a;const d=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=d,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const s=e.getOwnerDocument();if(isFullScreenSupported(s))if(isFullScreen(s))exitFullScreen(s);else{let a;this.source_?a=typeof this.source_=="string"?s.getElementById(this.source_):this.source_:a=e.getTargetElement(),this.keys_?requestFullScreenWithKeys(a):requestFullScreen(a)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const s=this.isInFullscreen_;this.isInFullscreen_=isFullScreen(e.getOwnerDocument()),s!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN)):(replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,s){s?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const s=this.getMap();s&&s.removeChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let a=0,d=e.length;a<d;++a)unlistenByKey(e[a]);e.length=0;const s=this.getMap();if(s){const a=s.getOwnerDocument();isFullScreenSupported(a)?this.element.classList.remove(CLASS_UNSUPPORTED):this.element.classList.add(CLASS_UNSUPPORTED);for(let d=0,b=events.length;d<b;++d)e.push(listen(a,events[d],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function isFullScreenSupported(o){const e=o.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&o.fullscreenEnabled)}function isFullScreen(o){return!!(o.webkitIsFullScreen||o.fullscreenElement)}function requestFullScreen(o){o.requestFullscreen?o.requestFullscreen():o.webkitRequestFullscreen&&o.webkitRequestFullscreen()}function requestFullScreenWithKeys(o){o.webkitRequestFullscreen?o.webkitRequestFullscreen():requestFullScreen(o)}function exitFullScreen(o){o.exitFullscreen?o.exitFullscreen():o.webkitExitFullscreen&&o.webkitExitFullscreen()}LoggerByDefault$1.getLogger("fullscreen");var GeoportalFullScreen=class extends FullScreen{constructor(e){e=e||{};var s="ol-custom-full-screen";e.className=e.className||s,e.label=e.label||"",e.labelActive=e.labelActive||"",e.activeClassName=e.activeClassName||s+"-true",e.inactiveClassName=e.inactiveClassName||s+"-false",e.tipLabel=e.tipLabel||"Basculer en mode plein cran",super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var s="position-container-"+this.options.position;if(!document.getElementById(s)){var a=document.createElement("div");a.id=s,a.classList.add("position"),a.classList.add(s),this.container.appendChild(a)}this.options.target=this.container.children[s]}}_initContainer(){this._uid=SelectorID.generate(),this.element.id="GPfullScreen-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-full-screen","ol-unselectable","ol-control");var e=this.element.childNodes[0],s=document.createElement("span");e.appendChild(s),e.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPfullScreenPicto","fr-btn","fr-btn--secondary","gpf-btn--secondary","gpf-btn","gpf-btn-icon"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.removeAttribute("title"),e.setAttribute("aria-label",this.options.tipLabel),e.addEventListener?e.addEventListener("click",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d)}):e.attachEvent&&e.attachEvent("onclick",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d)}),this.options.position&&(this.element.style.position="unset")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var s=e.getControls();s.forEach(a=>{a.element.classList.contains("ol-full-screen")&&(a.element.classList.add("ol-hidden"),a.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalFullScreen=GeoportalFullScreen);/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(o,e){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);e&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(o,d).enumerable})),s.push.apply(s,a)}return s}function _objectSpread2(o){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(s),!0).forEach(function(a){_defineProperty(o,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(s,a))})}return o}function _typeof(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(o)}function _defineProperty(o,e,s){return e in o?Object.defineProperty(o,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[e]=s,o}function _extends(){return _extends=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(o,e){if(o==null)return{};var s={},a=Object.keys(o),d,b;for(b=0;b<a.length;b++)d=a[b],!(e.indexOf(d)>=0)&&(s[d]=o[d]);return s}function _objectWithoutProperties(o,e){if(o==null)return{};var s=_objectWithoutPropertiesLoose(o,e),a,d;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(o);for(d=0;d<b.length;d++)a=b[d],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}var version="1.15.3";function userAgent(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(o,e,s){o.addEventListener(e,s,!IE11OrLess&&captureMode)}function off(o,e,s){o.removeEventListener(e,s,!IE11OrLess&&captureMode)}function matches$1(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch{return!1}return!1}}function getParentOrHost(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function closest(o,e,s,a){if(o){s=s||document;do{if(e!=null&&(e[0]===">"?o.parentNode===s&&matches$1(o,e):matches$1(o,e))||a&&o===s)return o;if(o===s)break}while(o=getParentOrHost(o))}return null}var R_SPACE=/\s+/g;function toggleClass(o,e,s){if(o&&e)if(o.classList)o.classList[s?"add":"remove"](e);else{var a=(" "+o.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");o.className=(a+(s?" "+e:"")).replace(R_SPACE," ")}}function css(o,e,s){var a=o&&o.style;if(a){if(s===void 0)return document.defaultView&&document.defaultView.getComputedStyle?s=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(s=o.currentStyle),e===void 0?s:s[e];!(e in a)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),a[e]=s+(typeof s=="string"?"":"px")}}function matrix(o,e){var s="";if(typeof o=="string")s=o;else do{var a=css(o,"transform");a&&a!=="none"&&(s=a+" "+s)}while(!e&&(o=o.parentNode));var d=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return d&&new d(s)}function find$1(o,e,s){if(o){var a=o.getElementsByTagName(e),d=0,b=a.length;if(s)for(;d<b;d++)s(a[d],d);return a}return[]}function getWindowScrollingElement(){var o=document.scrollingElement;return o||document.documentElement}function getRect(o,e,s,a,d){if(!(!o.getBoundingClientRect&&o!==window)){var b,_,_e,ot,st,ct,ft;if(o!==window&&o.parentNode&&o!==getWindowScrollingElement()?(b=o.getBoundingClientRect(),_=b.top,_e=b.left,ot=b.bottom,st=b.right,ct=b.height,ft=b.width):(_=0,_e=0,ot=window.innerHeight,st=window.innerWidth,ct=window.innerHeight,ft=window.innerWidth),(e||s)&&o!==window&&(d=d||o.parentNode,!IE11OrLess))do if(d&&d.getBoundingClientRect&&(css(d,"transform")!=="none"||s&&css(d,"position")!=="static")){var mt=d.getBoundingClientRect();_-=mt.top+parseInt(css(d,"border-top-width")),_e-=mt.left+parseInt(css(d,"border-left-width")),ot=_+b.height,st=_e+b.width;break}while(d=d.parentNode);if(a&&o!==window){var bt=matrix(d||o),wt=bt&&bt.a,Ct=bt&&bt.d;bt&&(_/=Ct,_e/=wt,ft/=wt,ct/=Ct,ot=_+ct,st=_e+ft)}return{top:_,left:_e,bottom:ot,right:st,width:ft,height:ct}}}function isScrolledPast(o,e,s){for(var a=getParentAutoScrollElement(o,!0),d=getRect(o)[e];a;){var b=getRect(a)[s],_=void 0;if(_=d>=b,!_)return a;if(a===getWindowScrollingElement())break;a=getParentAutoScrollElement(a,!1)}return!1}function getChild(o,e,s,a){for(var d=0,b=0,_=o.children;b<_.length;){if(_[b].style.display!=="none"&&_[b]!==Sortable.ghost&&(a||_[b]!==Sortable.dragged)&&closest(_[b],s.draggable,o,!1)){if(d===e)return _[b];d++}b++}return null}function lastChild(o,e){for(var s=o.lastElementChild;s&&(s===Sortable.ghost||css(s,"display")==="none"||e&&!matches$1(s,e));)s=s.previousElementSibling;return s||null}function index(o,e){var s=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==Sortable.clone&&(!e||matches$1(o,e))&&s++;return s}function getRelativeScrollOffset(o){var e=0,s=0,a=getWindowScrollingElement();if(o)do{var d=matrix(o),b=d.a,_=d.d;e+=o.scrollLeft*b,s+=o.scrollTop*_}while(o!==a&&(o=o.parentNode));return[e,s]}function indexOfObject(o,e){for(var s in o)if(o.hasOwnProperty(s)){for(var a in e)if(e.hasOwnProperty(a)&&e[a]===o[s][a])return Number(s)}return-1}function getParentAutoScrollElement(o,e){if(!o||!o.getBoundingClientRect)return getWindowScrollingElement();var s=o,a=!1;do if(s.clientWidth<s.scrollWidth||s.clientHeight<s.scrollHeight){var d=css(s);if(s.clientWidth<s.scrollWidth&&(d.overflowX=="auto"||d.overflowX=="scroll")||s.clientHeight<s.scrollHeight&&(d.overflowY=="auto"||d.overflowY=="scroll")){if(!s.getBoundingClientRect||s===document.body)return getWindowScrollingElement();if(a||e)return s;a=!0}}while(s=s.parentNode);return getWindowScrollingElement()}function extend$1(o,e){if(o&&e)for(var s in e)e.hasOwnProperty(s)&&(o[s]=e[s]);return o}function isRectEqual(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var _throttleTimeout;function throttle(o,e){return function(){if(!_throttleTimeout){var s=arguments,a=this;s.length===1?o.call(a,s[0]):o.apply(a,s),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(o,e,s){o.scrollLeft+=e,o.scrollTop+=s}function clone(o){var e=window.Polymer,s=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):s?s(o).clone(!0)[0]:o.cloneNode(!0)}function getChildContainingRectFromElement(o,e,s){var a={};return Array.from(o.children).forEach(function(d){var b,_,_e,ot;if(!(!closest(d,e.draggable,o,!1)||d.animated||d===s)){var st=getRect(d);a.left=Math.min((b=a.left)!==null&&b!==void 0?b:1/0,st.left),a.top=Math.min((_=a.top)!==null&&_!==void 0?_:1/0,st.top),a.right=Math.max((_e=a.right)!==null&&_e!==void 0?_e:-1/0,st.right),a.bottom=Math.max((ot=a.bottom)!==null&&ot!==void 0?ot:-1/0,st.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(d){if(!(css(d,"display")==="none"||d===Sortable.ghost)){o.push({target:d,rect:getRect(d)});var b=_objectSpread2({},o[o.length-1].rect);if(d.thisAnimationDuration){var _=matrix(d,!0);_&&(b.top-=_.f,b.left-=_.e)}d.fromRect=b}})}},addAnimationState:function(a){o.push(a)},removeAnimationState:function(a){o.splice(indexOfObject(o,{target:a}),1)},animateAll:function(a){var d=this;if(!this.options.animation){clearTimeout(e),typeof a=="function"&&a();return}var b=!1,_=0;o.forEach(function(_e){var ot=0,st=_e.target,ct=st.fromRect,ft=getRect(st),mt=st.prevFromRect,bt=st.prevToRect,wt=_e.rect,Ct=matrix(st,!0);Ct&&(ft.top-=Ct.f,ft.left-=Ct.e),st.toRect=ft,st.thisAnimationDuration&&isRectEqual(mt,ft)&&!isRectEqual(ct,ft)&&(wt.top-ft.top)/(wt.left-ft.left)===(ct.top-ft.top)/(ct.left-ft.left)&&(ot=calculateRealTime(wt,mt,bt,d.options)),isRectEqual(ft,ct)||(st.prevFromRect=ct,st.prevToRect=ft,ot||(ot=d.options.animation),d.animate(st,wt,ft,ot)),ot&&(b=!0,_=Math.max(_,ot),clearTimeout(st.animationResetTimer),st.animationResetTimer=setTimeout(function(){st.animationTime=0,st.prevFromRect=null,st.fromRect=null,st.prevToRect=null,st.thisAnimationDuration=null},ot),st.thisAnimationDuration=ot)}),clearTimeout(e),b?e=setTimeout(function(){typeof a=="function"&&a()},_):typeof a=="function"&&a(),o=[]},animate:function(a,d,b,_){if(_){css(a,"transition",""),css(a,"transform","");var _e=matrix(this.el),ot=_e&&_e.a,st=_e&&_e.d,ct=(d.left-b.left)/(ot||1),ft=(d.top-b.top)/(st||1);a.animatingX=!!ct,a.animatingY=!!ft,css(a,"transform","translate3d("+ct+"px,"+ft+"px,0)"),this.forRepaintDummy=repaint(a),css(a,"transition","transform "+_+"ms"+(this.options.easing?" "+this.options.easing:"")),css(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){css(a,"transition",""),css(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},_)}}}}function repaint(o){return o.offsetWidth}function calculateRealTime(o,e,s,a){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-s.top,2)+Math.pow(e.left-s.left,2))*a.animation}var plugins=[],defaults$1={initializeByDefault:!0},PluginManager={mount:function(e){for(var s in defaults$1)defaults$1.hasOwnProperty(s)&&!(s in e)&&(e[s]=defaults$1[s]);plugins.forEach(function(a){if(a.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),plugins.push(e)},pluginEvent:function(e,s,a){var d=this;this.eventCanceled=!1,a.cancel=function(){d.eventCanceled=!0};var b=e+"Global";plugins.forEach(function(_){s[_.pluginName]&&(s[_.pluginName][b]&&s[_.pluginName][b](_objectSpread2({sortable:s},a)),s.options[_.pluginName]&&s[_.pluginName][e]&&s[_.pluginName][e](_objectSpread2({sortable:s},a)))})},initializePlugins:function(e,s,a,d){plugins.forEach(function(_e){var ot=_e.pluginName;if(!(!e.options[ot]&&!_e.initializeByDefault)){var st=new _e(e,s,e.options);st.sortable=e,st.options=e.options,e[ot]=st,_extends(a,st.defaults)}});for(var b in e.options)if(e.options.hasOwnProperty(b)){var _=this.modifyOption(e,b,e.options[b]);typeof _<"u"&&(e.options[b]=_)}},getEventProperties:function(e,s){var a={};return plugins.forEach(function(d){typeof d.eventProperties=="function"&&_extends(a,d.eventProperties.call(s[d.pluginName],e))}),a},modifyOption:function(e,s,a){var d;return plugins.forEach(function(b){e[b.pluginName]&&b.optionListeners&&typeof b.optionListeners[s]=="function"&&(d=b.optionListeners[s].call(e[b.pluginName],a))}),d}};function dispatchEvent$1(o){var e=o.sortable,s=o.rootEl,a=o.name,d=o.targetEl,b=o.cloneEl,_=o.toEl,_e=o.fromEl,ot=o.oldIndex,st=o.newIndex,ct=o.oldDraggableIndex,ft=o.newDraggableIndex,mt=o.originalEvent,bt=o.putSortable,wt=o.extraEventProperties;if(e=e||s&&s[expando],!!e){var Ct,Rt=e.options,It="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?Ct=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(Ct=document.createEvent("Event"),Ct.initEvent(a,!0,!0)),Ct.to=_||s,Ct.from=_e||s,Ct.item=d||s,Ct.clone=b,Ct.oldIndex=ot,Ct.newIndex=st,Ct.oldDraggableIndex=ct,Ct.newDraggableIndex=ft,Ct.originalEvent=mt,Ct.pullMode=bt?bt.lastPutMode:void 0;var Pt=_objectSpread2(_objectSpread2({},wt),PluginManager.getEventProperties(a,e));for(var Tt in Pt)Ct[Tt]=Pt[Tt];s&&s.dispatchEvent(Ct),Rt[It]&&Rt[It].call(e,Ct)}}var _excluded=["evt"],pluginEvent=function(e,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=a.evt,b=_objectWithoutProperties(a,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,s,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:d,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(_e){_dispatchEvent({sortable:s,name:_e,originalEvent:d})}},b))};function _dispatchEvent(o){dispatchEvent$1(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},o))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),_detectDirection=function(e,s){var a=css(e),d=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),b=getChild(e,0,s),_=getChild(e,1,s),_e=b&&css(b),ot=_&&css(_),st=_e&&parseInt(_e.marginLeft)+parseInt(_e.marginRight)+getRect(b).width,ct=ot&&parseInt(ot.marginLeft)+parseInt(ot.marginRight)+getRect(_).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(b&&_e.float&&_e.float!=="none"){var ft=_e.float==="left"?"left":"right";return _&&(ot.clear==="both"||ot.clear===ft)?"vertical":"horizontal"}return b&&(_e.display==="block"||_e.display==="flex"||_e.display==="table"||_e.display==="grid"||st>=d&&a[CSSFloatProperty]==="none"||_&&a[CSSFloatProperty]==="none"&&st+ct>d)?"vertical":"horizontal"},_dragElInRowColumn=function(e,s,a){var d=a?e.left:e.top,b=a?e.right:e.bottom,_=a?e.width:e.height,_e=a?s.left:s.top,ot=a?s.right:s.bottom,st=a?s.width:s.height;return d===_e||b===ot||d+_/2===_e+st/2},_detectNearestEmptySortable=function(e,s){var a;return sortables.some(function(d){var b=d[expando].options.emptyInsertThreshold;if(!(!b||lastChild(d))){var _=getRect(d),_e=e>=_.left-b&&e<=_.right+b,ot=s>=_.top-b&&s<=_.bottom+b;if(_e&&ot)return a=d}}),a},_prepareGroup=function(e){function s(b,_){return function(_e,ot,st,ct){var ft=_e.options.group.name&&ot.options.group.name&&_e.options.group.name===ot.options.group.name;if(b==null&&(_||ft))return!0;if(b==null||b===!1)return!1;if(_&&b==="clone")return b;if(typeof b=="function")return s(b(_e,ot,st,ct),_)(_e,ot,st,ct);var mt=(_?_e:ot).options.group.name;return b===!0||typeof b=="string"&&b===mt||b.join&&b.indexOf(mt)>-1}}var a={},d=e.group;(!d||_typeof(d)!="object")&&(d={name:d}),a.name=d.name,a.checkPull=s(d.pull,!0),a.checkPut=s(d.put),a.revertClone=d.revertClone,e.group=a},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(o){if(ignoreNextClick)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var s=_detectNearestEmptySortable(e.clientX,e.clientY);if(s){var a={};for(var d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);a.target=a.rootEl=s,a.preventDefault=void 0,a.stopPropagation=void 0,s[expando]._onDragOver(a)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=_extends({},e),o[expando]=this;var s={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(_,_e){_.setData("Text",_e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,o,s);for(var a in s)!(a in e)&&(e[a]=s[a]);_prepareGroup(e);for(var d in this)d.charAt(0)==="_"&&typeof this[d]=="function"&&(this[d]=this[d].bind(this));this.nativeDraggable=e.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(o,"pointerdown",this._onTapStart):(on(o,"mousedown",this._onTapStart),on(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(o,"dragover",this),on(o,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lastTarget=null)},_getDirection:function(e,s){return typeof this.options.direction=="function"?this.options.direction.call(this,e,s,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var s=this,a=this.el,d=this.options,b=d.preventOnFilter,_=e.type,_e=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,ot=(_e||e).target,st=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||ot,ct=d.filter;if(_saveInputCheckedState(a),!dragEl&&!(/mousedown|pointerdown/.test(_)&&e.button!==0||d.disabled)&&!st.isContentEditable&&!(!this.nativeDraggable&&Safari&&ot&&ot.tagName.toUpperCase()==="SELECT")&&(ot=closest(ot,d.draggable,a,!1),!(ot&&ot.animated)&&lastDownEl!==ot)){if(oldIndex=index(ot),oldDraggableIndex=index(ot,d.draggable),typeof ct=="function"){if(ct.call(this,e,ot,this)){_dispatchEvent({sortable:s,rootEl:st,name:"filter",targetEl:ot,toEl:a,fromEl:a}),pluginEvent("filter",s,{evt:e}),b&&e.cancelable&&e.preventDefault();return}}else if(ct&&(ct=ct.split(",").some(function(ft){if(ft=closest(st,ft.trim(),a,!1),ft)return _dispatchEvent({sortable:s,rootEl:ft,name:"filter",targetEl:ot,fromEl:a,toEl:a}),pluginEvent("filter",s,{evt:e}),!0}),ct)){b&&e.cancelable&&e.preventDefault();return}d.handle&&!closest(st,d.handle,a,!1)||this._prepareDragStart(e,_e,ot)}}},_prepareDragStart:function(e,s,a){var d=this,b=d.el,_=d.options,_e=b.ownerDocument,ot;if(a&&!dragEl&&a.parentNode===b){var st=getRect(a);if(rootEl=b,dragEl=a,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=a,activeGroup=_.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(s||e).clientX,clientY:(s||e).clientY},tapDistanceLeft=tapEvt.clientX-st.left,tapDistanceTop=tapEvt.clientY-st.top,this._lastX=(s||e).clientX,this._lastY=(s||e).clientY,dragEl.style["will-change"]="all",ot=function(){if(pluginEvent("delayEnded",d,{evt:e}),Sortable.eventCanceled){d._onDrop();return}d._disableDelayedDragEvents(),!FireFox&&d.nativeDraggable&&(dragEl.draggable=!0),d._triggerDragStart(e,s),_dispatchEvent({sortable:d,name:"choose",originalEvent:e}),toggleClass(dragEl,_.chosenClass,!0)},_.ignore.split(",").forEach(function(ct){find$1(dragEl,ct.trim(),_disableDraggable)}),on(_e,"dragover",nearestEmptyInsertDetectEvent),on(_e,"mousemove",nearestEmptyInsertDetectEvent),on(_e,"touchmove",nearestEmptyInsertDetectEvent),on(_e,"mouseup",d._onDrop),on(_e,"touchend",d._onDrop),on(_e,"touchcancel",d._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),_.delay&&(!_.delayOnTouchOnly||s)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(_e,"mouseup",d._disableDelayedDrag),on(_e,"touchend",d._disableDelayedDrag),on(_e,"touchcancel",d._disableDelayedDrag),on(_e,"mousemove",d._delayedDragTouchMoveHandler),on(_e,"touchmove",d._delayedDragTouchMoveHandler),_.supportPointer&&on(_e,"pointermove",d._delayedDragTouchMoveHandler),d._dragStartTimer=setTimeout(ot,_.delay)}else ot()}},_delayedDragTouchMoveHandler:function(e){var s=e.touches?e.touches[0]:e;Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,s){s=s||e.pointerType=="touch"&&e,!this.nativeDraggable||s?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):s?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,s){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:s}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var a=this.options;!e&&toggleClass(dragEl,a.dragClass,!1),toggleClass(dragEl,a.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:s})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),s=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e!==s);)s=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),s)do{if(s[expando]){var a=void 0;if(a=s[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:s}),a&&!this.options.dragoverBubble)break}e=s}while(s=getParentOrHost(s));_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var s=this.options,a=s.fallbackTolerance,d=s.fallbackOffset,b=e.touches?e.touches[0]:e,_=ghostEl&&matrix(ghostEl,!0),_e=ghostEl&&_&&_.a,ot=ghostEl&&_&&_.d,st=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),ct=(b.clientX-tapEvt.clientX+d.x)/(_e||1)+(st?st[0]-ghostRelativeParentInitialScroll[0]:0)/(_e||1),ft=(b.clientY-tapEvt.clientY+d.y)/(ot||1)+(st?st[1]-ghostRelativeParentInitialScroll[1]:0)/(ot||1);if(!Sortable.active&&!awaitingDragStarted){if(a&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<a)return;this._onDragStart(e,!0)}if(ghostEl){_?(_.e+=ct-(lastDx||0),_.f+=ft-(lastDy||0)):_={a:1,b:0,c:0,d:1,e:ct,f:ft};var mt="matrix(".concat(_.a,",").concat(_.b,",").concat(_.c,",").concat(_.d,",").concat(_.e,",").concat(_.f,")");css(ghostEl,"webkitTransform",mt),css(ghostEl,"mozTransform",mt),css(ghostEl,"msTransform",mt),css(ghostEl,"transform",mt),lastDx=ct,lastDy=ft,touchEvt=b}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,s=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),a=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),s.top+=ghostRelativeParent.scrollTop,s.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,a.ghostClass,!1),toggleClass(ghostEl,a.fallbackClass,!0),toggleClass(ghostEl,a.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",s.top),css(ghostEl,"left",s.left),css(ghostEl,"width",s.width),css(ghostEl,"height",s.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,s){var a=this,d=e.dataTransfer,b=a.options;if(pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),a.cloneId=_nextTick(function(){pluginEvent("clone",a),!Sortable.eventCanceled&&(a.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),a._hideClone(),_dispatchEvent({sortable:a,name:"clone"}))}),!s&&toggleClass(dragEl,b.dragClass,!0),s?(ignoreNextClick=!0,a._loopId=setInterval(a._emulateDragOver,50)):(off(document,"mouseup",a._onDrop),off(document,"touchend",a._onDrop),off(document,"touchcancel",a._onDrop),d&&(d.effectAllowed="move",b.setData&&b.setData.call(a,d,dragEl)),on(document,"drop",a),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,a._dragStartId=_nextTick(a._dragStarted.bind(a,s,e)),on(document,"selectstart",a),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(e){var s=this.el,a=e.target,d,b,_,_e=this.options,ot=_e.group,st=Sortable.active,ct=activeGroup===ot,ft=_e.sort,mt=putSortable||st,bt,wt=this,Ct=!1;if(_silent)return;function Rt(cn,fo){pluginEvent(cn,wt,_objectSpread2({evt:e,isOwner:ct,axis:bt?"vertical":"horizontal",revert:_,dragRect:d,targetRect:b,canSort:ft,fromSortable:mt,target:a,completed:Pt,onMove:function(Tn,qn){return _onMove(rootEl,s,dragEl,d,Tn,getRect(Tn),e,qn)},changed:Tt},fo))}function It(){Rt("dragOverAnimationCapture"),wt.captureAnimationState(),wt!==mt&&mt.captureAnimationState()}function Pt(cn){return Rt("dragOverCompleted",{insertion:cn}),cn&&(ct?st._hideClone():st._showClone(wt),wt!==mt&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:st.options.ghostClass,!1),toggleClass(dragEl,_e.ghostClass,!0)),putSortable!==wt&&wt!==Sortable.active?putSortable=wt:wt===Sortable.active&&putSortable&&(putSortable=null),mt===wt&&(wt._ignoreWhileAnimating=a),wt.animateAll(function(){Rt("dragOverAnimationComplete"),wt._ignoreWhileAnimating=null}),wt!==mt&&(mt.animateAll(),mt._ignoreWhileAnimating=null)),(a===dragEl&&!dragEl.animated||a===s&&!a.animated)&&(lastTarget=null),!_e.dragoverBubble&&!e.rootEl&&a!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!cn&&nearestEmptyInsertDetectEvent(e)),!_e.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),Ct=!0}function Tt(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,_e.draggable),_dispatchEvent({sortable:wt,name:"change",toEl:s,newIndex,newDraggableIndex,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),a=closest(a,_e.draggable,s,!0),Rt("dragOver"),Sortable.eventCanceled)return Ct;if(dragEl.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||wt._ignoreWhileAnimating===a)return Pt(!1);if(ignoreNextClick=!1,st&&!_e.disabled&&(ct?ft||(_=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,st,dragEl,e))&&ot.checkPut(this,st,dragEl,e))){if(bt=this._getDirection(e,a)==="vertical",d=getRect(dragEl),Rt("dragOverValid"),Sortable.eventCanceled)return Ct;if(_)return parentEl=rootEl,It(),this._hideClone(),Rt("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),Pt(!0);var Gt=lastChild(s,_e.draggable);if(!Gt||_ghostIsLast(e,bt,this)&&!Gt.animated){if(Gt===dragEl)return Pt(!1);if(Gt&&s===e.target&&(a=Gt),a&&(b=getRect(a)),_onMove(rootEl,s,dragEl,d,a,b,e,!!a)!==!1)return It(),Gt&&Gt.nextSibling?s.insertBefore(dragEl,Gt.nextSibling):s.appendChild(dragEl),parentEl=s,Tt(),Pt(!0)}else if(Gt&&_ghostIsFirst(e,bt,this)){var Jt=getChild(s,0,_e,!0);if(Jt===dragEl)return Pt(!1);if(a=Jt,b=getRect(a),_onMove(rootEl,s,dragEl,d,a,b,e,!1)!==!1)return It(),s.insertBefore(dragEl,Jt),parentEl=s,Tt(),Pt(!0)}else if(a.parentNode===s){b=getRect(a);var qt=0,Nt,Qt=dragEl.parentNode!==s,fn=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||d,a.animated&&a.toRect||b,bt),Mn=bt?"top":"left",ln=isScrolledPast(a,"top","top")||isScrolledPast(dragEl,"top","top"),Wt=ln?ln.scrollTop:void 0;lastTarget!==a&&(Nt=b[Mn],pastFirstInvertThresh=!1,isCircumstantialInvert=!fn&&_e.invertSwap||Qt),qt=_getSwapDirection(e,a,b,bt,fn?1:_e.swapThreshold,_e.invertedSwapThreshold==null?_e.swapThreshold:_e.invertedSwapThreshold,isCircumstantialInvert,lastTarget===a);var so;if(qt!==0){var pn=index(dragEl);do pn-=qt,so=parentEl.children[pn];while(so&&(css(so,"display")==="none"||so===ghostEl))}if(qt===0||so===a)return Pt(!1);lastTarget=a,lastDirection=qt;var hn=a.nextElementSibling,Mt=!1;Mt=qt===1;var Hn=_onMove(rootEl,s,dragEl,d,a,b,e,Mt);if(Hn!==!1)return(Hn===1||Hn===-1)&&(Mt=Hn===1),_silent=!0,setTimeout(_unsilent,30),It(),Mt&&!hn?s.appendChild(dragEl):a.parentNode.insertBefore(dragEl,Mt?hn:a),ln&&scrollBy(ln,0,Wt-ln.scrollTop),parentEl=dragEl.parentNode,Nt!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(Nt-getRect(a)[Mn])),Tt(),Pt(!0)}if(s.contains(dragEl))return Pt(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var s=this.el,a=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,a.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,a.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(s,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!a.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],s,a=this.el.children,d=0,b=a.length,_=this.options;d<b;d++)s=a[d],closest(s,_.draggable,this.el,!1)&&e.push(s.getAttribute(_.dataIdAttr)||_generateId(s));return e},sort:function(e,s){var a={},d=this.el;this.toArray().forEach(function(b,_){var _e=d.children[_];closest(_e,this.options.draggable,d,!1)&&(a[b]=_e)},this),s&&this.captureAnimationState(),e.forEach(function(b){a[b]&&(d.removeChild(a[b]),d.appendChild(a[b]))}),s&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,s){return closest(e,s||this.options.draggable,this.el,!1)},option:function(e,s){var a=this.options;if(s===void 0)return a[e];var d=PluginManager.modifyOption(this,e,s);typeof d<"u"?a[e]=d:a[e]=s,e==="group"&&_prepareGroup(a)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(s){s.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function _onMove(o,e,s,a,d,b,_,_e){var ot,st=o[expando],ct=st.options.onMove,ft;return window.CustomEvent&&!IE11OrLess&&!Edge?ot=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(ot=document.createEvent("Event"),ot.initEvent("move",!0,!0)),ot.to=e,ot.from=o,ot.dragged=s,ot.draggedRect=a,ot.related=d||e,ot.relatedRect=b||getRect(e),ot.willInsertAfter=_e,ot.originalEvent=_,o.dispatchEvent(ot),ct&&(ft=ct.call(st,ot,_)),ft}function _disableDraggable(o){o.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(o,e,s){var a=getRect(getChild(s.el,0,s.options,!0)),d=getChildContainingRectFromElement(s.el,s.options,ghostEl),b=10;return e?o.clientX<d.left-b||o.clientY<a.top&&o.clientX<a.right:o.clientY<d.top-b||o.clientY<a.bottom&&o.clientX<a.left}function _ghostIsLast(o,e,s){var a=getRect(lastChild(s.el,s.options.draggable)),d=getChildContainingRectFromElement(s.el,s.options,ghostEl),b=10;return e?o.clientX>d.right+b||o.clientY>a.bottom&&o.clientX>a.left:o.clientY>d.bottom+b||o.clientX>a.right&&o.clientY>a.top}function _getSwapDirection(o,e,s,a,d,b,_,_e){var ot=a?o.clientY:o.clientX,st=a?s.height:s.width,ct=a?s.top:s.left,ft=a?s.bottom:s.right,mt=!1;if(!_){if(_e&&targetMoveDistance<st*d){if(!pastFirstInvertThresh&&(lastDirection===1?ot>ct+st*b/2:ot<ft-st*b/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)mt=!0;else if(lastDirection===1?ot<ct+targetMoveDistance:ot>ft-targetMoveDistance)return-lastDirection}else if(ot>ct+st*(1-d)/2&&ot<ft-st*(1-d)/2)return _getInsertDirection(e)}return mt=mt||_,mt&&(ot<ct+st*b/2||ot>ft-st*b/2)?ot>ct+st/2?1:-1:0}function _getInsertDirection(o){return index(dragEl)<index(o)?1:-1}function _generateId(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,s=e.length,a=0;s--;)a+=e.charCodeAt(s);return a.toString(36)}function _saveInputCheckedState(o){savedInputChecked.length=0;for(var e=o.getElementsByTagName("input"),s=e.length;s--;){var a=e[s];a.checked&&savedInputChecked.push(a)}}function _nextTick(o){return setTimeout(o,0)}function _cancelNextTick(o){return clearTimeout(o)}documentExists&&on(document,"touchmove",function(o){(Sortable.active||awaitingDragStarted)&&o.cancelable&&o.preventDefault()});Sortable.utils={on,off,css,find:find$1,is:function(e,s){return!!closest(e,s,e,!1)},extend:extend$1,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild,expando};Sortable.get=function(o){return o[expando]};Sortable.mount=function(){for(var o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];e[0].constructor===Array&&(e=e[0]),e.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),a.utils)),PluginManager.mount(a)})};Sortable.create=function(o,e){return new Sortable(o,e)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(s){var a=s.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):a.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(s){var a=s.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(s){this._handleAutoScroll(s,!0)},_handleAutoScroll:function(s,a){var d=this,b=(s.touches?s.touches[0]:s).clientX,_=(s.touches?s.touches[0]:s).clientY,_e=document.elementFromPoint(b,_);if(touchEvt$1=s,a||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(s,this.options,_e,a);var ot=getParentAutoScrollElement(_e,!0);scrolling&&(!pointerElemChangedInterval||b!==lastAutoScrollX||_!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var st=getParentAutoScrollElement(document.elementFromPoint(b,_),!0);st!==ot&&(ot=st,clearAutoScrolls()),autoScroll(s,d.options,st,a)},10),lastAutoScrollX=b,lastAutoScrollY=_)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(_e,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(s,this.options,getParentAutoScrollElement(_e,!1),!1)}}},_extends(o,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(o){clearInterval(o.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(o,e,s,a){if(e.scroll){var d=(o.touches?o.touches[0]:o).clientX,b=(o.touches?o.touches[0]:o).clientY,_=e.scrollSensitivity,_e=e.scrollSpeed,ot=getWindowScrollingElement(),st=!1,ct;scrollRootEl!==s&&(scrollRootEl=s,clearAutoScrolls(),scrollEl=e.scroll,ct=e.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(s,!0)));var ft=0,mt=scrollEl;do{var bt=mt,wt=getRect(bt),Ct=wt.top,Rt=wt.bottom,It=wt.left,Pt=wt.right,Tt=wt.width,Gt=wt.height,Jt=void 0,qt=void 0,Nt=bt.scrollWidth,Qt=bt.scrollHeight,fn=css(bt),Mn=bt.scrollLeft,ln=bt.scrollTop;bt===ot?(Jt=Tt<Nt&&(fn.overflowX==="auto"||fn.overflowX==="scroll"||fn.overflowX==="visible"),qt=Gt<Qt&&(fn.overflowY==="auto"||fn.overflowY==="scroll"||fn.overflowY==="visible")):(Jt=Tt<Nt&&(fn.overflowX==="auto"||fn.overflowX==="scroll"),qt=Gt<Qt&&(fn.overflowY==="auto"||fn.overflowY==="scroll"));var Wt=Jt&&(Math.abs(Pt-d)<=_&&Mn+Tt<Nt)-(Math.abs(It-d)<=_&&!!Mn),so=qt&&(Math.abs(Rt-b)<=_&&ln+Gt<Qt)-(Math.abs(Ct-b)<=_&&!!ln);if(!autoScrolls[ft])for(var pn=0;pn<=ft;pn++)autoScrolls[pn]||(autoScrolls[pn]={});(autoScrolls[ft].vx!=Wt||autoScrolls[ft].vy!=so||autoScrolls[ft].el!==bt)&&(autoScrolls[ft].el=bt,autoScrolls[ft].vx=Wt,autoScrolls[ft].vy=so,clearInterval(autoScrolls[ft].pid),(Wt!=0||so!=0)&&(st=!0,autoScrolls[ft].pid=setInterval((function(){a&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var hn=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*_e:0,Mt=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*_e:0;typeof ct=="function"&&ct.call(Sortable.dragged.parentNode[expando],Mt,hn,o,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,Mt,hn)}).bind({layer:ft}),24))),ft++}while(e.bubbleScroll&&mt!==ot&&(mt=getParentAutoScrollElement(mt,!1)));scrolling=st}},30),drop=function(e){var s=e.originalEvent,a=e.putSortable,d=e.dragEl,b=e.activeSortable,_=e.dispatchSortableEvent,_e=e.hideGhostForTarget,ot=e.unhideGhostForTarget;if(s){var st=a||b;_e();var ct=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:s,ft=document.elementFromPoint(ct.clientX,ct.clientY);ot(),st&&!st.el.contains(ft)&&(_("spill"),this.onSpill({dragEl:d,putSortable:a}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(e){var s=e.oldDraggableIndex;this.startIndex=s},onSpill:function(e){var s=e.dragEl,a=e.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var d=getChild(this.sortable.el,this.startIndex,this.options);d?this.sortable.el.insertBefore(s,d):this.sortable.el.appendChild(s),this.sortable.animateAll(),a&&a.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(e){var s=e.dragEl,a=e.putSortable,d=a||this.sortable;d.captureAnimationState(),s.parentNode&&s.parentNode.removeChild(s),d.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);var LayerSwitcherDOM={_createDraggableElement:function(o,e){let s=".GPlayerName";checkDsfr()&&(s=".GPlayerDragNDrop"),navigator.userAgent.match(/chrome|chromium|crios/i)?Sortable.create(o,{handle:s,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(a){e._onEndDragAndDropLayerClick(a)}}):Sortable.create(o,{handle:s,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(a){e._onEndDragAndDropLayerClick(a)}})},_addUID:function(o){var e=this._uid?o+"-"+this._uid:o;return e},_createMainContainerElement:function(){var o=document.createElement("div");return o.id=this._addUID("GPlayerSwitcher"),o.className="GPwidget gpf-widget gpf-mobile-fullscreen",o},_createMainLayersShowElement:function(){var o=document.createElement("input");return o.id=this._addUID("GPshowLayersList"),o.type="checkbox",o},_createMainLayersElement:function(){var o=document.createElement("dialog");return o.id=this._addUID("GPlayersList"),o.className="GPpanel gpf-panel fr-modal",o},_createMainLayersDivElement:function(){var o=document.createElement("div");return o.className="GPpanelBody gpf-panel__body_ls fr-modal__body",o},_createMainPictoElement:function(){var o=this,e=document.createElement("button"),s=document.createElement("span");return e.appendChild(s),e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLayersListPicto gpf-btn gpf-btn--secondary gpf-btn-icon gpf-btn-icon-layerswitcher fr-btn fr-btn--secondary",e.htmlFor=this._addUID("GPshowLayersList"),e.setAttribute("aria-label","Afficher/masquer le gestionnaire de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),document.getElementById(o._addUID("GPshowLayersList")).checked=d,document.getElementById(o._addUID("GPshowLayersList")).checked&&(document.getElementById(o._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(o._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),o.onShowLayerSwitcherClick(a)}):e.attachEvent&&e.attachEvent("onclick",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),document.getElementById(o._addUID("GPshowLayersList")).checked&&(document.getElementById(o._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(o._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),o.onShowLayerSwitcherClick(a)}),e},_createMainCounterLayersElement:function(){var o=document.createElement("span");return o.id=this._addUID("GPlayerCounter"),o.className="GPlayerCounter",o.innerHTML="0",o},_createMainInfoElement:function(){var o=document.createElement("dialog");return o.id=this._addUID("GPlayerInfoPanel"),o.className="GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal",o},_createMainInfoDivElement:function(){var o=document.createElement("div");return o.className="gpf-panel__body fr-modal__body",o},_createLayersPanelHeaderElement:function(){var o=document.createElement("div");return o.className="GPpanelHeader gpf-panel__header_ls",o},_createLayersPanelIconElement:function(){var o=document.createElement("label");return o.className="GPpanelIcon gpf-btn-header gpf-btn-icon-layers",o.title="Couches de donnes",o},_createLayersPanelTitleElement:function(){var o=document.createElement("div");return o.className="GPpanelTitle gpf-panel__title_ls",o.id=this._addUID("GPlayersHeaderTitle"),o.innerHTML="Couches de donnes",o},_createLayersPanelCloseElement:function(){var o=this,e=document.createElement("button");e.id=this._addUID("GPlayersPanelClose"),e.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var s=document.createElement("span");return s.className="GPelementHidden gpf-visible fr-mx-1w",s.innerText="Fermer",e.appendChild(s),e.addEventListener?e.addEventListener("click",function(){document.getElementById(o._addUID("GPshowLayersListPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(o._addUID("GPshowLayersListPicto")).click()}),e},_createContainerLayerElement:function(o){var e=document.createElement("div");return e.id=this._addUID("GPlayerSwitcher_ID_"+o.id),e.className="GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer",e.appendChild(this._createBasicToolElement(o)),e.appendChild(this._createAdvancedToolShowElement(o)),e.appendChild(this._createAdvancedToolElement(o)),e},_createBasicToolElement:function(o){var e=document.createElement("div");return e.id=this._addUID("GPbasicTools_ID_"+o.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(o)),e.appendChild(this._createBasicToolVisibilityElement(o)),e.appendChild(this._createBasicToolDragNDropElement(o)),e},_createBasicToolDragNDropElement:function(o){var e=document.createElement("div");e.id=this._addUID("GPdragndropPicto_ID_"+o.id),e.className="GPelementHidden GPlayerDragNDrop gpf-btn gpf-btn-icon gpf-btn-icon-ls-dragndrop gpf-btn--tertiary fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Deplacer la couche",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0);var s=this;return e.addEventListener?e.addEventListener("click",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),s._onStartDragAndDropLayerClick(a)}):e.attachEvent&&e.attachEvent("onclick",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),s._onStartDragAndDropLayerClick(a)}),e},_createBasicToolNameElement:function(o){var e=document.createElement("label");return e.id=this._addUID("GPname_ID_"+o.id),e.className="GPlayerName gpf-label gpf-label-name fr-label",e.title=o.description||o.title,e.innerHTML=o.title,e},_createBasicToolVisibilityElement:function(o){var e=typeof o.visibility<"u"?o.visibility:!0,s=document.createElement("button");s.id=this._addUID("GPvisibilityPicto_ID_"+o.id),s.className="GPlayerVisibility gpf-btn gpf-btn-icon gpf-btn-icon-ls-visibility fr-btn fr-btn--tertiary gpf-btn--tertiary",s.title="Afficher/masquer la couche",s.setAttribute("tabindex","0"),s.setAttribute("aria-pressed",e),s.setAttribute("type","button");var a=this;return s.addEventListener?s.addEventListener("click",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onVisibilityLayerClick(d)}):s.attachEvent&&s.attachEvent("onclick",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onVisibilityLayerClick(d)}),s},_createAdvancedToolShowElement:function(o){var e=document.createElement("button");e.id=this._addUID("GPshowAdvancedTools_ID_"+o.id),e.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowLayerAdvancedTools gpf-btn gpf-btn-icon gpf-btn-icon-ls-collapse fr-btn--sm fr-btn--tertiary gpf-btn--tertiary",e.title="Plus d'outils",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button");var s=this;return e.addEventListener?e.addEventListener("click",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d);var b=document.getElementById(s._addUID("GPadvancedTools_ID_"+o.id));d?(b.classList.replace("GPelementVisible","GPelementHidden"),b.classList.replace("gpf-visible","gpf-hidden")):(b.classList.replace("GPelementHidden","GPelementVisible"),b.classList.replace("gpf-hidden","gpf-visible"))}):e.attachEvent&&e.attachEvent("onclick",function(a){var d=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!d),element.classList.replace("GPelementVisible","GPelementHidden"),element.classList.replace("gpf-visible","gpf-hidden")}),e},_createAdvancedToolElement:function(o){var e=document.createElement("div");if(e.id=this._addUID("GPadvancedTools_ID_"+o.id),e.className="GPelementHidden GPlayerAdvancedTools gpf-hidden",e.appendChild(this._createAdvancedToolDeleteElement(o)),e.appendChild(this._createAdvancedToolInformationElement(o)),o.type!=="feature")for(var s=this._createAdvancedToolOpacityElement(o),a=0;a<s.length;a++)e.appendChild(s[a]);if(e.appendChild(this._createAdvancedToolExtentElement(o)),checkDsfr()){var d=document.createElement("button");d.className="GPlayerAdvancedToolsContextual fr-btn gpf-btn gpf-btn--tertiary fr-btn--tertiary-no-outline",d.setAttribute("aria-pressed",!1),d.addEventListener?d.addEventListener("click",function(_){var _e=_.target.ariaPressed==="true";_.target.setAttribute("aria-pressed",!_e)}):d.attachEvent&&d.attachEvent("onclick",function(_){var _e=_.target.ariaPressed==="true";_.target.setAttribute("aria-pressed",!_e)});var b=document.createElement("div");b.appendChild(this._createAdvancedToolDeleteElement(o,!0)),b.appendChild(this._createAdvancedToolInformationElement(o,!0)),b.appendChild(this._createAdvancedToolExtentElement(o,!0)),e.appendChild(d),e.appendChild(b)}return e},_createAdvancedToolDeleteElement:function(o,e=!1){var s=document.createElement("button");e?s.id=this._addUID("GPremoveContextual_ID_"+o.id):s.id=this._addUID("GPremove_ID_"+o.id),s.className="GPlayerRemove gpf-btn gpf-btn-icon gpf-btn-icon-ls-remove fr-btn fr-btn--tertiary gpf-btn--tertiary",s.title="Supprimer la couche",s.layerId=o.id,e&&(s.innerText="Supprimer"),s.setAttribute("tabindex","0"),s.setAttribute("aria-pressed",!0),s.setAttribute("type","button");var a=this;return s.addEventListener?s.addEventListener("click",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onDropLayerClick(d)}):s.attachEvent&&s.attachEvent("onclick",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onDropLayerClick(d)}),s},_createAdvancedToolInformationElement:function(o,e=!1){var s=document.createElement("button");e?s.id=this._addUID("GPinfoContextual_ID_"+o.id):s.id=this._addUID("GPinfo_ID_"+o.id),s.className="GPlayerInfo GPlayerInfoClosed gpf-btn gpf-btn-icon gpf-btn-icon-ls-info fr-btn fr-btn--tertiary gpf-btn--tertiary",(!o.title||!o.description)&&(s.style.opacity="0",s.style.visibility="hidden",e&&(s.style.display="none")),s.title="Informations/lgende",s.layerId=o.id,e&&(s.innerText="Informations"),s.setAttribute("tabindex","0"),s.setAttribute("aria-pressed",!0),s.setAttribute("type","button");var a=this;return s.addEventListener?s.addEventListener("click",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onOpenLayerInfoClick(d)}):s.attachEvent&&s.attachEvent("onclick",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onOpenLayerInfoClick(d)}),s},_createAdvancedToolOpacityElement:function(o){var e=[],s=document.createElement("div");s.id=this._addUID("GPopacity_ID_"+o.id),s.className="GPlayerOpacity fr-range fr-range--sm",s.dataset.frJsRange="true",s.title="Opacit";var a=typeof o.opacity<"u"?o.opacity:1;a=Math.round(a*100),s.style.setProperty("--progress-right",a+"%");var d=document.createElement("input");d.id=this._addUID("GPopacityValueDiv_ID_"+o.id),d.type="range",d.value=a,d.ariaLabel="Opacit";var b=this;d.addEventListener?d.addEventListener("change",function(ot){b._onChangeLayerOpacity(ot)}):d.attachEvent&&d.attachEvent("onchange",function(ot){b._onChangeLayerOpacity(ot)}),d.addEventListener?d.addEventListener("input",function(ot){b._onChangeLayerOpacity(ot)}):d.attachEvent&&d.attachEvent("oninput",function(ot){b._onChangeLayerOpacity(ot)}),s.appendChild(d);var _=document.createElement("div");_.id=this._addUID("GPopacityValueDiv_ID_"+o.id),_.className="GPlayerOpacityValue";var _e=document.createElement("span");return _e.id=this._addUID("GPopacityValue_ID_"+o.id),_e.className="gpf-range__output fr-range__output gpf-visible",_e.innerHTML=a+"%",_.appendChild(_e),e.push(s),e.push(_),e},_createAdvancedToolExtentElement:function(o,e=!1){var s=document.createElement("button");e?s.id=this._addUID("GPextentContextual_ID_"+o.id):s.id=this._addUID("GPextent_ID_"+o.id),s.className="GPelementHidden GPlayerExtent gpf-btn gpf-btn-icon gpf-btn-icon-ls-extent fr-btn fr-btn--tertiary gpf-btn--tertiary",s.title="Zoomer dans l'tendue",s.layerId=o.id,e&&(s.innerText="Zoomer"),s.setAttribute("tabindex","0"),s.setAttribute("aria-pressed",!0),s.setAttribute("type","button");var a=this;return s.addEventListener?s.addEventListener("click",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onZoomToExtentClick(d)}):s.attachEvent&&s.attachEvent("onclick",function(d){var b=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!b),a._onZoomToExtentClick(d)}),s},_createContainerLayerInfoElement:function(o){var e=document.createElement("div"),s=document.createElement("div");s.className="gpf-panel__header_ls",e.appendChild(s);var a=document.createElement("label");a.className="GPlayerInfo gpf-btn-header gpf-btn-icon-ls-info",a.title="Informations",s.appendChild(a);var d=document.createElement("div");d.id=this._addUID("GPlayerInfoTitle"),d.innerHTML=o.title,d.className="gpf-panel__title_ls",s.appendChild(d);var b=document.createElement("button");b.id=this._addUID("GPlayerInfoClose"),b.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",b.title="Fermer la fentre";var _=this,_e=function(){document.getElementById(_._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(_._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(o.id).classList.add("GPlayerInfoClosed"),document.getElementById(o.id).classList.remove("GPlayerInfoOpened")};b.addEventListener?b.addEventListener("click",_e):b.attachEvent&&b.attachEvent("onclick",_e),this.addEventListener("layerswitcher:remove",so=>{parseInt(o.id.split("-")[0].split("GPinfo_ID_")[1])===so.layer.id&&(document.getElementById(_._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(_._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"))}),s.appendChild(b),e.appendChild(s);var ot=document.createElement("div");if(ot.id=this._addUID("GPlayerInfoContent"),ot.className="gpf-panel__content fr-modal__content",e.appendChild(ot),o.quicklookUrl){var st=document.createElement("div");st.id=this._addUID("GPlayerInfoQuicklook"),st.title="Afficher un aperu de la couche";var ct=document.createElement("a");ct.href=o.quicklookUrl,ct.appendChild(st),ot.appendChild(ct)}var ft=document.createElement("div");if(ft.id=this._addUID("GPlayerInfoDescription"),ft.innerHTML=o.description,ot.appendChild(ft),o.metadata){var mt=document.createElement("div");mt.id=this._addUID("GPlayerInfoMetadata");var bt=document.createElement("div");bt.className="GPlayerInfoSubtitle",bt.innerHTML="Mtadonnes",mt.appendChild(bt);for(var wt=0;wt<o.metadata.length;wt++){var Ct=o.metadata[wt].url,Rt=document.createElement("div");Rt.className="GPlayerInfoLink";var It=document.createElement("a");It.href=Ct,It.innerHTML=Ct,Rt.appendChild(It),mt.appendChild(Rt)}o.metadata.length!==0&&ot.appendChild(mt)}if(o.legends){var Pt=document.createElement("div");Pt.id=this._addUID("GPlayerInfoLegend");var Tt=document.createElement("div");Tt.className="GPlayerInfoSubtitle",Tt.innerHTML="Lgende",Pt.appendChild(Tt);for(var Gt={},Jt=o.maxScaleDenominator||56e7,qt=0;qt<o.legends.length;qt++){var Nt=o.legends[qt].minScaleDenominator;if(Nt){var Qt=Nt.toString();Nt=Math.round(parseInt(Qt.substring(0,3),10)/10)*Math.pow(10,Qt.length-2)}else Nt=270;Gt[Nt]=o.legends[qt]}for(var fn in Gt)if(Gt.hasOwnProperty(fn)){var Mn=Gt[fn].url;if(typeof Mn=="string"&&Mn.toLowerCase().indexOf("nolegend.jpg")===-1){var ln=document.createElement("div");ln.className="GPlayerInfoLink",Jt=Gt[fn].maxScaleDenominator||Jt;var Wt=document.createElement("a");Wt.className="fr-link",Wt.href=Mn,Wt.target="_blank",Wt.innerHTML="Du 1/"+fn+" au 1/"+Jt,ln.appendChild(Wt),Pt.appendChild(ln)}else delete Gt[fn]}Object.keys(Gt).length!==0&&ot.appendChild(Pt)}return e}},logger$4=LoggerByDefault$1.getLogger("layerswitcher"),LayerSwitcher=class ule extends ControlExtended{constructor(e){e=e||{};var s=e.options||{},a=e.layers||[];if(super({element:s.element,target:s.target,render:s.render}),!(this instanceof ule))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(a))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof s!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this.CLASSNAME="LayerSwitcher",this._initialize(s,a),this.container=this._initContainer(s),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e)this._addMapLayers(e),this.collapsed||this._showLayerSwitcherButton.setAttribute("aria-pressed",!0),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",a=>{var d=a.element,b;d.hasOwnProperty("gpLayerId")?b=d.gpLayerId:(b=this._layerId,d.gpLayerId=b,this._layerId++),this._layers[b]||this.addLayer(d)}),this._listeners.onRemoveListener=e.getLayers().on("remove",a=>{var d=a.element,b=d.gpLayerId;this._layers[b]&&this.removeLayer(d)});else{unByKey(this._listeners.onMoveListener),unByKey(this._listeners.onAddListener),unByKey(this._listeners.onRemoveListener);for(var s=this._layersOrder.length-1;s>=0;s--);}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}addLayer(e,s){var a=this.getMap();if(s=s||{},!e){logger$4.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");return}var d=e.gpLayerId;if(typeof d>"u"){logger$4.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e);return}var b=!1;if(a.getLayers().forEach(Rt=>{Rt.gpLayerId===d&&(b=!0)}),!b){logger$4.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )");return}if(this._layers[d]){for(var mt in s)s.hasOwnProperty(mt)&&(this._layers[d][mt]=s[mt]);if(s.title){var bt=document.getElementById(this._addUID("GPname_ID_"+d));bt&&(bt.innerHTML=s.title,bt.title=s.description||s.title)}var wt=document.getElementById(this._addUID("GPinfo_ID_"+d));if(!document.getElementById(this._addUID("GPinfo_ID_"+d))&&s.description){var Ct=document.getElementById(this._addUID("GPadvancedTools_ID_"+d));Ct&&Ct.appendChild(this._createAdvancedToolInformationElement({id:d}))}wt&&wt.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")}else{var _=this.getLayerInfo(e)||{},_e=e.getOpacity(),ot=e.getVisible(),st=this.isInRange(e,a),ct={layer:e,id:d,name:e.name,service:e.service,opacity:_e??1,visibility:ot??!0,inRange:st??!0,title:s.title!=null?s.title:_._title||d,description:s.description||_._description||null,legends:s.legends||_._legends||[],metadata:s.metadata||_._metadata||[],quicklookUrl:s.quicklookUrl||_._quicklookUrl||null};this._layers[d]=ct;var ft=this._createLayerDiv(ct);this._layers[d].div=ft,e.getZIndex&&e.getZIndex()!==0&&typeof e.getZIndex()<"u"||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(ct),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(ft,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",Rt=>this._updateLayerOpacity(Rt)),this._listeners.updateLayerVisibility=e.on("change:visible",Rt=>this._updateLayerVisibility(Rt)),this._layers[d].onZIndexChangeEvent==null&&(this._layers[d].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}this._updateLayerCounter(),this.dispatchEvent({type:"layerswitcher:add",layer:this._layers[d]})}removeLayer(e){if(e){unByKey(this._listeners.updateLayerOpacity),unByKey(this._listeners.updateLayerVisibility),logger$4.trace(e);var s=e.gpLayerId,a=document.getElementById(this._addUID("GPinfo_ID_"+s));a&&a.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden");var d=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+s));d&&this._layerListContainer.removeChild(d);var b=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(b,1),this._lastZIndex--;for(var _=this._layersOrder,_e=0;_e<_.length;_e++)_[_e].layer.setZIndex(this._lastZIndex-_e);this.dispatchEvent({type:"layerswitcher:remove",layer:this._layers[s]}),delete this._layers[s],this._updateLayerCounter()}}setCollapsed(e){if(e===void 0){logger$4.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");return}var s=!document.getElementById(this._addUID("GPshowLayersList")).checked;e&&s||!e&&!s||(s||document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(this._addUID("GPshowLayersList")).checked=!e)}getCollapsed(){return this.collapsed}setRemovable(e,s){if(e){var a=e.gpLayerId;if(a==null){logger$4.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");return}var d=document.getElementById(this._addUID("GPremove_ID_"+a));d&&(s===!1?d.style.display="none":s===!0&&(d.style.display="block"))}}getContainer(){return this.container}_initialize(e,s){this._uid=SelectorID.generate(),this.options=e,this.options.layers=s,this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=e.collapsed!==void 0?e.collapsed:!0,this._layerListContainer=null,this._listeners={};for(var a=0;a<s.length;a++){var d=s[a].layer;if(d){var b;d.hasOwnProperty("gpLayerId")?b=d.gpLayerId:(b=this._layerId,d.gpLayerId=b,this._layerId++);var _=s[a].config||{},_e=d.getOpacity(),ot=d.getVisible(),st={layer:d,id:b,name:d.name,service:d.service,opacity:_e??1,visibility:ot??!0,title:_.title!=null?_.title:_.id?_.id:b,description:_.description||null,legends:_.legends||[],metadata:_.metadata||[],quicklookUrl:_.quicklookUrl||null};this._layers[b]=st}}}_initContainer(){var e=this._createMainContainerElement(),s=this._createMainLayersShowElement();e.appendChild(s),this.collapsed?this.collapsed=!0:(s.checked="checked",this.collapsed=!1);var a=this,d=function(Ct){this.collapsed=!Ct.target.checked,this.dispatchEvent("change:collapsed")};s.addEventListener("click",function(Ct){d.call(a,Ct)});var b=this._showLayerSwitcherButton=this._createMainPictoElement();if(e.appendChild(b),e.classList.add("GplayerSwitcher-counterRemoved"),this.options.counter){e.classList.remove("GplayerSwitcher-counterRemoved"),e.classList.add("GplayerSwitcher-counterAdded");var _=this._layerSwitcherCounter=this._createMainCounterLayersElement();b.appendChild(_)}var _e=this._createMainLayersElement();if(e.appendChild(_e),this.options.panel){var ot=this._createLayersPanelHeaderElement();_e.appendChild(ot);var st=this._createLayersPanelIconElement();ot.appendChild(st);var ct=this._createLayersPanelTitleElement();ot.appendChild(ct);var ft=this._createLayersPanelCloseElement();ot.appendChild(ft)}var mt=this._layerListContainer=this._createMainLayersDivElement();_e.appendChild(mt),this._createDraggableElement(mt,this);var bt=this._createMainInfoElement(),wt=this._createMainInfoDivElement();return bt.appendChild(wt),e.appendChild(bt),e}_addMapLayers(e){this._layersIndex={},e.getLayers().forEach(ot=>{var st=null;ot.hasOwnProperty("gpLayerId")?st=ot.gpLayerId:(st=this._layerId,ot.gpLayerId=st,this._layerId++);var ct=this.getLayerInfo(ot)||{};if(this._layers[st])this._layers[st].opacity=ot.getOpacity(),this._layers[st].visibility=ot.getVisible(),this._layers[st].inRange=this.isInRange(ot,e);else{var ft=ot.getOpacity(),mt=ot.getVisible(),bt=this.isInRange(ot,e),wt={layer:ot,id:st,name:ot.name,service:ot.service,opacity:ft??1,visibility:mt??!0,inRange:bt??!0,title:ct._title||st,description:ct._description||null,legends:ct._legends||[],metadata:ct._metadata||[],quicklookUrl:ct._quicklookUrl||null};this._layers[st]=wt}if(this._updateLayerCounter(),this._listeners.updateLayerOpacity=ot.on("change:opacity",Rt=>this._updateLayerOpacity(Rt)),this._listeners._updateLayerVisibility=ot.on("change:visible",Rt=>this._updateLayerVisibility(Rt)),ot.getZIndex!==void 0){var Ct=ot.getZIndex()||0;(!this._layersIndex[Ct]||!Array.isArray(this._layersIndex[Ct]))&&(this._layersIndex[Ct]=[]),this._layersIndex[Ct].push(this._layers[st])}});for(var s in this._layersIndex)if(this._layersIndex.hasOwnProperty(s))for(var a=this._layersIndex[s],d=0;d<a.length;d++)this._layersOrder.unshift(a[d]),this._lastZIndex++,a[d].layer.setZIndex(this._lastZIndex),this._layers[a[d].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[a[d].layer.gpLayerId].onZIndexChangeEvent=a[d].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var b=0;b<this._layersOrder.length;b++){var _=this._layersOrder[b],_e=this._createLayerDiv(_);this._layerListContainer.querySelector("#"+_e.id)||this._layerListContainer.appendChild(_e),this._layers[_.id].div=_e}}_createLayerDiv(e){var s=e.legends&&e.legends.length!==0,a=e.metadata&&e.metadata.length!==0,d=e.quicklookUrl;(s||a||d)&&(e.displayInformationElement=!0);var b=this._createContainerLayerElement(e);return e.inRange||b.classList.add("outOfRange"),b}onShowLayerSwitcherClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var s=this._showLayerSwitcherButton.ariaPressed;this.collapsed=s!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}_updateLayerCounter(){this._layerSwitcherCounter&&(this._layerSwitcherCounter.innerHTML=Object.keys(this._layers).length)}_onChangeLayerOpacity(e){e.target.parentNode.style.setProperty("--progress-right",e.target.value+"%");var s=e.target.id,a=SelectorID.index(s),d=this._layers[a].layer,b=e.target.value,_=document.getElementById(this._addUID("GPopacityValue_ID_"+a));_.innerHTML=b+"%",d.setOpacity(b/100)}_updateLayerOpacity(e){var s=e.target.getOpacity();s>1&&(s=1),s<0&&(s=0);var a=e.target.gpLayerId,d=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+a));d&&(d.value=Math.round(s*100));var b=document.getElementById(this._addUID("GPopacityValue_ID_"+a));b&&(b.innerHTML=Math.round(s*100)+"%"),this.dispatchEvent({type:"layerswitcher:change:opacity",opacity:s,layer:this._layers[a]})}_onVisibilityLayerClick(e){var s=e.target.id,a=SelectorID.index(s),d=this._layers[a].layer;d.setVisible(e.target.ariaPressed==="true")}_updateLayerVisibility(e){var s=e.target.getVisible(),a=e.target.gpLayerId,d=document.getElementById(this._addUID("GPvisibilityPicto_ID_"+a));d&&(d.ariaPressed=s),this.dispatchEvent({type:"layerswitcher:change:visibility",visibility:s,layer:this._layers[a]})}_updateLayersOrder(){var e=this.getMap();if(e){this._layersIndex={};var s,a;e.getLayers().forEach(st=>{a=st.gpLayerId,unByKey(this._layers[a].onZIndexChangeEvent),this._layers[a].onZIndexChangeEvent=null,s=null,st.getZIndex!==void 0&&(s=st.getZIndex(),(!this._layersIndex[s]||!Array.isArray(this._layersIndex[s]))&&(this._layersIndex[s]=[]),this._layersIndex[s].push(this._layers[a]))}),this._lastZIndex=0,this._layersOrder=[];for(var d in this._layersIndex)if(this._layersIndex.hasOwnProperty(d))for(var b=this._layersIndex[d],_=0;_<b.length;_++)this._layersOrder.unshift(b[_]),this._lastZIndex++,this._layers[b[_].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[b[_].layer.gpLayerId].onZIndexChangeEvent=b[_].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(let st=0;st<this._layerListContainer.childNodes.length;st++){const ct=this._layerListContainer.childNodes[st];ct.id!==""&&ct.remove()}for(var _e=0;_e<this._layersOrder.length;_e++){var ot=this._layersOrder[_e];this._layerListContainer.appendChild(ot.div)}}else logger$4.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}}_onOpenLayerInfoClick(e){var s=e.target.id,a=SelectorID.index(s),d=this._layers[a],b,_,_e=document.getElementById(e.target.id);if(_e.classList.contains("GPlayerInfoOpened")){_e.classList.remove("GPlayerInfoOpened"),_e.classList.add("GPlayerInfoClosed"),b=document.getElementById(this._addUID("GPlayerInfoPanel")),b.classList.remove("GPlayerInfoPanelOpened","gpf-visible"),b.classList.add("GPlayerInfoPanelClosed","gpf-hidden"),_=document.getElementById(this._addUID("GPlayerInfoContent")),_&&_.parentNode.remove();return}_e.classList.contains("GPlayerInfoClosed")&&(_e.classList.remove("GPlayerInfoClosed"),_e.classList.add("GPlayerInfoOpened")),b=document.getElementById(this._addUID("GPlayerInfoPanel")),b.classList.remove("GPlayerInfoPanelClosed","gpf-hidden"),b.classList.add("GPlayerInfoPanelOpened","gpf-visible"),_=document.getElementById(this._addUID("GPlayerInfoContent")),_&&_.parentNode.remove();var ot={id:s,title:d.title,description:d.description,quicklookUrl:d.quicklookUrl,metadata:d.metadata,legends:d.legends},st=d.layer.getMaxResolution();st===1/0?ot._maxScaleDenominator=56e7:ot._maxScaleDenominator=Math.round(st/28e-5);var ct=this._createContainerLayerInfoElement(ot);b.firstChild.appendChild(ct)}_onDropLayerClick(e){var s=e.target.id,a=SelectorID.index(s),d=this._layers[a].layer;this.getMap().getLayers().remove(d)}_onEndDragAndDropLayerClick(e){logger$4.trace(e);var s=this.getMap(),a=document.querySelectorAll("div.GPlayerSwitcher_layer"),d=a.length;this._layersOrder=[];for(var b=0;b<a.length;b++){var _=a[b].id,_e=SelectorID.index(_),ot=this._layers[_e].layer;unByKey(this._layers[_e].onZIndexChangeEvent),this._layers[_e].onZIndexChangeEvent=null,ot.setZIndex&&(ot.setZIndex(d),this._layersOrder.push(this._layers[_e]),d--),this._layers[_e].onZIndexChangeEvent==null&&(this._layers[_e].onZIndexChangeEvent=ot.on("change:zIndex",()=>this._updateLayersOrder()))}s.updateSize(),this.dispatchEvent({type:"layerswitcher:change:position",position:e.newIndex,layer:this._layersOrder[e.newIndex],layers:this._layersOrder})}_onStartDragAndDropLayerClick(e){logger$4.debug(e)}_onZoomToExtentClick(e){logger$4.debug(e);var s=e.target.id,a=SelectorID.index(s),d=this._layers[a],b=null,_=null,_e=this.getMap();if(d.layer.hasOwnProperty("gpResultLayerId")&&d.layer.gpResultLayerId.split(":")[0]==="layerimport"){if(_e.getView()&&_e.getSize()){var ot=d.layer.getExtent()||d.layer.getSource().getExtent();ot&&ot[0]!==1/0&&_e.getView().fit(ot,_e.getSize())}}else try{if(!Config$1.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var st=d.layer.name||d.layer.getSource().name,ct=d.layer.service||d.layer.getSource().service,ft=Config$1.configuration.getLayerId(st,ct);if(!ft)throw"ERROR : Layer ID not found into the catalogue !?";var mt=Config$1.configuration.getGlobalConstraints(ft);if(mt){if(!_e||!_e.getView())return;var bt=_e.getView(),wt=bt.getProjection(),Ct=[mt.extent.left,mt.extent.bottom,mt.extent.right,mt.extent.top],Rt=mt.crs;Rt||(Rt="EPSG:4326"),b=transformExtent(Ct,Rt,wt),b&&bt.fit(b)}}catch(It){_=It}this.dispatchEvent({type:"layerswitcher:extent",extent:b,layer:d,error:_})}_onMapMoveEnd(e){e.getLayers().forEach(s=>{var a=s.gpLayerId;if(this._layers[a]){var d=this._layers[a],b;this.isInRange(s,e)&&!d.inRange?(d.inRange=!0,b=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+a)),b.classList.remove("outOfRange")):!this.isInRange(s,e)&&d.inRange&&(d.inRange=!1,b=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+a)),b.classList.add("outOfRange"))}})}getLayerDOMId(e){var s=null;return this.getMap().getLayers().forEach(a=>{a===e&&(s=a.hasOwnProperty("gpLayerId")?a.gpLayerId:null)}),s!==null?this._addUID("GPlayerSwitcher_ID_"+s):null}isInRange(e,s){if(s){var a=s.getView().getResolution();if(a>e.getMaxResolution()||a<e.getMinResolution())return!1;var d=s.getView().calculateExtent(s.getSize()),b=e.getExtent();return!(b&&!intersects$1(d,b))}}getLayerInfo(e){var s={};if(e.getProperties!==void 0&&e.getSource!==void 0){var a=e.getProperties(),d=a.source;d&&(s._title=d._title||a.id||"",s._description=d._description||"",s._quicklookUrl=d._quicklookUrl||"",s._metadata=d._metadata||[],s._legends=d._legends||[])}return s}};Object.assign(LayerSwitcher.prototype,LayerSwitcherDOM);Object.assign(LayerSwitcher.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=LayerSwitcher);var Marker={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAASf3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpptuO4DYX/cxVZAsEBIJfD8ZzsIMvPB8mvpq5OupN6Xc8uW5Yo4OIOdIfzr3/e8A/+lNo1lGpNu2rkT+mlp8GTFt8/4/ktsTy/nz85f96Tn18P6fN6TLzkB30ObPo5/ut1+XaC92HwrP5worY+b8yf3+jlc/72y4k+F8q+Il/F/pyof06U0/uGfE4w3tuK2pv9eAvzvI/7607a+zf4r/tVE3sffv13Maq3K9fJKZ0sOfL7U6ycsv/NIQ+eVH6nXDhQsj3P31fssxIK8rs6ffvTWdH1pZbfHvRTV749+6Vbnwpwa790q6TPIfmXIuu3x9++HqT+vitP6X+4cmmfZ+nn10eVz4p+qf5T/Lvbfe6ZuxhFKbV+burrFp9nHDe5hF+6BZamdEfBUOPRfzo/jZtfQGHHFSc/S7ok2nWlyJYhV87zuGSxxJJOSMaTlFbKz4stW+ppZe9f8R+5yXLPOze6uJ62l5y+rUWey/a4wnO1xpW3cGgSTiZ85G//hL/7gXt9FES8luOtFetKyYvNMrxz/pvD6IjcT1HrU+Cvn1//eF8zHaxeZR+Rzqnne4r5NvPFVn4anTmw8vjOoNj+nIAScenKYiTTAbomuYpKtJRMhEI2GjRYus/MpANSa9osMpWcld605JfmIybPoakmXg68DpnRiZqVOWt0aNCsUir4sdLA0Ki5llqrVqut9jo0a9GqqqZOisOylWDV1MyadRstt9Jq02attd5GTz1DmhBpt95672NwzcGZB58eHDDGTDPPMmuYOm222edYwGeVVZcuW231NXbaecMfW7fttvseRw5QOuXUo8dOO/2MC9RuDrfcevXabbff8a1rn7b+4edvdE0+XUtPp/xA+9Y1XjX7OoU4nVTvGQ1LoQgdN28BgE7es9iklOSd857FDv3lmlhk9Z5t8Y7RwXIk1StfvQvp7ah37v/qW7DyU9/S/9q54K37m537Y99+17XtJLyejr1T6EWNmenjmJEa/zGtf3wMnycdEnrmgScKh+W2rFIB58FVtiU7CVaLdS1hHXPoPkvVW5b2oXDBZM5kyN7VVS1pzsLdAoljo1+6tE5b+ciweuqaTNwEgrpb3atwvSOzw3Aa7Git98o4VD3nq3Nz/50yiEw9MXMCh+hOfU+a3euZl0IjZX1tW/VQIF0lHO5kjFqF2hvlvCOvrEi+yhlzzHKu6fCXapZzFpUqw+TMUoU1TrM8K8eEt2CcvwpvlcXjErqqEPqJVIoz1cQ7CdQOB0qqW1QrkrCsK6Afva0R7pobdpd7pG47/Z7UpwDkCm4ql9Y8G2Oi4+S0rJ3LiVdtruM9Jb1Ja6ESIbdenfb7pXSsmRIcyTStcG9xoGh7gbLD1W/ra462dTTubFKUsWyMLTThhmZUszvGdgZEZizn7D1Pvb3VmlkuoOsHSOIrxmpt0EbpgB81ynTMBlDt4TB1Vq5U0EsVt3mfgfWpNiTznwumVxaPWHprbym/Svr9MfzZG/QkgrS9IGdlYQ6i4zdpbQ/m9sbCKqv0ZKwrI5D8c+V9b9uzAIzM/Z4lm07xdl/X4aOlTekLNI+orHQcAKRJpdnQM8CoBLRYV9plleJl8yJpa3OPe+a+2ljD2pnF7GnxzrzWZijn2Ke3SytrYTJHl3CK9lQgFlNNC3tc+vJx88VLOxAB9avWjwIU0L+9m61oK7lrkrd4DEFof16knx/5sM6pOzqQ89r9dFase7a2kvXApdQOnAIH5T1mG+BM+ikt1QrNMltZKx0fC2XliVbK2enAuDk5P93TQXSY4nS4IchETYYPGGuNXfPJe8dboIixZ13bJ3mSES4KnZel1RgaaOZA8OcESKbuDaQOmjUXww93t1szsyHSFGynylw7HKfe096ywI75p6qE/1AWLgx4tMx14z2j6kyisec64EDuBCwwy/Hkm8cNzHK6iw7YiNbnVQpjdjOH0neUT9rCo7fozG2DjiOBKQKQC/0ivclYZtIwF7fDPLR2xsKkM0cZc3h3ubjIPgBmOYr3S+fTa5Zz1mfVLToJjbVH2GgN1DhKaQuluyAVe7PRRMRsWBqIgqYBoNC+NuDliY1RKG/iF5V5dztbGlQLAybsk82qaE3fzPS1zo1n5ygmKC4wsUvbiNBGerilBnJoSE4DG6x13BXWzXBv4vYFstG1VoOoC6oGPXX/UIRoN9Ib52D6Juin06jZss0ksVys5ZihjGxtMgDdLmq0EzXjzAC3GYCBXfJmwiQVEFzdurMKcZKkpyctqt0wSD0I04f4UnjXutEEdDzPuPOKKFPiKejaATr81NlRGzDe3HRwNPkVbr8UG4ZhJjM8BolsXMthNArGnMEfadoZhuRvosTdXPLOb6A0JOrIp3/hv06r4ESq1wpWZVzvZn6y/7vgYoE/RL0HgLxUNSFWB62gtiN2hhEcIbWpICkUOvvAoA/4gwScv+C0v8MJXQ+Nhqg1bgvZyqdP8vWsKBV8RUCGpsq1Orzz87Z547iFBkQcRUQrWKA86w2AavJxAguRhd6xoAOTYog6816YrroLXcGYxwUwoyFHxbtxwRY8c6zO2TQAYZkL53DIRQdBfHU1oxhJNzYpyVhcSYrFDSNPjwSTWZx0C7pf0DkOS8j9rA2q42RUpIpREda6Y4OVDMScySKSXydzjIPsENagrkkhcCt4BqZhB/N2onoPdi7ctdN3/3Qrd4qgPo8DCaYdnU9QE0W7h/vF5XGz3/AdFCBL/iqDfzDxQUSMGzfioPgJEvYDInjPyQaugchuEgbt4iCQY5ZDnwpnKTiqgj3mLhg1NCq+QwLyYPY43chRPVrq0WriYlciCNXr9VZ3eICCMIBS4nhvGEAIw0qEhaAkDex6p7qYKmQHB1AbnfAkxigx1QyOzGYXWYL/CubfGEbWGIDhxA3eiL9PpQDHRUgAbReX0ZAINyI0tQyUgcVzKFiDBOCFjXMlQ6QIYkMb7saZZliZxQwEHn7o2G6Dw8gKBXCjW9HZ5/SKXUR+OGGzMloZaAvkmmvAMyBcC4kU4YA7WToAmhlidyGKa0VSxUljYxnPcmeRgXsRbqRzbRBckHloBPPrw4Zr9/nkeMzb5VrMpFf9AdVcbrK+uoGUwtqrX/d3dJMJxvohLt7qvV04IsR7p1zM26eJ1/k1x//g+d/H8D4BAfSL+aSxxKRFa8VwUdeY6QURKy/NDAFrToKxoZTYfM331eZeAgxflY4XBZ69YaDqBP0056yGHyqnI9Rm+K1p4rSSFV9wIQGusB4PwEsdXUP9DnZtZ94jN0xuBSPBvXtoV2+0IasUFkXDKp3lXoDfe5DX9kLTOsqO9cOHgM9dqcdiEIusVMgFQy508wSbpxADbn2mkuCEx6EsXBGIAZaI1QujONgyMWaU1cti1qaQEDl1Vj7vsZFkI2m+A1t7/N49QJhK5OIUe/mWkE5sXwYa+J+lLKYCuDVajRjq3pAsYg3SQnkfQcb5LTz7xuPjv3k+dmCWUDi39Gl2ps4dXcYVJ+59d99wRJHQ9LtAD2XCRjYYkN8YUkIsrfFM5Bua5BDFyIKdxluACNO7zFkGegGi99np8n9j/ehWp2oYY4SOQWj9XHz1WcHWQL0BTYasCIpgkjyEg2C5TjD10bCGFz/PM8b5+O4Qk/m+Q5382uG5+CN3633jvfzjO4W5+TohQ8+pxIiNEfMI6VGFDe3Vd7VByDt4j0ebGrIEM2FxoZRLB0ld8XEkKBgMwyDC7QsJysobUBnjBgjRwxnsynv/tfjqx2VNJC2GPT4rjSDBV4jDl/3nVG6B+hHJ/bY9TyerWAXsIZHtzugCQWRAOXCVZl5Xxtv3fWErmHaDtJp8l2EikIXuKSylj/uCveU2fazmTH53yCEnm+KTd2E8hu4qTrIvHDJGlUkZS4IXFcPl7A8fAbrNqGf3Qh0xQTZ0SOsbIwDBLK/x9DWhsopPIiRsgHCMYjfP9wzMjbM37G0lr8B9aaI3NOogBL6Xs2HMOSH289KUQKo/Buvw+9qVTK6UUwqBuBPJFVPro5AfXk+Hn4zJjMj3RBR5J8BC2PqEG63CIG16OTfx+pr5fu30UWcS0DFuDuKHtdFjnLuM6psYkD2+oF5CjVvhS0CnoHwa/WNusfqXim5qQpjM1ZuFIjyYKi4vxKw4DZoiVeu6o4ZKaXzoURuq4nOHt6Fa9ATnU7ncxo7g6UE+0kYg8fExDzwLcq3ErIGXRo5wH+cRiu336mjg3/3hG2IT6ohLvVXuTCXB0dhTZ+++gRgyV/xAITch2WCqEVVrzPAxLgXRI1voOfSbmnM3/CXgYh8rPhxfDFL225b2jePCd7J7H2GzAwgjZgFyJj8SfsUItFBpFvCwUUQDA4ArY0Ch61SNvFZ8rw4vVhHyw5p9f3bEFDt1PjrID05RjBzVgqbJUJXSLARoRkQCNSZf5olAkobc12LqI73yrQJsCI4mLYS/rubukwKjPDlOFkPFgSrnRyNwuAcbiRm94aPI9zdmLUkujYQqcYLjaGRIFnZ9jYRcLJlv/hX30BiQgE6j5A+dU2RwwDKwGdzTAYnH2f2ctN0O7I1HTtBURMBcroAlYgjM8GYBFvPdA+imolWmjWHi4gzYfRqHKRuMrUQIsUDygBhBxs1jo+CJ/IRoNDEAuvemMJCC/Xg00L/U+v7I1Ly3qnhB/Jnv36SmOB4fM0A35hihOAcqHpM4x/zAdUx8e02G/BVzGxEpEBsqKathzVgltlb3EfNtLcNVGPPt0TpvbA+eMs3SfMcK04ln8fXDhgIiSOwUm4lj8jugXZhmRg6AHMb9gijciwnTDnNhKBXDI9m3iD38ciZ0YLpbxWho2ISpAY66Q2ZZgwv9YyzHM2QkASaOBrCM9OP4q+8xXnvSaycEuDbB4cHeJeEM08EstvvA765nu7r4RjF5YxNiO742DawE9XUMghITWK87c1sOWHBLFCdbxFqYR1wcoI8cBOX6jFuFBLCGvrO4QGX1bQxLMyX1IOX6X7bSfq7geCNzFbDeFfsL4sAm9acvxwtCFjQCGbaQ5SXYzrfVaxzOdTr6hCG35oVdOc2NjGrlX48wehxksic+UH1zZFGbgTZ0K7g4w03xafwEKo3qmAT1ovmmWMLjkxQfaNJsfbCSfP/Bjam3D72Oor77aumCQix5g05JlNJPOM40mKCcXes2BgAqwbwjX9C6YD5GLvF1Btsafh9ONbfSezJDaSKHSLBCtccxqI9oQpBKdPOW8ElM6cLAUEp480Jj9F8ZWZlutjwrw34IF3Ru/nXGEPVdmdKGfy3h2xPSckwZ++JVZyTNxYgPu4Xr7t9dEwC884PvdGPaUoDyS8JT24R1WOfECBGsahPUmDtm+cTW6WDpaAjUzlyS1kncYJEIDAiZyxN0E5/siGdvg+9mUv9KxWpkpJZHQvPvaxZnxBcgaAiXh+X94PwInyIy3xvwy/LG3eRYB/K+3Rv/0tbkr5t1/t2Cf/2ywR63xthCV3sBUwghIvm+R2nAiiQx9m1ALsHxHN59A48pBKgBad+otn9vQ+k4H3eDprO46VGMaI8i2WtEMWRIDaGfMTZn+VEuSgW8+gwAObmZIcwd38EfjH/1vT7fEMfSUMtuvYNP3y02Lp8384OnnB5SE3yl2JVLXkupN8SeLMR0edpWPOdiYAzEoLsnU06ADN0M4jS0g3qw/pl6ie/3qbB8IAwhZKSSWdYi2UeyRcdX7oYRIJHqRg3ohnS35cvNC0hB48rizpKbfgIpJ4K8UTXsMyPJS8f3molSYALLgj3yJXXfIQUczfMrnTGm9vXmbqT9Cxm1gL0Av0xdB/GsoGePVRtqwDiU7NkOC5OoSHUj2313k5QM26h2luk7Bj3ZCNe/pU0Qy4KK4CUIssMEE7uGyWV2uHjb+uw+wh8kX2daUJevGzUyICdt1kJizKnhNN9fJdvgDiNkP/wLw3jTrngRHBUjR54lJbBuOeAjo47O6yybKKQ1+BYN9E7SdXSh7kg7fhkCp+XcFTAgpvpIdDeDnincsPl3LFAaQHpywRwhptNoKXGKHlun1+/eKorKDU6M+vPdy4TRM3hBqOByFyqMtsOze740DPsC8pAEAoG/Lv5/CMA8eARSjpFJ/D3fpm7bv13y/1/gYgKdVn1LkvDNrMDBe5OOZLrnE6TOLjSDqjEAmIBNMzyKH+RuFd8whbrQq0Eg9sSGkBz/Ho6Yxe0G6mANNHo8de/ikteZX99WyNEZrVJf5T6opO+8RJLMjhgqGLMdsOXbSlqCutkhdPhvUMPc/H7Tgqm9nnHDvwF6YngoNZcUVAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh3sUMUhQ3WyICriqFUoQoVSK7TqYHLpFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNXFSdFFSvxfUmgR48FxP97de9y9A4RmlalmzzigapaRSSbEXH5VDL4igCjCGERIYqY+l06n4Dm+7uHj612cZ3mf+3P0KwWTAT6ReJbphkW8QTy9aemc94kjrCwpxOfEYwZdkPiR67LLb5xLDgs8M2JkM/PEEWKx1MVyF7OyoRJPEccUVaN8IeeywnmLs1qts/Y9+QtDBW1lmes0h5HEIpaQhggZdVRQhYU4rRopJjK0n/DwDzn+NLlkclXAyLGAGlRIjh/8D353axYnJ9ykUAIIvNj2xwgQ3AVaDdv+Prbt1gngfwautI6/1gRmPklvdLTYERDeBi6uO5q8B1zuANEnXTIkR/LTFIpF4P2MvikPDNwCfWtub+19nD4AWeoqdQMcHAKjJcpe93h3b3dv/55p9/cDPGdykYtTXU4AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAStXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpplmO5boT/cxVeAkeQWA4H8BzvwMv3B0pV7qou26/tyk5JeXXFAQgEIqgO9h//fsO/8a/2KKG2PkRFIv+qVs2TFyN+/s33mGJ9j+9fKd/30q/XQ/5ej5lLftP3xiHf+39cTz8H+DxNXrW/DDT294316xtav+OP3wb6TlR8Rb6K8x1IvwOV/HkjfQeYn21F0dH/uoVln+fzYyfj8xv84f6ISf88/f537UTvNOYpOVtJJfL4DVbJxX9LKJMXjcdcKjem0t/r9q7/2BIB+VOcfv5TVnR9qfWPN/2SlZ+vfsvWNwJs7bds1fy9pfwWZPn5/MfrIbU/Z+WF/i8z1/F9lX+9nkpKnxX9Fv0X/HvGfXtmF7MKoZbvpn5s8b3ivsUUPvUILE3IjoChwbP/KD+DzW+gcOKOi5+dNGXSdVNNJ810k73nnTZLrNlC7rzIeefyLo7Ss+ZdPH/Vf9LNvWg5ZZDL/dJeS/65lvSm1bjDm20w80ncmhODJT7yj3/CP/3AvV4KBHi81KdPfnP2YLMMz5w/chsZSfcb1PYC/OPn93+e10IGm0fZS0QZen2GWC39FxOUl+jCjY3nTw2mfr4DECKmbiwGBNRE1lJpSVLsOfeUCOQgQZOle80sMpBay4dF5lqKkJuRfWo+0tO7NbfM5cB1yIxMtCLU2SBDk2TV2sBPrwMMzVZaba1J6200bVOKVGki0sVJcfbSa+itS+99dO1zlFFHGzL6GEPH1KwF0mwq2nWo6pzMORl58unJDXOuvMqqq4Ulq6+xdM0NfHbdbcvue2zd8+RTDvxx5PQzjp5pyYCSVWsm1m2Y2rxA7ZZw621Xbr/j6p0/s/ZN699+/kHW0jdr+WXKb+w/s8bV3n8MkZxOmueMhOVQExnvngIAnT1ncaRas2fOcxYV+ists8jmOTvJM0YGq6XcbvqRu5A/GfXM/b/yFnr9JW/5/5q54Kn7h5n7e97+lLXjJLxfxj5V+BiwUH3cM/PgP6r178/h+2IWNXr3IZDKnG1YHtrtFtaVWu1ilevx7tYtr7VXOy3nSum0NHSeHSC4lcbIFUozk32J9iFdrXthMcaFq0z0Wlp6+qg7HfZer+Z0+zpjlQ5fRmKkS8fOua1j1CP7llovW7E816hHdHtUrZ5+oz0IDLDFuIMOT2Rma2CHreke6c5TYFqCY9puXmPuPRcL6KvoarLOvlBpNrRL37lJbySs733aav2UesPNIHA2O7WlZr3tW+ML4QSvXKsuLPpsgL0u/mbyXnZpdPGZjOttnz2khypsW2Jt5Fozqdl8qnedcofdunR20BHbANt15T1WAltjrZ53p6nfQqC6rqBWe6l0nMIi9+69RD0LYHu7WZT7SBuQzttKZNQmaIJGvHZZtrsC2T07siMATFvb7ja2C4/eLpMY6Y3jssO25l3SrxyZyBE7R4kTA+Zia60CIJVPnhkqFFtZ7lbmX7OMuH2OHEEBv42VEN66HZf+st21L32sSZIpaVIuvZie0Ge0B9BFHxzfMMd/8DzkZjNwFFdW4zWFApTWlpP3vCOzxUm1FWKkBtHMW+zI2iReZFFt7DcKsCld21qB8OQjdRDXQhXmKB1CEcC+q2c0bT7SjLbfG228GPk7hRnhmQNmEQOdQj6htHgI3AZ5KV/KSy5Qvz4ukCY1hWWM0YhnSa3Uk9dmzdAdoeYHkiPXuQbNHUoZk0+U1KEXyZnw7UUCFyAmnmlQI1tjE1u3fEp+abX5p+r/Iz2QS1Kc9umzQg1lt3Lhw1NuHXclsLDiGHcfUBnKZe/sIx0kz6JICFA+2cTpDpqVDFCytG0wMyxRxibwdjZ7Il4ytbdVoBED6TSBNCbLX7lBnKTOUXZxF2o2nAngN2KboX6uU13NKlAVjWsOwqVSAwGjKo22ARgudUtcr3jbr7JqqgS73qGbknEAGrMVbrKz7oxe06mx+Z3Ct8DT//JMvxjD+NC4EX461F1OUiEZ9Fo6PQak4+Q9cFXp/RXYwfqdetl701wUChFKMN42b+9HHuVV8vC2TBo2vXVGDSCqz6sQl2sSK9HIcSu0Boa7ZhMwb2bxhfVtCl19V/kBwlpSpmxq7XRkqEtPSbqTM/gr6VupkEZLO4fWYHXTxiKN58CCXNsCME6+O0Pc7LgEgroA87HqGzRqHg7g1iwoZdilXwZ1KQgjzcFdjZZAWs+iOv16vVkgmkBYdJF2PuA6s/DJnibdlxZzJwDhCu6LAGRQmeH6TpWowl4bxmBRWhagC2iAc05T0HOmEgY2Au9Qj3bpoMwJCCe7bsTXYPTvhMNbNy35wNACBQfebVUHW6cb07j9jtu4NhM6gGYFw2/BSEz7shWMncc+X1RAvc6jEiaCB4r2pC2MMTlBMZVELQMZ8sm87CGvc2yZLlbHzL5AGkM370hIm3UtpL4vKf2U9EEeSP1X6XGmaf1u5kU+BYRD0+6xqOhky2zr/PWGv79/S1EEBfVpo592XV3EGVjeB2AddoXuX/mwwVzp5WiI5K2oRm6nfGNeDSKS00DeGClvsFMQXpYCssEzwwNTL5wNayGwm/Z/EJA80jz7ukpsB3THWulMHV13IAfym+m+VAleRFOX4kRD6SEbCCQl4mKfAWCOJhC9AtoeUZMtbl7SD8aBayBoffyKhlwj0/zovihoCM2J6cwrkAYIoUEAvaO8n82lBUATNBjkBuFAz2jX69Gii1xgw/YFTl9mr6KFjXbxEih0lDTYKeQDaGlYWEA21FAdcME9yQnMc3hDivcvCX9w+QmbsVAVDI0MBeQQnLNu/lxhFsL3+SBgK+Gf4ebcDyzS32AR/jFu+gc3v8IG6fcDNwhHF3qHHr2JKxWOxa4GvSBc5MDZFQxAfgK1S3NJHLvz9aTBQRjBdTjkIZooUtwD+YcX9bWmaXD04mOOlQcfkghzo2hSvcz6GCkT/9bCKBEhhWrfyE6KFNm7EVoFtQCBILKAYro1Ge9EBFtVWGDZhCwaHNAQyAnJH8MtiKZVBxYBAYpEVEJZkQkoCMNQb2xFRX4AJ8iqpu7AqLZ9YXR/yB6mA/BBYR6iTfPcvZZ4yvTwcA3VjiY/9MkL6fVUNBu690BZQJXyQOShufFPKAW2dg6qJaPqaRfwIi2p+/pxEpdcokQK3RHJqILUAfKsNV1uRStfGq4e8Or4COhH4vE/IvJ3PCqY/hWNgDH8y2hcU3c+NAb0VY2If0FNd5zlrVtbph0h75BRgNL7LH/ePtT7LAouIZ6E5v/6rFs9Yo8NQaluBzGOrKGMHVkrFJe+bVOGy7B/GAhBBjJg75Wx8G/e6RgXkjmsCy14jXxw+63UNLEr04kNyoc4BNw3rJ0r0a7S3L/ebkgoIU3XOR/oYyHZFn+IkR8FYWQQfYgUa8hjrIJMUtkPsgHxr191N/JPtdzzIlqomkJs0dZIJ0rB1wCVQlNSLeBzyAw6N4vEM1B34oIfH5zBSOXNT4Mp+a8iHItfoMZdELWsAuILvO7QH/VNQo6rWzx9o4niuNx/Alw25XGqqBW8GS0x0TSN1TcuirqCbick1OFedZ+IZm00BUGeI6Iw5+7wwDNekAElOjrPoEAQ7vlaLndsJwZlnb25zTqYKdmUHgoVoW/TbQoQRyzdJ6egYhzH0x7R4sddUrh0GdT7wJTo0UAhkp5zgScViyGnkayJFFkIPW9+h05xySh/5Sdw8JFU/JvgRGjuWkxoyPeWx5SFsobrf+Nz3o0uOrgyBhFBfZHXtly3UTF9g4+Bw4iobQRTCahTcObjlt7co60nhwsZBdPNRKhMbYcFF39nVRsJk77A2qiMd8yPxDQUc8qtLjMhaH6n4s/cxkTEKvwwky/eF/Bx3lD7/INVCN8X0LRRg/vNekelk+FYGNfdY8IvYHUQXnZN7B5cyj2zAWqmX/idg86erDH7wYsiP5GtFcqPFEfCn70MQZ7AFbbod2La6ap4VgiTKoVgGoaku4ZMKOzW+TVv1V7KG4HMipBvtHCASd/Jxc+astMWOkDIOk0ZW1vOVZT5PrWESpfBRY423JcjvphjR0FHIPgorIt1VCrZGzjsbhQQ5EDFYudxaui3LJk1YPxw5fQVGo1+Gp47uF9F+R+dGKUKbcEHMIR1Cdk7Iu02D0X1WK4R4+7apqMdkDdMookuMgfea/phsvh3H8go/AOWFZZiQWWFjHhGiqSCUySO9FC6wXN41dWxHwSYPTG2l6cpDTYLzeNgMRqHoqKfdoJN53Syk04No6vmpGJKrscZchpwv8fe+U9EdomvwN1Pxh3Mi6LVtAFtaQitxVbBbSWOWKFnwA4suZPO5n+75os4exayDhZ83KN+ZnjdpGdaHAvut4Y5n/LGW7RKye3E/CiA5Qt87ANeWC14hAhGfLUIVEg+1oduAjaf1Apo9P/W9KFvcN2jEGpgDBoLPJz/puvRFGyNlWOhEhtxu9DRKNV0ozFB9xP1Y3WUTfFGRM+1om4xKgHeKeGMB2oEFje6CDRa0cBIJz/FchGAmHATTihQBojPgf5160WbqQpsN1IgDWFfup1Yd4KzMXjXpZQlbpWOIE+U1UkKqT+bTyXjre0dZ1U/Tft64hr/65nghzq2nw+q0zs0kw+2aMCBLR3UZZ2IMJQz0sUD0Zz9E5YS4vfmQTy2lwziI7RSITFofBE5qbGwBD/NOE8rUi/gqnk3AjzIJef0w/4+X58ISyh8hDQEQu1npzAGoCHoSE8IzskbcY76Wl9z/8HWH/JLInx7oUFd7APzRdOjJQgM7vYYyUTSucMPiunOIMij04t9FLqfV/81VuGXoH0VLjIL+d/84G/gxPMp3vAuQo6OFxH+Ha5Cd7k5Ue8bNUtwn1txU2cWDOIUJOeC7JSST8MPjXZVVAP9TEmddbQdoQX64PA08TZsxi82SzY2G95A/0CUbjSKwxIiq610mIy9IJmmH7AOQFE9KJQe8pgxyi4EAM6mC1HLSsshbMJO1Pzgjj6DWb906nvgnn7xBgoPQENyHul725zomKKEDXMMs0A/AitvQzdvNDVvmDMo5BCJd6e14c2Vhr4GmYGAzVHUq3+TMEv207ca/HAPoda7Vcyklg77X+9nFfXgehp7dyraEC1HyG8FTlOyOsSRlbGgWSjAFHCnAnfDZ2jq/NqAkGzsQETfUyaHlZXL6ogHrTopSECq09eoP4llyTvWC24H4NTNJhpcpAhXq09Wt+GYbnul7vb+nbF/TL0r9NcFqh8PrYoK2OHRb3QHiysgU2DERaHhACp967hQTKgmcN2JWUreSXNZHUshBZOCLnI7GlCFKArV+U7Vp94l5xB9MgRbH2gYGQOZOj46DQeF3tG9hrDU9mQOThdP8mTNfCrnwJwISKQPnT0uR7VNigXpWiEFP0Lxr98KaVRvvbFK9W99yFLG00LSEBRM6N9hdpSdn1v1xajAaNI5aoM1RvOvbtFmReiHev0we/lXd/QOdgDhk35za4XWdq2Kq0CLNKSaZSMmiFa3b52utEkcBgkaBtPuvCgUnUfhvWgjBioKqFKmzXuYpxTl/eQshPPO2ShJRza2dD8dmfb8nMrEf/mI9cczhuFgqAQhsyhVlS50UbeZhXJw12E90H4zEaXeyEpzm1hL9S8p8IDmB3Uoe0SMkyiamhaFiUZRkxc/jhjIoYNyQNaQfNBIVzUIyF2vZUKndnGxeMRUKB8atHpXwjJENI834Aua3xE9HrDApxJwLZAABnp544Cu6gTzDanTXSRBCgWnZa1TIFQX/aCR3IJnEahlwKxX5PoZ2xzJv1FDSTHR2I/yJ5bIE+PfISQqkGpHdqMYFqq1uu8F/1n8izQPIr5lhztexUKSUDfKYvHn8KA6E7wzR1wtru04SeGJVKUgRZzL9yofVU7H6QEpk7p/0zasYFQpSSG90K2fcl64K5m79bFoTBb91AYHjv+/uSLhYRe6bvajej/vvKkVHJ0TPF4buZAoev8WpEDemJctMADcTzd4GkafL0juiyEKwG0XETEBfR4bioCLBmZlDprvZuGtR/zHJPHinE9Ok5/YQ3yYCfrV8iOC1oAVOgDBDksbjH9wOmwIuBPo5icdgiwS1wbND9YU/UHbRZBMgo0IV1jpSUKhQlaYrnkehdAkrI/jgs7JwVWXutTfHbKGdLO6gSFyCyp2j738tB41BgTSDRFYZZQCTKx0bOZkVEiuHFbhtecqYjkv107p0VeeJ6GFqZ+UMrS5tr5BQKz3toOfxbe3a1dtvW+oRnvdOiOWQK+fRFWJgk9hWwgNBvX6peddODKw713i8VM+1Bw+zzXE80FMMd0LY9XoxN0P/Nty75bP4xRkTPHvFMwzuwKeBW3l38aB4uaPlBEG8s8HGwhv/x9y/hPOIdIfHx3GqQAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPU0tFKh3sUMQhQ3WyIFrEUatQhAqhVmjVweSlf9CkJUlxcRRcCw7+LFYdXJx1dXAVBMEfEFcXJ0UXKfG+pNAixgeX93HeO4f77gOEVpVpZt8EoOmWkUklxVx+VQy+IoAowlQJmZn1OUlKw3N93cPH97s4z/K+9+caVAsmA3wi8SyrGxbxBvH0plXnvE8cYWVZJT4nHjeoQeJHrisuv3EuOSzwzIiRzcwTR4jFUg8rPczKhkacII6pmk75Qs5llfMWZ63aYJ0++QtDBX1lmetUI0hhEUuQIEJBAxVUYSFOu06KiQydJz38w45fIpdCrgoYORZQgwbZ8YP/we/ZmsWpSTcplAQCL7b9MQoEd4F207a/j227fQL4n4ErveuvtYCZT9KbXS12BIS3gYvrrqbsAZc7QPSpLhuyI/mphGIReD+jb8oDQ7fAwJo7t845Th+ALM0qfQMcHAJjJcpe93h3f+/c/r3Tmd8PnXByuOaabnkAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAATbHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZppchuxEUb/4xQ5AvYGjgOgG1W5QY6f10NKtmW5EieiTVLDIQbo5VswCvavf97wD37qyD3UJqPP3iM/ddaZF29GfP2s5znF+jw/P6W8P0u/Hg/5fTxmDvlJ7xNHf5//cTx9DvB6WbxrPw00zvuD/esHs77HH18Gel+o+Ix8FvoeaL4HKvn1QXoPsF7Lin0O+XkJ216v+rGS8fof/Ol+xEReL19/r0L0tHGdkrOVVCLP72CVXPx/CWXxpvGcS+XEVOR5H3mu5SMmBOS7OH3+TGZ0far125N+ycrnuy/ZekeApX3JVs3vU8qXIPfP12+Ph9S+z8oT+p+uXMf7Xf71+NgpvWb0JfpP8K+O+6yZVazaCXV/L+ozak9Srm4u4Zcegal1stOpocGrPyaPweIPpaDxxM3jpJky6bqpJk0r3WTP60mHKdZsIQtvcj65PAdHkTzzKZ6/6o90s5RZtAxyeZ6015I/55Key854wnO1wZU1cWpODJb4yl8/wt9+4V5vBQI8ntSnV35z9mAzDc+cP3MaGUn3HdT2BPjj8fXH81rIYPMoe4tMht6vIXZLP5CgPIkunNh4ffVgEn0PQIi4dGMyqZABspZKSz1FyVlSIpCDBC2m7j2zyUBqLSuTzLWUTm5G9kvzFUnPqbllDgeOA2ZkopVOnw0ytEhWrY36kTqoodVKq6213qSNNtvqpdfeeu/SHRSXFKlBmnQRGTJljTLqaKMPGWPMsWaeBdBss0+ZY865FtdcjLz49uKEtXbeZdfdwu5b9thzr0P5nHra6UfOOPMszVoU/NCuokOnLktGKVm1Zt3Ehk1bl1K7Jdx62+1X7rjzrs+svdP62+MvspbeWctPpvxE+cwaR0U+hkgOJ81zRsJyqImMi6eAgs6eszhSrdkz5zmLE/grLTPJ5jnT5Bkjg9VSbjd95C7kV0Y9c/9X3oLUX/KW/9fMBU/dX2bu97x9lzV1ED5Pxl5d6EGNhe7jnJUH/+jW31/D+83KPiEmlrd0ZremEblUT7eZm0BzexaimmXYgubnuEPvkbQGa9wthiOWrraVZNfSbR0D3dM5e18pXeZJJmnLWKdvldHSuKUOsxOt3bbTboUw2gyslJWdOaVdy9qByFHOHqbkHGo8yhf7pMzaZaS57phW01Jel0mrG5SmjUNddDez7oydWuXyM2lNdiFWXboPJVg7FGLzCt/lNwpH8zahiOZobe1kVcJOl4zlA+HOkZfx6ZCqda7d110dOqk5j555J51FiWZST5Qtdd1klCVRBYFSJPLQBhVUm0uIVsH9rLkAPGR3mNdLnms6F9jxCstcglo/til6U1v7hJm27l3rQ7HE7SzZVqiFqgKlzQ0BSa17KIOX6mWnnHzLOfToTkNLH9lgkXjuufNIsdmoM5nGyaSbACl51ihnS4t7TBrI9uikqdFIpLPGdaGkO4e2QBHMZEe8Ls6U6DWk+dBZ9VLGu98lM11aIjXjakwmrUP6KF24IvLlTbBSMKXAz7ibZFg6JtIZFqmoicKJlpnItETwSSfBphrjGTYkkzzqgArxS9wA7/o/amHMG4VpUQ4naZO6llRb63b19J1i3g9Lqy/ptx4Jf2yej95JmyqnPp40nD1FZ6eEE5GkmCLLXyizGgweEiqMDJ59WrKiWnajjLNcFMFdh/WCApcKnDU3Ymiqex46z4jy0O5rCny1U8sU44naDrlFlpBoiqK2FSlQEkHj0YlVtbmq2OSJIt9n3XKPnkuWEFrHx1cmu67wCdWWb26RPgIq6cbWQSCh7ae1mavXCLiYj//UCeia5L5SWHfOUy1nmsah0qgDFAnlMSvhAGM7iEUB9aZX4xO7Zb2Agc/b+D4UPt78/jq64wBC6Jaup8vuDiT7JCo/slSKKILbA1xMusPOqh2o3McIKmivFJLa3bxx2ChgFek5k49tFcrJazxJPZAlqmxVaMSQfstACssdyhDQIDJr+rfDSzfXCzFsBrte200pvE5xAkmDNjbIohNm5klmgx9YnSeanMqY5A/FTwObIRibOeDRqguEXKfVlYUsDBao9WTlykDd1C2A/6v6HDLrn8L19fWACeBm7jfSqwkmzehsIIaOBraQNtfrp43aAEzqpEvhK1NPFeC4qG2jkWBXunMnuOISRcCYsAdsF3O7fUNnujpInQp4DZ8KwV2FmvtIOsh0MU0/t5EmSrcCsRpAyod4KFVKDYGfrdIxkSyVp42oJ1W+RLmRdmi0Esc0V7UIzJJ//A+4FBq6GJDSNahvqK0ceqdOtLOlCY7I3aUpxTsUdtOZL6m/rVwjKAPk2qwfngswTfY1DlqXBA1y3zIyIc/qRPHoW5SIy37KpWFJjHxD3I6/c2bOA3y2hQ4pYTZgbjokXWhk5NuoOmZiZwI/XVUnUEJFcawCmm1Ta/tw3ZnakHNtNGbUWEmVz6sXlxuq5lNV4lOqIJuQU5QHEMeyooAIrnXphlkdMea0QBdhgMjIKxu4ijyOJsAkNkSA4nW3zegoRhLwGvsiwsZFjaA+vJ+Pgl41LFqKTBzKJzeY4y4K5XoNc7nis0wgQnLKo12glDFaehPgz6/h64EaExPNTwJAe1DE3wFUMBxd4DV7naTKl3PCl5MMxeG/EgQoy39r+w5UIWwAZ7wmNqNo/ZhYKgiEmkMjJViEcWAN4ggPgzAdfloCgu4iHEgRDTcRcXnedsSBlODF7lLlgOpER4KNup9IZKHakS9TXDhct95PHzZaH3cFI3KsEcHSDhw4pxZUZEFXqYrF0L1DQXjKGS3CVVwx8nDWQ8lEU9eXCBiEat99LPSlgWplOVQDS2NDg3WSNSQYde+YyYCuVZNkYNUgND126YEyidh4loQEG2DBs/cx8KWQNz0yTgqCTkMLmclevB/oQSuswMNCWvYAHh277jmLiswGO2w9Q1IplD35KTr5Hkwr71QA1z9KYTfXDe9ie6JJUVGMgMsSH6YhBvcTN5Z+bw/6BkhdiOf4X0Pk+Qpv4YVvn/BmtOy3CPg+A8gw+v/J82EJl0ikfsma0i508WtNQFu6GJ5nsZ7sTacCgBfB1FmObYVEFLW3GkrRWXPP3mc5A+7fEinK4mqRU5D8gGpdNjZaTx7lfU3nAo5S7q6ZuzncQWjEbqGSyCJeBLuCbu5dB2B0NAvwQyBz0dO4KqIKUmzL6q2DRavRClhgVIC4xaAFJtpuxYBysKndvZhDL1fAUIGdSPVI1pj/IDsdOKzaO8oQp+O6V3E/4NI4XnZr1TBg9+zyic6BWbfzLUlOLB6VgvGd9dJlG2R3DQsnLrRb6tTGFEK3xB7SD1RT3S59Z7c2jisR42rokoQEIGggP4WMs4k1IYD3cOfVdnNjhiKwU8dM8YaSfVVYkKt2aOTuqsgBZY7jUazQPnqrocQgNSYPRF9E+SvLGIzVnyRDRzT5U7xUMb2wAFgAhqoHIja8Y7WQRurG2vHdnqeq6N53vShmnb5r4SmYj8L506vjGsLOMErgHKOchXNdCpdq3QKvrjCj24kXD1E11zUiyyQP1MMjC1GiLD4NtFbhbGXGdkY8i7TXDL5BETfhadPCzeugxtwL4lmKYfiQ+XpIzLxwA9hIky+ggMIqYFfDmiPa8AX7XMRUP+GAPciSQmZh4Q3ckRH3wIhZAsCijAbKl3J+pBtLw3pYK7n4IYHuIwk8Qdyjb+veV3i3lQFXjE95i470ifEZ34URpc53BJVKlIXJwbJgCB41Ag71DFpSqxtLXgf2MW3cvBmvhAaOZEiIFY4AVBNM8UITXn7AS1iF7J6pAoWAjmh4y5Wmx51o7qBVgkfol4MYBDQ6qnu60cLlwDyLZYLAnBUqs8u49IqKPjh1RKKDN4iOh8DC90kXJ3xR8Z3IXSKZY8wTHxaiwMkIazyh4r9Gh4PQgzQ5mi1l/HgDodGAEMOgPtzPUKjxDvqs3BfQ2QO0J2IC73XMhu3pL5h3OK0uF1GF9tgFiBzAEbEjPTfS0cXuhVAaV2toiWcgvopYcMpGI0r0rdl00vNRBbx+vXb6+do4CCDx7s8BhYZKAbGVsYEF33o6xfVwbB6PDhm42oxaeA0Pis6BgJjTlTqIdcdjI5CuK9YAEKmrYea3ZUCxeBgkMLVzXT48dD4WLX4TigKZ1x4yfWTZoIw5Yfj9Abj/j9QD9LCQRHR8r8ZAtosh4YsTZzwE6+t04rsoc2+g1h5gIHF4+O1J7Vg+NGbz7SfwOlPzvqVFhJCQ4mnAXHYqSrG5AGNBbEqAGmFR7CdXyA2PXUBbZDh04fz6OMUM3MHoVfGpA62Ch3LlCzVgC7l8h8oDzdHdYxXflJvm2zGM3fYpvodExdcdIZQVxzzLN/gLhzHDXBEgfgFpqgumRYc6Z2AyvCqVChakJ3UFShQaws6WkvrLRGBZ2vdBDT8fmO5ZrS1WV7AY6aEvuGNBCy6dENU+H7cj+IjURXxTlPiK5oBpiACdbw2ydEwhPeXgVeb0ZnPzCSk4aFIe3c7D+pQqdIRsEnklqk/0kTRiCrR5Cwx7NlvcKcK/+C842Hscz4SUBV8uHsfcFaHWDgNiVHyPq2tg2I0GwSGsCArBXY9aaonlIA/89/xSTMxu0YksrZC3USmjxhTd1OydAjy7HAWjs35LiSTJJGK+1fLY/jYha/Vtoc6KLD7NAwjBqov6ivQQKv+1N5Lit2LeX0kyrAOWwx4Y324Y6Ta1Pfe28KB+o20SyxGKged8rR68DLyOIPFZ8CylJuyKu1OIFtC7cUjNvv1wXNFyGgVX0BpryQgwPEYaTYyRPB4XzBaiaPdjDIqGRRW4knDdjsiAkxdzpWuOpxqgQMMzl0uLjOmW/UD7ziKzeymC3sVo9mXbwe1RmQix8c2+EFYJ2pqhsAx6apOdEn2fGXY9rvHJmE1Ae+fyqD0sH6o6dwh1wtUz6c6+XccvEf4MCg1gEJAu+DwazG+DVNf1RCkDYkgs37VXmFBbf21t9YRme7YS1HcXi284Q9kfNGWse323t0VlvTrImQsPsQe6oMLeHd2EbPNN6ub3aUuCjRDEcgcWHxX+kvCkf/xHvW1E1jcoJZxauvcKydiCv48V37kWZQxtw4qJNODPVsIU+R44zQtroi0Be+hQX63ZyRriAqWJJEBGzKI6HJPsdjpG3Vc3onja7pSJW3QaDu/lW8PjGISJQeEi9QZyj2GseK/BcVrkzo6CmB6a4tMCg2mQY5Ir7qkXBGGv51Yy496L2SD5l4UJHQG9D4NFJC5gLAA8HHMB1ULcWPqjb/FcfCK03wHQM64NAO9+x/lQNAHAAX2YIPJ5gjLOmy259gcgyvU7L8idDkJ2yr1iWAUkKo7aIk9uF+QrKQAFiq4u8yDdIZJNQ+Ts+x2oKKSDb5VtVDdyAHQi/ANtRPG4NK/Z8W1ilCdNK4egJtQD80GKITglgrcAvDm7GAgUvenMrdOOvrlEwcpEut/RfSe/eJeHm6vvwhdX3gi1lwnEsNAm/jZX13mIJM+UrhGdBlhhvig38IwcJ8W9zsAUzqpRN4VOZ6jfC6b+sS/Y0+VtHOmH6PwKZYMjbnwus9HtO0/IURgRkxFYTHJapCqYIzWFN4BpySEpeKAeD6PzeaflxfmdVkq7ynBzOtqlqAW/BkrR0Y7mINvwbWv4iO6GSDPJHdmbG+xH+UW+DEnHia4hqdQ2ohfBna6CR8CN+u0CFILsuJOLZ99dv72NlBM1hBDGM8IP5TFZ/QAQhDXKyVAIySckQWg/67gP6hDcqVNQlTt3Z3Bp5Ksj2JAxfs+OKrZqmi8nKzhDDVK6ie+cEli83+7BM4qzhKseI23xey7482t4xHg1VjMBA+zFo89895p+Rfr4Ni6Ek+j4+ayNAovkBd00m7iCQrQSvXB97wCkxqsPopP00DnR7zRQIHs2uowUsjA8dPG/jrjS/UYoEgyM9Xs/FSUpLaAjORmgMNyebyyd3G82egkJ4rfESLTf/Lfie7SAK4GFZyh/GrsDyRW3gxoNiJjVkPK++Ygp9T1h3BB4xirxqpZXj7YAtoUcBcCwBRv9j0xh9EFhGOyOMwoO4rmNW/1GTWx0/FnUAZN0P19SxougYiS7BzkOfe63MH3Nd29lMhC6UvG0g7Pwn4sCXag3v1t6XXfn5RrBnc4hwNv3CiYVAk75nhTtZy6QhgFusIEE1Gf1sTiISULf0Q1Ukd8PtZuzAzk1bA2fbRAJUoZT0iWiKGNFpKKLerkngI3DN5P83tEsCCValn5tCSSoAFZ8NE5iZCGOFvnI2+fc0hSMyOP6hgheBC/JqM0XtzPY4ff3CcRZGFPQp+eT9FGVEXZAx5l6MPfTxBAh6p9mAdsCes1v4slb46vGhDSdrI7iP3whocfnC9FXoxzU/6gk3T51NDqRmqXEDBZpfvMByw0xUJeUSzQ5viPcMHg1uzxlzOnc9szCN1b5NBH44/uD8eVHwoMzBAdw5t/eZ7uSp4CG3yd2DETwEdbr9O8QEP3Wg28roCeRYRkHdKL6HzKxMGDwGRf0vRjBi75j7X6nFNW/ckp20Z7t7ZL6fRp0CBMDCbLfwU4hteMuyDWR35qZvpvj1ZDwnfkxnjWhUnmmRRqK67v2d+On/kdI/wa+GQTprDiGjAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh0MUsQhQ3WyICriqFUoQoVQK7TqYD76BU0akhQXR8G14ODHYtXBxVlXB1dBEPwAcXVxUnSREv+XFFrEeHDcj3f3HnfvAK5ZVTSrZxzQdNvMpJJCLr8qhF8RQgxR8BiUFMuYE8U0fMfXPQJsvUuwLP9zf45+tWApQEAgnlUM0ybeIJ7etA3G+8S8UpZU4nPiMZMuSPzIdNnjN8YllzmWyZvZzDwxTyyUuljuYqVsasRTxHFV0ymfy3msMt5irFXrSvue7IWRgr6yzHSaw0hhEUsQIUBGHRVUYSNBq06KhQztJ338Q65fJJdMrgoUciygBg2S6wf7g9/dWsXJCS8pkgRCL47zMQKEd4FWw3G+jx2ndQIEn4ErveOvNYGZT9IbHS1+BES3gYvrjibvAZc7QOzJkEzJlYI0uWIReD+jb8oDA7dA35rXW3sfpw9AlrpK3wAHh8BoibLXfd7d293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAQDHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZlrciO5joX/cxWzhCRB8LEckiAjZgez/PnAlD1drrpxu+/YUZJKSmWSwMF5pMP+n/8+4b/4yTHmkLW20kt5+Mk99zR40Z73Z9zH+OT7eH9EPp/FX98P6fP+k3jLD/oc2Mrn+K/34/cJ3qfBK/3Lidr6fDB//aDnz/nbjxN9LiS+Il+FfU7UPyeS9H4QPycY77ae0lv96xbmfp/tayft/Rf84XzVpL5PP/+fK9Uz5TqS0pYoD4+fYkkS/ydBBi+UxySZA6PU9/V9LJ+VUJA/1en7p7Oi40vNfzzol658v/rRrU8F2NqPbuX0OUR+FLl8P//x/RD1z125pf/LlXP7vEq/vr/k2e+KflT/Fv9YO3fP7GLkQqnLZ1NfW7yvOG5yCb90Cyyt0J0ChhrP/tv5bWx+AQV71jP5XbHHRLtOzNHiiCfu+7ziYok57ZAqL1JaSe6bTWrqifXSv+y/8aQqXUwaXVy37VnS91rivWx/VrhXa1zZIoemyMkiX/nHv+GffuEcH4UYvZbjrRXrSsmLzTK8c/7IYXQknk9R9Rb46/fnj/dV6KB6lX1EOqee7ymmxv9jArmNFg5Unt8ZjNU+J6BEXFpZTBQ6QNeiaCzxqSlVCEpSo0GDpfvMTDoQVZOxyJRFCr1pyS/NV2q8hyZNvB14HzKjEyqFOWt0aNCsnBX81NzA0FDRrKpFqzbtOoqUXLSUUouT4qhSc6haS6211V5Hk5abttJqa6230VMXSFN76bW33vsYXHNw5sG3BweMMdOUmaeGWWadbfY5FvBZeekqq662+hqWTAz+sGLVmnUbO26gtPPWXXbdbfc9DlA7Ek4+esqpp51+xnfXPm397fcfdC1+upZup/zA+t013q316xTR6US9ZzQshRzpePUWAOjkPXtazDl557xnT4f+RBOLVO+ZRe8YHcw7Jj3xq3chvR31zv2/+hZq/qVv6T/tXPDW/cPO/d63P3XNnITX7dg7hV7UR5g+Pt9tpDZc7H57Dl8vmBBZjQJKZuNivLe6qJ0KRa10Ri3sSNYUdlTSNhm2fHrW3q2WHUz5Uoy2+qhR1zpd42Kfqyg8pnJK5+GxtfY5jWIPR8pZTsbIJJvx55WD1SrglQsUYzWZesXZ6EkvyWy2BWNz5ii8eI4Oy0Oimkb6skc7bSy6pxpOdJYYfF/3mc9YVbJGen163LX5y4iCvNVAAtgR2sr6lTeca5byylbY04Zy0lkYmkRfF1ReNGUqriVaiyxjp7FhRh2DtvV1qia+03tuAKqzuDlD4XICE9HCqRXrsGVorgIPmcFOOteac6Su7GnsGruyokw9o4BjmR0ARLQ/jwP6BpXm2fXsKYML5BPnaTWtkxc79oIWNTBfe9+FB/A3Oe2s0XJfVYMAPuF6JY3l7goPEzen6iXzT9eoNnwSlc5YYkriFIq5D4N668YUQbg5qBuit6R/55niMfQdTow+0WNvrlaf1sLs3mChUH0c5PChozp06pmlnrJKn4+UbX1r7SOmvPuc0vZs2/wMjDgk0VtYqxjIM1dYscoJtGQYvTb2n5n30Tkf6BursV16Av77ZMB90ucZjDxYsOCHFZuw/1vDvlhJ2YKlPEbd6M9gX8Of00jJTeEY176YG8UDIkBnDqWu7YSyZCM+pjMmOzPXqic9Xsw0s7SV/vW4vs+h3T69/xsRhPcJA/Sdzz51OUPUep69F73eWyzNJidiM5NDYiJEZ04GNnB1WcvGinPN48iEv549+ZStTUt7SN8AY5cIG9bWk7bOPPaUgcRz+LSVmWDI8kBTtZh2O42TplnioNGx7n0YJGe0/MGpMZq1AeLCRxkQIcHZWtMZWkOYa88AP85ZhWvSFmu7zEatE3LewfssC3ZnGhI96iseCHaPafkLlUH/LhpjPVm8LgypZPNX44wGO2V4BWJzCQCLcAzitjMDL/VsLue27FlaJ3tjC3UIVH0aX20MX/5u6a6/UK2/lR05de6JOMTWtzzmBhEZYzQ5Tc+QRtkKC9YEqcF9A/RZKmUGwysy8sNYYWlXNWiILrihT3uAes1rQlP7OTTjHJGzo8IDA+YjV1BReKcFo2UGWgBGbZy/l2nQtwGauIVsUNEpOtFTNdaky7kYApqIyuqMhM7HAEsYYApVU0e+i1uMrCdDT3PpQT+o20OXgEPZwBKiy8REeBwv22wNhA5Bw0S4okzNG35mqDMMaVTl0jZunyl6QV/5IMFkSB8EhX0DGTOBi1E3FHh6YICd/fbZ4/06lbX8tzHBVIELRJmYhTI5dvUigxWcYq4Df0CDx70vPGi03hkp6OEsbTWM9+TQzpH22dKT0T0MjdSiEHJh5OJZggTYdLMzQTrDW3BGMmGpBZcF9X0z4AtKWwK71Mlw8mpfgj5HYVNo7UEJEzPBtxjkTEBt6xiDdAYsVyTggptVFBK7tJCwXhycUQBHmk9VZ/3J+pb3qKMXk1kDsJQHfRGmOO1mD64WS8OJ0Eeqv1D4zfekuw8Alrkkx9LjBMkc3TpyalBHtw5Xm1+VDScVdJByj0tUsFq2crIXUjrAbSZdLdHUDWjevuKdTvvuH+xOA8I2f1EAKCEsU6bqJ4QXzzao7UMTENho75h6mPnDc/jLGx7P0oco6u9EYdiMpB/YXNQAhxc37C0AG5j2d1zgmN99oAv7G39lrE2WwVFQSAFzbnfZdi/BBwI23hOlS9XNbWHOC2yaHOWQ9oTRCrS1eQCsRiZNyb0OeIoHcMQ9FRzlZgfXBoPgG/YqcPO5y4YO8EsTN94fJ4UOxYCqOfjFF1d8ImG042Oa7BbE+CgSfPkaACzizdHSzO8HQQSivWFjk/uYPAm08ML0Oxlj5EZNYNeJky5h4/oWxdnIP68xUhgQCmDb/TYGDPUfczW4nmnWYhgam4adQQ9nq24MODXIPlg1aQgIBmG4KYBBB/XDdGW3ZoYLVazkgYAIVFTlwK4oWesYQAwzSyS9Bwwc9beJo2LIKe9nhuPWn5j7E+S+ARf+NuJ+AI5xvnBboOjArMH78+INjoT6cnMQWNkJokBBi1tjvoBTcpOw0GLGKTvF6zLyB5RSqzEiWyhCQviNkiMvIpQOx4LrwlWnOuDTzs49wpNvcMOgHkfsdhrCByEJeJQAQAYxI/9cPgrQYWbsg7iGRgjlDKlb4Xckeidy0ioTqwt/kXRC58hFGsNjt4ovxYBjL5W8R/hT7XnW99wkrPYXxgYc+FmK293mkftBSbYluHaDfDay1ODagSwdcVET7CMc1zkXWy7L8wYA5IChD6II2pNLesCUUOmHHDST05V6iKiQq8PmoDmMeNcbZK6FWBVCpawscajPgdd3bJw/1UBI8UH1ysPGVCYlDDnj6tmki5t/5Jb7oL554rFh39P35a524lgrMIZUxqLORIcNkO7x/RXcZPyxGhIwZcMpmacKIm3vHoF2AEv6TCwP0XopjZ/uAeBiPC7ChlawzcowIPcoBGrObFFLl9TmbeE0fk8y/Abey4xQX2OPm2TjWefgu434eMCaE7EJlhrXcpAJ5sr1MLB+qkP21oEJngtlRWw20WXjJTHJfIOMRjlLYYc7ERNIxcL2ngjaKRDb3zm4D0JVkQ76ZejoBgasfHm8w+27PrWH/0ZoMvZ9PDrgEzzjEkOQzDnJbkQI1HJBrBNpg1bh54gCP57oSZoZzBG/1hJscm+5OwOcymQAn3kqafWSBWYU7/MR/H/57Gk5ne7UuGEn0+RqeW0SRBrZ8rM2bkQBoHtdbCbaCiHS3GevBXYqChEHkZM98k4io4Fq0ihehV0el5yi7vcsRCzHvmBbM4Oo4a4x9YohJUqwb6FgdoRVVSNIMP8kIi3drSHjMD0erTpCd1qn2+IAyR4Xn+OxoVV4EW9CcmBAS3FzARHEKOWgUXZ3TSn9Bpt/xqxBOeJI1a6CyMAwjRiF3/e/JahO+ALcwOUv1OKf3VvwF9jMhkhgPI3gb9uQQhJJzbXjfvMaxLbtaRxOwNgCb3X4uRYOiz7osgKpTT2ZiC2mA9JthP7l4XQXDvNIZH6Nx/1KvNcgGfl9pfVeY7x3uIN7qsn6VckwqA/DCE/hAwWjS0bT5PMFh6KIU2K5UgGJ/Ix+4YFxAUUpGO0Me16HlBLJ7N7AQusY3EcIWpSY/uKmPCBwIAFCvQYH4Sq0P7IYOMwnxzWcdIWHncQITB62vKWGnQbwwIIh89FHLkkihUyJojCjWwnCoSMnqNp+Ch1HL15exsqP9K8hT6ZgXSU7pmveB8AGGhsxIxlEyHRUR3cGFd8hfjvtNrz92ygnOfjoHMkd29zd1JwEFSO/SCM5lh17sqkGRs7usAhuExZRQktLhdkDmdiGOJg1RK3xBb/1jrvVxQA0D7/QbBloVoU3K/pM/Ohk1Qaj8QVcNmkrI0FV3QSH6Dcw8A5GhK24M4zXqUJ92Tk05ARIVVudK89Xbcltox5yHiNKxriMivWDmO/UTi/bMKIGLoOeM0TEp1z9htwS1HXZ5c5l8EYb+G+mFgEnw/UmWgJenLHN08Coma6DCSK7em/xWlxCM3XiubnDtT08jiIgBFVwljwbIIS6gjMmRtygIiwfowtA/G9kD21jsjGMrXa/fSBQYuxsTByznPXeSirOK3q7VisGrAOqjgQwRMAcYSSn5ERQfKN0QqVcZ5YyKPgX9sls0HlmaeJ8KromfhsYSNjoiZHmlExMo4iwUqrYCl+y3HtnfmNQi9f5yJWlV4OH5YUc0dd7/39TXvB8ovgND7Sdo/e9twbhx/fmZU7YeMcrEsCM0TDfzGyM9AxM+IgMBLI9JsPKaY+TeInkhPeW30IgFsQJbPrUODmW2UTFoTGuACs4sW1K0akJGvg1Cf/+ZtHnmbX67RbAU2uwXvYoDS8GzzKM5LRNYql+H/NQs4gJEjDb88GPp/sXRsyH39RdW+vohMhra6bf0T0EU4pL1EBKRvV8yMCw/e5BHtJwrJAeico3PhZTupL9jk71O511WcC+53vPadEifNmqD/6+Ca1a+B57arkpfxFk/S4oBApPH1aOizMC7lK/D7cCm8Gpmdv8LMsTKPbUoy1mXBbBt/uYUu7kt8X4iEBJVtkKezRr12rliBml/GgfMnphhinBrj0+tkwZfgmFOlagbcwpjomMXOgZY+i+WTBVpb6OMbB3ZnOgIMktAhxTMxLpZXCJvwYdgJdOAiLLEXEflQefJrV5ANNaUX5MRN1kPYPqoWe/TcPEkUmoDPyNRmNehZrh+bo7Yohe/P4KKbNMwW7XxCDD7hYmLI3RhiJ8hjBiC6vitzy3/9nFcwD2X+tecsqjzW1bh3oWs0z623xJIO5TgydMFMUaXh1X4RiCLcheaIZHJKDKqm4NMcBcTmjxGP3GAdIIVtIepjocEsqDaI07Tyi2npk9YovfGDpzY4E8CST/O91aOT5FPS24MRIS9Ze+hF+Ehmaa/4H7fwGCg3GYVGiblAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPW0tFKx3sUMQhQ3WyICriqFUoQoVQK7TqYPLSP2jSkKS4OAquBQd/FqsOLs66OrgKguAPiKuLk6KLlHhfUmgR44PL+zjvncN99wH+ZpWpZs84oGqWkUklhVx+VQi9IogYIlT9EjP1OVFMw3N93cPH97sEz/K+9+caUAomA3wC8SzTDYt4g3h609I57xNHWVlSiM+JxwxqkPiR67LLb5xLDvt5ZtTIZuaJo8RCqYvlLmZlQyWeIo4rqkb5/pzLCuctzmq1ztp98heGC9rKMtephpHCIpYgQoCMOiqowkKCdo0UExk6T3r4hxy/SC6ZXBUwciygBhWS4wf/g9+zNYuTE25SOAkEX2z7YwQI7QKthm1/H9t26wQIPANXWsdfawIzn6Q3Olr8CIhsAxfXHU3eAy53gNiTLhmSIwWo/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]};const DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class DrawEvent extends BaseEvent{constructor(e,s){super(e),this.feature=s}}function getTraceTargets(o,e){const s=[];for(let a=0;a<e.length;++a){const b=e[a].getGeometry();appendGeometryTraceTargets(o,b,s)}return s}function getSquaredDistance(o,e){return squaredDistance$1(o[0],o[1],e[0],e[1])}function getCoordinate(o,e){const s=o.length;return e<0?o[e+s]:e>=s?o[e-s]:o[e]}function getCumulativeSquaredDistance(o,e,s){let a,d;e<s?(a=e,d=s):(a=s,d=e);const b=Math.ceil(a),_=Math.floor(d);if(b>_){const ot=interpolateCoordinate(o,a),st=interpolateCoordinate(o,d);return getSquaredDistance(ot,st)}let _e=0;if(a<b){const ot=interpolateCoordinate(o,a),st=getCoordinate(o,b);_e+=getSquaredDistance(ot,st)}if(_<d){const ot=getCoordinate(o,_),st=interpolateCoordinate(o,d);_e+=getSquaredDistance(ot,st)}for(let ot=b;ot<_-1;++ot){const st=getCoordinate(o,ot),ct=getCoordinate(o,ot+1);_e+=getSquaredDistance(st,ct)}return _e}function appendGeometryTraceTargets(o,e,s){if(e instanceof LineString){appendTraceTarget(o,e.getCoordinates(),!1,s);return}if(e instanceof MultiLineString){const a=e.getCoordinates();for(let d=0,b=a.length;d<b;++d)appendTraceTarget(o,a[d],!1,s);return}if(e instanceof Polygon){const a=e.getCoordinates();for(let d=0,b=a.length;d<b;++d)appendTraceTarget(o,a[d],!0,s);return}if(e instanceof MultiPolygon){const a=e.getCoordinates();for(let d=0,b=a.length;d<b;++d){const _=a[d];for(let _e=0,ot=_.length;_e<ot;++_e)appendTraceTarget(o,_[_e],!0,s)}return}if(e instanceof GeometryCollection){const a=e.getGeometries();for(let d=0;d<a.length;++d)appendGeometryTraceTargets(o,a[d],s);return}}const sharedUpdateInfo={index:-1,endIndex:NaN};function getTraceTargetUpdate(o,e,s,a){const d=o[0],b=o[1];let _=1/0,_e=-1,ot=NaN;for(let ft=0;ft<e.targets.length;++ft){const mt=e.targets[ft],bt=mt.coordinates;let wt=1/0,Ct;for(let Rt=0;Rt<bt.length-1;++Rt){const It=bt[Rt],Pt=bt[Rt+1],Tt=getPointSegmentRelationship(d,b,It,Pt);Tt.squaredDistance<wt&&(wt=Tt.squaredDistance,Ct=Rt+Tt.along)}wt<_&&(_=wt,mt.ring&&e.targetIndex===ft&&(mt.endIndex>mt.startIndex?Ct<mt.startIndex&&(Ct+=bt.length):mt.endIndex<mt.startIndex&&Ct>mt.startIndex&&(Ct-=bt.length)),ot=Ct,_e=ft)}const st=e.targets[_e];let ct=st.ring;if(e.targetIndex===_e&&ct){const ft=interpolateCoordinate(st.coordinates,ot),mt=s.getPixelFromCoordinate(ft);distance(mt,e.startPx)>a&&(ct=!1)}if(ct){const ft=st.coordinates,mt=ft.length,bt=st.startIndex,wt=ot;if(bt<wt){const Ct=getCumulativeSquaredDistance(ft,bt,wt);getCumulativeSquaredDistance(ft,bt,wt-mt)<Ct&&(ot-=mt)}else{const Ct=getCumulativeSquaredDistance(ft,bt,wt);getCumulativeSquaredDistance(ft,bt,wt+mt)<Ct&&(ot+=mt)}}return sharedUpdateInfo.index=_e,sharedUpdateInfo.endIndex=ot,sharedUpdateInfo}function appendTraceTarget(o,e,s,a){const d=o[0],b=o[1];for(let _=0,_e=e.length-1;_<_e;++_){const ot=e[_],st=e[_+1],ct=getPointSegmentRelationship(d,b,ot,st);if(ct.squaredDistance===0){const ft=_+ct.along;a.push({coordinates:e,ring:s,startIndex:ft,endIndex:ft});return}}}const sharedRel={along:0,squaredDistance:0};function getPointSegmentRelationship(o,e,s,a){const d=s[0],b=s[1],_=a[0],_e=a[1],ot=_-d,st=_e-b;let ct=0,ft=d,mt=b;return(ot!==0||st!==0)&&(ct=clamp(((o-d)*ot+(e-b)*st)/(ot*ot+st*st),0,1),ft+=ot*ct,mt+=st*ct),sharedRel.along=ct,sharedRel.squaredDistance=toFixed(squaredDistance$1(o,e,ft,mt),10),sharedRel}function interpolateCoordinate(o,e){const s=o.length;let a=Math.floor(e);const d=e-a;a>=s?a-=s:a<0&&(a+=s);let b=a+1;b>=s&&(b-=s);const _=o[a],_e=_[0],ot=_[1],st=o[b],ct=st[0]-_e,ft=st[1]-ot;return[_e+ct*d,ot+ft*d]}class Draw extends PointerInteraction{constructor(e){const s=e;s.stopDown||(s.stopDown=FALSE),super(s),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=getMode(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:TRUE,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let a=e.geometryFunction;if(!a){const d=this.mode_;if(d==="Circle")a=function(b,_,_e){const ot=_||new Circle([NaN,NaN]),st=fromUserCoordinate(b[0]),ct=squaredDistance(st,fromUserCoordinate(b[b.length-1]));return ot.setCenterAndRadius(st,Math.sqrt(ct),this.geometryLayout_),ot};else{let b;d==="Point"?b=Point$1:d==="LineString"?b=LineString:d==="Polygon"&&(b=Polygon),a=function(_,_e,ot){return _e?d==="Polygon"?_[0].length?_e.setCoordinates([_[0].concat([_[0][0]])],this.geometryLayout_):_e.setCoordinates([],this.geometryLayout_):_e.setCoordinates(_,this.geometryLayout_):_e=new b(_,this.geometryLayout_),_e}}}this.geometryFunction_=a,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:getDefaultStyleFunction$2(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=always:this.freehandCondition_=e.freehandCondition?e.freehandCondition:shiftKeyOnly,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(InteractionProperty.ACTIVE,this.updateState_)}setTrace(e){let s;e?e===!0?s=always:s=e:s=never,this.traceCondition_=s}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===EventType.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let s=e.type===MapBrowserEventType.POINTERMOVE,a=!0;return!this.freehand_&&this.lastDragTime_&&e.type===MapBrowserEventType.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,s=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===MapBrowserEventType.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),a=!1):this.freehand_&&e.type===MapBrowserEventType.POINTERDOWN?a=!1:s&&this.getPointerCount()<2?(a=e.type===MapBrowserEventType.POINTERMOVE,a&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===MapBrowserEventType.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===MapBrowserEventType.DBLCLICK&&(a=!1),super.handleEvent(e)&&a}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const s=this.getMap(),a=s.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),d=s.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),b=boundingExtent([a,d]),_=this.traceSource_.getFeaturesInExtent(b);if(_.length===0)return;const _e=getTraceTargets(e.coordinate,_);_e.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:_e,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,s){const a=e.startIndex<=e.endIndex,d=e.startIndex<=s;a===d?a&&s>e.endIndex||!a&&s<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,s):(a&&s<e.endIndex||!a&&s>e.endIndex)&&this.removeTracedCoordinates_(s,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,s))}removeTracedCoordinates_(e,s){if(e===s)return;let a=0;if(e<s){const d=Math.ceil(e);let b=Math.floor(s);b===s&&(b-=1),a=b-d+1}else{const d=Math.floor(e);let b=Math.ceil(s);b===s&&(b+=1),a=d-b+1}a>0&&this.removeLastPoints_(a)}addTracedCoordinates_(e,s,a){if(s===a)return;const d=[];if(s<a){const b=Math.ceil(s);let _=Math.floor(a);_===a&&(_-=1);for(let _e=b;_e<=_;++_e)d.push(getCoordinate(e.coordinates,_e))}else{const b=Math.floor(s);let _=Math.ceil(a);_===a&&(_+=1);for(let _e=b;_e>=_;--_e)d.push(getCoordinate(e.coordinates,_e))}d.length&&this.appendCoordinates(d)}updateTrace_(e){const s=this.traceState_;if(!s.active||s.targetIndex===-1&&distance(s.startPx,e.pixel)<this.snapTolerance_)return;const a=getTraceTargetUpdate(e.coordinate,s,this.getMap(),this.snapTolerance_);if(s.targetIndex!==a.index){if(s.targetIndex!==-1){const ot=s.targets[s.targetIndex];this.removeTracedCoordinates_(ot.startIndex,ot.endIndex)}const _e=s.targets[a.index];this.addTracedCoordinates_(_e,_e.startIndex,a.endIndex)}else{const _e=s.targets[s.targetIndex];this.addOrRemoveTracedCoordinates_(_e,a.endIndex)}s.targetIndex=a.index;const d=s.targets[s.targetIndex];d.endIndex=a.endIndex;const b=interpolateCoordinate(d.coordinates,d.endIndex),_=this.getMap().getPixelFromCoordinate(b);e.coordinate=b,e.pixel=[Math.round(_[0]),Math.round(_[1])]}handleUpEvent(e){let s=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const a=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const d=!this.finishCoordinate_;d&&this.startDrawing_(e.coordinate),!d&&this.freehand_?this.finishDrawing():!this.freehand_&&(!d||this.mode_==="Point")&&(this.atFinish_(e.pixel,a)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),s=!1}else this.freehand_&&this.abortDrawing()}return!s&&this.stopClick_&&e.preventDefault(),s}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const s=this.downPx_,a=e.pixel,d=s[0]-a[0],b=s[1]-a[1],_=d*d+b*b;if(this.shouldHandle_=this.freehand_?_>this.squaredClickTolerance_:_<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,s){let a=!1;if(this.sketchFeature_){let d=!1,b=[this.finishCoordinate_];const _=this.mode_;if(_==="Point")a=!0;else if(_==="Circle")a=this.sketchCoords_.length===2;else if(_==="LineString")d=!s&&this.sketchCoords_.length>this.minPoints_;else if(_==="Polygon"){const _e=this.sketchCoords_;d=_e[0].length>this.minPoints_,b=[_e[0][0],_e[0][_e[0].length-2]],s?b=[_e[0][0]]:b=[_e[0][0],_e[0][_e[0].length-2]]}if(d){const _e=this.getMap();for(let ot=0,st=b.length;ot<st;ot++){const ct=b[ot],ft=_e.getPixelFromCoordinate(ct),mt=e[0]-ft[0],bt=e[1]-ft[1],wt=this.freehand_?1:this.snapTolerance_;if(a=Math.sqrt(mt*mt+bt*bt)<=wt,a){this.finishCoordinate_=ct;break}}}}return a}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Feature(new Point$1(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Feature);const s=e.getLinearRing(0);let a=this.sketchLine_.getGeometry();a?(a.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),a.changed()):(a=new LineString(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(a))}startDrawing_(e){const s=this.getMap().getView().getProjection(),a=getStrideForLayout(this.geometryLayout_);for(;e.length<a;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Feature(new LineString(this.sketchLineCoords_)));const d=this.geometryFunction_(this.sketchCoords_,void 0,s);this.sketchFeature_=new Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(d),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const s=this.getMap(),a=this.sketchFeature_.getGeometry(),d=s.getView().getProjection(),b=getStrideForLayout(this.geometryLayout_);let _,_e;for(;e.length<b;)e.push(0);this.mode_==="Point"?_e=this.sketchCoords_:this.mode_==="Polygon"?(_=this.sketchCoords_[0],_e=_[_.length-1],this.atFinish_(s.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(_=this.sketchCoords_,_e=_[_.length-1]),_e[0]=e[0],_e[1]=e[1],this.geometryFunction_(this.sketchCoords_,a,d),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),a.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(a):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const s=this.sketchFeature_.getGeometry(),a=this.getMap().getView().getProjection();let d,b;const _=this.mode_;_==="LineString"||_==="Circle"?(this.finishCoordinate_=e.slice(),b=this.sketchCoords_,b.length>=this.maxPoints_&&(this.freehand_?b.pop():d=!0),b.push(e.slice()),this.geometryFunction_(b,s,a)):_==="Polygon"&&(b=this.sketchCoords_[0],b.length>=this.maxPoints_&&(this.freehand_?b.pop():d=!0),b.push(e.slice()),d&&(this.finishCoordinate_=b[0]),this.geometryFunction_(this.sketchCoords_,s,a)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),d&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const s=this.sketchFeature_.getGeometry(),a=this.getMap().getView().getProjection(),d=this.mode_;for(let b=0;b<e;++b){let _;if(d==="LineString"||d==="Circle"){if(_=this.sketchCoords_,_.splice(-2,1),_.length>=2){this.finishCoordinate_=_[_.length-2].slice();const _e=this.finishCoordinate_.slice();_[_.length-1]=_e,this.createOrUpdateSketchPoint_(_e)}this.geometryFunction_(_,s,a),s.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(s)}else if(d==="Polygon"){_=this.sketchCoords_[0],_.splice(-2,1);const _e=this.sketchLine_.getGeometry();if(_.length>=2){const ot=_[_.length-2].slice();_[_.length-1]=ot,this.createOrUpdateSketchPoint_(ot)}_e.setCoordinates(_),this.geometryFunction_(this.sketchCoords_,s,a)}if(_.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let s=this.sketchCoords_;const a=e.getGeometry(),d=this.getMap().getView().getProjection();this.mode_==="LineString"?(s.pop(),this.geometryFunction_(s,a,d)):this.mode_==="Polygon"&&(s[0].pop(),this.geometryFunction_(s,a,d),s=a.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new MultiPoint([s])):this.type_==="MultiLineString"?e.setGeometry(new MultiLineString([s])):this.type_==="MultiPolygon"&&e.setGeometry(new MultiPolygon([s])),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT,e))}appendCoordinates(e){const s=this.mode_,a=!this.sketchFeature_;a&&this.startDrawing_(e[0]);let d;if(s==="LineString"||s==="Circle")d=this.sketchCoords_;else if(s==="Polygon")d=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;a&&d.shift(),d.pop();for(let _=0;_<e.length;_++)this.addToDrawing_(e[_]);const b=e[e.length-1];this.addToDrawing_(b),this.modifyDrawing_(b)}extend(e){const a=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=a.getCoordinates();const d=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=d.slice(),this.sketchCoords_.push(d.slice()),this.sketchPoint_=new Feature(new Point$1(d)),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const s=this.overlay_.getSource();s.clear(!0),s.addFeatures(e)}updateState_(){const e=this.getMap(),s=this.getActive();(!e||!s)&&this.abortDrawing(),this.overlay_.setMap(s?e:null)}}function getDefaultStyleFunction$2(){const o=createEditingStyle();return function(e,s){return o[e.getGeometry().getType()]}}function getMode(o){switch(o){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+o)}}const CIRCLE_CENTER_INDEX=0,CIRCLE_CIRCUMFERENCE_INDEX=1,tempExtent=[0,0,0,0],tempSegment=[],ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class ModifyEvent extends BaseEvent{constructor(e,s,a){super(e),this.features=s,this.mapBrowserEvent=a}}class Modify extends PointerInteraction{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:primaryAction,this.defaultDeleteCondition_=function(a){return altKeyOnly(a)&&singleClick(a)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new RBush,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:getDefaultStyleFunction$1(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let s;if(e.features?s=e.features:e.source&&(this.source_=e.source,s=new Collection(this.source_.getFeatures()),this.source_.addEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!s)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=s,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(CollectionEventType.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(CollectionEventType.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const s=e.getGeometry();if(s){const d=this.SEGMENT_WRITERS_[s.getType()];d&&d(e,s)}const a=this.getMap();a&&a.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,a),e.addEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,s){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Collection;const a=this.featuresBeingModified_.getArray();for(let d=0,b=s.length;d<b;++d){const _=s[d];for(let _e=0,ot=_.length;_e<ot;++_e){const st=_[_e].feature;st&&!a.includes(st)&&this.featuresBeingModified_.push(st)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const s=this.rBush_,a=[];s.forEach(function(d){e===d.feature&&a.push(d)});for(let d=a.length-1;d>=0;--d){const b=a[d];for(let _=this.dragSegments_.length-1;_>=0;--_)this.dragSegments_[_][0]===b&&this.dragSegments_.splice(_,1);s.remove(b)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const s=e.target;this.removeFeature_(s),this.addFeature_(s)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,s){const a=s.getCoordinates(),d={feature:e,geometry:s,segment:[a,a]};this.rBush_.insert(s.getExtent(),d)}writeMultiPointGeometry_(e,s){const a=s.getCoordinates();for(let d=0,b=a.length;d<b;++d){const _=a[d],_e={feature:e,geometry:s,depth:[d],index:d,segment:[_,_]};this.rBush_.insert(s.getExtent(),_e)}}writeLineStringGeometry_(e,s){const a=s.getCoordinates();for(let d=0,b=a.length-1;d<b;++d){const _=a.slice(d,d+2),_e={feature:e,geometry:s,index:d,segment:_};this.rBush_.insert(boundingExtent(_),_e)}}writeMultiLineStringGeometry_(e,s){const a=s.getCoordinates();for(let d=0,b=a.length;d<b;++d){const _=a[d];for(let _e=0,ot=_.length-1;_e<ot;++_e){const st=_.slice(_e,_e+2),ct={feature:e,geometry:s,depth:[d],index:_e,segment:st};this.rBush_.insert(boundingExtent(st),ct)}}}writePolygonGeometry_(e,s){const a=s.getCoordinates();for(let d=0,b=a.length;d<b;++d){const _=a[d];for(let _e=0,ot=_.length-1;_e<ot;++_e){const st=_.slice(_e,_e+2),ct={feature:e,geometry:s,depth:[d],index:_e,segment:st};this.rBush_.insert(boundingExtent(st),ct)}}}writeMultiPolygonGeometry_(e,s){const a=s.getCoordinates();for(let d=0,b=a.length;d<b;++d){const _=a[d];for(let _e=0,ot=_.length;_e<ot;++_e){const st=_[_e];for(let ct=0,ft=st.length-1;ct<ft;++ct){const mt=st.slice(ct,ct+2),bt={feature:e,geometry:s,depth:[_e,d],index:ct,segment:mt};this.rBush_.insert(boundingExtent(mt),bt)}}}}writeCircleGeometry_(e,s){const a=s.getCenter(),d={feature:e,geometry:s,index:CIRCLE_CENTER_INDEX,segment:[a,a]},b={feature:e,geometry:s,index:CIRCLE_CIRCUMFERENCE_INDEX,segment:[a,a]},_=[d,b];d.featureSegments=_,b.featureSegments=_,this.rBush_.insert(createOrUpdateFromCoordinate(a),d);let _e=s;this.rBush_.insert(_e.getExtent(),b)}writeGeometryCollectionGeometry_(e,s){const a=s.getGeometriesArray();for(let d=0;d<a.length;++d){const b=a[d],_=this.SEGMENT_WRITERS_[b.getType()];_(e,b)}}createOrUpdateVertexFeature_(e,s,a){let d=this.vertexFeature_;return d?d.getGeometry().setCoordinates(e):(d=new Feature(new Point$1(e)),this.vertexFeature_=d,this.overlay_.getSource().addFeature(d)),d.set("features",s),d.set("geometries",a),d}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let s;return!e.map.getView().getInteracting()&&e.type==MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_?s=this.removePoint():s=!0),e.type==MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!s}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const s=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],a=[],d=[];for(let b=0,_=this.dragSegments_.length;b<_;++b){const _e=this.dragSegments_[b],ot=_e[0],st=ot.feature;a.includes(st)||a.push(st);const ct=ot.geometry;d.includes(ct)||d.push(ct);const ft=ot.depth;let mt;const bt=ot.segment,wt=_e[1];for(;s.length<ct.getStride();)s.push(bt[wt][s.length]);switch(ct.getType()){case"Point":mt=s,bt[0]=s,bt[1]=s;break;case"MultiPoint":mt=ct.getCoordinates(),mt[ot.index]=s,bt[0]=s,bt[1]=s;break;case"LineString":mt=ct.getCoordinates(),mt[ot.index+wt]=s,bt[wt]=s;break;case"MultiLineString":mt=ct.getCoordinates(),mt[ft[0]][ot.index+wt]=s,bt[wt]=s;break;case"Polygon":mt=ct.getCoordinates(),mt[ft[0]][ot.index+wt]=s,bt[wt]=s;break;case"MultiPolygon":mt=ct.getCoordinates(),mt[ft[1]][ft[0]][ot.index+wt]=s,bt[wt]=s;break;case"Circle":if(bt[0]=s,bt[1]=s,ot.index===CIRCLE_CENTER_INDEX)this.changingFeature_=!0,ct.setCenter(s),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let Ct=distance(fromUserCoordinate(ct.getCenter()),fromUserCoordinate(s));ct.setRadius(Ct),this.changingFeature_=!1}break}mt&&this.setGeometryCoordinates_(ct,mt)}this.createOrUpdateVertexFeature_(s,a,d)}handleDownEvent(e){if(!this.condition_(e))return!1;const s=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,s),this.dragSegments_.length=0,this.featuresBeingModified_=null;const a=this.vertexFeature_;if(a){e.map.getView().getProjection();const d=[],b=a.getGeometry().getCoordinates(),_=boundingExtent([b]),_e=this.rBush_.getInExtent(_),ot={};_e.sort(compareIndexes);for(let st=0,ct=_e.length;st<ct;++st){const ft=_e[st],mt=ft.segment;let bt=getUid(ft.geometry);const wt=ft.depth;if(wt&&(bt+="-"+wt.join("-")),ot[bt]||(ot[bt]=new Array(2)),ft.geometry.getType()==="Circle"&&ft.index===CIRCLE_CIRCUMFERENCE_INDEX){const Ct=closestOnSegmentData(s,ft);equals(Ct,b)&&!ot[bt][0]&&(this.dragSegments_.push([ft,0]),ot[bt][0]=ft);continue}if(equals(mt[0],b)&&!ot[bt][0]){this.dragSegments_.push([ft,0]),ot[bt][0]=ft;continue}if(equals(mt[1],b)&&!ot[bt][1]){if(ot[bt][0]&&ot[bt][0].index===0){let Ct=ft.geometry.getCoordinates();switch(ft.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":Ct=Ct[wt[1]];case"Polygon":if(ft.index!==Ct[wt[0]].length-2)continue;break}}this.dragSegments_.push([ft,1]),ot[bt][1]=ft;continue}getUid(mt)in this.vertexSegments_&&!ot[bt][0]&&!ot[bt][1]&&this.insertVertexCondition_(e)&&d.push(ft)}d.length&&this.willModifyFeatures_(e,[d]);for(let st=d.length-1;st>=0;--st)this.insertVertex_(d[st],b)}return!!this.vertexFeature_}handleUpEvent(e){for(let s=this.dragSegments_.length-1;s>=0;--s){const a=this.dragSegments_[s][0],d=a.geometry;if(d.getType()==="Circle"){const b=d.getCenter(),_=a.featureSegments[0],_e=a.featureSegments[1];_.segment[0]=b,_.segment[1]=b,_e.segment[0]=b,_e.segment[1]=b,this.rBush_.update(createOrUpdateFromCoordinate(b),_);let ot=d;this.rBush_.update(ot.getExtent(),_e)}else this.rBush_.update(boundingExtent(a.segment),a)}return this.featuresBeingModified_&&(this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,s,a){const d=a||s.getCoordinateFromPixel(e);s.getView().getProjection();const b=function(ot,st){return projectedDistanceToSegmentDataSquared(d,ot)-projectedDistanceToSegmentDataSquared(d,st)};let _,_e;if(this.hitDetection_){const ot=typeof this.hitDetection_=="object"?st=>st===this.hitDetection_:void 0;s.forEachFeatureAtPixel(e,(st,ct,ft)=>{ft&&ft.getType()==="Point"&&(ft=new Point$1(toUserCoordinate(ft.getCoordinates())));const mt=ft||st.getGeometry();if(st instanceof Feature&&this.features_.getArray().includes(st)){_e=mt;const bt=st.getGeometry().getFlatCoordinates().slice(0,2);_=[{feature:st,geometry:_e,segment:[bt,bt]}]}return!0},{layerFilter:ot})}if(!_){const ot=fromUserExtent(createOrUpdateFromCoordinate(d,tempExtent)),st=s.getView().getResolution()*this.pixelTolerance_,ct=toUserExtent(buffer(ot,st,tempExtent));_=this.rBush_.getInExtent(ct)}if(_&&_.length>0){const ot=_.sort(b)[0],st=ot.segment;let ct=closestOnSegmentData(d,ot);const ft=s.getPixelFromCoordinate(ct);let mt=distance(e,ft);if(_e||mt<=this.pixelTolerance_){const bt={};if(bt[getUid(st)]=!0,this.snapToPointer_||(this.delta_[0]=ct[0]-d[0],this.delta_[1]=ct[1]-d[1]),ot.geometry.getType()==="Circle"&&ot.index===CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(ct,[ot.feature],[ot.geometry]);else{const wt=s.getPixelFromCoordinate(st[0]),Ct=s.getPixelFromCoordinate(st[1]),Rt=squaredDistance(ft,wt),It=squaredDistance(ft,Ct);mt=Math.sqrt(Math.min(Rt,It)),this.snappedToVertex_=mt<=this.pixelTolerance_,this.snappedToVertex_&&(ct=Rt>It?st[1]:st[0]),this.createOrUpdateVertexFeature_(ct,[ot.feature],[ot.geometry]);const Pt={};Pt[getUid(ot.geometry)]=!0;for(let Tt=1,Gt=_.length;Tt<Gt;++Tt){const Jt=_[Tt].segment;if(equals(st[0],Jt[0])&&equals(st[1],Jt[1])||equals(st[0],Jt[1])&&equals(st[1],Jt[0])){const qt=getUid(_[Tt].geometry);qt in Pt||(Pt[qt]=!0,bt[getUid(Jt)]=!0)}else break}}this.vertexSegments_=bt;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,s){const a=e.segment,d=e.feature,b=e.geometry,_=e.depth,_e=e.index;let ot;for(;s.length<b.getStride();)s.push(0);switch(b.getType()){case"MultiLineString":ot=b.getCoordinates(),ot[_[0]].splice(_e+1,0,s);break;case"Polygon":ot=b.getCoordinates(),ot[_[0]].splice(_e+1,0,s);break;case"MultiPolygon":ot=b.getCoordinates(),ot[_[1]][_[0]].splice(_e+1,0,s);break;case"LineString":ot=b.getCoordinates(),ot.splice(_e+1,0,s);break;default:return}this.setGeometryCoordinates_(b,ot);const st=this.rBush_;st.remove(e),this.updateSegmentIndices_(b,_e,_,1);const ct={segment:[a[0],s],feature:d,geometry:b,depth:_,index:_e};st.insert(boundingExtent(ct.segment),ct),this.dragSegments_.push([ct,1]);const ft={segment:[s,a[1]],feature:d,geometry:b,depth:_,index:_e+1};st.insert(boundingExtent(ft.segment),ft),this.dragSegments_.push([ft,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=MapBrowserEventType.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const s=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,s}return!1}removeVertex_(){const e=this.dragSegments_,s={};let a=!1,d,b,_,_e,ot,st,ct,ft,mt,bt,wt;for(ot=e.length-1;ot>=0;--ot)_=e[ot],bt=_[0],wt=getUid(bt.feature),bt.depth&&(wt+="-"+bt.depth.join("-")),wt in s||(s[wt]={}),_[1]===0?(s[wt].right=bt,s[wt].index=bt.index):_[1]==1&&(s[wt].left=bt,s[wt].index=bt.index+1);for(wt in s){switch(mt=s[wt].right,ct=s[wt].left,st=s[wt].index,ft=st-1,ct!==void 0?bt=ct:bt=mt,ft<0&&(ft=0),_e=bt.geometry,b=_e.getCoordinates(),d=b,a=!1,_e.getType()){case"MultiLineString":b[bt.depth[0]].length>2&&(b[bt.depth[0]].splice(st,1),a=!0);break;case"LineString":b.length>2&&(b.splice(st,1),a=!0);break;case"MultiPolygon":d=d[bt.depth[1]];case"Polygon":d=d[bt.depth[0]],d.length>4&&(st==d.length-1&&(st=0),d.splice(st,1),a=!0,st===0&&(d.pop(),d.push(d[0]),ft=d.length-1));break}if(a){this.setGeometryCoordinates_(_e,b);const Ct=[];if(ct!==void 0&&(this.rBush_.remove(ct),Ct.push(ct.segment[0])),mt!==void 0&&(this.rBush_.remove(mt),Ct.push(mt.segment[1])),ct!==void 0&&mt!==void 0){const Rt={depth:bt.depth,feature:bt.feature,geometry:bt.geometry,index:ft,segment:Ct};this.rBush_.insert(boundingExtent(Rt.segment),Rt)}this.updateSegmentIndices_(_e,st,bt.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return a}setGeometryCoordinates_(e,s){this.changingFeature_=!0,e.setCoordinates(s),this.changingFeature_=!1}updateSegmentIndices_(e,s,a,d){this.rBush_.forEachInExtent(e.getExtent(),function(b){b.geometry===e&&(a===void 0||b.depth===void 0||equals$2(b.depth,a))&&b.index>s&&(b.index+=d)})}}function compareIndexes(o,e){return o.index-e.index}function projectedDistanceToSegmentDataSquared(o,e,s){const a=e.geometry;if(a.getType()==="Circle"){let b=a;if(e.index===CIRCLE_CIRCUMFERENCE_INDEX){const _=squaredDistance(b.getCenter(),fromUserCoordinate(o)),_e=Math.sqrt(_)-b.getRadius();return _e*_e}}const d=fromUserCoordinate(o);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),squaredDistanceToSegment(d,tempSegment)}function closestOnSegmentData(o,e,s){const a=e.geometry;if(a.getType()==="Circle"&&e.index===CIRCLE_CIRCUMFERENCE_INDEX)return toUserCoordinate(a.getClosestPoint(fromUserCoordinate(o)));const d=fromUserCoordinate(o);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),toUserCoordinate(closestOnSegment(d,tempSegment))}function getDefaultStyleFunction$1(){const o=createEditingStyle();return function(e,s){return o.Point}}const SelectEventType={SELECT:"select"};class SelectEvent extends BaseEvent{constructor(e,s,a,d){super(e),this.selected=s,this.deselected=a,this.mapBrowserEvent=d}}const originalFeatureStyles={};class Select extends Interaction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:singleClick,this.addCondition_=e.addCondition?e.addCondition:never,this.removeCondition_=e.removeCondition?e.removeCondition:never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:shiftKeyOnly,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:getDefaultStyleFunction(),this.features_=e.features||new Collection;let s;if(e.layers)if(typeof e.layers=="function")s=e.layers;else{const a=e.layers;s=function(d){return a.includes(d)}}else s=TRUE;this.layerFilter_=s,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,s){this.featureLayerAssociation_[getUid(e)]=s}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[getUid(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.addEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.removeEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const s=e.element;if(this.style_&&this.applySelectedStyle_(s),!this.getLayer(s)){const a=this.getMap().getAllLayers().find(function(d){if(d instanceof VectorLayer&&d.getSource()&&d.getSource().hasFeature(s))return d});a&&this.addFeatureLayerAssociation_(s,a)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const s=getUid(e);s in originalFeatureStyles||(originalFeatureStyles[s]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const s=this.getMap().getInteractions().getArray();for(let d=s.length-1;d>=0;--d){const b=s[d];if(b!==this&&b instanceof Select&&b.getStyle()&&b.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(b.getStyle());return}}const a=getUid(e);e.setStyle(originalFeatureStyles[a]),delete originalFeatureStyles[a]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[getUid(e)]}handleEvent(e){if(!this.condition_(e))return!0;const s=this.addCondition_(e),a=this.removeCondition_(e),d=this.toggleCondition_(e),b=!s&&!a&&!d,_=e.map,_e=this.getFeatures(),ot=[],st=[];if(b){clear$1(this.featureLayerAssociation_),_.forEachFeatureAtPixel(e.pixel,(ct,ft)=>{if(!(!(ct instanceof Feature)||!this.filter_(ct,ft)))return this.addFeatureLayerAssociation_(ct,ft),st.push(ct),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let ct=_e.getLength()-1;ct>=0;--ct){const ft=_e.item(ct),mt=st.indexOf(ft);mt>-1?st.splice(mt,1):(_e.remove(ft),ot.push(ft))}st.length!==0&&_e.extend(st)}else{_.forEachFeatureAtPixel(e.pixel,(ct,ft)=>{if(!(!(ct instanceof Feature)||!this.filter_(ct,ft)))return(s||d)&&!_e.getArray().includes(ct)?(this.addFeatureLayerAssociation_(ct,ft),st.push(ct)):(a||d)&&_e.getArray().includes(ct)&&(ot.push(ct),this.removeFeatureLayerAssociation_(ct)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let ct=ot.length-1;ct>=0;--ct)_e.remove(ot[ct]);_e.extend(st)}return(st.length>0||ot.length>0)&&this.dispatchEvent(new SelectEvent(SelectEventType.SELECT,st,ot,e)),!0}}function getDefaultStyleFunction(){const o=createEditingStyle();return extend$4(o.Polygon,o.LineString),extend$4(o.GeometryCollection,o.LineString),function(e){return e.getGeometry()?o[e.getGeometry().getType()]:null}}var logger$3=LoggerByDefault$1.getLogger("interactions"),Interactions={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(o,e){logger$3.trace("unset()");var s={};Helper$1.mergeParams(s,this._options),Helper$1.mergeParams(s,e);for(var a=o.getInteractions().getArray(),d=0;d<a.length;d++)if(a[d].getActive()&&(a[d]instanceof Draw||a[d]instanceof Select||a[d]instanceof Modify)){var b=a[d].getProperties(),_=b.name;if(typeof _<"u"&&this._extensions.indexOf(_)>-1){if(s.current&&s.current===_)continue;a[d].setActive(!1);var _e=b.source;if(typeof _e<"u"&&_e instanceof Control){for(var ot in s)if(s.hasOwnProperty(ot)){if(ot==="current")continue;if(typeof _e[ot]=="function"){var st=Array.isArray(s[ot])?s[ot]:[s[ot]];_e[ot].apply(_e,st)}}}}else a[d].setActive(!1)}}},MathUtils={modulo:function(o,e){var s=o%e;return s*e<0?s+e:s},decimalToDMS:function(o,e,s){var a=this.modulo(o+180,360)-180,d=Math.abs(3600*a),b=s||0,_=Math.pow(10,b),_e=Math.floor(d/3600),ot=Math.floor((d-_e*3600)/60),st=d-_e*3600-ot*60;st=Math.ceil(st*_)/_,st>=60&&(st=0,ot+=1),ot>=60&&(ot=0,_e+=1);var ct=e.charAt(a<0?1:0);return{d:_e,m:ot,s:st,direction:ct}},dmsToDecimal(o,e,s,a){var d=o+e/60+s/3600;return(a=="S"||a=="O")&&(d=d*-1),d},coordinateToDecimal(o){var e={};return e.lat=o[1].toFixed(6),e.lng=o[0].toFixed(6),e.unit="",e},coordinateToDMS(o){return{lng:MathUtils.decimalToDMS(o[0],"EO",2),lat:MathUtils.decimalToDMS(o[1],"NS",2),unit:"DMS"}},coordinateToRad(o){var e={},s=.017453292519943295;return e.lng=o[0]*s,e.lng=e.lng.toFixed(8),e.lat=o[1]*s,e.lat=e.lat.toFixed(8),e.unit="rad",e},coordinateToGon(o){var e={},s=1.1111111111111112;return e.lng=o[0]*s,e.lng=e.lng.toFixed(8),e.lat=o[1]*s,e.lat=e.lat.toFixed(8),e.unit="gon",e},coordinateToMeter(o){var e={};return e.x=o[0].toFixed(2),e.y=o[1].toFixed(2),e.unit="m",e},coordinateToKMeter(o){var e={};return e.x=(o[0]/1e3).toFixed(2),e.y=(o[1]/1e3).toFixed(2),e.unit="km",e},toInteger:function(o,e){var s=e||10,a=parseInt(o,s);return!isNaN(a)&&isFinite(a)?a:null},isInteger:function(o){if(isNaN(o))return!1;var e=parseFloat(o);return(e|0)===e},toFloat:function(o){var e=parseFloat(o);return!isNaN(e)&&isFinite(e)?e:null}},SearchEngineUtils={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"category",title:"Type",value:["cimetire","arodrome","rservoir","administratif","construction linaire","construction ponctuelle","construction surfacique","cours d'eau","dtail hydrographique","dtail orographique","quipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par cble","zone d'activit ou d'intrt","zone d'habitation","lieu-dit non habit"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],CadastralParcel:[{name:"departmentcode",title:"Code dpartement (INSEE)",description:"Code INSEE du dpartement (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"oldmunicipalitycode",title:"Commune absorbe",description:"Commune absorbe : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractres (chiffre et/ou lettre)"},{name:"number",title:"Numro",description:"Numro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numro de la feuille cadastrale"}]},zoomToResultsByDefault:function(o){var e=15,s=o.service,a=o.fields,d=o.type,b={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return s==="SuggestedLocation"&&d==="PositionOfInterest"&&(e=b[a.classification]),s==="GeocodedLocation"&&d==="PositionOfInterest"&&(e=b[a.importance]||14),d==="StreetAddress"&&(e=17),d==="CadastralParcel"&&(e=17),e}},GeocodeUtils={getGeocodedLocationFreeform:function(o){var e=o.placeAttributes;if(e.label)return e.label;if(o.type==="PositionOfInterest"){var s=e.toponym;return e.category&&Array.isArray(e.category)&&e.category.length>=2&&e.category[0]==="administratif"?s=s+", "+e.category[1]:e.postcode&&(s=s+", "+e.postcode[0],e.city&&(s=s+" "+e.city[0])),s}else return o.type==="StreetAddress"?(e.housenumber?e.housenumber+" ":"")+e.street+" "+(e.postcode?e.postcode+", ":"")+e.city:o.type==="CadastralParcel"?e.id:"..."},getSuggestedLocationFreeform:function(o){if(o.fullText)return o.fullText;var e=[];return e.push(o.street||""),e.push(o.postalCode||""),e.push(o.commune||""),o.type==="PositionOfInterest"&&(e.push(o.poi||""),e.push(o.kind||"")),e.join(" - ")}};function globals(o){o("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),o("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),o("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),o.WGS84=o["EPSG:4326"],o["EPSG:3785"]=o["EPSG:3857"],o.GOOGLE=o["EPSG:3857"],o["EPSG:900913"]=o["EPSG:3857"],o["EPSG:102113"]=o["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$2={};exports$2.greenwich=0;exports$2.lisbon=-9.131906111111;exports$2.paris=2.337229166667;exports$2.bogota=-74.080916666667;exports$2.madrid=-3.687938888889;exports$2.rome=12.452333333333;exports$2.bern=7.439583333333;exports$2.jakarta=106.807719444444;exports$2.ferro=-17.666666666667;exports$2.brussels=4.367975;exports$2.stockholm=18.058277777778;exports$2.athens=23.7163375;exports$2.oslo=10.722916666667;const units={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var ignoredChar=/[\s_\-\/\(\)]/g;function match(o,e){if(o[e])return o[e];for(var s=Object.keys(o),a=e.toLowerCase().replace(ignoredChar,""),d=-1,b,_;++d<s.length;)if(b=s[d],_=b.toLowerCase().replace(ignoredChar,""),_===a)return o[b]}function projStr(o){var e={},s=o.split("+").map(function(_e){return _e.trim()}).filter(function(_e){return _e}).reduce(function(_e,ot){var st=ot.split("=");return st.push(!0),_e[st[0].toLowerCase()]=st[1],_e},{}),a,d,b,_={proj:"projName",datum:"datumCode",rf:function(_e){e.rf=parseFloat(_e)},lat_0:function(_e){e.lat0=_e*D2R$1},lat_1:function(_e){e.lat1=_e*D2R$1},lat_2:function(_e){e.lat2=_e*D2R$1},lat_ts:function(_e){e.lat_ts=_e*D2R$1},lon_0:function(_e){e.long0=_e*D2R$1},lon_1:function(_e){e.long1=_e*D2R$1},lon_2:function(_e){e.long2=_e*D2R$1},alpha:function(_e){e.alpha=parseFloat(_e)*D2R$1},gamma:function(_e){e.rectified_grid_angle=parseFloat(_e)},lonc:function(_e){e.longc=_e*D2R$1},x_0:function(_e){e.x0=parseFloat(_e)},y_0:function(_e){e.y0=parseFloat(_e)},k_0:function(_e){e.k0=parseFloat(_e)},k:function(_e){e.k0=parseFloat(_e)},a:function(_e){e.a=parseFloat(_e)},b:function(_e){e.b=parseFloat(_e)},r:function(_e){e.a=e.b=parseFloat(_e)},r_a:function(){e.R_A=!0},zone:function(_e){e.zone=parseInt(_e,10)},south:function(){e.utmSouth=!0},towgs84:function(_e){e.datum_params=_e.split(",").map(function(ot){return parseFloat(ot)})},to_meter:function(_e){e.to_meter=parseFloat(_e)},units:function(_e){e.units=_e;var ot=match(units,_e);ot&&(e.to_meter=ot.to_meter)},from_greenwich:function(_e){e.from_greenwich=_e*D2R$1},pm:function(_e){var ot=match(exports$2,_e);e.from_greenwich=(ot||parseFloat(_e))*D2R$1},nadgrids:function(_e){_e==="@null"?e.datumCode="none":e.nadgrids=_e},axis:function(_e){var ot="ewnsud";_e.length===3&&ot.indexOf(_e.substr(0,1))!==-1&&ot.indexOf(_e.substr(1,1))!==-1&&ot.indexOf(_e.substr(2,1))!==-1&&(e.axis=_e)},approx:function(){e.approx=!0}};for(a in s)d=s[a],a in _?(b=_[a],typeof b=="function"?b(d):e[b]=d):e[a]=d;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace$1=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(o){if(typeof o!="string")throw new Error("not a string");this.text=o.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){var o=this.text[this.place++];if(this.state!==QUOTED)for(;whitespace$1.test(o);){if(this.place>=this.text.length)return;o=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(o);case KEYWORD:return this.keyword(o);case QUOTED:return this.quoted(o);case AFTERQUOTE:return this.afterquote(o);case NUMBER:return this.number(o);case ENDED:return}};Parser.prototype.afterquote=function(o){if(o==='"'){this.word+='"',this.state=QUOTED;return}if(endThings.test(o)){this.word=this.word.trim(),this.afterItem(o);return}throw new Error(`havn't handled "`+o+'" in afterquote yet, index '+this.place)};Parser.prototype.afterItem=function(o){if(o===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(o==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=NEUTRAL,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ENDED);return}};Parser.prototype.number=function(o){if(digets.test(o)){this.word+=o;return}if(endThings.test(o)){this.word=parseFloat(this.word),this.afterItem(o);return}throw new Error(`havn't handled "`+o+'" in number yet, index '+this.place)};Parser.prototype.quoted=function(o){if(o==='"'){this.state=AFTERQUOTE;return}this.word+=o};Parser.prototype.keyword=function(o){if(keyword.test(o)){this.word+=o;return}if(o==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=NEUTRAL;return}if(endThings.test(o)){this.afterItem(o);return}throw new Error(`havn't handled "`+o+'" in keyword yet, index '+this.place)};Parser.prototype.neutral=function(o){if(latin.test(o)){this.word=o,this.state=KEYWORD;return}if(o==='"'){this.word="",this.state=QUOTED;return}if(digets.test(o)){this.word=o,this.state=NUMBER;return}if(endThings.test(o)){this.afterItem(o);return}throw new Error(`havn't handled "`+o+'" in neutral yet, index '+this.place)};Parser.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function parseString(o){var e=new Parser(o);return e.output()}function mapit(o,e,s){Array.isArray(e)&&(s.unshift(e),e=null);var a=e?{}:o,d=s.reduce(function(b,_){return sExpr(_,b),b},a);e&&(o[e]=d)}function sExpr(o,e){if(!Array.isArray(o)){e[o]=!0;return}var s=o.shift();if(s==="PARAMETER"&&(s=o.shift()),o.length===1){if(Array.isArray(o[0])){e[s]={},sExpr(o[0],e[s]);return}e[s]=o[0];return}if(!o.length){e[s]=!0;return}if(s==="TOWGS84"){e[s]=o;return}if(s==="AXIS"){s in e||(e[s]=[]),e[s].push(o);return}Array.isArray(s)||(e[s]={});var a;switch(s){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[s]={name:o[0].toLowerCase(),convert:o[1]},o.length===3&&sExpr(o[2],e[s]);return;case"SPHEROID":case"ELLIPSOID":e[s]={name:o[0],a:o[1],rf:o[2]},o.length===4&&sExpr(o[3],e[s]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":o[0]=["name",o[0]],mapit(e,s,o);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":o[0]=["name",o[0]],mapit(e,s,o),e[s].type=s;return;default:for(a=-1;++a<o.length;)if(!Array.isArray(o[a]))return sExpr(o,e[s]);return mapit(e,s,o)}}var D2R=.017453292519943295,knownTypes=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function rename(o,e){var s=e[0],a=e[1];!(s in o)&&a in o&&(o[s]=o[a],e.length===3&&(o[s]=e[2](o[s])))}function d2r(o){return o*D2R}function cleanWKT(o){for(var e=Object.keys(o),s=0,a=e.length;s<a;++s){var d=e[s];knownTypes.indexOf(d)!==-1&&setPropertiesFromWkt(o[d]),typeof o[d]=="object"&&cleanWKT(o[d])}}function setPropertiesFromWkt(o){if(o.AUTHORITY){var e=Object.keys(o.AUTHORITY)[0];e&&e in o.AUTHORITY&&(o.title=e+":"+o.AUTHORITY[e])}if(o.type==="GEOGCS"?o.projName="longlat":o.type==="LOCAL_CS"?(o.projName="identity",o.local=!0):typeof o.PROJECTION=="object"?o.projName=Object.keys(o.PROJECTION)[0]:o.projName=o.PROJECTION,o.AXIS){for(var s="",a=0,d=o.AXIS.length;a<d;++a){var b=[o.AXIS[a][0].toLowerCase(),o.AXIS[a][1].toLowerCase()];b[0].indexOf("north")!==-1||(b[0]==="y"||b[0]==="lat")&&b[1]==="north"?s+="n":b[0].indexOf("south")!==-1||(b[0]==="y"||b[0]==="lat")&&b[1]==="south"?s+="s":b[0].indexOf("east")!==-1||(b[0]==="x"||b[0]==="lon")&&b[1]==="east"?s+="e":(b[0].indexOf("west")!==-1||(b[0]==="x"||b[0]==="lon")&&b[1]==="west")&&(s+="w")}s.length===2&&(s+="u"),s.length===3&&(o.axis=s)}o.UNIT&&(o.units=o.UNIT.name.toLowerCase(),o.units==="metre"&&(o.units="meter"),o.UNIT.convert&&(o.type==="GEOGCS"?o.DATUM&&o.DATUM.SPHEROID&&(o.to_meter=o.UNIT.convert*o.DATUM.SPHEROID.a):o.to_meter=o.UNIT.convert));var _=o.GEOGCS;o.type==="GEOGCS"&&(_=o),_&&(_.DATUM?o.datumCode=_.DATUM.name.toLowerCase():o.datumCode=_.name.toLowerCase(),o.datumCode.slice(0,2)==="d_"&&(o.datumCode=o.datumCode.slice(2)),o.datumCode==="new_zealand_1949"&&(o.datumCode="nzgd49"),(o.datumCode==="wgs_1984"||o.datumCode==="world_geodetic_system_1984")&&(o.PROJECTION==="Mercator_Auxiliary_Sphere"&&(o.sphere=!0),o.datumCode="wgs84"),o.datumCode==="belge_1972"&&(o.datumCode="rnb72"),_.DATUM&&_.DATUM.SPHEROID&&(o.ellps=_.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),o.ellps.toLowerCase().slice(0,13)==="international"&&(o.ellps="intl"),o.a=_.DATUM.SPHEROID.a,o.rf=parseFloat(_.DATUM.SPHEROID.rf,10)),_.DATUM&&_.DATUM.TOWGS84&&(o.datum_params=_.DATUM.TOWGS84),~o.datumCode.indexOf("osgb_1936")&&(o.datumCode="osgb36"),~o.datumCode.indexOf("osni_1952")&&(o.datumCode="osni52"),(~o.datumCode.indexOf("tm65")||~o.datumCode.indexOf("geodetic_datum_of_1965"))&&(o.datumCode="ire65"),o.datumCode==="ch1903+"&&(o.datumCode="ch1903"),~o.datumCode.indexOf("israel")&&(o.datumCode="isr93")),o.b&&!isFinite(o.b)&&(o.b=o.a);function _e(ct){var ft=o.to_meter||1;return ct*ft}var ot=function(ct){return rename(o,ct)},st=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",_e],["y0","false_northing",_e],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth","Azimuth"],["alpha","azimuth",d2r],["srsCode","name"]];st.forEach(ot),!o.long0&&o.longc&&(o.projName==="Albers_Conic_Equal_Area"||o.projName==="Lambert_Azimuthal_Equal_Area")&&(o.long0=o.longc),!o.lat_ts&&o.lat1&&(o.projName==="Stereographic_South_Pole"||o.projName==="Polar Stereographic (variant B)")?(o.lat0=d2r(o.lat1>0?90:-90),o.lat_ts=o.lat1):!o.lat_ts&&o.lat0&&o.projName==="Polar_Stereographic"&&(o.lat_ts=o.lat0,o.lat0=d2r(o.lat0>0?90:-90))}function wkt(o){var e=parseString(o),s=e[0],a={};return sExpr(e,a),cleanWKT(a),a[s]}function defs(o){var e=this;if(arguments.length===2){var s=arguments[1];typeof s=="string"?s.charAt(0)==="+"?defs[o]=projStr(arguments[1]):defs[o]=wkt(arguments[1]):defs[o]=s}else if(arguments.length===1){if(Array.isArray(o))return o.map(function(a){Array.isArray(a)?defs.apply(e,a):defs(a)});if(typeof o=="string"){if(o in defs)return defs[o]}else"EPSG"in o?defs["EPSG:"+o.EPSG]=o:"ESRI"in o?defs["ESRI:"+o.ESRI]=o:"IAU2000"in o?defs["IAU2000:"+o.IAU2000]=o:console.log(o);return}}globals(defs);function testObj(o){return typeof o=="string"}function testDef(o){return o in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function testWKT(o){return codeWords.some(function(e){return o.indexOf(e)>-1})}var codes=["3857","900913","3785","102113"];function checkMercator(o){var e=match(o,"authority");if(e){var s=match(e,"epsg");return s&&codes.indexOf(s)>-1}}function checkProjStr(o){var e=match(o,"extension");if(e)return match(e,"proj4")}function testProj(o){return o[0]==="+"}function parse$1(o){if(testObj(o)){if(testDef(o))return defs[o];if(testWKT(o)){var e=wkt(o);if(checkMercator(e))return defs["EPSG:3857"];var s=checkProjStr(e);return s?projStr(s):e}if(testProj(o))return projStr(o)}else return o}function extend(o,e){o=o||{};var s,a;if(!e)return o;for(a in e)s=e[a],s!==void 0&&(o[a]=s);return o}function msfnz(o,e,s){var a=o*e;return s/Math.sqrt(1-a*a)}function sign(o){return o<0?-1:1}function adjust_lon(o){return Math.abs(o)<=SPI?o:o-sign(o)*TWO_PI}function tsfnz(o,e,s){var a=o*s,d=.5*o;return a=Math.pow((1-a)/(1+a),d),Math.tan(.5*(HALF_PI-e))/a}function phi2z(o,e){for(var s=.5*o,a,d,b=HALF_PI-2*Math.atan(e),_=0;_<=15;_++)if(a=o*Math.sin(b),d=HALF_PI-2*Math.atan(e*Math.pow((1-a)/(1+a),s))-b,b+=d,Math.abs(d)<=1e-10)return b;return-9999}function init$A(){var o=this.b/this.a;this.es=1-o*o,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function forward$v(o){var e=o.x,s=o.y;if(s*R2D>90&&s*R2D<-90&&e*R2D>180&&e*R2D<-180)return null;var a,d;if(Math.abs(Math.abs(s)-HALF_PI)<=EPSLN)return null;if(this.sphere)a=this.x0+this.a*this.k0*adjust_lon(e-this.long0),d=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*s));else{var b=Math.sin(s),_=tsfnz(this.e,s,b);a=this.x0+this.a*this.k0*adjust_lon(e-this.long0),d=this.y0-this.a*this.k0*Math.log(_)}return o.x=a,o.y=d,o}function inverse$v(o){var e=o.x-this.x0,s=o.y-this.y0,a,d;if(this.sphere)d=HALF_PI-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var b=Math.exp(-s/(this.a*this.k0));if(d=phi2z(this.e,b),d===-9999)return null}return a=adjust_lon(this.long0+e/(this.a*this.k0)),o.x=a,o.y=d,o}var names$y=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const merc={init:init$A,forward:forward$v,inverse:inverse$v,names:names$y};function init$z(){}function identity(o){return o}var names$x=["longlat","identity"];const longlat={init:init$z,forward:identity,inverse:identity,names:names$x};var projs=[merc,longlat],names$w={},projStore=[];function add(o,e){var s=projStore.length;return o.names?(projStore[s]=o,o.names.forEach(function(a){names$w[a.toLowerCase()]=s}),this):(console.log(e),!0)}function get(o){if(!o)return!1;var e=o.toLowerCase();if(typeof names$w[e]<"u"&&projStore[names$w[e]])return projStore[names$w[e]]}function start(){projs.forEach(add)}const projections={start,add,get};var exports$1={};exports$1.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};exports$1.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports$1.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports$1.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};exports$1.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};exports$1.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports$1.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports$1.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};exports$1.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports$1.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports$1.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};exports$1.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};exports$1.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports$1.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};exports$1.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports$1.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};exports$1.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports$1.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports$1.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports$1.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};exports$1.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};exports$1.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};exports$1.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};exports$1.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};exports$1.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports$1.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports$1.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};exports$1.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};exports$1.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};exports$1.hough={a:6378270,rf:297,ellipseName:"Hough"};exports$1.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};exports$1.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};exports$1.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};exports$1.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};exports$1.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};exports$1.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};exports$1.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};exports$1.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};exports$1.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};exports$1.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};exports$1.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};exports$1.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$1.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$1.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(o,e,s,a){var d=o*o,b=e*e,_=(d-b)/d,_e=0;a?(o*=1-_*(SIXTH+_*(RA4+_*RA6)),d=o*o,_=0):_e=Math.sqrt(_);var ot=(d-b)/b;return{es:_,e:_e,ep2:ot}}function sphere(o,e,s,a,d){if(!o){var b=match(exports$1,a);b||(b=WGS84),o=b.a,e=b.b,s=b.rf}return s&&!e&&(e=(1-1/s)*o),(s===0||Math.abs(o-e)<EPSLN)&&(d=!0,e=o),{a:o,b:e,rf:s,sphere:d}}var exports={};exports.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};exports.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};exports.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};exports.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};exports.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};exports.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};exports.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};exports.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};exports.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};exports.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};exports.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};exports.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};exports.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};exports.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};exports.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};exports.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};exports.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};exports.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function datum(o,e,s,a,d,b,_){var _e={};return o===void 0||o==="none"?_e.datum_type=PJD_NODATUM:_e.datum_type=PJD_WGS84,e&&(_e.datum_params=e.map(parseFloat),(_e.datum_params[0]!==0||_e.datum_params[1]!==0||_e.datum_params[2]!==0)&&(_e.datum_type=PJD_3PARAM),_e.datum_params.length>3&&(_e.datum_params[3]!==0||_e.datum_params[4]!==0||_e.datum_params[5]!==0||_e.datum_params[6]!==0)&&(_e.datum_type=PJD_7PARAM,_e.datum_params[3]*=SEC_TO_RAD,_e.datum_params[4]*=SEC_TO_RAD,_e.datum_params[5]*=SEC_TO_RAD,_e.datum_params[6]=_e.datum_params[6]/1e6+1)),_&&(_e.datum_type=PJD_GRIDSHIFT,_e.grids=_),_e.a=s,_e.b=a,_e.es=d,_e.ep2=b,_e}var loadedNadgrids={};function nadgrid(o,e){var s=new DataView(e),a=detectLittleEndian(s),d=readHeader(s,a),b=readSubgrids(s,d,a),_={header:d,subgrids:b};return loadedNadgrids[o]=_,_}function getNadgrids(o){if(o===void 0)return null;var e=o.split(",");return e.map(parseNadgridString)}function parseNadgridString(o){if(o.length===0)return null;var e=o[0]==="@";return e&&(o=o.slice(1)),o==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:o,mandatory:!e,grid:loadedNadgrids[o]||null,isNull:!1}}function secondsToRadians(o){return o/3600*Math.PI/180}function detectLittleEndian(o){var e=o.getInt32(8,!1);return e===11?!1:(e=o.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(o,e){return{nFields:o.getInt32(8,e),nSubgridFields:o.getInt32(24,e),nSubgrids:o.getInt32(40,e),shiftType:decodeString(o,56,64).trim(),fromSemiMajorAxis:o.getFloat64(120,e),fromSemiMinorAxis:o.getFloat64(136,e),toSemiMajorAxis:o.getFloat64(152,e),toSemiMinorAxis:o.getFloat64(168,e)}}function decodeString(o,e,s){return String.fromCharCode.apply(null,new Uint8Array(o.buffer.slice(e,s)))}function readSubgrids(o,e,s){for(var a=176,d=[],b=0;b<e.nSubgrids;b++){var _=readGridHeader(o,a,s),_e=readGridNodes(o,a,_,s),ot=Math.round(1+(_.upperLongitude-_.lowerLongitude)/_.longitudeInterval),st=Math.round(1+(_.upperLatitude-_.lowerLatitude)/_.latitudeInterval);d.push({ll:[secondsToRadians(_.lowerLongitude),secondsToRadians(_.lowerLatitude)],del:[secondsToRadians(_.longitudeInterval),secondsToRadians(_.latitudeInterval)],lim:[ot,st],count:_.gridNodeCount,cvs:mapNodes(_e)}),a+=176+_.gridNodeCount*16}return d}function mapNodes(o){return o.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(o,e,s){return{name:decodeString(o,e+8,e+16).trim(),parent:decodeString(o,e+24,e+24+8).trim(),lowerLatitude:o.getFloat64(e+72,s),upperLatitude:o.getFloat64(e+88,s),lowerLongitude:o.getFloat64(e+104,s),upperLongitude:o.getFloat64(e+120,s),latitudeInterval:o.getFloat64(e+136,s),longitudeInterval:o.getFloat64(e+152,s),gridNodeCount:o.getInt32(e+168,s)}}function readGridNodes(o,e,s,a){for(var d=e+176,b=16,_=[],_e=0;_e<s.gridNodeCount;_e++){var ot={latitudeShift:o.getFloat32(d+_e*b,a),longitudeShift:o.getFloat32(d+_e*b+4,a),latitudeAccuracy:o.getFloat32(d+_e*b+8,a),longitudeAccuracy:o.getFloat32(d+_e*b+12,a)};_.push(ot)}return _}function Projection(o,e){if(!(this instanceof Projection))return new Projection(o);e=e||function(st){if(st)throw st};var s=parse$1(o);if(typeof s!="object"){e("Could not parse to valid json: "+o);return}var a=Projection.projections.get(s.projName);if(!a){e("Could not get projection name from: "+o);return}if(s.datumCode&&s.datumCode!=="none"){var d=match(exports,s.datumCode);d&&(s.datum_params=s.datum_params||(d.towgs84?d.towgs84.split(","):null),s.ellps=d.ellipse,s.datumName=d.datumName?d.datumName:s.datumCode)}s.k0=s.k0||1,s.axis=s.axis||"enu",s.ellps=s.ellps||"wgs84",s.lat1=s.lat1||s.lat0;var b=sphere(s.a,s.b,s.rf,s.ellps,s.sphere),_=eccentricity(b.a,b.b,b.rf,s.R_A),_e=getNadgrids(s.nadgrids),ot=s.datum||datum(s.datumCode,s.datum_params,b.a,b.b,_.es,_.ep2,_e);extend(this,s),extend(this,a),this.a=b.a,this.b=b.b,this.rf=b.rf,this.sphere=b.sphere,this.es=_.es,this.e=_.e,this.ep2=_.ep2,this.datum=ot,this.init(),e(null,this)}Projection.projections=projections;Projection.projections.start();function compareDatums(o,e){return o.datum_type!==e.datum_type||o.a!==e.a||Math.abs(o.es-e.es)>5e-11?!1:o.datum_type===PJD_3PARAM?o.datum_params[0]===e.datum_params[0]&&o.datum_params[1]===e.datum_params[1]&&o.datum_params[2]===e.datum_params[2]:o.datum_type===PJD_7PARAM?o.datum_params[0]===e.datum_params[0]&&o.datum_params[1]===e.datum_params[1]&&o.datum_params[2]===e.datum_params[2]&&o.datum_params[3]===e.datum_params[3]&&o.datum_params[4]===e.datum_params[4]&&o.datum_params[5]===e.datum_params[5]&&o.datum_params[6]===e.datum_params[6]:!0}function geodeticToGeocentric(o,e,s){var a=o.x,d=o.y,b=o.z?o.z:0,_,_e,ot,st;if(d<-HALF_PI&&d>-1.001*HALF_PI)d=-HALF_PI;else if(d>HALF_PI&&d<1.001*HALF_PI)d=HALF_PI;else{if(d<-HALF_PI)return{x:-1/0,y:-1/0,z:o.z};if(d>HALF_PI)return{x:1/0,y:1/0,z:o.z}}return a>Math.PI&&(a-=2*Math.PI),_e=Math.sin(d),st=Math.cos(d),ot=_e*_e,_=s/Math.sqrt(1-e*ot),{x:(_+b)*st*Math.cos(a),y:(_+b)*st*Math.sin(a),z:(_*(1-e)+b)*_e}}function geocentricToGeodetic(o,e,s,a){var d=1e-12,b=d*d,_=30,_e,ot,st,ct,ft,mt,bt,wt,Ct,Rt,It,Pt,Tt,Gt=o.x,Jt=o.y,qt=o.z?o.z:0,Nt,Qt,fn;if(_e=Math.sqrt(Gt*Gt+Jt*Jt),ot=Math.sqrt(Gt*Gt+Jt*Jt+qt*qt),_e/s<d){if(Nt=0,ot/s<d)return Qt=HALF_PI,fn=-a,{x:o.x,y:o.y,z:o.z}}else Nt=Math.atan2(Jt,Gt);st=qt/ot,ct=_e/ot,ft=1/Math.sqrt(1-e*(2-e)*ct*ct),wt=ct*(1-e)*ft,Ct=st*ft,Tt=0;do Tt++,bt=s/Math.sqrt(1-e*Ct*Ct),fn=_e*wt+qt*Ct-bt*(1-e*Ct*Ct),mt=e*bt/(bt+fn),ft=1/Math.sqrt(1-mt*(2-mt)*ct*ct),Rt=ct*(1-mt)*ft,It=st*ft,Pt=It*wt-Rt*Ct,wt=Rt,Ct=It;while(Pt*Pt>b&&Tt<_);return Qt=Math.atan(It/Math.abs(Rt)),{x:Nt,y:Qt,z:fn}}function geocentricToWgs84(o,e,s){if(e===PJD_3PARAM)return{x:o.x+s[0],y:o.y+s[1],z:o.z+s[2]};if(e===PJD_7PARAM){var a=s[0],d=s[1],b=s[2],_=s[3],_e=s[4],ot=s[5],st=s[6];return{x:st*(o.x-ot*o.y+_e*o.z)+a,y:st*(ot*o.x+o.y-_*o.z)+d,z:st*(-_e*o.x+_*o.y+o.z)+b}}}function geocentricFromWgs84(o,e,s){if(e===PJD_3PARAM)return{x:o.x-s[0],y:o.y-s[1],z:o.z-s[2]};if(e===PJD_7PARAM){var a=s[0],d=s[1],b=s[2],_=s[3],_e=s[4],ot=s[5],st=s[6],ct=(o.x-a)/st,ft=(o.y-d)/st,mt=(o.z-b)/st;return{x:ct+ot*ft-_e*mt,y:-ot*ct+ft+_*mt,z:_e*ct-_*ft+mt}}}function checkParams(o){return o===PJD_3PARAM||o===PJD_7PARAM}function datum_transform(o,e,s){if(compareDatums(o,e)||o.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return s;var a=o.a,d=o.es;if(o.datum_type===PJD_GRIDSHIFT){var b=applyGridShift(o,!1,s);if(b!==0)return;a=SRS_WGS84_SEMIMAJOR,d=SRS_WGS84_ESQUARED}var _=e.a,_e=e.b,ot=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(_=SRS_WGS84_SEMIMAJOR,_e=SRS_WGS84_SEMIMINOR,ot=SRS_WGS84_ESQUARED),d===ot&&a===_&&!checkParams(o.datum_type)&&!checkParams(e.datum_type))return s;if(s=geodeticToGeocentric(s,d,a),checkParams(o.datum_type)&&(s=geocentricToWgs84(s,o.datum_type,o.datum_params)),checkParams(e.datum_type)&&(s=geocentricFromWgs84(s,e.datum_type,e.datum_params)),s=geocentricToGeodetic(s,ot,_,_e),e.datum_type===PJD_GRIDSHIFT){var st=applyGridShift(e,!0,s);if(st!==0)return}return s}function applyGridShift(o,e,s){if(o.grids===null||o.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-s.x,y:s.y},d={x:Number.NaN,y:Number.NaN},b=[];e:for(var _=0;_<o.grids.length;_++){var _e=o.grids[_];if(b.push(_e.name),_e.isNull){d=a;break}if(_e.mandatory,_e.grid===null){if(_e.mandatory)return console.log("Unable to find mandatory grid '"+_e.name+"'"),-1;continue}for(var ot=_e.grid.subgrids,st=0,ct=ot.length;st<ct;st++){var ft=ot[st],mt=(Math.abs(ft.del[1])+Math.abs(ft.del[0]))/1e4,bt=ft.ll[0]-mt,wt=ft.ll[1]-mt,Ct=ft.ll[0]+(ft.lim[0]-1)*ft.del[0]+mt,Rt=ft.ll[1]+(ft.lim[1]-1)*ft.del[1]+mt;if(!(wt>a.y||bt>a.x||Rt<a.y||Ct<a.x)&&(d=applySubgridShift(a,e,ft),!isNaN(d.x)))break e}}return isNaN(d.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*R2D+" "+a.y*R2D+" tried: '"+b+"'"),-1):(s.x=-d.x,s.y=d.y,0)}function applySubgridShift(o,e,s){var a={x:Number.NaN,y:Number.NaN};if(isNaN(o.x))return a;var d={x:o.x,y:o.y};d.x-=s.ll[0],d.y-=s.ll[1],d.x=adjust_lon(d.x-Math.PI)+Math.PI;var b=nadInterpolate(d,s);if(e){if(isNaN(b.x))return a;b.x=d.x-b.x,b.y=d.y-b.y;var _=9,_e=1e-12,ot,st;do{if(st=nadInterpolate(b,s),isNaN(st.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}ot={x:d.x-(st.x+b.x),y:d.y-(st.y+b.y)},b.x+=ot.x,b.y+=ot.y}while(_--&&Math.abs(ot.x)>_e&&Math.abs(ot.y)>_e);if(_<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=adjust_lon(b.x+s.ll[0]),a.y=b.y+s.ll[1]}else isNaN(b.x)||(a.x=o.x+b.x,a.y=o.y+b.y);return a}function nadInterpolate(o,e){var s={x:o.x/e.del[0],y:o.y/e.del[1]},a={x:Math.floor(s.x),y:Math.floor(s.y)},d={x:s.x-1*a.x,y:s.y-1*a.y},b={x:Number.NaN,y:Number.NaN},_;if(a.x<0||a.x>=e.lim[0]||a.y<0||a.y>=e.lim[1])return b;_=a.y*e.lim[0]+a.x;var _e={x:e.cvs[_][0],y:e.cvs[_][1]};_++;var ot={x:e.cvs[_][0],y:e.cvs[_][1]};_+=e.lim[0];var st={x:e.cvs[_][0],y:e.cvs[_][1]};_--;var ct={x:e.cvs[_][0],y:e.cvs[_][1]},ft=d.x*d.y,mt=d.x*(1-d.y),bt=(1-d.x)*(1-d.y),wt=(1-d.x)*d.y;return b.x=bt*_e.x+mt*ot.x+wt*ct.x+ft*st.x,b.y=bt*_e.y+mt*ot.y+wt*ct.y+ft*st.y,b}function adjust_axis(o,e,s){var a=s.x,d=s.y,b=s.z||0,_,_e,ot,st={};for(ot=0;ot<3;ot++)if(!(e&&ot===2&&s.z===void 0))switch(ot===0?(_=a,"ew".indexOf(o.axis[ot])!==-1?_e="x":_e="y"):ot===1?(_=d,"ns".indexOf(o.axis[ot])!==-1?_e="y":_e="x"):(_=b,_e="z"),o.axis[ot]){case"e":st[_e]=_;break;case"w":st[_e]=-_;break;case"n":st[_e]=_;break;case"s":st[_e]=-_;break;case"u":s[_e]!==void 0&&(st.z=_);break;case"d":s[_e]!==void 0&&(st.z=-_);break;default:return null}return st}function common(o){var e={x:o[0],y:o[1]};return o.length>2&&(e.z=o[2]),o.length>3&&(e.m=o[3]),e}function checkSanity(o){checkCoord(o.x),checkCoord(o.y)}function checkCoord(o){if(typeof Number.isFinite=="function"){if(Number.isFinite(o))return;throw new TypeError("coordinates must be finite numbers")}if(typeof o!="number"||o!==o||!isFinite(o))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(o,e){return(o.datum.datum_type===PJD_3PARAM||o.datum.datum_type===PJD_7PARAM||o.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum.datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&o.datumCode!=="WGS84"}function transform(o,e,s,a){var d;Array.isArray(s)?s=common(s):s={x:s.x,y:s.y,z:s.z,m:s.m};var b=s.z!==void 0;if(checkSanity(s),o.datum&&e.datum&&checkNotWGS(o,e)&&(d=new Projection("WGS84"),s=transform(o,d,s,a),o=d),a&&o.axis!=="enu"&&(s=adjust_axis(o,!1,s)),o.projName==="longlat")s={x:s.x*D2R$1,y:s.y*D2R$1,z:s.z||0};else if(o.to_meter&&(s={x:s.x*o.to_meter,y:s.y*o.to_meter,z:s.z||0}),s=o.inverse(s),!s)return;if(o.from_greenwich&&(s.x+=o.from_greenwich),s=datum_transform(o.datum,e.datum,s),!!s)return e.from_greenwich&&(s={x:s.x-e.from_greenwich,y:s.y,z:s.z||0}),e.projName==="longlat"?s={x:s.x*R2D,y:s.y*R2D,z:s.z||0}:(s=e.forward(s),e.to_meter&&(s={x:s.x/e.to_meter,y:s.y/e.to_meter,z:s.z||0})),a&&e.axis!=="enu"?adjust_axis(e,!0,s):(s&&!b&&delete s.z,s)}var wgs84=Projection("WGS84");function transformer(o,e,s,a){var d,b,_;return Array.isArray(s)?(d=transform(o,e,s,a)||{x:NaN,y:NaN},s.length>2?typeof o.name<"u"&&o.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof d.z=="number"?[d.x,d.y,d.z].concat(s.slice(3)):[d.x,d.y,s[2]].concat(s.slice(3)):[d.x,d.y].concat(s.slice(2)):[d.x,d.y]):(b=transform(o,e,s,a),_=Object.keys(s),_.length===2||_.forEach(function(_e){if(typeof o.name<"u"&&o.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(_e==="x"||_e==="y"||_e==="z")return}else if(_e==="x"||_e==="y")return;b[_e]=s[_e]}),b)}function checkProj(o){return o instanceof Projection?o:o.oProj?o.oProj:Projection(o)}function proj4(o,e,s){o=checkProj(o);var a=!1,d;return typeof e>"u"?(e=o,o=wgs84,a=!0):(typeof e.x<"u"||Array.isArray(e))&&(s=e,e=o,o=wgs84,a=!0),e=checkProj(e),s?transformer(o,e,s):(d={forward:function(b,_){return transformer(o,e,b,_)},inverse:function(b,_){return transformer(e,o,b,_)}},a&&(d.oProj=e),d)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A=65,I=73,O=79,V=86,Z=90;const mgrs={forward:forward$u,inverse:inverse$u,toPoint};function forward$u(o,e){return e=e||5,encode(LLtoUTM({lat:o[1],lon:o[0]}),e)}function inverse$u(o){var e=UTMtoLL(decode(o.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(o){var e=UTMtoLL(decode(o.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function degToRad(o){return o*(Math.PI/180)}function radToDeg(o){return 180*(o/Math.PI)}function LLtoUTM(o){var e=o.lat,s=o.lon,a=6378137,d=.00669438,b=.9996,_,_e,ot,st,ct,ft,mt,bt=degToRad(e),wt=degToRad(s),Ct,Rt;Rt=Math.floor((s+180)/6)+1,s===180&&(Rt=60),e>=56&&e<64&&s>=3&&s<12&&(Rt=32),e>=72&&e<84&&(s>=0&&s<9?Rt=31:s>=9&&s<21?Rt=33:s>=21&&s<33?Rt=35:s>=33&&s<42&&(Rt=37)),_=(Rt-1)*6-180+3,Ct=degToRad(_),_e=d/(1-d),ot=a/Math.sqrt(1-d*Math.sin(bt)*Math.sin(bt)),st=Math.tan(bt)*Math.tan(bt),ct=_e*Math.cos(bt)*Math.cos(bt),ft=Math.cos(bt)*(wt-Ct),mt=a*((1-d/4-3*d*d/64-5*d*d*d/256)*bt-(3*d/8+3*d*d/32+45*d*d*d/1024)*Math.sin(2*bt)+(15*d*d/256+45*d*d*d/1024)*Math.sin(4*bt)-35*d*d*d/3072*Math.sin(6*bt));var It=b*ot*(ft+(1-st+ct)*ft*ft*ft/6+(5-18*st+st*st+72*ct-58*_e)*ft*ft*ft*ft*ft/120)+5e5,Pt=b*(mt+ot*Math.tan(bt)*(ft*ft/2+(5-st+9*ct+4*ct*ct)*ft*ft*ft*ft/24+(61-58*st+st*st+600*ct-330*_e)*ft*ft*ft*ft*ft*ft/720));return e<0&&(Pt+=1e7),{northing:Math.round(Pt),easting:Math.round(It),zoneNumber:Rt,zoneLetter:getLetterDesignator(e)}}function UTMtoLL(o){var e=o.northing,s=o.easting,a=o.zoneLetter,d=o.zoneNumber;if(d<0||d>60)return null;var b=.9996,_=6378137,_e=.00669438,ot,st=(1-Math.sqrt(1-_e))/(1+Math.sqrt(1-_e)),ct,ft,mt,bt,wt,Ct,Rt,It,Pt,Tt=s-5e5,Gt=e;a<"N"&&(Gt-=1e7),Rt=(d-1)*6-180+3,ot=_e/(1-_e),Ct=Gt/b,It=Ct/(_*(1-_e/4-3*_e*_e/64-5*_e*_e*_e/256)),Pt=It+(3*st/2-27*st*st*st/32)*Math.sin(2*It)+(21*st*st/16-55*st*st*st*st/32)*Math.sin(4*It)+151*st*st*st/96*Math.sin(6*It),ct=_/Math.sqrt(1-_e*Math.sin(Pt)*Math.sin(Pt)),ft=Math.tan(Pt)*Math.tan(Pt),mt=ot*Math.cos(Pt)*Math.cos(Pt),bt=_*(1-_e)/Math.pow(1-_e*Math.sin(Pt)*Math.sin(Pt),1.5),wt=Tt/(ct*b);var Jt=Pt-ct*Math.tan(Pt)/bt*(wt*wt/2-(5+3*ft+10*mt-4*mt*mt-9*ot)*wt*wt*wt*wt/24+(61+90*ft+298*mt+45*ft*ft-252*ot-3*mt*mt)*wt*wt*wt*wt*wt*wt/720);Jt=radToDeg(Jt);var qt=(wt-(1+2*ft+mt)*wt*wt*wt/6+(5-2*mt+28*ft-3*mt*mt+8*ot+24*ft*ft)*wt*wt*wt*wt*wt/120)/Math.cos(Pt);qt=Rt+radToDeg(qt);var Nt;if(o.accuracy){var Qt=UTMtoLL({northing:o.northing+o.accuracy,easting:o.easting+o.accuracy,zoneLetter:o.zoneLetter,zoneNumber:o.zoneNumber});Nt={top:Qt.lat,right:Qt.lon,bottom:Jt,left:qt}}else Nt={lat:Jt,lon:qt};return Nt}function getLetterDesignator(o){var e="Z";return 84>=o&&o>=72?e="X":72>o&&o>=64?e="W":64>o&&o>=56?e="V":56>o&&o>=48?e="U":48>o&&o>=40?e="T":40>o&&o>=32?e="S":32>o&&o>=24?e="R":24>o&&o>=16?e="Q":16>o&&o>=8?e="P":8>o&&o>=0?e="N":0>o&&o>=-8?e="M":-8>o&&o>=-16?e="L":-16>o&&o>=-24?e="K":-24>o&&o>=-32?e="J":-32>o&&o>=-40?e="H":-40>o&&o>=-48?e="G":-48>o&&o>=-56?e="F":-56>o&&o>=-64?e="E":-64>o&&o>=-72?e="D":-72>o&&o>=-80&&(e="C"),e}function encode(o,e){var s="00000"+o.easting,a="00000"+o.northing;return o.zoneNumber+o.zoneLetter+get100kID(o.easting,o.northing,o.zoneNumber)+s.substr(s.length-5,e)+a.substr(a.length-5,e)}function get100kID(o,e,s){var a=get100kSetForZone(s),d=Math.floor(o/1e5),b=Math.floor(e/1e5)%20;return getLetter100kID(d,b,a)}function get100kSetForZone(o){var e=o%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(o,e,s){var a=s-1,d=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(a),b=SET_ORIGIN_ROW_LETTERS.charCodeAt(a),_=d+o-1,_e=b+e,ot=!1;_>Z&&(_=_-Z+A-1,ot=!0),(_===I||d<I&&_>I||(_>I||d<I)&&ot)&&_++,(_===O||d<O&&_>O||(_>O||d<O)&&ot)&&(_++,_===I&&_++),_>Z&&(_=_-Z+A-1),_e>V?(_e=_e-V+A-1,ot=!0):ot=!1,(_e===I||b<I&&_e>I||(_e>I||b<I)&&ot)&&_e++,(_e===O||b<O&&_e>O||(_e>O||b<O)&&ot)&&(_e++,_e===I&&_e++),_e>V&&(_e=_e-V+A-1);var st=String.fromCharCode(_)+String.fromCharCode(_e);return st}function decode(o){if(o&&o.length===0)throw"MGRSPoint coverting from nothing";for(var e=o.length,s=null,a="",d,b=0;!/[A-Z]/.test(d=o.charAt(b));){if(b>=2)throw"MGRSPoint bad conversion from: "+o;a+=d,b++}var _=parseInt(a,10);if(b===0||b+3>e)throw"MGRSPoint bad conversion from: "+o;var _e=o.charAt(b++);if(_e<="A"||_e==="B"||_e==="Y"||_e>="Z"||_e==="I"||_e==="O")throw"MGRSPoint zone letter "+_e+" not handled: "+o;s=o.substring(b,b+=2);for(var ot=get100kSetForZone(_),st=getEastingFromChar(s.charAt(0),ot),ct=getNorthingFromChar(s.charAt(1),ot);ct<getMinNorthing(_e);)ct+=2e6;var ft=e-b;if(ft%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+o;var mt=ft/2,bt=0,wt=0,Ct,Rt,It,Pt,Tt;return mt>0&&(Ct=1e5/Math.pow(10,mt),Rt=o.substring(b,b+mt),bt=parseFloat(Rt)*Ct,It=o.substring(b+mt),wt=parseFloat(It)*Ct),Pt=bt+st,Tt=wt+ct,{easting:Pt,northing:Tt,zoneLetter:_e,zoneNumber:_,accuracy:Ct}}function getEastingFromChar(o,e){for(var s=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),a=1e5,d=!1;s!==o.charCodeAt(0);){if(s++,s===I&&s++,s===O&&s++,s>Z){if(d)throw"Bad character: "+o;s=A,d=!0}a+=1e5}return a}function getNorthingFromChar(o,e){if(o>"V")throw"MGRSPoint given invalid Northing "+o;for(var s=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),a=0,d=!1;s!==o.charCodeAt(0);){if(s++,s===I&&s++,s===O&&s++,s>V){if(d)throw"Bad character: "+o;s=A,d=!0}a+=1e5}return a}function getMinNorthing(o){var e;switch(o){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+o}function Point(o,e,s){if(!(this instanceof Point))return new Point(o,e,s);if(Array.isArray(o))this.x=o[0],this.y=o[1],this.z=o[2]||0;else if(typeof o=="object")this.x=o.x,this.y=o.y,this.z=o.z||0;else if(typeof o=="string"&&typeof e>"u"){var a=o.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=o,this.y=e,this.z=s||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(o){return new Point(toPoint(o))};Point.prototype.toMGRS=function(o){return forward$u([this.x,this.y],o)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(o){var e=[];e[0]=C00-o*(C02+o*(C04+o*(C06+o*C08))),e[1]=o*(C22-o*(C04+o*(C06+o*C08)));var s=o*o;return e[2]=s*(C44-o*(C46+o*C48)),s*=o,e[3]=s*(C66-o*C68),e[4]=s*o*C88,e}function pj_mlfn(o,e,s,a){return s*=e,e*=e,a[0]*o-s*(a[1]+e*(a[2]+e*(a[3]+e*a[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(o,e,s){for(var a=1/(1-e),d=o,b=MAX_ITER$3;b;--b){var _=Math.sin(d),_e=1-e*_*_;if(_e=(pj_mlfn(d,_,Math.cos(d),s)-o)*(_e*Math.sqrt(_e))*a,d-=_e,Math.abs(_e)<EPSLN)return d}return d}function init$y(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$t(o){var e=o.x,s=o.y,a=adjust_lon(e-this.long0),d,b,_,_e=Math.sin(s),ot=Math.cos(s);if(this.es){var ct=ot*a,ft=Math.pow(ct,2),mt=this.ep2*Math.pow(ot,2),bt=Math.pow(mt,2),wt=Math.abs(ot)>EPSLN?Math.tan(s):0,Ct=Math.pow(wt,2),Rt=Math.pow(Ct,2);d=1-this.es*Math.pow(_e,2),ct=ct/Math.sqrt(d);var It=pj_mlfn(s,_e,ot,this.en);b=this.a*(this.k0*ct*(1+ft/6*(1-Ct+mt+ft/20*(5-18*Ct+Rt+14*mt-58*Ct*mt+ft/42*(61+179*Rt-Rt*Ct-479*Ct)))))+this.x0,_=this.a*(this.k0*(It-this.ml0+_e*a*ct/2*(1+ft/12*(5-Ct+9*mt+4*bt+ft/30*(61+Rt-58*Ct+270*mt-330*Ct*mt+ft/56*(1385+543*Rt-Rt*Ct-3111*Ct))))))+this.y0}else{var st=ot*Math.sin(a);if(Math.abs(Math.abs(st)-1)<EPSLN)return 93;if(b=.5*this.a*this.k0*Math.log((1+st)/(1-st))+this.x0,_=ot*Math.cos(a)/Math.sqrt(1-Math.pow(st,2)),st=Math.abs(_),st>=1){if(st-1>EPSLN)return 93;_=0}else _=Math.acos(_);s<0&&(_=-_),_=this.a*this.k0*(_-this.lat0)+this.y0}return o.x=b,o.y=_,o}function inverse$t(o){var e,s,a,d,b=(o.x-this.x0)*(1/this.a),_=(o.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+_/this.k0,s=pj_inv_mlfn(e,this.es,this.en),Math.abs(s)<HALF_PI){var ft=Math.sin(s),mt=Math.cos(s),bt=Math.abs(mt)>EPSLN?Math.tan(s):0,wt=this.ep2*Math.pow(mt,2),Ct=Math.pow(wt,2),Rt=Math.pow(bt,2),It=Math.pow(Rt,2);e=1-this.es*Math.pow(ft,2);var Pt=b*Math.sqrt(e)/this.k0,Tt=Math.pow(Pt,2);e=e*bt,a=s-e*Tt/(1-this.es)*.5*(1-Tt/12*(5+3*Rt-9*wt*Rt+wt-4*Ct-Tt/30*(61+90*Rt-252*wt*Rt+45*It+46*wt-Tt/56*(1385+3633*Rt+4095*It+1574*It*Rt)))),d=adjust_lon(this.long0+Pt*(1-Tt/6*(1+2*Rt+wt-Tt/20*(5+28*Rt+24*It+8*wt*Rt+6*wt-Tt/42*(61+662*Rt+1320*It+720*It*Rt))))/mt)}else a=HALF_PI*sign(_),d=0;else{var _e=Math.exp(b/this.k0),ot=.5*(_e-1/_e),st=this.lat0+_/this.k0,ct=Math.cos(st);e=Math.sqrt((1-Math.pow(ct,2))/(1+Math.pow(ot,2))),a=Math.asin(e),_<0&&(a=-a),ot===0&&ct===0?d=0:d=adjust_lon(Math.atan2(ot,ct)+this.long0)}return o.x=d,o.y=a,o}var names$v=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tmerc={init:init$y,forward:forward$t,inverse:inverse$t,names:names$v};function sinh(o){var e=Math.exp(o);return e=(e-1/e)/2,e}function hypot(o,e){o=Math.abs(o),e=Math.abs(e);var s=Math.max(o,e),a=Math.min(o,e)/(s||1);return s*Math.sqrt(1+Math.pow(a,2))}function log1py(o){var e=1+o,s=e-1;return s===0?o:o*Math.log(e)/s}function asinhy(o){var e=Math.abs(o);return e=log1py(e*(1+e/(hypot(1,e)+1))),o<0?-e:e}function gatg(o,e){for(var s=2*Math.cos(2*e),a=o.length-1,d=o[a],b=0,_;--a>=0;)_=-b+s*d+o[a],b=d,d=_;return e+_*Math.sin(2*e)}function clens(o,e){for(var s=2*Math.cos(e),a=o.length-1,d=o[a],b=0,_;--a>=0;)_=-b+s*d+o[a],b=d,d=_;return Math.sin(e)*_}function cosh(o){var e=Math.exp(o);return e=(e+1/e)/2,e}function clens_cmplx(o,e,s){for(var a=Math.sin(e),d=Math.cos(e),b=sinh(s),_=cosh(s),_e=2*d*_,ot=-2*a*b,st=o.length-1,ct=o[st],ft=0,mt=0,bt=0,wt,Ct;--st>=0;)wt=mt,Ct=ft,mt=ct,ft=bt,ct=-wt+_e*mt-ot*ft+o[st],bt=-Ct+ot*mt+_e*ft;return _e=a*_,ot=d*b,[_e*ct-ot*bt,_e*bt+ot*ct]}function init$x(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var o=this.es/(1+Math.sqrt(1-this.es)),e=o/(2-o),s=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),s=s*e,this.cgb[1]=s*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=s*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),s=s*e,this.cgb[2]=s*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=s*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),s=s*e,this.cgb[3]=s*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=s*(1237/630+e*(-12/5+e*(-24832/14175))),s=s*e,this.cgb[4]=s*(4174/315+e*(-144838/6237)),this.cbg[4]=s*(-734/315+e*(109598/31185)),s=s*e,this.cgb[5]=s*(601676/22275),this.cbg[5]=s*(444337/155925),s=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+s*(1/4+s*(1/64+s/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=s*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=s*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),s=s*e,this.utg[2]=s*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=s*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),s=s*e,this.utg[3]=s*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=s*(49561/161280+e*(-179/168+e*(6601661/7257600))),s=s*e,this.utg[4]=s*(-4583/161280+e*(108847/3991680)),this.gtu[4]=s*(34729/80640+e*(-3418889/1995840)),s=s*e,this.utg[5]=s*(-20648693/638668800),this.gtu[5]=s*(212378941/319334400);var a=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(a+clens(this.gtu,2*a))}function forward$s(o){var e=adjust_lon(o.x-this.long0),s=o.y;s=gatg(this.cbg,s);var a=Math.sin(s),d=Math.cos(s),b=Math.sin(e),_=Math.cos(e);s=Math.atan2(a,_*d),e=Math.atan2(b*d,hypot(a,d*_)),e=asinhy(Math.tan(e));var _e=clens_cmplx(this.gtu,2*s,2*e);s=s+_e[0],e=e+_e[1];var ot,st;return Math.abs(e)<=2.623395162778?(ot=this.a*(this.Qn*e)+this.x0,st=this.a*(this.Qn*s+this.Zb)+this.y0):(ot=1/0,st=1/0),o.x=ot,o.y=st,o}function inverse$s(o){var e=(o.x-this.x0)*(1/this.a),s=(o.y-this.y0)*(1/this.a);s=(s-this.Zb)/this.Qn,e=e/this.Qn;var a,d;if(Math.abs(e)<=2.623395162778){var b=clens_cmplx(this.utg,2*s,2*e);s=s+b[0],e=e+b[1],e=Math.atan(sinh(e));var _=Math.sin(s),_e=Math.cos(s),ot=Math.sin(e),st=Math.cos(e);s=Math.atan2(_*st,hypot(ot,st*_e)),e=Math.atan2(ot,st*_e),a=adjust_lon(e+this.long0),d=gatg(this.cgb,s)}else a=1/0,d=1/0;return o.x=a,o.y=d,o}var names$u=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const etmerc={init:init$x,forward:forward$s,inverse:inverse$s,names:names$u};function adjust_zone(o,e){if(o===void 0){if(o=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,o<0)return 0;if(o>60)return 60}return o}var dependsOn="etmerc";function init$w(){var o=adjust_zone(this.zone,this.long0);if(o===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(o)-183)*D2R$1,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$t=["Universal Transverse Mercator System","utm"];const utm={init:init$w,names:names$t,dependsOn};function srat(o,e){return Math.pow((1-o)/(1+o),e)}var MAX_ITER$2=20;function init$v(){var o=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*o*o),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(o/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*o,this.ratexp))}function forward$r(o){var e=o.x,s=o.y;return o.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*s+FORTPI),this.C)*srat(this.e*Math.sin(s),this.ratexp))-HALF_PI,o.x=this.C*e,o}function inverse$r(o){for(var e=1e-14,s=o.x/this.C,a=o.y,d=Math.pow(Math.tan(.5*a+FORTPI)/this.K,1/this.C),b=MAX_ITER$2;b>0&&(a=2*Math.atan(d*srat(this.e*Math.sin(o.y),-.5*this.e))-HALF_PI,!(Math.abs(a-o.y)<e));--b)o.y=a;return b?(o.x=s,o.y=a,o):null}var names$s=["gauss"];const gauss={init:init$v,forward:forward$r,inverse:inverse$r,names:names$s};function init$u(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function forward$q(o){var e,s,a,d;return o.x=adjust_lon(o.x-this.long0),gauss.forward.apply(this,[o]),e=Math.sin(o.y),s=Math.cos(o.y),a=Math.cos(o.x),d=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*s*a),o.x=d*s*Math.sin(o.x),o.y=d*(this.cosc0*e-this.sinc0*s*a),o.x=this.a*o.x+this.x0,o.y=this.a*o.y+this.y0,o}function inverse$q(o){var e,s,a,d,b;if(o.x=(o.x-this.x0)/this.a,o.y=(o.y-this.y0)/this.a,o.x/=this.k0,o.y/=this.k0,b=hypot(o.x,o.y)){var _=2*Math.atan2(b,this.R2);e=Math.sin(_),s=Math.cos(_),d=Math.asin(s*this.sinc0+o.y*e*this.cosc0/b),a=Math.atan2(o.x*e,b*this.cosc0*s-o.y*this.sinc0*e)}else d=this.phic0,a=0;return o.x=a,o.y=d,gauss.inverse.apply(this,[o]),o.x=adjust_lon(o.x+this.long0),o}var names$r=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const sterea={init:init$u,forward:forward$q,inverse:inverse$q,names:names$r};function ssfn_(o,e,s){return e*=s,Math.tan(.5*(HALF_PI+o))*Math.pow((1-e)/(1+e),.5*s)}function init$t(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&Math.abs(Math.cos(this.lat_ts))>EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function forward$p(o){var e=o.x,s=o.y,a=Math.sin(s),d=Math.cos(s),b,_,_e,ot,st,ct,ft=adjust_lon(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=EPSLN&&Math.abs(s+this.lat0)<=EPSLN?(o.x=NaN,o.y=NaN,o):this.sphere?(b=2*this.k0/(1+this.sinlat0*a+this.coslat0*d*Math.cos(ft)),o.x=this.a*b*d*Math.sin(ft)+this.x0,o.y=this.a*b*(this.coslat0*a-this.sinlat0*d*Math.cos(ft))+this.y0,o):(_=2*Math.atan(this.ssfn_(s,a,this.e))-HALF_PI,ot=Math.cos(_),_e=Math.sin(_),Math.abs(this.coslat0)<=EPSLN?(st=tsfnz(this.e,s*this.con,this.con*a),ct=2*this.a*this.k0*st/this.cons,o.x=this.x0+ct*Math.sin(e-this.long0),o.y=this.y0-this.con*ct*Math.cos(e-this.long0),o):(Math.abs(this.sinlat0)<EPSLN?(b=2*this.a*this.k0/(1+ot*Math.cos(ft)),o.y=b*_e):(b=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*_e+this.cosX0*ot*Math.cos(ft))),o.y=b*(this.cosX0*_e-this.sinX0*ot*Math.cos(ft))+this.y0),o.x=b*ot*Math.sin(ft)+this.x0,o))}function inverse$p(o){o.x-=this.x0,o.y-=this.y0;var e,s,a,d,b,_=Math.sqrt(o.x*o.x+o.y*o.y);if(this.sphere){var _e=2*Math.atan(_/(2*this.a*this.k0));return e=this.long0,s=this.lat0,_<=EPSLN?(o.x=e,o.y=s,o):(s=Math.asin(Math.cos(_e)*this.sinlat0+o.y*Math.sin(_e)*this.coslat0/_),Math.abs(this.coslat0)<EPSLN?this.lat0>0?e=adjust_lon(this.long0+Math.atan2(o.x,-1*o.y)):e=adjust_lon(this.long0+Math.atan2(o.x,o.y)):e=adjust_lon(this.long0+Math.atan2(o.x*Math.sin(_e),_*this.coslat0*Math.cos(_e)-o.y*this.sinlat0*Math.sin(_e))),o.x=e,o.y=s,o)}else if(Math.abs(this.coslat0)<=EPSLN){if(_<=EPSLN)return s=this.lat0,e=this.long0,o.x=e,o.y=s,o;o.x*=this.con,o.y*=this.con,a=_*this.cons/(2*this.a*this.k0),s=this.con*phi2z(this.e,a),e=this.con*adjust_lon(this.con*this.long0+Math.atan2(o.x,-1*o.y))}else d=2*Math.atan(_*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,_<=EPSLN?b=this.X0:(b=Math.asin(Math.cos(d)*this.sinX0+o.y*Math.sin(d)*this.cosX0/_),e=adjust_lon(this.long0+Math.atan2(o.x*Math.sin(d),_*this.cosX0*Math.cos(d)-o.y*this.sinX0*Math.sin(d)))),s=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+b)));return o.x=e,o.y=s,o}var names$q=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const stere={init:init$t,forward:forward$p,inverse:inverse$p,names:names$q,ssfn_};function init$s(){var o=this.lat0;this.lambda0=this.long0;var e=Math.sin(o),s=this.a,a=this.rf,d=1/a,b=2*d-Math.pow(d,2),_=this.e=Math.sqrt(b);this.R=this.k0*s*Math.sqrt(1-b)/(1-b*Math.pow(e,2)),this.alpha=Math.sqrt(1+b/(1-b)*Math.pow(Math.cos(o),4)),this.b0=Math.asin(e/this.alpha);var _e=Math.log(Math.tan(Math.PI/4+this.b0/2)),ot=Math.log(Math.tan(Math.PI/4+o/2)),st=Math.log((1+_*e)/(1-_*e));this.K=_e-this.alpha*ot+this.alpha*_/2*st}function forward$o(o){var e=Math.log(Math.tan(Math.PI/4-o.y/2)),s=this.e/2*Math.log((1+this.e*Math.sin(o.y))/(1-this.e*Math.sin(o.y))),a=-this.alpha*(e+s)+this.K,d=2*(Math.atan(Math.exp(a))-Math.PI/4),b=this.alpha*(o.x-this.lambda0),_=Math.atan(Math.sin(b)/(Math.sin(this.b0)*Math.tan(d)+Math.cos(this.b0)*Math.cos(b))),_e=Math.asin(Math.cos(this.b0)*Math.sin(d)-Math.sin(this.b0)*Math.cos(d)*Math.cos(b));return o.y=this.R/2*Math.log((1+Math.sin(_e))/(1-Math.sin(_e)))+this.y0,o.x=this.R*_+this.x0,o}function inverse$o(o){for(var e=o.x-this.x0,s=o.y-this.y0,a=e/this.R,d=2*(Math.atan(Math.exp(s/this.R))-Math.PI/4),b=Math.asin(Math.cos(this.b0)*Math.sin(d)+Math.sin(this.b0)*Math.cos(d)*Math.cos(a)),_=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(d))),_e=this.lambda0+_/this.alpha,ot=0,st=b,ct=-1e3,ft=0;Math.abs(st-ct)>1e-7;){if(++ft>20)return;ot=1/this.alpha*(Math.log(Math.tan(Math.PI/4+b/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(st))/2)),ct=st,st=2*Math.atan(Math.exp(ot))-Math.PI/2}return o.x=_e,o.y=st,o}var names$p=["somerc"];const somerc={init:init$s,forward:forward$o,inverse:inverse$o,names:names$p};var TOL=1e-7;function isTypeA(o){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],s=typeof o.PROJECTION=="object"?Object.keys(o.PROJECTION)[0]:o.PROJECTION;return"no_uoff"in o||"no_off"in o||e.indexOf(s)!==-1}function init$r(){var o,e,s,a,d,b,_,_e,ot,st,ct=0,ft,mt=0,bt=0,wt=0,Ct=0,Rt=0,It=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var Pt=!1;"alpha"in this&&(Pt=!0);var Tt=!1;if("rectified_grid_angle"in this&&(Tt=!0),Pt&&(It=this.alpha),Tt&&(ct=this.rectified_grid_angle*D2R$1),Pt||Tt)mt=this.longc;else if(bt=this.long1,Ct=this.lat1,wt=this.long2,Rt=this.lat2,Math.abs(Ct-Rt)<=TOL||(o=Math.abs(Ct))<=TOL||Math.abs(o-HALF_PI)<=TOL||Math.abs(Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(Rt)-HALF_PI)<=TOL)throw new Error;var Gt=1-this.es;e=Math.sqrt(Gt),Math.abs(this.lat0)>EPSLN?(_e=Math.sin(this.lat0),s=Math.cos(this.lat0),o=1-this.es*_e*_e,this.B=s*s,this.B=Math.sqrt(1+this.es*this.B*this.B/Gt),this.A=this.B*this.k0*e/o,a=this.B*e/(s*Math.sqrt(o)),d=a*a-1,d<=0?d=0:(d=Math.sqrt(d),this.lat0<0&&(d=-d)),this.E=d+=a,this.E*=Math.pow(tsfnz(this.e,this.lat0,_e),this.B)):(this.B=1/e,this.A=this.k0,this.E=a=d=1),Pt||Tt?(Pt?(ft=Math.asin(Math.sin(It)/a),Tt||(ct=It)):(ft=ct,It=Math.asin(a*Math.sin(ft))),this.lam0=mt-Math.asin(.5*(d-1/d)*Math.tan(ft))/this.B):(b=Math.pow(tsfnz(this.e,Ct,Math.sin(Ct)),this.B),_=Math.pow(tsfnz(this.e,Rt,Math.sin(Rt)),this.B),d=this.E/b,ot=(_-b)/(_+b),st=this.E*this.E,st=(st-_*b)/(st+_*b),o=bt-wt,o<-Math.pi?wt-=TWO_PI:o>Math.pi&&(wt+=TWO_PI),this.lam0=adjust_lon(.5*(bt+wt)-Math.atan(st*Math.tan(.5*this.B*(bt-wt))/ot)/this.B),ft=Math.atan(2*Math.sin(this.B*adjust_lon(bt-this.lam0))/(d-1/d)),ct=It=Math.asin(a*Math.sin(ft))),this.singam=Math.sin(ft),this.cosgam=Math.cos(ft),this.sinrot=Math.sin(ct),this.cosrot=Math.cos(ct),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(It))),this.lat0<0&&(this.u_0=-this.u_0)),d=.5*ft,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-d)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+d))}function forward$n(o){var e={},s,a,d,b,_,_e,ot,st;if(o.x=o.x-this.lam0,Math.abs(Math.abs(o.y)-HALF_PI)>EPSLN){if(_=this.E/Math.pow(tsfnz(this.e,o.y,Math.sin(o.y)),this.B),_e=1/_,s=.5*(_-_e),a=.5*(_+_e),b=Math.sin(this.B*o.x),d=(s*this.singam-b*this.cosgam)/a,Math.abs(Math.abs(d)-1)<EPSLN)throw new Error;st=.5*this.ArB*Math.log((1-d)/(1+d)),_e=Math.cos(this.B*o.x),Math.abs(_e)<TOL?ot=this.A*o.x:ot=this.ArB*Math.atan2(s*this.cosgam+b*this.singam,_e)}else st=o.y>0?this.v_pole_n:this.v_pole_s,ot=this.ArB*o.y;return this.no_rot?(e.x=ot,e.y=st):(ot-=this.u_0,e.x=st*this.cosrot+ot*this.sinrot,e.y=ot*this.cosrot-st*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function inverse$n(o){var e,s,a,d,b,_,_e,ot={};if(o.x=(o.x-this.x0)*(1/this.a),o.y=(o.y-this.y0)*(1/this.a),this.no_rot?(s=o.y,e=o.x):(s=o.x*this.cosrot-o.y*this.sinrot,e=o.y*this.cosrot+o.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*s),d=.5*(a-1/a),b=.5*(a+1/a),_=Math.sin(this.BrA*e),_e=(_*this.cosgam+d*this.singam)/b,Math.abs(Math.abs(_e)-1)<EPSLN)ot.x=0,ot.y=_e<0?-HALF_PI:HALF_PI;else{if(ot.y=this.E/Math.sqrt((1+_e)/(1-_e)),ot.y=phi2z(this.e,Math.pow(ot.y,1/this.B)),ot.y===1/0)throw new Error;ot.x=-this.rB*Math.atan2(d*this.cosgam-_*this.singam,Math.cos(this.BrA*e))}return ot.x+=this.lam0,ot}var names$o=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const omerc={init:init$r,forward:forward$n,inverse:inverse$n,names:names$o};function init$q(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var o=this.b/this.a;this.e=Math.sqrt(1-o*o);var e=Math.sin(this.lat1),s=Math.cos(this.lat1),a=msfnz(this.e,e,s),d=tsfnz(this.e,this.lat1,e),b=Math.sin(this.lat2),_=Math.cos(this.lat2),_e=msfnz(this.e,b,_),ot=tsfnz(this.e,this.lat2,b),st=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(a/_e)/Math.log(d/ot):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=a/(this.ns*Math.pow(d,this.ns)),this.rh=this.a*this.f0*Math.pow(st,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function forward$m(o){var e=o.x,s=o.y;Math.abs(2*Math.abs(s)-Math.PI)<=EPSLN&&(s=sign(s)*(HALF_PI-2*EPSLN));var a=Math.abs(Math.abs(s)-HALF_PI),d,b;if(a>EPSLN)d=tsfnz(this.e,s,Math.sin(s)),b=this.a*this.f0*Math.pow(d,this.ns);else{if(a=s*this.ns,a<=0)return null;b=0}var _=this.ns*adjust_lon(e-this.long0);return o.x=this.k0*(b*Math.sin(_))+this.x0,o.y=this.k0*(this.rh-b*Math.cos(_))+this.y0,o}function inverse$m(o){var e,s,a,d,b,_=(o.x-this.x0)/this.k0,_e=this.rh-(o.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(_*_+_e*_e),s=1):(e=-Math.sqrt(_*_+_e*_e),s=-1);var ot=0;if(e!==0&&(ot=Math.atan2(s*_,s*_e)),e!==0||this.ns>0){if(s=1/this.ns,a=Math.pow(e/(this.a*this.f0),s),d=phi2z(this.e,a),d===-9999)return null}else d=-HALF_PI;return b=adjust_lon(ot/this.ns+this.long0),o.x=b,o.y=d,o}var names$n=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const lcc={init:init$q,forward:forward$m,inverse:inverse$m,names:names$n};function init$p(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$l(o){var e,s,a,d,b,_,_e,ot=o.x,st=o.y,ct=adjust_lon(ot-this.long0);return e=Math.pow((1+this.e*Math.sin(st))/(1-this.e*Math.sin(st)),this.alfa*this.e/2),s=2*(Math.atan(this.k*Math.pow(Math.tan(st/2+this.s45),this.alfa)/e)-this.s45),a=-ct*this.alfa,d=Math.asin(Math.cos(this.ad)*Math.sin(s)+Math.sin(this.ad)*Math.cos(s)*Math.cos(a)),b=Math.asin(Math.cos(s)*Math.sin(a)/Math.cos(d)),_=this.n*b,_e=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(d/2+this.s45),this.n),o.y=_e*Math.cos(_)/1,o.x=_e*Math.sin(_)/1,this.czech||(o.y*=-1,o.x*=-1),o}function inverse$l(o){var e,s,a,d,b,_,_e,ot,st=o.x;o.x=o.y,o.y=st,this.czech||(o.y*=-1,o.x*=-1),_=Math.sqrt(o.x*o.x+o.y*o.y),b=Math.atan2(o.y,o.x),d=b/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/_,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(d)),s=Math.asin(Math.cos(a)*Math.sin(d)/Math.cos(e)),o.x=this.long0-s/this.alfa,_e=e,ot=0;var ct=0;do o.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(_e))/(1-this.e*Math.sin(_e)),this.e/2))-this.s45),Math.abs(_e-o.y)<1e-10&&(ot=1),_e=o.y,ct+=1;while(ot===0&&ct<15);return ct>=15?null:o}var names$m=["Krovak","krovak"];const krovak={init:init$p,forward:forward$l,inverse:inverse$l,names:names$m};function mlfn(o,e,s,a,d){return o*d-e*Math.sin(2*d)+s*Math.sin(4*d)-a*Math.sin(6*d)}function e0fn(o){return 1-.25*o*(1+o/16*(3+1.25*o))}function e1fn(o){return .375*o*(1+.25*o*(1+.46875*o))}function e2fn(o){return .05859375*o*o*(1+.75*o)}function e3fn(o){return o*o*o*(35/3072)}function gN(o,e,s){var a=e*s;return o/Math.sqrt(1-a*a)}function adjust_lat(o){return Math.abs(o)<HALF_PI?o:o-sign(o)*Math.PI}function imlfn(o,e,s,a,d){var b,_;b=o/e;for(var _e=0;_e<15;_e++)if(_=(o-(e*b-s*Math.sin(2*b)+a*Math.sin(4*b)-d*Math.sin(6*b)))/(e-2*s*Math.cos(2*b)+4*a*Math.cos(4*b)-6*d*Math.cos(6*b)),b+=_,Math.abs(_)<=1e-10)return b;return NaN}function init$o(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$k(o){var e,s,a=o.x,d=o.y;if(a=adjust_lon(a-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(d)*Math.sin(a)),s=this.a*(Math.atan2(Math.tan(d),Math.cos(a))-this.lat0);else{var b=Math.sin(d),_=Math.cos(d),_e=gN(this.a,this.e,b),ot=Math.tan(d)*Math.tan(d),st=a*Math.cos(d),ct=st*st,ft=this.es*_*_/(1-this.es),mt=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,d);e=_e*st*(1-ct*ot*(1/6-(8-ot+8*ft)*ct/120)),s=mt-this.ml0+_e*b/_*ct*(.5+(5-ot+6*ft)*ct/24)}return o.x=e+this.x0,o.y=s+this.y0,o}function inverse$k(o){o.x-=this.x0,o.y-=this.y0;var e=o.x/this.a,s=o.y/this.a,a,d;if(this.sphere){var b=s+this.lat0;a=Math.asin(Math.sin(b)*Math.cos(e)),d=Math.atan2(Math.tan(e),Math.cos(b))}else{var _=this.ml0/this.a+s,_e=imlfn(_,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(_e)-HALF_PI)<=EPSLN)return o.x=this.long0,o.y=HALF_PI,s<0&&(o.y*=-1),o;var ot=gN(this.a,this.e,Math.sin(_e)),st=ot*ot*ot/this.a/this.a*(1-this.es),ct=Math.pow(Math.tan(_e),2),ft=e*this.a/ot,mt=ft*ft;a=_e-ot*Math.tan(_e)/st*ft*ft*(.5-(1+3*ct)*ft*ft/24),d=ft*(1-mt*(ct/3+(1+3*ct)*ct*mt/15))/Math.cos(_e)}return o.x=adjust_lon(d+this.long0),o.y=adjust_lat(a),o}var names$l=["Cassini","Cassini_Soldner","cass"];const cass={init:init$o,forward:forward$k,inverse:inverse$k,names:names$l};function qsfnz(o,e){var s;return o>1e-7?(s=o*e,(1-o*o)*(e/(1-s*s)-.5/o*Math.log((1-s)/(1+s)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$n(){var o=Math.abs(this.lat0);if(Math.abs(o-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(o)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$j(o){var e,s,a,d,b,_,_e,ot,st,ct,ft=o.x,mt=o.y;if(ft=adjust_lon(ft-this.long0),this.sphere){if(b=Math.sin(mt),ct=Math.cos(mt),a=Math.cos(ft),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(s=this.mode===this.EQUIT?1+ct*a:1+this.sinph0*b+this.cosph0*ct*a,s<=EPSLN)return null;s=Math.sqrt(2/s),e=s*ct*Math.sin(ft),s*=this.mode===this.EQUIT?b:this.cosph0*b-this.sinph0*ct*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(mt+this.lat0)<EPSLN)return null;s=FORTPI-mt*.5,s=2*(this.mode===this.S_POLE?Math.cos(s):Math.sin(s)),e=s*Math.sin(ft),s*=a}}else{switch(_e=0,ot=0,st=0,a=Math.cos(ft),d=Math.sin(ft),b=Math.sin(mt),_=qsfnz(this.e,b),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(_e=_/this.qp,ot=Math.sqrt(1-_e*_e)),this.mode){case this.OBLIQ:st=1+this.sinb1*_e+this.cosb1*ot*a;break;case this.EQUIT:st=1+ot*a;break;case this.N_POLE:st=HALF_PI+mt,_=this.qp-_;break;case this.S_POLE:st=mt-HALF_PI,_=this.qp+_;break}if(Math.abs(st)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:st=Math.sqrt(2/st),this.mode===this.OBLIQ?s=this.ymf*st*(this.cosb1*_e-this.sinb1*ot*a):s=(st=Math.sqrt(2/(1+ot*a)))*_e*this.ymf,e=this.xmf*st*ot*d;break;case this.N_POLE:case this.S_POLE:_>=0?(e=(st=Math.sqrt(_))*d,s=a*(this.mode===this.S_POLE?st:-st)):e=s=0;break}}return o.x=this.a*e+this.x0,o.y=this.a*s+this.y0,o}function inverse$j(o){o.x-=this.x0,o.y-=this.y0;var e=o.x/this.a,s=o.y/this.a,a,d,b,_,_e,ot,st;if(this.sphere){var ct=0,ft,mt=0;if(ft=Math.sqrt(e*e+s*s),d=ft*.5,d>1)return null;switch(d=2*Math.asin(d),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(mt=Math.sin(d),ct=Math.cos(d)),this.mode){case this.EQUIT:d=Math.abs(ft)<=EPSLN?0:Math.asin(s*mt/ft),e*=mt,s=ct*ft;break;case this.OBLIQ:d=Math.abs(ft)<=EPSLN?this.lat0:Math.asin(ct*this.sinph0+s*mt*this.cosph0/ft),e*=mt*this.cosph0,s=(ct-Math.sin(d)*this.sinph0)*ft;break;case this.N_POLE:s=-s,d=HALF_PI-d;break;case this.S_POLE:d-=HALF_PI;break}a=s===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,s)}else{if(st=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,s*=this.dd,ot=Math.sqrt(e*e+s*s),ot<EPSLN)return o.x=this.long0,o.y=this.lat0,o;_=2*Math.asin(.5*ot/this.rq),b=Math.cos(_),e*=_=Math.sin(_),this.mode===this.OBLIQ?(st=b*this.sinb1+s*_*this.cosb1/ot,_e=this.qp*st,s=ot*this.cosb1*b-s*this.sinb1*_):(st=s*_/ot,_e=this.qp*st,s=ot*b)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),_e=e*e+s*s,!_e)return o.x=this.long0,o.y=this.lat0,o;st=1-_e/this.qp,this.mode===this.S_POLE&&(st=-st)}a=Math.atan2(e,s),d=authlat(Math.asin(st),this.apa)}return o.x=adjust_lon(this.long0+a),o.y=d,o}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(o){var e,s=[];return s[0]=o*P00,e=o*o,s[0]+=e*P01,s[1]=e*P10,e*=o,s[0]+=e*P02,s[1]+=e*P11,s[2]=e*P20,s}function authlat(o,e){var s=o+o;return o+e[0]*Math.sin(s)+e[1]*Math.sin(s+s)+e[2]*Math.sin(s+s+s)}var names$k=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const laea={init:init$n,forward:forward$j,inverse:inverse$j,names:names$k,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(o){return Math.abs(o)>1&&(o=o>1?1:-1),Math.asin(o)}function init$m(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function forward$i(o){var e=o.x,s=o.y;this.sin_phi=Math.sin(s),this.cos_phi=Math.cos(s);var a=qsfnz(this.e3,this.sin_phi),d=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,b=this.ns0*adjust_lon(e-this.long0),_=d*Math.sin(b)+this.x0,_e=this.rh-d*Math.cos(b)+this.y0;return o.x=_,o.y=_e,o}function inverse$i(o){var e,s,a,d,b,_;return o.x-=this.x0,o.y=this.rh-o.y+this.y0,this.ns0>=0?(e=Math.sqrt(o.x*o.x+o.y*o.y),a=1):(e=-Math.sqrt(o.x*o.x+o.y*o.y),a=-1),d=0,e!==0&&(d=Math.atan2(a*o.x,a*o.y)),a=e*this.ns0/this.a,this.sphere?_=Math.asin((this.c-a*a)/(2*this.ns0)):(s=(this.c-a*a)/this.ns0,_=this.phi1z(this.e3,s)),b=adjust_lon(d/this.ns0+this.long0),o.x=b,o.y=_,o}function phi1z(o,e){var s,a,d,b,_,_e=asinz(.5*e);if(o<EPSLN)return _e;for(var ot=o*o,st=1;st<=25;st++)if(s=Math.sin(_e),a=Math.cos(_e),d=o*s,b=1-d*d,_=.5*b*b/a*(e/(1-ot)-s/b+.5/o*Math.log((1-d)/(1+d))),_e=_e+_,Math.abs(_)<=1e-7)return _e;return null}var names$j=["Albers_Conic_Equal_Area","Albers","aea"];const aea={init:init$m,forward:forward$i,inverse:inverse$i,names:names$j,phi1z};function init$l(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$h(o){var e,s,a,d,b,_,_e,ot,st=o.x,ct=o.y;return a=adjust_lon(st-this.long0),e=Math.sin(ct),s=Math.cos(ct),d=Math.cos(a),_=this.sin_p14*e+this.cos_p14*s*d,b=1,_>0||Math.abs(_)<=EPSLN?(_e=this.x0+this.a*b*s*Math.sin(a)/_,ot=this.y0+this.a*b*(this.cos_p14*e-this.sin_p14*s*d)/_):(_e=this.x0+this.infinity_dist*s*Math.sin(a),ot=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*s*d)),o.x=_e,o.y=ot,o}function inverse$h(o){var e,s,a,d,b,_;return o.x=(o.x-this.x0)/this.a,o.y=(o.y-this.y0)/this.a,o.x/=this.k0,o.y/=this.k0,(e=Math.sqrt(o.x*o.x+o.y*o.y))?(d=Math.atan2(e,this.rc),s=Math.sin(d),a=Math.cos(d),_=asinz(a*this.sin_p14+o.y*s*this.cos_p14/e),b=Math.atan2(o.x*s,e*this.cos_p14*a-o.y*this.sin_p14*s),b=adjust_lon(this.long0+b)):(_=this.phic0,b=0),o.x=b,o.y=_,o}var names$i=["gnom"];const gnom={init:init$l,forward:forward$h,inverse:inverse$h,names:names$i};function iqsfnz(o,e){var s=1-(1-o*o)/(2*o)*Math.log((1-o)/(1+o));if(Math.abs(Math.abs(e)-s)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var a=Math.asin(.5*e),d,b,_,_e,ot=0;ot<30;ot++)if(b=Math.sin(a),_=Math.cos(a),_e=o*b,d=Math.pow(1-_e*_e,2)/(2*_)*(e/(1-o*o)-b/(1-_e*_e)+.5/o*Math.log((1-_e)/(1+_e))),a+=d,Math.abs(d)<=1e-10)return a;return NaN}function init$k(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function forward$g(o){var e=o.x,s=o.y,a,d,b=adjust_lon(e-this.long0);if(this.sphere)a=this.x0+this.a*b*Math.cos(this.lat_ts),d=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var _=qsfnz(this.e,Math.sin(s));a=this.x0+this.a*this.k0*b,d=this.y0+this.a*_*.5/this.k0}return o.x=a,o.y=d,o}function inverse$g(o){o.x-=this.x0,o.y-=this.y0;var e,s;return this.sphere?(e=adjust_lon(this.long0+o.x/this.a/Math.cos(this.lat_ts)),s=Math.asin(o.y/this.a*Math.cos(this.lat_ts))):(s=iqsfnz(this.e,2*o.y*this.k0/this.a),e=adjust_lon(this.long0+o.x/(this.a*this.k0))),o.x=e,o.y=s,o}var names$h=["cea"];const cea={init:init$k,forward:forward$g,inverse:inverse$g,names:names$h};function init$j(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$f(o){var e=o.x,s=o.y,a=adjust_lon(e-this.long0),d=adjust_lat(s-this.lat0);return o.x=this.x0+this.a*a*this.rc,o.y=this.y0+this.a*d,o}function inverse$f(o){var e=o.x,s=o.y;return o.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),o.y=adjust_lat(this.lat0+(s-this.y0)/this.a),o}var names$g=["Equirectangular","Equidistant_Cylindrical","eqc"];const eqc={init:init$j,forward:forward$f,inverse:inverse$f,names:names$g};var MAX_ITER$1=20;function init$i(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$e(o){var e=o.x,s=o.y,a,d,b,_=adjust_lon(e-this.long0);if(b=_*Math.sin(s),this.sphere)Math.abs(s)<=EPSLN?(a=this.a*_,d=-1*this.a*this.lat0):(a=this.a*Math.sin(b)/Math.tan(s),d=this.a*(adjust_lat(s-this.lat0)+(1-Math.cos(b))/Math.tan(s)));else if(Math.abs(s)<=EPSLN)a=this.a*_,d=-1*this.ml0;else{var _e=gN(this.a,this.e,Math.sin(s))/Math.tan(s);a=_e*Math.sin(b),d=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+_e*(1-Math.cos(b))}return o.x=a+this.x0,o.y=d+this.y0,o}function inverse$e(o){var e,s,a,d,b,_,_e,ot,st;if(a=o.x-this.x0,d=o.y-this.y0,this.sphere)if(Math.abs(d+this.a*this.lat0)<=EPSLN)e=adjust_lon(a/this.a+this.long0),s=0;else{_=this.lat0+d/this.a,_e=a*a/this.a/this.a+_*_,ot=_;var ct;for(b=MAX_ITER$1;b;--b)if(ct=Math.tan(ot),st=-1*(_*(ot*ct+1)-ot-.5*(ot*ot+_e)*ct)/((ot-_)/ct-1),ot+=st,Math.abs(st)<=EPSLN){s=ot;break}e=adjust_lon(this.long0+Math.asin(a*Math.tan(ot)/this.a)/Math.sin(s))}else if(Math.abs(d+this.ml0)<=EPSLN)s=0,e=adjust_lon(this.long0+a/this.a);else{_=(this.ml0+d)/this.a,_e=a*a/this.a/this.a+_*_,ot=_;var ft,mt,bt,wt,Ct;for(b=MAX_ITER$1;b;--b)if(Ct=this.e*Math.sin(ot),ft=Math.sqrt(1-Ct*Ct)*Math.tan(ot),mt=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,ot),bt=this.e0-2*this.e1*Math.cos(2*ot)+4*this.e2*Math.cos(4*ot)-6*this.e3*Math.cos(6*ot),wt=mt/this.a,st=(_*(ft*wt+1)-wt-.5*ft*(wt*wt+_e))/(this.es*Math.sin(2*ot)*(wt*wt+_e-2*_*wt)/(4*ft)+(_-wt)*(ft*bt-2/Math.sin(2*ot))-bt),ot-=st,Math.abs(st)<=EPSLN){s=ot;break}ft=Math.sqrt(1-this.es*Math.pow(Math.sin(s),2))*Math.tan(s),e=adjust_lon(this.long0+Math.asin(a*ft/this.a)/Math.sin(s))}return o.x=e,o.y=s,o}var names$f=["Polyconic","poly"];const poly={init:init$i,forward:forward$e,inverse:inverse$e,names:names$f};function init$h(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$d(o){var e,s=o.x,a=o.y,d=a-this.lat0,b=s-this.long0,_=d/SEC_TO_RAD*1e-5,_e=b,ot=1,st=0;for(e=1;e<=10;e++)ot=ot*_,st=st+this.A[e]*ot;var ct=st,ft=_e,mt=1,bt=0,wt,Ct,Rt=0,It=0;for(e=1;e<=6;e++)wt=mt*ct-bt*ft,Ct=bt*ct+mt*ft,mt=wt,bt=Ct,Rt=Rt+this.B_re[e]*mt-this.B_im[e]*bt,It=It+this.B_im[e]*mt+this.B_re[e]*bt;return o.x=It*this.a+this.x0,o.y=Rt*this.a+this.y0,o}function inverse$d(o){var e,s=o.x,a=o.y,d=s-this.x0,b=a-this.y0,_=b/this.a,_e=d/this.a,ot=1,st=0,ct,ft,mt=0,bt=0;for(e=1;e<=6;e++)ct=ot*_-st*_e,ft=st*_+ot*_e,ot=ct,st=ft,mt=mt+this.C_re[e]*ot-this.C_im[e]*st,bt=bt+this.C_im[e]*ot+this.C_re[e]*st;for(var wt=0;wt<this.iterations;wt++){var Ct=mt,Rt=bt,It,Pt,Tt=_,Gt=_e;for(e=2;e<=6;e++)It=Ct*mt-Rt*bt,Pt=Rt*mt+Ct*bt,Ct=It,Rt=Pt,Tt=Tt+(e-1)*(this.B_re[e]*Ct-this.B_im[e]*Rt),Gt=Gt+(e-1)*(this.B_im[e]*Ct+this.B_re[e]*Rt);Ct=1,Rt=0;var Jt=this.B_re[1],qt=this.B_im[1];for(e=2;e<=6;e++)It=Ct*mt-Rt*bt,Pt=Rt*mt+Ct*bt,Ct=It,Rt=Pt,Jt=Jt+e*(this.B_re[e]*Ct-this.B_im[e]*Rt),qt=qt+e*(this.B_im[e]*Ct+this.B_re[e]*Rt);var Nt=Jt*Jt+qt*qt;mt=(Tt*Jt+Gt*qt)/Nt,bt=(Gt*Jt-Tt*qt)/Nt}var Qt=mt,fn=bt,Mn=1,ln=0;for(e=1;e<=9;e++)Mn=Mn*Qt,ln=ln+this.D[e]*Mn;var Wt=this.lat0+ln*SEC_TO_RAD*1e5,so=this.long0+fn;return o.x=so,o.y=Wt,o}var names$e=["New_Zealand_Map_Grid","nzmg"];const nzmg={init:init$h,forward:forward$d,inverse:inverse$d,names:names$e};function init$g(){}function forward$c(o){var e=o.x,s=o.y,a=adjust_lon(e-this.long0),d=this.x0+this.a*a,b=this.y0+this.a*Math.log(Math.tan(Math.PI/4+s/2.5))*1.25;return o.x=d,o.y=b,o}function inverse$c(o){o.x-=this.x0,o.y-=this.y0;var e=adjust_lon(this.long0+o.x/this.a),s=2.5*(Math.atan(Math.exp(.8*o.y/this.a))-Math.PI/4);return o.x=e,o.y=s,o}var names$d=["Miller_Cylindrical","mill"];const mill={init:init$g,forward:forward$c,inverse:inverse$c,names:names$d};var MAX_ITER=20;function init$f(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$b(o){var e,s,a=o.x,d=o.y;if(a=adjust_lon(a-this.long0),this.sphere){if(!this.m)d=this.n!==1?Math.asin(this.n*Math.sin(d)):d;else for(var b=this.n*Math.sin(d),_=MAX_ITER;_;--_){var _e=(this.m*d+Math.sin(d)-b)/(this.m+Math.cos(d));if(d-=_e,Math.abs(_e)<EPSLN)break}e=this.a*this.C_x*a*(this.m+Math.cos(d)),s=this.a*this.C_y*d}else{var ot=Math.sin(d),st=Math.cos(d);s=this.a*pj_mlfn(d,ot,st,this.en),e=this.a*a*st/Math.sqrt(1-this.es*ot*ot)}return o.x=e,o.y=s,o}function inverse$b(o){var e,s,a,d;return o.x-=this.x0,a=o.x/this.a,o.y-=this.y0,e=o.y/this.a,this.sphere?(e/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(e))),this.m?e=asinz((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=asinz(Math.sin(e)/this.n)),a=adjust_lon(a+this.long0),e=adjust_lat(e)):(e=pj_inv_mlfn(o.y/this.a,this.es,this.en),d=Math.abs(e),d<HALF_PI?(d=Math.sin(e),s=this.long0+o.x*Math.sqrt(1-this.es*d*d)/(this.a*Math.cos(e)),a=adjust_lon(s)):d-EPSLN<HALF_PI&&(a=this.long0)),o.x=a,o.y=e,o}var names$c=["Sinusoidal","sinu"];const sinu={init:init$f,forward:forward$b,inverse:inverse$b,names:names$c};function init$e(){}function forward$a(o){for(var e=o.x,s=o.y,a=adjust_lon(e-this.long0),d=s,b=Math.PI*Math.sin(s);;){var _=-(d+Math.sin(d)-b)/(1+Math.cos(d));if(d+=_,Math.abs(_)<EPSLN)break}d/=2,Math.PI/2-Math.abs(s)<EPSLN&&(a=0);var _e=.900316316158*this.a*a*Math.cos(d)+this.x0,ot=1.4142135623731*this.a*Math.sin(d)+this.y0;return o.x=_e,o.y=ot,o}function inverse$a(o){var e,s;o.x-=this.x0,o.y-=this.y0,s=o.y/(1.4142135623731*this.a),Math.abs(s)>.999999999999&&(s=.999999999999),e=Math.asin(s);var a=adjust_lon(this.long0+o.x/(.900316316158*this.a*Math.cos(e)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),s=(2*e+Math.sin(2*e))/Math.PI,Math.abs(s)>1&&(s=1);var d=Math.asin(s);return o.x=a,o.y=d,o}var names$b=["Mollweide","moll"];const moll={init:init$e,forward:forward$a,inverse:inverse$a,names:names$b};function init$d(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function forward$9(o){var e=o.x,s=o.y,a;if(this.sphere)a=this.a*(this.g-s);else{var d=mlfn(this.e0,this.e1,this.e2,this.e3,s);a=this.a*(this.g-d)}var b=this.ns*adjust_lon(e-this.long0),_=this.x0+a*Math.sin(b),_e=this.y0+this.rh-a*Math.cos(b);return o.x=_,o.y=_e,o}function inverse$9(o){o.x-=this.x0,o.y=this.rh-o.y+this.y0;var e,s,a,d;this.ns>=0?(s=Math.sqrt(o.x*o.x+o.y*o.y),e=1):(s=-Math.sqrt(o.x*o.x+o.y*o.y),e=-1);var b=0;if(s!==0&&(b=Math.atan2(e*o.x,e*o.y)),this.sphere)return d=adjust_lon(this.long0+b/this.ns),a=adjust_lat(this.g-s/this.a),o.x=d,o.y=a,o;var _=this.g-s/this.a;return a=imlfn(_,this.e0,this.e1,this.e2,this.e3),d=adjust_lon(this.long0+b/this.ns),o.x=d,o.y=a,o}var names$a=["Equidistant_Conic","eqdc"];const eqdc={init:init$d,forward:forward$9,inverse:inverse$9,names:names$a};function init$c(){this.R=this.a}function forward$8(o){var e=o.x,s=o.y,a=adjust_lon(e-this.long0),d,b;Math.abs(s)<=EPSLN&&(d=this.x0+this.R*a,b=this.y0);var _=asinz(2*Math.abs(s/Math.PI));(Math.abs(a)<=EPSLN||Math.abs(Math.abs(s)-HALF_PI)<=EPSLN)&&(d=this.x0,s>=0?b=this.y0+Math.PI*this.R*Math.tan(.5*_):b=this.y0+Math.PI*this.R*-Math.tan(.5*_));var _e=.5*Math.abs(Math.PI/a-a/Math.PI),ot=_e*_e,st=Math.sin(_),ct=Math.cos(_),ft=ct/(st+ct-1),mt=ft*ft,bt=ft*(2/st-1),wt=bt*bt,Ct=Math.PI*this.R*(_e*(ft-wt)+Math.sqrt(ot*(ft-wt)*(ft-wt)-(wt+ot)*(mt-wt)))/(wt+ot);a<0&&(Ct=-Ct),d=this.x0+Ct;var Rt=ot+ft;return Ct=Math.PI*this.R*(bt*Rt-_e*Math.sqrt((wt+ot)*(ot+1)-Rt*Rt))/(wt+ot),s>=0?b=this.y0+Ct:b=this.y0-Ct,o.x=d,o.y=b,o}function inverse$8(o){var e,s,a,d,b,_,_e,ot,st,ct,ft,mt,bt;return o.x-=this.x0,o.y-=this.y0,ft=Math.PI*this.R,a=o.x/ft,d=o.y/ft,b=a*a+d*d,_=-Math.abs(d)*(1+b),_e=_-2*d*d+a*a,ot=-2*_+1+2*d*d+b*b,bt=d*d/ot+(2*_e*_e*_e/ot/ot/ot-9*_*_e/ot/ot)/27,st=(_-_e*_e/3/ot)/ot,ct=2*Math.sqrt(-st/3),ft=3*bt/st/ct,Math.abs(ft)>1&&(ft>=0?ft=1:ft=-1),mt=Math.acos(ft)/3,o.y>=0?s=(-ct*Math.cos(mt+Math.PI/3)-_e/3/ot)*Math.PI:s=-(-ct*Math.cos(mt+Math.PI/3)-_e/3/ot)*Math.PI,Math.abs(a)<EPSLN?e=this.long0:e=adjust_lon(this.long0+Math.PI*(b-1+Math.sqrt(1+2*(a*a-d*d)+b*b))/2/a),o.x=e,o.y=s,o}var names$9=["Van_der_Grinten_I","VanDerGrinten","vandg"];const vandg={init:init$c,forward:forward$8,inverse:inverse$8,names:names$9};function init$b(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$7(o){var e=o.x,s=o.y,a=Math.sin(o.y),d=Math.cos(o.y),b=adjust_lon(e-this.long0),_,_e,ot,st,ct,ft,mt,bt,wt,Ct,Rt,It,Pt,Tt,Gt,Jt,qt,Nt,Qt,fn,Mn,ln,Wt;return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(o.x=this.x0+this.a*(HALF_PI-s)*Math.sin(b),o.y=this.y0-this.a*(HALF_PI-s)*Math.cos(b),o):Math.abs(this.sin_p12+1)<=EPSLN?(o.x=this.x0+this.a*(HALF_PI+s)*Math.sin(b),o.y=this.y0+this.a*(HALF_PI+s)*Math.cos(b),o):(Nt=this.sin_p12*a+this.cos_p12*d*Math.cos(b),Jt=Math.acos(Nt),qt=Jt?Jt/Math.sin(Jt):1,o.x=this.x0+this.a*qt*d*Math.sin(b),o.y=this.y0+this.a*qt*(this.cos_p12*a-this.sin_p12*d*Math.cos(b)),o):(_=e0fn(this.es),_e=e1fn(this.es),ot=e2fn(this.es),st=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(ct=this.a*mlfn(_,_e,ot,st,HALF_PI),ft=this.a*mlfn(_,_e,ot,st,s),o.x=this.x0+(ct-ft)*Math.sin(b),o.y=this.y0-(ct-ft)*Math.cos(b),o):Math.abs(this.sin_p12+1)<=EPSLN?(ct=this.a*mlfn(_,_e,ot,st,HALF_PI),ft=this.a*mlfn(_,_e,ot,st,s),o.x=this.x0+(ct+ft)*Math.sin(b),o.y=this.y0+(ct+ft)*Math.cos(b),o):(mt=a/d,bt=gN(this.a,this.e,this.sin_p12),wt=gN(this.a,this.e,a),Ct=Math.atan((1-this.es)*mt+this.es*bt*this.sin_p12/(wt*d)),Rt=Math.atan2(Math.sin(b),this.cos_p12*Math.tan(Ct)-this.sin_p12*Math.cos(b)),Rt===0?Qt=Math.asin(this.cos_p12*Math.sin(Ct)-this.sin_p12*Math.cos(Ct)):Math.abs(Math.abs(Rt)-Math.PI)<=EPSLN?Qt=-Math.asin(this.cos_p12*Math.sin(Ct)-this.sin_p12*Math.cos(Ct)):Qt=Math.asin(Math.sin(b)*Math.cos(Ct)/Math.sin(Rt)),It=this.e*this.sin_p12/Math.sqrt(1-this.es),Pt=this.e*this.cos_p12*Math.cos(Rt)/Math.sqrt(1-this.es),Tt=It*Pt,Gt=Pt*Pt,fn=Qt*Qt,Mn=fn*Qt,ln=Mn*Qt,Wt=ln*Qt,Jt=bt*Qt*(1-fn*Gt*(1-Gt)/6+Mn/8*Tt*(1-2*Gt)+ln/120*(Gt*(4-7*Gt)-3*It*It*(1-7*Gt))-Wt/48*Tt),o.x=this.x0+Jt*Math.sin(Rt),o.y=this.y0+Jt*Math.cos(Rt),o))}function inverse$7(o){o.x-=this.x0,o.y-=this.y0;var e,s,a,d,b,_,_e,ot,st,ct,ft,mt,bt,wt,Ct,Rt,It,Pt,Tt,Gt,Jt,qt,Nt,Qt;return this.sphere?(e=Math.sqrt(o.x*o.x+o.y*o.y),e>2*HALF_PI*this.a?void 0:(s=e/this.a,a=Math.sin(s),d=Math.cos(s),b=this.long0,Math.abs(e)<=EPSLN?_=this.lat0:(_=asinz(d*this.sin_p12+o.y*a*this.cos_p12/e),_e=Math.abs(this.lat0)-HALF_PI,Math.abs(_e)<=EPSLN?this.lat0>=0?b=adjust_lon(this.long0+Math.atan2(o.x,-o.y)):b=adjust_lon(this.long0-Math.atan2(-o.x,o.y)):b=adjust_lon(this.long0+Math.atan2(o.x*a,e*this.cos_p12*d-o.y*this.sin_p12*a))),o.x=b,o.y=_,o)):(ot=e0fn(this.es),st=e1fn(this.es),ct=e2fn(this.es),ft=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(mt=this.a*mlfn(ot,st,ct,ft,HALF_PI),e=Math.sqrt(o.x*o.x+o.y*o.y),bt=mt-e,_=imlfn(bt/this.a,ot,st,ct,ft),b=adjust_lon(this.long0+Math.atan2(o.x,-1*o.y)),o.x=b,o.y=_,o):Math.abs(this.sin_p12+1)<=EPSLN?(mt=this.a*mlfn(ot,st,ct,ft,HALF_PI),e=Math.sqrt(o.x*o.x+o.y*o.y),bt=e-mt,_=imlfn(bt/this.a,ot,st,ct,ft),b=adjust_lon(this.long0+Math.atan2(o.x,o.y)),o.x=b,o.y=_,o):(e=Math.sqrt(o.x*o.x+o.y*o.y),Rt=Math.atan2(o.x,o.y),wt=gN(this.a,this.e,this.sin_p12),It=Math.cos(Rt),Pt=this.e*this.cos_p12*It,Tt=-Pt*Pt/(1-this.es),Gt=3*this.es*(1-Tt)*this.sin_p12*this.cos_p12*It/(1-this.es),Jt=e/wt,qt=Jt-Tt*(1+Tt)*Math.pow(Jt,3)/6-Gt*(1+3*Tt)*Math.pow(Jt,4)/24,Nt=1-Tt*qt*qt/2-Jt*qt*qt*qt/6,Ct=Math.asin(this.sin_p12*Math.cos(qt)+this.cos_p12*Math.sin(qt)*It),b=adjust_lon(this.long0+Math.asin(Math.sin(Rt)*Math.sin(qt)/Math.cos(Ct))),Qt=Math.sin(Ct),_=Math.atan2((Qt-this.es*Nt*this.sin_p12)*Math.tan(Ct),Qt*(1-this.es)),o.x=b,o.y=_,o))}var names$8=["Azimuthal_Equidistant","aeqd"];const aeqd={init:init$b,forward:forward$7,inverse:inverse$7,names:names$8};function init$a(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$6(o){var e,s,a,d,b,_,_e,ot,st=o.x,ct=o.y;return a=adjust_lon(st-this.long0),e=Math.sin(ct),s=Math.cos(ct),d=Math.cos(a),_=this.sin_p14*e+this.cos_p14*s*d,b=1,(_>0||Math.abs(_)<=EPSLN)&&(_e=this.a*b*s*Math.sin(a),ot=this.y0+this.a*b*(this.cos_p14*e-this.sin_p14*s*d)),o.x=_e,o.y=ot,o}function inverse$6(o){var e,s,a,d,b,_,_e;return o.x-=this.x0,o.y-=this.y0,e=Math.sqrt(o.x*o.x+o.y*o.y),s=asinz(e/this.a),a=Math.sin(s),d=Math.cos(s),_=this.long0,Math.abs(e)<=EPSLN?(_e=this.lat0,o.x=_,o.y=_e,o):(_e=asinz(d*this.sin_p14+o.y*a*this.cos_p14/e),b=Math.abs(this.lat0)-HALF_PI,Math.abs(b)<=EPSLN?(this.lat0>=0?_=adjust_lon(this.long0+Math.atan2(o.x,-o.y)):_=adjust_lon(this.long0-Math.atan2(-o.x,o.y)),o.x=_,o.y=_e,o):(_=adjust_lon(this.long0+Math.atan2(o.x*a,e*this.cos_p14*d-o.y*this.sin_p14*a)),o.x=_,o.y=_e,o))}var names$7=["ortho"];const ortho={init:init$a,forward:forward$6,inverse:inverse$6,names:names$7};var FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$9(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$5(o){var e={x:0,y:0},s,a,d,b,_,_e,ot={value:0};if(o.x-=this.long0,this.es!==0?s=Math.atan(this.one_minus_f_squared*Math.tan(o.y)):s=o.y,a=o.x,this.face===FACE_ENUM.TOP)b=HALF_PI-s,a>=FORTPI&&a<=HALF_PI+FORTPI?(ot.value=AREA_ENUM.AREA_0,d=a-HALF_PI):a>HALF_PI+FORTPI||a<=-(HALF_PI+FORTPI)?(ot.value=AREA_ENUM.AREA_1,d=a>0?a-SPI:a+SPI):a>-(HALF_PI+FORTPI)&&a<=-FORTPI?(ot.value=AREA_ENUM.AREA_2,d=a+HALF_PI):(ot.value=AREA_ENUM.AREA_3,d=a);else if(this.face===FACE_ENUM.BOTTOM)b=HALF_PI+s,a>=FORTPI&&a<=HALF_PI+FORTPI?(ot.value=AREA_ENUM.AREA_0,d=-a+HALF_PI):a<FORTPI&&a>=-FORTPI?(ot.value=AREA_ENUM.AREA_1,d=-a):a<-FORTPI&&a>=-(HALF_PI+FORTPI)?(ot.value=AREA_ENUM.AREA_2,d=-a-HALF_PI):(ot.value=AREA_ENUM.AREA_3,d=a>0?-a+SPI:-a-SPI);else{var st,ct,ft,mt,bt,wt,Ct;this.face===FACE_ENUM.RIGHT?a=qsc_shift_lon_origin(a,+HALF_PI):this.face===FACE_ENUM.BACK?a=qsc_shift_lon_origin(a,+SPI):this.face===FACE_ENUM.LEFT&&(a=qsc_shift_lon_origin(a,-HALF_PI)),mt=Math.sin(s),bt=Math.cos(s),wt=Math.sin(a),Ct=Math.cos(a),st=bt*Ct,ct=bt*wt,ft=mt,this.face===FACE_ENUM.FRONT?(b=Math.acos(st),d=qsc_fwd_equat_face_theta(b,ft,ct,ot)):this.face===FACE_ENUM.RIGHT?(b=Math.acos(ct),d=qsc_fwd_equat_face_theta(b,ft,-st,ot)):this.face===FACE_ENUM.BACK?(b=Math.acos(-st),d=qsc_fwd_equat_face_theta(b,ft,-ct,ot)):this.face===FACE_ENUM.LEFT?(b=Math.acos(-ct),d=qsc_fwd_equat_face_theta(b,ft,st,ot)):(b=d=0,ot.value=AREA_ENUM.AREA_0)}return _e=Math.atan(12/SPI*(d+Math.acos(Math.sin(d)*Math.cos(FORTPI))-HALF_PI)),_=Math.sqrt((1-Math.cos(b))/(Math.cos(_e)*Math.cos(_e))/(1-Math.cos(Math.atan(1/Math.cos(d))))),ot.value===AREA_ENUM.AREA_1?_e+=HALF_PI:ot.value===AREA_ENUM.AREA_2?_e+=SPI:ot.value===AREA_ENUM.AREA_3&&(_e+=1.5*SPI),e.x=_*Math.cos(_e),e.y=_*Math.sin(_e),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,o.x=e.x,o.y=e.y,o}function inverse$5(o){var e={lam:0,phi:0},s,a,d,b,_,_e,ot,st,ct,ft={value:0};if(o.x=(o.x-this.x0)/this.a,o.y=(o.y-this.y0)/this.a,a=Math.atan(Math.sqrt(o.x*o.x+o.y*o.y)),s=Math.atan2(o.y,o.x),o.x>=0&&o.x>=Math.abs(o.y)?ft.value=AREA_ENUM.AREA_0:o.y>=0&&o.y>=Math.abs(o.x)?(ft.value=AREA_ENUM.AREA_1,s-=HALF_PI):o.x<0&&-o.x>=Math.abs(o.y)?(ft.value=AREA_ENUM.AREA_2,s=s<0?s+SPI:s-SPI):(ft.value=AREA_ENUM.AREA_3,s+=HALF_PI),ct=SPI/12*Math.tan(s),_=Math.sin(ct)/(Math.cos(ct)-1/Math.sqrt(2)),_e=Math.atan(_),d=Math.cos(s),b=Math.tan(a),ot=1-d*d*b*b*(1-Math.cos(Math.atan(1/Math.cos(_e)))),ot<-1?ot=-1:ot>1&&(ot=1),this.face===FACE_ENUM.TOP)st=Math.acos(ot),e.phi=HALF_PI-st,ft.value===AREA_ENUM.AREA_0?e.lam=_e+HALF_PI:ft.value===AREA_ENUM.AREA_1?e.lam=_e<0?_e+SPI:_e-SPI:ft.value===AREA_ENUM.AREA_2?e.lam=_e-HALF_PI:e.lam=_e;else if(this.face===FACE_ENUM.BOTTOM)st=Math.acos(ot),e.phi=st-HALF_PI,ft.value===AREA_ENUM.AREA_0?e.lam=-_e+HALF_PI:ft.value===AREA_ENUM.AREA_1?e.lam=-_e:ft.value===AREA_ENUM.AREA_2?e.lam=-_e-HALF_PI:e.lam=_e<0?-_e-SPI:-_e+SPI;else{var mt,bt,wt;mt=ot,ct=mt*mt,ct>=1?wt=0:wt=Math.sqrt(1-ct)*Math.sin(_e),ct+=wt*wt,ct>=1?bt=0:bt=Math.sqrt(1-ct),ft.value===AREA_ENUM.AREA_1?(ct=bt,bt=-wt,wt=ct):ft.value===AREA_ENUM.AREA_2?(bt=-bt,wt=-wt):ft.value===AREA_ENUM.AREA_3&&(ct=bt,bt=wt,wt=-ct),this.face===FACE_ENUM.RIGHT?(ct=mt,mt=-bt,bt=ct):this.face===FACE_ENUM.BACK?(mt=-mt,bt=-bt):this.face===FACE_ENUM.LEFT&&(ct=mt,mt=bt,bt=-ct),e.phi=Math.acos(-wt)-HALF_PI,e.lam=Math.atan2(bt,mt),this.face===FACE_ENUM.RIGHT?e.lam=qsc_shift_lon_origin(e.lam,-HALF_PI):this.face===FACE_ENUM.BACK?e.lam=qsc_shift_lon_origin(e.lam,-SPI):this.face===FACE_ENUM.LEFT&&(e.lam=qsc_shift_lon_origin(e.lam,+HALF_PI))}if(this.es!==0){var Ct,Rt,It;Ct=e.phi<0?1:0,Rt=Math.tan(e.phi),It=this.b/Math.sqrt(Rt*Rt+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-It*It)/(this.one_minus_f*It)),Ct&&(e.phi=-e.phi)}return e.lam+=this.long0,o.x=e.lam,o.y=e.phi,o}function qsc_fwd_equat_face_theta(o,e,s,a){var d;return o<EPSLN?(a.value=AREA_ENUM.AREA_0,d=0):(d=Math.atan2(e,s),Math.abs(d)<=FORTPI?a.value=AREA_ENUM.AREA_0:d>FORTPI&&d<=HALF_PI+FORTPI?(a.value=AREA_ENUM.AREA_1,d-=HALF_PI):d>HALF_PI+FORTPI||d<=-(HALF_PI+FORTPI)?(a.value=AREA_ENUM.AREA_2,d=d>=0?d-SPI:d+SPI):(a.value=AREA_ENUM.AREA_3,d+=HALF_PI)),d}function qsc_shift_lon_origin(o,e){var s=o+e;return s<-SPI?s+=TWO_PI:s>+SPI&&(s-=TWO_PI),s}var names$6=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const qsc={init:init$9,forward:forward$5,inverse:inverse$5,names:names$6};var COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(o,e){return o[0]+e*(o[1]+e*(o[2]+e*o[3]))},poly3_der=function(o,e){return o[1]+e*(2*o[2]+e*3*o[3])};function newton_rapshon(o,e,s,a){for(var d=e;a;--a){var b=o(d);if(d-=b,Math.abs(b)<s)break}return d}function init$8(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$4(o){var e=adjust_lon(o.x-this.long0),s=Math.abs(o.y),a=Math.floor(s*C1);a<0?a=0:a>=NODES&&(a=NODES-1),s=R2D*(s-RC1*a);var d={x:poly3_val(COEFS_X[a],s)*e,y:poly3_val(COEFS_Y[a],s)};return o.y<0&&(d.y=-d.y),d.x=d.x*this.a*FXC+this.x0,d.y=d.y*this.a*FYC+this.y0,d}function inverse$4(o){var e={x:(o.x-this.x0)/(this.a*FXC),y:Math.abs(o.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=o.y<0?-HALF_PI:HALF_PI;else{var s=Math.floor(e.y*NODES);for(s<0?s=0:s>=NODES&&(s=NODES-1);;)if(COEFS_Y[s][0]>e.y)--s;else if(COEFS_Y[s+1][0]<=e.y)++s;else break;var a=COEFS_Y[s],d=5*(e.y-a[0])/(COEFS_Y[s+1][0]-a[0]);d=newton_rapshon(function(b){return(poly3_val(a,b)-e.y)/poly3_der(a,b)},d,EPSLN,100),e.x/=poly3_val(COEFS_X[s],d),e.y=(5*s+d)*D2R$1,o.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$5=["Robinson","robin"];const robin={init:init$8,forward:forward$4,inverse:inverse$4,names:names$5};function init$7(){this.name="geocent"}function forward$3(o){var e=geodeticToGeocentric(o,this.es,this.a);return e}function inverse$3(o){var e=geocentricToGeodetic(o,this.es,this.a,this.b);return e}var names$4=["Geocentric","geocentric","geocent","Geocent"];const geocent={init:init$7,forward:forward$3,inverse:inverse$3,names:names$4};var mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$6(){if(Object.keys(params).forEach((function(s){if(typeof this[s]>"u")this[s]=params[s].def;else{if(params[s].num&&isNaN(this[s]))throw new Error("Invalid parameter value, must be numeric "+s+" = "+this[s]);params[s].num&&(this[s]=parseFloat(this[s]))}params[s].degrees&&(this[s]=this[s]*D2R$1)}).bind(this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this.mode=mode.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var o=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(o),this.sw=Math.sin(o)}function forward$2(o){o.x-=this.long0;var e=Math.sin(o.y),s=Math.cos(o.y),a=Math.cos(o.x),d,b;switch(this.mode){case mode.OBLIQ:b=this.sinph0*e+this.cosph0*s*a;break;case mode.EQUIT:b=s*a;break;case mode.S_POLE:b=-e;break;case mode.N_POLE:b=e;break}switch(b=this.pn1/(this.p-b),d=b*s*Math.sin(o.x),this.mode){case mode.OBLIQ:b*=this.cosph0*e-this.sinph0*s*a;break;case mode.EQUIT:b*=e;break;case mode.N_POLE:b*=-(s*a);break;case mode.S_POLE:b*=s*a;break}var _,_e;return _=b*this.cg+d*this.sg,_e=1/(_*this.sw*this.h1+this.cw),d=(d*this.cg-b*this.sg)*this.cw*_e,b=_*_e,o.x=d*this.a,o.y=b*this.a,o}function inverse$2(o){o.x/=this.a,o.y/=this.a;var e={x:o.x,y:o.y},s,a,d;d=1/(this.pn1-o.y*this.sw),s=this.pn1*o.x*d,a=this.pn1*o.y*this.cw*d,o.x=s*this.cg+a*this.sg,o.y=a*this.cg-s*this.sg;var b=hypot(o.x,o.y);if(Math.abs(b)<EPSLN)e.x=0,e.y=o.y;else{var _,_e;switch(_e=1-b*b*this.pfact,_e=(this.p-Math.sqrt(_e))/(this.pn1/b+b/this.pn1),_=Math.sqrt(1-_e*_e),this.mode){case mode.OBLIQ:e.y=Math.asin(_*this.sinph0+o.y*_e*this.cosph0/b),o.y=(_-this.sinph0*Math.sin(e.y))*b,o.x*=_e*this.cosph0;break;case mode.EQUIT:e.y=Math.asin(o.y*_e/b),o.y=_*b,o.x*=_e;break;case mode.N_POLE:e.y=Math.asin(_),o.y=-o.y;break;case mode.S_POLE:e.y=-Math.asin(_);break}e.x=Math.atan2(o.x,o.y)}return o.x=e.x+this.long0,o.y=e.y,o}var names$3=["Tilted_Perspective","tpers"];const tpers={init:init$6,forward:forward$2,inverse:inverse$2,names:names$3};function init$5(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var o=1-this.es,e=1/o;this.radius_p=Math.sqrt(o),this.radius_p2=o,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function forward$1(o){var e=o.x,s=o.y,a,d,b,_;if(e=e-this.long0,this.shape==="ellipse"){s=Math.atan(this.radius_p2*Math.tan(s));var _e=this.radius_p/hypot(this.radius_p*Math.cos(s),Math.sin(s));if(d=_e*Math.cos(e)*Math.cos(s),b=_e*Math.sin(e)*Math.cos(s),_=_e*Math.sin(s),(this.radius_g-d)*d-b*b-_*_*this.radius_p_inv2<0)return o.x=Number.NaN,o.y=Number.NaN,o;a=this.radius_g-d,this.flip_axis?(o.x=this.radius_g_1*Math.atan(b/hypot(_,a)),o.y=this.radius_g_1*Math.atan(_/a)):(o.x=this.radius_g_1*Math.atan(b/a),o.y=this.radius_g_1*Math.atan(_/hypot(b,a)))}else this.shape==="sphere"&&(a=Math.cos(s),d=Math.cos(e)*a,b=Math.sin(e)*a,_=Math.sin(s),a=this.radius_g-d,this.flip_axis?(o.x=this.radius_g_1*Math.atan(b/hypot(_,a)),o.y=this.radius_g_1*Math.atan(_/a)):(o.x=this.radius_g_1*Math.atan(b/a),o.y=this.radius_g_1*Math.atan(_/hypot(b,a))));return o.x=o.x*this.a,o.y=o.y*this.a,o}function inverse$1(o){var e=-1,s=0,a=0,d,b,_,_e;if(o.x=o.x/this.a,o.y=o.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(o.y/this.radius_g_1),s=Math.tan(o.x/this.radius_g_1)*hypot(1,a)):(s=Math.tan(o.x/this.radius_g_1),a=Math.tan(o.y/this.radius_g_1)*hypot(1,s));var ot=a/this.radius_p;if(d=s*s+ot*ot+e*e,b=2*this.radius_g*e,_=b*b-4*d*this.C,_<0)return o.x=Number.NaN,o.y=Number.NaN,o;_e=(-b-Math.sqrt(_))/(2*d),e=this.radius_g+_e*e,s*=_e,a*=_e,o.x=Math.atan2(s,e),o.y=Math.atan(a*Math.cos(o.x)/e),o.y=Math.atan(this.radius_p_inv2*Math.tan(o.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(o.y/this.radius_g_1),s=Math.tan(o.x/this.radius_g_1)*Math.sqrt(1+a*a)):(s=Math.tan(o.x/this.radius_g_1),a=Math.tan(o.y/this.radius_g_1)*Math.sqrt(1+s*s)),d=s*s+a*a+e*e,b=2*this.radius_g*e,_=b*b-4*d*this.C,_<0)return o.x=Number.NaN,o.y=Number.NaN,o;_e=(-b-Math.sqrt(_))/(2*d),e=this.radius_g+_e*e,s*=_e,a*=_e,o.x=Math.atan2(s,e),o.y=Math.atan(a*Math.cos(o.x)/e)}return o.x=o.x+this.long0,o}var names$2=["Geostationary Satellite View","Geostationary_Satellite","geos"];const geos={init:init$5,forward:forward$1,inverse:inverse$1,names:names$2};var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=Math.sqrt(3)/2;function init$4(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function forward(o){var e=adjust_lon(o.x-this.long0),s=o.y,a=Math.asin(M*Math.sin(s)),d=a*a,b=d*d*d;return o.x=e*Math.cos(a)/(M*(A1+3*A2*d+b*(7*A3+9*A4*d))),o.y=a*(A1+A2*d+b*(A3+A4*d)),o.x=this.a*o.x+this.x0,o.y=this.a*o.y+this.y0,o}function inverse(o){o.x=(o.x-this.x0)/this.a,o.y=(o.y-this.y0)/this.a;var e=1e-9,s=12,a=o.y,d,b,_,_e,ot,st;for(st=0;st<s&&(d=a*a,b=d*d*d,_=a*(A1+A2*d+b*(A3+A4*d))-o.y,_e=A1+3*A2*d+b*(7*A3+9*A4*d),a-=ot=_/_e,!(Math.abs(ot)<e));++st);return d=a*a,b=d*d*d,o.x=M*o.x*(A1+3*A2*d+b*(7*A3+9*A4*d))/Math.cos(a),o.y=Math.asin(Math.sin(a)/M),o.x=adjust_lon(o.x+this.long0),o}var names$1=["eqearth","Equal Earth","Equal_Earth"];const eqearth={init:init$4,forward,inverse,names:names$1};var EPS10=1e-10;function init$3(){var o;if(this.phi1=this.lat1,Math.abs(this.phi1)<EPS10)throw new Error;this.es?(this.en=pj_enfn(this.es),this.m1=pj_mlfn(this.phi1,this.am1=Math.sin(this.phi1),o=Math.cos(this.phi1),this.en),this.am1=o/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=e_inv,this.forward=e_fwd):(Math.abs(this.phi1)+EPS10>=HALF_PI?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=s_inv,this.forward=s_fwd)}function e_fwd(o){var e=adjust_lon(o.x-(this.long0||0)),s=o.y,a,d,b;return a=this.am1+this.m1-pj_mlfn(s,d=Math.sin(s),b=Math.cos(s),this.en),d=b*e/(a*Math.sqrt(1-this.es*d*d)),o.x=a*Math.sin(d),o.y=this.am1-a*Math.cos(d),o.x=this.a*o.x+(this.x0||0),o.y=this.a*o.y+(this.y0||0),o}function e_inv(o){o.x=(o.x-(this.x0||0))/this.a,o.y=(o.y-(this.y0||0))/this.a;var e,s,a,d;if(s=hypot(o.x,o.y=this.am1-o.y),d=pj_inv_mlfn(this.am1+this.m1-s,this.es,this.en),(e=Math.abs(d))<HALF_PI)e=Math.sin(d),a=s*Math.atan2(o.x,o.y)*Math.sqrt(1-this.es*e*e)/Math.cos(d);else if(Math.abs(e-HALF_PI)<=EPS10)a=0;else throw new Error;return o.x=adjust_lon(a+(this.long0||0)),o.y=adjust_lat(d),o}function s_fwd(o){var e=adjust_lon(o.x-(this.long0||0)),s=o.y,a,d;return d=this.cphi1+this.phi1-s,Math.abs(d)>EPS10?(o.x=d*Math.sin(a=e*Math.cos(s)/d),o.y=this.cphi1-d*Math.cos(a)):o.x=o.y=0,o.x=this.a*o.x+(this.x0||0),o.y=this.a*o.y+(this.y0||0),o}function s_inv(o){o.x=(o.x-(this.x0||0))/this.a,o.y=(o.y-(this.y0||0))/this.a;var e,s,a=hypot(o.x,o.y=this.cphi1-o.y);if(s=this.cphi1+this.phi1-a,Math.abs(s)>HALF_PI)throw new Error;return Math.abs(Math.abs(s)-HALF_PI)<=EPS10?e=0:e=a*Math.atan2(o.x,o.y)/Math.cos(s),o.x=adjust_lon(e+(this.long0||0)),o.y=adjust_lat(s),o}var names=["bonne","Bonne (Werner lat_1=90)"];const bonne={init:init$3,names};function includedProjections(o){o.Proj.projections.add(tmerc),o.Proj.projections.add(etmerc),o.Proj.projections.add(utm),o.Proj.projections.add(sterea),o.Proj.projections.add(stere),o.Proj.projections.add(somerc),o.Proj.projections.add(omerc),o.Proj.projections.add(lcc),o.Proj.projections.add(krovak),o.Proj.projections.add(cass),o.Proj.projections.add(laea),o.Proj.projections.add(aea),o.Proj.projections.add(gnom),o.Proj.projections.add(cea),o.Proj.projections.add(eqc),o.Proj.projections.add(poly),o.Proj.projections.add(nzmg),o.Proj.projections.add(mill),o.Proj.projections.add(sinu),o.Proj.projections.add(moll),o.Proj.projections.add(eqdc),o.Proj.projections.add(vandg),o.Proj.projections.add(aeqd),o.Proj.projections.add(ortho),o.Proj.projections.add(qsc),o.Proj.projections.add(robin),o.Proj.projections.add(geocent),o.Proj.projections.add(tpers),o.Proj.projections.add(geos),o.Proj.projections.add(eqearth),o.Proj.projections.add(bonne)}proj4.defaultDatum="WGS84";proj4.Proj=Projection;proj4.WGS84=new proj4.Proj("WGS84");proj4.Point=Point;proj4.toPoint=common;proj4.defs=defs;proj4.nadgrid=nadgrid;proj4.transform=transform;proj4.mgrs=mgrs;proj4.version="__VERSION__";includedProjections(proj4);var logger$2=LoggerByDefault$1.getLogger("CRS");function register(o){const e=Object.keys(o.defs);logger$2.trace("proj. codes :",e);const s=e.length;let a,d;for(a=0;a<s;++a){const b=e[a];if(!get$3(b)){const _=o.defs(b);addProjection(new Projection$1({code:b,axisOrientation:_.axis,metersPerUnit:_.to_meter,units:_.units}))}}for(a=0;a<s;++a){const b=e[a],_=get$3(b);for(d=0;d<s;++d){const _e=e[d],ot=get$3(_e);if(!get$4(b,_e))if(o.defs[b]===o.defs[_e])addEquivalentProjections([_,ot]);else{const st=o(b,_e);addCoordinateTransforms(_,ot,st.forward,st.inverse)}}}}var Register={isLoaded:!1,get:function(o){if(!(o===""||o===null||typeof o>"u")){var e=o.split(":");if(e.length===2){var s=e[0],a=e[1];if(this.hasOwnProperty(s)&&this[s].hasOwnProperty(a))return this[s][a]}}},exist:function(o){if(o===""||o===null||typeof o>"u")return!1;var e=o.split(":");if(e.length!==2)return!1;var s=e[0],a=e[1];return!(!this.hasOwnProperty(s)||!this[s].hasOwnProperty(a))},load:function(o){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],s=0;s<e.length;s++){var a=e[s],d=this[a];for(var b in d)if(d.hasOwnProperty(b)){var _=a+":"+b;o.defs(_,this.get(_))}}this.isLoaded=!0}},loadByDefault:function(o){var e={EPSG:{2154:Register.EPSG[2154],27571:Register.EPSG[27571],27572:Register.EPSG[27572],27573:Register.EPSG[27573],27574:Register.EPSG[27574]},CRS:{84:Register.CRS[84]},IGNF:{LAMB93:Register.IGNF.LAMB93,LAMBE:Register.IGNF.LAMBE,LAMB1:Register.IGNF.LAMB1,LAMB2:Register.IGNF.LAMB2,LAMB3:Register.IGNF.LAMB3,LAMB4:Register.IGNF.LAMB4,RGF93G:Register.IGNF.RGF93G,WGS84G:Register.IGNF.WGS84G}};for(var s in e)if(e.hasOwnProperty(s)){var a=e[s];for(var d in a)if(a.hasOwnProperty(d)){var b=s+":"+d;o.defs(b,a[d])}}},loadByName:function(o,e){if(!this.exist(e))return!1;try{o.defs(e,this.get(e))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},logger$1=LoggerByDefault$1.getLogger("CRS"),CRS={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(logger$1.trace("Loading custom definitions projections"),!Register.isLoaded){Register.load(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(o){logger$1.error(o)}}},loadByDefault:function(){if(logger$1.trace("Loading custom definitions projections by default"),!Register.isLoaded){Register.loadByDefault(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(o){logger$1.error(o)}}},loadByName:function(o){if(logger$1.trace("Loading a custom definition projection : ",o),!Register.isLoaded){Register.loadByName(proj4,o);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(e){logger$1.error(e)}}},overload:function(){logger$1.trace("Loading projections aera (extent)");for(var o in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(o)){var e=this.projectionsExtent[o],s=get$3(o),a=getTransform("EPSG:4326",s),d=applyTransform([e.bottom,e.right,e.top,e.left],a);s.setExtent(d),addProjection(s),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(s)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register);let m_suggestions=[],controller=new AbortController,m_index="geoplateforme",m_fields="title,layer_name",m_size="1000",m_maximumResponses=5,m_filterByService=["WMTS","TMS"],m_filterByProjection=[],m_filterByTMS=["ADMIN_EXPRESS","ISOHYPSE","PLAN.IGN","OCSGE_2016","OCSGE_2019","PCI","BDTOPO"],m_url=`https://data.geopf.fr/recherche/api/indexes/${m_index}/suggest`;const target=new EventTarget,suggest=async o=>{clear(),controller=new AbortController;let e=new URL(m_url),s={text:o,fields:m_fields,size:m_size};Object.keys(s).forEach(ot=>e.searchParams.append(ot,s[ot]));var a=await fetch(e,{}),d=await a.json();if(a.status!==200)throw new Error(a.message);if(!(!d||d.length===0)){for(let ot=0;ot<d.length;ot++){const st=d[ot];var b=st.source.type==="WMTS"||st.source.type==="TMS"?10:0;d[ot].score+=b}d.sort((ot,st)=>st.score-ot.score);for(let ot=0;ot<d.length;ot++){const st=d[ot];var _=m_filterByService.length===0||m_filterByService.includes(st.source.type);if(_){if(unique$1().length>=m_maximumResponses)break;var _e={originators:st.source.attribution||{},srs:st.source.srs||[],keywords:st.source.keywords||[],extent:st.source.extent||{},metadata:st.source.metadata_urls||[],name:st.source.layer_name,title:st.source.title,description:st.source.description,service:st.source.type,url:st.source.url};if(m_filterByTMS.length&&(_e.service==="WMTS"&&m_filterByTMS.includes(_e.name)||_e.service==="TMS"&&!m_filterByTMS.includes(_e.name))||m_filterByProjection.length&&m_filterByProjection.includes(_e.srs[0]))continue;m_suggestions.push(_e)}}return target.dispatchEvent(new CustomEvent("suggest",{bubbles:!0,detail:getSuggestions()})),getSuggestions()}},unique$1=()=>m_suggestions.filter((o,e,s)=>e===s.findIndex(a=>a.service===o.service&&a.name===o.name&&a.title===o.title&&a.description===o.description)),clear=()=>{controller.abort(),m_suggestions=[]},getSuggestions=()=>unique$1(),getNames=()=>unique$1().map(o=>o.name),getTitles=()=>unique$1().map(o=>o.title),setIndex=o=>{m_index=o},setFields=o=>{m_fields=o},setSize=o=>{m_size=parseInt(o)},setUrl=value=>{m_url=eval("`"+value+"`")},setMaximumResponses=o=>{m_maximumResponses=parseInt(o)},setFiltersByService=o=>{m_filterByService=o===""?[]:o.split(",")},setFiltersByProjection=o=>{m_filterByProjection=o===""?[]:o.split(",")},setFiltersByTMS=o=>{m_filterByTMS=o===""?[]:o.split(",")},updateFilterByTMS=async o=>{var e=o;e||(e="https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/vectorTileConfig/fullVectorTileConfig.json");const s=await fetch(e),a=await s.json();if(s.status!==200)throw new Error(s.message);if(!a)throw new Error("Liste vide !");var d=Object.keys(a.layers).map(b=>b.split("$")[0]);return d&&setFiltersByTMS(d.toString()),m_filterByTMS},Search={target,suggest,clear,getSuggestions,getNames,getTitles,setIndex,setFields,setSize,setUrl,setMaximumResponses,setFiltersByService,setFiltersByTMS,updateFilterByTMS,setFiltersByProjection};var SearchEngineDOM={_addUID:function(o){var e=this._uid?o+"-"+this._uid:o;return e},_createMainContainerElement:function(){var o=document.createElement("div");return o.id=this._addUID("GPsearchEngine"),o.className="GPwidget gpf-widget",o},_createSearchDivElement:function(){var o=document.createElement("div");return o.id=this._addUID("GPshowSearchDiv"),o},_createShowSearchEnginePictoElement:function(o){var e=this;checkDsfr()&&(o=!0);var s=document.createElement("button");return s.id=this._addUID("GPshowSearchEnginePicto"),s.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchEnginePicto gpf-btn gpf-btn-icon-search fr-btn",s.title="Afficher/masquer la recherche par lieux",checkDsfr()&&(s.title="Rechercher"),s.setAttribute("tabindex","0"),s.setAttribute("aria-pressed",!o),s.disabled=!o,s.setAttribute("type","button"),s.addEventListener("click",function(a){if(checkDsfr()){var d=document.getElementById(e._addUID("GPautocompleteResults")),b=d.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),_=d.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),_e=_.length;if(!_e)return;var ot=null;b.length?ot=b[0]:(ot=_[0],ot.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",ot.style.color="#000000",ot.style["background-color"]="#CEDBEF"),ot.click();return}var st=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!st),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden");var ct=document.getElementById(e._addUID("GPshowAdvancedSearch"));ct&&(ct.style.display=null,document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"));var ft=document.getElementById(e._addUID("GPshowGeolocate"));ft&&(ft.style.display=null);var mt=document.getElementById(e._addUID("GPshowSearchByCoordinate"));mt&&(mt.style.display=null);var bt="#GPsearchInput-"+e._uid;document.querySelector(bt+" input").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+e._uid).disabled=!1),e.onShowSearchEngineClick(a)}),s},_createSearchInputElement:function(o){var e=this,s=document.createElement("form");s.id=this._addUID("GPsearchInput"),s.className="gpf-panel__content fr-modal__content",s.addEventListener("submit",function(d){return d.preventDefault(),document.getElementById(e._addUID("GPsearchInputText")).value===""||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),e.onGeocodingSearchSubmit(d)),!1});var a=document.createElement("input");return a.id=this._addUID("GPsearchInputText"),a.className="GPsearchInputText gpf-input fr-input",a.type="text",a.placeholder=o,a.autocomplete="off",a.addEventListener("keyup",function(d){var b=d.which||d.keyCode;b===13||b===10||b===38||b===40||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),a.value.length>2?(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(d))}),a.addEventListener("keydown",function(d){var b=d.which||d.keyCode;b===13&&d.preventDefault();var _=document.getElementById(e._addUID("GPautocompleteResults"));if(_){var _e=_.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),ot=_.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),st=ot.length;if(st){var ct=null;if(_e.length)ct=_e[0];else if(ct=ot[0],ct.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",ct.style.color="#000000",ct.style["background-color"]="#CEDBEF",b!==13)return;var ft=parseInt(SelectorID.index(ct.id),10),mt=ft===st-1?ot[0]:ot[ft+1],bt=ft===0?ot[st-1]:ot[ft-1];switch(ct.style["background-color"]="",ct.style.color="",bt.style["background-color"]="",bt.style.color="",mt.style["background-color"]="",mt.style.color="",b){case 38:ct.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",bt.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",bt.style.color="#000000",bt.style["background-color"]="#CEDBEF",ct.scrollIntoView();break;case 40:ct.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",mt.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",mt.style.color="#000000",mt.style["background-color"]="#CEDBEF",ct.scrollIntoView();break;case 13:d.preventDefault(),ct.click(d);break}ct.focus()}}}),s.appendChild(a),s},_createSearchResetElement:function(){var o=this,e=document.createElement("button");return e.id=this._addUID("GPsearchInputReset"),e.className="GPshowOpen GPsearchInputReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-search-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.setAttribute("aria-label","Supprimer la recherche"),e.addEventListener("click",function(s){document.getElementById(o._addUID("GPsearchInputText")).value="",document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),o.onSearchResetClick()}),e},_createButtonsElement:function(){var o=document.createElement("div");return o.className="GPbuttonsContainer",o},_createFirstLineWrapper:function(){var o=document.createElement("div");return o.className="GPsearchFirstLineWrapper",o},_createRadioContainer:function(){var o=document.createElement("div");return o.className="GPsearchRadioContainer",o},_createRadioElements:function(){var o=document.createElement("div");o.className="GPsearchRadioElements";var e=document.createElement("div");e.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var s=document.createElement("input");s.id=this._addUID("GPsearchSplitLocations"),s.type="radio",s.name="GPsearchSplit",s.value="address",s.checked=!0,e.appendChild(s);var a=document.createElement("label");a.className="gpf-label fr-label",a.htmlFor=this._addUID("GPsearchSplitLocations"),a.title="Adresses",a.innerHTML="Adresses",e.appendChild(a),s.addEventListener?s.addEventListener("change",function(){s.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}):s.attachEvent&&s.attachEvent("onchange",function(){s.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))});var d=document.createElement("div");d.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var b=document.createElement("input");b.id=this._addUID("GPsearchSplitData"),b.type="radio",b.name="GPsearchSplit",b.value="data",d.appendChild(b);var _=document.createElement("label");return _.className="gpf-label fr-label",_.htmlFor=this._addUID("GPsearchSplitData"),_.title="Cartes et donnes",_.innerHTML="Cartes et donnes",d.appendChild(_),b.addEventListener?b.addEventListener("change",function(){b.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden"))}):b.attachEvent&&b.attachEvent("onchange",function(){b.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}),o.appendChild(e),o.appendChild(d),[o,s,b]},_createShowAdvancedSearchElement:function(){var o=this,e=document.createElement("span");return e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowOpen  GPshowAdvancedSearch",e.innerText="Recherche avance",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(s){var a=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!a);var d="#GPsearchInput-"+o._uid;a?(document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(d+" input").disabled=!1,document.querySelector(d+" .GPsearchInputReset")&&(document.querySelector(d+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!1)):(document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(d+" input").disabled=!0,document.querySelector(d+" .GPsearchInputReset")&&(document.querySelector(d+" .GPsearchInputReset").disabled=!0),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!0)),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1)}),e},_createShowGeolocateElement:function(){var o=this,e=document.createElement("button");return e.id=this._addUID("GPshowGeolocate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowGeolocate gpf-btn gpf-btn-icon-search-geolocate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Activer la golocalisation",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(s){var a=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!a),o.onShowSearchGeolocateClick(s)}),e},_createShowSearchByCoordinateElement:function(){var o=this,e=document.createElement("button");return e.id=this._addUID("GPshowSearchByCoordinate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchByCoordinate gpf-btn gpf-btn-icon-search-coordinate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Ouvrir la recherche par coordonnes",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(s){var a=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!a);var d="#GPsearchInput-"+o._uid;a?(document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(d+" input").disabled=!1,document.querySelector(d+" .GPsearchInputReset").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!1)):(document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(d+" input").disabled=!0,document.querySelector(d+" .GPsearchInputReset").disabled=!0,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!0)),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1)}),e},_createAdvancedSearchPanelElement:function(){var o=document.createElement("dialog");return o.id=this._addUID("GPadvancedSearchPanel"),o.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",o},_createAdvancedSearchPanelDivElement:function(){var o=document.createElement("div");return o.className="gpf-panel__body fr-modal__body",o},_createGeocodeResultsElement:function(){var o=document.createElement("dialog");return o.id=this._addUID("GPgeocodeResultsList"),o.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",o.appendChild(this._createGeocodeResultsHeaderElement()),o},_createGeocodeResultsDivElement:function(){var o=document.createElement("div");return o.className="gpf-panel__body fr-modal__body",o},_createAutoCompleteElement:function(){var o=document.createElement("div");return o.id=this._addUID("GPautoCompleteList"),o.className="GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden ",o},_createCoordinateSearchPanelElement:function(){var o=document.createElement("dialog");return o.id=this._addUID("GPcoordinateSearchPanel"),o.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",o},_createCoordinateSearchPanelDivElement:function(){var o=document.createElement("div");return o.className="gpf-panel__body fr-modal__body",o},_createAutoCompleteListElement:function(){var o=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.className="",e.addEventListener?e.addEventListener("click",function(s){document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")},!1):e.attachEvent&&e.attachEvent("onclick",function(s){document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")}),e},_createAutoCompletedLocationContainer(){var o=document.createElement("select");return o.id=this._addUID("GPautocompleteResultsLocation"),o.className="GPelementHidden gpf-hidden gpf-select",o.size=6,o.autofocus=!0,o},_createAutoCompletedLocationTitleElement(){var o=document.getElementById(this._addUID("GPautocompleteResultsLocation")),e=document.createElement("option");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Lieux et adresses",o.appendChild(e)},_createAutoCompletedLocationElement:function(o,e){var s=this,a=document.getElementById(this._addUID("GPautocompleteResultsLocation")),d=document.createElement("option");d.id=this._addUID("AutoCompletedLocation_"+e),d.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine";var b=GeocodeUtils.getSuggestedLocationFreeform(o);d.innerHTML=b,d.title=b,d.addEventListener?d.addEventListener("click",function(_){s.onAutoCompletedResultsItemClick(_)},!1):d.attachEvent&&d.attachEvent("onclick",function(_){s.onAutoCompletedResultsItemClick(_)}),a.appendChild(d)},_createSearchedSuggestContainer(){var o=document.createElement("select");return o.id=this._addUID("GPautocompleteResultsSuggest"),o.className="GPelementHidden gpf-hidden gpf-select",o.size=6,o.autofocus=!0,o},_createSearchedSuggestTitleElement(){var o=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),e=document.createElement("option");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Cartes et donnes",o.appendChild(e)},_createSearchedSuggestElement:function(o,e){var s=this,a=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),d=document.createElement("option");d.id=this._addUID("AutoCompletedSuggest_"+e),d.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",d.innerHTML=o.title+" ("+o.service+")",d.dataset.layer=o.name,d.title=o.description,d.addEventListener?d.addEventListener("click",function(b){s.onSearchedResultsItemClick(b)},!1):d.attachEvent&&d.attachEvent("onclick",function(b){s.onSearchedResultsItemClick(b)}),a.appendChild(d)},_createAdvancedSearchPanelHeaderElement:function(){var o=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var s=document.createElement("div");s.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",s.innerHTML="Recherche avance",e.appendChild(s);var a=document.createElement("button");a.id=this._addUID("GPadvancedSearchClose"),a.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",a.title="Fermer la recherche avance",a.addEventListener?a.addEventListener("click",function(){var b="#GPsearchInput-"+o._uid;document.querySelector(b+" input").disabled=!1,document.querySelector(b+" .GPsearchInputReset")&&(document.querySelector(b+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!1),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")},!1):a.attachEvent&&a.attachEvent("onclick",function(){var b="#GPsearchInput-"+o._uid;document.querySelector(b+" input").disabled=!1,document.querySelector(b+" .GPsearchInputReset")&&(document.querySelector(b+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!1),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(o._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")});var d=document.createElement("span");return d.className="GPelementHidden gpf-visible",d.innerText="Fermer",a.appendChild(d),e.appendChild(a),e},_createAdvancedSearchPanelFormElement:function(o){var e=this,s=document.createElement("form");s.id=this._addUID("GPadvancedSearchForm"),s.className="gpf-panel__content fr-modal__content",s.addEventListener("submit",function(_){_.preventDefault();for(var _e=[],ot="#GPadvancedSearchFilters-"+e._uid,st=document.querySelectorAll(ot+" > div > div > input,select#category"),ct=0;ct<st.length;ct++){var ft=st[ct];_e.push({key:ft.name,value:ft.value})}return e.onGeocodingAdvancedSearchSubmit(_,_e),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),!1});var a=document.createElement("div");a.className="GPflexInput gpf-flex-column ";var d=document.createElement("label");d.className="GPadvancedSearchCodeLabel gpf-label fr-label",d.innerHTML="Recherche par",a.appendChild(d);var b=this._createAdvancedSearchFormCodeElement(o);return a.appendChild(b),s.appendChild(a),s},_createAdvancedSearchFormCodeElement:function(o){var e=this,s=document.createElement("select");s.id=this._addUID("GPadvancedSearchCode"),s.title="Choisir un type de recherche",s.className="GPadvancedSearchCode gpf-select fr-select",s.addEventListener("change",function(b){e.onGeocodingAdvancedSearchCodeChange(b)},!1),o||(o=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var a=0;a<o.length;a++){var d=document.createElement("option");d.value=o[a].id,d.text=o[a].title,s.appendChild(d)}return s},_createAdvancedSearchFormInputElement:function(){var o=document.createElement("input");return o.type="submit",o.id=this._addUID("GPadvancedSearchSubmit"),o.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",o.value="Chercher",o},_createAdvancedSearchFormFiltersElement:function(){var o=document.createElement("div");return o.id=this._addUID("GPadvancedSearchFilters"),o},_createAdvancedSearchFiltersTableElement:function(o,e){var s=document.createElement("div");return s.id=this._addUID(o),e||(s.style.display="none"),s},_createAdvancedSearchFiltersAttributElement:function(o){var e=null,s=o.name,a=o.title,d=o.description,b=o.code,_=o.value,_e=document.createElement("div");_e.className="GPflexInput gpf-flex-column ";var ot=document.createElement("label");if(ot.className="GPadvancedSearchFilterLabel gpf-label fr-label",ot.htmlFor=s,ot.title=d||a,ot.innerHTML=a,_e.appendChild(ot),s==="category"){var st=document.createElement("select");if(st.id=s,st.name=s,st.title=a,st.className="GPadvancedSearchFilterInput gpf-select fr-select",_&&Array.isArray(_))for(var ct=0;ct<_.length;ct++){var ft=document.createElement("option");ft.value=_[ct],ft.text=_[ct],st.appendChild(ft)}_e.appendChild(st)}else{var mt=document.createElement("input");if(mt.id=s,mt.className="GPadvancedSearchFilterInput gpf-input fr-input",mt.type="text",mt.name=s,_)if(Array.isArray(_)){var bt=s+"_list";mt.setAttribute("list",bt);var wt=document.createElement("datalist");wt.id=bt;for(var ct=0;ct<_.length;++ct){var ft=document.createElement("option");ft.value=_[ct],wt.appendChild(ft)}_e.appendChild(wt)}else mt.value=_;_e.appendChild(mt)}return e=document.getElementById(this._addUID(b)),e?e.appendChild(_e):e=_e,e},_createGeocodeResultsHeaderElement:function(){var o=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var s=document.createElement("div");s.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",s.innerHTML="Rsultats de la recherche",e.appendChild(s);var a=document.createElement("button");a.id=this._addUID("GPgeocodeResultsClose"),a.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",a.title="Fermer la fentre de rsultats",a.addEventListener?a.addEventListener("click",function(){document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")},!1):a.attachEvent&&a.attachEvent("onclick",function(){document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")});var d=document.createElement("span");return d.className="GPelementHidden gpf-visible",d.innerText="Fermer",a.appendChild(d),e.appendChild(a),e},_createGeocodeResultsListElement:function(){var o=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.className="gpf-panel__list",e.setAttribute("tabindex","0"),e.addEventListener?e.addEventListener("click",function(s){s.ctrlKey||(document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),o.onGeocodedResultsItemClick(s)},!1):e.attachEvent&&e.attachEvent("onclick",function(s){s.ctrlKey||(document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),o.onGeocodedResultsItemClick(s)}),e},_createGeocodedLocationElement:function(o,e){var s=document.getElementById(this._addUID("GPgeocodeResults")),a=document.createElement("div");a.id=this._addUID("GeocodedLocation_"+e),a.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",typeof o=="string"?a.innerHTML=o:a.innerHTML=GeocodeUtils.getGeocodedLocationFreeform(o),s.appendChild(a)},_createCoordinateSearchPanelHeaderElement(){var o=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var s=document.createElement("div");s.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",s.innerHTML="Recherche par coordonnes",e.appendChild(s);var a=document.createElement("button");a.id=this._addUID("GPcoordinateSearchClose"),a.className="GPpanelClose GPcoordinateSearchClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",a.title="Fermer la recherche par coordonnes",a.addEventListener?a.addEventListener("click",function(){var b="#GPsearchInput-"+o._uid;document.querySelector(b+" input").disabled=!1,document.querySelector(b+" .GPsearchInputReset")&&(document.querySelector(b+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!1),document.getElementById(o._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),o.onCoordinateSearchClose()},!1):a.attachEvent&&a.attachEvent("onclick",function(){var b="#GPsearchInput-"+o._uid;document.querySelector(b+" input").disabled=!1,document.querySelector(b+" .GPsearchInputReset")&&(document.querySelector(b+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+o._uid).disabled=!1),document.getElementById(o._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(o._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),o.onCoordinateSearchClose()});var d=document.createElement("span");return d.className="GPelementHidden gpf-visible",d.innerText="Fermer",a.appendChild(d),e.appendChild(a),e},_createCoordinateSearchPanelFormElement(){var o=this,e=document.createElement("form");return e.id=this._addUID("GPcoordinateSearchForm"),e.className="gpf-panel__content fr-modal__content",e.addEventListener("submit",function(s){return s.preventDefault(),o.onShowSearchByCoordinateClick(),!1}),e},__createCoordinateSearchDivElement(){var o=document.createElement("div");return o.className="GPflexInput gpf-flex-column ",o},_createCoordinateSearchSystemsLabelElement(){var o=document.createElement("label");return o.className="GPcoordinateSearchSystemsLabel gpf-label fr-label",o.innerHTML="Systme de rfrence",o},_setCoordinateSearchSystemsSelectElement(o){document.getElementById(this._addUID("GPcoordinateSearchSystem"))&&document.getElementById(this._addUID("GPcoordinateSearchSystem")).remove();var e=this,s=document.createElement("select");s.id=this._addUID("GPcoordinateSearchSystem"),s.title="Choisir un systme de rference",s.className="GPselect GPcoordinateSearchSystemsSelect gpf-select fr-select",s.addEventListener("change",function(_){e.onCoordinateSearchSystemChange(_)});for(var a=0;a<o.length;a++){var d=o[a],b=document.createElement("option");b.value=d.code,b.text=d.label||a,s.appendChild(b)}return s},_createCoordinateSearchUnitsLabelElement(){var o=document.createElement("label");return o.className="GPcoordinateSearchUnitsLabel gpf-label fr-label",o.innerHTML="Units",o},_setCoordinateSearchUnitsSelectElement(o){document.getElementById(this._addUID("GPcoordinateSearchUnits"))&&document.getElementById(this._addUID("GPcoordinateSearchUnits")).remove();var e=this,s=document.createElement("select");s.id=this._addUID("GPcoordinateSearchUnits"),s.title="Choisir un type d'unit",s.className="GPselect GPcoordinateSearchUnitsSelect gpf-select fr-select",s.addEventListener("change",function(_){e.onCoordinateSearchUnitsChange(_)});for(var a=0;a<o.length;a++){var d=o[a],b=document.createElement("option");b.value=d.code?d.code:a,b.text=d.label||a,s.appendChild(b)}return s},_setCoordinateSearchLngLabelElement(o){document.getElementById(this._addUID("GPcoordinateSearchLngLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLngLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLngLabel"),e.htmlFor="coordinate-lng",e.innerHTML=o==="Geographical"?"Longitude :":"Y :",e},_setCoordinateSearchLngInputElement(o){document.getElementById(this._addUID("GPcoordinateSearchLngInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLngInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLngDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLngDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLngInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnes",e.name="coordinate-lng",e.type="number",e.step="any",e.required="",o){case"DMS":return e.title+=" gographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLngDMSElement();case"DEC":e.title+=" gographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartsiennes (en mtre)";break;case"KM":e.title+=" cartsiennes (en kilomtre)";break}return e},_setCoordinateSearchLngDMSElement(){var o=document.createElement("div");return o.id=this._addUID("GPcoordinateSearchLngDMS"),o.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLonDeg"
                class="gpf-input fr-input"
                name="inputSexLonDeg"
                title="Saisir une valeur de degr entre 0 et 180"
                type="number"
                required=""
                min="0"
                max="180">
            <label></label>
            <input step="1"
                id="GPcoordinatSearchInputSexLonMin"
                class="gpf-input fr-input"
                name="inputSexLonMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLonSec"
                class="gpf-input fr-input"
                name="inputSexLonSec"
                title="Saisir une valeur de seconde entre 0'' et 59''"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLonToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Est et 0uest"
                name="inputSexLonToward">
                <option value="O">O</option>
                <option value="E" selected="">E</option>
            </select>
        </div>
        `,o},_setCoordinateSearchLatLabelElement(o){document.getElementById(this._addUID("GPcoordinateSearchLatLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLatLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLatLabel"),e.htmlFor="coordinate-lat",e.innerHTML=o==="Geographical"?"Latitude :":"X :",e},_setCoordinateSearchLatInputElement(o){document.getElementById(this._addUID("GPcoordinateSearchLatInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLatInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLatDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLatDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLatInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnes",e.name="coordinate-lat",e.type="number",e.step="any",e.required="",o){case"DMS":return e.title+=" gographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLatDMSElement();case"DEC":e.title+=" gographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartsiennes (en mtre)";break;case"KM":e.title+=" cartsiennes (en kilomtre)";break}return e},_setCoordinateSearchLatDMSElement(){var o=document.createElement("div");return o.id=this._addUID("GPcoordinateSearchLatDMS"),o.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLatDeg"
                class="gpf-input fr-input"
                name="inputSexLatDeg"
                title="Saisir une valeur de degr entre 0 et 85"
                type="number"
                required=""
                min="0"
                max="85">
            <label></label>
            <input step="1"
                id="GPcoordinatSearchInputSexLatMin"
                class="gpf-input fr-input"
                name="inputSexLatMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLatSec"
                class="gpf-input fr-input"
                name="inputSexLatSec"
                title="Saisir une valeur de seconde entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLatToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Nord et Sud"
                name="inputSexLatToward">
                <option value="N">N</option>
                <option value="S">S</option>
            </select>
        </div>
        `,o},_createCoordinateSearchSubmitElement(){var o=document.createElement("input");return o.type="submit",o.id=this._addUID("GPcoordinateSearchSubmit"),o.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",o.value="Chercher",o}},logger=LoggerByDefault$1.getLogger("searchengine"),SearchEngine=class dle extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof dle))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e||this._clearResults(),this.collapsed||this._showSearchEngineButton.setAttribute("aria-pressed",!0),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}this.options.collapsible&&(e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineButton.click(),this.collapsed=e))}getData(){return this._geocodedLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,collapsible:!0,zoomTo:"",resources:{geocode:[],autocomplete:[],search:!1},displayButtonClose:!0,displayButtonAdvancedSearch:!1,displayButtonGeolocate:!1,displayButtonCoordinateSearch:!1,advancedSearch:{},coordinateSearch:{},searchOptions:{addToMap:!0,serviceOptions:{maximumResponses:5}},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{maximumResponses:5},triggerGeocode:!1,triggerDelay:1e3},displayMarker:!0,markerStyle:"lightOrange",markerUrl:"",placeholder:"Rechercher un lieu, une adresse",splitResults:!0},Helper$1.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.options.resources.search&&(this.options.searchOptions&&(this.options.searchOptions.serviceOptions&&(this.options.searchOptions.serviceOptions.url&&Search.setUrl(this.options.searchOptions.serviceOptions.url),this.options.searchOptions.serviceOptions.fields&&Search.setFields(this.options.searchOptions.serviceOptions.fields),this.options.searchOptions.serviceOptions.index&&Search.setIndex(this.options.searchOptions.serviceOptions.index),this.options.searchOptions.serviceOptions.size&&Search.setSize(this.options.searchOptions.serviceOptions.size),this.options.searchOptions.serviceOptions.maximumResponses&&Search.setMaximumResponses(this.options.searchOptions.serviceOptions.maximumResponses)),this.options.searchOptions.filterServices&&Search.setFiltersByService(this.options.searchOptions.filterServices),this.options.searchOptions.filterVectortiles&&Search.setFiltersByTMS(this.options.searchOptions.filterVectortiles),this.options.searchOptions.updateVectortiles&&Search.updateFilterByTMS()),Search.target.addEventListener("suggest",d=>{logger.debug(d),this._fillSearchedSuggestListContainer(d.detail)})),this.options.collapsible||(this.options.collapsed=!1),this.collapsed=this.options.collapsed,this._uid=SelectorID.generate(),this._showSearchEngineButton=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._containerResultsLocation=null,this._containerResultsSuggest=null,this._radioButtonLocation=null,this._radioButtonSuggest=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._coordinateSearchSystems=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchSystems(),this._currentCoordinateSearchSystems=this._coordinateSearchSystems[0],this._currentCoordinateSearchType=this._coordinateSearchSystems[0].type),this._coordinateSearchUnits=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchUnits(),this._currentCoordinateSearchUnits=this._coordinateSearchUnits[this._currentCoordinateSearchType][0].code),this._coordinateSearchLngInput=null,this._coordinateSearchLatInput=null,this._marker=null;var s=this.options.markerStyle,a=this.options.markerUrl;a?this._markerUrl=a:this._markerUrl=Object.keys(Marker).indexOf(s)===-1?Marker.lightOrange:Marker[s],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null}_checkInputOptions(e){var s;if(e.resources)if(typeof e.resources=="object"){var a=e.resources.geocode;if(a)if(Array.isArray(a)){var d=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(s=0;s<a.length;s++)d.indexOf(a[s])===-1&&logger.log("[SearchEngine] options.resources.geocode : "+a[s]+" is not a resource for geocode")}else logger.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),a=null;var b=e.resources.autocomplete;if(b)if(Array.isArray(b)){var _=["StreetAddress","PositionOfInterest"];for(s=0;s<b.length;s++)_.indexOf(b[s])===-1&&logger.log("[SearchEngine] options.resources.autocomplete : "+b[s]+" is not a resource for autocomplete")}else logger.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),b=null}else logger.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null}_initAdvancedSearchCodes(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var s=0;s<e.length;s++)switch(e[s]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),logger.log("advancedSearchCodes",this._advancedSearchCodes)}_initAdvancedSearchFilters(){this._advancedSearchFilters=SearchEngineUtils.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;Helper$1.assign(this._advancedSearchFilters,e),logger.log("advancedSearchFilters",this._advancedSearchFilters)}_initCoordinateSearchSystems(){var e=[{label:"Gographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric"}],s=this.options.coordinateSearch.systems;if(s)for(var a=0;a<s.length;a++){var d=s[a];this._setSystem(d)}if(this._coordinateSearchSystems.length===0)for(var b=0;b<e.length;b++)this._setSystem(e[b])}_initCoordinateSearchUnits(){var e={Geographical:[{code:"DEC",label:"degrs dcimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"degrs sexagsimaux",format:MathUtils.coordinateToDMS}],Metric:[{code:"M",label:"mtres",format:MathUtils.coordinateToMeter},{code:"KM",label:"kilomtres",format:MathUtils.coordinateToKMeter}]},s=this.options.coordinateSearch.units;if(s){for(var a in e)if(e.hasOwnProperty(a)){for(var d=!1,b=0;b<e[a].length;b++)for(var _=e[a][b],_e=0;_e<s.length;_e++){var ot=s[_e];_.code===ot&&(d=!0,this._coordinateSearchUnits[a]||(this._coordinateSearchUnits[a]=[]),this._coordinateSearchUnits[a].push(_))}d||(this._coordinateSearchUnits[a]=e[a])}}typeof this._coordinateSearchUnits=="object"&&Object.keys(this._coordinateSearchUnits).length===0&&(this._coordinateSearchUnits=e)}_initPopupDiv(){var e=this,s=document.createElement("div");s.className="gp-feature-info-div";var a=document.createElement("input");return a.type="button",a.className="gp-styling-button closer",a.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",s.appendChild(this._popupContent),s.appendChild(a),s}_initContainer(){var e=this._createMainContainerElement(),s=this._createSearchDivElement(),a=this._showSearchEngineButton=this._createShowSearchEnginePictoElement(this.options.collapsible);s.appendChild(a),this.options.collapsible||e.classList.add("gpf-widget-color","gpf-widget-padding");var d=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder);this.options.displayButtonClose&&d.appendChild(this._createSearchResetElement());var b=this;d.addEventListener?d.addEventListener("click",function(){b.onAutoCompleteInputClick()}):d.attachEvent&&d.attachEvent("onclick",function(){b.onAutoCompleteInputClick()}),s.appendChild(d);var _=this._createButtonsElement(),_e=this._createFirstLineWrapper();if(_e.appendChild(s),_e.appendChild(_),e.appendChild(_e),checkDsfr()&&this.options.splitResults||this.options.displayButtonAdvancedSearch){var ot=this._createRadioContainer();e.appendChild(ot)}if(checkDsfr()&&this.options.splitResults){var st;[st,this._radioButtonLocation,this._radioButtonSuggest]=this._createRadioElements(),ot.appendChild(st)}if(this.options.displayButtonAdvancedSearch){var ct=this._createShowAdvancedSearchElement();ot.appendChild(ct);var ft=this._createAdvancedSearchPanelElement(),mt=this._createAdvancedSearchPanelDivElement(),bt=this._createAdvancedSearchPanelHeaderElement(),wt=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),Ct=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var Rt=this._createAdvancedSearchFormInputElement();wt.appendChild(Ct),wt.appendChild(Rt),mt.appendChild(bt),mt.appendChild(wt),ft.appendChild(mt),e.appendChild(ft)}if(this.options.displayButtonGeolocate){var It=this._createShowGeolocateElement();_.appendChild(It)}if(this.options.displayButtonCoordinateSearch){var Pt=this._createShowSearchByCoordinateElement();_.appendChild(Pt);var Tt=this._createCoordinateSearchPanelElement(),Gt=this._createCoordinateSearchPanelDivElement(),Jt=this._createCoordinateSearchPanelHeaderElement(),qt=this._createCoordinateSearchPanelFormElement(),Nt=null;Nt=this._containerSystems=this.__createCoordinateSearchDivElement(),qt.appendChild(Nt);var Qt=this._createCoordinateSearchSystemsLabelElement(),fn=this._setCoordinateSearchSystemsSelectElement(this._coordinateSearchSystems);Nt.appendChild(Qt),Nt.appendChild(fn),Nt=this._containerUnits=this.__createCoordinateSearchDivElement(),qt.appendChild(Nt);var Mn=this._createCoordinateSearchUnitsLabelElement(),ln=this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[this._currentCoordinateSearchType]);Nt.appendChild(Mn),Nt.appendChild(ln),Nt=this._containerCoordinateLng=this.__createCoordinateSearchDivElement(),qt.appendChild(Nt);var Wt=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),so=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);Nt.appendChild(Wt),Nt.appendChild(so),Nt=this._containerCoordinateLat=this.__createCoordinateSearchDivElement(),qt.appendChild(Nt);var pn=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),hn=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);Nt.appendChild(pn),Nt.appendChild(hn);var Mt=this._createCoordinateSearchSubmitElement();qt.appendChild(Mt),Gt.appendChild(Jt),Gt.appendChild(qt),Tt.appendChild(Gt),e.appendChild(Tt)}var Hn=this._autocompleteContainer=this._createAutoCompleteElement(),cn=this._createAutoCompleteListElement(),fo=this._containerResultsLocation=this._createAutoCompletedLocationContainer(),Fn=this._containerResultsSuggest=this._createSearchedSuggestContainer();cn.appendChild(fo),cn.appendChild(Fn),Hn.appendChild(cn),e.appendChild(Hn);var Tn=this._createGeocodeResultsElement(),qn=this._createGeocodeResultsDivElement();Tn.appendChild(qn);var nr=this._geocodedContainer=this._createGeocodeResultsListElement();return qn.appendChild(nr),e.appendChild(Tn),e}_setFilter(e){for(var s=this._filterContainer,a=!1,d=0;d<this._advancedSearchCodes.length;d++)if(this._advancedSearchCodes[d].id===e){a=!0;break}if(!a){for(;s.firstChild;)s.removeChild(s.firstChild);return}for(this._currentGeocodingCode=e;s.firstChild;)s.removeChild(s.firstChild);var b=this._advancedSearchFilters[e];if(!(!b||b.length===0)){for(var _=this._createAdvancedSearchFiltersTableElement(e,!0),_e=0;_e<b.length;_e++){var ot=this._createAdvancedSearchFiltersAttributElement(b[_e]);_.appendChild(ot)}return s.appendChild(_),s}}_requestAutoComplete(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){logger.log(e);var s={};Helper$1.assign(s,this.options.autocompleteOptions.serviceOptions),Helper$1.assign(s,e);var a=this.options.resources.autocomplete;a&&Array.isArray(a)&&(s.type||(s.type=a)),s.apiKey=s.apiKey||this.options.apiKey,typeof s.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?s.ssl=this.options.ssl:s.ssl=!0),logger.log(s),Gp.Services.autoComplete(s)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var s=this._containerResultsLocation;if(s.childElementCount)for(;s.firstChild;)s.removeChild(s.firstChild);if(s.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonLocation||this._radioButtonLocation&&this._radioButtonLocation.checked)&&s.classList.remove("GPelementHidden","gpf-hidden"),this._displaySuggestedLocation(),(!checkDsfr()||!this.options.splitResults)&&this._createAutoCompletedLocationTitleElement();for(var a=0;a<e.length;a++)this._createAutoCompletedLocationElement(e[a],a)}}}_fillSearchedSuggestListContainer(e){var s=this._containerResultsSuggest;if(s.childElementCount)for(;s.firstChild;)s.removeChild(s.firstChild);if(s.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonSuggest||this._radioButtonSuggest&&this._radioButtonSuggest.checked)&&s.classList.remove("GPelementHidden","gpf-hidden"),(!checkDsfr()||!this.options.splitResults)&&this._createSearchedSuggestTitleElement();for(let a=0;a<e.length;a++){const d=e[a];this._createSearchedSuggestElement(d,a)}}}_requestGeocoding(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){logger.log(e);var s={};Helper$1.assign(s,this.options.geocodeOptions.serviceOptions),Helper$1.assign(s,e);var a=this,d=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",b=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(b){var _=function(st){e.onSuccess.call(a,st),a.options.geocodeOptions.serviceOptions.onSuccess.call(a,st)};s.onSuccess=_}if(d){var _e=function(st){e.onFailure.call(a,st),a.options.geocodeOptions.serviceOptions.onFailure.call(a,st)};s.onFailure=_e}var ot=this.options.resources.geocode;ot&&(s.index||(s.index=ot)),s.apiKey=s.apiKey||this.options.apiKey,typeof s.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?s.ssl=this.options.ssl:s.ssl=!0),logger.log(s),Gp.Services.geocode(s)}}_fillGeocodedLocationListContainer(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var s=this._geocodedContainer;if(s.childElementCount)for(;s.firstChild;)s.removeChild(s.firstChild);for(var a=0;a<e.length;a++)logger.log(e[a]),this._createGeocodedLocationElement(e[a],a);this._geocodedLocations=e}_setLabel(e){document.getElementById("GPsearchInputText-"+this._uid).value=e}_setPosition(e,s){var a=this.getMap().getView();a.setCenter(e),a.setZoom(s)}_setMarker(e,s){var a=this.getMap(),d=this;if(this._marker!=null&&(a.removeOverlay(this._marker),this._marker=null),e){var b=document.createElement("img");b.src=this._markerUrl,b.addEventListener?b.addEventListener("click",function(){d._onResultMarkerSelect(s)}):b.attachEvent&&b.attachEvent("onclick",function(){d._onResultMarkerSelect(s)}),this._marker=new Overlay({position:e,positioning:"center-center",element:b,stopEvent:!1}),a.addOverlay(this._marker)}}_getZoom(e){var s=this.getMap(),a=this.options.zoomTo,d=null;if(typeof a=="function"&&(logger.trace("zoom function"),d=a.call(this,e)),typeof a=="number"&&(logger.trace("zoom level"),d=a),typeof a=="string")if(a==="auto")logger.trace("zoom auto"),d=SearchEngineUtils.zoomToResultsByDefault(e);else{logger.trace("zoom level parsing");var b=parseInt(a,10);isNaN(b)||(logger.trace("zoom parsing"),d=b)}Number.isInteger=Number.isInteger||function(ot){return typeof ot=="number"&&isFinite(ot)&&Math.floor(ot)===ot},(!d||d===""||!Number.isInteger(d))&&(logger.trace("zoom not found, current zoom..."),d=s.getView().getZoom());var _=s.minZoom,_e=s.maxZoom;return d<_&&(logger.trace("zoom level min..."),d=_),d>_e&&(logger.trace("zoom level max..."),d=_e),logger.trace("zoom",d),d}_onResultMarkerSelect(e){var s=this.getMap(),a="";if(typeof e!="string")if(e.service==="GeocodedLocation"){a="<ul>";var d=e.location.placeAttributes;for(var b in d)d.hasOwnProperty(b)&&b!=="trueGeometry"&&b!=="extraFields"&&b!=="houseNumberInfos"&&b!=="_count"&&(a+="<li>",a+='<span class="gp-attname-others-span">'+b.toUpperCase()+" : </span>",a+=d[b],a+=" </li>");a+=" </ul>"}else e.service==="SuggestedLocation"?a=GeocodeUtils.getSuggestedLocationFreeform(e.location):a="sans informations.";else a=e;this._popupContent.innerHTML=a,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),s.addOverlay(this._popupOverlay))}_setSystem(e){if(typeof e!="object"){logger.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger.error("crs not defined !");return}if(e.label||(logger.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var s=0;s<this._coordinateSearchSystems.length;s++){var a=this._coordinateSearchSystems[s];e.crs===a.crs&&logger.info("crs '{}' already configured",a.crs)}e.code=this._coordinateSearchSystems.length,this._coordinateSearchSystems.push(e)}onShowSearchEngineClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var s=this.getMap();Interactions.unset(s);var a=this._showSearchEngineButton.ariaPressed;this.collapsed=a!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed&&this._clearResults()}onSearchResetClick(){this._clearResults()}onShowSearchGeolocateClick(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{var s=this.getMap().getView(),a=s.getProjection().getCode(),d=[e.coords.longitude,e.coords.latitude];if(a!=="EPSG:4326"&&(d=transform$1(d,"EPSG:4326",a)),isNaN(d[0])||isNaN(d[1])){this._setMarker();return}this._setPosition(d,10),this._displayMarker&&this._setMarker(d,"sans information"),this.dispatchEvent({type:"searchengine:geolocation:click",coordinates:d})})}onShowSearchByCoordinateClick(){var e=null,s=null;if(this._coordinateSearchLngInput&&this._coordinateSearchLngInput.nodeName==="DIV"&&this._coordinateSearchLatInput&&this._coordinateSearchLatInput.nodeName==="DIV"?(e=this._getCoordinateSearchDMS(this._coordinateSearchLngInput),s=this._getCoordinateSearchDMS(this._coordinateSearchLatInput)):(e=this._coordinateSearchLngInput.value,s=this._coordinateSearchLatInput.value),!(!e||!s)){var a=[e,s],d=this.getMap().getView(),b=d.getProjection().getCode();if(b!=="EPSG:4326"&&(a=transform$1(a,"EPSG:4326",b)),isNaN(a[0])||isNaN(a[1])){this._setMarker();return}this._setPosition(a,10),this._displayMarker&&this._setMarker(a,"sans information"),this.dispatchEvent({type:"searchengine:coordinates:click",coordinates:a})}}_getCoordinateSearchDMS(e){if(e&&e.nodeName==="DIV"){var s=e.querySelectorAll("[name]");if(s){var a=MathUtils.toInteger(s[0].value),d=MathUtils.toInteger(s[1].value),b=MathUtils.toInteger(s[2].value),_=s[3].options[s[3].selectedIndex].text;return!a||!d||!b||!_?void 0:MathUtils.dmsToDecimal(a,d,b,_)}}}onAutoCompleteInputClick(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var s=e.target.value;if(s){if(this._currentGeocodingLocation=s,s.length<3){this._clearSuggestedLocation();return}var a=this.options.autocompleteOptions.triggerGeocode,d=this.options.autocompleteOptions.triggerDelay,b=this;this._requestAutoComplete({text:s,onSuccess:function(_e){if(logger.log("request from AutoComplete",_e),_e){b._suggestedLocations=_e.suggestedLocations,b._locationsToBeDisplayed=[];for(var ot=0;ot<b._suggestedLocations.length;ot++){var st=b._suggestedLocations[ot];st.position&&st.position.x===0&&st.position.y===0&&st.fullText?b._getGeocodeCoordinatesFromFullText(st,ot):b._locationsToBeDisplayed.push(st)}b._fillAutoCompletedLocationListContainer(b._locationsToBeDisplayed),b._triggerHandler&&(clearTimeout(b._triggerHandler),b._triggerHandler=null,logger.warn("Cancel a geocode request !"))}},onFailure:function(_e){b._clearSuggestedLocation(),logger.log(_e.message),_e.message==="No suggestion matching the search"&&a&&(b._triggerHandler&&(clearTimeout(b._triggerHandler),logger.warn("Cancel the last geocode request !")),b._triggerHandler=setTimeout(function(){logger.warn("Launch a geocode request !"),b._requestGeocoding({location:s,onSuccess:function(ot){if(logger.log("request from Geocoding",ot),ot){b._locationsToBeDisplayed=[];for(var st=ot.locations,ct=0;ct<st.length;ct++){var ft=st[ct];ft.fullText=GeocodeUtils.getGeocodedLocationFreeform(ft),ft.position={x:ft.position.lon,y:ft.position.lat},b._locationsToBeDisplayed.push(ft)}b._fillAutoCompletedLocationListContainer(st)}},onFailure:function(ot){logger.log(ot.message)}})},d))}}),this.options.resources.search&&Search.suggest(s);var _=this.getMap();_.on("click",this._hideSuggestedLocation,this),_.on("pointerdrag",this._hideSuggestedLocation,this)}}_getGeocodeCoordinatesFromFullText(e,s){var a=this;Gp.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:GeocodeUtils.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(d){logger.log("request from Geocoding (coordinates null)",d),d.locations&&d.locations.length!==0&&d.locations[0].position&&a._suggestedLocations&&a._suggestedLocations[s]&&(a._suggestedLocations[s].position={lon:d.locations[0].position.y,lat:d.locations[0].position.x},a._locationsToBeDisplayed.unshift(a._suggestedLocations[s]),a._fillAutoCompletedLocationListContainer(a._locationsToBeDisplayed))},onFailure:function(){a._suggestedLocations&&a._suggestedLocations[s]&&a._createAutoCompletedLocationElement(a._suggestedLocations[s],s)}})}onAutoCompletedResultsItemClick(e){var s=SelectorID.index(e.target.id);if(logger.log(s),logger.log(this._locationsToBeDisplayed[s]),!!s){var a=[this._locationsToBeDisplayed[s].position.x,this._locationsToBeDisplayed[s].position.y],d={service:"SuggestedLocation",location:this._locationsToBeDisplayed[s]},b=GeocodeUtils.getSuggestedLocationFreeform(this._locationsToBeDisplayed[s]);this._setLabel(b),this._currentGeocodingLocation=b;var _=this.getMap().getView(),_e=_.getProjection().getCode();_e!=="EPSG:4326"&&(a=transform$1(a,"EPSG:4326",_e));var ot=this._getZoom(d);this._setPosition(a,ot),this._displayMarker&&this._setMarker(a,d),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[s]})}}onSearchedResultsItemClick(e){var s=SelectorID.index(e.target.id),a=null;try{var d=Search.getSuggestions()[s];if(!d)throw"No suggestions found !";if(this.options.searchOptions.addToMap){if(!Config$1.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var b=d.service,_=d.name,_e=null;switch(b){case"WMS":_e=new LayerWMS({layer:_});break;case"WMTS":_e=new LayerWMTS({layer:_});break;case"TMS":_e=new LayerMapBox({layer:_});default:break}if(_e){var ot=this.getMap();ot.addLayer(_e)}}}catch(st){a=st}this.dispatchEvent({type:"searchengine:search:click",suggest:d,error:a})}onGeocodingSearchSubmit(e){var s=e.target[0].value;if(s){this._currentGeocodingLocation=s;var a=this;this._requestGeocoding({query:s,onSuccess:function(d){if(logger.log("request from Geocoding",d),d){var b=d.locations;a._fillGeocodedLocationListContainer(b)}},onFailure:function(d){a._clearGeocodedLocation(),logger.log(d.message)}})}}onGeocodedResultsItemClick(e){var s=SelectorID.index(e.target.id);if(s){var a=[this._geocodedLocations[s].position.lon,this._geocodedLocations[s].position.lat],d={service:"GeocodedLocation",location:this._geocodedLocations[s]},b=GeocodeUtils.getGeocodedLocationFreeform(this._geocodedLocations[s]);this._setLabel(b);var _=this.getMap().getView(),_e=_.getProjection().getCode();_e!=="EPSG:4326"&&(a=transform$1(a,"EPSG:4326",_e));var ot=this._getZoom(this.options.zoomTo);this._setPosition(a,ot),this._displayMarker&&this._setMarker(a,d),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[s]})}}onGeocodingAdvancedSearchCodeChange(e){logger.log(e);var s=e.target.selectedIndex,a=e.target.options[s].value;a&&this._setFilter(a)}onGeocodingAdvancedSearchSubmit(e,s){if(logger.log(s),!(!s||s.length===0)){for(var a,d={},b=0;b<s.length;b++){var _=s[b];_.value&&(_.key==="section"&&(_.value=_.value.toUpperCase()),d[_.key]=_.value)}var _e=document.getElementById("GPsearchInputText-"+this._uid);a=_e.value,this._currentGeocodingCode==="CadastralParcel"&&(a="");var ot=this;this._requestGeocoding({query:a,index:this._currentGeocodingCode,filters:d,onSuccess:function(st){if(logger.log(st),st){var ct=st.locations;ot._fillGeocodedLocationListContainer(ct)}},onFailure:function(st){ot._clearGeocodedLocation(),logger.log(st.message)}})}}_getCadastralParcelRequestParams(e){var s="",a,d=e.department;d?(a=d.length,a===2?s=d:a===1?s="0"+d:s=d.substring(0,2)):s="__";var b=e.commune;b?(a=b.length,a===3?s+=b:a===2?s+="_"+b:a===1?s+="__"+b:s+=b.substring(0,3)):s+="___";var _=e.insee;_&&_.length===5&&(s=_);var _e=e.absorbedCity;_e?(a=_e.length,a===3?s+=_e:a<3?a===2?s+="_"+_e:a===1&&(s+="__"+_e):s+=_e.substring(0,3)):s+="___";var ot=e.section;ot?(a=ot.length,a===2?s+=ot:a===1?s+="_"+ot:s+=ot.substring(0,2)):s+="__";var st=e.number;return st?(a=st.length,a===4?s+=st:a===3?s+="_"+st:a===2?s+="__"+st:a===1?s+="___"+st:s+=st.substring(0,4)):s+="___",logger.log("location : "+s),s}onCoordinateSearchSystemChange(e){var s=e.target.selectedIndex,a=e.target.options[s].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="";for(var d=null,b=0;b<this._coordinateSearchSystems.length;++b)if(this._coordinateSearchSystems[b].code===Number(a)){d=this._coordinateSearchSystems[b].type;break}if(!d){logger.log("system not found in projection systems container");return}this._currentCoordinateSearchSystems=this._coordinateSearchSystems[Number(a)],d!==this._currentCoordinateSearchType&&(this._currentCoordinateSearchType=d,this._currentCoordinateSearchUnits=this._coordinateSearchUnits[d][0].code,this._containerUnits.appendChild(this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[d])),this._updateCoordinateSearchElements())}onCoordinateSearchUnitsChange(e){var s=e.target.selectedIndex,a=e.target.options[s].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="",this._currentCoordinateSearchUnits=a,this._updateCoordinateSearchElements()}onCoordinateSearchClose(){this._setMarker(),this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value=""}_updateCoordinateSearchElements(){var e=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),s=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);this._containerCoordinateLng.appendChild(e),this._containerCoordinateLng.appendChild(s),e=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),s=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits),this._containerCoordinateLat.appendChild(e),this._containerCoordinateLat.appendChild(s)}_clearResults(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._containerResultsLocation)for(;this._containerResultsLocation.firstChild;)this._containerResultsLocation.removeChild(this._containerResultsLocation.firstChild);if(this.options.resources.search&&(Search.clear(),this._containerResultsSuggest))for(;this._containerResultsSuggest.firstChild;)this._containerResultsSuggest.removeChild(this._containerResultsSuggest.firstChild)}_hideSuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementVisible","GPelementHidden"),this._autocompleteContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementHidden","GPelementVisible"),this._autocompleteContainer.classList.replace("gpf-hidden","gpf-visible"))}_clearGeocodedLocation(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)}};Object.assign(SearchEngine.prototype,SearchEngineDOM);Object.assign(SearchEngine.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=SearchEngine);LoggerByDefault$1.getLogger("zoom");var GeoportalZoom=class extends Zoom{constructor(e){e=e||{};var s="ol-custom-zoom";e.className=s,super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var s="position-container-"+this.options.position;if(!document.getElementById(s)){var a=document.createElement("div");a.id=s,a.classList.add("position"),a.classList.add(s),this.container.appendChild(a)}this.options.target=this.container.children[s]}}_initContainer(){this._uid=SelectorID.generate(),this.element.id="GPzoom-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-zoom","ol-unselectable","ol-control");var e=this,s=this.element.childNodes;for(let d=0;d<s.length;d++){const b=s[d];if(b.classList.contains(this.options.className+"-in")){b.classList.add("GPzoomIn","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-in","fr-btn","fr-btn--secondary","gpf-btn","gpf-btn--secondary","gpf-btn-icon"),b.id="GPzoomIn",b.innerHTML="",b.removeAttribute("title"),b.setAttribute("aria-label","Zoomer");var a=document.createElement("span");b.appendChild(a),b.addEventListener?b.addEventListener("click",function(){e.dispatchEvent("zoom:in")}):b.attachEvent&&b.attachEvent("onclick",function(){e.dispatchEvent("zoom:in")})}if(b.classList.contains(this.options.className+"-out")){b.classList.add("GPzoomOut","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-out","fr-btn","fr-btn--secondary","gpf-btn","gpf-btn--secondary","gpf-btn-icon"),b.id="GPzoomOut",b.innerHTML="",b.removeAttribute("title"),b.setAttribute("aria-label","Dzoomer");var a=document.createElement("span");b.appendChild(a),b.addEventListener?b.addEventListener("click",function(){e.dispatchEvent("zoom:out")}):b.attachEvent&&b.attachEvent("onclick",function(){e.dispatchEvent("zoom:out")})}}this.options.position&&(this.element.style.position="unset")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var s=e.getControls();s.forEach(a=>{a.element.classList.contains("ol-zoom")&&(a.element.classList.add("ol-hidden"),a.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalZoom=GeoportalZoom);const UNITS_PROP="units",LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28;class ScaleLine extends Control{constructor(e){e=e||{};const s=document.createElement("div");s.style.pointerEvents="none",super({element:s,render:e.render,target:e.target}),this.on,this.once,this.un;const a=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=a+"-inner",this.element.className=a+" "+CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(UNITS_PROP,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(UNITS_PROP)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(UNITS_PROP,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const s=e.center,a=e.projection,d=this.getUnits(),b=d=="degrees"?"degrees":"m";let _=getPointResolution(a,e.resolution,s,b);const _e=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,ot=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI:void 0;let st=_e*_,ct="";if(d=="degrees"){const Tt=METERS_PER_UNIT$1.degrees;st*=Tt,st<Tt/60?(ct="",_*=3600):st<Tt?(ct="",_*=60):ct=""}else if(d=="imperial")st<.9144?(ct="in",_/=.0254):st<1609.344?(ct="ft",_/=.3048):(ct="mi",_/=1609.344);else if(d=="nautical")_/=1852,ct="NM";else if(d=="metric")st<.001?(ct="m",_*=1e6):st<1?(ct="mm",_*=1e3):st<1e3?ct="m":(ct="km",_/=1e3);else if(d=="us")st<.9144?(ct="in",_*=39.37):st<1609.344?(ct="ft",_/=.30480061):(ct="mi",_/=1609.3472);else throw new Error("Invalid units");let ft=3*Math.floor(Math.log(_e*_)/Math.log(10)),mt,bt,wt,Ct,Rt,It;for(;;){wt=Math.floor(ft/3);const Tt=Math.pow(10,wt);if(mt=LEADING_DIGITS[(ft%3+3)%3]*Tt,bt=Math.round(mt/_),isNaN(bt)){this.element.style.display="none",this.renderedVisible_=!1;return}if(ot!==void 0&&bt>=ot){mt=Ct,bt=Rt,wt=It;break}else if(bt>=_e)break;Ct=mt,Rt=bt,It=wt,++ft}const Pt=this.scaleBar_?this.createScaleBar(bt,mt,ct):mt.toFixed(wt<0?-wt:0)+" "+ct;this.renderedHTML_!=Pt&&(this.innerElement_.innerHTML=Pt,this.renderedHTML_=Pt),this.renderedWidth_!=bt&&(this.innerElement_.style.width=bt+"px",this.renderedWidth_=bt),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,s,a){const d=this.getScaleForResolution(),b=d<1?Math.round(1/d).toLocaleString()+" : 1":"1 : "+Math.round(d).toLocaleString(),_=this.scaleBarSteps_,_e=e/_,ot=[this.createMarker("absolute")];for(let ct=0;ct<_;++ct){const ft=ct%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";ot.push(`<div><div class="ol-scale-singlebar ${ft}" style="width: ${_e}px;"></div>`+this.createMarker("relative")+(ct%2===0||_===2?this.createStepText(ct,e,!1,s,a):"")+"</div>")}return ot.push(this.createStepText(_,e,!0,s,a)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+b+"</div>":"")+ot.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,s,a,d,b){const _e=(e===0?0:Math.round(d/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+b),ot=e===0?-3:s/this.scaleBarSteps_*-1,st=e===0?0:s/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${ot}px;text-align: ${e===0?"left":"center"};min-width: ${st}px;left: ${a?s+"px":"unset"};">`+_e+"</div>"}getScaleForResolution(){const e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),s=this.dpi_||DEFAULT_DPI,a=1e3/25.4;return e*a*s}render(e){const s=e.frameState;s?this.viewState_=s.viewState:this.viewState_=null,this.updateElement_()}}const geometry={type:"MultiPolygon",coordinates:[[[[5.5571875,47.94089844],[5.5571875,47.9815625],[5.478125,47.9815625],[5.478125,48.02222656],[5.478125,48.06289063],[5.478125,48.10355469],[5.478125,48.14421875],[5.5571875,48.14421875],[5.5571875,48.18488281],[5.5571875,48.22554687],[5.5571875,48.26621094],[5.63625,48.26621094],[5.63625,48.306875],[5.63625,48.34753906],[5.63625,48.38820312],[5.63625,48.42886719],[5.63625,48.46953125],[5.63625,48.51019531],[5.63625,48.55085938],[5.63625,48.59152344],[5.63625,48.6321875],[5.63625,48.67285156],[5.5571875,48.67285156],[5.5571875,48.71351562],[5.5571875,48.75417969],[5.478125,48.75417969],[5.478125,48.71351562],[5.478125,48.67285156],[5.3990625,48.67285156],[5.3990625,48.71351562],[5.3990625,48.75417969],[5.3990625,48.79484375],[5.32,48.79484375],[5.32,48.83550781],[5.32,48.87617187],[5.2409375,48.87617187],[5.2409375,48.91683594],[5.161875,48.91683594],[5.161875,48.87617187],[5.0828125,48.87617187],[5.00375,48.87617187],[5.00375,48.91683594],[5.00375,48.9575],[4.9246875,48.9575],[4.9246875,48.99816406],[4.9246875,49.03882813],[4.845625,49.03882813],[4.845625,49.07949219],[4.845625,49.12015625],[4.7665625,49.12015625],[4.6875,49.12015625],[4.6875,49.07949219],[4.6084375,49.07949219],[4.529375,49.07949219],[4.529375,49.12015625],[4.4503125,49.12015625],[4.4503125,49.16082031],[4.37125,49.16082031],[4.37125,49.20148437],[4.37125,49.24214844],[4.37125,49.2828125],[4.2921875,49.2828125],[4.2921875,49.24214844],[4.213125,49.24214844],[4.213125,49.2828125],[4.213125,49.32347656],[4.1340625,49.32347656],[4.1340625,49.36414062],[4.055,49.36414062],[3.9759375,49.36414062],[3.896875,49.36414062],[3.8178125,49.36414062],[3.73875,49.36414062],[3.6596875,49.36414062],[3.580625,49.36414062],[3.5015625,49.36414062],[3.4225,49.36414062],[3.3434375,49.36414062],[3.264375,49.36414062],[3.1853125,49.36414062],[3.10625,49.36414062],[3.0271875,49.36414062],[3.0271875,49.40480469],[2.948125,49.40480469],[2.8690625,49.40480469],[2.8690625,49.36414062],[2.79,49.36414062],[2.79,49.32347656],[2.79,49.2828125],[2.7109375,49.2828125],[2.631875,49.2828125],[2.5528125,49.2828125],[2.5528125,49.24214844],[2.47375,49.24214844],[2.47375,49.20148437],[2.3946875,49.20148437],[2.3946875,49.16082031],[2.3946875,49.12015625],[2.315625,49.12015625],[2.2365625,49.12015625],[2.2365625,49.07949219],[2.2365625,49.03882813],[2.1575,49.03882813],[2.1575,48.99816406],[2.0784375,48.99816406],[2.0784375,48.9575],[1.999375,48.9575],[1.999375,48.99816406],[1.999375,49.03882813],[1.999375,49.07949219],[2.0784375,49.07949219],[2.1575,49.07949219],[2.1575,49.12015625],[2.1575,49.16082031],[2.2365625,49.16082031],[2.315625,49.16082031],[2.315625,49.20148437],[2.315625,49.24214844],[2.3946875,49.24214844],[2.3946875,49.2828125],[2.47375,49.2828125],[2.47375,49.32347656],[2.5528125,49.32347656],[2.5528125,49.36414062],[2.631875,49.36414062],[2.7109375,49.36414062],[2.7109375,49.40480469],[2.79,49.40480469],[2.79,49.44546875],[2.79,49.48613281],[2.8690625,49.48613281],[2.8690625,49.52679688],[2.948125,49.52679688],[2.948125,49.56746094],[3.0271875,49.56746094],[3.0271875,49.608125],[3.10625,49.608125],[3.1853125,49.608125],[3.1853125,49.64878906],[3.264375,49.64878906],[3.3434375,49.64878906],[3.3434375,49.68945313],[3.3434375,49.73011719],[3.3434375,49.77078125],[3.3434375,49.81144531],[3.4225,49.81144531],[3.4225,49.85210937],[3.4225,49.89277344],[3.5015625,49.89277344],[3.5015625,49.9334375],[3.580625,49.9334375],[3.6596875,49.9334375],[3.73875,49.9334375],[3.8178125,49.9334375],[3.896875,49.9334375],[3.9759375,49.9334375],[3.9759375,49.97410156],[4.055,49.97410156],[4.055,50.01476563],[4.1340625,50.01476563],[4.1340625,50.05542969],[4.213125,50.05542969],[4.2921875,50.05542969],[4.37125,50.05542969],[4.37125,50.01476563],[4.4503125,50.01476563],[4.4503125,50.05542969],[4.529375,50.05542969],[4.529375,50.09609375],[4.6084375,50.09609375],[4.6084375,50.13675781],[4.6084375,50.17742188],[4.6875,50.17742188],[4.6875,50.21808594],[4.7665625,50.21808594],[4.845625,50.21808594],[4.845625,50.25875],[4.9246875,50.25875],[4.9246875,50.21808594],[5.00375,50.21808594],[5.00375,50.17742188],[5.00375,50.13675781],[5.00375,50.09609375],[5.00375,50.05542969],[4.9246875,50.05542969],[4.9246875,50.01476563],[5.00375,50.01476563],[5.00375,49.97410156],[5.00375,49.9334375],[5.00375,49.89277344],[5.0828125,49.89277344],[5.0828125,49.85210937],[5.161875,49.85210937],[5.161875,49.81144531],[5.161875,49.77078125],[5.2409375,49.77078125],[5.32,49.77078125],[5.3990625,49.77078125],[5.3990625,49.73011719],[5.3990625,49.68945313],[5.3990625,49.64878906],[5.478125,49.64878906],[5.5571875,49.64878906],[5.5571875,49.608125],[5.478125,49.608125],[5.478125,49.56746094],[5.478125,49.52679688],[5.5571875,49.52679688],[5.5571875,49.48613281],[5.63625,49.48613281],[5.63625,49.52679688],[5.7153125,49.52679688],[5.7153125,49.56746094],[5.794375,49.56746094],[5.8734375,49.56746094],[5.8734375,49.52679688],[5.794375,49.52679688],[5.794375,49.48613281],[5.7153125,49.48613281],[5.7153125,49.44546875],[5.63625,49.44546875],[5.63625,49.40480469],[5.5571875,49.40480469],[5.5571875,49.36414062],[5.63625,49.36414062],[5.63625,49.32347656],[5.63625,49.2828125],[5.5571875,49.2828125],[5.5571875,49.32347656],[5.478125,49.32347656],[5.478125,49.36414062],[5.3990625,49.36414062],[5.32,49.36414062],[5.32,49.32347656],[5.32,49.2828125],[5.3990625,49.2828125],[5.3990625,49.24214844],[5.3990625,49.20148437],[5.3990625,49.16082031],[5.478125,49.16082031],[5.478125,49.12015625],[5.478125,49.07949219],[5.478125,49.03882813],[5.478125,48.99816406],[5.5571875,48.99816406],[5.5571875,48.9575],[5.5571875,48.91683594],[5.5571875,48.87617187],[5.5571875,48.83550781],[5.63625,48.83550781],[5.63625,48.79484375],[5.63625,48.75417969],[5.7153125,48.75417969],[5.7153125,48.71351562],[5.794375,48.71351562],[5.794375,48.67285156],[5.794375,48.6321875],[5.7153125,48.6321875],[5.7153125,48.59152344],[5.7153125,48.55085938],[5.794375,48.55085938],[5.794375,48.51019531],[5.794375,48.46953125],[5.7153125,48.46953125],[5.7153125,48.42886719],[5.7153125,48.38820312],[5.7153125,48.34753906],[5.7153125,48.306875],[5.7153125,48.26621094],[5.7153125,48.22554687],[5.63625,48.22554687],[5.63625,48.18488281],[5.63625,48.14421875],[5.63625,48.10355469],[5.5571875,48.10355469],[5.5571875,48.06289063],[5.5571875,48.02222656],[5.63625,48.02222656],[5.63625,47.9815625],[5.63625,47.94089844],[5.5571875,47.94089844]],[[5.5571875,49.40480469],[5.5571875,49.44546875],[5.478125,49.44546875],[5.478125,49.48613281],[5.3990625,49.48613281],[5.3990625,49.44546875],[5.3990625,49.40480469],[5.478125,49.40480469],[5.5571875,49.40480469]],[[5.32,49.36414062],[5.32,49.40480469],[5.32,49.44546875],[5.32,49.48613281],[5.2409375,49.48613281],[5.2409375,49.44546875],[5.2409375,49.40480469],[5.2409375,49.36414062],[5.32,49.36414062]],[[4.37125,49.36414062],[4.37125,49.32347656],[4.4503125,49.32347656],[4.529375,49.32347656],[4.529375,49.36414062],[4.4503125,49.36414062],[4.37125,49.36414062]],[[4.529375,49.32347656],[4.529375,49.2828125],[4.6084375,49.2828125],[4.6084375,49.32347656],[4.529375,49.32347656]],[[2.948125,49.48613281],[2.948125,49.44546875],[3.0271875,49.44546875],[3.10625,49.44546875],[3.1853125,49.44546875],[3.1853125,49.40480469],[3.264375,49.40480469],[3.3434375,49.40480469],[3.4225,49.40480469],[3.4225,49.44546875],[3.5015625,49.44546875],[3.580625,49.44546875],[3.580625,49.40480469],[3.6596875,49.40480469],[3.73875,49.40480469],[3.8178125,49.40480469],[3.8178125,49.44546875],[3.896875,49.44546875],[3.9759375,49.44546875],[3.9759375,49.48613281],[4.055,49.48613281],[4.055,49.52679688],[3.9759375,49.52679688],[3.9759375,49.56746094],[3.9759375,49.608125],[3.896875,49.608125],[3.896875,49.56746094],[3.8178125,49.56746094],[3.8178125,49.608125],[3.8178125,49.64878906],[3.896875,49.64878906],[3.9759375,49.64878906],[3.9759375,49.68945313],[3.896875,49.68945313],[3.8178125,49.68945313],[3.73875,49.68945313],[3.73875,49.64878906],[3.6596875,49.64878906],[3.580625,49.64878906],[3.5015625,49.64878906],[3.4225,49.64878906],[3.4225,49.608125],[3.3434375,49.608125],[3.3434375,49.56746094],[3.264375,49.56746094],[3.1853125,49.56746094],[3.10625,49.56746094],[3.10625,49.52679688],[3.0271875,49.52679688],[3.0271875,49.48613281],[2.948125,49.48613281]],[[4.2921875,49.48613281],[4.2921875,49.44546875],[4.37125,49.44546875],[4.37125,49.48613281],[4.2921875,49.48613281]],[[5.161875,49.2828125],[5.161875,49.24214844],[5.161875,49.20148437],[5.161875,49.16082031],[5.161875,49.12015625],[5.161875,49.07949219],[5.161875,49.03882813],[5.2409375,49.03882813],[5.2409375,48.99816406],[5.2409375,48.9575],[5.32,48.9575],[5.32,48.91683594],[5.3990625,48.91683594],[5.3990625,48.87617187],[5.3990625,48.83550781],[5.478125,48.83550781],[5.478125,48.87617187],[5.478125,48.91683594],[5.478125,48.9575],[5.3990625,48.9575],[5.3990625,48.99816406],[5.3990625,49.03882813],[5.3990625,49.07949219],[5.3990625,49.12015625],[5.32,49.12015625],[5.32,49.16082031],[5.32,49.20148437],[5.2409375,49.20148437],[5.2409375,49.24214844],[5.2409375,49.2828125],[5.2409375,49.32347656],[5.161875,49.32347656],[5.161875,49.2828125]],[[5.0828125,48.9575],[5.161875,48.9575],[5.161875,48.99816406],[5.0828125,48.99816406],[5.0828125,48.9575]],[[4.529375,49.16082031],[4.6084375,49.16082031],[4.6084375,49.20148437],[4.529375,49.20148437],[4.529375,49.16082031]],[[4.213125,49.40480469],[4.213125,49.36414062],[4.2921875,49.36414062],[4.2921875,49.40480469],[4.213125,49.40480469]],[[3.4225,49.77078125],[3.4225,49.73011719],[3.5015625,49.73011719],[3.580625,49.73011719],[3.6596875,49.73011719],[3.73875,49.73011719],[3.73875,49.77078125],[3.73875,49.81144531],[3.8178125,49.81144531],[3.896875,49.81144531],[3.9759375,49.81144531],[4.055,49.81144531],[4.055,49.85210937],[3.9759375,49.85210937],[3.896875,49.85210937],[3.896875,49.89277344],[3.8178125,49.89277344],[3.73875,49.89277344],[3.73875,49.85210937],[3.6596875,49.85210937],[3.580625,49.85210937],[3.5015625,49.85210937],[3.5015625,49.81144531],[3.5015625,49.77078125],[3.4225,49.77078125]],[[3.9759375,49.77078125],[3.896875,49.77078125],[3.896875,49.73011719],[3.9759375,49.73011719],[3.9759375,49.77078125]]]]},type="Feature",extent={geometry,type},default_background_layer="GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",center=[2.35,48.85],projection="EPSG:3857",zoom=10,zoom_levels={TOP:0,BOTTOM:18},olDefaults={default_background_layer,center,projection,zoom,zoom_levels};function getAllTextContent(o,e){return getAllTextContent_(o,e,[]).join("")}function getAllTextContent_(o,e,s){if(o.nodeType==Node.CDATA_SECTION_NODE||o.nodeType==Node.TEXT_NODE)s.push(o.nodeValue);else{let a;for(a=o.firstChild;a;a=a.nextSibling)getAllTextContent_(a,e,s)}return s}function isDocument(o){return"documentElement"in o}function parse(o){return new DOMParser().parseFromString(o,"application/xml")}function makeArrayPusher(o,e){return function(s,a){const d=o.call(this,s,a);d!==void 0&&a[a.length-1].push(d)}}function makeObjectPropertyPusher(o,e,s){return function(a,d){const b=o.call(this,a,d);if(b!==void 0){const _=d[d.length-1],_e=a.localName;let ot;_e in _?ot=_[_e]:(ot=[],_[_e]=ot),ot.push(b)}}}function makeObjectPropertySetter(o,e,s){return function(a,d){const b=o.call(this,a,d);if(b!==void 0){const _=d[d.length-1],_e=a.localName;_[_e]=b}}}function makeStructureNS(o,e,s){s=s!==void 0?s:{};let a,d;for(a=0,d=o.length;a<d;++a)s[o[a]]=e;return s}function parseNode(o,e,s,a){let d;for(d=e.firstElementChild;d;d=d.nextElementSibling){const b=o[d.namespaceURI];if(b!==void 0){const _=b[d.localName];_!==void 0&&_.call(a,d,s)}}}function pushParseAndPop(o,e,s,a,d){return a.push(o),parseNode(e,s,a,d),a.pop()}class XML{read(e){if(!e)return null;if(typeof e=="string"){const s=parse(e);return this.readFromDocument(s)}return isDocument(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let s=e.firstChild;s;s=s.nextSibling)if(s.nodeType==Node.ELEMENT_NODE)return this.readFromNode(s);return null}readFromNode(e){abstract()}}const NAMESPACE_URI="http://www.w3.org/1999/xlink";function readHref(o){return o.getAttributeNS(NAMESPACE_URI,"href")}function readDecimal(o){const e=getAllTextContent(o,!1);return readDecimalString(e)}function readDecimalString(o){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(o);if(e)return parseFloat(e[1])}function readPositiveInteger(o){const e=getAllTextContent(o,!1);return readNonNegativeIntegerString(e)}function readNonNegativeIntegerString(o){const e=/^\s*(\d+)\s*$/.exec(o);if(e)return parseInt(e[1],10)}function readString(o){return getAllTextContent(o,!1).trim()}const NAMESPACE_URIS$1=[null,"http://www.opengis.net/ows/1.1"],PARSERS$1=makeStructureNS(NAMESPACE_URIS$1,{ServiceIdentification:makeObjectPropertySetter(readServiceIdentification),ServiceProvider:makeObjectPropertySetter(readServiceProvider),OperationsMetadata:makeObjectPropertySetter(readOperationsMetadata)});class OWS extends XML{constructor(){super()}readFromNode(e){const s=pushParseAndPop({},PARSERS$1,e,[]);return s||null}}const ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DeliveryPoint:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),AdministrativeArea:makeObjectPropertySetter(readString),PostalCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString),ElectronicMailAddress:makeObjectPropertySetter(readString)}),ALLOWED_VALUES_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Value:makeObjectPropertyPusher(readValue)}),CONSTRAINT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{AllowedValues:makeObjectPropertySetter(readAllowedValues)}),CONTACT_INFO_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Phone:makeObjectPropertySetter(readPhone),Address:makeObjectPropertySetter(readAddress)}),DCP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{HTTP:makeObjectPropertySetter(readHttp)}),HTTP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Get:makeObjectPropertyPusher(readGet),Post:void 0}),OPERATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DCP:makeObjectPropertySetter(readDcp)}),OPERATIONS_METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Operation:readOperation}),PHONE_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Voice:makeObjectPropertySetter(readString),Facsimile:makeObjectPropertySetter(readString)}),REQUEST_METHOD_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Constraint:makeObjectPropertyPusher(readConstraint)}),SERVICE_CONTACT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{IndividualName:makeObjectPropertySetter(readString),PositionName:makeObjectPropertySetter(readString),ContactInfo:makeObjectPropertySetter(readContactInfo)}),SERVICE_IDENTIFICATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Abstract:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),Fees:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),ServiceTypeVersion:makeObjectPropertySetter(readString),ServiceType:makeObjectPropertySetter(readString)}),SERVICE_PROVIDER_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{ProviderName:makeObjectPropertySetter(readString),ProviderSite:makeObjectPropertySetter(readHref),ServiceContact:makeObjectPropertySetter(readServiceContact)});function readAddress(o,e){return pushParseAndPop({},ADDRESS_PARSERS,o,e)}function readAllowedValues(o,e){return pushParseAndPop({},ALLOWED_VALUES_PARSERS,o,e)}function readConstraint(o,e){const s=o.getAttribute("name");if(s)return pushParseAndPop({name:s},CONSTRAINT_PARSERS,o,e)}function readContactInfo(o,e){return pushParseAndPop({},CONTACT_INFO_PARSERS,o,e)}function readDcp(o,e){return pushParseAndPop({},DCP_PARSERS,o,e)}function readGet(o,e){const s=readHref(o);if(s)return pushParseAndPop({href:s},REQUEST_METHOD_PARSERS,o,e)}function readHttp(o,e){return pushParseAndPop({},HTTP_PARSERS,o,e)}function readOperation(o,e){const s=o.getAttribute("name"),a=pushParseAndPop({},OPERATION_PARSERS,o,e);if(!a)return;const d=e[e.length-1];d[s]=a}function readOperationsMetadata(o,e){return pushParseAndPop({},OPERATIONS_METADATA_PARSERS,o,e)}function readPhone(o,e){return pushParseAndPop({},PHONE_PARSERS,o,e)}function readServiceIdentification(o,e){return pushParseAndPop({},SERVICE_IDENTIFICATION_PARSERS,o,e)}function readServiceContact(o,e){return pushParseAndPop({},SERVICE_CONTACT_PARSERS,o,e)}function readServiceProvider(o,e){return pushParseAndPop({},SERVICE_PROVIDER_PARSERS,o,e)}function readValue(o,e){return readString(o)}const NAMESPACE_URIS=[null,"http://www.opengis.net/wmts/1.0"],OWS_NAMESPACE_URIS=[null,"http://www.opengis.net/ows/1.1"],PARSERS=makeStructureNS(NAMESPACE_URIS,{Contents:makeObjectPropertySetter(readContents)});class WMTSCapabilities extends XML{constructor(){super(),this.owsParser_=new OWS}readFromNode(e){let s=e.getAttribute("version");s&&(s=s.trim());let a=this.owsParser_.readFromNode(e);return a?(a.version=s,a=pushParseAndPop(a,PARSERS,e,[]),a||null):null}}const CONTENTS_PARSERS=makeStructureNS(NAMESPACE_URIS,{Layer:makeObjectPropertyPusher(readLayer),TileMatrixSet:makeObjectPropertyPusher(readTileMatrixSet)}),LAYER_PARSERS=makeStructureNS(NAMESPACE_URIS,{Style:makeObjectPropertyPusher(readStyle),Format:makeObjectPropertyPusher(readString),TileMatrixSetLink:makeObjectPropertyPusher(readTileMatrixSetLink),Dimension:makeObjectPropertyPusher(readDimensions),ResourceURL:makeObjectPropertyPusher(readResourceUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),WGS84BoundingBox:makeObjectPropertySetter(readBoundingBox),Identifier:makeObjectPropertySetter(readString)})),STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS,{LegendURL:makeObjectPropertyPusher(readLegendUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString)})),TMS_LINKS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixSet:makeObjectPropertySetter(readString),TileMatrixSetLimits:makeObjectPropertySetter(readTileMatrixLimitsList)}),TMS_LIMITS_LIST_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixLimits:makeArrayPusher(readTileMatrixLimits)}),TMS_LIMITS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrix:makeObjectPropertySetter(readString),MinTileRow:makeObjectPropertySetter(readPositiveInteger),MaxTileRow:makeObjectPropertySetter(readPositiveInteger),MinTileCol:makeObjectPropertySetter(readPositiveInteger),MaxTileCol:makeObjectPropertySetter(readPositiveInteger)}),DIMENSION_PARSERS=makeStructureNS(NAMESPACE_URIS,{Default:makeObjectPropertySetter(readString),Value:makeObjectPropertyPusher(readString)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)})),WGS84_BBOX_READERS=makeStructureNS(OWS_NAMESPACE_URIS,{LowerCorner:makeArrayPusher(readCoordinates),UpperCorner:makeArrayPusher(readCoordinates)}),TMS_PARSERS=makeStructureNS(NAMESPACE_URIS,{WellKnownScaleSet:makeObjectPropertySetter(readString),TileMatrix:makeObjectPropertyPusher(readTileMatrix)},makeStructureNS(OWS_NAMESPACE_URIS,{SupportedCRS:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString),BoundingBox:makeObjectPropertySetter(readBoundingBox)})),TM_PARSERS=makeStructureNS(NAMESPACE_URIS,{TopLeftCorner:makeObjectPropertySetter(readCoordinates),ScaleDenominator:makeObjectPropertySetter(readDecimal),TileWidth:makeObjectPropertySetter(readPositiveInteger),TileHeight:makeObjectPropertySetter(readPositiveInteger),MatrixWidth:makeObjectPropertySetter(readPositiveInteger),MatrixHeight:makeObjectPropertySetter(readPositiveInteger)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)}));function readContents(o,e){return pushParseAndPop({},CONTENTS_PARSERS,o,e)}function readLayer(o,e){return pushParseAndPop({},LAYER_PARSERS,o,e)}function readTileMatrixSet(o,e){return pushParseAndPop({},TMS_PARSERS,o,e)}function readStyle(o,e){const s=pushParseAndPop({},STYLE_PARSERS,o,e);if(!s)return;const a=o.getAttribute("isDefault")==="true";return s.isDefault=a,s}function readTileMatrixSetLink(o,e){return pushParseAndPop({},TMS_LINKS_PARSERS,o,e)}function readDimensions(o,e){return pushParseAndPop({},DIMENSION_PARSERS,o,e)}function readResourceUrl(o,e){const s=o.getAttribute("format"),a=o.getAttribute("template"),d=o.getAttribute("resourceType"),b={};return s&&(b.format=s),a&&(b.template=a),d&&(b.resourceType=d),b}function readBoundingBox(o,e){const s=pushParseAndPop([],WGS84_BBOX_READERS,o,e);if(s.length==2)return boundingExtent(s)}function readLegendUrl(o,e){const s={};return s.format=o.getAttribute("format"),s.href=readHref(o),s}function readCoordinates(o,e){const s=readString(o).split(/\s+/);if(!s||s.length!=2)return;const a=+s[0],d=+s[1];if(!(isNaN(a)||isNaN(d)))return[a,d]}function readTileMatrix(o,e){return pushParseAndPop({},TM_PARSERS,o,e)}function readTileMatrixLimitsList(o,e){return pushParseAndPop([],TMS_LIMITS_LIST_PARSERS,o,e)}function readTileMatrixLimits(o,e){return pushParseAndPop({},TMS_LIMITS_PARSERS,o,e)}const useCapabilities=(o="cartes")=>useQuery({queryKey:["gpp_get_cap",o],queryFn:async()=>{const e=await fetch("https://data.geopf.fr/wmts?SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetCapabilities");if(!e.ok)throw new Error(`Bad response from server : ${e.status}`);const s=await e.text(),d=new WMTSCapabilities().read(s);if(!d)throw new Error("Reading capabilities failed");return d},staleTime:1/0}),ExtentMap=()=>{const o=reactExports.useRef(null),e=reactExports.useRef();reactExports.useRef(null);const{data:s}=useCapabilities();reactExports.useEffect(()=>{new Gp.Services.Config({customConfigFile:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/fullConfig.json",onSuccess:()=>{console.log("gp config loaded!")},onFailure:_=>{console.error(_)}}).call()},[]);const a=reactExports.useMemo(()=>{const b=new GeoJSON({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).readFeatures(extent),_=new VectorSource({features:b});return new VectorLayer({source:_})},[]),d=reactExports.useMemo(()=>{if(!s)return;const b=optionsFromCapabilities(s,{layer:olDefaults.default_background_layer});if(!b)return;const _=new TileLayer;return _.setSource(new WMTS$1(b)),_},[s]);return reactExports.useEffect(()=>{if(!d||!a)return;const b=new LayerSwitcher({layers:[{layer:d,config:{title:"Plan IGN v2"}},{layer:a,config:{title:"Emprise"}}],options:{position:"top-right",collapsed:!0,panel:!0,counter:!0}}),_=new Catalog({target:"catalog",collapsed:!1,draggable:!1,titlePrimary:"",titleSecondary:"Grer vos couches de donnes",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Donnes",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]},position:"top-left"}),_e=[b,new SearchEngine({collapsed:!0,displayAdvancedSearch:!1,apiKey:"essentiels",zoomTo:"auto"}),new ScaleLine,new GeoportalZoom({position:"top-left"}),new GeoportalFullScreen({position:"bottom-right"}),_];e.current=new Map$1({target:o.current,layers:[d,a],interactions:defaults$2(),controls:_e,view:new View({projection:olDefaults.projection,center:fromLonLat(olDefaults.center),zoom:olDefaults.zoom})});const ot=a.getSource();return ot&&e.current.getView().fit(ot.getExtent()),()=>{var st;return(st=e.current)==null?void 0:st.setTarget(void 0)}},[d,a]),jsxRuntimeExports.jsxs("div",{className:fr.cx("fr-grid-row"),children:[jsxRuntimeExports.jsx("div",{className:fr.cx("fr-col-5"),id:"catalog"}),jsxRuntimeExports.jsx("div",{className:cx$1(fr.cx("fr-col-7"),"map-view"),ref:o})]})};var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function o(a,d,b,_,_e,ot){if(ot!==ReactPropTypesSecret){var st=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw st.name="Invariant Violation",st}}o.isRequired=o;function e(){return o}var s={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:e,element:o,elementType:o,instanceOf:e,node:o,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return s.PropTypes=s,s};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports,__assign$2=function(){return __assign$2=Object.assign||function(o){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(o[d]=e[d])}return o},__assign$2.apply(this,arguments)},eventPropTypes={onActivate:propTypesExports.func,onAddUndo:propTypesExports.func,onBeforeAddUndo:propTypesExports.func,onBeforeExecCommand:propTypesExports.func,onBeforeGetContent:propTypesExports.func,onBeforeRenderUI:propTypesExports.func,onBeforeSetContent:propTypesExports.func,onBeforePaste:propTypesExports.func,onBlur:propTypesExports.func,onChange:propTypesExports.func,onClearUndos:propTypesExports.func,onClick:propTypesExports.func,onContextMenu:propTypesExports.func,onCommentChange:propTypesExports.func,onCompositionEnd:propTypesExports.func,onCompositionStart:propTypesExports.func,onCompositionUpdate:propTypesExports.func,onCopy:propTypesExports.func,onCut:propTypesExports.func,onDblclick:propTypesExports.func,onDeactivate:propTypesExports.func,onDirty:propTypesExports.func,onDrag:propTypesExports.func,onDragDrop:propTypesExports.func,onDragEnd:propTypesExports.func,onDragGesture:propTypesExports.func,onDragOver:propTypesExports.func,onDrop:propTypesExports.func,onExecCommand:propTypesExports.func,onFocus:propTypesExports.func,onFocusIn:propTypesExports.func,onFocusOut:propTypesExports.func,onGetContent:propTypesExports.func,onHide:propTypesExports.func,onInit:propTypesExports.func,onInput:propTypesExports.func,onKeyDown:propTypesExports.func,onKeyPress:propTypesExports.func,onKeyUp:propTypesExports.func,onLoadContent:propTypesExports.func,onMouseDown:propTypesExports.func,onMouseEnter:propTypesExports.func,onMouseLeave:propTypesExports.func,onMouseMove:propTypesExports.func,onMouseOut:propTypesExports.func,onMouseOver:propTypesExports.func,onMouseUp:propTypesExports.func,onNodeChange:propTypesExports.func,onObjectResizeStart:propTypesExports.func,onObjectResized:propTypesExports.func,onObjectSelected:propTypesExports.func,onPaste:propTypesExports.func,onPostProcess:propTypesExports.func,onPostRender:propTypesExports.func,onPreProcess:propTypesExports.func,onProgressState:propTypesExports.func,onRedo:propTypesExports.func,onRemove:propTypesExports.func,onReset:propTypesExports.func,onSaveContent:propTypesExports.func,onSelectionChange:propTypesExports.func,onSetAttrib:propTypesExports.func,onSetContent:propTypesExports.func,onShow:propTypesExports.func,onSubmit:propTypesExports.func,onUndo:propTypesExports.func,onVisualAid:propTypesExports.func,onSkinLoadError:propTypesExports.func,onThemeLoadError:propTypesExports.func,onModelLoadError:propTypesExports.func,onPluginLoadError:propTypesExports.func,onIconsLoadError:propTypesExports.func,onLanguageLoadError:propTypesExports.func,onScriptsLoad:propTypesExports.func,onScriptsLoadError:propTypesExports.func},EditorPropTypes=__assign$2({apiKey:propTypesExports.string,licenseKey:propTypesExports.string,id:propTypesExports.string,inline:propTypesExports.bool,init:propTypesExports.object,initialValue:propTypesExports.string,onEditorChange:propTypesExports.func,value:propTypesExports.string,tagName:propTypesExports.string,tabIndex:propTypesExports.number,cloudChannel:propTypesExports.string,plugins:propTypesExports.oneOfType([propTypesExports.string,propTypesExports.array]),toolbar:propTypesExports.oneOfType([propTypesExports.string,propTypesExports.array]),disabled:propTypesExports.bool,textareaName:propTypesExports.string,tinymceScriptSrc:propTypesExports.oneOfType([propTypesExports.string,propTypesExports.arrayOf(propTypesExports.string),propTypesExports.arrayOf(propTypesExports.shape({src:propTypesExports.string,async:propTypesExports.bool,defer:propTypesExports.bool}))]),rollback:propTypesExports.oneOfType([propTypesExports.number,propTypesExports.oneOf([!1])]),scriptLoading:propTypesExports.shape({async:propTypesExports.bool,defer:propTypesExports.bool,delay:propTypesExports.number})},eventPropTypes),isFunction$1=function(o){return typeof o=="function"},isEventProp=function(o){return o in eventPropTypes},eventAttrToEventName=function(o){return o.substr(2)},configHandlers2=function(o,e,s,a,d,b,_){var _e=Object.keys(d).filter(isEventProp),ot=Object.keys(b).filter(isEventProp),st=_e.filter(function(ft){return b[ft]===void 0}),ct=ot.filter(function(ft){return d[ft]===void 0});st.forEach(function(ft){var mt=eventAttrToEventName(ft),bt=_[mt];s(mt,bt),delete _[mt]}),ct.forEach(function(ft){var mt=a(o,ft),bt=eventAttrToEventName(ft);_[bt]=mt,e(bt,mt)})},configHandlers=function(o,e,s,a,d){return configHandlers2(d,o.on.bind(o),o.off.bind(o),function(b,_){return function(_e){var ot;return(ot=b(_))===null||ot===void 0?void 0:ot(_e,o)}},e,s,a)},unique=0,uuid=function(o){var e=Date.now(),s=Math.floor(Math.random()*1e9);return unique++,o+"_"+s+unique+String(e)},isTextareaOrInput=function(o){return o!==null&&(o.tagName.toLowerCase()==="textarea"||o.tagName.toLowerCase()==="input")},normalizePluginArray=function(o){return typeof o>"u"||o===""?[]:Array.isArray(o)?o:o.split(" ")},mergePlugins=function(o,e){return normalizePluginArray(o).concat(normalizePluginArray(e))},isBeforeInputEventAvailable=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},isInDoc=function(o){if(!("isConnected"in Node.prototype)){for(var e=o,s=o.parentNode;s!=null;)e=s,s=e.parentNode;return e===o.ownerDocument}return o.isConnected},setMode=function(o,e){o!==void 0&&(o.mode!=null&&typeof o.mode=="object"&&typeof o.mode.set=="function"?o.mode.set(e):o.setMode(e))},__assign$1=function(){return __assign$1=Object.assign||function(o){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(o[d]=e[d])}return o},__assign$1.apply(this,arguments)},injectScriptTag=function(o,e,s){var a,d,b=o.createElement("script");b.referrerPolicy="origin",b.type="application/javascript",b.id=e.id,b.src=e.src,b.async=(a=e.async)!==null&&a!==void 0?a:!1,b.defer=(d=e.defer)!==null&&d!==void 0?d:!1;var _=function(){b.removeEventListener("load",_),b.removeEventListener("error",_e),s(e.src)},_e=function(ot){b.removeEventListener("load",_),b.removeEventListener("error",_e),s(e.src,ot)};b.addEventListener("load",_),b.addEventListener("error",_e),o.head&&o.head.appendChild(b)},createDocumentScriptLoader=function(o){var e={},s=function(_,_e){var ot=e[_];ot.done=!0,ot.error=_e;for(var st=0,ct=ot.handlers;st<ct.length;st++){var ft=ct[st];ft(_,_e)}ot.handlers=[]},a=function(_,_e,ot){var st=function(Pt){return ot!==void 0?ot(Pt):console.error(Pt)};if(_.length===0){st(new Error("At least one script must be provided"));return}for(var ct=0,ft=!1,mt=function(Pt,Tt){ft||(Tt?(ft=!0,st(Tt)):++ct===_.length&&_e())},bt=0,wt=_;bt<wt.length;bt++){var Ct=wt[bt],Rt=e[Ct.src];if(Rt)Rt.done?mt(Ct.src,Rt.error):Rt.handlers.push(mt);else{var It=uuid("tiny-");e[Ct.src]={id:It,src:Ct.src,done:!1,error:null,handlers:[mt]},injectScriptTag(o,__assign$1({id:It},Ct),s)}}},d=function(){for(var _,_e=0,ot=Object.values(e);_e<ot.length;_e++){var st=ot[_e],ct=o.getElementById(st.id);ct!=null&&ct.tagName==="SCRIPT"&&((_=ct.parentNode)===null||_===void 0||_.removeChild(ct))}e={}},b=function(){return o};return{loadScripts:a,deleteScripts:d,getDocument:b}},createScriptLoader=function(){var o=[],e=function(d){var b=o.find(function(_){return _.getDocument()===d});return b===void 0&&(b=createDocumentScriptLoader(d),o.push(b)),b},s=function(d,b,_,_e,ot){var st=function(){return e(d).loadScripts(b,_e,ot)};_>0?setTimeout(st,_):st()},a=function(){for(var d=o.pop();d!=null;d=o.pop())d.deleteScripts()};return{loadList:s,reinitialize:a}},ScriptLoader=createScriptLoader(),getTinymce=function(o){var e=o;return e&&e.tinymce?e.tinymce:null},__extends=function(){var o=function(e,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var b in d)Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])},o(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");o(e,s);function a(){this.constructor=e}e.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}(),__assign=function(){return __assign=Object.assign||function(o){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(o[d]=e[d])}return o},__assign.apply(this,arguments)},Editor$1=function(o){__extends(e,o);function e(s){var a,d,b,_=o.call(this,s)||this;return _.rollbackTimer=void 0,_.valueCursor=void 0,_.rollbackChange=function(){var _e=_.editor,ot=_.props.value;_e&&ot&&ot!==_.currentContent&&_e.undoManager.ignore(function(){if(_e.setContent(ot),_.valueCursor&&(!_.inline||_e.hasFocus()))try{_e.selection.moveToBookmark(_.valueCursor)}catch{}}),_.rollbackTimer=void 0},_.handleBeforeInput=function(_e){if(_.props.value!==void 0&&_.props.value===_.currentContent&&_.editor&&(!_.inline||_.editor.hasFocus()))try{_.valueCursor=_.editor.selection.getBookmark(3)}catch{}},_.handleBeforeInputSpecial=function(_e){(_e.key==="Enter"||_e.key==="Backspace"||_e.key==="Delete")&&_.handleBeforeInput(_e)},_.handleEditorChange=function(_e){var ot=_.editor;if(ot&&ot.initialized){var st=ot.getContent();_.props.value!==void 0&&_.props.value!==st&&_.props.rollback!==!1&&(_.rollbackTimer||(_.rollbackTimer=window.setTimeout(_.rollbackChange,typeof _.props.rollback=="number"?_.props.rollback:200))),st!==_.currentContent&&(_.currentContent=st,isFunction$1(_.props.onEditorChange)&&_.props.onEditorChange(st,ot))}},_.handleEditorChangeSpecial=function(_e){(_e.key==="Backspace"||_e.key==="Delete")&&_.handleEditorChange(_e)},_.initialise=function(_e){var ot,st,ct;_e===void 0&&(_e=0);var ft=_.elementRef.current;if(ft){if(!isInDoc(ft)){if(_e===0)setTimeout(function(){return _.initialise(1)},1);else if(_e<100)setTimeout(function(){return _.initialise(_e+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var mt=getTinymce(_.view);if(!mt)throw new Error("tinymce should have been loaded into global scope");var bt=__assign(__assign(__assign(__assign({},_.props.init),{selector:void 0,target:ft,readonly:_.props.disabled,inline:_.inline,plugins:mergePlugins((ot=_.props.init)===null||ot===void 0?void 0:ot.plugins,_.props.plugins),toolbar:(st=_.props.toolbar)!==null&&st!==void 0?st:(ct=_.props.init)===null||ct===void 0?void 0:ct.toolbar}),_.props.licenseKey?{license_key:_.props.licenseKey}:{}),{setup:function(wt){_.editor=wt,_.bindHandlers({}),_.inline&&!isTextareaOrInput(ft)&&wt.once("PostRender",function(Ct){wt.setContent(_.getInitialValue(),{no_events:!0})}),_.props.init&&isFunction$1(_.props.init.setup)&&_.props.init.setup(wt)},init_instance_callback:function(wt){var Ct,Rt,It=_.getInitialValue();_.currentContent=(Ct=_.currentContent)!==null&&Ct!==void 0?Ct:wt.getContent(),_.currentContent!==It&&(_.currentContent=It,wt.setContent(It),wt.undoManager.clear(),wt.undoManager.add(),wt.setDirty(!1));var Pt=(Rt=_.props.disabled)!==null&&Rt!==void 0?Rt:!1;setMode(_.editor,Pt?"readonly":"design"),_.props.init&&isFunction$1(_.props.init.init_instance_callback)&&_.props.init.init_instance_callback(wt)}});_.inline||(ft.style.visibility=""),isTextareaOrInput(ft)&&(ft.value=_.getInitialValue()),mt.init(bt)}},_.id=_.props.id||uuid("tiny-react"),_.elementRef=reactExports.createRef(),_.inline=(b=(a=_.props.inline)!==null&&a!==void 0?a:(d=_.props.init)===null||d===void 0?void 0:d.inline)!==null&&b!==void 0?b:!1,_.boundHandlers={},_}return Object.defineProperty(e.prototype,"view",{get:function(){var s,a;return(a=(s=this.elementRef.current)===null||s===void 0?void 0:s.ownerDocument.defaultView)!==null&&a!==void 0?a:window},enumerable:!1,configurable:!0}),e.prototype.componentDidUpdate=function(s){var a=this,d,b;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(s),this.editor.initialized)){if(this.currentContent=(d=this.currentContent)!==null&&d!==void 0?d:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==s.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var _=this.editor;_.undoManager.transact(function(){var ot;if(!a.inline||_.hasFocus())try{ot=_.selection.getBookmark(3)}catch{}var st=a.valueCursor;if(_.setContent(a.props.value),!a.inline||_.hasFocus())for(var ct=0,ft=[ot,st];ct<ft.length;ct++){var mt=ft[ct];if(mt)try{_.selection.moveToBookmark(mt),a.valueCursor=mt;break}catch{}}})}if(this.props.disabled!==s.disabled){var _e=(b=this.props.disabled)!==null&&b!==void 0?b:!1;setMode(this.editor,_e?"readonly":"design")}}},e.prototype.componentDidMount=function(){var s=this,a,d,b,_,_e;if(getTinymce(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(d=(a=this.props).onScriptsLoadError)===null||d===void 0||d.call(a,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((b=this.elementRef.current)===null||b===void 0)&&b.ownerDocument){var ot=function(){var ct,ft;(ft=(ct=s.props).onScriptsLoad)===null||ft===void 0||ft.call(ct),s.initialise()},st=function(ct){var ft,mt;(mt=(ft=s.props).onScriptsLoadError)===null||mt===void 0||mt.call(ft,ct)};ScriptLoader.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(_e=(_=this.props.scriptLoading)===null||_===void 0?void 0:_.delay)!==null&&_e!==void 0?_e:0,ot,st)}},e.prototype.componentWillUnmount=function(){var s=this,a=this.editor;a&&(a.off(this.changeEvents(),this.handleEditorChange),a.off(this.beforeInputEvent(),this.handleBeforeInput),a.off("keypress",this.handleEditorChangeSpecial),a.off("keydown",this.handleBeforeInputSpecial),a.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(d){a.off(d,s.boundHandlers[d])}),this.boundHandlers={},a.remove(),this.editor=void 0)},e.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},e.prototype.changeEvents=function(){var s,a,d,b=(d=(a=(s=getTinymce(this.view))===null||s===void 0?void 0:s.Env)===null||a===void 0?void 0:a.browser)===null||d===void 0?void 0:d.isIE();return b?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},e.prototype.beforeInputEvent=function(){return isBeforeInputEventAvailable()?"beforeinput SelectionChange":"SelectionChange"},e.prototype.renderInline=function(){var s=this.props.tagName,a=s===void 0?"div":s;return reactExports.createElement(a,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},e.prototype.renderIframe=function(){return reactExports.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},e.prototype.getScriptSources=function(){var s,a,d=(s=this.props.scriptLoading)===null||s===void 0?void 0:s.async,b=(a=this.props.scriptLoading)===null||a===void 0?void 0:a.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:d,defer:b}]:this.props.tinymceScriptSrc.map(function(st){return typeof st=="string"?{src:st,async:d,defer:b}:st});var _=this.props.cloudChannel,_e=this.props.apiKey?this.props.apiKey:"no-api-key",ot="https://cdn.tiny.cloud/1/".concat(_e,"/tinymce/").concat(_,"/tinymce.min.js");return[{src:ot,async:d,defer:b}]},e.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},e.prototype.bindHandlers=function(s){var a=this;if(this.editor!==void 0){configHandlers(this.editor,s,this.props,this.boundHandlers,function(_e){return a.props[_e]});var d=function(_e){return _e.onEditorChange!==void 0||_e.value!==void 0},b=d(s),_=d(this.props);!b&&_?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):b&&!_&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},e.propTypes=EditorPropTypes,e.defaultProps={cloudChannel:"7"},e}(reactExports.Component),tinymce$1={exports:{}};(function(o){(function(){var e=function(c){if(c===null)return"null";if(c===void 0)return"undefined";var g=typeof c;return g==="object"&&(Array.prototype.isPrototypeOf(c)||c.constructor&&c.constructor.name==="Array")?"array":g==="object"&&(String.prototype.isPrototypeOf(c)||c.constructor&&c.constructor.name==="String")?"string":g},s=function(c){return["undefined","boolean","number","string","function","xml","null"].indexOf(c)!==-1},a=function(c,g){var $=Array.prototype.slice.call(c);return $.sort(g)},d=function(c,g){return b(function($,et){return c.eq(g($),g(et))})},b=function(c){return{eq:c}},_=b(function(c,g){return c===g}),_e=_,ot=function(c){return b(function(g,$){if(g.length!==$.length)return!1;for(var et=g.length,rt=0;rt<et;rt++)if(!c.eq(g[rt],$[rt]))return!1;return!0})},st=function(c,g){return d(ot(c),function($){return a($,g)})},ct=function(c){return b(function(g,$){var et=Object.keys(g),rt=Object.keys($);if(!st(_e).eq(et,rt))return!1;for(var ut=et.length,pt=0;pt<ut;pt++){var xt=et[pt];if(!c.eq(g[xt],$[xt]))return!1}return!0})},ft=b(function(c,g){if(c===g)return!0;var $=e(c),et=e(g);return $!==et?!1:s($)?c===g:$==="array"?ot(ft).eq(c,g):$==="object"?ct(ft).eq(c,g):!1});const mt=Object.getPrototypeOf,bt=(c,g,$)=>{var et;return $(c,g.prototype)?!0:((et=c.constructor)===null||et===void 0?void 0:et.name)===g.name},wt=c=>{const g=typeof c;return c===null?"null":g==="object"&&Array.isArray(c)?"array":g==="object"&&bt(c,String,($,et)=>et.isPrototypeOf($))?"string":g},Ct=c=>g=>wt(g)===c,Rt=c=>g=>typeof g===c,It=c=>g=>c===g,Pt=(c,g)=>Gt(c)&&bt(c,g,($,et)=>mt($)===et),Tt=Ct("string"),Gt=Ct("object"),Jt=c=>Pt(c,Object),qt=Ct("array"),Nt=It(null),Qt=Rt("boolean"),fn=It(void 0),Mn=c=>c==null,ln=c=>!Mn(c),Wt=Rt("function"),so=Rt("number"),pn=(c,g)=>{if(qt(c)){for(let $=0,et=c.length;$<et;++$)if(!g(c[$]))return!1;return!0}return!1},hn=()=>{},Mt=(c,g)=>(...$)=>c(g.apply(null,$)),Hn=(c,g)=>$=>c(g($)),cn=c=>()=>c,fo=c=>c,Fn=(c,g)=>c===g;function Tn(c,...g){return(...$)=>{const et=g.concat($);return c.apply(null,et)}}const qn=c=>g=>!c(g),nr=c=>()=>{throw new Error(c)},oo=c=>c(),Mo=c=>{c()},Dn=cn(!1),xo=cn(!0);class Xt{constructor(g,$){this.tag=g,this.value=$}static some(g){return new Xt(!0,g)}static none(){return Xt.singletonNone}fold(g,$){return this.tag?$(this.value):g()}isSome(){return this.tag}isNone(){return!this.tag}map(g){return this.tag?Xt.some(g(this.value)):Xt.none()}bind(g){return this.tag?g(this.value):Xt.none()}exists(g){return this.tag&&g(this.value)}forall(g){return!this.tag||g(this.value)}filter(g){return!this.tag||g(this.value)?this:Xt.none()}getOr(g){return this.tag?this.value:g}or(g){return this.tag?this:g}getOrThunk(g){return this.tag?this.value:g()}orThunk(g){return this.tag?this:g()}getOrDie(g){if(this.tag)return this.value;throw new Error(g??"Called getOrDie on None")}static from(g){return ln(g)?Xt.some(g):Xt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(g){this.tag&&g(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Xt.singletonNone=new Xt(!1);const Ur=Array.prototype.slice,co=Array.prototype.indexOf,Vo=Array.prototype.push,yo=(c,g)=>co.call(c,g),ko=(c,g)=>{const $=yo(c,g);return $===-1?Xt.none():Xt.some($)},yn=(c,g)=>yo(c,g)>-1,Cn=(c,g)=>{for(let $=0,et=c.length;$<et;$++){const rt=c[$];if(g(rt,$))return!0}return!1},Nn=(c,g)=>{const $=c.length,et=new Array($);for(let rt=0;rt<$;rt++){const ut=c[rt];et[rt]=g(ut,rt)}return et},sn=(c,g)=>{for(let $=0,et=c.length;$<et;$++){const rt=c[$];g(rt,$)}},kn=(c,g)=>{for(let $=c.length-1;$>=0;$--){const et=c[$];g(et,$)}},Ln=(c,g)=>{const $=[],et=[];for(let rt=0,ut=c.length;rt<ut;rt++){const pt=c[rt];(g(pt,rt)?$:et).push(pt)}return{pass:$,fail:et}},Bn=(c,g)=>{const $=[];for(let et=0,rt=c.length;et<rt;et++){const ut=c[et];g(ut,et)&&$.push(ut)}return $},Eo=(c,g,$)=>(kn(c,(et,rt)=>{$=g($,et,rt)}),$),Wn=(c,g,$)=>(sn(c,(et,rt)=>{$=g($,et,rt)}),$),Rn=(c,g,$)=>{for(let et=0,rt=c.length;et<rt;et++){const ut=c[et];if(g(ut,et))return Xt.some(ut);if($(ut,et))break}return Xt.none()},Qn=(c,g)=>Rn(c,g,Dn),vo=(c,g)=>{for(let $=0,et=c.length;$<et;$++){const rt=c[$];if(g(rt,$))return Xt.some($)}return Xt.none()},Gn=c=>{const g=[];for(let $=0,et=c.length;$<et;++$){if(!qt(c[$]))throw new Error("Arr.flatten item "+$+" was not an array, input: "+c);Vo.apply(g,c[$])}return g},ro=(c,g)=>Gn(Nn(c,g)),Co=(c,g)=>{for(let $=0,et=c.length;$<et;++$){const rt=c[$];if(g(rt,$)!==!0)return!1}return!0},Do=c=>{const g=Ur.call(c,0);return g.reverse(),g},Mr=(c,g)=>Bn(c,$=>!yn(g,$)),ar=(c,g)=>{const $={};for(let et=0,rt=c.length;et<rt;et++){const ut=c[et];$[String(ut)]=g(ut,et)}return $},xr=(c,g)=>{const $=Ur.call(c,0);return $.sort(g),$},us=(c,g)=>g>=0&&g<c.length?Xt.some(c[g]):Xt.none(),wr=c=>us(c,0),gs=c=>us(c,c.length-1),Ts=Wt(Array.from)?Array.from:c=>Ur.call(c),Rs=(c,g)=>{for(let $=0;$<c.length;$++){const et=g(c[$],$);if(et.isSome())return et}return Xt.none()},Cl=(c,g)=>{const $=[],et=Wt(g)?rt=>Cn($,ut=>g(ut,rt)):rt=>yn($,rt);for(let rt=0,ut=c.length;rt<ut;rt++){const pt=c[rt];et(pt)||$.push(pt)}return $},Yr=Object.keys,Dl=Object.hasOwnProperty,or=(c,g)=>{const $=Yr(c);for(let et=0,rt=$.length;et<rt;et++){const ut=$[et],pt=c[ut];g(pt,ut)}},Ds=(c,g)=>hu(c,($,et)=>({k:et,v:g($,et)})),hu=(c,g)=>{const $={};return or(c,(et,rt)=>{const ut=g(et,rt);$[ut.k]=ut.v}),$},au=c=>(g,$)=>{c[$]=g},_c=(c,g,$,et)=>{or(c,(rt,ut)=>{(g(rt,ut)?$:et)(rt,ut)})},Su=(c,g)=>{const $={},et={};return _c(c,g,au($),au(et)),{t:$,f:et}},Zs=(c,g)=>{const $={};return _c(c,g,au($),hn),$},Eu=(c,g)=>{const $=[];return or(c,(et,rt)=>{$.push(g(et,rt))}),$},uu=c=>Eu(c,fo),$a=(c,g)=>es(c,g)?Xt.from(c[g]):Xt.none(),es=(c,g)=>Dl.call(c,g),yl=(c,g)=>es(c,g)&&c[g]!==void 0&&c[g]!==null,mo=(c,g,$=ft)=>ct($).eq(c,g),Oo=c=>{const g={};return sn(c,$=>{g[$]={}}),Yr(g)},Ar=c=>c.length!==void 0,Br=Array.isArray,Ws=c=>{if(Br(c))return c;{const g=[];for(let $=0,et=c.length;$<et;$++)g[$]=c[$];return g}},_l=(c,g,$)=>{if(!c)return!1;if($=$||c,Ar(c)){for(let et=0,rt=c.length;et<rt;et++)if(g.call($,c[et],et,c)===!1)return!1}else for(const et in c)if(es(c,et)&&g.call($,c[et],et,c)===!1)return!1;return!0},Wu=(c,g)=>{const $=[];return _l(c,(et,rt)=>{$.push(g(et,rt,c))}),$},qu=(c,g)=>{const $=[];return _l(c,(et,rt)=>{(!g||g(et,rt,c))&&$.push(et)}),$},Mu=(c,g)=>{if(c){for(let $=0,et=c.length;$<et;$++)if(c[$]===g)return $}return-1},Vn=(c,g,$,et)=>{let rt=fn($)?c[0]:$;for(let ut=0;ut<c.length;ut++)rt=g.call(et,rt,c[ut],ut);return rt},$n=(c,g,$)=>{for(let et=0,rt=c.length;et<rt;et++)if(g.call($,c[et],et,c))return et;return-1},Po=c=>c[c.length-1],Ho=c=>{let g=!1,$;return(...et)=>(g||(g=!0,$=c.apply(null,et)),$)},cs=(c,g,$,et)=>{const rt=c.isiOS()&&/ipad/i.test($)===!0,ut=c.isiOS()&&!rt,pt=c.isiOS()||c.isAndroid(),xt=pt||et("(pointer:coarse)"),Et=rt||!ut&&pt&&et("(min-device-width:768px)"),Ft=ut||pt&&!Et,Vt=g.isSafari()&&c.isiOS()&&/safari/i.test($)===!1,Kt=!Ft&&!Et&&!Vt;return{isiPad:cn(rt),isiPhone:cn(ut),isTablet:cn(Et),isPhone:cn(Ft),isTouch:cn(xt),isAndroid:c.isAndroid,isiOS:c.isiOS,isWebView:cn(Vt),isDesktop:cn(Kt)}},Es=(c,g)=>{for(let $=0;$<c.length;$++){const et=c[$];if(et.test(g))return et}},zs=(c,g)=>{const $=Es(c,g);if(!$)return{major:0,minor:0};const et=rt=>Number(g.replace($,"$"+rt));return Bs(et(1),et(2))},Pu=(c,g)=>{const $=String(g).toLowerCase();return c.length===0?io():zs(c,$)},io=()=>Bs(0,0),Bs=(c,g)=>({major:c,minor:g}),Jn={nu:Bs,detect:Pu,unknown:io},to=(c,g)=>Rs(g.brands,$=>{const et=$.brand.toLowerCase();return Qn(c,rt=>{var ut;return et===((ut=rt.brand)===null||ut===void 0?void 0:ut.toLowerCase())}).map(rt=>({current:rt.name,version:Jn.nu(parseInt($.version,10),0)}))}),rr=(c,g)=>{const $=String(g).toLowerCase();return Qn(c,et=>et.search($))},ur=(c,g)=>rr(c,g).map($=>{const et=Jn.detect($.versionRegexes,g);return{current:$.name,version:et}}),Pr=(c,g)=>rr(c,g).map($=>{const et=Jn.detect($.versionRegexes,g);return{current:$.name,version:et}}),ns=(c,g)=>c.substring(g),rs=(c,g,$)=>g===""||c.length>=g.length&&c.substr($,$+g.length)===g,Wr=(c,g)=>As(c,g)?ns(c,g.length):c,ms=(c,g,$=0,et)=>{const rt=c.indexOf(g,$);return rt!==-1?fn(et)?!0:rt+g.length<=et:!1},As=(c,g)=>rs(c,g,0),Bl=(c,g)=>rs(c,g,c.length-g.length),eu=c=>g=>g.replace(c,""),pu=eu(/^\s+|\s+$/g),Qp=eu(/^\s+/g),cm=eu(/\s+$/g),Cs=c=>c.length>0,Rl=c=>!Cs(c),Ll=(c,g)=>g<=0?"":new Array(g+1).join(c),Ep=(c,g=10)=>{const $=parseInt(c,g);return isNaN($)?Xt.none():Xt.some($)},Ap=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,gp=c=>g=>ms(g,c),Tu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:c=>ms(c,"edge/")&&ms(c,"chrome")&&ms(c,"safari")&&ms(c,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ap],search:c=>ms(c,"chrome")&&!ms(c,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:c=>ms(c,"msie")||ms(c,"trident")},{name:"Opera",versionRegexes:[Ap,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:gp("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:gp("firefox")},{name:"Safari",versionRegexes:[Ap,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:c=>(ms(c,"safari")||ms(c,"mobile/"))&&ms(c,"applewebkit")}],v1=[{name:"Windows",search:gp("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:c=>ms(c,"iphone")||ms(c,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:gp("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:gp("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:gp("linux"),versionRegexes:[]},{name:"Solaris",search:gp("sunos"),versionRegexes:[]},{name:"FreeBSD",search:gp("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:gp("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Km={browsers:cn(Tu),oses:cn(v1)},Yl="Edge",zp="Chromium",Bp="IE",mp="Opera",ly="Firefox",um="Safari",_g=()=>Ym({current:void 0,version:Jn.unknown()}),Ym=c=>{const g=c.current,$=c.version,et=rt=>()=>g===rt;return{current:g,version:$,isEdge:et(Yl),isChromium:et(zp),isIE:et(Bp),isOpera:et(mp),isFirefox:et(ly),isSafari:et(um)}},Pm={unknown:_g,nu:Ym,edge:cn(Yl),chromium:cn(zp),ie:cn(Bp),opera:cn(mp),firefox:cn(ly),safari:cn(um)},by="Windows",vy="iOS",q0="Android",Om="Linux",Mp="macOS",cy="Solaris",uy="FreeBSD",zy="ChromeOS",R0=()=>yp({current:void 0,version:Jn.unknown()}),yp=c=>{const g=c.current,$=c.version,et=rt=>()=>g===rt;return{current:g,version:$,isWindows:et(by),isiOS:et(vy),isAndroid:et(q0),isMacOS:et(Mp),isLinux:et(Om),isSolaris:et(cy),isFreeBSD:et(uy),isChromeOS:et(zy)}},Dm={unknown:R0,nu:yp,windows:cn(by),ios:cn(vy),android:cn(q0),linux:cn(Om),macos:cn(Mp),solaris:cn(cy),freebsd:cn(uy),chromeos:cn(zy)},em={detect:(c,g,$)=>{const et=Km.browsers(),rt=Km.oses(),ut=g.bind(Et=>to(et,Et)).orThunk(()=>ur(et,c)).fold(Pm.unknown,Pm.nu),pt=Pr(rt,c).fold(Dm.unknown,Dm.nu),xt=cs(pt,ut,c,$);return{browser:ut,os:pt,deviceType:xt}}},By=c=>window.matchMedia(c).matches;let $y=Ho(()=>em.detect(window.navigator.userAgent,Xt.from(window.navigator.userAgentData),By));const dn=()=>$y(),zn=window.navigator.userAgent,ho=dn(),qo=ho.browser,mr=ho.os,Wo=ho.deviceType,Vl=zn.indexOf("Windows Phone")!==-1,Xr={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:qo.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!qo.isIE(),windowsPhone:Vl,browser:{current:qo.current,version:qo.version,isChromium:qo.isChromium,isEdge:qo.isEdge,isFirefox:qo.isFirefox,isIE:qo.isIE,isOpera:qo.isOpera,isSafari:qo.isSafari},os:{current:mr.current,version:mr.version,isAndroid:mr.isAndroid,isChromeOS:mr.isChromeOS,isFreeBSD:mr.isFreeBSD,isiOS:mr.isiOS,isLinux:mr.isLinux,isMacOS:mr.isMacOS,isSolaris:mr.isSolaris,isWindows:mr.isWindows},deviceType:{isDesktop:Wo.isDesktop,isiPad:Wo.isiPad,isiPhone:Wo.isiPhone,isPhone:Wo.isPhone,isTablet:Wo.isTablet,isTouch:Wo.isTouch,isWebView:Wo.isWebView}},Ls=/^\s*|\s*$/g,Lu=c=>Mn(c)?"":(""+c).replace(Ls,""),Yt=(c,g)=>g?g==="array"&&Br(c)?!0:typeof c===g:c!==void 0,_n=(c,g,$={})=>{const et=Tt(c)?c.split(g||","):c||[];let rt=et.length;for(;rt--;)$[et[rt]]={};return $},Kn=es,Ao=(c,...g)=>{for(let $=0;$<g.length;$++){const et=g[$];for(const rt in et)if(es(et,rt)){const ut=et[rt];ut!==void 0&&(c[rt]=ut)}}return c},Jo=function(c,g,$,et){et=et||this,c&&($&&(c=c[$]),_l(c,(rt,ut)=>g.call(et,rt,ut,$)===!1?!1:(Jo(rt,g,$,et),!0)))},dr={trim:Lu,isArray:Br,is:Yt,toArray:Ws,makeMap:_n,each:_l,map:Wu,grep:qu,inArray:Mu,hasOwn:Kn,extend:Ao,walk:Jo,resolve:(c,g=window)=>{const $=c.split(".");for(let et=0,rt=$.length;et<rt&&(g=g[$[et]],!!g);et++);return g},explode:(c,g)=>qt(c)?c:c===""?[]:Wu(c.split(g||","),Lu),_addCacheSuffix:c=>{const g=Xr.cacheSuffix;return g&&(c+=(c.indexOf("?")===-1?"?":"&")+g),c}},gu=(c,g,$=Fn)=>c.exists(et=>$(et,g)),jp=(c,g,$=Fn)=>js(c,g,$).getOr(c.isNone()&&g.isNone()),Z0=c=>{const g=[],$=et=>{g.push(et)};for(let et=0;et<c.length;et++)c[et].each($);return g},js=(c,g,$)=>c.isSome()&&g.isSome()?Xt.some($(c.getOrDie(),g.getOrDie())):Xt.none(),Xm=(c,g,$,et)=>c.isSome()&&g.isSome()&&$.isSome()?Xt.some(et(c.getOrDie(),g.getOrDie(),$.getOrDie())):Xt.none(),m0=(c,g)=>c?Xt.some(g):Xt.none(),Tp=typeof window<"u"?window:Function("return this;")(),mu=(c,g)=>{let $=g??Tp;for(let et=0;et<c.length&&$!==void 0&&$!==null;++et)$=$[c[et]];return $},K0=(c,g)=>{const $=c.split(".");return mu($,g)},jx=(c,g)=>K0(c,g),h_=(c,g)=>{const $=jx(c,g);if($==null)throw new Error(c+" not available on this browser");return $},Zu=Object.getPrototypeOf,_1=c=>h_("HTMLElement",c),M0=c=>{const g=K0("ownerDocument.defaultView",c);return Gt(c)&&(_1(g).prototype.isPrototypeOf(c)||/^HTML\w*Element$/.test(Zu(c).constructor.name))},Gu=8,P0=9,Nm=11,x1=1,vn=3,En=c=>c.dom.nodeName.toLowerCase(),To=c=>c.dom.nodeType,Zo=c=>g=>To(g)===c,ys=c=>To(c)===Gu||En(c)==="#comment",Ml=c=>_i(c)&&M0(c.dom),_i=Zo(x1),vu=Zo(vn),bp=Zo(P0),Lm=Zo(Nm),dm=c=>g=>_i(g)&&En(g)===c,cp=(c,g,$)=>{if(Tt($)||Qt($)||so($))c.setAttribute(g,$+"");else throw console.error("Invalid call to Attribute.set. Key ",g,":: Value ",$,":: Element ",c),new Error("Attribute value was not simple")},up=(c,g,$)=>{cp(c.dom,g,$)},Pp=(c,g)=>{const $=c.dom;or(g,(et,rt)=>{cp($,rt,et)})},fm=(c,g)=>{const $=c.dom.getAttribute(g);return $===null?void 0:$},Ku=(c,g)=>Xt.from(fm(c,g)),dp=(c,g)=>{const $=c.dom;return $&&$.hasAttribute?$.hasAttribute(g):!1},ju=(c,g)=>{c.dom.removeAttribute(g)},_y=c=>{const g=c.dom.attributes;return g==null||g.length===0},p_=c=>Wn(c.dom.attributes,(g,$)=>(g[$.name]=$.value,g),{}),av=(c,g)=>{const $=fm(c,g);return $===void 0||$===""?[]:$.split(" ")},w1=(c,g,$)=>{const rt=av(c,g).concat([$]);return up(c,g,rt.join(" ")),!0},k1=(c,g,$)=>{const et=Bn(av(c,g),rt=>rt!==$);return et.length>0?up(c,g,et.join(" ")):ju(c,g),!1},Dv=c=>c.dom.classList!==void 0,Nv=c=>av(c,"class"),O0=(c,g)=>w1(c,"class",g),Jm=(c,g)=>k1(c,"class",g),Hw=(c,g)=>yn(Nv(c),g)?Jm(c,g):O0(c,g),Gy=(c,g)=>{Dv(c)?c.dom.classList.add(g):O0(c,g)},Hx=c=>{(Dv(c)?c.dom.classList:Nv(c)).length===0&&ju(c,"class")},S1=(c,g)=>{Dv(c)?c.dom.classList.remove(g):Jm(c,g),Hx(c)},Ux=(c,g)=>{const $=Dv(c)?c.dom.classList.toggle(g):Hw(c,g);return Hx(c),$},Q_=(c,g)=>Dv(c)&&c.dom.classList.contains(g),E1=(c,g)=>{const et=(g||document).createElement("div");if(et.innerHTML=c,!et.hasChildNodes()||et.childNodes.length>1){const rt="HTML does not have a single root node";throw console.error(rt,c),new Error(rt)}return Lv(et.childNodes[0])},ex=(c,g)=>{const et=(g||document).createElement(c);return Lv(et)},Vx=(c,g)=>{const et=(g||document).createTextNode(c);return Lv(et)},Lv=c=>{if(c==null)throw new Error("Node cannot be null or undefined");return{dom:c}},eo={fromHtml:E1,fromTag:ex,fromText:Vx,fromDom:Lv,fromPoint:(c,g,$)=>Xt.from(c.dom.elementFromPoint(g,$)).map(Lv)},T1=(c,g)=>{const $=[],et=ut=>($.push(ut),g(ut));let rt=g(c);do rt=rt.bind(et);while(rt.isSome());return $},D0=(c,g)=>{const $=c.dom;if($.nodeType!==x1)return!1;{const et=$;if(et.matches!==void 0)return et.matches(g);if(et.msMatchesSelector!==void 0)return et.msMatchesSelector(g);if(et.webkitMatchesSelector!==void 0)return et.webkitMatchesSelector(g);if(et.mozMatchesSelector!==void 0)return et.mozMatchesSelector(g);throw new Error("Browser lacks native selectors")}},hC=c=>c.nodeType!==x1&&c.nodeType!==P0&&c.nodeType!==Nm||c.childElementCount===0,pC=(c,g)=>{const $=g===void 0?document:g.dom;return hC($)?[]:Nn($.querySelectorAll(c),eo.fromDom)},Fv=(c,g)=>{const $=g===void 0?document:g.dom;return hC($)?Xt.none():Xt.from($.querySelector(c)).map(eo.fromDom)},ba=(c,g)=>c.dom===g.dom,Fm=(c,g)=>{const $=c.dom,et=g.dom;return $===et?!1:$.contains(et)},hm=c=>eo.fromDom(c.dom.ownerDocument),zv=c=>bp(c)?c:hm(c),Wx=c=>eo.fromDom(zv(c).dom.documentElement),g_=c=>eo.fromDom(zv(c).dom.defaultView),zm=c=>Xt.from(c.dom.parentNode).map(eo.fromDom),tx=c=>Xt.from(c.dom.parentElement).map(eo.fromDom),lv=(c,g)=>{const $=Wt(g)?g:Dn;let et=c.dom;const rt=[];for(;et.parentNode!==null&&et.parentNode!==void 0;){const ut=et.parentNode,pt=eo.fromDom(ut);if(rt.push(pt),$(pt)===!0)break;et=ut}return rt},nx=c=>{const g=$=>Bn($,et=>!ba(c,et));return zm(c).map(tm).map(g).getOr([])},cv=c=>Xt.from(c.dom.previousSibling).map(eo.fromDom),Qm=c=>Xt.from(c.dom.nextSibling).map(eo.fromDom),gC=c=>Do(T1(c,cv)),m_=c=>T1(c,Qm),tm=c=>Nn(c.dom.childNodes,eo.fromDom),y0=(c,g)=>{const $=c.dom.childNodes;return Xt.from($[g]).map(eo.fromDom)},e0=c=>y0(c,0),I1=c=>y0(c,c.dom.childNodes.length-1),y_=c=>c.dom.childNodes.length,Vw=c=>{const g=c.dom.head;if(g==null)throw new Error("Head is not available yet");return eo.fromDom(g)},b_=c=>Lm(c)&&ln(c.dom.host),xy=c=>eo.fromDom(c.dom.getRootNode()),v_=c=>b_(c)?c:Vw(zv(c)),XS=c=>b_(c)?c:eo.fromDom(zv(c).dom.body),Ww=c=>{const g=xy(c);return b_(g)?Xt.some(g):Xt.none()},mC=c=>eo.fromDom(c.dom.host),qw=c=>{if(ln(c.target)){const g=eo.fromDom(c.target);if(_i(g)&&__(g)&&c.composed&&c.composedPath){const $=c.composedPath();if($)return wr($)}}return Xt.from(c.target)},__=c=>ln(c.dom.shadowRoot),R1=c=>{const g=vu(c)?c.dom.parentNode:c.dom;if(g==null||g.ownerDocument===null)return!1;const $=g.ownerDocument;return Ww(eo.fromDom(g)).fold(()=>$.body.contains(g),Hn(R1,mC))};var ox=(c,g,$,et,rt)=>c($,et)?Xt.some($):Wt(rt)&&rt($)?Xt.none():g($,et,rt);const ep=(c,g,$)=>{let et=c.dom;const rt=Wt($)?$:Dn;for(;et.parentNode;){et=et.parentNode;const ut=eo.fromDom(et);if(g(ut))return Xt.some(ut);if(rt(ut))break}return Xt.none()},tp=(c,g,$)=>ox((rt,ut)=>ut(rt),ep,c,g,$),Bv=(c,g)=>{const $=c.dom;return $.parentNode?dy(eo.fromDom($.parentNode),et=>!ba(c,et)&&g(et)):Xt.none()},dy=(c,g)=>{const $=rt=>g(eo.fromDom(rt));return Qn(c.dom.childNodes,$).map(eo.fromDom)},Zw=(c,g)=>{const $=et=>{for(let rt=0;rt<et.childNodes.length;rt++){const ut=eo.fromDom(et.childNodes[rt]);if(g(ut))return Xt.some(ut);const pt=$(et.childNodes[rt]);if(pt.isSome())return pt}return Xt.none()};return $(c.dom)},Hp=(c,g,$)=>ep(c,et=>D0(et,g),$),ds=(c,g)=>Fv(g,c),uv=(c,g,$)=>ox((rt,ut)=>D0(rt,ut),Hp,c,g,$),Kw=c=>uv(c,"[contenteditable]"),Y0=(c,g=!1)=>R1(c)?c.dom.isContentEditable:Kw(c).fold(cn(g),$=>Xl($)==="true"),Xl=c=>c.dom.contentEditable,$v=c=>c.style!==void 0&&Wt(c.style.getPropertyValue),rx=(c,g,$)=>{if(!Tt($))throw console.error("Invalid call to CSS.set. Property ",g,":: Value ",$,":: Element ",c),new Error("CSS value must be a string: "+$);$v(c)&&c.style.setProperty(g,$)},qx=(c,g)=>{$v(c)&&c.style.removeProperty(g)},Yw=(c,g,$)=>{const et=c.dom;rx(et,g,$)},Js=(c,g)=>{const $=c.dom;or(g,(et,rt)=>{rx($,rt,et)})},wp=(c,g)=>{const $=c.dom,rt=window.getComputedStyle($).getPropertyValue(g);return rt===""&&!R1(c)?Gv($,g):rt},Gv=(c,g)=>$v(c)?c.style.getPropertyValue(g):"",jv=(c,g)=>{const $=c.dom,et=Gv($,g);return Xt.from(et).filter(rt=>rt.length>0)},N0=c=>{const g={},$=c.dom;if($v($))for(let et=0;et<$.style.length;et++){const rt=$.style.item(et);g[rt]=$.style[rt]}return g},b0=(c,g)=>{const $=c.dom;qx($,g),gu(Ku(c,"style").map(pu),"")&&ju(c,"style")},X0=c=>c.dom.offsetWidth,Iu=(c,g)=>{zm(c).each(et=>{et.dom.insertBefore(g.dom,c.dom)})},fy=(c,g)=>{Qm(c).fold(()=>{zm(c).each(rt=>{qp(rt,g)})},et=>{Iu(et,g)})},M1=(c,g)=>{e0(c).fold(()=>{qp(c,g)},et=>{c.dom.insertBefore(g.dom,et.dom)})},qp=(c,g)=>{c.dom.appendChild(g.dom)},wy=(c,g)=>{Iu(c,g),qp(g,c)},fp=(c,g)=>{sn(g,($,et)=>{const rt=et===0?c:g[et-1];fy(rt,$)})},Hv=(c,g)=>{sn(g,$=>{qp(c,$)})},x_=c=>{c.dom.textContent="",sn(tm(c),g=>{_u(g)})},_u=c=>{const g=c.dom;g.parentNode!==null&&g.parentNode.removeChild(g)},Cy=c=>{const g=tm(c);g.length>0&&fp(c,g),_u(c)},Zx=(c,g)=>{const et=(g||document).createElement("div");return et.innerHTML=c,tm(eo.fromDom(et))},dv=c=>Nn(c,eo.fromDom),Fu=c=>c.dom.innerHTML,Uv=(c,g)=>{const et=hm(c).dom,rt=eo.fromDom(et.createDocumentFragment()),ut=Zx(g,et);Hv(rt,ut),x_(c),qp(c,rt)},v0=c=>{const g=eo.fromTag("div"),$=eo.fromDom(c.dom.cloneNode(!0));return qp(g,$),Fu(g)},w_=(c,g,$,et,rt,ut,pt)=>({target:c,x:g,y:$,stop:et,prevent:rt,kill:ut,raw:pt}),Sl=c=>{const g=eo.fromDom(qw(c).getOr(c.target)),$=()=>c.stopPropagation(),et=()=>c.preventDefault(),rt=Mt(et,$);return w_(g,c.clientX,c.clientY,$,et,rt,c)},C_=(c,g)=>$=>{c($)&&g(Sl($))},Kx=(c,g,$,et,rt)=>{const ut=C_($,et);return c.dom.addEventListener(g,ut,rt),{unbind:Tn(Ut,c,g,ut,rt)}},Lt=(c,g,$,et)=>Kx(c,g,$,et,!1),Ut=(c,g,$,et)=>{c.dom.removeEventListener(g,$,et)},rn=(c,g)=>({left:c,top:g,translate:(et,rt)=>rn(c+et,g+rt)}),jn=rn,lo=c=>{const g=c.getBoundingClientRect();return jn(g.left,g.top)},ir=(c,g)=>c!==void 0?c:g!==void 0?g:0,ks=c=>{const g=c.dom.ownerDocument,$=g.body,et=g.defaultView,rt=g.documentElement;if($===c.dom)return jn($.offsetLeft,$.offsetTop);const ut=ir(et==null?void 0:et.pageYOffset,rt.scrollTop),pt=ir(et==null?void 0:et.pageXOffset,rt.scrollLeft),xt=ir(rt.clientTop,$.clientTop),Et=ir(rt.clientLeft,$.clientLeft);return Ys(c).translate(pt-Et,ut-xt)},Ys=c=>{const g=c.dom,et=g.ownerDocument.body;return et===g?jn(et.offsetLeft,et.offsetTop):R1(c)?lo(g):jn(0,0)},Hs=c=>{const g=c!==void 0?c.dom:document,$=g.body.scrollLeft||g.documentElement.scrollLeft,et=g.body.scrollTop||g.documentElement.scrollTop;return jn($,et)},fs=(c,g,$)=>{const rt=($!==void 0?$.dom:document).defaultView;rt&&rt.scrollTo(c,g)},np=(c,g)=>{dn().browser.isSafari()&&Wt(c.dom.scrollIntoViewIfNeeded)?c.dom.scrollIntoViewIfNeeded(!1):c.dom.scrollIntoView(g)},Op=c=>{const g=c===void 0?window:c;return dn().browser.isFirefox()?Xt.none():Xt.from(g.visualViewport)},n0=(c,g,$,et)=>({x:c,y:g,width:$,height:et,right:c+$,bottom:g+et}),Vv=c=>{const g=c===void 0?window:c,$=g.document,et=Hs(eo.fromDom($));return Op(g).fold(()=>{const rt=g.document.documentElement,ut=rt.clientWidth,pt=rt.clientHeight;return n0(et.left,et.top,ut,pt)},rt=>n0(Math.max(rt.pageLeft,et.left),Math.max(rt.pageTop,et.top),rt.width,rt.height))},sx=(c,g)=>Bn(tm(c),g),Xw=(c,g)=>{let $=[];return sn(tm(c),et=>{g(et)&&($=$.concat([et])),$=$.concat(Xw(et,g))}),$},_0=(c,g)=>pC(g,c),Jw=(c,g,$)=>ep(c,g,$).isSome(),ZA=(c,g)=>Bv(c,g).isSome(),JS=(c,g)=>Zw(c,g).isSome();class pm{constructor(g,$){this.node=g,this.rootNode=$,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(g){return this.node=this.findSibling(this.node,"firstChild","nextSibling",g),this.node}prev(g){return this.node=this.findSibling(this.node,"lastChild","previousSibling",g),this.node}prev2(g){return this.node=this.findPreviousNode(this.node,g),this.node}findSibling(g,$,et,rt){if(g){if(!rt&&g[$])return g[$];if(g!==this.rootNode){let ut=g[et];if(ut)return ut;for(let pt=g.parentNode;pt&&pt!==this.rootNode;pt=pt.parentNode)if(ut=pt[et],ut)return ut}}}findPreviousNode(g,$){if(g){const et=g.previousSibling;if(this.rootNode&&et===this.rootNode)return;if(et){if(!$){for(let ut=et.lastChild;ut;ut=ut.lastChild)if(!ut.lastChild)return ut}return et}const rt=g.parentNode;if(rt&&rt!==this.rootNode)return rt}}}const yC="\uFEFF",gm="",bC=c=>c===yC,hy=c=>c.replace(/\uFEFF/g,""),ws=/^[ \t\r\n]*$/,py=c=>ws.test(c),QS=c=>{for(const g of c)if(!bC(g))return!1;return!0},vC=c=>" \f	\v".indexOf(c)!==-1,ix=c=>c===`
`||c==="\r",eE=(c,g)=>g<c.length&&g>=0?ix(c[g]):!1,jy=(c,g=4,$=!0,et=!0)=>{const rt=Ll(" ",g),ut=c.replace(/\t/g,rt);return Wn(ut,(xt,Et)=>vC(Et)||Et===gm?xt.pcIsSpace||xt.str===""&&$||xt.str.length===ut.length-1&&et||eE(ut,xt.str.length+1)?{pcIsSpace:!1,str:xt.str+gm}:{pcIsSpace:!0,str:xt.str+" "}:{pcIsSpace:ix(Et),str:xt.str+Et},{pcIsSpace:!1,str:""}).str},Wv=c=>g=>!!g&&g.nodeType===c,ax=c=>!!c&&!Object.getPrototypeOf(c),Fr=Wv(1),Hy=c=>Fr(c)&&Ml(eo.fromDom(c)),_C=c=>Fr(c)&&c.namespaceURI==="http://www.w3.org/2000/svg",Yx=c=>{const g=c.toLowerCase();return $=>ln($)&&$.nodeName.toLowerCase()===g},Uy=c=>{const g=c.map($=>$.toLowerCase());return $=>{if($&&$.nodeName){const et=$.nodeName.toLowerCase();return yn(g,et)}return!1}},Qw=(c,g)=>{const $=g.toLowerCase().split(" ");return et=>{if(Fr(et)){const rt=et.ownerDocument.defaultView;if(rt)for(let ut=0;ut<$.length;ut++){const pt=rt.getComputedStyle(et,null);if((pt?pt.getPropertyValue(c):null)===$[ut])return!0}}return!1}},lx=c=>g=>Fr(g)&&g.hasAttribute(c),P1=c=>Fr(c)&&c.hasAttribute("data-mce-bogus"),e2=c=>Fr(c)&&c.getAttribute("data-mce-bogus")==="all",fv=c=>Fr(c)&&c.tagName==="TABLE",KA=c=>g=>!!(Hy(g)&&(g.contentEditable===c||g.getAttribute("data-mce-contenteditable")===c)),hp=Uy(["textarea","input"]),pr=Wv(3),x0=Wv(4),ux=Wv(7),Ip=Wv(8),Xx=Wv(9),mm=Wv(11),tu=Yx("br"),n2=Yx("img"),Qo=KA("true"),nu=KA("false"),o2=Uy(["td","th"]),nm=Uy(["td","th","caption"]),o0=Uy(["video","audio","object","embed"]),ky=Yx("li"),tE=Yx("details"),k_=Yx("summary"),nE={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},gy=(c,g,$)=>{const et=eo.fromDom(g),rt=eo.fromDom(c),ut=$.getWhitespaceElements();return Jw(rt,xt=>es(ut,En(xt)),Tn(ba,et))},Ql=c=>Fr(c)&&c.nodeName==="A"&&!c.hasAttribute("href")&&(c.hasAttribute("name")||c.hasAttribute("id")),qv=(c,g)=>Fr(c)&&es(g.getNonEmptyElements(),c.nodeName),r2=lx("data-mce-bookmark"),om=c=>tx(eo.fromDom(c)).exists(g=>!Y0(g)),xC=(c,g,$)=>py(c.data)&&!gy(c,g,$),hv=(c,g,$,et)=>pr(c)&&!xC(c,g,$)&&(!et.includeZwsp||!QS(c.data)),s2=(c,g,$,et)=>Wt(et.isContent)&&et.isContent(g)||qv(g,c)||r2(g)||Ql(g)||hv(g,$,c,et)||nu(g)||Qo(g)&&om(g),ym=(c,g,$)=>{const et={...nE,...$};if(et.checkRootAsContent&&s2(c,g,g,et))return!1;let rt=g.firstChild,ut=0;if(!rt)return!0;const pt=new pm(rt,g);do{if(et.skipBogus&&Fr(rt)){const xt=rt.getAttribute("data-mce-bogus");if(xt){rt=pt.next(xt==="all");continue}}if(Ip(rt)){rt=pt.next(!0);continue}if(tu(rt)){ut++,rt=pt.next();continue}if(s2(c,rt,g,et))return!1;rt=pt.next()}while(rt);return ut<=1},r0=(c,g,$)=>ym(c,g.dom,{checkRootAsContent:!0,...$}),So=(c,g,$)=>s2(c,g,g,{includeZwsp:nE.includeZwsp,...$}),Ru=c=>{let g=c;return{get:()=>g,set:rt=>{g=rt}}},wC=c=>{const g=Ru(Xt.none()),$=()=>g.get().each(c);return{clear:()=>{$(),g.set(Xt.none())},isSet:()=>g.get().isSome(),get:()=>g.get(),set:xt=>{$(),g.set(Xt.some(xt))}}},Dp=c=>{const g=Ru(Xt.none()),$=()=>g.get().each(xt=>clearInterval(xt));return{clear:()=>{$(),g.set(Xt.none())},isSet:()=>g.get().isSome(),get:()=>g.get(),set:xt=>{$(),g.set(Xt.some(setInterval(xt,c)))}}},Em=()=>{const c=wC(hn);return{...c,on:$=>c.get().each($)}},sm=c=>{const g=c.toLowerCase();return g==="svg"?"svg":g==="math"?"math":"html"},Yu=c=>sm(c)!=="html",CC=c=>Yu(c.nodeName),S_=c=>sm(c.nodeName),Ot=["svg","math"],$t=()=>{const c=Em(),g=()=>c.get().map(S_).getOr("html");return{track:rt=>(CC(rt)?c.set(rt):c.get().exists(ut=>!ut.contains(rt))&&c.clear(),g()),current:g,reset:()=>{c.clear()}}},nn="data-mce-block",xn=c=>Bn(Yr(c),g=>!/[A-Z]/.test(g)),uo=c=>Nn(xn(c),g=>{const $=CSS.escape(g);return`${$}:`+Nn(Ot,et=>`not(${et} ${$})`).join(":")}).join(","),Xo=(c,g)=>ln(g.querySelector(c))?(g.setAttribute(nn,"true"),g.getAttribute("data-mce-selected")==="inline-boundary"&&g.removeAttribute("data-mce-selected"),!0):(g.removeAttribute(nn),!1),vr=(c,g)=>{const $=uo(c.getTransparentElements()),et=uo(c.getBlockElements());return Bn(g.querySelectorAll($),rt=>Xo(et,rt))},Jr=(c,g,$)=>{var et;const rt=$?"lastChild":"firstChild";for(let ut=g[rt];ut;ut=ut[rt])if(ym(c,ut,{checkRootAsContent:!0})){(et=ut.parentNode)===null||et===void 0||et.removeChild(ut);return}},Ns=(c,g,$)=>{const et=document.createRange(),rt=g.parentNode;if(rt){et.setStartBefore(g),et.setEndBefore($);const ut=et.extractContents();Jr(c,ut,!0),et.setStartAfter($),et.setEndAfter(g);const pt=et.extractContents();Jr(c,pt,!1),ym(c,ut,{checkRootAsContent:!0})||rt.insertBefore(ut,g),ym(c,$,{checkRootAsContent:!0})||rt.insertBefore($,g),ym(c,pt,{checkRootAsContent:!0})||rt.insertBefore(pt,g),rt.removeChild(g)}},Qs=(c,g,$)=>{const et=c.getBlockElements(),rt=eo.fromDom(g),ut=xt=>En(xt)in et,pt=xt=>ba(xt,rt);sn(dv($),xt=>{ep(xt,ut,pt).each(Et=>{const Ft=sx(xt,Vt=>ut(Vt)&&!c.isValidChild(En(Et),En(Vt)));if(Ft.length>0){const Vt=tx(Et);sn(Ft,Kt=>{ep(Kt,ut,pt).each(en=>{Ns(c,en.dom,Kt.dom)})}),Vt.each(Kt=>vr(c,Kt.dom))}})})},Hu=(c,g,$)=>{sn([...$,...O1(c,g)?[g]:[]],et=>sn(_0(eo.fromDom(et),et.nodeName.toLowerCase()),rt=>{D1(c,rt.dom)&&Cy(rt)}))},cu=(c,g)=>{const $=vr(c,g);Qs(c,g,$),Hu(c,g,$)},op=(c,g)=>{if(Zv(c,g)){const $=uo(c.getBlockElements());Xo($,g)}},L0=(c,g,$)=>{const et=ut=>ba(ut,eo.fromDom(g)),rt=lv(eo.fromDom($),et);us(rt,rt.length-2).filter(_i).fold(()=>cu(c,g),ut=>cu(c,ut.dom))},Sy=c=>c.hasAttribute(nn),Bm=(c,g)=>es(c.getTransparentElements(),g),Zv=(c,g)=>Fr(g)&&Bm(c,g.nodeName),O1=(c,g)=>Zv(c,g)&&Sy(g),D1=(c,g)=>Zv(c,g)&&!Sy(g),E_=(c,g)=>g.type===1&&Bm(c,g.name)&&Tt(g.attr(nn)),Jx=dn().browser,i2=c=>Qn(c,_i),kC=c=>Jx.isFirefox()&&En(c)==="table"?i2(tm(c)).filter(g=>En(g)==="caption").bind(g=>i2(m_(g)).map($=>{const et=$.dom.offsetTop,rt=g.dom.offsetTop,ut=g.dom.offsetHeight;return et<=rt?-ut:0})).getOr(0):0,Zp=(c,g)=>c.children&&yn(c.children,g),pv=(c,g,$)=>{let et=0,rt=0;const ut=c.ownerDocument;if($=$||c,g){if($===c&&g.getBoundingClientRect&&wp(eo.fromDom(c),"position")==="static"){const xt=g.getBoundingClientRect();return et=xt.left+(ut.documentElement.scrollLeft||c.scrollLeft)-ut.documentElement.clientLeft,rt=xt.top+(ut.documentElement.scrollTop||c.scrollTop)-ut.documentElement.clientTop,{x:et,y:rt}}let pt=g;for(;pt&&pt!==$&&pt.nodeType&&!Zp(pt,$);){const xt=pt;et+=xt.offsetLeft||0,rt+=xt.offsetTop||0,pt=xt.offsetParent}for(pt=g.parentNode;pt&&pt!==$&&pt.nodeType&&!Zp(pt,$);)et-=pt.scrollLeft||0,rt-=pt.scrollTop||0,pt=pt.parentNode;rt+=kC(eo.fromDom(g))}return{x:et,y:rt}},A_=(c,g={})=>{let $=0;const et={},rt=eo.fromDom(c),ut=zv(rt),pt=ao=>{g.referrerPolicy=ao},xt=ao=>{g.contentCssCors=ao},Et=ao=>{qp(v_(rt),ao)},Ft=ao=>{const po=v_(rt);ds(po,"#"+ao).each(_u)},Vt=ao=>$a(et,ao).getOrThunk(()=>({id:"mce-u"+$++,passed:[],failed:[],count:0})),Kt=ao=>new Promise((po,wo)=>{let Io;const sr=dr._addCacheSuffix(ao),br=Vt(sr);et[sr]=br,br.count++;const jr=(Hr,bs)=>{sn(Hr,Mo),br.status=bs,br.passed=[],br.failed=[],Io&&(Io.onload=null,Io.onerror=null,Io=null)},Ko=()=>jr(br.passed,2),Fo=()=>jr(br.failed,3);if(po&&br.passed.push(po),wo&&br.failed.push(wo),br.status===1)return;if(br.status===2){Ko();return}if(br.status===3){Fo();return}br.status=1;const lr=eo.fromTag("link",ut.dom);Pp(lr,{rel:"stylesheet",type:"text/css",id:br.id}),g.contentCssCors&&up(lr,"crossOrigin","anonymous"),g.referrerPolicy&&up(lr,"referrerpolicy",g.referrerPolicy),Io=lr.dom,Io.onload=Ko,Io.onerror=Fo,Et(lr),up(lr,"href",sr)}),en=(ao,po)=>{const wo=Vt(ao);et[ao]=wo,wo.count++;const Io=eo.fromTag("style",ut.dom);Pp(Io,{rel:"stylesheet",type:"text/css",id:wo.id}),Io.dom.innerHTML=po,Et(Io)},mn=ao=>Promise.allSettled(Nn(ao,wo=>Kt(wo).then(cn(wo)))).then(wo=>{const Io=Ln(wo,sr=>sr.status==="fulfilled");return Io.fail.length>0?Promise.reject(Nn(Io.fail,sr=>sr.reason)):Nn(Io.pass,sr=>sr.value)}),Sn=ao=>{const po=dr._addCacheSuffix(ao);$a(et,po).each(wo=>{--wo.count===0&&(delete et[po],Ft(wo.id))})};return{load:Kt,loadRawCss:en,loadAll:mn,unload:Sn,unloadRawCss:ao=>{$a(et,ao).each(po=>{--po.count===0&&(delete et[ao],Ft(po.id))})},unloadAll:ao=>{sn(ao,po=>{Sn(po)})},_setReferrerPolicy:pt,_setContentCssCors:xt}},ip=(()=>{const c=new WeakMap;return{forElement:($,et)=>{const ut=xy($).dom;return Xt.from(c.get(ut)).getOrThunk(()=>{const pt=A_(ut,et);return c.set(ut,pt),pt})}}})(),vp=c=>c.nodeName.toLowerCase()==="span",w0=(c,g)=>ln(c)&&(So(g,c)||g.isInline(c.nodeName.toLowerCase())),SC=(c,g,$)=>{const et=new pm(c,g).prev(!1),rt=new pm(c,g).next(!1),ut=fn(et)||w0(et,$),pt=fn(rt)||w0(rt,$);return ut&&pt},EC=c=>vp(c)&&c.getAttribute("data-mce-type")==="bookmark",J0=(c,g,$)=>pr(c)&&c.data.length>0&&SC(c,g,$),Q0=c=>Fr(c)?c.childNodes.length>0:!1,H4=c=>mm(c)||Xx(c),gv=(c,g,$,et)=>{var rt;const ut=et||g;if(Fr(g)&&EC(g))return g;const pt=g.childNodes;for(let xt=pt.length-1;xt>=0;xt--)gv(c,pt[xt],$,ut);if(Fr(g)){const xt=g.childNodes;xt.length===1&&EC(xt[0])&&((rt=g.parentNode)===null||rt===void 0||rt.insertBefore(xt[0],g))}return!H4(g)&&!So($,g)&&!Q0(g)&&!J0(g,ut,$)&&c.remove(g),g},a2=dr.makeMap,N1=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,T_=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l2=/[<>&\"\']/g,iL=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,oE={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},Qx={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},aL={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Up=c=>{const g=eo.fromTag("div").dom;return g.innerHTML=c,g.textContent||g.innerText||c},YA=(c,g)=>{const $={};if(c){const et=c.split(",");g=g||10;for(let rt=0;rt<et.length;rt+=2){const ut=String.fromCharCode(parseInt(et[rt],g));if(!Qx[ut]){const pt="&"+et[rt+1]+";";$[ut]=pt,$[pt]=ut}}return $}else return},L1=YA("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),c2=(c,g)=>c.replace(g?N1:T_,$=>Qx[$]||$),rE=c=>(""+c).replace(l2,g=>Qx[g]||g),F1=(c,g)=>c.replace(g?N1:T_,$=>$.length>1?"&#"+(($.charCodeAt(0)-55296)*1024+($.charCodeAt(1)-56320)+65536)+";":Qx[$]||"&#"+$.charCodeAt(0)+";"),s0=(c,g,$)=>{const et=$||L1;return c.replace(g?N1:T_,rt=>Qx[rt]||et[rt]||rt)},tw={encodeRaw:c2,encodeAllRaw:rE,encodeNumeric:F1,encodeNamed:s0,getEncodeFunc:(c,g)=>{const $=YA(g)||L1,et=(pt,xt)=>pt.replace(xt?N1:T_,Et=>Qx[Et]!==void 0?Qx[Et]:$[Et]!==void 0?$[Et]:Et.length>1?"&#"+((Et.charCodeAt(0)-55296)*1024+(Et.charCodeAt(1)-56320)+65536)+";":"&#"+Et.charCodeAt(0)+";"),rt=(pt,xt)=>s0(pt,xt,$),ut=a2(c.replace(/\+/g,","));return ut.named&&ut.numeric?et:ut.named?g?rt:s0:ut.numeric?F1:c2},decode:c=>c.replace(iL,(g,$)=>$?($.charAt(0).toLowerCase()==="x"?$=parseInt($.substr(1),16):$=parseInt($,10),$>65535?($-=65536,String.fromCharCode(55296+($>>10),56320+($&1023))):oE[$]||String.fromCharCode($)):aL[g]||L1[g]||Up(g))},$m=(c,g)=>(c=dr.trim(c),c?c.split(g||" "):[]),JA=c=>new RegExp("^"+c.replace(/([?+*])/g,".$1")+"$"),QA=c=>Gt(c)&&c.source&&Object.prototype.toString.call(c)==="[object RegExp]",lL=c=>{const g=$=>qt($)?Nn($,g):QA($)?new RegExp($.source,$.flags):Gt($)?Ds($,g):$;return g(c)},U4=c=>{const g=/^(~)?(.+)$/;return ro($m(c,","),$=>{const et=g.exec($);if(et){const ut=et[1]==="~"?"span":"div",pt=et[2];return[{cloneName:ut,name:pt}]}else return[]})},nw=c=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...c!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...c!=="html5-strict"?["xml:lang"]:[]]),u2=c=>{let g,$;g="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",$="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",c!=="html4"&&(g+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",$+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),c!=="html5-strict"&&($=[$,"acronym applet basefont big font strike tt"].join(" "),g=[g,"center dir isindex noframes"].join(" "));const et=[g,$].join(" ");return{blockContent:g,phrasingContent:$,flowContent:et}},my=c=>{const{blockContent:g,phrasingContent:$,flowContent:et}=u2(c),rt=ut=>Object.freeze(ut.split(" "));return Object.freeze({blockContent:rt(g),phrasingContent:rt($),flowContent:rt(et)})},Vy={html4:Ho(()=>my("html4")),html5:Ho(()=>my("html5")),"html5-strict":Ho(()=>my("html5-strict"))},Wy=(c,g)=>{const{blockContent:$,phrasingContent:et,flowContent:rt}=Vy[c]();return g==="blocks"?Xt.some($):g==="phrasing"?Xt.some(et):g==="flow"?Xt.some(rt):Xt.none()},sE=c=>{const g=nw(c),{phrasingContent:$,flowContent:et}=u2(c),rt={},ut=(Et,Ft,Vt)=>{rt[Et]={attributes:ar(Ft,cn({})),attributesOrder:Ft,children:ar(Vt,cn({}))}},pt=(Et,Ft="",Vt="")=>{const Kt=$m(Vt),en=$m(Et);let mn=en.length;const Sn=[...g,...$m(Ft)];for(;mn--;)ut(en[mn],Sn.slice(),Kt)},xt=(Et,Ft)=>{const Vt=$m(Et),Kt=$m(Ft);let en=Vt.length;for(;en--;){const mn=rt[Vt[en]];for(let Sn=0,bn=Kt.length;Sn<bn;Sn++)mn.attributes[Kt[Sn]]={},mn.attributesOrder.push(Kt[Sn])}};return c!=="html5-strict"&&(sn($m("acronym applet basefont big font strike tt"),Vt=>{pt(Vt,"",$)}),sn($m("center dir isindex noframes"),Vt=>{pt(Vt,"",et)})),pt("html","manifest","head body"),pt("head","","base command link meta noscript script style title"),pt("title hr noscript br"),pt("base","href target"),pt("link","href rel media hreflang type sizes hreflang"),pt("meta","name http-equiv content charset"),pt("style","media type scoped"),pt("script","src async defer type charset"),pt("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",et),pt("dd div","",et),pt("address dt caption","",c==="html4"?$:et),pt("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",$),pt("blockquote","cite",et),pt("ol","reversed start type","li"),pt("ul","","li"),pt("li","value",et),pt("dl","","dt dd"),pt("a","href target rel media hreflang type",c==="html4"?$:et),pt("q","cite",$),pt("ins del","cite datetime",et),pt("img","src sizes srcset alt usemap ismap width height"),pt("iframe","src name width height",et),pt("embed","src type width height"),pt("object","data type typemustmatch name usemap form width height",[et,"param"].join(" ")),pt("param","name value"),pt("map","name",[et,"area"].join(" ")),pt("area","alt coords shape href target rel media hreflang type"),pt("table","border","caption colgroup thead tfoot tbody tr"+(c==="html4"?" col":"")),pt("colgroup","span","col"),pt("col","span"),pt("tbody thead tfoot","","tr"),pt("tr","","td th"),pt("td","colspan rowspan headers",et),pt("th","colspan rowspan headers scope abbr",et),pt("form","accept-charset action autocomplete enctype method name novalidate target",et),pt("fieldset","disabled form name",[et,"legend"].join(" ")),pt("label","form for",$),pt("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),pt("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",c==="html4"?et:$),pt("select","disabled form multiple name required size","option optgroup"),pt("optgroup","disabled label","option"),pt("option","disabled label selected value"),pt("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),pt("menu","type label",[et,"li"].join(" ")),pt("noscript","",et),c!=="html4"&&(pt("wbr"),pt("ruby","",[$,"rt rp"].join(" ")),pt("figcaption","",et),pt("mark rt rp bdi","",$),pt("summary","",[$,"h1 h2 h3 h4 h5 h6"].join(" ")),pt("canvas","width height",et),pt("data","value",$),pt("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[et,"track source"].join(" ")),pt("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[et,"track source"].join(" ")),pt("picture","","img source"),pt("source","src srcset type media sizes"),pt("track","kind src srclang label default"),pt("datalist","",[$,"option"].join(" ")),pt("article section nav aside main header footer","",et),pt("hgroup","","h1 h2 h3 h4 h5 h6"),pt("figure","",[et,"figcaption"].join(" ")),pt("time","datetime",$),pt("dialog","open",et),pt("command","type label icon disabled checked radiogroup command"),pt("output","for form name",$),pt("progress","value max",$),pt("meter","value min max low high optimum",$),pt("details","open",[et,"summary"].join(" ")),pt("keygen","autofocus challenge disabled form keytype name"),ut("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),c!=="html5-strict"&&(xt("script","language xml:space"),xt("style","xml:space"),xt("object","declare classid code codebase codetype archive standby align border hspace vspace"),xt("embed","align name hspace vspace"),xt("param","valuetype type"),xt("a","charset name rev shape coords"),xt("br","clear"),xt("applet","codebase archive code object alt name width height align hspace vspace"),xt("img","name longdesc align border hspace vspace"),xt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),xt("font basefont","size color face"),xt("input","usemap align"),xt("select"),xt("textarea"),xt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),xt("ul","type compact"),xt("li","type"),xt("ol dl menu dir","compact"),xt("pre","width xml:space"),xt("hr","align noshade size width"),xt("isindex","prompt"),xt("table","summary width frame rules cellspacing cellpadding align bgcolor"),xt("col","width align char charoff valign"),xt("colgroup","width align char charoff valign"),xt("thead","align char charoff valign"),xt("tr","align char charoff valign bgcolor"),xt("th","axis align char charoff valign nowrap bgcolor width height"),xt("form","accept"),xt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),xt("tfoot","align char charoff valign"),xt("tbody","align char charoff valign"),xt("area","nohref"),xt("body","background bgcolor text link vlink alink")),c!=="html4"&&(xt("input button select textarea","autofocus"),xt("input textarea","placeholder"),xt("a","download"),xt("link script img","crossorigin"),xt("img","loading"),xt("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),c!=="html4"&&sn([rt.video,rt.audio],Et=>{delete Et.children.audio,delete Et.children.video}),sn($m("a form meter progress dfn"),Et=>{rt[Et]&&delete rt[Et].children[Et]}),delete rt.caption.children.table,delete rt.script,rt},iE=c=>c==="-"?"remove":"add",AC=c=>{const g=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return Xt.from(g.exec(c)).map($=>({preset:$[1]==="@",name:$[2]}))},w3=c=>{const g=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ro($m(c,","),$=>{const et=g.exec($);if(et){const rt=et[1],ut=rt?iE(rt):"replace",pt=et[2],xt=ro($m(et[3],"|"),Et=>AC(Et).toArray());return[{operation:ut,name:pt,validChildren:xt}]}else return[]})},V4=(c,g)=>{const $=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,et=/[*?+]/,{attributes:rt,attributesOrder:ut}=g;return sn($m(c,"|"),pt=>{const xt=$.exec(pt);if(xt){const Et={},Ft=xt[1],Vt=xt[2].replace(/[\\:]:/g,":"),Kt=xt[3],en=xt[4];if(Ft==="!"&&(g.attributesRequired=g.attributesRequired||[],g.attributesRequired.push(Vt),Et.required=!0),Ft==="-"){delete rt[Vt],ut.splice(dr.inArray(ut,Vt),1);return}if(Kt&&(Kt==="="?(g.attributesDefault=g.attributesDefault||[],g.attributesDefault.push({name:Vt,value:en}),Et.defaultValue=en):Kt==="~"?(g.attributesForced=g.attributesForced||[],g.attributesForced.push({name:Vt,value:en}),Et.forcedValue=en):Kt==="<"&&(Et.validValues=dr.makeMap(en,"?"))),et.test(Vt)){const mn=Et;g.attributePatterns=g.attributePatterns||[],mn.pattern=JA(Vt),g.attributePatterns.push(mn)}else rt[Vt]||ut.push(Vt),rt[Vt]=Et}})},W4=(c,g)=>{or(c.attributes,($,et)=>{g.attributes[et]=$}),g.attributesOrder.push(...c.attributesOrder)},C3=(c,g)=>{const $=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ro($m(g,","),et=>{const rt=$.exec(et);if(rt){const ut=rt[1],pt=rt[2],xt=rt[3],Et=rt[4],Ft=rt[5],Vt={attributes:{},attributesOrder:[]};if(c.each(Kt=>W4(Kt,Vt)),ut==="#"?Vt.paddEmpty=!0:ut==="-"&&(Vt.removeEmpty=!0),Et==="!"&&(Vt.removeEmptyAttrs=!0),Ft&&V4(Ft,Vt),xt&&(Vt.outputName=pt),pt==="@")if(c.isNone())c=Xt.some(Vt);else return[];return[xt?{name:pt,element:Vt,aliasName:xt}:{name:pt,element:Vt}]}else return[]})},TC={},El=dr.makeMap,ls=dr.each,ow=dr.extend,eT=dr.explode,tT=(c,g={})=>{const $=El(c," ",El(c.toUpperCase()," "));return ow($,g)},k3=c=>tT("td th li dt dd figcaption caption details summary",c.getTextBlockElements()),nT=(c,g)=>{if(c){const $={};return Tt(c)&&(c={"*":c}),ls(c,(et,rt)=>{$[rt]=$[rt.toUpperCase()]=g==="map"?El(et,/[, ]/):eT(et,/[, ]/)}),$}else return},xu=(c={})=>{var g;const $={},et={};let rt=[];const ut={},pt={},xt=(hs,Kl,Lp)=>{const km=c[hs];if(km)return El(km,/[, ]/,El(km.toUpperCase(),/[, ]/));{let qm=TC[hs];return qm||(qm=tT(Kl,Lp),TC[hs]=qm),qm}},Et=(g=c.schema)!==null&&g!==void 0?g:"html5",Ft=sE(Et);c.verify_html===!1&&(c.valid_elements="*[*]");const Vt=nT(c.valid_styles),Kt=nT(c.invalid_styles,"map"),en=nT(c.valid_classes,"map"),mn=xt("whitespace_elements","pre script noscript style textarea video audio iframe object code"),Sn=xt("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),bn=xt("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),Pn=xt("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ao="td th iframe video audio object script code",po=xt("non_empty_elements",ao+" pre svg textarea summary",bn),wo=xt("move_caret_before_on_enter_elements",ao+" table",bn),Io="h1 h2 h3 h4 h5 h6",sr=xt("text_block_elements",Io+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),br=xt("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",sr),jr=xt("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ko=xt("transparent_elements","a ins del canvas map"),Fo=xt("wrap_block_elements","pre "+Io);ls("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),hs=>{pt[hs]=new RegExp("</"+hs+"[^>]*>","gi")});const lr=hs=>{const Kl=Xt.from($["@"]),Lp=/[*?+]/;sn(C3(Kl,hs??""),({name:km,element:qm,aliasName:Sm})=>{if(Sm&&($[Sm]=qm),Lp.test(km)){const kp=qm;kp.pattern=JA(km),rt.push(kp)}else $[km]=qm})},Hr=hs=>{rt=[],sn(Yr($),Kl=>{delete $[Kl]}),lr(hs)},bs=(hs,Kl)=>{var Lp,km;delete TC.text_block_elements,delete TC.block_elements;const qm=Kl.extends?!f1(Kl.extends):!1,Sm=Kl.extends;if(et[hs]=Sm?et[Sm]:{},ut[hs]=Sm??hs,po[hs.toUpperCase()]={},po[hs]={},qm||(br[hs.toUpperCase()]={},br[hs]={}),Sm&&!$[hs]&&$[Sm]){const kp=lL($[Sm]);delete kp.removeEmptyAttrs,delete kp.removeEmpty,$[hs]=kp}else $[hs]={attributesOrder:[],attributes:{}};if(qt(Kl.attributes)){const kp=Fy=>{Rp.attributesOrder.push(Fy),Rp.attributes[Fy]={}},Rp=(Lp=$[hs])!==null&&Lp!==void 0?Lp:{};delete Rp.attributesDefault,delete Rp.attributesForced,delete Rp.attributePatterns,delete Rp.attributesRequired,Rp.attributesOrder=[],Rp.attributes={},sn(Kl.attributes,Fy=>{const l_=nw(Et);AC(Fy).each(({preset:Bx,name:K_})=>{Bx?K_==="global"&&sn(l_,kp):kp(K_)})}),$[hs]=Rp}if(Qt(Kl.padEmpty)){const kp=(km=$[hs])!==null&&km!==void 0?km:{};kp.paddEmpty=Kl.padEmpty,$[hs]=kp}if(qt(Kl.children)){const kp={},Rp=l_=>{kp[l_]={}},Fy=l_=>{Wy(Et,l_).each(Bx=>{sn(Bx,Rp)})};sn(Kl.children,l_=>{AC(l_).each(({preset:Bx,name:K_})=>{Bx?Fy(K_):Rp(K_)})}),et[hs]=kp}Sm&&or(et,(kp,Rp)=>{kp[Sm]&&(et[Rp]=kp=ow({},et[Rp]),kp[hs]=kp[Sm])})},Al=hs=>{sn(U4(hs??""),({name:Kl,cloneName:Lp})=>{bs(Kl,{extends:Lp})})},Tl=hs=>{Gt(hs)?or(hs,(Kl,Lp)=>bs(Lp,Kl)):Tt(hs)&&Al(hs)},du=hs=>{sn(w3(hs??""),({operation:Kl,name:Lp,validChildren:km})=>{const qm=Kl==="replace"?{"#comment":{}}:et[Lp],Sm=Rp=>{Kl==="remove"?delete qm[Rp]:qm[Rp]={}},kp=Rp=>{Wy(Et,Rp).each(Fy=>{sn(Fy,Sm)})};sn(km,({preset:Rp,name:Fy})=>{Rp?kp(Fy):Sm(Fy)}),et[Lp]=qm})},Au=hs=>{const Kl=$[hs];if(Kl)return Kl;let Lp=rt.length;for(;Lp--;){const km=rt[Lp];if(km.pattern.test(hs))return km}},Wp=()=>{c.valid_elements?(Hr(c.valid_elements),ls(Ft,(hs,Kl)=>{et[Kl]=hs.children})):(ls(Ft,(hs,Kl)=>{$[Kl]={attributes:hs.attributes,attributesOrder:hs.attributesOrder},et[Kl]=hs.children}),ls($m("strong/b em/i"),hs=>{const Kl=$m(hs,"/");$[Kl[1]].outputName=Kl[0]}),ls(jr,(hs,Kl)=>{$[Kl]&&(c.padd_empty_block_inline_children&&($[Kl].paddInEmptyBlock=!0),$[Kl].removeEmpty=!0)}),ls($m("ol ul blockquote a table tbody"),hs=>{$[hs]&&($[hs].removeEmpty=!0)}),ls($m("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),hs=>{$[hs]&&($[hs].paddEmpty=!0)}),ls($m("span"),hs=>{$[hs].removeEmptyAttrs=!0})),delete $.svg,Tl(c.custom_elements),du(c.valid_children),lr(c.extended_valid_elements),du("+ol[ul|ol],+ul[ul|ol]"),ls({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(hs,Kl)=>{$[Kl]&&($[Kl].parentsRequired=$m(hs))}),c.invalid_elements&&ls(eT(c.invalid_elements),hs=>{$[hs]&&delete $[hs]}),Au("span")||lr("span[!data-mce-type|*]")},T0=cn(Vt),Xp=cn(Kt),Tr=cn(en),ps=cn(Pn),ou=cn(br),zr=cn(sr),Ms=cn(jr),Ps=cn(Object.seal(bn)),Or=cn(Sn),Il=cn(po),Fl=cn(wo),Cm=cn(mn),$u=cn(Ko),I0=cn(Fo),nv=cn(Object.seal(pt)),zx=(hs,Kl)=>{const Lp=et[hs.toLowerCase()];return!!(Lp&&Lp[Kl.toLowerCase()])},ay=(hs,Kl)=>{const Lp=Au(hs);if(Lp)if(Kl){if(Lp.attributes[Kl])return!0;const km=Lp.attributePatterns;if(km){let qm=km.length;for(;qm--;)if(km[qm].pattern.test(Kl))return!0}}else return!0;return!1},f1=hs=>es(ou(),hs),a_=hs=>!As(hs,"#")&&ay(hs)&&!f1(hs),H0=hs=>es(I0(),hs)||a_(hs),ov=cn(ut);return Wp(),{type:Et,children:et,elements:$,getValidStyles:T0,getValidClasses:Tr,getBlockElements:ou,getInvalidStyles:Xp,getVoidElements:Ps,getTextBlockElements:zr,getTextInlineElements:Ms,getBoolAttrs:ps,getElementRule:Au,getSelfClosingElements:Or,getNonEmptyElements:Il,getMoveCaretBeforeOnEnterElements:Fl,getWhitespaceElements:Cm,getTransparentElements:$u,getSpecialElements:nv,isValidChild:zx,isValid:ay,isBlock:f1,isInline:a_,isWrapper:H0,getCustomElements:ov,addValidElements:lr,setValidElements:Hr,addCustomElements:Tl,addValidChildren:du}},S3=c=>({value:q4(c)}),q4=c=>Wr(c,"#").toUpperCase(),E3=c=>{const g=c.toString(16);return(g.length===1?"0"+g:g).toUpperCase()},er=c=>{const g=E3(c.red)+E3(c.green)+E3(c.blue);return S3(g)},IC=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Z4=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,d2=(c,g,$,et)=>({red:c,green:g,blue:$,alpha:et}),K4=(c,g,$,et)=>{const rt=parseInt(c,10),ut=parseInt(g,10),pt=parseInt($,10),xt=parseFloat(et);return d2(rt,ut,pt,xt)},dx=c=>IC.test(c)?"rgb":Z4.test(c)?"rgba":"other",oT=c=>{const g=IC.exec(c);if(g!==null)return Xt.some(K4(g[1],g[2],g[3],"1"));const $=Z4.exec(c);return $!==null?Xt.some(K4($[1],$[2],$[3],$[4])):Xt.none()},f2=c=>`rgba(${c.red},${c.green},${c.blue},${c.alpha})`,aE=c=>oT(c).map(er).map(g=>"#"+g.value).getOr(c),rw=(c={},g)=>{const $=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,et=/\s*([^:]+):\s*([^;]+);?/g,rt=/\s+$/,ut={};let pt,xt;const Et=yC;g&&(pt=g.getValidStyles(),xt=g.getInvalidStyles());const Ft=(`\\" \\' \\; \\: ; : `+Et).split(" ");for(let Kt=0;Kt<Ft.length;Kt++)ut[Ft[Kt]]=Et+Kt,ut[Et+Kt]=Ft[Kt];const Vt={parse:Kt=>{const en={};let mn=!1;const Sn=c.url_converter,bn=c.url_converter_scope||Vt,Pn=(Ko,Fo,lr)=>{const Hr=en[Ko+"-top"+Fo];if(!Hr)return;const bs=en[Ko+"-right"+Fo];if(!bs)return;const Al=en[Ko+"-bottom"+Fo];if(!Al)return;const Tl=en[Ko+"-left"+Fo];if(!Tl)return;const du=[Hr,bs,Al,Tl];let Au=du.length-1;for(;Au--&&du[Au]===du[Au+1];);Au>-1&&lr||(en[Ko+Fo]=Au===-1?du[0]:du.join(" "),delete en[Ko+"-top"+Fo],delete en[Ko+"-right"+Fo],delete en[Ko+"-bottom"+Fo],delete en[Ko+"-left"+Fo])},ao=Ko=>{const Fo=en[Ko];if(!Fo)return;const lr=Fo.indexOf(",")>-1?[Fo]:Fo.split(" ");let Hr=lr.length;for(;Hr--;)if(lr[Hr]!==lr[0])return!1;return en[Ko]=lr[0],!0},po=(Ko,Fo,lr,Hr)=>{ao(Fo)&&ao(lr)&&ao(Hr)&&(en[Ko]=en[Fo]+" "+en[lr]+" "+en[Hr],delete en[Fo],delete en[lr],delete en[Hr])},wo=Ko=>(mn=!0,ut[Ko]),Io=(Ko,Fo)=>(mn&&(Ko=Ko.replace(/\uFEFF[0-9]/g,lr=>ut[lr])),Fo||(Ko=Ko.replace(/\\([\'\";:])/g,"$1")),Ko),sr=Ko=>String.fromCharCode(parseInt(Ko.slice(1),16)),br=Ko=>Ko.replace(/\\[0-9a-f]+/gi,sr),jr=(Ko,Fo,lr,Hr,bs,Al)=>{if(bs=bs||Al,bs)return bs=Io(bs),"'"+bs.replace(/\'/g,"\\'")+"'";if(Fo=Io(Fo||lr||Hr||""),!c.allow_script_urls){const Tl=Fo.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Tl)||!c.allow_svg_data_urls&&/^data:image\/svg/i.test(Tl))return""}return Sn&&(Fo=Sn.call(bn,Fo,"style")),"url('"+Fo.replace(/\'/g,"\\'")+"')"};if(Kt){Kt=Kt.replace(/[\u0000-\u001F]/g,""),Kt=Kt.replace(/\\[\"\';:\uFEFF]/g,wo).replace(/\"[^\"]+\"|\'[^\']+\'/g,Fo=>Fo.replace(/[;:]/g,wo));let Ko;for(;Ko=et.exec(Kt);){et.lastIndex=Ko.index+Ko[0].length;let Fo=Ko[1].replace(rt,"").toLowerCase(),lr=Ko[2].replace(rt,"");if(Fo&&lr){if(Fo=br(Fo),lr=br(lr),Fo.indexOf(Et)!==-1||Fo.indexOf('"')!==-1||!c.allow_script_urls&&(Fo==="behavior"||/expression\s*\(|\/\*|\*\//.test(lr)))continue;Fo==="font-weight"&&lr==="700"?lr="bold":(Fo==="color"||Fo==="background-color")&&(lr=lr.toLowerCase()),dx(lr)==="rgb"&&oT(lr).each(Hr=>{lr=aE(f2(Hr)).toLowerCase()}),lr=lr.replace($,jr),en[Fo]=mn?Io(lr,!0):lr}}Pn("border","",!0),Pn("border","-width"),Pn("border","-color"),Pn("border","-style"),Pn("padding",""),Pn("margin",""),po("border","border-width","border-style","border-color"),en.border==="medium none"&&delete en.border,en["border-image"]==="none"&&delete en["border-image"]}return en},serialize:(Kt,en)=>{let mn="";const Sn=(Pn,ao)=>{const po=ao[Pn];if(po)for(let wo=0,Io=po.length;wo<Io;wo++){const sr=po[wo],br=Kt[sr];br&&(mn+=(mn.length>0?" ":"")+sr+": "+br+";")}},bn=(Pn,ao)=>{if(!xt||!ao)return!0;let po=xt["*"];return po&&po[Pn]?!1:(po=xt[ao],!(po&&po[Pn]))};return en&&pt?(Sn("*",pt),Sn(en,pt)):or(Kt,(Pn,ao)=>{Pn&&bn(ao,en)&&(mn+=(mn.length>0?" ":"")+ao+": "+Pn+";")}),mn}};return Vt},rp={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},I_=c=>c instanceof Event||Wt(c.initEvent),Y4=c=>c.isDefaultPrevented===xo||c.isDefaultPrevented===Dn,fx=c=>Mn(c.preventDefault)||I_(c),T3=(c,g)=>{const $=g??{};for(const et in c)es(rp,et)||($[et]=c[et]);return ln(c.composedPath)&&($.composedPath=()=>c.composedPath()),ln(c.getModifierState)&&($.getModifierState=et=>c.getModifierState(et)),ln(c.getTargetRanges)&&($.getTargetRanges=()=>c.getTargetRanges()),$},h2=(c,g,$,et)=>{var rt;const ut=T3(g,et);return ut.type=c,Mn(ut.target)&&(ut.target=(rt=ut.srcElement)!==null&&rt!==void 0?rt:$),fx(g)&&(ut.preventDefault=()=>{ut.defaultPrevented=!0,ut.isDefaultPrevented=xo,Wt(g.preventDefault)&&g.preventDefault()},ut.stopPropagation=()=>{ut.cancelBubble=!0,ut.isPropagationStopped=xo,Wt(g.stopPropagation)&&g.stopPropagation()},ut.stopImmediatePropagation=()=>{ut.isImmediatePropagationStopped=xo,ut.stopPropagation()},Y4(ut)||(ut.isDefaultPrevented=ut.defaultPrevented===!0?xo:Dn,ut.isPropagationStopped=ut.cancelBubble===!0?xo:Dn,ut.isImmediatePropagationStopped=Dn)),ut},I3="mce-data-",R3=/^(?:mouse|contextmenu)|click/,ey=(c,g,$,et)=>{c.addEventListener(g,$,et||!1)},RC=(c,g,$,et)=>{c.removeEventListener(g,$,et||!1)},cL=c=>ln(c)&&R3.test(c.type),sw=(c,g)=>{const $=h2(c.type,c,document,g);if(cL(c)&&fn(c.pageX)&&!fn(c.clientX)){const et=$.target.ownerDocument||document,rt=et.documentElement,ut=et.body,pt=$;pt.pageX=c.clientX+(rt&&rt.scrollLeft||ut&&ut.scrollLeft||0)-(rt&&rt.clientLeft||ut&&ut.clientLeft||0),pt.pageY=c.clientY+(rt&&rt.scrollTop||ut&&ut.scrollTop||0)-(rt&&rt.clientTop||ut&&ut.clientTop||0)}return $},uL=(c,g,$)=>{const et=c.document,rt={type:"ready"};if($.domLoaded){g(rt);return}const ut=()=>et.readyState==="complete"||et.readyState==="interactive"&&et.body,pt=()=>{RC(c,"DOMContentLoaded",pt),RC(c,"load",pt),$.domLoaded||($.domLoaded=!0,g(rt)),c=null};ut()?pt():ey(c,"DOMContentLoaded",pt),$.domLoaded||ey(c,"load",pt)};class g2{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=I3+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(g,$,et,rt){const ut=this;let pt;const xt=window,Et=en=>{ut.executeHandlers(sw(en||xt.event),Ft)};if(!g||pr(g)||Ip(g))return et;let Ft;g[ut.expando]?Ft=g[ut.expando]:(Ft=ut.count++,g[ut.expando]=Ft,ut.events[Ft]={}),rt=rt||g;const Vt=$.split(" ");let Kt=Vt.length;for(;Kt--;){let en=Vt[Kt],mn=Et,Sn=!1,bn=!1;if(en==="DOMContentLoaded"&&(en="ready"),ut.domLoaded&&en==="ready"&&g.readyState==="complete"){et.call(rt,sw({type:en}));continue}!ut.hasFocusIn&&(en==="focusin"||en==="focusout")&&(Sn=!0,bn=en==="focusin"?"focus":"blur",mn=Pn=>{const ao=sw(Pn||xt.event);ao.type=ao.type==="focus"?"focusin":"focusout",ut.executeHandlers(ao,Ft)}),pt=ut.events[Ft][en],pt?en==="ready"&&ut.domLoaded?et(sw({type:en})):pt.push({func:et,scope:rt}):(ut.events[Ft][en]=pt=[{func:et,scope:rt}],pt.fakeName=bn,pt.capture=Sn,pt.nativeHandler=mn,en==="ready"?uL(g,mn,ut):ey(g,bn||en,mn,Sn))}return g=pt=null,et}unbind(g,$,et){if(!g||pr(g)||Ip(g))return this;const rt=g[this.expando];if(rt){let ut=this.events[rt];if($){const pt=$.split(" ");let xt=pt.length;for(;xt--;){const Et=pt[xt],Ft=ut[Et];if(Ft){if(et){let Vt=Ft.length;for(;Vt--;)if(Ft[Vt].func===et){const Kt=Ft.nativeHandler,en=Ft.fakeName,mn=Ft.capture,Sn=Ft.slice(0,Vt).concat(Ft.slice(Vt+1));Sn.nativeHandler=Kt,Sn.fakeName=en,Sn.capture=mn,ut[Et]=Sn}}(!et||Ft.length===0)&&(delete ut[Et],RC(g,Ft.fakeName||Et,Ft.nativeHandler,Ft.capture))}}}else or(ut,(pt,xt)=>{RC(g,pt.fakeName||xt,pt.nativeHandler,pt.capture)}),ut={};for(const pt in ut)if(es(ut,pt))return this;delete this.events[rt];try{delete g[this.expando]}catch{g[this.expando]=null}}return this}fire(g,$,et){return this.dispatch(g,$,et)}dispatch(g,$,et){if(!g||pr(g)||Ip(g))return this;const rt=sw({type:$,target:g},et);do{const ut=g[this.expando];ut&&this.executeHandlers(rt,ut),g=g.parentNode||g.ownerDocument||g.defaultView||g.parentWindow}while(g&&!rt.isPropagationStopped());return this}clean(g){if(!g||pr(g)||Ip(g))return this;if(g[this.expando]&&this.unbind(g),g.getElementsByTagName||(g=g.document),g&&g.getElementsByTagName){this.unbind(g);const $=g.getElementsByTagName("*");let et=$.length;for(;et--;)g=$[et],g[this.expando]&&this.unbind(g)}return this}destroy(){this.events={}}cancel(g){return g&&(g.preventDefault(),g.stopImmediatePropagation()),!1}executeHandlers(g,$){const et=this.events[$],rt=et&&et[g.type];if(rt)for(let ut=0,pt=rt.length;ut<pt;ut++){const xt=rt[ut];if(xt&&xt.func.call(xt.scope,g)===!1&&g.preventDefault(),g.isImmediatePropagationStopped())return}}}g2.Event=new g2;const rT=dr.each,dL=dr.grep,lE="data-mce-style",z1=dr.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),F0=(c,g,$)=>{Mn($)||$===""?ju(c,g):up(c,g,$)},yr=c=>c.replace(/[A-Z]/g,g=>"-"+g.toLowerCase()),MC=(c,g)=>{let $=0;if(c)for(let et=c.nodeType,rt=c.previousSibling;rt;rt=rt.previousSibling){const ut=rt.nodeType;g&&pr(rt)&&(ut===et||!rt.data.length)||($++,et=ut)}return $},Gm=(c,g)=>{const $=fm(g,"style"),et=c.serialize(c.parse($),En(g));F0(g,lE,et)},M3=(c,g)=>so(c)?es(z1,g)?c+"":c+"px":c,P3=(c,g,$)=>{const et=yr(g);Mn($)||$===""?b0(c,et):Yw(c,et,M3($,et))},O3=(c,g,$)=>{const et=g.keep_values,rt={set:(pt,xt,Et)=>{const Ft=eo.fromDom(pt);Wt(g.url_converter)&&ln(xt)&&(xt=g.url_converter.call(g.url_converter_scope||$(),String(xt),Et,pt));const Vt="data-mce-"+Et;F0(Ft,Vt,xt),F0(Ft,Et,xt)},get:(pt,xt)=>{const Et=eo.fromDom(pt);return fm(Et,"data-mce-"+xt)||fm(Et,xt)}},ut={style:{set:(pt,xt)=>{const Et=eo.fromDom(pt);et&&F0(Et,lE,xt),ju(Et,"style"),Tt(xt)&&Js(Et,c.parse(xt))},get:pt=>{const xt=eo.fromDom(pt),Et=fm(xt,lE)||fm(xt,"style");return c.serialize(c.parse(Et),En(xt))}}};return et&&(ut.href=ut.src=rt),ut},Uu=(c,g={})=>{const $={},et=window,rt={};let ut=0;const pt=!0,xt=!0,Et=ip.forElement(eo.fromDom(c),{contentCssCors:g.contentCssCors,referrerPolicy:g.referrerPolicy}),Ft=[],Vt=g.schema?g.schema:xu({}),Kt=rw({url_converter:g.url_converter,url_converter_scope:g.url_converter_scope},g.schema),en=g.ownEvents?new g2:g2.Event,mn=Vt.getBlockElements(),Sn=Lo=>Tt(Lo)?es(mn,Lo):Fr(Lo)&&(es(mn,Lo.nodeName)||O1(Vt,Lo)),bn=Lo=>Lo&&c&&Tt(Lo)?c.getElementById(Lo):Lo,Pn=Lo=>{const No=bn(Lo);return ln(No)?eo.fromDom(No):null},ao=(Lo,No,Ir="")=>{let _r;const Is=Pn(Lo);if(ln(Is)&&_i(Is)){const ru=GN[No];ru&&ru.get?_r=ru.get(Is.dom,No):_r=fm(Is,No)}return ln(_r)?_r:Ir},po=Lo=>{const No=bn(Lo);return Mn(No)?[]:No.attributes},wo=(Lo,No,Ir)=>{ps(Lo,_r=>{if(Fr(_r)){const Is=eo.fromDom(_r),ru=Ir===""?null:Ir,Fp=fm(Is,No),$x=GN[No];$x&&$x.set?$x.set(Is.dom,ru,No):F0(Is,No,ru),Fp!==ru&&g.onSetAttrib&&g.onSetAttrib({attrElm:Is.dom,attrName:No,attrValue:ru})}})},Io=(Lo,No)=>Lo.cloneNode(No),sr=()=>g.root_element||c.body,br=Lo=>{const No=Vv(Lo);return{x:No.x,y:No.y,w:No.width,h:No.height}},jr=(Lo,No)=>pv(c.body,bn(Lo),No),Ko=(Lo,No,Ir)=>{ps(Lo,_r=>{const Is=eo.fromDom(_r);P3(Is,No,Ir),g.update_styles&&Gm(Kt,Is)})},Fo=(Lo,No)=>{ps(Lo,Ir=>{const _r=eo.fromDom(Ir);or(No,(Is,ru)=>{P3(_r,ru,Is)}),g.update_styles&&Gm(Kt,_r)})},lr=(Lo,No,Ir)=>{const _r=bn(Lo);if(!(Mn(_r)||!Hy(_r)&&!_C(_r)))return Ir?wp(eo.fromDom(_r),yr(No)):(No=No.replace(/-(\D)/g,(Is,ru)=>ru.toUpperCase()),No==="float"&&(No="cssFloat"),_r.style?_r.style[No]:void 0)},Hr=Lo=>{const No=bn(Lo);if(!No)return{w:0,h:0};let Ir=lr(No,"width"),_r=lr(No,"height");return(!Ir||Ir.indexOf("px")===-1)&&(Ir="0"),(!_r||_r.indexOf("px")===-1)&&(_r="0"),{w:parseInt(Ir,10)||No.offsetWidth||No.clientWidth,h:parseInt(_r,10)||No.offsetHeight||No.clientHeight}},bs=Lo=>{const No=bn(Lo),Ir=jr(No),_r=Hr(No);return{x:Ir.x,y:Ir.y,w:_r.w,h:_r.h}},Al=(Lo,No)=>{if(!Lo)return!1;const Ir=qt(Lo)?Lo:[Lo];return Cn(Ir,_r=>D0(eo.fromDom(_r),No))},Tl=(Lo,No,Ir,_r)=>{const Is=[];let ru=bn(Lo);_r=_r===void 0;const Fp=Ir||(sr().nodeName!=="BODY"?sr().parentNode:null);if(Tt(No))if(No==="*")No=Fr;else{const $x=No;No=u_=>Al(u_,$x)}for(;ru&&!(ru===Fp||Mn(ru.nodeType)||Xx(ru)||mm(ru));){if(!No||No(ru))if(_r)Is.push(ru);else return[ru];ru=ru.parentNode}return _r?Is:null},du=(Lo,No,Ir)=>{const _r=Tl(Lo,No,Ir,!1);return _r&&_r.length>0?_r[0]:null},Au=(Lo,No,Ir)=>{let _r=No;if(Lo){Tt(No)&&(_r=Is=>Al(Is,No));for(let Is=Lo[Ir];Is;Is=Is[Ir])if(Wt(_r)&&_r(Is))return Is}return null},Wp=(Lo,No)=>Au(Lo,No,"nextSibling"),T0=(Lo,No)=>Au(Lo,No,"previousSibling"),Xp=Lo=>Wt(Lo.querySelectorAll),Tr=(Lo,No)=>{var Ir,_r;const Is=(_r=(Ir=bn(No))!==null&&Ir!==void 0?Ir:g.root_element)!==null&&_r!==void 0?_r:c;return Xp(Is)?Ts(Is.querySelectorAll(Lo)):[]},ps=function(Lo,No,Ir){const _r=Ir??this;if(qt(Lo)){const Is=[];return rT(Lo,(ru,Fp)=>{const $x=bn(ru);$x&&Is.push(No.call(_r,$x,Fp))}),Is}else{const Is=bn(Lo);return Is?No.call(_r,Is):!1}},ou=(Lo,No)=>{ps(Lo,Ir=>{or(No,(_r,Is)=>{wo(Ir,Is,_r)})})},zr=(Lo,No)=>{ps(Lo,Ir=>{const _r=eo.fromDom(Ir);Uv(_r,No)})},Ms=(Lo,No,Ir,_r,Is)=>ps(Lo,ru=>{const Fp=Tt(No)?c.createElement(No):No;return ln(Ir)&&ou(Fp,Ir),_r&&(!Tt(_r)&&_r.nodeType?Fp.appendChild(_r):Tt(_r)&&zr(Fp,_r)),Is?Fp:ru.appendChild(Fp)}),Ps=(Lo,No,Ir)=>Ms(c.createElement(Lo),Lo,No,Ir,!0),Or=tw.decode,Il=tw.encodeAllRaw,Fl=(Lo,No,Ir="")=>{let _r="<"+Lo;for(const Is in No)yl(No,Is)&&(_r+=" "+Is+'="'+Il(No[Is])+'"');return Rl(Ir)&&es(Vt.getVoidElements(),Lo)?_r+" />":_r+">"+Ir+"</"+Lo+">"},Cm=Lo=>{const No=c.createElement("div"),Ir=c.createDocumentFragment();Ir.appendChild(No),Lo&&(No.innerHTML=Lo);let _r;for(;_r=No.firstChild;)Ir.appendChild(_r);return Ir.removeChild(No),Ir},$u=(Lo,No)=>ps(Lo,Ir=>{const _r=eo.fromDom(Ir);return No&&sn(tm(_r),Is=>{vu(Is)&&Is.dom.length===0?_u(Is):Iu(_r,Is)}),_u(_r),_r.dom}),I0=Lo=>ps(Lo,No=>{const Ir=No.attributes;for(let _r=Ir.length-1;_r>=0;_r--)No.removeAttributeNode(Ir.item(_r))}),nv=Lo=>Kt.parse(Lo),zx=(Lo,No)=>Kt.serialize(Lo,No),ay=Lo=>{if(c_!==Uu.DOM&&c===document){if($[Lo])return;$[Lo]=!0}let No=c.getElementById("mceDefaultStyles");if(!No){No=c.createElement("style"),No.id="mceDefaultStyles",No.type="text/css";const Ir=c.head;Ir.firstChild?Ir.insertBefore(No,Ir.firstChild):Ir.appendChild(No)}No.styleSheet?No.styleSheet.cssText+=Lo:No.appendChild(c.createTextNode(Lo))},f1=Lo=>{Lo||(Lo=""),sn(Lo.split(","),No=>{rt[No]=!0,Et.load(No).catch(hn)})},a_=(Lo,No,Ir)=>{ps(Lo,_r=>{if(Fr(_r)){const Is=eo.fromDom(_r),ru=No.split(" ");sn(ru,Fp=>{ln(Ir)?(Ir?Gy:S1)(Is,Fp):Ux(Is,Fp)})}})},H0=(Lo,No)=>{a_(Lo,No,!0)},ov=(Lo,No)=>{a_(Lo,No,!1)},hs=(Lo,No)=>{const Ir=Pn(Lo),_r=No.split(" ");return ln(Ir)&&Co(_r,Is=>Q_(Ir,Is))},Kl=Lo=>{ps(Lo,No=>b0(eo.fromDom(No),"display"))},Lp=Lo=>{ps(Lo,No=>Yw(eo.fromDom(No),"display","none"))},km=Lo=>{const No=Pn(Lo);return ln(No)&&gu(jv(No,"display"),"none")},qm=Lo=>(Lo||"mce_")+ut++,Sm=Lo=>{const No=Pn(Lo);return ln(No)?Fr(No.dom)?No.dom.outerHTML:v0(No):""},kp=(Lo,No)=>{ps(Lo,Ir=>{Fr(Ir)&&(Ir.outerHTML=No)})},Rp=(Lo,No)=>{const Ir=bn(No);return ps(Lo,_r=>{const Is=Ir==null?void 0:Ir.parentNode,ru=Ir==null?void 0:Ir.nextSibling;return Is&&(ru?Is.insertBefore(_r,ru):Is.appendChild(_r)),_r})},Fy=(Lo,No,Ir)=>ps(No,_r=>{var Is;const ru=qt(No)?Lo.cloneNode(!0):Lo;return Ir&&rT(dL(_r.childNodes),Fp=>{ru.appendChild(Fp)}),(Is=_r.parentNode)===null||Is===void 0||Is.replaceChild(ru,_r),_r}),l_=(Lo,No)=>{if(Lo.nodeName!==No.toUpperCase()){const Ir=Ps(No);return rT(po(Lo),_r=>{wo(Ir,_r.nodeName,ao(Lo,_r.nodeName))}),Fy(Ir,Lo,!0),Ir}else return Lo},Bx=(Lo,No)=>{let Ir=Lo;for(;Ir;){let _r=No;for(;_r&&Ir!==_r;)_r=_r.parentNode;if(Ir===_r)break;Ir=Ir.parentNode}return!Ir&&Lo.ownerDocument?Lo.ownerDocument.documentElement:Ir},K_=(Lo,No,Ir)=>Jt(No)?ym(Vt,Lo,{...Ir,isContent:Is=>{const ru=Is.nodeName.toLowerCase();return!!No[ru]}}):ym(Vt,Lo,Ir),$A=()=>c.createRange(),HS=(Lo,No,Ir)=>{let _r=$A(),Is,ru;if(Lo&&No&&Lo.parentNode&&No.parentNode){const Fp=Lo.parentNode;return _r.setStart(Fp,MC(Lo)),_r.setEnd(No.parentNode,MC(No)),Is=_r.extractContents(),_r=$A(),_r.setStart(No.parentNode,MC(No)+1),_r.setEnd(Fp,MC(Lo)+1),ru=_r.extractContents(),Fp.insertBefore(gv(c_,Is,Vt),Lo),Ir?Fp.insertBefore(Ir,Lo):Fp.insertBefore(No,Lo),Fp.insertBefore(gv(c_,ru,Vt),Lo),$u(Lo),Ir||No}else return},cC=(Lo,No,Ir,_r)=>{if(qt(Lo)){let Is=Lo.length;const ru=[];for(;Is--;)ru[Is]=cC(Lo[Is],No,Ir,_r);return ru}else return g.collect&&(Lo===c||Lo===et)&&Ft.push([Lo,No,Ir,_r]),en.bind(Lo,No,Ir,_r||c_)},Pv=(Lo,No,Ir)=>{if(qt(Lo)){let _r=Lo.length;const Is=[];for(;_r--;)Is[_r]=Pv(Lo[_r],No,Ir);return Is}else{if(Ft.length>0&&(Lo===c||Lo===et)){let _r=Ft.length;for(;_r--;){const[Is,ru,Fp]=Ft[_r];Lo===Is&&(!No||No===ru)&&(!Ir||Ir===Fp)&&en.unbind(Is,ru,Fp)}}return en.unbind(Lo,No,Ir)}},uC=(Lo,No,Ir)=>en.dispatch(Lo,No,Ir),f3=(Lo,No,Ir)=>en.dispatch(Lo,No,Ir),GA=Lo=>{if(Lo&&Hy(Lo)){const No=Lo.getAttribute("data-mce-contenteditable");return No&&No!=="inherit"?No:Lo.contentEditable!=="inherit"?Lo.contentEditable:null}else return null},c_={doc:c,settings:g,win:et,files:rt,stdMode:pt,boxModel:xt,styleSheetLoader:Et,boundEvents:Ft,styles:Kt,schema:Vt,events:en,isBlock:Sn,root:null,clone:Io,getRoot:sr,getViewPort:br,getRect:bs,getSize:Hr,getParent:du,getParents:Tl,get:bn,getNext:Wp,getPrev:T0,select:Tr,is:Al,add:Ms,create:Ps,createHTML:Fl,createFragment:Cm,remove:$u,setStyle:Ko,getStyle:lr,setStyles:Fo,removeAllAttribs:I0,setAttrib:wo,setAttribs:ou,getAttrib:ao,getPos:jr,parseStyle:nv,serializeStyle:zx,addStyle:ay,loadCSS:f1,addClass:H0,removeClass:ov,hasClass:hs,toggleClass:a_,show:Kl,hide:Lp,isHidden:km,uniqueId:qm,setHTML:zr,getOuterHTML:Sm,setOuterHTML:kp,decode:Or,encode:Il,insertAfter:Rp,replace:Fy,rename:l_,findCommonAncestor:Bx,run:ps,getAttribs:po,isEmpty:K_,createRng:$A,nodeIndex:MC,split:HS,bind:cC,unbind:Pv,fire:f3,dispatch:uC,getContentEditable:GA,getContentEditableParent:Lo=>{const No=sr();let Ir=null;for(let _r=Lo;_r&&_r!==No&&(Ir=GA(_r),Ir===null);_r=_r.parentNode);return Ir},isEditable:Lo=>{if(ln(Lo)){const No=Fr(Lo)?Lo:Lo.parentElement;return ln(No)&&Hy(No)&&Y0(eo.fromDom(No))}else return!1},destroy:()=>{if(Ft.length>0){let Lo=Ft.length;for(;Lo--;){const[No,Ir,_r]=Ft[Lo];en.unbind(No,Ir,_r)}}or(rt,(Lo,No)=>{Et.unload(No),delete rt[No]})},isChildOf:(Lo,No)=>Lo===No||No.contains(Lo),dumpRng:Lo=>"startContainer: "+Lo.startContainer.nodeName+", startOffset: "+Lo.startOffset+", endContainer: "+Lo.endContainer.nodeName+", endOffset: "+Lo.endOffset},GN=O3(Kt,g,cn(c_));return c_};Uu.DOM=Uu(document),Uu.nodeIndex=MC;const fL=Uu.DOM,m2=0,hx=1,PC=2,D3=3;class R_{constructor(g={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=g}_setReferrerPolicy(g){this.settings.referrerPolicy=g}loadScript(g){return new Promise(($,et)=>{const rt=fL;let ut;const pt=()=>{rt.remove(Ft),ut&&(ut.onerror=ut.onload=ut=null)},xt=()=>{pt(),$()},Et=()=>{pt(),et("Failed to load script: "+g)},Ft=rt.uniqueId();ut=document.createElement("script"),ut.id=Ft,ut.type="text/javascript",ut.src=dr._addCacheSuffix(g),this.settings.referrerPolicy&&rt.setAttrib(ut,"referrerpolicy",this.settings.referrerPolicy),ut.onload=xt,ut.onerror=Et,(document.getElementsByTagName("head")[0]||document.body).appendChild(ut)})}isDone(g){return this.states[g]===PC}markDone(g){this.states[g]=PC}add(g){const $=this;return $.queue.push(g),$.states[g]===void 0&&($.states[g]=m2),new Promise((rt,ut)=>{$.scriptLoadedCallbacks[g]||($.scriptLoadedCallbacks[g]=[]),$.scriptLoadedCallbacks[g].push({resolve:rt,reject:ut})})}load(g){return this.add(g)}remove(g){delete this.states[g],delete this.scriptLoadedCallbacks[g]}loadQueue(){const g=this.queue;return this.queue=[],this.loadScripts(g)}loadScripts(g){const $=this,et=(Et,Ft)=>{$a($.scriptLoadedCallbacks,Ft).each(Vt=>{sn(Vt,Kt=>Kt[Et](Ft))}),delete $.scriptLoadedCallbacks[Ft]},rt=Et=>{const Ft=Bn(Et,Vt=>Vt.status==="rejected");return Ft.length>0?Promise.reject(ro(Ft,({reason:Vt})=>qt(Vt)?Vt:[Vt])):Promise.resolve()},ut=Et=>Promise.allSettled(Nn(Et,Ft=>$.states[Ft]===PC?(et("resolve",Ft),Promise.resolve()):$.states[Ft]===D3?(et("reject",Ft),Promise.reject(Ft)):($.states[Ft]=hx,$.loadScript(Ft).then(()=>{$.states[Ft]=PC,et("resolve",Ft);const Vt=$.queue;return Vt.length>0?($.queue=[],ut(Vt).then(rt)):Promise.resolve()},()=>($.states[Ft]=D3,et("reject",Ft),Promise.reject(Ft)))))),pt=Et=>($.loading=!0,ut(Et).then(Ft=>{$.loading=!1;const Vt=$.queueLoadedCallbacks.shift();return Xt.from(Vt).each(Mo),rt(Ft)})),xt=Oo(g);return $.loading?new Promise((Et,Ft)=>{$.queueLoadedCallbacks.push(()=>{pt(xt).then(Et,Ft)})}):pt(xt)}}R_.ScriptLoader=new R_;const X4=(c,g)=>{const $=c.indexOf(g);return $!==-1&&c.indexOf(g,$+1)>$},Kp=c=>Gt(c)&&es(c,"raw"),sT=c=>qt(c)&&c.length>1,wu={},N3=Ru("en"),ty=()=>$a(wu,N3.get()),$1={getData:()=>Ds(wu,c=>({...c})),setCode:c=>{c&&N3.set(c)},getCode:()=>N3.get(),add:(c,g)=>{let $=wu[c];$||(wu[c]=$={});const et=Nn(Yr(g),rt=>rt.toLowerCase());or(g,(rt,ut)=>{const pt=ut.toLowerCase();pt!==ut&&X4(et,pt)?(es(g,pt)||($[pt]=rt),$[ut]=rt):$[pt]=rt})},translate:c=>{const g=ty().getOr({}),$=pt=>Wt(pt)?Object.prototype.toString.call(pt):et(pt)?"":""+pt,et=pt=>pt===""||pt===null||pt===void 0,rt=pt=>{const xt=$(pt);return es(g,xt)?$(g[xt]):$a(g,xt.toLowerCase()).map($).getOr(xt)},ut=pt=>pt.replace(/{context:\w+}$/,"");if(et(c))return"";if(Kp(c))return $(c.raw);if(sT(c)){const pt=c.slice(1),xt=rt(c[0]).replace(/\{([0-9]+)\}/g,(Et,Ft)=>es(pt,Ft)?$(pt[Ft]):Et);return ut(xt)}return ut(rt(c))},isRtl:()=>ty().bind(c=>$a(c,"_dir")).exists(c=>c==="rtl"),hasCode:c=>es(wu,c)},z0=()=>{const c=[],g={},$={},et=[],rt=(bn,Pn)=>{const ao=Bn(et,po=>po.name===bn&&po.state===Pn);sn(ao,po=>po.resolve())},ut=bn=>es(g,bn),pt=bn=>es($,bn),xt=bn=>{if($[bn])return $[bn].instance},Et=(bn,Pn)=>{const ao=$1.getCode(),po=","+(Pn||"")+",";!ao||Pn&&po.indexOf(","+ao+",")===-1||R_.ScriptLoader.add(g[bn]+"/langs/"+ao+".js")},Ft=(bn,Pn)=>{z0.languageLoad!==!1&&(ut(bn)?Et(bn,Pn):Sn(bn,"loaded").then(()=>Et(bn,Pn)))},Vt=(bn,Pn)=>(c.push(Pn),$[bn]={instance:Pn},rt(bn,"added"),Pn),Kt=bn=>{delete g[bn],delete $[bn]},en=(bn,Pn)=>Tt(Pn)?Tt(bn)?{prefix:"",resource:Pn,suffix:""}:{prefix:bn.prefix,resource:Pn,suffix:bn.suffix}:Pn,mn=(bn,Pn)=>{if(g[bn])return Promise.resolve();let ao=Tt(Pn)?Pn:Pn.prefix+Pn.resource+Pn.suffix;ao.indexOf("/")!==0&&ao.indexOf("://")===-1&&(ao=z0.baseURL+"/"+ao),g[bn]=ao.substring(0,ao.lastIndexOf("/"));const po=()=>(rt(bn,"loaded"),Promise.resolve());return $[bn]?po():R_.ScriptLoader.add(ao).then(po)},Sn=(bn,Pn="added")=>Pn==="added"&&pt(bn)||Pn==="loaded"&&ut(bn)?Promise.resolve():new Promise(ao=>{et.push({name:bn,state:Pn,resolve:ao})});return{items:c,urls:g,lookup:$,get:xt,requireLangPack:Ft,add:Vt,remove:Kt,createUrl:en,load:mn,waitFor:Sn}};z0.languageLoad=!0,z0.baseURL="",z0.PluginManager=z0(),z0.ThemeManager=z0(),z0.ModelManager=z0();const DC=(c,g)=>{let $=null;return{cancel:()=>{Nt($)||(clearTimeout($),$=null)},throttle:(...ut)=>{Nt($)&&($=setTimeout(()=>{$=null,c.apply(null,ut)},g))}}},aT=(c,g)=>{let $=null;const et=()=>{Nt($)||(clearTimeout($),$=null)};return{cancel:et,throttle:(...ut)=>{et(),$=setTimeout(()=>{$=null,c.apply(null,ut)},g)}}},lT=(c,g,$)=>Hp(c,g,$).isSome(),NC=cn("mce-annotation"),iw=cn("data-mce-annotation"),M_=cn("data-mce-annotation-uid"),LC=cn("data-mce-annotation-active"),aw=cn("data-mce-annotation-classes"),px=cn("data-mce-annotation-attrs"),y2=c=>g=>ba(g,c),cE=(c,g)=>{const $=c.selection.getRng(),et=eo.fromDom($.startContainer),rt=eo.fromDom(c.getBody()),ut=g.fold(()=>"."+NC(),Et=>`[${iw()}="${Et}"]`),pt=y0(et,$.startOffset).getOr(et);return uv(pt,ut,y2(rt)).bind(Et=>Ku(Et,`${M_()}`).bind(Ft=>Ku(Et,`${iw()}`).map(Vt=>{const Kt=L3(c,Ft);return{uid:Ft,name:Vt,elements:Kt}})))},cT=c=>_i(c)&&Q_(c,NC()),Q4=(c,g)=>dp(c,"data-mce-bogus")||lT(c,'[data-mce-bogus="all"]',y2(g)),L3=(c,g)=>{const $=eo.fromDom(c.getBody()),et=_0($,`[${M_()}="${g}"]`);return Bn(et,rt=>!Q4(rt,$))},FC=(c,g)=>{const $=eo.fromDom(c.getBody()),et=_0($,`[${iw()}="${g}"]`),rt={};return sn(et,ut=>{if(!Q4(ut,$)){const pt=fm(ut,M_()),xt=$a(rt,pt).getOr([]);rt[pt]=xt.concat([ut])}}),rt},eM=(c,g)=>{const $=Ru({}),et=()=>({listeners:[],previous:Em()}),rt=(Kt,en)=>{ut(Kt,mn=>(en(mn),mn))},ut=(Kt,en)=>{const mn=$.get(),Sn=$a(mn,Kt).getOrThunk(et),bn=en(Sn);mn[Kt]=bn,$.set(mn)},pt=(Kt,en,mn)=>{rt(Kt,Sn=>{sn(Sn.listeners,bn=>bn(!0,Kt,{uid:en,nodes:Nn(mn,Pn=>Pn.dom)}))})},xt=Kt=>{rt(Kt,en=>{sn(en.listeners,mn=>mn(!1,Kt))})},Et=(Kt,en)=>{sn(L3(c,Kt),mn=>{en?up(mn,LC(),"true"):ju(mn,LC())})},Ft=aT(()=>{const Kt=xr(g.getNames());sn(Kt,en=>{ut(en,mn=>{const Sn=mn.previous.get();return cE(c,Xt.some(en)).fold(()=>{Sn.each(bn=>{xt(en),mn.previous.clear(),Et(bn,!1)})},({uid:bn,name:Pn,elements:ao})=>{gu(Sn,bn)||(Sn.each(po=>Et(po,!1)),pt(Pn,bn,ao),mn.previous.set(bn),Et(bn,!0))}),{previous:mn.previous,listeners:mn.listeners}})})},30);return c.on("remove",()=>{Ft.cancel()}),c.on("NodeChange",()=>{Ft.throttle()}),{addListener:(Kt,en)=>{ut(Kt,mn=>({previous:mn.previous,listeners:mn.listeners.concat([en])}))}}},pL=(c,g)=>{const $=iw(),et=ut=>Xt.from(ut.attr($)).bind(g.lookup),rt=ut=>{var pt,xt;ut.attr(M_(),null),ut.attr(iw(),null),ut.attr(LC(),null);const Et=Xt.from(ut.attr(px())).map(en=>en.split(",")).getOr([]),Ft=Xt.from(ut.attr(aw())).map(en=>en.split(",")).getOr([]);sn(Et,en=>ut.attr(en,null));const Vt=(xt=(pt=ut.attr("class"))===null||pt===void 0?void 0:pt.split(" "))!==null&&xt!==void 0?xt:[],Kt=Mr(Vt,[NC()].concat(Ft));ut.attr("class",Kt.length>0?Kt.join(" "):null),ut.attr(aw(),null),ut.attr(px(),null)};c.serializer.addTempAttr(LC()),c.serializer.addAttributeFilter($,ut=>{for(const pt of ut)et(pt).each(xt=>{xt.persistent===!1&&(pt.name==="span"?pt.unwrap():rt(pt))})})},uT=()=>{const c={};return{register:(rt,ut)=>{c[rt]={name:rt,settings:ut}},lookup:rt=>$a(c,rt).map(ut=>ut.settings),getNames:()=>Yr(c)}},F3=(c,g,$)=>Math.min(Math.max(c,g),$),uE=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let z3=0;const zC=c=>{const $=new Date().getTime(),et=Math.floor(uE()*1e9);return z3++,c+"_"+et+z3+String($)},iB=(c,g)=>{sn(g,$=>{Gy(c,$)})},aB=(c,g)=>{sn(g,$=>{S1(c,$)})},BC=(c,g)=>eo.fromDom(c.dom.cloneNode(g)),Yv=c=>BC(c,!1),dE=c=>BC(c,!0),tM=(c,g)=>{const $=eo.fromTag(g),et=p_(c);return Pp($,et),$},nM=(c,g)=>{const $=tM(c,g);fy(c,$);const et=tm(c);return Hv($,et),_u(c),$},oM=(c,g,$=Dn)=>{const et=new pm(c,g),rt=ut=>{let pt;do pt=et[ut]();while(pt&&!pr(pt)&&!$(pt));return Xt.from(pt).filter(pr)};return{current:()=>Xt.from(et.current()).filter(pr),next:()=>rt("next"),prev:()=>rt("prev"),prev2:()=>rt("prev2")}},b2=(c,g)=>{const $=g||(pt=>c.isBlock(pt)||tu(pt)||nu(pt)),et=(pt,xt,Et,Ft)=>{if(pr(pt)){const Vt=Ft(pt,xt,pt.data);if(Vt!==-1)return Xt.some({container:pt,offset:Vt})}return Et().bind(Vt=>et(Vt.container,Vt.offset,Et,Ft))};return{backwards:(pt,xt,Et,Ft)=>{const Vt=oM(pt,Ft??c.getRoot(),$);return et(pt,xt,()=>Vt.prev().map(Kt=>({container:Kt,offset:Kt.length})),Et).getOrNull()},forwards:(pt,xt,Et,Ft)=>{const Vt=oM(pt,Ft??c.getRoot(),$);return et(pt,xt,()=>Vt.next().map(Kt=>({container:Kt,offset:0})),Et).getOrNull()}}},v2=((c,g)=>{const $=ut=>{if(!c(ut))throw new Error("Can only get "+g+" value of a "+g+" node");return et(ut).getOr("")},et=ut=>c(ut)?Xt.from(ut.dom.nodeValue):Xt.none();return{get:$,getOption:et,set:(ut,pt)=>{if(!c(ut))throw new Error("Can only set raw "+g+" value of a "+g+" node");ut.dom.nodeValue=pt}}})(vu,"text"),$C=c=>v2.get(c),rM=c=>v2.getOption(c),GC=(c,g)=>v2.set(c,g),gL=["td","th"],B3=["thead","tbody","tfoot"],sM=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],iM=["li","dd","dt"],u0=["ul","ol","dl"],cB=["pre","script","textarea","style"],lw=c=>{let g;return $=>(g=g||ar(c,xo),es(g,En($)))},mL=c=>En(c)==="table",gx=c=>_i(c)&&En(c)==="br",Ey=lw(sM),G1=lw(u0),_2=lw(iM),aM=lw(B3),fE=lw(gL),dT=lw(cB),cw=c=>{const g=[];let $=c.dom;for(;$;)g.push(eo.fromDom($)),$=$.lastChild;return g},$3=c=>{const g=_0(c,"br"),$=Bn(cw(c).slice(-1),gx);g.length===$.length&&sn($,_u)},j1=()=>{const c=eo.fromTag("br");return up(c,"data-mce-bogus","1"),c},P_=c=>{x_(c),qp(c,j1())},yL=(c,g)=>{I1(c).each($=>{cv($).each(et=>{g.isBlock(En(c))&&gx($)&&g.isBlock(En(et))&&_u($)})})},Am=yC,hE=bC,mv=hy,fT=c=>c.insertContent(Am,{preserve_zwsp:!0}),G3=Fr,x2=pr,uw=c=>(x2(c)&&(c=c.parentNode),G3(c)&&c.hasAttribute("data-mce-caret")),Xv=c=>x2(c)&&hE(c.data),yv=c=>uw(c)||Xv(c),lM=c=>c.firstChild!==c.lastChild||!tu(c.firstChild),bL=(c,g)=>{var $;const rt=(($=c.ownerDocument)!==null&&$!==void 0?$:document).createTextNode(Am),ut=c.parentNode;if(g){const pt=c.previousSibling;if(x2(pt)){if(yv(pt))return pt;if(C0(pt))return pt.splitText(pt.data.length-1)}ut==null||ut.insertBefore(rt,c)}else{const pt=c.nextSibling;if(x2(pt)){if(yv(pt))return pt;if(Hl(pt))return pt.splitText(1),pt}c.nextSibling?ut==null||ut.insertBefore(rt,c.nextSibling):ut==null||ut.appendChild(rt)}return rt},O_=c=>{const g=c.container();return pr(g)?g.data.charAt(c.offset())===Am||c.isAtStart()&&Xv(g.previousSibling):!1},mx=c=>{const g=c.container();return pr(g)?g.data.charAt(c.offset()-1)===Am||c.isAtEnd()&&Xv(g.nextSibling):!1},hT=(c,g,$)=>{var et;const ut=((et=g.ownerDocument)!==null&&et!==void 0?et:document).createElement(c);ut.setAttribute("data-mce-caret",$?"before":"after"),ut.setAttribute("data-mce-bogus","all"),ut.appendChild(j1().dom);const pt=g.parentNode;return $?pt==null||pt.insertBefore(ut,g):g.nextSibling?pt==null||pt.insertBefore(ut,g.nextSibling):pt==null||pt.appendChild(ut),ut},Hl=c=>x2(c)&&c.data[0]===Am,C0=c=>x2(c)&&c.data[c.data.length-1]===Am,w2=c=>{var g;const $=c.getElementsByTagName("br"),et=$[$.length-1];P1(et)&&((g=et.parentNode)===null||g===void 0||g.removeChild(et))},jC=c=>c&&c.hasAttribute("data-mce-caret")?(w2(c),c.removeAttribute("data-mce-caret"),c.removeAttribute("data-mce-bogus"),c.removeAttribute("style"),c.removeAttribute("data-mce-style"),c.removeAttribute("_moz_abspos"),c):null,Xu=c=>uw(c.startContainer),C2=Math.round,yx=c=>c?{left:C2(c.left),top:C2(c.top),bottom:C2(c.bottom),right:C2(c.right),width:C2(c.width),height:C2(c.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},cM=(c,g)=>(c=yx(c),g||(c.left=c.left+c.width),c.right=c.left,c.width=0,c),vL=(c,g)=>c.left===g.left&&c.top===g.top&&c.bottom===g.bottom&&c.right===g.right,uM=(c,g,$)=>c>=0&&c<=Math.min(g.height,$.height)/2,Ju=(c,g)=>{const $=Math.min(g.height/2,c.height/2);return c.bottom-$<g.top?!0:c.top>g.bottom?!1:uM(g.top-c.bottom,c,g)},pE=(c,g)=>c.top>g.bottom?!0:c.bottom<g.top?!1:uM(g.bottom-c.top,c,g),_L=(c,g,$)=>g>=c.left&&g<=c.right&&$>=c.top&&$<=c.bottom,dM=c=>Wn(c,(g,$)=>g.fold(()=>Xt.some($),et=>{const rt=Math.min($.left,et.left),ut=Math.min($.top,et.top),pt=Math.max($.right,et.right),xt=Math.max($.bottom,et.bottom);return Xt.some({top:ut,right:pt,bottom:xt,left:rt,width:pt-rt,height:xt-ut})}),Xt.none()),k2=(c,g,$)=>{const et=Math.max(Math.min(g,c.left+c.width),c.left),rt=Math.max(Math.min($,c.top+c.height),c.top);return Math.sqrt((g-et)*(g-et)+($-rt)*($-rt))},Jv=(c,g)=>Math.max(0,Math.min(c.bottom,g.bottom)-Math.max(c.top,g.top)),gE=c=>{const g=c.startContainer,$=c.startOffset;return g===c.endContainer&&g.hasChildNodes()&&c.endOffset===$+1?g.childNodes[$]:null},bx=(c,g)=>{if(Fr(c)&&c.hasChildNodes()){const $=c.childNodes,et=F3(g,0,$.length-1);return $[et]}else return c},Zr=(c,g)=>{if(!(g<0&&Fr(c)&&c.hasChildNodes()))return bx(c,g)},fM=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),pT=c=>Tt(c)&&c.charCodeAt(0)>=768&&fM.test(c),hM=(...c)=>g=>{for(let $=0;$<c.length;$++)if(c[$](g))return!0;return!1},pM=(...c)=>g=>{for(let $=0;$<c.length;$++)if(!c[$](g))return!1;return!0},j3=Qo,H3=nu,HC=tu,mE=pr,S2=Uy(["script","style","textarea"]),gT=Uy(["img","input","textarea","hr","iframe","video","audio","object","embed"]),UC=Uy(["table"]),mT=yv,Qv=c=>mT(c)?!1:mE(c)?!S2(c.parentNode):gT(c)||HC(c)||UC(c)||yT(c),xL=c=>Fr(c)&&c.getAttribute("unselectable")==="true",yT=c=>!xL(c)&&H3(c),bT=(c,g)=>{for(let $=c.parentNode;$&&$!==g;$=$.parentNode){if(yT($))return!1;if(j3($))return!0}return!0},wL=c=>yT(c)?!Wn(Ts(c.getElementsByTagName("*")),(g,$)=>g||j3($),!1):!1,CL=c=>gT(c)||wL(c),gM=(c,g)=>Qv(c)&&bT(c,g),yE=Fr,mM=Qv,U3=Qw("display","block table"),kL=Qw("float","left right"),bE=pM(yE,mM,qn(kL)),VC=qn(Qw("white-space","pre pre-line pre-wrap")),dw=pr,vT=tu,V3=Uu.nodeIndex,_T=Zr,W3=c=>c?c.createRange():Uu.DOM.createRng(),q3=c=>Tt(c)&&/[\r\n\t ]/.test(c),Z3=c=>!!c.setStart&&!!c.setEnd,yM=c=>{const g=c.startContainer,$=c.startOffset;if(q3(c.toString())&&VC(g.parentNode)&&pr(g)){const et=g.data;if(q3(et[$-1])||q3(et[$+1]))return!0}return!1},Ay=c=>{const g=c.ownerDocument,$=W3(g),et=g.createTextNode(gm),rt=c.parentNode;rt.insertBefore(et,c),$.setStart(et,0),$.setEnd(et,1);const ut=yx($.getBoundingClientRect());return rt.removeChild(et),ut},E2=c=>{const g=c.startContainer,$=c.endContainer,et=c.startOffset,rt=c.endOffset;if(g===$&&pr($)&&et===0&&rt===1){const ut=c.cloneRange();return ut.setEndAfter($),fw(ut)}else return null},bM=c=>c.left===0&&c.right===0&&c.top===0&&c.bottom===0,fw=c=>{var g;let $;const et=c.getClientRects();return et.length>0?$=yx(et[0]):$=yx(c.getBoundingClientRect()),!Z3(c)&&vT(c)&&bM($)?Ay(c):bM($)&&Z3(c)&&(g=E2(c))!==null&&g!==void 0?g:$},T2=(c,g)=>{const $=cM(c,g);return $.width=1,$.right=$.left+1,$},K3=c=>{const g=[],$=pt=>{pt.height!==0&&(g.length>0&&vL(pt,g[g.length-1])||g.push(pt))},et=(pt,xt)=>{const Et=W3(pt.ownerDocument);if(xt<pt.data.length){if(pT(pt.data[xt]))return;if(pT(pt.data[xt-1])&&(Et.setStart(pt,xt),Et.setEnd(pt,xt+1),!yM(Et))){$(T2(fw(Et),!1));return}}xt>0&&(Et.setStart(pt,xt-1),Et.setEnd(pt,xt),yM(Et)||$(T2(fw(Et),!1))),xt<pt.data.length&&(Et.setStart(pt,xt),Et.setEnd(pt,xt+1),yM(Et)||$(T2(fw(Et),!0)))},rt=c.container(),ut=c.offset();if(dw(rt))return et(rt,ut),g;if(yE(rt))if(c.isAtEnd()){const pt=_T(rt,ut);dw(pt)&&et(pt,pt.data.length),bE(pt)&&!vT(pt)&&$(T2(fw(pt),!1))}else{const pt=_T(rt,ut);if(dw(pt)&&et(pt,0),bE(pt)&&c.isAtEnd())return $(T2(fw(pt),!1)),g;const xt=_T(c.container(),c.offset()-1);bE(xt)&&!vT(xt)&&(U3(xt)||U3(pt)||!bE(pt))&&$(T2(fw(xt),!1)),bE(pt)&&$(T2(fw(pt),!0))}return g},Uo=(c,g,$)=>{const et=()=>(dw(c),g===0),rt=()=>dw(c)?g>=c.data.length:g>=c.childNodes.length,ut=()=>{const Vt=W3(c.ownerDocument);return Vt.setStart(c,g),Vt.setEnd(c,g),Vt},pt=()=>($||($=K3(Uo(c,g))),$),xt=()=>pt().length>0,Et=Vt=>Vt&&c===Vt.container()&&g===Vt.offset(),Ft=Vt=>_T(c,Vt?g-1:g);return{container:cn(c),offset:cn(g),toRange:ut,getClientRects:pt,isVisible:xt,isAtStart:et,isAtEnd:rt,isEqual:Et,getNode:Ft}};Uo.fromRangeStart=c=>Uo(c.startContainer,c.startOffset),Uo.fromRangeEnd=c=>Uo(c.endContainer,c.endOffset),Uo.after=c=>Uo(c.parentNode,V3(c)+1),Uo.before=c=>Uo(c.parentNode,V3(c)),Uo.isAbove=(c,g)=>js(wr(g.getClientRects()),gs(c.getClientRects()),Ju).getOr(!1),Uo.isBelow=(c,g)=>js(gs(g.getClientRects()),wr(c.getClientRects()),pE).getOr(!1),Uo.isAtStart=c=>c?c.isAtStart():!1,Uo.isAtEnd=c=>c?c.isAtEnd():!1,Uo.isTextPosition=c=>c?pr(c.container()):!1,Uo.isElementPosition=c=>!Uo.isTextPosition(c);const e1=(c,g)=>{pr(g)&&g.data.length===0&&c.remove(g)},I2=(c,g,$)=>{g.insertNode($),e1(c,$.previousSibling),e1(c,$.nextSibling)},SL=(c,g,$)=>{const et=Xt.from($.firstChild),rt=Xt.from($.lastChild);g.insertNode($),et.each(ut=>e1(c,ut.previousSibling)),rt.each(ut=>e1(c,ut.nextSibling))},vE=(c,g,$)=>{mm($)?SL(c,g,$):I2(c,g,$)},bv=pr,WC=P1,vM=Uu.nodeIndex,_M=c=>{const g=c.parentNode;return WC(g)?_M(g):g},k0=c=>c?Vn(c.childNodes,(g,$)=>(WC($)&&$.nodeName!=="BR"?g=g.concat(k0($)):g.push($),g),[]):[],xT=(c,g)=>{let $=c;for(;($=$.previousSibling)&&bv($);)g+=$.data.length;return g},xM=c=>g=>c===g,EL=c=>{let g,$;g=k0(_M(c)),$=$n(g,xM(c),c),g=g.slice(0,$+1);const et=Vn(g,(rt,ut,pt)=>(bv(ut)&&bv(g[pt-1])&&rt++,rt),0);return g=qu(g,Uy([c.nodeName])),$=$n(g,xM(c),c),$-et},wM=c=>(bv(c)?"text()":c.nodeName.toLowerCase())+"["+EL(c)+"]",AL=(c,g,$)=>{const et=[];for(let rt=g.parentNode;rt&&rt!==c;rt=rt.parentNode)et.push(rt);return et},CM=(c,g)=>{let $=[],et=g.container(),rt=g.offset(),ut;if(bv(et))ut=xT(et,rt);else{const xt=et.childNodes;rt>=xt.length?(ut="after",rt=xt.length-1):ut="before",et=xt[rt]}$.push(wM(et));let pt=AL(c,et);return pt=qu(pt,qn(P1)),$=$.concat(Wu(pt,xt=>wM(xt))),$.reverse().join("/")+","+ut},TL=(c,g,$)=>{let et=k0(c);return et=qu(et,(rt,ut)=>!bv(rt)||!bv(et[ut-1])),et=qu(et,Uy([g])),et[$]},IL=(c,g)=>{let $=c,et=0;for(;bv($);){const rt=$.data.length;if(g>=et&&g<=et+rt){c=$,g=g-et;break}if(!bv($.nextSibling)){c=$,g=rt;break}et+=rt,$=$.nextSibling}return bv(c)&&g>c.data.length&&(g=c.data.length),Uo(c,g)},kM=(c,g)=>{if(!g)return null;const $=g.split(","),et=$[0].split("/"),rt=$.length>1?$[1]:"before",ut=Vn(et,(pt,xt)=>{const Et=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(xt);return Et?(Et[1]==="text()"&&(Et[1]="#text"),TL(pt,Et[1],parseInt(Et[2],10))):null},c);if(!ut)return null;if(!bv(ut)&&ut.parentNode){let pt;return rt==="after"?pt=vM(ut)+1:pt=vM(ut),Uo(ut.parentNode,pt)}return IL(ut,parseInt(rt,10))},qC=nu,RL=(c,g,$)=>{let et=c(g.data.slice(0,$)).length;for(let rt=g.previousSibling;rt&&pr(rt);rt=rt.previousSibling)et+=c(rt.data).length;return et},SM=(c,g,$,et,rt)=>{const ut=rt?et.startContainer:et.endContainer;let pt=rt?et.startOffset:et.endOffset;const xt=[],Et=c.getRoot();if(pr(ut))xt.push($?RL(g,ut,pt):pt);else{let Ft=0;const Vt=ut.childNodes;pt>=Vt.length&&Vt.length&&(Ft=1,pt=Math.max(0,Vt.length-1)),xt.push(c.nodeIndex(Vt[pt],$)+Ft)}for(let Ft=ut;Ft&&Ft!==Et;Ft=Ft.parentNode)xt.push(c.nodeIndex(Ft,$));return xt},ML=(c,g,$,et)=>{const rt=g.dom,ut=SM(rt,c,$,et,!0),pt=g.isForward(),xt=Xu(et)?{isFakeCaret:!0}:{};if(g.isCollapsed())return{start:ut,forward:pt,...xt};{const Et=SM(rt,c,$,et,!1);return{start:ut,end:Et,forward:pt,...xt}}},_p=(c,g,$)=>{let et=0;return dr.each(c.select(g),rt=>{if(rt.getAttribute("data-mce-bogus")!=="all"){if(rt===$)return!1;et++;return}}),et},Y3=(c,g)=>{let $=g?c.startContainer:c.endContainer,et=g?c.startOffset:c.endOffset;if(Fr($)&&$.nodeName==="TR"){const rt=$.childNodes;$=rt[Math.min(g?et:et-1,rt.length-1)],$&&(et=g?0:$.childNodes.length,g?c.setStart($,et):c.setEnd($,et))}},EM=c=>(Y3(c,!0),Y3(c,!1),c),AM=(c,g)=>{if(Fr(c)&&(c=bx(c,g),qC(c)))return c;if(yv(c)){pr(c)&&uw(c)&&(c=c.parentNode);let $=c.previousSibling;if(qC($)||($=c.nextSibling,qC($)))return $}},X3=c=>AM(c.startContainer,c.startOffset)||AM(c.endContainer,c.endOffset),Tm=(c,g,$)=>{const et=$.getNode(),rt=$.getRng();if(et.nodeName==="IMG"||qC(et)){const pt=et.nodeName;return{name:pt,index:_p($.dom,pt,et)}}const ut=X3(rt);if(ut){const pt=ut.tagName;return{name:pt,index:_p($.dom,pt,ut)}}return ML(c,$,g,rt)},qy=c=>{const g=c.getRng();return{start:CM(c.dom.getRoot(),Uo.fromRangeStart(g)),end:CM(c.dom.getRoot(),Uo.fromRangeEnd(g)),forward:c.isForward()}},TM=c=>({rng:c.getRng(),forward:c.isForward()}),J3=(c,g,$)=>{const et={"data-mce-type":"bookmark",id:g,style:"overflow:hidden;line-height:0px"};return $?c.create("span",et,"&#xFEFF;"):c.create("span",et)},Q3=(c,g)=>{const $=c.dom;let et=c.getRng();const rt=$.uniqueId(),ut=c.isCollapsed(),pt=c.getNode(),xt=pt.nodeName,Et=c.isForward();if(xt==="IMG")return{name:xt,index:_p($,xt,pt)};const Ft=EM(et.cloneRange());if(!ut){Ft.collapse(!1);const Kt=J3($,rt+"_end",g);vE($,Ft,Kt)}et=EM(et),et.collapse(!0);const Vt=J3($,rt+"_start",g);return vE($,et,Vt),c.moveToBookmark({id:rt,keep:!0,forward:Et}),{id:rt,forward:Et}},PL=(c,g,$=!1)=>g===2?Tm(mv,$,c):g===3?qy(c):g?TM(c):Q3(c,!1),wT=Tn(Tm,fo,!0),IM=c=>{const g=ut=>ut(c),$=cn(c),et=()=>rt,rt={tag:!0,inner:c,fold:(ut,pt)=>pt(c),isValue:xo,isError:Dn,map:ut=>bm.value(ut(c)),mapError:et,bind:g,exists:g,forall:g,getOr:$,or:et,getOrThunk:$,orThunk:et,getOrDie:$,each:ut=>{ut(c)},toOptional:()=>Xt.some(c)};return rt},_E=c=>{const g=()=>$,$={tag:!1,inner:c,fold:(et,rt)=>et(c),isValue:Dn,isError:xo,map:g,mapError:et=>bm.error(et(c)),bind:g,exists:Dn,forall:xo,getOr:fo,or:fo,getOrThunk:oo,orThunk:oo,getOrDie:nr(String(c)),each:hn,toOptional:Xt.none};return $},bm={value:IM,error:_E,fromOption:(c,g)=>c.fold(()=>_E(g),IM)},vv={generate:c=>{if(!qt(c))throw new Error("cases must be an array");if(c.length===0)throw new Error("there must be at least one case");const g=[],$={};return sn(c,(et,rt)=>{const ut=Yr(et);if(ut.length!==1)throw new Error("one and only one name per case");const pt=ut[0],xt=et[pt];if($[pt]!==void 0)throw new Error("duplicate key detected:"+pt);if(pt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!qt(xt))throw new Error("case arguments must be an array");g.push(pt),$[pt]=(...Et)=>{const Ft=Et.length;if(Ft!==xt.length)throw new Error("Wrong number of arguments to case "+pt+". Expected "+xt.length+" ("+xt+"), got "+Ft);return{fold:(...Kt)=>{if(Kt.length!==c.length)throw new Error("Wrong number of arguments to fold. Expected "+c.length+", got "+Kt.length);return Kt[rt].apply(null,Et)},match:Kt=>{const en=Yr(Kt);if(g.length!==en.length)throw new Error("Wrong number of arguments to match. Expected: "+g.join(",")+`
Actual: `+en.join(","));if(!Co(g,Sn=>yn(en,Sn)))throw new Error("Not all branches were specified when using match. Specified: "+en.join(", ")+`
Required: `+g.join(", "));return Kt[pt].apply(null,Et)},log:Kt=>{console.log(Kt,{constructors:g,constructor:pt,params:Et})}}}}),$}};vv.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ap=c=>{const g=[],$=[];return sn(c,et=>{et.fold(rt=>{g.push(rt)},rt=>{$.push(rt)})}),{errors:g,values:$}},D_=c=>c.type==="inline-command"||c.type==="inline-format",ZC=c=>c.type==="block-command"||c.type==="block-format",eR=(c,g)=>(c.type==="block-command"||c.type==="block-format")&&c.trigger===g,xE=c=>{var g;const $=rt=>bm.error({message:rt,pattern:c}),et=(rt,ut,pt)=>{if(c.format!==void 0){let xt;if(qt(c.format)){if(!Co(c.format,Tt))return $(rt+" pattern has non-string items in the `format` array");xt=c.format}else if(Tt(c.format))xt=[c.format];else return $(rt+" pattern has non-string `format` parameter");return bm.value(ut(xt))}else return c.cmd!==void 0?Tt(c.cmd)?bm.value(pt(c.cmd,c.value)):$(rt+" pattern has non-string `cmd` parameter"):$(rt+" pattern is missing both `format` and `cmd` parameters")};if(!Gt(c))return $("Raw pattern is not an object");if(!Tt(c.start))return $("Raw pattern is missing `start` parameter");if(c.end!==void 0){if(!Tt(c.end))return $("Inline pattern has non-string `end` parameter");if(c.start.length===0&&c.end.length===0)return $("Inline pattern has empty `start` and `end` parameters");let rt=c.start,ut=c.end;return ut.length===0&&(ut=rt,rt=""),et("Inline",pt=>({type:"inline-format",start:rt,end:ut,format:pt}),(pt,xt)=>({type:"inline-command",start:rt,end:ut,cmd:pt,value:xt}))}else{if(c.replacement!==void 0)return Tt(c.replacement)?c.start.length===0?$("Replacement pattern has empty `start` parameter"):bm.value({type:"inline-command",start:"",end:c.start,cmd:"mceInsertContent",value:c.replacement}):$("Replacement pattern has non-string `replacement` parameter");{const rt=(g=c.trigger)!==null&&g!==void 0?g:"space";return c.start.length===0?$("Block pattern has empty `start` parameter"):et("Block",ut=>({type:"block-format",start:c.start,format:ut[0],trigger:rt}),(ut,pt)=>({type:"block-command",start:c.start,cmd:ut,value:pt,trigger:rt}))}}},MM=c=>Bn(c,ZC),hw=c=>Bn(c,D_),d0=(c,g)=>({inlinePatterns:hw(c),blockPatterns:MM(c),dynamicPatternsLookup:g}),N_=(c,g)=>({...c,blockPatterns:Bn(c.blockPatterns,$=>eR($,g))}),PM=c=>{const g=ap(Nn(c,xE));return sn(g.errors,$=>console.error($.message,$.pattern)),g.values},DL=c=>g=>{const $=c(g);return PM($)},tR=dn().deviceType,CT=tR.isTouch(),nR=Uu.DOM,oR=c=>{const g=c.indexOf("=")>0?c.split(/[;,](?![^=;,]*(?:[;,]|$))/):c.split(",");return Wn(g,($,et)=>{const rt=et.split("="),ut=rt[0],pt=rt.length>1?rt[1]:ut;return $[pu(ut)]=pu(pt),$},{})},kT=c=>Pt(c,RegExp),Kr=c=>g=>g.options.get(c),wE=c=>Tt(c)||Gt(c),rR=(c,g="")=>$=>{const et=Tt($);if(et)if($.indexOf("=")!==-1){const rt=oR($);return{value:$a(rt,c.id).getOr(g),valid:et}}else return{value:$,valid:et};else return{valid:!1,message:"Must be a string."}},OM=c=>{const g=c.options.register;g("id",{processor:"string",default:c.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:c.documentBaseUrl}),g("body_id",{processor:rR(c,"tinymce"),default:"tinymce"}),g("body_class",{processor:rR(c),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:$=>{const et=Tt($)&&Cs($);return et?{value:$,valid:et}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:$=>{const et=yn(["block","linebreak","invert","default"],$);return et?{value:$,valid:et}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:$=>Qt($)?{valid:!0,value:$}:Tt($)?{valid:!0,value:$}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:$=>{const et=$===!1||Tt($)||pn($,Tt);return et?Tt($)?{value:Nn($.split(","),pu),valid:et}:qt($)?{value:$,valid:et}:$===!1?{value:[],valid:et}:{value:$,valid:et}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:O2(c)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:$=>{const et=Tt($)||pn($,Tt);return et?{value:qt($)?$:Nn($.split(","),pu),valid:et}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:$=>{const et=Qt($)||Tt($);return et?$===!1||tR.isiPhone()||tR.isiPad()?{value:"",valid:et}:{value:$===!0?"table,img,figure.image,div,video,iframe":$,valid:et}:{valid:!1,message:"Must be boolean or a string"}},default:!CT}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"string"}),g("service_message",{processor:"string"}),g("theme",{processor:$=>$===!1||Tt($)||Wt($),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:$=>{const et=$===!1||Tt($);return et?{value:$===!1?"":$,valid:et}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:c.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:c.convertURL}),g("url_converter_scope",{processor:"object",default:c}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("allow_mathml_annotation_encodings",{processor:$=>{const et=pn($,Tt);return et?{value:$,valid:et}:{valid:!1,message:"Must be an array of strings."}},default:[]}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:wE}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:wE}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:wE}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:wE}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:$=>Tt($)||$===!0}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("license_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:$=>pn($,Gt)||$===!1?{value:PM($===!1?[]:$),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),g("text_patterns_lookup",{processor:$=>Wt($)?{value:DL($),valid:!0}:{valid:!1,message:"Must be a single function"},default:$=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:$=>pn($,kT)?{value:$,valid:!0}:kT($)?{value:[$],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!0}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:$=>{const et=yn(["inherited","collapsed","expanded"],$);return et?{value:$,valid:et}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:$=>{const et=yn(["inherited","collapsed","expanded"],$);return et?{value:$,valid:et}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),g("sandbox_iframes",{processor:"boolean",default:!0}),g("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),g("convert_unsafe_embeds",{processor:"boolean",default:!0}),c.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:$1.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:nR.getAttrib(c.getElement(),"placeholder")})})},LL=Kr("iframe_attrs"),f0=Kr("doctype"),DM=Kr("document_base_url"),pw=Kr("body_id"),NM=Kr("body_class"),sR=Kr("content_security_policy"),LM=Kr("br_in_pre"),h0=Kr("forced_root_block"),gw=Kr("forced_root_block_attrs"),iR=Kr("newline_behavior"),R2=Kr("br_newline_selector"),FL=Kr("no_newline_selector"),vm=Kr("keep_styles"),_m=Kr("end_container_on_empty_block"),i0=Kr("automatic_uploads"),xm=Kr("images_reuse_filename"),yu=Kr("images_replace_blob_uris"),im=Kr("icons"),ST=Kr("icons_url"),aR=Kr("images_upload_url"),lR=Kr("images_upload_base_path"),cR=Kr("images_upload_credentials"),FM=Kr("images_upload_handler"),zM=Kr("content_css_cors"),CE=Kr("referrer_policy"),ET=Kr("language"),kE=Kr("language_url"),BM=Kr("indent_use_margin"),uB=Kr("indentation"),M2=Kr("content_css"),Ty=Kr("content_style"),zL=Kr("font_css"),BL=Kr("directionality"),_v=Kr("inline_boundaries_selector"),KC=Kr("object_resizing"),P2=Kr("resize_img_proportional"),L_=Kr("placeholder"),B0=Kr("event_root"),uR=Kr("service_message"),mw=Kr("theme"),$M=Kr("theme_url"),TT=Kr("model"),dR=Kr("model_url"),SE=Kr("inline_boundaries"),IT=Kr("formats"),GM=Kr("preview_styles"),jM=Kr("format_empty_lines"),HM=Kr("format_noneditable_selector"),EE=Kr("custom_ui_selector"),O2=Kr("inline"),AE=Kr("hidden_input"),$L=Kr("submit_patch"),fR=Kr("add_form_submit_trigger"),GL=Kr("add_unload_trigger"),RT=Kr("custom_undo_redo_levels"),jL=Kr("disable_nodechange"),UM=Kr("readonly"),HL=Kr("editable_root"),VM=Kr("content_css_cors"),TE=Kr("plugins"),WM=Kr("external_plugins"),ny=Kr("block_unsupported_drop"),hR=Kr("visual"),qM=Kr("visual_table_class"),pR=Kr("visual_anchor_class"),IE=Kr("iframe_aria_text"),UL=Kr("setup"),VL=Kr("init_instance_callback"),WL=Kr("urlconverter_callback"),MT=Kr("auto_focus"),ZM=Kr("browser_spellcheck"),gR=Kr("protect"),mR=Kr("paste_block_drop"),RE=Kr("paste_data_images"),yR=Kr("paste_preprocess"),KM=Kr("paste_postprocess"),YM=Kr("newdocument_content"),XM=Kr("paste_webkit_styles"),qL=Kr("paste_remove_styles_if_webkit"),JM=Kr("paste_merge_formats"),bR=Kr("smart_paste"),QM=Kr("paste_as_text"),yw=Kr("paste_tab_spaces"),eP=Kr("allow_html_data_urls"),ZL=Kr("text_patterns"),KL=Kr("text_patterns_lookup"),PT=Kr("noneditable_class"),n1=Kr("editable_class"),OT=Kr("noneditable_regexp"),DT=Kr("preserve_cdata"),vR=Kr("highlight_on_focus"),tP=Kr("xss_sanitization"),am=Kr("init_content_sync"),nP=c=>c.options.isSet("text_patterns_lookup"),YC=c=>dr.explode(c.options.get("font_size_style_values")),bw=c=>dr.explode(c.options.get("font_size_classes")),NT=c=>c.options.get("encoding")==="xml",oP=c=>dr.explode(c.options.get("images_file_types")),YL=Kr("table_tab_navigation"),XL=Kr("details_initial_state"),rP=Kr("details_serialized_state"),ME=Kr("sandbox_iframes"),_R=c=>c.options.get("sandbox_iframes_exclusions"),JL=Kr("convert_unsafe_embeds"),XC=Kr("license_key"),sP=Kr("api_key"),iP=Fr,aP=pr,xR=c=>{const g=c.parentNode;g&&g.removeChild(c)},LT=c=>{const g=mv(c);return{count:c.length-g.length,text:g}},lP=c=>{let g;for(;(g=c.data.lastIndexOf(Am))!==-1;)c.deleteData(g,1)},vw=(c,g)=>(D2(c),g),QL=(c,g)=>{const $=LT(c.data.substr(0,g.offset())),et=LT(c.data.substr(g.offset()));return($.text+et.text).length>0?(lP(c),Uo(c,g.offset()-$.count)):g},cP=(c,g)=>{const $=g.container(),et=ko(Ts($.childNodes),c).map(rt=>rt<g.offset()?Uo($,g.offset()-1):g).getOr(g);return D2(c),et},uP=(c,g)=>aP(c)&&g.container()===c?QL(c,g):vw(c,g),FT=(c,g)=>g.container()===c.parentNode?cP(c,g):vw(c,g),e8=(c,g)=>Uo.isTextPosition(g)?uP(c,g):FT(c,g),D2=c=>{iP(c)&&yv(c)&&(lM(c)?c.removeAttribute("data-mce-caret"):xR(c)),aP(c)&&(lP(c),c.data.length===0&&xR(c))},zT=nu,PE=o0,dP=o2,JC="*[contentEditable=false],video,audio,embed,object",QC=(c,g,$)=>{const et=cM(g.getBoundingClientRect(),$);let rt,ut;if(c.tagName==="BODY"){const xt=c.ownerDocument.documentElement;rt=c.scrollLeft||xt.scrollLeft,ut=c.scrollTop||xt.scrollTop}else{const xt=c.getBoundingClientRect();rt=c.scrollLeft-xt.left,ut=c.scrollTop-xt.top}et.left+=rt,et.right+=rt,et.top+=ut,et.bottom+=ut,et.width=1;let pt=g.offsetWidth-g.clientWidth;return pt>0&&($&&(pt*=-1),et.left+=pt,et.right+=pt),et},t8=c=>{var g,$;const et=_0(eo.fromDom(c),JC);for(let rt=0;rt<et.length;rt++){const ut=et[rt].dom;let pt=ut.previousSibling;if(C0(pt)){const xt=pt.data;xt.length===1?(g=pt.parentNode)===null||g===void 0||g.removeChild(pt):pt.deleteData(xt.length-1,1)}pt=ut.nextSibling,Hl(pt)&&(pt.data.length===1?($=pt.parentNode)===null||$===void 0||$.removeChild(pt):pt.deleteData(0,1))}},fP=(c,g,$,et)=>{const rt=Em();let ut,pt;const xt=h0(c),Et=c.dom,Ft=(bn,Pn)=>{let ao;if(Vt(),dP(Pn))return null;if($(Pn)){const po=hT(xt,Pn,bn),wo=QC(g,Pn,bn);Et.setStyle(po,"top",wo.top),Et.setStyle(po,"caret-color","transparent"),pt=po;const Io=Et.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});Et.setStyles(Io,{...wo}),Et.add(g,Io),rt.set({caret:Io,element:Pn,before:bn}),bn&&Et.addClass(Io,"mce-visual-caret-before"),Kt(),ao=Pn.ownerDocument.createRange(),ao.setStart(po,0),ao.setEnd(po,0)}else return pt=bL(Pn,bn),ao=Pn.ownerDocument.createRange(),N2(pt.nextSibling)?(ao.setStart(pt,0),ao.setEnd(pt,0)):(ao.setStart(pt,1),ao.setEnd(pt,1)),ao;return ao},Vt=()=>{t8(g),pt&&(D2(pt),pt=null),rt.on(bn=>{Et.remove(bn.caret),rt.clear()}),ut&&(clearInterval(ut),ut=void 0)},Kt=()=>{ut=setInterval(()=>{rt.on(bn=>{et()?Et.toggleClass(bn.caret,"mce-visual-caret-hidden"):Et.addClass(bn.caret,"mce-visual-caret-hidden")})},500)};return{show:Ft,hide:Vt,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{rt.on(bn=>{const Pn=QC(g,bn.element,bn.before);Et.setStyles(bn.caret,{...Pn})})},destroy:()=>clearInterval(ut)}},n8=()=>Xr.browser.isFirefox(),N2=c=>zT(c)||PE(c),_k=c=>(N2(c)||fv(c)&&n8())&&tx(eo.fromDom(c)).exists(Y0),wR=Qo,CR=nu,o8=o0,kR=Qw("display","block table table-cell table-row table-caption list-item"),hP=yv,pP=uw,eS=Fr,gP=pr,BT=Qv,_w=c=>c>0,vx=c=>c<0,OE=(c,g)=>{let $;for(;$=c(g);)if(!pP($))return $;return null},DE=(c,g,$,et,rt)=>{const ut=new pm(c,et),pt=CR(c)||pP(c);let xt;if(vx(g)){if(pt&&(xt=OE(ut.prev.bind(ut),!0),$(xt)))return xt;for(;xt=OE(ut.prev.bind(ut),rt);)if($(xt))return xt}if(_w(g)){if(pt&&(xt=OE(ut.next.bind(ut),!0),$(xt)))return xt;for(;xt=OE(ut.next.bind(ut),rt);)if($(xt))return xt}return null},r8=(c,g)=>{const $=rt=>wR(rt.dom),et=rt=>rt.dom===g;return ep(eo.fromDom(c),$,et).map(rt=>rt.dom).getOr(g)},Iy=(c,g)=>{for(;c&&c!==g;){if(kR(c))return c;c=c.parentNode}return null},H1=(c,g,$)=>Iy(c.container(),$)===Iy(g.container(),$),SR=(c,g)=>{if(!g)return Xt.none();const $=g.container(),et=g.offset();return eS($)?Xt.from($.childNodes[et+c]):Xt.none()},s8=(c,g)=>{var $;const rt=(($=g.ownerDocument)!==null&&$!==void 0?$:document).createRange();return c?(rt.setStartBefore(g),rt.setEndBefore(g)):(rt.setStartAfter(g),rt.setEndAfter(g)),rt},dB=(c,g,$)=>Iy(g,c)===Iy($,c),xw=(c,g,$)=>{const et=c?"previousSibling":"nextSibling";let rt=$;for(;rt&&rt!==g;){let ut=rt[et];if(ut&&hP(ut)&&(ut=ut[et]),CR(ut)||o8(ut)){if(dB(g,ut,rt))return ut;break}if(BT(ut))break;rt=rt.parentNode}return null},tS=Tn(s8,!0),a0=Tn(s8,!1),ER=(c,g,$)=>{let et;const rt=Tn(xw,!0,g),ut=Tn(xw,!1,g),pt=$.startContainer,xt=$.startOffset;if(uw(pt)){const Et=gP(pt)?pt.parentNode:pt,Ft=Et.getAttribute("data-mce-caret");if(Ft==="before"&&(et=Et.nextSibling,_k(et)))return tS(et);if(Ft==="after"&&(et=Et.previousSibling,_k(et)))return a0(et)}if(!$.collapsed)return $;if(pr(pt)){if(hP(pt)){if(c===1){if(et=ut(pt),et)return tS(et);if(et=rt(pt),et)return a0(et)}if(c===-1){if(et=rt(pt),et)return a0(et);if(et=ut(pt),et)return tS(et)}return $}if(C0(pt)&&xt>=pt.data.length-1)return c===1&&(et=ut(pt),et)?tS(et):$;if(Hl(pt)&&xt<=1)return c===-1&&(et=rt(pt),et)?a0(et):$;if(xt===pt.data.length)return et=ut(pt),et?tS(et):$;if(xt===0)return et=rt(pt),et?a0(et):$}return $},$T=(c,g)=>SR(c?0:-1,g).filter(CR),L2=(c,g,$)=>{const et=ER(c,g,$);return c===-1?Uo.fromRangeStart(et):Uo.fromRangeEnd(et)},NE=c=>Xt.from(c.getNode()).map(eo.fromDom),i8=c=>Xt.from(c.getNode(!0)).map(eo.fromDom),AR=(c,g)=>{let $=g;for(;$=c($);)if($.isVisible())return $;return $},LE=(c,g)=>{const $=H1(c,g);return!$&&tu(c.getNode())?!0:$};var l0;(function(c){c[c.Backwards=-1]="Backwards",c[c.Forwards=1]="Forwards"})(l0||(l0={}));const TR=nu,xv=pr,IR=Fr,nS=tu,oS=Qv,RR=CL,_x=gM,MR=(c,g)=>{const $=[];let et=c;for(;et&&et!==g;)$.push(et),et=et.parentNode;return $},PR=(c,g)=>c.hasChildNodes()&&g<c.childNodes.length?c.childNodes[g]:null,OR=(c,g)=>{if(_w(c)){if(oS(g.previousSibling)&&!xv(g.previousSibling))return Uo.before(g);if(xv(g))return Uo(g,0)}if(vx(c)){if(oS(g.nextSibling)&&!xv(g.nextSibling))return Uo.after(g);if(xv(g))return Uo(g,g.data.length)}return vx(c)?nS(g)?Uo.before(g):Uo.after(g):Uo.before(g)},F_=(c,g)=>{const $=g.nextSibling;return $&&oS($)?xv($)?Uo($,0):Uo.before($):GT(l0.Forwards,Uo.after(g),c)},GT=(c,g,$)=>{let et,rt,ut,pt;if(!IR($)||!g)return null;if(g.isEqual(Uo.after($))&&$.lastChild){if(pt=Uo.after($.lastChild),vx(c)&&oS($.lastChild)&&IR($.lastChild))return nS($.lastChild)?Uo.before($.lastChild):pt}else pt=g;const xt=pt.container();let Et=pt.offset();if(xv(xt)){if(vx(c)&&Et>0)return Uo(xt,--Et);if(_w(c)&&Et<xt.length)return Uo(xt,++Et);et=xt}else{if(vx(c)&&Et>0&&(rt=PR(xt,Et-1),oS(rt)))return!RR(rt)&&(ut=DE(rt,c,_x,rt),ut)?xv(ut)?Uo(ut,ut.data.length):Uo.after(ut):xv(rt)?Uo(rt,rt.data.length):Uo.before(rt);if(_w(c)&&Et<xt.childNodes.length&&(rt=PR(xt,Et),oS(rt)))return nS(rt)?F_($,rt):!RR(rt)&&(ut=DE(rt,c,_x,rt),ut)?xv(ut)?Uo(ut,0):Uo.before(ut):xv(rt)?Uo(rt,0):Uo.after(rt);et=rt||pt.getNode()}if(et&&(_w(c)&&pt.isAtEnd()||vx(c)&&pt.isAtStart())&&(et=DE(et,c,xo,$,!0),_x(et,$)))return OR(c,et);rt=et&&DE(et,c,_x,$);const Ft=Po(Bn(MR(xt,$),TR));return Ft&&(!rt||!Ft.contains(rt))?(_w(c)?pt=Uo.after(Ft):pt=Uo.before(Ft),pt):rt?OR(c,rt):null},p0=c=>({next:g=>GT(l0.Forwards,g,c),prev:g=>GT(l0.Backwards,g,c)}),mP=(c,g,$)=>{const et=c?Uo.before($):Uo.after($);return Zy(c,g,et)},DR=c=>tu(c)?Uo.before(c):Uo.after(c),NR=c=>Uo.isTextPosition(c)?c.offset()===0:Qv(c.getNode()),yP=c=>{if(Uo.isTextPosition(c)){const g=c.container();return c.offset()===g.data.length}else return Qv(c.getNode(!0))},LR=(c,g)=>!Uo.isTextPosition(c)&&!Uo.isTextPosition(g)&&c.getNode()===g.getNode(!0),bP=c=>!Uo.isTextPosition(c)&&tu(c.getNode()),vP=(c,g,$)=>c?!LR(g,$)&&!bP(g)&&yP(g)&&NR($):!LR($,g)&&NR(g)&&yP($),Zy=(c,g,$)=>{const et=p0(g);return Xt.from(c?et.next($):et.prev($))},ww=(c,g,$)=>Zy(c,g,$).bind(et=>H1($,et,g)&&vP(c,$,et)?Zy(c,g,et):Xt.some(et)),_P=(c,g,$,et)=>ww(c,g,$).bind(rt=>et(rt)?_P(c,g,rt,et):Xt.some(rt)),F2=(c,g)=>{const $=c?g.firstChild:g.lastChild;return pr($)?Xt.some(Uo($,c?0:$.data.length)):$?Qv($)?Xt.some(c?Uo.before($):DR($)):mP(c,g,$):Xt.none()},$0=Tn(Zy,!0),Ry=Tn(Zy,!1),G0=Tn(F2,!0),Ky=Tn(F2,!1),jT="_mce_caret",Yy=c=>Fr(c)&&c.id===jT,z2=(c,g)=>{let $=g;for(;$&&$!==c;){if(Yy($))return $;$=$.parentNode}return null},xP=c=>Tt(c.start),fB=c=>es(c,"rng"),a8=c=>es(c,"id"),FR=c=>es(c,"name"),l8=c=>dr.isArray(c.start),HT=c=>!FR(c)&&Qt(c.forward)?c.forward:!0,c0=(c,g)=>(Fr(g)&&c.isBlock(g)&&!g.innerHTML&&(g.innerHTML='<br data-mce-bogus="1" />'),g),FE=(c,g)=>{const $=Xt.from(kM(c.getRoot(),g.start)),et=Xt.from(kM(c.getRoot(),g.end));return js($,et,(rt,ut)=>{const pt=c.createRng();return pt.setStart(rt.container(),rt.offset()),pt.setEnd(ut.container(),ut.offset()),{range:pt,forward:HT(g)}})},zE=(c,g)=>{var $;const rt=(($=c.ownerDocument)!==null&&$!==void 0?$:document).createTextNode(Am);c.appendChild(rt),g.setStart(rt,0),g.setEnd(rt,0)},Cw=c=>!c.hasChildNodes(),zR=(c,g)=>Ky(c).fold(Dn,$=>(g.setStart($.container(),$.offset()),g.setEnd($.container(),$.offset()),!0)),UT=(c,g,$)=>Cw(g)&&z2(c,g)?(zE(g,$),!0):!1,BR=(c,g,$,et)=>{const rt=$[g?"start":"end"],ut=c.getRoot();if(rt){let pt=ut,xt=rt[0];for(let Et=rt.length-1;pt&&Et>=1;Et--){const Ft=pt.childNodes;if(UT(ut,pt,et))return!0;if(rt[Et]>Ft.length-1)return UT(ut,pt,et)?!0:zR(pt,et);pt=Ft[rt[Et]]}pr(pt)&&(xt=Math.min(rt[0],pt.data.length)),Fr(pt)&&(xt=Math.min(rt[0],pt.childNodes.length)),g?et.setStart(pt,xt):et.setEnd(pt,xt)}return!0},VT=c=>pr(c)&&c.data.length>0,$R=(c,g,$)=>{const et=c.get($.id+"_"+g),rt=et==null?void 0:et.parentNode,ut=$.keep;if(et&&rt){let pt,xt;if(g==="start"?ut?et.hasChildNodes()?(pt=et.firstChild,xt=1):VT(et.nextSibling)?(pt=et.nextSibling,xt=0):VT(et.previousSibling)?(pt=et.previousSibling,xt=et.previousSibling.data.length):(pt=rt,xt=c.nodeIndex(et)+1):(pt=rt,xt=c.nodeIndex(et)):ut?et.hasChildNodes()?(pt=et.firstChild,xt=1):VT(et.previousSibling)?(pt=et.previousSibling,xt=et.previousSibling.data.length):(pt=rt,xt=c.nodeIndex(et)):(pt=rt,xt=c.nodeIndex(et)),!ut){const Et=et.previousSibling,Ft=et.nextSibling;dr.each(dr.grep(et.childNodes),Kt=>{pr(Kt)&&(Kt.data=Kt.data.replace(/\uFEFF/g,""))});let Vt;for(;Vt=c.get($.id+"_"+g);)c.remove(Vt,!0);if(pr(Ft)&&pr(Et)&&!Xr.browser.isOpera()){const Kt=Et.data.length;Et.appendData(Ft.data),c.remove(Ft),pt=Et,xt=Kt}}return Xt.some(Uo(pt,xt))}else return Xt.none()},rS=(c,g)=>{const $=c.createRng();return BR(c,!0,g,$)&&BR(c,!1,g,$)?Xt.some({range:$,forward:HT(g)}):Xt.none()},xx=(c,g)=>{const $=$R(c,"start",g),et=$R(c,"end",g);return js($,et.or($),(rt,ut)=>{const pt=c.createRng();return pt.setStart(c0(c,rt.container()),rt.offset()),pt.setEnd(c0(c,ut.container()),ut.offset()),{range:pt,forward:HT(g)}})},BE=(c,g)=>Xt.from(c.select(g.name)[g.index]).map($=>{const et=c.createRng();return et.selectNode($),{range:et,forward:!0}}),B2=(c,g)=>{const $=c.dom;if(g){if(l8(g))return rS($,g);if(xP(g))return FE($,g);if(a8(g))return xx($,g);if(FR(g))return BE($,g);if(fB(g))return Xt.some({range:g.rng,forward:HT(g)})}return Xt.none()},wx=(c,g,$)=>PL(c,g,$),wP=(c,g)=>{B2(c,g).each(({range:$,forward:et})=>{c.setRng($,et)})},My=c=>Fr(c)&&c.tagName==="SPAN"&&c.getAttribute("data-mce-type")==="bookmark",kw=(c=>g=>c===g)(gm),$2=c=>c!==""&&` \f
\r	\v`.indexOf(c)!==-1,WT=c=>!$2(c)&&!kw(c)&&!bC(c),qT=c=>{const g=[];if(c)for(let $=0;$<c.rangeCount;$++)g.push(c.getRangeAt($));return g},c8=c=>ro(c,g=>{const $=gE(g);return $?[eo.fromDom($)]:[]}),u8=c=>qT(c).length>1,CP=c=>Bn(c8(c),fE),kP=c=>_0(c,"td[data-mce-selected],th[data-mce-selected]"),G2=(c,g)=>{const $=kP(g);return $.length>0?$:CP(c)},sS=c=>G2(qT(c.selection.getSel()),eo.fromDom(c.getBody())),$E=(c,g)=>Hp(c,"table",g),d8=c=>{const g=c.startContainer,$=c.startOffset;return pr(g)?$===0?Xt.some(eo.fromDom(g)):Xt.none():Xt.from(g.childNodes[$]).map(eo.fromDom)},SP=c=>{const g=c.endContainer,$=c.endOffset;return pr(g)?$===g.data.length?Xt.some(eo.fromDom(g)):Xt.none():Xt.from(g.childNodes[$-1]).map(eo.fromDom)},GE=c=>e0(c).fold(cn([c]),g=>[c].concat(GE(g))),ZT=c=>I1(c).fold(cn([c]),g=>En(g)==="br"?cv(g).map($=>[c].concat(ZT($))).getOr([]):[c].concat(ZT(g))),jR=(c,g)=>js(d8(g),SP(g),($,et)=>{const rt=Qn(GE(c),Tn(ba,$)),ut=Qn(ZT(c),Tn(ba,et));return rt.isSome()&&ut.isSome()}).getOr(!1),EP=(c,g,$,et)=>{const rt=$,ut=new pm($,rt),pt=Zs(c.schema.getMoveCaretBeforeOnEnterElements(),(Et,Ft)=>!yn(["td","th","table"],Ft.toLowerCase()));let xt=$;do{if(pr(xt)&&dr.trim(xt.data).length!==0){et?g.setStart(xt,0):g.setEnd(xt,xt.data.length);return}if(pt[xt.nodeName]){et?g.setStartBefore(xt):xt.nodeName==="BR"?g.setEndBefore(xt):g.setEndAfter(xt);return}}while(xt=et?ut.next():ut.prev());rt.nodeName==="BODY"&&(et?g.setStart(rt,0):g.setEnd(rt,rt.childNodes.length))},KT=c=>{const g=c.selection.getSel();return ln(g)&&g.rangeCount>0},iS=(c,g)=>{const $=sS(c);$.length>0?sn($,et=>{const rt=et.dom,ut=c.dom.createRng();ut.setStartBefore(rt),ut.setEndAfter(rt),g(ut,!0)}):g(c.selection.getRng(),!1)},AP=(c,g,$)=>{const et=Q3(c,g);$(et),c.moveToBookmark(et)},j2=c=>so(c==null?void 0:c.nodeType),Zl=c=>Fr(c)&&!My(c)&&!Yy(c)&&!P1(c),Cx=(c,g)=>{if(Zl(g)&&!/^(TD|TH)$/.test(g.nodeName)){const $=c.getAttrib(g,"data-mce-selected"),et=parseInt($,10);return!isNaN(et)&&et>0}else return!1},Sw=(c,g,$)=>{const{selection:et,dom:rt}=c,ut=et.getNode(),pt=nu(ut);AP(et,!0,()=>{g()}),pt&&nu(ut)&&rt.isChildOf(ut,c.getBody())?c.selection.select(ut):$(et.getStart())&&YT(rt,et)},YT=(c,g)=>{var $,et;const rt=g.getRng(),{startContainer:ut,startOffset:pt}=rt,xt=g.getNode();if(!Cx(c,xt)&&Fr(ut)){const Et=ut.childNodes,Ft=c.getRoot();let Vt;if(pt<Et.length){const Kt=Et[pt];Vt=new pm(Kt,($=c.getParent(Kt,c.isBlock))!==null&&$!==void 0?$:Ft)}else{const Kt=Et[Et.length-1];Vt=new pm(Kt,(et=c.getParent(Kt,c.isBlock))!==null&&et!==void 0?et:Ft),Vt.next(!0)}for(let Kt=Vt.current();Kt;Kt=Vt.next()){if(c.getContentEditable(Kt)==="false")return;if(pr(Kt)&&!HE(Kt)){rt.setStart(Kt,0),g.setRng(rt);return}}}},HR=(c,g,$)=>{if(c){const et=g?"nextSibling":"previousSibling";for(c=c[et];c;c=c[et])if(Fr(c)||!HE(c))return c}},jE=(c,g)=>!!c.getTextBlockElements()[g.nodeName.toLowerCase()]||O1(c,g),H2=(c,g,$)=>c.schema.isValidChild(g,$),HE=(c,g=!1)=>{if(ln(c)&&pr(c)){const $=g?c.data.replace(/ /g,""):c.data;return py($)}else return!1},XT=c=>ln(c)&&pr(c)&&c.length===0,TP=(c,g)=>{const $="[data-mce-cef-wrappable]",et=HM(c),rt=Rl(et)?$:`${$},${et}`;return D0(eo.fromDom(g),rt)},f8=(c,g)=>{const $=c.dom;return Zl(g)&&$.getContentEditable(g)==="false"&&TP(c,g)&&$.select('[contenteditable="true"]',g).length===0},U2=(c,g)=>Wt(c)?c(g):(ln(g)&&(c=c.replace(/%(\w+)/g,($,et)=>g[et]||$)),c),JT=(c,g)=>(c=c||"",g=g||"",c=""+(c.nodeName||c),g=""+(g.nodeName||g),c.toLowerCase()===g.toLowerCase()),Ew=(c,g)=>{if(Mn(c))return null;{let $=String(c);return(g==="color"||g==="backgroundColor")&&($=aE($)),g==="fontWeight"&&c===700&&($="bold"),g==="fontFamily"&&($=$.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),$}},UR=(c,g,$)=>{const et=c.getStyle(g,$);return Ew(et,$)},VR=(c,g)=>{let $;return c.getParent(g,et=>Fr(et)?($=c.getStyle(et,"text-decoration"),!!$&&$!=="none"):!1),$},V2=(c,g,$)=>c.getParents(g,$,c.getRoot()),WR=(c,g,$)=>{const et=c.formatter.get(g);return ln(et)&&Cn(et,$)},IP=(c,g)=>WR(c,g,et=>{const rt=ut=>Wt(ut)||ut.length>1&&ut.charAt(0)==="%";return Cn(["styles","attributes"],ut=>$a(et,ut).exists(pt=>{const xt=qt(pt)?pt:uu(pt);return Cn(xt,rt)}))}),RP=(c,g,$)=>{const et=["inline","block","selector","attributes","styles","classes"],rt=ut=>Zs(ut,(pt,xt)=>Cn(et,Et=>Et===xt));return WR(c,g,ut=>{const pt=rt(ut);return WR(c,$,xt=>{const Et=rt(xt);return mo(pt,Et)})})},z_=c=>yl(c,"block"),MP=c=>z_(c)&&c.wrapper===!0,QT=c=>z_(c)&&c.wrapper!==!0,wv=c=>yl(c,"selector"),jm=c=>yl(c,"inline"),h8=c=>wv(c)&&jm(c)&&gu($a(c,"mixed"),!0),U1=c=>wv(c)&&c.expand!==!1&&!jm(c),p8=c=>{const g=[];let $=c;for(;$;){if(pr($)&&$.data!==Am||$.childNodes.length>1)return[];Fr($)&&g.push($),$=$.firstChild}return g},PP=c=>p8(c).length>0,UE=c=>Yy(c.dom)&&PP(c.dom),aS=My,OP=V2,DP=HE,hB=jE,pB=c=>tu(c)&&c.getAttribute("data-mce-bogus")&&!c.nextSibling,NP=(c,g)=>{let $=g;for(;$;){if(Fr($)&&c.getContentEditable($))return c.getContentEditable($)==="false"?$:g;$=$.parentNode}return g},$r=(c,g,$,et)=>{const rt=g.data;if(c){for(let ut=$;ut>0;ut--)if(et(rt.charAt(ut-1)))return ut}else for(let ut=$;ut<rt.length;ut++)if(et(rt.charAt(ut)))return ut;return-1},Hm=(c,g,$)=>$r(c,g,$,et=>kw(et)||$2(et)),eI=(c,g,$)=>$r(c,g,$,WT),Um=(c,g,$,et,rt,ut)=>{let pt;const xt=c.getParent($,c.isBlock)||g,Et=(Vt,Kt,en)=>{const mn=b2(c),Sn=rt?mn.backwards:mn.forwards;return Xt.from(Sn(Vt,Kt,(bn,Pn)=>aS(bn.parentNode)?-1:(pt=bn,en(rt,bn,Pn)),xt))};return Et($,et,Hm).bind(Vt=>ut?Et(Vt.container,Vt.offset+(rt?-1:0),eI):Xt.some(Vt)).orThunk(()=>pt?Xt.some({container:pt,offset:rt?0:pt.length}):Xt.none())},Cv=(c,g,$,et,rt)=>{const ut=et[rt];pr(et)&&Rl(et.data)&&ut&&(et=ut);const pt=OP(c,et);for(let xt=0;xt<pt.length;xt++)for(let Et=0;Et<g.length;Et++){const Ft=g[Et];if(!(ln(Ft.collapsed)&&Ft.collapsed!==$.collapsed)&&wv(Ft)&&c.is(pt[xt],Ft.selector))return pt[xt]}return et},qR=(c,g,$,et)=>{var rt;let ut=$;const pt=c.getRoot(),xt=g[0];if(z_(xt)&&(ut=xt.wrapper?null:c.getParent($,xt.block,pt)),!ut){const Et=(rt=c.getParent($,"LI,TD,TH,SUMMARY"))!==null&&rt!==void 0?rt:pt;ut=c.getParent(pr($)?$.parentNode:$,Ft=>Ft!==pt&&hB(c.schema,Ft),Et)}if(ut&&z_(xt)&&xt.wrapper&&(ut=OP(c,ut,"ul,ol").reverse()[0]||ut),!ut)for(ut=$;ut&&ut[et]&&!c.isBlock(ut[et])&&(ut=ut[et],!JT(ut,"br")););return ut||$},VE=(c,g,$,et)=>{const rt=$.parentNode;return ln($[et])?!1:rt===g||Mn(rt)||c.isBlock(rt)?!0:VE(c,g,rt,et)},lS=(c,g,$,et,rt)=>{let ut=$;const pt=rt?"previousSibling":"nextSibling",xt=c.getRoot();if(pr($)&&!DP($)&&(rt?et>0:et<$.data.length))return $;for(;ut;){if(!g[0].block_expand&&c.isBlock(ut))return ut;for(let Et=ut[pt];Et;Et=Et[pt]){const Ft=pr(Et)&&!VE(c,xt,Et,pt);if(!aS(Et)&&!pB(Et)&&!DP(Et,Ft))return ut}if(ut===xt||ut.parentNode===xt){$=ut;break}ut=ut.parentNode}return $},LP=c=>aS(c.parentNode)||aS(c),Aw=(c,g,$,et=!1)=>{let{startContainer:rt,startOffset:ut,endContainer:pt,endOffset:xt}=g;const Et=$[0];return Fr(rt)&&rt.hasChildNodes()&&(rt=bx(rt,ut),pr(rt)&&(ut=0)),Fr(pt)&&pt.hasChildNodes()&&(pt=bx(pt,g.collapsed?xt:xt-1),pr(pt)&&(xt=pt.data.length)),rt=NP(c,rt),pt=NP(c,pt),LP(rt)&&(rt=aS(rt)?rt:rt.parentNode,g.collapsed?rt=rt.previousSibling||rt:rt=rt.nextSibling||rt,pr(rt)&&(ut=g.collapsed?rt.length:0)),LP(pt)&&(pt=aS(pt)?pt:pt.parentNode,g.collapsed?pt=pt.nextSibling||pt:pt=pt.previousSibling||pt,pr(pt)&&(xt=g.collapsed?0:pt.length)),g.collapsed&&(Um(c,c.getRoot(),rt,ut,!0,et).each(({container:Kt,offset:en})=>{rt=Kt,ut=en}),Um(c,c.getRoot(),pt,xt,!1,et).each(({container:Kt,offset:en})=>{pt=Kt,xt=en})),(jm(Et)||Et.block_expand)&&((!jm(Et)||!pr(rt)||ut===0)&&(rt=lS(c,$,rt,ut,!0)),(!jm(Et)||!pr(pt)||xt===pt.data.length)&&(pt=lS(c,$,pt,xt,!1))),U1(Et)&&(rt=Cv(c,$,g,rt,"previousSibling"),pt=Cv(c,$,g,pt,"nextSibling")),(z_(Et)||wv(Et))&&(rt=qR(c,$,rt,"previousSibling"),pt=qR(c,$,pt,"nextSibling"),z_(Et)&&(c.isBlock(rt)||(rt=lS(c,$,rt,ut,!0),pr(rt)&&(ut=0)),c.isBlock(pt)||(pt=lS(c,$,pt,xt,!1),pr(pt)&&(xt=pt.data.length)))),Fr(rt)&&rt.parentNode&&(ut=c.nodeIndex(rt),rt=rt.parentNode),Fr(pt)&&pt.parentNode&&(xt=c.nodeIndex(pt)+1,pt=pt.parentNode),{startContainer:rt,startOffset:ut,endContainer:pt,endOffset:xt}},cS=(c,g,$)=>{var et;const rt=g.startOffset,ut=bx(g.startContainer,rt),pt=g.endOffset,xt=bx(g.endContainer,pt-1),Et=Pn=>{const ao=Pn[0];pr(ao)&&ao===ut&&rt>=ao.data.length&&Pn.splice(0,1);const po=Pn[Pn.length-1];return pt===0&&Pn.length>0&&po===xt&&pr(po)&&Pn.splice(Pn.length-1,1),Pn},Ft=(Pn,ao,po)=>{const wo=[];for(;Pn&&Pn!==po;Pn=Pn[ao])wo.push(Pn);return wo},Vt=(Pn,ao)=>c.getParent(Pn,po=>po.parentNode===ao,ao),Kt=(Pn,ao,po)=>{const wo=po?"nextSibling":"previousSibling";for(let Io=Pn,sr=Io.parentNode;Io&&Io!==ao;Io=sr){sr=Io.parentNode;const br=Ft(Io===Pn?Io:Io[wo],wo);br.length&&(po||br.reverse(),$(Et(br)))}};if(ut===xt)return $(Et([ut]));const en=(et=c.findCommonAncestor(ut,xt))!==null&&et!==void 0?et:c.getRoot();if(c.isChildOf(ut,xt))return Kt(ut,en,!0);if(c.isChildOf(xt,ut))return Kt(xt,en);const mn=Vt(ut,en)||ut,Sn=Vt(xt,en)||xt;Kt(ut,mn,!0);const bn=Ft(mn===ut?mn:mn.nextSibling,"nextSibling",Sn===xt?Sn.nextSibling:Sn);bn.length&&$(Et(bn)),Kt(xt,Sn)},g8=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],m8=c=>vu(c)&&$C(c)===Am,y8=(c,g,$,et)=>zm(g).fold(()=>"skipping",rt=>et==="br"||m8(g)?"valid":cT(g)?"existing":Yy(g.dom)?"caret":Cn(g8,ut=>D0(g,ut))?"valid-block":!H2(c,$,et)||!H2(c,En(rt),$)?"invalid-child":"valid"),FP=(c,g)=>{const $=Aw(c.dom,g,[{inline:"span"}]);g.setStart($.startContainer,$.startOffset),g.setEnd($.endContainer,$.endOffset),c.selection.setRng(g)},W2=(c,g,$,et,rt,ut)=>{const{uid:pt=g,...xt}=$;Gy(c,NC()),up(c,`${M_()}`,pt),up(c,`${iw()}`,et);const{attributes:Et={},classes:Ft=[]}=rt(pt,xt);if(Pp(c,Et),iB(c,Ft),ut){Ft.length>0&&up(c,`${aw()}`,Ft.join(","));const Vt=Yr(Et);Vt.length>0&&up(c,`${px()}`,Vt.join(","))}},uS=c=>{S1(c,NC()),ju(c,`${M_()}`),ju(c,`${iw()}`),ju(c,`${LC()}`);const g=Ku(c,`${px()}`).map(et=>et.split(",")).getOr([]),$=Ku(c,`${aw()}`).map(et=>et.split(",")).getOr([]);sn(g,et=>ju(c,et)),aB(c,$),ju(c,`${aw()}`),ju(c,`${px()}`)},q2=(c,g,$,et,rt)=>{const ut=eo.fromTag("span",c);return W2(ut,g,$,et,rt,!1),ut},tI=(c,g,$,et,rt,ut)=>{const pt=[],xt=q2(c.getDoc(),$,ut,et,rt),Et=Em(),Ft=()=>{Et.clear()},Vt=()=>Et.get().getOrThunk(()=>{const Sn=Yv(xt);return pt.push(Sn),Et.set(Sn),Sn}),Kt=Sn=>{sn(Sn,en)},en=Sn=>{switch(y8(c,Sn,"span",En(Sn))){case"invalid-child":{Ft();const Pn=tm(Sn);Kt(Pn),Ft();break}case"valid-block":{Ft(),W2(Sn,$,ut,et,rt,!0);break}case"valid":{const Pn=Vt();wy(Sn,Pn);break}}},mn=Sn=>{const bn=Nn(Sn,eo.fromDom);Kt(bn)};return cS(c.dom,g,Sn=>{Ft(),mn(Sn)}),pt},Xy=(c,g,$,et)=>{c.undoManager.transact(()=>{const rt=c.selection,ut=rt.getRng(),pt=sS(c).length>0,xt=zC("mce-annotation");if(ut.collapsed&&!pt&&FP(c,ut),rt.getRng().collapsed&&!pt){const Et=q2(c.getDoc(),xt,et,g,$.decorate);Uv(Et,gm),rt.getRng().insertNode(Et.dom),rt.select(Et.dom)}else AP(rt,!1,()=>{iS(c,Et=>{tI(c,Et,xt,g,$.decorate,et)})})})},V1=c=>{const g=uT();pL(c,g);const $=eM(c,g),et=dm("span"),rt=ut=>{sn(ut,pt=>{et(pt)?Cy(pt):uS(pt)})};return{register:(ut,pt)=>{g.register(ut,pt)},annotate:(ut,pt)=>{g.lookup(ut).each(xt=>{Xy(c,ut,xt,pt)})},annotationChanged:(ut,pt)=>{$.addListener(ut,pt)},remove:ut=>{cE(c,Xt.some(ut)).each(({elements:pt})=>{const xt=c.selection.getBookmark();rt(pt),c.selection.moveToBookmark(xt)})},removeAll:ut=>{const pt=c.selection.getBookmark();or(FC(c,ut),(xt,Et)=>{rt(xt)}),c.selection.moveToBookmark(pt)},getAll:ut=>{const pt=FC(c,ut);return Ds(pt,xt=>Nn(xt,Et=>Et.dom))}}},Z2=c=>({getBookmark:Tn(wx,c),moveToBookmark:Tn(wP,c)});Z2.isBookmarkNode=My;const dS=(c,g,$)=>$.collapsed?!1:Cn($.getClientRects(),et=>_L(et,c,g)),nI=(c,g)=>c.dispatch("PreProcess",g),oI=(c,g)=>c.dispatch("PostProcess",g),b8=c=>{c.dispatch("remove")},v8=c=>{c.dispatch("detach")},_8=(c,g)=>{c.dispatch("SwitchMode",{mode:g})},x8=(c,g,$,et,rt)=>{c.dispatch("ObjectResizeStart",{target:g,width:$,height:et,origin:rt})},zP=(c,g,$,et,rt)=>{c.dispatch("ObjectResized",{target:g,width:$,height:et,origin:rt})},BP=c=>{c.dispatch("PreInit")},ZR=c=>{c.dispatch("PostRender")},rI=c=>{c.dispatch("Init")},S0=(c,g)=>{c.dispatch("PlaceholderToggle",{state:g})},kv=(c,g,$)=>{c.dispatch(g,$)},Jy=(c,g,$,et)=>{c.dispatch("FormatApply",{format:g,node:$,vars:et})},WE=(c,g,$,et)=>{c.dispatch("FormatRemove",{format:g,node:$,vars:et})},KR=(c,g)=>c.dispatch("BeforeSetContent",g),$P=(c,g)=>c.dispatch("SetContent",g),sI=(c,g)=>c.dispatch("BeforeGetContent",g),w8=(c,g)=>c.dispatch("GetContent",g),iI=(c,g)=>{c.dispatch("AutocompleterStart",g)},C8=(c,g)=>{c.dispatch("AutocompleterUpdate",g)},aI=(c,g)=>{c.dispatch("AutocompleterUpdateActiveRange",g)},k8=c=>{c.dispatch("AutocompleterEnd")},S8=(c,g,$)=>c.dispatch("PastePreProcess",{content:g,internal:$}),GP=(c,g,$)=>c.dispatch("PastePostProcess",{node:g,internal:$}),lI=(c,g)=>c.dispatch("PastePlainTextToggle",{state:g}),zu=(c,g)=>c.dispatch("EditableRootStateChange",{state:g}),Gr={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:c=>c.shiftKey||c.ctrlKey||c.altKey||Gr.metaKeyPressed(c),metaKeyPressed:c=>Xr.os.isMacOS()||Xr.os.isiOS()?c.metaKey:c.ctrlKey&&!c.altKey},W1="data-mce-selected",jP="table,img,figure.image,hr,video,span.mce-preview-object,details",YR=Math.abs,fS=Math.round,cI={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},qE=c=>c.type==="longpress"||c.type.indexOf("touch")===0,XR=(c,g)=>{const $=g.dom,et=g.getDoc(),rt=document,ut=g.getBody();let pt,xt,Et,Ft,Vt,Kt,en,mn,Sn,bn,Pn,ao,po,wo,Io,sr,br;const jr=Or=>ln(Or)&&(n2(Or)||$.is(Or,"figure.image")),Ko=Or=>o0(Or)||$.hasClass(Or,"mce-preview-object"),Fo=(Or,Il)=>{if(qE(Or)){const Fl=Or.touches[0];return jr(Or.target)&&!dS(Fl.clientX,Fl.clientY,Il)}else return jr(Or.target)&&!dS(Or.clientX,Or.clientY,Il)},lr=Or=>{const Il=Or.target;Fo(Or,g.selection.getRng())&&!Or.isDefaultPrevented()&&g.selection.select(Il)},Hr=Or=>$.hasClass(Or,"mce-preview-object")&&ln(Or.firstElementChild)?[Or,Or.firstElementChild]:$.is(Or,"figure.image")?[Or.querySelector("img")]:[Or],bs=Or=>{const Il=KC(g);return!Il||g.mode.isReadOnly()||Or.getAttribute("data-mce-resize")==="false"||Or===g.getBody()?!1:$.hasClass(Or,"mce-preview-object")&&ln(Or.firstElementChild)?D0(eo.fromDom(Or.firstElementChild),Il):D0(eo.fromDom(Or),Il)},Al=(Or,Il)=>{if(Ko(Il))return Or.create("img",{src:Xr.transparentSrc});if(fv(Il)){const Cm=As(Ft.name,"n")?wr:gs,$u=Il.cloneNode(!0);return Cm(Or.select("tr",$u)).each(I0=>{const nv=Or.select("td,th",I0);Or.setStyle(I0,"height",null),sn(nv,zx=>Or.setStyle(zx,"height",null))}),$u}else return Il.cloneNode(!0)},Tl=(Or,Il,Fl)=>{if(ln(Fl)){const Cm=Hr(Or);sn(Cm,$u=>{$u.style[Il]||!g.schema.isValid($u.nodeName.toLowerCase(),Il)?$.setStyle($u,Il,Fl):$.setAttrib($u,Il,""+Fl)})}},du=(Or,Il,Fl)=>{Tl(Or,"width",Il),Tl(Or,"height",Fl)},Au=Or=>{let Il,Fl,Cm,$u,I0;Il=Or.screenX-Kt,Fl=Or.screenY-en,wo=Il*Ft[2]+bn,Io=Fl*Ft[3]+Pn,wo=wo<5?5:wo,Io=Io<5?5:Io,(jr(pt)||Ko(pt))&&P2(g)!==!1?Cm=!Gr.modifierPressed(Or):Cm=Gr.modifierPressed(Or),Cm&&(YR(Il)>YR(Fl)?(Io=fS(wo*ao),wo=fS(Io/ao)):(wo=fS(Io/ao),Io=fS(wo*ao))),du(xt,wo,Io),$u=Ft.startPos.x+Il,I0=Ft.startPos.y+Fl,$u=$u>0?$u:0,I0=I0>0?I0:0,$.setStyles(Et,{left:$u,top:I0,display:"block"}),Et.innerHTML=wo+" &times; "+Io,Ft[2]<0&&xt.clientWidth<=wo&&$.setStyle(xt,"left",mn+(bn-wo)),Ft[3]<0&&xt.clientHeight<=Io&&$.setStyle(xt,"top",Sn+(Pn-Io)),Il=ut.scrollWidth-sr,Fl=ut.scrollHeight-br,Il+Fl!==0&&$.setStyles(Et,{left:$u-Il,top:I0-Fl}),po||(x8(g,pt,bn,Pn,"corner-"+Ft.name),po=!0)},Wp=()=>{const Or=po;po=!1,Or&&(Tl(pt,"width",wo),Tl(pt,"height",Io)),$.unbind(et,"mousemove",Au),$.unbind(et,"mouseup",Wp),rt!==et&&($.unbind(rt,"mousemove",Au),$.unbind(rt,"mouseup",Wp)),$.remove(xt),$.remove(Et),$.remove(Vt),T0(pt),Or&&(zP(g,pt,wo,Io,"corner-"+Ft.name),$.setAttrib(pt,"style",$.getAttrib(pt,"style"))),g.nodeChanged()},T0=Or=>{zr();const Il=$.getPos(Or,ut),Fl=Il.x,Cm=Il.y,$u=Or.getBoundingClientRect(),I0=$u.width||$u.right-$u.left,nv=$u.height||$u.bottom-$u.top;pt!==Or&&(Tr(),pt=Or,wo=Io=0);const zx=g.dispatch("ObjectSelected",{target:Or});bs(Or)&&!zx.isDefaultPrevented()?or(cI,(ay,f1)=>{const a_=ov=>{const hs=Hr(pt)[0];Kt=ov.screenX,en=ov.screenY,bn=hs.clientWidth,Pn=hs.clientHeight,ao=Pn/bn,Ft=ay,Ft.name=f1,Ft.startPos={x:I0*ay[0]+Fl,y:nv*ay[1]+Cm},sr=ut.scrollWidth,br=ut.scrollHeight,Vt=$.add(ut,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),$.setStyles(Vt,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),xt=Al($,pt),$.addClass(xt,"mce-clonedresizable"),$.setAttrib(xt,"data-mce-bogus","all"),xt.contentEditable="false",$.setStyles(xt,{left:Fl,top:Cm,margin:0}),du(xt,I0,nv),xt.removeAttribute(W1),ut.appendChild(xt),$.bind(et,"mousemove",Au),$.bind(et,"mouseup",Wp),rt!==et&&($.bind(rt,"mousemove",Au),$.bind(rt,"mouseup",Wp)),Et=$.add(ut,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},bn+" &times; "+Pn)};let H0=$.get("mceResizeHandle"+f1);H0&&$.remove(H0),H0=$.add(ut,"div",{id:"mceResizeHandle"+f1,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+f1+"-resize; margin:0; padding:0"}),$.bind(H0,"mousedown",ov=>{ov.stopImmediatePropagation(),ov.preventDefault(),a_(ov)}),ay.elm=H0,$.setStyles(H0,{left:I0*ay[0]+Fl-H0.offsetWidth/2,top:nv*ay[1]+Cm-H0.offsetHeight/2})}):Tr(!1)},Xp=DC(T0,0),Tr=(Or=!0)=>{Xp.cancel(),zr(),pt&&Or&&pt.removeAttribute(W1),or(cI,(Il,Fl)=>{const Cm=$.get("mceResizeHandle"+Fl);Cm&&($.unbind(Cm),$.remove(Cm))})},ps=(Or,Il)=>$.isChildOf(Or,Il),ou=Or=>{if(po||g.removed||g.composing)return;const Il=Or.type==="mousedown"?Or.target:c.getNode(),Fl=uv(eo.fromDom(Il),jP).map($u=>$u.dom).filter($u=>$.isEditable($u.parentElement)||$u.nodeName==="IMG"&&$.isEditable($u)).getOrUndefined(),Cm=ln(Fl)?$.getAttrib(Fl,W1,"1"):"1";if(sn($.select(`img[${W1}],hr[${W1}]`),$u=>{$u.removeAttribute(W1)}),ln(Fl)&&ps(Fl,ut)&&g.hasFocus()){Ms();const $u=c.getStart(!0);if(ps($u,Fl)&&ps(c.getEnd(!0),Fl)){$.setAttrib(Fl,W1,Cm),Xp.throttle(Fl);return}}Tr()},zr=()=>{or(cI,Or=>{Or.elm&&($.unbind(Or.elm),delete Or.elm)})},Ms=()=>{try{g.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return g.on("init",()=>{Ms(),g.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",ou),g.on("keyup compositionend",Or=>{pt&&pt.nodeName==="TABLE"&&ou(Or)}),g.on("hide blur",Tr),g.on("contextmenu longpress",lr,!0)}),g.on("remove",zr),{isResizable:bs,showResizeRect:T0,hideResizeRect:Tr,updateResizeRect:ou,destroy:()=>{Xp.cancel(),pt=xt=Vt=null}}},HP=(c,g)=>{g.fold($=>{c.setStartBefore($.dom)},($,et)=>{c.setStart($.dom,et)},$=>{c.setStartAfter($.dom)})},JR=(c,g)=>{g.fold($=>{c.setEndBefore($.dom)},($,et)=>{c.setEnd($.dom,et)},$=>{c.setEndAfter($.dom)})},UP=(c,g,$)=>{const et=c.document.createRange();return HP(et,g),JR(et,$),et},ZE=(c,g,$,et,rt)=>{const ut=c.document.createRange();return ut.setStart(g.dom,$),ut.setEnd(et.dom,rt),ut},K2=vv.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),uI=(c,g,$)=>g(eo.fromDom($.startContainer),$.startOffset,eo.fromDom($.endContainer),$.endOffset),E8=(c,g)=>g.match({domRange:$=>({ltr:cn($),rtl:Xt.none}),relative:($,et)=>({ltr:Ho(()=>UP(c,$,et)),rtl:Ho(()=>Xt.some(UP(c,et,$)))}),exact:($,et,rt,ut)=>({ltr:Ho(()=>ZE(c,$,et,rt,ut)),rtl:Ho(()=>Xt.some(ZE(c,rt,ut,$,et)))})}),A8=(c,g)=>{const $=g.ltr();return $.collapsed?g.rtl().filter(rt=>rt.collapsed===!1).map(rt=>K2.rtl(eo.fromDom(rt.endContainer),rt.endOffset,eo.fromDom(rt.startContainer),rt.startOffset)).getOrThunk(()=>uI(c,K2.ltr,$)):uI(c,K2.ltr,$)},T8=(c,g)=>{const $=E8(c,g);return A8(c,$)};K2.ltr,K2.rtl;const g0={create:(c,g,$,et)=>({start:c,soffset:g,finish:$,foffset:et})},hS=(c,g,$)=>{var et;return Xt.from((et=c.caretPositionFromPoint)===null||et===void 0?void 0:et.call(c,g,$)).bind(rt=>{if(rt.offsetNode===null)return Xt.none();const ut=c.createRange();return ut.setStart(rt.offsetNode,rt.offset),ut.collapse(),Xt.some(ut)})},gB=(c,g,$)=>{var et;return Xt.from((et=c.caretRangeFromPoint)===null||et===void 0?void 0:et.call(c,g,$))},I8=(c,g,$)=>c.caretPositionFromPoint?hS(c,g,$):c.caretRangeFromPoint?gB(c,g,$):Xt.none(),R8=(c,g,$)=>{const et=c.document;return I8(et,g,$).map(rt=>g0.create(eo.fromDom(rt.startContainer),rt.startOffset,eo.fromDom(rt.endContainer),rt.endOffset))},$l=vv.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),M8=(c,g,$,et)=>c.fold(g,$,et),P8=c=>c.fold(fo,fo,fo),QR=$l.before,mB=$l.on,yB=$l.after,Tw={before:QR,on:mB,after:yB,cata:M8,getStart:P8},KE=vv.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),O8=c=>KE.exact(c.start,c.soffset,c.finish,c.foffset),D8=c=>c.match({domRange:g=>eo.fromDom(g.startContainer),relative:(g,$)=>Tw.getStart(g),exact:(g,$,et,rt)=>g}),e5=KE.domRange,dI=KE.relative,fI=KE.exact,bB=c=>{const g=D8(c);return g_(g)},N8=g0.create,YE={domRange:e5,relative:dI,exact:fI,exactFromRange:O8,getWin:bB,range:N8},t5=(c,g)=>{const $=En(c);return $==="input"?Tw.after(c):yn(["br","img"],$)?g===0?Tw.before(c):Tw.after(c):Tw.on(c,g)},L8=(c,g)=>{const $=c.fold(Tw.before,t5,Tw.after),et=g.fold(Tw.before,t5,Tw.after);return YE.relative($,et)},VP=(c,g,$,et)=>{const rt=t5(c,g),ut=t5($,et);return YE.relative(rt,ut)},Os=c=>c.match({domRange:g=>{const $=eo.fromDom(g.startContainer),et=eo.fromDom(g.endContainer);return VP($,g.startOffset,et,g.endOffset)},relative:L8,exact:VP}),hI=(c,g)=>{const et=document.createDocumentFragment();return sn(c,rt=>{et.appendChild(rt.dom)}),eo.fromDom(et)},at=c=>{const g=YE.getWin(c).dom,$=(rt,ut,pt,xt)=>ZE(g,rt,ut,pt,xt),et=Os(c);return T8(g,et).match({ltr:$,rtl:$})},ht=(c,g,$)=>R8(c,g,$),_t=(c,g,$)=>{const et=g_(eo.fromDom($));return ht(et.dom,c,g).map(rt=>{const ut=$.createRange();return ut.setStart(rt.start.dom,rt.soffset),ut.setEnd(rt.finish.dom,rt.foffset),ut}).getOrUndefined()},kt=(c,g)=>ln(c)&&ln(g)&&c.startContainer===g.startContainer&&c.startOffset===g.startOffset&&c.endContainer===g.endContainer&&c.endOffset===g.endOffset,zt=(c,g,$)=>{let et=c;for(;et&&et!==g;){if($(et))return et;et=et.parentNode}return null},Ht=(c,g,$)=>zt(c,g,$)!==null,tn=(c,g,$)=>Ht(c,g,et=>et.nodeName===$),gn=(c,g)=>yv(c)&&!Ht(c,g,Yy),An=(c,g,$)=>{const et=g.parentNode;if(et){const rt=new pm(g,c.getParent(et,c.isBlock)||c.getRoot());let ut;for(;ut=rt[$?"prev":"next"]();)if(tu(ut))return!0}return!1},no=(c,g)=>{var $;return(($=c.previousSibling)===null||$===void 0?void 0:$.nodeName)===g},Ro=(c,g)=>{let $=g;for(;$&&$!==c;){if(nu($))return!0;$=$.parentNode}return!1},gr=(c,g,$,et,rt)=>{const ut=c.getRoot(),pt=c.schema.getNonEmptyElements(),xt=rt.parentNode;let Et,Ft;if(!xt)return Xt.none();const Vt=c.getParent(xt,c.isBlock)||ut;if(et&&tu(rt)&&g&&c.isEmpty(Vt))return Xt.some(Uo(xt,c.nodeIndex(rt)));const Kt=new pm(rt,Vt);for(;Ft=Kt[et?"prev":"next"]();){if(c.getContentEditableParent(Ft)==="false"||gn(Ft,ut))return Xt.none();if(pr(Ft)&&Ft.data.length>0)return tn(Ft,ut,"A")?Xt.none():Xt.some(Uo(Ft,et?Ft.data.length:0));if(c.isBlock(Ft)||pt[Ft.nodeName.toLowerCase()])return Xt.none();Et=Ft}return Ip(Et)?Xt.none():$&&Et?Xt.some(Uo(Et,0)):Xt.none()},Nr=(c,g,$,et)=>{const rt=c.getRoot();let ut,pt=!1,xt=$?et.startContainer:et.endContainer,Et=$?et.startOffset:et.endOffset;const Ft=Fr(xt)&&Et===xt.childNodes.length,Vt=c.schema.getNonEmptyElements();let Kt=$;if(yv(xt))return Xt.none();if(Fr(xt)&&Et>xt.childNodes.length-1&&(Kt=!1),Xx(xt)&&(xt=rt,Et=0),xt===rt){if(Kt&&(ut=xt.childNodes[Et>0?Et-1:0],ut&&(yv(ut)||Vt[ut.nodeName]||fv(ut))))return Xt.none();if(xt.hasChildNodes()){if(Et=Math.min(!Kt&&Et>0?Et-1:Et,xt.childNodes.length-1),xt=xt.childNodes[Et],Et=pr(xt)&&Ft?xt.data.length:0,!g&&xt===rt.lastChild&&fv(xt)||Ro(rt,xt)||yv(xt)||tE(xt))return Xt.none();if(xt.hasChildNodes()&&!fv(xt)){ut=xt;const en=new pm(xt,rt);do{if(nu(ut)||yv(ut)){pt=!1;break}if(pr(ut)&&ut.data.length>0){Et=Kt?0:ut.data.length,xt=ut,pt=!0;break}if(Vt[ut.nodeName.toLowerCase()]&&!nm(ut)){Et=c.nodeIndex(ut),xt=ut.parentNode,Kt||Et++,pt=!0;break}}while(ut=Kt?en.next():en.prev())}}}return g&&(pr(xt)&&Et===0&&gr(c,Ft,g,!0,xt).each(en=>{xt=en.container(),Et=en.offset(),pt=!0}),Fr(xt)&&(ut=xt.childNodes[Et],ut||(ut=xt.childNodes[Et-1]),ut&&tu(ut)&&!no(ut,"A")&&!An(c,ut,!1)&&!An(c,ut,!0)&&gr(c,Ft,g,!0,ut).each(en=>{xt=en.container(),Et=en.offset(),pt=!0}))),Kt&&!g&&pr(xt)&&Et===xt.data.length&&gr(c,Ft,g,!1,xt).each(en=>{xt=en.container(),Et=en.offset(),pt=!0}),pt&&xt?Xt.some(Uo(xt,Et)):Xt.none()},Rr=(c,g)=>{const $=g.collapsed,et=g.cloneRange(),rt=Uo.fromRangeStart(g);return Nr(c,$,!0,et).each(ut=>{(!$||!Uo.isAbove(rt,ut))&&et.setStart(ut.container(),ut.offset())}),$||Nr(c,$,!1,et).each(ut=>{et.setEnd(ut.container(),ut.offset())}),$&&et.collapse(!0),kt(g,et)?Xt.none():Xt.some(et)},Cr=(c,g)=>c.splitText(g),ss=c=>{let g=c.startContainer,$=c.startOffset,et=c.endContainer,rt=c.endOffset;if(g===et&&pr(g)){if($>0&&$<g.data.length)if(et=Cr(g,$),g=et.previousSibling,rt>$){rt=rt-$;const ut=Cr(et,rt).previousSibling;g=et=ut,rt=ut.data.length,$=0}else rt=0}else if(pr(g)&&$>0&&$<g.data.length&&(g=Cr(g,$),$=0),pr(et)&&rt>0&&rt<et.data.length){const ut=Cr(et,rt).previousSibling;et=ut,rt=ut.data.length}return{startContainer:g,startOffset:$,endContainer:et,endOffset:rt}},cr=c=>({walk:(ut,pt)=>cS(c,ut,pt),split:ss,expand:(ut,pt={type:"word"})=>{if(pt.type==="word"){const xt=Aw(c,ut,[{inline:"span"}]),Et=c.createRng();return Et.setStart(xt.startContainer,xt.startOffset),Et.setEnd(xt.endContainer,xt.endOffset),Et}return ut},normalize:ut=>Rr(c,ut).fold(Dn,pt=>(ut.setStart(pt.startContainer,pt.startOffset),ut.setEnd(pt.endContainer,pt.endOffset),!0))});cr.compareRanges=kt,cr.getCaretRangeFromPoint=_t,cr.getSelectedNode=gE,cr.getNode=bx;const Er=((c,g)=>{const $=(xt,Et)=>{if(!so(Et)&&!Et.match(/^[0-9]+$/))throw new Error(c+".set accepts only positive integer values. Value was "+Et);const Ft=xt.dom;$v(Ft)&&(Ft.style[c]=Et+"px")},et=xt=>{const Et=g(xt);if(Et<=0||Et===null){const Ft=wp(xt,c);return parseFloat(Ft)||0}return Et},rt=et,ut=(xt,Et)=>Wn(Et,(Ft,Vt)=>{const Kt=wp(xt,Vt),en=Kt===void 0?0:parseInt(Kt,10);return isNaN(en)?Ft:Ft+en},0);return{set:$,get:et,getOuter:rt,aggregate:ut,max:(xt,Et,Ft)=>{const Vt=ut(xt,Ft);return Et>Vt?Et-Vt:0}}})("height",c=>{const g=c.dom;return R1(c)?g.getBoundingClientRect().height:g.offsetHeight}),$s=c=>Er.get(c),Gl=()=>eo.fromDom(document),Cu=(c,g)=>c.view(g).fold(cn([]),et=>{const rt=c.owner(et),ut=Cu(c,rt);return[et].concat(ut)}),Qu=(c,g)=>{const $=g.owner(c);return Cu(g,$)};var q1=Object.freeze({__proto__:null,view:c=>{var g;return(c.dom===document?Xt.none():Xt.from((g=c.dom.defaultView)===null||g===void 0?void 0:g.frameElement)).map(eo.fromDom)},owner:c=>zv(c)});const Y2=c=>{const g=Gl(),$=Hs(g),et=Qu(c,q1),rt=Ys(c),ut=Eo(et,(pt,xt)=>{const Et=Ys(xt);return{left:pt.left+Et.left,top:pt.top+Et.top}},{left:0,top:0});return jn(ut.left+rt.left+$.left,ut.top+rt.top+$.top)},B_=c=>En(c)==="textarea",Bu=(c,g)=>c.dispatch("ScrollIntoView",g).isDefaultPrevented(),oy=(c,g)=>{c.dispatch("AfterScrollIntoView",g)},ry=(c,g)=>{const $=tm(c);if($.length===0||B_(c))return{element:c,offset:g};if(g<$.length&&!B_($[g]))return{element:$[g],offset:0};{const et=$[$.length-1];return B_(et)?{element:c,offset:g}:En(et)==="img"?{element:et,offset:1}:vu(et)?{element:et,offset:$C(et).length}:{element:et,offset:tm(et).length}}},Sv=(c,g)=>{const $=ks(c),et=$s(c);return{element:c,bottom:$.top+et,height:et,pos:$,cleanup:g}},na=(c,g)=>{const $=ry(c,g),et=eo.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Am+"</span>");return Iu($.element,et),Sv(et,()=>_u(et))},yy=c=>Sv(eo.fromDom(c),hn),wm=(c,g,$,et)=>{E0(c,(rt,ut)=>kx(c,g,$,et),$)},pI=(c,g,$,et,rt)=>{const ut={elm:et.element.dom,alignToTop:rt};if(Bu(c,ut))return;const pt=Hs(g).top;$(c,g,pt,et,rt),oy(c,ut)},kx=(c,g,$,et)=>{const rt=eo.fromDom(c.getBody()),ut=eo.fromDom(c.getDoc());X0(rt);const pt=na(eo.fromDom($.startContainer),$.startOffset);pI(c,ut,g,pt,et),pt.cleanup()},xl=(c,g,$,et)=>{const rt=eo.fromDom(c.getDoc());pI(c,rt,$,yy(g),et)},E0=(c,g,$)=>{const et=$.startContainer,rt=$.startOffset,ut=$.endContainer,pt=$.endOffset;g(eo.fromDom(et),eo.fromDom(ut));const xt=c.dom.createRng();xt.setStart(et,rt),xt.setEnd(ut,pt),c.selection.setRng($)},gI=(c,g,$,et,rt)=>{const ut=g.pos;if(et)fs(ut.left,ut.top,rt);else{const pt=ut.top-$+g.height;fs(-c.getBody().getBoundingClientRect().left,pt,rt)}},mI=(c,g,$,et,rt,ut)=>{const pt=et+$,xt=rt.pos.top,Et=rt.bottom,Ft=Et-xt>=et;xt<$?gI(c,rt,et,ut!==!1,g):xt>pt?gI(c,rt,et,Ft?ut!==!1:ut===!0,g):Et>pt&&!Ft&&gI(c,rt,et,ut===!0,g)},WP=(c,g,$,et,rt)=>{const ut=g_(g).dom.innerHeight;mI(c,g,$,ut,et,rt)},Iw=(c,g,$,et,rt)=>{const ut=g_(g).dom.innerHeight;mI(c,g,$,ut,et,rt);const pt=Y2(et.element),xt=Vv(window);pt.top<xt.y?np(et.element,rt!==!1):pt.top>xt.bottom&&np(et.element,rt===!0)},X2=(c,g,$)=>wm(c,WP,g,$),yI=(c,g,$)=>xl(c,g,WP,$),F8=(c,g,$)=>wm(c,Iw,g,$),XE=(c,g,$)=>xl(c,g,Iw,$),JZ=(c,g,$)=>{(c.inline?yI:XE)(c,g,$)},J2=(c,g,$)=>{(c.inline?X2:F8)(c,g,$)},JE=(c,g=!1)=>c.dom.focus({preventScroll:g}),vB=c=>{const g=xy(c).dom;return c.dom===g.activeElement},qP=(c=Gl())=>Xt.from(c.dom.activeElement).map(eo.fromDom),QZ=c=>qP(xy(c)).filter(g=>c.dom.contains(g.dom)),_B=(c,g)=>{const $=vu(g)?$C(g).length:tm(g).length+1;return c>$?$:c<0?0:c},eK=c=>YE.range(c.start,_B(c.soffset,c.start),c.finish,_B(c.foffset,c.finish)),z8=(c,g)=>!ax(g.dom)&&(Fm(c,g)||ba(c,g)),tK=c=>g=>z8(c,g.start)&&z8(c,g.finish),nK=c=>c.inline||Xr.browser.isFirefox(),xB=c=>YE.range(eo.fromDom(c.startContainer),c.startOffset,eo.fromDom(c.endContainer),c.endOffset),B8=c=>{const g=c.getSelection();return(!g||g.rangeCount===0?Xt.none():Xt.from(g.getRangeAt(0))).map(xB)},$8=c=>{const g=g_(c);return B8(g.dom).filter(tK(c))},G8=(c,g)=>Xt.from(g).filter(tK(c)).map(eK),wB=c=>{const g=document.createRange();try{return g.setStart(c.start.dom,c.soffset),g.setEnd(c.finish.dom,c.foffset),Xt.some(g)}catch{return Xt.none()}},n5=c=>{const g=nK(c)?$8(eo.fromDom(c.getBody())):Xt.none();c.bookmark=g.isSome()?g:c.bookmark},ZP=c=>(c.bookmark?c.bookmark:Xt.none()).bind($=>G8(eo.fromDom(c.getBody()),$)).bind(wB),KP=c=>{ZP(c).each(g=>c.selection.setRng(g))},j8={isEditorUIElement:c=>{const g=c.className.toString();return g.indexOf("tox-")!==-1||g.indexOf("mce-")!==-1}},oK=(c,g)=>(so(g)||(g=0),setTimeout(c,g)),CB=(c,g)=>(so(g)||(g=0),setInterval(c,g)),o1={setEditorTimeout:(c,g,$)=>oK(()=>{c.removed||g()},$),setEditorInterval:(c,g,$)=>{const et=CB(()=>{c.removed?clearInterval(et):g()},$);return et}},kB=c=>c.type==="nodechange"&&c.selectionChange,SB=(c,g)=>{const $=()=>{g.throttle()};Uu.DOM.bind(document,"mouseup",$),c.on("remove",()=>{Uu.DOM.unbind(document,"mouseup",$)})},EB=(c,g)=>{c.on("mouseup touchend",$=>{g.throttle()})},rK=(c,g)=>{EB(c,g),c.on("keyup NodeChange AfterSetSelectionRange",$=>{kB($)||n5(c)})},sK=c=>{const g=DC(()=>{n5(c)},0);c.on("init",()=>{c.inline&&SB(c,g),rK(c,g)}),c.on("remove",()=>{g.cancel()})};let bI;const H8=Uu.DOM,iK=c=>Fr(c)&&j8.isEditorUIElement(c),U8=c=>{const g=c.classList;return g!==void 0?g.contains("tox-edit-area")||g.contains("tox-edit-area__iframe")||g.contains("mce-content-body"):!1},YP=(c,g)=>{const $=EE(c);return H8.getParent(g,rt=>iK(rt)||($?c.dom.is(rt,$):!1))!==null},V8=c=>{try{const g=xy(eo.fromDom(c.getElement()));return qP(g).fold(()=>document.body,$=>$.dom)}catch{return document.body}},XP=(c,g)=>{const $=g.editor;sK($);const et=(rt,ut)=>{if(vR(rt)&&rt.inline!==!0){const pt=eo.fromDom(rt.getContainer());ut(pt,"tox-edit-focus")}};$.on("focusin",()=>{const rt=c.focusedEditor;U8(V8($))&&et($,Gy),rt!==$&&(rt&&rt.dispatch("blur",{focusedEditor:$}),c.setActive($),c.focusedEditor=$,$.dispatch("focus",{blurredEditor:rt}),$.focus(!0))}),$.on("focusout",()=>{o1.setEditorTimeout($,()=>{const rt=c.focusedEditor;(!U8(V8($))||rt!==$)&&et($,S1),!YP($,V8($))&&rt===$&&($.dispatch("blur",{focusedEditor:null}),c.focusedEditor=null)})}),bI||(bI=rt=>{const ut=c.activeEditor;ut&&qw(rt).each(pt=>{const xt=pt;xt.ownerDocument===document&&xt!==document.body&&!YP(ut,xt)&&c.focusedEditor===ut&&(ut.dispatch("blur",{focusedEditor:null}),c.focusedEditor=null)})},H8.bind(document,"focusin",bI))},AB=(c,g)=>{c.focusedEditor===g.editor&&(c.focusedEditor=null),!c.activeEditor&&bI&&(H8.unbind(document,"focusin",bI),bI=null)},aK=c=>{c.on("AddEditor",Tn(XP,c)),c.on("RemoveEditor",Tn(AB,c))},TB=(c,g)=>c.dom.getParent(g,$=>c.dom.getContentEditable($)==="true"),IB=(c,g)=>c.dom.getParent(g,$=>c.dom.getContentEditable($)==="false")!==null,lK=c=>c.collapsed?Xt.from(bx(c.startContainer,c.startOffset)).map(eo.fromDom):Xt.none(),cK=(c,g)=>lK(g).bind($=>aM($)?Xt.some($):Fm(c,$)?Xt.none():Xt.some(c)),RB=(c,g)=>{cK(eo.fromDom(c.getBody()),g).bind($=>G0($.dom)).fold(()=>{c.selection.normalize()},$=>c.selection.setRng($.toRange()))},JP=c=>{if(c.setActive)try{c.setActive()}catch{c.focus()}else c.focus()},uK=c=>vB(c)||QZ(c).isSome(),MB=c=>ln(c.iframeElement)&&vB(eo.fromDom(c.iframeElement)),PB=c=>{const g=c.getBody();return g&&uK(eo.fromDom(g))},QP=c=>{const g=xy(eo.fromDom(c.getElement()));return qP(g).filter($=>!U8($.dom)&&YP(c,$.dom)).isSome()},vI=c=>c.inline?PB(c):MB(c),OB=c=>vI(c)||QP(c),W8=c=>{const g=c.selection,$=c.getBody();let et=g.getRng();c.quirks.refreshContentEditable();const rt=pt=>{ZP(pt).each(xt=>{pt.selection.setRng(xt),et=xt})};!vI(c)&&c.hasEditableRoot()&&rt(c);const ut=TB(c,g.getNode());if(ut&&c.dom.isChildOf(ut,$)){IB(c,ut)||JP($),JP(ut),c.hasEditableRoot()||rt(c),RB(c,et),q8(c);return}c.inline||(Xr.browser.isOpera()||JP($),c.getWin().focus()),(Xr.browser.isFirefox()||c.inline)&&(JP($),RB(c,et)),q8(c)},q8=c=>c.editorManager.setActive(c),DB=(c,g)=>{c.removed||(g?q8(c):W8(c))},Z8=(c,g)=>g.collapsed?c.isEditable(g.startContainer):c.isEditable(g.startContainer)&&c.isEditable(g.endContainer),K8=(c,g,$,et,rt)=>{const ut=$?g.startContainer:g.endContainer,pt=$?g.startOffset:g.endOffset;return Xt.from(ut).map(eo.fromDom).map(xt=>!et||!g.collapsed?y0(xt,rt(xt,pt)).getOr(xt):xt).bind(xt=>_i(xt)?Xt.some(xt):zm(xt).filter(_i)).map(xt=>xt.dom).getOr(c)},NB=(c,g,$=!1)=>K8(c,g,!0,$,(et,rt)=>Math.min(y_(et),rt)),LB=(c,g,$=!1)=>K8(c,g,!1,$,(et,rt)=>rt>0?rt-1:rt),FB=(c,g)=>{const $=c;for(;c&&pr(c)&&c.length===0;)c=g?c.nextSibling:c.previousSibling;return c||$},dK=(c,g)=>{if(!g)return c;let $=g.startContainer,et=g.endContainer;const rt=g.startOffset,ut=g.endOffset;let pt=g.commonAncestorContainer;g.collapsed||($===et&&ut-rt<2&&$.hasChildNodes()&&(pt=$.childNodes[rt]),pr($)&&pr(et)&&($.length===rt?$=FB($.nextSibling,!0):$=$.parentNode,ut===0?et=FB(et.previousSibling,!1):et=et.parentNode,$&&$===et&&(pt=$)));const xt=pr(pt)?pt.parentNode:pt;return Hy(xt)?xt:c},eO=(c,g,$,et)=>{const rt=[],ut=c.getRoot(),pt=c.getParent($||NB(ut,g,g.collapsed),c.isBlock),xt=c.getParent(et||LB(ut,g,g.collapsed),c.isBlock);if(pt&&pt!==ut&&rt.push(pt),pt&&xt&&pt!==xt){let Et;const Ft=new pm(pt,ut);for(;(Et=Ft.next())&&Et!==xt;)c.isBlock(Et)&&rt.push(Et)}return xt&&pt!==xt&&xt!==ut&&rt.push(xt),rt},zB=(c,g,$)=>Xt.from(g).bind(et=>Xt.from(et.parentNode).map(rt=>{const ut=c.nodeIndex(et),pt=c.createRng();return pt.setStart(rt,ut),pt.setEnd(rt,ut+1),$&&(EP(c,pt,et,!0),EP(c,pt,et,!1)),pt})),tO=(c,g)=>Nn(g,$=>{const et=c.dispatch("GetSelectionRange",{range:$});return et.range!==$?et.range:$}),BB={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},o5=(c,g,$)=>{const et=$?"lastChild":"firstChild",rt=$?"prev":"next";if(c[et])return c[et];if(c!==g){let ut=c[rt];if(ut)return ut;for(let pt=c.parent;pt&&pt!==g;pt=pt.parent)if(ut=pt[rt],ut)return ut}},fK=c=>{var g;const $=(g=c.value)!==null&&g!==void 0?g:"";if(!py($))return!1;const et=c.parent;return!(et&&(et.name!=="span"||et.attr("style"))&&/^[ ]+$/.test($))},$B=c=>{const g=c.name==="a"&&!c.attr("href")&&c.attr("id");return c.attr("name")||c.attr("id")&&!c.firstChild||c.attr("data-mce-bookmark")||g};class Oy{static create(g,$){const et=new Oy(g,BB[g]||1);return $&&or($,(rt,ut)=>{et.attr(ut,rt)}),et}constructor(g,$){this.name=g,this.type=$,$===1&&(this.attributes=[],this.attributes.map={})}replace(g){const $=this;return g.parent&&g.remove(),$.insert(g,$),$.remove(),$}attr(g,$){const et=this;if(!Tt(g))return ln(g)&&or(g,(ut,pt)=>{et.attr(pt,ut)}),et;const rt=et.attributes;if(rt){if($!==void 0){if($===null){if(g in rt.map){delete rt.map[g];let ut=rt.length;for(;ut--;)if(rt[ut].name===g)return rt.splice(ut,1),et}return et}if(g in rt.map){let ut=rt.length;for(;ut--;)if(rt[ut].name===g){rt[ut].value=$;break}}else rt.push({name:g,value:$});return rt.map[g]=$,et}return rt.map[g]}}clone(){const g=this,$=new Oy(g.name,g.type),et=g.attributes;if(et){const rt=[];rt.map={};for(let ut=0,pt=et.length;ut<pt;ut++){const xt=et[ut];xt.name!=="id"&&(rt[rt.length]={name:xt.name,value:xt.value},rt.map[xt.name]=xt.value)}$.attributes=rt}return $.value=g.value,$}wrap(g){const $=this;return $.parent&&($.parent.insert(g,$),g.append($)),$}unwrap(){const g=this;for(let $=g.firstChild;$;){const et=$.next;g.insert($,g,!0),$=et}g.remove()}remove(){const g=this,$=g.parent,et=g.next,rt=g.prev;return $&&($.firstChild===g?($.firstChild=et,et&&(et.prev=null)):rt&&(rt.next=et),$.lastChild===g?($.lastChild=rt,rt&&(rt.next=null)):et&&(et.prev=rt),g.parent=g.next=g.prev=null),g}append(g){const $=this;g.parent&&g.remove();const et=$.lastChild;return et?(et.next=g,g.prev=et,$.lastChild=g):$.lastChild=$.firstChild=g,g.parent=$,g}insert(g,$,et){g.parent&&g.remove();const rt=$.parent||this;return et?($===rt.firstChild?rt.firstChild=g:$.prev&&($.prev.next=g),g.prev=$.prev,g.next=$,$.prev=g):($===rt.lastChild?rt.lastChild=g:$.next&&($.next.prev=g),g.next=$.next,g.prev=$,$.next=g),g.parent=rt,g}getAll(g){const $=this,et=[];for(let rt=$.firstChild;rt;rt=o5(rt,$))rt.name===g&&et.push(rt);return et}children(){const g=this,$=[];for(let et=g.firstChild;et;et=et.next)$.push(et);return $}empty(){const g=this;if(g.firstChild){const $=[];for(let rt=g.firstChild;rt;rt=o5(rt,g))$.push(rt);let et=$.length;for(;et--;){const rt=$[et];rt.parent=rt.firstChild=rt.lastChild=rt.next=rt.prev=null}}return g.firstChild=g.lastChild=null,g}isEmpty(g,$={},et){var rt;const ut=this;let pt=ut.firstChild;if($B(ut))return!1;if(pt)do{if(pt.type===1){if(pt.attr("data-mce-bogus"))continue;if(g[pt.name]||$B(pt))return!1}if(pt.type===8||pt.type===3&&!fK(pt)||pt.type===3&&pt.parent&&$[pt.parent.name]&&py((rt=pt.value)!==null&&rt!==void 0?rt:"")||et&&et(pt))return!1}while(pt=o5(pt,ut));return!0}walk(g){return o5(this,null,g)}}const hK=dr.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),GB=c=>Tt(c.nodeValue)&&c.nodeValue.includes(Am),jB=c=>`${c.length===0?"":`${Nn(c,g=>`[${g}]`).join(",")},`}[data-mce-bogus="all"]`,pK=(c,g)=>g.querySelectorAll(jB(c)),HB=c=>document.createTreeWalker(c,NodeFilter.SHOW_COMMENT,g=>GB(g)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),UB=c=>document.createTreeWalker(c,NodeFilter.SHOW_TEXT,g=>{if(GB(g)){const $=g.parentNode;return $&&es(hK,$.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),gK=c=>HB(c).nextNode()!==null,mK=c=>UB(c).nextNode()!==null,yK=(c,g)=>g.querySelector(jB(c))!==null,nO=(c,g)=>{sn(pK(c,g),$=>{const et=eo.fromDom($);fm(et,"data-mce-bogus")==="all"?_u(et):sn(c,rt=>{dp(et,rt)&&ju(et,rt)})})},Y8=c=>{let g=c.nextNode();for(;g!==null;)g.nodeValue=null,g=c.nextNode()},VB=Mt(Y8,HB),bK=Mt(Y8,UB),WB=(c,g)=>{const $=[{condition:Tn(yK,g),action:Tn(nO,g)},{condition:gK,action:VB},{condition:mK,action:bK}];let et=c,rt=!1;return sn($,({condition:ut,action:pt})=>{ut(et)&&(rt||(et=c.cloneNode(!0),rt=!0),pt(et))}),et},qB=c=>{const g=_0(c,"[data-mce-bogus]");sn(g,$=>{fm($,"data-mce-bogus")==="all"?_u($):gx($)?(Iu($,eo.fromText(yC)),_u($)):Cy($)})},ZB=c=>{const g=_0(c,"input");sn(g,$=>{ju($,"name")})},vK=(c,g)=>{const $=h0(c),et=new RegExp(`^(<${$}[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/${$}>[\r
]*|<br \\/>[\r
]*)$`);return g.replace(et,"")},_K=(c,g)=>{const $=c.getDoc(),et=xy(eo.fromDom(c.getBody())),rt=eo.fromTag("div",$);up(rt,"data-mce-bogus","all"),Js(rt,{position:"fixed",left:"-9999999px",top:"0"}),Uv(rt,g.innerHTML),qB(rt),ZB(rt);const ut=XS(et);qp(ut,rt);const pt=mv(rt.dom.innerText);return _u(rt),pt},KB=(c,g,$)=>{let et;return g.format==="raw"?et=dr.trim(mv(WB($,c.serializer.getTempAttrs()).innerHTML)):g.format==="text"?et=_K(c,$):g.format==="tree"?et=c.serializer.serialize($,g):et=vK(c,c.serializer.serialize($,g)),g.format!=="text"&&!dT(eo.fromDom($))&&Tt(et)?dr.trim(et):et},xK=(c,g)=>Xt.from(c.getBody()).fold(cn(g.format==="tree"?new Oy("body",11):""),$=>KB(c,g,$)),X8=dr.makeMap,J8=c=>{const g=[];c=c||{};const $=c.indent,et=X8(c.indent_before||""),rt=X8(c.indent_after||""),ut=tw.getEncodeFunc(c.entity_encoding||"raw",c.entities),pt=c.element_format!=="xhtml";return{start:(xt,Et,Ft)=>{if($&&et[xt]&&g.length>0){const Vt=g[g.length-1];Vt.length>0&&Vt!==`
`&&g.push(`
`)}if(g.push("<",xt),Et)for(let Vt=0,Kt=Et.length;Vt<Kt;Vt++){const en=Et[Vt];g.push(" ",en.name,'="',ut(en.value,!0),'"')}if(!Ft||pt?g[g.length]=">":g[g.length]=" />",Ft&&$&&rt[xt]&&g.length>0){const Vt=g[g.length-1];Vt.length>0&&Vt!==`
`&&g.push(`
`)}},end:xt=>{let Et;g.push("</",xt,">"),$&&rt[xt]&&g.length>0&&(Et=g[g.length-1],Et.length>0&&Et!==`
`&&g.push(`
`))},text:(xt,Et)=>{xt.length>0&&(g[g.length]=Et?xt:ut(xt))},cdata:xt=>{g.push("<![CDATA[",xt,"]]>")},comment:xt=>{g.push("<!--",xt,"-->")},pi:(xt,Et)=>{Et?g.push("<?",xt," ",ut(Et),"?>"):g.push("<?",xt,"?>"),$&&g.push(`
`)},doctype:xt=>{g.push("<!DOCTYPE",xt,">",$?`
`:"")},reset:()=>{g.length=0},getContent:()=>g.join("").replace(/\n$/,"")}},pS=(c={},g=xu())=>{const $=J8(c);return c.validate="validate"in c?c.validate:!0,{serialize:rt=>{const ut=c.validate,pt={3:Et=>{var Ft;$.text((Ft=Et.value)!==null&&Ft!==void 0?Ft:"",Et.raw)},8:Et=>{var Ft;$.comment((Ft=Et.value)!==null&&Ft!==void 0?Ft:"")},7:Et=>{$.pi(Et.name,Et.value)},10:Et=>{var Ft;$.doctype((Ft=Et.value)!==null&&Ft!==void 0?Ft:"")},4:Et=>{var Ft;$.cdata((Ft=Et.value)!==null&&Ft!==void 0?Ft:"")},11:Et=>{let Ft=Et;if(Ft=Ft.firstChild)do xt(Ft);while(Ft=Ft.next)}};$.reset();const xt=Et=>{var Ft;const Vt=pt[Et.type];if(Vt)Vt(Et);else{const Kt=Et.name,en=Kt in g.getVoidElements();let mn=Et.attributes;if(ut&&mn&&mn.length>1){const Sn=[];Sn.map={};const bn=g.getElementRule(Et.name);if(bn){for(let Pn=0,ao=bn.attributesOrder.length;Pn<ao;Pn++){const po=bn.attributesOrder[Pn];if(po in mn.map){const wo=mn.map[po];Sn.map[po]=wo,Sn.push({name:po,value:wo})}}for(let Pn=0,ao=mn.length;Pn<ao;Pn++){const po=mn[Pn].name;if(!(po in Sn.map)){const wo=mn.map[po];Sn.map[po]=wo,Sn.push({name:po,value:wo})}}mn=Sn}}if($.start(Kt,mn,en),Yu(Kt))Tt(Et.value)&&$.text(Et.value,!0),$.end(Kt);else if(!en){let Sn=Et.firstChild;if(Sn){(Kt==="pre"||Kt==="textarea")&&Sn.type===3&&((Ft=Sn.value)===null||Ft===void 0?void 0:Ft[0])===`
`&&$.text(`
`,!0);do xt(Sn);while(Sn=Sn.next)}$.end(Kt)}}};return rt.type===1&&!c.inner?xt(rt):rt.type===3?pt[3](rt):pt[11](rt),$.getContent()}}},YB=new Set;sn(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],g=>{YB.add(g)});const XB=new Set;sn(["background-color"],g=>{XB.add(g)});const JB=["font","text-decoration","text-emphasis"],wK=(c,g)=>c.parseStyle(c.getAttrib(g,"style")),_I=(c,g)=>Yr(wK(c,g)),CK=c=>YB.has(c),kK=c=>XB.has(c),QB=(c,g)=>Cn(_I(c,g),$=>CK($)),SK=(c,g)=>QB(c,g)&&Cn(_I(c,g),$=>kK($)),EK=c=>Bn(c,g=>Cn(JB,$=>As(g,$))),AK=(c,g,$)=>{const et=_I(c,g),rt=_I(c,$),ut=pt=>{var xt,Et;const Ft=(xt=c.getStyle(g,pt))!==null&&xt!==void 0?xt:"",Vt=(Et=c.getStyle($,pt))!==null&&Et!==void 0?Et:"";return Cs(Ft)&&Cs(Vt)&&Ft!==Vt};return Cn(et,pt=>{const xt=Et=>Cn(Et,Ft=>Ft===pt);if(!xt(rt)&&xt(JB)){const Et=EK(rt);return Cn(Et,ut)}else return ut(pt)})},e$=(c,g,$)=>Xt.from($.container()).filter(pr).exists(et=>{const rt=c?0:-1;return g(et.data.charAt($.offset()+rt))}),Q8=Tn(e$,!0,$2),e6=Tn(e$,!1,$2),TK=c=>{const g=c.container();return pr(g)&&(g.data.length===0||hE(g.data)&&Z2.isBookmarkNode(g.parentNode))},gS=(c,g)=>$=>SR(c?0:-1,$).filter(g).isSome(),t$=c=>n2(c)&&wp(eo.fromDom(c),"display")==="block",n$=c=>nu(c)&&!e2(c),_s=gS(!0,t$),o$=gS(!1,t$),xI=gS(!0,o0),r5=gS(!1,o0),oO=gS(!0,fv),t6=gS(!1,fv),mS=gS(!0,n$),yS=gS(!1,n$),IK=c=>c.slice(0,-1),RK=(c,g,$)=>Fm(g,c)?IK(lv(c,et=>$(et)||ba(et,g))):[],s5=(c,g)=>RK(c,g,Dn),Rw=(c,g)=>[c].concat(s5(c,g)),r$=(c,g,$)=>_P(c,g,$,TK),MK=c=>g=>c.isBlock(En(g)),Us=(c,g,$)=>Qn(Rw(eo.fromDom(g.container()),c),MK($)),s$=(c,g,$,et)=>r$(c,g.dom,$).forall(rt=>Us(g,$,et).fold(()=>!H1(rt,$,g.dom),ut=>!H1(rt,$,g.dom)&&Fm(ut,eo.fromDom(rt.container())))),Ks=(c,g,$,et)=>Us(g,$,et).fold(()=>r$(c,g.dom,$).forall(rt=>!H1(rt,$,g.dom)),rt=>r$(c,rt.dom,$).isNone()),rO=Tn(Ks,!1),PK=Tn(Ks,!0),vie=Tn(s$,!1),OK=Tn(s$,!0),_ie=c=>NE(c).exists(gx),n6=(c,g,$,et)=>{const rt=Bn(Rw(eo.fromDom($.container()),g),pt=>et.isBlock(En(pt))),ut=wr(rt).getOr(g);return Zy(c,ut.dom,$).filter(_ie)},o6=(c,g,$)=>NE(g).exists(gx)||n6(!0,c,g,$).isSome(),sO=(c,g,$)=>i8(g).exists(gx)||n6(!1,c,g,$).isSome(),Fs=Tn(n6,!1),DK=Tn(n6,!0),i$=c=>Uo.isTextPosition(c)&&!c.isAtStart()&&!c.isAtEnd(),a$=(c,g,$)=>{const et=Bn(Rw(eo.fromDom(g.container()),c),rt=>$.isBlock(En(rt)));return wr(et).getOr(c)},wI=(c,g,$)=>i$(g)?e6(g):e6(g)||Ry(a$(c,g,$).dom,g).exists(e6),r6=(c,g,$)=>i$(g)?Q8(g):Q8(g)||$0(a$(c,g,$).dom,g).exists(Q8),NK=c=>yn(["pre","pre-wrap"],c),s6=c=>NE(c).bind(g=>tp(g,_i)).exists(g=>NK(wp(g,"white-space"))),LK=(c,g)=>Ry(c.dom,g).isNone(),l$=(c,g)=>$0(c.dom,g).isNone(),FK=(c,g,$)=>LK(c,g)||l$(c,g)||rO(c,g,$)||PK(c,g,$)||sO(c,g,$)||o6(c,g,$),xie=c=>ln(c)&&nu(c)&&kR(c),zK=(c,g)=>$=>xie(new pm($,c)[g]()),BK=(c,g)=>{const $=$0(c.dom,g).getOr(g),et=zK(c.dom,"next");return g.isAtEnd()&&(et(g.container())||et($.container()))},$K=(c,g)=>{const $=Ry(c.dom,g).getOr(g),et=zK(c.dom,"prev");return g.isAtStart()&&(et(g.container())||et($.container()))},c$=(c,g,$)=>s6(g)?!1:FK(c,g,$)||wI(c,g,$)||r6(c,g,$),i5=(c,g,$)=>s6(g)?!1:rO(c,g,$)||vie(c,g,$)||sO(c,g,$)||wI(c,g,$)||$K(c,g),u$=c=>{const g=c.container(),$=c.offset();return pr(g)&&$<g.data.length?Uo(g,$+1):c},a5=(c,g,$)=>s6(g)?!1:PK(c,g,$)||OK(c,g,$)||o6(c,g,$)||r6(c,g,$)||BK(c,g),_a=(c,g,$)=>i5(c,g,$)||a5(c,u$(g),$),i6=(c,g)=>kw(c.charAt(g)),l5=(c,g)=>$2(c.charAt(g)),d$=c=>{const g=c.container();return pr(g)&&ms(g.data,gm)},f$=c=>{const g=c.split("");return Nn(g,($,et)=>kw($)&&et>0&&et<g.length-1&&WT(g[et-1])&&WT(g[et+1])?" ":$).join("")},a6=(c,g,$,et)=>{const rt=g.data,ut=Uo(g,0);return!$&&i6(rt,0)&&!_a(c,ut,et)?(g.data=" "+rt.slice(1),!0):$&&l5(rt,0)&&i5(c,ut,et)?(g.data=gm+rt.slice(1),!0):!1},h$=c=>{const g=c.data,$=f$(g);return $!==g?(c.data=$,!0):!1},l6=(c,g,$,et)=>{const rt=g.data,ut=Uo(g,rt.length-1);return!$&&i6(rt,rt.length-1)&&!_a(c,ut,et)?(g.data=rt.slice(0,-1)+" ",!0):$&&l5(rt,rt.length-1)&&a5(c,ut,et)?(g.data=rt.slice(0,-1)+gm,!0):!1},GK=(c,g,$)=>{const et=g.container();if(!pr(et))return Xt.none();if(d$(g)){const rt=a6(c,et,!1,$)||h$(et)||l6(c,et,!1,$);return m0(rt,g)}else if(_a(c,g,$)){const rt=a6(c,et,!0,$)||l6(c,et,!0,$);return m0(rt,g)}else return Xt.none()},p$=c=>{const g=eo.fromDom(c.getBody());c.selection.isCollapsed()&&GK(g,Uo.fromRangeStart(c.selection.getRng()),c.schema).each($=>{c.selection.setRng($.toRange())})},g$=(c,g,$,et)=>{if($===0)return;const rt=eo.fromDom(c),ut=ep(rt,Ft=>et.isBlock(En(Ft))).getOr(rt),pt=c.data.slice(g,g+$),xt=g+$>=c.data.length&&a5(ut,Uo(c,c.data.length),et),Et=g===0&&i5(ut,Uo(c,0),et);c.replaceData(g,$,jy(pt,4,Et,xt))},iO=(c,g,$)=>{const et=c.data.slice(g),rt=et.length-Qp(et).length;g$(c,g,rt,$)},c6=(c,g,$)=>{const et=c.data.slice(0,g),rt=et.length-cm(et).length;g$(c,g-rt,rt,$)},u6=(c,g,$,et,rt=!0)=>{const ut=cm(c.data).length,pt=rt?c:g,xt=rt?g:c;return rt?pt.appendData(xt.data):pt.insertData(0,xt.data),_u(eo.fromDom(xt)),et&&iO(pt,ut,$),pt},jK=(c,g)=>{const $=c.container(),et=c.offset();return!Uo.isTextPosition(c)&&$===g.parentNode&&et>Uo.before(g).offset()},HK=(c,g)=>jK(g,c)?Uo(g.container(),g.offset()-1):g,UK=c=>pr(c)?Uo(c,0):Uo.before(c),VK=c=>pr(c)?Uo(c,c.data.length):Uo.after(c),aO=c=>Qv(c.previousSibling)?Xt.some(VK(c.previousSibling)):c.previousSibling?Ky(c.previousSibling):Xt.none(),lO=c=>Qv(c.nextSibling)?Xt.some(UK(c.nextSibling)):c.nextSibling?G0(c.nextSibling):Xt.none(),WK=(c,g)=>Xt.from(g.previousSibling?g.previousSibling:g.parentNode).bind($=>Ry(c,Uo.before($))).orThunk(()=>$0(c,Uo.after(g))),qK=(c,g)=>$0(c,Uo.after(g)).orThunk(()=>Ry(c,Uo.before(g))),ZK=(c,g)=>aO(g).orThunk(()=>lO(g)).orThunk(()=>WK(c,g)),KK=(c,g)=>lO(g).orThunk(()=>aO(g)).orThunk(()=>qK(c,g)),YK=(c,g,$)=>c?KK(g,$):ZK(g,$),XK=(c,g,$)=>YK(c,g,$).map(Tn(HK,$)),m$=(c,g,$)=>{$.fold(()=>{c.focus()},et=>{c.selection.setRng(et.toRange(),g)})},JK=c=>g=>g.dom===c,y$=(c,g)=>g&&es(c.schema.getBlockElements(),En(g)),QK=(c,g,$)=>{if(r0(c,g)){const et=eo.fromHtml('<br data-mce-bogus="1">');return $?sn(tm(g),rt=>{UE(rt)||_u(rt)}):x_(g),qp(g,et),Xt.some(Uo.before(et.dom))}else return Xt.none()},eY=(c,g,$,et)=>{const rt=cv(c).filter(vu),ut=Qm(c).filter(vu);return _u(c),Xm(rt,ut,g,(pt,xt,Et)=>{const Ft=pt.dom,Vt=xt.dom,Kt=Ft.data.length;return u6(Ft,Vt,$,et),Et.container()===Vt?Uo(Ft,Kt):Et}).orThunk(()=>(et&&(rt.each(pt=>c6(pt.dom,pt.dom.length,$)),ut.each(pt=>iO(pt.dom,0,$))),g))},QE=(c,g)=>es(c.schema.getTextInlineElements(),En(g)),eA=(c,g,$,et=!0,rt=!1)=>{const ut=XK(g,c.getBody(),$.dom),pt=ep($,Tn(y$,c),JK(c.getBody())),xt=eY($,ut,c.schema,QE(c,$));c.dom.isEmpty(c.getBody())?(c.setContent(""),c.selection.setCursorLocation()):pt.bind(Et=>QK(c.schema,Et,rt)).fold(()=>{et&&m$(c,g,xt)},Et=>{et&&m$(c,g,Xt.some(Et))})},b$=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,tY=c=>b$.test(c),tA=(c,g)=>D0(eo.fromDom(g),_v(c))&&!O1(c.schema,g)&&c.dom.isEditable(g),d6=c=>{var g;return Uu.DOM.getStyle(c,"direction",!0)==="rtl"||tY((g=c.textContent)!==null&&g!==void 0?g:"")},v$=(c,g,$)=>Bn(Uu.DOM.getParents($.container(),"*",g),c),Q2=(c,g,$)=>{const et=v$(c,g,$);return Xt.from(et[et.length-1])},_$=(c,g,$)=>{const et=Iy(g,c),rt=Iy($,c);return ln(et)&&et===rt},Dy=c=>O_(c)||mx(c),Z1=(c,g)=>{const $=g.container(),et=g.offset();return c?Xv($)?pr($.nextSibling)?Uo($.nextSibling,0):Uo.after($):O_(g)?Uo($,et+1):g:Xv($)?pr($.previousSibling)?Uo($.previousSibling,$.previousSibling.data.length):Uo.before($):mx(g)?Uo($,et-1):g},x$=Tn(Z1,!0),w$=Tn(Z1,!1),C$=(c,g)=>{const $=et=>et.stopImmediatePropagation();c.on("beforeinput input",$,!0),c.getDoc().execCommand(g),c.off("beforeinput input",$)},nY=c=>{c.execCommand("delete")},Mw=c=>C$(c,"Delete"),k$=c=>C$(c,"ForwardDelete"),oY=c=>g=>gu(zm(g),c,ba),Cp=c=>Ey(c)||_2(c),nA=(c,g)=>Fm(c,g)?tp(g,Cp,oY(c)):Xt.none(),bS=(c,g=!0)=>{c.dom.isEmpty(c.getBody())&&c.setContent("",{no_selection:!g})},S$=(c,g,$)=>js(G0($),Ky($),(et,rt)=>{const ut=Z1(!0,et),pt=Z1(!1,rt),xt=Z1(!1,g);return c?$0($,xt).exists(Et=>Et.isEqual(pt)&&g.isEqual(ut)):Ry($,xt).exists(Et=>Et.isEqual(ut)&&g.isEqual(pt))}).getOr(!0),oA=c=>(ys(c)?cv(c):I1(c)).bind(oA).orThunk(()=>Xt.some(c)),r1=(c,g,$,et=!0)=>{var rt;g.deleteContents();const ut=oA($).getOr($),pt=eo.fromDom((rt=c.dom.getParent(ut.dom,c.dom.isBlock))!==null&&rt!==void 0?rt:$.dom);if(pt.dom===c.getBody()?bS(c,et):r0(c.schema,pt,{checkRootAsContent:!1})&&(P_(pt),et&&c.selection.setCursorLocation(pt.dom,0)),!ba($,pt)){const xt=gu(zm(pt),$)?[]:nx(pt);sn(xt.concat(tm($)),Et=>{!ba(Et,pt)&&!Fm(Et,pt)&&r0(c.schema,Et)&&_u(Et)})}},c5=c=>g=>ba(c,g),Ou=c=>_0(c,"td,th"),CI=(c,g)=>$E(eo.fromDom(c),g),E$=c=>js(c.startTable,c.endTable,(g,$)=>{const et=JS(g,ut=>ba(ut,$)),rt=JS($,ut=>ba(ut,g));return!et&&!rt?c:{...c,startTable:et?Xt.none():c.startTable,endTable:rt?Xt.none():c.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(c),A$=c=>E$(c),f6=(c,g)=>{const $=CI(c.startContainer,g),et=CI(c.endContainer,g),rt=$.isSome(),ut=et.isSome(),pt=js($,et,ba).getOr(!1);return A$({startTable:$,endTable:et,isStartInTable:rt,isEndInTable:ut,isSameTable:pt,isMultiTable:!pt&&rt&&ut})},u5=(c,g)=>({start:c,end:g}),h6=(c,g,$)=>({rng:c,table:g,cells:$}),rA=vv.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),sA=(c,g)=>uv(eo.fromDom(c),"td,th",g),cO=c=>!ba(c.start,c.end),p6=(c,g)=>$E(c.start,g).bind($=>$E(c.end,g).bind(et=>m0(ba($,et),$))),T$=(c,g)=>!cO(c)&&p6(c,g).exists($=>{const et=$.dom.rows;return et.length===1&&et[0].cells.length===1}),I$=(c,g)=>{const $=sA(c.startContainer,g),et=sA(c.endContainer,g);return js($,et,u5)},R$=c=>g=>$E(g,c).bind($=>gs(Ou($)).map(et=>u5(g,et))),M$=c=>g=>$E(g,c).bind($=>wr(Ou($)).map(et=>u5(et,g))),vS=c=>g=>p6(g,c).map($=>h6(g,$,Ou($))),g6=(c,g,$,et)=>{if($.collapsed||!c.forall(cO))return Xt.none();if(g.isSameTable){const rt=c.bind(vS(et));return Xt.some({start:rt,end:rt})}else{const rt=sA($.startContainer,et),ut=sA($.endContainer,et),pt=rt.bind(R$(et)).bind(vS(et)),xt=ut.bind(M$(et)).bind(vS(et));return Xt.some({start:pt,end:xt})}},uO=(c,g)=>vo(c,$=>ba($,g)),m6=c=>js(uO(c.cells,c.rng.start),uO(c.cells,c.rng.end),(g,$)=>c.cells.slice(g,$+1)),rY=(c,g,$)=>c.exists(et=>T$(et,$)&&jR(et.start,g)),y6=(c,g)=>{const{startTable:$,endTable:et}=g,rt=c.cloneRange();return $.each(ut=>rt.setStartAfter(ut.dom)),et.each(ut=>rt.setEndBefore(ut.dom)),rt},P$=(c,g,$,et)=>g6(c,g,$,et).bind(({start:rt,end:ut})=>rt.or(ut)).bind(rt=>{const{isSameTable:ut}=g,pt=m6(rt).getOr([]);if(ut&&rt.cells.length===pt.length)return Xt.some(rA.fullTable(rt.table));if(pt.length>0){if(ut)return Xt.some(rA.partialTable(pt,Xt.none()));{const xt=y6($,g);return Xt.some(rA.partialTable(pt,Xt.some({...g,rng:xt})))}}else return Xt.none()}),O$=(c,g,$,et)=>g6(c,g,$,et).bind(({start:rt,end:ut})=>{const pt=rt.bind(m6).getOr([]),xt=ut.bind(m6).getOr([]);if(pt.length>0&&xt.length>0){const Et=y6($,g);return Xt.some(rA.multiTable(pt,xt,Et))}else return Xt.none()}),dO=(c,g)=>{const $=c5(c),et=I$(g,$),rt=f6(g,$);return rY(et,g,$)?et.map(ut=>rA.singleCellTable(g,ut.start)):rt.isMultiTable?O$(et,rt,g,$):P$(et,rt,g,$)},b6=c=>sn(c,g=>{ju(g,"contenteditable"),P_(g)}),D$=(c,g)=>Xt.from(c.dom.getParent(g,c.dom.isBlock)).map(eo.fromDom),N$=(c,g,$)=>{$.each(et=>{g?_u(et):(P_(et),c.selection.setCursorLocation(et.dom,0))})},fO=(c,g,$,et)=>{const rt=$.cloneRange();et?(rt.setStart($.startContainer,$.startOffset),rt.setEndAfter(g.dom.lastChild)):(rt.setStartBefore(g.dom.firstChild),rt.setEnd($.endContainer,$.endOffset)),hO(c,rt,g,!1).each(ut=>ut())},v6=c=>{const g=sS(c),$=eo.fromDom(c.selection.getNode());o2($.dom)&&r0(c.schema,$)?c.selection.setCursorLocation($.dom,0):c.selection.collapse(!0),g.length>1&&Cn(g,et=>ba(et,$))&&up($,"data-mce-selected","1")},_6=(c,g,$)=>Xt.some(()=>{const et=c.selection.getRng(),rt=$.bind(({rng:ut,isStartInTable:pt})=>{const xt=D$(c,pt?ut.endContainer:ut.startContainer);ut.deleteContents(),N$(c,pt,xt.filter(Tn(r0,c.schema)));const Et=pt?g[0]:g[g.length-1];return fO(c,Et,et,pt),r0(c.schema,Et)?Xt.none():Xt.some(pt?g.slice(1):g.slice(0,-1))}).getOr(g);b6(rt),v6(c)}),L$=(c,g,$,et)=>Xt.some(()=>{const rt=c.selection.getRng(),ut=g[0],pt=$[$.length-1];fO(c,ut,rt,!0),fO(c,pt,rt,!1);const xt=r0(c.schema,ut)?g:g.slice(1),Et=r0(c.schema,pt)?$:$.slice(0,-1);b6(xt.concat(Et)),et.deleteContents(),v6(c)}),hO=(c,g,$,et=!0)=>Xt.some(()=>{r1(c,g,$,et)}),F$=(c,g)=>Xt.some(()=>eA(c,!1,g)),z$=(c,g,$)=>dO(g,$).bind(et=>et.fold(Tn(hO,c),Tn(F$,c),Tn(_6,c),Tn(L$,c))),x6=(c,g)=>d5(c,g),B$=(c,g,$,et)=>pO(g,et).fold(()=>z$(c,g,$),rt=>x6(c,rt)),$$=(c,g,$)=>{const et=eo.fromDom(c.getBody()),rt=c.selection.getRng();return $.length!==0?_6(c,$,Xt.none()):B$(c,et,rt,g)},w6=(c,g)=>Qn(Rw(g,c),fE),pO=(c,g)=>Qn(Rw(g,c),dm("caption")),G$=(c,g,$,et,rt)=>ww($,c.getBody(),rt).bind(ut=>w6(g,eo.fromDom(ut.getNode())).bind(pt=>ba(pt,et)?Xt.none():Xt.some(hn))),d5=(c,g)=>Xt.some(()=>{P_(g),c.selection.setCursorLocation(g.dom,0)}),C6=(c,g,$,et)=>G0(c.dom).bind(rt=>Ky(c.dom).map(ut=>g?$.isEqual(rt)&&et.isEqual(ut):$.isEqual(ut)&&et.isEqual(rt))).getOr(!0),gO=(c,g)=>d5(c,g),k6=(c,g,$)=>pO(c,eo.fromDom($.getNode())).fold(()=>Xt.some(hn),et=>m0(!ba(et,g),hn)),mO=(c,g,$,et,rt)=>ww($,c.getBody(),rt).fold(()=>Xt.some(hn),ut=>C6(et,$,rt,ut)?gO(c,et):k6(g,et,ut)),j$=(c,g,$,et)=>{const rt=Uo.fromRangeStart(c.selection.getRng());return w6($,et).bind(ut=>r0(c.schema,ut,{checkRootAsContent:!1})?d5(c,ut):G$(c,$,g,ut,rt))},yO=(c,g,$,et)=>{const rt=Uo.fromRangeStart(c.selection.getRng());return r0(c.schema,et)?d5(c,et):mO(c,$,g,et,rt)},bO=(c,g)=>c?oO(g):t6(g),f5=(c,g)=>{const $=Uo.fromRangeStart(c.selection.getRng());return bO(g,$)||Zy(g,c.getBody(),$).exists(et=>bO(g,et))},S6=(c,g,$)=>{const et=eo.fromDom(c.getBody());return pO(et,$).fold(()=>j$(c,g,et,$).orThunk(()=>m0(f5(c,g),hn)),rt=>yO(c,g,et,rt))},vO=(c,g)=>{const $=eo.fromDom(c.selection.getStart(!0)),et=sS(c);return c.selection.isCollapsed()&&et.length===0?S6(c,g,$):$$(c,$,et)},$_=(c,g)=>{let $=g;for(;$&&$!==c;){if(Qo($)||nu($))return $;$=$.parentNode}return null},E6=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],A6=dr.each,_S=c=>{const g=c.dom,$=new Set(c.serializer.getTempAttrs()),et=(ut,pt)=>{if(ut.nodeName!==pt.nodeName||ut.nodeType!==pt.nodeType)return!1;const xt=Ft=>{const Vt={};return A6(g.getAttribs(Ft),Kt=>{const en=Kt.nodeName.toLowerCase();en!=="style"&&!rt(en)&&(Vt[en]=g.getAttrib(Ft,en))}),Vt},Et=(Ft,Vt)=>{for(const Kt in Ft)if(es(Ft,Kt)){const en=Vt[Kt];if(fn(en)||Ft[Kt]!==en)return!1;delete Vt[Kt]}for(const Kt in Vt)if(es(Vt,Kt))return!1;return!0};return Fr(ut)&&Fr(pt)&&(!Et(xt(ut),xt(pt))||!Et(g.parseStyle(g.getAttrib(ut,"style")),g.parseStyle(g.getAttrib(pt,"style"))))?!1:!My(ut)&&!My(pt)},rt=ut=>Cn(E6,pt=>As(ut,pt))||$.has(ut);return{compare:et,isAttributeInternal:rt}},eC=c=>["h1","h2","h3","h4","h5","h6"].includes(c.name),H$=c=>c.name==="summary",sY=(c,g)=>{let $=c;for(;$=$.walk();)g($)},U$=(c,g,$,et)=>{const rt=$.name;for(let ut=0,pt=c.length;ut<pt;ut++){const xt=c[ut];if(xt.name===rt){const Et=et.nodes[rt];Et?Et.nodes.push($):et.nodes[rt]={filter:xt,nodes:[$]}}}if($.attributes)for(let ut=0,pt=g.length;ut<pt;ut++){const xt=g[ut],Et=xt.name;if(Et in $.attributes.map){const Ft=et.attributes[Et];Ft?Ft.nodes.push($):et.attributes[Et]={filter:xt,nodes:[$]}}}},V$=(c,g,$)=>{const et={nodes:{},attributes:{}};return $.firstChild&&sY($,rt=>{U$(c,g,rt,et)}),et},T6=(c,g)=>{const $=(et,rt)=>{or(et,ut=>{const pt=Ts(ut.nodes);sn(ut.filter.callbacks,xt=>{for(let Et=pt.length-1;Et>=0;Et--){const Ft=pt[Et];(!(rt?Ft.attr(ut.filter.name)!==void 0:Ft.name===ut.filter.name)||Mn(Ft.parent))&&pt.splice(Et,1)}pt.length>0&&xt(pt,ut.filter.name,g)})})};$(c.nodes,!1),$(c.attributes,!0)},I6=(c,g,$,et={})=>{const rt=V$(c,g,$);T6(rt,et)},R6=(c,g,$,et)=>{if((c.pad_empty_with_br||g.insert)&&$(et)){const ut=new Oy("br",1);g.insert&&ut.attr("data-mce-bogus","1"),et.empty().append(ut)}else et.empty().append(new Oy("#text",3)).value=gm},xS=c=>{var g;return wS(c,"#text")&&((g=c==null?void 0:c.firstChild)===null||g===void 0?void 0:g.value)===gm},wS=(c,g)=>{const $=c==null?void 0:c.firstChild;return ln($)&&$===c.lastChild&&$.name===g},wie=(c,g)=>{const $=c.getElementRule(g.name);return($==null?void 0:$.paddEmpty)===!0},Im=(c,g,$,et)=>et.isEmpty(g,$,rt=>wie(c,rt)),iY=(c,g)=>ln(c)&&(g(c)||c.name==="br"),aY=c=>{let g;for(let $=c;$;$=$.parent){const et=$.attr("contenteditable");if(et==="false")break;et==="true"&&(g=$)}return Xt.from(g)},Sx=(c,g,$=c.parent)=>{if(g.getSpecialElements()[c.name])c.empty().remove();else{const et=c.children();for(const rt of et)$&&!g.isValidChild($.name,rt.name)&&Sx(rt,g,$);c.unwrap()}},iu=(c,g,$,et=hn)=>{const rt=g.getTextBlockElements(),ut=g.getNonEmptyElements(),pt=g.getWhitespaceElements(),xt=dr.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),Et=new Set,Ft=Vt=>Vt!==$&&!xt[Vt.name];for(let Vt=0;Vt<c.length;Vt++){const Kt=c[Vt];let en,mn,Sn;if(!Kt.parent||Et.has(Kt))continue;if(rt[Kt.name]&&Kt.parent.name==="li"){let Pn=Kt.next;for(;Pn&&rt[Pn.name];){Pn.name="li",Et.add(Pn),Kt.parent.insert(Pn,Kt.parent);Pn=Pn.next}Kt.unwrap();continue}const bn=[Kt];for(en=Kt.parent;en&&!g.isValidChild(en.name,Kt.name)&&Ft(en);en=en.parent)bn.push(en);if(en&&bn.length>1)if(M6(g,Kt,en))Sx(Kt,g);else{bn.reverse(),mn=bn[0].clone(),et(mn);let Pn=mn;for(let ao=0;ao<bn.length-1;ao++){g.isValidChild(Pn.name,bn[ao].name)&&ao>0?(Sn=bn[ao].clone(),et(Sn),Pn.append(Sn)):Sn=Pn;for(let po=bn[ao].firstChild;po&&po!==bn[ao+1];){const wo=po.next;Sn.append(po),po=wo}Pn=Sn}Im(g,ut,pt,mn)?en.insert(Kt,bn[0],!0):(en.insert(mn,bn[0],!0),en.insert(Kt,mn)),en=bn[0],(Im(g,ut,pt,en)||wS(en,"br"))&&en.empty().remove()}else if(Kt.parent){if(Kt.name==="li"){let Pn=Kt.prev;if(Pn&&(Pn.name==="ul"||Pn.name==="ol")){Pn.append(Kt);continue}if(Pn=Kt.next,Pn&&(Pn.name==="ul"||Pn.name==="ol")&&Pn.firstChild){Pn.insert(Kt,Pn.firstChild,!0);continue}const ao=new Oy("ul",1);et(ao),Kt.wrap(ao);continue}if(g.isValidChild(Kt.parent.name,"div")&&g.isValidChild("div",Kt.name)){const Pn=new Oy("div",1);et(Pn),Kt.wrap(Pn)}else Sx(Kt,g)}}},Cie=(c,g)=>{let $=c;for(;$;){if($.name===g)return!0;$=$.parent}return!1},M6=(c,g,$=g.parent)=>$?c.children[g.name]&&!c.isValidChild($.name,g.name)||g.name==="a"&&Cie($,"a")?!0:H$($)&&eC(g)?!(($==null?void 0:$.firstChild)===g&&($==null?void 0:$.lastChild)===g):!1:!1,lY=(c,g,$,et)=>{const rt=document.createRange();return rt.setStart(c,g),rt.setEnd($,et),rt},lp=c=>{const g=Uo.fromRangeStart(c),$=Uo.fromRangeEnd(c),et=c.commonAncestorContainer;return Zy(!1,et,$).map(rt=>!H1(g,$,et)&&H1(g,rt,et)?lY(g.container(),g.offset(),rt.container(),rt.offset()):c).getOr(c)},_O=c=>c.collapsed?c:lp(c),h5=c=>ln(c.firstChild)&&c.firstChild===c.lastChild,p5=c=>c.name==="br"||c.value===gm,g5=(c,g)=>c.getBlockElements()[g.name]&&h5(g)&&p5(g.firstChild),m5=(c,g)=>{const $=c.getNonEmptyElements();return ln(g)&&(g.isEmpty($)||g5(c,g))},W$=(c,g)=>{let $=g.firstChild,et=g.lastChild;return $&&$.name==="meta"&&($=$.next),et&&et.attr("id")==="mce_marker"&&(et=et.prev),m5(c,et)&&(et=et==null?void 0:et.prev),!$||$!==et?!1:$.name==="ul"||$.name==="ol"},kie=c=>{var g,$;const et=c.firstChild,rt=c.lastChild;return et&&et.nodeName==="META"&&((g=et.parentNode)===null||g===void 0||g.removeChild(et)),rt&&rt.id==="mce_marker"&&(($=rt.parentNode)===null||$===void 0||$.removeChild(rt)),c},Sie=(c,g,$)=>{const et=g.serialize($),rt=c.createFragment(et);return kie(rt)},Eie=c=>{var g;return Bn((g=c==null?void 0:c.childNodes)!==null&&g!==void 0?g:[],$=>$.nodeName==="LI")},Aie=c=>c.data===gm||tu(c),cY=c=>ln(c==null?void 0:c.firstChild)&&c.firstChild===c.lastChild&&Aie(c.firstChild),Tie=c=>!c.firstChild||cY(c),uY=c=>c.length>0&&Tie(c[c.length-1])?c.slice(0,-1):c,P6=(c,g)=>{const $=c.getParent(g,c.isBlock);return $&&$.nodeName==="LI"?$:null},Iie=(c,g)=>!!P6(c,g),dY=(c,g)=>{const $=g.cloneRange(),et=g.cloneRange();return $.setStartBefore(c),et.setEndAfter(c),[$.cloneContents(),et.cloneContents()]},Np=(c,g)=>{const $=Uo.before(c),rt=p0(g).next($);return rt?rt.toRange():null},O6=(c,g)=>{const $=Uo.after(c),rt=p0(g).prev($);return rt?rt.toRange():null},q$=(c,g,$,et)=>{const rt=dY(c,et),ut=c.parentNode;return ut&&(ut.insertBefore(rt[0],c),dr.each(g,pt=>{ut.insertBefore(pt,c)}),ut.insertBefore(rt[1],c),ut.removeChild(c)),O6(g[g.length-1],$)},fY=(c,g,$)=>{const et=c.parentNode;return et&&dr.each(g,rt=>{et.insertBefore(rt,c)}),Np(c,$)},hY=(c,g,$,et)=>(et.insertAfter(g.reverse(),c),O6(g[0],$)),pY=(c,g,$,et)=>{const rt=Sie(g,c,et),ut=P6(g,$.startContainer),pt=uY(Eie(rt.firstChild)),xt=1,Et=2,Ft=g.getRoot(),Vt=Kt=>{const en=Uo.fromRangeStart($),mn=p0(g.getRoot()),Sn=Kt===xt?mn.prev(en):mn.next(en),bn=Sn==null?void 0:Sn.getNode();return bn?P6(g,bn)!==ut:!0};return ut?Vt(xt)?fY(ut,pt,Ft):Vt(Et)?hY(ut,pt,Ft,g):q$(ut,pt,Ft,$):null},Ev=["pre"],G_=(c,g,$,et)=>{var rt;const ut=g.firstChild,pt=g.lastChild,xt=pt.attr("data-mce-type")==="bookmark"?pt.prev:pt,Et=ut===xt,Ft=yn(Ev,ut.name);if(Et&&Ft){const Vt=ut.attr("contenteditable")!=="false",Kt=((rt=c.getParent($,c.isBlock))===null||rt===void 0?void 0:rt.nodeName.toLowerCase())===ut.name,en=Xt.from($_(et,$)).forall(Qo);return Vt&&Kt&&en}else return!1},xO=o2,D6=(c,g,$)=>{if(ln($)){const et=c.getParent(g.endContainer,xO);return $===et&&jR(eo.fromDom($),g)}else return!1},N6=(c,g,$)=>{var et;if($.getAttribute("data-mce-bogus")==="all")(et=$.parentNode)===null||et===void 0||et.insertBefore(c.dom.createFragment(g),$);else{const rt=$.firstChild,ut=$.lastChild;!rt||rt===ut&&rt.nodeName==="BR"?c.dom.setHTML($,g):c.selection.setContent(g,{no_events:!0})}},wO=(c,g,$)=>{Xt.from(c.getParent(g,"td,th")).map(eo.fromDom).each(et=>yL(et,$))},Z$=(c,g)=>{const $=c.schema.getTextInlineElements(),et=c.dom;if(g){const rt=c.getBody(),ut=_S(c),pt="*[data-mce-fragment]",xt=et.select(pt);dr.each(xt,Et=>{const Ft=en=>ln($[en.nodeName.toLowerCase()]),Vt=en=>en.childNodes.length===1;if((en=>!(QB(et,en)||SK(et,en)))(Et)&&Ft(Et)&&Vt(Et)){const en=_I(et,Et),mn=(ao,po)=>Co(ao,wo=>yn(po,wo)),Sn=ao=>Vt(Et)&&et.is(ao,pt)&&Ft(ao)&&(ao.nodeName===Et.nodeName&&mn(en,_I(et,ao))||Sn(ao.children[0])),bn=ao=>ln(ao)&&ao!==rt&&(ut.compare(Et,ao)||bn(ao.parentElement)),Pn=ao=>ln(ao)&&ao!==rt&&et.is(ao,pt)&&(AK(et,Et,ao)||Pn(ao.parentElement));(Sn(Et.children[0])||bn(Et.parentElement)&&!Pn(Et.parentElement))&&et.remove(Et,!0)}})}},y5=c=>{let g=c;for(;g=g.walk();)g.type===1&&g.attr("data-mce-fragment","1")},CO=c=>{dr.each(c.getElementsByTagName("*"),g=>{g.removeAttribute("data-mce-fragment")})},L6=c=>!!c.getAttribute("data-mce-fragment"),K$=(c,g)=>ln(g)&&!c.schema.getVoidElements()[g.nodeName],b5=(c,g)=>{var $,et,rt;let ut;const pt=c.dom,xt=c.selection;if(!g)return;xt.scrollIntoView(g);const Et=$_(c.getBody(),g);if(Et&&pt.getContentEditable(Et)==="false"){pt.remove(g),xt.select(Et);return}let Ft=pt.createRng();const Vt=g.previousSibling;if(pr(Vt)){Ft.setStart(Vt,(et=($=Vt.nodeValue)===null||$===void 0?void 0:$.length)!==null&&et!==void 0?et:0);const mn=g.nextSibling;pr(mn)&&(Vt.appendData(mn.data),(rt=mn.parentNode)===null||rt===void 0||rt.removeChild(mn))}else Ft.setStartBefore(g),Ft.setEndBefore(g);const Kt=mn=>{let Sn=Uo.fromRangeStart(mn);return Sn=p0(c.getBody()).next(Sn),Sn==null?void 0:Sn.toRange()},en=pt.getParent(g,pt.isBlock);if(pt.remove(g),en&&pt.isEmpty(en)){const mn=xO(en);x_(eo.fromDom(en)),Ft.setStart(en,0),Ft.setEnd(en,0),!mn&&!L6(en)&&(ut=Kt(Ft))?(Ft=ut,pt.remove(en)):pt.add(en,pt.create("br",mn?{}:{"data-mce-bogus":"1"}))}xt.setRng(Ft)},gY=c=>{const g=c.dom,$=_O(c.selection.getRng());c.selection.setRng($);const et=g.getParent($.startContainer,xO);D6(g,$,et)?hO(c,$,eo.fromDom(et)):$.startContainer===$.endContainer&&$.endOffset-$.startOffset===1&&pr($.startContainer.childNodes[$.startOffset])?$.deleteContents():c.getDoc().execCommand("Delete",!1)},mY=c=>{for(let g=c;g;g=g.walk())if(g.attr("id")==="mce_marker")return Xt.some(g);return Xt.none()},Ex=(c,g,$)=>{var et;return Cn($.children(),eC)&&((et=c.getParent(g,c.isBlock))===null||et===void 0?void 0:et.nodeName)==="SUMMARY"},Av=(c,g,$)=>{var et,rt;const ut=c.selection,pt=c.dom,xt=c.parser,Et=$.merge,Ft=pS({validate:!0},c.schema),Vt='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';$.preserve_zwsp||(g=mv(g)),g.indexOf("{$caret}")===-1&&(g+="{$caret}"),g=g.replace(/\{\$caret\}/,Vt);let Kt=ut.getRng();const en=Kt.startContainer,mn=c.getBody();en===mn&&ut.isCollapsed()&&pt.isBlock(mn.firstChild)&&K$(c,mn.firstChild)&&pt.isEmpty(mn.firstChild)&&(Kt=pt.createRng(),Kt.setStart(mn.firstChild,0),Kt.setEnd(mn.firstChild,0),ut.setRng(Kt)),ut.isCollapsed()||gY(c);const Sn=ut.getNode(),bn={context:Sn.nodeName.toLowerCase(),data:$.data,insert:!0},Pn=xt.parse(g,bn);if($.paste===!0&&W$(c.schema,Pn)&&Iie(pt,Sn))return Kt=pY(Ft,pt,ut.getRng(),Pn),Kt&&ut.setRng(Kt),g;$.paste===!0&&G_(pt,Pn,Sn,c.getBody())&&((et=Pn.firstChild)===null||et===void 0||et.unwrap()),y5(Pn);let ao=Pn.lastChild;if(ao&&ao.attr("id")==="mce_marker"){const po=ao;for(ao=ao.prev;ao&&ao.name!=="table";ao=ao.walk(!0))if(ao.type===3||!pt.isBlock(ao.name)){ao.parent&&c.schema.isValidChild(ao.parent.name,"span")&&ao.parent.insert(po,ao,ao.name==="br");break}}if(c._selectionOverrides.showBlockCaretContainer(Sn),!bn.invalid&&!Ex(pt,Sn,Pn))g=Ft.serialize(Pn),N6(c,g,Sn);else{c.selection.setContent(Vt);let po=ut.getNode(),wo;const Io=c.getBody();for(Xx(po)?po=wo=Io:wo=po;wo&&wo!==Io;)po=wo,wo=wo.parentNode;g=po===Io?Io.innerHTML:pt.getOuterHTML(po);const sr=xt.parse(g),br=mY(sr),jr=br.bind(aY).getOr(sr);br.each(Hr=>Hr.replace(Pn));const Ko=Pn.children(),Fo=(rt=Pn.parent)!==null&&rt!==void 0?rt:sr;Pn.unwrap();const lr=Bn(Ko,Hr=>M6(c.schema,Hr,Fo));iu(lr,c.schema,jr),I6(xt.getNodeFilters(),xt.getAttributeFilters(),sr),g=Ft.serialize(sr),po===Io?pt.setHTML(Io,g):pt.setOuterHTML(po,g)}return Z$(c,Et),b5(c,pt.get("mce_marker")),CO(c.getBody()),wO(pt,ut.getStart(),c.schema),L0(c.schema,c.getBody(),ut.getStart()),g},CS=c=>c instanceof Oy,K1=c=>{vI(c)&&G0(c.getBody()).each(g=>{const $=g.getNode(),et=fv($)?G0($).getOr(g):g;c.selection.setRng(et.toRange())})},F6=(c,g,$)=>{c.dom.setHTML(c.getBody(),g),$!==!0&&K1(c)},_d=(c,g,$,et)=>{if($=mv($),$.length===0||/^\s+$/.test($)){const rt='<br data-mce-bogus="1">';g.nodeName==="TABLE"?$="<tr><td>"+rt+"</td></tr>":/^(UL|OL)$/.test(g.nodeName)&&($="<li>"+rt+"</li>");const ut=h0(c);return c.schema.isValidChild(g.nodeName.toLowerCase(),ut.toLowerCase())?($=rt,$=c.dom.createHTML(ut,gw(c),$)):$||($=rt),F6(c,$,et.no_selection),{content:$,html:$}}else{et.format!=="raw"&&($=pS({validate:!1},c.schema).serialize(c.parser.parse($,{isRootContent:!0,insert:!0})));const rt=dT(eo.fromDom(g))?$:dr.trim($);return F6(c,rt,et.no_selection),{content:rt,html:rt}}},yY=(c,g,$,et)=>{I6(c.parser.getNodeFilters(),c.parser.getAttributeFilters(),$);const rt=pS({validate:!1},c.schema).serialize($),ut=mv(dT(eo.fromDom(g))?rt:dr.trim(rt));return F6(c,ut,et.no_selection),{content:$,html:ut}},iA=(c,g,$)=>Xt.from(c.getBody()).map(et=>CS(g)?yY(c,et,g,$):_d(c,et,g,$)).getOr({content:g,html:CS($.content)?"":$.content}),kI=c=>Wt(c)?c:Dn,Y$=(c,g,$)=>{let et=c.dom;const rt=kI($);for(;et.parentNode;){et=et.parentNode;const ut=eo.fromDom(et),pt=g(ut);if(pt.isSome())return pt;if(rt(ut))break}return Xt.none()},v5=(c,g,$)=>{const et=g(c),rt=kI($);return et.orThunk(()=>rt(c)?Xt.none():Y$(c,g,rt))},_5=JT,X$=(c,g,$)=>{const et=c.formatter.get($);if(et)for(let rt=0;rt<et.length;rt++){const ut=et[rt];if(wv(ut)&&ut.inherit===!1&&c.dom.is(g,ut.selector))return!0}return!1},x5=(c,g,$,et,rt)=>{const ut=c.dom.getRoot();if(g===ut)return!1;const pt=c.dom.getParent(g,xt=>X$(c,xt,$)?!0:xt.parentNode===ut||!!Ax(c,xt,$,et,!0));return!!Ax(c,pt,$,et,rt)},kO=(c,g,$)=>jm($)&&_5(g,$.inline)||z_($)&&_5(g,$.block)?!0:wv($)?Fr(g)&&c.is(g,$.selector):!1,z6=(c,g,$,et,rt,ut)=>{const pt=$[et],xt=et==="attributes";if(Wt($.onmatch))return $.onmatch(g,$,et);if(pt){if(Ar(pt)){for(let Et=0;Et<pt.length;Et++)if(xt?c.getAttrib(g,pt[Et]):UR(c,g,pt[Et]))return!0}else for(const Et in pt)if(es(pt,Et)){const Ft=xt?c.getAttrib(g,Et):UR(c,g,Et),Vt=U2(pt[Et],ut),Kt=Mn(Ft)||Rl(Ft);if(Kt&&Mn(Vt))continue;if(rt&&Kt&&!$.exact||(!rt||$.exact)&&!_5(Ft,Ew(Vt,Et)))return!1}}return!0},Ax=(c,g,$,et,rt)=>{const ut=c.formatter.get($),pt=c.dom;if(ut&&Fr(g))for(let xt=0;xt<ut.length;xt++){const Et=ut[xt];if(kO(c.dom,g,Et)&&z6(pt,g,Et,"attributes",rt,et)&&z6(pt,g,Et,"styles",rt,et)){const Ft=Et.classes;if(Ft){for(let Vt=0;Vt<Ft.length;Vt++)if(!c.dom.hasClass(g,U2(Ft[Vt],et)))return}return Et}}},w5=(c,g,$,et,rt)=>{if(et)return x5(c,et,g,$,rt);if(et=c.selection.getNode(),x5(c,et,g,$,rt))return!0;const ut=c.selection.getStart();return!!(ut!==et&&x5(c,ut,g,$,rt))},J$=(c,g,$)=>{const et=[],rt={},ut=c.selection.getStart();return c.dom.getParent(ut,pt=>{for(let xt=0;xt<g.length;xt++){const Et=g[xt];!rt[Et]&&Ax(c,pt,Et,$)&&(rt[Et]=!0,et.push(Et))}},c.dom.getRoot()),et},SO=(c,g)=>{const $=rt=>ba(rt,eo.fromDom(c.getBody())),et=(rt,ut)=>Ax(c,rt.dom,ut)?Xt.some(ut):Xt.none();return Xt.from(c.selection.getStart(!0)).bind(rt=>v5(eo.fromDom(rt),ut=>Rs(g,pt=>et(ut,pt)),$)).getOrNull()},bY=(c,g)=>{const $=c.formatter.get(g),et=c.dom;if($&&c.selection.isEditable()){const rt=c.selection.getStart(),ut=V2(et,rt);for(let pt=$.length-1;pt>=0;pt--){const xt=$[pt];if(!wv(xt))return!0;for(let Et=ut.length-1;Et>=0;Et--)if(et.is(ut[Et],xt.selector))return!0}}return!1},vY=(c,g,$)=>Wn($,(et,rt)=>{const ut=IP(c,rt);return c.formatter.matchNode(g,rt,{},ut)?et.concat([rt]):et},[]),C5=Am,_Y=(c,g)=>c.importNode(g,!0),Q$=c=>{if(c){const g=new pm(c,c);for(let $=g.current();$;$=g.next())if(pr($))return $}return null},EO=c=>{const g=eo.fromTag("span");return Pp(g,{id:jT,"data-mce-bogus":"1","data-mce-type":"format-caret"}),c&&qp(g,eo.fromText(C5)),g},xY=c=>{const g=Q$(c);return g&&g.data.charAt(0)===C5&&g.deleteData(0,1),g},B6=(c,g,$)=>{const et=c.dom,rt=c.selection;if(PP(g))eA(c,!1,eo.fromDom(g),$,!0);else{const ut=rt.getRng(),pt=et.getParent(g,et.isBlock),xt=ut.startContainer,Et=ut.startOffset,Ft=ut.endContainer,Vt=ut.endOffset,Kt=xY(g);et.remove(g,!0),xt===Kt&&Et>0&&ut.setStart(Kt,Et-1),Ft===Kt&&Vt>0&&ut.setEnd(Kt,Vt-1),pt&&et.isEmpty(pt)&&P_(eo.fromDom(pt)),rt.setRng(ut)}},AO=(c,g,$)=>{const et=c.dom,rt=c.selection;if(g)B6(c,g,$);else if(g=z2(c.getBody(),rt.getStart()),!g)for(;g=et.get(jT);)B6(c,g,$)},wY=(c,g,$)=>{var et,rt;const ut=c.dom,pt=ut.getParent($,Tn(jE,c.schema));pt&&ut.isEmpty(pt)?(et=$.parentNode)===null||et===void 0||et.replaceChild(g,$):($3(eo.fromDom($)),ut.isEmpty($)?(rt=$.parentNode)===null||rt===void 0||rt.replaceChild(g,$):ut.insertAfter(g,$))},$6=(c,g)=>(c.appendChild(g),g),SI=(c,g)=>{var $;const et=Eo(c,(ut,pt)=>$6(ut,pt.cloneNode(!1)),g),rt=($=et.ownerDocument)!==null&&$!==void 0?$:document;return $6(et,rt.createTextNode(C5))},CY=(c,g,$,et,rt,ut)=>{const pt=c.formatter,xt=c.dom,Et=Bn(Yr(pt.get()),Kt=>Kt!==et&&!ms(Kt,"removeformat")),Ft=vY(c,$,Et);if(Bn(Ft,Kt=>!RP(c,Kt,et)).length>0){const Kt=$.cloneNode(!1);return xt.add(g,Kt),pt.remove(et,rt,Kt,ut),xt.remove(Kt),Xt.some(Kt)}else return Xt.none()},eG=c=>GC(c,$C(c).replace(new RegExp(`${gm}$`)," ")),G6=(c,g)=>{const $=()=>{g!==null&&!c.dom.isEmpty(g)&&cv(eo.fromDom(g)).each(et=>{vu(et)?eG(et):Zw(et,rt=>vu(rt)).each(rt=>{vu(rt)&&eG(rt)})})};c.once("input",et=>{et.data&&!$2(et.data)&&(et.isComposing?c.once("compositionend",()=>{$()}):$())})},kY=(c,g,$)=>{let et;const rt=c.selection,ut=c.formatter.get(g);if(!ut)return;const pt=rt.getRng();let xt=pt.startOffset;const Ft=pt.startContainer.nodeValue;et=z2(c.getBody(),rt.getStart());const Vt=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(Ft&&xt>0&&xt<Ft.length&&Vt.test(Ft.charAt(xt))&&Vt.test(Ft.charAt(xt-1))){const Kt=rt.getBookmark();pt.collapse(!0);let en=Aw(c.dom,pt,ut);en=ss(en),c.formatter.apply(g,$,en),rt.moveToBookmark(Kt)}else{let Kt=et?Q$(et):null;(!et||(Kt==null?void 0:Kt.data)!==C5)&&(et=_Y(c.getDoc(),EO(!0).dom),Kt=et.firstChild,pt.insertNode(et),xt=1,G6(c,et)),c.formatter.apply(g,$,et),rt.setCursorLocation(Kt,xt)}},tG=(c,g,$,et)=>{const rt=c.dom,ut=c.selection;let pt=!1;const xt=c.formatter.get(g);if(!xt)return;const Et=ut.getRng(),Ft=Et.startContainer,Vt=Et.startOffset;let Kt=Ft;pr(Ft)&&(Vt!==Ft.data.length&&(pt=!0),Kt=Kt.parentNode);const en=[];let mn;for(;Kt;){if(Ax(c,Kt,g,$,et)){mn=Kt;break}Kt.nextSibling&&(pt=!0),en.push(Kt),Kt=Kt.parentNode}if(mn)if(pt){const Sn=ut.getBookmark();Et.collapse(!0);let bn=Aw(rt,Et,xt,!0);bn=ss(bn),c.formatter.remove(g,$,bn,et),ut.moveToBookmark(Sn)}else{const Sn=z2(c.getBody(),mn),bn=ln(Sn)?rt.getParents(mn.parentNode,xo,Sn):[],Pn=EO(!1).dom;wY(c,Pn,Sn??mn);const ao=CY(c,Pn,mn,g,$,et),po=SI([...en,...ao.toArray(),...bn],Pn);Sn&&B6(c,Sn,ln(Sn)),ut.setCursorLocation(po,1),G6(c,Pn),rt.isEmpty(mn)&&rt.remove(mn)}},Y1=(c,g,$)=>{const et=c.selection,rt=c.getBody();AO(c,null,$),(g===8||g===46)&&et.isCollapsed()&&et.getStart().innerHTML===C5&&AO(c,z2(rt,et.getStart()),!0),(g===37||g===39)&&AO(c,z2(rt,et.getStart()),!0)},SY=c=>pr(c)&&Bl(c.data,gm),nG=c=>{c.on("mouseup keydown",g=>{Y1(c,g.keyCode,SY(c.selection.getRng().endContainer))})},TO=c=>{const g=EO(!1),$=SI(c,g.dom);return{caretContainer:g,caretPosition:Uo($,0)}},IO=(c,g)=>{const{caretContainer:$,caretPosition:et}=TO(g);return Iu(eo.fromDom(c),$),_u(eo.fromDom(c)),et},oG=(c,g)=>{const{caretContainer:$,caretPosition:et}=TO(g);return c.insertNode($.dom),et},j6=(c,g)=>{if(Yy(g.dom))return!1;const $=c.schema.getTextInlineElements();return es($,En(g))&&!Yy(g.dom)&&!P1(g.dom)},k5={},rG=Uy(["pre"]),sG=(c,g)=>{k5[c]||(k5[c]=[]),k5[c].push(g)},iG=(c,g)=>{es(k5,c)&&sn(k5[c],$=>{$(g)})};sG("pre",c=>{const g=c.selection.getRng(),$=rt=>ut=>{const pt=ut.previousSibling;return rG(pt)&&yn(rt,pt)},et=(rt,ut)=>{const pt=eo.fromDom(ut),xt=zv(pt).dom;_u(pt),Hv(eo.fromDom(rt),[eo.fromTag("br",xt),eo.fromTag("br",xt),...tm(pt)])};if(!g.collapsed){const rt=c.selection.getSelectedBlocks(),ut=Bn(Bn(rt,rG),$(rt));sn(ut,pt=>{et(pt.previousSibling,pt)})}});const s1=["fontWeight","fontStyle","color","fontSize","fontFamily"],EY=c=>Gt(c.styles)&&Cn(Yr(c.styles),g=>yn(s1,g)),AY=c=>Qn(c,g=>jm(g)&&g.inline==="span"&&EY(g)),TY=(c,g)=>{const $=c.get(g);return qt($)?AY($):Xt.none()},RO=(c,g)=>Ry(g,Uo.fromRangeStart(c)).isNone(),aG=(c,g)=>$0(g,Uo.fromRangeEnd(c)).exists($=>!tu($.getNode())||$0(g,$).isSome())===!1,IY=c=>g=>ky(g)&&c.isEditable(g),RY=c=>{const g=c.getSelectedBlocks(),$=c.getRng();if(c.isCollapsed())return[];if(g.length===1)return RO($,g[0])&&aG($,g[0])?g:[];{const et=wr(g).filter(pt=>RO($,pt)).toArray(),rt=gs(g).filter(pt=>aG($,pt)).toArray(),ut=g.slice(1,-1);return et.concat(ut).concat(rt)}},H6=c=>Bn(RY(c),IY(c.dom)),j_=c=>Bn(c.getSelectedBlocks(),IY(c.dom)),S5=dr.each,EI=c=>Fr(c)&&!My(c)&&!Yy(c)&&!P1(c),MO=(c,g)=>{for(let $=c;$;$=$[g]){if(pr($)&&Cs($.data))return c;if(Fr($)&&!My($))return $}return c},lG=(c,g,$)=>{const et=_S(c),rt=Hy(g)&&c.dom.isEditable(g),ut=Hy($)&&c.dom.isEditable($);if(rt&&ut){const pt=MO(g,"previousSibling"),xt=MO($,"nextSibling");if(et.compare(pt,xt)){for(let Et=pt.nextSibling;Et&&Et!==xt;){const Ft=Et;Et=Et.nextSibling,pt.appendChild(Ft)}return c.dom.remove(xt),dr.each(dr.grep(xt.childNodes),Et=>{pt.appendChild(Et)}),pt}}return $},U6=(c,g,$,et)=>{var rt;if(et&&g.merge_siblings!==!1){const ut=(rt=lG(c,HR(et),et))!==null&&rt!==void 0?rt:et;lG(c,ut,HR(ut,!0))}},MY=(c,g,$)=>{if(g.clear_child_styles){const et=g.links?"*:not(a)":"*";S5(c.select(et,$),rt=>{EI(rt)&&c.isEditable(rt)&&S5(g.styles,(ut,pt)=>{c.setStyle(rt,pt,"")})})}},PO=(c,g,$)=>{S5(c.childNodes,et=>{EI(et)&&(g(et)&&$(et),et.hasChildNodes()&&PO(et,g,$))})},V6=(c,g)=>{g.nodeName==="SPAN"&&c.getAttribs(g).length===0&&c.remove(g,!0)},cG=(c,g)=>$=>!!($&&UR(c,$,g)),W6=(c,g,$)=>et=>{c.setStyle(et,g,$),et.getAttribute("style")===""&&et.removeAttribute("style"),V6(c,et)},aA=vv.generate([{keep:[]},{rename:["name"]},{removed:[]}]),lA=/^(src|href|style)$/,OO=dr.each,DO=JT,uG=c=>/^(TR|TH|TD)$/.test(c.nodeName),dG=(c,g,$)=>c.isChildOf(g,$)&&g!==$&&!c.isBlock($),fG=(c,g,$)=>{let et=g[$?"startContainer":"endContainer"],rt=g[$?"startOffset":"endOffset"];if(Fr(et)){const ut=et.childNodes.length-1;!$&&rt&&rt--,et=et.childNodes[rt>ut?ut:rt]}return pr(et)&&$&&rt>=et.data.length&&(et=new pm(et,c.getBody()).next()||et),pr(et)&&!$&&rt===0&&(et=new pm(et,c.getBody()).prev()||et),et},hG=(c,g)=>{const $=g?"firstChild":"lastChild",et=c[$];return uG(c)&&et?c.nodeName==="TR"&&et[$]||et:c},q6=(c,g,$,et)=>{var rt;const ut=c.create($,et);return(rt=g.parentNode)===null||rt===void 0||rt.insertBefore(ut,g),ut.appendChild(g),ut},pG=(c,g,$,et,rt)=>{const ut=eo.fromDom(g),pt=eo.fromDom(c.create(et,rt)),xt=$?m_(ut):gC(ut);return Hv(pt,xt),$?(Iu(ut,pt),M1(pt,ut)):(fy(ut,pt),qp(pt,ut)),pt.dom},gG=(c,g)=>g.links&&c.nodeName==="A",mG=(c,g,$)=>{const et=g.parentNode;let rt;const ut=c.dom,pt=h0(c);z_($)&&et===ut.getRoot()&&(!$.list_block||!DO(g,$.list_block))&&sn(Ts(g.childNodes),xt=>{H2(c,pt,xt.nodeName.toLowerCase())?rt?rt.appendChild(xt):(rt=q6(ut,xt,pt),ut.setAttribs(rt,gw(c))):rt=null}),!(h8($)&&!DO($.inline,g))&&ut.remove(g,!0)},NO=(c,g,$)=>so(c)?{name:g,value:null}:{name:c,value:U2(g,$)},kS=(c,g)=>{c.getAttrib(g,"style")===""&&(g.removeAttribute("style"),g.removeAttribute("data-mce-style"))},yG=(c,g,$,et,rt)=>{let ut=!1;OO($.styles,(pt,xt)=>{const{name:Et,value:Ft}=NO(xt,pt,et),Vt=Ew(Ft,Et);($.remove_similar||Nt(Ft)||!Fr(rt)||DO(UR(c,rt,Et),Vt))&&c.setStyle(g,Et,""),ut=!0}),ut&&kS(c,g)},PY=(c,g,$)=>{g==="removeformat"?sn(j_(c.selection),et=>{sn(s1,rt=>c.dom.setStyle(et,rt,"")),kS(c.dom,et)}):TY(c.formatter,g).each(et=>{sn(j_(c.selection),rt=>yG(c.dom,rt,et,$,null))})},E5=(c,g,$,et,rt)=>{const ut=c.dom,pt=_S(c),xt=c.schema;if(jm(g)&&Bm(xt,g.inline)&&O1(xt,et)&&et.parentElement===c.getBody())return mG(c,et,g),aA.removed();if(!g.ceFalseOverride&&et&&ut.getContentEditableParent(et)==="false"||et&&!kO(ut,et,g)&&!gG(et,g))return aA.keep();const Et=et,Ft=g.preserve_attributes;if(jm(g)&&g.remove==="all"&&qt(Ft)){const Vt=Bn(ut.getAttribs(Et),Kt=>yn(Ft,Kt.name.toLowerCase()));if(ut.removeAllAttribs(Et),sn(Vt,Kt=>ut.setAttrib(Et,Kt.name,Kt.value)),Vt.length>0)return aA.rename("span")}if(g.remove!=="all"){yG(ut,Et,g,$,rt),OO(g.attributes,(Kt,en)=>{const{name:mn,value:Sn}=NO(en,Kt,$);if(g.remove_similar||Nt(Sn)||!Fr(rt)||DO(ut.getAttrib(rt,mn),Sn)){if(mn==="class"){const bn=ut.getAttrib(Et,mn);if(bn){let Pn="";if(sn(bn.split(/\s+/),ao=>{/mce\-\w+/.test(ao)&&(Pn+=(Pn?" ":"")+ao)}),Pn){ut.setAttrib(Et,mn,Pn);return}}}if(lA.test(mn)&&Et.removeAttribute("data-mce-"+mn),mn==="style"&&Uy(["li"])(Et)&&ut.getStyle(Et,"list-style-type")==="none"){Et.removeAttribute(mn),ut.setStyle(Et,"list-style-type","none");return}mn==="class"&&Et.removeAttribute("className"),Et.removeAttribute(mn)}}),OO(g.classes,Kt=>{Kt=U2(Kt,$),(!Fr(rt)||ut.hasClass(rt,Kt))&&ut.removeClass(Et,Kt)});const Vt=ut.getAttribs(Et);for(let Kt=0;Kt<Vt.length;Kt++){const en=Vt[Kt].nodeName;if(!pt.isAttributeInternal(en))return aA.keep()}}return g.remove!=="none"?(mG(c,Et,g),aA.removed()):aA.keep()},bG=(c,g,$,et,rt)=>{let ut;return g.parentNode&&sn(V2(c.dom,g.parentNode).reverse(),pt=>{if(!ut&&Fr(pt)&&pt.id!=="_start"&&pt.id!=="_end"){const xt=Ax(c,pt,$,et,rt);xt&&xt.split!==!1&&(ut=pt)}}),ut},vG=(c,g,$,et)=>E5(c,g,$,et,et).fold(cn(et),rt=>(c.dom.createFragment().appendChild(et),c.dom.rename(et,rt)),cn(null)),OY=(c,g,$,et,rt,ut,pt,xt)=>{var Et,Ft;let Vt,Kt;const en=c.dom;if($){const mn=$.parentNode;for(let Sn=et.parentNode;Sn&&Sn!==mn;Sn=Sn.parentNode){let bn=en.clone(Sn,!1);for(let Pn=0;Pn<g.length&&(bn=vG(c,g[Pn],xt,bn),bn!==null);Pn++);bn&&(Vt&&bn.appendChild(Vt),Kt||(Kt=bn),Vt=bn)}(!pt.mixed||!en.isBlock($))&&(et=(Et=en.split($,et))!==null&&Et!==void 0?Et:et),Vt&&Kt&&((Ft=rt.parentNode)===null||Ft===void 0||Ft.insertBefore(Vt,rt),Kt.appendChild(rt),jm(pt)&&U6(c,pt,xt,Vt))}return et},_G=(c,g,$,et,rt)=>{const ut=c.formatter.get(g),pt=ut[0],xt=c.dom,Et=c.selection,Ft=bn=>{const Pn=bG(c,bn,g,$,rt);return OY(c,ut,Pn,bn,bn,!0,pt,$)},Vt=bn=>My(bn)&&Fr(bn)&&(bn.id==="_start"||bn.id==="_end"),Kt=bn=>Cn(ut,Pn=>Tx(c,Pn,$,bn,bn)),en=bn=>{const Pn=Ts(bn.childNodes),po=Kt(bn)||Cn(ut,sr=>kO(xt,bn,sr)),wo=bn.parentNode;if(!po&&ln(wo)&&U1(pt)&&Kt(wo),pt.deep&&Pn.length)for(let sr=0;sr<Pn.length;sr++)en(Pn[sr]);sn(["underline","line-through","overline"],sr=>{Fr(bn)&&c.dom.getStyle(bn,"text-decoration")===sr&&bn.parentNode&&VR(xt,bn.parentNode)===sr&&Tx(c,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:sr}},void 0,bn)})},mn=bn=>{const Pn=xt.get(bn?"_start":"_end");if(Pn){let ao=Pn[bn?"firstChild":"lastChild"];return Vt(ao)&&(ao=ao[bn?"firstChild":"lastChild"]),pr(ao)&&ao.data.length===0&&(ao=bn?Pn.previousSibling||Pn.nextSibling:Pn.nextSibling||Pn.previousSibling),xt.remove(Pn,!0),ao}else return null},Sn=bn=>{let Pn,ao,po=Aw(xt,bn,ut,bn.collapsed);if(pt.split){if(po=ss(po),Pn=fG(c,po,!0),ao=fG(c,po),Pn!==ao){if(Pn=hG(Pn,!0),ao=hG(ao,!1),dG(xt,Pn,ao)){const Io=Xt.from(Pn.firstChild).getOr(Pn);Ft(pG(xt,Io,!0,"span",{id:"_start","data-mce-type":"bookmark"})),mn(!0);return}if(dG(xt,ao,Pn)){const Io=Xt.from(ao.lastChild).getOr(ao);Ft(pG(xt,Io,!1,"span",{id:"_end","data-mce-type":"bookmark"})),mn(!1);return}Pn=q6(xt,Pn,"span",{id:"_start","data-mce-type":"bookmark"}),ao=q6(xt,ao,"span",{id:"_end","data-mce-type":"bookmark"});const wo=xt.createRng();wo.setStartAfter(Pn),wo.setEndBefore(ao),cS(xt,wo,Io=>{sn(Io,sr=>{!My(sr)&&!My(sr.parentNode)&&Ft(sr)})}),Ft(Pn),Ft(ao),Pn=mn(!0),ao=mn()}else Pn=ao=Ft(Pn);po.startContainer=Pn.parentNode?Pn.parentNode:Pn,po.startOffset=xt.nodeIndex(Pn),po.endContainer=ao.parentNode?ao.parentNode:ao,po.endOffset=xt.nodeIndex(ao)+1}cS(xt,po,wo=>{sn(wo,en)})};if(et){if(j2(et)){const bn=xt.createRng();bn.setStartBefore(et),bn.setEndAfter(et),Sn(bn)}else Sn(et);WE(c,g,et,$);return}!Et.isCollapsed()||!jm(pt)||sS(c).length?(Sw(c,()=>iS(c,Sn),bn=>jm(pt)&&w5(c,g,$,bn)),c.nodeChanged()):tG(c,g,$,rt),PY(c,g,$),WE(c,g,et,$)},xG=(c,g,$,et,rt)=>{(et||c.selection.isEditable())&&_G(c,g,$,et,rt)},Tx=(c,g,$,et,rt)=>E5(c,g,$,et,rt).fold(Dn,ut=>(c.dom.rename(et,ut),!0),xo),Z6=dr.each,wG=(c,g,$,et)=>{const rt=ut=>{if(Hy(ut)&&Fr(ut.parentNode)&&c.isEditable(ut)){const pt=VR(c,ut.parentNode);c.getStyle(ut,"color")&&pt?c.setStyle(ut,"text-decoration",pt):c.getStyle(ut,"text-decoration")===pt&&c.setStyle(ut,"text-decoration",null)}};g.styles&&(g.styles.color||g.styles.textDecoration)&&(dr.walk(et,rt,"childNodes"),rt(et))},CG=(c,g,$,et)=>{if(g.styles&&g.styles.backgroundColor){const rt=cG(c,"fontSize");PO(et,ut=>rt(ut)&&c.isEditable(ut),W6(c,"backgroundColor",U2(g.styles.backgroundColor,$)))}},LO=(c,g,$,et)=>{if(jm(g)&&(g.inline==="sub"||g.inline==="sup")){const rt=cG(c,"fontSize");PO(et,pt=>rt(pt)&&c.isEditable(pt),W6(c,"fontSize",""));const ut=Bn(c.select(g.inline==="sup"?"sub":"sup",et),c.isEditable);c.remove(ut,!0)}},kG=(c,g,$,et)=>{Z6(g,rt=>{jm(rt)&&Z6(c.dom.select(rt.inline,et),ut=>{EI(ut)&&Tx(c,rt,$,ut,rt.exact?ut:null)}),MY(c.dom,rt,et)})},DY=(c,g,$,et,rt)=>{const ut=rt.parentNode;Ax(c,ut,$,et)&&Tx(c,g,et,rt)||g.merge_with_parents&&ut&&c.dom.getParent(ut,pt=>Ax(c,pt,$,et)?(Tx(c,g,et,rt),!0):!1)},A5=dr.each,NY=(c,g,$,et)=>{if(jM(c)&&jm(g)&&$.parentNode){const rt=k3(c.schema),ut=ZA(eo.fromDom($),pt=>Yy(pt.dom));return yl(rt,et)&&ym(c.schema,$.parentNode,{skipBogus:!1,includeZwsp:!0})&&!ut}else return!1},SG=(c,g,$,et)=>{if(A5($.styles,(rt,ut)=>{c.setStyle(g,ut,U2(rt,et))}),$.styles){const rt=c.getAttrib(g,"style");rt&&c.setAttrib(g,"data-mce-style",rt)}},FO=(c,g,$,et)=>{const rt=c.formatter.get(g),ut=rt[0],pt=!et&&c.selection.isCollapsed(),xt=c.dom,Et=c.selection,Ft=(Sn,bn=ut)=>{Wt(bn.onformat)&&bn.onformat(Sn,bn,$,et),SG(xt,Sn,bn,$),A5(bn.attributes,(Pn,ao)=>{xt.setAttrib(Sn,ao,U2(Pn,$))}),A5(bn.classes,Pn=>{const ao=U2(Pn,$);xt.hasClass(Sn,ao)||xt.addClass(Sn,ao)})},Vt=(Sn,bn)=>{let Pn=!1;return A5(Sn,ao=>wv(ao)?xt.getContentEditable(bn)==="false"&&!ao.ceFalseOverride||ln(ao.collapsed)&&ao.collapsed!==pt?!0:xt.is(bn,ao.selector)&&!Yy(bn)?(Ft(bn,ao),Pn=!0,!1):!0:!1),Pn},Kt=Sn=>{if(Tt(Sn)){const bn=xt.create(Sn);return Ft(bn),bn}else return null},en=(Sn,bn,Pn)=>{const ao=[];let po=!0;const wo=ut.inline||ut.block,Io=Kt(wo),sr=Ko=>MP(ut)&&Ax(c,Ko,g,$),br=(Ko,Fo,lr)=>{const Hr=QT(ut)&&jE(c.schema,Ko)&&H2(c,Fo,wo);return lr&&Hr},jr=(Ko,Fo,lr,Hr)=>{const bs=Ko.nodeName.toLowerCase(),Al=H2(c,wo,bs)&&H2(c,Fo,wo),Tl=!Pn&&pr(Ko)&&hE(Ko.data),du=Yy(Ko),Au=!jm(ut)||!Sn.isBlock(Ko);return(lr||Hr)&&Al&&!Tl&&!du&&Au};cS(Sn,bn,Ko=>{let Fo;const lr=Hr=>{let bs=!1,Al=po,Tl=!1;const du=Hr.parentNode,Au=du.nodeName.toLowerCase(),Wp=Sn.getContentEditable(Hr);ln(Wp)&&(Al=po,po=Wp==="true",bs=!0,Tl=f8(c,Hr));const T0=po&&!bs;if(tu(Hr)&&!NY(c,ut,Hr,Au)){Fo=null,z_(ut)&&Sn.remove(Hr);return}if(sr(Hr)){Fo=null;return}if(br(Hr,Au,T0)){const Xp=Sn.rename(Hr,wo);Ft(Xp),ao.push(Xp),Fo=null;return}if(wv(ut)){let Xp=Vt(rt,Hr);if(!Xp&&ln(du)&&U1(ut)&&(Xp=Vt(rt,du)),!jm(ut)||Xp){Fo=null;return}}ln(Io)&&jr(Hr,Au,T0,Tl)?(Fo||(Fo=Sn.clone(Io,!1),du.insertBefore(Fo,Hr),ao.push(Fo)),Tl&&bs&&(po=Al),Fo.appendChild(Hr)):(Fo=null,sn(Ts(Hr.childNodes),lr),bs&&(po=Al),Fo=null)};sn(Ko,lr)}),ut.links===!0&&sn(ao,Ko=>{const Fo=lr=>{lr.nodeName==="A"&&Ft(lr,ut),sn(Ts(lr.childNodes),Fo)};Fo(Ko)}),sn(ao,Ko=>{const Fo=bs=>{let Al=0;return sn(bs.childNodes,Tl=>{!XT(Tl)&&!My(Tl)&&Al++}),Al},lr=bs=>Qn(bs.childNodes,Zl).filter(Tl=>Sn.getContentEditable(Tl)!=="false"&&kO(Sn,Tl,ut)).map(Tl=>{const du=Sn.clone(Tl,!1);return Ft(du),Sn.replace(du,bs,!0),Sn.remove(Tl,!0),du}).getOr(bs),Hr=Fo(Ko);if((ao.length>1||!Sn.isBlock(Ko))&&Hr===0){Sn.remove(Ko,!0);return}(jm(ut)||z_(ut)&&ut.wrapper)&&(!ut.exact&&Hr===1&&(Ko=lr(Ko)),kG(c,rt,$,Ko),DY(c,ut,g,$,Ko),CG(Sn,ut,$,Ko),wG(Sn,ut,$,Ko),LO(Sn,ut,$,Ko),U6(c,ut,$,Ko))})},mn=j2(et)?et:Et.getNode();if(xt.getContentEditable(mn)==="false"&&!f8(c,mn)){et=mn,Vt(rt,et),Jy(c,g,et,$);return}if(ut){if(et)if(j2(et)){if(!Vt(rt,et)){const Sn=xt.createRng();Sn.setStartBefore(et),Sn.setEndAfter(et),en(xt,Aw(xt,Sn,rt),!0)}}else en(xt,et,!0);else!pt||!jm(ut)||sS(c).length?(Et.setRng(_O(Et.getRng())),Sw(c,()=>{iS(c,(Sn,bn)=>{const Pn=bn?Sn:Aw(xt,Sn,rt);en(xt,Pn,!1)})},xo),c.nodeChanged()):kY(c,g,$),TY(c.formatter,g).each(Sn=>{sn(H6(c.selection),bn=>SG(xt,bn,Sn,$))});iG(g,c)}Jy(c,g,et,$)},K6=(c,g,$,et)=>{(et||c.selection.isEditable())&&FO(c,g,$,et)},zO=c=>es(c,"vars"),LY=(c,g)=>{c.set({}),g.on("NodeChange",$=>{X6(g,$.element,c.get())}),g.on("FormatApply FormatRemove",$=>{const et=Xt.from($.node).map(rt=>j2(rt)?rt:rt.startContainer).bind(rt=>Fr(rt)?Xt.some(rt):Xt.from(rt.parentElement)).getOrThunk(()=>EG(g));X6(g,et,c.get())})},EG=c=>c.selection.getStart(),Y6=(c,g,$,et,rt)=>Rn(g,xt=>{const Et=c.formatter.matchNode(xt,$,rt??{},et);return!fn(Et)},xt=>X$(c,xt,$)?!0:et?!1:ln(c.formatter.matchNode(xt,$,rt,!0))),BO=(c,g)=>{const $=g??EG(c);return Bn(V2(c.dom,$),et=>Fr(et)&&!P1(et))},X6=(c,g,$)=>{const et=BO(c,g);or($,(rt,ut)=>{const pt=xt=>{const Et=Y6(c,et,ut,xt.similar,zO(xt)?xt.vars:void 0),Ft=Et.isSome();if(xt.state.get()!==Ft){xt.state.set(Ft);const Vt=Et.getOr(g);zO(xt)?xt.callback(Ft,{node:Vt,format:ut,parents:et}):sn(xt.callbacks,Kt=>Kt(Ft,{node:Vt,format:ut,parents:et}))}};sn([rt.withSimilar,rt.withoutSimilar],pt),sn(rt.withVars,pt)})},FY=(c,g,$,et,rt,ut)=>{const pt=g.get();sn($.split(","),xt=>{const Et=$a(pt,xt).getOrThunk(()=>{const Vt={withSimilar:{state:Ru(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ru(!1),similar:!1,callbacks:[]},withVars:[]};return pt[xt]=Vt,Vt}),Ft=()=>{const Vt=BO(c);return Y6(c,Vt,xt,rt,ut).isSome()};if(fn(ut)){const Vt=rt?Et.withSimilar:Et.withoutSimilar;Vt.callbacks.push(et),Vt.callbacks.length===1&&Vt.state.set(Ft())}else Et.withVars.push({state:Ru(Ft()),similar:rt,vars:ut,callback:et})}),g.set(pt)},zY=(c,g,$)=>{const et=c.get();sn(g.split(","),rt=>$a(et,rt).each(ut=>{et[rt]={withSimilar:{...ut.withSimilar,callbacks:Bn(ut.withSimilar.callbacks,pt=>pt!==$)},withoutSimilar:{...ut.withoutSimilar,callbacks:Bn(ut.withoutSimilar.callbacks,pt=>pt!==$)},withVars:Bn(ut.withVars,pt=>pt.callback!==$)}})),c.set(et)},BY=(c,g,$,et,rt,ut)=>(FY(c,g,$,et,rt,ut),{unbind:()=>zY(g,$,et)}),$O=(c,g,$,et)=>{const rt=c.formatter.get(g);rt&&(w5(c,g,$,et)&&(!("toggle"in rt[0])||rt[0].toggle)?xG(c,g,$,et):K6(c,g,$,et))},Pw=dr.explode,AG=()=>{const c={};return{addFilter:(rt,ut)=>{sn(Pw(rt),pt=>{es(c,pt)||(c[pt]={name:pt,callbacks:[]}),c[pt].callbacks.push(ut)})},getFilters:()=>uu(c),removeFilter:(rt,ut)=>{sn(Pw(rt),pt=>{if(es(c,pt))if(ln(ut)){const xt=c[pt],Et=Bn(xt.callbacks,Ft=>Ft!==ut);Et.length>0?xt.callbacks=Et:delete c[pt]}else delete c[pt]})}}},J6=(c,g)=>{sn(g,$=>{c.attr($,null)})},lm=(c,g,$)=>{c.addNodeFilter("font",et=>{sn(et,rt=>{const ut=g.parse(rt.attr("style")),pt=rt.attr("color"),xt=rt.attr("face"),Et=rt.attr("size");pt&&(ut.color=pt),xt&&(ut["font-family"]=xt),Et&&Ep(Et).each(Ft=>{ut["font-size"]=$[Ft-1]}),rt.name="span",rt.attr("style",g.serialize(ut)),J6(rt,["color","face","size"])})})},Q6=(c,g,$)=>{c.addNodeFilter("strike",et=>{const rt=g.type!=="html4";sn(et,ut=>{if(rt)ut.name="s";else{const pt=$.parse(ut.attr("style"));pt["text-decoration"]="line-through",ut.name="span",ut.attr("style",$.serialize(pt))}})})},eF=(c,g,$)=>{var et;const rt=rw();g.convert_fonts_to_spans&&lm(c,rt,dr.explode((et=g.font_size_legacy_values)!==null&&et!==void 0?et:"")),Q6(c,$,rt)},tC=(c,g,$)=>{g.inline_styles&&eF(c,g,$)},TG=c=>fetch(c).then(g=>g.ok?g.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${c} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),IG=c=>{const g=/([a-z0-9+\/=\s]+)/i.exec(c);return g?g[1]:""},cA=c=>{const[g,...$]=c.split(","),et=$.join(","),rt=/data:([^/]+\/[^;]+)(;.+)?/.exec(g);if(rt){const ut=rt[2]===";base64",pt=ut?IG(et):decodeURIComponent(et);return Xt.some({type:rt[1],data:pt,base64Encoded:ut})}else return Xt.none()},RG=(c,g,$=!0)=>{let et=g;if($)try{et=atob(g)}catch{return Xt.none()}const rt=new Uint8Array(et.length);for(let ut=0;ut<rt.length;ut++)rt[ut]=et.charCodeAt(ut);return Xt.some(new Blob([rt],{type:c}))},$Y=c=>new Promise((g,$)=>{cA(c).bind(({type:et,data:rt,base64Encoded:ut})=>RG(et,rt,ut)).fold(()=>$("Invalid data URI"),g)}),AI=c=>As(c,"blob:")?TG(c):As(c,"data:")?$Y(c):Promise.reject("Unknown URI format"),MG=c=>new Promise((g,$)=>{const et=new FileReader;et.onloadend=()=>{g(et.result)},et.onerror=()=>{var rt;$((rt=et.error)===null||rt===void 0?void 0:rt.message)},et.readAsDataURL(c)});let uA=0;const GY=c=>"blobid"+uA++,nC=(c,g,$)=>cA(c).bind(({data:et,type:rt,base64Encoded:ut})=>{if(g&&!ut)return Xt.none();{const pt=ut?et:btoa(et);return $(pt,rt)}}),PG=(c,g,$)=>{const et=c.create(GY(),g,$);return c.add(et),et},i1=(c,g,$=!1)=>nC(g,$,(et,rt)=>Xt.from(c.getByData(et,rt)).orThunk(()=>RG(rt,et).map(ut=>PG(c,ut,et)))),T5=(c,g)=>{const $=()=>Promise.reject("Invalid data URI");if(As(g,"blob:")){const et=c.getByUri(g);return ln(et)?Promise.resolve(et):AI(g).then(rt=>MG(rt).then(ut=>nC(ut,!1,pt=>Xt.some(PG(c,rt,pt))).getOrThunk($)))}else return As(g,"data:")?i1(c,g).fold($,et=>Promise.resolve(et)):Promise.reject("Unknown image data format")},tF=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,nF=c=>Xt.from(c.match(tF)).bind(g=>us(g,1)).map(g=>As(g,"www.")?g.substring(4):g),OG=(c,g)=>{Xt.from(c.attr("src")).bind(nF).forall($=>!yn(g,$))&&c.attr("sandbox","")},TI=(c,g)=>As(c,`${g}/`),jY=c=>fn(c)?"iframe":TI(c,"image")?"img":TI(c,"video")?"video":TI(c,"audio")?"audio":"iframe",H_=({type:c,src:g,width:$,height:et}={},rt,ut)=>{const pt=jY(c),xt=new Oy(pt,1);return xt.attr(pt==="audio"?{src:g}:{src:g,width:$,height:et}),(pt==="audio"||pt==="video")&&xt.attr("controls",""),pt==="iframe"&&rt&&OG(xt,ut),xt},GO=c=>ln(c.attr("data-mce-bogus")),DG=c=>c.attr("src")===Xr.transparentSrc||ln(c.attr("data-mce-placeholder")),oF=(c,g)=>{const{blob_cache:$}=g;if($){const et=rt=>{const ut=rt.attr("src");DG(rt)||GO(rt)||Mn(ut)||i1($,ut,!0).each(pt=>{rt.attr("src",pt.blobUri())})};c.addAttributeFilter("src",rt=>sn(rt,et))}},rF=(c,g)=>{var $,et;const rt=c.schema;c.addAttributeFilter("href",Et=>{let Ft=Et.length;const Vt=en=>en.split(" ").filter(Sn=>Sn.length>0).concat(["noopener"]).sort().join(" "),Kt=en=>{const mn=en?dr.trim(en):"";return/\b(noopener)\b/g.test(mn)?mn:Vt(mn)};if(!g.allow_unsafe_link_target)for(;Ft--;){const en=Et[Ft];en.name==="a"&&en.attr("target")==="_blank"&&en.attr("rel",Kt(en.attr("rel")))}}),g.allow_html_in_named_anchor||c.addAttributeFilter("id,name",Et=>{let Ft=Et.length,Vt,Kt,en,mn;for(;Ft--;)if(mn=Et[Ft],mn.name==="a"&&mn.firstChild&&!mn.attr("href"))for(en=mn.parent,Vt=mn.lastChild;Vt&&en;)Kt=Vt.prev,en.insert(Vt,mn),Vt=Kt}),g.fix_list_elements&&c.addNodeFilter("ul,ol",Et=>{let Ft=Et.length,Vt,Kt;for(;Ft--;)if(Vt=Et[Ft],Kt=Vt.parent,Kt&&(Kt.name==="ul"||Kt.name==="ol"))if(Vt.prev&&Vt.prev.name==="li")Vt.prev.append(Vt);else{const en=new Oy("li",1);en.attr("style","list-style-type: none"),Vt.wrap(en)}});const ut=rt.getValidClasses();g.validate&&ut&&c.addAttributeFilter("class",Et=>{var Ft;let Vt=Et.length;for(;Vt--;){const Kt=Et[Vt],en=(Ft=Kt.attr("class"))!==null&&Ft!==void 0?Ft:"",mn=dr.explode(en," ");let Sn="";for(let bn=0;bn<mn.length;bn++){const Pn=mn[bn];let ao=!1,po=ut["*"];po&&po[Pn]&&(ao=!0),po=ut[Kt.name],!ao&&po&&po[Pn]&&(ao=!0),ao&&(Sn&&(Sn+=" "),Sn+=Pn)}Sn.length||(Sn=null),Kt.attr("class",Sn)}}),oF(c,g);const pt=($=g.sandbox_iframes)!==null&&$!==void 0?$:!1,xt=Cl((et=g.sandbox_iframes_exclusions)!==null&&et!==void 0?et:[]);g.convert_unsafe_embeds&&c.addNodeFilter("object,embed",Et=>sn(Et,Ft=>{Ft.replace(H_({type:Ft.attr("type"),src:Ft.name==="object"?Ft.attr("data"):Ft.attr("src"),width:Ft.attr("width"),height:Ft.attr("height")},pt,xt))})),pt&&c.addNodeFilter("iframe",Et=>sn(Et,Ft=>OG(Ft,xt)))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:SS,setPrototypeOf:jO,isFrozen:HY,getPrototypeOf:NG,getOwnPropertyDescriptor:UY}=Object;let{freeze:Tv,seal:U_,create:LG}=Object,{apply:dA,construct:sF}=typeof Reflect<"u"&&Reflect;Tv||(Tv=function(g){return g}),U_||(U_=function(g){return g}),dA||(dA=function(g,$,et){return g.apply($,et)}),sF||(sF=function(g,$){return new g(...$)});const I5=X1(Array.prototype.forEach),HO=X1(Array.prototype.pop),R5=X1(Array.prototype.push),M5=X1(String.prototype.toLowerCase),UO=X1(String.prototype.toString),FG=X1(String.prototype.match),P5=X1(String.prototype.replace),VY=X1(String.prototype.indexOf),WY=X1(String.prototype.trim),Ix=X1(Object.prototype.hasOwnProperty),Iv=X1(RegExp.prototype.test),O5=qY(TypeError);function X1(c){return function(g){for(var $=arguments.length,et=new Array($>1?$-1:0),rt=1;rt<$;rt++)et[rt-1]=arguments[rt];return dA(c,g,et)}}function qY(c){return function(){for(var g=arguments.length,$=new Array(g),et=0;et<g;et++)$[et]=arguments[et];return sF(c,$)}}function _f(c,g){let $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:M5;jO&&jO(c,null);let et=g.length;for(;et--;){let rt=g[et];if(typeof rt=="string"){const ut=$(rt);ut!==rt&&(HY(g)||(g[et]=ut),rt=ut)}c[rt]=!0}return c}function ZY(c){for(let g=0;g<c.length;g++)Ix(c,g)||(c[g]=null);return c}function fA(c){const g=LG(null);for(const[$,et]of SS(c))Ix(c,$)&&(Array.isArray(et)?g[$]=ZY(et):et&&typeof et=="object"&&et.constructor===Object?g[$]=fA(et):g[$]=et);return g}function D5(c,g){for(;c!==null;){const et=UY(c,g);if(et){if(et.get)return X1(et.get);if(typeof et.value=="function")return X1(et.value)}c=NG(c)}function $(){return null}return $}const iF=Tv(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),aF=Tv(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ES=Tv(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),KY=Tv(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),lF=Tv(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),YY=Tv(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zG=Tv(["#text"]),cF=Tv(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),uF=Tv(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),BG=Tv(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),VO=Tv(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),XY=U_(/\{\{[\w\W]*|[\w\W]*\}\}/gm),JY=U_(/<%[\w\W]*|[\w\W]*%>/gm),QY=U_(/\${[\w\W]*}/gm),eX=U_(/^data-[\-\w.\u00B7-\uFFFF]/),tX=U_(/^aria-[\-\w]+$/),$G=U_(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),nX=U_(/^(?:\w+script|data):/i),dF=U_(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),fF=U_(/^html$/i),Rie=U_(/^[a-z][.\w]*(-[.\w]+)+$/i);var II=Object.freeze({__proto__:null,MUSTACHE_EXPR:XY,ERB_EXPR:JY,TMPLIT_EXPR:QY,DATA_ATTR:eX,ARIA_ATTR:tX,IS_ALLOWED_URI:$G,IS_SCRIPT_OR_DATA:nX,ATTR_WHITESPACE:dF,DOCTYPE_NAME:fF,CUSTOM_ELEMENT:Rie});const N5={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Mie=function(){return typeof window>"u"?null:window},Pie=function(g,$){if(typeof g!="object"||typeof g.createPolicy!="function")return null;let et=null;const rt="data-tt-policy-suffix";$&&$.hasAttribute(rt)&&(et=$.getAttribute(rt));const ut="dompurify"+(et?"#"+et:"");try{return g.createPolicy(ut,{createHTML(pt){return pt},createScriptURL(pt){return pt}})}catch{return console.warn("TrustedTypes policy "+ut+" could not be created."),null}};function oX(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mie();const g=zl=>oX(zl);if(g.version="3.1.7",g.removed=[],!c||!c.document||c.document.nodeType!==N5.document)return g.isSupported=!1,g;let{document:$}=c;const et=$,rt=et.currentScript,{DocumentFragment:ut,HTMLTemplateElement:pt,Node:xt,Element:Et,NodeFilter:Ft,NamedNodeMap:Vt=c.NamedNodeMap||c.MozNamedAttrMap,HTMLFormElement:Kt,DOMParser:en,trustedTypes:mn}=c,Sn=Et.prototype,bn=D5(Sn,"cloneNode"),Pn=D5(Sn,"remove"),ao=D5(Sn,"nextSibling"),po=D5(Sn,"childNodes"),wo=D5(Sn,"parentNode");if(typeof pt=="function"){const zl=$.createElement("template");zl.content&&zl.content.ownerDocument&&($=zl.content.ownerDocument)}let Io,sr="";const{implementation:br,createNodeIterator:jr,createDocumentFragment:Ko,getElementsByTagName:Fo}=$,{importNode:lr}=et;let Hr={};g.isSupported=typeof SS=="function"&&typeof wo=="function"&&br&&br.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:bs,ERB_EXPR:Al,TMPLIT_EXPR:Tl,DATA_ATTR:du,ARIA_ATTR:Au,IS_SCRIPT_OR_DATA:Wp,ATTR_WHITESPACE:T0,CUSTOM_ELEMENT:Xp}=II;let{IS_ALLOWED_URI:Tr}=II,ps=null;const ou=_f({},[...iF,...aF,...ES,...lF,...zG]);let zr=null;const Ms=_f({},[...cF,...uF,...BG,...VO]);let Ps=Object.seal(LG(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Or=null,Il=null,Fl=!0,Cm=!0,$u=!1,I0=!0,nv=!1,zx=!0,ay=!1,f1=!1,a_=!1,H0=!1,ov=!1,hs=!1,Kl=!0,Lp=!1;const km="user-content-";let qm=!0,Sm=!1,kp={},Rp=null;const Fy=_f({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let l_=null;const Bx=_f({},["audio","video","img","source","image","track"]);let K_=null;const $A=_f({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),HS="http://www.w3.org/1998/Math/MathML",cC="http://www.w3.org/2000/svg",Pv="http://www.w3.org/1999/xhtml";let uC=Pv,f3=!1,GA=null;const $N=_f({},[HS,cC,Pv],UO);let jA=null;const Uz=["application/xhtml+xml","text/html"],BZ="text/html";let U0=null,c_=null;const GN=$.createElement("form"),Lo=function(zo){return zo instanceof RegExp||zo instanceof Function},No=function(){let zo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(c_&&c_===zo)){if((!zo||typeof zo!="object")&&(zo={}),zo=fA(zo),jA=Uz.indexOf(zo.PARSER_MEDIA_TYPE)===-1?BZ:zo.PARSER_MEDIA_TYPE,U0=jA==="application/xhtml+xml"?UO:M5,ps=Ix(zo,"ALLOWED_TAGS")?_f({},zo.ALLOWED_TAGS,U0):ou,zr=Ix(zo,"ALLOWED_ATTR")?_f({},zo.ALLOWED_ATTR,U0):Ms,GA=Ix(zo,"ALLOWED_NAMESPACES")?_f({},zo.ALLOWED_NAMESPACES,UO):$N,K_=Ix(zo,"ADD_URI_SAFE_ATTR")?_f(fA($A),zo.ADD_URI_SAFE_ATTR,U0):$A,l_=Ix(zo,"ADD_DATA_URI_TAGS")?_f(fA(Bx),zo.ADD_DATA_URI_TAGS,U0):Bx,Rp=Ix(zo,"FORBID_CONTENTS")?_f({},zo.FORBID_CONTENTS,U0):Fy,Or=Ix(zo,"FORBID_TAGS")?_f({},zo.FORBID_TAGS,U0):{},Il=Ix(zo,"FORBID_ATTR")?_f({},zo.FORBID_ATTR,U0):{},kp=Ix(zo,"USE_PROFILES")?zo.USE_PROFILES:!1,Fl=zo.ALLOW_ARIA_ATTR!==!1,Cm=zo.ALLOW_DATA_ATTR!==!1,$u=zo.ALLOW_UNKNOWN_PROTOCOLS||!1,I0=zo.ALLOW_SELF_CLOSE_IN_ATTR!==!1,nv=zo.SAFE_FOR_TEMPLATES||!1,zx=zo.SAFE_FOR_XML!==!1,ay=zo.WHOLE_DOCUMENT||!1,H0=zo.RETURN_DOM||!1,ov=zo.RETURN_DOM_FRAGMENT||!1,hs=zo.RETURN_TRUSTED_TYPE||!1,a_=zo.FORCE_BODY||!1,Kl=zo.SANITIZE_DOM!==!1,Lp=zo.SANITIZE_NAMED_PROPS||!1,qm=zo.KEEP_CONTENT!==!1,Sm=zo.IN_PLACE||!1,Tr=zo.ALLOWED_URI_REGEXP||$G,uC=zo.NAMESPACE||Pv,Ps=zo.CUSTOM_ELEMENT_HANDLING||{},zo.CUSTOM_ELEMENT_HANDLING&&Lo(zo.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ps.tagNameCheck=zo.CUSTOM_ELEMENT_HANDLING.tagNameCheck),zo.CUSTOM_ELEMENT_HANDLING&&Lo(zo.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ps.attributeNameCheck=zo.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),zo.CUSTOM_ELEMENT_HANDLING&&typeof zo.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ps.allowCustomizedBuiltInElements=zo.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),nv&&(Cm=!1),ov&&(H0=!0),kp&&(ps=_f({},zG),zr=[],kp.html===!0&&(_f(ps,iF),_f(zr,cF)),kp.svg===!0&&(_f(ps,aF),_f(zr,uF),_f(zr,VO)),kp.svgFilters===!0&&(_f(ps,ES),_f(zr,uF),_f(zr,VO)),kp.mathMl===!0&&(_f(ps,lF),_f(zr,BG),_f(zr,VO))),zo.ADD_TAGS&&(ps===ou&&(ps=fA(ps)),_f(ps,zo.ADD_TAGS,U0)),zo.ADD_ATTR&&(zr===Ms&&(zr=fA(zr)),_f(zr,zo.ADD_ATTR,U0)),zo.ADD_URI_SAFE_ATTR&&_f(K_,zo.ADD_URI_SAFE_ATTR,U0),zo.FORBID_CONTENTS&&(Rp===Fy&&(Rp=fA(Rp)),_f(Rp,zo.FORBID_CONTENTS,U0)),qm&&(ps["#text"]=!0),ay&&_f(ps,["html","head","body"]),ps.table&&(_f(ps,["tbody"]),delete Or.tbody),zo.TRUSTED_TYPES_POLICY){if(typeof zo.TRUSTED_TYPES_POLICY.createHTML!="function")throw O5('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof zo.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw O5('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Io=zo.TRUSTED_TYPES_POLICY,sr=Io.createHTML("")}else Io===void 0&&(Io=Pie(mn,rt)),Io!==null&&typeof sr=="string"&&(sr=Io.createHTML(""));Tv&&Tv(zo),c_=zo}},Ir=_f({},["mi","mo","mn","ms","mtext"]),_r=_f({},["annotation-xml"]),Is=_f({},["title","style","font","a","script"]),ru=_f({},[...aF,...ES,...KY]),Fp=_f({},[...lF,...YY]),$x=function(zo){let xs=wo(zo);(!xs||!xs.tagName)&&(xs={namespaceURI:uC,tagName:"template"});const wl=M5(zo.tagName),h=M5(xs.tagName);return GA[zo.namespaceURI]?zo.namespaceURI===cC?xs.namespaceURI===Pv?wl==="svg":xs.namespaceURI===HS?wl==="svg"&&(h==="annotation-xml"||Ir[h]):!!ru[wl]:zo.namespaceURI===HS?xs.namespaceURI===Pv?wl==="math":xs.namespaceURI===cC?wl==="math"&&_r[h]:!!Fp[wl]:zo.namespaceURI===Pv?xs.namespaceURI===cC&&!_r[h]||xs.namespaceURI===HS&&!Ir[h]?!1:!Fp[wl]&&(Is[wl]||!ru[wl]):!!(jA==="application/xhtml+xml"&&GA[zo.namespaceURI]):!1},u_=function(zo){R5(g.removed,{element:zo});try{wo(zo).removeChild(zo)}catch{Pn(zo)}},HA=function(zo,xs){try{R5(g.removed,{attribute:xs.getAttributeNode(zo),from:xs})}catch{R5(g.removed,{attribute:null,from:xs})}if(xs.removeAttribute(zo),zo==="is"&&!zr[zo])if(H0||ov)try{u_(xs)}catch{}else try{xs.setAttribute(zo,"")}catch{}},$Z=function(zo){let xs=null,wl=null;if(a_)zo="<remove></remove>"+zo;else{const nt=FG(zo,/^[\r\n\t ]+/);wl=nt&&nt[0]}jA==="application/xhtml+xml"&&uC===Pv&&(zo='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+zo+"</body></html>");const h=Io?Io.createHTML(zo):zo;if(uC===Pv)try{xs=new en().parseFromString(h,jA)}catch{}if(!xs||!xs.documentElement){xs=br.createDocument(uC,"template",null);try{xs.documentElement.innerHTML=f3?sr:h}catch{}}const j=xs.body||xs.documentElement;return zo&&wl&&j.insertBefore($.createTextNode(wl),j.childNodes[0]||null),uC===Pv?Fo.call(xs,ay?"html":"body")[0]:ay?xs.documentElement:j},GZ=function(zo){return jr.call(zo.ownerDocument||zo,zo,Ft.SHOW_ELEMENT|Ft.SHOW_COMMENT|Ft.SHOW_TEXT|Ft.SHOW_PROCESSING_INSTRUCTION|Ft.SHOW_CDATA_SECTION,null)},Vz=function(zo){return zo instanceof Kt&&(typeof zo.nodeName!="string"||typeof zo.textContent!="string"||typeof zo.removeChild!="function"||!(zo.attributes instanceof Vt)||typeof zo.removeAttribute!="function"||typeof zo.setAttribute!="function"||typeof zo.namespaceURI!="string"||typeof zo.insertBefore!="function"||typeof zo.hasChildNodes!="function")},jZ=function(zo){return typeof xt=="function"&&zo instanceof xt},dC=function(zo,xs,wl){Hr[zo]&&I5(Hr[zo],h=>{h.call(g,xs,wl,c_)})},HZ=function(zo){let xs=null;if(dC("beforeSanitizeElements",zo,null),Vz(zo))return u_(zo),!0;const wl=U0(zo.nodeName);if(dC("uponSanitizeElement",zo,{tagName:wl,allowedTags:ps}),zo.hasChildNodes()&&!jZ(zo.firstElementChild)&&Iv(/<[/\w]/g,zo.innerHTML)&&Iv(/<[/\w]/g,zo.textContent)||zo.nodeType===N5.progressingInstruction||zx&&zo.nodeType===N5.comment&&Iv(/<[/\w]/g,zo.data))return u_(zo),!0;if(!ps[wl]||Or[wl]){if(!Or[wl]&&VZ(wl)&&(Ps.tagNameCheck instanceof RegExp&&Iv(Ps.tagNameCheck,wl)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(wl)))return!1;if(qm&&!Rp[wl]){const h=wo(zo)||zo.parentNode,j=po(zo)||zo.childNodes;if(j&&h){const nt=j.length;for(let it=nt-1;it>=0;--it){const dt=bn(j[it],!0);dt.__removalCount=(zo.__removalCount||0)+1,h.insertBefore(dt,ao(zo))}}}return u_(zo),!0}return zo instanceof Et&&!$x(zo)||(wl==="noscript"||wl==="noembed"||wl==="noframes")&&Iv(/<\/no(script|embed|frames)/i,zo.innerHTML)?(u_(zo),!0):(nv&&zo.nodeType===N5.text&&(xs=zo.textContent,I5([bs,Al,Tl],h=>{xs=P5(xs,h," ")}),zo.textContent!==xs&&(R5(g.removed,{element:zo.cloneNode()}),zo.textContent=xs)),dC("afterSanitizeElements",zo,null),!1)},UZ=function(zo,xs,wl){if(Kl&&(xs==="id"||xs==="name")&&(wl in $||wl in GN))return!1;if(!(Cm&&!Il[xs]&&Iv(du,xs))){if(!(Fl&&Iv(Au,xs))){if(!zr[xs]||Il[xs]){if(!(VZ(zo)&&(Ps.tagNameCheck instanceof RegExp&&Iv(Ps.tagNameCheck,zo)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(zo))&&(Ps.attributeNameCheck instanceof RegExp&&Iv(Ps.attributeNameCheck,xs)||Ps.attributeNameCheck instanceof Function&&Ps.attributeNameCheck(xs))||xs==="is"&&Ps.allowCustomizedBuiltInElements&&(Ps.tagNameCheck instanceof RegExp&&Iv(Ps.tagNameCheck,wl)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(wl))))return!1}else if(!K_[xs]){if(!Iv(Tr,P5(wl,T0,""))){if(!((xs==="src"||xs==="xlink:href"||xs==="href")&&zo!=="script"&&VY(wl,"data:")===0&&l_[zo])){if(!($u&&!Iv(Wp,P5(wl,T0,"")))){if(wl)return!1}}}}}}return!0},VZ=function(zo){return zo!=="annotation-xml"&&FG(zo,Xp)},Wz=function(zo){dC("beforeSanitizeAttributes",zo,null);const{attributes:xs}=zo;if(!xs)return;const wl={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:zr};let h=xs.length;for(;h--;){const j=xs[h],{name:nt,namespaceURI:it,value:dt}=j,yt=U0(nt);let vt=nt==="value"?dt:WY(dt);const St=vt;if(wl.attrName=yt,wl.attrValue=vt,wl.keepAttr=!0,wl.forceKeepAttr=void 0,dC("uponSanitizeAttribute",zo,wl),vt=wl.attrValue,wl.forceKeepAttr)continue;if(!wl.keepAttr){HA(nt,zo);continue}if(!I0&&Iv(/\/>/i,vt)){HA(nt,zo);continue}nv&&I5([bs,Al,Tl],Bt=>{vt=P5(vt,Bt," ")});const Dt=U0(zo.nodeName);if(!UZ(Dt,yt,vt)){HA(nt,zo);continue}if(Lp&&(yt==="id"||yt==="name")&&(HA(nt,zo),vt=km+vt),zx&&Iv(/((--!?|])>)|<\/(style|title)/i,vt)){HA(nt,zo);continue}if(Io&&typeof mn=="object"&&typeof mn.getAttributeType=="function"&&!it)switch(mn.getAttributeType(Dt,yt)){case"TrustedHTML":{vt=Io.createHTML(vt);break}case"TrustedScriptURL":{vt=Io.createScriptURL(vt);break}}if(vt!==St)try{it?zo.setAttributeNS(it,nt,vt):zo.setAttribute(nt,vt),Vz(zo)?u_(zo):HO(g.removed)}catch{}}dC("afterSanitizeAttributes",zo,null)},WZ=function zl(zo){let xs=null;const wl=GZ(zo);for(dC("beforeSanitizeShadowDOM",zo,null);xs=wl.nextNode();)dC("uponSanitizeShadowNode",xs,null),!HZ(xs)&&(xs.content instanceof ut&&zl(xs.content),Wz(xs));dC("afterSanitizeShadowDOM",zo,null)};return g.sanitize=function(zl){let zo=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xs=null,wl=null,h=null,j=null;if(f3=!zl,f3&&(zl="<!-->"),typeof zl!="string"&&!jZ(zl))if(typeof zl.toString=="function"){if(zl=zl.toString(),typeof zl!="string")throw O5("dirty is not a string, aborting")}else throw O5("toString is not a function");if(!g.isSupported)return zl;if(f1||No(zo),g.removed=[],typeof zl=="string"&&(Sm=!1),Sm){if(zl.nodeName){const dt=U0(zl.nodeName);if(!ps[dt]||Or[dt])throw O5("root node is forbidden and cannot be sanitized in-place")}}else if(zl instanceof xt)xs=$Z("<!---->"),wl=xs.ownerDocument.importNode(zl,!0),wl.nodeType===N5.element&&wl.nodeName==="BODY"||wl.nodeName==="HTML"?xs=wl:xs.appendChild(wl);else{if(!H0&&!nv&&!ay&&zl.indexOf("<")===-1)return Io&&hs?Io.createHTML(zl):zl;if(xs=$Z(zl),!xs)return H0?null:hs?sr:""}xs&&a_&&u_(xs.firstChild);const nt=GZ(Sm?zl:xs);for(;h=nt.nextNode();)HZ(h)||(h.content instanceof ut&&WZ(h.content),Wz(h));if(Sm)return zl;if(H0){if(ov)for(j=Ko.call(xs.ownerDocument);xs.firstChild;)j.appendChild(xs.firstChild);else j=xs;return(zr.shadowroot||zr.shadowrootmode)&&(j=lr.call(et,j,!0)),j}let it=ay?xs.outerHTML:xs.innerHTML;return ay&&ps["!doctype"]&&xs.ownerDocument&&xs.ownerDocument.doctype&&xs.ownerDocument.doctype.name&&Iv(fF,xs.ownerDocument.doctype.name)&&(it="<!DOCTYPE "+xs.ownerDocument.doctype.name+`>
`+it),nv&&I5([bs,Al,Tl],dt=>{it=P5(it,dt," ")}),Io&&hs?Io.createHTML(it):it},g.setConfig=function(){let zl=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};No(zl),f1=!0},g.clearConfig=function(){c_=null,f1=!1},g.isValidAttribute=function(zl,zo,xs){c_||No({});const wl=U0(zl),h=U0(zo);return UZ(wl,h,xs)},g.addHook=function(zl,zo){typeof zo=="function"&&(Hr[zl]=Hr[zl]||[],R5(Hr[zl],zo))},g.removeHook=function(zl){if(Hr[zl])return HO(Hr[zl])},g.removeHooks=function(zl){Hr[zl]&&(Hr[zl]=[])},g.removeAllHooks=function(){Hr={}},g}var GG=oX();const a1=dr.each,WO=dr.trim,AS=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],TS={ftp:21,http:80,https:443,mailto:25},jG=["img","video"],L5=(c,g)=>ln(c)?!c:ln(g)?!yn(jG,g):!0,HG=c=>{try{return decodeURIComponent(c)}catch{return unescape(c)}},Yp=(c,g,$)=>{const et=HG(g).replace(/\s/g,"");return c.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(et)?!0:c.allow_html_data_urls?!1:/^data:image\//i.test(et)?L5(c.allow_svg_data_urls,$)&&/^data:image\/svg\+xml/i.test(et):/^data:/i.test(et)};class V_{static parseDataUri(g){let $;const et=decodeURIComponent(g).split(","),rt=/data:([^;]+)/.exec(et[0]);return rt&&($=rt[1]),{type:$,data:et[1]}}static isDomSafe(g,$,et={}){if(et.allow_script_urls)return!0;{const rt=tw.decode(g).replace(/[\s\u0000-\u001F]+/g,"");return!Yp(et,rt,$)}}static getDocumentBaseUrl(g){var $;let et;return g.protocol.indexOf("http")!==0&&g.protocol!=="file:"?et=($=g.href)!==null&&$!==void 0?$:"":et=g.protocol+"//"+g.host+g.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(et)&&(et=et.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(et)||(et+="/")),et}constructor(g,$={}){this.path="",this.directory="",g=WO(g),this.settings=$;const et=$.base_uri,rt=this;if(/^([\w\-]+):([^\/]{2})/i.test(g)||/^\s*#/.test(g)){rt.source=g;return}const ut=g.indexOf("//")===0;if(g.indexOf("/")===0&&!ut&&(g=(et&&et.protocol||"http")+"://mce_host"+g),!/^[\w\-]*:?\/\//.test(g)){const xt=et?et.path:new V_(document.location.href).directory;if((et==null?void 0:et.protocol)==="")g="//mce_host"+rt.toAbsPath(xt,g);else{const Et=/([^#?]*)([#?]?.*)/.exec(g);Et&&(g=(et&&et.protocol||"http")+"://mce_host"+rt.toAbsPath(xt,Et[1])+Et[2])}}g=g.replace(/@@/g,"(mce_at)");const pt=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(g);pt&&a1(AS,(xt,Et)=>{let Ft=pt[Et];Ft&&(Ft=Ft.replace(/\(mce_at\)/g,"@@")),rt[xt]=Ft}),et&&(rt.protocol||(rt.protocol=et.protocol),rt.userInfo||(rt.userInfo=et.userInfo),!rt.port&&rt.host==="mce_host"&&(rt.port=et.port),(!rt.host||rt.host==="mce_host")&&(rt.host=et.host),rt.source=""),ut&&(rt.protocol="")}setPath(g){const $=/^(.*?)\/?(\w+)?$/.exec(g);$&&(this.path=$[0],this.directory=$[1],this.file=$[2]),this.source="",this.getURI()}toRelative(g){if(g==="./")return g;const $=new V_(g,{base_uri:this});if($.host!=="mce_host"&&this.host!==$.host&&$.host||this.port!==$.port||this.protocol!==$.protocol&&$.protocol!=="")return $.getURI();const et=this.getURI(),rt=$.getURI();if(et===rt||et.charAt(et.length-1)==="/"&&et.substr(0,et.length-1)===rt)return et;let ut=this.toRelPath(this.path,$.path);return $.query&&(ut+="?"+$.query),$.anchor&&(ut+="#"+$.anchor),ut}toAbsolute(g,$){const et=new V_(g,{base_uri:this});return et.getURI($&&this.isSameOrigin(et))}isSameOrigin(g){if(this.host==g.host&&this.protocol==g.protocol){if(this.port==g.port)return!0;const $=this.protocol?TS[this.protocol]:null;if($&&(this.port||$)==(g.port||$))return!0}return!1}toRelPath(g,$){let et=0,rt="",ut,pt;const xt=g.substring(0,g.lastIndexOf("/")).split("/"),Et=$.split("/");if(xt.length>=Et.length){for(ut=0,pt=xt.length;ut<pt;ut++)if(ut>=Et.length||xt[ut]!==Et[ut]){et=ut+1;break}}if(xt.length<Et.length){for(ut=0,pt=Et.length;ut<pt;ut++)if(ut>=xt.length||xt[ut]!==Et[ut]){et=ut+1;break}}if(et===1)return $;for(ut=0,pt=xt.length-(et-1);ut<pt;ut++)rt+="../";for(ut=et-1,pt=Et.length;ut<pt;ut++)ut!==et-1?rt+="/"+Et[ut]:rt+=Et[ut];return rt}toAbsPath(g,$){let et=0;const rt=/\/$/.test($)?"/":"",ut=g.split("/"),pt=$.split("/"),xt=[];a1(ut,Kt=>{Kt&&xt.push(Kt)});const Et=[];for(let Kt=pt.length-1;Kt>=0;Kt--)if(!(pt[Kt].length===0||pt[Kt]===".")){if(pt[Kt]===".."){et++;continue}if(et>0){et--;continue}Et.push(pt[Kt])}const Ft=xt.length-et;let Vt;return Ft<=0?Vt=Do(Et).join("/"):Vt=xt.slice(0,Ft).join("/")+"/"+Do(Et).join("/"),Vt.indexOf("/")!==0&&(Vt="/"+Vt),rt&&Vt.lastIndexOf("/")!==Vt.length-1&&(Vt+=rt),Vt}getURI(g=!1){let $;return(!this.source||g)&&($="",g||(this.protocol?$+=this.protocol+"://":$+="//",this.userInfo&&($+=this.userInfo+"@"),this.host&&($+=this.host),this.port&&($+=":"+this.port)),this.path&&($+=this.path),this.query&&($+="?"+this.query),this.anchor&&($+="#"+this.anchor),this.source=$),this.source}}const rX=dr.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),IS="data-mce-type";let hA=0;const pA=(c,g,$,et,rt)=>{var ut,pt,xt,Et;const Ft=g.validate,Vt=$.getSpecialElements();c.nodeType===Gu&&!g.allow_conditional_comments&&/^\[if/i.test((ut=c.nodeValue)!==null&&ut!==void 0?ut:"")&&(c.nodeValue=" "+c.nodeValue);const Kt=(pt=rt==null?void 0:rt.tagName)!==null&&pt!==void 0?pt:c.nodeName.toLowerCase();if(et!=="html"&&$.isValid(et)){ln(rt)&&(rt.allowedTags[Kt]=!0);return}if(c.nodeType!==x1||Kt==="body")return;const en=eo.fromDom(c),mn=dp(en,IS),Sn=fm(en,"data-mce-bogus");if(!mn&&Tt(Sn)){Sn==="all"?_u(en):Cy(en);return}const bn=$.getElementRule(Kt);if(Ft&&!bn){es(Vt,Kt)?_u(en):Cy(en);return}else ln(rt)&&(rt.allowedTags[Kt]=!0);if(Ft&&bn&&!mn){if(sn((xt=bn.attributesForced)!==null&&xt!==void 0?xt:[],Pn=>{up(en,Pn.name,Pn.value==="{$uid}"?`mce_${hA++}`:Pn.value)}),sn((Et=bn.attributesDefault)!==null&&Et!==void 0?Et:[],Pn=>{dp(en,Pn.name)||up(en,Pn.name,Pn.value==="{$uid}"?`mce_${hA++}`:Pn.value)}),bn.attributesRequired&&!Cn(bn.attributesRequired,Pn=>dp(en,Pn))){Cy(en);return}if(bn.removeEmptyAttrs&&_y(en)){Cy(en);return}bn.outputName&&bn.outputName!==Kt&&nM(en,bn.outputName)}},hF=(c,g,$,et,rt)=>{const ut=c.tagName.toLowerCase(),{attrName:pt,attrValue:xt}=rt;rt.keepAttr=qO(g,$,et,ut,pt,xt),rt.keepAttr?(rt.allowedAttributes[pt]=!0,gF(pt,$)&&(rt.attrValue=pt),g.allow_svg_data_urls&&As(xt,"data:image/svg+xml")&&(rt.forceKeepAttr=!0)):pF(c,pt)&&(rt.forceKeepAttr=!0)},qO=(c,g,$,et,rt,ut)=>$!=="html"&&!Yu(et)?!0:!(rt in rX&&Yp(c,ut,et))&&(!c.validate||g.isValid(et,rt)||As(rt,"data-")||As(rt,"aria-")),pF=(c,g)=>c.hasAttribute(IS)&&(g==="id"||g==="class"||g==="style"),gF=(c,g)=>c in g.getBoolAttrs(),sX=(c,g,$,et)=>{const{attributes:rt}=c;for(let ut=rt.length-1;ut>=0;ut--){const pt=rt[ut],xt=pt.name,Et=pt.value;!qO(g,$,et,c.tagName.toLowerCase(),xt,Et)&&!pF(c,xt)?c.removeAttribute(xt):gF(xt,$)&&c.setAttribute(xt,xt)}},iX=(c,g,$)=>{const et=GG();return et.addHook("uponSanitizeElement",(rt,ut)=>{pA(rt,c,g,$.track(rt),ut)}),et.addHook("uponSanitizeAttribute",(rt,ut)=>{hF(rt,c,g,$.current(),ut)}),et},UG=(c,g)=>{const et={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return et.PARSER_MEDIA_TYPE=g,c.allow_script_urls?et.ALLOWED_URI_REGEXP=/.*/:c.allow_html_data_urls&&(et.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),et},aX=c=>{const g=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(et=>`xlink:${et}`),$={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:g};GG().sanitize(c,$)},lX=(c,g)=>{const $={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},et=GG();et.addHook("uponSanitizeElement",(rt,ut)=>{var pt;const xt=(pt=ut.tagName)!==null&&pt!==void 0?pt:rt.nodeName.toLowerCase(),Et=g.allow_mathml_annotation_encodings;if(xt==="annotation"&&qt(Et)&&Et.length>0){const Ft=rt.getAttribute("encoding");Tt(Ft)&&yn(Et,Ft)&&(ut.allowedTags[xt]=!0)}}),et.sanitize(c,$)},cX=c=>g=>{const $=S_(g);if($==="svg")aX(g);else if($==="math")lX(g,c);else throw new Error("Not a namespace element")},uX=(c,g)=>{const $=$t();if(c.sanitize){const et=iX(c,g,$);return{sanitizeHtmlElement:(ut,pt)=>{et.sanitize(ut,UG(c,pt)),et.removed=[],$.reset()},sanitizeNamespaceElement:cX(c)}}else return{sanitizeHtmlElement:(ut,pt)=>{const xt=document.createNodeIterator(ut,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let Et;for(;Et=xt.nextNode();){const Ft=$.track(Et);pA(Et,c,g,Ft),Fr(Et)&&sX(Et,c,g,Ft)}$.reset()},sanitizeNamespaceElement:hn}},VG=dr.makeMap,mF=dr.extend,WG=(c,g,$,et)=>{const rt=c.name,ut=rt in $&&rt!=="title"&&rt!=="textarea"&&rt!=="noscript",pt=g.childNodes;for(let xt=0,Et=pt.length;xt<Et;xt++){const Ft=pt[xt],Vt=new Oy(Ft.nodeName.toLowerCase(),Ft.nodeType);if(Fr(Ft)){const Kt=Ft.attributes;for(let en=0,mn=Kt.length;en<mn;en++){const Sn=Kt[en];Vt.attr(Sn.name,Sn.value)}Yu(Vt.name)&&(et(Ft),Vt.value=Ft.innerHTML)}else pr(Ft)?(Vt.value=Ft.data,ut&&(Vt.raw=!0)):(Ip(Ft)||x0(Ft)||ux(Ft))&&(Vt.value=Ft.data);Yu(Vt.name)||WG(Vt,Ft,$,et),c.append(Vt)}},F5=(c,g,$)=>{const et=[];for(let rt=c,ut=rt;rt;ut=rt,rt=rt.walk()){const pt=rt;sn(g,xt=>xt(pt)),Mn(pt.parent)&&pt!==c?rt=ut:et.push(pt)}for(let rt=et.length-1;rt>=0;rt--){const ut=et[rt];sn($,pt=>pt(ut))}},qG=(c,g,$,et)=>{const rt=$.validate,ut=g.getNonEmptyElements(),pt=g.getWhitespaceElements(),xt=mF(VG("script,style,head,html,body,title,meta,param"),g.getBlockElements()),Et=k3(g),Ft=/[ \t\r\n]+/g,Vt=/^[ \t\r\n]+/,Kt=/[ \t\r\n]+$/,en=po=>{let wo=po.parent;for(;ln(wo);){if(wo.name in pt)return!0;wo=wo.parent}return!1},mn=po=>{let wo=po;for(;ln(wo);){if(wo.name in Et)return Im(g,ut,pt,wo);wo=wo.parent}return!1},Sn=po=>po.name in xt||E_(g,po)||Yu(po.name)&&po.parent===c,bn=(po,wo)=>{const Io=wo?po.prev:po.next;return ln(Io)||Mn(po.parent)?!1:Sn(po.parent)&&(po.parent!==c||et.isRootContent===!0)};return[po=>{var wo;if(po.type===3&&!en(po)){let Io=(wo=po.value)!==null&&wo!==void 0?wo:"";Io=Io.replace(Ft," "),(iY(po.prev,Sn)||bn(po,!0))&&(Io=Io.replace(Vt,"")),Io.length===0||Io===" "&&po.prev&&po.prev.type===Gu&&po.next&&po.next.type===Gu?po.remove():po.value=Io}},po=>{var wo;if(po.type===1){const Io=g.getElementRule(po.name);if(rt&&Io){const sr=Im(g,ut,pt,po);Io.paddInEmptyBlock&&sr&&mn(po)?R6($,et,Sn,po):Io.removeEmpty&&sr?Sn(po)?po.remove():po.unwrap():Io.paddEmpty&&(sr||xS(po))&&R6($,et,Sn,po)}}else if(po.type===3&&!en(po)){let Io=(wo=po.value)!==null&&wo!==void 0?wo:"";(po.next&&Sn(po.next)||bn(po,!1))&&(Io=Io.replace(Kt,"")),Io.length===0?po.remove():po.value=Io}}]},dX=(c,g)=>{var $;const et=($=g.forced_root_block)!==null&&$!==void 0?$:c.forced_root_block;return et===!1?"":et===!0?"p":et},gA=(c={},g=xu())=>{const $=AG(),et=AG(),rt={validate:!0,root_name:"body",sanitize:!0,...c},ut=new DOMParser,pt=uX(rt,g),xt=(wo,Io,sr="html")=>{const br=sr==="xhtml"?"application/xhtml+xml":"text/html",jr=es(g.getSpecialElements(),Io.toLowerCase()),Ko=jr?`<${Io}>${wo}</${Io}>`:wo,Fo=()=>sr==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ko}</body></html>`:/^[\s]*<head/i.test(wo)||/^[\s]*<html/i.test(wo)||/^[\s]*<!DOCTYPE/i.test(wo)?`<html>${Ko}</html>`:`<body>${Ko}</body>`,lr=ut.parseFromString(Fo(),br).body;return pt.sanitizeHtmlElement(lr,br),jr?lr.firstChild:lr},Et=$.addFilter,Ft=$.getFilters,Vt=$.removeFilter,Kt=et.addFilter,en=et.getFilters,mn=et.removeFilter,Sn=(wo,Io)=>{M6(g,wo)&&Io.push(wo)},bn=(wo,Io)=>{const sr=Tt(Io.attr(IS)),br=Io.type===1&&!es(wo,Io.name)&&!E_(g,Io)&&!Yu(Io.name);return Io.type===3||br&&!sr},Pn=(wo,Io)=>{const sr=mF(VG("script,style,head,html,body,title,meta,param"),g.getBlockElements()),br=/^[ \t\r\n]+/,jr=/[ \t\r\n]+$/;let Ko=wo.firstChild,Fo=null;const lr=Hr=>{var bs,Al;Hr&&(Ko=Hr.firstChild,Ko&&Ko.type===3&&(Ko.value=(bs=Ko.value)===null||bs===void 0?void 0:bs.replace(br,"")),Ko=Hr.lastChild,Ko&&Ko.type===3&&(Ko.value=(Al=Ko.value)===null||Al===void 0?void 0:Al.replace(jr,"")))};if(g.isValidChild(wo.name,Io.toLowerCase())){for(;Ko;){const Hr=Ko.next;bn(sr,Ko)?(Fo||(Fo=new Oy(Io,1),Fo.attr(rt.forced_root_block_attrs),wo.insert(Fo,Ko)),Fo.append(Ko)):(lr(Fo),Fo=null),Ko=Hr}lr(Fo)}},po={schema:g,addAttributeFilter:Kt,getAttributeFilters:en,removeAttributeFilter:mn,addNodeFilter:Et,getNodeFilters:Ft,removeNodeFilter:Vt,parse:(wo,Io={})=>{var sr;const br=rt.validate,jr=(sr=Io.context)!==null&&sr!==void 0?sr:rt.root_name,Ko=xt(wo,jr,Io.format);cu(g,Ko);const Fo=new Oy(jr,11);WG(Fo,Ko,g.getSpecialElements(),pt.sanitizeNamespaceElement),Ko.innerHTML="";const[lr,Hr]=qG(Fo,g,rt,Io),bs=[],Al=br?Wp=>Sn(Wp,bs):hn,Tl={nodes:{},attributes:{}},du=Wp=>U$(Ft(),en(),Wp,Tl);if(F5(Fo,[lr,du],[Hr,Al]),bs.reverse(),br&&bs.length>0)if(Io.context){const{pass:Wp,fail:T0}=Ln(bs,Xp=>Xp.parent===Fo);iu(T0,g,Fo,du),Io.invalid=Wp.length>0}else iu(bs,g,Fo,du);const Au=dX(rt,Io);return Au&&(Fo.name==="body"||Io.isRootContent)&&Pn(Fo,Au),Io.invalid||T6(Tl,Io),Fo}};return rF(po,rt),tC(po,rt,g),po},fX=c=>CS(c)?pS({validate:!1}).serialize(c):c,yF=(c,g,$)=>{const et=fX(c),rt=g(et);if(rt.isDefaultPrevented())return rt;if(CS(c))if(rt.content!==et){const ut=gA({validate:!1,forced_root_block:!1,...$}).parse(rt.content,{context:c.name});return{...rt,content:ut}}else return{...rt,content:c};else return rt},ZG=c=>({sanitize:tP(c),sandbox_iframes:ME(c),sandbox_iframes_exclusions:_R(c)}),KG=(c,g)=>{if(g.no_events)return bm.value(g);{const $=sI(c,g);return $.isDefaultPrevented()?bm.error(w8(c,{content:"",...$}).content):bm.value($)}},bF=(c,g,$)=>$.no_events?g:yF(g,rt=>w8(c,{...$,content:rt}),ZG(c)).content,ZO=(c,g)=>{if(g.no_events)return bm.value(g);{const $=yF(g.content,et=>KR(c,{...g,content:et}),ZG(c));return $.isDefaultPrevented()?($P(c,$),bm.error(void 0)):bm.value($)}},KO=(c,g,$)=>{$.no_events||$P(c,{...$,content:g})},YO=(c,g,$)=>({element:c,width:g,rows:$}),vF=(c,g)=>({element:c,cells:g}),YG=(c,g)=>({x:c,y:g}),XG=(c,g)=>Ku(c,g).bind(Ep).getOr(1),hX=(c,g,$,et,rt)=>{const ut=XG(rt,"rowspan"),pt=XG(rt,"colspan"),xt=c.rows;for(let Et=$;Et<$+ut;Et++){xt[Et]||(xt[Et]=vF(dE(et),[]));for(let Ft=g;Ft<g+pt;Ft++){const Vt=xt[Et].cells;Vt[Ft]=Et===$&&Ft===g?rt:Yv(rt)}}},pX=(c,g,$)=>{const et=c.rows;return!!(et[$]?et[$].cells:[])[g]},_F=(c,g,$)=>{for(;pX(c,g,$);)g++;return g},RI=c=>Wn(c,(g,$)=>$.cells.length>g?$.cells.length:g,0),xF=(c,g)=>{const $=c.rows;for(let et=0;et<$.length;et++){const rt=$[et].cells;for(let ut=0;ut<rt.length;ut++)if(ba(rt[ut],g))return Xt.some(YG(ut,et))}return Xt.none()},wF=(c,g,$,et,rt)=>{const ut=[],pt=c.rows;for(let xt=$;xt<=rt;xt++){const Et=pt[xt].cells,Ft=g<et?Et.slice(g,et+1):Et.slice(et,g+1);ut.push(vF(pt[xt].element,Ft))}return ut},XO=(c,g,$)=>{const et=g.x,rt=g.y,ut=$.x,pt=$.y,xt=rt<pt?wF(c,et,rt,ut,pt):wF(c,et,pt,ut,rt);return YO(c.element,RI(xt),xt)},gX=(c,g)=>{const $=Yv(c.element),et=eo.fromTag("tbody");return Hv(et,g),qp($,et),$},mX=c=>Nn(c.rows,g=>{const $=Nn(g.cells,rt=>{const ut=dE(rt);return ju(ut,"colspan"),ju(ut,"rowspan"),ut}),et=Yv(g.element);return Hv(et,$),et}),mA=c=>{const g=YO(Yv(c),0,[]);return sn(_0(c,"tr"),($,et)=>{sn(_0($,"td,th"),(rt,ut)=>{hX(g,_F(g,ut,et),et,$,rt)})}),YO(g.element,RI(g.rows),g.rows)},CF=c=>gX(c,mX(c)),JG=(c,g,$)=>xF(c,g).bind(et=>xF(c,$).map(rt=>XO(c,et,rt))),z5=c=>Qn(c,g=>En(g)==="ul"||En(g)==="ol"),QG=(c,g)=>Qn(c,$=>En($)==="li"&&jR($,g)).fold(cn([]),$=>z5(c).map(et=>{const rt=eo.fromTag(En(et)),ut=Zs(N0(et),(pt,xt)=>As(xt,"list-style"));return Js(rt,ut),[eo.fromTag("li"),rt]}).getOr([])),kF=(c,g)=>{const $=Wn(g,(et,rt)=>(qp(rt,et),rt),c);return g.length>0?hI([$]):$},_j=c=>_2(c)?zm(c).filter(G1).fold(cn([]),g=>[c,g]):G1(c)?[c]:[],$j=(c,g,$)=>{const et=eo.fromDom(g.commonAncestorContainer),rt=Rw(et,c),ut=Bn(rt,Et=>$.isWrapper(En(Et))),pt=QG(rt,g),xt=ut.concat(pt.length?pt:_j(et));return Nn(xt,Yv)},eH=()=>hI([]),yX=(c,g,$)=>kF(eo.fromDom(g.cloneContents()),$j(c,g,$)),bX=(c,g)=>Hp(g,"table",Tn(ba,c)),SF=(c,g)=>bX(c,g[0]).bind($=>{const et=g[0],rt=g[g.length-1],ut=mA($);return JG(ut,et,rt).map(pt=>hI([CF(pt)]))}).getOrThunk(eH),vX=(c,g,$)=>g.length>0&&g[0].collapsed?eH():yX(c,g[0],$),tH=(c,g,$)=>{const et=G2(g,c);return et.length>0?SF(c,et):vX(c,g,$)},JO=(c,g)=>g>=0&&g<c.length&&$2(c.charAt(g)),nH=c=>mv(c.innerText),_X=c=>c.map(g=>g.nodeName).getOr("div").toLowerCase(),xX=c=>Xt.from(c.selection.getRng()).map(g=>{var $;const et=Xt.from(c.dom.getParent(g.commonAncestorContainer,c.dom.isBlock)),rt=c.getBody(),ut=_X(et),pt=eo.fromDom(g.cloneContents());qB(pt),ZB(pt);const xt=c.dom.add(rt,ut,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},pt.dom),Et=nH(xt),Ft=mv(($=xt.textContent)!==null&&$!==void 0?$:"");if(c.dom.remove(xt),JO(Ft,0)||JO(Ft,Ft.length-1)){const Vt=et.getOr(rt),Kt=nH(Vt),en=Kt.indexOf(Et);if(en===-1)return Et;{const mn=JO(Kt,en-1),Sn=JO(Kt,en+Et.length);return(mn?" ":"")+Et+(Sn?" ":"")}}else return Et}).getOr(""),wX=(c,g)=>{const $=c.selection.getRng(),et=c.dom.create("body"),rt=c.selection.getSel(),ut=tO(c,qT(rt)),pt=g.contextual?tH(eo.fromDom(c.getBody()),ut,c.schema).dom:$.cloneContents();return pt&&et.appendChild(pt),c.selection.serializer.serialize(et,g)},CX=(c,g)=>{if(g.format==="text")return xX(c);{const $=wX(c,g);return g.format==="tree"?$:c.selection.isCollapsed()?"":$}},kX=(c,g)=>({...c,format:g,get:!0,selection:!0,getInner:!0}),SX=(c,g,$={})=>{const et=kX($,g);return KG(c,et).fold(fo,rt=>{const ut=CX(c,rt);return bF(c,ut,rt)})},EF=0,oH=1,rH=2,QO=(c,g)=>{const $=c.length+g.length+2,et=new Array($),rt=new Array($),ut=(Vt,Kt,en)=>({start:Vt,end:Kt,diag:en}),pt=(Vt,Kt,en,mn,Sn)=>{const bn=Et(Vt,Kt,en,mn);if(bn===null||bn.start===Kt&&bn.diag===Kt-mn||bn.end===Vt&&bn.diag===Vt-en){let Pn=Vt,ao=en;for(;Pn<Kt||ao<mn;)Pn<Kt&&ao<mn&&c[Pn]===g[ao]?(Sn.push([EF,c[Pn]]),++Pn,++ao):Kt-Vt>mn-en?(Sn.push([rH,c[Pn]]),++Pn):(Sn.push([oH,g[ao]]),++ao)}else{pt(Vt,bn.start,en,bn.start-bn.diag,Sn);for(let Pn=bn.start;Pn<bn.end;++Pn)Sn.push([EF,c[Pn]]);pt(bn.end,Kt,bn.end-bn.diag,mn,Sn)}},xt=(Vt,Kt,en,mn)=>{let Sn=Vt;for(;Sn-Kt<mn&&Sn<en&&c[Sn]===g[Sn-Kt];)++Sn;return ut(Vt,Sn,Kt)},Et=(Vt,Kt,en,mn)=>{const Sn=Kt-Vt,bn=mn-en;if(Sn===0||bn===0)return null;const Pn=Sn-bn,ao=bn+Sn,po=(ao%2===0?ao:ao+1)/2;et[1+po]=Vt,rt[1+po]=Kt+1;let wo,Io,sr,br,jr;for(wo=0;wo<=po;++wo){for(Io=-wo;Io<=wo;Io+=2){for(sr=Io+po,Io===-wo||Io!==wo&&et[sr-1]<et[sr+1]?et[sr]=et[sr+1]:et[sr]=et[sr-1]+1,br=et[sr],jr=br-Vt+en-Io;br<Kt&&jr<mn&&c[br]===g[jr];)et[sr]=++br,++jr;if(Pn%2!==0&&Pn-wo<=Io&&Io<=Pn+wo&&rt[sr-Pn]<=et[sr])return xt(rt[sr-Pn],Io+Vt-en,Kt,mn)}for(Io=Pn-wo;Io<=Pn+wo;Io+=2){for(sr=Io+po-Pn,Io===Pn-wo||Io!==Pn+wo&&rt[sr+1]<=rt[sr-1]?rt[sr]=rt[sr+1]-1:rt[sr]=rt[sr-1],br=rt[sr]-1,jr=br-Vt+en-Io;br>=Vt&&jr>=en&&c[br]===g[jr];)rt[sr]=br--,jr--;if(Pn%2===0&&-wo<=Io&&Io<=wo&&rt[sr]<=et[sr+Pn])return xt(rt[sr],Io+Vt-en,Kt,mn)}}return null},Ft=[];return pt(0,c.length,0,g.length,Ft),Ft},sy=c=>Fr(c)?c.outerHTML:pr(c)?tw.encodeRaw(c.data,!1):Ip(c)?"<!--"+c.data+"-->":"",EX=c=>{let g;const $=document.createElement("div"),et=document.createDocumentFragment();for(c&&($.innerHTML=c);g=$.firstChild;)et.appendChild(g);return et},eD=(c,g,$)=>{const et=EX(g);if(c.hasChildNodes()&&$<c.childNodes.length){const rt=c.childNodes[$];c.insertBefore(et,rt)}else c.appendChild(et)},yA=(c,g)=>{if(c.hasChildNodes()&&g<c.childNodes.length){const $=c.childNodes[g];c.removeChild($)}},sH=(c,g)=>{let $=0;sn(c,et=>{et[0]===EF?$++:et[0]===oH?(eD(g,et[1],$),$++):et[0]===rH&&yA(g,$)})},Rv=(c,g)=>Bn(Nn(Ts(c.childNodes),Mt(mv,sy)),$=>$.length>0),bA=(c,g)=>{const $=Nn(Ts(g.childNodes),sy);return sH(QO($,c),g),g},iH=Ho(()=>document.implementation.createHTMLDocument("undo")),AX=c=>c.querySelector("iframe")!==null,aH=c=>({type:"fragmented",fragments:c,content:"",bookmark:null,beforeBookmark:null}),TX=c=>({type:"complete",fragments:null,content:c,bookmark:null,beforeBookmark:null}),B5=c=>{const g=c.serializer.getTempAttrs(),$=WB(c.getBody(),g);return AX($)?aH(Rv($)):TX(mv($.innerHTML))},vA=(c,g,$)=>{const et=$?g.beforeBookmark:g.bookmark;g.type==="fragmented"?bA(g.fragments,c.getBody()):c.setContent(g.content,{format:"raw",no_selection:ln(et)&&l8(et)?!et.isFakeCaret:!0}),et&&(c.selection.moveToBookmark(et),c.selection.scrollIntoView())},$5=c=>c.type==="fragmented"?c.fragments.join(""):c.content,lH=c=>{const g=eo.fromTag("body",iH());return Uv(g,$5(c)),sn(_0(g,"*[data-mce-bogus]"),Cy),Fu(g)},cH=(c,g)=>$5(c)===$5(g),IX=(c,g)=>lH(c)===lH(g),G5=(c,g)=>!c||!g?!1:cH(c,g)?!0:IX(c,g),j5=c=>c.get()===0,tD=(c,g,$)=>{j5($)&&(c.typing=g)},uH=(c,g)=>{c.typing&&(tD(c,!1,g),c.add())},dH=c=>{c.typing&&(c.typing=!1,c.add())},Rx=(c,g,$)=>{j5(g)&&$.set(wT(c.selection))},AF=(c,g,$,et,rt,ut,pt)=>{const xt=B5(c),Et=dr.extend(ut||{},xt);if(!j5(et)||c.removed)return null;const Ft=g.data[$.get()];if(c.dispatch("BeforeAddUndo",{level:Et,lastLevel:Ft,originalEvent:pt}).isDefaultPrevented()||Ft&&G5(Ft,Et))return null;g.data[$.get()]&&rt.get().each(en=>{g.data[$.get()].beforeBookmark=en});const Vt=RT(c);if(Vt&&g.data.length>Vt){for(let en=0;en<g.data.length-1;en++)g.data[en]=g.data[en+1];g.data.length--,$.set(g.data.length)}Et.bookmark=wT(c.selection),$.get()<g.data.length-1&&(g.data.length=$.get()+1),g.data.push(Et),$.set(g.data.length-1);const Kt={level:Et,lastLevel:Ft,originalEvent:pt};return $.get()>0?(c.setDirty(!0),c.dispatch("AddUndo",Kt),c.dispatch("change",Kt)):c.dispatch("AddUndo",Kt),Et},RX=(c,g,$)=>{g.data=[],$.set(0),g.typing=!1,c.dispatch("ClearUndos")},nD=(c,g,$,et,rt)=>{if(g.transact(et)){const ut=g.data[$.get()].bookmark,pt=g.data[$.get()-1];vA(c,pt,!0),g.transact(rt)&&(g.data[$.get()-1].beforeBookmark=ut)}},TF=(c,g,$)=>{let et;return g.get()<$.length-1&&(g.set(g.get()+1),et=$[g.get()],vA(c,et,!1),c.setDirty(!0),c.dispatch("Redo",{level:et})),et},fH=(c,g,$,et)=>{let rt;return g.typing&&(g.add(),g.typing=!1,tD(g,!1,$)),et.get()>0&&(et.set(et.get()-1),rt=g.data[et.get()],vA(c,rt,!0),c.setDirty(!0),c.dispatch("Undo",{level:rt})),rt},hH=c=>{c.clear(),c.add()},pH=(c,g,$)=>$.get()>0||g.typing&&g.data[0]&&!G5(B5(c),g.data[0]),MX=(c,g)=>g.get()<c.data.length-1&&!c.typing,PX=(c,g,$)=>(uH(c,g),c.beforeChange(),c.ignore($),c.add()),OX=(c,g)=>{try{c.set(c.get()+1),g()}finally{c.set(c.get()-1)}},DX=(c,g)=>{const $=c.dom,et=ln(g)?g:c.getBody();sn($.select("table,a",et),rt=>{switch(rt.nodeName){case"TABLE":const ut=qM(c),pt=$.getAttrib(rt,"border");(!pt||pt==="0")&&c.hasVisual?$.addClass(rt,ut):$.removeClass(rt,ut);break;case"A":if(!$.getAttrib(rt,"href")){const xt=$.getAttrib(rt,"name")||rt.id,Et=pR(c);xt&&c.hasVisual?$.addClass(rt,Et):$.removeClass(rt,Et)}break}}),c.dispatch("VisualAid",{element:g,hasVisual:c.hasVisual})},gH=c=>({init:{bindEvents:hn},undoManager:{beforeChange:(g,$)=>Rx(c,g,$),add:(g,$,et,rt,ut,pt)=>AF(c,g,$,et,rt,ut,pt),undo:(g,$,et)=>fH(c,g,$,et),redo:(g,$)=>TF(c,g,$),clear:(g,$)=>RX(c,g,$),reset:g=>hH(g),hasUndo:(g,$)=>pH(c,g,$),hasRedo:(g,$)=>MX(g,$),transact:(g,$,et)=>PX(g,$,et),ignore:(g,$)=>OX(g,$),extra:(g,$,et,rt)=>nD(c,g,$,et,rt)},formatter:{match:(g,$,et,rt)=>w5(c,g,$,et,rt),matchAll:(g,$)=>J$(c,g,$),matchNode:(g,$,et,rt)=>Ax(c,g,$,et,rt),canApply:g=>bY(c,g),closest:g=>SO(c,g),apply:(g,$,et)=>K6(c,g,$,et),remove:(g,$,et,rt)=>xG(c,g,$,et,rt),toggle:(g,$,et)=>$O(c,g,$,et),formatChanged:(g,$,et,rt,ut)=>BY(c,g,$,et,rt,ut)},editor:{getContent:g=>xK(c,g),setContent:(g,$)=>iA(c,g,$),insertContent:(g,$)=>Av(c,g,$),addVisual:g=>DX(c,g)},selection:{getContent:(g,$)=>SX(c,g,$)},autocompleter:{addDecoration:hn,removeDecoration:hn},raw:{getModel:()=>Xt.none()}}),mH=c=>{const g=Ft=>Gt(Ft)?Ft:{},{init:$,undoManager:et,formatter:rt,editor:ut,selection:pt,autocompleter:xt,raw:Et}=c;return{init:{bindEvents:$.bindEvents},undoManager:{beforeChange:et.beforeChange,add:et.add,undo:et.undo,redo:et.redo,clear:et.clear,reset:et.reset,hasUndo:et.hasUndo,hasRedo:et.hasRedo,transact:(Ft,Vt,Kt)=>et.transact(Kt),ignore:(Ft,Vt)=>et.ignore(Vt),extra:(Ft,Vt,Kt,en)=>et.extra(Kt,en)},formatter:{match:(Ft,Vt,Kt,en)=>rt.match(Ft,g(Vt),en),matchAll:rt.matchAll,matchNode:rt.matchNode,canApply:Ft=>rt.canApply(Ft),closest:Ft=>rt.closest(Ft),apply:(Ft,Vt,Kt)=>rt.apply(Ft,g(Vt)),remove:(Ft,Vt,Kt,en)=>rt.remove(Ft,g(Vt)),toggle:(Ft,Vt,Kt)=>rt.toggle(Ft,g(Vt)),formatChanged:(Ft,Vt,Kt,en,mn)=>rt.formatChanged(Vt,Kt,en,mn)},editor:{getContent:Ft=>ut.getContent(Ft),setContent:(Ft,Vt)=>({content:ut.setContent(Ft,Vt),html:""}),insertContent:(Ft,Vt)=>(ut.insertContent(Ft),""),addVisual:ut.addVisual},selection:{getContent:(Ft,Vt)=>pt.getContent(Vt)},autocompleter:{addDecoration:xt.addDecoration,removeDecoration:xt.removeDecoration},raw:{getModel:()=>Xt.some(Et.getRawModel())}}},NX=()=>{const c=cn(null),g=cn("");return{init:{bindEvents:hn},undoManager:{beforeChange:hn,add:c,undo:c,redo:c,clear:hn,reset:hn,hasUndo:Dn,hasRedo:Dn,transact:c,ignore:hn,extra:hn},formatter:{match:Dn,matchAll:cn([]),matchNode:cn(void 0),canApply:Dn,closest:g,apply:hn,remove:hn,toggle:hn,formatChanged:cn({unbind:hn})},editor:{getContent:g,setContent:cn({content:"",html:""}),insertContent:cn(""),addVisual:hn},selection:{getContent:g},autocompleter:{addDecoration:hn,removeDecoration:hn},raw:{getModel:cn(Xt.none())}}},Ow=c=>es(c.plugins,"rtc"),LX=c=>$a(c.plugins,"rtc").bind(g=>Xt.from(g.setup)),yH=c=>{const g=c;return LX(c).fold(()=>(g.rtcInstance=gH(c),Xt.none()),$=>(g.rtcInstance=NX(),Xt.some(()=>$().then(et=>(g.rtcInstance=mH(et),et.rtc.isRemote)))))},H5=c=>c.rtcInstance?c.rtcInstance:gH(c),Rm=c=>{const g=c.rtcInstance;if(g)return g;throw new Error("Failed to get RTC instance not yet initialized.")},bH=(c,g,$)=>{Rm(c).undoManager.beforeChange(g,$)},IF=(c,g,$,et,rt,ut,pt)=>Rm(c).undoManager.add(g,$,et,rt,ut,pt),vH=(c,g,$,et)=>Rm(c).undoManager.undo(g,$,et),_H=(c,g,$)=>Rm(c).undoManager.redo(g,$),RF=(c,g,$)=>{Rm(c).undoManager.clear(g,$)},xH=(c,g)=>{Rm(c).undoManager.reset(g)},wH=(c,g,$)=>Rm(c).undoManager.hasUndo(g,$),CH=(c,g,$)=>Rm(c).undoManager.hasRedo(g,$),FX=(c,g,$,et)=>Rm(c).undoManager.transact(g,$,et),MF=(c,g,$)=>{Rm(c).undoManager.ignore(g,$)},zX=(c,g,$,et,rt)=>{Rm(c).undoManager.extra(g,$,et,rt)},oD=(c,g,$,et,rt)=>Rm(c).formatter.match(g,$,et,rt),BX=(c,g,$)=>Rm(c).formatter.matchAll(g,$),$X=(c,g,$,et,rt)=>Rm(c).formatter.matchNode(g,$,et,rt),GX=(c,g)=>Rm(c).formatter.canApply(g),kH=(c,g)=>Rm(c).formatter.closest(g),SH=(c,g,$,et)=>{Rm(c).formatter.apply(g,$,et)},jX=(c,g,$,et,rt)=>{Rm(c).formatter.remove(g,$,et,rt)},HX=(c,g,$,et)=>{Rm(c).formatter.toggle(g,$,et)},UX=(c,g,$,et,rt,ut)=>Rm(c).formatter.formatChanged(g,$,et,rt,ut),VX=(c,g)=>H5(c).editor.getContent(g),WX=(c,g,$)=>H5(c).editor.setContent(g,$),EH=(c,g,$)=>H5(c).editor.insertContent(g,$),Oie=(c,g,$)=>Rm(c).selection.getContent(g,$),qX=(c,g)=>Rm(c).editor.addVisual(g),AH=c=>Rm(c).init.bindEvents(),ZX=(c,g={})=>{const $=g.format?g.format:"html";return Oie(c,$,g)},TH=c=>c.dom.length===0?(_u(c),Xt.none()):Xt.some(c),KX=(c,g)=>c.filter($=>Z2.isBookmarkNode($.dom)).bind(g?Qm:cv),YX=(c,g,$,et,rt)=>{const ut=c.dom,pt=g.dom,xt=et?ut.length:pt.length;et?(u6(ut,pt,rt,!1,!et),$.setStart(pt,xt)):(u6(pt,ut,rt,!1,!et),$.setEnd(pt,xt))},XX=(c,g,$)=>{zm(c).each(et=>{const rt=c.dom;g&&i5(et,Uo(rt,0),$)?iO(rt,0,$):!g&&a5(et,Uo(rt,rt.length),$)&&c6(rt,rt.length,$)})},PF=(c,g,$,et,rt)=>{c.bind(ut=>((et?c6:iO)(ut.dom,et?ut.dom.length:0,rt),g.filter(vu).map(xt=>YX(ut,xt,$,et,rt)))).orThunk(()=>KX(g,et).or(g).filter(vu).map(pt=>XX(pt,et,rt)))},JX=(c,g,$)=>{const et=Xt.from(g.firstChild).map(eo.fromDom),rt=Xt.from(g.lastChild).map(eo.fromDom);c.deleteContents(),c.insertNode(g);const ut=et.bind(cv).filter(vu).bind(TH),pt=rt.bind(Qm).filter(vu).bind(TH);PF(ut,et,c,!0,$),PF(pt,rt,c,!1,$),c.collapse(!1)},QX=(c,g)=>({format:"html",...c,set:!0,selection:!0,content:g}),eJ=(c,g)=>{if(g.format!=="raw"){const $=c.selection.getRng(),et=c.dom.getParent($.commonAncestorContainer,c.dom.isBlock),rt=et?{context:et.nodeName.toLowerCase()}:{},ut=c.parser.parse(g.content,{forced_root_block:!1,...rt,...g});return pS({validate:!1},c.schema).serialize(ut)}else return g.content},tJ=(c,g,$={})=>{const et=QX($,g);ZO(c,et).each(rt=>{const ut=eJ(c,rt),pt=c.selection.getRng();JX(pt,pt.createContextualFragment(ut),c.schema),c.selection.setRng(pt),J2(c,pt),KO(c,ut,rt)})},IH=(c,g,$)=>{if(es(c,g)){const et=Bn(c[g],rt=>rt!==$);et.length===0?delete c[g]:c[g]=et}};var Die=(c,g)=>{let $,et;const rt=(xt,Et)=>Qn(Et,Ft=>c.is(Ft,xt)),ut=xt=>c.getParents(xt,void 0,c.getRoot()),pt=()=>{$={},et={},g.on("NodeChange",xt=>{const Et=xt.element,Ft=ut(Et),Vt={};or($,(Kt,en)=>{rt(en,Ft).each(mn=>{et[en]||(sn(Kt,Sn=>{Sn(!0,{node:mn,selector:en,parents:Ft})}),et[en]=Kt),Vt[en]=Kt})}),or(et,(Kt,en)=>{Vt[en]||(delete et[en],sn(Kt,mn=>{mn(!1,{node:Et,selector:en,parents:Ft})}))})})};return{selectorChangedWithUnbind:(xt,Et)=>($||pt(),$[xt]||($[xt]=[]),$[xt].push(Et),rt(xt,ut(g.selection.getStart())).each(()=>{et[xt]=$[xt]}),{unbind:()=>{IH($,xt,Et),IH(et,xt,Et)}})}};const nJ=c=>!!(c&&c.ownerDocument)&&Fm(eo.fromDom(c.ownerDocument),eo.fromDom(c)),oJ=c=>c?nJ(c.startContainer)&&nJ(c.endContainer):!1,RH=(c,g,$,et)=>{let rt,ut;const{selectorChangedWithUnbind:pt}=Die(c,et),xt=(Tr,ps)=>{const ou=c.createRng();ln(Tr)&&ln(ps)?(ou.setStart(Tr,ps),ou.setEnd(Tr,ps),Io(ou),ao(!1)):(EP(c,ou,et.getBody(),!0),Io(ou))},Et=Tr=>ZX(et,Tr),Ft=(Tr,ps)=>tJ(et,Tr,ps),Vt=Tr=>NB(et.getBody(),wo(),Tr),Kt=Tr=>LB(et.getBody(),wo(),Tr),en=(Tr,ps)=>T0.getBookmark(Tr,ps),mn=Tr=>T0.moveToBookmark(Tr),Sn=(Tr,ps)=>(zB(c,Tr,ps).each(Io),Tr),bn=()=>{const Tr=wo(),ps=po();return!Tr||Tr.item?!1:Tr.compareEndPoints?Tr.compareEndPoints("StartToEnd",Tr)===0:!ps||Tr.collapsed},Pn=()=>{if(et.mode.isReadOnly())return!1;const Tr=wo(),ps=et.getBody().querySelectorAll('[data-mce-selected="1"]');return ps.length>0?Co(ps,ou=>c.isEditable(ou.parentElement)):Z8(c,Tr)},ao=Tr=>{const ps=wo();ps.collapse(!!Tr),Io(ps)},po=()=>g.getSelection?g.getSelection():g.document.selection,wo=()=>{let Tr;const ps=(zr,Ms,Ps)=>{try{return Ms.compareBoundaryPoints(zr,Ps)}catch{return-1}},ou=g.document;if(ln(et.bookmark)&&!vI(et)){const zr=ZP(et);if(zr.isSome())return zr.map(Ms=>tO(et,[Ms])[0]).getOr(ou.createRange())}try{const zr=po();zr&&!ax(zr.anchorNode)&&(zr.rangeCount>0?Tr=zr.getRangeAt(0):Tr=ou.createRange(),Tr=tO(et,[Tr])[0])}catch{}if(Tr||(Tr=ou.createRange()),Xx(Tr.startContainer)&&Tr.collapsed){const zr=c.getRoot();Tr.setStart(zr,0),Tr.setEnd(zr,0)}return rt&&ut&&(ps(Tr.START_TO_START,Tr,rt)===0&&ps(Tr.END_TO_END,Tr,rt)===0?Tr=ut:(rt=null,ut=null)),Tr},Io=(Tr,ps)=>{if(!oJ(Tr))return;const ou=po();if(Tr=et.dispatch("SetSelectionRange",{range:Tr,forward:ps}).range,ou){ut=Tr;try{ou.removeAllRanges(),ou.addRange(Tr)}catch{}ps===!1&&ou.extend&&(ou.collapse(Tr.endContainer,Tr.endOffset),ou.extend(Tr.startContainer,Tr.startOffset)),rt=ou.rangeCount>0?ou.getRangeAt(0):null}if(!Tr.collapsed&&Tr.startContainer===Tr.endContainer&&(ou!=null&&ou.setBaseAndExtent)&&Tr.endOffset-Tr.startOffset<2&&Tr.startContainer.hasChildNodes()){const Ms=Tr.startContainer.childNodes[Tr.startOffset];Ms&&Ms.nodeName==="IMG"&&(ou.setBaseAndExtent(Tr.startContainer,Tr.startOffset,Tr.endContainer,Tr.endOffset),(ou.anchorNode!==Tr.startContainer||ou.focusNode!==Tr.endContainer)&&ou.setBaseAndExtent(Ms,0,Ms,1))}et.dispatch("AfterSetSelectionRange",{range:Tr,forward:ps})},sr=Tr=>(Ft(c.getOuterHTML(Tr)),Tr),br=()=>dK(et.getBody(),wo()),jr=(Tr,ps)=>eO(c,wo(),Tr,ps),Ko=()=>{const Tr=po(),ps=Tr==null?void 0:Tr.anchorNode,ou=Tr==null?void 0:Tr.focusNode;if(!Tr||!ps||!ou||ax(ps)||ax(ou))return!0;const zr=c.createRng(),Ms=c.createRng();try{zr.setStart(ps,Tr.anchorOffset),zr.collapse(!0),Ms.setStart(ou,Tr.focusOffset),Ms.collapse(!0)}catch{return!0}return zr.compareBoundaryPoints(zr.START_TO_START,Ms)<=0},Wp={dom:c,win:g,serializer:$,editor:et,expand:(Tr={type:"word"})=>Io(cr(c).expand(wo(),Tr)),collapse:ao,setCursorLocation:xt,getContent:Et,setContent:Ft,getBookmark:en,moveToBookmark:mn,select:Sn,isCollapsed:bn,isEditable:Pn,isForward:Ko,setNode:sr,getNode:br,getSel:po,setRng:Io,getRng:wo,getStart:Vt,getEnd:Kt,getSelectedBlocks:jr,normalize:()=>{const Tr=wo(),ps=po();if(!u8(ps)&&KT(et)){const ou=Rr(c,Tr);return ou.each(zr=>{Io(zr,Ko())}),ou.getOr(Tr)}return Tr},selectorChanged:(Tr,ps)=>(pt(Tr,ps),Wp),selectorChangedWithUnbind:pt,getScrollContainer:()=>{let Tr,ps=c.getRoot();for(;ps&&ps.nodeName!=="BODY";){if(ps.scrollHeight>ps.clientHeight){Tr=ps;break}ps=ps.parentNode}return Tr},scrollIntoView:(Tr,ps)=>{ln(Tr)?JZ(et,Tr,ps):J2(et,wo(),ps)},placeCaretAt:(Tr,ps)=>Io(_t(Tr,ps,et.getDoc())),getBoundingClientRect:()=>{const Tr=wo();return Tr.collapsed?Uo.fromRangeStart(Tr).getClientRects()[0]:Tr.getBoundingClientRect()},destroy:()=>{g=rt=ut=null,Xp.destroy()}},T0=Z2(Wp),Xp=XR(Wp,et);return Wp.bookmarkManager=T0,Wp.controlSelection=Xp,Wp},Nie=(c,g,$)=>{g.addNodeFilter("br",(et,rt,ut)=>{const pt=dr.extend({},$.getBlockElements()),xt=$.getNonEmptyElements(),Et=$.getWhitespaceElements();pt.body=1;const Ft=Vt=>Vt.name in pt||E_($,Vt);for(let Vt=0,Kt=et.length;Vt<Kt;Vt++){let en=et[Vt],mn=en.parent;if(mn&&Ft(mn)&&en===mn.lastChild){let Sn=en.prev;for(;Sn;){const bn=Sn.name;if(bn!=="span"||Sn.attr("data-mce-type")!=="bookmark"){bn==="br"&&(en=null);break}Sn=Sn.prev}if(en&&(en.remove(),Im($,xt,Et,mn))){const bn=$.getElementRule(mn.name);bn&&(bn.removeEmpty?mn.remove():bn.paddEmpty&&R6(c,ut,Ft,mn))}}else{let Sn=en;for(;mn&&mn.firstChild===Sn&&mn.lastChild===Sn&&(Sn=mn,!pt[mn.name]);)mn=mn.parent;if(Sn===mn){const bn=new Oy("#text",3);bn.value=gm,en.replace(bn)}}}})},rJ=(c,g,$)=>{c.addAttributeFilter("data-mce-tabindex",(et,rt)=>{let ut=et.length;for(;ut--;){const pt=et[ut];pt.attr("tabindex",pt.attr("data-mce-tabindex")),pt.attr(rt,null)}}),c.addAttributeFilter("src,href,style",(et,rt)=>{const ut="data-mce-"+rt,pt=g.url_converter,xt=g.url_converter_scope;let Et=et.length;for(;Et--;){const Ft=et[Et];let Vt=Ft.attr(ut);Vt!==void 0?(Ft.attr(rt,Vt.length>0?Vt:null),Ft.attr(ut,null)):(Vt=Ft.attr(rt),rt==="style"?Vt=$.serializeStyle($.parseStyle(Vt),Ft.name):pt&&(Vt=pt.call(xt,Vt,rt,Ft.name)),Ft.attr(rt,Vt.length>0?Vt:null))}}),c.addAttributeFilter("class",et=>{let rt=et.length;for(;rt--;){const ut=et[rt];let pt=ut.attr("class");pt&&(pt=pt.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),ut.attr("class",pt.length>0?pt:null))}}),c.addAttributeFilter("data-mce-type",(et,rt,ut)=>{let pt=et.length;for(;pt--;){const xt=et[pt];xt.attr("data-mce-type")==="bookmark"&&!ut.cleanup&&(Xt.from(xt.firstChild).exists(Ft=>{var Vt;return!hE((Vt=Ft.value)!==null&&Vt!==void 0?Vt:"")})?xt.unwrap():xt.remove())}}),c.addNodeFilter("script,style",(et,rt)=>{var ut;const pt=Et=>Et.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let xt=et.length;for(;xt--;){const Et=et[xt],Ft=Et.firstChild,Vt=(ut=Ft==null?void 0:Ft.value)!==null&&ut!==void 0?ut:"";if(rt==="script"){const Kt=Et.attr("type");Kt&&Et.attr("type",Kt==="mce-no/type"?null:Kt.replace(/^mce\-/,"")),g.element_format==="xhtml"&&Ft&&Vt.length>0&&(Ft.value=`// <![CDATA[
`+pt(Vt)+`
// ]]>`)}else g.element_format==="xhtml"&&Ft&&Vt.length>0&&(Ft.value=`<!--
`+pt(Vt)+`
-->`)}}),c.addNodeFilter("#comment",et=>{let rt=et.length;for(;rt--;){const ut=et[rt],pt=ut.value;g.preserve_cdata&&(pt==null?void 0:pt.indexOf("[CDATA["))===0?(ut.name="#cdata",ut.type=4,ut.value=$.decode(pt.replace(/^\[CDATA\[|\]\]$/g,""))):(pt==null?void 0:pt.indexOf("mce:protected "))===0&&(ut.name="#text",ut.type=3,ut.raw=!0,ut.value=unescape(pt).substr(14))}}),c.addNodeFilter("xml:namespace,input",(et,rt)=>{let ut=et.length;for(;ut--;){const pt=et[ut];pt.type===7?pt.remove():pt.type===1&&rt==="input"&&!pt.attr("type")&&pt.attr("type","text")}}),c.addAttributeFilter("data-mce-type",et=>{sn(et,rt=>{rt.attr("data-mce-type")==="format-caret"&&(rt.isEmpty(c.schema.getNonEmptyElements())?rt.remove():rt.unwrap())})}),c.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(et,rt)=>{let ut=et.length;for(;ut--;)et[ut].attr(rt,null)}),g.remove_trailing_brs&&Nie(g,c,c.schema)},Vp=c=>{const g=et=>(et==null?void 0:et.name)==="br",$=c.lastChild;if(g($)){const et=$.prev;g(et)&&($.remove(),et.remove())}},OF=(c,g,$)=>{let et;const rt=c.dom;let ut=g.cloneNode(!0);const pt=document.implementation;if(pt.createHTMLDocument){const xt=pt.createHTMLDocument("");dr.each(ut.nodeName==="BODY"?ut.childNodes:[ut],Et=>{xt.body.appendChild(xt.importNode(Et,!0))}),ut.nodeName!=="BODY"?ut=xt.body.firstChild:ut=xt.body,et=rt.doc,rt.doc=xt}return nI(c,{...$,node:ut}),et&&(rt.doc=et),ut},Lie=(c,g)=>ln(c)&&c.hasEventListeners("PreProcess")&&!g.no_events,sJ=(c,g,$)=>Lie(c,$)?OF(c,g,$):g,iJ=(c,g,$)=>{dr.inArray(g,$)===-1&&(c.addAttributeFilter($,(et,rt)=>{let ut=et.length;for(;ut--;)et[ut].attr(rt,null)}),g.push($))},MI=(c,g,$)=>!g.no_events&&c?oI(c,{...g,content:$}).content:$,Fie=(c,g,$)=>{const et=mv($.getInner?g.innerHTML:c.getOuterHTML(g));return $.selection||dT(eo.fromDom(g))?et:dr.trim(et)},zie=(c,g,$)=>{const et=$.selection?{forced_root_block:!1,...$}:$,rt=c.parse(g,et);return Vp(rt),rt},j0=(c,g,$)=>pS(c,g).serialize($),MH=(c,g,$,et,rt)=>{const ut=j0(g,$,et);return MI(c,rt,ut)},PH=(c,g)=>{const $=["data-mce-selected"],et={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...c},rt=g&&g.dom?g.dom:Uu.DOM,ut=g&&g.schema?g.schema:xu(et),pt=gA(et,ut);rJ(pt,et,rt);const xt=(Et,Ft={})=>{const Vt={format:"html",...Ft},Kt=sJ(g,Et,Vt),en=Fie(rt,Kt,Vt),mn=zie(pt,en,Vt);return Vt.format==="tree"?mn:MH(g,et,ut,mn,Vt)};return{schema:ut,addNodeFilter:pt.addNodeFilter,addAttributeFilter:pt.addAttributeFilter,serialize:xt,addRules:ut.addValidElements,setRules:ut.setValidElements,addTempAttr:Tn(iJ,pt,$),getTempAttrs:cn($),getNodeFilters:pt.getNodeFilters,getAttributeFilters:pt.getAttributeFilters,removeNodeFilter:pt.removeNodeFilter,removeAttributeFilter:pt.removeAttributeFilter}},DF=(c,g)=>{const $=PH(c,g);return{schema:$.schema,addNodeFilter:$.addNodeFilter,addAttributeFilter:$.addAttributeFilter,serialize:$.serialize,addRules:$.addRules,setRules:$.setRules,addTempAttr:$.addTempAttr,getTempAttrs:$.getTempAttrs,getNodeFilters:$.getNodeFilters,getAttributeFilters:$.getAttributeFilters,removeNodeFilter:$.removeNodeFilter,removeAttributeFilter:$.removeAttributeFilter}},aJ="html",lJ=(c,g)=>({...c,format:g,get:!0,getInner:!0}),rD=(c,g={})=>{const $=g.format?g.format:aJ,et=lJ(g,$);return KG(c,et).fold(fo,rt=>{const ut=VX(c,rt);return bF(c,ut,rt)})},cJ="html",NF=(c,g)=>({format:cJ,...c,set:!0,content:g}),LF=(c,g,$={})=>{const et=NF($,g);return ZO(c,et).map(rt=>{const ut=WX(c,rt.content,rt);return KO(c,ut.html,rt),ut.content}).getOr(g)},OH="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),DH=[],FF="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),zF=[],sD=(c,g)=>{const $=Bn(g,et=>es(c,et));return xr($)},uJ=c=>{const g=sD(c,OH),$=c.forced_root_block;return($===!1||$==="")&&g.push("forced_root_block (false only)"),xr(g)},dJ=c=>sD(c,DH),NH=(c,g)=>{const $=dr.makeMap(c.plugins," "),rt=Bn(g,ut=>es($,ut));return xr(rt)},l1=c=>NH(c,FF),fJ=c=>NH(c,zF.map(g=>g.name)),hJ=(c,g)=>{const $=uJ(c),et=l1(g),rt=et.length>0,ut=$.length>0,pt=g.theme==="mobile";if(rt||ut||pt){const xt=`
- `,Et=pt?`

Themes:${xt}mobile`:"",Ft=rt?`

Plugins:${xt}${et.join(xt)}`:"",Vt=ut?`

Options:${xt}${$.join(xt)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+Et+Ft+Vt)}},pJ=c=>Qn(zF,g=>g.name===c).fold(()=>c,g=>g.replacedWith?`${c}, replaced by ${g.replacedWith}`:c),gJ=(c,g)=>{const $=dJ(c),et=fJ(g),rt=et.length>0,ut=$.length>0;if(rt||ut){const pt=`
- `,xt=rt?`

Plugins:${pt}${et.map(pJ).join(pt)}`:"",Et=ut?`

Options:${pt}${$.join(pt)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+xt+Et)}},mJ=(c,g)=>{hJ(c,g),gJ(c,g)},U5=Uu.DOM,yJ=c=>{U5.setStyle(c.id,"display",c.orgDisplay)},iD=c=>Xt.from(c).each(g=>g.destroy()),bJ=c=>{const g=c;g.contentAreaContainer=g.formElement=g.container=g.editorContainer=null,g.bodyElement=g.contentDocument=g.contentWindow=null,g.iframeElement=g.targetElm=null;const $=c.selection;if($){const et=$.dom;g.selection=$.win=$.dom=et.doc=null}},aD=c=>{const g=c.formElement;g&&(g._mceOldSubmit&&(g.submit=g._mceOldSubmit,delete g._mceOldSubmit),U5.unbind(g,"submit reset",c.formEventDelegate))},vJ=c=>{if(!c.removed){const{_selectionOverrides:g,editorUpload:$}=c,et=c.getBody(),rt=c.getElement();et&&c.save({is_removing:!0}),c.removed=!0,c.unbindAllNativeEvents(),c.hasHiddenInput&&ln(rt==null?void 0:rt.nextSibling)&&U5.remove(rt.nextSibling),b8(c),c.editorManager.remove(c),!c.inline&&et&&yJ(c),v8(c),U5.remove(c.getContainer()),iD(g),iD($),c.destroy()}},_J=(c,g)=>{const{selection:$,dom:et}=c;if(!c.destroyed){if(!g&&!c.removed){c.remove();return}g||(c.editorManager.off("beforeunload",c._beforeUnload),c.theme&&c.theme.destroy&&c.theme.destroy(),iD($),iD(et)),aD(c),bJ(c),c.destroyed=!0}},PI=(()=>{const c={};return{add:(rt,ut)=>{c[rt]=ut},get:rt=>c[rt]?c[rt]:{icons:{}},has:rt=>es(c,rt)}})(),OI=z0.ModelManager,LH=(c,g)=>g.dom[c],wJ=(c,g)=>parseInt(wp(g,c),10),CJ=Tn(LH,"clientWidth"),V5=Tn(LH,"clientHeight"),FH=Tn(wJ,"margin-top"),zH=Tn(wJ,"margin-left"),kJ=c=>c.dom.getBoundingClientRect(),BH=(c,g,$)=>{const et=CJ(c),rt=V5(c);return g>=0&&$>=0&&g<=et&&$<=rt},SJ=(c,g,$,et)=>{const rt=kJ(g),ut=c?rt.left+g.dom.clientLeft+zH(g):0,pt=c?rt.top+g.dom.clientTop+FH(g):0,xt=$-ut,Et=et-pt;return{x:xt,y:Et}},EJ=(c,g,$)=>{const et=eo.fromDom(c.getBody()),rt=c.inline?et:Wx(et),ut=SJ(c.inline,rt,g,$);return BH(rt,ut.x,ut.y)},AJ=c=>Xt.from(c).map(eo.fromDom),TJ=c=>{const g=c.inline?c.getBody():c.getContentAreaContainer();return AJ(g).map(R1).getOr(!1)};var $H=()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}};const GH=c=>{const g=[],$=()=>{const en=c.theme;return en&&en.getNotificationManagerImpl?en.getNotificationManagerImpl():$H()},et=()=>Xt.from(g[0]),rt=(en,mn)=>en.type===mn.type&&en.text===mn.text&&!en.progressBar&&!en.timeout&&!mn.progressBar&&!mn.timeout,ut=()=>{et().each(en=>{en.reposition()})},pt=en=>{g.push(en)},xt=en=>{vo(g,mn=>mn===en).each(mn=>{g.splice(mn,1)})},Et=(en,mn=!0)=>c.removed||!TJ(c)?{}:(mn&&c.dispatch("BeforeOpenNotification",{notification:en}),Qn(g,Sn=>rt($().getArgs(Sn),en)).getOrThunk(()=>{c.editorManager.setActive(c);const Sn=$().open(en,()=>{xt(Sn)},()=>OB(c));return pt(Sn),ut(),c.dispatch("OpenNotification",{notification:{...Sn}}),Sn})),Ft=()=>{et().each(en=>{$().close(en),xt(en),ut()})},Vt=cn(g);return(en=>{en.on("SkinLoaded",()=>{const mn=uR(en);mn&&Et({text:mn,type:"warning",timeout:0},!1),ut()}),en.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(ut)}),en.on("remove",()=>{sn(g.slice(),mn=>{$().close(mn)})}),en.on("keydown",mn=>{var Sn;const bn=((Sn=mn.key)===null||Sn===void 0?void 0:Sn.toLowerCase())==="f12"||mn.keyCode===123;mn.altKey&&bn&&(mn.preventDefault(),et().map(Pn=>eo.fromDom(Pn.getEl())).each(Pn=>JE(Pn)))})})(c),{open:Et,close:Ft,getNotifications:Vt}},DI=z0.PluginManager,Mx=z0.ThemeManager;var jH=()=>{const c=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:c,openUrl:c,alert:c,confirm:c,close:c}};const BF=c=>{let g=[];const $=()=>{const bn=c.theme;return bn&&bn.getWindowManagerImpl?bn.getWindowManagerImpl():jH()},et=(bn,Pn)=>(...ao)=>Pn?Pn.apply(bn,ao):void 0,rt=bn=>{c.dispatch("OpenWindow",{dialog:bn})},ut=bn=>{c.dispatch("CloseWindow",{dialog:bn})},pt=bn=>{g.push(bn),rt(bn)},xt=bn=>{ut(bn),g=Bn(g,Pn=>Pn!==bn),g.length===0&&c.focus()},Et=()=>Xt.from(g[g.length-1]),Ft=bn=>{c.editorManager.setActive(c),n5(c),c.ui.show();const Pn=bn();return pt(Pn),Pn},Vt=(bn,Pn)=>Ft(()=>$().open(bn,Pn,xt)),Kt=bn=>Ft(()=>$().openUrl(bn,xt)),en=(bn,Pn,ao)=>{const po=$();po.alert(bn,et(ao||po,Pn))},mn=(bn,Pn,ao)=>{const po=$();po.confirm(bn,et(ao||po,Pn))},Sn=()=>{Et().each(bn=>{$().close(bn),xt(bn)})};return c.on("remove",()=>{sn(g,bn=>{$().close(bn)})}),{open:Vt,openUrl:Kt,alert:en,confirm:mn,close:Sn}},HH=(c,g)=>{c.notificationManager.open({type:"error",text:g})},lD=(c,g)=>{c._skinLoaded?HH(c,g):c.on("SkinLoaded",()=>{HH(c,g)})},IJ=(c,g)=>{lD(c,$1.translate(["Failed to upload image: {0}",g]))},NI=(c,g,$)=>{kv(c,g,{message:$}),console.error($)},W5=(c,g,$)=>$?`Failed to load ${c}: ${$} from url ${g}`:`Failed to load ${c} url: ${g}`,RJ=(c,g,$)=>{NI(c,"PluginLoadError",W5("plugin",g,$))},MJ=(c,g,$)=>{NI(c,"IconsLoadError",W5("icons",g,$))},PJ=(c,g,$)=>{NI(c,"LanguageLoadError",W5("language",g,$))},Bie=(c,g,$)=>{NI(c,"ThemeLoadError",W5("theme",g,$))},Px=(c,g,$)=>{NI(c,"ModelLoadError",W5("model",g,$))},$F=(c,g,$)=>{const et=$1.translate(["Failed to initialize plugin: {0}",g]);kv(c,"PluginLoadError",{message:et}),cD(et,$),lD(c,et)},cD=(c,...g)=>{const $=window.console;$&&($.error?$.error(c,...g):$.log(c,...g))},OJ=c=>/^[a-z0-9\-]+$/i.test(c),GF=c=>"content/"+c+"/content.css",DJ=c=>tinymce.Resource.has(GF(c)),bu=c=>LI(c,M2(c)),NJ=c=>LI(c,zL(c)),LI=(c,g)=>{const $=c.editorManager.baseURL+"/skins/content",rt=`content${c.editorManager.suffix}.css`;return Nn(g,ut=>DJ(ut)?ut:OJ(ut)&&!c.inline?`${$}/${ut}/${rt}`:c.documentBaseURI.toAbsolute(ut))},LJ=c=>{c.contentCSS=c.contentCSS.concat(bu(c),NJ(c))},FJ=c=>c?Ts(c.getElementsByTagName("img")):[],zJ=(c,g)=>{const $={};return{findAll:(rt,ut=xo)=>{const pt=Bn(FJ(rt),Et=>{const Ft=Et.src;return Et.hasAttribute("data-mce-bogus")||Et.hasAttribute("data-mce-placeholder")||!Ft||Ft===Xr.transparentSrc?!1:As(Ft,"blob:")?!c.isUploaded(Ft)&&ut(Et):As(Ft,"data:")?ut(Et):!1}),xt=Nn(pt,Et=>{const Ft=Et.src;if(es($,Ft))return $[Ft].then(Vt=>Tt(Vt)?Vt:{image:Et,blobInfo:Vt.blobInfo});{const Vt=T5(g,Ft).then(Kt=>(delete $[Ft],{image:Et,blobInfo:Kt})).catch(Kt=>(delete $[Ft],Kt));return $[Ft]=Vt,Vt}});return Promise.all(xt)}}},jF=()=>{let $={};const et=(en,mn)=>({status:en,resultUri:mn}),rt=en=>en in $;return{hasBlobUri:rt,getResultUri:en=>{const mn=$[en];return mn?mn.resultUri:null},isPending:en=>rt(en)?$[en].status===1:!1,isUploaded:en=>rt(en)?$[en].status===2:!1,markPending:en=>{$[en]=et(1,null)},markUploaded:(en,mn)=>{$[en]=et(2,mn)},removeFailed:en=>{delete $[en]},destroy:()=>{$={}}}};let RS=0;const _b=()=>{const c=()=>Math.round(uE()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+c()+c()+c()},q5=c=>c+RS+++_b(),MS=()=>{let c=[];const g=Kt=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[Kt.toLowerCase()]||"dat",$=(Kt,en,mn,Sn,bn)=>{if(Tt(Kt))return et({id:Kt,name:Sn,filename:bn,blob:en,base64:mn});if(Gt(Kt))return et(Kt);throw new Error("Unknown input type")},et=Kt=>{if(!Kt.blob||!Kt.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const en=Kt.id||q5("blobid"),mn=Kt.name||en,Sn=Kt.blob;return{id:cn(en),name:cn(mn),filename:cn(Kt.filename||mn+"."+g(Sn.type)),blob:cn(Sn),base64:cn(Kt.base64),blobUri:cn(Kt.blobUri||URL.createObjectURL(Sn)),uri:cn(Kt.uri)}},rt=Kt=>{pt(Kt.id())||c.push(Kt)},ut=Kt=>Qn(c,Kt).getOrUndefined(),pt=Kt=>ut(en=>en.id()===Kt);return{create:$,add:rt,get:pt,getByUri:Kt=>ut(en=>en.blobUri()===Kt),getByData:(Kt,en)=>ut(mn=>mn.base64()===Kt&&mn.blob().type===en),findFirst:ut,removeByUri:Kt=>{c=Bn(c,en=>en.blobUri()===Kt?(URL.revokeObjectURL(en.blobUri()),!1):!0)},destroy:()=>{sn(c,Kt=>{URL.revokeObjectURL(Kt.blobUri())}),c=[]}}},Dw=(c,g)=>{const $={},et=(bn,Pn)=>bn?bn.replace(/\/$/,"")+"/"+Pn.replace(/^\//,""):Pn,rt=(bn,Pn)=>new Promise((ao,po)=>{const wo=new XMLHttpRequest;wo.open("POST",g.url),wo.withCredentials=g.credentials,wo.upload.onprogress=sr=>{Pn(sr.loaded/sr.total*100)},wo.onerror=()=>{po("Image upload failed due to a XHR Transport error. Code: "+wo.status)},wo.onload=()=>{if(wo.status<200||wo.status>=300){po("HTTP Error: "+wo.status);return}const sr=JSON.parse(wo.responseText);if(!sr||!Tt(sr.location)){po("Invalid JSON: "+wo.responseText);return}ao(et(g.basePath,sr.location))};const Io=new FormData;Io.append("file",bn.blob(),bn.filename()),wo.send(Io)}),ut=Wt(g.handler)?g.handler:rt,pt=()=>new Promise(bn=>{bn([])}),xt=(bn,Pn)=>({url:Pn,blobInfo:bn,status:!0}),Et=(bn,Pn)=>({url:"",blobInfo:bn,status:!1,error:Pn}),Ft=(bn,Pn)=>{dr.each($[bn],ao=>{ao(Pn)}),delete $[bn]},Vt=(bn,Pn,ao)=>(c.markPending(bn.blobUri()),new Promise(po=>{let wo,Io;try{const sr=()=>{wo&&(wo.close(),Io=hn)},br=Ko=>{sr(),c.markUploaded(bn.blobUri(),Ko),Ft(bn.blobUri(),xt(bn,Ko)),po(xt(bn,Ko))},jr=Ko=>{sr(),c.removeFailed(bn.blobUri()),Ft(bn.blobUri(),Et(bn,Ko)),po(Et(bn,Ko))};Io=Ko=>{Ko<0||Ko>100||Xt.from(wo).orThunk(()=>Xt.from(ao).map(oo)).each(Fo=>{wo=Fo,Fo.progressBar.value(Ko)})},Pn(bn,Io).then(br,Ko=>{jr(Tt(Ko)?{message:Ko}:Ko)})}catch(sr){po(Et(bn,sr))}})),Kt=bn=>bn===rt,en=bn=>{const Pn=bn.blobUri();return new Promise(ao=>{$[Pn]=$[Pn]||[],$[Pn].push(ao)})},mn=(bn,Pn)=>(bn=dr.grep(bn,ao=>!c.isUploaded(ao.blobUri())),Promise.all(dr.map(bn,ao=>c.isPending(ao.blobUri())?en(ao):Vt(ao,ut,Pn))));return{upload:(bn,Pn)=>!g.url&&Kt(ut)?pt():mn(bn,Pn)}},FI=c=>()=>c.notificationManager.open({text:c.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),uD=(c,g)=>Dw(g,{url:aR(c),basePath:lR(c),credentials:cR(c),handler:FM(c)}),HF=c=>{const g=jF(),$=uD(c,g);return{upload:(et,rt=!0)=>$.upload(et,rt?FI(c):void 0)}},UH=(c,g)=>c.dom.isEmpty(g.dom)&&ln(c.schema.getTextBlockElements()[En(g)]),VH=c=>g=>{UH(c,g)&&qp(g,eo.fromHtml('<br data-mce-bogus="1" />'))},BJ=c=>{const g=MS();let $,et;const rt=jF(),ut=[],pt=wo=>Io=>c.selection?wo(Io):[],xt=wo=>wo+(wo.indexOf("?")===-1?"?":"&")+new Date().getTime(),Et=(wo,Io,sr)=>{let br=0;do br=wo.indexOf(Io,br),br!==-1&&(wo=wo.substring(0,br)+sr+wo.substr(br+Io.length),br+=sr.length-Io.length+1);while(br!==-1);return wo},Ft=(wo,Io,sr)=>{const br=`src="${sr}"${sr===Xr.transparentSrc?' data-mce-placeholder="1"':""}`;return wo=Et(wo,`src="${Io}"`,br),wo=Et(wo,'data-mce-src="'+Io+'"','data-mce-src="'+sr+'"'),wo},Vt=(wo,Io)=>{sn(c.undoManager.data,sr=>{sr.type==="fragmented"?sr.fragments=Nn(sr.fragments,br=>Ft(br,wo,Io)):sr.content=Ft(sr.content,wo,Io)})},Kt=(wo,Io)=>{const sr=c.convertURL(Io,"src");Vt(wo.src,Io),Pp(eo.fromDom(wo),{src:xm(c)?xt(Io):Io,"data-mce-src":sr})},en=()=>($||($=uD(c,rt)),Pn().then(pt(wo=>{const Io=Nn(wo,sr=>sr.blobInfo);return $.upload(Io,FI(c)).then(pt(sr=>{const br=[];let jr=!1;const Ko=Nn(sr,(Fo,lr)=>{const{blobInfo:Hr,image:bs}=wo[lr];let Al=!1;return Fo.status&&yu(c)?(Fo.url&&!ms(bs.src,Fo.url)&&(jr=!0),g.removeByUri(bs.src),Ow(c)||Kt(bs,Fo.url)):Fo.error&&(Fo.error.remove&&(Vt(bs.src,Xr.transparentSrc),br.push(bs),Al=!0),IJ(c,Fo.error.message)),{element:bs,status:Fo.status,uploadUri:Fo.url,blobInfo:Hr,removed:Al}});return br.length>0&&!Ow(c)?c.undoManager.transact(()=>{sn(dv(br),Fo=>{const lr=zm(Fo);_u(Fo),lr.each(VH(c)),g.removeByUri(Fo.dom.src)})}):jr&&c.undoManager.dispatchChange(),Ko}))}))),mn=()=>i0(c)?en():Promise.resolve([]),Sn=wo=>Co(ut,Io=>Io(wo)),bn=wo=>{ut.push(wo)},Pn=()=>(et||(et=zJ(rt,g)),et.findAll(c.getBody(),Sn).then(pt(wo=>{const Io=Bn(wo,sr=>Tt(sr)?(lD(c,sr),!1):sr.uriType!=="blob");return Ow(c)||sn(Io,sr=>{Vt(sr.image.src,sr.blobInfo.blobUri()),sr.image.src=sr.blobInfo.blobUri(),sr.image.removeAttribute("data-mce-src")}),Io}))),ao=()=>{g.destroy(),rt.destroy(),et=$=null},po=wo=>wo.replace(/src="(blob:[^"]+)"/g,(Io,sr)=>{const br=rt.getResultUri(sr);if(br)return'src="'+br+'"';let jr=g.getByUri(sr);return jr||(jr=Wn(c.editorManager.get(),(Ko,Fo)=>Ko||Fo.editorUpload&&Fo.editorUpload.blobCache.getByUri(sr),void 0)),jr?'src="data:'+jr.blob().type+";base64,"+jr.base64()+'"':Io});return c.on("SetContent",()=>{i0(c)?mn():Pn()}),c.on("RawSaveContent",wo=>{wo.content=po(wo.content)}),c.on("GetContent",wo=>{wo.source_view||wo.format==="raw"||wo.format==="tree"||(wo.content=po(wo.content))}),c.on("PostRender",()=>{c.parser.addNodeFilter("img",wo=>{sn(wo,Io=>{const sr=Io.attr("src");if(!sr||g.getByUri(sr))return;const br=rt.getResultUri(sr);br&&Io.attr("src",br)})})}),{blobCache:g,addFilter:bn,uploadImages:en,uploadImagesAuto:mn,scanForImages:Pn,destroy:ao}},$J=c=>{const g=c.dom,$=c.schema.type,et={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:rt=>{g.setStyle(rt,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:rt=>{g.setStyle(rt,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const rt={inline:"span",styles:{textDecoration:"line-through"},exact:!0},ut={inline:"strike",remove:"all",preserve_attributes:["class","style"]},pt={inline:"s",remove:"all",preserve_attributes:["class","style"]};return $!=="html4"?[pt,rt,ut]:[rt,pt,ut]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(rt,ut,pt)=>Fr(rt)&&rt.hasAttribute("href"),onformat:(rt,ut,pt)=>{dr.each(pt,(xt,Et)=>{g.setAttrib(rt,Et,xt)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":rt=>{var ut;return(ut=rt==null?void 0:rt.customValue)!==null&&ut!==void 0?ut:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return dr.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),rt=>{et[rt]={block:rt,remove:"all"}}),et},UF={remove_similar:!0,inherit:!1},_A={selector:"td,th",...UF},WH={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},..._A},tablecellverticalalign:{styles:{"vertical-align":"%value"},..._A},tablecellbordercolor:{styles:{borderColor:"%value"},..._A},tablecellclass:{classes:["%value"],..._A},tableclass:{selector:"table",classes:["%value"],...UF},tablecellborderstyle:{styles:{borderStyle:"%value"},..._A},tablecellborderwidth:{styles:{borderWidth:"%value"},..._A}},qH=cn(WH),VF=c=>{const g={},$=pt=>ln(pt)?g[pt]:g,et=pt=>es(g,pt),rt=(pt,xt)=>{pt&&(Tt(pt)?(qt(xt)||(xt=[xt]),sn(xt,Et=>{fn(Et.deep)&&(Et.deep=!wv(Et)),fn(Et.split)&&(Et.split=!wv(Et)||jm(Et)),fn(Et.remove)&&wv(Et)&&!jm(Et)&&(Et.remove="none"),wv(Et)&&jm(Et)&&(Et.mixed=!0,Et.block_expand=!0),Tt(Et.classes)&&(Et.classes=Et.classes.split(/\s+/))}),g[pt]=xt):or(pt,(Et,Ft)=>{rt(Ft,Et)}))},ut=pt=>(pt&&g[pt]&&delete g[pt],g);return rt($J(c)),rt(qH()),rt(IT(c)),{get:$,has:et,register:rt,unregister:ut}},WF=dr.each,J1=Uu.DOM,ZH=c=>ln(c)&&Gt(c),KH=(c,g)=>{const $=g&&g.schema||xu({}),et=(Et,Ft)=>{Ft.classes.length>0&&J1.addClass(Et,Ft.classes.join(" ")),J1.setAttribs(Et,Ft.attrs)},rt=Et=>{const Ft=Tt(Et)?{name:Et,classes:[],attrs:{}}:Et,Vt=J1.create(Ft.name);return et(Vt,Ft),Vt},ut=(Et,Ft)=>{const Vt=$.getElementRule(Et.nodeName.toLowerCase()),Kt=Vt==null?void 0:Vt.parentsRequired;return Kt&&Kt.length?Ft&&yn(Kt,Ft)?Ft:Kt[0]:!1},pt=(Et,Ft,Vt)=>{let Kt;const en=Ft[0],mn=ZH(en)?en.name:void 0,Sn=ut(Et,mn);if(Sn)mn===Sn?(Kt=en,Ft=Ft.slice(1)):Kt=Sn;else if(en)Kt=en,Ft=Ft.slice(1);else if(!Vt)return Et;const bn=Kt?rt(Kt):J1.create("div");bn.appendChild(Et),Vt&&dr.each(Vt,ao=>{const po=rt(ao);bn.insertBefore(po,Et)});const Pn=ZH(Kt)?Kt.siblings:void 0;return pt(bn,Ft,Pn)},xt=J1.create("div");if(c.length>0){const Et=c[0],Ft=rt(Et),Vt=ZH(Et)?Et.siblings:void 0;xt.appendChild(pt(Ft,c.slice(1),Vt))}return xt},GJ=c=>{c=dr.trim(c);let g="div";const $={name:g,classes:[],attrs:{},selector:c};return c!=="*"&&(g=c.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(et,rt,ut,pt,xt)=>{switch(rt){case"#":$.attrs.id=ut;break;case".":$.classes.push(ut);break;case":":dr.inArray("checked disabled enabled read-only required".split(" "),ut)!==-1&&($.attrs[ut]=ut);break}if(pt==="["){const Et=xt.match(/([\w\-]+)(?:\=\"([^\"]+))?/);Et&&($.attrs[Et[1]]=Et[2])}return""})),$.name=g||"div",$},Nw=c=>Tt(c)?(c=c.split(/\s*,\s*/)[0],c=c.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),dr.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),g=>{const $=dr.map(g.split(/(?:~\+|~|\+)/),GJ),et=$.pop();return $.length&&(et.siblings=$),et}).reverse()):[],$ie=(c,g)=>{let $="",et=GM(c);if(et==="")return"";const rt=en=>Tt(en)?en.replace(/%(\w+)/g,""):"",ut=(en,mn)=>J1.getStyle(mn??c.getBody(),en,!0);if(Tt(g)){const en=c.formatter.get(g);if(!en)return"";g=en[0]}if("preview"in g){const en=g.preview;if(en===!1)return"";et=en||et}let pt=g.block||g.inline||"span",xt;const Et=Nw(g.selector);Et.length>0?(Et[0].name||(Et[0].name=pt),pt=g.selector,xt=KH(Et,c)):xt=KH([pt],c);const Ft=J1.select(pt,xt)[0]||xt.firstChild;WF(g.styles,(en,mn)=>{const Sn=rt(en);Sn&&J1.setStyle(Ft,mn,Sn)}),WF(g.attributes,(en,mn)=>{const Sn=rt(en);Sn&&J1.setAttrib(Ft,mn,Sn)}),WF(g.classes,en=>{const mn=rt(en);J1.hasClass(Ft,mn)||J1.addClass(Ft,mn)}),c.dispatch("PreviewFormats"),J1.setStyles(xt,{position:"absolute",left:-65535}),c.getBody().appendChild(xt);const Vt=ut("fontSize"),Kt=/px$/.test(Vt)?parseInt(Vt,10):0;return WF(et.split(" "),en=>{let mn=ut(en,Ft);if(!(en==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(mn)&&(mn=ut(en),aE(mn).toLowerCase()==="#ffffff"))&&!(en==="color"&&aE(mn).toLowerCase()==="#000000")){if(en==="font-size"&&/em|%$/.test(mn)){if(Kt===0)return;mn=parseFloat(mn)/(/%$/.test(mn)?100:1)*Kt+"px"}en==="border"&&mn&&($+="padding:0 2px;"),$+=en+":"+mn+";"}}),c.dispatch("AfterPreviewFormats"),J1.remove(xt),$},Gie=c=>{c.addShortcut("meta+b","","Bold"),c.addShortcut("meta+i","","Italic"),c.addShortcut("meta+u","","Underline");for(let g=1;g<=6;g++)c.addShortcut("access+"+g,"",["FormatBlock",!1,"h"+g]);c.addShortcut("access+7","",["FormatBlock",!1,"p"]),c.addShortcut("access+8","",["FormatBlock",!1,"div"]),c.addShortcut("access+9","",["FormatBlock",!1,"address"])},YH=c=>{const g=VF(c),$=Ru({});return Gie(c),nG(c),Ow(c)||LY($,c),{get:g.get,has:g.has,register:g.register,unregister:g.unregister,apply:(et,rt,ut)=>{SH(c,et,rt,ut)},remove:(et,rt,ut,pt)=>{jX(c,et,rt,ut,pt)},toggle:(et,rt,ut)=>{HX(c,et,rt,ut)},match:(et,rt,ut,pt)=>oD(c,et,rt,ut,pt),closest:et=>kH(c,et),matchAll:(et,rt)=>BX(c,et,rt),matchNode:(et,rt,ut,pt)=>$X(c,et,rt,ut,pt),canApply:et=>GX(c,et),formatChanged:(et,rt,ut,pt)=>UX(c,$,et,rt,ut,pt),getCssText:Tn($ie,c)}},zI=c=>{switch(c.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},jJ=(c,g,$)=>{const et=Ru(!1),rt=Et=>{tD(g,!1,$),g.add({},Et)};c.on("init",()=>{g.add()}),c.on("BeforeExecCommand",Et=>{const Ft=Et.command;zI(Ft)||(uH(g,$),g.beforeChange())}),c.on("ExecCommand",Et=>{const Ft=Et.command;zI(Ft)||rt(Et)}),c.on("ObjectResizeStart cut",()=>{g.beforeChange()}),c.on("SaveContent ObjectResized blur",rt),c.on("dragend",rt),c.on("keyup",Et=>{const Ft=Et.keyCode;if(Et.isDefaultPrevented())return;const Vt=Xr.os.isMacOS()&&Et.key==="Meta";(Ft>=33&&Ft<=36||Ft>=37&&Ft<=40||Ft===45||Et.ctrlKey||Vt)&&(rt(),c.nodeChanged()),(Ft===46||Ft===8)&&c.nodeChanged(),et.get()&&g.typing&&!G5(B5(c),g.data[0])&&(c.isDirty()||c.setDirty(!0),c.dispatch("TypingUndo"),et.set(!1),c.nodeChanged())}),c.on("keydown",Et=>{const Ft=Et.keyCode;if(Et.isDefaultPrevented())return;if(Ft>=33&&Ft<=36||Ft>=37&&Ft<=40||Ft===45){g.typing&&rt(Et);return}const Vt=Et.ctrlKey&&!Et.altKey||Et.metaKey;if((Ft<16||Ft>20)&&Ft!==224&&Ft!==91&&!g.typing&&!Vt){g.beforeChange(),tD(g,!0,$),g.add({},Et),et.set(!0);return}(Xr.os.isMacOS()?Et.metaKey:Et.ctrlKey&&!Et.altKey)&&g.beforeChange()}),c.on("mousedown",Et=>{g.typing&&rt(Et)});const ut=Et=>Et.inputType==="insertReplacementText",pt=Et=>Et.inputType==="insertText"&&Et.data===null,xt=Et=>Et.inputType==="insertFromPaste"||Et.inputType==="insertFromDrop";c.on("input",Et=>{Et.inputType&&(ut(Et)||pt(Et)||xt(Et))&&rt(Et)}),c.on("AddUndo Undo Redo ClearUndos",Et=>{Et.isDefaultPrevented()||c.nodeChanged()})},XH=c=>{c.addShortcut("meta+z","","Undo"),c.addShortcut("meta+y,meta+shift+z","","Redo")},qF=c=>{const g=Em(),$=Ru(0),et=Ru(0),rt={data:[],typing:!1,beforeChange:()=>{bH(c,$,g)},add:(ut,pt)=>IF(c,rt,et,$,g,ut,pt),dispatchChange:()=>{c.setDirty(!0);const ut=B5(c);ut.bookmark=wT(c.selection),c.dispatch("change",{level:ut,lastLevel:us(rt.data,et.get()).getOrUndefined()})},undo:()=>vH(c,rt,$,et),redo:()=>_H(c,et,rt.data),clear:()=>{RF(c,rt,et)},reset:()=>{xH(c,rt)},hasUndo:()=>wH(c,rt,et),hasRedo:()=>CH(c,rt,et),transact:ut=>FX(c,rt,$,ut),ignore:ut=>{MF(c,$,ut)},extra:(ut,pt)=>{zX(c,rt,et,ut,pt)}};return Ow(c)||jJ(c,rt,$),XH(c),rt},JH=[9,27,Gr.HOME,Gr.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Gr.DOWN,Gr.UP,Gr.LEFT,Gr.RIGHT].concat(Xr.browser.isFirefox()?[224]:[]),QH="data-mce-placeholder",eU=c=>c.type==="keydown"||c.type==="keyup",oC=c=>{const g=c.keyCode;return g===Gr.BACKSPACE||g===Gr.DELETE},HJ=c=>{if(eU(c)){const g=c.keyCode;return!oC(c)&&(Gr.metaKeyPressed(c)||c.altKey||g>=112&&g<=123||yn(JH,g))}else return!1},UJ=c=>eU(c)&&!(oC(c)||c.type==="keyup"&&c.keyCode===229),VJ=(c,g,$)=>{if(c.isEmpty(g,void 0,{skipBogus:!1,includeZwsp:!0})){const et=g.firstElementChild;return et?c.getStyle(g.firstElementChild,"padding-left")||c.getStyle(g.firstElementChild,"padding-right")?!1:$===et.nodeName.toLowerCase():!0}else return!1},WJ=c=>{var g;const $=c.dom,et=h0(c),rt=(g=L_(c))!==null&&g!==void 0?g:"",ut=(pt,xt)=>{if(HJ(pt))return;const Et=c.getBody(),Ft=UJ(pt)?!1:VJ($,Et,et);($.getAttrib(Et,QH)!==""!==Ft||xt)&&($.setAttrib(Et,QH,Ft?rt:null),S0(c,Ft),c.on(Ft?"keydown":"keyup",ut),c.off(Ft?"keyup":"keydown",ut))};Cs(rt)&&c.on("init",pt=>{ut(pt,!0),c.on("change SetContent ExecCommand",ut),c.on("paste",xt=>o1.setEditorTimeout(c,()=>ut(xt)))})},qJ=(c,g)=>({block:c,position:g}),ZJ=(c,g)=>({from:c,to:g}),ZF=(c,g)=>{const $=eo.fromDom(c),et=eo.fromDom(g.container());return nA($,et).map(rt=>qJ(rt,g))},KJ=c=>!(Fm(c.to.block,c.from.block)||Fm(c.from.block,c.to.block)),YJ=c=>!ba(c.from.block,c.to.block),Z5=(c,g)=>tp(g,rt=>fE(rt)||Qo(rt.dom),rt=>ba(rt,c)).filter(_i).getOr(c),XJ=(c,g)=>{const $=eo.fromDom(c);return ba(Z5($,g.from.block),Z5($,g.to.block))},JJ=c=>nu(c.from.block.dom)===!1&&nu(c.to.block.dom)===!1,jie=c=>{const g=$=>Ey($)||Sy($.dom)||_2($);return g(c.from.block)&&g(c.to.block)},K5=(c,g,$,et)=>tu(et.position.getNode())&&!r0(c,et.block)?F2(!1,et.block.dom).bind(rt=>rt.isEqual(et.position)?Zy($,g,rt).bind(ut=>ZF(g,ut)):Xt.some(et)).getOr(et):et,QJ=(c,g,$,et)=>{const rt=ZF(g,Uo.fromRangeStart(et)),ut=rt.bind(pt=>Zy($,g,pt.position).bind(xt=>ZF(g,xt).map(Et=>K5(c,g,$,Et))));return js(rt,ut,ZJ).filter(pt=>YJ(pt)&&XJ(g,pt)&&JJ(pt)&&jie(pt)&&KJ(pt))},KF=(c,g,$,et)=>et.collapsed?QJ(c,g,$,et):Xt.none(),eQ=(c,g)=>{const $=tm(c);return vo($,et=>g.isBlock(En(et))).fold(cn($),et=>$.slice(0,et))},tU=(c,g)=>{const $=eQ(c,g);return sn($,_u),$},nU=(c,g,$)=>{const et=Rw($,g);return Qn(et.reverse(),rt=>r0(c,rt)).each(_u)},tQ=(c,g)=>Bn(gC(g),$=>!r0(c,$)).length===0,xA=(c,g,$,et,rt)=>{if(r0(et,$))return P_($),G0($.dom);tQ(et,rt)&&r0(et,g)&&Iu(rt,eo.fromTag("br"));const ut=Ry($.dom,Uo.before(rt.dom));return sn(tU(g,et),pt=>{Iu(rt,pt)}),nU(et,c,g),ut},wA=(c,g)=>c.isInline(En(g)),dD=(c,g,$,et)=>{if(r0(et,$)){if(r0(et,g)){const pt=Eo((xt=>{const Et=(Ft,Vt)=>e0(Ft).fold(()=>Vt,Kt=>wA(et,Kt)?Et(Kt,Vt.concat(Yv(Kt))):Vt);return Et(xt,[])})($),(xt,Et)=>(wy(xt,Et),Et),j1());x_(g),qp(g,pt)}return _u($),G0(g.dom)}const rt=Ky($.dom);return sn(tU(g,et),ut=>{qp($,ut)}),nU(et,c,g),rt},fD=(c,g)=>{const $=Rw(g,c);return Xt.from($[$.length-1])},CA=(c,g)=>Fm(g,c)?fD(g,c):Xt.none(),PS=(c,g)=>{F2(c,g.dom).bind($=>Xt.from($.getNode())).map(eo.fromDom).filter(gx).each(_u)},Y5=(c,g,$,et)=>(PS(!0,g),PS(!1,$),CA(g,$).fold(Tn(dD,c,g,$,et),Tn(xA,c,g,$,et))),X5=(c,g,$,et,rt)=>g?Y5(c,et,$,rt):Y5(c,$,et,rt),hD=(c,g)=>{const $=eo.fromDom(c.getBody());return KF(c.schema,$.dom,g,c.selection.getRng()).map(rt=>()=>{X5($,g,rt.from.block,rt.to.block,c.schema).each(ut=>{c.selection.setRng(ut.toRange())})})},YF=(c,g,$)=>{const et=g.getRng();return js(nA(c,eo.fromDom(et.startContainer)),nA(c,eo.fromDom(et.endContainer)),(rt,ut)=>ba(rt,ut)?Xt.none():Xt.some(()=>{et.deleteContents(),X5(c,!0,rt,ut,$).each(pt=>{g.setRng(pt.toRange())})})).getOr(Xt.none())},pD=(c,g)=>{const $=eo.fromDom(g),et=Tn(ba,c);return ep($,fE,et).isSome()},oU=(c,g)=>pD(c,g.startContainer)||pD(c,g.endContainer),rU=(c,g)=>{const $=Ry(c.dom,Uo.fromRangeStart(g)).isNone(),et=$0(c.dom,Uo.fromRangeEnd(g)).isNone();return!oU(c,g)&&$&&et},BI=c=>Xt.some(()=>{c.setContent(""),c.selection.setCursorLocation()}),sU=c=>{const g=eo.fromDom(c.getBody()),$=c.selection.getRng();return rU(g,$)?BI(c):YF(g,c.selection,c.schema)},gD=(c,g)=>c.selection.isCollapsed()?Xt.none():sU(c),Lw=(c,g,$,et,rt)=>Xt.from(g._selectionOverrides.showCaret(c,$,et,rt)),mD=c=>{const g=c.ownerDocument.createRange();return g.selectNode(c),g},$I=(c,g)=>c.dispatch("BeforeObjectSelected",{target:g}).isDefaultPrevented()?Xt.none():Xt.some(mD(g)),iU=(c,g,$)=>{const et=ER(1,c.getBody(),g),rt=Uo.fromRangeStart(et),ut=rt.getNode();if(N2(ut))return Lw(1,c,ut,!rt.isAtEnd(),!1);const pt=rt.getNode(!0);if(N2(pt))return Lw(1,c,pt,!1,!1);const xt=$_(c.dom.getRoot(),rt.getNode());return N2(xt)?Lw(1,c,xt,!1,$):Xt.none()},yD=(c,g,$)=>g.collapsed?iU(c,g,$).getOr(g):g,aU=c=>mS(c)||xI(c),rC=c=>yS(c)||r5(c),OS=(c,g)=>{pr(g)&&g.data.length===0&&c.remove(g)},Q1=(c,g,$,et,rt,ut)=>{Lw(et,c,ut.getNode(!rt),rt,!0).each(pt=>{if(g.collapsed){const xt=g.cloneRange();rt?xt.setEnd(pt.startContainer,pt.startOffset):xt.setStart(pt.endContainer,pt.endOffset),xt.deleteContents()}else g.deleteContents();c.selection.setRng(pt)}),OS(c.dom,$)},nQ=(c,g)=>{const $=c.selection.getRng();if(!pr($.commonAncestorContainer))return Xt.none();const et=g?l0.Forwards:l0.Backwards,rt=p0(c.getBody()),ut=Tn(AR,g?rt.next:rt.prev),pt=g?aU:rC,xt=L2(et,c.getBody(),$),Et=ut(xt),Ft=Et&&Z1(g,Et);if(!Ft||!LE(xt,Ft))return Xt.none();if(pt(Ft))return Xt.some(()=>Q1(c,$,xt.getNode(),et,g,Ft));const Vt=ut(Ft);return Vt&&pt(Vt)&&LE(Ft,Vt)?Xt.some(()=>Q1(c,$,xt.getNode(),et,g,Vt)):Xt.none()},XF=(c,g)=>nQ(c,g),JF=(c,g)=>{const $=c.getBody();return g?G0($).filter(mS):Ky($).filter(yS)},QF=c=>{const g=c.selection.getRng();return!g.collapsed&&(JF(c,!0).exists($=>$.isEqual(Uo.fromRangeStart(g)))||JF(c,!1).exists($=>$.isEqual(Uo.fromRangeEnd(g))))},oQ=c=>ln(c)&&(fE(eo.fromDom(c))||_2(eo.fromDom(c))),c1=vv.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),rQ=(c,g)=>{const $=g.getNode(!c),et=c?"after":"before";return Fr($)&&$.getAttribute("data-mce-caret")===et},sQ=(c,g,$,et,rt)=>{const ut=pt=>rt.isInline(pt.nodeName.toLowerCase())&&!H1($,et,c);return $T(!g,$).fold(()=>$T(g,et).fold(Dn,ut),ut)},lU=(c,g,$,et,rt)=>{const ut=rt.getNode(!$);return nA(eo.fromDom(g),eo.fromDom(et.getNode())).map(pt=>r0(c,pt)?c1.remove(pt.dom):c1.moveToElement(ut)).orThunk(()=>Xt.some(c1.moveToElement(ut)))},cU=(c,g,$,et)=>Zy(g,c,$).bind(rt=>oQ(rt.getNode())||sQ(c,g,$,rt,et)?Xt.none():g&&nu(rt.getNode())||!g&&nu(rt.getNode(!0))?lU(et,c,g,$,rt):g&&yS($)||!g&&mS($)?Xt.some(c1.moveToPosition(rt)):Xt.none()),iQ=(c,g)=>Mn(g)?Xt.none():c&&nu(g.nextSibling)?Xt.some(c1.moveToElement(g.nextSibling)):!c&&nu(g.previousSibling)?Xt.some(c1.moveToElement(g.previousSibling)):Xt.none(),aQ=(c,g,$)=>$.fold(et=>Xt.some(c1.remove(et)),et=>Xt.some(c1.moveToElement(et)),et=>H1(g,et,c)?Xt.none():Xt.some(c1.moveToPosition(et))),e7=(c,g,$,et)=>rQ(g,$)?iQ(g,$.getNode(!g)).orThunk(()=>cU(c,g,$,et)):cU(c,g,$,et).bind(rt=>aQ(c,$,rt)),t7=(c,g,$,et)=>{const rt=ER(g?1:-1,c,$),ut=Uo.fromRangeStart(rt),pt=eo.fromDom(c);return!g&&yS(ut)?Xt.some(c1.remove(ut.getNode(!0))):g&&mS(ut)?Xt.some(c1.remove(ut.getNode())):!g&&mS(ut)&&sO(pt,ut,et)?Fs(pt,ut,et).map(xt=>c1.remove(xt.getNode())):g&&yS(ut)&&o6(pt,ut,et)?DK(pt,ut,et).map(xt=>c1.remove(xt.getNode())):e7(c,g,ut,et)},uU=(c,g)=>$=>(c._selectionOverrides.hideFakeCaret(),eA(c,g,eo.fromDom($)),!0),lQ=(c,g)=>$=>{const et=g?Uo.before($):Uo.after($);return c.selection.setRng(et.toRange()),!0},cQ=c=>g=>(c.selection.setRng(g.toRange()),!0),n7=(c,g)=>Xt.from($_(c.getBody(),g)),dU=(c,g)=>{const $=c.selection.getNode();return n7(c,$).filter(nu).fold(()=>t7(c.getBody(),g,c.selection.getRng(),c.schema).map(et=>()=>et.fold(uU(c,g),lQ(c,g),cQ(c))),()=>Xt.some(hn))},o7=c=>{sn(_0(c,".mce-offscreen-selection"),_u)},fU=(c,g)=>{const $=c.selection.getNode();return nu($)&&!o2($)?n7(c,$.parentNode).filter(nu).fold(()=>Xt.some(()=>{o7(eo.fromDom(c.getBody())),eA(c,g,eo.fromDom(c.selection.getNode())),bS(c)}),()=>Xt.some(hn)):QF(c)?Xt.some(()=>{r1(c,c.selection.getRng(),eo.fromDom(c.getBody()))}):Xt.none()},r7=c=>{const g=c.dom,$=c.selection,et=$_(c.getBody(),$.getNode());if(Qo(et)&&g.isBlock(et)&&g.isEmpty(et)){const rt=g.create("br",{"data-mce-bogus":"1"});g.setHTML(et,""),et.appendChild(rt),$.setRng(Uo.before(rt).toRange())}return!0},J5=(c,g)=>c.selection.isCollapsed()?dU(c,g):fU(c,g),hU=c=>c.hasOwnProperty("text"),pU=c=>c.hasOwnProperty("marker"),Ox=(c,g)=>{const $=(ut,pt)=>{if(pr(ut))return{text:ut,offset:pt};{const xt=g(),Et=ut.childNodes;return pt<Et.length?(ut.insertBefore(xt,Et[pt]),{marker:xt,before:!0}):(ut.appendChild(xt),{marker:xt,before:!1})}},et=$(c.endContainer,c.endOffset);return{start:$(c.startContainer,c.startOffset),end:et}},e_=c=>{var g,$;const{start:et,end:rt}=c,ut=new window.Range;return hU(et)?ut.setStart(et.text,et.offset):pU(et)&&(et.before?ut.setStartBefore(et.marker):ut.setStartAfter(et.marker),(g=et.marker.parentNode)===null||g===void 0||g.removeChild(et.marker)),hU(rt)?ut.setEnd(rt.text,rt.offset):pU(rt)&&(rt.before?ut.setEndBefore(rt.marker):ut.setEndAfter(rt.marker),($=rt.marker.parentNode)===null||$===void 0||$.removeChild(rt.marker)),ut},GI=(c,g)=>{var $;const et=c.dom,rt=et.getParent(c.selection.getStart(),et.isBlock),ut=et.getParent(c.selection.getEnd(),et.isBlock),pt=c.getBody();if((($=rt==null?void 0:rt.nodeName)===null||$===void 0?void 0:$.toLowerCase())==="div"&&rt&&ut&&rt===pt.firstChild&&ut===pt.lastChild&&!et.isEmpty(pt)){const Et=rt.cloneNode(!1),Ft=()=>{if(g?k$(c):Mw(c),pt.firstChild!==rt){const Vt=Ox(c.selection.getRng(),()=>document.createElement("span"));Array.from(pt.childNodes).forEach(Kt=>Et.appendChild(Kt)),pt.appendChild(Et),c.selection.setRng(e_(Vt))}};return Xt.some(Ft)}return Xt.none()},gU=(c,g)=>{const $=Uo.fromRangeStart(c.selection.getRng());return Zy(g,c.getBody(),$).filter(et=>g?_s(et):o$(et)).bind(et=>SR(g?0:-1,et)).map(et=>()=>c.selection.select(et))},jI=(c,g)=>c.selection.isCollapsed()?gU(c,g):Xt.none(),kA=pr,s7=c=>kA(c)&&c.data[0]===Am,i7=c=>kA(c)&&c.data[c.data.length-1]===Am,a7=c=>{var g;return((g=c.ownerDocument)!==null&&g!==void 0?g:document).createTextNode(Am)},mU=c=>{var g;if(kA(c.previousSibling))return i7(c.previousSibling)||c.previousSibling.appendData(Am),c.previousSibling;if(kA(c))return s7(c)||c.insertData(0,Am),c;{const $=a7(c);return(g=c.parentNode)===null||g===void 0||g.insertBefore($,c),$}},yU=c=>{var g,$;if(kA(c.nextSibling))return s7(c.nextSibling)||c.nextSibling.insertData(0,Am),c.nextSibling;if(kA(c))return i7(c)||c.appendData(Am),c;{const et=a7(c);return c.nextSibling?(g=c.parentNode)===null||g===void 0||g.insertBefore(et,c.nextSibling):($=c.parentNode)===null||$===void 0||$.appendChild(et),et}},SA=(c,g)=>c?mU(g):yU(g),l7=Tn(SA,!0),uQ=Tn(SA,!1),bU=(c,g)=>pr(c.container())?SA(g,c.container()):SA(g,c.getNode()),vU=(c,g)=>{const $=g.get();return $&&c.container()===$&&Xv($)},c7=(c,g)=>g.fold($=>{D2(c.get());const et=l7($);return c.set(et),Xt.some(Uo(et,et.length-1))},$=>G0($).map(et=>{if(vU(et,c)){const rt=c.get();return Uo(rt,1)}else{D2(c.get());const rt=bU(et,!0);return c.set(rt),Uo(rt,1)}}),$=>Ky($).map(et=>{if(vU(et,c)){const rt=c.get();return Uo(rt,rt.length-1)}else{D2(c.get());const rt=bU(et,!1);return c.set(rt),Uo(rt,rt.length-1)}}),$=>{D2(c.get());const et=uQ($);return c.set(et),Xt.some(Uo(et,1))}),u7=(c,g)=>{for(let $=0;$<c.length;$++){const et=c[$].apply(null,g);if(et.isSome())return et}return Xt.none()},Ny=vv.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),_U=(c,g)=>{const $=Iy(g,c);return $||c},d7=(c,g,$)=>{const et=x$($),rt=_U(g,et.container());return Q2(c,rt,et).fold(()=>$0(rt,et).bind(Tn(Q2,c,rt)).map(ut=>Ny.before(ut)),Xt.none)},dQ=(c,g)=>z2(c,g)===null,xU=(c,g,$)=>Q2(c,g,$).filter(Tn(dQ,g)),fQ=(c,g,$)=>{const et=w$($);return xU(c,g,et).bind(rt=>Ry(rt,et).isNone()?Xt.some(Ny.start(rt)):Xt.none())},hQ=(c,g,$)=>{const et=x$($);return xU(c,g,et).bind(rt=>$0(rt,et).isNone()?Xt.some(Ny.end(rt)):Xt.none())},pQ=(c,g,$)=>{const et=w$($),rt=_U(g,et.container());return Q2(c,rt,et).fold(()=>Ry(rt,et).bind(Tn(Q2,c,rt)).map(ut=>Ny.after(ut)),Xt.none)},wU=c=>!d6(HI(c)),Fw=(c,g,$)=>u7([d7,fQ,hQ,pQ],[c,g,$]).filter(wU),HI=c=>c.fold(fo,fo,fo,fo),bD=c=>c.fold(cn("before"),cn("start"),cn("end"),cn("after")),vD=c=>c.fold(Ny.before,Ny.before,Ny.after,Ny.after),f7=c=>c.fold(Ny.start,Ny.start,Ny.end,Ny.end),gQ=(c,g)=>bD(c)===bD(g)&&HI(c)===HI(g),mQ=(c,g,$,et,rt,ut)=>js(Q2(g,$,et),Q2(g,$,rt),(pt,xt)=>pt!==xt&&_$($,pt,xt)?Ny.after(c?pt:xt):ut).getOr(ut),CU=(c,g)=>c.fold(xo,$=>!gQ($,g)),yQ=(c,g,$,et,rt)=>{const ut=Z1(c,rt);return Zy(c,$,ut).map(Tn(Z1,c)).fold(()=>et.map(vD),Et=>Fw(g,$,Et).map(Tn(mQ,c,g,$,ut,Et)).filter(Tn(CU,et))).filter(wU)},bQ=(c,g)=>c?g.fold(Mt(Xt.some,Ny.start),Xt.none,Mt(Xt.some,Ny.after),Xt.none):g.fold(Xt.none,Mt(Xt.some,Ny.before),Xt.none,Mt(Xt.some,Ny.end)),h7=(c,g,$,et)=>{const rt=Z1(c,et),ut=Fw(g,$,rt);return Fw(g,$,rt).bind(Tn(bQ,c)).orThunk(()=>yQ(c,g,$,ut,et))},vQ=c=>Wt(c.selection.getSel().modify),kU=(c,g,$)=>{const et=c?1:-1;return g.setRng(Uo($.container(),$.offset()+et).toRange()),g.getSel().modify("move",c?"forward":"backward","word"),!0},_Q=(c,g)=>{const $=g.selection.getRng(),et=c?Uo.fromRangeEnd($):Uo.fromRangeStart($);return vQ(g)?c&&O_(et)?kU(!0,g.selection,et):!c&&mx(et)?kU(!1,g.selection,et):!1:!1};var zw;(function(c){c[c.Br=0]="Br",c[c.Block=1]="Block",c[c.Wrap=2]="Wrap",c[c.Eol=3]="Eol"})(zw||(zw={}));const _D=(c,g)=>c===l0.Backwards?Do(g):g,xQ=(c,g,$)=>c===l0.Forwards?g.next($):g.prev($),wQ=(c,g,$,et)=>tu(et.getNode(g===l0.Forwards))?zw.Br:H1($,et)===!1?zw.Block:zw.Wrap,Q5=(c,g,$,et)=>{const rt=p0($);let ut=et;const pt=[];for(;ut;){const xt=xQ(g,rt,ut);if(!xt)break;if(tu(xt.getNode(!1)))return g===l0.Forwards?{positions:_D(g,pt).concat([xt]),breakType:zw.Br,breakAt:Xt.some(xt)}:{positions:_D(g,pt),breakType:zw.Br,breakAt:Xt.some(xt)};if(!xt.isVisible()){ut=xt;continue}if(c(ut,xt)){const Et=wQ($,g,ut,xt);return{positions:_D(g,pt),breakType:Et,breakAt:Xt.some(xt)}}pt.push(xt),ut=xt}return{positions:_D(g,pt),breakType:zw.Eol,breakAt:Xt.none()}},e4=(c,g,$,et)=>g($,et).breakAt.map(rt=>{const ut=g($,rt).positions;return c===l0.Backwards?ut.concat(rt):[rt].concat(ut)}).getOr([]),p7=(c,g)=>Wn(c,($,et)=>$.fold(()=>Xt.some(et),rt=>js(wr(rt.getClientRects()),wr(et.getClientRects()),(ut,pt)=>{const xt=Math.abs(g-ut.left);return Math.abs(g-pt.left)<=xt?et:rt}).or($)),Xt.none()),xD=(c,g)=>wr(g.getClientRects()).bind($=>p7(c,$.left)),DS=Tn(Q5,Uo.isAbove,-1),t4=Tn(Q5,Uo.isBelow,1),SU=Tn(e4,-1,DS),EU=Tn(e4,1,t4),AU=(c,g)=>DS(c,g).breakAt.isNone(),TU=(c,g)=>t4(c,g).breakAt.isNone(),CQ=c=>G0(c).map(g=>[g].concat(t4(c,g).positions)).getOr([]),kQ=c=>Ky(c).map(g=>DS(c,g).positions.concat(g)).getOr([]),SQ=(c,g)=>xD(SU(c,g),g),EQ=(c,g)=>xD(EU(c,g),g),AQ=nu,IU=(c,g)=>Math.abs(c.left-g),TQ=(c,g)=>Math.abs(c.right-g),W_=c=>yl(c,"node"),wD=(c,g)=>Vn(c,($,et)=>{const rt=Math.min(IU($,g),TQ($,g)),ut=Math.min(IU(et,g),TQ(et,g));return ut===rt&&W_(et)&&AQ(et.node)||ut<rt?et:$}),RU=c=>{const g=$=>Nn($,et=>{const rt=yx(et);return rt.node=c,rt});if(Fr(c))return g(c.getClientRects());if(pr(c)){const $=c.ownerDocument.createRange();return $.setStart(c,0),$.setEnd(c,c.data.length),g($.getClientRects())}else return[]},g7=c=>ro(c,RU);var n4;(function(c){c[c.Up=-1]="Up",c[c.Down=1]="Down"})(n4||(n4={}));const MU=(c,g,$,et)=>{let rt=et;for(;rt=DE(rt,c,gM,g);)if($(rt))return},PU=(c,g,$,et,rt,ut)=>{let pt=0;const xt=[],Et=Kt=>{let en=g7([Kt]);c===-1&&(en=en.reverse());for(let mn=0;mn<en.length;mn++){const Sn=en[mn];if(!$(Sn,Ft)){if(xt.length>0&&g(Sn,Po(xt))&&pt++,Sn.line=pt,rt(Sn))return!0;xt.push(Sn)}}return!1},Ft=Po(ut.getClientRects());if(!Ft)return xt;const Vt=ut.getNode();return Vt&&(Et(Vt),MU(c,et,Et,Vt)),xt},OU=(c,g)=>g.line>c,IQ=(c,g)=>g.line===c,RQ=Tn(PU,n4.Up,Ju,pE),MQ=Tn(PU,n4.Down,pE,Ju),EA=c=>Po(c.getClientRects()),DU=(c,g,$,et)=>{const rt=p0(g);let ut,pt,xt,Et;const Ft=[];let Vt=0;c===1?(ut=rt.next,pt=pE,xt=Ju,Et=Uo.after(et)):(ut=rt.prev,pt=Ju,xt=pE,Et=Uo.before(et));const Kt=EA(Et);do{if(!Et.isVisible())continue;const en=EA(Et);if(xt(en,Kt))continue;Ft.length>0&&pt(en,Po(Ft))&&Vt++;const mn=yx(en);if(mn.position=Et,mn.line=Vt,$(mn))return Ft;Ft.push(mn)}while(Et=ut(Et));return Ft},m7=c=>g=>OU(c,g),CD=c=>g=>IQ(c,g),Dx=(c,g)=>{c.selection.setRng(g),J2(c,c.selection.getRng())},y7=(c,g,$)=>Xt.some(yD(c,g,$)),NU=(c,g,$,et,rt,ut)=>{const pt=g===l0.Forwards,xt=p0(c.getBody()),Et=Tn(AR,pt?xt.next:xt.prev),Ft=pt?et:rt;if(!$.collapsed){const Sn=gE($);if(ut(Sn))return Lw(g,c,Sn,g===l0.Backwards,!1);if(QF(c)){const bn=$.cloneRange();return bn.collapse(g===l0.Backwards),Xt.from(bn)}}const Vt=L2(g,c.getBody(),$);if(Ft(Vt))return $I(c,Vt.getNode(!pt));let Kt=Et(Vt);const en=Xu($);if(Kt)Kt=Z1(pt,Kt);else return en?Xt.some($):Xt.none();if(Ft(Kt))return Lw(g,c,Kt.getNode(!pt),pt,!1);const mn=Et(Kt);return mn&&Ft(mn)&&LE(Kt,mn)?Lw(g,c,mn.getNode(!pt),pt,!1):en?y7(c,Kt.toRange(),!1):Xt.none()},LU=(c,g,$,et,rt,ut)=>{const pt=L2(g,c.getBody(),$),xt=Po(pt.getClientRects()),Et=g===n4.Down,Ft=c.getBody();if(!xt)return Xt.none();if(QF(c)){const Pn=Et?Uo.fromRangeEnd($):Uo.fromRangeStart($);return(Et?EQ:SQ)(Ft,Pn).orThunk(()=>Xt.from(Pn)).map(po=>po.toRange())}const Kt=(Et?MQ:RQ)(Ft,m7(1),pt),en=Bn(Kt,CD(1)),mn=xt.left,Sn=wD(en,mn);if(Sn&&ut(Sn.node)){const Pn=Math.abs(mn-Sn.left),ao=Math.abs(mn-Sn.right);return Lw(g,c,Sn.node,Pn<ao,!1)}let bn;if(et(pt)?bn=pt.getNode():rt(pt)?bn=pt.getNode(!0):bn=gE($),bn){const Pn=DU(g,Ft,m7(1),bn);let ao=wD(Bn(Pn,CD(1)),mn);if(ao||(ao=Po(Bn(Pn,CD(0))),ao))return y7(c,ao.position.toRange(),!1)}return en.length===0?b7(c,Et).filter(Et?rt:et).map(Pn=>yD(c,Pn.toRange(),!1)):Xt.none()},b7=(c,g)=>{const $=c.selection.getRng(),et=g?Uo.fromRangeEnd($):Uo.fromRangeStart($),rt=r8(et.container(),c.getBody());if(g){const ut=t4(rt,et);return gs(ut.positions)}else{const ut=DS(rt,et);return wr(ut.positions)}},PQ=(c,g,$)=>b7(c,g).filter($).exists(et=>(c.selection.setRng(et.toRange()),!0)),v7=(c,g)=>{const $=c.dom.createRng();$.setStart(g.container(),g.offset()),$.setEnd(g.container(),g.offset()),c.selection.setRng($)},OQ=(c,g)=>{c?g.setAttribute("data-mce-selected","inline-boundary"):g.removeAttribute("data-mce-selected")},t_=(c,g,$)=>c7(g,$).map(et=>(v7(c,et),$)),DQ=(c,g,$)=>{const et=Uo.fromRangeStart(c);if(c.collapsed)return et;{const rt=Uo.fromRangeEnd(c);return $?Ry(g,rt).getOr(rt):$0(g,et).getOr(et)}},NQ=(c,g,$)=>{const et=c.getBody(),rt=DQ(c.selection.getRng(),et,$),ut=Tn(tA,c);return h7($,ut,et,rt).bind(xt=>t_(c,g,xt))},AA=(c,g,$)=>{const et=Nn(_0(eo.fromDom(g.getRoot()),'*[data-mce-selected="inline-boundary"]'),pt=>pt.dom),rt=Bn(et,c),ut=Bn($,c);sn(Mr(rt,ut),Tn(OQ,!1)),sn(Mr(ut,rt),Tn(OQ,!0))},FU=(c,g)=>{const $=g.get();if(c.selection.isCollapsed()&&!c.composing&&$){const et=Uo.fromRangeStart(c.selection.getRng());Uo.isTextPosition(et)&&!Dy(et)&&(v7(c,e8($,et)),g.set(null))}},LQ=(c,g,$,et)=>{if(g.selection.isCollapsed()){const rt=Bn(et,c);sn(rt,ut=>{const pt=Uo.fromRangeStart(g.selection.getRng());Fw(c,g.getBody(),pt).bind(xt=>t_(g,$,xt))})}},o4=(c,g,$)=>SE(c)?NQ(c,g,$).isSome():!1,zU=(c,g,$)=>SE(g)?_Q(c,g):!1,FQ=c=>{const g=Ru(null),$=Tn(tA,c);return c.on("NodeChange",et=>{SE(c)&&(AA($,c.dom,et.parents),FU(c,g),LQ($,c,g,et.parents))}),g},zQ=Tn(zU,!0),BQ=Tn(zU,!1),r4=(c,g,$)=>{if(SE(c)){const et=b7(c,g).getOrThunk(()=>{const rt=c.selection.getRng();return g?Uo.fromRangeEnd(rt):Uo.fromRangeStart(rt)});return Fw(Tn(tA,c),c.getBody(),et).exists(rt=>{const ut=vD(rt);return c7($,ut).exists(pt=>(v7(c,pt),!0))})}else return!1},$Q=(c,g)=>{const $=document.createRange();return $.setStart(c.container(),c.offset()),$.setEnd(g.container(),g.offset()),$},sC=c=>js(G0(c),Ky(c),(g,$)=>{const et=Z1(!0,g),rt=Z1(!1,$);return $0(c,et).forall(ut=>ut.isEqual(rt))}).getOr(!0),kD=(c,g)=>$=>c7(g,$).map(et=>()=>v7(c,et)),BU=(c,g,$,et)=>{const rt=c.getBody(),ut=Tn(tA,c);c.undoManager.ignore(()=>{c.selection.setRng($Q($,et)),Mw(c),Fw(ut,rt,Uo.fromRangeStart(c.selection.getRng())).map(f7).bind(kD(c,g)).each(Mo)}),c.nodeChanged()},GQ=(c,g)=>{const $=Iy(g,c);return $||c},jQ=(c,g,$,et)=>{const rt=GQ(c.getBody(),et.container()),ut=Tn(tA,c),pt=Fw(ut,rt,et);return pt.bind(Et=>$?Et.fold(cn(Xt.some(f7(Et))),Xt.none,cn(Xt.some(vD(Et))),Xt.none):Et.fold(Xt.none,cn(Xt.some(vD(Et))),Xt.none,cn(Xt.some(f7(Et))))).map(kD(c,g)).getOrThunk(()=>{const Et=ww($,rt,et),Ft=Et.bind(Vt=>Fw(ut,rt,Vt));return js(pt,Ft,()=>Q2(ut,rt,et).bind(Vt=>sC(Vt)?Xt.some(()=>{eA(c,$,eo.fromDom(Vt))}):Xt.none())).getOrThunk(()=>Ft.bind(()=>Et.map(Vt=>()=>{$?BU(c,g,et,Vt):BU(c,g,Vt,et)})))})},_7=(c,g,$)=>{if(c.selection.isCollapsed()&&SE(c)){const et=Uo.fromRangeStart(c.selection.getRng());return jQ(c,g,$,et)}return Xt.none()},HQ=c=>y_(c)>1,SD=(c,g)=>{const $=eo.fromDom(c.getBody()),et=eo.fromDom(c.selection.getStart()),rt=Rw(et,$);return vo(rt,g).fold(cn(rt),ut=>rt.slice(0,ut))},x7=c=>y_(c)===1,w7=c=>SD(c,g=>c.schema.isBlock(En(g))||HQ(g)),$U=c=>SD(c,g=>c.schema.isBlock(En(g))),C7=(c,g)=>{const $=Tn(j6,c);return ro(g,et=>$(et)?[et.dom]:[])},k7=c=>{const g=$U(c);return C7(c,g)},UQ=(c,g,$,et)=>{const rt=C7(g,et);if(rt.length===0)eA(g,c,$);else{const ut=IO($.dom,rt);g.selection.setRng(ut.toRange())}},s4=(c,g)=>{const $=Bn(w7(c),x7);return gs($).bind(et=>{const rt=Uo.fromRangeStart(c.selection.getRng());return S$(g,rt,et.dom)&&!UE(et)?Xt.some(()=>UQ(g,c,et,$)):Xt.none()})},ED=(c,g)=>{const $=g.parentElement;return tu(g)&&!Nt($)&&c.dom.isEmpty($)},GU=c=>UE(eo.fromDom(c)),S7=(c,g)=>{const $=c.selection.getStart(),et=ED(c,$)||GU($)?IO($,g):oG(c.selection.getRng(),g);c.selection.setRng(et.toRange())},jU=(c,g)=>{const $=Mr(g,k7(c));$.length>0&&S7(c,$)},E7=c=>pr(c.startContainer),AD=c=>c.startOffset===0&&E7(c),A7=(c,g)=>{const $=g.startContainer.parentElement;return!Nt($)&&j6(c,eo.fromDom($))},i4=c=>{const g=c.startContainer.parentNode,$=c.endContainer.parentNode;return!Nt(g)&&!Nt($)&&g.isEqualNode($)},VQ=c=>{const g=c.endContainer;return c.endOffset===(pr(g)?g.length:g.childNodes.length)},HU=c=>i4(c)&&VQ(c),WQ=c=>!c.endContainer.isEqualNode(c.commonAncestorContainer),qQ=c=>HU(c)||WQ(c),UU=c=>{const g=c.selection.getRng();return AD(g)&&A7(c,g)&&qQ(g)},ZQ=c=>{if(UU(c)){const g=k7(c);return Xt.some(()=>{Mw(c),jU(c,g)})}else return Xt.none()},TD=(c,g)=>c.selection.isCollapsed()?s4(c,g):ZQ(c),Hie=(c,g)=>Jw(c,$=>Yy($.dom),$=>g.isBlock(En($))),KQ=c=>Hie(eo.fromDom(c.selection.getStart()),c.schema),YQ=c=>{const g=c.selection.getRng();return g.collapsed&&(E7(g)||c.dom.isEmpty(g.startContainer))&&!KQ(c)},a4=c=>(YQ(c)&&S7(c,[]),!0),T7=(c,g,$)=>ln($)?Xt.some(()=>{c._selectionOverrides.hideFakeCaret(),eA(c,g,eo.fromDom($))}):Xt.none(),XQ=(c,g)=>{const $=g?xI:r5,et=g?l0.Forwards:l0.Backwards,rt=L2(et,c.getBody(),c.selection.getRng());return $(rt)?T7(c,g,rt.getNode(!g)):Xt.from(Z1(g,rt)).filter(ut=>$(ut)&&LE(rt,ut)).bind(ut=>T7(c,g,ut.getNode(!g)))},JQ=(c,g)=>{const $=c.selection.getNode();return o0($)?T7(c,g,$):Xt.none()},I7=(c,g)=>c.selection.isCollapsed()?XQ(c,g):JQ(c,g),QQ=c=>tp(c,g=>Qo(g.dom)||nu(g.dom)).exists(g=>Qo(g.dom)),ID=c=>Ep(c??"").getOr(0),VU=(c,g)=>{const $=c||mL(g)?"margin":"padding",et=wp(g,"direction")==="rtl"?"-right":"-left";return $+et},TA=(c,g,$,et,rt,ut)=>{const pt=VU($,eo.fromDom(ut)),xt=ID(c.getStyle(ut,pt));if(g==="outdent"){const Et=Math.max(0,xt-et);c.setStyle(ut,pt,Et?Et+rt:"")}else{const Et=xt+et+rt;c.setStyle(ut,pt,Et)}},WU=(c,g)=>Co(g,$=>{const et=VU(BM(c),$),rt=jv($,et).map(ID).getOr(0);return c.dom.getContentEditable($.dom)!=="false"&&rt>0}),RD=c=>{const g=iC(c);return!c.mode.isReadOnly()&&(g.length>1||WU(c,g))},R7=c=>G1(c)||_2(c),M7=c=>zm(c).exists(R7),iC=c=>Bn(dv(c.selection.getSelectedBlocks()),g=>!R7(g)&&!M7(g)&&QQ(g)),P7=(c,g)=>{var $,et;if(c.mode.isReadOnly())return;const{dom:rt}=c,ut=uB(c),pt=(et=($=/[a-z%]+$/i.exec(ut))===null||$===void 0?void 0:$[0])!==null&&et!==void 0?et:"px",xt=ID(ut),Et=BM(c);sn(iC(c),Ft=>{TA(rt,g,Et,xt,pt,Ft.dom)})},n_=c=>P7(c,"indent"),NS=c=>P7(c,"outdent"),MD=c=>{if(c.selection.isCollapsed()&&RD(c)){const g=c.dom,$=c.selection.getRng(),et=Uo.fromRangeStart($),rt=g.getParent($.startContainer,g.isBlock);if(rt!==null&&rO(eo.fromDom(rt),et,c.schema))return Xt.some(()=>NS(c))}return Xt.none()},qU=(c,g,$)=>Rs([MD,J5,XF,(et,rt)=>_7(et,g,rt),hD,vO,jI,I7,gD,TD,GI],et=>et(c,$)).filter(et=>c.selection.isEditable()),ZU=(c,g)=>{qU(c,g,!1).fold(()=>{c.selection.isEditable()&&(Mw(c),bS(c))},Mo)},eee=(c,g)=>{qU(c,g,!0).fold(()=>{c.selection.isEditable()&&k$(c)},Mo)},tee=(c,g)=>{c.addCommand("delete",()=>{ZU(c,g)}),c.addCommand("forwardDelete",()=>{eee(c,g)})},KU=5,nee=400,YU=c=>c.touches===void 0||c.touches.length!==1?Xt.none():Xt.some(c.touches[0]),XU=(c,g)=>{const $=Math.abs(c.clientX-g.x),et=Math.abs(c.clientY-g.y);return $>KU||et>KU},oee=c=>{const g=Em(),$=Ru(!1),et=aT(rt=>{c.dispatch("longpress",{...rt,type:"longpress"}),$.set(!0)},nee);c.on("touchstart",rt=>{YU(rt).each(ut=>{et.cancel();const pt={x:ut.clientX,y:ut.clientY,target:rt.target};et.throttle(rt),$.set(!1),g.set(pt)})},!0),c.on("touchmove",rt=>{et.cancel(),YU(rt).each(ut=>{g.on(pt=>{XU(ut,pt)&&(g.clear(),$.set(!1),c.dispatch("longpresscancel"))})})},!0),c.on("touchend touchcancel",rt=>{et.cancel(),rt.type!=="touchcancel"&&g.get().filter(ut=>ut.target.isEqualNode(rt.target)).each(()=>{$.get()?rt.preventDefault():c.dispatch("tap",{...rt,type:"tap"})})},!0)},O7=(c,g)=>es(c,g.nodeName),UI=(c,g)=>pr(g)?!0:Fr(g)?!O7(c.getBlockElements(),g)&&!My(g)&&!O1(c,g)&&!CC(g):!1,PD=(c,g,$)=>Cn(s5(eo.fromDom($),eo.fromDom(g)),et=>O7(c,et.dom)),JU=(c,g)=>{if(pr(g)){if(g.data.length===0)return!0;if(/^\s+$/.test(g.data))return!g.nextSibling||O7(c,g.nextSibling)||CC(g.nextSibling)}return!1},OD=c=>c.dom.create(h0(c),gw(c)),D7=c=>{const g=c.dom,$=c.selection,et=c.schema,rt=et.getBlockElements(),ut=$.getStart(),pt=c.getBody();let xt,Et,Ft=null;const Vt=h0(c);if(!ut||!Fr(ut))return;const Kt=pt.nodeName.toLowerCase();if(!et.isValidChild(Kt,Vt.toLowerCase())||PD(rt,pt,ut))return;if(pt.firstChild===pt.lastChild&&tu(pt.firstChild)){xt=OD(c),xt.appendChild(j1().dom),pt.replaceChild(xt,pt.firstChild),c.selection.setCursorLocation(xt,0),c.nodeChanged();return}let en=pt.firstChild;for(;en;)if(Fr(en)&&op(et,en),UI(et,en)){if(JU(rt,en)){Et=en,en=en.nextSibling,g.remove(Et);continue}if(!xt){if(!Ft&&c.hasFocus()&&(Ft=Ox(c.selection.getRng(),()=>document.createElement("span"))),!en.parentNode){en=null;break}xt=OD(c),pt.insertBefore(xt,en)}Et=en,en=en.nextSibling,xt.appendChild(Et)}else xt=null,en=en.nextSibling;Ft&&(c.selection.setRng(e_(Ft)),c.nodeChanged())},QU=(c,g,$)=>{const et=eo.fromDom(OD(c)),rt=j1();qp(et,rt),$(g,et);const ut=document.createRange();return ut.setStartBefore(rt.dom),ut.setEndBefore(rt.dom),ut},ree=c=>{c.on("NodeChange",()=>D7(c))},eV=c=>g=>(" "+g.attr("class")+" ").indexOf(c)!==-1,see=(c,g,$)=>function(et){const rt=arguments,ut=rt[rt.length-2],pt=ut>0?g.charAt(ut-1):"";if(pt==='"')return et;if(pt===">"){const xt=g.lastIndexOf("<",ut);if(xt!==-1&&g.substring(xt,ut).indexOf('contenteditable="false"')!==-1)return et}return'<span class="'+$+'" data-mce-content="'+c.dom.encode(rt[0])+'">'+c.dom.encode(typeof rt[1]=="string"?rt[1]:rt[0])+"</span>"},iee=(c,g,$)=>{let et=g.length,rt=$.content;if($.format!=="raw"){for(;et--;)rt=rt.replace(g[et],see(c,rt,PT(c)));$.content=rt}},aee=(c,g)=>Co(c,$=>{const et=g.match($);return et!==null&&et[0].length===g.length}),lee=c=>{const g="contenteditable",$=" "+dr.trim(n1(c))+" ",et=" "+dr.trim(PT(c))+" ",rt=eV($),ut=eV(et),pt=OT(c);pt.length>0&&c.on("BeforeSetContent",xt=>{iee(c,pt,xt)}),c.parser.addAttributeFilter("class",xt=>{let Et=xt.length;for(;Et--;){const Ft=xt[Et];rt(Ft)?Ft.attr(g,"true"):ut(Ft)&&Ft.attr(g,"false")}}),c.serializer.addAttributeFilter(g,xt=>{let Et=xt.length;for(;Et--;){const Ft=xt[Et];if(!rt(Ft)&&!ut(Ft))continue;const Vt=Ft.attr("data-mce-content");pt.length>0&&Vt?aee(pt,Vt)?(Ft.name="#text",Ft.type=3,Ft.raw=!0,Ft.value=Vt):Ft.remove():Ft.attr(g,null)}})},tV=c=>ds(eo.fromDom(c.getBody()),"*[data-mce-caret]").map(g=>g.dom).getOrNull(),nV=(c,g)=>{g.hasAttribute("data-mce-caret")&&(jC(g),c.selection.setRng(c.selection.getRng()),c.selection.scrollIntoView(g))},cee=(c,g)=>{const $=tV(c);if($){if(g.type==="compositionstart"){g.preventDefault(),g.stopPropagation(),nV(c,$);return}lM($)&&(nV(c,$),c.undoManager.add())}},u1=c=>{c.on("keyup compositionstart",Tn(cee,c))},oV=nu,N7=(c,g,$)=>NU(g,c,$,mS,yS,oV),rV=(c,g,$)=>LU(g,c,$,ut=>mS(ut)||oO(ut),ut=>yS(ut)||t6(ut),oV),L7=c=>{const g=c.dom.create(h0(c));return g.innerHTML='<br data-mce-bogus="1">',g},sV=(c,g,$)=>{const et=p0(c.getBody()),rt=Tn(AR,g===1?et.next:et.prev);if($.collapsed){const ut=c.dom.getParent($.startContainer,"PRE");if(!ut)return;if(!rt(Uo.fromRangeStart($))){const xt=eo.fromDom(L7(c));g===1?fy(eo.fromDom(ut),xt):Iu(eo.fromDom(ut),xt),c.selection.select(xt.dom,!0),c.selection.collapse()}}},uee=(c,g)=>{const $=g?l0.Forwards:l0.Backwards,et=c.selection.getRng();return N7($,c,et).orThunk(()=>(sV(c,$,et),Xt.none()))},dee=(c,g)=>{const $=g?1:-1,et=c.selection.getRng();return rV($,c,et).orThunk(()=>(sV(c,$,et),Xt.none()))},fee=(c,g)=>{const $=g?c.getEnd(!0):c.getStart(!0);return d6($)?!g:g},iV=(c,g)=>uee(c,fee(c.selection,g)).exists($=>(Dx(c,$),!0)),F7=(c,g)=>dee(c,g).exists($=>(Dx(c,$),!0)),aV=(c,g)=>PQ(c,g,g?yS:mS),DD=(c,g)=>JF(c,!g).map($=>{const et=$.toRange(),rt=c.selection.getRng();return g?et.setStart(rt.startContainer,rt.startOffset):et.setEnd(rt.endContainer,rt.endOffset),et}).exists($=>(Dx(c,$),!0)),l4=c=>yn(["figcaption"],En(c)),aC=(c,g,$)=>{const et=Tn(ba,g);return tp(eo.fromDom(c.container()),rt=>$.isBlock(En(rt)),et).filter(l4)},IA=(c,g,$)=>g?TU(c.dom,$):AU(c.dom,$),ND=(c,g)=>{const $=eo.fromDom(c.getBody()),et=Uo.fromRangeStart(c.selection.getRng());return aC(et,$,c.schema).exists(()=>{if(IA($,g,et)){const ut=QU(c,$,g?qp:M1);return c.selection.setRng(ut),!0}else return!1})},LD=(c,g)=>c.selection.isCollapsed()?ND(c,g):!1,z7=(c,g,$)=>{const et=c.selection.getRng(),rt=Uo.fromRangeStart(et);return c.getBody().firstChild===g&&AU($,rt)?(c.execCommand("InsertNewBlockBefore"),!0):!1},lV=(c,g)=>{const $=c.selection.getRng(),et=Uo.fromRangeStart($);return c.getBody().lastChild===g&&TU(g,et)?(c.execCommand("InsertNewBlockAfter"),!0):!1},hee=(c,g)=>g?Xt.from(c.dom.getParent(c.selection.getNode(),"details")).map($=>lV(c,$)).getOr(!1):Xt.from(c.dom.getParent(c.selection.getNode(),"summary")).bind($=>Xt.from(c.dom.getParent($,"details")).map(et=>z7(c,et,$))).getOr(!1),B7=(c,g)=>hee(c,g),$7={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},pee=c=>Nn(c,g=>({...$7,...g})),gee=c=>Nn(c,g=>({...$7,...g})),cV=(c,g)=>g.keyCode===c.keyCode&&g.shiftKey===c.shiftKey&&g.altKey===c.altKey&&g.ctrlKey===c.ctrlKey&&g.metaKey===c.metaKey,mee=(c,g)=>ro(pee(c),$=>cV($,g)?[$]:[]),yee=(c,g)=>ro(gee(c),$=>cV($,g)?[$]:[]),Vs=(c,...g)=>()=>c.apply(null,g),VI=(c,g)=>Qn(mee(c,g),$=>$.action()),G7=(c,g)=>Rs(yee(c,g),$=>$.action()),bee=(c,g)=>{const $=g?l0.Forwards:l0.Backwards,et=c.selection.getRng();return NU(c,$,et,xI,r5,o0).exists(rt=>(Dx(c,rt),!0))},vee=(c,g)=>{const $=g?1:-1,et=c.selection.getRng();return LU(c,$,et,xI,r5,o0).exists(rt=>(Dx(c,rt),!0))},_ee=(c,g)=>PQ(c,g,g?r5:xI),uV=vv.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),FD={...uV,none:c=>uV.none(c)},xee=(c,g)=>dV(c,g,xo),dV=(c,g,$)=>ro(tm(c),et=>D0(et,g)?$(et)?[et]:[]:dV(et,g,$)),Uie=(c,g,$=Dn)=>{if($(g))return Xt.none();if(yn(c,En(g)))return Xt.some(g);const et=rt=>D0(rt,"table")||$(rt);return Hp(g,c.join(","),et)},wee=(c,g)=>Uie(["td","th"],c,g),ev=c=>xee(c,"th,td"),j7=(c,g)=>uv(c,"table",g),RA=(c,g,$,et,rt=xo)=>{const ut=et===1;if(!ut&&$<=0)return FD.first(c[0]);if(ut&&$>=c.length-1)return FD.last(c[c.length-1]);{const pt=$+et,xt=c[pt];return rt(xt)?FD.middle(g,xt):RA(c,g,pt,et,rt)}},fV=(c,g)=>j7(c,g).bind($=>{const et=ev($);return vo(et,ut=>ba(c,ut)).map(ut=>({index:ut,all:et}))}),hV=(c,g,$)=>fV(c,$).fold(()=>FD.none(c),rt=>RA(rt.all,c,rt.index,1,g)),pV=(c,g,$)=>fV(c,$).fold(()=>FD.none(),rt=>RA(rt.all,c,rt.index,-1,g)),gV=c=>rM(c).filter(g=>g.trim().length!==0||g.indexOf(gm)>-1).isSome(),H7=c=>Ml(c)&&fm(c,"contenteditable")==="false",mV=["img","br"],Cee=c=>gV(c)||yn(mV,En(c))||H7(c),yV=c=>Zw(c,Cee),kee=(c,g)=>({left:c.left-g,top:c.top-g,right:c.right+g*2,bottom:c.bottom+g*2,width:c.width+g,height:c.height+g}),See=(c,g)=>ro(g,$=>{const et=kee(yx($.getBoundingClientRect()),-1);return[{x:et.left,y:c(et),cell:$},{x:et.right,y:c(et),cell:$}]}),Eee=(c,g,$)=>Wn(c,(et,rt)=>et.fold(()=>Xt.some(rt),ut=>{const pt=Math.sqrt(Math.abs(ut.x-g)+Math.abs(ut.y-$)),xt=Math.sqrt(Math.abs(rt.x-g)+Math.abs(rt.y-$));return Xt.some(xt<pt?rt:ut)}),Xt.none()),zD=(c,g,$,et,rt)=>{const ut=_0(eo.fromDom($),"td,th,caption").map(xt=>xt.dom),pt=Bn(See(c,ut),xt=>g(xt,rt));return Eee(pt,et,rt).map(xt=>xt.cell)},Aee=c=>c.bottom,Tee=c=>c.top,Vie=(c,g)=>c.y<g,Iee=(c,g)=>c.y>g,bV=Tn(zD,Aee,Vie),Wie=Tn(zD,Tee,Iee),Ree=(c,g)=>wr(g.getClientRects()).bind($=>bV(c,$.left,$.top)).bind($=>xD(kQ($),g)),Mee=(c,g)=>gs(g.getClientRects()).bind($=>Wie(c,$.left,$.top)).bind($=>xD(CQ($),g)),Pee=(c,g,$)=>$.breakAt.exists(et=>c(g,et).breakAt.isSome()),U7=c=>c.breakType===zw.Wrap&&c.positions.length===0,BD=c=>c.breakType===zw.Br&&c.positions.length===1,V7=(c,g,$)=>{const et=c(g,$);return U7(et)||!tu($.getNode())&&BD(et)?!Pee(c,g,et):et.breakAt.isNone()},vV=Tn(V7,DS),Oee=Tn(V7,t4),Dee=(c,g,$)=>{const et=Uo.fromRangeStart(g);return F2(!c,$).exists(rt=>rt.isEqual(et))},W7=(c,g,$,et)=>{const rt=c.selection.getRng(),ut=g?1:-1;return n8()&&Dee(g,rt,$)?(Lw(ut,c,$,!g,!1).each(pt=>{Dx(c,pt)}),!0):!1},Nee=(c,g,$)=>Ree(g,$).orThunk(()=>wr($.getClientRects()).bind(et=>p7(SU(c,Uo.before(g)),et.left))).getOr(Uo.before(g)),Lee=(c,g,$)=>Mee(g,$).orThunk(()=>wr($.getClientRects()).bind(et=>p7(EU(c,Uo.after(g)),et.left))).getOr(Uo.after(g)),_V=(c,g)=>{const $=g.getNode(c);return fv($)?Xt.some($):Xt.none()},Fee=(c,g,$)=>{g.undoManager.transact(()=>{const et=c?fy:Iu,rt=QU(g,eo.fromDom($),et);Dx(g,rt)})},o_=(c,g,$)=>{const et=_V(!!g,$),rt=g===!1;et.fold(()=>Dx(c,$.toRange()),ut=>F2(rt,c.getBody()).filter(pt=>pt.isEqual($)).fold(()=>Dx(c,$.toRange()),pt=>Fee(g,c,ut)))},xV=(c,g,$,et)=>{const rt=c.selection.getRng(),ut=Uo.fromRangeStart(rt),pt=c.getBody();if(!g&&vV(et,ut)){const xt=Nee(pt,$,ut);return o_(c,g,xt),!0}else if(g&&Oee(et,ut)){const xt=Lee(pt,$,ut);return o_(c,g,xt),!0}else return!1},q7=(c,g,$)=>Xt.from(c.dom.getParent(c.selection.getNode(),"td,th")).bind(et=>Xt.from(c.dom.getParent(et,"table")).map(rt=>$(c,g,rt,et))).getOr(!1),zee=(c,g)=>q7(c,g,W7),wV=(c,g)=>q7(c,g,xV),qie=c=>{const g=YE.exact(c,0,c,0);return at(g)},Bee=(c,g,$)=>$.fold(Xt.none,Xt.none,(et,rt)=>yV(rt).map(ut=>qie(ut)),et=>c.mode.isReadOnly()?Xt.none():(c.execCommand("mceTableInsertRowAfter"),CV(c,g,et))),CV=(c,g,$)=>Bee(c,g,hV($,Y0)),$D=(c,g,$)=>Bee(c,g,pV($,Y0)),kV=(c,g)=>{const $=["table","li","dl"],et=eo.fromDom(c.getBody()),rt=xt=>{const Et=En(xt);return ba(xt,et)||yn($,Et)},ut=c.selection.getRng(),pt=eo.fromDom(g?ut.endContainer:ut.startContainer);return wee(pt,rt).map(xt=>(j7(xt,rt).each(Vt=>{c.model.table.clearSelectedCells(Vt.dom)}),c.selection.collapse(!g),(g?CV:$D)(c,rt,xt).each(Vt=>{c.selection.setRng(Vt)}),!0)).getOr(!1)},Z7=(c,g,$)=>{const et=Xr.os.isMacOS()||Xr.os.isiOS();VI([{keyCode:Gr.RIGHT,action:Vs(iV,c,!0)},{keyCode:Gr.LEFT,action:Vs(iV,c,!1)},{keyCode:Gr.UP,action:Vs(F7,c,!1)},{keyCode:Gr.DOWN,action:Vs(F7,c,!0)},...et?[{keyCode:Gr.UP,action:Vs(DD,c,!1),metaKey:!0,shiftKey:!0},{keyCode:Gr.DOWN,action:Vs(DD,c,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Gr.RIGHT,action:Vs(zee,c,!0)},{keyCode:Gr.LEFT,action:Vs(zee,c,!1)},{keyCode:Gr.UP,action:Vs(wV,c,!1)},{keyCode:Gr.DOWN,action:Vs(wV,c,!0)},{keyCode:Gr.UP,action:Vs(wV,c,!1)},{keyCode:Gr.UP,action:Vs(B7,c,!1)},{keyCode:Gr.DOWN,action:Vs(B7,c,!0)},{keyCode:Gr.RIGHT,action:Vs(bee,c,!0)},{keyCode:Gr.LEFT,action:Vs(bee,c,!1)},{keyCode:Gr.UP,action:Vs(vee,c,!1)},{keyCode:Gr.DOWN,action:Vs(vee,c,!0)},{keyCode:Gr.RIGHT,action:Vs(o4,c,g,!0)},{keyCode:Gr.LEFT,action:Vs(o4,c,g,!1)},{keyCode:Gr.RIGHT,ctrlKey:!et,altKey:et,action:Vs(zQ,c,g)},{keyCode:Gr.LEFT,ctrlKey:!et,altKey:et,action:Vs(BQ,c,g)},{keyCode:Gr.UP,action:Vs(LD,c,!1)},{keyCode:Gr.DOWN,action:Vs(LD,c,!0)}],$).each(rt=>{$.preventDefault()})},SV=(c,g)=>{c.on("keydown",$=>{$.isDefaultPrevented()||Z7(c,g,$)})},q_=(c,g)=>({container:c,offset:g}),c4=Uu.DOM,GD=c=>g=>c===g?-1:0,$ee=c=>g=>c.isBlock(g)||yn(["BR","IMG","HR","INPUT"],g.nodeName)||c.getContentEditable(g)==="false",K7=(c,g,$)=>{if(pr(c)&&g>=0)return Xt.some(q_(c,g));{const et=b2(c4);return Xt.from(et.backwards(c,g,GD(c),$)).map(rt=>q_(rt.container,rt.container.data.length))}},Gee=(c,g,$)=>{if(pr(c)&&g>=c.length)return Xt.some(q_(c,g));{const et=b2(c4);return Xt.from(et.forwards(c,g,GD(c),$)).map(rt=>q_(rt.container,0))}},WI=(c,g,$)=>{if(!pr(c))return Xt.none();const et=c.data;if(g>=0&&g<=et.length)return Xt.some(q_(c,g));{const rt=b2(c4);return Xt.from(rt.backwards(c,g,GD(c),$)).bind(ut=>{const pt=ut.container.data;return WI(ut.container,g+pt.length,$)})}},EV=(c,g,$)=>{if(!pr(c))return Xt.none();const et=c.data;if(g<=et.length)return Xt.some(q_(c,g));{const rt=b2(c4);return Xt.from(rt.forwards(c,g,GD(c),$)).bind(ut=>EV(ut.container,g-et.length,$))}},Y7=(c,g,$,et,rt)=>{const ut=b2(c,$ee(c));return Xt.from(ut.backwards(g,$,et,rt))},jee=c=>c.collapsed&&pr(c.startContainer),X7=c=>mv(c.toString().replace(/\u00A0/g," ")),AV=c=>c!==""&&` \uFEFF\f
\r	\v`.indexOf(c)!==-1,Hee=(c,g)=>c.substring(g.length),TV=(c,g,$,et=!1)=>{let rt;const ut=$.charAt(0);for(rt=g-1;rt>=0;rt--){const pt=c.charAt(rt);if(!et&&AV(pt))return Xt.none();if(ut===pt&&ms(c,$,rt,g))break}return Xt.some(rt)},J7=(c,g,$,et=!1)=>{if(!jee(g))return Xt.none();const rt={text:"",offset:0},ut=(xt,Et,Ft)=>(rt.text=Ft+rt.text,rt.offset+=Et,TV(rt.text,rt.offset,$,et).getOr(Et)),pt=c.getParent(g.startContainer,c.isBlock)||c.getRoot();return Y7(c,g.startContainer,g.startOffset,ut,pt).bind(xt=>{const Et=g.cloneRange();if(Et.setStart(xt.container,xt.offset),Et.setEnd(g.endContainer,g.endOffset),Et.collapsed)return Xt.none();const Ft=X7(Et);return Ft.lastIndexOf($)!==0?Xt.none():Xt.some({text:Hee(Ft,$),range:Et,trigger:$})})},Uee=c=>c.nodeType===vn,Vee=c=>c.nodeType===x1,IV=c=>{if(Uee(c))return q_(c,c.data.length);{const g=c.childNodes;return g.length>0?IV(g[g.length-1]):q_(c,g.length)}},RV=(c,g)=>{const $=c.childNodes;return $.length>0&&g<$.length?RV($[g],0):$.length>0&&Vee(c)&&$.length===g?IV($[$.length-1]):q_(c,g)},Wee=(c,g)=>{var $;const et=($=c.getParent(g.container,c.isBlock))!==null&&$!==void 0?$:c.getRoot();return Y7(c,g.container,g.offset,(rt,ut)=>ut===0?-1:ut,et).filter(rt=>{const ut=rt.container.data.charAt(rt.offset-1);return!AV(ut)}).isSome()},Q7=c=>g=>{const $=RV(g.startContainer,g.startOffset);return!Wee(c,$)},qee=(c,g,$)=>Rs($.triggers,et=>J7(c,g,et)),MV=(c,g)=>{const $=g(),et=c.selection.getRng();return qee(c.dom,et,$).bind(rt=>PV(c,g,rt))},PV=(c,g,$,et={})=>{var rt;const ut=g(),xt=(rt=c.selection.getRng().startContainer.nodeValue)!==null&&rt!==void 0?rt:"",Et=Bn(ut.lookupByTrigger($.trigger),Vt=>$.text.length>=Vt.minChars&&Vt.matches.getOrThunk(()=>Q7(c.dom))($.range,xt,$.text));if(Et.length===0)return Xt.none();const Ft=Promise.all(Nn(Et,Vt=>Vt.fetch($.text,Vt.maxResults,et).then(en=>({matchText:$.text,items:en,columns:Vt.columns,onAction:Vt.onAction,highlightOn:Vt.highlightOn}))));return Xt.some({lookupData:Ft,context:$})};var Nx;(function(c){c[c.Error=0]="Error",c[c.Value=1]="Value"})(Nx||(Nx={}));const e9=(c,g,$)=>c.stype===Nx.Error?g(c.serror):$(c.svalue),Zee=c=>{const g=[],$=[];return sn(c,et=>{e9(et,rt=>$.push(rt),rt=>g.push(rt))}),{values:g,errors:$}},Kee=(c,g)=>c.stype===Nx.Error?{stype:Nx.Error,serror:g(c.serror)}:c,Yee=(c,g)=>c.stype===Nx.Value?{stype:Nx.Value,svalue:g(c.svalue)}:c,Vm=(c,g)=>c.stype===Nx.Value?g(c.svalue):c,Xee=(c,g)=>c.stype===Nx.Error?g(c.serror):c,OV=c=>({stype:Nx.Value,svalue:c}),DV=c=>({stype:Nx.Error,serror:c}),A0={fromResult:c=>c.fold(DV,OV),toResult:c=>e9(c,bm.error,bm.value),svalue:OV,partition:Zee,serror:DV,bind:Vm,bindError:Xee,map:Yee,mapError:Kee,fold:e9},Bw=c=>Gt(c)&&Yr(c).length>100?" removed due to size":JSON.stringify(c,null,2),t9=c=>{const g=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:cn("... (only showing first ten failures)")}]):c;return Nn(g,$=>"Failed path: ("+$.path.join(" > ")+`)
`+$.getErrorInfo())},u4=(c,g)=>A0.serror([{path:c,getErrorInfo:g}]),n9=(c,g,$)=>u4(c,()=>'Could not find valid *required* value for "'+g+'" in '+Bw($)),o9=(c,g)=>u4(c,()=>'Choice schema did not contain choice key: "'+g+'"'),r9=(c,g,$)=>u4(c,()=>'The chosen schema: "'+$+'" did not exist in branches: '+Bw(g)),LV=(c,g)=>u4(c,cn(g)),jD=(c,g,$,et)=>$a($,et).fold(()=>r9(c,$,et),ut=>ut.extract(c.concat(["branch: "+et]),g)),HD=(c,g)=>({extract:(rt,ut)=>$a(ut,c).fold(()=>o9(rt,c),xt=>jD(rt,ut,g,xt)),toString:()=>"chooseOn("+c+"). Possible values: "+Yr(g)}),d4=(c,g)=>g,f4=(c,g)=>Jt(c)&&Jt(g)?LS(c,g):g,r_=c=>(...g)=>{if(g.length===0)throw new Error("Can't merge zero objects");const $={};for(let et=0;et<g.length;et++){const rt=g[et];for(const ut in rt)es(rt,ut)&&($[ut]=c($[ut],rt[ut]))}return $},LS=r_(f4),s9=r_(d4),i9=()=>({tag:"required",process:{}}),Qee=c=>({tag:"defaultedThunk",process:c}),a9=c=>Qee(cn(c)),ete=()=>({tag:"option",process:{}}),tte=(c,g)=>c.length>0?A0.svalue(LS(g,s9.apply(void 0,c))):A0.svalue(g),qI=c=>Mt(A0.serror,Gn)(c),nte={consolidateObj:(c,g)=>{const $=A0.partition(c);return $.errors.length>0?qI($.errors):tte($.values,g)},consolidateArr:c=>{const g=A0.partition(c);return g.errors.length>0?qI(g.errors):A0.svalue(g.values)}},ote=(c,g,$,et)=>({tag:"field",key:c,newKey:g,presence:$,prop:et}),rte=(c,g)=>({tag:"custom",newKey:c,instantiator:g}),FV=(c,g,$)=>{switch(c.tag){case"field":return g(c.key,c.newKey,c.presence,c.prop);case"custom":return $(c.newKey,c.instantiator)}},l9=c=>{const g=(et,rt)=>A0.bindError(c(rt),ut=>LV(et,ut)),$=cn("val");return{extract:g,toString:$}},ste=l9(A0.svalue),ite=(c,g,$,et)=>$a(g,$).fold(()=>n9(c,$,g),et),zV=(c,g,$,et)=>{const rt=$a(c,g).getOrThunk(()=>$(c));return et(rt)},ate=(c,g,$)=>$($a(c,g)),lte=(c,g,$,et)=>{const rt=$a(c,g).map(ut=>ut===!0?$(c):ut);return et(rt)},cte=(c,g,$,et,rt)=>{const ut=xt=>rt.extract(g.concat([et]),xt),pt=xt=>xt.fold(()=>A0.svalue(Xt.none()),Et=>{const Ft=rt.extract(g.concat([et]),Et);return A0.map(Ft,Xt.some)});switch(c.tag){case"required":return ite(g,$,et,ut);case"defaultedThunk":return zV($,et,c.process,ut);case"option":return ate($,et,pt);case"defaultedOptionThunk":return lte($,et,c.process,pt);case"mergeWithThunk":return zV($,et,cn({}),xt=>{const Et=LS(c.process($),xt);return ut(Et)})}},ute=(c,g,$)=>{const et={},rt=[];for(const ut of $)FV(ut,(pt,xt,Et,Ft)=>{const Vt=cte(Et,c,g,pt,Ft);A0.fold(Vt,Kt=>{rt.push(...Kt)},Kt=>{et[xt]=Kt})},(pt,xt)=>{et[pt]=xt(g)});return rt.length>0?A0.serror(rt):A0.svalue(et)},UD=c=>({extract:(et,rt)=>ute(et,rt,c),toString:()=>`obj{
`+Nn(c,rt=>FV(rt,(ut,pt,xt,Et)=>ut+" -> "+Et.toString(),(ut,pt)=>"state("+ut+")")).join(`
`)+"}"}),c9=c=>({extract:(et,rt)=>{const ut=Nn(rt,(pt,xt)=>c.extract(et.concat(["["+xt+"]"]),pt));return nte.consolidateArr(ut)},toString:()=>"array("+c.toString()+")"}),BV=c=>l9(g=>c(g).fold(A0.serror,A0.svalue)),dte=(c,g,$)=>{const et=g.extract([c],$);return A0.mapError(et,rt=>({input:$,errors:rt}))},fte=(c,g,$)=>A0.toResult(dte(c,g,$)),hte=c=>`Errors: 
`+t9(c.errors).join(`
`)+`

Input object: `+Bw(c.input),$V=(c,g)=>HD(c,Ds(g,UD)),GV=cn(ste),VD=(c,g)=>l9($=>{const et=typeof $;return c($)?A0.svalue($):A0.serror(`Expected type: ${g} but got: ${et}`)}),jV=VD(so,"number"),WD=VD(Tt,"string"),HV=VD(Qt,"boolean"),qD=VD(Wt,"function"),h4=ote,UV=rte,pte=c=>BV(g=>yn(c,g)?bm.value(g):bm.error(`Unsupported value: "${g}", choose one of "${c.join(", ")}".`)),VV=(c,g)=>h4(c,c,i9(),g),u9=c=>VV(c,WD),WV=c=>VV(c,qD),gte=(c,g)=>h4(c,c,i9(),c9(g)),ZD=(c,g)=>h4(c,c,ete(),g),KD=c=>ZD(c,WD),mte=c=>ZD(c,qD),qV=(c,g)=>h4(c,c,a9(g),GV()),ZI=(c,g,$)=>h4(c,c,a9(g),$),ZV=(c,g)=>ZI(c,g,jV),KV=(c,g)=>ZI(c,g,WD),d9=(c,g,$)=>ZI(c,g,pte($)),YD=(c,g)=>ZI(c,g,HV),f9=(c,g)=>ZI(c,g,qD),yte=(c,g,$)=>ZI(c,g,c9($)),bte=u9("type"),vte=WV("fetch"),h9=WV("onAction"),_te=f9("onSetup",()=>hn),xte=KD("text"),wte=KD("icon"),Yie=KD("tooltip"),Cte=KD("label"),XD=YD("active",!1),YV=YD("enabled",!0),p9=YD("primary",!1),kte=c=>qV("columns",c),KI=c=>KV("type",c),XV=UD([bte,u9("trigger"),ZV("minChars",1),kte(1),ZV("maxResults",10),mte("matches"),vte,h9,yte("highlightOn",[],WD)]),Ste=c=>fte("Autocompleter",XV,c),g9=[YV,Yie,wte,xte,_te,KV("context","mode:design")],JV=[XD].concat(g9),QV=[f9("predicate",Dn),d9("scope","node",["node","editor"]),d9("position","selection",["node","selection","line"])],Ete=g9.concat([KI("contextformbutton"),p9,h9,UV("original",fo)]),m9=JV.concat([KI("contextformbutton"),p9,h9,UV("original",fo)]),Ate=g9.concat([KI("contextformbutton")]),Tte=JV.concat([KI("contextformtogglebutton")]),Ite=$V("type",{contextformbutton:Ete,contextformtogglebutton:m9});UD([KI("contextform"),f9("initValue",cn("")),Cte,gte("commands",Ite),ZD("launch",$V("type",{contextformbutton:Ate,contextformtogglebutton:Tte}))].concat(QV));const eW=c=>{const g=c.ui.registry.getAll().popups,$=Ds(g,pt=>Ste(pt).fold(xt=>{throw new Error(hte(xt))},fo)),et=Oo(Eu($,pt=>pt.trigger)),rt=uu($);return{dataset:$,triggers:et,lookupByTrigger:pt=>Bn(rt,xt=>xt.trigger===pt)}},Rte=(c,g)=>{const $=aT(g.load,50);c.on("input",et=>{et.inputType==="insertCompositionText"&&!c.composing||$.throttle()}),c.on("keydown",et=>{const rt=et.which;rt===8?$.throttle():rt===27?($.cancel(),g.cancelIfNecessary()):(rt===38||rt===40)&&$.cancel()},!0),c.on("remove",$.cancel)},Mte=c=>{const g=Em(),$=Ru(!1),et=g.isSet,rt=()=>{et()&&(k8(c),$.set(!1),g.clear())},ut=Kt=>{et()||g.set({trigger:Kt.trigger,matchLength:Kt.text.length})},pt=Ho(()=>eW(c)),xt=Kt=>g.get().map(en=>J7(c.dom,c.selection.getRng(),en.trigger,!0).bind(mn=>PV(c,pt,mn,Kt))).getOrThunk(()=>MV(c,pt)),Et=Kt=>{xt(Kt).fold(rt,en=>{ut(en.context),en.lookupData.then(mn=>{g.get().map(Sn=>{const bn=en.context;Sn.trigger===bn.trigger&&(g.set({...Sn,matchLength:bn.text.length}),$.get()?(aI(c,{range:bn.range}),C8(c,{lookupData:mn})):($.set(!0),aI(c,{range:bn.range}),iI(c,{lookupData:mn})))})})})},Ft=(Kt,en)=>{const mn=Kt.compareBoundaryPoints(window.Range.START_TO_START,en),Sn=Kt.compareBoundaryPoints(window.Range.END_TO_END,en);return mn>=0&&Sn<=0},Vt=()=>g.get().bind(({trigger:Kt})=>{const en=c.selection.getRng();return J7(c.dom,en,Kt,$.get()).filter(({range:mn})=>Ft(en,mn)).map(({range:mn})=>mn)});c.addCommand("mceAutocompleterReload",(Kt,en)=>{const mn=Gt(en)?en.fetchOptions:{};Et(mn)}),c.addCommand("mceAutocompleterClose",rt),c.addCommand("mceAutocompleterRefreshActiveRange",()=>{Vt().each(Kt=>{aI(c,{range:Kt})})}),c.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>Vt().isSome()),Rte(c,{cancelIfNecessary:rt,load:Et})},Pte=dn().browser.isSafari(),tW=c=>P_(eo.fromDom(c)),Wm=(c,g)=>{var $;return c.startOffset===0&&c.endOffset===(($=g.textContent)===null||$===void 0?void 0:$.length)},s_=(c,g)=>Xt.from(c.getParent(g.container(),"details")),nW=(c,g)=>s_(c,g).isSome(),Jie=(c,g)=>{const $=Xt.from(c.getParent(g.startContainer,"details")),et=Xt.from(c.getParent(g.endContainer,"details"));if($.isSome()||et.isSome()){const rt=$.bind(ut=>Xt.from(c.select("summary",ut)[0]));return Xt.some({startSummary:rt,startDetails:$,endDetails:et})}else return Xt.none()},Ote=(c,g)=>G0(g).exists($=>$.isEqual(c)),Dte=(c,g)=>Ky(g).exists($=>tu($.getNode())&&Ry(g,$).exists(et=>et.isEqual(c))||$.isEqual(c)),Nte=(c,g)=>g.startSummary.exists($=>Ote(c,$)),Lte=(c,g)=>g.startSummary.exists($=>Dte(c,$)),oW=(c,g)=>g.startDetails.exists($=>Ry($,c).forall(et=>g.startSummary.exists(rt=>!rt.contains(c.container())&&rt.contains(et.container())))),YI=(c,g,$)=>$.startDetails.exists(et=>$0(c,g).forall(rt=>!et.contains(rt.container()))),Fte=(c,g)=>{const $=g.getNode();fn($)||c.selection.setCursorLocation($,g.offset())},rW=(c,g,$)=>{const et=c.dom.getParent(g.container(),"details");if(et&&!et.open){const rt=c.dom.select("summary",et)[0];rt&&($?G0(rt):Ky(rt)).each(pt=>Fte(c,pt))}else Fte(c,g)},zte=(c,g)=>{const $=Et=>Et.contains(c.startContainer),et=Et=>Et.contains(c.endContainer),rt=g.startSummary.exists($),ut=g.startSummary.exists(et),pt=g.startDetails.forall(Et=>g.endDetails.forall(Ft=>Et!==Ft));return(rt||ut)&&!(rt&&ut)||pt},Z_=(c,g,$)=>{const{dom:et,selection:rt}=c,ut=c.getBody();if($==="character"){const pt=Uo.fromRangeStart(rt.getRng()),xt=et.getParent(pt.container(),et.isBlock),Et=s_(et,pt),Ft=xt&&et.isEmpty(xt),Vt=Nt(xt==null?void 0:xt.previousSibling),Kt=Nt(xt==null?void 0:xt.nextSibling);return Ft&&(g?Kt:Vt)&&ww(!g,ut,pt).exists(Sn=>nW(et,Sn)&&!jp(Et,s_(et,Sn)))?!0:ww(g,ut,pt).fold(Dn,en=>{const mn=s_(et,en);if(nW(et,en)&&!jp(Et,mn)){if(g||rW(c,en,!1),xt&&Ft){if(g&&Vt)return!0;if(!g&&Kt)return!0;rW(c,en,g),c.dom.remove(xt)}return!0}else return!1})}else return!1},Bte=(c,g,$,et)=>{const ut=c.selection.getRng(),pt=Uo.fromRangeStart(ut),xt=c.getBody();return et==="selection"?zte(ut,g):$?Lte(pt,g)||YI(xt,pt,g):Nte(pt,g)||oW(pt,g)},$te=(c,g,$)=>Jie(c.dom,c.selection.getRng()).fold(()=>Z_(c,g,$),et=>Bte(c,et,g,$)||Z_(c,g,$)),sW=(c,g,$)=>{const et=c.selection,rt=et.getNode(),ut=et.getRng(),pt=Uo.fromRangeStart(ut);return k_(rt)?($==="selection"&&Wm(ut,rt)||S$(g,pt,rt)?tW(rt):c.undoManager.transact(()=>{const xt=et.getSel();let{anchorNode:Et,anchorOffset:Ft,focusNode:Vt,focusOffset:Kt}=xt??{};const en=()=>{ln(Et)&&ln(Ft)&&ln(Vt)&&ln(Kt)&&(xt==null||xt.setBaseAndExtent(Et,Ft,Vt,Kt))},mn=()=>{Et=xt==null?void 0:xt.anchorNode,Ft=xt==null?void 0:xt.anchorOffset,Vt=xt==null?void 0:xt.focusNode,Kt=xt==null?void 0:xt.focusOffset},Sn=(Pn,ao)=>{sn(Pn.childNodes,po=>{j2(po)&&ao.appendChild(po)})},bn=c.dom.create("span",{"data-mce-bogus":"1"});Sn(rt,bn),rt.appendChild(bn),en(),($==="word"||$==="line")&&(xt==null||xt.modify("extend",g?"right":"left",$)),!et.isCollapsed()&&Wm(et.getRng(),bn)?tW(rt):(c.execCommand(g?"ForwardDelete":"Delete"),mn(),Sn(bn,rt),en()),c.dom.remove(bn)}),!0):!1},MA=(c,g,$)=>$te(c,g,$)||Pte&&sW(c,g,$)?Xt.some(hn):Xt.none(),JD=c=>(g,$,et={})=>{const rt=g.getBody(),ut={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:rt,currentTarget:rt,eventPhase:Event.AT_TARGET,originalTarget:rt,explicitOriginalTarget:rt,isTrusted:!1,srcElement:rt,cancelable:!1,preventDefault:hn,inputType:$},pt=T3(new InputEvent(c));return g.dispatch(c,{...pt,...ut,...et})},d1=JD("input"),g4=JD("beforeinput"),y9=dn(),iW=y9.os,m4=iW.isMacOS()||iW.isiOS(),lW=y9.browser.isFirefox(),cW=(c,g,$)=>{const et=$.keyCode===Gr.BACKSPACE?"deleteContentBackward":"deleteContentForward",rt=c.selection.isCollapsed(),ut=rt?"character":"selection",pt=xt=>rt?xt?"word":"line":"selection";G7([{keyCode:Gr.BACKSPACE,action:Vs(MD,c)},{keyCode:Gr.BACKSPACE,action:Vs(J5,c,!1)},{keyCode:Gr.DELETE,action:Vs(J5,c,!0)},{keyCode:Gr.BACKSPACE,action:Vs(XF,c,!1)},{keyCode:Gr.DELETE,action:Vs(XF,c,!0)},{keyCode:Gr.BACKSPACE,action:Vs(_7,c,g,!1)},{keyCode:Gr.DELETE,action:Vs(_7,c,g,!0)},{keyCode:Gr.BACKSPACE,action:Vs(vO,c,!1)},{keyCode:Gr.DELETE,action:Vs(vO,c,!0)},{keyCode:Gr.BACKSPACE,action:Vs(MA,c,!1,ut)},{keyCode:Gr.DELETE,action:Vs(MA,c,!0,ut)},...m4?[{keyCode:Gr.BACKSPACE,altKey:!0,action:Vs(MA,c,!1,pt(!0))},{keyCode:Gr.DELETE,altKey:!0,action:Vs(MA,c,!0,pt(!0))},{keyCode:Gr.BACKSPACE,metaKey:!0,action:Vs(MA,c,!1,pt(!1))}]:[{keyCode:Gr.BACKSPACE,ctrlKey:!0,action:Vs(MA,c,!1,pt(!0))},{keyCode:Gr.DELETE,ctrlKey:!0,action:Vs(MA,c,!0,pt(!0))}],{keyCode:Gr.BACKSPACE,action:Vs(jI,c,!1)},{keyCode:Gr.DELETE,action:Vs(jI,c,!0)},{keyCode:Gr.BACKSPACE,action:Vs(I7,c,!1)},{keyCode:Gr.DELETE,action:Vs(I7,c,!0)},{keyCode:Gr.BACKSPACE,action:Vs(gD,c,!1)},{keyCode:Gr.DELETE,action:Vs(gD,c,!0)},{keyCode:Gr.BACKSPACE,action:Vs(hD,c,!1)},{keyCode:Gr.DELETE,action:Vs(hD,c,!0)},{keyCode:Gr.BACKSPACE,action:Vs(TD,c,!1)},{keyCode:Gr.DELETE,action:Vs(TD,c,!0)},{keyCode:Gr.BACKSPACE,action:Vs(GI,c,!1)},{keyCode:Gr.DELETE,action:Vs(GI,c,!0)}],$).filter(xt=>c.selection.isEditable()).each(xt=>{$.preventDefault(),g4(c,et).isDefaultPrevented()||(xt(),d1(c,et))})},Gte=(c,g,$)=>VI([{keyCode:Gr.BACKSPACE,action:Vs(r7,c)},{keyCode:Gr.DELETE,action:Vs(r7,c)},...m4?[{keyCode:Gr.BACKSPACE,altKey:!0,action:Vs(a4,c)},{keyCode:Gr.DELETE,altKey:!0,action:Vs(a4,c)},...$?[{keyCode:lW?224:91,action:Vs(a4,c)}]:[]]:[{keyCode:Gr.BACKSPACE,ctrlKey:!0,action:Vs(a4,c)},{keyCode:Gr.DELETE,ctrlKey:!0,action:Vs(a4,c)}]],g),jte=(c,g)=>{let $=!1;c.on("keydown",et=>{$=et.keyCode===Gr.BACKSPACE,et.isDefaultPrevented()||cW(c,g,et)}),c.on("keyup",et=>{et.isDefaultPrevented()||Gte(c,et,$),$=!1})},Hte=c=>{for(;c;){if(Fr(c)||pr(c)&&c.data&&/[\r\n\s]/.test(c.data))return c;c=c.nextSibling}return null},XI=(c,g)=>{const $=c.dom,et=c.schema.getMoveCaretBeforeOnEnterElements();if(!g)return;if(/^(LI|DT|DD)$/.test(g.nodeName)){const ut=Hte(g.firstChild);ut&&/^(UL|OL|DL)$/.test(ut.nodeName)&&g.insertBefore($.doc.createTextNode(gm),g.firstChild)}const rt=$.createRng();if(g.normalize(),g.hasChildNodes()){const ut=new pm(g,g);let pt=g,xt;for(;xt=ut.current();){if(pr(xt)){rt.setStart(xt,0),rt.setEnd(xt,0);break}if(et[xt.nodeName.toLowerCase()]){rt.setStartBefore(xt),rt.setEndBefore(xt);break}pt=xt,xt=ut.next()}xt||(rt.setStart(pt,0),rt.setEnd(pt,0))}else tu(g)?g.nextSibling&&$.isBlock(g.nextSibling)?(rt.setStartBefore(g),rt.setEndBefore(g)):(rt.setStartAfter(g),rt.setEndAfter(g)):(rt.setStart(g,0),rt.setEnd(g,0));c.selection.setRng(rt),J2(c,rt)},y4=(c,g)=>{const $=c.getRoot();let et,rt=g;for(;rt!==$&&rt&&c.getContentEditable(rt)!=="false";){if(c.getContentEditable(rt)==="true"){et=rt;break}rt=rt.parentNode}return rt!==$?et:$},QD=c=>Xt.from(c.dom.getParent(c.selection.getStart(!0),c.dom.isBlock)),Ute=c=>QD(c).fold(cn(""),g=>g.nodeName.toUpperCase()),Vte=c=>QD(c).filter(g=>_2(eo.fromDom(g))).isSome(),b9=c=>{c.innerHTML='<br data-mce-bogus="1">'},Wte=(c,g,$)=>{const et=c.dom;Xt.from($.style).map(et.parseStyle).each(Et=>{const Vt={...N0(eo.fromDom(g)),...Et};et.setStyles(g,Vt)});const rt=Xt.from($.class).map(Et=>Et.split(/\s+/)),ut=Xt.from(g.className).map(Et=>Bn(Et.split(/\s+/),Ft=>Ft!==""));js(rt,ut,(Et,Ft)=>{const Vt=Bn(Ft,en=>!yn(Et,en)),Kt=[...Et,...Vt];et.setAttrib(g,"class",Kt.join(" "))});const pt=["style","class"],xt=Zs($,(Et,Ft)=>!yn(pt,Ft));et.setAttribs(g,xt)},b4=(c,g)=>{if(h0(c).toLowerCase()===g.tagName.toLowerCase()){const et=gw(c);Wte(c,g,et)}},v9=(c,g,$,et,rt=!0,ut,pt)=>{const xt=c.dom,Et=c.schema,Ft=h0(c),Vt=$?$.nodeName.toUpperCase():"";let Kt=g;const en=Et.getTextInlineElements();let mn;ut||Vt==="TABLE"||Vt==="HR"?mn=xt.create(ut||Ft,pt||{}):mn=$.cloneNode(!1);let Sn=mn;if(!rt)xt.setAttrib(mn,"style",null),xt.setAttrib(mn,"class",null);else do if(en[Kt.nodeName]){if(Yy(Kt)||My(Kt))continue;const bn=Kt.cloneNode(!1);xt.setAttrib(bn,"id",""),mn.hasChildNodes()?(bn.appendChild(mn.firstChild),mn.appendChild(bn)):(Sn=bn,mn.appendChild(bn))}while((Kt=Kt.parentNode)&&Kt!==et);return b4(c,mn),b9(Sn),mn},uW=(c,g)=>c.dom.getParent(g,tE),qte=(c,g,$)=>{let et=g;for(;et&&et!==c&&Nt(et.nextSibling);){const rt=et.parentElement;if(!rt||!$(rt))return tE(rt);et=rt}return!1},Zte=(c,g,$)=>!g&&$.nodeName.toLowerCase()===h0(c)&&c.dom.isEmpty($)&&qte(c.getBody(),$,et=>es(c.schema.getTextBlockElements(),et.nodeName.toLowerCase())),Qie=(c,g,$)=>{var et,rt,ut;const pt=g(h0(c)),xt=uW(c,$);xt&&(c.dom.insertAfter(pt,xt),XI(c,pt),((ut=(rt=(et=$.parentElement)===null||et===void 0?void 0:et.childNodes)===null||rt===void 0?void 0:rt.length)!==null&&ut!==void 0?ut:0)>1&&c.dom.remove($))},_9=(c,g)=>c.firstChild&&c.firstChild.nodeName===g,Kte=c=>{var g;return((g=c.parentNode)===null||g===void 0?void 0:g.firstChild)===c},dW=(c,g)=>{const $=c==null?void 0:c.parentNode;return ln($)&&$.nodeName===g},fW=c=>ln(c)&&/^(OL|UL|LI)$/.test(c.nodeName),eN=c=>ln(c)&&/^(LI|DT|DD)$/.test(c.nodeName),Yte=c=>fW(c)&&fW(c.parentNode),v4=c=>{const g=c.parentNode;return eN(g)?g:c},tN=(c,g,$)=>{let et=c[$?"firstChild":"lastChild"];for(;et&&!Fr(et);)et=et[$?"nextSibling":"previousSibling"];return et===g},hW=c=>Wn(Eu(N0(eo.fromDom(c)),(g,$)=>`${$}: ${g};`),(g,$)=>g+$,""),eae=(c,g,$,et,rt)=>{const ut=c.dom,pt=c.selection.getRng(),xt=$.parentNode;if($===c.getBody()||!xt)return;Yte($)&&(rt="LI");const Et=eN(et)?hW(et):void 0;let Ft=eN(et)&&Et?g(rt,{style:hW(et)}):g(rt);if(tN($,et,!0)&&tN($,et,!1))if(dW($,"LI")){const Vt=v4($);ut.insertAfter(Ft,Vt),Kte($)?ut.remove(Vt):ut.remove($)}else ut.replace(Ft,$);else if(tN($,et,!0))dW($,"LI")?(ut.insertAfter(Ft,v4($)),Ft.appendChild(ut.doc.createTextNode(" ")),Ft.appendChild($)):xt.insertBefore(Ft,$),ut.remove(et);else if(tN($,et,!1))ut.insertAfter(Ft,v4($)),ut.remove(et);else{$=v4($);const Vt=pt.cloneRange();Vt.setStartAfter(et),Vt.setEndAfter($);const Kt=Vt.extractContents();if(rt==="LI"&&_9(Kt,"LI")){const en=Bn(Nn(Ft.children,eo.fromDom),qn(dm("br")));Ft=Kt.firstChild,ut.insertAfter(Kt,$),sn(en,mn=>M1(eo.fromDom(Ft),mn)),Et&&Ft.setAttribute("style",Et)}else ut.insertAfter(Kt,$),ut.insertAfter(Ft,$);ut.remove(et)}XI(c,Ft)},iy=c=>{sn(Xw(eo.fromDom(c),vu),g=>{const $=g.dom;$.nodeValue=mv($.data)})},Xte=(c,g)=>{const $=c.dom.getParent(g,"ol,ul,dl");return $!==null&&c.dom.getContentEditableParent($)==="false"},Jte=(c,g)=>g&&g.nodeName==="A"&&c.isEmpty(g),x9=(c,g)=>c.nodeName===g||c.previousSibling&&c.previousSibling.nodeName===g,Qte=(c,g)=>c.nodeName===g||c.nextSibling&&c.nextSibling.nodeName===g,w9=(c,g)=>ln(g)&&c.isBlock(g)&&!/^(TD|TH|CAPTION|FORM)$/.test(g.nodeName)&&!/^(fixed|absolute)/i.test(g.style.position)&&c.isEditable(g.parentNode)&&c.getContentEditable(g)!=="false",ene=(c,g,$)=>{var et;const rt=[];if(!$)return;let ut=$;for(;ut=ut.firstChild;){if(c.isBlock(ut))return;Fr(ut)&&!g[ut.nodeName.toLowerCase()]&&rt.push(ut)}let pt=rt.length;for(;pt--;)ut=rt[pt],(!ut.hasChildNodes()||ut.firstChild===ut.lastChild&&((et=ut.firstChild)===null||et===void 0?void 0:et.nodeValue)===""||Jte(c,ut))&&c.remove(ut)},C9=(c,g,$)=>pr(g)?c?$===1&&g.data.charAt($-1)===Am?0:$:$===g.data.length-1&&g.data.charAt($)===Am?g.data.length:$:$,nN=c=>{const g=c.cloneRange();return g.setStart(c.startContainer,C9(!0,c.startContainer,c.startOffset)),g.setEnd(c.endContainer,C9(!1,c.endContainer,c.endOffset)),g},tne=c=>{let g=c;do pr(g)&&(g.data=g.data.replace(/^[\r\n]+/,"")),g=g.firstChild;while(g)},nne=(c,g,$,et,rt)=>{var ut,pt;const xt=c.dom,Et=(ut=y4(xt,et))!==null&&ut!==void 0?ut:xt.getRoot();let Ft=xt.getParent(et,xt.isBlock);if(!Ft||!w9(xt,Ft)){if(Ft=Ft||Et,!Ft.hasChildNodes()){const mn=xt.create(g);return b4(c,mn),Ft.appendChild(mn),$.setStart(mn,0),$.setEnd(mn,0),mn}let Vt=et;for(;Vt&&Vt.parentNode!==Ft;)Vt=Vt.parentNode;let Kt;for(;Vt&&!xt.isBlock(Vt);)Kt=Vt,Vt=Vt.previousSibling;const en=(pt=Kt==null?void 0:Kt.parentElement)===null||pt===void 0?void 0:pt.nodeName;if(Kt&&en&&c.schema.isValidChild(en,g.toLowerCase())){const mn=Kt.parentNode,Sn=xt.create(g);for(b4(c,Sn),mn.insertBefore(Sn,Kt),Vt=Kt;Vt&&!xt.isBlock(Vt);){const bn=Vt.nextSibling;Sn.appendChild(Vt),Vt=bn}$.setStart(et,rt),$.setEnd(et,rt)}}return et},k9=(c,g)=>{g.normalize();const $=g.lastChild;(!$||Fr($)&&/^(left|right)$/gi.test(c.getStyle($,"float",!0)))&&c.add(g,"br")},S9=(c,g)=>{const $=_m(c);return Mn(g)?!1:Tt($)?yn(dr.explode($),g.nodeName.toLowerCase()):$},one={insert:(c,g)=>{let $,et,rt,ut,pt=!1;const xt=c.dom,Et=c.schema,Ft=Et.getNonEmptyElements(),Vt=c.selection.getRng(),Kt=h0(c),en=eo.fromDom(Vt.startContainer),mn=y0(en,Vt.startOffset),Sn=mn.exists(lr=>Ml(lr)&&!Y0(lr)),bn=Vt.collapsed&&Sn,Pn=(lr,Hr)=>v9(c,$,br,sr,vm(c),lr,Hr),ao=lr=>{const Hr=C9(lr,$,et);if(pr($)&&(lr?Hr>0:Hr<$.data.length))return!1;if(($.parentNode===br||$===br)&&pt&&!lr||lr&&Fr($)&&$===br.firstChild)return!0;if(x9($,"TABLE")||x9($,"HR"))return Qte($,"BR")?!lr:pt&&!lr||!pt&&lr;const bs=new pm($,br);pr($)&&(lr&&Hr===0?bs.prev():!lr&&Hr===$.data.length&&bs.next());let Al;for(;Al=bs.current();){if(Fr(Al)){if(!Al.getAttribute("data-mce-bogus")){const Tl=Al.nodeName.toLowerCase();if(Ft[Tl]&&Tl!=="br")return!1}}else if(pr(Al)&&!py(Al.data))return!1;lr?bs.prev():bs.next()}return!0},po=()=>{let lr;return/^(H[1-6]|PRE|FIGURE)$/.test(rt)&&jr!=="HGROUP"?lr=Pn(Kt):lr=Pn(),S9(c,ut)&&w9(xt,ut)&&xt.isEmpty(br,void 0,{includeZwsp:!0})?lr=xt.split(ut,br):xt.insertAfter(lr,br),XI(c,lr),lr};Rr(xt,Vt).each(lr=>{Vt.setStart(lr.startContainer,lr.startOffset),Vt.setEnd(lr.endContainer,lr.endOffset)}),$=Vt.startContainer,et=Vt.startOffset;const wo=!!(g&&g.shiftKey),Io=!!(g&&g.ctrlKey);Fr($)&&$.hasChildNodes()&&!bn&&(pt=et>$.childNodes.length-1,$=$.childNodes[Math.min(et,$.childNodes.length-1)]||$,pt&&pr($)?et=$.data.length:et=0);const sr=y4(xt,$);if(!sr||Xte(c,$))return;wo||($=nne(c,Kt,Vt,$,et));let br=xt.getParent($,xt.isBlock)||xt.getRoot();ut=ln(br==null?void 0:br.parentNode)?xt.getParent(br.parentNode,xt.isBlock):null,rt=br?br.nodeName.toUpperCase():"";const jr=ut?ut.nodeName.toUpperCase():"";if(jr==="LI"&&!Io){const lr=ut;br=lr,ut=lr.parentNode,rt=jr}if(Fr(ut)&&Zte(c,wo,br))return Qie(c,Pn,br);if(/^(LI|DT|DD)$/.test(rt)&&Fr(ut)&&xt.isEmpty(br)){eae(c,Pn,ut,br,Kt);return}if(!bn&&(br===c.getBody()||!w9(xt,br)))return;const Ko=br.parentNode;let Fo;if(bn)Fo=Pn(Kt),mn.fold(()=>{qp(en,eo.fromDom(Fo))},lr=>{Iu(lr,eo.fromDom(Fo))}),c.selection.setCursorLocation(Fo,0);else if(uw(br))Fo=jC(br),xt.isEmpty(br)&&b9(br),b4(c,Fo),XI(c,Fo);else if(ao(!1))Fo=po();else if(ao(!0)&&Ko){const lr=Uo.fromRangeStart(Vt),Hr=t6(lr),bs=eo.fromDom(br),Tl=sO(bs,lr,c.schema)?Fs(bs,lr,c.schema).bind(Au=>Xt.from(Au.getNode())):Xt.none();Fo=Ko.insertBefore(Pn(),br);const du=x9(br,"HR")||Hr?Fo:Tl.getOr(br);XI(c,du)}else{const lr=nN(Vt).cloneRange();lr.setEndAfter(br);const Hr=lr.extractContents();iy(Hr),tne(Hr),Fo=Hr.firstChild,xt.insertAfter(Hr,br),ene(xt,Ft,Fo),k9(xt,br),xt.isEmpty(br)&&b9(br),Fo.normalize(),xt.isEmpty(Fo)?(xt.remove(Fo),po()):(b4(c,Fo),XI(c,Fo))}xt.setAttrib(Fo,"id",""),c.dispatch("NewBlock",{newBlock:Fo})},fakeEventName:"insertParagraph"},nae=(c,g,$)=>{const et=new pm(g,$);let rt;const ut=c.getNonEmptyElements();for(;rt=et.next();)if(ut[rt.nodeName.toLowerCase()]||pr(rt)&&rt.length>0)return!0;return!1},pW=(c,g,$)=>{const et=c.dom.createRng();$?(et.setStartBefore(g),et.setEndBefore(g)):(et.setStartAfter(g),et.setEndAfter(g)),c.selection.setRng(et),J2(c,et)},rne=(c,g)=>{const $=c.selection,et=c.dom,rt=$.getRng();let ut,pt=!1;Rr(et,rt).each(mn=>{rt.setStart(mn.startContainer,mn.startOffset),rt.setEnd(mn.endContainer,mn.endOffset)});let xt=rt.startOffset,Et=rt.startContainer;if(Fr(Et)&&Et.hasChildNodes()){const mn=xt>Et.childNodes.length-1;Et=Et.childNodes[Math.min(xt,Et.childNodes.length-1)]||Et,mn&&pr(Et)?xt=Et.data.length:xt=0}let Ft=et.getParent(Et,et.isBlock);const Vt=Ft&&Ft.parentNode?et.getParent(Ft.parentNode,et.isBlock):null,Kt=Vt?Vt.nodeName.toUpperCase():"",en=!!(g&&g.ctrlKey);Kt==="LI"&&!en&&(Ft=Vt),pr(Et)&&xt>=Et.data.length&&(nae(c.schema,Et,Ft||et.getRoot())||(ut=et.create("br"),rt.insertNode(ut),rt.setStartAfter(ut),rt.setEndAfter(ut),pt=!0)),ut=et.create("br"),vE(et,rt,ut),pW(c,ut,pt),c.undoManager.add()},oae=(c,g)=>{const $=eo.fromTag("br");Iu(eo.fromDom(g),$),c.undoManager.add()},sne=(c,g)=>{ine(c.getBody(),g)||fy(eo.fromDom(g),eo.fromTag("br"));const $=eo.fromTag("br");fy(eo.fromDom(g),$),pW(c,$.dom,!1),c.undoManager.add()},Lx=c=>tu(c.getNode()),ine=(c,g)=>Lx(Uo.after(g))?!0:$0(c,Uo.after(g)).map($=>tu($.getNode())).getOr(!1),E9=c=>c&&c.nodeName==="A"&&"href"in c,ane=c=>c.fold(Dn,E9,E9,Dn),lne=c=>{const g=Tn(tA,c),$=Uo.fromRangeStart(c.selection.getRng());return Fw(g,c.getBody(),$).filter(ane)},cne=(c,g)=>{g.fold(hn,Tn(oae,c),Tn(sne,c),hn)},gW={insert:(c,g)=>{const $=lne(c);$.isSome()?$.each(Tn(cne,c)):rne(c,g)},fakeEventName:"insertLineBreak"},mW=(c,g)=>QD(c).filter($=>g.length>0&&D0(eo.fromDom($),g)).isSome(),A9=c=>mW(c,R2(c)),yW=c=>mW(c,FL(c)),Ly=vv.generate([{br:[]},{block:[]},{none:[]}]),une=(c,g)=>yW(c),bW=c=>(g,$)=>Vte(g)===c,vW=(c,g)=>($,et)=>Ute($)===c.toUpperCase()===g,dne=c=>{const g=y4(c.dom,c.selection.getStart());return Mn(g)},_4=c=>vW("pre",c),_W=()=>vW("summary",!0),oN=c=>(g,$)=>LM(g)===c,xW=(c,g)=>A9(c),x4=(c,g)=>g,fne=c=>{const g=h0(c),$=y4(c.dom,c.selection.getStart());return ln($)&&c.schema.isValidChild($.nodeName,g)},hne=c=>{const g=c.selection.getRng(),$=eo.fromDom(g.startContainer),rt=y0($,g.startOffset).map(ut=>Ml(ut)&&!Y0(ut));return g.collapsed&&rt.getOr(!0)},Mv=(c,g)=>($,et)=>Wn(c,(ut,pt)=>ut&&pt($,et),!0)?Xt.some(g):Xt.none(),pne=(c,g)=>u7([Mv([une],Ly.none()),Mv([_4(!0),dne],Ly.none()),Mv([_W()],Ly.br()),Mv([_4(!0),oN(!1),x4],Ly.br()),Mv([_4(!0),oN(!1)],Ly.block()),Mv([_4(!0),oN(!0),x4],Ly.block()),Mv([_4(!0),oN(!0)],Ly.br()),Mv([bW(!0),x4],Ly.br()),Mv([bW(!0)],Ly.block()),Mv([xW],Ly.br()),Mv([x4],Ly.br()),Mv([fne],Ly.block()),Mv([hne],Ly.block())],[c,!!(g&&g.shiftKey)]).getOr(Ly.none()),rN=(c,g,$)=>{g.mode.isReadOnly()||(g.selection.isCollapsed()||nY(g),!(ln($)&&g4(g,c.fakeEventName).isDefaultPrevented())&&(c.insert(g,$),ln($)&&d1(g,c.fakeEventName)))},w4=(c,g)=>{if(c.mode.isReadOnly())return;const $=()=>rN(gW,c,g),et=()=>rN(one,c,g),rt=pne(c,g);switch(iR(c)){case"linebreak":rt.fold($,$,hn);break;case"block":rt.fold(et,et,hn);break;case"invert":rt.fold(et,$,hn);break;default:rt.fold($,et,hn);break}},wW=dn(),T9=wW.os.isiOS()&&wW.browser.isSafari(),sN=(c,g)=>{g.isDefaultPrevented()||(g.preventDefault(),dH(c.undoManager),c.undoManager.transact(()=>{w4(c,g)}))},CW=c=>{if(!c.collapsed)return!1;const g=c.startContainer;if(pr(g)){const $=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,et=g.data.charAt(c.startOffset-1);return $.test(et)}else return!1},gne=c=>{let g=Xt.none();const $=rt=>{g=Xt.some(rt.selection.getBookmark()),rt.undoManager.add()},et=(rt,ut)=>{rt.undoManager.undo(),g.fold(hn,pt=>rt.selection.moveToBookmark(pt)),sN(rt,ut),g=Xt.none()};c.on("keydown",rt=>{rt.keyCode===Gr.ENTER&&(T9&&CW(c.selection.getRng())?$(c):sN(c,rt))}),c.on("keyup",rt=>{rt.keyCode===Gr.ENTER&&g.each(()=>et(c,rt))})},iae=(c,g,$)=>{const et=Xr.os.isMacOS()||Xr.os.isiOS();VI([{keyCode:Gr.END,action:Vs(aV,c,!0)},{keyCode:Gr.HOME,action:Vs(aV,c,!1)},...et?[]:[{keyCode:Gr.HOME,action:Vs(DD,c,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Gr.END,action:Vs(DD,c,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Gr.END,action:Vs(_ee,c,!0)},{keyCode:Gr.HOME,action:Vs(_ee,c,!1)},{keyCode:Gr.END,action:Vs(r4,c,!0,g)},{keyCode:Gr.HOME,action:Vs(r4,c,!1,g)}],$).each(rt=>{$.preventDefault()})},FS=(c,g)=>{c.on("keydown",$=>{$.isDefaultPrevented()||iae(c,g,$)})},mne=c=>{c.on("input",g=>{g.isComposing||p$(c)})},yne=dn(),bne=(c,g,$)=>{VI([{keyCode:Gr.PAGE_UP,action:Vs(r4,c,!1,g)},{keyCode:Gr.PAGE_DOWN,action:Vs(r4,c,!0,g)}],$)},C4=c=>c.stopImmediatePropagation(),I9=c=>c.keyCode===Gr.PAGE_UP||c.keyCode===Gr.PAGE_DOWN,R9=(c,g,$)=>{$&&!c.get()?g.on("NodeChange",C4,!0):!$&&c.get()&&g.off("NodeChange",C4),c.set($)},vne=(c,g)=>{if(yne.os.isMacOS())return;const $=Ru(!1);c.on("keydown",et=>{I9(et)&&R9($,c,!0)}),c.on("keyup",et=>{et.isDefaultPrevented()||bne(c,g,et),I9(et)&&$.get()&&(R9($,c,!1),c.nodeChanged())})},kW=c=>{c.on("beforeinput",g=>{(!c.selection.isEditable()||Cn(g.getTargetRanges(),$=>!Z8(c.dom,$)))&&g.preventDefault()})},SW=(c,g)=>{const $=g.container(),et=g.offset();return pr($)?($.insertData(et,c),Xt.some(Uo($,et+c.length))):NE(g).map(rt=>{const ut=eo.fromText(c);return g.isAtEnd()?fy(rt,ut):Iu(rt,ut),Uo(ut.dom,c.length)})},EW=Tn(SW,gm),AW=Tn(SW," "),M9=(c,g,$)=>c$(c,g,$)?EW(g):AW(g),P9=c=>g=>g.fold($=>Ry(c.dom,Uo.before($)),$=>G0($),$=>Ky($),$=>$0(c.dom,Uo.after($))),_ne=(c,g,$)=>et=>c$(c,et,$)?EW(g):AW(g),iN=c=>g=>{c.selection.setRng(g.toRange()),c.nodeChanged()},TW=(c,g)=>c.isEditable(c.getParent(g,"summary")),aN=c=>{const g=Uo.fromRangeStart(c.selection.getRng()),$=eo.fromDom(c.getBody());if(c.selection.isCollapsed()){const et=Tn(tA,c),rt=Uo.fromRangeStart(c.selection.getRng());return Fw(et,c.getBody(),rt).bind(P9($)).map(ut=>()=>_ne($,g,c.schema)(ut).each(iN(c)))}else return Xt.none()},IW=c=>{const g=()=>{const $=eo.fromDom(c.getBody());c.selection.isCollapsed()||c.getDoc().execCommand("Delete");const et=Uo.fromRangeStart(c.selection.getRng());M9($,et,c.schema).each(iN(c))};return m0(Xr.browser.isFirefox()&&c.selection.isEditable()&&TW(c.dom,c.selection.getRng().startContainer),g)},RW=(c,g)=>{G7([{keyCode:Gr.SPACEBAR,action:Vs(aN,c)},{keyCode:Gr.SPACEBAR,action:Vs(IW,c)}],g).each($=>{g.preventDefault(),g4(c,"insertText",{data:" "}).isDefaultPrevented()||($(),d1(c,"insertText",{data:" "}))})},xne=c=>{c.on("keydown",g=>{g.isDefaultPrevented()||RW(c,g)})},wne=c=>YL(c)?[{keyCode:Gr.TAB,action:Vs(kV,c,!0)},{keyCode:Gr.TAB,shiftKey:!0,action:Vs(kV,c,!1)}]:[],lN=(c,g)=>{VI([...wne(c)],g).each($=>{g.preventDefault()})},MW=c=>{c.on("keydown",g=>{g.isDefaultPrevented()||lN(c,g)})},Cne=c=>{if(c.addShortcut("Meta+P","","mcePrint"),Mte(c),Ow(c))return Ru(null);{const g=FQ(c);return kW(c),u1(c),SV(c,g),jte(c,g),gne(c),xne(c),mne(c),MW(c),FS(c,g),vne(c,g),g}};class kne{constructor(g){this.lastPath=[],this.editor=g;let $;const et=this;"onselectionchange"in g.getDoc()||g.on("NodeChange click mouseup keyup focus",rt=>{const ut=g.selection.getRng(),pt={startContainer:ut.startContainer,startOffset:ut.startOffset,endContainer:ut.endContainer,endOffset:ut.endOffset};(rt.type==="nodechange"||!kt(pt,$))&&g.dispatch("SelectionChange"),$=pt}),g.on("contextmenu",()=>{n5(g),g.dispatch("SelectionChange")}),g.on("SelectionChange",()=>{const rt=g.selection.getStart(!0);rt&&KT(g)&&!et.isSameElementPath(rt)&&g.dom.isChildOf(rt,g.getBody())&&g.nodeChanged({selectionChange:!0})}),g.on("mouseup",rt=>{!rt.isDefaultPrevented()&&KT(g)&&(g.selection.getNode().nodeName==="IMG"?o1.setEditorTimeout(g,()=>{g.nodeChanged()}):g.nodeChanged())})}nodeChanged(g={}){const $=this.editor,et=$.selection;let rt;if($.initialized&&et&&!jL($)){const ut=$.getBody();rt=et.getStart(!0)||ut,(rt.ownerDocument!==$.getDoc()||!$.dom.isChildOf(rt,ut))&&(rt=ut);const pt=[];$.dom.getParent(rt,xt=>xt===ut?!0:(pt.push(xt),!1)),$.dispatch("NodeChange",{...g,element:rt,parents:pt})}}isSameElementPath(g){let $;const et=this.editor,rt=Do(et.dom.getParents(g,xo,et.getBody()));if(rt.length===this.lastPath.length){for($=rt.length;$>=0&&rt[$]===this.lastPath[$];$--);if($===-1)return this.lastPath=rt,!0}return this.lastPath=rt,!1}}const O9=zC("image"),Sne=c=>{const g=c;return Xt.from(g[O9])},Ene=(c,g)=>{const $=c;$[O9]=g},D9=zC("event"),Ane=c=>{const g=c;return Xt.from(g[D9])},cN=c=>g=>{const $=g;$[D9]=c},PW=(c,g)=>cN(g)(c),OW=cN(0),DW=cN(2),Tne=cN(1),Ine=(c=>g=>{const $=g;return Xt.from($[D9]).exists(et=>et===c)})(0),Rne=()=>Object.freeze({length:0,item:c=>null}),N9=zC("mode"),JI=c=>{const g=c;return Xt.from(g[N9])},uN=c=>g=>{const $=g;$[N9]=c},NW=(c,g)=>uN(g)(c),L9=uN(0),F9=uN(2),Mne=uN(1),LW=c=>g=>{const $=g;return Xt.from($[N9]).exists(et=>et===c)},PA=LW(0),FW=LW(1),Pne=(c,g)=>({...g,get length(){return g.length},add:($,et)=>{if(PA(c))if(Tt($)){if(!fn(et))return g.add($,et)}else return g.add($);return null},remove:$=>{PA(c)&&g.remove($)},clear:()=>{PA(c)&&g.clear()}}),lae=["none","copy","link","move"],dN=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],z9=()=>{const c=new window.DataTransfer;let g="move",$="all";const et={get dropEffect(){return g},set dropEffect(rt){yn(lae,rt)&&(g=rt)},get effectAllowed(){return $},set effectAllowed(rt){Ine(et)&&yn(dN,rt)&&($=rt)},get items(){return Pne(et,c.items)},get files(){return FW(et)?Rne():c.files},get types(){return c.types},setDragImage:(rt,ut,pt)=>{PA(et)&&(Ene(et,{image:rt,x:ut,y:pt}),c.setDragImage(rt,ut,pt))},getData:rt=>FW(et)?"":c.getData(rt),setData:(rt,ut)=>{PA(et)&&c.setData(rt,ut)},clearData:rt=>{PA(et)&&c.clearData(rt)}};return L9(et),et},One=c=>{const g=z9(),$=JI(c);return F9(c),OW(g),g.dropEffect=c.dropEffect,g.effectAllowed=c.effectAllowed,Sne(c).each(et=>g.setDragImage(et.image,et.x,et.y)),sn(c.types,et=>{et!=="Files"&&g.setData(et,c.getData(et))}),sn(c.files,et=>g.items.add(et)),Ane(c).each(et=>{PW(g,et)}),$.each(et=>{NW(c,et),NW(g,et)}),g},Dne=c=>{const g=c.getData("text/html");return g===""?Xt.none():Xt.some(g)},zW=(c,g)=>c.setData("text/html",g),BW="x-tinymce/html",fN=cn(BW),B9="<!-- "+BW+" -->",Nne=c=>B9+c,Lne=c=>c.replace(B9,""),$W=c=>c.indexOf(B9)!==-1,Fne=c=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(c),zne=(c,g)=>{let $="<"+c;const et=Eu(g,(rt,ut)=>ut+'="'+tw.encodeAllRaw(rt)+'"');return et.length&&($+=" "+et.join(" ")),$+">"},Bne=(c,g,$)=>{const et=c.split(/\n\n/),rt=zne(g,$),ut="</"+g+">",pt=Nn(et,Et=>Et.split(/\n/).join("<br />")),xt=Et=>rt+Et+ut;return pt.length===1?pt[0]:Nn(pt,xt).join("")},Vu="%MCEPASTEBIN%",$ne=(c,g)=>{const{dom:$,selection:et}=c,rt=c.getBody();g.set(et.getRng());const ut=$.add(c.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},Vu);Xr.browser.isFirefox()&&$.setStyle(ut,"left",$.getStyle(rt,"direction",!0)==="rtl"?65535:-65535),$.bind(ut,"beforedeactivate focusin focusout",pt=>{pt.stopPropagation()}),ut.focus(),et.select(ut,!0)},GW=(c,g)=>{const $=c.dom;if($9(c)){let et;const rt=g.get();for(;et=$9(c);)$.remove(et),$.unbind(et);rt&&c.selection.setRng(rt)}g.set(null)},$9=c=>c.dom.get("mcepastebin"),G9=c=>ln(c)&&c.id==="mcepastebin",jW=c=>{const g=c.dom,$=(pt,xt)=>{pt.appendChild(xt),g.remove(xt,!0)},[et,...rt]=Bn(c.getBody().childNodes,G9);sn(rt,pt=>{$(et,pt)});const ut=g.select("div[id=mcepastebin]",et);for(let pt=ut.length-1;pt>=0;pt--){const xt=g.create("div");et.insertBefore(xt,ut[pt]),$(xt,ut[pt])}return et?et.innerHTML:""},HW=c=>c===Vu,Gne=c=>{const g=Ru(null);return{create:()=>$ne(c,g),remove:()=>GW(c,g),getEl:()=>$9(c),getHtml:()=>jW(c),getLastRng:g.get}},j9=(c,g)=>(dr.each(g,$=>{Pt($,RegExp)?c=c.replace($,""):c=c.replace($[0],$[1])}),c),H9=c=>{const g=xu(),$=gA({},g);let et="";const rt=g.getVoidElements(),ut=dr.makeMap("script noscript style textarea video audio iframe object"," "),pt=g.getBlockElements(),xt=Et=>{const Ft=Et.name,Vt=Et;if(Ft==="br"){et+=`
`;return}if(Ft!=="wbr"){if(rt[Ft]&&(et+=" "),ut[Ft]){et+=" ";return}if(Et.type===3&&(et+=Et.value),!(Et.name in g.getVoidElements())){let Kt=Et.firstChild;if(Kt)do xt(Kt);while(Kt=Kt.next)}pt[Ft]&&Vt.next&&(et+=`
`,Ft==="p"&&(et+=`
`))}};return c=j9(c,[/<!\[[^\]]+\]>/g]),xt($.parse(c)),et},UW=c=>(c=j9(c,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,($,et,rt)=>!et&&!rt?" ":gm],/<br class="Apple-interchange-newline">/g,/<br>$/i]),c),jne=c=>{let g=0;return()=>c+g++},Hne=c=>{const g=c.toLowerCase(),$={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return dr.hasOwn($,g)?"image/"+$[g]:"image/"+g},VW=(c,g)=>{const $=gA({sanitize:tP(c),sandbox_iframes:ME(c),sandbox_iframes_exclusions:_R(c),convert_unsafe_embeds:JL(c)},c.schema);$.addNodeFilter("meta",rt=>{dr.each(rt,ut=>{ut.remove()})});const et=$.parse(g,{forced_root_block:!1,isRootContent:!0});return pS({validate:!0},c.schema).serialize(et)},WW=(c,g)=>({content:c,cancelled:g}),Une=(c,g,$)=>{const et=c.dom.create("div",{style:"display:none"},g),rt=GP(c,et,$);return WW(rt.node.innerHTML,rt.isDefaultPrevented())},QI=(c,g,$)=>{const et=S8(c,g,$),rt=VW(c,et.content);return c.hasEventListeners("PastePostProcess")&&!et.isDefaultPrevented()?Une(c,rt,$):WW(rt,et.isDefaultPrevented())},Vne=(c,g,$)=>QI(c,g,$),zS=(c,g)=>(c.insertContent(g,{merge:JM(c),paste:!0}),!0),OA=c=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(c),Wne=(c,g)=>OA(g)&&Cn(oP(c),$=>Bl(g.toLowerCase(),`.${$.toLowerCase()}`)),qne=(c,g,$)=>(c.undoManager.extra(()=>{$(c,g)},()=>{c.insertContent('<img src="'+g+'">')}),!0),e3=(c,g,$)=>(c.undoManager.extra(()=>{$(c,g)},()=>{c.execCommand("mceInsertLink",!1,g)}),!0),Zne=(c,g,$)=>!c.selection.isCollapsed()&&OA(g)?e3(c,g,$):!1,U9=(c,g,$)=>Wne(c,g)?qne(c,g,$):!1,Kne=(c,g)=>{dr.each([Zne,U9,zS],$=>!$(c,g,zS))},qW=(c,g,$)=>{$||!bR(c)?zS(c,g):Kne(c,g)},ZW=jne("mceclip"),V9=c=>{const g=z9();return zW(g,c),F9(g),g},W9=(c,g,$,et,rt)=>{const ut=Vne(c,g,$);if(!ut.cancelled){const pt=ut.content,xt=()=>qW(c,pt,et);rt?g4(c,"insertFromPaste",{dataTransfer:V9(pt)}).isDefaultPrevented()||(xt(),d1(c,"insertFromPaste")):xt()}},hN=(c,g,$,et)=>{const rt=$||$W(g);W9(c,Lne(g),rt,!1,et)},q9=(c,g,$)=>{const et=c.dom.encode(g).replace(/\r\n/g,`
`),rt=jy(et,yw(c)),ut=Bne(rt,h0(c),gw(c));W9(c,ut,!1,!0,$)},Z9=c=>{const g={};if(c&&c.types)for(let $=0;$<c.types.length;$++){const et=c.types[$];try{g[et]=c.getData(et)}catch{g[et]=""}}return g},BS=(c,g)=>g in c&&c[g].length>0,K9=c=>BS(c,"text/html")||BS(c,"text/plain"),Y9=(c,g)=>{const $=g.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ln($)?c.dom.encode($[1]):void 0},KW=(c,g,$,et)=>{const rt=ZW(),ut=xm(c)&&ln($.name),pt=ut?Y9(c,$.name):rt,xt=ut?$.name:void 0,Et=g.create(rt,$,et,pt,xt);return g.add(Et),Et},Yne=(c,g)=>{cA(g.uri).each(({data:$,type:et,base64Encoded:rt})=>{const ut=rt?$:btoa($),pt=g.file,xt=c.editorUpload.blobCache,Et=xt.getByData(ut,et),Ft=Et??KW(c,xt,pt,ut);hN(c,`<img src="${Ft.blobUri()}">`,!1,!0)})},Xne=c=>c.type==="paste",Jne=c=>Promise.all(Nn(c,g=>MG(g).then($=>({file:g,uri:$})))),YW=c=>{const g=oP(c);return $=>As($.type,"image/")&&Cn(g,et=>Hne(et)===$.type)},X9=(c,g)=>{const $=g.items?ro(Ts(g.items),rt=>rt.kind==="file"?[rt.getAsFile()]:[]):[],et=g.files?Ts(g.files):[];return Bn($.length>0?$:et,YW(c))},XW=(c,g,$)=>{const et=Xne(g)?g.clipboardData:g.dataTransfer;if(RE(c)&&et){const rt=X9(c,et);if(rt.length>0)return g.preventDefault(),Jne(rt).then(ut=>{$&&c.selection.setRng($),sn(ut,pt=>{Yne(c,pt)})}),!0}return!1},JW=c=>{var g,$;return Xr.os.isAndroid()&&(($=(g=c.clipboardData)===null||g===void 0?void 0:g.items)===null||$===void 0?void 0:$.length)===0},QW=c=>Gr.metaKeyPressed(c)&&c.keyCode===86||c.shiftKey&&c.keyCode===45,J9=(c,g,$,et,rt)=>{let ut=UW($);const pt=BS(g,fN())||$W($),xt=!pt&&Fne(ut),Et=OA(ut);(HW(ut)||!ut.length||xt&&!Et)&&(et=!0),(et||Et)&&(BS(g,"text/plain")&&xt?ut=g["text/plain"]:ut=H9(ut)),!HW(ut)&&(et?q9(c,ut,rt):hN(c,ut,pt,rt))},tq=(c,g,$)=>{let et;const rt=()=>g.getLastRng()||c.selection.getRng();c.on("keydown",ut=>{QW(ut)&&!ut.isDefaultPrevented()&&(et=ut.shiftKey&&ut.keyCode===86)}),c.on("paste",ut=>{if(ut.isDefaultPrevented()||JW(ut))return;const pt=$.get()==="text"||et;et=!1;const xt=Z9(ut.clipboardData);!K9(xt)&&XW(c,ut,rt())||(BS(xt,"text/html")?(ut.preventDefault(),J9(c,xt,xt["text/html"],pt,!0)):BS(xt,"text/plain")&&BS(xt,"text/uri-list")?(ut.preventDefault(),J9(c,xt,xt["text/plain"],pt,!0)):(g.create(),o1.setEditorTimeout(c,()=>{const Et=g.getHtml();g.remove(),J9(c,xt,Et,pt,!1)},0)))})},Qne=c=>{const g=rt=>As(rt,"webkit-fake-url"),$=rt=>As(rt,"data:"),et=rt=>{var ut;return((ut=rt.data)===null||ut===void 0?void 0:ut.paste)===!0};c.parser.addNodeFilter("img",(rt,ut,pt)=>{if(!RE(c)&&et(pt))for(const xt of rt){const Et=xt.attr("src");Tt(Et)&&!xt.attr("data-mce-object")&&Et!==Xr.transparentSrc&&(g(Et)||!eP(c)&&$(Et))&&xt.remove()}})},eoe=(c,g,$)=>{tq(c,g,$),Qne(c)},toe=(c,g)=>{g.get()==="text"?(g.set("html"),lI(c,!1)):(g.set("text"),lI(c,!0)),c.focus()},noe=(c,g)=>{c.addCommand("mceTogglePlainTextPaste",()=>{toe(c,g)}),c.addCommand("mceInsertClipboardContent",($,et)=>{et.html&&hN(c,et.html,et.internal,!1),et.text&&q9(c,et.text,!1)})},ooe=(c,g,$)=>{if(c)try{return c.clearData(),c.setData("text/html",g),c.setData("text/plain",$),c.setData(fN(),g),!0}catch{return!1}else return!1},k4=(c,g,$,et)=>{ooe(c.clipboardData,g.html,g.text)?(c.preventDefault(),et()):$(g.html,et)},nq=c=>(g,$)=>{const{dom:et,selection:rt}=c,ut=et.create("div",{contenteditable:"false","data-mce-bogus":"all"}),pt=et.create("div",{contenteditable:"true"},g);et.setStyles(ut,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),ut.appendChild(pt),et.add(c.getBody(),ut);const xt=rt.getRng();pt.focus();const Et=et.createRng();Et.selectNodeContents(pt),rt.setRng(Et),o1.setEditorTimeout(c,()=>{rt.setRng(xt),et.remove(ut),$()},0)},Q9=c=>({html:Nne(c.selection.getContent({contextual:!0})),text:c.selection.getContent({format:"text"})}),roe=c=>!!c.dom.getParent(c.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",c.getBody()),oq=c=>!c.selection.isCollapsed()||roe(c),rq=c=>g=>{!g.isDefaultPrevented()&&oq(c)&&c.selection.isEditable()&&k4(g,Q9(c),nq(c),()=>{if(Xr.browser.isChromium()||Xr.browser.isFirefox()){const $=c.selection.getRng();o1.setEditorTimeout(c,()=>{c.selection.setRng($),c.execCommand("Delete")},0)}else c.execCommand("Delete")})},sq=c=>g=>{!g.isDefaultPrevented()&&oq(c)&&k4(g,Q9(c),nq(c),hn)},soe=c=>{c.on("cut",rq(c)),c.on("copy",sq(c))},iq=(c,g)=>{var $,et;return cr.getCaretRangeFromPoint(($=g.clientX)!==null&&$!==void 0?$:0,(et=g.clientY)!==null&&et!==void 0?et:0,c.getDoc())},ioe=c=>{const g=c["text/plain"];return g?g.indexOf("file://")===0:!1},aq=(c,g)=>{c.focus(),g&&c.selection.setRng(g)},aoe=c=>Cn(c.files,g=>/^image\//.test(g.type)),lq=(c,g,$,et)=>{const rt=c.getParent($,pt=>O1(g,pt));if(!Nt(c.getParent($,"summary")))return!0;if(rt&&es(et,"text/html")){const pt=new DOMParser().parseFromString(et["text/html"],"text/html").body;return!Nt(pt.querySelector(rt.nodeName.toLowerCase()))}else return!1},loe=c=>{c.on("input",g=>{const $=et=>Nt(et.querySelector("summary"));if(g.inputType==="deleteByDrag"){const et=Bn(c.dom.select("details"),$);sn(et,rt=>{tu(rt.firstChild)&&rt.firstChild.remove();const ut=c.dom.create("summary");ut.appendChild(j1().dom),rt.prepend(ut)})}})},coe=(c,g)=>{mR(c)&&c.on("dragend dragover draggesture dragdrop drop drag",$=>{$.preventDefault(),$.stopPropagation()}),RE(c)||c.on("drop",$=>{const et=$.dataTransfer;et&&aoe(et)&&$.preventDefault()}),c.on("drop",$=>{if($.isDefaultPrevented())return;const et=iq(c,$);if(Mn(et))return;const rt=Z9($.dataTransfer),ut=BS(rt,fN());if((!K9(rt)||ioe(rt))&&XW(c,$,et))return;const pt=rt[fN()],xt=pt||rt["text/html"]||rt["text/plain"],Et=lq(c.dom,c.schema,et.startContainer,rt),Ft=g.get();Ft&&!Et||xt&&($.preventDefault(),o1.setEditorTimeout(c,()=>{c.undoManager.transact(()=>{(pt||Ft&&Et)&&c.execCommand("Delete"),aq(c,et);const Vt=UW(xt);rt["text/html"]?hN(c,Vt,ut,!0):q9(c,Vt,!0)})}))}),c.on("dragstart",$=>{g.set(!0)}),c.on("dragover dragend",$=>{RE(c)&&!g.get()&&($.preventDefault(),aq(c,iq(c,$))),$.type==="dragend"&&g.set(!1)}),loe(c)},uoe=c=>{const g=rt=>ut=>{rt(c,ut)},$=yR(c);Wt($)&&c.on("PastePreProcess",g($));const et=KM(c);Wt(et)&&c.on("PastePostProcess",g(et))},doe=(c,g)=>{c.on("PastePreProcess",$=>{$.content=g(c,$.content,$.internal)})},foe=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,cq=c=>dr.trim(c).replace(foe,aE).toLowerCase(),hoe=(c,g,$)=>{const et=XM(c);if($||et==="all"||!qL(c))return g;const rt=et?et.split(/[, ]/):[];if(rt&&et!=="none"){const ut=c.dom,pt=c.selection.getNode();g=g.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(xt,Et,Ft,Vt)=>{const Kt=ut.parseStyle(ut.decode(Ft)),en={};for(let Sn=0;Sn<rt.length;Sn++){const bn=Kt[rt[Sn]];let Pn=bn,ao=ut.getStyle(pt,rt[Sn],!0);/color/.test(rt[Sn])&&(Pn=cq(Pn),ao=cq(ao)),ao!==Pn&&(en[rt[Sn]]=bn)}const mn=ut.serializeStyle(en,"span");return mn?Et+' style="'+mn+'"'+Vt:Et+Vt})}else g=g.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return g=g.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(ut,pt,xt,Et)=>pt+' style="'+xt+'"'+Et),g},poe=c=>{(Xr.browser.isChromium()||Xr.browser.isSafari())&&doe(c,hoe)},uq=c=>{const g=Ru(!1),$=Ru(QM(c)?"text":"html"),et=Gne(c);poe(c),noe(c,$),uoe(c),c.addQueryStateHandler("mceTogglePlainTextPaste",()=>$.get()==="text"),c.on("PreInit",()=>{soe(c),coe(c,g),eoe(c,et,$)})},dq=c=>{c.on("click",g=>{c.dom.getParent(g.target,"details")&&g.preventDefault()})},goe=c=>{c.parser.addNodeFilter("details",g=>{const $=XL(c);sn(g,et=>{$==="expanded"?et.attr("open","open"):$==="collapsed"&&et.attr("open",null)})}),c.serializer.addNodeFilter("details",g=>{const $=rP(c);sn(g,et=>{$==="expanded"?et.attr("open","open"):$==="collapsed"&&et.attr("open",null)})})},moe=c=>{dq(c),goe(c)},yoe=tu,fq=pr,boe=c=>nu(c.dom),voe=c=>Qo(c.dom),hq=c=>g=>ba(eo.fromDom(c),g),pN=(c,g,$)=>tp(eo.fromDom(c),et=>voe(et)||$.isBlock(En(et)),hq(g)).getOr(eo.fromDom(g)).dom,ez=(c,g)=>tp(eo.fromDom(c),boe,hq(g)),pq=(c,g,$)=>{const et=new pm(c,g),rt=$?et.next.bind(et):et.prev.bind(et);let ut=c;for(let pt=$?c:rt();pt&&!yoe(pt);pt=rt())Qv(pt)&&(ut=pt);return ut},gq=(c,g,$)=>{const rt=Uo.fromRangeStart(c).getNode(),ut=pN(rt,g,$),pt=pq(rt,ut,!1),xt=pq(rt,ut,!0),Et=document.createRange();return ez(pt,ut).fold(()=>{fq(pt)?Et.setStart(pt,0):Et.setStartBefore(pt)},Ft=>Et.setStartBefore(Ft.dom)),ez(xt,ut).fold(()=>{fq(xt)?Et.setEnd(xt,xt.data.length):Et.setEndAfter(xt)},Ft=>Et.setEndAfter(Ft.dom)),Et},mq=c=>{const g=gq(c.selection.getRng(),c.getBody(),c.schema);c.selection.setRng(_O(g))},tz=c=>{c.on("mousedown",g=>{g.detail>=3&&(g.preventDefault(),mq(c))})};var n3;(function(c){c.Before="before",c.After="after"})(n3||(n3={}));const yq=(c,g)=>Math.abs(c.left-g),_oe=(c,g)=>Math.abs(c.right-g),bq=(c,g)=>c>=g.top&&c<=g.bottom,xoe=(c,g)=>c.top<g.bottom&&c.bottom>g.top,vq=(c,g)=>{const $=Jv(c,g)/Math.min(c.height,g.height);return xoe(c,g)&&$>.5},woe=(c,g)=>{const $=Bn(c,et=>bq(g,et));return dM($).fold(()=>[[],c],et=>{const{pass:rt,fail:ut}=Ln(c,pt=>vq(pt,et));return[rt,ut]})},Coe=(c,g)=>({node:c.node,position:yq(c,g)<_oe(c,g)?n3.Before:n3.After}),koe=(c,g,$)=>g>c.left&&g<c.right?0:Math.min(Math.abs(c.left-g),Math.abs(c.right-g)),DA=(c,g,$,et)=>{const rt=Kt=>Qv(Kt.node)?Xt.some(Kt):Fr(Kt.node)?DA(Ts(Kt.node.childNodes),g,$,!1):Xt.none(),ut=(Kt,en,mn)=>rt(en).filter(Sn=>Math.abs(mn(Kt,g,$)-mn(Sn,g,$))<2&&pr(Sn.node)),pt=(Kt,en)=>{const mn=xr(Kt,(Sn,bn)=>en(Sn,g,$)-en(bn,g,$));return Rs(mn,rt).map(Sn=>et&&!pr(Sn.node)&&mn.length>1?ut(Sn,mn[1],en).getOr(Sn):Sn)},[xt,Et]=woe(g7(c),$),{pass:Ft,fail:Vt}=Ln(Et,Kt=>Kt.top<$);return pt(xt,koe).orThunk(()=>pt(Vt,k2)).orThunk(()=>pt(Ft,k2))},Soe=(c,g,$,et)=>{const rt=(ut,pt)=>{const xt=Ft=>Fr(Ft)&&Ft.classList.contains("mce-drag-container"),Et=Bn(ut.dom.childNodes,qn(xt));return pt.fold(()=>DA(Et,$,et,!0),Ft=>{const Vt=Bn(Et,Kt=>Kt!==Ft.dom);return DA(Vt,$,et,!0)}).orThunk(()=>(ba(ut,c)?Xt.none():tx(ut)).bind(Vt=>rt(Vt,Xt.some(ut))))};return rt(g,Xt.none())},Eoe=(c,g,$)=>{const et=eo.fromDom(c),rt=zv(et),pt=eo.fromPoint(rt,g,$).filter(xt=>Fm(et,xt)).getOr(et);return Soe(et,pt,g,$)},nz=(c,g,$)=>Eoe(c,g,$).filter(et=>_k(et.node)).map(et=>Coe(et,g)),_q=c=>{var g,$;const et=c.getBoundingClientRect(),rt=c.ownerDocument,ut=rt.documentElement,pt=rt.defaultView;return{top:et.top+((g=pt==null?void 0:pt.scrollY)!==null&&g!==void 0?g:0)-ut.clientTop,left:et.left+(($=pt==null?void 0:pt.scrollX)!==null&&$!==void 0?$:0)-ut.clientLeft}},Aoe=c=>c.inline?_q(c.getBody()):{left:0,top:0},Toe=c=>{const g=c.getBody();return c.inline?{left:g.scrollLeft,top:g.scrollTop}:{left:0,top:0}},Ioe=c=>{const g=c.getBody(),$=c.getDoc().documentElement,et={left:g.scrollLeft,top:g.scrollTop},rt={left:g.scrollLeft||$.scrollLeft,top:g.scrollTop||$.scrollTop};return c.inline?et:rt},Roe=(c,g)=>{if(g.target.ownerDocument!==c.getDoc()){const $=_q(c.getContentAreaContainer()),et=Ioe(c);return{left:g.pageX-$.left+et.left,top:g.pageY-$.top+et.top}}return{left:g.pageX,top:g.pageY}},mN=(c,g,$)=>({pageX:$.left-c.left+g.left,pageY:$.top-c.top+g.top}),xq=(c,g)=>mN(Aoe(c),Toe(c),Roe(c,g)),oz=c=>({target:c,srcElement:c}),Moe=(c,g,$,et)=>({...g,dataTransfer:et,type:c,...oz($)}),Poe=(c,g,$)=>{const et=nr("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:c,composedPath:et,initEvent:et,preventDefault:hn,stopImmediatePropagation:hn,stopPropagation:hn,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:et,initMouseEvent:et,getModifierState:et,dataTransfer:$,...oz(g)}},Ooe=(c,g)=>{const $=One(c);return g==="dragstart"?(OW($),L9($)):g==="drop"?(DW($),F9($)):(Tne($),Mne($)),$},cae=(c,g,$,et)=>{const rt=Ooe($,c);return fn(et)?Poe(c,g,rt):Moe(c,et,g,rt)},yN=32,wq=100,o3=8,NA=16,Cq=nu,Doe=hM(Cq,Qo),kq=(c,g,$)=>Cq($)&&$!==g&&c.isEditable($.parentElement),Noe=(c,g,$)=>Mn(g)||g===$||c.dom.isChildOf(g,$)?!1:c.dom.isEditable(g),rz=(c,g,$,et)=>{const rt=c.dom,ut=g.cloneNode(!0);rt.setStyles(ut,{width:$,height:et}),rt.setAttrib(ut,"data-mce-selected",null);const pt=rt.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return rt.setStyles(pt,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:$,height:et}),rt.setStyles(ut,{margin:0,boxSizing:"border-box"}),pt.appendChild(ut),pt},Sq=(c,g)=>{c.parentNode!==g&&g.appendChild(c)},bN=(c,g)=>$=>()=>{const et=c==="left"?$.scrollX:$.scrollY;$.scroll({[c]:et+g,behavior:"smooth"})},Eq=bN("left",-yN),sz=bN("left",yN),Aq=bN("top",-yN),Loe=bN("top",yN),Foe=(c,g,$,et,rt,ut,pt,xt,Et,Ft,Vt,Kt)=>{let en=0,mn=0;c.style.left=g.pageX+"px",c.style.top=g.pageY+"px",g.pageX+$>rt&&(en=g.pageX+$-rt),g.pageY+et>ut&&(mn=g.pageY+et-ut),c.style.width=$-en+"px",c.style.height=et-mn+"px";const Sn=Et.clientHeight,bn=Et.clientWidth,Pn=pt+Et.getBoundingClientRect().top,ao=xt+Et.getBoundingClientRect().left;Vt.on(po=>{po.intervalId.clear(),po.dragging&&Kt&&(pt+o3>=Sn?po.intervalId.set(Loe(Ft)):pt-o3<=0?po.intervalId.set(Aq(Ft)):xt+o3>=bn?po.intervalId.set(sz(Ft)):xt-o3<=0?po.intervalId.set(Eq(Ft)):Pn+NA>=window.innerHeight?po.intervalId.set(Loe(window)):Pn-NA<=0?po.intervalId.set(Aq(window)):ao+NA>=window.innerWidth?po.intervalId.set(sz(window)):ao-NA<=0&&po.intervalId.set(Eq(window)))})},Tq=c=>{c&&c.parentNode&&c.parentNode.removeChild(c)},zoe=(c,g)=>{const $=c.getParent(g.parentNode,c.isBlock);Tq(g),$&&$!==c.getRoot()&&c.isEmpty($)&&P_(eo.fromDom($))},Iq=c=>c.button===0,Boe=(c,g)=>({pageX:g.pageX-c.relX,pageY:g.pageY+5}),Rq=(c,g)=>$=>{if(Iq($)){const et=Qn(g.dom.getParents($.target),Doe).getOr(null);if(ln(et)&&kq(g.dom,g.getBody(),et)){const rt=g.dom.getPos(et),ut=g.getBody(),pt=g.getDoc().documentElement;c.set({element:et,dataTransfer:z9(),dragging:!1,screenX:$.screenX,screenY:$.screenY,maxX:(g.inline?ut.scrollWidth:pt.offsetWidth)-2,maxY:(g.inline?ut.scrollHeight:pt.offsetHeight)-2,relX:$.pageX-rt.x,relY:$.pageY-rt.y,width:et.offsetWidth,height:et.offsetHeight,ghost:rz(g,et,et.offsetWidth,et.offsetHeight),intervalId:Dp(wq)})}}},$oe=(c,g,$)=>{c._selectionOverrides.hideFakeCaret(),nz(c.getBody(),g,$).fold(()=>c.selection.placeCaretAt(g,$),et=>{const rt=c._selectionOverrides.showCaret(1,et.node,et.position===n3.Before,!1);rt?c.selection.setRng(rt):c.selection.placeCaretAt(g,$)})},S4=(c,g,$,et,rt)=>{g==="dragstart"&&zW(et,c.dom.getOuterHTML($));const ut=cae(g,$,et,rt);return c.dispatch(g,ut)},Goe=(c,g)=>{const $=DC((rt,ut)=>$oe(g,rt,ut),0);g.on("remove",$.cancel);const et=c;return rt=>c.on(ut=>{const pt=Math.max(Math.abs(rt.screenX-ut.screenX),Math.abs(rt.screenY-ut.screenY));if(!ut.dragging&&pt>10){const xt=S4(g,"dragstart",ut.element,ut.dataTransfer,rt);if(ln(xt.dataTransfer)&&(ut.dataTransfer=xt.dataTransfer),xt.isDefaultPrevented())return;ut.dragging=!0,g.focus()}if(ut.dragging){const xt=rt.currentTarget===g.getDoc().documentElement,Et=Boe(ut,xq(g,rt));Sq(ut.ghost,g.getBody()),Foe(ut.ghost,Et,ut.width,ut.height,ut.maxX,ut.maxY,rt.clientY,rt.clientX,g.getContentAreaContainer(),g.getWin(),et,xt),$.throttle(rt.clientX,rt.clientY)}})},joe=c=>{const g=c.getSel();if(ln(g)){const et=g.getRangeAt(0).startContainer;return pr(et)?et.parentNode:et}else return null},Hoe=(c,g)=>$=>{c.on(et=>{var rt;if(et.intervalId.clear(),et.dragging){if(Noe(g,joe(g.selection),et.element)){const ut=(rt=g.getDoc().elementFromPoint($.clientX,$.clientY))!==null&&rt!==void 0?rt:g.getBody();S4(g,"drop",ut,et.dataTransfer,$).isDefaultPrevented()||g.undoManager.transact(()=>{zoe(g.dom,et.element),Dne(et.dataTransfer).each(xt=>g.insertContent(xt)),g._selectionOverrides.hideFakeCaret()})}S4(g,"dragend",g.getBody(),et.dataTransfer,$)}}),Mq(c)},iz=(c,g,$)=>{c.on(et=>{et.intervalId.clear(),et.dragging&&$.fold(()=>S4(g,"dragend",et.element,et.dataTransfer),rt=>S4(g,"dragend",et.element,et.dataTransfer,rt))}),Mq(c)},uae=(c,g)=>$=>iz(c,g,Xt.some($)),Mq=c=>{c.on(g=>{g.intervalId.clear(),Tq(g.ghost)}),c.clear()},Pq=c=>{const g=Em(),$=Uu.DOM,et=document,rt=Rq(g,c),ut=Goe(g,c),pt=Hoe(g,c),xt=uae(g,c);c.on("mousedown",rt),c.on("mousemove",ut),c.on("mouseup",pt),$.bind(et,"mousemove",ut),$.bind(et,"mouseup",xt),c.on("remove",()=>{$.unbind(et,"mousemove",ut),$.unbind(et,"mouseup",xt)}),c.on("keydown",Et=>{Et.keyCode===Gr.ESC&&iz(g,c,Xt.none())})},Uoe=c=>{const g=rt=>{if(!rt.isDefaultPrevented()){const ut=rt.dataTransfer;ut&&(yn(ut.types,"Files")||ut.files.length>0)&&(rt.preventDefault(),rt.type==="drop"&&lD(c,"Dropped file type is not supported"))}},$=rt=>{YP(c,rt.target)&&g(rt)},et=()=>{const rt=Uu.DOM,ut=c.dom,pt=document,xt=c.inline?c.getBody():c.getDoc(),Et=["drop","dragover"];sn(Et,Ft=>{rt.bind(pt,Ft,$),ut.bind(xt,Ft,g)}),c.on("remove",()=>{sn(Et,Ft=>{rt.unbind(pt,Ft,$),ut.unbind(xt,Ft,g)})})};c.on("init",()=>{o1.setEditorTimeout(c,et,0)})},az=c=>{Pq(c),ny(c)&&Uoe(c)},Voe=c=>{const g=DC(()=>{if(!c.removed&&c.getBody().contains(document.activeElement)){const $=c.selection.getRng();if($.collapsed){const et=yD(c,$,!1);c.selection.setRng(et)}}},0);c.on("focus",()=>{g.throttle()}),c.on("blur",()=>{g.cancel()})},Woe=c=>{c.on("init",()=>{c.on("focusin",g=>{const $=g.target;if(o0($)){const et=$_(c.getBody(),$),rt=nu(et)?et:$;c.selection.getNode()!==rt&&$I(c,rt).each(ut=>c.selection.setRng(ut))}})})},E4=nu,lz=(c,g)=>$_(c.getBody(),g),vN=c=>{const g=c.selection,$=c.dom,et=c.getBody(),rt=fP(c,et,$.isBlock,()=>vI(c)),ut="sel-"+$.uniqueId(),pt="data-mce-selected";let xt;const Et=jr=>ln(jr)&&$.hasClass(jr,"mce-offscreen-selection"),Ft=jr=>jr!==et&&(E4(jr)||o0(jr))&&$.isChildOf(jr,et)&&$.isEditable(jr.parentNode),Vt=jr=>{jr&&g.setRng(jr)},Kt=(jr,Ko,Fo,lr=!0)=>c.dispatch("ShowCaret",{target:Ko,direction:jr,before:Fo}).isDefaultPrevented()?null:(lr&&g.scrollIntoView(Ko,jr===-1),rt.show(Fo,Ko)),en=jr=>{jr.hasAttribute("data-mce-caret")&&(jC(jr),g.scrollIntoView(jr))},mn=()=>{c.on("click",Ko=>{$.isEditable(Ko.target)||(Ko.preventDefault(),c.focus())}),c.on("blur NewBlock",Io),c.on("ResizeWindow FullscreenStateChanged",rt.reposition),c.on("tap",Ko=>{const Fo=Ko.target,lr=lz(c,Fo);E4(lr)?(Ko.preventDefault(),$I(c,lr).each(wo)):Ft(Fo)&&$I(c,Fo).each(wo)},!0),c.on("mousedown",Ko=>{const Fo=Ko.target;if(Fo!==et&&Fo.nodeName!=="HTML"&&!$.isChildOf(Fo,et)||!EJ(c,Ko.clientX,Ko.clientY))return;Io(),br();const lr=lz(c,Fo);E4(lr)?(Ko.preventDefault(),$I(c,lr).each(wo)):nz(et,Ko.clientX,Ko.clientY).each(Hr=>{Ko.preventDefault();const bs=Kt(1,Hr.node,Hr.position===n3.Before,!1);Vt(bs),Hy(lr)?lr.focus():c.getBody().focus()})}),c.on("keypress",Ko=>{Gr.modifierPressed(Ko)||E4(g.getNode())&&Ko.preventDefault()}),c.on("GetSelectionRange",Ko=>{let Fo=Ko.range;if(xt){if(!xt.parentNode){xt=null;return}Fo=Fo.cloneRange(),Fo.selectNode(xt),Ko.range=Fo}}),c.on("SetSelectionRange",Ko=>{Ko.range=Pn(Ko.range);const Fo=wo(Ko.range,Ko.forward);Fo&&(Ko.range=Fo)});const jr=Ko=>Fr(Ko)&&Ko.id==="mcepastebin";c.on("AfterSetSelectionRange",Ko=>{const Fo=Ko.range,lr=Fo.startContainer.parentElement;!bn(Fo)&&!jr(lr)&&br(),Et(lr)||Io()}),az(c),Voe(c),Woe(c)},Sn=jr=>yv(jr)||Hl(jr)||C0(jr),bn=jr=>Sn(jr.startContainer)||Sn(jr.endContainer),Pn=jr=>{const Ko=c.schema.getVoidElements(),Fo=$.createRng(),lr=jr.startContainer,Hr=jr.startOffset,bs=jr.endContainer,Al=jr.endOffset;return es(Ko,lr.nodeName.toLowerCase())?Hr===0?Fo.setStartBefore(lr):Fo.setStartAfter(lr):Fo.setStart(lr,Hr),es(Ko,bs.nodeName.toLowerCase())?Al===0?Fo.setEndBefore(bs):Fo.setEndAfter(bs):Fo.setEnd(bs,Al),Fo},ao=(jr,Ko)=>{const Fo=eo.fromDom(c.getBody()),lr=c.getDoc(),Hr=ds(Fo,"#"+ut).getOrThunk(()=>{const Tl=eo.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',lr);return up(Tl,"id",ut),qp(Fo,Tl),Tl}),bs=$.createRng();x_(Hr),Hv(Hr,[eo.fromText(gm,lr),eo.fromDom(Ko),eo.fromText(gm,lr)]),bs.setStart(Hr.dom.firstChild,1),bs.setEnd(Hr.dom.lastChild,0),Js(Hr,{top:$.getPos(jr,c.getBody()).y+"px"}),JE(Hr);const Al=g.getSel();return Al&&(Al.removeAllRanges(),Al.addRange(bs)),bs},po=jr=>{const Ko=jr.cloneNode(!0),Fo=c.dispatch("ObjectSelected",{target:jr,targetClone:Ko});if(Fo.isDefaultPrevented())return null;const lr=ao(jr,Fo.targetClone),Hr=eo.fromDom(jr);return sn(_0(eo.fromDom(c.getBody()),`*[${pt}]`),bs=>{ba(Hr,bs)||ju(bs,pt)}),$.getAttrib(jr,pt)||jr.setAttribute(pt,"1"),xt=jr,br(),lr},wo=(jr,Ko)=>{if(!jr)return null;if(jr.collapsed){if(!bn(jr)){const bs=Ko?1:-1,Al=L2(bs,et,jr),Tl=Al.getNode(!Ko);if(ln(Tl)){if(_k(Tl))return Kt(bs,Tl,Ko?!Al.isAtEnd():!1,!1);if(Xv(Tl)&&nu(Tl.nextSibling)){const Au=$.createRng();return Au.setStart(Tl,0),Au.setEnd(Tl,0),Au}}const du=Al.getNode(Ko);if(ln(du)){if(_k(du))return Kt(bs,du,Ko?!1:!Al.isAtEnd(),!1);if(Xv(du)&&nu(du.previousSibling)){const Au=$.createRng();return Au.setStart(du,1),Au.setEnd(du,1),Au}}}return null}let Fo=jr.startContainer,lr=jr.startOffset;const Hr=jr.endOffset;if(pr(Fo)&&lr===0&&E4(Fo.parentNode)&&(Fo=Fo.parentNode,lr=$.nodeIndex(Fo),Fo=Fo.parentNode),!Fr(Fo))return null;if(Hr===lr+1&&Fo===jr.endContainer){const bs=Fo.childNodes[lr];if(Ft(bs))return po(bs)}return null},Io=()=>{xt&&xt.removeAttribute(pt),ds(eo.fromDom(c.getBody()),"#"+ut).each(_u),xt=null},sr=()=>{rt.destroy(),xt=null},br=()=>{rt.hide()};return Ow(c)||mn(),{showCaret:Kt,showBlockCaretContainer:en,hideFakeCaret:br,destroy:sr}},Oq=(c,g)=>{let $=g;for(let et=c.previousSibling;pr(et);et=et.previousSibling)$+=et.data.length;return $},cz=(c,g,$,et,rt)=>{if(pr($)&&(et<0||et>$.data.length))return[];const ut=rt&&pr($)?[Oq($,et)]:[et];let pt=$;for(;pt!==g&&pt.parentNode;)ut.push(c.nodeIndex(pt,rt)),pt=pt.parentNode;return pt===g?ut.reverse():[]},uz=(c,g,$,et,rt,ut,pt=!1)=>{const xt=cz(c,g,$,et,pt),Et=cz(c,g,rt,ut,pt);return{start:xt,end:Et}},Dq=(c,g)=>{const $=g.slice(),et=$.pop();return so(et)?Wn($,(ut,pt)=>ut.bind(xt=>Xt.from(xt.childNodes[pt])),Xt.some(c)).bind(ut=>pr(ut)&&(et<0||et>ut.data.length)?Xt.none():Xt.some({node:ut,offset:et})):Xt.none()},dz=(c,g)=>Dq(c,g.start).bind(({node:$,offset:et})=>Dq(c,g.end).map(({node:rt,offset:ut})=>{const pt=document.createRange();return pt.setStart($,et),pt.setEnd(rt,ut),pt})),qoe=(c,g,$,et=!1)=>uz(c,g,$.startContainer,$.startOffset,$.endContainer,$.endOffset,et),r3=(c,g,$)=>{if(g&&c.isEmpty(g)&&!$(g)){const et=g.parentNode;c.remove(g,pr(g.firstChild)&&py(g.firstChild.data)),r3(c,et,$)}},_N=(c,g,$,et=!0)=>{const rt=g.startContainer.parentNode,ut=g.endContainer.parentNode;g.deleteContents(),et&&!$(g.startContainer)&&(pr(g.startContainer)&&g.startContainer.data.length===0&&c.remove(g.startContainer),pr(g.endContainer)&&g.endContainer.data.length===0&&c.remove(g.endContainer),r3(c,rt,$),rt!==ut&&r3(c,ut,$))},s3=(c,g)=>Xt.from(c.dom.getParent(g.startContainer,c.dom.isBlock)),fz=(c,g,$)=>{const et=c.dynamicPatternsLookup({text:$,block:g});return{...c,blockPatterns:MM(et).concat(c.blockPatterns),inlinePatterns:hw(et).concat(c.inlinePatterns)}},hz=(c,g,$,et)=>{const rt=c.createRng();return rt.setStart(g,0),rt.setEnd($,et),rt.toString()},Nq=(c,g)=>c.create("span",{"data-mce-type":"bookmark",id:g}),xN=(c,g)=>{const $=c.createRng();return $.setStartAfter(g.start),$.setEndBefore(g.end),$},Lq=(c,g,$)=>{const et=dz(c.getRoot(),$).getOrDie("Unable to resolve path range"),rt=et.startContainer,ut=et.endContainer,pt=et.endOffset===0?ut:ut.splitText(et.endOffset),xt=et.startOffset===0?rt:rt.splitText(et.startOffset),Et=xt.parentNode,Ft=pt.parentNode;return{prefix:g,end:Ft.insertBefore(Nq(c,g+"-end"),pt),start:Et.insertBefore(Nq(c,g+"-start"),xt)}},Fq=(c,g,$)=>{r3(c,c.get(g.prefix+"-end"),$),r3(c,c.get(g.prefix+"-start"),$)},wN=c=>c.start.length===0,zq=c=>(g,$)=>{const rt=g.data.substring(0,$),ut=rt.lastIndexOf(c.charAt(c.length-1)),pt=rt.lastIndexOf(c);return pt!==-1?pt+c.length:ut!==-1?ut+1:-1},CN=(c,g,$,et)=>{const rt=g.start;return Y7(c,et.container,et.offset,zq(rt),$).bind(pt=>{var xt,Et;const Ft=(Et=(xt=$.textContent)===null||xt===void 0?void 0:xt.indexOf(rt))!==null&&Et!==void 0?Et:-1;if(Ft!==-1&&pt.offset>=Ft+rt.length){const Kt=c.createRng();return Kt.setStart(pt.container,pt.offset-rt.length),Kt.setEnd(pt.container,pt.offset),Xt.some(Kt)}else{const Kt=pt.offset-rt.length;return WI(pt.container,Kt,$).map(en=>{const mn=c.createRng();return mn.setStart(en.container,en.offset),mn.setEnd(pt.container,pt.offset),mn}).filter(en=>en.toString()===rt).orThunk(()=>CN(c,g,$,q_(pt.container,0)))}})},pz=(c,g,$,et,rt,ut=!1)=>{if(g.start.length===0&&!ut){const pt=c.createRng();return pt.setStart($,et),pt.setEnd($,et),Xt.some(pt)}return K7($,et,rt).bind(pt=>CN(c,g,rt,pt).bind(Et=>{var Ft;if(ut){if(Et.endContainer===pt.container&&Et.endOffset===pt.offset)return Xt.none();if(pt.offset===0&&((Ft=Et.endContainer.textContent)===null||Ft===void 0?void 0:Ft.length)===Et.endOffset)return Xt.none()}return Xt.some(Et)}))},Zoe=(c,g,$,et)=>{const rt=c.dom,ut=rt.getRoot(),pt=$.pattern,xt=$.position.container,Et=$.position.offset;return WI(xt,Et-$.pattern.end.length,g).bind(Ft=>{const Vt=uz(rt,ut,Ft.container,Ft.offset,xt,Et,et);if(wN(pt))return Xt.some({matches:[{pattern:pt,startRng:Vt,endRng:Vt}],position:Ft});{const Kt=i3(c,$.remainingPatterns,Ft.container,Ft.offset,g,et),en=Kt.getOr({matches:[],position:Ft}),mn=en.position;return pz(rt,pt,mn.container,mn.offset,g,Kt.isNone()).map(bn=>{const Pn=qoe(rt,ut,bn,et);return{matches:en.matches.concat([{pattern:pt,startRng:Pn,endRng:Vt}]),position:q_(bn.startContainer,bn.startOffset)}})}})},i3=(c,g,$,et,rt,ut)=>{const pt=c.dom;return K7($,et,pt.getRoot()).bind(xt=>{const Et=hz(pt,rt,$,et);for(let Ft=0;Ft<g.length;Ft++){const Vt=g[Ft];if(!Bl(Et,Vt.end))continue;const Kt=g.slice();Kt.splice(Ft,1);const en=Zoe(c,rt,{pattern:Vt,remainingPatterns:Kt,position:xt},ut);if(en.isNone()&&et>0)return i3(c,g,$,et-1,rt,ut);if(en.isSome())return en}return Xt.none()})},Bq=(c,g,$)=>{c.selection.setRng($),g.type==="inline-format"?sn(g.format,et=>{c.formatter.apply(et)}):c.execCommand(g.cmd,!1,g.value)},Koe=(c,g,$,et)=>{const rt=xN(c.dom,$);_N(c.dom,rt,et),Bq(c,g,rt)},$q=(c,g,$,et,rt)=>{const ut=c.dom,pt=xN(ut,et),xt=xN(ut,$);_N(ut,xt,rt),_N(ut,pt,rt);const Et={prefix:$.prefix,start:$.end,end:et.start},Ft=xN(ut,Et);Bq(c,g,Ft)},Yoe=(c,g)=>{const $=zC("mce_textpattern"),et=Eo(g,(rt,ut)=>{const pt=Lq(c,$+`_end${rt.length}`,ut.endRng);return rt.concat([{...ut,endMarker:pt}])},[]);return Eo(et,(rt,ut)=>{const pt=et.length-rt.length-1,xt=wN(ut.pattern)?ut.endMarker:Lq(c,$+`_start${pt}`,ut.startRng);return rt.concat([{...ut,startMarker:xt}])},[])},Xoe=c=>xr(c,(g,$)=>$.end.length-g.end.length),Joe=(c,g)=>{const $=Co(c,et=>Cn(g,rt=>et.pattern.start===rt.pattern.start&&et.pattern.end===rt.pattern.end));return c.length===g.length?$?c:g:c.length>g.length?c:g},Gq=(c,g,$,et,rt,ut)=>{const pt=i3(c,rt.inlinePatterns,$,et,g,ut).fold(()=>[],Et=>Et.matches),xt=i3(c,Xoe(rt.inlinePatterns),$,et,g,ut).fold(()=>[],Et=>Et.matches);return Joe(pt,xt)},jq=(c,g)=>{if(g.length===0)return;const $=c.dom,et=c.selection.getBookmark(),rt=Yoe($,g);sn(rt,ut=>{const pt=$.getParent(ut.startMarker.start,$.isBlock),xt=Et=>Et===pt;wN(ut.pattern)?Koe(c,ut.pattern,ut.endMarker,xt):$q(c,ut.pattern,ut.startMarker,ut.endMarker,xt),Fq($,ut.endMarker,xt),Fq($,ut.startMarker,xt)}),c.selection.moveToBookmark(et)},Hq=(c,g,$)=>Gee(g,0,g).map(et=>{const rt=et.container;return EV(rt,$.start.length,g).each(ut=>{const pt=c.createRng();pt.setStart(rt,0),pt.setEnd(ut.container,ut.offset),_N(c,pt,xt=>xt===g)}),rt}),Uq=c=>(g,$)=>{const et=g.dom,rt=$.pattern,ut=dz(et.getRoot(),$.range).getOrDie("Unable to resolve path range"),pt=(xt,Et)=>{const Ft=Et.get(xt);return qt(Ft)&&wr(Ft).exists(Vt=>es(Vt,"block"))};return s3(g,ut).each(xt=>{rt.type==="block-format"?pt(rt.format,g.formatter)&&g.undoManager.transact(()=>{c(g.dom,xt,rt),g.formatter.apply(rt.format)}):rt.type==="block-command"&&g.undoManager.transact(()=>{c(g.dom,xt,rt),g.execCommand(rt.cmd,!1,rt.value)})}),!0},Qoe=c=>xr(c,(g,$)=>$.start.length-g.start.length),gz=c=>(g,$)=>{const et=Qoe(g),rt=$.replace(gm," ");return Qn(et,ut=>c(ut,$,rt))},Vq=(c,g)=>($,et,rt,ut,pt)=>{var xt;pt===void 0&&(pt=(xt=et.textContent)!==null&&xt!==void 0?xt:"");const Et=$.dom,Ft=h0($);return Et.is(et,Ft)?c(rt.blockPatterns,pt).map(Vt=>g&&dr.trim(pt).length===Vt.start.length?[]:[{pattern:Vt,range:uz(Et,Et.getRoot(),et,0,et,0,ut)}]).getOr([]):[]},mz=c=>/^\s[^\s]/.test(c),ere=Uq((c,g,$)=>{Hq(c,g,$).each(et=>{const rt=eo.fromDom(et),ut=$C(rt);mz(ut)&&GC(rt,ut.slice(1))})}),tre=gz((c,g,$)=>g.indexOf(c.start)===0||$.indexOf(c.start)===0),nre=Vq(tre,!0),ore=(c,g)=>{const $=c.selection.getRng();return s3(c,$).map(et=>{var rt;const ut=Math.max(0,$.startOffset),pt=fz(g,et,(rt=et.textContent)!==null&&rt!==void 0?rt:""),xt=Gq(c,et,$.startContainer,ut,pt,!0),Et=nre(c,et,pt,!0);return{inlineMatches:xt,blockMatches:Et}}).filter(({inlineMatches:et,blockMatches:rt})=>rt.length>0||et.length>0)},rre=(c,g)=>{if(g.length===0)return;const $=c.selection.getBookmark();sn(g,et=>ere(c,et)),c.selection.moveToBookmark($)},kN=Uq(Hq),sre=gz((c,g,$)=>g===c.start||$===c.start),ire=Vq(sre,!1),are=(c,g)=>{const $=c.selection.getRng();return s3(c,$).map(et=>{const rt=Math.max(0,$.startOffset),ut=hz(c.dom,et,$.startContainer,rt),pt=fz(g,et,ut);return ire(c,et,pt,!1,ut)}).filter(et=>et.length>0)},lre=(c,g)=>{sn(g,$=>kN(c,$))},cre=(c,g)=>ore(c,g).fold(Dn,({inlineMatches:$,blockMatches:et})=>(c.undoManager.add(),c.undoManager.extra(()=>{c.execCommand("mceInsertNewLine")},()=>{fT(c),jq(c,$),rre(c,et);const rt=c.selection.getRng(),ut=K7(rt.startContainer,rt.startOffset,c.dom.getRoot());c.execCommand("mceInsertNewLine"),ut.each(pt=>{const xt=pt.container;xt.data.charAt(pt.offset-1)===yC&&(xt.deleteData(pt.offset-1,1),r3(c.dom,xt.parentNode,Et=>Et===c.dom.getRoot()))})}),!0)),ure=(c,g)=>{const $=c.selection.getRng();s3(c,$).map(et=>{const rt=Math.max(0,$.startOffset-1),ut=hz(c.dom,et,$.startContainer,rt),pt=fz(g,et,ut),xt=Gq(c,et,$.startContainer,rt,pt,!1);xt.length>0&&c.undoManager.transact(()=>{jq(c,xt)})})},dre=(c,g)=>are(c,g).fold(Dn,$=>(c.undoManager.transact(()=>{lre(c,$)}),!0)),Wq=(c,g,$)=>{for(let et=0;et<c.length;et++)if($(c[et],g))return!0;return!1},fre=(c,g)=>Wq(c,g,($,et)=>$===et.keyCode&&!Gr.modifierPressed(et)),qq=(c,g)=>Wq(c,g,($,et)=>$.charCodeAt(0)===et.charCode),hre=c=>{const g=[",",".",";",":","!","?"],$=[32],et=()=>d0(ZL(c).filter(pt=>pt.type==="inline-command"||pt.type==="block-command"?c.queryCommandSupported(pt.cmd):!0),KL(c)),rt=()=>nP(c);c.on("keydown",pt=>{if(pt.keyCode===13&&!Gr.modifierPressed(pt)&&c.selection.isCollapsed()&&c.selection.isEditable()){const xt=N_(et(),"enter");(xt.inlinePatterns.length>0||xt.blockPatterns.length>0||rt())&&cre(c,xt)&&pt.preventDefault()}},!0),c.on("keydown",pt=>{if(pt.keyCode===32&&c.selection.isCollapsed()&&c.selection.isEditable()){const xt=N_(et(),"space");(xt.blockPatterns.length>0||rt())&&dre(c,xt)&&pt.preventDefault()}},!0);const ut=()=>{if(c.selection.isCollapsed()&&c.selection.isEditable()){const pt=N_(et(),"space");(pt.inlinePatterns.length>0||rt())&&ure(c,pt)}};c.on("keyup",pt=>{fre($,pt)&&ut()}),c.on("keypress",pt=>{qq(g,pt)&&o1.setEditorTimeout(c,ut)})},Zq=c=>{hre(c)},pre=c=>{const g=dr.each,$=Gr.BACKSPACE,et=Gr.DELETE,rt=c.dom,ut=c.selection,pt=c.parser,xt=Xr.browser,Et=xt.isFirefox(),Ft=xt.isChromium()||xt.isSafari(),Vt=Xr.deviceType.isiPhone()||Xr.deviceType.isiPad(),Kt=Xr.os.isMacOS()||Xr.os.isiOS(),en=(zr,Ms)=>{try{c.getDoc().execCommand(zr,!1,String(Ms))}catch{}},mn=zr=>zr.isDefaultPrevented(),Sn=()=>{const zr=Ps=>{const Or=rt.create("body"),Il=Ps.cloneContents();return Or.appendChild(Il),ut.serializer.serialize(Or,{format:"html"})},Ms=Ps=>{const Or=zr(Ps),Il=rt.createRng();Il.selectNode(c.getBody());const Fl=zr(Il);return Or===Fl};c.on("keydown",Ps=>{const Or=Ps.keyCode;if(!mn(Ps)&&(Or===et||Or===$)&&c.selection.isEditable()){const Il=c.selection.isCollapsed(),Fl=c.getBody();if(Il&&!ym(c.schema,Fl)||!Il&&!Ms(c.selection.getRng()))return;Ps.preventDefault(),c.setContent(""),Fl.firstChild&&rt.isBlock(Fl.firstChild)?c.selection.setCursorLocation(Fl.firstChild,0):c.selection.setCursorLocation(Fl,0),c.nodeChanged()}})},bn=()=>{c.shortcuts.add("meta+a",null,"SelectAll")},Pn=()=>{c.inline||rt.bind(c.getDoc(),"mousedown mouseup",zr=>{let Ms;if(zr.target===c.getDoc().documentElement)if(Ms=ut.getRng(),c.getBody().focus(),zr.type==="mousedown"){if(yv(Ms.startContainer))return;ut.placeCaretAt(zr.clientX,zr.clientY)}else ut.setRng(Ms)})},ao=()=>{c.on("keydown",zr=>{if(!mn(zr)&&zr.keyCode===$){if(!c.getBody().getElementsByTagName("hr").length)return;if(ut.isCollapsed()&&ut.getRng().startOffset===0){const Ms=ut.getNode(),Ps=Ms.previousSibling;if(Ms.nodeName==="HR"){rt.remove(Ms),zr.preventDefault();return}Ps&&Ps.nodeName&&Ps.nodeName.toLowerCase()==="hr"&&(rt.remove(Ps),zr.preventDefault())}}})},po=()=>{Range.prototype.getClientRects||c.on("mousedown",zr=>{if(!mn(zr)&&zr.target.nodeName==="HTML"){const Ms=c.getBody();Ms.blur(),o1.setEditorTimeout(c,()=>{Ms.focus()})}})},wo=()=>{const zr=pR(c);c.on("click",Ms=>{const Ps=Ms.target;/^(IMG|HR)$/.test(Ps.nodeName)&&rt.isEditable(Ps)&&(Ms.preventDefault(),c.selection.select(Ps),c.nodeChanged()),Ps.nodeName==="A"&&rt.hasClass(Ps,zr)&&Ps.childNodes.length===0&&rt.isEditable(Ps.parentNode)&&(Ms.preventDefault(),ut.select(Ps))})},Io=()=>{const zr=()=>{const Ps=rt.getAttribs(ut.getStart().cloneNode(!1));return()=>{const Or=ut.getStart();Or!==c.getBody()&&(rt.setAttrib(Or,"style",null),g(Ps,Il=>{Or.setAttributeNode(Il.cloneNode(!0))}))}},Ms=()=>!ut.isCollapsed()&&rt.getParent(ut.getStart(),rt.isBlock)!==rt.getParent(ut.getEnd(),rt.isBlock);c.on("keypress",Ps=>{let Or;return!mn(Ps)&&(Ps.keyCode===8||Ps.keyCode===46)&&Ms()?(Or=zr(),c.getDoc().execCommand("delete",!1),Or(),Ps.preventDefault(),!1):!0}),rt.bind(c.getDoc(),"cut",Ps=>{if(!mn(Ps)&&Ms()){const Or=zr();o1.setEditorTimeout(c,()=>{Or()})}})},sr=()=>{c.on("keydown",zr=>{if(!mn(zr)&&zr.keyCode===$&&ut.isCollapsed()&&ut.getRng().startOffset===0){const Ms=ut.getNode().previousSibling;if(Ms&&Ms.nodeName&&Ms.nodeName.toLowerCase()==="table")return zr.preventDefault(),!1}return!0})},br=()=>{c.on("keydown",zr=>{if(mn(zr)||zr.keyCode!==Gr.BACKSPACE)return;let Ms=ut.getRng();const Ps=Ms.startContainer,Or=Ms.startOffset,Il=rt.getRoot();let Fl=Ps;if(!(!Ms.collapsed||Or!==0)){for(;Fl.parentNode&&Fl.parentNode.firstChild===Fl&&Fl.parentNode!==Il;)Fl=Fl.parentNode;Fl.nodeName==="BLOCKQUOTE"&&(c.formatter.toggle("blockquote",void 0,Fl),Ms=rt.createRng(),Ms.setStart(Ps,0),Ms.setEnd(Ps,0),ut.setRng(Ms))}})},jr=()=>{const zr=()=>{en("StyleWithCSS",!1),en("enableInlineTableEditing",!1),KC(c)||en("enableObjectResizing",!1)};UM(c)||c.on("BeforeExecCommand mousedown",zr)},Ko=()=>{const zr=()=>{g(rt.select("a:not([data-mce-block])"),Ms=>{var Ps;let Or=Ms.parentNode;const Il=rt.getRoot();if((Or==null?void 0:Or.lastChild)===Ms){for(;Or&&!rt.isBlock(Or);){if(((Ps=Or.parentNode)===null||Ps===void 0?void 0:Ps.lastChild)!==Or||Or===Il)return;Or=Or.parentNode}rt.add(Or,"br",{"data-mce-bogus":1})}})};c.on("SetContent ExecCommand",Ms=>{(Ms.type==="setcontent"||Ms.command==="mceInsertLink")&&zr()})},Fo=()=>{c.on("init",()=>{en("DefaultParagraphSeparator",h0(c))})},lr=zr=>{const Ms=zr.getBody(),Ps=zr.selection.getRng();return Ps.startContainer===Ps.endContainer&&Ps.startContainer===Ms&&Ps.startOffset===0&&Ps.endOffset===Ms.childNodes.length},Hr=()=>{c.on("keyup focusin mouseup",zr=>{!Gr.modifierPressed(zr)&&!lr(c)&&ut.normalize()},!0)},bs=()=>{c.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Al=()=>{c.inline||c.on("keydown",()=>{document.activeElement===document.body&&c.getWin().focus()})},Tl=()=>{c.inline||(c.contentStyles.push("body {min-height: 150px}"),c.on("click",zr=>{let Ms;zr.target.nodeName==="HTML"&&(Ms=c.selection.getRng(),c.getBody().focus(),c.selection.setRng(Ms),c.selection.normalize(),c.nodeChanged())}))},du=()=>{Kt&&c.on("keydown",zr=>{Gr.metaKeyPressed(zr)&&!zr.shiftKey&&(zr.keyCode===37||zr.keyCode===39)&&(zr.preventDefault(),c.selection.getSel().modify("move",zr.keyCode===37?"backward":"forward","lineboundary"))})},Au=()=>{c.on("click",zr=>{let Ms=zr.target;do if(Ms.tagName==="A"){zr.preventDefault();return}while(Ms=Ms.parentNode)}),c.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Wp=()=>{c.on("init",()=>{c.dom.bind(c.getBody(),"submit",zr=>{zr.preventDefault()})})},T0=()=>{pt.addNodeFilter("br",zr=>{let Ms=zr.length;for(;Ms--;)zr[Ms].attr("class")==="Apple-interchange-newline"&&zr[Ms].remove()})},Xp=hn,Tr=()=>{if(!Et||c.removed)return!1;const zr=c.selection.getSel();return!zr||!zr.rangeCount||zr.rangeCount===0},ps=()=>{Ft&&(Pn(),wo(),Wp(),bn(),Vt&&(Al(),Tl(),Au())),Et&&(po(),jr(),bs(),du())},ou=()=>{br(),Sn(),Xr.windowsPhone||Hr(),Ft&&(Pn(),wo(),Fo(),Wp(),sr(),T0(),Vt?(Al(),Tl(),Au()):bn()),Et&&(ao(),po(),Io(),jr(),Ko(),bs(),du(),sr())};return Ow(c)?ps():ou(),{refreshContentEditable:Xp,isHidden:Tr}},gre=c=>c.toLowerCase()==="gpl",Kq=c=>c.length>=64&&c.length<=255,T4=c=>gre(c)||Kq(c)?"VALID":"INVALID",mre=c=>{const g=XC(c);!Tt(sP(c))&&(fn(g)||T4(g)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},SN=Uu.DOM,yre=(c,g)=>{const $=eo.fromDom(c.getBody()),et=v_(xy($)),rt=eo.fromTag("style");up(rt,"type","text/css"),qp(rt,eo.fromText(g)),qp(et,rt),c.on("remove",()=>{_u(rt)})},bre=c=>c.inline?c.getElement().nodeName.toLowerCase():void 0,yz=c=>Zs(c,g=>fn(g)===!1),Yq=c=>{const g=c.options.get,$=c.editorUpload.blobCache;return yz({allow_conditional_comments:g("allow_conditional_comments"),allow_html_data_urls:g("allow_html_data_urls"),allow_svg_data_urls:g("allow_svg_data_urls"),allow_html_in_named_anchor:g("allow_html_in_named_anchor"),allow_script_urls:g("allow_script_urls"),allow_mathml_annotation_encodings:g("allow_mathml_annotation_encodings"),allow_unsafe_link_target:g("allow_unsafe_link_target"),convert_unsafe_embeds:g("convert_unsafe_embeds"),convert_fonts_to_spans:g("convert_fonts_to_spans"),fix_list_elements:g("fix_list_elements"),font_size_legacy_values:g("font_size_legacy_values"),forced_root_block:g("forced_root_block"),forced_root_block_attrs:g("forced_root_block_attrs"),preserve_cdata:g("preserve_cdata"),inline_styles:g("inline_styles"),root_name:bre(c),sandbox_iframes:g("sandbox_iframes"),sandbox_iframes_exclusions:_R(c),sanitize:g("xss_sanitization"),validate:!0,blob_cache:$,document:c.getDoc()})},bz=c=>{const g=c.options.get;return yz({custom_elements:g("custom_elements"),extended_valid_elements:g("extended_valid_elements"),invalid_elements:g("invalid_elements"),invalid_styles:g("invalid_styles"),schema:g("schema"),valid_children:g("valid_children"),valid_classes:g("valid_classes"),valid_elements:g("valid_elements"),valid_styles:g("valid_styles"),verify_html:g("verify_html"),padd_empty_block_inline_children:g("format_empty_lines")})},vre=c=>{const g=c.options.get;return{...Yq(c),...bz(c),...yz({remove_trailing_brs:g("remove_trailing_brs"),pad_empty_with_br:g("pad_empty_with_br"),url_converter:g("url_converter"),url_converter_scope:g("url_converter_scope"),element_format:g("element_format"),entities:g("entities"),entity_encoding:g("entity_encoding"),indent:g("indent"),indent_after:g("indent_after"),indent_before:g("indent_before")})}},Xq=c=>{const g=gA(Yq(c),c.schema);return g.addAttributeFilter("src,href,style,tabindex",($,et)=>{const rt=c.dom,ut="data-mce-"+et;let pt=$.length;for(;pt--;){const xt=$[pt];let Et=xt.attr(et);if(Et&&!xt.attr(ut)){if(Et.indexOf("data:")===0||Et.indexOf("blob:")===0)continue;et==="style"?(Et=rt.serializeStyle(rt.parseStyle(Et),xt.name),Et.length||(Et=null),xt.attr(ut,Et),xt.attr(et,Et)):et==="tabindex"?(xt.attr(ut,Et),xt.attr(et,null)):xt.attr(ut,c.convertURL(Et,et,xt.name))}}}),g.addNodeFilter("script",$=>{let et=$.length;for(;et--;){const rt=$[et],ut=rt.attr("type")||"no/type";ut.indexOf("mce-")!==0&&rt.attr("type","mce-"+ut)}}),DT(c)&&g.addNodeFilter("#cdata",$=>{var et;let rt=$.length;for(;rt--;){const ut=$[rt];ut.type=8,ut.name="#comment",ut.value="[CDATA["+c.dom.encode((et=ut.value)!==null&&et!==void 0?et:"")+"]]"}}),g.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",$=>{let et=$.length;const rt=c.schema.getNonEmptyElements();for(;et--;){const ut=$[et];ut.isEmpty(rt)&&ut.getAll("br").length===0&&ut.append(new Oy("br",1))}}),g},_re=c=>{const g=MT(c);g&&o1.setEditorTimeout(c,()=>{let $;g===!0?$=c:$=c.editorManager.get(g),$&&!$.destroyed&&($.focus(),$.selection.scrollIntoView())},100)},xre=c=>{const g=c.dom.getRoot();!c.inline&&(!KT(c)||c.selection.getStart(!0)===g)&&G0(g).each($=>{const et=$.getNode(),rt=fv(et)?G0(et).getOr($):$;c.selection.setRng(rt.toRange())})},wre=c=>{c.bindPendingEventDelegates(),c.initialized=!0,rI(c),c.focus(!0),xre(c),c.nodeChanged({initial:!0});const g=VL(c);Wt(g)&&g.call(c,c),_re(c)},vz=c=>c.inline?c.ui.styleSheetLoader:c.dom.styleSheetLoader,Cre=(c,g,$)=>{const{pass:et,fail:rt}=Ln(g,xt=>tinymce.Resource.has(GF(xt))),pt=[...et.map(xt=>{const Et=tinymce.Resource.get(GF(xt));return Tt(Et)?Promise.resolve(vz(c).loadRawCss(xt,Et)):Promise.resolve()}),vz(c).loadAll(rt)];return c.inline?pt:pt.concat([c.ui.styleSheetLoader.loadAll($)])},Jq=c=>{const g=vz(c),$=zL(c),et=c.contentCSS,rt=()=>{g.unloadAll(et),c.inline||c.ui.styleSheetLoader.unloadAll($)},ut=()=>{c.removed?rt():c.on("remove",rt)};if(c.contentStyles.length>0){let Et="";dr.each(c.contentStyles,Ft=>{Et+=Ft+`\r
`}),c.dom.addStyle(Et)}const pt=Promise.all(Cre(c,et,$)).then(ut).catch(ut),xt=Ty(c);return xt&&yre(c,xt),pt},kre=c=>{const g=c.getDoc(),$=c.getBody();BP(c),ZM(c)||(g.body.spellcheck=!1,SN.setAttrib($,"spellcheck","false")),c.quirks=pre(c),ZR(c);const et=BL(c);et!==void 0&&($.dir=et);const rt=gR(c);rt&&c.on("BeforeSetContent",ut=>{dr.each(rt,pt=>{ut.content=ut.content.replace(pt,xt=>"<!--mce:protected "+escape(xt)+"-->")})}),c.on("SetContent",()=>{c.addVisual(c.getBody())}),c.on("compositionstart compositionend",ut=>{c.composing=ut.type==="compositionstart"})},Sre=c=>{Ow(c)||c.load({initial:!0,format:"html"}),c.startContent=c.getContent({format:"raw"})},_z=c=>{c.removed!==!0&&(Sre(c),wre(c))},Qq=c=>{let g=!1;const $=setTimeout(()=>{g||c.setProgressState(!0)},500);return()=>{clearTimeout($),g=!0,c.setProgressState(!1)}},EN=c=>{const g=c.getElement();let $=c.getDoc();c.inline&&(SN.addClass(g,"mce-content-body"),c.contentDocument=$=document,c.contentWindow=window,c.bodyElement=g,c.contentAreaContainer=g);const et=c.getBody();et.disabled=!0,c.readonly=UM(c),c._editableRoot=HL(c),c.hasEditableRoot()&&(c.inline&&SN.getStyle(et,"position",!0)==="static"&&(et.style.position="relative"),et.contentEditable="true"),et.disabled=!1,c.editorUpload=BJ(c),c.schema=xu(bz(c)),c.dom=Uu($,{keep_values:!0,url_converter:c.convertURL,url_converter_scope:c,update_styles:!0,root_element:c.inline?c.getBody():null,collect:c.inline,schema:c.schema,contentCssCors:zM(c),referrerPolicy:CE(c),onSetAttrib:pt=>{c.dispatch("SetAttrib",pt)}}),c.parser=Xq(c),c.serializer=DF(vre(c),c),c.selection=RH(c.dom,c.getWin(),c.serializer,c),c.annotator=V1(c),c.formatter=YH(c),c.undoManager=qF(c),c._nodeChangeDispatcher=new kne(c),c._selectionOverrides=vN(c),oee(c),moe(c),lee(c),Ow(c)||(tz(c),Zq(c));const rt=Cne(c);tee(c,rt),ree(c),WJ(c),uq(c);const ut=yH(c);kre(c),mre(c),ut.fold(()=>{const pt=Qq(c);Jq(c).then(()=>{_z(c),pt()})},pt=>{c.setProgressState(!0),Jq(c).then(()=>{pt().then(xt=>{c.setProgressState(!1),_z(c),AH(c)},xt=>{c.notificationManager.open({type:"error",text:String(xt)}),_z(c),AH(c)})})})},eZ=xo,tZ=(c,g,$)=>Lt(c,g,eZ,$),xz=Uu.DOM,Ere=(c,g,$,et)=>{const rt=eo.fromTag("iframe");return et.each(ut=>up(rt,"tabindex",ut)),Pp(rt,$),Pp(rt,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:g}),Gy(rt,"tox-edit-area__iframe"),rt},Are=c=>{let g=f0(c)+"<html><head>";DM(c)!==c.documentBaseUrl&&(g+='<base href="'+c.documentBaseURI.getURI()+'" />'),g+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const $=pw(c),et=NM(c),rt=c.translate(IE(c));return sR(c)&&(g+='<meta http-equiv="Content-Security-Policy" content="'+sR(c)+'" />'),g+=`</head><body id="${$}" class="mce-content-body ${et}" data-id="${c.id}" aria-label="${rt}"><br></body></html>`,g},nZ=(c,g)=>{const $=Xr.browser.isFirefox()?IE(c):"Rich Text Area",et=c.translate($),rt=Ku(eo.fromDom(c.getElement()),"tabindex").bind(Ep),ut=Ere(c.id,et,LL(c),rt).dom;ut.onload=()=>{ut.onload=null,c.dispatch("load")},c.contentAreaContainer=g.iframeContainer,c.iframeElement=ut,c.iframeHTML=Are(c),xz.add(g.iframeContainer,ut)},oZ=c=>{const g=c.iframeElement,$=()=>{c.contentDocument=g.contentDocument,EN(c)};if(am(c)||Xr.browser.isFirefox()){const et=c.getDoc();et.open(),et.write(c.iframeHTML),et.close(),$()}else{const et=tZ(eo.fromDom(g),"load",()=>{et.unbind(),$()});g.srcdoc=c.iframeHTML}},Tre=(c,g)=>{nZ(c,g),g.editorContainer&&(g.editorContainer.style.display=c.orgDisplay,c.hidden=xz.isHidden(g.editorContainer)),c.getElement().style.display="none",xz.setAttrib(c.id,"aria-hidden","true"),c.getElement().style.visibility=c.orgVisibility,oZ(c)},rZ=Uu.DOM,wz=(c,g,$)=>{const et=DI.get($),rt=DI.urls[$]||c.documentBaseUrl.replace(/\/$/,"");if($=dr.trim($),et&&dr.inArray(g,$)===-1){if(c.plugins[$])return;try{const ut=et(c,rt)||{};c.plugins[$]=ut,Wt(ut.init)&&(ut.init(c,rt),g.push($))}catch(ut){$F(c,$,ut)}}},AN=c=>c.replace(/^\-/,""),TN=c=>{const g=[];sn(TE(c),$=>{wz(c,g,AN($))})},lC=c=>{const g=dr.trim(im(c)),$=c.ui.registry.getAll().icons,et={...PI.get("default").icons,...PI.get(g).icons};or(et,(rt,ut)=>{es($,ut)||c.ui.registry.addIcon(ut,rt)})},IN=c=>{const g=mw(c);if(Tt(g)){const $=Mx.get(g);c.theme=$(c,Mx.urls[g])||{},Wt(c.theme.init)&&c.theme.init(c,Mx.urls[g]||c.documentBaseUrl.replace(/\/$/,""))}else c.theme={}},a3=c=>{const g=TT(c),$=OI.get(g);c.model=$(c,OI.urls[g])},sZ=c=>{const g=c.theme.renderUI;return g?g():lZ(c)},Ire=c=>{const g=c.getElement(),et=mw(c)(c,g);return et.editorContainer.nodeType&&(et.editorContainer.id=et.editorContainer.id||c.id+"_parent"),et.iframeContainer&&et.iframeContainer.nodeType&&(et.iframeContainer.id=et.iframeContainer.id||c.id+"_iframecontainer"),et.height=et.iframeHeight?et.iframeHeight:g.offsetHeight,et},iZ=(c,g)=>({editorContainer:c,iframeContainer:g,api:{}}),aZ=c=>{const g=rZ.create("div");return rZ.insertAfter(g,c),iZ(g,g)},lZ=c=>{const g=c.getElement();return c.inline?iZ(null):aZ(g)},Cz=c=>{const g=c.getElement();return c.orgDisplay=g.style.display,Tt(mw(c))?sZ(c):Wt(mw(c))?Ire(c):lZ(c)},RN=(c,g)=>{const $={show:Xt.from(g.show).getOr(hn),hide:Xt.from(g.hide).getOr(hn),isEnabled:Xt.from(g.isEnabled).getOr(xo),setEnabled:et=>{et&&c.mode.get()==="readonly"||Xt.from(g.setEnabled).each(ut=>ut(et))}};c.ui={...c.ui,...$}},$S=async c=>{c.dispatch("ScriptsLoaded"),lC(c),IN(c),a3(c),TN(c);const g=await Cz(c);RN(c,Xt.from(g.api).getOr({})),c.editorContainer=g.editorContainer,LJ(c),c.inline?EN(c):Tre(c,{editorContainer:g.editorContainer,iframeContainer:g.iframeContainer})},i_=Uu.DOM,kz=c=>c.charAt(0)==="-",Rre=(c,g)=>{const $=ET(g),et=kE(g);if(!$1.hasCode($)&&$!=="en"){const rt=Cs(et)?et:`${g.editorManager.baseURL}/langs/${$}.js`;c.add(rt).catch(()=>{PJ(g,rt,$)})}},Mre=(c,g)=>{const $=mw(c);if(Tt($)&&!kz($)&&!es(Mx.urls,$)){const et=$M(c),rt=et?c.documentBaseURI.toAbsolute(et):`themes/${$}/theme${g}.js`;Mx.load($,rt).catch(()=>{Bie(c,rt,$)})}},Pre=(c,g)=>{const $=TT(c);if($!=="plugin"&&!es(OI.urls,$)){const et=dR(c),rt=Tt(et)?c.documentBaseURI.toAbsolute(et):`models/${$}/model${g}.js`;OI.load($,rt).catch(()=>{Px(c,rt,$)})}},Ore=c=>Xt.from(ST(c)).filter(Cs).map(g=>({url:g,name:Xt.none()})),cZ=(c,g,$)=>Xt.from(g).filter(et=>Cs(et)&&!PI.has(et)).map(et=>({url:`${c.editorManager.baseURL}/icons/${et}/icons${$}.js`,name:Xt.some(et)})),Dre=(c,g,$)=>{const et=cZ(g,"default",$),rt=Ore(g).orThunk(()=>cZ(g,im(g),""));sn(Z0([et,rt]),ut=>{c.add(ut.url).catch(()=>{MJ(g,ut.url,ut.name.getOrUndefined())})})},uZ=(c,g)=>{const $=(et,rt)=>{DI.load(et,rt).catch(()=>{RJ(c,rt,et)})};or(WM(c),(et,rt)=>{$(rt,et),c.options.set("plugins",TE(c).concat(rt))}),sn(TE(c),et=>{et=dr.trim(et),et&&!DI.urls[et]&&!kz(et)&&$(et,`plugins/${et}/plugin${g}.js`)})},Nre=c=>{const g=mw(c);return!Tt(g)||ln(Mx.get(g))},Lre=c=>{const g=TT(c);return ln(OI.get(g))},Fre=(c,g)=>{const $=R_.ScriptLoader,et=()=>{!c.removed&&Nre(c)&&Lre(c)&&$S(c)};Mre(c,g),Pre(c,g),Rre($,c),Dre($,c,g),uZ(c,g),$.loadQueue().then(et,et)},fae=(c,g)=>ip.forElement(c,{contentCssCors:VM(g),referrerPolicy:CE(g)}),zre=c=>{const g=c.id;$1.setCode(ET(c));const $=()=>{i_.unbind(window,"ready",$),c.render()};if(!g2.Event.domLoaded){i_.bind(window,"ready",$);return}if(!c.getElement())return;const et=eo.fromDom(c.getElement()),rt=p_(et);c.on("remove",()=>{kn(et.dom.attributes,pt=>ju(et,pt.name)),Pp(et,rt)}),c.ui.styleSheetLoader=fae(et,c),O2(c)?c.inline=!0:(c.orgVisibility=c.getElement().style.visibility,c.getElement().style.visibility="hidden");const ut=c.getElement().form||i_.getParent(g,"form");ut&&(c.formElement=ut,AE(c)&&!hp(c.getElement())&&(i_.insertAfter(i_.create("input",{type:"hidden",name:g}),g),c.hasHiddenInput=!0),c.formEventDelegate=pt=>{c.dispatch(pt.type,pt)},i_.bind(ut,"submit reset",c.formEventDelegate),c.on("reset",()=>{c.resetContent()}),$L(c)&&!ut.submit.nodeType&&!ut.submit.length&&!ut._mceOldSubmit&&(ut._mceOldSubmit=ut.submit,ut.submit=()=>(c.editorManager.triggerSave(),c.setDirty(!1),ut._mceOldSubmit(ut)))),c.windowManager=BF(c),c.notificationManager=GH(c),NT(c)&&c.on("GetContent",pt=>{pt.save&&(pt.content=i_.encode(pt.content))}),fR(c)&&c.on("submit",()=>{c.initialized&&c.save()}),GL(c)&&(c._beforeUnload=()=>{c.initialized&&!c.destroyed&&!c.isHidden()&&c.save({format:"raw",no_events:!0,set_dirty:!1})},c.editorManager.on("BeforeUnload",c._beforeUnload)),c.editorManager.add(c),Fre(c,c.suffix)},Sz=(c,g)=>{c._editableRoot!==g&&(c._editableRoot=g,c.getBody().contentEditable=String(c.hasEditableRoot()),c.nodeChanged(),zu(c,g))},Bre=c=>c._editableRoot,$re=(c,g)=>({sections:cn(c),options:cn(g)}),Ez=dn().deviceType,dZ=Ez.isPhone(),fZ=Ez.isTablet(),I4=c=>{if(Mn(c))return[];{const g=qt(c)?c:c.split(/[ ,]/),$=Nn(g,pu);return Bn($,Cs)}},Az=(c,g)=>{const $=Su(g,(et,rt)=>yn(c,rt));return $re($.t,$.f)},Gre=(c,g,$={})=>{const et=c.sections(),rt=$a(et,g).getOr({});return dr.extend({},$,rt)},Tz=(c,g)=>es(c.sections(),g),jre=(c,g)=>Tz(c,g)?c.sections()[g]:{},Hre=(c,g)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:$a(c,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...g?{menubar:!1}:{}}),hZ=(c,g)=>{var $;const et=($=g.external_plugins)!==null&&$!==void 0?$:{};return c&&c.external_plugins?dr.extend({},c.external_plugins,et):et},Iz=(c,g)=>[...I4(c),...I4(g)],pZ=(c,g,$,et)=>c&&Tz(g,"mobile")?et:$,Rz=(c,g,$,et)=>{const rt=I4($.forced_plugins),ut=I4(et.plugins),pt=jre(g,"mobile"),xt=pt.plugins?I4(pt.plugins):ut,Et=pZ(c,g,ut,xt),Ft=Iz(rt,Et);return dr.extend(et,{forced_plugins:rt,plugins:Ft})},Ure=(c,g)=>c&&Tz(g,"mobile"),hae=(c,g,$,et,rt)=>{var ut;const pt=c?{mobile:Hre((ut=rt.mobile)!==null&&ut!==void 0?ut:{},g)}:{},xt=Az(["mobile"],LS(pt,rt)),Et=dr.extend($,et,xt.options(),Ure(c,xt)?Gre(xt,"mobile"):{},{external_plugins:hZ(et,xt.options())});return Rz(c,xt,et,Et)},pae=(c,g)=>{const $=s9(g);return hae(dZ||fZ,dZ,$,c,$)},Vre=(c,g)=>qX(c,g),gZ=c=>{const g=(et,rt)=>{c.formatter.toggle(et,rt),c.nodeChanged()},$=et=>()=>{sn("left,center,right,justify".split(","),rt=>{et!==rt&&c.formatter.remove("align"+rt)}),et!=="none"&&g("align"+et)};c.editorCommands.addCommands({JustifyLeft:$("left"),JustifyCenter:$("center"),JustifyRight:$("right"),JustifyFull:$("justify"),JustifyNone:$("none")})},Wre=c=>{const g=$=>()=>{const et=c.selection,rt=et.isCollapsed()?[c.dom.getParent(et.getNode(),c.dom.isBlock)]:et.getSelectedBlocks();return Cn(rt,ut=>ln(c.formatter.matchNode(ut,$)))};c.editorCommands.addCommands({JustifyLeft:g("alignleft"),JustifyCenter:g("aligncenter"),JustifyRight:g("alignright"),JustifyFull:g("alignjustify")},"state")},qre=c=>{gZ(c),Wre(c)},Zre=c=>{c.editorCommands.addCommands({"Cut,Copy,Paste":g=>{const $=c.getDoc();let et;try{$.execCommand(g)}catch{et=!0}if(g==="paste"&&!$.queryCommandEnabled(g)&&(et=!0),et||!$.queryCommandSupported(g)){let rt=c.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Xr.os.isMacOS()||Xr.os.isiOS())&&(rt=rt.replace(/Ctrl\+/g,"+")),c.notificationManager.open({text:rt,type:"error"})}}})},gae=(c,g,$,et)=>{const rt=eo.fromDom(c.getRoot());return i5(rt,Uo.fromRangeStart(g),et)?$=$.replace(/^ /,"&nbsp;"):$=$.replace(/^&nbsp;/," "),a5(rt,Uo.fromRangeEnd(g),et)?$=$.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):$=$.replace(/&nbsp;(<br( \/)?>)?$/," "),$},mae=c=>{if(typeof c!="string"){const g=dr.extend({paste:c.paste,data:{paste:c.paste}},c);return{content:c.content,details:g}}return{content:c,details:{}}},mZ=(c,g)=>{const $=c.selection,et=c.dom;return/^ | $/.test(g)?gae(et,$.getRng(),g,c.schema):g},R4=(c,g)=>{if(c.selection.isEditable()){const{content:$,details:et}=mae(g);ZO(c,{...et,content:mZ(c,$),format:"html",set:!1,selection:!0}).each(rt=>{const ut=EH(c,rt.content,et);KO(c,ut,rt),c.addVisual()})}},Kre=c=>{c.editorCommands.addCommands({mceCleanup:()=>{const g=c.selection.getBookmark();c.setContent(c.getContent()),c.selection.moveToBookmark(g)},insertImage:(g,$,et)=>{R4(c,c.dom.createHTML("img",{src:et}))},insertHorizontalRule:()=>{c.execCommand("mceInsertContent",!1,"<hr>")},insertText:(g,$,et)=>{R4(c,c.dom.encode(et))},insertHTML:(g,$,et)=>{R4(c,et)},mceInsertContent:(g,$,et)=>{R4(c,et)},mceSetContent:(g,$,et)=>{c.setContent(et)},mceReplaceContent:(g,$,et)=>{c.execCommand("mceInsertContent",!1,et.replace(/\{\$selection\}/g,c.selection.getContent({format:"text"})))},mceNewDocument:()=>{c.setContent(YM(c))}})},Yre={"font-size":"size","font-family":"face"},Xre=dm("font"),yae=(c,g,$)=>{const et=ut=>jv(ut,c).orThunk(()=>Xre(ut)?$a(Yre,c).bind(pt=>Ku(ut,pt)):Xt.none()),rt=ut=>ba(eo.fromDom(g),ut);return v5(eo.fromDom($),ut=>et(ut),rt)},bae=c=>c.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),vae=(c,g)=>Xt.from(Uu.DOM.getStyle(g,c,!0)),yZ=c=>(g,$)=>Xt.from($).map(eo.fromDom).filter(_i).bind(et=>yae(c,g,et.dom).or(vae(c,et.dom))).getOr(""),_ae=yZ("font-size"),Jre=Mt(bae,yZ("font-family")),LA=c=>G0(c.getBody()).bind(g=>{const $=g.container();return Xt.from(pr($)?$.parentNode:$)}),Mz=c=>Xt.from(c.selection.getRng()).bind(g=>{const $=c.getBody();return g.startContainer===$&&g.startOffset===0?Xt.none():Xt.from(c.selection.getStart(!0))}),MN=(c,g)=>Mz(c).orThunk(Tn(LA,c)).map(eo.fromDom).filter(_i).bind(g),PN=(c,g)=>MN(c,Hn(Xt.some,g)),Pz=(c,g)=>{if(/^[0-9.]+$/.test(g)){const $=parseInt(g,10);if($>=1&&$<=7){const et=YC(c),rt=bw(c);return rt.length>0?rt[$-1]||g:et[$-1]||g}else return g}else return g},bZ=c=>{const g=c.split(/\s*,\s*/);return Nn(g,$=>$.indexOf(" ")!==-1&&!(As($,'"')||As($,"'"))?`'${$}'`:$).join(",")},Qre=(c,g)=>{const $=Pz(c,g);c.formatter.toggle("fontname",{value:bZ($)}),c.nodeChanged()},ese=c=>PN(c,g=>Jre(c.getBody(),g.dom)).getOr(""),tse=(c,g)=>{c.formatter.toggle("fontsize",{value:Pz(c,g)}),c.nodeChanged()},nse=c=>PN(c,g=>_ae(c.getBody(),g.dom)).getOr(""),ose=c=>PN(c,g=>{const $=eo.fromDom(c.getBody()),et=v5(g,ut=>jv(ut,"line-height"),Tn(ba,$)),rt=()=>{const ut=parseFloat(wp(g,"line-height")),pt=parseFloat(wp(g,"font-size"));return String(ut/pt)};return et.getOrThunk(rt)}).getOr(""),rse=(c,g)=>{c.formatter.toggle("lineheight",{value:String(g)}),c.nodeChanged()},GS=c=>{const g=($,et)=>{c.formatter.toggle($,et),c.nodeChanged()};c.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":$=>{g($)},"ForeColor,HiliteColor":($,et,rt)=>{g($,{value:rt})},BackColor:($,et,rt)=>{g("hilitecolor",{value:rt})},FontName:($,et,rt)=>{Qre(c,rt)},FontSize:($,et,rt)=>{tse(c,rt)},LineHeight:($,et,rt)=>{rse(c,rt)},Lang:($,et,rt)=>{var ut;g($,{value:rt.code,customValue:(ut=rt.customCode)!==null&&ut!==void 0?ut:null})},RemoveFormat:$=>{c.formatter.remove($)},mceBlockQuote:()=>{g("blockquote")},FormatBlock:($,et,rt)=>{g(Tt(rt)?rt:"p")},mceToggleFormat:($,et,rt)=>{g(rt)}})},sse=c=>{const g=$=>c.formatter.match($);c.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":$=>g($),mceBlockQuote:()=>g("blockquote")},"state"),c.editorCommands.addQueryValueHandler("FontName",()=>ese(c)),c.editorCommands.addQueryValueHandler("FontSize",()=>nse(c)),c.editorCommands.addQueryValueHandler("LineHeight",()=>ose(c))},vZ=c=>{GS(c),sse(c)},ise=c=>{c.editorCommands.addCommands({mceAddUndoLevel:()=>{c.undoManager.add()},mceEndUndoLevel:()=>{c.undoManager.add()},Undo:()=>{c.undoManager.undo()},Redo:()=>{c.undoManager.redo()}})},ON=c=>{c.editorCommands.addCommands({Indent:()=>{n_(c)},Outdent:()=>{NS(c)}}),c.editorCommands.addCommands({Outdent:()=>RD(c)},"state")},ase=c=>{const g=($,et,rt)=>{if(c.mode.isReadOnly())return;const ut=Tt(rt)?{href:rt}:rt,pt=c.dom.getParent(c.selection.getNode(),"a");Gt(ut)&&Tt(ut.href)&&(ut.href=ut.href.replace(/ /g,"%20"),(!pt||!ut.href)&&c.formatter.remove("link"),ut.href&&c.formatter.apply("link",ut,pt))};c.editorCommands.addCommands({unlink:()=>{if(c.selection.isEditable()){if(c.selection.isCollapsed()){const $=c.dom.getParent(c.selection.getStart(),"a");$&&c.dom.remove($,!0);return}c.formatter.remove("link")}},mceInsertLink:g,createLink:g})},lse=(c,g,$,et)=>{const rt=c.dom,ut=xt=>rt.isBlock(xt)&&xt.parentElement===$,pt=ut(g)?g:rt.getParent(et,ut,$);return Xt.from(pt).map(eo.fromDom)},_Z=(c,g)=>{if(c.mode.isReadOnly())return;const $=c.dom,et=c.selection.getRng(),rt=g?c.selection.getStart():c.selection.getEnd(),ut=g?et.startContainer:et.endContainer,pt=y4($,ut);if(!pt||!pt.isContentEditable)return;const xt=g?Iu:fy,Et=h0(c);lse(c,rt,pt,ut).each(Ft=>{const Vt=v9(c,ut,Ft.dom,pt,!1,Et);xt(Ft,eo.fromDom(Vt)),c.selection.setCursorLocation(Vt,0),c.dispatch("NewBlock",{newBlock:Vt}),d1(c,"insertParagraph")})},xZ=c=>_Z(c,!0),cse=c=>_Z(c,!1),use=c=>{c.editorCommands.addCommands({InsertNewBlockBefore:()=>{xZ(c)},InsertNewBlockAfter:()=>{cse(c)}})},dse=c=>{c.editorCommands.addCommands({insertParagraph:()=>{rN(one,c)},mceInsertNewLine:(g,$,et)=>{w4(c,et)},InsertLineBreak:(g,$,et)=>{rN(gW,c)}})},fse=c=>{c.editorCommands.addCommands({mceSelectNodeDepth:(g,$,et)=>{let rt=0;c.dom.getParent(c.selection.getNode(),ut=>Fr(ut)&&rt++===et?(c.selection.select(ut),!1):!0,c.getBody())},mceSelectNode:(g,$,et)=>{c.selection.select(et)},selectAll:()=>{const g=c.dom.getParent(c.selection.getStart(),Qo);if(g){const $=c.dom.createRng();$.selectNodeContents(g),c.selection.setRng($)}}})},Oz=c=>{c.editorCommands.addCommands({mceRemoveNode:(g,$,et)=>{const rt=et??c.selection.getNode();if(rt!==c.getBody()){const ut=c.selection.getBookmark();c.dom.remove(rt,!0),c.selection.moveToBookmark(ut)}},mcePrint:()=>{c.getWin().print()},mceFocus:(g,$,et)=>{DB(c,et===!0)},mceToggleVisualAid:()=>{c.hasVisual=!c.hasVisual,c.addVisual()}})},hse=c=>{qre(c),Zre(c),ise(c),fse(c),Kre(c),ase(c),ON(c),use(c),dse(c),vZ(c),Oz(c)},pse=["toggleview"],Mm=c=>yn(pse,c.toLowerCase());class wZ{constructor(g){this.commands={state:{},exec:{},value:{}},this.editor=g}execCommand(g,$=!1,et,rt){const ut=this.editor,pt=g.toLowerCase(),xt=rt==null?void 0:rt.skip_focus;if(ut.removed||(pt!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(pt)&&!xt?ut.focus():KP(ut)),ut.dispatch("BeforeExecCommand",{command:g,ui:$,value:et}).isDefaultPrevented()))return!1;const Ft=this.commands.exec[pt];return Wt(Ft)?(Ft(pt,$,et),ut.dispatch("ExecCommand",{command:g,ui:$,value:et}),!0):!1}queryCommandState(g){if(!Mm(g)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const $=g.toLowerCase(),et=this.commands.state[$];return Wt(et)?et($):!1}queryCommandValue(g){if(!Mm(g)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const $=g.toLowerCase(),et=this.commands.value[$];return Wt(et)?et($):""}addCommands(g,$="exec"){const et=this.commands;or(g,(rt,ut)=>{sn(ut.toLowerCase().split(","),pt=>{et[$][pt]=rt})})}addCommand(g,$,et){const rt=g.toLowerCase();this.commands.exec[rt]=(ut,pt,xt)=>$.call(et??this.editor,pt,xt)}queryCommandSupported(g){const $=g.toLowerCase();return!!this.commands.exec[$]}addQueryStateHandler(g,$,et){this.commands.state[g.toLowerCase()]=()=>$.call(et??this.editor)}addQueryValueHandler(g,$,et){this.commands.value[g.toLowerCase()]=()=>$.call(et??this.editor)}}const gse=(c,g,$)=>{Q_(c,g)&&!$?S1(c,g):$&&Gy(c,g)},M4=(c,g,$)=>{try{c.getDoc().execCommand(g,!1,String($))}catch{}},Dz=(c,g)=>{c.dom.contentEditable="true"},Nz=c=>{Xt.from(c.selection.getNode()).each(g=>{g.removeAttribute("data-mce-selected")})},mse=c=>{c.selection.setRng(c.selection.getRng())},yse=(c,g)=>{M4(c,"StyleWithCSS",g),M4(c,"enableInlineTableEditing",g),M4(c,"enableObjectResizing",g)},bse=c=>{c.readonly=!0,c.selection.controlSelection.hideResizeRect(),c._selectionOverrides.hideFakeCaret(),Nz(c)},vse=(c,g)=>{c.readonly=!1,c.hasEditableRoot()&&Dz(g),yse(c,!1),OB(c)&&c.focus(),mse(c),c.nodeChanged()},_se=(c,g)=>{const $=eo.fromDom(c.getBody());gse($,"mce-content-readonly",g),g?(bse(c),c.hasEditableRoot()&&Dz($)):vse(c,$)},l3=c=>c.readonly,xse=c=>c.type==="click",wse=["copy"],c3=c=>yn(wse,c.type),Fx=(c,g)=>uv(g,"a",et=>ba(et,eo.fromDom(c.getBody()))).bind(et=>Ku(et,"href")),Cse=(c,g)=>{if(xse(g)&&!Gr.metaKeyPressed(g)){const $=eo.fromDom(g.target);Fx(c,$).each(et=>{if(g.preventDefault(),/^#/.test(et)){const rt=c.dom.select(`${et},[name="${Wr(et,"#")}"]`);rt.length&&c.selection.scrollIntoView(rt[0],!0)}else window.open(et,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else c3(g)&&c.dispatch(g.type,g)},kse=c=>{c.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",g=>{l3(c)&&g.preventDefault()}),c.on("BeforeExecCommand",g=>{(g.command==="Undo"||g.command==="Redo")&&l3(c)&&g.preventDefault()}),c.on("input",g=>{if(!g.isComposing&&l3(c)){const $=c.undoManager.add();ln($)&&c.undoManager.undo()}}),c.on("compositionend",()=>{if(l3(c)){const g=c.undoManager.add();ln(g)&&c.undoManager.undo()}})},Sse=dr.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Lz{static isNative(g){return!!Sse[g.toLowerCase()]}constructor(g){this.bindings={},this.settings=g||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Dn}fire(g,$){return this.dispatch(g,$)}dispatch(g,$){const et=g.toLowerCase(),rt=h2(et,$??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(rt);const ut=this.bindings[et];if(ut)for(let pt=0,xt=ut.length;pt<xt;pt++){const Et=ut[pt];if(!Et.removed){if(Et.once&&this.off(et,Et.func),rt.isImmediatePropagationStopped())return rt;if(Et.func.call(this.scope,rt)===!1)return rt.preventDefault(),rt}}return rt}on(g,$,et,rt){if($===!1&&($=Dn),$){const ut={func:$,removed:!1};rt&&dr.extend(ut,rt);const pt=g.toLowerCase().split(" ");let xt=pt.length;for(;xt--;){const Et=pt[xt];let Ft=this.bindings[Et];Ft||(Ft=[],this.toggleEvent(Et,!0)),et?Ft=[ut,...Ft]:Ft=[...Ft,ut],this.bindings[Et]=Ft}}return this}off(g,$){if(g){const et=g.toLowerCase().split(" ");let rt=et.length;for(;rt--;){const ut=et[rt];let pt=this.bindings[ut];if(!ut)return or(this.bindings,(xt,Et)=>{this.toggleEvent(Et,!1),delete this.bindings[Et]}),this;if(pt){if(!$)pt.length=0;else{const xt=Ln(pt,Et=>Et.func===$);pt=xt.fail,this.bindings[ut]=pt,sn(xt.pass,Et=>{Et.removed=!0})}pt.length||(this.toggleEvent(g,!1),delete this.bindings[ut])}}}else or(this.bindings,(et,rt)=>{this.toggleEvent(rt,!1)}),this.bindings={};return this}once(g,$,et){return this.on(g,$,et,{once:!0})}has(g){g=g.toLowerCase();const $=this.bindings[g];return!(!$||$.length===0)}}const P4=c=>(c._eventDispatcher||(c._eventDispatcher=new Lz({scope:c,toggleEvent:(g,$)=>{Lz.isNative(g)&&c.toggleNativeEvent&&c.toggleNativeEvent(g,$)}})),c._eventDispatcher),Fz={fire(c,g,$){return this.dispatch(c,g,$)},dispatch(c,g,$){const et=this;if(et.removed&&c!=="remove"&&c!=="detach")return h2(c.toLowerCase(),g??{},et);const rt=P4(et).dispatch(c,g);if($!==!1&&et.parent){let ut=et.parent();for(;ut&&!rt.isPropagationStopped();)ut.dispatch(c,rt,!1),ut=ut.parent?ut.parent():void 0}return rt},on(c,g,$){return P4(this).on(c,g,$)},off(c,g){return P4(this).off(c,g)},once(c,g){return P4(this).once(c,g)},hasEventListeners(c){return P4(this).has(c)}},DN=Uu.DOM;let FA;const NN=(c,g)=>{if(g==="selectionchange")return c.getDoc();if(!c.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(g))return c.getDoc().documentElement;const $=B0(c);return $?(c.eventRoot||(c.eventRoot=DN.select($)[0]),c.eventRoot):c.getBody()},xae=c=>!c.hidden,CZ=(c,g,$)=>{xae(c)?c.dispatch(g,$):l3(c)&&Cse(c,$)},kZ=(c,g)=>{if(c.delegates||(c.delegates={}),c.delegates[g]||c.removed)return;const $=NN(c,g);if(B0(c)){if(FA||(FA={},c.editorManager.on("removeEditor",()=>{c.editorManager.activeEditor||FA&&(or(FA,(rt,ut)=>{c.dom.unbind(NN(c,ut))}),FA=null)})),FA[g])return;const et=rt=>{const ut=rt.target,pt=c.editorManager.get();let xt=pt.length;for(;xt--;){const Et=pt[xt].getBody();(Et===ut||DN.isChildOf(ut,Et))&&CZ(pt[xt],g,rt)}};FA[g]=et,DN.bind($,g,et)}else{const et=rt=>{CZ(c,g,rt)};DN.bind($,g,et),c.delegates[g]=et}},SZ={...Fz,bindPendingEventDelegates(){const c=this;dr.each(c._pendingNativeEvents,g=>{kZ(c,g)})},toggleNativeEvent(c,g){const $=this;c==="focus"||c==="blur"||$.removed||(g?$.initialized?kZ($,c):$._pendingNativeEvents?$._pendingNativeEvents.push(c):$._pendingNativeEvents=[c]:$.initialized&&$.delegates&&($.dom.unbind(NN($,c),c,$.delegates[c]),delete $.delegates[c]))},unbindAllNativeEvents(){const c=this,g=c.getBody(),$=c.dom;c.delegates&&(or(c.delegates,(et,rt)=>{c.dom.unbind(NN(c,rt),rt,et)}),delete c.delegates),!c.inline&&g&&$&&(g.onload=null,$.unbind(c.getWin()),$.unbind(c.getDoc())),$&&($.unbind(g),$.unbind(c.getContainer()))}},Ese=c=>Tt(c)?{value:c.split(/[ ,]/),valid:!0}:pn(c,Tt)?{value:c,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Ase=c=>{const g=(()=>{switch(c){case"array":return qt;case"boolean":return Qt;case"function":return Wt;case"number":return so;case"object":return Gt;case"string":return Tt;case"string[]":return Ese;case"object[]":return $=>pn($,Gt);case"regexp":return $=>Pt($,RegExp);default:return xo}})();return $=>zz($,g,`The value must be a ${c}.`)},Tse=c=>Tt(c.processor),EZ=(c,g)=>{const $=Rl(g.message)?"":`. ${g.message}`;return c+$},AZ=c=>c.valid,zz=(c,g,$="")=>{const et=g(c);return Qt(et)?et?{value:c,valid:!0}:{valid:!1,message:$}:et},Ise=(c,g,$)=>{if(!fn(g)){const et=zz(g,$);if(AZ(et))return et.value;console.error(EZ(`Invalid default value passed for the "${c}" option`,et))}},Rse=(c,g,$=g)=>{const et={},rt={},ut=(mn,Sn,bn)=>{const Pn=zz(Sn,bn);return AZ(Pn)?(rt[mn]=Pn.value,!0):(console.warn(EZ(`Invalid value passed for the ${mn} option`,Pn)),!1)},pt=(mn,Sn)=>{const bn=Tse(Sn)?Ase(Sn.processor):Sn.processor,Pn=Ise(mn,Sn.default,bn);et[mn]={...Sn,default:Pn,processor:bn},$a(rt,mn).orThunk(()=>$a(g,mn)).each(po=>ut(mn,po,bn))},xt=mn=>es(et,mn);return{register:pt,isRegistered:xt,get:mn=>$a(rt,mn).orThunk(()=>$a(et,mn).map(Sn=>Sn.default)).getOrUndefined(),set:(mn,Sn)=>{if(xt(mn)){const bn=et[mn];return bn.immutable?(console.error(`"${mn}" is an immutable option and cannot be updated`),!1):ut(mn,Sn,bn.processor)}else return console.warn(`"${mn}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:mn=>{const Sn=xt(mn);return Sn&&delete rt[mn],Sn},isSet:mn=>es(rt,mn),debug:()=>{try{console.log(JSON.parse(JSON.stringify($,(mn,Sn)=>Qt(Sn)||so(Sn)||Tt(Sn)||Nt(Sn)||qt(Sn)||Jt(Sn)?Sn:Object.prototype.toString.call(Sn))))}catch(mn){console.error(mn)}}}},Mse=["design","readonly"],TZ=(c,g,$,et)=>{const rt=$[g.get()],ut=$[et];try{ut.activate()}catch(pt){console.error(`problem while activating editor mode ${et}:`,pt);return}rt.deactivate(),rt.editorReadOnly!==ut.editorReadOnly&&_se(c,ut.editorReadOnly),g.set(et),_8(c,et)},Pse=(c,g,$,et)=>{if(et!==$.get()){if(!es(g,et))throw new Error(`Editor mode '${et}' is invalid`);c.initialized?TZ(c,$,g,et):c.on("init",()=>TZ(c,$,g,et))}},Ose=(c,g,$)=>{if(yn(Mse,g))throw new Error(`Cannot override default mode ${g}`);return{...c,[g]:{...$,deactivate:()=>{try{$.deactivate()}catch(et){console.error(`problem while deactivating editor mode ${g}:`,et)}}}}},Dse=c=>{const g=Ru("design"),$=Ru({design:{activate:hn,deactivate:hn,editorReadOnly:!1},readonly:{activate:hn,deactivate:hn,editorReadOnly:!0}});return kse(c),{isReadOnly:()=>l3(c),set:et=>Pse(c,$.get(),g,et),get:()=>g.get(),register:(et,rt)=>{$.set(Ose($.get(),et,rt))}}},Bz=dr.each,$z=dr.explode,Nse={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},IZ=dr.makeMap("alt,ctrl,shift,meta,access"),Lse=c=>c in IZ,Fse=c=>{const g={},$=Xr.os.isMacOS()||Xr.os.isiOS();Bz($z(c.toLowerCase(),"+"),ut=>{Lse(ut)?g[ut]=!0:/^[0-9]{2,}$/.test(ut)?g.keyCode=parseInt(ut,10):(g.charCode=ut.charCodeAt(0),g.keyCode=Nse[ut]||ut.toUpperCase().charCodeAt(0))});const et=[g.keyCode];let rt;for(rt in IZ)g[rt]?et.push(rt):g[rt]=!1;return g.id=et.join(","),g.access&&(g.alt=!0,$?g.ctrl=!0:g.shift=!0),g.meta&&($?g.meta=!0:(g.ctrl=!0,g.meta=!1)),g};class RZ{constructor(g){this.shortcuts={},this.pendingPatterns=[],this.editor=g;const $=this;g.on("keyup keypress keydown",et=>{($.hasModifier(et)||$.isFunctionKey(et))&&!et.isDefaultPrevented()&&(Bz($.shortcuts,rt=>{$.matchShortcut(et,rt)&&($.pendingPatterns=rt.subpatterns.slice(0),et.type==="keydown"&&$.executeShortcutAction(rt))}),$.matchShortcut(et,$.pendingPatterns[0])&&($.pendingPatterns.length===1&&et.type==="keydown"&&$.executeShortcutAction($.pendingPatterns[0]),$.pendingPatterns.shift()))})}add(g,$,et,rt){const ut=this,pt=ut.normalizeCommandFunc(et);return Bz($z(dr.trim(g)),xt=>{const Et=ut.createShortcut(xt,$,pt,rt);ut.shortcuts[Et.id]=Et}),!0}remove(g){const $=this.createShortcut(g);return this.shortcuts[$.id]?(delete this.shortcuts[$.id],!0):!1}normalizeCommandFunc(g){const $=this,et=g;return typeof et=="string"?()=>{$.editor.execCommand(et,!1,null)}:dr.isArray(et)?()=>{$.editor.execCommand(et[0],et[1],et[2])}:et}createShortcut(g,$,et,rt){const ut=dr.map($z(g,">"),Fse);return ut[ut.length-1]=dr.extend(ut[ut.length-1],{func:et,scope:rt||this.editor}),dr.extend(ut[0],{desc:this.editor.translate($),subpatterns:ut.slice(1)})}hasModifier(g){return g.altKey||g.ctrlKey||g.metaKey}isFunctionKey(g){return g.type==="keydown"&&g.keyCode>=112&&g.keyCode<=123}matchShortcut(g,$){return!$||$.ctrl!==g.ctrlKey||$.meta!==g.metaKey||$.alt!==g.altKey||$.shift!==g.shiftKey?!1:g.keyCode===$.keyCode||g.charCode&&g.charCode===$.charCode?(g.preventDefault(),!0):!1}executeShortcutAction(g){return g.func?g.func.call(g.scope):null}}const MZ=()=>{const c={},g={},$={},et={},rt={},ut={},pt={},xt={},Et={},Ft=(en,mn)=>(Sn,bn)=>{en[Sn.toLowerCase()]={...bn,type:mn}},Vt=(en,mn)=>et[en.toLowerCase()]=mn,Kt=(en,mn)=>pt[en.toLowerCase()]=mn;return{addButton:Ft(c,"button"),addGroupToolbarButton:Ft(c,"grouptoolbarbutton"),addToggleButton:Ft(c,"togglebutton"),addMenuButton:Ft(c,"menubutton"),addSplitButton:Ft(c,"splitbutton"),addMenuItem:Ft(g,"menuitem"),addNestedMenuItem:Ft(g,"nestedmenuitem"),addToggleMenuItem:Ft(g,"togglemenuitem"),addAutocompleter:Ft($,"autocompleter"),addContextMenu:Ft(rt,"contextmenu"),addContextToolbar:Ft(ut,"contexttoolbar"),addContextForm:Ft(ut,"contextform"),addSidebar:Ft(xt,"sidebar"),addView:Ft(Et,"views"),addIcon:Vt,addContext:Kt,getAll:()=>({buttons:c,menuItems:g,icons:et,popups:$,contextMenus:rt,contextToolbars:ut,sidebars:xt,views:Et,contexts:pt})}},zse=()=>{const c=MZ();return{addAutocompleter:c.addAutocompleter,addButton:c.addButton,addContextForm:c.addContextForm,addContextMenu:c.addContextMenu,addContextToolbar:c.addContextToolbar,addIcon:c.addIcon,addMenuButton:c.addMenuButton,addMenuItem:c.addMenuItem,addNestedMenuItem:c.addNestedMenuItem,addSidebar:c.addSidebar,addSplitButton:c.addSplitButton,addToggleButton:c.addToggleButton,addGroupToolbarButton:c.addGroupToolbarButton,addToggleMenuItem:c.addToggleMenuItem,addView:c.addView,addContext:c.addContext,getAll:c.getAll}},zA=Uu.DOM,PZ=dr.extend,Bse=dr.each;class LN{constructor(g,$,et){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=et,this.documentBaseUrl=et.documentBaseURL,PZ(this,SZ);const rt=this;this.id=g,this.hidden=!1;const ut=pae(et.defaultOptions,$);this.options=Rse(rt,ut,$),OM(rt);const pt=this.options.get;pt("deprecation_warnings")&&mJ($,ut);const xt=pt("suffix");xt&&(et.suffix=xt),this.suffix=et.suffix;const Et=pt("base_url");Et&&et._setBaseUrl(Et),this.baseUri=et.baseURI;const Ft=CE(rt);Ft&&(R_.ScriptLoader._setReferrerPolicy(Ft),Uu.DOM.styleSheetLoader._setReferrerPolicy(Ft));const Vt=VM(rt);ln(Vt)&&Uu.DOM.styleSheetLoader._setContentCssCors(Vt),z0.languageLoad=pt("language_load"),z0.baseURL=et.baseURL,this.setDirty(!1),this.documentBaseURI=new V_(DM(rt),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=O2(rt),this.hasVisual=hR(rt),this.shortcuts=new RZ(this),this.editorCommands=new wZ(this),hse(this);const Kt=pt("cache_suffix");Kt&&(Xr.cacheSuffix=Kt.replace(/^[\?\&]+/,"")),this.ui={registry:zse(),styleSheetLoader:void 0,show:hn,hide:hn,setEnabled:hn,isEnabled:xo},this.mode=Dse(rt),et.dispatch("SetupEditor",{editor:this});const en=UL(rt);Wt(en)&&en.call(rt,rt)}render(){zre(this)}focus(g){this.execCommand("mceFocus",!1,g)}hasFocus(){return vI(this)}translate(g){return $1.translate(g)}getParam(g,$,et){const rt=this.options;return rt.isRegistered(g)||(ln(et)?rt.register(g,{processor:et,default:$}):rt.register(g,{processor:xo,default:$})),!rt.isSet(g)&&!fn($)?$:rt.get(g)}hasPlugin(g,$){return yn(TE(this),g)?$?DI.get(g)!==void 0:!0:!1}nodeChanged(g){this._nodeChangeDispatcher.nodeChanged(g)}addCommand(g,$,et){this.editorCommands.addCommand(g,$,et)}addQueryStateHandler(g,$,et){this.editorCommands.addQueryStateHandler(g,$,et)}addQueryValueHandler(g,$,et){this.editorCommands.addQueryValueHandler(g,$,et)}addShortcut(g,$,et,rt){this.shortcuts.add(g,$,et,rt)}execCommand(g,$,et,rt){return this.editorCommands.execCommand(g,$,et,rt)}queryCommandState(g){return this.editorCommands.queryCommandState(g)}queryCommandValue(g){return this.editorCommands.queryCommandValue(g)}queryCommandSupported(g){return this.editorCommands.queryCommandSupported(g)}show(){const g=this;g.hidden&&(g.hidden=!1,g.inline?g.getBody().contentEditable="true":(zA.show(g.getContainer()),zA.hide(g.id)),g.load(),g.dispatch("show"))}hide(){const g=this;g.hidden||(g.save(),g.inline?(g.getBody().contentEditable="false",g===g.editorManager.focusedEditor&&(g.editorManager.focusedEditor=null)):(zA.hide(g.getContainer()),zA.setStyle(g.id,"display",g.orgDisplay)),g.hidden=!0,g.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(g,$){this.dispatch("ProgressState",{state:g,time:$})}load(g={}){const $=this,et=$.getElement();if($.removed)return"";if(et){const rt={...g,load:!0},ut=hp(et)?et.value:et.innerHTML,pt=$.setContent(ut,rt);return rt.no_events||$.dispatch("LoadContent",{...rt,element:et}),pt}else return""}save(g={}){const $=this;let et=$.getElement();if(!et||!$.initialized||$.removed)return"";const rt={...g,save:!0,element:et};let ut=$.getContent(rt);const pt={...rt,content:ut};if(pt.no_events||$.dispatch("SaveContent",pt),pt.format==="raw"&&$.dispatch("RawSaveContent",pt),ut=pt.content,hp(et))et.value=ut;else{(g.is_removing||!$.inline)&&(et.innerHTML=ut);const xt=zA.getParent($.id,"form");xt&&Bse(xt.elements,Et=>Et.name===$.id?(Et.value=ut,!1):!0)}return pt.element=rt.element=et=null,pt.set_dirty!==!1&&$.setDirty(!1),ut}setContent(g,$){return LF(this,g,$)}getContent(g){return rD(this,g)}insertContent(g,$){$&&(g=PZ({content:g},$)),this.execCommand("mceInsertContent",!1,g)}resetContent(g){g===void 0?LF(this,this.startContent,{format:"raw"}):LF(this,g),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(g){const $=!this.isNotDirty;this.isNotDirty=!g,g&&g!==$&&this.dispatch("dirty")}getContainer(){const g=this;return g.container||(g.container=g.editorContainer||zA.get(g.id+"_parent")),g.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=zA.get(this.id)),this.targetElm}getWin(){const g=this;if(!g.contentWindow){const $=g.iframeElement;$&&(g.contentWindow=$.contentWindow)}return g.contentWindow}getDoc(){const g=this;if(!g.contentDocument){const $=g.getWin();$&&(g.contentDocument=$.document)}return g.contentDocument}getBody(){var g,$;const et=this.getDoc();return($=(g=this.bodyElement)!==null&&g!==void 0?g:et==null?void 0:et.body)!==null&&$!==void 0?$:null}convertURL(g,$,et){const rt=this,ut=rt.options.get,pt=WL(rt);if(Wt(pt))return pt.call(rt,g,et,!0,$);if(!ut("convert_urls")||et==="link"||Gt(et)&&et.nodeName==="LINK"||g.indexOf("file:")===0||g.length===0)return g;const xt=new V_(g);return xt.protocol!=="http"&&xt.protocol!=="https"&&xt.protocol!==""?g:ut("relative_urls")?rt.documentBaseURI.toRelative(g):(g=rt.documentBaseURI.toAbsolute(g,ut("remove_script_host")),g)}addVisual(g){Vre(this,g)}setEditableRoot(g){Sz(this,g)}hasEditableRoot(){return Bre(this)}remove(){vJ(this)}destroy(g){_J(this,g)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const u3=Uu.DOM,FN=dr.each;let OZ=!1,O4,tv=[];const zN=c=>{const g=c.type;FN(jS.get(),$=>{switch(g){case"scroll":$.dispatch("ScrollWindow",c);break;case"resize":$.dispatch("ResizeWindow",c);break}})},DZ=c=>{if(c!==OZ){const g=Uu.DOM;c?(g.bind(window,"resize",zN),g.bind(window,"scroll",zN)):(g.unbind(window,"resize",zN),g.unbind(window,"scroll",zN)),OZ=c}},NZ=c=>{const g=tv;return tv=Bn(tv,$=>c!==$),jS.activeEditor===c&&(jS.activeEditor=tv.length>0?tv[0]:null),jS.focusedEditor===c&&(jS.focusedEditor=null),g.length!==tv.length},$se=c=>{c&&c.initialized&&!(c.getContainer()||c.getBody()).parentNode&&(NZ(c),c.unbindAllNativeEvents(),c.destroy(!0),c.removed=!0)},Gse=document.compatMode!=="CSS1Compat",jS={...Fz,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"5.1",releaseDate:"TBD",i18n:$1,activeEditor:null,focusedEditor:null,setup(){const c=this;let g="",$="",et=V_.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(et)&&(et=et.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(et)||(et+="/"));const rt=window.tinymce||window.tinyMCEPreInit;if(rt)g=rt.base||rt.baseURL,$=rt.suffix;else{const ut=document.getElementsByTagName("script");for(let pt=0;pt<ut.length;pt++){const xt=ut[pt].src||"";if(xt==="")continue;const Et=xt.substring(xt.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(xt)){Et.indexOf(".min")!==-1&&($=".min"),g=xt.substring(0,xt.lastIndexOf("/"));break}}if(!g&&document.currentScript){const pt=document.currentScript.src;pt.indexOf(".min")!==-1&&($=".min"),g=pt.substring(0,pt.lastIndexOf("/"))}}c.baseURL=new V_(et).toAbsolute(g),c.documentBaseURL=et,c.baseURI=new V_(c.baseURL),c.suffix=$,aK(c)},overrideDefaults(c){const g=c.base_url;g&&this._setBaseUrl(g);const $=c.suffix;$&&(this.suffix=$),this.defaultOptions=c;const et=c.plugin_base_urls;et!==void 0&&or(et,(rt,ut)=>{z0.PluginManager.urls[ut]=rt})},init(c){const g=this;let $;const et=dr.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),rt=(Vt,Kt)=>Vt.inline&&Kt.tagName.toLowerCase()in et,ut=Vt=>{let Kt=Vt.id;return Kt||(Kt=$a(Vt,"name").filter(en=>!u3.get(en)).getOrThunk(u3.uniqueId),Vt.setAttribute("id",Kt)),Kt},pt=Vt=>{const Kt=c[Vt];if(Kt)return Kt.apply(g,[])},xt=Vt=>Xr.browser.isIE()||Xr.browser.isEdge()?(cD("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):Gse?(cD("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Tt(Vt.selector)?u3.select(Vt.selector):ln(Vt.target)?[Vt.target]:[];let Et=Vt=>{$=Vt};const Ft=()=>{let Vt=0;const Kt=[];let en;const mn=(Sn,bn,Pn)=>{const ao=new LN(Sn,bn,g);Kt.push(ao),ao.on("init",()=>{++Vt===en.length&&Et(Kt)}),ao.targetElm=ao.targetElm||Pn,ao.render()};u3.unbind(window,"ready",Ft),pt("onpageload"),en=Cl(xt(c)),dr.each(en,Sn=>{$se(g.get(Sn.id))}),en=dr.grep(en,Sn=>!g.get(Sn.id)),en.length===0?Et([]):FN(en,Sn=>{rt(c,Sn)?cD("Could not initialize inline editor on invalid inline target element",Sn):mn(ut(Sn),c,Sn)})};return u3.bind(window,"ready",Ft),new Promise(Vt=>{$?Vt($):Et=Kt=>{Vt(Kt)}})},get(c){return arguments.length===0?tv.slice(0):Tt(c)?Qn(tv,g=>g.id===c).getOr(null):so(c)&&tv[c]?tv[c]:null},add(c){const g=this,$=g.get(c.id);return $===c||($===null&&tv.push(c),DZ(!0),g.activeEditor=c,g.dispatch("AddEditor",{editor:c}),O4||(O4=et=>{const rt=g.dispatch("BeforeUnload");if(rt.returnValue)return et.preventDefault(),et.returnValue=rt.returnValue,rt.returnValue},window.addEventListener("beforeunload",O4))),c},createEditor(c,g){return this.add(new LN(c,g,this))},remove(c){const g=this;let $;if(!c){for(let et=tv.length-1;et>=0;et--)g.remove(tv[et]);return}if(Tt(c)){FN(u3.select(c),et=>{$=g.get(et.id),$&&g.remove($)});return}return $=c,Nt(g.get($.id))?null:(NZ($)&&g.dispatch("RemoveEditor",{editor:$}),tv.length===0&&window.removeEventListener("beforeunload",O4),$.remove(),DZ(tv.length>0),$)},execCommand(c,g,$){var et;const rt=this,ut=Gt($)?(et=$.id)!==null&&et!==void 0?et:$.index:$;switch(c){case"mceAddEditor":{if(!rt.get(ut)){const pt=$.options;new LN(ut,pt,rt).render()}return!0}case"mceRemoveEditor":{const pt=rt.get(ut);return pt&&pt.remove(),!0}case"mceToggleEditor":{const pt=rt.get(ut);return pt?(pt.isHidden()?pt.show():pt.hide(),!0):(rt.execCommand("mceAddEditor",!1,$),!0)}}return rt.activeEditor?rt.activeEditor.execCommand(c,g,$):!1},triggerSave:()=>{FN(tv,c=>{c.save()})},addI18n:(c,g)=>{$1.add(c,g)},translate:c=>$1.translate(c),setActive(c){const g=this.activeEditor;this.activeEditor!==c&&(g&&g.dispatch("deactivate",{relatedTarget:c}),c.dispatch("activate",{relatedTarget:g})),this.activeEditor=c},_setBaseUrl(c){this.baseURL=new V_(this.documentBaseURL).toAbsolute(c.replace(/\/+$/,"")),this.baseURI=new V_(this.baseURL)}};jS.setup();const LZ=(()=>{const c=Em(),g=ut=>({items:ut,types:Yr(ut),getType:pt=>$a(ut,pt).getOrUndefined()}),$=ut=>{c.set(ut)},et=()=>c.get().getOrUndefined(),rt=c.clear;return{FakeClipboardItem:g,write:$,read:et,clear:rt}})(),jse=Math.min,BA=Math.max,BN=Math.round,Gz=(c,g,$)=>{let et=g.x,rt=g.y;const ut=c.w,pt=c.h,xt=g.w,Et=g.h,Ft=($||"").split("");return Ft[0]==="b"&&(rt+=Et),Ft[1]==="r"&&(et+=xt),Ft[0]==="c"&&(rt+=BN(Et/2)),Ft[1]==="c"&&(et+=BN(xt/2)),Ft[3]==="b"&&(rt-=pt),Ft[4]==="r"&&(et-=ut),Ft[3]==="c"&&(rt-=BN(pt/2)),Ft[4]==="c"&&(et-=BN(ut/2)),d3(et,rt,ut,pt)},Hse=(c,g,$,et)=>{for(let rt=0;rt<et.length;rt++){const ut=Gz(c,g,et[rt]);if(ut.x>=$.x&&ut.x+ut.w<=$.w+$.x&&ut.y>=$.y&&ut.y+ut.h<=$.h+$.y)return et[rt]}return null},Use=(c,g,$)=>d3(c.x-g,c.y-$,c.w+g*2,c.h+$*2),Vse=(c,g)=>{const $=BA(c.x,g.x),et=BA(c.y,g.y),rt=jse(c.x+c.w,g.x+g.w),ut=jse(c.y+c.h,g.y+g.h);return rt-$<0||ut-et<0?null:d3($,et,rt-$,ut-et)},Wse=(c,g,$)=>{let et=c.x,rt=c.y,ut=c.x+c.w,pt=c.y+c.h;const xt=g.x+g.w,Et=g.y+g.h,Ft=BA(0,g.x-et),Vt=BA(0,g.y-rt),Kt=BA(0,ut-xt),en=BA(0,pt-Et);return et+=Ft,rt+=Vt,$&&(ut+=Ft,pt+=Vt,et-=Kt,rt-=en),ut-=Kt,pt-=en,d3(et,rt,ut-et,pt-rt)},d3=(c,g,$,et)=>({x:c,y:g,w:$,h:et}),jz={inflate:Use,relativePosition:Gz,findBestRelativePosition:Hse,intersect:Vse,clamp:Wse,create:d3,fromClientRect:c=>d3(c.left,c.top,c.width,c.height)},Hz=(c,g,$=1e3)=>{let et=!1,rt=null;const ut=Ft=>(...Vt)=>{et||(et=!0,rt!==null&&(clearTimeout(rt),rt=null),Ft.apply(null,Vt))},pt=ut(c),xt=ut(g);return{start:(...Ft)=>{!et&&rt===null&&(rt=setTimeout(()=>xt.apply(null,Ft),$))},resolve:pt,reject:xt}},FZ=(()=>{const c={},g={},$={};return{load:(Et,Ft)=>{const Vt=`Script at URL "${Ft}" failed to load`,Kt=`Script at URL "${Ft}" did not call \`tinymce.Resource.add('${Et}', data)\` within 1 second`;if(c[Et]!==void 0)return c[Et];{const en=new Promise((mn,Sn)=>{const bn=Hz(mn,Sn);g[Et]=bn.resolve,R_.ScriptLoader.loadScript(Ft).then(()=>bn.start(Kt),()=>bn.reject(Vt))});return c[Et]=en,en}},add:(Et,Ft)=>{g[Et]!==void 0&&(g[Et](Ft),delete g[Et]),c[Et]=Promise.resolve(Ft),$[Et]=Ft},has:Et=>Et in $,get:Et=>$[Et],unload:Et=>{delete c[Et],delete $[Et]}}})(),qse=()=>(()=>{let c={},g=[];const $={getItem:et=>{const rt=c[et];return rt||null},setItem:(et,rt)=>{g.push(et),c[et]=String(rt)},key:et=>g[et],removeItem:et=>{g=g.filter(rt=>rt===et),delete c[et]},clear:()=>{g=[],c={}},length:0};return Object.defineProperty($,"length",{get:()=>g.length,configurable:!1,enumerable:!1}),$})();let D4;try{const c="__storage_test__";D4=window.localStorage,D4.setItem(c,c),D4.removeItem(c)}catch{D4=qse()}var Zse=D4;const Kse={geom:{Rect:jz},util:{Delay:o1,Tools:dr,VK:Gr,URI:V_,EventDispatcher:Lz,Observable:Fz,I18n:$1,LocalStorage:Zse,ImageUploader:HF},dom:{EventUtils:g2,TreeWalker:pm,TextSeeker:b2,DOMUtils:Uu,ScriptLoader:R_,RangeUtils:cr,Serializer:DF,StyleSheetLoader:A_,ControlSelection:XR,BookmarkManager:Z2,Selection:RH,Event:g2.Event},html:{Styles:rw,Entities:tw,Node:Oy,Schema:xu,DomParser:gA,Writer:J8,Serializer:pS},Env:Xr,AddOnManager:z0,Annotator:V1,Formatter:YH,UndoManager:qF,EditorCommands:wZ,WindowManager:BF,NotificationManager:GH,EditorObservable:SZ,Shortcuts:RZ,Editor:LN,FocusManager:j8,EditorManager:jS,DOM:Uu.DOM,ScriptLoader:R_.ScriptLoader,PluginManager:DI,ThemeManager:Mx,ModelManager:OI,IconManager:PI,Resource:FZ,FakeClipboard:LZ,trim:dr.trim,isArray:dr.isArray,is:dr.is,toArray:dr.toArray,makeMap:dr.makeMap,each:dr.each,map:dr.map,grep:dr.grep,inArray:dr.inArray,extend:dr.extend,walk:dr.walk,resolve:dr.resolve,explode:dr.explode,_addCacheSuffix:dr._addCacheSuffix},zZ=dr.extend(jS,Kse),Yse=c=>{try{o.exports=c}catch{}};(c=>{window.tinymce=c,window.tinyMCE=c})(zZ),Yse(zZ)})()})(tinymce$1);(function(){var o=tinymce.util.Tools.resolve("tinymce.ModelManager");const e=(at,ht,_t)=>{var kt;return _t(at,ht.prototype)?!0:((kt=at.constructor)===null||kt===void 0?void 0:kt.name)===ht.name},s=at=>{const ht=typeof at;return at===null?"null":ht==="object"&&Array.isArray(at)?"array":ht==="object"&&e(at,String,(_t,kt)=>kt.isPrototypeOf(_t))?"string":ht},a=at=>ht=>s(ht)===at,d=at=>ht=>typeof ht===at,b=at=>ht=>at===ht,_=a("string"),_e=a("object"),ot=a("array"),st=b(null),ct=d("boolean"),ft=b(void 0),mt=at=>at==null,bt=at=>!mt(at),wt=d("function"),Ct=d("number"),Rt=()=>{},It=(at,ht)=>(..._t)=>at(ht.apply(null,_t)),Pt=(at,ht)=>_t=>at(ht(_t)),Tt=at=>()=>at,Gt=at=>at,Jt=(at,ht)=>at===ht;function qt(at,...ht){return(..._t)=>{const kt=ht.concat(_t);return at.apply(null,kt)}}const Nt=at=>ht=>!at(ht),Qt=at=>()=>{throw new Error(at)},fn=at=>at(),Mn=Tt(!1),ln=Tt(!0);class Wt{constructor(ht,_t){this.tag=ht,this.value=_t}static some(ht){return new Wt(!0,ht)}static none(){return Wt.singletonNone}fold(ht,_t){return this.tag?_t(this.value):ht()}isSome(){return this.tag}isNone(){return!this.tag}map(ht){return this.tag?Wt.some(ht(this.value)):Wt.none()}bind(ht){return this.tag?ht(this.value):Wt.none()}exists(ht){return this.tag&&ht(this.value)}forall(ht){return!this.tag||ht(this.value)}filter(ht){return!this.tag||ht(this.value)?this:Wt.none()}getOr(ht){return this.tag?this.value:ht}or(ht){return this.tag?this:ht}getOrThunk(ht){return this.tag?this.value:ht()}orThunk(ht){return this.tag?this:ht()}getOrDie(ht){if(this.tag)return this.value;throw new Error(ht??"Called getOrDie on None")}static from(ht){return bt(ht)?Wt.some(ht):Wt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ht){this.tag&&ht(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Wt.singletonNone=new Wt(!1);const so=Array.prototype.slice,pn=Array.prototype.indexOf,hn=Array.prototype.push,Mt=(at,ht)=>pn.call(at,ht),Hn=(at,ht)=>Mt(at,ht)>-1,cn=(at,ht)=>{for(let _t=0,kt=at.length;_t<kt;_t++){const zt=at[_t];if(ht(zt,_t))return!0}return!1},fo=(at,ht)=>{const _t=[];for(let kt=0;kt<at;kt++)_t.push(ht(kt));return _t},Fn=(at,ht)=>{const _t=at.length,kt=new Array(_t);for(let zt=0;zt<_t;zt++){const Ht=at[zt];kt[zt]=ht(Ht,zt)}return kt},Tn=(at,ht)=>{for(let _t=0,kt=at.length;_t<kt;_t++){const zt=at[_t];ht(zt,_t)}},qn=(at,ht)=>{for(let _t=at.length-1;_t>=0;_t--){const kt=at[_t];ht(kt,_t)}},nr=(at,ht)=>{const _t=[],kt=[];for(let zt=0,Ht=at.length;zt<Ht;zt++){const tn=at[zt];(ht(tn,zt)?_t:kt).push(tn)}return{pass:_t,fail:kt}},oo=(at,ht)=>{const _t=[];for(let kt=0,zt=at.length;kt<zt;kt++){const Ht=at[kt];ht(Ht,kt)&&_t.push(Ht)}return _t},Mo=(at,ht,_t)=>(qn(at,(kt,zt)=>{_t=ht(_t,kt,zt)}),_t),Dn=(at,ht,_t)=>(Tn(at,(kt,zt)=>{_t=ht(_t,kt,zt)}),_t),xo=(at,ht,_t)=>{for(let kt=0,zt=at.length;kt<zt;kt++){const Ht=at[kt];if(ht(Ht,kt))return Wt.some(Ht);if(_t(Ht,kt))break}return Wt.none()},Xt=(at,ht)=>xo(at,ht,Mn),Ur=(at,ht)=>{for(let _t=0,kt=at.length;_t<kt;_t++){const zt=at[_t];if(ht(zt,_t))return Wt.some(_t)}return Wt.none()},co=at=>{const ht=[];for(let _t=0,kt=at.length;_t<kt;++_t){if(!ot(at[_t]))throw new Error("Arr.flatten item "+_t+" was not an array, input: "+at);hn.apply(ht,at[_t])}return ht},Vo=(at,ht)=>co(Fn(at,ht)),yo=(at,ht)=>{for(let _t=0,kt=at.length;_t<kt;++_t){const zt=at[_t];if(ht(zt,_t)!==!0)return!1}return!0},ko=at=>{const ht=so.call(at,0);return ht.reverse(),ht},yn=(at,ht)=>{const _t={};for(let kt=0,zt=at.length;kt<zt;kt++){const Ht=at[kt];_t[String(Ht)]=ht(Ht,kt)}return _t},Cn=(at,ht)=>{const _t=so.call(at,0);return _t.sort(ht),_t},Nn=(at,ht)=>ht>=0&&ht<at.length?Wt.some(at[ht]):Wt.none(),sn=at=>Nn(at,0),kn=at=>Nn(at,at.length-1),Ln=(at,ht)=>{for(let _t=0;_t<at.length;_t++){const kt=ht(at[_t],_t);if(kt.isSome())return kt}return Wt.none()},Bn=Object.keys,Eo=Object.hasOwnProperty,Wn=(at,ht)=>{const _t=Bn(at);for(let kt=0,zt=_t.length;kt<zt;kt++){const Ht=_t[kt],tn=at[Ht];ht(tn,Ht)}},Rn=(at,ht)=>Qn(at,(_t,kt)=>({k:kt,v:ht(_t,kt)})),Qn=(at,ht)=>{const _t={};return Wn(at,(kt,zt)=>{const Ht=ht(kt,zt);_t[Ht.k]=Ht.v}),_t},vo=at=>(ht,_t)=>{at[_t]=ht},Gn=(at,ht,_t,kt)=>{Wn(at,(zt,Ht)=>{(ht(zt,Ht)?_t:kt)(zt,Ht)})},ro=(at,ht)=>{const _t={};return Gn(at,ht,vo(_t),Rt),_t},Co=(at,ht)=>{const _t=[];return Wn(at,(kt,zt)=>{_t.push(ht(kt,zt))}),_t},Do=at=>Co(at,Gt),Mr=(at,ht)=>ar(at,ht)?Wt.from(at[ht]):Wt.none(),ar=(at,ht)=>Eo.call(at,ht),xr=(at,ht)=>ar(at,ht)&&at[ht]!==void 0&&at[ht]!==null,us=at=>{for(const ht in at)if(Eo.call(at,ht))return!1;return!0},wr=typeof window<"u"?window:Function("return this;")(),gs=(at,ht)=>{let _t=ht??wr;for(let kt=0;kt<at.length&&_t!==void 0&&_t!==null;++kt)_t=_t[at[kt]];return _t},Ts=(at,ht)=>{const _t=at.split(".");return gs(_t,ht)},Rs=(at,ht)=>Ts(at,ht),Cl=(at,ht)=>{const _t=Rs(at,ht);if(_t==null)throw new Error(at+" not available on this browser");return _t},Yr=Object.getPrototypeOf,Dl=at=>Cl("HTMLElement",at),or=at=>{const ht=Ts("ownerDocument.defaultView",at);return _e(at)&&(Dl(ht).prototype.isPrototypeOf(at)||/^HTML\w*Element$/.test(Yr(at).constructor.name))},Ds=8,hu=9,au=11,_c=1,Su=3,Zs=at=>at.dom.nodeName.toLowerCase(),Eu=at=>at.dom.nodeType,uu=at=>ht=>Eu(ht)===at,$a=at=>Eu(at)===Ds||Zs(at)==="#comment",es=at=>yl(at)&&or(at.dom),yl=uu(_c),mo=uu(Su),Oo=uu(hu),Ar=uu(au),Br=at=>ht=>yl(ht)&&Zs(ht)===at,Ws=(at,ht,_t)=>{if(_(_t)||ct(_t)||Ct(_t))at.setAttribute(ht,_t+"");else throw console.error("Invalid call to Attribute.set. Key ",ht,":: Value ",_t,":: Element ",at),new Error("Attribute value was not simple")},_l=(at,ht,_t)=>{Ws(at.dom,ht,_t)},Wu=(at,ht)=>{const _t=at.dom;Wn(ht,(kt,zt)=>{Ws(_t,zt,kt)})},qu=(at,ht)=>{Wn(ht,(_t,kt)=>{_t.fold(()=>{$n(at,kt)},zt=>{Ws(at.dom,kt,zt)})})},Mu=(at,ht)=>{const _t=at.dom.getAttribute(ht);return _t===null?void 0:_t},Vn=(at,ht)=>Wt.from(Mu(at,ht)),$n=(at,ht)=>{at.dom.removeAttribute(ht)},Po=at=>Dn(at.dom.attributes,(ht,_t)=>(ht[_t.name]=_t.value,ht),{}),Ho=(at,ht)=>{const kt=(ht||document).createElement("div");if(kt.innerHTML=at,!kt.hasChildNodes()||kt.childNodes.length>1){const zt="HTML does not have a single root node";throw console.error(zt,at),new Error(zt)}return zs(kt.childNodes[0])},cs=(at,ht)=>{const kt=(ht||document).createElement(at);return zs(kt)},Es=(at,ht)=>{const kt=(ht||document).createTextNode(at);return zs(kt)},zs=at=>{if(at==null)throw new Error("Node cannot be null or undefined");return{dom:at}},io={fromHtml:Ho,fromTag:cs,fromText:Es,fromDom:zs,fromPoint:(at,ht,_t)=>Wt.from(at.dom.elementFromPoint(ht,_t)).map(zs)},Bs=(at,ht)=>{const _t=at.dom;if(_t.nodeType!==_c)return!1;{const kt=_t;if(kt.matches!==void 0)return kt.matches(ht);if(kt.msMatchesSelector!==void 0)return kt.msMatchesSelector(ht);if(kt.webkitMatchesSelector!==void 0)return kt.webkitMatchesSelector(ht);if(kt.mozMatchesSelector!==void 0)return kt.mozMatchesSelector(ht);throw new Error("Browser lacks native selectors")}},Jn=at=>at.nodeType!==_c&&at.nodeType!==hu&&at.nodeType!==au||at.childElementCount===0,to=(at,ht)=>{const _t=ht===void 0?document:ht.dom;return Jn(_t)?[]:Fn(_t.querySelectorAll(at),io.fromDom)},rr=(at,ht)=>{const _t=ht===void 0?document:ht.dom;return Jn(_t)?Wt.none():Wt.from(_t.querySelector(at)).map(io.fromDom)},ur=(at,ht)=>at.dom===ht.dom,Pr=(at,ht)=>{const _t=at.dom,kt=ht.dom;return _t===kt?!1:_t.contains(kt)},ns=Bs,rs=at=>io.fromDom(at.dom.ownerDocument),Wr=at=>Oo(at)?at:rs(at),ms=at=>io.fromDom(Wr(at).dom.documentElement),As=at=>io.fromDom(Wr(at).dom.defaultView),Bl=at=>Wt.from(at.dom.parentNode).map(io.fromDom),eu=at=>Wt.from(at.dom.parentElement).map(io.fromDom),pu=(at,ht)=>{const _t=wt(ht)?ht:Mn;let kt=at.dom;const zt=[];for(;kt.parentNode!==null&&kt.parentNode!==void 0;){const Ht=kt.parentNode,tn=io.fromDom(Ht);if(zt.push(tn),_t(tn)===!0)break;kt=Ht}return zt},Qp=at=>Wt.from(at.dom.previousSibling).map(io.fromDom),cm=at=>Wt.from(at.dom.nextSibling).map(io.fromDom),Cs=at=>Fn(at.dom.childNodes,io.fromDom),Rl=(at,ht)=>{const _t=at.dom.childNodes;return Wt.from(_t[ht]).map(io.fromDom)},Ll=at=>Rl(at,0),Ep=(at,ht)=>{Bl(at).each(kt=>{kt.dom.insertBefore(ht.dom,at.dom)})},Ap=(at,ht)=>{cm(at).fold(()=>{Bl(at).each(zt=>{Tu(zt,ht)})},kt=>{Ep(kt,ht)})},gp=(at,ht)=>{Ll(at).fold(()=>{Tu(at,ht)},kt=>{at.dom.insertBefore(ht.dom,kt.dom)})},Tu=(at,ht)=>{at.dom.appendChild(ht.dom)},v1=(at,ht,_t)=>{Rl(at,_t).fold(()=>{Tu(at,ht)},kt=>{Ep(kt,ht)})},Km=(at,ht)=>{Ep(at,ht),Tu(ht,at)},Yl=(at,ht)=>{Tn(ht,(_t,kt)=>{const zt=kt===0?at:ht[kt-1];Ap(zt,_t)})},zp=(at,ht)=>{Tn(ht,_t=>{Tu(at,_t)})},Bp=at=>{at.dom.textContent="",Tn(Cs(at),ht=>{mp(ht)})},mp=at=>{const ht=at.dom;ht.parentNode!==null&&ht.parentNode.removeChild(ht)},ly=at=>{const ht=Cs(at);ht.length>0&&Yl(at,ht),mp(at)},um=(at,ht)=>io.fromDom(at.dom.cloneNode(ht)),_g=at=>um(at,!1),Ym=at=>um(at,!0),Pm=(at,ht)=>{const _t=io.fromTag(ht),kt=Po(at);return Wu(_t,kt),_t},by=(at,ht)=>{const _t=Pm(at,ht),kt=Cs(Ym(at));return zp(_t,kt),_t},vy=(at,ht)=>{const _t=Pm(at,ht);Ap(at,_t);const kt=Cs(at);return zp(_t,kt),mp(at),_t},q0=["tfoot","thead","tbody","colgroup"],Om=at=>Hn(q0,at),Mp=(at,ht)=>({rows:at,columns:ht}),cy=(at,ht)=>({row:at,column:ht}),uy=(at,ht,_t)=>({element:at,rowspan:ht,colspan:_t}),zy=(at,ht,_t,kt)=>({element:at,rowspan:ht,colspan:_t,isNew:kt}),R0=(at,ht,_t,kt,zt,Ht)=>({element:at,rowspan:ht,colspan:_t,row:kt,column:zt,isLocked:Ht}),yp=(at,ht,_t)=>({element:at,cells:ht,section:_t}),Dm=(at,ht,_t,kt)=>({element:at,cells:ht,section:_t,isNew:kt}),$p=(at,ht,_t)=>({element:at,isNew:ht,isLocked:_t}),em=(at,ht,_t,kt)=>({element:at,cells:ht,section:_t,isNew:kt}),By=(at,ht,_t,kt)=>({startRow:at,startCol:ht,finishRow:_t,finishCol:kt}),$y=(at,ht,_t)=>({element:at,colspan:ht,column:_t}),dn=(at,ht)=>({element:at,columns:ht}),zn=at=>Ar(at)&&bt(at.dom.host),ho=at=>io.fromDom(at.dom.getRootNode()),qo=at=>zn(at)?at:io.fromDom(Wr(at).dom.body),mr=at=>{const ht=ho(at);return zn(ht)?Wt.some(ht):Wt.none()},Wo=at=>io.fromDom(at.dom.host),Vl=at=>{if(bt(at.target)){const ht=io.fromDom(at.target);if(yl(ht)&&Xr(ht)&&at.composed&&at.composedPath){const _t=at.composedPath();if(_t)return sn(_t)}}return Wt.from(at.target)},Xr=at=>bt(at.dom.shadowRoot),Ls=at=>{const ht=mo(at)?at.dom.parentNode:at.dom;if(ht==null||ht.ownerDocument===null)return!1;const _t=ht.ownerDocument;return mr(io.fromDom(ht)).fold(()=>_t.body.contains(ht),Pt(Ls,Wo))},Lu=()=>Yt(io.fromDom(document)),Yt=at=>{const ht=at.dom.body;if(ht==null)throw new Error("Body is not available yet");return io.fromDom(ht)},_n=(at,ht,_t)=>oo(pu(at,_t),ht),Kn=(at,ht)=>oo(Cs(at),ht),Ao=(at,ht)=>{let _t=[];return Tn(Cs(at),kt=>{ht(kt)&&(_t=_t.concat([kt])),_t=_t.concat(Ao(kt,ht))}),_t},Jo=(at,ht,_t)=>_n(at,kt=>Bs(kt,ht),_t),Xs=(at,ht)=>Kn(at,_t=>Bs(_t,ht)),Jl=(at,ht)=>to(ht,at);var lu=(at,ht,_t,kt,zt)=>at(_t,kt)?Wt.some(_t):wt(zt)&&zt(_t)?Wt.none():ht(_t,kt,zt);const dr=(at,ht,_t)=>{let kt=at.dom;const zt=wt(_t)?_t:Mn;for(;kt.parentNode;){kt=kt.parentNode;const Ht=io.fromDom(kt);if(ht(Ht))return Wt.some(Ht);if(zt(Ht))break}return Wt.none()},gu=(at,ht,_t)=>lu((zt,Ht)=>Ht(zt),dr,at,ht,_t),jp=(at,ht)=>{const _t=zt=>ht(io.fromDom(zt));return Xt(at.dom.childNodes,_t).map(io.fromDom)},Z0=(at,ht)=>{const _t=kt=>{for(let zt=0;zt<kt.childNodes.length;zt++){const Ht=io.fromDom(kt.childNodes[zt]);if(ht(Ht))return Wt.some(Ht);const tn=_t(kt.childNodes[zt]);if(tn.isSome())return tn}return Wt.none()};return _t(at.dom)},js=(at,ht,_t)=>dr(at,kt=>Bs(kt,ht),_t),Xm=(at,ht)=>jp(at,_t=>Bs(_t,ht)),m0=(at,ht)=>rr(ht,at),Tp=(at,ht,_t)=>lu((zt,Ht)=>Bs(zt,Ht),js,at,ht,_t),mu=(at,ht,_t=Jt)=>at.exists(kt=>_t(kt,ht)),K0=at=>{const ht=[],_t=kt=>{ht.push(kt)};for(let kt=0;kt<at.length;kt++)at[kt].each(_t);return ht},jx=(at,ht)=>at!=null?ht(at):Wt.none(),h_=(at,ht)=>at?Wt.some(ht):Wt.none(),Zu=(at,ht)=>at.substring(ht),_1=(at,ht,_t)=>ht===""||at.length>=ht.length&&at.substr(_t,_t+ht.length)===ht,M0=(at,ht)=>P0(at,ht)?Zu(at,ht.length):at,Gu=(at,ht,_t=0,kt)=>{const zt=at.indexOf(ht,_t);return zt!==-1?ft(kt)?!0:zt+ht.length<=kt:!1},P0=(at,ht)=>_1(at,ht,0),Nm=(at,ht)=>_1(at,ht,at.length-ht.length),vn=(at=>ht=>ht.replace(at,""))(/^\s+|\s+$/g),En=at=>at.length>0,To=at=>{const ht=parseFloat(at);return isNaN(ht)?Wt.none():Wt.some(ht)},Zo=at=>at.style!==void 0&&wt(at.style.getPropertyValue),ys=(at,ht,_t)=>{if(!_(_t))throw console.error("Invalid call to CSS.set. Property ",ht,":: Value ",_t,":: Element ",at),new Error("CSS value must be a string: "+_t);Zo(at)&&at.style.setProperty(ht,_t)},Ml=(at,ht)=>{Zo(at)&&at.style.removeProperty(ht)},_i=(at,ht,_t)=>{const kt=at.dom;ys(kt,ht,_t)},vu=(at,ht)=>{const _t=at.dom;Wn(ht,(kt,zt)=>{ys(_t,zt,kt)})},bp=(at,ht)=>{const _t=at.dom,zt=window.getComputedStyle(_t).getPropertyValue(ht);return zt===""&&!Ls(at)?Lm(_t,ht):zt},Lm=(at,ht)=>Zo(at)?at.style.getPropertyValue(ht):"",dm=(at,ht)=>{const _t=at.dom,kt=Lm(_t,ht);return Wt.from(kt).filter(zt=>zt.length>0)},cp=(at,ht)=>{const _t=at.dom;Ml(_t,ht),mu(Vn(at,"style").map(vn),"")&&$n(at,"style")},up=(at,ht)=>{const _t=at.dom,kt=ht.dom;Zo(_t)&&Zo(kt)&&(kt.style.cssText=_t.style.cssText)},Pp=(at,ht,_t=0)=>Vn(at,ht).map(kt=>parseInt(kt,10)).getOr(_t),fm=(at,ht)=>Pp(at,ht,1),Ku=at=>Br("col")(at)?Pp(at,"span",1)>1:fm(at,"colspan")>1,dp=at=>fm(at,"rowspan")>1,ju=(at,ht)=>parseInt(bp(at,ht),10),_y=Tt(10),p_=Tt(10),av=(at,ht)=>w1(at,ht,ln),w1=(at,ht,_t)=>Vo(Cs(at),kt=>Bs(kt,ht)?_t(kt)?[kt]:[]:w1(kt,ht,_t)),k1=(at,ht,_t=Mn)=>{if(_t(ht))return Wt.none();if(Hn(at,Zs(ht)))return Wt.some(ht);const kt=zt=>Bs(zt,"table")||_t(zt);return js(ht,at.join(","),kt)},Dv=(at,ht)=>k1(["td","th"],at,ht),Nv=at=>av(at,"th,td"),O0=at=>Bs(at,"colgroup")?Xs(at,"col"):Vo(Gy(at),ht=>Xs(ht,"col")),Jm=(at,ht)=>Tp(at,"table",ht),Hw=at=>av(at,"tr"),Gy=at=>Jm(at).fold(Tt([]),ht=>Xs(ht,"colgroup")),Hx=(at,ht)=>Fn(at,_t=>{if(Zs(_t)==="colgroup"){const kt=Fn(O0(_t),zt=>{const Ht=Pp(zt,"span",1);return uy(zt,1,Ht)});return yp(_t,kt,"colgroup")}else{const kt=Fn(Nv(_t),zt=>{const Ht=Pp(zt,"rowspan",1),tn=Pp(zt,"colspan",1);return uy(zt,Ht,tn)});return yp(_t,kt,ht(_t))}}),S1=at=>Bl(at).map(ht=>{const _t=Zs(ht);return Om(_t)?_t:"tbody"}).getOr("tbody"),Ux=at=>{const ht=Hw(at),kt=[...Gy(at),...ht];return Hx(kt,S1)},Q_=(at,ht)=>Hx(at,()=>ht),E1=at=>{let ht=!1,_t;return(...kt)=>(ht||(ht=!0,_t=at.apply(null,kt)),_t)},ex=(at,ht,_t,kt)=>{const zt=at.isiOS()&&/ipad/i.test(_t)===!0,Ht=at.isiOS()&&!zt,tn=at.isiOS()||at.isAndroid(),gn=tn||kt("(pointer:coarse)"),An=zt||!Ht&&tn&&kt("(min-device-width:768px)"),no=Ht||tn&&!An,Ro=ht.isSafari()&&at.isiOS()&&/safari/i.test(_t)===!1,gr=!no&&!An&&!Ro;return{isiPad:Tt(zt),isiPhone:Tt(Ht),isTablet:Tt(An),isPhone:Tt(no),isTouch:Tt(gn),isAndroid:at.isAndroid,isiOS:at.isiOS,isWebView:Tt(Ro),isDesktop:Tt(gr)}},Vx=(at,ht)=>{for(let _t=0;_t<at.length;_t++){const kt=at[_t];if(kt.test(ht))return kt}},Lv=(at,ht)=>{const _t=Vx(at,ht);if(!_t)return{major:0,minor:0};const kt=zt=>Number(ht.replace(_t,"$"+zt));return T1(kt(1),kt(2))},Uw=(at,ht)=>{const _t=String(ht).toLowerCase();return at.length===0?eo():Lv(at,_t)},eo=()=>T1(0,0),T1=(at,ht)=>({major:at,minor:ht}),D0={nu:T1,detect:Uw,unknown:eo},hC=(at,ht)=>Ln(ht.brands,_t=>{const kt=_t.brand.toLowerCase();return Xt(at,zt=>{var Ht;return kt===((Ht=zt.brand)===null||Ht===void 0?void 0:Ht.toLowerCase())}).map(zt=>({current:zt.name,version:D0.nu(parseInt(_t.version,10),0)}))}),pC=(at,ht)=>{const _t=String(ht).toLowerCase();return Xt(at,kt=>kt.search(_t))},Fv=(at,ht)=>pC(at,ht).map(_t=>{const kt=D0.detect(_t.versionRegexes,ht);return{current:_t.name,version:kt}}),ba=(at,ht)=>pC(at,ht).map(_t=>{const kt=D0.detect(_t.versionRegexes,ht);return{current:_t.name,version:kt}}),Fm=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,hm=at=>ht=>Gu(ht,at),zv=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:at=>Gu(at,"edge/")&&Gu(at,"chrome")&&Gu(at,"safari")&&Gu(at,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fm],search:at=>Gu(at,"chrome")&&!Gu(at,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:at=>Gu(at,"msie")||Gu(at,"trident")},{name:"Opera",versionRegexes:[Fm,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:hm("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:hm("firefox")},{name:"Safari",versionRegexes:[Fm,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:at=>(Gu(at,"safari")||Gu(at,"mobile/"))&&Gu(at,"applewebkit")}],Wx=[{name:"Windows",search:hm("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:at=>Gu(at,"iphone")||Gu(at,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:hm("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:hm("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:hm("linux"),versionRegexes:[]},{name:"Solaris",search:hm("sunos"),versionRegexes:[]},{name:"FreeBSD",search:hm("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:hm("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],g_={browsers:Tt(zv),oses:Tt(Wx)},zm="Edge",tx="Chromium",lv="IE",nx="Opera",cv="Firefox",Qm="Safari",gC=()=>m_({current:void 0,version:D0.unknown()}),m_=at=>{const ht=at.current,_t=at.version,kt=zt=>()=>ht===zt;return{current:ht,version:_t,isEdge:kt(zm),isChromium:kt(tx),isIE:kt(lv),isOpera:kt(nx),isFirefox:kt(cv),isSafari:kt(Qm)}},tm={unknown:gC,nu:m_,edge:Tt(zm),chromium:Tt(tx),ie:Tt(lv),opera:Tt(nx),firefox:Tt(cv),safari:Tt(Qm)},y0="Windows",e0="iOS",I1="Android",y_="Linux",Vw="macOS",b_="Solaris",xy="FreeBSD",v_="ChromeOS",XS=()=>Ww({current:void 0,version:D0.unknown()}),Ww=at=>{const ht=at.current,_t=at.version,kt=zt=>()=>ht===zt;return{current:ht,version:_t,isWindows:kt(y0),isiOS:kt(e0),isAndroid:kt(I1),isMacOS:kt(Vw),isLinux:kt(y_),isSolaris:kt(b_),isFreeBSD:kt(xy),isChromeOS:kt(v_)}},mC={unknown:XS,nu:Ww,windows:Tt(y0),ios:Tt(e0),android:Tt(I1),linux:Tt(y_),macos:Tt(Vw),solaris:Tt(b_),freebsd:Tt(xy),chromeos:Tt(v_)},__={detect:(at,ht,_t)=>{const kt=g_.browsers(),zt=g_.oses(),Ht=ht.bind(An=>hC(kt,An)).orThunk(()=>Fv(kt,at)).fold(tm.unknown,tm.nu),tn=ba(zt,at).fold(mC.unknown,mC.nu),gn=ex(tn,Ht,at,_t);return{browser:Ht,os:tn,deviceType:gn}}},R1=at=>window.matchMedia(at).matches;let ox=E1(()=>__.detect(window.navigator.userAgent,Wt.from(window.navigator.userAgentData),R1));const ep=()=>ox(),tp=(at,ht)=>{const _t=(gn,An)=>{if(!Ct(An)&&!An.match(/^[0-9]+$/))throw new Error(at+".set accepts only positive integer values. Value was "+An);const no=gn.dom;Zo(no)&&(no.style[at]=An+"px")},kt=gn=>{const An=ht(gn);if(An<=0||An===null){const no=bp(gn,at);return parseFloat(no)||0}return An},zt=kt,Ht=(gn,An)=>Dn(An,(no,Ro)=>{const gr=bp(gn,Ro),Nr=gr===void 0?0:parseInt(gr,10);return isNaN(Nr)?no:no+Nr},0);return{set:_t,get:kt,getOuter:zt,aggregate:Ht,max:(gn,An,no)=>{const Ro=Ht(gn,no);return An>Ro?An-Ro:0}}},Bv=(at,ht)=>To(at).getOr(ht),dy=(at,ht,_t)=>Bv(bp(at,ht),_t),Zw=(at,ht,_t,kt)=>{const zt=dy(at,`padding-${_t}`,0),Ht=dy(at,`padding-${kt}`,0),tn=dy(at,`border-${_t}-width`,0),gn=dy(at,`border-${kt}-width`,0);return ht-zt-Ht-tn-gn},Hp=(at,ht)=>{const _t=at.dom,kt=_t.getBoundingClientRect().width||_t.offsetWidth;return ht==="border-box"?kt:Zw(at,kt,"left","right")},ds=at=>dy(at,"height",at.dom.offsetHeight),uv=at=>dy(at,"width",at.dom.offsetWidth),Kw=at=>Hp(at,"content-box"),Y0=tp("width",at=>at.dom.offsetWidth),Xl=at=>Y0.get(at),$v=at=>Y0.getOuter(at),rx=Kw,qx=uv,Yw=(at,ht,_t)=>{const kt=at.cells,zt=kt.slice(0,ht),Ht=kt.slice(ht),tn=zt.concat(_t).concat(Ht);return Gv(at,tn)},Js=(at,ht,_t)=>Yw(at,ht,[_t]),wp=(at,ht,_t)=>{const kt=at.cells;kt[ht]=_t},Gv=(at,ht)=>em(at.element,ht,at.section,at.isNew),jv=(at,ht)=>{const _t=at.cells,kt=Fn(_t,ht);return em(at.element,kt,at.section,at.isNew)},N0=(at,ht)=>at.cells[ht],b0=(at,ht)=>N0(at,ht).element,X0=at=>at.cells.length,Iu=at=>{const ht=nr(at,_t=>_t.section==="colgroup");return{rows:ht.fail,cols:ht.pass}},fy=(at,ht,_t)=>{const kt=Fn(at.cells,_t);return em(ht(at.element),kt,at.section,!0)},M1="data-snooker-locked-cols",qp=at=>Vn(at,M1).bind(ht=>Wt.from(ht.match(/\d+/g))).map(ht=>yn(ht,ln)),wy=at=>{const ht=Dn(Iu(at).rows,(kt,zt)=>(Tn(zt.cells,(Ht,tn)=>{Ht.isLocked&&(kt[tn]=!0)}),kt),{}),_t=Co(ht,(kt,zt)=>parseInt(zt,10));return Cn(_t)},fp=(at,ht)=>at+","+ht,Hv=(at,ht,_t)=>Wt.from(at.access[fp(ht,_t)]),x_=(at,ht,_t)=>{const kt=_u(at,zt=>_t(ht,zt.element));return kt.length>0?Wt.some(kt[0]):Wt.none()},_u=(at,ht)=>{const _t=Vo(at.all,kt=>kt.cells);return oo(_t,ht)},Cy=at=>{const ht={};let _t=0;return Tn(at.cells,kt=>{const zt=kt.colspan;fo(zt,Ht=>{const tn=_t+Ht;ht[tn]=$y(kt.element,zt,tn)}),_t+=zt}),ht},Zx=at=>{const ht={},_t=[],zt=sn(at).map(Rr=>Rr.element).bind(Jm).bind(qp).getOr({});let Ht=0,tn=0,gn=0;const{pass:An,fail:no}=nr(at,Rr=>Rr.section==="colgroup");Tn(no,Rr=>{const Cr=[];Tn(Rr.cells,ss=>{let cr=0;for(;ht[fp(gn,cr)]!==void 0;)cr++;const kr=xr(zt,cr.toString()),Er=R0(ss.element,ss.rowspan,ss.colspan,gn,cr,kr);for(let $s=0;$s<ss.colspan;$s++)for(let Gl=0;Gl<ss.rowspan;Gl++){const Cu=gn+Gl,Qu=cr+$s,pp=fp(Cu,Qu);ht[pp]=Er,tn=Math.max(tn,Qu+1)}Cr.push(Er)}),Ht++,_t.push(yp(Rr.element,Cr,Rr.section)),gn++});const{columns:Ro,colgroups:gr}=kn(An).map(Rr=>{const Cr=Cy(Rr);return{colgroups:[dn(Rr.element,Do(Cr))],columns:Cr}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Mp(Ht,tn),access:ht,all:_t,columns:Ro,colgroups:gr}},Sl={fromTable:at=>{const ht=Ux(at);return Zx(ht)},generate:Zx,getAt:Hv,findItem:x_,filterItems:_u,justCells:at=>Vo(at.all,ht=>ht.cells),justColumns:at=>Do(at.columns),hasColumns:at=>Bn(at.columns).length>0,getColumnAt:(at,ht)=>Wt.from(at.columns[ht])},C_=(at,ht=ln)=>{const _t=at.grid,kt=fo(_t.columns,Gt),zt=fo(_t.rows,Gt);return Fn(kt,Ht=>Kx(()=>Vo(zt,no=>Sl.getAt(at,no,Ht).filter(Ro=>Ro.column===Ht).toArray()),no=>no.colspan===1&&ht(no.element),()=>Sl.getAt(at,0,Ht)))},Kx=(at,ht,_t)=>{const kt=at();return Xt(kt,ht).orThunk(()=>Wt.from(kt[0]).orThunk(_t)).map(tn=>tn.element)},Lt=at=>{const ht=at.grid,_t=fo(ht.rows,Gt),kt=fo(ht.columns,Gt);return Fn(_t,zt=>Kx(()=>Vo(kt,An=>Sl.getAt(at,zt,An).filter(no=>no.row===zt).fold(Tt([]),no=>[no])),An=>An.rowspan===1,()=>Sl.getAt(at,zt,0)))},Ut=(at,ht)=>{if(ht<0||ht>=at.length-1)return Wt.none();const _t=at[ht].fold(()=>{const zt=ko(at.slice(0,ht));return Ln(zt,(Ht,tn)=>Ht.map(gn=>({value:gn,delta:tn+1})))},zt=>Wt.some({value:zt,delta:0})),kt=at[ht+1].fold(()=>{const zt=at.slice(ht+1);return Ln(zt,(Ht,tn)=>Ht.map(gn=>({value:gn,delta:tn+1})))},zt=>Wt.some({value:zt,delta:1}));return _t.bind(zt=>kt.map(Ht=>{const tn=Ht.delta+zt.delta;return Math.abs(Ht.value-zt.value)/tn}))},rn=(at,ht)=>_t=>jn(_t)==="rtl"?ht:at,jn=at=>bp(at,"direction")==="rtl"?"rtl":"ltr",lo=tp("height",at=>{const ht=at.dom;return Ls(at)?ht.getBoundingClientRect().height:ht.offsetHeight}),ir=at=>lo.get(at),ks=at=>lo.getOuter(at),Ys=ds,Hs=(at,ht)=>({left:at,top:ht,translate:(kt,zt)=>Hs(at+kt,ht+zt)}),fs=Hs,np=at=>{const ht=at.getBoundingClientRect();return fs(ht.left,ht.top)},Op=(at,ht)=>at!==void 0?at:ht!==void 0?ht:0,n0=at=>{const ht=at.dom.ownerDocument,_t=ht.body,kt=ht.defaultView,zt=ht.documentElement;if(_t===at.dom)return fs(_t.offsetLeft,_t.offsetTop);const Ht=Op(kt==null?void 0:kt.pageYOffset,zt.scrollTop),tn=Op(kt==null?void 0:kt.pageXOffset,zt.scrollLeft),gn=Op(zt.clientTop,_t.clientTop),An=Op(zt.clientLeft,_t.clientLeft);return Vv(at).translate(tn-An,Ht-gn)},Vv=at=>{const ht=at.dom,kt=ht.ownerDocument.body;return kt===ht?fs(kt.offsetLeft,kt.offsetTop):Ls(at)?np(ht):fs(0,0)},sx=(at,ht)=>({row:at,y:ht}),Xw=(at,ht)=>({col:at,x:ht}),_0=at=>n0(at).left+$v(at),Jw=at=>n0(at).left,ZA=(at,ht)=>Xw(at,Jw(ht)),JS=(at,ht)=>Xw(at,_0(ht)),pm=at=>n0(at).top,yC=(at,ht)=>sx(at,pm(ht)),gm=(at,ht)=>sx(at,pm(ht)+ks(ht)),bC=(at,ht,_t)=>{if(_t.length===0)return[];const kt=Fn(_t.slice(1),(Ht,tn)=>Ht.map(gn=>at(tn,gn))),zt=_t[_t.length-1].map(Ht=>ht(_t.length-1,Ht));return kt.concat([zt])},hy=at=>-at,ws={delta:Gt,positions:at=>bC(yC,gm,at),edge:pm},vC=rn({delta:Gt,edge:Jw,positions:at=>bC(ZA,JS,at)},{delta:hy,edge:_0,positions:at=>bC(JS,ZA,at)}),ix={delta:(at,ht)=>vC(ht).delta(at,ht),positions:(at,ht)=>vC(ht).positions(at,ht),edge:at=>vC(at).edge(at)},eE={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},jy=(()=>{const at="[0-9]+",_t="[eE]"+("[+-]?"+at),kt="\\.",zt=gn=>`(?:${gn})?`,tn=`[+-]?(?:${["Infinity",at+kt+zt(at)+zt(_t),kt+at+zt(_t),at+zt(_t)].join("|")})`;return new RegExp(`^(${tn})(.*)$`)})(),Wv=(at,ht)=>cn(ht,_t=>cn(eE[_t],kt=>at===kt)),ax=(at,ht)=>Wt.from(jy.exec(at)).bind(kt=>{const zt=Number(kt[1]),Ht=kt[2];return Wv(Ht,ht)?Wt.some({value:zt,unit:Ht}):Wt.none()}),Fr=/(\d+(\.\d+)?)%/,Hy=/(\d+(\.\d+)?)px|em/,_C=Br("col"),Yx=Br("tr"),Uy=(at,ht,_t)=>{const kt=eu(at).getOrThunk(()=>Yt(rs(at)));return ht(at)/_t(kt)*100},Qw=(at,ht)=>{_i(at,"width",ht+"px")},lx=(at,ht)=>{_i(at,"width",ht+"%")},P1=(at,ht)=>{_i(at,"height",ht+"px")},e2=at=>{cp(at,"height")},fv=at=>Ys(at)+"px",KA=(at,ht,_t,kt)=>{const zt=Jm(at).map(Ht=>{const tn=_t(Ht);return Math.floor(ht/100*tn)}).getOr(ht);return kt(at,zt),zt},hp=(at,ht,_t,kt)=>{const zt=parseFloat(at);return Nm(at,"%")&&Zs(ht)!=="table"?KA(ht,zt,_t,kt):zt},pr=at=>{const ht=fv(at);return ht?hp(ht,at,ir,P1):ir(at)},x0=(at,ht,_t)=>{const kt=_t(at),zt=fm(at,ht);return kt/zt},ux=(at,ht)=>dm(at,ht).orThunk(()=>Vn(at,ht).map(_t=>_t+"px")),Ip=at=>ux(at,"width"),Xx=at=>ux(at,"height"),mm=at=>Uy(at,Xl,rx),tu=at=>_C(at)?Xl(at):qx(at),n2=at=>Yx(at)?ir(at):x0(at,"rowspan",pr),Qo=at=>Ip(at).bind(_t=>ax(_t,["fixed","relative","empty"])),nu=(at,ht,_t)=>{_i(at,"width",ht+_t)},o2=at=>Xl(at)+"px",nm=at=>ir(at)+"px",o0=at=>Uy(at,Xl,rx)+"%",ky=at=>Ip(at).exists(ht=>Fr.test(ht)),tE=at=>Ip(at).exists(ht=>Hy.test(ht)),k_=at=>Ip(at).isNone(),nE=Tt(Fr),gy=Br("col"),Ql=at=>Ip(at).getOrThunk(()=>tu(at)+"px"),qv=at=>Xx(at).getOrThunk(()=>n2(at)+"px"),r2=at=>Fn(Sl.justColumns(at),ht=>Wt.from(ht.element)),om=at=>{const ht=ep().browser,_t=ht.isChromium()||ht.isFirefox();return gy(at)?_t:!0},xC=(at,ht,_t,kt,zt,Ht)=>at.filter(kt).fold(()=>Ht(Ut(_t,ht)),tn=>zt(tn)),hv=(at,ht,_t,kt)=>{const zt=C_(at),Ht=Sl.hasColumns(at)?r2(at):zt,tn=[Wt.some(ix.edge(ht))].concat(Fn(ix.positions(zt,ht),An=>An.map(no=>no.x))),gn=Nt(Ku);return Fn(Ht,(An,no)=>xC(An,no,tn,gn,Ro=>{if(om(Ro))return _t(Ro);{const gr=jx(zt[no],Gt);return xC(gr,no,tn,gn,Nr=>kt(Wt.some(Xl(Nr))),kt)}},kt))},s2=at=>at.map(ht=>ht+"px").getOr(""),ym=(at,ht)=>hv(at,ht,Ql,s2),r0=(at,ht,_t)=>hv(at,ht,mm,kt=>kt.fold(()=>_t.minCellWidth(),zt=>zt/_t.pixelWidth()*100)),So=(at,ht,_t)=>hv(at,ht,tu,kt=>kt.getOrThunk(_t.minCellWidth)),Ru=(at,ht,_t,kt)=>{const zt=Lt(at),Ht=Fn(at.all,gn=>Wt.some(gn.element)),tn=[Wt.some(ws.edge(ht))].concat(Fn(ws.positions(zt,ht),gn=>gn.map(An=>An.y)));return Fn(Ht,(gn,An)=>xC(gn,An,tn,ln,_t,kt))},wC=(at,ht)=>Ru(at,ht,n2,_t=>_t.getOrThunk(p_)),Dp=(at,ht)=>Ru(at,ht,qv,s2),Em=(at,ht)=>()=>Ls(at)?ht(at):parseFloat(dm(at,"width").getOr("0")),sm=at=>{const ht=Em(at,Xl),_t=Tt(0);return{width:ht,pixelWidth:ht,getWidths:(zt,Ht)=>So(zt,at,Ht),getCellDelta:_t,singleColumnWidth:Tt([0]),minCellWidth:_t,setElementWidth:Rt,adjustTableWidth:Rt,isRelative:!0,label:"none"}},Yu=at=>{const ht=Em(at,An=>parseFloat(o0(An))),_t=Em(at,Xl);return{width:ht,pixelWidth:_t,getWidths:(An,no)=>r0(An,at,no),getCellDelta:An=>An/_t()*100,singleColumnWidth:(An,no)=>[100-An],minCellWidth:()=>_y()/_t()*100,setElementWidth:lx,adjustTableWidth:An=>{const no=ht(),Ro=An/100*no,gr=no+Ro;lx(at,gr)},isRelative:!0,label:"percent"}},CC=at=>{const ht=Em(at,Xl);return{width:ht,pixelWidth:ht,getWidths:(tn,gn)=>So(tn,at,gn),getCellDelta:Gt,singleColumnWidth:(tn,gn)=>[Math.max(_y(),tn+gn)-tn],minCellWidth:_y,setElementWidth:Qw,adjustTableWidth:tn=>{const gn=ht()+tn;Qw(at,gn)},isRelative:!1,label:"pixel"}},S_=(at,ht)=>nE().exec(ht)!==null?Yu(at):CC(at),$t={getTableSize:at=>Ip(at).fold(()=>sm(at),_t=>S_(at,_t)),pixelSize:CC,percentageSize:Yu,noneSize:sm},nn=(at,ht,_t,kt,zt,Ht)=>({minRow:at,minCol:ht,maxRow:_t,maxCol:kt,allCells:zt,selectedCells:Ht}),xn=(at,ht)=>{const _t=at.grid.columns;let zt=at.grid.rows,Ht=_t,tn=0,gn=0;const An=[],no=[];return Wn(at.access,Ro=>{if(An.push(Ro),ht(Ro)){no.push(Ro);const gr=Ro.row,Nr=gr+Ro.rowspan-1,Rr=Ro.column,Cr=Rr+Ro.colspan-1;gr<zt?zt=gr:Nr>tn&&(tn=Nr),Rr<Ht?Ht=Rr:Cr>gn&&(gn=Cr)}}),nn(zt,Ht,tn,gn,An,no)},uo=(at,ht,_t)=>{const kt=at[_t].element,zt=io.fromTag("td");Tu(zt,io.fromTag("br")),(ht?Tu:gp)(kt,zt)},Xo=(at,ht,_t,kt)=>{const zt=oo(at,gn=>gn.section!=="colgroup"),Ht=ht.grid.columns,tn=ht.grid.rows;for(let gn=0;gn<tn;gn++){let An=!1;for(let no=0;no<Ht;no++)gn<_t.minRow||gn>_t.maxRow||no<_t.minCol||no>_t.maxCol||(Sl.getAt(ht,gn,no).filter(kt).isNone()?uo(zt,An,gn):An=!0)}},vr=(at,ht,_t,kt)=>{Wn(_t.columns,tn=>{(tn.column<ht.minCol||tn.column>ht.maxCol)&&mp(tn.element)});const zt=oo(av(at,"tr"),tn=>tn.dom.childElementCount===0);Tn(zt,mp),(ht.minCol===ht.maxCol||ht.minRow===ht.maxRow)&&Tn(av(at,"th,td"),tn=>{$n(tn,"rowspan"),$n(tn,"colspan")}),$n(at,M1),$n(at,"data-snooker-col-series"),$t.getTableSize(at).adjustTableWidth(kt)},Jr=(at,ht,_t,kt)=>{if(kt.minCol===0&&ht.grid.columns===kt.maxCol+1)return 0;const zt=So(ht,at,_t),Ht=Dn(zt,(no,Ro)=>no+Ro,0),An=Dn(zt.slice(kt.minCol,kt.maxCol+1),(no,Ro)=>no+Ro,0)/Ht*_t.pixelWidth()-_t.pixelWidth();return _t.getCellDelta(An)},Ns=(at,ht)=>{const _t=Nr=>Bs(Nr.element,ht),kt=Ym(at),zt=Ux(kt),Ht=$t.getTableSize(at),tn=Sl.generate(zt),gn=xn(tn,_t),An="th:not("+ht+"),td:not("+ht+")",no=w1(kt,"th,td",Nr=>Bs(Nr,An));Tn(no,mp),Xo(zt,tn,gn,_t);const Ro=Sl.fromTable(at),gr=Jr(at,Ro,Ht,gn);return vr(kt,gn,tn,gr),kt},Qs="",cu=((at,ht)=>{const _t=Ht=>{if(!at(Ht))throw new Error("Can only get "+ht+" value of a "+ht+" node");return kt(Ht).getOr("")},kt=Ht=>at(Ht)?Wt.from(Ht.dom.nodeValue):Wt.none();return{get:_t,getOption:kt,set:(Ht,tn)=>{if(!at(Ht))throw new Error("Can only set raw "+ht+" value of a "+ht+" node");Ht.dom.nodeValue=tn}}})(mo,"text"),op=at=>cu.get(at),L0=at=>cu.getOption(at),Sy=(at,ht)=>cu.set(at,ht),Bm=at=>Zs(at)==="img"?1:L0(at).fold(()=>Cs(at).length,ht=>ht.length),Zv=at=>L0(at).filter(ht=>ht.trim().length!==0||ht.indexOf(Qs)>-1).isSome(),O1=at=>es(at)&&Mu(at,"contenteditable")==="false",D1=["img","br"],E_=at=>Zv(at)||Hn(D1,Zs(at))||O1(at),Jx=at=>Z0(at,E_),i2=at=>kC(at,E_),kC=(at,ht)=>{const _t=kt=>{const zt=Cs(kt);for(let Ht=zt.length-1;Ht>=0;Ht--){const tn=zt[Ht];if(ht(tn))return Wt.some(tn);const gn=_t(tn);if(gn.isSome())return gn}return Wt.none()};return _t(at)},Zp={scope:["row","col"]},pv=at=>()=>{const ht=io.fromTag("td",at.dom);return Tu(ht,io.fromTag("br",at.dom)),ht},A_=at=>()=>io.fromTag("col",at.dom),Wl=at=>()=>io.fromTag("colgroup",at.dom),ip=at=>()=>io.fromTag("tr",at.dom),vp=(at,ht,_t)=>{const kt=by(at,ht);return Wn(_t,(zt,Ht)=>{zt===null?$n(kt,Ht):_l(kt,Ht,zt)}),kt},w0=at=>at,SC=(at,ht,_t)=>Jx(at).map(zt=>{const Ht=_t.join(","),tn=Jo(zt,Ht,gn=>ur(gn,at));return Mo(tn,(gn,An)=>{const no=_g(An);return Tu(gn,no),no},ht)}).getOr(ht),EC=(at,ht)=>{Wn(Zp,(_t,kt)=>Vn(at,kt).filter(zt=>Hn(_t,zt)).each(zt=>_l(ht,kt,zt)))},J0=(at,ht,_t)=>{const kt=(tn,gn)=>{up(tn.element,gn),cp(gn,"height"),tn.colspan!==1&&cp(gn,"width")},zt=tn=>{const gn=io.fromTag(Zs(tn.element),ht.dom),An=_t.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),no=An.length>0?SC(tn.element,gn,An):gn;return Tu(no,io.fromTag("br")),kt(tn,gn),EC(tn.element,gn),at(tn.element,gn),gn};return{col:tn=>{const gn=io.fromTag(Zs(tn.element),ht.dom);return kt(tn,gn),at(tn.element,gn),gn},colgroup:Wl(ht),row:ip(ht),cell:zt,replace:vp,colGap:A_(ht),gap:pv(ht)}},Q0=at=>({col:A_(at),colgroup:Wl(at),row:ip(at),cell:pv(at),replace:w0,colGap:A_(at),gap:pv(at)}),H4=(at,ht)=>{const kt=document.createElement("div");return kt.innerHTML=at,Cs(io.fromDom(kt))},gv=at=>Fn(at,io.fromDom),a2=at=>ht=>ht.options.get(at),N1="100%",T_=at=>{var ht;const _t=at.dom,kt=(ht=_t.getParent(at.selection.getStart(),_t.isBlock))!==null&&ht!==void 0?ht:at.getBody();return rx(io.fromDom(kt))+"px"},l2=(at,ht)=>ew(at)||!tw(at)?ht:s0(at)?{...ht,width:T_(at)}:{...ht,width:N1},iL=(at,ht)=>ew(at)||tw(at)?ht:s0(at)?{...ht,width:T_(at)}:{...ht,width:N1},oE=at=>{const ht=at.options.register;ht("table_clone_elements",{processor:"string[]"}),ht("table_use_colgroups",{processor:"boolean",default:!0}),ht("table_header_type",{processor:_t=>{const kt=Hn(["section","cells","sectionCells","auto"],_t);return kt?{value:_t,valid:kt}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),ht("table_sizing_mode",{processor:"string",default:"auto"}),ht("table_default_attributes",{processor:"object",default:{border:"1"}}),ht("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),ht("table_column_resizing",{processor:_t=>{const kt=Hn(["preservetable","resizetable"],_t);return kt?{value:_t,valid:kt}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),ht("table_resize_bars",{processor:"boolean",default:!0}),ht("table_style_by_css",{processor:"boolean",default:!0}),ht("table_merge_content_on_paste",{processor:"boolean",default:!0})},Qx=at=>Wt.from(at.options.get("table_clone_elements")),aL=at=>{const ht=at.options.get("object_resizing");return Hn(ht.split(","),"table")},Up=a2("table_header_type"),YA=a2("table_column_resizing"),L1=at=>YA(at)==="preservetable",c2=at=>YA(at)==="resizetable",rE=a2("table_sizing_mode"),F1=at=>rE(at)==="relative",s0=at=>rE(at)==="fixed",ew=at=>rE(at)==="responsive",XA=a2("table_resize_bars"),tw=a2("table_style_by_css"),$m=a2("table_merge_content_on_paste"),JA=at=>{const ht=at.options,_t=ht.get("table_default_attributes");return ht.isSet("table_default_attributes")?_t:iL(at,_t)},QA=at=>{const ht=at.options,_t=ht.get("table_default_styles");return ht.isSet("table_default_styles")?_t:l2(at,_t)},lL=a2("table_use_colgroups"),U4=at=>Tp(at,"[contenteditable]"),nw=(at,ht=!1)=>Ls(at)?at.dom.isContentEditable:U4(at).fold(Tt(ht),_t=>u2(_t)==="true"),u2=at=>at.dom.contentEditable,my=at=>io.fromDom(at.getBody()),Vy=at=>ht=>ur(ht,my(at)),Wy=at=>{$n(at,"data-mce-style");const ht=_t=>$n(_t,"data-mce-style");Tn(Nv(at),ht),Tn(O0(at),ht),Tn(Hw(at),ht)},sE=at=>io.fromDom(at.selection.getStart()),iE=at=>at.getBoundingClientRect().width,AC=at=>at.getBoundingClientRect().height,w3=at=>(ht,_t)=>{const kt=ht.dom.getStyle(_t,at)||ht.dom.getAttrib(_t,at);return Wt.from(kt).filter(En)},V4=w3("width"),W4=w3("height"),C3=at=>/^(\d+(\.\d+)?)%$/.test(at),TC=at=>/^(\d+(\.\d+)?)px$/.test(at),El=at=>gu(at,Br("table")).exists(nw),ls=(at,ht)=>{const _t=ht.column,kt=ht.column+ht.colspan-1,zt=ht.row,Ht=ht.row+ht.rowspan-1;return _t<=at.finishCol&&kt>=at.startCol&&zt<=at.finishRow&&Ht>=at.startRow},ow=(at,ht)=>ht.column>=at.startCol&&ht.column+ht.colspan-1<=at.finishCol&&ht.row>=at.startRow&&ht.row+ht.rowspan-1<=at.finishRow,eT=(at,ht)=>{let _t=!0;const kt=qt(ow,ht);for(let zt=ht.startRow;zt<=ht.finishRow;zt++)for(let Ht=ht.startCol;Ht<=ht.finishCol;Ht++)_t=_t&&Sl.getAt(at,zt,Ht).exists(kt);return _t?Wt.some(ht):Wt.none()},tT=(at,ht)=>By(Math.min(at.row,ht.row),Math.min(at.column,ht.column),Math.max(at.row+at.rowspan-1,ht.row+ht.rowspan-1),Math.max(at.column+at.colspan-1,ht.column+ht.colspan-1)),k3=(at,ht,_t)=>{const kt=Sl.findItem(at,ht,ur),zt=Sl.findItem(at,_t,ur);return kt.bind(Ht=>zt.map(tn=>tT(Ht,tn)))},nT=(at,ht,_t)=>k3(at,ht,_t).bind(kt=>eT(at,kt)),xu=(at,ht,_t,kt)=>Sl.findItem(at,ht,ur).bind(zt=>{const Ht=_t>0?zt.row+zt.rowspan-1:zt.row,tn=kt>0?zt.column+zt.colspan-1:zt.column;return Sl.getAt(at,Ht+_t,tn+kt).map(An=>An.element)}),S3=(at,ht,_t)=>k3(at,ht,_t).map(kt=>{const zt=Sl.filterItems(at,qt(ls,kt));return Fn(zt,Ht=>Ht.element)}),q4=(at,ht)=>{const _t=(kt,zt)=>Pr(zt,kt);return Sl.findItem(at,ht,_t).map(kt=>kt.element)},E3=(at,ht,_t)=>Jm(at).bind(kt=>{const zt=d2(kt);return xu(zt,at,ht,_t)}),er=(at,ht,_t)=>{const kt=d2(at);return S3(kt,ht,_t)},IC=(at,ht,_t,kt,zt)=>{const Ht=d2(at),tn=ur(at,_t)?Wt.some(ht):q4(Ht,ht),gn=ur(at,zt)?Wt.some(kt):q4(Ht,kt);return tn.bind(An=>gn.bind(no=>S3(Ht,An,no)))},Z4=(at,ht,_t)=>{const kt=d2(at);return nT(kt,ht,_t)},d2=Sl.fromTable;var K4=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],dx=()=>{const at=no=>io.fromDom(no.dom.cloneNode(!1)),ht=no=>Wr(no).dom,_t=no=>yl(no)?Zs(no)==="body"?!0:Hn(K4,Zs(no)):!1,kt=no=>yl(no)?Hn(["br","img","hr","input"],Zs(no)):!1,zt=no=>yl(no)&&Mu(no,"contenteditable")==="false",Ht=(no,Ro)=>no.dom.compareDocumentPosition(Ro.dom),tn=(no,Ro)=>{const gr=Po(no);Wu(Ro,gr)},gn=no=>{const Ro=Zs(no);return Hn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Ro)},An=no=>yl(no)?Vn(no,"lang"):Wt.none();return{up:Tt({selector:js,closest:Tp,predicate:dr,all:pu}),down:Tt({selector:Jl,predicate:Ao}),styles:Tt({get:bp,getRaw:dm,set:_i,remove:cp}),attrs:Tt({get:Mu,set:_l,remove:$n,copyTo:tn}),insert:Tt({before:Ep,after:Ap,afterAll:Yl,append:Tu,appendAll:zp,prepend:gp,wrap:Km}),remove:Tt({unwrap:ly,remove:mp}),create:Tt({nu:io.fromTag,clone:at,text:io.fromText}),query:Tt({comparePosition:Ht,prevSibling:Qp,nextSibling:cm}),property:Tt({children:Cs,name:Zs,parent:Bl,document:ht,isText:mo,isComment:$a,isElement:yl,isSpecial:gn,getLanguage:An,getText:op,setText:Sy,isBoundary:_t,isEmptyTag:kt,isNonEditable:zt}),eq:ur,is:ns}};const oT=(at,ht,_t,kt)=>{const zt=_t[0],Ht=_t.slice(1);return kt(at,ht,zt,Ht)},f2=(at,ht,_t)=>_t.length>0?oT(at,ht,_t,aE):Wt.none(),aE=(at,ht,_t,kt)=>{const zt=ht(at,_t);return Mo(kt,(Ht,tn)=>{const gn=ht(at,tn);return rw(at,Ht,gn)},zt)},rw=(at,ht,_t)=>ht.bind(kt=>_t.filter(qt(at.eq,kt))),rp=(at,ht)=>qt(at.eq,ht),I_=(at,ht,_t,kt=Mn)=>{const zt=[ht].concat(at.up().all(ht)),Ht=[_t].concat(at.up().all(_t)),tn=Ro=>Ur(Ro,kt).fold(()=>Ro,Nr=>Ro.slice(0,Nr+1)),gn=tn(zt),An=tn(Ht),no=Xt(gn,Ro=>cn(An,rp(at,Ro)));return{firstpath:gn,secondpath:An,shared:no}},Y4=f2,fx=I_,T3=dx(),h2=(at,ht)=>Y4(T3,(_t,kt)=>at(kt),ht),I3=(at,ht,_t)=>fx(T3,at,ht,_t),R3=at=>js(at,"table"),ey=(at,ht,_t)=>{const kt=zt=>Ht=>_t!==void 0&&_t(Ht)||ur(Ht,zt);return ur(at,ht)?Wt.some({boxes:Wt.some([at]),start:at,finish:ht}):R3(at).bind(zt=>R3(ht).bind(Ht=>{if(ur(zt,Ht))return Wt.some({boxes:er(zt,at,ht),start:at,finish:ht});if(Pr(zt,Ht)){const tn=Jo(ht,"td,th",kt(zt)),gn=tn.length>0?tn[tn.length-1]:ht;return Wt.some({boxes:IC(zt,at,zt,ht,Ht),start:at,finish:gn})}else if(Pr(Ht,zt)){const tn=Jo(at,"td,th",kt(Ht)),gn=tn.length>0?tn[tn.length-1]:at;return Wt.some({boxes:IC(Ht,at,zt,ht,Ht),start:at,finish:gn})}else return I3(at,ht).shared.bind(tn=>Tp(tn,"table",_t).bind(gn=>{const An=Jo(ht,"td,th",kt(gn)),no=An.length>0?An[An.length-1]:ht,Ro=Jo(at,"td,th",kt(gn)),gr=Ro.length>0?Ro[Ro.length-1]:at;return Wt.some({boxes:IC(gn,at,zt,ht,Ht),start:gr,finish:no})}))}))},RC=(at,ht)=>{const _t=Jl(at,ht);return _t.length>0?Wt.some(_t):Wt.none()},cL=(at,ht)=>Xt(at,_t=>Bs(_t,ht)),sw=(at,ht,_t)=>m0(at,ht).bind(kt=>m0(at,_t).bind(zt=>h2(R3,[kt,zt]).map(Ht=>({first:kt,last:zt,table:Ht})))),uL=(at,ht)=>js(at,"table").bind(_t=>m0(_t,ht).bind(kt=>ey(kt,at).bind(zt=>zt.boxes.map(Ht=>({boxes:Ht,start:zt.start,finish:zt.finish}))))),g2=(at,ht,_t,kt,zt)=>cL(at,zt).bind(Ht=>E3(Ht,ht,_t).bind(tn=>uL(tn,kt))),rT=(at,ht)=>RC(at,ht),dL=(at,ht,_t)=>sw(at,ht,_t).bind(kt=>{const zt=An=>ur(at,An),Ht="thead,tfoot,tbody,table",tn=js(kt.first,Ht,zt),gn=js(kt.last,Ht,zt);return tn.bind(An=>gn.bind(no=>ur(An,no)?Z4(kt.table,kt.first,kt.last):Wt.none()))}),lE=Gt,z1=at=>{const ht=(kt,zt)=>Vn(kt,zt).exists(Ht=>parseInt(Ht,10)>1),_t=kt=>ht(kt,"rowspan")||ht(kt,"colspan");return at.length>0&&yo(at,_t)?Wt.some(at):Wt.none()},F0=(at,ht,_t)=>ht.length<=1?Wt.none():dL(at,_t.firstSelectedSelector,_t.lastSelectedSelector).map(kt=>({bounds:kt,cells:ht})),yr="data-mce-selected",MC="td["+yr+"],th["+yr+"]",Gm="["+yr+"]",M3="data-mce-first-selected",P3="td["+M3+"],th["+M3+"]",O3="data-mce-last-selected",Uu="td["+O3+"],th["+O3+"]",fL=Gm,m2={selected:yr,selectedSelector:MC,firstSelected:M3,firstSelectedSelector:P3,lastSelected:O3,lastSelectedSelector:Uu},hx=(at,ht,_t)=>({element:_t,mergable:F0(ht,at,m2),unmergable:z1(at),selection:lE(at)}),PC=(at,ht,_t)=>({element:at,clipboard:ht,generators:_t}),D3=(at,ht,_t,kt)=>({selection:lE(at),clipboard:_t,generators:kt}),R_=at=>Jm(at).bind(ht=>rT(ht,m2.firstSelectedSelector)).fold(Tt(at),ht=>ht[0]),X4=at=>(ht,_t)=>{const kt=Zs(ht),zt=kt==="col"||kt==="colgroup"?R_(ht):ht;return Tp(zt,at,_t)},Kp=X4("th,td,caption"),sT=X4("th,td"),wu=at=>gv(at.model.table.getSelectedCells()),N3=at=>oo(wu(at),ht=>Bs(ht,m2.selectedSelector)),ty=at=>Jm(at[0]).map(ht=>{const _t=Ns(ht,fL);return Wy(_t),[_t]}),OC=(at,ht)=>Fn(ht,_t=>at.selection.serializer.serialize(_t.dom,{})).join(""),B1=(at,ht)=>{const _t=at.getDoc(),kt=ho(io.fromDom(at.getBody())),zt=io.fromTag("div",_t);_l(zt,"data-mce-bogus","all"),vu(zt,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const Ht=qo(kt);zp(zt,ht),Tu(Ht,zt);const tn=zt.dom.innerText;return mp(zt),tn},sB=(at,ht)=>{at.on("BeforeGetContent",_t=>{const kt=zt=>{_t.preventDefault(),ty(zt).each(Ht=>{const tn=_t.format==="text"?B1(at,Ht):OC(at,Ht);_t.content=tn})};if(_t.selection===!0){const zt=N3(at);zt.length>=1&&kt(zt)}}),at.on("BeforeSetContent",_t=>{if(_t.selection===!0&&_t.paste===!0){const kt=wu(at);sn(kt).each(zt=>{Jm(zt).each(Ht=>{const tn=oo(H4(_t.content),An=>Zs(An)!=="meta"),gn=Br("table");if($m(at)&&tn.length===1&&gn(tn[0])){_t.preventDefault();const An=io.fromDom(at.getDoc()),no=Q0(An),Ro=PC(zt,tn[0],no);ht.pasteCells(Ht,Ro).each(()=>{at.focus()})}})})}})},iT=(at,ht)=>({element:at,offset:ht}),hL=(at,ht,_t)=>at.property().isText(ht)&&at.property().getText(ht).trim().length===0||at.property().isComment(ht)?_t(ht).bind(kt=>hL(at,kt,_t).orThunk(()=>Wt.some(kt))):Wt.none(),J4=(at,ht)=>at.property().isText(ht)?at.property().getText(ht).length:at.property().children(ht).length,Kv=(at,ht)=>{const _t=hL(at,ht,at.query().prevSibling).getOr(ht);if(at.property().isText(_t))return iT(_t,J4(at,_t));const kt=at.property().children(_t);return kt.length>0?Kv(at,kt[kt.length-1]):iT(_t,J4(at,_t))},$1=Kv,z0=dx(),DC=at=>$1(z0,at),aT=(at,ht)=>{Ku(at)||Qo(at).each(kt=>{const zt=kt.value/2;nu(at,zt,kt.unit),nu(ht,zt,kt.unit)})},lT=at=>Fn(at,Tt(0)),NC=(at,ht,_t,kt,zt)=>zt(at.slice(0,ht)).concat(kt).concat(zt(at.slice(_t))),iw=at=>(ht,_t,kt,zt)=>{if(at(kt)){const Ht=Math.max(zt,ht[_t]-Math.abs(kt)),tn=Math.abs(Ht-ht[_t]);return kt>=0?tn:-tn}else return kt},M_=iw(at=>at<0),LC=iw(ln),aw=()=>{const at=(gn,An,no,Ro,gr)=>{const Nr=M_(gn,An,Ro,gr);return NC(gn,An,no+1,[Nr,0],lT)},ht=(gn,An,no,Ro)=>{const gr=(100+no)/100,Nr=Math.max(Ro,(gn[An]+no)/gr);return Fn(gn,(Rr,Cr)=>(Cr===An?Nr:Rr/gr)-Rr)},_t=(gn,An,no,Ro,gr,Nr)=>Nr?ht(gn,An,Ro,gr):at(gn,An,no,Ro,gr);return{resizeTable:(gn,An)=>gn(An),clampTableDelta:M_,calcLeftEdgeDeltas:_t,calcMiddleDeltas:(gn,An,no,Ro,gr,Nr,Rr)=>_t(gn,no,Ro,gr,Nr,Rr),calcRightEdgeDeltas:(gn,An,no,Ro,gr,Nr)=>{if(Nr)return ht(gn,no,Ro,gr);{const Rr=M_(gn,no,Ro,gr);return lT(gn.slice(0,no)).concat([Rr])}},calcRedestributedWidths:(gn,An,no,Ro)=>{if(Ro){const Nr=(An+no)/An,Rr=Fn(gn,Cr=>Cr/Nr);return{delta:Nr*100-100,newSizes:Rr}}else return{delta:no,newSizes:gn}}}},px=()=>{const at=(tn,gn,An,no,Ro)=>{const gr=no>=0?An:gn,Nr=LC(tn,gr,no,Ro);return NC(tn,gn,An+1,[Nr,-Nr],lT)};return{resizeTable:(tn,gn,An)=>{An&&tn(gn)},clampTableDelta:(tn,gn,An,no,Ro)=>{if(Ro){if(An>=0)return An;{const gr=Dn(tn,(Nr,Rr)=>Nr+Rr-no,0);return Math.max(-gr,An)}}else return M_(tn,gn,An,no)},calcLeftEdgeDeltas:at,calcMiddleDeltas:(tn,gn,An,no,Ro,gr)=>at(tn,An,no,Ro,gr),calcRightEdgeDeltas:(tn,gn,An,no,Ro,gr)=>{if(gr)return lT(tn);{const Nr=no/tn.length;return Fn(tn,Tt(Nr))}},calcRedestributedWidths:(tn,gn,An,no)=>({delta:0,newSizes:tn})}},y2=at=>Sl.fromTable(at).grid,cE=Br("th"),cT=at=>yo(at,ht=>cE(ht.element)),Q4=(at,ht)=>at&&ht?"sectionCells":at?"section":"cells",L3=at=>{const ht=at.section==="thead",_t=mu(FC(at.cells),"th");return at.section==="tfoot"?{type:"footer"}:ht||_t?{type:"header",subType:Q4(ht,_t)}:{type:"body"}},FC=at=>{const ht=oo(at,_t=>cE(_t.element));return ht.length===0?Wt.some("td"):ht.length===at.length?Wt.some("th"):Wt.none()},eM=at=>{const ht=Fn(at,zt=>L3(zt).type),_t=Hn(ht,"header"),kt=Hn(ht,"footer");if(!_t&&!kt)return Wt.some("body");{const zt=Hn(ht,"body");return _t&&!zt&&!kt?Wt.some("header"):!_t&&!zt&&kt?Wt.some("footer"):Wt.none()}},pL=at=>Ln(at.all,ht=>{const _t=L3(ht);return _t.type==="header"?Wt.from(_t.subType):Wt.none()}),uT=(at,ht,_t)=>$p(_t(at.element,ht),!0,at.isLocked),F3=(at,ht)=>at.section!==ht?em(at.element,at.cells,ht,at.isNew):at,uE=()=>({transformRow:F3,transformCell:(at,ht,_t)=>{const kt=_t(at.element,ht),zt=Zs(kt)!=="td"?vy(kt,"td"):kt;return $p(zt,at.isNew,at.isLocked)}}),z3=()=>({transformRow:F3,transformCell:uT}),zC=()=>({transformRow:(at,ht)=>F3(at,ht==="thead"?"tbody":ht),transformCell:uT}),BC={getTableSectionType:(at,ht)=>{const _t=Sl.fromTable(at);switch(pL(_t).getOr(ht)){case"section":return uE();case"sectionCells":return z3();case"cells":return zC()}},section:uE,sectionCells:z3,cells:zC,fallback:()=>({transformRow:Gt,transformCell:uT})},Yv=(at,ht,_t,kt)=>{_t===kt?$n(at,ht):_l(at,ht,_t)},dE=(at,ht,_t)=>{kn(Xs(at,ht)).fold(()=>gp(at,_t),kt=>Ap(kt,_t))},tM=(at,ht)=>{const _t=Xm(at,ht).getOrThunk(()=>{const kt=io.fromTag(ht,rs(at).dom);return ht==="thead"?dE(at,"caption,colgroup",kt):ht==="colgroup"?dE(at,"caption",kt):Tu(at,kt),kt});return Bp(_t),_t},nM=(at,ht)=>{const _t=[],kt=[],zt=Rr=>Fn(Rr,Cr=>{Cr.isNew&&_t.push(Cr.element);const ss=Cr.element;return Bp(ss),Tn(Cr.cells,cr=>{cr.isNew&&kt.push(cr.element),Yv(cr.element,"colspan",cr.colspan,1),Yv(cr.element,"rowspan",cr.rowspan,1),Tu(ss,cr.element)}),ss}),Ht=Rr=>Vo(Rr,Cr=>Fn(Cr.cells,ss=>(Yv(ss.element,"span",ss.colspan,1),ss.element))),tn=(Rr,Cr)=>{const ss=tM(at,Cr),kr=(Cr==="colgroup"?Ht:zt)(Rr);zp(ss,kr)},gn=Rr=>{Xm(at,Rr).each(mp)},An=(Rr,Cr)=>{Rr.length>0?tn(Rr,Cr):gn(Cr)},no=[],Ro=[],gr=[],Nr=[];return Tn(ht,Rr=>{switch(Rr.section){case"thead":no.push(Rr);break;case"tbody":Ro.push(Rr);break;case"tfoot":gr.push(Rr);break;case"colgroup":Nr.push(Rr);break}}),An(Nr,"colgroup"),An(no,"thead"),An(Ro,"tbody"),An(gr,"tfoot"),{newRows:_t,newCells:kt}},oM=at=>Fn(at,ht=>{const _t=_g(ht.element);return Tn(ht.cells,kt=>{const zt=Ym(kt.element);Yv(zt,"colspan",kt.colspan,1),Yv(zt,"rowspan",kt.rowspan,1),Tu(_t,zt)}),_t}),b2=(at,ht)=>Fn(at,_t=>N0(_t,ht)),lB=(at,ht)=>at[ht],v2=(at,ht)=>{if(at.length===0)return 0;const _t=at[0];return Ur(at,zt=>!ht(_t.element,zt.element)).getOr(at.length)},$C=(at,ht,_t,kt)=>{const zt=lB(at,ht),Ht=zt.section==="colgroup",tn=v2(zt.cells.slice(_t),kt),gn=Ht?1:v2(b2(at.slice(ht),_t),kt);return{colspan:tn,rowspan:gn}},rM=(at,ht)=>{const _t=Fn(at,zt=>Fn(zt.cells,Mn)),kt=(zt,Ht,tn,gn)=>{for(let An=zt;An<zt+tn;An++)for(let no=Ht;no<Ht+gn;no++)_t[An][no]=!0};return Fn(at,(zt,Ht)=>{const tn=Vo(zt.cells,(gn,An)=>{if(_t[Ht][An]===!1){const no=$C(at,Ht,An,ht);return kt(Ht,An,no.rowspan,no.colspan),[zy(gn.element,no.rowspan,no.colspan,gn.isNew)]}else return[]});return Dm(zt.element,tn,zt.section,zt.isNew)})},GC=(at,ht,_t)=>{const kt=[];Tn(at.colgroups,zt=>{const Ht=[];for(let tn=0;tn<at.grid.columns;tn++){const gn=Sl.getColumnAt(at,tn).map(An=>$p(An.element,_t,!1)).getOrThunk(()=>$p(ht.colGap(),!0,!1));Ht.push(gn)}kt.push(em(zt.element,Ht,"colgroup",_t))});for(let zt=0;zt<at.grid.rows;zt++){const Ht=[];for(let An=0;An<at.grid.columns;An++){const no=Sl.getAt(at,zt,An).map(Ro=>$p(Ro.element,_t,Ro.isLocked)).getOrThunk(()=>$p(ht.gap(),!0,!1));Ht.push(no)}const tn=at.all[zt],gn=em(tn.element,Ht,tn.section,_t);kt.push(gn)}return kt},gL=(at,ht)=>GC(at,ht,!1),B3=at=>rM(at,ur),sM=(at,ht)=>Ln(at.all,_t=>Xt(_t.cells,kt=>ur(ht,kt.element))),iM=(at,ht,_t)=>{const kt=Fn(ht.selection,Ht=>Dv(Ht).bind(tn=>sM(at,tn)).filter(_t)),zt=K0(kt);return h_(zt.length>0,zt)},u0=(at,ht,_t,kt,zt)=>(Ht,tn,gn,An)=>{const no=Sl.fromTable(Ht),Ro=Wt.from(An==null?void 0:An.section).getOrThunk(BC.fallback);return ht(no,tn).map(Nr=>{const Rr=gL(no,gn),Cr=at(Rr,Nr,ur,zt(gn),Ro),ss=wy(Cr.grid),cr=B3(Cr.grid);return{info:Nr,grid:cr,cursor:Cr.cursor,lockedColumns:ss}}).bind(Nr=>{const Rr=nM(Ht,Nr.grid),Cr=Wt.from(An==null?void 0:An.sizing).getOrThunk(()=>$t.getTableSize(Ht)),ss=Wt.from(An==null?void 0:An.resize).getOrThunk(px);return _t(Ht,Nr.grid,Nr.info,{sizing:Cr,resize:ss,section:Ro}),kt(Ht),$n(Ht,M1),Nr.lockedColumns.length>0&&_l(Ht,M1,Nr.lockedColumns.join(",")),Wt.some({cursor:Nr.cursor,newRows:Rr.newRows,newCells:Rr.newCells})})},cB=(at,ht)=>Dv(ht.element).bind(_t=>sM(at,_t).map(kt=>({...kt,generators:ht.generators,clipboard:ht.clipboard}))),lw=(at,ht)=>iM(at,ht,ln).map(_t=>({cells:_t,generators:ht.generators,clipboard:ht.clipboard})),mL=(at,ht)=>ht.mergable,gx=(at,ht)=>ht.unmergable,Ey=(at,ht)=>iM(at,ht,ln),G1=(at,ht)=>iM(at,ht,_t=>!_t.isLocked),_2=(at,ht)=>sM(at,ht).exists(_t=>!_t.isLocked),aM=(at,ht)=>yo(ht,_t=>_2(at,_t)),fE=(at,ht)=>mL(at,ht).filter(_t=>aM(at,_t.cells)),dT=(at,ht)=>gx(at,ht).filter(_t=>aM(at,_t)),cw=(at,ht,_t,kt)=>{const zt=Iu(at).rows;if(zt.length===0)return at;for(let Ht=ht.startRow;Ht<=ht.finishRow;Ht++)for(let tn=ht.startCol;tn<=ht.finishCol;tn++){const gn=zt[Ht],An=N0(gn,tn).isLocked;wp(gn,tn,$p(kt(),!1,An))}return at},$3=(at,ht,_t,kt)=>{const zt=Iu(at).rows;let Ht=!0;for(let tn=0;tn<zt.length;tn++)for(let gn=0;gn<X0(zt[0]);gn++){const An=zt[tn],no=N0(An,gn),Ro=no.element,gr=_t(Ro,ht);gr&&!Ht?wp(An,gn,$p(kt(),!0,no.isLocked)):gr&&(Ht=!1)}return at},j1=(at,ht)=>Dn(at,(_t,kt)=>cn(_t,zt=>ht(zt.element,kt.element))?_t:_t.concat([kt]),[]),P_=(at,ht,_t,kt)=>(ht>0&&ht<at[0].cells.length&&Tn(at,zt=>{const Ht=zt.cells[ht-1];let tn=0;const gn=kt();for(;zt.cells.length>ht+tn&&_t(Ht.element,zt.cells[ht+tn].element);)wp(zt,ht+tn,$p(gn,!0,zt.cells[ht+tn].isLocked)),tn++}),at),yL=(at,ht,_t,kt)=>{const zt=Iu(at).rows;if(ht>0&&ht<zt.length){const Ht=zt[ht-1].cells,tn=j1(Ht,_t);Tn(tn,gn=>{let An=Wt.none();for(let no=ht;no<zt.length;no++)for(let Ro=0;Ro<X0(zt[0]);Ro++){const gr=zt[no],Nr=N0(gr,Ro);_t(Nr.element,gn.element)&&(An.isNone()&&(An=Wt.some(kt())),An.each(Cr=>{wp(gr,Ro,$p(Cr,!0,Nr.isLocked))}))}})}return at},Am=at=>{const ht=Ht=>Ht(at),_t=Tt(at),kt=()=>zt,zt={tag:!0,inner:at,fold:(Ht,tn)=>tn(at),isValue:ln,isError:Mn,map:Ht=>fT.value(Ht(at)),mapError:kt,bind:ht,exists:ht,forall:ht,getOr:_t,or:kt,getOrThunk:_t,orThunk:kt,getOrDie:_t,each:Ht=>{Ht(at)},toOptional:()=>Wt.some(at)};return zt},hE=at=>{const ht=()=>_t,_t={tag:!1,inner:at,fold:(kt,zt)=>kt(at),isValue:Mn,isError:ln,map:ht,mapError:kt=>fT.error(kt(at)),bind:ht,exists:Mn,forall:ln,getOr:Gt,or:Gt,getOrThunk:fn,orThunk:fn,getOrDie:Qt(String(at)),each:Rt,toOptional:Wt.none};return _t},fT={value:Am,error:hE,fromOption:(at,ht)=>at.fold(()=>hE(ht),Am)},G3=(at,ht,_t)=>{if(at.row>=ht.length||at.column>X0(ht[0]))return fT.error("invalid start address out of table bounds, row: "+at.row+", column: "+at.column);const kt=ht.slice(at.row),zt=kt[0].cells.slice(at.column),Ht=X0(_t[0]),tn=_t.length;return fT.value({rowDelta:kt.length-tn,colDelta:zt.length-Ht})},x2=(at,ht)=>{const _t=X0(at[0]),kt=X0(ht[0]);return{rowDelta:0,colDelta:_t-kt}},uw=(at,ht)=>{const _t=at.length,kt=ht.length;return{rowDelta:_t-kt,colDelta:0}},Xv=(at,ht,_t,kt)=>{const zt=ht.section==="colgroup"?_t.col:_t.cell;return fo(at,Ht=>$p(zt(),!0,kt(Ht)))},yv=(at,ht,_t,kt)=>{const zt=at[at.length-1];return at.concat(fo(ht,()=>{const Ht=zt.section==="colgroup"?_t.colgroup:_t.row,tn=fy(zt,Ht,Gt),gn=Xv(tn.cells.length,tn,_t,An=>ar(kt,An.toString()));return Gv(tn,gn)}))},lM=(at,ht,_t,kt)=>Fn(at,zt=>{const Ht=Xv(ht,zt,_t,Mn);return Yw(zt,kt,Ht)}),bL=(at,ht,_t)=>Fn(at,kt=>Dn(_t,(zt,Ht)=>{const tn=Xv(1,kt,ht,ln)[0];return Js(zt,Ht,tn)},kt)),O_=(at,ht,_t)=>{const kt=ht.colDelta<0?lM:Gt,zt=ht.rowDelta<0?yv:Gt,Ht=wy(at),tn=X0(at[0]),gn=cn(Ht,Ro=>Ro===tn-1),An=kt(at,Math.abs(ht.colDelta),_t,gn?tn-1:tn),no=wy(An);return zt(An,Math.abs(ht.rowDelta),_t,yn(no,ln))},mx=(at,ht,_t,kt)=>{const zt=N0(at[ht],_t),Ht=qt(kt,zt.element),tn=at[ht];return at.length>1&&X0(tn)>1&&(_t>0&&Ht(b0(tn,_t-1))||_t<tn.cells.length-1&&Ht(b0(tn,_t+1))||ht>0&&Ht(b0(at[ht-1],_t))||ht<at.length-1&&Ht(b0(at[ht+1],_t)))},hT=(at,ht,_t,kt,zt,Ht)=>{const tn=at.row,gn=at.column,An=_t.length,no=X0(_t[0]),Ro=tn+An,gr=gn+no+Ht.length,Nr=yn(Ht,ln);for(let Rr=tn;Rr<Ro;Rr++){let Cr=0;for(let ss=gn;ss<gr;ss++){if(Nr[ss]){Cr++;continue}mx(ht,Rr,ss,zt)&&$3(ht,b0(ht[Rr],ss),zt,kt.cell);const cr=ss-gn-Cr,kr=N0(_t[Rr-tn],cr),Er=kr.element,$s=kt.replace(Er);wp(ht[Rr],ss,$p($s,!0,kr.isLocked))}}return ht},Hl=(at,ht,_t)=>{const kt=X0(ht[0]),zt=Iu(ht).cols.length+at.row,Ht=fo(kt-at.column,gn=>gn+at.column),tn=Xt(Ht,gn=>yo(_t,An=>An!==gn)).getOr(kt-1);return{row:zt,column:tn}},C0=(at,ht,_t)=>oo(_t,kt=>kt>=at.column&&kt<=X0(ht[0])+at.column),w2=(at,ht,_t,kt,zt)=>{const Ht=wy(ht),tn=Hl(at,ht,Ht),gn=Iu(_t).rows,An=C0(tn,gn,Ht);return G3(tn,ht,gn).map(Ro=>{const gr={...Ro,colDelta:Ro.colDelta-An.length},Nr=O_(ht,gr,kt),Rr=wy(Nr),Cr=C0(tn,gn,Rr);return hT(tn,Nr,gn,kt,zt,Cr)})},jC=(at,ht,_t,kt,zt)=>{P_(ht,at,zt,kt.cell);const Ht=uw(_t,ht),tn=O_(_t,Ht,kt),gn=uw(ht,tn),An=O_(ht,gn,kt);return Fn(An,(no,Ro)=>Yw(no,at,tn[Ro].cells))},Xu=(at,ht,_t,kt,zt)=>{yL(ht,at,zt,kt.cell);const Ht=wy(ht),tn=x2(ht,_t),gn={...tn,colDelta:tn.colDelta-Ht.length},An=O_(ht,gn,kt),{cols:no,rows:Ro}=Iu(An),gr=wy(An),Nr=x2(_t,ht),Rr={...Nr,colDelta:Nr.colDelta+gr.length},Cr=bL(_t,kt,gr),ss=O_(Cr,Rr,kt);return[...no,...Ro.slice(0,at),...ss,...Ro.slice(at,Ro.length)]},C2=(at,ht,_t,kt)=>fy(at,zt=>kt(zt,_t),ht),yx=(at,ht,_t,kt,zt)=>{const{rows:Ht,cols:tn}=Iu(at),gn=Ht.slice(0,ht),An=Ht.slice(ht),no=C2(Ht[_t],(Ro,gr)=>ht>0&&ht<Ht.length&&kt(b0(Ht[ht-1],gr),b0(Ht[ht],gr))?N0(Ht[ht],gr):$p(zt(Ro.element,kt),!0,Ro.isLocked),kt,zt);return[...tn,...gn,no,...An]},cM=(at,ht,_t,kt,zt,Ht,tn)=>{if(_t==="colgroup"||!kt){const gn=N0(at,zt);return $p(tn(gn.element,Ht),!0,!1)}else return N0(at,ht)},vL=(at,ht,_t,kt,zt)=>Fn(at,Ht=>{const tn=ht>0&&ht<X0(Ht)&&kt(b0(Ht,ht-1),b0(Ht,ht)),gn=cM(Ht,ht,Ht.section,tn,_t,kt,zt);return Js(Ht,ht,gn)}),uM=(at,ht)=>Vo(at,_t=>{const kt=_t.cells,zt=Mo(ht,(Ht,tn)=>tn>=0&&tn<Ht.length?Ht.slice(0,tn).concat(Ht.slice(tn+1)):Ht,kt);return zt.length>0?[em(_t.element,zt,_t.section,_t.isNew)]:[]}),Ju=(at,ht,_t)=>{const{rows:kt,cols:zt}=Iu(at);return[...zt,...kt.slice(0,ht),...kt.slice(_t+1)]},pE=(at,ht,_t,kt)=>b0(at[ht],_t)!==void 0&&ht>0&&kt(b0(at[ht-1],_t),b0(at[ht],_t)),_L=(at,ht,_t)=>ht>0&&_t(b0(at,ht-1),b0(at,ht)),dM=(at,ht,_t,kt)=>pE(at,ht,_t,kt)||_L(at[ht],_t,kt),k2=(at,ht)=>yo(ht,Gt)&&cT(at.cells)?ln:(kt,zt,Ht)=>!(Zs(kt.element)==="th"&&ht[Ht]),Jv=(at,ht)=>yo(ht,Gt)&&cT(at)?ln:(kt,zt,Ht)=>!(Zs(kt.element)==="th"&&ht[zt]),gE=(at,ht,_t,kt)=>{const zt=tn=>tn==="row"?dp(ht):Ku(ht),Ht=tn=>zt(tn)?`${tn}group`:tn;return at?cE(ht)?Ht(_t):null:kt&&cE(ht)?Ht(_t==="row"?"col":"row"):null},bx=(at,ht)=>(_t,kt,zt)=>Wt.some(gE(at,_t.element,"col",ht[zt])),Zr=(at,ht)=>(_t,kt)=>Wt.some(gE(at,_t.element,"row",ht[kt])),fM=(at,ht,_t)=>$p(_t(at.element,ht),!0,at.isLocked),pT=(at,ht,_t,kt,zt,Ht,tn)=>{const gn=An=>cn(ht,no=>_t(An.element,no.element));return Fn(at,(An,no)=>jv(An,(Ro,gr)=>{if(gn(Ro)){const Nr=tn(Ro,no,gr)?zt(Ro,_t,kt):Ro;return Ht(Nr,no,gr).each(Rr=>{qu(Nr.element,{scope:Wt.from(Rr)})}),Nr}else return Ro}))},hM=(at,ht,_t)=>Vo(at,(kt,zt)=>dM(at,zt,ht,_t)?[]:[N0(kt,ht)]),pM=(at,ht,_t)=>{const kt=at[ht];return Vo(kt.cells,(zt,Ht)=>dM(at,ht,Ht,_t)?[]:[zt])},j3=(at,ht,_t,kt,zt)=>{const Ht=Iu(at).rows,tn=Vo(ht,Ro=>hM(Ht,Ro,kt)),gn=Fn(Ht,Ro=>cT(Ro.cells)),An=Jv(tn,gn),no=Zr(_t,gn);return pT(at,tn,kt,zt,fM,no,An)},H3=(at,ht,_t,kt,zt,Ht,tn)=>{const{cols:gn,rows:An}=Iu(at),no=An[ht[0]],Ro=Vo(ht,cr=>pM(An,cr,zt)),gr=Fn(no.cells,(cr,kr)=>cT(hM(An,kr,zt))),Nr=[...An];Tn(ht,cr=>{Nr[cr]=tn.transformRow(An[cr],_t)});const Rr=[...gn,...Nr],Cr=k2(no,gr),ss=bx(kt,gr);return pT(Rr,Ro,zt,Ht,tn.transformCell,ss,Cr)},HC=(at,ht,_t,kt)=>{const zt=Iu(at).rows,Ht=Fn(ht,tn=>N0(zt[tn.row],tn.column));return pT(at,Ht,_t,kt,fM,Wt.none,ln)},S2={generate:at=>{if(!ot(at))throw new Error("cases must be an array");if(at.length===0)throw new Error("there must be at least one case");const ht=[],_t={};return Tn(at,(kt,zt)=>{const Ht=Bn(kt);if(Ht.length!==1)throw new Error("one and only one name per case");const tn=Ht[0],gn=kt[tn];if(_t[tn]!==void 0)throw new Error("duplicate key detected:"+tn);if(tn==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ot(gn))throw new Error("case arguments must be an array");ht.push(tn),_t[tn]=(...An)=>{const no=An.length;if(no!==gn.length)throw new Error("Wrong number of arguments to case "+tn+". Expected "+gn.length+" ("+gn+"), got "+no);return{fold:(...gr)=>{if(gr.length!==at.length)throw new Error("Wrong number of arguments to fold. Expected "+at.length+", got "+gr.length);return gr[zt].apply(null,An)},match:gr=>{const Nr=Bn(gr);if(ht.length!==Nr.length)throw new Error("Wrong number of arguments to match. Expected: "+ht.join(",")+`
Actual: `+Nr.join(","));if(!yo(ht,Cr=>Hn(Nr,Cr)))throw new Error("Not all branches were specified when using match. Specified: "+Nr.join(", ")+`
Required: `+ht.join(", "));return gr[tn].apply(null,An)},log:gr=>{console.log(gr,{constructors:ht,constructor:tn,params:An})}}}}),_t}},UC={...S2.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},mT=(at,ht)=>at.length===0?UC.none():at.length===1?UC.only(0):ht===0?UC.left(0,1):ht===at.length-1?UC.right(ht-1,ht):ht>0&&ht<at.length-1?UC.middle(ht-1,ht,ht+1):UC.none(),Qv=(at,ht,_t,kt,zt)=>{const Ht=at.slice(0),tn=mT(at,ht),gn=Tt(Fn(Ht,Tt(0))),An=Nr=>kt.singleColumnWidth(Ht[Nr],_t),no=(Nr,Rr)=>zt.calcLeftEdgeDeltas(Ht,Nr,Rr,_t,kt.minCellWidth(),kt.isRelative),Ro=(Nr,Rr,Cr)=>zt.calcMiddleDeltas(Ht,Nr,Rr,Cr,_t,kt.minCellWidth(),kt.isRelative),gr=(Nr,Rr)=>zt.calcRightEdgeDeltas(Ht,Nr,Rr,_t,kt.minCellWidth(),kt.isRelative);return tn.fold(gn,An,no,Ro,gr)},xL=(at,ht,_t)=>{let kt=0;for(let zt=at;zt<ht;zt++)kt+=_t[zt]!==void 0?_t[zt]:0;return kt},yT=(at,ht)=>{const _t=Sl.justCells(at);return Fn(_t,kt=>{const zt=xL(kt.column,kt.column+kt.colspan,ht);return{element:kt.element,width:zt,colspan:kt.colspan}})},bT=(at,ht)=>{const _t=Sl.justColumns(at);return Fn(_t,(kt,zt)=>({element:kt.element,width:ht[zt],colspan:kt.colspan}))},wL=(at,ht)=>Fn(at.all,(_t,kt)=>({element:_t.element,height:ht[kt]})),CL=at=>Mo(at,(ht,_t)=>ht+_t,0),gM=(at,ht)=>Sl.hasColumns(at)?bT(at,ht):yT(at,ht),yE=(at,ht,_t)=>{const kt=gM(at,ht);Tn(kt,zt=>{_t.setElementWidth(zt.element,zt.width)})},mM=(at,ht,_t,kt,zt)=>{const Ht=Sl.fromTable(at),tn=zt.getCellDelta(ht),gn=zt.getWidths(Ht,zt),An=_t===Ht.grid.columns-1,no=kt.clampTableDelta(gn,_t,tn,zt.minCellWidth(),An),Ro=Qv(gn,_t,no,zt,kt),gr=Fn(Ro,(Nr,Rr)=>Nr+gn[Rr]);yE(Ht,gr,zt),kt.resizeTable(zt.adjustTableWidth,no,An)},U3=(at,ht,_t)=>{const kt=Sl.fromTable(at),zt=wC(kt,at),Ht=Fn(zt,(An,no)=>_t===no?Math.max(ht+An,p_()):An),tn=wL(kt,Ht);Tn(tn,An=>{P1(An.element,An.height)}),Tn(Sl.justCells(kt),An=>{e2(An.element)});const gn=CL(Ht);P1(at,gn)},kL=(at,ht,_t,kt,zt)=>{const Ht=Sl.generate(ht),tn=kt.getWidths(Ht,kt),gn=kt.pixelWidth(),{newSizes:An,delta:no}=zt.calcRedestributedWidths(tn,gn,_t.pixelDelta,kt.isRelative);yE(Ht,An,kt),kt.adjustTableWidth(no)},bE=(at,ht,_t,kt)=>{const zt=Sl.generate(ht),Ht=kt.getWidths(zt,kt);yE(zt,Ht,kt)},VC=at=>Dn(at,(_t,kt)=>cn(_t,Ht=>Ht.column===kt.column)?_t:_t.concat([kt]),[]).sort((_t,kt)=>_t.column-kt.column),dw=Br("col"),vT=Br("colgroup"),V3=at=>Zs(at)==="tr"||vT(at),_T=at=>{const ht=Pp(at,"colspan",1),_t=Pp(at,"rowspan",1);return{element:at,colspan:ht,rowspan:_t}},W3=(at,ht=_T)=>{const _t=gn=>dw(gn.element)?at.col(gn):at.cell(gn),kt=gn=>vT(gn.element)?at.colgroup(gn):at.row(gn),zt=gn=>{if(V3(gn))return kt({element:gn});{const An=gn,no=_t(ht(An));return Ht=Wt.some({item:An,replacement:no}),no}};let Ht=Wt.none();return{getOrInit:(gn,An)=>Ht.fold(()=>zt(gn),no=>An(gn,no.item)?no.replacement:zt(gn))}},q3=at=>ht=>{const _t=[],kt=(tn,gn)=>Xt(_t,An=>gn(An.item,tn)),zt=tn=>{const gn=at==="td"?{scope:null}:{},An=ht.replace(tn,at,gn);return _t.push({item:tn,sub:An}),An};return{replaceOrInit:(tn,gn)=>{if(V3(tn)||dw(tn))return tn;{const An=tn;return kt(An,gn).fold(()=>zt(An),no=>gn(tn,no.item)?no.sub:zt(An))}}}},Z3=at=>Vn(at,"scope").map(ht=>ht.substr(0,3)),Ay={modification:W3,transform:q3,merging:at=>({unmerge:kt=>{const zt=Z3(kt);return zt.each(Ht=>_l(kt,"scope",Ht)),()=>{const Ht=at.cell({element:kt,colspan:1,rowspan:1});return cp(Ht,"width"),cp(kt,"width"),zt.each(tn=>_l(Ht,"scope",tn)),Ht}},merge:kt=>{const zt=()=>{const Ht=K0(Fn(kt,Z3));if(Ht.length===0)return Wt.none();{const tn=Ht[0],gn=["row","col"];return cn(Ht,no=>no!==tn&&Hn(gn,no))?Wt.none():Wt.from(tn)}};return cp(kt[0],"width"),zt().fold(()=>$n(kt[0],"scope"),Ht=>_l(kt[0],"scope",Ht+"group")),Tt(kt[0])}})},E2=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],bM=(at,ht)=>{const _t=at.property().name(ht);return Hn(["ol","ul"],_t)},fw=(at,ht)=>{const _t=at.property().name(ht);return Hn(E2,_t)},T2=(at,ht)=>Hn(["br","img","hr","input"],at.property().name(ht)),K3=dx(),Uo=at=>fw(K3,at),e1=at=>bM(K3,at),I2=at=>T2(K3,at),SL=at=>{const ht=Br("br"),_t=An=>yo(An,no=>ht(no)||mo(no)&&op(no).trim().length===0),kt=An=>Zs(An)==="li"||dr(An,e1).isSome(),zt=An=>cm(An).map(no=>Uo(no)?!0:I2(no)?Zs(no)!=="img":!1).getOr(!1),Ht=An=>i2(An).bind(no=>{const Ro=zt(no);return Bl(no).map(gr=>Ro===!0||kt(gr)||ht(no)||Uo(gr)&&!ur(An,gr)?[]:[io.fromTag("br")])}).getOr([]),gn=(()=>{const An=Vo(at,no=>{const Ro=Cs(no);return _t(Ro)?[]:Ro.concat(Ht(no))});return An.length===0?[io.fromTag("br")]:An})();Bp(at[0]),zp(at[0],gn)},vE=at=>nw(at,!0),bv=at=>{Nv(at).length===0&&mp(at)},WC=(at,ht)=>({grid:at,cursor:ht}),vM=at=>Ln(at,ht=>Ln(ht.cells,_t=>{const kt=_t.element;return h_(vE(kt),kt)})),_M=(at,ht,_t)=>{var kt,zt;const Ht=Iu(at).rows;return Wt.from((zt=(kt=Ht[ht])===null||kt===void 0?void 0:kt.cells[_t])===null||zt===void 0?void 0:zt.element).filter(vE).orThunk(()=>vM(Ht))},k0=(at,ht,_t)=>{const kt=_M(at,ht,_t);return WC(at,kt)},xT=at=>Dn(at,(_t,kt)=>cn(_t,Ht=>Ht.row===kt.row)?_t:_t.concat([kt]),[]).sort((_t,kt)=>_t.row-kt.row),xM=(at,ht,_t,kt)=>{const zt=ht[0].row,Ht=xT(ht),tn=Mo(Ht,(gn,An)=>({grid:yx(gn.grid,zt,An.row+gn.delta,_t,kt.getOrInit),delta:gn.delta+1}),{grid:at,delta:0}).grid;return k0(tn,zt,ht[0].column)},EL=(at,ht,_t,kt)=>{const zt=xT(ht),Ht=zt[zt.length-1],tn=Ht.row+Ht.rowspan,gn=Mo(zt,(An,no)=>yx(An,tn,no.row,_t,kt.getOrInit),at);return k0(gn,tn,ht[0].column)},wM=(at,ht,_t,kt)=>{const zt=ht.details,Ht=VC(zt),tn=Ht[0].column,gn=Mo(Ht,(An,no)=>({grid:vL(An.grid,tn,no.column+An.delta,_t,kt.getOrInit),delta:An.delta+1}),{grid:at,delta:0}).grid;return k0(gn,zt[0].row,tn)},AL=(at,ht,_t,kt)=>{const zt=ht.details,Ht=zt[zt.length-1],tn=Ht.column+Ht.colspan,gn=VC(zt),An=Mo(gn,(no,Ro)=>vL(no,tn,Ro.column,_t,kt.getOrInit),at);return k0(An,zt[0].row,tn)},CM=(at,ht,_t,kt)=>{const zt=VC(ht),Ht=Fn(zt,gn=>gn.column),tn=j3(at,Ht,!0,_t,kt.replaceOrInit);return k0(tn,ht[0].row,ht[0].column)},TL=(at,ht,_t,kt)=>{const zt=HC(at,ht,_t,kt.replaceOrInit);return k0(zt,ht[0].row,ht[0].column)},IL=(at,ht,_t,kt)=>{const zt=VC(ht),Ht=Fn(zt,gn=>gn.column),tn=j3(at,Ht,!1,_t,kt.replaceOrInit);return k0(tn,ht[0].row,ht[0].column)},kM=(at,ht,_t,kt)=>{const zt=HC(at,ht,_t,kt.replaceOrInit);return k0(zt,ht[0].row,ht[0].column)},qC=(at,ht)=>(_t,kt,zt,Ht,tn)=>{const gn=xT(kt),An=Fn(gn,Ro=>Ro.row),no=H3(_t,An,at,ht,zt,Ht.replaceOrInit,tn);return k0(no,kt[0].row,kt[0].column)},RL=qC("thead",!0),SM=qC("tbody",!1),ML=qC("tfoot",!1),_p=(at,ht,_t,kt)=>{const zt=VC(ht.details),Ht=uM(at,Fn(zt,gn=>gn.column)),tn=Ht.length>0?Ht[0].cells.length-1:0;return k0(Ht,zt[0].row,Math.min(zt[0].column,tn))},Y3=(at,ht,_t,kt)=>{const zt=xT(ht),Ht=Ju(at,zt[0].row,zt[zt.length-1].row),tn=Math.max(Iu(Ht).rows.length-1,0);return k0(Ht,Math.min(ht[0].row,tn),ht[0].column)},EM=(at,ht,_t,kt)=>{const zt=ht.cells;SL(zt);const Ht=cw(at,ht.bounds,_t,kt.merge(zt));return WC(Ht,Wt.from(zt[0]))},AM=(at,ht,_t,kt)=>{const Ht=Mo(ht,(tn,gn)=>$3(tn,gn,_t,kt.unmerge(gn)),at);return WC(Ht,Wt.from(ht[0]))},X3=(at,ht,_t,kt)=>{const Ht=((An,no)=>{const Ro=Sl.fromTable(An);return GC(Ro,no,!0)})(ht.clipboard,ht.generators),tn=cy(ht.row,ht.column);return w2(tn,at,Ht,ht.generators,_t).fold(()=>WC(at,Wt.some(ht.element)),An=>k0(An,ht.row,ht.column))},Tm=(at,ht,_t)=>{const kt=Q_(at,_t.section),zt=Sl.generate(kt);return GC(zt,ht,!0)},qy=(at,ht,_t,kt)=>{const zt=Iu(at).rows,Ht=ht.cells[0].column,tn=zt[ht.cells[0].row],gn=Tm(ht.clipboard,ht.generators,tn),An=jC(Ht,at,gn,ht.generators,_t);return k0(An,ht.cells[0].row,ht.cells[0].column)},TM=(at,ht,_t,kt)=>{const zt=Iu(at).rows,Ht=ht.cells[ht.cells.length-1].column+ht.cells[ht.cells.length-1].colspan,tn=zt[ht.cells[0].row],gn=Tm(ht.clipboard,ht.generators,tn),An=jC(Ht,at,gn,ht.generators,_t);return k0(An,ht.cells[0].row,Ht)},J3=(at,ht,_t,kt)=>{const zt=Iu(at).rows,Ht=ht.cells[0].row,tn=zt[Ht],gn=Tm(ht.clipboard,ht.generators,tn),An=Xu(Ht,at,gn,ht.generators,_t);return k0(An,ht.cells[0].row,ht.cells[0].column)},Q3=(at,ht,_t,kt)=>{const zt=Iu(at).rows,Ht=ht.cells[ht.cells.length-1].row+ht.cells[ht.cells.length-1].rowspan,tn=zt[ht.cells[0].row],gn=Tm(ht.clipboard,ht.generators,tn),An=Xu(Ht,at,gn,ht.generators,_t);return k0(An,Ht,ht.cells[0].column)},PL=(at,ht)=>{const _t=Sl.fromTable(at);return Ey(_t,ht).bind(zt=>{const Ht=zt[zt.length-1],tn=zt[0].column,gn=Ht.column+Ht.colspan,An=co(Fn(_t.all,no=>oo(no.cells,Ro=>Ro.column>=tn&&Ro.column<gn)));return FC(An)}).getOr("")},wT=(at,ht)=>{const _t=Sl.fromTable(at);return Ey(_t,ht).bind(FC).getOr("")},IM=(at,ht)=>{const _t=Sl.fromTable(at);return Ey(_t,ht).bind(zt=>{const Ht=zt[zt.length-1],tn=zt[0].row,gn=Ht.row+Ht.rowspan,An=_t.all.slice(tn,gn);return eM(An)}).getOr("")},_E=(at,ht,_t,kt)=>bE(at,ht,_t,kt.sizing),RM=(at,ht,_t,kt)=>kL(at,ht,_t,kt.sizing,kt.resize),bm=(at,ht)=>cn(ht,_t=>_t.column===0&&_t.isLocked),OL=(at,ht)=>cn(ht,_t=>_t.column+_t.colspan>=at.grid.columns&&_t.isLocked),vv=(at,ht)=>{const _t=C_(at),kt=VC(ht);return Dn(kt,(zt,Ht)=>{const gn=_t[Ht.column].map($v).getOr(0);return zt+gn},0)},ap=at=>(ht,_t)=>Ey(ht,_t).filter(kt=>!(at?bm:OL)(ht,kt)).map(kt=>({details:kt,pixelDelta:vv(ht,kt)})),D_=(at,ht)=>G1(at,ht).map(_t=>({details:_t,pixelDelta:-vv(at,_t)})),ZC=at=>(ht,_t)=>lw(ht,_t).filter(kt=>!(at?bm:OL)(ht,kt.cells)),eR=Ay.transform("th"),xE=Ay.transform("td"),MM=u0(xM,Ey,Rt,Rt,Ay.modification),hw=u0(EL,Ey,Rt,Rt,Ay.modification),d0=u0(wM,ap(!0),RM,Rt,Ay.modification),N_=u0(AL,ap(!1),RM,Rt,Ay.modification),PM=u0(_p,D_,RM,bv,Ay.modification),DL=u0(Y3,Ey,Rt,bv,Ay.modification),tR=u0(CM,G1,Rt,Rt,eR),CT=u0(IL,G1,Rt,Rt,xE),nR=u0(RL,G1,Rt,Rt,eR),oR=u0(SM,G1,Rt,Rt,xE),kT=u0(ML,G1,Rt,Rt,xE),Kr=u0(TL,G1,Rt,Rt,eR),wE=u0(kM,G1,Rt,Rt,xE),rR=u0(EM,fE,_E,Rt,Ay.merging),OM=u0(AM,dT,_E,Rt,Ay.merging),LL=u0(X3,cB,_E,Rt,Ay.modification),f0=u0(qy,ZC(!0),Rt,Rt,Ay.modification),DM=u0(TM,ZC(!1),Rt,Rt,Ay.modification),pw=u0(J3,lw,Rt,Rt,Ay.modification),NM=u0(Q3,lw,Rt,Rt,Ay.modification),sR=PL,LM=wT,h0=IM,gw=(at,ht)=>at.dispatch("NewRow",{node:ht}),iR=(at,ht)=>at.dispatch("NewCell",{node:ht}),R2=(at,ht,_t)=>{at.dispatch("TableModified",{..._t,table:ht})},FL=(at,ht,_t,kt,zt)=>{at.dispatch("TableSelectionChange",{cells:ht,start:_t,finish:kt,otherCells:zt})},vm=at=>{at.dispatch("TableSelectionClear")},_m=(at,ht,_t,kt,zt)=>{at.dispatch("ObjectResizeStart",{target:ht,width:_t,height:kt,origin:zt})},i0=(at,ht,_t,kt,zt)=>{at.dispatch("ObjectResized",{target:ht,width:_t,height:kt,origin:zt})},xm={structure:!1,style:!0},yu={structure:!0,style:!1},im={structure:!0,style:!0},ST=(at,ht)=>F1(at)?$t.percentageSize(ht):s0(at)?$t.pixelSize(ht):$t.getTableSize(ht),aR=(at,ht,_t)=>{const kt=wm=>Zs(my(wm))==="table",zt=wm=>!kt(at)||y2(wm).rows>1,Ht=wm=>!kt(at)||y2(wm).columns>1,tn=Qx(at),gn=c2(at)?Rt:aT,An=wm=>{switch(Up(at)){case"section":return BC.section();case"sectionCells":return BC.sectionCells();case"cells":return BC.cells();default:return BC.getTableSectionType(wm,"section")}},no=(wm,pI)=>pI.cursor.fold(()=>{const kx=Nv(wm);return sn(kx).filter(Ls).map(xl=>{_t.clearSelectedCells(wm.dom);const E0=at.dom.createRng();return E0.selectNode(xl.dom),at.selection.setRng(E0),_l(xl,"data-mce-selected","1"),E0})},kx=>{const xl=DC(kx),E0=at.dom.createRng();return E0.setStart(xl.element.dom,xl.offset),E0.setEnd(xl.element.dom,xl.offset),at.selection.setRng(E0),_t.clearSelectedCells(wm.dom),Wt.some(E0)}),Ro=(wm,pI,kx,xl)=>(E0,gI,mI=!1)=>{Wy(E0);const WP=io.fromDom(at.getDoc()),Iw=J0(kx,WP,tn),X2={sizing:ST(at,E0),resize:c2(at)?aw():px(),section:An(E0)};return pI(E0)?wm(E0,gI,Iw,X2).bind(yI=>{ht.refresh(E0.dom),Tn(yI.newRows,XE=>{gw(at,XE.dom)}),Tn(yI.newCells,XE=>{iR(at,XE.dom)});const F8=no(E0,yI);return Ls(E0)&&(Wy(E0),mI||R2(at,E0.dom,xl)),F8.map(XE=>({rng:XE,effect:xl}))}):Wt.none()},gr=Ro(DL,zt,Rt,yu),Nr=Ro(PM,Ht,Rt,yu),Rr=Ro(MM,ln,Rt,yu),Cr=Ro(hw,ln,Rt,yu),ss=Ro(d0,ln,gn,yu),cr=Ro(N_,ln,gn,yu),kr=Ro(rR,ln,Rt,yu),Er=Ro(OM,ln,Rt,yu),$s=Ro(f0,ln,Rt,yu),Gl=Ro(DM,ln,Rt,yu),Cu=Ro(pw,ln,Rt,yu),Qu=Ro(NM,ln,Rt,yu),pp=Ro(LL,ln,Rt,im),Qy=Ro(Kr,ln,Rt,yu),q1=Ro(wE,ln,Rt,yu),Y2=Ro(tR,ln,Rt,yu),B_=Ro(CT,ln,Rt,yu),Bu=Ro(nR,ln,Rt,yu),oy=Ro(oR,ln,Rt,yu),ry=Ro(kT,ln,Rt,yu);return{deleteRow:gr,deleteColumn:Nr,insertRowsBefore:Rr,insertRowsAfter:Cr,insertColumnsBefore:ss,insertColumnsAfter:cr,mergeCells:kr,unmergeCells:Er,pasteColsBefore:$s,pasteColsAfter:Gl,pasteRowsBefore:Cu,pasteRowsAfter:Qu,pasteCells:pp,makeCellsHeader:Qy,unmakeCellsHeader:q1,makeColumnsHeader:Y2,unmakeColumnsHeader:B_,makeRowsHeader:Bu,makeRowsBody:oy,makeRowsFooter:ry,getTableRowType:h0,getTableCellType:LM,getTableColType:sR}},lR=(at,ht,_t)=>{const kt=Pp(at,ht,1);_t===1||kt<=1?$n(at,ht):_l(at,ht,Math.min(_t,kt))},cR=(at,ht)=>_t=>{const kt=_t.column+_t.colspan-1,zt=_t.column;return kt>=at&&zt<ht},FM=(at,ht,_t)=>{if(Sl.hasColumns(at)){const kt=oo(Sl.justColumns(at),cR(ht,_t)),zt=Fn(kt,tn=>{const gn=Ym(tn.element);return lR(gn,"span",_t-ht),gn}),Ht=io.fromTag("colgroup");return zp(Ht,zt),[Ht]}else return[]},zM=(at,ht,_t)=>Fn(at.all,kt=>{const zt=oo(kt.cells,cR(ht,_t)),Ht=Fn(zt,gn=>{const An=Ym(gn.element);return lR(An,"colspan",_t-ht),An}),tn=io.fromTag("tr");return zp(tn,Ht),tn}),CE=(at,ht)=>{const _t=Sl.fromTable(at);return G1(_t,ht).map(zt=>{const Ht=zt[zt.length-1],tn=zt[0].column,gn=Ht.column+Ht.colspan,An=FM(_t,tn,gn),no=zM(_t,tn,gn);return[...An,...no]})},ET=(at,ht,_t)=>{const kt=Sl.fromTable(at);return Ey(kt,ht).bind(Ht=>{const tn=GC(kt,_t,!1),An=Iu(tn).rows.slice(Ht[0].row,Ht[Ht.length-1].row+Ht[Ht.length-1].rowspan),no=Vo(An,gr=>{const Nr=oo(gr.cells,Rr=>!Rr.isLocked);return Nr.length>0?[{...gr,cells:Nr}]:[]}),Ro=B3(no);return h_(Ro.length>0,Ro)}).map(Ht=>oM(Ht))},kE=S2.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),BM=(at,ht,_t)=>{const kt=_t.substring(0,_t.length-at.length),zt=parseFloat(kt);return kt===zt.toString()?ht(zt):kE.invalid(_t)},M2={...kE,from:at=>Nm(at,"%")?BM("%",kE.percent,at):Nm(at,"px")?BM("px",kE.pixels,at):kE.invalid(at)},Ty=(at,ht)=>Fn(at,_t=>M2.from(_t).fold(()=>_t,zt=>zt/ht*100+"%",zt=>zt+"%")),zL=(at,ht,_t)=>{const kt=_t/ht;return Fn(at,zt=>M2.from(zt).fold(()=>zt,tn=>tn*kt+"px",tn=>tn/100*_t+"px"))},BL=(at,ht)=>{const _t=at.fold(()=>Tt(""),kt=>{const zt=kt/ht;return Tt(zt+"px")},()=>{const kt=100/ht;return Tt(kt+"%")});return fo(ht,_t)},_v=(at,ht,_t)=>at.fold(()=>ht,kt=>zL(ht,_t,kt),kt=>Ty(ht,_t)),KC=(at,ht,_t)=>{const kt=M2.from(_t),zt=yo(at,Ht=>Ht==="0px")?BL(kt,at.length):_v(kt,at,ht);return uR(zt)},P2=(at,ht)=>at.length===0?ht:Mo(at,(_t,kt)=>M2.from(kt).fold(Tt(0),Gt,Gt)+_t,0),L_=(at,ht)=>{const _t=Math.floor(at);return{value:_t+ht,remainder:at-_t}},B0=(at,ht)=>M2.from(at).fold(Tt(at),_t=>_t+ht+"px",_t=>_t+ht+"%"),uR=at=>{if(at.length===0)return at;const ht=Mo(at,(kt,zt)=>{const Ht=M2.from(zt).fold(()=>({value:zt,remainder:0}),tn=>L_(tn,"px"),tn=>({value:tn+"%",remainder:0}));return{output:[Ht.value].concat(kt.output),remainder:kt.remainder+Ht.remainder}},{output:[],remainder:0}),_t=ht.output;return _t.slice(0,_t.length-1).concat([B0(_t[_t.length-1],Math.round(ht.remainder))])},mw=M2.from,$M=(at,ht,_t)=>{Tn(ht,kt=>{const zt=at.slice(kt.column,kt.colspan+kt.column),Ht=P2(zt,_y());_i(kt.element,"width",Ht+_t)})},TT=(at,ht,_t)=>{Tn(ht,(kt,zt)=>{const Ht=P2([at[zt]],_y());_i(kt.element,"width",Ht+_t)})},dR=(at,ht,_t)=>{Tn(_t,kt=>{cp(kt.element,"height")}),Tn(ht,(kt,zt)=>{_i(kt.element,"height",at[zt])})},SE=at=>mw(at).fold(Tt("px"),Tt("px"),Tt("%")),IT=(at,ht,_t)=>{const kt=Sl.fromTable(at),zt=kt.all,Ht=Sl.justCells(kt),tn=Sl.justColumns(kt);ht.each(gn=>{const An=SE(gn),no=Xl(at),Ro=ym(kt,at),gr=KC(Ro,no,gn);Sl.hasColumns(kt)?TT(gr,tn,An):$M(gr,Ht,An),_i(at,"width",gn)}),_t.each(gn=>{const An=ir(at),no=Dp(kt,at),Ro=KC(no,An,gn);dR(Ro,zt,Ht),_i(at,"height",gn)})},GM=ky,jM=tE,HM=k_,EE=at=>{$n(at,"width"),$n(at,"height")},O2=at=>{const ht=o0(at);IT(at,Wt.some(ht),Wt.none()),EE(at)},AE=at=>{const ht=o2(at);IT(at,Wt.some(ht),Wt.none()),EE(at)},$L=at=>{const ht=nm(at);IT(at,Wt.none(),Wt.some(ht)),EE(at)},fR=at=>{cp(at,"width");const ht=O0(at),_t=ht.length>0?ht:Nv(at);Tn(_t,kt=>{cp(kt,"width"),EE(kt)}),EE(at)},GL={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},RT=()=>io.fromTag("th"),jL=()=>io.fromTag("td"),UM=()=>io.fromTag("col"),HL=(at,ht,_t,kt)=>{const zt=io.fromTag("tr");for(let Ht=0;Ht<at;Ht++){const tn=kt<ht||Ht<_t?RT():jL();Ht<_t&&_l(tn,"scope","row"),kt<ht&&_l(tn,"scope","col"),Tu(tn,io.fromTag("br")),Tu(zt,tn)}return zt},VM=at=>{const ht=io.fromTag("colgroup");return fo(at,()=>Tu(ht,UM())),ht},TE=(at,ht,_t,kt)=>fo(at,zt=>HL(ht,_t,kt,zt)),WM=(at,ht,_t,kt,zt,Ht=GL)=>{const tn=io.fromTag("table"),gn=zt!=="cells";vu(tn,Ht.styles),Wu(tn,Ht.attributes),Ht.colGroups&&Tu(tn,VM(ht));const An=Math.min(at,_t);if(gn&&_t>0){const Rr=io.fromTag("thead");Tu(tn,Rr);const ss=TE(_t,ht,zt==="sectionCells"?An:0,kt);zp(Rr,ss)}const no=io.fromTag("tbody");Tu(tn,no);const Ro=gn?at-An:at,Nr=TE(Ro,ht,gn?0:_t,kt);return zp(no,Nr),tn},ny=at=>at.dom.innerHTML,hR=at=>{const ht=io.fromTag("div"),_t=io.fromDom(at.dom.cloneNode(!0));return Tu(ht,_t),ny(ht)},qM=(at,ht)=>{at.selection.select(ht.dom,!0),at.selection.collapse(!0)},pR=(at,ht)=>{m0(ht,"td,th").each(qt(qM,at))},IE=(at,ht)=>{Tn(Jl(ht,"tr"),_t=>{gw(at,_t.dom),Tn(Jl(_t,"th,td"),kt=>{iR(at,kt.dom)})})},UL=at=>_(at)&&at.indexOf("%")!==-1,VL=(at,ht,_t,kt,zt)=>{const Ht=QA(at),tn={styles:Ht,attributes:JA(at),colGroups:lL(at)};return at.undoManager.ignore(()=>{const gn=WM(_t,ht,zt,kt,Up(at),tn);_l(gn,"data-mce-id","__mce");const An=hR(gn);at.insertContent(An),at.addVisual()}),m0(my(at),'table[data-mce-id="__mce"]').map(gn=>(s0(at)?AE(gn):ew(at)?fR(gn):(F1(at)||UL(Ht.width))&&O2(gn),Wy(gn),$n(gn,"data-mce-id"),IE(at,gn),pR(at,gn),gn.dom)).getOrNull()},WL=(at,ht,_t,kt={})=>{const zt=Ht=>Ct(Ht)&&Ht>0;if(zt(ht)&&zt(_t)){const Ht=kt.headerRows||0,tn=kt.headerColumns||0;return VL(at,_t,ht,tn,Ht)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var MT=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const ZM="x-tinymce/dom-table-",gR=ZM+"rows",mR=ZM+"columns",RE=at=>{const ht=MT.FakeClipboardItem(at);MT.write([ht])},yR=at=>{var ht;const _t=(ht=MT.read())!==null&&ht!==void 0?ht:[];return Ln(_t,kt=>Wt.from(kt.getType(at)))},KM=at=>{yR(at).isSome()&&MT.clear()},YM=at=>{at.fold(qL,ht=>RE({[gR]:ht}))},XM=()=>yR(gR),qL=()=>KM(gR),JM=at=>{at.fold(QM,ht=>RE({[mR]:ht}))},bR=()=>yR(mR),QM=()=>KM(mR),yw=at=>Kp(sE(at),Vy(at)).filter(El),eP=at=>sT(sE(at),Vy(at)).filter(El),ZL=(at,ht)=>{const _t=Vy(at),kt=()=>yw(at).each(cr=>{Jm(cr,_t).filter(Nt(_t)).each(kr=>{const Er=io.fromText("");if(Ap(kr,Er),mp(kr),at.dom.isEmpty(at.getBody()))at.setContent(""),at.selection.setCursorLocation();else{const $s=at.dom.createRng();$s.setStart(Er.dom,0),$s.setEnd(Er.dom,0),at.selection.setRng($s),at.nodeChanged()}})}),zt=cr=>yw(at).each(kr=>{ew(at)||s0(at)||F1(at)||Jm(kr,_t).each($s=>{cr==="relative"&&!GM($s)?O2($s):cr==="fixed"&&!jM($s)?AE($s):cr==="responsive"&&!HM($s)&&fR($s),Wy($s),R2(at,$s.dom,yu)})}),Ht=cr=>Jm(cr,_t),tn=cr=>eP(at).bind(kr=>Ht(kr).map(Er=>cr(Er,kr))),gn=(cr,kr)=>{tn(Er=>{at.formatter.toggle("tableclass",{value:kr},Er.dom),R2(at,Er.dom,xm)})},An=(cr,kr)=>{tn(Er=>{const $s=wu(at),Cu=yo($s,Qu=>at.formatter.match("tablecellclass",{value:kr},Qu.dom))?at.formatter.remove:at.formatter.apply;Tn($s,Qu=>Cu("tablecellclass",{value:kr},Qu.dom)),R2(at,Er.dom,xm)})},no=()=>{yw(at).each(cr=>{Jm(cr,_t).each(kr=>{Xm(kr,"caption").fold(()=>{const Er=io.fromTag("caption");Tu(Er,io.fromText("Caption")),v1(kr,Er,0),at.selection.setCursorLocation(Er.dom,0)},Er=>{Br("caption")(cr)&&rr("td",kr).each($s=>at.selection.setCursorLocation($s.dom,0)),mp(Er)}),R2(at,kr.dom,yu)})})},Ro=cr=>{at.focus()},gr=(cr,kr=!1)=>tn((Er,$s)=>{const Gl=hx(wu(at),Er,$s);cr(Er,Gl,kr).each(Ro)}),Nr=()=>tn((cr,kr)=>{const Er=hx(wu(at),cr,kr),$s=J0(Rt,io.fromDom(at.getDoc()),Wt.none());return ET(cr,Er,$s)}),Rr=()=>tn((cr,kr)=>{const Er=hx(wu(at),cr,kr);return CE(cr,Er)}),Cr=(cr,kr)=>kr().each(Er=>{const $s=Fn(Er,Gl=>Ym(Gl));tn((Gl,Cu)=>{const Qu=Q0(io.fromDom(at.getDoc())),pp=D3(wu(at),Cu,$s,Qu);cr(Gl,pp).each(Ro)})}),ss=cr=>(kr,Er)=>Mr(Er,"type").each($s=>{gr(cr($s),Er.no_events)});Wn({mceTableSplitCells:()=>gr(ht.unmergeCells),mceTableMergeCells:()=>gr(ht.mergeCells),mceTableInsertRowBefore:()=>gr(ht.insertRowsBefore),mceTableInsertRowAfter:()=>gr(ht.insertRowsAfter),mceTableInsertColBefore:()=>gr(ht.insertColumnsBefore),mceTableInsertColAfter:()=>gr(ht.insertColumnsAfter),mceTableDeleteCol:()=>gr(ht.deleteColumn),mceTableDeleteRow:()=>gr(ht.deleteRow),mceTableCutCol:()=>Rr().each(cr=>{JM(cr),gr(ht.deleteColumn)}),mceTableCutRow:()=>Nr().each(cr=>{YM(cr),gr(ht.deleteRow)}),mceTableCopyCol:()=>Rr().each(cr=>JM(cr)),mceTableCopyRow:()=>Nr().each(cr=>YM(cr)),mceTablePasteColBefore:()=>Cr(ht.pasteColsBefore,bR),mceTablePasteColAfter:()=>Cr(ht.pasteColsAfter,bR),mceTablePasteRowBefore:()=>Cr(ht.pasteRowsBefore,XM),mceTablePasteRowAfter:()=>Cr(ht.pasteRowsAfter,XM),mceTableDelete:kt,mceTableCellToggleClass:An,mceTableToggleClass:gn,mceTableToggleCaption:no,mceTableSizingMode:(cr,kr)=>zt(kr),mceTableCellType:ss(cr=>cr==="th"?ht.makeCellsHeader:ht.unmakeCellsHeader),mceTableColType:ss(cr=>cr==="th"?ht.makeColumnsHeader:ht.unmakeColumnsHeader),mceTableRowType:ss(cr=>{switch(cr){case"header":return ht.makeRowsHeader;case"footer":return ht.makeRowsFooter;default:return ht.makeRowsBody}})},(cr,kr)=>at.addCommand(kr,cr)),at.addCommand("mceInsertTable",(cr,kr)=>{WL(at,kr.rows,kr.columns,kr.options)}),at.addCommand("mceTableApplyCellStyle",(cr,kr)=>{const Er=Cu=>"tablecell"+Cu.toLowerCase().replace("-","");if(!_e(kr))return;const $s=oo(wu(at),El);if($s.length===0)return;const Gl=ro(kr,(Cu,Qu)=>at.formatter.has(Er(Qu))&&_(Cu));us(Gl)||(Wn(Gl,(Cu,Qu)=>{const pp=Er(Qu);Tn($s,Qy=>{Cu===""?at.formatter.remove(pp,{value:null},Qy.dom,!0):at.formatter.apply(pp,{value:Cu},Qy.dom)})}),Ht($s[0]).each(Cu=>R2(at,Cu.dom,xm)))})},KL=(at,ht)=>{const _t=Vy(at),kt=zt=>sT(sE(at)).bind(Ht=>Jm(Ht,_t).map(tn=>{const gn=hx(wu(at),tn,Ht);return zt(tn,gn)})).getOr("");Wn({mceTableRowType:()=>kt(ht.getTableRowType),mceTableCellType:()=>kt(ht.getTableCellType),mceTableColType:()=>kt(ht.getTableColType)},(zt,Ht)=>at.addQueryValueHandler(Ht,zt))},PT=S2.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),n1=(at,ht,_t,kt)=>at.fold(ht,_t,kt),OT=at=>at.fold(Gt,Gt,Gt),DT=PT.before,vR=PT.on,tP=PT.after,am={before:DT,on:vR,after:tP,cata:n1,getStart:OT},YC={create:(at,ht)=>({selection:at,kill:ht})},bw=(at,ht)=>{const _t=at.document.createRange();return _t.selectNode(ht.dom),_t},NT=(at,ht)=>{const _t=at.document.createRange();return oP(_t,ht),_t},oP=(at,ht)=>at.selectNodeContents(ht.dom),YL=(at,ht)=>{ht.fold(_t=>{at.setStartBefore(_t.dom)},(_t,kt)=>{at.setStart(_t.dom,kt)},_t=>{at.setStartAfter(_t.dom)})},XL=(at,ht)=>{ht.fold(_t=>{at.setEndBefore(_t.dom)},(_t,kt)=>{at.setEnd(_t.dom,kt)},_t=>{at.setEndAfter(_t.dom)})},rP=(at,ht,_t)=>{const kt=at.document.createRange();return YL(kt,ht),XL(kt,_t),kt},ME=(at,ht,_t,kt,zt)=>{const Ht=at.document.createRange();return Ht.setStart(ht.dom,_t),Ht.setEnd(kt.dom,zt),Ht},_R=at=>({left:at.left,top:at.top,right:at.right,bottom:at.bottom,width:at.width,height:at.height}),JL=at=>{const ht=at.getClientRects(),_t=ht.length>0?ht[0]:at.getBoundingClientRect();return _t.width>0||_t.height>0?Wt.some(_t).map(_R):Wt.none()},XC=S2.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),sP=(at,ht,_t)=>ht(io.fromDom(_t.startContainer),_t.startOffset,io.fromDom(_t.endContainer),_t.endOffset),iP=(at,ht)=>ht.match({domRange:_t=>({ltr:Tt(_t),rtl:Wt.none}),relative:(_t,kt)=>({ltr:E1(()=>rP(at,_t,kt)),rtl:E1(()=>Wt.some(rP(at,kt,_t)))}),exact:(_t,kt,zt,Ht)=>({ltr:E1(()=>ME(at,_t,kt,zt,Ht)),rtl:E1(()=>Wt.some(ME(at,zt,Ht,_t,kt)))})}),aP=(at,ht)=>{const _t=ht.ltr();return _t.collapsed?ht.rtl().filter(zt=>zt.collapsed===!1).map(zt=>XC.rtl(io.fromDom(zt.endContainer),zt.endOffset,io.fromDom(zt.startContainer),zt.startOffset)).getOrThunk(()=>sP(at,XC.ltr,_t)):sP(at,XC.ltr,_t)},xR=(at,ht)=>{const _t=iP(at,ht);return aP(at,_t)},LT=(at,ht)=>xR(at,ht).match({ltr:(kt,zt,Ht,tn)=>{const gn=at.document.createRange();return gn.setStart(kt.dom,zt),gn.setEnd(Ht.dom,tn),gn},rtl:(kt,zt,Ht,tn)=>{const gn=at.document.createRange();return gn.setStart(Ht.dom,tn),gn.setEnd(kt.dom,zt),gn}});XC.ltr,XC.rtl;const vw={create:(at,ht,_t,kt)=>({start:at,soffset:ht,finish:_t,foffset:kt})},cP={create:(at,ht,_t,kt)=>({start:am.on(at,ht),finish:am.on(_t,kt)})},uP=(at,ht)=>{const _t=LT(at,ht);return vw.create(io.fromDom(_t.startContainer),_t.startOffset,io.fromDom(_t.endContainer),_t.endOffset)},FT=cP.create,e8=(at,ht,_t,kt,zt,Ht,tn)=>ur(_t,zt)&&kt===Ht?Wt.none():Tp(_t,"td,th",ht).bind(gn=>Tp(zt,"td,th",ht).bind(An=>D2(at,ht,gn,An,tn))),D2=(at,ht,_t,kt,zt)=>ur(_t,kt)?Wt.none():ey(_t,kt,ht).bind(Ht=>{const tn=Ht.boxes.getOr([]);return tn.length>1?(zt(at,tn,Ht.start,Ht.finish),Wt.some(YC.create(Wt.some(FT(_t,0,_t,Bm(_t))),!0))):Wt.none()}),zT=(at,ht,_t,kt,zt)=>{const Ht=tn=>(zt.clearBeforeUpdate(_t),zt.selectRange(_t,tn.boxes,tn.start,tn.finish),tn.boxes);return g2(kt,at,ht,zt.firstSelectedSelector,zt.lastSelectedSelector).map(Ht)},PE=(at,ht)=>({item:at,mode:ht}),dP=(at,ht,_t,kt=JC)=>at.property().parent(ht).map(zt=>PE(zt,kt)),JC=(at,ht,_t,kt=QC)=>_t.sibling(at,ht).map(zt=>PE(zt,kt)),QC=(at,ht,_t,kt=QC)=>{const zt=at.property().children(ht);return _t.first(zt).map(tn=>PE(tn,kt))},t8=[{current:dP,next:JC,fallback:Wt.none()},{current:JC,next:QC,fallback:Wt.some(dP)},{current:QC,next:QC,fallback:Wt.some(JC)}],fP=(at,ht,_t,kt,zt=t8)=>Xt(zt,tn=>tn.current===_t).bind(tn=>tn.current(at,ht,kt,tn.next).orThunk(()=>tn.fallback.bind(gn=>fP(at,ht,gn,kt)))),_k={left:()=>({sibling:(_t,kt)=>_t.query().prevSibling(kt),first:_t=>_t.length>0?Wt.some(_t[_t.length-1]):Wt.none()}),right:()=>({sibling:(_t,kt)=>_t.query().nextSibling(kt),first:_t=>_t.length>0?Wt.some(_t[0]):Wt.none()})},wR=(at,ht,_t,kt,zt,Ht)=>fP(at,ht,kt,zt).bind(gn=>Ht(gn.item)?Wt.none():_t(gn.item)?Wt.some(gn.item):wR(at,gn.item,_t,gn.mode,zt,Ht)),CR=(at,ht,_t,kt)=>wR(at,ht,_t,JC,_k.left(),kt),o8=(at,ht,_t,kt)=>wR(at,ht,_t,JC,_k.right(),kt),kR=at=>ht=>at.property().children(ht).length===0,hP=(at,ht,_t)=>eS(at,ht,kR(at),_t),pP=(at,ht,_t)=>gP(at,ht,kR(at),_t),eS=CR,gP=o8,BT=dx(),_w=(at,ht)=>hP(BT,at,ht),vx=(at,ht)=>pP(BT,at,ht),OE=(at,ht,_t)=>eS(BT,at,ht,_t),DE=(at,ht,_t)=>gP(BT,at,ht,_t),r8=(at,ht,_t)=>dr(at,ht,_t).isSome(),Iy=S2.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),H1=(at,ht,_t)=>{const kt=at.getRect(ht),zt=at.getRect(_t);return zt.right>kt.left&&zt.left<kt.right},SR=at=>Tp(at,"tr"),xw={...Iy,verify:(at,ht,_t,kt,zt,Ht,tn)=>Tp(kt,"td,th",tn).bind(gn=>Tp(ht,"td,th",tn).map(An=>ur(gn,An)?ur(kt,gn)&&Bm(gn)===zt?Ht(An):Iy.none("in same cell"):h2(SR,[gn,An]).fold(()=>H1(at,An,gn)?Iy.success():Ht(An),no=>Ht(An)))).getOr(Iy.none("default")),cata:(at,ht,_t,kt,zt)=>at.fold(ht,_t,kt,zt)},tS=(at,ht,_t,kt)=>({parent:at,children:ht,element:_t,index:kt}),a0=at=>Bl(at).bind(ht=>{const _t=Cs(ht);return ER(_t,at).map(kt=>tS(ht,_t,at,kt))}),ER=(at,ht)=>Ur(at,qt(ur,ht)),$T=Br("br"),L2=(at,ht,_t)=>ht(at,_t).bind(kt=>mo(kt)&&op(kt).trim().length===0?L2(kt,ht,_t):Wt.some(kt)),NE=(at,ht,_t)=>_t.traverse(ht).orThunk(()=>L2(ht,_t.gather,at)).map(_t.relative),i8=(at,ht)=>Rl(at,ht).filter($T).orThunk(()=>Rl(at,ht-1).filter($T)),AR=(at,ht,_t,kt)=>i8(ht,_t).bind(zt=>kt.traverse(zt).fold(()=>L2(zt,kt.gather,at).map(kt.relative),Ht=>a0(Ht).map(tn=>am.on(tn.parent,tn.index)))),LE=(at,ht,_t,kt)=>($T(ht)?NE(at,ht,kt):AR(at,ht,_t,kt)).map(Ht=>({start:Ht,finish:Ht})),l0=at=>xw.cata(at,ht=>Wt.none(),()=>Wt.none(),ht=>Wt.some(iT(ht,0)),ht=>Wt.some(iT(ht,Bm(ht)))),TR=(at,ht)=>({left:at.left,top:at.top+ht,right:at.right,bottom:at.bottom+ht}),xv=(at,ht)=>({left:at.left,top:at.top-ht,right:at.right,bottom:at.bottom-ht}),IR=(at,ht,_t)=>({left:at.left+ht,top:at.top+_t,right:at.right+ht,bottom:at.bottom+_t}),nS=at=>at.top,oS=at=>at.bottom,RR=(at,ht,_t)=>_t>=0&&_t<Bm(ht)?at.getRangedRect(ht,_t,ht,_t+1):_t>0?at.getRangedRect(ht,_t-1,ht,_t):Wt.none(),_x=at=>({left:at.left,top:at.top,right:at.right,bottom:at.bottom}),MR=(at,ht)=>Wt.some(at.getRect(ht)),PR=(at,ht,_t)=>yl(ht)?MR(at,ht).map(_x):mo(ht)?RR(at,ht,_t).map(_x):Wt.none(),OR=(at,ht)=>yl(ht)?MR(at,ht).map(_x):mo(ht)?at.getRangedRect(ht,0,ht,Bm(ht)).map(_x):Wt.none(),F_=5,GT=100,p0=S2.generate([{none:[]},{retry:["caret"]}]),mP=(at,ht)=>at.left<ht.left||Math.abs(ht.right-at.left)<1||at.left>ht.right,DR=(at,ht,_t)=>gu(ht,Uo).fold(Mn,kt=>OR(at,kt).exists(zt=>mP(_t,zt))),NR=(at,ht,_t,kt,zt)=>{const Ht=TR(zt,F_);return Math.abs(_t.bottom-kt.bottom)<1||_t.top>zt.bottom?p0.retry(Ht):_t.top===zt.bottom?p0.retry(TR(zt,1)):DR(at,ht,zt)?p0.retry(IR(Ht,F_,0)):p0.none()},LR={point:nS,adjuster:(at,ht,_t,kt,zt)=>{const Ht=xv(zt,F_);return Math.abs(_t.top-kt.top)<1||_t.bottom<zt.top?p0.retry(Ht):_t.bottom===zt.top?p0.retry(xv(zt,1)):DR(at,ht,zt)?p0.retry(IR(Ht,F_,0)):p0.none()},move:xv,gather:_w},bP={point:oS,adjuster:NR,move:TR,gather:vx},vP=(at,ht,_t)=>at.elementFromPoint(ht,_t).filter(kt=>Zs(kt)==="table").isSome(),Zy=(at,ht,_t,kt,zt)=>ww(at,ht,_t,ht.move(kt,F_),zt),ww=(at,ht,_t,kt,zt)=>zt===0?Wt.some(kt):vP(at,kt.left,ht.point(kt))?Zy(at,ht,_t,kt,zt-1):at.situsFromPoint(kt.left,ht.point(kt)).bind(Ht=>Ht.start.fold(Wt.none,tn=>OR(at,tn).bind(gn=>ht.adjuster(at,tn,gn,_t,kt).fold(Wt.none,An=>ww(at,ht,_t,An,zt-1))).orThunk(()=>Wt.some(kt)),Wt.none)),_P=(at,ht,_t)=>at.point(ht)>_t.getInnerHeight()?Wt.some(at.point(ht)-_t.getInnerHeight()):at.point(ht)<0?Wt.some(-at.point(ht)):Wt.none(),F2=(at,ht,_t)=>{const kt=at.move(_t,F_),zt=ww(ht,at,_t,kt,GT).getOr(kt);return _P(at,zt,ht).fold(()=>ht.situsFromPoint(zt.left,at.point(zt)),Ht=>(ht.scrollBy(0,Ht),ht.situsFromPoint(zt.left,at.point(zt)-Ht)))},$0={tryUp:qt(F2,LR),tryDown:qt(F2,bP),getJumpSize:Tt(F_)},Ry=20,G0=(at,ht,_t)=>at.getSelection().bind(kt=>LE(ht,kt.finish,kt.foffset,_t).fold(()=>Wt.some(iT(kt.finish,kt.foffset)),zt=>{const Ht=at.fromSitus(zt),tn=xw.verify(at,kt.finish,kt.foffset,Ht.finish,Ht.foffset,_t.failure,ht);return l0(tn)})),Ky=(at,ht,_t,kt,zt,Ht)=>Ht===0?Wt.none():z2(at,ht,_t,kt,zt).bind(tn=>{const gn=at.fromSitus(tn),An=xw.verify(at,_t,kt,gn.finish,gn.foffset,zt.failure,ht);return xw.cata(An,()=>Wt.none(),()=>Wt.some(tn),no=>ur(_t,no)&&kt===0?jT(at,_t,kt,xv,zt):Ky(at,ht,no,0,zt,Ht-1),no=>ur(_t,no)&&kt===Bm(no)?jT(at,_t,kt,TR,zt):Ky(at,ht,no,Bm(no),zt,Ht-1))}),jT=(at,ht,_t,kt,zt)=>PR(at,ht,_t).bind(Ht=>Yy(at,zt,kt(Ht,$0.getJumpSize()))),Yy=(at,ht,_t)=>{const kt=ep().browser;return kt.isChromium()||kt.isSafari()||kt.isFirefox()?ht.retry(at,_t):Wt.none()},z2=(at,ht,_t,kt,zt)=>PR(at,_t,kt).bind(Ht=>Yy(at,zt,Ht)),xP=(at,ht,_t)=>G0(at,ht,_t).bind(kt=>Ky(at,ht,kt.element,kt.offset,_t,Ry).map(at.fromSitus)),fB=(at,ht)=>r8(at,_t=>Bl(_t).exists(kt=>ur(kt,ht))),a8=(at,ht,_t,kt,zt)=>Tp(kt,"td,th",ht).bind(Ht=>Tp(Ht,"table",ht).bind(tn=>fB(zt,tn)?xP(at,ht,_t).bind(gn=>Tp(gn.finish,"td,th",ht).map(An=>({start:Ht,finish:An,range:gn}))):Wt.none())),FR=(at,ht,_t,kt,zt,Ht)=>Ht(kt,ht).orThunk(()=>a8(at,ht,_t,kt,zt).map(tn=>{const gn=tn.range;return YC.create(Wt.some(FT(gn.start,gn.soffset,gn.finish,gn.foffset)),!0)})),l8=(at,ht)=>Tp(at,"tr",ht).bind(_t=>Tp(_t,"table",ht).bind(kt=>{const zt=Jl(kt,"tr");return ur(_t,zt[0])?OE(kt,Ht=>i2(Ht).isSome(),ht).map(Ht=>{const tn=Bm(Ht);return YC.create(Wt.some(FT(Ht,tn,Ht,tn)),!0)}):Wt.none()})),HT=(at,ht)=>Tp(at,"tr",ht).bind(_t=>Tp(_t,"table",ht).bind(kt=>{const zt=Jl(kt,"tr");return ur(_t,zt[zt.length-1])?DE(kt,Ht=>Jx(Ht).isSome(),ht).map(Ht=>YC.create(Wt.some(FT(Ht,0,Ht,0)),!0)):Wt.none()})),c0=(at,ht,_t,kt,zt,Ht,tn)=>a8(at,_t,kt,zt,Ht).bind(gn=>D2(ht,_t,gn.start,gn.finish,tn)),FE=at=>{let ht=at;return{get:()=>ht,set:zt=>{ht=zt}}},zE=at=>{const ht=FE(Wt.none()),_t=()=>ht.get().each(at);return{clear:()=>{_t(),ht.set(Wt.none())},isSet:()=>ht.get().isSome(),get:()=>ht.get(),set:gn=>{_t(),ht.set(Wt.some(gn))}}},Cw=()=>{const at=zE(Rt);return{...at,on:_t=>at.get().each(_t)}},zR=(at,ht)=>Tp(at,"td,th",ht),UT=at=>eu(at).exists(nw),BR=(at,ht,_t,kt)=>{const zt=Cw(),Ht=zt.clear,tn=Ro=>{zt.on(gr=>{kt.clearBeforeUpdate(ht),zR(Ro.target,_t).each(Nr=>{ey(gr,Nr,_t).each(Rr=>{const Cr=Rr.boxes.getOr([]);if(Cr.length===1){const ss=Cr[0],cr=u2(ss)==="false",kr=mu(U4(Ro.target),ss,ur);cr&&kr&&kt.selectRange(ht,Cr,ss,ss)}else Cr.length>1&&(kt.selectRange(ht,Cr,Rr.start,Rr.finish),at.selectContents(Nr))})})})};return{clearstate:Ht,mousedown:Ro=>{kt.clear(ht),zR(Ro.target,_t).filter(UT).each(zt.set)},mouseover:Ro=>{tn(Ro)},mouseup:Ro=>{tn(Ro),Ht()}}},VT={traverse:cm,gather:vx,relative:am.before,retry:$0.tryDown,failure:xw.failedDown},$R={traverse:Qp,gather:_w,relative:am.before,retry:$0.tryUp,failure:xw.failedUp},rS=at=>ht=>ht===at,xx=rS(38),BE=rS(40),B2=at=>at>=37&&at<=40,wx={isBackward:rS(37),isForward:rS(39)},wP={isBackward:rS(39),isForward:rS(37)},My=at=>{const ht=at!==void 0?at.dom:document,_t=ht.body.scrollLeft||ht.documentElement.scrollLeft,kt=ht.body.scrollTop||ht.documentElement.scrollTop;return fs(_t,kt)},GR=(at,ht,_t)=>{const zt=(_t!==void 0?_t.dom:document).defaultView;zt&&zt.scrollBy(at,ht)},kw=S2.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),$2=at=>kw.exact(at.start,at.soffset,at.finish,at.foffset),WT=at=>at.match({domRange:ht=>io.fromDom(ht.startContainer),relative:(ht,_t)=>am.getStart(ht),exact:(ht,_t,kt,zt)=>ht}),qT=kw.domRange,c8=kw.relative,u8=kw.exact,CP=at=>{const ht=WT(at);return As(ht)},kP=vw.create,G2={domRange:qT,relative:c8,exact:u8,exactFromRange:$2,getWin:CP,range:kP},sS=(at,ht,_t)=>{var kt;return Wt.from((kt=at.caretPositionFromPoint)===null||kt===void 0?void 0:kt.call(at,ht,_t)).bind(zt=>{if(zt.offsetNode===null)return Wt.none();const Ht=at.createRange();return Ht.setStart(zt.offsetNode,zt.offset),Ht.collapse(),Wt.some(Ht)})},$E=(at,ht,_t)=>{var kt;return Wt.from((kt=at.caretRangeFromPoint)===null||kt===void 0?void 0:kt.call(at,ht,_t))},d8=(at,ht,_t)=>at.caretPositionFromPoint?sS(at,ht,_t):at.caretRangeFromPoint?$E(at,ht,_t):Wt.none(),SP=(at,ht,_t)=>{const kt=at.document;return d8(kt,ht,_t).map(zt=>vw.create(io.fromDom(zt.startContainer),zt.startOffset,io.fromDom(zt.endContainer),zt.endOffset))},GE=(at,ht)=>{const _t=Zs(at);return _t==="input"?am.after(at):Hn(["br","img"],_t)?ht===0?am.before(at):am.after(at):am.on(at,ht)},ZT=(at,ht)=>{const _t=at.fold(am.before,GE,am.after),kt=ht.fold(am.before,GE,am.after);return G2.relative(_t,kt)},jR=(at,ht,_t,kt)=>{const zt=GE(at,ht),Ht=GE(_t,kt);return G2.relative(zt,Ht)},EP=(at,ht,_t,kt)=>{const Ht=rs(at).dom.createRange();return Ht.setStart(at.dom,ht),Ht.setEnd(_t.dom,kt),Ht},KT=(at,ht,_t,kt)=>{const zt=EP(at,ht,_t,kt),Ht=ur(at,_t)&&ht===kt;return zt.collapsed&&!Ht},iS=at=>Wt.from(at.getSelection()),AP=(at,ht)=>{iS(at).each(_t=>{_t.removeAllRanges(),_t.addRange(ht)})},j2=(at,ht,_t,kt,zt)=>{const Ht=ME(at,ht,_t,kt,zt);AP(at,Ht)},Zl=(at,ht,_t,kt,zt,Ht)=>{ht.collapse(_t.dom,kt),ht.extend(zt.dom,Ht)},Cx=(at,ht)=>xR(at,ht).match({ltr:(_t,kt,zt,Ht)=>{j2(at,_t,kt,zt,Ht)},rtl:(_t,kt,zt,Ht)=>{iS(at).each(tn=>{if(tn.setBaseAndExtent)tn.setBaseAndExtent(_t.dom,kt,zt.dom,Ht);else if(tn.extend)try{Zl(at,tn,_t,kt,zt,Ht)}catch{j2(at,zt,Ht,_t,kt)}else j2(at,zt,Ht,_t,kt)})}}),Sw=(at,ht,_t,kt,zt)=>{const Ht=jR(ht,_t,kt,zt);Cx(at,Ht)},YT=(at,ht,_t)=>{const kt=ZT(ht,_t);Cx(at,kt)},HR=at=>{if(at.rangeCount>0){const ht=at.getRangeAt(0),_t=at.getRangeAt(at.rangeCount-1);return Wt.some(vw.create(io.fromDom(ht.startContainer),ht.startOffset,io.fromDom(_t.endContainer),_t.endOffset))}else return Wt.none()},jE=at=>{if(at.anchorNode===null||at.focusNode===null)return HR(at);{const ht=io.fromDom(at.anchorNode),_t=io.fromDom(at.focusNode);return KT(ht,at.anchorOffset,_t,at.focusOffset)?Wt.some(vw.create(ht,at.anchorOffset,_t,at.focusOffset)):HR(at)}},H2=(at,ht,_t=!0)=>{const zt=(_t?NT:bw)(at,ht);AP(at,zt)},HE=at=>iS(at).filter(ht=>ht.rangeCount>0).bind(jE),XT=at=>HE(at).map(ht=>G2.exact(ht.start,ht.soffset,ht.finish,ht.foffset)),TP=(at,ht)=>{const _t=LT(at,ht);return JL(_t)},f8=(at,ht,_t)=>SP(at,ht,_t),U2=at=>{iS(at).each(ht=>ht.removeAllRanges())},JT=at=>({elementFromPoint:(cr,kr)=>io.fromPoint(io.fromDom(at.document),cr,kr),getRect:cr=>cr.dom.getBoundingClientRect(),getRangedRect:(cr,kr,Er,$s)=>{const Gl=G2.exact(cr,kr,Er,$s);return TP(at,Gl)},getSelection:()=>XT(at).map(cr=>uP(at,cr)),fromSitus:cr=>{const kr=G2.relative(cr.start,cr.finish);return uP(at,kr)},situsFromPoint:(cr,kr)=>f8(at,cr,kr).map(Er=>cP.create(Er.start,Er.soffset,Er.finish,Er.foffset)),clearSelection:()=>{U2(at)},collapseSelection:(cr=!1)=>{XT(at).each(kr=>kr.fold(Er=>Er.collapse(cr),(Er,$s)=>{const Gl=cr?Er:$s;YT(at,Gl,Gl)},(Er,$s,Gl,Cu)=>{const Qu=cr?Er:Gl,pp=cr?$s:Cu;Sw(at,Qu,pp,Qu,pp)}))},setSelection:cr=>{Sw(at,cr.start,cr.soffset,cr.finish,cr.foffset)},setRelativeSelection:(cr,kr)=>{YT(at,cr,kr)},selectNode:cr=>{H2(at,cr,!1)},selectContents:cr=>{H2(at,cr)},getInnerHeight:()=>at.innerHeight,getScrollY:()=>My(io.fromDom(at.document)).top,scrollBy:(cr,kr)=>{GR(cr,kr,io.fromDom(at.document))}}),Ew=(at,ht)=>({rows:at,cols:ht}),UR=(at,ht,_t,kt)=>{const zt=JT(at),Ht=BR(zt,ht,_t,kt);return{clearstate:Ht.clearstate,mousedown:Ht.mousedown,mouseover:Ht.mouseover,mouseup:Ht.mouseup}},VR=at=>gu(at,es).exists(nw),V2=(at,ht)=>VR(at)||VR(ht),WR=(at,ht,_t,kt)=>{const zt=JT(at),Ht=()=>(kt.clear(ht),Wt.none());return{keydown:(An,no,Ro,gr,Nr,Rr)=>{const Cr=An.raw,ss=Cr.which,cr=Cr.shiftKey===!0;return RC(ht,kt.selectedSelector).fold(()=>(B2(ss)&&!cr&&kt.clearBeforeUpdate(ht),B2(ss)&&cr&&!V2(no,gr)?Wt.none:BE(ss)&&cr?qt(c0,zt,ht,_t,VT,gr,no,kt.selectRange):xx(ss)&&cr?qt(c0,zt,ht,_t,$R,gr,no,kt.selectRange):BE(ss)?qt(FR,zt,_t,VT,gr,no,HT):xx(ss)?qt(FR,zt,_t,$R,gr,no,l8):Wt.none),Er=>{const $s=Gl=>()=>Ln(Gl,Qu=>zT(Qu.rows,Qu.cols,ht,Er,kt)).fold(()=>sw(ht,kt.firstSelectedSelector,kt.lastSelectedSelector).map(Qu=>{const pp=BE(ss)||Rr.isForward(ss)?am.after:am.before;return zt.setRelativeSelection(am.on(Qu.first,0),pp(Qu.table)),kt.clear(ht),YC.create(Wt.none(),!0)}),Qu=>Wt.some(YC.create(Wt.none(),!0)));return B2(ss)&&cr&&!V2(no,gr)?Wt.none:BE(ss)&&cr?$s([Ew(1,0)]):xx(ss)&&cr?$s([Ew(-1,0)]):Rr.isBackward(ss)&&cr?$s([Ew(0,-1),Ew(-1,0)]):Rr.isForward(ss)&&cr?$s([Ew(0,1),Ew(1,0)]):B2(ss)&&!cr?Ht:Wt.none})()},keyup:(An,no,Ro,gr,Nr)=>RC(ht,kt.selectedSelector).fold(()=>{const Rr=An.raw,Cr=Rr.which;return Rr.shiftKey===!0&&B2(Cr)&&V2(no,gr)?e8(ht,_t,no,Ro,gr,Nr,kt.selectRange):Wt.none()},Wt.none)}},IP=(at,ht,_t,kt)=>{const zt=JT(at);return(Ht,tn)=>{kt.clearBeforeUpdate(ht),ey(Ht,tn,_t).each(gn=>{const An=gn.boxes.getOr([]);kt.selectRange(ht,An,gn.start,gn.finish),zt.selectContents(tn),zt.collapseSelection()})}},RP=(at,ht)=>{const _t=Mu(at,ht);return _t===void 0||_t===""?[]:_t.split(" ")},z_=(at,ht,_t)=>{const zt=RP(at,ht).concat([_t]);return _l(at,ht,zt.join(" ")),!0},MP=(at,ht,_t)=>{const kt=oo(RP(at,ht),zt=>zt!==_t);return kt.length>0?_l(at,ht,kt.join(" ")):$n(at,ht),!1},QT=at=>at.dom.classList!==void 0,wv=at=>RP(at,"class"),jm=(at,ht)=>z_(at,"class",ht),h8=(at,ht)=>MP(at,"class",ht),U1=(at,ht)=>{QT(at)?at.dom.classList.add(ht):jm(at,ht)},p8=at=>{(QT(at)?at.dom.classList:wv(at)).length===0&&$n(at,"class")},PP=(at,ht)=>{QT(at)?at.dom.classList.remove(ht):h8(at,ht),p8(at)},UE=(at,ht)=>QT(at)&&at.dom.classList.contains(ht),aS=(at,ht)=>{Tn(ht,_t=>{PP(at,_t)})},OP=at=>ht=>{U1(ht,at)},DP=at=>ht=>{aS(ht,at)},NP={byClass:at=>{const ht=OP(at.selected),_t=DP([at.selected,at.lastSelected,at.firstSelected]),kt=Ht=>{const tn=Jl(Ht,at.selectedSelector);Tn(tn,_t)};return{clearBeforeUpdate:kt,clear:kt,selectRange:(Ht,tn,gn,An)=>{kt(Ht),Tn(tn,ht),U1(gn,at.firstSelected),U1(An,at.lastSelected)},selectedSelector:at.selectedSelector,firstSelectedSelector:at.firstSelectedSelector,lastSelectedSelector:at.lastSelectedSelector}},byAttr:(at,ht,_t)=>{const kt=An=>{$n(An,at.selected),$n(An,at.firstSelected),$n(An,at.lastSelected)},zt=An=>{_l(An,at.selected,"1")},Ht=An=>{tn(An),_t()},tn=An=>{const no=Jl(An,`${at.selectedSelector},${at.firstSelectedSelector},${at.lastSelectedSelector}`);Tn(no,kt)};return{clearBeforeUpdate:tn,clear:Ht,selectRange:(An,no,Ro,gr)=>{Ht(An),Tn(no,zt),_l(Ro,at.firstSelected,"1"),_l(gr,at.lastSelected,"1"),ht(no,Ro,gr)},selectedSelector:at.selectedSelector,firstSelectedSelector:at.firstSelectedSelector,lastSelectedSelector:at.lastSelectedSelector}}},$r=(at,ht,_t,kt)=>{switch(at.tag){case"none":return ht();case"single":return kt(at.element);case"multiple":return _t(at.elements)}},Hm=()=>({tag:"none"}),eI=at=>({tag:"multiple",elements:at}),Um=at=>({tag:"single",element:at}),Cv=(at,ht,_t)=>({get:()=>rT(at(),_t).fold(()=>ht().fold(Hm,Um),eI)}),qR=(at,ht)=>{const _t=at.slice(0,ht[ht.length-1].row+1),kt=B3(_t);return Vo(kt,zt=>{const Ht=zt.cells.slice(0,ht[ht.length-1].column+1);return Fn(Ht,tn=>tn.element)})},VE=(at,ht)=>{const _t=at.slice(ht[0].row+ht[0].rowspan-1,at.length),kt=B3(_t);return Vo(kt,zt=>{const Ht=zt.cells.slice(ht[0].column+ht[0].colspan-1,zt.cells.length);return Fn(Ht,tn=>tn.element)})},lS=(at,ht,_t)=>{const kt=Sl.fromTable(at);return Ey(kt,ht).map(Ht=>{const tn=GC(kt,_t,!1),{rows:gn}=Iu(tn),An=qR(gn,Ht),no=VE(gn,Ht);return{upOrLeftCells:An,downOrRightCells:no}})},LP=(at,ht,_t,kt,zt,Ht,tn)=>({target:at,x:ht,y:_t,stop:kt,prevent:zt,kill:Ht,raw:tn}),Aw=at=>{const ht=io.fromDom(Vl(at).getOr(at.target)),_t=()=>at.stopPropagation(),kt=()=>at.preventDefault(),zt=It(kt,_t);return LP(ht,at.clientX,at.clientY,_t,kt,zt,at)},cS=(at,ht)=>_t=>{at(_t)&&ht(Aw(_t))},g8=(at,ht,_t,kt,zt)=>{const Ht=cS(_t,kt);return at.dom.addEventListener(ht,Ht,zt),{unbind:qt(y8,at,ht,Ht,zt)}},m8=(at,ht,_t,kt)=>g8(at,ht,_t,kt,!1),y8=(at,ht,_t,kt)=>{at.dom.removeEventListener(ht,_t,kt)},FP=ln,W2=(at,ht,_t)=>m8(at,ht,FP,_t),uS=Aw,q2=at=>!UE(io.fromDom(at.target),"ephox-snooker-resizer-bar"),tI=(at,ht)=>{const _t=Cv(()=>io.fromDom(at.getBody()),()=>sT(sE(at),Vy(at)),m2.selectedSelector),kt=(An,no,Ro)=>{Jm(no).each(Nr=>{const Rr=Fn(An,Er=>Er.dom),Cr=Qx(at),ss=J0(Rt,io.fromDom(at.getDoc()),Cr),cr=wu(at),kr=lS(Nr,{selection:cr},ss).map(Er=>Rn(Er,$s=>Fn($s,Gl=>Gl.dom))).getOrUndefined();FL(at,Rr,no.dom,Ro.dom,kr)})},zt=()=>vm(at),Ht=NP.byAttr(m2,kt,zt);return at.on("init",An=>{const no=at.getWin(),Ro=my(at),gr=Vy(at),Nr=()=>{const Bu=at.selection,oy=io.fromDom(Bu.getStart()),ry=io.fromDom(Bu.getEnd());h2(Jm,[oy,ry]).fold(()=>Ht.clear(Ro),Rt)},Rr=UR(no,Ro,gr,Ht),Cr=WR(no,Ro,gr,Ht),ss=IP(no,Ro,gr,Ht),cr=Bu=>Bu.raw.shiftKey===!0;at.on("TableSelectorChange",Bu=>ss(Bu.start,Bu.finish));const kr=(Bu,oy)=>{cr(Bu)&&(oy.kill&&Bu.kill(),oy.selection.each(ry=>{const Sv=G2.relative(ry.start,ry.finish),na=LT(no,Sv);at.selection.setRng(na)}))},Er=Bu=>{const oy=uS(Bu);if(oy.raw.shiftKey&&B2(oy.raw.which)){const ry=at.selection.getRng(),Sv=io.fromDom(ry.startContainer),na=io.fromDom(ry.endContainer);Cr.keyup(oy,Sv,ry.startOffset,na,ry.endOffset).each(yy=>{kr(oy,yy)})}},$s=Bu=>{const oy=uS(Bu);ht.hide();const ry=at.selection.getRng(),Sv=io.fromDom(ry.startContainer),na=io.fromDom(ry.endContainer),yy=rn(wx,wP)(io.fromDom(at.selection.getStart()));Cr.keydown(oy,Sv,ry.startOffset,na,ry.endOffset,yy).each(wm=>{kr(oy,wm)}),ht.show()},Gl=Bu=>Bu.button===0,Cu=Bu=>Bu.buttons===void 0?!0:(Bu.buttons&1)!==0,Qu=Bu=>{Rr.clearstate()},pp=Bu=>{Gl(Bu)&&q2(Bu)&&Rr.mousedown(uS(Bu))},Qy=Bu=>{Cu(Bu)&&q2(Bu)&&Rr.mouseover(uS(Bu))},q1=Bu=>{Gl(Bu)&&q2(Bu)&&Rr.mouseup(uS(Bu))},B_=(()=>{const Bu=FE(io.fromDom(Ro)),oy=FE(0);return{touchEnd:Sv=>{const na=io.fromDom(Sv.target);if(Br("td")(na)||Br("th")(na)){const yy=Bu.get(),wm=oy.get();ur(yy,na)&&Sv.timeStamp-wm<300&&(Sv.preventDefault(),ss(na,na))}Bu.set(na),oy.set(Sv.timeStamp)}}})();at.on("dragstart",Qu),at.on("mousedown",pp),at.on("mouseover",Qy),at.on("mouseup",q1),at.on("touchend",B_.touchEnd),at.on("keyup",Er),at.on("keydown",$s),at.on("NodeChange",Nr)}),at.on("PreInit",()=>{at.serializer.addTempAttr(m2.firstSelected),at.serializer.addTempAttr(m2.lastSelected)}),{getSelectedCells:()=>$r(_t.get(),Tt([]),An=>Fn(An,no=>no.dom),An=>[An.dom]),clearSelectedCells:An=>Ht.clear(io.fromDom(An))}},Xy=at=>{let ht=[];return{bind:Ht=>{if(Ht===void 0)throw new Error("Event bind error: undefined handler");ht.push(Ht)},unbind:Ht=>{ht=oo(ht,tn=>tn!==Ht)},trigger:(...Ht)=>{const tn={};Tn(at,(gn,An)=>{tn[gn]=Ht[An]}),Tn(ht,gn=>{gn(tn)})}}},V1=at=>{const ht=Rn(at,kt=>({bind:kt.bind,unbind:kt.unbind})),_t=Rn(at,kt=>kt.trigger);return{registry:ht,trigger:_t}},Z2=(at,ht)=>{let _t=null;const kt=()=>{st(_t)||(clearTimeout(_t),_t=null)};return{cancel:kt,throttle:(...Ht)=>{kt(),_t=setTimeout(()=>{_t=null,at.apply(null,Ht)},ht)}}},dS=at=>at.slice(0).sort(),nI=(at,ht)=>{throw new Error("All required keys ("+dS(at).join(", ")+") were not specified. Specified keys were: "+dS(ht).join(", ")+".")},oI=at=>{throw new Error("Unsupported keys for object: "+dS(at).join(", "))},b8=(at,ht)=>{if(!ot(ht))throw new Error("The "+at+" fields must be an array. Was: "+ht+".");Tn(ht,_t=>{if(!_(_t))throw new Error("The value "+_t+" in the "+at+" fields was not a string.")})},v8=(at,ht)=>{throw new Error("All values need to be of type: "+ht+". Keys ("+dS(at).join(", ")+") were not.")},_8=at=>{const ht=dS(at);Xt(ht,(kt,zt)=>zt<ht.length-1&&kt===ht[zt+1]).each(kt=>{throw new Error("The field: "+kt+" occurs more than once in the combined fields: ["+ht.join(", ")+"].")})},x8=(at,ht)=>zP(at,ht,{validate:wt,label:"function"}),zP=(at,ht,_t)=>{if(ht.length===0)throw new Error("You must specify at least one required field.");return b8("required",ht),_8(ht),kt=>{const zt=Bn(kt);yo(ht,gn=>Hn(zt,gn))||nI(ht,zt),at(ht,zt);const tn=oo(ht,gn=>!_t.validate(kt[gn],gn));return tn.length>0&&v8(tn,_t.label),kt}},BP=(at,ht)=>{const _t=oo(ht,kt=>!Hn(at,kt));_t.length>0&&oI(_t)},ZR=at=>x8(BP,at),rI=ZR(["compare","extract","mutate","sink"]),S0=ZR(["element","start","stop","destroy"]),kv=ZR(["forceDrop","drop","move","delayDrop"]),Jy=()=>{let at=Wt.none();const ht=()=>{at=Wt.none()},_t=(Ht,tn)=>{const gn=at.map(An=>Ht.compare(An,tn));return at=Wt.some(tn),gn},kt=(Ht,tn)=>{tn.extract(Ht).each(An=>{_t(tn,An).each(Ro=>{zt.trigger.move(Ro)})})},zt=V1({move:Xy(["info"])});return{onEvent:kt,reset:ht,events:zt.registry}},WE=()=>{const at=V1({move:Xy(["info"])});return{onEvent:Rt,reset:Rt,events:at.registry}},KR=()=>{const at=WE(),ht=Jy();let _t=at;return{on:()=>{_t.reset(),_t=ht},off:()=>{_t.reset(),_t=at},isOn:()=>_t===ht,onEvent:(gn,An)=>{_t.onEvent(gn,An)},events:ht.events}},$P=(at,ht,_t)=>{let kt=!1;const zt=V1({start:Xy([]),stop:Xy([])}),Ht=KR(),tn=()=>{Cr.stop(),Ht.isOn()&&(Ht.off(),zt.trigger.stop())},gn=Z2(tn,200),An=cr=>{Cr.start(cr),Ht.on(),zt.trigger.start()},no=cr=>{gn.cancel(),Ht.onEvent(cr,ht)};Ht.events.move.bind(cr=>{ht.mutate(at,cr.info)});const Ro=()=>{kt=!0},gr=()=>{kt=!1},Nr=()=>kt,Rr=cr=>(...kr)=>{kt&&cr.apply(null,kr)},Cr=ht.sink(kv({forceDrop:tn,drop:Rr(tn),move:Rr(no),delayDrop:Rr(gn.throttle)}),_t),ss=()=>{Cr.destroy()};return{element:Cr.element,go:An,on:Ro,off:gr,isActive:Nr,destroy:ss,events:zt.registry}},sI=at=>{const ht=at.replace(/\./g,"-");return{resolve:kt=>ht+"-"+kt}},iI=sI("ephox-dragster").resolve,C8=at=>{const ht={layerClass:iI("blocker"),...at},_t=io.fromTag("div");return _l(_t,"role","presentation"),vu(_t,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),U1(_t,iI("blocker")),U1(_t,ht.layerClass),{element:Tt(_t),destroy:()=>{mp(_t)}}};var lI=rI({compare:(at,ht)=>fs(ht.left-at.left,ht.top-at.top),extract:at=>Wt.some(fs(at.x,at.y)),sink:(at,ht)=>{const _t=C8(ht),kt=W2(_t.element(),"mousedown",at.forceDrop),zt=W2(_t.element(),"mouseup",at.drop),Ht=W2(_t.element(),"mousemove",at.move),tn=W2(_t.element(),"mouseout",at.delayDrop),gn=()=>{_t.destroy(),zt.unbind(),Ht.unbind(),tn.unbind(),kt.unbind()},An=Ro=>{Tu(Ro,_t.element())},no=()=>{mp(_t.element())};return S0({element:_t.element,start:An,stop:no,destroy:gn})},mutate:(at,ht)=>{at.mutate(ht.left,ht.top)}});const zu=(at,ht={})=>{var _t;const kt=(_t=ht.mode)!==null&&_t!==void 0?_t:lI;return $P(at,kt,ht)},W1=sI("ephox-snooker").resolve,jP=()=>{const at=V1({drag:Xy(["xDelta","yDelta"])});return{mutate:(_t,kt)=>{at.trigger.drag(_t,kt)},events:at.registry}},YR=()=>{const at=V1({drag:Xy(["xDelta","yDelta","target"])});let ht=Wt.none();const _t=jP();return _t.events.drag.bind(Ht=>{ht.each(tn=>{at.trigger.drag(Ht.xDelta,Ht.yDelta,tn)})}),{assign:Ht=>{ht=Wt.some(Ht)},get:()=>ht,mutate:_t.mutate,events:at.registry}},fS=(at,ht,_t,kt,zt)=>{const Ht=io.fromTag("div");return vu(Ht,{position:"absolute",left:ht-kt/2+"px",top:_t+"px",height:zt+"px",width:kt+"px"}),Wu(Ht,{"data-column":at,role:"presentation"}),Ht},cI=(at,ht,_t,kt,zt)=>{const Ht=io.fromTag("div");return vu(Ht,{position:"absolute",left:ht+"px",top:_t-zt/2+"px",height:zt+"px",width:kt+"px"}),Wu(Ht,{"data-row":at,role:"presentation"}),Ht},qE=W1("resizer-bar"),XR=W1("resizer-rows"),HP=W1("resizer-cols"),JR=7,UP=(at,ht)=>Vo(at.all,(_t,kt)=>ht(_t.element)?[kt]:[]),ZE=(at,ht)=>{const _t=[];return fo(at.grid.columns,kt=>{Sl.getColumnAt(at,kt).map(Ht=>Ht.element).forall(ht)&&_t.push(kt)}),oo(_t,kt=>{const zt=Sl.filterItems(at,Ht=>Ht.column===kt);return yo(zt,Ht=>ht(Ht.element))})},K2=at=>{const ht=Jl(at.parent(),"."+qE);Tn(ht,mp)},uI=(at,ht,_t)=>{const kt=at.origin();Tn(ht,zt=>{zt.each(Ht=>{const tn=_t(kt,Ht);U1(tn,qE),Tu(at.parent(),tn)})})},E8=(at,ht,_t,kt)=>{uI(at,ht,(zt,Ht)=>{const tn=fS(Ht.col,Ht.x-zt.left,_t.top-zt.top,JR,kt);return U1(tn,HP),tn})},A8=(at,ht,_t,kt)=>{uI(at,ht,(zt,Ht)=>{const tn=cI(Ht.row,_t.left-zt.left,Ht.y-zt.top,kt,JR);return U1(tn,XR),tn})},T8=(at,ht,_t,kt,zt)=>{const Ht=n0(_t),tn=ht.isResizable,gn=kt.length>0?ws.positions(kt,_t):[],An=gn.length>0?UP(at,tn):[],no=oo(gn,(Rr,Cr)=>cn(An,ss=>Cr===ss));A8(ht,no,Ht,$v(_t));const Ro=zt.length>0?ix.positions(zt,_t):[],gr=Ro.length>0?ZE(at,tn):[],Nr=oo(Ro,(Rr,Cr)=>cn(gr,ss=>Cr===ss));E8(ht,Nr,Ht,ks(_t))},Py=(at,ht)=>{if(K2(at),at.isResizable(ht)){const _t=Sl.fromTable(ht),kt=Lt(_t),zt=C_(_t);T8(_t,at,ht,kt,zt)}},g0=(at,ht)=>{const _t=Jl(at.parent(),"."+qE);Tn(_t,ht)},hS=at=>{g0(at,ht=>{_i(ht,"display","none")})},gB=at=>{g0(at,ht=>{_i(ht,"display","block")})},I8=at=>UE(at,XR),R8=at=>UE(at,HP),$l=W1("resizer-bar-dragging"),M8=at=>{const ht=YR(),_t=zu(ht,{});let kt=Wt.none();const zt=(Cr,ss)=>Wt.from(Mu(Cr,ss));ht.events.drag.bind(Cr=>{zt(Cr.target,"data-row").each(ss=>{const cr=ju(Cr.target,"top");_i(Cr.target,"top",cr+Cr.yDelta+"px")}),zt(Cr.target,"data-column").each(ss=>{const cr=ju(Cr.target,"left");_i(Cr.target,"left",cr+Cr.xDelta+"px")})});const Ht=(Cr,ss)=>{const cr=ju(Cr,ss),kr=Pp(Cr,"data-initial-"+ss,0);return cr-kr};_t.events.stop.bind(()=>{ht.get().each(Cr=>{kt.each(ss=>{zt(Cr,"data-row").each(cr=>{const kr=Ht(Cr,"top");$n(Cr,"data-initial-top"),Rr.trigger.adjustHeight(ss,kr,parseInt(cr,10))}),zt(Cr,"data-column").each(cr=>{const kr=Ht(Cr,"left");$n(Cr,"data-initial-left"),Rr.trigger.adjustWidth(ss,kr,parseInt(cr,10))}),Py(at,ss)})})});const tn=(Cr,ss)=>{Rr.trigger.startAdjust(),ht.assign(Cr),_l(Cr,"data-initial-"+ss,ju(Cr,ss)),U1(Cr,$l),_i(Cr,"opacity","0.2"),_t.go(at.parent())},gn=W2(at.parent(),"mousedown",Cr=>{I8(Cr.target)&&tn(Cr.target,"top"),R8(Cr.target)&&tn(Cr.target,"left")}),An=Cr=>ur(Cr,at.view()),no=Cr=>Tp(Cr,"table",An).filter(nw),Ro=W2(at.view(),"mouseover",Cr=>{no(Cr.target).fold(()=>{Ls(Cr.target)&&K2(at)},ss=>{_t.isActive()&&(kt=Wt.some(ss),Py(at,ss))})}),gr=()=>{gn.unbind(),Ro.unbind(),_t.destroy(),K2(at)},Nr=Cr=>{Py(at,Cr)},Rr=V1({adjustHeight:Xy(["table","delta","row"]),adjustWidth:Xy(["table","delta","column"]),startAdjust:Xy([])});return{destroy:gr,refresh:Nr,on:_t.on,off:_t.off,hideBars:qt(hS,at),showBars:qt(gB,at),events:Rr.registry}},QR={create:(at,ht,_t)=>{const kt=ws,zt=ix,Ht=M8(at),tn=V1({beforeResize:Xy(["table","type"]),afterResize:Xy(["table","type"]),startDrag:Xy([])});return Ht.events.adjustHeight.bind(gn=>{const An=gn.table;tn.trigger.beforeResize(An,"row");const no=kt.delta(gn.delta,An);U3(An,no,gn.row),tn.trigger.afterResize(An,"row")}),Ht.events.startAdjust.bind(gn=>{tn.trigger.startDrag()}),Ht.events.adjustWidth.bind(gn=>{const An=gn.table;tn.trigger.beforeResize(An,"col");const no=zt.delta(gn.delta,An),Ro=_t(An);mM(An,no,gn.column,ht,Ro),tn.trigger.afterResize(An,"col")}),{on:Ht.on,off:Ht.off,refreshBars:Ht.refresh,hideBars:Ht.hideBars,showBars:Ht.showBars,destroy:Ht.destroy,events:tn.registry}}},KE={only:(at,ht)=>{const _t=Oo(at)?ms(at):at;return{parent:Tt(_t),view:Tt(at),origin:Tt(fs(0,0)),isResizable:ht}},detached:(at,ht,_t)=>{const kt=()=>n0(ht);return{parent:Tt(ht),view:Tt(at),origin:kt,isResizable:_t}},body:(at,ht,_t)=>({parent:Tt(ht),view:Tt(at),origin:Tt(fs(0,0)),isResizable:_t})},O8=()=>{const at=io.fromTag("div");return vu(at,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Tu(Lu(),at),at},D8=(at,ht)=>at.inline?KE.body(io.fromDom(at.getBody()),O8(),ht):KE.only(io.fromDom(at.getDoc()),ht),e5=(at,ht)=>{at.inline&&mp(ht.parent())},dI=at=>bt(at)&&at.nodeName==="TABLE",fI="bar-",bB=at=>Mu(at,"data-mce-resize")!=="false",N8=at=>{const ht=Sl.fromTable(at);Sl.hasColumns(ht)||Tn(Nv(at),_t=>{const kt=bp(_t,"width");_i(_t,"width",kt),$n(_t,"width")})},YE=at=>P0(at,"corner-"),t5=at=>M0(at,"corner-"),L8=at=>{const ht=Cw(),_t=Cw(),kt=Cw();let zt,Ht,tn,gn;const An=kr=>ST(at,kr),no=()=>L1(at)?px():aw(),Ro=kr=>y2(kr).columns,gr=kr=>y2(kr).rows,Nr=(kr,Er,$s,Gl)=>{const Cu=t5(Er),Qu=Nm(Cu,"e"),pp=P0(Cu,"n");if(Ht===""&&O2(kr),gn===""&&$L(kr),$s!==zt&&Ht!==""){_i(kr,"width",Ht);const Qy=no(),q1=An(kr),Y2=L1(at)||Qu?Ro(kr)-1:0;mM(kr,$s-zt,Y2,Qy,q1)}else if(C3(Ht)){const Qy=parseFloat(Ht.replace("%","")),q1=$s*Qy/zt;_i(kr,"width",q1+"%")}if(TC(Ht)&&N8(kr),Gl!==tn&&gn!==""){_i(kr,"height",gn);const Qy=pp?0:gr(kr)-1;U3(kr,Gl-tn,Qy)}},Rr=()=>{_t.on(kr=>{kr.destroy()}),kt.on(kr=>{e5(at,kr)})};return at.on("init",()=>{const kr=D8(at,bB);if(kt.set(kr),aL(at)&&XA(at)){const Er=no(),$s=QR.create(kr,Er,An);at.mode.isReadOnly()||$s.on(),$s.events.startDrag.bind(Gl=>{ht.set(at.selection.getRng())}),$s.events.beforeResize.bind(Gl=>{const Cu=Gl.table.dom;_m(at,Cu,iE(Cu),AC(Cu),fI+Gl.type)}),$s.events.afterResize.bind(Gl=>{const Cu=Gl.table,Qu=Cu.dom;Wy(Cu),ht.on(pp=>{at.selection.setRng(pp),at.focus()}),i0(at,Qu,iE(Qu),AC(Qu),fI+Gl.type),at.undoManager.add()}),_t.set($s)}}),at.on("ObjectResizeStart",kr=>{const Er=kr.target;if(dI(Er)&&!at.mode.isReadOnly()){const $s=io.fromDom(Er);Tn(at.dom.select(".mce-clonedresizable"),Gl=>{at.dom.addClass(Gl,"mce-"+YA(at)+"-columns")}),!jM($s)&&s0(at)?AE($s):!GM($s)&&F1(at)&&O2($s),HM($s)&&P0(kr.origin,fI)&&O2($s),zt=kr.width,Ht=ew(at)?"":V4(at,Er).getOr(""),tn=kr.height,gn=W4(at,Er).getOr("")}}),at.on("ObjectResized",kr=>{const Er=kr.target;if(dI(Er)){const $s=io.fromDom(Er),Gl=kr.origin;YE(Gl)&&Nr($s,Gl,kr.width,kr.height),Wy($s),R2(at,$s.dom,xm)}}),at.on("SwitchMode",()=>{_t.on(kr=>{at.mode.isReadOnly()?(kr.off(),kr.hideBars()):(kr.on(),kr.showBars())})}),at.on("dragstart dragend",kr=>{_t.on(Er=>{kr.type==="dragstart"?(Er.hideBars(),Er.off()):(Er.on(),Er.showBars())})}),at.on("remove",()=>{Rr()}),{refresh:kr=>{_t.on(Er=>Er.refreshBars(io.fromDom(kr)))},hide:()=>{_t.on(kr=>kr.hideBars())},show:()=>{_t.on(kr=>kr.showBars())}}},VP=at=>{oE(at);const ht=L8(at),_t=tI(at,ht),kt=aR(at,ht,_t);return ZL(at,kt),KL(at,kt),sB(at,kt),{getSelectedCells:_t.getSelectedCells,clearSelectedCells:_t.clearSelectedCells}},Os=at=>({table:VP(at)});var hI=()=>{o.add("dom",Os)};hI()})();(function(){const o=Object.getPrototypeOf,e=(h,j,nt)=>{var it;return nt(h,j.prototype)?!0:((it=h.constructor)===null||it===void 0?void 0:it.name)===j.name},s=h=>{const j=typeof h;return h===null?"null":j==="object"&&Array.isArray(h)?"array":j==="object"&&e(h,String,(nt,it)=>it.isPrototypeOf(nt))?"string":j},a=h=>j=>s(j)===h,d=h=>j=>typeof j===h,b=h=>j=>h===j,_=(h,j)=>ot(h)&&e(h,j,(nt,it)=>o(nt)===it),_e=a("string"),ot=a("object"),st=h=>_(h,Object),ct=a("array"),ft=b(null),mt=d("boolean"),bt=b(void 0),wt=h=>h==null,Ct=h=>!wt(h),Rt=d("function"),It=d("number"),Pt=(h,j)=>{if(ct(h)){for(let nt=0,it=h.length;nt<it;++nt)if(!j(h[nt]))return!1;return!0}return!1},Tt=()=>{},Gt=h=>()=>h(),Jt=(h,j)=>(...nt)=>h(j.apply(null,nt)),qt=(h,j)=>nt=>h(j(nt)),Nt=h=>()=>h,Qt=h=>h,fn=(h,j)=>h===j;function Mn(h,...j){return(...nt)=>{const it=j.concat(nt);return h.apply(null,it)}}const ln=h=>j=>!h(j),Wt=h=>()=>{throw new Error(h)},so=h=>h(),pn=Nt(!1),hn=Nt(!0);class Mt{constructor(j,nt){this.tag=j,this.value=nt}static some(j){return new Mt(!0,j)}static none(){return Mt.singletonNone}fold(j,nt){return this.tag?nt(this.value):j()}isSome(){return this.tag}isNone(){return!this.tag}map(j){return this.tag?Mt.some(j(this.value)):Mt.none()}bind(j){return this.tag?j(this.value):Mt.none()}exists(j){return this.tag&&j(this.value)}forall(j){return!this.tag||j(this.value)}filter(j){return!this.tag||j(this.value)?this:Mt.none()}getOr(j){return this.tag?this.value:j}or(j){return this.tag?this:j}getOrThunk(j){return this.tag?this.value:j()}orThunk(j){return this.tag?this:j()}getOrDie(j){if(this.tag)return this.value;throw new Error(j??"Called getOrDie on None")}static from(j){return Ct(j)?Mt.some(j):Mt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(j){this.tag&&j(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Mt.singletonNone=new Mt(!1);const Hn=Array.prototype.slice,cn=Array.prototype.indexOf,fo=Array.prototype.push,Fn=(h,j)=>cn.call(h,j),Tn=(h,j)=>{const nt=Fn(h,j);return nt===-1?Mt.none():Mt.some(nt)},qn=(h,j)=>Fn(h,j)>-1,nr=(h,j)=>{for(let nt=0,it=h.length;nt<it;nt++){const dt=h[nt];if(j(dt,nt))return!0}return!1},oo=(h,j)=>{const nt=[];for(let it=0;it<h;it++)nt.push(j(it));return nt},Mo=(h,j)=>{const nt=[];for(let it=0;it<h.length;it+=j){const dt=Hn.call(h,it,it+j);nt.push(dt)}return nt},Dn=(h,j)=>{const nt=h.length,it=new Array(nt);for(let dt=0;dt<nt;dt++){const yt=h[dt];it[dt]=j(yt,dt)}return it},xo=(h,j)=>{for(let nt=0,it=h.length;nt<it;nt++){const dt=h[nt];j(dt,nt)}},Xt=(h,j)=>{for(let nt=h.length-1;nt>=0;nt--){const it=h[nt];j(it,nt)}},Ur=(h,j)=>{const nt=[],it=[];for(let dt=0,yt=h.length;dt<yt;dt++){const vt=h[dt];(j(vt,dt)?nt:it).push(vt)}return{pass:nt,fail:it}},co=(h,j)=>{const nt=[];for(let it=0,dt=h.length;it<dt;it++){const yt=h[it];j(yt,it)&&nt.push(yt)}return nt},Vo=(h,j,nt)=>(Xt(h,(it,dt)=>{nt=j(nt,it,dt)}),nt),yo=(h,j,nt)=>(xo(h,(it,dt)=>{nt=j(nt,it,dt)}),nt),ko=(h,j,nt)=>{for(let it=0,dt=h.length;it<dt;it++){const yt=h[it];if(j(yt,it))return Mt.some(yt);if(nt(yt,it))break}return Mt.none()},yn=(h,j)=>ko(h,j,pn),Cn=(h,j)=>{for(let nt=0,it=h.length;nt<it;nt++){const dt=h[nt];if(j(dt,nt))return Mt.some(nt)}return Mt.none()},Nn=h=>{const j=[];for(let nt=0,it=h.length;nt<it;++nt){if(!ct(h[nt]))throw new Error("Arr.flatten item "+nt+" was not an array, input: "+h);fo.apply(j,h[nt])}return j},sn=(h,j)=>Nn(Dn(h,j)),kn=(h,j)=>{for(let nt=0,it=h.length;nt<it;++nt){const dt=h[nt];if(j(dt,nt)!==!0)return!1}return!0},Ln=h=>{const j=Hn.call(h,0);return j.reverse(),j},Bn=(h,j)=>co(h,nt=>!qn(j,nt)),Eo=(h,j)=>{const nt={};for(let it=0,dt=h.length;it<dt;it++){const yt=h[it];nt[String(yt)]=j(yt,it)}return nt},Wn=h=>[h],Rn=(h,j)=>{const nt=Hn.call(h,0);return nt.sort(j),nt},Qn=(h,j)=>j>=0&&j<h.length?Mt.some(h[j]):Mt.none(),vo=h=>Qn(h,0),Gn=h=>Qn(h,h.length-1),ro=Rt(Array.from)?Array.from:h=>Hn.call(h),Co=(h,j)=>{for(let nt=0;nt<h.length;nt++){const it=j(h[nt],nt);if(it.isSome())return it}return Mt.none()},Do=Object.keys,Mr=Object.hasOwnProperty,ar=(h,j)=>{const nt=Do(h);for(let it=0,dt=nt.length;it<dt;it++){const yt=nt[it],vt=h[yt];j(vt,yt)}},xr=(h,j)=>us(h,(nt,it)=>({k:it,v:j(nt,it)})),us=(h,j)=>{const nt={};return ar(h,(it,dt)=>{const yt=j(it,dt);nt[yt.k]=yt.v}),nt},wr=h=>(j,nt)=>{h[nt]=j},gs=(h,j,nt,it)=>{ar(h,(dt,yt)=>{(j(dt,yt)?nt:it)(dt,yt)})},Ts=(h,j)=>{const nt={},it={};return gs(h,j,wr(nt),wr(it)),{t:nt,f:it}},Rs=(h,j)=>{const nt={};return gs(h,j,wr(nt),Tt),nt},Cl=(h,j)=>{const nt=[];return ar(h,(it,dt)=>{nt.push(j(it,dt))}),nt},Yr=(h,j)=>{const nt=Do(h);for(let it=0,dt=nt.length;it<dt;it++){const yt=nt[it],vt=h[yt];if(j(vt,yt,h))return Mt.some(vt)}return Mt.none()},Dl=h=>Cl(h,Qt),or=(h,j)=>Ds(h,j)?Mt.from(h[j]):Mt.none(),Ds=(h,j)=>Mr.call(h,j),hu=(h,j)=>Ds(h,j)&&h[j]!==void 0&&h[j]!==null,au=(h,j,nt=fn)=>h.exists(it=>nt(it,j)),_c=(h,j,nt=fn)=>Eu(h,j,nt).getOr(h.isNone()&&j.isNone()),Su=h=>{const j=[],nt=it=>{j.push(it)};for(let it=0;it<h.length;it++)h[it].each(nt);return j},Zs=h=>{const j=[];for(let nt=0;nt<h.length;nt++){const it=h[nt];if(it.isSome())j.push(it.getOrDie());else return Mt.none()}return Mt.some(j)},Eu=(h,j,nt)=>h.isSome()&&j.isSome()?Mt.some(nt(h.getOrDie(),j.getOrDie())):Mt.none(),uu=(h,j,nt,it)=>h.isSome()&&j.isSome()&&nt.isSome()?Mt.some(it(h.getOrDie(),j.getOrDie(),nt.getOrDie())):Mt.none(),$a=(h,j)=>h!=null?Mt.some(j(h)):Mt.none(),es=(h,j)=>h?Mt.some(j):Mt.none(),yl=(h,j)=>h+j,mo=(h,j)=>h.substring(j),Oo=(h,j,nt)=>j===""||h.length>=j.length&&h.substr(nt,nt+j.length)===j,Ar=(h,j)=>_l(h,j)?mo(h,j.length):h,Br=(h,j)=>Wu(h,j)?h:yl(h,j),Ws=(h,j,nt=0,it)=>{const dt=h.indexOf(j,nt);return dt!==-1?bt(it)?!0:dt+j.length<=it:!1},_l=(h,j)=>Oo(h,j,0),Wu=(h,j)=>Oo(h,j,h.length-j.length),Mu=(h=>j=>j.replace(h,""))(/^\s+|\s+$/g),Vn=h=>h.length>0,$n=h=>!Vn(h),Po=h=>h.style!==void 0&&Rt(h.style.getPropertyValue),Ho=(h,j)=>{const it=(j||document).createElement("div");if(it.innerHTML=h,!it.hasChildNodes()||it.childNodes.length>1){const dt="HTML does not have a single root node";throw console.error(dt,h),new Error(dt)}return zs(it.childNodes[0])},cs=(h,j)=>{const it=(j||document).createElement(h);return zs(it)},Es=(h,j)=>{const it=(j||document).createTextNode(h);return zs(it)},zs=h=>{if(h==null)throw new Error("Node cannot be null or undefined");return{dom:h}},io={fromHtml:Ho,fromTag:cs,fromText:Es,fromDom:zs,fromPoint:(h,j,nt)=>Mt.from(h.dom.elementFromPoint(j,nt)).map(zs)},Bs=typeof window<"u"?window:Function("return this;")(),Jn=(h,j)=>{let nt=j??Bs;for(let it=0;it<h.length&&nt!==void 0&&nt!==null;++it)nt=nt[h[it]];return nt},to=(h,j)=>{const nt=h.split(".");return Jn(nt,j)},rr=(h,j)=>to(h,j),ur=(h,j)=>{const nt=rr(h,j);if(nt==null)throw new Error(h+" not available on this browser");return nt},Pr=Object.getPrototypeOf,ns=h=>ur("HTMLElement",h),rs=h=>{const j=to("ownerDocument.defaultView",h);return ot(h)&&(ns(j).prototype.isPrototypeOf(h)||/^HTML\w*Element$/.test(Pr(h).constructor.name))},Wr=9,ms=11,As=1,Bl=3,eu=h=>h.dom.nodeName.toLowerCase(),pu=h=>h.dom.nodeType,Qp=h=>j=>pu(j)===h,cm=h=>Cs(h)&&rs(h.dom),Cs=Qp(As),Rl=Qp(Bl),Ll=Qp(Wr),Ep=Qp(ms),Ap=h=>j=>Cs(j)&&eu(j)===h,gp=(h,j)=>{const nt=h.dom;if(nt.nodeType!==As)return!1;{const it=nt;if(it.matches!==void 0)return it.matches(j);if(it.msMatchesSelector!==void 0)return it.msMatchesSelector(j);if(it.webkitMatchesSelector!==void 0)return it.webkitMatchesSelector(j);if(it.mozMatchesSelector!==void 0)return it.mozMatchesSelector(j);throw new Error("Browser lacks native selectors")}},Tu=h=>h.nodeType!==As&&h.nodeType!==Wr&&h.nodeType!==ms||h.childElementCount===0,v1=(h,j)=>{const nt=j===void 0?document:j.dom;return Tu(nt)?[]:Dn(nt.querySelectorAll(h),io.fromDom)},Km=(h,j)=>{const nt=j===void 0?document:j.dom;return Tu(nt)?Mt.none():Mt.from(nt.querySelector(h)).map(io.fromDom)},Yl=(h,j)=>h.dom===j.dom,zp=(h,j)=>{const nt=h.dom,it=j.dom;return nt===it?!1:nt.contains(it)},Bp=h=>io.fromDom(h.dom.ownerDocument),mp=h=>Ll(h)?h:Bp(h),ly=h=>io.fromDom(mp(h).dom.documentElement),um=h=>io.fromDom(mp(h).dom.defaultView),_g=h=>Mt.from(h.dom.parentNode).map(io.fromDom),Ym=h=>_g(h),Pm=h=>Mt.from(h.dom.parentElement).map(io.fromDom),by=(h,j)=>{const nt=Rt(j)?j:pn;let it=h.dom;const dt=[];for(;it.parentNode!==null&&it.parentNode!==void 0;){const yt=it.parentNode,vt=io.fromDom(yt);if(dt.push(vt),nt(vt)===!0)break;it=yt}return dt},vy=h=>Mt.from(h.dom.offsetParent).map(io.fromDom),q0=h=>Mt.from(h.dom.nextSibling).map(io.fromDom),Om=h=>Dn(h.dom.childNodes,io.fromDom),Mp=(h,j)=>{const nt=h.dom.childNodes;return Mt.from(nt[j]).map(io.fromDom)},cy=h=>Mp(h,0),uy=(h,j)=>({element:h,offset:j}),zy=(h,j)=>{const nt=Om(h);return nt.length>0&&j<nt.length?uy(nt[j],0):uy(h,j)},R0=h=>Ep(h)&&Ct(h.dom.host),yp=h=>io.fromDom(h.dom.getRootNode()),Dm=h=>R0(h)?h:io.fromDom(mp(h).dom.body),$p=h=>em(h).isSome(),em=h=>{const j=yp(h);return R0(j)?Mt.some(j):Mt.none()},By=h=>io.fromDom(h.dom.host),$y=h=>{if(Ct(h.target)){const j=io.fromDom(h.target);if(Cs(j)&&dn(j)&&h.composed&&h.composedPath){const nt=h.composedPath();if(nt)return vo(nt)}}return Mt.from(h.target)},dn=h=>Ct(h.dom.shadowRoot),zn=h=>{const j=Rl(h)?h.dom.parentNode:h.dom;if(j==null||j.ownerDocument===null)return!1;const nt=j.ownerDocument;return em(io.fromDom(j)).fold(()=>nt.body.contains(j),qt(zn,By))},ho=()=>qo(io.fromDom(document)),qo=h=>{const j=h.dom.body;if(j==null)throw new Error("Body is not available yet");return io.fromDom(j)},mr=(h,j,nt)=>{if(_e(nt)||mt(nt)||It(nt))h.setAttribute(j,nt+"");else throw console.error("Invalid call to Attribute.set. Key ",j,":: Value ",nt,":: Element ",h),new Error("Attribute value was not simple")},Wo=(h,j,nt)=>{mr(h.dom,j,nt)},Vl=(h,j)=>{const nt=h.dom;ar(j,(it,dt)=>{mr(nt,dt,it)})},Xr=(h,j)=>{const nt=h.dom.getAttribute(j);return nt===null?void 0:nt},Ls=(h,j)=>Mt.from(Xr(h,j)),Lu=(h,j)=>{const nt=h.dom;return nt&&nt.hasAttribute?nt.hasAttribute(j):!1},Yt=(h,j)=>{h.dom.removeAttribute(j)},_n=h=>yo(h.dom.attributes,(j,nt)=>(j[nt.name]=nt.value,j),{}),Kn=(h,j,nt)=>{if(!_e(nt))throw console.error("Invalid call to CSS.set. Property ",j,":: Value ",nt,":: Element ",h),new Error("CSS value must be a string: "+nt);Po(h)&&h.style.setProperty(j,nt)},Ao=(h,j)=>{Po(h)&&h.style.removeProperty(j)},Jo=(h,j,nt)=>{const it=h.dom;Kn(it,j,nt)},Xs=(h,j)=>{const nt=h.dom;ar(j,(it,dt)=>{Kn(nt,dt,it)})},Jl=(h,j)=>{const nt=h.dom;ar(j,(it,dt)=>{it.fold(()=>{Ao(nt,dt)},yt=>{Kn(nt,dt,yt)})})},lu=(h,j)=>{const nt=h.dom,dt=window.getComputedStyle(nt).getPropertyValue(j);return dt===""&&!zn(h)?dr(nt,j):dt},dr=(h,j)=>Po(h)?h.style.getPropertyValue(j):"",gu=(h,j)=>{const nt=h.dom,it=dr(nt,j);return Mt.from(it).filter(dt=>dt.length>0)},jp=h=>{const j={},nt=h.dom;if(Po(nt))for(let it=0;it<nt.style.length;it++){const dt=nt.style.item(it);j[dt]=nt.style[dt]}return j},Z0=(h,j,nt)=>{const it=io.fromTag(h);return Jo(it,j,nt),gu(it,j).isSome()},js=(h,j)=>{const nt=h.dom;Ao(nt,j),au(Ls(h,"style").map(Mu),"")&&Yt(h,"style")},Xm=h=>h.dom.offsetWidth,m0=(h,j)=>{const nt=(St,Dt)=>{if(!It(Dt)&&!Dt.match(/^[0-9]+$/))throw new Error(h+".set accepts only positive integer values. Value was "+Dt);const Bt=St.dom;Po(Bt)&&(Bt.style[h]=Dt+"px")},it=St=>{const Dt=j(St);if(Dt<=0||Dt===null){const Bt=lu(St,h);return parseFloat(Bt)||0}return Dt},dt=it,yt=(St,Dt)=>yo(Dt,(Bt,jt)=>{const Zt=lu(St,jt),an=Zt===void 0?0:parseInt(Zt,10);return isNaN(an)?Bt:Bt+an},0);return{set:nt,get:it,getOuter:dt,aggregate:yt,max:(St,Dt,Bt)=>{const jt=yt(St,Bt);return Dt>jt?Dt-jt:0}}},Tp=m0("height",h=>{const j=h.dom;return zn(h)?j.getBoundingClientRect().height:j.offsetHeight}),mu=h=>Tp.get(h),K0=h=>Tp.getOuter(h),jx=(h,j)=>{const nt=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],it=Tp.max(h,j,nt);Jo(h,"max-height",it+"px")},h_=(h,j)=>({left:h,top:j,translate:(it,dt)=>h_(h+it,j+dt)}),Zu=h_,_1=h=>{const j=h.getBoundingClientRect();return Zu(j.left,j.top)},M0=(h,j)=>h!==void 0?h:j!==void 0?j:0,Gu=h=>{const j=h.dom.ownerDocument,nt=j.body,it=j.defaultView,dt=j.documentElement;if(nt===h.dom)return Zu(nt.offsetLeft,nt.offsetTop);const yt=M0(it==null?void 0:it.pageYOffset,dt.scrollTop),vt=M0(it==null?void 0:it.pageXOffset,dt.scrollLeft),St=M0(dt.clientTop,nt.clientTop),Dt=M0(dt.clientLeft,nt.clientLeft);return P0(h).translate(vt-Dt,yt-St)},P0=h=>{const j=h.dom,it=j.ownerDocument.body;return it===j?Zu(it.offsetLeft,it.offsetTop):zn(h)?_1(j):Zu(0,0)},Nm=m0("width",h=>h.dom.offsetWidth),x1=(h,j)=>Nm.set(h,j),vn=h=>Nm.get(h),En=h=>Nm.getOuter(h),To=(h,j)=>{const nt=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],it=Nm.max(h,j,nt);Jo(h,"max-width",it+"px")},Zo=h=>{let j=!1,nt;return(...it)=>(j||(j=!0,nt=h.apply(null,it)),nt)},ys=(h,j,nt,it)=>{const dt=h.isiOS()&&/ipad/i.test(nt)===!0,yt=h.isiOS()&&!dt,vt=h.isiOS()||h.isAndroid(),St=vt||it("(pointer:coarse)"),Dt=dt||!yt&&vt&&it("(min-device-width:768px)"),Bt=yt||vt&&!Dt,jt=j.isSafari()&&h.isiOS()&&/safari/i.test(nt)===!1,Zt=!Bt&&!Dt&&!jt;return{isiPad:Nt(dt),isiPhone:Nt(yt),isTablet:Nt(Dt),isPhone:Nt(Bt),isTouch:Nt(St),isAndroid:h.isAndroid,isiOS:h.isiOS,isWebView:Nt(jt),isDesktop:Nt(Zt)}},Ml=(h,j)=>{for(let nt=0;nt<h.length;nt++){const it=h[nt];if(it.test(j))return it}},_i=(h,j)=>{const nt=Ml(h,j);if(!nt)return{major:0,minor:0};const it=dt=>Number(j.replace(nt,"$"+dt));return Lm(it(1),it(2))},vu=(h,j)=>{const nt=String(j).toLowerCase();return h.length===0?bp():_i(h,nt)},bp=()=>Lm(0,0),Lm=(h,j)=>({major:h,minor:j}),dm={nu:Lm,detect:vu,unknown:bp},cp=(h,j)=>Co(j.brands,nt=>{const it=nt.brand.toLowerCase();return yn(h,dt=>{var yt;return it===((yt=dt.brand)===null||yt===void 0?void 0:yt.toLowerCase())}).map(dt=>({current:dt.name,version:dm.nu(parseInt(nt.version,10),0)}))}),up=(h,j)=>{const nt=String(j).toLowerCase();return yn(h,it=>it.search(nt))},Pp=(h,j)=>up(h,j).map(nt=>{const it=dm.detect(nt.versionRegexes,j);return{current:nt.name,version:it}}),fm=(h,j)=>up(h,j).map(nt=>{const it=dm.detect(nt.versionRegexes,j);return{current:nt.name,version:it}}),Ku=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,dp=h=>j=>Ws(j,h),ju=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:h=>Ws(h,"edge/")&&Ws(h,"chrome")&&Ws(h,"safari")&&Ws(h,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ku],search:h=>Ws(h,"chrome")&&!Ws(h,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:h=>Ws(h,"msie")||Ws(h,"trident")},{name:"Opera",versionRegexes:[Ku,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:dp("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:dp("firefox")},{name:"Safari",versionRegexes:[Ku,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:h=>(Ws(h,"safari")||Ws(h,"mobile/"))&&Ws(h,"applewebkit")}],_y=[{name:"Windows",search:dp("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:h=>Ws(h,"iphone")||Ws(h,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:dp("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:dp("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:dp("linux"),versionRegexes:[]},{name:"Solaris",search:dp("sunos"),versionRegexes:[]},{name:"FreeBSD",search:dp("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:dp("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],p_={browsers:Nt(ju),oses:Nt(_y)},av="Edge",w1="Chromium",k1="IE",Dv="Opera",Nv="Firefox",O0="Safari",Jm=()=>Hw({current:void 0,version:dm.unknown()}),Hw=h=>{const j=h.current,nt=h.version,it=dt=>()=>j===dt;return{current:j,version:nt,isEdge:it(av),isChromium:it(w1),isIE:it(k1),isOpera:it(Dv),isFirefox:it(Nv),isSafari:it(O0)}},Gy={unknown:Jm,nu:Hw,edge:Nt(av),chromium:Nt(w1),ie:Nt(k1),opera:Nt(Dv),firefox:Nt(Nv),safari:Nt(O0)},Hx="Windows",S1="iOS",Ux="Android",Q_="Linux",E1="macOS",ex="Solaris",Vx="FreeBSD",Lv="ChromeOS",Uw=()=>eo({current:void 0,version:dm.unknown()}),eo=h=>{const j=h.current,nt=h.version,it=dt=>()=>j===dt;return{current:j,version:nt,isWindows:it(Hx),isiOS:it(S1),isAndroid:it(Ux),isMacOS:it(E1),isLinux:it(Q_),isSolaris:it(ex),isFreeBSD:it(Vx),isChromeOS:it(Lv)}},T1={unknown:Uw,nu:eo,windows:Nt(Hx),ios:Nt(S1),android:Nt(Ux),linux:Nt(Q_),macos:Nt(E1),solaris:Nt(ex),freebsd:Nt(Vx),chromeos:Nt(Lv)},hC={detect:(h,j,nt)=>{const it=p_.browsers(),dt=p_.oses(),yt=j.bind(Dt=>cp(it,Dt)).orThunk(()=>Pp(it,h)).fold(Gy.unknown,Gy.nu),vt=fm(dt,h).fold(T1.unknown,T1.nu),St=ys(vt,yt,h,nt);return{browser:yt,os:vt,deviceType:St}}},pC=h=>window.matchMedia(h).matches;let Fv=Zo(()=>hC.detect(window.navigator.userAgent,Mt.from(window.navigator.userAgentData),pC));const ba=()=>Fv(),Fm=(h,j,nt,it,dt,yt,vt)=>({target:h,x:j,y:nt,stop:it,prevent:dt,kill:yt,raw:vt}),hm=h=>{const j=io.fromDom($y(h).getOr(h.target)),nt=()=>h.stopPropagation(),it=()=>h.preventDefault(),dt=Jt(it,nt);return Fm(j,h.clientX,h.clientY,nt,it,dt,h)},zv=(h,j)=>nt=>{h(nt)&&j(hm(nt))},Wx=(h,j,nt,it,dt)=>{const yt=zv(nt,it);return h.dom.addEventListener(j,yt,dt),{unbind:Mn(tx,h,j,yt,dt)}},g_=(h,j,nt,it)=>Wx(h,j,nt,it,!1),zm=(h,j,nt,it)=>Wx(h,j,nt,it,!0),tx=(h,j,nt,it)=>{h.dom.removeEventListener(j,nt,it)},lv=(h,j)=>{_g(h).each(it=>{it.dom.insertBefore(j.dom,h.dom)})},nx=(h,j)=>{q0(h).fold(()=>{_g(h).each(dt=>{Qm(dt,j)})},it=>{lv(it,j)})},cv=(h,j)=>{cy(h).fold(()=>{Qm(h,j)},it=>{h.dom.insertBefore(j.dom,it.dom)})},Qm=(h,j)=>{h.dom.appendChild(j.dom)},gC=(h,j,nt)=>{Mp(h,nt).fold(()=>{Qm(h,j)},it=>{lv(it,j)})},m_=(h,j)=>{xo(j,nt=>{Qm(h,nt)})},tm=h=>{h.dom.textContent="",xo(Om(h),j=>{y0(j)})},y0=h=>{const j=h.dom;j.parentNode!==null&&j.parentNode.removeChild(j)},e0=h=>{const j=h!==void 0?h.dom:document,nt=j.body.scrollLeft||j.documentElement.scrollLeft,it=j.body.scrollTop||j.documentElement.scrollTop;return Zu(nt,it)},I1=(h,j,nt)=>{const dt=(nt!==void 0?nt.dom:document).defaultView;dt&&dt.scrollTo(h,j)},y_=h=>{const j=h===void 0?window:h;return ba().browser.isFirefox()?Mt.none():Mt.from(j.visualViewport)},Vw=(h,j,nt,it)=>({x:h,y:j,width:nt,height:it,right:h+nt,bottom:j+it}),b_=h=>{const j=h===void 0?window:h,nt=j.document,it=e0(io.fromDom(nt));return y_(j).fold(()=>{const dt=j.document.documentElement,yt=dt.clientWidth,vt=dt.clientHeight;return Vw(it.left,it.top,yt,vt)},dt=>Vw(Math.max(dt.pageLeft,it.left),Math.max(dt.pageTop,it.top),dt.width,dt.height))},xy=()=>io.fromDom(document),v_=(h,j)=>h.view(j).fold(Nt([]),it=>{const dt=h.owner(it),yt=v_(h,dt);return[it].concat(yt)}),XS=(h,j)=>{const nt=j.owner(h),it=v_(j,nt);return Mt.some(it)};var qw=Object.freeze({__proto__:null,view:h=>{var j;return(h.dom===document?Mt.none():Mt.from((j=h.dom.defaultView)===null||j===void 0?void 0:j.frameElement)).map(io.fromDom)},owner:h=>Bp(h)});const __=h=>{const j=xy(),nt=e0(j);return XS(h,qw).fold(Mn(Gu,h),dt=>{const yt=P0(h),vt=Vo(dt,(St,Dt)=>{const Bt=P0(Dt);return{left:St.left+Bt.left,top:St.top+Bt.top}},{left:0,top:0});return Zu(vt.left+yt.left+nt.left,vt.top+yt.top+nt.top)})},R1=(h,j,nt)=>({point:h,width:j,height:nt}),ox=(h,j,nt,it)=>({x:h,y:j,width:nt,height:it}),ep=(h,j,nt,it)=>({x:h,y:j,width:nt,height:it,right:h+nt,bottom:j+it}),tp=h=>{const j=Gu(h),nt=En(h),it=K0(h);return ep(j.left,j.top,nt,it)},Bv=h=>{const j=__(h),nt=En(h),it=K0(h);return ep(j.left,j.top,nt,it)},dy=(h,j)=>{const nt=Math.max(h.x,j.x),it=Math.max(h.y,j.y),dt=Math.min(h.right,j.right),yt=Math.min(h.bottom,j.bottom),vt=dt-nt,St=yt-it;return ep(nt,it,vt,St)},Zw=(h,j)=>yo(j,(nt,it)=>dy(nt,it),h),Hp=()=>b_(window),ds=h=>{let j=h;return{get:()=>j,set:dt=>{j=dt}}},uv=h=>{const j=ds(Mt.none()),nt=()=>j.get().each(h);return{clear:()=>{nt(),j.set(Mt.none())},isSet:()=>j.get().isSome(),get:()=>j.get(),set:St=>{nt(),j.set(Mt.some(St))}}},Kw=()=>uv(h=>h.destroy()),Y0=()=>uv(h=>h.unbind()),Xl=()=>{const h=uv(Tt);return{...h,on:nt=>h.get().each(nt)}};var $v=tinymce.util.Tools.resolve("tinymce.ThemeManager");const rx=h=>{const j=yt=>yt(h),nt=Nt(h),it=()=>dt,dt={tag:!0,inner:h,fold:(yt,vt)=>vt(h),isValue:hn,isError:pn,map:yt=>Js.value(yt(h)),mapError:it,bind:j,exists:j,forall:j,getOr:nt,or:it,getOrThunk:nt,orThunk:it,getOrDie:nt,each:yt=>{yt(h)},toOptional:()=>Mt.some(h)};return dt},qx=h=>{const j=()=>nt,nt={tag:!1,inner:h,fold:(it,dt)=>it(h),isValue:pn,isError:hn,map:j,mapError:it=>Js.error(it(h)),bind:j,exists:pn,forall:hn,getOr:Qt,or:Qt,getOrThunk:so,orThunk:so,getOrDie:Wt(String(h)),each:Tt,toOptional:Mt.none};return nt},Js={value:rx,error:qx,fromOption:(h,j)=>h.fold(()=>qx(j),rx)};var wp;(function(h){h[h.Error=0]="Error",h[h.Value=1]="Value"})(wp||(wp={}));const Gv=(h,j,nt)=>h.stype===wp.Error?j(h.serror):nt(h.svalue),jv=h=>{const j=[],nt=[];return xo(h,it=>{Gv(it,dt=>nt.push(dt),dt=>j.push(dt))}),{values:j,errors:nt}},N0=(h,j)=>h.stype===wp.Error?{stype:wp.Error,serror:j(h.serror)}:h,b0=(h,j)=>h.stype===wp.Value?{stype:wp.Value,svalue:j(h.svalue)}:h,X0=(h,j)=>h.stype===wp.Value?j(h.svalue):h,Iu=(h,j)=>h.stype===wp.Error?j(h.serror):h,fy=h=>({stype:wp.Value,svalue:h}),M1=h=>({stype:wp.Error,serror:h}),fp={fromResult:h=>h.fold(M1,fy),toResult:h=>Gv(h,Js.error,Js.value),svalue:fy,partition:jv,serror:M1,bind:X0,bindError:Iu,map:b0,mapError:N0,fold:Gv},Hv=(h,j,nt,it)=>({tag:"field",key:h,newKey:j,presence:nt,prop:it}),x_=(h,j)=>({tag:"custom",newKey:h,instantiator:j}),_u=(h,j,nt)=>{switch(h.tag){case"field":return j(h.key,h.newKey,h.presence,h.prop);case"custom":return nt(h.newKey,h.instantiator)}},Cy=(h,j)=>j,Zx=(h,j)=>st(h)&&st(j)?Fu(h,j):j,dv=h=>(...j)=>{if(j.length===0)throw new Error("Can't merge zero objects");const nt={};for(let it=0;it<j.length;it++){const dt=j[it];for(const yt in dt)Ds(dt,yt)&&(nt[yt]=h(nt[yt],dt[yt]))}return nt},Fu=dv(Zx),Uv=dv(Cy),v0=()=>({tag:"required",process:{}}),w_=h=>({tag:"defaultedThunk",process:h}),Sl=h=>w_(Nt(h)),C_=()=>({tag:"option",process:{}}),Kx=h=>({tag:"mergeWithThunk",process:h}),Lt=h=>Kx(Nt(h)),Ut=(h,j)=>h.length>0?fp.svalue(Fu(j,Uv.apply(void 0,h))):fp.svalue(j),rn=h=>Jt(fp.serror,Nn)(h),ir={consolidateObj:(h,j)=>{const nt=fp.partition(h);return nt.errors.length>0?rn(nt.errors):Ut(nt.values,j)},consolidateArr:h=>{const j=fp.partition(h);return j.errors.length>0?rn(j.errors):fp.svalue(j.values)}},ks=h=>ot(h)&&Do(h).length>100?" removed due to size":JSON.stringify(h,null,2),Ys=h=>{const j=h.length>10?h.slice(0,10).concat([{path:[],getErrorInfo:Nt("... (only showing first ten failures)")}]):h;return Dn(j,nt=>"Failed path: ("+nt.path.join(" > ")+`)
`+nt.getErrorInfo())},Hs=(h,j)=>fp.serror([{path:h,getErrorInfo:j}]),fs=(h,j,nt)=>Hs(h,()=>'Could not find valid *required* value for "'+j+'" in '+ks(nt)),np=(h,j)=>Hs(h,()=>'Choice schema did not contain choice key: "'+j+'"'),Op=(h,j,nt)=>Hs(h,()=>'The chosen schema: "'+nt+'" did not exist in branches: '+ks(j)),n0=(h,j)=>Hs(h,()=>"There are unsupported fields: ["+j.join(", ")+"] specified"),Vv=(h,j)=>Hs(h,Nt(j)),sx=h=>{const j=(it,dt)=>fp.bindError(h(dt),yt=>Vv(it,yt)),nt=Nt("val");return{extract:j,toString:nt}},Xw=sx(fp.svalue),_0=(h,j,nt,it)=>or(j,nt).fold(()=>fs(h,nt,j),it),Jw=(h,j,nt,it)=>{const dt=or(h,j).getOrThunk(()=>nt(h));return it(dt)},ZA=(h,j,nt)=>nt(or(h,j)),JS=(h,j,nt,it)=>{const dt=or(h,j).map(yt=>yt===!0?nt(h):yt);return it(dt)},pm=(h,j,nt,it,dt)=>{const yt=St=>dt.extract(j.concat([it]),St),vt=St=>St.fold(()=>fp.svalue(Mt.none()),Dt=>{const Bt=dt.extract(j.concat([it]),Dt);return fp.map(Bt,Mt.some)});switch(h.tag){case"required":return _0(j,nt,it,yt);case"defaultedThunk":return Jw(nt,it,h.process,yt);case"option":return ZA(nt,it,vt);case"defaultedOptionThunk":return JS(nt,it,h.process,vt);case"mergeWithThunk":return Jw(nt,it,Nt({}),St=>{const Dt=Fu(h.process(nt),St);return yt(Dt)})}},yC=(h,j,nt)=>{const it={},dt=[];for(const yt of nt)_u(yt,(vt,St,Dt,Bt)=>{const jt=pm(Dt,h,j,vt,Bt);fp.fold(jt,Zt=>{dt.push(...Zt)},Zt=>{it[St]=Zt})},(vt,St)=>{it[vt]=St(j)});return dt.length>0?fp.serror(dt):fp.svalue(it)},gm=h=>({extract:(it,dt)=>h().extract(it,dt),toString:()=>h().toString()}),bC=h=>Do(Rs(h,Ct)),hy=h=>{const j=ws(h),nt=Vo(h,(dt,yt)=>_u(yt,vt=>Fu(dt,{[vt]:!0}),Nt(dt)),{});return{extract:(dt,yt)=>{const vt=mt(yt)?[]:bC(yt),St=co(vt,Dt=>!hu(nt,Dt));return St.length===0?j.extract(dt,yt):n0(dt,St)},toString:j.toString}},ws=h=>({extract:(it,dt)=>yC(it,dt,h),toString:()=>`obj{
`+Dn(h,dt=>_u(dt,(yt,vt,St,Dt)=>yt+" -> "+Dt.toString(),(yt,vt)=>"state("+yt+")")).join(`
`)+"}"}),py=h=>({extract:(it,dt)=>{const yt=Dn(dt,(vt,St)=>h.extract(it.concat(["["+St+"]"]),vt));return ir.consolidateArr(yt)},toString:()=>"array("+h.toString()+")"}),QS=(h,j)=>{const nt=j!==void 0?j:Qt;return{extract:(yt,vt)=>{const St=[];for(const Dt of h){const Bt=Dt.extract(yt,vt);if(Bt.stype===wp.Value)return{stype:wp.Value,svalue:nt(Bt.svalue)};St.push(Bt)}return ir.consolidateArr(St)},toString:()=>"oneOf("+Dn(h,yt=>yt.toString()).join(", ")+")"}},vC=(h,j)=>{const nt=(yt,vt)=>py(sx(h)).extract(yt,vt);return{extract:(yt,vt)=>{const St=Do(vt),Dt=nt(yt,St);return fp.bind(Dt,Bt=>{const jt=Dn(Bt,Zt=>Hv(Zt,Zt,v0(),j));return ws(jt).extract(yt,vt)})},toString:()=>"setOf("+j.toString()+")"}},ix=(h,j)=>{const nt=Zo(j);return{extract:(yt,vt)=>nt().extract(yt,vt),toString:()=>nt().toString()}},eE=Jt(py,ws),jy=Nt(Xw),Wv=(h,j)=>sx(nt=>{const it=typeof nt;return h(nt)?fp.svalue(nt):fp.serror(`Expected type: ${j} but got: ${it}`)}),ax=Wv(It,"number"),Fr=Wv(_e,"string"),Hy=Wv(mt,"boolean"),_C=Wv(Rt,"function"),Yx=h=>{if(Object(h)!==h)return!0;switch({}.toString.call(h).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(h).every(j=>Yx(h[j]));default:return!1}},Uy=sx(h=>Yx(h)?fp.svalue(h):fp.serror("Expected value to be acceptable for sending via postMessage")),Qw=(h,j,nt,it)=>or(nt,it).fold(()=>Op(h,nt,it),yt=>yt.extract(h.concat(["branch: "+it]),j)),lx=(h,j)=>({extract:(dt,yt)=>or(yt,h).fold(()=>np(dt,h),St=>Qw(dt,yt,j,St)),toString:()=>"chooseOn("+h+"). Possible values: "+Do(j)}),P1=()=>py(Xw),e2=h=>sx(j=>h(j).fold(fp.serror,fp.svalue)),fv=(h,j)=>vC(nt=>fp.fromResult(h(nt)),j),KA=(h,j,nt)=>{const it=j.extract([h],nt);return fp.mapError(it,dt=>({input:nt,errors:dt}))},hp=(h,j,nt)=>fp.toResult(KA(h,j,nt)),pr=h=>h.fold(j=>{throw new Error(ux(j))},Qt),x0=(h,j,nt)=>pr(hp(h,j,nt)),ux=h=>`Errors: 
`+Ys(h.errors).join(`
`)+`

Input object: `+ks(h.input),Ip=(h,j)=>lx(h,xr(j,ws)),Xx=(h,j)=>ix(h,j),mm=Hv,tu=x_,n2=h=>e2(j=>qn(h,j)?Js.value(j):Js.error(`Unsupported value: "${j}", choose one of "${h.join(", ")}".`)),Qo=h=>mm(h,h,v0(),jy()),nu=(h,j)=>mm(h,h,v0(),j),o2=h=>nu(h,ax),nm=h=>nu(h,Fr),o0=(h,j)=>mm(h,h,v0(),n2(j)),ky=h=>nu(h,_C),tE=(h,j)=>mm(h,h,C_(),sx(nt=>fp.serror("The field: "+h+" is forbidden. "+j))),k_=(h,j)=>mm(h,h,v0(),ws(j)),nE=(h,j)=>mm(h,h,v0(),eE(j)),gy=(h,j)=>mm(h,h,v0(),py(j)),Ql=h=>mm(h,h,C_(),jy()),qv=(h,j)=>mm(h,h,C_(),j),r2=h=>qv(h,ax),om=h=>qv(h,Fr),xC=(h,j)=>qv(h,n2(j)),hv=h=>qv(h,_C),s2=(h,j)=>qv(h,py(j)),ym=(h,j)=>qv(h,ws(j)),r0=(h,j)=>qv(h,hy(j)),So=(h,j)=>mm(h,h,Sl(j),jy()),Ru=(h,j,nt)=>mm(h,h,Sl(j),nt),wC=(h,j)=>Ru(h,j,ax),Dp=(h,j)=>Ru(h,j,Fr),Em=(h,j,nt)=>Ru(h,j,n2(nt)),sm=(h,j)=>Ru(h,j,Hy),Yu=(h,j)=>Ru(h,j,_C),CC=(h,j)=>Ru(h,j,Uy),S_=(h,j,nt)=>Ru(h,j,py(nt)),Ot=(h,j,nt)=>Ru(h,j,ws(nt)),nn={generate:h=>{if(!ct(h))throw new Error("cases must be an array");if(h.length===0)throw new Error("there must be at least one case");const j=[],nt={};return xo(h,(it,dt)=>{const yt=Do(it);if(yt.length!==1)throw new Error("one and only one name per case");const vt=yt[0],St=it[vt];if(nt[vt]!==void 0)throw new Error("duplicate key detected:"+vt);if(vt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ct(St))throw new Error("case arguments must be an array");j.push(vt),nt[vt]=(...Dt)=>{const Bt=Dt.length;if(Bt!==St.length)throw new Error("Wrong number of arguments to case "+vt+". Expected "+St.length+" ("+St+"), got "+Bt);return{fold:(...Zt)=>{if(Zt.length!==h.length)throw new Error("Wrong number of arguments to fold. Expected "+h.length+", got "+Zt.length);return Zt[dt].apply(null,Dt)},match:Zt=>{const an=Do(Zt);if(j.length!==an.length)throw new Error("Wrong number of arguments to match. Expected: "+j.join(",")+`
Actual: `+an.join(","));if(!kn(j,wn=>qn(an,wn)))throw new Error("Not all branches were specified when using match. Specified: "+an.join(", ")+`
Required: `+j.join(", "));return Zt[vt].apply(null,Dt)},log:Zt=>{console.log(Zt,{constructors:j,constructor:vt,params:Dt})}}}}),nt}};nn.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const xn=h=>{const j=[],nt=[];return xo(h,it=>{it.fold(dt=>{j.push(dt)},dt=>{nt.push(dt)})}),{errors:j,values:nt}},uo=(h,j)=>{const nt={};return ar(h,(it,dt)=>{qn(j,dt)||(nt[dt]=it)}),nt},Xo=(h,j)=>({[h]:j}),vr=h=>{const j={};return xo(h,nt=>{j[nt.key]=nt.value}),j},Jr=(h,j)=>uo(h,j),Ns=(h,j)=>Xo(h,j),Qs=h=>vr(h),Hu=(h,j)=>h.length===0?Js.value(j):Js.value(Fu(j,Uv.apply(void 0,h))),cu=h=>Js.error(Nn(h)),op=(h,j)=>{const nt=xn(h);return nt.errors.length>0?cu(nt.errors):Hu(nt.values,j)},L0=h=>Rt(h)?h:pn,Sy=(h,j,nt)=>{let it=h.dom;const dt=L0(nt);for(;it.parentNode;){it=it.parentNode;const yt=io.fromDom(it),vt=j(yt);if(vt.isSome())return vt;if(dt(yt))break}return Mt.none()},Bm=(h,j,nt)=>{const it=j(h),dt=L0(nt);return it.orThunk(()=>dt(h)?Mt.none():Sy(h,j,dt))},Zv=(h,j)=>Yl(h.element,j.event.target),O1={can:hn,abort:pn,run:Tt},D1=h=>{if(!hu(h,"can")&&!hu(h,"abort")&&!hu(h,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(h,null,2)+" does not have can, abort, or run!");return{...O1,...h}},E_=(h,j)=>(...nt)=>yo(h,(it,dt)=>it&&j(dt).apply(void 0,nt),!0),Jx=(h,j)=>(...nt)=>yo(h,(it,dt)=>it||j(dt).apply(void 0,nt),!1),i2=h=>Rt(h)?{can:hn,abort:pn,run:h}:h,kC=h=>{const j=E_(h,dt=>dt.can),nt=Jx(h,dt=>dt.abort);return{can:j,abort:nt,run:(...dt)=>{xo(h,yt=>{yt.run.apply(void 0,dt)})}}},Zp=Nt,pv=Zp("touchstart"),A_=Zp("touchmove"),Wl=Zp("touchend"),ip=Zp("touchcancel"),vp=Zp("mousedown"),w0=Zp("mousemove"),SC=Zp("mouseout"),EC=Zp("mouseup"),J0=Zp("mouseover"),Q0=Zp("focusin"),H4=Zp("focusout"),gv=Zp("keydown"),a2=Zp("keyup"),N1=Zp("input"),T_=Zp("change"),l2=Zp("click"),iL=Zp("transitioncancel"),oE=Zp("transitionend"),Qx=Zp("transitionstart"),aL=Zp("selectstart"),Up=h=>Nt("alloy."+h),YA={tap:Up("tap")},L1=Up("focus"),c2=Up("blur.post"),rE=Up("paste.post"),F1=Up("receive"),s0=Up("execute"),ew=Up("focus.item"),XA=YA.tap,tw=Up("longpress"),$m=Up("sandbox.close"),JA=Up("typeahead.cancel"),QA=Up("system.init"),lL=Up("system.touchmove"),U4=Up("system.touchend"),nw=Up("system.scroll"),u2=Up("system.resize"),my=Up("system.attached"),Vy=Up("system.detached"),Wy=Up("system.dismissRequested"),sE=Up("system.repositionRequested"),iE=Up("focusmanager.shifted"),AC=Up("slotcontainer.visibility"),w3=Up("system.external.element.scroll"),V4=Up("change.tab"),W4=Up("dismiss.tab"),C3=Up("highlight"),TC=Up("dehighlight"),El=(h,j)=>{tT(h,h.element,j,{})},ls=(h,j,nt)=>{tT(h,h.element,j,nt)},ow=h=>{El(h,s0())},eT=(h,j,nt)=>{tT(h,j,nt,{})},tT=(h,j,nt,it)=>{const dt={target:j,...it};h.getSystem().triggerEvent(nt,j,dt)},k3=(h,j,nt,it)=>{const dt={...it,target:j};h.getSystem().triggerEvent(nt,j,dt)},nT=(h,j,nt,it)=>{h.getSystem().triggerEvent(nt,j,it.event)},xu=h=>Qs(h),S3=(h,j)=>({key:h,value:D1({abort:j})}),q4=(h,j)=>({key:h,value:D1({can:j})}),E3=h=>({key:h,value:D1({run:(j,nt)=>{nt.event.prevent()}})}),er=(h,j)=>({key:h,value:D1({run:j})}),IC=(h,j,nt)=>({key:h,value:D1({run:(it,dt)=>{j.apply(void 0,[it,dt].concat(nt))}})}),Z4=h=>j=>er(h,j),d2=h=>j=>({key:h,value:D1({run:(nt,it)=>{Zv(nt,it)&&j(nt,it)}})}),K4=(h,j)=>er(h,(nt,it)=>{nt.getSystem().getByUid(j).each(dt=>{nT(dt,dt.element,h,it)})}),dx=(h,j,nt)=>{const it=j.partUids[nt];return K4(h,it)},oT=(h,j)=>er(h,(nt,it)=>{const dt=it.event,yt=nt.getSystem().getByDom(dt.target).getOrThunk(()=>Bm(dt.target,St=>nt.getSystem().getByDom(St).toOptional(),pn).getOr(nt));j(nt,yt,it)}),f2=h=>er(h,(j,nt)=>{nt.cut()}),aE=h=>er(h,(j,nt)=>{nt.stop()}),rw=(h,j)=>d2(h)(j),rp=d2(my()),I_=d2(Vy()),Y4=d2(QA()),fx=Z4(s0()),T3=(h,j,nt)=>{const it=nt.toString(),dt=it.indexOf(")")+1,yt=it.indexOf("("),vt=it.substring(yt+1,dt-1).split(/,\s*/);return h.toFunctionAnnotation=()=>({name:j,parameters:h2(vt.slice(0,1).concat(vt.slice(3)))}),h},h2=h=>Dn(h,j=>Wu(j,"/*")?j.substring(0,j.length-2):j),I3=(h,j)=>{const nt=h.toString(),it=nt.indexOf(")")+1,dt=nt.indexOf("("),yt=nt.substring(dt+1,it-1).split(/,\s*/);return h.toFunctionAnnotation=()=>({name:j,parameters:h2(yt)}),h},R3=(h,j)=>{const nt=j.toString(),it=nt.indexOf(")")+1,dt=nt.indexOf("("),yt=nt.substring(dt+1,it-1).split(/,\s*/);return h.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:h2(yt.slice(1))}),h},ey=h=>({classes:bt(h.classes)?[]:h.classes,attributes:bt(h.attributes)?{}:h.attributes,styles:bt(h.styles)?{}:h.styles}),RC=(h,j)=>({...h,attributes:{...h.attributes,...j.attributes},styles:{...h.styles,...j.styles},classes:h.classes.concat(j.classes)}),cL=(h,j,nt)=>fx(it=>{nt(it,h,j)}),sw=(h,j,nt)=>Y4((it,dt)=>{nt(it,h,j)}),uL=(h,j,nt,it,dt,yt)=>{const vt=hy(h),St=ym(j,[r0("config",h)]);return lE(vt,St,j,nt,it,dt,yt)},g2=(h,j,nt,it,dt,yt)=>{const vt=h,St=ym(j,[qv("config",h)]);return lE(vt,St,j,nt,it,dt,yt)},rT=(h,j,nt)=>T3((dt,...yt)=>{const vt=[dt].concat(yt);return dt.config({name:Nt(h)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+h+". Using API: "+nt)},St=>{const Dt=Array.prototype.slice.call(vt,1);return j.apply(void 0,[dt,St.config,St.state].concat(Dt))})},nt,j),dL=h=>({key:h,value:void 0}),lE=(h,j,nt,it,dt,yt,vt)=>{const St=Zt=>hu(Zt,nt)?Zt[nt]():Mt.none(),Dt=xr(dt,(Zt,an)=>rT(nt,Zt,an)),jt={...xr(yt,(Zt,an)=>I3(Zt,an)),...Dt,revoke:Mn(dL,nt),config:Zt=>{const an=x0(nt+"-config",h,Zt);return{key:nt,value:{config:an,me:jt,configAsRaw:Zo(()=>x0(nt+"-config",h,Zt)),initialConfig:Zt,state:vt}}},schema:Nt(j),exhibit:(Zt,an)=>Eu(St(Zt),or(it,"exhibit"),(un,wn)=>wn(an,un.config,un.state)).getOrThunk(()=>ey({})),name:Nt(nt),handlers:Zt=>St(Zt).map(an=>or(it,"events").getOr(()=>({}))(an.config,an.state)).getOr({})};return jt},z1={init:()=>F0({readState:Nt("No State required")})},F0=h=>h,yr=h=>Qs(h),MC=hy([Qo("fields"),Qo("name"),So("active",{}),So("apis",{}),So("state",z1),So("extra",{})]),Gm=h=>{const j=x0("Creating behaviour: "+h.name,MC,h);return uL(j.fields,j.name,j.active,j.apis,j.extra,j.state)},M3=hy([Qo("branchKey"),Qo("branches"),Qo("name"),So("active",{}),So("apis",{}),So("state",z1),So("extra",{})]),P3=h=>{const j=x0("Creating behaviour: "+h.name,M3,h);return g2(Ip(j.branchKey,j.branches),j.name,j.active,j.apis,j.extra,j.state)},O3=Nt(void 0),Uu=(h,j)=>{const nt=Xr(h,j);return nt===void 0||nt===""?[]:nt.split(" ")},fL=(h,j,nt)=>{const dt=Uu(h,j).concat([nt]);return Wo(h,j,dt.join(" ")),!0},m2=(h,j,nt)=>{const it=co(Uu(h,j),dt=>dt!==nt);return it.length>0?Wo(h,j,it.join(" ")):Yt(h,j),!1},hx=h=>h.dom.classList!==void 0,PC=h=>Uu(h,"class"),D3=(h,j)=>fL(h,"class",j),R_=(h,j)=>m2(h,"class",j),X4=(h,j)=>qn(PC(h),j)?R_(h,j):D3(h,j),Kp=(h,j)=>{hx(h)?h.dom.classList.add(j):D3(h,j)},sT=h=>{(hx(h)?h.dom.classList:PC(h)).length===0&&Yt(h,"class")},wu=(h,j)=>{hx(h)?h.dom.classList.remove(j):R_(h,j),sT(h)},N3=(h,j)=>{const nt=hx(h)?h.dom.classList.toggle(j):X4(h,j);return sT(h),nt},ty=(h,j)=>hx(h)&&h.dom.classList.contains(j),OC=(h,j)=>{xo(j,nt=>{Kp(h,nt)})},B1=(h,j)=>{xo(j,nt=>{wu(h,nt)})},sB=(h,j)=>{xo(j,nt=>{N3(h,nt)})},iT=(h,j)=>kn(j,nt=>ty(h,nt)),hL=h=>{const j=h.dom.classList,nt=new Array(j.length);for(let it=0;it<j.length;it++){const dt=j.item(it);dt!==null&&(nt[it]=dt)}return nt},J4=h=>hx(h)?hL(h):PC(h),Kv=(h,j,nt,it,dt)=>{const yt=vt=>vt+"px";return{position:h,left:j.map(yt),top:nt.map(yt),right:it.map(yt),bottom:dt.map(yt)}},$1=h=>({...h,position:Mt.some(h.position)}),z0=(h,j)=>{Jl(h,$1(j))},DC=h=>(au(gu(h,"position"),"fixed")?Mt.none():vy(h)).orThunk(()=>{const it=io.fromTag("span");return _g(h).bind(dt=>{Qm(dt,it);const yt=vy(it);return y0(it),yt})}),aT=h=>DC(h).map(Gu).getOrThunk(()=>Zu(0,0)),lT=(h,j)=>{const nt=h.element;Kp(nt,j.transitionClass),wu(nt,j.fadeOutClass),Kp(nt,j.fadeInClass),j.onShow(h)},NC=(h,j)=>{const nt=h.element;Kp(nt,j.transitionClass),wu(nt,j.fadeInClass),Kp(nt,j.fadeOutClass),j.onHide(h)},iw=(h,j)=>h.y<j.bottom&&h.bottom>j.y,M_=(h,j)=>h.y>=j.y,LC=(h,j)=>h.bottom<=j.bottom,aw=(h,j,nt)=>({location:"top",leftX:j,topY:nt.bounds.y-h.y}),px=(h,j,nt)=>({location:"bottom",leftX:j,bottomY:h.bottom-nt.bounds.bottom}),y2=h=>h.box.x-h.win.x,cE=(h,j,nt)=>{const it=j.win,dt=j.box,yt=y2(j);return Co(h,vt=>{switch(vt){case"bottom":return LC(dt,nt.bounds)?Mt.none():Mt.some(px(it,yt,nt));case"top":return M_(dt,nt.bounds)?Mt.none():Mt.some(aw(it,yt,nt));default:return Mt.none()}}).getOr({location:"no-dock"})},cT=(h,j,nt)=>kn(h,it=>{switch(it){case"bottom":return LC(j,nt.bounds);case"top":return M_(j,nt.bounds)}}),Q4=(h,j)=>{const nt=j.optScrollEnv.fold(Nt(h.bounds.y),it=>it.scrollElmTop+(h.bounds.y-it.currentScrollTop));return Zu(h.bounds.x,nt)},L3=(h,j)=>{const nt=j.optScrollEnv.fold(Nt(h.y),it=>h.y+it.currentScrollTop-it.scrollElmTop);return Zu(h.x,nt)},FC=(h,j,nt)=>nt.getInitialPos().map(it=>{const dt=Q4(it,j);return{box:ep(dt.left,dt.top,vn(h),mu(h)),location:it.location}}),eM=(h,j,nt,it,dt)=>{const yt=L3(j,nt),vt=ep(yt.left,yt.top,j.width,j.height);it.setInitialPos({style:jp(h),position:lu(h,"position")||"static",bounds:vt,location:dt.location})},pL=(h,j,nt,it,dt)=>{it.getInitialPos().fold(()=>eM(h,j,nt,it,dt),()=>Tt)},uT=(h,j,nt)=>nt.getInitialPos().bind(it=>{var dt;switch(nt.clearInitialPos(),it.position){case"static":return Mt.some({morph:"static"});case"absolute":const yt=DC(h).getOr(ho()),vt=tp(yt),St=(dt=yt.dom.scrollTop)!==null&&dt!==void 0?dt:0;return Mt.some({morph:"absolute",positionCss:Kv("absolute",or(it.style,"left").map(Dt=>j.x-vt.x),or(it.style,"top").map(Dt=>j.y-vt.y+St),or(it.style,"right").map(Dt=>vt.right-j.right),or(it.style,"bottom").map(Dt=>vt.bottom-j.bottom))});default:return Mt.none()}}),F3=(h,j,nt)=>FC(h,j,nt).filter(({box:it})=>cT(nt.getModes(),it,j)).bind(({box:it})=>uT(h,it,nt)),uE=h=>{switch(h.location){case"top":return Mt.some({morph:"fixed",positionCss:Kv("fixed",Mt.some(h.leftX),Mt.some(h.topY),Mt.none(),Mt.none())});case"bottom":return Mt.some({morph:"fixed",positionCss:Kv("fixed",Mt.some(h.leftX),Mt.none(),Mt.none(),Mt.some(h.bottomY))});default:return Mt.none()}},z3=(h,j,nt)=>{const it=tp(h),dt=Hp(),yt=cE(nt.getModes(),{win:dt,box:it},j);return yt.location==="top"||yt.location==="bottom"?(eM(h,it,j,nt,yt),uE(yt)):Mt.none()},zC=(h,j,nt)=>F3(h,j,nt).orThunk(()=>j.optScrollEnv.bind(it=>FC(h,j,nt)).bind(({box:it,location:dt})=>{const yt=Hp(),vt=y2({win:yt,box:it}),St=dt==="top"?aw(yt,vt,j):px(yt,vt,j);return uE(St)})),iB=(h,j,nt)=>{const it=h.element;return au(gu(it,"position"),"fixed")?zC(it,j,nt):z3(it,j,nt)},aB=(h,j,nt)=>{const it=h.element;return FC(it,j,nt).bind(({box:dt})=>uT(it,dt,nt))},BC=(h,j,nt,it)=>{const dt=tp(h),yt=Hp(),vt=y2({win:yt,box:dt}),St=it(yt,vt,j);return St.location==="bottom"||St.location==="top"?(pL(h,dt,j,nt,St),uE(St)):Mt.none()},Yv=(h,j,nt)=>{nt.setDocked(!1),xo(["left","right","top","bottom","position"],it=>js(h.element,it)),j.onUndocked(h)},dE=(h,j,nt,it)=>{const dt=it.position==="fixed";nt.setDocked(dt),z0(h.element,it),(dt?j.onDocked:j.onUndocked)(h)},tM=(h,j,nt,it,dt=!1)=>{j.contextual.each(yt=>{yt.lazyContext(h).each(vt=>{const St=iw(vt,it.bounds);St!==nt.isVisible()&&(nt.setVisible(St),dt&&!St?(OC(h.element,[yt.fadeOutClass]),yt.onHide(h)):(St?lT:NC)(h,yt))})})},nM=(h,j,nt,it,dt)=>{tM(h,j,nt,it,!0),dE(h,j,nt,dt.positionCss)},oM=(h,j,nt,it,dt)=>{switch(dt.morph){case"static":return Yv(h,j,nt);case"absolute":return dE(h,j,nt,dt.positionCss);case"fixed":return nM(h,j,nt,it,dt)}},b2=(h,j,nt)=>{const it=j.lazyViewport(h);tM(h,j,nt,it),iB(h,it,nt).each(dt=>{oM(h,j,nt,it,dt)})},lB=(h,j,nt)=>{const it=h.element;nt.setDocked(!1);const dt=j.lazyViewport(h);aB(h,dt,nt).each(yt=>{switch(yt.morph){case"static":{Yv(h,j,nt);break}case"absolute":{dE(h,j,nt,yt.positionCss);break}}}),nt.setVisible(!0),j.contextual.each(yt=>{B1(it,[yt.fadeInClass,yt.fadeOutClass,yt.transitionClass]),yt.onShow(h)}),v2(h,j,nt)},v2=(h,j,nt)=>{h.getSystem().isConnected()&&b2(h,j,nt)},$C=(h,j,nt)=>{nt.isDocked()&&lB(h,j,nt)},rM=h=>(j,nt,it)=>{const dt=nt.lazyViewport(j);BC(j.element,dt,it,h).each(vt=>{nM(j,nt,it,dt,vt)})},GC=rM(aw),gL=rM(px);var u0=Object.freeze({__proto__:null,refresh:v2,reset:$C,isDocked:(h,j,nt)=>nt.isDocked(),getModes:(h,j,nt)=>nt.getModes(),setModes:(h,j,nt,it)=>nt.setModes(it),forceDockToTop:GC,forceDockToBottom:gL}),lw=Object.freeze({__proto__:null,events:(h,j)=>xu([rw(oE(),(nt,it)=>{h.contextual.each(dt=>{ty(nt.element,dt.transitionClass)&&(B1(nt.element,[dt.transitionClass,dt.fadeInClass]),(j.isVisible()?dt.onShown:dt.onHidden)(nt)),it.stop()})}),er(nw(),(nt,it)=>{v2(nt,h,j)}),er(w3(),(nt,it)=>{v2(nt,h,j)}),er(u2(),(nt,it)=>{$C(nt,h,j)})])});const mL=(h,j)=>{const it=(j||document).createElement("div");return it.innerHTML=h,Om(io.fromDom(it))},gx=h=>h.dom.innerHTML,Ey=(h,j)=>{const it=Bp(h).dom,dt=io.fromDom(it.createDocumentFragment()),yt=mL(j,it);m_(dt,yt),tm(h),Qm(h,dt)},G1=h=>{const j=io.fromTag("div"),nt=io.fromDom(h.dom.cloneNode(!0));return Qm(j,nt),gx(j)},_2=(h,j)=>io.fromDom(h.dom.cloneNode(j)),aM=h=>_2(h,!1),fE=h=>_2(h,!0),dT=h=>{if(R0(h))return"#shadow-root";{const j=aM(h);return G1(j)}},cw=h=>dT(h),$3="unknown";var j1;(function(h){h[h.STOP=0]="STOP",h[h.NORMAL=1]="NORMAL",h[h.LOGGING=2]="LOGGING"})(j1||(j1={}));const P_=ds({}),yL=(h,j)=>{const nt=[],it=new Date().getTime();return{logEventCut:(dt,yt,vt)=>{nt.push({outcome:"cut",target:yt,purpose:vt})},logEventStopped:(dt,yt,vt)=>{nt.push({outcome:"stopped",target:yt,purpose:vt})},logNoParent:(dt,yt,vt)=>{nt.push({outcome:"no-parent",target:yt,purpose:vt})},logEventNoHandlers:(dt,yt)=>{nt.push({outcome:"no-handlers-left",target:yt})},logEventResponse:(dt,yt,vt)=>{nt.push({outcome:"response",purpose:vt,target:yt})},write:()=>{const dt=new Date().getTime();qn(["mousemove","mouseover","mouseout",QA()],h)||console.log(h,{event:h,time:dt-it,target:j.dom,sequence:Dn(nt,yt=>qn(["cut","stopped","response"],yt.outcome)?"{"+yt.purpose+"} "+yt.outcome+" at ("+cw(yt.target)+")":yt.outcome)})}}},Am=(h,j,nt)=>{switch(or(P_.get(),h).orThunk(()=>{const dt=Do(P_.get());return Co(dt,yt=>h.indexOf(yt)>-1?Mt.some(P_.get()[yt]):Mt.none())}).getOr(j1.NORMAL)){case j1.NORMAL:return nt(x2());case j1.LOGGING:{const dt=yL(h,j),yt=nt(dt);return dt.write(),yt}case j1.STOP:return!0}},hE=["alloy/data/Fields","alloy/debugging/Debugging"],mv=()=>{const h=new Error;if(h.stack!==void 0){const j=h.stack.split(`
`);return yn(j,nt=>nt.indexOf("alloy")>0&&!nr(hE,it=>nt.indexOf(it)>-1)).getOr($3)}else return $3},fT={logEventCut:Tt,logEventStopped:Tt,logNoParent:Tt,logEventNoHandlers:Tt,logEventResponse:Tt,write:Tt},G3=(h,j,nt)=>Am(h,j,nt),x2=Nt(fT),uw=Nt([Qo("menu"),Qo("selectedMenu")]),Xv=Nt([Qo("item"),Qo("selectedItem")]);Nt(ws(Xv().concat(uw())));const yv=Nt(ws(Xv())),lM=k_("initSize",[Qo("numColumns"),Qo("numRows")]),bL=()=>nu("markers",yv()),O_=()=>k_("markers",[Qo("backgroundMenu")].concat(uw()).concat(Xv())),mx=h=>k_("markers",Dn(h,Qo)),hT=(h,j,nt)=>(mv(),mm(j,j,nt,e2(it=>Js.value((...dt)=>it.apply(void 0,dt))))),Hl=h=>hT("onHandler",h,Sl(Tt)),C0=h=>hT("onKeyboardHandler",h,Sl(Mt.none)),w2=h=>hT("onHandler",h,v0()),jC=h=>hT("onKeyboardHandler",h,v0()),Xu=(h,j)=>tu(h,Nt(j)),C2=h=>tu(h,Qt),yx=Nt(lM);var cM=[ym("contextual",[nm("fadeInClass"),nm("fadeOutClass"),nm("transitionClass"),ky("lazyContext"),Hl("onShow"),Hl("onShown"),Hl("onHide"),Hl("onHidden")]),Yu("lazyViewport",()=>({bounds:Hp(),optScrollEnv:Mt.none()})),S_("modes",["top","bottom"],Fr),Hl("onDocked"),Hl("onUndocked")],uM=Object.freeze({__proto__:null,init:h=>{const j=ds(!1),nt=ds(!0),it=Xl(),dt=ds(h.modes),yt=()=>`docked:  ${j.get()}, visible: ${nt.get()}, modes: ${dt.get().join(",")}`;return F0({isDocked:j.get,setDocked:j.set,getInitialPos:it.get,setInitialPos:it.set,clearInitialPos:it.clear,isVisible:nt.get,setVisible:nt.set,getModes:dt.get,setModes:dt.set,readState:yt})}});const Ju=Gm({fields:cM,name:"docking",active:lw,apis:u0,state:uM}),pE=(h,j,nt)=>Yl(j,h.element)&&!Yl(j,nt),_L=xu([q4(L1(),(h,j)=>{const nt=j.event,it=nt.originator,dt=nt.target;return pE(h,it,dt)?(console.warn(L1()+` did not get interpreted by the desired target. 
Originator: `+cw(it)+`
Target: `+cw(dt)+`
Check the `+L1()+" event handlers"),!1):!0})]);var dM=Object.freeze({__proto__:null,events:_L});const k2=(h,j,nt,it)=>{const dt=h+j;return dt>it?nt:dt<nt?it:dt},Jv=(h,j,nt)=>Math.min(Math.max(h,j),nt),gE=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let bx=0;const Zr=h=>{const nt=new Date().getTime(),it=Math.floor(gE()*1e9);return bx++,h+"_"+it+bx+String(nt)},fM=Nt("alloy-id-"),pT=Nt("data-alloy-id"),hM=fM(),pM=pT(),j3=(h,j)=>{const nt=Zr(hM+h);return H3(j,nt),nt},H3=(h,j)=>{Object.defineProperty(h.dom,pM,{value:j,writable:!0})},HC=h=>{const j=Cs(h)?h.dom[pM]:null;return Mt.from(j)},mE=h=>Zr(h),S2=Qt,gT=h=>{const j=dt=>`The component must be in a context to execute: ${dt}`+(h?`
`+cw(h().element)+" is not in context.":""),nt=dt=>()=>{throw new Error(j(dt))},it=dt=>()=>{console.warn(j(dt))};return{debugInfo:Nt("fake"),triggerEvent:it("triggerEvent"),triggerFocus:it("triggerFocus"),triggerEscape:it("triggerEscape"),broadcast:it("broadcast"),broadcastOn:it("broadcastOn"),broadcastEvent:it("broadcastEvent"),build:nt("build"),buildOrPatch:nt("buildOrPatch"),addToWorld:nt("addToWorld"),removeFromWorld:nt("removeFromWorld"),addToGui:nt("addToGui"),removeFromGui:nt("removeFromGui"),getByUid:nt("getByUid"),getByDom:nt("getByDom"),isConnected:pn}},UC=gT(),mT=Zr("alloy-premade"),Qv=h=>(Object.defineProperty(h.element.dom,mT,{value:h.uid,writable:!0}),Ns(mT,h)),xL=h=>Ds(h.dom,mT),yT=h=>or(h,mT),bT=h=>R3((j,...nt)=>h(j.getApis(),j,...nt),h),wL=(h,j)=>{const nt=Dn(j,dt=>ym(dt.name(),[Qo("config"),So("state",z1)])),it=hp("component.behaviours",ws(nt),h.behaviours).fold(dt=>{throw new Error(ux(dt)+`
Complete spec:
`+JSON.stringify(h,null,2))},Qt);return{list:j,data:xr(it,dt=>{const yt=dt.map(vt=>({config:vt.config,state:vt.state.init(vt.config)}));return Nt(yt)})}},CL=h=>h.list,gM=h=>h.data,yE=(h,j)=>{const nt={};return ar(h,(it,dt)=>{ar(it,(yt,vt)=>{const St=or(nt,vt).getOr([]);nt[vt]=St.concat([j(dt,yt)])})}),nt},mM=(h,j,nt,it)=>{const dt={...j};xo(nt,jt=>{dt[jt.name()]=jt.exhibit(h,it)});const yt=yE(dt,(jt,Zt)=>({name:jt,modification:Zt})),vt=jt=>Vo(jt,(Zt,an)=>({...an.modification,...Zt}),{}),St=Vo(yt.classes,(jt,Zt)=>Zt.modification.concat(jt),[]),Dt=vt(yt.attributes),Bt=vt(yt.styles);return ey({classes:St,attributes:Dt,styles:Bt})},U3=(h,j,nt,it)=>{try{const dt=Rn(nt,(yt,vt)=>{const St=yt[j],Dt=vt[j],Bt=it.indexOf(St),jt=it.indexOf(Dt);if(Bt===-1)throw new Error("The ordering for "+h+" does not have an entry for "+St+`.
Order specified: `+JSON.stringify(it,null,2));if(jt===-1)throw new Error("The ordering for "+h+" does not have an entry for "+Dt+`.
Order specified: `+JSON.stringify(it,null,2));return Bt<jt?-1:jt<Bt?1:0});return Js.value(dt)}catch(dt){return Js.error([dt])}},kL=(h,j)=>({handler:h,purpose:j}),bE=(h,j)=>({cHandler:h,purpose:j}),VC=(h,j)=>bE(Mn.apply(void 0,[h.handler].concat(j)),h.purpose),dw=h=>h.cHandler,vT=(h,j)=>({name:h,handler:j}),V3=(h,j)=>{const nt={};return xo(h,it=>{nt[it.name()]=it.handlers(j)}),nt},_T=(h,j,nt)=>{const it={...nt,...V3(j,h)};return yE(it,vT)},W3=(h,j,nt,it)=>{const dt=_T(h,nt,it);return Ay(dt,j)},q3=h=>{const j=i2(h);return(nt,it,...dt)=>{const yt=[nt,it].concat(dt);j.abort.apply(void 0,yt)?it.stop():j.can.apply(void 0,yt)&&j.run.apply(void 0,yt)}},Z3=(h,j)=>Js.error(["The event ("+h+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Dn(j,nt=>nt.name),null,2)]),yM=(h,j,nt)=>{const it=j[nt];return it?U3("Event: "+nt,"name",h,it).map(dt=>{const yt=Dn(dt,vt=>vt.handler);return kC(yt)}):Z3(nt,h)},Ay=(h,j)=>{const nt=Cl(h,(it,dt)=>(it.length===1?Js.value(it[0].handler):yM(it,j,dt)).map(vt=>{const St=q3(vt),Dt=it.length>1?co(j[dt],Bt=>nr(it,jt=>jt.name===Bt)).join(" > "):it[0].name;return Ns(dt,kL(St,Dt))}));return op(nt,{})},E2="alloy.base.behaviour",bM=ws([mm("dom","dom",v0(),ws([Qo("tag"),So("styles",{}),So("classes",[]),So("attributes",{}),Ql("value"),Ql("innerHtml")])),Qo("components"),Qo("uid"),So("events",{}),So("apis",{}),mm("eventOrder","eventOrder",Lt({[s0()]:["disabling",E2,"toggling","typeaheadevents"],[L1()]:[E2,"focusing","keying"],[QA()]:[E2,"disabling","toggling","representing","tooltipping"],[N1()]:[E2,"representing","streaming","invalidating"],[Vy()]:[E2,"representing","item-events","toolbar-button-events","tooltipping"],[vp()]:["focusing",E2,"item-type-events"],[pv()]:["focusing",E2,"item-type-events"],[J0()]:["item-type-events","tooltipping"],[F1()]:["receiving","reflecting","tooltipping"]}),jy()),Ql("domModification")]),fw=h=>hp("custom.definition",bM,h),T2=h=>({...h.dom,uid:h.uid,domChildren:Dn(h.components,j=>j.element)}),K3=h=>h.domModification.fold(()=>ey({}),ey),Uo=h=>h.events,e1=h=>h.dom.value,I2=(h,j)=>{if(j===void 0)throw new Error("Value.set was undefined");h.dom.value=j},SL=(h,j,nt)=>Mp(h,j).map(dt=>{if(nt.exists(vt=>!Yl(vt,dt))){const vt=nt.map(eu).getOr("span"),St=io.fromTag(vt);return lv(dt,St),St}else return dt}),vE=(h,j,nt)=>{nt.fold(()=>Qm(h,j),it=>{Yl(it,j)||(lv(it,j),y0(it))})},bv=(h,j,nt)=>{const it=Dn(j,nt),dt=Om(h);return xo(dt.slice(it.length),y0),it},WC=(h,j,nt,it)=>{const dt=Mp(h,j),yt=it(nt,dt),vt=SL(h,j,dt);return vE(h,yt.element,vt),yt},vM=(h,j,nt)=>bv(h,j,(it,dt)=>WC(h,dt,it,nt)),_M=(h,j)=>bv(h,j,(nt,it)=>{const dt=Mp(h,it);return vE(h,nt,dt),nt}),k0=(h,j)=>{const nt=Do(h),it=Do(j),dt=Bn(it,nt),yt=Ts(h,(vt,St)=>!Ds(j,St)||vt!==j[St]).t;return{toRemove:dt,toSet:yt}},xT=(h,j)=>{const{class:nt,style:it,...dt}=_n(j),{toSet:yt,toRemove:vt}=k0(h.attributes,dt),St=()=>{xo(vt,bo=>Yt(j,bo)),Vl(j,yt)},Dt=jp(j),{toSet:Bt,toRemove:jt}=k0(h.styles,Dt),Zt=()=>{xo(jt,bo=>js(j,bo)),Xs(j,Bt)},an=J4(j),un=Bn(an,h.classes),wn=Bn(h.classes,an),On=()=>{OC(j,wn),B1(j,un)},_o=bo=>{Ey(j,bo)},Un=()=>{const bo=h.domChildren;_M(j,bo)},go=()=>{const bo=j,Bo=h.value.getOrUndefined();Bo!==e1(bo)&&I2(bo,Bo??"")};return St(),On(),Zt(),h.innerHtml.fold(Un,_o),go(),j},xM=h=>{const j=io.fromTag(h.tag);Vl(j,h.attributes),OC(j,h.classes),Xs(j,h.styles),h.innerHtml.each(it=>Ey(j,it));const nt=h.domChildren;return m_(j,nt),h.value.each(it=>{I2(j,it)}),j},EL=(h,j)=>{try{const nt=xT(h,j);return Mt.some(nt)}catch{return Mt.none()}},wM=h=>h.innerHtml.isSome()&&h.domChildren.length>0,AL=(h,j)=>{const nt=dt=>eu(dt)===h.tag&&!wM(h)&&!xL(dt),it=j.filter(nt).bind(dt=>EL(h,dt)).getOrThunk(()=>xM(h));return H3(it,h.uid),it},CM=h=>{const j=or(h,"behaviours").getOr({});return sn(Do(j),nt=>{const it=j[nt];return Ct(it)?[it.me]:[]})},TL=(h,j)=>wL(h,j),IL=h=>{const j=CM(h);return TL(h,j)},kM=(h,j,nt)=>{const it=T2(h),dt=K3(h),yt={"alloy.base.modification":dt},vt=j.length>0?mM(nt,yt,j,it):dt;return RC(it,vt)},qC=(h,j,nt)=>{const it={"alloy.base.behaviour":Uo(h)};return W3(nt,h.eventOrder,j,it).getOrDie()},RL=(h,j)=>{const nt=()=>bo,it=ds(UC),dt=pr(fw(h)),yt=IL(h),vt=CL(yt),St=gM(yt),Dt=kM(dt,vt,St),Bt=AL(Dt,j),jt=qC(dt,vt,St),Zt=ds(dt.components),an=Bo=>{it.set(Bo)},un=()=>{it.set(gT(nt))},wn=()=>{const Bo=Om(Bt),Go=sn(Bo,Sr=>it.get().getByDom(Sr).fold(()=>[],Wn));Zt.set(Go)},On=Bo=>{const Go=St;return(Rt(Go[Bo.name()])?Go[Bo.name()]:()=>{throw new Error("Could not find "+Bo.name()+" in "+JSON.stringify(h,null,2))})()},_o=Bo=>Rt(St[Bo.name()]),Un=()=>dt.apis,go=Bo=>St[Bo]().map(Go=>Go.state.readState()).getOr("not enabled"),bo={uid:h.uid,getSystem:it.get,config:On,hasConfigured:_o,spec:h,readState:go,getApis:Un,connect:an,disconnect:un,element:Bt,syncComponents:wn,components:Zt.get,events:jt};return bo},SM=(h,j)=>{const nt=or(h,"components").getOr([]);return j.fold(()=>Dn(nt,Tm),it=>Dn(nt,(dt,yt)=>X3(dt,Mp(it,yt))))},ML=(h,j)=>{const{events:nt,...it}=S2(h),dt=SM(it,j),yt={...it,events:{...dM,...nt},components:dt};return Js.value(RL(yt,j))},_p=h=>{const j=io.fromText(h);return Y3({element:j})},Y3=h=>{const j=x0("external.component",hy([Qo("element"),Ql("uid")]),h),nt=ds(gT()),it=St=>{nt.set(St)},dt=()=>{nt.set(gT(()=>vt))},yt=j.uid.getOrThunk(()=>mE("external"));H3(j.element,yt);const vt={uid:yt,getSystem:nt.get,config:Mt.none,hasConfigured:pn,connect:it,disconnect:dt,getApis:()=>({}),element:j.element,spec:h,readState:Nt("No state"),syncComponents:Tt,components:Nt([]),events:{}};return Qv(vt)},EM=mE,AM=h=>Ds(h,"uid"),X3=(h,j)=>yT(h).getOrThunk(()=>{const nt=AM(h)?h:{uid:EM(""),...h};return ML(nt,j).getOrDie()}),Tm=h=>X3(h,Mt.none()),qy=Qv;var TM=(h,j,nt,it,dt)=>h(nt,it)?Mt.some(nt):Rt(dt)&&dt(nt)?Mt.none():j(nt,it,dt);const J3=(h,j,nt)=>{let it=h.dom;const dt=Rt(nt)?nt:pn;for(;it.parentNode;){it=it.parentNode;const yt=io.fromDom(it);if(j(yt))return Mt.some(yt);if(dt(yt))break}return Mt.none()},Q3=(h,j,nt)=>TM((dt,yt)=>yt(dt),J3,h,j,nt),PL=(h,j)=>{const nt=h.dom;return nt.parentNode?wT(io.fromDom(nt.parentNode),it=>!Yl(h,it)&&j(it)):Mt.none()},wT=(h,j)=>{const nt=dt=>j(io.fromDom(dt));return yn(h.dom.childNodes,nt).map(io.fromDom)},IM=(h,j)=>{const nt=it=>{for(let dt=0;dt<it.childNodes.length;dt++){const yt=io.fromDom(it.childNodes[dt]);if(j(yt))return Mt.some(yt);const vt=nt(it.childNodes[dt]);if(vt.isSome())return vt}return Mt.none()};return nt(h.dom)},_E=(h,j,nt)=>Q3(h,j,nt).isSome(),RM=h=>Km(h),bm=(h,j,nt)=>J3(h,it=>gp(it,j),nt),OL=(h,j)=>PL(h,nt=>gp(nt,j)),vv=(h,j)=>wT(h,nt=>gp(nt,j)),ap=(h,j)=>Km(j,h),D_=(h,j,nt)=>TM((dt,yt)=>gp(dt,yt),bm,h,j,nt),ZC="aria-controls",eR=h=>Q3(h,nt=>{if(!Cs(nt))return!1;const it=Xr(nt,"id");return it!==void 0&&it.indexOf(ZC)>-1}).bind(nt=>{const it=Xr(nt,"id"),dt=yp(nt);return ap(dt,`[${ZC}="${it}"]`)}),xE=()=>{const h=Zr(ZC);return{id:h,link:it=>{Wo(it,ZC,h)},unlink:it=>{Yt(it,ZC)}}},MM=(h,j)=>eR(j).exists(nt=>hw(h,nt)),hw=(h,j)=>_E(j,nt=>Yl(nt,h.element),pn)||MM(h,j),d0=(h,j,nt,it,dt,yt,vt,St=!1)=>({x:h,y:j,bubble:nt,direction:it,placement:dt,restriction:yt,label:`${vt}-${dt}`,alwaysFit:St}),N_=nn.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),PM=(h,j,nt,it,dt,yt,vt,St,Dt)=>h.fold(j,nt,it,dt,yt,vt,St,Dt),DL=(h,j,nt,it)=>h.fold(j,j,it,it,j,it,nt,nt),tR=(h,j,nt,it)=>h.fold(j,it,j,it,nt,nt,j,it),CT=N_.southeast,nR=N_.southwest,oR=N_.northeast,kT=N_.northwest,Kr=N_.south,wE=N_.north,rR=N_.east,OM=N_.west,LL=(h,j)=>{switch(j){case 1:return h.x;case 0:return h.x+h.width;case 2:return h.y;case 3:return h.y+h.height}},f0=(h,j)=>Eo(["left","right","top","bottom"],nt=>or(j,nt).map(it=>LL(h,it))),DM=(h,j,nt)=>{const it=(Dt,Bt)=>j[Dt].map(jt=>{const Zt=Dt==="top"||Dt==="bottom",an=Zt?nt.top:nt.left,wn=(Dt==="left"||Dt==="top"?Math.max:Math.min)(jt,Bt)+an;return Zt?Jv(wn,h.y,h.bottom):Jv(wn,h.x,h.right)}).getOr(Bt),dt=it("left",h.x),yt=it("top",h.y),vt=it("right",h.right),St=it("bottom",h.bottom);return ep(dt,yt,vt-dt,St-yt)},pw="layout",NM=h=>h.x,sR=(h,j)=>h.x+h.width/2-j.width/2,LM=(h,j)=>h.x+h.width-j.width,h0=(h,j)=>h.y-j.height,gw=h=>h.y+h.height,iR=(h,j)=>h.y+h.height/2-j.height/2,R2=h=>h.x+h.width,FL=(h,j)=>h.x-j.width,vm=(h,j,nt)=>d0(NM(h),gw(h),nt.southeast(),CT(),"southeast",f0(h,{left:1,top:3}),pw),_m=(h,j,nt)=>d0(LM(h,j),gw(h),nt.southwest(),nR(),"southwest",f0(h,{right:0,top:3}),pw),i0=(h,j,nt)=>d0(NM(h),h0(h,j),nt.northeast(),oR(),"northeast",f0(h,{left:1,bottom:2}),pw),xm=(h,j,nt)=>d0(LM(h,j),h0(h,j),nt.northwest(),kT(),"northwest",f0(h,{right:0,bottom:2}),pw),yu=(h,j,nt)=>d0(sR(h,j),h0(h,j),nt.north(),wE(),"north",f0(h,{bottom:2}),pw),im=(h,j,nt)=>d0(sR(h,j),gw(h),nt.south(),Kr(),"south",f0(h,{top:3}),pw),ST=(h,j,nt)=>d0(R2(h),iR(h,j),nt.east(),rR(),"east",f0(h,{left:0}),pw),aR=(h,j,nt)=>d0(FL(h,j),iR(h,j),nt.west(),OM(),"west",f0(h,{right:1}),pw),lR=()=>[vm,_m,i0,xm,im,yu,ST,aR],cR=()=>[_m,vm,xm,i0,im,yu,ST,aR],FM=()=>[i0,xm,vm,_m,yu,im],zM=()=>[xm,i0,_m,vm,yu,im],CE=()=>[vm,_m,i0,xm,im,yu],ET=()=>[_m,vm,xm,i0,im,yu],kE=(h,j)=>j.universal?h:co(h,nt=>qn(j.channels,nt));var uB=Object.freeze({__proto__:null,events:h=>xu([er(F1(),(j,nt)=>{const it=h.channels,dt=Do(it),yt=nt,vt=kE(dt,yt);xo(vt,St=>{const Dt=it[St],Bt=Dt.schema,jt=x0("channel["+St+`] data
Receiver: `+cw(j.element),Bt,yt.data);Dt.onReceive(j,jt)})})])}),M2=[nu("channels",fv(Js.value,hy([w2("onReceive"),So("schema",jy())])))];const Ty=Gm({fields:M2,name:"receiving",active:uB});var BL=Object.freeze({__proto__:null,exhibit:(h,j)=>ey({classes:[],styles:j.useFixed()?{}:{position:"relative"}})});const _v=(h,j=!1)=>h.dom.focus({preventScroll:j}),KC=h=>h.dom.blur(),P2=h=>{const j=yp(h).dom;return h.dom===j.activeElement},L_=(h=xy())=>Mt.from(h.dom.activeElement).map(io.fromDom),B0=h=>L_(yp(h)).filter(j=>h.dom.contains(j.dom)),uR=(h,j)=>{const nt=yp(j),it=L_(nt).bind(yt=>{const vt=St=>Yl(yt,St);return vt(j)?Mt.some(j):IM(j,vt)}),dt=h(j);return it.each(yt=>{L_(nt).filter(vt=>Yl(vt,yt)).fold(()=>{_v(yt)},Tt)}),dt},mw=nn.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),$M=(h,j,nt,it,dt,yt)=>{const vt=j.rect,St=vt.x-nt,Dt=vt.y-it,Bt=vt.width,jt=vt.height,Zt=dt-(St+Bt),an=yt-(Dt+jt),un=Mt.some(St),wn=Mt.some(Dt),On=Mt.some(Zt),_o=Mt.some(an),Un=Mt.none();return PM(j.direction,()=>Kv(h,un,wn,Un,Un),()=>Kv(h,Un,wn,On,Un),()=>Kv(h,un,Un,Un,_o),()=>Kv(h,Un,Un,On,_o),()=>Kv(h,un,wn,Un,Un),()=>Kv(h,un,Un,Un,_o),()=>Kv(h,un,wn,Un,Un),()=>Kv(h,Un,wn,On,Un))},TT=(h,j)=>h.fold(()=>{const nt=j.rect;return Kv("absolute",Mt.some(nt.x),Mt.some(nt.y),Mt.none(),Mt.none())},(nt,it,dt,yt)=>$M("absolute",j,nt,it,dt,yt),(nt,it,dt,yt)=>$M("fixed",j,nt,it,dt,yt)),dR=(h,j)=>{const nt=Mn(__,j),it=h.fold(nt,nt,()=>{const vt=e0();return __(j).translate(-vt.left,-vt.top)}),dt=En(j),yt=K0(j);return ep(it.left,it.top,dt,yt)},SE=(h,j)=>j.fold(()=>h.fold(Hp,Hp,ep),nt=>h.fold(Nt(nt),Nt(nt),()=>{const it=IT(h,nt.x,nt.y);return ep(it.left,it.top,nt.width,nt.height)})),IT=(h,j,nt)=>{const it=Zu(j,nt),dt=()=>{const yt=e0();return it.translate(-yt.left,-yt.top)};return h.fold(Nt(it),Nt(it),dt)},GM=(h,j,nt,it)=>h.fold(j,nt,it);mw.none;const jM=mw.relative,HM=mw.fixed,EE=(h,j)=>({anchorBox:h,origin:j}),O2=(h,j)=>EE(h,j),AE="data-alloy-placement",$L=(h,j)=>{Wo(h,AE,j)},fR=h=>Ls(h,AE),GL=h=>Yt(h,AE),RT=nn.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),jL=(h,j)=>{const{x:nt,y:it,right:dt,bottom:yt}=j,{x:vt,y:St,right:Dt,bottom:Bt,width:jt,height:Zt}=h,an=vt>=nt&&vt<=dt,un=St>=it&&St<=yt,wn=an&&un,On=Dt<=dt&&Dt>=nt,_o=Bt<=yt&&Bt>=it,Un=On&&_o,go=Math.min(jt,vt>=nt?dt-vt:Dt-nt),bo=Math.min(Zt,St>=it?yt-St:Bt-it);return{originInBounds:wn,sizeInBounds:Un,visibleW:go,visibleH:bo}},UM=(h,j)=>{const{x:nt,y:it,right:dt,bottom:yt}=j,{x:vt,y:St,width:Dt,height:Bt}=h,jt=Math.max(nt,dt-Dt),Zt=Math.max(it,yt-Bt),an=Jv(vt,nt,jt),un=Jv(St,it,Zt),wn=Math.min(an+Dt,dt)-an,On=Math.min(un+Bt,yt)-un;return ep(an,un,wn,On)},HL=(h,j,nt)=>{const it=Nt(j.bottom-nt.y),dt=Nt(nt.bottom-j.y),yt=DL(h,dt,dt,it),vt=Nt(j.right-nt.x),St=Nt(nt.right-j.x);return{maxWidth:tR(h,St,St,vt),maxHeight:yt}},VM=(h,j,nt,it)=>{const dt=h.bubble,yt=dt.offset,vt=DM(it,h.restriction,yt),St=h.x+yt.left,Dt=h.y+yt.top,Bt=ep(St,Dt,j,nt),{originInBounds:jt,sizeInBounds:Zt,visibleW:an,visibleH:un}=jL(Bt,vt),wn=jt&&Zt,On=wn?Bt:UM(Bt,vt),_o=On.width>0&&On.height>0,{maxWidth:Un,maxHeight:go}=HL(h.direction,On,it),bo={rect:On,maxHeight:go,maxWidth:Un,direction:h.direction,placement:h.placement,classes:{on:dt.classesOn,off:dt.classesOff},layout:h.label,testY:Dt};return wn||h.alwaysFit?RT.fit(bo):RT.nofit(bo,an,un,_o)},TE=(h,j,nt,it,dt,yt)=>{const vt=it.width,St=it.height,Dt=(jt,Zt,an,un,wn)=>{const On=jt(nt,it,dt,h,yt),_o=VM(On,vt,St,yt);return _o.fold(Nt(_o),(Un,go,bo,Bo)=>(wn===Bo?bo>un||go>an:!wn&&Bo)?_o:RT.nofit(Zt,an,un,wn))};return yo(j,(jt,Zt)=>{const an=Mn(Dt,Zt);return jt.fold(Nt(jt),an)},RT.nofit({rect:nt,maxHeight:it.height,maxWidth:it.width,direction:CT(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:nt.y},-1,-1,!1)).fold(Qt,Qt)},WM=hn,ny=(h,j,nt)=>g_(h,j,WM,nt),hR=(h,j,nt)=>zm(h,j,WM,nt),qM=hm,pR=["top","bottom","right","left"],IE="data-alloy-transition-timer",UL=(h,j)=>iT(h,j.classes),VL=(h,j,nt)=>nt.exists(it=>{const dt=h.mode;return dt==="all"?!0:it[dt]!==j[dt]}),WL=(h,j)=>{const nt=it=>parseFloat(it).toFixed(3);return Yr(j,(it,dt)=>{const yt=h[dt].map(nt),vt=it.map(nt);return!_c(yt,vt)}).isSome()},MT=h=>{const j=yt=>{const St=lu(h,yt).split(/\s*,\s*/);return co(St,Vn)},nt=yt=>{if(_e(yt)&&/^[\d.]+/.test(yt)){const vt=parseFloat(yt);return Wu(yt,"ms")?vt:vt*1e3}else return 0},it=j("transition-delay"),dt=j("transition-duration");return yo(dt,(yt,vt,St)=>{const Dt=nt(it[St])+nt(vt);return Math.max(yt,Dt)},0)},ZM=(h,j)=>{const nt=Y0(),it=Y0();let dt;const yt=Bt=>{var jt;const Zt=(jt=Bt.raw.pseudoElement)!==null&&jt!==void 0?jt:"";return Yl(Bt.target,h)&&$n(Zt)&&qn(pR,Bt.raw.propertyName)},vt=Bt=>{if(wt(Bt)||yt(Bt)){nt.clear(),it.clear();const jt=Bt==null?void 0:Bt.raw.type;(wt(jt)||jt===oE())&&(clearTimeout(dt),Yt(h,IE),B1(h,j.classes))}},St=ny(h,Qx(),Bt=>{yt(Bt)&&(St.unbind(),nt.set(ny(h,oE(),vt)),it.set(ny(h,iL(),vt)))}),Dt=MT(h);requestAnimationFrame(()=>{dt=setTimeout(vt,Dt+17),Wo(h,IE,dt)})},gR=(h,j)=>{OC(h,j.classes),Ls(h,IE).each(nt=>{clearTimeout(parseInt(nt,10)),Yt(h,IE)}),ZM(h,j)},mR=(h,j,nt,it,dt,yt)=>{const vt=VL(it,dt,yt);if(vt||UL(h,it)){Jo(h,"position",nt.position);const St=dR(j,h),Dt=TT(j,{...dt,rect:St}),Bt=Eo(pR,jt=>Dt[jt]);WL(nt,Bt)&&(Jl(h,Bt),vt&&gR(h,it),Xm(h))}else B1(h,it.classes)},RE=h=>({width:En(h),height:K0(h)}),yR=(h,j,nt,it)=>{js(j,"max-height"),js(j,"max-width");const dt=RE(j);return TE(j,it.preference,h,dt,nt,it.bounds)},KM=(h,j)=>{const nt=j.classes;B1(h,nt.off),OC(h,nt.on)},YM=(h,j,nt)=>{const it=nt.maxHeightFunction;it(h,j.maxHeight)},XM=(h,j,nt)=>{const it=nt.maxWidthFunction;it(h,j.maxWidth)},qL=(h,j,nt)=>{const it=TT(nt.origin,j);nt.transition.each(dt=>{mR(h,nt.origin,it,dt,j,nt.lastPlacement)}),z0(h,it)},JM=(h,j)=>{$L(h,j.placement)},bR=(h,j)=>{jx(h,Math.floor(j))},QM=Nt((h,j)=>{bR(h,j),Xs(h,{"overflow-x":"hidden","overflow-y":"auto"})}),yw=Nt((h,j)=>{bR(h,j)}),eP=(h,j,nt)=>h[j]===void 0?nt:h[j],ZL=(h,j,nt,it,dt,yt,vt,St)=>{const Dt=eP(vt,"maxHeightFunction",QM()),Bt=eP(vt,"maxWidthFunction",Tt),jt=h.anchorBox,Zt=h.origin,an={bounds:SE(Zt,yt),origin:Zt,preference:it,maxHeightFunction:Dt,maxWidthFunction:Bt,lastPlacement:dt,transition:St};return KL(jt,j,nt,an)},KL=(h,j,nt,it)=>{const dt=yR(h,j,nt,it);return qL(j,dt,it),JM(j,dt),KM(j,dt),YM(j,dt,it),XM(j,dt,it),{layout:dt.layout,placement:dt.placement}},PT=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],n1=(h,j,nt,it=1)=>{const dt=h*it,yt=j*it,vt=Dt=>or(nt,Dt).getOr([]),St=(Dt,Bt,jt)=>{const Zt=Bn(PT,jt);return{offset:Zu(Dt,Bt),classesOn:sn(jt,vt),classesOff:sn(Zt,vt)}};return{southeast:()=>St(-h,j,["top","alignLeft"]),southwest:()=>St(h,j,["top","alignRight"]),south:()=>St(-h/2,j,["top","alignCentre"]),northeast:()=>St(-h,-j,["bottom","alignLeft"]),northwest:()=>St(h,-j,["bottom","alignRight"]),north:()=>St(-h/2,-j,["bottom","alignCentre"]),east:()=>St(h,-j/2,["valignCentre","left"]),west:()=>St(-h,-j/2,["valignCentre","right"]),insetNortheast:()=>St(dt,yt,["top","alignLeft","inset"]),insetNorthwest:()=>St(-dt,yt,["top","alignRight","inset"]),insetNorth:()=>St(-dt/2,yt,["top","alignCentre","inset"]),insetSoutheast:()=>St(dt,-yt,["bottom","alignLeft","inset"]),insetSouthwest:()=>St(-dt,-yt,["bottom","alignRight","inset"]),insetSouth:()=>St(-dt/2,-yt,["bottom","alignCentre","inset"]),insetEast:()=>St(-dt,-yt/2,["valignCentre","right","inset"]),insetWest:()=>St(dt,-yt/2,["valignCentre","left","inset"])}},OT=()=>n1(0,0,{}),DT=Qt,vR=(h,j)=>nt=>tP(nt)==="rtl"?j:h,tP=h=>lu(h,"direction")==="rtl"?"rtl":"ltr";var am;(function(h){h.TopToBottom="toptobottom",h.BottomToTop="bottomtotop"})(am||(am={}));const nP="data-alloy-vertical-dir",YC=h=>_E(h,j=>Cs(j)&&Xr(j,"data-alloy-vertical-dir")===am.BottomToTop),bw=()=>ym("layouts",[Qo("onLtr"),Qo("onRtl"),Ql("onBottomLtr"),Ql("onBottomRtl")]),NT=(h,j,nt,it,dt,yt,vt)=>{const St=vt.map(YC).getOr(!1),Dt=j.layouts.map(un=>un.onLtr(h)),Bt=j.layouts.map(un=>un.onRtl(h)),jt=St?j.layouts.bind(un=>un.onBottomLtr.map(wn=>wn(h))).or(Dt).getOr(dt):Dt.getOr(nt),Zt=St?j.layouts.bind(un=>un.onBottomRtl.map(wn=>wn(h))).or(Bt).getOr(yt):Bt.getOr(it);return vR(jt,Zt)(h)},oP=(h,j,nt)=>{const it=j.hotspot,dt=dR(nt,it.element),yt=NT(h.element,j,CE(),ET(),FM(),zM(),Mt.some(j.hotspot.element));return Mt.some(DT({anchorBox:dt,bubble:j.bubble.getOr(OT()),overrides:j.overrides,layouts:yt}))};var YL=[Qo("hotspot"),Ql("bubble"),So("overrides",{}),bw(),Xu("placement",oP)];const XL=(h,j,nt)=>{const it=IT(nt,j.x,j.y),dt=ep(it.left,it.top,j.width,j.height),yt=NT(h.element,j,lR(),cR(),lR(),cR(),Mt.none());return Mt.some(DT({anchorBox:dt,bubble:j.bubble,overrides:j.overrides,layouts:yt}))};var rP=[Qo("x"),Qo("y"),So("height",0),So("width",0),So("bubble",OT()),So("overrides",{}),bw(),Xu("placement",XL)];const ME=nn.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),_R=h=>h.fold(Qt,(j,nt,it)=>j.translate(-nt,-it)),JL=h=>h.fold(Qt,Qt),XC=h=>yo(h,(j,nt)=>j.translate(nt.left,nt.top),Zu(0,0)),sP=h=>{const j=Dn(h,_R);return XC(j)},iP=h=>{const j=Dn(h,JL);return XC(j)},aP=ME.screen,xR=ME.absolute,LT=(h,j,nt)=>{const it=um(nt.root).dom,dt=yt=>{const vt=Bp(yt),St=Bp(h.element);return Yl(vt,St)};return Mt.from(it.frameElement).map(io.fromDom).filter(dt).map(Gu)},lP=(h,j,nt)=>{const it=Bp(h.element),dt=e0(it),yt=LT(h,j,nt).getOr(dt);return xR(yt,dt.left,dt.top)},vw=(h,j,nt,it)=>{const dt=aP(Zu(h,j));return Mt.some(R1(dt,nt,it))},QL=(h,j,nt,it,dt)=>h.map(yt=>{const vt=[j,yt.point],St=GM(it,()=>iP(vt),()=>iP(vt),()=>sP(vt)),Dt=ox(St.left,St.top,yt.width,yt.height),Bt=nt.showAbove?FM():CE(),jt=nt.showAbove?zM():ET(),Zt=NT(dt,nt,Bt,jt,Bt,jt,Mt.none());return DT({anchorBox:Dt,bubble:nt.bubble.getOr(OT()),overrides:nt.overrides,layouts:Zt})}),cP=(h,j,nt)=>{const it=lP(h,nt,j);return j.node.filter(zn).bind(dt=>{const yt=dt.dom.getBoundingClientRect(),vt=vw(yt.left,yt.top,yt.width,yt.height),St=j.node.getOr(h.element);return QL(vt,it,j,nt,St)})};var uP=[Qo("node"),Qo("root"),Ql("bubble"),bw(),So("overrides",{}),So("showAbove",!1),Xu("placement",cP)];const FT="\uFEFF",e8="",zT={create:(h,j,nt,it)=>({start:h,soffset:j,finish:nt,foffset:it})},PE=nn.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),dP=(h,j,nt,it)=>h.fold(j,nt,it),JC=h=>h.fold(Qt,Qt,Qt),QC=PE.before,t8=PE.on,fP=PE.after,n8={before:QC,on:t8,after:fP,cata:dP,getStart:JC},N2=nn.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),_k=h=>N2.exact(h.start,h.soffset,h.finish,h.foffset),wR=h=>h.match({domRange:j=>io.fromDom(j.startContainer),relative:(j,nt)=>n8.getStart(j),exact:(j,nt,it,dt)=>j}),CR=N2.domRange,o8=N2.relative,kR=N2.exact,hP=h=>{const j=wR(h);return um(j)},pP=zT.create,eS={domRange:CR,relative:o8,exact:kR,exactFromRange:_k,getWin:hP,range:pP},gP=(h,j)=>{j.fold(nt=>{h.setStartBefore(nt.dom)},(nt,it)=>{h.setStart(nt.dom,it)},nt=>{h.setStartAfter(nt.dom)})},BT=(h,j)=>{j.fold(nt=>{h.setEndBefore(nt.dom)},(nt,it)=>{h.setEnd(nt.dom,it)},nt=>{h.setEndAfter(nt.dom)})},_w=(h,j,nt)=>{const it=h.document.createRange();return gP(it,j),BT(it,nt),it},vx=(h,j,nt,it,dt)=>{const yt=h.document.createRange();return yt.setStart(j.dom,nt),yt.setEnd(it.dom,dt),yt},OE=h=>({left:h.left,top:h.top,right:h.right,bottom:h.bottom,width:h.width,height:h.height}),DE=h=>{const j=h.getClientRects(),nt=j.length>0?j[0]:h.getBoundingClientRect();return nt.width>0||nt.height>0?Mt.some(nt).map(OE):Mt.none()},r8=h=>{const j=h.getBoundingClientRect();return j.width>0||j.height>0?Mt.some(j).map(OE):Mt.none()},Iy=nn.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),H1=(h,j,nt)=>j(io.fromDom(nt.startContainer),nt.startOffset,io.fromDom(nt.endContainer),nt.endOffset),SR=(h,j)=>j.match({domRange:nt=>({ltr:Nt(nt),rtl:Mt.none}),relative:(nt,it)=>({ltr:Zo(()=>_w(h,nt,it)),rtl:Zo(()=>Mt.some(_w(h,it,nt)))}),exact:(nt,it,dt,yt)=>({ltr:Zo(()=>vx(h,nt,it,dt,yt)),rtl:Zo(()=>Mt.some(vx(h,dt,yt,nt,it)))})}),s8=(h,j)=>{const nt=j.ltr();return nt.collapsed?j.rtl().filter(dt=>dt.collapsed===!1).map(dt=>Iy.rtl(io.fromDom(dt.endContainer),dt.endOffset,io.fromDom(dt.startContainer),dt.startOffset)).getOrThunk(()=>H1(h,Iy.ltr,nt)):H1(h,Iy.ltr,nt)},dB=(h,j)=>{const nt=SR(h,j);return s8(h,nt)},xw=(h,j)=>dB(h,j).match({ltr:(it,dt,yt,vt)=>{const St=h.document.createRange();return St.setStart(it.dom,dt),St.setEnd(yt.dom,vt),St},rtl:(it,dt,yt,vt)=>{const St=h.document.createRange();return St.setStart(yt.dom,vt),St.setEnd(it.dom,dt),St}});Iy.ltr,Iy.rtl;const tS=(h,j,nt)=>co(by(h,nt),j),a0=(h,j)=>v1(j,h),ER=(h,j,nt,it)=>{const yt=Bp(h).dom.createRange();return yt.setStart(h.dom,j),yt.setEnd(nt.dom,it),yt},$T=(h,j,nt,it)=>{const dt=ER(h,j,nt,it),yt=Yl(h,nt)&&j===it;return dt.collapsed&&!yt},L2=h=>Mt.from(h.getSelection()),NE=h=>{if(h.rangeCount>0){const j=h.getRangeAt(0),nt=h.getRangeAt(h.rangeCount-1);return Mt.some(zT.create(io.fromDom(j.startContainer),j.startOffset,io.fromDom(nt.endContainer),nt.endOffset))}else return Mt.none()},i8=h=>{if(h.anchorNode===null||h.focusNode===null)return NE(h);{const j=io.fromDom(h.anchorNode),nt=io.fromDom(h.focusNode);return $T(j,h.anchorOffset,nt,h.focusOffset)?Mt.some(zT.create(j,h.anchorOffset,nt,h.focusOffset)):NE(h)}},AR=h=>L2(h).filter(j=>j.rangeCount>0).bind(i8),LE=(h,j)=>{const nt=xw(h,j);return DE(nt)},l0=(h,j)=>{const nt=xw(h,j);return r8(nt)},xv=((h,j)=>{const nt=yt=>{if(!h(yt))throw new Error("Can only get "+j+" value of a "+j+" node");return it(yt).getOr("")},it=yt=>h(yt)?Mt.from(yt.dom.nodeValue):Mt.none();return{get:nt,getOption:it,set:(yt,vt)=>{if(!h(yt))throw new Error("Can only set raw "+j+" value of a "+j+" node");yt.dom.nodeValue=vt}}})(Rl,"text"),IR=h=>xv.get(h),nS=(h,j)=>({element:h,offset:j}),oS=(h,j)=>{const nt=Om(h);if(nt.length===0)return nS(h,j);if(j<nt.length)return nS(nt[j],0);{const it=nt[nt.length-1],dt=Rl(it)?IR(it).length:Om(it).length;return nS(it,dt)}},RR=(h,j)=>Rl(h)?nS(h,j):oS(h,j),_x=h=>h.foffset!==void 0,MR=(h,j)=>j.getSelection.getOrThunk(()=>()=>AR(h))().map(it=>{if(_x(it)){const dt=RR(it.start,it.soffset),yt=RR(it.finish,it.foffset);return eS.range(dt.element,dt.offset,yt.element,yt.offset)}else return it}),PR=(h,j,nt)=>{const it=um(j.root).dom,dt=lP(h,nt,j),yt=MR(it,j).bind(Dt=>{if(_x(Dt))return l0(it,eS.exactFromRange(Dt)).orThunk(()=>{const jt=io.fromText(FT);lv(Dt.start,jt);const Zt=LE(it,eS.exact(jt,0,jt,1));return y0(jt),Zt}).bind(jt=>vw(jt.left,jt.top,jt.width,jt.height));{const Bt=xr(Dt,Zt=>Zt.dom.getBoundingClientRect()),jt={left:Math.min(Bt.firstCell.left,Bt.lastCell.left),right:Math.max(Bt.firstCell.right,Bt.lastCell.right),top:Math.min(Bt.firstCell.top,Bt.lastCell.top),bottom:Math.max(Bt.firstCell.bottom,Bt.lastCell.bottom)};return vw(jt.left,jt.top,jt.right-jt.left,jt.bottom-jt.top)}}),St=MR(it,j).bind(Dt=>_x(Dt)?Cs(Dt.start)?Mt.some(Dt.start):Pm(Dt.start):Mt.some(Dt.firstCell)).getOr(h.element);return QL(yt,dt,j,nt,St)};var OR=[Ql("getSelection"),Qo("root"),Ql("bubble"),bw(),So("overrides",{}),So("showAbove",!1),Xu("placement",PR)];const F_="link-layout",GT=h=>h.x+h.width,p0=(h,j)=>h.x-j.width,mP=(h,j)=>h.y-j.height+h.height,DR=h=>h.y,NR=(h,j,nt)=>d0(GT(h),DR(h),nt.southeast(),CT(),"southeast",f0(h,{left:0,top:2}),F_),yP=(h,j,nt)=>d0(p0(h,j),DR(h),nt.southwest(),nR(),"southwest",f0(h,{right:1,top:2}),F_),LR=(h,j,nt)=>d0(GT(h),mP(h,j),nt.northeast(),oR(),"northeast",f0(h,{left:0,bottom:3}),F_),bP=(h,j,nt)=>d0(p0(h,j),mP(h,j),nt.northwest(),kT(),"northwest",f0(h,{right:1,bottom:3}),F_),vP=()=>[NR,yP,LR,bP],Zy=()=>[yP,NR,bP,LR],ww=(h,j,nt)=>{const it=dR(nt,j.item.element),dt=NT(h.element,j,vP(),Zy(),vP(),Zy(),Mt.none());return Mt.some(DT({anchorBox:it,bubble:OT(),overrides:j.overrides,layouts:dt}))};var _P=[Qo("item"),bw(),So("overrides",{}),Xu("placement",ww)],F2=Ip("type",{selection:OR,node:uP,hotspot:YL,submenu:_P,makeshift:rP});const $0=[gy("classes",Fr),Em("mode","all",["all","layout","placement"])],Ry=[So("useFixed",pn),Ql("getBounds")],G0=[nu("anchor",F2),ym("transition",$0)],Ky=()=>{const h=document.documentElement;return HM(0,0,h.clientWidth,h.clientHeight)},jT=h=>{const j=Gu(h.element),nt=h.element.dom.getBoundingClientRect();return jM(j.left,j.top,nt.width,nt.height)},Yy=(h,j,nt,it,dt,yt)=>{const vt=O2(j.anchorBox,h);return ZL(vt,it.element,j.bubble,j.layouts,dt,nt,j.overrides,yt)},z2=(h,j,nt,it,dt)=>{const yt=Mt.none();xP(h,j,nt,it,dt,yt)},xP=(h,j,nt,it,dt,yt)=>{const vt=x0("placement.info",ws(G0),dt),St=vt.anchor,Dt=it.element,Bt=nt.get(it.uid);uR(()=>{Jo(Dt,"position","fixed");const jt=gu(Dt,"visibility");Jo(Dt,"visibility","hidden");const Zt=j.useFixed()?Ky():jT(h);St.placement(h,St,Zt).each(an=>{const un=yt.orThunk(()=>j.getBounds.map(so)),wn=Yy(Zt,an,un,it,Bt,vt.transition);nt.set(it.uid,wn)}),jt.fold(()=>{js(Dt,"visibility")},an=>{Jo(Dt,"visibility",an)}),gu(Dt,"left").isNone()&&gu(Dt,"top").isNone()&&gu(Dt,"right").isNone()&&gu(Dt,"bottom").isNone()&&au(gu(Dt,"position"),"fixed")&&js(Dt,"position")},Dt)};var FR=Object.freeze({__proto__:null,position:z2,positionWithinBounds:xP,getMode:(h,j,nt)=>j.useFixed()?"fixed":"absolute",reset:(h,j,nt,it)=>{const dt=it.element;xo(["position","left","right","top","bottom"],yt=>js(dt,yt)),GL(dt),nt.clear(it.uid)}}),HT=Object.freeze({__proto__:null,init:()=>{let h={};return F0({readState:()=>h,clear:dt=>{Ct(dt)?delete h[dt]:h={}},set:(dt,yt)=>{h[dt]=yt},get:dt=>or(h,dt)})}});const c0=Gm({fields:Ry,name:"positioning",active:BL,apis:FR,state:HT}),FE=h=>h.getSystem().isConnected(),zE=h=>{El(h,Vy());const j=h.components();xo(j,zE)},Cw=h=>{const j=h.components();xo(j,Cw),El(h,my())},zR=(h,j)=>{h.getSystem().addToWorld(j),zn(h.element)&&Cw(j)},UT=h=>{zE(h),h.getSystem().removeFromWorld(h)},BR=(h,j)=>{Qm(h.element,j.element)},VT=h=>{xo(h.components(),j=>y0(j.element)),tm(h.element),h.syncComponents()},$R=(h,j,nt)=>{const it=h.components();VT(h);const dt=nt(j),yt=Bn(it,dt);xo(yt,vt=>{zE(vt),h.getSystem().removeFromWorld(vt)}),xo(dt,vt=>{FE(vt)?BR(h,vt):(h.getSystem().addToWorld(vt),BR(h,vt),zn(h.element)&&Cw(vt))}),h.syncComponents()},rS=(h,j,nt)=>{const it=h.components(),dt=sn(j,St=>yT(St).toArray());xo(it,St=>{qn(dt,St)||UT(St)});const yt=nt(j),vt=Bn(it,yt);xo(vt,St=>{FE(St)&&UT(St)}),xo(yt,St=>{FE(St)||zR(h,St)}),h.syncComponents()},xx=(h,j)=>{BE(h,j,Qm)},BE=(h,j,nt)=>{h.getSystem().addToWorld(j),nt(h.element,j.element),zn(h.element)&&Cw(j),h.syncComponents()},B2=h=>{zE(h),y0(h.element),h.getSystem().removeFromWorld(h)},wx=h=>{const j=_g(h.element).bind(nt=>h.getSystem().getByDom(nt).toOptional());B2(h),j.each(nt=>{nt.syncComponents()})},wP=h=>{const j=h.components();xo(j,B2),tm(h.element),h.syncComponents()},My=(h,j)=>{kw(h,j,Qm)},GR=(h,j)=>{kw(h,j,nx)},kw=(h,j,nt)=>{nt(h,j.element);const it=Om(j.element);xo(it,dt=>{j.getByDom(dt).each(Cw)})},$2=h=>{const j=Om(h.element);xo(j,nt=>{h.getByDom(nt).each(zE)}),y0(h.element)},WT=(h,j,nt,it)=>{nt.get().each(vt=>{wP(h)});const dt=j.getAttachPoint(h);xx(dt,h);const yt=h.getSystem().build(it);return xx(h,yt),nt.set(yt),yt},qT=(h,j,nt,it)=>{const dt=WT(h,j,nt,it);return j.onOpen(h,dt),dt},c8=(h,j,nt,it)=>nt.get().map(()=>WT(h,j,nt,it)),u8=(h,j,nt,it,dt)=>{SP(h,j),qT(h,j,nt,it),dt(),ZT(h,j)},CP=(h,j,nt)=>{nt.get().each(it=>{wP(h),wx(h),j.onClose(h,it),nt.clear()})},kP=(h,j,nt)=>nt.isOpen(),G2=(h,j,nt,it)=>kP(h,j,nt)&&nt.get().exists(dt=>j.isPartOf(h,dt,it)),sS=(h,j,nt)=>nt.get(),$E=(h,j,nt,it)=>{gu(h.element,j).fold(()=>{Yt(h.element,nt)},dt=>{Wo(h.element,nt,dt)}),Jo(h.element,j,it)},d8=(h,j,nt)=>{Ls(h.element,nt).fold(()=>js(h.element,j),it=>Jo(h.element,j,it))},SP=(h,j,nt)=>{const it=j.getAttachPoint(h);Jo(h.element,"position",c0.getMode(it)),$E(h,"visibility",j.cloakVisibilityAttr,"hidden")},GE=h=>nr(["top","left","right","bottom"],j=>gu(h,j).isSome()),ZT=(h,j,nt)=>{GE(h.element)||js(h.element,"position"),d8(h,"visibility",j.cloakVisibilityAttr)};var jR=Object.freeze({__proto__:null,cloak:SP,decloak:ZT,open:qT,openWhileCloaked:u8,close:CP,isOpen:kP,isPartOf:G2,getState:sS,setContent:c8}),KT=Object.freeze({__proto__:null,events:(h,j)=>xu([er($m(),(nt,it)=>{CP(nt,h,j)})])}),iS=[Hl("onOpen"),Hl("onClose"),Qo("isPartOf"),Qo("getAttachPoint"),So("cloakVisibilityAttr","data-precloak-visibility")],j2=Object.freeze({__proto__:null,init:()=>{const h=Xl(),j=Nt("not-implemented");return F0({readState:j,isOpen:h.isSet,clear:h.clear,set:h.set,get:h.get})}});const Zl=Gm({fields:iS,name:"sandboxing",active:KT,apis:jR,state:j2}),Cx=Nt("dismiss.popups"),Sw=Nt("reposition.popups"),YT=Nt("mouse.released"),HR=hy([So("isExtraPart",pn),ym("fireEventInstead",[So("event",Wy())])]),jE=h=>{const j=x0("Dismissal",HR,h);return{[Cx()]:{schema:hy([Qo("target")]),onReceive:(nt,it)=>{Zl.isOpen(nt)&&(Zl.isPartOf(nt,it.target)||j.isExtraPart(nt,it.target)||j.fireEventInstead.fold(()=>Zl.close(nt),yt=>El(nt,yt.event)))}}}},H2=hy([ym("fireEventInstead",[So("event",sE())]),ky("doReposition")]),HE=h=>{const j=x0("Reposition",H2,h);return{[Sw()]:{onReceive:nt=>{Zl.isOpen(nt)&&j.fireEventInstead.fold(()=>j.doReposition(nt),it=>El(nt,it.event))}}}},XT=(h,j,nt)=>{j.store.manager.onLoad(h,j,nt)},TP=(h,j,nt)=>{j.store.manager.onUnload(h,j,nt)};var Ew=Object.freeze({__proto__:null,onLoad:XT,onUnload:TP,setValue:(h,j,nt,it)=>{j.store.manager.setValue(h,j,nt,it)},getValue:(h,j,nt)=>j.store.manager.getValue(h,j,nt),getState:(h,j,nt)=>nt}),VR=Object.freeze({__proto__:null,events:(h,j)=>{const nt=h.resetOnDom?[rp((it,dt)=>{XT(it,h,j)}),I_((it,dt)=>{TP(it,h,j)})]:[sw(h,j,XT)];return xu(nt)}});const V2=()=>{const h=ds(null),j=()=>({mode:"memory",value:h.get()}),nt=()=>h.get()===null,it=()=>{h.set(null)};return F0({set:h.set,get:h.get,isNotSet:nt,clear:it,readState:j})},WR=()=>F0({readState:Tt}),IP=()=>{const h=ds({}),j=ds({});return F0({readState:()=>({mode:"dataset",dataByValue:h.get(),dataByText:j.get()}),lookup:vt=>or(h.get(),vt).orThunk(()=>or(j.get(),vt)),update:vt=>{const St=h.get(),Dt=j.get(),Bt={},jt={};xo(vt,Zt=>{Bt[Zt.value]=Zt,or(Zt,"meta").each(an=>{or(an,"text").each(un=>{jt[un]=Zt})})}),h.set({...St,...Bt}),j.set({...Dt,...jt})},clear:()=>{h.set({}),j.set({})}})};var z_=Object.freeze({__proto__:null,memory:V2,dataset:IP,manual:WR,init:h=>h.store.manager.state(h)});const MP=(h,j,nt,it)=>{const dt=j.store;nt.update([it]),dt.setValue(h,it),j.onSetValue(h,it)},QT=(h,j,nt)=>{const it=j.store,dt=it.getDataKey(h);return nt.lookup(dt).getOrThunk(()=>it.getFallbackEntry(dt))},wv=(h,j,nt)=>{j.store.initialValue.each(dt=>{MP(h,j,nt,dt)})},jm=(h,j,nt)=>{nt.clear()};var h8=[Ql("initialValue"),Qo("getFallbackEntry"),Qo("getDataKey"),Qo("setValue"),Xu("manager",{setValue:MP,getValue:QT,onLoad:wv,onUnload:jm,state:IP})];const U1=(h,j,nt)=>j.store.getValue(h),p8=(h,j,nt,it)=>{j.store.setValue(h,it),j.onSetValue(h,it)},PP=(h,j,nt)=>{j.store.initialValue.each(it=>{j.store.setValue(h,it)})};var UE=[Qo("getValue"),So("setValue",Tt),Ql("initialValue"),Xu("manager",{setValue:p8,getValue:U1,onLoad:PP,onUnload:Tt,state:z1.init})];const aS=(h,j,nt,it)=>{nt.set(it),j.onSetValue(h,it)},OP=(h,j,nt)=>nt.get(),DP=(h,j,nt)=>{j.store.initialValue.each(it=>{nt.isNotSet()&&nt.set(it)})},hB=(h,j,nt)=>{nt.clear()};var pB=[Ql("initialValue"),Xu("manager",{setValue:aS,getValue:OP,onLoad:DP,onUnload:hB,state:V2})],NP=[Ru("store",{mode:"memory"},Ip("mode",{memory:pB,manual:UE,dataset:h8})),Hl("onSetValue"),So("resetOnDom",!1)];const $r=Gm({fields:NP,name:"representing",active:VR,apis:Ew,extra:{setValueFrom:(h,j)=>{const nt=$r.getValue(j);$r.setValue(h,nt)}},state:z_}),Hm=(h,j)=>Ot(h,{},Dn(j,nt=>tE(nt.name(),"Cannot configure "+nt.name()+" for "+h)).concat([tu("dump",Qt)])),eI=h=>h.dump,Um=(h,j)=>({...yr(j),...h.dump}),Cv={field:Hm,augment:Um,get:eI},qR="placeholder",VE=nn.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),lS=h=>Ds(h,"uiType"),LP=(h,j,nt,it)=>h.exists(dt=>dt!==nt.owner)?VE.single(!0,Nt(nt)):or(it,nt.name).fold(()=>{throw new Error("Unknown placeholder component: "+nt.name+`
Known: [`+Do(it)+`]
Namespace: `+h.getOr("none")+`
Spec: `+JSON.stringify(nt,null,2))},dt=>dt.replace()),Aw=(h,j,nt,it)=>lS(nt)&&nt.uiType===qR?LP(h,j,nt,it):VE.single(!1,Nt(nt)),cS=(h,j,nt,it)=>Aw(h,j,nt,it).fold((yt,vt)=>{const St=lS(nt)?vt(j,nt.config,nt.validated):vt(j),Dt=or(St,"components").getOr([]),Bt=sn(Dt,jt=>cS(h,j,jt,it));return[{...St,components:Bt}]},(yt,vt)=>{if(lS(nt)){const St=vt(j,nt.config,nt.validated);return nt.validated.preprocess.getOr(Qt)(St)}else return vt(j)}),g8=(h,j,nt,it)=>sn(nt,dt=>cS(h,j,dt,it)),m8=(h,j)=>{let nt=!1;const it=()=>nt,dt=()=>{if(nt)throw new Error("Trying to use the same placeholder more than once: "+h);return nt=!0,j},yt=()=>j.fold((vt,St)=>vt,(vt,St)=>vt);return{name:Nt(h),required:yt,used:it,replace:dt}},y8=(h,j,nt,it)=>{const dt=xr(it,(vt,St)=>m8(St,vt)),yt=g8(h,j,nt,dt);return ar(dt,vt=>{if(vt.used()===!1&&vt.required())throw new Error("Placeholder: "+vt.name()+` was not found in components list
Namespace: `+h.getOr("none")+`
Components: `+JSON.stringify(j.components,null,2))}),yt},FP=VE.single,W2=VE.multiple,uS=Nt(qR),q2=nn.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),tI=So("factory",{sketch:Qt}),Xy=So("schema",[]),V1=Qo("name"),Z2=mm("pname","pname",w_(h=>"<alloy."+Zr(h.name)+">"),jy()),dS=tu("schema",()=>[Ql("preprocess")]),nI=So("defaults",Nt({})),oI=So("overrides",Nt({})),b8=ws([tI,Xy,V1,Z2,nI,oI]),v8=ws([tI,Xy,V1,nI,oI]),_8=ws([tI,Xy,V1,Z2,nI,oI]),x8=ws([tI,dS,V1,Qo("unit"),Z2,nI,oI]),zP=h=>h.fold(Mt.some,Mt.none,Mt.some,Mt.some),BP=h=>{const j=nt=>nt.name;return h.fold(j,j,j,j)},ZR=h=>h.fold(Qt,Qt,Qt,Qt),rI=(h,j)=>nt=>{const it=x0("Converting part type",j,nt);return h(it)},S0=rI(q2.required,b8),kv=rI(q2.external,v8),Jy=rI(q2.optional,_8),WE=rI(q2.group,x8),KR=Nt("entirety");var $P=Object.freeze({__proto__:null,required:S0,external:kv,optional:Jy,group:WE,asNamedPart:zP,name:BP,asCommon:ZR,original:KR});const sI=(h,j,nt,it)=>Fu(j.defaults(h,nt,it),nt,{uid:h.partUids[j.name]},j.overrides(h,nt,it)),w8=(h,j,nt)=>{const it={},dt={};return xo(nt,yt=>{yt.fold(vt=>{it[vt.pname]=FP(!0,(St,Dt,Bt)=>vt.factory.sketch(sI(St,vt,Dt,Bt)))},vt=>{const St=j.parts[vt.name];dt[vt.name]=Nt(vt.factory.sketch(sI(j,vt,St[KR()]),St))},vt=>{it[vt.pname]=FP(!1,(St,Dt,Bt)=>vt.factory.sketch(sI(St,vt,Dt,Bt)))},vt=>{it[vt.pname]=W2(!0,(St,Dt,Bt)=>{const jt=St[vt.name];return Dn(jt,Zt=>vt.factory.sketch(Fu(vt.defaults(St,Zt,Bt),Zt,vt.overrides(St,Zt))))})})}),{internals:Nt(it),externals:Nt(dt)}},iI=(h,j)=>{const nt={};return xo(j,it=>{zP(it).each(dt=>{const yt=C8(h,dt.pname);nt[dt.name]=vt=>{const St=x0("Part: "+dt.name+" in "+h,ws(dt.schema),vt);return{...yt,config:vt,validated:St}}})}),nt},C8=(h,j)=>({uiType:uS(),owner:h,name:j}),aI=(h,j,nt)=>({uiType:uS(),owner:h,name:j,config:nt,validated:{}}),k8=h=>sn(h,j=>j.fold(Mt.none,Mt.some,Mt.none,Mt.none).map(nt=>k_(nt.name,nt.schema.concat([C2(KR())]))).toArray()),S8=h=>Dn(h,BP),GP=(h,j,nt)=>w8(h,j,nt),lI=(h,j,nt)=>y8(Mt.some(h),j,j.components,nt),zu=(h,j,nt)=>{const it=j.partUids[nt];return h.getSystem().getByUid(it).toOptional()},Gr=(h,j,nt)=>zu(h,j,nt).getOrDie("Could not find part: "+nt),W1=(h,j,nt)=>{const it={},dt=j.partUids,yt=h.getSystem();return xo(nt,vt=>{it[vt]=Nt(yt.getByUid(dt[vt]))}),it},jP=(h,j)=>{const nt=h.getSystem();return xr(j.partUids,(it,dt)=>Nt(nt.getByUid(it)))},YR=h=>Do(h.partUids),fS=(h,j,nt)=>{const it={},dt=j.partUids,yt=h.getSystem();return xo(nt,vt=>{it[vt]=Nt(yt.getByUid(dt[vt]).getOrDie())}),it},cI=(h,j)=>{const nt=S8(j);return Qs(Dn(nt,it=>({key:it,value:h+"-"+it})))},qE=h=>mm("partUids","partUids",Kx(j=>cI(j.uid,h)),jy());var XR=Object.freeze({__proto__:null,generate:iI,generateOne:aI,schemas:k8,names:S8,substitutes:GP,components:lI,defaultUids:cI,defaultUidsSchema:qE,getAllParts:jP,getAllPartNames:YR,getPart:zu,getPartOrDie:Gr,getParts:W1,getPartsOrDie:fS});const HP=(h,j)=>(h.length>0?[k_("parts",h)]:[]).concat([Qo("uid"),So("dom",{}),So("components",[]),C2("originalSpec"),So("debug.sketcher",{})]).concat(j),JR=(h,j,nt,it,dt)=>{const yt=HP(it,dt);return x0(h+" [SpecSchema]",hy(yt.concat(j)),nt)},UP=(h,j,nt,it)=>{const dt=uI(it),yt=JR(h,j,dt,[],[]);return nt(yt,dt)},ZE=(h,j,nt,it,dt)=>{const yt=uI(dt),vt=k8(nt),St=qE(nt),Dt=JR(h,j,yt,vt,[St]),Bt=GP(h,Dt,nt),jt=lI(h,Dt,Bt.internals());return it(Dt,jt,yt,Bt.externals())},K2=h=>Ds(h,"uid"),uI=h=>K2(h)?h:{...h,uid:mE("uid")},E8=h=>h.uid!==void 0,A8=hy([Qo("name"),Qo("factory"),Qo("configFields"),So("apis",{}),So("extraApis",{})]),T8=hy([Qo("name"),Qo("factory"),Qo("configFields"),Qo("partFields"),So("apis",{}),So("extraApis",{})]),Py=h=>{const j=x0("Sketcher for "+h.name,A8,h),nt=yt=>UP(j.name,j.configFields,j.factory,yt),it=xr(j.apis,bT),dt=xr(j.extraApis,(yt,vt)=>I3(yt,vt));return{name:j.name,configFields:j.configFields,sketch:nt,...it,...dt}},g0=h=>{const j=x0("Sketcher for "+h.name,T8,h),nt=vt=>ZE(j.name,j.configFields,j.partFields,j.factory,vt),it=iI(j.name,j.partFields),dt=xr(j.apis,bT),yt=xr(j.extraApis,(vt,St)=>I3(vt,St));return{name:j.name,partFields:j.partFields,configFields:j.configFields,sketch:nt,parts:it,...dt,...yt}},hS=h=>Ap("input")(h)&&Xr(h,"type")!=="radio"||Ap("textarea")(h);var I8=Object.freeze({__proto__:null,getCurrent:(h,j,nt)=>j.find(h)});const R8=[Qo("find")],$l=Gm({fields:R8,name:"composing",apis:I8}),M8=["input","button","textarea","select"],P8=(h,j,nt)=>{(j.disabled()?e5:dI)(h,j)},QR=(h,j)=>j.useNative===!0&&qn(M8,eu(h.element)),mB=h=>Lu(h.element,"disabled"),yB=h=>{Wo(h.element,"disabled","disabled")},Tw=h=>{Yt(h.element,"disabled")},KE=h=>Xr(h.element,"aria-disabled")==="true",O8=h=>{Wo(h.element,"aria-disabled","true")},D8=h=>{Wo(h.element,"aria-disabled","false")},e5=(h,j,nt)=>{j.disableClass.each(dt=>{Kp(h.element,dt)}),(QR(h,j)?yB:O8)(h),j.onDisabled(h)},dI=(h,j,nt)=>{j.disableClass.each(dt=>{wu(h.element,dt)}),(QR(h,j)?Tw:D8)(h),j.onEnabled(h)},fI=(h,j)=>QR(h,j)?mB(h):KE(h);var N8=Object.freeze({__proto__:null,enable:dI,disable:e5,isDisabled:fI,onLoad:P8,set:(h,j,nt,it)=>{(it?e5:dI)(h,j)}}),L8=Object.freeze({__proto__:null,exhibit:(h,j)=>ey({classes:j.disabled()?j.disableClass.toArray():[]}),events:(h,j)=>xu([S3(s0(),(nt,it)=>fI(nt,h)),sw(h,j,P8)])}),VP=[Yu("disabled",pn),So("useNative",!0),Ql("disableClass"),Hl("onDisabled"),Hl("onEnabled")];const Os=Gm({fields:VP,name:"disabling",active:L8,apis:N8}),hI=(h,j,nt,it)=>{const dt=a0(h.element,"."+j.highlightClass);xo(dt,yt=>{nr(it,St=>Yl(St.element,yt))||(wu(yt,j.highlightClass),h.getSystem().getByDom(yt).each(St=>{j.onDehighlight(h,St),El(St,TC())}))})},at=(h,j,nt)=>hI(h,j,nt,[]),ht=(h,j,nt,it)=>{gn(h,j,nt,it)&&(wu(it.element,j.highlightClass),j.onDehighlight(h,it),El(it,TC()))},_t=(h,j,nt,it)=>{hI(h,j,nt,[it]),gn(h,j,nt,it)||(Kp(it.element,j.highlightClass),j.onHighlight(h,it),El(it,C3()))},kt=(h,j,nt)=>{Ro(h,j).each(it=>{_t(h,j,nt,it)})},zt=(h,j,nt)=>{gr(h,j).each(it=>{_t(h,j,nt,it)})},Ht=(h,j,nt,it)=>{no(h,j,nt,it).fold(dt=>{throw dt},dt=>{_t(h,j,nt,dt)})},tn=(h,j,nt,it)=>{const dt=ss(h,j);yn(dt,it).each(vt=>{_t(h,j,nt,vt)})},gn=(h,j,nt,it)=>ty(it.element,j.highlightClass),An=(h,j,nt)=>ap(h.element,"."+j.highlightClass).bind(it=>h.getSystem().getByDom(it).toOptional()),no=(h,j,nt,it)=>{const dt=a0(h.element,"."+j.itemClass);return Mt.from(dt[it]).fold(()=>Js.error(new Error("No element found with index "+it)),h.getSystem().getByDom)},Ro=(h,j,nt)=>ap(h.element,"."+j.itemClass).bind(it=>h.getSystem().getByDom(it).toOptional()),gr=(h,j,nt)=>{const it=a0(h.element,"."+j.itemClass);return(it.length>0?Mt.some(it[it.length-1]):Mt.none()).bind(yt=>h.getSystem().getByDom(yt).toOptional())},Nr=(h,j,nt,it)=>{const dt=a0(h.element,"."+j.itemClass);return Cn(dt,vt=>ty(vt,j.highlightClass)).bind(vt=>{const St=k2(vt,it,0,dt.length-1);return h.getSystem().getByDom(dt[St]).toOptional()})},Rr=(h,j,nt)=>Nr(h,j,nt,-1),Cr=(h,j,nt)=>Nr(h,j,nt,1),ss=(h,j,nt)=>{const it=a0(h.element,"."+j.itemClass);return Su(Dn(it,dt=>h.getSystem().getByDom(dt).toOptional()))};var cr=Object.freeze({__proto__:null,dehighlightAll:at,dehighlight:ht,highlight:_t,highlightFirst:kt,highlightLast:zt,highlightAt:Ht,highlightBy:tn,isHighlighted:gn,getHighlighted:An,getFirst:Ro,getLast:gr,getPrevious:Rr,getNext:Cr,getCandidates:ss}),kr=[Qo("highlightClass"),Qo("itemClass"),Hl("onHighlight"),Hl("onDehighlight")];const Er=Gm({fields:kr,name:"highlighting",apis:cr}),$s=[8],Gl=[9],Cu=[13],Qu=[27],pp=[32],Qy=[37],q1=[38],Y2=[39],B_=[40],Bu=(h,j,nt)=>{const it=Ln(h.slice(0,j)),dt=Ln(h.slice(j+1));return yn(it.concat(dt),nt)},oy=(h,j,nt)=>{const it=Ln(h.slice(0,j));return yn(it,nt)},ry=(h,j,nt)=>{const it=h.slice(0,j),dt=h.slice(j+1);return yn(dt.concat(it),nt)},Sv=(h,j,nt)=>{const it=h.slice(j+1);return yn(it,nt)},na=h=>j=>{const nt=j.raw;return qn(h,nt.which)},yy=h=>j=>kn(h,nt=>nt(j)),wm=h=>h.raw.shiftKey===!0,pI=h=>h.raw.ctrlKey===!0,kx=ln(wm),xl=(h,j)=>({matches:h,classification:j}),E0=(h,j)=>yn(h,it=>it.matches(j)).map(it=>it.classification),gI=(h,j,nt)=>{j.exists(dt=>nt.exists(yt=>Yl(yt,dt)))||ls(h,iE(),{prevFocus:j,newFocus:nt})},mI=()=>{const h=nt=>B0(nt.element);return{get:h,set:(nt,it)=>{const dt=h(nt);nt.getSystem().triggerFocus(it,nt.element);const yt=h(nt);gI(nt,dt,yt)}}},WP=()=>{const h=nt=>Er.getHighlighted(nt).map(it=>it.element);return{get:h,set:(nt,it)=>{const dt=h(nt);nt.getSystem().getByDom(it).fold(Tt,vt=>{Er.highlight(nt,vt)});const yt=h(nt);gI(nt,dt,yt)}}};var Iw;(function(h){h.OnFocusMode="onFocus",h.OnEnterOrSpaceMode="onEnterOrSpace",h.OnApiMode="onApi"})(Iw||(Iw={}));const X2=(h,j,nt,it,dt)=>{const yt=()=>h.concat([So("focusManager",mI()),Ru("focusInside","onFocus",e2(Bt=>qn(["onFocus","onEnterOrSpace","onApi"],Bt)?Js.value(Bt):Js.error("Invalid value for focusInside"))),Xu("handler",Dt),Xu("state",j),Xu("sendFocusIn",dt)]),vt=(Bt,jt,Zt,an,un)=>{const wn=Zt(Bt,jt,an,un);return E0(wn,jt.event).bind(On=>On(Bt,jt,an,un))},Dt={schema:yt,processKey:vt,toEvents:(Bt,jt)=>{const Zt=Bt.focusInside!==Iw.OnFocusMode?Mt.none():dt(Bt).map(wn=>er(L1(),(On,_o)=>{wn(On,Bt,jt),_o.stop()})),an=(wn,On)=>{const _o=na(pp.concat(Cu))(On.event);Bt.focusInside===Iw.OnEnterOrSpaceMode&&_o&&Zv(wn,On)&&dt(Bt).each(Un=>{Un(wn,Bt,jt),On.stop()})},un=[er(gv(),(wn,On)=>{vt(wn,On,nt,Bt,jt).fold(()=>{an(wn,On)},_o=>{On.stop()})}),er(a2(),(wn,On)=>{vt(wn,On,it,Bt,jt).each(_o=>{On.stop()})})];return xu(Zt.toArray().concat(un))}};return Dt},yI=h=>{const j=[Ql("onEscape"),Ql("onEnter"),So("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),So("firstTabstop",0),So("useTabstopAt",hn),Ql("visibilitySelector")].concat([h]),nt=(Un,go)=>{const bo=Un.visibilitySelector.bind(Bo=>D_(go,Bo)).getOr(go);return mu(bo)>0},it=(Un,go)=>{const bo=a0(Un.element,go.selector),Bo=co(bo,Go=>nt(go,Go));return Mt.from(Bo[go.firstTabstop])},dt=(Un,go)=>go.focusManager.get(Un).bind(bo=>D_(bo,go.selector)),yt=(Un,go)=>nt(Un,go)&&Un.useTabstopAt(go),vt=(Un,go,bo)=>{it(Un,go).each(Bo=>{go.focusManager.set(Un,Bo)})},St=(Un,go,bo,Bo,Go)=>Go(go,bo,Sr=>yt(Bo,Sr)).fold(()=>Bo.cyclic?Mt.some(!0):Mt.none(),Sr=>(Bo.focusManager.set(Un,Sr),Mt.some(!0))),Dt=(Un,go,bo,Bo)=>{const Go=a0(Un.element,bo.selector);return dt(Un,bo).bind(Sr=>Cn(Go,Mn(Yl,Sr)).bind(Yo=>St(Un,Go,Yo,bo,Bo)))},Bt=(Un,go,bo)=>{const Bo=bo.cyclic?Bu:oy;return Dt(Un,go,bo,Bo)},jt=(Un,go,bo)=>{const Bo=bo.cyclic?ry:Sv;return Dt(Un,go,bo,Bo)},Zt=Un=>Ym(Un).bind(cy).exists(go=>Yl(go,Un)),an=(Un,go,bo)=>dt(Un,bo).filter(Bo=>!bo.useTabstopAt(Bo)).bind(Bo=>(Zt(Bo)?Bt:jt)(Un,go,bo)),un=(Un,go,bo)=>bo.onEnter.bind(Bo=>Bo(Un,go)),wn=(Un,go,bo)=>bo.onEscape.bind(Bo=>Bo(Un,go)),On=Nt([xl(yy([wm,na(Gl)]),Bt),xl(na(Gl),jt),xl(yy([kx,na(Cu)]),un)]),_o=Nt([xl(na(Qu),wn),xl(na(Gl),an)]);return X2(j,z1.init,On,_o,()=>Mt.some(vt))};var F8=yI(tu("cyclic",pn)),XE=yI(tu("cyclic",hn));const JZ=(h,j,nt)=>(eT(h,nt,s0()),Mt.some(!0)),J2=(h,j,nt)=>hS(nt)&&na(pp)(j.event)?Mt.none():JZ(h,j,nt),JE=(h,j)=>Mt.some(!0),vB=[So("execute",J2),So("useSpace",!1),So("useEnter",!0),So("useControlEnter",!1),So("useDown",!1)],qP=(h,j,nt)=>nt.execute(h,j,h.element),QZ=(h,j,nt,it)=>{const dt=nt.useSpace&&!hS(h.element)?pp:[],yt=nt.useEnter?Cu:[],vt=nt.useDown?B_:[],St=dt.concat(yt).concat(vt);return[xl(na(St),qP)].concat(nt.useControlEnter?[xl(yy([pI,na(Cu)]),qP)]:[])},_B=(h,j,nt,it)=>nt.useSpace&&!hS(h.element)?[xl(na(pp),JE)]:[];var eK=X2(vB,z1.init,QZ,_B,()=>Mt.none());const z8=()=>{const h=Xl();return F0({readState:()=>h.get().map(dt=>({numRows:String(dt.numRows),numColumns:String(dt.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(dt,yt)=>{h.set({numRows:dt,numColumns:yt})},getNumRows:()=>h.get().map(dt=>dt.numRows),getNumColumns:()=>h.get().map(dt=>dt.numColumns)})};var nK=Object.freeze({__proto__:null,flatgrid:z8,init:h=>h.state(h)});const xB=h=>(j,nt,it,dt)=>{const yt=h(j.element);return wB(yt,j,nt,it,dt)},B8=(h,j)=>{const nt=vR(h,j);return xB(nt)},$8=(h,j)=>{const nt=vR(j,h);return xB(nt)},G8=h=>(j,nt,it,dt)=>wB(h,j,nt,it,dt),wB=(h,j,nt,it,dt)=>it.focusManager.get(j).bind(vt=>h(j.element,vt,it,dt)).map(vt=>(it.focusManager.set(j,vt),!0)),n5=G8,ZP=G8,KP=G8,bie=h=>h.offsetWidth<=0&&h.offsetHeight<=0,j8=h=>!bie(h.dom),oK=(h,j)=>Cn(h,j).map(nt=>({index:nt,candidates:h})),CB=(h,j,nt)=>{const it=vt=>Yl(vt,j),dt=a0(h,nt),yt=co(dt,j8);return oK(yt,it)},o1=(h,j)=>Cn(h,nt=>Yl(j,nt)),kB=(h,j,nt,it)=>{const dt=Math.floor(j/nt),yt=j%nt;return it(dt,yt).bind(vt=>{const St=vt.row*nt+vt.column;return St>=0&&St<h.length?Mt.some(h[St]):Mt.none()})},SB=(h,j,nt,it,dt)=>kB(h,j,it,(yt,vt)=>{const Dt=yt===nt-1?h.length-yt*it:it,Bt=k2(vt,dt,0,Dt-1);return Mt.some({row:yt,column:Bt})}),EB=(h,j,nt,it,dt)=>kB(h,j,it,(yt,vt)=>{const St=k2(yt,dt,0,nt-1),Bt=St===nt-1?h.length-St*it:it,jt=Jv(vt,0,Bt-1);return Mt.some({row:St,column:jt})}),rK=(h,j,nt,it)=>SB(h,j,nt,it,1),sK=(h,j,nt,it)=>SB(h,j,nt,it,-1),bI=(h,j,nt,it)=>EB(h,j,nt,it,-1),H8=(h,j,nt,it)=>EB(h,j,nt,it,1),iK=[Qo("selector"),So("execute",J2),C0("onEscape"),So("captureTab",!1),yx()],U8=(h,j,nt)=>{ap(h.element,j.selector).each(it=>{j.focusManager.set(h,it)})},YP=(h,j)=>j.focusManager.get(h).bind(nt=>D_(nt,j.selector)),V8=(h,j,nt,it)=>YP(h,nt).bind(dt=>nt.execute(h,j,dt)),XP=h=>(j,nt,it,dt)=>CB(j,nt,it.selector).bind(yt=>h(yt.candidates,yt.index,dt.getNumRows().getOr(it.initSize.numRows),dt.getNumColumns().getOr(it.initSize.numColumns))),AB=(h,j,nt)=>nt.captureTab?Mt.some(!0):Mt.none(),aK=(h,j,nt)=>nt.onEscape(h,j),TB=XP(sK),IB=XP(rK),lK=XP(bI),cK=XP(H8),RB=Nt([xl(na(Qy),B8(TB,IB)),xl(na(Y2),$8(TB,IB)),xl(na(q1),n5(lK)),xl(na(B_),ZP(cK)),xl(yy([wm,na(Gl)]),AB),xl(yy([kx,na(Gl)]),AB),xl(na(pp.concat(Cu)),V8)]),JP=Nt([xl(na(Qu),aK),xl(na(pp),JE)]);var uK=X2(iK,z8,RB,JP,()=>Mt.some(U8));const MB=(h,j,nt,it,dt)=>{const yt=St=>eu(St)==="button"&&Xr(St,"disabled")==="disabled",vt=(St,Dt,Bt)=>dt(St,Dt,it,0,Bt.length-1,Bt[Dt],jt=>yt(Bt[jt])?vt(St,jt,Bt):Mt.from(Bt[jt]));return CB(h,nt,j).bind(St=>{const Dt=St.index,Bt=St.candidates;return vt(Dt,Dt,Bt)})},PB=(h,j,nt,it)=>MB(h,j,nt,it,(dt,yt,vt,St,Dt,Bt,jt)=>{const Zt=Jv(yt+vt,St,Dt);return Zt===dt?Mt.from(Bt):jt(Zt)}),QP=(h,j,nt,it)=>MB(h,j,nt,it,(dt,yt,vt,St,Dt,Bt,jt)=>{const Zt=k2(yt,vt,St,Dt);return Zt===dt?Mt.none():jt(Zt)}),vI=[Qo("selector"),So("getInitial",Mt.none),So("execute",J2),C0("onEscape"),So("executeOnMove",!1),So("allowVertical",!0),So("allowHorizontal",!0),So("cycles",!0)],OB=(h,j)=>j.focusManager.get(h).bind(nt=>D_(nt,j.selector)),W8=(h,j,nt)=>OB(h,nt).bind(it=>nt.execute(h,j,it)),q8=(h,j,nt)=>{j.getInitial(h).orThunk(()=>ap(h.element,j.selector)).each(it=>{j.focusManager.set(h,it)})},DB=(h,j,nt)=>(nt.cycles?QP:PB)(h,nt.selector,j,-1),Z8=(h,j,nt)=>(nt.cycles?QP:PB)(h,nt.selector,j,1),K8=h=>(j,nt,it,dt)=>h(j,nt,it,dt).bind(()=>it.executeOnMove?W8(j,nt,it):Mt.some(!0)),NB=(h,j,nt)=>nt.onEscape(h,j),LB=(h,j,nt,it)=>{const dt=[...nt.allowHorizontal?Qy:[]].concat(nt.allowVertical?q1:[]),yt=[...nt.allowHorizontal?Y2:[]].concat(nt.allowVertical?B_:[]);return[xl(na(dt),K8(B8(DB,Z8))),xl(na(yt),K8($8(DB,Z8))),xl(na(Cu),W8),xl(na(pp),W8)]},FB=Nt([xl(na(pp),JE),xl(na(Qu),NB)]);var dK=X2(vI,z1.init,LB,FB,()=>Mt.some(q8));const eO=(h,j,nt)=>Mt.from(h[j]).bind(it=>Mt.from(it[nt]).map(dt=>({rowIndex:j,columnIndex:nt,cell:dt}))),zB=(h,j,nt,it)=>{const yt=h[j].length,vt=k2(nt,it,0,yt-1);return eO(h,j,vt)},tO=(h,j,nt,it)=>{const dt=k2(nt,it,0,h.length-1),yt=h[dt].length,vt=Jv(j,0,yt-1);return eO(h,dt,vt)},BB=(h,j,nt,it)=>{const yt=h[j].length,vt=Jv(nt+it,0,yt-1);return eO(h,j,vt)},o5=(h,j,nt,it)=>{const dt=Jv(nt+it,0,h.length-1),yt=h[dt].length,vt=Jv(j,0,yt-1);return eO(h,dt,vt)},fK=(h,j,nt)=>zB(h,j,nt,1),$B=(h,j,nt)=>zB(h,j,nt,-1),Oy=(h,j,nt)=>tO(h,nt,j,-1),hK=(h,j,nt)=>tO(h,nt,j,1),GB=(h,j,nt)=>BB(h,j,nt,-1),jB=(h,j,nt)=>BB(h,j,nt,1),pK=(h,j,nt)=>o5(h,nt,j,-1),HB=(h,j,nt)=>o5(h,nt,j,1),UB=[k_("selectors",[Qo("row"),Qo("cell")]),So("cycles",!0),So("previousSelector",Mt.none),So("execute",J2)],gK=(h,j,nt)=>{j.previousSelector(h).orThunk(()=>{const dt=j.selectors;return ap(h.element,dt.cell)}).each(dt=>{j.focusManager.set(h,dt)})},mK=(h,j,nt)=>B0(h.element).bind(it=>nt.execute(h,j,it)),yK=(h,j)=>Dn(h,nt=>a0(nt,j.selectors.cell)),nO=(h,j)=>(nt,it,dt)=>{const yt=dt.cycles?h:j;return D_(it,dt.selectors.row).bind(vt=>{const St=a0(vt,dt.selectors.cell);return o1(St,it).bind(Dt=>{const Bt=a0(nt,dt.selectors.row);return o1(Bt,vt).bind(jt=>{const Zt=yK(Bt,dt);return yt(Zt,jt,Dt).map(an=>an.cell)})})})},Y8=nO($B,GB),VB=nO(fK,jB),bK=nO(Oy,pK),WB=nO(hK,HB),qB=Nt([xl(na(Qy),B8(Y8,VB)),xl(na(Y2),$8(Y8,VB)),xl(na(q1),n5(bK)),xl(na(B_),ZP(WB)),xl(na(pp.concat(Cu)),mK)]),ZB=Nt([xl(na(pp),JE)]);var vK=X2(UB,z1.init,qB,ZB,()=>Mt.some(gK));const _K=[Qo("selector"),So("execute",J2),So("moveOnTab",!1)],KB=(h,j,nt)=>nt.focusManager.get(h).bind(it=>nt.execute(h,j,it)),xK=(h,j,nt)=>{ap(h.element,j.selector).each(it=>{j.focusManager.set(h,it)})},X8=(h,j,nt)=>QP(h,nt.selector,j,-1),J8=(h,j,nt)=>QP(h,nt.selector,j,1),pS=(h,j,nt,it)=>nt.moveOnTab?KP(X8)(h,j,nt,it):Mt.none(),YB=(h,j,nt,it)=>nt.moveOnTab?KP(J8)(h,j,nt,it):Mt.none(),XB=Nt([xl(na(q1),KP(X8)),xl(na(B_),KP(J8)),xl(yy([wm,na(Gl)]),pS),xl(yy([kx,na(Gl)]),YB),xl(na(Cu),KB),xl(na(pp),KB)]),JB=Nt([xl(na(pp),JE)]);var wK=X2(_K,z1.init,XB,JB,()=>Mt.some(xK));const _I=[C0("onSpace"),C0("onEnter"),C0("onShiftEnter"),C0("onLeft"),C0("onRight"),C0("onTab"),C0("onShiftTab"),C0("onUp"),C0("onDown"),C0("onEscape"),So("stopSpaceKeyup",!1),Ql("focusIn")],CK=(h,j,nt)=>[xl(na(pp),nt.onSpace),xl(yy([kx,na(Cu)]),nt.onEnter),xl(yy([wm,na(Cu)]),nt.onShiftEnter),xl(yy([wm,na(Gl)]),nt.onShiftTab),xl(yy([kx,na(Gl)]),nt.onTab),xl(na(q1),nt.onUp),xl(na(B_),nt.onDown),xl(na(Qy),nt.onLeft),xl(na(Y2),nt.onRight),xl(na(pp),nt.onSpace)],kK=(h,j,nt)=>[...nt.stopSpaceKeyup?[xl(na(pp),JE)]:[],xl(na(Qu),nt.onEscape)];var QB=X2(_I,z1.init,CK,kK,h=>h.focusIn);const SK=F8.schema(),EK=XE.schema(),AK=dK.schema(),e$=uK.schema(),Q8=vK.schema(),e6=eK.schema(),TK=wK.schema(),gS=QB.schema();var t$=Object.freeze({__proto__:null,acyclic:SK,cyclic:EK,flow:AK,flatgrid:e$,matrix:Q8,execution:e6,menu:TK,special:gS});const n$=h=>hu(h,"setGridSize"),_s=P3({branchKey:"mode",branches:t$,name:"keying",active:{events:(h,j)=>h.handler.toEvents(h,j)},apis:{focusIn:(h,j,nt)=>{j.sendFocusIn(j).fold(()=>{h.getSystem().triggerFocus(h.element,h.element)},it=>{it(h,j,nt)})},setGridSize:(h,j,nt,it,dt)=>{n$(nt)?nt.setGridSize(it,dt):console.error("Layout does not support setGridSize")}},state:nK}),o$=(h,j)=>{uR(()=>{$R(h,j,()=>Dn(j,h.getSystem().build))},h.element)},xI=(h,j)=>{uR(()=>{rS(h,j,()=>vM(h.element,j,h.getSystem().buildOrPatch))},h.element)},r5=(h,j,nt,it)=>{UT(j);const dt=WC(h.element,nt,it,h.getSystem().buildOrPatch);zR(h,dt),h.syncComponents()},oO=(h,j,nt)=>{const it=h.getSystem().build(nt);BE(h,it,j)},t6=(h,j,nt,it)=>{wx(j),oO(h,(dt,yt)=>gC(dt,yt,nt),it)},mS=(h,j,nt,it)=>(j.reuseDom?xI:o$)(h,it),yS=(h,j,nt,it)=>{oO(h,Qm,it)},IK=(h,j,nt,it)=>{oO(h,cv,it)},RK=(h,j,nt,it)=>{const dt=s5(h);yn(dt,vt=>Yl(it.element,vt.element)).each(wx)},s5=(h,j)=>h.components(),Rw=(h,j,nt,it,dt)=>{const yt=s5(h);return Mt.from(yt[it]).map(vt=>(dt.fold(()=>wx(vt),St=>{(j.reuseDom?r5:t6)(h,vt,it,St)}),vt))};var MK=Object.freeze({__proto__:null,append:yS,prepend:IK,remove:RK,replaceAt:Rw,replaceBy:(h,j,nt,it,dt)=>{const yt=s5(h);return Cn(yt,it).bind(vt=>Rw(h,j,nt,vt,dt))},set:mS,contents:s5});const Us=Gm({fields:[sm("reuseDom",!0)],name:"replacing",apis:MK}),s$=(h,j)=>{const nt=xu(j);return Gm({fields:[Qo("enabled")],name:h,active:{events:Nt(nt)}})},Ks=(h,j)=>{const nt=s$(h,j);return{key:h,value:{config:{},me:nt,configAsRaw:Nt({}),initialConfig:{},state:z1}}},rO=(h,j)=>{j.ignore||(_v(h.element),j.onFocus(h))};var OK=Object.freeze({__proto__:null,focus:rO,blur:(h,j)=>{j.ignore||KC(h.element)},isFocused:h=>P2(h.element)}),o6=Object.freeze({__proto__:null,exhibit:(h,j)=>{const nt=j.ignore?{}:{attributes:{tabindex:"-1"}};return ey(nt)},events:h=>xu([er(L1(),(j,nt)=>{rO(j,h),nt.stop()})].concat(h.stopMousedown?[er(vp(),(j,nt)=>{nt.event.prevent()})]:[]))}),sO=[Hl("onFocus"),So("stopMousedown",!1),So("ignore",!1)];const Fs=Gm({fields:sO,name:"focusing",active:o6,apis:OK}),DK=h=>({init:()=>{const nt=ds(h);return{get:()=>nt.get(),set:St=>nt.set(St),clear:()=>nt.set(h),readState:()=>nt.get()}}}),i$=(h,j,nt)=>{const it=j.aria;it.update(h,it,nt.get())},a$=(h,j,nt)=>{j.toggleClass.each(it=>{nt.get()?Kp(h.element,it):wu(h.element,it)})},wI=(h,j,nt,it)=>{const dt=nt.get();nt.set(it),a$(h,j,nt),i$(h,j,nt),dt!==it&&j.onToggled(h,it)},r6=(h,j,nt)=>{wI(h,j,nt,!nt.get())},NK=(h,j,nt)=>{wI(h,j,nt,!0)},s6=(h,j,nt)=>{wI(h,j,nt,!1)},LK=(h,j,nt)=>nt.get(),l$=(h,j,nt)=>{wI(h,j,nt,j.selected)};var FK=Object.freeze({__proto__:null,onLoad:l$,toggle:r6,isOn:LK,on:NK,off:s6,set:wI}),BK=Object.freeze({__proto__:null,exhibit:()=>ey({}),events:(h,j)=>{const nt=cL(h,j,r6),it=sw(h,j,l$);return xu(Nn([h.toggleOnExecute?[nt]:[],[it]]))}});const $K=(h,j,nt)=>{Wo(h.element,"aria-pressed",nt),j.syncWithExpanded&&u$(h,j,nt)},c$=(h,j,nt)=>{Wo(h.element,"aria-selected",nt)},i5=(h,j,nt)=>{Wo(h.element,"aria-checked",nt)},u$=(h,j,nt)=>{Wo(h.element,"aria-expanded",nt)};var a5=[So("selected",!1),Ql("toggleClass"),So("toggleOnExecute",!0),Hl("onToggled"),Ru("aria",{mode:"none"},Ip("mode",{pressed:[So("syncWithExpanded",!1),Xu("update",$K)],checked:[Xu("update",i5)],expanded:[Xu("update",u$)],selected:[Xu("update",c$)],none:[Xu("update",Tt)]}))];const _a=Gm({fields:a5,name:"toggling",active:BK,apis:FK,state:DK(!1)}),i6=()=>{const h=(j,nt)=>{nt.stop(),ow(j)};return[er(l2(),h),er(XA(),h),f2(pv()),f2(vp())]},l5=h=>{const j=nt=>fx((it,dt)=>{nt(it),dt.stop()});return xu(Nn([h.map(j).toArray(),i6()]))},d$="alloy.item-hover",f$="alloy.item-focus",a6="alloy.item-toggled",h$=h=>{(B0(h.element).isNone()||Fs.isFocused(h))&&(Fs.isFocused(h)||Fs.focus(h),ls(h,d$,{item:h}))},l6=h=>{ls(h,f$,{item:h})},GK=(h,j)=>{ls(h,a6,{item:h,state:j})},p$=Nt(d$),g$=Nt(f$),iO=Nt(a6),c6=h=>h.role.fold(()=>h.toggling.map(j=>j.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Qt),u6=(h,j)=>({aria:{mode:j?"selected":"checked"},...Rs(h,(nt,it)=>it!=="exclusive"),onToggled:(nt,it)=>{Rt(h.onToggled)&&h.onToggled(nt,it),GK(nt,it)}}),jK=h=>({dom:h.dom,domModification:{...h.domModification,attributes:{role:c6(h),...h.domModification.attributes,"aria-haspopup":h.hasSubmenu,...h.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Cv.augment(h.itemBehaviours,[h.toggling.fold(_a.revoke,j=>_a.config(u6(j,h.role.exists(nt=>nt==="option")))),Fs.config({ignore:h.ignoreFocus,stopMousedown:h.ignoreFocus,onFocus:j=>{l6(j)}}),_s.config({mode:"execution"}),$r.config({store:{mode:"memory",initialValue:h.data}}),Ks("item-type-events",[...i6(),er(J0(),h$),er(ew(),Fs.focus)])]),components:h.components,eventOrder:h.eventOrder}),HK=[Qo("data"),Qo("components"),Qo("dom"),So("hasSubmenu",!1),Ql("toggling"),Ql("role"),Cv.field("itemBehaviours",[_a,Fs,_s,$r]),So("ignoreFocus",!1),So("domModification",{}),Xu("builder",jK),So("eventOrder",{})],UK=h=>({dom:h.dom,components:h.components,events:xu([aE(ew())])}),VK=[Qo("dom"),Qo("components"),Xu("builder",UK)],aO=Nt("item-widget"),lO=Nt([S0({name:"widget",overrides:h=>({behaviours:yr([$r.config({store:{mode:"manual",getValue:j=>h.data,setValue:Tt}})])})})]),WK=h=>{const j=GP(aO(),h,lO()),nt=lI(aO(),h,j.internals()),it=yt=>zu(yt,h,"widget").map(vt=>(_s.focusIn(vt),vt)),dt=(yt,vt)=>hS(vt.event.target)?Mt.none():(h.autofocus&&vt.setSource(yt.element),Mt.none());return{dom:h.dom,components:nt,domModification:h.domModification,events:xu([fx((yt,vt)=>{it(yt).each(St=>{vt.stop()})}),er(J0(),h$),er(ew(),(yt,vt)=>{h.autofocus?it(yt):Fs.focus(yt)})]),behaviours:Cv.augment(h.widgetBehaviours,[$r.config({store:{mode:"memory",initialValue:h.data}}),Fs.config({ignore:h.ignoreFocus,onFocus:yt=>{l6(yt)}}),_s.config({mode:"special",focusIn:h.autofocus?yt=>{it(yt)}:O3(),onLeft:dt,onRight:dt,onEscape:(yt,vt)=>!Fs.isFocused(yt)&&!h.autofocus?(Fs.focus(yt),Mt.some(!0)):(h.autofocus&&vt.setSource(yt.element),Mt.none())})])}},qK=[Qo("uid"),Qo("data"),Qo("components"),Qo("dom"),So("autofocus",!1),So("ignoreFocus",!1),Cv.field("widgetBehaviours",[$r,Fs,_s]),So("domModification",{}),qE(lO()),Xu("builder",WK)],ZK=Ip("type",{widget:qK,item:HK,separator:VK}),KK=(h,j)=>({mode:"flatgrid",selector:"."+h.markers.item,initSize:{numColumns:j.initSize.numColumns,numRows:j.initSize.numRows},focusManager:h.focusManager}),YK=(h,j)=>({mode:"matrix",selectors:{row:j.rowSelector,cell:"."+h.markers.item},previousSelector:j.previousSelector,focusManager:h.focusManager}),XK=(h,j)=>({mode:"menu",selector:"."+h.markers.item,moveOnTab:j.moveOnTab,focusManager:h.focusManager}),m$=Nt([WE({factory:{sketch:h=>{const j=x0("menu.spec item",ZK,h);return j.builder(j)}},name:"items",unit:"item",defaults:(h,j)=>Ds(j,"uid")?j:{...j,uid:mE("item")},overrides:(h,j)=>({type:j.type,ignoreFocus:h.fakeFocus,domModification:{classes:[h.markers.item]}})})]),JK=Nt([om("role"),Qo("value"),Qo("items"),Qo("dom"),Qo("components"),So("eventOrder",{}),Hm("menuBehaviours",[Er,$r,$l,_s]),Ru("movement",{mode:"menu",moveOnTab:!0},Ip("mode",{grid:[yx(),Xu("config",KK)],matrix:[Xu("config",YK),Qo("rowSelector"),So("previousSelector",Mt.none)],menu:[So("moveOnTab",!0),Xu("config",XK)]})),bL(),So("fakeFocus",!1),So("focusManager",mI()),Hl("onHighlight"),Hl("onDehighlight"),So("showMenuRole",!0)]),y$=Nt("alloy.menu-focus"),QK=(h,j)=>{const nt=a0(h.element,'[role="menuitemradio"][aria-checked="true"]');xo(nt,it=>{Yl(it,j.element)||h.getSystem().getByDom(it).each(dt=>{_a.off(dt)})})},eY=(h,j,nt,it)=>({uid:h.uid,dom:h.dom,markers:h.markers,behaviours:Um(h.menuBehaviours,[Er.config({highlightClass:h.markers.selectedItem,itemClass:h.markers.item,onHighlight:h.onHighlight,onDehighlight:h.onDehighlight}),$r.config({store:{mode:"memory",initialValue:h.value}}),$l.config({find:Mt.some}),_s.config(h.movement.config(h,h.movement))]),events:xu([er(g$(),(dt,yt)=>{const vt=yt.event;dt.getSystem().getByDom(vt.target).each(St=>{Er.highlight(dt,St),yt.stop(),ls(dt,y$(),{menu:dt,item:St})})}),er(p$(),(dt,yt)=>{const vt=yt.event.item;Er.highlight(dt,vt)}),er(iO(),(dt,yt)=>{const{item:vt,state:St}=yt.event;St&&Xr(vt.element,"role")==="menuitemradio"&&QK(dt,vt)})]),components:j,eventOrder:h.eventOrder,...h.showMenuRole?{domModification:{attributes:{role:h.role.getOr("menu")}}}:{}}),QE=g0({name:"Menu",configFields:JK(),partFields:m$(),factory:eY}),eA=h=>us(h,(j,nt)=>({k:j,v:nt})),b$=(h,j,nt,it)=>or(nt,it).bind(dt=>or(h,dt).bind(yt=>{const vt=b$(h,j,nt,yt);return Mt.some([yt].concat(vt))})).getOr([]),tY=(h,j)=>{const nt={};ar(h,(vt,St)=>{xo(vt,Dt=>{nt[Dt]=St})});const it=j,dt=eA(j),yt=xr(dt,(vt,St)=>[St].concat(b$(nt,it,dt,St)));return xr(nt,vt=>or(yt,vt).getOr([vt]))},tA=()=>{const h=ds({}),j=ds({}),nt=ds({}),it=Xl(),dt=ds({}),yt=()=>{h.set({}),j.set({}),nt.set({}),it.clear()},vt=()=>it.get().isNone(),St=(Go,Sr)=>{j.set({...j.get(),[Go]:{type:"prepared",menu:Sr}})},Dt=(Go,Sr,Vr,Yo)=>{it.set(Go),h.set(Vr),j.set(Sr),dt.set(Yo);const qr=tY(Yo,Vr);nt.set(qr)},Bt=Go=>Yr(h.get(),(Sr,Vr)=>Sr===Go),jt=(Go,Sr,Vr)=>On(Go).bind(Yo=>Bt(Go).bind(qr=>Sr(qr).map(Lr=>({triggeredMenu:Yo,triggeringItem:Lr,triggeringPath:Vr})))),Zt=(Go,Sr)=>{const Vr=co(Un(Go).toArray(),Yo=>On(Yo).isSome());return or(nt.get(),Go).bind(Yo=>{const qr=Ln(Vr.concat(Yo)),Lr=sn(qr,(Qr,Pl)=>jt(Qr,Sr,qr.slice(0,Pl+1)).fold(()=>au(it.get(),Qr)?[]:[Mt.none()],_h=>[Mt.some(_h)]));return Zs(Lr)})},an=Go=>or(h.get(),Go).map(Sr=>{const Vr=or(nt.get(),Go).getOr([]);return[Sr].concat(Vr)}),un=Go=>or(nt.get(),Go).bind(Sr=>Sr.length>1?Mt.some(Sr.slice(1)):Mt.none()),wn=Go=>or(nt.get(),Go),On=Go=>_o(Go).bind(d6),_o=Go=>or(j.get(),Go),Un=Go=>or(h.get(),Go);return{setMenuBuilt:St,setContents:Dt,expand:an,refresh:wn,collapse:un,lookupMenu:_o,lookupItem:Un,otherMenus:Go=>{const Sr=dt.get();return Bn(Do(Sr),Go)},getPrimary:()=>it.get().bind(On),getMenus:()=>j.get(),clear:yt,isClear:vt,getTriggeringPath:Zt}},d6=h=>h.type==="prepared"?Mt.some(h.menu):Mt.none(),v$={init:tA,extractPreparedMenu:d6},Q2=Zr("tiered-menu-item-highlight"),_$=Zr("tiered-menu-item-dehighlight");var Dy;(function(h){h[h.HighlightMenuAndItem=0]="HighlightMenuAndItem",h[h.HighlightJustMenu=1]="HighlightJustMenu",h[h.HighlightNone=2]="HighlightNone"})(Dy||(Dy={}));const Z1=(h,j)=>{const nt=Xl(),it=(hr,Dr,Gs)=>xr(Gs,(ga,vs)=>{const qs=()=>QE.sketch({...ga,value:vs,markers:h.markers,fakeFocus:h.fakeFocus,onHighlight:(Du,ku)=>{ls(Du,Q2,{menuComp:Du,itemComp:ku})},onDehighlight:(Du,ku)=>{ls(Du,_$,{menuComp:Du,itemComp:ku})},focusManager:h.fakeFocus?WP():mI()});return vs===Dr?{type:"prepared",menu:hr.getSystem().build(qs())}:{type:"notbuilt",nbMenu:qs}}),dt=v$.init(),yt=hr=>{const Dr=it(hr,h.data.primary,h.data.menus),Gs=Dt();return dt.setContents(h.data.primary,Dr,h.data.expansions,Gs),dt.getPrimary()},vt=hr=>$r.getValue(hr).value,St=(hr,Dr,Gs)=>Co(Dr,ga=>{if(!ga.getSystem().isConnected())return Mt.none();const vs=Er.getCandidates(ga);return yn(vs,qs=>vt(qs)===Gs)}),Dt=hr=>xr(h.data.menus,(Dr,Gs)=>sn(Dr.items,ga=>ga.type==="separator"?[]:[ga.data.value])),Bt=Er.highlight,jt=(hr,Dr)=>{Bt(hr,Dr),Er.getHighlighted(Dr).orThunk(()=>Er.getFirst(Dr)).each(Gs=>{h.fakeFocus?Er.highlight(Dr,Gs):eT(hr,Gs.element,ew())})},Zt=(hr,Dr)=>Su(Dn(Dr,Gs=>hr.lookupMenu(Gs).bind(ga=>ga.type==="prepared"?Mt.some(ga.menu):Mt.none()))),an=(hr,Dr,Gs)=>{const ga=Zt(Dr,Dr.otherMenus(Gs));xo(ga,vs=>{B1(vs.element,[h.markers.backgroundMenu]),h.stayInDom||Us.remove(hr,vs)})},un=hr=>nt.get().getOrThunk(()=>{const Dr={},Gs=a0(hr.element,`.${h.markers.item}`),ga=co(Gs,vs=>Xr(vs,"aria-haspopup")==="true");return xo(ga,vs=>{hr.getSystem().getByDom(vs).each(qs=>{const Du=vt(qs);Dr[Du]=qs})}),nt.set(Dr),Dr}),wn=(hr,Dr)=>{const Gs=un(hr);ar(Gs,(ga,vs)=>{const qs=qn(Dr,vs);Wo(ga.element,"aria-expanded",qs)})},On=(hr,Dr,Gs)=>Mt.from(Gs[0]).bind(ga=>Dr.lookupMenu(ga).bind(vs=>{if(vs.type==="notbuilt")return Mt.none();{const qs=vs.menu,Du=Zt(Dr,Gs.slice(1));return xo(Du,ku=>{Kp(ku.element,h.markers.backgroundMenu)}),zn(qs.element)||Us.append(hr,qy(qs)),B1(qs.element,[h.markers.backgroundMenu]),jt(hr,qs),an(hr,Dr,Gs),Mt.some(qs)}}));let _o;(function(hr){hr[hr.HighlightSubmenu=0]="HighlightSubmenu",hr[hr.HighlightParent=1]="HighlightParent"})(_o||(_o={}));const Un=(hr,Dr,Gs)=>{if(Gs.type==="notbuilt"){const ga=hr.getSystem().build(Gs.nbMenu());return dt.setMenuBuilt(Dr,ga),ga}else return Gs.menu},go=(hr,Dr,Gs=_o.HighlightSubmenu)=>{if(Dr.hasConfigured(Os)&&Os.isDisabled(Dr))return Mt.some(Dr);{const ga=vt(Dr);return dt.expand(ga).bind(vs=>(wn(hr,vs),Mt.from(vs[0]).bind(qs=>dt.lookupMenu(qs).bind(Du=>{const ku=Un(hr,qs,Du);return zn(ku.element)||Us.append(hr,qy(ku)),h.onOpenSubmenu(hr,Dr,ku,Ln(vs)),Gs===_o.HighlightSubmenu?(Er.highlightFirst(ku),On(hr,dt,vs)):(Er.dehighlightAll(ku),Mt.some(Dr))}))))}},bo=(hr,Dr)=>{const Gs=vt(Dr);return dt.collapse(Gs).bind(ga=>(wn(hr,ga),On(hr,dt,ga).map(vs=>(h.onCollapseMenu(hr,Dr,vs),vs))))},Bo=(hr,Dr)=>{const Gs=vt(Dr);return dt.refresh(Gs).bind(ga=>(wn(hr,ga),On(hr,dt,ga)))},Go=(hr,Dr)=>hS(Dr.element)?Mt.none():go(hr,Dr,_o.HighlightSubmenu),Sr=(hr,Dr)=>hS(Dr.element)?Mt.none():bo(hr,Dr),Vr=(hr,Dr)=>bo(hr,Dr).orThunk(()=>h.onEscape(hr,Dr).map(()=>hr)),Yo=hr=>(Dr,Gs)=>D_(Gs.getSource(),`.${h.markers.item}`).bind(ga=>Dr.getSystem().getByDom(ga).toOptional().bind(vs=>hr(Dr,vs).map(hn))),qr=xu([er(y$(),(hr,Dr)=>{const Gs=Dr.event.item;dt.lookupItem(vt(Gs)).each(()=>{const ga=Dr.event.menu;Er.highlight(hr,ga);const vs=vt(Dr.event.item);dt.refresh(vs).each(qs=>an(hr,dt,qs))})}),fx((hr,Dr)=>{const Gs=Dr.event.target;hr.getSystem().getByDom(Gs).each(ga=>{vt(ga).indexOf("collapse-item")===0&&bo(hr,ga),go(hr,ga,_o.HighlightSubmenu).fold(()=>{h.onExecute(hr,ga)},Tt)})}),rp((hr,Dr)=>{yt(hr).each(Gs=>{Us.append(hr,qy(Gs)),h.onOpenMenu(hr,Gs),h.highlightOnOpen===Dy.HighlightMenuAndItem?jt(hr,Gs):h.highlightOnOpen===Dy.HighlightJustMenu&&Bt(hr,Gs)})}),er(Q2,(hr,Dr)=>{h.onHighlightItem(hr,Dr.event.menuComp,Dr.event.itemComp)}),er(_$,(hr,Dr)=>{h.onDehighlightItem(hr,Dr.event.menuComp,Dr.event.itemComp)}),...h.navigateOnHover?[er(p$(),(hr,Dr)=>{const Gs=Dr.event.item;Bo(hr,Gs),go(hr,Gs,_o.HighlightParent),h.onHover(hr,Gs)})]:[]]),Lr=hr=>Er.getHighlighted(hr).bind(Er.getHighlighted),Qr=hr=>{Lr(hr).each(Dr=>{bo(hr,Dr)})},Pl=hr=>{dt.getPrimary().each(Dr=>{jt(hr,Dr)})},_h=hr=>Mt.from(hr.components()[0]).filter(Dr=>Xr(Dr.element,"role")==="menu"),as={collapseMenu:Qr,highlightPrimary:Pl,repositionMenus:hr=>{dt.getPrimary().bind(Gs=>Lr(hr).bind(ga=>{const vs=vt(ga),qs=Dl(dt.getMenus()),Du=Su(Dn(qs,v$.extractPreparedMenu));return dt.getTriggeringPath(vs,ku=>St(hr,Du,ku))}).map(ga=>({primary:Gs,triggeringPath:ga}))).fold(()=>{_h(hr).each(Gs=>{h.onRepositionMenu(hr,Gs,[])})},({primary:Gs,triggeringPath:ga})=>{h.onRepositionMenu(hr,Gs,ga)})}};return{uid:h.uid,dom:h.dom,markers:h.markers,behaviours:Um(h.tmenuBehaviours,[_s.config({mode:"special",onRight:Yo(Go),onLeft:Yo(Sr),onEscape:Yo(Vr),focusIn:(hr,Dr)=>{dt.getPrimary().each(Gs=>{eT(hr,Gs.element,ew())})}}),Er.config({highlightClass:h.markers.selectedMenu,itemClass:h.markers.menu}),$l.config({find:hr=>Er.getHighlighted(hr)}),Us.config({})]),eventOrder:h.eventOrder,apis:as,events:qr}},x$=Nt("collapse-item"),w$=(h,j,nt)=>({primary:h,menus:j,expansions:nt}),C$=(h,j)=>({primary:h,menus:Ns(h,j),expansions:{}}),nY=h=>({value:Zr(x$()),meta:{text:h}}),Mw=Py({name:"TieredMenu",configFields:[jC("onExecute"),jC("onEscape"),w2("onOpenMenu"),w2("onOpenSubmenu"),Hl("onRepositionMenu"),Hl("onCollapseMenu"),So("highlightOnOpen",Dy.HighlightMenuAndItem),k_("data",[Qo("primary"),Qo("menus"),Qo("expansions")]),So("fakeFocus",!1),Hl("onHighlightItem"),Hl("onDehighlightItem"),Hl("onHover"),O_(),Qo("dom"),So("navigateOnHover",!0),So("stayInDom",!1),Hm("tmenuBehaviours",[_s,Er,$l,Us]),So("eventOrder",{})],apis:{collapseMenu:(h,j)=>{h.collapseMenu(j)},highlightPrimary:(h,j)=>{h.highlightPrimary(j)},repositionMenus:(h,j)=>{h.repositionMenus(j)}},factory:Z1,extraApis:{tieredData:w$,singleData:C$,collapseItem:nY}}),k$=(h,j,nt,it,dt)=>{const yt=()=>h.lazySink(j),vt=it.type==="horizontal"?{layouts:{onLtr:()=>CE(),onRtl:()=>ET()}}:{},St=Bt=>Bt.length===2,Dt=Bt=>St(Bt)?vt:{};return Mw.sketch({dom:{tag:"div"},data:it.data,markers:it.menu.markers,highlightOnOpen:it.menu.highlightOnOpen,fakeFocus:it.menu.fakeFocus,onEscape:()=>(Zl.close(j),h.onEscape.map(Bt=>Bt(j)),Mt.some(!0)),onExecute:()=>Mt.some(!0),onOpenMenu:(Bt,jt)=>{c0.positionWithinBounds(yt().getOrDie(),jt,nt,dt())},onOpenSubmenu:(Bt,jt,Zt,an)=>{const un=yt().getOrDie();c0.position(un,Zt,{anchor:{type:"submenu",item:jt,...Dt(an)}})},onRepositionMenu:(Bt,jt,Zt)=>{const an=yt().getOrDie();c0.positionWithinBounds(an,jt,nt,dt()),xo(Zt,un=>{const wn=Dt(un.triggeringPath);c0.position(an,un.triggeredMenu,{anchor:{type:"submenu",item:un.triggeringItem,...wn}})})}})},oY=(h,j)=>{const nt=(an,un)=>h.getRelated(an).exists(On=>hw(On,un)),it=(an,un)=>{Zl.setContent(an,un)},dt=(an,un,wn)=>{const On=Mt.none;yt(an,un,wn,On)},yt=(an,un,wn,On)=>{const _o=h.lazySink(an).getOrDie();Zl.openWhileCloaked(an,un,()=>c0.positionWithinBounds(_o,an,wn,On())),$r.setValue(an,Mt.some({mode:"position",config:wn,getBounds:On}))},vt=(an,un,wn)=>{St(an,un,wn,Mt.none)},St=(an,un,wn,On)=>{const _o=k$(h,an,un,wn,On);Zl.open(an,_o),$r.setValue(an,Mt.some({mode:"menu",menu:_o}))},Dt=an=>{Zl.isOpen(an)&&($r.setValue(an,Mt.none()),Zl.close(an))},Bt=an=>Zl.getState(an),jt=an=>{Zl.isOpen(an)&&$r.getValue(an).each(un=>{switch(un.mode){case"menu":Zl.getState(an).each(Mw.repositionMenus);break;case"position":const wn=h.lazySink(an).getOrDie();c0.positionWithinBounds(wn,an,un.config,un.getBounds());break}})},Zt={setContent:it,showAt:dt,showWithinBounds:yt,showMenuAt:vt,showMenuWithinBounds:St,hide:Dt,getContent:Bt,reposition:jt,isOpen:Zl.isOpen};return{uid:h.uid,dom:h.dom,behaviours:Um(h.inlineBehaviours,[Zl.config({isPartOf:(an,un,wn)=>hw(un,wn)||nt(an,wn),getAttachPoint:an=>h.lazySink(an).getOrDie(),onOpen:an=>{h.onShow(an)},onClose:an=>{h.onHide(an)}}),$r.config({store:{mode:"memory",initialValue:Mt.none()}}),Ty.config({channels:{...jE({isExtraPart:j.isExtraPart,...h.fireDismissalEventInstead.map(an=>({fireEventInstead:{event:an.event}})).getOr({})}),...HE({...h.fireRepositionEventInstead.map(an=>({fireEventInstead:{event:an.event}})).getOr({}),doReposition:jt})}})]),eventOrder:h.eventOrder,apis:Zt}},Cp=Py({name:"InlineView",configFields:[Qo("lazySink"),Hl("onShow"),Hl("onHide"),hv("onEscape"),Hm("inlineBehaviours",[Zl,$r,Ty]),ym("fireDismissalEventInstead",[So("event",Wy())]),ym("fireRepositionEventInstead",[So("event",sE())]),So("getRelated",Mt.none),So("isExtraPart",pn),So("eventOrder",Mt.none)],factory:oY,apis:{showAt:(h,j,nt,it)=>{h.showAt(j,nt,it)},showWithinBounds:(h,j,nt,it,dt)=>{h.showWithinBounds(j,nt,it,dt)},showMenuAt:(h,j,nt,it)=>{h.showMenuAt(j,nt,it)},showMenuWithinBounds:(h,j,nt,it,dt)=>{h.showMenuWithinBounds(j,nt,it,dt)},hide:(h,j)=>{h.hide(j)},isOpen:(h,j)=>h.isOpen(j),getContent:(h,j)=>h.getContent(j),setContent:(h,j,nt)=>{h.setContent(j,nt)},reposition:(h,j)=>{h.reposition(j)}}});var nA=tinymce.util.Tools.resolve("tinymce.util.Delay"),bS=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),S$=tinymce.util.Tools.resolve("tinymce.EditorManager"),oA=tinymce.util.Tools.resolve("tinymce.Env"),r1;(function(h){h.default="wrap",h.floating="floating",h.sliding="sliding",h.scrolling="scrolling"})(r1||(r1={}));var c5;(function(h){h.auto="auto",h.top="top",h.bottom="bottom"})(c5||(c5={}));const Ou=h=>j=>j.options.get(h),CI=h=>j=>Mt.from(h(j)),E$=h=>{const j=oA.deviceType.isPhone(),nt=oA.deviceType.isTablet()||j,it=h.options.register,dt=vt=>_e(vt)||vt===!1,yt=vt=>_e(vt)||It(vt);it("skin",{processor:vt=>_e(vt)||vt===!1,default:"oxide"}),it("skin_url",{processor:"string"}),it("height",{processor:yt,default:Math.max(h.getElement().offsetHeight,400)}),it("width",{processor:yt,default:bS.DOM.getStyle(h.getElement(),"width")}),it("min_height",{processor:"number",default:100}),it("min_width",{processor:"number"}),it("max_height",{processor:"number"}),it("max_width",{processor:"number"}),it("style_formats",{processor:"object[]"}),it("style_formats_merge",{processor:"boolean",default:!1}),it("style_formats_autohide",{processor:"boolean",default:!1}),it("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),it("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),it("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),it("font_size_input_default_unit",{processor:"string",default:"pt"}),it("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),it("content_langs",{processor:"object[]"}),it("removed_menuitems",{processor:"string",default:""}),it("menubar",{processor:vt=>_e(vt)||mt(vt),default:!j}),it("menu",{processor:"object",default:{}}),it("toolbar",{processor:vt=>mt(vt)||_e(vt)||ct(vt)?{value:vt,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),oo(9,vt=>{it("toolbar"+(vt+1),{processor:"string"})}),it("toolbar_mode",{processor:"string",default:nt?"scrolling":"floating"}),it("toolbar_groups",{processor:"object",default:{}}),it("toolbar_location",{processor:"string",default:c5.auto}),it("toolbar_persist",{processor:"boolean",default:!1}),it("toolbar_sticky",{processor:"boolean",default:h.inline}),it("toolbar_sticky_offset",{processor:"number",default:0}),it("fixed_toolbar_container",{processor:"string",default:""}),it("fixed_toolbar_container_target",{processor:"object"}),it("ui_mode",{processor:"string",default:"combined"}),it("file_picker_callback",{processor:"function"}),it("file_picker_validator_handler",{processor:"function"}),it("file_picker_types",{processor:"string"}),it("typeahead_urls",{processor:"boolean",default:!0}),it("anchor_top",{processor:dt,default:"#top"}),it("anchor_bottom",{processor:dt,default:"#bottom"}),it("draggable_modal",{processor:"boolean",default:!1}),it("statusbar",{processor:"boolean",default:!0}),it("elementpath",{processor:"boolean",default:!0}),it("branding",{processor:"boolean",default:!0}),it("promotion",{processor:"boolean",default:!0}),it("resize",{processor:vt=>vt==="both"||mt(vt),default:!oA.deviceType.isTouch()}),it("sidebar_show",{processor:"string"}),it("help_accessibility",{processor:"boolean",default:h.hasPlugin("help")}),it("default_font_stack",{processor:"string[]",default:[]})},A$=Ou("readonly"),f6=Ou("height"),u5=Ou("width"),h6=CI(Ou("min_width")),rA=CI(Ou("min_height")),sA=CI(Ou("max_width")),cO=CI(Ou("max_height")),p6=CI(Ou("style_formats")),T$=Ou("style_formats_merge"),I$=Ou("style_formats_autohide"),R$=Ou("content_langs"),M$=Ou("removed_menuitems"),vS=Ou("toolbar_mode"),g6=Ou("toolbar_groups"),uO=Ou("toolbar_location"),m6=Ou("fixed_toolbar_container"),rY=Ou("fixed_toolbar_container_target"),y6=Ou("toolbar_persist"),P$=Ou("toolbar_sticky_offset"),O$=Ou("menubar"),dO=Ou("toolbar"),b6=Ou("file_picker_callback"),D$=Ou("file_picker_validator_handler"),N$=Ou("font_size_input_default_unit"),fO=Ou("file_picker_types"),v6=Ou("typeahead_urls"),_6=Ou("anchor_top"),L$=Ou("anchor_bottom"),hO=Ou("draggable_modal"),F$=Ou("statusbar"),z$=Ou("elementpath"),x6=Ou("branding"),B$=Ou("resize"),$$=Ou("paste_as_text"),w6=Ou("sidebar_show"),pO=Ou("promotion"),G$=Ou("help_accessibility"),d5=Ou("default_font_stack"),C6=h=>h.options.get("skin")===!1,gO=h=>h.options.get("menubar")!==!1,k6=h=>{const j=h.options.get("skin_url");if(C6(h))return j;if(j)return h.documentBaseURI.toAbsolute(j);{const nt=h.options.get("skin");return S$.baseURL+"/skins/ui/"+nt}},mO=h=>Mt.from(h.options.get("skin_url")),j$=h=>h.options.get("line_height_formats").split(" "),yO=h=>{const j=dO(h),nt=_e(j),it=ct(j)&&j.length>0;return!f5(h)&&(it||nt||j===!0)},bO=h=>{const j=oo(9,it=>h.options.get("toolbar"+(it+1))),nt=co(j,_e);return es(nt.length>0,nt)},f5=h=>bO(h).fold(()=>{const j=dO(h);return Pt(j,_e)&&j.length>0},hn),S6=h=>uO(h)===c5.bottom,vO=h=>{var j;if(!h.inline)return Mt.none();const nt=(j=m6(h))!==null&&j!==void 0?j:"";if(nt.length>0)return ap(ho(),nt);const it=rY(h);return Ct(it)?Mt.some(io.fromDom(it)):Mt.none()},$_=h=>h.inline&&vO(h).isSome(),E6=h=>vO(h).getOrThunk(()=>Dm(yp(io.fromDom(h.getElement())))),A6=h=>h.inline&&!gO(h)&&!yO(h)&&!f5(h),_S=h=>(h.options.get("toolbar_sticky")||h.inline)&&!$_(h)&&!A6(h),eC=h=>!$_(h)&&h.options.get("ui_mode")==="split",H$=h=>{const j=h.options.get("menu");return xr(j,nt=>({...nt,items:nt.items}))};var sY=Object.freeze({__proto__:null,get ToolbarMode(){return r1},get ToolbarLocation(){return c5},register:E$,getSkinUrl:k6,getSkinUrlOption:mO,isReadOnly:A$,isSkinDisabled:C6,getHeightOption:f6,getWidthOption:u5,getMinWidthOption:h6,getMinHeightOption:rA,getMaxWidthOption:sA,getMaxHeightOption:cO,getUserStyleFormats:p6,shouldMergeStyleFormats:T$,shouldAutoHideStyleFormats:I$,getLineHeightFormats:j$,getContentLanguages:R$,getRemovedMenuItems:M$,isMenubarEnabled:gO,isMultipleToolbars:f5,isToolbarEnabled:yO,isToolbarPersist:y6,getMultipleToolbarsOption:bO,getUiContainer:E6,useFixedContainer:$_,isSplitUiMode:eC,getToolbarMode:vS,isDraggableModal:hO,isDistractionFree:A6,isStickyToolbar:_S,getStickyToolbarOffset:P$,getToolbarLocation:uO,isToolbarLocationBottom:S6,getToolbarGroups:g6,getMenus:H$,getMenubar:O$,getToolbar:dO,getFilePickerCallback:b6,getFilePickerTypes:fO,useTypeaheadUrls:v6,getAnchorTop:_6,getAnchorBottom:L$,getFilePickerValidatorHandler:D$,getFontSizeInputDefaultUnit:N$,useStatusBar:F$,useElementPath:z$,promotionEnabled:pO,useBranding:x6,getResize:B$,getPasteAsText:$$,getSidebarShow:w6,useHelpAccessibility:G$,getDefaultFontStack:d5});const U$=["visible","hidden","clip"],V$=h=>Mu(h).length>0&&!qn(U$,h),T6=h=>{if(cm(h)){const j=lu(h,"overflow-x"),nt=lu(h,"overflow-y");return V$(j)||V$(nt)}else return!1},I6=h=>h.plugins.fullscreen&&h.plugins.fullscreen.isFullscreen(),R6=(h,j)=>{const nt=tS(j,T6),it=nt.length===0?em(j).map(By).map(dt=>tS(dt,T6)).getOr([]):nt;return vo(it).map(dt=>({element:dt,others:it.slice(1),isFullscreen:()=>I6(h)}))},xS=(h,j)=>eC(h)?R6(h,j):Mt.none(),wS=h=>{const j=[...Dn(h.others,tp),Hp()];return h.isFullscreen()?Hp():Zw(tp(h.element),j)},Im=Py({name:"Button",factory:h=>{const j=l5(h.action),nt=h.dom.tag,it=yt=>or(h.dom,"attributes").bind(vt=>or(vt,yt)),dt=()=>{if(nt==="button"){const yt=it("type").getOr("button"),vt=it("role").map(St=>({role:St})).getOr({});return{type:yt,...vt}}else return{role:h.role.getOr(it("role").getOr("button"))}};return{uid:h.uid,dom:h.dom,components:h.components,events:j,behaviours:Cv.augment(h.buttonBehaviours,[Fs.config({}),_s.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:dt()},eventOrder:h.eventOrder}},configFields:[So("uid",void 0),Qo("dom"),So("components",[]),Cv.field("buttonBehaviours",[Fs,_s]),Ql("action"),Ql("role"),So("eventOrder",{})]}),iY=h=>{const j=h.dom.attributes!==void 0?h.dom.attributes:[];return yo(j,(nt,it)=>it.name==="class"?nt:{...nt,[it.name]:it.value},{})},aY=h=>Array.prototype.slice.call(h.dom.classList,0),Sx=h=>{const j=io.fromHtml(h),nt=Om(j),it=iY(j),dt=aY(j),yt=nt.length===0?{}:{innerHtml:gx(j)};return{tag:eu(j),classes:dt,attributes:it,...yt}},iu=h=>{const j=E8(h)&&hu(h,"uid")?h.uid:mE("memento");return{get:yt=>yt.getSystem().getByUid(j).getOrDie(),getOpt:yt=>yt.getSystem().getByUid(j).toOptional(),asSpec:()=>({...h,uid:j})}};var M6=Object.freeze({__proto__:null,exhibit:(h,j)=>ey({attributes:Qs([{key:j.tabAttr,value:"true"}])})}),lY=[So("tabAttr","data-alloy-tabstop")];const lp=Gm({fields:lY,name:"tabstopping",active:M6}),_O=Zr("tooltip.exclusive"),h5=Zr("tooltip.show"),p5=Zr("tooltip.hide"),g5=Zr("tooltip.immediateHide"),m5=Zr("tooltip.immediateShow"),W$=(h,j,nt)=>{h.getSystem().broadcastOn([_O],{})};var cY=Object.freeze({__proto__:null,hideAllExclusive:W$,immediateOpenClose:(h,j,nt,it)=>El(h,it?m5:g5),isEnabled:(h,j,nt)=>nt.isEnabled(),setComponents:(h,j,nt,it)=>{nt.getTooltip().each(dt=>{dt.getSystem().isConnected()&&Us.set(dt,it)})},setEnabled:(h,j,nt,it)=>nt.setEnabled(it)}),uY=Object.freeze({__proto__:null,events:(h,j)=>{const nt=vt=>{j.getTooltip().each(St=>{St.getSystem().isConnected()&&(wx(St),h.onHide(vt,St),j.clearTooltip())}),j.clearTimer()},it=vt=>{if(!j.isShowing()&&j.isEnabled()){W$(vt);const St=h.lazySink(vt).getOrDie(),Dt=vt.getSystem().build({dom:h.tooltipDom,components:h.tooltipComponents,events:xu(h.mode==="normal"?[er(J0(),Bt=>{El(vt,h5)}),er(SC(),Bt=>{El(vt,p5)})]:[]),behaviours:yr([Us.config({})])});j.setTooltip(Dt),xx(St,Dt),h.onShow(vt,Dt),c0.position(St,Dt,{anchor:h.anchor(vt)})}},dt=vt=>{j.getTooltip().each(St=>{const Dt=h.lazySink(vt).getOrDie();c0.position(Dt,St,{anchor:h.anchor(vt)})})},yt=()=>{switch(h.mode){case"normal":return[er(Q0(),vt=>{El(vt,m5)}),er(c2(),vt=>{El(vt,g5)}),er(J0(),vt=>{El(vt,h5)}),er(SC(),vt=>{El(vt,p5)})];case"follow-highlight":return[er(C3(),(vt,St)=>{El(vt,h5)}),er(TC(),vt=>{El(vt,p5)})];case"children-normal":return[er(Q0(),(vt,St)=>{B0(vt.element).each(Dt=>{gp(St.event.target,"[data-mce-tooltip]")&&j.getTooltip().fold(()=>{El(vt,m5)},Bt=>{j.isShowing()&&(h.onShow(vt,Bt),dt(vt))})})}),er(c2(),vt=>{B0(vt.element).fold(()=>{El(vt,g5)},Tt)}),er(J0(),vt=>{ap(vt.element,"[data-mce-tooltip]:hover").each(St=>{j.getTooltip().fold(()=>{El(vt,h5)},Dt=>{j.isShowing()&&(h.onShow(vt,Dt),dt(vt))})})}),er(SC(),vt=>{ap(vt.element,"[data-mce-tooltip]:hover").fold(()=>{El(vt,p5)},Tt)})];default:return[er(Q0(),(vt,St)=>{B0(vt.element).each(Dt=>{gp(St.event.target,"[data-mce-tooltip]")&&j.getTooltip().fold(()=>{El(vt,m5)},Bt=>{j.isShowing()&&(h.onShow(vt,Bt),dt(vt))})})}),er(c2(),vt=>{B0(vt.element).fold(()=>{El(vt,g5)},Tt)})]}};return xu(Nn([[Y4(vt=>{h.onSetup(vt)}),er(h5,vt=>{j.resetTimer(()=>{it(vt)},h.delayForShow())}),er(p5,vt=>{j.resetTimer(()=>{nt(vt)},h.delayForHide())}),er(m5,vt=>{j.resetTimer(()=>{it(vt)},0)}),er(g5,vt=>{j.resetTimer(()=>{nt(vt)},0)}),er(F1(),(vt,St)=>{const Dt=St;Dt.universal||qn(Dt.channels,_O)&&nt(vt)}),I_(vt=>{nt(vt)})],yt()]))}}),P6=[Qo("lazySink"),Qo("tooltipDom"),So("exclusive",!0),So("tooltipComponents",[]),Yu("delayForShow",Nt(300)),Yu("delayForHide",Nt(300)),Yu("onSetup",Tt),Em("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),So("anchor",h=>({type:"hotspot",hotspot:h,layouts:{onLtr:Nt([im,yu,vm,i0,_m,xm]),onRtl:Nt([im,yu,vm,i0,_m,xm])},bubble:n1(0,-2,{})})),Hl("onHide"),Hl("onShow")],dY=Object.freeze({__proto__:null,init:()=>{const h=ds(!0),j=Xl(),nt=Xl(),it=()=>{j.on(clearTimeout)},dt=(vt,St)=>{it(),j.set(setTimeout(vt,St))},yt=Nt("not-implemented");return F0({getTooltip:nt.get,isShowing:nt.isSet,setTooltip:nt.set,clearTooltip:nt.clear,clearTimer:it,resetTimer:dt,readState:yt,isEnabled:()=>h.get(),setEnabled:vt=>h.set(vt)})}});const Np=Gm({fields:P6,name:"tooltipping",active:uY,state:dY,apis:cY});/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:O6,setPrototypeOf:q$,isFrozen:fY,getPrototypeOf:hY,getOwnPropertyDescriptor:pY}=Object;let{freeze:Ev,seal:G_,create:xO}=Object,{apply:D6,construct:N6}=typeof Reflect<"u"&&Reflect;Ev||(Ev=function(j){return j}),G_||(G_=function(j){return j}),D6||(D6=function(j,nt,it){return j.apply(nt,it)}),N6||(N6=function(j,nt){return new j(...nt)});const wO=K1(Array.prototype.forEach),Z$=K1(Array.prototype.pop),y5=K1(Array.prototype.push),CO=K1(String.prototype.toLowerCase),L6=K1(String.prototype.toString),K$=K1(String.prototype.match),b5=K1(String.prototype.replace),gY=K1(String.prototype.indexOf),mY=K1(String.prototype.trim),Ex=K1(Object.prototype.hasOwnProperty),Av=K1(RegExp.prototype.test),CS=F6(TypeError);function K1(h){return function(j){for(var nt=arguments.length,it=new Array(nt>1?nt-1:0),dt=1;dt<nt;dt++)it[dt-1]=arguments[dt];return D6(h,j,it)}}function F6(h){return function(){for(var j=arguments.length,nt=new Array(j),it=0;it<j;it++)nt[it]=arguments[it];return N6(h,nt)}}function _d(h,j){let nt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:CO;q$&&q$(h,null);let it=j.length;for(;it--;){let dt=j[it];if(typeof dt=="string"){const yt=nt(dt);yt!==dt&&(fY(j)||(j[it]=yt),dt=yt)}h[dt]=!0}return h}function yY(h){for(let j=0;j<h.length;j++)Ex(h,j)||(h[j]=null);return h}function iA(h){const j=xO(null);for(const[nt,it]of O6(h))Ex(h,nt)&&(Array.isArray(it)?j[nt]=yY(it):it&&typeof it=="object"&&it.constructor===Object?j[nt]=iA(it):j[nt]=it);return j}function kI(h,j){for(;h!==null;){const it=pY(h,j);if(it){if(it.get)return K1(it.get);if(typeof it.value=="function")return K1(it.value)}h=hY(h)}function nt(){return null}return nt}const Y$=Ev(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),v5=Ev(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),_5=Ev(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),X$=Ev(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),x5=Ev(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),kO=Ev(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),z6=Ev(["#text"]),Ax=Ev(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),w5=Ev(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),J$=Ev(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),SO=Ev(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bY=G_(/\{\{[\w\W]*|[\w\W]*\}\}/gm),vY=G_(/<%[\w\W]*|[\w\W]*%>/gm),C5=G_(/\${[\w\W]*}/gm),_Y=G_(/^data-[\-\w.\u00B7-\uFFFF]/),Q$=G_(/^aria-[\-\w]+$/),EO=G_(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),xY=G_(/^(?:\w+script|data):/i),B6=G_(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),AO=G_(/^html$/i),wY=G_(/^[a-z][.\w]*(-[.\w]+)+$/i);var $6=Object.freeze({__proto__:null,MUSTACHE_EXPR:bY,ERB_EXPR:vY,TMPLIT_EXPR:C5,DATA_ATTR:_Y,ARIA_ATTR:Q$,IS_ALLOWED_URI:EO,IS_SCRIPT_OR_DATA:xY,ATTR_WHITESPACE:B6,DOCTYPE_NAME:AO,CUSTOM_ELEMENT:wY});const SI={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},CY=function(){return typeof window>"u"?null:window},eG=function(j,nt){if(typeof j!="object"||typeof j.createPolicy!="function")return null;let it=null;const dt="data-tt-policy-suffix";nt&&nt.hasAttribute(dt)&&(it=nt.getAttribute(dt));const yt="dompurify"+(it?"#"+it:"");try{return j.createPolicy(yt,{createHTML(vt){return vt},createScriptURL(vt){return vt}})}catch{return console.warn("TrustedTypes policy "+yt+" could not be created."),null}};function G6(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:CY();const j=Ul=>G6(Ul);if(j.version="3.1.7",j.removed=[],!h||!h.document||h.document.nodeType!==SI.document)return j.isSupported=!1,j;let{document:nt}=h;const it=nt,dt=it.currentScript,{DocumentFragment:yt,HTMLTemplateElement:vt,Node:St,Element:Dt,NodeFilter:Bt,NamedNodeMap:jt=h.NamedNodeMap||h.MozNamedAttrMap,HTMLFormElement:Zt,DOMParser:an,trustedTypes:un}=h,wn=Dt.prototype,On=kI(wn,"cloneNode"),_o=kI(wn,"remove"),Un=kI(wn,"nextSibling"),go=kI(wn,"childNodes"),bo=kI(wn,"parentNode");if(typeof vt=="function"){const Ul=nt.createElement("template");Ul.content&&Ul.content.ownerDocument&&(nt=Ul.content.ownerDocument)}let Bo,Go="";const{implementation:Sr,createNodeIterator:Vr,createDocumentFragment:Yo,getElementsByTagName:qr}=nt,{importNode:Lr}=it;let Qr={};j.isSupported=typeof O6=="function"&&typeof bo=="function"&&Sr&&Sr.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Pl,ERB_EXPR:_h,TMPLIT_EXPR:su,DATA_ATTR:as,ARIA_ATTR:hr,IS_SCRIPT_OR_DATA:Dr,ATTR_WHITESPACE:Gs,CUSTOM_ELEMENT:ga}=$6;let{IS_ALLOWED_URI:vs}=$6,qs=null;const Du=_d({},[...Y$,...v5,..._5,...x5,...z6]);let ku=null;const rv=_d({},[...Ax,...w5,...J$,...SO]);let Sp=Object.seal(xO(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),h1=null,V0=null,g1=!0,m1=!0,Y_=!1,N4=!0,$w=!1,qz=!0,UA=!1,Zz=!1,Xse=!1,jN=!1,qZ=!1,ZZ=!1,Eae=!0,Aae=!1;const gle="user-content-";let Jse=!0,Kz=!1,HN={},UN=null;const Tae=_d({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Iae=null;const Rae=_d({},["audio","video","img","source","image","track"]);let Qse=null;const Mae=_d({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),KZ="http://www.w3.org/1998/Math/MathML",YZ="http://www.w3.org/2000/svg",VA="http://www.w3.org/1999/xhtml";let VN=VA,eie=!1,tie=null;const mle=_d({},[KZ,YZ,VA],L6);let Yz=null;const yle=["application/xhtml+xml","text/html"],ble="text/html";let sv=null,WN=null;const vle=nt.createElement("form"),Pae=function($o){return $o instanceof RegExp||$o instanceof Function},nie=function(){let $o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(WN&&WN===$o)){if((!$o||typeof $o!="object")&&($o={}),$o=iA($o),Yz=yle.indexOf($o.PARSER_MEDIA_TYPE)===-1?ble:$o.PARSER_MEDIA_TYPE,sv=Yz==="application/xhtml+xml"?L6:CO,qs=Ex($o,"ALLOWED_TAGS")?_d({},$o.ALLOWED_TAGS,sv):Du,ku=Ex($o,"ALLOWED_ATTR")?_d({},$o.ALLOWED_ATTR,sv):rv,tie=Ex($o,"ALLOWED_NAMESPACES")?_d({},$o.ALLOWED_NAMESPACES,L6):mle,Qse=Ex($o,"ADD_URI_SAFE_ATTR")?_d(iA(Mae),$o.ADD_URI_SAFE_ATTR,sv):Mae,Iae=Ex($o,"ADD_DATA_URI_TAGS")?_d(iA(Rae),$o.ADD_DATA_URI_TAGS,sv):Rae,UN=Ex($o,"FORBID_CONTENTS")?_d({},$o.FORBID_CONTENTS,sv):Tae,h1=Ex($o,"FORBID_TAGS")?_d({},$o.FORBID_TAGS,sv):{},V0=Ex($o,"FORBID_ATTR")?_d({},$o.FORBID_ATTR,sv):{},HN=Ex($o,"USE_PROFILES")?$o.USE_PROFILES:!1,g1=$o.ALLOW_ARIA_ATTR!==!1,m1=$o.ALLOW_DATA_ATTR!==!1,Y_=$o.ALLOW_UNKNOWN_PROTOCOLS||!1,N4=$o.ALLOW_SELF_CLOSE_IN_ATTR!==!1,$w=$o.SAFE_FOR_TEMPLATES||!1,qz=$o.SAFE_FOR_XML!==!1,UA=$o.WHOLE_DOCUMENT||!1,jN=$o.RETURN_DOM||!1,qZ=$o.RETURN_DOM_FRAGMENT||!1,ZZ=$o.RETURN_TRUSTED_TYPE||!1,Xse=$o.FORCE_BODY||!1,Eae=$o.SANITIZE_DOM!==!1,Aae=$o.SANITIZE_NAMED_PROPS||!1,Jse=$o.KEEP_CONTENT!==!1,Kz=$o.IN_PLACE||!1,vs=$o.ALLOWED_URI_REGEXP||EO,VN=$o.NAMESPACE||VA,Sp=$o.CUSTOM_ELEMENT_HANDLING||{},$o.CUSTOM_ELEMENT_HANDLING&&Pae($o.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Sp.tagNameCheck=$o.CUSTOM_ELEMENT_HANDLING.tagNameCheck),$o.CUSTOM_ELEMENT_HANDLING&&Pae($o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Sp.attributeNameCheck=$o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),$o.CUSTOM_ELEMENT_HANDLING&&typeof $o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Sp.allowCustomizedBuiltInElements=$o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$w&&(m1=!1),qZ&&(jN=!0),HN&&(qs=_d({},z6),ku=[],HN.html===!0&&(_d(qs,Y$),_d(ku,Ax)),HN.svg===!0&&(_d(qs,v5),_d(ku,w5),_d(ku,SO)),HN.svgFilters===!0&&(_d(qs,_5),_d(ku,w5),_d(ku,SO)),HN.mathMl===!0&&(_d(qs,x5),_d(ku,J$),_d(ku,SO))),$o.ADD_TAGS&&(qs===Du&&(qs=iA(qs)),_d(qs,$o.ADD_TAGS,sv)),$o.ADD_ATTR&&(ku===rv&&(ku=iA(ku)),_d(ku,$o.ADD_ATTR,sv)),$o.ADD_URI_SAFE_ATTR&&_d(Qse,$o.ADD_URI_SAFE_ATTR,sv),$o.FORBID_CONTENTS&&(UN===Tae&&(UN=iA(UN)),_d(UN,$o.FORBID_CONTENTS,sv)),Jse&&(qs["#text"]=!0),UA&&_d(qs,["html","head","body"]),qs.table&&(_d(qs,["tbody"]),delete h1.tbody),$o.TRUSTED_TYPES_POLICY){if(typeof $o.TRUSTED_TYPES_POLICY.createHTML!="function")throw CS('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof $o.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw CS('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Bo=$o.TRUSTED_TYPES_POLICY,Go=Bo.createHTML("")}else Bo===void 0&&(Bo=eG(un,dt)),Bo!==null&&typeof Go=="string"&&(Go=Bo.createHTML(""));Ev&&Ev($o),WN=$o}},Oae=_d({},["mi","mo","mn","ms","mtext"]),Dae=_d({},["annotation-xml"]),_le=_d({},["title","style","font","a","script"]),Nae=_d({},[...v5,..._5,...X$]),Lae=_d({},[...x5,...kO]),xle=function($o){let Ss=bo($o);(!Ss||!Ss.tagName)&&(Ss={namespaceURI:VN,tagName:"template"});const Ol=CO($o.tagName),Zm=CO(Ss.tagName);return tie[$o.namespaceURI]?$o.namespaceURI===YZ?Ss.namespaceURI===VA?Ol==="svg":Ss.namespaceURI===KZ?Ol==="svg"&&(Zm==="annotation-xml"||Oae[Zm]):!!Nae[Ol]:$o.namespaceURI===KZ?Ss.namespaceURI===VA?Ol==="math":Ss.namespaceURI===YZ?Ol==="math"&&Dae[Zm]:!!Lae[Ol]:$o.namespaceURI===VA?Ss.namespaceURI===YZ&&!Dae[Zm]||Ss.namespaceURI===KZ&&!Oae[Zm]?!1:!Lae[Ol]&&(_le[Ol]||!Nae[Ol]):!!(Yz==="application/xhtml+xml"&&tie[$o.namespaceURI]):!1},US=function($o){y5(j.removed,{element:$o});try{bo($o).removeChild($o)}catch{_o($o)}},Xz=function($o,Ss){try{y5(j.removed,{attribute:Ss.getAttributeNode($o),from:Ss})}catch{y5(j.removed,{attribute:null,from:Ss})}if(Ss.removeAttribute($o),$o==="is"&&!ku[$o])if(jN||qZ)try{US(Ss)}catch{}else try{Ss.setAttribute($o,"")}catch{}},Fae=function($o){let Ss=null,Ol=null;if(Xse)$o="<remove></remove>"+$o;else{const iv=K$($o,/^[\r\n\t ]+/);Ol=iv&&iv[0]}Yz==="application/xhtml+xml"&&VN===VA&&($o='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+$o+"</body></html>");const Zm=Bo?Bo.createHTML($o):$o;if(VN===VA)try{Ss=new an().parseFromString(Zm,Yz)}catch{}if(!Ss||!Ss.documentElement){Ss=Sr.createDocument(VN,"template",null);try{Ss.documentElement.innerHTML=eie?Go:Zm}catch{}}const y1=Ss.body||Ss.documentElement;return $o&&Ol&&y1.insertBefore(nt.createTextNode(Ol),y1.childNodes[0]||null),VN===VA?qr.call(Ss,UA?"html":"body")[0]:UA?Ss.documentElement:y1},zae=function($o){return Vr.call($o.ownerDocument||$o,$o,Bt.SHOW_ELEMENT|Bt.SHOW_COMMENT|Bt.SHOW_TEXT|Bt.SHOW_PROCESSING_INSTRUCTION|Bt.SHOW_CDATA_SECTION,null)},Bae=function($o){return $o instanceof Zt&&(typeof $o.nodeName!="string"||typeof $o.textContent!="string"||typeof $o.removeChild!="function"||!($o.attributes instanceof jt)||typeof $o.removeAttribute!="function"||typeof $o.setAttribute!="function"||typeof $o.namespaceURI!="string"||typeof $o.insertBefore!="function"||typeof $o.hasChildNodes!="function")},$ae=function($o){return typeof St=="function"&&$o instanceof St},WA=function($o,Ss,Ol){Qr[$o]&&wO(Qr[$o],Zm=>{Zm.call(j,Ss,Ol,WN)})},Gae=function($o){let Ss=null;if(WA("beforeSanitizeElements",$o,null),Bae($o))return US($o),!0;const Ol=sv($o.nodeName);if(WA("uponSanitizeElement",$o,{tagName:Ol,allowedTags:qs}),$o.hasChildNodes()&&!$ae($o.firstElementChild)&&Av(/<[/\w]/g,$o.innerHTML)&&Av(/<[/\w]/g,$o.textContent)||$o.nodeType===SI.progressingInstruction||qz&&$o.nodeType===SI.comment&&Av(/<[/\w]/g,$o.data))return US($o),!0;if(!qs[Ol]||h1[Ol]){if(!h1[Ol]&&Hae(Ol)&&(Sp.tagNameCheck instanceof RegExp&&Av(Sp.tagNameCheck,Ol)||Sp.tagNameCheck instanceof Function&&Sp.tagNameCheck(Ol)))return!1;if(Jse&&!UN[Ol]){const Zm=bo($o)||$o.parentNode,y1=go($o)||$o.childNodes;if(y1&&Zm){const iv=y1.length;for(let X_=iv-1;X_>=0;--X_){const VS=On(y1[X_],!0);VS.__removalCount=($o.__removalCount||0)+1,Zm.insertBefore(VS,Un($o))}}}return US($o),!0}return $o instanceof Dt&&!xle($o)||(Ol==="noscript"||Ol==="noembed"||Ol==="noframes")&&Av(/<\/no(script|embed|frames)/i,$o.innerHTML)?(US($o),!0):($w&&$o.nodeType===SI.text&&(Ss=$o.textContent,wO([Pl,_h,su],Zm=>{Ss=b5(Ss,Zm," ")}),$o.textContent!==Ss&&(y5(j.removed,{element:$o.cloneNode()}),$o.textContent=Ss)),WA("afterSanitizeElements",$o,null),!1)},jae=function($o,Ss,Ol){if(Eae&&(Ss==="id"||Ss==="name")&&(Ol in nt||Ol in vle))return!1;if(!(m1&&!V0[Ss]&&Av(as,Ss))){if(!(g1&&Av(hr,Ss))){if(!ku[Ss]||V0[Ss]){if(!(Hae($o)&&(Sp.tagNameCheck instanceof RegExp&&Av(Sp.tagNameCheck,$o)||Sp.tagNameCheck instanceof Function&&Sp.tagNameCheck($o))&&(Sp.attributeNameCheck instanceof RegExp&&Av(Sp.attributeNameCheck,Ss)||Sp.attributeNameCheck instanceof Function&&Sp.attributeNameCheck(Ss))||Ss==="is"&&Sp.allowCustomizedBuiltInElements&&(Sp.tagNameCheck instanceof RegExp&&Av(Sp.tagNameCheck,Ol)||Sp.tagNameCheck instanceof Function&&Sp.tagNameCheck(Ol))))return!1}else if(!Qse[Ss]){if(!Av(vs,b5(Ol,Gs,""))){if(!((Ss==="src"||Ss==="xlink:href"||Ss==="href")&&$o!=="script"&&gY(Ol,"data:")===0&&Iae[$o])){if(!(Y_&&!Av(Dr,b5(Ol,Gs,"")))){if(Ol)return!1}}}}}}return!0},Hae=function($o){return $o!=="annotation-xml"&&K$($o,ga)},Uae=function($o){WA("beforeSanitizeAttributes",$o,null);const{attributes:Ss}=$o;if(!Ss)return;const Ol={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ku};let Zm=Ss.length;for(;Zm--;){const y1=Ss[Zm],{name:iv,namespaceURI:X_,value:VS}=y1,Jz=sv(iv);let Ov=iv==="value"?VS:mY(VS);const Cle=Ov;if(Ol.attrName=Jz,Ol.attrValue=Ov,Ol.keepAttr=!0,Ol.forceKeepAttr=void 0,WA("uponSanitizeAttribute",$o,Ol),Ov=Ol.attrValue,Ol.forceKeepAttr)continue;if(!Ol.keepAttr){Xz(iv,$o);continue}if(!N4&&Av(/\/>/i,Ov)){Xz(iv,$o);continue}$w&&wO([Pl,_h,su],Wae=>{Ov=b5(Ov,Wae," ")});const Vae=sv($o.nodeName);if(!jae(Vae,Jz,Ov)){Xz(iv,$o);continue}if(Aae&&(Jz==="id"||Jz==="name")&&(Xz(iv,$o),Ov=gle+Ov),qz&&Av(/((--!?|])>)|<\/(style|title)/i,Ov)){Xz(iv,$o);continue}if(Bo&&typeof un=="object"&&typeof un.getAttributeType=="function"&&!X_)switch(un.getAttributeType(Vae,Jz)){case"TrustedHTML":{Ov=Bo.createHTML(Ov);break}case"TrustedScriptURL":{Ov=Bo.createScriptURL(Ov);break}}if(Ov!==Cle)try{X_?$o.setAttributeNS(X_,iv,Ov):$o.setAttribute(iv,Ov),Bae($o)?US($o):Z$(j.removed)}catch{}}WA("afterSanitizeAttributes",$o,null)},wle=function Ul($o){let Ss=null;const Ol=zae($o);for(WA("beforeSanitizeShadowDOM",$o,null);Ss=Ol.nextNode();)WA("uponSanitizeShadowNode",Ss,null),!Gae(Ss)&&(Ss.content instanceof yt&&Ul(Ss.content),Uae(Ss));WA("afterSanitizeShadowDOM",$o,null)};return j.sanitize=function(Ul){let $o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ss=null,Ol=null,Zm=null,y1=null;if(eie=!Ul,eie&&(Ul="<!-->"),typeof Ul!="string"&&!$ae(Ul))if(typeof Ul.toString=="function"){if(Ul=Ul.toString(),typeof Ul!="string")throw CS("dirty is not a string, aborting")}else throw CS("toString is not a function");if(!j.isSupported)return Ul;if(Zz||nie($o),j.removed=[],typeof Ul=="string"&&(Kz=!1),Kz){if(Ul.nodeName){const VS=sv(Ul.nodeName);if(!qs[VS]||h1[VS])throw CS("root node is forbidden and cannot be sanitized in-place")}}else if(Ul instanceof St)Ss=Fae("<!---->"),Ol=Ss.ownerDocument.importNode(Ul,!0),Ol.nodeType===SI.element&&Ol.nodeName==="BODY"||Ol.nodeName==="HTML"?Ss=Ol:Ss.appendChild(Ol);else{if(!jN&&!$w&&!UA&&Ul.indexOf("<")===-1)return Bo&&ZZ?Bo.createHTML(Ul):Ul;if(Ss=Fae(Ul),!Ss)return jN?null:ZZ?Go:""}Ss&&Xse&&US(Ss.firstChild);const iv=zae(Kz?Ul:Ss);for(;Zm=iv.nextNode();)Gae(Zm)||(Zm.content instanceof yt&&wle(Zm.content),Uae(Zm));if(Kz)return Ul;if(jN){if(qZ)for(y1=Yo.call(Ss.ownerDocument);Ss.firstChild;)y1.appendChild(Ss.firstChild);else y1=Ss;return(ku.shadowroot||ku.shadowrootmode)&&(y1=Lr.call(it,y1,!0)),y1}let X_=UA?Ss.outerHTML:Ss.innerHTML;return UA&&qs["!doctype"]&&Ss.ownerDocument&&Ss.ownerDocument.doctype&&Ss.ownerDocument.doctype.name&&Av(AO,Ss.ownerDocument.doctype.name)&&(X_="<!DOCTYPE "+Ss.ownerDocument.doctype.name+`>
`+X_),$w&&wO([Pl,_h,su],VS=>{X_=b5(X_,VS," ")}),Bo&&ZZ?Bo.createHTML(X_):X_},j.setConfig=function(){let Ul=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};nie(Ul),Zz=!0},j.clearConfig=function(){WN=null,Zz=!1},j.isValidAttribute=function(Ul,$o,Ss){WN||nie({});const Ol=sv(Ul),Zm=sv($o);return jae(Ol,Zm,Ss)},j.addHook=function(Ul,$o){typeof $o=="function"&&(Qr[Ul]=Qr[Ul]||[],y5(Qr[Ul],$o))},j.removeHook=function(Ul){if(Qr[Ul])return Z$(Qr[Ul])},j.removeHooks=function(Ul){Qr[Ul]&&(Qr[Ul]=[])},j.removeAllHooks=function(){Qr={}},j}var kY=G6();const tG=h=>kY().sanitize(h);var Y1=tinymce.util.Tools.resolve("tinymce.util.I18n");const SY={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},nG="temporary-placeholder",TO=h=>()=>or(h,nG).getOr("!not found!"),IO=(h,j)=>{const nt=h.toLowerCase();if(Y1.isRtl()){const it=Br(nt,"-rtl");return Ds(j,it)?it:nt}else return nt},oG=(h,j)=>or(j,IO(h,j)),j6=(h,j)=>{const nt=j();return oG(h,nt).getOrThunk(TO(nt))},k5=(h,j,nt)=>{const it=j();return oG(h,it).or(nt).getOrThunk(TO(it))},rG=h=>Y1.isRtl()?Ds(SY,h):!1,sG=()=>Ks("add-focusable",[rp(h=>{vv(h.element,"svg").each(j=>Wo(j,"focusable","false"))})]),iG=(h,j,nt,it)=>{var dt,yt;const vt=rG(j)?["tox-icon--flip"]:[],St=or(nt,IO(j,nt)).or(it).getOrThunk(TO(nt));return{dom:{tag:h.tag,attributes:(dt=h.attributes)!==null&&dt!==void 0?dt:{},classes:h.classes.concat(vt),innerHtml:St},behaviours:yr([...(yt=h.behaviours)!==null&&yt!==void 0?yt:[],sG()])}},s1=(h,j,nt,it=Mt.none())=>iG(j,h,nt(),it),EY=(h,j,nt)=>{const it=nt(),dt=yn(h,yt=>Ds(it,IO(yt,it)));return iG(j,dt.getOr(nG),it,Mt.none())},AY={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},RO=Py({name:"Notification",factory:h=>{const j=Zr("notification-text"),nt=iu({dom:Sx(`<p id=${j}>${tG(h.backstageProvider.translate(h.text))}</p>`),behaviours:yr([Us.config({})])}),it=wn=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${wn}%`}}}),dt=wn=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${wn}%`}}),yt=iu({dom:{tag:"div",classes:h.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[it(0)]},dt(0)],behaviours:yr([Us.config({})])}),Dt={updateProgress:(wn,On)=>{wn.getSystem().isConnected()&&yt.getOpt(wn).each(_o=>{Us.set(_o,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[it(On)]},dt(On)])})},updateText:(wn,On)=>{if(wn.getSystem().isConnected()){const _o=nt.get(wn);Us.set(_o,[_p(On)])}}},Bt=Nn([h.icon.toArray(),h.level.toArray(),h.level.bind(wn=>Mt.from(AY[wn])).toArray()]),jt=iu(Im.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":h.backstageProvider.translate("Close")}},components:[s1("close",{tag:"span",classes:["tox-icon"]},h.iconProvider)],buttonBehaviours:yr([lp.config({}),Np.config({...h.backstageProvider.tooltips.getConfig({tooltipText:h.backstageProvider.translate("Close")})})]),action:wn=>{h.onAction(wn)}})),Zt=EY(Bt,{tag:"div",classes:["tox-notification__icon"]},h.iconProvider),an={dom:{tag:"div",classes:["tox-notification__body"]},components:[nt.asSpec()],behaviours:yr([Us.config({})])},un=[Zt,an];return{uid:h.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":j},classes:h.level.map(wn=>["tox-notification","tox-notification--in",`tox-notification--${wn}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:yr([lp.config({}),Fs.config({}),_s.config({mode:"special",onEscape:wn=>(h.onAction(wn),Mt.some(!0))})]),components:un.concat(h.progress?[yt.asSpec()]:[]).concat([jt.asSpec()]),apis:Dt}},configFields:[Ql("level"),Qo("progress"),Ql("icon"),Qo("onAction"),Qo("text"),Qo("iconProvider"),Qo("backstageProvider")],apis:{updateProgress:(h,j,nt)=>{h.updateProgress(j,nt)},updateText:(h,j,nt)=>{h.updateText(j,nt)}}});var aG=(h,j,nt,it)=>{const dt=j.backstage.shared,yt=()=>io.fromDom(h.queryCommandValue("ToggleView")===""?h.getContentAreaContainer():h.getContainer()),vt=()=>{const Zt=tp(yt());return Mt.some(Zt)},St=Zt=>{vt().each(an=>{xo(Zt,un=>{js(un.element,"width"),vn(un.element)>an.width&&Jo(un.element,"width",an.width+"px")})})};return{open:(Zt,an,un)=>{const wn=()=>{const go=Sr=>{Us.remove(Sr,On),_o()},bo=(Sr,Vr)=>{Om(Sr.element).length===0?Bo(Sr,Vr):Go(Sr,Vr)},Bo=(Sr,Vr)=>{Cp.hide(Sr),it.clear(),Vr&&h.focus()},Go=(Sr,Vr)=>{Vr&&_s.focusIn(Sr)};it.on(Sr=>{an();const Vr=un();go(Sr),bo(Sr,Vr)})},On=Tm(RO.sketch({text:Zt.text,level:qn(["success","error","warning","warn","info"],Zt.type)?Zt.type:void 0,progress:Zt.progressBar===!0,icon:Zt.icon,onAction:wn,iconProvider:dt.providers.icons,backstageProvider:dt.providers}));if(it.isSet()){const go=qy(On);it.on(bo=>{Us.append(bo,go),Cp.reposition(bo),Ju.refresh(bo),St(bo.components())})}else{const go=Tm(Cp.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:dt.getSink,fireDismissalEventInstead:{},...dt.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:yr([_s.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Us.config({}),..._S(h)&&!dt.header.isPositionedAtTop()?[]:[Ju.config({contextual:{lazyContext:()=>Mt.some(tp(yt())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Sr=>xS(h,Sr.element).map(Yo=>({bounds:wS(Yo),optScrollEnv:Mt.some({currentScrollTop:Yo.element.dom.scrollTop,scrollElmTop:Gu(Yo.element).top})})).getOrThunk(()=>({bounds:Hp(),optScrollEnv:Mt.none()}))})]])})),bo=qy(On),Bo={maxHeightFunction:yw()},Go={...dt.anchors.banner(),overrides:Bo};it.set(go),nt.add(go),Cp.showWithinBounds(go,bo,{anchor:Go},vt)}It(Zt.timeout)&&Zt.timeout>0&&nA.setEditorTimeout(h,()=>{wn()},Zt.timeout);const _o=()=>{it.on(go=>{Cp.reposition(go),Ju.refresh(go),St(go.components())})};return{close:wn,reposition:_o,text:go=>{RO.updateText(On,go)},settings:Zt,getEl:()=>On.element.dom,progressBar:{value:go=>{RO.updateProgress(On,go)}}}},close:Zt=>{Zt.close()},getArgs:Zt=>Zt.settings}};const RY={setup:(h,j)=>{const nt=(dt,yt)=>{ls(dt,gv(),{raw:yt})},it=()=>h.getMenu().bind(Er.getHighlighted);j.on("keydown",dt=>{const yt=dt.which;h.isActive()&&(h.isMenuOpen()?yt===13?(it().each(ow),dt.preventDefault()):yt===40?(it().fold(()=>{h.getMenu().each(Er.highlightFirst)},vt=>{nt(vt,dt)}),dt.preventDefault(),dt.stopImmediatePropagation()):(yt===37||yt===38||yt===39)&&it().each(vt=>{nt(vt,dt),dt.preventDefault(),dt.stopImmediatePropagation()}):(yt===13||yt===38||yt===40)&&h.cancelIfNecessary())}),j.on("NodeChange",()=>{h.isActive()&&!h.isProcessingAction()&&!j.queryCommandState("mceAutoCompleterInRange")&&h.cancelIfNecessary()})}};var H6;(function(h){h[h.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",h[h.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(H6||(H6={}));var j_=H6;const S5="tox-menu-nav__js",EI="tox-collection__item",MO="tox-swatch",lG={normal:S5,color:MO},U6="tox-collection__item--enabled",MY="tox-collection__group-heading",PO="tox-collection__item-icon",V6="tox-collection__item-label",cG="tox-collection__item-accessory",W6="tox-collection__item-caret",aA="tox-collection__item-checkmark",lA="tox-collection__item--active",OO="tox-collection__item-container",DO="tox-collection__item-container--column",uG="tox-collection__item-container--row",dG="tox-collection__item-container--align-right",fG="tox-collection__item-container--align-left",hG="tox-collection__item-container--valign-top",q6="tox-collection__item-container--valign-middle",pG="tox-collection__item-container--valign-bottom",gG=h=>or(lG,h).getOr(S5),mG=h=>h==="color"?"tox-swatches":"tox-menu",NO=h=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:mG(h),tieredMenu:"tox-tiered-menu"}),kS=h=>{const j=NO(h);return{backgroundMenu:j.backgroundMenu,selectedMenu:j.selectedMenu,menu:j.menu,selectedItem:j.selectedItem,item:gG(h)}},yG=(h,j,nt)=>{const it=NO(nt);return{tag:"div",classes:Nn([[it.menu,`tox-menu-${j}-column`],h?[it.hasIcons]:[]])}},PY=[QE.parts.items({})],E5=(h,j,nt)=>{const it=NO(nt);return{dom:{tag:"div",classes:Nn([[it.tieredMenu]])},markers:kS(nt)}},bG=Nt([Ql("data"),So("inputAttributes",{}),So("inputStyles",{}),So("tag","input"),So("inputClasses",[]),Hl("onSetValue"),So("styles",{}),So("eventOrder",{}),Hm("inputBehaviours",[$r,Fs]),So("selectOnFocus",!0)]),vG=h=>yr([Fs.config({onFocus:h.selectOnFocus?j=>{const nt=j.element,it=e1(nt);nt.dom.setSelectionRange(0,it.length)}:Tt})]),OY=h=>({...vG(h),...Um(h.inputBehaviours,[$r.config({store:{mode:"manual",...h.data.map(j=>({initialValue:j})).getOr({}),getValue:j=>e1(j.element),setValue:(j,nt)=>{e1(j.element)!==nt&&I2(j.element,nt)}},onSetValue:h.onSetValue})])}),_G=h=>({tag:h.tag,attributes:{type:"text",...h.inputAttributes},styles:h.inputStyles,classes:h.inputClasses}),xG=(h,j)=>({uid:h.uid,dom:_G(h),components:[],behaviours:OY(h),eventOrder:h.eventOrder}),Tx=Py({name:"Input",configFields:bG(),factory:xG}),Z6=Zr("refetch-trigger-event"),wG=Zr("redirect-menu-item-interaction"),CG="tox-menu__searcher",LO=h=>ap(h.element,`.${CG}`).bind(j=>h.getSystem().getByDom(j).toOptional()),kG=LO,DY=(h,j)=>{$r.setValue(h,j.fetchPattern),h.element.dom.selectionStart=j.selectionStart,h.element.dom.selectionEnd=j.selectionEnd},A5=h=>{const j=$r.getValue(h),nt=h.element.dom.selectionStart,it=h.element.dom.selectionEnd;return{fetchPattern:j,selectionStart:nt,selectionEnd:it}},NY=(h,j)=>{Ls(j.element,"id").each(nt=>Wo(h.element,"aria-activedescendant",nt))},SG=h=>{const j=(dt,yt)=>(yt.cut(),Mt.none()),nt=(dt,yt)=>{const vt={interactionEvent:yt.event,eventType:yt.event.raw.type};return ls(dt,wG,vt),Mt.some(!0)},it="searcher-events";return{dom:{tag:"div",classes:[EI]},components:[Tx.sketch({inputClasses:[CG,"tox-textfield"],inputAttributes:{...h.placeholder.map(dt=>({placeholder:h.i18n(dt)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:yr([Ks(it,[er(N1(),dt=>{El(dt,Z6)}),er(gv(),(dt,yt)=>{yt.event.raw.key==="Escape"&&yt.stop()})]),_s.config({mode:"special",onLeft:j,onRight:j,onSpace:j,onEnter:nt,onEscape:nt,onUp:nt,onDown:nt})]),eventOrder:{keydown:[it,_s.name()]}})]}},FO="tox-collection--results__js",K6=h=>{var j;return h.dom?{...h,dom:{...h.dom,attributes:{...(j=h.dom.attributes)!==null&&j!==void 0?j:{},id:Zr("aria-item-search-result-id"),"aria-selected":"false"}}}:h},zO=(h,j)=>nt=>{const it=Mo(nt,j);return Dn(it,dt=>({dom:h,components:dt}))},LY=h=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[QE.parts.items({preprocess:h!=="auto"?zO({tag:"div",classes:["tox-swatches__row"]},h):Qt})]}]}),EG=h=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[QE.parts.items({preprocess:zO({tag:"div",classes:["tox-collection__group"]},h)})]}),Y6=(h,j)=>{const nt=[];let it=[];return xo(h,(dt,yt)=>{j(dt,yt)?(it.length>0&&nt.push(it),it=[],(Ds(dt.dom,"innerHtml")||dt.components&&dt.components.length>0)&&it.push(dt)):it.push(dt)}),it.length>0&&nt.push(it),Dn(nt,dt=>({dom:{tag:"div",classes:["tox-collection__group"]},components:dt}))},BO=(h,j,nt)=>QE.parts.items({preprocess:it=>{const dt=Dn(it,nt);return h!=="auto"&&h>1?zO({tag:"div",classes:["tox-collection__group"]},h)(dt):Y6(dt,(yt,vt)=>j[vt].type==="separator")}}),X6=(h,j,nt=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(h===1?["tox-collection--list"]:["tox-collection--grid"])},components:[BO(h,j,Qt)]}),FY=(h,j,nt=!0)=>{const it=Zr("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",FO].concat(h===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:it}},components:[BO(h,j,K6)]}},zY=(h,j,nt)=>{const it=Zr("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(h===1?["tox-collection--list"]:["tox-collection--grid"])},components:[SG({i18n:Y1.translate,placeholder:nt.placeholder}),{dom:{tag:"div",classes:[...h===1?["tox-collection--list"]:["tox-collection--grid"],FO],attributes:{id:it}},components:[BO(h,j,K6)]}]}},BY=(h,j=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[QE.parts.items({preprocess:nt=>Y6(nt,(it,dt)=>h[dt].type==="separator")})]}),$O=h=>nr(h,j=>"icon"in j&&j.icon!==void 0),Pw=h=>(console.error(ux(h)),console.log(h),Mt.none()),AG=(h,j,nt,it,dt)=>{const yt=BY(nt);return{value:h,dom:yt.dom,components:yt.components,items:nt}},J6=(h,j,nt,it,dt)=>{const yt=()=>dt.menuType!=="searchable"?X6(it,nt):dt.searchMode.searchMode==="search-with-field"?zY(it,nt,dt.searchMode):FY(it,nt);if(dt.menuType==="color"){const vt=LY(it);return{value:h,dom:vt.dom,components:vt.components,items:nt}}else if(dt.menuType==="normal"&&it==="auto"){const vt=X6(it,nt);return{value:h,dom:vt.dom,components:vt.components,items:nt}}else if(dt.menuType==="normal"||dt.menuType==="searchable"){const vt=yt();return{value:h,dom:vt.dom,components:vt.components,items:nt}}else if(dt.menuType==="listpreview"&&it!=="auto"){const vt=EG(it);return{value:h,dom:vt.dom,components:vt.components,items:nt}}else return{value:h,dom:yG(j,it,dt.menuType),components:PY,items:nt}},lm=nm("type"),Q6=nm("name"),eF=nm("label"),tC=nm("text"),TG=nm("title"),IG=nm("icon"),cA=nm("value"),RG=ky("fetch"),$Y=ky("getSubmenuItems"),AI=ky("onAction"),MG=ky("onItemAction"),uA=Yu("onSetup",()=>Tt),GY=om("name"),nC=om("text"),PG=om("role"),i1=om("icon"),T5=om("tooltip"),tF=om("label"),nF=om("shortcut"),OG=hv("select"),TI=sm("active",!1),jY=sm("borderless",!1),H_=sm("enabled",!0),GO=sm("primary",!1),DG=h=>So("columns",h),oF=So("meta",{}),rF=Yu("onAction",Tt),SS=h=>Dp("type",h),jO=h=>mm("name","name",w_(()=>Zr(`${h}-name`)),Fr),HY=h=>mm("value","value",w_(()=>Zr(`${h}-value`)),jy()),NG=ws([lm,nC]),UY=h=>hp("separatormenuitem",NG,h),Tv=ws([SS("autocompleteitem"),TI,H_,oF,cA,nC,i1]),U_=h=>hp("Autocompleter.Separator",NG,h),LG=h=>hp("Autocompleter.Item",Tv,h),dA=[H_,T5,i1,nC,uA,Dp("context","mode:design")],sF=ws([lm,AI,nF].concat(dA)),I5=h=>hp("toolbarbutton",sF,h),HO=[TI].concat(dA),R5=ws(HO.concat([lm,AI,nF])),M5=h=>hp("ToggleButton",R5,h),UO=[Yu("predicate",pn),Em("scope","node",["node","editor"]),Em("position","selection",["node","selection","line"])],FG=dA.concat([SS("contextformbutton"),GO,AI,tu("original",Qt)]),P5=HO.concat([SS("contextformbutton"),GO,AI,tu("original",Qt)]),VY=dA.concat([SS("contextformbutton")]),WY=HO.concat([SS("contextformtogglebutton")]),Ix=Ip("type",{contextformbutton:FG,contextformtogglebutton:P5}),Iv=ws([SS("contextform"),Yu("initValue",Nt("")),tF,gy("commands",Ix),qv("launch",Ip("type",{contextformbutton:VY,contextformtogglebutton:WY}))].concat(UO)),O5=h=>hp("ContextForm",Iv,h),X1=ws([SS("contexttoolbar"),nm("items")].concat(UO)),qY=h=>hp("ContextToolbar",X1,h),_f=[lm,nm("src"),om("alt"),S_("classes",[],Fr)],ZY=ws(_f),fA=[lm,tC,GY,S_("classes",["tox-collection__item-label"],Fr)],D5=ws(fA),iF=gm(()=>lx("type",{cardimage:ZY,cardtext:D5,cardcontainer:aF})),aF=ws([lm,Dp("direction","horizontal"),Dp("align","left"),Dp("valign","middle"),gy("items",iF)]),ES=[H_,nC,PG,nF,HY("menuitem"),oF,Dp("context","mode:design")],KY=ws([lm,tF,gy("items",iF),uA,rF].concat(ES)),lF=h=>hp("cardmenuitem",KY,h),YY=ws([lm,TI,i1].concat(ES)),zG=h=>hp("choicemenuitem",YY,h),cF=[lm,nm("fancytype"),rF],uF=[So("initData",{})].concat(cF),BG=[hv("select"),Ot("initData",{},[sm("allowCustomColors",!0),Dp("storageKey","default"),s2("colors",jy())])].concat(cF),VO=Ip("fancytype",{inserttable:uF,colorswatch:BG}),XY=h=>hp("fancymenuitem",VO,h),JY=ws([lm,uA,rF,i1].concat(ES)),QY=h=>hp("menuitem",JY,h),eX=ws([lm,$Y,uA,i1].concat(ES)),tX=h=>hp("nestedmenuitem",eX,h),$G=ws([lm,i1,TI,uA,AI].concat(ES)),nX=h=>hp("togglemenuitem",$G,h),dF=(h,j,nt)=>{const it=a0(h.element,"."+nt);if(it.length>0){const dt=Cn(it,yt=>{const vt=yt.dom.getBoundingClientRect().top,St=it[0].dom.getBoundingClientRect().top;return Math.abs(vt-St)>j}).getOr(it.length);return Mt.some({numColumns:dt,numRows:Math.ceil(it.length/dt)})}else return Mt.none()},fF=(h,j)=>yr([Ks(h,j)]),II={namedEvents:fF,unnamedEvents:h=>fF(Zr("unnamed-events"),h)},N5=h=>h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),a1={item:h=>Os.config({disabled:h,disableClass:"tox-collection__item--state-disabled"}),button:h=>Os.config({disabled:h}),splitButton:h=>Os.config({disabled:h,disableClass:"tox-tbtn--disabled"}),toolbarButton:h=>Os.config({disabled:h,disableClass:"tox-tbtn--disabled",useNative:!1})},WO=(h,j)=>{const nt=h.getApi(j);return it=>{it(nt)}},AS=(h,j)=>rp(nt=>{WO(h,nt)(dt=>{const yt=h.onSetup(dt);Rt(yt)&&j.set(yt)})}),TS=(h,j)=>I_(nt=>WO(h,nt)(j.get())),jG="silver.uistate",L5=(h,j)=>{const it=h.mainUi.outerContainer.element,dt=[h.mainUi.mothership,...h.uiMotherships];j==="setDisabled"&&xo(dt,yt=>{yt.broadcastOn([Cx()],{target:it})}),xo(dt,yt=>{yt.broadcastOn([jG],j)})},HG=(h,j)=>{h.on("init SwitchMode",nt=>{L5(j,nt.type)}),h.on("NodeChange",nt=>{h.ui.isEnabled()?L5(j,nt.type):L5(j,"setDisabled")}),A$(h)&&h.mode.set("readonly")},Yp=h=>Ty.config({channels:{[jG]:{onReceive:(j,nt)=>{if(nt==="setDisabled"||nt==="setEnabled"){Os.set(j,nt==="setDisabled");return}const{contextType:it,shouldDisable:dt}=h();it==="mode"&&!qn(["switchmode","init"],nt)||Os.set(j,dt)}}}}),V_=(h,j)=>fx((nt,it)=>{WO(h,nt)(h.onAction),!h.triggersSubmenu&&j===j_.CLOSE_ON_EXECUTE&&(nt.getSystem().isConnected()&&El(nt,$m()),it.stop())}),rX={[s0()]:["disabling","alloy.base.behaviour","toggling","item-events"]},IS=Su,hA=(h,j,nt,it)=>{const dt=ds(Tt);return{type:"item",dom:j.dom,components:IS(j.optComponents),data:h.data,eventOrder:rX,hasSubmenu:h.triggersSubmenu,itemBehaviours:yr([Ks("item-events",[V_(h,nt),AS(h,dt),TS(h,dt)]),a1.item(()=>!h.enabled||it.checkUiComponentContext(h.context).shouldDisable),Yp(()=>it.checkUiComponentContext(h.context)),Us.config({})].concat(h.itemBehaviours))}},pA=h=>({value:h.value,meta:{text:h.text.getOr(""),...h.meta}}),hF=h=>{const j=oA.os.isMacOS()||oA.os.isiOS(),dt=j?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},yt=h.split("+"),vt=Dn(yt,St=>{const Dt=St.toLowerCase().trim();return Ds(dt,Dt)?dt[Dt]:St});return j?vt.join(""):vt.join("+")},qO=(h,j,nt=[PO])=>s1(h,{tag:"div",classes:nt},j),pF=h=>({dom:{tag:"div",classes:[V6]},components:[_p(Y1.translate(h))]}),gF=(h,j)=>({dom:{tag:"div",classes:j,innerHtml:h}}),sX=(h,j)=>({dom:{tag:"div",classes:[V6]},components:[{dom:{tag:h.tag,styles:h.styles},components:[_p(Y1.translate(j))]}]}),iX=h=>({dom:{tag:"div",classes:[cG]},components:[_p(hF(h))]}),UG=h=>qO("checkmark",h,[aA]),aX=h=>qO("chevron-right",h,[W6]),lX=h=>qO("chevron-down",h,[W6]),cX=(h,j)=>{const nt=h.direction==="vertical"?DO:uG,it=h.align==="left"?fG:dG;return{dom:{tag:"div",classes:[OO,nt,it,(()=>{switch(h.valign){case"top":return hG;case"middle":return q6;case"bottom":return pG}})()]},components:j}},uX=(h,j,nt)=>({dom:{tag:"img",classes:j,attributes:{src:h,alt:nt.getOr("")}}}),VG=(h,j,nt)=>{const it="custom",dt="remove",yt=h.value,vt=h.iconContent.map(Bt=>k5(Bt,j.icons,nt)),St=h.ariaLabel.map(Bt=>({"aria-label":j.translate(Bt),"data-mce-name":Bt})).getOr({});return{dom:(()=>{const Bt=MO,jt=vt.getOr(""),Zt={tag:"div",attributes:St,classes:[Bt]};return yt===it?{...Zt,tag:"button",classes:[...Zt.classes,"tox-swatches__picker-btn"],innerHtml:jt}:yt===dt?{...Zt,classes:[...Zt.classes,"tox-swatch--remove"],innerHtml:jt}:Ct(yt)?{...Zt,attributes:{...Zt.attributes,"data-mce-color":yt},styles:{"background-color":yt},innerHtml:jt}:Zt})(),optComponents:[]}},mF=h=>{const j=h.map(nt=>({attributes:{id:Zr("menu-item"),"aria-label":Y1.translate(nt)}})).getOr({});return{tag:"div",classes:[S5,EI],...j}},WG=(h,j,nt,it)=>{const dt={tag:"div",classes:[PO]},yt=an=>s1(an,dt,j.icons,it),vt=()=>Mt.some({dom:dt}),St=nt?h.iconContent.map(yt).orThunk(vt):Mt.none(),Dt=h.checkMark,Bt=Mt.from(h.meta).fold(()=>pF,an=>Ds(an,"style")?Mn(sX,an.style):pF),jt=h.htmlContent.fold(()=>h.textContent.map(Bt),an=>Mt.some(gF(an,[V6])));return{dom:mF(h.ariaLabel),optComponents:[St,jt,h.shortcutContent.map(iX),Dt,h.caret]}},F5=(h,j,nt,it=Mt.none())=>h.presets==="color"?VG(h,j,it):WG(h,j,nt,it),qG=(h,j,nt)=>or(h,"tooltipWorker").map(it=>[Np.config({lazySink:j.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:dt=>({type:"submenu",item:dt,overrides:{maxHeightFunction:yw}}),mode:"follow-highlight",onShow:(dt,yt)=>{it(vt=>{Np.setComponents(dt,[Y3({element:io.fromDom(vt)})])})}})]).getOrThunk(()=>nt.map(it=>[Np.config({...j.providers.tooltips.getConfig({tooltipText:it}),mode:"follow-highlight"})]).getOr([])),dX=h=>bS.DOM.encode(h),gA=(h,j)=>{const nt=Y1.translate(h),it=dX(nt);if(j.length>0){const dt=new RegExp(N5(j),"gi");return it.replace(dt,yt=>`<span class="tox-autocompleter-highlight">${yt}</span>`)}else return it},fX=(h,j,nt,it,dt,yt,vt,St=!0)=>{const Dt=F5({presets:it,textContent:Mt.none(),htmlContent:nt?h.text.map(jt=>gA(jt,j)):Mt.none(),ariaLabel:h.text,iconContent:h.icon,shortcutContent:Mt.none(),checkMark:Mt.none(),caret:Mt.none(),value:h.value},vt.providers,St,h.icon),Bt=h.text.filter(jt=>!nt&&jt!=="");return hA({context:"mode:design",data:pA(h),enabled:h.enabled,getApi:Nt({}),onAction:jt=>dt(h.value,h.meta),onSetup:Nt(Tt),triggersSubmenu:!1,itemBehaviours:qG(h,vt,Bt)},Dt,yt,vt.providers)},yF=(h,j)=>Dn(h,nt=>{switch(nt.type){case"cardcontainer":return cX(nt,yF(nt.items,j));case"cardimage":return uX(nt.src,nt.classes,nt.alt);case"cardtext":const dt=nt.name.exists(yt=>qn(j.cardText.highlightOn,yt))?Mt.from(j.cardText.matchText).getOr(""):"";return gF(gA(nt.text,dt),nt.classes)}}),ZG=(h,j,nt,it)=>{const dt=vt=>({isEnabled:()=>!Os.isDisabled(vt),setEnabled:St=>{Os.set(vt,!St),xo(a0(vt.element,"*"),Dt=>{vt.getSystem().getByDom(Dt).each(Bt=>{Bt.hasConfigured(Os)&&Os.set(Bt,!St)})})}}),yt={dom:mF(h.label),optComponents:[Mt.some({dom:{tag:"div",classes:[OO,uG]},components:yF(h.items,it)})]};return hA({context:"mode:design",data:pA({text:Mt.none(),...h}),enabled:h.enabled,getApi:dt,onAction:h.onAction,onSetup:h.onSetup,triggersSubmenu:!1,itemBehaviours:Mt.from(it.itemBehaviours).getOr([])},yt,j,nt.providers)},KG=(h,j,nt,it,dt,yt,vt,St=!0)=>{const Dt=Zt=>({setActive:an=>{_a.set(Zt,an)},isActive:()=>_a.isOn(Zt),isEnabled:()=>!Os.isDisabled(Zt),setEnabled:an=>Os.set(Zt,!an)}),Bt=F5({presets:nt,textContent:j?h.text:Mt.none(),htmlContent:Mt.none(),ariaLabel:h.text,iconContent:h.icon,shortcutContent:j?h.shortcut:Mt.none(),checkMark:j?Mt.some(UG(vt.icons)):Mt.none(),caret:Mt.none(),value:h.value},vt,St),jt=h.text.filter(Nt(!j)).map(Zt=>Np.config(vt.tooltips.getConfig({tooltipText:vt.translate(Zt)})));return Fu(hA({context:h.context,data:pA(h),enabled:h.enabled,getApi:Dt,onAction:Zt=>it(h.value),onSetup:Zt=>(Zt.setActive(dt),Tt),triggersSubmenu:!1,itemBehaviours:[...jt.toArray()]},Bt,yt,vt),{toggling:{toggleClass:U6,toggleOnExecute:!1,selected:h.active,exclusive:!0}})},bF=iI(aO(),lO()),ZO=h=>({value:YG(h)}),KO=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,YO=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,vF=h=>KO.test(h)||YO.test(h),YG=h=>Ar(h,"#").toUpperCase(),XG=h=>vF(h)?Mt.some({value:YG(h)}):Mt.none(),hX=h=>({value:h.value.replace(KO,(nt,it,dt,yt)=>it+it+dt+dt+yt+yt)}),pX=h=>{const j=hX(h),nt=YO.exec(j.value);return nt===null?["FFFFFF","FF","FF","FF"]:nt},_F=h=>{const j=h.toString(16);return(j.length===1?"0"+j:j).toUpperCase()},RI=h=>{const j=_F(h.red)+_F(h.green)+_F(h.blue);return ZO(j)},xF=Math.min,wF=Math.max,XO=Math.round,gX=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,mX=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,mA=(h,j,nt,it)=>({red:h,green:j,blue:nt,alpha:it}),CF=h=>{const j=parseInt(h,10);return j.toString()===h&&j>=0&&j<=255},JG=h=>{let j,nt,it;const dt=(h.hue||0)%360;let yt=h.saturation/100,vt=h.value/100;if(yt=wF(0,xF(yt,1)),vt=wF(0,xF(vt,1)),yt===0)return j=nt=it=XO(255*vt),mA(j,nt,it,1);const St=dt/60,Dt=vt*yt,Bt=Dt*(1-Math.abs(St%2-1)),jt=vt-Dt;switch(Math.floor(St)){case 0:j=Dt,nt=Bt,it=0;break;case 1:j=Bt,nt=Dt,it=0;break;case 2:j=0,nt=Dt,it=Bt;break;case 3:j=0,nt=Bt,it=Dt;break;case 4:j=Bt,nt=0,it=Dt;break;case 5:j=Dt,nt=0,it=Bt;break;default:j=nt=it=0}return j=XO(255*(j+jt)),nt=XO(255*(nt+jt)),it=XO(255*(it+jt)),mA(j,nt,it,1)},z5=h=>{const j=pX(h),nt=parseInt(j[1],16),it=parseInt(j[2],16),dt=parseInt(j[3],16);return mA(nt,it,dt,1)},QG=(h,j,nt,it)=>{const dt=parseInt(h,10),yt=parseInt(j,10),vt=parseInt(nt,10),St=parseFloat(it);return mA(dt,yt,vt,St)},kF=h=>{const j=gX.exec(h);if(j!==null)return Mt.some(QG(j[1],j[2],j[3],"1"));const nt=mX.exec(h);return nt!==null?Mt.some(QG(nt[1],nt[2],nt[3],nt[4])):Mt.none()},_j=h=>`rgba(${h.red},${h.green},${h.blue},${h.alpha})`,$j=mA(255,0,0,1),eH=h=>{h.dispatch("SkinLoaded")},yX=(h,j)=>{h.dispatch("SkinLoadError",j)},bX=h=>{h.dispatch("ResizeEditor")},SF=(h,j)=>{h.dispatch("ResizeContent",j)},vX=(h,j)=>{h.dispatch("ScrollContent",j)},tH=(h,j)=>{h.dispatch("TextColorChange",j)},JO=(h,j)=>{h.dispatch("AfterProgressState",{state:j})},nH=(h,j)=>h.dispatch("ResolveName",{name:j.nodeName.toLowerCase(),target:j}),_X=(h,j)=>{h.dispatch("ToggleToolbarDrawer",{state:j})},xX=(h,j)=>{h.dispatch("StylesTextUpdate",j)},wX=(h,j)=>{h.dispatch("AlignTextUpdate",j)},CX=(h,j)=>{h.dispatch("FontSizeTextUpdate",j)},kX=(h,j)=>{h.dispatch("FontSizeInputTextUpdate",j)},SX=(h,j)=>{h.dispatch("BlocksTextUpdate",j)},EF=(h,j)=>{h.dispatch("FontFamilyTextUpdate",j)},oH=h=>{h.dispatch("ToggleSidebar")},rH=h=>{h.dispatch("ToggleView")},QO=(h,j)=>()=>{h(),j()},sy=h=>yA(h,"NodeChange",j=>{j.setEnabled(h.selection.isEditable())}),EX=(h,j)=>nt=>{const it=Y0(),dt=()=>{nt.setActive(h.formatter.match(j));const yt=h.formatter.formatChanged(j,nt.setActive);it.set(yt)};return h.initialized?dt():h.once("init",dt),()=>{h.off("init",dt),it.clear()}},eD=(h,j)=>nt=>{const it=sy(h)(nt),dt=EX(h,j)(nt);return()=>{it(),dt()}},yA=(h,j,nt)=>it=>{const dt=()=>nt(it),yt=()=>{nt(it),h.on(j,dt)};return h.initialized?yt():h.once("init",yt),()=>{h.off("init",yt),h.off(j,dt)}},sH=h=>j=>()=>{h.undoManager.transact(()=>{h.focus(),h.execCommand("mceToggleFormat",!1,j.format)})},Rv=(h,j)=>()=>h.execCommand(j);var bA=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const iH={},AX=(h,j=10)=>{const nt=bA.getItem(h),it=_e(nt)?JSON.parse(nt):[],yt=(Bt=>j-Bt.length<0?Bt.slice(0,j):Bt)(it),vt=Bt=>{Tn(yt,Bt).each(St),yt.unshift(Bt),yt.length>j&&yt.pop(),bA.setItem(h,JSON.stringify(yt))},St=Bt=>{yt.splice(Bt,1)};return{add:vt,state:()=>yt.slice(0)}},aH=h=>or(iH,h).getOrThunk(()=>{const j=`tinymce-custom-colors-${h}`,nt=bA.getItem(j);if(wt(nt)){const dt=bA.getItem("tinymce-custom-colors");bA.setItem(j,Ct(dt)?dt:"[]")}const it=AX(j,10);return iH[h]=it,it}),TX=h=>Dn(aH(h).state(),j=>({type:"choiceitem",text:j,icon:"checkmark",value:j})),B5=(h,j)=>{aH(h).add(j)},vA=(h,j,nt)=>({hue:h,saturation:j,value:nt}),$5=h=>{let j=0,nt=0,it=0;const dt=h.red/255,yt=h.green/255,vt=h.blue/255,St=Math.min(dt,Math.min(yt,vt)),Dt=Math.max(dt,Math.max(yt,vt));if(St===Dt)return it=St,vA(0,0,it*100);const Bt=dt===St?yt-vt:vt===St?dt-yt:vt-dt;return j=dt===St?3:vt===St?1:5,j=60*(j-Bt/(Dt-St)),nt=(Dt-St)/Dt,it=Dt,vA(Math.round(j),Math.round(nt*100),Math.round(it*100))},lH=h=>$5(z5(h)),cH=h=>RI(JG(h)),IX=h=>XG(h).orThunk(()=>kF(h).map(RI)).getOrThunk(()=>{const j=document.createElement("canvas");j.height=1,j.width=1;const nt=j.getContext("2d");nt.clearRect(0,0,j.width,j.height),nt.fillStyle="#FFFFFF",nt.fillStyle=h,nt.fillRect(0,0,1,1);const it=nt.getImageData(0,0,1,1).data,dt=it[0],yt=it[1],vt=it[2],St=it[3];return RI(mA(dt,yt,vt,St))}),G5="forecolor",j5="hilitecolor",tD=5,uH=h=>dH(h.map((j,nt)=>nt%2===0?"#"+IX(j).value:j)),dH=h=>{const j=[];for(let nt=0;nt<h.length;nt+=2)j.push({text:h[nt+1],value:h[nt],icon:"checkmark",type:"choiceitem"});return j},Rx=h=>j=>j.options.get(h),AF="#000000",RX=h=>{const j=h.options.register,nt=yt=>Pt(yt,_e)?{value:uH(yt),valid:!0}:{valid:!1,message:"Must be an array of strings."},it=yt=>Pt(yt,_e)?{value:dH(yt),valid:!0}:{valid:!1,message:"Must be an array of strings."},dt=yt=>It(yt)&&yt>0?{value:yt,valid:!0}:{valid:!1,message:"Must be a positive number."};j("color_map",{processor:nt,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),j("color_map_raw",{processor:it}),j("color_map_background",{processor:nt}),j("color_map_foreground",{processor:nt}),j("color_cols",{processor:dt,default:TF(h)}),j("color_cols_foreground",{processor:dt,default:fH(h,G5)}),j("color_cols_background",{processor:dt,default:fH(h,j5)}),j("custom_colors",{processor:"boolean",default:!0}),j("color_default_foreground",{processor:"string",default:AF}),j("color_default_background",{processor:"string",default:AF})},nD=(h,j)=>j===G5&&h.options.isSet("color_map_foreground")?Rx("color_map_foreground")(h):j===j5&&h.options.isSet("color_map_background")?Rx("color_map_background")(h):h.options.isSet("color_map_raw")?Rx("color_map_raw")(h):Rx("color_map")(h),TF=(h,j="default")=>Math.max(tD,Math.ceil(Math.sqrt(nD(h,j).length))),fH=(h,j)=>{const nt=Rx("color_cols")(h),it=TF(h,j);return nt===TF(h)?it:nt},hH=(h,j="default")=>Math.round(j===G5?Rx("color_cols_foreground")(h):j===j5?Rx("color_cols_background")(h):Rx("color_cols")(h)),pH=Rx("custom_colors"),MX=Rx("color_default_foreground"),PX=Rx("color_default_background"),OX="rgba(0, 0, 0, 0)",DX=h=>kF(h).exists(j=>j.alpha!==0),gH=h=>Bm(h,j=>{if(Cs(j)){const nt=lu(j,"background-color");return es(DX(nt),nt)}else return Mt.none()}).getOr(OX),mH=(h,j)=>{const nt=io.fromDom(h.selection.getStart()),it=j==="hilitecolor"?gH(nt):lu(nt,"color");return kF(it).map(dt=>"#"+RI(dt).value)},NX=(h,j,nt)=>{h.undoManager.transact(()=>{h.focus(),h.formatter.apply(j,{value:nt}),h.nodeChanged()})},Ow=(h,j)=>{h.undoManager.transact(()=>{h.focus(),h.formatter.remove(j,{value:null},void 0,!0),h.nodeChanged()})},LX=h=>{h.addCommand("mceApplyTextcolor",(j,nt)=>{NX(h,j,nt)}),h.addCommand("mceRemoveTextcolor",j=>{Ow(h,j)})},yH=h=>{const j="choiceitem",nt={type:j,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return h?[nt,{type:j,text:"Custom color",icon:"color-picker",value:"custom"}]:[nt]},H5=(h,j,nt,it)=>{nt==="custom"?CH(h)(yt=>{yt.each(vt=>{B5(j,vt),h.execCommand("mceApplyTextcolor",j,vt),it(vt)})},mH(h,j).getOr(AF)):nt==="remove"?(it(""),h.execCommand("mceRemoveTextcolor",j)):(it(nt),h.execCommand("mceApplyTextcolor",j,nt))},Rm=(h,j,nt)=>h.concat(TX(j).concat(yH(nt))),bH=(h,j,nt)=>it=>{it(Rm(h,j,nt))},IF=(h,j,nt)=>{const it=j==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";h.setIconFill(it,nt)},vH=(h,j)=>{h.setTooltip(j)},_H=(h,j)=>nt=>{const it=mH(h,j);return au(it,nt.toUpperCase())},RF=(h,j,nt)=>{if($n(nt))return j==="forecolor"?"Text color":"Background color";const it=j==="forecolor"?"Text color {0}":"Background color {0}",dt=Rm(nD(h,j),j,!1),yt=yn(dt,vt=>vt.value===nt).getOr({text:""}).text;return h.translate([it,h.translate(yt)])},xH=(h,j,nt,it)=>{h.ui.registry.addSplitButton(j,{tooltip:RF(h,nt,it.get()),presets:"color",icon:j==="forecolor"?"text-color":"highlight-bg-color",select:_H(h,nt),columns:hH(h,nt),fetch:bH(nD(h,nt),nt,pH(h)),onAction:dt=>{H5(h,nt,it.get(),Tt)},onItemAction:(dt,yt)=>{H5(h,nt,yt,vt=>{it.set(vt),tH(h,{name:j,color:vt})})},onSetup:dt=>{IF(dt,j,it.get());const yt=vt=>{vt.name===j&&(IF(dt,vt.name,vt.color),vH(dt,RF(h,nt,vt.color)))};return h.on("TextColorChange",yt),QO(sy(h)(dt),()=>{h.off("TextColorChange",yt)})}})},wH=(h,j,nt,it,dt)=>{h.ui.registry.addNestedMenuItem(j,{text:it,icon:j==="forecolor"?"text-color":"highlight-bg-color",onSetup:yt=>(vH(yt,RF(h,nt,dt.get())),IF(yt,j,dt.get()),sy(h)(yt)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:_H(h,nt),initData:{storageKey:nt},onAction:yt=>{H5(h,nt,yt.value,vt=>{dt.set(vt),tH(h,{name:j,color:vt})})}}]})},CH=h=>(j,nt)=>{let it=!1;const dt=St=>{const Bt=St.getData().colorpicker;it?(j(Mt.from(Bt)),St.close()):h.windowManager.alert(h.translate(["Invalid hex color code: {0}",Bt]))},yt=(St,Dt)=>{Dt.name==="hex-valid"&&(it=Dt.value)},vt={colorpicker:nt};h.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:vt,onAction:yt,onSubmit:dt,onClose:Tt,onCancel:()=>{j(Mt.none())}})},FX=h=>{LX(h);const j=MX(h),nt=PX(h),it=ds(j),dt=ds(nt);xH(h,"forecolor","forecolor",it),xH(h,"backcolor","hilitecolor",dt),wH(h,"forecolor","forecolor","Text color",it),wH(h,"backcolor","hilitecolor","Background color",dt)},MF=(h,j,nt,it,dt,yt,vt,St)=>{const Dt=$O(j),jt=zX(j,nt,it,dt!=="color"?"normal":"color",yt,vt,St);return J6(h,Dt,jt,it,{menuType:dt})},zX=(h,j,nt,it,dt,yt,vt)=>Su(Dn(h,St=>St.type==="choiceitem"?zG(St).fold(Pw,Dt=>Mt.some(KG(Dt,nt===1,it,j,yt(Dt.value),dt,vt,$O(h)))):Mt.none())),oD=(h,j)=>{const nt=kS(j);return h===1?{mode:"menu",moveOnTab:!0}:h==="auto"?{mode:"grid",selector:"."+nt.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(j==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:dt=>j==="color"?ap(dt.element,"[aria-checked=true]"):Mt.none()}},BX=(h,j)=>h===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:h==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:j==="color"?".tox-swatches__row":".tox-collection__group",cell:j==="color"?`.${MO}`:`.${EI}`}},$X=(h,j)=>{const nt=GX(h,j),it=j.colorinput.getColorCols(h.initData.storageKey),dt="color",vt={...MF(Zr("menu-value"),nt,St=>{h.onAction({value:St})},it,dt,j_.CLOSE_ON_EXECUTE,h.select.getOr(pn),j.shared.providers),markers:kS(dt),movement:oD(it,dt),showMenuRole:!1};return{type:"widget",data:{value:Zr("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[bF.widget(QE.sketch(vt))]}},GX=(h,j)=>{const nt=h.initData.allowCustomColors&&j.colorinput.hasCustomColors();return h.initData.colors.fold(()=>Rm(j.colorinput.getColors(h.initData.storageKey),h.initData.storageKey,nt),it=>it.concat(yH(nt)))},kH=Zr("cell-over"),SH=Zr("cell-execute"),jX=h=>(j,nt)=>h.shared.providers.translate(["{0} columns, {1} rows",nt,j]),HX=(h,j,nt)=>{const it=vt=>ls(vt,kH,{row:h,col:j}),dt=vt=>ls(vt,SH,{row:h,col:j}),yt=(vt,St)=>{St.stop(),dt(vt)};return Tm({dom:{tag:"div",attributes:{role:"button","aria-label":nt}},behaviours:yr([Ks("insert-table-picker-cell",[er(J0(),Fs.focus),er(s0(),dt),er(l2(),yt),er(XA(),yt)]),_a.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Fs.config({onFocus:it})])})},UX=(h,j,nt)=>{const it=[];for(let dt=0;dt<j;dt++){const yt=[];for(let vt=0;vt<nt;vt++){const St=h(dt+1,vt+1);yt.push(HX(dt,vt,St))}it.push(yt)}return it},VX=(h,j,nt,it,dt)=>{for(let yt=0;yt<it;yt++)for(let vt=0;vt<dt;vt++)_a.set(h[yt][vt],yt<=j&&vt<=nt)},WX=h=>sn(h,j=>Dn(j,qy)),EH=(h,j)=>_p(`${j}x${h}`),qX={inserttable:(h,j)=>{const dt=jX(j),yt=UX(dt,10,10),vt=EH(0,0),St=iu({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[vt],behaviours:yr([Us.config({})])});return{type:"widget",data:{value:Zr("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[bF.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:WX(yt).concat(St.asSpec()),behaviours:yr([Ks("insert-table-picker",[rp(Dt=>{Us.set(St.get(Dt),[vt])}),oT(kH,(Dt,Bt,jt)=>{const{row:Zt,col:an}=jt.event;VX(yt,Zt,an,10,10),Us.set(St.get(Dt),[EH(Zt+1,an+1)])}),oT(SH,(Dt,Bt,jt)=>{const{row:Zt,col:an}=jt.event;El(Dt,$m()),h.onAction({numRows:Zt+1,numColumns:an+1})})]),_s.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:$X},AH=(h,j)=>or(qX,h.fancytype).map(nt=>nt(h,j)),ZX=(h,j,nt,it=!0,dt=!1)=>{const yt=dt?lX(nt.icons):aX(nt.icons),vt=Dt=>({isEnabled:()=>!Os.isDisabled(Dt),setEnabled:Bt=>Os.set(Dt,!Bt),setIconFill:(Bt,jt)=>{ap(Dt.element,`svg path[class="${Bt}"], rect[class="${Bt}"]`).each(Zt=>{Wo(Zt,"fill",jt)})},setTooltip:Bt=>{const jt=nt.translate(Bt);Wo(Dt.element,"aria-label",jt)}}),St=F5({presets:"normal",iconContent:h.icon,textContent:h.text,htmlContent:Mt.none(),ariaLabel:h.text,caret:Mt.some(yt),checkMark:Mt.none(),shortcutContent:h.shortcut},nt,it);return hA({context:h.context,data:pA(h),getApi:vt,enabled:h.enabled,onAction:Tt,onSetup:h.onSetup,triggersSubmenu:!0,itemBehaviours:[]},St,j,nt)},TH=(h,j,nt,it=!0)=>{const dt=vt=>({isEnabled:()=>!Os.isDisabled(vt),setEnabled:St=>Os.set(vt,!St)}),yt=F5({presets:"normal",iconContent:h.icon,textContent:h.text,htmlContent:Mt.none(),ariaLabel:h.text,caret:Mt.none(),checkMark:Mt.none(),shortcutContent:h.shortcut},nt,it);return hA({context:h.context,data:pA(h),getApi:dt,enabled:h.enabled,onAction:h.onAction,onSetup:h.onSetup,triggersSubmenu:!1,itemBehaviours:[]},yt,j,nt)},KX=h=>({type:"separator",dom:{tag:"div",classes:[EI,MY]},components:h.text.map(_p).toArray()}),YX=(h,j,nt,it=!0)=>{const dt=vt=>({setActive:St=>{_a.set(vt,St)},isActive:()=>_a.isOn(vt),isEnabled:()=>!Os.isDisabled(vt),setEnabled:St=>Os.set(vt,!St)}),yt=F5({iconContent:h.icon,textContent:h.text,htmlContent:Mt.none(),ariaLabel:h.text,checkMark:Mt.some(UG(nt.icons)),caret:Mt.none(),shortcutContent:h.shortcut,presets:"normal",meta:h.meta},nt,it);return Fu(hA({context:h.context,data:pA(h),enabled:h.enabled,getApi:dt,onAction:h.onAction,onSetup:h.onSetup,triggersSubmenu:!1,itemBehaviours:[]},yt,j,nt),{toggling:{toggleClass:U6,toggleOnExecute:!1,selected:h.active},role:h.role.getOrUndefined()})},XX=fX,PF=KX,JX=TH,QX=ZX,eJ=YX,tJ=AH,IH=ZG;var oJ=Object.freeze({__proto__:null,getCoupled:(h,j,nt,it)=>nt.getOrCreate(h,j,it),getExistingCoupled:(h,j,nt,it)=>nt.getExisting(h,j,it)}),RH=[nu("others",fv(Js.value,jy()))],rJ=Object.freeze({__proto__:null,init:()=>{const h={},j=(yt,vt)=>{if(Do(yt.others).length===0)throw new Error("Cannot find any known coupled components");return or(h,vt)},nt=(yt,vt,St)=>j(vt,St).getOrThunk(()=>{const Bt=or(vt.others,St).getOrDie("No information found for coupled component: "+St)(yt),jt=yt.getSystem().build(Bt);return h[St]=jt,jt}),it=(yt,vt,St)=>j(vt,St).orThunk(()=>(or(vt.others,St).getOrDie("No information found for coupled component: "+St),Mt.none())),dt=Nt({});return F0({readState:dt,getExisting:it,getOrCreate:nt})}});const Vp=Gm({fields:RH,name:"coupling",apis:oJ,state:rJ}),OF=h=>{let j=Mt.none(),nt=[];const it=Bt=>OF(jt=>{dt(Zt=>{jt(Bt(Zt))})}),dt=Bt=>{vt()?Dt(Bt):nt.push(Bt)},yt=Bt=>{vt()||(j=Mt.some(Bt),St(nt),nt=[])},vt=()=>j.isSome(),St=Bt=>{xo(Bt,Dt)},Dt=Bt=>{j.each(jt=>{setTimeout(()=>{Bt(jt)},0)})};return h(yt),{get:dt,map:it,isReady:vt}},sJ={nu:OF,pure:h=>OF(j=>{j(h)})},iJ=h=>{setTimeout(()=>{throw h},0)},MI=h=>{const j=Dt=>{h().then(Dt,iJ)};return{map:Dt=>MI(()=>h().then(Dt)),bind:Dt=>MI(()=>h().then(Bt=>Dt(Bt).toPromise())),anonBind:Dt=>MI(()=>h().then(()=>Dt.toPromise())),toLazy:()=>sJ.nu(j),toCached:()=>{let Dt=null;return MI(()=>(Dt===null&&(Dt=h()),Dt))},toPromise:h,get:j}},j0={nu:h=>MI(()=>new Promise(h)),pure:h=>MI(()=>Promise.resolve(h))},MH=Nt("sink"),PH=Nt(Jy({name:MH(),overrides:Nt({dom:{tag:"div"},behaviours:yr([c0.config({useFixed:hn})]),events:xu([f2(gv()),f2(vp()),f2(l2())])})})),DF=(h,j)=>{const nt=h.getHotspot(j).getOr(j),it="hotspot",dt=h.getAnchorOverrides();return h.layouts.fold(()=>({type:it,hotspot:nt,overrides:dt}),yt=>({type:it,hotspot:nt,overrides:dt,layouts:yt}))},aJ=(h,j,nt)=>{const it=h.fetch;return it(nt).map(j)},lJ=(h,j,nt,it,dt,yt,vt)=>{const St=aJ(h,j,it),Dt=OH(it,h);return St.map(Bt=>Bt.bind(jt=>{const Zt=jt.menus[jt.primary];return Mt.from(Zt).each(an=>{h.listRole.each(un=>{an.role=un})}),Mt.from(Mw.sketch({...yt.menu(),uid:mE(""),data:jt,highlightOnOpen:vt,onOpenMenu:(an,un)=>{const wn=Dt().getOrDie();c0.position(wn,un,{anchor:nt}),Zl.decloak(dt)},onOpenSubmenu:(an,un,wn)=>{const On=Dt().getOrDie();c0.position(On,wn,{anchor:{type:"submenu",item:un}}),Zl.decloak(dt)},onRepositionMenu:(an,un,wn)=>{const On=Dt().getOrDie();c0.position(On,un,{anchor:nt}),xo(wn,_o=>{c0.position(On,_o.triggeredMenu,{anchor:{type:"submenu",item:_o.triggeringItem}})})},onEscape:()=>(Fs.focus(it),Zl.close(dt),Mt.some(!0))}))}))},rD=(h,j,nt,it,dt,yt,vt)=>{const St=DF(h,nt);return lJ(h,j,St,nt,it,dt,vt).map(Bt=>(Bt.fold(()=>{Zl.isOpen(it)&&Zl.close(it)},jt=>{Zl.cloak(it),Zl.open(it,jt),yt(it)}),it))},cJ=(h,j,nt,it,dt,yt,vt)=>(Zl.close(it),j0.pure(it)),NF=(h,j,nt,it,dt,yt)=>{const vt=Vp.getCoupled(nt,"sandbox");return(Zl.isOpen(vt)?cJ:rD)(h,j,nt,vt,it,dt,yt)},LF=(h,j,nt)=>{const it=$l.getCurrent(j).getOr(j),dt=vn(h.element);nt?Jo(it.element,"min-width",dt+"px"):x1(it.element,dt)},OH=(h,j)=>h.getSystem().getByUid(j.uid+"-"+MH()).map(nt=>()=>Js.value(nt)).getOrThunk(()=>j.lazySink.fold(()=>()=>Js.error(new Error("No internal sink is specified, nor could an external sink be found")),nt=>()=>nt(h))),DH=h=>{Zl.getState(h).each(j=>{Mw.repositionMenus(j)})},FF=(h,j,nt)=>{const it=xE(),dt=(St,Dt)=>{const Bt=DF(h,j);it.link(j.element),h.matchWidth&&LF(Bt.hotspot,Dt,h.useMinWidth),h.onOpen(Bt,St,Dt),nt!==void 0&&nt.onOpen!==void 0&&nt.onOpen(St,Dt)},yt=(St,Dt)=>{it.unlink(j.element),vt().getOr(Dt).element.dom.dispatchEvent(new window.FocusEvent("focusout")),nt!==void 0&&nt.onClose!==void 0&&nt.onClose(St,Dt)},vt=OH(j,h);return{dom:{tag:"div",classes:h.sandboxClasses,attributes:{id:it.id}},behaviours:Cv.augment(h.sandboxBehaviours,[$r.config({store:{mode:"memory",initialValue:j}}),Zl.config({onOpen:dt,onClose:yt,isPartOf:(St,Dt,Bt)=>hw(Dt,Bt)||hw(j,Bt),getAttachPoint:()=>vt().getOrDie()}),$l.config({find:St=>Zl.getState(St).bind(Dt=>$l.getCurrent(Dt))}),Ty.config({channels:{...jE({isExtraPart:pn}),...HE({doReposition:DH})}})])}},zF=h=>{const j=Vp.getCoupled(h,"sandbox");DH(j)},sD=()=>[So("sandboxClasses",[]),Cv.field("sandboxBehaviours",[$l,Ty,Zl,$r])],uJ=Nt([Qo("dom"),Qo("fetch"),Hl("onOpen"),C0("onExecute"),So("getHotspot",Mt.some),So("getAnchorOverrides",Nt({})),bw(),Hm("dropdownBehaviours",[_a,Vp,_s,Fs]),Qo("toggleClass"),So("eventOrder",{}),Ql("lazySink"),So("matchWidth",!1),So("useMinWidth",!1),Ql("role"),Ql("listRole")].concat(sD())),dJ=Nt([kv({schema:[O_(),So("fakeFocus",!1)],name:"menu",defaults:h=>({onExecute:h.onExecute})}),PH()]),NH=(h,j,nt,it)=>{const dt=jt=>or(h.dom,"attributes").bind(Zt=>or(Zt,jt)),yt=jt=>{Zl.getState(jt).each(Zt=>{Mw.highlightPrimary(Zt)})},vt=(jt,Zt,an)=>NF(h,Qt,jt,it,Zt,an),St=jt=>{vt(jt,yt,Dy.HighlightMenuAndItem).get(Tt)},Dt={expand:jt=>{_a.isOn(jt)||vt(jt,Tt,Dy.HighlightNone).get(Tt)},open:jt=>{_a.isOn(jt)||vt(jt,Tt,Dy.HighlightMenuAndItem).get(Tt)},refetch:jt=>Vp.getExistingCoupled(jt,"sandbox").fold(()=>vt(jt,Tt,Dy.HighlightMenuAndItem).map(Tt),an=>rD(h,Qt,jt,an,it,Tt,Dy.HighlightMenuAndItem).map(Tt)),isOpen:_a.isOn,close:jt=>{_a.isOn(jt)&&vt(jt,Tt,Dy.HighlightMenuAndItem).get(Tt)},repositionMenus:jt=>{_a.isOn(jt)&&zF(jt)}},Bt=(jt,Zt)=>(ow(jt),Mt.some(!0));return{uid:h.uid,dom:h.dom,components:j,behaviours:Um(h.dropdownBehaviours,[_a.config({toggleClass:h.toggleClass,aria:{mode:"expanded"}}),Vp.config({others:{sandbox:jt=>FF(h,jt,{onOpen:()=>_a.on(jt),onClose:()=>_a.off(jt)})}}),_s.config({mode:"special",onSpace:Bt,onEnter:Bt,onDown:(jt,Zt)=>{if(l1.isOpen(jt)){const an=Vp.getCoupled(jt,"sandbox");yt(an)}else l1.open(jt);return Mt.some(!0)},onEscape:(jt,Zt)=>l1.isOpen(jt)?(l1.close(jt),Mt.some(!0)):Mt.none()}),Fs.config({})]),events:l5(Mt.some(St)),eventOrder:{...h.eventOrder,[s0()]:["disabling","toggling","alloy.base.behaviour"]},apis:Dt,domModification:{attributes:{"aria-haspopup":h.listRole.getOr("true"),...h.role.fold(()=>({}),jt=>({role:jt})),...h.dom.tag==="button"?{type:dt("type").getOr("button")}:{}}}}},l1=g0({name:"Dropdown",configFields:uJ(),partFields:dJ(),factory:NH,apis:{open:(h,j)=>h.open(j),refetch:(h,j)=>h.refetch(j),expand:(h,j)=>h.expand(j),close:(h,j)=>h.close(j),isOpen:(h,j)=>h.isOpen(j),repositionMenus:(h,j)=>h.repositionMenus(j)}}),fJ=h=>{switch(h.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:h}}},hJ=h=>{const j=$r.getValue(h),nt=LO(h).map(A5);l1.refetch(j).get(()=>{const it=Vp.getCoupled(j,"sandbox");nt.each(dt=>LO(it).each(yt=>DY(yt,dt)))})},pJ=(h,j)=>{gJ(h).each(nt=>{k3(h,nt.element,j.event.eventType,j.event.interactionEvent)})},gJ=h=>Zl.getState(h).bind(Er.getHighlighted).bind(Er.getHighlighted),mJ=h=>ty(h.element,FO)?Mt.some(h.element):ap(h.element,"."+FO),U5=(h,j,nt)=>{kG(h).each(it=>{NY(it,nt),mJ(j).each(yt=>{Ls(yt,"id").each(vt=>Wo(it.element,"aria-controls",vt))})}),Wo(nt.element,"aria-selected","true")},yJ=(h,j,nt)=>{Wo(nt.element,"aria-selected","false")},iD=h=>{kG(h).each(j=>Fs.focus(j))},bJ=h=>Vp.getExistingCoupled(h,"sandbox").bind(LO).map(A5).map(nt=>nt.fetchPattern).getOr("");var aD;(function(h){h[h.ContentFocus=0]="ContentFocus",h[h.UiFocus=1]="UiFocus"})(aD||(aD={}));const vJ=(h,j,nt,it,dt)=>{const yt=nt.shared.providers,vt=St=>dt?{...St,shortcut:Mt.none(),icon:St.text.isSome()?Mt.none():St.icon}:St;switch(h.type){case"menuitem":return QY(h).fold(Pw,St=>Mt.some(JX(vt(St),j,yt,it)));case"nestedmenuitem":return tX(h).fold(Pw,St=>Mt.some(QX(vt(St),j,yt,it,dt)));case"togglemenuitem":return nX(h).fold(Pw,St=>Mt.some(eJ(vt(St),j,yt,it)));case"separator":return UY(h).fold(Pw,St=>Mt.some(PF(St)));case"fancymenuitem":return XY(h).fold(Pw,St=>tJ(St,nt));default:return console.error("Unknown item in general menu",h),Mt.none()}},_J=(h,j,nt,it,dt,yt,vt)=>{const St=it===1,Dt=!St||$O(h);return Su(Dn(h,Bt=>{switch(Bt.type){case"separator":return U_(Bt).fold(Pw,jt=>Mt.some(PF(jt)));case"cardmenuitem":return lF(Bt).fold(Pw,jt=>Mt.some(IH({...jt,onAction:Zt=>{jt.onAction(Zt),nt(jt.value,jt.meta)}},dt,yt,{itemBehaviours:qG(jt.meta,yt,Mt.none()),cardText:{matchText:j,highlightOn:vt}})));case"autocompleteitem":default:return LG(Bt).fold(Pw,jt=>Mt.some(XX(jt,j,St,"normal",nt,dt,yt,Dt)))}}))},xJ=(h,j,nt,it,dt,yt)=>{const vt=$O(j),St=Su(Dn(j,jt=>{const Zt=un=>dt?!Ds(un,"text"):vt,an=un=>vJ(un,nt,it,Zt(un),dt);return jt.type==="nestedmenuitem"&&jt.getSubmenuItems().length<=0?an({...jt,enabled:!1}):an(jt)})),Dt=fJ(yt);return(dt?AG:J6)(h,vt,St,1,Dt)},PI=h=>Mw.singleData(h.value,h),OI=(h,j,nt,it)=>{const dt=oD(j,it),yt=kS(it);return{data:PI({...h,movement:dt,menuBehaviours:II.unnamedEvents(j!=="auto"?[]:[rp((vt,St)=>{dF(vt,4,yt.item).each(({numColumns:Dt,numRows:Bt})=>{_s.setGridSize(vt,Bt,Dt)})})])}),menu:{markers:kS(it),fakeFocus:nt===aD.ContentFocus}}},LH=h=>zT.create(io.fromDom(h.startContainer),h.startOffset,io.fromDom(h.endContainer),h.endOffset),CJ={register:(h,j)=>{const nt=Zr("autocompleter"),it=ds(!1),dt=ds(!1),yt=Xl(),vt=Tm(Cp.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:nt}},components:[],fireDismissalEventInstead:{},inlineBehaviours:yr([Ks("dismissAutocompleter",[er(Wy(),()=>Zt()),er(C3(),(Un,go)=>{Ls(go.event.target,"id").each(bo=>Wo(io.fromDom(h.getBody()),"aria-activedescendant",bo))})])]),lazySink:j.getSink})),St=()=>Cp.isOpen(vt),Dt=dt.get,Bt=()=>{if(St()){Cp.hide(vt),h.dom.remove(nt,!1);const Un=io.fromDom(h.getBody());Ls(Un,"aria-owns").filter(go=>go===nt).each(()=>{Yt(Un,"aria-owns"),Yt(Un,"aria-activedescendant")})}},jt=()=>Cp.getContent(vt).bind(Un=>Qn(Un.components(),0)),Zt=()=>h.execCommand("mceAutocompleterClose"),an=Un=>{const go=Co(Un,bo=>Mt.from(bo.columns)).getOr(1);return sn(Un,bo=>{const Bo=bo.items;return _J(Bo,bo.matchText,(Go,Sr)=>{const Vr={hide:()=>Zt(),reload:Yo=>{Bt(),h.execCommand("mceAutocompleterReload",!1,{fetchOptions:Yo})}};h.execCommand("mceAutocompleterRefreshActiveRange"),yt.get().each(Yo=>{it.set(!0),bo.onAction(Vr,Yo,Go,Sr),it.set(!1)})},go,j_.BUBBLE_TO_SANDBOX,j,bo.highlightOn)})},un=(Un,go)=>{const bo=Co(Un,Bo=>Mt.from(Bo.columns)).getOr(1);Cp.showMenuAt(vt,{anchor:{type:"selection",getSelection:()=>yt.get().map(LH),root:io.fromDom(h.getBody())}},OI(J6("autocompleter-value",!0,go,bo,{menuType:"normal"}),bo,aD.ContentFocus,"normal")),jt().each(Er.highlightFirst)},wn=Un=>{const go=an(Un);go.length>0?(un(Un,go),Wo(io.fromDom(h.getBody()),"aria-owns",nt),h.inline||On()):Bt()},On=()=>{h.dom.get(nt)&&h.dom.remove(nt,!1);const Un=h.getDoc().documentElement,go=h.selection.getNode(),bo=fE(vt.element);Xs(bo,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${go.offsetTop}px`,left:`${go.offsetLeft}px`}),h.dom.add(Un,bo.dom),ap(bo,'[role="menu"]').each(Bo=>{js(Bo,"position"),js(Bo,"max-height")})};h.on("AutocompleterStart",({lookupData:Un})=>{dt.set(!0),it.set(!1),wn(Un)}),h.on("AutocompleterUpdate",({lookupData:Un})=>wn(Un)),h.on("AutocompleterUpdateActiveRange",({range:Un})=>yt.set(Un)),h.on("AutocompleterEnd",()=>{Bt(),dt.set(!1),it.set(!1),yt.clear()});const _o={cancelIfNecessary:Zt,isMenuOpen:St,isActive:Dt,isProcessingAction:it.get,getMenu:jt};RY.setup(_o,h)}},V5=(h,j,nt)=>D_(h,j,nt).isSome(),FH=(h,j)=>{let nt=null;return{cancel:()=>{nt!==null&&(clearTimeout(nt),nt=null)},schedule:(...yt)=>{nt=setTimeout(()=>{h.apply(null,yt),nt=null},j)}}},zH=5,kJ=400,BH=h=>{const j=h.raw;return j.touches===void 0||j.touches.length!==1?Mt.none():Mt.some(j.touches[0])},SJ=(h,j)=>{const nt=Math.abs(h.clientX-j.x),it=Math.abs(h.clientY-j.y);return nt>zH||it>zH},EJ=h=>{const j=Xl(),nt=ds(!1),it=FH(Bt=>{h.triggerEvent(tw(),Bt),nt.set(!0)},kJ),dt=Bt=>(BH(Bt).each(jt=>{it.cancel();const Zt={x:jt.clientX,y:jt.clientY,target:Bt.target};it.schedule(Bt),nt.set(!1),j.set(Zt)}),Mt.none()),yt=Bt=>(it.cancel(),BH(Bt).each(jt=>{j.on(Zt=>{SJ(jt,Zt)&&j.clear()})}),Mt.none()),vt=Bt=>{it.cancel();const jt=Zt=>Yl(Zt.target,Bt.target);return j.get().filter(jt).map(Zt=>nt.get()?(Bt.prevent(),!1):h.triggerEvent(XA(),Bt))},St=Qs([{key:pv(),value:dt},{key:A_(),value:yt},{key:Wl(),value:vt}]);return{fireIfReady:(Bt,jt)=>or(St,jt).bind(Zt=>Zt(Bt))}},AJ=h=>h.raw.which===$s[0]&&!qn(["input","textarea"],eu(h.target))&&!V5(h.target,'[contenteditable="true"]'),TJ=(h,j)=>{const nt={stopBackspace:!0,...j},it=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],dt=EJ(nt),yt=Dn(it.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),un=>ny(h,un,wn=>{dt.fireIfReady(wn,un).each(_o=>{_o&&wn.kill()}),nt.triggerEvent(un,wn)&&wn.kill()})),vt=Xl(),St=ny(h,"paste",un=>{dt.fireIfReady(un,"paste").each(On=>{On&&un.kill()}),nt.triggerEvent("paste",un)&&un.kill(),vt.set(setTimeout(()=>{nt.triggerEvent(rE(),un)},0))}),Dt=ny(h,"keydown",un=>{nt.triggerEvent("keydown",un)?un.kill():nt.stopBackspace&&AJ(un)&&un.prevent()}),Bt=ny(h,"focusin",un=>{nt.triggerEvent("focusin",un)&&un.kill()}),jt=Xl(),Zt=ny(h,"focusout",un=>{nt.triggerEvent("focusout",un)&&un.kill(),jt.set(setTimeout(()=>{nt.triggerEvent(c2(),un)},0))});return{unbind:()=>{xo(yt,un=>{un.unbind()}),Dt.unbind(),Bt.unbind(),Zt.unbind(),St.unbind(),vt.on(clearTimeout),jt.on(clearTimeout)}}},$H=(h,j)=>{const nt=or(h,"target").getOr(j);return ds(nt)},GH=(h,j)=>{const nt=ds(!1),it=ds(!1);return{stop:()=>{nt.set(!0)},cut:()=>{it.set(!0)},isStopped:nt.get,isCut:it.get,event:h,setSource:j.set,getSource:j.get}},DI=h=>{const j=ds(!1);return{stop:()=>{j.set(!0)},cut:Tt,isStopped:j.get,isCut:pn,event:h,setSource:Wt("Cannot set source of a broadcasted event"),getSource:Wt("Cannot get source of a broadcasted event")}},Mx=nn.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),jH=(h,j,nt,it,dt,yt)=>{const vt=h(j,it),St=GH(nt,dt);return vt.fold(()=>(yt.logEventNoHandlers(j,it),Mx.complete()),Dt=>{const Bt=Dt.descHandler;return dw(Bt)(St),St.isStopped()?(yt.logEventStopped(j,Dt.element,Bt.purpose),Mx.stopped()):St.isCut()?(yt.logEventCut(j,Dt.element,Bt.purpose),Mx.complete()):_g(Dt.element).fold(()=>(yt.logNoParent(j,Dt.element,Bt.purpose),Mx.complete()),Zt=>(yt.logEventResponse(j,Dt.element,Bt.purpose),Mx.resume(Zt)))})},BF=(h,j,nt,it,dt,yt)=>jH(h,j,nt,it,dt,yt).fold(hn,vt=>BF(h,j,nt,vt,dt,yt),pn),HH=(h,j,nt,it,dt)=>{const yt=$H(nt,it);return jH(h,j,nt,it,yt,dt)},lD=(h,j,nt)=>{const it=DI(j);return xo(h,dt=>{const yt=dt.descHandler;dw(yt)(it)}),it.isStopped()},IJ=(h,j,nt,it)=>NI(h,j,nt,nt.target,it),NI=(h,j,nt,it,dt)=>{const yt=$H(nt,it);return BF(h,j,nt,it,yt,dt)},W5=(h,j)=>({element:h,descHandler:j}),RJ=(h,j)=>({id:h,descHandler:j}),MJ=()=>{const h={},j=(vt,St,Dt)=>{ar(Dt,(Bt,jt)=>{const Zt=h[jt]!==void 0?h[jt]:{};Zt[St]=VC(Bt,vt),h[jt]=Zt})},nt=(vt,St)=>HC(St).bind(Dt=>or(vt,Dt)).map(Dt=>W5(St,Dt));return{registerId:j,unregisterId:vt=>{ar(h,(St,Dt)=>{Ds(St,vt)&&delete St[vt]})},filterByType:vt=>or(h,vt).map(St=>Cl(St,(Dt,Bt)=>RJ(Bt,Dt))).getOr([]),find:(vt,St,Dt)=>or(h,St).bind(Bt=>Bm(Dt,jt=>nt(Bt,jt),vt))}},PJ=()=>{const h=MJ(),j={},nt=Bt=>{const jt=Bt.element;return HC(jt).getOrThunk(()=>j3("uid-",Bt.element))},it=(Bt,jt)=>{const Zt=j[jt];if(Zt===Bt)yt(Bt);else throw new Error('The tagId "'+jt+'" is already used by: '+cw(Zt.element)+`
Cannot use it for: `+cw(Bt.element)+`
The conflicting element is`+(zn(Zt.element)?" ":" not ")+"already in the DOM")},dt=Bt=>{const jt=nt(Bt);hu(j,jt)&&it(Bt,jt);const Zt=[Bt];h.registerId(Zt,jt,Bt.events),j[jt]=Bt},yt=Bt=>{HC(Bt.element).each(jt=>{delete j[jt],h.unregisterId(jt)})};return{find:(Bt,jt,Zt)=>h.find(Bt,jt,Zt),filter:Bt=>h.filterByType(Bt),register:dt,unregister:yt,getById:Bt=>or(j,Bt)}},Px=Py({name:"Container",factory:h=>{const{attributes:j,...nt}=h.dom;return{uid:h.uid,dom:{tag:"div",attributes:{role:"presentation",...j},...nt},components:h.components,behaviours:eI(h.containerBehaviours),events:h.events,domModification:h.domModification,eventOrder:h.eventOrder}},configFields:[So("components",[]),Hm("containerBehaviours",[]),So("events",{}),So("domModification",{}),So("eventOrder",{})]}),$F=h=>{const j=Un=>_g(h.element).fold(hn,go=>Yl(Un,go)),nt=PJ(),it=(Un,go)=>nt.find(j,Un,go),dt=TJ(h.element,{triggerEvent:(Un,go)=>G3(Un,go.target,bo=>IJ(it,Un,go,bo))}),yt={debugInfo:Nt("real"),triggerEvent:(Un,go,bo)=>{G3(Un,go,Bo=>NI(it,Un,bo,go,Bo))},triggerFocus:(Un,go)=>{HC(Un).fold(()=>{_v(Un)},bo=>{G3(L1(),Un,Bo=>(HH(it,L1(),{originator:go,kill:Tt,prevent:Tt,target:Un},Un,Bo),!1))})},triggerEscape:(Un,go)=>{yt.triggerEvent("keydown",Un.element,go.event)},getByUid:Un=>On(Un),getByDom:Un=>_o(Un),build:Tm,buildOrPatch:X3,addToGui:Un=>{Dt(Un)},removeFromGui:Un=>{Bt(Un)},addToWorld:Un=>{vt(Un)},removeFromWorld:Un=>{St(Un)},broadcast:Un=>{an(Un)},broadcastOn:(Un,go)=>{un(Un,go)},broadcastEvent:(Un,go)=>{wn(Un,go)},isConnected:hn},vt=Un=>{Un.connect(yt),Rl(Un.element)||(nt.register(Un),xo(Un.components(),vt),yt.triggerEvent(QA(),Un.element,{target:Un.element}))},St=Un=>{Rl(Un.element)||(xo(Un.components(),St),nt.unregister(Un)),Un.disconnect()},Dt=Un=>{xx(h,Un)},Bt=Un=>{wx(Un)},jt=()=>{dt.unbind(),y0(h.element)},Zt=Un=>{const go=nt.filter(F1());xo(go,bo=>{const Bo=bo.descHandler;dw(Bo)(Un)})},an=Un=>{Zt({universal:!0,data:Un})},un=(Un,go)=>{Zt({universal:!1,channels:Un,data:go})},wn=(Un,go)=>{const bo=nt.filter(Un);return lD(bo,go)},On=Un=>nt.getById(Un).fold(()=>Js.error(new Error('Could not find component with uid: "'+Un+'" in system.')),Js.value),_o=Un=>{const go=HC(Un).getOr("not found");return On(go)};return vt(h),{root:h,element:h.element,destroy:jt,add:Dt,remove:Bt,getByUid:On,getByDom:_o,addToWorld:vt,removeFromWorld:St,broadcast:an,broadcastOn:un,broadcastEvent:wn}},cD=(h,j)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Dn(h.items,j.interpreter)}),OJ=Nt([So("prefix","form-field"),Hm("fieldBehaviours",[$l,$r])]),GF=Nt([Jy({schema:[Qo("dom")],name:"label"}),Jy({factory:{sketch:h=>({uid:h.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:h.text}})},schema:[Qo("text")],name:"aria-descriptor"}),S0({factory:{sketch:h=>{const j=Jr(h,["factory"]);return h.factory.sketch(j)}},schema:[Qo("factory")],name:"field"})]),DJ=(h,j,nt,it)=>{const dt=Um(h.fieldBehaviours,[$l.config({find:St=>zu(St,h,"field")}),$r.config({store:{mode:"manual",getValue:St=>$l.getCurrent(St).bind($r.getValue),setValue:(St,Dt)=>{$l.getCurrent(St).each(Bt=>{$r.setValue(Bt,Dt)})}}})]),yt=xu([rp((St,Dt)=>{const Bt=W1(St,h,["label","field","aria-descriptor"]);Bt.field().each(jt=>{const Zt=Zr(h.prefix);Bt.label().each(an=>{Wo(an.element,"for",Zt),Wo(jt.element,"id",Zt)}),Bt["aria-descriptor"]().each(an=>{const un=Zr(h.prefix);Wo(an.element,"id",un),Wo(jt.element,"aria-describedby",un)})})})]),vt={getField:St=>zu(St,h,"field"),getLabel:St=>zu(St,h,"label")};return{uid:h.uid,dom:h.dom,components:j,behaviours:dt,events:yt,apis:vt}},bu=g0({name:"FormField",configFields:OJ(),partFields:GF(),factory:DJ,apis:{getField:(h,j)=>h.getField(j),getLabel:(h,j)=>h.getLabel(j)}});var NJ=tinymce.util.Tools.resolve("tinymce.html.Entities");const LI=(h,j,nt,it)=>{const dt=FJ(h,j,nt,it);return bu.sketch(dt)},LJ=(h,j)=>LI(h,j,[],[]),FJ=(h,j,nt,it)=>({dom:jF(nt),components:h.toArray().concat([j]),fieldBehaviours:yr(it)}),zJ=()=>jF([]),jF=h=>({tag:"div",classes:["tox-form__group"].concat(h)}),RS=(h,j)=>bu.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[_p(j.translate(h))]}),_b=Zr("form-component-change"),q5=Zr("form-close"),MS=Zr("form-cancel"),Dw=Zr("form-action"),FI=Zr("form-submit"),uD=Zr("form-block"),HF=Zr("form-unblock"),UH=Zr("form-tabchange"),VH=Zr("form-resize"),BJ=(h,j,nt)=>{const it=h.label.map(un=>RS(un,j)),dt=j.icons(),yt=un=>{var wn;return(wn=dt[un])!==null&&wn!==void 0?wn:un},vt=un=>(wn,On)=>{D_(On.event.target,"[data-collection-item-value]").each(_o=>{un(wn,On,_o,Xr(_o,"data-collection-item-value"))})},St=(un,wn)=>{const _o=j.checkUiComponentContext("mode:design").shouldDisable||j.isDisabled()?" tox-collection__item--state-disabled":"",Un=Dn(wn,Bo=>{const Go=Y1.translate(Bo.text),Sr=h.columns===1?`<div class="tox-collection__item-label">${Go}</div>`:"",Vr=`<div class="tox-collection__item-icon">${yt(Bo.icon)}</div>`,Yo={_:" "," - ":" ","-":" "},qr=Go.replace(/\_| \- |\-/g,Lr=>Yo[Lr]);return`<div data-mce-tooltip="${qr}" class="tox-collection__item${_o}" tabindex="-1" data-collection-item-value="${NJ.encodeAllRaw(Bo.value)}" aria-label="${qr}">${Vr}${Sr}</div>`}),go=h.columns!=="auto"&&h.columns>1?Mo(Un,h.columns):[Un],bo=Dn(go,Bo=>`<div class="tox-collection__group">${Bo.join("")}</div>`);Ey(un.element,bo.join(""))},Dt=vt((un,wn,On,_o)=>{wn.stop(),j.checkUiComponentContext("mode:design").shouldDisable||j.isDisabled()||ls(un,Dw,{name:h.name,value:_o})}),Bt=[er(J0(),vt((un,wn,On)=>{_v(On,!0)})),er(l2(),Dt),er(XA(),Dt),er(Q0(),vt((un,wn,On)=>{ap(un.element,"."+lA).each(_o=>{wu(_o,lA)}),Kp(On,lA)})),er(H4(),vt(un=>{ap(un.element,"."+lA).each(wn=>{wu(wn,lA),KC(wn)})})),fx(vt((un,wn,On,_o)=>{ls(un,Dw,{name:h.name,value:_o})}))],jt=(un,wn)=>Dn(a0(un.element,".tox-collection__item"),wn),Zt=bu.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(h.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Qt},behaviours:yr([Os.config({disabled:()=>j.checkUiComponentContext(h.context).shouldDisable,onDisabled:un=>{jt(un,wn=>{Kp(wn,"tox-collection__item--state-disabled"),Wo(wn,"aria-disabled",!0)})},onEnabled:un=>{jt(un,wn=>{wu(wn,"tox-collection__item--state-disabled"),Yt(wn,"aria-disabled")})}}),Yp(()=>j.checkUiComponentContext(h.context)),Us.config({}),Np.config({...j.tooltips.getConfig({tooltipText:"",onShow:un=>{ap(un.element,"."+lA+"[data-mce-tooltip]").each(wn=>{Ls(wn,"data-mce-tooltip").each(On=>{Np.setComponents(un,j.tooltips.getComponents({tooltipText:On}))})})}}),mode:"children-keyboard-focus",anchor:un=>({type:"node",node:ap(un.element,"."+lA).orThunk(()=>RM(".tox-collection__item")),root:un.element,layouts:{onLtr:Nt([im,yu,vm,i0,_m,xm]),onRtl:Nt([im,yu,vm,i0,_m,xm])},bubble:n1(0,-2,{})})}),$r.config({store:{mode:"memory",initialValue:nt.getOr([])},onSetValue:(un,wn)=>{St(un,wn),h.columns==="auto"&&dF(un,5,"tox-collection__item").each(({numRows:On,numColumns:_o})=>{_s.setGridSize(un,On,_o)}),El(un,VH)}}),lp.config({}),_s.config(BX(h.columns,"normal")),Ks("collection-events",Bt)]),eventOrder:{[s0()]:["disabling","alloy.base.behaviour","collection-events"],[Q0()]:["collection-events","tooltipping"]}});return LI(it,Zt,["tox-form__group--collection"],[])},$J=["input","textarea"],UF=h=>{const j=eu(h);return qn($J,j)},_A=(h,j)=>{const nt=j.getRoot(h).getOr(h.element);wu(nt,j.invalidClass),j.notify.each(it=>{UF(h.element)&&Wo(h.element,"aria-invalid",!1),it.getContainer(h).each(dt=>{Ey(dt,it.validHtml)}),it.onValid(h)})},WH=(h,j,nt,it)=>{const dt=j.getRoot(h).getOr(h.element);Kp(dt,j.invalidClass),j.notify.each(yt=>{UF(h.element)&&Wo(h.element,"aria-invalid",!0),yt.getContainer(h).each(vt=>{Ey(vt,it)}),yt.onInvalid(h,it)})},qH=(h,j,nt)=>j.validator.fold(()=>j0.pure(Js.value(!0)),it=>it.validate(h)),VF=(h,j,nt)=>(j.notify.each(it=>{it.onValidate(h)}),qH(h,j).map(it=>h.getSystem().isConnected()?it.fold(dt=>(WH(h,j,nt,dt),Js.error(dt)),dt=>(_A(h,j),Js.value(dt))):Js.error("No longer in system")));var J1=Object.freeze({__proto__:null,markValid:_A,markInvalid:WH,query:qH,run:VF,isInvalid:(h,j)=>{const nt=j.getRoot(h).getOr(h.element);return ty(nt,j.invalidClass)}}),KH=Object.freeze({__proto__:null,events:(h,j)=>h.validator.map(nt=>xu([er(nt.onEvent,it=>{VF(it,h,j).get(Qt)})].concat(nt.validateOnLoad?[rp(it=>{VF(it,h,j).get(Tt)})]:[]))).getOr({})}),GJ=[Qo("invalidClass"),So("getRoot",Mt.none),ym("notify",[So("aria","alert"),So("getContainer",Mt.none),So("validHtml",""),Hl("onValid"),Hl("onInvalid"),Hl("onValidate")]),ym("validator",[Qo("validate"),So("onEvent","input"),So("validateOnLoad",!0)])];const Nw=Gm({fields:GJ,name:"invalidating",active:KH,apis:J1,extra:{validation:h=>j=>{const nt=$r.getValue(j);return j0.pure(h(nt))}}});var YH=Object.freeze({__proto__:null,events:()=>xu([S3(aL(),hn)]),exhibit:()=>ey({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const zI=Gm({fields:[],name:"unselecting",active:YH}),jJ=(h,j)=>l1.sketch({dom:h.dom,components:h.components,toggleClass:"mce-active",dropdownBehaviours:yr([a1.button(()=>j.providers.isDisabled()||j.providers.checkUiComponentContext(h.context).shouldDisable),Yp(()=>j.providers.checkUiComponentContext(h.context)),zI.config({}),lp.config({})]),layouts:h.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:j.getSink,fetch:nt=>j0.nu(it=>h.fetch(it)).map(it=>Mt.from(PI(Fu(MF(Zr("menu-value"),it,dt=>{h.onItemAction(nt,dt)},h.columns,h.presets,j_.CLOSE_ON_EXECUTE,pn,j.providers),{movement:oD(h.columns,h.presets)})))),parts:{menu:E5(!1,1,h.presets)}}),XH=Zr("color-input-change"),qF=Zr("color-swatch-change"),JH=Zr("color-picker-cancel"),QH=(h,j,nt,it)=>{const dt=bu.parts.field({factory:Tx,inputClasses:["tox-textfield"],data:it,onSetValue:Bt=>Nw.run(Bt).get(Tt),inputBehaviours:yr([Os.config({disabled:()=>j.providers.isDisabled()||j.providers.checkUiComponentContext(h.context).shouldDisable}),Yp(()=>j.providers.checkUiComponentContext(h.context)),lp.config({}),Nw.config({invalidClass:"tox-textbox-field-invalid",getRoot:Bt=>Pm(Bt.element),notify:{onValid:Bt=>{const jt=$r.getValue(Bt);ls(Bt,XH,{color:jt})}},validator:{validateOnLoad:!1,validate:Bt=>{const jt=$r.getValue(Bt);if(jt.length===0)return j0.pure(Js.value(!0));{const Zt=io.fromTag("span");Jo(Zt,"background-color",jt);const an=gu(Zt,"background-color").fold(()=>Js.error("blah"),un=>Js.value(jt));return j0.pure(an)}}}})]),selectOnFocus:!1}),yt=h.label.map(Bt=>RS(Bt,j.providers)),vt=(Bt,jt)=>{ls(Bt,qF,{value:jt})},St=(Bt,jt)=>{Dt.getOpt(Bt).each(Zt=>{jt==="custom"?nt.colorPicker(an=>{an.fold(()=>El(Zt,JH),un=>{vt(Zt,un),B5(h.storageKey,un)})},"#ffffff"):jt==="remove"?vt(Zt,""):vt(Zt,jt)})},Dt=iu(jJ({dom:{tag:"span",attributes:{"aria-label":j.providers.translate("Color swatch")}},layouts:{onRtl:()=>[_m,vm,im],onLtr:()=>[vm,_m,im]},components:[],fetch:bH(nt.getColors(h.storageKey),h.storageKey,nt.hasCustomColors()),columns:nt.getColorCols(h.storageKey),presets:"color",onItemAction:St,context:h.context},j));return bu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:yt.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[dt,Dt.asSpec()]}]),fieldBehaviours:yr([Ks("form-field-events",[er(XH,(Bt,jt)=>{Dt.getOpt(Bt).each(Zt=>{Jo(Zt.element,"background-color",jt.event.color)}),ls(Bt,_b,{name:h.name})}),er(qF,(Bt,jt)=>{bu.getField(Bt).each(Zt=>{$r.setValue(Zt,jt.event.value),$l.getCurrent(Bt).each(Fs.focus)})}),er(JH,(Bt,jt)=>{bu.getField(Bt).each(Zt=>{$l.getCurrent(Bt).each(Fs.focus)})})])])})},eU=Jy({schema:[Qo("dom")],name:"label"}),oC=h=>Jy({name:""+h+"-edge",overrides:j=>j.model.manager.edgeActions[h].fold(()=>({}),it=>({events:xu([IC(pv(),(dt,yt,vt)=>it(dt,vt),[j]),IC(vp(),(dt,yt,vt)=>it(dt,vt),[j]),IC(w0(),(dt,yt,vt)=>{vt.mouseIsDown.get()&&it(dt,vt)},[j])])}))}),HJ=oC("top-left"),UJ=oC("top"),VJ=oC("top-right"),WJ=oC("right"),qJ=oC("bottom-right"),ZJ=oC("bottom"),ZF=oC("bottom-left"),KJ=oC("left"),YJ=S0({name:"thumb",defaults:Nt({dom:{styles:{position:"absolute"}}}),overrides:h=>({events:xu([dx(pv(),h,"spectrum"),dx(A_(),h,"spectrum"),dx(Wl(),h,"spectrum"),dx(vp(),h,"spectrum"),dx(w0(),h,"spectrum"),dx(EC(),h,"spectrum")])})}),Z5=h=>wm(h.event),XJ=S0({schema:[tu("mouseIsDown",()=>ds(!1))],name:"spectrum",overrides:h=>{const nt=h.model.manager,it=(dt,yt)=>nt.getValueFromEvent(yt).map(vt=>nt.setValueFrom(dt,h,vt));return{behaviours:yr([_s.config({mode:"special",onLeft:(dt,yt)=>nt.onLeft(dt,h,Z5(yt)),onRight:(dt,yt)=>nt.onRight(dt,h,Z5(yt)),onUp:(dt,yt)=>nt.onUp(dt,h,Z5(yt)),onDown:(dt,yt)=>nt.onDown(dt,h,Z5(yt))}),lp.config({}),Fs.config({})]),events:xu([er(pv(),it),er(A_(),it),er(vp(),it),er(w0(),(dt,yt)=>{h.mouseIsDown.get()&&it(dt,yt)})])}}});var JJ=[eU,KJ,WJ,UJ,ZJ,HJ,VJ,ZF,qJ,YJ,XJ];const K5=Nt("slider.change.value"),QJ=h=>h.type.indexOf("touch")!==-1,KF=h=>{const j=h.event.raw;if(QJ(j)){const nt=j;return nt.touches!==void 0&&nt.touches.length===1?Mt.some(nt.touches[0]).map(it=>Zu(it.clientX,it.clientY)):Mt.none()}else{const nt=j;return nt.clientX!==void 0?Mt.some(nt).map(it=>Zu(it.clientX,it.clientY)):Mt.none()}},eQ="top",tU="right",nU="bottom",tQ="left",xA=h=>h.model.minX,wA=h=>h.model.minY,dD=h=>h.model.minX-1,fD=h=>h.model.minY-1,CA=h=>h.model.maxX,PS=h=>h.model.maxY,Y5=h=>h.model.maxX+1,X5=h=>h.model.maxY+1,hD=(h,j,nt)=>j(h)-nt(h),YF=h=>hD(h,CA,xA),pD=h=>hD(h,PS,wA),oU=h=>YF(h)/2,rU=h=>pD(h)/2,BI=(h,j)=>j?h.stepSize*h.speedMultiplier:h.stepSize,sU=h=>h.snapToGrid,gD=h=>h.snapStart,Lw=h=>h.rounded,mD=(h,j)=>h[j+"-edge"]!==void 0,$I=h=>mD(h,tQ),iU=h=>mD(h,tU),yD=h=>mD(h,eQ),aU=h=>mD(h,nU),rC=h=>h.model.value.get(),OS=(h,j)=>({x:h,y:j}),Q1=(h,j)=>{ls(h,K5(),{value:j})},nQ=(h,j)=>{Q1(h,OS(dD(j),fD(j)))},XF=(h,j)=>{Q1(h,fD(j))},JF=(h,j)=>{Q1(h,OS(oU(j),fD(j)))},QF=(h,j)=>{Q1(h,OS(Y5(j),fD(j)))},oQ=(h,j)=>{Q1(h,Y5(j))},c1=(h,j)=>{Q1(h,OS(Y5(j),rU(j)))},rQ=(h,j)=>{Q1(h,OS(Y5(j),X5(j)))},sQ=(h,j)=>{Q1(h,X5(j))},lU=(h,j)=>{Q1(h,OS(oU(j),X5(j)))},cU=(h,j)=>{Q1(h,OS(dD(j),X5(j)))},iQ=(h,j)=>{Q1(h,dD(j))},aQ=(h,j)=>{Q1(h,OS(dD(j),rU(j)))},e7=(h,j,nt,it)=>h<j?h:h>nt?nt:h===j?j-1:Math.max(j,h-it),t7=(h,j,nt,it)=>h>nt?h:h<j?j:h===nt?nt+1:Math.min(nt,h+it),uU=(h,j,nt)=>Math.max(j,Math.min(nt,h)),lQ=(h,j,nt,it,dt)=>dt.fold(()=>{const yt=h-j,vt=Math.round(yt/it)*it;return uU(j+vt,j-1,nt+1)},yt=>{const vt=(h-yt)%it,St=Math.round(vt/it),Dt=Math.floor((h-yt)/it),Bt=Math.floor((nt-yt)/it),jt=Math.min(Bt,Dt+St),Zt=yt+jt*it;return Math.max(yt,Zt)}),cQ=(h,j,nt)=>Math.min(nt,Math.max(h,j))-j,n7=h=>{const{min:j,max:nt,range:it,value:dt,step:yt,snap:vt,snapStart:St,rounded:Dt,hasMinEdge:Bt,hasMaxEdge:jt,minBound:Zt,maxBound:an,screenRange:un}=h,wn=Bt?j-1:j,On=jt?nt+1:nt;if(dt<Zt)return wn;if(dt>an)return On;{const _o=cQ(dt,Zt,an),Un=uU(_o/un*it+j,wn,On);return vt&&Un>=j&&Un<=nt?lQ(Un,j,nt,yt,St):Dt?Math.round(Un):Un}},dU=h=>{const{min:j,max:nt,range:it,value:dt,hasMinEdge:yt,hasMaxEdge:vt,maxBound:St,maxOffset:Dt,centerMinEdge:Bt,centerMaxEdge:jt}=h;return dt<j?yt?0:Bt:dt>nt?vt?St:jt:(dt-j)/it*Dt},o7="top",fU="right",r7="bottom",J5="left",hU="width",pU="height",Ox=h=>h.element.dom.getBoundingClientRect(),e_=(h,j)=>h[j],GI=h=>{const j=Ox(h);return e_(j,J5)},gU=h=>{const j=Ox(h);return e_(j,fU)},jI=h=>{const j=Ox(h);return e_(j,o7)},kA=h=>{const j=Ox(h);return e_(j,r7)},s7=h=>{const j=Ox(h);return e_(j,hU)},i7=h=>{const j=Ox(h);return e_(j,pU)},a7=(h,j,nt)=>(h+j)/2-nt,mU=(h,j)=>{const nt=Ox(h),it=Ox(j),dt=e_(nt,J5),yt=e_(nt,fU),vt=e_(it,J5);return a7(dt,yt,vt)},yU=(h,j)=>{const nt=Ox(h),it=Ox(j),dt=e_(nt,o7),yt=e_(nt,r7),vt=e_(it,o7);return a7(dt,yt,vt)},SA=(h,j)=>{ls(h,K5(),{value:j})},l7=(h,j,nt)=>{const it={min:xA(j),max:CA(j),range:YF(j),value:nt,step:BI(j),snap:sU(j),snapStart:gD(j),rounded:Lw(j),hasMinEdge:$I(j),hasMaxEdge:iU(j),minBound:GI(h),maxBound:gU(h),screenRange:s7(h)};return n7(it)},uQ=(h,j,nt)=>{const it=l7(h,j,nt);return SA(h,it),it},bU=(h,j)=>{const nt=xA(j);SA(h,nt)},vU=(h,j)=>{const nt=CA(j);SA(h,nt)},c7=(h,j,nt,it)=>{const yt=(h>0?t7:e7)(rC(nt),xA(nt),CA(nt),BI(nt,it));return SA(j,yt),Mt.some(yt)},u7=h=>(j,nt,it)=>c7(h,j,nt,it).map(hn),Ny=h=>KF(h).map(nt=>nt.left),_U=(h,j,nt,it,dt)=>{const vt=s7(h),St=it.bind(jt=>Mt.some(mU(jt,h))).getOr(0),Dt=dt.bind(jt=>Mt.some(mU(jt,h))).getOr(vt),Bt={min:xA(j),max:CA(j),range:YF(j),value:nt,hasMinEdge:$I(j),hasMaxEdge:iU(j),minBound:GI(h),minOffset:0,maxBound:gU(h),maxOffset:vt,centerMinEdge:St,centerMaxEdge:Dt};return dU(Bt)},d7=(h,j,nt,it,dt,yt)=>{const vt=_U(j,yt,nt,it,dt);return GI(j)-GI(h)+vt},dQ=(h,j,nt,it)=>{const dt=rC(nt),yt=d7(h,it.getSpectrum(h),dt,it.getLeftEdge(h),it.getRightEdge(h),nt),vt=vn(j.element)/2;Jo(j.element,"left",yt-vt+"px")},xU=u7(-1),fQ=u7(1),hQ=Mt.none,pQ=Mt.none,wU={"top-left":Mt.none(),top:Mt.none(),"top-right":Mt.none(),right:Mt.some(oQ),"bottom-right":Mt.none(),bottom:Mt.none(),"bottom-left":Mt.none(),left:Mt.some(iQ)};var Fw=Object.freeze({__proto__:null,setValueFrom:uQ,setToMin:bU,setToMax:vU,findValueOfOffset:l7,getValueFromEvent:Ny,findPositionOfValue:d7,setPositionFromValue:dQ,onLeft:xU,onRight:fQ,onUp:hQ,onDown:pQ,edgeActions:wU});const HI=(h,j)=>{ls(h,K5(),{value:j})},bD=(h,j,nt)=>{const it={min:wA(j),max:PS(j),range:pD(j),value:nt,step:BI(j),snap:sU(j),snapStart:gD(j),rounded:Lw(j),hasMinEdge:yD(j),hasMaxEdge:aU(j),minBound:jI(h),maxBound:kA(h),screenRange:i7(h)};return n7(it)},vD=(h,j,nt)=>{const it=bD(h,j,nt);return HI(h,it),it},f7=(h,j)=>{const nt=wA(j);HI(h,nt)},gQ=(h,j)=>{const nt=PS(j);HI(h,nt)},mQ=(h,j,nt,it)=>{const yt=(h>0?t7:e7)(rC(nt),wA(nt),PS(nt),BI(nt,it));return HI(j,yt),Mt.some(yt)},CU=h=>(j,nt,it)=>mQ(h,j,nt,it).map(hn),yQ=h=>KF(h).map(nt=>nt.top),bQ=(h,j,nt,it,dt)=>{const vt=i7(h),St=it.bind(jt=>Mt.some(yU(jt,h))).getOr(0),Dt=dt.bind(jt=>Mt.some(yU(jt,h))).getOr(vt),Bt={min:wA(j),max:PS(j),range:pD(j),value:nt,hasMinEdge:yD(j),hasMaxEdge:aU(j),minBound:jI(h),minOffset:0,maxBound:kA(h),maxOffset:vt,centerMinEdge:St,centerMaxEdge:Dt};return dU(Bt)},h7=(h,j,nt,it,dt,yt)=>{const vt=bQ(j,yt,nt,it,dt);return jI(j)-jI(h)+vt},vQ=(h,j,nt,it)=>{const dt=rC(nt),yt=h7(h,it.getSpectrum(h),dt,it.getTopEdge(h),it.getBottomEdge(h),nt),vt=mu(j.element)/2;Jo(j.element,"top",yt-vt+"px")},kU=Mt.none,_Q=Mt.none,zw=CU(-1),_D=CU(1),xQ={"top-left":Mt.none(),top:Mt.some(XF),"top-right":Mt.none(),right:Mt.none(),"bottom-right":Mt.none(),bottom:Mt.some(sQ),"bottom-left":Mt.none(),left:Mt.none()};var wQ=Object.freeze({__proto__:null,setValueFrom:vD,setToMin:f7,setToMax:gQ,findValueOfOffset:bD,getValueFromEvent:yQ,findPositionOfValue:h7,setPositionFromValue:vQ,onLeft:kU,onRight:_Q,onUp:zw,onDown:_D,edgeActions:xQ});const Q5=(h,j)=>{ls(h,K5(),{value:j})},e4=(h,j)=>({x:h,y:j}),p7=(h,j,nt)=>{const it=l7(h,j,nt.left),dt=bD(h,j,nt.top),yt=e4(it,dt);return Q5(h,yt),yt},xD=(h,j,nt,it,dt)=>{const yt=h>0?t7:e7,vt=j?rC(it).x:yt(rC(it).x,xA(it),CA(it),BI(it,dt)),St=j?yt(rC(it).y,wA(it),PS(it),BI(it,dt)):rC(it).y;return Q5(nt,e4(vt,St)),Mt.some(vt)},DS=(h,j)=>(nt,it,dt)=>xD(h,j,nt,it,dt).map(hn),t4=(h,j)=>{const nt=xA(j),it=wA(j);Q5(h,e4(nt,it))},SU=(h,j)=>{const nt=CA(j),it=PS(j);Q5(h,e4(nt,it))},EU=h=>KF(h),AU=(h,j,nt,it)=>{const dt=rC(nt),yt=d7(h,it.getSpectrum(h),dt.x,it.getLeftEdge(h),it.getRightEdge(h),nt),vt=h7(h,it.getSpectrum(h),dt.y,it.getTopEdge(h),it.getBottomEdge(h),nt),St=vn(j.element)/2,Dt=mu(j.element)/2;Jo(j.element,"left",yt-St+"px"),Jo(j.element,"top",vt-Dt+"px")},TU=DS(-1,!1),CQ=DS(1,!1),kQ=DS(-1,!0),SQ=DS(1,!0),EQ={"top-left":Mt.some(nQ),top:Mt.some(JF),"top-right":Mt.some(QF),right:Mt.some(c1),"bottom-right":Mt.some(rQ),bottom:Mt.some(lU),"bottom-left":Mt.some(cU),left:Mt.some(aQ)};var AQ=Object.freeze({__proto__:null,setValueFrom:p7,setToMin:t4,setToMax:SU,getValueFromEvent:EU,setPositionFromValue:AU,onLeft:TU,onRight:CQ,onUp:kQ,onDown:SQ,edgeActions:EQ});const IU=[So("stepSize",1),So("speedMultiplier",10),So("onChange",Tt),So("onChoose",Tt),So("onInit",Tt),So("onDragStart",Tt),So("onDragEnd",Tt),So("snapToGrid",!1),So("rounded",!0),Ql("snapStart"),nu("model",Ip("mode",{x:[So("minX",0),So("maxX",100),tu("value",h=>ds(h.mode.minX)),Qo("getInitialValue"),Xu("manager",Fw)],y:[So("minY",0),So("maxY",100),tu("value",h=>ds(h.mode.minY)),Qo("getInitialValue"),Xu("manager",wQ)],xy:[So("minX",0),So("maxX",100),So("minY",0),So("maxY",100),tu("value",h=>ds({x:h.mode.minX,y:h.mode.minY})),Qo("getInitialValue"),Xu("manager",AQ)]})),Hm("sliderBehaviours",[_s,$r]),tu("mouseIsDown",()=>ds(!1))],W_=g0({name:"Slider",configFields:IU,partFields:JJ,factory:(h,j,nt,it)=>{const dt=Go=>Gr(Go,h,"thumb"),yt=Go=>Gr(Go,h,"spectrum"),vt=Go=>zu(Go,h,"left-edge"),St=Go=>zu(Go,h,"right-edge"),Dt=Go=>zu(Go,h,"top-edge"),Bt=Go=>zu(Go,h,"bottom-edge"),jt=h.model,Zt=jt.manager,an=(Go,Sr)=>{Zt.setPositionFromValue(Go,Sr,h,{getLeftEdge:vt,getRightEdge:St,getTopEdge:Dt,getBottomEdge:Bt,getSpectrum:yt})},un=(Go,Sr)=>{jt.value.set(Sr);const Vr=dt(Go);an(Go,Vr)},wn=(Go,Sr)=>{un(Go,Sr);const Vr=dt(Go);return h.onChange(Go,Vr,Sr),Mt.some(!0)},On=Go=>{Zt.setToMin(Go,h)},_o=Go=>{Zt.setToMax(Go,h)},Un=Go=>{const Sr=()=>{zu(Go,h,"thumb").each(Yo=>{const qr=jt.value.get();h.onChoose(Go,Yo,qr)})},Vr=h.mouseIsDown.get();h.mouseIsDown.set(!1),Vr&&Sr()},go=(Go,Sr)=>{Sr.stop(),h.mouseIsDown.set(!0),h.onDragStart(Go,dt(Go))},bo=(Go,Sr)=>{Sr.stop(),h.onDragEnd(Go,dt(Go)),Un(Go)},Bo=Go=>{zu(Go,h,"spectrum").map(_s.focusIn)};return{uid:h.uid,dom:h.dom,components:j,behaviours:Um(h.sliderBehaviours,[_s.config({mode:"special",focusIn:Bo}),$r.config({store:{mode:"manual",getValue:Go=>jt.value.get(),setValue:un}}),Ty.config({channels:{[YT()]:{onReceive:Un}}})]),events:xu([er(K5(),(Go,Sr)=>{wn(Go,Sr.event.value)}),rp((Go,Sr)=>{const Vr=jt.getInitialValue();jt.value.set(Vr);const Yo=dt(Go);an(Go,Yo);const qr=yt(Go);h.onInit(Go,Yo,qr,jt.value.get())}),er(pv(),go),er(Wl(),bo),er(vp(),(Go,Sr)=>{Bo(Go),go(Go,Sr)}),er(EC(),bo)]),apis:{resetToMin:On,resetToMax:_o,setValue:un,refresh:an},domModification:{styles:{position:"relative"}}}},apis:{setValue:(h,j,nt)=>{h.setValue(j,nt)},resetToMin:(h,j)=>{h.resetToMin(j)},resetToMax:(h,j)=>{h.resetToMax(j)},refresh:(h,j)=>{h.refresh(j)}}}),wD=Zr("rgb-hex-update"),RU=Zr("slider-update"),g7=Zr("palette-update"),n4=(h,j)=>{const nt=W_.parts.spectrum({dom:{tag:"div",classes:[j("hue-slider-spectrum")],attributes:{role:"presentation"}}}),it=W_.parts.thumb({dom:{tag:"div",classes:[j("hue-slider-thumb")],attributes:{role:"presentation"}}});return W_.sketch({dom:{tag:"div",classes:[j("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:Nt(0)},components:[nt,it],sliderBehaviours:yr([Fs.config({})]),onChange:(dt,yt,vt)=>{Wo(dt.element,"aria-valuenow",Math.floor(360-vt*3.6)),ls(dt,RU,{value:vt})}})},MU="form",PU=[Hm("formBehaviours",[$r])],OU=h=>"<alloy.field."+h+">",IQ=h=>{const j=(()=>{const yt=[];return{field:(St,Dt)=>(yt.push(St),aI(MU,OU(St),Dt)),record:Nt(yt)}})(),nt=h(j),it=j.record(),dt=Dn(it,yt=>S0({name:yt,pname:OU(yt)}));return ZE(MU,PU,dt,MQ,nt)},RQ=(h,j)=>h.fold(()=>Js.error(j),Js.value),MQ=(h,j)=>({uid:h.uid,dom:h.dom,components:j,behaviours:Um(h.formBehaviours,[$r.config({store:{mode:"manual",getValue:nt=>{const it=jP(nt,h);return xr(it,(dt,yt)=>dt().bind(vt=>{const St=$l.getCurrent(vt);return RQ(St,new Error(`Cannot find a current component to extract the value from for form part '${yt}': `+cw(vt.element)))}).map($r.getValue))},setValue:(nt,it)=>{ar(it,(dt,yt)=>{zu(nt,h,yt).each(vt=>{$l.getCurrent(vt).each(St=>{$r.setValue(St,dt)})})})}}})]),apis:{getField:(nt,it)=>zu(nt,h,it).bind($l.getCurrent)}}),EA={getField:bT((h,j,nt)=>h.getField(j,nt)),sketch:IQ},DU=Zr("valid-input"),m7=Zr("invalid-input"),CD=Zr("validating-input"),Dx="colorcustom.rgb.",y7={isEnabled:hn,setEnabled:Tt,immediatelyShow:Tt,immediatelyHide:Tt},NU=(h,j,nt,it,dt,yt)=>{const vt=(On,_o)=>{const Un=_o.get();On!==Un.isEnabled()&&(Un.setEnabled(On),On?Un.immediatelyShow():Un.immediatelyHide())},St=(On,_o,Un)=>Nw.config({invalidClass:j("invalid"),notify:{onValidate:go=>{ls(go,CD,{type:On})},onValid:go=>{vt(!1,Un),ls(go,DU,{type:On,value:$r.getValue(go)})},onInvalid:go=>{vt(!0,Un),ls(go,m7,{type:On,value:$r.getValue(go)})}},validator:{validate:go=>{const bo=$r.getValue(go),Bo=_o(bo)?Js.value(!0):Js.error(h("aria.input.invalid"));return j0.pure(Bo)},validateOnLoad:!1}}),Dt=(On,_o,Un,go,bo)=>{const Bo=ds(y7),Go=h(Dx+"range"),Sr=bu.parts.label({dom:{tag:"label"},components:[_p(Un)]}),Vr=bu.parts.field({data:bo,factory:Tx,inputAttributes:{type:"text","aria-label":go,..._o==="hex"?{"aria-live":"polite"}:{}},inputClasses:[j("textfield")],inputBehaviours:yr([St(_o,On,Bo),lp.config({}),Np.config({...dt({tooltipText:"",onSetup:su=>{Bo.set({isEnabled:()=>Np.isEnabled(su),setEnabled:as=>Np.setEnabled(su,as),immediatelyShow:()=>Np.immediateOpenClose(su,!0),immediatelyHide:()=>Np.immediateOpenClose(su,!1)}),Np.setEnabled(su,!1)},onShow:(su,as)=>{Np.setComponents(su,[{dom:{tag:"p",classes:[j("rgb-warning-note")]},components:[_p(h(_o==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:su=>{Nw.isInvalid(su)&&Nw.run(su).get(Tt)}}),Yo=Zr("aria-invalid"),qr=iu(yt("invalid",Mt.some(Yo),"warning")),Lr=iu({dom:{tag:"div",classes:[j("invalid-icon")]},components:[qr.asSpec()]}),Qr=[Sr,Vr,Lr.asSpec()],Pl=_o!=="hex"?[bu.parts["aria-descriptor"]({text:Go})]:[],_h=Qr.concat(Pl);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[j("rgb-container")]},components:_h}},Bt=(On,_o)=>{const Un=RI(_o);return EA.getField(On,"hex").each(go=>{Fs.isFocused(go)||$r.setValue(On,{hex:Un.value})}),Un},jt=(On,_o)=>{const Un=_o.red,go=_o.green,bo=_o.blue;$r.setValue(On,{red:Un,green:go,blue:bo})},Zt=iu({dom:{tag:"div",classes:[j("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),an=(On,_o)=>{Zt.getOpt(On).each(Un=>{Jo(Un.element,"background-color","#"+_o.value)})};return Py({factory:()=>{const On={red:ds(Mt.some(255)),green:ds(Mt.some(255)),blue:ds(Mt.some(255)),hex:ds(Mt.some("ffffff"))},_o=(as,hr)=>{const Dr=z5(hr);jt(as,Dr),Bo(Dr)},Un=as=>On[as].get(),go=(as,hr)=>{On[as].set(hr)},bo=()=>Un("red").bind(as=>Un("green").bind(hr=>Un("blue").map(Dr=>mA(as,hr,Dr,1)))),Bo=as=>{const hr=as.red,Dr=as.green,Gs=as.blue;go("red",Mt.some(hr)),go("green",Mt.some(Dr)),go("blue",Mt.some(Gs))},Go=(as,hr)=>{const Dr=hr.event;Dr.type!=="hex"?go(Dr.type,Mt.none()):it(as)},Sr=(as,hr)=>{nt(as);const Dr=ZO(hr);go("hex",Mt.some(Dr.value));const Gs=z5(Dr);jt(as,Gs),Bo(Gs),ls(as,wD,{hex:Dr}),an(as,Dr)},Vr=(as,hr,Dr)=>{const Gs=parseInt(Dr,10);go(hr,Mt.some(Gs)),bo().each(ga=>{const vs=Bt(as,ga);ls(as,wD,{hex:vs}),an(as,vs)})},Yo=as=>as.type==="hex",qr=(as,hr)=>{const Dr=hr.event;Yo(Dr)?Sr(as,Dr.value):Vr(as,Dr.type,Dr.value)},Lr=as=>({label:h(Dx+as+".label"),description:h(Dx+as+".description")}),Qr=Lr("red"),Pl=Lr("green"),_h=Lr("blue"),su=Lr("hex");return Fu(EA.sketch(as=>({dom:{tag:"form",classes:[j("rgb-form")],attributes:{"aria-label":h("aria.color.picker")}},components:[as.field("red",bu.sketch(Dt(CF,"red",Qr.label,Qr.description,255))),as.field("green",bu.sketch(Dt(CF,"green",Pl.label,Pl.description,255))),as.field("blue",bu.sketch(Dt(CF,"blue",_h.label,_h.description,255))),as.field("hex",bu.sketch(Dt(vF,"hex",su.label,su.description,"ffffff"))),Zt.asSpec()],formBehaviours:yr([Nw.config({invalidClass:j("form-invalid")}),Ks("rgb-form-events",[er(DU,qr),er(m7,Go),er(CD,Go)])])})),{apis:{updateHex:(as,hr)=>{$r.setValue(as,{hex:hr.value}),_o(as,hr),an(as,hr)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(On,_o,Un)=>{On.updateHex(_o,Un)}},extraApis:{}})},LU=(h,j)=>{const nt=W_.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[j("sv-palette-spectrum")]}}),it=W_.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[j("sv-palette-thumb")],innerHtml:`<div class=${j("sv-palette-inner-thumb")} role="presentation"></div>`}}),dt=(Bt,jt)=>{const{width:Zt,height:an}=Bt,un=Bt.getContext("2d");if(un===null)return;un.fillStyle=jt,un.fillRect(0,0,Zt,an);const wn=un.createLinearGradient(0,0,Zt,0);wn.addColorStop(0,"rgba(255,255,255,1)"),wn.addColorStop(1,"rgba(255,255,255,0)"),un.fillStyle=wn,un.fillRect(0,0,Zt,an);const On=un.createLinearGradient(0,0,0,an);On.addColorStop(0,"rgba(0,0,0,0)"),On.addColorStop(1,"rgba(0,0,0,1)"),un.fillStyle=On,un.fillRect(0,0,Zt,an)},yt=(Bt,jt)=>{const Zt=Bt.components()[0].element.dom,an=vA(jt,100,100),un=JG(an);dt(Zt,_j(un))},vt=(Bt,jt)=>{const Zt=$5(z5(jt));W_.setValue(Bt,{x:Zt.saturation,y:100-Zt.value}),Wo(Bt.element,"aria-valuetext",h(["Saturation {0}%, Brightness {1}%",Zt.saturation,Zt.value]))};return Py({factory:Bt=>{const jt=Nt({x:0,y:0}),Zt=(wn,On,_o)=>{It(_o)||Wo(wn.element,"aria-valuetext",h(["Saturation {0}%, Brightness {1}%",Math.floor(_o.x),Math.floor(100-_o.y)])),ls(wn,g7,{value:_o})},an=(wn,On,_o,Un)=>{dt(_o.element.dom,_j($j))},un=yr([$l.config({find:Mt.some}),Fs.config({})]);return W_.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":h(["Saturation {0}%, Brightness {1}%",0,0])},classes:[j("sv-palette")]},model:{mode:"xy",getInitialValue:jt},rounded:!1,components:[nt,it],onChange:Zt,onInit:an,sliderBehaviours:un})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(Bt,jt,Zt)=>{yt(jt,Zt)},setThumb:(Bt,jt,Zt)=>{vt(jt,Zt)}},extraApis:{}})},b7=(h,j,nt,it)=>{const dt=vt=>{const St=NU(h,j,vt.onValidHex,vt.onInvalidHex,nt,it),Dt=LU(h,j),Bt=Yo=>(100-Yo)/100*360,jt=Yo=>100-Yo/360*100,Zt={paletteRgba:ds($j),paletteHue:ds(0)},an=iu(n4(h,j)),un=iu(Dt.sketch({})),wn=iu(St.sketch({})),On=(Yo,qr,Lr)=>{un.getOpt(Yo).each(Qr=>{Dt.setHue(Qr,Lr)})},_o=(Yo,qr)=>{wn.getOpt(Yo).each(Lr=>{St.updateHex(Lr,qr)})},Un=(Yo,qr,Lr)=>{an.getOpt(Yo).each(Qr=>{W_.setValue(Qr,jt(Lr))})},go=(Yo,qr)=>{un.getOpt(Yo).each(Lr=>{Dt.setThumb(Lr,qr)})},bo=(Yo,qr)=>{const Lr=z5(Yo);Zt.paletteRgba.set(Lr),Zt.paletteHue.set(qr)},Bo=(Yo,qr,Lr,Qr)=>{bo(qr,Lr),xo(Qr,Pl=>{Pl(Yo,qr,Lr)})},Go=()=>{const Yo=[_o];return(qr,Lr)=>{const Qr=Lr.event.value,Pl=Zt.paletteHue.get(),_h=vA(Pl,Qr.x,100-Qr.y),su=cH(_h);Bo(qr,su,Pl,Yo)}},Sr=()=>{const Yo=[On,_o];return(qr,Lr)=>{const Qr=Bt(Lr.event.value),Pl=Zt.paletteRgba.get(),_h=$5(Pl),su=vA(Qr,_h.saturation,_h.value),as=cH(su);Bo(qr,as,Qr,Yo)}},Vr=()=>{const Yo=[On,Un,go];return(qr,Lr)=>{const Qr=Lr.event.hex,Pl=lH(Qr);Bo(qr,Qr,Pl.hue,Yo)}};return{uid:vt.uid,dom:vt.dom,components:[un.asSpec(),an.asSpec(),wn.asSpec()],behaviours:yr([Ks("colour-picker-events",[er(wD,Vr()),er(g7,Go()),er(RU,Sr())]),$l.config({find:Yo=>wn.getOpt(Yo)}),_s.config({mode:"acyclic"})])}};return Py({name:"ColourPicker",configFields:[Qo("dom"),So("onValidHex",Tt),So("onInvalidHex",Tt)],factory:dt})},t_={self:()=>$l.config({find:Mt.some}),memento:h=>$l.config({find:h.getOpt}),childAt:h=>$l.config({find:j=>Mp(j.element,h).bind(nt=>j.getSystem().getByDom(nt).toOptional())})},DQ=ws([So("preprocess",Qt),So("postprocess",Qt)]),NQ=(h,j)=>{const nt=x0("RepresentingConfigs.memento processors",DQ,j);return $r.config({store:{mode:"manual",getValue:it=>{const dt=h.get(it),yt=$r.getValue(dt);return nt.postprocess(yt)},setValue:(it,dt)=>{const yt=nt.preprocess(dt),vt=h.get(it);$r.setValue(vt,yt)}}})},AA=(h,j,nt)=>$r.config({store:{mode:"manual",...h.map(it=>({initialValue:it})).getOr({}),getValue:j,setValue:nt}}),FU=(h,j,nt)=>AA(h,it=>j(it.element),(it,dt)=>nt(it.element,dt)),LQ=h=>FU(h,gx,Ey),o4=h=>$r.config({store:{mode:"memory",initialValue:h}}),zU={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},FQ=h=>j=>_e(j)?h.translate(zU[j]):h.translate(j),zQ=(h,j,nt)=>{const it=Bt=>"tox-"+Bt,dt=(Bt,jt,Zt=Bt,an=Bt)=>s1(Zt,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Bt],attributes:{title:j.translate(an),"aria-live":"polite",...jt.fold(()=>({}),un=>({id:un}))}},j.icons),yt=b7(FQ(j),it,j.tooltips.getConfig,dt),vt=Bt=>{ls(Bt,Dw,{name:"hex-valid",value:!0})},St=Bt=>{ls(Bt,Dw,{name:"hex-valid",value:!1})},Dt=iu(yt.sketch({dom:{tag:"div",classes:[it("color-picker-container")],attributes:{role:"presentation"}},onValidHex:vt,onInvalidHex:St}));return{dom:{tag:"div"},components:[Dt.asSpec()],behaviours:yr([AA(nt,Bt=>{const jt=Dt.get(Bt);return $l.getCurrent(jt).bind(un=>$r.getValue(un).hex).map(un=>"#"+Ar(un,"#")).getOr("")},(Bt,jt)=>{const Zt=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,an=Mt.from(Zt.exec(jt)).bind(On=>Qn(On,1)),un=Dt.get(Bt);$l.getCurrent(un).fold(()=>{console.log("Can not find form")},On=>{$r.setValue(On,{hex:an.getOr("")}),EA.getField(On,"hex").each(_o=>{El(_o,N1())})})}),t_.self()])}};var BQ=tinymce.util.Tools.resolve("tinymce.Resource");const r4=h=>Ds(h,"init"),$Q=h=>{const j=Xl(),nt=iu({dom:{tag:h.tag}}),it=Xl(),dt=!r4(h)&&h.onFocus.isSome()?[Fs.config({onFocus:yt=>{h.onFocus.each(vt=>{vt(yt.element.dom)})}}),lp.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:yr([Ks("custom-editor-events",[rp(yt=>{nt.getOpt(yt).each(vt=>{(r4(h)?h.init(vt.element.dom):BQ.load(h.scriptId,h.scriptUrl).then(St=>St(vt.element.dom,h.settings))).then(St=>{it.on(Dt=>{St.setValue(Dt)}),it.clear(),j.set(St)})})})]),AA(Mt.none(),()=>j.get().fold(()=>it.get().getOr(""),yt=>yt.getValue()),(yt,vt)=>{j.get().fold(()=>it.set(vt),St=>St.setValue(vt))}),t_.self()].concat(dt)),components:[nt.asSpec()]}};var sC=tinymce.util.Tools.resolve("tinymce.util.Tools");const kD=Zr("browse.files.event"),BU=(h,j)=>{const nt=sC.explode(j.getOption("images_file_types")),it=dt=>nr(nt,yt=>Wu(dt.name.toLowerCase(),`.${yt.toLowerCase()}`));return co(ro(h),it)},GQ=(h,j,nt)=>{const it=(an,un)=>{un.stop()},dt=an=>(un,wn)=>{xo(an,On=>{On(un,wn)})},yt=(an,un)=>{var wn;if(!Os.isDisabled(an)){const On=un.event.raw;ls(an,kD,{files:(wn=On.dataTransfer)===null||wn===void 0?void 0:wn.files})}},vt=(an,un)=>{const wn=un.event.raw.target;ls(an,kD,{files:wn.files})},St=(an,un)=>{un&&($r.setValue(an,BU(un,j)),ls(an,_b,{name:h.name}))},Dt=iu({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:yr([Ks("input-file-events",[f2(l2()),f2(XA())])])}),Bt=h.label.map(an=>RS(an,j)),jt=bu.parts.field({factory:Im,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[_p(j.translate("Browse for an image")),Dt.asSpec()],action:an=>{Dt.get(an).element.dom.click()},buttonBehaviours:yr([t_.self(),o4(nt.getOr([])),lp.config({}),a1.button(()=>j.checkUiComponentContext(h.context).shouldDisable),Yp(()=>j.checkUiComponentContext(h.context))])}),Zt={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:yr([Os.config({disabled:()=>j.checkUiComponentContext(h.context).shouldDisable}),Yp(()=>j.checkUiComponentContext(h.context)),_a.config({toggleClass:"dragenter",toggleOnExecute:!1}),Ks("dropzone-events",[er("dragenter",dt([it,_a.toggle])),er("dragleave",dt([it,_a.toggle])),er("dragover",it),er("drop",dt([it,yt])),er(T_(),vt)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[_p(j.translate("Drop an image here"))]},jt]}]};return LI(Bt,Zt,["tox-form__group--stretched"],[Ks("handle-files",[er(kD,(an,un)=>{bu.getField(an).each(wn=>{St(wn,un.event.files)})})])])},jQ=(h,j)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${h.columns}col`]},components:Dn(h.items,j.interpreter)}),_7=(h,j)=>{let nt=null,it=null;return{cancel:()=>{ft(nt)||(clearTimeout(nt),nt=null,it=null)},throttle:(...vt)=>{it=vt,ft(nt)&&(nt=setTimeout(()=>{const St=it;nt=null,it=null,h.apply(null,St)},j))}}},HQ=(h,j)=>{let nt=null;return{cancel:()=>{ft(nt)||(clearTimeout(nt),nt=null)},throttle:(...yt)=>{ft(nt)&&(nt=setTimeout(()=>{nt=null,h.apply(null,yt)},j))}}},SD=(h,j)=>{let nt=null;const it=()=>{ft(nt)||(clearTimeout(nt),nt=null)};return{cancel:it,throttle:(...yt)=>{it(),nt=setTimeout(()=>{nt=null,h.apply(null,yt)},j)}}},x7=Zr("alloy-fake-before-tabstop"),w7=Zr("alloy-fake-after-tabstop"),$U=h=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:h},behaviours:yr([Fs.config({ignore:!0}),lp.config({})])}),C7=(h,j)=>({dom:{tag:"div",classes:["tox-navobj",...h.getOr([])]},components:[$U([x7]),j,$U([w7])],behaviours:yr([t_.childAt(1)])}),k7=(h,j)=>{ls(h,gv(),{raw:{which:9,shiftKey:j}})},UQ=(h,j)=>{const nt=j.element;ty(nt,x7)?k7(h,!0):ty(nt,w7)&&k7(h,!1)},s4=h=>V5(h,["."+x7,"."+w7].join(","),pn),ED=Zr("update-dialog"),GU=Zr("update-title"),S7=Zr("update-body"),jU=Zr("update-footer"),E7=Zr("body-send-message"),AD=Zr("dialog-focus-shifted"),A7=ba().browser,i4=A7.isSafari(),VQ=A7.isFirefox(),HU=i4||VQ,WQ=A7.isChromium(),qQ=({scrollTop:h,scrollHeight:j,clientHeight:nt})=>Math.ceil(h)+nt>=j,UU=(h,j)=>h.scrollTo(0,j==="bottom"?99999999:j),ZQ=(h,j)=>{const nt=h.body;return Mt.from(!/^<!DOCTYPE (html|HTML)/.test(j)&&(!WQ&&!i4||Ct(nt)&&(nt.scrollTop!==0||Math.abs(nt.scrollHeight-nt.clientHeight)>1))?nt:h.documentElement)},TD=(h,j,nt)=>{const it=h.dom;Mt.from(it.contentDocument).fold(nt,dt=>{let yt=0;const vt=ZQ(dt,j).map(Dt=>(yt=Dt.scrollTop,Dt)).forall(qQ),St=()=>{const Dt=it.contentWindow;Ct(Dt)&&(vt?UU(Dt,"bottom"):!vt&&HU&&yt!==0&&UU(Dt,yt))};i4&&it.addEventListener("load",St,{once:!0}),dt.open(),dt.write(j),dt.close(),i4||St()})},KQ=es(HU,i4?500:200).map(h=>_7(TD,h)),YQ=(h,j)=>{const nt=ds(h.getOr(""));return{getValue:it=>nt.get(),setValue:(it,dt)=>{if(nt.get()!==dt){const yt=it.element,vt=()=>Wo(yt,"srcdoc",dt);j?KQ.fold(Nt(TD),St=>St.throttle)(yt,dt,vt):vt()}nt.set(dt)}}},a4=(h,j,nt)=>{const it="tox-dialog__iframe",dt=h.transparent?[]:[`${it}--opaque`],yt=h.border?["tox-navobj-bordered"]:[],vt={...h.label.map(Zt=>({title:Zt})).getOr({}),...nt.map(Zt=>({srcdoc:Zt})).getOr({}),...h.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},St=YQ(nt,h.streamContent),Dt=h.label.map(Zt=>RS(Zt,j)),Bt=Zt=>C7(Mt.from(yt),{uid:Zt.uid,dom:{tag:"iframe",attributes:vt,classes:[it,...dt]},behaviours:yr([lp.config({}),Fs.config({}),AA(nt,St.getValue,St.setValue),Ty.config({channels:{[AD]:{onReceive:(an,un)=>{un.newFocus.each(wn=>{Pm(an.element).each(On=>{(Yl(an.element,wn)?Kp:wu)(On,"tox-navobj-bordered-focus")})})}}}})])}),jt=bu.parts.field({factory:{sketch:Bt}});return LI(Dt,jt,["tox-form__group--stretched"],[])},T7=h=>new Promise((j,nt)=>{const it=()=>{yt(),j(h)},dt=[ny(h,"load",it),ny(h,"error",()=>{yt(),nt("Unable to load data from image: "+h.dom.src)})],yt=()=>xo(dt,vt=>vt.unbind());h.dom.complete&&it()}),XQ=(h,j,nt,it,dt)=>{const yt=nt*dt,vt=it*dt,St=Math.max(0,h/2-yt/2),Dt=Math.max(0,j/2-vt/2);return{left:St.toString()+"px",top:Dt.toString()+"px",width:yt.toString()+"px",height:vt.toString()+"px"}},JQ=(h,j,nt)=>{const it=vn(h),dt=mu(h);return Math.min(it/j,dt/nt,1)},I7=(h,j)=>{const nt=ds(j.getOr({url:""})),it=iu({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:j.map(Dt=>({src:Dt.url})).getOr({})}}),dt=iu({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[it.asSpec()]}),yt=(Dt,Bt)=>{const jt={url:Bt.url};Bt.zoom.each(an=>jt.zoom=an),Bt.cachedWidth.each(an=>jt.cachedWidth=an),Bt.cachedHeight.each(an=>jt.cachedHeight=an),nt.set(jt);const Zt=()=>{const{cachedWidth:an,cachedHeight:un,zoom:wn}=jt;if(!bt(an)&&!bt(un)){if(bt(wn)){const _o=JQ(Dt.element,an,un);jt.zoom=_o}const On=XQ(vn(Dt.element),mu(Dt.element),an,un,jt.zoom);dt.getOpt(Dt).each(_o=>{Xs(_o.element,On)})}};it.getOpt(Dt).each(an=>{const un=an.element;Bt.url!==Xr(un,"src")&&(Wo(un,"src",Bt.url),wu(Dt.element,"tox-imagepreview__loaded")),Zt(),T7(un).then(wn=>{Dt.getSystem().isConnected()&&(Kp(Dt.element,"tox-imagepreview__loaded"),jt.cachedWidth=wn.dom.naturalWidth,jt.cachedHeight=wn.dom.naturalHeight,Zt())})})},vt={};h.height.each(Dt=>vt.height=Dt);const St=j.map(Dt=>({url:Dt.url,zoom:Mt.from(Dt.zoom),cachedWidth:Mt.from(Dt.cachedWidth),cachedHeight:Mt.from(Dt.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:vt,attributes:{role:"presentation"}},components:[dt.asSpec()],behaviours:yr([t_.self(),AA(St,()=>nt.get(),yt)])}},QQ=(h,j,nt)=>{const it="tox-label",dt=h.align==="center"?[`${it}--center`]:[],yt=h.align==="end"?[`${it}--end`]:[],vt=iu({dom:{tag:"label",classes:[it,...dt,...yt]},components:[_p(j.providers.translate(h.label))]}),St=Dn(h.items,j.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[vt.asSpec(),...St],behaviours:yr([t_.self(),Us.config({}),LQ(Mt.none()),_s.config({mode:"acyclic"}),Ks("label",[rp(Dt=>{h.for.each(Bt=>{nt(Bt).each(jt=>{vt.getOpt(Dt).each(Zt=>{var an;const un=(an=Xr(jt.element,"id"))!==null&&an!==void 0?an:Zr("form-field");Wo(jt.element,"id",un),Wo(Zt.element,"for",un)})})})})])])}},ID=Zr("toolbar.button.execute"),VU=h=>fx((j,nt)=>{WO(h,j)(it=>{ls(j,ID,{buttonApi:it}),h.onAction(it)})}),TA=Zr("common-button-display-events"),WU={[s0()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[my()]:["toolbar-button-events",TA],[Vy()]:["toolbar-button-events","dropdown-events","tooltipping"],[vp()]:["focusing","alloy.base.behaviour",TA]},RD=h=>Jo(h.element,"width",lu(h.element,"width")),R7=(h,j,nt)=>s1(h,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:nt},j),M7=(h,j)=>R7(h,j,[]),iC=(h,j)=>R7(h,j,[Us.config({})]),P7=(h,j,nt)=>({dom:{tag:"span",classes:[`${j}__select-label`]},components:[_p(nt.translate(h))],behaviours:yr([Us.config({})])}),n_=Zr("update-menu-text"),NS=Zr("update-menu-icon"),MD=(h,j,nt,it)=>{const dt=ds(Tt),yt=h.text.map(On=>iu(P7(On,j,nt.providers))),vt=h.icon.map(On=>iu(iC(On,nt.providers.icons))),St=(On,_o)=>{const Un=$r.getValue(On);return Fs.focus(Un),ls(Un,"keydown",{raw:_o.event.raw}),l1.close(Un),Mt.some(!0)},Dt=h.role.fold(()=>({}),On=>({role:On})),Bt=Mt.from(h.listRole).map(On=>({listRole:On})).getOr({}),jt=h.ariaLabel.fold(()=>({}),On=>({"aria-label":nt.providers.translate(On)})),Zt=s1("chevron-down",{tag:"div",classes:[`${j}__select-chevron`]},nt.providers.icons),an=Zr("common-button-display-events"),un="dropdown-events";return iu(l1.sketch({...h.uid?{uid:h.uid}:{},...Dt,...Bt,dom:{tag:"button",classes:[j,`${j}--select`].concat(Dn(h.classes,On=>`${j}--${On}`)),attributes:{...jt,...Ct(it)?{"data-mce-name":it}:{}}},components:IS([vt.map(On=>On.asSpec()),yt.map(On=>On.asSpec()),Mt.some(Zt)]),matchWidth:!0,useMinWidth:!0,onOpen:(On,_o,Un)=>{h.searchable&&iD(Un)},dropdownBehaviours:yr([...h.dropdownBehaviours,a1.button(()=>h.disabled||nt.providers.checkUiComponentContext(h.context).shouldDisable),Yp(()=>nt.providers.checkUiComponentContext(h.context)),zI.config({}),Us.config({}),...h.tooltip.map(On=>Np.config(nt.providers.tooltips.getConfig({tooltipText:nt.providers.translate(On)}))).toArray(),Ks(un,[AS(h,dt),TS(h,dt)]),Ks(an,[rp((On,_o)=>{h.listRole!=="listbox"&&RD(On)})]),Ks("update-dropdown-width-variable",[er(u2(),(On,_o)=>l1.close(On))]),Ks("menubutton-update-display-text",[er(n_,(On,_o)=>{yt.bind(Un=>Un.getOpt(On)).each(Un=>{Us.set(Un,[_p(nt.providers.translate(_o.event.text))])})}),er(NS,(On,_o)=>{vt.bind(Un=>Un.getOpt(On)).each(Un=>{Us.set(Un,[iC(_o.event.icon,nt.providers.icons)])})})])]),eventOrder:Fu(WU,{[vp()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[my()]:["toolbar-button-events",Np.name(),un,an]}),sandboxBehaviours:yr([_s.config({mode:"special",onLeft:St,onRight:St}),Ks("dropdown-sandbox-events",[er(Z6,(On,_o)=>{hJ(On),_o.stop()}),er(wG,(On,_o)=>{pJ(On,_o),_o.stop()})])]),lazySink:nt.getSink,toggleClass:`${j}--active`,parts:{menu:{...E5(!1,h.columns,h.presets),fakeFocus:h.searchable,...h.listRole==="listbox"?{}:{onHighlightItem:U5,onCollapseMenu:(On,_o,Un)=>{Er.getHighlighted(Un).each(go=>{U5(On,Un,go)})},onDehighlightItem:yJ}}},getAnchorOverrides:()=>({maxHeightFunction:(On,_o)=>{QM()(On,_o-10)}}),fetch:On=>j0.nu(Mn(h.fetch,On))})).asSpec()},qU=h=>_e(h),ZU=h=>h.type==="separator",eee=h=>Ds(h,"getSubmenuItems"),tee={type:"separator"},KU=(h,j)=>{const nt=yo(h,(it,dt)=>qU(dt)?dt===""?it:dt==="|"?it.length>0&&!ZU(it[it.length-1])?it.concat([tee]):it:Ds(j,dt.toLowerCase())?it.concat([j[dt.toLowerCase()]]):it:it.concat([dt]),[]);return nt.length>0&&ZU(nt[nt.length-1])&&nt.pop(),nt},nee=(h,j)=>{const nt=h.getSubmenuItems(),it=XU(nt,j),dt=Fu(it.menus,{[h.value]:it.items}),yt=Fu(it.expansions,{[h.value]:h.value});return{item:h,menus:dt,expansions:yt}},YU=h=>{const j=or(h,"value").getOrThunk(()=>Zr("generated-menu-item"));return Fu({value:j},h)},XU=(h,j)=>{const nt=KU(_e(h)?h.split(" "):h,j);return Vo(nt,(it,dt)=>{if(eee(dt)){const yt=YU(dt),vt=nee(yt,j);return{menus:Fu(it.menus,vt.menus),items:[vt.item,...it.items],expansions:Fu(it.expansions,vt.expansions)}}else return{...it,items:[dt,...it.items]}},{menus:{},expansions:{},items:[]})},oee=h=>h.search.fold(()=>({searchMode:"no-search"}),j=>({searchMode:"search-with-field",placeholder:j.placeholder})),O7=h=>h.search.fold(()=>({searchMode:"no-search"}),j=>({searchMode:"search-with-results"})),UI=(h,j,nt,it)=>{const dt=Zr("primary-menu"),yt=XU(h,nt.shared.providers.menuItems());if(yt.items.length===0)return Mt.none();const vt=oee(it),St=xJ(dt,yt.items,j,nt,it.isHorizontalMenu,vt),Dt=O7(it),Bt=xr(yt.menus,(Zt,an)=>xJ(an,Zt,j,nt,!1,Dt)),jt=Fu(Bt,Ns(dt,St));return Mt.from(Mw.tieredData(dt,jt,yt.expansions))},PD=h=>!Ds(h,"items"),JU="data-value",OD=(h,j,nt,it,dt)=>Dn(nt,yt=>PD(yt)?{type:"togglemenuitem",...dt?{}:{role:"option"},text:yt.text,value:yt.value,active:yt.value===it,onAction:()=>{$r.setValue(h,yt.value),ls(h,_b,{name:j}),Fs.focus(h)}}:{type:"nestedmenuitem",text:yt.text,getSubmenuItems:()=>OD(h,j,yt.items,it,dt)}),D7=(h,j)=>Co(h,nt=>PD(nt)?es(nt.value===j,nt):D7(nt.items,j)),QU=(h,j,nt)=>{const it=nr(h.items,Bt=>!PD(Bt)),dt=j.shared.providers,yt=nt.bind(Bt=>D7(h.items,Bt)).orThunk(()=>vo(h.items).filter(PD)),vt=h.label.map(Bt=>RS(Bt,dt)),St=bu.parts.field({dom:{},factory:{sketch:Bt=>MD({context:h.context,uid:Bt.uid,text:yt.map(jt=>jt.text),icon:Mt.none(),tooltip:Mt.none(),role:es(!it,"combobox"),...it?{}:{listRole:"listbox"},ariaLabel:h.label,fetch:(jt,Zt)=>{const an=OD(jt,h.name,h.items,$r.getValue(jt),it);Zt(UI(an,j_.CLOSE_ON_EXECUTE,j,{isHorizontalMenu:!1,search:Mt.none()}))},onSetup:Nt(Tt),getApi:Nt({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[lp.config({}),AA(yt.map(jt=>jt.value),jt=>Xr(jt.element,JU),(jt,Zt)=>{D7(h.items,Zt).each(an=>{Wo(jt.element,JU,an.value),ls(jt,n_,{text:an.text})})})]},"tox-listbox",j.shared)}}),Dt={dom:{tag:"div",classes:["tox-listboxfield"]},components:[St]};return bu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Nn([vt.toArray(),[Dt]]),fieldBehaviours:yr([Os.config({disabled:()=>!h.enabled||dt.checkUiComponentContext(h.context).shouldDisable,onDisabled:Bt=>{bu.getField(Bt).each(Os.disable)},onEnabled:Bt=>{bu.getField(Bt).each(Os.enable)}})])})},ree=(h,j)=>({dom:{tag:"div",classes:h.classes},components:Dn(h.items,j.shared.interpreter)}),eV=(h,j)=>{const nt=Dn(h.options,dt=>({dom:{tag:"option",value:dt.value,innerHtml:dt.text}})),it=h.data.map(dt=>Ns("initialValue",dt)).getOr({});return{uid:h.uid,dom:{tag:"select",classes:h.selectClasses,attributes:h.selectAttributes},components:nt,behaviours:Um(h.selectBehaviours,[Fs.config({}),$r.config({store:{mode:"manual",getValue:dt=>e1(dt.element),setValue:(dt,yt)=>{const vt=vo(h.options);yn(h.options,Dt=>Dt.value===yt).isSome()?I2(dt.element,yt):dt.element.dom.selectedIndex===-1&&yt===""&&vt.each(Dt=>I2(dt.element,Dt.value))},...it}})])}},see=Py({name:"HtmlSelect",configFields:[Qo("options"),Hm("selectBehaviours",[Fs,$r]),So("selectClasses",[]),So("selectAttributes",{}),Ql("data")],factory:eV}),iee=(h,j,nt)=>{const it=Dn(h.items,Dt=>({text:j.translate(Dt.text),value:Dt.value})),dt=h.label.map(Dt=>RS(Dt,j)),yt=bu.parts.field({dom:{},...nt.map(Dt=>({data:Dt})).getOr({}),selectAttributes:{size:h.size},options:it,factory:see,selectBehaviours:yr([Os.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable}),lp.config({}),Ks("selectbox-change",[er(T_(),(Dt,Bt)=>{ls(Dt,_b,{name:h.name})})])])}),vt=h.size>1?Mt.none():Mt.some(s1("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},j.icons)),St={dom:{tag:"div",classes:["tox-selectfield"]},components:Nn([[yt],vt.toArray()])};return bu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Nn([dt.toArray(),[St]]),fieldBehaviours:yr([Os.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable,onDisabled:Dt=>{bu.getField(Dt).each(Os.disable)},onEnabled:Dt=>{bu.getField(Dt).each(Os.enable)}}),Yp(()=>j.checkUiComponentContext(h.context))])})},aee=Nt([So("field1Name","field1"),So("field2Name","field2"),w2("onLockedChange"),mx(["lockClass"]),So("locked",!1),Cv.field("coupledFieldBehaviours",[$l,$r])]),lee=(h,j,nt)=>zu(h,j,nt).bind($l.getCurrent),tV=(h,j)=>S0({factory:bu,name:h,overrides:nt=>({fieldBehaviours:yr([Ks("coupled-input-behaviour",[er(N1(),it=>{lee(it,nt,j).each(dt=>{zu(it,nt,"lock").each(yt=>{_a.isOn(yt)&&nt.onLockedChange(it,dt,yt)})})})])])})}),nV=Nt([tV("field1","field2"),tV("field2","field1"),S0({factory:Im,schema:[Qo("dom")],name:"lock",overrides:h=>({buttonBehaviours:yr([_a.config({selected:h.locked,toggleClass:h.markers.lockClass,aria:{mode:"pressed"}})])})})]),cee=(h,j,nt,it)=>({uid:h.uid,dom:h.dom,components:j,behaviours:Cv.augment(h.coupledFieldBehaviours,[$l.config({find:Mt.some}),$r.config({store:{mode:"manual",getValue:dt=>{const yt=fS(dt,h,["field1","field2"]);return{[h.field1Name]:$r.getValue(yt.field1()),[h.field2Name]:$r.getValue(yt.field2())}},setValue:(dt,yt)=>{const vt=fS(dt,h,["field1","field2"]);hu(yt,h.field1Name)&&$r.setValue(vt.field1(),yt[h.field1Name]),hu(yt,h.field2Name)&&$r.setValue(vt.field2(),yt[h.field2Name])}}})]),apis:{getField1:dt=>zu(dt,h,"field1"),getField2:dt=>zu(dt,h,"field2"),getLock:dt=>zu(dt,h,"lock")}}),u1=g0({name:"FormCoupledInputs",configFields:aee(),partFields:nV(),factory:cee,apis:{getField1:(h,j)=>h.getField1(j),getField2:(h,j)=>h.getField2(j),getLock:(h,j)=>h.getLock(j)}}),oV=h=>{const j={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},nt=dt=>dt in j?j[dt]:1;let it=h.value.toFixed(nt(h.unit));return it.indexOf(".")!==-1&&(it=it.replace(/\.?0*$/,"")),it+h.unit},N7=h=>{const nt=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(h);if(nt!==null){const it=parseFloat(nt[1]),dt=nt[2];return Js.value({value:it,unit:dt})}else return Js.error(h)},rV=(h,j)=>{const nt={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},it=dt=>Ds(nt,dt);return h.unit===j?Mt.some(h.value):it(h.unit)&&it(j)?nt[h.unit]===nt[j]?Mt.some(h.value):Mt.some(h.value/nt[h.unit]*nt[j]):Mt.none()},L7=h=>Mt.none(),sV=(h,j)=>nt=>rV(nt,j).map(it=>({value:it*h,unit:j})),uee=(h,j)=>{const nt=N7(h).toOptional(),it=N7(j).toOptional();return Eu(nt,it,(dt,yt)=>rV(dt,yt.unit).map(vt=>yt.value/vt).map(vt=>sV(vt,yt.unit)).getOr(L7)).getOr(L7)},dee=(h,j)=>{let nt=L7;const it=Zr("ratio-event"),dt=un=>s1(un,{tag:"span",classes:["tox-icon","tox-lock-icon__"+un]},j.icons),yt=h.label.getOr("Constrain proportions"),vt=j.translate(yt),St=u1.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":vt,"data-mce-name":yt}},components:[dt("lock"),dt("unlock")],buttonBehaviours:yr([Os.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable}),Yp(()=>j.checkUiComponentContext(h.context)),lp.config({}),Np.config(j.tooltips.getConfig({tooltipText:vt}))])}),Dt=un=>({dom:{tag:"div",classes:["tox-form__group"]},components:un}),Bt=un=>bu.parts.field({factory:Tx,inputClasses:["tox-textfield"],inputBehaviours:yr([Os.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable}),Yp(()=>j.checkUiComponentContext(h.context)),lp.config({}),Ks("size-input-events",[er(Q0(),(wn,On)=>{ls(wn,it,{isField1:un})}),er(T_(),(wn,On)=>{ls(wn,_b,{name:h.name})})])]),selectOnFocus:!1}),jt=un=>({dom:{tag:"label",classes:["tox-label"]},components:[_p(j.translate(un))]}),Zt=u1.parts.field1(Dt([bu.parts.label(jt("Width")),Bt(!0)])),an=u1.parts.field2(Dt([bu.parts.label(jt("Height")),Bt(!1)]));return u1.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[Zt,an,Dt([jt(e8),St])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(un,wn,On)=>{N7($r.getValue(un)).each(_o=>{nt(_o).each(Un=>{$r.setValue(wn,oV(Un))})})},coupledFieldBehaviours:yr([Os.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable,onDisabled:un=>{u1.getField1(un).bind(bu.getField).each(Os.disable),u1.getField2(un).bind(bu.getField).each(Os.disable),u1.getLock(un).each(Os.disable)},onEnabled:un=>{u1.getField1(un).bind(bu.getField).each(Os.enable),u1.getField2(un).bind(bu.getField).each(Os.enable),u1.getLock(un).each(Os.enable)}}),Yp(()=>j.checkUiComponentContext("mode:design")),Ks("size-input-events2",[er(it,(un,wn)=>{const On=wn.event.isField1,_o=On?u1.getField1(un):u1.getField2(un),Un=On?u1.getField2(un):u1.getField1(un),go=_o.map($r.getValue).getOr(""),bo=Un.map($r.getValue).getOr("");nt=uee(go,bo)})])])})},fee=(h,j,nt)=>{const it=W_.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[_p(j.translate(h.label))]}),dt=W_.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),yt=W_.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return W_.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:h.min,maxX:h.max,getInitialValue:Nt(nt.getOrThunk(()=>(Math.abs(h.max)-Math.abs(h.min))/2))},components:[it,dt,yt],sliderBehaviours:yr([t_.self(),Fs.config({})]),onChoose:(vt,St,Dt)=>{ls(vt,_b,{name:h.name,value:Dt})},onChange:(vt,St,Dt)=>{ls(vt,_b,{name:h.name,value:Dt})}})},iV=(h,j)=>{const nt=St=>({dom:{tag:"th",innerHtml:j.translate(St)}}),it=St=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Dn(St,nt)}]}),dt=St=>({dom:{tag:"td",innerHtml:j.translate(St)}}),yt=St=>({dom:{tag:"tr"},components:Dn(St,dt)}),vt=St=>({dom:{tag:"tbody"},components:Dn(St,yt)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[it(h.header),vt(h.cells)],behaviours:yr([lp.config({}),Fs.config({})])}},F7=(h,j)=>{const nt=h.label.map(un=>RS(un,j)),it=[Os.config({disabled:()=>h.disabled||j.checkUiComponentContext(h.context).shouldDisable}),Yp(()=>j.checkUiComponentContext(h.context)),_s.config({mode:"execution",useEnter:h.multiline!==!0,useControlEnter:h.multiline===!0,execute:un=>(El(un,FI),Mt.some(!0))}),Ks("textfield-change",[er(N1(),(un,wn)=>{ls(un,_b,{name:h.name})}),er(rE(),(un,wn)=>{ls(un,_b,{name:h.name})})]),lp.config({})],dt=h.validation.map(un=>Nw.config({getRoot:wn=>Pm(wn.element),invalidClass:"tox-invalid",validator:{validate:wn=>{const On=$r.getValue(wn),_o=un.validator(On);return j0.pure(_o===!0?Js.value(On):Js.error(_o))},validateOnLoad:un.validateOnLoad}})).toArray(),yt=h.placeholder.fold(Nt({}),un=>({placeholder:j.translate(un)})),vt=h.inputMode.fold(Nt({}),un=>({inputmode:un})),St={...yt,...vt,"data-mce-name":h.name},Dt=bu.parts.field({tag:h.multiline===!0?"textarea":"input",...h.data.map(un=>({data:un})).getOr({}),inputAttributes:St,inputClasses:[h.classname],inputBehaviours:yr(Nn([it,dt])),selectOnFocus:!1,factory:Tx}),Bt=h.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[Dt]}:Dt,Zt=(h.flex?["tox-form__group--stretched"]:[]).concat(h.maximized?["tox-form-group--maximize"]:[]),an=[Os.config({disabled:()=>h.disabled||j.checkUiComponentContext(h.context).shouldDisable,onDisabled:un=>{bu.getField(un).each(Os.disable)},onEnabled:un=>{bu.getField(un).each(Os.enable)}}),Yp(()=>j.checkUiComponentContext(h.context))];return LI(nt,Bt,Zt,an)},aV=(h,j,nt)=>F7({name:h.name,multiline:!1,label:h.label,inputMode:h.inputMode,placeholder:h.placeholder,flex:!1,disabled:!h.enabled,classname:"tox-textfield",validation:Mt.none(),maximized:h.maximized,data:nt,context:h.context},j),DD=(h,j,nt)=>F7({name:h.name,multiline:!0,label:h.label,inputMode:Mt.none(),placeholder:h.placeholder,flex:!0,disabled:!h.enabled,classname:"tox-textarea",validation:Mt.none(),maximized:h.maximized,data:nt,context:h.context},j),l4=(h,j)=>j.getAnimationRoot.fold(()=>h.element,nt=>nt(h)),aC=h=>h.dimension.property,IA=(h,j)=>h.dimension.getDimension(j),ND=(h,j)=>{const nt=l4(h,j);B1(nt,[j.shrinkingClass,j.growingClass])},LD=(h,j)=>{wu(h.element,j.openClass),Kp(h.element,j.closedClass),Jo(h.element,aC(j),"0px"),Xm(h.element)},z7=(h,j)=>{wu(h.element,j.closedClass),Kp(h.element,j.openClass),js(h.element,aC(j))},lV=(h,j,nt,it)=>{nt.setCollapsed(),Jo(h.element,aC(j),IA(j,h.element)),ND(h,j),LD(h,j),j.onStartShrink(h),j.onShrunk(h)},hee=(h,j,nt,it)=>{const dt=it.getOrThunk(()=>IA(j,h.element));nt.setCollapsed(),Jo(h.element,aC(j),dt),Xm(h.element);const yt=l4(h,j);wu(yt,j.growingClass),Kp(yt,j.shrinkingClass),LD(h,j),j.onStartShrink(h)},B7=(h,j,nt)=>{const it=IA(j,h.element);(it==="0px"?lV:hee)(h,j,nt,Mt.some(it))},$7=(h,j,nt)=>{const it=l4(h,j),dt=ty(it,j.shrinkingClass),yt=IA(j,h.element);z7(h,j);const vt=IA(j,h.element);(dt?()=>{Jo(h.element,aC(j),yt),Xm(h.element)}:()=>{LD(h,j)})(),wu(it,j.shrinkingClass),Kp(it,j.growingClass),z7(h,j),Jo(h.element,aC(j),vt),nt.setExpanded(),j.onStartGrow(h)},pee=(h,j,nt)=>{if(nt.isExpanded()){js(h.element,aC(j));const it=IA(j,h.element);Jo(h.element,aC(j),it)}},gee=(h,j,nt)=>{nt.isExpanded()||$7(h,j,nt)},cV=(h,j,nt)=>{nt.isExpanded()&&B7(h,j,nt)},mee=(h,j,nt)=>{nt.isExpanded()&&lV(h,j,nt)},yee=(h,j,nt)=>nt.isExpanded(),Vs=(h,j,nt)=>nt.isCollapsed(),VI=(h,j,nt)=>{const it=l4(h,j);return ty(it,j.growingClass)===!0},G7=(h,j,nt)=>{const it=l4(h,j);return ty(it,j.shrinkingClass)===!0};var uV=Object.freeze({__proto__:null,refresh:pee,grow:gee,shrink:cV,immediateShrink:mee,hasGrown:yee,hasShrunk:Vs,isGrowing:VI,isShrinking:G7,isTransitioning:(h,j,nt)=>VI(h,j)||G7(h,j),toggleGrow:(h,j,nt)=>{(nt.isExpanded()?B7:$7)(h,j,nt)},disableTransitions:ND,immediateGrow:(h,j,nt)=>{nt.isExpanded()||(z7(h,j),Jo(h.element,aC(j),IA(j,h.element)),ND(h,j),nt.setExpanded(),j.onStartGrow(h),j.onGrown(h))}}),xee=Object.freeze({__proto__:null,exhibit:(h,j,nt)=>{const it=j.expanded;return ey(it?{classes:[j.openClass],styles:{}}:{classes:[j.closedClass],styles:Ns(j.dimension.property,"0px")})},events:(h,j)=>xu([rw(oE(),(nt,it)=>{it.event.raw.propertyName===h.dimension.property&&(ND(nt,h),j.isExpanded()&&js(nt.element,h.dimension.property),(j.isExpanded()?h.onGrown:h.onShrunk)(nt))})])}),dV=[Qo("closedClass"),Qo("openClass"),Qo("shrinkingClass"),Qo("growingClass"),Ql("getAnimationRoot"),Hl("onShrunk"),Hl("onStartShrink"),Hl("onGrown"),Hl("onStartGrow"),So("expanded",!1),nu("dimension",Ip("property",{width:[Xu("property","width"),Xu("getDimension",h=>vn(h)+"px")],height:[Xu("property","height"),Xu("getDimension",h=>mu(h)+"px")]}))],wee=Object.freeze({__proto__:null,init:h=>{const j=ds(h.expanded),nt=()=>"expanded: "+j.get();return F0({isExpanded:()=>j.get()===!0,isCollapsed:()=>j.get()===!1,setCollapsed:Mn(j.set,!1),setExpanded:Mn(j.set,!0),readState:nt})}});const ev=Gm({fields:dV,name:"sliding",active:xee,apis:uV,state:wee}),j7=h=>({isEnabled:()=>!Os.isDisabled(h),setEnabled:j=>Os.set(h,!j),setActive:j=>{const nt=h.element;j?(Kp(nt,"tox-tbtn--enabled"),Wo(nt,"aria-pressed",!0)):(wu(nt,"tox-tbtn--enabled"),Yt(nt,"aria-pressed"))},isActive:()=>ty(h.element,"tox-tbtn--enabled"),setText:j=>{ls(h,n_,{text:j})},setIcon:j=>ls(h,NS,{icon:j})}),RA=(h,j,nt,it,dt=!0,yt)=>MD({text:h.text,icon:h.icon,tooltip:h.tooltip,ariaLabel:h.tooltip,searchable:h.search.isSome(),role:it,fetch:(vt,St)=>{const Dt={pattern:h.search.isSome()?bJ(vt):""};h.fetch(Bt=>{St(UI(Bt,j_.CLOSE_ON_EXECUTE,nt,{isHorizontalMenu:!1,search:h.search}))},Dt,j7(vt))},onSetup:h.onSetup,getApi:j7,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...dt?[lp.config({})]:[]],context:h.context},j,nt.shared,yt),fV=(h,j,nt)=>{const it=yt=>vt=>{const St=!vt.isActive();vt.setActive(St),yt.storage.set(St),nt.shared.getSink().each(Dt=>{j().getOpt(Dt).each(Bt=>{_v(Bt.element),ls(Bt,Dw,{name:yt.name,value:yt.storage.get()})})})},dt=yt=>vt=>{vt.setActive(yt.storage.get())};return yt=>{yt(Dn(h,vt=>{const St=vt.text.fold(()=>({}),Dt=>({text:Dt}));return{type:vt.type,active:!1,...St,context:vt.context,onAction:it(vt),onSetup:dt(vt)}}))}},hV=h=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":h}},components:[_p(h)]}),pV=(h,j,nt)=>{h.customStateIcon.each(it=>j.push(mV(it,nt.shared.providers.icons,h.customStateIconTooltip.fold(()=>[],dt=>[Np.config(nt.shared.providers.tooltips.getConfig({tooltipText:dt}))]),["tox-icon-custom-state"],h.customStateIconTooltip.fold(()=>({}),dt=>({title:dt})))))},gV=Zr("leaf-label-event-id"),H7=({leaf:h,onLeafAction:j,visible:nt,treeId:it,selectedId:dt,backstage:yt})=>{const vt=h.menu.map(Dt=>RA(Dt,"tox-mbtn",yt,Mt.none(),nt)),St=[hV(h.title)];return pV(h,St,yt),vt.each(Dt=>St.push(Dt)),Im.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(nt?["tox-tree--leaf__label--visible"]:[])},components:St,role:"treeitem",action:Dt=>{j(h.id),Dt.getSystem().broadcastOn([`update-active-item-${it}`],{value:h.id})},eventOrder:{[gv()]:[gV,"keying"]},buttonBehaviours:yr([...nt?[lp.config({})]:[],_a.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Ty.config({channels:{[`update-active-item-${it}`]:{onReceive:(Dt,Bt)=>{(Bt.value===h.id?_a.on:_a.off)(Dt)}}}}),Ks(gV,[rp((Dt,Bt)=>{dt.each(jt=>{(jt===h.id?_a.on:_a.off)(Dt)})}),er(gv(),(Dt,Bt)=>{const jt=Bt.event.raw.code==="ArrowLeft",Zt=Bt.event.raw.code==="ArrowRight";jt?(bm(Dt.element,".tox-tree--directory").each(an=>{Dt.getSystem().getByDom(an).each(un=>{vv(an,".tox-tree--directory__label").each(wn=>{un.getSystem().getByDom(wn).each(Fs.focus)})})}),Bt.stop()):Zt&&Bt.stop()})])])})},mV=(h,j,nt,it,dt)=>s1(h,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(it||[]),behaviours:nt,attributes:dt},j),Cee=(h,j)=>mV(h,j,[]),yV=Zr("directory-label-event-id"),kee=({directory:h,visible:j,noChildren:nt,backstage:it})=>{const dt=h.menu.map(St=>RA(St,"tox-mbtn",it,Mt.none())),yt=[{dom:{tag:"div",classes:["tox-chevron"]},components:[Cee("chevron-right",it.shared.providers.icons)]},hV(h.title)];pV(h,yt,it),dt.each(St=>{yt.push(St)});const vt=St=>{bm(St.element,".tox-tree--directory").each(Dt=>{St.getSystem().getByDom(Dt).each(Bt=>{const jt=!_a.isOn(Bt);_a.toggle(Bt),ls(St,"expand-tree-node",{expanded:jt,node:h.id})})})};return Im.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(j?["tox-tree--directory__label--visible"]:[])},components:yt,action:vt,eventOrder:{[gv()]:[yV,"keying"]},buttonBehaviours:yr([...j?[lp.config({})]:[],Ks(yV,[er(gv(),(St,Dt)=>{const Bt=Dt.event.raw.code==="ArrowRight",jt=Dt.event.raw.code==="ArrowLeft";Bt&&nt&&Dt.stop(),(Bt||jt)&&bm(St.element,".tox-tree--directory").each(Zt=>{St.getSystem().getByDom(Zt).each(an=>{!_a.isOn(an)&&Bt||_a.isOn(an)&&jt?(vt(St),Dt.stop()):jt&&!_a.isOn(an)&&(bm(an.element,".tox-tree--directory").each(un=>{vv(un,".tox-tree--directory__label").each(wn=>{an.getSystem().getByDom(wn).each(Fs.focus)})}),Dt.stop())})})})])])})},See=({children:h,onLeafAction:j,visible:nt,treeId:it,expandedIds:dt,selectedId:yt,backstage:vt})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:h.map(St=>St.type==="leaf"?H7({leaf:St,selectedId:yt,onLeafAction:j,visible:nt,treeId:it,backstage:vt}):zD({directory:St,expandedIds:dt,selectedId:yt,onLeafAction:j,labelTabstopping:nt,treeId:it,backstage:vt})),behaviours:yr([ev.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:nt}),Us.config({})])}),Eee=Zr("directory-event-id"),zD=({directory:h,onLeafAction:j,labelTabstopping:nt,treeId:it,backstage:dt,expandedIds:yt,selectedId:vt})=>{const{children:St}=h,Dt=ds(yt),Bt=Zt=>St.map(an=>an.type==="leaf"?H7({leaf:an,selectedId:vt,onLeafAction:j,visible:Zt,treeId:it,backstage:dt}):zD({directory:an,expandedIds:Dt.get(),selectedId:vt,onLeafAction:j,labelTabstopping:Zt,treeId:it,backstage:dt})),jt=yt.includes(h.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[kee({directory:h,visible:nt,noChildren:h.children.length===0,backstage:dt}),See({children:St,expandedIds:yt,selectedId:vt,onLeafAction:j,visible:jt,treeId:it,backstage:dt})],behaviours:yr([Ks(Eee,[rp((Zt,an)=>{_a.set(Zt,jt)}),er("expand-tree-node",(Zt,an)=>{const{expanded:un,node:wn}=an.event;Dt.set(un?[...Dt.get(),wn]:Dt.get().filter(On=>On!==wn))})]),_a.config({...h.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(Zt,an)=>{const un=Zt.components()[1],wn=Bt(an);an?ev.grow(un):ev.shrink(un),Us.set(un,wn)}})])}},Aee=Zr("tree-event-id"),Tee=(h,j)=>{const nt=h.onLeafAction.getOr(Tt),it=h.onToggleExpand.getOr(Tt),dt=h.defaultExpandedIds,yt=ds(dt),vt=ds(h.defaultSelectedId),St=Zr("tree-id"),Dt=(Bt,jt)=>h.items.map(Zt=>Zt.type==="leaf"?H7({leaf:Zt,selectedId:Bt,onLeafAction:nt,visible:!0,treeId:St,backstage:j}):zD({directory:Zt,selectedId:Bt,onLeafAction:nt,expandedIds:jt,labelTabstopping:!0,treeId:St,backstage:j}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:Dt(vt.get(),yt.get()),behaviours:yr([_s.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Ks(Aee,[er("expand-tree-node",(Bt,jt)=>{const{expanded:Zt,node:an}=jt.event;yt.set(Zt?[...yt.get(),an]:yt.get().filter(un=>un!==an)),it(yt.get(),{expanded:Zt,node:an})})]),Ty.config({channels:{[`update-active-item-${St}`]:{onReceive:(Bt,jt)=>{vt.set(Mt.some(jt.value)),Us.set(Bt,Dt(Mt.some(jt.value),yt.get()))}}}}),Us.config({})])}};var Iee=Object.freeze({__proto__:null,events:(h,j)=>{const it=h.stream.streams.setup(h,j);return xu([er(h.event,it),I_(()=>j.cancel())].concat(h.cancelEvent.map(dt=>[er(dt,()=>j.cancel())]).getOr([])))}});const bV=h=>{const j=ds(null);return F0({readState:()=>({timer:j.get()!==null?"set":"unset"}),setTimer:yt=>{j.set(yt)},cancel:()=>{const yt=j.get();yt!==null&&yt.cancel()}})};var Ree=Object.freeze({__proto__:null,throttle:bV,init:h=>h.stream.streams.state(h)});const Mee=(h,j)=>{const nt=h.stream,it=SD(h.onStream,nt.delay);return j.setTimer(it),(dt,yt)=>{it.throttle(dt,yt),nt.stopEvent&&yt.stop()}};var Pee=[nu("stream",Ip("mode",{throttle:[Qo("delay"),So("stopEvent",!0),Xu("streams",{setup:Mee,state:bV})]})),So("event","input"),Ql("cancelEvent"),w2("onStream")];const U7=Gm({fields:Pee,name:"streaming",active:Iee,state:Ree}),BD=(h,j,nt)=>{const it=$r.getValue(nt);$r.setValue(j,it),vV(j)},V7=(h,j)=>{const nt=h.element,it=e1(nt),dt=nt.dom;Xr(nt,"type")!=="number"&&j(dt,it)},vV=h=>{V7(h,(j,nt)=>j.setSelectionRange(nt.length,nt.length))},Oee=(h,j)=>{V7(h,(nt,it)=>nt.setSelectionRange(j,it.length))},Dee=(h,j,nt)=>{if(h.selectsOver){const it=$r.getValue(j),dt=h.getDisplayText(it),yt=$r.getValue(nt);return h.getDisplayText(yt).indexOf(dt)===0?Mt.some(()=>{BD(h,j,nt),Oee(j,dt.length)}):Mt.none()}else return Mt.none()},W7=Nt("alloy.typeahead.itemexecute"),Nee=(h,j,nt,it)=>{const dt=(Zt,an,un)=>{h.previewing.set(!1);const wn=Vp.getCoupled(Zt,"sandbox");if(Zl.isOpen(wn))$l.getCurrent(wn).each(On=>{Er.getHighlighted(On).fold(()=>{un(On)},()=>{nT(wn,On.element,"keydown",an)})});else{const On=_o=>{$l.getCurrent(_o).each(un)};rD(h,vt(Zt),Zt,wn,it,On,Dy.HighlightMenuAndItem).get(Tt)}},yt=vG(h),vt=Zt=>an=>an.map(un=>{const wn=Dl(un.menus),On=sn(wn,Un=>co(Un.items,go=>go.type==="item"));return $r.getState(Zt).update(Dn(On,Un=>Un.data)),un}),St=Zt=>$l.getCurrent(Zt),Dt="typeaheadevents",Bt=[Fs.config({}),$r.config({onSetValue:h.onSetValue,store:{mode:"dataset",getDataKey:Zt=>e1(Zt.element),getFallbackEntry:Zt=>({value:Zt,meta:{}}),setValue:(Zt,an)=>{I2(Zt.element,h.model.getDisplayText(an))},...h.initialData.map(Zt=>Ns("initialValue",Zt)).getOr({})}}),U7.config({stream:{mode:"throttle",delay:h.responseTime,stopEvent:!1},onStream:(Zt,an)=>{const un=Vp.getCoupled(Zt,"sandbox");if(Fs.isFocused(Zt)&&e1(Zt.element).length>=h.minChars){const On=St(un).bind(Un=>Er.getHighlighted(Un).map($r.getValue));h.previewing.set(!0);const _o=Un=>{St(un).each(go=>{On.fold(()=>{h.model.selectsOver&&Er.highlightFirst(go)},bo=>{Er.highlightBy(go,Bo=>$r.getValue(Bo).value===bo.value),Er.getHighlighted(go).orThunk(()=>(Er.highlightFirst(go),Mt.none()))})})};rD(h,vt(Zt),Zt,un,it,_o,Dy.HighlightJustMenu).get(Tt)}},cancelEvent:JA()}),_s.config({mode:"special",onDown:(Zt,an)=>(dt(Zt,an,Er.highlightFirst),Mt.some(!0)),onEscape:Zt=>{const an=Vp.getCoupled(Zt,"sandbox");return Zl.isOpen(an)?(Zl.close(an),Mt.some(!0)):Mt.none()},onUp:(Zt,an)=>(dt(Zt,an,Er.highlightLast),Mt.some(!0)),onEnter:Zt=>{const an=Vp.getCoupled(Zt,"sandbox"),un=Zl.isOpen(an);if(un&&!h.previewing.get())return St(an).bind(wn=>Er.getHighlighted(wn)).map(wn=>(ls(Zt,W7(),{item:wn}),!0));{const wn=$r.getValue(Zt);return El(Zt,JA()),h.onExecute(an,Zt,wn),un&&Zl.close(an),Mt.some(!0)}}}),_a.config({toggleClass:h.markers.openClass,aria:{mode:"expanded"}}),Vp.config({others:{sandbox:Zt=>FF(h,Zt,{onOpen:()=>_a.on(Zt),onClose:()=>{h.lazyTypeaheadComp.get().each(an=>Yt(an.element,"aria-activedescendant")),_a.off(Zt)}})}}),Ks(Dt,[rp(Zt=>{h.lazyTypeaheadComp.set(Mt.some(Zt))}),I_(Zt=>{h.lazyTypeaheadComp.set(Mt.none())}),fx(Zt=>{const an=Tt;NF(h,vt(Zt),Zt,it,an,Dy.HighlightMenuAndItem).get(Tt)}),er(W7(),(Zt,an)=>{const un=Vp.getCoupled(Zt,"sandbox");BD(h.model,Zt,an.event.item),El(Zt,JA()),h.onItemExecute(Zt,un,an.event.item,$r.getValue(Zt)),Zl.close(un),vV(Zt)})].concat(h.dismissOnBlur?[er(c2(),Zt=>{const an=Vp.getCoupled(Zt,"sandbox");B0(an.element).isNone()&&Zl.close(an)})]:[]))],jt={[Vy()]:[$r.name(),U7.name(),Dt],...h.eventOrder};return{uid:h.uid,dom:_G(Fu(h,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...yt,...Um(h.typeaheadBehaviours,Bt)},eventOrder:jt}},Lee=Nt([Ql("lazySink"),Qo("fetch"),So("minChars",5),So("responseTime",1e3),Hl("onOpen"),So("getHotspot",Mt.some),So("getAnchorOverrides",Nt({})),So("layouts",Mt.none()),So("eventOrder",{}),Ot("model",{},[So("getDisplayText",h=>h.meta!==void 0&&h.meta.text!==void 0?h.meta.text:h.value),So("selectsOver",!0),So("populateFromBrowse",!0)]),Hl("onSetValue"),C0("onExecute"),Hl("onItemExecute"),So("inputClasses",[]),So("inputAttributes",{}),So("inputStyles",{}),So("matchWidth",!0),So("useMinWidth",!1),So("dismissOnBlur",!0),mx(["openClass"]),Ql("initialData"),Ql("listRole"),Hm("typeaheadBehaviours",[Fs,$r,U7,_s,_a,Vp]),tu("lazyTypeaheadComp",()=>ds(Mt.none)),tu("previewing",()=>ds(!0))].concat(bG()).concat(sD())),_V=Nt([kv({schema:[O_()],name:"menu",overrides:h=>({fakeFocus:!0,onHighlightItem:(j,nt,it)=>{h.previewing.get()?h.lazyTypeaheadComp.get().each(dt=>{Dee(h.model,dt,it).fold(()=>{h.model.selectsOver?(Er.dehighlight(nt,it),h.previewing.set(!0)):h.previewing.set(!1)},yt=>{yt(),h.previewing.set(!1)})}):h.lazyTypeaheadComp.get().each(dt=>{h.model.populateFromBrowse&&BD(h.model,dt,it),Ls(it.element,"id").each(yt=>Wo(dt.element,"aria-activedescendant",yt))})},onExecute:(j,nt)=>h.lazyTypeaheadComp.get().map(it=>(ls(it,W7(),{item:nt}),!0)),onHover:(j,nt)=>{h.previewing.set(!1),h.lazyTypeaheadComp.get().each(it=>{h.model.populateFromBrowse&&BD(h.model,it,nt)})}})})]),Fee=g0({name:"Typeahead",configFields:Lee(),partFields:_V(),factory:Nee}),o_=h=>({...h,toCached:()=>o_(h.toCached()),bindFuture:Dt=>o_(h.bind(Bt=>Bt.fold(jt=>j0.pure(Js.error(jt)),jt=>Dt(jt)))),bindResult:Dt=>o_(h.map(Bt=>Bt.bind(Dt))),mapResult:Dt=>o_(h.map(Bt=>Bt.map(Dt))),mapError:Dt=>o_(h.map(Bt=>Bt.mapError(Dt))),foldResult:(Dt,Bt)=>h.map(jt=>jt.fold(Dt,Bt)),withTimeout:(Dt,Bt)=>o_(j0.nu(jt=>{let Zt=!1;const an=setTimeout(()=>{Zt=!0,jt(Js.error(Bt()))},Dt);h.get(un=>{Zt||(clearTimeout(an),jt(un))})}))}),xV=h=>o_(j0.nu(h)),q7=h=>o_(j0.pure(Js.value(h))),CV={nu:xV,wrap:o_,pure:q7,value:q7,error:h=>o_(j0.pure(Js.error(h))),fromResult:h=>o_(j0.pure(h)),fromFuture:h=>o_(h.map(Js.value)),fromPromise:h=>xV(j=>{h.then(nt=>{j(Js.value(nt))},nt=>{j(Js.error(nt))})})},$D=(h,j,nt=[],it,dt,yt,vt)=>{const St=j.fold(()=>({}),jt=>({action:jt})),Dt={buttonBehaviours:yr([a1.item(()=>!h.enabled||vt.checkUiComponentContext(h.context).shouldDisable),Yp(()=>vt.checkUiComponentContext(h.context)),lp.config({}),...yt.map(jt=>Np.config(vt.tooltips.getConfig({tooltipText:vt.translate(jt)}))).toArray(),Ks("button press",[E3("click")])].concat(nt)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...St},Bt=Fu(Dt,{dom:it});return Fu(Bt,{components:dt})},kV=(h,j,nt,it=[],dt)=>{const yt=h.tooltip.map(Bt=>({"aria-label":nt.translate(Bt)})).getOr({}),vt={tag:"button",classes:["tox-tbtn"],attributes:{...yt,"data-mce-name":dt}},St=h.icon.map(Bt=>M7(Bt,nt.icons)),Dt=IS([St]);return $D(h,j,it,vt,Dt,h.tooltip,nt)},Z7=h=>{switch(h){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},SV=(h,j,nt,it=[],dt=[])=>{const yt=nt.translate(h.text),vt=h.icon.map(un=>M7(un,nt.icons)),St=[vt.getOrThunk(()=>_p(yt))],Dt=h.buttonType.getOr(!h.primary&&!h.borderless?"secondary":"primary"),Zt={tag:"button",classes:[...Z7(Dt),...vt.isSome()?["tox-button--icon"]:[],...h.borderless?["tox-button--naked"]:[],...dt],attributes:{"aria-label":yt,"data-mce-name":h.text}},an=h.icon.map(Nt(yt));return $D(h,j,it,Zt,St,an,nt)},q_=(h,j,nt,it=[],dt=[])=>{const yt=SV(h,Mt.some(j),nt,it,dt);return Im.sketch(yt)},c4=(h,j)=>nt=>{j==="custom"?ls(nt,Dw,{name:h,value:{}}):j==="submit"?El(nt,FI):j==="cancel"?El(nt,MS):console.error("Unknown button type: ",j)},GD=(h,j)=>j==="menu",$ee=(h,j)=>j==="custom"||j==="cancel"||j==="submit",K7=(h,j)=>j==="togglebutton",Gee=(h,j,nt)=>{var it,dt;const yt=h.icon.map(bo=>iC(bo,j.icons)).map(iu),vt=bo=>{ls(bo,Dw,{name:h.name,value:{setIcon:Bo=>{yt.map(Go=>Go.getOpt(bo).each(Sr=>{Us.set(Sr,[iC(Bo,j.icons)])}))}}})},St=h.buttonType.getOr(h.primary?"primary":"secondary"),Dt={...h,name:(it=h.name)!==null&&it!==void 0?it:"",primary:St==="primary",tooltip:h.tooltip,enabled:(dt=h.enabled)!==null&&dt!==void 0?dt:!1,borderless:!1},Bt=Dt.tooltip.or(h.text).map(bo=>({"aria-label":j.translate(bo)})).getOr({}),jt=Z7(St??"secondary"),Zt=h.icon.isSome()&&h.text.isSome(),an={tag:"button",classes:[...jt.concat(h.icon.isSome()?["tox-button--icon"]:[]),...h.active?["tox-button--enabled"]:[],...Zt?["tox-button--icon-and-text"]:[]],attributes:{...Bt,...Ct(nt)?{"data-mce-name":nt}:{}}},un=[],wn=j.translate(h.text.getOr("")),On=_p(wn),Un=[...IS([yt.map(bo=>bo.asSpec())]),...h.text.isSome()?[On]:[]],go=$D(Dt,Mt.some(vt),un,an,Un,h.tooltip,j);return Im.sketch(go)},WI=(h,j,nt)=>{if(GD(h,j)){const it=()=>vt,dt=h,yt={...h,type:"menubutton",search:Mt.none(),onSetup:St=>(St.setEnabled(h.enabled),Tt),fetch:fV(dt.items,it,nt)},vt=iu(RA(yt,"tox-tbtn",nt,Mt.none(),!0,h.text.or(h.tooltip).getOrUndefined()));return vt.asSpec()}else if($ee(h,j)){const it=c4(h.name,j),dt={...h,context:j==="cancel"?"any":h.context,borderless:!1};return q_(dt,it,nt.shared.providers,[])}else{if(K7(h,j))return Gee(h,nt.shared.providers,h.text.or(h.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",j),new Error("Unknown footer button type")}},EV=(h,j)=>{const nt=c4(h.name,"custom");return LJ(Mt.none(),bu.parts.field({factory:Im,...SV(h,Mt.some(nt),j,[o4(""),t_.self()])}))},Y7={type:"separator"},jee=h=>({type:"menuitem",value:h.url,text:h.title,meta:{attach:h.attach},onAction:Tt}),X7=(h,j)=>({type:"menuitem",value:j,text:h,meta:{attach:void 0},onAction:Tt}),AV=h=>Dn(h,jee),Hee=(h,j)=>co(j,nt=>nt.type===h),TV=(h,j)=>AV(Hee(h,j)),J7=h=>TV("header",h.targets),Uee=h=>TV("anchor",h.targets),Vee=h=>Mt.from(h.anchorTop).map(j=>X7("<top>",j)).toArray(),IV=h=>Mt.from(h.anchorBottom).map(j=>X7("<bottom>",j)).toArray(),RV=h=>Dn(h,j=>X7(j,j)),Wee=h=>yo(h,(j,nt)=>j.length===0||nt.length===0?j.concat(nt):j.concat(Y7,nt),[]),Q7=(h,j)=>{const nt=h.toLowerCase();return co(j,it=>{var dt;const yt=it.meta!==void 0&&it.meta.text!==void 0?it.meta.text:it.text,vt=(dt=it.value)!==null&&dt!==void 0?dt:"";return Ws(yt.toLowerCase(),nt)||Ws(vt.toLowerCase(),nt)})},qee=(h,j,nt)=>{var it,dt;const yt=$r.getValue(j),vt=(dt=(it=yt==null?void 0:yt.meta)===null||it===void 0?void 0:it.text)!==null&&dt!==void 0?dt:yt.value;return nt.getLinkInformation().fold(()=>[],Dt=>{const Bt=Q7(vt,RV(nt.getHistory(h)));return h==="file"?Wee([Bt,Q7(vt,J7(Dt)),Q7(vt,Nn([Vee(Dt),Uee(Dt),IV(Dt)]))]):Bt})},MV=Zr("aria-invalid"),PV=(h,j,nt,it)=>{const dt=j.shared.providers,yt=go=>{const bo=$r.getValue(go);nt.addToHistory(bo.value,h.filetype)},vt={...it.map(go=>({initialData:go})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":MV,type:"url"},minChars:0,responseTime:0,fetch:go=>{const bo=qee(h.filetype,go,nt),Bo=UI(bo,j_.BUBBLE_TO_SANDBOX,j,{isHorizontalMenu:!1,search:Mt.none()});return j0.pure(Bo)},getHotspot:go=>wn.getOpt(go),onSetValue:(go,bo)=>{go.hasConfigured(Nw)&&Nw.run(go).get(Tt)},typeaheadBehaviours:yr([...nt.getValidationHandler().map(go=>Nw.config({getRoot:bo=>Pm(bo.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(bo,Bo)=>{jt.getOpt(bo).each(Go=>{Wo(Go.element,"title",dt.translate(Bo))})}},validator:{validate:bo=>{const Bo=$r.getValue(bo);return CV.nu(Go=>{go({type:h.filetype,url:Bo.value},Sr=>{if(Sr.status==="invalid"){const Vr=Js.error(Sr.message);Go(Vr)}else{const Vr=Js.value(Sr.message);Go(Vr)}})})},validateOnLoad:!1}})).toArray(),Os.config({disabled:()=>!h.enabled||dt.checkUiComponentContext(h.context).shouldDisable}),lp.config({}),Ks("urlinput-events",[er(N1(),go=>{const bo=e1(go.element),Bo=bo.trim();Bo!==bo&&I2(go.element,Bo),h.filetype==="file"&&ls(go,_b,{name:h.name})}),er(T_(),go=>{ls(go,_b,{name:h.name}),yt(go)}),er(rE(),go=>{ls(go,_b,{name:h.name}),yt(go)})])]),eventOrder:{[N1()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:go=>go.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:j.shared.getSink,parts:{menu:E5(!1,1,"normal")},onExecute:(go,bo,Bo)=>{ls(bo,FI,{})},onItemExecute:(go,bo,Bo,Go)=>{yt(go),ls(go,_b,{name:h.name})}},St=bu.parts.field({...vt,factory:Fee}),Dt=h.label.map(go=>RS(go,dt)),jt=iu(((go,bo,Bo=go,Go=go)=>s1(Bo,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+go],attributes:{title:dt.translate(Go),"aria-live":"polite",...bo.fold(()=>({}),Sr=>({id:Sr}))}},dt.icons))("invalid",Mt.some(MV),"warning")),Zt=iu({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[jt.asSpec()]}),an=nt.getUrlPicker(h.filetype),un=Zr("browser.url.event"),wn=iu({dom:{tag:"div",classes:["tox-control-wrap"]},components:[St,Zt.asSpec()],behaviours:yr([Os.config({disabled:()=>!h.enabled||dt.checkUiComponentContext(h.context).shouldDisable})])}),On=iu(q_({context:h.context,name:h.name,icon:Mt.some("browse"),text:h.picker_text.or(h.label).getOr(""),enabled:h.enabled,primary:!1,buttonType:Mt.none(),borderless:!0},go=>El(go,un),dt,[],["tox-browse-url"])),_o=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Nn([[wn.asSpec()],an.map(()=>On.asSpec()).toArray()])}),Un=go=>{$l.getCurrent(go).each(bo=>{const Bo=$r.getValue(bo),Go={fieldname:h.name,...Bo};an.each(Sr=>{Sr(Go).get(Vr=>{$r.setValue(bo,Vr),ls(go,_b,{name:h.name})})})})};return bu.sketch({dom:zJ(),components:Dt.toArray().concat([_o()]),fieldBehaviours:yr([Os.config({disabled:()=>!h.enabled||dt.checkUiComponentContext(h.context).shouldDisable,onDisabled:go=>{bu.getField(go).each(Os.disable),On.getOpt(go).each(Os.disable)},onEnabled:go=>{bu.getField(go).each(Os.enable),On.getOpt(go).each(Os.enable)}}),Yp(()=>dt.checkUiComponentContext(h.context)),Ks("url-input-events",[er(un,Un)])])})},Nx=(h,j)=>{const nt=j6(h.icon,j.icons);return Px.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${h.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:h.url?void 0:nt},components:h.url?[Im.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:nt,attributes:{title:j.translate(h.iconTooltip)}},action:it=>ls(it,Dw,{name:"alert-banner",value:h.url}),buttonBehaviours:yr([sG()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:j.translate(h.text)}}]})},e9=(h,j)=>{h.dom.checked=j},Zee=h=>h.dom.checked,Kee=(h,j,nt)=>{const it=Dt=>(Dt.element.dom.click(),Mt.some(!0)),dt=bu.parts.field({factory:{sketch:Qt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:yr([t_.self(),Os.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable,onDisabled:Dt=>{Pm(Dt.element).each(Bt=>Kp(Bt,"tox-checkbox--disabled"))},onEnabled:Dt=>{Pm(Dt.element).each(Bt=>wu(Bt,"tox-checkbox--disabled"))}}),lp.config({}),Fs.config({}),FU(nt,Zee,e9),_s.config({mode:"special",onEnter:it,onSpace:it,stopSpaceKeyup:!0}),Ks("checkbox-events",[er(T_(),(Dt,Bt)=>{ls(Dt,_b,{name:h.name})})])])}),yt=bu.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[_p(j.translate(h.label))],behaviours:yr([zI.config({})])}),vt=Dt=>s1(Dt==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+Dt]},j.icons),St=iu({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[vt("checked"),vt("unchecked")]});return bu.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[dt,St.asSpec(),yt],fieldBehaviours:yr([Os.config({disabled:()=>!h.enabled||j.checkUiComponentContext(h.context).shouldDisable}),Yp(()=>j.checkUiComponentContext(h.context))])})},Yee=(h,j)=>{const nt=["tox-form__group",...h.stretched?["tox-form__group--stretched"]:[]],it=Ks("htmlpanel",[rp(dt=>{h.onInit(dt.element.dom)})]);return h.presets==="presentation"?Px.sketch({dom:{tag:"div",classes:nt,innerHtml:h.html},containerBehaviours:yr([Np.config({...j.tooltips.getConfig({tooltipText:"",onShow:dt=>{ap(dt.element,"[data-mce-tooltip]:hover").orThunk(()=>B0(dt.element)).each(yt=>{Ls(yt,"data-mce-tooltip").each(vt=>{Np.setComponents(dt,j.tooltips.getComponents({tooltipText:vt}))})})}}),mode:"children-normal",anchor:dt=>({type:"node",node:ap(dt.element,"[data-mce-tooltip]:hover").orThunk(()=>B0(dt.element).filter(yt=>Ls(yt,"data-mce-tooltip").isSome())),root:dt.element,layouts:{onLtr:Nt([im,yu,vm,i0,_m,xm]),onRtl:Nt([im,yu,vm,i0,_m,xm])},bubble:n1(0,-2,{})})}),it])}):Px.sketch({dom:{tag:"div",classes:nt,innerHtml:h.html,attributes:{role:"document"}},containerBehaviours:yr([lp.config({}),Fs.config({}),it])})},Vm=h=>(j,nt,it,dt,yt)=>or(nt,"name").fold(()=>h(nt,dt,Mt.none(),yt),vt=>j.field(vt,h(nt,dt,or(it,vt),yt))),Xee=h=>(j,nt,it,dt,yt)=>{const vt=Fu(nt,{source:"dynamic"});return Vm(h)(j,vt,it,dt,yt)},OV={bar:Vm((h,j)=>cD(h,j.shared)),collection:Vm((h,j,nt)=>BJ(h,j.shared.providers,nt)),alertbanner:Vm((h,j)=>Nx(h,j.shared.providers)),input:Vm((h,j,nt)=>aV(h,j.shared.providers,nt)),textarea:Vm((h,j,nt)=>DD(h,j.shared.providers,nt)),label:Vm((h,j,nt,it)=>QQ(h,j.shared,it)),iframe:Xee((h,j,nt)=>a4(h,j.shared.providers,nt)),button:Vm((h,j)=>EV(h,j.shared.providers)),checkbox:Vm((h,j,nt)=>Kee(h,j.shared.providers,nt)),colorinput:Vm((h,j,nt)=>QH(h,j.shared,j.colorinput,nt)),colorpicker:Vm((h,j,nt)=>zQ(h,j.shared.providers,nt)),dropzone:Vm((h,j,nt)=>GQ(h,j.shared.providers,nt)),grid:Vm((h,j)=>jQ(h,j.shared)),listbox:Vm((h,j,nt)=>QU(h,j,nt)),selectbox:Vm((h,j,nt)=>iee(h,j.shared.providers,nt)),sizeinput:Vm((h,j)=>dee(h,j.shared.providers)),slider:Vm((h,j,nt)=>fee(h,j.shared.providers,nt)),urlinput:Vm((h,j,nt)=>PV(h,j,j.urlinput,nt)),customeditor:Vm($Q),htmlpanel:Vm((h,j)=>Yee(h,j.shared.providers)),imagepreview:Vm((h,j,nt)=>I7(h,nt)),table:Vm((h,j)=>iV(h,j.shared.providers)),tree:Vm((h,j)=>Tee(h,j)),panel:Vm((h,j)=>ree(h,j))},DV={field:(h,j)=>j,record:Nt([])},Jee=(h,j,nt,it,dt)=>{const yt=Fu(it,{shared:{interpreter:vt=>NV(h,vt,nt,yt,dt)}});return NV(h,j,nt,yt,dt)},NV=(h,j,nt,it,dt)=>or(OV,j.type).fold(()=>(console.error(`Unknown factory type "${j.type}", defaulting to container: `,j),j),yt=>yt(h,j,nt,it,dt)),A0=(h,j,nt,it)=>NV(DV,h,j,nt,it),Bw="layout-inset",t9=h=>h.x,u4=(h,j)=>h.x+h.width/2-j.width/2,n9=(h,j)=>h.x+h.width-j.width,o9=h=>h.y,r9=(h,j)=>h.y+h.height-j.height,LV=(h,j)=>h.y+h.height/2-j.height/2,jD=(h,j,nt)=>d0(n9(h,j),r9(h,j),nt.insetSouthwest(),kT(),"southwest",f0(h,{right:0,bottom:3}),Bw),HD=(h,j,nt)=>d0(t9(h),r9(h,j),nt.insetSoutheast(),oR(),"southeast",f0(h,{left:1,bottom:3}),Bw),d4=(h,j,nt)=>d0(n9(h,j),o9(h),nt.insetNorthwest(),nR(),"northwest",f0(h,{right:0,top:2}),Bw),f4=(h,j,nt)=>d0(t9(h),o9(h),nt.insetNortheast(),CT(),"northeast",f0(h,{left:1,top:2}),Bw),r_=(h,j,nt)=>d0(u4(h,j),o9(h),nt.insetNorth(),Kr(),"north",f0(h,{top:2}),Bw),LS=(h,j,nt)=>d0(u4(h,j),r9(h,j),nt.insetSouth(),wE(),"south",f0(h,{bottom:3}),Bw),s9=(h,j,nt)=>d0(n9(h,j),LV(h,j),nt.insetEast(),OM(),"east",f0(h,{right:0}),Bw),i9=(h,j,nt)=>d0(t9(h),LV(h,j),nt.insetWest(),rR(),"west",f0(h,{left:1}),Bw),Qee=h=>{switch(h){case"north":return r_;case"northeast":return f4;case"northwest":return d4;case"south":return LS;case"southeast":return HD;case"southwest":return jD;case"east":return s9;case"west":return i9}},a9=(h,j,nt,it,dt)=>fR(it).map(Qee).getOr(r_)(h,j,nt,it,dt),ete=h=>{switch(h){case"north":return LS;case"northeast":return HD;case"northwest":return jD;case"south":return r_;case"southeast":return f4;case"southwest":return d4;case"east":return i9;case"west":return s9}},tte=(h,j,nt,it,dt)=>fR(it).map(ete).getOr(r_)(h,j,nt,it,dt),qI={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},Zie=(h,j,nt)=>{const dt={maxHeightFunction:yw()},yt=()=>({type:"node",root:Dm(yp(h())),node:Mt.from(h()),bubble:n1(12,12,qI),layouts:{onRtl:()=>[f4],onLtr:()=>[d4]},overrides:dt}),vt=()=>({type:"hotspot",hotspot:j(),bubble:n1(-12,12,qI),layouts:{onRtl:()=>[vm,_m,im],onLtr:()=>[_m,vm,im]},overrides:dt});return()=>nt()?yt():vt()},Kie=(h,j,nt,it)=>{const yt={maxHeightFunction:yw()},vt=()=>({type:"node",root:Dm(yp(j())),node:Mt.from(j()),bubble:n1(12,12,qI),layouts:{onRtl:()=>[r_],onLtr:()=>[r_]},overrides:yt}),St=()=>h?{type:"node",root:Dm(yp(j())),node:Mt.from(j()),bubble:n1(0,-K0(j()),qI),layouts:{onRtl:()=>[yu],onLtr:()=>[yu]},overrides:yt}:{type:"hotspot",hotspot:nt(),bubble:n1(0,0,qI),layouts:{onRtl:()=>[yu],onLtr:()=>[yu]},overrides:yt};return()=>it()?vt():St()},nte=(h,j,nt)=>{const it=()=>({type:"node",root:Dm(yp(h())),node:Mt.from(h()),layouts:{onRtl:()=>[r_],onLtr:()=>[r_]}}),dt=()=>({type:"hotspot",hotspot:j(),layouts:{onRtl:()=>[im],onLtr:()=>[im]}});return()=>nt()?it():dt()},ote=(h,j)=>()=>({type:"selection",root:j(),getSelection:()=>{const nt=h.selection.getRng(),it=h.model.table.getSelectedCells();if(it.length>1){const dt=it[0],yt=it[it.length-1],vt={firstCell:io.fromDom(dt),lastCell:io.fromDom(yt)};return Mt.some(vt)}return Mt.some(eS.range(io.fromDom(nt.startContainer),nt.startOffset,io.fromDom(nt.endContainer),nt.endOffset))}}),rte=h=>j=>({type:"node",root:h(),node:j}),FV=(h,j,nt,it)=>{const dt=$_(h),yt=()=>io.fromDom(h.getBody()),vt=()=>io.fromDom(h.getContentAreaContainer()),St=()=>dt||!it();return{inlineDialog:Zie(vt,j,St),inlineBottomDialog:Kie(h.inline,vt,nt,St),banner:nte(vt,j,St),cursor:ote(h,yt),node:rte(yt)}},l9=h=>(j,nt)=>{CH(h)(j,nt)},ste=h=>()=>pH(h),ite=h=>j=>nD(h,j),zV=h=>j=>hH(h,j),ate=h=>({colorPicker:l9(h),hasCustomColors:ste(h),getColors:ite(h),getColorCols:zV(h)}),lte=h=>()=>hO(h),cte=h=>({isDraggableModal:lte(h)}),ute=h=>{const j=ds(S6(h)?"bottom":"top");return{isPositionedAtTop:()=>j.get()==="top",getDockingMode:j.get,setDockingMode:j.set}},UD=h=>hu(h,"items"),c9=h=>hu(h,"format"),BV=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],dte=h=>Ds(h,"items"),fte=h=>Ds(h,"block"),hte=h=>Ds(h,"inline"),$V=h=>Ds(h,"selector"),GV=h=>yo(h,(j,nt)=>{if(dte(nt)){const it=GV(nt.items);return{customFormats:j.customFormats.concat(it.customFormats),formats:j.formats.concat([{title:nt.title,items:it.formats}])}}else if(hte(nt)||fte(nt)||$V(nt)){const dt=`custom-${_e(nt.name)?nt.name:nt.title.toLowerCase()}`;return{customFormats:j.customFormats.concat([{name:dt,format:nt}]),formats:j.formats.concat([{title:nt.title,format:dt,icon:nt.icon}])}}else return{...j,formats:j.formats.concat(nt)}},{customFormats:[],formats:[]}),VD=(h,j)=>{const nt=GV(j),it=dt=>{xo(dt,yt=>{h.formatter.has(yt.name)||h.formatter.register(yt.name,yt.format)})};return h.formatter?it(nt.customFormats):h.on("init",()=>{it(nt.customFormats)}),nt.formats},jV=h=>p6(h).map(j=>{const nt=VD(h,j);return T$(h)?BV.concat(nt):nt}).getOr(BV),WD=h=>{const j=Do(h);return j.length===1&&qn(j,"title")},HV=(h,j,nt)=>({...h,type:"formatter",isSelected:j(h.format),getStylePreview:nt(h.format)}),qD=(h,j,nt,it)=>{const dt=Dt=>HV(Dt,nt,it),yt=Dt=>{const Bt=St(Dt.items);return{...Dt,type:"submenu",getStyleItems:Nt(Bt)}},vt=Dt=>{const Bt=_e(Dt.name)?Dt.name:Zr(Dt.title),jt=`custom-${Bt}`,Zt={...Dt,type:"formatter",format:jt,isSelected:nt(jt),getStylePreview:it(jt)};return h.formatter.register(Bt,Zt),Zt},St=Dt=>Dn(Dt,Bt=>UD(Bt)?yt(Bt):c9(Bt)?dt(Bt):WD(Bt)?{...Bt,type:"separator"}:vt(Bt));return St(j)},h4=h=>{const j=St=>()=>h.formatter.match(St),nt=St=>()=>{const Dt=h.formatter.get(St);return Dt!==void 0?Mt.some({tag:Dt.length>0&&(Dt[0].inline||Dt[0].block)||"div",styles:h.dom.parseStyle(h.formatter.getCssText(St))}):Mt.none()},it=ds([]),dt=ds([]),yt=ds(!1);return h.on("PreInit",St=>{const Dt=jV(h),Bt=qD(h,Dt,j,nt);it.set(Bt)}),h.on("addStyleModifications",St=>{const Dt=qD(h,St.items,j,nt);dt.set(Dt),yt.set(St.replace)}),{getData:()=>{const St=yt.get()?[]:it.get(),Dt=dt.get();return St.concat(Dt)}}},UV=h=>{let it=0;const dt=()=>it>0,yt=St=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[_p(St.tooltipText)]}];return{getConfig:St=>({delayForShow:()=>dt()?60:300,delayForHide:Nt(300),exclusive:!0,lazySink:h,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:yt(St),onShow:(Dt,Bt)=>{it++,St.onShow&&St.onShow(Dt,Bt)},onHide:(Dt,Bt)=>{it--,St.onHide&&St.onHide(Dt,Bt)},onSetup:St.onSetup}),getComponents:yt}},pte=h=>Ct(h)&&h.nodeType===1,VV=sC.trim,u9=h=>j=>!!(pte(j)&&(j.contentEditable===h||j.getAttribute("data-mce-contenteditable")===h)),WV=u9("true"),gte=u9("false"),ZD=(h,j,nt,it,dt)=>({type:h,title:j,url:nt,level:it,attach:dt}),KD=h=>{let j=h;for(;j=j.parentNode;){const nt=j.contentEditable;if(nt&&nt!=="inherit")return WV(j)}return!1},mte=(h,j)=>Dn(a0(io.fromDom(j),h),nt=>nt.dom),qV=h=>h.innerText||h.textContent,ZI=h=>h.id?h.id:Zr("h"),ZV=h=>h&&h.nodeName==="A"&&(h.id||h.name)!==void 0,KV=h=>ZV(h)&&YD(h),d9=h=>h&&/^(H[1-6])$/.test(h.nodeName),YD=h=>KD(h)&&!gte(h),f9=h=>d9(h)&&YD(h),yte=h=>d9(h)?parseInt(h.nodeName.substr(1),10):0,bte=h=>{var j;const nt=ZI(h),it=()=>{h.id=nt};return ZD("header",(j=qV(h))!==null&&j!==void 0?j:"","#"+nt,yte(h),it)},vte=h=>{const j=h.id||h.name,nt=qV(h);return ZD("anchor",nt||"#"+j,"#"+j,0,Tt)},h9=h=>Dn(co(h,f9),bte),_te=h=>Dn(co(h,KV),vte),xte=h=>mte("h1,h2,h3,h4,h5,h6,a:not([href])",h),wte=h=>VV(h.title).length>0,Cte={find:h=>{const j=xte(h);return co(h9(j).concat(_te(j)),wte)}},XD="tinymce-url-history",YV=5,p9=h=>_e(h)&&/^https?/.test(h),kte=h=>ct(h)&&h.length<=YV&&kn(h,p9),KI=h=>ot(h)&&Yr(h,j=>!kte(j)).isNone(),XV=()=>{const h=bA.getItem(XD);if(h===null)return{};let j;try{j=JSON.parse(h)}catch(nt){if(nt instanceof SyntaxError)return console.log("Local storage "+XD+" was not valid JSON",nt),{};throw nt}return KI(j)?j:(console.log("Local storage "+XD+" was not valid format",j),{})},Ste=h=>{if(!KI(h))throw new Error(`Bad format for history:
`+JSON.stringify(h));bA.setItem(XD,JSON.stringify(h))},g9=h=>{const j=XV();return or(j,h).getOr([])},JV=(h,j)=>{if(!p9(h))return;const nt=XV(),it=or(nt,j).getOr([]),dt=co(it,yt=>yt!==h);nt[j]=[h].concat(dt).slice(0,YV),Ste(nt)},QV=h=>!!h,Ete=h=>xr(sC.makeMap(h,/[, ]/),QV),m9=h=>Mt.from(b6(h)),Ate=h=>{const j=Mt.from(fO(h)).filter(QV).map(Ete);return m9(h).fold(pn,nt=>j.fold(hn,it=>Do(it).length>0?it:!1))},Tte=(h,j)=>{const nt=Ate(h);return mt(nt)?nt?m9(h):Mt.none():nt[j]?m9(h):Mt.none()},Ite=(h,j)=>Tte(h,j).map(nt=>it=>j0.nu(dt=>{const yt=(St,Dt)=>{if(!_e(St))throw new Error("Expected value to be string");if(Dt!==void 0&&!ot(Dt))throw new Error("Expected meta to be a object");dt({value:St,meta:Dt})},vt={filetype:j,fieldname:it.fieldname,...Mt.from(it.meta).getOr({})};nt.call(h,yt,it.value,vt)})),eW=h=>Mt.from(h).filter(_e).getOrUndefined(),Rte=h=>v6(h)?Mt.some({targets:Cte.find(h.getBody()),anchorTop:eW(_6(h)),anchorBottom:eW(L$(h))}):Mt.none(),Mte=h=>Mt.from(D$(h)),Xie=h=>({getHistory:g9,addToHistory:JV,getLinkInformation:()=>Rte(h),getValidationHandler:()=>Mte(h),getUrlPicker:j=>Ite(h,j)}),Pte=(h,j,nt,it)=>{const dt=ds(!1),yt=ute(j),vt={icons:()=>j.ui.registry.getAll().icons,menuItems:()=>j.ui.registry.getAll().menuItems,translate:Y1.translate,isDisabled:()=>!j.ui.isEnabled(),getOption:j.options.get,tooltips:UV(h.dialog),checkUiComponentContext:Un=>{const[go,bo=""]=Un.split(":"),Bo=j.ui.registry.getAll().contexts,Go=or(Bo,go).fold(()=>or(Bo,"mode").map(Sr=>Sr("design")).getOr(!1),Sr=>bo.charAt(0)==="!"?!Sr(bo.slice(1)):Sr(bo));return{contextType:go,shouldDisable:!Go}}},St=Xie(j),Dt=h4(j),Bt=ate(j),jt=cte(j),Zt=()=>dt.get(),an=Un=>dt.set(Un),un={shared:{providers:vt,anchors:FV(j,nt,it,yt.isPositionedAtTop),header:yt},urlinput:St,styles:Dt,colorinput:Bt,dialog:jt,isContextMenuOpen:Zt,setContextMenuState:an},wn=Un=>Mt.none(),On={...un,shared:{...un.shared,interpreter:Un=>A0(Un,{},On,wn),getSink:h.popup}},_o={...un,shared:{...un.shared,interpreter:Un=>A0(Un,{},_o,wn),getSink:h.dialog}};return{popup:On,dialog:_o}},tW=(h,j,nt)=>{const it=(Yo,qr)=>{xo([j,...nt],Lr=>{Lr.broadcastEvent(Yo,qr)})},dt=(Yo,qr)=>{xo([j,...nt],Lr=>{Lr.broadcastOn([Yo],qr)})},yt=Yo=>dt(Cx(),{target:Yo.target}),vt=xy(),St=ny(vt,"touchstart",yt),Dt=ny(vt,"touchmove",Yo=>it(lL(),Yo)),Bt=ny(vt,"touchend",Yo=>it(U4(),Yo)),jt=ny(vt,"mousedown",yt),Zt=ny(vt,"mouseup",Yo=>{Yo.raw.button===0&&dt(YT(),{target:Yo.target})}),an=Yo=>dt(Cx(),{target:io.fromDom(Yo.target)}),un=Yo=>{Yo.button===0&&dt(YT(),{target:io.fromDom(Yo.target)})},wn=()=>{xo(h.editorManager.get(),Yo=>{h!==Yo&&Yo.dispatch("DismissPopups",{relatedTarget:h})})},On=Yo=>it(nw(),qM(Yo)),_o=Yo=>{dt(Sw(),{}),it(u2(),qM(Yo))},Un=yp(io.fromDom(h.getElement())),go=hR(Un,"scroll",Yo=>{requestAnimationFrame(()=>{const qr=h.getContainer();if(qr!=null){const Qr=xS(h,j.element).map(Pl=>[Pl.element,...Pl.others]).getOr([]);nr(Qr,Pl=>Yl(Pl,Yo.target))&&(h.dispatch("ElementScroll",{target:Yo.target.dom}),it(w3(),Yo))}})}),bo=()=>dt(Sw(),{}),Bo=Yo=>{Yo.state&&dt(Cx(),{target:io.fromDom(h.getContainer())})},Go=Yo=>{dt(Cx(),{target:io.fromDom(Yo.relatedTarget.getContainer())})},Sr=Yo=>h.dispatch("focusin",Yo),Vr=Yo=>h.dispatch("focusout",Yo);h.on("PostRender",()=>{h.on("click",an),h.on("tap",an),h.on("mouseup",un),h.on("mousedown",wn),h.on("ScrollWindow",On),h.on("ResizeWindow",_o),h.on("ResizeEditor",bo),h.on("AfterProgressState",Bo),h.on("DismissPopups",Go),xo([j,...nt],Yo=>{Yo.element.dom.addEventListener("focusin",Sr),Yo.element.dom.addEventListener("focusout",Vr)})}),h.on("remove",()=>{h.off("click",an),h.off("tap",an),h.off("mouseup",un),h.off("mousedown",wn),h.off("ScrollWindow",On),h.off("ResizeWindow",_o),h.off("ResizeEditor",bo),h.off("AfterProgressState",Bo),h.off("DismissPopups",Go),xo([j,...nt],Yo=>{Yo.element.dom.removeEventListener("focusin",Sr),Yo.element.dom.removeEventListener("focusout",Vr)}),jt.unbind(),St.unbind(),Dt.unbind(),Bt.unbind(),Zt.unbind(),go.unbind()}),h.on("detach",()=>{xo([j,...nt],$2),xo([j,...nt],Yo=>Yo.destroy())})},Wm=XR,s_=$P,nW=Nt([So("shell",!1),Qo("makeItem"),So("setupItem",Tt),Cv.field("listBehaviours",[Us])]),Ote=Jy({name:"items",overrides:()=>({behaviours:yr([Us.config({})])})}),Dte=Nt([Ote]),Nte=Nt("CustomList"),Lte=(h,j,nt,it)=>{const dt=(St,Dt)=>{vt(St).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},Bt=>{const jt=Us.contents(Bt),Zt=Dt.length,an=Zt-jt.length,un=an>0?oo(an,()=>h.makeItem()):[],wn=jt.slice(Zt);xo(wn,_o=>Us.remove(Bt,_o)),xo(un,_o=>Us.append(Bt,_o));const On=Us.contents(Bt);xo(On,(_o,Un)=>{h.setupItem(St,_o,Dt[Un],Un)})})},yt=h.shell?{behaviours:[Us.config({})],components:[]}:{behaviours:[],components:j},vt=St=>h.shell?Mt.some(St):zu(St,h,"items");return{uid:h.uid,dom:h.dom,components:yt.components,behaviours:Um(h.listBehaviours,yt.behaviours),apis:{setItems:dt}}},oW=g0({name:Nte(),configFields:nW(),partFields:Dte(),factory:Lte,apis:{setItems:(h,j,nt)=>{h.setItems(j,nt)}}}),YI=Nt([Qo("dom"),So("shell",!0),Hm("toolbarBehaviours",[Us])]),rW=Nt([Jy({name:"groups",overrides:()=>({behaviours:yr([Us.config({})])})})]),zte=(h,j,nt,it)=>{const dt=(St,Dt)=>{yt(St).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},Bt=>{Us.set(Bt,Dt)})},yt=St=>h.shell?Mt.some(St):zu(St,h,"groups"),vt=h.shell?{behaviours:[Us.config({})],components:[]}:{behaviours:[],components:j};return{uid:h.uid,dom:h.dom,components:vt.components,behaviours:Um(h.toolbarBehaviours,vt.behaviours),apis:{setGroups:dt,refresh:Tt},domModification:{attributes:{role:"group"}}}},Z_=g0({name:"Toolbar",configFields:YI(),partFields:rW(),factory:zte,apis:{setGroups:(h,j,nt)=>{h.setGroups(j,nt)}}}),Bte=Tt,$te=pn,sW=Nt([]);var MA=Object.freeze({__proto__:null,setup:Bte,isDocked:$te,getBehaviours:sW});const JD=Nt(Zr("toolbar-height-change")),d1={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},g4="tox-tinymce--toolbar-sticky-on",y9="tox-tinymce--toolbar-sticky-off",iW=(h,j)=>{const nt=Bp(j),dt=um(j).dom.innerHeight,yt=e0(nt),vt=io.fromDom(h.elm),St=Bv(vt),Dt=mu(vt),Bt=St.y,jt=Bt+Dt,Zt=Gu(j),an=mu(j),un=Zt.top,wn=un+an,On=Math.abs(un-yt.top)<2,_o=Math.abs(wn-(yt.top+dt))<2;if(On&&Bt<wn)I1(yt.left,Bt-an,nt);else if(_o&&jt>un){const Un=Bt-dt+Dt+an;I1(yt.left,Un,nt)}},m4=(h,j)=>qn(Ju.getModes(h),j),aW=h=>{const j=it=>K0(it)+(parseInt(lu(it,"margin-top"),10)||0)+(parseInt(lu(it,"margin-bottom"),10)||0),nt=h.element;Pm(nt).each(it=>{const dt="padding-"+Ju.getModes(h)[0];if(Ju.isDocked(h)){const yt=vn(it);Jo(nt,"width",yt+"px"),Jo(it,dt,j(nt)+"px")}else js(nt,"width"),js(it,dt)})},lW=(h,j)=>{j?(wu(h,d1.fadeOutClass),OC(h,[d1.transitionClass,d1.fadeInClass])):(wu(h,d1.fadeInClass),OC(h,[d1.fadeOutClass,d1.transitionClass]))},cW=(h,j)=>{const nt=io.fromDom(h.getContainer());j?(Kp(nt,g4),wu(nt,y9)):(Kp(nt,y9),wu(nt,g4))},Gte=(h,j)=>{const nt=Bp(j);L_(nt).filter(it=>!Yl(j,it)).filter(it=>Yl(it,io.fromDom(nt.dom.body))||zp(h,it)).each(()=>_v(j))},jte=(h,j)=>B0(h).orThunk(()=>j().toOptional().bind(nt=>B0(nt.element))),Hte=(h,j,nt)=>{h.inline||(j.header.isPositionedAtTop()||h.on("ResizeEditor",()=>{nt().each(Ju.reset)}),h.on("ResizeWindow ResizeEditor",()=>{nt().each(aW)}),h.on("SkinLoaded",()=>{nt().each(it=>{Ju.isDocked(it)?Ju.reset(it):Ju.refresh(it)})}),h.on("FullscreenStateChanged",()=>{nt().each(Ju.reset)})),h.on("AfterScrollIntoView",it=>{nt().each(dt=>{Ju.refresh(dt);const yt=dt.element;j8(yt)&&iW(it,yt)})}),h.on("PostRender",()=>{cW(h,!1)})},XI=h=>h().map(Ju.isDocked).getOr(!1),y4=()=>[Ty.config({channels:{[JD()]:{onReceive:aW}}})],QD=(h,j)=>{const nt=Xl(),it=j.getSink,dt=St=>{it().each(Dt=>St(Dt.element))},yt=St=>{h.inline||aW(St),cW(h,Ju.isDocked(St)),St.getSystem().broadcastOn([Sw()],{}),it().each(Dt=>Dt.getSystem().broadcastOn([Sw()],{}))},vt=h.inline?[]:y4();return[Fs.config({}),Ju.config({contextual:{lazyContext:St=>{const Dt=K0(St.element),Bt=h.inline?h.getContentAreaContainer():h.getContainer();return Mt.from(Bt).map(jt=>{const Zt=tp(io.fromDom(jt));return xS(h,St.element).fold(()=>{const un=Zt.height-Dt,wn=Zt.y+(m4(St,"top")?0:Dt);return ep(Zt.x,wn,Zt.width,un)},un=>{const wn=dy(Zt,wS(un)),On=m4(St,"top")?wn.y:wn.y+Dt;return ep(wn.x,On,wn.width,wn.height-Dt)})})},onShow:()=>{dt(St=>lW(St,!0))},onShown:St=>{dt(Dt=>B1(Dt,[d1.transitionClass,d1.fadeInClass])),nt.get().each(Dt=>{Gte(St.element,Dt),nt.clear()})},onHide:St=>{jte(St.element,it).fold(nt.clear,nt.set),dt(Dt=>lW(Dt,!1))},onHidden:()=>{dt(St=>B1(St,[d1.transitionClass]))},...d1},lazyViewport:St=>xS(h,St.element).fold(()=>{const Bt=Hp(),jt=P$(h),Zt=Bt.y+(m4(St,"top")&&!I6(h)?jt:0),an=Bt.height-(m4(St,"bottom")?jt:0);return{bounds:ep(Bt.x,Zt,Bt.width,an),optScrollEnv:Mt.none()}},Bt=>({bounds:wS(Bt),optScrollEnv:Mt.some({currentScrollTop:Bt.element.dom.scrollTop,scrollElmTop:Gu(Bt.element).top})})),modes:[j.header.getDockingMode()],onDocked:yt,onUndocked:yt}),...vt]};var Ute=Object.freeze({__proto__:null,setup:Hte,isDocked:XI,getBehaviours:QD});const Vte=h=>{const j=h.editor,nt=h.sticky?QD:sW;return{uid:h.uid,dom:h.dom,components:h.components,behaviours:yr(nt(j,h.sharedBackstage))}},b9=ws([lm,nu("items",QS([eE([Q6,gy("items",Fr)]),Fr]))].concat(dA)),Wte=h=>hp("GroupToolbarButton",b9,h),b4=[om("text"),om("tooltip"),om("icon"),Ru("search",!1,QS([Hy,ws([om("placeholder")])],h=>mt(h)?h?Mt.some({placeholder:Mt.none()}):Mt.none():Mt.some(h))),ky("fetch"),Yu("onSetup",()=>Tt),Dp("context","mode:design")],v9=ws([lm,...b4]),uW=h=>hp("menubutton",v9,h),qte=ws([lm,T5,i1,nC,OG,RG,uA,Em("presets","normal",["normal","color","listpreview"]),DG(1),AI,MG,Dp("context","mode:design")]),Zte=h=>hp("SplitButton",qte,h);var _9=Py({factory:(h,j)=>{const nt=(dt,yt)=>{const vt=Dn(yt,St=>{const Dt={type:"menubutton",text:St.text,fetch:jt=>{jt(St.getItems())},context:"any"},Bt=uW(Dt).mapError(jt=>ux(jt)).getOrDie();return RA(Bt,"tox-mbtn",j.backstage,Mt.some("menuitem"))});Us.set(dt,vt)},it={focus:_s.focusIn,setMenus:nt};return{uid:h.uid,dom:h.dom,components:[],behaviours:yr([Us.config({}),Ks("menubar-events",[rp(dt=>{h.onSetup(dt)}),er(J0(),(dt,yt)=>{ap(dt.element,".tox-mbtn--active").each(vt=>{D_(yt.event.target,".tox-mbtn").each(St=>{Yl(vt,St)||dt.getSystem().getByDom(vt).each(Dt=>{dt.getSystem().getByDom(St).each(Bt=>{l1.expand(Bt),l1.close(Dt),Fs.focus(Bt)})})})})}),er(iE(),(dt,yt)=>{yt.event.prevFocus.bind(vt=>dt.getSystem().getByDom(vt).toOptional()).each(vt=>{yt.event.newFocus.bind(St=>dt.getSystem().getByDom(St).toOptional()).each(St=>{l1.isOpen(vt)&&(l1.expand(St),l1.close(vt))})})})]),_s.config({mode:"flow",selector:".tox-mbtn",onEscape:dt=>(h.onEscape(dt),Mt.some(!0))}),lp.config({})]),apis:it,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Qo("dom"),Qo("uid"),Qo("onEscape"),Qo("backstage"),So("onSetup",Tt)],apis:{focus:(h,j)=>{h.focus(j)},setMenus:(h,j,nt)=>{h.setMenus(j,nt)}}});const Kte="Upgrade",dW="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",fW=h=>({uid:h.uid,dom:h.dom,components:[{dom:{tag:"a",attributes:{href:dW,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:Kte}}]}),eN="container",Yte=[Hm("slotBehaviours",[])],v4=h=>"<alloy.field."+h+">",tN=h=>{const j=(()=>{const yt=[];return{slot:(St,Dt)=>(yt.push(St),aI(eN,v4(St),Dt)),record:Nt(yt)}})(),nt=h(j),it=j.record(),dt=Dn(it,yt=>S0({name:yt,pname:v4(yt)}));return ZE(eN,Yte,dt,hW,nt)},hW=(h,j)=>{const nt=On=>YR(h),it=(On,_o)=>zu(On,h,_o),dt=(On,_o)=>(Un,go)=>zu(Un,h,go).map(bo=>On(bo,go)).getOr(_o),yt=On=>(_o,Un)=>{xo(Un,go=>On(_o,go))},vt=(On,_o)=>Xr(On.element,"aria-hidden")!=="true",St=(On,_o)=>{if(!vt(On)){const Un=On.element;js(Un,"display"),Yt(Un,"aria-hidden"),ls(On,AC(),{name:_o,visible:!0})}},Dt=(On,_o)=>{if(vt(On)){const Un=On.element;Jo(Un,"display","none"),Wo(Un,"aria-hidden","true"),ls(On,AC(),{name:_o,visible:!1})}},Bt=dt(vt,!1),jt=dt(Dt),Zt=yt(jt),an=On=>Zt(On,nt()),un=dt(St),wn={getSlotNames:nt,getSlot:it,isShowing:Bt,hideSlot:jt,hideAllSlots:an,showSlot:un};return{uid:h.uid,dom:h.dom,components:j,behaviours:eI(h.slotBehaviours),apis:wn}},iy={...xr({getSlotNames:(h,j)=>h.getSlotNames(j),getSlot:(h,j,nt)=>h.getSlot(j,nt),isShowing:(h,j,nt)=>h.isShowing(j,nt),hideSlot:(h,j,nt)=>h.hideSlot(j,nt),hideAllSlots:(h,j)=>h.hideAllSlots(j),showSlot:(h,j,nt)=>h.showSlot(j,nt)},h=>bT(h)),sketch:tN},Xte=ws([i1,T5,Yu("onShow",Tt),Yu("onHide",Tt),uA]),Jte=h=>hp("sidebar",Xte,h),x9=h=>{const{sidebars:j}=h.ui.registry.getAll();xo(Do(j),nt=>{const it=j[nt],dt=()=>au(Mt.from(h.queryCommandValue("ToggleSidebar")),nt);h.ui.registry.addToggleButton(nt,{icon:it.icon,tooltip:it.tooltip,onAction:yt=>{h.execCommand("ToggleSidebar",!1,nt),yt.setActive(dt())},onSetup:yt=>{yt.setActive(dt());const vt=()=>yt.setActive(dt());return h.on("ToggleSidebar",vt),()=>{h.off("ToggleSidebar",vt)}},context:"any"})})},Qte=h=>({element:()=>h.element.dom}),w9=(h,j)=>{const nt=Dn(Do(j),it=>{const dt=j[it],yt=pr(Jte(dt));return{name:it,getApi:Qte,onSetup:yt.onSetup,onShow:yt.onShow,onHide:yt.onHide}});return Dn(nt,it=>{const dt=ds(Tt);return h.slot(it.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:II.unnamedEvents([AS(it,dt),TS(it,dt),er(AC(),(yt,vt)=>{const St=vt.event;yn(nt,Bt=>Bt.name===St.name).each(Bt=>{(St.visible?Bt.onShow:Bt.onHide)(Bt.getApi(yt))})})])})})},ene=h=>iy.sketch(j=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:w9(j,h),slotBehaviours:II.unnamedEvents([rp(nt=>iy.hideAllSlots(nt))])})),C9=(h,j,nt)=>{$l.getCurrent(h).each(dt=>{Us.set(dt,[ene(j)]);const yt=nt==null?void 0:nt.toLowerCase();_e(yt)&&Ds(j,yt)&&$l.getCurrent(dt).each(vt=>{iy.showSlot(vt,yt),ev.immediateGrow(dt),js(dt.element,"width"),nN(h.element,"region")})})},nN=(h,j)=>{Wo(h,"role",j)},tne=(h,j)=>{$l.getCurrent(h).each(it=>{$l.getCurrent(it).each(yt=>{ev.hasGrown(it)?iy.isShowing(yt,j)?(ev.shrink(it),nN(h.element,"presentation")):(iy.hideAllSlots(yt),iy.showSlot(yt,j),nN(h.element,"region")):(iy.hideAllSlots(yt),iy.showSlot(yt,j),ev.grow(it),nN(h.element,"region"))})})},nne=h=>$l.getCurrent(h).bind(nt=>ev.isGrowing(nt)||ev.hasGrown(nt)?$l.getCurrent(nt).bind(yt=>yn(iy.getSlotNames(yt),vt=>iy.isShowing(yt,vt))):Mt.none()),k9=Zr("FixSizeEvent"),S9=Zr("AutoSizeEvent"),tae=h=>({uid:h.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:yr([lp.config({}),Fs.config({}),ev.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:j=>{$l.getCurrent(j).each(iy.hideAllSlots),El(j,S9)},onGrown:j=>{El(j,S9)},onStartGrow:j=>{ls(j,k9,{width:gu(j.element,"width").getOr("")})},onStartShrink:j=>{ls(j,k9,{width:vn(j.element)+"px"})}}),Us.config({}),$l.config({find:j=>{const nt=Us.contents(j);return vo(nt)}})])}],behaviours:yr([t_.childAt(0),Ks("sidebar-sliding-events",[er(k9,(j,nt)=>{Jo(j.element,"width",nt.event.width)}),er(S9,(j,nt)=>{js(j.element,"width")})])])});var pW=Object.freeze({__proto__:null,block:(h,j,nt,it)=>{Wo(h.element,"aria-busy",!0);const dt=j.getRoot(h).getOr(h),yt=yr([_s.config({mode:"special",onTab:()=>Mt.some(!0),onShiftTab:()=>Mt.some(!0)}),Fs.config({})]),vt=it(dt,yt),St=dt.getSystem().build(vt);Us.append(dt,qy(St)),St.hasConfigured(_s)&&j.focus&&_s.focusIn(St),nt.isBlocked()||j.onBlock(h),nt.blockWith(()=>Us.remove(dt,St))},unblock:(h,j,nt)=>{Yt(h.element,"aria-busy"),nt.isBlocked()&&j.onUnblock(h),nt.clear()},isBlocked:(h,j,nt)=>nt.isBlocked()}),rne=[Yu("getRoot",Mt.none),sm("focus",!0),Hl("onBlock"),Hl("onUnblock")],sne=Object.freeze({__proto__:null,init:()=>{const h=Kw(),j=nt=>{h.set({destroy:nt})};return F0({readState:h.isSet,blockWith:j,clear:h.clear,isBlocked:h.isSet})}});const Lx=Gm({fields:rne,name:"blocking",apis:pW,state:sne}),ine=h=>(j,nt)=>({dom:{tag:"div",attributes:{"aria-label":h.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Sx('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),E9=h=>$l.getCurrent(h).each(j=>_v(j.element,!0)),ane=(h,j)=>{const nt="tabindex",it=`data-mce-${nt}`;Mt.from(h.iframeElement).map(io.fromDom).each(dt=>{j?(Ls(dt,nt).each(yt=>Wo(dt,it,yt)),Wo(dt,nt,-1)):(Yt(dt,nt),Ls(dt,it).each(yt=>{Wo(dt,nt,yt),Yt(dt,it)}))})},lne=(h,j,nt,it)=>{const dt=j.element;if(ane(h,nt),nt)Lx.block(j,ine(it)),js(dt,"display"),Yt(dt,"aria-hidden"),h.hasFocus()&&E9(j);else{const yt=$l.getCurrent(j).exists(vt=>P2(vt.element));Lx.unblock(j),Jo(dt,"display","none"),Wo(dt,"aria-hidden","true"),yt&&h.focus()}},cne=h=>({uid:h.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:yr([Us.config({}),Lx.config({focus:!1}),$l.config({find:j=>vo(j.components())})]),components:[]}),rae=h=>h.type==="focusin",sae=h=>rae(h)?(h.composed?vo(h.composedPath()):Mt.from(h.target)).map(io.fromDom).filter(Cs).exists(nt=>ty(nt,"mce-pastebin")):!1,gW=(h,j,nt)=>{const it=ds(!1),dt=Xl(),yt=St=>{it.get()&&!sae(St)&&(St.preventDefault(),E9(j()),h.editorManager.setActive(h))};h.inline||h.on("PreInit",()=>{h.dom.bind(h.getWin(),"focusin",yt),h.on("BeforeExecCommand",St=>{St.command.toLowerCase()==="mcefocus"&&St.value!==!0&&yt(St)})});const vt=St=>{St!==it.get()&&(it.set(St),lne(h,j(),St,nt.providers),JO(h,St))};h.on("ProgressState",St=>{if(dt.on(clearTimeout),It(St.time)){const Dt=nA.setEditorTimeout(h,()=>vt(St.state),St.time);dt.set(Dt)}else vt(St.state),dt.clear()})},mW=(h,j)=>yo(h,(dt,yt)=>j(yt,dt.len).fold(Nt(dt),St=>({len:St.finish,list:dt.list.concat([St])})),{len:0,list:[]}).list,A9=(h,j,nt)=>({within:h,extra:j,withinWidth:nt}),yW=(h,j,nt)=>{const it=mW(h,(St,Dt)=>{const Bt=nt(St);return Mt.some({element:St,start:Dt,finish:Dt+Bt,width:Bt})}),dt=co(it,St=>St.finish<=j),yt=Vo(dt,(St,Dt)=>St+Dt.width,0),vt=it.slice(dt.length);return{within:dt,extra:vt,withinWidth:yt}},Ly=h=>Dn(h,j=>j.element),une=(h,j,nt)=>{const it=Ly(h.concat(j));return A9(it,[],nt)},bW=(h,j,nt,it)=>{const dt=Ly(h).concat([nt]);return A9(dt,Ly(j),it)},vW=(h,j,nt)=>A9(Ly(h),[],nt),dne=(h,j,nt)=>{const it=yW(j,h,nt);return it.extra.length===0?Mt.some(it):Mt.none()},_4=(h,j,nt,it)=>{const dt=dne(h,j,nt).getOrThunk(()=>yW(j,h-nt(it),nt)),yt=dt.within,vt=dt.extra,St=dt.withinWidth;return vt.length===1&&vt[0].width<=nt(it)?une(yt,vt,St):vt.length>=1?bW(yt,vt,it,St):vW(yt,vt,St)},_W=(h,j)=>{const nt=Dn(j,it=>qy(it));Z_.setGroups(h,nt)},oN=h=>Co(h,j=>B0(j.element).bind(nt=>j.getSystem().getByDom(nt).toOptional())),xW=(h,j,nt)=>{const it=j.builtGroups.get();if(it.length===0)return;const dt=Gr(h,j,"primary"),yt=Vp.getCoupled(h,"overflowGroup");Jo(dt.element,"visibility","hidden");const vt=it.concat([yt]),St=oN(vt);nt([]),_W(dt,vt);const Dt=vn(dt.element),Bt=_4(Dt,j.builtGroups.get(),jt=>Math.ceil(jt.element.dom.getBoundingClientRect().width),yt);Bt.extra.length===0?(Us.remove(dt,yt),nt([])):(_W(dt,Bt.within),nt(Bt.extra)),js(dt.element,"visibility"),Xm(dt.element),St.each(Fs.focus)},x4=Nt([Hm("splitToolbarBehaviours",[Vp]),tu("builtGroups",()=>ds([]))]),fne=Nt([mx(["overflowToggledClass"]),hv("getOverflowBounds"),Qo("lazySink"),tu("overflowGroups",()=>ds([])),Hl("onOpened"),Hl("onClosed")].concat(x4())),hne=Nt([S0({factory:Z_,schema:YI(),name:"primary"}),kv({schema:YI(),name:"overflow"}),kv({name:"overflow-button"}),kv({name:"overflow-group"})]),Mv=Nt((h,j)=>{To(h,Math.floor(j))}),pne=Nt([mx(["toggledClass"]),Qo("lazySink"),ky("fetch"),hv("getBounds"),ym("fireDismissalEventInstead",[So("event",Wy())]),bw(),Hl("onToggled")]),rN=Nt([kv({name:"button",overrides:h=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:yr([_a.config({toggleClass:h.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:h.onToggled})])})}),kv({factory:Z_,schema:YI(),name:"toolbar",overrides:h=>({toolbarBehaviours:yr([_s.config({mode:"cyclic",onEscape:j=>(zu(j,h,"button").each(Fs.focus),Mt.none())})])})})]),w4=Xl(),wW=(h,j)=>{w4.set(!0),T9(h,j),w4.clear()},T9=(h,j)=>{const nt=Vp.getCoupled(h,"toolbarSandbox");Zl.isOpen(nt)?Zl.close(nt):Zl.open(nt,j.toolbar())},sN=(h,j,nt,it)=>{const dt=nt.getBounds.map(vt=>vt()),yt=nt.lazySink(h).getOrDie();c0.positionWithinBounds(yt,j,{anchor:{type:"hotspot",hotspot:h,layouts:it,overrides:{maxWidthFunction:Mv()}}},dt)},CW=(h,j,nt,it,dt)=>{Z_.setGroups(j,dt),sN(h,j,nt,it),_a.on(h)},gne=(h,j,nt)=>{const it=xE(),dt=(vt,St)=>{const Dt=w4.get().getOr(!1);nt.fetch().get(Bt=>{CW(h,St,nt,j.layouts,Bt),it.link(h.element),Dt||_s.focusIn(St)})},yt=()=>{_a.off(h),w4.get().getOr(!1)||Fs.focus(h),it.unlink(h.element)};return{dom:{tag:"div",attributes:{id:it.id}},behaviours:yr([_s.config({mode:"special",onEscape:vt=>(Zl.close(vt),Mt.some(!0))}),Zl.config({onOpen:dt,onClose:yt,isPartOf:(vt,St,Dt)=>hw(St,Dt)||hw(h,Dt),getAttachPoint:()=>nt.lazySink(h).getOrDie()}),Ty.config({channels:{...jE({isExtraPart:pn,...nt.fireDismissalEventInstead.map(vt=>({fireEventInstead:{event:vt.event}})).getOr({})}),...HE({doReposition:()=>{Zl.getState(Vp.getCoupled(h,"toolbarSandbox")).each(vt=>{sN(h,vt,nt,j.layouts)})}})}})])}},FS=g0({name:"FloatingToolbarButton",factory:(h,j,nt,it)=>({...Im.sketch({...it.button(),action:dt=>{T9(dt,it)},buttonBehaviours:Cv.augment({dump:it.button().buttonBehaviours},[Vp.config({others:{toolbarSandbox:dt=>gne(dt,nt,h)}})])}),apis:{setGroups:(dt,yt)=>{Zl.getState(Vp.getCoupled(dt,"toolbarSandbox")).each(vt=>{CW(dt,vt,h,nt.layouts,yt)})},reposition:dt=>{Zl.getState(Vp.getCoupled(dt,"toolbarSandbox")).each(yt=>{sN(dt,yt,h,nt.layouts)})},toggle:dt=>{T9(dt,it)},toggleWithoutFocusing:dt=>{wW(dt,it)},getToolbar:dt=>Zl.getState(Vp.getCoupled(dt,"toolbarSandbox")),isOpen:dt=>Zl.isOpen(Vp.getCoupled(dt,"toolbarSandbox"))}}),configFields:pne(),partFields:rN(),apis:{setGroups:(h,j,nt)=>{h.setGroups(j,nt)},reposition:(h,j)=>{h.reposition(j)},toggle:(h,j)=>{h.toggle(j)},toggleWithoutFocusing:(h,j)=>{h.toggleWithoutFocusing(j)},getToolbar:(h,j)=>h.getToolbar(j),isOpen:(h,j)=>h.isOpen(j)}}),mne=Nt([Qo("items"),mx(["itemSelector"]),Hm("tgroupBehaviours",[_s])]),yne=Nt([WE({name:"items",unit:"item"})]),bne=(h,j,nt,it)=>({uid:h.uid,dom:h.dom,components:j,behaviours:Um(h.tgroupBehaviours,[_s.config({mode:"flow",selector:h.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),C4=g0({name:"ToolbarGroup",configFields:mne(),partFields:yne(),factory:bne}),I9=h=>Dn(h,j=>qy(j)),R9=(h,j,nt)=>{xW(h,nt,it=>{nt.overflowGroups.set(it),j.getOpt(h).each(dt=>{FS.setGroups(dt,I9(it))})})},vne=(h,j,nt,it)=>{const dt=iu(FS.sketch({fetch:()=>j0.nu(yt=>{yt(I9(h.overflowGroups.get()))}),layouts:{onLtr:()=>[_m,vm],onRtl:()=>[vm,_m],onBottomLtr:()=>[xm,i0],onBottomRtl:()=>[i0,xm]},getBounds:nt.getOverflowBounds,lazySink:h.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:h.markers.overflowToggledClass},parts:{button:it["overflow-button"](),toolbar:it.overflow()},onToggled:(yt,vt)=>h[vt?"onOpened":"onClosed"](yt)}));return{uid:h.uid,dom:h.dom,components:j,behaviours:Um(h.splitToolbarBehaviours,[Vp.config({others:{overflowGroup:()=>C4.sketch({...it["overflow-group"](),items:[dt.asSpec()]})}})]),apis:{setGroups:(yt,vt)=>{h.builtGroups.set(Dn(vt,yt.getSystem().build)),R9(yt,dt,h)},refresh:yt=>R9(yt,dt,h),toggle:yt=>{dt.getOpt(yt).each(vt=>{FS.toggle(vt)})},toggleWithoutFocusing:yt=>{dt.getOpt(yt).each(FS.toggleWithoutFocusing)},isOpen:yt=>dt.getOpt(yt).map(FS.isOpen).getOr(!1),reposition:yt=>{dt.getOpt(yt).each(vt=>{FS.reposition(vt)})},getOverflow:yt=>dt.getOpt(yt).bind(FS.getToolbar)},domModification:{attributes:{role:"group"}}}},kW=g0({name:"SplitFloatingToolbar",configFields:fne(),partFields:hne(),factory:vne,apis:{setGroups:(h,j,nt)=>{h.setGroups(j,nt)},refresh:(h,j)=>{h.refresh(j)},reposition:(h,j)=>{h.reposition(j)},toggle:(h,j)=>{h.toggle(j)},toggleWithoutFocusing:(h,j)=>{h.toggle(j)},isOpen:(h,j)=>h.isOpen(j),getOverflow:(h,j)=>h.getOverflow(j)}}),SW=Nt([mx(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Hl("onOpened"),Hl("onClosed")].concat(x4())),EW=Nt([S0({factory:Z_,schema:YI(),name:"primary"}),S0({factory:Z_,schema:YI(),name:"overflow",overrides:h=>({toolbarBehaviours:yr([ev.config({dimension:{property:"height"},closedClass:h.markers.closedClass,openClass:h.markers.openClass,shrinkingClass:h.markers.shrinkingClass,growingClass:h.markers.growingClass,onShrunk:j=>{zu(j,h,"overflow-button").each(nt=>{_a.off(nt)}),h.onClosed(j)},onGrown:j=>{h.onOpened(j)},onStartGrow:j=>{zu(j,h,"overflow-button").each(_a.on)}}),_s.config({mode:"acyclic",onEscape:j=>(zu(j,h,"overflow-button").each(Fs.focus),Mt.some(!0))})])})}),kv({name:"overflow-button",overrides:h=>({buttonBehaviours:yr([_a.config({toggleClass:h.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),kv({name:"overflow-group"})]),AW=(h,j)=>zu(h,j,"overflow").map(ev.hasGrown).getOr(!1),M9=(h,j,nt)=>{zu(h,j,"overflow-button").each(it=>{zu(h,j,"overflow").each(dt=>{if(P9(h,j),ev.hasShrunk(dt)){const yt=j.onOpened;j.onOpened=vt=>{nt||_s.focusIn(dt),yt(vt),j.onOpened=yt}}else{const yt=j.onClosed;j.onClosed=vt=>{nt||Fs.focus(it),yt(vt),j.onClosed=yt}}ev.toggleGrow(dt)})})},P9=(h,j)=>{zu(h,j,"overflow").each(nt=>{xW(h,j,it=>{const dt=Dn(it,yt=>qy(yt));Z_.setGroups(nt,dt)}),zu(h,j,"overflow-button").each(it=>{ev.hasGrown(nt)&&_a.on(it)}),ev.refresh(nt)})},_ne=(h,j,nt,it)=>{const dt="alloy.toolbar.toggle",yt=(vt,St)=>{const Dt=Dn(St,vt.getSystem().build);h.builtGroups.set(Dt)};return{uid:h.uid,dom:h.dom,components:j,behaviours:Um(h.splitToolbarBehaviours,[Vp.config({others:{overflowGroup:vt=>C4.sketch({...it["overflow-group"](),items:[Im.sketch({...it["overflow-button"](),action:St=>{El(vt,dt)}})]})}}),Ks("toolbar-toggle-events",[er(dt,vt=>{M9(vt,h,!1)})])]),apis:{setGroups:(vt,St)=>{yt(vt,St),P9(vt,h)},refresh:vt=>P9(vt,h),toggle:vt=>{M9(vt,h,!1)},toggleWithoutFocusing:vt=>{M9(vt,h,!0)},isOpen:vt=>AW(vt,h)},domModification:{attributes:{role:"group"}}}},iN=g0({name:"SplitSlidingToolbar",configFields:SW(),partFields:EW(),factory:_ne,apis:{setGroups:(h,j,nt)=>{h.setGroups(j,nt)},refresh:(h,j)=>{h.refresh(j)},toggle:(h,j)=>{h.toggle(j)},isOpen:(h,j)=>h.isOpen(j)}}),TW=h=>{const j=h.title.fold(()=>({}),nt=>({attributes:{title:nt}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...j},components:[C4.parts.items({})],items:h.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:yr([lp.config({}),Fs.config({})])}},aN=h=>C4.sketch(TW(h)),IW=(h,j)=>{const nt=rp(it=>{const dt=Dn(h.initGroups,aN);Z_.setGroups(it,dt)});return yr([a1.toolbarButton(()=>h.providers.checkUiComponentContext("any").shouldDisable),Yp(()=>h.providers.checkUiComponentContext("any")),_s.config({mode:j,onEscape:h.onEscape,selector:".tox-toolbar__group"}),Ks("toolbar-events",[nt])])},RW=h=>{const j=h.cyclicKeying?"cyclic":"acyclic";return{uid:h.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":TW({title:Mt.none(),items:[]}),"overflow-button":kV({context:"any",name:"more",icon:Mt.some("more-drawer"),enabled:!0,tooltip:Mt.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:Mt.none(),borderless:!1},Mt.none(),h.providers,[],"overflow-button")},splitToolbarBehaviours:IW(h,j)}},xne=h=>{const j=RW(h),nt=4,it=kW.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return kW.sketch({...j,lazySink:h.getSink,getOverflowBounds:()=>{const dt=h.moreDrawerData.lazyHeader().element,yt=Bv(dt),vt=ly(dt),St=Bv(vt),Dt=Math.max(vt.dom.scrollHeight,St.height);return ep(yt.x+nt,St.y,yt.width-nt*2,Dt)},parts:{...j.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:h.attributes}}},components:[it],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:dt=>h.onToggled(dt,!0),onClosed:dt=>h.onToggled(dt,!1)})},wne=h=>{const j=iN.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),nt=iN.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),it=RW(h);return iN.sketch({...it,components:[j,nt],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:dt=>{dt.getSystem().broadcastOn([JD()],{type:"opened"}),h.onToggled(dt,!0)},onClosed:dt=>{dt.getSystem().broadcastOn([JD()],{type:"closed"}),h.onToggled(dt,!1)}})},lN=h=>{const j=h.cyclicKeying?"cyclic":"acyclic";return Z_.sketch({uid:h.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(h.type===r1.scrolling?["tox-toolbar--scrolling"]:[])},components:[Z_.parts.groups({})],toolbarBehaviours:IW(h,j)})},MW=[nC,i1,om("tooltip"),Em("buttonType","secondary",["primary","secondary"]),sm("borderless",!1),ky("onAction"),Dp("context","mode:design")],Cne=[...MW,tC,o0("type",["button"])],kne=[...MW,sm("active",!1),o0("type",["togglebutton"])],O9={button:Cne,togglebutton:kne},Sne=[o0("type",["group"]),S_("buttons",[],Ip("type",O9))],Ene=Ip("type",{...O9,group:Sne}),D9=ws([S_("buttons",[],Ene),ky("onShow"),ky("onHide")]),Ane=h=>hp("view",D9,h),cN=(h,j)=>{var nt,it;const dt=h.type==="togglebutton",yt=h.icon.map(bo=>iC(bo,j.icons)).map(iu),St=bo=>{const Bo=Yo=>{yt.map(qr=>qr.getOpt(bo).each(Lr=>{Us.set(Lr,[iC(Yo,j.icons)])}))},Go=Yo=>{const qr=bo.element;Yo?(Kp(qr,"tox-button--enabled"),Wo(qr,"aria-pressed",!0)):(wu(qr,"tox-button--enabled"),Yt(qr,"aria-pressed"))},Sr=()=>ty(bo.element,"tox-button--enabled"),Vr=()=>_v(bo.element);if(dt)return h.onAction({setIcon:Bo,setActive:Go,isActive:Sr,focus:Vr});if(h.type==="button")return h.onAction({setIcon:Bo})},Dt={...h,name:dt?h.text.getOr(h.icon.getOr("")):(nt=h.text)!==null&&nt!==void 0?nt:h.icon.getOr(""),primary:h.buttonType==="primary",buttonType:Mt.from(h.buttonType),tooltip:h.tooltip,icon:h.icon,enabled:!0,borderless:h.borderless},Bt=Z7((it=h.buttonType)!==null&&it!==void 0?it:"secondary"),jt=dt?h.text.map(j.translate):Mt.some(j.translate(h.text)),Zt=jt.map(_p),an=Dt.tooltip.or(jt).map(bo=>({"aria-label":j.translate(bo)})).getOr({}),un=yt.map(bo=>bo.asSpec()),wn=IS([un,Zt]),On=h.icon.isSome()&&Zt.isSome(),_o={tag:"button",classes:Bt.concat(...h.icon.isSome()&&!On?["tox-button--icon"]:[]).concat(...On?["tox-button--icon-and-text"]:[]).concat(...h.borderless?["tox-button--naked"]:[]).concat(...h.type==="togglebutton"&&h.active?["tox-button--enabled"]:[]),attributes:an},Un=[],go=$D(Dt,Mt.some(St),Un,_o,wn,h.tooltip,j);return Im.sketch(go)},PW=(h,j)=>cN(h,j),OW=(h,j)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Dn(h.buttons,nt=>PW(nt,j))}),DW=ba().deviceType,Tne=DW.isPhone(),aae=DW.isTablet(),Ine=h=>{let j=!1;const nt=Dn(h.buttons,it=>it.type==="group"?(j=!0,OW(it,h.providers)):PW(it,h.providers));return{uid:h.uid,dom:{tag:"div",classes:[j?"tox-view__toolbar":"tox-view__header",...Tne||aae?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:yr([Fs.config({}),_s.config({mode:"flow",selector:"button, .tox-button",focusInside:Iw.OnEnterOrSpaceMode})]),components:j?nt:[Px.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Px.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:nt})]}},Rne=h=>({uid:h.uid,behaviours:yr([Fs.config({}),lp.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),N9=(h,j,nt,it)=>{const dt={getPane:yt=>Wm.getPart(yt,h,"pane"),getOnShow:yt=>h.viewConfig.onShow,getOnHide:yt=>h.viewConfig.onHide};return{uid:h.uid,dom:h.dom,components:j,behaviours:yr([Fs.config({}),_s.config({mode:"cyclic",focusInside:Iw.OnEnterOrSpaceMode})]),apis:dt}};var JI=g0({name:"silver.View",configFields:[Qo("viewConfig")],partFields:[Jy({factory:{sketch:Ine},schema:[Qo("buttons"),Qo("providers")],name:"header"}),Jy({factory:{sketch:Rne},schema:[],name:"pane"})],factory:N9,apis:{getPane:(h,j)=>h.getPane(j),getOnShow:(h,j)=>h.getOnShow(j),getOnHide:(h,j)=>h.getOnHide(j)}});const uN=(h,j,nt)=>Cl(j,(it,dt)=>{const yt=pr(Ane(it));return h.slot(dt,JI.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:yt,components:[...yt.buttons.length>0?[JI.parts.header({buttons:yt.buttons,providers:nt})]:[],JI.parts.pane({})]}))}),NW=(h,j)=>iy.sketch(nt=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:uN(nt,h,j),slotBehaviours:II.unnamedEvents([rp(it=>iy.hideAllSlots(it))])})),L9=h=>yn(iy.getSlotNames(h),j=>iy.isShowing(h,j)),F9=h=>{const j=h.element;Jo(j,"display","none"),Wo(j,"aria-hidden","true")},Mne=h=>{const j=h.element;js(j,"display"),Yt(j,"aria-hidden")},LW=h=>({getContainer:Nt(h)}),PA=(h,j,nt)=>{iy.getSlot(h,j).each(it=>{JI.getPane(it).each(dt=>{nt(it)(LW(dt.element.dom))})})},FW=(h,j)=>PA(h,j,JI.getOnShow),Pne=(h,j)=>PA(h,j,JI.getOnHide);var dN=Py({factory:(h,j)=>{const yt={setViews:(vt,St)=>{Us.set(vt,[NW(St,j.backstage.shared.providers)])},whichView:vt=>$l.getCurrent(vt).bind(L9),toggleView:(vt,St,Dt,Bt)=>$l.getCurrent(vt).exists(jt=>{const Zt=L9(jt),an=Zt.exists(wn=>Bt===wn),un=iy.getSlot(jt,Bt).isSome();return un&&(iy.hideAllSlots(jt),an?(F9(vt),St()):(Dt(),Mne(vt),iy.showSlot(jt,Bt),FW(jt,Bt)),Zt.each(wn=>Pne(jt,wn))),un})};return{uid:h.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:yr([Us.config({}),$l.config({find:vt=>{const St=Us.contents(vt);return vo(St)}})]),apis:yt}},name:"silver.ViewWrapper",configFields:[Qo("backstage")],apis:{setViews:(h,j,nt)=>h.setViews(j,nt),toggleView:(h,j,nt,it,dt)=>h.toggleView(j,nt,it,dt),whichView:(h,j)=>h.whichView(j)}});const z9=(h,j,nt)=>{let it=!1;const dt=vt=>{OL(vt,".tox-statusbar").each(St=>{lu(St,"display")==="none"&&Xr(St,"aria-hidden")==="true"?(js(St,"display"),Yt(St,"aria-hidden")):(Jo(St,"display","none"),Wo(St,"aria-hidden","true"))})},yt={getSocket:vt=>Wm.getPart(vt,h,"socket"),setSidebar:(vt,St,Dt)=>{Wm.getPart(vt,h,"sidebar").each(Bt=>C9(Bt,St,Dt))},toggleSidebar:(vt,St)=>{Wm.getPart(vt,h,"sidebar").each(Dt=>tne(Dt,St))},whichSidebar:vt=>Wm.getPart(vt,h,"sidebar").bind(nne).getOrNull(),getHeader:vt=>Wm.getPart(vt,h,"header"),getToolbar:vt=>Wm.getPart(vt,h,"toolbar"),setToolbar:(vt,St)=>{Wm.getPart(vt,h,"toolbar").each(Dt=>{const Bt=Dn(St,aN);Dt.getApis().setGroups(Dt,Bt)})},setToolbars:(vt,St)=>{Wm.getPart(vt,h,"multiple-toolbar").each(Dt=>{const Bt=Dn(St,jt=>Dn(jt,aN));oW.setItems(Dt,Bt)})},refreshToolbar:vt=>{Wm.getPart(vt,h,"toolbar").each(Dt=>Dt.getApis().refresh(Dt))},toggleToolbarDrawer:vt=>{Wm.getPart(vt,h,"toolbar").each(St=>{$a(St.getApis().toggle,Dt=>Dt(St))})},toggleToolbarDrawerWithoutFocusing:vt=>{Wm.getPart(vt,h,"toolbar").each(St=>{$a(St.getApis().toggleWithoutFocusing,Dt=>Dt(St))})},isToolbarDrawerToggled:vt=>Wm.getPart(vt,h,"toolbar").bind(St=>Mt.from(St.getApis().isOpen).map(Dt=>Dt(St))).getOr(!1),getThrobber:vt=>Wm.getPart(vt,h,"throbber"),focusToolbar:vt=>{Wm.getPart(vt,h,"toolbar").orThunk(()=>Wm.getPart(vt,h,"multiple-toolbar")).each(Dt=>{_s.focusIn(Dt)})},setMenubar:(vt,St)=>{Wm.getPart(vt,h,"menubar").each(Dt=>{_9.setMenus(Dt,St)})},focusMenubar:vt=>{Wm.getPart(vt,h,"menubar").each(St=>{_9.focus(St)})},setViews:(vt,St)=>{Wm.getPart(vt,h,"viewWrapper").each(Dt=>{dN.setViews(Dt,St)})},toggleView:(vt,St)=>Wm.getPart(vt,h,"viewWrapper").exists(Dt=>dN.toggleView(Dt,()=>yt.showMainView(vt),()=>yt.hideMainView(vt),St)),whichView:vt=>Wm.getPart(vt,h,"viewWrapper").bind(dN.whichView).getOrNull(),hideMainView:vt=>{it=yt.isToolbarDrawerToggled(vt),it&&yt.toggleToolbarDrawer(vt),Wm.getPart(vt,h,"editorContainer").each(St=>{const Dt=St.element;dt(Dt),Jo(Dt,"display","none"),Wo(Dt,"aria-hidden","true")})},showMainView:vt=>{it&&yt.toggleToolbarDrawer(vt),Wm.getPart(vt,h,"editorContainer").each(St=>{const Dt=St.element;dt(Dt),js(Dt,"display"),Yt(Dt,"aria-hidden")})}};return{uid:h.uid,dom:h.dom,components:j,apis:yt,behaviours:h.behaviours}},One=s_.optional({factory:_9,name:"menubar",schema:[Qo("backstage")]}),Dne=h=>h.type===r1.sliding?wne:h.type===r1.floating?xne:lN,zW=s_.optional({factory:{sketch:h=>oW.sketch({uid:h.uid,dom:h.dom,listBehaviours:yr([_s.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>lN({type:h.type,uid:Zr("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:h.providers,onEscape:()=>(h.onEscape(),Mt.some(!0))}),setupItem:(j,nt,it,dt)=>{Z_.setGroups(nt,it)},shell:!0})},name:"multiple-toolbar",schema:[Qo("dom"),Qo("onEscape")]}),BW=s_.optional({factory:{sketch:h=>{const j=Dne(h),nt={type:h.type,uid:h.uid,onEscape:()=>(h.onEscape(),Mt.some(!0)),onToggled:(it,dt)=>h.onToolbarToggled(dt),cyclicKeying:!1,initGroups:[],getSink:h.getSink,providers:h.providers,moreDrawerData:{lazyToolbar:h.lazyToolbar,lazyMoreButton:h.lazyMoreButton,lazyHeader:h.lazyHeader},attributes:h.attributes};return j(nt)}},name:"toolbar",schema:[Qo("dom"),Qo("onEscape"),Qo("getSink")]}),fN=s_.optional({factory:{sketch:Vte},name:"header",schema:[Qo("dom")]}),B9=s_.optional({factory:{sketch:fW},name:"promotion",schema:[Qo("dom")]}),Nne=s_.optional({name:"socket",schema:[Qo("dom")]}),Lne=s_.optional({factory:{sketch:tae},name:"sidebar",schema:[Qo("dom")]}),$W=s_.optional({factory:{sketch:cne},name:"throbber",schema:[Qo("dom")]}),Fne=s_.optional({factory:dN,name:"viewWrapper",schema:[Qo("backstage")]}),zne=h=>({uid:h.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:h.components}),Bne=s_.optional({factory:{sketch:zne},name:"editorContainer",schema:[]});var Vu=g0({name:"OuterContainer",factory:z9,configFields:[Qo("dom"),Qo("behaviours")],partFields:[fN,One,BW,zW,Nne,Lne,B9,$W,Fne,Bne],apis:{getSocket:(h,j)=>h.getSocket(j),setSidebar:(h,j,nt,it)=>{h.setSidebar(j,nt,it)},toggleSidebar:(h,j,nt)=>{h.toggleSidebar(j,nt)},whichSidebar:(h,j)=>h.whichSidebar(j),getHeader:(h,j)=>h.getHeader(j),getToolbar:(h,j)=>h.getToolbar(j),setToolbar:(h,j,nt)=>{h.setToolbar(j,nt)},setToolbars:(h,j,nt)=>{h.setToolbars(j,nt)},refreshToolbar:(h,j)=>h.refreshToolbar(j),toggleToolbarDrawer:(h,j)=>{h.toggleToolbarDrawer(j)},toggleToolbarDrawerWithoutFocusing:(h,j)=>{h.toggleToolbarDrawerWithoutFocusing(j)},isToolbarDrawerToggled:(h,j)=>h.isToolbarDrawerToggled(j),getThrobber:(h,j)=>h.getThrobber(j),setMenubar:(h,j,nt)=>{h.setMenubar(j,nt)},focusMenubar:(h,j)=>{h.focusMenubar(j)},focusToolbar:(h,j)=>{h.focusToolbar(j)},setViews:(h,j,nt)=>{h.setViews(j,nt)},toggleView:(h,j,nt)=>h.toggleView(j,nt),whichView:(h,j)=>h.whichView(j)}});const $ne="file edit view insert format tools table help",GW={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},$9=(h,j,nt)=>{const it=M$(nt).split(/[ ,]/);return{text:h.title,getItems:()=>sn(h.items,dt=>{const yt=dt.toLowerCase();return yt.trim().length===0?[]:nr(it,vt=>vt===yt)?[]:yt==="separator"||yt==="|"?[{type:"separator"}]:j.menuItems[yt]?[j.menuItems[yt]]:[]})}},G9=h=>h.split(" "),jW=(h,j)=>{const nt={...GW,...j.menus},it=Do(j.menus).length>0,dt=j.menubar===void 0||j.menubar===!0?G9($ne):G9(j.menubar===!1?"":j.menubar),yt=co(dt,St=>{const Dt=Ds(GW,St);return it?Dt||or(j.menus,St).exists(Bt=>Ds(Bt,"items")):Dt}),vt=Dn(yt,St=>{const Dt=nt[St];return $9({title:Dt.title,items:G9(Dt.items)},j,h)});return co(vt,St=>{const Dt=Bt=>_e(Bt)||Bt.type!=="separator";return St.getItems().length>0&&nr(St.getItems(),Dt)})},HW=h=>{const j=()=>{h._skinLoaded=!0,eH(h)};return()=>{h.initialized?j():h.on("init",j)}},Gne=(h,j)=>()=>yX(h,{message:j}),j9=(h,j,nt)=>(h.on("remove",()=>nt.unload(j)),nt.load(j)),H9=(h,j,nt,it)=>(h.on("remove",()=>it.unloadRawCss(j)),it.loadRawCss(j,nt)),UW=async(h,j)=>{const it="ui/"+mO(h).getOr("default")+"/skin.css",dt=tinymce.Resource.get(it);if(_e(dt))H9(h,it,dt,h.ui.styleSheetLoader);else{const yt=h.editorManager.suffix,vt=j+`/skin${yt}.css`;return j9(h,vt,h.ui.styleSheetLoader)}},jne=async(h,j)=>{if($p(io.fromDom(h.getElement()))){const dt="ui/"+mO(h).getOr("default")+"/skin.shadowdom.css",yt=tinymce.Resource.get(dt);if(_e(yt))H9(h,dt,yt,bS.DOM.styleSheetLoader);else{const vt=h.editorManager.suffix,St=j+`/skin.shadowdom${vt}.css`;return j9(h,St,bS.DOM.styleSheetLoader)}}},Hne=async(h,j)=>{const nt=()=>{const dt=k6(j),yt=j.editorManager.suffix;dt&&j.contentCSS.push(dt+(h?"/content.inline":"/content")+`${yt}.css`)};mO(j).fold(nt,dt=>{const yt="ui/"+dt+(h?"/content.inline":"/content")+".css",vt=tinymce.Resource.get(yt);_e(vt)?H9(j,yt,vt,j.ui.styleSheetLoader):nt()});const it=k6(j);if(!C6(j)&&_e(it))return Promise.all([UW(j,it),jne(j,it)]).then()},VW=(h,j)=>Hne(h,j).then(HW(j),Gne(j,"Skin could not be loaded")),WW=Mn(VW,!1),Une=Mn(VW,!0),QI=(h,j,nt)=>$n(nt)?h.translate(j):h.translate([j,h.translate(nt)]),Vne=(h,j)=>{const nt=(vt,St,Dt,Bt)=>{const jt=h.shared.providers.translate(vt.title);if(vt.type==="separator")return Mt.some({type:"separator",text:jt});if(vt.type==="submenu"){const Zt=sn(vt.getStyleItems(),an=>it(an,St,Bt));return St===0&&Zt.length<=0?Mt.none():Mt.some({type:"nestedmenuitem",text:jt,enabled:Zt.length>0,getSubmenuItems:()=>sn(vt.getStyleItems(),an=>it(an,St,Bt))})}else return Mt.some({type:"togglemenuitem",text:jt,icon:vt.icon,active:vt.isSelected(Bt),enabled:!Dt,onAction:j.onAction(vt),...vt.getStylePreview().fold(()=>({}),Zt=>({meta:{style:Zt}}))})},it=(vt,St,Dt)=>{const Bt=vt.type==="formatter"&&j.isInvalid(vt);return St===0?Bt?[]:nt(vt,St,!1,Dt).toArray():nt(vt,St,Bt,Dt).toArray()},dt=vt=>{const St=j.getCurrentValue(),Dt=j.shouldHide?0:1;return sn(vt,Bt=>it(Bt,Dt,St))};return{validateItems:dt,getFetch:(vt,St)=>(Dt,Bt)=>{const jt=St(),Zt=dt(jt),an=UI(Zt,j_.CLOSE_ON_EXECUTE,vt,{isHorizontalMenu:!1,search:Mt.none()});Bt(an)}}},zS=(h,j)=>{const nt=j.dataset,it=nt.type==="basic"?()=>Dn(nt.data,dt=>HV(dt,j.isSelectedFor,j.getPreviewFor)):nt.getData;return{items:Vne(h,j),getStyleItems:it}},OA=(h,j,nt,it,dt,yt)=>{const{items:vt,getStyleItems:St}=zS(j,nt),Dt=ds(nt.tooltip),Bt=Zt=>({getComponent:Nt(Zt),setTooltip:an=>{const un=j.shared.providers.translate(an);Wo(Zt.element,"aria-label",un),Dt.set(an)}}),jt=Zt=>{const an=un=>Zt.setTooltip(QI(h,it(un.value),un.value));return h.on(dt,an),QO(yA(h,"NodeChange",un=>{const wn=un.getComponent();nt.updateText(wn),Os.set(un.getComponent(),!h.selection.isEditable())})(Zt),()=>h.off(dt,an))};return MD({context:"mode:design",text:nt.icon.isSome()?Mt.none():nt.text,icon:nt.icon,ariaLabel:Mt.some(nt.tooltip),tooltip:Mt.none(),role:Mt.none(),fetch:vt.getFetch(j,St),onSetup:jt,getApi:Bt,columns:1,presets:"normal",classes:nt.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[Np.config({...j.shared.providers.tooltips.getConfig({tooltipText:j.shared.providers.translate(nt.tooltip),onShow:Zt=>{if(nt.tooltip!==Dt.get()){const an=j.shared.providers.translate(Dt.get());Np.setComponents(Zt,j.shared.providers.tooltips.getComponents({tooltipText:an}))}}})})]},"tox-tbtn",j.shared,yt)},Wne=h=>Dn(h,j=>{let nt=j,it=j;const dt=j.split("=");return dt.length>1&&(nt=dt[0],it=dt[1]),{title:nt,format:it}}),qne=h=>({type:"basic",data:h});var e3;(function(h){h[h.SemiColon=0]="SemiColon",h[h.Space=1]="Space"})(e3||(e3={}));const Zne=(h,j)=>j===e3.SemiColon?h.replace(/;$/,"").split(";"):h.split(" "),U9=(h,j,nt)=>{const it=h.options.get(j);return{type:"basic",data:Wne(Zne(it,nt))}},Kne="Align",qW=Nt("Alignment {0}"),ZW="left",V9=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],W9=h=>{const j=()=>yn(V9,St=>h.formatter.match(St.format)),nt=St=>()=>h.formatter.match(St),it=St=>Mt.none,dt=St=>{const Bt=j().fold(Nt(ZW),jt=>jt.title.toLowerCase());ls(St,NS,{icon:`align-${Bt}`}),wX(h,{value:Bt})},yt=qne(V9),vt=St=>()=>yn(V9,Dt=>Dt.format===St.format).each(Dt=>h.execCommand(Dt.command));return{tooltip:QI(h,qW(),ZW),text:Mt.none(),icon:Mt.some("align-left"),isSelectedFor:nt,getCurrentValue:Mt.none,getPreviewFor:it,onAction:vt,updateText:dt,dataset:yt,shouldHide:!1,isInvalid:St=>!h.formatter.canApply(St.format)}},hN=(h,j)=>OA(h,j,W9(h),qW,"AlignTextUpdate","align"),q9=(h,j)=>{const nt=zS(j,W9(h));h.ui.registry.addNestedMenuItem("align",{text:j.shared.providers.translate(Kne),onSetup:sy(h),getSubmenuItems:()=>nt.items.validateItems(nt.getStyleItems())})},Z9=(h,j)=>{const nt=j(),it=Dn(nt,dt=>dt.format);return Mt.from(h.formatter.closest(it)).bind(dt=>yn(nt,yt=>yt.format===dt))},BS="Blocks",K9=Nt("Block {0}"),Y9="Paragraph",KW=h=>{const j=yt=>()=>h.formatter.match(yt),nt=yt=>()=>{const vt=h.formatter.get(yt);return vt?Mt.some({tag:vt.length>0&&(vt[0].inline||vt[0].block)||"div",styles:h.dom.parseStyle(h.formatter.getCssText(yt))}):Mt.none()},it=yt=>{const St=Z9(h,()=>dt.data).fold(Nt(Y9),Dt=>Dt.title);ls(yt,n_,{text:St}),SX(h,{value:St})},dt=U9(h,"block_formats",e3.SemiColon);return{tooltip:QI(h,K9(),Y9),text:Mt.some(Y9),icon:Mt.none(),isSelectedFor:j,getCurrentValue:Mt.none,getPreviewFor:nt,onAction:sH(h),updateText:it,dataset:dt,shouldHide:!1,isInvalid:yt=>!h.formatter.canApply(yt.format)}},Yne=(h,j)=>OA(h,j,KW(h),K9,"BlocksTextUpdate","blocks"),Xne=(h,j)=>{const nt=zS(j,KW(h));h.ui.registry.addNestedMenuItem("blocks",{text:BS,onSetup:sy(h),getSubmenuItems:()=>nt.items.validateItems(nt.getStyleItems())})},Jne="Fonts",YW=Nt("Font {0}"),X9="System Font",XW=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],JW=h=>{const j=h.split(/\s*,\s*/);return Dn(j,nt=>nt.replace(/^['"]+|['"]+$/g,""))},QW=(h,j)=>j.length>0&&kn(j,nt=>h.indexOf(nt.toLowerCase())>-1),J9=(h,j)=>{if(h.indexOf("-apple-system")===0||j.length>0){const nt=JW(h.toLowerCase());return QW(nt,XW)||QW(nt,j)}else return!1},tq=h=>{const j=()=>{const Dt=wn=>wn?JW(wn)[0]:"",Bt=h.queryCommandValue("FontName"),jt=St.data,Zt=Bt?Bt.toLowerCase():"",an=d5(h);return{matchOpt:yn(jt,wn=>{const On=wn.format;return On.toLowerCase()===Zt||Dt(On).toLowerCase()===Dt(Zt).toLowerCase()}).orThunk(()=>es(J9(Zt,an),{title:X9,format:Zt})),font:Bt}},nt=Dt=>Bt=>Bt.exists(jt=>jt.format===Dt),it=()=>{const{matchOpt:Dt}=j();return Dt},dt=Dt=>()=>Mt.some({tag:"div",styles:Dt.indexOf("dings")===-1?{"font-family":Dt}:{}}),yt=Dt=>()=>{h.undoManager.transact(()=>{h.focus(),h.execCommand("FontName",!1,Dt.format)})},vt=Dt=>{const{matchOpt:Bt,font:jt}=j(),Zt=Bt.fold(Nt(jt),an=>an.title);ls(Dt,n_,{text:Zt}),EF(h,{value:Zt})},St=U9(h,"font_family_formats",e3.SemiColon);return{tooltip:QI(h,YW(),X9),text:Mt.some(X9),icon:Mt.none(),isSelectedFor:nt,getCurrentValue:it,getPreviewFor:dt,onAction:yt,updateText:vt,dataset:St,shouldHide:!1,isInvalid:pn}},Qne=(h,j)=>OA(h,j,tq(h),YW,"FontFamilyTextUpdate","fontfamily"),eoe=(h,j)=>{const nt=zS(j,tq(h));h.ui.registry.addNestedMenuItem("fontfamily",{text:j.shared.providers.translate(Jne),onSetup:sy(h),getSubmenuItems:()=>nt.items.validateItems(nt.getStyleItems())})},toe={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},noe=(()=>{const h="[0-9]+",nt="[eE]"+("[+-]?"+h),it="\\.",dt=St=>`(?:${St})?`,vt=`[+-]?(?:${["Infinity",h+it+dt(h)+dt(nt),it+h+dt(nt),h+dt(nt)].join("|")})`;return new RegExp(`^(${vt})(.*)$`)})(),ooe=(h,j)=>nr(j,nt=>nr(toe[nt],it=>h===it)),k4=(h,j)=>Mt.from(noe.exec(h)).bind(it=>{const dt=Number(it[1]),yt=it[2];return ooe(yt,j)?Mt.some({value:dt,unit:yt}):Mt.none()}),nq=(h,j)=>k4(h,j).map(({value:nt,unit:it})=>nt+it),Q9={tab:Nt(9),escape:Nt(27),enter:Nt(13),backspace:Nt(8),delete:Nt(46),left:Nt(37),up:Nt(38),right:Nt(39),down:Nt(40),space:Nt(32),home:Nt(36),end:Nt(35),pageUp:Nt(33),pageDown:Nt(34)},roe=(h,j,nt,it)=>{let dt=Mt.none();const yt=bo=>bo.map(Bo=>$r.getValue(Bo)).getOr(""),vt=yA(h,"NodeChange SwitchMode",bo=>{const Bo=bo.getComponent();dt=Mt.some(Bo),nt.updateInputValue(Bo),Os.set(Bo,!h.selection.isEditable())}),St=bo=>({getComponent:Nt(bo)}),Dt=ds(Tt),Bt=Zr("custom-number-input-events"),jt=(bo,Bo,Go)=>{const Sr=yt(dt),Vr=nt.getNewValue(Sr,bo),Yo=Sr.length-`${Vr}`.length,qr=dt.map(Qr=>Qr.element.dom.selectionStart-Yo),Lr=dt.map(Qr=>Qr.element.dom.selectionEnd-Yo);nt.onAction(Vr,Go),dt.each(Qr=>{$r.setValue(Qr,Vr),Bo&&(qr.each(Pl=>Qr.element.dom.selectionStart=Pl),Lr.each(Pl=>Qr.element.dom.selectionEnd=Pl))})},Zt=(bo,Bo)=>jt((Go,Sr)=>Go-Sr,bo,Bo),an=(bo,Bo)=>jt((Go,Sr)=>Go+Sr,bo,Bo),un=bo=>Pm(bo.element).fold(Mt.none,Bo=>(_v(Bo),Mt.some(!0))),wn=bo=>P2(bo.element)?(cy(bo.element).each(Bo=>_v(Bo)),Mt.some(!0)):Mt.none(),On=(bo,Bo,Go,Sr)=>{const Vr=ds(Tt),Yo=j.shared.providers.translate(Go),qr=Zr("altExecuting"),Lr=yA(h,"NodeChange SwitchMode",Pl=>{Os.set(Pl.getComponent(),!h.selection.isEditable())}),Qr=Pl=>{Os.isDisabled(Pl)||bo(!0)};return Im.sketch({dom:{tag:"button",attributes:{"aria-label":Yo,"data-mce-name":Bo},classes:Sr.concat(Bo)},components:[M7(Bo,j.shared.providers.icons)],buttonBehaviours:yr([Os.config({}),Np.config(j.shared.providers.tooltips.getConfig({tooltipText:Yo})),Ks(qr,[AS({onSetup:Lr,getApi:St},Vr),TS({getApi:St},Vr),er(gv(),(Pl,_h)=>{(_h.event.raw.keyCode===Q9.space()||_h.event.raw.keyCode===Q9.enter())&&(Os.isDisabled(Pl)||bo(!1))}),er(l2(),Qr),er(Wl(),Qr)])]),eventOrder:{[gv()]:[qr,"keying"],[l2()]:[qr,"alloy.base.behaviour"],[Wl()]:[qr,"alloy.base.behaviour"],[my()]:["alloy.base.behaviour",qr,"tooltipping"],[Vy()]:[qr,"tooltipping"]}})},_o=iu(On(bo=>Zt(!1,bo),"minus","Decrease font size",[])),Un=iu(On(bo=>an(!1,bo),"plus","Increase font size",[])),go=iu({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Tx.sketch({inputBehaviours:yr([Os.config({}),Ks(Bt,[AS({onSetup:vt,getApi:St},Dt),TS({getApi:St},Dt)]),Ks("input-update-display-text",[er(n_,(bo,Bo)=>{$r.setValue(bo,Bo.event.text)}),er(H4(),bo=>{nt.onAction($r.getValue(bo))}),er(T_(),bo=>{nt.onAction($r.getValue(bo))})]),_s.config({mode:"special",onEnter:bo=>(jt(Qt,!0,!0),Mt.some(!0)),onEscape:un,onUp:bo=>(an(!0,!1),Mt.some(!0)),onDown:bo=>(Zt(!0,!1),Mt.some(!0)),onLeft:(bo,Bo)=>(Bo.cut(),Mt.none()),onRight:(bo,Bo)=>(Bo.cut(),Mt.none())})])})],behaviours:yr([Fs.config({}),_s.config({mode:"special",onEnter:wn,onSpace:wn,onEscape:un}),Ks("input-wrapper-events",[er(J0(),bo=>{xo([_o,Un],Bo=>{const Go=io.fromDom(Bo.get(bo).element.dom);P2(Go)&&KC(Go)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Ct(it)?{"data-mce-name":it}:{}}},components:[_o.asSpec(),go.asSpec(),Un.asSpec()],behaviours:yr([Fs.config({}),_s.config({mode:"flow",focusInside:Iw.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:bo=>P2(bo.element)?Mt.none():(_v(bo.element),Mt.some(!0))})])}},oq="Font sizes",rq=Nt("Font size {0}"),sq="12pt",soe={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},iq={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},ioe=(h,j)=>{const nt=Math.pow(10,j);return Math.round(h*nt)/nt},aq=(h,j)=>/[0-9.]+px$/.test(h)?ioe(parseInt(h,10)*72/96,j||0)+"pt":or(iq,h).getOr(h),aoe=h=>or(soe,h).getOr(""),lq=h=>{const j=()=>{let Dt=Mt.none();const Bt=St.data,jt=h.queryCommandValue("FontSize");if(jt)for(let Zt=3;Dt.isNone()&&Zt>=0;Zt--){const an=aq(jt,Zt),un=aoe(an);Dt=yn(Bt,wn=>wn.format===jt||wn.format===an||wn.format===un)}return{matchOpt:Dt,size:jt}},nt=Dt=>Bt=>Bt.exists(jt=>jt.format===Dt),it=()=>{const{matchOpt:Dt}=j();return Dt},dt=Nt(Mt.none),yt=Dt=>()=>{h.undoManager.transact(()=>{h.focus(),h.execCommand("FontSize",!1,Dt.format)})},vt=Dt=>{const{matchOpt:Bt,size:jt}=j(),Zt=Bt.fold(Nt(jt),an=>an.title);ls(Dt,n_,{text:Zt}),CX(h,{value:Zt})},St=U9(h,"font_size_formats",e3.Space);return{tooltip:QI(h,rq(),sq),text:Mt.some(sq),icon:Mt.none(),isSelectedFor:nt,getPreviewFor:dt,getCurrentValue:it,onAction:yt,updateText:vt,dataset:St,shouldHide:!1,isInvalid:pn}},loe=(h,j)=>OA(h,j,lq(h),rq,"FontSizeTextUpdate","fontsize"),coe=h=>{var j;const nt={step:1};return(j={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[h])!==null&&j!==void 0?j:nt},uoe=16,doe=h=>h>=0,foe=h=>{const j=()=>h.queryCommandValue("FontSize");return{updateInputValue:it=>ls(it,n_,{text:j()}),onAction:(it,dt)=>h.execCommand("FontSize",!1,it,{skip_focus:!dt}),getNewValue:(it,dt)=>{k4(it,["unsupportedLength","empty"]);const yt=j(),vt=k4(it,["unsupportedLength","empty"]).or(k4(yt,["unsupportedLength","empty"])),St=vt.map(an=>an.value).getOr(uoe),Dt=N$(h),Bt=vt.map(an=>an.unit).filter(an=>an!=="").getOr(Dt),jt=dt(St,coe(Bt).step),Zt=`${doe(jt)?jt:St}${Bt}`;return Zt!==yt&&kX(h,{value:Zt}),Zt}}},cq=(h,j)=>roe(h,j,foe(h),"fontsizeinput"),hoe=(h,j)=>{const nt=zS(j,lq(h));h.ui.registry.addNestedMenuItem("fontsize",{text:oq,onSetup:sy(h),getSubmenuItems:()=>nt.items.validateItems(nt.getStyleItems())})},poe="Formats",uq=h=>$n(h)?"Formats":"Format {0}",dq=(h,j)=>{const nt="Formats",it=vt=>()=>h.formatter.match(vt),dt=vt=>()=>{const St=h.formatter.get(vt);return St!==void 0?Mt.some({tag:St.length>0&&(St[0].inline||St[0].block)||"div",styles:h.dom.parseStyle(h.formatter.getCssText(vt))}):Mt.none()},yt=vt=>{const St=Zt=>UD(Zt)?sn(Zt.items,St):c9(Zt)?[{title:Zt.title,format:Zt.format}]:[],Dt=sn(jV(h),St),jt=Z9(h,Nt(Dt)).fold(Nt({title:nt,tooltipLabel:""}),Zt=>({title:Zt.title,tooltipLabel:Zt.title}));ls(vt,n_,{text:jt.title}),xX(h,{value:jt.tooltipLabel})};return{tooltip:QI(h,uq(""),""),text:Mt.some(nt),icon:Mt.none(),isSelectedFor:it,getCurrentValue:Mt.none,getPreviewFor:dt,onAction:sH(h),updateText:yt,shouldHide:I$(h),isInvalid:vt=>!h.formatter.canApply(vt.format),dataset:j}},goe=(h,j)=>{const nt={type:"advanced",...j.styles};return OA(h,j,dq(h,nt),uq,"StylesTextUpdate","styles")},moe=(h,j)=>{const nt={type:"advanced",...j.styles},it=zS(j,dq(h,nt));h.ui.registry.addNestedMenuItem("styles",{text:poe,onSetup:sy(h),getSubmenuItems:()=>it.items.validateItems(it.getStyleItems())})},yoe=Nt([Qo("toggleClass"),Qo("fetch"),w2("onExecute"),So("getHotspot",Mt.some),So("getAnchorOverrides",Nt({})),bw(),w2("onItemExecute"),Ql("lazySink"),Qo("dom"),Hl("onOpen"),Hm("splitDropdownBehaviours",[Vp,_s,Fs]),So("matchWidth",!1),So("useMinWidth",!1),So("eventOrder",{}),Ql("role"),Ql("listRole")].concat(sD())),fq=S0({factory:Im,schema:[Qo("dom")],name:"arrow",defaults:()=>({buttonBehaviours:yr([Fs.revoke()])}),overrides:h=>({dom:{tag:"span",attributes:{role:"presentation"}},action:j=>{j.getSystem().getByUid(h.uid).each(ow)},buttonBehaviours:yr([_a.config({toggleOnExecute:!1,toggleClass:h.toggleClass})])})}),boe=S0({factory:Im,schema:[Qo("dom")],name:"button",defaults:()=>({buttonBehaviours:yr([Fs.revoke()])}),overrides:h=>({dom:{tag:"span",attributes:{role:"presentation"}},action:j=>{j.getSystem().getByUid(h.uid).each(nt=>{h.onExecute(nt,j)})}})}),voe=Nt([fq,boe,Jy({factory:{sketch:h=>({uid:h.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:h.text}})},schema:[Qo("text")],name:"aria-descriptor"}),kv({schema:[O_()],name:"menu",defaults:h=>({onExecute:(j,nt)=>{j.getSystem().getByUid(h.uid).each(it=>{h.onItemExecute(it,j,nt)})}})}),PH()]),hq=(h,j,nt,it)=>{const dt=jt=>{$l.getCurrent(jt).each(Zt=>{Er.highlightFirst(Zt),_s.focusIn(Zt)})},yt=jt=>{NF(h,Qt,jt,it,dt,Dy.HighlightMenuAndItem).get(Tt)},vt=jt=>(yt(jt),Mt.some(!0)),St=jt=>{const Zt=Gr(jt,h,"button");return ow(Zt),Mt.some(!0)},Dt={...xu([rp((jt,Zt)=>{zu(jt,h,"aria-descriptor").each(un=>{const wn=Zr("aria");Wo(un.element,"id",wn),Wo(jt.element,"aria-describedby",wn)})})]),...l5(Mt.some(yt))},Bt={repositionMenus:jt=>{_a.isOn(jt)&&zF(jt)}};return{uid:h.uid,dom:h.dom,components:j,apis:Bt,eventOrder:{...h.eventOrder,[s0()]:["disabling","toggling","alloy.base.behaviour"]},events:Dt,behaviours:Um(h.splitDropdownBehaviours,[Vp.config({others:{sandbox:jt=>{const Zt=Gr(jt,h,"arrow");return FF(h,jt,{onOpen:()=>{_a.on(Zt),_a.on(jt)},onClose:()=>{_a.off(Zt),_a.off(jt)}})}}}),_s.config({mode:"special",onSpace:St,onEnter:St,onDown:vt}),Fs.config({}),_a.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:h.role.getOr("button"),"aria-haspopup":!0}}}},pN=g0({name:"SplitDropdown",configFields:yoe(),partFields:voe(),factory:hq,apis:{repositionMenus:(h,j)=>h.repositionMenus(j)}}),ez=h=>({isEnabled:()=>!Os.isDisabled(h),setEnabled:j=>Os.set(h,!j),setText:j=>ls(h,n_,{text:j}),setIcon:j=>ls(h,NS,{icon:j})}),pq=h=>({setActive:j=>{_a.set(h,j)},isActive:()=>_a.isOn(h),isEnabled:()=>!Os.isDisabled(h),setEnabled:j=>Os.set(h,!j),setText:j=>ls(h,n_,{text:j}),setIcon:j=>ls(h,NS,{icon:j})}),gq=(h,j)=>h.map(nt=>({"aria-label":j.translate(nt)})).getOr({}),mq=Zr("focus-button"),tz=(h,j,nt,it,dt,yt,vt)=>{const St=j.map(Bt=>iu(P7(Bt,"tox-tbtn",dt))),Dt=h.map(Bt=>iu(iC(Bt,dt.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(j.isSome()?["tox-tbtn--select"]:[]),attributes:{...gq(nt,dt),...Ct(vt)?{"data-mce-name":vt}:{}}},components:IS([Dt.map(Bt=>Bt.asSpec()),St.map(Bt=>Bt.asSpec())]),eventOrder:{[vp()]:["focusing","alloy.base.behaviour",TA],[my()]:[TA,"toolbar-group-button-events"]},buttonBehaviours:yr([a1.toolbarButton(()=>dt.checkUiComponentContext(yt).shouldDisable),Yp(()=>dt.checkUiComponentContext(yt)),Ks(TA,[rp((Bt,jt)=>RD(Bt)),er(n_,(Bt,jt)=>{St.bind(Zt=>Zt.getOpt(Bt)).each(Zt=>{Us.set(Zt,[_p(dt.translate(jt.event.text))])})}),er(NS,(Bt,jt)=>{Dt.bind(Zt=>Zt.getOpt(Bt)).each(Zt=>{Us.set(Zt,[iC(jt.event.icon,dt.icons)])})}),er(vp(),(Bt,jt)=>{jt.event.prevent(),El(Bt,mq)})])].concat(it.getOr([])))}},n3=(h,j,nt,it,dt)=>{const yt=j.shared,vt=ds(Tt),St={toolbarButtonBehaviours:[],getApi:ez,onSetup:h.onSetup},Dt=[Ks("toolbar-group-button-events",[AS(St,vt),TS(St,vt)])];return FS.sketch({lazySink:yt.getSink,fetch:()=>j0.nu(Bt=>{Bt(Dn(nt(h.items),aN))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:tz(h.icon,h.text,h.tooltip,Mt.some(Dt),yt.providers,h.context,dt),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:it}}}})},yq=(h,j,nt,it)=>{var dt;const yt=ds(Tt),vt=tz(h.icon,h.text,h.tooltip,Mt.none(),nt,h.context,it);return Im.sketch({dom:vt.dom,components:vt.components,eventOrder:WU,buttonBehaviours:{...yr([Ks("toolbar-button-events",[VU({onAction:h.onAction,getApi:j.getApi}),AS(j,yt),TS(j,yt)]),...h.tooltip.map(St=>Np.config(nt.tooltips.getConfig({tooltipText:nt.translate(St)+h.shortcut.map(Dt=>` (${hF(Dt)})`).getOr("")}))).toArray(),a1.toolbarButton(()=>!h.enabled||nt.checkUiComponentContext(h.context).shouldDisable),Yp(()=>nt.checkUiComponentContext(h.context))].concat(j.toolbarButtonBehaviours)),[TA]:(dt=vt.buttonBehaviours)===null||dt===void 0?void 0:dt[TA]}})},_oe=(h,j,nt)=>bq(h,j,[],nt),bq=(h,j,nt,it)=>yq(h,{toolbarButtonBehaviours:nt.length>0?[Ks("toolbarButtonWith",nt)]:[],getApi:ez,onSetup:h.onSetup},j,it),xoe=(h,j,nt)=>vq(h,j,[],nt),vq=(h,j,nt,it)=>yq(h,{toolbarButtonBehaviours:[Us.config({}),_a.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(nt.length>0?[Ks("toolbarToggleButtonWith",nt)]:[]),getApi:pq,onSetup:h.onSetup},j,it),woe=(h,j,nt)=>it=>j0.nu(dt=>j.fetch(dt)).map(dt=>Mt.from(PI(Fu(MF(Zr("menu-value"),dt,yt=>{j.onItemAction(h(it),yt)},j.columns,j.presets,j_.CLOSE_ON_EXECUTE,j.select.getOr(pn),nt),{movement:oD(j.columns,j.presets),menuBehaviours:II.unnamedEvents(j.columns!=="auto"?[]:[rp((yt,vt)=>{dF(yt,4,gG(j.presets)).each(({numRows:St,numColumns:Dt})=>{_s.setGridSize(yt,St,Dt)})})])})))),Coe=(h,j,nt)=>{const it=ds(h.tooltip.getOr("")),dt=St=>({isEnabled:()=>!Os.isDisabled(St),setEnabled:Dt=>Os.set(St,!Dt),setIconFill:(Dt,Bt)=>{ap(St.element,`svg path[class="${Dt}"], rect[class="${Dt}"]`).each(jt=>{Wo(jt,"fill",Bt)})},setActive:Dt=>{Wo(St.element,"aria-pressed",Dt),ap(St.element,"span").each(Bt=>{St.getSystem().getByDom(Bt).each(jt=>_a.set(jt,Dt))})},isActive:()=>ap(St.element,"span").exists(Dt=>St.getSystem().getByDom(Dt).exists(_a.isOn)),setText:Dt=>ap(St.element,"span").each(Bt=>St.getSystem().getByDom(Bt).each(jt=>ls(jt,n_,{text:Dt}))),setIcon:Dt=>ap(St.element,"span").each(Bt=>St.getSystem().getByDom(Bt).each(jt=>ls(jt,NS,{icon:Dt}))),setTooltip:Dt=>{const Bt=j.providers.translate(Dt);Wo(St.element,"aria-label",Bt),it.set(Dt)}}),yt=ds(Tt),vt={getApi:dt,onSetup:h.onSetup};return pN.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...gq(h.tooltip,j.providers),...Ct(nt)?{"data-mce-name":nt}:{}}},onExecute:St=>{const Dt=dt(St);Dt.isEnabled()&&h.onAction(Dt)},onItemExecute:(St,Dt,Bt)=>{},splitDropdownBehaviours:yr([Ks("split-dropdown-events",[rp((St,Dt)=>RD(St)),er(mq,Fs.focus),AS(vt,yt),TS(vt,yt)]),a1.splitButton(()=>j.providers.isDisabled()||j.providers.checkUiComponentContext(h.context).shouldDisable),Yp(()=>j.providers.checkUiComponentContext(h.context)),zI.config({}),...h.tooltip.map(St=>Np.config({...j.providers.tooltips.getConfig({tooltipText:j.providers.translate(St),onShow:Dt=>{if(it.get()!==St){const Bt=j.providers.translate(it.get());Np.setComponents(Dt,j.providers.tooltips.getComponents({tooltipText:Bt}))}}})})).toArray()]),eventOrder:{[my()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Vy()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:j.getSink,fetch:woe(dt,h,j.providers),parts:{menu:E5(!1,h.columns,h.presets)},components:[pN.parts.button(tz(h.icon,h.text,Mt.none(),Mt.some([_a.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),a1.toolbarButton(pn),Yp(Nt({contextType:"any",shouldDisable:!1}))]),j.providers,h.context)),pN.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:j6("chevron-down",j.providers.icons)},buttonBehaviours:yr([a1.splitButton(pn),Yp(Nt({contextType:"any",shouldDisable:!1}))])}),pN.parts["aria-descriptor"]({text:j.providers.translate("To open the popup, press Shift+Enter")})]})},koe=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],DA=(h,j)=>(nt,it,dt,yt)=>{const vt=h(nt).mapError(St=>ux(St)).getOrDie();return j(vt,it,dt,yt)},Soe={button:DA(I5,(h,j,nt,it)=>_oe(h,j.shared.providers,it)),togglebutton:DA(M5,(h,j,nt,it)=>xoe(h,j.shared.providers,it)),menubutton:DA(uW,(h,j,nt,it)=>RA(h,"tox-tbtn",j,Mt.none(),!1,it)),splitbutton:DA(Zte,(h,j,nt,it)=>Coe(h,j.shared,it)),grouptoolbarbutton:DA(Wte,(h,j,nt,it)=>{const dt=nt.ui.registry.getAll().buttons,yt=St=>mN(nt,{buttons:dt,toolbar:St,allowToolbarGroups:!1},j,Mt.none()),vt={[nP]:j.shared.header.isPositionedAtTop()?am.TopToBottom:am.BottomToTop};switch(vS(nt)){case r1.floating:return n3(h,j,yt,vt,it);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},Eoe=(h,j,nt,it)=>or(Soe,h.type).fold(()=>(console.error("skipping button defined by",h),Mt.none()),dt=>Mt.some(dt(h,j,nt,it))),nz={styles:goe,fontsize:loe,fontsizeinput:cq,fontfamily:Qne,blocks:Yne,align:hN},_q=h=>{const j=Dn(koe,nt=>{const it=co(nt.items,dt=>Ds(h,dt)||Ds(nz,dt));return{name:nt.name,items:it}});return co(j,nt=>nt.items.length>0)},Aoe=h=>{const j=h.split("|");return Dn(j,nt=>({items:nt.trim().split(" ")}))},Toe=h=>Pt(h,j=>Ds(j,"name")&&Ds(j,"items")),Ioe=h=>{const j=h.toolbar,nt=h.buttons;return j===!1?[]:j===void 0||j===!0?_q(nt):_e(j)?Aoe(j):Toe(j)?j:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Roe=(h,j,nt,it,dt,yt)=>or(j,nt.toLowerCase()).orThunk(()=>yt.bind(vt=>Co(vt,St=>or(j,St+nt.toLowerCase())))).fold(()=>or(nz,nt.toLowerCase()).map(vt=>vt(h,dt)),vt=>vt.type==="grouptoolbarbutton"&&!it?(console.warn(`Ignoring the '${nt}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),Mt.none()):Eoe(vt,dt,h,nt.toLowerCase())),mN=(h,j,nt,it)=>{const dt=Ioe(j),yt=Dn(dt,vt=>{const St=sn(vt.items,Dt=>Dt.trim().length===0?[]:Roe(h,j.buttons,Dt,j.allowToolbarGroups,nt,it).toArray());return{title:Mt.from(h.translate(vt.name)),items:St}});return co(yt,vt=>vt.items.length>0)},xq=(h,j,nt,it)=>{const dt=j.mainUi.outerContainer,yt=nt.toolbar,vt=nt.buttons;if(Pt(yt,_e)){const St=yt.map(Dt=>{const Bt={toolbar:Dt,buttons:vt,allowToolbarGroups:nt.allowToolbarGroups};return mN(h,Bt,it,Mt.none())});Vu.setToolbars(dt,St)}else Vu.setToolbar(dt,mN(h,nt,it,Mt.none()))},oz=ba(),Moe=oz.os.isiOS()&&oz.os.version.major<=12,Poe=(h,j)=>{const{uiMotherships:nt}=j,it=h.dom;let dt=h.getWin();const yt=h.getDoc().documentElement,vt=ds(Zu(dt.innerWidth,dt.innerHeight)),St=ds(Zu(yt.offsetWidth,yt.offsetHeight)),Dt=()=>{const an=vt.get();(an.left!==dt.innerWidth||an.top!==dt.innerHeight)&&(vt.set(Zu(dt.innerWidth,dt.innerHeight)),SF(h))},Bt=()=>{const an=h.getDoc().documentElement,un=St.get();(un.left!==an.offsetWidth||un.top!==an.offsetHeight)&&(St.set(Zu(an.offsetWidth,an.offsetHeight)),SF(h))},jt=an=>{vX(h,an)};it.bind(dt,"resize",Dt),it.bind(dt,"scroll",jt);const Zt=hR(io.fromDom(h.getBody()),"load",Bt);h.on("hide",()=>{xo(nt,an=>{Jo(an.element,"display","none")})}),h.on("show",()=>{xo(nt,an=>{js(an.element,"display")})}),h.on("NodeChange",Bt),h.on("remove",()=>{Zt.unbind(),it.unbind(dt,"resize",Dt),it.unbind(dt,"scroll",jt),dt=null})},Ooe=(h,j,nt)=>{eC(h)&&GR(nt.mainUi.mothership.element,nt.popupUi.mothership),My(j,nt.dialogUi.mothership)};var yN=Object.freeze({__proto__:null,render:(h,j,nt,it,dt)=>{const{mainUi:yt,uiMotherships:vt}=j,St=ds(0),Dt=yt.outerContainer;WW(h);const Bt=io.fromDom(dt.targetNode),jt=Dm(yp(Bt));GR(Bt,yt.mothership),Ooe(h,jt,j),h.on("PostRender",()=>{Vu.setSidebar(Dt,nt.sidebar,w6(h))}),h.on("SkinLoaded",()=>{xq(h,j,nt,it),St.set(h.getWin().innerWidth),Vu.setMenubar(Dt,jW(h,nt)),Vu.setViews(Dt,nt.views),Poe(h,j)});const Zt=Vu.getSocket(Dt).getOrDie("Could not find expected socket element");if(Moe){Xs(Zt.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const On=HQ(()=>{h.dispatch("ScrollContent")},20),_o=ny(Zt.element,"scroll",On.throttle);h.on("remove",_o.unbind)}HG(h,j),h.addCommand("ToggleSidebar",(On,_o)=>{Vu.toggleSidebar(Dt,_o),oH(h)}),h.addQueryValueHandler("ToggleSidebar",()=>{var On;return(On=Vu.whichSidebar(Dt))!==null&&On!==void 0?On:""}),h.addCommand("ToggleView",(On,_o)=>{if(Vu.toggleView(Dt,_o)){const Un=Dt.element;yt.mothership.broadcastOn([Cx()],{target:Un}),xo(vt,go=>{go.broadcastOn([Cx()],{target:Un})}),ft(Vu.whichView(Dt))&&(h.focus(),h.nodeChanged(),Vu.refreshToolbar(Dt)),rH(h)}}),h.addQueryValueHandler("ToggleView",()=>{var On;return(On=Vu.whichView(Dt))!==null&&On!==void 0?On:""});const an=vS(h),un=()=>{Vu.refreshToolbar(j.mainUi.outerContainer)};(an===r1.sliding||an===r1.floating)&&h.on("ResizeWindow ResizeEditor ResizeContent",()=>{const On=h.getWin().innerWidth;On!==St.get()&&(un(),St.set(On))});const wn={setEnabled:On=>{L5(j,On?"setEnabled":"setDisabled")},isEnabled:()=>!Os.isDisabled(Dt)};return{iframeContainer:Zt.element.dom,editorContainer:Dt.element.dom,api:wn}}});const wq=h=>/^[0-9\.]+(|px)$/i.test(""+h)?Mt.some(parseInt(""+h,10)):Mt.none(),o3=h=>It(h)?h+"px":h,NA=(h,j,nt)=>{const it=j.filter(yt=>h<yt),dt=nt.filter(yt=>h>yt);return it.or(dt).getOr(h)},Cq=h=>{const j=f6(h),nt=rA(h),it=cO(h);return wq(j).map(dt=>NA(dt,nt,it))},Doe=h=>Cq(h).getOr(f6(h)),kq=h=>{const j=u5(h),nt=h6(h),it=sA(h);return wq(j).map(dt=>NA(dt,nt,it))},Noe=h=>kq(h).getOr(u5(h)),{ToolbarLocation:rz,ToolbarMode:Sq}=sY,bN=40,Eq=(h,j,nt,it,dt)=>{const{mainUi:yt,uiMotherships:vt}=nt,St=bS.DOM,Dt=$_(h),Bt=_S(h),jt=sA(h).or(kq(h)),Zt=it.shared.header,an=Zt.isPositionedAtTop,un=150,wn=vS(h),On=wn===Sq.sliding||wn===Sq.floating,_o=ds(!1),Un=()=>_o.get()&&!h.removed,go=as=>On?as.fold(Nt(0),hr=>hr.components().length>1?mu(hr.components()[1].element):0):0,bo=as=>{switch(uO(h)){case rz.auto:const hr=Vu.getToolbar(yt.outerContainer),Dr=go(hr),Gs=mu(as.element)-Dr,ga=tp(j);if(ga.y>Gs)return"top";{const qs=ly(j),Du=Math.max(qs.dom.scrollHeight,mu(qs));return ga.bottom<Du-Gs||Hp().bottom<ga.bottom-Gs?"bottom":"top"}case rz.bottom:return"bottom";case rz.top:default:return"top"}},Bo=as=>{dt.on(hr=>{Ju.setModes(hr,[as]),Zt.setDockingMode(as);const Dr=an()?am.TopToBottom:am.BottomToTop;Wo(hr.element,nP,Dr)})},Go=()=>{dt.on(as=>{const hr=jt.getOrThunk(()=>b_().width-P0(j).left-10);Jo(as.element,"max-width",hr+"px")})},Sr=(as,hr)=>{dt.on(Dr=>{const Gs=Vu.getToolbar(yt.outerContainer),ga=go(Gs),vs=tp(j),qs=Vr(h,yt.outerContainer.element),Du=()=>qs.fold(()=>vs.x,V0=>{const g1=tp(V0);return Yl(V0,ho())?vs.x:vs.x-g1.x}),ku=()=>qs.fold(()=>an()?Math.max(vs.y-mu(Dr.element)+ga,0):vs.bottom,V0=>{var g1;const m1=tp(V0),Y_=(g1=V0.dom.scrollTop)!==null&&g1!==void 0?g1:0,$w=Yl(V0,ho())?Math.max(vs.y-mu(Dr.element)+ga,0):vs.y-m1.y+Y_-mu(Dr.element)+ga;return an()?$w:vs.bottom}),rv=Du(),Sp=es(as,Math.ceil(yt.outerContainer.element.dom.getBoundingClientRect().width)).filter(V0=>V0>un).map(V0=>{const g1=hr.getOr(e0()),m1=window.innerWidth-(rv-g1.left),Y_=Math.max(Math.min(V0,m1),un);return m1<V0&&Jo(yt.outerContainer.element,"width",Y_+"px"),{width:Y_+"px"}}).getOr({width:"max-content"}),h1={position:"absolute",left:Math.round(rv)+"px",top:ku()+"px"};Xs(yt.outerContainer.element,{...h1,...Sp})})},Vr=(as,hr)=>eC(as)?DC(hr):Mt.none(),Yo=()=>{xo(vt,as=>{as.broadcastOn([Sw()],{})})},qr=()=>!Dt&&(Gu(yt.outerContainer.element).left+En(yt.outerContainer.element)>=window.innerWidth-bN||gu(yt.outerContainer.element,"width").isSome())?(Jo(yt.outerContainer.element,"position","absolute"),Jo(yt.outerContainer.element,"left","0px"),js(yt.outerContainer.element,"width"),!0):!1,Lr=as=>{if(!Un())return;Dt||Go();const hr=e0(),Dr=Dt?!1:qr();if(On&&Vu.refreshToolbar(yt.outerContainer),!Dt){const Gs=e0(),ga=es(hr.left!==Gs.left,hr);Sr(Dr,ga),ga.each(vs=>{I1(vs.left,Gs.top)})}Bt&&dt.on(as),Yo()},Qr=()=>Dt||!Bt||!Un()?!1:dt.get().exists(as=>{const hr=Zt.getDockingMode(),Dr=bo(as);return Dr!==hr?(Bo(Dr),!0):!1});return{isVisible:Un,isPositionedAtTop:an,show:()=>{_o.set(!0),Jo(yt.outerContainer.element,"display","flex"),St.addClass(h.getBody(),"mce-edit-focus"),xo(vt,as=>{js(as.element,"display")}),Qr(),eC(h)?Lr(as=>Ju.isDocked(as)?Ju.reset(as):Ju.refresh(as)):Lr(Ju.refresh)},hide:()=>{_o.set(!1),Jo(yt.outerContainer.element,"display","none"),St.removeClass(h.getBody(),"mce-edit-focus"),xo(vt,as=>{Jo(as.element,"display","none")})},update:Lr,updateMode:()=>{Qr()&&Lr(Ju.reset)},repositionPopups:Yo}},sz=(h,j)=>{const nt=tp(h);return{pos:j?nt.y:nt.bottom,bounds:nt}},Aq=(h,j,nt,it)=>{const dt=ds(sz(j,nt.isPositionedAtTop())),yt=Bt=>{const{pos:jt,bounds:Zt}=sz(j,nt.isPositionedAtTop()),{pos:an,bounds:un}=dt.get(),wn=Zt.height!==un.height||Zt.width!==un.width;dt.set({pos:jt,bounds:Zt}),wn&&SF(h,Bt),nt.isVisible()&&(an!==jt?nt.update(Ju.reset):wn&&(nt.updateMode(),nt.repositionPopups()))};it||(h.on("activate",nt.show),h.on("deactivate",nt.hide)),h.on("SkinLoaded ResizeWindow",()=>nt.update(Ju.reset)),h.on("NodeChange keydown",Bt=>{requestAnimationFrame(()=>yt(Bt))});let vt=0;const St=SD(()=>nt.update(Ju.refresh),33);h.on("ScrollWindow",()=>{const Bt=e0().left;Bt!==vt&&(vt=Bt,St.throttle()),nt.updateMode()}),eC(h)&&h.on("ElementScroll",Bt=>{nt.update(Ju.refresh)});const Dt=Y0();Dt.set(hR(io.fromDom(h.getBody()),"load",Bt=>yt(Bt.raw))),h.on("remove",()=>{Dt.clear()})};var Foe=Object.freeze({__proto__:null,render:(h,j,nt,it,dt)=>{const{mainUi:yt}=j,vt=Xl(),St=io.fromDom(dt.targetNode),Dt=Eq(h,St,j,it,vt),Bt=y6(h);Une(h);const jt=()=>{if(vt.isSet()){Dt.show();return}vt.set(Vu.getHeader(yt.outerContainer).getOrDie());const an=E6(h);eC(h)?(GR(St,yt.mothership),GR(St,j.popupUi.mothership)):My(an,yt.mothership),My(an,j.dialogUi.mothership);const un=()=>{xq(h,j,nt,it),Vu.setMenubar(yt.outerContainer,jW(h,nt)),Dt.show(),Aq(h,St,Dt,Bt),h.nodeChanged()};Bt?h.once("SkinLoaded",un):un()};h.on("show",jt),h.on("hide",Dt.hide),Bt||(h.on("focus",jt),h.on("blur",Dt.hide)),h.on("init",()=>{(h.hasFocus()||Bt)&&jt()}),HG(h,j);const Zt={show:jt,hide:Dt.hide,setEnabled:an=>{L5(j,an?"setEnabled":"setDisabled")},isEnabled:()=>!Os.isDisabled(yt.outerContainer)};return{editorContainer:yt.outerContainer.element.dom,api:Zt}}});const Tq=()=>{const h=Xl(),j=Xl(),nt=Xl();return{dialogUi:h,popupUi:j,mainUi:nt,getUiMotherships:()=>{const yt=h.get().map(St=>St.mothership),vt=j.get().map(St=>St.mothership);return yt.fold(()=>vt.toArray(),St=>vt.fold(()=>[St],Dt=>Yl(St.element,Dt.element)?[St]:[St,Dt]))},lazyGetInOuterOrDie:(yt,vt)=>()=>nt.get().bind(St=>vt(St.outerContainer)).getOrDie(`Could not find ${yt} element in OuterContainer`)}},zoe="contexttoolbar-show",Iq="contexttoolbar-hide",Boe=h=>({hide:()=>El(h,$m()),getValue:()=>$r.getValue(h)}),Rq=(h,j)=>er(ID,(nt,it)=>{const dt=h.get(nt),yt=Boe(dt);j.onAction(yt,it.event.buttonApi)}),$oe=(h,j,nt)=>{const{primary:it,...dt}=j.original,yt=pr(I5({...dt,type:"button",onAction:Tt}));return bq(yt,nt,[Rq(h,j)])},S4=(h,j,nt)=>{const{primary:it,...dt}=j.original,yt=pr(M5({...dt,type:"togglebutton",onAction:Tt}));return vq(yt,nt,[Rq(h,j)])},Goe=h=>h.type==="contextformtogglebutton",joe=(h,j,nt)=>Goe(j)?S4(h,j,nt):$oe(h,j,nt),Hoe=(h,j,nt)=>{const it=Dn(j,vt=>iu(joe(h,vt,nt)));return{asSpecs:()=>Dn(it,vt=>vt.asSpec()),findPrimary:vt=>Co(j,(St,Dt)=>St.primary?Mt.from(it[Dt]).bind(Bt=>Bt.getOpt(vt)).filter(ln(Os.isDisabled)):Mt.none())}},iz=(h,j)=>{const nt=h.label.fold(()=>({}),yt=>({"aria-label":yt})),it=iu(Tx.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:h.initValue(),inputAttributes:nt,selectOnFocus:!0,inputBehaviours:yr([Os.config({disabled:()=>j.checkUiComponentContext("mode:design").shouldDisable}),Yp(()=>j.checkUiComponentContext("mode:design")),_s.config({mode:"special",onEnter:yt=>dt.findPrimary(yt).map(vt=>(ow(vt),!0)),onLeft:(yt,vt)=>(vt.cut(),Mt.none()),onRight:(yt,vt)=>(vt.cut(),Mt.none())})])})),dt=Hoe(it,h.commands,j);return[{title:Mt.none(),items:[it.asSpec()]},{title:Mt.none(),items:dt.asSpecs()}]},Mq={renderContextForm:(h,j,nt)=>lN({type:h,uid:Zr("context-toolbar"),initGroups:iz(j,nt),onEscape:Mt.none,cyclicKeying:!0,providers:nt}),buildInitGroups:iz},Pq=(h,j,nt)=>j.bottom-h.y>=nt&&h.bottom-j.y>=nt,Uoe=h=>{const j=h.getBoundingClientRect();if(j.height<=0&&j.width<=0){const nt=zy(io.fromDom(h.startContainer),h.startOffset).element;return(Rl(nt)?_g(nt):Mt.some(nt)).filter(Cs).map(dt=>dt.dom.getBoundingClientRect()).getOr(j)}else return j},az=h=>{const j=h.selection.getRng(),nt=Uoe(j);if(h.inline){const it=e0();return ep(it.left+nt.left,it.top+nt.top,nt.width,nt.height)}else{const it=Bv(io.fromDom(h.getBody()));return ep(it.x+nt.left,it.y+nt.top,nt.width,nt.height)}},Voe=(h,j)=>j.filter(nt=>zn(nt)&&cm(nt)).map(Bv).getOrThunk(()=>az(h)),Woe=(h,j,nt)=>{const it=Math.max(h.x+nt,j.x),dt=Math.min(h.right-nt,j.right);return{x:it,width:dt-it}},E4=(h,j,nt,it,dt,yt)=>{const vt=io.fromDom(h.getContainer()),St=ap(vt,".tox-editor-header").getOr(vt),Dt=tp(St),Bt=Dt.y>=j.bottom,jt=it&&!Bt;if(h.inline&&jt)return{y:Math.max(Dt.bottom+yt,nt.y),bottom:nt.bottom};if(h.inline&&!jt)return{y:nt.y,bottom:Math.min(Dt.y-yt,nt.bottom)};const Zt=dt==="line"?tp(vt):j;return jt?{y:Math.max(Dt.bottom+yt,nt.y),bottom:Math.min(Zt.bottom-yt,nt.bottom)}:{y:Math.max(Zt.y+yt,nt.y),bottom:Math.min(Dt.y-yt,nt.bottom)}},lz=(h,j,nt,it=0)=>{const dt=b_(window),yt=tp(io.fromDom(h.getContentAreaContainer())),vt=gO(h)||yO(h)||f5(h),{x:St,width:Dt}=Woe(yt,dt,it);if(h.inline&&!vt)return ep(St,dt.y,Dt,dt.height);{const Bt=j.header.isPositionedAtTop(),{y:jt,bottom:Zt}=E4(h,yt,dt,Bt,nt,it);return ep(St,jt,Dt,Zt-jt)}},vN=12,Oq={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},cz={maxHeightFunction:yw(),maxWidthFunction:Mv()},uz=(h,j)=>{const nt=h.selection.getRng(),it=zy(io.fromDom(nt.startContainer),nt.startOffset);return nt.startContainer===nt.endContainer&&nt.startOffset===nt.endOffset-1&&Yl(it.element,j)},Dq=(h,j,nt)=>{const it=gu(h,"position");Jo(h,"position",j);const dt=nt(h);return it.each(yt=>Jo(h,"position",yt)),dt},dz=h=>h==="node",qoe=(h,j,nt,it,dt)=>{const yt=az(h),vt=it.lastElement().exists(St=>Yl(nt,St));if(uz(h,nt))return vt?a9:r_;if(vt)return Dq(j,it.getMode(),()=>Pq(yt,tp(j),-20)&&!it.isReposition()?tte:a9);{const St=it.getMode()==="fixed"?dt.y+e0().top:dt.y,Dt=mu(j)+vN;return St+Dt<=yt.y?r_:LS}},r3=(h,j,nt,it)=>{const dt=Dt=>(Bt,jt,Zt,an,un)=>{const wn=qoe(h,an,Dt,nt,un),On={...Bt,y:un.y,height:un.height};return{...wn(On,jt,Zt,an,un),alwaysFit:!0}},yt=Dt=>dz(it)?[dt(Dt)]:[];return j?{onLtr:Dt=>[im,vm,_m,i0,xm,yu].concat(yt(Dt)),onRtl:Dt=>[im,_m,vm,xm,i0,yu].concat(yt(Dt))}:{onLtr:Dt=>[yu,im,i0,vm,xm,_m].concat(yt(Dt)),onRtl:Dt=>[yu,im,xm,_m,i0,vm].concat(yt(Dt))}},_N=(h,j,nt,it)=>j==="line"?{bubble:n1(vN,0,Oq),layouts:{onLtr:()=>[ST],onRtl:()=>[aR]},overrides:cz}:{bubble:n1(0,vN,Oq,1/vN),layouts:r3(h,nt,it,j),overrides:cz},s3=(h,j)=>{const nt=co(j,yt=>yt.predicate(h.dom)),{pass:it,fail:dt}=Ur(nt,yt=>yt.type==="contexttoolbar");return{contextToolbars:it,contextForms:dt}},fz=h=>{if(h.length<=1)return h;{const j=yt=>nr(h,vt=>vt.position===yt),nt=yt=>co(h,vt=>vt.position===yt),it=j("selection"),dt=j("node");if(it||dt)if(dt&&it){const yt=nt("node"),vt=Dn(nt("selection"),St=>({...St,position:"node"}));return yt.concat(vt)}else return nt(it?"selection":"node");else return nt("line")}},hz=h=>{if(h.length<=1)return h;{const j=it=>yn(h,dt=>dt.position===it);return j("selection").orThunk(()=>j("node")).orThunk(()=>j("line")).map(it=>it.position).fold(()=>[],it=>co(h,dt=>dt.position===it))}},Nq=(h,j,nt)=>{const it=s3(h,j);if(it.contextForms.length>0)return Mt.some({elem:h,toolbars:[it.contextForms[0]]});{const dt=s3(h,nt);if(dt.contextForms.length>0)return Mt.some({elem:h,toolbars:[dt.contextForms[0]]});if(it.contextToolbars.length>0||dt.contextToolbars.length>0){const yt=fz(it.contextToolbars.concat(dt.contextToolbars));return Mt.some({elem:h,toolbars:yt})}else return Mt.none()}},xN=(h,j,nt)=>h(j)?Mt.none():Sy(j,it=>{if(Cs(it)){const{contextToolbars:dt,contextForms:yt}=s3(it,nt.inNodeScope),vt=yt.length>0?yt:hz(dt);return vt.length>0?Mt.some({elem:it,toolbars:vt}):Mt.none()}else return Mt.none()},h),Lq=(h,j)=>{const nt=io.fromDom(j.getBody()),it=vt=>Yl(vt,nt),dt=vt=>!it(vt)&&!zp(nt,vt),yt=io.fromDom(j.selection.getNode());return dt(yt)?Mt.none():Nq(yt,h.inNodeScope,h.inEditorScope).orThunk(()=>xN(it,yt,h))},Fq=(h,j)=>{const nt={},it=[],dt=[],yt={},vt={},St=(jt,Zt)=>{const an=pr(O5(Zt));nt[jt]=an,an.launch.map(un=>{yt["form:"+jt]={...Zt.launch,type:un.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{j(an)}}}),an.scope==="editor"?dt.push(an):it.push(an),vt[jt]=an},Dt=(jt,Zt)=>{qY(Zt).each(an=>{Zt.scope==="editor"?dt.push(an):it.push(an),vt[jt]=an})},Bt=Do(h);return xo(Bt,jt=>{const Zt=h[jt];Zt.type==="contextform"?St(jt,Zt):Zt.type==="contexttoolbar"&&Dt(jt,Zt)}),{forms:nt,inNodeScope:it,inEditorScope:dt,lookupTable:vt,formNavigators:yt}},wN=Zr("forward-slide"),zq=Zr("backward-slide"),CN=Zr("change-slide-event"),pz="tox-pop--resizing",Zoe=h=>{const j=ds([]);return Cp.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:nt=>{j.set([]),Cp.getContent(nt).each(it=>{js(it.element,"visibility")}),wu(nt.element,pz),js(nt.element,"width")},inlineBehaviours:yr([Ks("context-toolbar-events",[rw(oE(),(nt,it)=>{it.event.raw.propertyName==="width"&&(wu(nt.element,pz),js(nt.element,"width"))}),er(CN,(nt,it)=>{const dt=nt.element;js(dt,"width");const yt=vn(dt);Cp.setContent(nt,it.event.contents),Kp(dt,pz);const vt=vn(dt);Jo(dt,"width",yt+"px"),Cp.getContent(nt).each(St=>{it.event.focus.bind(Dt=>(_v(Dt),B0(dt))).orThunk(()=>(_s.focusIn(St),L_(yp(dt))))}),setTimeout(()=>{Jo(nt.element,"width",vt+"px")},0)}),er(wN,(nt,it)=>{Cp.getContent(nt).each(dt=>{j.set(j.get().concat([{bar:dt,focus:L_(yp(nt.element))}]))}),ls(nt,CN,{contents:it.event.forwardContents,focus:Mt.none()})}),er(zq,(nt,it)=>{Gn(j.get()).each(dt=>{j.set(j.get().slice(0,j.get().length-1)),ls(nt,CN,{contents:qy(dt.bar),focus:dt.focus})})})]),_s.config({mode:"special",onEscape:nt=>Gn(j.get()).fold(()=>h.onEscape(),it=>(El(nt,zq),Mt.some(!0)))})]),lazySink:()=>Js.value(h.sink)})},i3="tox-pop--transition",Bq=(h,j,nt,it)=>{const dt=it.backstage,yt=dt.shared,vt=ba().deviceType.isTouch,St=Xl(),Dt=Xl(),Bt=Xl(),jt=Tm(Zoe({sink:nt,onEscape:()=>(h.focus(),Mt.some(!0))})),Zt=()=>{const Lr=Bt.get().getOr("node"),Qr=dz(Lr)?1:0;return lz(h,yt,Lr,Qr)},an=()=>!h.removed&&!(vt()&&dt.isContextMenuOpen()),un=Lr=>au(Eu(Lr,St.get(),Yl),!0),wn=()=>{if(an()){const Lr=Zt(),Qr=au(Bt.get(),"node")?Voe(h,St.get()):az(h);return Lr.height<=0||!Pq(Qr,Lr,.01)}else return!0},On=()=>{St.clear(),Dt.clear(),Bt.clear(),Cp.hide(jt)},_o=()=>{if(Cp.isOpen(jt)){const Lr=jt.element;js(Lr,"display"),wn()?Jo(Lr,"display","none"):(Dt.set(0),Cp.reposition(jt))}},Un=Lr=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Lr],behaviours:yr([_s.config({mode:"acyclic"}),Ks("pop-dialog-wrap-events",[rp(Qr=>{h.shortcuts.add("ctrl+F9","focus statusbar",()=>_s.focusIn(Qr))}),I_(Qr=>{h.shortcuts.remove("ctrl+F9")})])])}),go=Zo(()=>Fq(j,Lr=>{const Qr=Go([Lr]);ls(jt,wN,{forwardContents:Un(Qr)})})),bo=(Lr,Qr)=>mN(h,{buttons:Lr,toolbar:Qr.items,allowToolbarGroups:!1},it.backstage,Mt.some(["form:"])),Bo=(Lr,Qr)=>Mq.buildInitGroups(Lr,Qr),Go=Lr=>{const{buttons:Qr}=h.ui.registry.getAll(),Pl=go(),_h={...Qr,...Pl.formNavigators},su=vS(h)===r1.scrolling?r1.scrolling:r1.default,as=Nn(Dn(Lr,hr=>hr.type==="contexttoolbar"?bo(_h,hr):Bo(hr,yt.providers)));return lN({type:su,uid:Zr("context-toolbar"),initGroups:as,onEscape:Mt.none,cyclicKeying:!0,providers:yt.providers})},Sr=(Lr,Qr)=>{const Pl=Lr==="node"?yt.anchors.node(Qr):yt.anchors.cursor(),_h=_N(h,Lr,vt(),{lastElement:St.get,isReposition:()=>au(Dt.get(),0),getMode:()=>c0.getMode(nt)});return Fu(Pl,_h)},Vr=(Lr,Qr)=>{if(qr.cancel(),!an())return;const Pl=Go(Lr),_h=Lr[0].position,su=Sr(_h,Qr);Bt.set(_h),Dt.set(1);const as=jt.element;js(as,"display"),un(Qr)||(wu(as,i3),c0.reset(nt,jt)),Cp.showWithinBounds(jt,Un(Pl),{anchor:su,transition:{classes:[i3],mode:"placement"}},()=>Mt.some(Zt())),Qr.fold(St.clear,St.set),wn()&&Jo(as,"display","none")};let Yo=!1;const qr=SD(()=>{if(!(!h.hasFocus()||h.removed||Yo))if(ty(jt.element,i3))qr.throttle();else{const Lr=go();Lq(Lr,h).fold(On,Qr=>{Vr(Qr.toolbars,Mt.some(Qr.elem))})}},17);h.on("init",()=>{h.on("remove",On),h.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",_o),h.on("click keyup focus SetContent",qr.throttle),h.on(Iq,On),h.on(zoe,Lr=>{const Qr=go();or(Qr.lookupTable,Lr.toolbarKey).each(Pl=>{Vr([Pl],es(Lr.target!==h,Lr.target)),Cp.getContent(jt).each(_s.focusIn)})}),h.on("focusout",Lr=>{nA.setEditorTimeout(h,()=>{B0(nt.element).isNone()&&B0(jt.element).isNone()&&On()},0)}),h.on("SwitchMode",()=>{h.mode.isReadOnly()&&On()}),h.on("ExecCommand",({command:Lr})=>{Lr.toLowerCase()==="toggleview"&&On()}),h.on("AfterProgressState",Lr=>{Lr.state?On():h.hasFocus()&&qr.throttle()}),h.on("dragstart",()=>{Yo=!0}),h.on("dragend drop",()=>{Yo=!1}),h.on("NodeChange",Lr=>{B0(jt.element).fold(qr.throttle,Tt)})})},Koe=h=>{xo([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],nt=>{h.ui.registry.addToggleButton(nt.name,{tooltip:nt.text,icon:nt.icon,onAction:Rv(h,nt.cmd),onSetup:eD(h,nt.name)})}),h.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:sy(h),onAction:Rv(h,"JustifyNone")})},$q=(h,j)=>{const nt=()=>{const it=j.getOptions(h),dt=j.getCurrent(h).map(j.hash),yt=Xl();return Dn(it,vt=>({type:"togglemenuitem",text:j.display(vt),onSetup:St=>{const Dt=jt=>{jt&&(yt.on(Zt=>Zt.setActive(!1)),yt.set(St)),St.setActive(jt)};Dt(au(dt,j.hash(vt)));const Bt=j.watcher(h,vt,Dt);return()=>{yt.clear(),Bt()}},onAction:()=>j.setCurrent(h,vt)}))};h.ui.registry.addMenuButton(j.name,{tooltip:j.text,icon:j.icon,fetch:it=>it(nt()),onSetup:j.onToolbarSetup}),h.ui.registry.addNestedMenuItem(j.name,{type:"nestedmenuitem",text:j.text,getSubmenuItems:nt,onSetup:j.onMenuSetup})},Yoe=h=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:j$,hash:j=>nq(j,["fixed","relative","empty"]).getOr(j),display:Qt,watcher:(j,nt,it)=>j.formatter.formatChanged("lineheight",it,!1,{value:nt}).unbind,getCurrent:j=>Mt.from(j.queryCommandValue("LineHeight")),setCurrent:(j,nt)=>j.execCommand("LineHeight",!1,nt),onToolbarSetup:sy(h),onMenuSetup:sy(h)}),Xoe=h=>Mt.from(R$(h)).map(nt=>({name:"language",text:"Language",icon:"language",getOptions:Nt(nt),hash:it=>bt(it.customCode)?it.code:`${it.code}/${it.customCode}`,display:it=>it.title,watcher:(it,dt,yt)=>{var vt;return it.formatter.formatChanged("lang",yt,!1,{value:dt.code,customValue:(vt=dt.customCode)!==null&&vt!==void 0?vt:null}).unbind},getCurrent:it=>{const dt=io.fromDom(it.selection.getNode());return Bm(dt,yt=>Mt.some(yt).filter(Cs).bind(vt=>Ls(vt,"lang").map(Dt=>{const Bt=Ls(vt,"data-mce-lang").getOrUndefined();return{code:Dt,customCode:Bt,title:""}})))},setCurrent:(it,dt)=>it.execCommand("Lang",!1,dt),onToolbarSetup:it=>{const dt=Y0();return it.setActive(h.formatter.match("lang",{},void 0,!0)),dt.set(h.formatter.formatChanged("lang",it.setActive,!0)),QO(dt.clear,sy(h)(it))},onMenuSetup:sy(h)})),Joe=h=>{$q(h,Yoe(h)),Xoe(h).each(j=>$q(h,j))},Gq=(h,j)=>{q9(h,j),eoe(h,j),moe(h,j),Xne(h,j),hoe(h,j)},jq=h=>{h.ui.registry.addContext("editable",()=>h.selection.isEditable()),h.ui.registry.addContext("mode",j=>h.mode.get()===j),h.ui.registry.addContext("any",hn),h.ui.registry.addContext("formatting",j=>h.formatter.canApply(j)),h.ui.registry.addContext("insert",j=>h.schema.isValidChild(h.selection.getNode().tagName,j))},Hq=h=>yA(h,"NodeChange",j=>{j.setEnabled(h.queryCommandState("outdent")&&h.selection.isEditable())}),Uq=h=>{h.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Hq(h),onAction:Rv(h,"outdent")}),h.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:sy(h),onAction:Rv(h,"indent")})},Qoe=h=>{Uq(h)},gz=(h,j)=>nt=>{nt.setActive(j.get());const it=dt=>{j.set(dt.state),nt.setActive(dt.state)};return h.on("PastePlainTextToggle",it),QO(()=>h.off("PastePlainTextToggle",it),sy(h)(nt))},Vq=h=>{const j=ds($$(h)),nt=()=>h.execCommand("mceTogglePlainTextPaste");h.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:nt,onSetup:gz(h,j)}),h.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:nt,onSetup:gz(h,j)})},mz=(h,j)=>()=>{h.execCommand("mceToggleFormat",!1,j)},dae=h=>{sC.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(j,nt)=>{h.ui.registry.addToggleButton(j.name,{tooltip:j.text,icon:j.icon,onSetup:eD(h,j.name),onAction:mz(h,j.name),shortcut:j.shortcut})});for(let j=1;j<=6;j++){const nt="h"+j,it=`Access+${j}`;h.ui.registry.addToggleButton(nt,{text:nt.toUpperCase(),tooltip:"Heading "+j,onSetup:eD(h,nt),onAction:mz(h,nt),shortcut:it})}},ere=h=>{sC.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],j=>{h.ui.registry.addButton(j.name,{tooltip:j.text,icon:j.icon,onAction:Rv(h,j.action),shortcut:j.shortcut,context:j.context})}),sC.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],j=>{h.ui.registry.addButton(j.name,{tooltip:j.text,icon:j.icon,onSetup:sy(h),onAction:Rv(h,j.action)})})},tre=h=>{sC.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],j=>{h.ui.registry.addToggleButton(j.name,{tooltip:j.text,icon:j.icon,onAction:Rv(h,j.action),onSetup:eD(h,j.name)})})},nre=h=>{dae(h),ere(h),tre(h)},ore=h=>{sC.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],j=>{h.ui.registry.addMenuItem(j.name,{text:j.text,icon:j.icon,shortcut:j.shortcut,onAction:Rv(h,j.action),context:j.context})}),sC.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],j=>{h.ui.registry.addMenuItem(j.name,{text:j.text,icon:j.icon,shortcut:j.shortcut,onSetup:sy(h),onAction:Rv(h,j.action)})}),h.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:sy(h),onAction:mz(h,"code")})},rre=h=>{nre(h),ore(h)},kN=(h,j)=>yA(h,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",nt=>{nt.setEnabled(!h.mode.isReadOnly()&&h.undoManager[j]())}),sre=h=>{h.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:kN(h,"hasUndo"),onAction:Rv(h,"undo")}),h.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:kN(h,"hasRedo"),onAction:Rv(h,"redo")})},ire=h=>{h.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:kN(h,"hasUndo"),onAction:Rv(h,"undo"),shortcut:"Meta+Z"}),h.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:kN(h,"hasRedo"),onAction:Rv(h,"redo"),shortcut:"Meta+Y"})},are=h=>{sre(h),ire(h)},lre=h=>yA(h,"VisualAid",j=>{j.setActive(h.hasVisual)}),cre=h=>{h.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:lre(h),onAction:Rv(h,"mceToggleVisualAid"),context:"any"})},ure=h=>{h.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Rv(h,"mceToggleVisualAid"),context:"any"})},dre=h=>{ure(h),cre(h)},Wq=(h,j)=>{Koe(h),rre(h),Gq(h,j),are(h),FX(h),dre(h),Qoe(h),Joe(h),Vq(h),jq(h)},fre=h=>_e(h)?h.split(/[ ,]/):h,qq=h=>j=>j.options.get(h),hre=h=>{const j=h.options.register;j("contextmenu_avoid_overlap",{processor:"string",default:""}),j("contextmenu_never_use_native",{processor:"boolean",default:!1}),j("contextmenu",{processor:nt=>nt===!1?{value:[],valid:!0}:_e(nt)||Pt(nt,_e)?{value:fre(nt),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},Zq=qq("contextmenu_never_use_native"),pre=qq("contextmenu_avoid_overlap"),gre=h=>Kq(h).length===0,Kq=h=>{const j=h.ui.registry.getAll().contextMenus,nt=h.options.get("contextmenu");return h.options.isSet("contextmenu")?nt:co(nt,it=>Ds(j,it))},T4=(h,j)=>({type:"makeshift",x:h,y:j}),mre=(h,j,nt)=>T4(h.x+j,h.y+nt),SN=h=>h.type==="longpress"||h.type.indexOf("touch")===0,yre=h=>{if(SN(h)){const j=h.touches[0];return T4(j.pageX,j.pageY)}else return T4(h.pageX,h.pageY)},bre=h=>{if(SN(h)){const j=h.touches[0];return T4(j.clientX,j.clientY)}else return T4(h.clientX,h.clientY)},yz=(h,j)=>{const nt=bS.DOM.getPos(h);return mre(j,nt.x,nt.y)},Yq=(h,j)=>j.type==="contextmenu"||j.type==="longpress"?h.inline?yre(j):yz(h.getContentAreaContainer(),bre(j)):bz(h),bz=h=>({type:"selection",root:io.fromDom(h.selection.getNode())}),vre=h=>({type:"node",node:Mt.some(io.fromDom(h.selection.getNode())),root:io.fromDom(h.getBody())}),Xq=(h,j,nt)=>{switch(nt){case"node":return vre(h);case"point":return Yq(h,j);case"selection":return bz(h)}},_re=(h,j,nt,it,dt,yt)=>{const vt=nt(),St=Xq(h,j,yt);UI(vt,j_.CLOSE_ON_EXECUTE,it,{isHorizontalMenu:!1,search:Mt.none()}).map(Dt=>{j.preventDefault(),Cp.showMenuAt(dt,{anchor:St},{menu:{markers:kS("normal")},data:Dt})})},xre={onLtr:()=>[im,vm,_m,i0,xm,yu,r_,LS,f4,HD,d4,jD],onRtl:()=>[im,_m,vm,xm,i0,yu,r_,LS,d4,jD,f4,HD]},wre=12,vz={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},Cre=(h,j)=>{const nt=h.selection;if(nt.isCollapsed()||j.touches.length<1)return!1;{const it=j.touches[0],dt=nt.getRng();return LE(h.getWin(),eS.domRange(dt)).exists(vt=>vt.left<=it.clientX&&vt.right>=it.clientX&&vt.top<=it.clientY&&vt.bottom>=it.clientY)}},Jq=h=>{const j=h.selection.getRng(),nt=()=>{nA.setEditorTimeout(h,()=>{h.selection.setRng(j)},10),yt()};h.once("touchend",nt);const it=vt=>{vt.preventDefault(),vt.stopImmediatePropagation()};h.on("mousedown",it,!0);const dt=()=>yt();h.once("longpresscancel",dt);const yt=()=>{h.off("touchend",nt),h.off("longpresscancel",dt),h.off("mousedown",it)}},kre=(h,j,nt)=>{const it=Xq(h,j,nt);return{bubble:n1(0,nt==="point"?wre:0,vz),layouts:xre,overrides:{maxWidthFunction:Mv(),maxHeightFunction:yw()},...it}},Sre=(h,j,nt,it,dt,yt,vt)=>{const St=kre(h,j,yt);UI(nt,j_.CLOSE_ON_EXECUTE,it,{isHorizontalMenu:!0,search:Mt.none()}).map(Dt=>{j.preventDefault();const Bt=vt?Dy.HighlightMenuAndItem:Dy.HighlightNone;Cp.showMenuWithinBounds(dt,{anchor:St},{menu:{markers:kS("normal"),highlightOnOpen:Bt},data:Dt,type:"horizontal"},()=>Mt.some(lz(h,it.shared,yt==="node"?"node":"selection"))),h.dispatch(Iq)})},_z=(h,j,nt,it,dt,yt)=>{const vt=ba(),St=vt.os.isiOS(),Dt=vt.os.isMacOS(),Bt=vt.os.isAndroid(),jt=vt.deviceType.isTouch(),Zt=()=>!(Bt||St||Dt&&jt),an=()=>{const un=nt();Sre(h,j,un,it,dt,yt,Zt())};if((Dt||St)&&yt!=="node"){const un=()=>{Jq(h),an()};Cre(h,j)?un():(h.once("selectionchange",un),h.once("touchend",()=>h.off("selectionchange",un)))}else an()},Qq=h=>_e(h)?h==="|":h.type==="separator",EN={type:"separator"},eZ=h=>{const j=nt=>({text:nt.text,icon:nt.icon,enabled:nt.enabled,shortcut:nt.shortcut});if(_e(h))return h;switch(h.type){case"separator":return EN;case"submenu":return{type:"nestedmenuitem",...j(h),getSubmenuItems:()=>{const it=h.getSubmenuItems();return _e(it)?it:Dn(it,eZ)}};default:const nt=h;return{type:"menuitem",...j(nt),onAction:Gt(nt.onAction)}}},tZ=(h,j)=>{if(j.length===0)return h;const it=Gn(h).filter(dt=>!Qq(dt)).fold(()=>[],dt=>[EN]);return h.concat(it).concat(j).concat([EN])},xz=(h,j,nt)=>{const it=yo(j,(dt,yt)=>or(h,yt.toLowerCase()).map(vt=>{const St=vt.update(nt);if(_e(St)&&Vn(Mu(St)))return tZ(dt,St.split(" "));if(ct(St)&&St.length>0){const Dt=Dn(St,eZ);return tZ(dt,Dt)}else return dt}).getOrThunk(()=>dt.concat([yt])),[]);return it.length>0&&Qq(it[it.length-1])&&it.pop(),it},Ere=(h,j)=>j.ctrlKey&&!Zq(h),Are=h=>h.type==="longpress"||Ds(h,"touches"),nZ=(h,j)=>!Are(j)&&(j.button!==2||j.target===h.getBody()&&j.pointerType===""),oZ=(h,j)=>nZ(h,j)?h.selection.getStart(!0):j.target,Tre=(h,j)=>{const nt=pre(h),it=nZ(h,j)?"selection":"point";if(Vn(nt)){const dt=oZ(h,j);return V5(io.fromDom(dt),nt)?"node":it}else return it},rZ=(h,j,nt)=>{const dt=ba().deviceType.isTouch,yt=Tm(Cp.sketch({dom:{tag:"div"},lazySink:j,onEscape:()=>h.focus(),onShow:()=>nt.setContextMenuState(!0),onHide:()=>nt.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:yr([Ks("dismissContextMenu",[er(Wy(),(Dt,Bt)=>{Zl.close(Dt),h.focus()})])])})),vt=()=>Cp.hide(yt),St=Dt=>{if(Zq(h)&&Dt.preventDefault(),Ere(h,Dt)||gre(h))return;const Bt=Tre(h,Dt),jt=()=>{const an=oZ(h,Dt),un=h.ui.registry.getAll(),wn=Kq(h);return xz(un.contextMenus,wn,an)};(dt()?_z:_re)(h,Dt,jt,nt,yt,Bt)};h.on("init",()=>{const Dt="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(dt()?"":" ResizeWindow");h.on(Dt,vt),h.on("longpress contextmenu",St)})},wz=nn.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),AN=h=>j=>j.translate(-h.left,-h.top),TN=h=>j=>j.translate(h.left,h.top),lC=h=>(j,nt)=>yo(h,(it,dt)=>dt(it),Zu(j,nt)),IN=(h,j,nt)=>h.fold(lC([TN(nt),AN(j)]),lC([AN(j)]),lC([])),a3=(h,j,nt)=>h.fold(lC([TN(nt)]),lC([]),lC([TN(j)])),sZ=(h,j,nt)=>h.fold(lC([]),lC([AN(nt)]),lC([TN(j),AN(nt)])),Ire=(h,j,nt,it,dt,yt)=>{const vt=a3(h,dt,yt),St=a3(j,dt,yt);return Math.abs(vt.left-St.left)<=nt&&Math.abs(vt.top-St.top)<=it},iZ=(h,j,nt,it,dt,yt)=>{const vt=a3(h,dt,yt),St=a3(j,dt,yt),Dt=Math.abs(vt.left-St.left),Bt=Math.abs(vt.top-St.top);return Zu(Dt,Bt)},aZ=(h,j,nt)=>{const it=h.fold((dt,yt)=>({position:Mt.some("absolute"),left:Mt.some(dt+"px"),top:Mt.some(yt+"px")}),(dt,yt)=>({position:Mt.some("absolute"),left:Mt.some(dt-nt.left+"px"),top:Mt.some(yt-nt.top+"px")}),(dt,yt)=>({position:Mt.some("fixed"),left:Mt.some(dt+"px"),top:Mt.some(yt+"px")}));return{right:Mt.none(),bottom:Mt.none(),...it}},lZ=(h,j,nt)=>h.fold((it,dt)=>RN(it+j,dt+nt),(it,dt)=>$S(it+j,dt+nt),(it,dt)=>i_(it+j,dt+nt)),Cz=(h,j,nt,it)=>{const dt=(yt,vt)=>(St,Dt)=>{const Bt=yt(j,nt,it);return vt(St.getOr(Bt.left),Dt.getOr(Bt.top))};return h.fold(dt(sZ,RN),dt(a3,$S),dt(IN,i_))},RN=wz.offset,$S=wz.absolute,i_=wz.fixed,kz=(h,j)=>{const nt=Xr(h,j);return bt(nt)?NaN:parseInt(nt,10)},Rre=(h,j)=>{const nt=h.element,it=kz(nt,j.leftAttr),dt=kz(nt,j.topAttr);return isNaN(it)||isNaN(dt)?Mt.none():Mt.some(Zu(it,dt))},Mre=(h,j,nt)=>{const it=h.element;Wo(it,j.leftAttr,nt.left+"px"),Wo(it,j.topAttr,nt.top+"px")},Pre=(h,j)=>{const nt=h.element;Yt(nt,j.leftAttr),Yt(nt,j.topAttr)},Ore=(h,j,nt,it)=>Rre(h,j).fold(()=>nt,dt=>i_(dt.left+it.left,dt.top+it.top)),cZ=(h,j,nt,it,dt,yt)=>{const vt=Ore(h,j,nt,it),St=j.mustSnap?Nre(h,j,vt,dt,yt):Lre(h,j,vt,dt,yt),Dt=IN(vt,dt,yt);return Mre(h,j,Dt),St.fold(()=>({coord:i_(Dt.left,Dt.top),extra:Mt.none()}),Bt=>({coord:Bt.output,extra:Bt.extra}))},Dre=(h,j)=>{Pre(h,j)},uZ=(h,j,nt,it)=>Co(h,dt=>{const yt=dt.sensor;return Ire(j,yt,dt.range.left,dt.range.top,nt,it)?Mt.some({output:Cz(dt.output,j,nt,it),extra:dt.extra}):Mt.none()}),Nre=(h,j,nt,it,dt)=>{const yt=j.getSnapPoints(h);return uZ(yt,nt,it,dt).orThunk(()=>yo(yt,(Dt,Bt)=>{const jt=Bt.sensor,Zt=iZ(nt,jt,Bt.range.left,Bt.range.top,it,dt);return Dt.deltas.fold(()=>({deltas:Mt.some(Zt),snap:Mt.some(Bt)}),an=>{const un=(Zt.left+Zt.top)/2,wn=(an.left+an.top)/2;return un<=wn?{deltas:Mt.some(Zt),snap:Mt.some(Bt)}:Dt})},{deltas:Mt.none(),snap:Mt.none()}).snap.map(Dt=>({output:Cz(Dt.output,nt,it,dt),extra:Dt.extra})))},Lre=(h,j,nt,it,dt)=>{const yt=j.getSnapPoints(h);return uZ(yt,nt,it,dt)},Fre=(h,j,nt)=>({coord:Cz(h.output,h.output,j,nt),extra:h.extra});var zre=Object.freeze({__proto__:null,snapTo:(h,j,nt,it)=>{const dt=j.getTarget(h.element);if(j.repositionTarget){const yt=Bp(h.element),vt=e0(yt),St=aT(dt),Dt=Fre(it,vt,St),Bt=aZ(Dt.coord,vt,St);Jl(dt,Bt)}}});const Sz="data-initial-z-index",Bre=h=>{_g(h.element).filter(Cs).each(j=>{Ls(j,Sz).fold(()=>js(j,"z-index"),nt=>Jo(j,"z-index",nt)),Yt(j,Sz)})},$re=h=>{_g(h.element).filter(Cs).each(j=>{gu(j,"z-index").each(nt=>{Wo(j,Sz,nt)}),Jo(j,"z-index",lu(h.element,"z-index"))})},Ez=(h,j)=>{h.getSystem().addToGui(j),$re(j)},dZ=h=>{Bre(h),h.getSystem().removeFromGui(h)},fZ=(h,j,nt)=>h.getSystem().build(Px.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[j]},events:nt}));var I4=ym("snaps",[Qo("getSnapPoints"),Hl("onSensor"),Qo("leftAttr"),Qo("topAttr"),So("lazyViewport",Hp),So("mustSnap",!1)]);const Az=[So("useFixed",pn),Qo("blockerClass"),So("getTarget",Qt),So("onDrag",Tt),So("repositionTarget",!0),So("onDrop",Tt),Yu("getBounds",Hp),I4],Gre=h=>uu(gu(h,"left"),gu(h,"top"),gu(h,"position"),(j,nt,it)=>(it==="fixed"?i_:RN)(parseInt(j,10),parseInt(nt,10))).getOrThunk(()=>{const j=Gu(h);return $S(j.left,j.top)}),Tz=(h,j,nt,it,dt)=>{const yt=dt.bounds,vt=a3(j,nt,it),St=Jv(vt.left,yt.x,yt.x+yt.width-dt.width),Dt=Jv(vt.top,yt.y,yt.y+yt.height-dt.height),Bt=$S(St,Dt);return j.fold(()=>{const jt=sZ(Bt,nt,it);return RN(jt.left,jt.top)},Nt(Bt),()=>{const jt=IN(Bt,nt,it);return i_(jt.left,jt.top)})},jre=(h,j,nt,it,dt,yt,vt)=>{const St=j.fold(()=>{const Dt=lZ(nt,yt.left,yt.top),Bt=IN(Dt,it,dt);return i_(Bt.left,Bt.top)},Dt=>{const Bt=cZ(h,Dt,nt,yt,it,dt);return Bt.extra.each(jt=>{Dt.onSensor(h,jt)}),Bt.coord});return Tz(h,St,it,dt,vt)},Hre=(h,j,nt,it)=>{const dt=j.getTarget(h.element);if(j.repositionTarget){const yt=Bp(h.element),vt=e0(yt),St=aT(dt),Dt=Gre(dt),Bt=jre(h,j.snaps,Dt,vt,St,it,nt),jt=aZ(Bt,vt,St);Jl(dt,jt)}j.onDrag(h,dt,it)},hZ=(h,j)=>({bounds:h.getBounds(),height:K0(j.element),width:En(j.element)}),Iz=(h,j,nt,it,dt)=>{const yt=nt.update(it,dt),vt=nt.getStartData().getOrThunk(()=>hZ(j,h));yt.each(St=>{Hre(h,j,vt,St)})},pZ=(h,j,nt,it)=>{j.each(dZ),nt.snaps.each(yt=>{Dre(h,yt)});const dt=nt.getTarget(h.element);it.reset(),nt.onDrop(h,dt)},Rz=h=>(j,nt)=>{const it=dt=>{nt.setStartData(hZ(j,dt))};return xu([er(nw(),dt=>{nt.getStartData().each(()=>it(dt))}),...h(j,nt,it)])},Ure=h=>xu([er(vp(),h.forceDrop),er(EC(),h.drop),er(w0(),(j,nt)=>{h.move(nt.event)}),er(SC(),h.delayDrop)]);var Vre=Object.freeze({__proto__:null,getData:h=>Mt.from(Zu(h.x,h.y)),getDelta:(h,j)=>Zu(j.left-h.left,j.top-h.top)});const gZ=(h,j,nt)=>[er(vp(),(it,dt)=>{if(dt.event.raw.button!==0)return;dt.stop();const vt=()=>pZ(it,Mt.some(Bt),h,j),St=FH(vt,200),Dt={drop:vt,delayDrop:St.schedule,forceDrop:vt,move:Zt=>{St.cancel(),Iz(it,h,j,Vre,Zt)}},Bt=fZ(it,h.blockerClass,Ure(Dt));(()=>{nt(it),Ez(it,Bt)})()})],Wre=[...Az,Xu("dragger",{handlers:Rz(gZ)})],qre=h=>xu([er(pv(),h.forceDrop),er(Wl(),h.drop),er(ip(),h.drop),er(A_(),(j,nt)=>{h.move(nt.event)})]),Zre=h=>{const j=h[0];return Mt.some(Zu(j.clientX,j.clientY))};var mZ=Object.freeze({__proto__:null,getData:h=>{const nt=h.raw.touches;return nt.length===1?Zre(nt):Mt.none()},getDelta:(h,j)=>Zu(j.left-h.left,j.top-h.top)});const R4=(h,j,nt)=>{const it=Xl(),dt=yt=>{pZ(yt,it.get(),h,j),it.clear()};return[er(pv(),(yt,vt)=>{vt.stop();const St=()=>dt(yt),Dt={drop:St,delayDrop:Tt,forceDrop:St,move:Zt=>{Iz(yt,h,j,mZ,Zt)}},Bt=fZ(yt,h.blockerClass,qre(Dt));it.set(Bt),(()=>{nt(yt),Ez(yt,Bt)})()}),er(A_(),(yt,vt)=>{vt.stop(),Iz(yt,h,j,mZ,vt.event)}),er(Wl(),(yt,vt)=>{vt.stop(),dt(yt)}),er(ip(),dt)]},Kre=[...Az,Xu("dragger",{handlers:Rz(R4)})],Yre=(h,j,nt)=>[...gZ(h,j,nt),...R4(h,j,nt)],Xre=[...Az,Xu("dragger",{handlers:Rz(Yre)})];var yZ=Object.freeze({__proto__:null,mouse:Wre,touch:Kre,mouseOrTouch:Xre}),Jre=Object.freeze({__proto__:null,init:()=>{let h=Mt.none(),j=Mt.none();const nt=()=>{h=Mt.none(),j=Mt.none()},it=(Dt,Bt)=>{const jt=h.map(Zt=>Dt.getDelta(Zt,Bt));return h=Mt.some(Bt),jt},dt=(Dt,Bt)=>Dt.getData(Bt).bind(jt=>it(Dt,jt)),yt=Dt=>{j=Mt.some(Dt)},vt=()=>j,St=Nt({});return F0({readState:St,reset:nt,update:dt,getStartData:vt,setStartData:yt})}});const LA=P3({branchKey:"mode",branches:yZ,name:"dragging",active:{events:(h,j)=>h.dragger.handlers(h,j)},extra:{snap:h=>({sensor:h.sensor,range:h.range,output:h.output,extra:Mt.from(h.extra)})},state:Jre,apis:zre}),Mz=40,MN=Mz/2,PN=(h,j,nt,it,dt,yt)=>h.fold(()=>LA.snap({sensor:$S(nt-MN,it-MN),range:Zu(dt,yt),output:$S(Mt.some(nt),Mt.some(it)),extra:{td:j}}),vt=>{const St=nt-MN,Dt=it-MN,Bt=Mz,jt=Mz,Zt=vt.element.dom.getBoundingClientRect();return LA.snap({sensor:$S(St,Dt),range:Zu(Bt,jt),output:$S(Mt.some(nt-Zt.width/2),Mt.some(it-Zt.height/2)),extra:{td:j}})}),Pz=(h,j,nt)=>{const it=(dt,yt)=>dt.exists(vt=>Yl(vt,yt));return{getSnapPoints:h,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(dt,yt)=>{const vt=yt.td;it(j.get(),vt)||(j.set(vt),nt(vt))},mustSnap:!0}},bZ=h=>iu(Im.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:yr([LA.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:h}),zI.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),Qre=(h,j)=>{const nt=ds([]),it=ds([]),dt=ds(!1),yt=Xl(),vt=Xl(),St=Vr=>{const Yo=Bv(Vr);return PN(un.getOpt(j),Vr,Yo.x,Yo.y,Yo.width,Yo.height)},Dt=()=>Dn(nt.get(),Vr=>St(Vr)),Bt=Vr=>{const Yo=Bv(Vr);return PN(wn.getOpt(j),Vr,Yo.right,Yo.bottom,Yo.width,Yo.height)},jt=()=>Dn(it.get(),Vr=>Bt(Vr)),Zt=Pz(Dt,yt,Vr=>{vt.get().each(Yo=>{h.dispatch("TableSelectorChange",{start:Vr,finish:Yo})})}),an=Pz(jt,vt,Vr=>{yt.get().each(Yo=>{h.dispatch("TableSelectorChange",{start:Yo,finish:Vr})})}),un=bZ(Zt),wn=bZ(an),On=Tm(un.asSpec()),_o=Tm(wn.asSpec()),Un=(Vr,Yo,qr,Lr)=>{const Qr=Yo.dom.getBoundingClientRect();js(Vr.element,"display");const Pl=um(io.fromDom(h.getBody())).dom.innerHeight,_h=qr(Qr),su=Lr(Qr,Pl);(_h||su)&&Jo(Vr.element,"display","none")},go=(Vr,Yo,qr,Lr)=>{const Qr=qr(Yo);LA.snapTo(Vr,Qr),Un(Vr,Yo,su=>su[Lr]<0,(su,as)=>su[Lr]>as)},bo=Vr=>go(On,Vr,St,"top"),Bo=()=>yt.get().each(bo),Go=Vr=>go(_o,Vr,Bt,"bottom"),Sr=()=>vt.get().each(Go);if(ba().deviceType.isTouch()){const Vr=Yo=>Dn(Yo,io.fromDom);h.on("TableSelectionChange",Yo=>{dt.get()||(xx(j,On),xx(j,_o),dt.set(!0));const qr=io.fromDom(Yo.start),Lr=io.fromDom(Yo.finish);yt.set(qr),vt.set(Lr),Mt.from(Yo.otherCells).each(Qr=>{nt.set(Vr(Qr.upOrLeftCells)),it.set(Vr(Qr.downOrRightCells)),bo(qr),Go(Lr)})}),h.on("ResizeEditor ResizeWindow ScrollContent",()=>{Bo(),Sr()}),h.on("TableSelectionClear",()=>{dt.get()&&(wx(On),wx(_o),dt.set(!1)),yt.clear(),vt.clear()})}};var ese=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const tse=(h,j)=>{const nt=Mt.from(Xr(h,"id")).getOrThunk(()=>{const it=Zr("aria");return Wo(j,"id",it),it});Wo(h,"aria-describedby",nt)},nse=h=>{Yt(h,"aria-describedby")},ose=h=>h.nodeName==="BR"||!!h.getAttribute("data-mce-bogus")||h.getAttribute("data-mce-type")==="bookmark",rse=(h,j,nt)=>{var it;const dt=(it=j.delimiter)!==null&&it!==void 0?it:"",yt=(Bt,jt,Zt)=>Im.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":Zt}},components:[_p(Bt)],action:an=>{h.focus(),h.selection.select(jt),h.nodeChanged()},buttonBehaviours:yr([Np.config({...nt.tooltips.getConfig({tooltipText:nt.translate(["Select the {0} element",jt.nodeName.toLowerCase()]),onShow:(an,un)=>{tse(an.element,un.element)},onHide:an=>{nse(an.element)}})}),a1.button(nt.isDisabled),Yp(()=>nt.checkUiComponentContext("any"))])}),vt=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[_p(` ${dt} `)]}),St=Bt=>yo(Bt,(jt,Zt,an)=>{const un=yt(Zt.name,Zt.element,an);return an===0?jt.concat([un]):jt.concat([vt(),un])},[]),Dt=Bt=>{const jt=[];let Zt=Bt.length;for(;Zt-- >0;){const an=Bt[Zt];if(an.nodeType===1&&!ose(an)){const un=nH(h,an);if(un.isDefaultPrevented()||jt.push({name:un.name,element:an}),un.isPropagationStopped())break}}return jt};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:yr([_s.config({mode:"flow",selector:"div[role=button]"}),Os.config({disabled:nt.isDisabled}),Yp(()=>nt.checkUiComponentContext("any")),lp.config({}),Us.config({}),Ks("elementPathEvents",[rp((Bt,jt)=>{h.shortcuts.add("alt+F11","focus statusbar elementpath",()=>_s.focusIn(Bt)),h.on("NodeChange",Zt=>{const an=Dt(Zt.parents),un=an.length>0?St(an):[];Us.set(Bt,un)})})])]),components:[]}};var GS;(function(h){h[h.None=0]="None",h[h.Both=1]="Both",h[h.Vertical=2]="Vertical"})(GS||(GS={}));const sse=(h,j,nt,it,dt)=>{const yt={height:NA(it+j.top,rA(h),cO(h))};return nt===GS.Both&&(yt.width=NA(dt+j.left,h6(h),sA(h))),yt},vZ=(h,j,nt)=>{const it=io.fromDom(h.getContainer()),dt=sse(h,j,nt,mu(it),vn(it));ar(dt,(yt,vt)=>{It(yt)&&Jo(it,vt,o3(yt))}),bX(h)},ise=h=>{const j=B$(h);return j===!1?GS.None:j==="both"?GS.Both:GS.Vertical},ON=(h,j,nt,it)=>{const yt=Zu(nt*20,it*20);return vZ(h,yt,j),Mt.some(!0)},ase=(h,j)=>{const nt=ise(h);if(nt===GS.None)return Mt.none();const it=nt===GS.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return Mt.some(s1("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":j.translate(it),"data-mce-name":"resize-handle"},behaviours:[LA.config({mode:"mouse",repositionTarget:!1,onDrag:(dt,yt,vt)=>vZ(h,vt,nt),blockerClass:"tox-blocker"}),_s.config({mode:"special",onLeft:()=>ON(h,nt,-1,0),onRight:()=>ON(h,nt,1,0),onUp:()=>ON(h,nt,0,-1),onDown:()=>ON(h,nt,0,1)}),lp.config({}),Fs.config({}),Np.config(j.tooltips.getConfig({tooltipText:j.translate("Resize")}))]},j.icons))},lse=(h,j)=>{const nt=(it,dt,yt)=>Us.set(it,[_p(j.translate(["{0} "+yt,dt[yt]]))]);return Im.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:yr([a1.button(j.isDisabled),Yp(()=>j.checkUiComponentContext("any")),lp.config({}),Us.config({}),$r.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Ks("wordcount-events",[fx(it=>{const dt=$r.getValue(it),yt=dt.mode==="words"?"characters":"words";$r.setValue(it,{mode:yt,count:dt.count}),nt(it,dt.count,yt)}),rp(it=>{h.on("wordCountUpdate",dt=>{const{mode:yt}=$r.getValue(it);$r.setValue(it,{mode:yt,count:dt.wordCount}),nt(it,dt.wordCount,yt)})})])]),eventOrder:{[s0()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},_Z=(h,j)=>{const nt=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":h.translate(["Build with {0}","TinyMCE"])},innerHtml:h.translate(["Build with {0}",ese.trim()])},behaviours:yr([Fs.config({})])}]}),it=()=>{const St=hF("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[_p(Y1.translate(["Press {0} for help",St]))]}},dt=()=>{const St=[];return h.hasPlugin("wordcount")&&St.push(lse(h,j)),x6(h)&&St.push(nt()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:St}},yt=()=>{const St=[],Dt=G$(h),Bt=z$(h),jt=x6(h)||h.hasPlugin("wordcount"),Zt=()=>{const an="tox-statusbar__text-container--flex-start",un="tox-statusbar__text-container--flex-end",wn="tox-statusbar__text-container--space-around";if(Dt){const On="tox-statusbar__text-container-3-cols";return!jt&&!Bt?[On,wn]:jt&&!Bt?[On,un]:[On,an]}return[jt&&!Bt?un:an]};return Bt&&St.push(rse(h,{},j)),Dt&&St.push(it()),jt&&St.push(dt()),St.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...Zt()]},components:St}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const St=yt(),Dt=ase(h,j);return St.concat(Dt.toArray())})()}},xZ=(h,j)=>j.get().getOrDie(`UI for ${h} has not been rendered`),cse=(h,j)=>{const nt=h.inline,it=nt?Foe:yN,dt=_S(h)?Ute:MA,yt=Tq(),vt=Xl(),St=Xl(),Dt=Xl(),an=ba().deviceType.isTouch()?["tox-platform-touch"]:[],un=S6(h),wn=vS(h),On=iu({dom:{tag:"div",classes:["tox-anchorbar"]}}),_o=iu({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Un=()=>yt.mainUi.get().map(vs=>vs.outerContainer).bind(Vu.getHeader),go=()=>Js.fromOption(yt.dialogUi.get().map(vs=>vs.sink),"UI has not been rendered"),bo=()=>Js.fromOption(yt.popupUi.get().map(vs=>vs.sink),"(popup) UI has not been rendered"),Bo=yt.lazyGetInOuterOrDie("anchor bar",On.getOpt),Go=yt.lazyGetInOuterOrDie("bottom anchor bar",_o.getOpt),Sr=yt.lazyGetInOuterOrDie("toolbar",Vu.getToolbar),Vr=yt.lazyGetInOuterOrDie("throbber",Vu.getThrobber),Yo=Pte({popup:bo,dialog:go},h,Bo,Go),qr=()=>{const vs={attributes:{[nP]:un?am.BottomToTop:am.TopToBottom}},qs=Vu.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Yo.popup,onEscape:()=>{h.focus()}}),Du=Vu.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Yo.popup.shared.getSink,providers:Yo.popup.shared.providers,onEscape:()=>{h.focus()},onToolbarToggled:$w=>{_X(h,$w)},type:wn,lazyToolbar:Sr,lazyHeader:()=>Un().getOrDie("Could not find header element"),...vs}),ku=Vu.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Yo.popup.shared.providers,onEscape:()=>{h.focus()},type:wn}),rv=f5(h),Sp=yO(h),h1=gO(h),V0=pO(h),g1=Lr(),m1=rv||Sp||h1,Y_=()=>rv?[ku]:Sp?[Du]:[],N4=V0?[g1,qs]:[qs];return Vu.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(m1?[]:["tox-editor-header--empty"]),...vs},components:Nn([h1?N4:[],Y_(),$_(h)?[]:[On.asSpec()]]),sticky:_S(h),editor:h,sharedBackstage:Yo.popup.shared})},Lr=()=>Vu.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Qr=()=>{const vs=Vu.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),qs=Vu.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[vs,qs]}},Pl=()=>{const vs=E6(h),qs=Yl(ho(),vs)&&lu(vs,"display")==="grid",Du={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(an),attributes:{...Y1.isRtl()?{dir:"rtl"}:{}}},behaviours:yr([c0.config({useFixed:()=>dt.isDocked(Un)})])},ku={dom:{styles:{width:document.body.clientWidth+"px"}},events:xu([er(u2(),h1=>{Jo(h1.element,"width",document.body.clientWidth+"px")})])},rv=Tm(Fu(Du,qs?ku:{})),Sp=$F(rv);return St.set(Sp),{sink:rv,mothership:Sp}},_h=()=>{const vs={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(an),attributes:{...Y1.isRtl()?{dir:"rtl"}:{}}},behaviours:yr([c0.config({useFixed:()=>dt.isDocked(Un),getBounds:()=>j.getPopupSinkBounds()})])},qs=Tm(vs),Du=$F(qs);return Dt.set(Du),{sink:qs,mothership:Du}},su=()=>{const vs=qr(),qs=Qr(),Du=Vu.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Yo.popup}),ku=Vu.parts.viewWrapper({backstage:Yo.popup}),rv=F$(h)&&!nt?Mt.some(_Z(h,Yo.popup.shared.providers)):Mt.none(),Sp=Nn([un?[]:[vs],nt?[]:[qs],un?[vs]:[]]),h1=Vu.parts.editorContainer({components:Nn([Sp,nt?[]:[_o.asSpec()]])}),V0=A6(h),g1={role:"application",...Y1.isRtl()?{dir:"rtl"}:{},...V0?{"aria-hidden":"true"}:{}},m1=Tm(Vu.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(nt?["tox-tinymce-inline"]:[]).concat(un?["tox-tinymce--toolbar-bottom"]:[]).concat(an),styles:{visibility:"hidden",...V0?{opacity:"0",border:"0"}:{}},attributes:g1},components:[h1,...nt?[]:[ku,...rv.toArray()],Du],behaviours:yr([Yp(()=>Yo.popup.shared.providers.checkUiComponentContext("any")),Os.config({disableClass:"tox-tinymce--disabled"}),_s.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Y_=$F(m1);return vt.set(Y_),{mothership:Y_,outerContainer:m1}},as=vs=>{const qs=o3(Doe(h)),Du=o3(Noe(h));return h.inline||(Z0("div","width",Du)&&Jo(vs.element,"width",Du),Z0("div","height",qs)?Jo(vs.element,"height",qs):Jo(vs.element,"height","400px")),qs},hr=vs=>{h.addShortcut("alt+F9","focus menubar",()=>{Vu.focusMenubar(vs)}),h.addShortcut("alt+F10","focus toolbar",()=>{Vu.focusToolbar(vs)}),h.addCommand("ToggleToolbarDrawer",(qs,Du)=>{Du!=null&&Du.skipFocus?Vu.toggleToolbarDrawerWithoutFocusing(vs):Vu.toggleToolbarDrawer(vs)}),h.addQueryStateHandler("ToggleToolbarDrawer",()=>Vu.isToolbarDrawerToggled(vs))},Dr=vs=>{const{mainUi:qs,popupUi:Du,uiMotherships:ku}=vs;xr(g6(h),(UA,Zz)=>{h.ui.registry.addGroupToolbarButton(Zz,UA)});const{buttons:rv,menuItems:Sp,contextToolbars:h1,sidebars:V0,views:g1}=h.ui.registry.getAll(),m1=bO(h),Y_={menuItems:Sp,menus:H$(h),menubar:O$(h),toolbar:m1.getOrThunk(()=>dO(h)),allowToolbarGroups:wn===r1.floating,buttons:rv,sidebar:V0,views:g1};hr(qs.outerContainer),tW(h,qs.mothership,ku),dt.setup(h,Yo.popup.shared,Un),Wq(h,Yo.popup),rZ(h,Yo.popup.shared.getSink,Yo.popup),x9(h),gW(h,Vr,Yo.popup.shared),Bq(h,h1,Du.sink,{backstage:Yo.popup}),Qre(h,Du.sink);const N4=h.getElement(),$w=as(qs.outerContainer),qz={targetNode:N4,height:$w};return it.render(h,vs,Y_,Yo.popup,qz)},Gs=vs=>(Dt.set(vs.mothership),vs),ga=()=>{const vs=su(),qs=Pl(),Du=eC(h)?_h():Gs(qs);yt.dialogUi.set(qs),yt.popupUi.set(Du),yt.mainUi.set(vs);const ku={popupUi:Du,dialogUi:qs,mainUi:vs,uiMotherships:yt.getUiMotherships()};return Dr(ku)};return{popups:{backstage:Yo.popup,getMothership:()=>xZ("popups",Dt)},dialogs:{backstage:Yo.dialog,getMothership:()=>xZ("dialogs",St)},renderUI:ga}},use=h=>h.dom.textContent,dse=(h,j)=>{const nt=Ls(h,"id").fold(()=>{const it=Zr("dialog-label");return Wo(j,"id",it),it},Qt);Wo(h,"aria-labelledby",nt)},fse=Nt([Qo("lazySink"),Ql("dragBlockClass"),Yu("getBounds",Hp),So("useTabstopAt",hn),So("firstTabstop",0),So("eventOrder",{}),Hm("modalBehaviours",[_s]),C0("onExecute"),jC("onEscape")]),Oz={sketch:Qt},hse=Nt([Jy({name:"draghandle",overrides:(h,j)=>({behaviours:yr([LA.config({mode:"mouse",getTarget:nt=>bm(nt,'[role="dialog"]').getOr(nt),blockerClass:h.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(j,null,2)).message),getBounds:h.getDragBounds})])})}),S0({schema:[Qo("dom")],name:"title"}),S0({factory:Oz,schema:[Qo("dom")],name:"close"}),S0({factory:Oz,schema:[Qo("dom")],name:"body"}),Jy({factory:Oz,schema:[Qo("dom")],name:"footer"}),kv({factory:{sketch:(h,j)=>({...h,dom:j.dom,components:j.components})},schema:[So("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),So("components",[])],name:"blocker"})]),pse=(h,j,nt,it)=>{const dt=Xl(),yt=wn=>{dt.set(wn);const On=h.lazySink(wn).getOrDie(),_o=it.blocker(),Un=On.getSystem().build({..._o,components:_o.components.concat([qy(wn)]),behaviours:yr([Fs.config({}),Ks("dialog-blocker-events",[rw(Q0(),()=>{Lx.isBlocked(wn)?Tt():_s.focusIn(wn)})])])});xx(On,Un),_s.focusIn(wn)},vt=wn=>{dt.clear(),_g(wn.element).each(On=>{wn.getSystem().getByDom(On).each(_o=>{wx(_o)})})},St=wn=>Gr(wn,h,"body"),Dt=wn=>zu(wn,h,"footer"),Bt=(wn,On)=>{Lx.block(wn,On)},jt=wn=>{Lx.unblock(wn)},Zt=Zr("modal-events"),an={...h.eventOrder,[my()]:[Zt].concat(h.eventOrder["alloy.system.attached"]||[])},un=ba();return{uid:h.uid,dom:h.dom,components:j,apis:{show:yt,hide:vt,getBody:St,getFooter:Dt,setIdle:jt,setBusy:Bt},eventOrder:an,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Um(h.modalBehaviours,[Us.config({}),_s.config({mode:"cyclic",onEnter:h.onExecute,onEscape:h.onEscape,useTabstopAt:h.useTabstopAt,firstTabstop:h.firstTabstop}),Lx.config({getRoot:dt.get}),Ks(Zt,[rp(wn=>{const On=Gr(wn,h,"title").element,_o=use(On);un.os.isMacOS()&&Ct(_o)?Wo(wn.element,"aria-label",_o):dse(wn.element,On)})])])}},Mm=g0({name:"ModalDialog",configFields:fse(),partFields:hse(),factory:pse,apis:{show:(h,j)=>{h.show(j)},hide:(h,j)=>{h.hide(j)},getBody:(h,j)=>h.getBody(j),getFooter:(h,j)=>h.getFooter(j),setBusy:(h,j,nt)=>{h.setBusy(j,nt)},setIdle:(h,j)=>{h.setIdle(j)}}}),wZ=ws([lm,Q6].concat(ES)),gse=Hy,M4=[jO("button"),i1,Em("align","end",["start","end"]),GO,H_,xC("buttonType",["primary","secondary"]),Dp("context","mode:design")],Dz=[...M4,tC],Nz=[o0("type",["submit","cancel","custom"]),...Dz],mse=[o0("type",["menu"]),nC,T5,i1,gy("items",wZ),...M4],yse=[...M4,o0("type",["togglebutton"]),T5,i1,nC,sm("active",!1)],bse=Ip("type",{submit:Nz,cancel:Nz,custom:Nz,menu:mse,togglebutton:yse}),vse=[lm,tC,o0("level",["info","warn","error","success"]),IG,So("url","")],_se=ws(vse),l3=h=>[lm,h],xse=[lm,tC,H_,jO("button"),i1,jY,xC("buttonType",["primary","secondary","toolbar"]),GO,Dp("context","mode:design")],wse=ws(xse),c3=[lm,Q6],Fx=c3.concat([tF]),Cse=c3.concat([eF,H_,Dp("context","mode:design")]),kse=ws(Cse),Sse=Hy,Lz=Fx.concat([DG("auto"),Dp("context","mode:design")]),P4=ws(Lz),Fz=eE([cA,tC,IG]),DN=Fx.concat([Dp("storageKey","default"),Dp("context","mode:design")]),FA=ws(DN),NN=Fr,CZ=ws(Fx),kZ=Fr,SZ=c3.concat([Dp("tag","textarea"),nm("scriptId"),nm("scriptUrl"),hv("onFocus"),CC("settings",void 0)]),Ese=c3.concat([Dp("tag","textarea"),ky("init")]),Ase=e2(h=>hp("customeditor.old",hy(Ese),h).orThunk(()=>hp("customeditor.new",hy(SZ),h))),Tse=Fr,EZ=Fx.concat([Dp("context","mode:design")]),AZ=ws(EZ),zz=P1(),Ise=h=>[lm,o2("columns"),h],Rse=[lm,nm("html"),Em("presets","presentation",["presentation","document"]),Yu("onInit",Tt),sm("stretched",!1)],Mse=ws(Rse),TZ=Fx.concat([sm("border",!1),sm("sandboxed",!0),sm("streamContent",!1),sm("transparent",!0)]),Pse=ws(TZ),Ose=Fr,Dse=ws(c3.concat([om("height")])),Bz=ws([nm("url"),r2("zoom"),r2("cachedWidth"),r2("cachedHeight")]),$z=Fx.concat([om("inputMode"),om("placeholder"),sm("maximized",!1),H_,Dp("context","mode:design")]),Nse=ws($z),IZ=Fr,Lse=h=>[lm,eF,h,Em("align","start",["start","center","end"]),om("for")],Fse=[tC,cA],RZ=[tC,gy("items",Xx("items",()=>MZ))],MZ=QS([ws(Fse),ws(RZ)]),zse=Fx.concat([gy("items",MZ),H_,Dp("context","mode:design")]),zA=ws(zse),PZ=Fr,Bse=Fx.concat([nE("items",[tC,cA]),wC("size",1),H_,Dp("context","mode:design")]),LN=ws(Bse),u3=Fr,FN=Fx.concat([sm("constrain",!0),H_,Dp("context","mode:design")]),OZ=ws(FN),O4=ws([nm("width"),nm("height")]),tv=c3.concat([eF,wC("min",0),wC("max",0)]),zN=ws(tv),DZ=ax,NZ=[lm,gy("header",Fr),gy("cells",py(Fr))],$se=ws(NZ),Gse=Fx.concat([om("placeholder"),sm("maximized",!1),H_,Dp("context","mode:design")]),jS=ws(Gse),wae=Fr,LZ=[o0("type",["directory","leaf"]),TG,nm("id"),qv("menu",v9),om("customStateIcon"),om("customStateIconTooltip")],BA=ws(LZ),BN=LZ.concat([gy("children",Xx("children",()=>lx("type",{directory:Gz,leaf:BA})))]),Gz=ws(BN),Hse=lx("type",{directory:Gz,leaf:BA}),Use=[lm,gy("items",Hse),hv("onLeafAction"),hv("onToggleExpand"),S_("defaultExpandedIds",[],Fr),om("defaultSelectedId")],Vse=ws(Use),Wse=Fx.concat([Em("filetype","file",["image","media","file"]),H_,om("picker_text"),Dp("context","mode:design")]),d3=ws(Wse),Cae=ws([cA,oF]),jz=h=>mm("items","items",v0(),py(e2(j=>hp(`Checking item of ${h}`,Hz,j).fold(nt=>Js.error(ux(nt)),nt=>Js.value(nt))))),Hz=gm(()=>lx("type",{alertbanner:_se,bar:ws(l3(jz("bar"))),button:wse,checkbox:kse,colorinput:FA,colorpicker:CZ,dropzone:AZ,grid:ws(Ise(jz("grid"))),iframe:Pse,input:Nse,listbox:zA,selectbox:LN,sizeinput:OZ,slider:zN,textarea:jS,urlinput:d3,customeditor:Ase,htmlpanel:Mse,imagepreview:Dse,collection:P4,label:ws(Lse(jz("label"))),table:$se,tree:Vse,panel:FZ})),kae=[lm,So("classes",[]),gy("items",Hz)],FZ=ws(kae),qse=[jO("tab"),TG,gy("items",Hz)],D4=[lm,nE("tabs",qse)],Zse=ws(D4),Kse=Dz,zZ=bse,Yse=ws([nm("title"),nu("body",lx("type",{panel:FZ,tabpanel:Zse})),Dp("size","normal"),S_("buttons",[],zZ),So("initialData",{}),Yu("onAction",Tt),Yu("onChange",Tt),Yu("onSubmit",Tt),Yu("onClose",Tt),Yu("onCancel",Tt),Yu("onTabChange",Tt)]),Sae=h=>hp("dialog",Yse,h),c=ws([o0("type",["cancel","custom"]),...Kse]),g=ws([nm("title"),nm("url"),r2("height"),r2("width"),s2("buttons",c),Yu("onAction",Tt),Yu("onCancel",Tt),Yu("onClose",Tt),Yu("onMessage",Tt)]),$=h=>hp("dialog",g,h),et=h=>ot(h)?[h].concat(sn(Dl(h),et)):ct(h)?sn(h,et):[],rt=h=>_e(h.type)&&_e(h.name),ut={checkbox:Sse,colorinput:NN,colorpicker:kZ,dropzone:zz,input:IZ,iframe:Ose,imagepreview:Bz,selectbox:u3,sizeinput:O4,slider:DZ,listbox:PZ,size:O4,textarea:wae,urlinput:Cae,customeditor:Tse,collection:Fz,togglemenuitem:gse},pt=h=>Mt.from(ut[h.type]),xt=h=>co(et(h),rt),Et=h=>{const j=xt(h),nt=sn(j,it=>pt(it).fold(()=>[],dt=>[nu(it.name,dt)]));return ws(nt)},Ft=h=>{var j;const nt=pr(Sae(h)),it=Et(h),dt=(j=h.initialData)!==null&&j!==void 0?j:{};return{internalDialog:nt,dataValidator:it,initialData:dt}},Vt={open:(h,j)=>{const nt=Ft(j);return h(nt.internalDialog,nt.initialData,nt.dataValidator)},openUrl:(h,j)=>{const nt=pr($(j));return h(nt)},redial:h=>Ft(h)};var en=Object.freeze({__proto__:null,events:(h,j)=>{const nt=(it,dt)=>{h.updateState.each(yt=>{const vt=yt(it,dt);j.set(vt)}),h.renderComponents.each(yt=>{const vt=yt(dt,j.get());(h.reuseDom?xI:o$)(it,vt)})};return xu([er(F1(),(it,dt)=>{const yt=dt;if(!yt.universal){const vt=h.channel;qn(yt.channels,vt)&&nt(it,yt.data)}}),rp((it,dt)=>{h.initialData.each(yt=>{nt(it,yt)})})])}}),Sn=Object.freeze({__proto__:null,getState:(h,j,nt)=>nt}),bn=[Qo("channel"),Ql("renderComponents"),Ql("updateState"),Ql("initialData"),sm("reuseDom",!0)],ao=Object.freeze({__proto__:null,init:()=>{const h=ds(Mt.none()),j=()=>h.set(Mt.none());return{readState:()=>h.get().getOr("none"),get:h.get,set:h.set,clear:j}}});const po=Gm({fields:bn,name:"reflecting",active:en,apis:Sn,state:ao}),wo=h=>{const j=[],nt={};return ar(h,(it,dt)=>{it.fold(()=>{j.push(dt)},yt=>{nt[dt]=yt})}),j.length>0?Js.error(j):Js.value(nt)},Io=(h,j,nt,it)=>{const dt=iu(EA.sketch(yt=>({dom:{tag:"div",classes:["tox-form"].concat(h.classes)},components:Dn(h.items,vt=>Jee(yt,vt,j,nt,it))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[dt.asSpec()]}],behaviours:yr([_s.config({mode:"acyclic",useTabstopAt:ln(s4)}),t_.memento(dt),NQ(dt,{postprocess:yt=>wo(yt).fold(vt=>(console.error(vt),{}),Qt)}),Ks("dialog-body-panel",[er(Q0(),(yt,vt)=>{yt.getSystem().broadcastOn([AD],{newFocus:Mt.some(vt.event.target)})})])])}},sr=(h,j)=>({uid:h.uid,dom:h.dom,components:h.components,events:l5(h.action),behaviours:Um(h.tabButtonBehaviours,[Fs.config({}),_s.config({mode:"execution",useSpace:!0,useEnter:!0}),$r.config({store:{mode:"memory",initialValue:h.value}})]),domModification:h.domModification}),br=Py({name:"TabButton",configFields:[So("uid",void 0),Qo("value"),mm("dom","dom",Kx(()=>({attributes:{role:"tab",id:Zr("aria"),"aria-selected":"false"}})),jy()),Ql("action"),So("domModification",{}),Hm("tabButtonBehaviours",[Fs,_s,$r]),Qo("view")],factory:sr}),jr=Nt([Qo("tabs"),Qo("dom"),So("clickToDismiss",!1),Hm("tabbarBehaviours",[Er,_s]),mx(["tabClass","selectedClass"])]),Ko=WE({factory:br,name:"tabs",unit:"tab",overrides:h=>{const j=(it,dt)=>{Er.dehighlight(it,dt),ls(it,W4(),{tabbar:it,button:dt})},nt=(it,dt)=>{Er.highlight(it,dt),ls(it,V4(),{tabbar:it,button:dt})};return{action:it=>{const dt=it.getSystem().getByUid(h.uid).getOrDie(),yt=Er.isHighlighted(dt,it);(yt&&h.clickToDismiss?j:yt?Tt:nt)(dt,it)},domModification:{classes:[h.markers.tabClass]}}}}),Fo=Nt([Ko]),lr=(h,j,nt,it)=>({uid:h.uid,dom:h.dom,components:j,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Um(h.tabbarBehaviours,[Er.config({highlightClass:h.markers.selectedClass,itemClass:h.markers.tabClass,onHighlight:(dt,yt)=>{Wo(yt.element,"aria-selected","true")},onDehighlight:(dt,yt)=>{Wo(yt.element,"aria-selected","false")}}),_s.config({mode:"flow",getInitial:dt=>Er.getHighlighted(dt).map(yt=>yt.element),selector:"."+h.markers.tabClass,executeOnMove:!0})])}),Hr=g0({name:"Tabbar",configFields:jr(),partFields:Fo(),factory:lr}),bs=(h,j)=>({uid:h.uid,dom:h.dom,behaviours:Um(h.tabviewBehaviours,[Us.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Al=Py({name:"Tabview",configFields:[Hm("tabviewBehaviours",[Us])],factory:bs}),Tl=Nt([So("selectFirst",!0),Hl("onChangeTab"),Hl("onDismissTab"),So("tabs",[]),Hm("tabSectionBehaviours",[])]),du=S0({factory:Hr,schema:[Qo("dom"),k_("markers",[Qo("tabClass"),Qo("selectedClass")])],name:"tabbar",defaults:h=>({tabs:h.tabs})}),Au=S0({factory:Al,name:"tabview"}),Wp=Nt([du,Au]),T0=(h,j,nt,it)=>{const dt=vt=>{const St=$r.getValue(vt);zu(vt,h,"tabview").each(Dt=>{yn(h.tabs,jt=>jt.value===St).each(jt=>{const Zt=jt.view();Ls(vt.element,"id").each(an=>{Wo(Dt.element,"aria-labelledby",an)}),Us.set(Dt,Zt),h.onChangeTab(Dt,vt,Zt)})})},yt=(vt,St)=>{zu(vt,h,"tabbar").each(Dt=>{St(Dt).each(ow)})};return{uid:h.uid,dom:h.dom,components:j,behaviours:eI(h.tabSectionBehaviours),events:xu(Nn([h.selectFirst?[rp((vt,St)=>{yt(vt,Er.getFirst)})]:[],[er(V4(),(vt,St)=>{const Dt=St.event.button;dt(Dt)}),er(W4(),(vt,St)=>{const Dt=St.event.button;h.onDismissTab(vt,Dt)})]])),apis:{getViewItems:vt=>zu(vt,h,"tabview").map(St=>Us.contents(St)).getOr([]),showTab:(vt,St)=>{yt(vt,Bt=>{const jt=Er.getCandidates(Bt);return yn(jt,an=>$r.getValue(an)===St).filter(an=>!Er.isHighlighted(Bt,an))})}}}},Xp=g0({name:"TabSection",configFields:Tl(),partFields:Wp(),factory:T0,apis:{getViewItems:(h,j)=>h.getViewItems(j),showTab:(h,j,nt)=>{h.showTab(j,nt)}}}),Tr=(h,j,nt)=>Dn(h,(it,dt)=>{Us.set(nt,h[dt].view());const yt=j.dom.getBoundingClientRect();return Us.set(nt,[]),yt.height}),ps=h=>vo(Rn(h,(j,nt)=>j>nt?-1:j<nt?1:0)),ou=(h,j,nt)=>{const it=ly(h).dom,dt=bm(h,".tox-dialog-wrap").getOr(h),yt=lu(dt,"position")==="fixed";let vt;yt?vt=Math.max(it.clientHeight,window.innerHeight):vt=Math.max(it.offsetHeight,it.scrollHeight);const St=mu(j),Bt=j.dom.offsetLeft>=nt.dom.offsetLeft+vn(nt)?Math.max(mu(nt),St):St,jt=parseInt(lu(h,"margin-top"),10)||0,Zt=parseInt(lu(h,"margin-bottom"),10)||0,un=mu(h)+jt+Zt-Bt;return vt-un},zr=(h,j)=>{vo(h).each(nt=>Xp.showTab(j,nt.value))},Ms=(h,j)=>{Jo(h,"height",j+"px"),Jo(h,"flex-basis",j+"px")},Ps=(h,j,nt)=>{bm(h,'[role="dialog"]').each(it=>{ap(it,'[role="tablist"]').each(dt=>{nt.get().map(yt=>(Jo(j,"height","0"),Jo(j,"flex-basis","0"),Math.min(yt,ou(it,j,dt)))).each(yt=>{Ms(j,yt)})})})},Or=h=>ap(h,'[role="tabpanel"]'),Il=h=>{const j=Xl();return{extraEvents:[rp(dt=>{const yt=dt.element;Or(yt).each(vt=>{Jo(vt,"visibility","hidden"),dt.getSystem().getByDom(vt).toOptional().each(St=>{const Dt=Tr(h,vt,St);ps(Dt).fold(j.clear,j.set)}),Ps(yt,vt,j),js(vt,"visibility"),zr(h,dt),requestAnimationFrame(()=>{Ps(yt,vt,j)})})}),er(u2(),dt=>{const yt=dt.element;Or(yt).each(vt=>{Ps(yt,vt,j)})}),er(VH,(dt,yt)=>{const vt=dt.element;Or(vt).each(St=>{const Dt=L_(yp(St));Jo(St,"visibility","hidden");const Bt=gu(St,"height").map(an=>parseInt(an,10));js(St,"height"),js(St,"flex-basis");const jt=St.dom.getBoundingClientRect().height;Bt.forall(an=>jt>an)?(j.set(jt),Ps(vt,St,j)):Bt.each(an=>{Ms(St,an)}),js(St,"visibility"),Dt.each(_v)})})],selectFirst:!1}},Fl="send-data-to-section",Cm="send-data-to-view",$u=(h,j,nt,it)=>{const dt=ds({}),yt=jt=>{const Zt=$r.getValue(jt),an=wo(Zt).getOr({}),un=dt.get(),wn=Fu(un,an);dt.set(wn)},vt=jt=>{const Zt=dt.get();$r.setValue(jt,Zt)},St=ds(null),Dt=Dn(h.tabs,jt=>({value:jt.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[_p(nt.shared.providers.translate(jt.title))],view:()=>[EA.sketch(Zt=>({dom:{tag:"div",classes:["tox-form"]},components:Dn(jt.items,an=>Jee(Zt,an,j,nt,it)),formBehaviours:yr([_s.config({mode:"acyclic",useTabstopAt:ln(s4)}),Ks("TabView.form.events",[rp(vt),I_(yt)]),Ty.config({channels:Qs([{key:Fl,value:{onReceive:yt}},{key:Cm,value:{onReceive:vt}}])})])}))]})),Bt=Il(Dt);return Xp.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(jt,Zt,an)=>{const un=$r.getValue(Zt);ls(jt,UH,{name:un,oldName:St.get()}),St.set(un)},tabs:Dt,components:[Xp.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Hr.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:yr([lp.config({})])}),Xp.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:Bt.selectFirst,tabSectionBehaviours:yr([Ks("tabpanel",Bt.extraEvents),_s.config({mode:"acyclic"}),$l.config({find:jt=>vo(Xp.getViewItems(jt))}),AA(Mt.none(),jt=>(jt.getSystem().broadcastOn([Fl],{}),dt.get()),(jt,Zt)=>{dt.set(Zt),jt.getSystem().broadcastOn([Cm],{})})])})},I0=(h,j,nt,it,dt,yt)=>{const vt=Bt=>{const jt=Bt.body;switch(jt.type){case"tabpanel":return[$u(jt,Bt.initialData,it,yt)];default:return[Io(jt,Bt.initialData,it,yt)]}},St=(Bt,jt)=>Mt.some({isTabPanel:()=>jt.body.type==="tabpanel"}),Dt={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...nt.map(Bt=>({id:Bt})).getOr({}),...dt?Dt:{}}},components:[],behaviours:yr([t_.childAt(0),po.config({channel:`${S7}-${j}`,updateState:St,renderComponents:vt,initialData:h})])}},nv=(h,j,nt,it,dt,yt)=>I0(h,j,Mt.some(nt),it,dt,yt),zx=(h,j,nt,it)=>{const dt=I0(h,j,Mt.none(),nt,!1,it);return Mm.parts.body(dt)},ay=h=>{const j={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[C7(Mt.none(),{dom:{tag:"iframe",attributes:{src:h.url}},behaviours:yr([lp.config({}),Fs.config({})])})]}],behaviours:yr([_s.config({mode:"acyclic",useTabstopAt:ln(s4)})])};return Mm.parts.body(j)},f1=oA.deviceType.isTouch(),a_=(h,j)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[h,j]}),H0=(h,j)=>Mm.parts.close(Im.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":j.translate("Close")}},action:h,buttonBehaviours:yr([lp.config({})])})),ov=()=>Mm.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),hs=(h,j)=>Mm.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Sx(`<p>${tG(j.translate(h))}</p>`)}]}]}),Kl=h=>Mm.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:h}),Lp=(h,j)=>[Px.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:h}),Px.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:j})],km=h=>{const j="tox-dialog",nt=j+"-wrap",it=nt+"__backdrop",dt=j+"__disable-scroll";return Mm.sketch({lazySink:h.lazySink,onEscape:yt=>(h.onEscape(yt),Mt.some(!0)),useTabstopAt:yt=>!s4(yt),firstTabstop:h.firstTabstop,dom:{tag:"div",classes:[j].concat(h.extraClasses),styles:{position:"relative",...h.extraStyles}},components:[h.header,h.body,...h.footer.toArray()],parts:{blocker:{dom:Sx(`<div class="${nt}"></div>`),components:[{dom:{tag:"div",classes:f1?[it,it+"--opaque"]:[it]}}]}},dragBlockClass:nt,modalBehaviours:yr([Fs.config({}),Ks("dialog-events",h.dialogEvents.concat([rw(Q0(),(yt,vt)=>{Lx.isBlocked(yt)?Tt():_s.focusIn(yt)}),er(iE(),(yt,vt)=>{yt.getSystem().broadcastOn([AD],{newFocus:vt.event.newFocus})})])),Ks("scroll-lock",[rp(()=>{Kp(ho(),dt)}),I_(()=>{wu(ho(),dt)})]),...h.extraBehaviours]),eventOrder:{[s0()]:["dialog-events"],[my()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Vy()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...h.eventOrder}})},qm=h=>Im.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":h.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:yr([lp.config({}),Np.config(h.tooltips.getConfig({tooltipText:h.translate("Close")}))]),components:[s1("close",{tag:"span",classes:["tox-icon"]},h.icons)],action:j=>{El(j,MS)}}),Sm=(h,j,nt,it)=>{const dt=yt=>[_p(it.translate(yt.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...nt.map(yt=>({id:yt})).getOr({})}},components:[],behaviours:yr([po.config({channel:`${GU}-${j}`,initialData:h,renderComponents:dt})])}},kp=()=>({dom:Sx('<div class="tox-dialog__draghandle"></div>')}),Rp=(h,j,nt,it)=>Px.sketch({dom:Sx('<div class="tox-dialog__header"></div>'),components:[Sm(h,j,Mt.some(nt),it),kp(),qm(it)],containerBehaviours:yr([LA.config({mode:"mouse",blockerClass:"blocker",getTarget:dt=>D_(dt,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Fy=(h,j,nt)=>{const it=Mm.parts.title(Sm(h,j,Mt.none(),nt)),dt=Mm.parts.draghandle(kp()),yt=Mm.parts.close(qm(nt)),vt=[it].concat(h.draggable?[dt]:[]).concat([yt]);return Px.sketch({dom:Sx('<div class="tox-dialog__header"></div>'),components:vt})},l_=(h,j,nt)=>Fy({title:nt.shared.providers.translate(h),draggable:nt.dialog.isDraggableModal()},j,nt.shared.providers),Bx=(h,j,nt,it)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":nt.translate(h)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${it.getOr(0)}px`,position:"absolute"}},behaviours:j,components:[{dom:Sx('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),K_=(h,j,nt)=>({onClose:()=>nt.closeWindow(),onBlock:it=>{const dt=ap(h().element,".tox-dialog__header").map(yt=>mu(yt));Mm.setBusy(h(),(yt,vt)=>Bx(it.message,vt,j,dt))},onUnblock:()=>{Mm.setIdle(h())}}),$A="tox-dialog--fullscreen",HS="tox-dialog--width-lg",cC="tox-dialog--width-md",Pv=h=>{switch(h){case"large":return Mt.some(HS);case"medium":return Mt.some(cC);default:return Mt.none()}},uC=(h,j)=>{const nt=io.fromDom(j.element.dom);ty(nt,$A)||(B1(nt,[HS,cC]),Pv(h).each(it=>Kp(nt,it)))},f3=(h,j)=>{const nt=io.fromDom(h.element.dom),it=J4(nt),dt=yn(it,yt=>yt===HS||yt===cC).or(Pv(j));sB(nt,[$A,...dt.toArray()])},GA=(h,j,nt)=>Tm(km({...h,firstTabstop:1,lazySink:nt.shared.getSink,extraBehaviours:[o4({}),...h.extraBehaviours],onEscape:it=>{El(it,MS)},dialogEvents:j,eventOrder:{[F1()]:[po.name(),Ty.name()],[my()]:["scroll-lock",po.name(),"messages","dialog-events","alloy.base.behaviour"],[Vy()]:["alloy.base.behaviour","dialog-events","messages",po.name(),"scroll-lock"]}})),$N=(h,j={})=>{const nt=it=>{const dt=Dn(it.items,yt=>{const vt=or(j,yt.name).getOr(ds(!1));return{...yt,storage:vt}});return{...it,items:dt}};return Dn(h,it=>it.type==="menu"?nt(it):it)},jA=h=>yo(h,(j,nt)=>nt.type==="menu"?yo(nt.items,(dt,yt)=>(dt[yt.name]=yt.storage,dt),j):j,{}),Uz=(h,j)=>[oT(Q0(),UQ),h(q5,(nt,it,dt,yt)=>{P2(yt.element)&&L_(yp(yt.element)).each(KC),j.onClose(),it.onClose()}),h(MS,(nt,it,dt,yt)=>{it.onCancel(nt),El(yt,q5)}),er(HF,(nt,it)=>j.onUnblock()),er(uD,(nt,it)=>j.onBlock(it.event))],BZ=(h,j)=>{const nt=(dt,yt)=>er(dt,(vt,St)=>{it(vt,(Dt,Bt)=>{yt(h(),Dt,St.event,vt)})}),it=(dt,yt)=>{po.getState(dt).get().each(vt=>{yt(vt,dt)})};return[...Uz(nt,j),nt(Dw,(dt,yt,vt)=>{yt.onAction(dt,{name:vt.name})})]},U0=(h,j,nt)=>{const it=(yt,vt)=>er(yt,(St,Dt)=>{dt(St,(Bt,jt)=>{vt(h(),Bt,Dt.event,St)})}),dt=(yt,vt)=>{po.getState(yt).get().each(St=>{vt(St.internalDialog,yt)})};return[...Uz(it,j),it(FI,(yt,vt)=>vt.onSubmit(yt)),it(_b,(yt,vt,St)=>{vt.onChange(yt,{name:St.name})}),it(Dw,(yt,vt,St,Dt)=>{const Bt=()=>Dt.getSystem().isConnected()?_s.focusIn(Dt):void 0,jt=un=>Lu(un,"disabled")||Ls(un,"aria-disabled").exists(wn=>wn==="true"),Zt=yp(Dt.element),an=L_(Zt);vt.onAction(yt,{name:St.name,value:St.value}),L_(Zt).fold(Bt,un=>{jt(un)||an.exists(wn=>zp(un,wn)&&jt(wn))?Bt():nt().toOptional().filter(wn=>!zp(wn.element,un)).each(Bt)})}),it(UH,(yt,vt,St)=>{vt.onTabChange(yt,{newTabName:St.name,oldTabName:St.oldName})}),I_(yt=>{const vt=h();$r.setValue(yt,vt.getData())})]},c_=(h,j)=>WI(h,h.type,j),GN=(h,j,nt)=>yn(j,it=>it.name===nt).bind(it=>it.memento.getOpt(h)),Lo=(h,j)=>{const nt=j.map(St=>St.footerButtons).getOr([]),it=Ur(nt,St=>St.align==="start"),dt=(St,Dt)=>Px.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${St}`]},components:Dn(Dt,Bt=>Bt.memento.asSpec())}),yt=dt("start",it.pass),vt=dt("end",it.fail);return[yt,vt]},No=(h,j,nt)=>{const it=(dt,yt)=>{const vt=Dn(yt.buttons,Dt=>{const Bt=iu(c_(Dt,nt));return{name:Dt.name,align:Dt.align,memento:Bt}}),St=Dt=>GN(dt,vt,Dt);return Mt.some({lookupByName:St,footerButtons:vt})};return{dom:Sx('<div class="tox-dialog__footer"></div>'),components:[],behaviours:yr([po.config({channel:`${jU}-${j}`,initialData:h,updateState:it,renderComponents:Lo})])}},Ir=(h,j,nt)=>No(h,j,nt),_r=(h,j,nt)=>Mm.parts.footer(No(h,j,nt)),Is=(h,j)=>{if(h.getRoot().getSystem().isConnected()){const it=$l.getCurrent(h.getFormWrapper()).getOr(h.getFormWrapper());return EA.getField(it,j).orThunk(()=>h.getFooter().bind(vt=>po.getState(vt).get()).bind(vt=>vt.lookupByName(j)))}else return Mt.none()},ru=(h,j)=>{const nt=h.getRoot();return po.getState(nt).get().map(it=>pr(hp("data",it.dataValidator,j))).getOr(j)},Fp=(h,j,nt)=>{const it=wn=>{const On=h.getRoot();On.getSystem().isConnected()&&wn(On)},un={getData:()=>{const wn=h.getRoot(),On=wn.getSystem().isConnected()?h.getFormWrapper():wn,_o=$r.getValue(On),Un=xr(nt,go=>go.get());return{..._o,...Un}},setData:wn=>{it(On=>{const _o=un.getData(),Un=Fu(_o,wn),go=ru(h,Un),bo=h.getFormWrapper();$r.setValue(bo,go),ar(nt,(Bo,Go)=>{Ds(Un,Go)&&Bo.set(Un[Go])})})},setEnabled:(wn,On)=>{Is(h,wn).each(On?Os.enable:Os.disable)},focus:wn=>{Is(h,wn).each(Fs.focus)},block:wn=>{if(!_e(wn))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");it(On=>{ls(On,uD,{message:wn})})},unblock:()=>{it(wn=>{El(wn,HF)})},showTab:wn=>{it(On=>{const _o=h.getBody();po.getState(_o).get().exists(go=>go.isTabPanel())&&$l.getCurrent(_o).each(go=>{Xp.showTab(go,wn)})})},redial:wn=>{it(On=>{const _o=h.getId(),Un=j(wn),go=$N(Un.internalDialog.buttons,nt);On.getSystem().broadcastOn([`${ED}-${_o}`],Un),On.getSystem().broadcastOn([`${GU}-${_o}`],Un.internalDialog),On.getSystem().broadcastOn([`${S7}-${_o}`],Un.internalDialog),On.getSystem().broadcastOn([`${jU}-${_o}`],{...Un.internalDialog,buttons:go}),un.setData(Un.initialData)})},close:()=>{it(wn=>{El(wn,q5)})},toggleFullscreen:h.toggleFullscreen};return un},$x=(h,j,nt)=>{const it=Zr("dialog"),dt=h.internalDialog,yt=l_(dt.title,it,nt),vt=ds(dt.size),St=bo=>Is(Un,bo),Dt=Pv(vt.get()).toArray(),Bt=(bo,Bo)=>(vt.set(Bo.internalDialog.size),uC(Bo.internalDialog.size,bo),Mt.some(Bo)),jt=zx({body:dt.body,initialData:dt.initialData},it,nt,St),Zt=$N(dt.buttons),an=jA(Zt),un=es(Zt.length!==0,_r({buttons:Zt},it,nt)),wn=U0(()=>go,K_(()=>_o,nt.shared.providers,j),nt.shared.getSink),On={id:it,header:yt,body:jt,footer:un,extraClasses:Dt,extraBehaviours:[po.config({channel:`${ED}-${it}`,updateState:Bt,initialData:h})],extraStyles:{}},_o=GA(On,wn,nt),Un=(()=>{const bo=()=>{const Go=Mm.getBody(_o);return $l.getCurrent(Go).getOr(Go)},Bo=()=>{f3(_o,vt.get())};return{getId:Nt(it),getRoot:Nt(_o),getBody:()=>Mm.getBody(_o),getFooter:()=>Mm.getFooter(_o),getFormWrapper:bo,toggleFullscreen:Bo}})(),go=Fp(Un,j.redial,an);return{dialog:_o,instanceApi:go}},u_=(h,j,nt,it=!1,dt)=>{const yt=Zr("dialog"),vt=Zr("dialog-label"),St=Zr("dialog-content"),Dt=h.internalDialog,Bt=qr=>Is(Vr,qr),jt=ds(Dt.size),Zt=Pv(jt.get()).toArray(),an=(qr,Lr)=>(jt.set(Lr.internalDialog.size),uC(Lr.internalDialog.size,qr),dt(),Mt.some(Lr)),un=iu(Rp({title:Dt.title,draggable:!0},yt,vt,nt.shared.providers)),wn=iu(nv({body:Dt.body,initialData:Dt.initialData},yt,St,nt,it,Bt)),On=$N(Dt.buttons),_o=jA(On),Un=es(On.length!==0,iu(Ir({buttons:On},yt,nt))),go=U0(()=>Yo,{onBlock:qr=>{Lx.block(Go,(Lr,Qr)=>{const Pl=un.getOpt(Go).map(_h=>mu(_h.element));return Bx(qr.message,Qr,nt.shared.providers,Pl)})},onUnblock:()=>{Lx.unblock(Go)},onClose:()=>j.closeWindow()},nt.shared.getSink),bo="tox-dialog-inline",Bo=ba().os,Go=Tm({dom:{tag:"div",classes:["tox-dialog",bo,...Zt],attributes:{role:"dialog",...Bo.isMacOS()?{"aria-label":Dt.title}:{"aria-labelledby":vt}}},eventOrder:{[F1()]:[po.name(),Ty.name()],[s0()]:["execute-on-form"],[my()]:["reflecting","execute-on-form"]},behaviours:yr([_s.config({mode:"cyclic",onEscape:qr=>(El(qr,q5),Mt.some(!0)),useTabstopAt:qr=>!s4(qr)&&(eu(qr)!=="button"||Xr(qr,"disabled")!=="disabled"),firstTabstop:1}),po.config({channel:`${ED}-${yt}`,updateState:an,initialData:h}),Fs.config({}),Ks("execute-on-form",go.concat([rw(Q0(),(qr,Lr)=>{_s.focusIn(qr)}),er(iE(),(qr,Lr)=>{qr.getSystem().broadcastOn([AD],{newFocus:Lr.event.newFocus})})])),Lx.config({getRoot:()=>Mt.some(Go)}),Us.config({}),o4({})]),components:[un.asSpec(),wn.asSpec(),...Un.map(qr=>qr.asSpec()).toArray()]}),Sr=()=>{f3(Go,jt.get())},Vr={getId:Nt(yt),getRoot:Nt(Go),getFooter:()=>Un.map(qr=>qr.get(Go)),getBody:()=>wn.get(Go),getFormWrapper:()=>{const qr=wn.get(Go);return $l.getCurrent(qr).getOr(qr)},toggleFullscreen:Sr},Yo=Fp(Vr,j.redial,_o);return{dialog:Go,instanceApi:Yo}};var HA=tinymce.util.Tools.resolve("tinymce.util.URI");const $Z=h=>{const j=vt=>{h.getSystem().isConnected()&&vt(h)};return{block:vt=>{if(!_e(vt))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");j(St=>{ls(St,uD,{message:vt})})},unblock:()=>{j(vt=>{El(vt,HF)})},close:()=>{j(vt=>{El(vt,q5)})},sendMessage:vt=>{j(St=>{St.getSystem().broadcastOn([E7],vt)})}}},GZ=["insertContent","setContent","execCommand","close","block","unblock"],Vz=h=>ot(h)&&GZ.indexOf(h.mceAction)!==-1,jZ=h=>!Vz(h)&&ot(h)&&Ds(h,"mceAction"),dC=(h,j,nt)=>{switch(nt.mceAction){case"insertContent":h.insertContent(nt.content);break;case"setContent":h.setContent(nt.content);break;case"execCommand":const it=mt(nt.ui)?nt.ui:!1;h.execCommand(nt.cmd,it,nt.value);break;case"close":j.close();break;case"block":j.block(nt.message);break;case"unblock":j.unblock();break}},HZ=(h,j,nt,it)=>{const dt=Zr("dialog"),yt=l_(h.title,dt,it),vt=ay(h),St=h.buttons.bind(bo=>bo.length===0?Mt.none():Mt.some(_r({buttons:bo},dt,it))),Dt=BZ(()=>go,K_(()=>Un,it.shared.providers,j)),Bt={...h.height.fold(()=>({}),bo=>({height:bo+"px","max-height":bo+"px"})),...h.width.fold(()=>({}),bo=>({width:bo+"px","max-width":bo+"px"}))},jt=h.width.isNone()&&h.height.isNone()?["tox-dialog--width-lg"]:[],Zt=new HA(h.url,{base_uri:new HA(window.location.href)}),an=`${Zt.protocol}://${Zt.host}${Zt.port?":"+Zt.port:""}`,un=Y0(),wn=(bo,Bo)=>Mt.some(Bo),On=[po.config({channel:`${ED}-${dt}`,updateState:wn,initialData:h}),Ks("messages",[rp(()=>{const bo=ny(io.fromDom(window),"message",Bo=>{if(Zt.isSameOrigin(new HA(Bo.raw.origin))){const Go=Bo.raw.data;Vz(Go)?dC(nt,go,Go):jZ(Go)&&h.onMessage(go,Go)}});un.set(bo)}),I_(un.clear)]),Ty.config({channels:{[E7]:{onReceive:(bo,Bo)=>{ap(bo.element,"iframe").each(Go=>{const Sr=Go.dom.contentWindow;Ct(Sr)&&Sr.postMessage(Bo,an)})}}}})],Un=GA({id:dt,header:yt,body:vt,footer:St,extraClasses:jt,extraBehaviours:On,extraStyles:Bt},Dt,it),go=$Z(Un);return{dialog:Un,instanceApi:go}},UZ=h=>{const j=h.shared;return{open:(it,dt)=>{const yt=()=>{Mm.hide(Bt),dt()},vt=iu(WI({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:Mt.some("primary"),align:"end",enabled:!0,icon:Mt.none()},"cancel",h)),St=ov(),Dt=H0(yt,j.providers),Bt=Tm(km({lazySink:()=>j.getSink(),header:a_(St,Dt),body:hs(it,j.providers),footer:Mt.some(Kl(Lp([],[vt.asSpec()]))),onEscape:yt,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[er(MS,yt)],eventOrder:{}}));Mm.show(Bt);const jt=vt.get(Bt);Fs.focus(jt)}}},VZ=h=>{const j=h.shared;return{open:(it,dt)=>{const yt=an=>{Mm.hide(jt),dt(an)},vt=iu(WI({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:Mt.some("primary"),align:"end",enabled:!0,icon:Mt.none()},"submit",h)),St=WI({context:"any",name:"no",text:"No",primary:!1,buttonType:Mt.some("secondary"),align:"end",enabled:!0,icon:Mt.none()},"cancel",h),Dt=ov(),Bt=H0(()=>yt(!1),j.providers),jt=Tm(km({lazySink:()=>j.getSink(),header:a_(Dt,Bt),body:hs(it,j.providers),footer:Mt.some(Kl(Lp([],[St,vt.asSpec()]))),onEscape:()=>yt(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[er(MS,()=>yt(!1)),er(FI,()=>yt(!0))],eventOrder:{}}));Mm.show(jt);const Zt=vt.get(jt);Fs.focus(Zt)}}},Wz=(h,j)=>pr(hp("data",j,h)),WZ=h=>V5(h,".tox-alert-dialog")||V5(h,".tox-confirm-dialog"),zl=(h,j,nt)=>j&&nt?[]:[Ju.config({contextual:{lazyContext:()=>Mt.some(tp(io.fromDom(h.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:it=>xS(h,it.element).map(yt=>({bounds:wS(yt),optScrollEnv:Mt.some({currentScrollTop:yt.element.dom.scrollTop,scrollElmTop:Gu(yt.element).top})})).getOrThunk(()=>({bounds:Hp(),optScrollEnv:Mt.none()}))})],zo=h=>{const j=h.editor,nt=_S(j),it=UZ(h.backstages.dialog),dt=VZ(h.backstages.dialog),yt=(wn,On,_o)=>{if(!bt(On)){if(On.inline==="toolbar")return Bt(wn,h.backstages.popup.shared.anchors.inlineDialog(),_o,On);if(On.inline==="bottom")return jt(wn,h.backstages.popup.shared.anchors.inlineBottomDialog(),_o,On);if(On.inline==="cursor")return Bt(wn,h.backstages.popup.shared.anchors.cursor(),_o,On)}return Dt(wn,_o)},vt=(wn,On)=>St(wn,On),St=(wn,On)=>{const _o=Un=>{const go=HZ(Un,{closeWindow:()=>{Mm.hide(go.dialog),On(go.instanceApi)}},j,h.backstages.dialog);return Mm.show(go.dialog),go.instanceApi};return Vt.openUrl(_o,wn)},Dt=(wn,On)=>{const _o=(Un,go,bo)=>{const Bo=go,Sr=$x({dataValidator:bo,initialData:Bo,internalDialog:Un},{redial:Vt.redial,closeWindow:()=>{Mm.hide(Sr.dialog),On(Sr.instanceApi)}},h.backstages.dialog);return Mm.show(Sr.dialog),Sr.instanceApi.setData(Bo),Sr.instanceApi};return Vt.open(_o,wn)},Bt=(wn,On,_o,Un)=>{const go=(bo,Bo,Go)=>{const Sr=Wz(Bo,Go),Vr=Xl(),Yo=h.backstages.popup.shared.header.isPositionedAtTop(),qr={dataValidator:Go,initialData:Sr,internalDialog:bo},Lr=()=>Vr.on(su=>{Cp.reposition(su),(!nt||!Yo)&&Ju.refresh(su)}),Qr=u_(qr,{redial:Vt.redial,closeWindow:()=>{Vr.on(Cp.hide),j.off("ResizeEditor",Lr),Vr.clear(),_o(Qr.instanceApi)}},h.backstages.popup,Un.ariaAttrs,Lr),Pl=Tm(Cp.sketch({lazySink:h.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Un.persistent?{event:"doNotDismissYet"}:{},...Yo?{}:{fireRepositionEventInstead:{}},inlineBehaviours:yr([Ks("window-manager-inline-events",[er(Wy(),(su,as)=>{El(Qr.dialog,MS)})]),...zl(j,nt,Yo)]),isExtraPart:(su,as)=>WZ(as)}));Vr.set(Pl);const _h=()=>{const su=j.inline?ho():io.fromDom(j.getContainer()),as=tp(su);return Mt.some(as)};return Cp.showWithinBounds(Pl,qy(Qr.dialog),{anchor:On},_h),(!nt||!Yo)&&(Ju.refresh(Pl),j.on("ResizeEditor",Lr)),Qr.instanceApi.setData(Sr),_s.focusIn(Qr.dialog),Qr.instanceApi};return Vt.open(go,wn)},jt=(wn,On,_o,Un)=>{const go=(bo,Bo,Go)=>{const Sr=Wz(Bo,Go),Vr=Xl(),Yo=h.backstages.popup.shared.header.isPositionedAtTop(),qr={dataValidator:Go,initialData:Sr,internalDialog:bo},Lr=()=>Vr.on(su=>{Cp.reposition(su),Ju.refresh(su)}),Qr=u_(qr,{redial:Vt.redial,closeWindow:()=>{Vr.on(Cp.hide),j.off("ResizeEditor ScrollWindow ElementScroll",Lr),Vr.clear(),_o(Qr.instanceApi)}},h.backstages.popup,Un.ariaAttrs,Lr),Pl=Tm(Cp.sketch({lazySink:h.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Un.persistent?{event:"doNotDismissYet"}:{},...Yo?{}:{fireRepositionEventInstead:{}},inlineBehaviours:yr([Ks("window-manager-inline-events",[er(Wy(),(su,as)=>{El(Qr.dialog,MS)})]),Ju.config({contextual:{lazyContext:()=>Mt.some(tp(io.fromDom(j.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:su=>xS(j,su.element).map(hr=>({bounds:wS(hr),optScrollEnv:Mt.some({currentScrollTop:hr.element.dom.scrollTop,scrollElmTop:Gu(hr.element).top})})).getOrThunk(()=>({bounds:Hp(),optScrollEnv:Mt.none()}))})]),isExtraPart:(su,as)=>WZ(as)}));Vr.set(Pl);const _h=()=>h.backstages.popup.shared.getSink().toOptional().bind(su=>{const as=xS(j,su.element),hr=15,Dr=as.map(vs=>wS(vs)).getOr(Hp()),Gs=tp(io.fromDom(j.getContentAreaContainer())),ga=dy(Gs,Dr);return Mt.some(ep(ga.x,ga.y,ga.width,ga.height-hr))});return Cp.showWithinBounds(Pl,qy(Qr.dialog),{anchor:On},_h),Ju.refresh(Pl),j.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Lr),Qr.instanceApi.setData(Sr),_s.focusIn(Qr.dialog),Qr.instanceApi};return Vt.open(go,wn)};return{open:yt,openUrl:vt,alert:(wn,On)=>{it.open(wn,On)},close:wn=>{wn.close()},confirm:(wn,On)=>{dt.open(wn,On)}}},xs=h=>{E$(h),RX(h),hre(h)};var wl=()=>{$v.add("silver",h=>{xs(h);let j=()=>Hp();const{dialogs:nt,popups:it,renderUI:dt}=cse(h,{getPopupSinkBounds:()=>j()}),yt=()=>{const Bt=dt();return xS(h,it.getMothership().element).each(Zt=>{j=()=>wS(Zt)}),Bt};CJ.register(h,it.backstage.shared);const vt=zo({editor:h,backstages:{popup:it.backstage,dialog:nt.backstage}}),St=Xl(),Dt=()=>aG(h,{backstage:it.backstage},it.getMothership(),St);return{renderUI:yt,getWindowManagerImpl:Nt(vt),getNotificationManagerImpl:Dt}})};wl()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});tinymce.Resource.add("ui/default/skin.css",`.tox{box-shadow:none;box-sizing:content-box;color:#222f3e;cursor:auto;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:16px;font-style:normal;font-weight:400;line-height:normal;-webkit-tap-highlight-color:transparent;-webkit-text-decoration:none;text-decoration:none;text-shadow:none;text-transform:none;vertical-align:initial;white-space:normal}.tox :not(svg):not(rect){box-sizing:inherit;color:inherit;cursor:inherit;direction:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;line-height:inherit;-webkit-tap-highlight-color:inherit;text-align:inherit;text-decoration:inherit;text-shadow:inherit;text-transform:inherit;vertical-align:inherit;white-space:inherit}.tox :not(svg):not(rect){background:0 0;border:0;box-shadow:none;float:none;height:auto;margin:0;max-width:none;outline:0;padding:0;position:static;width:auto}.tox:not([dir=rtl]){direction:ltr;text-align:left}.tox[dir=rtl]{direction:rtl;text-align:right}.tox-tinymce{border:2px solid #eee;border-radius:10px;box-shadow:none;box-sizing:border-box;display:flex;flex-direction:column;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;overflow:hidden;position:relative;visibility:inherit!important}.tox.tox-tinymce-inline{border:none;box-shadow:none;overflow:initial}.tox.tox-tinymce-inline .tox-editor-container{overflow:initial}.tox.tox-tinymce-inline .tox-editor-header{background-color:#fff;border:2px solid #eee;border-radius:10px;box-shadow:none;overflow:hidden}.tox-tinymce-aux{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;z-index:1300}.tox-tinymce :focus,.tox-tinymce-aux :focus{outline:0}button::-moz-focus-inner{border:0}.tox[dir=rtl] .tox-icon--flip svg{transform:rotateY(180deg)}.tox .accessibility-issue__header{align-items:center;display:flex;margin-bottom:4px}.tox .accessibility-issue__description{align-items:stretch;border-radius:6px;display:flex;justify-content:space-between}.tox .accessibility-issue__description>div{padding-bottom:4px}.tox .accessibility-issue__description>div>div{align-items:center;display:flex;margin-bottom:4px}.tox .accessibility-issue__description>div>div .tox-icon svg{display:block}.tox .accessibility-issue__repair{margin-top:16px}.tox .tox-dialog__body-content .accessibility-issue--info .accessibility-issue__description{background-color:rgba(0,101,216,.1);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--info .tox-form__group h2{color:#006ce7}.tox .tox-dialog__body-content .accessibility-issue--info .tox-icon svg{fill:#006ce7}.tox .tox-dialog__body-content .accessibility-issue--info a.tox-button--naked.tox-button--icon{background-color:#006ce7;color:#fff}.tox .tox-dialog__body-content .accessibility-issue--info a.tox-button--naked.tox-button--icon:focus,.tox .tox-dialog__body-content .accessibility-issue--info a.tox-button--naked.tox-button--icon:hover{background-color:#0060ce}.tox .tox-dialog__body-content .accessibility-issue--info a.tox-button--naked.tox-button--icon:active{background-color:#0054b4}.tox .tox-dialog__body-content .accessibility-issue--warn .accessibility-issue__description{background-color:rgba(255,165,0,.08);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--warn .tox-form__group h2{color:#8f5d00}.tox .tox-dialog__body-content .accessibility-issue--warn .tox-icon svg{fill:#8f5d00}.tox .tox-dialog__body-content .accessibility-issue--warn a.tox-button--naked.tox-button--icon{background-color:#ffe89d;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--warn a.tox-button--naked.tox-button--icon:focus,.tox .tox-dialog__body-content .accessibility-issue--warn a.tox-button--naked.tox-button--icon:hover{background-color:#f2d574;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--warn a.tox-button--naked.tox-button--icon:active{background-color:#e8c657;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--error .accessibility-issue__description{background-color:rgba(204,0,0,.1);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--error .tox-form__group h2{color:#c00}.tox .tox-dialog__body-content .accessibility-issue--error .tox-icon svg{fill:#c00}.tox .tox-dialog__body-content .accessibility-issue--error a.tox-button--naked.tox-button--icon{background-color:#f2bfbf;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--error a.tox-button--naked.tox-button--icon:focus,.tox .tox-dialog__body-content .accessibility-issue--error a.tox-button--naked.tox-button--icon:hover{background-color:#e9a4a4;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--error a.tox-button--naked.tox-button--icon:active{background-color:#ee9494;color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--success .accessibility-issue__description{background-color:rgba(120,171,70,.1);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--success .accessibility-issue__description>:last-child{display:none}.tox .tox-dialog__body-content .accessibility-issue--success .tox-form__group h2{color:#527530}.tox .tox-dialog__body-content .accessibility-issue--success .tox-icon svg{fill:#527530}.tox .tox-dialog__body-content .accessibility-issue__header .tox-form__group h1,.tox .tox-dialog__body-content .tox-form__group .accessibility-issue__description h2{font-size:14px;margin-top:0}.tox:not([dir=rtl]) .tox-dialog__body-content .accessibility-issue__header .tox-button{margin-left:4px}.tox:not([dir=rtl]) .tox-dialog__body-content .accessibility-issue__header>:nth-last-child(2){margin-left:auto}.tox:not([dir=rtl]) .tox-dialog__body-content .accessibility-issue__description{padding:4px 4px 4px 8px}.tox[dir=rtl] .tox-dialog__body-content .accessibility-issue__header .tox-button{margin-right:4px}.tox[dir=rtl] .tox-dialog__body-content .accessibility-issue__header>:nth-last-child(2){margin-right:auto}.tox[dir=rtl] .tox-dialog__body-content .accessibility-issue__description{padding:4px 8px 4px 4px}.tox .mce-codemirror{background:#fff;bottom:0;font-size:13px;left:0;position:absolute;right:0;top:0;z-index:1}.tox .mce-codemirror.tox-inline-codemirror{margin:8px;position:absolute}.tox .tox-advtemplate .tox-form__grid{flex:1}.tox .tox-advtemplate .tox-form__grid>div:first-child{display:flex;flex-direction:column;width:30%}.tox .tox-advtemplate .tox-form__grid>div:first-child>div:nth-child(2){flex-basis:0;flex-grow:1;overflow:auto}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-advtemplate .tox-form__grid>div:first-child{width:100%}}.tox .tox-advtemplate iframe{border-color:#eee;border-radius:10px;border-style:solid;border-width:1px;margin:0 10px}.tox .tox-anchorbar{display:flex;flex:0 0 auto}.tox .tox-bottom-anchorbar{display:flex;flex:0 0 auto}.tox .tox-bar{display:flex;flex:0 0 auto}.tox .tox-button{background-color:#006ce7;background-image:none;background-position:0 0;background-repeat:repeat;border-color:#006ce7;border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:14px;font-style:normal;font-weight:700;letter-spacing:normal;line-height:24px;margin:0;outline:0;padding:4px 16px;position:relative;text-align:center;-webkit-text-decoration:none;text-decoration:none;text-transform:none;white-space:nowrap}.tox .tox-button::before{border-radius:6px;bottom:-1px;box-shadow:inset 0 0 0 1px #fff,0 0 0 2px #006ce7;content:'';left:-1px;opacity:0;pointer-events:none;position:absolute;right:-1px;top:-1px}.tox .tox-button[disabled]{background-color:#006ce7;background-image:none;border-color:#006ce7;box-shadow:none;color:rgba(255,255,255,.5);cursor:not-allowed}.tox .tox-button:focus:not(:disabled){background-color:#0060ce;background-image:none;border-color:#0060ce;box-shadow:none;color:#fff}.tox .tox-button:focus:not(:disabled)::before{opacity:1}.tox .tox-button:hover:not(:disabled){background-color:#0060ce;background-image:none;border-color:#0060ce;box-shadow:none;color:#fff}.tox .tox-button:active:not(:disabled){background-color:#0054b4;background-image:none;border-color:#0054b4;box-shadow:none;color:#fff}.tox .tox-button.tox-button--enabled{background-color:#0054b4;background-image:none;border-color:#0054b4;box-shadow:none;color:#fff}.tox .tox-button.tox-button--enabled[disabled]{background-color:#0054b4;background-image:none;border-color:#0054b4;box-shadow:none;color:rgba(255,255,255,.5);cursor:not-allowed}.tox .tox-button.tox-button--enabled:focus:not(:disabled){background-color:#00489b;background-image:none;border-color:#00489b;box-shadow:none;color:#fff}.tox .tox-button.tox-button--enabled:hover:not(:disabled){background-color:#00489b;background-image:none;border-color:#00489b;box-shadow:none;color:#fff}.tox .tox-button.tox-button--enabled:active:not(:disabled){background-color:#003c81;background-image:none;border-color:#003c81;box-shadow:none;color:#fff}.tox .tox-button--icon-and-text,.tox .tox-button.tox-button--icon-and-text,.tox .tox-button.tox-button--secondary.tox-button--icon-and-text{display:flex;padding:5px 4px}.tox .tox-button--icon-and-text .tox-icon svg,.tox .tox-button.tox-button--icon-and-text .tox-icon svg,.tox .tox-button.tox-button--secondary.tox-button--icon-and-text .tox-icon svg{display:block;fill:currentColor}.tox .tox-button--secondary{background-color:#f0f0f0;background-image:none;background-position:0 0;background-repeat:repeat;border-color:#f0f0f0;border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;color:#222f3e;font-size:14px;font-style:normal;font-weight:700;letter-spacing:normal;outline:0;padding:4px 16px;-webkit-text-decoration:none;text-decoration:none;text-transform:none}.tox .tox-button--secondary[disabled]{background-color:#f0f0f0;background-image:none;border-color:#f0f0f0;box-shadow:none;color:rgba(34,47,62,.5)}.tox .tox-button--secondary:focus:not(:disabled){background-color:#e3e3e3;background-image:none;border-color:#e3e3e3;box-shadow:none;color:#222f3e}.tox .tox-button--secondary:hover:not(:disabled){background-color:#e3e3e3;background-image:none;border-color:#e3e3e3;box-shadow:none;color:#222f3e}.tox .tox-button--secondary:active:not(:disabled){background-color:#d6d6d6;background-image:none;border-color:#d6d6d6;box-shadow:none;color:#222f3e}.tox .tox-button--secondary.tox-button--enabled{background-color:#a8c8ed;background-image:none;border-color:#a8c8ed;box-shadow:none;color:#222f3e}.tox .tox-button--secondary.tox-button--enabled[disabled]{background-color:#a8c8ed;background-image:none;border-color:#a8c8ed;box-shadow:none;color:rgba(34,47,62,.5)}.tox .tox-button--secondary.tox-button--enabled:focus:not(:disabled){background-color:#93bbe9;background-image:none;border-color:#93bbe9;box-shadow:none;color:#222f3e}.tox .tox-button--secondary.tox-button--enabled:hover:not(:disabled){background-color:#93bbe9;background-image:none;border-color:#93bbe9;box-shadow:none;color:#222f3e}.tox .tox-button--secondary.tox-button--enabled:active:not(:disabled){background-color:#7daee4;background-image:none;border-color:#7daee4;box-shadow:none;color:#222f3e}.tox .tox-button--icon,.tox .tox-button.tox-button--icon,.tox .tox-button.tox-button--secondary.tox-button--icon{padding:4px}.tox .tox-button--icon .tox-icon svg,.tox .tox-button.tox-button--icon .tox-icon svg,.tox .tox-button.tox-button--secondary.tox-button--icon .tox-icon svg{display:block;fill:currentColor}.tox .tox-button-link{background:0;border:none;box-sizing:border-box;cursor:pointer;display:inline-block;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:16px;font-weight:400;line-height:1.3;margin:0;padding:0;white-space:nowrap}.tox .tox-button-link--sm{font-size:14px}.tox .tox-button--naked{background-color:transparent;border-color:transparent;box-shadow:unset;color:#222f3e}.tox .tox-button--naked[disabled]{background-color:rgba(34,47,62,.12);border-color:transparent;box-shadow:unset;color:rgba(34,47,62,.5)}.tox .tox-button--naked:hover:not(:disabled){background-color:rgba(34,47,62,.12);border-color:transparent;box-shadow:unset;color:#222f3e}.tox .tox-button--naked:focus:not(:disabled){background-color:rgba(34,47,62,.12);border-color:transparent;box-shadow:unset;color:#222f3e}.tox .tox-button--naked:active:not(:disabled){background-color:rgba(34,47,62,.18);border-color:transparent;box-shadow:unset;color:#222f3e}.tox .tox-button--naked .tox-icon svg{fill:currentColor}.tox .tox-button--naked.tox-button--icon:hover:not(:disabled){color:#222f3e}.tox .tox-checkbox{align-items:center;border-radius:6px;cursor:pointer;display:flex;height:36px;min-width:36px}.tox .tox-checkbox__input{height:1px;overflow:hidden;position:absolute;top:auto;width:1px}.tox .tox-checkbox__icons{align-items:center;border-radius:6px;box-shadow:0 0 0 2px transparent;box-sizing:content-box;display:flex;height:24px;justify-content:center;padding:calc(4px - 1px);width:24px}.tox .tox-checkbox__icons .tox-checkbox-icon__unchecked svg{display:block;fill:rgba(34,47,62,0.3)}@media (forced-colors:active){.tox .tox-checkbox__icons .tox-checkbox-icon__unchecked svg{fill:currentColor!important}}.tox .tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{display:none;fill:#006ce7}.tox .tox-checkbox__icons .tox-checkbox-icon__checked svg{display:none;fill:#006ce7}.tox .tox-checkbox--disabled{color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__checked svg{fill:rgba(34,47,62,0.5)}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__unchecked svg{fill:rgba(34,47,62,0.5)}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{fill:rgba(34,47,62,0.5)}.tox input.tox-checkbox__input:checked+.tox-checkbox__icons .tox-checkbox-icon__unchecked svg{display:none}.tox input.tox-checkbox__input:checked+.tox-checkbox__icons .tox-checkbox-icon__checked svg{display:block}.tox input.tox-checkbox__input:indeterminate+.tox-checkbox__icons .tox-checkbox-icon__unchecked svg{display:none}.tox input.tox-checkbox__input:indeterminate+.tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{display:block}.tox input.tox-checkbox__input:focus+.tox-checkbox__icons{border-radius:6px;box-shadow:inset 0 0 0 1px #006ce7;padding:calc(4px - 1px)}.tox:not([dir=rtl]) .tox-checkbox__label{margin-left:4px}.tox:not([dir=rtl]) .tox-checkbox__input{left:-10000px}.tox:not([dir=rtl]) .tox-bar .tox-checkbox{margin-left:4px}.tox[dir=rtl] .tox-checkbox__label{margin-right:4px}.tox[dir=rtl] .tox-checkbox__input{right:-10000px}.tox[dir=rtl] .tox-bar .tox-checkbox{margin-right:4px}.tox .tox-collection--toolbar .tox-collection__group{display:flex;padding:0}.tox .tox-collection--grid .tox-collection__group{display:flex;flex-wrap:wrap;max-height:208px;overflow-x:hidden;overflow-y:auto;padding:0}.tox .tox-collection--list .tox-collection__group{border-bottom-width:0;border-color:#e3e3e3;border-left-width:0;border-right-width:0;border-style:solid;border-top-width:1px;padding:4px 0}.tox .tox-collection--list .tox-collection__group:first-child{border-top-width:0}.tox .tox-collection__group-heading{background-color:#fcfcfc;color:rgba(34,47,62,.7);cursor:default;font-size:12px;font-style:normal;font-weight:400;margin-bottom:4px;margin-top:-4px;padding:4px 8px;text-transform:none;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.tox .tox-collection__item{align-items:center;border-radius:3px;color:#222f3e;display:flex;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.tox .tox-collection--list .tox-collection__item{padding:4px 8px}.tox .tox-collection--toolbar .tox-collection__item{border-radius:3px;padding:4px}.tox .tox-collection--grid .tox-collection__item{border-radius:3px;padding:4px}.tox .tox-collection--list .tox-collection__item--enabled:not(.tox-collection__item--state-disabled){background-color:#fff;color:#222f3e}.tox .tox-collection--list .tox-collection__item--active:not(.tox-collection__item--state-disabled){background-color:#006ce7;color:#fff}@media (forced-colors:active){.tox .tox-collection--list .tox-collection__item--active:not(.tox-collection__item--state-disabled){border:solid 1px}}.tox .tox-collection--grid .tox-collection__item--enabled:not(.tox-collection__item--state-disabled){background-color:#a6ccf7;color:#222f3e}.tox .tox-collection--grid .tox-collection__item--active:not(.tox-collection__item--state-disabled){background-color:#f0f0f0;color:#222f3e;position:relative;z-index:1}.tox .tox-collection--grid .tox-collection__item--active:not(.tox-collection__item--state-disabled):focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7 inset;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-collection--grid .tox-collection__item--active:not(.tox-collection__item--state-disabled):focus::after{border:2px solid highlight}}.tox .tox-collection--toolbar .tox-collection__item--enabled:not(.tox-collection__item--state-disabled){background-color:#a6ccf7;color:#222f3e}@media (forced-colors:active){.tox .tox-collection--toolbar .tox-collection__item--enabled:not(.tox-collection__item--state-disabled){border-radius:3px;outline:solid 1px}}.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled){color:#222f3e;background-color:#fff;position:relative}.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled):hover{background-color:#f0f0f0;color:#222f3e}.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled):focus{background-color:#f0f0f0;color:#222f3e}.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled):focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled):focus::after{border:2px solid highlight}}@media (forced-colors:active){.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled):hover{border-radius:3px;outline:solid 1px}}.tox .tox-collection__item-checkmark,.tox .tox-collection__item-icon{align-items:center;display:flex;height:24px;justify-content:center;width:24px}.tox .tox-collection__item-checkmark svg,.tox .tox-collection__item-icon svg{fill:currentColor}.tox .tox-collection--toolbar-lg .tox-collection__item-icon{height:48px;width:48px}.tox .tox-collection__item-label{color:currentColor;display:inline-block;flex:1;font-size:14px;font-style:normal;font-weight:400;line-height:24px;max-width:100%;text-transform:none;word-break:break-all}.tox .tox-collection__item-accessory{color:currentColor;display:inline-block;font-size:14px;height:24px;line-height:24px;text-transform:none}.tox .tox-collection__item-caret{align-items:center;display:flex;min-height:24px}.tox .tox-collection__item-caret::after{content:'';font-size:0;min-height:inherit}.tox .tox-collection__item-caret svg{fill:currentColor}.tox .tox-collection__item--state-disabled{background-color:transparent;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-collection__item--state-disabled .tox-collection__item-caret svg{fill:rgba(34,47,62,0.5)}.tox .tox-collection--list .tox-collection__item:not(.tox-collection__item--enabled) .tox-collection__item-checkmark svg{display:none}.tox .tox-collection--list .tox-collection__item:not(.tox-collection__item--enabled) .tox-collection__item-accessory+.tox-collection__item-checkmark{display:none}.tox .tox-collection--horizontal{background-color:#fff;border:1px solid #e3e3e3;border-radius:6px;box-shadow:0 0 2px 0 rgba(34,47,62,.2),0 4px 8px 0 rgba(34,47,62,.15);display:flex;flex:0 0 auto;flex-shrink:0;flex-wrap:nowrap;margin-bottom:0;overflow-x:auto;padding:0}.tox .tox-collection--horizontal .tox-collection__group{align-items:center;display:flex;flex-wrap:nowrap;margin:0;padding:0 4px}.tox .tox-collection--horizontal .tox-collection__item{height:28px;margin:6px 1px 5px 0;padding:0 4px}.tox .tox-collection--horizontal .tox-collection__item-label{white-space:nowrap}.tox .tox-collection--horizontal .tox-collection__item-caret{margin-left:4px}.tox .tox-collection__item-container{display:flex}.tox .tox-collection__item-container--row{align-items:center;flex:1 1 auto;flex-direction:row}.tox .tox-collection__item-container--row.tox-collection__item-container--align-left{margin-right:auto}.tox .tox-collection__item-container--row.tox-collection__item-container--align-right{justify-content:flex-end;margin-left:auto}.tox .tox-collection__item-container--row.tox-collection__item-container--valign-top{align-items:flex-start;margin-bottom:auto}.tox .tox-collection__item-container--row.tox-collection__item-container--valign-middle{align-items:center}.tox .tox-collection__item-container--row.tox-collection__item-container--valign-bottom{align-items:flex-end;margin-top:auto}.tox .tox-collection__item-container--column{align-self:center;flex:1 1 auto;flex-direction:column}.tox .tox-collection__item-container--column.tox-collection__item-container--align-left{align-items:flex-start}.tox .tox-collection__item-container--column.tox-collection__item-container--align-right{align-items:flex-end}.tox .tox-collection__item-container--column.tox-collection__item-container--valign-top{align-self:flex-start}.tox .tox-collection__item-container--column.tox-collection__item-container--valign-middle{align-self:center}.tox .tox-collection__item-container--column.tox-collection__item-container--valign-bottom{align-self:flex-end}.tox:not([dir=rtl]) .tox-collection--horizontal .tox-collection__group:not(:last-of-type){border-right:1px solid transparent}.tox:not([dir=rtl]) .tox-collection--list .tox-collection__item>:not(:first-child){margin-left:8px}.tox:not([dir=rtl]) .tox-collection--list .tox-collection__item>.tox-collection__item-label:first-child{margin-left:4px}.tox:not([dir=rtl]) .tox-collection__item-accessory{margin-left:16px;text-align:right}.tox:not([dir=rtl]) .tox-collection .tox-collection__item-caret{margin-left:16px}.tox[dir=rtl] .tox-collection--horizontal .tox-collection__group:not(:last-of-type){border-left:1px solid transparent}.tox[dir=rtl] .tox-collection--list .tox-collection__item>:not(:first-child){margin-right:8px}.tox[dir=rtl] .tox-collection--list .tox-collection__item>.tox-collection__item-label:first-child{margin-right:4px}.tox[dir=rtl] .tox-collection__item-accessory{margin-right:16px;text-align:left}.tox[dir=rtl] .tox-collection .tox-collection__item-caret{margin-right:16px;transform:rotateY(180deg)}.tox[dir=rtl] .tox-collection--horizontal .tox-collection__item-caret{margin-right:4px}@media (forced-colors:active){.tox .tox-hue-slider,.tox .tox-rgb-form .tox-rgba-preview{background-color:currentColor!important;border:1px solid highlight!important;forced-color-adjust:none}}.tox .tox-color-picker-container{display:flex;flex-direction:row;height:225px;margin:0}.tox .tox-sv-palette{box-sizing:border-box;display:flex;height:100%}.tox .tox-sv-palette-spectrum{height:100%}.tox .tox-sv-palette,.tox .tox-sv-palette-spectrum{width:225px}.tox .tox-sv-palette-thumb{background:0 0;border:1px solid #000;border-radius:50%;box-sizing:content-box;height:12px;position:absolute;width:12px}.tox .tox-sv-palette-inner-thumb{border:1px solid #fff;border-radius:50%;height:10px;position:absolute;width:10px}.tox .tox-hue-slider{box-sizing:border-box;height:100%;width:25px}.tox .tox-hue-slider-spectrum{background:linear-gradient(to bottom,red,#ff0080,#f0f,#8000ff,#00f,#0080ff,#0ff,#00ff80,#0f0,#80ff00,#ff0,#ff8000,red);height:100%;width:100%}.tox .tox-hue-slider,.tox .tox-hue-slider-spectrum{width:20px}.tox .tox-hue-slider-spectrum:focus,.tox .tox-sv-palette-spectrum:focus{outline:#08f solid}.tox .tox-hue-slider-thumb{background:#fff;border:1px solid #000;box-sizing:content-box;height:4px;width:100%}.tox .tox-rgb-form{display:flex;flex-direction:column;justify-content:space-between}.tox .tox-rgb-form div{align-items:center;display:flex;justify-content:space-between;margin-bottom:5px;width:inherit}.tox .tox-rgb-form input{min-width:6em}.tox .tox-rgb-form input.tox-invalid{border:1px solid red!important;box-shadow:0 0 0 1px red}.tox .tox-rgb-container{position:relative}.tox .tox-rgb-form .tox-invalid-icon{align-content:center;align-items:center;display:none;height:100%;position:absolute;right:0;top:0}.tox .tox-rgb-form .tox-invalid-icon .tox-control-wrap__status-icon-invalid{margin:0}.tox .tox-rgb-warning-note{background-color:#f5cccc;border:1px solid #f0b3b3;border-radius:3px;color:#77181f;padding:3px}.tox input.tox-invalid+.tox-invalid-icon{display:flex}.tox .tox-rgb-form .tox-rgba-preview{border:1px solid #000;flex-grow:2;margin-bottom:0}.tox:not([dir=rtl]) .tox-sv-palette{margin-right:15px}.tox:not([dir=rtl]) .tox-hue-slider{margin-right:15px}.tox:not([dir=rtl]) .tox-hue-slider-thumb{margin-left:-1px}.tox:not([dir=rtl]) .tox-rgb-form label{margin-right:.5em}.tox[dir=rtl] .tox-sv-palette{margin-left:15px}.tox[dir=rtl] .tox-hue-slider{margin-left:15px}.tox[dir=rtl] .tox-hue-slider-thumb{margin-right:-1px}.tox[dir=rtl] .tox-rgb-form label{margin-left:.5em}.tox .tox-toolbar .tox-swatches,.tox .tox-toolbar__overflow .tox-swatches,.tox .tox-toolbar__primary .tox-swatches{margin:5px 0 6px 11px}.tox .tox-collection--list .tox-collection__group .tox-swatches-menu{border:0;margin:-4px -4px}.tox .tox-swatches__row{display:flex}@media (forced-colors:active){.tox .tox-swatches__row{forced-color-adjust:none}}.tox .tox-swatch{height:30px;transition:transform .15s,box-shadow .15s;width:30px}.tox .tox-swatch:focus,.tox .tox-swatch:hover{box-shadow:0 0 0 1px rgba(127,127,127,.3) inset;transform:scale(.8)}.tox .tox-swatch--remove{align-items:center;display:flex;justify-content:center}.tox .tox-swatch--remove svg path{stroke:#e74c3c}.tox .tox-swatches__picker-btn{align-items:center;background-color:transparent;border:0;cursor:pointer;display:flex;height:30px;justify-content:center;outline:0;padding:0;width:30px}.tox .tox-swatches__picker-btn svg{fill:#222f3e;height:24px;width:24px}.tox .tox-swatches__picker-btn:hover{background:#f0f0f0}.tox div.tox-swatch:not(.tox-swatch--remove) svg{display:none;fill:#222f3e;height:24px;margin:calc((30px - 24px)/ 2) calc((30px - 24px)/ 2);width:24px}.tox div.tox-swatch:not(.tox-swatch--remove) svg path{fill:#fff;paint-order:stroke;stroke:#222f3e;stroke-width:2px}.tox div.tox-swatch:not(.tox-swatch--remove).tox-collection__item--enabled svg{display:block}.tox:not([dir=rtl]) .tox-swatches__picker-btn{margin-left:auto}.tox[dir=rtl] .tox-swatches__picker-btn{margin-right:auto}.tox .tox-conversations{display:flex;flex-direction:column;position:relative;height:100%;min-width:300px;max-width:300px;width:300px}.tox .tox-conversations__header{align-items:center;display:flex;justify-content:space-between;box-shadow:0 4px 8px 0 rgba(34,47,62,.1);padding:8px 12px;background:#fff}.tox .tox-conversations__title{font-size:20px;font-weight:400;padding:8px 0 8px 0;color:#222f3e;line-height:28px}.tox .tox-comment{background:#fff;border:1px solid #eee;border-radius:6px;padding:8px 8px 16px 8px;position:relative}.tox .tox-comment:hover{box-shadow:0 4px 8px 0 rgba(34,47,62,.1)}.tox .tox-comment.tox-comment--selected{background-color:#fff2c9;border:1px solid #ffcf30;box-shadow:0 4px 8px 0 rgba(34,47,62,.1)}.tox .tox-comment.tox-comment--selected:focus{border:2px solid #006ce7;margin:-1px}.tox .tox-comment.tox-comment--selected:focus:not(:first-child){margin-top:7px}.tox .tox-comment.tox-comment--selected .tox-comment__single{margin-bottom:12px}.tox .tox-comment.tox-comment--selected .tox-comment__single:focus{position:relative}.tox .tox-comment.tox-comment--selected .tox-comment__single:focus::after{top:-9px;pointer-events:none;position:absolute;content:"";display:block;bottom:-9px;left:-9px;right:-9px;border-radius:6px;border:2px solid #006ce7}.tox .tox-comment__header{align-items:center;color:#222f3e;display:flex;justify-content:space-between}.tox .tox-comment__date{color:#222f3e;font-size:12px;line-height:18px}.tox .tox-comment__body{color:#222f3e;font-size:14px;font-style:normal;font-weight:400;line-height:1.3;margin-top:8px;position:relative;text-transform:initial;transition:max-height .5s cubic-bezier(0, 1, 0, 1);white-space:pre-wrap}.tox .tox-comment__body.tox-comment__body--expanded{max-height:100em;transition:max-height 1s ease-in-out}.tox .tox-comment__body.tox-comment__body--pending{transition:max-height 0s}.tox .tox-comment__body p{margin:0}.tox .tox-comment__body textarea{resize:none;white-space:normal;width:100%}.tox .tox-comment__loading-text{align-items:center;color:#222f3e;display:flex;flex-direction:column;position:relative}.tox .tox-comment__loading-text>div{padding-bottom:16px}.tox .tox-comment__overlaytext{bottom:0;flex-direction:column;font-size:14px;left:0;padding:1em;position:absolute;right:0;top:0;z-index:10}.tox .tox-comment__overlaytext p{background-color:#fff;box-shadow:0 0 8px 8px #fff;color:#222f3e;text-align:center}.tox .tox-comment__overlaytext div:nth-of-type(2){font-size:.8em}.tox .tox-comment__expander{padding-top:8px}.tox .tox-comment__expander p{color:rgba(34,47,62,.7);font-size:14px;font-style:normal}.tox .tox-comment__expander p:focus{font-weight:700}.tox .tox-comment__buttonspacing{padding-top:16px;text-align:center}.tox .tox-tbtn.tox-comment__mention-btn{display:flex;width:34px;height:34px;padding:5px;justify-content:center;align-items:center;margin:0;background-color:transparent}.tox .tox-comment-thread{background:#fff;position:relative;border-radius:6px;background-color:transparent}.tox .tox-comment-thread>:not(:first-child){margin-top:8px}.tox .tox-comment-thread__overlay::after{background:#fff;bottom:0;content:"";display:flex;left:0;opacity:.9;position:absolute;right:0;top:0;z-index:5}.tox .tox-comment__reply{display:flex;flex-shrink:0;flex-wrap:wrap;justify-content:flex-end;margin-top:8px}.tox .tox-comment__reply>:first-child{margin-bottom:8px;width:100%}.tox .tox-comment__edit{display:flex;flex-wrap:wrap;justify-content:flex-end;margin-top:8px}.tox .tox-comment__gradient::after{background:linear-gradient(rgba(255,255,255,0),#fff);bottom:0;content:"";display:block;height:5em;margin-top:-40px;position:absolute;width:100%}.tox .tox-comment__overlay{background:#fff;bottom:0;display:flex;flex-direction:column;flex-grow:1;left:0;opacity:.9;position:absolute;right:0;text-align:center;top:0;z-index:5}.tox .tox-comment__busy-spinner{align-items:center;background-color:#fff;bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:20}.tox .tox-comment__scroll{display:flex;flex-direction:column;flex-shrink:1;overflow:auto;padding:12px;scroll-behavior:smooth}.tox .tox-comment--disappearing{transition:opacity .5s ease}.tox .tox-comment[data-transitioning-destination=deleting]{opacity:0}.tox .tox-skeleton .tox-skeleton__line{height:16px;width:100%;background:linear-gradient(to right,rgba(240,240,240,.5) 8%,rgba(240,240,240,.7) 18%,rgba(240,240,240,.5) 33%);animation:wave 2s infinite ease-out}.tox .tox-skeleton .tox-skeleton__circle{height:36px;width:36px;margin-right:8px;border-radius:100%;background:linear-gradient(to right,rgba(240,240,240,.5) 8%,rgba(240,240,240,.7) 18%,rgba(240,240,240,.5) 33%);animation:wave 2s infinite ease-out}@keyframes wave{0%{background-position:-268px 0}100%{background-position:268px 0}}.tox .tox-ring-loader{width:10px;height:10px;border:1px solid #fff;border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation 1s linear infinite}@keyframes rotation{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.tox:not([dir=rtl]) .tox-comment__edit{margin-left:8px}.tox:not([dir=rtl]) .tox-comment__buttonspacing>:last-child,.tox:not([dir=rtl]) .tox-comment__edit>:last-child,.tox:not([dir=rtl]) .tox-comment__reply>:last-child{margin-left:8px}.tox[dir=rtl] .tox-comment__edit{margin-right:8px}.tox[dir=rtl] .tox-comment__buttonspacing>:last-child,.tox[dir=rtl] .tox-comment__edit>:last-child,.tox[dir=rtl] .tox-comment__reply>:last-child{margin-right:8px}.tox .tox-user{align-items:center;display:flex}.tox .tox-user__avatar svg{fill:rgba(34,47,62,0.7)}.tox .tox-user__avatar img{border-radius:50%;height:36px;object-fit:cover;vertical-align:middle;width:36px}.tox .tox-user__name{color:#222f3e;font-size:14px;font-style:normal;font-weight:700;line-height:18px;text-transform:none}.tox:not([dir=rtl]) .tox-user__avatar img,.tox:not([dir=rtl]) .tox-user__avatar svg{margin-right:8px}.tox:not([dir=rtl]) .tox-user__avatar+.tox-user__name{margin-left:8px}.tox[dir=rtl] .tox-user__avatar img,.tox[dir=rtl] .tox-user__avatar svg{margin-left:8px}.tox[dir=rtl] .tox-user__avatar+.tox-user__name{margin-right:8px}.tox .tox-dialog-wrap{align-items:center;bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1100}.tox .tox-dialog-wrap__backdrop{background-color:rgba(255,255,255,.75);bottom:0;left:0;position:absolute;right:0;top:0;z-index:1}.tox .tox-dialog-wrap__backdrop--opaque{background-color:#fff}.tox .tox-dialog{background-color:#fff;border-color:#eee;border-radius:10px;border-style:solid;border-width:0;box-shadow:0 16px 16px -10px rgba(34,47,62,.15),0 0 40px 1px rgba(34,47,62,.15);display:flex;flex-direction:column;max-height:100%;max-width:480px;overflow:hidden;position:relative;width:95vw;z-index:2}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-dialog{align-self:flex-start;margin:8px auto;max-height:calc(100vh - 8px * 2);width:calc(100vw - 16px)}}.tox .tox-dialog-inline{z-index:1100}.tox .tox-dialog__header{align-items:center;background-color:#fff;border-bottom:none;color:#222f3e;display:flex;font-size:16px;justify-content:space-between;padding:8px 16px 0 16px;position:relative}.tox .tox-dialog__header .tox-button{z-index:1}.tox .tox-dialog__draghandle{cursor:grab;height:100%;left:0;position:absolute;top:0;width:100%}.tox .tox-dialog__draghandle:active{cursor:grabbing}.tox .tox-dialog__dismiss{margin-left:auto}.tox .tox-dialog__title{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:20px;font-style:normal;font-weight:400;line-height:1.3;margin:0;text-transform:none}.tox .tox-dialog__body{color:#222f3e;display:flex;flex:1;font-size:16px;font-style:normal;font-weight:400;line-height:1.3;min-width:0;text-align:left;text-transform:none}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-dialog__body{flex-direction:column}}.tox .tox-dialog__body-nav{align-items:flex-start;display:flex;flex-direction:column;flex-shrink:0;padding:16px 16px}@media only screen and (min-width:768px){.tox .tox-dialog__body-nav{max-width:11em}}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-dialog__body-nav{flex-direction:row;-webkit-overflow-scrolling:touch;overflow-x:auto;padding-bottom:0}}.tox .tox-dialog__body-nav-item{border-bottom:2px solid transparent;color:rgba(34,47,62,.7);display:inline-block;flex-shrink:0;font-size:14px;line-height:1.3;margin-bottom:8px;max-width:13em;-webkit-text-decoration:none;text-decoration:none}.tox .tox-dialog__body-nav-item:focus{background-color:rgba(0,108,231,.1)}.tox .tox-dialog__body-nav-item--active{border-bottom:2px solid #006ce7;color:#006ce7}@media (forced-colors:active){.tox .tox-dialog__body-nav-item--active{border-bottom:2px solid highlight;color:highlight}}.tox .tox-dialog__body-content{box-sizing:border-box;display:flex;flex:1;flex-direction:column;max-height:min(650px,calc(100vh - 110px));overflow:auto;-webkit-overflow-scrolling:touch;padding:16px 16px}.tox .tox-dialog__body-content>*{margin-bottom:0;margin-top:16px}.tox .tox-dialog__body-content>:first-child{margin-top:0}.tox .tox-dialog__body-content>:last-child{margin-bottom:0}.tox .tox-dialog__body-content>:only-child{margin-bottom:0;margin-top:0}.tox .tox-dialog__body-content a{color:#006ce7;cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-dialog__body-content a:focus,.tox .tox-dialog__body-content a:hover{color:#003c81;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-dialog__body-content a:focus-visible{border-radius:1px;outline:2px solid #006ce7;outline-offset:2px}.tox .tox-dialog__body-content a:active{color:#00244e;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-dialog__body-content svg{fill:#222f3e}.tox .tox-dialog__body-content strong{font-weight:700}.tox .tox-dialog__body-content ul{list-style-type:disc}.tox .tox-dialog__body-content dd,.tox .tox-dialog__body-content ol,.tox .tox-dialog__body-content ul{padding-inline-start:2.5rem}.tox .tox-dialog__body-content dl,.tox .tox-dialog__body-content ol,.tox .tox-dialog__body-content ul{margin-bottom:16px}.tox .tox-dialog__body-content dd,.tox .tox-dialog__body-content dl,.tox .tox-dialog__body-content dt,.tox .tox-dialog__body-content ol,.tox .tox-dialog__body-content ul{display:block;margin-inline-end:0;margin-inline-start:0}.tox .tox-dialog__body-content .tox-form__group h1{color:#222f3e;font-size:20px;font-style:normal;font-weight:700;letter-spacing:normal;margin-bottom:16px;margin-top:2rem;text-transform:none}.tox .tox-dialog__body-content .tox-form__group h2{color:#222f3e;font-size:16px;font-style:normal;font-weight:700;letter-spacing:normal;margin-bottom:16px;margin-top:2rem;text-transform:none}.tox .tox-dialog__body-content .tox-form__group p{margin-bottom:16px}.tox .tox-dialog__body-content .tox-form__group h1:first-child,.tox .tox-dialog__body-content .tox-form__group h2:first-child,.tox .tox-dialog__body-content .tox-form__group p:first-child{margin-top:0}.tox .tox-dialog__body-content .tox-form__group h1:last-child,.tox .tox-dialog__body-content .tox-form__group h2:last-child,.tox .tox-dialog__body-content .tox-form__group p:last-child{margin-bottom:0}.tox .tox-dialog__body-content .tox-form__group h1:only-child,.tox .tox-dialog__body-content .tox-form__group h2:only-child,.tox .tox-dialog__body-content .tox-form__group p:only-child{margin-bottom:0;margin-top:0}.tox .tox-dialog__body-content .tox-form__group .tox-label.tox-label--center{text-align:center}.tox .tox-dialog__body-content .tox-form__group .tox-label.tox-label--end{text-align:end}.tox .tox-dialog--width-lg{height:650px;max-width:1200px}.tox .tox-dialog--fullscreen{height:100%;max-width:100%}.tox .tox-dialog--fullscreen .tox-dialog__body-content{max-height:100%}.tox .tox-dialog--width-md{max-width:800px}.tox .tox-dialog--width-md .tox-dialog__body-content{overflow:auto}.tox .tox-dialog__body-content--centered{text-align:center}.tox .tox-dialog__footer{align-items:center;background-color:#fff;border-top:none;display:flex;justify-content:space-between;padding:8px 16px}.tox .tox-dialog__footer-end,.tox .tox-dialog__footer-start{display:flex}.tox .tox-dialog__busy-spinner{align-items:center;background-color:rgba(255,255,255,.75);bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:3}.tox .tox-dialog__table{border-collapse:collapse;width:100%}.tox .tox-dialog__table thead th{font-weight:700;padding-bottom:8px}.tox .tox-dialog__table thead th:first-child{padding-right:8px}.tox .tox-dialog__table tbody tr{border-bottom:1px solid #626262}.tox .tox-dialog__table tbody tr:last-child{border-bottom:none}.tox .tox-dialog__table td{padding-bottom:8px;padding-top:8px}.tox .tox-dialog__table td:first-child{padding-right:8px}.tox .tox-dialog__iframe{min-height:200px}.tox .tox-dialog__iframe.tox-dialog__iframe--opaque{background:#fff}.tox .tox-navobj-bordered{position:relative}.tox .tox-navobj-bordered::before{border:1px solid #eee;border-radius:6px;content:'';inset:0;opacity:1;pointer-events:none;position:absolute;z-index:1}.tox .tox-navobj-bordered iframe{border-radius:6px}.tox .tox-navobj-bordered-focus.tox-navobj-bordered::before{border-color:#006ce7;box-shadow:0 0 0 1px #006ce7;outline:0}.tox .tox-dialog__popups{position:absolute;width:100%;z-index:1100}.tox .tox-dialog__body-iframe{display:flex;flex:1;flex-direction:column}.tox .tox-dialog__body-iframe .tox-navobj{display:flex;flex:1}.tox .tox-dialog__body-iframe .tox-navobj :nth-child(2){flex:1;height:100%}.tox .tox-dialog-dock-fadeout{opacity:0;visibility:hidden}.tox .tox-dialog-dock-fadein{opacity:1;visibility:visible}.tox .tox-dialog-dock-transition{transition:visibility 0s linear .3s,opacity .3s ease}.tox .tox-dialog-dock-transition.tox-dialog-dock-fadein{transition-delay:0s}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox:not([dir=rtl]) .tox-dialog__body-nav{margin-right:0}}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox:not([dir=rtl]) .tox-dialog__body-nav-item:not(:first-child){margin-left:8px}}.tox:not([dir=rtl]) .tox-dialog__footer .tox-dialog__footer-end>*,.tox:not([dir=rtl]) .tox-dialog__footer .tox-dialog__footer-start>*{margin-left:8px}.tox[dir=rtl] .tox-dialog__body{text-align:right}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox[dir=rtl] .tox-dialog__body-nav{margin-left:0}}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox[dir=rtl] .tox-dialog__body-nav-item:not(:first-child){margin-right:8px}}.tox[dir=rtl] .tox-dialog__footer .tox-dialog__footer-end>*,.tox[dir=rtl] .tox-dialog__footer .tox-dialog__footer-start>*{margin-right:8px}body.tox-dialog__disable-scroll{overflow:hidden}.tox .tox-dropzone-container{display:flex;flex:1}.tox .tox-dropzone{align-items:center;background:#fff;border:2px dashed #eee;box-sizing:border-box;display:flex;flex-direction:column;flex-grow:1;justify-content:center;min-height:100px;padding:10px}.tox .tox-dropzone p{color:rgba(34,47,62,.7);margin:0 0 16px 0}.tox .tox-edit-area{display:flex;flex:1;overflow:hidden;position:relative}.tox .tox-edit-area::before{border:2px solid #006ce7;border-radius:4px;content:'';inset:0;opacity:0;pointer-events:none;position:absolute;transition:opacity .15s;z-index:1}@media (forced-colors:active){.tox .tox-edit-area::before{border:2px solid highlight}}.tox .tox-edit-area__iframe{background-color:#fff;border:0;box-sizing:border-box;flex:1;height:100%;position:absolute;width:100%}.tox.tox-edit-focus .tox-edit-area::before{opacity:1}.tox.tox-inline-edit-area{border:1px dotted #eee}.tox .tox-editor-container{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.tox .tox-editor-header{display:grid;grid-template-columns:1fr min-content;z-index:2}.tox:not(.tox-tinymce-inline) .tox-editor-header{background-color:#fff;border-bottom:none;box-shadow:0 2px 2px -2px rgba(34,47,62,.1),0 8px 8px -4px rgba(34,47,62,.07);padding:4px 0}.tox:not(.tox-tinymce-inline) .tox-editor-header:not(.tox-editor-dock-transition){transition:box-shadow .5s}.tox:not(.tox-tinymce-inline).tox-tinymce--toolbar-bottom .tox-editor-header{border-top:1px solid #e3e3e3;box-shadow:none}.tox:not(.tox-tinymce-inline).tox-tinymce--toolbar-sticky-on .tox-editor-header{background-color:#fff;box-shadow:0 2px 2px -2px rgba(34,47,62,.2),0 8px 8px -4px rgba(34,47,62,.15);padding:4px 0}.tox:not(.tox-tinymce-inline).tox-tinymce--toolbar-sticky-on.tox-tinymce--toolbar-bottom .tox-editor-header{box-shadow:0 2px 2px -2px rgba(34,47,62,.2),0 8px 8px -4px rgba(34,47,62,.15)}.tox.tox:not(.tox-tinymce-inline) .tox-editor-header.tox-editor-header--empty{background:0 0;border:none;box-shadow:none;padding:0}.tox-editor-dock-fadeout{opacity:0;visibility:hidden}.tox-editor-dock-fadein{opacity:1;visibility:visible}.tox-editor-dock-transition{transition:visibility 0s linear .25s,opacity .25s ease}.tox-editor-dock-transition.tox-editor-dock-fadein{transition-delay:0s}.tox .tox-control-wrap{flex:1;position:relative}.tox .tox-control-wrap:not(.tox-control-wrap--status-invalid) .tox-control-wrap__status-icon-invalid,.tox .tox-control-wrap:not(.tox-control-wrap--status-unknown) .tox-control-wrap__status-icon-unknown,.tox .tox-control-wrap:not(.tox-control-wrap--status-valid) .tox-control-wrap__status-icon-valid{display:none}.tox .tox-control-wrap svg{display:block}.tox .tox-control-wrap__status-icon-wrap{position:absolute;top:50%;transform:translateY(-50%)}.tox .tox-control-wrap__status-icon-invalid svg{fill:#c00}.tox .tox-control-wrap__status-icon-unknown svg{fill:orange}.tox .tox-control-wrap__status-icon-valid svg{fill:green}.tox:not([dir=rtl]) .tox-control-wrap--status-invalid .tox-textfield,.tox:not([dir=rtl]) .tox-control-wrap--status-unknown .tox-textfield,.tox:not([dir=rtl]) .tox-control-wrap--status-valid .tox-textfield{padding-right:32px}.tox:not([dir=rtl]) .tox-control-wrap__status-icon-wrap{right:4px}.tox[dir=rtl] .tox-control-wrap--status-invalid .tox-textfield,.tox[dir=rtl] .tox-control-wrap--status-unknown .tox-textfield,.tox[dir=rtl] .tox-control-wrap--status-valid .tox-textfield{padding-left:32px}.tox[dir=rtl] .tox-control-wrap__status-icon-wrap{left:4px}.tox .tox-custom-preview{border-color:#eee;border-radius:6px;border-style:solid;border-width:1px;flex:1;padding:8px}.tox .tox-autocompleter{max-width:25em}.tox .tox-autocompleter .tox-menu{box-sizing:border-box;max-width:25em}.tox .tox-autocompleter .tox-autocompleter-highlight{font-weight:700}.tox .tox-color-input{display:flex;position:relative;z-index:1}.tox .tox-color-input .tox-textfield{z-index:-1}.tox .tox-color-input span{border-color:rgba(34 47 3.1%);border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;height:24px;position:absolute;top:6px;width:24px}@media (forced-colors:active){.tox .tox-color-input span{border-color:currentColor;border-width:2px!important;forced-color-adjust:none}}.tox .tox-color-input span:focus:not([aria-disabled=true]),.tox .tox-color-input span:hover:not([aria-disabled=true]){border-color:#006ce7;cursor:pointer}.tox .tox-color-input span::before{background-image:linear-gradient(45deg,rgba(0,0,0,.25) 25%,transparent 25%),linear-gradient(-45deg,rgba(0,0,0,.25) 25%,transparent 25%),linear-gradient(45deg,transparent 75%,rgba(0,0,0,.25) 75%),linear-gradient(-45deg,transparent 75%,rgba(0,0,0,.25) 75%);background-position:0 0,0 6px,6px -6px,-6px 0;background-size:12px 12px;border:1px solid #fff;border-radius:6px;box-sizing:border-box;content:'';height:24px;left:-1px;position:absolute;top:-1px;width:24px;z-index:-1}@media (forced-colors:active){.tox .tox-color-input span::before{border:none}}.tox .tox-color-input span[aria-disabled=true]{cursor:not-allowed}.tox:not([dir=rtl]) .tox-color-input .tox-textfield{padding-left:36px}.tox:not([dir=rtl]) .tox-color-input span{left:6px}.tox[dir=rtl] .tox-color-input .tox-textfield{padding-right:36px}.tox[dir=rtl] .tox-color-input span{right:6px}.tox .tox-label,.tox .tox-toolbar-label{color:rgba(34,47,62,.7);display:block;font-size:14px;font-style:normal;font-weight:400;line-height:1.3;padding:0 8px 0 0;text-transform:none;white-space:nowrap}.tox .tox-toolbar-label{padding:0 8px}.tox[dir=rtl] .tox-label{padding:0 0 0 8px}.tox .tox-form{display:flex;flex:1;flex-direction:column}.tox .tox-form__group{box-sizing:border-box;margin-bottom:4px}.tox .tox-form-group--maximize{flex:1}.tox .tox-form__group--error{color:#c00}.tox .tox-form__group--collection{display:flex}.tox .tox-form__grid{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.tox .tox-form__grid--2col>.tox-form__group{width:calc(50% - (8px / 2))}.tox .tox-form__grid--3col>.tox-form__group{width:calc(100% / 3 - (8px / 2))}.tox .tox-form__grid--4col>.tox-form__group{width:calc(25% - (8px / 2))}.tox .tox-form__controls-h-stack{align-items:center;display:flex}.tox .tox-form__group--inline{align-items:center;display:flex}.tox .tox-form__group--stretched{display:flex;flex:1;flex-direction:column}.tox .tox-form__group--stretched .tox-textarea{flex:1}.tox .tox-form__group--stretched .tox-navobj{display:flex;flex:1}.tox .tox-form__group--stretched .tox-navobj :nth-child(2){flex:1;height:100%}.tox:not([dir=rtl]) .tox-form__controls-h-stack>:not(:first-child){margin-left:4px}.tox[dir=rtl] .tox-form__controls-h-stack>:not(:first-child){margin-right:4px}.tox .tox-lock.tox-locked .tox-lock-icon__unlock,.tox .tox-lock:not(.tox-locked) .tox-lock-icon__lock{display:none}.tox .tox-listboxfield .tox-listbox--select,.tox .tox-textarea,.tox .tox-textarea-wrap .tox-textarea:focus,.tox .tox-textfield,.tox .tox-toolbar-textfield{appearance:none;background-color:#fff;border-color:#eee;border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;color:#222f3e;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:16px;line-height:24px;margin:0;min-height:34px;outline:0;padding:5px 5.5px;resize:none;width:100%}.tox .tox-textarea[disabled],.tox .tox-textfield[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85);cursor:not-allowed}.tox .tox-custom-editor:focus-within,.tox .tox-listboxfield .tox-listbox--select:focus,.tox .tox-textarea-wrap:focus-within,.tox .tox-textarea:focus,.tox .tox-textfield:focus{background-color:#fff;border-color:#006ce7;box-shadow:0 0 0 1px #006ce7;outline:0}.tox .tox-toolbar-textfield{border-width:0;margin-bottom:3px;margin-top:2px;max-width:250px}.tox .tox-naked-btn{background-color:transparent;border:0;border-color:transparent;box-shadow:unset;color:#006ce7;cursor:pointer;display:block;margin:0;padding:0}.tox .tox-naked-btn svg{display:block;fill:#222f3e}.tox:not([dir=rtl]) .tox-toolbar-textfield+*{margin-left:4px}.tox[dir=rtl] .tox-toolbar-textfield+*{margin-right:4px}.tox .tox-listboxfield{cursor:pointer;position:relative}.tox .tox-listboxfield .tox-listbox--select[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85);cursor:not-allowed}.tox .tox-listbox__select-label{cursor:default;flex:1;margin:0 4px}.tox .tox-listbox__select-chevron{align-items:center;display:flex;justify-content:center;width:16px}.tox .tox-listbox__select-chevron svg{fill:#222f3e}@media (forced-colors:active){.tox .tox-listbox__select-chevron svg{fill:currentColor!important}}.tox .tox-listboxfield .tox-listbox--select{align-items:center;display:flex}.tox:not([dir=rtl]) .tox-listboxfield svg{right:8px}.tox[dir=rtl] .tox-listboxfield svg{left:8px}.tox .tox-selectfield{cursor:pointer;position:relative}.tox .tox-selectfield select{appearance:none;background-color:#fff;border-color:#eee;border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;color:#222f3e;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-size:16px;line-height:24px;margin:0;min-height:34px;outline:0;padding:5px 5.5px;resize:none;width:100%}.tox .tox-selectfield select[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85);cursor:not-allowed}.tox .tox-selectfield select::-ms-expand{display:none}.tox .tox-selectfield select:focus{background-color:#fff;border-color:#006ce7;box-shadow:0 0 0 1px #006ce7;outline:0}.tox .tox-selectfield svg{pointer-events:none;position:absolute;top:50%;transform:translateY(-50%)}.tox:not([dir=rtl]) .tox-selectfield select[size="0"],.tox:not([dir=rtl]) .tox-selectfield select[size="1"]{padding-right:24px}.tox:not([dir=rtl]) .tox-selectfield svg{right:8px}.tox[dir=rtl] .tox-selectfield select[size="0"],.tox[dir=rtl] .tox-selectfield select[size="1"]{padding-left:24px}.tox[dir=rtl] .tox-selectfield svg{left:8px}.tox .tox-textarea-wrap{border-color:#eee;border-radius:6px;border-style:solid;border-width:1px;display:flex;flex:1;overflow:hidden}.tox .tox-textarea{appearance:textarea;white-space:pre-wrap}.tox .tox-textarea-wrap .tox-textarea{border:none}.tox .tox-textarea-wrap .tox-textarea:focus{border:none}.tox-fullscreen{border:0;height:100%;margin:0;overflow:hidden;overscroll-behavior:none;padding:0;touch-action:pinch-zoom;width:100%}.tox.tox-tinymce.tox-fullscreen .tox-statusbar__resize-handle{display:none}.tox-shadowhost.tox-fullscreen,.tox.tox-tinymce.tox-fullscreen{left:0;position:fixed;top:0;z-index:1200}.tox.tox-tinymce.tox-fullscreen{background-color:transparent}.tox-fullscreen .tox.tox-tinymce-aux,.tox-fullscreen~.tox.tox-tinymce-aux{z-index:1201}.tox .tox-help__more-link{list-style:none;margin-top:1em}.tox .tox-imagepreview{background-color:#666;height:380px;overflow:hidden;position:relative;width:100%}.tox .tox-imagepreview.tox-imagepreview__loaded{overflow:auto}.tox .tox-imagepreview__container{display:flex;left:100vw;position:absolute;top:100vw}.tox .tox-imagepreview__image{background:url(data:image/gif;base64,R0lGODdhDAAMAIABAMzMzP///ywAAAAADAAMAAACFoQfqYeabNyDMkBQb81Uat85nxguUAEAOw==)}.tox .tox-image-tools .tox-spacer{flex:1}.tox .tox-image-tools .tox-bar{align-items:center;display:flex;height:60px;justify-content:center}.tox .tox-image-tools .tox-imagepreview,.tox .tox-image-tools .tox-imagepreview+.tox-bar{margin-top:8px}.tox .tox-image-tools .tox-croprect-block{background:#000;opacity:.5;position:absolute;zoom:1}.tox .tox-image-tools .tox-croprect-handle{border:2px solid #fff;height:20px;left:0;position:absolute;top:0;width:20px}.tox .tox-image-tools .tox-croprect-handle-move{border:0;cursor:move;position:absolute}.tox .tox-image-tools .tox-croprect-handle-nw{border-width:2px 0 0 2px;cursor:nw-resize;left:100px;margin:-2px 0 0 -2px;top:100px}.tox .tox-image-tools .tox-croprect-handle-ne{border-width:2px 2px 0 0;cursor:ne-resize;left:200px;margin:-2px 0 0 -20px;top:100px}.tox .tox-image-tools .tox-croprect-handle-sw{border-width:0 0 2px 2px;cursor:sw-resize;left:100px;margin:-20px 2px 0 -2px;top:200px}.tox .tox-image-tools .tox-croprect-handle-se{border-width:0 2px 2px 0;cursor:se-resize;left:200px;margin:-20px 0 0 -20px;top:200px}.tox .tox-insert-table-picker{background-color:#fff;display:flex;flex-wrap:wrap;width:170px}.tox .tox-insert-table-picker>div{border-color:#eee;border-style:solid;border-width:0 1px 1px 0;box-sizing:border-box;height:17px;width:17px}.tox .tox-collection--list .tox-collection__group .tox-insert-table-picker{margin:-4px -4px}.tox .tox-insert-table-picker .tox-insert-table-picker__selected{background-color:#006ce7;border-color:#eee}@media (forced-colors:active){.tox .tox-insert-table-picker .tox-insert-table-picker__selected{border-color:Highlight;filter:contrast(50%)}}.tox .tox-insert-table-picker__label{color:rgba(34,47,62,.7);display:block;font-size:14px;padding:4px;text-align:center;width:100%}.tox:not([dir=rtl]) .tox-insert-table-picker>div:nth-child(10n){border-right:0}.tox[dir=rtl] .tox-insert-table-picker>div:nth-child(10n+1){border-right:0}.tox .tox-menu{background-color:#fff;border:1px solid transparent;border-radius:6px;box-shadow:0 0 2px 0 rgba(34,47,62,.2),0 4px 8px 0 rgba(34,47,62,.15);display:inline-block;overflow:hidden;vertical-align:top;z-index:1150}.tox .tox-menu.tox-collection.tox-collection--list{padding:0 4px}.tox .tox-menu.tox-collection.tox-collection--toolbar{padding:8px}.tox .tox-menu.tox-collection.tox-collection--grid{padding:8px}@media only screen and (min-width:768px){.tox .tox-menu .tox-collection__item-label{overflow-wrap:break-word;word-break:normal}.tox .tox-dialog__popups .tox-menu .tox-collection__item-label{word-break:break-all}}.tox .tox-menu__label blockquote,.tox .tox-menu__label code,.tox .tox-menu__label h1,.tox .tox-menu__label h2,.tox .tox-menu__label h3,.tox .tox-menu__label h4,.tox .tox-menu__label h5,.tox .tox-menu__label h6,.tox .tox-menu__label p{margin:0}.tox .tox-menubar{background:repeating-linear-gradient(transparent 0 1px,transparent 1px 39px) center top 39px/100% calc(100% - 39px) no-repeat;background-color:#fff;display:flex;flex:0 0 auto;flex-shrink:0;flex-wrap:wrap;grid-column:1/-1;grid-row:1;padding:0 11px 0 12px}.tox .tox-promotion+.tox-menubar{grid-column:1}.tox .tox-promotion{background:repeating-linear-gradient(transparent 0 1px,transparent 1px 39px) center top 39px/100% calc(100% - 39px) no-repeat;background-color:#fff;grid-column:2;grid-row:1;padding-inline-end:8px;padding-inline-start:4px;padding-top:5px}.tox .tox-promotion-link{align-items:unsafe center;background-color:#e8f1f8;border-radius:5px;color:#086be6;cursor:pointer;display:flex;font-size:14px;height:26.6px;padding:4px 8px;white-space:nowrap}.tox .tox-promotion-link:hover{background-color:#b4d7ff}.tox .tox-promotion-link:focus{background-color:#d9edf7}.tox .tox-mbtn{align-items:center;background:#fff;border:0;border-radius:3px;box-shadow:none;color:#222f3e;display:flex;flex:0 0 auto;font-size:14px;font-style:normal;font-weight:400;height:28px;justify-content:center;margin:5px 1px 6px 0;outline:0;padding:0 4px;text-transform:none;width:auto}.tox .tox-mbtn[disabled]{background-color:#fff;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-mbtn:focus:not(:disabled){background:#fff;border:0;box-shadow:none;color:#222f3e;position:relative;z-index:1}.tox .tox-mbtn:focus:not(:disabled)::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-mbtn:focus:not(:disabled)::after{border:2px solid highlight}}.tox .tox-mbtn--active,.tox .tox-mbtn:not(:disabled).tox-mbtn--active:focus{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-mbtn:hover:not(:disabled):not(.tox-mbtn--active){background:#f0f0f0;border:0;box-shadow:none;color:#222f3e}.tox .tox-mbtn__select-label{cursor:default;font-weight:400;margin:0 4px}.tox .tox-mbtn[disabled] .tox-mbtn__select-label{cursor:not-allowed}.tox .tox-mbtn__select-chevron{align-items:center;display:flex;justify-content:center;width:16px;display:none}.tox .tox-notification{border-radius:6px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;display:grid;font-size:14px;font-weight:400;grid-template-columns:minmax(40px,1fr) auto minmax(40px,1fr);margin-left:auto;margin-right:auto;margin-top:4px;opacity:0;padding:4px;transition:transform .1s ease-in,opacity 150ms ease-in;width:max-content}.tox .tox-notification a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification p{font-size:14px;font-weight:400}.tox .tox-notification:focus{border-color:#006ce7;box-shadow:0 0 0 1px #006ce7}.tox .tox-notification--in{opacity:1}.tox .tox-notification--success{background-color:#e4eeda;border-color:#d7e6c8;color:#222f3e}.tox .tox-notification--success p{color:#222f3e}.tox .tox-notification--success a{color:#517342}.tox .tox-notification--success a:focus,.tox .tox-notification--success a:hover{color:#24321d;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--success a:focus-visible{border-radius:1px;outline:2px solid #517342;outline-offset:2px}.tox .tox-notification--success a:active{color:#0d120a;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--success svg{fill:#222f3e}.tox .tox-notification--error{background-color:#f5cccc;border-color:#f0b3b3;color:#222f3e}.tox .tox-notification--error p{color:#222f3e}.tox .tox-notification--error a{color:#77181f}.tox .tox-notification--error a:focus,.tox .tox-notification--error a:hover{color:#220709;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--error a:focus-visible{border-radius:1px;outline:2px solid #77181f;outline-offset:2px}.tox .tox-notification--error a:active{color:#000;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--error svg{fill:#222f3e}.tox .tox-notification--warn,.tox .tox-notification--warning{background-color:#fff5cc;border-color:#fff0b3;color:#222f3e}.tox .tox-notification--warn p,.tox .tox-notification--warning p{color:#222f3e}.tox .tox-notification--warn a,.tox .tox-notification--warning a{color:#7a6e25}.tox .tox-notification--warn a:focus,.tox .tox-notification--warn a:hover,.tox .tox-notification--warning a:focus,.tox .tox-notification--warning a:hover{color:#2c280d;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--warn a:focus-visible,.tox .tox-notification--warning a:focus-visible{border-radius:1px;outline:2px solid #7a6e25;outline-offset:2px}.tox .tox-notification--warn a:active,.tox .tox-notification--warning a:active{color:#050502;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--warn svg,.tox .tox-notification--warning svg{fill:#222f3e}.tox .tox-notification--info{background-color:#d6e7fb;border-color:#c1dbf9;color:#222f3e}.tox .tox-notification--info p{color:#222f3e}.tox .tox-notification--info a{color:#2a64a6}.tox .tox-notification--info a:focus,.tox .tox-notification--info a:hover{color:#163355;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--info a:focus-visible{border-radius:1px;outline:2px solid #2a64a6;outline-offset:2px}.tox .tox-notification--info a:active{color:#0b1a2c;-webkit-text-decoration:underline;text-decoration:underline}.tox .tox-notification--info svg{fill:#222f3e}.tox .tox-notification__body{align-self:center;color:#222f3e;font-size:14px;grid-column-end:3;grid-column-start:2;grid-row-end:2;grid-row-start:1;text-align:center;white-space:normal;word-break:break-all;word-break:break-word}.tox .tox-notification__body>*{margin:0}.tox .tox-notification__body>*+*{margin-top:1rem}.tox .tox-notification__icon{align-self:center;grid-column-end:2;grid-column-start:1;grid-row-end:2;grid-row-start:1;justify-self:end}.tox .tox-notification__icon svg{display:block}.tox .tox-notification__dismiss{align-self:start;grid-column-end:4;grid-column-start:3;grid-row-end:2;grid-row-start:1;justify-self:end}.tox .tox-notification .tox-progress-bar{grid-column-end:4;grid-column-start:1;grid-row-end:3;grid-row-start:2;justify-self:center}.tox .tox-notification-container-dock-fadeout{opacity:0;visibility:hidden}.tox .tox-notification-container-dock-fadein{opacity:1;visibility:visible}.tox .tox-notification-container-dock-transition{transition:visibility 0s linear .3s,opacity .3s ease}.tox .tox-notification-container-dock-transition.tox-notification-container-dock-fadein{transition-delay:0s}.tox .tox-pop{display:inline-block;position:relative}.tox .tox-pop--resizing{transition:width .1s ease}.tox .tox-pop--resizing .tox-toolbar,.tox .tox-pop--resizing .tox-toolbar__group{flex-wrap:nowrap}.tox .tox-pop--transition{transition:.15s ease;transition-property:left,right,top,bottom}.tox .tox-pop--transition::after,.tox .tox-pop--transition::before{transition:all .15s,visibility 0s,opacity 75ms ease 75ms}.tox .tox-pop__dialog{background-color:#fff;border:1px solid #eee;border-radius:6px;box-shadow:0 0 2px 0 rgba(34,47,62,.2),0 4px 8px 0 rgba(34,47,62,.15);min-width:0;overflow:hidden}.tox .tox-pop__dialog>:not(.tox-toolbar){margin:4px 4px 4px 8px}.tox .tox-pop__dialog .tox-toolbar{background-color:transparent;margin-bottom:-1px}.tox .tox-pop::after,.tox .tox-pop::before{border-style:solid;content:'';display:block;height:0;opacity:1;position:absolute;width:0}@media (forced-colors:active){.tox .tox-pop::after,.tox .tox-pop::before{content:none}}.tox .tox-pop.tox-pop--inset::after,.tox .tox-pop.tox-pop--inset::before{opacity:0;transition:all 0s .15s,visibility 0s,opacity 75ms ease}.tox .tox-pop.tox-pop--bottom::after,.tox .tox-pop.tox-pop--bottom::before{left:50%;top:100%}.tox .tox-pop.tox-pop--bottom::after{border-color:#fff transparent transparent transparent;border-width:8px;margin-left:-8px;margin-top:-1px}.tox .tox-pop.tox-pop--bottom::before{border-color:#eee transparent transparent transparent;border-width:9px;margin-left:-9px}.tox .tox-pop.tox-pop--top::after,.tox .tox-pop.tox-pop--top::before{left:50%;top:0;transform:translateY(-100%)}.tox .tox-pop.tox-pop--top::after{border-color:transparent transparent #fff transparent;border-width:8px;margin-left:-8px;margin-top:1px}.tox .tox-pop.tox-pop--top::before{border-color:transparent transparent #eee transparent;border-width:9px;margin-left:-9px}.tox .tox-pop.tox-pop--left::after,.tox .tox-pop.tox-pop--left::before{left:0;top:calc(50% - 1px);transform:translateY(-50%)}.tox .tox-pop.tox-pop--left::after{border-color:transparent #fff transparent transparent;border-width:8px;margin-left:-15px}.tox .tox-pop.tox-pop--left::before{border-color:transparent #eee transparent transparent;border-width:10px;margin-left:-19px}.tox .tox-pop.tox-pop--right::after,.tox .tox-pop.tox-pop--right::before{left:100%;top:calc(50% + 1px);transform:translateY(-50%)}.tox .tox-pop.tox-pop--right::after{border-color:transparent transparent transparent #fff;border-width:8px;margin-left:-1px}.tox .tox-pop.tox-pop--right::before{border-color:transparent transparent transparent #eee;border-width:10px;margin-left:-1px}.tox .tox-pop.tox-pop--align-left::after,.tox .tox-pop.tox-pop--align-left::before{left:20px}.tox .tox-pop.tox-pop--align-right::after,.tox .tox-pop.tox-pop--align-right::before{left:calc(100% - 20px)}.tox .tox-sidebar-wrap{display:flex;flex-direction:row;flex-grow:1;min-height:0}.tox .tox-sidebar{background-color:#f0f0f0;display:flex;flex-direction:row;justify-content:flex-end}.tox .tox-sidebar__slider{display:flex;overflow:hidden}.tox .tox-sidebar__pane-container{display:flex}.tox .tox-sidebar__pane{display:flex}.tox .tox-sidebar--sliding-closed{opacity:0}.tox .tox-sidebar--sliding-open{opacity:1}.tox .tox-sidebar--sliding-growing,.tox .tox-sidebar--sliding-shrinking{transition:width .5s ease,opacity .5s ease}.tox .tox-selector{background-color:#4099ff;border-color:#4099ff;border-style:solid;border-width:1px;box-sizing:border-box;display:inline-block;height:10px;position:absolute;width:10px}.tox.tox-platform-touch .tox-selector{height:12px;width:12px}.tox .tox-slider{align-items:center;display:flex;flex:1;height:24px;justify-content:center;position:relative}.tox .tox-slider__rail{background-color:transparent;border:1px solid #eee;border-radius:6px;height:10px;min-width:120px;width:100%}.tox .tox-slider__handle{background-color:#006ce7;border:2px solid #0054b4;border-radius:6px;box-shadow:none;height:24px;left:50%;position:absolute;top:50%;transform:translateX(-50%) translateY(-50%);width:14px}.tox .tox-form__controls-h-stack>.tox-slider:not(:first-of-type){margin-inline-start:8px}.tox .tox-form__controls-h-stack>.tox-form__group+.tox-slider{margin-inline-start:32px}.tox .tox-form__controls-h-stack>.tox-slider+.tox-form__group{margin-inline-start:32px}.tox .tox-source-code{overflow:auto}.tox .tox-spinner{display:flex}.tox .tox-spinner>div{animation:tam-bouncing-dots 1.5s ease-in-out 0s infinite both;background-color:rgba(34,47,62,.7);border-radius:100%;height:8px;width:8px}.tox .tox-spinner>div:first-child{animation-delay:-.32s}.tox .tox-spinner>div:nth-child(2){animation-delay:-.16s}@keyframes tam-bouncing-dots{0%,100%,80%{transform:scale(0)}40%{transform:scale(1)}}.tox:not([dir=rtl]) .tox-spinner>div:not(:first-child){margin-left:4px}.tox[dir=rtl] .tox-spinner>div:not(:first-child){margin-right:4px}.tox .tox-statusbar{align-items:center;background-color:#fff;border-top:1px solid #e3e3e3;color:rgba(34,47,62,.7);display:flex;flex:0 0 auto;font-size:14px;font-weight:400;height:25px;overflow:hidden;padding:0 8px;position:relative;text-transform:none}.tox .tox-statusbar__path{display:flex;flex:1 1 auto;text-overflow:ellipsis;white-space:nowrap}.tox .tox-statusbar__right-container{display:flex;justify-content:flex-end;white-space:nowrap}.tox .tox-statusbar__help-text{text-align:center}.tox .tox-statusbar__text-container{align-items:flex-start;display:flex;flex:1 1 auto;height:16px;justify-content:space-between}@media only screen and (min-width:768px){.tox .tox-statusbar__text-container.tox-statusbar__text-container-3-cols>.tox-statusbar__help-text,.tox .tox-statusbar__text-container.tox-statusbar__text-container-3-cols>.tox-statusbar__path,.tox .tox-statusbar__text-container.tox-statusbar__text-container-3-cols>.tox-statusbar__right-container{flex:0 0 calc(100% / 3)}}.tox .tox-statusbar__text-container.tox-statusbar__text-container--flex-end{justify-content:flex-end}.tox .tox-statusbar__text-container.tox-statusbar__text-container--flex-start{justify-content:flex-start}.tox .tox-statusbar__text-container.tox-statusbar__text-container--space-around{justify-content:space-around}.tox .tox-statusbar__path>*{display:inline;white-space:nowrap}.tox .tox-statusbar__wordcount{flex:0 0 auto;margin-left:1ch}@media only screen and (max-width:767px){.tox .tox-statusbar__text-container .tox-statusbar__help-text{display:none}.tox .tox-statusbar__text-container .tox-statusbar__help-text:only-child{display:block}}.tox .tox-statusbar a,.tox .tox-statusbar__path-item,.tox .tox-statusbar__wordcount{color:rgba(34,47,62,.7);position:relative;-webkit-text-decoration:none;text-decoration:none}.tox .tox-statusbar a:focus:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar a:hover:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__path-item:focus:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__path-item:hover:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__wordcount:focus:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__wordcount:hover:not(:disabled):not([aria-disabled=true]){color:#222f3e;cursor:pointer}.tox .tox-statusbar a:focus-visible::after,.tox .tox-statusbar__path-item:focus-visible::after,.tox .tox-statusbar__wordcount:focus-visible::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-statusbar a:focus-visible::after,.tox .tox-statusbar__path-item:focus-visible::after,.tox .tox-statusbar__wordcount:focus-visible::after{border:2px solid highlight}}.tox .tox-statusbar__branding svg{fill:rgba(34,47,62,0.8);height:1em;margin-left:.3em;width:auto}@media (forced-colors:active){.tox .tox-statusbar__branding svg{fill:currentColor}}.tox .tox-statusbar__branding a{align-items:center;display:inline-flex}.tox .tox-statusbar__branding a:focus:not(:disabled):not([aria-disabled=true]) svg,.tox .tox-statusbar__branding a:hover:not(:disabled):not([aria-disabled=true]) svg{fill:#222f3e}.tox .tox-statusbar__resize-handle{align-items:flex-end;align-self:stretch;cursor:nwse-resize;display:flex;flex:0 0 auto;justify-content:flex-end;margin-bottom:3px;margin-left:4px;margin-right:calc(3px - 8px);margin-top:3px;padding-bottom:0;padding-left:0;padding-right:0;position:relative}.tox .tox-statusbar__resize-handle svg{display:block;fill:rgba(34,47,62,0.5)}.tox .tox-statusbar__resize-handle:focus svg,.tox .tox-statusbar__resize-handle:hover svg{fill:#222f3e}.tox .tox-statusbar__resize-handle:focus-visible{background-color:transparent;border-radius:1px 1px 5px 1px;box-shadow:0 0 0 2px transparent}.tox .tox-statusbar__resize-handle:focus-visible::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-statusbar__resize-handle:focus-visible::after{border:2px solid highlight}}.tox .tox-statusbar__resize-handle:only-child{margin-left:auto}.tox:not([dir=rtl]) .tox-statusbar__path>*{margin-right:4px}.tox:not([dir=rtl]) .tox-statusbar__branding{margin-left:2ch}.tox[dir=rtl] .tox-statusbar{flex-direction:row-reverse}.tox[dir=rtl] .tox-statusbar__path>*{margin-left:4px}.tox[dir=rtl] .tox-statusbar__branding svg{margin-left:0;margin-right:.3em}.tox .tox-throbber{z-index:1299}.tox .tox-throbber__busy-spinner{align-items:center;background-color:rgba(255,255,255,.6);bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0}.tox .tox-tbtn{align-items:center;background:#fff;border:0;border-radius:3px;box-shadow:none;color:#222f3e;display:flex;flex:0 0 auto;font-size:14px;font-style:normal;font-weight:400;height:28px;justify-content:center;margin:6px 1px 5px 0;outline:0;padding:0;text-transform:none;width:34px}@media (forced-colors:active){.tox .tox-tbtn.tox-tbtn:hover,.tox .tox-tbtn:hover{outline:1px dashed currentColor}.tox .tox-tbtn.tox-tbtn--active,.tox .tox-tbtn.tox-tbtn--enabled,.tox .tox-tbtn.tox-tbtn--enabled:focus,.tox .tox-tbtn.tox-tbtn--enabled:hover,.tox .tox-tbtn:focus:not(.tox-tbtn--disabled){outline:1px solid currentColor;position:relative}}.tox .tox-tbtn svg{display:block;fill:#222f3e}@media (forced-colors:active){.tox .tox-tbtn svg{fill:currentColor!important}.tox .tox-tbtn svg.tox-tbtn--enabled,.tox .tox-tbtn svg:focus:not(.tox-tbtn--disabled){fill:currentColor!important}.tox .tox-tbtn svg .tox-tbtn:disabled,.tox .tox-tbtn svg .tox-tbtn:disabled:hover,.tox .tox-tbtn svg.tox-tbtn--disabled,.tox .tox-tbtn svg.tox-tbtn--disabled:hover{filter:contrast(0%)}}.tox .tox-tbtn.tox-tbtn-more{padding-left:5px;padding-right:5px;width:inherit}.tox .tox-tbtn:focus{background:#fff;border:0;box-shadow:none;position:relative;z-index:1}.tox .tox-tbtn:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-tbtn:focus::after{border:2px solid highlight}}.tox .tox-tbtn:hover{background:#f0f0f0;border:0;box-shadow:none;color:#222f3e}.tox .tox-tbtn:hover svg{fill:#222f3e}.tox .tox-tbtn:active{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-tbtn:active svg{fill:#222f3e}.tox .tox-tbtn--disabled .tox-tbtn--enabled svg{fill:rgba(34,47,62,0.5)}.tox .tox-tbtn--disabled,.tox .tox-tbtn--disabled:hover,.tox .tox-tbtn:disabled,.tox .tox-tbtn:disabled:hover{background:#fff;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-tbtn--disabled svg,.tox .tox-tbtn--disabled:hover svg,.tox .tox-tbtn:disabled svg,.tox .tox-tbtn:disabled:hover svg{fill:rgba(34,47,62,0.5)}.tox .tox-tbtn--active,.tox .tox-tbtn--enabled,.tox .tox-tbtn--enabled:focus,.tox .tox-tbtn--enabled:hover{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e;position:relative}.tox .tox-tbtn--active>*,.tox .tox-tbtn--enabled:focus>*,.tox .tox-tbtn--enabled:hover>*,.tox .tox-tbtn--enabled>*{transform:none}.tox .tox-tbtn--active svg,.tox .tox-tbtn--enabled svg,.tox .tox-tbtn--enabled:focus svg,.tox .tox-tbtn--enabled:hover svg{fill:#222f3e}.tox .tox-tbtn--active.tox-tbtn--disabled svg,.tox .tox-tbtn--enabled.tox-tbtn--disabled svg,.tox .tox-tbtn--enabled:focus.tox-tbtn--disabled svg,.tox .tox-tbtn--enabled:hover.tox-tbtn--disabled svg{fill:rgba(34,47,62,0.5)}.tox .tox-tbtn--enabled:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-tbtn--enabled:focus::after{border:2px solid highlight}}.tox .tox-tbtn:focus:not(.tox-tbtn--disabled){color:#222f3e}.tox .tox-tbtn:focus:not(.tox-tbtn--disabled) svg{fill:#222f3e}.tox .tox-tbtn:active>*{transform:none}.tox .tox-tbtn--md{height:42px;width:51px}.tox .tox-tbtn--lg{flex-direction:column;height:56px;width:68px}.tox .tox-tbtn--return{align-self:stretch;height:unset;width:16px}.tox .tox-tbtn--labeled{padding:0 4px;width:unset}.tox .tox-tbtn__vlabel{display:block;font-size:10px;font-weight:400;letter-spacing:-.025em;margin-bottom:4px;white-space:nowrap}.tox .tox-number-input{background:#f7f7f7;border-radius:3px;display:flex;margin:6px 1px 5px 0;position:relative;width:auto}.tox .tox-number-input:focus{background:#f7f7f7}.tox .tox-number-input:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-number-input:focus::after{border:2px solid highlight}}.tox .tox-number-input .tox-input-wrapper{display:flex;pointer-events:none;position:relative;text-align:center}.tox .tox-number-input .tox-input-wrapper:focus{background-color:#f7f7f7;z-index:1}.tox .tox-number-input .tox-input-wrapper:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-number-input .tox-input-wrapper:focus::after{border:2px solid highlight}}.tox .tox-number-input .tox-input-wrapper:has(input:focus)::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-number-input .tox-input-wrapper:has(input:focus)::after{border:2px solid highlight}}.tox .tox-number-input input{border-radius:3px;color:#222f3e;font-size:14px;margin:2px 0;pointer-events:all;position:relative;width:60px}.tox .tox-number-input input:hover{background:#f0f0f0;color:#222f3e}.tox .tox-number-input input:focus{background-color:#f7f7f7}.tox .tox-number-input input:disabled{background:#fff;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-number-input button{color:#222f3e;height:28px;position:relative;text-align:center;width:24px}@media (forced-colors:active){.tox .tox-number-input button:active,.tox .tox-number-input button:focus,.tox .tox-number-input button:hover{outline:1px solid currentColor!important}}.tox .tox-number-input button svg{display:block;fill:#222f3e;margin:0 auto;transform:scale(.67)}@media (forced-colors:active){.tox .tox-number-input button svg,.tox .tox-number-input button svg:active,.tox .tox-number-input button svg:hover{fill:currentColor!important}.tox .tox-number-input button svg:disabled{filter:contrast(0)}}.tox .tox-number-input button:focus{background:#f7f7f7;z-index:1}.tox .tox-number-input button:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-number-input button:focus::after{border:2px solid highlight}}.tox .tox-number-input button:hover{background:#f0f0f0;border:0;box-shadow:none;color:#222f3e}.tox .tox-number-input button:hover svg{fill:#222f3e}.tox .tox-number-input button:active{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-number-input button:active svg{fill:#222f3e}.tox .tox-number-input button:disabled{background:#fff;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-number-input button:disabled svg{fill:rgba(34,47,62,0.5)}.tox .tox-number-input button.minus{border-radius:3px 0 0 3px}.tox .tox-number-input button.plus{border-radius:0 3px 3px 0}.tox .tox-number-input:focus:not(:active)>.tox-input-wrapper,.tox .tox-number-input:focus:not(:active)>button{background:#f7f7f7}.tox .tox-tbtn--select{margin:6px 1px 5px 0;padding:0 4px;width:auto}.tox .tox-tbtn__select-label{cursor:default;font-weight:400;height:initial;margin:0 4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tox .tox-tbtn__select-chevron{align-items:center;display:flex;justify-content:center;width:16px}.tox .tox-tbtn__select-chevron svg{fill:rgba(34,47,62,0.5)}@media (forced-colors:active){.tox .tox-tbtn__select-chevron svg{fill:currentColor}}.tox .tox-tbtn--bespoke{background:#f7f7f7}.tox .tox-tbtn--bespoke:focus{background:#f7f7f7}.tox .tox-tbtn--bespoke+.tox-tbtn--bespoke{margin-inline-start:4px}.tox .tox-tbtn--bespoke .tox-tbtn__select-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:7em}.tox .tox-tbtn--disabled .tox-tbtn__select-label,.tox .tox-tbtn--select:disabled .tox-tbtn__select-label{cursor:not-allowed}.tox .tox-split-button{border:0;border-radius:3px;box-sizing:border-box;display:flex;margin:6px 1px 5px 0}.tox .tox-split-button:hover{box-shadow:0 0 0 1px #f0f0f0 inset}.tox .tox-split-button:focus{background:#fff;box-shadow:none;color:#222f3e;position:relative;z-index:1}.tox .tox-split-button:focus::after{pointer-events:none;border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0}@media (forced-colors:active){.tox .tox-split-button:focus::after{border:2px solid highlight}}.tox .tox-split-button>*{border-radius:0}.tox .tox-split-button>:first-child{border-bottom-left-radius:3px;border-top-left-radius:3px}.tox .tox-split-button>:nth-child(2){border-bottom-right-radius:3px;border-top-right-radius:3px}.tox .tox-split-button__chevron{width:16px}.tox .tox-split-button__chevron svg{fill:rgba(34,47,62,0.5)}@media (forced-colors:active){.tox .tox-split-button__chevron svg{fill:currentColor}}.tox .tox-split-button .tox-tbtn{margin:0}.tox .tox-split-button:focus .tox-tbtn{background-color:transparent}.tox .tox-split-button.tox-tbtn--disabled .tox-tbtn:focus,.tox .tox-split-button.tox-tbtn--disabled .tox-tbtn:hover,.tox .tox-split-button.tox-tbtn--disabled:focus,.tox .tox-split-button.tox-tbtn--disabled:hover{background:#fff;box-shadow:none;color:rgba(34,47,62,.5)}.tox.tox-platform-touch .tox-split-button .tox-tbtn--select{padding:0 0}.tox.tox-platform-touch .tox-split-button .tox-tbtn:not(.tox-tbtn--select):first-child{width:30px}.tox.tox-platform-touch .tox-split-button__chevron{width:20px}.tox .tox-split-button.tox-tbtn--disabled svg .tox-icon-highlight-bg-color__color,.tox .tox-split-button.tox-tbtn--disabled svg .tox-icon-text-color__color{opacity:.3}.tox .tox-toolbar-overlord{background-color:#fff}.tox .tox-toolbar,.tox .tox-toolbar__overflow,.tox .tox-toolbar__primary{background-attachment:local;background-color:#fff;background-image:repeating-linear-gradient(#e3e3e3 0 1px,transparent 1px 39px);background-position:center top 40px;background-repeat:no-repeat;background-size:calc(100% - 11px * 2) calc(100% - 41px);display:flex;flex:0 0 auto;flex-shrink:0;flex-wrap:wrap;padding:0 0;transform:perspective(1px)}.tox .tox-toolbar-overlord>.tox-toolbar,.tox .tox-toolbar-overlord>.tox-toolbar__overflow,.tox .tox-toolbar-overlord>.tox-toolbar__primary{background-position:center top 0;background-size:calc(100% - 11px * 2) calc(100% - 0px)}.tox .tox-toolbar__overflow.tox-toolbar__overflow--closed{height:0;opacity:0;padding-bottom:0;padding-top:0;visibility:hidden}.tox .tox-toolbar__overflow--growing{transition:height .3s ease,opacity .2s linear .1s}.tox .tox-toolbar__overflow--shrinking{transition:opacity .3s ease,height .2s linear .1s,visibility 0s linear .3s}.tox .tox-anchorbar,.tox .tox-toolbar-overlord{grid-column:1/-1}.tox .tox-menubar+.tox-toolbar,.tox .tox-menubar+.tox-toolbar-overlord{border-top:1px solid transparent;margin-top:-1px;padding-bottom:1px;padding-top:1px}@media (forced-colors:active){.tox .tox-menubar+.tox-toolbar,.tox .tox-menubar+.tox-toolbar-overlord{outline:1px solid currentColor}}.tox .tox-toolbar--scrolling{flex-wrap:nowrap;overflow-x:auto}.tox .tox-pop .tox-toolbar{border-width:0}.tox .tox-toolbar--no-divider{background-image:none}.tox .tox-toolbar-overlord .tox-toolbar:not(.tox-toolbar--scrolling):first-child,.tox .tox-toolbar-overlord .tox-toolbar__primary{background-position:center top 39px}.tox .tox-editor-header>.tox-toolbar--scrolling,.tox .tox-toolbar-overlord .tox-toolbar--scrolling:first-child{background-image:none}.tox.tox-tinymce-aux .tox-toolbar__overflow{background-color:#fff;background-position:center top 43px;background-size:calc(100% - 8px * 2) calc(100% - 51px);border:none;border-radius:6px;box-shadow:0 0 2px 0 rgba(34,47,62,.2),0 4px 8px 0 rgba(34,47,62,.15);overscroll-behavior:none;padding:4px 0}@media (forced-colors:active){.tox.tox-tinymce-aux .tox-toolbar__overflow{border:solid}}.tox-pop .tox-pop__dialog .tox-toolbar{background-position:center top 43px;background-size:calc(100% - 11px * 2) calc(100% - 51px);padding:4px 0}.tox .tox-toolbar__group{align-items:center;display:flex;flex-wrap:wrap;margin:0 0;padding:0 11px 0 12px}.tox .tox-toolbar__group--pull-right{margin-left:auto}.tox .tox-toolbar--scrolling .tox-toolbar__group{flex-shrink:0;flex-wrap:nowrap}.tox:not([dir=rtl]) .tox-toolbar__group:not(:last-of-type){border-right:1px solid transparent}.tox[dir=rtl] .tox-toolbar__group:not(:last-of-type){border-left:1px solid transparent}.tox .tox-tooltip{display:inline-block;max-width:15em;padding:8px;pointer-events:none;position:relative;width:max-content;z-index:1150}.tox .tox-tooltip__body{background-color:#222f3e;border-radius:6px;box-shadow:none;color:#fff;font-size:12px;font-style:normal;font-weight:600;overflow-wrap:break-word;padding:4px 6px;text-transform:none}@media (forced-colors:active){.tox .tox-tooltip__body{outline:outset 1px}}.tox .tox-tooltip__arrow{position:absolute}.tox .tox-tooltip--down .tox-tooltip__arrow{border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #222f3e;bottom:0;left:50%;position:absolute;transform:translateX(-50%)}.tox .tox-tooltip--up .tox-tooltip__arrow{border-bottom:8px solid #222f3e;border-left:8px solid transparent;border-right:8px solid transparent;left:50%;position:absolute;top:0;transform:translateX(-50%)}.tox .tox-tooltip--right .tox-tooltip__arrow{border-bottom:8px solid transparent;border-left:8px solid #222f3e;border-top:8px solid transparent;position:absolute;right:0;top:50%;transform:translateY(-50%)}.tox .tox-tooltip--left .tox-tooltip__arrow{border-bottom:8px solid transparent;border-right:8px solid #222f3e;border-top:8px solid transparent;left:0;position:absolute;top:50%;transform:translateY(-50%)}.tox .tox-tree{display:flex;flex-direction:column}.tox .tox-tree .tox-trbtn{align-items:center;background:0 0;border:0;border-radius:4px;box-shadow:none;color:#222f3e;display:flex;flex:0 0 auto;font-size:14px;font-style:normal;font-weight:400;height:28px;margin-bottom:4px;margin-top:4px;outline:0;overflow:hidden;padding:0;padding-left:8px;text-transform:none}.tox .tox-tree .tox-trbtn .tox-tree__label{cursor:default;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tox .tox-tree .tox-trbtn svg{display:block;fill:#222f3e}.tox .tox-tree .tox-trbtn:focus{background:#f0f0f0;border:0;box-shadow:none}.tox .tox-tree .tox-trbtn:hover{background:#f0f0f0;border:0;box-shadow:none;color:#222f3e}.tox .tox-tree .tox-trbtn:hover svg{fill:#222f3e}.tox .tox-tree .tox-trbtn:active{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-tree .tox-trbtn:active svg{fill:#222f3e}.tox .tox-tree .tox-trbtn--disabled,.tox .tox-tree .tox-trbtn--disabled:hover,.tox .tox-tree .tox-trbtn:disabled,.tox .tox-tree .tox-trbtn:disabled:hover{background:0 0;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-tree .tox-trbtn--disabled svg,.tox .tox-tree .tox-trbtn--disabled:hover svg,.tox .tox-tree .tox-trbtn:disabled svg,.tox .tox-tree .tox-trbtn:disabled:hover svg{fill:rgba(34,47,62,0.5)}.tox .tox-tree .tox-trbtn--enabled,.tox .tox-tree .tox-trbtn--enabled:hover{background:#a6ccf7;border:0;box-shadow:none;color:#222f3e}.tox .tox-tree .tox-trbtn--enabled:hover>*,.tox .tox-tree .tox-trbtn--enabled>*{transform:none}.tox .tox-tree .tox-trbtn--enabled svg,.tox .tox-tree .tox-trbtn--enabled:hover svg{fill:#222f3e}.tox .tox-tree .tox-trbtn:focus:not(.tox-trbtn--disabled){color:#222f3e}.tox .tox-tree .tox-trbtn:focus:not(.tox-trbtn--disabled) svg{fill:#222f3e}.tox .tox-tree .tox-trbtn:active>*{transform:none}.tox .tox-tree .tox-trbtn--return{align-self:stretch;height:unset;width:16px}.tox .tox-tree .tox-trbtn--labeled{padding:0 4px;width:unset}.tox .tox-tree .tox-trbtn__vlabel{display:block;font-size:10px;font-weight:400;letter-spacing:-.025em;margin-bottom:4px;white-space:nowrap}.tox .tox-tree .tox-tree--directory{display:flex;flex-direction:column}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label{font-weight:700}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-mbtn{margin-left:auto}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-mbtn svg{fill:transparent}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-mbtn.tox-mbtn--active svg,.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-mbtn:focus svg{fill:#222f3e}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:focus .tox-mbtn svg,.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:hover .tox-mbtn svg{fill:#222f3e}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:hover:has(.tox-mbtn:hover){background-color:transparent;color:#222f3e}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:hover:has(.tox-mbtn:hover) .tox-chevron svg{fill:#222f3e}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label .tox-chevron{margin-right:6px}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:has(+ .tox-tree--directory__children--growing) .tox-chevron,.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:has(+ .tox-tree--directory__children--shrinking) .tox-chevron{transition:transform .5s ease-in-out}.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:has(+ .tox-tree--directory__children--growing) .tox-chevron,.tox .tox-tree .tox-tree--directory .tox-tree--directory__label:has(+ .tox-tree--directory__children--open) .tox-chevron{transform:rotate(90deg)}.tox .tox-tree .tox-tree--leaf__label{font-weight:400}.tox .tox-tree .tox-tree--leaf__label .tox-mbtn{margin-left:auto}.tox .tox-tree .tox-tree--leaf__label .tox-mbtn svg{fill:transparent}.tox .tox-tree .tox-tree--leaf__label .tox-mbtn.tox-mbtn--active svg,.tox .tox-tree .tox-tree--leaf__label .tox-mbtn:focus svg{fill:#222f3e}.tox .tox-tree .tox-tree--leaf__label:hover .tox-mbtn svg{fill:#222f3e}.tox .tox-tree .tox-tree--leaf__label:hover:has(.tox-mbtn:hover){background-color:transparent;color:#222f3e}.tox .tox-tree .tox-tree--leaf__label:hover:has(.tox-mbtn:hover) .tox-chevron svg{fill:#222f3e}.tox .tox-tree .tox-icon-custom-state{flex-grow:1;display:flex;justify-content:flex-end}.tox .tox-tree .tox-tree--directory__children{overflow:hidden;padding-left:16px}.tox .tox-tree .tox-tree--directory__children.tox-tree--directory__children--growing,.tox .tox-tree .tox-tree--directory__children.tox-tree--directory__children--shrinking{transition:height .5s ease-in-out}.tox .tox-tree .tox-trbtn.tox-tree--leaf__label{display:flex;justify-content:space-between}.tox .tox-revisionhistory__pane{padding:0!important}.tox .tox-revisionhistory__container{display:flex;flex-direction:column;height:100%}.tox .tox-revisionhistory{background-color:#fff;border-top:1px solid #f0f0f0;display:flex;flex:1;height:100%;margin-top:8px;overflow-x:auto;overflow-y:hidden;position:relative;width:100%}.tox .tox-revisionhistory--align-right{margin-left:auto}.tox .tox-revisionhistory__iframe{flex:1}.tox .tox-revisionhistory__sidebar{display:flex;flex-direction:column;height:100%;min-width:248px;width:316px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__sidebar-title{background-color:#fff;box-shadow:0 4px 8px 0 rgba(34,47,62,.1);color:#222f3e;font-size:20px;font-weight:400;line-height:28px;padding:12px;z-index:1}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions{background-color:#f0f0f0;display:flex;flex:1;flex-direction:column;gap:12px;overflow-y:auto;padding:10px 12px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions:focus{height:100%;position:relative;z-index:1}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7;content:'';left:0;position:absolute;right:0;top:0;border-radius:6px;bottom:1px;left:1px;right:1px;top:1px}@media (forced-colors:active){.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions:focus::after{border:2px solid highlight}}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card{background-color:#fff;border:1px solid #f0f0f0;border-radius:6px;color:#222f3e;cursor:pointer;display:flex;flex-direction:column;font-size:14px;gap:12px;padding:12px;width:100%}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card:hover{box-shadow:0 4px 8px 0 rgba(34,47,62,.1)}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card:focus{position:relative;z-index:1}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card:focus::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7 #006ce7;content:'';left:0;position:absolute;right:0;top:0;border-radius:6px;box-shadow:0 0 0 2px #006ce7;box-shadow:0 0 0 2px #006ce7!important}@media (forced-colors:active){.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card:focus::after{border:2px solid highlight}}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card.tox-revisionhistory__card--selected{background-color:#fff5cc;box-shadow:0 4px 8px 0 rgba(34,47,62,.1);position:relative}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card.tox-revisionhistory__card--selected::after{border-radius:3px;bottom:0;box-shadow:0 0 0 2px #006ce7 #e3b82a;content:'';left:0;position:absolute;right:0;top:0;border-radius:6px;box-shadow:0 0 0 2px #e3b82a}@media (forced-colors:active){.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card.tox-revisionhistory__card--selected::after{border:2px solid highlight}}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card-date{display:flex;gap:12px;justify-content:space-between}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card-date-label{font-size:16px;line-height:24px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card-label{font-size:12px;font-weight:600;line-height:24px;padding:0}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card-author{align-items:center;display:flex;flex:1 0 0;gap:8px;height:36px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card-author-name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:14px;font-weight:700;line-height:18px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__avatar{border-radius:50%;height:36px;object-fit:cover;vertical-align:middle;width:36px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__norevision{color:rgba(34,47,62,.7);font-size:16px;line-height:24px;padding:5px 5.5px}.tox .tox-revisionhistory__sidebar .tox-revisionhistory__revisions .tox-revisionhistory__card-check-icon{color:#222f3e;height:24px}.tox .tox-view-wrap,.tox .tox-view-wrap__slot-container{background-color:#fff;display:flex;flex:1;flex-direction:column;height:100%}.tox .tox-view{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.tox .tox-view__header{align-items:center;display:flex;font-size:16px;justify-content:space-between;padding:10px 10px 2px 10px;position:relative}.tox .tox-view__label{color:#222f3e;font-weight:700;line-height:24px;padding:4px 16px;text-align:center;white-space:nowrap}.tox .tox-view__label--normal{font-size:16px}.tox .tox-view__label--large{font-size:20px}.tox .tox-view--mobile.tox-view__header,.tox .tox-view--mobile.tox-view__toolbar{padding:8px}.tox .tox-view--scrolling{flex-wrap:nowrap;overflow-x:auto}.tox .tox-view__toolbar{display:flex;flex-direction:row;gap:8px;justify-content:space-between;overflow-x:auto;padding:10px 10px 2px 10px}.tox .tox-view__toolbar__group{display:flex;flex-direction:row;gap:12px}.tox .tox-view__header-end,.tox .tox-view__header-start{display:flex}.tox .tox-view__pane{height:100%;padding:8px;position:relative;width:100%}.tox .tox-view__pane_panel{border:1px solid #eee;border-radius:6px}.tox:not([dir=rtl]) .tox-view__header .tox-view__header-end>*,.tox:not([dir=rtl]) .tox-view__header .tox-view__header-start>*{margin-left:8px}.tox[dir=rtl] .tox-view__header .tox-view__header-end>*,.tox[dir=rtl] .tox-view__header .tox-view__header-start>*{margin-right:8px}.tox .tox-well{border:1px solid #eee;border-radius:6px;padding:8px;width:100%}.tox .tox-well>:first-child{margin-top:0}.tox .tox-well>:last-child{margin-bottom:0}.tox .tox-well>:only-child{margin:0}.tox .tox-custom-editor{border:1px solid #eee;border-radius:6px;display:flex;flex:1;overflow:hidden;position:relative}.tox .tox-dialog-loading::before{background-color:rgba(0,0,0,.5);content:"";height:100%;position:absolute;width:100%;z-index:1000}.tox .tox-tab{cursor:pointer}.tox .tox-dialog__content-js{display:flex;flex:1}.tox .tox-dialog__body-content .tox-collection{display:flex;flex:1}`);(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(pn,hn,Mt)=>{const Hn=hn==="UL"?"InsertUnorderedList":"InsertOrderedList";pn.execCommand(Hn,!1,Mt===!1?null:{"list-style-type":Mt})},s=pn=>{pn.addCommand("ApplyUnorderedListStyle",(hn,Mt)=>{e(pn,"UL",Mt["list-style-type"])}),pn.addCommand("ApplyOrderedListStyle",(hn,Mt)=>{e(pn,"OL",Mt["list-style-type"])})},a=pn=>hn=>hn.options.get(pn),d=pn=>{const hn=pn.options.register;hn("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),hn("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},b=a("advlist_number_styles"),_=a("advlist_bullet_styles"),_e=pn=>pn==null,ot=pn=>!_e(pn);var st=tinymce.util.Tools.resolve("tinymce.util.Tools");class ct{constructor(hn,Mt){this.tag=hn,this.value=Mt}static some(hn){return new ct(!0,hn)}static none(){return ct.singletonNone}fold(hn,Mt){return this.tag?Mt(this.value):hn()}isSome(){return this.tag}isNone(){return!this.tag}map(hn){return this.tag?ct.some(hn(this.value)):ct.none()}bind(hn){return this.tag?hn(this.value):ct.none()}exists(hn){return this.tag&&hn(this.value)}forall(hn){return!this.tag||hn(this.value)}filter(hn){return!this.tag||hn(this.value)?this:ct.none()}getOr(hn){return this.tag?this.value:hn}or(hn){return this.tag?this:hn}getOrThunk(hn){return this.tag?this.value:hn()}orThunk(hn){return this.tag?this:hn()}getOrDie(hn){if(this.tag)return this.value;throw new Error(hn??"Called getOrDie on None")}static from(hn){return ot(hn)?ct.some(hn):ct.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(hn){this.tag&&hn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ct.singletonNone=new ct(!1);const ft=(pn,hn,Mt)=>{for(let Hn=0,cn=pn.length;Hn<cn;Hn++){const fo=pn[Hn];if(hn(fo,Hn))return ct.some(fo);if(Mt(fo,Hn))break}return ct.none()},mt=pn=>/\btox\-/.test(pn.className),bt=(pn,hn)=>pn.dom.isChildOf(hn,pn.getBody()),wt=pn=>hn=>ot(hn)&&pn.test(hn.nodeName),Ct=wt(/^(OL|UL|DL)$/),Rt=wt(/^(TH|TD)$/),It=(pn,hn,Mt)=>ft(hn,Hn=>Ct(Hn)&&!mt(Hn),Rt).exists(Hn=>Hn.nodeName===Mt&&bt(pn,Hn)),Pt=pn=>{const hn=pn.dom.getParent(pn.selection.getNode(),"ol,ul"),Mt=pn.dom.getStyle(hn,"listStyleType");return ct.from(Mt)},Tt=(pn,hn)=>hn!==null&&!pn.dom.isEditable(hn),Gt=(pn,hn)=>{const Mt=pn.dom.getParent(hn,"ol,ul,dl");return Tt(pn,Mt)||!pn.selection.isEditable()},Jt=(pn,hn)=>{const Mt=pn.selection.getNode();return hn({parents:pn.dom.getParents(Mt),element:Mt}),pn.on("NodeChange",hn),()=>pn.off("NodeChange",hn)},qt=pn=>pn.replace(/\-/g," ").replace(/\b\w/g,hn=>hn.toUpperCase()),Nt=pn=>_e(pn)||pn==="default"?"":pn,Qt=(pn,hn)=>Mt=>{const Hn=(fo,Fn)=>{const Tn=fo.selection.getStart(!0);Mt.setActive(It(fo,Fn,hn)),Mt.setEnabled(!Gt(fo,Tn))};return Jt(pn,fo=>Hn(pn,fo.parents))},fn=(pn,hn,Mt,Hn,cn,fo)=>{pn.ui.registry.addSplitButton(hn,{tooltip:Mt,icon:cn==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:Fn=>{const Tn=st.map(fo,qn=>{const nr=cn==="OL"?"num":"bull",oo=qn==="disc"||qn==="decimal"?"default":qn,Mo=Nt(qn),Dn=qt(qn);return{type:"choiceitem",value:Mo,icon:"list-"+nr+"-"+oo,text:Dn}});Fn(Tn)},onAction:()=>pn.execCommand(Hn),onItemAction:(Fn,Tn)=>{e(pn,cn,Tn)},select:Fn=>Pt(pn).map(qn=>Fn===qn).getOr(!1),onSetup:Qt(pn,cn)})},Mn=(pn,hn,Mt,Hn,cn,fo)=>{pn.ui.registry.addToggleButton(hn,{active:!1,tooltip:Mt,icon:cn==="OL"?"ordered-list":"unordered-list",onSetup:Qt(pn,cn),onAction:()=>pn.queryCommandState(Hn)||fo===""?pn.execCommand(Hn):e(pn,cn,fo)})},ln=(pn,hn,Mt,Hn,cn,fo)=>{fo.length>1?fn(pn,hn,Mt,Hn,cn,fo):Mn(pn,hn,Mt,Hn,cn,Nt(fo[0]))},Wt=pn=>{ln(pn,"numlist","Numbered list","InsertOrderedList","OL",b(pn)),ln(pn,"bullist","Bullet list","InsertUnorderedList","UL",_(pn))};var so=()=>{o.add("advlist",pn=>{pn.hasPlugin("lists")?(d(pn),Wt(pn),s(pn)):console.error("Please use the Lists plugin together with the List Styles plugin.")})};so()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),s=tinymce.util.Tools.resolve("tinymce.util.Tools");const a=pn=>hn=>hn.options.get(pn),d=pn=>{const hn=pn.options.register;hn("allow_html_in_named_anchor",{processor:"boolean",default:!1})},b=a("allow_html_in_named_anchor"),_="a:not([href])",_e=pn=>!pn,ot=pn=>pn.getAttribute("id")||pn.getAttribute("name")||"",st=pn=>pn.nodeName.toLowerCase()==="a",ct=pn=>st(pn)&&!pn.getAttribute("href")&&ot(pn)!=="",ft=pn=>ct(pn)&&!pn.firstChild,mt=pn=>{const hn=pn.dom;e(hn).walk(pn.selection.getRng(),Mt=>{s.each(Mt,Hn=>{ft(Hn)&&hn.remove(Hn,!1)})})},bt=pn=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(pn),wt=pn=>pn.dom.getParent(pn.selection.getStart(),_),Ct=pn=>{const hn=wt(pn);return hn?ot(hn):""},Rt=(pn,hn)=>{pn.undoManager.transact(()=>{b(pn)||pn.selection.collapse(!0),pn.selection.isCollapsed()?pn.insertContent(pn.dom.createHTML("a",{id:hn})):(mt(pn),pn.formatter.remove("namedAnchor",void 0,void 0,!0),pn.formatter.apply("namedAnchor",{value:hn}),pn.addVisual())})},It=(pn,hn,Mt)=>{Mt.removeAttribute("name"),Mt.id=hn,pn.addVisual(),pn.undoManager.add()},Pt=(pn,hn)=>{const Mt=wt(pn);Mt?It(pn,hn,Mt):Rt(pn,hn),pn.focus()},Tt=(pn,hn)=>bt(hn)?(Pt(pn,hn),!0):(pn.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),Gt=pn=>{const hn=Ct(pn);pn.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:hn},onSubmit:Mt=>{Tt(pn,Mt.getData().id)&&Mt.close()}})},Jt=pn=>{pn.addCommand("mceAnchor",()=>{Gt(pn)})},qt=pn=>_e(pn.attr("href"))&&!_e(pn.attr("id")||pn.attr("name")),Nt=pn=>qt(pn)&&!pn.firstChild,Qt=pn=>hn=>{for(let Mt=0;Mt<hn.length;Mt++){const Hn=hn[Mt];Nt(Hn)&&Hn.attr("contenteditable",pn)}},fn=pn=>{pn.on("PreInit",()=>{pn.parser.addNodeFilter("a",Qt("false")),pn.serializer.addNodeFilter("a",Qt(null))})},Mn=pn=>{pn.formatter.register("namedAnchor",{inline:"a",selector:_,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(hn,Mt,Hn)=>ct(hn)})},ln=pn=>hn=>{const Mt=()=>{hn.setEnabled(pn.selection.isEditable())};return pn.on("NodeChange",Mt),Mt(),()=>{pn.off("NodeChange",Mt)}},Wt=pn=>{const hn=()=>pn.execCommand("mceAnchor");pn.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:hn,onSetup:Mt=>{const Hn=pn.selection.selectorChangedWithUnbind("a:not([href])",Mt.setActive).unbind,cn=ln(pn)(Mt);return()=>{Hn(),cn()}}}),pn.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:hn,onSetup:ln(pn)})};var so=()=>{o.add("anchor",pn=>{d(pn),fn(pn),Jt(pn),Wt(pn),pn.on("PreInit",()=>{Mn(pn)})})};so()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,s=oo=>Mo=>Mo.options.get(oo),a=oo=>{const Mo=oo.options.register;Mo("autolink_pattern",{processor:"regexp",default:new RegExp("^"+e().source+"$","i")}),Mo("link_default_target",{processor:"string"}),Mo("link_default_protocol",{processor:"string",default:"https"})},d=s("autolink_pattern"),b=s("link_default_target"),_=s("link_default_protocol"),_e=s("allow_unsafe_link_target"),ot=(oo,Mo,Dn)=>{var xo;return Dn(oo,Mo.prototype)?!0:((xo=oo.constructor)===null||xo===void 0?void 0:xo.name)===Mo.name},st=oo=>{const Mo=typeof oo;return oo===null?"null":Mo==="object"&&Array.isArray(oo)?"array":Mo==="object"&&ot(oo,String,(Dn,xo)=>xo.isPrototypeOf(Dn))?"string":Mo},ct=oo=>Mo=>st(Mo)===oo,ft=oo=>Mo=>oo===Mo,mt=ct("string"),bt=ft(void 0),wt=oo=>oo==null,Ct=oo=>!wt(oo),Rt=oo=>Mo=>!oo(Mo),It=Object.hasOwnProperty,Pt=(oo,Mo)=>It.call(oo,Mo),Tt=(oo,Mo,Dn)=>oo.length>=Mo.length&&oo.substr(Dn,Dn+Mo.length)===Mo,Gt=(oo,Mo,Dn=0,xo)=>{const Xt=oo.indexOf(Mo,Dn);return Xt!==-1?bt(xo)?!0:Xt+Mo.length<=xo:!1},Jt=(oo,Mo)=>Tt(oo,Mo,0),qt="\uFEFF",Nt=oo=>oo===qt,Qt=oo=>oo.replace(/\uFEFF/g,"");var fn=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const Mn=oo=>oo.nodeType===3,ln=oo=>oo.nodeType===1,Wt=oo=>/^[(\[{ \u00a0]$/.test(oo),so=oo=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(oo),pn=oo=>/[?!,.;:]/.test(oo),hn=(oo,Mo,Dn)=>{for(let xo=Mo-1;xo>=0;xo--){const Xt=oo.charAt(xo);if(!Nt(Xt)&&Dn(Xt))return xo}return-1},Mt=(oo,Mo)=>{let Dn=oo,xo=Mo;for(;ln(Dn)&&Dn.childNodes[xo];)Dn=Dn.childNodes[xo],xo=Mn(Dn)?Dn.data.length:Dn.childNodes.length;return{container:Dn,offset:xo}},Hn=(oo,Mo)=>{var Dn;const xo=oo.schema.getVoidElements(),Xt=d(oo),{dom:Ur,selection:co}=oo;if(Ur.getParent(co.getNode(),"a[href]")!==null||oo.mode.isReadOnly())return null;const Vo=co.getRng(),yo=fn(Ur,Wn=>Ur.isBlock(Wn)||Pt(xo,Wn.nodeName.toLowerCase())||Ur.getContentEditable(Wn)==="false"),{container:ko,offset:yn}=Mt(Vo.endContainer,Vo.endOffset),Cn=(Dn=Ur.getParent(ko,Ur.isBlock))!==null&&Dn!==void 0?Dn:Ur.getRoot(),Nn=yo.backwards(ko,yn+Mo,(Wn,Rn)=>{const Qn=Wn.data,vo=hn(Qn,Rn,Rt(Wt));return vo===-1||pn(Qn[vo])?vo:vo+1},Cn);if(!Nn)return null;let sn=Nn.container;const kn=yo.backwards(Nn.container,Nn.offset,(Wn,Rn)=>{sn=Wn;const Qn=hn(Wn.data,Rn,Wt);return Qn===-1?Qn:Qn+1},Cn),Ln=Ur.createRng();kn?Ln.setStart(kn.container,kn.offset):Ln.setStart(sn,0),Ln.setEnd(Nn.container,Nn.offset);const Eo=Qt(Ln.toString()).match(Xt);if(Eo){let Wn=Eo[0];return Jt(Wn,"www.")?Wn=_(oo)+"://"+Wn:Gt(Wn,"@")&&!so(Wn)&&(Wn="mailto:"+Wn),{rng:Ln,url:Wn}}else return null},cn=(oo,Mo)=>{const{dom:Dn,selection:xo}=oo,{rng:Xt,url:Ur}=Mo,co=xo.getBookmark();xo.setRng(Xt);const Vo="createlink",yo={command:Vo,ui:!1,value:Ur};if(!oo.dispatch("BeforeExecCommand",yo).isDefaultPrevented()){oo.getDoc().execCommand(Vo,!1,Ur),oo.dispatch("ExecCommand",yo);const yn=b(oo);if(mt(yn)){const Cn=xo.getNode();Dn.setAttrib(Cn,"target",yn),yn==="_blank"&&!_e(oo)&&Dn.setAttrib(Cn,"rel","noopener")}}xo.moveToBookmark(co),oo.nodeChanged()},fo=oo=>{const Mo=Hn(oo,-1);Ct(Mo)&&cn(oo,Mo)},Fn=fo,Tn=oo=>{const Mo=Hn(oo,0);Ct(Mo)&&cn(oo,Mo)},qn=oo=>{oo.on("keydown",Mo=>{Mo.keyCode===13&&!Mo.isDefaultPrevented()&&Tn(oo)}),oo.on("keyup",Mo=>{Mo.keyCode===32?fo(oo):(Mo.keyCode===48&&Mo.shiftKey||Mo.keyCode===221)&&Fn(oo)})};var nr=()=>{o.add("autolink",oo=>{a(oo),qn(oo)})};nr()})();(function(){const o=Pt=>{let Tt=Pt;return{get:()=>Tt,set:qt=>{Tt=qt}}};var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),s=tinymce.util.Tools.resolve("tinymce.Env");const a=Pt=>Pt.dispatch("ResizeEditor"),d=Pt=>Tt=>Tt.options.get(Pt),b=Pt=>{const Tt=Pt.options.register;Tt("autoresize_overflow_padding",{processor:"number",default:1}),Tt("autoresize_bottom_margin",{processor:"number",default:50})},_=d("min_height"),_e=d("max_height"),ot=d("autoresize_overflow_padding"),st=d("autoresize_bottom_margin"),ct=Pt=>Pt.plugins.fullscreen&&Pt.plugins.fullscreen.isFullscreen(),ft=(Pt,Tt)=>{const Gt=Pt.getBody();Gt&&(Gt.style.overflowY=Tt?"":"hidden",Tt||(Gt.scrollTop=0))},mt=(Pt,Tt,Gt,Jt)=>{var qt;const Nt=parseInt((qt=Pt.getStyle(Tt,Gt,Jt))!==null&&qt!==void 0?qt:"",10);return isNaN(Nt)?0:Nt},bt=Pt=>{if((Pt==null?void 0:Pt.type.toLowerCase())==="setcontent"){const Tt=Pt;return Tt.selection===!0||Tt.paste===!0}else return!1},wt=(Pt,Tt,Gt,Jt)=>{var qt;const Nt=Pt.dom,Qt=Pt.getDoc();if(!Qt)return;if(ct(Pt)){ft(Pt,!0);return}const fn=Qt.documentElement,Mn=Jt?Jt():ot(Pt),ln=(qt=_(Pt))!==null&&qt!==void 0?qt:Pt.getElement().offsetHeight;let Wt=ln;const so=mt(Nt,fn,"margin-top",!0),pn=mt(Nt,fn,"margin-bottom",!0);let hn=fn.offsetHeight+so+pn+Mn;hn<0&&(hn=0);const Mt=Pt.getContainer().offsetHeight,Hn=Pt.getContentAreaContainer().offsetHeight,cn=Mt-Hn;hn+cn>ln&&(Wt=hn+cn);const fo=_e(Pt);fo&&Wt>fo?(Wt=fo,ft(Pt,!0)):ft(Pt,!1);const Fn=Tt.get();if(Fn.set&&(Pt.dom.setStyles(Pt.getDoc().documentElement,{"min-height":0}),Pt.dom.setStyles(Pt.getBody(),{"min-height":"inherit"})),Wt!==Fn.totalHeight&&(hn-Mn!==Fn.contentHeight||!Fn.set)){const Tn=Wt-Fn.totalHeight;if(Nt.setStyle(Pt.getContainer(),"height",Wt+"px"),Tt.set({totalHeight:Wt,contentHeight:hn,set:!0}),a(Pt),s.browser.isSafari()&&(s.os.isMacOS()||s.os.isiOS())){const qn=Pt.getWin();qn.scrollTo(qn.pageXOffset,qn.pageYOffset)}Pt.hasFocus()&&bt(Gt)&&Pt.selection.scrollIntoView(),(s.browser.isSafari()||s.browser.isChromium())&&Tn<0&&wt(Pt,Tt,Gt,Jt)}},Ct=(Pt,Tt)=>{const Gt=()=>st(Pt);Pt.on("init",Jt=>{const qt=ot(Pt),Nt=Pt.dom;Nt.setStyles(Pt.getDoc().documentElement,{height:"auto"}),s.browser.isEdge()||s.browser.isIE()?Nt.setStyles(Pt.getBody(),{paddingLeft:qt,paddingRight:qt,"min-height":0}):Nt.setStyles(Pt.getBody(),{paddingLeft:qt,paddingRight:qt}),wt(Pt,Tt,Jt,Gt)}),Pt.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",Jt=>{wt(Pt,Tt,Jt,Gt)})},Rt=(Pt,Tt)=>{Pt.addCommand("mceAutoResize",()=>{wt(Pt,Tt)})};var It=()=>{e.add("autoresize",Pt=>{if(b(Pt),Pt.options.isSet("resize")||Pt.options.set("resize",!1),!Pt.inline){const Tt=o({totalHeight:0,contentHeight:0,set:!1});Rt(Pt,Tt),Ct(Pt,Tt)}})};It()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(cn,fo,Fn)=>{var Tn;return Fn(cn,fo.prototype)?!0:((Tn=cn.constructor)===null||Tn===void 0?void 0:Tn.name)===fo.name},s=cn=>{const fo=typeof cn;return cn===null?"null":fo==="object"&&Array.isArray(cn)?"array":fo==="object"&&e(cn,String,(Fn,Tn)=>Tn.isPrototypeOf(Fn))?"string":fo},a=cn=>fo=>s(fo)===cn,d=cn=>fo=>cn===fo,b=a("string"),_=d(void 0);var _e=tinymce.util.Tools.resolve("tinymce.util.Delay"),ot=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),st=tinymce.util.Tools.resolve("tinymce.util.Tools");const ct=cn=>cn.dispatch("RestoreDraft"),ft=cn=>cn.dispatch("StoreDraft"),mt=cn=>cn.dispatch("RemoveDraft"),bt=cn=>{const fo={s:1e3,m:6e4},Fn=/^(\d+)([ms]?)$/.exec(cn);return(Fn&&Fn[2]?fo[Fn[2]]:1)*parseInt(cn,10)},wt=cn=>fo=>fo.options.get(cn),Ct=cn=>{const fo=cn.options.register,Fn=Tn=>{const qn=b(Tn);return qn?{value:bt(Tn),valid:qn}:{valid:!1,message:"Must be a string."}};fo("autosave_ask_before_unload",{processor:"boolean",default:!0}),fo("autosave_prefix",{processor:"string",default:"tinymce-autosave-{path}{query}{hash}-{id}-"}),fo("autosave_restore_when_empty",{processor:"boolean",default:!1}),fo("autosave_interval",{processor:Fn,default:"30s"}),fo("autosave_retention",{processor:Fn,default:"20m"})},Rt=wt("autosave_ask_before_unload"),It=wt("autosave_restore_when_empty"),Pt=wt("autosave_interval"),Tt=wt("autosave_retention"),Gt=cn=>{const fo=document.location;return cn.options.get("autosave_prefix").replace(/{path}/g,fo.pathname).replace(/{query}/g,fo.search).replace(/{hash}/g,fo.hash).replace(/{id}/g,cn.id)},Jt=(cn,fo)=>{if(_(fo))return cn.dom.isEmpty(cn.getBody());{const Fn=st.trim(fo);if(Fn==="")return!0;{const Tn=new DOMParser().parseFromString(Fn,"text/html");return cn.dom.isEmpty(Tn)}}},qt=cn=>{var fo;const Fn=parseInt((fo=ot.getItem(Gt(cn)+"time"))!==null&&fo!==void 0?fo:"0",10)||0;return new Date().getTime()-Fn>Tt(cn)?(Nt(cn,!1),!1):!0},Nt=(cn,fo)=>{const Fn=Gt(cn);ot.removeItem(Fn+"draft"),ot.removeItem(Fn+"time"),fo!==!1&&mt(cn)},Qt=cn=>{const fo=Gt(cn);!Jt(cn)&&cn.isDirty()&&(ot.setItem(fo+"draft",cn.getContent({format:"raw",no_events:!0})),ot.setItem(fo+"time",new Date().getTime().toString()),ft(cn))},fn=cn=>{var fo;const Fn=Gt(cn);qt(cn)&&(cn.setContent((fo=ot.getItem(Fn+"draft"))!==null&&fo!==void 0?fo:"",{format:"raw"}),ct(cn))},Mn=cn=>{const fo=Pt(cn);_e.setEditorInterval(cn,()=>{Qt(cn)},fo)},ln=cn=>{cn.undoManager.transact(()=>{fn(cn),Nt(cn)}),cn.focus()},Wt=cn=>({hasDraft:()=>qt(cn),storeDraft:()=>Qt(cn),restoreDraft:()=>fn(cn),removeDraft:fo=>Nt(cn,fo),isEmpty:fo=>Jt(cn,fo)});var so=tinymce.util.Tools.resolve("tinymce.EditorManager");const pn=cn=>{cn.editorManager.on("BeforeUnload",fo=>{let Fn;st.each(so.get(),Tn=>{Tn.plugins.autosave&&Tn.plugins.autosave.storeDraft(),!Fn&&Tn.isDirty()&&Rt(Tn)&&(Fn=Tn.translate("You have unsaved changes are you sure you want to navigate away?"))}),Fn&&(fo.preventDefault(),fo.returnValue=Fn)})},hn=cn=>fo=>{const Fn=()=>qt(cn)&&!cn.mode.isReadOnly();fo.setEnabled(Fn());const Tn=()=>fo.setEnabled(Fn());return cn.on("StoreDraft RestoreDraft RemoveDraft",Tn),()=>cn.off("StoreDraft RestoreDraft RemoveDraft",Tn)},Mt=cn=>{Mn(cn);const fo=()=>{ln(cn)};cn.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:fo,onSetup:hn(cn)}),cn.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:fo,onSetup:hn(cn)})};var Hn=()=>{o.add("autosave",cn=>(Ct(cn),pn(cn),Mt(cn),cn.on("init",()=>{It(cn)&&cn.dom.isEmpty(cn.getBody())&&fn(cn)}),Wt(cn)))};Hn()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(yn,Cn)=>yn.dispatch("insertCustomChar",{chr:Cn}),s=(yn,Cn)=>{const Nn=e(yn,Cn).chr;yn.execCommand("mceInsertContent",!1,Nn)},a=(yn,Cn,Nn)=>{var sn;return Nn(yn,Cn.prototype)?!0:((sn=yn.constructor)===null||sn===void 0?void 0:sn.name)===Cn.name},d=yn=>{const Cn=typeof yn;return yn===null?"null":Cn==="object"&&Array.isArray(yn)?"array":Cn==="object"&&a(yn,String,(Nn,sn)=>sn.isPrototypeOf(Nn))?"string":Cn},b=yn=>Cn=>d(Cn)===yn,_=yn=>Cn=>typeof Cn===yn,_e=yn=>Cn=>yn===Cn,ot=b("array"),st=_e(null),ct=_e(void 0),ft=yn=>yn==null,mt=yn=>!ft(yn),bt=_("function"),Ct=(yn=>()=>yn)(!1);class Rt{constructor(Cn,Nn){this.tag=Cn,this.value=Nn}static some(Cn){return new Rt(!0,Cn)}static none(){return Rt.singletonNone}fold(Cn,Nn){return this.tag?Nn(this.value):Cn()}isSome(){return this.tag}isNone(){return!this.tag}map(Cn){return this.tag?Rt.some(Cn(this.value)):Rt.none()}bind(Cn){return this.tag?Cn(this.value):Rt.none()}exists(Cn){return this.tag&&Cn(this.value)}forall(Cn){return!this.tag||Cn(this.value)}filter(Cn){return!this.tag||Cn(this.value)?this:Rt.none()}getOr(Cn){return this.tag?this.value:Cn}or(Cn){return this.tag?this:Cn}getOrThunk(Cn){return this.tag?this.value:Cn()}orThunk(Cn){return this.tag?this:Cn()}getOrDie(Cn){if(this.tag)return this.value;throw new Error(Cn??"Called getOrDie on None")}static from(Cn){return mt(Cn)?Rt.some(Cn):Rt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Cn){this.tag&&Cn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Rt.singletonNone=new Rt(!1);const It=Array.prototype.push,Pt=(yn,Cn)=>{const Nn=yn.length,sn=new Array(Nn);for(let kn=0;kn<Nn;kn++){const Ln=yn[kn];sn[kn]=Cn(Ln,kn)}return sn},Tt=(yn,Cn)=>{for(let Nn=0,sn=yn.length;Nn<sn;Nn++){const kn=yn[Nn];Cn(kn,Nn)}},Gt=(yn,Cn,Nn)=>{for(let sn=0,kn=yn.length;sn<kn;sn++){const Ln=yn[sn];if(Cn(Ln,sn))return Rt.some(Ln);if(Nn(Ln,sn))break}return Rt.none()},Jt=(yn,Cn)=>Gt(yn,Cn,Ct),qt=yn=>{const Cn=[];for(let Nn=0,sn=yn.length;Nn<sn;++Nn){if(!ot(yn[Nn]))throw new Error("Arr.flatten item "+Nn+" was not an array, input: "+yn);It.apply(Cn,yn[Nn])}return Cn},Nt=(yn,Cn)=>qt(Pt(yn,Cn));var Qt=tinymce.util.Tools.resolve("tinymce.util.Tools");const fn=yn=>Cn=>Cn.options.get(yn),Mn=yn=>{const Cn=yn.options.register,Nn=sn=>bt(sn)||ot(sn);Cn("charmap",{processor:Nn}),Cn("charmap_append",{processor:Nn})},ln=fn("charmap"),Wt=fn("charmap_append"),so=Qt.isArray,pn="User Defined",hn=()=>[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}],Mt=yn=>Qt.grep(yn,Cn=>so(Cn)&&Cn.length===2),Hn=yn=>so(yn)?Mt(yn):typeof yn=="function"?yn():[],cn=(yn,Cn)=>{const Nn=ln(yn);Nn&&(Cn=[{name:pn,characters:Hn(Nn)}]);const sn=Wt(yn);if(sn){const kn=Qt.grep(Cn,Ln=>Ln.name===pn);return kn.length?(kn[0].characters=[...kn[0].characters,...Hn(sn)],Cn):Cn.concat({name:pn,characters:Hn(sn)})}return Cn},fo=yn=>{const Cn=cn(yn,hn());return Cn.length>1?[{name:"All",characters:Nt(Cn,Nn=>Nn.characters)}].concat(Cn):Cn},Fn=yn=>({getCharMap:()=>fo(yn),insertChar:sn=>{s(yn,sn)}}),Tn=yn=>{let Cn=yn;return{get:()=>Cn,set:kn=>{Cn=kn}}},qn=(yn,Cn)=>{let Nn=null;const sn=()=>{st(Nn)||(clearTimeout(Nn),Nn=null)};return{cancel:sn,throttle:(...Ln)=>{sn(),Nn=setTimeout(()=>{Nn=null,yn.apply(null,Ln)},Cn)}}},nr=(yn,Cn,Nn=0,sn)=>{const kn=yn.indexOf(Cn,Nn);return kn!==-1?ct(sn)?!0:kn+Cn.length<=sn:!1},oo=String.fromCodePoint,Mo=(yn,Cn,Nn)=>nr(oo(yn).toLowerCase(),Nn)?!0:nr(Cn.toLowerCase(),Nn)||nr(Cn.toLowerCase().replace(/\s+/g,""),Nn),Dn=(yn,Cn)=>{const Nn=[],sn=Cn.toLowerCase();return Tt(yn.characters,kn=>{Mo(kn[0],kn[1],sn)&&Nn.push(kn)}),Pt(Nn,kn=>({text:kn[1],value:oo(kn[0]),icon:oo(kn[0])}))},xo="pattern",Xt=(yn,Cn)=>{const Nn=()=>[{label:"Search",type:"input",name:xo},{type:"collection",name:"results"}],sn=()=>Pt(Cn,Co=>({title:Co.name,name:Co.name,items:Nn()})),kn=()=>({type:"panel",items:Nn()}),Ln=()=>({type:"tabpanel",tabs:sn()}),Bn=Cn.length===1?Tn(pn):Tn("All"),Eo=(Co,Do)=>{Jt(Cn,Mr=>Mr.name===Bn.get()).each(Mr=>{const ar=Dn(Mr,Do);Co.setData({results:ar})})},Rn=qn(Co=>{const Do=Co.getData().pattern;Eo(Co,Do)},40),Qn=Cn.length===1?kn():Ln(),vo={pattern:"",results:Dn(Cn[0],"")},Gn={title:"Special Character",size:"normal",body:Qn,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:vo,onAction:(Co,Do)=>{Do.name==="results"&&(s(yn,Do.value),Co.close())},onTabChange:(Co,Do)=>{Bn.set(Do.newTabName),Rn.throttle(Co)},onChange:(Co,Do)=>{Do.name===xo&&Rn.throttle(Co)}};yn.windowManager.open(Gn).focus(xo)},Ur=(yn,Cn)=>{yn.addCommand("mceShowCharmap",()=>{Xt(yn,Cn)})},co=(yn,Cn)=>{yn.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(Nn,sn)=>new Promise((kn,Ln)=>{kn(Dn(Cn,Nn))}),onAction:(Nn,sn,kn)=>{yn.selection.setRng(sn),yn.insertContent(kn),Nn.hide()}})},Vo=yn=>Cn=>{const Nn=()=>{Cn.setEnabled(yn.selection.isEditable())};return yn.on("NodeChange",Nn),Nn(),()=>{yn.off("NodeChange",Nn)}},yo=yn=>{const Cn=()=>yn.execCommand("mceShowCharmap");yn.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:Cn,onSetup:Vo(yn)}),yn.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:Cn,onSetup:Vo(yn)})};var ko=()=>{o.add("charmap",yn=>{Mn(yn);const Cn=fo(yn);return Ur(yn,Cn),yo(yn),co(yn,Cn[0]),Fn(yn)})};ko()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(_e,ot)=>{_e.focus(),_e.undoManager.transact(()=>{_e.setContent(ot)}),_e.selection.setCursorLocation(),_e.nodeChanged()},s=_e=>_e.getContent({source_view:!0}),a=_e=>{const ot=s(_e);_e.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:ot},onSubmit:st=>{e(_e,st.getData().code),st.close()}})},d=_e=>{_e.addCommand("mceCodeEditor",()=>{a(_e)})},b=_e=>{const ot=()=>_e.execCommand("mceCodeEditor");_e.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:ot}),_e.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:ot})};var _=()=>{o.add("code",_e=>(d(_e),b(_e),{}))};_()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=Mt=>Mt==null,s=Mt=>!e(Mt),a=()=>{},d=Mt=>()=>Mt;class b{constructor(Hn,cn){this.tag=Hn,this.value=cn}static some(Hn){return new b(!0,Hn)}static none(){return b.singletonNone}fold(Hn,cn){return this.tag?cn(this.value):Hn()}isSome(){return this.tag}isNone(){return!this.tag}map(Hn){return this.tag?b.some(Hn(this.value)):b.none()}bind(Hn){return this.tag?Hn(this.value):b.none()}exists(Hn){return this.tag&&Hn(this.value)}forall(Hn){return!this.tag||Hn(this.value)}filter(Hn){return!this.tag||Hn(this.value)?this:b.none()}getOr(Hn){return this.tag?this.value:Hn}or(Hn){return this.tag?this:Hn}getOrThunk(Hn){return this.tag?this.value:Hn()}orThunk(Hn){return this.tag?this:Hn()}getOrDie(Hn){if(this.tag)return this.value;throw new Error(Hn??"Called getOrDie on None")}static from(Hn){return s(Hn)?b.some(Hn):b.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Hn){this.tag&&Hn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}b.singletonNone=new b(!1);const _=(Mt,Hn)=>Hn>=0&&Hn<Mt.length?b.some(Mt[Hn]):b.none(),_e=Mt=>_(Mt,0);var ot=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");const st=typeof window<"u"?window:Function("return this;")(),ct=function(Mt,Hn,cn){const fo=window.Prism;window.Prism={manual:!0};var Fn=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{},Tn=function(qn){var nr=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,oo=0,Mo={},Dn={manual:qn.Prism&&qn.Prism.manual,disableWorkerMessageHandler:qn.Prism&&qn.Prism.disableWorkerMessageHandler,util:{encode:function sn(kn){return kn instanceof xo?new xo(kn.type,sn(kn.content),kn.alias):Array.isArray(kn)?kn.map(sn):kn.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(sn){return Object.prototype.toString.call(sn).slice(8,-1)},objId:function(sn){return sn.__id||Object.defineProperty(sn,"__id",{value:++oo}),sn.__id},clone:function sn(kn,Ln){Ln=Ln||{};var Bn,Eo;switch(Dn.util.type(kn)){case"Object":if(Eo=Dn.util.objId(kn),Ln[Eo])return Ln[Eo];Bn={},Ln[Eo]=Bn;for(var Wn in kn)kn.hasOwnProperty(Wn)&&(Bn[Wn]=sn(kn[Wn],Ln));return Bn;case"Array":return Eo=Dn.util.objId(kn),Ln[Eo]?Ln[Eo]:(Bn=[],Ln[Eo]=Bn,kn.forEach(function(Rn,Qn){Bn[Qn]=sn(Rn,Ln)}),Bn);default:return kn}},getLanguage:function(sn){for(;sn;){var kn=nr.exec(sn.className);if(kn)return kn[1].toLowerCase();sn=sn.parentElement}return"none"},setLanguage:function(sn,kn){sn.className=sn.className.replace(RegExp(nr,"gi"),""),sn.classList.add("language-"+kn)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(Bn){var sn=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Bn.stack)||[])[1];if(sn){var kn=document.getElementsByTagName("script");for(var Ln in kn)if(kn[Ln].src==sn)return kn[Ln]}return null}},isActive:function(sn,kn,Ln){for(var Bn="no-"+kn;sn;){var Eo=sn.classList;if(Eo.contains(kn))return!0;if(Eo.contains(Bn))return!1;sn=sn.parentElement}return!!Ln}},languages:{plain:Mo,plaintext:Mo,text:Mo,txt:Mo,extend:function(sn,kn){var Ln=Dn.util.clone(Dn.languages[sn]);for(var Bn in kn)Ln[Bn]=kn[Bn];return Ln},insertBefore:function(sn,kn,Ln,Bn){Bn=Bn||Dn.languages;var Eo=Bn[sn],Wn={};for(var Rn in Eo)if(Eo.hasOwnProperty(Rn)){if(Rn==kn)for(var Qn in Ln)Ln.hasOwnProperty(Qn)&&(Wn[Qn]=Ln[Qn]);Ln.hasOwnProperty(Rn)||(Wn[Rn]=Eo[Rn])}var vo=Bn[sn];return Bn[sn]=Wn,Dn.languages.DFS(Dn.languages,function(Gn,ro){ro===vo&&Gn!=sn&&(this[Gn]=Wn)}),Wn},DFS:function sn(kn,Ln,Bn,Eo){Eo=Eo||{};var Wn=Dn.util.objId;for(var Rn in kn)if(kn.hasOwnProperty(Rn)){Ln.call(kn,Rn,kn[Rn],Bn||Rn);var Qn=kn[Rn],vo=Dn.util.type(Qn);vo==="Object"&&!Eo[Wn(Qn)]?(Eo[Wn(Qn)]=!0,sn(Qn,Ln,null,Eo)):vo==="Array"&&!Eo[Wn(Qn)]&&(Eo[Wn(Qn)]=!0,sn(Qn,Ln,Rn,Eo))}}},plugins:{},highlightAll:function(sn,kn){Dn.highlightAllUnder(document,sn,kn)},highlightAllUnder:function(sn,kn,Ln){var Bn={callback:Ln,container:sn,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};Dn.hooks.run("before-highlightall",Bn),Bn.elements=Array.prototype.slice.apply(Bn.container.querySelectorAll(Bn.selector)),Dn.hooks.run("before-all-elements-highlight",Bn);for(var Eo=0,Wn;Wn=Bn.elements[Eo++];)Dn.highlightElement(Wn,kn===!0,Bn.callback)},highlightElement:function(sn,kn,Ln){var Bn=Dn.util.getLanguage(sn),Eo=Dn.languages[Bn];Dn.util.setLanguage(sn,Bn);var Wn=sn.parentElement;Wn&&Wn.nodeName.toLowerCase()==="pre"&&Dn.util.setLanguage(Wn,Bn);var Rn=sn.textContent,Qn={element:sn,language:Bn,grammar:Eo,code:Rn};function vo(ro){Qn.highlightedCode=ro,Dn.hooks.run("before-insert",Qn),Qn.element.innerHTML=Qn.highlightedCode,Dn.hooks.run("after-highlight",Qn),Dn.hooks.run("complete",Qn),Ln&&Ln.call(Qn.element)}if(Dn.hooks.run("before-sanity-check",Qn),Wn=Qn.element.parentElement,Wn&&Wn.nodeName.toLowerCase()==="pre"&&!Wn.hasAttribute("tabindex")&&Wn.setAttribute("tabindex","0"),!Qn.code){Dn.hooks.run("complete",Qn),Ln&&Ln.call(Qn.element);return}if(Dn.hooks.run("before-highlight",Qn),!Qn.grammar){vo(Dn.util.encode(Qn.code));return}if(kn&&qn.Worker){var Gn=new Worker(Dn.filename);Gn.onmessage=function(ro){vo(ro.data)},Gn.postMessage(JSON.stringify({language:Qn.language,code:Qn.code,immediateClose:!0}))}else vo(Dn.highlight(Qn.code,Qn.grammar,Qn.language))},highlight:function(sn,kn,Ln){var Bn={code:sn,grammar:kn,language:Ln};if(Dn.hooks.run("before-tokenize",Bn),!Bn.grammar)throw new Error('The language "'+Bn.language+'" has no grammar.');return Bn.tokens=Dn.tokenize(Bn.code,Bn.grammar),Dn.hooks.run("after-tokenize",Bn),xo.stringify(Dn.util.encode(Bn.tokens),Bn.language)},tokenize:function(sn,kn){var Ln=kn.rest;if(Ln){for(var Bn in Ln)kn[Bn]=Ln[Bn];delete kn.rest}var Eo=new co;return Vo(Eo,Eo.head,sn),Ur(sn,Eo,kn,Eo.head,0),ko(Eo)},hooks:{all:{},add:function(sn,kn){var Ln=Dn.hooks.all;Ln[sn]=Ln[sn]||[],Ln[sn].push(kn)},run:function(sn,kn){var Ln=Dn.hooks.all[sn];if(!(!Ln||!Ln.length))for(var Bn=0,Eo;Eo=Ln[Bn++];)Eo(kn)}},Token:xo};qn.Prism=Dn;function xo(sn,kn,Ln,Bn){this.type=sn,this.content=kn,this.alias=Ln,this.length=(Bn||"").length|0}xo.stringify=function sn(kn,Ln){if(typeof kn=="string")return kn;if(Array.isArray(kn)){var Bn="";return kn.forEach(function(vo){Bn+=sn(vo,Ln)}),Bn}var Eo={type:kn.type,content:sn(kn.content,Ln),tag:"span",classes:["token",kn.type],attributes:{},language:Ln},Wn=kn.alias;Wn&&(Array.isArray(Wn)?Array.prototype.push.apply(Eo.classes,Wn):Eo.classes.push(Wn)),Dn.hooks.run("wrap",Eo);var Rn="";for(var Qn in Eo.attributes)Rn+=" "+Qn+'="'+(Eo.attributes[Qn]||"").replace(/"/g,"&quot;")+'"';return"<"+Eo.tag+' class="'+Eo.classes.join(" ")+'"'+Rn+">"+Eo.content+"</"+Eo.tag+">"};function Xt(sn,kn,Ln,Bn){sn.lastIndex=kn;var Eo=sn.exec(Ln);if(Eo&&Bn&&Eo[1]){var Wn=Eo[1].length;Eo.index+=Wn,Eo[0]=Eo[0].slice(Wn)}return Eo}function Ur(sn,kn,Ln,Bn,Eo,Wn){for(var Rn in Ln)if(!(!Ln.hasOwnProperty(Rn)||!Ln[Rn])){var Qn=Ln[Rn];Qn=Array.isArray(Qn)?Qn:[Qn];for(var vo=0;vo<Qn.length;++vo){if(Wn&&Wn.cause==Rn+","+vo)return;var Gn=Qn[vo],ro=Gn.inside,Co=!!Gn.lookbehind,Do=!!Gn.greedy,Mr=Gn.alias;if(Do&&!Gn.pattern.global){var ar=Gn.pattern.toString().match(/[imsuy]*$/)[0];Gn.pattern=RegExp(Gn.pattern.source,ar+"g")}for(var xr=Gn.pattern||Gn,us=Bn.next,wr=Eo;us!==kn.tail&&!(Wn&&wr>=Wn.reach);wr+=us.value.length,us=us.next){var gs=us.value;if(kn.length>sn.length)return;if(!(gs instanceof xo)){var Ts=1,Rs;if(Do){if(Rs=Xt(xr,wr,sn,Co),!Rs||Rs.index>=sn.length)break;var or=Rs.index,Cl=Rs.index+Rs[0].length,Yr=wr;for(Yr+=us.value.length;or>=Yr;)us=us.next,Yr+=us.value.length;if(Yr-=us.value.length,wr=Yr,us.value instanceof xo)continue;for(var Dl=us;Dl!==kn.tail&&(Yr<Cl||typeof Dl.value=="string");Dl=Dl.next)Ts++,Yr+=Dl.value.length;Ts--,gs=sn.slice(wr,Yr),Rs.index-=wr}else if(Rs=Xt(xr,0,gs,Co),!Rs)continue;var or=Rs.index,Ds=Rs[0],hu=gs.slice(0,or),au=gs.slice(or+Ds.length),_c=wr+gs.length;Wn&&_c>Wn.reach&&(Wn.reach=_c);var Su=us.prev;hu&&(Su=Vo(kn,Su,hu),wr+=hu.length),yo(kn,Su,Ts);var Zs=new xo(Rn,ro?Dn.tokenize(Ds,ro):Ds,Mr,Ds);if(us=Vo(kn,Su,Zs),au&&Vo(kn,us,au),Ts>1){var Eu={cause:Rn+","+vo,reach:_c};Ur(sn,kn,Ln,us.prev,wr,Eu),Wn&&Eu.reach>Wn.reach&&(Wn.reach=Eu.reach)}}}}}}function co(){var sn={value:null,prev:null,next:null},kn={value:null,prev:sn,next:null};sn.next=kn,this.head=sn,this.tail=kn,this.length=0}function Vo(sn,kn,Ln){var Bn=kn.next,Eo={value:Ln,prev:kn,next:Bn};return kn.next=Eo,Bn.prev=Eo,sn.length++,Eo}function yo(sn,kn,Ln){for(var Bn=kn.next,Eo=0;Eo<Ln&&Bn!==sn.tail;Eo++)Bn=Bn.next;kn.next=Bn,Bn.prev=kn,sn.length-=Eo}function ko(sn){for(var kn=[],Ln=sn.head.next;Ln!==sn.tail;)kn.push(Ln.value),Ln=Ln.next;return kn}if(!qn.document)return qn.addEventListener&&(Dn.disableWorkerMessageHandler||qn.addEventListener("message",function(sn){var kn=JSON.parse(sn.data),Ln=kn.language,Bn=kn.code,Eo=kn.immediateClose;qn.postMessage(Dn.highlight(Bn,Dn.languages[Ln],Ln)),Eo&&qn.close()},!1)),Dn;var yn=Dn.util.currentScript();yn&&(Dn.filename=yn.src,yn.hasAttribute("data-manual")&&(Dn.manual=!0));function Cn(){Dn.manual||Dn.highlightAll()}if(!Dn.manual){var Nn=document.readyState;Nn==="loading"||Nn==="interactive"&&yn&&yn.defer?document.addEventListener("DOMContentLoaded",Cn):window.requestAnimationFrame?window.requestAnimationFrame(Cn):window.setTimeout(Cn,16)}return Dn}(Fn);return Tn.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(qn){function nr(oo,Mo){return"___"+oo.toUpperCase()+Mo+"___"}Object.defineProperties(qn.languages["markup-templating"]={},{buildPlaceholders:{value:function(oo,Mo,Dn,xo){if(oo.language===Mo){var Xt=oo.tokenStack=[];oo.code=oo.code.replace(Dn,function(Ur){if(typeof xo=="function"&&!xo(Ur))return Ur;for(var co=Xt.length,Vo;oo.code.indexOf(Vo=nr(Mo,co))!==-1;)++co;return Xt[co]=Ur,Vo}),oo.grammar=qn.languages.markup}}},tokenizePlaceholders:{value:function(oo,Mo){if(oo.language!==Mo||!oo.tokenStack)return;oo.grammar=qn.languages[Mo];var Dn=0,xo=Object.keys(oo.tokenStack);function Xt(Ur){for(var co=0;co<Ur.length&&!(Dn>=xo.length);co++){var Vo=Ur[co];if(typeof Vo=="string"||Vo.content&&typeof Vo.content=="string"){var yo=xo[Dn],ko=oo.tokenStack[yo],yn=typeof Vo=="string"?Vo:Vo.content,Cn=nr(Mo,yo),Nn=yn.indexOf(Cn);if(Nn>-1){++Dn;var sn=yn.substring(0,Nn),kn=new qn.Token(Mo,qn.tokenize(ko,oo.grammar),"language-"+Mo,ko),Ln=yn.substring(Nn+Cn.length),Bn=[];sn&&Bn.push.apply(Bn,Xt([sn])),Bn.push(kn),Ln&&Bn.push.apply(Bn,Xt([Ln])),typeof Vo=="string"?Ur.splice.apply(Ur,[co,1].concat(Bn)):Vo.content=Bn}}else Vo.content&&Xt(Vo.content)}return Ur}Xt(oo.tokens)}}})}(Tn),Tn.languages.c=Tn.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Tn.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Tn.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Tn.languages.c.string],char:Tn.languages.c.char,comment:Tn.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Tn.languages.c}}}}),Tn.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Tn.languages.c.boolean,function(qn){var nr=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,oo=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return nr.source});qn.languages.cpp=qn.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return nr.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:nr,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),qn.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return oo})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),qn.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:qn.languages.cpp}}}}),qn.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),qn.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:qn.languages.extend("cpp",{})}}),qn.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},qn.languages.cpp["base-clause"])}(Tn),function(qn){function nr(Rs,Cl){return Rs.replace(/<<(\d+)>>/g,function(Yr,Dl){return"(?:"+Cl[+Dl]+")"})}function oo(Rs,Cl,Yr){return RegExp(nr(Rs,Cl),"")}function Mo(Rs,Cl){for(var Yr=0;Yr<Cl;Yr++)Rs=Rs.replace(/<<self>>/g,function(){return"(?:"+Rs+")"});return Rs.replace(/<<self>>/g,"[^\\s\\S]")}var Dn={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function xo(Rs){return"\\b(?:"+Rs.trim().replace(/ /g,"|")+")\\b"}var Xt=xo(Dn.typeDeclaration),Ur=RegExp(xo(Dn.type+" "+Dn.typeDeclaration+" "+Dn.contextual+" "+Dn.other)),co=xo(Dn.typeDeclaration+" "+Dn.contextual+" "+Dn.other),Vo=xo(Dn.type+" "+Dn.typeDeclaration+" "+Dn.other),yo=Mo(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),ko=Mo(/\((?:[^()]|<<self>>)*\)/.source,2),yn=/@?\b[A-Za-z_]\w*\b/.source,Cn=nr(/<<0>>(?:\s*<<1>>)?/.source,[yn,yo]),Nn=nr(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[co,Cn]),sn=/\[\s*(?:,\s*)*\]/.source,kn=nr(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[Nn,sn]),Ln=nr(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[yo,ko,sn]),Bn=nr(/\(<<0>>+(?:,<<0>>+)+\)/.source,[Ln]),Eo=nr(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[Bn,Nn,sn]),Wn={keyword:Ur,punctuation:/[<>()?,.:[\]]/},Rn=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,Qn=/"(?:\\.|[^\\"\r\n])*"/.source,vo=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;qn.languages.csharp=qn.languages.extend("clike",{string:[{pattern:oo(/(^|[^$\\])<<0>>/.source,[vo]),lookbehind:!0,greedy:!0},{pattern:oo(/(^|[^@$\\])<<0>>/.source,[Qn]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:oo(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[Nn]),lookbehind:!0,inside:Wn},{pattern:oo(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[yn,Eo]),lookbehind:!0,inside:Wn},{pattern:oo(/(\busing\s+)<<0>>(?=\s*=)/.source,[yn]),lookbehind:!0},{pattern:oo(/(\b<<0>>\s+)<<1>>/.source,[Xt,Cn]),lookbehind:!0,inside:Wn},{pattern:oo(/(\bcatch\s*\(\s*)<<0>>/.source,[Nn]),lookbehind:!0,inside:Wn},{pattern:oo(/(\bwhere\s+)<<0>>/.source,[yn]),lookbehind:!0},{pattern:oo(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[kn]),lookbehind:!0,inside:Wn},{pattern:oo(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[Eo,Vo,yn]),inside:Wn}],keyword:Ur,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),qn.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),qn.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:oo(/([(,]\s*)<<0>>(?=\s*:)/.source,[yn]),lookbehind:!0,alias:"punctuation"}}),qn.languages.insertBefore("csharp","class-name",{namespace:{pattern:oo(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[yn]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:oo(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[ko]),lookbehind:!0,alias:"class-name",inside:Wn},"return-type":{pattern:oo(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[Eo,Nn]),inside:Wn,alias:"class-name"},"constructor-invocation":{pattern:oo(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[Eo]),lookbehind:!0,inside:Wn,alias:"class-name"},"generic-method":{pattern:oo(/<<0>>\s*<<1>>(?=\s*\()/.source,[yn,yo]),inside:{function:oo(/^<<0>>/.source,[yn]),generic:{pattern:RegExp(yo),alias:"class-name",inside:Wn}}},"type-list":{pattern:oo(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[Xt,Cn,yn,Eo,Ur.source,ko,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:oo(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[Cn,ko]),lookbehind:!0,greedy:!0,inside:qn.languages.csharp},keyword:Ur,"class-name":{pattern:RegExp(Eo),greedy:!0,inside:Wn},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var Gn=Qn+"|"+Rn,ro=nr(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[Gn]),Co=Mo(nr(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[ro]),2),Do=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,Mr=nr(/<<0>>(?:\s*\(<<1>>*\))?/.source,[Nn,Co]);qn.languages.insertBefore("csharp","class-name",{attribute:{pattern:oo(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[Do,Mr]),lookbehind:!0,greedy:!0,inside:{target:{pattern:oo(/^<<0>>(?=\s*:)/.source,[Do]),alias:"keyword"},"attribute-arguments":{pattern:oo(/\(<<0>>*\)/.source,[Co]),inside:qn.languages.csharp},"class-name":{pattern:RegExp(Nn),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var ar=/:[^}\r\n]+/.source,xr=Mo(nr(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[ro]),2),us=nr(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[xr,ar]),wr=Mo(nr(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[Gn]),2),gs=nr(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[wr,ar]);function Ts(Rs,Cl){return{interpolation:{pattern:oo(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[Rs]),lookbehind:!0,inside:{"format-string":{pattern:oo(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[Cl,ar]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:qn.languages.csharp}}},string:/[\s\S]+/}}qn.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:oo(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[us]),lookbehind:!0,greedy:!0,inside:Ts(us,xr)},{pattern:oo(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[gs]),lookbehind:!0,greedy:!0,inside:Ts(gs,wr)}],char:{pattern:RegExp(Rn),greedy:!0}}),qn.languages.dotnet=qn.languages.cs=qn.languages.csharp}(Tn),function(qn){var nr=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;qn.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+nr.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+nr.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+nr.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+nr.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:nr,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},qn.languages.css.atrule.inside.rest=qn.languages.css;var oo=qn.languages.markup;oo&&(oo.tag.addInlined("style","css"),oo.tag.addAttribute("style","css"))}(Tn),function(qn){var nr=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,oo=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,Mo={pattern:RegExp(/(^|[^\w.])/.source+oo+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};qn.languages.java=qn.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[Mo,{pattern:RegExp(/(^|[^\w.])/.source+oo+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:Mo.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+oo+/[A-Z]\w*\b/.source),lookbehind:!0,inside:Mo.inside}],keyword:nr,function:[qn.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),qn.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),qn.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":Mo,keyword:nr,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+oo+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:Mo.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+oo+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:Mo.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return nr.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Tn),Tn.languages.javascript=Tn.languages.extend("clike",{"class-name":[Tn.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Tn.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Tn.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Tn.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Tn.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Tn.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Tn.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Tn.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Tn.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Tn.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Tn.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Tn.languages.markup&&(Tn.languages.markup.tag.addInlined("script","javascript"),Tn.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Tn.languages.js=Tn.languages.javascript,Tn.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Tn.languages.markup.tag.inside["attr-value"].inside.entity=Tn.languages.markup.entity,Tn.languages.markup.doctype.inside["internal-subset"].inside=Tn.languages.markup,Tn.hooks.add("wrap",function(qn){qn.type==="entity"&&(qn.attributes.title=qn.content.replace(/&amp;/,"&"))}),Object.defineProperty(Tn.languages.markup.tag,"addInlined",{value:function(nr,oo){var Mo={};Mo["language-"+oo]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Tn.languages[oo]},Mo.cdata=/^<!\[CDATA\[|\]\]>$/i;var Dn={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:Mo}};Dn["language-"+oo]={pattern:/[\s\S]+/,inside:Tn.languages[oo]};var xo={};xo[nr]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return nr}),"i"),lookbehind:!0,greedy:!0,inside:Dn},Tn.languages.insertBefore("markup","cdata",xo)}}),Object.defineProperty(Tn.languages.markup.tag,"addAttribute",{value:function(qn,nr){Tn.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+qn+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[nr,"language-"+nr],inside:Tn.languages[nr]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Tn.languages.html=Tn.languages.markup,Tn.languages.mathml=Tn.languages.markup,Tn.languages.svg=Tn.languages.markup,Tn.languages.xml=Tn.languages.extend("markup",{}),Tn.languages.ssml=Tn.languages.xml,Tn.languages.atom=Tn.languages.xml,Tn.languages.rss=Tn.languages.xml,function(qn){var nr=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,oo=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],Mo=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,Dn=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,xo=/[{}\[\](),:;]/;qn.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:nr,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:oo,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:Mo,operator:Dn,punctuation:xo};var Xt={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:qn.languages.php},Ur=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:Xt}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:Xt}}];qn.languages.insertBefore("php","variable",{string:Ur,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:nr,string:Ur,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:oo,number:Mo,operator:Dn,punctuation:xo}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),qn.hooks.add("before-tokenize",function(co){if(/<\?/.test(co.code)){var Vo=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;qn.languages["markup-templating"].buildPlaceholders(co,"php",Vo)}}),qn.hooks.add("after-tokenize",function(co){qn.languages["markup-templating"].tokenizePlaceholders(co,"php")})}(Tn),Tn.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Tn.languages.python["string-interpolation"].inside.interpolation.inside.rest=Tn.languages.python,Tn.languages.py=Tn.languages.python,function(qn){qn.languages.ruby=qn.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),qn.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var nr={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:qn.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete qn.languages.ruby.function;var oo="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",Mo=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;qn.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+oo+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:nr,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:nr,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+Mo),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+Mo+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),qn.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+oo),greedy:!0,inside:{interpolation:nr,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:nr,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:nr,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+oo),greedy:!0,inside:{interpolation:nr,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:nr,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete qn.languages.ruby.string,qn.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),qn.languages.rb=qn.languages.ruby}(Tn),window.Prism=fo,Tn}(),ft=Mt=>Hn=>Hn.options.get(Mt),mt=Mt=>{const Hn=Mt.options.register;Hn("codesample_languages",{processor:"object[]"}),Hn("codesample_global_prismjs",{processor:"boolean",default:!1})},bt=ft("codesample_languages"),wt=ft("codesample_global_prismjs"),Ct=Mt=>st.Prism&&wt(Mt)?st.Prism:ct,Rt=Mt=>s(Mt)&&Mt.nodeName==="PRE"&&Mt.className.indexOf("language-")!==-1,It=Mt=>{const Hn=Mt.selection?Mt.selection.getNode():null;return Rt(Hn)?b.some(Hn):b.none()},Pt=(Mt,Hn,cn)=>{const fo=Mt.dom;Mt.undoManager.transact(()=>{const Fn=It(Mt);return cn=ot.DOM.encode(cn),Fn.fold(()=>{Mt.insertContent('<pre id="__new" class="language-'+Hn+'">'+cn+"</pre>");const Tn=fo.select("#__new")[0];fo.setAttrib(Tn,"id",null),Mt.selection.select(Tn)},Tn=>{fo.setAttrib(Tn,"class","language-"+Hn),Tn.innerHTML=cn,Ct(Mt).highlightElement(Tn),Mt.selection.select(Tn)})})},Tt=Mt=>It(Mt).bind(cn=>b.from(cn.textContent)).getOr(""),Gt=Mt=>{const Hn=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],cn=bt(Mt);return cn||Hn},Jt=(Mt,Hn)=>It(Mt).fold(()=>Hn,fo=>{const Fn=fo.className.match(/language-(\w+)/);return Fn?Fn[1]:Hn}),qt=Mt=>{const Hn=Gt(Mt),cn=_e(Hn).fold(d(""),Tn=>Tn.value),fo=Jt(Mt,cn),Fn=Tt(Mt);Mt.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"listbox",name:"language",label:"Language",items:Hn},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:fo,code:Fn},onSubmit:Tn=>{const qn=Tn.getData();Pt(Mt,qn.language,qn.code),Tn.close()}})},Nt=Mt=>{Mt.addCommand("codesample",()=>{const Hn=Mt.selection.getNode();Mt.selection.isCollapsed()||Rt(Hn)?qt(Mt):Mt.formatter.toggle("code")})},fn=(Mt=>Hn=>Hn.replace(Mt,""))(/^\s+|\s+$/g);var Mn=tinymce.util.Tools.resolve("tinymce.util.Tools");const ln=Mt=>{Mt.on("PreProcess",Hn=>{const cn=Mt.dom,fo=cn.select("pre[contenteditable=false]",Hn.node);Mn.each(Mn.grep(fo,Rt),Fn=>{const Tn=Fn.textContent;cn.setAttrib(Fn,"class",fn(cn.getAttrib(Fn,"class"))),cn.setAttrib(Fn,"contentEditable",null),cn.setAttrib(Fn,"data-mce-highlighted",null);let qn;for(;qn=Fn.firstChild;)Fn.removeChild(qn);const nr=cn.add(Fn,"code");nr.textContent=Tn})}),Mt.on("SetContent",()=>{const Hn=Mt.dom,cn=Mn.grep(Hn.select("pre"),fo=>Rt(fo)&&Hn.getAttrib(fo,"data-mce-highlighted")!=="true");cn.length&&Mt.undoManager.transact(()=>{Mn.each(cn,fo=>{var Fn;Mn.each(Hn.select("br",fo),Tn=>{Hn.replace(Mt.getDoc().createTextNode(`
`),Tn)}),fo.innerHTML=Hn.encode((Fn=fo.textContent)!==null&&Fn!==void 0?Fn:""),Ct(Mt).highlightElement(fo),Hn.setAttrib(fo,"data-mce-highlighted",!0),fo.className=fn(fo.className)})})}),Mt.on("PreInit",()=>{Mt.parser.addNodeFilter("pre",Hn=>{var cn;for(let fo=0,Fn=Hn.length;fo<Fn;fo++){const Tn=Hn[fo];((cn=Tn.attr("class"))!==null&&cn!==void 0?cn:"").indexOf("language-")!==-1&&(Tn.attr("contenteditable","false"),Tn.attr("data-mce-highlighted","false"))}})})},Wt=(Mt,Hn=a)=>cn=>{const fo=()=>{cn.setEnabled(Mt.selection.isEditable()),Hn(cn)};return Mt.on("NodeChange",fo),fo(),()=>{Mt.off("NodeChange",fo)}},so=Mt=>{const Hn=Mt.selection.getStart();return Mt.dom.is(Hn,'pre[class*="language-"]')},pn=Mt=>{const Hn=()=>Mt.execCommand("codesample");Mt.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:Hn,onSetup:Wt(Mt,cn=>{cn.setActive(so(Mt))})}),Mt.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:Hn,onSetup:Wt(Mt)})};var hn=()=>{o.add("codesample",Mt=>{mt(Mt),ln(Mt),pn(Mt),Nt(Mt),Mt.on("dblclick",Hn=>{Rt(Hn.target)&&qt(Mt)})})};hn()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(Gn,ro,Co)=>{var Do;return Co(Gn,ro.prototype)?!0:((Do=Gn.constructor)===null||Do===void 0?void 0:Do.name)===ro.name},s=Gn=>{const ro=typeof Gn;return Gn===null?"null":ro==="object"&&Array.isArray(Gn)?"array":ro==="object"&&e(Gn,String,(Co,Do)=>Do.isPrototypeOf(Co))?"string":ro},a=Gn=>ro=>s(ro)===Gn,d=Gn=>ro=>typeof ro===Gn,b=a("string"),_=d("boolean"),_e=Gn=>Gn==null,ot=Gn=>!_e(Gn),st=d("function"),ct=d("number"),ft=(Gn,ro)=>Co=>Gn(ro(Co)),bt=(Gn=>()=>Gn)(!1);class wt{constructor(ro,Co){this.tag=ro,this.value=Co}static some(ro){return new wt(!0,ro)}static none(){return wt.singletonNone}fold(ro,Co){return this.tag?Co(this.value):ro()}isSome(){return this.tag}isNone(){return!this.tag}map(ro){return this.tag?wt.some(ro(this.value)):wt.none()}bind(ro){return this.tag?ro(this.value):wt.none()}exists(ro){return this.tag&&ro(this.value)}forall(ro){return!this.tag||ro(this.value)}filter(ro){return!this.tag||ro(this.value)?this:wt.none()}getOr(ro){return this.tag?this.value:ro}or(ro){return this.tag?this:ro}getOrThunk(ro){return this.tag?this.value:ro()}orThunk(ro){return this.tag?this:ro()}getOrDie(ro){if(this.tag)return this.value;throw new Error(ro??"Called getOrDie on None")}static from(ro){return ot(ro)?wt.some(ro):wt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ro){this.tag&&ro(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}wt.singletonNone=new wt(!1);const Ct=(Gn,ro)=>{const Co=Gn.length,Do=new Array(Co);for(let Mr=0;Mr<Co;Mr++){const ar=Gn[Mr];Do[Mr]=ro(ar,Mr)}return Do},Rt=(Gn,ro)=>{for(let Co=0,Do=Gn.length;Co<Do;Co++){const Mr=Gn[Co];ro(Mr,Co)}},It=(Gn,ro)=>{const Co=[];for(let Do=0,Mr=Gn.length;Do<Mr;Do++){const ar=Gn[Do];ro(ar,Do)&&Co.push(ar)}return Co},Pt=11,Tt=1,Gt=3,Jt=(Gn,ro)=>{const Do=(ro||document).createElement("div");if(Do.innerHTML=Gn,!Do.hasChildNodes()||Do.childNodes.length>1){const Mr="HTML does not have a single root node";throw console.error(Mr,Gn),new Error(Mr)}return Qt(Do.childNodes[0])},qt=(Gn,ro)=>{const Do=(ro||document).createElement(Gn);return Qt(Do)},Nt=(Gn,ro)=>{const Do=(ro||document).createTextNode(Gn);return Qt(Do)},Qt=Gn=>{if(Gn==null)throw new Error("Node cannot be null or undefined");return{dom:Gn}},Mn={fromHtml:Jt,fromTag:qt,fromText:Nt,fromDom:Qt,fromPoint:(Gn,ro,Co)=>wt.from(Gn.dom.elementFromPoint(ro,Co)).map(Qt)},ln=(Gn,ro)=>{const Co=Gn.dom;if(Co.nodeType!==Tt)return!1;{const Do=Co;if(Do.matches!==void 0)return Do.matches(ro);if(Do.msMatchesSelector!==void 0)return Do.msMatchesSelector(ro);if(Do.webkitMatchesSelector!==void 0)return Do.webkitMatchesSelector(ro);if(Do.mozMatchesSelector!==void 0)return Do.mozMatchesSelector(ro);throw new Error("Browser lacks native selectors")}};typeof window<"u"||Function("return this;")();const Wt=Gn=>Gn.dom.nodeName.toLowerCase(),so=Gn=>Gn.dom.nodeType,pn=Gn=>ro=>so(ro)===Gn,hn=pn(Tt),Mt=pn(Gt),Hn=pn(Pt),cn=Gn=>ro=>hn(ro)&&Wt(ro)===Gn,fo=Gn=>wt.from(Gn.dom.parentNode).map(Mn.fromDom),Fn=Gn=>Ct(Gn.dom.childNodes,Mn.fromDom),Tn=(Gn,ro,Co)=>{if(b(Co)||_(Co)||ct(Co))Gn.setAttribute(ro,Co+"");else throw console.error("Invalid call to Attribute.set. Key ",ro,":: Value ",Co,":: Element ",Gn),new Error("Attribute value was not simple")},qn=(Gn,ro,Co)=>{Tn(Gn.dom,ro,Co)},nr=(Gn,ro)=>{Gn.dom.removeAttribute(ro)},oo=Gn=>Hn(Gn)&&ot(Gn.dom.host),Mo=Gn=>Mn.fromDom(Gn.dom.getRootNode()),Dn=Gn=>{const ro=Mo(Gn);return oo(ro)?wt.some(ro):wt.none()},xo=Gn=>Mn.fromDom(Gn.dom.host),Xt=Gn=>{const ro=Mt(Gn)?Gn.dom.parentNode:Gn.dom;if(ro==null||ro.ownerDocument===null)return!1;const Co=ro.ownerDocument;return Dn(Mn.fromDom(ro)).fold(()=>Co.body.contains(ro),ft(Xt,xo))},Ur=(Gn,ro,Co)=>{let Do=Gn.dom;const Mr=st(Co)?Co:bt;for(;Do.parentNode;){Do=Do.parentNode;const ar=Mn.fromDom(Do);if(ro(ar))return wt.some(ar);if(Mr(ar))break}return wt.none()},co=(Gn,ro,Co)=>Ur(Gn,Do=>ln(Do,ro),Co),Vo=Gn=>Gn.style!==void 0&&st(Gn.style.getPropertyValue),yo=(Gn,ro)=>{const Co=Gn.dom,Mr=window.getComputedStyle(Co).getPropertyValue(ro);return Mr===""&&!Xt(Gn)?ko(Co,ro):Mr},ko=(Gn,ro)=>Vo(Gn)?Gn.style.getPropertyValue(ro):"",yn=Gn=>yo(Gn,"direction")==="rtl"?"rtl":"ltr",Cn=(Gn,ro)=>It(Fn(Gn),ro),Nn=(Gn,ro)=>Cn(Gn,Co=>ln(Co,ro)),sn=Gn=>fo(Gn).filter(hn),kn=(Gn,ro)=>(ro?co(Gn,"ol,ul"):wt.some(Gn)).getOr(Gn),Ln=cn("li"),Bn=(Gn,ro,Co)=>{Rt(ro,Do=>{const Mr=Mn.fromDom(Do),ar=Ln(Mr),xr=kn(Mr,ar);sn(xr).each(wr=>{if(Gn.setStyle(xr.dom,"direction",null),yn(wr)===Co?nr(xr,"dir"):qn(xr,"dir",Co),yn(xr)!==Co&&Gn.setStyle(xr.dom,"direction",Co),ar){const Ts=Nn(xr,"li[dir],li[style]");Rt(Ts,Rs=>{nr(Rs,"dir"),Gn.setStyle(Rs.dom,"direction",null)})}})})},Eo=(Gn,ro)=>{Gn.selection.isEditable()&&(Bn(Gn.dom,Gn.selection.getSelectedBlocks(),ro),Gn.nodeChanged())},Wn=Gn=>{Gn.addCommand("mceDirectionLTR",()=>{Eo(Gn,"ltr")}),Gn.addCommand("mceDirectionRTL",()=>{Eo(Gn,"rtl")})},Rn=(Gn,ro)=>Co=>{const Do=Mr=>{const ar=Mn.fromDom(Mr.element);Co.setActive(yn(ar)===ro),Co.setEnabled(Gn.selection.isEditable())};return Gn.on("NodeChange",Do),Co.setEnabled(Gn.selection.isEditable()),()=>Gn.off("NodeChange",Do)},Qn=Gn=>{Gn.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>Gn.execCommand("mceDirectionLTR"),onSetup:Rn(Gn,"ltr")}),Gn.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>Gn.execCommand("mceDirectionRTL"),onSetup:Rn(Gn,"rtl")})};var vo=()=>{o.add("directionality",Gn=>{Wn(Gn),Qn(Gn)})};vo()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=kn=>Ln=>kn===Ln,s=e(null),a=e(void 0),d=kn=>kn==null,b=kn=>!d(kn),_=()=>{},ot=(kn=>()=>kn)(!1);class st{constructor(Ln,Bn){this.tag=Ln,this.value=Bn}static some(Ln){return new st(!0,Ln)}static none(){return st.singletonNone}fold(Ln,Bn){return this.tag?Bn(this.value):Ln()}isSome(){return this.tag}isNone(){return!this.tag}map(Ln){return this.tag?st.some(Ln(this.value)):st.none()}bind(Ln){return this.tag?Ln(this.value):st.none()}exists(Ln){return this.tag&&Ln(this.value)}forall(Ln){return!this.tag||Ln(this.value)}filter(Ln){return!this.tag||Ln(this.value)?this:st.none()}getOr(Ln){return this.tag?this.value:Ln}or(Ln){return this.tag?this:Ln}getOrThunk(Ln){return this.tag?this.value:Ln()}orThunk(Ln){return this.tag?this:Ln()}getOrDie(Ln){if(this.tag)return this.value;throw new Error(Ln??"Called getOrDie on None")}static from(Ln){return b(Ln)?st.some(Ln):st.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ln){this.tag&&Ln(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}st.singletonNone=new st(!1);const ct=(kn,Ln)=>{for(let Bn=0,Eo=kn.length;Bn<Eo;Bn++){const Wn=kn[Bn];if(Ln(Wn,Bn))return!0}return!1},ft=(kn,Ln)=>{const Bn=kn.length,Eo=new Array(Bn);for(let Wn=0;Wn<Bn;Wn++){const Rn=kn[Wn];Eo[Wn]=Ln(Rn,Wn)}return Eo},mt=(kn,Ln)=>{for(let Bn=0,Eo=kn.length;Bn<Eo;Bn++){const Wn=kn[Bn];Ln(Wn,Bn)}},bt=kn=>{let Ln=kn;return{get:()=>Ln,set:Wn=>{Ln=Wn}}},wt=(kn,Ln)=>{let Bn=null;const Eo=()=>{s(Bn)||(clearTimeout(Bn),Bn=null)};return{cancel:Eo,throttle:(...Rn)=>{Eo(),Bn=setTimeout(()=>{Bn=null,kn.apply(null,Rn)},Ln)}}},Ct=(kn,Ln)=>{kn.insertContent(Ln)},Rt=Object.keys,It=Object.hasOwnProperty,Pt=(kn,Ln)=>{const Bn=Rt(kn);for(let Eo=0,Wn=Bn.length;Eo<Wn;Eo++){const Rn=Bn[Eo],Qn=kn[Rn];Ln(Qn,Rn)}},Tt=(kn,Ln)=>Gt(kn,(Bn,Eo)=>({k:Eo,v:Ln(Bn,Eo)})),Gt=(kn,Ln)=>{const Bn={};return Pt(kn,(Eo,Wn)=>{const Rn=Ln(Eo,Wn);Bn[Rn.k]=Rn.v}),Bn},Jt=(kn,Ln)=>It.call(kn,Ln),Qt=(kn=>(...Ln)=>{if(Ln.length===0)throw new Error("Can't merge zero objects");const Bn={};for(let Eo=0;Eo<Ln.length;Eo++){const Wn=Ln[Eo];for(const Rn in Wn)Jt(Wn,Rn)&&(Bn[Rn]=kn(Bn[Rn],Wn[Rn]))}return Bn})((kn,Ln)=>Ln),fn=kn=>{const Ln=bt(st.none()),Bn=()=>Ln.get().each(kn);return{clear:()=>{Bn(),Ln.set(st.none())},isSet:()=>Ln.get().isSome(),get:()=>Ln.get(),set:vo=>{Bn(),Ln.set(st.some(vo))}}},Mn=()=>{const kn=fn(_);return{...kn,on:Bn=>kn.get().each(Bn)}},ln=(kn,Ln,Bn)=>Ln===""||kn.length>=Ln.length&&kn.substr(Bn,Bn+Ln.length)===Ln,Wt=(kn,Ln,Bn=0,Eo)=>{const Wn=kn.indexOf(Ln,Bn);return Wn!==-1?a(Eo)?!0:Wn+Ln.length<=Eo:!1},so=(kn,Ln)=>ln(kn,Ln,0);var pn=tinymce.util.Tools.resolve("tinymce.Resource");const hn="tinymce.plugins.emoticons",Mt=kn=>Ln=>Ln.options.get(kn),Hn=(kn,Ln)=>{const Bn=kn.options.register;Bn("emoticons_database",{processor:"string",default:"emojis"}),Bn("emoticons_database_url",{processor:"string",default:`${Ln}/js/${cn(kn)}${kn.suffix}.js`}),Bn("emoticons_database_id",{processor:"string",default:hn}),Bn("emoticons_append",{processor:"object",default:{}}),Bn("emoticons_images_url",{processor:"string",default:"https://cdnjs.cloudflare.com/ajax/libs/twemoji/15.1.0/72x72/"})},cn=Mt("emoticons_database"),fo=Mt("emoticons_database_url"),Fn=Mt("emoticons_database_id"),Tn=Mt("emoticons_append"),qn=Mt("emoticons_images_url"),nr="All",oo={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},Mo=(kn,Ln)=>Jt(kn,Ln)?kn[Ln]:Ln,Dn=kn=>{const Ln=Tn(kn);return Tt(Ln,Bn=>({keywords:[],category:"user",...Bn}))},xo=(kn,Ln,Bn)=>{const Eo=Mn(),Wn=Mn(),Rn=qn(kn),Qn=ar=>so(ar.char,"<img")?ar.char.replace(/src="([^"]+)"/,(xr,us)=>`src="${Rn}${us}"`):ar.char,vo=ar=>{const xr={},us=[];Pt(ar,(wr,gs)=>{const Ts={title:gs,keywords:wr.keywords,char:Qn(wr),category:Mo(oo,wr.category)},Rs=xr[Ts.category]!==void 0?xr[Ts.category]:[];xr[Ts.category]=Rs.concat([Ts]),us.push(Ts)}),Eo.set(xr),Wn.set(us)};kn.on("init",()=>{pn.load(Bn,Ln).then(ar=>{const xr=Dn(kn);vo(Qt(ar,xr))},ar=>{console.log(`Failed to load emojis: ${ar}`),Eo.set({}),Wn.set([])})});const Gn=ar=>ar===nr?ro():Eo.get().bind(xr=>st.from(xr[ar])).getOr([]),ro=()=>Wn.get().getOr([]),Co=()=>[nr].concat(Rt(Eo.get().getOr({}))),Do=()=>Mr()?Promise.resolve(!0):new Promise((ar,xr)=>{let us=15;const wr=setInterval(()=>{Mr()?(clearInterval(wr),ar(!0)):(us--,us<0&&(console.log("Could not load emojis from url: "+Ln),clearInterval(wr),xr(!1)))},100)}),Mr=()=>Eo.isSet()&&Wn.isSet();return{listCategories:Co,hasLoaded:Mr,waitForLoad:Do,listAll:ro,listCategory:Gn}},Xt=(kn,Ln)=>Wt(kn.title.toLowerCase(),Ln)||ct(kn.keywords,Bn=>Wt(Bn.toLowerCase(),Ln)),Ur=(kn,Ln,Bn)=>{const Eo=[],Wn=Ln.toLowerCase(),Rn=Bn.fold(()=>ot,Qn=>vo=>vo>=Qn);for(let Qn=0;Qn<kn.length&&!((Ln.length===0||Xt(kn[Qn],Wn))&&(Eo.push({value:kn[Qn].char,text:kn[Qn].title,icon:kn[Qn].char}),Rn(Eo.length)));Qn++);return Eo},co="pattern",Vo=(kn,Ln)=>{const Bn={pattern:"",results:Ur(Ln.listAll(),"",st.some(300))},Eo=bt(nr),Wn=Co=>{const Do=Co.getData(),Mr=Eo.get(),ar=Ln.listCategory(Mr),xr=Ur(ar,Do[co],Mr===nr?st.some(300):st.none());Co.setData({results:xr})},Rn=wt(Co=>{Wn(Co)},200),Qn={label:"Search",type:"input",name:co},vo={type:"collection",name:"results"},Gn=()=>({title:"Emojis",size:"normal",body:{type:"tabpanel",tabs:ft(Ln.listCategories(),Do=>({title:Do,name:Do,items:[Qn,vo]}))},initialData:Bn,onTabChange:(Do,Mr)=>{Eo.set(Mr.newTabName),Rn.throttle(Do)},onChange:Rn.throttle,onAction:(Do,Mr)=>{Mr.name==="results"&&(Ct(kn,Mr.value),Do.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}),ro=kn.windowManager.open(Gn());ro.focus(co),Ln.hasLoaded()||(ro.block("Loading emojis..."),Ln.waitForLoad().then(()=>{ro.redial(Gn()),Rn.throttle(ro),ro.focus(co),ro.unblock()}).catch(Co=>{ro.redial({title:"Emojis",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"Could not load emojis"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),ro.focus(co),ro.unblock()}))},yo=(kn,Ln)=>{kn.addCommand("mceEmoticons",()=>Vo(kn,Ln))},ko=kn=>{kn.on("PreInit",()=>{kn.parser.addAttributeFilter("data-emoticon",Ln=>{mt(Ln,Bn=>{Bn.attr("data-mce-resize","false"),Bn.attr("data-mce-placeholder","1")})})})},yn=(kn,Ln)=>{kn.ui.registry.addAutocompleter("emoticons",{trigger:":",columns:"auto",minChars:2,fetch:(Bn,Eo)=>Ln.waitForLoad().then(()=>{const Wn=Ln.listAll();return Ur(Wn,Bn,st.some(Eo))}),onAction:(Bn,Eo,Wn)=>{kn.selection.setRng(Eo),kn.insertContent(Wn),Bn.hide()}})},Cn=kn=>Ln=>{const Bn=()=>{Ln.setEnabled(kn.selection.isEditable())};return kn.on("NodeChange",Bn),Bn(),()=>{kn.off("NodeChange",Bn)}},Nn=kn=>{const Ln=()=>kn.execCommand("mceEmoticons");kn.ui.registry.addButton("emoticons",{tooltip:"Emojis",icon:"emoji",onAction:Ln,onSetup:Cn(kn)}),kn.ui.registry.addMenuItem("emoticons",{text:"Emojis...",icon:"emoji",onAction:Ln,onSetup:Cn(kn)})};var sn=()=>{o.add("emoticons",(kn,Ln)=>{Hn(kn,Ln);const Bn=fo(kn),Eo=Fn(kn),Wn=xo(kn,Bn,Eo);return yo(kn,Wn),Nn(kn),yn(kn,Wn),ko(kn),{getAllEmojis:()=>Wn.waitForLoad().then(()=>Wn.listAll())}})};sn()})();(function(){const o=vn=>{let En=vn;return{get:()=>En,set:ys=>{En=ys}}};var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=vn=>({isFullscreen:()=>vn.get()!==null}),a=(vn,En,To)=>{var Zo;return To(vn,En.prototype)?!0:((Zo=vn.constructor)===null||Zo===void 0?void 0:Zo.name)===En.name},d=vn=>{const En=typeof vn;return vn===null?"null":En==="object"&&Array.isArray(vn)?"array":En==="object"&&a(vn,String,(To,Zo)=>Zo.isPrototypeOf(To))?"string":En},b=vn=>En=>d(En)===vn,_=vn=>En=>typeof En===vn,_e=vn=>En=>vn===En,ot=b("string"),st=b("object"),ct=b("array"),ft=_e(null),mt=_("boolean"),bt=_e(void 0),wt=vn=>vn==null,Ct=vn=>!wt(vn),Rt=_("function"),It=_("number"),Pt=()=>{},Tt=(vn,En)=>(...To)=>vn(En.apply(null,To)),Gt=(vn,En)=>To=>vn(En(To)),Jt=vn=>()=>vn;function qt(vn,...En){return(...To)=>{const Zo=En.concat(To);return vn.apply(null,Zo)}}const Nt=Jt(!1),Qt=Jt(!0);class fn{constructor(En,To){this.tag=En,this.value=To}static some(En){return new fn(!0,En)}static none(){return fn.singletonNone}fold(En,To){return this.tag?To(this.value):En()}isSome(){return this.tag}isNone(){return!this.tag}map(En){return this.tag?fn.some(En(this.value)):fn.none()}bind(En){return this.tag?En(this.value):fn.none()}exists(En){return this.tag&&En(this.value)}forall(En){return!this.tag||En(this.value)}filter(En){return!this.tag||En(this.value)?this:fn.none()}getOr(En){return this.tag?this.value:En}or(En){return this.tag?this:En}getOrThunk(En){return this.tag?this.value:En()}orThunk(En){return this.tag?this:En()}getOrDie(En){if(this.tag)return this.value;throw new Error(En??"Called getOrDie on None")}static from(En){return Ct(En)?fn.some(En):fn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(En){this.tag&&En(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}fn.singletonNone=new fn(!1);const Mn=Array.prototype.push,ln=(vn,En)=>{const To=vn.length,Zo=new Array(To);for(let ys=0;ys<To;ys++){const Ml=vn[ys];Zo[ys]=En(Ml,ys)}return Zo},Wt=(vn,En)=>{for(let To=0,Zo=vn.length;To<Zo;To++){const ys=vn[To];En(ys,To)}},so=(vn,En)=>{const To=[];for(let Zo=0,ys=vn.length;Zo<ys;Zo++){const Ml=vn[Zo];En(Ml,Zo)&&To.push(Ml)}return To},pn=(vn,En,To)=>{for(let Zo=0,ys=vn.length;Zo<ys;Zo++){const Ml=vn[Zo];if(En(Ml,Zo))return fn.some(Ml);if(To(Ml,Zo))break}return fn.none()},hn=(vn,En)=>pn(vn,En,Nt),Mt=vn=>{const En=[];for(let To=0,Zo=vn.length;To<Zo;++To){if(!ct(vn[To]))throw new Error("Arr.flatten item "+To+" was not an array, input: "+vn);Mn.apply(En,vn[To])}return En},Hn=(vn,En)=>Mt(ln(vn,En)),cn=(vn,En)=>En>=0&&En<vn.length?fn.some(vn[En]):fn.none(),fo=vn=>cn(vn,0),Fn=(vn,En)=>{for(let To=0;To<vn.length;To++){const Zo=En(vn[To],To);if(Zo.isSome())return Zo}return fn.none()},Tn=(vn,En,To)=>vn.isSome()&&En.isSome()?fn.some(To(vn.getOrDie(),En.getOrDie())):fn.none(),qn=vn=>{const En=o(fn.none()),To=()=>En.get().each(vn);return{clear:()=>{To(),En.set(fn.none())},isSet:()=>En.get().isSome(),get:()=>En.get(),set:vu=>{To(),En.set(fn.some(vu))}}},nr=()=>qn(vn=>vn.unbind()),oo=()=>{const vn=qn(Pt);return{...vn,on:To=>vn.get().each(To)}},Mo=(vn,En)=>{let To=null;return{cancel:()=>{ft(To)||(clearTimeout(To),To=null)},throttle:(...Ml)=>{ft(To)&&(To=setTimeout(()=>{To=null,vn.apply(null,Ml)},En))}}},Dn=Object.keys,xo=(vn,En)=>{const To=Dn(vn);for(let Zo=0,ys=To.length;Zo<ys;Zo++){const Ml=To[Zo],_i=vn[Ml];En(_i,Ml)}},Xt=typeof window<"u"?window:Function("return this;")(),Ur=(vn,En)=>{let To=En??Xt;for(let Zo=0;Zo<vn.length&&To!==void 0&&To!==null;++Zo)To=To[vn[Zo]];return To},co=(vn,En)=>{const To=vn.split(".");return Ur(To,En)},Vo=(vn,En)=>co(vn,En),yo=(vn,En)=>{const To=Vo(vn,En);if(To==null)throw new Error(vn+" not available on this browser");return To},ko=Object.getPrototypeOf,yn=vn=>yo("HTMLElement",vn),Cn=vn=>{const En=co("ownerDocument.defaultView",vn);return st(vn)&&(yn(En).prototype.isPrototypeOf(vn)||/^HTML\w*Element$/.test(ko(vn).constructor.name))},Nn=9,sn=11,kn=1,Ln=3,Bn=vn=>vn.dom.nodeType,Eo=vn=>En=>Bn(En)===vn,Wn=vn=>Rn(vn)&&Cn(vn.dom),Rn=Eo(kn),Qn=Eo(Ln),vo=Eo(sn),Gn=(vn,En,To)=>{if(ot(To)||mt(To)||It(To))vn.setAttribute(En,To+"");else throw console.error("Invalid call to Attribute.set. Key ",En,":: Value ",To,":: Element ",vn),new Error("Attribute value was not simple")},ro=(vn,En,To)=>{Gn(vn.dom,En,To)},Co=(vn,En)=>{const To=vn.dom.getAttribute(En);return To===null?void 0:To},Do=(vn,En)=>{vn.dom.removeAttribute(En)},Mr=vn=>vn.dom.classList!==void 0,ar=(vn,En)=>Mr(vn)&&vn.dom.classList.contains(En),xr=(vn,En,To=0,Zo)=>{const ys=vn.indexOf(En,To);return ys!==-1?bt(Zo)?!0:ys+En.length<=Zo:!1},us=vn=>vn.style!==void 0&&Rt(vn.style.getPropertyValue),wr=(vn,En)=>{const Zo=(En||document).createElement("div");if(Zo.innerHTML=vn,!Zo.hasChildNodes()||Zo.childNodes.length>1){const ys="HTML does not have a single root node";throw console.error(ys,vn),new Error(ys)}return Rs(Zo.childNodes[0])},gs=(vn,En)=>{const Zo=(En||document).createElement(vn);return Rs(Zo)},Ts=(vn,En)=>{const Zo=(En||document).createTextNode(vn);return Rs(Zo)},Rs=vn=>{if(vn==null)throw new Error("Node cannot be null or undefined");return{dom:vn}},Yr={fromHtml:wr,fromTag:gs,fromText:Ts,fromDom:Rs,fromPoint:(vn,En,To)=>fn.from(vn.dom.elementFromPoint(En,To)).map(Rs)},Dl=(vn,En)=>{const To=vn.dom;if(To.nodeType!==kn)return!1;{const Zo=To;if(Zo.matches!==void 0)return Zo.matches(En);if(Zo.msMatchesSelector!==void 0)return Zo.msMatchesSelector(En);if(Zo.webkitMatchesSelector!==void 0)return Zo.webkitMatchesSelector(En);if(Zo.mozMatchesSelector!==void 0)return Zo.mozMatchesSelector(En);throw new Error("Browser lacks native selectors")}},or=vn=>vn.nodeType!==kn&&vn.nodeType!==Nn&&vn.nodeType!==sn||vn.childElementCount===0,Ds=(vn,En)=>{const To=document;return or(To)?[]:ln(To.querySelectorAll(vn),Yr.fromDom)},hu=(vn,En)=>vn.dom===En.dom,au=vn=>Yr.fromDom(vn.dom.ownerDocument),_c=vn=>fn.from(vn.dom.parentNode).map(Yr.fromDom),Su=(vn,En)=>{const To=Rt(En)?En:Nt;let Zo=vn.dom;const ys=[];for(;Zo.parentNode!==null&&Zo.parentNode!==void 0;){const Ml=Zo.parentNode,_i=Yr.fromDom(Ml);if(ys.push(_i),To(_i)===!0)break;Zo=Ml}return ys},Zs=vn=>{const En=To=>so(To,Zo=>!hu(vn,Zo));return _c(vn).map(uu).map(En).getOr([])},Eu=vn=>fn.from(vn.dom.nextSibling).map(Yr.fromDom),uu=vn=>ln(vn.dom.childNodes,Yr.fromDom),$a=vn=>vo(vn)&&Ct(vn.dom.host),es=vn=>Yr.fromDom(vn.dom.getRootNode()),yl=vn=>{const En=es(vn);return $a(En)?fn.some(En):fn.none()},mo=vn=>Yr.fromDom(vn.dom.host),Oo=vn=>{if(Ct(vn.target)){const En=Yr.fromDom(vn.target);if(Rn(En)&&Ar(En)&&vn.composed&&vn.composedPath){const To=vn.composedPath();if(To)return fo(To)}}return fn.from(vn.target)},Ar=vn=>Ct(vn.dom.shadowRoot),Br=vn=>{const En=Qn(vn)?vn.dom.parentNode:vn.dom;if(En==null||En.ownerDocument===null)return!1;const To=En.ownerDocument;return yl(Yr.fromDom(En)).fold(()=>To.body.contains(En),Gt(Br,mo))},Ws=vn=>{const En=vn.dom.body;if(En==null)throw new Error("Body is not available yet");return Yr.fromDom(En)},_l=(vn,En,To)=>{if(!ot(To))throw console.error("Invalid call to CSS.set. Property ",En,":: Value ",To,":: Element ",vn),new Error("CSS value must be a string: "+To);us(vn)&&vn.style.setProperty(En,To)},Wu=(vn,En,To)=>{const Zo=vn.dom;_l(Zo,En,To)},qu=(vn,En)=>{const To=vn.dom;xo(En,(Zo,ys)=>{_l(To,ys,Zo)})},Mu=(vn,En)=>{const To=vn.dom,ys=window.getComputedStyle(To).getPropertyValue(En);return ys===""&&!Br(vn)?Vn(To,En):ys},Vn=(vn,En)=>us(vn)?vn.style.getPropertyValue(En):"",$n=(vn,En,To,Zo,ys,Ml,_i)=>({target:vn,x:En,y:To,stop:Zo,prevent:ys,kill:Ml,raw:_i}),Po=vn=>{const En=Yr.fromDom(Oo(vn).getOr(vn.target)),To=()=>vn.stopPropagation(),Zo=()=>vn.preventDefault(),ys=Tt(Zo,To);return $n(En,vn.clientX,vn.clientY,To,Zo,ys,vn)},Ho=(vn,En)=>To=>{vn(To)&&En(Po(To))},cs=(vn,En,To,Zo,ys)=>{const Ml=Ho(To,Zo);return vn.dom.addEventListener(En,Ml,ys),{unbind:qt(zs,vn,En,Ml,ys)}},Es=(vn,En,To,Zo)=>cs(vn,En,To,Zo,!1),zs=(vn,En,To,Zo)=>{vn.dom.removeEventListener(En,To,Zo)},Pu=Qt,io=(vn,En,To)=>Es(vn,En,Pu,To),Bs=vn=>{let En=!1,To;return(...Zo)=>(En||(En=!0,To=vn.apply(null,Zo)),To)},Jn=(vn,En,To,Zo)=>{const ys=vn.isiOS()&&/ipad/i.test(To)===!0,Ml=vn.isiOS()&&!ys,_i=vn.isiOS()||vn.isAndroid(),vu=_i||Zo("(pointer:coarse)"),bp=ys||!Ml&&_i&&Zo("(min-device-width:768px)"),Lm=Ml||_i&&!bp,dm=En.isSafari()&&vn.isiOS()&&/safari/i.test(To)===!1,cp=!Lm&&!bp&&!dm;return{isiPad:Jt(ys),isiPhone:Jt(Ml),isTablet:Jt(bp),isPhone:Jt(Lm),isTouch:Jt(vu),isAndroid:vn.isAndroid,isiOS:vn.isiOS,isWebView:Jt(dm),isDesktop:Jt(cp)}},to=(vn,En)=>{for(let To=0;To<vn.length;To++){const Zo=vn[To];if(Zo.test(En))return Zo}},rr=(vn,En)=>{const To=to(vn,En);if(!To)return{major:0,minor:0};const Zo=ys=>Number(En.replace(To,"$"+ys));return ns(Zo(1),Zo(2))},ur=(vn,En)=>{const To=String(En).toLowerCase();return vn.length===0?Pr():rr(vn,To)},Pr=()=>ns(0,0),ns=(vn,En)=>({major:vn,minor:En}),rs={nu:ns,detect:ur,unknown:Pr},Wr=(vn,En)=>Fn(En.brands,To=>{const Zo=To.brand.toLowerCase();return hn(vn,ys=>{var Ml;return Zo===((Ml=ys.brand)===null||Ml===void 0?void 0:Ml.toLowerCase())}).map(ys=>({current:ys.name,version:rs.nu(parseInt(To.version,10),0)}))}),ms=(vn,En)=>{const To=String(En).toLowerCase();return hn(vn,Zo=>Zo.search(To))},As=(vn,En)=>ms(vn,En).map(To=>{const Zo=rs.detect(To.versionRegexes,En);return{current:To.name,version:Zo}}),Bl=(vn,En)=>ms(vn,En).map(To=>{const Zo=rs.detect(To.versionRegexes,En);return{current:To.name,version:Zo}}),eu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pu=vn=>En=>xr(En,vn),Qp=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:vn=>xr(vn,"edge/")&&xr(vn,"chrome")&&xr(vn,"safari")&&xr(vn,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,eu],search:vn=>xr(vn,"chrome")&&!xr(vn,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:vn=>xr(vn,"msie")||xr(vn,"trident")},{name:"Opera",versionRegexes:[eu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pu("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pu("firefox")},{name:"Safari",versionRegexes:[eu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:vn=>(xr(vn,"safari")||xr(vn,"mobile/"))&&xr(vn,"applewebkit")}],cm=[{name:"Windows",search:pu("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:vn=>xr(vn,"iphone")||xr(vn,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pu("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:pu("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pu("linux"),versionRegexes:[]},{name:"Solaris",search:pu("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pu("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pu("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Cs={browsers:Jt(Qp),oses:Jt(cm)},Rl="Edge",Ll="Chromium",Ep="IE",Ap="Opera",gp="Firefox",Tu="Safari",v1=()=>Km({current:void 0,version:rs.unknown()}),Km=vn=>{const En=vn.current,To=vn.version,Zo=ys=>()=>En===ys;return{current:En,version:To,isEdge:Zo(Rl),isChromium:Zo(Ll),isIE:Zo(Ep),isOpera:Zo(Ap),isFirefox:Zo(gp),isSafari:Zo(Tu)}},Yl={unknown:v1,nu:Km,edge:Jt(Rl),chromium:Jt(Ll),ie:Jt(Ep),opera:Jt(Ap),firefox:Jt(gp),safari:Jt(Tu)},zp="Windows",Bp="iOS",mp="Android",ly="Linux",um="macOS",_g="Solaris",Ym="FreeBSD",Pm="ChromeOS",by=()=>vy({current:void 0,version:rs.unknown()}),vy=vn=>{const En=vn.current,To=vn.version,Zo=ys=>()=>En===ys;return{current:En,version:To,isWindows:Zo(zp),isiOS:Zo(Bp),isAndroid:Zo(mp),isMacOS:Zo(um),isLinux:Zo(ly),isSolaris:Zo(_g),isFreeBSD:Zo(Ym),isChromeOS:Zo(Pm)}},q0={unknown:by,nu:vy,windows:Jt(zp),ios:Jt(Bp),android:Jt(mp),linux:Jt(ly),macos:Jt(um),solaris:Jt(_g),freebsd:Jt(Ym),chromeos:Jt(Pm)},Mp={detect:(vn,En,To)=>{const Zo=Cs.browsers(),ys=Cs.oses(),Ml=En.bind(bp=>Wr(Zo,bp)).orThunk(()=>As(Zo,vn)).fold(Yl.unknown,Yl.nu),_i=Bl(ys,vn).fold(q0.unknown,q0.nu),vu=Jn(_i,Ml,vn,To);return{browser:Ml,os:_i,deviceType:vu}}},cy=vn=>window.matchMedia(vn).matches;let uy=Bs(()=>Mp.detect(window.navigator.userAgent,fn.from(window.navigator.userAgentData),cy));const zy=()=>uy(),R0=(vn,En)=>({left:vn,top:En,translate:(Zo,ys)=>R0(vn+Zo,En+ys)}),yp=R0,Dm=vn=>{const En=vn!==void 0?vn.dom:document,To=En.body.scrollLeft||En.documentElement.scrollLeft,Zo=En.body.scrollTop||En.documentElement.scrollTop;return yp(To,Zo)},$p=vn=>{const En=vn===void 0?window:vn;return zy().browser.isFirefox()?fn.none():fn.from(En.visualViewport)},em=(vn,En,To,Zo)=>({x:vn,y:En,width:To,height:Zo,right:vn+To,bottom:En+Zo}),By=vn=>{const En=vn===void 0?window:vn,To=En.document,Zo=Dm(Yr.fromDom(To));return $p(En).fold(()=>{const ys=En.document.documentElement,Ml=ys.clientWidth,_i=ys.clientHeight;return em(Zo.left,Zo.top,Ml,_i)},ys=>em(Math.max(ys.pageLeft,Zo.left),Math.max(ys.pageTop,Zo.top),ys.width,ys.height))},$y=(vn,En,To)=>$p(To).map(Zo=>{const ys=Ml=>En(Po(Ml));return Zo.addEventListener(vn,ys),{unbind:()=>Zo.removeEventListener(vn,ys)}}).getOrThunk(()=>({unbind:Pt}));var dn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),zn=tinymce.util.Tools.resolve("tinymce.Env");const ho=(vn,En)=>{vn.dispatch("FullscreenStateChanged",{state:En}),vn.dispatch("ResizeEditor")},qo=vn=>En=>En.options.get(vn),mr=vn=>{const En=vn.options.register;En("fullscreen_native",{processor:"boolean",default:!1})},Wo=qo("fullscreen_native"),Vl=vn=>{const En=Yr.fromDom(vn.getElement());return yl(En).map(mo).getOrThunk(()=>Ws(au(En)))},Xr=vn=>vn.fullscreenElement!==void 0?vn.fullscreenElement:vn.msFullscreenElement!==void 0?vn.msFullscreenElement:vn.webkitFullscreenElement!==void 0?vn.webkitFullscreenElement:null,Ls=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",Lu=vn=>{const En=vn.dom;En.requestFullscreen?En.requestFullscreen():En.msRequestFullscreen?En.msRequestFullscreen():En.webkitRequestFullScreen&&En.webkitRequestFullScreen()},Yt=vn=>{const En=vn.dom;En.exitFullscreen?En.exitFullscreen():En.msExitFullscreen?En.msExitFullscreen():En.webkitCancelFullScreen&&En.webkitCancelFullScreen()},_n=vn=>vn.dom===Xr(au(vn).dom),Kn=(vn,En,To)=>so(Su(vn,To),En),Ao=(vn,En)=>so(Zs(vn),En),Jo=vn=>Ds(vn),Xs=(vn,En,To)=>Kn(vn,Zo=>Dl(Zo,En),To),Jl=(vn,En)=>Ao(vn,To=>Dl(To,En)),lu="data-ephox-mobile-fullscreen-style",dr="display:none!important;",gu="position:absolute!important;",jp="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Z0="background-color:rgb(255,255,255)!important;",js=zn.os.isAndroid(),Xm=vn=>{const En=Mu(vn,"background-color");return En!==void 0&&En!==""?"background-color:"+En+"!important":Z0},m0=(vn,En,To)=>{const Zo=Lm=>Jl(Lm,"*:not(.tox-silver-sink)"),ys=Lm=>dm=>{const cp=Co(dm,"style"),up=cp===void 0?"no-styles":cp.trim();up!==Lm&&(ro(dm,lu,up),qu(dm,vn.parseStyle(Lm)))},Ml=Xs(En,"*"),_i=Hn(Ml,Zo),vu=Xm(To);Wt(_i,ys(dr)),Wt(Ml,ys(gu+jp+vu)),ys((js===!0?"":gu)+jp+vu)(En)},Tp=vn=>{const En=Jo("["+lu+"]");Wt(En,To=>{const Zo=Co(To,lu);Zo&&Zo!=="no-styles"?qu(To,vn.parseStyle(Zo)):Do(To,"style"),Do(To,lu)})},mu=dn.DOM,K0=()=>By(window),jx=vn=>window.scrollTo(vn.x,vn.y),h_=$p().fold(()=>({bind:Pt,unbind:Pt}),vn=>{const En=oo(),To=nr(),Zo=nr(),ys=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Ml=()=>{window.requestAnimationFrame(()=>{En.on(Lm=>qu(Lm,{top:vn.offsetTop+"px",left:vn.offsetLeft+"px",height:vn.height+"px",width:vn.width+"px"}))})},_i=Mo(()=>{ys(),Ml()},50);return{bind:Lm=>{En.set(Lm),_i.throttle(),To.set($y("resize",_i.throttle)),Zo.set($y("scroll",_i.throttle))},unbind:()=>{En.on(()=>{To.clear(),Zo.clear()}),En.clear()}}}),Zu=(vn,En)=>{const To=document.body,Zo=document.documentElement,ys=vn.getContainer(),Ml=Yr.fromDom(ys),_i=Eu(Ml).filter(dp=>Wn(dp)&&ar(dp,"tox-silver-sink")),vu=Vl(vn),bp=En.get(),Lm=Yr.fromDom(vn.getBody()),dm=zn.deviceType.isTouch(),cp=ys.style,up=vn.iframeElement,Pp=up==null?void 0:up.style,fm=dp=>{dp(To,"tox-fullscreen"),dp(Zo,"tox-fullscreen"),dp(ys,"tox-fullscreen"),yl(Ml).map(ju=>mo(ju).dom).each(ju=>{dp(ju,"tox-fullscreen"),dp(ju,"tox-shadowhost")})},Ku=()=>{dm&&Tp(vn.dom),fm(mu.removeClass),h_.unbind(),fn.from(En.get()).each(dp=>dp.fullscreenChangeHandler.unbind())};if(bp)bp.fullscreenChangeHandler.unbind(),Wo(vn)&&_n(vu)&&Yt(au(vu)),Pp.width=bp.iframeWidth,Pp.height=bp.iframeHeight,cp.width=bp.containerWidth,cp.height=bp.containerHeight,cp.top=bp.containerTop,cp.left=bp.containerLeft,Tn(_i,bp.sinkCssPosition,(dp,ju)=>{Wu(dp,"position",ju)}),Ku(),jx(bp.scrollPos),En.set(null),ho(vn,!1),vn.off("remove",Ku);else{const dp=io(au(vu),Ls(),_y=>{Wo(vn)&&!_n(vu)&&En.get()!==null&&Zu(vn,En)}),ju={scrollPos:K0(),containerWidth:cp.width,containerHeight:cp.height,containerTop:cp.top,containerLeft:cp.left,iframeWidth:Pp.width,iframeHeight:Pp.height,fullscreenChangeHandler:dp,sinkCssPosition:_i.map(_y=>Mu(_y,"position"))};dm&&m0(vn.dom,Ml,Lm),Pp.width=Pp.height="100%",cp.width=cp.height="",fm(mu.addClass),_i.each(_y=>{Wu(_y,"position","fixed")}),h_.bind(Ml),vn.on("remove",Ku),En.set(ju),Wo(vn)&&Lu(vu),ho(vn,!0)}},_1=(vn,En)=>{vn.addCommand("mceFullScreen",()=>{Zu(vn,En)})};var M0=tinymce.util.Tools.resolve("tinymce.util.VK");const Gu=(vn,En)=>{vn.on("init",()=>{vn.on("keydown",To=>{To.keyCode===M0.TAB&&!(To.metaKey||To.ctrlKey)&&En.get()&&To.preventDefault()})})},P0=(vn,En)=>To=>{To.setActive(En.get()!==null);const Zo=ys=>To.setActive(ys.state);return vn.on("FullscreenStateChanged",Zo),()=>vn.off("FullscreenStateChanged",Zo)},Nm=(vn,En)=>{const To=()=>vn.execCommand("mceFullScreen");vn.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:To,onSetup:P0(vn,En),context:"any"}),vn.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:To,onSetup:P0(vn,En),shortcut:"Meta+Shift+F",context:"any"})};var x1=()=>{e.add("fullscreen",vn=>{const En=o(null);return vn.inline||(mr(vn),_1(vn,En),Nm(vn,En),Gu(vn,En),vn.addShortcut("Meta+Shift+F","","mceFullScreen")),s(En)})};x1()})();(function(){const o=Wn=>{let Rn=Wn;return{get:()=>Rn,set:Gn=>{Rn=Gn}}};var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let a=0;const d=Wn=>{const Qn=new Date().getTime(),vo=Math.floor(s()*1e9);return a++,Wn+"_"+vo+a+String(Qn)},b=Wn=>({addTab:Qn=>{var vo;const Gn=(vo=Qn.name)!==null&&vo!==void 0?vo:d("tab-name"),ro=Wn.get();ro[Gn]=Qn,Wn.set(ro)}}),_=(Wn,Rn)=>{Wn.addCommand("mceHelp",Rn)},_e=Wn=>Rn=>Rn.options.get(Wn),ot=Wn=>{const Rn=Wn.options.register;Rn("help_tabs",{processor:"array"})},st=_e("help_tabs"),ct=_e("forced_plugins"),ft=(Wn,Rn)=>{Wn.ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:Rn,context:"any"}),Wn.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:Rn,context:"any"})},mt=(Wn,Rn,Qn)=>{var vo;return Qn(Wn,Rn.prototype)?!0:((vo=Wn.constructor)===null||vo===void 0?void 0:vo.name)===Rn.name},bt=Wn=>{const Rn=typeof Wn;return Wn===null?"null":Rn==="object"&&Array.isArray(Wn)?"array":Rn==="object"&&mt(Wn,String,(Qn,vo)=>vo.isPrototypeOf(Qn))?"string":Rn},wt=Wn=>Rn=>bt(Rn)===Wn,Ct=Wn=>Rn=>typeof Rn===Wn,Rt=Wn=>Rn=>Wn===Rn,It=wt("string"),Pt=Rt(void 0),Tt=Wn=>Wn==null,Gt=Wn=>!Tt(Wn),Jt=Ct("function"),Nt=(Wn=>()=>Wn)(!1);class Qt{constructor(Rn,Qn){this.tag=Rn,this.value=Qn}static some(Rn){return new Qt(!0,Rn)}static none(){return Qt.singletonNone}fold(Rn,Qn){return this.tag?Qn(this.value):Rn()}isSome(){return this.tag}isNone(){return!this.tag}map(Rn){return this.tag?Qt.some(Rn(this.value)):Qt.none()}bind(Rn){return this.tag?Rn(this.value):Qt.none()}exists(Rn){return this.tag&&Rn(this.value)}forall(Rn){return!this.tag||Rn(this.value)}filter(Rn){return!this.tag||Rn(this.value)?this:Qt.none()}getOr(Rn){return this.tag?this.value:Rn}or(Rn){return this.tag?this:Rn}getOrThunk(Rn){return this.tag?this.value:Rn()}orThunk(Rn){return this.tag?this:Rn()}getOrDie(Rn){if(this.tag)return this.value;throw new Error(Rn??"Called getOrDie on None")}static from(Rn){return Gt(Rn)?Qt.some(Rn):Qt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Rn){this.tag&&Rn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Qt.singletonNone=new Qt(!1);const fn=Array.prototype.slice,Mn=Array.prototype.indexOf,ln=(Wn,Rn)=>Mn.call(Wn,Rn),Wt=(Wn,Rn)=>ln(Wn,Rn)>-1,so=(Wn,Rn)=>{const Qn=Wn.length,vo=new Array(Qn);for(let Gn=0;Gn<Qn;Gn++){const ro=Wn[Gn];vo[Gn]=Rn(ro,Gn)}return vo},pn=(Wn,Rn)=>{const Qn=[];for(let vo=0,Gn=Wn.length;vo<Gn;vo++){const ro=Wn[vo];Rn(ro,vo)&&Qn.push(ro)}return Qn},hn=(Wn,Rn,Qn)=>{for(let vo=0,Gn=Wn.length;vo<Gn;vo++){const ro=Wn[vo];if(Rn(ro,vo))return Qt.some(ro);if(Qn(ro,vo))break}return Qt.none()},Mt=(Wn,Rn)=>hn(Wn,Rn,Nt),Hn=(Wn,Rn)=>{const Qn=fn.call(Wn,0);return Qn.sort(Rn),Qn},cn=Object.keys,fo=Object.hasOwnProperty,Fn=(Wn,Rn)=>Tn(Wn,Rn)?Qt.from(Wn[Rn]):Qt.none(),Tn=(Wn,Rn)=>fo.call(Wn,Rn),qn=Wn=>{const Rn=[],Qn=vo=>{Rn.push(vo)};for(let vo=0;vo<Wn.length;vo++)Wn[vo].each(Qn);return Rn};var nr=tinymce.util.Tools.resolve("tinymce.Resource"),oo=tinymce.util.Tools.resolve("tinymce.util.I18n");const Mo=(Wn,Rn)=>nr.load(`tinymce.html-i18n.help-keynav.${Rn}`,`${Wn}/js/i18n/keynav/${Rn}.js`),Dn=Wn=>Mo(Wn,oo.getCode()).catch(()=>Mo(Wn,"en")),xo=(Wn,Rn)=>{Wn.on("init",()=>{Dn(Rn)})},Xt=async Wn=>({name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:await Dn(Wn)}]});var Ur=tinymce.util.Tools.resolve("tinymce.Env");const co=Wn=>{const Rn=Ur.os.isMacOS()||Ur.os.isiOS(),Gn=Rn?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},ro=Wn.split("+"),Co=so(ro,Do=>{const Mr=Do.toLowerCase().trim();return Tn(Gn,Mr)?Gn[Mr]:Do});return Rn?Co.join("").replace(/\s/,""):Co.join("+")},Vo=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Alt + F12"],action:"Focus to notification"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],yo=()=>{const Wn=so(Vo,Qn=>{const vo=so(Qn.shortcuts,co).join(" or ");return[Qn.action,vo]});return{name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:Wn}]}},ko=so([{key:"accordion",name:"Accordion"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"image",name:"Image"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"advlist",name:"List Styles"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"pagebreak",name:"Page Break"},{key:"preview",name:"Preview"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"table",name:"Table"},{key:"textcolor",name:"Text Color"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"typography",name:"Advanced Typography",type:"premium",slug:"advanced-typography"},{key:"ai",name:"AI Assistant",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"advcode",name:"Enhanced Code Editor",type:"premium"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium",slug:"introduction-to-mediaembed"},{key:"advtable",name:"Enhanced Tables",type:"premium"},{key:"exportpdf",name:"Export to PDF",type:"premium"},{key:"exportword",name:"Export to Word",type:"premium"},{key:"footnotes",name:"Footnotes",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"editimage",name:"Image Editing",type:"premium"},{key:"importword",name:"Import from Word",type:"premium"},{key:"inlinecss",name:"Inline CSS",type:"premium",slug:"inline-css"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"math",name:"Math",type:"premium"},{key:"markdown",name:"Markdown",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"mergetags",name:"Merge Tags",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium",slug:"introduction-to-powerpaste"},{key:"revisionhistory",name:"Revision History",type:"premium"},{key:"tinymcespellchecker",name:"Spell Checker",type:"premium",slug:"introduction-to-tiny-spellchecker"},{key:"autocorrect",name:"Spelling Autocorrect",type:"premium"},{key:"tableofcontents",name:"Table of Contents",type:"premium"},{key:"advtemplate",name:"Templates",type:"premium",slug:"advanced-templates"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"introduction-to-tiny-comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium",slug:"tinydrive-introduction"}],Wn=>({...Wn,type:Wn.type||"opensource",slug:Wn.slug||Wn.key})),yn=Wn=>{const Rn=()=>{const ar=pn(ko,({type:wr})=>wr==="premium"),xr=Hn(so(ar,wr=>wr.name),(wr,gs)=>wr.localeCompare(gs)),us=so(xr,wr=>`<li>${wr}</li>`).join("");return"<div><p><b>"+oo.translate("Premium plugins:")+"</b></p><ul>"+us+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=help_dialog_plugin_tab&utm_source=tiny&utm_medium=referral&utm_term=read_more&utm_content=premium_plugin_heading" rel="noopener" target="_blank" data-alloy-tabstop="true" tabindex="-1">'+oo.translate("Learn more...")+"</a></li></ul></div>"},Qn=ar=>`<a data-alloy-tabstop="true" tabindex="-1" href="${ar.url}" target="_blank" rel="noopener">${ar.name}</a>`,vo=(ar,xr)=>{const us=ar.plugins[xr].getMetadata;if(Jt(us)){const wr=us();return{name:wr.name,html:Qn(wr)}}else return{name:xr,html:xr}},Gn=(ar,xr)=>Mt(ko,us=>us.key===xr).fold(()=>vo(ar,xr),us=>{const wr=us.type==="premium"?`${us.name}*`:us.name,gs=Qn({name:wr,url:`https://www.tiny.cloud/docs/tinymce/7/${us.slug}/`});return{name:wr,html:gs}}),ro=ar=>{const xr=cn(ar.plugins),us=ct(ar);return Pt(us)?xr:pn(xr,wr=>!Wt(us,wr))},Co=ar=>{const xr=ro(ar),us=Hn(so(xr,Cl=>Gn(ar,Cl)),(Cl,Yr)=>Cl.name.localeCompare(Yr.name)),wr=so(us,Cl=>"<li>"+Cl.html+"</li>"),gs=wr.length,Ts=wr.join("");return"<p><b>"+oo.translate(["Plugins installed ({0}):",gs])+"</b></p><ul>"+Ts+"</ul>"};return{name:"plugins",title:"Plugins",items:[{type:"htmlpanel",presets:"document",html:[(ar=>ar==null?"":"<div>"+Co(ar)+"</div>")(Wn),Rn()].join("")}]}};var Cn=tinymce.util.Tools.resolve("tinymce.EditorManager");const Nn=()=>{const Qn='<a data-alloy-tabstop="true" tabindex="-1" href="https://www.tiny.cloud/docs/tinymce/7/changelog/?utm_campaign=help_dialog_version_tab&utm_source=tiny&utm_medium=referral" rel="noopener" target="_blank">TinyMCE '+((Gn,ro)=>Gn.indexOf("@")===0?"X.X.X":Gn+"."+ro)(Cn.majorVersion,Cn.minorVersion)+"</a>";return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+oo.translate(["You are using {0}",Qn])+"</p>",presets:"document"}]}},sn=(Wn,Rn)=>{const Qn={},vo=so(Wn,Gn=>{var ro;if(It(Gn))return Tn(Rn,Gn)&&(Qn[Gn]=Rn[Gn]),Gn;{const Co=(ro=Gn.name)!==null&&ro!==void 0?ro:d("tab-name");return Qn[Co]=Gn,Co}});return{tabs:Qn,names:vo}},kn=Wn=>{const Rn=cn(Wn),Qn=Rn.indexOf("versions");return Qn!==-1&&(Rn.splice(Qn,1),Rn.push("versions")),{tabs:Wn,names:Rn}},Ln=async(Wn,Rn,Qn)=>{const vo=yo(),Gn=await Xt(Qn),ro=yn(Wn),Co=Nn(),Do={[vo.name]:vo,[Gn.name]:Gn,[ro.name]:ro,[Co.name]:Co,...Rn.get()};return Qt.from(st(Wn)).fold(()=>kn(Do),Mr=>sn(Mr,Do))},Bn=(Wn,Rn,Qn)=>()=>{Ln(Wn,Rn,Qn).then(({tabs:vo,names:Gn})=>{const ro=so(Gn,Mr=>Fn(vo,Mr)),Do={type:"tabpanel",tabs:qn(ro)};Wn.windowManager.open({title:"Help",size:"medium",body:Do,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})})};var Eo=()=>{e.add("help",(Wn,Rn)=>{const Qn=o({}),vo=b(Qn);ot(Wn);const Gn=Bn(Wn,Qn,Rn);return ft(Wn,Gn),_(Wn,Gn),Wn.shortcuts.add("Alt+0","Open help dialog","mceHelp"),xo(Wn,Rn),vo})};Eo()})();tinymce.Resource.add("tinymce.html-i18n.help-keynav.en",`<h1>Begin keyboard navigation</h1>

<dl>
  <dt>Focus the Menu bar</dt>
  <dd>Windows or Linux: Alt+F9</dd>
  <dd>macOS: &#x2325;F9</dd>
  <dt>Focus the Toolbar</dt>
  <dd>Windows or Linux: Alt+F10</dd>
  <dd>macOS: &#x2325;F10</dd>
  <dt>Focus the footer</dt>
  <dd>Windows or Linux: Alt+F11</dd>
  <dd>macOS: &#x2325;F11</dd>
  <dt>Focus the notification</dt>
  <dd>Windows or Linux: Alt+F12</dd>
  <dd>macOS: &#x2325;F12</dd>
  <dt>Focus a contextual toolbar</dt>
  <dd>Windows, Linux or macOS: Ctrl+F9</dd>
</dl>

<p>Navigation will start at the first UI item, which will be highlighted, or underlined in the case of the first item in
  the Footer element path.</p>

<h1>Navigate between UI sections</h1>

<p>To move from one UI section to the next, press <strong>Tab</strong>.</p>

<p>To move from one UI section to the previous, press <strong>Shift+Tab</strong>.</p>

<p>The <strong>Tab</strong> order of these UI sections is:</p>

<ol>
  <li>Menu bar</li>
  <li>Each toolbar group</li>
  <li>Sidebar</li>
  <li>Element path in the footer</li>
  <li>Word count toggle button in the footer</li>
  <li>Branding link in the footer</li>
  <li>Editor resize handle in the footer</li>
</ol>

<p>If a UI section is not present, it is skipped.</p>

<p>If the footer has keyboard navigation focus, and there is no visible sidebar, pressing <strong>Shift+Tab</strong>
  moves focus to the first toolbar group, not the last.</p>

<h1>Navigate within UI sections</h1>

<p>To move from one UI element to the next, press the appropriate <strong>Arrow</strong> key.</p>

<p>The <strong>Left</strong> and <strong>Right</strong> arrow keys</p>

<ul>
  <li>move between menus in the menu bar.</li>
  <li>open a sub-menu in a menu.</li>
  <li>move between buttons in a toolbar group.</li>
  <li>move between items in the footers element path.</li>
</ul>

<p>The <strong>Down</strong> and <strong>Up</strong> arrow keys</p>

<ul>
  <li>move between menu items in a menu.</li>
  <li>move between items in a toolbar pop-up menu.</li>
</ul>

<p><strong>Arrow</strong> keys cycle within the focused UI section.</p>

<p>To close an open menu, an open sub-menu, or an open pop-up menu, press the <strong>Esc</strong> key.</p>

<p>If the current focus is at the top of a particular UI section, pressing the <strong>Esc</strong> key also exits
  keyboard navigation entirely.</p>

<h1>Execute a menu item or toolbar button</h1>

<p>When the desired menu item or toolbar button is highlighted, press <strong>Return</strong>, <strong>Enter</strong>,
  or the <strong>Space bar</strong> to execute the item.</p>

<h1>Navigate non-tabbed dialogs</h1>

<p>In non-tabbed dialogs, the first interactive component takes focus when the dialog opens.</p>

<p>Navigate between interactive dialog components by pressing <strong>Tab</strong> or <strong>Shift+Tab</strong>.</p>

<h1>Navigate tabbed dialogs</h1>

<p>In tabbed dialogs, the first button in the tab menu takes focus when the dialog opens.</p>

<p>Navigate between interactive components of this dialog tab by pressing <strong>Tab</strong> or
  <strong>Shift+Tab</strong>.</p>

<p>Switch to another dialog tab by giving the tab menu focus and then pressing the appropriate <strong>Arrow</strong>
  key to cycle through the available tabs.</p>
`);(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=Object.getPrototypeOf,s=(Yt,_n,Kn)=>{var Ao;return Kn(Yt,_n.prototype)?!0:((Ao=Yt.constructor)===null||Ao===void 0?void 0:Ao.name)===_n.name},a=Yt=>{const _n=typeof Yt;return Yt===null?"null":_n==="object"&&Array.isArray(Yt)?"array":_n==="object"&&s(Yt,String,(Kn,Ao)=>Ao.isPrototypeOf(Kn))?"string":_n},d=Yt=>_n=>a(_n)===Yt,b=Yt=>_n=>typeof _n===Yt,_=Yt=>_n=>Yt===_n,_e=(Yt,_n)=>st(Yt)&&s(Yt,_n,(Kn,Ao)=>e(Kn)===Ao),ot=d("string"),st=d("object"),ct=Yt=>_e(Yt,Object),ft=d("array"),mt=_(null),bt=b("boolean"),wt=Yt=>Yt==null,Ct=Yt=>!wt(Yt),Rt=b("function"),It=b("number"),Pt=(Yt,_n)=>{if(ft(Yt)){for(let Kn=0,Ao=Yt.length;Kn<Ao;++Kn)if(!_n(Yt[Kn]))return!1;return!0}return!1},Tt=()=>{};class Gt{constructor(_n,Kn){this.tag=_n,this.value=Kn}static some(_n){return new Gt(!0,_n)}static none(){return Gt.singletonNone}fold(_n,Kn){return this.tag?Kn(this.value):_n()}isSome(){return this.tag}isNone(){return!this.tag}map(_n){return this.tag?Gt.some(_n(this.value)):Gt.none()}bind(_n){return this.tag?_n(this.value):Gt.none()}exists(_n){return this.tag&&_n(this.value)}forall(_n){return!this.tag||_n(this.value)}filter(_n){return!this.tag||_n(this.value)?this:Gt.none()}getOr(_n){return this.tag?this.value:_n}or(_n){return this.tag?this:_n}getOrThunk(_n){return this.tag?this.value:_n()}orThunk(_n){return this.tag?this:_n()}getOrDie(_n){if(this.tag)return this.value;throw new Error(_n??"Called getOrDie on None")}static from(_n){return Ct(_n)?Gt.some(_n):Gt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(_n){this.tag&&_n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Gt.singletonNone=new Gt(!1);const Jt=Object.keys,qt=Object.hasOwnProperty,Nt=(Yt,_n)=>{const Kn=Jt(Yt);for(let Ao=0,Jo=Kn.length;Ao<Jo;Ao++){const Xs=Kn[Ao],Jl=Yt[Xs];_n(Jl,Xs)}},Qt=Yt=>(_n,Kn)=>{Yt[Kn]=_n},fn=(Yt,_n,Kn,Ao)=>{Nt(Yt,(Jo,Xs)=>{(_n(Jo,Xs)?Kn:Ao)(Jo,Xs)})},Mn=(Yt,_n)=>{const Kn={};return fn(Yt,_n,Qt(Kn),Tt),Kn},ln=(Yt,_n)=>qt.call(Yt,_n),Wt=(Yt,_n)=>ln(Yt,_n)&&Yt[_n]!==void 0&&Yt[_n]!==null,so=Array.prototype.push,pn=Yt=>{const _n=[];for(let Kn=0,Ao=Yt.length;Kn<Ao;++Kn){if(!ft(Yt[Kn]))throw new Error("Arr.flatten item "+Kn+" was not an array, input: "+Yt);so.apply(_n,Yt[Kn])}return _n},hn=(Yt,_n)=>_n>=0&&_n<Yt.length?Gt.some(Yt[_n]):Gt.none(),Mt=Yt=>hn(Yt,0),Hn=(Yt,_n)=>{for(let Kn=0;Kn<Yt.length;Kn++){const Ao=_n(Yt[Kn],Kn);if(Ao.isSome())return Ao}return Gt.none()};typeof window<"u"||Function("return this;")();const cn=(Yt,_n,Kn)=>{if(ot(Kn)||bt(Kn)||It(Kn))Yt.setAttribute(_n,Kn+"");else throw console.error("Invalid call to Attribute.set. Key ",_n,":: Value ",Kn,":: Element ",Yt),new Error("Attribute value was not simple")},fo=(Yt,_n,Kn)=>{cn(Yt.dom,_n,Kn)},Fn=(Yt,_n)=>{Yt.dom.removeAttribute(_n)},Tn=(Yt,_n)=>{const Ao=(_n||document).createElement("div");if(Ao.innerHTML=Yt,!Ao.hasChildNodes()||Ao.childNodes.length>1){const Jo="HTML does not have a single root node";throw console.error(Jo,Yt),new Error(Jo)}return oo(Ao.childNodes[0])},qn=(Yt,_n)=>{const Ao=(_n||document).createElement(Yt);return oo(Ao)},nr=(Yt,_n)=>{const Ao=(_n||document).createTextNode(Yt);return oo(Ao)},oo=Yt=>{if(Yt==null)throw new Error("Node cannot be null or undefined");return{dom:Yt}},Dn={fromHtml:Tn,fromTag:qn,fromText:nr,fromDom:oo,fromPoint:(Yt,_n,Kn)=>Gt.from(Yt.dom.elementFromPoint(_n,Kn)).map(oo)};var xo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Xt=tinymce.util.Tools.resolve("tinymce.util.URI");const Ur=Yt=>Yt.length>0,co=Yt=>_n=>_n.options.get(Yt),Vo=Yt=>{const _n=Yt.options.register;_n("image_dimensions",{processor:"boolean",default:!0}),_n("image_advtab",{processor:"boolean",default:!1}),_n("image_uploadtab",{processor:"boolean",default:!0}),_n("image_prepend_url",{processor:"string",default:""}),_n("image_class_list",{processor:"object[]"}),_n("image_description",{processor:"boolean",default:!0}),_n("image_title",{processor:"boolean",default:!1}),_n("image_caption",{processor:"boolean",default:!1}),_n("image_list",{processor:Kn=>{const Ao=Kn===!1||ot(Kn)||Pt(Kn,st)||Rt(Kn);return Ao?{value:Kn,valid:Ao}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},yo=co("image_dimensions"),ko=co("image_advtab"),yn=co("image_uploadtab"),Cn=co("image_prepend_url"),Nn=co("image_class_list"),sn=co("image_description"),kn=co("image_title"),Ln=co("image_caption"),Bn=co("image_list"),Eo=co("a11y_advanced_options"),Wn=co("automatic_uploads"),Rn=Yt=>Ur(Yt.options.get("images_upload_url")),Qn=Yt=>Ct(Yt.options.get("images_upload_handler")),vo=(Yt,_n)=>Math.max(parseInt(Yt,10),parseInt(_n,10)),Gn=Yt=>new Promise(_n=>{const Kn=document.createElement("img"),Ao=Xs=>{Kn.onload=Kn.onerror=null,Kn.parentNode&&Kn.parentNode.removeChild(Kn),_n(Xs)};Kn.onload=()=>{const Xs=vo(Kn.width,Kn.clientWidth),Jl=vo(Kn.height,Kn.clientHeight),lu={width:Xs,height:Jl};Ao(Promise.resolve(lu))},Kn.onerror=()=>{Ao(Promise.reject(`Failed to get image dimensions for: ${Yt}`))};const Jo=Kn.style;Jo.visibility="hidden",Jo.position="fixed",Jo.bottom=Jo.left="0px",Jo.width=Jo.height="auto",document.body.appendChild(Kn),Kn.src=Yt}),ro=Yt=>(Yt&&(Yt=Yt.replace(/px$/,"")),Yt),Co=Yt=>(Yt.length>0&&/^[0-9]+$/.test(Yt)&&(Yt+="px"),Yt),Do=Yt=>{if(Yt.margin){const _n=String(Yt.margin).split(" ");switch(_n.length){case 1:Yt["margin-top"]=Yt["margin-top"]||_n[0],Yt["margin-right"]=Yt["margin-right"]||_n[0],Yt["margin-bottom"]=Yt["margin-bottom"]||_n[0],Yt["margin-left"]=Yt["margin-left"]||_n[0];break;case 2:Yt["margin-top"]=Yt["margin-top"]||_n[0],Yt["margin-right"]=Yt["margin-right"]||_n[1],Yt["margin-bottom"]=Yt["margin-bottom"]||_n[0],Yt["margin-left"]=Yt["margin-left"]||_n[1];break;case 3:Yt["margin-top"]=Yt["margin-top"]||_n[0],Yt["margin-right"]=Yt["margin-right"]||_n[1],Yt["margin-bottom"]=Yt["margin-bottom"]||_n[2],Yt["margin-left"]=Yt["margin-left"]||_n[1];break;case 4:Yt["margin-top"]=Yt["margin-top"]||_n[0],Yt["margin-right"]=Yt["margin-right"]||_n[1],Yt["margin-bottom"]=Yt["margin-bottom"]||_n[2],Yt["margin-left"]=Yt["margin-left"]||_n[3]}delete Yt.margin}return Yt},Mr=(Yt,_n)=>{const Kn=Bn(Yt);ot(Kn)?fetch(Kn).then(Ao=>{Ao.ok&&Ao.json().then(_n)}):Rt(Kn)?Kn(_n):_n(Kn)},ar=(Yt,_n,Kn)=>{const Ao=()=>{Kn.onload=Kn.onerror=null,Yt.selection&&(Yt.selection.select(Kn),Yt.nodeChanged())};Kn.onload=()=>{!_n.width&&!_n.height&&yo(Yt)&&Yt.dom.setAttribs(Kn,{width:String(Kn.clientWidth),height:String(Kn.clientHeight)}),Ao()},Kn.onerror=Ao},xr=Yt=>new Promise((_n,Kn)=>{const Ao=new FileReader;Ao.onload=()=>{_n(Ao.result)},Ao.onerror=()=>{var Jo;Kn((Jo=Ao.error)===null||Jo===void 0?void 0:Jo.message)},Ao.readAsDataURL(Yt)}),us=Yt=>Yt.nodeName==="IMG"&&(Yt.hasAttribute("data-mce-object")||Yt.hasAttribute("data-mce-placeholder")),wr=(Yt,_n)=>{const Kn=Yt.options.get;return Xt.isDomSafe(_n,"img",{allow_html_data_urls:Kn("allow_html_data_urls"),allow_script_urls:Kn("allow_script_urls"),allow_svg_data_urls:Kn("allow_svg_data_urls")})},gs=xo.DOM,Ts=Yt=>Yt.style.marginLeft&&Yt.style.marginRight&&Yt.style.marginLeft===Yt.style.marginRight?ro(Yt.style.marginLeft):"",Rs=Yt=>Yt.style.marginTop&&Yt.style.marginBottom&&Yt.style.marginTop===Yt.style.marginBottom?ro(Yt.style.marginTop):"",Cl=Yt=>Yt.style.borderWidth?ro(Yt.style.borderWidth):"",Yr=(Yt,_n)=>{var Kn;return Yt.hasAttribute(_n)&&(Kn=Yt.getAttribute(_n))!==null&&Kn!==void 0?Kn:""},Dl=Yt=>Yt.parentNode!==null&&Yt.parentNode.nodeName==="FIGURE",or=(Yt,_n,Kn)=>{Kn===""||Kn===null?Yt.removeAttribute(_n):Yt.setAttribute(_n,Kn)},Ds=Yt=>{const _n=gs.create("figure",{class:"image"});gs.insertAfter(_n,Yt),_n.appendChild(Yt),_n.appendChild(gs.create("figcaption",{contentEditable:"true"},"Caption")),_n.contentEditable="false"},hu=Yt=>{const _n=Yt.parentNode;Ct(_n)&&(gs.insertAfter(Yt,_n),gs.remove(_n))},au=Yt=>{Dl(Yt)?hu(Yt):Ds(Yt)},_c=(Yt,_n)=>{const Kn=Yt.getAttribute("style"),Ao=_n(Kn!==null?Kn:"");Ao.length>0?(Yt.setAttribute("style",Ao),Yt.setAttribute("data-mce-style",Ao)):Yt.removeAttribute("style")},Su=(Yt,_n)=>(Kn,Ao,Jo)=>{const Xs=Kn.style;Xs[Ao]?(Xs[Ao]=Co(Jo),_c(Kn,_n)):or(Kn,Ao,Jo)},Zs=(Yt,_n)=>Yt.style[_n]?ro(Yt.style[_n]):Yr(Yt,_n),Eu=(Yt,_n)=>{const Kn=Co(_n);Yt.style.marginLeft=Kn,Yt.style.marginRight=Kn},uu=(Yt,_n)=>{const Kn=Co(_n);Yt.style.marginTop=Kn,Yt.style.marginBottom=Kn},$a=(Yt,_n)=>{const Kn=Co(_n);Yt.style.borderWidth=Kn},es=(Yt,_n)=>{Yt.style.borderStyle=_n},yl=Yt=>{var _n;return(_n=Yt.style.borderStyle)!==null&&_n!==void 0?_n:""},mo=Yt=>Ct(Yt)&&Yt.nodeName==="FIGURE",Oo=Yt=>Yt.nodeName==="IMG",Ar=Yt=>gs.getAttrib(Yt,"alt").length===0&&gs.getAttrib(Yt,"role")==="presentation",Br=Yt=>Ar(Yt)?"":Yr(Yt,"alt"),Ws=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),_l=(Yt,_n)=>{var Kn;const Ao=document.createElement("img");return or(Ao,"style",_n.style),(Ts(Ao)||_n.hspace!=="")&&Eu(Ao,_n.hspace),(Rs(Ao)||_n.vspace!=="")&&uu(Ao,_n.vspace),(Cl(Ao)||_n.border!=="")&&$a(Ao,_n.border),(yl(Ao)||_n.borderStyle!=="")&&es(Ao,_n.borderStyle),Yt((Kn=Ao.getAttribute("style"))!==null&&Kn!==void 0?Kn:"")},Wu=(Yt,_n)=>{const Kn=document.createElement("img");if(Ho(Yt,{..._n,caption:!1},Kn),Vn(Kn,_n.alt,_n.isDecorative),_n.caption){const Ao=gs.create("figure",{class:"image"});return Ao.appendChild(Kn),Ao.appendChild(gs.create("figcaption",{contentEditable:"true"},"Caption")),Ao.contentEditable="false",Ao}else return Kn},qu=(Yt,_n)=>({src:Yr(_n,"src"),alt:Br(_n),title:Yr(_n,"title"),width:Zs(_n,"width"),height:Zs(_n,"height"),class:Yr(_n,"class"),style:Yt(Yr(_n,"style")),caption:Dl(_n),hspace:Ts(_n),vspace:Rs(_n),border:Cl(_n),borderStyle:yl(_n),isDecorative:Ar(_n)}),Mu=(Yt,_n,Kn,Ao,Jo)=>{Kn[Ao]!==_n[Ao]&&Jo(Yt,Ao,String(Kn[Ao]))},Vn=(Yt,_n,Kn)=>{if(Kn){gs.setAttrib(Yt,"role","presentation");const Ao=Dn.fromDom(Yt);fo(Ao,"alt","")}else{if(mt(_n)){const Ao=Dn.fromDom(Yt);Fn(Ao,"alt")}else{const Ao=Dn.fromDom(Yt);fo(Ao,"alt",_n)}gs.getAttrib(Yt,"role")==="presentation"&&gs.setAttrib(Yt,"role","")}},$n=(Yt,_n,Kn)=>{(Kn.alt!==_n.alt||Kn.isDecorative!==_n.isDecorative)&&Vn(Yt,Kn.alt,Kn.isDecorative)},Po=(Yt,_n)=>(Kn,Ao,Jo)=>{Yt(Kn,Jo),_c(Kn,_n)},Ho=(Yt,_n,Kn)=>{const Ao=qu(Yt,Kn);Mu(Kn,Ao,_n,"caption",(Jo,Xs,Jl)=>au(Jo)),Mu(Kn,Ao,_n,"src",or),Mu(Kn,Ao,_n,"title",or),Mu(Kn,Ao,_n,"width",Su("width",Yt)),Mu(Kn,Ao,_n,"height",Su("height",Yt)),Mu(Kn,Ao,_n,"class",or),Mu(Kn,Ao,_n,"style",Po((Jo,Xs)=>or(Jo,"style",Xs),Yt)),Mu(Kn,Ao,_n,"hspace",Po(Eu,Yt)),Mu(Kn,Ao,_n,"vspace",Po(uu,Yt)),Mu(Kn,Ao,_n,"border",Po($a,Yt)),Mu(Kn,Ao,_n,"borderStyle",Po(es,Yt)),$n(Kn,Ao,_n)},cs=(Yt,_n)=>{const Kn=Yt.dom.styles.parse(_n),Ao=Do(Kn),Jo=Yt.dom.styles.parse(Yt.dom.styles.serialize(Ao));return Yt.dom.styles.serialize(Jo)},Es=Yt=>{const _n=Yt.selection.getNode(),Kn=Yt.dom.getParent(_n,"figure.image");return Kn?Yt.dom.select("img",Kn)[0]:_n&&(_n.nodeName!=="IMG"||us(_n))?null:_n},zs=(Yt,_n)=>{var Kn;const Ao=Yt.dom,Jo=Mn(Yt.schema.getTextBlockElements(),(Jl,lu)=>!Yt.schema.isValidChild(lu,"figure")),Xs=Ao.getParent(_n.parentNode,Jl=>Wt(Jo,Jl.nodeName),Yt.getBody());return Xs&&(Kn=Ao.split(Xs,_n))!==null&&Kn!==void 0?Kn:_n},Pu=Yt=>{const _n=Es(Yt);return _n?qu(Kn=>cs(Yt,Kn),_n):Ws()},io=(Yt,_n)=>{const Kn=Wu(Jo=>cs(Yt,Jo),_n);Yt.dom.setAttrib(Kn,"data-mce-id","__mcenew"),Yt.focus(),Yt.selection.setContent(Kn.outerHTML);const Ao=Yt.dom.select('*[data-mce-id="__mcenew"]')[0];if(Yt.dom.setAttrib(Ao,"data-mce-id",null),mo(Ao)){const Jo=zs(Yt,Ao);Yt.selection.select(Jo)}else Yt.selection.select(Ao)},Bs=(Yt,_n)=>{Yt.dom.setAttrib(_n,"src",_n.getAttribute("src"))},Jn=(Yt,_n)=>{if(_n){const Kn=Yt.dom.is(_n.parentNode,"figure.image")?_n.parentNode:_n;Yt.dom.remove(Kn),Yt.focus(),Yt.nodeChanged(),Yt.dom.isEmpty(Yt.getBody())&&(Yt.setContent(""),Yt.selection.setCursorLocation())}},to=(Yt,_n)=>{const Kn=Es(Yt);if(Kn)if(Ho(Ao=>cs(Yt,Ao),_n,Kn),Bs(Yt,Kn),mo(Kn.parentNode)){const Ao=Kn.parentNode;zs(Yt,Ao),Yt.selection.select(Kn.parentNode)}else Yt.selection.select(Kn),ar(Yt,_n,Kn)},rr=(Yt,_n)=>{const Kn=_n.src;return{..._n,src:wr(Yt,Kn)?Kn:""}},ur=(Yt,_n)=>{const Kn=Es(Yt);if(Kn){const Jo={...qu(Jl=>cs(Yt,Jl),Kn),..._n},Xs=rr(Yt,Jo);Jo.src?to(Yt,Xs):Jn(Yt,Kn)}else _n.src&&io(Yt,{...Ws(),..._n})},rs=(Yt=>(..._n)=>{if(_n.length===0)throw new Error("Can't merge zero objects");const Kn={};for(let Ao=0;Ao<_n.length;Ao++){const Jo=_n[Ao];for(const Xs in Jo)ln(Jo,Xs)&&(Kn[Xs]=Yt(Kn[Xs],Jo[Xs]))}return Kn})((Yt,_n)=>ct(Yt)&&ct(_n)?rs(Yt,_n):_n);var Wr=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),ms=tinymce.util.Tools.resolve("tinymce.util.Tools");const As=Yt=>ot(Yt.value)?Yt.value:"",Bl=Yt=>ot(Yt.text)?Yt.text:ot(Yt.title)?Yt.title:"",eu=(Yt,_n)=>{const Kn=[];return ms.each(Yt,Ao=>{const Jo=Bl(Ao);if(Ao.menu!==void 0){const Xs=eu(Ao.menu,_n);Kn.push({text:Jo,items:Xs})}else{const Xs=_n(Ao);Kn.push({text:Jo,value:Xs})}}),Kn},pu=(Yt=As)=>_n=>_n?Gt.from(_n).map(Kn=>eu(Kn,Yt)):Gt.none(),Qp=Yt=>pu(As)(Yt),cm=Yt=>ln(Yt,"items"),Cs=(Yt,_n)=>Hn(Yt,Kn=>cm(Kn)?Cs(Kn.items,_n):Kn.value===_n?Gt.some(Kn):Gt.none()),Ll={sanitizer:pu,sanitize:Qp,findEntry:(Yt,_n)=>Yt.bind(Kn=>Cs(Kn,_n))},Ap={makeTab:Yt=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},gp=Yt=>{const _n=Ll.sanitizer(mu=>Yt.convertURL(mu.value||mu.url||"","src")),Kn=new Promise(mu=>{Mr(Yt,K0=>{mu(_n(K0).map(jx=>pn([[{text:"None",value:""}],jx])))})}),Ao=Ll.sanitize(Nn(Yt)),Jo=ko(Yt),Xs=yn(Yt),Jl=Rn(Yt),lu=Qn(Yt),dr=Pu(Yt),gu=sn(Yt),jp=kn(Yt),Z0=yo(Yt),js=Ln(Yt),Xm=Eo(Yt),m0=Wn(Yt),Tp=Gt.some(Cn(Yt)).filter(mu=>ot(mu)&&mu.length>0);return Kn.then(mu=>({image:dr,imageList:mu,classList:Ao,hasAdvTab:Jo,hasUploadTab:Xs,hasUploadUrl:Jl,hasUploadHandler:lu,hasDescription:gu,hasImageTitle:jp,hasDimensions:Z0,hasImageCaption:js,prependURL:Tp,hasAccessibilityOptions:Xm,automaticUploads:m0}))},Tu=Yt=>{const _n={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},Kn=Yt.imageList.map(jp=>({name:"images",type:"listbox",label:"Image list",items:jp})),Ao={name:"alt",type:"input",label:"Alternative description",enabled:!(Yt.hasAccessibilityOptions&&Yt.image.isDecorative)},Jo={name:"title",type:"input",label:"Image title"},Xs={name:"dimensions",type:"sizeinput"},Jl={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},lu=Yt.classList.map(jp=>({name:"classes",type:"listbox",label:"Class",items:jp})),dr={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},gu=jp=>jp?{type:"grid",columns:2}:{type:"panel"};return pn([[_n],Kn.toArray(),Yt.hasAccessibilityOptions&&Yt.hasDescription?[Jl]:[],Yt.hasDescription?[Ao]:[],Yt.hasImageTitle?[Jo]:[],Yt.hasDimensions?[Xs]:[],[{...gu(Yt.classList.isSome()&&Yt.hasImageCaption),items:pn([lu.toArray(),Yt.hasImageCaption?[dr]:[]])}]])},Km={makeTab:Yt=>({title:"General",name:"general",items:Tu(Yt)}),makeItems:Tu},zp={makeTab:Yt=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Bp=Yt=>({prevImage:Ll.findEntry(Yt.imageList,Yt.image.src),prevAlt:Yt.image.alt,open:!0}),mp=Yt=>({src:{value:Yt.src,meta:{}},images:Yt.src,alt:Yt.alt,title:Yt.title,dimensions:{width:Yt.width,height:Yt.height},classes:Yt.class,caption:Yt.caption,style:Yt.style,vspace:Yt.vspace,border:Yt.border,hspace:Yt.hspace,borderstyle:Yt.borderStyle,fileinput:[],isDecorative:Yt.isDecorative}),ly=(Yt,_n)=>({src:Yt.src.value,alt:(Yt.alt===null||Yt.alt.length===0)&&_n?null:Yt.alt,title:Yt.title,width:Yt.dimensions.width,height:Yt.dimensions.height,class:Yt.classes,style:Yt.style,caption:Yt.caption,hspace:Yt.hspace,vspace:Yt.vspace,border:Yt.border,borderStyle:Yt.borderstyle,isDecorative:Yt.isDecorative}),um=(Yt,_n)=>/^(?:[a-zA-Z]+:)?\/\//.test(_n)?Gt.none():Yt.prependURL.bind(Kn=>_n.substring(0,Kn.length)!==Kn?Gt.some(Kn+_n):Gt.none()),_g=(Yt,_n)=>{const Kn=_n.getData();um(Yt,Kn.src.value).each(Ao=>{_n.setData({src:{value:Ao,meta:Kn.src.meta}})})},Ym=(Yt,_n,Kn)=>{Yt.hasDescription&&ot(Kn.alt)&&(_n.alt=Kn.alt),Yt.hasAccessibilityOptions&&(_n.isDecorative=Kn.isDecorative||_n.isDecorative||!1),Yt.hasImageTitle&&ot(Kn.title)&&(_n.title=Kn.title),Yt.hasDimensions&&(ot(Kn.width)&&(_n.dimensions.width=Kn.width),ot(Kn.height)&&(_n.dimensions.height=Kn.height)),ot(Kn.class)&&Ll.findEntry(Yt.classList,Kn.class).each(Ao=>{_n.classes=Ao.value}),Yt.hasImageCaption&&bt(Kn.caption)&&(_n.caption=Kn.caption),Yt.hasAdvTab&&(ot(Kn.style)&&(_n.style=Kn.style),ot(Kn.vspace)&&(_n.vspace=Kn.vspace),ot(Kn.border)&&(_n.border=Kn.border),ot(Kn.hspace)&&(_n.hspace=Kn.hspace),ot(Kn.borderstyle)&&(_n.borderstyle=Kn.borderstyle))},Pm=(Yt,_n)=>{const Kn=_n.getData(),Ao=Kn.src.meta;if(Ao!==void 0){const Jo=rs({},Kn);Ym(Yt,Jo,Ao),_n.setData(Jo)}},by=(Yt,_n,Kn,Ao)=>{const Jo=Ao.getData(),Xs=Jo.src.value,Jl=Jo.src.meta||{};!Jl.width&&!Jl.height&&_n.hasDimensions&&(Ur(Xs)?Yt.imageSize(Xs).then(lu=>{Kn.open&&Ao.setData({dimensions:lu})}).catch(lu=>console.error(lu)):Ao.setData({dimensions:{width:"",height:""}}))},vy=(Yt,_n,Kn)=>{const Ao=Kn.getData(),Jo=Ll.findEntry(Yt.imageList,Ao.src.value);_n.prevImage=Jo,Kn.setData({images:Jo.map(Xs=>Xs.value).getOr("")})},q0=(Yt,_n,Kn,Ao)=>{_g(_n,Ao),Pm(_n,Ao),by(Yt,_n,Kn,Ao),vy(_n,Kn,Ao)},Om=(Yt,_n,Kn,Ao)=>{const Jo=Ao.getData(),Xs=Ll.findEntry(_n.imageList,Jo.images);Xs.each(Jl=>{Jo.alt===""||Kn.prevImage.map(dr=>dr.text===Jo.alt).getOr(!1)?Jl.value===""?Ao.setData({src:Jl,alt:Kn.prevAlt}):Ao.setData({src:Jl,alt:Jl.text}):Ao.setData({src:Jl})}),Kn.prevImage=Xs,q0(Yt,_n,Kn,Ao)},Mp=(Yt,_n,Kn,Ao)=>{const Jo=Ao.getData();Ao.block("Uploading image"),Mt(Jo.fileinput).fold(()=>{Ao.unblock()},Xs=>{const Jl=URL.createObjectURL(Xs),lu=()=>{Ao.unblock(),URL.revokeObjectURL(Jl)},dr=gu=>{Ao.setData({src:{value:gu,meta:{}}}),Ao.showTab("general"),q0(Yt,_n,Kn,Ao),Ao.focus("src")};xr(Xs).then(gu=>{const jp=Yt.createBlobCache(Xs,Jl,gu);_n.automaticUploads?Yt.uploadImage(jp).then(Z0=>{dr(Z0.url),lu()}).catch(Z0=>{lu(),Yt.alertErr(Z0,()=>{Ao.focus("fileinput")})}):(Yt.addToBlobCache(jp),dr(jp.blobUri()),Ao.unblock())})})},cy=(Yt,_n,Kn)=>(Ao,Jo)=>{Jo.name==="src"?q0(Yt,_n,Kn,Ao):Jo.name==="images"?Om(Yt,_n,Kn,Ao):Jo.name==="alt"?Kn.prevAlt=Ao.getData().alt:Jo.name==="fileinput"?Mp(Yt,_n,Kn,Ao):Jo.name==="isDecorative"&&Ao.setEnabled("alt",!Ao.getData().isDecorative)},uy=Yt=>()=>{Yt.open=!1},zy=Yt=>Yt.hasAdvTab||Yt.hasUploadUrl||Yt.hasUploadHandler?{type:"tabpanel",tabs:pn([[Km.makeTab(Yt)],Yt.hasAdvTab?[Ap.makeTab(Yt)]:[],Yt.hasUploadTab&&(Yt.hasUploadUrl||Yt.hasUploadHandler)?[zp.makeTab(Yt)]:[]])}:{type:"panel",items:Km.makeItems(Yt)},R0=(Yt,_n,Kn)=>Ao=>{const Jo=rs(mp(_n.image),Ao.getData()),Xs={...Jo,style:_l(Kn.normalizeCss,ly(Jo,!1))};Yt.execCommand("mceUpdateImage",!1,ly(Xs,_n.hasAccessibilityOptions)),Yt.editorUpload.uploadImagesAuto(),Ao.close()},yp=Yt=>_n=>wr(Yt,_n)?Gn(Yt.documentBaseURI.toAbsolute(_n)).then(Kn=>({width:String(Kn.width),height:String(Kn.height)})):Promise.resolve({width:"",height:""}),Dm=Yt=>(_n,Kn,Ao)=>{var Jo;return Yt.editorUpload.blobCache.create({blob:_n,blobUri:Kn,name:(Jo=_n.name)===null||Jo===void 0?void 0:Jo.replace(/\.[^\.]+$/,""),filename:_n.name,base64:Ao.split(",")[1]})},$p=Yt=>_n=>{Yt.editorUpload.blobCache.add(_n)},em=Yt=>(_n,Kn)=>{Yt.windowManager.alert(_n,Kn)},By=Yt=>_n=>cs(Yt,_n),$y=Yt=>_n=>Yt.dom.parseStyle(_n),dn=Yt=>(_n,Kn)=>Yt.dom.serializeStyle(_n,Kn),zn=Yt=>_n=>Wr(Yt).upload([_n],!1).then(Kn=>{var Ao;return Kn.length===0?Promise.reject("Failed to upload image"):Kn[0].status===!1?Promise.reject((Ao=Kn[0].error)===null||Ao===void 0?void 0:Ao.message):Kn[0]}),ho=Yt=>{const _n={imageSize:yp(Yt),addToBlobCache:$p(Yt),createBlobCache:Dm(Yt),alertErr:em(Yt),normalizeCss:By(Yt),parseStyle:$y(Yt),serializeStyle:dn(Yt),uploadImage:zn(Yt)};return{open:()=>{gp(Yt).then(Ao=>{const Jo=Bp(Ao);return{title:"Insert/Edit Image",size:"normal",body:zy(Ao),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:mp(Ao.image),onSubmit:R0(Yt,Ao,_n),onChange:cy(_n,Ao,Jo),onClose:uy(Jo)}}).then(Yt.windowManager.open)}}},qo=Yt=>{Yt.addCommand("mceImage",ho(Yt).open),Yt.addCommand("mceUpdateImage",(_n,Kn)=>{Yt.undoManager.transact(()=>ur(Yt,Kn))})},mr=Yt=>{const _n=Yt.attr("class");return Ct(_n)&&/\bimage\b/.test(_n)},Wo=Yt=>_n=>{let Kn=_n.length;const Ao=Jo=>{Jo.attr("contenteditable",Yt?"true":null)};for(;Kn--;){const Jo=_n[Kn];mr(Jo)&&(Jo.attr("contenteditable",Yt?"false":null),ms.each(Jo.getAll("figcaption"),Ao))}},Vl=Yt=>{Yt.on("PreInit",()=>{Yt.parser.addNodeFilter("figure",Wo(!0)),Yt.serializer.addNodeFilter("figure",Wo(!1))})},Xr=Yt=>_n=>{const Kn=()=>{_n.setEnabled(Yt.selection.isEditable())};return Yt.on("NodeChange",Kn),Kn(),()=>{Yt.off("NodeChange",Kn)}},Ls=Yt=>{Yt.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:ho(Yt).open,onSetup:_n=>{_n.setActive(Ct(Es(Yt)));const Kn=Yt.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",_n.setActive).unbind,Ao=Xr(Yt)(_n);return()=>{Kn(),Ao()}}}),Yt.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:ho(Yt).open,onSetup:Xr(Yt)}),Yt.ui.registry.addContextMenu("image",{update:_n=>Yt.selection.isEditable()&&(mo(_n)||Oo(_n)&&!us(_n))?["image"]:[]})};var Lu=()=>{o.add("image",Yt=>{Vo(Yt),Vl(Yt),Ls(Yt),qo(Yt)})};Lu()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(co,Vo,yo)=>{var ko;return yo(co,Vo.prototype)?!0:((ko=co.constructor)===null||ko===void 0?void 0:ko.name)===Vo.name},s=co=>{const Vo=typeof co;return co===null?"null":Vo==="object"&&Array.isArray(co)?"array":Vo==="object"&&e(co,String,(yo,ko)=>ko.isPrototypeOf(yo))?"string":Vo},a=co=>Vo=>s(Vo)===co,d=co=>Vo=>typeof Vo===co,b=a("string"),_=a("object"),_e=a("array"),ot=d("function");var st=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ct=tinymce.util.Tools.resolve("tinymce.EditorManager"),ft=tinymce.util.Tools.resolve("tinymce.Env"),mt=tinymce.util.Tools.resolve("tinymce.util.Tools");const bt=co=>Vo=>Vo.options.get(co),wt=co=>{const Vo=co.options.register,yo=ko=>b(ko)||ot(ko)||_(ko);Vo("importcss_merge_classes",{processor:"boolean",default:!0}),Vo("importcss_exclusive",{processor:"boolean",default:!0}),Vo("importcss_selector_converter",{processor:"function"}),Vo("importcss_selector_filter",{processor:yo}),Vo("importcss_file_filter",{processor:yo}),Vo("importcss_groups",{processor:"object[]"}),Vo("importcss_append",{processor:"boolean",default:!1})},Ct=bt("importcss_merge_classes"),Rt=bt("importcss_exclusive"),It=bt("importcss_selector_converter"),Pt=bt("importcss_selector_filter"),Tt=bt("importcss_groups"),Gt=bt("importcss_append"),Jt=bt("importcss_file_filter"),qt=bt("skin"),Nt=bt("skin_url"),Qt=Array.prototype.push,fn=(co,Vo)=>{const yo=co.length,ko=new Array(yo);for(let yn=0;yn<yo;yn++){const Cn=co[yn];ko[yn]=Vo(Cn,yn)}return ko},Mn=co=>{const Vo=[];for(let yo=0,ko=co.length;yo<ko;++yo){if(!_e(co[yo]))throw new Error("Arr.flatten item "+yo+" was not an array, input: "+co);Qt.apply(Vo,co[yo])}return Vo},ln=(co,Vo)=>Mn(fn(co,Vo)),Wt=()=>{const co=[],Vo=[],yo={};return{addItemToGroup:(Nn,sn)=>{yo[Nn]?yo[Nn].push(sn):(Vo.push(Nn),yo[Nn]=[sn])},addItem:Nn=>{co.push(Nn)},toFormats:()=>ln(Vo,sn=>{const kn=yo[sn];return kn.length===0?[]:[{title:sn,items:kn}]}).concat(co)}},so=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,pn=co=>{const Vo=ft.cacheSuffix;return b(co)&&(co=co.replace("?"+Vo,"").replace("&"+Vo,"")),co},hn=(co,Vo)=>{const yo=qt(co);if(yo){const ko=Nt(co),yn=ko?co.documentBaseURI.toAbsolute(ko):ct.baseURL+"/skins/ui/"+yo,Cn=ct.baseURL+"/skins/content/",Nn=co.editorManager.suffix;return Vo===yn+"/content"+(co.inline?".inline":"")+`${Nn}.css`||Vo.indexOf(Cn)!==-1}return!1},Mt=co=>b(co)?Vo=>Vo.indexOf(co)!==-1:co instanceof RegExp?Vo=>co.test(Vo):co,Hn=co=>co.styleSheet,cn=co=>co.selectorText,fo=(co,Vo,yo)=>{const ko=[],yn={},Cn=(Nn,sn)=>{let kn=Nn.href,Ln;if(kn=pn(kn),!(!kn||yo&&!yo(kn,sn)||hn(co,kn))){mt.each(Nn.imports,Bn=>{Cn(Bn,!0)});try{Ln=Nn.cssRules||Nn.rules}catch{}mt.each(Ln,Bn=>{Hn(Bn)&&Bn.styleSheet?Cn(Bn.styleSheet,!0):cn(Bn)&&mt.each(Bn.selectorText.split(","),Eo=>{ko.push(mt.trim(Eo))})})}};mt.each(co.contentCSS,Nn=>{yn[Nn]=!0}),yo||(yo=(Nn,sn)=>sn||yn[Nn]);try{mt.each(Vo.styleSheets,Nn=>{Cn(Nn)})}catch{}return ko},Fn=(co,Vo)=>{let yo={};const ko=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(Vo);if(!ko)return;const yn=ko[1],Cn=ko[2].substr(1).split(".").join(" "),Nn=mt.makeMap("a,img");return ko[1]?(yo={title:Vo},co.schema.getTextBlockElements()[yn]?yo.block=yn:co.schema.getBlockElements()[yn]||Nn[yn.toLowerCase()]?yo.selector=yn:yo.inline=yn):ko[2]&&(yo={inline:"span",title:Vo.substr(1),classes:Cn}),Ct(co)?yo.classes=Cn:yo.attributes={class:Cn},yo},Tn=(co,Vo)=>mt.grep(co,yo=>!yo.filter||yo.filter(Vo)),qn=co=>mt.map(co,Vo=>mt.extend({},Vo,{original:Vo,selectors:{},filter:Mt(Vo.filter)})),nr=(co,Vo)=>Vo===null||Rt(co),oo=(co,Vo,yo,ko)=>!(nr(co,yo)?Vo in ko:Vo in yo.selectors),Mo=(co,Vo,yo,ko)=>{nr(co,yo)?ko[Vo]=!0:yo.selectors[Vo]=!0},Dn=(co,Vo,yo,ko)=>{let yn;const Cn=It(co);return ko&&ko.selector_converter?yn=ko.selector_converter:Cn?yn=Cn:yn=()=>Fn(co,yo),yn.call(Vo,yo,ko)},xo=co=>{co.on("init",()=>{const Vo=Wt(),yo={},ko=Mt(Pt(co)),yn=qn(Tt(co)),Cn=(sn,kn)=>{if(oo(co,sn,kn,yo)){Mo(co,sn,kn,yo);const Ln=Dn(co,co.plugins.importcss,sn,kn);if(Ln){const Bn=Ln.name||st.DOM.uniqueId();return co.formatter.register(Bn,Ln),{title:Ln.title,format:Bn}}}return null};mt.each(fo(co,co.getDoc(),Mt(Jt(co))),sn=>{if(!so.test(sn)&&(!ko||ko(sn))){const kn=Tn(yn,sn);if(kn.length>0)mt.each(kn,Ln=>{const Bn=Cn(sn,Ln);Bn&&Vo.addItemToGroup(Ln.title,Bn)});else{const Ln=Cn(sn,null);Ln&&Vo.addItem(Ln)}}});const Nn=Vo.toFormats();co.dispatch("addStyleModifications",{items:Nn,replace:!Gt(co)})})},Xt=co=>({convertSelectorToFormat:yo=>Fn(co,yo)});var Ur=()=>{o.add("importcss",co=>(wt(co),xo(co),Xt(co)))};Ur()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=qt=>Nt=>Nt.options.get(qt),s=qt=>{const Nt=qt.options.register;Nt("insertdatetime_dateformat",{processor:"string",default:qt.translate("%Y-%m-%d")}),Nt("insertdatetime_timeformat",{processor:"string",default:qt.translate("%H:%M:%S")}),Nt("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),Nt("insertdatetime_element",{processor:"boolean",default:!1})},a=e("insertdatetime_dateformat"),d=e("insertdatetime_timeformat"),b=e("insertdatetime_formats"),_=e("insertdatetime_element"),_e=qt=>{const Nt=b(qt);return Nt.length>0?Nt[0]:d(qt)},ot="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),st="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),ct="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ft="January February March April May June July August September October November December".split(" "),mt=(qt,Nt)=>{if(qt=""+qt,qt.length<Nt)for(let Qt=0;Qt<Nt-qt.length;Qt++)qt="0"+qt;return qt},bt=(qt,Nt,Qt=new Date)=>(Nt=Nt.replace("%D","%m/%d/%Y"),Nt=Nt.replace("%r","%I:%M:%S %p"),Nt=Nt.replace("%Y",""+Qt.getFullYear()),Nt=Nt.replace("%y",""+Qt.getYear()),Nt=Nt.replace("%m",mt(Qt.getMonth()+1,2)),Nt=Nt.replace("%d",mt(Qt.getDate(),2)),Nt=Nt.replace("%H",""+mt(Qt.getHours(),2)),Nt=Nt.replace("%M",""+mt(Qt.getMinutes(),2)),Nt=Nt.replace("%S",""+mt(Qt.getSeconds(),2)),Nt=Nt.replace("%I",""+((Qt.getHours()+11)%12+1)),Nt=Nt.replace("%p",Qt.getHours()<12?"AM":"PM"),Nt=Nt.replace("%B",""+qt.translate(ft[Qt.getMonth()])),Nt=Nt.replace("%b",""+qt.translate(ct[Qt.getMonth()])),Nt=Nt.replace("%A",""+qt.translate(st[Qt.getDay()])),Nt=Nt.replace("%a",""+qt.translate(ot[Qt.getDay()])),Nt=Nt.replace("%%","%"),Nt),wt=(qt,Nt,Qt,fn)=>{const Mn=qt.dom.create("time",{datetime:Qt},fn);qt.dom.replace(Mn,Nt),qt.selection.select(Mn,!0),qt.selection.collapse(!1)},Ct=(qt,Nt)=>{if(_(qt)&&qt.selection.isEditable()){const Qt=bt(qt,Nt);let fn;/%[HMSIp]/.test(Nt)?fn=bt(qt,"%Y-%m-%dT%H:%M"):fn=bt(qt,"%Y-%m-%d");const Mn=qt.dom.getParent(qt.selection.getStart(),"time");Mn?wt(qt,Mn,fn,Qt):qt.insertContent('<time datetime="'+fn+'">'+Qt+"</time>")}else qt.insertContent(bt(qt,Nt))},Rt=qt=>{qt.addCommand("mceInsertDate",(Nt,Qt)=>{Ct(qt,Qt??a(qt))}),qt.addCommand("mceInsertTime",(Nt,Qt)=>{Ct(qt,Qt??d(qt))})},It=qt=>{let Nt=qt;return{get:()=>Nt,set:Mn=>{Nt=Mn}}};var Pt=tinymce.util.Tools.resolve("tinymce.util.Tools");const Tt=qt=>Nt=>{const Qt=()=>{Nt.setEnabled(qt.selection.isEditable())};return qt.on("NodeChange",Qt),Qt(),()=>{qt.off("NodeChange",Qt)}},Gt=qt=>{const Nt=b(qt),Qt=It(_e(qt)),fn=ln=>qt.execCommand("mceInsertDate",!1,ln);qt.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:ln=>ln===Qt.get(),fetch:ln=>{ln(Pt.map(Nt,Wt=>({type:"choiceitem",text:bt(qt,Wt),value:Wt})))},onAction:ln=>{fn(Qt.get())},onItemAction:(ln,Wt)=>{Qt.set(Wt),fn(Wt)},onSetup:Tt(qt)});const Mn=ln=>()=>{Qt.set(ln),fn(ln)};qt.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>Pt.map(Nt,ln=>({type:"menuitem",text:bt(qt,ln),onAction:Mn(ln)})),onSetup:Tt(qt)})};var Jt=()=>{o.add("insertdatetime",qt=>{s(qt),Rt(qt),Gt(qt)})};Jt()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(dn,zn,ho)=>{var qo;return ho(dn,zn.prototype)?!0:((qo=dn.constructor)===null||qo===void 0?void 0:qo.name)===zn.name},s=dn=>{const zn=typeof dn;return dn===null?"null":zn==="object"&&Array.isArray(dn)?"array":zn==="object"&&e(dn,String,(ho,qo)=>qo.isPrototypeOf(ho))?"string":zn},a=dn=>zn=>s(zn)===dn,d=dn=>zn=>typeof zn===dn,b=dn=>zn=>dn===zn,_=a("string"),_e=a("object"),ot=a("array"),st=b(null),ct=d("boolean"),ft=dn=>dn==null,mt=dn=>!ft(dn),bt=d("function"),wt=(dn,zn)=>{if(ot(dn)){for(let ho=0,qo=dn.length;ho<qo;++ho)if(!zn(dn[ho]))return!1;return!0}return!1},Ct=()=>{},Rt=dn=>()=>dn,It=(dn,zn)=>dn===zn;class Pt{constructor(zn,ho){this.tag=zn,this.value=ho}static some(zn){return new Pt(!0,zn)}static none(){return Pt.singletonNone}fold(zn,ho){return this.tag?ho(this.value):zn()}isSome(){return this.tag}isNone(){return!this.tag}map(zn){return this.tag?Pt.some(zn(this.value)):Pt.none()}bind(zn){return this.tag?zn(this.value):Pt.none()}exists(zn){return this.tag&&zn(this.value)}forall(zn){return!this.tag||zn(this.value)}filter(zn){return!this.tag||zn(this.value)?this:Pt.none()}getOr(zn){return this.tag?this.value:zn}or(zn){return this.tag?this:zn}getOrThunk(zn){return this.tag?this.value:zn()}orThunk(zn){return this.tag?this:zn()}getOrDie(zn){if(this.tag)return this.value;throw new Error(zn??"Called getOrDie on None")}static from(zn){return mt(zn)?Pt.some(zn):Pt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(zn){this.tag&&zn(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Pt.singletonNone=new Pt(!1);const Tt=Array.prototype.indexOf,Gt=Array.prototype.push,Jt=(dn,zn)=>Tt.call(dn,zn),qt=(dn,zn)=>Jt(dn,zn)>-1,Nt=(dn,zn)=>{const ho=dn.length,qo=new Array(ho);for(let mr=0;mr<ho;mr++){const Wo=dn[mr];qo[mr]=zn(Wo,mr)}return qo},Qt=(dn,zn)=>{for(let ho=0,qo=dn.length;ho<qo;ho++){const mr=dn[ho];zn(mr,ho)}},fn=(dn,zn,ho)=>(Qt(dn,(qo,mr)=>{ho=zn(ho,qo,mr)}),ho),Mn=dn=>{const zn=[];for(let ho=0,qo=dn.length;ho<qo;++ho){if(!ot(dn[ho]))throw new Error("Arr.flatten item "+ho+" was not an array, input: "+dn);Gt.apply(zn,dn[ho])}return zn},ln=(dn,zn)=>Mn(Nt(dn,zn)),Wt=(dn,zn)=>{for(let ho=0;ho<dn.length;ho++){const qo=zn(dn[ho],ho);if(qo.isSome())return qo}return Pt.none()},so=(dn,zn,ho=It)=>dn.exists(qo=>ho(qo,zn)),pn=dn=>{const zn=[],ho=qo=>{zn.push(qo)};for(let qo=0;qo<dn.length;qo++)dn[qo].each(ho);return zn},hn=(dn,zn)=>dn?Pt.some(zn):Pt.none(),Mt=dn=>zn=>zn.options.get(dn),Hn=dn=>{const zn=dn.options.register;zn("link_assume_external_targets",{processor:ho=>{const qo=_(ho)||ct(ho);return qo?ho===!0?{value:1,valid:qo}:ho==="http"||ho==="https"?{value:ho,valid:qo}:{value:0,valid:qo}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),zn("link_context_toolbar",{processor:"boolean",default:!1}),zn("link_list",{processor:ho=>_(ho)||bt(ho)||wt(ho,_e)}),zn("link_default_target",{processor:"string"}),zn("link_default_protocol",{processor:"string",default:"https"}),zn("link_target_list",{processor:ho=>ct(ho)||wt(ho,_e),default:!0}),zn("link_rel_list",{processor:"object[]",default:[]}),zn("link_class_list",{processor:"object[]",default:[]}),zn("link_title",{processor:"boolean",default:!0}),zn("allow_unsafe_link_target",{processor:"boolean",default:!1}),zn("link_quicklink",{processor:"boolean",default:!1})},cn=Mt("link_assume_external_targets"),fo=Mt("link_context_toolbar"),Fn=Mt("link_list"),Tn=Mt("link_default_target"),qn=Mt("link_default_protocol"),nr=Mt("link_target_list"),oo=Mt("link_rel_list"),Mo=Mt("link_class_list"),Dn=Mt("link_title"),xo=Mt("allow_unsafe_link_target"),Xt=Mt("link_quicklink"),Ur=Object.keys,co=Object.hasOwnProperty,Vo=(dn,zn)=>{const ho=Ur(dn);for(let qo=0,mr=ho.length;qo<mr;qo++){const Wo=ho[qo],Vl=dn[Wo];zn(Vl,Wo)}},yo=dn=>(zn,ho)=>{dn[ho]=zn},ko=(dn,zn,ho,qo)=>{Vo(dn,(mr,Wo)=>{(zn(mr,Wo)?ho:qo)(mr,Wo)})},yn=(dn,zn)=>{const ho={};return ko(dn,zn,yo(ho),Ct),ho},Cn=(dn,zn)=>co.call(dn,zn),Nn=(dn,zn)=>Cn(dn,zn)&&dn[zn]!==void 0&&dn[zn]!==null;var sn=tinymce.util.Tools.resolve("tinymce.util.URI"),kn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ln=tinymce.util.Tools.resolve("tinymce.util.Tools");const Bn=dn=>mt(dn)&&dn.nodeName.toLowerCase()==="a",Eo=dn=>Bn(dn)&&!!Qn(dn),Wn=(dn,zn)=>{if(dn.collapsed)return[];{const ho=dn.cloneContents(),qo=ho.firstChild,mr=new kn(qo,ho),Wo=[];let Vl=qo;do zn(Vl)&&Wo.push(Vl);while(Vl=mr.next());return Wo}},Rn=dn=>/^\w+:/i.test(dn),Qn=dn=>{var zn,ho;return(ho=(zn=dn.getAttribute("data-mce-href"))!==null&&zn!==void 0?zn:dn.getAttribute("href"))!==null&&ho!==void 0?ho:""},vo=(dn,zn)=>{const ho=["noopener"],qo=dn?dn.split(/\s+/):[],mr=Ls=>Ln.trim(Ls.sort().join(" ")),Wo=Ls=>(Ls=Vl(Ls),Ls.length>0?Ls.concat(ho):ho),Vl=Ls=>Ls.filter(Lu=>Ln.inArray(ho,Lu)===-1),Xr=zn?Wo(qo):Vl(qo);return Xr.length>0?mr(Xr):""},Gn=dn=>dn.replace(/\uFEFF/g,""),ro=(dn,zn)=>(zn=zn||Mr(dn.selection.getRng())[0]||dn.selection.getNode(),gs(zn)?Pt.from(dn.dom.select("a[href]",zn)[0]):Pt.from(dn.dom.getParent(zn,"a[href]"))),Co=(dn,zn)=>ro(dn,zn).isSome(),Do=(dn,zn)=>{const ho=zn.fold(()=>dn.getContent({format:"text"}),qo=>qo.innerText||qo.textContent||"");return Gn(ho)},Mr=dn=>Wn(dn,Eo),ar=dn=>Ln.grep(dn,Eo),xr=dn=>ar(dn).length>0,us=dn=>Mr(dn).length>0,wr=dn=>{const zn=dn.schema.getTextInlineElements(),ho=Wo=>Wo.nodeType===1&&!Bn(Wo)&&!Cn(zn,Wo.nodeName.toLowerCase());if(ro(dn).exists(Wo=>Wo.hasAttribute("data-mce-block")))return!1;const mr=dn.selection.getRng();return mr.collapsed?!0:Wn(mr,ho).length===0},gs=dn=>mt(dn)&&dn.nodeName==="FIGURE"&&/\bimage\b/i.test(dn.className),Ts=dn=>fn(["title","rel","class","target"],(ho,qo)=>(dn[qo].each(mr=>{ho[qo]=mr.length>0?mr:null}),ho),{href:dn.href}),Rs=(dn,zn)=>(zn==="http"||zn==="https")&&!Rn(dn)?zn+"://"+dn:dn,Cl=(dn,zn)=>{const ho={...zn};if(oo(dn).length===0&&!xo(dn)){const qo=vo(ho.rel,ho.target==="_blank");ho.rel=qo||null}return Pt.from(ho.target).isNone()&&nr(dn)===!1&&(ho.target=Tn(dn)),ho.href=Rs(ho.href,cn(dn)),ho},Yr=(dn,zn,ho,qo)=>{ho.each(mr=>{Cn(zn,"innerText")?zn.innerText=mr:zn.textContent=mr}),dn.dom.setAttribs(zn,qo),dn.selection.select(zn)},Dl=(dn,zn,ho,qo)=>{const mr=dn.dom;gs(zn)?uu(mr,zn,qo):ho.fold(()=>{dn.execCommand("mceInsertLink",!1,qo)},Wo=>{dn.insertContent(mr.createHTML("a",qo,mr.encode(Wo)))})},or=(dn,zn,ho)=>{const qo=dn.selection.getNode(),mr=ro(dn,qo),Wo=Cl(dn,Ts(ho));dn.undoManager.transact(()=>{ho.href===zn.href&&zn.attach(),mr.fold(()=>{Dl(dn,qo,ho.text,Wo)},Vl=>{dn.focus(),Yr(dn,Vl,ho.text,Wo)})})},Ds=dn=>{const zn=dn.dom,ho=dn.selection,qo=ho.getBookmark(),mr=ho.getRng().cloneRange(),Wo=zn.getParent(mr.startContainer,"a[href]",dn.getBody()),Vl=zn.getParent(mr.endContainer,"a[href]",dn.getBody());Wo&&mr.setStartBefore(Wo),Vl&&mr.setEndAfter(Vl),ho.setRng(mr),dn.execCommand("unlink"),ho.moveToBookmark(qo)},hu=dn=>{dn.undoManager.transact(()=>{const zn=dn.selection.getNode();gs(zn)?Eu(dn,zn):Ds(dn),dn.focus()})},au=dn=>{const{class:zn,href:ho,rel:qo,target:mr,text:Wo,title:Vl}=dn;return yn({class:zn.getOrNull(),href:ho,rel:qo.getOrNull(),target:mr.getOrNull(),text:Wo.getOrNull(),title:Vl.getOrNull()},(Xr,Ls)=>st(Xr)===!1)},_c=(dn,zn)=>{const ho=dn.options.get,qo={allow_html_data_urls:ho("allow_html_data_urls"),allow_script_urls:ho("allow_script_urls"),allow_svg_data_urls:ho("allow_svg_data_urls")},mr=zn.href;return{...zn,href:sn.isDomSafe(mr,"a",qo)?mr:""}},Su=(dn,zn,ho)=>{const qo=_c(dn,ho);dn.hasPlugin("rtc",!0)?dn.execCommand("createlink",!1,au(qo)):or(dn,zn,qo)},Zs=dn=>{dn.hasPlugin("rtc",!0)?dn.execCommand("unlink"):hu(dn)},Eu=(dn,zn)=>{var ho;const qo=dn.dom.select("img",zn)[0];if(qo){const mr=dn.dom.getParents(qo,"a[href]",zn)[0];mr&&((ho=mr.parentNode)===null||ho===void 0||ho.insertBefore(qo,mr),dn.dom.remove(mr))}},uu=(dn,zn,ho)=>{var qo;const mr=dn.select("img",zn)[0];if(mr){const Wo=dn.create("a",ho);(qo=mr.parentNode)===null||qo===void 0||qo.insertBefore(Wo,mr),Wo.appendChild(mr)}},$a=dn=>_(dn.value)?dn.value:"",es=dn=>_(dn.text)?dn.text:_(dn.title)?dn.title:"",yl=(dn,zn)=>{const ho=[];return Ln.each(dn,qo=>{const mr=es(qo);if(qo.menu!==void 0){const Wo=yl(qo.menu,zn);ho.push({text:mr,items:Wo})}else{const Wo=zn(qo);ho.push({text:mr,value:Wo})}}),ho},mo=(dn=$a)=>zn=>Pt.from(zn).map(ho=>yl(ho,dn)),Br={sanitize:dn=>mo($a)(dn),sanitizeWith:mo,createUi:(dn,zn)=>ho=>({name:dn,type:"listbox",label:zn,items:ho}),getValue:$a},Ws=dn=>Nn(dn,"items"),_l=(dn,zn)=>Wt(zn,ho=>Ws(ho)?_l(dn,ho.items):hn(ho.value===dn,ho)),Wu=(dn,zn,ho,qo)=>{const mr=qo[zn],Wo=dn.length>0;return mr!==void 0?_l(mr,ho).map(Vl=>({url:{value:Vl.value,meta:{text:Wo?dn:Vl.text,attach:Ct}},text:Wo?dn:Vl.text})):Pt.none()},qu=(dn,zn)=>zn==="link"?dn.link:zn==="anchor"?dn.anchor:Pt.none(),Vn={init:(dn,zn)=>{const ho={text:dn.text,title:dn.title},qo=Ls=>{var Lu;return hn(ho.title.length<=0,Pt.from((Lu=Ls.meta)===null||Lu===void 0?void 0:Lu.title).getOr(""))},mr=Ls=>{var Lu;return hn(ho.text.length<=0,Pt.from((Lu=Ls.meta)===null||Lu===void 0?void 0:Lu.text).getOr(Ls.value))},Wo=Ls=>{const Lu=mr(Ls.url),Yt=qo(Ls.url);return Lu.isSome()||Yt.isSome()?Pt.some({...Lu.map(_n=>({text:_n})).getOr({}),...Yt.map(_n=>({title:_n})).getOr({})}):Pt.none()},Vl=(Ls,Lu)=>{const Yt=qu(zn,Lu).getOr([]);return Wu(ho.text,Lu,Yt,Ls)};return{onChange:(Ls,Lu)=>{const Yt=Lu.name;return Yt==="url"?Wo(Ls()):qt(["anchor","link"],Yt)?Vl(Ls(),Yt):((Yt==="text"||Yt==="title")&&(ho[Yt]=Ls()[Yt]),Pt.none())}}},getDelta:Wu};var $n=tinymce.util.Tools.resolve("tinymce.util.Delay");const Po=(dn,zn,ho)=>{const qo=dn.selection.getRng();$n.setEditorTimeout(dn,()=>{dn.windowManager.confirm(zn,mr=>{dn.selection.setRng(qo),ho(mr)})})},Ho=dn=>{const zn=dn.href;return zn.indexOf("@")>0&&zn.indexOf("/")===-1&&zn.indexOf("mailto:")===-1?Pt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:qo=>({...qo,href:"mailto:"+zn})}):Pt.none()},cs=(dn,zn)=>ho=>{const qo=ho.href;return dn===1&&!Rn(qo)||dn===0&&/^\s*www(\.|\d\.)/i.test(qo)?Pt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${zn}:// prefix?`,preprocess:Wo=>({...Wo,href:zn+"://"+qo})}):Pt.none()},zs={preprocess:(dn,zn)=>Wt([Ho,cs(cn(dn),qn(dn))],ho=>ho(zn)).fold(()=>Promise.resolve(zn),ho=>new Promise(qo=>{Po(dn,ho.message,mr=>{qo(mr?ho.preprocess(zn):zn)})}))},io={getAnchors:dn=>{const zn=dn.dom.select("a:not([href])"),ho=ln(zn,qo=>{const mr=qo.name||qo.id;return mr?[{text:mr,value:"#"+mr}]:[]});return ho.length>0?Pt.some([{text:"None",value:""}].concat(ho)):Pt.none()}},Jn={getClasses:dn=>{const zn=Mo(dn);return zn.length>0?Br.sanitize(zn):Pt.none()}},to=dn=>{try{return Pt.some(JSON.parse(dn))}catch{return Pt.none()}},ur={getLinks:dn=>{const zn=qo=>dn.convertURL(qo.value||qo.url||"","href"),ho=Fn(dn);return new Promise(qo=>{_(ho)?fetch(ho).then(mr=>mr.ok?mr.text().then(to):Promise.reject()).then(qo,()=>qo(Pt.none())):bt(ho)?ho(mr=>qo(Pt.some(mr))):qo(Pt.from(ho))}).then(qo=>qo.bind(Br.sanitizeWith(zn)).map(mr=>mr.length>0?[{text:"None",value:""}].concat(mr):mr))}},ns={getRels:(dn,zn)=>{const ho=oo(dn);if(ho.length>0){const qo=so(zn,"_blank"),mr=xo(dn)===!1,Wo=Xr=>vo(Br.getValue(Xr),qo);return(mr?Br.sanitizeWith(Wo):Br.sanitize)(ho)}return Pt.none()}},rs=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],ms={getTargets:dn=>{const zn=nr(dn);return ot(zn)?Br.sanitize(zn).orThunk(()=>Pt.some(rs)):zn===!1?Pt.none():Pt.some(rs)}},As=(dn,zn,ho)=>{const qo=dn.getAttrib(zn,ho);return qo!==null&&qo.length>0?Pt.some(qo):Pt.none()},Bl=(dn,zn)=>{const ho=dn.dom,mr=wr(dn)?Pt.some(Do(dn.selection,zn)):Pt.none(),Wo=zn.bind(Yt=>Pt.from(ho.getAttrib(Yt,"href"))),Vl=zn.bind(Yt=>Pt.from(ho.getAttrib(Yt,"target"))),Xr=zn.bind(Yt=>As(ho,Yt,"rel")),Ls=zn.bind(Yt=>As(ho,Yt,"class")),Lu=zn.bind(Yt=>As(ho,Yt,"title"));return{url:Wo,text:mr,title:Lu,target:Vl,rel:Xr,linkClass:Ls}},pu={collect:(dn,zn)=>ur.getLinks(dn).then(ho=>{const qo=Bl(dn,zn);return{anchor:qo,catalogs:{targets:ms.getTargets(dn),rels:ns.getRels(dn,qo.target),classes:Jn.getClasses(dn),anchor:io.getAnchors(dn),link:ho},optNode:zn,flags:{titleEnabled:Dn(dn)}}})},Qp=(dn,zn)=>ho=>{const qo=ho.getData();if(!qo.url.value){Zs(dn),ho.close();return}const mr=Xr=>Pt.from(qo[Xr]).filter(Ls=>!so(zn.anchor[Xr],Ls)),Wo={href:qo.url.value,text:mr("text"),target:mr("target"),rel:mr("rel"),class:mr("linkClass"),title:mr("title")},Vl={href:qo.url.value,attach:qo.url.meta!==void 0&&qo.url.meta.attach?qo.url.meta.attach:Ct};zs.preprocess(dn,Wo).then(Xr=>{Su(dn,Vl,Xr)}),ho.close()},cm=dn=>{const zn=ro(dn);return pu.collect(dn,zn)},Cs=(dn,zn)=>{const ho=dn.anchor,qo=ho.url.getOr("");return{url:{value:qo,meta:{original:{value:qo}}},text:ho.text.getOr(""),title:ho.title.getOr(""),anchor:qo,link:qo,rel:ho.rel.getOr(""),target:ho.target.or(zn).getOr(""),linkClass:ho.linkClass.getOr("")}},Rl=(dn,zn,ho)=>{const qo=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],mr=dn.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Wo=dn.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Vl=Pt.from(Tn(ho)),Xr=Cs(dn,Vl),Ls=dn.catalogs,Lu=Vn.init(Xr,Ls);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Mn([qo,mr,Wo,pn([Ls.anchor.map(Br.createUi("anchor","Anchors")),Ls.rels.map(Br.createUi("rel","Rel")),Ls.targets.map(Br.createUi("target","Open link in...")),Ls.link.map(Br.createUi("link","Link list")),Ls.classes.map(Br.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Xr,onChange:(_n,{name:Kn})=>{Lu.onChange(_n.getData,{name:Kn}).each(Ao=>{_n.setData(Ao)})},onSubmit:zn}},Ll=dn=>{cm(dn).then(ho=>{const qo=Qp(dn,ho);return Rl(ho,qo,dn)}).then(ho=>{dn.windowManager.open(ho)})},Ep=dn=>{dn.addCommand("mceLink",(zn,ho)=>{(ho==null?void 0:ho.dialog)===!0||!Xt(dn)?Ll(dn):dn.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Ap=dn=>{dn.addShortcut("Meta+K","",()=>{dn.execCommand("mceLink")})},gp=dn=>{let zn=dn;return{get:()=>zn,set:mr=>{zn=mr}}},Tu=dn=>{const zn=gp(Pt.none()),ho=()=>zn.get().each(dn);return{clear:()=>{ho(),zn.set(Pt.none())},isSet:()=>zn.get().isSome(),get:()=>zn.get(),set:Xr=>{ho(),zn.set(Pt.some(Xr))}}},v1=()=>{const dn=Tu(Ct);return{...dn,on:ho=>dn.get().each(ho)}},Km=(dn,zn)=>dn.substring(zn),Yl=(dn,zn,ho)=>zn===""||dn.length>=zn.length&&dn.substr(ho,ho+zn.length)===zn,zp=(dn,zn)=>Bp(dn,zn)?Km(dn,zn.length):dn,Bp=(dn,zn)=>Yl(dn,zn,0);var mp=tinymce.util.Tools.resolve("tinymce.util.VK");const ly=(dn,zn)=>{document.body.appendChild(dn),dn.dispatchEvent(zn),document.body.removeChild(dn)},um=dn=>{const zn=document.createElement("a");zn.target="_blank",zn.href=dn,zn.rel="noreferrer noopener";const ho=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(ho),ly(zn,ho)},_g=dn=>dn.altKey===!0&&dn.shiftKey===!1&&dn.ctrlKey===!1&&dn.metaKey===!1,Ym=(dn,zn)=>{if(zn){const ho=Qn(zn);if(/^#/.test(ho)){const qo=dn.dom.select(`${ho},[name="${zp(ho,"#")}"]`);qo.length&&dn.selection.scrollIntoView(qo[0],!0)}else um(zn.href)}},Pm=dn=>{const zn=dn.selection.getRng(),ho=zn.startContainer;return Eo(ho)&&zn.startContainer===zn.endContainer&&dn.dom.select("img",ho).length===1},by=(dn,zn)=>{const ho=ar(dn.dom.getParents(zn));return hn(ho.length===1,ho[0])},vy=dn=>{const zn=Mr(dn.selection.getRng());return hn(zn.length>0,zn[0]).or(by(dn,dn.selection.getNode()))},q0=dn=>dn.selection.isCollapsed()||Pm(dn)?by(dn,dn.selection.getStart()):vy(dn),Om=dn=>{const zn=v1(),ho=()=>zn.get().or(q0(dn)),qo=()=>ho().each(mr=>Ym(dn,mr));return dn.on("contextmenu",mr=>{by(dn,mr.target).each(zn.set)}),dn.on("SelectionChange",()=>{zn.isSet()||q0(dn).each(zn.set)}),dn.on("click",mr=>{zn.clear();const Wo=ar(dn.dom.getParents(mr.target));Wo.length===1&&mp.metaKeyPressed(mr)&&(mr.preventDefault(),Ym(dn,Wo[0]))}),dn.on("keydown",mr=>{zn.clear(),!mr.isDefaultPrevented()&&mr.keyCode===13&&_g(mr)&&ho().each(Wo=>{mr.preventDefault(),Ym(dn,Wo)})}),{gotoSelectedLink:qo}},Mp=dn=>()=>{dn.execCommand("mceLink",!1,{dialog:!0})},cy=(dn,zn)=>(dn.on("NodeChange",zn),()=>dn.off("NodeChange",zn)),uy=dn=>zn=>{const ho=()=>{zn.setActive(!dn.mode.isReadOnly()&&Co(dn,dn.selection.getNode())),zn.setEnabled(dn.selection.isEditable())};return ho(),cy(dn,ho)},zy=dn=>zn=>{const ho=()=>{zn.setEnabled(dn.selection.isEditable())};return ho(),cy(dn,ho)},R0=dn=>zn=>{const ho=Wo=>xr(Wo)||us(dn.selection.getRng()),qo=dn.dom.getParents(dn.selection.getStart()),mr=Wo=>{zn.setEnabled(ho(Wo)&&dn.selection.isEditable())};return mr(qo),cy(dn,Wo=>mr(Wo.parents))},yp=(dn,zn)=>{dn.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:Mp(dn),onSetup:uy(dn)}),dn.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:zn.gotoSelectedLink,onSetup:R0(dn)}),dn.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Zs(dn),onSetup:R0(dn)})},Dm=(dn,zn)=>{dn.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:zn.gotoSelectedLink,onSetup:R0(dn)}),dn.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Mp(dn),onSetup:zy(dn)}),dn.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Zs(dn),onSetup:R0(dn)})},$p=dn=>{const zn="link unlink openlink",ho="link";dn.ui.registry.addContextMenu("link",{update:qo=>dn.dom.isEditable(qo)?xr(dn.dom.getParents(qo,"a"))?zn:ho:""})},em=(dn,zn)=>{const ho=Wo=>{Wo.selection.collapse(!1)},qo=Wo=>{const Vl=dn.selection.getNode();return Wo.setEnabled(Co(dn,Vl)&&dn.selection.isEditable()),Ct},mr=Wo=>{const Vl=ro(dn),Xr=wr(dn);if(Vl.isNone()&&Xr){const Ls=Do(dn.selection,Vl);return hn(Ls.length===0,Wo)}else return Pt.none()};dn.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:uy(dn)},label:"Link",predicate:Wo=>fo(dn)&&Co(dn,Wo),initValue:()=>ro(dn).fold(Rt(""),Qn),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Wo=>{const Vl=dn.selection.getNode();return Wo.setActive(Co(dn,Vl)),uy(dn)(Wo)},onAction:Wo=>{const Vl=Wo.getValue(),Xr=mr(Vl);Su(dn,{href:Vl,attach:Ct},{href:Vl,text:Xr,title:Pt.none(),rel:Pt.none(),target:Pt.from(Tn(dn)),class:Pt.none()}),ho(dn),Wo.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:qo,onAction:Wo=>{Zs(dn),Wo.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:qo,onAction:Wo=>{zn.gotoSelectedLink(),Wo.hide()}}]})},By=dn=>{const zn=Om(dn);yp(dn,zn),Dm(dn,zn),$p(dn),em(dn,zn)};var $y=()=>{o.add("link",dn=>{Hn(dn),Ep(dn),By(dn),Ap(dn)})};$y()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(Lt,Ut,rn)=>{var jn;return rn(Lt,Ut.prototype)?!0:((jn=Lt.constructor)===null||jn===void 0?void 0:jn.name)===Ut.name},s=Lt=>{const Ut=typeof Lt;return Lt===null?"null":Ut==="object"&&Array.isArray(Lt)?"array":Ut==="object"&&e(Lt,String,(rn,jn)=>jn.isPrototypeOf(rn))?"string":Ut},a=Lt=>Ut=>s(Ut)===Lt,d=Lt=>Ut=>typeof Ut===Lt,b=a("string"),_=a("object"),_e=a("array"),ot=d("boolean"),st=Lt=>Lt==null,ct=Lt=>!st(Lt),ft=d("function"),mt=d("number"),bt=()=>{},wt=(Lt,Ut)=>rn=>Lt(Ut(rn)),Ct=Lt=>()=>Lt,Rt=(Lt,Ut)=>Lt===Ut;function It(Lt,...Ut){return(...rn)=>{const jn=Ut.concat(rn);return Lt.apply(null,jn)}}const Pt=Lt=>Ut=>!Lt(Ut),Tt=Ct(!1);class Gt{constructor(Ut,rn){this.tag=Ut,this.value=rn}static some(Ut){return new Gt(!0,Ut)}static none(){return Gt.singletonNone}fold(Ut,rn){return this.tag?rn(this.value):Ut()}isSome(){return this.tag}isNone(){return!this.tag}map(Ut){return this.tag?Gt.some(Ut(this.value)):Gt.none()}bind(Ut){return this.tag?Ut(this.value):Gt.none()}exists(Ut){return this.tag&&Ut(this.value)}forall(Ut){return!this.tag||Ut(this.value)}filter(Ut){return!this.tag||Ut(this.value)?this:Gt.none()}getOr(Ut){return this.tag?this.value:Ut}or(Ut){return this.tag?this:Ut}getOrThunk(Ut){return this.tag?this.value:Ut()}orThunk(Ut){return this.tag?this:Ut()}getOrDie(Ut){if(this.tag)return this.value;throw new Error(Ut??"Called getOrDie on None")}static from(Ut){return ct(Ut)?Gt.some(Ut):Gt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ut){this.tag&&Ut(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Gt.singletonNone=new Gt(!1);const Jt=Array.prototype.slice,qt=Array.prototype.indexOf,Nt=Array.prototype.push,Qt=(Lt,Ut)=>qt.call(Lt,Ut),fn=(Lt,Ut)=>Qt(Lt,Ut)>-1,Mn=(Lt,Ut)=>{for(let rn=0,jn=Lt.length;rn<jn;rn++){const lo=Lt[rn];if(Ut(lo,rn))return!0}return!1},ln=(Lt,Ut)=>{const rn=Lt.length,jn=new Array(rn);for(let lo=0;lo<rn;lo++){const ir=Lt[lo];jn[lo]=Ut(ir,lo)}return jn},Wt=(Lt,Ut)=>{for(let rn=0,jn=Lt.length;rn<jn;rn++){const lo=Lt[rn];Ut(lo,rn)}},so=(Lt,Ut)=>{const rn=[];for(let jn=0,lo=Lt.length;jn<lo;jn++){const ir=Lt[jn];Ut(ir,jn)&&rn.push(ir)}return rn},pn=(Lt,Ut)=>{if(Lt.length===0)return[];{let rn=Ut(Lt[0]);const jn=[];let lo=[];for(let ir=0,ks=Lt.length;ir<ks;ir++){const Ys=Lt[ir],Hs=Ut(Ys);Hs!==rn&&(jn.push(lo),lo=[]),rn=Hs,lo.push(Ys)}return lo.length!==0&&jn.push(lo),jn}},hn=(Lt,Ut,rn)=>(Wt(Lt,(jn,lo)=>{rn=Ut(rn,jn,lo)}),rn),Mt=(Lt,Ut,rn)=>{for(let jn=0,lo=Lt.length;jn<lo;jn++){const ir=Lt[jn];if(Ut(ir,jn))return Gt.some(ir);if(rn(ir,jn))break}return Gt.none()},Hn=(Lt,Ut)=>Mt(Lt,Ut,Tt),cn=Lt=>{const Ut=[];for(let rn=0,jn=Lt.length;rn<jn;++rn){if(!_e(Lt[rn]))throw new Error("Arr.flatten item "+rn+" was not an array, input: "+Lt);Nt.apply(Ut,Lt[rn])}return Ut},fo=(Lt,Ut)=>cn(ln(Lt,Ut)),Fn=Lt=>{const Ut=Jt.call(Lt,0);return Ut.reverse(),Ut},Tn=(Lt,Ut)=>Ut>=0&&Ut<Lt.length?Gt.some(Lt[Ut]):Gt.none(),qn=Lt=>Tn(Lt,0),nr=Lt=>Tn(Lt,Lt.length-1),oo=(Lt,Ut)=>{const rn=[],jn=ft(Ut)?lo=>Mn(rn,ir=>Ut(ir,lo)):lo=>fn(rn,lo);for(let lo=0,ir=Lt.length;lo<ir;lo++){const ks=Lt[lo];jn(ks)||rn.push(ks)}return rn},Mo=(Lt,Ut,rn=Rt)=>Lt.exists(jn=>rn(jn,Ut)),Dn=(Lt,Ut,rn=Rt)=>xo(Lt,Ut,rn).getOr(Lt.isNone()&&Ut.isNone()),xo=(Lt,Ut,rn)=>Lt.isSome()&&Ut.isSome()?Gt.some(rn(Lt.getOrDie(),Ut.getOrDie())):Gt.none(),Xt=8,Ur=11,co=1,Vo=3,yo=(Lt,Ut)=>{const jn=(Ut||document).createElement("div");if(jn.innerHTML=Lt,!jn.hasChildNodes()||jn.childNodes.length>1){const lo="HTML does not have a single root node";throw console.error(lo,Lt),new Error(lo)}return Cn(jn.childNodes[0])},ko=(Lt,Ut)=>{const jn=(Ut||document).createElement(Lt);return Cn(jn)},yn=(Lt,Ut)=>{const jn=(Ut||document).createTextNode(Lt);return Cn(jn)},Cn=Lt=>{if(Lt==null)throw new Error("Node cannot be null or undefined");return{dom:Lt}},sn={fromHtml:yo,fromTag:ko,fromText:yn,fromDom:Cn,fromPoint:(Lt,Ut,rn)=>Gt.from(Lt.dom.elementFromPoint(Ut,rn)).map(Cn)},kn=(Lt,Ut)=>{const rn=Lt.dom;if(rn.nodeType!==co)return!1;{const jn=rn;if(jn.matches!==void 0)return jn.matches(Ut);if(jn.msMatchesSelector!==void 0)return jn.msMatchesSelector(Ut);if(jn.webkitMatchesSelector!==void 0)return jn.webkitMatchesSelector(Ut);if(jn.mozMatchesSelector!==void 0)return jn.mozMatchesSelector(Ut);throw new Error("Browser lacks native selectors")}},Ln=(Lt,Ut)=>Lt.dom===Ut.dom,Bn=(Lt,Ut)=>{const rn=Lt.dom,jn=Ut.dom;return rn===jn?!1:rn.contains(jn)},Eo=kn,Wn=typeof window<"u"?window:Function("return this;")(),Rn=(Lt,Ut)=>{let rn=Ut??Wn;for(let jn=0;jn<Lt.length&&rn!==void 0&&rn!==null;++jn)rn=rn[Lt[jn]];return rn},Qn=(Lt,Ut)=>{const rn=Lt.split(".");return Rn(rn,Ut)},vo=(Lt,Ut)=>Qn(Lt,Ut),Gn=(Lt,Ut)=>{const rn=vo(Lt,Ut);if(rn==null)throw new Error(Lt+" not available on this browser");return rn},ro=Object.getPrototypeOf,Co=Lt=>Gn("HTMLElement",Lt),Do=Lt=>{const Ut=Qn("ownerDocument.defaultView",Lt);return _(Lt)&&(Co(Ut).prototype.isPrototypeOf(Lt)||/^HTML\w*Element$/.test(ro(Lt).constructor.name))},Mr=Lt=>Lt.dom.nodeName.toLowerCase(),ar=Lt=>Lt.dom.nodeType,xr=Lt=>Ut=>ar(Ut)===Lt,us=Lt=>ar(Lt)===Xt||Mr(Lt)==="#comment",wr=Lt=>gs(Lt)&&Do(Lt.dom),gs=xr(co),Ts=xr(Vo),Rs=xr(Ur),Cl=Lt=>Ut=>gs(Ut)&&Mr(Ut)===Lt,Yr=Lt=>Gt.from(Lt.dom.parentNode).map(sn.fromDom),Dl=Lt=>Gt.from(Lt.dom.parentElement).map(sn.fromDom),or=Lt=>Gt.from(Lt.dom.nextSibling).map(sn.fromDom),Ds=Lt=>ln(Lt.dom.childNodes,sn.fromDom),hu=(Lt,Ut)=>{const rn=Lt.dom.childNodes;return Gt.from(rn[Ut]).map(sn.fromDom)},au=Lt=>hu(Lt,0),_c=Lt=>hu(Lt,Lt.dom.childNodes.length-1),Su=Lt=>Rs(Lt)&&ct(Lt.dom.host),Zs=Lt=>sn.fromDom(Lt.dom.getRootNode()),Eu=Lt=>{const Ut=Zs(Lt);return Su(Ut)?Gt.some(Ut):Gt.none()},uu=Lt=>sn.fromDom(Lt.dom.host),$a=Lt=>{const Ut=Ts(Lt)?Lt.dom.parentNode:Lt.dom;if(Ut==null||Ut.ownerDocument===null)return!1;const rn=Ut.ownerDocument;return Eu(sn.fromDom(Ut)).fold(()=>rn.body.contains(Ut),wt($a,uu))};var es=(Lt,Ut,rn,jn,lo)=>Lt(rn,jn)?Gt.some(rn):ft(lo)&&lo(rn)?Gt.none():Ut(rn,jn,lo);const yl=(Lt,Ut,rn)=>{let jn=Lt.dom;const lo=ft(rn)?rn:Tt;for(;jn.parentNode;){jn=jn.parentNode;const ir=sn.fromDom(jn);if(Ut(ir))return Gt.some(ir);if(lo(ir))break}return Gt.none()},mo=(Lt,Ut,rn)=>es((lo,ir)=>ir(lo),yl,Lt,Ut,rn),Oo=(Lt,Ut,rn)=>yl(Lt,jn=>kn(jn,Ut),rn),Ar=(Lt,Ut,rn)=>es((lo,ir)=>kn(lo,ir),Oo,Lt,Ut,rn),Br=Lt=>Ar(Lt,"[contenteditable]"),Ws=(Lt,Ut=!1)=>$a(Lt)?Lt.dom.isContentEditable:Br(Lt).fold(Ct(Ut),rn=>_l(rn)==="true"),_l=Lt=>Lt.dom.contentEditable,Wu=(Lt,Ut)=>{Yr(Lt).each(jn=>{jn.dom.insertBefore(Ut.dom,Lt.dom)})},qu=(Lt,Ut)=>{or(Lt).fold(()=>{Yr(Lt).each(lo=>{Vn(lo,Ut)})},jn=>{Wu(jn,Ut)})},Mu=(Lt,Ut)=>{au(Lt).fold(()=>{Vn(Lt,Ut)},jn=>{Lt.dom.insertBefore(Ut.dom,jn.dom)})},Vn=(Lt,Ut)=>{Lt.dom.appendChild(Ut.dom)},$n=(Lt,Ut)=>{Wt(Ut,rn=>{Wu(Lt,rn)})},Po=(Lt,Ut)=>{Wt(Ut,rn=>{Vn(Lt,rn)})},Ho=Lt=>{Lt.dom.textContent="",Wt(Ds(Lt),Ut=>{cs(Ut)})},cs=Lt=>{const Ut=Lt.dom;Ut.parentNode!==null&&Ut.parentNode.removeChild(Ut)};var Es=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),zs=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Pu=tinymce.util.Tools.resolve("tinymce.util.VK");const io=Lt=>ln(Lt,sn.fromDom),Bs=Object.keys,Jn=(Lt,Ut)=>{const rn=Bs(Lt);for(let jn=0,lo=rn.length;jn<lo;jn++){const ir=rn[jn],ks=Lt[ir];Ut(ks,ir)}},to=Lt=>(Ut,rn)=>{Lt[rn]=Ut},rr=(Lt,Ut,rn,jn)=>{Jn(Lt,(lo,ir)=>{(Ut(lo,ir)?rn:jn)(lo,ir)})},ur=(Lt,Ut)=>{const rn={};return rr(Lt,Ut,to(rn),bt),rn},Pr=(Lt,Ut,rn)=>{if(b(rn)||ot(rn)||mt(rn))Lt.setAttribute(Ut,rn+"");else throw console.error("Invalid call to Attribute.set. Key ",Ut,":: Value ",rn,":: Element ",Lt),new Error("Attribute value was not simple")},ns=(Lt,Ut)=>{const rn=Lt.dom;Jn(Ut,(jn,lo)=>{Pr(rn,lo,jn)})},rs=Lt=>hn(Lt.dom.attributes,(Ut,rn)=>(Ut[rn.name]=rn.value,Ut),{}),Wr=(Lt,Ut)=>sn.fromDom(Lt.dom.cloneNode(Ut)),ms=Lt=>Wr(Lt,!0),As=(Lt,Ut)=>{const rn=sn.fromTag(Ut),jn=rs(Lt);return ns(rn,jn),rn},Bl=(Lt,Ut)=>{const rn=As(Lt,Ut);qu(Lt,rn);const jn=Ds(Lt);return Po(rn,jn),cs(Lt),rn};var eu=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),pu=tinymce.util.Tools.resolve("tinymce.util.Tools");const Qp=Lt=>Ut=>ct(Ut)&&Ut.nodeName.toLowerCase()===Lt,cm=Lt=>Ut=>ct(Ut)&&Lt.test(Ut.nodeName),Cs=Lt=>ct(Lt)&&Lt.nodeType===3,Rl=Lt=>ct(Lt)&&Lt.nodeType===1,Ll=cm(/^(OL|UL|DL)$/),Ep=cm(/^(OL|UL)$/),Ap=Qp("ol"),gp=cm(/^(LI|DT|DD)$/),Tu=cm(/^(DT|DD)$/),v1=cm(/^(TH|TD)$/),Km=Qp("br"),Yl=Lt=>{var Ut;return((Ut=Lt.parentNode)===null||Ut===void 0?void 0:Ut.firstChild)===Lt},zp=(Lt,Ut)=>ct(Ut)&&Ut.nodeName in Lt.schema.getTextBlockElements(),Bp=(Lt,Ut)=>ct(Lt)&&Lt.nodeName in Ut,mp=(Lt,Ut)=>ct(Ut)&&Ut.nodeName in Lt.schema.getVoidElements(),ly=(Lt,Ut)=>Km(Ut)?Lt.isBlock(Ut.nextSibling)&&!Km(Ut.previousSibling):!1,um=(Lt,Ut,rn)=>{const jn=Lt.isEmpty(Ut);return rn&&Lt.select("span[data-mce-type=bookmark]",Ut).length>0?!1:jn},_g=(Lt,Ut)=>Lt.isChildOf(Ut,Lt.getRoot()),Ym=Lt=>Ut=>Ut.options.get(Lt),Pm=Lt=>{const Ut=Lt.options.register;Ut("lists_indent_on_tab",{processor:"boolean",default:!0})},by=Ym("lists_indent_on_tab"),vy=Ym("forced_root_block"),q0=Ym("forced_root_block_attrs"),Om=(Lt,Ut,rn={})=>{const jn=Lt.dom,lo=Lt.schema.getBlockElements(),ir=jn.createFragment(),ks=vy(Lt),Ys=q0(Lt);let Hs,fs,np=!1;for(fs=jn.create(ks,{...Ys,...rn.style?{style:rn.style}:{}}),Bp(Ut.firstChild,lo)||ir.appendChild(fs);Hs=Ut.firstChild;){const Op=Hs.nodeName;!np&&(Op!=="SPAN"||Hs.getAttribute("data-mce-type")!=="bookmark")&&(np=!0),Bp(Hs,lo)?(ir.appendChild(Hs),fs=null):(fs||(fs=jn.create(ks,Ys),ir.appendChild(fs)),fs.appendChild(Hs))}return!np&&fs&&fs.appendChild(jn.create("br",{"data-mce-bogus":"1"})),ir},Mp=eu.DOM,cy=(Lt,Ut,rn)=>{const jn=fs=>{const np=fs.parentNode;np&&pu.each(lo,Op=>{np.insertBefore(Op,rn.parentNode)}),Mp.remove(fs)},lo=Mp.select('span[data-mce-type="bookmark"]',Ut),ir=Om(Lt,rn),ks=Mp.createRng();ks.setStartAfter(rn),ks.setEndAfter(Ut);const Ys=ks.extractContents();for(let fs=Ys.firstChild;fs;fs=fs.firstChild)if(fs.nodeName==="LI"&&Lt.dom.isEmpty(fs)){Mp.remove(fs);break}Lt.dom.isEmpty(Ys)||Mp.insertAfter(Ys,Ut),Mp.insertAfter(ir,Ut);const Hs=rn.parentElement;Hs&&um(Lt.dom,Hs)&&jn(Hs),Mp.remove(rn),um(Lt.dom,Ut)&&Mp.remove(Ut)},uy=Cl("dd"),zy=Cl("dt"),R0=(Lt,Ut)=>{uy(Ut)?Bl(Ut,"dt"):zy(Ut)&&Dl(Ut).each(rn=>cy(Lt,rn.dom,Ut.dom))},yp=Lt=>{zy(Lt)&&Bl(Lt,"dd")},Dm=(Lt,Ut,rn)=>{Ut==="Indent"?Wt(rn,yp):Wt(rn,jn=>R0(Lt,jn))},$p=(Lt,Ut)=>{if(Cs(Lt))return{container:Lt,offset:Ut};const rn=Es.getNode(Lt,Ut);return Cs(rn)?{container:rn,offset:Ut>=Lt.childNodes.length?rn.data.length:0}:rn.previousSibling&&Cs(rn.previousSibling)?{container:rn.previousSibling,offset:rn.previousSibling.data.length}:rn.nextSibling&&Cs(rn.nextSibling)?{container:rn.nextSibling,offset:0}:{container:Lt,offset:Ut}},em=Lt=>{const Ut=Lt.cloneRange(),rn=$p(Lt.startContainer,Lt.startOffset);Ut.setStart(rn.container,rn.offset);const jn=$p(Lt.endContainer,Lt.endOffset);return Ut.setEnd(jn.container,jn.offset),Ut},By=["OL","UL","DL"],$y=By.join(","),dn=(Lt,Ut)=>{const rn=Ut||Lt.selection.getStart(!0);return Lt.dom.getParent(rn,$y,Lu(Lt,rn))},zn=(Lt,Ut)=>ct(Lt)&&Ut.length===1&&Ut[0]===Lt,ho=Lt=>so(Lt.querySelectorAll($y),Ll),qo=Lt=>{const Ut=dn(Lt),rn=Lt.selection.getSelectedBlocks();return zn(Ut,rn)?ho(Ut):so(rn,jn=>Ll(jn)&&Ut!==jn)},mr=(Lt,Ut)=>{const rn=pu.map(Ut,jn=>{const lo=Lt.dom.getParent(jn,"li,dd,dt",Lu(Lt,jn));return lo||jn});return oo(rn)},Wo=Lt=>{const Ut=Lt.selection.getSelectedBlocks();return so(mr(Lt,Ut),gp)},Vl=Lt=>so(Wo(Lt),Tu),Xr=(Lt,Ut)=>{const rn=Lt.dom.getParents(Ut,"TD,TH");return rn.length>0?rn[0]:Lt.getBody()},Ls=(Lt,Ut)=>!Ll(Ut)&&!gp(Ut)&&Mn(By,rn=>Lt.isValidChild(Ut.nodeName,rn)),Lu=(Lt,Ut)=>{const rn=Lt.dom.getParents(Ut,Lt.dom.isBlock),jn=ir=>ir.nodeName.toLowerCase()!==vy(Lt);return Hn(rn,ir=>jn(ir)&&Ls(Lt.schema,ir)).getOr(Lt.getBody())},Yt=Lt=>Yr(Lt).exists(Ut=>gp(Ut.dom)&&au(Ut).exists(rn=>!Ll(rn.dom))&&_c(Ut).exists(rn=>!Ll(rn.dom))),_n=(Lt,Ut)=>{const rn=Lt.dom.getParents(Ut,"ol,ul",Lu(Lt,Ut));return nr(rn)},Kn=Lt=>{const Ut=_n(Lt,Lt.selection.getStart()),rn=so(Lt.selection.getSelectedBlocks(),Ep);return Ut.toArray().concat(rn)},Ao=Lt=>{const Ut=Lt.selection.getStart();return Lt.dom.getParents(Ut,"ol,ul",Lu(Lt,Ut))},Jo=Lt=>{const Ut=Kn(Lt),rn=Ao(Lt);return Hn(rn,jn=>Yt(sn.fromDom(jn))).fold(()=>Xs(Lt,Ut),jn=>[jn])},Xs=(Lt,Ut)=>{const rn=ln(Ut,jn=>_n(Lt,jn).getOr(jn));return oo(rn)},Jl=Lt=>/\btox\-/.test(Lt.className),lu=(Lt,Ut)=>Mt(Lt,Ll,v1).exists(rn=>rn.nodeName===Ut&&!Jl(rn)),dr=(Lt,Ut)=>Ut!==null&&!Lt.dom.isEditable(Ut),gu=Lt=>{const Ut=dn(Lt);return dr(Lt,Ut)||!Lt.selection.isEditable()},jp=(Lt,Ut)=>{const rn=Lt.dom.getParent(Ut,"ol,ul,dl");return dr(Lt,rn)||!Lt.selection.isEditable()},Z0=(Lt,Ut)=>{const rn=Lt.selection.getNode();return Ut({parents:Lt.dom.getParents(rn),element:rn}),Lt.on("NodeChange",Ut),()=>Lt.off("NodeChange",Ut)},js=(Lt,Ut)=>{const jn=document.createDocumentFragment();return Wt(Lt,lo=>{jn.appendChild(lo.dom)}),sn.fromDom(jn)},Xm=(Lt,Ut,rn)=>Lt.dispatch("ListMutation",{action:Ut,element:rn}),Tp=(Lt=>Ut=>Ut.replace(Lt,""))(/^\s+|\s+$/g),mu=Lt=>Lt.length>0,K0=Lt=>!mu(Lt),jx=Lt=>Lt.style!==void 0&&ft(Lt.style.getPropertyValue),h_=(Lt,Ut,rn)=>{if(!b(rn))throw console.error("Invalid call to CSS.set. Property ",Ut,":: Value ",rn,":: Element ",Lt),new Error("CSS value must be a string: "+rn);jx(Lt)&&Lt.style.setProperty(Ut,rn)},Zu=(Lt,Ut,rn)=>{const jn=Lt.dom;h_(jn,Ut,rn)},_1=Lt=>Eo(Lt,"OL,UL"),M0=Lt=>Eo(Lt,"LI"),Gu=Lt=>au(Lt).exists(_1),P0=Lt=>_c(Lt).exists(_1),Nm=Lt=>"listAttributes"in Lt,x1=Lt=>"isComment"in Lt,vn=Lt=>"isFragment"in Lt,En=Lt=>Lt.depth>0,To=Lt=>Lt.isSelected,Zo=Lt=>{const Ut=Ds(Lt),rn=P0(Lt)?Ut.slice(0,-1):Ut;return ln(rn,ms)},ys=(Lt,Ut,rn)=>Yr(Lt).filter(gs).map(jn=>({depth:Ut,dirty:!1,isSelected:rn,content:Zo(Lt),itemAttributes:rs(Lt),listAttributes:rs(jn),listType:Mr(jn),isInPreviousLi:!1})),Ml=(Lt,Ut)=>{Vn(Lt.item,Ut.list)},_i=Lt=>{for(let Ut=1;Ut<Lt.length;Ut++)Ml(Lt[Ut-1],Lt[Ut])},vu=(Lt,Ut)=>{xo(nr(Lt),qn(Ut),Ml)},bp=(Lt,Ut)=>{const rn={list:sn.fromTag(Ut,Lt),item:sn.fromTag("li",Lt)};return Vn(rn.list,rn.item),rn},Lm=(Lt,Ut,rn)=>{const jn=[];for(let lo=0;lo<rn;lo++)jn.push(bp(Lt,Nm(Ut)?Ut.listType:Ut.parentListType));return jn},dm=(Lt,Ut)=>{for(let rn=0;rn<Lt.length-1;rn++)Zu(Lt[rn].item,"list-style-type","none");nr(Lt).each(rn=>{Nm(Ut)&&(ns(rn.list,Ut.listAttributes),ns(rn.item,Ut.itemAttributes)),Po(rn.item,Ut.content)})},cp=(Lt,Ut)=>{Mr(Lt.list)!==Ut.listType&&(Lt.list=Bl(Lt.list,Ut.listType)),ns(Lt.list,Ut.listAttributes)},up=(Lt,Ut,rn)=>{const jn=sn.fromTag("li",Lt);return ns(jn,Ut),Po(jn,rn),jn},Pp=(Lt,Ut)=>{Vn(Lt.list,Ut),Lt.item=Ut},fm=(Lt,Ut,rn)=>{const jn=Ut.slice(0,rn.depth);return nr(jn).each(lo=>{if(Nm(rn)){const ir=up(Lt,rn.itemAttributes,rn.content);Pp(lo,ir),cp(lo,rn)}else if(vn(rn))Po(lo.item,rn.content);else{const ir=sn.fromHtml(`<!--${rn.content}-->`);Vn(lo.list,ir)}}),jn},Ku=(Lt,Ut,rn)=>{const jn=Lm(Lt,rn,rn.depth-Ut.length);return _i(jn),dm(jn,rn),vu(Ut,jn),Ut.concat(jn)},dp=(Lt,Ut)=>{let rn=Gt.none();const jn=hn(Ut,(lo,ir,ks)=>x1(ir)?ks===0?(rn=Gt.some(ir),lo):fm(Lt,lo,ir):ir.depth>lo.length?Ku(Lt,lo,ir):fm(Lt,lo,ir),[]);return rn.each(lo=>{const ir=sn.fromHtml(`<!--${lo.content}-->`);qn(jn).each(ks=>{Mu(ks.list,ir)})}),qn(jn).map(lo=>lo.list)},ju=(Lt,Ut)=>{switch(Lt){case"Indent":Ut.depth++;break;case"Outdent":Ut.depth--;break;case"Flatten":Ut.depth=0}Ut.dirty=!0},_y=(Lt,Ut)=>{Nm(Lt)&&Nm(Ut)&&(Lt.listType=Ut.listType,Lt.listAttributes={...Ut.listAttributes})},p_=Lt=>{Lt.listAttributes=ur(Lt.listAttributes,(Ut,rn)=>rn!=="start")},av=(Lt,Ut)=>{const rn=Lt[Ut].depth,jn=ir=>ir.depth===rn&&!ir.dirty,lo=ir=>ir.depth<rn;return Mt(Fn(Lt.slice(0,Ut)),jn,lo).orThunk(()=>Mt(Lt.slice(Ut+1),jn,lo))},w1=Lt=>(Wt(Lt,(Ut,rn)=>{av(Lt,rn).fold(()=>{Ut.dirty&&Nm(Ut)&&p_(Ut)},jn=>_y(Ut,jn))}),Lt),k1=Lt=>{let Ut=Lt;return{get:()=>Ut,set:lo=>{Ut=lo}}},Dv=(Lt,Ut,rn,jn)=>{var lo;if(us(jn))return[{depth:Lt+1,content:(lo=jn.dom.nodeValue)!==null&&lo!==void 0?lo:"",dirty:!1,isSelected:!1,isComment:!0}];Ut.each(Ys=>{Ln(Ys.start,jn)&&rn.set(!0)});const ir=ys(jn,Lt,rn.get());Ut.each(Ys=>{Ln(Ys.end,jn)&&rn.set(!1)});const ks=_c(jn).filter(_1).map(Ys=>O0(Lt,Ut,rn,Ys)).getOr([]);return ir.toArray().concat(ks)},Nv=(Lt,Ut,rn,jn)=>au(jn).filter(_1).fold(()=>Dv(Lt,Ut,rn,jn),lo=>{const ir=hn(Ds(jn),(ks,Ys,Hs)=>{if(Hs===0)return ks;if(M0(Ys))return ks.concat(Dv(Lt,Ut,rn,Ys));{const fs={isFragment:!0,depth:Lt,content:[Ys],isSelected:!1,dirty:!1,parentListType:Mr(lo)};return ks.concat(fs)}},[]);return O0(Lt,Ut,rn,lo).concat(ir)}),O0=(Lt,Ut,rn,jn)=>fo(Ds(jn),lo=>{const ir=_1(lo)?O0:Nv,ks=Lt+1;return ir(ks,Ut,rn,lo)}),Jm=(Lt,Ut)=>{const rn=k1(!1),jn=0;return ln(Lt,lo=>({sourceList:lo,entries:O0(jn,Ut,rn,lo)}))},Hw=(Lt,Ut)=>{const rn=w1(Ut);return ln(rn,jn=>{const lo=x1(jn)?js([sn.fromHtml(`<!--${jn.content}-->`)]):js(jn.content),ir=Nm(jn)?jn.itemAttributes:{};return sn.fromDom(Om(Lt,lo.dom,ir))})},Gy=(Lt,Ut)=>{const rn=w1(Ut);return dp(Lt.contentDocument,rn).toArray()},Hx=(Lt,Ut)=>fo(pn(Ut,En),rn=>qn(rn).exists(En)?Gy(Lt,rn):Hw(Lt,rn)),S1=(Lt,Ut)=>{Wt(so(Lt,To),rn=>ju(Ut,rn))},Ux=Lt=>{const Ut=ln(Wo(Lt),sn.fromDom);return xo(Hn(Ut,Pt(Gu)),Hn(Fn(Ut),Pt(Gu)),(rn,jn)=>({start:rn,end:jn}))},Q_=(Lt,Ut,rn)=>{const jn=Jm(Ut,Ux(Lt));Wt(jn,lo=>{S1(lo.entries,rn);const ir=Hx(Lt,lo.entries);Wt(ir,ks=>{Xm(Lt,rn==="Indent"?"IndentList":"OutdentList",ks.dom)}),$n(lo.sourceList,ir),cs(lo.sourceList)})},E1=(Lt,Ut)=>{const rn=io(Jo(Lt)),jn=io(Vl(Lt));let lo=!1;if(rn.length||jn.length){const ir=Lt.selection.getBookmark();Q_(Lt,rn,Ut),Dm(Lt,Ut,jn),Lt.selection.moveToBookmark(ir),Lt.selection.setRng(em(Lt.selection.getRng())),Lt.nodeChanged(),lo=!0}return lo},ex=(Lt,Ut)=>!gu(Lt)&&E1(Lt,Ut),Vx=Lt=>ex(Lt,"Indent"),Lv=Lt=>ex(Lt,"Outdent"),Uw=Lt=>ex(Lt,"Flatten"),eo="\uFEFF",T1=Lt=>Lt===eo,D0=(Lt,Ut,rn)=>yl(Lt,Ut,rn).isSome(),hC=(Lt,Ut)=>D0(Lt,It(Ln,Ut));var pC=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Fv=eu.DOM,ba=Lt=>{const Ut={},rn=jn=>{let lo=Lt[jn?"startContainer":"endContainer"],ir=Lt[jn?"startOffset":"endOffset"];if(Rl(lo)){const ks=Fv.create("span",{"data-mce-type":"bookmark"});lo.hasChildNodes()?(ir=Math.min(ir,lo.childNodes.length-1),jn?lo.insertBefore(ks,lo.childNodes[ir]):Fv.insertAfter(ks,lo.childNodes[ir])):lo.appendChild(ks),lo=ks,ir=0}Ut[jn?"startContainer":"endContainer"]=lo,Ut[jn?"startOffset":"endOffset"]=ir};return rn(!0),Lt.collapsed||rn(),Ut},Fm=Lt=>{const Ut=jn=>{const lo=Ys=>{var Hs;let fs=(Hs=Ys.parentNode)===null||Hs===void 0?void 0:Hs.firstChild,np=0;for(;fs;){if(fs===Ys)return np;(!Rl(fs)||fs.getAttribute("data-mce-type")!=="bookmark")&&np++,fs=fs.nextSibling}return-1};let ir=Lt[jn?"startContainer":"endContainer"],ks=Lt[jn?"startOffset":"endOffset"];if(ir){if(Rl(ir)&&ir.parentNode){const Ys=ir;ks=lo(ir),ir=ir.parentNode,Fv.remove(Ys),!ir.hasChildNodes()&&Fv.isBlock(ir)&&ir.appendChild(Fv.create("br"))}Lt[jn?"startContainer":"endContainer"]=ir,Lt[jn?"startOffset":"endOffset"]=ks}};Ut(!0),Ut();const rn=Fv.createRng();return rn.setStart(Lt.startContainer,Lt.startOffset),Lt.endContainer&&rn.setEnd(Lt.endContainer,Lt.endOffset),em(rn)},hm=Lt=>{switch(Lt){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},zv=(Lt,Ut,rn)=>{const jn=rn["list-style-type"]?rn["list-style-type"]:null;Lt.setStyle(Ut,"list-style-type",jn)},Wx=(Lt,Ut)=>{pu.each(Ut,(rn,jn)=>{Lt.setAttribute(jn,rn)})},g_=(Lt,Ut,rn)=>{Wx(Ut,rn["list-attributes"]),pu.each(Lt.select("li",Ut),jn=>{Wx(jn,rn["list-item-attributes"])})},zm=(Lt,Ut,rn)=>{zv(Lt,Ut,rn),g_(Lt,Ut,rn)},tx=(Lt,Ut,rn)=>{pu.each(rn,jn=>Lt.setStyle(Ut,jn,""))},lv=(Lt,Ut)=>ct(Ut)&&!Bp(Ut,Lt.schema.getBlockElements()),nx=(Lt,Ut,rn,jn)=>{let lo=Ut[rn?"startContainer":"endContainer"];const ir=Ut[rn?"startOffset":"endOffset"];Rl(lo)&&(lo=lo.childNodes[Math.min(ir,lo.childNodes.length-1)]||lo),!rn&&Km(lo.nextSibling)&&(lo=lo.nextSibling);const ks=Hs=>{for(;!Lt.dom.isBlock(Hs)&&Hs.parentNode&&jn!==Hs;)Hs=Hs.parentNode;return Hs},Ys=(Hs,fs)=>{var np;const Op=new zs(Hs,ks(Hs)),n0=fs?"next":"prev";let Vv;for(;Vv=Op[n0]();)if(!(mp(Lt,Vv)||T1(Vv.textContent)||((np=Vv.textContent)===null||np===void 0?void 0:np.length)===0))return Gt.some(Vv);return Gt.none()};if(rn&&Cs(lo))if(T1(lo.textContent))lo=Ys(lo,!1).getOr(lo);else for(lo.parentNode!==null&&lv(Lt,lo.parentNode)&&(lo=lo.parentNode);lo.previousSibling!==null&&(lv(Lt,lo.previousSibling)||Cs(lo.previousSibling));)lo=lo.previousSibling;if(!rn&&Cs(lo))if(T1(lo.textContent))lo=Ys(lo,!0).getOr(lo);else for(lo.parentNode!==null&&lv(Lt,lo.parentNode)&&(lo=lo.parentNode);lo.nextSibling!==null&&(lv(Lt,lo.nextSibling)||Cs(lo.nextSibling));)lo=lo.nextSibling;for(;lo.parentNode!==jn;){const Hs=lo.parentNode;if(zp(Lt,lo)||/^(TD|TH)$/.test(Hs.nodeName))return lo;lo=Hs}return lo},cv=(Lt,Ut,rn)=>{const jn=[],lo=Lt.dom,ir=nx(Lt,Ut,!0,rn),ks=nx(Lt,Ut,!1,rn);let Ys;const Hs=[];for(let fs=ir;fs&&(Hs.push(fs),fs!==ks);fs=fs.nextSibling);return pu.each(Hs,fs=>{var np;if(zp(Lt,fs)){jn.push(fs),Ys=null;return}if(lo.isBlock(fs)||Km(fs)){Km(fs)&&lo.remove(fs),Ys=null;return}const Op=fs.nextSibling;if(pC.isBookmarkNode(fs)&&(Ll(Op)||zp(Lt,Op)||!Op&&fs.parentNode===rn)){Ys=null;return}Ys||(Ys=lo.create("p"),(np=fs.parentNode)===null||np===void 0||np.insertBefore(Ys,fs),jn.push(Ys)),Ys.appendChild(fs)}),jn},Qm=(Lt,Ut,rn)=>{const jn=Lt.getStyle(Ut,"list-style-type");let lo=rn?rn["list-style-type"]:"";return lo=lo===null?"":lo,jn===lo},gC=(Lt,Ut)=>{const rn=Lt.selection.getStart(!0),jn=nx(Lt,Ut,!0,Lt.getBody());return hC(sn.fromDom(jn),sn.fromDom(Ut.commonAncestorContainer))?Ut.commonAncestorContainer:rn},m_=(Lt,Ut,rn)=>{const jn=Lt.selection.getRng();let lo="LI";const ir=Lu(Lt,gC(Lt,jn)),ks=Lt.dom;if(ks.getContentEditable(Lt.selection.getNode())==="false")return;Ut=Ut.toUpperCase(),Ut==="DL"&&(lo="DT");const Ys=ba(jn),Hs=so(cv(Lt,jn,ir),Lt.dom.isEditable);pu.each(Hs,fs=>{let np;const Op=fs.previousSibling,n0=fs.parentNode;gp(n0)||(Op&&Ll(Op)&&Op.nodeName===Ut&&Qm(ks,Op,rn)?(np=Op,fs=ks.rename(fs,lo),Op.appendChild(fs)):(np=ks.create(Ut),n0.insertBefore(np,fs),np.appendChild(fs),fs=ks.rename(fs,lo)),tx(ks,fs,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),zm(ks,np,rn),y_(Lt.dom,np))}),Lt.selection.setRng(Fm(Ys))},tm=(Lt,Ut)=>Ll(Lt)&&Lt.nodeName===(Ut==null?void 0:Ut.nodeName),y0=(Lt,Ut,rn)=>{const jn=Lt.getStyle(Ut,"list-style-type",!0),lo=Lt.getStyle(rn,"list-style-type",!0);return jn===lo},e0=(Lt,Ut)=>Lt.className===Ut.className,I1=(Lt,Ut,rn)=>tm(Ut,rn)&&y0(Lt,Ut,rn)&&e0(Ut,rn),y_=(Lt,Ut)=>{let rn,jn=Ut.nextSibling;if(I1(Lt,Ut,jn)){const lo=jn;for(;rn=lo.firstChild;)Ut.appendChild(rn);Lt.remove(lo)}if(jn=Ut.previousSibling,I1(Lt,Ut,jn)){const lo=jn;for(;rn=lo.lastChild;)Ut.insertBefore(rn,Ut.firstChild);Lt.remove(lo)}},Vw=(Lt,Ut,rn,jn)=>{if(Ut.nodeName!==rn){const lo=Lt.dom.rename(Ut,rn);zm(Lt.dom,lo,jn),Xm(Lt,hm(rn),lo)}else zm(Lt.dom,Ut,jn),Xm(Lt,hm(rn),Ut)},b_=(Lt,Ut,rn,jn)=>{if(Ut.classList.forEach((lo,ir,ks)=>{lo.startsWith("tox-")&&(ks.remove(lo),ks.length===0&&Ut.removeAttribute("class"))}),Ut.nodeName!==rn){const lo=Lt.dom.rename(Ut,rn);zm(Lt.dom,lo,jn),Xm(Lt,hm(rn),lo)}else zm(Lt.dom,Ut,jn),Xm(Lt,hm(rn),Ut)},xy=(Lt,Ut,rn,jn,lo)=>{const ir=Ll(Ut);if(ir&&Ut.nodeName===jn&&!v_(lo)&&!Jl(Ut))Uw(Lt);else{m_(Lt,jn,lo);const ks=ba(Lt.selection.getRng()),Ys=ir?[Ut,...rn]:rn,Hs=ir&&Jl(Ut)?b_:Vw;pu.each(Ys,fs=>{Hs(Lt,fs,jn,lo)}),Lt.selection.setRng(Fm(ks))}},v_=Lt=>"list-style-type"in Lt,XS=(Lt,Ut,rn,jn)=>{if(Ut!==Lt.getBody())if(Ut)if(Ut.nodeName===rn&&!v_(jn)&&!Jl(Ut))Uw(Lt);else{const lo=ba(Lt.selection.getRng());Jl(Ut)&&Ut.classList.forEach((ks,Ys,Hs)=>{ks.startsWith("tox-")&&(Hs.remove(ks),Hs.length===0&&Ut.removeAttribute("class"))}),zm(Lt.dom,Ut,jn);const ir=Lt.dom.rename(Ut,rn);y_(Lt.dom,ir),Lt.selection.setRng(Fm(lo)),m_(Lt,rn,jn),Xm(Lt,hm(rn),ir)}else m_(Lt,rn,jn),Xm(Lt,hm(rn),Ut)},Ww=(Lt,Ut,rn)=>{const jn=dn(Lt);if(jp(Lt,jn))return;const lo=qo(Lt),ir=_(rn)?rn:{};lo.length>0?xy(Lt,jn,lo,Ut,ir):XS(Lt,jn,Ut,ir)},mC=eu.DOM,qw=(Lt,Ut)=>{const rn=Ut.parentElement;if(rn&&rn.nodeName==="LI"&&rn.firstChild===Ut){const jn=rn.previousSibling;jn&&jn.nodeName==="LI"?(jn.appendChild(Ut),um(Lt,rn)&&mC.remove(rn)):mC.setStyle(rn,"listStyleType","none")}if(Ll(rn)){const jn=rn.previousSibling;jn&&jn.nodeName==="LI"&&jn.appendChild(Ut)}},__=(Lt,Ut)=>{const rn=pu.grep(Lt.select("ol,ul",Ut));pu.each(rn,jn=>{qw(Lt,jn)})},R1=(Lt,Ut,rn,jn)=>{let lo=Ut.startContainer;const ir=Ut.startOffset;if(Cs(lo)&&(rn?ir<lo.data.length:ir>0))return lo;const ks=Lt.schema.getNonEmptyElements();Rl(lo)&&(lo=Es.getNode(lo,ir));const Ys=new zs(lo,jn);rn&&ly(Lt.dom,lo)&&Ys.next();const Hs=rn?Ys.next.bind(Ys):Ys.prev2.bind(Ys);for(;lo=Hs();)if(lo.nodeName==="LI"&&!lo.hasChildNodes()||ks[lo.nodeName]||Cs(lo)&&lo.data.length>0)return lo;return null},ox=(Lt,Ut)=>{const rn=Ut.childNodes;return rn.length===1&&!Ll(rn[0])&&Lt.isBlock(rn[0])},ep=Lt=>Gt.from(Lt).map(sn.fromDom).filter(wr).exists(Ut=>Ws(Ut)&&!fn(["details"],Mr(Ut))),tp=(Lt,Ut)=>{ox(Lt,Ut)&&ep(Ut.firstChild)&&Lt.remove(Ut.firstChild,!0)},Bv=(Lt,Ut,rn)=>{let jn;const lo=ox(Lt,rn)?rn.firstChild:rn;if(tp(Lt,Ut),!um(Lt,Ut,!0))for(;jn=Ut.firstChild;)lo.appendChild(jn)},dy=(Lt,Ut,rn)=>{let jn;const lo=Ut.parentNode;if(!_g(Lt,Ut)||!_g(Lt,rn))return;Ll(rn.lastChild)&&(jn=rn.lastChild),lo===rn.lastChild&&Km(lo.previousSibling)&&Lt.remove(lo.previousSibling);const ir=rn.lastChild;ir&&Km(ir)&&Ut.hasChildNodes()&&Lt.remove(ir),um(Lt,rn,!0)&&Ho(sn.fromDom(rn)),Bv(Lt,Ut,rn),jn&&rn.appendChild(jn);const Ys=Bn(sn.fromDom(rn),sn.fromDom(Ut))?Lt.getParents(Ut,Ll,rn):[];Lt.remove(Ut),Wt(Ys,Hs=>{um(Lt,Hs)&&Hs!==Lt.getRoot()&&Lt.remove(Hs)})},Zw=(Lt,Ut,rn)=>{Ho(sn.fromDom(rn)),dy(Lt.dom,Ut,rn),Lt.selection.setCursorLocation(rn,0)},Hp=(Lt,Ut,rn,jn)=>{const lo=Lt.dom;if(lo.isEmpty(jn))Zw(Lt,rn,jn);else{const ir=ba(Ut);dy(lo,rn,jn),Lt.selection.setRng(Fm(ir))}},ds=(Lt,Ut,rn,jn)=>{const lo=ba(Ut);dy(Lt.dom,rn,jn);const ir=Fm(lo);Lt.selection.setRng(ir)},uv=(Lt,Ut)=>{const rn=Lt.dom,jn=Lt.selection,lo=jn.getStart(),ir=Xr(Lt,lo),ks=rn.getParent(jn.getStart(),"LI",ir);if(ks){const Ys=ks.parentElement;if(Ys===Lt.getBody()&&um(rn,Ys))return!0;const Hs=em(jn.getRng()),fs=rn.getParent(R1(Lt,Hs,Ut,ir),"LI",ir),np=fs&&(Ut?rn.isChildOf(ks,fs):rn.isChildOf(fs,ks));if(fs&&fs!==ks&&!np)return Lt.undoManager.transact(()=>{Ut?Hp(Lt,Hs,fs,ks):Yl(ks)?Lv(Lt):ds(Lt,Hs,ks,fs)}),!0;if(np&&!Ut&&fs!==ks)return Lt.undoManager.transact(()=>{if(Hs.commonAncestorContainer.parentElement){const Op=ba(Hs),n0=Hs.commonAncestorContainer.parentElement;Bv(rn,Hs.commonAncestorContainer.parentElement,fs),n0.remove();const Vv=Fm(Op);Lt.selection.setRng(Vv)}}),!0;if(!fs&&!Ut&&Hs.startOffset===0&&Hs.endOffset===0)return Lt.undoManager.transact(()=>{Uw(Lt)}),!0}return!1},Kw=(Lt,Ut,rn)=>{const jn=Lt.getParent(Ut.parentNode,Lt.isBlock,rn);Lt.remove(Ut),jn&&Lt.isEmpty(jn)&&Lt.remove(jn)},Y0=(Lt,Ut)=>{const rn=Lt.dom,jn=Lt.selection.getStart(),lo=Xr(Lt,jn),ir=rn.getParent(jn,rn.isBlock,lo);if(ir&&rn.isEmpty(ir,void 0,{checkRootAsContent:!0})){const ks=em(Lt.selection.getRng()),Ys=rn.getParent(R1(Lt,ks,Ut,lo),"LI",lo);if(Ys){const Hs=n0=>fn(["td","th","caption"],Mr(n0)),fs=n0=>n0.dom===lo,np=mo(sn.fromDom(Ys),Hs,fs),Op=mo(sn.fromDom(ks.startContainer),Hs,fs);return Dn(np,Op,Ln)?(Lt.undoManager.transact(()=>{const n0=Ys.parentNode;Kw(rn,ir,lo),y_(rn,n0),Lt.selection.select(Ys,!0),Lt.selection.collapse(Ut)}),!0):!1}}return!1},Xl=(Lt,Ut)=>uv(Lt,Ut)||Y0(Lt,Ut),$v=Lt=>{const Ut=Lt.selection.getStart(),rn=Xr(Lt,Ut);return Lt.dom.getParent(Ut,"LI,DT,DD",rn)||Wo(Lt).length>0},rx=Lt=>$v(Lt)?(Lt.undoManager.transact(()=>{let Ut=!0;const rn=()=>Ut=!1;Lt.on("input",rn),Lt.execCommand("Delete"),Lt.off("input",rn),Ut&&Lt.dispatch("input"),__(Lt.dom,Lt.getBody())}),!0):!1,qx=(Lt,Ut)=>{const rn=Lt.selection;return!jp(Lt,rn.getNode())&&(rn.isCollapsed()?Xl(Lt,Ut):rx(Lt))},Yw=Lt=>{Lt.on("ExecCommand",Ut=>{const rn=Ut.command.toLowerCase();(rn==="delete"||rn==="forwarddelete")&&$v(Lt)&&__(Lt.dom,Lt.getBody())}),Lt.on("keydown",Ut=>{Ut.keyCode===Pu.BACKSPACE?qx(Lt,!1)&&Ut.preventDefault():Ut.keyCode===Pu.DELETE&&qx(Lt,!0)&&Ut.preventDefault()})},Js=Lt=>({backspaceDelete:Ut=>{qx(Lt,Ut)}}),wp=(Lt,Ut)=>{const rn=dn(Lt);rn===null||jp(Lt,rn)||Lt.undoManager.transact(()=>{_(Ut.styles)&&Lt.dom.setStyles(rn,Ut.styles),_(Ut.attrs)&&Jn(Ut.attrs,(jn,lo)=>Lt.dom.setAttrib(rn,lo,jn))})},Gv=Lt=>{const Ut=Fn(Tp(Lt).split("")),rn=ln(Ut,(jn,lo)=>{const ir=jn.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,lo)*ir});return hn(rn,(jn,lo)=>jn+lo,0)},jv=Lt=>{if(Lt--,Lt<0)return"";{const Ut=Lt%26,rn=Math.floor(Lt/26),jn=jv(rn),lo=String.fromCharCode(65+Ut);return jn+lo}},N0=Lt=>/^[A-Z]+$/.test(Lt),b0=Lt=>/^[a-z]+$/.test(Lt),X0=Lt=>/^[0-9]+$/.test(Lt),Iu=Lt=>X0(Lt)?2:N0(Lt)?0:b0(Lt)?1:K0(Lt)?3:4,fy=Lt=>{switch(Iu(Lt)){case 2:return Gt.some({listStyleType:Gt.none(),start:Lt});case 0:return Gt.some({listStyleType:Gt.some("upper-alpha"),start:Gv(Lt).toString()});case 1:return Gt.some({listStyleType:Gt.some("lower-alpha"),start:Gv(Lt).toString()});case 3:return Gt.some({listStyleType:Gt.none(),start:""});case 4:return Gt.none()}},M1=Lt=>{const Ut=parseInt(Lt.start,10);return Mo(Lt.listStyleType,"upper-alpha")?jv(Ut):Mo(Lt.listStyleType,"lower-alpha")?jv(Ut).toLowerCase():Lt.start},qp=Lt=>{const Ut=dn(Lt);!Ap(Ut)||jp(Lt,Ut)||Lt.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:M1({start:Lt.dom.getAttrib(Ut,"start","1"),listStyleType:Gt.from(Lt.dom.getStyle(Ut,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:rn=>{const jn=rn.getData();fy(jn.start).each(lo=>{Lt.execCommand("mceListUpdate",!1,{attrs:{start:lo.start==="1"?"":lo.start},styles:{"list-style-type":lo.listStyleType.getOr("")}})}),rn.close()}})},wy=(Lt,Ut)=>()=>{const rn=dn(Lt);return ct(rn)&&rn.nodeName===Ut},fp=Lt=>{Lt.addCommand("mceListProps",()=>{qp(Lt)})},Hv=Lt=>{Lt.on("BeforeExecCommand",Ut=>{const rn=Ut.command.toLowerCase();rn==="indent"?Vx(Lt):rn==="outdent"&&Lv(Lt)}),Lt.addCommand("InsertUnorderedList",(Ut,rn)=>{Ww(Lt,"UL",rn)}),Lt.addCommand("InsertOrderedList",(Ut,rn)=>{Ww(Lt,"OL",rn)}),Lt.addCommand("InsertDefinitionList",(Ut,rn)=>{Ww(Lt,"DL",rn)}),Lt.addCommand("RemoveList",()=>{Uw(Lt)}),fp(Lt),Lt.addCommand("mceListUpdate",(Ut,rn)=>{_(rn)&&wp(Lt,rn)}),Lt.addQueryStateHandler("InsertUnorderedList",wy(Lt,"UL")),Lt.addQueryStateHandler("InsertOrderedList",wy(Lt,"OL")),Lt.addQueryStateHandler("InsertDefinitionList",wy(Lt,"DL"))};var x_=tinymce.util.Tools.resolve("tinymce.html.Node");const _u=Lt=>Lt.type===3,Cy=Lt=>Lt.length===0,Zx=Lt=>{const Ut=(lo,ir)=>{const ks=x_.create("li");Wt(lo,Ys=>ks.append(Ys)),ir?Lt.insert(ks,ir,!0):Lt.append(ks)},rn=(lo,ir)=>_u(ir)?[...lo,ir]:!Cy(lo)&&!_u(ir)?(Ut(lo,ir),[]):lo,jn=hn(Lt.children(),rn,[]);Cy(jn)||Ut(jn)},dv=Lt=>{Lt.on("PreInit",()=>{const{parser:Ut}=Lt;Ut.addNodeFilter("ul,ol",rn=>Wt(rn,Zx))})},Fu=Lt=>{Lt.on("keydown",Ut=>{Ut.keyCode!==Pu.TAB||Pu.metaKeyPressed(Ut)||Lt.undoManager.transact(()=>{(Ut.shiftKey?Lv(Lt):Vx(Lt))&&Ut.preventDefault()})})},Uv=Lt=>{by(Lt)&&Fu(Lt),Yw(Lt)},v0=(Lt,Ut)=>rn=>{const jn=lo=>{rn.setActive(lu(lo.parents,Ut)),rn.setEnabled(!jp(Lt,lo.element)&&Lt.selection.isEditable())};return rn.setEnabled(Lt.selection.isEditable()),Z0(Lt,jn)},w_=Lt=>{const Ut=rn=>()=>Lt.execCommand(rn);Lt.hasPlugin("advlist")||(Lt.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:Ut("InsertOrderedList"),onSetup:v0(Lt,"OL")}),Lt.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:Ut("InsertUnorderedList"),onSetup:v0(Lt,"UL")}))},Sl=(Lt,Ut)=>rn=>Z0(Lt,lo=>rn.setEnabled(lu(lo.parents,Ut)&&!jp(Lt,lo.element))),C_=Lt=>{const Ut={text:"List properties...",icon:"ordered-list",onAction:()=>Lt.execCommand("mceListProps"),onSetup:Sl(Lt,"OL")};Lt.ui.registry.addMenuItem("listprops",Ut),Lt.ui.registry.addContextMenu("lists",{update:rn=>{const jn=dn(Lt,rn);return Ap(jn)?["listprops"]:[]}})};var Kx=()=>{o.add("lists",Lt=>(Pm(Lt),dv(Lt),Lt.hasPlugin("rtc",!0)?fp(Lt):(Uv(Lt),Hv(Lt)),w_(Lt),C_(Lt),Js(Lt)))};Kx()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(Vn,$n,Po)=>{var Ho;return Po(Vn,$n.prototype)?!0:((Ho=Vn.constructor)===null||Ho===void 0?void 0:Ho.name)===$n.name},s=Vn=>{const $n=typeof Vn;return Vn===null?"null":$n==="object"&&Array.isArray(Vn)?"array":$n==="object"&&e(Vn,String,(Po,Ho)=>Ho.isPrototypeOf(Po))?"string":$n},a=Vn=>$n=>s($n)===Vn,d=a("string"),b=a("object"),_=a("array"),_e=Vn=>Vn==null,ot=Vn=>!_e(Vn);class st{constructor($n,Po){this.tag=$n,this.value=Po}static some($n){return new st(!0,$n)}static none(){return st.singletonNone}fold($n,Po){return this.tag?Po(this.value):$n()}isSome(){return this.tag}isNone(){return!this.tag}map($n){return this.tag?st.some($n(this.value)):st.none()}bind($n){return this.tag?$n(this.value):st.none()}exists($n){return this.tag&&$n(this.value)}forall($n){return!this.tag||$n(this.value)}filter($n){return!this.tag||$n(this.value)?this:st.none()}getOr($n){return this.tag?this.value:$n}or($n){return this.tag?this:$n}getOrThunk($n){return this.tag?this.value:$n()}orThunk($n){return this.tag?this:$n()}getOrDie($n){if(this.tag)return this.value;throw new Error($n??"Called getOrDie on None")}static from($n){return ot($n)?st.some($n):st.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each($n){this.tag&&$n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}st.singletonNone=new st(!1);const ct=Array.prototype.push,ft=(Vn,$n)=>{for(let Po=0,Ho=Vn.length;Po<Ho;Po++){const cs=Vn[Po];$n(cs,Po)}},mt=Vn=>{const $n=[];for(let Po=0,Ho=Vn.length;Po<Ho;++Po){if(!_(Vn[Po]))throw new Error("Arr.flatten item "+Po+" was not an array, input: "+Vn);ct.apply($n,Vn[Po])}return $n},bt=Vn=>{let $n=Vn;return{get:()=>$n,set:cs=>{$n=cs}}},wt=Object.keys,Ct=Object.hasOwnProperty,Rt=(Vn,$n)=>{const Po=wt(Vn);for(let Ho=0,cs=Po.length;Ho<cs;Ho++){const Es=Po[Ho],zs=Vn[Es];$n(zs,Es)}},It=(Vn,$n)=>Pt(Vn,$n)?st.from(Vn[$n]):st.none(),Pt=(Vn,$n)=>Ct.call(Vn,$n),Tt=Vn=>$n=>$n.options.get(Vn),Gt=Vn=>{const $n=Vn.options.register;$n("audio_template_callback",{processor:"function"}),$n("video_template_callback",{processor:"function"}),$n("iframe_template_callback",{processor:"function"}),$n("media_live_embeds",{processor:"boolean",default:!0}),$n("media_filter_html",{processor:"boolean",default:!0}),$n("media_url_resolver",{processor:"function"}),$n("media_alt_source",{processor:"boolean",default:!0}),$n("media_poster",{processor:"boolean",default:!0}),$n("media_dimensions",{processor:"boolean",default:!0})},Jt=Tt("audio_template_callback"),qt=Tt("video_template_callback"),Nt=Tt("iframe_template_callback"),Qt=Tt("media_live_embeds"),fn=Tt("media_filter_html"),Mn=Tt("media_url_resolver"),ln=Tt("media_alt_source"),Wt=Tt("media_poster"),so=Tt("media_dimensions");var pn=tinymce.util.Tools.resolve("tinymce.util.Tools"),hn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Mt=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Hn=hn.DOM,cn=Vn=>Vn.replace(/px$/,""),fo=Vn=>{const $n=Vn.attr("style"),Po=$n?Hn.parseStyle($n):{};return{type:"ephox-embed-iri",source:Vn.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:It(Po,"max-width").map(cn).getOr(""),height:It(Po,"max-height").map(cn).getOr("")}},Fn=(Vn,$n)=>{let Po={};const cs=Mt({validate:!1,forced_root_block:!1},$n).parse(Vn);for(let Es=cs;Es;Es=Es.walk())if(Es.type===1){const zs=Es.name;if(Es.attr("data-ephox-embed-iri")){Po=fo(Es);break}else!Po.source&&zs==="param"&&(Po.source=Es.attr("movie")),(zs==="iframe"||zs==="object"||zs==="embed"||zs==="video"||zs==="audio")&&(Po.type||(Po.type=zs),Po=pn.extend(Es.attributes.map,Po)),zs==="source"&&(Po.source?Po.altsource||(Po.altsource=Es.attr("src")):Po.source=Es.attr("src")),zs==="img"&&!Po.poster&&(Po.poster=Es.attr("src"))}return Po.source=Po.source||Po.src||"",Po.altsource=Po.altsource||"",Po.poster=Po.poster||"",Po},Tn=Vn=>{var $n;const Po={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Ho=($n=Vn.toLowerCase().split(".").pop())!==null&&$n!==void 0?$n:"";return It(Po,Ho).getOr("")};var qn=tinymce.util.Tools.resolve("tinymce.html.Node"),nr=tinymce.util.Tools.resolve("tinymce.html.Serializer");const oo=(Vn,$n={})=>Mt({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...$n},Vn),Mo=hn.DOM,Dn=Vn=>/^[0-9.]+$/.test(Vn)?Vn+"px":Vn,xo=(Vn,$n)=>{const Po=$n.attr("style"),Ho=Po?Mo.parseStyle(Po):{};ot(Vn.width)&&(Ho["max-width"]=Dn(Vn.width)),ot(Vn.height)&&(Ho["max-height"]=Dn(Vn.height)),$n.attr("style",Mo.serializeStyle(Ho))},Xt=["source","altsource"],Ur=(Vn,$n,Po,Ho)=>{let cs=0,Es=0;const zs=oo(Ho);zs.addNodeFilter("source",io=>cs=io.length);const Pu=zs.parse(Vn);for(let io=Pu;io;io=io.walk())if(io.type===1){const Bs=io.name;if(io.attr("data-ephox-embed-iri")){xo($n,io);break}else{switch(Bs){case"video":case"object":case"embed":case"img":case"iframe":$n.height!==void 0&&$n.width!==void 0&&(io.attr("width",$n.width),io.attr("height",$n.height));break}if(Po)switch(Bs){case"video":io.attr("poster",$n.poster),io.attr("src",null);for(let to=cs;to<2;to++)if($n[Xt[to]]){const rr=new qn("source",1);rr.attr("src",$n[Xt[to]]),rr.attr("type",$n[Xt[to]+"mime"]||null),io.append(rr)}break;case"iframe":io.attr("src",$n.source);break;case"object":const Jn=io.getAll("img").length>0;if($n.poster&&!Jn){io.attr("src",$n.poster);const to=new qn("img",1);to.attr("src",$n.poster),to.attr("width",$n.width),to.attr("height",$n.height),io.append(to)}break;case"source":if(Es<2&&(io.attr("src",$n[Xt[Es]]),io.attr("type",$n[Xt[Es]+"mime"]||null),!$n[Xt[Es]])){io.remove();continue}Es++;break;case"img":$n.poster||io.remove();break}}}return nr({},Ho).serialize(Pu)},co=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],Vo=Vn=>{const $n=Vn.match(/^(https?:\/\/|www\.)(.+)$/i);return $n&&$n.length>1?$n[1]==="www."?"https://":$n[1]:"https://"},yo=(Vn,$n)=>{const Po=Vo($n),Ho=Vn.regex.exec($n);let cs=Po+Vn.url;if(ot(Ho))for(let Es=0;Es<Ho.length;Es++)cs=cs.replace("$"+Es,()=>Ho[Es]?Ho[Es]:"");return cs.replace(/\?$/,"")},ko=Vn=>{const $n=co.filter(Po=>Po.regex.test(Vn));return $n.length>0?pn.extend({},$n[0],{url:yo($n[0],Vn)}):null},yn=(Vn,$n)=>{if($n)return $n(Vn);{const Po=Vn.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+Vn.source+'" width="'+Vn.width+'" height="'+Vn.height+'"'+Po+"></iframe>"}},Cn=Vn=>{let $n='<object data="'+Vn.source+'" width="'+Vn.width+'" height="'+Vn.height+'" type="application/x-shockwave-flash">';return Vn.poster&&($n+='<img src="'+Vn.poster+'" width="'+Vn.width+'" height="'+Vn.height+'" />'),$n+="</object>",$n},Nn=(Vn,$n)=>$n?$n(Vn):'<audio controls="controls" src="'+Vn.source+'">'+(Vn.altsource?`
<source src="`+Vn.altsource+'"'+(Vn.altsourcemime?' type="'+Vn.altsourcemime+'"':"")+` />
`:"")+"</audio>",sn=(Vn,$n)=>$n?$n(Vn):'<video width="'+Vn.width+'" height="'+Vn.height+'"'+(Vn.poster?' poster="'+Vn.poster+'"':"")+` controls="controls">
<source src="`+Vn.source+'"'+(Vn.sourcemime?' type="'+Vn.sourcemime+'"':"")+` />
`+(Vn.altsource?'<source src="'+Vn.altsource+'"'+(Vn.altsourcemime?' type="'+Vn.altsourcemime+'"':"")+` />
`:"")+"</video>",kn=(Vn,$n)=>{var Po;const Ho=pn.extend({},$n);if(!Ho.source&&(pn.extend(Ho,Fn((Po=Ho.embed)!==null&&Po!==void 0?Po:"",Vn.schema)),!Ho.source))return"";Ho.altsource||(Ho.altsource=""),Ho.poster||(Ho.poster=""),Ho.source=Vn.convertURL(Ho.source,"source"),Ho.altsource=Vn.convertURL(Ho.altsource,"source"),Ho.sourcemime=Tn(Ho.source),Ho.altsourcemime=Tn(Ho.altsource),Ho.poster=Vn.convertURL(Ho.poster,"poster");const cs=ko(Ho.source);if(cs&&(Ho.source=cs.url,Ho.type=cs.type,Ho.allowfullscreen=cs.allowFullscreen,Ho.width=Ho.width||String(cs.w),Ho.height=Ho.height||String(cs.h)),Ho.embed)return Ur(Ho.embed,Ho,!0,Vn.schema);{const Es=Jt(Vn),zs=qt(Vn),Pu=Nt(Vn);return Ho.width=Ho.width||"300",Ho.height=Ho.height||"150",pn.each(Ho,(io,Bs)=>{Ho[Bs]=Vn.dom.encode(""+io)}),Ho.type==="iframe"?yn(Ho,Pu):Ho.sourcemime==="application/x-shockwave-flash"?Cn(Ho):Ho.sourcemime.indexOf("audio")!==-1?Nn(Ho,Es):sn(Ho,zs)}},Ln=Vn=>Vn.hasAttribute("data-mce-object")||Vn.hasAttribute("data-ephox-embed-iri"),Bn=Vn=>{Vn.on("mousedown",$n=>{const Po=Vn.dom.getParent($n.target,".mce-preview-object");Po&&Vn.dom.getAttrib(Po,"data-mce-selected")==="2"&&$n.stopImmediatePropagation()}),Vn.on("click keyup touchend",()=>{const $n=Vn.selection.getNode();$n&&Vn.dom.hasClass($n,"mce-preview-object")&&Vn.dom.getAttrib($n,"data-mce-selected")&&$n.setAttribute("data-mce-selected","2")}),Vn.on("ObjectResized",$n=>{const Po=$n.target;if(Po.getAttribute("data-mce-object")){let Ho=Po.getAttribute("data-mce-html");Ho&&(Ho=unescape(Ho),Po.setAttribute("data-mce-html",escape(Ur(Ho,{width:String($n.width),height:String($n.height)},!1,Vn.schema))))}})},Eo={},Wn=(Vn,$n,Po)=>new Promise((Ho,cs)=>{const Es=zs=>(zs.html&&(Eo[Vn.source]=zs),Ho({url:Vn.source,html:zs.html?zs.html:$n(Vn)}));Eo[Vn.source]?Es(Eo[Vn.source]):Po({url:Vn.source}).then(Es).catch(cs)}),Rn=(Vn,$n)=>Promise.resolve({html:$n(Vn),url:Vn.source}),Qn=Vn=>$n=>kn(Vn,$n),vo=(Vn,$n)=>{const Po=Mn(Vn);return Po?Wn($n,Qn(Vn),Po):Rn($n,Qn(Vn))},Gn=Vn=>Pt(Eo,Vn),ro=(Vn,$n)=>It($n,Vn).bind(Po=>It(Po,"meta")),Co=(Vn,$n,Po)=>Ho=>{const cs=()=>It(Vn,Ho),Es=()=>It($n,Ho),zs=Bs=>It(Bs,"value").bind(Jn=>Jn.length>0?st.some(Jn):st.none()),Pu=()=>cs().bind(Bs=>b(Bs)?zs(Bs).orThunk(Es):Es().orThunk(()=>st.from(Bs))),io=()=>Es().orThunk(()=>cs().bind(Bs=>b(Bs)?zs(Bs):st.from(Bs)));return{[Ho]:(Ho===Po?Pu():io()).getOr("")}},Do=(Vn,$n)=>{const Po={};return It(Vn,"dimensions").each(Ho=>{ft(["width","height"],cs=>{It($n,cs).orThunk(()=>It(Ho,cs)).each(Es=>Po[cs]=Es)})}),Po},Mr=(Vn,$n)=>{const Po=$n&&$n!=="dimensions"?ro($n,Vn).getOr({}):{},Ho=Co(Vn,Po,$n);return{...Ho("source"),...Ho("altsource"),...Ho("poster"),...Ho("embed"),...Do(Vn,Po)}},ar=Vn=>{const $n={...Vn,source:{value:It(Vn,"source").getOr("")},altsource:{value:It(Vn,"altsource").getOr("")},poster:{value:It(Vn,"poster").getOr("")}};return ft(["width","height"],Po=>{It(Vn,Po).each(Ho=>{const cs=$n.dimensions||{};cs[Po]=Ho,$n.dimensions=cs})}),$n},xr=Vn=>$n=>{const Po=$n&&$n.msg?"Media embed handler error: "+$n.msg:"Media embed handler threw unknown error.";Vn.notificationManager.open({type:"error",text:Po})},us=Vn=>{const $n=Vn.selection.getNode(),Po=Ln($n)?Vn.serializer.serialize($n,{selection:!0}):"",Ho=Fn(Po,Vn.schema),Es=(()=>{if(Rs(Ho.source,Ho.type)){const zs=Vn.dom.getRect($n);return{width:zs.w.toString().replace(/px$/,""),height:zs.h.toString().replace(/px$/,"")}}else return{}})();return{embed:Po,...Ho,...Es}},wr=(Vn,$n)=>Po=>{if(d(Po.url)&&Po.url.trim().length>0){const Ho=Po.html,Es={...Fn(Ho,$n.schema),source:Po.url,embed:Ho};Vn.setData(ar(Es))}},gs=(Vn,$n)=>{const Po=Vn.dom.select("*[data-mce-object]");for(let Ho=0;Ho<$n.length;Ho++)for(let cs=Po.length-1;cs>=0;cs--)$n[Ho]===Po[cs]&&Po.splice(cs,1);Vn.selection.select(Po[0])},Ts=(Vn,$n)=>{const Po=Vn.dom.select("*[data-mce-object]");Vn.insertContent($n),gs(Vn,Po),Vn.nodeChanged()},Rs=(Vn,$n)=>ot($n)&&$n==="ephox-embed-iri"&&ot(ko(Vn)),Cl=(Vn,$n)=>((Ho,cs)=>Ho.width!==cs.width||Ho.height!==cs.height)(Vn,$n)&&Rs($n.source,Vn.type),Yr=(Vn,$n,Po)=>{var Ho;$n.embed=Cl(Vn,$n)&&so(Po)?kn(Po,{...$n,embed:""}):Ur((Ho=$n.embed)!==null&&Ho!==void 0?Ho:"",$n,!1,Po.schema),$n.embed&&(Vn.source===$n.source||Gn($n.source))?Ts(Po,$n.embed):vo(Po,$n).then(cs=>{Ts(Po,cs.html)}).catch(xr(Po))},Dl=Vn=>{const $n=us(Vn),Po=bt($n),Ho=ar($n),cs=(Wr,ms)=>{const As=Mr(ms.getData(),"source");Wr.source!==As.source&&(wr(rs,Vn)({url:As.source,html:""}),vo(Vn,As).then(wr(rs,Vn)).catch(xr(Vn)))},Es=Wr=>{var ms;const As=Mr(Wr.getData()),Bl=Fn((ms=As.embed)!==null&&ms!==void 0?ms:"",Vn.schema);Wr.setData(ar(Bl))},zs=(Wr,ms,As)=>{const Bl=Mr(Wr.getData(),ms),eu=Cl(As,Bl)&&so(Vn)?{...Bl,embed:""}:Bl,pu=kn(Vn,eu);Wr.setData(ar({...eu,embed:pu}))},Pu=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],io=so(Vn)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Bs={title:"General",name:"general",items:mt([Pu,io])},to={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},rr=[];ln(Vn)&&rr.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),Wt(Vn)&&rr.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const ur={title:"Advanced",name:"advanced",items:rr},Pr=[Bs,to];rr.length>0&&Pr.push(ur);const ns={type:"tabpanel",tabs:Pr},rs=Vn.windowManager.open({title:"Insert/Edit Media",size:"normal",body:ns,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Wr=>{const ms=Mr(Wr.getData());Yr(Po.get(),ms,Vn),Wr.close()},onChange:(Wr,ms)=>{switch(ms.name){case"source":cs(Po.get(),Wr);break;case"embed":Es(Wr);break;case"dimensions":case"altsource":case"poster":zs(Wr,ms.name,Po.get());break}Po.set(Mr(Wr.getData()))},initialData:Ho})},or=Vn=>({showDialog:()=>{Dl(Vn)}}),Ds=Vn=>{const $n=()=>{Dl(Vn)};Vn.addCommand("mceMedia",$n)},hu=(Vn,$n,Po)=>Vn.length>=$n.length&&Vn.substr(Po,Po+$n.length)===$n,au=(Vn,$n)=>hu(Vn,$n,0);var _c=tinymce.util.Tools.resolve("tinymce.Env");const Su=Vn=>{const $n=Vn.name;return $n==="iframe"||$n==="video"||$n==="audio"},Zs=(Vn,$n,Po,Ho=null)=>{const cs=Vn.attr(Po);return ot(cs)?cs:Pt($n,Po)?null:Ho},Eu=(Vn,$n,Po)=>{const Ho=$n.name==="img"||Vn.name==="video",cs=Ho?"300":null,Es=Vn.name==="audio"?"30":"150",zs=Ho?Es:null;$n.attr({width:Zs(Vn,Po,"width",cs),height:Zs(Vn,Po,"height",zs)})},uu=(Vn,$n,Po,Ho)=>{const cs=oo(Vn.schema).parse(Ho,{context:$n});for(;cs.firstChild;)Po.append(cs.firstChild)},$a=(Vn,$n)=>{const Po=$n.name,Ho=new qn("img",1);return yl(Vn,$n,Ho),Eu($n,Ho,{}),Ho.attr({style:$n.attr("style"),src:_c.transparentSrc,"data-mce-object":Po,class:"mce-object mce-object-"+Po}),Ho},es=(Vn,$n)=>{var Po;const Ho=$n.name,cs=new qn("span",1);cs.attr({contentEditable:"false",style:$n.attr("style"),"data-mce-object":Ho,class:"mce-preview-object mce-object-"+Ho}),yl(Vn,$n,cs);const Es=Vn.dom.parseStyle((Po=$n.attr("style"))!==null&&Po!==void 0?Po:""),zs=new qn(Ho,1);if(Eu($n,zs,Es),zs.attr({src:$n.attr("src"),style:$n.attr("style"),class:$n.attr("class")}),Ho==="iframe")zs.attr({allowfullscreen:$n.attr("allowfullscreen"),frameborder:"0",sandbox:$n.attr("sandbox"),referrerpolicy:$n.attr("referrerpolicy")});else{ft(["controls","crossorigin","currentTime","loop","muted","poster","preload"],Jn=>{zs.attr(Jn,$n.attr(Jn))});const Bs=cs.attr("data-mce-html");ot(Bs)&&uu(Vn,Ho,zs,unescape(Bs))}const Pu=new qn("span",1);return Pu.attr("class","mce-shim"),cs.append(zs),cs.append(Pu),cs},yl=(Vn,$n,Po)=>{var Ho;const cs=(Ho=$n.attributes)!==null&&Ho!==void 0?Ho:[];let Es=cs.length;for(;Es--;){const Bs=cs[Es].name;let Jn=cs[Es].value;Bs!=="width"&&Bs!=="height"&&Bs!=="style"&&!au(Bs,"data-mce-")&&((Bs==="data"||Bs==="src")&&(Jn=Vn.convertURL(Jn,Bs)),Po.attr("data-mce-p-"+Bs,Jn))}const zs=nr({inner:!0},Vn.schema),Pu=new qn("div",1);ft($n.children(),Bs=>Pu.append(Bs));const io=zs.serialize(Pu);io&&(Po.attr("data-mce-html",escape(io)),Po.empty())},mo=Vn=>{const $n=Vn.attr("class");return d($n)&&/\btiny-pageembed\b/.test($n)},Oo=Vn=>{let $n=Vn;for(;$n=$n.parent;)if($n.attr("data-ephox-embed-iri")||mo($n))return!0;return!1},Ar=Vn=>$n=>{let Po=$n.length,Ho;for(;Po--;)Ho=$n[Po],Ho.parent&&(Ho.parent.attr("data-mce-object")||(Su(Ho)&&Qt(Vn)?Oo(Ho)||Ho.replace(es(Vn,Ho)):Oo(Ho)||Ho.replace($a(Vn,Ho))))},Br=(Vn,$n,Po)=>{const Ho=Vn.options.get,cs=Ho("xss_sanitization"),Es=fn(Vn);return oo(Vn.schema,{sanitize:cs,validate:Es}).parse(Po,{context:$n})},Ws=Vn=>{Vn.on("PreInit",()=>{const{schema:$n,serializer:Po,parser:Ho}=Vn,cs=$n.getBoolAttrs();ft("webkitallowfullscreen mozallowfullscreen".split(" "),Es=>{cs[Es]={}}),Rt({embed:["wmode"]},(Es,zs)=>{const Pu=$n.getElementRule(zs);Pu&&ft(Es,io=>{Pu.attributes[io]={},Pu.attributesOrder.push(io)})}),Ho.addNodeFilter("iframe,video,audio,object,embed",Ar(Vn)),Po.addAttributeFilter("data-mce-object",(Es,zs)=>{var Pu;let io=Es.length;for(;io--;){const Bs=Es[io];if(!Bs.parent)continue;const Jn=Bs.attr(zs),to=new qn(Jn,1);if(Jn!=="audio"){const ns=Bs.attr("class");ns&&ns.indexOf("mce-preview-object")!==-1&&Bs.firstChild?to.attr({width:Bs.firstChild.attr("width"),height:Bs.firstChild.attr("height")}):to.attr({width:Bs.attr("width"),height:Bs.attr("height")})}to.attr({style:Bs.attr("style")});const rr=(Pu=Bs.attributes)!==null&&Pu!==void 0?Pu:[];let ur=rr.length;for(;ur--;){const ns=rr[ur].name;ns.indexOf("data-mce-p-")===0&&to.attr(ns.substr(11),rr[ur].value)}const Pr=Bs.attr("data-mce-html");if(Pr){const ns=Br(Vn,Jn,unescape(Pr));ft(ns.children(),rs=>to.append(rs))}Bs.replace(to)}})}),Vn.on("SetContent",()=>{const $n=Vn.dom;ft($n.select("span.mce-preview-object"),Po=>{$n.select("span.mce-shim",Po).length===0&&$n.add(Po,"span",{class:"mce-shim"})})})},_l=Vn=>{Vn.on("ResolveName",$n=>{let Po;$n.target.nodeType===1&&(Po=$n.target.getAttribute("data-mce-object"))&&($n.name=Po)})},Wu=Vn=>$n=>{const Po=()=>{$n.setEnabled(Vn.selection.isEditable())};return Vn.on("NodeChange",Po),Po(),()=>{Vn.off("NodeChange",Po)}},qu=Vn=>{const $n=()=>Vn.execCommand("mceMedia");Vn.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:$n,onSetup:Po=>{const Ho=Vn.selection;Po.setActive(Ln(Ho.getNode()));const cs=Ho.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Po.setActive).unbind,Es=Wu(Vn)(Po);return()=>{cs(),Es()}}}),Vn.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:$n,onSetup:Wu(Vn)})};var Mu=()=>{o.add("media",Vn=>(Gt(Vn),Ds(Vn),qu(Vn),_l(Vn),Ws(Vn),Bn(Vn),or(Vn)))};Mu()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=It=>Pt=>typeof Pt===It,s=e("boolean"),a=e("number"),d=It=>Pt=>Pt.options.get(It),b=It=>{const Pt=It.options.register;Pt("nonbreaking_force_tab",{processor:Tt=>s(Tt)?{value:Tt?3:0,valid:!0}:a(Tt)?{value:Tt,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),Pt("nonbreaking_wrap",{processor:"boolean",default:!0})},_=d("nonbreaking_force_tab"),_e=d("nonbreaking_wrap"),ot=(It,Pt)=>{let Tt="";for(let Gt=0;Gt<Pt;Gt++)Tt+=It;return Tt},st=It=>It.plugins.visualchars?It.plugins.visualchars.isEnabled():!1,ct=(It,Pt)=>{const Tt=()=>st(It)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap",Gt=()=>`<span class="${Tt()}" contenteditable="false">${ot("&nbsp;",Pt)}</span>`,qt=_e(It)||It.plugins.visualchars?Gt():ot("&nbsp;",Pt);It.undoManager.transact(()=>It.insertContent(qt))},ft=It=>{It.addCommand("mceNonBreaking",()=>{ct(It,1)})};var mt=tinymce.util.Tools.resolve("tinymce.util.VK");const bt=It=>{const Pt=_(It);Pt>0&&It.on("keydown",Tt=>{if(Tt.keyCode===mt.TAB&&!Tt.isDefaultPrevented()){if(Tt.shiftKey)return;Tt.preventDefault(),Tt.stopImmediatePropagation(),ct(It,Pt)}})},wt=It=>Pt=>{const Tt=()=>{Pt.setEnabled(It.selection.isEditable())};return It.on("NodeChange",Tt),Tt(),()=>{It.off("NodeChange",Tt)}},Ct=It=>{const Pt=()=>It.execCommand("mceNonBreaking");It.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:Pt,onSetup:wt(It)}),It.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:Pt,onSetup:wt(It)})};var Rt=()=>{o.add("nonbreaking",It=>{b(It),ft(It),Ct(It),bt(It)})};Rt()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.Env");const s=wt=>Ct=>Ct.options.get(wt),a=wt=>{const Ct=wt.options.register;Ct("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),Ct("pagebreak_split_block",{processor:"boolean",default:!1})},d=s("pagebreak_separator"),b=s("pagebreak_split_block"),_="mce-pagebreak",_e=wt=>{const Ct=`<img src="${e.transparentSrc}" class="${_}" data-mce-resize="false" data-mce-placeholder />`;return wt?`<p>${Ct}</p>`:Ct},ot=wt=>{const Ct=d(wt),Rt=()=>b(wt),It=new RegExp(Ct.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,Pt=>"\\"+Pt),"gi");wt.on("BeforeSetContent",Pt=>{Pt.content=Pt.content.replace(It,_e(Rt()))}),wt.on("PreInit",()=>{wt.serializer.addNodeFilter("img",Pt=>{let Tt=Pt.length,Gt,Jt;for(;Tt--;)if(Gt=Pt[Tt],Jt=Gt.attr("class"),Jt&&Jt.indexOf(_)!==-1){const qt=Gt.parent;if(qt&&wt.schema.getBlockElements()[qt.name]&&Rt()){qt.type=3,qt.value=Ct,qt.raw=!0,Gt.remove();continue}Gt.type=3,Gt.value=Ct,Gt.raw=!0}})})},st=wt=>{wt.addCommand("mcePageBreak",()=>{wt.insertContent(_e(b(wt)))})},ct=wt=>{wt.on("ResolveName",Ct=>{Ct.target.nodeName==="IMG"&&wt.dom.hasClass(Ct.target,_)&&(Ct.name="pagebreak")})},ft=wt=>Ct=>{const Rt=()=>{Ct.setEnabled(wt.selection.isEditable())};return wt.on("NodeChange",Rt),Rt(),()=>{wt.off("NodeChange",Rt)}},mt=wt=>{const Ct=()=>wt.execCommand("mcePageBreak");wt.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:Ct,onSetup:ft(wt)}),wt.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:Ct,onSetup:ft(wt)})};var bt=()=>{o.add("pagebreak",wt=>{a(wt),st(wt),mt(wt),ot(wt),ct(wt)})};bt()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.Env"),s=tinymce.util.Tools.resolve("tinymce.util.Tools");const a=bt=>wt=>wt.options.get(bt),d=a("content_style"),b=a("content_css_cors"),_=a("body_class"),_e=a("body_id"),ot=bt=>{var wt;let Ct="";const Rt=bt.dom.encode,It=(wt=d(bt))!==null&&wt!==void 0?wt:"";Ct+='<base href="'+Rt(bt.documentBaseURI.getURI())+'">';const Pt=b(bt)?' crossorigin="anonymous"':"";s.each(bt.contentCSS,Mn=>{Ct+='<link type="text/css" rel="stylesheet" href="'+Rt(bt.documentBaseURI.toAbsolute(Mn))+'"'+Pt+">"}),It&&(Ct+='<style type="text/css">'+It+"</style>");const Tt=_e(bt),Gt=_(bt),qt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(e.os.isMacOS()||e.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",Nt=bt.getBody().dir,Qt=Nt?' dir="'+Rt(Nt)+'"':"";return"<!DOCTYPE html><html><head>"+Ct+'</head><body id="'+Rt(Tt)+'" class="mce-content-body '+Rt(Gt)+'"'+Qt+">"+bt.getContent()+qt+"</body></html>"},st=bt=>{const wt=ot(bt);bt.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:wt}}).focus("close")},ct=bt=>{bt.addCommand("mcePreview",()=>{st(bt)})},ft=bt=>{const wt=()=>bt.execCommand("mcePreview");bt.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:wt,context:"any"}),bt.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:wt,context:"any"})};var mt=()=>{o.add("preview",bt=>{ct(bt),ft(bt)})};mt()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(yo,ko,yn)=>{var Cn;return yn(yo,ko.prototype)?!0:((Cn=yo.constructor)===null||Cn===void 0?void 0:Cn.name)===ko.name},s=yo=>{const ko=typeof yo;return yo===null?"null":ko==="object"&&Array.isArray(yo)?"array":ko==="object"&&e(yo,String,(yn,Cn)=>Cn.isPrototypeOf(yn))?"string":ko},a=yo=>ko=>s(ko)===yo,d=yo=>ko=>typeof ko===yo,b=a("string"),_=d("boolean"),_e=yo=>yo==null,ot=yo=>!_e(yo),st=d("function"),ct=yo=>ko=>ko.options.get(yo),ft=yo=>{const ko=yo.options.register,yn=kn=>Ln=>{const Bn=_(Ln)||b(Ln);return Bn?_(Ln)?{value:Ln?kn:"",valid:Bn}:{value:Ln.trim(),valid:Bn}:{valid:!1,message:"Must be a boolean or string."}},Cn="bold italic | quicklink h2 h3 blockquote";ko("quickbars_selection_toolbar",{processor:yn(Cn),default:Cn});const Nn="quickimage quicktable";ko("quickbars_insert_toolbar",{processor:yn(Nn),default:Nn});const sn="alignleft aligncenter alignright";ko("quickbars_image_toolbar",{processor:yn(sn),default:sn})},mt=ct("quickbars_selection_toolbar"),bt=ct("quickbars_insert_toolbar"),wt=ct("quickbars_image_toolbar"),Ct=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Rt=0;const It=yo=>{const yn=new Date().getTime(),Cn=Math.floor(Ct()*1e9);return Rt++,yo+"_"+Cn+Rt+String(yn)},Pt=(yo,ko,yn)=>{yo.execCommand("mceInsertTable",!1,{rows:yn,columns:ko})},Tt=(yo,ko,yn)=>{const Cn=yo.editorUpload.blobCache,Nn=Cn.create(It("mceu"),yn,ko);Cn.add(Nn),yo.insertContent(yo.dom.createHTML("img",{src:Nn.blobUri()}))},Gt=yo=>new Promise(ko=>{const yn=new FileReader;yn.onloadend=()=>{ko(yn.result.split(",")[1])},yn.readAsDataURL(yo)});var Jt=tinymce.util.Tools.resolve("tinymce.util.Delay");const qt=yo=>new Promise(ko=>{let yn=!1;const Cn=document.createElement("input");Cn.type="file",Cn.accept="image/*",Cn.style.position="fixed",Cn.style.left="0",Cn.style.top="0",Cn.style.opacity="0.001",document.body.appendChild(Cn);const Nn=Ln=>{var Bn;yn||((Bn=Cn.parentNode)===null||Bn===void 0||Bn.removeChild(Cn),yn=!0,ko(Ln))},sn=Ln=>{Nn(Array.prototype.slice.call(Ln.target.files))};Cn.addEventListener("input",sn),Cn.addEventListener("change",sn);const kn=Ln=>{const Bn=()=>{Nn([])};yn||(Ln.type==="focusin"?Jt.setEditorTimeout(yo,Bn,1e3):Bn()),yo.off("focusin remove",kn)};yo.on("focusin remove",kn),Cn.click()}),Nt=yo=>{yo.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{qt(yo).then(ko=>{if(ko.length>0){const yn=ko[0];Gt(yn).then(Cn=>{Tt(yo,Cn,yn)})}})}}),yo.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{Pt(yo,2,2)}})},fn=(yo=>()=>yo)(!1);class Mn{constructor(ko,yn){this.tag=ko,this.value=yn}static some(ko){return new Mn(!0,ko)}static none(){return Mn.singletonNone}fold(ko,yn){return this.tag?yn(this.value):ko()}isSome(){return this.tag}isNone(){return!this.tag}map(ko){return this.tag?Mn.some(ko(this.value)):Mn.none()}bind(ko){return this.tag?ko(this.value):Mn.none()}exists(ko){return this.tag&&ko(this.value)}forall(ko){return!this.tag||ko(this.value)}filter(ko){return!this.tag||ko(this.value)?this:Mn.none()}getOr(ko){return this.tag?this.value:ko}or(ko){return this.tag?this:ko}getOrThunk(ko){return this.tag?this.value:ko()}orThunk(ko){return this.tag?this:ko()}getOrDie(ko){if(this.tag)return this.value;throw new Error(ko??"Called getOrDie on None")}static from(ko){return ot(ko)?Mn.some(ko):Mn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ko){this.tag&&ko(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Mn.singletonNone=new Mn(!1),typeof window<"u"||Function("return this;")();const ln=1,Wt=yo=>yo.dom.nodeName.toLowerCase(),so=(yo,ko)=>{const yn=yo.dom;return yn&&yn.hasAttribute?yn.hasAttribute(ko):!1};var pn=(yo,ko,yn,Cn,Nn)=>yo(yn,Cn)?Mn.some(yn):st(Nn)&&Nn(yn)?Mn.none():ko(yn,Cn,Nn);const hn=(yo,ko)=>{const Cn=(ko||document).createElement("div");if(Cn.innerHTML=yo,!Cn.hasChildNodes()||Cn.childNodes.length>1){const Nn="HTML does not have a single root node";throw console.error(Nn,yo),new Error(Nn)}return cn(Cn.childNodes[0])},Mt=(yo,ko)=>{const Cn=(ko||document).createElement(yo);return cn(Cn)},Hn=(yo,ko)=>{const Cn=(ko||document).createTextNode(yo);return cn(Cn)},cn=yo=>{if(yo==null)throw new Error("Node cannot be null or undefined");return{dom:yo}},Fn={fromHtml:hn,fromTag:Mt,fromText:Hn,fromDom:cn,fromPoint:(yo,ko,yn)=>Mn.from(yo.dom.elementFromPoint(ko,yn)).map(cn)},Tn=(yo,ko)=>{const yn=yo.dom;if(yn.nodeType!==ln)return!1;{const Cn=yn;if(Cn.matches!==void 0)return Cn.matches(ko);if(Cn.msMatchesSelector!==void 0)return Cn.msMatchesSelector(ko);if(Cn.webkitMatchesSelector!==void 0)return Cn.webkitMatchesSelector(ko);if(Cn.mozMatchesSelector!==void 0)return Cn.mozMatchesSelector(ko);throw new Error("Browser lacks native selectors")}},qn=(yo,ko,yn)=>{let Cn=yo.dom;const Nn=st(yn)?yn:fn;for(;Cn.parentNode;){Cn=Cn.parentNode;const sn=Fn.fromDom(Cn);if(ko(sn))return Mn.some(sn);if(Nn(sn))break}return Mn.none()},nr=(yo,ko,yn)=>pn((Nn,sn)=>sn(Nn),qn,yo,ko,yn),oo=(yo,ko,yn)=>nr(yo,ko,yn).isSome(),Mo=(yo,ko,yn)=>qn(yo,Cn=>Tn(Cn,ko),yn),Dn=(yo,ko,yn)=>pn((Nn,sn)=>Tn(Nn,sn),Mo,yo,ko,yn),xo=yo=>{const ko=bt(yo);ko.length>0&&yo.ui.registry.addContextToolbar("quickblock",{predicate:yn=>{const Cn=Fn.fromDom(yn),Nn=yo.schema.getTextBlockElements(),sn=kn=>kn.dom===yo.getBody();return!so(Cn,"data-mce-bogus")&&Dn(Cn,'table,[data-mce-bogus="all"]',sn).fold(()=>oo(Cn,kn=>Wt(kn)in Nn&&yo.dom.isEmpty(kn.dom),sn),fn)},items:ko,position:"line",scope:"editor"})},Xt=yo=>yo.dom.classList!==void 0,Ur=(yo,ko)=>Xt(yo)&&yo.dom.classList.contains(ko),co=yo=>{const ko=kn=>yo.dom.isEditable(kn),yn=kn=>ko(kn.parentElement),Cn=kn=>{const Ln=kn.nodeName==="FIGURE"&&/image/i.test(kn.className),Bn=kn.nodeName==="IMG"||Ln,Eo=Ur(Fn.fromDom(kn),"mce-pagebreak");return Bn&&yn(kn)&&!Eo},Nn=wt(yo);Nn.length>0&&yo.ui.registry.addContextToolbar("imageselection",{predicate:Cn,items:Nn,position:"node"});const sn=mt(yo);sn.length>0&&yo.ui.registry.addContextToolbar("textselection",{predicate:kn=>!Cn(kn)&&!yo.selection.isCollapsed()&&ko(kn),items:sn,position:"selection",scope:"editor"})};var Vo=()=>{o.add("quickbars",yo=>{ft(yo),Nt(yo),xo(yo),co(yo)})};Vo()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=(It=>Pt=>typeof Pt===It)("function");var a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),d=tinymce.util.Tools.resolve("tinymce.util.Tools");const b=It=>Pt=>Pt.options.get(It),_=It=>{const Pt=It.options.register;Pt("save_enablewhendirty",{processor:"boolean",default:!0}),Pt("save_onsavecallback",{processor:"function"}),Pt("save_oncancelcallback",{processor:"function"})},_e=b("save_enablewhendirty"),ot=b("save_onsavecallback"),st=b("save_oncancelcallback"),ct=(It,Pt)=>{It.notificationManager.open({text:Pt,type:"error"})},ft=It=>{const Pt=a.DOM.getParent(It.id,"form");if(_e(It)&&!It.isDirty())return;It.save();const Tt=ot(It);if(s(Tt)){Tt.call(It,It),It.nodeChanged();return}Pt?(It.setDirty(!1),(!Pt.onsubmit||Pt.onsubmit())&&(typeof Pt.submit=="function"?Pt.submit():ct(It,"Error: Form submit field collision.")),It.nodeChanged()):ct(It,"Error: No form element found.")},mt=It=>{const Pt=d.trim(It.startContent),Tt=st(It);if(s(Tt)){Tt.call(It,It);return}It.resetContent(Pt)},bt=It=>{It.addCommand("mceSave",()=>{ft(It)}),It.addCommand("mceCancel",()=>{mt(It)})},wt=It=>Pt=>{const Tt=()=>{Pt.setEnabled(!_e(It)||It.isDirty())};return Tt(),It.on("NodeChange dirty",Tt),()=>It.off("NodeChange dirty",Tt)},Ct=It=>{It.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>It.execCommand("mceSave"),onSetup:wt(It),shortcut:"Meta+S"}),It.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>It.execCommand("mceCancel"),onSetup:wt(It)}),It.addShortcut("Meta+S","","mceSave")};var Rt=()=>{o.add("save",It=>{_(It),Ct(It),bt(It)})};Rt()})();(function(){const o=Jn=>{let to=Jn;return{get:()=>to,set:Pr=>{to=Pr}}};var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=(Jn,to,rr)=>{var ur;return rr(Jn,to.prototype)?!0:((ur=Jn.constructor)===null||ur===void 0?void 0:ur.name)===to.name},a=Jn=>{const to=typeof Jn;return Jn===null?"null":to==="object"&&Array.isArray(Jn)?"array":to==="object"&&s(Jn,String,(rr,ur)=>ur.isPrototypeOf(rr))?"string":to},d=Jn=>to=>a(to)===Jn,b=Jn=>to=>typeof to===Jn,_=d("string"),_e=d("array"),ot=b("boolean"),st=Jn=>Jn==null,ct=Jn=>!st(Jn),ft=b("number"),mt=()=>{},bt=Jn=>()=>Jn,wt=bt(!0),Rt=bt("[~|!-*+-\\/:;?@\\[-`{};----------------------------------------------]");class It{constructor(to,rr){this.tag=to,this.value=rr}static some(to){return new It(!0,to)}static none(){return It.singletonNone}fold(to,rr){return this.tag?rr(this.value):to()}isSome(){return this.tag}isNone(){return!this.tag}map(to){return this.tag?It.some(to(this.value)):It.none()}bind(to){return this.tag?to(this.value):It.none()}exists(to){return this.tag&&to(this.value)}forall(to){return!this.tag||to(this.value)}filter(to){return!this.tag||to(this.value)?this:It.none()}getOr(to){return this.tag?this.value:to}or(to){return this.tag?this:to}getOrThunk(to){return this.tag?this.value:to()}orThunk(to){return this.tag?this:to()}getOrDie(to){if(this.tag)return this.value;throw new Error(to??"Called getOrDie on None")}static from(to){return ct(to)?It.some(to):It.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(to){this.tag&&to(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}It.singletonNone=new It(!1);const Pt=Rt;var Tt=tinymce.util.Tools.resolve("tinymce.Env"),Gt=tinymce.util.Tools.resolve("tinymce.util.Tools");const Jt=Array.prototype.slice,qt=Array.prototype.push,Nt=(Jn,to)=>{const rr=Jn.length,ur=new Array(rr);for(let Pr=0;Pr<rr;Pr++){const ns=Jn[Pr];ur[Pr]=to(ns,Pr)}return ur},Qt=(Jn,to)=>{for(let rr=0,ur=Jn.length;rr<ur;rr++){const Pr=Jn[rr];to(Pr,rr)}},fn=(Jn,to)=>{for(let rr=Jn.length-1;rr>=0;rr--){const ur=Jn[rr];to(ur,rr)}},Mn=(Jn,to)=>{if(Jn.length===0)return[];{let rr=to(Jn[0]);const ur=[];let Pr=[];for(let ns=0,rs=Jn.length;ns<rs;ns++){const Wr=Jn[ns],ms=to(Wr);ms!==rr&&(ur.push(Pr),Pr=[]),rr=ms,Pr.push(Wr)}return Pr.length!==0&&ur.push(Pr),ur}},ln=(Jn,to,rr)=>(Qt(Jn,(ur,Pr)=>{rr=to(rr,ur,Pr)}),rr),Wt=Jn=>{const to=[];for(let rr=0,ur=Jn.length;rr<ur;++rr){if(!_e(Jn[rr]))throw new Error("Arr.flatten item "+rr+" was not an array, input: "+Jn);qt.apply(to,Jn[rr])}return to},so=(Jn,to)=>Wt(Nt(Jn,to)),pn=(Jn,to)=>{const rr=Jt.call(Jn,0);return rr.sort(to),rr},hn=Object.hasOwnProperty,Mt=(Jn,to)=>hn.call(Jn,to);typeof window<"u"||Function("return this;")();const Hn=9,cn=11,fo=1,Fn=3,Tn=Jn=>Jn.dom.nodeType,nr=(Jn=>to=>Tn(to)===Jn)(Fn),oo=(Jn,to,rr)=>{if(_(rr)||ot(rr)||ft(rr))Jn.setAttribute(to,rr+"");else throw console.error("Invalid call to Attribute.set. Key ",to,":: Value ",rr,":: Element ",Jn),new Error("Attribute value was not simple")},Mo=(Jn,to,rr)=>{oo(Jn.dom,to,rr)},Dn=(Jn,to)=>{const ur=(to||document).createElement("div");if(ur.innerHTML=Jn,!ur.hasChildNodes()||ur.childNodes.length>1){const Pr="HTML does not have a single root node";throw console.error(Pr,Jn),new Error(Pr)}return Ur(ur.childNodes[0])},xo=(Jn,to)=>{const ur=(to||document).createElement(Jn);return Ur(ur)},Xt=(Jn,to)=>{const ur=(to||document).createTextNode(Jn);return Ur(ur)},Ur=Jn=>{if(Jn==null)throw new Error("Node cannot be null or undefined");return{dom:Jn}},Vo={fromHtml:Dn,fromTag:xo,fromText:Xt,fromDom:Ur,fromPoint:(Jn,to,rr)=>It.from(Jn.dom.elementFromPoint(to,rr)).map(Ur)},yo=Jn=>Jn.nodeType!==fo&&Jn.nodeType!==Hn&&Jn.nodeType!==cn||Jn.childElementCount===0,ko=(Jn,to)=>{const rr=to===void 0?document:to.dom;return yo(rr)?[]:Nt(rr.querySelectorAll(Jn),Vo.fromDom)},yn=Jn=>It.from(Jn.dom.parentNode).map(Vo.fromDom),Cn=Jn=>Nt(Jn.dom.childNodes,Vo.fromDom),Nn=(Jn,to)=>({element:Jn,offset:to}),sn=(Jn,to)=>{const rr=Cn(Jn);return rr.length>0&&to<rr.length?Nn(rr[to],0):Nn(Jn,to)},kn=(Jn,to)=>{yn(Jn).each(ur=>{ur.dom.insertBefore(to.dom,Jn.dom)})},Ln=(Jn,to)=>{Jn.dom.appendChild(to.dom)},Bn=(Jn,to)=>{kn(Jn,to),Ln(to,Jn)},Wn=((Jn,to)=>{const rr=ns=>{if(!Jn(ns))throw new Error("Can only get "+to+" value of a "+to+" node");return ur(ns).getOr("")},ur=ns=>Jn(ns)?It.from(ns.dom.nodeValue):It.none();return{get:rr,getOption:ur,set:(ns,rs)=>{if(!Jn(ns))throw new Error("Can only set raw "+to+" value of a "+to+" node");ns.dom.nodeValue=rs}}})(nr,"text"),Rn=Jn=>Wn.get(Jn),Qn=(Jn,to,rr)=>(Jn.compareDocumentPosition(to)&rr)!==0,vo=(Jn,to)=>Qn(Jn,to,Node.DOCUMENT_POSITION_PRECEDING),Gn=(Jn,to)=>ko(to,Jn);var ro=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Co=(Jn,to)=>Jn.isBlock(to)||Mt(Jn.schema.getVoidElements(),to.nodeName),Do=(Jn,to)=>!Jn.isEditable(to),Mr=(Jn,to)=>Jn.getContentEditable(to)==="true"&&to.parentNode&&!Jn.isEditable(to.parentNode),ar=(Jn,to)=>!Jn.isBlock(to)&&Mt(Jn.schema.getWhitespaceElements(),to.nodeName),xr=(Jn,to)=>Co(Jn,to)||Do(Jn,to)||ar(Jn,to)||Mr(Jn,to),us=Jn=>Jn.nodeType===3,wr=()=>({sOffset:0,fOffset:0,elements:[]}),gs=(Jn,to)=>sn(Vo.fromDom(Jn),to),Ts=(Jn,to,rr,ur,Pr,ns=!0)=>{let rs=ns?to(!1):rr;for(;rs;){const Wr=Do(Jn,rs);if(Wr||ar(Jn,rs)){if(Wr?ur.cef(rs):ur.boundary(rs))break;rs=to(!0);continue}else if(Co(Jn,rs)){if(ur.boundary(rs))break}else us(rs)&&ur.text(rs);if(rs===Pr)break;rs=to(!1)}},Rs=(Jn,to,rr,ur,Pr)=>{var ns;if(xr(Jn,rr))return;const rs=(ns=Jn.getParent(ur,Jn.isBlock))!==null&&ns!==void 0?ns:Jn.getRoot(),Wr=new ro(rr,rs),ms=Pr?Wr.next.bind(Wr):Wr.prev.bind(Wr);Ts(Jn,ms,rr,{boundary:wt,cef:wt,text:As=>{Pr?to.fOffset+=As.length:to.sOffset+=As.length,to.elements.push(Vo.fromDom(As))}})},Cl=(Jn,to,rr,ur,Pr,ns=!0)=>{const rs=new ro(rr,to),Wr=[];let ms=wr();Rs(Jn,ms,rr,to,!1);const As=()=>(ms.elements.length>0&&(Wr.push(ms),ms=wr()),!1);return Ts(Jn,rs.next.bind(rs),rr,{boundary:As,cef:Bl=>(As(),Pr&&Wr.push(...Pr.cef(Bl)),!1),text:Bl=>{ms.elements.push(Vo.fromDom(Bl)),Pr&&Pr.text(Bl,ms)}},ur,ns),ur&&Rs(Jn,ms,ur,to,!0),As(),Wr},Yr=(Jn,to)=>{const rr=gs(to.startContainer,to.startOffset),ur=rr.element.dom,Pr=gs(to.endContainer,to.endOffset),ns=Pr.element.dom;return Cl(Jn,to.commonAncestorContainer,ur,ns,{text:(rs,Wr)=>{rs===ns?Wr.fOffset+=rs.length-Pr.offset:rs===ur&&(Wr.sOffset+=rr.offset)},cef:rs=>{const Wr=so(Gn(Vo.fromDom(rs),"*[contenteditable=true]"),ms=>{const As=ms.dom;return Cl(Jn,As,As)});return pn(Wr,(ms,As)=>vo(ms.elements[0].dom,As.elements[0].dom)?1:-1)}},!1)},Dl=(Jn,to)=>to.collapsed?[]:Yr(Jn,to),or=(Jn,to)=>{const rr=Jn.createRng();return rr.selectNode(to),Dl(Jn,rr)},Ds=(Jn,to)=>so(to,rr=>or(Jn,rr)),hu=(Jn,to,rr=0,ur=Jn.length)=>{const Pr=to.regex;Pr.lastIndex=rr;const ns=[];let rs;for(;rs=Pr.exec(Jn);){const Wr=rs[to.matchIndex],ms=rs.index+rs[0].indexOf(Wr),As=ms+Wr.length;if(As>ur)break;ns.push({start:ms,finish:As}),Pr.lastIndex=As}return ns},au=(Jn,to)=>{const rr=ln(Jn,(ur,Pr)=>{const ns=Rn(Pr),rs=ur.last,Wr=rs+ns.length,ms=so(to,(As,Bl)=>As.start<Wr&&As.finish>rs?[{element:Pr,start:Math.max(rs,As.start)-rs,finish:Math.min(Wr,As.finish)-rs,matchId:Bl}]:[]);return{results:ur.results.concat(ms),last:Wr}},{results:[],last:0}).results;return Mn(rr,ur=>ur.matchId)},_c=(Jn,to)=>so(to,rr=>{const ur=rr.elements,Pr=Nt(ur,Rn).join(""),ns=hu(Pr,Jn,rr.sOffset,Pr.length-rr.fOffset);return au(ur,ns)}),Su=(Jn,to)=>{fn(Jn,(rr,ur)=>{fn(rr,Pr=>{const ns=Vo.fromDom(to.cloneNode(!1));Mo(ns,"data-mce-index",ur);const rs=Pr.element.dom;if(rs.length===Pr.finish&&Pr.start===0)Bn(Pr.element,ns);else{rs.length!==Pr.finish&&rs.splitText(Pr.finish);const Wr=rs.splitText(Pr.start);Bn(Vo.fromDom(Wr),ns)}})})},Zs=(Jn,to,rr,ur)=>{const Pr=or(Jn,rr),ns=_c(to,Pr);return Su(ns,ur),ns.length},Eu=(Jn,to,rr,ur)=>{const Pr=rr.getBookmark(),ns=Jn.select("td[data-mce-selected],th[data-mce-selected]"),rs=ns.length>0?Ds(Jn,ns):Dl(Jn,rr.getRng()),Wr=_c(to,rs);return Su(Wr,ur),rr.moveToBookmark(Pr),Wr.length},uu=Jn=>Jn.getAttribute("data-mce-index"),$a=(Jn,to,rr,ur)=>{const Pr=Jn.dom.create("span",{"data-mce-bogus":1});Pr.className="mce-match-marker";const ns=Jn.getBody();return Mu(Jn,to,!1),ur?Eu(Jn.dom,rr,Jn.selection,Pr):Zs(Jn.dom,rr,ns,Pr)},es=Jn=>{var to;const rr=Jn.parentNode;Jn.firstChild&&rr.insertBefore(Jn.firstChild,Jn),(to=Jn.parentNode)===null||to===void 0||to.removeChild(Jn)},yl=(Jn,to)=>{const rr=[],ur=Gt.toArray(Jn.getBody().getElementsByTagName("span"));if(ur.length)for(let Pr=0;Pr<ur.length;Pr++){const ns=uu(ur[Pr]);ns===null||!ns.length||ns===to.toString()&&rr.push(ur[Pr])}return rr},mo=(Jn,to,rr)=>{const ur=to.get();let Pr=ur.index;const ns=Jn.dom;rr?Pr+1===ur.count?Pr=0:Pr++:Pr-1===-1?Pr=ur.count-1:Pr--,ns.removeClass(yl(Jn,ur.index),"mce-match-marker-selected");const rs=yl(Jn,Pr);return rs.length?(ns.addClass(yl(Jn,Pr),"mce-match-marker-selected"),Jn.selection.scrollIntoView(rs[0]),Pr):-1},Oo=(Jn,to)=>{const rr=to.parentNode;Jn.remove(to),rr&&Jn.isEmpty(rr)&&Jn.remove(rr)},Ar=(Jn,to)=>{const ur="("+Jn.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return to?`(?:^|\\s|${Pt()})`+ur+`(?=$|\\s|${Pt()})`:ur},Br=(Jn,to,rr,ur,Pr,ns)=>{const rs=Jn.selection,Wr=Ar(rr,Pr),ms=rs.isForward(),As={regex:new RegExp(Wr,ur?"g":"gi"),matchIndex:1},Bl=$a(Jn,to,As,ns);if(Tt.browser.isSafari()&&rs.setRng(rs.getRng(),ms),Bl){const eu=mo(Jn,to,!0);to.set({index:eu,count:Bl,text:rr,matchCase:ur,wholeWord:Pr,inSelection:ns})}return Bl},Ws=(Jn,to)=>{const rr=mo(Jn,to,!0);to.set({...to.get(),index:rr})},_l=(Jn,to)=>{const rr=mo(Jn,to,!1);to.set({...to.get(),index:rr})},Wu=Jn=>{const to=uu(Jn);return to!==null&&to.length>0},qu=(Jn,to,rr,ur,Pr)=>{const ns=to.get(),rs=ns.index;let Wr,ms=rs;ur=ur!==!1;const As=Jn.getBody(),Bl=Gt.grep(Gt.toArray(As.getElementsByTagName("span")),Wu);for(let eu=0;eu<Bl.length;eu++){const pu=uu(Bl[eu]);let Qp=Wr=parseInt(pu,10);if(Pr||Qp===ns.index){for(rr.length?(Bl[eu].innerText=rr,es(Bl[eu])):Oo(Jn.dom,Bl[eu]);Bl[++eu];)if(Qp=parseInt(uu(Bl[eu]),10),Qp===Wr)Oo(Jn.dom,Bl[eu]);else{eu--;break}ur&&ms--}else Wr>rs&&Bl[eu].setAttribute("data-mce-index",String(Wr-1))}return to.set({...ns,count:Pr?0:ns.count-1,index:ms}),ur?Ws(Jn,to):_l(Jn,to),!Pr&&to.get().count>0},Mu=(Jn,to,rr)=>{let ur,Pr;const ns=to.get(),rs=Gt.toArray(Jn.getBody().getElementsByTagName("span"));for(let Wr=0;Wr<rs.length;Wr++){const ms=uu(rs[Wr]);ms!==null&&ms.length&&(ms===ns.index.toString()&&(ur||(ur=rs[Wr].firstChild),Pr=rs[Wr].firstChild),es(rs[Wr]))}if(to.set({...ns,index:-1,count:0,text:""}),ur&&Pr){const Wr=Jn.dom.createRng();return Wr.setStart(ur,0),Wr.setEnd(Pr,Pr.data.length),rr!==!1&&Jn.selection.setRng(Wr),Wr}else return},Vn=(Jn,to)=>to.get().count>1,$n=(Jn,to)=>to.get().count>1,Po=(Jn,to)=>({done:Wr=>Mu(Jn,to,Wr),find:(Wr,ms,As,Bl=!1)=>Br(Jn,to,Wr,ms,As,Bl),next:()=>Ws(Jn,to),prev:()=>_l(Jn,to),replace:(Wr,ms,As)=>qu(Jn,to,Wr,ms,As)}),Ho=Jn=>{const to=o(It.none()),rr=()=>to.get().each(Jn);return{clear:()=>{rr(),to.set(It.none())},isSet:()=>to.get().isSome(),get:()=>to.get(),set:Wr=>{rr(),to.set(It.some(Wr))}}},cs=()=>{const Jn=Ho(mt);return{...Jn,on:rr=>Jn.get().each(rr)}},Es=(Jn,to)=>{const rr=cs();Jn.undoManager.add();const ur=Gt.trim(Jn.selection.getContent({format:"text"})),Pr=Cs=>{Cs.setEnabled("next",Vn(Jn,to)),Cs.setEnabled("prev",$n(Jn,to))},ns=Cs=>{const Rl=Cs.getData(),Ll=to.get();to.set({...Ll,matchCase:Rl.matchcase,wholeWord:Rl.wholewords,inSelection:Rl.inselection})},rs=(Cs,Rl)=>{Qt(["replace","replaceall","prev","next"],Ap=>Cs.setEnabled(Ap,!Rl))},Wr=(Cs,Rl)=>{Rl.redial(cm(Cs,Rl.getData()))},ms=(Cs,Rl)=>{Tt.browser.isSafari()&&Tt.deviceType.isTouch()&&(Rl==="find"||Rl==="replace"||Rl==="replaceall")&&Cs.focus(Rl)},As=Cs=>{Mu(Jn,to,!1),rs(Cs,!0),Pr(Cs)},Bl=Cs=>{const Rl=Cs.getData(),Ll=to.get();if(!Rl.findtext.length){As(Cs);return}if(Ll.text===Rl.findtext&&Ll.matchCase===Rl.matchcase&&Ll.wholeWord===Rl.wholewords)Ws(Jn,to);else{const Ep=Br(Jn,to,Rl.findtext,Rl.matchcase,Rl.wholewords,Rl.inselection);Ep<=0&&Wr(!0,Cs),rs(Cs,Ep===0)}Pr(Cs)},eu=to.get(),pu={findtext:ur,replacetext:"",wholewords:eu.wholeWord,matchcase:eu.matchCase,inselection:eu.inSelection},Qp=Cs=>{const Rl=[{type:"label",label:"Find",for:"findtext",items:[{type:"bar",items:[{type:"input",name:"findtext",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]}]},{type:"input",name:"replacetext",label:"Replace with",inputMode:"search"}];return Cs&&Rl.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),Rl},cm=(Cs,Rl)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:Qp(Cs)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:Rl,onChange:(Ll,Ep)=>{Cs&&Wr(!1,Ll),Ep.name==="findtext"&&to.get().count>0&&As(Ll)},onAction:(Ll,Ep)=>{const Ap=Ll.getData();switch(Ep.name){case"find":Bl(Ll);break;case"replace":qu(Jn,to,Ap.replacetext)?Pr(Ll):As(Ll);break;case"replaceall":qu(Jn,to,Ap.replacetext,!0,!0),As(Ll);break;case"prev":_l(Jn,to),Pr(Ll);break;case"next":Ws(Jn,to),Pr(Ll);break;case"matchcase":case"wholewords":case"inselection":Wr(!1,Ll),ns(Ll),As(Ll);break}ms(Ll,Ep.name)},onSubmit:Ll=>{Bl(Ll),ms(Ll,"find")},onClose:()=>{Jn.focus(),Mu(Jn,to),Jn.undoManager.add()}});rr.set(Jn.windowManager.open(cm(!1,pu),{inline:"toolbar"}))},zs=(Jn,to)=>{Jn.addCommand("SearchReplace",()=>{Es(Jn,to)})},Pu=(Jn,to)=>()=>{Es(Jn,to)},io=(Jn,to)=>{Jn.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:Pu(Jn,to),icon:"search"}),Jn.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:Pu(Jn,to),icon:"search",shortcut:"Meta+F"}),Jn.shortcuts.add("Meta+F","",Pu(Jn,to))};var Bs=()=>{e.add("searchreplace",Jn=>{const to=o({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return zs(Jn,to),io(Jn,to),Po(Jn,to)})};Bs()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const e=(Ot,$t,nn)=>{var xn;return nn(Ot,$t.prototype)?!0:((xn=Ot.constructor)===null||xn===void 0?void 0:xn.name)===$t.name},s=Ot=>{const $t=typeof Ot;return Ot===null?"null":$t==="object"&&Array.isArray(Ot)?"array":$t==="object"&&e(Ot,String,(nn,xn)=>xn.isPrototypeOf(nn))?"string":$t},a=Ot=>$t=>s($t)===Ot,d=Ot=>$t=>typeof $t===Ot,b=Ot=>$t=>Ot===$t,_=a("string"),_e=a("array"),ot=d("boolean"),st=b(void 0),ct=Ot=>Ot==null,ft=Ot=>!ct(Ot),mt=d("function"),bt=d("number"),wt=()=>{},Ct=(Ot,$t)=>nn=>Ot($t(nn)),Rt=Ot=>()=>Ot,It=Ot=>Ot,Pt=(Ot,$t)=>Ot===$t;function Tt(Ot,...$t){return(...nn)=>{const xn=$t.concat(nn);return Ot.apply(null,xn)}}const Gt=Ot=>{Ot()},Jt=Rt(!1),qt=Rt(!0);class Nt{constructor($t,nn){this.tag=$t,this.value=nn}static some($t){return new Nt(!0,$t)}static none(){return Nt.singletonNone}fold($t,nn){return this.tag?nn(this.value):$t()}isSome(){return this.tag}isNone(){return!this.tag}map($t){return this.tag?Nt.some($t(this.value)):Nt.none()}bind($t){return this.tag?$t(this.value):Nt.none()}exists($t){return this.tag&&$t(this.value)}forall($t){return!this.tag||$t(this.value)}filter($t){return!this.tag||$t(this.value)?this:Nt.none()}getOr($t){return this.tag?this.value:$t}or($t){return this.tag?this:$t}getOrThunk($t){return this.tag?this.value:$t()}orThunk($t){return this.tag?this:$t()}getOrDie($t){if(this.tag)return this.value;throw new Error($t??"Called getOrDie on None")}static from($t){return ft($t)?Nt.some($t):Nt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each($t){this.tag&&$t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Nt.singletonNone=new Nt(!1);const Qt=Object.keys,fn=Object.hasOwnProperty,Mn=(Ot,$t)=>{const nn=Qt(Ot);for(let xn=0,uo=nn.length;xn<uo;xn++){const Xo=nn[xn],vr=Ot[Xo];$t(vr,Xo)}},ln=Ot=>($t,nn)=>{Ot[nn]=$t},Wt=(Ot,$t,nn,xn)=>{Mn(Ot,(uo,Xo)=>{($t(uo,Xo)?nn:xn)(uo,Xo)})},so=(Ot,$t)=>{const nn={};return Wt(Ot,$t,ln(nn),wt),nn},pn=(Ot,$t)=>{const nn=[];return Mn(Ot,(xn,uo)=>{nn.push($t(xn,uo))}),nn},hn=Ot=>pn(Ot,It),Mt=Ot=>Qt(Ot).length,Hn=(Ot,$t)=>cn(Ot,$t)?Nt.from(Ot[$t]):Nt.none(),cn=(Ot,$t)=>fn.call(Ot,$t),fo=(Ot,$t)=>cn(Ot,$t)&&Ot[$t]!==void 0&&Ot[$t]!==null,Fn=Ot=>{for(const $t in Ot)if(fn.call(Ot,$t))return!1;return!0},Tn=Array.prototype.indexOf,qn=Array.prototype.push,nr=(Ot,$t)=>Tn.call(Ot,$t),oo=(Ot,$t)=>nr(Ot,$t)>-1,Mo=(Ot,$t)=>{for(let nn=0,xn=Ot.length;nn<xn;nn++){const uo=Ot[nn];if($t(uo,nn))return!0}return!1},Dn=(Ot,$t)=>{const nn=[];for(let xn=0;xn<Ot;xn++)nn.push($t(xn));return nn},xo=(Ot,$t)=>{const nn=Ot.length,xn=new Array(nn);for(let uo=0;uo<nn;uo++){const Xo=Ot[uo];xn[uo]=$t(Xo,uo)}return xn},Xt=(Ot,$t)=>{for(let nn=0,xn=Ot.length;nn<xn;nn++){const uo=Ot[nn];$t(uo,nn)}},Ur=(Ot,$t)=>{for(let nn=Ot.length-1;nn>=0;nn--){const xn=Ot[nn];$t(xn,nn)}},co=(Ot,$t)=>{const nn=[],xn=[];for(let uo=0,Xo=Ot.length;uo<Xo;uo++){const vr=Ot[uo];($t(vr,uo)?nn:xn).push(vr)}return{pass:nn,fail:xn}},Vo=(Ot,$t)=>{const nn=[];for(let xn=0,uo=Ot.length;xn<uo;xn++){const Xo=Ot[xn];$t(Xo,xn)&&nn.push(Xo)}return nn},yo=(Ot,$t,nn)=>(Ur(Ot,(xn,uo)=>{nn=$t(nn,xn,uo)}),nn),ko=(Ot,$t,nn)=>(Xt(Ot,(xn,uo)=>{nn=$t(nn,xn,uo)}),nn),yn=(Ot,$t,nn)=>{for(let xn=0,uo=Ot.length;xn<uo;xn++){const Xo=Ot[xn];if($t(Xo,xn))return Nt.some(Xo);if(nn(Xo,xn))break}return Nt.none()},Cn=(Ot,$t)=>yn(Ot,$t,Jt),Nn=Ot=>{const $t=[];for(let nn=0,xn=Ot.length;nn<xn;++nn){if(!_e(Ot[nn]))throw new Error("Arr.flatten item "+nn+" was not an array, input: "+Ot);qn.apply($t,Ot[nn])}return $t},sn=(Ot,$t)=>Nn(xo(Ot,$t)),kn=(Ot,$t)=>{for(let nn=0,xn=Ot.length;nn<xn;++nn){const uo=Ot[nn];if($t(uo,nn)!==!0)return!1}return!0},Ln=(Ot,$t)=>{const nn={};for(let xn=0,uo=Ot.length;xn<uo;xn++){const Xo=Ot[xn];nn[String(Xo)]=$t(Xo,xn)}return nn},Bn=(Ot,$t)=>$t>=0&&$t<Ot.length?Nt.some(Ot[$t]):Nt.none(),Eo=Ot=>Bn(Ot,0),Wn=Ot=>Bn(Ot,Ot.length-1),Rn=(Ot,$t)=>{for(let nn=0;nn<Ot.length;nn++){const xn=$t(Ot[nn],nn);if(xn.isSome())return xn}return Nt.none()},Qn=8,vo=9,Gn=11,ro=1,Co=3,Do=(Ot,$t)=>{const xn=($t||document).createElement("div");if(xn.innerHTML=Ot,!xn.hasChildNodes()||xn.childNodes.length>1){const uo="HTML does not have a single root node";throw console.error(uo,Ot),new Error(uo)}return xr(xn.childNodes[0])},Mr=(Ot,$t)=>{const xn=($t||document).createElement(Ot);return xr(xn)},ar=(Ot,$t)=>{const xn=($t||document).createTextNode(Ot);return xr(xn)},xr=Ot=>{if(Ot==null)throw new Error("Node cannot be null or undefined");return{dom:Ot}},wr={fromHtml:Do,fromTag:Mr,fromText:ar,fromDom:xr,fromPoint:(Ot,$t,nn)=>Nt.from(Ot.dom.elementFromPoint($t,nn)).map(xr)},gs=(Ot,$t)=>{const nn=Ot.dom;if(nn.nodeType!==ro)return!1;{const xn=nn;if(xn.matches!==void 0)return xn.matches($t);if(xn.msMatchesSelector!==void 0)return xn.msMatchesSelector($t);if(xn.webkitMatchesSelector!==void 0)return xn.webkitMatchesSelector($t);if(xn.mozMatchesSelector!==void 0)return xn.mozMatchesSelector($t);throw new Error("Browser lacks native selectors")}},Ts=Ot=>Ot.nodeType!==ro&&Ot.nodeType!==vo&&Ot.nodeType!==Gn||Ot.childElementCount===0,Rs=(Ot,$t)=>{const nn=$t===void 0?document:$t.dom;return Ts(nn)?[]:xo(nn.querySelectorAll(Ot),wr.fromDom)},Cl=(Ot,$t)=>{const nn=$t===void 0?document:$t.dom;return Ts(nn)?Nt.none():Nt.from(nn.querySelector(Ot)).map(wr.fromDom)},Yr=(Ot,$t)=>Ot.dom===$t.dom,Dl=gs;typeof window<"u"||Function("return this;")();const or=Ot=>Ot.dom.nodeName.toLowerCase(),Ds=Ot=>Ot.dom.nodeType,hu=Ot=>$t=>Ds($t)===Ot,au=Ot=>Ds(Ot)===Qn||or(Ot)==="#comment",_c=hu(ro),Su=hu(Co),Zs=hu(vo),Eu=hu(Gn),uu=Ot=>$t=>_c($t)&&or($t)===Ot,$a=Ot=>wr.fromDom(Ot.dom.ownerDocument),es=Ot=>Zs(Ot)?Ot:$a(Ot),yl=Ot=>Nt.from(Ot.dom.parentNode).map(wr.fromDom),mo=(Ot,$t)=>{const nn=mt($t)?$t:Jt;let xn=Ot.dom;const uo=[];for(;xn.parentNode!==null&&xn.parentNode!==void 0;){const Xo=xn.parentNode,vr=wr.fromDom(Xo);if(uo.push(vr),nn(vr)===!0)break;xn=Xo}return uo},Oo=Ot=>Nt.from(Ot.dom.previousSibling).map(wr.fromDom),Ar=Ot=>Nt.from(Ot.dom.nextSibling).map(wr.fromDom),Br=Ot=>xo(Ot.dom.childNodes,wr.fromDom),Ws=(Ot,$t)=>{const nn=Ot.dom.childNodes;return Nt.from(nn[$t]).map(wr.fromDom)},_l=Ot=>Ws(Ot,0),Wu=Ot=>Eu(Ot)&&ft(Ot.dom.host),qu=Ot=>wr.fromDom(Ot.dom.getRootNode()),Mu=Ot=>{const $t=qu(Ot);return Wu($t)?Nt.some($t):Nt.none()},Vn=Ot=>wr.fromDom(Ot.dom.host),$n=Ot=>{const $t=Su(Ot)?Ot.dom.parentNode:Ot.dom;if($t==null||$t.ownerDocument===null)return!1;const nn=$t.ownerDocument;return Mu(wr.fromDom($t)).fold(()=>nn.body.contains($t),Ct($n,Vn))};var Po=(Ot,$t,nn,xn,uo)=>Ot(nn,xn)?Nt.some(nn):mt(uo)&&uo(nn)?Nt.none():$t(nn,xn,uo);const Ho=(Ot,$t,nn)=>{let xn=Ot.dom;const uo=mt(nn)?nn:Jt;for(;xn.parentNode;){xn=xn.parentNode;const Xo=wr.fromDom(xn);if($t(Xo))return Nt.some(Xo);if(uo(Xo))break}return Nt.none()},cs=(Ot,$t,nn)=>Po((uo,Xo)=>Xo(uo),Ho,Ot,$t,nn),Es=(Ot,$t)=>{const nn=uo=>$t(wr.fromDom(uo));return Cn(Ot.dom.childNodes,nn).map(wr.fromDom)},zs=(Ot,$t,nn)=>Ho(Ot,xn=>gs(xn,$t),nn),Pu=(Ot,$t)=>Es(Ot,nn=>gs(nn,$t)),io=(Ot,$t)=>Cl($t,Ot),Bs=(Ot,$t,nn)=>Po((uo,Xo)=>gs(uo,Xo),zs,Ot,$t,nn),Jn=Ot=>Bs(Ot,"[contenteditable]"),to=(Ot,$t=!1)=>$n(Ot)?Ot.dom.isContentEditable:Jn(Ot).fold(Rt($t),nn=>rr(nn)==="true"),rr=Ot=>Ot.dom.contentEditable,ur=Ot=>Ot.nodeName.toLowerCase(),Pr=Ot=>wr.fromDom(Ot.getBody()),ns=Ot=>$t=>Yr($t,Pr(Ot)),rs=Ot=>Ot?Ot.replace(/px$/,""):"",Wr=Ot=>/^\d+(\.\d+)?$/.test(Ot)?Ot+"px":Ot,ms=Ot=>wr.fromDom(Ot.selection.getStart()),As=Ot=>wr.fromDom(Ot.selection.getEnd()),Bl=Ot=>cs(Ot,uu("table")).forall(to),eu=(Ot,$t)=>Vo(Br(Ot),$t),pu=(Ot,$t)=>{let nn=[];return Xt(Br(Ot),xn=>{$t(xn)&&(nn=nn.concat([xn])),nn=nn.concat(pu(xn,$t))}),nn},Qp=(Ot,$t)=>eu(Ot,nn=>gs(nn,$t)),cm=(Ot,$t)=>Rs($t,Ot),Cs=(Ot,$t,nn)=>{if(_(nn)||ot(nn)||bt(nn))Ot.setAttribute($t,nn+"");else throw console.error("Invalid call to Attribute.set. Key ",$t,":: Value ",nn,":: Element ",Ot),new Error("Attribute value was not simple")},Rl=(Ot,$t,nn)=>{Cs(Ot.dom,$t,nn)},Ll=(Ot,$t)=>{const nn=Ot.dom;Mn($t,(xn,uo)=>{Cs(nn,uo,xn)})},Ep=(Ot,$t)=>{const nn=Ot.dom.getAttribute($t);return nn===null?void 0:nn},Ap=(Ot,$t)=>Nt.from(Ep(Ot,$t)),gp=(Ot,$t)=>{Ot.dom.removeAttribute($t)},Tu=Ot=>ko(Ot.dom.attributes,($t,nn)=>($t[nn.name]=nn.value,$t),{}),v1=(Ot,$t,nn=Pt)=>Ot.exists(xn=>nn(xn,$t)),Km=Ot=>{const $t=[],nn=xn=>{$t.push(xn)};for(let xn=0;xn<Ot.length;xn++)Ot[xn].each(nn);return $t},Yl=(Ot,$t,nn)=>Ot.isSome()&&$t.isSome()?Nt.some(nn(Ot.getOrDie(),$t.getOrDie())):Nt.none(),zp=Ot=>Ot.bind(It),Bp=(Ot,$t)=>Ot?Nt.some($t):Nt.none(),mp=(Ot,$t)=>Ot.substring($t),ly=(Ot,$t,nn)=>$t===""||Ot.length>=$t.length&&Ot.substr(nn,nn+$t.length)===$t,um=(Ot,$t)=>_g(Ot,$t)?mp(Ot,$t.length):Ot,_g=(Ot,$t)=>ly(Ot,$t,0),Pm=(Ot=>$t=>$t.replace(Ot,""))(/^\s+|\s+$/g),by=Ot=>Ot.length>0,vy=Ot=>!by(Ot),q0=(Ot,$t=10)=>{const nn=parseInt(Ot,$t);return isNaN(nn)?Nt.none():Nt.some(nn)},Om=Ot=>{const $t=parseFloat(Ot);return isNaN($t)?Nt.none():Nt.some($t)},Mp=Ot=>Ot.style!==void 0&&mt(Ot.style.getPropertyValue),cy=(Ot,$t,nn)=>{if(!_(nn))throw console.error("Invalid call to CSS.set. Property ",$t,":: Value ",nn,":: Element ",Ot),new Error("CSS value must be a string: "+nn);Mp(Ot)&&Ot.style.setProperty($t,nn)},uy=(Ot,$t)=>{Mp(Ot)&&Ot.style.removeProperty($t)},zy=(Ot,$t,nn)=>{const xn=Ot.dom;cy(xn,$t,nn)},R0=(Ot,$t)=>{const nn=Ot.dom,uo=window.getComputedStyle(nn).getPropertyValue($t);return uo===""&&!$n(Ot)?yp(nn,$t):uo},yp=(Ot,$t)=>Mp(Ot)?Ot.style.getPropertyValue($t):"",Dm=(Ot,$t)=>{const nn=Ot.dom,xn=yp(nn,$t);return Nt.from(xn).filter(uo=>uo.length>0)},$p=(Ot,$t)=>{const nn=Ot.dom;uy(nn,$t),v1(Ap(Ot,"style").map(Pm),"")&&gp(Ot,"style")},em=(Ot,$t,nn=0)=>Ap(Ot,$t).map(xn=>parseInt(xn,10)).getOr(nn),By=(Ot,$t)=>$y(Ot,$t,qt),$y=(Ot,$t,nn)=>sn(Br(Ot),xn=>gs(xn,$t)?nn(xn)?[xn]:[]:$y(xn,$t,nn)),dn=["tfoot","thead","tbody","colgroup"],zn=Ot=>oo(dn,Ot),ho=(Ot,$t)=>({rows:Ot,columns:$t}),qo=(Ot,$t,nn)=>({element:Ot,rowspan:$t,colspan:nn}),mr=(Ot,$t,nn,xn,uo,Xo)=>({element:Ot,rowspan:$t,colspan:nn,row:xn,column:uo,isLocked:Xo}),Wo=(Ot,$t,nn)=>({element:Ot,cells:$t,section:nn}),Vl=(Ot,$t,nn,xn)=>({startRow:Ot,startCol:$t,finishRow:nn,finishCol:xn}),Xr=(Ot,$t,nn)=>({element:Ot,colspan:$t,column:nn}),Ls=(Ot,$t)=>({element:Ot,columns:$t}),Lu=(Ot,$t,nn=Jt)=>{if(nn($t))return Nt.none();if(oo(Ot,or($t)))return Nt.some($t);const xn=uo=>gs(uo,"table")||nn(uo);return zs($t,Ot.join(","),xn)},Yt=(Ot,$t)=>Lu(["td","th"],Ot,$t),_n=Ot=>By(Ot,"th,td"),Kn=Ot=>gs(Ot,"colgroup")?Qp(Ot,"col"):sn(Xs(Ot),$t=>Qp($t,"col")),Ao=(Ot,$t)=>Bs(Ot,"table",$t),Jo=Ot=>By(Ot,"tr"),Xs=Ot=>Ao(Ot).fold(Rt([]),$t=>Qp($t,"colgroup")),Jl=(Ot,$t)=>xo(Ot,nn=>{if(or(nn)==="colgroup"){const xn=xo(Kn(nn),uo=>{const Xo=em(uo,"span",1);return qo(uo,1,Xo)});return Wo(nn,xn,"colgroup")}else{const xn=xo(_n(nn),uo=>{const Xo=em(uo,"rowspan",1),vr=em(uo,"colspan",1);return qo(uo,Xo,vr)});return Wo(nn,xn,$t(nn))}}),lu=Ot=>yl(Ot).map($t=>{const nn=or($t);return zn(nn)?nn:"tbody"}).getOr("tbody"),dr=Ot=>{const $t=Jo(Ot),xn=[...Xs(Ot),...$t];return Jl(xn,lu)},gu="data-snooker-locked-cols",jp=Ot=>Ap(Ot,gu).bind($t=>Nt.from($t.match(/\d+/g))).map($t=>Ln($t,qt)),Z0=(Ot,$t)=>Ot+","+$t,js=(Ot,$t,nn)=>Nt.from(Ot.access[Z0($t,nn)]),Xm=(Ot,$t,nn)=>{const xn=m0(Ot,uo=>nn($t,uo.element));return xn.length>0?Nt.some(xn[0]):Nt.none()},m0=(Ot,$t)=>{const nn=sn(Ot.all,xn=>xn.cells);return Vo(nn,$t)},Tp=Ot=>{const $t={};let nn=0;return Xt(Ot.cells,xn=>{const uo=xn.colspan;Dn(uo,Xo=>{const vr=nn+Xo;$t[vr]=Xr(xn.element,uo,vr)}),nn+=uo}),$t},mu=Ot=>{const $t={},nn=[],uo=Eo(Ot).map(L0=>L0.element).bind(Ao).bind(jp).getOr({});let Xo=0,vr=0,Jr=0;const{pass:Ns,fail:Qs}=co(Ot,L0=>L0.section==="colgroup");Xt(Qs,L0=>{const Sy=[];Xt(L0.cells,Bm=>{let Zv=0;for(;$t[Z0(Jr,Zv)]!==void 0;)Zv++;const O1=fo(uo,Zv.toString()),D1=mr(Bm.element,Bm.rowspan,Bm.colspan,Jr,Zv,O1);for(let E_=0;E_<Bm.colspan;E_++)for(let Jx=0;Jx<Bm.rowspan;Jx++){const i2=Jr+Jx,kC=Zv+E_,Zp=Z0(i2,kC);$t[Zp]=D1,vr=Math.max(vr,kC+1)}Sy.push(D1)}),Xo++,nn.push(Wo(L0.element,Sy,L0.section)),Jr++});const{columns:Hu,colgroups:cu}=Wn(Ns).map(L0=>{const Sy=Tp(L0);return{colgroups:[Ls(L0.element,hn(Sy))],columns:Sy}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ho(Xo,vr),access:$t,all:nn,columns:Hu,colgroups:cu}},M0={fromTable:Ot=>{const $t=dr(Ot);return mu($t)},generate:mu,getAt:js,findItem:Xm,filterItems:m0,justCells:Ot=>sn(Ot.all,$t=>$t.cells),justColumns:Ot=>hn(Ot.columns),hasColumns:Ot=>Qt(Ot.columns).length>0,getColumnAt:(Ot,$t)=>Nt.from(Ot.columns[$t])};var Gu=tinymce.util.Tools.resolve("tinymce.util.Tools");const P0=(Ot,$t,nn)=>{const xn=Ot.select("td,th",$t);let uo;for(let Xo=0;Xo<xn.length;Xo++){const vr=Ot.getStyle(xn[Xo],nn);if(st(uo)&&(uo=vr),uo!==vr)return""}return uo},Nm=(Ot,$t,nn)=>{Gu.each("left center right".split(" "),xn=>{xn!==nn&&Ot.formatter.remove("align"+xn,{},$t)}),nn&&Ot.formatter.apply("align"+nn,{},$t)},x1=(Ot,$t,nn)=>{Gu.each("top middle bottom".split(" "),xn=>{xn!==nn&&Ot.formatter.remove("valign"+xn,{},$t)}),nn&&Ot.formatter.apply("valign"+nn,{},$t)},vn=(Ot,$t,nn)=>{Ot.dispatch("TableModified",{...nn,table:$t})},En=(Ot,$t)=>Om(Ot).getOr($t),To=(Ot,$t,nn)=>En(R0(Ot,$t),nn),Zo=(Ot,$t,nn,xn)=>{const uo=To(Ot,`padding-${nn}`,0),Xo=To(Ot,`padding-${xn}`,0),vr=To(Ot,`border-${nn}-width`,0),Jr=To(Ot,`border-${xn}-width`,0);return $t-uo-Xo-vr-Jr},ys=(Ot,$t)=>{const nn=Ot.dom,xn=nn.getBoundingClientRect().width||nn.offsetWidth;return $t==="border-box"?xn:Zo(Ot,xn,"left","right")},_i=Ot=>ys(Ot,"content-box");var vu=tinymce.util.Tools.resolve("tinymce.Env");const bp="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Lm=Dn(5,Ot=>{const $t=`${Ot+1}px`;return{title:$t,value:$t}}),dm=xo(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],Ot=>({title:Ot,value:Ot.toLowerCase()})),cp="100%",up=Ot=>{var $t;const nn=Ot.dom,xn=($t=nn.getParent(Ot.selection.getStart(),nn.isBlock))!==null&&$t!==void 0?$t:Ot.getBody();return _i(wr.fromDom(xn))+"px"},Pp=(Ot,$t)=>E1(Ot)||!O0(Ot)?$t:Q_(Ot)?{...$t,width:up(Ot)}:{...$t,width:cp},fm=(Ot,$t)=>E1(Ot)||O0(Ot)?$t:Q_(Ot)?{...$t,width:up(Ot)}:{...$t,width:cp},Ku=Ot=>$t=>$t.options.get(Ot),dp=Ot=>{const $t=Ot.options.register;$t("table_border_widths",{processor:"object[]",default:Lm}),$t("table_border_styles",{processor:"object[]",default:dm}),$t("table_cell_advtab",{processor:"boolean",default:!0}),$t("table_row_advtab",{processor:"boolean",default:!0}),$t("table_advtab",{processor:"boolean",default:!0}),$t("table_appearance_options",{processor:"boolean",default:!0}),$t("table_grid",{processor:"boolean",default:!vu.deviceType.isTouch()}),$t("table_cell_class_list",{processor:"object[]",default:[]}),$t("table_row_class_list",{processor:"object[]",default:[]}),$t("table_class_list",{processor:"object[]",default:[]}),$t("table_toolbar",{processor:"string",default:bp}),$t("table_background_color_map",{processor:"object[]",default:[]}),$t("table_border_color_map",{processor:"object[]",default:[]})},ju=Ku("table_sizing_mode"),_y=Ku("table_border_widths"),p_=Ku("table_border_styles"),av=Ku("table_cell_advtab"),w1=Ku("table_row_advtab"),k1=Ku("table_advtab"),Dv=Ku("table_appearance_options"),Nv=Ku("table_grid"),O0=Ku("table_style_by_css"),Jm=Ku("table_cell_class_list"),Hw=Ku("table_row_class_list"),Gy=Ku("table_class_list"),Hx=Ku("table_toolbar"),S1=Ku("table_background_color_map"),Ux=Ku("table_border_color_map"),Q_=Ot=>ju(Ot)==="fixed",E1=Ot=>ju(Ot)==="responsive",ex=Ot=>{const $t=Ot.options,nn=$t.get("table_default_styles");return $t.isSet("table_default_styles")?nn:Pp(Ot,nn)},Vx=Ot=>{const $t=Ot.options,nn=$t.get("table_default_attributes");return $t.isSet("table_default_attributes")?nn:fm(Ot,nn)},Lv=(Ot,$t)=>$t.column>=Ot.startCol&&$t.column+$t.colspan-1<=Ot.finishCol&&$t.row>=Ot.startRow&&$t.row+$t.rowspan-1<=Ot.finishRow,Uw=(Ot,$t)=>{let nn=!0;const xn=Tt(Lv,$t);for(let uo=$t.startRow;uo<=$t.finishRow;uo++)for(let Xo=$t.startCol;Xo<=$t.finishCol;Xo++)nn=nn&&M0.getAt(Ot,uo,Xo).exists(xn);return nn?Nt.some($t):Nt.none()},eo=(Ot,$t)=>Vl(Math.min(Ot.row,$t.row),Math.min(Ot.column,$t.column),Math.max(Ot.row+Ot.rowspan-1,$t.row+$t.rowspan-1),Math.max(Ot.column+Ot.colspan-1,$t.column+$t.colspan-1)),T1=(Ot,$t,nn)=>{const xn=M0.findItem(Ot,$t,Yr),uo=M0.findItem(Ot,nn,Yr);return xn.bind(Xo=>uo.map(vr=>eo(Xo,vr)))},D0=(Ot,$t,nn)=>T1(Ot,$t,nn).bind(xn=>Uw(Ot,xn)),hC=(Ot,$t,nn)=>{const xn=pC(Ot);return D0(xn,$t,nn)},pC=M0.fromTable,Fv=(Ot,$t)=>{yl(Ot).each(xn=>{xn.dom.insertBefore($t.dom,Ot.dom)})},ba=(Ot,$t)=>{Ar(Ot).fold(()=>{yl(Ot).each(uo=>{hm(uo,$t)})},xn=>{Fv(xn,$t)})},Fm=(Ot,$t)=>{_l(Ot).fold(()=>{hm(Ot,$t)},xn=>{Ot.dom.insertBefore($t.dom,xn.dom)})},hm=(Ot,$t)=>{Ot.dom.appendChild($t.dom)},zv=(Ot,$t)=>{Fv(Ot,$t),hm($t,Ot)},Wx=(Ot,$t)=>{Xt($t,(nn,xn)=>{const uo=xn===0?Ot:$t[xn-1];ba(uo,nn)})},g_=(Ot,$t)=>{Xt($t,nn=>{hm(Ot,nn)})},zm=Ot=>{const $t=Ot.dom;$t.parentNode!==null&&$t.parentNode.removeChild($t)},tx=Ot=>{const $t=Br(Ot);$t.length>0&&Wx(Ot,$t),zm(Ot)},nx=((Ot,$t)=>{const nn=Xo=>{if(!Ot(Xo))throw new Error("Can only get "+$t+" value of a "+$t+" node");return xn(Xo).getOr("")},xn=Xo=>Ot(Xo)?Nt.from(Xo.dom.nodeValue):Nt.none();return{get:nn,getOption:xn,set:(Xo,vr)=>{if(!Ot(Xo))throw new Error("Can only set raw "+$t+" value of a "+$t+" node");Xo.dom.nodeValue=vr}}})(Su,"text"),cv=Ot=>nx.get(Ot),Qm=(Ot,$t)=>nx.set(Ot,$t);var gC=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],m_=()=>{const Ot=Qs=>wr.fromDom(Qs.dom.cloneNode(!1)),$t=Qs=>es(Qs).dom,nn=Qs=>_c(Qs)?or(Qs)==="body"?!0:oo(gC,or(Qs)):!1,xn=Qs=>_c(Qs)?oo(["br","img","hr","input"],or(Qs)):!1,uo=Qs=>_c(Qs)&&Ep(Qs,"contenteditable")==="false",Xo=(Qs,Hu)=>Qs.dom.compareDocumentPosition(Hu.dom),vr=(Qs,Hu)=>{const cu=Tu(Qs);Ll(Hu,cu)},Jr=Qs=>{const Hu=or(Qs);return oo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Hu)},Ns=Qs=>_c(Qs)?Ap(Qs,"lang"):Nt.none();return{up:Rt({selector:zs,closest:Bs,predicate:Ho,all:mo}),down:Rt({selector:cm,predicate:pu}),styles:Rt({get:R0,getRaw:Dm,set:zy,remove:$p}),attrs:Rt({get:Ep,set:Rl,remove:gp,copyTo:vr}),insert:Rt({before:Fv,after:ba,afterAll:Wx,append:hm,appendAll:g_,prepend:Fm,wrap:zv}),remove:Rt({unwrap:tx,remove:zm}),create:Rt({nu:wr.fromTag,clone:Ot,text:wr.fromText}),query:Rt({comparePosition:Xo,prevSibling:Oo,nextSibling:Ar}),property:Rt({children:Br,name:or,parent:yl,document:$t,isText:Su,isComment:au,isElement:_c,isSpecial:Jr,getLanguage:Ns,getText:cv,setText:Qm,isBoundary:nn,isEmptyTag:xn,isNonEditable:uo}),eq:Yr,is:Dl}};const tm=(Ot,$t,nn,xn)=>{const uo=nn[0],Xo=nn.slice(1);return xn(Ot,$t,uo,Xo)},y0=(Ot,$t,nn)=>nn.length>0?tm(Ot,$t,nn,e0):Nt.none(),e0=(Ot,$t,nn,xn)=>{const uo=$t(Ot,nn);return yo(xn,(Xo,vr)=>{const Jr=$t(Ot,vr);return I1(Ot,Xo,Jr)},uo)},I1=(Ot,$t,nn)=>$t.bind(xn=>nn.filter(Tt(Ot.eq,xn))),y_=y0,Vw=m_(),b_=(Ot,$t)=>y_(Vw,(nn,xn)=>Ot(xn),$t),xy=Ot=>zs(Ot,"table"),v_=(Ot,$t)=>{const nn=cm(Ot,$t);return nn.length>0?Nt.some(nn):Nt.none()},XS=(Ot,$t,nn)=>io(Ot,$t).bind(xn=>io(Ot,nn).bind(uo=>b_(xy,[xn,uo]).map(Xo=>({first:xn,last:uo,table:Xo})))),Ww=(Ot,$t)=>v_(Ot,$t),mC=(Ot,$t,nn)=>XS(Ot,$t,nn).bind(xn=>{const uo=Ns=>Yr(Ot,Ns),Xo="thead,tfoot,tbody,table",vr=zs(xn.first,Xo,uo),Jr=zs(xn.last,Xo,uo);return vr.bind(Ns=>Jr.bind(Qs=>Yr(Ns,Qs)?hC(xn.table,xn.first,xn.last):Nt.none()))}),qw=Ot=>xo(Ot,wr.fromDom),__="data-mce-selected",R1="td["+__+"],th["+__+"]",ox="data-mce-first-selected",ep="td["+ox+"],th["+ox+"]",tp="data-mce-last-selected",Bv="td["+tp+"],th["+tp+"]",dy={selected:__,selectedSelector:R1,firstSelected:ox,firstSelectedSelector:ep,lastSelected:tp,lastSelectedSelector:Bv},Zw=Ot=>Ao(Ot).bind($t=>Ww($t,dy.firstSelectedSelector)).fold(Rt(Ot),$t=>$t[0]),Hp=Ot=>($t,nn)=>{const xn=or($t),uo=xn==="col"||xn==="colgroup"?Zw($t):$t;return Bs(uo,Ot,nn)},ds=Hp("th,td,caption"),uv=Hp("th,td"),Kw=Ot=>qw(Ot.model.table.getSelectedCells()),Y0=(Ot,$t)=>{const nn=uv(Ot),xn=nn.bind(uo=>Ao(uo)).map(uo=>Jo(uo));return Yl(nn,xn,(uo,Xo)=>Vo(Xo,vr=>Mo(qw(vr.dom.cells),Jr=>Ep(Jr,$t)==="1"||Yr(Jr,uo)))).getOr([])},Xl=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],$v=Ot=>({value:Js(Ot)}),rx=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,qx=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Yw=Ot=>rx.test(Ot)||qx.test(Ot),Js=Ot=>um(Ot,"#").toUpperCase(),wp=Ot=>Yw(Ot)?Nt.some({value:Js(Ot)}):Nt.none(),Gv=Ot=>{const $t=Ot.toString(16);return($t.length===1?"0"+$t:$t).toUpperCase()},jv=Ot=>{const $t=Gv(Ot.red)+Gv(Ot.green)+Gv(Ot.blue);return $v($t)},N0=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,b0=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,X0=(Ot,$t,nn,xn)=>({red:Ot,green:$t,blue:nn,alpha:xn}),Iu=(Ot,$t,nn,xn)=>{const uo=parseInt(Ot,10),Xo=parseInt($t,10),vr=parseInt(nn,10),Jr=parseFloat(xn);return X0(uo,Xo,vr,Jr)},fy=Ot=>{const $t=N0.exec(Ot);if($t!==null)return Nt.some(Iu($t[1],$t[2],$t[3],"1"));const nn=b0.exec(Ot);return nn!==null?Nt.some(Iu(nn[1],nn[2],nn[3],nn[4])):Nt.none()},M1=Ot=>wp(Ot).orThunk(()=>fy(Ot).map(jv)).getOrThunk(()=>{const $t=document.createElement("canvas");$t.height=1,$t.width=1;const nn=$t.getContext("2d");nn.clearRect(0,0,$t.width,$t.height),nn.fillStyle="#FFFFFF",nn.fillStyle=Ot,nn.fillRect(0,0,1,1);const xn=nn.getImageData(0,0,1,1).data,uo=xn[0],Xo=xn[1],vr=xn[2],Jr=xn[3];return jv(X0(uo,Xo,vr,Jr))}),qp=Ot=>fy(Ot).map(jv).map($t=>"#"+$t.value).getOr(Ot),wy=Ot=>{let $t=Ot;return{get:()=>$t,set:uo=>{$t=uo}}},fp=Ot=>{const $t=wy(Nt.none()),nn=()=>$t.get().each(Ot);return{clear:()=>{nn(),$t.set(Nt.none())},isSet:()=>$t.get().isSome(),get:()=>$t.get(),set:Jr=>{nn(),$t.set(Nt.some(Jr))}}},Hv=()=>fp(Ot=>Ot.unbind()),x_=(Ot,$t,nn)=>xn=>{const uo=Hv(),Xo=vy(nn),vr=()=>{const Jr=Kw(Ot),Ns=Qs=>Ot.formatter.match($t,{value:nn},Qs.dom,Xo);Xo?(xn.setActive(!Mo(Jr,Ns)),uo.set(Ot.formatter.formatChanged($t,Qs=>xn.setActive(!Qs),!0))):(xn.setActive(kn(Jr,Ns)),uo.set(Ot.formatter.formatChanged($t,xn.setActive,!1,{value:nn})))};return Ot.initialized?vr():Ot.on("init",vr),uo.clear},_u=Ot=>fo(Ot,"menu"),Cy=Ot=>xo(Ot,$t=>{const nn=$t.text||$t.title||"";return _u($t)?{text:nn,items:Cy($t.menu)}:{text:nn,value:$t.value}}),Zx=Ot=>Ot.length?Nt.some(Cy([{text:"Select...",value:"mce-no-match"},...Ot])):Nt.none(),dv=(Ot,$t,nn,xn)=>xo($t,uo=>{const Xo=uo.text||uo.title;return _u(uo)?{type:"nestedmenuitem",text:Xo,getSubmenuItems:()=>dv(Ot,uo.menu,nn,xn)}:{text:Xo,type:"togglemenuitem",onAction:()=>xn(uo.value),onSetup:x_(Ot,nn,uo.value)}}),Fu=(Ot,$t)=>nn=>{Ot.execCommand("mceTableApplyCellStyle",!1,{[$t]:nn})},Uv=Ot=>sn(Ot,$t=>_u($t)?[{...$t,menu:Uv($t.menu)}]:by($t.value)?[$t]:[]),v0=(Ot,$t,nn,xn)=>uo=>uo(dv(Ot,$t,nn,xn)),w_=(Ot,$t,nn)=>{const xn=xo($t,uo=>({text:uo.title,value:"#"+M1(uo.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:xn.length>0?xn:void 0,allowCustomColors:!1},onAction:uo=>{const Xo=uo.value==="remove"?"":uo.value;Ot.execCommand("mceTableApplyCellStyle",!1,{[nn]:Xo})}}]},Sl=Ot=>()=>{const nn=Ot.queryCommandValue("mceTableRowType")==="header"?"body":"header";Ot.execCommand("mceTableRowType",!1,{type:nn})},C_=Ot=>()=>{const nn=Ot.queryCommandValue("mceTableColType")==="th"?"td":"th";Ot.execCommand("mceTableColType",!1,{type:nn})},Kx=Ot=>Zx(Jm(Ot)).map($t=>({name:"class",type:"listbox",label:"Class",items:$t})),Lt=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Xl}],Ut=Ot=>Lt.concat(Kx(Ot).toArray()),rn=(Ot,$t)=>{const xn=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Cy(p_(Ot)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:$t==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(xn):xn}},lo={normal:(Ot,$t)=>{const nn=Ot.dom;return{setAttrib:(vr,Jr)=>{nn.setAttrib($t,vr,Jr)},setStyle:(vr,Jr)=>{nn.setStyle($t,vr,Jr)},setFormat:(vr,Jr)=>{Jr===""?Ot.formatter.remove(vr,{value:null},$t,!0):Ot.formatter.apply(vr,{value:Jr},$t)}}}},ir=uu("th"),ks=(Ot,$t)=>Ot&&$t?"sectionCells":Ot?"section":"cells",Ys=Ot=>{const $t=Ot.section==="thead",nn=v1(Hs(Ot.cells),"th");return Ot.section==="tfoot"?{type:"footer"}:$t||nn?{type:"header",subType:ks($t,nn)}:{type:"body"}},Hs=Ot=>{const $t=Vo(Ot,nn=>ir(nn.element));return $t.length===0?Nt.some("td"):$t.length===Ot.length?Nt.some("th"):Nt.none()},fs=Ot=>{const $t=xo(Ot,uo=>Ys(uo).type),nn=oo($t,"header"),xn=oo($t,"footer");if(!nn&&!xn)return Nt.some("body");{const uo=oo($t,"body");return nn&&!uo&&!xn?Nt.some("header"):!nn&&!uo&&xn?Nt.some("footer"):Nt.none()}},np=Ot=>{let $t=!1,nn;return(...xn)=>($t||($t=!0,nn=Ot.apply(null,xn)),nn)},Op=(Ot,$t)=>Rn(Ot.all,nn=>Cn(nn.cells,xn=>Yr($t,xn.element))),n0=(Ot,$t,nn)=>{const xn=xo($t.selection,Xo=>Yt(Xo).bind(vr=>Op(Ot,vr)).filter(nn)),uo=Km(xn);return Bp(uo.length>0,uo)},Vv=(Ot,$t)=>$t.mergable,sx=(Ot,$t)=>$t.unmergable,Xw=(Ot,$t)=>n0(Ot,$t,qt),_0=(Ot,$t)=>Op(Ot,$t).exists(nn=>!nn.isLocked),Jw=(Ot,$t)=>kn($t,nn=>_0(Ot,nn)),ZA=(Ot,$t)=>Vv(Ot,$t).filter(nn=>Jw(Ot,nn.cells)),JS=(Ot,$t)=>sx(Ot,$t).filter(nn=>Jw(Ot,nn));({...{generate:Ot=>{if(!_e(Ot))throw new Error("cases must be an array");if(Ot.length===0)throw new Error("there must be at least one case");const $t=[],nn={};return Xt(Ot,(xn,uo)=>{const Xo=Qt(xn);if(Xo.length!==1)throw new Error("one and only one name per case");const vr=Xo[0],Jr=xn[vr];if(nn[vr]!==void 0)throw new Error("duplicate key detected:"+vr);if(vr==="cata")throw new Error("cannot have a case named cata (sorry)");if(!_e(Jr))throw new Error("case arguments must be an array");$t.push(vr),nn[vr]=(...Ns)=>{const Qs=Ns.length;if(Qs!==Jr.length)throw new Error("Wrong number of arguments to case "+vr+". Expected "+Jr.length+" ("+Jr+"), got "+Qs);return{fold:(...cu)=>{if(cu.length!==Ot.length)throw new Error("Wrong number of arguments to fold. Expected "+Ot.length+", got "+cu.length);return cu[uo].apply(null,Ns)},match:cu=>{const op=Qt(cu);if($t.length!==op.length)throw new Error("Wrong number of arguments to match. Expected: "+$t.join(",")+`
Actual: `+op.join(","));if(!kn($t,Sy=>oo(op,Sy)))throw new Error("Not all branches were specified when using match. Specified: "+op.join(", ")+`
Required: `+$t.join(", "));return cu[vr].apply(null,Ns)},log:cu=>{console.log(cu,{constructors:$t,constructor:vr,params:Ns})}}}}),nn}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const hy=(Ot,$t)=>{const nn=M0.fromTable(Ot);return Xw(nn,$t).bind(uo=>{const Xo=uo[uo.length-1],vr=uo[0].row,Jr=Xo.row+Xo.rowspan,Ns=nn.all.slice(vr,Jr);return fs(Ns)}).getOr("")},ws=Ot=>_g(Ot,"rgb")?qp(Ot):Ot,py=Ot=>{const $t=wr.fromDom(Ot);return{borderwidth:Dm($t,"border-width").getOr(""),borderstyle:Dm($t,"border-style").getOr(""),bordercolor:Dm($t,"border-color").map(ws).getOr(""),backgroundcolor:Dm($t,"background-color").map(ws).getOr("")}},QS=Ot=>{const $t=Ot[0],nn=Ot.slice(1);return Xt(nn,xn=>{Xt(Qt($t),uo=>{Mn(xn,(Xo,vr)=>{const Jr=$t[uo];Jr!==""&&uo===vr&&Jr!==Xo&&($t[uo]=uo==="class"?"mce-no-match":"")})})}),$t},vC=(Ot,$t,nn,xn)=>Cn(Ot,uo=>!st(nn.formatter.matchNode(xn,$t+uo))).getOr(""),ix=Tt(vC,["left","center","right"],"align"),eE=Tt(vC,["top","middle","bottom"],"valign"),jy=(Ot,$t)=>{const nn=ex(Ot),xn=Vx(Ot),uo=()=>({borderstyle:Hn(nn,"border-style").getOr(""),bordercolor:ws(Hn(nn,"border-color").getOr("")),backgroundcolor:ws(Hn(nn,"background-color").getOr(""))}),Xo={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},vr=()=>{const Hu=nn["border-width"];return O0(Ot)&&Hu?{border:Hu}:Hn(xn,"border").fold(()=>({}),cu=>({border:cu}))},Jr=$t?uo():{},Ns=()=>{const Hu=Hn(nn,"border-spacing").or(Hn(xn,"cellspacing")).fold(()=>({}),op=>({cellspacing:op})),cu=Hn(nn,"border-padding").or(Hn(xn,"cellpadding")).fold(()=>({}),op=>({cellpadding:op}));return{...Hu,...cu}};return{...Xo,...nn,...xn,...Jr,...vr(),...Ns()}},Wv=Ot=>Ao(wr.fromDom(Ot)).map($t=>{const nn={selection:qw(Ot.cells)};return hy($t,nn)}).getOr(""),ax=(Ot,$t,nn)=>{const xn=(Jr,Ns)=>{const Qs=Dm(wr.fromDom(Ns),"border-width");return O0(Ot)&&Qs.isSome()?Qs.getOr(""):Jr.getAttrib(Ns,"border")||P0(Ot.dom,Ns,"border-width")||P0(Ot.dom,Ns,"border")||""},uo=Ot.dom,Xo=O0(Ot)?uo.getStyle($t,"border-spacing")||uo.getAttrib($t,"cellspacing"):uo.getAttrib($t,"cellspacing")||uo.getStyle($t,"border-spacing"),vr=O0(Ot)?P0(uo,$t,"padding")||uo.getAttrib($t,"cellpadding"):uo.getAttrib($t,"cellpadding")||P0(uo,$t,"padding");return{width:uo.getStyle($t,"width")||uo.getAttrib($t,"width"),height:uo.getStyle($t,"height")||uo.getAttrib($t,"height"),cellspacing:Xo??"",cellpadding:vr??"",border:xn(uo,$t),caption:!!uo.select("caption",$t)[0],class:uo.getAttrib($t,"class",""),align:ix(Ot,$t),...nn?py($t):{}}},Fr=(Ot,$t,nn)=>{const xn=Ot.dom;return{height:xn.getStyle($t,"height")||xn.getAttrib($t,"height"),class:xn.getAttrib($t,"class",""),type:Wv($t),align:ix(Ot,$t),...nn?py($t):{}}},Hy=(Ot,$t,nn,xn)=>{const uo=Ot.dom,Xo=xn.getOr($t);return{width:((Jr,Ns)=>uo.getStyle(Jr,Ns)||uo.getAttrib(Jr,Ns))(Xo,"width"),scope:uo.getAttrib($t,"scope"),celltype:ur($t),class:uo.getAttrib($t,"class",""),halign:ix(Ot,$t),valign:eE(Ot,$t),...nn?py($t):{}}},_C=(Ot,$t)=>{const nn=M0.fromTable(Ot),xn=M0.justCells(nn),uo=Vo(xn,Xo=>Mo($t,vr=>Yr(Xo.element,vr)));return xo(uo,Xo=>({element:Xo.element.dom,column:M0.getColumnAt(nn,Xo.column).map(vr=>vr.element.dom)}))},Yx=(Ot,$t,nn,xn)=>{xn("scope")&&Ot.setAttrib("scope",nn.scope),xn("class")&&nn.class!=="mce-no-match"&&Ot.setAttrib("class",nn.class),xn("width")&&$t.setStyle("width",Wr(nn.width))},Uy=(Ot,$t,nn)=>{nn("backgroundcolor")&&Ot.setFormat("tablecellbackgroundcolor",$t.backgroundcolor),nn("bordercolor")&&Ot.setFormat("tablecellbordercolor",$t.bordercolor),nn("borderstyle")&&Ot.setFormat("tablecellborderstyle",$t.borderstyle),nn("borderwidth")&&Ot.setFormat("tablecellborderwidth",Wr($t.borderwidth))},Qw=(Ot,$t,nn,xn)=>{const uo=$t.length===1;Xt($t,Xo=>{const vr=Xo.element,Jr=uo?qt:xn,Ns=lo.normal(Ot,vr),Qs=Xo.column.map(Hu=>lo.normal(Ot,Hu)).getOr(Ns);Yx(Ns,Qs,nn,Jr),av(Ot)&&Uy(Ns,nn,Jr),xn("halign")&&Nm(Ot,vr,nn.halign),xn("valign")&&x1(Ot,vr,nn.valign)})},lx=(Ot,$t)=>{Ot.execCommand("mceTableCellType",!1,{type:$t.celltype,no_events:!0})},P1=(Ot,$t,nn,xn)=>{const uo=so(xn,(Xo,vr)=>nn[vr]!==Xo);Mt(uo)>0&&$t.length>=1&&Ao($t[0]).each(Xo=>{const vr=_C(Xo,$t),Jr=Mt(so(uo,(Qs,Hu)=>Hu!=="scope"&&Hu!=="celltype"))>0,Ns=cn(uo,"celltype");(Jr||cn(uo,"scope"))&&Qw(Ot,vr,xn,Tt(cn,uo)),Ns&&lx(Ot,xn),vn(Ot,Xo.dom,{structure:Ns,style:Jr})})},e2=(Ot,$t,nn,xn)=>{const uo=xn.getData();xn.close(),Ot.undoManager.transact(()=>{P1(Ot,$t,nn,uo),Ot.focus()})},fv=(Ot,$t)=>{const nn=Ao($t[0]).map(xn=>xo(_C(xn,$t),uo=>Hy(Ot,uo.element,av(Ot),uo.column)));return QS(nn.getOrDie())},KA=Ot=>{const $t=Kw(Ot);if($t.length===0)return;const nn=fv(Ot,$t),xn={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ut(Ot)},rn(Ot,"cell")]},uo={type:"panel",items:[{type:"grid",columns:2,items:Ut(Ot)}]};Ot.windowManager.open({title:"Cell Properties",size:"normal",body:av(Ot)?xn:uo,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:nn,onSubmit:Tt(e2,Ot,$t,nn)})},hp=Ot=>Zx(Hw(Ot)).map($t=>({name:"class",type:"listbox",label:"Class",items:$t})),pr=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],x0=Ot=>pr.concat(hp(Ot).toArray()),ux=(Ot,$t,nn)=>{nn("class")&&$t.class!=="mce-no-match"&&Ot.setAttrib("class",$t.class),nn("height")&&Ot.setStyle("height",Wr($t.height))},Ip=(Ot,$t,nn)=>{nn("backgroundcolor")&&Ot.setStyle("background-color",$t.backgroundcolor),nn("bordercolor")&&Ot.setStyle("border-color",$t.bordercolor),nn("borderstyle")&&Ot.setStyle("border-style",$t.borderstyle)},Xx=(Ot,$t,nn,xn)=>{const Xo=$t.length===1?qt:xn;Xt($t,vr=>{const Jr=Qp(wr.fromDom(vr),"td,th"),Ns=lo.normal(Ot,vr);ux(Ns,nn,Xo),w1(Ot)&&Ip(Ns,nn,Xo),xn("height")&&Xt(Jr,Qs=>{Ot.dom.setStyle(Qs.dom,"height",null)}),xn("align")&&Nm(Ot,vr,nn.align)})},mm=(Ot,$t)=>{Ot.execCommand("mceTableRowType",!1,{type:$t.type,no_events:!0})},tu=(Ot,$t,nn,xn)=>{const uo=so(xn,(Xo,vr)=>nn[vr]!==Xo);if(Mt(uo)>0){const Xo=cn(uo,"type"),vr=Xo?Mt(uo)>1:!0;vr&&Xx(Ot,$t,xn,Tt(cn,uo)),Xo&&mm(Ot,xn),Ao(wr.fromDom($t[0])).each(Jr=>vn(Ot,Jr.dom,{structure:Xo,style:vr}))}},n2=(Ot,$t,nn,xn)=>{const uo=xn.getData();xn.close(),Ot.undoManager.transact(()=>{tu(Ot,$t,nn,uo),Ot.focus()})},Qo=Ot=>{const $t=Y0(ms(Ot),dy.selected);if($t.length===0)return;const nn=xo($t,vr=>Fr(Ot,vr.dom,w1(Ot))),xn=QS(nn),uo={type:"tabpanel",tabs:[{title:"General",name:"general",items:x0(Ot)},rn(Ot,"row")]},Xo={type:"panel",items:[{type:"grid",columns:2,items:x0(Ot)}]};Ot.windowManager.open({title:"Row Properties",size:"normal",body:w1(Ot)?uo:Xo,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:xn,onSubmit:Tt(n2,Ot,xo($t,vr=>vr.dom),xn)})},nu=(Ot,$t,nn)=>{const xn=nn?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],uo=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Xo=Dv(Ot)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],vr=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Jr=$t.length>0?[{name:"class",type:"listbox",label:"Class",items:$t}]:[];return xn.concat(uo).concat(Xo).concat(vr).concat(Jr)},o2=(Ot,$t,nn,xn)=>{if($t.tagName==="TD"||$t.tagName==="TH")_(nn)&&ft(xn)?Ot.setStyle($t,nn,xn):Ot.setStyles($t,nn);else if($t.children)for(let uo=0;uo<$t.children.length;uo++)o2(Ot,$t.children[uo],nn,xn)},nm=(Ot,$t,nn,xn)=>{const uo=Ot.dom,Xo={},vr={},Jr=O0(Ot),Ns=k1(Ot),Qs=parseFloat(nn.border)===0;if(!st(nn.class)&&nn.class!=="mce-no-match"&&(Xo.class=nn.class),vr.height=Wr(nn.height),Jr?vr.width=Wr(nn.width):uo.getAttrib($t,"width")&&(Xo.width=rs(nn.width)),Jr?(Qs?(Xo.border=0,vr["border-width"]=""):(vr["border-width"]=Wr(nn.border),Xo.border=1),vr["border-spacing"]=Wr(nn.cellspacing)):(Xo.border=Qs?0:nn.border,Xo.cellpadding=nn.cellpadding,Xo.cellspacing=nn.cellspacing),Jr&&$t.children){const Hu={};if(Qs?Hu["border-width"]="":xn.border&&(Hu["border-width"]=Wr(nn.border)),xn.cellpadding&&(Hu.padding=Wr(nn.cellpadding)),Ns&&xn.bordercolor&&(Hu["border-color"]=nn.bordercolor),!Fn(Hu))for(let cu=0;cu<$t.children.length;cu++)o2(uo,$t.children[cu],Hu)}if(Ns){const Hu=nn;vr["background-color"]=Hu.backgroundcolor,vr["border-color"]=Hu.bordercolor,vr["border-style"]=Hu.borderstyle}uo.setStyles($t,{...ex(Ot),...vr}),uo.setAttribs($t,{...Vx(Ot),...Xo})},o0=(Ot,$t,nn,xn)=>{const uo=Ot.dom,Xo=xn.getData(),vr=so(Xo,(Jr,Ns)=>nn[Ns]!==Jr);xn.close(),Ot.undoManager.transact(()=>{if(!$t){const Jr=q0(Xo.cols).getOr(1),Ns=q0(Xo.rows).getOr(1);Ot.execCommand("mceInsertTable",!1,{rows:Ns,columns:Jr}),$t=uv(ms(Ot),ns(Ot)).bind(Qs=>Ao(Qs,ns(Ot))).map(Qs=>Qs.dom).getOrDie()}if(Mt(vr)>0){const Jr={border:cn(vr,"border"),bordercolor:cn(vr,"bordercolor"),cellpadding:cn(vr,"cellpadding")};nm(Ot,$t,Xo,Jr);const Ns=uo.select("caption",$t)[0];(Ns&&!Xo.caption||!Ns&&Xo.caption)&&Ot.execCommand("mceTableToggleCaption"),Nm(Ot,$t,Xo.align)}if(Ot.focus(),Ot.addVisual(),Mt(vr)>0){const Jr=cn(vr,"caption"),Ns=Jr?Mt(vr)>1:!0;vn(Ot,$t,{structure:Jr,style:Ns})}})},ky=(Ot,$t)=>{const nn=Ot.dom;let xn,uo=jy(Ot,k1(Ot));$t?(uo.cols="1",uo.rows="1",k1(Ot)&&(uo.borderstyle="",uo.bordercolor="",uo.backgroundcolor="")):(xn=nn.getParent(Ot.selection.getStart(),"table",Ot.getBody()),xn?uo=ax(Ot,xn,k1(Ot)):k1(Ot)&&(uo.borderstyle="",uo.bordercolor="",uo.backgroundcolor=""));const Xo=Zx(Gy(Ot));Xo.isSome()&&uo.class&&(uo.class=uo.class.replace(/\s*mce\-item\-table\s*/g,""));const vr={type:"grid",columns:2,items:nu(Ot,Xo.getOr([]),$t)},Jr=()=>({type:"panel",items:[vr]}),Ns=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[vr]},rn(Ot,"table")]}),Qs=k1(Ot)?Ns():Jr();Ot.windowManager.open({title:"Table Properties",size:"normal",body:Qs,onSubmit:Tt(o0,Ot,xn,uo),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:uo})},tE=Ot=>{const $t=nn=>{Bl(ms(Ot))&&nn()};Mn({mceTableProps:Tt(ky,Ot,!1),mceTableRowProps:Tt(Qo,Ot),mceTableCellProps:Tt(KA,Ot),mceInsertTableDialog:Tt(ky,Ot,!0)},(nn,xn)=>Ot.addCommand(xn,()=>$t(nn)))},k_=(Ot,$t)=>Pu(Ot,$t).isSome(),nE=It,gy=Ot=>{const $t=(xn,uo)=>Ap(xn,uo).exists(Xo=>parseInt(Xo,10)>1),nn=xn=>$t(xn,"rowspan")||$t(xn,"colspan");return Ot.length>0&&kn(Ot,nn)?Nt.some(Ot):Nt.none()},Ql=(Ot,$t,nn)=>$t.length<=1?Nt.none():mC(Ot,nn.firstSelectedSelector,nn.lastSelectedSelector).map(xn=>({bounds:xn,cells:$t})),qv=Ot=>({element:Ot,mergable:Nt.none(),unmergable:Nt.none(),selection:[Ot]}),r2=(Ot,$t,nn)=>({element:nn,mergable:Ql($t,Ot,dy),unmergable:gy(Ot),selection:nE(Ot)}),om=Ot=>{const $t=wy(Nt.none()),nn=wy([]);let xn=Nt.none();const uo=uu("caption"),Xo=Wl=>xn.forall(ip=>!ip[Wl]),vr=()=>ds(ms(Ot),ns(Ot)),Jr=()=>ds(As(Ot),ns(Ot)),Ns=()=>vr().bind(Wl=>zp(Yl(Ao(Wl),Jr().bind(Ao),(ip,vp)=>Yr(ip,vp)?uo(Wl)?Nt.some(qv(Wl)):Nt.some(r2(Kw(Ot),ip,Wl)):Nt.none()))),Qs=Wl=>Ao(Wl.element).map(vp=>{const w0=M0.fromTable(vp),SC=Xw(w0,Wl).getOr([]),EC=ko(SC,(J0,Q0)=>(Q0.isLocked&&(J0.onAny=!0,Q0.column===0?J0.onFirst=!0:Q0.column+Q0.colspan>=w0.grid.columns&&(J0.onLast=!0)),J0),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:ZA(w0,Wl).isSome(),unmergeable:JS(w0,Wl).isSome(),locked:EC}}),Hu=()=>{$t.set(np(Ns)()),xn=$t.get().bind(Qs),Xt(nn.get(),Gt)},cu=Wl=>(Wl(),nn.set(nn.get().concat([Wl])),()=>{nn.set(Vo(nn.get(),ip=>ip!==Wl))}),op=(Wl,ip)=>cu(()=>$t.get().fold(()=>{Wl.setEnabled(!1)},vp=>{Wl.setEnabled(!ip(vp)&&Ot.selection.isEditable())})),L0=(Wl,ip,vp)=>cu(()=>$t.get().fold(()=>{Wl.setEnabled(!1),Wl.setActive(!1)},w0=>{Wl.setEnabled(!ip(w0)&&Ot.selection.isEditable()),Wl.setActive(vp(w0))})),Sy=Wl=>xn.exists(ip=>ip.locked[Wl]),Bm=Wl=>op(Wl,ip=>!1),Zv=Wl=>op(Wl,ip=>uo(ip.element)),O1=Wl=>ip=>op(ip,vp=>uo(vp.element)||Sy(Wl)),D1=Wl=>ip=>op(ip,vp=>uo(vp.element)||Wl().isNone()),E_=(Wl,ip)=>vp=>op(vp,w0=>uo(w0.element)||Wl().isNone()||Sy(ip)),Jx=Wl=>op(Wl,ip=>Xo("mergeable")),i2=Wl=>op(Wl,ip=>Xo("unmergeable")),kC=Wl=>L0(Wl,Jt,ip=>Ao(ip.element,ns(Ot)).exists(w0=>k_(w0,"caption"))),Zp=(Wl,ip)=>vp=>L0(vp,w0=>uo(w0.element),()=>Ot.queryCommandValue(Wl)===ip),pv=Zp("mceTableRowType","header"),A_=Zp("mceTableColType","th");return Ot.on("NodeChange ExecCommand TableSelectorChange",Hu),{onSetupTable:Bm,onSetupCellOrRow:Zv,onSetupColumn:O1,onSetupPasteable:D1,onSetupPasteableColumn:E_,onSetupMergeable:Jx,onSetupUnmergeable:i2,resetTargets:Hu,onSetupTableWithCaption:kC,onSetupTableRowHeaders:pv,onSetupTableColumnHeaders:A_,targets:$t.get}};var xC=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const hv="x-tinymce/dom-table-",s2=hv+"rows",ym=hv+"columns",r0=Ot=>{var $t;const nn=($t=xC.read())!==null&&$t!==void 0?$t:[];return Rn(nn,xn=>Nt.from(xn.getType(Ot)))},So=()=>r0(s2),Ru=()=>r0(ym),wC=Ot=>$t=>{const nn=()=>{$t.setEnabled(Ot.selection.isEditable())};return Ot.on("NodeChange",nn),nn(),()=>{Ot.off("NodeChange",nn)}},Dp=(Ot,$t)=>{Ot.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:wC(Ot),fetch:Jr=>Jr("inserttable | cell row column | advtablesort | tableprops deletetable")});const nn=Jr=>()=>Ot.execCommand(Jr),xn=(Jr,Ns)=>{Ot.queryCommandSupported(Ns.command)&&Ot.ui.registry.addButton(Jr,{...Ns,onAction:mt(Ns.onAction)?Ns.onAction:nn(Ns.command)})},uo=(Jr,Ns)=>{Ot.queryCommandSupported(Ns.command)&&Ot.ui.registry.addToggleButton(Jr,{...Ns,onAction:mt(Ns.onAction)?Ns.onAction:nn(Ns.command)})};xn("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:$t.onSetupTable}),xn("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:$t.onSetupTable}),xn("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:$t.onSetupCellOrRow}),xn("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:$t.onSetupMergeable}),xn("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:$t.onSetupUnmergeable}),xn("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:$t.onSetupCellOrRow}),xn("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:$t.onSetupCellOrRow}),xn("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:$t.onSetupCellOrRow}),xn("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:$t.onSetupCellOrRow}),xn("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:$t.onSetupColumn("onFirst")}),xn("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:$t.onSetupColumn("onLast")}),xn("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:$t.onSetupColumn("onAny")}),xn("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:$t.onSetupCellOrRow}),xn("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:$t.onSetupCellOrRow}),xn("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:$t.onSetupPasteable(So)}),xn("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:$t.onSetupPasteable(So)}),xn("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:$t.onSetupColumn("onAny")}),xn("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:$t.onSetupColumn("onAny")}),xn("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:$t.onSetupPasteableColumn(Ru,"onFirst")}),xn("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:$t.onSetupPasteableColumn(Ru,"onLast")}),xn("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:wC(Ot)});const Xo=Uv(Gy(Ot));Xo.length!==0&&Ot.queryCommandSupported("mceTableToggleClass")&&Ot.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:v0(Ot,Xo,"tableclass",Jr=>Ot.execCommand("mceTableToggleClass",!1,Jr)),onSetup:$t.onSetupTable});const vr=Uv(Jm(Ot));vr.length!==0&&Ot.queryCommandSupported("mceTableCellToggleClass")&&Ot.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:v0(Ot,vr,"tablecellclass",Jr=>Ot.execCommand("mceTableCellToggleClass",!1,Jr)),onSetup:$t.onSetupCellOrRow}),Ot.queryCommandSupported("mceTableApplyCellStyle")&&(Ot.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:v0(Ot,Xl,"tablecellverticalalign",Fu(Ot,"vertical-align")),onSetup:$t.onSetupCellOrRow}),Ot.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:v0(Ot,_y(Ot),"tablecellborderwidth",Fu(Ot,"border-width")),onSetup:$t.onSetupCellOrRow}),Ot.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:v0(Ot,p_(Ot),"tablecellborderstyle",Fu(Ot,"border-style")),onSetup:$t.onSetupCellOrRow}),Ot.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Jr=>Jr(w_(Ot,S1(Ot),"background-color")),onSetup:$t.onSetupCellOrRow}),Ot.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Jr=>Jr(w_(Ot,Ux(Ot),"border-color")),onSetup:$t.onSetupCellOrRow})),uo("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:$t.onSetupTableWithCaption}),uo("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Sl(Ot),onSetup:$t.onSetupTableRowHeaders}),uo("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:C_(Ot),onSetup:$t.onSetupTableColumnHeaders})},Em=Ot=>{const $t=xn=>Ot.dom.is(xn,"table")&&Ot.getBody().contains(xn)&&Ot.dom.isEditable(xn.parentNode),nn=Hx(Ot);nn.length>0&&Ot.ui.registry.addContextToolbar("table",{predicate:$t,items:nn,scope:"node",position:"node"})},sm=Ot=>$t=>{const nn=()=>{$t.setEnabled(Ot.selection.isEditable())};return Ot.on("NodeChange",nn),nn(),()=>{Ot.off("NodeChange",nn)}},Yu=(Ot,$t)=>{const nn=cu=>()=>Ot.execCommand(cu),xn=(cu,op)=>Ot.queryCommandSupported(op.command)?(Ot.ui.registry.addMenuItem(cu,{...op,onAction:mt(op.onAction)?op.onAction:nn(op.command)}),!0):!1,uo=(cu,op)=>{Ot.queryCommandSupported(op.command)&&Ot.ui.registry.addToggleMenuItem(cu,{...op,onAction:mt(op.onAction)?op.onAction:nn(op.command)})},Xo=cu=>{Ot.execCommand("mceInsertTable",!1,{rows:cu.numRows,columns:cu.numColumns})},vr=[xn("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:$t.onSetupCellOrRow}),xn("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:$t.onSetupCellOrRow}),xn("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:$t.onSetupCellOrRow}),xn("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:$t.onSetupCellOrRow}),xn("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:$t.onSetupCellOrRow}),xn("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:$t.onSetupCellOrRow}),xn("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:$t.onSetupPasteable(So)}),xn("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:$t.onSetupPasteable(So)})],Jr=[xn("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:$t.onSetupColumn("onFirst")}),xn("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:$t.onSetupColumn("onLast")}),xn("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:$t.onSetupColumn("onAny")}),xn("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:$t.onSetupColumn("onAny")}),xn("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:$t.onSetupColumn("onAny")}),xn("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:$t.onSetupPasteableColumn(Ru,"onFirst")}),xn("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:$t.onSetupPasteableColumn(Ru,"onLast")})],Ns=[xn("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:$t.onSetupCellOrRow}),xn("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:$t.onSetupMergeable}),xn("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:$t.onSetupUnmergeable})];Nv(Ot)?Ot.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Xo}],onSetup:sm(Ot)}):Ot.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:nn("mceInsertTableDialog"),onSetup:sm(Ot)}),Ot.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:nn("mceInsertTableDialog"),onSetup:sm(Ot)}),xn("tableprops",{text:"Table properties",onSetup:$t.onSetupTable,command:"mceTableProps"}),xn("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:$t.onSetupTable,command:"mceTableDelete"}),oo(vr,!0)&&Ot.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Rt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),oo(Jr,!0)&&Ot.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Rt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),oo(Ns,!0)&&Ot.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Rt("tablecellprops tablemergecells tablesplitcells")}),Ot.ui.registry.addContextMenu("table",{update:()=>($t.resetTargets(),$t.targets().fold(Rt(""),cu=>or(cu.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Qs=Uv(Gy(Ot));Qs.length!==0&&Ot.queryCommandSupported("mceTableToggleClass")&&Ot.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>dv(Ot,Qs,"tableclass",cu=>Ot.execCommand("mceTableToggleClass",!1,cu)),onSetup:$t.onSetupTable});const Hu=Uv(Jm(Ot));Hu.length!==0&&Ot.queryCommandSupported("mceTableCellToggleClass")&&Ot.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>dv(Ot,Hu,"tablecellclass",cu=>Ot.execCommand("mceTableCellToggleClass",!1,cu)),onSetup:$t.onSetupCellOrRow}),Ot.queryCommandSupported("mceTableApplyCellStyle")&&(Ot.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>dv(Ot,Xl,"tablecellverticalalign",Fu(Ot,"vertical-align")),onSetup:$t.onSetupCellOrRow}),Ot.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>dv(Ot,_y(Ot),"tablecellborderwidth",Fu(Ot,"border-width")),onSetup:$t.onSetupCellOrRow}),Ot.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>dv(Ot,p_(Ot),"tablecellborderstyle",Fu(Ot,"border-style")),onSetup:$t.onSetupCellOrRow}),Ot.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>w_(Ot,S1(Ot),"background-color"),onSetup:$t.onSetupCellOrRow}),Ot.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>w_(Ot,Ux(Ot),"border-color"),onSetup:$t.onSetupCellOrRow})),uo("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:$t.onSetupTableWithCaption}),uo("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Sl(Ot),onSetup:$t.onSetupTableRowHeaders}),uo("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:C_(Ot),onSetup:$t.onSetupTableRowHeaders})},CC=Ot=>{const $t=om(Ot);dp(Ot),tE(Ot),Yu(Ot,$t),Dp(Ot,$t),Em(Ot)};var S_=()=>{o.add("table",CC)};S_()})();(function(){const o=mt=>{let bt=mt;return{get:()=>bt,set:Rt=>{bt=Rt}}};var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=(mt,bt)=>{mt.dispatch("VisualBlocks",{state:bt})},a=(mt,bt,wt)=>{mt.dom.toggleClass(mt.getBody(),"mce-visualblocks"),wt.set(!wt.get()),s(mt,wt.get())},d=(mt,bt,wt)=>{mt.addCommand("mceVisualBlocks",()=>{a(mt,bt,wt)})},b=mt=>bt=>bt.options.get(mt),_=mt=>{const bt=mt.options.register;bt("visualblocks_default_state",{processor:"boolean",default:!1})},_e=b("visualblocks_default_state"),ot=(mt,bt,wt)=>{mt.on("PreviewFormats AfterPreviewFormats",Ct=>{wt.get()&&mt.dom.toggleClass(mt.getBody(),"mce-visualblocks",Ct.type==="afterpreviewformats")}),mt.on("init",()=>{_e(mt)&&a(mt,bt,wt)})},st=(mt,bt)=>wt=>{wt.setActive(bt.get());const Ct=Rt=>wt.setActive(Rt.state);return mt.on("VisualBlocks",Ct),()=>mt.off("VisualBlocks",Ct)},ct=(mt,bt)=>{const wt=()=>mt.execCommand("mceVisualBlocks");mt.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:wt,onSetup:st(mt,bt),context:"any"}),mt.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:wt,onSetup:st(mt,bt),context:"any"})};var ft=()=>{e.add("visualblocks",(mt,bt)=>{_(mt);const wt=o(!1);d(mt,bt,wt),ct(mt,wt),ot(mt,bt,wt)})};ft()})();(function(){const o=mo=>{let Oo=mo;return{get:()=>Oo,set:Ws=>{Oo=Ws}}};var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=mo=>({isEnabled:()=>mo.get()}),a=(mo,Oo)=>mo.dispatch("VisualChars",{state:Oo}),d=(mo,Oo,Ar)=>{var Br;return Ar(mo,Oo.prototype)?!0:((Br=mo.constructor)===null||Br===void 0?void 0:Br.name)===Oo.name},b=mo=>{const Oo=typeof mo;return mo===null?"null":Oo==="object"&&Array.isArray(mo)?"array":Oo==="object"&&d(mo,String,(Ar,Br)=>Br.isPrototypeOf(Ar))?"string":Oo},_=mo=>Oo=>b(Oo)===mo,_e=mo=>Oo=>typeof Oo===mo,ot=mo=>Oo=>mo===Oo,st=_("string"),ct=_("object"),ft=ot(null),mt=_e("boolean"),bt=mo=>mo==null,wt=mo=>!bt(mo),Ct=_e("number");class Rt{constructor(Oo,Ar){this.tag=Oo,this.value=Ar}static some(Oo){return new Rt(!0,Oo)}static none(){return Rt.singletonNone}fold(Oo,Ar){return this.tag?Ar(this.value):Oo()}isSome(){return this.tag}isNone(){return!this.tag}map(Oo){return this.tag?Rt.some(Oo(this.value)):Rt.none()}bind(Oo){return this.tag?Oo(this.value):Rt.none()}exists(Oo){return this.tag&&Oo(this.value)}forall(Oo){return!this.tag||Oo(this.value)}filter(Oo){return!this.tag||Oo(this.value)?this:Rt.none()}getOr(Oo){return this.tag?this.value:Oo}or(Oo){return this.tag?this:Oo}getOrThunk(Oo){return this.tag?this.value:Oo()}orThunk(Oo){return this.tag?this:Oo()}getOrDie(Oo){if(this.tag)return this.value;throw new Error(Oo??"Called getOrDie on None")}static from(Oo){return wt(Oo)?Rt.some(Oo):Rt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Oo){this.tag&&Oo(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Rt.singletonNone=new Rt(!1);const It=(mo,Oo)=>{const Ar=mo.length,Br=new Array(Ar);for(let Ws=0;Ws<Ar;Ws++){const _l=mo[Ws];Br[Ws]=Oo(_l,Ws)}return Br},Pt=(mo,Oo)=>{for(let Ar=0,Br=mo.length;Ar<Br;Ar++){const Ws=mo[Ar];Oo(Ws,Ar)}},Tt=(mo,Oo)=>{const Ar=[];for(let Br=0,Ws=mo.length;Br<Ws;Br++){const _l=mo[Br];Oo(_l,Br)&&Ar.push(_l)}return Ar},Gt=Object.keys,Jt=(mo,Oo)=>{const Ar=Gt(mo);for(let Br=0,Ws=Ar.length;Br<Ws;Br++){const _l=Ar[Br],Wu=mo[_l];Oo(Wu,_l)}},qt=typeof window<"u"?window:Function("return this;")(),Nt=(mo,Oo)=>{let Ar=Oo??qt;for(let Br=0;Br<mo.length&&Ar!==void 0&&Ar!==null;++Br)Ar=Ar[mo[Br]];return Ar},Qt=(mo,Oo)=>{const Ar=mo.split(".");return Nt(Ar,Oo)},fn=(mo,Oo)=>Qt(mo,Oo),Mn=(mo,Oo)=>{const Ar=fn(mo,Oo);if(Ar==null)throw new Error(mo+" not available on this browser");return Ar},ln=Object.getPrototypeOf,Wt=mo=>Mn("HTMLElement",mo),so=mo=>{const Oo=Qt("ownerDocument.defaultView",mo);return ct(mo)&&(Wt(Oo).prototype.isPrototypeOf(mo)||/^HTML\w*Element$/.test(ln(mo).constructor.name))},pn=1,hn=3,Mt=mo=>mo.dom.nodeType,Hn=mo=>mo.dom.nodeValue,cn=mo=>Oo=>Mt(Oo)===mo,fo=mo=>Fn(mo)&&so(mo.dom),Fn=cn(pn),Tn=cn(hn),qn=(mo,Oo,Ar)=>{if(st(Ar)||mt(Ar)||Ct(Ar))mo.setAttribute(Oo,Ar+"");else throw console.error("Invalid call to Attribute.set. Key ",Oo,":: Value ",Ar,":: Element ",mo),new Error("Attribute value was not simple")},nr=(mo,Oo,Ar)=>{qn(mo.dom,Oo,Ar)},oo=(mo,Oo)=>{const Ar=mo.dom.getAttribute(Oo);return Ar===null?void 0:Ar},Mo=(mo,Oo)=>{mo.dom.removeAttribute(Oo)},Dn=(mo,Oo)=>{const Ar=oo(mo,Oo);return Ar===void 0||Ar===""?[]:Ar.split(" ")},xo=(mo,Oo,Ar)=>{const Ws=Dn(mo,Oo).concat([Ar]);return nr(mo,Oo,Ws.join(" ")),!0},Xt=(mo,Oo,Ar)=>{const Br=Tt(Dn(mo,Oo),Ws=>Ws!==Ar);return Br.length>0?nr(mo,Oo,Br.join(" ")):Mo(mo,Oo),!1},Ur=mo=>mo.dom.classList!==void 0,co=mo=>Dn(mo,"class"),Vo=(mo,Oo)=>xo(mo,"class",Oo),yo=(mo,Oo)=>Xt(mo,"class",Oo),ko=(mo,Oo)=>{Ur(mo)?mo.dom.classList.add(Oo):Vo(mo,Oo)},yn=mo=>{(Ur(mo)?mo.dom.classList:co(mo)).length===0&&Mo(mo,"class")},Cn=(mo,Oo)=>{Ur(mo)?mo.dom.classList.remove(Oo):yo(mo,Oo),yn(mo)},Nn=(mo,Oo)=>{const Br=(Oo||document).createElement("div");if(Br.innerHTML=mo,!Br.hasChildNodes()||Br.childNodes.length>1){const Ws="HTML does not have a single root node";throw console.error(Ws,mo),new Error(Ws)}return Ln(Br.childNodes[0])},sn=(mo,Oo)=>{const Br=(Oo||document).createElement(mo);return Ln(Br)},kn=(mo,Oo)=>{const Br=(Oo||document).createTextNode(mo);return Ln(Br)},Ln=mo=>{if(mo==null)throw new Error("Node cannot be null or undefined");return{dom:mo}},Eo={fromHtml:Nn,fromTag:sn,fromText:kn,fromDom:Ln,fromPoint:(mo,Oo,Ar)=>Rt.from(mo.dom.elementFromPoint(Oo,Ar)).map(Ln)},Wn={"":"nbsp","":"shy"},Rn=(mo,Oo)=>{let Ar="";return Jt(mo,(Br,Ws)=>{Ar+=Ws}),new RegExp("["+Ar+"]",Oo?"g":"")},Qn=mo=>{let Oo="";return Jt(mo,Ar=>{Oo&&(Oo+=","),Oo+="span.mce-"+Ar}),Oo},vo=Rn(Wn),Gn=Rn(Wn,!0),ro=Qn(Wn),Co="mce-nbsp",Do=mo=>mo.dom.contentEditable,Mr=mo=>'<span data-mce-bogus="1" class="mce-'+Wn[mo]+'">'+mo+"</span>",ar=mo=>mo.nodeName.toLowerCase()==="span"&&mo.classList.contains("mce-nbsp-wrap"),xr=mo=>{const Oo=Hn(mo);return Tn(mo)&&st(Oo)&&vo.test(Oo)},us=mo=>fo(mo)&&Do(mo)==="false",wr=(mo,Oo)=>{if(fo(mo)&&!ar(mo.dom)){const Ar=Do(mo);if(Ar==="true")return!0;if(Ar==="false")return!1}return Oo},gs=(mo,Oo,Ar)=>{let Br=[];const Ws=mo.dom,_l=It(Ws.childNodes,Eo.fromDom),Wu=qu=>ar(qu.dom)||!us(qu);return Pt(_l,qu=>{Ar&&Wu(qu)&&Oo(qu)&&(Br=Br.concat([qu])),Br=Br.concat(gs(qu,Oo,wr(qu,Ar)))}),Br},Ts=(mo,Oo)=>{for(;mo.parentNode;){if(mo.parentNode===Oo)return Oo;mo=mo.parentNode}},Rs=mo=>mo.replace(Gn,Mr),Cl=(mo,Oo)=>{const Ar=mo.dom,Br=gs(Eo.fromDom(Oo),xr,mo.dom.isEditable(Oo));Pt(Br,Ws=>{var _l;const Wu=Ws.dom.parentNode;if(ar(Wu))ko(Eo.fromDom(Wu),Co);else{const qu=Rs(Ar.encode((_l=Hn(Ws))!==null&&_l!==void 0?_l:"")),Mu=Ar.create("div",{},qu);let Vn;for(;Vn=Mu.lastChild;)Ar.insertAfter(Vn,Ws.dom);mo.dom.remove(Ws.dom)}})},Yr=(mo,Oo)=>{const Ar=mo.dom.select(ro,Oo);Pt(Ar,Br=>{ar(Br)?Cn(Eo.fromDom(Br),Co):mo.dom.remove(Br,!0)})},Dl=mo=>{const Oo=mo.getBody(),Ar=mo.selection.getBookmark();let Br=Ts(mo.selection.getNode(),Oo);Br=Br!==void 0?Br:Oo,Yr(mo,Br),Cl(mo,Br),mo.selection.moveToBookmark(Ar)},or=(mo,Oo)=>{a(mo,Oo.get());const Ar=mo.getBody();Oo.get()===!0?Cl(mo,Ar):Yr(mo,Ar)},Ds=(mo,Oo)=>{Oo.set(!Oo.get());const Ar=mo.selection.getBookmark();or(mo,Oo),mo.selection.moveToBookmark(Ar)},hu=(mo,Oo)=>{mo.addCommand("mceVisualChars",()=>{Ds(mo,Oo)})},au=mo=>Oo=>Oo.options.get(mo),_c=mo=>{const Oo=mo.options.register;Oo("visualchars_default_state",{processor:"boolean",default:!1})},Su=au("visualchars_default_state"),Zs=(mo,Oo)=>{mo.on("init",()=>{or(mo,Oo)})},Eu=(mo,Oo)=>{let Ar=null;return{cancel:()=>{ft(Ar)||(clearTimeout(Ar),Ar=null)},throttle:(..._l)=>{ft(Ar)&&(Ar=setTimeout(()=>{Ar=null,mo.apply(null,_l)},Oo))}}},uu=(mo,Oo)=>{const Ar=Eu(()=>{Dl(mo)},300);mo.on("keydown",Br=>{Oo.get()===!0&&(Br.keyCode===13?Dl(mo):Ar.throttle())}),mo.on("remove",Ar.cancel)},$a=(mo,Oo)=>Ar=>{Ar.setActive(Oo.get());const Br=Ws=>Ar.setActive(Ws.state);return mo.on("VisualChars",Br),()=>mo.off("VisualChars",Br)},es=(mo,Oo)=>{const Ar=()=>mo.execCommand("mceVisualChars");mo.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:Ar,onSetup:$a(mo,Oo),context:"any"}),mo.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:Ar,onSetup:$a(mo,Oo),context:"any"})};var yl=()=>{e.add("visualchars",mo=>{_c(mo);const Oo=o(Su(mo));return hu(mo,Oo),es(mo,Oo),uu(mo,Oo),Zs(mo,Oo),s(Oo)})};yl()})();(function(){var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const s=(yn=>Cn=>yn===Cn)(null),a=yn=>yn,d=(yn,Cn)=>{const Nn=yn.length,sn=new Array(Nn);for(let kn=0;kn<Nn;kn++){const Ln=yn[kn];sn[kn]=Cn(Ln,kn)}return sn},_={aletter:"[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]",midnumlet:"[-'\\.]",midletter:"[:]",midnum:"[+*/,;;]",numeric:"[0-9---------------------------------]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[------------------------------------------------------------------------------------------------------]",format:"[----\uFEFF-]",katakana:"[-------]",extendnumlet:"[=_--<>]",punctuation:"[~|!-*+-\\/:;?@\\[-`{};----------------------------------------------]"},_e={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},ot=[new RegExp(_.aletter),new RegExp(_.midnumlet),new RegExp(_.midletter),new RegExp(_.midnum),new RegExp(_.numeric),new RegExp(_.cr),new RegExp(_.lf),new RegExp(_.newline),new RegExp(_.extend),new RegExp(_.format),new RegExp(_.katakana),new RegExp(_.extendnumlet),new RegExp("@")],st="",ct=new RegExp("^"+_.punctuation+"$"),ft=/^\s+$/,mt=ot,bt=_e.OTHER,wt=yn=>{let Cn=bt;const Nn=mt.length;for(let sn=0;sn<Nn;++sn){const kn=mt[sn];if(kn&&kn.test(yn)){Cn=sn;break}}return Cn},Ct=yn=>{const Cn={};return Nn=>{if(Cn[Nn])return Cn[Nn];{const sn=yn(Nn);return Cn[Nn]=sn,sn}}},Rt=yn=>{const Cn=Ct(wt);return d(yn,Cn)},It=(yn,Cn)=>{const Nn=yn[Cn],sn=yn[Cn+1];if(Cn<0||Cn>yn.length-1&&Cn!==0||Nn===_e.ALETTER&&sn===_e.ALETTER)return!1;const kn=yn[Cn+2];if(Nn===_e.ALETTER&&(sn===_e.MIDLETTER||sn===_e.MIDNUMLET||sn===_e.AT)&&kn===_e.ALETTER)return!1;const Ln=yn[Cn-1];return(Nn===_e.MIDLETTER||Nn===_e.MIDNUMLET||sn===_e.AT)&&sn===_e.ALETTER&&Ln===_e.ALETTER||(Nn===_e.NUMERIC||Nn===_e.ALETTER)&&(sn===_e.NUMERIC||sn===_e.ALETTER)||(Nn===_e.MIDNUM||Nn===_e.MIDNUMLET)&&sn===_e.NUMERIC&&Ln===_e.NUMERIC||Nn===_e.NUMERIC&&(sn===_e.MIDNUM||sn===_e.MIDNUMLET)&&kn===_e.NUMERIC||(Nn===_e.EXTEND||Nn===_e.FORMAT)&&(sn===_e.ALETTER||sn===_e.NUMERIC||sn===_e.KATAKANA||sn===_e.EXTEND||sn===_e.FORMAT)||(sn===_e.EXTEND||sn===_e.FORMAT&&(kn===_e.ALETTER||kn===_e.NUMERIC||kn===_e.KATAKANA||kn===_e.EXTEND||kn===_e.FORMAT))&&(Nn===_e.ALETTER||Nn===_e.NUMERIC||Nn===_e.KATAKANA||Nn===_e.EXTEND||Nn===_e.FORMAT)||Nn===_e.CR&&sn===_e.LF?!1:Nn===_e.NEWLINE||Nn===_e.CR||Nn===_e.LF||sn===_e.NEWLINE||sn===_e.CR||sn===_e.LF?!0:!(Nn===_e.KATAKANA&&sn===_e.KATAKANA||sn===_e.EXTENDNUMLET&&(Nn===_e.ALETTER||Nn===_e.NUMERIC||Nn===_e.KATAKANA||Nn===_e.EXTENDNUMLET)||Nn===_e.EXTENDNUMLET&&(sn===_e.ALETTER||sn===_e.NUMERIC||sn===_e.KATAKANA)||Nn===_e.AT)},Pt=st,Tt=ft,Gt=ct,Jt=yn=>yn==="http"||yn==="https",qt=(yn,Cn)=>{let Nn;for(Nn=Cn;Nn<yn.length&&!Tt.test(yn[Nn]);Nn++);return Nn},Nt=(yn,Cn)=>{const Nn=qt(yn,Cn+1);return yn.slice(Cn+1,Nn).join(Pt).substr(0,3)==="://"?Nn:Cn},Qt=(yn,Cn,Nn,sn)=>{const kn=[],Ln=[];let Bn=[];for(let Eo=0;Eo<Nn.length;++Eo)if(Bn.push(yn[Eo]),It(Nn,Eo)){const Wn=Cn[Eo];if((sn.includeWhitespace||!Tt.test(Wn))&&(sn.includePunctuation||!Gt.test(Wn))){const Rn=Eo-Bn.length+1,Qn=Eo+1,vo=Cn.slice(Rn,Qn).join(Pt);if(Jt(vo)){const Gn=Nt(Cn,Eo),ro=yn.slice(Qn,Gn);Array.prototype.push.apply(Bn,ro),Eo=Gn}Cn[Eo+1]==="."&&/^([a-zA-Z]\.)+$/.test(vo+".")?(Bn.push(yn[Eo+1]),Ln.push({start:Rn,end:Qn+1})):Ln.push({start:Rn,end:Qn}),kn.push(Bn)}Bn=[]}return{words:kn,indices:Ln}},fn=()=>({includeWhitespace:!1,includePunctuation:!1}),Mn=(yn,Cn,Nn)=>{Nn={...fn(),...Nn};const sn=d(yn,Cn),kn=Rt(sn);return Qt(yn,sn,kn,Nn)},Wt=(yn,Cn,Nn)=>Mn(yn,Cn,Nn).words,so=yn=>yn.replace(/\uFEFF/g,"");var pn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const hn=(yn,Cn)=>{const Nn=Cn.getBlockElements(),sn=Cn.getVoidElements(),kn=Rn=>Nn[Rn.nodeName]||sn[Rn.nodeName],Ln=[];let Bn="";const Eo=new pn(yn,yn);let Wn;for(;Wn=Eo.next();)Wn.nodeType===3?Bn+=so(Wn.data):kn(Wn)&&Bn.length&&(Ln.push(Bn),Bn="");return Bn.length&&Ln.push(Bn),Ln},Mt=yn=>yn.replace(/\u200B/g,""),Hn=yn=>yn.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,cn=(yn,Cn)=>{const Nn=Mt(hn(yn,Cn).join(`
`));return Wt(Nn.split(""),a).length},fo=(yn,Cn)=>{const Nn=hn(yn,Cn).join("");return Hn(Nn)},Fn=(yn,Cn)=>{const Nn=hn(yn,Cn).join("").replace(/\s/g,"");return Hn(Nn)},Tn=(yn,Cn)=>()=>Cn(yn.getBody(),yn.schema),qn=(yn,Cn)=>()=>Cn(yn.selection.getRng().cloneContents(),yn.schema),nr=yn=>Tn(yn,cn),oo=yn=>({body:{getWordCount:nr(yn),getCharacterCount:Tn(yn,fo),getCharacterCountWithoutSpaces:Tn(yn,Fn)},selection:{getWordCount:qn(yn,cn),getCharacterCount:qn(yn,fo),getCharacterCountWithoutSpaces:qn(yn,Fn)},getCount:nr(yn)}),Mo=(yn,Cn)=>{yn.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(Cn.body.getWordCount()),String(Cn.selection.getWordCount())],["Characters (no spaces)",String(Cn.body.getCharacterCountWithoutSpaces()),String(Cn.selection.getCharacterCountWithoutSpaces())],["Characters",String(Cn.body.getCharacterCount()),String(Cn.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},Dn=(yn,Cn)=>{yn.addCommand("mceWordCount",()=>Mo(yn,Cn))},xo=(yn,Cn)=>{let Nn=null;return{cancel:()=>{s(Nn)||(clearTimeout(Nn),Nn=null)},throttle:(...Ln)=>{s(Nn)&&(Nn=setTimeout(()=>{Nn=null,yn.apply(null,Ln)},Cn))}}};var Xt=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ur=(yn,Cn)=>{yn.dispatch("wordCountUpdate",{wordCount:{words:Cn.body.getWordCount(),characters:Cn.body.getCharacterCount(),charactersWithoutSpaces:Cn.body.getCharacterCountWithoutSpaces()}})},co=(yn,Cn)=>{Ur(yn,Cn)},Vo=(yn,Cn,Nn)=>{const sn=xo(()=>co(yn,Cn),Nn);yn.on("init",()=>{co(yn,Cn),Xt.setEditorTimeout(yn,()=>{yn.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",sn.throttle)},0),yn.on("remove",sn.cancel)})},yo=yn=>{const Cn=()=>yn.execCommand("mceWordCount");yn.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:Cn,context:"any"}),yn.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:Cn,context:"any"})};var ko=(yn=300)=>{o.add("wordcount",Cn=>{const Nn=oo(Cn);return Dn(Cn,Nn),yo(Cn),Vo(Cn,Nn,yn),Nn})};ko()})();window.tinymce.Resource.add("tinymce.plugins.emoticons",{grinning:{keywords:["face","smile","happy","joy",":D","grin"],char:"",fitzpatrick_scale:!1,category:"people"},grimacing:{keywords:["face","grimace","teeth"],char:"",fitzpatrick_scale:!1,category:"people"},grin:{keywords:["face","happy","smile","joy","kawaii"],char:"",fitzpatrick_scale:!1,category:"people"},joy:{keywords:["face","cry","tears","weep","happy","happytears","haha"],char:"",fitzpatrick_scale:!1,category:"people"},rofl:{keywords:["face","rolling","floor","laughing","lol","haha"],char:"",fitzpatrick_scale:!1,category:"people"},partying:{keywords:["face","celebration","woohoo"],char:"",fitzpatrick_scale:!1,category:"people"},smiley:{keywords:["face","happy","joy","haha",":D",":)","smile","funny"],char:"",fitzpatrick_scale:!1,category:"people"},smile:{keywords:["face","happy","joy","funny","haha","laugh","like",":D",":)"],char:"",fitzpatrick_scale:!1,category:"people"},sweat_smile:{keywords:["face","hot","happy","laugh","sweat","smile","relief"],char:"",fitzpatrick_scale:!1,category:"people"},laughing:{keywords:["happy","joy","lol","satisfied","haha","face","glad","XD","laugh"],char:"",fitzpatrick_scale:!1,category:"people"},innocent:{keywords:["face","angel","heaven","halo"],char:"",fitzpatrick_scale:!1,category:"people"},wink:{keywords:["face","happy","mischievous","secret",";)","smile","eye"],char:"",fitzpatrick_scale:!1,category:"people"},blush:{keywords:["face","smile","happy","flushed","crush","embarrassed","shy","joy"],char:"",fitzpatrick_scale:!1,category:"people"},slightly_smiling_face:{keywords:["face","smile"],char:"",fitzpatrick_scale:!1,category:"people"},upside_down_face:{keywords:["face","flipped","silly","smile"],char:"",fitzpatrick_scale:!1,category:"people"},relaxed:{keywords:["face","blush","massage","happiness"],char:"",fitzpatrick_scale:!1,category:"people"},yum:{keywords:["happy","joy","tongue","smile","face","silly","yummy","nom","delicious","savouring"],char:"",fitzpatrick_scale:!1,category:"people"},relieved:{keywords:["face","relaxed","phew","massage","happiness"],char:"",fitzpatrick_scale:!1,category:"people"},heart_eyes:{keywords:["face","love","like","affection","valentines","infatuation","crush","heart"],char:"",fitzpatrick_scale:!1,category:"people"},smiling_face_with_three_hearts:{keywords:["face","love","like","affection","valentines","infatuation","crush","hearts","adore"],char:"",fitzpatrick_scale:!1,category:"people"},kissing_heart:{keywords:["face","love","like","affection","valentines","infatuation","kiss"],char:"",fitzpatrick_scale:!1,category:"people"},kissing:{keywords:["love","like","face","3","valentines","infatuation","kiss"],char:"",fitzpatrick_scale:!1,category:"people"},kissing_smiling_eyes:{keywords:["face","affection","valentines","infatuation","kiss"],char:"",fitzpatrick_scale:!1,category:"people"},kissing_closed_eyes:{keywords:["face","love","like","affection","valentines","infatuation","kiss"],char:"",fitzpatrick_scale:!1,category:"people"},stuck_out_tongue_winking_eye:{keywords:["face","prank","childish","playful","mischievous","smile","wink","tongue"],char:"",fitzpatrick_scale:!1,category:"people"},zany:{keywords:["face","goofy","crazy"],char:"",fitzpatrick_scale:!1,category:"people"},raised_eyebrow:{keywords:["face","distrust","scepticism","disapproval","disbelief","surprise"],char:"",fitzpatrick_scale:!1,category:"people"},monocle:{keywords:["face","stuffy","wealthy"],char:"",fitzpatrick_scale:!1,category:"people"},stuck_out_tongue_closed_eyes:{keywords:["face","prank","playful","mischievous","smile","tongue"],char:"",fitzpatrick_scale:!1,category:"people"},stuck_out_tongue:{keywords:["face","prank","childish","playful","mischievous","smile","tongue"],char:"",fitzpatrick_scale:!1,category:"people"},money_mouth_face:{keywords:["face","rich","dollar","money"],char:"",fitzpatrick_scale:!1,category:"people"},nerd_face:{keywords:["face","nerdy","geek","dork"],char:"",fitzpatrick_scale:!1,category:"people"},sunglasses:{keywords:["face","cool","smile","summer","beach","sunglass"],char:"",fitzpatrick_scale:!1,category:"people"},star_struck:{keywords:["face","smile","starry","eyes","grinning"],char:"",fitzpatrick_scale:!1,category:"people"},clown_face:{keywords:["face"],char:"",fitzpatrick_scale:!1,category:"people"},cowboy_hat_face:{keywords:["face","cowgirl","hat"],char:"",fitzpatrick_scale:!1,category:"people"},hugs:{keywords:["face","smile","hug"],char:"",fitzpatrick_scale:!1,category:"people"},smirk:{keywords:["face","smile","mean","prank","smug","sarcasm"],char:"",fitzpatrick_scale:!1,category:"people"},no_mouth:{keywords:["face","hellokitty"],char:"",fitzpatrick_scale:!1,category:"people"},neutral_face:{keywords:["indifference","meh",":|","neutral"],char:"",fitzpatrick_scale:!1,category:"people"},expressionless:{keywords:["face","indifferent","-_-","meh","deadpan"],char:"",fitzpatrick_scale:!1,category:"people"},unamused:{keywords:["indifference","bored","straight face","serious","sarcasm","unimpressed","skeptical","dubious","side_eye"],char:"",fitzpatrick_scale:!1,category:"people"},roll_eyes:{keywords:["face","eyeroll","frustrated"],char:"",fitzpatrick_scale:!1,category:"people"},thinking:{keywords:["face","hmmm","think","consider"],char:"",fitzpatrick_scale:!1,category:"people"},lying_face:{keywords:["face","lie","pinocchio"],char:"",fitzpatrick_scale:!1,category:"people"},hand_over_mouth:{keywords:["face","whoops","shock","surprise"],char:"",fitzpatrick_scale:!1,category:"people"},shushing:{keywords:["face","quiet","shhh"],char:"",fitzpatrick_scale:!1,category:"people"},symbols_over_mouth:{keywords:["face","swearing","cursing","cussing","profanity","expletive"],char:"",fitzpatrick_scale:!1,category:"people"},exploding_head:{keywords:["face","shocked","mind","blown"],char:"",fitzpatrick_scale:!1,category:"people"},flushed:{keywords:["face","blush","shy","flattered"],char:"",fitzpatrick_scale:!1,category:"people"},disappointed:{keywords:["face","sad","upset","depressed",":("],char:"",fitzpatrick_scale:!1,category:"people"},worried:{keywords:["face","concern","nervous",":("],char:"",fitzpatrick_scale:!1,category:"people"},angry:{keywords:["mad","face","annoyed","frustrated"],char:"",fitzpatrick_scale:!1,category:"people"},rage:{keywords:["angry","mad","hate","despise"],char:"",fitzpatrick_scale:!1,category:"people"},pensive:{keywords:["face","sad","depressed","upset"],char:"",fitzpatrick_scale:!1,category:"people"},confused:{keywords:["face","indifference","huh","weird","hmmm",":/"],char:"",fitzpatrick_scale:!1,category:"people"},slightly_frowning_face:{keywords:["face","frowning","disappointed","sad","upset"],char:"",fitzpatrick_scale:!1,category:"people"},frowning_face:{keywords:["face","sad","upset","frown"],char:"",fitzpatrick_scale:!1,category:"people"},persevere:{keywords:["face","sick","no","upset","oops"],char:"",fitzpatrick_scale:!1,category:"people"},confounded:{keywords:["face","confused","sick","unwell","oops",":S"],char:"",fitzpatrick_scale:!1,category:"people"},tired_face:{keywords:["sick","whine","upset","frustrated"],char:"",fitzpatrick_scale:!1,category:"people"},weary:{keywords:["face","tired","sleepy","sad","frustrated","upset"],char:"",fitzpatrick_scale:!1,category:"people"},pleading:{keywords:["face","begging","mercy"],char:"",fitzpatrick_scale:!1,category:"people"},triumph:{keywords:["face","gas","phew","proud","pride"],char:"",fitzpatrick_scale:!1,category:"people"},open_mouth:{keywords:["face","surprise","impressed","wow","whoa",":O"],char:"",fitzpatrick_scale:!1,category:"people"},scream:{keywords:["face","munch","scared","omg"],char:"",fitzpatrick_scale:!1,category:"people"},fearful:{keywords:["face","scared","terrified","nervous","oops","huh"],char:"",fitzpatrick_scale:!1,category:"people"},cold_sweat:{keywords:["face","nervous","sweat"],char:"",fitzpatrick_scale:!1,category:"people"},hushed:{keywords:["face","woo","shh"],char:"",fitzpatrick_scale:!1,category:"people"},frowning:{keywords:["face","aw","what"],char:"",fitzpatrick_scale:!1,category:"people"},anguished:{keywords:["face","stunned","nervous"],char:"",fitzpatrick_scale:!1,category:"people"},cry:{keywords:["face","tears","sad","depressed","upset",":'("],char:"",fitzpatrick_scale:!1,category:"people"},disappointed_relieved:{keywords:["face","phew","sweat","nervous"],char:"",fitzpatrick_scale:!1,category:"people"},drooling_face:{keywords:["face"],char:"",fitzpatrick_scale:!1,category:"people"},sleepy:{keywords:["face","tired","rest","nap"],char:"",fitzpatrick_scale:!1,category:"people"},sweat:{keywords:["face","hot","sad","tired","exercise"],char:"",fitzpatrick_scale:!1,category:"people"},hot:{keywords:["face","feverish","heat","red","sweating"],char:"",fitzpatrick_scale:!1,category:"people"},cold:{keywords:["face","blue","freezing","frozen","frostbite","icicles"],char:"",fitzpatrick_scale:!1,category:"people"},sob:{keywords:["face","cry","tears","sad","upset","depressed"],char:"",fitzpatrick_scale:!1,category:"people"},dizzy_face:{keywords:["spent","unconscious","xox","dizzy"],char:"",fitzpatrick_scale:!1,category:"people"},astonished:{keywords:["face","xox","surprised","poisoned"],char:"",fitzpatrick_scale:!1,category:"people"},zipper_mouth_face:{keywords:["face","sealed","zipper","secret"],char:"",fitzpatrick_scale:!1,category:"people"},nauseated_face:{keywords:["face","vomit","gross","green","sick","throw up","ill"],char:"",fitzpatrick_scale:!1,category:"people"},sneezing_face:{keywords:["face","gesundheit","sneeze","sick","allergy"],char:"",fitzpatrick_scale:!1,category:"people"},vomiting:{keywords:["face","sick"],char:"",fitzpatrick_scale:!1,category:"people"},mask:{keywords:["face","sick","ill","disease"],char:"",fitzpatrick_scale:!1,category:"people"},face_with_thermometer:{keywords:["sick","temperature","thermometer","cold","fever"],char:"",fitzpatrick_scale:!1,category:"people"},face_with_head_bandage:{keywords:["injured","clumsy","bandage","hurt"],char:"",fitzpatrick_scale:!1,category:"people"},woozy:{keywords:["face","dizzy","intoxicated","tipsy","wavy"],char:"",fitzpatrick_scale:!1,category:"people"},sleeping:{keywords:["face","tired","sleepy","night","zzz"],char:"",fitzpatrick_scale:!1,category:"people"},zzz:{keywords:["sleepy","tired","dream"],char:"",fitzpatrick_scale:!1,category:"people"},poop:{keywords:["hankey","shitface","fail","turd","shit"],char:"",fitzpatrick_scale:!1,category:"people"},smiling_imp:{keywords:["devil","horns"],char:"",fitzpatrick_scale:!1,category:"people"},imp:{keywords:["devil","angry","horns"],char:"",fitzpatrick_scale:!1,category:"people"},japanese_ogre:{keywords:["monster","red","mask","halloween","scary","creepy","devil","demon","japanese","ogre"],char:"",fitzpatrick_scale:!1,category:"people"},japanese_goblin:{keywords:["red","evil","mask","monster","scary","creepy","japanese","goblin"],char:"",fitzpatrick_scale:!1,category:"people"},skull:{keywords:["dead","skeleton","creepy","death"],char:"",fitzpatrick_scale:!1,category:"people"},ghost:{keywords:["halloween","spooky","scary"],char:"",fitzpatrick_scale:!1,category:"people"},alien:{keywords:["UFO","paul","weird","outer_space"],char:"",fitzpatrick_scale:!1,category:"people"},robot:{keywords:["computer","machine","bot"],char:"",fitzpatrick_scale:!1,category:"people"},smiley_cat:{keywords:["animal","cats","happy","smile"],char:"",fitzpatrick_scale:!1,category:"people"},smile_cat:{keywords:["animal","cats","smile"],char:"",fitzpatrick_scale:!1,category:"people"},joy_cat:{keywords:["animal","cats","haha","happy","tears"],char:"",fitzpatrick_scale:!1,category:"people"},heart_eyes_cat:{keywords:["animal","love","like","affection","cats","valentines","heart"],char:"",fitzpatrick_scale:!1,category:"people"},smirk_cat:{keywords:["animal","cats","smirk"],char:"",fitzpatrick_scale:!1,category:"people"},kissing_cat:{keywords:["animal","cats","kiss"],char:"",fitzpatrick_scale:!1,category:"people"},scream_cat:{keywords:["animal","cats","munch","scared","scream"],char:"",fitzpatrick_scale:!1,category:"people"},crying_cat_face:{keywords:["animal","tears","weep","sad","cats","upset","cry"],char:"",fitzpatrick_scale:!1,category:"people"},pouting_cat:{keywords:["animal","cats"],char:"",fitzpatrick_scale:!1,category:"people"},palms_up:{keywords:["hands","gesture","cupped","prayer"],char:"",fitzpatrick_scale:!0,category:"people"},raised_hands:{keywords:["gesture","hooray","yea","celebration","hands"],char:"",fitzpatrick_scale:!0,category:"people"},clap:{keywords:["hands","praise","applause","congrats","yay"],char:"",fitzpatrick_scale:!0,category:"people"},wave:{keywords:["hands","gesture","goodbye","solong","farewell","hello","hi","palm"],char:"",fitzpatrick_scale:!0,category:"people"},call_me_hand:{keywords:["hands","gesture"],char:"",fitzpatrick_scale:!0,category:"people"},"+1":{keywords:["thumbsup","yes","awesome","good","agree","accept","cool","hand","like"],char:"",fitzpatrick_scale:!0,category:"people"},"-1":{keywords:["thumbsdown","no","dislike","hand"],char:"",fitzpatrick_scale:!0,category:"people"},facepunch:{keywords:["angry","violence","fist","hit","attack","hand"],char:"",fitzpatrick_scale:!0,category:"people"},fist:{keywords:["fingers","hand","grasp"],char:"",fitzpatrick_scale:!0,category:"people"},fist_left:{keywords:["hand","fistbump"],char:"",fitzpatrick_scale:!0,category:"people"},fist_right:{keywords:["hand","fistbump"],char:"",fitzpatrick_scale:!0,category:"people"},v:{keywords:["fingers","ohyeah","hand","peace","victory","two"],char:"",fitzpatrick_scale:!0,category:"people"},ok_hand:{keywords:["fingers","limbs","perfect","ok","okay"],char:"",fitzpatrick_scale:!0,category:"people"},raised_hand:{keywords:["fingers","stop","highfive","palm","ban"],char:"",fitzpatrick_scale:!0,category:"people"},raised_back_of_hand:{keywords:["fingers","raised","backhand"],char:"",fitzpatrick_scale:!0,category:"people"},open_hands:{keywords:["fingers","butterfly","hands","open"],char:"",fitzpatrick_scale:!0,category:"people"},muscle:{keywords:["arm","flex","hand","summer","strong","biceps"],char:"",fitzpatrick_scale:!0,category:"people"},pray:{keywords:["please","hope","wish","namaste","highfive"],char:"",fitzpatrick_scale:!0,category:"people"},foot:{keywords:["kick","stomp"],char:"",fitzpatrick_scale:!0,category:"people"},leg:{keywords:["kick","limb"],char:"",fitzpatrick_scale:!0,category:"people"},handshake:{keywords:["agreement","shake"],char:"",fitzpatrick_scale:!1,category:"people"},point_up:{keywords:["hand","fingers","direction","up"],char:"",fitzpatrick_scale:!0,category:"people"},point_up_2:{keywords:["fingers","hand","direction","up"],char:"",fitzpatrick_scale:!0,category:"people"},point_down:{keywords:["fingers","hand","direction","down"],char:"",fitzpatrick_scale:!0,category:"people"},point_left:{keywords:["direction","fingers","hand","left"],char:"",fitzpatrick_scale:!0,category:"people"},point_right:{keywords:["fingers","hand","direction","right"],char:"",fitzpatrick_scale:!0,category:"people"},fu:{keywords:["hand","fingers","rude","middle","flipping"],char:"",fitzpatrick_scale:!0,category:"people"},raised_hand_with_fingers_splayed:{keywords:["hand","fingers","palm"],char:"",fitzpatrick_scale:!0,category:"people"},love_you:{keywords:["hand","fingers","gesture"],char:"",fitzpatrick_scale:!0,category:"people"},metal:{keywords:["hand","fingers","evil_eye","sign_of_horns","rock_on"],char:"",fitzpatrick_scale:!0,category:"people"},crossed_fingers:{keywords:["good","lucky"],char:"",fitzpatrick_scale:!0,category:"people"},vulcan_salute:{keywords:["hand","fingers","spock","star trek"],char:"",fitzpatrick_scale:!0,category:"people"},writing_hand:{keywords:["lower_left_ballpoint_pen","stationery","write","compose"],char:"",fitzpatrick_scale:!0,category:"people"},selfie:{keywords:["camera","phone"],char:"",fitzpatrick_scale:!0,category:"people"},nail_care:{keywords:["beauty","manicure","finger","fashion","nail"],char:"",fitzpatrick_scale:!0,category:"people"},lips:{keywords:["mouth","kiss"],char:"",fitzpatrick_scale:!1,category:"people"},tooth:{keywords:["teeth","dentist"],char:"",fitzpatrick_scale:!1,category:"people"},tongue:{keywords:["mouth","playful"],char:"",fitzpatrick_scale:!1,category:"people"},ear:{keywords:["face","hear","sound","listen"],char:"",fitzpatrick_scale:!0,category:"people"},nose:{keywords:["smell","sniff"],char:"",fitzpatrick_scale:!0,category:"people"},eye:{keywords:["face","look","see","watch","stare"],char:"",fitzpatrick_scale:!1,category:"people"},eyes:{keywords:["look","watch","stalk","peek","see"],char:"",fitzpatrick_scale:!1,category:"people"},brain:{keywords:["smart","intelligent"],char:"",fitzpatrick_scale:!1,category:"people"},bust_in_silhouette:{keywords:["user","person","human"],char:"",fitzpatrick_scale:!1,category:"people"},busts_in_silhouette:{keywords:["user","person","human","group","team"],char:"",fitzpatrick_scale:!1,category:"people"},speaking_head:{keywords:["user","person","human","sing","say","talk"],char:"",fitzpatrick_scale:!1,category:"people"},baby:{keywords:["child","boy","girl","toddler"],char:"",fitzpatrick_scale:!0,category:"people"},child:{keywords:["gender-neutral","young"],char:"",fitzpatrick_scale:!0,category:"people"},boy:{keywords:["man","male","guy","teenager"],char:"",fitzpatrick_scale:!0,category:"people"},girl:{keywords:["female","woman","teenager"],char:"",fitzpatrick_scale:!0,category:"people"},adult:{keywords:["gender-neutral","person"],char:"",fitzpatrick_scale:!0,category:"people"},man:{keywords:["mustache","father","dad","guy","classy","sir","moustache"],char:"",fitzpatrick_scale:!0,category:"people"},woman:{keywords:["female","girls","lady"],char:"",fitzpatrick_scale:!0,category:"people"},blonde_woman:{keywords:["woman","female","girl","blonde","person"],char:"",fitzpatrick_scale:!0,category:"people"},blonde_man:{keywords:["man","male","boy","blonde","guy","person"],char:"",fitzpatrick_scale:!0,category:"people"},bearded_person:{keywords:["person","bewhiskered"],char:"",fitzpatrick_scale:!0,category:"people"},older_adult:{keywords:["human","elder","senior","gender-neutral"],char:"",fitzpatrick_scale:!0,category:"people"},older_man:{keywords:["human","male","men","old","elder","senior"],char:"",fitzpatrick_scale:!0,category:"people"},older_woman:{keywords:["human","female","women","lady","old","elder","senior"],char:"",fitzpatrick_scale:!0,category:"people"},man_with_gua_pi_mao:{keywords:["male","boy","chinese"],char:"",fitzpatrick_scale:!0,category:"people"},woman_with_headscarf:{keywords:["female","hijab","mantilla","tichel"],char:"",fitzpatrick_scale:!0,category:"people"},woman_with_turban:{keywords:["female","indian","hinduism","arabs","woman"],char:"",fitzpatrick_scale:!0,category:"people"},man_with_turban:{keywords:["male","indian","hinduism","arabs"],char:"",fitzpatrick_scale:!0,category:"people"},policewoman:{keywords:["woman","police","law","legal","enforcement","arrest","911","female"],char:"",fitzpatrick_scale:!0,category:"people"},policeman:{keywords:["man","police","law","legal","enforcement","arrest","911"],char:"",fitzpatrick_scale:!0,category:"people"},construction_worker_woman:{keywords:["female","human","wip","build","construction","worker","labor","woman"],char:"",fitzpatrick_scale:!0,category:"people"},construction_worker_man:{keywords:["male","human","wip","guy","build","construction","worker","labor"],char:"",fitzpatrick_scale:!0,category:"people"},guardswoman:{keywords:["uk","gb","british","female","royal","woman"],char:"",fitzpatrick_scale:!0,category:"people"},guardsman:{keywords:["uk","gb","british","male","guy","royal"],char:"",fitzpatrick_scale:!0,category:"people"},female_detective:{keywords:["human","spy","detective","female","woman"],char:"",fitzpatrick_scale:!0,category:"people"},male_detective:{keywords:["human","spy","detective"],char:"",fitzpatrick_scale:!0,category:"people"},woman_health_worker:{keywords:["doctor","nurse","therapist","healthcare","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_health_worker:{keywords:["doctor","nurse","therapist","healthcare","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_farmer:{keywords:["rancher","gardener","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_farmer:{keywords:["rancher","gardener","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_cook:{keywords:["chef","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_cook:{keywords:["chef","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_student:{keywords:["graduate","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_student:{keywords:["graduate","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_singer:{keywords:["rockstar","entertainer","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_singer:{keywords:["rockstar","entertainer","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_teacher:{keywords:["instructor","professor","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_teacher:{keywords:["instructor","professor","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_factory_worker:{keywords:["assembly","industrial","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_factory_worker:{keywords:["assembly","industrial","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_technologist:{keywords:["coder","developer","engineer","programmer","software","woman","human","laptop","computer"],char:"",fitzpatrick_scale:!0,category:"people"},man_technologist:{keywords:["coder","developer","engineer","programmer","software","man","human","laptop","computer"],char:"",fitzpatrick_scale:!0,category:"people"},woman_office_worker:{keywords:["business","manager","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_office_worker:{keywords:["business","manager","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_mechanic:{keywords:["plumber","woman","human","wrench"],char:"",fitzpatrick_scale:!0,category:"people"},man_mechanic:{keywords:["plumber","man","human","wrench"],char:"",fitzpatrick_scale:!0,category:"people"},woman_scientist:{keywords:["biologist","chemist","engineer","physicist","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_scientist:{keywords:["biologist","chemist","engineer","physicist","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_artist:{keywords:["painter","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_artist:{keywords:["painter","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_firefighter:{keywords:["fireman","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_firefighter:{keywords:["fireman","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_pilot:{keywords:["aviator","plane","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_pilot:{keywords:["aviator","plane","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_astronaut:{keywords:["space","rocket","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_astronaut:{keywords:["space","rocket","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_judge:{keywords:["justice","court","woman","human"],char:"",fitzpatrick_scale:!0,category:"people"},man_judge:{keywords:["justice","court","man","human"],char:"",fitzpatrick_scale:!0,category:"people"},woman_superhero:{keywords:["woman","female","good","heroine","superpowers"],char:"",fitzpatrick_scale:!0,category:"people"},man_superhero:{keywords:["man","male","good","hero","superpowers"],char:"",fitzpatrick_scale:!0,category:"people"},woman_supervillain:{keywords:["woman","female","evil","bad","criminal","heroine","superpowers"],char:"",fitzpatrick_scale:!0,category:"people"},man_supervillain:{keywords:["man","male","evil","bad","criminal","hero","superpowers"],char:"",fitzpatrick_scale:!0,category:"people"},mrs_claus:{keywords:["woman","female","xmas","mother christmas"],char:"",fitzpatrick_scale:!0,category:"people"},santa:{keywords:["festival","man","male","xmas","father christmas"],char:"",fitzpatrick_scale:!0,category:"people"},sorceress:{keywords:["woman","female","mage","witch"],char:"",fitzpatrick_scale:!0,category:"people"},wizard:{keywords:["man","male","mage","sorcerer"],char:"",fitzpatrick_scale:!0,category:"people"},woman_elf:{keywords:["woman","female"],char:"",fitzpatrick_scale:!0,category:"people"},man_elf:{keywords:["man","male"],char:"",fitzpatrick_scale:!0,category:"people"},woman_vampire:{keywords:["woman","female"],char:"",fitzpatrick_scale:!0,category:"people"},man_vampire:{keywords:["man","male","dracula"],char:"",fitzpatrick_scale:!0,category:"people"},woman_zombie:{keywords:["woman","female","undead","walking dead"],char:"",fitzpatrick_scale:!1,category:"people"},man_zombie:{keywords:["man","male","dracula","undead","walking dead"],char:"",fitzpatrick_scale:!1,category:"people"},woman_genie:{keywords:["woman","female"],char:"",fitzpatrick_scale:!1,category:"people"},man_genie:{keywords:["man","male"],char:"",fitzpatrick_scale:!1,category:"people"},mermaid:{keywords:["woman","female","merwoman","ariel"],char:"",fitzpatrick_scale:!0,category:"people"},merman:{keywords:["man","male","triton"],char:"",fitzpatrick_scale:!0,category:"people"},woman_fairy:{keywords:["woman","female"],char:"",fitzpatrick_scale:!0,category:"people"},man_fairy:{keywords:["man","male"],char:"",fitzpatrick_scale:!0,category:"people"},angel:{keywords:["heaven","wings","halo"],char:"",fitzpatrick_scale:!0,category:"people"},pregnant_woman:{keywords:["baby"],char:"",fitzpatrick_scale:!0,category:"people"},breastfeeding:{keywords:["nursing","baby"],char:"",fitzpatrick_scale:!0,category:"people"},princess:{keywords:["girl","woman","female","blond","crown","royal","queen"],char:"",fitzpatrick_scale:!0,category:"people"},prince:{keywords:["boy","man","male","crown","royal","king"],char:"",fitzpatrick_scale:!0,category:"people"},bride_with_veil:{keywords:["couple","marriage","wedding","woman","bride"],char:"",fitzpatrick_scale:!0,category:"people"},man_in_tuxedo:{keywords:["couple","marriage","wedding","groom"],char:"",fitzpatrick_scale:!0,category:"people"},running_woman:{keywords:["woman","walking","exercise","race","running","female"],char:"",fitzpatrick_scale:!0,category:"people"},running_man:{keywords:["man","walking","exercise","race","running"],char:"",fitzpatrick_scale:!0,category:"people"},walking_woman:{keywords:["human","feet","steps","woman","female"],char:"",fitzpatrick_scale:!0,category:"people"},walking_man:{keywords:["human","feet","steps"],char:"",fitzpatrick_scale:!0,category:"people"},dancer:{keywords:["female","girl","woman","fun"],char:"",fitzpatrick_scale:!0,category:"people"},man_dancing:{keywords:["male","boy","fun","dancer"],char:"",fitzpatrick_scale:!0,category:"people"},dancing_women:{keywords:["female","bunny","women","girls"],char:"",fitzpatrick_scale:!1,category:"people"},dancing_men:{keywords:["male","bunny","men","boys"],char:"",fitzpatrick_scale:!1,category:"people"},couple:{keywords:["pair","people","human","love","date","dating","like","affection","valentines","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},two_men_holding_hands:{keywords:["pair","couple","love","like","bromance","friendship","people","human"],char:"",fitzpatrick_scale:!1,category:"people"},two_women_holding_hands:{keywords:["pair","friendship","couple","love","like","female","people","human"],char:"",fitzpatrick_scale:!1,category:"people"},bowing_woman:{keywords:["woman","female","girl"],char:"",fitzpatrick_scale:!0,category:"people"},bowing_man:{keywords:["man","male","boy"],char:"",fitzpatrick_scale:!0,category:"people"},man_facepalming:{keywords:["man","male","boy","disbelief"],char:"",fitzpatrick_scale:!0,category:"people"},woman_facepalming:{keywords:["woman","female","girl","disbelief"],char:"",fitzpatrick_scale:!0,category:"people"},woman_shrugging:{keywords:["woman","female","girl","confused","indifferent","doubt"],char:"",fitzpatrick_scale:!0,category:"people"},man_shrugging:{keywords:["man","male","boy","confused","indifferent","doubt"],char:"",fitzpatrick_scale:!0,category:"people"},tipping_hand_woman:{keywords:["female","girl","woman","human","information"],char:"",fitzpatrick_scale:!0,category:"people"},tipping_hand_man:{keywords:["male","boy","man","human","information"],char:"",fitzpatrick_scale:!0,category:"people"},no_good_woman:{keywords:["female","girl","woman","nope"],char:"",fitzpatrick_scale:!0,category:"people"},no_good_man:{keywords:["male","boy","man","nope"],char:"",fitzpatrick_scale:!0,category:"people"},ok_woman:{keywords:["women","girl","female","pink","human","woman"],char:"",fitzpatrick_scale:!0,category:"people"},ok_man:{keywords:["men","boy","male","blue","human","man"],char:"",fitzpatrick_scale:!0,category:"people"},raising_hand_woman:{keywords:["female","girl","woman"],char:"",fitzpatrick_scale:!0,category:"people"},raising_hand_man:{keywords:["male","boy","man"],char:"",fitzpatrick_scale:!0,category:"people"},pouting_woman:{keywords:["female","girl","woman"],char:"",fitzpatrick_scale:!0,category:"people"},pouting_man:{keywords:["male","boy","man"],char:"",fitzpatrick_scale:!0,category:"people"},frowning_woman:{keywords:["female","girl","woman","sad","depressed","discouraged","unhappy"],char:"",fitzpatrick_scale:!0,category:"people"},frowning_man:{keywords:["male","boy","man","sad","depressed","discouraged","unhappy"],char:"",fitzpatrick_scale:!0,category:"people"},haircut_woman:{keywords:["female","girl","woman"],char:"",fitzpatrick_scale:!0,category:"people"},haircut_man:{keywords:["male","boy","man"],char:"",fitzpatrick_scale:!0,category:"people"},massage_woman:{keywords:["female","girl","woman","head"],char:"",fitzpatrick_scale:!0,category:"people"},massage_man:{keywords:["male","boy","man","head"],char:"",fitzpatrick_scale:!0,category:"people"},woman_in_steamy_room:{keywords:["female","woman","spa","steamroom","sauna"],char:"",fitzpatrick_scale:!0,category:"people"},man_in_steamy_room:{keywords:["male","man","spa","steamroom","sauna"],char:"",fitzpatrick_scale:!0,category:"people"},couple_with_heart_woman_man:{keywords:["pair","love","like","affection","human","dating","valentines","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},couple_with_heart_woman_woman:{keywords:["pair","love","like","affection","human","dating","valentines","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},couple_with_heart_man_man:{keywords:["pair","love","like","affection","human","dating","valentines","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},couplekiss_man_woman:{keywords:["pair","valentines","love","like","dating","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},couplekiss_woman_woman:{keywords:["pair","valentines","love","like","dating","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},couplekiss_man_man:{keywords:["pair","valentines","love","like","dating","marriage"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_woman_boy:{keywords:["home","parents","child","mom","dad","father","mother","people","human"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_woman_girl:{keywords:["home","parents","people","human","child"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_woman_girl_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_woman_boy_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_woman_girl_girl:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_woman_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_woman_girl:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_woman_girl_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_woman_boy_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_woman_girl_girl:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_man_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_man_girl:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_man_girl_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_man_boy_boy:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_man_girl_girl:{keywords:["home","parents","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_boy:{keywords:["home","parent","people","human","child"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_girl:{keywords:["home","parent","people","human","child"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_girl_boy:{keywords:["home","parent","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_boy_boy:{keywords:["home","parent","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_woman_girl_girl:{keywords:["home","parent","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_boy:{keywords:["home","parent","people","human","child"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_girl:{keywords:["home","parent","people","human","child"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_girl_boy:{keywords:["home","parent","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_boy_boy:{keywords:["home","parent","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},family_man_girl_girl:{keywords:["home","parent","people","human","children"],char:"",fitzpatrick_scale:!1,category:"people"},yarn:{keywords:["ball","crochet","knit"],char:"",fitzpatrick_scale:!1,category:"people"},thread:{keywords:["needle","sewing","spool","string"],char:"",fitzpatrick_scale:!1,category:"people"},coat:{keywords:["jacket"],char:"",fitzpatrick_scale:!1,category:"people"},labcoat:{keywords:["doctor","experiment","scientist","chemist"],char:"",fitzpatrick_scale:!1,category:"people"},womans_clothes:{keywords:["fashion","shopping_bags","female"],char:"",fitzpatrick_scale:!1,category:"people"},tshirt:{keywords:["fashion","cloth","casual","shirt","tee"],char:"",fitzpatrick_scale:!1,category:"people"},jeans:{keywords:["fashion","shopping"],char:"",fitzpatrick_scale:!1,category:"people"},necktie:{keywords:["shirt","suitup","formal","fashion","cloth","business"],char:"",fitzpatrick_scale:!1,category:"people"},dress:{keywords:["clothes","fashion","shopping"],char:"",fitzpatrick_scale:!1,category:"people"},bikini:{keywords:["swimming","female","woman","girl","fashion","beach","summer"],char:"",fitzpatrick_scale:!1,category:"people"},kimono:{keywords:["dress","fashion","women","female","japanese"],char:"",fitzpatrick_scale:!1,category:"people"},lipstick:{keywords:["female","girl","fashion","woman"],char:"",fitzpatrick_scale:!1,category:"people"},kiss:{keywords:["face","lips","love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"people"},footprints:{keywords:["feet","tracking","walking","beach"],char:"",fitzpatrick_scale:!1,category:"people"},flat_shoe:{keywords:["ballet","slip-on","slipper"],char:"",fitzpatrick_scale:!1,category:"people"},high_heel:{keywords:["fashion","shoes","female","pumps","stiletto"],char:"",fitzpatrick_scale:!1,category:"people"},sandal:{keywords:["shoes","fashion","flip flops"],char:"",fitzpatrick_scale:!1,category:"people"},boot:{keywords:["shoes","fashion"],char:"",fitzpatrick_scale:!1,category:"people"},mans_shoe:{keywords:["fashion","male"],char:"",fitzpatrick_scale:!1,category:"people"},athletic_shoe:{keywords:["shoes","sports","sneakers"],char:"",fitzpatrick_scale:!1,category:"people"},hiking_boot:{keywords:["backpacking","camping","hiking"],char:"",fitzpatrick_scale:!1,category:"people"},socks:{keywords:["stockings","clothes"],char:"",fitzpatrick_scale:!1,category:"people"},gloves:{keywords:["hands","winter","clothes"],char:"",fitzpatrick_scale:!1,category:"people"},scarf:{keywords:["neck","winter","clothes"],char:"",fitzpatrick_scale:!1,category:"people"},womans_hat:{keywords:["fashion","accessories","female","lady","spring"],char:"",fitzpatrick_scale:!1,category:"people"},tophat:{keywords:["magic","gentleman","classy","circus"],char:"",fitzpatrick_scale:!1,category:"people"},billed_hat:{keywords:["cap","baseball"],char:"",fitzpatrick_scale:!1,category:"people"},rescue_worker_helmet:{keywords:["construction","build"],char:"",fitzpatrick_scale:!1,category:"people"},mortar_board:{keywords:["school","college","degree","university","graduation","cap","hat","legal","learn","education"],char:"",fitzpatrick_scale:!1,category:"people"},crown:{keywords:["king","kod","leader","royalty","lord"],char:"",fitzpatrick_scale:!1,category:"people"},school_satchel:{keywords:["student","education","bag","backpack"],char:"",fitzpatrick_scale:!1,category:"people"},luggage:{keywords:["packing","travel"],char:"",fitzpatrick_scale:!1,category:"people"},pouch:{keywords:["bag","accessories","shopping"],char:"",fitzpatrick_scale:!1,category:"people"},purse:{keywords:["fashion","accessories","money","sales","shopping"],char:"",fitzpatrick_scale:!1,category:"people"},handbag:{keywords:["fashion","accessory","accessories","shopping"],char:"",fitzpatrick_scale:!1,category:"people"},briefcase:{keywords:["business","documents","work","law","legal","job","career"],char:"",fitzpatrick_scale:!1,category:"people"},eyeglasses:{keywords:["fashion","accessories","eyesight","nerdy","dork","geek"],char:"",fitzpatrick_scale:!1,category:"people"},dark_sunglasses:{keywords:["face","cool","accessories"],char:"",fitzpatrick_scale:!1,category:"people"},goggles:{keywords:["eyes","protection","safety"],char:"",fitzpatrick_scale:!1,category:"people"},ring:{keywords:["wedding","propose","marriage","valentines","diamond","fashion","jewelry","gem","engagement"],char:"",fitzpatrick_scale:!1,category:"people"},closed_umbrella:{keywords:["weather","rain","drizzle"],char:"",fitzpatrick_scale:!1,category:"people"},dog:{keywords:["animal","friend","nature","woof","puppy","pet","faithful"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cat:{keywords:["animal","meow","nature","pet","kitten"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},mouse:{keywords:["animal","nature","cheese_wedge","rodent"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hamster:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},rabbit:{keywords:["animal","nature","pet","spring","magic","bunny"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},fox_face:{keywords:["animal","nature","face"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},bear:{keywords:["animal","nature","wild"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},panda_face:{keywords:["animal","nature","panda"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},koala:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},tiger:{keywords:["animal","cat","danger","wild","nature","roar"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},lion:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cow:{keywords:["beef","ox","animal","nature","moo","milk"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},pig:{keywords:["animal","oink","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},pig_nose:{keywords:["animal","oink"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},frog:{keywords:["animal","nature","croak","toad"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},squid:{keywords:["animal","nature","ocean","sea"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},octopus:{keywords:["animal","creature","ocean","sea","nature","beach"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},shrimp:{keywords:["animal","ocean","nature","seafood"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},monkey_face:{keywords:["animal","nature","circus"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},gorilla:{keywords:["animal","nature","circus"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},see_no_evil:{keywords:["monkey","animal","nature","haha"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hear_no_evil:{keywords:["animal","monkey","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},speak_no_evil:{keywords:["monkey","animal","nature","omg"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},monkey:{keywords:["animal","nature","banana","circus"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},chicken:{keywords:["animal","cluck","nature","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},penguin:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},bird:{keywords:["animal","nature","fly","tweet","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},baby_chick:{keywords:["animal","chicken","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hatching_chick:{keywords:["animal","chicken","egg","born","baby","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hatched_chick:{keywords:["animal","chicken","baby","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},duck:{keywords:["animal","nature","bird","mallard"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},eagle:{keywords:["animal","nature","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},owl:{keywords:["animal","nature","bird","hoot"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},bat:{keywords:["animal","nature","blind","vampire"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},wolf:{keywords:["animal","nature","wild"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},boar:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},horse:{keywords:["animal","brown","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},unicorn:{keywords:["animal","nature","mystical"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},honeybee:{keywords:["animal","insect","nature","bug","spring","honey"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},bug:{keywords:["animal","insect","nature","worm"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},butterfly:{keywords:["animal","insect","nature","caterpillar"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},snail:{keywords:["slow","animal","shell"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},beetle:{keywords:["animal","insect","nature","ladybug"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},ant:{keywords:["animal","insect","nature","bug"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},grasshopper:{keywords:["animal","cricket","chirp"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},spider:{keywords:["animal","arachnid"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},scorpion:{keywords:["animal","arachnid"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},crab:{keywords:["animal","crustacean"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},snake:{keywords:["animal","evil","nature","hiss","python"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},lizard:{keywords:["animal","nature","reptile"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},"t-rex":{keywords:["animal","nature","dinosaur","tyrannosaurus","extinct"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sauropod:{keywords:["animal","nature","dinosaur","brachiosaurus","brontosaurus","diplodocus","extinct"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},turtle:{keywords:["animal","slow","nature","tortoise"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},tropical_fish:{keywords:["animal","swim","ocean","beach","nemo"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},fish:{keywords:["animal","food","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},blowfish:{keywords:["animal","nature","food","sea","ocean"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dolphin:{keywords:["animal","nature","fish","sea","ocean","flipper","fins","beach"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},shark:{keywords:["animal","nature","fish","sea","ocean","jaws","fins","beach"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},whale:{keywords:["animal","nature","sea","ocean"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},whale2:{keywords:["animal","nature","sea","ocean"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},crocodile:{keywords:["animal","nature","reptile","lizard","alligator"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},leopard:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},zebra:{keywords:["animal","nature","stripes","safari"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},tiger2:{keywords:["animal","nature","roar"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},water_buffalo:{keywords:["animal","nature","ox","cow"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},ox:{keywords:["animal","cow","beef"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cow2:{keywords:["beef","ox","animal","nature","moo","milk"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},deer:{keywords:["animal","nature","horns","venison"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dromedary_camel:{keywords:["animal","hot","desert","hump"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},camel:{keywords:["animal","nature","hot","desert","hump"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},giraffe:{keywords:["animal","nature","spots","safari"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},elephant:{keywords:["animal","nature","nose","th","circus"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},rhinoceros:{keywords:["animal","nature","horn"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},goat:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},ram:{keywords:["animal","sheep","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sheep:{keywords:["animal","nature","wool","shipit"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},racehorse:{keywords:["animal","gamble","luck"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},pig2:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},rat:{keywords:["animal","mouse","rodent"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},mouse2:{keywords:["animal","nature","rodent"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},rooster:{keywords:["animal","nature","chicken"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},turkey:{keywords:["animal","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dove:{keywords:["animal","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dog2:{keywords:["animal","nature","friend","doge","pet","faithful"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},poodle:{keywords:["dog","animal","101","nature","pet"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cat2:{keywords:["animal","meow","pet","cats"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},rabbit2:{keywords:["animal","nature","pet","magic","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},chipmunk:{keywords:["animal","nature","rodent","squirrel"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hedgehog:{keywords:["animal","nature","spiny"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},raccoon:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},llama:{keywords:["animal","nature","alpaca"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hippopotamus:{keywords:["animal","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},kangaroo:{keywords:["animal","nature","australia","joey","hop","marsupial"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},badger:{keywords:["animal","nature","honey"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},swan:{keywords:["animal","nature","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},peacock:{keywords:["animal","nature","peahen","bird"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},parrot:{keywords:["animal","nature","bird","pirate","talk"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},lobster:{keywords:["animal","nature","bisque","claws","seafood"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},mosquito:{keywords:["animal","nature","insect","malaria"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},paw_prints:{keywords:["animal","tracking","footprints","dog","cat","pet","feet"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dragon:{keywords:["animal","myth","nature","chinese","green"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dragon_face:{keywords:["animal","myth","nature","chinese","green"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cactus:{keywords:["vegetable","plant","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},christmas_tree:{keywords:["festival","vacation","december","xmas","celebration"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},evergreen_tree:{keywords:["plant","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},deciduous_tree:{keywords:["plant","nature"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},palm_tree:{keywords:["plant","vegetable","nature","summer","beach","mojito","tropical"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},seedling:{keywords:["plant","nature","grass","lawn","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},herb:{keywords:["vegetable","plant","medicine","weed","grass","lawn"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},shamrock:{keywords:["vegetable","plant","nature","irish","clover"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},four_leaf_clover:{keywords:["vegetable","plant","nature","lucky","irish"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},bamboo:{keywords:["plant","nature","vegetable","panda","pine_decoration"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},tanabata_tree:{keywords:["plant","nature","branch","summer"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},leaves:{keywords:["nature","plant","tree","vegetable","grass","lawn","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},fallen_leaf:{keywords:["nature","plant","vegetable","leaves"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},maple_leaf:{keywords:["nature","plant","vegetable","ca","fall"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},ear_of_rice:{keywords:["nature","plant"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},hibiscus:{keywords:["plant","vegetable","flowers","beach"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sunflower:{keywords:["nature","plant","fall"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},rose:{keywords:["flowers","valentines","love","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},wilted_flower:{keywords:["plant","nature","flower"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},tulip:{keywords:["flowers","plant","nature","summer","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},blossom:{keywords:["nature","flowers","yellow"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cherry_blossom:{keywords:["nature","plant","spring","flower"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},bouquet:{keywords:["flowers","nature","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},mushroom:{keywords:["plant","vegetable"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},chestnut:{keywords:["food","squirrel"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},jack_o_lantern:{keywords:["halloween","light","pumpkin","creepy","fall"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},shell:{keywords:["nature","sea","beach"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},spider_web:{keywords:["animal","insect","arachnid","silk"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},earth_americas:{keywords:["globe","world","USA","international"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},earth_africa:{keywords:["globe","world","international"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},earth_asia:{keywords:["globe","world","east","international"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},full_moon:{keywords:["nature","yellow","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},waning_gibbous_moon:{keywords:["nature","twilight","planet","space","night","evening","sleep","waxing_gibbous_moon"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},last_quarter_moon:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},waning_crescent_moon:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},new_moon:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},waxing_crescent_moon:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},first_quarter_moon:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},waxing_gibbous_moon:{keywords:["nature","night","sky","gray","twilight","planet","space","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},new_moon_with_face:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},full_moon_with_face:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},first_quarter_moon_with_face:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},last_quarter_moon_with_face:{keywords:["nature","twilight","planet","space","night","evening","sleep"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sun_with_face:{keywords:["nature","morning","sky"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},crescent_moon:{keywords:["night","sleep","sky","evening","magic"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},star:{keywords:["night","yellow"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},star2:{keywords:["night","sparkle","awesome","good","magic"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dizzy:{keywords:["star","sparkle","shoot","magic"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sparkles:{keywords:["stars","shine","shiny","cool","awesome","good","magic"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},comet:{keywords:["space"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sunny:{keywords:["weather","nature","brightness","summer","beach","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sun_behind_small_cloud:{keywords:["weather"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},partly_sunny:{keywords:["weather","nature","cloudy","morning","fall","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sun_behind_large_cloud:{keywords:["weather"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sun_behind_rain_cloud:{keywords:["weather"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cloud:{keywords:["weather","sky"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cloud_with_rain:{keywords:["weather"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cloud_with_lightning_and_rain:{keywords:["weather","lightning"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cloud_with_lightning:{keywords:["weather","thunder"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},zap:{keywords:["thunder","weather","lightning bolt","fast"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},fire:{keywords:["hot","cook","flame"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},boom:{keywords:["bomb","explode","explosion","collision","blown"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},snowflake:{keywords:["winter","season","cold","weather","christmas","xmas"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},cloud_with_snow:{keywords:["weather"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},snowman:{keywords:["winter","season","cold","weather","christmas","xmas","frozen","without_snow"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},snowman_with_snow:{keywords:["winter","season","cold","weather","christmas","xmas","frozen"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},wind_face:{keywords:["gust","air"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},dash:{keywords:["wind","air","fast","shoo","fart","smoke","puff"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},tornado:{keywords:["weather","cyclone","twister"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},fog:{keywords:["weather"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},open_umbrella:{keywords:["weather","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},umbrella:{keywords:["rainy","weather","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},droplet:{keywords:["water","drip","faucet","spring"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},sweat_drops:{keywords:["water","drip","oops"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},ocean:{keywords:["sea","water","wave","nature","tsunami","disaster"],char:"",fitzpatrick_scale:!1,category:"animals_and_nature"},green_apple:{keywords:["fruit","nature"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},apple:{keywords:["fruit","mac","school"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},pear:{keywords:["fruit","nature","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},tangerine:{keywords:["food","fruit","nature","orange"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},lemon:{keywords:["fruit","nature"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},banana:{keywords:["fruit","food","monkey"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},watermelon:{keywords:["fruit","food","picnic","summer"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},grapes:{keywords:["fruit","food","wine"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},strawberry:{keywords:["fruit","food","nature"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},melon:{keywords:["fruit","nature","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cherries:{keywords:["food","fruit"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},peach:{keywords:["fruit","nature","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},pineapple:{keywords:["fruit","nature","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},coconut:{keywords:["fruit","nature","food","palm"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},kiwi_fruit:{keywords:["fruit","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},mango:{keywords:["fruit","food","tropical"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},avocado:{keywords:["fruit","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},broccoli:{keywords:["fruit","food","vegetable"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},tomato:{keywords:["fruit","vegetable","nature","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},eggplant:{keywords:["vegetable","nature","food","aubergine"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cucumber:{keywords:["fruit","food","pickle"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},carrot:{keywords:["vegetable","food","orange"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},hot_pepper:{keywords:["food","spicy","chilli","chili"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},potato:{keywords:["food","tuber","vegatable","starch"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},corn:{keywords:["food","vegetable","plant"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},leafy_greens:{keywords:["food","vegetable","plant","bok choy","cabbage","kale","lettuce"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},sweet_potato:{keywords:["food","nature"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},peanuts:{keywords:["food","nut"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},honey_pot:{keywords:["bees","sweet","kitchen"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},croissant:{keywords:["food","bread","french"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},bread:{keywords:["food","wheat","breakfast","toast"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},baguette_bread:{keywords:["food","bread","french"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},bagel:{keywords:["food","bread","bakery","schmear"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},pretzel:{keywords:["food","bread","twisted"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cheese:{keywords:["food","chadder"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},egg:{keywords:["food","chicken","breakfast"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},bacon:{keywords:["food","breakfast","pork","pig","meat"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},steak:{keywords:["food","cow","meat","cut","chop","lambchop","porkchop"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},pancakes:{keywords:["food","breakfast","flapjacks","hotcakes"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},poultry_leg:{keywords:["food","meat","drumstick","bird","chicken","turkey"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},meat_on_bone:{keywords:["good","food","drumstick"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},bone:{keywords:["skeleton"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},fried_shrimp:{keywords:["food","animal","appetizer","summer"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},fried_egg:{keywords:["food","breakfast","kitchen","egg"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},hamburger:{keywords:["meat","fast food","beef","cheeseburger","mcdonalds","burger king"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},fries:{keywords:["chips","snack","fast food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},stuffed_flatbread:{keywords:["food","flatbread","stuffed","gyro"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},hotdog:{keywords:["food","frankfurter"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},pizza:{keywords:["food","party"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},sandwich:{keywords:["food","lunch","bread"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},canned_food:{keywords:["food","soup"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},spaghetti:{keywords:["food","italian","noodle"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},taco:{keywords:["food","mexican"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},burrito:{keywords:["food","mexican"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},green_salad:{keywords:["food","healthy","lettuce"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},shallow_pan_of_food:{keywords:["food","cooking","casserole","paella"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},ramen:{keywords:["food","japanese","noodle","chopsticks"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},stew:{keywords:["food","meat","soup"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},fish_cake:{keywords:["food","japan","sea","beach","narutomaki","pink","swirl","kamaboko","surimi","ramen"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},fortune_cookie:{keywords:["food","prophecy"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},sushi:{keywords:["food","fish","japanese","rice"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},bento:{keywords:["food","japanese","box"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},curry:{keywords:["food","spicy","hot","indian"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},rice_ball:{keywords:["food","japanese"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},rice:{keywords:["food","china","asian"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},rice_cracker:{keywords:["food","japanese"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},oden:{keywords:["food","japanese"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},dango:{keywords:["food","dessert","sweet","japanese","barbecue","meat"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},shaved_ice:{keywords:["hot","dessert","summer"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},ice_cream:{keywords:["food","hot","dessert"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},icecream:{keywords:["food","hot","dessert","summer"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},pie:{keywords:["food","dessert","pastry"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cake:{keywords:["food","dessert"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cupcake:{keywords:["food","dessert","bakery","sweet"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},moon_cake:{keywords:["food","autumn"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},birthday:{keywords:["food","dessert","cake"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},custard:{keywords:["dessert","food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},candy:{keywords:["snack","dessert","sweet","lolly"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},lollipop:{keywords:["food","snack","candy","sweet"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},chocolate_bar:{keywords:["food","snack","dessert","sweet"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},popcorn:{keywords:["food","movie theater","films","snack"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},dumpling:{keywords:["food","empanada","pierogi","potsticker"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},doughnut:{keywords:["food","dessert","snack","sweet","donut"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cookie:{keywords:["food","snack","oreo","chocolate","sweet","dessert"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},milk_glass:{keywords:["beverage","drink","cow"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},beer:{keywords:["relax","beverage","drink","drunk","party","pub","summer","alcohol","booze"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},beers:{keywords:["relax","beverage","drink","drunk","party","pub","summer","alcohol","booze"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},clinking_glasses:{keywords:["beverage","drink","party","alcohol","celebrate","cheers","wine","champagne","toast"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},wine_glass:{keywords:["drink","beverage","drunk","alcohol","booze"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},tumbler_glass:{keywords:["drink","beverage","drunk","alcohol","liquor","booze","bourbon","scotch","whisky","glass","shot"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cocktail:{keywords:["drink","drunk","alcohol","beverage","booze","mojito"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},tropical_drink:{keywords:["beverage","cocktail","summer","beach","alcohol","booze","mojito"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},champagne:{keywords:["drink","wine","bottle","celebration"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},sake:{keywords:["wine","drink","drunk","beverage","japanese","alcohol","booze"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},tea:{keywords:["drink","bowl","breakfast","green","british"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},cup_with_straw:{keywords:["drink","soda"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},coffee:{keywords:["beverage","caffeine","latte","espresso"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},baby_bottle:{keywords:["food","container","milk"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},salt:{keywords:["condiment","shaker"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},spoon:{keywords:["cutlery","kitchen","tableware"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},fork_and_knife:{keywords:["cutlery","kitchen"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},plate_with_cutlery:{keywords:["food","eat","meal","lunch","dinner","restaurant"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},bowl_with_spoon:{keywords:["food","breakfast","cereal","oatmeal","porridge"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},takeout_box:{keywords:["food","leftovers"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},chopsticks:{keywords:["food"],char:"",fitzpatrick_scale:!1,category:"food_and_drink"},soccer:{keywords:["sports","football"],char:"",fitzpatrick_scale:!1,category:"activity"},basketball:{keywords:["sports","balls","NBA"],char:"",fitzpatrick_scale:!1,category:"activity"},football:{keywords:["sports","balls","NFL"],char:"",fitzpatrick_scale:!1,category:"activity"},baseball:{keywords:["sports","balls"],char:"",fitzpatrick_scale:!1,category:"activity"},softball:{keywords:["sports","balls"],char:"",fitzpatrick_scale:!1,category:"activity"},tennis:{keywords:["sports","balls","green"],char:"",fitzpatrick_scale:!1,category:"activity"},volleyball:{keywords:["sports","balls"],char:"",fitzpatrick_scale:!1,category:"activity"},rugby_football:{keywords:["sports","team"],char:"",fitzpatrick_scale:!1,category:"activity"},flying_disc:{keywords:["sports","frisbee","ultimate"],char:"",fitzpatrick_scale:!1,category:"activity"},"8ball":{keywords:["pool","hobby","game","luck","magic"],char:"",fitzpatrick_scale:!1,category:"activity"},golf:{keywords:["sports","business","flag","hole","summer"],char:"",fitzpatrick_scale:!1,category:"activity"},golfing_woman:{keywords:["sports","business","woman","female"],char:"",fitzpatrick_scale:!1,category:"activity"},golfing_man:{keywords:["sports","business"],char:"",fitzpatrick_scale:!0,category:"activity"},ping_pong:{keywords:["sports","pingpong"],char:"",fitzpatrick_scale:!1,category:"activity"},badminton:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},goal_net:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},ice_hockey:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},field_hockey:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},lacrosse:{keywords:["sports","ball","stick"],char:"",fitzpatrick_scale:!1,category:"activity"},cricket:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},ski:{keywords:["sports","winter","cold","snow"],char:"",fitzpatrick_scale:!1,category:"activity"},skier:{keywords:["sports","winter","snow"],char:"",fitzpatrick_scale:!1,category:"activity"},snowboarder:{keywords:["sports","winter"],char:"",fitzpatrick_scale:!0,category:"activity"},person_fencing:{keywords:["sports","fencing","sword"],char:"",fitzpatrick_scale:!1,category:"activity"},women_wrestling:{keywords:["sports","wrestlers"],char:"",fitzpatrick_scale:!1,category:"activity"},men_wrestling:{keywords:["sports","wrestlers"],char:"",fitzpatrick_scale:!1,category:"activity"},woman_cartwheeling:{keywords:["gymnastics"],char:"",fitzpatrick_scale:!0,category:"activity"},man_cartwheeling:{keywords:["gymnastics"],char:"",fitzpatrick_scale:!0,category:"activity"},woman_playing_handball:{keywords:["sports"],char:"",fitzpatrick_scale:!0,category:"activity"},man_playing_handball:{keywords:["sports"],char:"",fitzpatrick_scale:!0,category:"activity"},ice_skate:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},curling_stone:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},skateboard:{keywords:["board"],char:"",fitzpatrick_scale:!1,category:"activity"},sled:{keywords:["sleigh","luge","toboggan"],char:"",fitzpatrick_scale:!1,category:"activity"},bow_and_arrow:{keywords:["sports"],char:"",fitzpatrick_scale:!1,category:"activity"},fishing_pole_and_fish:{keywords:["food","hobby","summer"],char:"",fitzpatrick_scale:!1,category:"activity"},boxing_glove:{keywords:["sports","fighting"],char:"",fitzpatrick_scale:!1,category:"activity"},martial_arts_uniform:{keywords:["judo","karate","taekwondo"],char:"",fitzpatrick_scale:!1,category:"activity"},rowing_woman:{keywords:["sports","hobby","water","ship","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},rowing_man:{keywords:["sports","hobby","water","ship"],char:"",fitzpatrick_scale:!0,category:"activity"},climbing_woman:{keywords:["sports","hobby","woman","female","rock"],char:"",fitzpatrick_scale:!0,category:"activity"},climbing_man:{keywords:["sports","hobby","man","male","rock"],char:"",fitzpatrick_scale:!0,category:"activity"},swimming_woman:{keywords:["sports","exercise","human","athlete","water","summer","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},swimming_man:{keywords:["sports","exercise","human","athlete","water","summer"],char:"",fitzpatrick_scale:!0,category:"activity"},woman_playing_water_polo:{keywords:["sports","pool"],char:"",fitzpatrick_scale:!0,category:"activity"},man_playing_water_polo:{keywords:["sports","pool"],char:"",fitzpatrick_scale:!0,category:"activity"},woman_in_lotus_position:{keywords:["woman","female","meditation","yoga","serenity","zen","mindfulness"],char:"",fitzpatrick_scale:!0,category:"activity"},man_in_lotus_position:{keywords:["man","male","meditation","yoga","serenity","zen","mindfulness"],char:"",fitzpatrick_scale:!0,category:"activity"},surfing_woman:{keywords:["sports","ocean","sea","summer","beach","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},surfing_man:{keywords:["sports","ocean","sea","summer","beach"],char:"",fitzpatrick_scale:!0,category:"activity"},bath:{keywords:["clean","shower","bathroom"],char:"",fitzpatrick_scale:!0,category:"activity"},basketball_woman:{keywords:["sports","human","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},basketball_man:{keywords:["sports","human"],char:"",fitzpatrick_scale:!0,category:"activity"},weight_lifting_woman:{keywords:["sports","training","exercise","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},weight_lifting_man:{keywords:["sports","training","exercise"],char:"",fitzpatrick_scale:!0,category:"activity"},biking_woman:{keywords:["sports","bike","exercise","hipster","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},biking_man:{keywords:["sports","bike","exercise","hipster"],char:"",fitzpatrick_scale:!0,category:"activity"},mountain_biking_woman:{keywords:["transportation","sports","human","race","bike","woman","female"],char:"",fitzpatrick_scale:!0,category:"activity"},mountain_biking_man:{keywords:["transportation","sports","human","race","bike"],char:"",fitzpatrick_scale:!0,category:"activity"},horse_racing:{keywords:["animal","betting","competition","gambling","luck"],char:"",fitzpatrick_scale:!0,category:"activity"},business_suit_levitating:{keywords:["suit","business","levitate","hover","jump"],char:"",fitzpatrick_scale:!0,category:"activity"},trophy:{keywords:["win","award","contest","place","ftw","ceremony"],char:"",fitzpatrick_scale:!1,category:"activity"},running_shirt_with_sash:{keywords:["play","pageant"],char:"",fitzpatrick_scale:!1,category:"activity"},medal_sports:{keywords:["award","winning"],char:"",fitzpatrick_scale:!1,category:"activity"},medal_military:{keywords:["award","winning","army"],char:"",fitzpatrick_scale:!1,category:"activity"},"1st_place_medal":{keywords:["award","winning","first"],char:"",fitzpatrick_scale:!1,category:"activity"},"2nd_place_medal":{keywords:["award","second"],char:"",fitzpatrick_scale:!1,category:"activity"},"3rd_place_medal":{keywords:["award","third"],char:"",fitzpatrick_scale:!1,category:"activity"},reminder_ribbon:{keywords:["sports","cause","support","awareness"],char:"",fitzpatrick_scale:!1,category:"activity"},rosette:{keywords:["flower","decoration","military"],char:"",fitzpatrick_scale:!1,category:"activity"},ticket:{keywords:["event","concert","pass"],char:"",fitzpatrick_scale:!1,category:"activity"},tickets:{keywords:["sports","concert","entrance"],char:"",fitzpatrick_scale:!1,category:"activity"},performing_arts:{keywords:["acting","theater","drama"],char:"",fitzpatrick_scale:!1,category:"activity"},art:{keywords:["design","paint","draw","colors"],char:"",fitzpatrick_scale:!1,category:"activity"},circus_tent:{keywords:["festival","carnival","party"],char:"",fitzpatrick_scale:!1,category:"activity"},woman_juggling:{keywords:["juggle","balance","skill","multitask"],char:"",fitzpatrick_scale:!0,category:"activity"},man_juggling:{keywords:["juggle","balance","skill","multitask"],char:"",fitzpatrick_scale:!0,category:"activity"},microphone:{keywords:["sound","music","PA","sing","talkshow"],char:"",fitzpatrick_scale:!1,category:"activity"},headphones:{keywords:["music","score","gadgets"],char:"",fitzpatrick_scale:!1,category:"activity"},musical_score:{keywords:["treble","clef","compose"],char:"",fitzpatrick_scale:!1,category:"activity"},musical_keyboard:{keywords:["piano","instrument","compose"],char:"",fitzpatrick_scale:!1,category:"activity"},drum:{keywords:["music","instrument","drumsticks","snare"],char:"",fitzpatrick_scale:!1,category:"activity"},saxophone:{keywords:["music","instrument","jazz","blues"],char:"",fitzpatrick_scale:!1,category:"activity"},trumpet:{keywords:["music","brass"],char:"",fitzpatrick_scale:!1,category:"activity"},guitar:{keywords:["music","instrument"],char:"",fitzpatrick_scale:!1,category:"activity"},violin:{keywords:["music","instrument","orchestra","symphony"],char:"",fitzpatrick_scale:!1,category:"activity"},clapper:{keywords:["movie","film","record"],char:"",fitzpatrick_scale:!1,category:"activity"},video_game:{keywords:["play","console","PS4","controller"],char:"",fitzpatrick_scale:!1,category:"activity"},space_invader:{keywords:["game","arcade","play"],char:"",fitzpatrick_scale:!1,category:"activity"},dart:{keywords:["game","play","bar","target","bullseye"],char:"",fitzpatrick_scale:!1,category:"activity"},game_die:{keywords:["dice","random","tabletop","play","luck"],char:"",fitzpatrick_scale:!1,category:"activity"},chess_pawn:{keywords:["expendable"],char:"",fitzpatrick_scale:!1,category:"activity"},slot_machine:{keywords:["bet","gamble","vegas","fruit machine","luck","casino"],char:"",fitzpatrick_scale:!1,category:"activity"},jigsaw:{keywords:["interlocking","puzzle","piece"],char:"",fitzpatrick_scale:!1,category:"activity"},bowling:{keywords:["sports","fun","play"],char:"",fitzpatrick_scale:!1,category:"activity"},red_car:{keywords:["red","transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},taxi:{keywords:["uber","vehicle","cars","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},blue_car:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},bus:{keywords:["car","vehicle","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},trolleybus:{keywords:["bart","transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},racing_car:{keywords:["sports","race","fast","formula","f1"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},police_car:{keywords:["vehicle","cars","transportation","law","legal","enforcement"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},ambulance:{keywords:["health","911","hospital"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},fire_engine:{keywords:["transportation","cars","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},minibus:{keywords:["vehicle","car","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},truck:{keywords:["cars","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},articulated_lorry:{keywords:["vehicle","cars","transportation","express"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},tractor:{keywords:["vehicle","car","farming","agriculture"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},kick_scooter:{keywords:["vehicle","kick","razor"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},motorcycle:{keywords:["race","sports","fast"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},bike:{keywords:["sports","bicycle","exercise","hipster"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},motor_scooter:{keywords:["vehicle","vespa","sasha"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},rotating_light:{keywords:["police","ambulance","911","emergency","alert","error","pinged","law","legal"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},oncoming_police_car:{keywords:["vehicle","law","legal","enforcement","911"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},oncoming_bus:{keywords:["vehicle","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},oncoming_automobile:{keywords:["car","vehicle","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},oncoming_taxi:{keywords:["vehicle","cars","uber"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},aerial_tramway:{keywords:["transportation","vehicle","ski"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},mountain_cableway:{keywords:["transportation","vehicle","ski"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},suspension_railway:{keywords:["vehicle","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},railway_car:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},train:{keywords:["transportation","vehicle","carriage","public","travel"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},monorail:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},bullettrain_side:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},bullettrain_front:{keywords:["transportation","vehicle","speed","fast","public","travel"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},light_rail:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},mountain_railway:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},steam_locomotive:{keywords:["transportation","vehicle","train"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},train2:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},metro:{keywords:["transportation","blue-square","mrt","underground","tube"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},tram:{keywords:["transportation","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},station:{keywords:["transportation","vehicle","public"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},flying_saucer:{keywords:["transportation","vehicle","ufo"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},helicopter:{keywords:["transportation","vehicle","fly"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},small_airplane:{keywords:["flight","transportation","fly","vehicle"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},airplane:{keywords:["vehicle","transportation","flight","fly"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},flight_departure:{keywords:["airport","flight","landing"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},flight_arrival:{keywords:["airport","flight","boarding"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},sailboat:{keywords:["ship","summer","transportation","water","sailing"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},motor_boat:{keywords:["ship"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},speedboat:{keywords:["ship","transportation","vehicle","summer"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},ferry:{keywords:["boat","ship","yacht"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},passenger_ship:{keywords:["yacht","cruise","ferry"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},rocket:{keywords:["launch","ship","staffmode","NASA","outer space","outer_space","fly"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},artificial_satellite:{keywords:["communication","gps","orbit","spaceflight","NASA","ISS"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},seat:{keywords:["sit","airplane","transport","bus","flight","fly"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},canoe:{keywords:["boat","paddle","water","ship"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},anchor:{keywords:["ship","ferry","sea","boat"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},construction:{keywords:["wip","progress","caution","warning"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},fuelpump:{keywords:["gas station","petroleum"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},busstop:{keywords:["transportation","wait"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},vertical_traffic_light:{keywords:["transportation","driving"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},traffic_light:{keywords:["transportation","signal"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},checkered_flag:{keywords:["contest","finishline","race","gokart"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},ship:{keywords:["transportation","titanic","deploy"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},ferris_wheel:{keywords:["photo","carnival","londoneye"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},roller_coaster:{keywords:["carnival","playground","photo","fun"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},carousel_horse:{keywords:["photo","carnival"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},building_construction:{keywords:["wip","working","progress"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},foggy:{keywords:["photo","mountain"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},tokyo_tower:{keywords:["photo","japanese"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},factory:{keywords:["building","industry","pollution","smoke"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},fountain:{keywords:["photo","summer","water","fresh"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},rice_scene:{keywords:["photo","japan","asia","tsukimi"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},mountain:{keywords:["photo","nature","environment"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},mountain_snow:{keywords:["photo","nature","environment","winter","cold"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},mount_fuji:{keywords:["photo","mountain","nature","japanese"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},volcano:{keywords:["photo","nature","disaster"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},japan:{keywords:["nation","country","japanese","asia"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},camping:{keywords:["photo","outdoors","tent"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},tent:{keywords:["photo","camping","outdoors"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},national_park:{keywords:["photo","environment","nature"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},motorway:{keywords:["road","cupertino","interstate","highway"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},railway_track:{keywords:["train","transportation"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},sunrise:{keywords:["morning","view","vacation","photo"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},sunrise_over_mountains:{keywords:["view","vacation","photo"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},desert:{keywords:["photo","warm","saharah"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},beach_umbrella:{keywords:["weather","summer","sunny","sand","mojito"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},desert_island:{keywords:["photo","tropical","mojito"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},city_sunrise:{keywords:["photo","good morning","dawn"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},city_sunset:{keywords:["photo","evening","sky","buildings"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},cityscape:{keywords:["photo","night life","urban"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},night_with_stars:{keywords:["evening","city","downtown"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},bridge_at_night:{keywords:["photo","sanfrancisco"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},milky_way:{keywords:["photo","space","stars"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},stars:{keywords:["night","photo"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},sparkler:{keywords:["stars","night","shine"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},fireworks:{keywords:["photo","festival","carnival","congratulations"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},rainbow:{keywords:["nature","happy","unicorn_face","photo","sky","spring"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},houses:{keywords:["buildings","photo"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},european_castle:{keywords:["building","royalty","history"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},japanese_castle:{keywords:["photo","building"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},stadium:{keywords:["photo","place","sports","concert","venue"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},statue_of_liberty:{keywords:["american","newyork"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},house:{keywords:["building","home"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},house_with_garden:{keywords:["home","plant","nature"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},derelict_house:{keywords:["abandon","evict","broken","building"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},office:{keywords:["building","bureau","work"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},department_store:{keywords:["building","shopping","mall"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},post_office:{keywords:["building","envelope","communication"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},european_post_office:{keywords:["building","email"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},hospital:{keywords:["building","health","surgery","doctor"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},bank:{keywords:["building","money","sales","cash","business","enterprise"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},hotel:{keywords:["building","accomodation","checkin"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},convenience_store:{keywords:["building","shopping","groceries"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},school:{keywords:["building","student","education","learn","teach"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},love_hotel:{keywords:["like","affection","dating"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},wedding:{keywords:["love","like","affection","couple","marriage","bride","groom"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},classical_building:{keywords:["art","culture","history"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},church:{keywords:["building","religion","christ"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},mosque:{keywords:["islam","worship","minaret"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},synagogue:{keywords:["judaism","worship","temple","jewish"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},kaaba:{keywords:["mecca","mosque","islam"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},shinto_shrine:{keywords:["temple","japan","kyoto"],char:"",fitzpatrick_scale:!1,category:"travel_and_places"},watch:{keywords:["time","accessories"],char:"",fitzpatrick_scale:!1,category:"objects"},iphone:{keywords:["technology","apple","gadgets","dial"],char:"",fitzpatrick_scale:!1,category:"objects"},calling:{keywords:["iphone","incoming"],char:"",fitzpatrick_scale:!1,category:"objects"},computer:{keywords:["technology","laptop","screen","display","monitor"],char:"",fitzpatrick_scale:!1,category:"objects"},keyboard:{keywords:["technology","computer","type","input","text"],char:"",fitzpatrick_scale:!1,category:"objects"},desktop_computer:{keywords:["technology","computing","screen"],char:"",fitzpatrick_scale:!1,category:"objects"},printer:{keywords:["paper","ink"],char:"",fitzpatrick_scale:!1,category:"objects"},computer_mouse:{keywords:["click"],char:"",fitzpatrick_scale:!1,category:"objects"},trackball:{keywords:["technology","trackpad"],char:"",fitzpatrick_scale:!1,category:"objects"},joystick:{keywords:["game","play"],char:"",fitzpatrick_scale:!1,category:"objects"},clamp:{keywords:["tool"],char:"",fitzpatrick_scale:!1,category:"objects"},minidisc:{keywords:["technology","record","data","disk","90s"],char:"",fitzpatrick_scale:!1,category:"objects"},floppy_disk:{keywords:["oldschool","technology","save","90s","80s"],char:"",fitzpatrick_scale:!1,category:"objects"},cd:{keywords:["technology","dvd","disk","disc","90s"],char:"",fitzpatrick_scale:!1,category:"objects"},dvd:{keywords:["cd","disk","disc"],char:"",fitzpatrick_scale:!1,category:"objects"},vhs:{keywords:["record","video","oldschool","90s","80s"],char:"",fitzpatrick_scale:!1,category:"objects"},camera:{keywords:["gadgets","photography"],char:"",fitzpatrick_scale:!1,category:"objects"},camera_flash:{keywords:["photography","gadgets"],char:"",fitzpatrick_scale:!1,category:"objects"},video_camera:{keywords:["film","record"],char:"",fitzpatrick_scale:!1,category:"objects"},movie_camera:{keywords:["film","record"],char:"",fitzpatrick_scale:!1,category:"objects"},film_projector:{keywords:["video","tape","record","movie"],char:"",fitzpatrick_scale:!1,category:"objects"},film_strip:{keywords:["movie"],char:"",fitzpatrick_scale:!1,category:"objects"},telephone_receiver:{keywords:["technology","communication","dial"],char:"",fitzpatrick_scale:!1,category:"objects"},phone:{keywords:["technology","communication","dial","telephone"],char:"",fitzpatrick_scale:!1,category:"objects"},pager:{keywords:["bbcall","oldschool","90s"],char:"",fitzpatrick_scale:!1,category:"objects"},fax:{keywords:["communication","technology"],char:"",fitzpatrick_scale:!1,category:"objects"},tv:{keywords:["technology","program","oldschool","show","television"],char:"",fitzpatrick_scale:!1,category:"objects"},radio:{keywords:["communication","music","podcast","program"],char:"",fitzpatrick_scale:!1,category:"objects"},studio_microphone:{keywords:["sing","recording","artist","talkshow"],char:"",fitzpatrick_scale:!1,category:"objects"},level_slider:{keywords:["scale"],char:"",fitzpatrick_scale:!1,category:"objects"},control_knobs:{keywords:["dial"],char:"",fitzpatrick_scale:!1,category:"objects"},compass:{keywords:["magnetic","navigation","orienteering"],char:"",fitzpatrick_scale:!1,category:"objects"},stopwatch:{keywords:["time","deadline"],char:"",fitzpatrick_scale:!1,category:"objects"},timer_clock:{keywords:["alarm"],char:"",fitzpatrick_scale:!1,category:"objects"},alarm_clock:{keywords:["time","wake"],char:"",fitzpatrick_scale:!1,category:"objects"},mantelpiece_clock:{keywords:["time"],char:"",fitzpatrick_scale:!1,category:"objects"},hourglass_flowing_sand:{keywords:["oldschool","time","countdown"],char:"",fitzpatrick_scale:!1,category:"objects"},hourglass:{keywords:["time","clock","oldschool","limit","exam","quiz","test"],char:"",fitzpatrick_scale:!1,category:"objects"},satellite:{keywords:["communication","future","radio","space"],char:"",fitzpatrick_scale:!1,category:"objects"},battery:{keywords:["power","energy","sustain"],char:"",fitzpatrick_scale:!1,category:"objects"},electric_plug:{keywords:["charger","power"],char:"",fitzpatrick_scale:!1,category:"objects"},bulb:{keywords:["light","electricity","idea"],char:"",fitzpatrick_scale:!1,category:"objects"},flashlight:{keywords:["dark","camping","sight","night"],char:"",fitzpatrick_scale:!1,category:"objects"},candle:{keywords:["fire","wax"],char:"",fitzpatrick_scale:!1,category:"objects"},fire_extinguisher:{keywords:["quench"],char:"",fitzpatrick_scale:!1,category:"objects"},wastebasket:{keywords:["bin","trash","rubbish","garbage","toss"],char:"",fitzpatrick_scale:!1,category:"objects"},oil_drum:{keywords:["barrell"],char:"",fitzpatrick_scale:!1,category:"objects"},money_with_wings:{keywords:["dollar","bills","payment","sale"],char:"",fitzpatrick_scale:!1,category:"objects"},dollar:{keywords:["money","sales","bill","currency"],char:"",fitzpatrick_scale:!1,category:"objects"},yen:{keywords:["money","sales","japanese","dollar","currency"],char:"",fitzpatrick_scale:!1,category:"objects"},euro:{keywords:["money","sales","dollar","currency"],char:"",fitzpatrick_scale:!1,category:"objects"},pound:{keywords:["british","sterling","money","sales","bills","uk","england","currency"],char:"",fitzpatrick_scale:!1,category:"objects"},moneybag:{keywords:["dollar","payment","coins","sale"],char:"",fitzpatrick_scale:!1,category:"objects"},credit_card:{keywords:["money","sales","dollar","bill","payment","shopping"],char:"",fitzpatrick_scale:!1,category:"objects"},gem:{keywords:["blue","ruby","diamond","jewelry"],char:"",fitzpatrick_scale:!1,category:"objects"},balance_scale:{keywords:["law","fairness","weight"],char:"",fitzpatrick_scale:!1,category:"objects"},toolbox:{keywords:["tools","diy","fix","maintainer","mechanic"],char:"",fitzpatrick_scale:!1,category:"objects"},wrench:{keywords:["tools","diy","ikea","fix","maintainer"],char:"",fitzpatrick_scale:!1,category:"objects"},hammer:{keywords:["tools","build","create"],char:"",fitzpatrick_scale:!1,category:"objects"},hammer_and_pick:{keywords:["tools","build","create"],char:"",fitzpatrick_scale:!1,category:"objects"},hammer_and_wrench:{keywords:["tools","build","create"],char:"",fitzpatrick_scale:!1,category:"objects"},pick:{keywords:["tools","dig"],char:"",fitzpatrick_scale:!1,category:"objects"},nut_and_bolt:{keywords:["handy","tools","fix"],char:"",fitzpatrick_scale:!1,category:"objects"},gear:{keywords:["cog"],char:"",fitzpatrick_scale:!1,category:"objects"},brick:{keywords:["bricks"],char:"",fitzpatrick_scale:!1,category:"objects"},chains:{keywords:["lock","arrest"],char:"",fitzpatrick_scale:!1,category:"objects"},magnet:{keywords:["attraction","magnetic"],char:"",fitzpatrick_scale:!1,category:"objects"},gun:{keywords:["violence","weapon","pistol","revolver"],char:"",fitzpatrick_scale:!1,category:"objects"},bomb:{keywords:["boom","explode","explosion","terrorism"],char:"",fitzpatrick_scale:!1,category:"objects"},firecracker:{keywords:["dynamite","boom","explode","explosion","explosive"],char:"",fitzpatrick_scale:!1,category:"objects"},hocho:{keywords:["knife","blade","cutlery","kitchen","weapon"],char:"",fitzpatrick_scale:!1,category:"objects"},dagger:{keywords:["weapon"],char:"",fitzpatrick_scale:!1,category:"objects"},crossed_swords:{keywords:["weapon"],char:"",fitzpatrick_scale:!1,category:"objects"},shield:{keywords:["protection","security"],char:"",fitzpatrick_scale:!1,category:"objects"},smoking:{keywords:["kills","tobacco","cigarette","joint","smoke"],char:"",fitzpatrick_scale:!1,category:"objects"},skull_and_crossbones:{keywords:["poison","danger","deadly","scary","death","pirate","evil"],char:"",fitzpatrick_scale:!1,category:"objects"},coffin:{keywords:["vampire","dead","die","death","rip","graveyard","cemetery","casket","funeral","box"],char:"",fitzpatrick_scale:!1,category:"objects"},funeral_urn:{keywords:["dead","die","death","rip","ashes"],char:"",fitzpatrick_scale:!1,category:"objects"},amphora:{keywords:["vase","jar"],char:"",fitzpatrick_scale:!1,category:"objects"},crystal_ball:{keywords:["disco","party","magic","circus","fortune_teller"],char:"",fitzpatrick_scale:!1,category:"objects"},prayer_beads:{keywords:["dhikr","religious"],char:"",fitzpatrick_scale:!1,category:"objects"},nazar_amulet:{keywords:["bead","charm"],char:"",fitzpatrick_scale:!1,category:"objects"},barber:{keywords:["hair","salon","style"],char:"",fitzpatrick_scale:!1,category:"objects"},alembic:{keywords:["distilling","science","experiment","chemistry"],char:"",fitzpatrick_scale:!1,category:"objects"},telescope:{keywords:["stars","space","zoom","science","astronomy"],char:"",fitzpatrick_scale:!1,category:"objects"},microscope:{keywords:["laboratory","experiment","zoomin","science","study"],char:"",fitzpatrick_scale:!1,category:"objects"},hole:{keywords:["embarrassing"],char:"",fitzpatrick_scale:!1,category:"objects"},pill:{keywords:["health","medicine","doctor","pharmacy","drug"],char:"",fitzpatrick_scale:!1,category:"objects"},syringe:{keywords:["health","hospital","drugs","blood","medicine","needle","doctor","nurse"],char:"",fitzpatrick_scale:!1,category:"objects"},dna:{keywords:["biologist","genetics","life"],char:"",fitzpatrick_scale:!1,category:"objects"},microbe:{keywords:["amoeba","bacteria","germs"],char:"",fitzpatrick_scale:!1,category:"objects"},petri_dish:{keywords:["bacteria","biology","culture","lab"],char:"",fitzpatrick_scale:!1,category:"objects"},test_tube:{keywords:["chemistry","experiment","lab","science"],char:"",fitzpatrick_scale:!1,category:"objects"},thermometer:{keywords:["weather","temperature","hot","cold"],char:"",fitzpatrick_scale:!1,category:"objects"},broom:{keywords:["cleaning","sweeping","witch"],char:"",fitzpatrick_scale:!1,category:"objects"},basket:{keywords:["laundry"],char:"",fitzpatrick_scale:!1,category:"objects"},toilet_paper:{keywords:["roll"],char:"",fitzpatrick_scale:!1,category:"objects"},label:{keywords:["sale","tag"],char:"",fitzpatrick_scale:!1,category:"objects"},bookmark:{keywords:["favorite","label","save"],char:"",fitzpatrick_scale:!1,category:"objects"},toilet:{keywords:["restroom","wc","washroom","bathroom","potty"],char:"",fitzpatrick_scale:!1,category:"objects"},shower:{keywords:["clean","water","bathroom"],char:"",fitzpatrick_scale:!1,category:"objects"},bathtub:{keywords:["clean","shower","bathroom"],char:"",fitzpatrick_scale:!1,category:"objects"},soap:{keywords:["bar","bathing","cleaning","lather"],char:"",fitzpatrick_scale:!1,category:"objects"},sponge:{keywords:["absorbing","cleaning","porous"],char:"",fitzpatrick_scale:!1,category:"objects"},lotion_bottle:{keywords:["moisturizer","sunscreen"],char:"",fitzpatrick_scale:!1,category:"objects"},key:{keywords:["lock","door","password"],char:"",fitzpatrick_scale:!1,category:"objects"},old_key:{keywords:["lock","door","password"],char:"",fitzpatrick_scale:!1,category:"objects"},couch_and_lamp:{keywords:["read","chill"],char:"",fitzpatrick_scale:!1,category:"objects"},sleeping_bed:{keywords:["bed","rest"],char:"",fitzpatrick_scale:!0,category:"objects"},bed:{keywords:["sleep","rest"],char:"",fitzpatrick_scale:!1,category:"objects"},door:{keywords:["house","entry","exit"],char:"",fitzpatrick_scale:!1,category:"objects"},bellhop_bell:{keywords:["service"],char:"",fitzpatrick_scale:!1,category:"objects"},teddy_bear:{keywords:["plush","stuffed"],char:"",fitzpatrick_scale:!1,category:"objects"},framed_picture:{keywords:["photography"],char:"",fitzpatrick_scale:!1,category:"objects"},world_map:{keywords:["location","direction"],char:"",fitzpatrick_scale:!1,category:"objects"},parasol_on_ground:{keywords:["weather","summer"],char:"",fitzpatrick_scale:!1,category:"objects"},moyai:{keywords:["rock","easter island","moai"],char:"",fitzpatrick_scale:!1,category:"objects"},shopping:{keywords:["mall","buy","purchase"],char:"",fitzpatrick_scale:!1,category:"objects"},shopping_cart:{keywords:["trolley"],char:"",fitzpatrick_scale:!1,category:"objects"},balloon:{keywords:["party","celebration","birthday","circus"],char:"",fitzpatrick_scale:!1,category:"objects"},flags:{keywords:["fish","japanese","koinobori","carp","banner"],char:"",fitzpatrick_scale:!1,category:"objects"},ribbon:{keywords:["decoration","pink","girl","bowtie"],char:"",fitzpatrick_scale:!1,category:"objects"},gift:{keywords:["present","birthday","christmas","xmas"],char:"",fitzpatrick_scale:!1,category:"objects"},confetti_ball:{keywords:["festival","party","birthday","circus"],char:"",fitzpatrick_scale:!1,category:"objects"},tada:{keywords:["party","congratulations","birthday","magic","circus","celebration"],char:"",fitzpatrick_scale:!1,category:"objects"},dolls:{keywords:["japanese","toy","kimono"],char:"",fitzpatrick_scale:!1,category:"objects"},wind_chime:{keywords:["nature","ding","spring","bell"],char:"",fitzpatrick_scale:!1,category:"objects"},crossed_flags:{keywords:["japanese","nation","country","border"],char:"",fitzpatrick_scale:!1,category:"objects"},izakaya_lantern:{keywords:["light","paper","halloween","spooky"],char:"",fitzpatrick_scale:!1,category:"objects"},red_envelope:{keywords:["gift"],char:"",fitzpatrick_scale:!1,category:"objects"},email:{keywords:["letter","postal","inbox","communication"],char:"",fitzpatrick_scale:!1,category:"objects"},envelope_with_arrow:{keywords:["email","communication"],char:"",fitzpatrick_scale:!1,category:"objects"},incoming_envelope:{keywords:["email","inbox"],char:"",fitzpatrick_scale:!1,category:"objects"},"e-mail":{keywords:["communication","inbox"],char:"",fitzpatrick_scale:!1,category:"objects"},love_letter:{keywords:["email","like","affection","envelope","valentines"],char:"",fitzpatrick_scale:!1,category:"objects"},postbox:{keywords:["email","letter","envelope"],char:"",fitzpatrick_scale:!1,category:"objects"},mailbox_closed:{keywords:["email","communication","inbox"],char:"",fitzpatrick_scale:!1,category:"objects"},mailbox:{keywords:["email","inbox","communication"],char:"",fitzpatrick_scale:!1,category:"objects"},mailbox_with_mail:{keywords:["email","inbox","communication"],char:"",fitzpatrick_scale:!1,category:"objects"},mailbox_with_no_mail:{keywords:["email","inbox"],char:"",fitzpatrick_scale:!1,category:"objects"},package:{keywords:["mail","gift","cardboard","box","moving"],char:"",fitzpatrick_scale:!1,category:"objects"},postal_horn:{keywords:["instrument","music"],char:"",fitzpatrick_scale:!1,category:"objects"},inbox_tray:{keywords:["email","documents"],char:"",fitzpatrick_scale:!1,category:"objects"},outbox_tray:{keywords:["inbox","email"],char:"",fitzpatrick_scale:!1,category:"objects"},scroll:{keywords:["documents","ancient","history","paper"],char:"",fitzpatrick_scale:!1,category:"objects"},page_with_curl:{keywords:["documents","office","paper"],char:"",fitzpatrick_scale:!1,category:"objects"},bookmark_tabs:{keywords:["favorite","save","order","tidy"],char:"",fitzpatrick_scale:!1,category:"objects"},receipt:{keywords:["accounting","expenses"],char:"",fitzpatrick_scale:!1,category:"objects"},bar_chart:{keywords:["graph","presentation","stats"],char:"",fitzpatrick_scale:!1,category:"objects"},chart_with_upwards_trend:{keywords:["graph","presentation","stats","recovery","business","economics","money","sales","good","success"],char:"",fitzpatrick_scale:!1,category:"objects"},chart_with_downwards_trend:{keywords:["graph","presentation","stats","recession","business","economics","money","sales","bad","failure"],char:"",fitzpatrick_scale:!1,category:"objects"},page_facing_up:{keywords:["documents","office","paper","information"],char:"",fitzpatrick_scale:!1,category:"objects"},date:{keywords:["calendar","schedule"],char:"",fitzpatrick_scale:!1,category:"objects"},calendar:{keywords:["schedule","date","planning"],char:"",fitzpatrick_scale:!1,category:"objects"},spiral_calendar:{keywords:["date","schedule","planning"],char:"",fitzpatrick_scale:!1,category:"objects"},card_index:{keywords:["business","stationery"],char:"",fitzpatrick_scale:!1,category:"objects"},card_file_box:{keywords:["business","stationery"],char:"",fitzpatrick_scale:!1,category:"objects"},ballot_box:{keywords:["election","vote"],char:"",fitzpatrick_scale:!1,category:"objects"},file_cabinet:{keywords:["filing","organizing"],char:"",fitzpatrick_scale:!1,category:"objects"},clipboard:{keywords:["stationery","documents"],char:"",fitzpatrick_scale:!1,category:"objects"},spiral_notepad:{keywords:["memo","stationery"],char:"",fitzpatrick_scale:!1,category:"objects"},file_folder:{keywords:["documents","business","office"],char:"",fitzpatrick_scale:!1,category:"objects"},open_file_folder:{keywords:["documents","load"],char:"",fitzpatrick_scale:!1,category:"objects"},card_index_dividers:{keywords:["organizing","business","stationery"],char:"",fitzpatrick_scale:!1,category:"objects"},newspaper_roll:{keywords:["press","headline"],char:"",fitzpatrick_scale:!1,category:"objects"},newspaper:{keywords:["press","headline"],char:"",fitzpatrick_scale:!1,category:"objects"},notebook:{keywords:["stationery","record","notes","paper","study"],char:"",fitzpatrick_scale:!1,category:"objects"},closed_book:{keywords:["read","library","knowledge","textbook","learn"],char:"",fitzpatrick_scale:!1,category:"objects"},green_book:{keywords:["read","library","knowledge","study"],char:"",fitzpatrick_scale:!1,category:"objects"},blue_book:{keywords:["read","library","knowledge","learn","study"],char:"",fitzpatrick_scale:!1,category:"objects"},orange_book:{keywords:["read","library","knowledge","textbook","study"],char:"",fitzpatrick_scale:!1,category:"objects"},notebook_with_decorative_cover:{keywords:["classroom","notes","record","paper","study"],char:"",fitzpatrick_scale:!1,category:"objects"},ledger:{keywords:["notes","paper"],char:"",fitzpatrick_scale:!1,category:"objects"},books:{keywords:["literature","library","study"],char:"",fitzpatrick_scale:!1,category:"objects"},open_book:{keywords:["book","read","library","knowledge","literature","learn","study"],char:"",fitzpatrick_scale:!1,category:"objects"},safety_pin:{keywords:["diaper"],char:"",fitzpatrick_scale:!1,category:"objects"},link:{keywords:["rings","url"],char:"",fitzpatrick_scale:!1,category:"objects"},paperclip:{keywords:["documents","stationery"],char:"",fitzpatrick_scale:!1,category:"objects"},paperclips:{keywords:["documents","stationery"],char:"",fitzpatrick_scale:!1,category:"objects"},scissors:{keywords:["stationery","cut"],char:"",fitzpatrick_scale:!1,category:"objects"},triangular_ruler:{keywords:["stationery","math","architect","sketch"],char:"",fitzpatrick_scale:!1,category:"objects"},straight_ruler:{keywords:["stationery","calculate","length","math","school","drawing","architect","sketch"],char:"",fitzpatrick_scale:!1,category:"objects"},abacus:{keywords:["calculation"],char:"",fitzpatrick_scale:!1,category:"objects"},pushpin:{keywords:["stationery","mark","here"],char:"",fitzpatrick_scale:!1,category:"objects"},round_pushpin:{keywords:["stationery","location","map","here"],char:"",fitzpatrick_scale:!1,category:"objects"},triangular_flag_on_post:{keywords:["mark","milestone","place"],char:"",fitzpatrick_scale:!1,category:"objects"},white_flag:{keywords:["losing","loser","lost","surrender","give up","fail"],char:"",fitzpatrick_scale:!1,category:"objects"},black_flag:{keywords:["pirate"],char:"",fitzpatrick_scale:!1,category:"objects"},rainbow_flag:{keywords:["flag","rainbow","pride","gay","lgbt","glbt","queer","homosexual","lesbian","bisexual","transgender"],char:"",fitzpatrick_scale:!1,category:"objects"},closed_lock_with_key:{keywords:["security","privacy"],char:"",fitzpatrick_scale:!1,category:"objects"},lock:{keywords:["security","password","padlock"],char:"",fitzpatrick_scale:!1,category:"objects"},unlock:{keywords:["privacy","security"],char:"",fitzpatrick_scale:!1,category:"objects"},lock_with_ink_pen:{keywords:["security","secret"],char:"",fitzpatrick_scale:!1,category:"objects"},pen:{keywords:["stationery","writing","write"],char:"",fitzpatrick_scale:!1,category:"objects"},fountain_pen:{keywords:["stationery","writing","write"],char:"",fitzpatrick_scale:!1,category:"objects"},black_nib:{keywords:["pen","stationery","writing","write"],char:"",fitzpatrick_scale:!1,category:"objects"},memo:{keywords:["write","documents","stationery","pencil","paper","writing","legal","exam","quiz","test","study","compose"],char:"",fitzpatrick_scale:!1,category:"objects"},pencil2:{keywords:["stationery","write","paper","writing","school","study"],char:"",fitzpatrick_scale:!1,category:"objects"},crayon:{keywords:["drawing","creativity"],char:"",fitzpatrick_scale:!1,category:"objects"},paintbrush:{keywords:["drawing","creativity","art"],char:"",fitzpatrick_scale:!1,category:"objects"},mag:{keywords:["search","zoom","find","detective"],char:"",fitzpatrick_scale:!1,category:"objects"},mag_right:{keywords:["search","zoom","find","detective"],char:"",fitzpatrick_scale:!1,category:"objects"},heart:{keywords:["love","like","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},orange_heart:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},yellow_heart:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},green_heart:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},blue_heart:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},purple_heart:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_heart:{keywords:["evil"],char:"",fitzpatrick_scale:!1,category:"symbols"},broken_heart:{keywords:["sad","sorry","break","heart","heartbreak"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_heart_exclamation:{keywords:["decoration","love"],char:"",fitzpatrick_scale:!1,category:"symbols"},two_hearts:{keywords:["love","like","affection","valentines","heart"],char:"",fitzpatrick_scale:!1,category:"symbols"},revolving_hearts:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},heartbeat:{keywords:["love","like","affection","valentines","pink","heart"],char:"",fitzpatrick_scale:!1,category:"symbols"},heartpulse:{keywords:["like","love","affection","valentines","pink"],char:"",fitzpatrick_scale:!1,category:"symbols"},sparkling_heart:{keywords:["love","like","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},cupid:{keywords:["love","like","heart","affection","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},gift_heart:{keywords:["love","valentines"],char:"",fitzpatrick_scale:!1,category:"symbols"},heart_decoration:{keywords:["purple-square","love","like"],char:"",fitzpatrick_scale:!1,category:"symbols"},peace_symbol:{keywords:["hippie"],char:"",fitzpatrick_scale:!1,category:"symbols"},latin_cross:{keywords:["christianity"],char:"",fitzpatrick_scale:!1,category:"symbols"},star_and_crescent:{keywords:["islam"],char:"",fitzpatrick_scale:!1,category:"symbols"},om:{keywords:["hinduism","buddhism","sikhism","jainism"],char:"",fitzpatrick_scale:!1,category:"symbols"},wheel_of_dharma:{keywords:["hinduism","buddhism","sikhism","jainism"],char:"",fitzpatrick_scale:!1,category:"symbols"},star_of_david:{keywords:["judaism"],char:"",fitzpatrick_scale:!1,category:"symbols"},six_pointed_star:{keywords:["purple-square","religion","jewish","hexagram"],char:"",fitzpatrick_scale:!1,category:"symbols"},menorah:{keywords:["hanukkah","candles","jewish"],char:"",fitzpatrick_scale:!1,category:"symbols"},yin_yang:{keywords:["balance"],char:"",fitzpatrick_scale:!1,category:"symbols"},orthodox_cross:{keywords:["suppedaneum","religion"],char:"",fitzpatrick_scale:!1,category:"symbols"},place_of_worship:{keywords:["religion","church","temple","prayer"],char:"",fitzpatrick_scale:!1,category:"symbols"},ophiuchus:{keywords:["sign","purple-square","constellation","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},aries:{keywords:["sign","purple-square","zodiac","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},taurus:{keywords:["purple-square","sign","zodiac","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},gemini:{keywords:["sign","zodiac","purple-square","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},cancer:{keywords:["sign","zodiac","purple-square","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},leo:{keywords:["sign","purple-square","zodiac","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},virgo:{keywords:["sign","zodiac","purple-square","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},libra:{keywords:["sign","purple-square","zodiac","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},scorpius:{keywords:["sign","zodiac","purple-square","astrology","scorpio"],char:"",fitzpatrick_scale:!1,category:"symbols"},sagittarius:{keywords:["sign","zodiac","purple-square","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},capricorn:{keywords:["sign","zodiac","purple-square","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},aquarius:{keywords:["sign","purple-square","zodiac","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},pisces:{keywords:["purple-square","sign","zodiac","astrology"],char:"",fitzpatrick_scale:!1,category:"symbols"},id:{keywords:["purple-square","words"],char:"",fitzpatrick_scale:!1,category:"symbols"},atom_symbol:{keywords:["science","physics","chemistry"],char:"",fitzpatrick_scale:!1,category:"symbols"},u7a7a:{keywords:["kanji","japanese","chinese","empty","sky","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},u5272:{keywords:["cut","divide","chinese","kanji","pink-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},radioactive:{keywords:["nuclear","danger"],char:"",fitzpatrick_scale:!1,category:"symbols"},biohazard:{keywords:["danger"],char:"",fitzpatrick_scale:!1,category:"symbols"},mobile_phone_off:{keywords:["mute","orange-square","silence","quiet"],char:"",fitzpatrick_scale:!1,category:"symbols"},vibration_mode:{keywords:["orange-square","phone"],char:"",fitzpatrick_scale:!1,category:"symbols"},u6709:{keywords:["orange-square","chinese","have","kanji"],char:"",fitzpatrick_scale:!1,category:"symbols"},u7121:{keywords:["nothing","chinese","kanji","japanese","orange-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},u7533:{keywords:["chinese","japanese","kanji","orange-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},u55b6:{keywords:["japanese","opening hours","orange-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},u6708:{keywords:["chinese","month","moon","japanese","orange-square","kanji"],char:"",fitzpatrick_scale:!1,category:"symbols"},eight_pointed_black_star:{keywords:["orange-square","shape","polygon"],char:"",fitzpatrick_scale:!1,category:"symbols"},vs:{keywords:["words","orange-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},accept:{keywords:["ok","good","chinese","kanji","agree","yes","orange-circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_flower:{keywords:["japanese","spring"],char:"",fitzpatrick_scale:!1,category:"symbols"},ideograph_advantage:{keywords:["chinese","kanji","obtain","get","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},secret:{keywords:["privacy","chinese","sshh","kanji","red-circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},congratulations:{keywords:["chinese","kanji","japanese","red-circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},u5408:{keywords:["japanese","chinese","join","kanji","red-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},u6e80:{keywords:["full","chinese","japanese","red-square","kanji"],char:"",fitzpatrick_scale:!1,category:"symbols"},u7981:{keywords:["kanji","japanese","chinese","forbidden","limit","restricted","red-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},a:{keywords:["red-square","alphabet","letter"],char:"",fitzpatrick_scale:!1,category:"symbols"},b:{keywords:["red-square","alphabet","letter"],char:"",fitzpatrick_scale:!1,category:"symbols"},ab:{keywords:["red-square","alphabet"],char:"",fitzpatrick_scale:!1,category:"symbols"},cl:{keywords:["alphabet","words","red-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},o2:{keywords:["alphabet","red-square","letter"],char:"",fitzpatrick_scale:!1,category:"symbols"},sos:{keywords:["help","red-square","words","emergency","911"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_entry:{keywords:["limit","security","privacy","bad","denied","stop","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},name_badge:{keywords:["fire","forbid"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_entry_sign:{keywords:["forbid","stop","limit","denied","disallow","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},x:{keywords:["no","delete","remove","cancel","red"],char:"",fitzpatrick_scale:!1,category:"symbols"},o:{keywords:["circle","round"],char:"",fitzpatrick_scale:!1,category:"symbols"},stop_sign:{keywords:["stop"],char:"",fitzpatrick_scale:!1,category:"symbols"},anger:{keywords:["angry","mad"],char:"",fitzpatrick_scale:!1,category:"symbols"},hotsprings:{keywords:["bath","warm","relax"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_pedestrians:{keywords:["rules","crossing","walking","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},do_not_litter:{keywords:["trash","bin","garbage","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_bicycles:{keywords:["cyclist","prohibited","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},"non-potable_water":{keywords:["drink","faucet","tap","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},underage:{keywords:["18","drink","pub","night","minor","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_mobile_phones:{keywords:["iphone","mute","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},exclamation:{keywords:["heavy_exclamation_mark","danger","surprise","punctuation","wow","warning"],char:"",fitzpatrick_scale:!1,category:"symbols"},grey_exclamation:{keywords:["surprise","punctuation","gray","wow","warning"],char:"",fitzpatrick_scale:!1,category:"symbols"},question:{keywords:["doubt","confused"],char:"",fitzpatrick_scale:!1,category:"symbols"},grey_question:{keywords:["doubts","gray","huh","confused"],char:"",fitzpatrick_scale:!1,category:"symbols"},bangbang:{keywords:["exclamation","surprise"],char:"",fitzpatrick_scale:!1,category:"symbols"},interrobang:{keywords:["wat","punctuation","surprise"],char:"",fitzpatrick_scale:!1,category:"symbols"},100:{keywords:["score","perfect","numbers","century","exam","quiz","test","pass","hundred"],char:"",fitzpatrick_scale:!1,category:"symbols"},low_brightness:{keywords:["sun","afternoon","warm","summer"],char:"",fitzpatrick_scale:!1,category:"symbols"},high_brightness:{keywords:["sun","light"],char:"",fitzpatrick_scale:!1,category:"symbols"},trident:{keywords:["weapon","spear"],char:"",fitzpatrick_scale:!1,category:"symbols"},fleur_de_lis:{keywords:["decorative","scout"],char:"",fitzpatrick_scale:!1,category:"symbols"},part_alternation_mark:{keywords:["graph","presentation","stats","business","economics","bad"],char:"",fitzpatrick_scale:!1,category:"symbols"},warning:{keywords:["exclamation","wip","alert","error","problem","issue"],char:"",fitzpatrick_scale:!1,category:"symbols"},children_crossing:{keywords:["school","warning","danger","sign","driving","yellow-diamond"],char:"",fitzpatrick_scale:!1,category:"symbols"},beginner:{keywords:["badge","shield"],char:"",fitzpatrick_scale:!1,category:"symbols"},recycle:{keywords:["arrow","environment","garbage","trash"],char:"",fitzpatrick_scale:!1,category:"symbols"},u6307:{keywords:["chinese","point","green-square","kanji"],char:"",fitzpatrick_scale:!1,category:"symbols"},chart:{keywords:["green-square","graph","presentation","stats"],char:"",fitzpatrick_scale:!1,category:"symbols"},sparkle:{keywords:["stars","green-square","awesome","good","fireworks"],char:"",fitzpatrick_scale:!1,category:"symbols"},eight_spoked_asterisk:{keywords:["star","sparkle","green-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},negative_squared_cross_mark:{keywords:["x","green-square","no","deny"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_check_mark:{keywords:["green-square","ok","agree","vote","election","answer","tick"],char:"",fitzpatrick_scale:!1,category:"symbols"},diamond_shape_with_a_dot_inside:{keywords:["jewel","blue","gem","crystal","fancy"],char:"",fitzpatrick_scale:!1,category:"symbols"},cyclone:{keywords:["weather","swirl","blue","cloud","vortex","spiral","whirlpool","spin","tornado","hurricane","typhoon"],char:"",fitzpatrick_scale:!1,category:"symbols"},loop:{keywords:["tape","cassette"],char:"",fitzpatrick_scale:!1,category:"symbols"},globe_with_meridians:{keywords:["earth","international","world","internet","interweb","i18n"],char:"",fitzpatrick_scale:!1,category:"symbols"},m:{keywords:["alphabet","blue-circle","letter"],char:"",fitzpatrick_scale:!1,category:"symbols"},atm:{keywords:["money","sales","cash","blue-square","payment","bank"],char:"",fitzpatrick_scale:!1,category:"symbols"},sa:{keywords:["japanese","blue-square","katakana"],char:"",fitzpatrick_scale:!1,category:"symbols"},passport_control:{keywords:["custom","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},customs:{keywords:["passport","border","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},baggage_claim:{keywords:["blue-square","airport","transport"],char:"",fitzpatrick_scale:!1,category:"symbols"},left_luggage:{keywords:["blue-square","travel"],char:"",fitzpatrick_scale:!1,category:"symbols"},wheelchair:{keywords:["blue-square","disabled","a11y","accessibility"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_smoking:{keywords:["cigarette","blue-square","smell","smoke"],char:"",fitzpatrick_scale:!1,category:"symbols"},wc:{keywords:["toilet","restroom","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},parking:{keywords:["cars","blue-square","alphabet","letter"],char:"",fitzpatrick_scale:!1,category:"symbols"},potable_water:{keywords:["blue-square","liquid","restroom","cleaning","faucet"],char:"",fitzpatrick_scale:!1,category:"symbols"},mens:{keywords:["toilet","restroom","wc","blue-square","gender","male"],char:"",fitzpatrick_scale:!1,category:"symbols"},womens:{keywords:["purple-square","woman","female","toilet","loo","restroom","gender"],char:"",fitzpatrick_scale:!1,category:"symbols"},baby_symbol:{keywords:["orange-square","child"],char:"",fitzpatrick_scale:!1,category:"symbols"},restroom:{keywords:["blue-square","toilet","refresh","wc","gender"],char:"",fitzpatrick_scale:!1,category:"symbols"},put_litter_in_its_place:{keywords:["blue-square","sign","human","info"],char:"",fitzpatrick_scale:!1,category:"symbols"},cinema:{keywords:["blue-square","record","film","movie","curtain","stage","theater"],char:"",fitzpatrick_scale:!1,category:"symbols"},signal_strength:{keywords:["blue-square","reception","phone","internet","connection","wifi","bluetooth","bars"],char:"",fitzpatrick_scale:!1,category:"symbols"},koko:{keywords:["blue-square","here","katakana","japanese","destination"],char:"",fitzpatrick_scale:!1,category:"symbols"},ng:{keywords:["blue-square","words","shape","icon"],char:"",fitzpatrick_scale:!1,category:"symbols"},ok:{keywords:["good","agree","yes","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},up:{keywords:["blue-square","above","high"],char:"",fitzpatrick_scale:!1,category:"symbols"},cool:{keywords:["words","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},new:{keywords:["blue-square","words","start"],char:"",fitzpatrick_scale:!1,category:"symbols"},free:{keywords:["blue-square","words"],char:"",fitzpatrick_scale:!1,category:"symbols"},zero:{keywords:["0","numbers","blue-square","null"],char:"0",fitzpatrick_scale:!1,category:"symbols"},one:{keywords:["blue-square","numbers","1"],char:"1",fitzpatrick_scale:!1,category:"symbols"},two:{keywords:["numbers","2","prime","blue-square"],char:"2",fitzpatrick_scale:!1,category:"symbols"},three:{keywords:["3","numbers","prime","blue-square"],char:"3",fitzpatrick_scale:!1,category:"symbols"},four:{keywords:["4","numbers","blue-square"],char:"4",fitzpatrick_scale:!1,category:"symbols"},five:{keywords:["5","numbers","blue-square","prime"],char:"5",fitzpatrick_scale:!1,category:"symbols"},six:{keywords:["6","numbers","blue-square"],char:"6",fitzpatrick_scale:!1,category:"symbols"},seven:{keywords:["7","numbers","blue-square","prime"],char:"7",fitzpatrick_scale:!1,category:"symbols"},eight:{keywords:["8","blue-square","numbers"],char:"8",fitzpatrick_scale:!1,category:"symbols"},nine:{keywords:["blue-square","numbers","9"],char:"9",fitzpatrick_scale:!1,category:"symbols"},keycap_ten:{keywords:["numbers","10","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},asterisk:{keywords:["star","keycap"],char:"*",fitzpatrick_scale:!1,category:"symbols"},1234:{keywords:["numbers","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},eject_button:{keywords:["blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_forward:{keywords:["blue-square","right","direction","play"],char:"",fitzpatrick_scale:!1,category:"symbols"},pause_button:{keywords:["pause","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},next_track_button:{keywords:["forward","next","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},stop_button:{keywords:["blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},record_button:{keywords:["blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},play_or_pause_button:{keywords:["blue-square","play","pause"],char:"",fitzpatrick_scale:!1,category:"symbols"},previous_track_button:{keywords:["backward"],char:"",fitzpatrick_scale:!1,category:"symbols"},fast_forward:{keywords:["blue-square","play","speed","continue"],char:"",fitzpatrick_scale:!1,category:"symbols"},rewind:{keywords:["play","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},twisted_rightwards_arrows:{keywords:["blue-square","shuffle","music","random"],char:"",fitzpatrick_scale:!1,category:"symbols"},repeat:{keywords:["loop","record"],char:"",fitzpatrick_scale:!1,category:"symbols"},repeat_one:{keywords:["blue-square","loop"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_backward:{keywords:["blue-square","left","direction"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_up_small:{keywords:["blue-square","triangle","direction","point","forward","top"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_down_small:{keywords:["blue-square","direction","bottom"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_double_up:{keywords:["blue-square","direction","top"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_double_down:{keywords:["blue-square","direction","bottom"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_right:{keywords:["blue-square","next"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_left:{keywords:["blue-square","previous","back"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_up:{keywords:["blue-square","continue","top","direction"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_down:{keywords:["blue-square","direction","bottom"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_upper_right:{keywords:["blue-square","point","direction","diagonal","northeast"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_lower_right:{keywords:["blue-square","direction","diagonal","southeast"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_lower_left:{keywords:["blue-square","direction","diagonal","southwest"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_upper_left:{keywords:["blue-square","point","direction","diagonal","northwest"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_up_down:{keywords:["blue-square","direction","way","vertical"],char:"",fitzpatrick_scale:!1,category:"symbols"},left_right_arrow:{keywords:["shape","direction","horizontal","sideways"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrows_counterclockwise:{keywords:["blue-square","sync","cycle"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_right_hook:{keywords:["blue-square","return","rotate","direction"],char:"",fitzpatrick_scale:!1,category:"symbols"},leftwards_arrow_with_hook:{keywords:["back","return","blue-square","undo","enter"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_heading_up:{keywords:["blue-square","direction","top"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrow_heading_down:{keywords:["blue-square","direction","bottom"],char:"",fitzpatrick_scale:!1,category:"symbols"},hash:{keywords:["symbol","blue-square","twitter"],char:"#",fitzpatrick_scale:!1,category:"symbols"},information_source:{keywords:["blue-square","alphabet","letter"],char:"",fitzpatrick_scale:!1,category:"symbols"},abc:{keywords:["blue-square","alphabet"],char:"",fitzpatrick_scale:!1,category:"symbols"},abcd:{keywords:["blue-square","alphabet"],char:"",fitzpatrick_scale:!1,category:"symbols"},capital_abcd:{keywords:["alphabet","words","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},symbols:{keywords:["blue-square","music","note","ampersand","percent","glyphs","characters"],char:"",fitzpatrick_scale:!1,category:"symbols"},musical_note:{keywords:["score","tone","sound"],char:"",fitzpatrick_scale:!1,category:"symbols"},notes:{keywords:["music","score"],char:"",fitzpatrick_scale:!1,category:"symbols"},wavy_dash:{keywords:["draw","line","moustache","mustache","squiggle","scribble"],char:"",fitzpatrick_scale:!1,category:"symbols"},curly_loop:{keywords:["scribble","draw","shape","squiggle"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_check_mark:{keywords:["ok","nike","answer","yes","tick"],char:"",fitzpatrick_scale:!1,category:"symbols"},arrows_clockwise:{keywords:["sync","cycle","round","repeat"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_plus_sign:{keywords:["math","calculation","addition","more","increase"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_minus_sign:{keywords:["math","calculation","subtract","less"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_division_sign:{keywords:["divide","math","calculation"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_multiplication_x:{keywords:["math","calculation"],char:"",fitzpatrick_scale:!1,category:"symbols"},infinity:{keywords:["forever"],char:"",fitzpatrick_scale:!1,category:"symbols"},heavy_dollar_sign:{keywords:["money","sales","payment","currency","buck"],char:"",fitzpatrick_scale:!1,category:"symbols"},currency_exchange:{keywords:["money","sales","dollar","travel"],char:"",fitzpatrick_scale:!1,category:"symbols"},copyright:{keywords:["ip","license","circle","law","legal"],char:"",fitzpatrick_scale:!1,category:"symbols"},registered:{keywords:["alphabet","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},tm:{keywords:["trademark","brand","law","legal"],char:"",fitzpatrick_scale:!1,category:"symbols"},end:{keywords:["words","arrow"],char:"",fitzpatrick_scale:!1,category:"symbols"},back:{keywords:["arrow","words","return"],char:"",fitzpatrick_scale:!1,category:"symbols"},on:{keywords:["arrow","words"],char:"",fitzpatrick_scale:!1,category:"symbols"},top:{keywords:["words","blue-square"],char:"",fitzpatrick_scale:!1,category:"symbols"},soon:{keywords:["arrow","words"],char:"",fitzpatrick_scale:!1,category:"symbols"},ballot_box_with_check:{keywords:["ok","agree","confirm","black-square","vote","election","yes","tick"],char:"",fitzpatrick_scale:!1,category:"symbols"},radio_button:{keywords:["input","old","music","circle"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_circle:{keywords:["shape","round"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_circle:{keywords:["shape","button","round"],char:"",fitzpatrick_scale:!1,category:"symbols"},red_circle:{keywords:["shape","error","danger"],char:"",fitzpatrick_scale:!1,category:"symbols"},large_blue_circle:{keywords:["shape","icon","button"],char:"",fitzpatrick_scale:!1,category:"symbols"},small_orange_diamond:{keywords:["shape","jewel","gem"],char:"",fitzpatrick_scale:!1,category:"symbols"},small_blue_diamond:{keywords:["shape","jewel","gem"],char:"",fitzpatrick_scale:!1,category:"symbols"},large_orange_diamond:{keywords:["shape","jewel","gem"],char:"",fitzpatrick_scale:!1,category:"symbols"},large_blue_diamond:{keywords:["shape","jewel","gem"],char:"",fitzpatrick_scale:!1,category:"symbols"},small_red_triangle:{keywords:["shape","direction","up","top"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_small_square:{keywords:["shape","icon"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_small_square:{keywords:["shape","icon"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_large_square:{keywords:["shape","icon","button"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_large_square:{keywords:["shape","icon","stone","button"],char:"",fitzpatrick_scale:!1,category:"symbols"},small_red_triangle_down:{keywords:["shape","direction","bottom"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_medium_square:{keywords:["shape","button","icon"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_medium_square:{keywords:["shape","stone","icon"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_medium_small_square:{keywords:["icon","shape","button"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_medium_small_square:{keywords:["shape","stone","icon","button"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_square_button:{keywords:["shape","input","frame"],char:"",fitzpatrick_scale:!1,category:"symbols"},white_square_button:{keywords:["shape","input"],char:"",fitzpatrick_scale:!1,category:"symbols"},speaker:{keywords:["sound","volume","silence","broadcast"],char:"",fitzpatrick_scale:!1,category:"symbols"},sound:{keywords:["volume","speaker","broadcast"],char:"",fitzpatrick_scale:!1,category:"symbols"},loud_sound:{keywords:["volume","noise","noisy","speaker","broadcast"],char:"",fitzpatrick_scale:!1,category:"symbols"},mute:{keywords:["sound","volume","silence","quiet"],char:"",fitzpatrick_scale:!1,category:"symbols"},mega:{keywords:["sound","speaker","volume"],char:"",fitzpatrick_scale:!1,category:"symbols"},loudspeaker:{keywords:["volume","sound"],char:"",fitzpatrick_scale:!1,category:"symbols"},bell:{keywords:["sound","notification","christmas","xmas","chime"],char:"",fitzpatrick_scale:!1,category:"symbols"},no_bell:{keywords:["sound","volume","mute","quiet","silent"],char:"",fitzpatrick_scale:!1,category:"symbols"},black_joker:{keywords:["poker","cards","game","play","magic"],char:"",fitzpatrick_scale:!1,category:"symbols"},mahjong:{keywords:["game","play","chinese","kanji"],char:"",fitzpatrick_scale:!1,category:"symbols"},spades:{keywords:["poker","cards","suits","magic"],char:"",fitzpatrick_scale:!1,category:"symbols"},clubs:{keywords:["poker","cards","magic","suits"],char:"",fitzpatrick_scale:!1,category:"symbols"},hearts:{keywords:["poker","cards","magic","suits"],char:"",fitzpatrick_scale:!1,category:"symbols"},diamonds:{keywords:["poker","cards","magic","suits"],char:"",fitzpatrick_scale:!1,category:"symbols"},flower_playing_cards:{keywords:["game","sunset","red"],char:"",fitzpatrick_scale:!1,category:"symbols"},thought_balloon:{keywords:["bubble","cloud","speech","thinking","dream"],char:"",fitzpatrick_scale:!1,category:"symbols"},right_anger_bubble:{keywords:["caption","speech","thinking","mad"],char:"",fitzpatrick_scale:!1,category:"symbols"},speech_balloon:{keywords:["bubble","words","message","talk","chatting"],char:"",fitzpatrick_scale:!1,category:"symbols"},left_speech_bubble:{keywords:["words","message","talk","chatting"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock1:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock2:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock3:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock4:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock5:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock6:{keywords:["time","late","early","schedule","dawn","dusk"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock7:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock8:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock9:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock10:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock11:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock12:{keywords:["time","noon","midnight","midday","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock130:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock230:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock330:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock430:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock530:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock630:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock730:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock830:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock930:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock1030:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock1130:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},clock1230:{keywords:["time","late","early","schedule"],char:"",fitzpatrick_scale:!1,category:"symbols"},afghanistan:{keywords:["af","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},aland_islands:{keywords:["land","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},albania:{keywords:["al","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},algeria:{keywords:["dz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},american_samoa:{keywords:["american","ws","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},andorra:{keywords:["ad","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},angola:{keywords:["ao","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},anguilla:{keywords:["ai","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},antarctica:{keywords:["aq","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},antigua_barbuda:{keywords:["antigua","barbuda","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},argentina:{keywords:["ar","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},armenia:{keywords:["am","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},aruba:{keywords:["aw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},australia:{keywords:["au","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},austria:{keywords:["at","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},azerbaijan:{keywords:["az","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bahamas:{keywords:["bs","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bahrain:{keywords:["bh","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bangladesh:{keywords:["bd","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},barbados:{keywords:["bb","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},belarus:{keywords:["by","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},belgium:{keywords:["be","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},belize:{keywords:["bz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},benin:{keywords:["bj","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bermuda:{keywords:["bm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bhutan:{keywords:["bt","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bolivia:{keywords:["bo","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},caribbean_netherlands:{keywords:["bonaire","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bosnia_herzegovina:{keywords:["bosnia","herzegovina","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},botswana:{keywords:["bw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},brazil:{keywords:["br","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},british_indian_ocean_territory:{keywords:["british","indian","ocean","territory","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},british_virgin_islands:{keywords:["british","virgin","islands","bvi","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},brunei:{keywords:["bn","darussalam","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},bulgaria:{keywords:["bg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},burkina_faso:{keywords:["burkina","faso","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},burundi:{keywords:["bi","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cape_verde:{keywords:["cabo","verde","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cambodia:{keywords:["kh","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cameroon:{keywords:["cm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},canada:{keywords:["ca","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},canary_islands:{keywords:["canary","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cayman_islands:{keywords:["cayman","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},central_african_republic:{keywords:["central","african","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},chad:{keywords:["td","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},chile:{keywords:["flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cn:{keywords:["china","chinese","prc","flag","country","nation","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},christmas_island:{keywords:["christmas","island","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cocos_islands:{keywords:["cocos","keeling","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},colombia:{keywords:["co","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},comoros:{keywords:["km","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},congo_brazzaville:{keywords:["congo","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},congo_kinshasa:{keywords:["congo","democratic","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cook_islands:{keywords:["cook","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},costa_rica:{keywords:["costa","rica","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},croatia:{keywords:["hr","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cuba:{keywords:["cu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},curacao:{keywords:["curaao","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cyprus:{keywords:["cy","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},czech_republic:{keywords:["cz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},denmark:{keywords:["dk","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},djibouti:{keywords:["dj","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},dominica:{keywords:["dm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},dominican_republic:{keywords:["dominican","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},ecuador:{keywords:["ec","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},egypt:{keywords:["eg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},el_salvador:{keywords:["el","salvador","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},equatorial_guinea:{keywords:["equatorial","gn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},eritrea:{keywords:["er","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},estonia:{keywords:["ee","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},ethiopia:{keywords:["et","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},eu:{keywords:["european","union","flag","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},falkland_islands:{keywords:["falkland","islands","malvinas","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},faroe_islands:{keywords:["faroe","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},fiji:{keywords:["fj","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},finland:{keywords:["fi","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},fr:{keywords:["banner","flag","nation","france","french","country"],char:"",fitzpatrick_scale:!1,category:"flags"},french_guiana:{keywords:["french","guiana","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},french_polynesia:{keywords:["french","polynesia","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},french_southern_territories:{keywords:["french","southern","territories","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},gabon:{keywords:["ga","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},gambia:{keywords:["gm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},georgia:{keywords:["ge","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},de:{keywords:["german","nation","flag","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},ghana:{keywords:["gh","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},gibraltar:{keywords:["gi","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},greece:{keywords:["gr","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},greenland:{keywords:["gl","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},grenada:{keywords:["gd","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guadeloupe:{keywords:["gp","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guam:{keywords:["gu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guatemala:{keywords:["gt","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guernsey:{keywords:["gg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guinea:{keywords:["gn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guinea_bissau:{keywords:["gw","bissau","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},guyana:{keywords:["gy","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},haiti:{keywords:["ht","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},honduras:{keywords:["hn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},hong_kong:{keywords:["hong","kong","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},hungary:{keywords:["hu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},iceland:{keywords:["is","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},india:{keywords:["in","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},indonesia:{keywords:["flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},iran:{keywords:["iran,","islamic","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},iraq:{keywords:["iq","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},ireland:{keywords:["ie","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},isle_of_man:{keywords:["isle","man","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},israel:{keywords:["il","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},it:{keywords:["italy","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},cote_divoire:{keywords:["ivory","coast","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},jamaica:{keywords:["jm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},jp:{keywords:["japanese","nation","flag","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},jersey:{keywords:["je","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},jordan:{keywords:["jo","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kazakhstan:{keywords:["kz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kenya:{keywords:["ke","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kiribati:{keywords:["ki","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kosovo:{keywords:["xk","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kuwait:{keywords:["kw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kyrgyzstan:{keywords:["kg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},laos:{keywords:["lao","democratic","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},latvia:{keywords:["lv","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},lebanon:{keywords:["lb","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},lesotho:{keywords:["ls","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},liberia:{keywords:["lr","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},libya:{keywords:["ly","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},liechtenstein:{keywords:["li","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},lithuania:{keywords:["lt","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},luxembourg:{keywords:["lu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},macau:{keywords:["macao","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},macedonia:{keywords:["macedonia,","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},madagascar:{keywords:["mg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},malawi:{keywords:["mw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},malaysia:{keywords:["my","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},maldives:{keywords:["mv","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mali:{keywords:["ml","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},malta:{keywords:["mt","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},marshall_islands:{keywords:["marshall","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},martinique:{keywords:["mq","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mauritania:{keywords:["mr","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mauritius:{keywords:["mu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mayotte:{keywords:["yt","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mexico:{keywords:["mx","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},micronesia:{keywords:["micronesia,","federated","states","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},moldova:{keywords:["moldova,","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},monaco:{keywords:["mc","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mongolia:{keywords:["mn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},montenegro:{keywords:["me","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},montserrat:{keywords:["ms","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},morocco:{keywords:["ma","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},mozambique:{keywords:["mz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},myanmar:{keywords:["mm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},namibia:{keywords:["na","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},nauru:{keywords:["nr","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},nepal:{keywords:["np","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},netherlands:{keywords:["nl","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},new_caledonia:{keywords:["new","caledonia","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},new_zealand:{keywords:["new","zealand","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},nicaragua:{keywords:["ni","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},niger:{keywords:["ne","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},nigeria:{keywords:["flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},niue:{keywords:["nu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},norfolk_island:{keywords:["norfolk","island","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},northern_mariana_islands:{keywords:["northern","mariana","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},north_korea:{keywords:["north","korea","nation","flag","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},norway:{keywords:["no","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},oman:{keywords:["om_symbol","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},pakistan:{keywords:["pk","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},palau:{keywords:["pw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},palestinian_territories:{keywords:["palestine","palestinian","territories","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},panama:{keywords:["pa","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},papua_new_guinea:{keywords:["papua","new","guinea","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},paraguay:{keywords:["py","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},peru:{keywords:["pe","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},philippines:{keywords:["ph","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},pitcairn_islands:{keywords:["pitcairn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},poland:{keywords:["pl","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},portugal:{keywords:["pt","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},puerto_rico:{keywords:["puerto","rico","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},qatar:{keywords:["qa","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},reunion:{keywords:["runion","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},romania:{keywords:["ro","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},ru:{keywords:["russian","federation","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},rwanda:{keywords:["rw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},st_barthelemy:{keywords:["saint","barthlemy","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},st_helena:{keywords:["saint","helena","ascension","tristan","cunha","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},st_kitts_nevis:{keywords:["saint","kitts","nevis","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},st_lucia:{keywords:["saint","lucia","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},st_pierre_miquelon:{keywords:["saint","pierre","miquelon","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},st_vincent_grenadines:{keywords:["saint","vincent","grenadines","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},samoa:{keywords:["ws","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},san_marino:{keywords:["san","marino","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},sao_tome_principe:{keywords:["sao","tome","principe","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},saudi_arabia:{keywords:["flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},senegal:{keywords:["sn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},serbia:{keywords:["rs","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},seychelles:{keywords:["sc","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},sierra_leone:{keywords:["sierra","leone","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},singapore:{keywords:["sg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},sint_maarten:{keywords:["sint","maarten","dutch","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},slovakia:{keywords:["sk","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},slovenia:{keywords:["si","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},solomon_islands:{keywords:["solomon","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},somalia:{keywords:["so","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},south_africa:{keywords:["south","africa","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},south_georgia_south_sandwich_islands:{keywords:["south","georgia","sandwich","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},kr:{keywords:["south","korea","nation","flag","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},south_sudan:{keywords:["south","sd","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},es:{keywords:["spain","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},sri_lanka:{keywords:["sri","lanka","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},sudan:{keywords:["sd","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},suriname:{keywords:["sr","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},swaziland:{keywords:["sz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},sweden:{keywords:["se","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},switzerland:{keywords:["ch","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},syria:{keywords:["syrian","arab","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},taiwan:{keywords:["tw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tajikistan:{keywords:["tj","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tanzania:{keywords:["tanzania,","united","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},thailand:{keywords:["th","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},timor_leste:{keywords:["timor","leste","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},togo:{keywords:["tg","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tokelau:{keywords:["tk","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tonga:{keywords:["to","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},trinidad_tobago:{keywords:["trinidad","tobago","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tunisia:{keywords:["tn","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tr:{keywords:["turkey","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},turkmenistan:{keywords:["flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},turks_caicos_islands:{keywords:["turks","caicos","islands","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},tuvalu:{keywords:["flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},uganda:{keywords:["ug","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},ukraine:{keywords:["ua","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},united_arab_emirates:{keywords:["united","arab","emirates","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},uk:{keywords:["united","kingdom","great","britain","northern","ireland","flag","nation","country","banner","british","UK","english","england","union jack"],char:"",fitzpatrick_scale:!1,category:"flags"},england:{keywords:["flag","english"],char:"",fitzpatrick_scale:!1,category:"flags"},scotland:{keywords:["flag","scottish"],char:"",fitzpatrick_scale:!1,category:"flags"},wales:{keywords:["flag","welsh"],char:"",fitzpatrick_scale:!1,category:"flags"},us:{keywords:["united","states","america","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},us_virgin_islands:{keywords:["virgin","islands","us","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},uruguay:{keywords:["uy","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},uzbekistan:{keywords:["uz","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},vanuatu:{keywords:["vu","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},vatican_city:{keywords:["vatican","city","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},venezuela:{keywords:["ve","bolivarian","republic","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},vietnam:{keywords:["viet","nam","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},wallis_futuna:{keywords:["wallis","futuna","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},western_sahara:{keywords:["western","sahara","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},yemen:{keywords:["ye","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},zambia:{keywords:["zm","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},zimbabwe:{keywords:["zw","flag","nation","country","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},united_nations:{keywords:["un","flag","banner"],char:"",fitzpatrick_scale:!1,category:"flags"},pirate_flag:{keywords:["skull","crossbones","flag","banner"],char:"",fitzpatrick_scale:!1,category:"flags"}});tinymce.Resource.add("content/default/content.css",`body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;line-height:1.4;margin:1rem}table{border-collapse:collapse}table:not([cellpadding]) td,table:not([cellpadding]) th{padding:.4rem}table[border]:not([border="0"]):not([style*=border-width]) td,table[border]:not([border="0"]):not([style*=border-width]) th{border-width:1px}table[border]:not([border="0"]):not([style*=border-style]) td,table[border]:not([border="0"]):not([style*=border-style]) th{border-style:solid}table[border]:not([border="0"]):not([style*=border-color]) td,table[border]:not([border="0"]):not([style*=border-color]) th{border-color:#ccc}figure{display:table;margin:1rem auto}figure figcaption{color:#999;display:block;margin-top:.25rem;text-align:center}hr{border-color:#ccc;border-style:solid;border-width:1px 0 0 0}code{background-color:#e8e8e8;border-radius:3px;padding:.1rem .2rem}.mce-content-body:not([dir=rtl]) blockquote{border-left:2px solid #ccc;margin-left:1.5rem;padding-left:1rem}.mce-content-body[dir=rtl] blockquote{border-right:2px solid #ccc;margin-right:1.5rem;padding-right:1rem}`);tinymce.Resource.add("content/dark/content.css",`body{background-color:#222f3e;color:#fff;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;line-height:1.4;margin:1rem}a{color:#4099ff}table{border-collapse:collapse}table:not([cellpadding]) td,table:not([cellpadding]) th{padding:.4rem}table[border]:not([border="0"]):not([style*=border-width]) td,table[border]:not([border="0"]):not([style*=border-width]) th{border-width:1px}table[border]:not([border="0"]):not([style*=border-style]) td,table[border]:not([border="0"]):not([style*=border-style]) th{border-style:solid}table[border]:not([border="0"]):not([style*=border-color]) td,table[border]:not([border="0"]):not([style*=border-color]) th{border-color:#6d737b}figure{display:table;margin:1rem auto}figure figcaption{color:#8a8f97;display:block;margin-top:.25rem;text-align:center}hr{border-color:#6d737b;border-style:solid;border-width:1px 0 0 0}code{background-color:#6d737b;border-radius:3px;padding:.1rem .2rem}.mce-content-body:not([dir=rtl]) blockquote{border-left:2px solid #6d737b;margin-left:1.5rem;padding-left:1rem}.mce-content-body[dir=rtl] blockquote{border-right:2px solid #6d737b;margin-right:1.5rem;padding-right:1rem}`);tinymce.Resource.add("content/tinymce-5-dark/content.css",`body{background-color:#2f3742;color:#dfe0e4;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;line-height:1.4;margin:1rem}a{color:#4099ff}table{border-collapse:collapse}table:not([cellpadding]) td,table:not([cellpadding]) th{padding:.4rem}table[border]:not([border="0"]):not([style*=border-width]) td,table[border]:not([border="0"]):not([style*=border-width]) th{border-width:1px}table[border]:not([border="0"]):not([style*=border-style]) td,table[border]:not([border="0"]):not([style*=border-style]) th{border-style:solid}table[border]:not([border="0"]):not([style*=border-color]) td,table[border]:not([border="0"]):not([style*=border-color]) th{border-color:#6d737b}figure{display:table;margin:1rem auto}figure figcaption{color:#8a8f97;display:block;margin-top:.25rem;text-align:center}hr{border-color:#6d737b;border-style:solid;border-width:1px 0 0 0}code{background-color:#6d737b;border-radius:3px;padding:.1rem .2rem}.mce-content-body:not([dir=rtl]) blockquote{border-left:2px solid #6d737b;margin-left:1.5rem;padding-left:1rem}.mce-content-body[dir=rtl] blockquote{border-right:2px solid #6d737b;margin-right:1.5rem;padding-right:1rem}`);tinymce.Resource.add("ui/default/content.css",`.mce-content-body .mce-item-anchor{background:transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'8'%20height%3D'12'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20d%3D'M0%200L8%200%208%2012%204.09117821%209%200%2012z'%2F%3E%3C%2Fsvg%3E%0A") no-repeat center}.mce-content-body .mce-item-anchor:empty{cursor:default;display:inline-block;height:12px!important;padding:0 2px;-webkit-user-modify:read-only;-moz-user-modify:read-only;-webkit-user-select:all;user-select:all;width:8px!important}.mce-content-body .mce-item-anchor:not(:empty){background-position-x:2px;display:inline-block;padding-left:12px}.mce-content-body .mce-item-anchor[data-mce-selected]{outline-offset:1px}.tox-comments-visible .tox-comment[contenteditable=false]:not([data-mce-selected]),.tox-comments-visible span.tox-comment img:not([data-mce-selected]),.tox-comments-visible span.tox-comment span.mce-preview-object:not([data-mce-selected]),.tox-comments-visible span.tox-comment>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment>video:not([data-mce-selected]){outline:3px solid #ffe796}.tox-comments-visible .tox-comment[contenteditable=false][data-mce-annotation-active=true]:not([data-mce-selected]){outline:3px solid #ffcf30}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] img:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] span.mce-preview-object:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>video:not([data-mce-selected]){outline:3px solid #ffcf30}.tox-comments-visible span.tox-comment:not([data-mce-selected]){background-color:#ffe796;outline:0}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]:not([data-mce-selected=inline-boundary]){background-color:#ffcf30}.tox-comments-visible span.tox-comment[data-mce-selected]{background-color:#ffcf30;border-radius:3px;box-shadow:0 0 0 2px #006ce7}.tox-checklist>li:not(.tox-checklist--hidden){list-style:none;margin:.25em 0}.tox-checklist>li:not(.tox-checklist--hidden)::before{content:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-unchecked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2215%22%20height%3D%2215%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill-rule%3D%22nonzero%22%20stroke%3D%22%234C4C4C%22%20rx%3D%222%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A");cursor:pointer;height:1em;margin-left:-1.5em;margin-top:.125em;position:absolute;width:1em}.tox-checklist li:not(.tox-checklist--hidden).tox-checklist--checked::before{content:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-checked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%234099FF%22%20fill-rule%3D%22nonzero%22%20rx%3D%222%22%2F%3E%3Cpath%20id%3D%22Path%22%20fill%3D%22%23FFF%22%20fill-rule%3D%22nonzero%22%20d%3D%22M11.5703186%2C3.14417309%20C11.8516238%2C2.73724603%2012.4164781%2C2.62829933%2012.83558%2C2.89774797%20C13.260121%2C3.17069355%2013.3759736%2C3.72932262%2013.0909105%2C4.14168582%20L7.7580587%2C11.8560195%20C7.43776896%2C12.3193404%206.76483983%2C12.3852142%206.35607322%2C11.9948725%20L3.02491697%2C8.8138662%20C2.66090143%2C8.46625845%202.65798871%2C7.89594698%203.01850234%2C7.54483354%20C3.373942%2C7.19866177%203.94940006%2C7.19592841%204.30829608%2C7.5386474%20L6.85276923%2C9.9684299%20L11.5703186%2C3.14417309%20Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A")}[dir=rtl] .tox-checklist>li:not(.tox-checklist--hidden)::before{margin-left:0;margin-right:-1.5em}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;hyphens:none}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.mce-content-body{overflow-wrap:break-word;word-wrap:break-word}.mce-content-body .mce-visual-caret{background-color:#000;background-color:currentColor;position:absolute}.mce-content-body .mce-visual-caret-hidden{display:none}.mce-content-body [data-mce-caret]{left:-1000px;margin:0;padding:0;position:absolute;right:auto;top:0}.mce-content-body .mce-offscreen-selection{left:-2000000px;max-width:1000000px;position:absolute}.mce-content-body [contentEditable=false]{cursor:default}.mce-content-body [contentEditable=true]{cursor:text}.tox-cursor-format-painter{cursor:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%0A%20%20%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M15%2C6%20C15%2C5.45%2014.55%2C5%2014%2C5%20L6%2C5%20C5.45%2C5%205%2C5.45%205%2C6%20L5%2C10%20C5%2C10.55%205.45%2C11%206%2C11%20L14%2C11%20C14.55%2C11%2015%2C10.55%2015%2C10%20L15%2C9%20L16%2C9%20L16%2C12%20L9%2C12%20L9%2C19%20C9%2C19.55%209.45%2C20%2010%2C20%20L11%2C20%20C11.55%2C20%2012%2C19.55%2012%2C19%20L12%2C14%20L18%2C14%20L18%2C7%20L15%2C7%20L15%2C6%20Z%22%2F%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M1%2C1%20L8.25%2C1%20C8.66421356%2C1%209%2C1.33578644%209%2C1.75%20L9%2C1.75%20C9%2C2.16421356%208.66421356%2C2.5%208.25%2C2.5%20L2.5%2C2.5%20L2.5%2C8.25%20C2.5%2C8.66421356%202.16421356%2C9%201.75%2C9%20L1.75%2C9%20C1.33578644%2C9%201%2C8.66421356%201%2C8.25%20L1%2C1%20Z%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A"),default}div.mce-footnotes hr{margin-inline:0 auto;width:25%}div.mce-footnotes li>a.mce-footnotes-backlink{-webkit-text-decoration:none;text-decoration:none}@media print{sup.mce-footnote a{color:#000;-webkit-text-decoration:none;text-decoration:none}div.mce-footnotes{page-break-inside:avoid;break-inside:avoid;width:100%}div.mce-footnotes li>a.mce-footnotes-backlink{display:none}}tiny-math-block{display:flex;justify-content:center;margin:16px 0 16px 0}tiny-math-inline{display:inline-block}.mce-content-body figure.align-left{float:left}.mce-content-body figure.align-right{float:right}.mce-content-body figure.image.align-center{display:table;margin-left:auto;margin-right:auto}.mce-preview-object{border:1px solid gray;display:inline-block;line-height:0;margin:0 2px;position:relative}.mce-preview-object .mce-shim{background:url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");height:100%;left:0;position:absolute;top:0;width:100%}.mce-preview-object[data-mce-selected="2"] .mce-shim{display:none}.mce-content-body .mce-mergetag{cursor:default!important;-webkit-user-select:none;user-select:none}.mce-content-body .mce-mergetag:hover{background-color:rgba(0,108,231,.1)}.mce-content-body .mce-mergetag-affix{background-color:rgba(0,108,231,.1);color:#006ce7}.mce-object{background:transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M4%203h16a1%201%200%200%201%201%201v16a1%201%200%200%201-1%201H4a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1zm1%202v14h14V5H5zm4.79%202.565l5.64%204.028a.5.5%200%200%201%200%20.814l-5.64%204.028a.5.5%200%200%201-.79-.407V7.972a.5.5%200%200%201%20.79-.407z%22%2F%3E%3C%2Fsvg%3E%0A") no-repeat center;border:1px dashed #aaa}.mce-pagebreak{border:1px dashed #aaa;cursor:default;display:block;height:5px;margin-top:15px;page-break-before:always;width:100%}@media print{.mce-pagebreak{border:0}}.tiny-pageembed .mce-shim{background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);height:100%;left:0;position:absolute;top:0;width:100%}.tiny-pageembed[data-mce-selected="2"] .mce-shim{display:none}.tiny-pageembed{display:inline-block;position:relative}.tiny-pageembed--16by9,.tiny-pageembed--1by1,.tiny-pageembed--21by9,.tiny-pageembed--4by3{display:block;overflow:hidden;padding:0;position:relative;width:100%}.tiny-pageembed--21by9{padding-top:42.857143%}.tiny-pageembed--16by9{padding-top:56.25%}.tiny-pageembed--4by3{padding-top:75%}.tiny-pageembed--1by1{padding-top:100%}.tiny-pageembed--16by9 iframe,.tiny-pageembed--1by1 iframe,.tiny-pageembed--21by9 iframe,.tiny-pageembed--4by3 iframe{border:0;height:100%;left:0;position:absolute;top:0;width:100%}.mce-content-body[data-mce-placeholder]{position:relative}.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:rgba(34,47,62,.7);content:attr(data-mce-placeholder);position:absolute}@media (forced-colors:active){.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:highlight;filter:brightness(30%);z-index:-1}}.mce-content-body:not([dir=rtl])[data-mce-placeholder]:not(.mce-visualblocks)::before{left:1px}.mce-content-body[dir=rtl][data-mce-placeholder]:not(.mce-visualblocks)::before{right:1px}.mce-content-body div.mce-resizehandle{background-color:#4099ff;border-color:#4099ff;border-style:solid;border-width:1px;box-sizing:border-box;height:10px;position:absolute;width:10px;z-index:1298}.mce-content-body div.mce-resizehandle:hover{background-color:#4099ff}.mce-content-body div.mce-resizehandle:first-of-type{cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(2){cursor:nesw-resize}.mce-content-body div.mce-resizehandle:nth-of-type(3){cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(4){cursor:nesw-resize}.mce-content-body .mce-resize-backdrop{z-index:10000}.mce-content-body .mce-clonedresizable{cursor:default;opacity:.5;outline:1px dashed black;position:absolute;z-index:10001}.mce-content-body .mce-clonedresizable.mce-resizetable-columns td,.mce-content-body .mce-clonedresizable.mce-resizetable-columns th{border:0}.mce-content-body .mce-resize-helper{background:#555;background:rgba(0 0 0%);border:1px;border-radius:3px;color:#fff;display:none;font-family:sans-serif;font-size:12px;line-height:14px;margin:5px 10px;padding:5px;position:absolute;white-space:nowrap;z-index:10002}.tox-rtc-user-selection{position:relative}.tox-rtc-user-cursor{bottom:0;cursor:default;position:absolute;top:0;width:2px}.tox-rtc-user-cursor::before{background-color:inherit;border-radius:50%;content:'';display:block;height:8px;position:absolute;right:-3px;top:-3px;width:8px}.tox-rtc-user-cursor:hover::after{background-color:inherit;border-radius:100px;box-sizing:border-box;color:#fff;content:attr(data-user);display:block;font-size:12px;font-weight:700;left:-5px;min-height:8px;min-width:8px;padding:0 12px;position:absolute;top:-11px;white-space:nowrap;z-index:1000}.tox-rtc-user-selection--1 .tox-rtc-user-cursor{background-color:#2dc26b}.tox-rtc-user-selection--2 .tox-rtc-user-cursor{background-color:#e03e2d}.tox-rtc-user-selection--3 .tox-rtc-user-cursor{background-color:#f1c40f}.tox-rtc-user-selection--4 .tox-rtc-user-cursor{background-color:#3598db}.tox-rtc-user-selection--5 .tox-rtc-user-cursor{background-color:#b96ad9}.tox-rtc-user-selection--6 .tox-rtc-user-cursor{background-color:#e67e23}.tox-rtc-user-selection--7 .tox-rtc-user-cursor{background-color:#aaa69d}.tox-rtc-user-selection--8 .tox-rtc-user-cursor{background-color:#f368e0}.tox-rtc-remote-image{background:#eaeaea url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2236%22%20height%3D%2212%22%20viewBox%3D%220%200%2036%2012%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%3Ccircle%20cx%3D%226%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2218%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.33s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2230%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.66s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%3C%2Fsvg%3E%0A") no-repeat center center;border:1px solid #ccc;min-height:240px;min-width:320px}.mce-match-marker{background:#aaa;color:#fff}.mce-match-marker-selected{background:#39f;color:#fff}.mce-match-marker-selected::selection{background:#39f;color:#fff}.mce-content-body audio[data-mce-selected],.mce-content-body details[data-mce-selected],.mce-content-body embed[data-mce-selected],.mce-content-body img[data-mce-selected],.mce-content-body object[data-mce-selected],.mce-content-body table[data-mce-selected],.mce-content-body video[data-mce-selected]{outline:3px solid #b4d7ff}.mce-content-body hr[data-mce-selected]{outline:3px solid #b4d7ff;outline-offset:1px}.mce-content-body [contentEditable=false] [contentEditable=true]:focus{outline:3px solid #b4d7ff}.mce-content-body [contentEditable=false] [contentEditable=true]:hover{outline:3px solid #b4d7ff}.mce-content-body [contentEditable=false][data-mce-selected]{cursor:not-allowed;outline:3px solid #b4d7ff}.mce-content-body [data-mce-selected=inline-boundary]{background-color:#b4d7ff}.mce-content-body .mce-edit-focus{outline:3px solid #b4d7ff}.mce-content-body td[data-mce-selected],.mce-content-body th[data-mce-selected]{position:relative}.mce-content-body td[data-mce-selected]::selection,.mce-content-body th[data-mce-selected]::selection{background:0 0}.mce-content-body td[data-mce-selected] *,.mce-content-body th[data-mce-selected] *{outline:0;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{background-color:rgba(180,215,255,.7);border:1px solid rgba(180,215,255,.7);bottom:-1px;content:'';left:-1px;mix-blend-mode:multiply;position:absolute;right:-1px;top:-1px}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{border-color:rgba(0,84,180,.7)}}.mce-content-body img[data-mce-selected]::selection{background:0 0}.ephox-snooker-resizer-bar{background-color:#b4d7ff;opacity:0;-webkit-user-select:none;user-select:none}.ephox-snooker-resizer-cols{cursor:col-resize}.ephox-snooker-resizer-rows{cursor:row-resize}.ephox-snooker-resizer-bar.ephox-snooker-resizer-bar-dragging{opacity:1}.mce-spellchecker-word{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%23ff0000'%20fill%3D'none'%20stroke-linecap%3D'round'%20stroke-opacity%3D'.75'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default;height:2rem}.mce-spellchecker-grammar{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%2300A835'%20fill%3D'none'%20stroke-linecap%3D'round'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default}.mce-toc{border:1px solid gray}.mce-toc h2{margin:4px}.mce-toc ul>li{list-style-type:none}[data-mce-block]{display:block}.mce-item-table:not([border]),.mce-item-table:not([border]) caption,.mce-item-table:not([border]) td,.mce-item-table:not([border]) th,.mce-item-table[border="0"],.mce-item-table[border="0"] caption,.mce-item-table[border="0"] td,.mce-item-table[border="0"] th,table[style*="border-width: 0px"],table[style*="border-width: 0px"] caption,table[style*="border-width: 0px"] td,table[style*="border-width: 0px"] th{border:1px dashed #bbb}.mce-visualblocks address,.mce-visualblocks article,.mce-visualblocks aside,.mce-visualblocks blockquote,.mce-visualblocks div:not([data-mce-bogus]),.mce-visualblocks dl,.mce-visualblocks figcaption,.mce-visualblocks figure,.mce-visualblocks h1,.mce-visualblocks h2,.mce-visualblocks h3,.mce-visualblocks h4,.mce-visualblocks h5,.mce-visualblocks h6,.mce-visualblocks hgroup,.mce-visualblocks ol,.mce-visualblocks p,.mce-visualblocks pre,.mce-visualblocks section,.mce-visualblocks ul{background-repeat:no-repeat;border:1px dashed #bbb;margin-left:3px;padding-top:10px}.mce-visualblocks p{background-image:url(data:image/gif;base64,R0lGODlhCQAJAJEAAAAAAP///7u7u////yH5BAEAAAMALAAAAAAJAAkAAAIQnG+CqCN/mlyvsRUpThG6AgA7)}.mce-visualblocks h1{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGu1JuxHoAfRNRW3TWXyF2YiRUAOw==)}.mce-visualblocks h2{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8Hybbx4oOuqgTynJd6bGlWg3DkJzoaUAAAOw==)}.mce-visualblocks h3{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIZjI8Hybbx4oOuqgTynJf2Ln2NOHpQpmhAAQA7)}.mce-visualblocks h4{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxInR0zqeAdhtJlXwV1oCll2HaWgAAOw==)}.mce-visualblocks h5{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjane4iq5GlW05GgIkIZUAAAOw==)}.mce-visualblocks h6{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjan04jep1iZ1XRlAo5bVgAAOw==)}.mce-visualblocks div:not([data-mce-bogus]){background-image:url(data:image/gif;base64,R0lGODlhEgAKAIABALu7u////yH5BAEAAAEALAAAAAASAAoAAAIfjI9poI0cgDywrhuxfbrzDEbQM2Ei5aRjmoySW4pAAQA7)}.mce-visualblocks section{background-image:url(data:image/gif;base64,R0lGODlhKAAKAIABALu7u////yH5BAEAAAEALAAAAAAoAAoAAAI5jI+pywcNY3sBWHdNrplytD2ellDeSVbp+GmWqaDqDMepc8t17Y4vBsK5hDyJMcI6KkuYU+jpjLoKADs=)}.mce-visualblocks article{background-image:url(data:image/gif;base64,R0lGODlhKgAKAIABALu7u////yH5BAEAAAEALAAAAAAqAAoAAAI6jI+pywkNY3wG0GBvrsd2tXGYSGnfiF7ikpXemTpOiJScasYoDJJrjsG9gkCJ0ag6KhmaIe3pjDYBBQA7)}.mce-visualblocks blockquote{background-image:url(data:image/gif;base64,R0lGODlhPgAKAIABALu7u////yH5BAEAAAEALAAAAAA+AAoAAAJPjI+py+0Knpz0xQDyuUhvfoGgIX5iSKZYgq5uNL5q69asZ8s5rrf0yZmpNkJZzFesBTu8TOlDVAabUyatguVhWduud3EyiUk45xhTTgMBBQA7)}.mce-visualblocks address{background-image:url(data:image/gif;base64,R0lGODlhLQAKAIABALu7u////yH5BAEAAAEALAAAAAAtAAoAAAI/jI+pywwNozSP1gDyyZcjb3UaRpXkWaXmZW4OqKLhBmLs+K263DkJK7OJeifh7FicKD9A1/IpGdKkyFpNmCkAADs=)}.mce-visualblocks pre{background-image:url(data:image/gif;base64,R0lGODlhFQAKAIABALu7uwAAACH5BAEAAAEALAAAAAAVAAoAAAIjjI+ZoN0cgDwSmnpz1NCueYERhnibZVKLNnbOq8IvKpJtVQAAOw==)}.mce-visualblocks figure{background-image:url(data:image/gif;base64,R0lGODlhJAAKAIAAALu7u////yH5BAEAAAEALAAAAAAkAAoAAAI0jI+py+2fwAHUSFvD3RlvG4HIp4nX5JFSpnZUJ6LlrM52OE7uSWosBHScgkSZj7dDKnWAAgA7)}.mce-visualblocks figcaption{border:1px dashed #bbb}.mce-visualblocks hgroup{background-image:url(data:image/gif;base64,R0lGODlhJwAKAIABALu7uwAAACH5BAEAAAEALAAAAAAnAAoAAAI3jI+pywYNI3uB0gpsRtt5fFnfNZaVSYJil4Wo03Hv6Z62uOCgiXH1kZIIJ8NiIxRrAZNMZAtQAAA7)}.mce-visualblocks aside{background-image:url(data:image/gif;base64,R0lGODlhHgAKAIABAKqqqv///yH5BAEAAAEALAAAAAAeAAoAAAItjI+pG8APjZOTzgtqy7I3f1yehmQcFY4WKZbqByutmW4aHUd6vfcVbgudgpYCADs=)}.mce-visualblocks ul{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIAAALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGuYnqUVSjvw26DzzXiqIDlVwAAOw==)}.mce-visualblocks ol{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybH6HHt0qourxC6CvzXieHyeWQAAOw==)}.mce-visualblocks dl{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybEOnmOvUoWznTqeuEjNSCqeGRUAOw==)}.mce-visualblocks:not([dir=rtl]) address,.mce-visualblocks:not([dir=rtl]) article,.mce-visualblocks:not([dir=rtl]) aside,.mce-visualblocks:not([dir=rtl]) blockquote,.mce-visualblocks:not([dir=rtl]) div:not([data-mce-bogus]),.mce-visualblocks:not([dir=rtl]) dl,.mce-visualblocks:not([dir=rtl]) figcaption,.mce-visualblocks:not([dir=rtl]) figure,.mce-visualblocks:not([dir=rtl]) h1,.mce-visualblocks:not([dir=rtl]) h2,.mce-visualblocks:not([dir=rtl]) h3,.mce-visualblocks:not([dir=rtl]) h4,.mce-visualblocks:not([dir=rtl]) h5,.mce-visualblocks:not([dir=rtl]) h6,.mce-visualblocks:not([dir=rtl]) hgroup,.mce-visualblocks:not([dir=rtl]) ol,.mce-visualblocks:not([dir=rtl]) p,.mce-visualblocks:not([dir=rtl]) pre,.mce-visualblocks:not([dir=rtl]) section,.mce-visualblocks:not([dir=rtl]) ul{margin-left:3px}.mce-visualblocks[dir=rtl] address,.mce-visualblocks[dir=rtl] article,.mce-visualblocks[dir=rtl] aside,.mce-visualblocks[dir=rtl] blockquote,.mce-visualblocks[dir=rtl] div:not([data-mce-bogus]),.mce-visualblocks[dir=rtl] dl,.mce-visualblocks[dir=rtl] figcaption,.mce-visualblocks[dir=rtl] figure,.mce-visualblocks[dir=rtl] h1,.mce-visualblocks[dir=rtl] h2,.mce-visualblocks[dir=rtl] h3,.mce-visualblocks[dir=rtl] h4,.mce-visualblocks[dir=rtl] h5,.mce-visualblocks[dir=rtl] h6,.mce-visualblocks[dir=rtl] hgroup,.mce-visualblocks[dir=rtl] ol,.mce-visualblocks[dir=rtl] p,.mce-visualblocks[dir=rtl] pre,.mce-visualblocks[dir=rtl] section,.mce-visualblocks[dir=rtl] ul{background-position-x:right;margin-right:3px}.mce-nbsp,.mce-shy{background:#aaa}.mce-shy::after{content:'-'}body{font-family:sans-serif}table{border-collapse:collapse}`);tinymce.Resource.add("ui/dark/content.css",`.mce-content-body .mce-item-anchor{background:transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'8'%20height%3D'12'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20d%3D'M0%200L8%200%208%2012%204.09117821%209%200%2012z'%20fill%3D%22%23cccccc%22%2F%3E%3C%2Fsvg%3E%0A") no-repeat center}.mce-content-body .mce-item-anchor:empty{cursor:default;display:inline-block;height:12px!important;padding:0 2px;-webkit-user-modify:read-only;-moz-user-modify:read-only;-webkit-user-select:all;user-select:all;width:8px!important}.mce-content-body .mce-item-anchor:not(:empty){background-position-x:2px;display:inline-block;padding-left:12px}.mce-content-body .mce-item-anchor[data-mce-selected]{outline-offset:1px}.tox-comments-visible .tox-comment[contenteditable=false]:not([data-mce-selected]),.tox-comments-visible span.tox-comment img:not([data-mce-selected]),.tox-comments-visible span.tox-comment span.mce-preview-object:not([data-mce-selected]),.tox-comments-visible span.tox-comment>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment>video:not([data-mce-selected]){outline:3px solid #1b3b60}.tox-comments-visible .tox-comment[contenteditable=false][data-mce-annotation-active=true]:not([data-mce-selected]){outline:3px solid #006ce7}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] img:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] span.mce-preview-object:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>video:not([data-mce-selected]){outline:3px solid #006ce7}.tox-comments-visible span.tox-comment:not([data-mce-selected]){background-color:#1b3b60;outline:0}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]:not([data-mce-selected=inline-boundary]){background-color:#1b3b60}.tox-comments-visible span.tox-comment[data-mce-selected]{background-color:#1b3b60;border-radius:3px;box-shadow:0 0 0 2px #006ce7}.tox-checklist>li:not(.tox-checklist--hidden){list-style:none;margin:.25em 0}.tox-checklist>li:not(.tox-checklist--hidden)::before{content:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-unchecked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2215%22%20height%3D%2215%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill-rule%3D%22nonzero%22%20stroke%3D%22%236d737b%22%20rx%3D%222%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A");cursor:pointer;height:1em;margin-left:-1.5em;margin-top:.125em;position:absolute;width:1em}.tox-checklist li:not(.tox-checklist--hidden).tox-checklist--checked::before{content:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-checked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%234099FF%22%20fill-rule%3D%22nonzero%22%20rx%3D%222%22%2F%3E%3Cpath%20id%3D%22Path%22%20fill%3D%22%23FFF%22%20fill-rule%3D%22nonzero%22%20d%3D%22M11.5703186%2C3.14417309%20C11.8516238%2C2.73724603%2012.4164781%2C2.62829933%2012.83558%2C2.89774797%20C13.260121%2C3.17069355%2013.3759736%2C3.72932262%2013.0909105%2C4.14168582%20L7.7580587%2C11.8560195%20C7.43776896%2C12.3193404%206.76483983%2C12.3852142%206.35607322%2C11.9948725%20L3.02491697%2C8.8138662%20C2.66090143%2C8.46625845%202.65798871%2C7.89594698%203.01850234%2C7.54483354%20C3.373942%2C7.19866177%203.94940006%2C7.19592841%204.30829608%2C7.5386474%20L6.85276923%2C9.9684299%20L11.5703186%2C3.14417309%20Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A")}[dir=rtl] .tox-checklist>li:not(.tox-checklist--hidden)::before{margin-left:0;margin-right:-1.5em}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:0 0;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#282a36}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#6272a4}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ff79c6}.token.boolean,.token.number{color:#bd93f9}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#50fa7b}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#f1fa8c}.token.keyword{color:#8be9fd}.token.important,.token.regex{color:#ffb86c}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.mce-content-body{overflow-wrap:break-word;word-wrap:break-word}.mce-content-body .mce-visual-caret{background-color:#000;background-color:currentColor;position:absolute}.mce-content-body .mce-visual-caret-hidden{display:none}.mce-content-body [data-mce-caret]{left:-1000px;margin:0;padding:0;position:absolute;right:auto;top:0}.mce-content-body .mce-offscreen-selection{left:-2000000px;max-width:1000000px;position:absolute}.mce-content-body [contentEditable=false]{cursor:default}.mce-content-body [contentEditable=true]{cursor:text}.tox-cursor-format-painter{cursor:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%0A%20%20%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M15%2C6%20C15%2C5.45%2014.55%2C5%2014%2C5%20L6%2C5%20C5.45%2C5%205%2C5.45%205%2C6%20L5%2C10%20C5%2C10.55%205.45%2C11%206%2C11%20L14%2C11%20C14.55%2C11%2015%2C10.55%2015%2C10%20L15%2C9%20L16%2C9%20L16%2C12%20L9%2C12%20L9%2C19%20C9%2C19.55%209.45%2C20%2010%2C20%20L11%2C20%20C11.55%2C20%2012%2C19.55%2012%2C19%20L12%2C14%20L18%2C14%20L18%2C7%20L15%2C7%20L15%2C6%20Z%22%2F%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M1%2C1%20L8.25%2C1%20C8.66421356%2C1%209%2C1.33578644%209%2C1.75%20L9%2C1.75%20C9%2C2.16421356%208.66421356%2C2.5%208.25%2C2.5%20L2.5%2C2.5%20L2.5%2C8.25%20C2.5%2C8.66421356%202.16421356%2C9%201.75%2C9%20L1.75%2C9%20C1.33578644%2C9%201%2C8.66421356%201%2C8.25%20L1%2C1%20Z%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A"),default}div.mce-footnotes hr{margin-inline:0 auto;width:25%}div.mce-footnotes li>a.mce-footnotes-backlink{-webkit-text-decoration:none;text-decoration:none}@media print{sup.mce-footnote a{color:#000;-webkit-text-decoration:none;text-decoration:none}div.mce-footnotes{page-break-inside:avoid;break-inside:avoid;width:100%}div.mce-footnotes li>a.mce-footnotes-backlink{display:none}}tiny-math-block{display:flex;justify-content:center;margin:16px 0 16px 0}tiny-math-inline{display:inline-block}.mce-content-body figure.align-left{float:left}.mce-content-body figure.align-right{float:right}.mce-content-body figure.image.align-center{display:table;margin-left:auto;margin-right:auto}.mce-preview-object{border:1px solid gray;display:inline-block;line-height:0;margin:0 2px;position:relative}.mce-preview-object .mce-shim{background:url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");height:100%;left:0;position:absolute;top:0;width:100%}.mce-preview-object[data-mce-selected="2"] .mce-shim{display:none}.mce-content-body .mce-mergetag{cursor:default!important;-webkit-user-select:none;user-select:none}.mce-content-body .mce-mergetag:hover{background-color:rgba(0,108,231,.3)}.mce-content-body .mce-mergetag-affix{background-color:rgba(0,108,231,.3);color:#006ce7}.mce-object{background:transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M4%203h16a1%201%200%200%201%201%201v16a1%201%200%200%201-1%201H4a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1zm1%202v14h14V5H5zm4.79%202.565l5.64%204.028a.5.5%200%200%201%200%20.814l-5.64%204.028a.5.5%200%200%201-.79-.407V7.972a.5.5%200%200%201%20.79-.407z%22%20fill%3D%22%23cccccc%22%2F%3E%3C%2Fsvg%3E%0A") no-repeat center;border:1px dashed #aaa}.mce-pagebreak{border:1px dashed #aaa;cursor:default;display:block;height:5px;margin-top:15px;page-break-before:always;width:100%}@media print{.mce-pagebreak{border:0}}.tiny-pageembed .mce-shim{background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);height:100%;left:0;position:absolute;top:0;width:100%}.tiny-pageembed[data-mce-selected="2"] .mce-shim{display:none}.tiny-pageembed{display:inline-block;position:relative}.tiny-pageembed--16by9,.tiny-pageembed--1by1,.tiny-pageembed--21by9,.tiny-pageembed--4by3{display:block;overflow:hidden;padding:0;position:relative;width:100%}.tiny-pageembed--21by9{padding-top:42.857143%}.tiny-pageembed--16by9{padding-top:56.25%}.tiny-pageembed--4by3{padding-top:75%}.tiny-pageembed--1by1{padding-top:100%}.tiny-pageembed--16by9 iframe,.tiny-pageembed--1by1 iframe,.tiny-pageembed--21by9 iframe,.tiny-pageembed--4by3 iframe{border:0;height:100%;left:0;position:absolute;top:0;width:100%}.mce-content-body[data-mce-placeholder]{position:relative}.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:rgba(34,47,62,.7);content:attr(data-mce-placeholder);position:absolute}@media (forced-colors:active){.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:highlight;filter:brightness(30%);z-index:-1}}.mce-content-body:not([dir=rtl])[data-mce-placeholder]:not(.mce-visualblocks)::before{left:1px}.mce-content-body[dir=rtl][data-mce-placeholder]:not(.mce-visualblocks)::before{right:1px}.mce-content-body div.mce-resizehandle{background-color:#4099ff;border-color:#4099ff;border-style:solid;border-width:1px;box-sizing:border-box;height:10px;position:absolute;width:10px;z-index:1298}.mce-content-body div.mce-resizehandle:hover{background-color:#4099ff}.mce-content-body div.mce-resizehandle:first-of-type{cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(2){cursor:nesw-resize}.mce-content-body div.mce-resizehandle:nth-of-type(3){cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(4){cursor:nesw-resize}.mce-content-body .mce-resize-backdrop{z-index:10000}.mce-content-body .mce-clonedresizable{cursor:default;opacity:.5;outline:1px dashed black;position:absolute;z-index:10001}.mce-content-body .mce-clonedresizable.mce-resizetable-columns td,.mce-content-body .mce-clonedresizable.mce-resizetable-columns th{border:0}.mce-content-body .mce-resize-helper{background:#555;background:rgba(0 0 0%);border:1px;border-radius:3px;color:#fff;display:none;font-family:sans-serif;font-size:12px;line-height:14px;margin:5px 10px;padding:5px;position:absolute;white-space:nowrap;z-index:10002}.tox-rtc-user-selection{position:relative}.tox-rtc-user-cursor{bottom:0;cursor:default;position:absolute;top:0;width:2px}.tox-rtc-user-cursor::before{background-color:inherit;border-radius:50%;content:'';display:block;height:8px;position:absolute;right:-3px;top:-3px;width:8px}.tox-rtc-user-cursor:hover::after{background-color:inherit;border-radius:100px;box-sizing:border-box;color:#fff;content:attr(data-user);display:block;font-size:12px;font-weight:700;left:-5px;min-height:8px;min-width:8px;padding:0 12px;position:absolute;top:-11px;white-space:nowrap;z-index:1000}.tox-rtc-user-selection--1 .tox-rtc-user-cursor{background-color:#2dc26b}.tox-rtc-user-selection--2 .tox-rtc-user-cursor{background-color:#e03e2d}.tox-rtc-user-selection--3 .tox-rtc-user-cursor{background-color:#f1c40f}.tox-rtc-user-selection--4 .tox-rtc-user-cursor{background-color:#3598db}.tox-rtc-user-selection--5 .tox-rtc-user-cursor{background-color:#b96ad9}.tox-rtc-user-selection--6 .tox-rtc-user-cursor{background-color:#e67e23}.tox-rtc-user-selection--7 .tox-rtc-user-cursor{background-color:#aaa69d}.tox-rtc-user-selection--8 .tox-rtc-user-cursor{background-color:#f368e0}.tox-rtc-remote-image{background:#eaeaea url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2236%22%20height%3D%2212%22%20viewBox%3D%220%200%2036%2012%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%3Ccircle%20cx%3D%226%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2218%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.33s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2230%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.66s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%3C%2Fsvg%3E%0A") no-repeat center center;border:1px solid #ccc;min-height:240px;min-width:320px}.mce-match-marker{background:#aaa;color:#fff}.mce-match-marker-selected{background:#39f;color:#fff}.mce-match-marker-selected::selection{background:#39f;color:#fff}.mce-content-body audio[data-mce-selected],.mce-content-body details[data-mce-selected],.mce-content-body embed[data-mce-selected],.mce-content-body img[data-mce-selected],.mce-content-body object[data-mce-selected],.mce-content-body table[data-mce-selected],.mce-content-body video[data-mce-selected]{outline:3px solid #4099ff}.mce-content-body hr[data-mce-selected]{outline:3px solid #4099ff;outline-offset:1px}.mce-content-body [contentEditable=false] [contentEditable=true]:focus{outline:3px solid #4099ff}.mce-content-body [contentEditable=false] [contentEditable=true]:hover{outline:3px solid #4099ff}.mce-content-body [contentEditable=false][data-mce-selected]{cursor:not-allowed;outline:3px solid #4099ff}.mce-content-body [data-mce-selected=inline-boundary]{background-color:#4099ff}.mce-content-body .mce-edit-focus{outline:3px solid #4099ff}.mce-content-body td[data-mce-selected],.mce-content-body th[data-mce-selected]{position:relative}.mce-content-body td[data-mce-selected]::selection,.mce-content-body th[data-mce-selected]::selection{background:0 0}.mce-content-body td[data-mce-selected] *,.mce-content-body th[data-mce-selected] *{outline:0;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{background-color:rgba(180,215,255,.7);border:1px solid transparent;bottom:-1px;content:'';left:-1px;mix-blend-mode:lighten;position:absolute;right:-1px;top:-1px}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{border-color:rgba(0,84,180,.7)}}.mce-content-body img[data-mce-selected]::selection{background:0 0}.ephox-snooker-resizer-bar{background-color:#4099ff;opacity:0;-webkit-user-select:none;user-select:none}.ephox-snooker-resizer-cols{cursor:col-resize}.ephox-snooker-resizer-rows{cursor:row-resize}.ephox-snooker-resizer-bar.ephox-snooker-resizer-bar-dragging{opacity:1}.mce-spellchecker-word{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%23ff0000'%20fill%3D'none'%20stroke-linecap%3D'round'%20stroke-opacity%3D'.75'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default;height:2rem}.mce-spellchecker-grammar{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%2300A835'%20fill%3D'none'%20stroke-linecap%3D'round'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default}.mce-toc{border:1px solid gray}.mce-toc h2{margin:4px}.mce-toc ul>li{list-style-type:none}[data-mce-block]{display:block}.mce-item-table:not([border]),.mce-item-table:not([border]) caption,.mce-item-table:not([border]) td,.mce-item-table:not([border]) th,.mce-item-table[border="0"],.mce-item-table[border="0"] caption,.mce-item-table[border="0"] td,.mce-item-table[border="0"] th,table[style*="border-width: 0px"],table[style*="border-width: 0px"] caption,table[style*="border-width: 0px"] td,table[style*="border-width: 0px"] th{border:1px dashed #bbb}.mce-visualblocks address,.mce-visualblocks article,.mce-visualblocks aside,.mce-visualblocks blockquote,.mce-visualblocks div:not([data-mce-bogus]),.mce-visualblocks dl,.mce-visualblocks figcaption,.mce-visualblocks figure,.mce-visualblocks h1,.mce-visualblocks h2,.mce-visualblocks h3,.mce-visualblocks h4,.mce-visualblocks h5,.mce-visualblocks h6,.mce-visualblocks hgroup,.mce-visualblocks ol,.mce-visualblocks p,.mce-visualblocks pre,.mce-visualblocks section,.mce-visualblocks ul{background-repeat:no-repeat;border:1px dashed #bbb;margin-left:3px;padding-top:10px}.mce-visualblocks p{background-image:url(data:image/gif;base64,R0lGODlhCQAJAJEAAAAAAP///7u7u////yH5BAEAAAMALAAAAAAJAAkAAAIQnG+CqCN/mlyvsRUpThG6AgA7)}.mce-visualblocks h1{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGu1JuxHoAfRNRW3TWXyF2YiRUAOw==)}.mce-visualblocks h2{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8Hybbx4oOuqgTynJd6bGlWg3DkJzoaUAAAOw==)}.mce-visualblocks h3{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIZjI8Hybbx4oOuqgTynJf2Ln2NOHpQpmhAAQA7)}.mce-visualblocks h4{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxInR0zqeAdhtJlXwV1oCll2HaWgAAOw==)}.mce-visualblocks h5{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjane4iq5GlW05GgIkIZUAAAOw==)}.mce-visualblocks h6{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjan04jep1iZ1XRlAo5bVgAAOw==)}.mce-visualblocks div:not([data-mce-bogus]){background-image:url(data:image/gif;base64,R0lGODlhEgAKAIABALu7u////yH5BAEAAAEALAAAAAASAAoAAAIfjI9poI0cgDywrhuxfbrzDEbQM2Ei5aRjmoySW4pAAQA7)}.mce-visualblocks section{background-image:url(data:image/gif;base64,R0lGODlhKAAKAIABALu7u////yH5BAEAAAEALAAAAAAoAAoAAAI5jI+pywcNY3sBWHdNrplytD2ellDeSVbp+GmWqaDqDMepc8t17Y4vBsK5hDyJMcI6KkuYU+jpjLoKADs=)}.mce-visualblocks article{background-image:url(data:image/gif;base64,R0lGODlhKgAKAIABALu7u////yH5BAEAAAEALAAAAAAqAAoAAAI6jI+pywkNY3wG0GBvrsd2tXGYSGnfiF7ikpXemTpOiJScasYoDJJrjsG9gkCJ0ag6KhmaIe3pjDYBBQA7)}.mce-visualblocks blockquote{background-image:url(data:image/gif;base64,R0lGODlhPgAKAIABALu7u////yH5BAEAAAEALAAAAAA+AAoAAAJPjI+py+0Knpz0xQDyuUhvfoGgIX5iSKZYgq5uNL5q69asZ8s5rrf0yZmpNkJZzFesBTu8TOlDVAabUyatguVhWduud3EyiUk45xhTTgMBBQA7)}.mce-visualblocks address{background-image:url(data:image/gif;base64,R0lGODlhLQAKAIABALu7u////yH5BAEAAAEALAAAAAAtAAoAAAI/jI+pywwNozSP1gDyyZcjb3UaRpXkWaXmZW4OqKLhBmLs+K263DkJK7OJeifh7FicKD9A1/IpGdKkyFpNmCkAADs=)}.mce-visualblocks pre{background-image:url(data:image/gif;base64,R0lGODlhFQAKAIABALu7uwAAACH5BAEAAAEALAAAAAAVAAoAAAIjjI+ZoN0cgDwSmnpz1NCueYERhnibZVKLNnbOq8IvKpJtVQAAOw==)}.mce-visualblocks figure{background-image:url(data:image/gif;base64,R0lGODlhJAAKAIAAALu7u////yH5BAEAAAEALAAAAAAkAAoAAAI0jI+py+2fwAHUSFvD3RlvG4HIp4nX5JFSpnZUJ6LlrM52OE7uSWosBHScgkSZj7dDKnWAAgA7)}.mce-visualblocks figcaption{border:1px dashed #bbb}.mce-visualblocks hgroup{background-image:url(data:image/gif;base64,R0lGODlhJwAKAIABALu7uwAAACH5BAEAAAEALAAAAAAnAAoAAAI3jI+pywYNI3uB0gpsRtt5fFnfNZaVSYJil4Wo03Hv6Z62uOCgiXH1kZIIJ8NiIxRrAZNMZAtQAAA7)}.mce-visualblocks aside{background-image:url(data:image/gif;base64,R0lGODlhHgAKAIABAKqqqv///yH5BAEAAAEALAAAAAAeAAoAAAItjI+pG8APjZOTzgtqy7I3f1yehmQcFY4WKZbqByutmW4aHUd6vfcVbgudgpYCADs=)}.mce-visualblocks ul{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIAAALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGuYnqUVSjvw26DzzXiqIDlVwAAOw==)}.mce-visualblocks ol{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybH6HHt0qourxC6CvzXieHyeWQAAOw==)}.mce-visualblocks dl{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybEOnmOvUoWznTqeuEjNSCqeGRUAOw==)}.mce-visualblocks:not([dir=rtl]) address,.mce-visualblocks:not([dir=rtl]) article,.mce-visualblocks:not([dir=rtl]) aside,.mce-visualblocks:not([dir=rtl]) blockquote,.mce-visualblocks:not([dir=rtl]) div:not([data-mce-bogus]),.mce-visualblocks:not([dir=rtl]) dl,.mce-visualblocks:not([dir=rtl]) figcaption,.mce-visualblocks:not([dir=rtl]) figure,.mce-visualblocks:not([dir=rtl]) h1,.mce-visualblocks:not([dir=rtl]) h2,.mce-visualblocks:not([dir=rtl]) h3,.mce-visualblocks:not([dir=rtl]) h4,.mce-visualblocks:not([dir=rtl]) h5,.mce-visualblocks:not([dir=rtl]) h6,.mce-visualblocks:not([dir=rtl]) hgroup,.mce-visualblocks:not([dir=rtl]) ol,.mce-visualblocks:not([dir=rtl]) p,.mce-visualblocks:not([dir=rtl]) pre,.mce-visualblocks:not([dir=rtl]) section,.mce-visualblocks:not([dir=rtl]) ul{margin-left:3px}.mce-visualblocks[dir=rtl] address,.mce-visualblocks[dir=rtl] article,.mce-visualblocks[dir=rtl] aside,.mce-visualblocks[dir=rtl] blockquote,.mce-visualblocks[dir=rtl] div:not([data-mce-bogus]),.mce-visualblocks[dir=rtl] dl,.mce-visualblocks[dir=rtl] figcaption,.mce-visualblocks[dir=rtl] figure,.mce-visualblocks[dir=rtl] h1,.mce-visualblocks[dir=rtl] h2,.mce-visualblocks[dir=rtl] h3,.mce-visualblocks[dir=rtl] h4,.mce-visualblocks[dir=rtl] h5,.mce-visualblocks[dir=rtl] h6,.mce-visualblocks[dir=rtl] hgroup,.mce-visualblocks[dir=rtl] ol,.mce-visualblocks[dir=rtl] p,.mce-visualblocks[dir=rtl] pre,.mce-visualblocks[dir=rtl] section,.mce-visualblocks[dir=rtl] ul{background-position-x:right;margin-right:3px}.mce-nbsp,.mce-shy{background:#aaa}.mce-shy::after{content:'-'}body{font-family:sans-serif}table{border-collapse:collapse}`);tinymce.Resource.add("ui/tinymce-5-dark/content.css",`.mce-content-body .mce-item-anchor{background:transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'8'%20height%3D'12'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20d%3D'M0%200L8%200%208%2012%204.09117821%209%200%2012z'%20fill%3D%22%23cccccc%22%2F%3E%3C%2Fsvg%3E%0A") no-repeat center}.mce-content-body .mce-item-anchor:empty{cursor:default;display:inline-block;height:12px!important;padding:0 2px;-webkit-user-modify:read-only;-moz-user-modify:read-only;-webkit-user-select:all;user-select:all;width:8px!important}.mce-content-body .mce-item-anchor:not(:empty){background-position-x:2px;display:inline-block;padding-left:12px}.mce-content-body .mce-item-anchor[data-mce-selected]{outline-offset:1px}.tox-comments-visible .tox-comment[contenteditable=false]:not([data-mce-selected]),.tox-comments-visible span.tox-comment img:not([data-mce-selected]),.tox-comments-visible span.tox-comment span.mce-preview-object:not([data-mce-selected]),.tox-comments-visible span.tox-comment>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment>video:not([data-mce-selected]){outline:3px solid #4e4f3b}.tox-comments-visible .tox-comment[contenteditable=false][data-mce-annotation-active=true]:not([data-mce-selected]){outline:3px solid #ffcf30}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] img:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] span.mce-preview-object:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>video:not([data-mce-selected]){outline:3px solid #ffcf30}.tox-comments-visible span.tox-comment:not([data-mce-selected]){background-color:#4e4f3b;outline:0}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]:not([data-mce-selected=inline-boundary]){background-color:#4e4f3b}.tox-comments-visible span.tox-comment[data-mce-selected]{background-color:#4e4f3b;border-radius:3px;box-shadow:0 0 0 2px #006ce7}.tox-checklist>li:not(.tox-checklist--hidden){list-style:none;margin:.25em 0}.tox-checklist>li:not(.tox-checklist--hidden)::before{content:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-unchecked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2215%22%20height%3D%2215%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill-rule%3D%22nonzero%22%20stroke%3D%22%236d737b%22%20rx%3D%222%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A");cursor:pointer;height:1em;margin-left:-1.5em;margin-top:.125em;position:absolute;width:1em}.tox-checklist li:not(.tox-checklist--hidden).tox-checklist--checked::before{content:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-checked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%234099FF%22%20fill-rule%3D%22nonzero%22%20rx%3D%222%22%2F%3E%3Cpath%20id%3D%22Path%22%20fill%3D%22%23FFF%22%20fill-rule%3D%22nonzero%22%20d%3D%22M11.5703186%2C3.14417309%20C11.8516238%2C2.73724603%2012.4164781%2C2.62829933%2012.83558%2C2.89774797%20C13.260121%2C3.17069355%2013.3759736%2C3.72932262%2013.0909105%2C4.14168582%20L7.7580587%2C11.8560195%20C7.43776896%2C12.3193404%206.76483983%2C12.3852142%206.35607322%2C11.9948725%20L3.02491697%2C8.8138662%20C2.66090143%2C8.46625845%202.65798871%2C7.89594698%203.01850234%2C7.54483354%20C3.373942%2C7.19866177%203.94940006%2C7.19592841%204.30829608%2C7.5386474%20L6.85276923%2C9.9684299%20L11.5703186%2C3.14417309%20Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A")}[dir=rtl] .tox-checklist>li:not(.tox-checklist--hidden)::before{margin-left:0;margin-right:-1.5em}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:0 0;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#282a36}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#6272a4}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#ff79c6}.token.boolean,.token.number{color:#bd93f9}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#50fa7b}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#f1fa8c}.token.keyword{color:#8be9fd}.token.important,.token.regex{color:#ffb86c}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.mce-content-body{overflow-wrap:break-word;word-wrap:break-word}.mce-content-body .mce-visual-caret{background-color:#000;background-color:currentColor;position:absolute}.mce-content-body .mce-visual-caret-hidden{display:none}.mce-content-body [data-mce-caret]{left:-1000px;margin:0;padding:0;position:absolute;right:auto;top:0}.mce-content-body .mce-offscreen-selection{left:-2000000px;max-width:1000000px;position:absolute}.mce-content-body [contentEditable=false]{cursor:default}.mce-content-body [contentEditable=true]{cursor:text}.tox-cursor-format-painter{cursor:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%0A%20%20%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M15%2C6%20C15%2C5.45%2014.55%2C5%2014%2C5%20L6%2C5%20C5.45%2C5%205%2C5.45%205%2C6%20L5%2C10%20C5%2C10.55%205.45%2C11%206%2C11%20L14%2C11%20C14.55%2C11%2015%2C10.55%2015%2C10%20L15%2C9%20L16%2C9%20L16%2C12%20L9%2C12%20L9%2C19%20C9%2C19.55%209.45%2C20%2010%2C20%20L11%2C20%20C11.55%2C20%2012%2C19.55%2012%2C19%20L12%2C14%20L18%2C14%20L18%2C7%20L15%2C7%20L15%2C6%20Z%22%2F%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M1%2C1%20L8.25%2C1%20C8.66421356%2C1%209%2C1.33578644%209%2C1.75%20L9%2C1.75%20C9%2C2.16421356%208.66421356%2C2.5%208.25%2C2.5%20L2.5%2C2.5%20L2.5%2C8.25%20C2.5%2C8.66421356%202.16421356%2C9%201.75%2C9%20L1.75%2C9%20C1.33578644%2C9%201%2C8.66421356%201%2C8.25%20L1%2C1%20Z%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A"),default}div.mce-footnotes hr{margin-inline:0 auto;width:25%}div.mce-footnotes li>a.mce-footnotes-backlink{-webkit-text-decoration:none;text-decoration:none}@media print{sup.mce-footnote a{color:#000;-webkit-text-decoration:none;text-decoration:none}div.mce-footnotes{page-break-inside:avoid;break-inside:avoid;width:100%}div.mce-footnotes li>a.mce-footnotes-backlink{display:none}}tiny-math-block{display:flex;justify-content:center;margin:16px 0 16px 0}tiny-math-inline{display:inline-block}.mce-content-body figure.align-left{float:left}.mce-content-body figure.align-right{float:right}.mce-content-body figure.image.align-center{display:table;margin-left:auto;margin-right:auto}.mce-preview-object{border:1px solid gray;display:inline-block;line-height:0;margin:0 2px;position:relative}.mce-preview-object .mce-shim{background:url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");height:100%;left:0;position:absolute;top:0;width:100%}.mce-preview-object[data-mce-selected="2"] .mce-shim{display:none}.mce-content-body .mce-mergetag{cursor:default!important;-webkit-user-select:none;user-select:none}.mce-content-body .mce-mergetag:hover{background-color:rgba(0,108,231,.3)}.mce-content-body .mce-mergetag-affix{background-color:rgba(0,108,231,.3);color:#006ce7}.mce-object{background:transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M4%203h16a1%201%200%200%201%201%201v16a1%201%200%200%201-1%201H4a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1zm1%202v14h14V5H5zm4.79%202.565l5.64%204.028a.5.5%200%200%201%200%20.814l-5.64%204.028a.5.5%200%200%201-.79-.407V7.972a.5.5%200%200%201%20.79-.407z%22%20fill%3D%22%23cccccc%22%2F%3E%3C%2Fsvg%3E%0A") no-repeat center;border:1px dashed #aaa}.mce-pagebreak{border:1px dashed #aaa;cursor:default;display:block;height:5px;margin-top:15px;page-break-before:always;width:100%}@media print{.mce-pagebreak{border:0}}.tiny-pageembed .mce-shim{background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);height:100%;left:0;position:absolute;top:0;width:100%}.tiny-pageembed[data-mce-selected="2"] .mce-shim{display:none}.tiny-pageembed{display:inline-block;position:relative}.tiny-pageembed--16by9,.tiny-pageembed--1by1,.tiny-pageembed--21by9,.tiny-pageembed--4by3{display:block;overflow:hidden;padding:0;position:relative;width:100%}.tiny-pageembed--21by9{padding-top:42.857143%}.tiny-pageembed--16by9{padding-top:56.25%}.tiny-pageembed--4by3{padding-top:75%}.tiny-pageembed--1by1{padding-top:100%}.tiny-pageembed--16by9 iframe,.tiny-pageembed--1by1 iframe,.tiny-pageembed--21by9 iframe,.tiny-pageembed--4by3 iframe{border:0;height:100%;left:0;position:absolute;top:0;width:100%}.mce-content-body[data-mce-placeholder]{position:relative}.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:rgba(34,47,62,.7);content:attr(data-mce-placeholder);position:absolute}@media (forced-colors:active){.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:highlight;filter:brightness(30%);z-index:-1}}.mce-content-body:not([dir=rtl])[data-mce-placeholder]:not(.mce-visualblocks)::before{left:1px}.mce-content-body[dir=rtl][data-mce-placeholder]:not(.mce-visualblocks)::before{right:1px}.mce-content-body div.mce-resizehandle{background-color:#4099ff;border-color:#4099ff;border-style:solid;border-width:1px;box-sizing:border-box;height:10px;position:absolute;width:10px;z-index:1298}.mce-content-body div.mce-resizehandle:hover{background-color:#4099ff}.mce-content-body div.mce-resizehandle:first-of-type{cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(2){cursor:nesw-resize}.mce-content-body div.mce-resizehandle:nth-of-type(3){cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(4){cursor:nesw-resize}.mce-content-body .mce-resize-backdrop{z-index:10000}.mce-content-body .mce-clonedresizable{cursor:default;opacity:.5;outline:1px dashed black;position:absolute;z-index:10001}.mce-content-body .mce-clonedresizable.mce-resizetable-columns td,.mce-content-body .mce-clonedresizable.mce-resizetable-columns th{border:0}.mce-content-body .mce-resize-helper{background:#555;background:rgba(0 0 0%);border:1px;border-radius:3px;color:#fff;display:none;font-family:sans-serif;font-size:12px;line-height:14px;margin:5px 10px;padding:5px;position:absolute;white-space:nowrap;z-index:10002}.tox-rtc-user-selection{position:relative}.tox-rtc-user-cursor{bottom:0;cursor:default;position:absolute;top:0;width:2px}.tox-rtc-user-cursor::before{background-color:inherit;border-radius:50%;content:'';display:block;height:8px;position:absolute;right:-3px;top:-3px;width:8px}.tox-rtc-user-cursor:hover::after{background-color:inherit;border-radius:100px;box-sizing:border-box;color:#fff;content:attr(data-user);display:block;font-size:12px;font-weight:700;left:-5px;min-height:8px;min-width:8px;padding:0 12px;position:absolute;top:-11px;white-space:nowrap;z-index:1000}.tox-rtc-user-selection--1 .tox-rtc-user-cursor{background-color:#2dc26b}.tox-rtc-user-selection--2 .tox-rtc-user-cursor{background-color:#e03e2d}.tox-rtc-user-selection--3 .tox-rtc-user-cursor{background-color:#f1c40f}.tox-rtc-user-selection--4 .tox-rtc-user-cursor{background-color:#3598db}.tox-rtc-user-selection--5 .tox-rtc-user-cursor{background-color:#b96ad9}.tox-rtc-user-selection--6 .tox-rtc-user-cursor{background-color:#e67e23}.tox-rtc-user-selection--7 .tox-rtc-user-cursor{background-color:#aaa69d}.tox-rtc-user-selection--8 .tox-rtc-user-cursor{background-color:#f368e0}.tox-rtc-remote-image{background:#eaeaea url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2236%22%20height%3D%2212%22%20viewBox%3D%220%200%2036%2012%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%3Ccircle%20cx%3D%226%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2218%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.33s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2230%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.66s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%3C%2Fsvg%3E%0A") no-repeat center center;border:1px solid #ccc;min-height:240px;min-width:320px}.mce-match-marker{background:#aaa;color:#fff}.mce-match-marker-selected{background:#39f;color:#fff}.mce-match-marker-selected::selection{background:#39f;color:#fff}.mce-content-body audio[data-mce-selected],.mce-content-body details[data-mce-selected],.mce-content-body embed[data-mce-selected],.mce-content-body img[data-mce-selected],.mce-content-body object[data-mce-selected],.mce-content-body table[data-mce-selected],.mce-content-body video[data-mce-selected]{outline:3px solid #4099ff}.mce-content-body hr[data-mce-selected]{outline:3px solid #4099ff;outline-offset:1px}.mce-content-body [contentEditable=false] [contentEditable=true]:focus{outline:3px solid #4099ff}.mce-content-body [contentEditable=false] [contentEditable=true]:hover{outline:3px solid #4099ff}.mce-content-body [contentEditable=false][data-mce-selected]{cursor:not-allowed;outline:3px solid #4099ff}.mce-content-body [data-mce-selected=inline-boundary]{background-color:#4099ff}.mce-content-body .mce-edit-focus{outline:3px solid #4099ff}.mce-content-body td[data-mce-selected],.mce-content-body th[data-mce-selected]{position:relative}.mce-content-body td[data-mce-selected]::selection,.mce-content-body th[data-mce-selected]::selection{background:0 0}.mce-content-body td[data-mce-selected] *,.mce-content-body th[data-mce-selected] *{outline:0;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{background-color:rgba(180,215,255,.7);border:1px solid transparent;bottom:-1px;content:'';left:-1px;mix-blend-mode:lighten;position:absolute;right:-1px;top:-1px}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{border-color:rgba(0,84,180,.7)}}.mce-content-body img[data-mce-selected]::selection{background:0 0}.ephox-snooker-resizer-bar{background-color:#4099ff;opacity:0;-webkit-user-select:none;user-select:none}.ephox-snooker-resizer-cols{cursor:col-resize}.ephox-snooker-resizer-rows{cursor:row-resize}.ephox-snooker-resizer-bar.ephox-snooker-resizer-bar-dragging{opacity:1}.mce-spellchecker-word{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%23ff0000'%20fill%3D'none'%20stroke-linecap%3D'round'%20stroke-opacity%3D'.75'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default;height:2rem}.mce-spellchecker-grammar{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%2300A835'%20fill%3D'none'%20stroke-linecap%3D'round'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default}.mce-toc{border:1px solid gray}.mce-toc h2{margin:4px}.mce-toc ul>li{list-style-type:none}[data-mce-block]{display:block}.mce-item-table:not([border]),.mce-item-table:not([border]) caption,.mce-item-table:not([border]) td,.mce-item-table:not([border]) th,.mce-item-table[border="0"],.mce-item-table[border="0"] caption,.mce-item-table[border="0"] td,.mce-item-table[border="0"] th,table[style*="border-width: 0px"],table[style*="border-width: 0px"] caption,table[style*="border-width: 0px"] td,table[style*="border-width: 0px"] th{border:1px dashed #bbb}.mce-visualblocks address,.mce-visualblocks article,.mce-visualblocks aside,.mce-visualblocks blockquote,.mce-visualblocks div:not([data-mce-bogus]),.mce-visualblocks dl,.mce-visualblocks figcaption,.mce-visualblocks figure,.mce-visualblocks h1,.mce-visualblocks h2,.mce-visualblocks h3,.mce-visualblocks h4,.mce-visualblocks h5,.mce-visualblocks h6,.mce-visualblocks hgroup,.mce-visualblocks ol,.mce-visualblocks p,.mce-visualblocks pre,.mce-visualblocks section,.mce-visualblocks ul{background-repeat:no-repeat;border:1px dashed #bbb;margin-left:3px;padding-top:10px}.mce-visualblocks p{background-image:url(data:image/gif;base64,R0lGODlhCQAJAJEAAAAAAP///7u7u////yH5BAEAAAMALAAAAAAJAAkAAAIQnG+CqCN/mlyvsRUpThG6AgA7)}.mce-visualblocks h1{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGu1JuxHoAfRNRW3TWXyF2YiRUAOw==)}.mce-visualblocks h2{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8Hybbx4oOuqgTynJd6bGlWg3DkJzoaUAAAOw==)}.mce-visualblocks h3{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIZjI8Hybbx4oOuqgTynJf2Ln2NOHpQpmhAAQA7)}.mce-visualblocks h4{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxInR0zqeAdhtJlXwV1oCll2HaWgAAOw==)}.mce-visualblocks h5{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjane4iq5GlW05GgIkIZUAAAOw==)}.mce-visualblocks h6{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjan04jep1iZ1XRlAo5bVgAAOw==)}.mce-visualblocks div:not([data-mce-bogus]){background-image:url(data:image/gif;base64,R0lGODlhEgAKAIABALu7u////yH5BAEAAAEALAAAAAASAAoAAAIfjI9poI0cgDywrhuxfbrzDEbQM2Ei5aRjmoySW4pAAQA7)}.mce-visualblocks section{background-image:url(data:image/gif;base64,R0lGODlhKAAKAIABALu7u////yH5BAEAAAEALAAAAAAoAAoAAAI5jI+pywcNY3sBWHdNrplytD2ellDeSVbp+GmWqaDqDMepc8t17Y4vBsK5hDyJMcI6KkuYU+jpjLoKADs=)}.mce-visualblocks article{background-image:url(data:image/gif;base64,R0lGODlhKgAKAIABALu7u////yH5BAEAAAEALAAAAAAqAAoAAAI6jI+pywkNY3wG0GBvrsd2tXGYSGnfiF7ikpXemTpOiJScasYoDJJrjsG9gkCJ0ag6KhmaIe3pjDYBBQA7)}.mce-visualblocks blockquote{background-image:url(data:image/gif;base64,R0lGODlhPgAKAIABALu7u////yH5BAEAAAEALAAAAAA+AAoAAAJPjI+py+0Knpz0xQDyuUhvfoGgIX5iSKZYgq5uNL5q69asZ8s5rrf0yZmpNkJZzFesBTu8TOlDVAabUyatguVhWduud3EyiUk45xhTTgMBBQA7)}.mce-visualblocks address{background-image:url(data:image/gif;base64,R0lGODlhLQAKAIABALu7u////yH5BAEAAAEALAAAAAAtAAoAAAI/jI+pywwNozSP1gDyyZcjb3UaRpXkWaXmZW4OqKLhBmLs+K263DkJK7OJeifh7FicKD9A1/IpGdKkyFpNmCkAADs=)}.mce-visualblocks pre{background-image:url(data:image/gif;base64,R0lGODlhFQAKAIABALu7uwAAACH5BAEAAAEALAAAAAAVAAoAAAIjjI+ZoN0cgDwSmnpz1NCueYERhnibZVKLNnbOq8IvKpJtVQAAOw==)}.mce-visualblocks figure{background-image:url(data:image/gif;base64,R0lGODlhJAAKAIAAALu7u////yH5BAEAAAEALAAAAAAkAAoAAAI0jI+py+2fwAHUSFvD3RlvG4HIp4nX5JFSpnZUJ6LlrM52OE7uSWosBHScgkSZj7dDKnWAAgA7)}.mce-visualblocks figcaption{border:1px dashed #bbb}.mce-visualblocks hgroup{background-image:url(data:image/gif;base64,R0lGODlhJwAKAIABALu7uwAAACH5BAEAAAEALAAAAAAnAAoAAAI3jI+pywYNI3uB0gpsRtt5fFnfNZaVSYJil4Wo03Hv6Z62uOCgiXH1kZIIJ8NiIxRrAZNMZAtQAAA7)}.mce-visualblocks aside{background-image:url(data:image/gif;base64,R0lGODlhHgAKAIABAKqqqv///yH5BAEAAAEALAAAAAAeAAoAAAItjI+pG8APjZOTzgtqy7I3f1yehmQcFY4WKZbqByutmW4aHUd6vfcVbgudgpYCADs=)}.mce-visualblocks ul{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIAAALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGuYnqUVSjvw26DzzXiqIDlVwAAOw==)}.mce-visualblocks ol{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybH6HHt0qourxC6CvzXieHyeWQAAOw==)}.mce-visualblocks dl{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybEOnmOvUoWznTqeuEjNSCqeGRUAOw==)}.mce-visualblocks:not([dir=rtl]) address,.mce-visualblocks:not([dir=rtl]) article,.mce-visualblocks:not([dir=rtl]) aside,.mce-visualblocks:not([dir=rtl]) blockquote,.mce-visualblocks:not([dir=rtl]) div:not([data-mce-bogus]),.mce-visualblocks:not([dir=rtl]) dl,.mce-visualblocks:not([dir=rtl]) figcaption,.mce-visualblocks:not([dir=rtl]) figure,.mce-visualblocks:not([dir=rtl]) h1,.mce-visualblocks:not([dir=rtl]) h2,.mce-visualblocks:not([dir=rtl]) h3,.mce-visualblocks:not([dir=rtl]) h4,.mce-visualblocks:not([dir=rtl]) h5,.mce-visualblocks:not([dir=rtl]) h6,.mce-visualblocks:not([dir=rtl]) hgroup,.mce-visualblocks:not([dir=rtl]) ol,.mce-visualblocks:not([dir=rtl]) p,.mce-visualblocks:not([dir=rtl]) pre,.mce-visualblocks:not([dir=rtl]) section,.mce-visualblocks:not([dir=rtl]) ul{margin-left:3px}.mce-visualblocks[dir=rtl] address,.mce-visualblocks[dir=rtl] article,.mce-visualblocks[dir=rtl] aside,.mce-visualblocks[dir=rtl] blockquote,.mce-visualblocks[dir=rtl] div:not([data-mce-bogus]),.mce-visualblocks[dir=rtl] dl,.mce-visualblocks[dir=rtl] figcaption,.mce-visualblocks[dir=rtl] figure,.mce-visualblocks[dir=rtl] h1,.mce-visualblocks[dir=rtl] h2,.mce-visualblocks[dir=rtl] h3,.mce-visualblocks[dir=rtl] h4,.mce-visualblocks[dir=rtl] h5,.mce-visualblocks[dir=rtl] h6,.mce-visualblocks[dir=rtl] hgroup,.mce-visualblocks[dir=rtl] ol,.mce-visualblocks[dir=rtl] p,.mce-visualblocks[dir=rtl] pre,.mce-visualblocks[dir=rtl] section,.mce-visualblocks[dir=rtl] ul{background-position-x:right;margin-right:3px}.mce-nbsp,.mce-shy{background:#aaa}.mce-shy::after{content:'-'}body{font-family:sans-serif}table{border-collapse:collapse}`);function TinyMCEditor(o){return jsxRuntimeExports.jsx(Editor$1,{licenseKey:"gpl",...o})}function TestTinyMCEditor(){const o=reactExports.useRef(null),e=()=>{o.current&&console.log(o.current.getContent())};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TinyMCEditor,{onInit:(s,a)=>o.current=a,initialValue:"<p>This is the initial content of the editor.</p>",init:{content_css:"tinymce-5-dark",skin:"tinymce-5-dark",height:500,menubar:!1,plugins:["advlist","anchor","autolink","help","image","link","lists","searchreplace","table","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}),jsxRuntimeExports.jsx(Button,{onClick:e,children:"Log editor content"})]})}var __rest=function(o,e){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&e.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(o);d<a.length;d++)e.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(o,a[d])&&(s[a[d]]=o[a[d]]);return s};const ButtonsGroup=reactExports.memo(reactExports.forwardRef((o,e)=>{const{id:s,className:a,buttonsSize:d="medium",buttonsIconPosition:b="left",inlineLayoutWhen:_="never",alignment:_e="left",buttonsEquisized:ot=!1,isReverseOrder:st=!1,buttons:ct,style:ft}=o,mt=__rest(o,["id","className","buttonsSize","buttonsIconPosition","inlineLayoutWhen","alignment","buttonsEquisized","isReverseOrder","buttons","style"]);assert$1();const bt=useAnalyticsId({defaultIdPrefix:"fr-btns-group",explicitlyProvidedId:s}),wt=cx$1(fr.cx("fr-btns-group",d!=="medium"&&`fr-btns-group--${(()=>{switch(d){case"small":return"sm";case"large":return"lg"}})()}`,_!=="never"&&`fr-btns-group--inline${(()=>{switch(_){case"always":return"";case"sm and up":return"-sm";case"md and up":return"-md";case"lg and up":return"-lg"}})()}`,ot&&"fr-btns-group--equisized",`fr-btns-group--${_e}`,st&&"fr-btns-group--inline-reverse",`fr-btns-group--icon-${b}`),a);return React.createElement("ul",Object.assign({id:bt,className:wt,style:ft,ref:e},mt),ct.map((Ct,Rt)=>React.createElement("li",{key:Rt},React.createElement(Button,Object.assign({},Ct)))))}));ButtonsGroup.displayName=symToStr({ButtonsGroup});function OrderedMap(o){this.content=o}OrderedMap.prototype={constructor:OrderedMap,find:function(o){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===o)return e;return-1},get:function(o){var e=this.find(o);return e==-1?void 0:this.content[e+1]},update:function(o,e,s){var a=s&&s!=o?this.remove(s):this,d=a.find(o),b=a.content.slice();return d==-1?b.push(s||o,e):(b[d+1]=e,s&&(b[d]=s)),new OrderedMap(b)},remove:function(o){var e=this.find(o);if(e==-1)return this;var s=this.content.slice();return s.splice(e,2),new OrderedMap(s)},addToStart:function(o,e){return new OrderedMap([o,e].concat(this.remove(o).content))},addToEnd:function(o,e){var s=this.remove(o).content.slice();return s.push(o,e),new OrderedMap(s)},addBefore:function(o,e,s){var a=this.remove(e),d=a.content.slice(),b=a.find(o);return d.splice(b==-1?d.length:b,0,e,s),new OrderedMap(d)},forEach:function(o){for(var e=0;e<this.content.length;e+=2)o(this.content[e],this.content[e+1])},prepend:function(o){return o=OrderedMap.from(o),o.size?new OrderedMap(o.content.concat(this.subtract(o).content)):this},append:function(o){return o=OrderedMap.from(o),o.size?new OrderedMap(this.subtract(o).content.concat(o.content)):this},subtract:function(o){var e=this;o=OrderedMap.from(o);for(var s=0;s<o.content.length;s+=2)e=e.remove(o.content[s]);return e},toObject:function(){var o={};return this.forEach(function(e,s){o[e]=s}),o},get size(){return this.content.length>>1}};OrderedMap.from=function(o){if(o instanceof OrderedMap)return o;var e=[];if(o)for(var s in o)e.push(s,o[s]);return new OrderedMap(e)};function findDiffStart(o,e,s){for(let a=0;;a++){if(a==o.childCount||a==e.childCount)return o.childCount==e.childCount?null:s;let d=o.child(a),b=e.child(a);if(d==b){s+=d.nodeSize;continue}if(!d.sameMarkup(b))return s;if(d.isText&&d.text!=b.text){for(let _=0;d.text[_]==b.text[_];_++)s++;return s}if(d.content.size||b.content.size){let _=findDiffStart(d.content,b.content,s+1);if(_!=null)return _}s+=d.nodeSize}}function findDiffEnd(o,e,s,a){for(let d=o.childCount,b=e.childCount;;){if(d==0||b==0)return d==b?null:{a:s,b:a};let _=o.child(--d),_e=e.child(--b),ot=_.nodeSize;if(_==_e){s-=ot,a-=ot;continue}if(!_.sameMarkup(_e))return{a:s,b:a};if(_.isText&&_.text!=_e.text){let st=0,ct=Math.min(_.text.length,_e.text.length);for(;st<ct&&_.text[_.text.length-st-1]==_e.text[_e.text.length-st-1];)st++,s--,a--;return{a:s,b:a}}if(_.content.size||_e.content.size){let st=findDiffEnd(_.content,_e.content,s-1,a-1);if(st)return st}s-=ot,a-=ot}}class Fragment{constructor(e,s){if(this.content=e,this.size=s||0,s==null)for(let a=0;a<e.length;a++)this.size+=e[a].nodeSize}nodesBetween(e,s,a,d=0,b){for(let _=0,_e=0;_e<s;_++){let ot=this.content[_],st=_e+ot.nodeSize;if(st>e&&a(ot,d+_e,b||null,_)!==!1&&ot.content.size){let ct=_e+1;ot.nodesBetween(Math.max(0,e-ct),Math.min(ot.content.size,s-ct),a,d+ct)}_e=st}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,s,a,d){let b="",_=!0;return this.nodesBetween(e,s,(_e,ot)=>{let st=_e.isText?_e.text.slice(Math.max(e,ot)-ot,s-ot):_e.isLeaf?d?typeof d=="function"?d(_e):d:_e.type.spec.leafText?_e.type.spec.leafText(_e):"":"";_e.isBlock&&(_e.isLeaf&&st||_e.isTextblock)&&a&&(_?_=!1:b+=a),b+=st},0),b}append(e){if(!e.size)return this;if(!this.size)return e;let s=this.lastChild,a=e.firstChild,d=this.content.slice(),b=0;for(s.isText&&s.sameMarkup(a)&&(d[d.length-1]=s.withText(s.text+a.text),b=1);b<e.content.length;b++)d.push(e.content[b]);return new Fragment(d,this.size+e.size)}cut(e,s=this.size){if(e==0&&s==this.size)return this;let a=[],d=0;if(s>e)for(let b=0,_=0;_<s;b++){let _e=this.content[b],ot=_+_e.nodeSize;ot>e&&((_<e||ot>s)&&(_e.isText?_e=_e.cut(Math.max(0,e-_),Math.min(_e.text.length,s-_)):_e=_e.cut(Math.max(0,e-_-1),Math.min(_e.content.size,s-_-1))),a.push(_e),d+=_e.nodeSize),_=ot}return new Fragment(a,d)}cutByIndex(e,s){return e==s?Fragment.empty:e==0&&s==this.content.length?this:new Fragment(this.content.slice(e,s))}replaceChild(e,s){let a=this.content[e];if(a==s)return this;let d=this.content.slice(),b=this.size+s.nodeSize-a.nodeSize;return d[e]=s,new Fragment(d,b)}addToStart(e){return new Fragment([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Fragment(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let s=0;s<this.content.length;s++)if(!this.content[s].eq(e.content[s]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let s=this.content[e];if(!s)throw new RangeError("Index "+e+" out of range for "+this);return s}maybeChild(e){return this.content[e]||null}forEach(e){for(let s=0,a=0;s<this.content.length;s++){let d=this.content[s];e(d,a,s),a+=d.nodeSize}}findDiffStart(e,s=0){return findDiffStart(this,e,s)}findDiffEnd(e,s=this.size,a=e.size){return findDiffEnd(this,e,s,a)}findIndex(e,s=-1){if(e==0)return retIndex(0,e);if(e==this.size)return retIndex(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let a=0,d=0;;a++){let b=this.child(a),_=d+b.nodeSize;if(_>=e)return _==e||s>0?retIndex(a+1,_):retIndex(a,d);d=_}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,s){if(!s)return Fragment.empty;if(!Array.isArray(s))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(s.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Fragment.empty;let s,a=0;for(let d=0;d<e.length;d++){let b=e[d];a+=b.nodeSize,d&&b.isText&&e[d-1].sameMarkup(b)?(s||(s=e.slice(0,d)),s[s.length-1]=b.withText(s[s.length-1].text+b.text)):s&&s.push(b)}return new Fragment(s||e,a)}static from(e){if(!e)return Fragment.empty;if(e instanceof Fragment)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Fragment([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(o,e){return found.index=o,found.offset=e,found}function compareDeep(o,e){if(o===e)return!0;if(!(o&&typeof o=="object")||!(e&&typeof e=="object"))return!1;let s=Array.isArray(o);if(Array.isArray(e)!=s)return!1;if(s){if(o.length!=e.length)return!1;for(let a=0;a<o.length;a++)if(!compareDeep(o[a],e[a]))return!1}else{for(let a in o)if(!(a in e)||!compareDeep(o[a],e[a]))return!1;for(let a in e)if(!(a in o))return!1}return!0}let Mark$1=class pie{constructor(e,s){this.type=e,this.attrs=s}addToSet(e){let s,a=!1;for(let d=0;d<e.length;d++){let b=e[d];if(this.eq(b))return e;if(this.type.excludes(b.type))s||(s=e.slice(0,d));else{if(b.type.excludes(this.type))return e;!a&&b.type.rank>this.type.rank&&(s||(s=e.slice(0,d)),s.push(this),a=!0),s&&s.push(b)}}return s||(s=e.slice()),a||s.push(this),s}removeFromSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return e.slice(0,s).concat(e.slice(s+1));return e}isInSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return!0;return!1}eq(e){return this==e||this.type==e.type&&compareDeep(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let s in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,s){if(!s)throw new RangeError("Invalid input for Mark.fromJSON");let a=e.marks[s.type];if(!a)throw new RangeError(`There is no mark type ${s.type} in this schema`);let d=a.create(s.attrs);return a.checkAttrs(d.attrs),d}static sameSet(e,s){if(e==s)return!0;if(e.length!=s.length)return!1;for(let a=0;a<e.length;a++)if(!e[a].eq(s[a]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return pie.none;if(e instanceof pie)return[e];let s=e.slice();return s.sort((a,d)=>a.type.rank-d.type.rank),s}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(e,s,a){this.content=e,this.openStart=s,this.openEnd=a}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,s){let a=insertInto(this.content,e+this.openStart,s);return a&&new Slice(a,this.openStart,this.openEnd)}removeBetween(e,s){return new Slice(removeRange(this.content,e+this.openStart,s+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,s){if(!s)return Slice.empty;let a=s.openStart||0,d=s.openEnd||0;if(typeof a!="number"||typeof d!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(e,s.content),a,d)}static maxOpen(e,s=!0){let a=0,d=0;for(let b=e.firstChild;b&&!b.isLeaf&&(s||!b.type.spec.isolating);b=b.firstChild)a++;for(let b=e.lastChild;b&&!b.isLeaf&&(s||!b.type.spec.isolating);b=b.lastChild)d++;return new Slice(e,a,d)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(o,e,s){let{index:a,offset:d}=o.findIndex(e),b=o.maybeChild(a),{index:_,offset:_e}=o.findIndex(s);if(d==e||b.isText){if(_e!=s&&!o.child(_).isText)throw new RangeError("Removing non-flat range");return o.cut(0,e).append(o.cut(s))}if(a!=_)throw new RangeError("Removing non-flat range");return o.replaceChild(a,b.copy(removeRange(b.content,e-d-1,s-d-1)))}function insertInto(o,e,s,a){let{index:d,offset:b}=o.findIndex(e),_=o.maybeChild(d);if(b==e||_.isText)return o.cut(0,e).append(s).append(o.cut(e));let _e=insertInto(_.content,e-b-1,s);return _e&&o.replaceChild(d,_.copy(_e))}function replace(o,e,s){if(s.openStart>o.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(o.depth-s.openStart!=e.depth-s.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(o,e,s,0)}function replaceOuter(o,e,s,a){let d=o.index(a),b=o.node(a);if(d==e.index(a)&&a<o.depth-s.openStart){let _=replaceOuter(o,e,s,a+1);return b.copy(b.content.replaceChild(d,_))}else if(s.content.size)if(!s.openStart&&!s.openEnd&&o.depth==a&&e.depth==a){let _=o.parent,_e=_.content;return close(_,_e.cut(0,o.parentOffset).append(s.content).append(_e.cut(e.parentOffset)))}else{let{start:_,end:_e}=prepareSliceForReplace(s,o);return close(b,replaceThreeWay(o,_,_e,e,a))}else return close(b,replaceTwoWay(o,e,a))}function checkJoin(o,e){if(!e.type.compatibleContent(o.type))throw new ReplaceError("Cannot join "+e.type.name+" onto "+o.type.name)}function joinable$1(o,e,s){let a=o.node(s);return checkJoin(a,e.node(s)),a}function addNode(o,e){let s=e.length-1;s>=0&&o.isText&&o.sameMarkup(e[s])?e[s]=o.withText(e[s].text+o.text):e.push(o)}function addRange(o,e,s,a){let d=(e||o).node(s),b=0,_=e?e.index(s):d.childCount;o&&(b=o.index(s),o.depth>s?b++:o.textOffset&&(addNode(o.nodeAfter,a),b++));for(let _e=b;_e<_;_e++)addNode(d.child(_e),a);e&&e.depth==s&&e.textOffset&&addNode(e.nodeBefore,a)}function close(o,e){return o.type.checkContent(e),o.copy(e)}function replaceThreeWay(o,e,s,a,d){let b=o.depth>d&&joinable$1(o,e,d+1),_=a.depth>d&&joinable$1(s,a,d+1),_e=[];return addRange(null,o,d,_e),b&&_&&e.index(d)==s.index(d)?(checkJoin(b,_),addNode(close(b,replaceThreeWay(o,e,s,a,d+1)),_e)):(b&&addNode(close(b,replaceTwoWay(o,e,d+1)),_e),addRange(e,s,d,_e),_&&addNode(close(_,replaceTwoWay(s,a,d+1)),_e)),addRange(a,null,d,_e),new Fragment(_e)}function replaceTwoWay(o,e,s){let a=[];if(addRange(null,o,s,a),o.depth>s){let d=joinable$1(o,e,s+1);addNode(close(d,replaceTwoWay(o,e,s+1)),a)}return addRange(e,null,s,a),new Fragment(a)}function prepareSliceForReplace(o,e){let s=e.depth-o.openStart,d=e.node(s).copy(o.content);for(let b=s-1;b>=0;b--)d=e.node(b).copy(Fragment.from(d));return{start:d.resolveNoCache(o.openStart+s),end:d.resolveNoCache(d.content.size-o.openEnd-s)}}class ResolvedPos{constructor(e,s,a){this.pos=e,this.path=s,this.parentOffset=a,this.depth=s.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,s=this.index(this.depth);if(s==e.childCount)return null;let a=this.pos-this.path[this.path.length-1],d=e.child(s);return a?e.child(s).cut(a):d}get nodeBefore(){let e=this.index(this.depth),s=this.pos-this.path[this.path.length-1];return s?this.parent.child(e).cut(0,s):e==0?null:this.parent.child(e-1)}posAtIndex(e,s){s=this.resolveDepth(s);let a=this.path[s*3],d=s==0?0:this.path[s*3-1]+1;for(let b=0;b<e;b++)d+=a.child(b).nodeSize;return d}marks(){let e=this.parent,s=this.index();if(e.content.size==0)return Mark$1.none;if(this.textOffset)return e.child(s).marks;let a=e.maybeChild(s-1),d=e.maybeChild(s);if(!a){let _e=a;a=d,d=_e}let b=a.marks;for(var _=0;_<b.length;_++)b[_].type.spec.inclusive===!1&&(!d||!b[_].isInSet(d.marks))&&(b=b[_--].removeFromSet(b));return b}marksAcross(e){let s=this.parent.maybeChild(this.index());if(!s||!s.isInline)return null;let a=s.marks,d=e.parent.maybeChild(e.index());for(var b=0;b<a.length;b++)a[b].type.spec.inclusive===!1&&(!d||!a[b].isInSet(d.marks))&&(a=a[b--].removeFromSet(a));return a}sharedDepth(e){for(let s=this.depth;s>0;s--)if(this.start(s)<=e&&this.end(s)>=e)return s;return 0}blockRange(e=this,s){if(e.pos<this.pos)return e.blockRange(this);for(let a=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);a>=0;a--)if(e.pos<=this.end(a)&&(!s||s(this.node(a))))return new NodeRange(this,e,a);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let s=1;s<=this.depth;s++)e+=(e?"/":"")+this.node(s).type.name+"_"+this.index(s-1);return e+":"+this.parentOffset}static resolve(e,s){if(!(s>=0&&s<=e.content.size))throw new RangeError("Position "+s+" out of range");let a=[],d=0,b=s;for(let _=e;;){let{index:_e,offset:ot}=_.content.findIndex(b),st=b-ot;if(a.push(_,_e,d+ot),!st||(_=_.child(_e),_.isText))break;b=st-1,d+=ot+1}return new ResolvedPos(s,a,b)}static resolveCached(e,s){let a=resolveCache.get(e);if(a)for(let b=0;b<a.elts.length;b++){let _=a.elts[b];if(_.pos==s)return _}else resolveCache.set(e,a=new ResolveCache);let d=a.elts[a.i]=ResolvedPos.resolve(e,s);return a.i=(a.i+1)%resolveCacheSize,d}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(e,s,a){this.$from=e,this.$to=s,this.depth=a}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$2=class gie{constructor(e,s,a,d=Mark$1.none){this.type=e,this.attrs=s,this.marks=d,this.content=a||Fragment.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,s,a,d=0){this.content.nodesBetween(e,s,a,d,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,s,a,d){return this.content.textBetween(e,s,a,d)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,s,a){return this.type==e&&compareDeep(this.attrs,s||e.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,a||Mark$1.none)}copy(e=null){return e==this.content?this:new gie(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new gie(this.type,this.attrs,this.content,e)}cut(e,s=this.content.size){return e==0&&s==this.content.size?this:this.copy(this.content.cut(e,s))}slice(e,s=this.content.size,a=!1){if(e==s)return Slice.empty;let d=this.resolve(e),b=this.resolve(s),_=a?0:d.sharedDepth(s),_e=d.start(_),st=d.node(_).content.cut(d.pos-_e,b.pos-_e);return new Slice(st,d.depth-_,b.depth-_)}replace(e,s,a){return replace(this.resolve(e),this.resolve(s),a)}nodeAt(e){for(let s=this;;){let{index:a,offset:d}=s.content.findIndex(e);if(s=s.maybeChild(a),!s)return null;if(d==e||s.isText)return s;e-=d+1}}childAfter(e){let{index:s,offset:a}=this.content.findIndex(e);return{node:this.content.maybeChild(s),index:s,offset:a}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:s,offset:a}=this.content.findIndex(e);if(a<e)return{node:this.content.child(s),index:s,offset:a};let d=this.content.child(s-1);return{node:d,index:s-1,offset:a-d.nodeSize}}resolve(e){return ResolvedPos.resolveCached(this,e)}resolveNoCache(e){return ResolvedPos.resolve(this,e)}rangeHasMark(e,s,a){let d=!1;return s>e&&this.nodesBetween(e,s,b=>(a.isInSet(b.marks)&&(d=!0),!d)),d}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,e)}contentMatchAt(e){let s=this.type.contentMatch.matchFragment(this.content,0,e);if(!s)throw new Error("Called contentMatchAt on a node with invalid content");return s}canReplace(e,s,a=Fragment.empty,d=0,b=a.childCount){let _=this.contentMatchAt(e).matchFragment(a,d,b),_e=_&&_.matchFragment(this.content,s);if(!_e||!_e.validEnd)return!1;for(let ot=d;ot<b;ot++)if(!this.type.allowsMarks(a.child(ot).marks))return!1;return!0}canReplaceWith(e,s,a,d){if(d&&!this.type.allowsMarks(d))return!1;let b=this.contentMatchAt(e).matchType(a),_=b&&b.matchFragment(this.content,s);return _?_.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Mark$1.none;for(let s=0;s<this.marks.length;s++){let a=this.marks[s];a.type.checkAttrs(a.attrs),e=a.addToSet(e)}if(!Mark$1.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(s=>s.type.name)}`);this.content.forEach(s=>s.check())}toJSON(){let e={type:this.type.name};for(let s in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(s=>s.toJSON())),e}static fromJSON(e,s){if(!s)throw new RangeError("Invalid input for Node.fromJSON");let a;if(s.marks){if(!Array.isArray(s.marks))throw new RangeError("Invalid mark data for Node.fromJSON");a=s.marks.map(e.markFromJSON)}if(s.type=="text"){if(typeof s.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(s.text,a)}let d=Fragment.fromJSON(e,s.content),b=e.nodeType(s.type).create(s.attrs,d,a);return b.type.checkAttrs(b.attrs),b}};Node$2.prototype.text=void 0;class TextNode extends Node$2{constructor(e,s,a,d){if(super(e,s,null,d),!a)throw new RangeError("Empty text nodes are not allowed");this.text=a}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,s){return this.text.slice(e,s)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new TextNode(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new TextNode(this.type,this.attrs,e,this.marks)}cut(e=0,s=this.text.length){return e==0&&s==this.text.length?this:this.withText(this.text.slice(e,s))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function wrapMarks(o,e){for(let s=o.length-1;s>=0;s--)e=o[s].type.name+"("+e+")";return e}class ContentMatch{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,s){let a=new TokenStream(e,s);if(a.next==null)return ContentMatch.empty;let d=parseExpr(a);a.next&&a.err("Unexpected trailing text");let b=dfa(nfa(d));return checkForDeadEnds(b,a),b}matchType(e){for(let s=0;s<this.next.length;s++)if(this.next[s].type==e)return this.next[s].next;return null}matchFragment(e,s=0,a=e.childCount){let d=this;for(let b=s;d&&b<a;b++)d=d.matchType(e.child(b).type);return d}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:s}=this.next[e];if(!(s.isText||s.hasRequiredAttrs()))return s}return null}compatible(e){for(let s=0;s<this.next.length;s++)for(let a=0;a<e.next.length;a++)if(this.next[s].type==e.next[a].type)return!0;return!1}fillBefore(e,s=!1,a=0){let d=[this];function b(_,_e){let ot=_.matchFragment(e,a);if(ot&&(!s||ot.validEnd))return Fragment.from(_e.map(st=>st.createAndFill()));for(let st=0;st<_.next.length;st++){let{type:ct,next:ft}=_.next[st];if(!(ct.isText||ct.hasRequiredAttrs())&&d.indexOf(ft)==-1){d.push(ft);let mt=b(ft,_e.concat(ct));if(mt)return mt}}return null}return b(this,[])}findWrapping(e){for(let a=0;a<this.wrapCache.length;a+=2)if(this.wrapCache[a]==e)return this.wrapCache[a+1];let s=this.computeWrapping(e);return this.wrapCache.push(e,s),s}computeWrapping(e){let s=Object.create(null),a=[{match:this,type:null,via:null}];for(;a.length;){let d=a.shift(),b=d.match;if(b.matchType(e)){let _=[];for(let _e=d;_e.type;_e=_e.via)_.push(_e.type);return _.reverse()}for(let _=0;_<b.next.length;_++){let{type:_e,next:ot}=b.next[_];!_e.isLeaf&&!_e.hasRequiredAttrs()&&!(_e.name in s)&&(!d.type||ot.validEnd)&&(a.push({match:_e.contentMatch,type:_e,via:d}),s[_e.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function s(a){e.push(a);for(let d=0;d<a.next.length;d++)e.indexOf(a.next[d].next)==-1&&s(a.next[d].next)}return s(this),e.map((a,d)=>{let b=d+(a.validEnd?"*":" ")+" ";for(let _=0;_<a.next.length;_++)b+=(_?", ":"")+a.next[_].type.name+"->"+e.indexOf(a.next[_].next);return b}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(e,s){this.string=e,this.nodeTypes=s,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function parseExpr(o){let e=[];do e.push(parseExprSeq(o));while(o.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function parseExprSeq(o){let e=[];do e.push(parseExprSubscript(o));while(o.next&&o.next!=")"&&o.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function parseExprSubscript(o){let e=parseExprAtom(o);for(;;)if(o.eat("+"))e={type:"plus",expr:e};else if(o.eat("*"))e={type:"star",expr:e};else if(o.eat("?"))e={type:"opt",expr:e};else if(o.eat("{"))e=parseExprRange(o,e);else break;return e}function parseNum(o){/\D/.test(o.next)&&o.err("Expected number, got '"+o.next+"'");let e=Number(o.next);return o.pos++,e}function parseExprRange(o,e){let s=parseNum(o),a=s;return o.eat(",")&&(o.next!="}"?a=parseNum(o):a=-1),o.eat("}")||o.err("Unclosed braced range"),{type:"range",min:s,max:a,expr:e}}function resolveName(o,e){let s=o.nodeTypes,a=s[e];if(a)return[a];let d=[];for(let b in s){let _=s[b];_.isInGroup(e)&&d.push(_)}return d.length==0&&o.err("No node type or group '"+e+"' found"),d}function parseExprAtom(o){if(o.eat("(")){let e=parseExpr(o);return o.eat(")")||o.err("Missing closing paren"),e}else if(/\W/.test(o.next))o.err("Unexpected token '"+o.next+"'");else{let e=resolveName(o,o.next).map(s=>(o.inline==null?o.inline=s.isInline:o.inline!=s.isInline&&o.err("Mixing inline and block content"),{type:"name",value:s}));return o.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function nfa(o){let e=[[]];return d(b(o,0),s()),e;function s(){return e.push([])-1}function a(_,_e,ot){let st={term:ot,to:_e};return e[_].push(st),st}function d(_,_e){_.forEach(ot=>ot.to=_e)}function b(_,_e){if(_.type=="choice")return _.exprs.reduce((ot,st)=>ot.concat(b(st,_e)),[]);if(_.type=="seq")for(let ot=0;;ot++){let st=b(_.exprs[ot],_e);if(ot==_.exprs.length-1)return st;d(st,_e=s())}else if(_.type=="star"){let ot=s();return a(_e,ot),d(b(_.expr,ot),ot),[a(ot)]}else if(_.type=="plus"){let ot=s();return d(b(_.expr,_e),ot),d(b(_.expr,ot),ot),[a(ot)]}else{if(_.type=="opt")return[a(_e)].concat(b(_.expr,_e));if(_.type=="range"){let ot=_e;for(let st=0;st<_.min;st++){let ct=s();d(b(_.expr,ot),ct),ot=ct}if(_.max==-1)d(b(_.expr,ot),ot);else for(let st=_.min;st<_.max;st++){let ct=s();a(ot,ct),d(b(_.expr,ot),ct),ot=ct}return[a(ot)]}else{if(_.type=="name")return[a(_e,void 0,_.value)];throw new Error("Unknown expr type")}}}}function cmp(o,e){return e-o}function nullFrom(o,e){let s=[];return a(e),s.sort(cmp);function a(d){let b=o[d];if(b.length==1&&!b[0].term)return a(b[0].to);s.push(d);for(let _=0;_<b.length;_++){let{term:_e,to:ot}=b[_];!_e&&s.indexOf(ot)==-1&&a(ot)}}}function dfa(o){let e=Object.create(null);return s(nullFrom(o,0));function s(a){let d=[];a.forEach(_=>{o[_].forEach(({term:_e,to:ot})=>{if(!_e)return;let st;for(let ct=0;ct<d.length;ct++)d[ct][0]==_e&&(st=d[ct][1]);nullFrom(o,ot).forEach(ct=>{st||d.push([_e,st=[]]),st.indexOf(ct)==-1&&st.push(ct)})})});let b=e[a.join(",")]=new ContentMatch(a.indexOf(o.length-1)>-1);for(let _=0;_<d.length;_++){let _e=d[_][1].sort(cmp);b.next.push({type:d[_][0],next:e[_e.join(",")]||s(_e)})}return b}}function checkForDeadEnds(o,e){for(let s=0,a=[o];s<a.length;s++){let d=a[s],b=!d.validEnd,_=[];for(let _e=0;_e<d.next.length;_e++){let{type:ot,next:st}=d.next[_e];_.push(ot.name),b&&!(ot.isText||ot.hasRequiredAttrs())&&(b=!1),a.indexOf(st)==-1&&a.push(st)}b&&e.err("Only non-generatable nodes ("+_.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(o){let e=Object.create(null);for(let s in o){let a=o[s];if(!a.hasDefault)return null;e[s]=a.default}return e}function computeAttrs(o,e){let s=Object.create(null);for(let a in o){let d=e&&e[a];if(d===void 0){let b=o[a];if(b.hasDefault)d=b.default;else throw new RangeError("No value supplied for attribute "+a)}s[a]=d}return s}function checkAttrs(o,e,s,a){for(let d in e)if(!(d in o))throw new RangeError(`Unsupported attribute ${d} for ${s} of type ${d}`);for(let d in o){let b=o[d];b.validate&&b.validate(e[d])}}function initAttrs(o,e){let s=Object.create(null);if(e)for(let a in e)s[a]=new Attribute(o,a,e[a]);return s}let NodeType$1=class fle{constructor(e,s,a){this.name=e,this.schema=s,this.spec=a,this.markSet=null,this.groups=a.group?a.group.split(" "):[],this.attrs=initAttrs(e,a.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(a.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,e)}create(e=null,s,a){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$2(this,this.computeAttrs(e),Fragment.from(s),Mark$1.setFrom(a))}createChecked(e=null,s,a){return s=Fragment.from(s),this.checkContent(s),new Node$2(this,this.computeAttrs(e),s,Mark$1.setFrom(a))}createAndFill(e=null,s,a){if(e=this.computeAttrs(e),s=Fragment.from(s),s.size){let _=this.contentMatch.fillBefore(s);if(!_)return null;s=_.append(s)}let d=this.contentMatch.matchFragment(s),b=d&&d.fillBefore(Fragment.empty,!0);return b?new Node$2(this,e,s.append(b),Mark$1.setFrom(a)):null}validContent(e){let s=this.contentMatch.matchFragment(e);if(!s||!s.validEnd)return!1;for(let a=0;a<e.childCount;a++)if(!this.allowsMarks(e.child(a).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){checkAttrs(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let s=0;s<e.length;s++)if(!this.allowsMarkType(e[s].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let s;for(let a=0;a<e.length;a++)this.allowsMarkType(e[a].type)?s&&s.push(e[a]):s||(s=e.slice(0,a));return s?s.length?s:Mark$1.none:e}static compile(e,s){let a=Object.create(null);e.forEach((b,_)=>a[b]=new fle(b,s,_));let d=s.spec.topNode||"doc";if(!a[d])throw new RangeError("Schema is missing its top node type ('"+d+"')");if(!a.text)throw new RangeError("Every schema needs a 'text' type");for(let b in a.text.attrs)throw new RangeError("The text node type should not have attributes");return a}};function validateType(o,e,s){let a=s.split("|");return d=>{let b=d===null?"null":typeof d;if(a.indexOf(b)<0)throw new RangeError(`Expected value of type ${a} for attribute ${e} on type ${o}, got ${b}`)}}class Attribute{constructor(e,s,a){this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default,this.validate=typeof a.validate=="string"?validateType(e,s,a.validate):a.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(e,s,a,d){this.name=e,this.rank=s,this.schema=a,this.spec=d,this.attrs=initAttrs(e,d.attrs),this.excluded=null;let b=defaultAttrs(this.attrs);this.instance=b?new Mark$1(this,b):null}create(e=null){return!e&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,e))}static compile(e,s){let a=Object.create(null),d=0;return e.forEach((b,_)=>a[b]=new MarkType(b,d++,s,_)),a}removeFromSet(e){for(var s=0;s<e.length;s++)e[s].type==this&&(e=e.slice(0,s).concat(e.slice(s+1)),s--);return e}isInSet(e){for(let s=0;s<e.length;s++)if(e[s].type==this)return e[s]}checkAttrs(e){checkAttrs(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Schema{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let s=this.spec={};for(let d in e)s[d]=e[d];s.nodes=OrderedMap.from(e.nodes),s.marks=OrderedMap.from(e.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let a=Object.create(null);for(let d in this.nodes){if(d in this.marks)throw new RangeError(d+" can not be both a node and a mark");let b=this.nodes[d],_=b.spec.content||"",_e=b.spec.marks;if(b.contentMatch=a[_]||(a[_]=ContentMatch.parse(_,this.nodes)),b.inlineContent=b.contentMatch.inlineContent,b.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!b.isInline||!b.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=b}b.markSet=_e=="_"?null:_e?gatherMarks(this,_e.split(" ")):_e==""||!b.inlineContent?[]:null}for(let d in this.marks){let b=this.marks[d],_=b.spec.excludes;b.excluded=_==null?[b]:_==""?[]:gatherMarks(this,_.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,s=null,a,d){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof NodeType$1){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(s,a,d)}text(e,s){let a=this.nodes.text;return new TextNode(a,a.defaultAttrs,e,Mark$1.setFrom(s))}mark(e,s){return typeof e=="string"&&(e=this.marks[e]),e.create(s)}nodeFromJSON(e){return Node$2.fromJSON(this,e)}markFromJSON(e){return Mark$1.fromJSON(this,e)}nodeType(e){let s=this.nodes[e];if(!s)throw new RangeError("Unknown node type: "+e);return s}}function gatherMarks(o,e){let s=[];for(let a=0;a<e.length;a++){let d=e[a],b=o.marks[d],_=b;if(b)s.push(b);else for(let _e in o.marks){let ot=o.marks[_e];(d=="_"||ot.spec.group&&ot.spec.group.split(" ").indexOf(d)>-1)&&s.push(_=ot)}if(!_)throw new SyntaxError("Unknown mark type: '"+e[a]+"'")}return s}function isTagRule(o){return o.tag!=null}function isStyleRule(o){return o.style!=null}let DOMParser$1=class mie{constructor(e,s){this.schema=e,this.rules=s,this.tags=[],this.styles=[];let a=this.matchedStyles=[];s.forEach(d=>{if(isTagRule(d))this.tags.push(d);else if(isStyleRule(d)){let b=/[^=]*/.exec(d.style)[0];a.indexOf(b)<0&&a.push(b),this.styles.push(d)}}),this.normalizeLists=!this.tags.some(d=>{if(!/^(ul|ol)\b/.test(d.tag)||!d.node)return!1;let b=e.nodes[d.node];return b.contentMatch.matchType(b)})}parse(e,s={}){let a=new ParseContext(this,s,!1);return a.addAll(e,Mark$1.none,s.from,s.to),a.finish()}parseSlice(e,s={}){let a=new ParseContext(this,s,!0);return a.addAll(e,Mark$1.none,s.from,s.to),Slice.maxOpen(a.finish())}matchTag(e,s,a){for(let d=a?this.tags.indexOf(a)+1:0;d<this.tags.length;d++){let b=this.tags[d];if(matches(e,b.tag)&&(b.namespace===void 0||e.namespaceURI==b.namespace)&&(!b.context||s.matchesContext(b.context))){if(b.getAttrs){let _=b.getAttrs(e);if(_===!1)continue;b.attrs=_||void 0}return b}}}matchStyle(e,s,a,d){for(let b=d?this.styles.indexOf(d)+1:0;b<this.styles.length;b++){let _=this.styles[b],_e=_.style;if(!(_e.indexOf(e)!=0||_.context&&!a.matchesContext(_.context)||_e.length>e.length&&(_e.charCodeAt(e.length)!=61||_e.slice(e.length+1)!=s))){if(_.getAttrs){let ot=_.getAttrs(s);if(ot===!1)continue;_.attrs=ot||void 0}return _}}}static schemaRules(e){let s=[];function a(d){let b=d.priority==null?50:d.priority,_=0;for(;_<s.length;_++){let _e=s[_];if((_e.priority==null?50:_e.priority)<b)break}s.splice(_,0,d)}for(let d in e.marks){let b=e.marks[d].spec.parseDOM;b&&b.forEach(_=>{a(_=copy(_)),_.mark||_.ignore||_.clearMark||(_.mark=d)})}for(let d in e.nodes){let b=e.nodes[d].spec.parseDOM;b&&b.forEach(_=>{a(_=copy(_)),_.node||_.ignore||_.mark||(_.node=d)})}return s}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new mie(e,mie.schemaRules(e)))}};const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(o,e,s){return e!=null?(e?OPT_PRESERVE_WS:0)|(e==="full"?OPT_PRESERVE_WS_FULL:0):o&&o.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:s&~OPT_OPEN_LEFT}class NodeContext{constructor(e,s,a,d,b,_){this.type=e,this.attrs=s,this.marks=a,this.solid=d,this.options=_,this.content=[],this.activeMarks=Mark$1.none,this.match=b||(_&OPT_OPEN_LEFT?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let s=this.type.contentMatch.fillBefore(Fragment.from(e));if(s)this.match=this.type.contentMatch.matchFragment(s);else{let a=this.type.contentMatch,d;return(d=a.findWrapping(e.type))?(this.match=a,d):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&OPT_PRESERVE_WS)){let a=this.content[this.content.length-1],d;if(a&&a.isText&&(d=/[ \t\r\n\u000c]+$/.exec(a.text))){let b=a;a.text.length==d[0].length?this.content.pop():this.content[this.content.length-1]=b.withText(b.text.slice(0,b.text.length-d[0].length))}}let s=Fragment.from(this.content);return!e&&this.match&&(s=s.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,s,this.marks):s}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!blockTags.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(e,s,a){this.parser=e,this.options=s,this.isOpen=a,this.open=0;let d=s.topNode,b,_=wsOptionsFor(null,s.preserveWhitespace,0)|(a?OPT_OPEN_LEFT:0);d?b=new NodeContext(d.type,d.attrs,Mark$1.none,!0,s.topMatch||d.type.contentMatch,_):a?b=new NodeContext(null,null,Mark$1.none,!0,null,_):b=new NodeContext(e.schema.topNodeType,null,Mark$1.none,!0,null,_),this.nodes=[b],this.find=s.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,s){e.nodeType==3?this.addTextNode(e,s):e.nodeType==1&&this.addElement(e,s)}addTextNode(e,s){let a=e.nodeValue,d=this.top;if(d.options&OPT_PRESERVE_WS_FULL||d.inlineContext(e)||/[^ \t\r\n\u000c]/.test(a)){if(d.options&OPT_PRESERVE_WS)d.options&OPT_PRESERVE_WS_FULL?a=a.replace(/\r\n?/g,`
`):a=a.replace(/\r?\n|\r/g," ");else if(a=a.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(a)&&this.open==this.nodes.length-1){let b=d.content[d.content.length-1],_=e.previousSibling;(!b||_&&_.nodeName=="BR"||b.isText&&/[ \t\r\n\u000c]$/.test(b.text))&&(a=a.slice(1))}a&&this.insertNode(this.parser.schema.text(a),s),this.findInText(e)}else this.findInside(e)}addElement(e,s,a){let d=e.nodeName.toLowerCase(),b;listTags.hasOwnProperty(d)&&this.parser.normalizeLists&&normalizeList(e);let _=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(b=this.parser.matchTag(e,this,a));if(_?_.ignore:ignoreTags.hasOwnProperty(d))this.findInside(e),this.ignoreFallback(e,s);else if(!_||_.skip||_.closeParent){_&&_.closeParent?this.open=Math.max(0,this.open-1):_&&_.skip.nodeType&&(e=_.skip);let _e,ot=this.top,st=this.needsBlock;if(blockTags.hasOwnProperty(d))ot.content.length&&ot.content[0].isInline&&this.open&&(this.open--,ot=this.top),_e=!0,ot.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,s);return}let ct=_&&_.skip?s:this.readStyles(e,s);ct&&this.addAll(e,ct),_e&&this.sync(ot),this.needsBlock=st}else{let _e=this.readStyles(e,s);_e&&this.addElementByRule(e,_,_e,_.consuming===!1?b:void 0)}}leafFallback(e,s){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),s)}ignoreFallback(e,s){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),s)}readStyles(e,s){let a=e.style;if(a&&a.length)for(let d=0;d<this.parser.matchedStyles.length;d++){let b=this.parser.matchedStyles[d],_=a.getPropertyValue(b);if(_)for(let _e=void 0;;){let ot=this.parser.matchStyle(b,_,this,_e);if(!ot)break;if(ot.ignore)return null;if(ot.clearMark?s=s.filter(st=>!ot.clearMark(st)):s=s.concat(this.parser.schema.marks[ot.mark].create(ot.attrs)),ot.consuming===!1)_e=ot;else break}}return s}addElementByRule(e,s,a,d){let b,_;if(s.node)if(_=this.parser.schema.nodes[s.node],_.isLeaf)this.insertNode(_.create(s.attrs),a)||this.leafFallback(e,a);else{let ot=this.enter(_,s.attrs||null,a,s.preserveWhitespace);ot&&(b=!0,a=ot)}else{let ot=this.parser.schema.marks[s.mark];a=a.concat(ot.create(s.attrs))}let _e=this.top;if(_&&_.isLeaf)this.findInside(e);else if(d)this.addElement(e,a,d);else if(s.getContent)this.findInside(e),s.getContent(e,this.parser.schema).forEach(ot=>this.insertNode(ot,a));else{let ot=e;typeof s.contentElement=="string"?ot=e.querySelector(s.contentElement):typeof s.contentElement=="function"?ot=s.contentElement(e):s.contentElement&&(ot=s.contentElement),this.findAround(e,ot,!0),this.addAll(ot,a),this.findAround(e,ot,!1)}b&&this.sync(_e)&&this.open--}addAll(e,s,a,d){let b=a||0;for(let _=a?e.childNodes[a]:e.firstChild,_e=d==null?null:e.childNodes[d];_!=_e;_=_.nextSibling,++b)this.findAtPoint(e,b),this.addDOM(_,s);this.findAtPoint(e,b)}findPlace(e,s){let a,d;for(let b=this.open;b>=0;b--){let _=this.nodes[b],_e=_.findWrapping(e);if(_e&&(!a||a.length>_e.length)&&(a=_e,d=_,!_e.length)||_.solid)break}if(!a)return null;this.sync(d);for(let b=0;b<a.length;b++)s=this.enterInner(a[b],null,s,!1);return s}insertNode(e,s){if(e.isInline&&this.needsBlock&&!this.top.type){let d=this.textblockFromContext();d&&(s=this.enterInner(d,null,s))}let a=this.findPlace(e,s);if(a){this.closeExtra();let d=this.top;d.match&&(d.match=d.match.matchType(e.type));let b=Mark$1.none;for(let _ of a.concat(e.marks))(d.type?d.type.allowsMarkType(_.type):markMayApply(_.type,e.type))&&(b=_.addToSet(b));return d.content.push(e.mark(b)),!0}return!1}enter(e,s,a,d){let b=this.findPlace(e.create(s),a);return b&&(b=this.enterInner(e,s,a,!0,d)),b}enterInner(e,s,a,d=!1,b){this.closeExtra();let _=this.top;_.match=_.match&&_.match.matchType(e);let _e=wsOptionsFor(e,b,_.options);_.options&OPT_OPEN_LEFT&&_.content.length==0&&(_e|=OPT_OPEN_LEFT);let ot=Mark$1.none;return a=a.filter(st=>(_.type?_.type.allowsMarkType(st.type):markMayApply(st.type,e))?(ot=st.addToSet(ot),!1):!0),this.nodes.push(new NodeContext(e,s,ot,d,null,_e)),this.open++,a}closeExtra(e=!1){let s=this.nodes.length-1;if(s>this.open){for(;s>this.open;s--)this.nodes[s-1].content.push(this.nodes[s].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let s=this.open;s>=0;s--)if(this.nodes[s]==e)return this.open=s,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let s=this.open;s>=0;s--){let a=this.nodes[s].content;for(let d=a.length-1;d>=0;d--)e+=a[d].nodeSize;s&&e++}return e}findAtPoint(e,s){if(this.find)for(let a=0;a<this.find.length;a++)this.find[a].node==e&&this.find[a].offset==s&&(this.find[a].pos=this.currentPos)}findInside(e){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&(this.find[s].pos=this.currentPos)}findAround(e,s,a){if(e!=s&&this.find)for(let d=0;d<this.find.length;d++)this.find[d].pos==null&&e.nodeType==1&&e.contains(this.find[d].node)&&s.compareDocumentPosition(this.find[d].node)&(a?2:4)&&(this.find[d].pos=this.currentPos)}findInText(e){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&(this.find[s].pos=this.currentPos-(e.nodeValue.length-this.find[s].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let s=e.split("/"),a=this.options.context,d=!this.isOpen&&(!a||a.parent.type==this.nodes[0].type),b=-(a?a.depth+1:0)+(d?0:1),_=(_e,ot)=>{for(;_e>=0;_e--){let st=s[_e];if(st==""){if(_e==s.length-1||_e==0)continue;for(;ot>=b;ot--)if(_(_e-1,ot))return!0;return!1}else{let ct=ot>0||ot==0&&d?this.nodes[ot].type:a&&ot>=b?a.node(ot-b).type:null;if(!ct||ct.name!=st&&!ct.isInGroup(st))return!1;ot--}}return!0};return _(s.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let s=e.depth;s>=0;s--){let a=e.node(s).contentMatchAt(e.indexAfter(s)).defaultType;if(a&&a.isTextblock&&a.defaultAttrs)return a}for(let s in this.parser.schema.nodes){let a=this.parser.schema.nodes[s];if(a.isTextblock&&a.defaultAttrs)return a}}}function normalizeList(o){for(let e=o.firstChild,s=null;e;e=e.nextSibling){let a=e.nodeType==1?e.nodeName.toLowerCase():null;a&&listTags.hasOwnProperty(a)&&s?(s.appendChild(e),e=s):a=="li"?s=e:a&&(s=null)}}function matches(o,e){return(o.matches||o.msMatchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector).call(o,e)}function copy(o){let e={};for(let s in o)e[s]=o[s];return e}function markMayApply(o,e){let s=e.schema.nodes;for(let a in s){let d=s[a];if(!d.allowsMarkType(o))continue;let b=[],_=_e=>{b.push(_e);for(let ot=0;ot<_e.edgeCount;ot++){let{type:st,next:ct}=_e.edge(ot);if(st==e||b.indexOf(ct)<0&&_(ct))return!0}};if(_(d.contentMatch))return!0}}class DOMSerializer{constructor(e,s){this.nodes=e,this.marks=s}serializeFragment(e,s={},a){a||(a=doc$1(s).createDocumentFragment());let d=a,b=[];return e.forEach(_=>{if(b.length||_.marks.length){let _e=0,ot=0;for(;_e<b.length&&ot<_.marks.length;){let st=_.marks[ot];if(!this.marks[st.type.name]){ot++;continue}if(!st.eq(b[_e][0])||st.type.spec.spanning===!1)break;_e++,ot++}for(;_e<b.length;)d=b.pop()[1];for(;ot<_.marks.length;){let st=_.marks[ot++],ct=this.serializeMark(st,_.isInline,s);ct&&(b.push([st,d]),d.appendChild(ct.dom),d=ct.contentDOM||ct.dom)}}d.appendChild(this.serializeNodeInner(_,s))}),a}serializeNodeInner(e,s){let{dom:a,contentDOM:d}=renderSpec(doc$1(s),this.nodes[e.type.name](e),null,e.attrs);if(d){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,s,d)}return a}serializeNode(e,s={}){let a=this.serializeNodeInner(e,s);for(let d=e.marks.length-1;d>=0;d--){let b=this.serializeMark(e.marks[d],e.isInline,s);b&&((b.contentDOM||b.dom).appendChild(a),a=b.dom)}return a}serializeMark(e,s,a={}){let d=this.marks[e.type.name];return d&&renderSpec(doc$1(a),d(e,s),null,e.attrs)}static renderSpec(e,s,a=null,d){return renderSpec(e,s,a,d)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let s=gatherToDOM(e.nodes);return s.text||(s.text=a=>a.text),s}static marksFromSchema(e){return gatherToDOM(e.marks)}}function gatherToDOM(o){let e={};for(let s in o){let a=o[s].spec.toDOM;a&&(e[s]=a)}return e}function doc$1(o){return o.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(o){let e=suspiciousAttributeCache.get(o);return e===void 0&&suspiciousAttributeCache.set(o,e=suspiciousAttributesInner(o)),e}function suspiciousAttributesInner(o){let e=null;function s(a){if(a&&typeof a=="object")if(Array.isArray(a))if(typeof a[0]=="string")e||(e=[]),e.push(a);else for(let d=0;d<a.length;d++)s(a[d]);else for(let d in a)s(a[d])}return s(o),e}function renderSpec(o,e,s,a){if(typeof e=="string")return{dom:o.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let d=e[0],b;if(typeof d!="string")throw new RangeError("Invalid array passed to renderSpec");if(a&&(b=suspiciousAttributes(a))&&b.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let _=d.indexOf(" ");_>0&&(s=d.slice(0,_),d=d.slice(_+1));let _e,ot=s?o.createElementNS(s,d):o.createElement(d),st=e[1],ct=1;if(st&&typeof st=="object"&&st.nodeType==null&&!Array.isArray(st)){ct=2;for(let ft in st)if(st[ft]!=null){let mt=ft.indexOf(" ");mt>0?ot.setAttributeNS(ft.slice(0,mt),ft.slice(mt+1),st[ft]):ot.setAttribute(ft,st[ft])}}for(let ft=ct;ft<e.length;ft++){let mt=e[ft];if(mt===0){if(ft<e.length-1||ft>ct)throw new RangeError("Content hole must be the only child of its parent node");return{dom:ot,contentDOM:ot}}else{let{dom:bt,contentDOM:wt}=renderSpec(o,mt,s,a);if(ot.appendChild(bt),wt){if(_e)throw new RangeError("Multiple content holes");_e=wt}}}return{dom:ot,contentDOM:_e}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(o,e){return o+e*factor16}function recoverIndex(o){return o&lower16}function recoverOffset(o){return(o-(o&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(e,s,a){this.pos=e,this.delInfo=s,this.recover=a}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(e,s=!1){if(this.ranges=e,this.inverted=s,!e.length&&StepMap.empty)return StepMap.empty}recover(e){let s=0,a=recoverIndex(e);if(!this.inverted)for(let d=0;d<a;d++)s+=this.ranges[d*3+2]-this.ranges[d*3+1];return this.ranges[a*3]+s+recoverOffset(e)}mapResult(e,s=1){return this._map(e,s,!1)}map(e,s=1){return this._map(e,s,!0)}_map(e,s,a){let d=0,b=this.inverted?2:1,_=this.inverted?1:2;for(let _e=0;_e<this.ranges.length;_e+=3){let ot=this.ranges[_e]-(this.inverted?d:0);if(ot>e)break;let st=this.ranges[_e+b],ct=this.ranges[_e+_],ft=ot+st;if(e<=ft){let mt=st?e==ot?-1:e==ft?1:s:s,bt=ot+d+(mt<0?0:ct);if(a)return bt;let wt=e==(s<0?ot:ft)?null:makeRecover(_e/3,e-ot),Ct=e==ot?DEL_AFTER:e==ft?DEL_BEFORE:DEL_ACROSS;return(s<0?e!=ot:e!=ft)&&(Ct|=DEL_SIDE),new MapResult(bt,Ct,wt)}d+=ct-st}return a?e+d:new MapResult(e+d,0,null)}touches(e,s){let a=0,d=recoverIndex(s),b=this.inverted?2:1,_=this.inverted?1:2;for(let _e=0;_e<this.ranges.length;_e+=3){let ot=this.ranges[_e]-(this.inverted?a:0);if(ot>e)break;let st=this.ranges[_e+b],ct=ot+st;if(e<=ct&&_e==d*3)return!0;a+=this.ranges[_e+_]-st}return!1}forEach(e){let s=this.inverted?2:1,a=this.inverted?1:2;for(let d=0,b=0;d<this.ranges.length;d+=3){let _=this.ranges[d],_e=_-(this.inverted?b:0),ot=_+(this.inverted?0:b),st=this.ranges[d+s],ct=this.ranges[d+a];e(_e,_e+st,ot,ot+ct),b+=ct-st}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?StepMap.empty:new StepMap(e<0?[0,-e,0]:[0,0,e])}}StepMap.empty=new StepMap([]);class Mapping{constructor(e=[],s,a=0,d=e.length){this.maps=e,this.mirror=s,this.from=a,this.to=d}slice(e=0,s=this.maps.length){return new Mapping(this.maps,this.mirror,e,s)}copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,s){this.to=this.maps.push(e),s!=null&&this.setMirror(this.maps.length-1,s)}appendMapping(e){for(let s=0,a=this.maps.length;s<e.maps.length;s++){let d=e.getMirror(s);this.appendMap(e.maps[s],d!=null&&d<s?a+d:void 0)}}getMirror(e){if(this.mirror){for(let s=0;s<this.mirror.length;s++)if(this.mirror[s]==e)return this.mirror[s+(s%2?-1:1)]}}setMirror(e,s){this.mirror||(this.mirror=[]),this.mirror.push(e,s)}appendMappingInverted(e){for(let s=e.maps.length-1,a=this.maps.length+e.maps.length;s>=0;s--){let d=e.getMirror(s);this.appendMap(e.maps[s].invert(),d!=null&&d>s?a-d-1:void 0)}}invert(){let e=new Mapping;return e.appendMappingInverted(this),e}map(e,s=1){if(this.mirror)return this._map(e,s,!0);for(let a=this.from;a<this.to;a++)e=this.maps[a].map(e,s);return e}mapResult(e,s=1){return this._map(e,s,!1)}_map(e,s,a){let d=0;for(let b=this.from;b<this.to;b++){let _=this.maps[b],_e=_.mapResult(e,s);if(_e.recover!=null){let ot=this.getMirror(b);if(ot!=null&&ot>b&&ot<this.to){b=ot,e=this.maps[ot].recover(_e.recover);continue}}d|=_e.delInfo,e=_e.pos}return a?e:new MapResult(e,d,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(e){return null}static fromJSON(e,s){if(!s||!s.stepType)throw new RangeError("Invalid input for Step.fromJSON");let a=stepsByID[s.stepType];if(!a)throw new RangeError(`No step type ${s.stepType} defined`);return a.fromJSON(e,s)}static jsonID(e,s){if(e in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+e);return stepsByID[e]=s,s.prototype.jsonID=e,s}}class StepResult{constructor(e,s){this.doc=e,this.failed=s}static ok(e){return new StepResult(e,null)}static fail(e){return new StepResult(null,e)}static fromReplace(e,s,a,d){try{return StepResult.ok(e.replace(s,a,d))}catch(b){if(b instanceof ReplaceError)return StepResult.fail(b.message);throw b}}}function mapFragment(o,e,s){let a=[];for(let d=0;d<o.childCount;d++){let b=o.child(d);b.content.size&&(b=b.copy(mapFragment(b.content,e,b))),b.isInline&&(b=e(b,s,d)),a.push(b)}return Fragment.fromArray(a)}class AddMarkStep extends Step{constructor(e,s,a){super(),this.from=e,this.to=s,this.mark=a}apply(e){let s=e.slice(this.from,this.to),a=e.resolve(this.from),d=a.node(a.sharedDepth(this.to)),b=new Slice(mapFragment(s.content,(_,_e)=>!_.isAtom||!_e.type.allowsMarkType(this.mark.type)?_:_.mark(this.mark.addToSet(_.marks)),d),s.openStart,s.openEnd);return StepResult.fromReplace(e,this.from,this.to,b)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(e){let s=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return s.deleted&&a.deleted||s.pos>=a.pos?null:new AddMarkStep(s.pos,a.pos,this.mark)}merge(e){return e instanceof AddMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new AddMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(s.from,s.to,e.markFromJSON(s.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(e,s,a){super(),this.from=e,this.to=s,this.mark=a}apply(e){let s=e.slice(this.from,this.to),a=new Slice(mapFragment(s.content,d=>d.mark(this.mark.removeFromSet(d.marks)),e),s.openStart,s.openEnd);return StepResult.fromReplace(e,this.from,this.to,a)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(e){let s=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return s.deleted&&a.deleted||s.pos>=a.pos?null:new RemoveMarkStep(s.pos,a.pos,this.mark)}merge(e){return e instanceof RemoveMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new RemoveMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(s.from,s.to,e.markFromJSON(s.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(e,s){super(),this.pos=e,this.mark=s}apply(e){let s=e.nodeAt(this.pos);if(!s)return StepResult.fail("No node at mark step's position");let a=s.type.create(s.attrs,null,this.mark.addToSet(s.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(a),0,s.isLeaf?0:1))}invert(e){let s=e.nodeAt(this.pos);if(s){let a=this.mark.addToSet(s.marks);if(a.length==s.marks.length){for(let d=0;d<s.marks.length;d++)if(!s.marks[d].isInSet(a))return new AddNodeMarkStep(this.pos,s.marks[d]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new AddNodeMarkStep(s.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(s.pos,e.markFromJSON(s.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(e,s){super(),this.pos=e,this.mark=s}apply(e){let s=e.nodeAt(this.pos);if(!s)return StepResult.fail("No node at mark step's position");let a=s.type.create(s.attrs,null,this.mark.removeFromSet(s.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(a),0,s.isLeaf?0:1))}invert(e){let s=e.nodeAt(this.pos);return!s||!this.mark.isInSet(s.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new RemoveNodeMarkStep(s.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(s.pos,e.markFromJSON(s.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(e,s,a,d=!1){super(),this.from=e,this.to=s,this.slice=a,this.structure=d}apply(e){return this.structure&&contentBetween(e,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(e){return new ReplaceStep(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let s=e.mapResult(this.from,1),a=e.mapResult(this.to,-1);return s.deletedAcross&&a.deletedAcross?null:new ReplaceStep(s.pos,Math.max(s.pos,a.pos),this.slice)}merge(e){if(!(e instanceof ReplaceStep)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let s=this.slice.size+e.slice.size==0?Slice.empty:new Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ReplaceStep(this.from,this.to+(e.to-e.from),s,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let s=this.slice.size+e.slice.size==0?Slice.empty:new Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ReplaceStep(e.from,this.to,s,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(s.from,s.to,Slice.fromJSON(e,s.slice),!!s.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(e,s,a,d,b,_,_e=!1){super(),this.from=e,this.to=s,this.gapFrom=a,this.gapTo=d,this.slice=b,this.insert=_,this.structure=_e}apply(e){if(this.structure&&(contentBetween(e,this.from,this.gapFrom)||contentBetween(e,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let s=e.slice(this.gapFrom,this.gapTo);if(s.openStart||s.openEnd)return StepResult.fail("Gap is not a flat range");let a=this.slice.insertAt(this.insert,s.content);return a?StepResult.fromReplace(e,this.from,this.to,a):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let s=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+s,this.from+this.insert,this.from+this.insert+s,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let s=e.mapResult(this.from,1),a=e.mapResult(this.to,-1),d=this.from==this.gapFrom?s.pos:e.map(this.gapFrom,-1),b=this.to==this.gapTo?a.pos:e.map(this.gapTo,1);return s.deletedAcross&&a.deletedAcross||d<s.pos||b>a.pos?null:new ReplaceAroundStep(s.pos,a.pos,d,b,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number"||typeof s.gapFrom!="number"||typeof s.gapTo!="number"||typeof s.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(s.from,s.to,s.gapFrom,s.gapTo,Slice.fromJSON(e,s.slice),s.insert,!!s.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(o,e,s){let a=o.resolve(e),d=s-e,b=a.depth;for(;d>0&&b>0&&a.indexAfter(b)==a.node(b).childCount;)b--,d--;if(d>0){let _=a.node(b).maybeChild(a.indexAfter(b));for(;d>0;){if(!_||_.isLeaf)return!0;_=_.firstChild,d--}}return!1}function addMark(o,e,s,a){let d=[],b=[],_,_e;o.doc.nodesBetween(e,s,(ot,st,ct)=>{if(!ot.isInline)return;let ft=ot.marks;if(!a.isInSet(ft)&&ct.type.allowsMarkType(a.type)){let mt=Math.max(st,e),bt=Math.min(st+ot.nodeSize,s),wt=a.addToSet(ft);for(let Ct=0;Ct<ft.length;Ct++)ft[Ct].isInSet(wt)||(_&&_.to==mt&&_.mark.eq(ft[Ct])?_.to=bt:d.push(_=new RemoveMarkStep(mt,bt,ft[Ct])));_e&&_e.to==mt?_e.to=bt:b.push(_e=new AddMarkStep(mt,bt,a))}}),d.forEach(ot=>o.step(ot)),b.forEach(ot=>o.step(ot))}function removeMark(o,e,s,a){let d=[],b=0;o.doc.nodesBetween(e,s,(_,_e)=>{if(!_.isInline)return;b++;let ot=null;if(a instanceof MarkType){let st=_.marks,ct;for(;ct=a.isInSet(st);)(ot||(ot=[])).push(ct),st=ct.removeFromSet(st)}else a?a.isInSet(_.marks)&&(ot=[a]):ot=_.marks;if(ot&&ot.length){let st=Math.min(_e+_.nodeSize,s);for(let ct=0;ct<ot.length;ct++){let ft=ot[ct],mt;for(let bt=0;bt<d.length;bt++){let wt=d[bt];wt.step==b-1&&ft.eq(d[bt].style)&&(mt=wt)}mt?(mt.to=st,mt.step=b):d.push({style:ft,from:Math.max(_e,e),to:st,step:b})}}}),d.forEach(_=>o.step(new RemoveMarkStep(_.from,_.to,_.style)))}function clearIncompatible(o,e,s,a=s.contentMatch,d=!0){let b=o.doc.nodeAt(e),_=[],_e=e+1;for(let ot=0;ot<b.childCount;ot++){let st=b.child(ot),ct=_e+st.nodeSize,ft=a.matchType(st.type);if(!ft)_.push(new ReplaceStep(_e,ct,Slice.empty));else{a=ft;for(let mt=0;mt<st.marks.length;mt++)s.allowsMarkType(st.marks[mt].type)||o.step(new RemoveMarkStep(_e,ct,st.marks[mt]));if(d&&st.isText&&s.whitespace!="pre"){let mt,bt=/\r?\n|\r/g,wt;for(;mt=bt.exec(st.text);)wt||(wt=new Slice(Fragment.from(s.schema.text(" ",s.allowedMarks(st.marks))),0,0)),_.push(new ReplaceStep(_e+mt.index,_e+mt.index+mt[0].length,wt))}}_e=ct}if(!a.validEnd){let ot=a.fillBefore(Fragment.empty,!0);o.replace(_e,_e,new Slice(ot,0,0))}for(let ot=_.length-1;ot>=0;ot--)o.step(_[ot])}function canCut(o,e,s){return(e==0||o.canReplace(e,o.childCount))&&(s==o.childCount||o.canReplace(0,s))}function liftTarget(o){let s=o.parent.content.cutByIndex(o.startIndex,o.endIndex);for(let a=o.depth;;--a){let d=o.$from.node(a),b=o.$from.index(a),_=o.$to.indexAfter(a);if(a<o.depth&&d.canReplace(b,_,s))return a;if(a==0||d.type.spec.isolating||!canCut(d,b,_))break}return null}function lift$2(o,e,s){let{$from:a,$to:d,depth:b}=e,_=a.before(b+1),_e=d.after(b+1),ot=_,st=_e,ct=Fragment.empty,ft=0;for(let wt=b,Ct=!1;wt>s;wt--)Ct||a.index(wt)>0?(Ct=!0,ct=Fragment.from(a.node(wt).copy(ct)),ft++):ot--;let mt=Fragment.empty,bt=0;for(let wt=b,Ct=!1;wt>s;wt--)Ct||d.after(wt+1)<d.end(wt)?(Ct=!0,mt=Fragment.from(d.node(wt).copy(mt)),bt++):st++;o.step(new ReplaceAroundStep(ot,st,_,_e,new Slice(ct.append(mt),ft,bt),ct.size-ft,!0))}function findWrapping(o,e,s=null,a=o){let d=findWrappingOutside(o,e),b=d&&findWrappingInside(a,e);return b?d.map(withAttrs).concat({type:e,attrs:s}).concat(b.map(withAttrs)):null}function withAttrs(o){return{type:o,attrs:null}}function findWrappingOutside(o,e){let{parent:s,startIndex:a,endIndex:d}=o,b=s.contentMatchAt(a).findWrapping(e);if(!b)return null;let _=b.length?b[0]:e;return s.canReplaceWith(a,d,_)?b:null}function findWrappingInside(o,e){let{parent:s,startIndex:a,endIndex:d}=o,b=s.child(a),_=e.contentMatch.findWrapping(b.type);if(!_)return null;let ot=(_.length?_[_.length-1]:e).contentMatch;for(let st=a;ot&&st<d;st++)ot=ot.matchType(s.child(st).type);return!ot||!ot.validEnd?null:_}function wrap(o,e,s){let a=Fragment.empty;for(let _=s.length-1;_>=0;_--){if(a.size){let _e=s[_].type.contentMatch.matchFragment(a);if(!_e||!_e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}a=Fragment.from(s[_].type.create(s[_].attrs,a))}let d=e.start,b=e.end;o.step(new ReplaceAroundStep(d,b,d,b,new Slice(a,0,0),s.length,!0))}function setBlockType$1(o,e,s,a,d){if(!a.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let b=o.steps.length;o.doc.nodesBetween(e,s,(_,_e)=>{let ot=typeof d=="function"?d(_):d;if(_.isTextblock&&!_.hasMarkup(a,ot)&&canChangeType(o.doc,o.mapping.slice(b).map(_e),a)){let st=null;if(a.schema.linebreakReplacement){let bt=a.whitespace=="pre",wt=!!a.contentMatch.matchType(a.schema.linebreakReplacement);bt&&!wt?st=!1:!bt&&wt&&(st=!0)}st===!1&&replaceLinebreaks(o,_,_e,b),clearIncompatible(o,o.mapping.slice(b).map(_e,1),a,void 0,st===null);let ct=o.mapping.slice(b),ft=ct.map(_e,1),mt=ct.map(_e+_.nodeSize,1);return o.step(new ReplaceAroundStep(ft,mt,ft+1,mt-1,new Slice(Fragment.from(a.create(ot,null,_.marks)),0,0),1,!0)),st===!0&&replaceNewlines(o,_,_e,b),!1}})}function replaceNewlines(o,e,s,a){e.forEach((d,b)=>{if(d.isText){let _,_e=/\r?\n|\r/g;for(;_=_e.exec(d.text);){let ot=o.mapping.slice(a).map(s+1+b+_.index);o.replaceWith(ot,ot+1,e.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(o,e,s,a){e.forEach((d,b)=>{if(d.type==d.type.schema.linebreakReplacement){let _=o.mapping.slice(a).map(s+1+b);o.replaceWith(_,_+1,e.type.schema.text(`
`))}})}function canChangeType(o,e,s){let a=o.resolve(e),d=a.index();return a.parent.canReplaceWith(d,d+1,s)}function setNodeMarkup(o,e,s,a,d){let b=o.doc.nodeAt(e);if(!b)throw new RangeError("No node at given position");s||(s=b.type);let _=s.create(a,null,d||b.marks);if(b.isLeaf)return o.replaceWith(e,e+b.nodeSize,_);if(!s.validContent(b.content))throw new RangeError("Invalid content for node type "+s.name);o.step(new ReplaceAroundStep(e,e+b.nodeSize,e+1,e+b.nodeSize-1,new Slice(Fragment.from(_),0,0),1,!0))}function canSplit(o,e,s=1,a){let d=o.resolve(e),b=d.depth-s,_=a&&a[a.length-1]||d.parent;if(b<0||d.parent.type.spec.isolating||!d.parent.canReplace(d.index(),d.parent.childCount)||!_.type.validContent(d.parent.content.cutByIndex(d.index(),d.parent.childCount)))return!1;for(let st=d.depth-1,ct=s-2;st>b;st--,ct--){let ft=d.node(st),mt=d.index(st);if(ft.type.spec.isolating)return!1;let bt=ft.content.cutByIndex(mt,ft.childCount),wt=a&&a[ct+1];wt&&(bt=bt.replaceChild(0,wt.type.create(wt.attrs)));let Ct=a&&a[ct]||ft;if(!ft.canReplace(mt+1,ft.childCount)||!Ct.type.validContent(bt))return!1}let _e=d.indexAfter(b),ot=a&&a[0];return d.node(b).canReplaceWith(_e,_e,ot?ot.type:d.node(b+1).type)}function split(o,e,s=1,a){let d=o.doc.resolve(e),b=Fragment.empty,_=Fragment.empty;for(let _e=d.depth,ot=d.depth-s,st=s-1;_e>ot;_e--,st--){b=Fragment.from(d.node(_e).copy(b));let ct=a&&a[st];_=Fragment.from(ct?ct.type.create(ct.attrs,_):d.node(_e).copy(_))}o.step(new ReplaceStep(e,e,new Slice(b.append(_),s,s),!0))}function canJoin(o,e){let s=o.resolve(e),a=s.index();return joinable(s.nodeBefore,s.nodeAfter)&&s.parent.canReplace(a,a+1)}function canAppendWithSubstitutedLinebreaks(o,e){e.content.size||o.type.compatibleContent(e.type);let s=o.contentMatchAt(o.childCount),{linebreakReplacement:a}=o.type.schema;for(let d=0;d<e.childCount;d++){let b=e.child(d),_=b.type==a?o.type.schema.nodes.text:b.type;if(s=s.matchType(_),!s||!o.type.allowsMarks(b.marks))return!1}return s.validEnd}function joinable(o,e){return!!(o&&e&&!o.isLeaf&&canAppendWithSubstitutedLinebreaks(o,e))}function joinPoint(o,e,s=-1){let a=o.resolve(e);for(let d=a.depth;;d--){let b,_,_e=a.index(d);if(d==a.depth?(b=a.nodeBefore,_=a.nodeAfter):s>0?(b=a.node(d+1),_e++,_=a.node(d).maybeChild(_e)):(b=a.node(d).maybeChild(_e-1),_=a.node(d+1)),b&&!b.isTextblock&&joinable(b,_)&&a.node(d).canReplace(_e,_e+1))return e;if(d==0)break;e=s<0?a.before(d):a.after(d)}}function join(o,e,s){let a=null,{linebreakReplacement:d}=o.doc.type.schema,b=o.doc.resolve(e-s),_=b.node().type;if(d&&_.inlineContent){let ct=_.whitespace=="pre",ft=!!_.contentMatch.matchType(d);ct&&!ft?a=!1:!ct&&ft&&(a=!0)}let _e=o.steps.length;if(a===!1){let ct=o.doc.resolve(e+s);replaceLinebreaks(o,ct.node(),ct.before(),_e)}_.inlineContent&&clearIncompatible(o,e+s-1,_,b.node().contentMatchAt(b.index()),a==null);let ot=o.mapping.slice(_e),st=ot.map(e-s);if(o.step(new ReplaceStep(st,ot.map(e+s,-1),Slice.empty,!0)),a===!0){let ct=o.doc.resolve(st);replaceNewlines(o,ct.node(),ct.before(),o.steps.length)}return o}function insertPoint(o,e,s){let a=o.resolve(e);if(a.parent.canReplaceWith(a.index(),a.index(),s))return e;if(a.parentOffset==0)for(let d=a.depth-1;d>=0;d--){let b=a.index(d);if(a.node(d).canReplaceWith(b,b,s))return a.before(d+1);if(b>0)return null}if(a.parentOffset==a.parent.content.size)for(let d=a.depth-1;d>=0;d--){let b=a.indexAfter(d);if(a.node(d).canReplaceWith(b,b,s))return a.after(d+1);if(b<a.node(d).childCount)return null}return null}function dropPoint(o,e,s){let a=o.resolve(e);if(!s.content.size)return e;let d=s.content;for(let b=0;b<s.openStart;b++)d=d.firstChild.content;for(let b=1;b<=(s.openStart==0&&s.size?2:1);b++)for(let _=a.depth;_>=0;_--){let _e=_==a.depth?0:a.pos<=(a.start(_+1)+a.end(_+1))/2?-1:1,ot=a.index(_)+(_e>0?1:0),st=a.node(_),ct=!1;if(b==1)ct=st.canReplace(ot,ot,d);else{let ft=st.contentMatchAt(ot).findWrapping(d.firstChild.type);ct=ft&&st.canReplaceWith(ot,ot,ft[0])}if(ct)return _e==0?a.pos:_e<0?a.before(_+1):a.after(_+1)}return null}function replaceStep(o,e,s=e,a=Slice.empty){if(e==s&&!a.size)return null;let d=o.resolve(e),b=o.resolve(s);return fitsTrivially(d,b,a)?new ReplaceStep(e,s,a):new Fitter(d,b,a).fit()}function fitsTrivially(o,e,s){return!s.openStart&&!s.openEnd&&o.start()==e.start()&&o.parent.canReplace(o.index(),e.index(),s.content)}class Fitter{constructor(e,s,a){this.$from=e,this.$to=s,this.unplaced=a,this.frontier=[],this.placed=Fragment.empty;for(let d=0;d<=e.depth;d++){let b=e.node(d);this.frontier.push({type:b.type,match:b.contentMatchAt(e.indexAfter(d))})}for(let d=e.depth;d>0;d--)this.placed=Fragment.from(e.node(d).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let st=this.findFittable();st?this.placeNodes(st):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),s=this.placed.size-this.depth-this.$from.depth,a=this.$from,d=this.close(e<0?this.$to:a.doc.resolve(e));if(!d)return null;let b=this.placed,_=a.depth,_e=d.depth;for(;_&&_e&&b.childCount==1;)b=b.firstChild.content,_--,_e--;let ot=new Slice(b,_,_e);return e>-1?new ReplaceAroundStep(a.pos,e,this.$to.pos,this.$to.end(),ot,s):ot.size||a.pos!=this.$to.pos?new ReplaceStep(a.pos,d.pos,ot):null}findFittable(){let e=this.unplaced.openStart;for(let s=this.unplaced.content,a=0,d=this.unplaced.openEnd;a<e;a++){let b=s.firstChild;if(s.childCount>1&&(d=0),b.type.spec.isolating&&d<=a){e=a;break}s=b.content}for(let s=1;s<=2;s++)for(let a=s==1?e:this.unplaced.openStart;a>=0;a--){let d,b=null;a?(b=contentAt(this.unplaced.content,a-1).firstChild,d=b.content):d=this.unplaced.content;let _=d.firstChild;for(let _e=this.depth;_e>=0;_e--){let{type:ot,match:st}=this.frontier[_e],ct,ft=null;if(s==1&&(_?st.matchType(_.type)||(ft=st.fillBefore(Fragment.from(_),!1)):b&&ot.compatibleContent(b.type)))return{sliceDepth:a,frontierDepth:_e,parent:b,inject:ft};if(s==2&&_&&(ct=st.findWrapping(_.type)))return{sliceDepth:a,frontierDepth:_e,parent:b,wrap:ct};if(b&&st.matchType(b.type))break}}}openMore(){let{content:e,openStart:s,openEnd:a}=this.unplaced,d=contentAt(e,s);return!d.childCount||d.firstChild.isLeaf?!1:(this.unplaced=new Slice(e,s+1,Math.max(a,d.size+s>=e.size-a?s+1:0)),!0)}dropNode(){let{content:e,openStart:s,openEnd:a}=this.unplaced,d=contentAt(e,s);if(d.childCount<=1&&s>0){let b=e.size-s<=s+d.size;this.unplaced=new Slice(dropFromFragment(e,s-1,1),s-1,b?s-1:a)}else this.unplaced=new Slice(dropFromFragment(e,s,1),s,a)}placeNodes({sliceDepth:e,frontierDepth:s,parent:a,inject:d,wrap:b}){for(;this.depth>s;)this.closeFrontierNode();if(b)for(let Ct=0;Ct<b.length;Ct++)this.openFrontierNode(b[Ct]);let _=this.unplaced,_e=a?a.content:_.content,ot=_.openStart-e,st=0,ct=[],{match:ft,type:mt}=this.frontier[s];if(d){for(let Ct=0;Ct<d.childCount;Ct++)ct.push(d.child(Ct));ft=ft.matchFragment(d)}let bt=_e.size+e-(_.content.size-_.openEnd);for(;st<_e.childCount;){let Ct=_e.child(st),Rt=ft.matchType(Ct.type);if(!Rt)break;st++,(st>1||ot==0||Ct.content.size)&&(ft=Rt,ct.push(closeNodeStart(Ct.mark(mt.allowedMarks(Ct.marks)),st==1?ot:0,st==_e.childCount?bt:-1)))}let wt=st==_e.childCount;wt||(bt=-1),this.placed=addToFragment(this.placed,s,Fragment.from(ct)),this.frontier[s].match=ft,wt&&bt<0&&a&&a.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let Ct=0,Rt=_e;Ct<bt;Ct++){let It=Rt.lastChild;this.frontier.push({type:It.type,match:It.contentMatchAt(It.childCount)}),Rt=It.content}this.unplaced=wt?e==0?Slice.empty:new Slice(dropFromFragment(_.content,e-1,1),e-1,bt<0?_.openEnd:e-1):new Slice(dropFromFragment(_.content,e,st),_.openStart,_.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],s;if(!e.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(s=this.findCloseLevel(this.$to))&&s.depth==this.depth)return-1;let{depth:a}=this.$to,d=this.$to.after(a);for(;a>1&&d==this.$to.end(--a);)++d;return d}findCloseLevel(e){e:for(let s=Math.min(this.depth,e.depth);s>=0;s--){let{match:a,type:d}=this.frontier[s],b=s<e.depth&&e.end(s+1)==e.pos+(e.depth-(s+1)),_=contentAfterFits(e,s,d,a,b);if(_){for(let _e=s-1;_e>=0;_e--){let{match:ot,type:st}=this.frontier[_e],ct=contentAfterFits(e,_e,st,ot,!0);if(!ct||ct.childCount)continue e}return{depth:s,fit:_,move:b?e.doc.resolve(e.after(s+1)):e}}}}close(e){let s=this.findCloseLevel(e);if(!s)return null;for(;this.depth>s.depth;)this.closeFrontierNode();s.fit.childCount&&(this.placed=addToFragment(this.placed,s.depth,s.fit)),e=s.move;for(let a=s.depth+1;a<=e.depth;a++){let d=e.node(a),b=d.type.contentMatch.fillBefore(d.content,!0,e.index(a));this.openFrontierNode(d.type,d.attrs,b)}return e}openFrontierNode(e,s=null,a){let d=this.frontier[this.depth];d.match=d.match.matchType(e),this.placed=addToFragment(this.placed,this.depth,Fragment.from(e.create(s,a))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let s=this.frontier.pop().match.fillBefore(Fragment.empty,!0);s.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,s))}}function dropFromFragment(o,e,s){return e==0?o.cutByIndex(s,o.childCount):o.replaceChild(0,o.firstChild.copy(dropFromFragment(o.firstChild.content,e-1,s)))}function addToFragment(o,e,s){return e==0?o.append(s):o.replaceChild(o.childCount-1,o.lastChild.copy(addToFragment(o.lastChild.content,e-1,s)))}function contentAt(o,e){for(let s=0;s<e;s++)o=o.firstChild.content;return o}function closeNodeStart(o,e,s){if(e<=0)return o;let a=o.content;return e>1&&(a=a.replaceChild(0,closeNodeStart(a.firstChild,e-1,a.childCount==1?s-1:0))),e>0&&(a=o.type.contentMatch.fillBefore(a).append(a),s<=0&&(a=a.append(o.type.contentMatch.matchFragment(a).fillBefore(Fragment.empty,!0)))),o.copy(a)}function contentAfterFits(o,e,s,a,d){let b=o.node(e),_=d?o.indexAfter(e):o.index(e);if(_==b.childCount&&!s.compatibleContent(b.type))return null;let _e=a.fillBefore(b.content,!0,_);return _e&&!invalidMarks(s,b.content,_)?_e:null}function invalidMarks(o,e,s){for(let a=s;a<e.childCount;a++)if(!o.allowsMarks(e.child(a).marks))return!0;return!1}function definesContent(o){return o.spec.defining||o.spec.definingForContent}function replaceRange(o,e,s,a){if(!a.size)return o.deleteRange(e,s);let d=o.doc.resolve(e),b=o.doc.resolve(s);if(fitsTrivially(d,b,a))return o.step(new ReplaceStep(e,s,a));let _=coveredDepths(d,o.doc.resolve(s));_[_.length-1]==0&&_.pop();let _e=-(d.depth+1);_.unshift(_e);for(let mt=d.depth,bt=d.pos-1;mt>0;mt--,bt--){let wt=d.node(mt).type.spec;if(wt.defining||wt.definingAsContext||wt.isolating)break;_.indexOf(mt)>-1?_e=mt:d.before(mt)==bt&&_.splice(1,0,-mt)}let ot=_.indexOf(_e),st=[],ct=a.openStart;for(let mt=a.content,bt=0;;bt++){let wt=mt.firstChild;if(st.push(wt),bt==a.openStart)break;mt=wt.content}for(let mt=ct-1;mt>=0;mt--){let bt=st[mt],wt=definesContent(bt.type);if(wt&&!bt.sameMarkup(d.node(Math.abs(_e)-1)))ct=mt;else if(wt||!bt.type.isTextblock)break}for(let mt=a.openStart;mt>=0;mt--){let bt=(mt+ct+1)%(a.openStart+1),wt=st[bt];if(wt)for(let Ct=0;Ct<_.length;Ct++){let Rt=_[(Ct+ot)%_.length],It=!0;Rt<0&&(It=!1,Rt=-Rt);let Pt=d.node(Rt-1),Tt=d.index(Rt-1);if(Pt.canReplaceWith(Tt,Tt,wt.type,wt.marks))return o.replace(d.before(Rt),It?b.after(Rt):s,new Slice(closeFragment(a.content,0,a.openStart,bt),bt,a.openEnd))}}let ft=o.steps.length;for(let mt=_.length-1;mt>=0&&(o.replace(e,s,a),!(o.steps.length>ft));mt--){let bt=_[mt];bt<0||(e=d.before(bt),s=b.after(bt))}}function closeFragment(o,e,s,a,d){if(e<s){let b=o.firstChild;o=o.replaceChild(0,b.copy(closeFragment(b.content,e+1,s,a,b)))}if(e>a){let b=d.contentMatchAt(0),_=b.fillBefore(o).append(o);o=_.append(b.matchFragment(_).fillBefore(Fragment.empty,!0))}return o}function replaceRangeWith(o,e,s,a){if(!a.isInline&&e==s&&o.doc.resolve(e).parent.content.size){let d=insertPoint(o.doc,e,a.type);d!=null&&(e=s=d)}o.replaceRange(e,s,new Slice(Fragment.from(a),0,0))}function deleteRange$1(o,e,s){let a=o.doc.resolve(e),d=o.doc.resolve(s),b=coveredDepths(a,d);for(let _=0;_<b.length;_++){let _e=b[_],ot=_==b.length-1;if(ot&&_e==0||a.node(_e).type.contentMatch.validEnd)return o.delete(a.start(_e),d.end(_e));if(_e>0&&(ot||a.node(_e-1).canReplace(a.index(_e-1),d.indexAfter(_e-1))))return o.delete(a.before(_e),d.after(_e))}for(let _=1;_<=a.depth&&_<=d.depth;_++)if(e-a.start(_)==a.depth-_&&s>a.end(_)&&d.end(_)-s!=d.depth-_&&a.start(_-1)==d.start(_-1)&&a.node(_-1).canReplace(a.index(_-1),d.index(_-1)))return o.delete(a.before(_),s);o.delete(e,s)}function coveredDepths(o,e){let s=[],a=Math.min(o.depth,e.depth);for(let d=a;d>=0;d--){let b=o.start(d);if(b<o.pos-(o.depth-d)||e.end(d)>e.pos+(e.depth-d)||o.node(d).type.spec.isolating||e.node(d).type.spec.isolating)break;(b==e.start(d)||d==o.depth&&d==e.depth&&o.parent.inlineContent&&e.parent.inlineContent&&d&&e.start(d-1)==b-1)&&s.push(d)}return s}class AttrStep extends Step{constructor(e,s,a){super(),this.pos=e,this.attr=s,this.value=a}apply(e){let s=e.nodeAt(this.pos);if(!s)return StepResult.fail("No node at attribute step's position");let a=Object.create(null);for(let b in s.attrs)a[b]=s.attrs[b];a[this.attr]=this.value;let d=s.type.create(a,null,s.marks);return StepResult.fromReplace(e,this.pos,this.pos+1,new Slice(Fragment.from(d),0,s.isLeaf?0:1))}getMap(){return StepMap.empty}invert(e){return new AttrStep(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new AttrStep(s.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,s){if(typeof s.pos!="number"||typeof s.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(s.pos,s.attr,s.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(e,s){super(),this.attr=e,this.value=s}apply(e){let s=Object.create(null);for(let d in e.attrs)s[d]=e.attrs[d];s[this.attr]=this.value;let a=e.type.create(s,e.content,e.marks);return StepResult.ok(a)}getMap(){return StepMap.empty}invert(e){return new DocAttrStep(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,s){if(typeof s.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(s.attr,s.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function o(e){let s=Error.call(this,e);return s.__proto__=o.prototype,s};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";class Transform{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let s=this.maybeStep(e);if(s.failed)throw new TransformError(s.failed);return this}maybeStep(e){let s=e.apply(this.doc);return s.failed||this.addStep(e,s.doc),s}get docChanged(){return this.steps.length>0}addStep(e,s){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=s}replace(e,s=e,a=Slice.empty){let d=replaceStep(this.doc,e,s,a);return d&&this.step(d),this}replaceWith(e,s,a){return this.replace(e,s,new Slice(Fragment.from(a),0,0))}delete(e,s){return this.replace(e,s,Slice.empty)}insert(e,s){return this.replaceWith(e,e,s)}replaceRange(e,s,a){return replaceRange(this,e,s,a),this}replaceRangeWith(e,s,a){return replaceRangeWith(this,e,s,a),this}deleteRange(e,s){return deleteRange$1(this,e,s),this}lift(e,s){return lift$2(this,e,s),this}join(e,s=1){return join(this,e,s),this}wrap(e,s){return wrap(this,e,s),this}setBlockType(e,s=e,a,d=null){return setBlockType$1(this,e,s,a,d),this}setNodeMarkup(e,s,a=null,d){return setNodeMarkup(this,e,s,a,d),this}setNodeAttribute(e,s,a){return this.step(new AttrStep(e,s,a)),this}setDocAttribute(e,s){return this.step(new DocAttrStep(e,s)),this}addNodeMark(e,s){return this.step(new AddNodeMarkStep(e,s)),this}removeNodeMark(e,s){if(!(s instanceof Mark$1)){let a=this.doc.nodeAt(e);if(!a)throw new RangeError("No node at position "+e);if(s=s.isInSet(a.marks),!s)return this}return this.step(new RemoveNodeMarkStep(e,s)),this}split(e,s=1,a){return split(this,e,s,a),this}addMark(e,s,a){return addMark(this,e,s,a),this}removeMark(e,s,a){return removeMark(this,e,s,a),this}clearIncompatible(e,s,a){return clearIncompatible(this,e,s,a),this}}const classesById=Object.create(null);class Selection{constructor(e,s,a){this.$anchor=e,this.$head=s,this.ranges=a||[new SelectionRange(e.min(s),e.max(s))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let s=0;s<e.length;s++)if(e[s].$from.pos!=e[s].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,s=Slice.empty){let a=s.content.lastChild,d=null;for(let _e=0;_e<s.openEnd;_e++)d=a,a=a.lastChild;let b=e.steps.length,_=this.ranges;for(let _e=0;_e<_.length;_e++){let{$from:ot,$to:st}=_[_e],ct=e.mapping.slice(b);e.replaceRange(ct.map(ot.pos),ct.map(st.pos),_e?Slice.empty:s),_e==0&&selectionToInsertionEnd$1(e,b,(a?a.isInline:d&&d.isTextblock)?-1:1)}}replaceWith(e,s){let a=e.steps.length,d=this.ranges;for(let b=0;b<d.length;b++){let{$from:_,$to:_e}=d[b],ot=e.mapping.slice(a),st=ot.map(_.pos),ct=ot.map(_e.pos);b?e.deleteRange(st,ct):(e.replaceRangeWith(st,ct,s),selectionToInsertionEnd$1(e,a,s.isInline?-1:1))}}static findFrom(e,s,a=!1){let d=e.parent.inlineContent?new TextSelection(e):findSelectionIn(e.node(0),e.parent,e.pos,e.index(),s,a);if(d)return d;for(let b=e.depth-1;b>=0;b--){let _=s<0?findSelectionIn(e.node(0),e.node(b),e.before(b+1),e.index(b),s,a):findSelectionIn(e.node(0),e.node(b),e.after(b+1),e.index(b)+1,s,a);if(_)return _}return null}static near(e,s=1){return this.findFrom(e,s)||this.findFrom(e,-s)||new AllSelection(e.node(0))}static atStart(e){return findSelectionIn(e,e,0,0,1)||new AllSelection(e)}static atEnd(e){return findSelectionIn(e,e,e.content.size,e.childCount,-1)||new AllSelection(e)}static fromJSON(e,s){if(!s||!s.type)throw new RangeError("Invalid input for Selection.fromJSON");let a=classesById[s.type];if(!a)throw new RangeError(`No selection type ${s.type} defined`);return a.fromJSON(e,s)}static jsonID(e,s){if(e in classesById)throw new RangeError("Duplicate use of selection JSON ID "+e);return classesById[e]=s,s.prototype.jsonID=e,s}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(e,s){this.$from=e,this.$to=s}}let warnedAboutTextSelection=!1;function checkTextSelection(o){!warnedAboutTextSelection&&!o.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+o.parent.type.name+")"))}class TextSelection extends Selection{constructor(e,s=e){checkTextSelection(e),checkTextSelection(s),super(e,s)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,s){let a=e.resolve(s.map(this.head));if(!a.parent.inlineContent)return Selection.near(a);let d=e.resolve(s.map(this.anchor));return new TextSelection(d.parent.inlineContent?d:a,a)}replace(e,s=Slice.empty){if(super.replace(e,s),s==Slice.empty){let a=this.$from.marksAcross(this.$to);a&&e.ensureMarks(a)}}eq(e){return e instanceof TextSelection&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,s){if(typeof s.anchor!="number"||typeof s.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(e.resolve(s.anchor),e.resolve(s.head))}static create(e,s,a=s){let d=e.resolve(s);return new this(d,a==s?d:e.resolve(a))}static between(e,s,a){let d=e.pos-s.pos;if((!a||d)&&(a=d>=0?1:-1),!s.parent.inlineContent){let b=Selection.findFrom(s,a,!0)||Selection.findFrom(s,-a,!0);if(b)s=b.$head;else return Selection.near(s,a)}return e.parent.inlineContent||(d==0?e=s:(e=(Selection.findFrom(e,-a,!0)||Selection.findFrom(e,a,!0)).$anchor,e.pos<s.pos!=d<0&&(e=s))),new TextSelection(e,s)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(e,s){this.anchor=e,this.head=s}map(e){return new TextBookmark(e.map(this.anchor),e.map(this.head))}resolve(e){return TextSelection.between(e.resolve(this.anchor),e.resolve(this.head))}}class NodeSelection extends Selection{constructor(e){let s=e.nodeAfter,a=e.node(0).resolve(e.pos+s.nodeSize);super(e,a),this.node=s}map(e,s){let{deleted:a,pos:d}=s.mapResult(this.anchor),b=e.resolve(d);return a?Selection.near(b):new NodeSelection(b)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(e){return e instanceof NodeSelection&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(e,s){if(typeof s.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(e.resolve(s.anchor))}static create(e,s){return new NodeSelection(e.resolve(s))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(e){this.anchor=e}map(e){let{deleted:s,pos:a}=e.mapResult(this.anchor);return s?new TextBookmark(a,a):new NodeBookmark(a)}resolve(e){let s=e.resolve(this.anchor),a=s.nodeAfter;return a&&NodeSelection.isSelectable(a)?new NodeSelection(s):Selection.near(s)}}class AllSelection extends Selection{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,s=Slice.empty){if(s==Slice.empty){e.delete(0,e.doc.content.size);let a=Selection.atStart(e.doc);a.eq(e.selection)||e.setSelection(a)}else super.replace(e,s)}toJSON(){return{type:"all"}}static fromJSON(e){return new AllSelection(e)}map(e){return new AllSelection(e)}eq(e){return e instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(o){return new AllSelection(o)}};function findSelectionIn(o,e,s,a,d,b=!1){if(e.inlineContent)return TextSelection.create(o,s);for(let _=a-(d>0?0:1);d>0?_<e.childCount:_>=0;_+=d){let _e=e.child(_);if(_e.isAtom){if(!b&&NodeSelection.isSelectable(_e))return NodeSelection.create(o,s-(d<0?_e.nodeSize:0))}else{let ot=findSelectionIn(o,_e,s+d,d<0?_e.childCount:0,d,b);if(ot)return ot}s+=_e.nodeSize*d}return null}function selectionToInsertionEnd$1(o,e,s){let a=o.steps.length-1;if(a<e)return;let d=o.steps[a];if(!(d instanceof ReplaceStep||d instanceof ReplaceAroundStep))return;let b=o.mapping.maps[a],_;b.forEach((_e,ot,st,ct)=>{_==null&&(_=ct)}),o.setSelection(Selection.near(o.doc.resolve(_),s))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=UPDATED_MARKS,this}ensureMarks(e){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(e,s){super.addStep(e,s),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,s=!0){let a=this.selection;return s&&(e=e.mark(this.storedMarks||(a.empty?a.$from.marks():a.$from.marksAcross(a.$to)||Mark$1.none))),a.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,s,a){let d=this.doc.type.schema;if(s==null)return e?this.replaceSelectionWith(d.text(e),!0):this.deleteSelection();{if(a==null&&(a=s),a=a??s,!e)return this.deleteRange(s,a);let b=this.storedMarks;if(!b){let _=this.doc.resolve(s);b=a==s?_.marks():_.marksAcross(this.doc.resolve(a))}return this.replaceRangeWith(s,a,d.text(e,b)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(e,s){return this.meta[typeof e=="string"?e:e.key]=s,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(o,e){return!e||!o?o:o.bind(e)}class FieldDesc{constructor(e,s,a){this.name=e,this.init=bind(s.init,a),this.apply=bind(s.apply,a)}}const baseFields=[new FieldDesc("doc",{init(o){return o.doc||o.schema.topNodeType.createAndFill()},apply(o){return o.doc}}),new FieldDesc("selection",{init(o,e){return o.selection||Selection.atStart(e.doc)},apply(o){return o.selection}}),new FieldDesc("storedMarks",{init(o){return o.storedMarks||null},apply(o,e,s,a){return a.selection.$cursor?o.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(o,e){return o.scrolledIntoView?e+1:e}})];class Configuration{constructor(e,s){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),s&&s.forEach(a=>{if(this.pluginsByKey[a.key])throw new RangeError("Adding different instances of a keyed plugin ("+a.key+")");this.plugins.push(a),this.pluginsByKey[a.key]=a,a.spec.state&&this.fields.push(new FieldDesc(a.key,a.spec.state,a))})}}class EditorState{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,s=-1){for(let a=0;a<this.config.plugins.length;a++)if(a!=s){let d=this.config.plugins[a];if(d.spec.filterTransaction&&!d.spec.filterTransaction.call(d,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let s=[e],a=this.applyInner(e),d=null;for(;;){let b=!1;for(let _=0;_<this.config.plugins.length;_++){let _e=this.config.plugins[_];if(_e.spec.appendTransaction){let ot=d?d[_].n:0,st=d?d[_].state:this,ct=ot<s.length&&_e.spec.appendTransaction.call(_e,ot?s.slice(ot):s,st,a);if(ct&&a.filterTransaction(ct,_)){if(ct.setMeta("appendedTransaction",e),!d){d=[];for(let ft=0;ft<this.config.plugins.length;ft++)d.push(ft<_?{state:a,n:s.length}:{state:this,n:0})}s.push(ct),a=a.applyInner(ct),b=!0}d&&(d[_]={state:a,n:s.length})}}if(!b)return{state:a,transactions:s}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let s=new EditorState(this.config),a=this.config.fields;for(let d=0;d<a.length;d++){let b=a[d];s[b.name]=b.apply(e,this[b.name],this,s)}return s}get tr(){return new Transaction(this)}static create(e){let s=new Configuration(e.doc?e.doc.type.schema:e.schema,e.plugins),a=new EditorState(s);for(let d=0;d<s.fields.length;d++)a[s.fields[d].name]=s.fields[d].init(e,a);return a}reconfigure(e){let s=new Configuration(this.schema,e.plugins),a=s.fields,d=new EditorState(s);for(let b=0;b<a.length;b++){let _=a[b].name;d[_]=this.hasOwnProperty(_)?this[_]:a[b].init(e,d)}return d}toJSON(e){let s={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(s.storedMarks=this.storedMarks.map(a=>a.toJSON())),e&&typeof e=="object")for(let a in e){if(a=="doc"||a=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let d=e[a],b=d.spec.state;b&&b.toJSON&&(s[a]=b.toJSON.call(d,this[d.key]))}return s}static fromJSON(e,s,a){if(!s)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let d=new Configuration(e.schema,e.plugins),b=new EditorState(d);return d.fields.forEach(_=>{if(_.name=="doc")b.doc=Node$2.fromJSON(e.schema,s.doc);else if(_.name=="selection")b.selection=Selection.fromJSON(b.doc,s.selection);else if(_.name=="storedMarks")s.storedMarks&&(b.storedMarks=s.storedMarks.map(e.schema.markFromJSON));else{if(a)for(let _e in a){let ot=a[_e],st=ot.spec.state;if(ot.key==_.name&&st&&st.fromJSON&&Object.prototype.hasOwnProperty.call(s,_e)){b[_.name]=st.fromJSON.call(ot,e,s[_e],b);return}}b[_.name]=_.init(e,b)}}),b}}function bindProps(o,e,s){for(let a in o){let d=o[a];d instanceof Function?d=d.bind(e):a=="handleDOMEvents"&&(d=bindProps(d,e,{})),s[a]=d}return s}class Plugin{constructor(e){this.spec=e,this.props={},e.props&&bindProps(e.props,this,this.props),this.key=e.key?e.key.key:createKey("plugin")}getState(e){return e[this.key]}}const keys=Object.create(null);function createKey(o){return o in keys?o+"$"+ ++keys[o]:(keys[o]=0,o+"$")}class PluginKey{constructor(e="key"){this.key=createKey(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const domIndex=function(o){for(var e=0;;e++)if(o=o.previousSibling,!o)return e},parentNode=function(o){let e=o.assignedSlot||o.parentNode;return e&&e.nodeType==11?e.host:e};let reusedRange=null;const textRange=function(o,e,s){let a=reusedRange||(reusedRange=document.createRange());return a.setEnd(o,s??o.nodeValue.length),a.setStart(o,e||0),a},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(o,e,s,a){return s&&(scanFor(o,e,s,a,-1)||scanFor(o,e,s,a,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(o,e,s,a,d){for(;;){if(o==s&&e==a)return!0;if(e==(d<0?0:nodeSize(o))){let b=o.parentNode;if(!b||b.nodeType!=1||hasBlockDesc(o)||atomElements.test(o.nodeName)||o.contentEditable=="false")return!1;e=domIndex(o)+(d<0?0:1),o=b}else if(o.nodeType==1){if(o=o.childNodes[e+(d<0?-1:0)],o.contentEditable=="false")return!1;e=d<0?nodeSize(o):0}else return!1}}function nodeSize(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function textNodeBefore$1(o,e){for(;;){if(o.nodeType==3&&e)return o;if(o.nodeType==1&&e>0){if(o.contentEditable=="false")return null;o=o.childNodes[e-1],e=nodeSize(o)}else if(o.parentNode&&!hasBlockDesc(o))e=domIndex(o),o=o.parentNode;else return null}}function textNodeAfter$1(o,e){for(;;){if(o.nodeType==3&&e<o.nodeValue.length)return o;if(o.nodeType==1&&e<o.childNodes.length){if(o.contentEditable=="false")return null;o=o.childNodes[e],e=0}else if(o.parentNode&&!hasBlockDesc(o))e=domIndex(o)+1,o=o.parentNode;else return null}}function isOnEdge(o,e,s){for(let a=e==0,d=e==nodeSize(o);a||d;){if(o==s)return!0;let b=domIndex(o);if(o=o.parentNode,!o)return!1;a=a&&b==0,d=d&&b==nodeSize(o)}}function hasBlockDesc(o){let e;for(let s=o;s&&!(e=s.pmViewDesc);s=s.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==o||e.contentDOM==o)}const selectionCollapsed=function(o){return o.focusNode&&isEquivalentPosition(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)};function keyEvent(o,e){let s=document.createEvent("Event");return s.initEvent("keydown",!0,!0),s.keyCode=o,s.key=s.code=e,s}function deepActiveElement(o){let e=o.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function caretFromPoint(o,e,s){if(o.caretPositionFromPoint)try{let a=o.caretPositionFromPoint(e,s);if(a)return{node:a.offsetNode,offset:Math.min(nodeSize(a.offsetNode),a.offset)}}catch{}if(o.caretRangeFromPoint){let a=o.caretRangeFromPoint(e,s);if(a)return{node:a.startContainer,offset:Math.min(nodeSize(a.startContainer),a.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$1=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$1&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$1&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$1&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(o){let e=o.defaultView&&o.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:o.documentElement.clientWidth,top:0,bottom:o.documentElement.clientHeight}}function getSide(o,e){return typeof o=="number"?o:o[e]}function clientRect(o){let e=o.getBoundingClientRect(),s=e.width/o.offsetWidth||1,a=e.height/o.offsetHeight||1;return{left:e.left,right:e.left+o.clientWidth*s,top:e.top,bottom:e.top+o.clientHeight*a}}function scrollRectIntoView(o,e,s){let a=o.someProp("scrollThreshold")||0,d=o.someProp("scrollMargin")||5,b=o.dom.ownerDocument;for(let _=s||o.dom;_;_=parentNode(_)){if(_.nodeType!=1)continue;let _e=_,ot=_e==b.body,st=ot?windowRect(b):clientRect(_e),ct=0,ft=0;if(e.top<st.top+getSide(a,"top")?ft=-(st.top-e.top+getSide(d,"top")):e.bottom>st.bottom-getSide(a,"bottom")&&(ft=e.bottom-e.top>st.bottom-st.top?e.top+getSide(d,"top")-st.top:e.bottom-st.bottom+getSide(d,"bottom")),e.left<st.left+getSide(a,"left")?ct=-(st.left-e.left+getSide(d,"left")):e.right>st.right-getSide(a,"right")&&(ct=e.right-st.right+getSide(d,"right")),ct||ft)if(ot)b.defaultView.scrollBy(ct,ft);else{let mt=_e.scrollLeft,bt=_e.scrollTop;ft&&(_e.scrollTop+=ft),ct&&(_e.scrollLeft+=ct);let wt=_e.scrollLeft-mt,Ct=_e.scrollTop-bt;e={left:e.left-wt,top:e.top-Ct,right:e.right-wt,bottom:e.bottom-Ct}}if(ot||/^(fixed|sticky)$/.test(getComputedStyle(_).position))break}}function storeScrollPos(o){let e=o.dom.getBoundingClientRect(),s=Math.max(0,e.top),a,d;for(let b=(e.left+e.right)/2,_=s+1;_<Math.min(innerHeight,e.bottom);_+=5){let _e=o.root.elementFromPoint(b,_);if(!_e||_e==o.dom||!o.dom.contains(_e))continue;let ot=_e.getBoundingClientRect();if(ot.top>=s-20){a=_e,d=ot.top;break}}return{refDOM:a,refTop:d,stack:scrollStack(o.dom)}}function scrollStack(o){let e=[],s=o.ownerDocument;for(let a=o;a&&(e.push({dom:a,top:a.scrollTop,left:a.scrollLeft}),o!=s);a=parentNode(a));return e}function resetScrollPos({refDOM:o,refTop:e,stack:s}){let a=o?o.getBoundingClientRect().top:0;restoreScrollStack(s,a==0?0:a-e)}function restoreScrollStack(o,e){for(let s=0;s<o.length;s++){let{dom:a,top:d,left:b}=o[s];a.scrollTop!=d+e&&(a.scrollTop=d+e),a.scrollLeft!=b&&(a.scrollLeft=b)}}let preventScrollSupported=null;function focusPreventScroll(o){if(o.setActive)return o.setActive();if(preventScrollSupported)return o.focus(preventScrollSupported);let e=scrollStack(o);o.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(e,0))}function findOffsetInNode(o,e){let s,a=2e8,d,b=0,_=e.top,_e=e.top,ot,st;for(let ct=o.firstChild,ft=0;ct;ct=ct.nextSibling,ft++){let mt;if(ct.nodeType==1)mt=ct.getClientRects();else if(ct.nodeType==3)mt=textRange(ct).getClientRects();else continue;for(let bt=0;bt<mt.length;bt++){let wt=mt[bt];if(wt.top<=_&&wt.bottom>=_e){_=Math.max(wt.bottom,_),_e=Math.min(wt.top,_e);let Ct=wt.left>e.left?wt.left-e.left:wt.right<e.left?e.left-wt.right:0;if(Ct<a){s=ct,a=Ct,d=Ct&&s.nodeType==3?{left:wt.right<e.left?wt.right:wt.left,top:e.top}:e,ct.nodeType==1&&Ct&&(b=ft+(e.left>=(wt.left+wt.right)/2?1:0));continue}}else wt.top>e.top&&!ot&&wt.left<=e.left&&wt.right>=e.left&&(ot=ct,st={left:Math.max(wt.left,Math.min(wt.right,e.left)),top:wt.top});!s&&(e.left>=wt.right&&e.top>=wt.top||e.left>=wt.left&&e.top>=wt.bottom)&&(b=ft+1)}}return!s&&ot&&(s=ot,d=st,a=0),s&&s.nodeType==3?findOffsetInText(s,d):!s||a&&s.nodeType==1?{node:o,offset:b}:findOffsetInNode(s,d)}function findOffsetInText(o,e){let s=o.nodeValue.length,a=document.createRange();for(let d=0;d<s;d++){a.setEnd(o,d+1),a.setStart(o,d);let b=singleRect(a,1);if(b.top!=b.bottom&&inRect(e,b))return{node:o,offset:d+(e.left>=(b.left+b.right)/2?1:0)}}return{node:o,offset:0}}function inRect(o,e){return o.left>=e.left-1&&o.left<=e.right+1&&o.top>=e.top-1&&o.top<=e.bottom+1}function targetKludge(o,e){let s=o.parentNode;return s&&/^li$/i.test(s.nodeName)&&e.left<o.getBoundingClientRect().left?s:o}function posFromElement(o,e,s){let{node:a,offset:d}=findOffsetInNode(e,s),b=-1;if(a.nodeType==1&&!a.firstChild){let _=a.getBoundingClientRect();b=_.left!=_.right&&s.left>(_.left+_.right)/2?1:-1}return o.docView.posFromDOM(a,d,b)}function posFromCaret(o,e,s,a){let d=-1;for(let b=e,_=!1;b!=o.dom;){let _e=o.docView.nearestDesc(b,!0);if(!_e)return null;if(_e.dom.nodeType==1&&(_e.node.isBlock&&_e.parent||!_e.contentDOM)){let ot=_e.dom.getBoundingClientRect();if(_e.node.isBlock&&_e.parent&&(!_&&ot.left>a.left||ot.top>a.top?d=_e.posBefore:(!_&&ot.right<a.left||ot.bottom<a.top)&&(d=_e.posAfter),_=!0),!_e.contentDOM&&d<0&&!_e.node.isText)return(_e.node.isBlock?a.top<(ot.top+ot.bottom)/2:a.left<(ot.left+ot.right)/2)?_e.posBefore:_e.posAfter}b=_e.dom.parentNode}return d>-1?d:o.docView.posFromDOM(e,s,-1)}function elementFromPoint(o,e,s){let a=o.childNodes.length;if(a&&s.top<s.bottom)for(let d=Math.max(0,Math.min(a-1,Math.floor(a*(e.top-s.top)/(s.bottom-s.top))-2)),b=d;;){let _=o.childNodes[b];if(_.nodeType==1){let _e=_.getClientRects();for(let ot=0;ot<_e.length;ot++){let st=_e[ot];if(inRect(e,st))return elementFromPoint(_,e,st)}}if((b=(b+1)%a)==d)break}return o}function posAtCoords(o,e){let s=o.dom.ownerDocument,a,d=0,b=caretFromPoint(s,e.left,e.top);b&&({node:a,offset:d}=b);let _=(o.root.elementFromPoint?o.root:s).elementFromPoint(e.left,e.top),_e;if(!_||!o.dom.contains(_.nodeType!=1?_.parentNode:_)){let st=o.dom.getBoundingClientRect();if(!inRect(e,st)||(_=elementFromPoint(o.dom,e,st),!_))return null}if(safari)for(let st=_;a&&st;st=parentNode(st))st.draggable&&(a=void 0);if(_=targetKludge(_,e),a){if(gecko&&a.nodeType==1&&(d=Math.min(d,a.childNodes.length),d<a.childNodes.length)){let ct=a.childNodes[d],ft;ct.nodeName=="IMG"&&(ft=ct.getBoundingClientRect()).right<=e.left&&ft.bottom>e.top&&d++}let st;webkit&&d&&a.nodeType==1&&(st=a.childNodes[d-1]).nodeType==1&&st.contentEditable=="false"&&st.getBoundingClientRect().top>=e.top&&d--,a==o.dom&&d==a.childNodes.length-1&&a.lastChild.nodeType==1&&e.top>a.lastChild.getBoundingClientRect().bottom?_e=o.state.doc.content.size:(d==0||a.nodeType!=1||a.childNodes[d-1].nodeName!="BR")&&(_e=posFromCaret(o,a,d,e))}_e==null&&(_e=posFromElement(o,_,e));let ot=o.docView.nearestDesc(_,!0);return{pos:_e,inside:ot?ot.posAtStart-ot.border:-1}}function nonZero(o){return o.top<o.bottom||o.left<o.right}function singleRect(o,e){let s=o.getClientRects();if(s.length){let a=s[e<0?0:s.length-1];if(nonZero(a))return a}return Array.prototype.find.call(s,nonZero)||o.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(o,e,s){let{node:a,offset:d,atom:b}=o.docView.domFromPos(e,s<0?-1:1),_=webkit||gecko;if(a.nodeType==3)if(_&&(BIDI.test(a.nodeValue)||(s<0?!d:d==a.nodeValue.length))){let ot=singleRect(textRange(a,d,d),s);if(gecko&&d&&/\s/.test(a.nodeValue[d-1])&&d<a.nodeValue.length){let st=singleRect(textRange(a,d-1,d-1),-1);if(st.top==ot.top){let ct=singleRect(textRange(a,d,d+1),-1);if(ct.top!=ot.top)return flattenV(ct,ct.left<st.left)}}return ot}else{let ot=d,st=d,ct=s<0?1:-1;return s<0&&!d?(st++,ct=-1):s>=0&&d==a.nodeValue.length?(ot--,ct=1):s<0?ot--:st++,flattenV(singleRect(textRange(a,ot,st),ct),ct<0)}if(!o.state.doc.resolve(e-(b||0)).parent.inlineContent){if(b==null&&d&&(s<0||d==nodeSize(a))){let ot=a.childNodes[d-1];if(ot.nodeType==1)return flattenH(ot.getBoundingClientRect(),!1)}if(b==null&&d<nodeSize(a)){let ot=a.childNodes[d];if(ot.nodeType==1)return flattenH(ot.getBoundingClientRect(),!0)}return flattenH(a.getBoundingClientRect(),s>=0)}if(b==null&&d&&(s<0||d==nodeSize(a))){let ot=a.childNodes[d-1],st=ot.nodeType==3?textRange(ot,nodeSize(ot)-(_?0:1)):ot.nodeType==1&&(ot.nodeName!="BR"||!ot.nextSibling)?ot:null;if(st)return flattenV(singleRect(st,1),!1)}if(b==null&&d<nodeSize(a)){let ot=a.childNodes[d];for(;ot.pmViewDesc&&ot.pmViewDesc.ignoreForCoords;)ot=ot.nextSibling;let st=ot?ot.nodeType==3?textRange(ot,0,_?0:1):ot.nodeType==1?ot:null:null;if(st)return flattenV(singleRect(st,-1),!0)}return flattenV(singleRect(a.nodeType==3?textRange(a):a,-s),s>=0)}function flattenV(o,e){if(o.width==0)return o;let s=e?o.left:o.right;return{top:o.top,bottom:o.bottom,left:s,right:s}}function flattenH(o,e){if(o.height==0)return o;let s=e?o.top:o.bottom;return{top:s,bottom:s,left:o.left,right:o.right}}function withFlushedState(o,e,s){let a=o.state,d=o.root.activeElement;a!=e&&o.updateState(e),d!=o.dom&&o.focus();try{return s()}finally{a!=e&&o.updateState(a),d!=o.dom&&d&&d.focus()}}function endOfTextblockVertical(o,e,s){let a=e.selection,d=s=="up"?a.$from:a.$to;return withFlushedState(o,e,()=>{let{node:b}=o.docView.domFromPos(d.pos,s=="up"?-1:1);for(;;){let _e=o.docView.nearestDesc(b,!0);if(!_e)break;if(_e.node.isBlock){b=_e.contentDOM||_e.dom;break}b=_e.dom.parentNode}let _=coordsAtPos(o,d.pos,1);for(let _e=b.firstChild;_e;_e=_e.nextSibling){let ot;if(_e.nodeType==1)ot=_e.getClientRects();else if(_e.nodeType==3)ot=textRange(_e,0,_e.nodeValue.length).getClientRects();else continue;for(let st=0;st<ot.length;st++){let ct=ot[st];if(ct.bottom>ct.top+1&&(s=="up"?_.top-ct.top>(ct.bottom-_.top)*2:ct.bottom-_.bottom>(_.bottom-ct.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(o,e,s){let{$head:a}=e.selection;if(!a.parent.isTextblock)return!1;let d=a.parentOffset,b=!d,_=d==a.parent.content.size,_e=o.domSelection();return _e?!maybeRTL.test(a.parent.textContent)||!_e.modify?s=="left"||s=="backward"?b:_:withFlushedState(o,e,()=>{let{focusNode:ot,focusOffset:st,anchorNode:ct,anchorOffset:ft}=o.domSelectionRange(),mt=_e.caretBidiLevel;_e.modify("move",s,"character");let bt=a.depth?o.docView.domAfterPos(a.before()):o.dom,{focusNode:wt,focusOffset:Ct}=o.domSelectionRange(),Rt=wt&&!bt.contains(wt.nodeType==1?wt:wt.parentNode)||ot==wt&&st==Ct;try{_e.collapse(ct,ft),ot&&(ot!=ct||st!=ft)&&_e.extend&&_e.extend(ot,st)}catch{}return mt!=null&&(_e.caretBidiLevel=mt),Rt}):a.pos==a.start()||a.pos==a.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(o,e,s){return cachedState==e&&cachedDir==s?cachedResult:(cachedState=e,cachedDir=s,cachedResult=s=="up"||s=="down"?endOfTextblockVertical(o,e,s):endOfTextblockHorizontal(o,e,s))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(e,s,a,d){this.parent=e,this.children=s,this.dom=a,this.contentDOM=d,this.dirty=NOT_DIRTY,a.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,s,a){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let s=0;s<this.children.length;s++)e+=this.children[s].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let s=0,a=this.posAtStart;;s++){let d=this.children[s];if(d==e)return a;a+=d.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,s,a){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(a<0){let b,_;if(e==this.contentDOM)b=e.childNodes[s-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;b=e.previousSibling}for(;b&&!((_=b.pmViewDesc)&&_.parent==this);)b=b.previousSibling;return b?this.posBeforeChild(_)+_.size:this.posAtStart}else{let b,_;if(e==this.contentDOM)b=e.childNodes[s];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;b=e.nextSibling}for(;b&&!((_=b.pmViewDesc)&&_.parent==this);)b=b.nextSibling;return b?this.posBeforeChild(_):this.posAtEnd}let d;if(e==this.dom&&this.contentDOM)d=s>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))d=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(s==0)for(let b=e;;b=b.parentNode){if(b==this.dom){d=!1;break}if(b.previousSibling)break}if(d==null&&s==e.childNodes.length)for(let b=e;;b=b.parentNode){if(b==this.dom){d=!0;break}if(b.nextSibling)break}}return d??a>0?this.posAtEnd:this.posAtStart}nearestDesc(e,s=!1){for(let a=!0,d=e;d;d=d.parentNode){let b=this.getDesc(d),_;if(b&&(!s||b.node))if(a&&(_=b.nodeDOM)&&!(_.nodeType==1?_.contains(e.nodeType==1?e:e.parentNode):_==e))a=!1;else return b}}getDesc(e){let s=e.pmViewDesc;for(let a=s;a;a=a.parent)if(a==this)return s}posFromDOM(e,s,a){for(let d=e;d;d=d.parentNode){let b=this.getDesc(d);if(b)return b.localPosFromDOM(e,s,a)}return-1}descAt(e){for(let s=0,a=0;s<this.children.length;s++){let d=this.children[s],b=a+d.size;if(a==e&&b!=a){for(;!d.border&&d.children.length;)d=d.children[0];return d}if(e<b)return d.descAt(e-a-d.border);a=b}}domFromPos(e,s){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let a=0,d=0;for(let b=0;a<this.children.length;a++){let _=this.children[a],_e=b+_.size;if(_e>e||_ instanceof TrailingHackViewDesc){d=e-b;break}b=_e}if(d)return this.children[a].domFromPos(d-this.children[a].border,s);for(let b;a&&!(b=this.children[a-1]).size&&b instanceof WidgetViewDesc&&b.side>=0;a--);if(s<=0){let b,_=!0;for(;b=a?this.children[a-1]:null,!(!b||b.dom.parentNode==this.contentDOM);a--,_=!1);return b&&s&&_&&!b.border&&!b.domAtom?b.domFromPos(b.size,s):{node:this.contentDOM,offset:b?domIndex(b.dom)+1:0}}else{let b,_=!0;for(;b=a<this.children.length?this.children[a]:null,!(!b||b.dom.parentNode==this.contentDOM);a++,_=!1);return b&&_&&!b.border&&!b.domAtom?b.domFromPos(0,s):{node:this.contentDOM,offset:b?domIndex(b.dom):this.contentDOM.childNodes.length}}}parseRange(e,s,a=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:s,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let d=-1,b=-1;for(let _=a,_e=0;;_e++){let ot=this.children[_e],st=_+ot.size;if(d==-1&&e<=st){let ct=_+ot.border;if(e>=ct&&s<=st-ot.border&&ot.node&&ot.contentDOM&&this.contentDOM.contains(ot.contentDOM))return ot.parseRange(e,s,ct);e=_;for(let ft=_e;ft>0;ft--){let mt=this.children[ft-1];if(mt.size&&mt.dom.parentNode==this.contentDOM&&!mt.emptyChildAt(1)){d=domIndex(mt.dom)+1;break}e-=mt.size}d==-1&&(d=0)}if(d>-1&&(st>s||_e==this.children.length-1)){s=st;for(let ct=_e+1;ct<this.children.length;ct++){let ft=this.children[ct];if(ft.size&&ft.dom.parentNode==this.contentDOM&&!ft.emptyChildAt(-1)){b=domIndex(ft.dom);break}s+=ft.size}b==-1&&(b=this.contentDOM.childNodes.length);break}_=st}return{node:this.contentDOM,from:e,to:s,fromOffset:d,toOffset:b}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let s=this.children[e<0?0:this.children.length-1];return s.size==0||s.emptyChildAt(e)}domAfterPos(e){let{node:s,offset:a}=this.domFromPos(e,0);if(s.nodeType!=1||a==s.childNodes.length)throw new RangeError("No node after pos "+e);return s.childNodes[a]}setSelection(e,s,a,d=!1){let b=Math.min(e,s),_=Math.max(e,s);for(let mt=0,bt=0;mt<this.children.length;mt++){let wt=this.children[mt],Ct=bt+wt.size;if(b>bt&&_<Ct)return wt.setSelection(e-bt-wt.border,s-bt-wt.border,a,d);bt=Ct}let _e=this.domFromPos(e,e?-1:1),ot=s==e?_e:this.domFromPos(s,s?-1:1),st=a.getSelection(),ct=!1;if((gecko||safari)&&e==s){let{node:mt,offset:bt}=_e;if(mt.nodeType==3){if(ct=!!(bt&&mt.nodeValue[bt-1]==`
`),ct&&bt==mt.nodeValue.length)for(let wt=mt,Ct;wt;wt=wt.parentNode){if(Ct=wt.nextSibling){Ct.nodeName=="BR"&&(_e=ot={node:Ct.parentNode,offset:domIndex(Ct)+1});break}let Rt=wt.pmViewDesc;if(Rt&&Rt.node&&Rt.node.isBlock)break}}else{let wt=mt.childNodes[bt-1];ct=wt&&(wt.nodeName=="BR"||wt.contentEditable=="false")}}if(gecko&&st.focusNode&&st.focusNode!=ot.node&&st.focusNode.nodeType==1){let mt=st.focusNode.childNodes[st.focusOffset];mt&&mt.contentEditable=="false"&&(d=!0)}if(!(d||ct&&safari)&&isEquivalentPosition(_e.node,_e.offset,st.anchorNode,st.anchorOffset)&&isEquivalentPosition(ot.node,ot.offset,st.focusNode,st.focusOffset))return;let ft=!1;if((st.extend||e==s)&&!ct){st.collapse(_e.node,_e.offset);try{e!=s&&st.extend(ot.node,ot.offset),ft=!0}catch{}}if(!ft){if(e>s){let bt=_e;_e=ot,ot=bt}let mt=document.createRange();mt.setEnd(ot.node,ot.offset),mt.setStart(_e.node,_e.offset),st.removeAllRanges(),st.addRange(mt)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,s){for(let a=0,d=0;d<this.children.length;d++){let b=this.children[d],_=a+b.size;if(a==_?e<=_&&s>=a:e<_&&s>a){let _e=a+b.border,ot=_-b.border;if(e>=_e&&s<=ot){this.dirty=e==a||s==_?CONTENT_DIRTY:CHILD_DIRTY,e==_e&&s==ot&&(b.contentLost||b.dom.parentNode!=this.contentDOM)?b.dirty=NODE_DIRTY:b.markDirty(e-_e,s-_e);return}else b.dirty=b.dom==b.contentDOM&&b.dom.parentNode==this.contentDOM&&!b.children.length?CONTENT_DIRTY:NODE_DIRTY}a=_}this.dirty=CONTENT_DIRTY}markParentsDirty(){let e=1;for(let s=this.parent;s;s=s.parent,e++){let a=e==1?CONTENT_DIRTY:CHILD_DIRTY;s.dirty<a&&(s.dirty=a)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class WidgetViewDesc extends ViewDesc{constructor(e,s,a,d){let b,_=s.type.toDOM;if(typeof _=="function"&&(_=_(a,()=>{if(!b)return d;if(b.parent)return b.parent.posBeforeChild(b)})),!s.type.spec.raw){if(_.nodeType!=1){let _e=document.createElement("span");_e.appendChild(_),_=_e}_.contentEditable="false",_.classList.add("ProseMirror-widget")}super(e,[],_,null),this.widget=s,this.widget=s,b=this}matchesWidget(e){return this.dirty==NOT_DIRTY&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let s=this.widget.spec.stopEvent;return s?s(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(e,s,a,d){super(e,[],s,null),this.textDOM=a,this.text=d}get size(){return this.text.length}localPosFromDOM(e,s){return e!=this.textDOM?this.posAtStart+(s?this.size:0):this.posAtStart+s}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class MarkViewDesc extends ViewDesc{constructor(e,s,a,d,b){super(e,[],a,d),this.mark=s,this.spec=b}static create(e,s,a,d){let b=d.nodeViews[s.type.name],_=b&&b(s,d,a);return(!_||!_.dom)&&(_=DOMSerializer.renderSpec(document,s.type.spec.toDOM(s,a),null,s.attrs)),new MarkViewDesc(e,s,_.dom,_.contentDOM||_.dom,_)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=NODE_DIRTY&&this.mark.eq(e)}markDirty(e,s){if(super.markDirty(e,s),this.dirty!=NOT_DIRTY){let a=this.parent;for(;!a.node;)a=a.parent;a.dirty<this.dirty&&(a.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(e,s,a){let d=MarkViewDesc.create(this.parent,this.mark,!0,a),b=this.children,_=this.size;s<_&&(b=replaceNodes(b,s,_,a)),e>0&&(b=replaceNodes(b,0,e,a));for(let _e=0;_e<b.length;_e++)b[_e].parent=d;return d.children=b,d}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(e,s,a,d,b,_,_e,ot,st){super(e,[],b,_),this.node=s,this.outerDeco=a,this.innerDeco=d,this.nodeDOM=_e}static create(e,s,a,d,b,_){let _e=b.nodeViews[s.type.name],ot,st=_e&&_e(s,b,()=>{if(!ot)return _;if(ot.parent)return ot.parent.posBeforeChild(ot)},a,d),ct=st&&st.dom,ft=st&&st.contentDOM;if(s.isText){if(!ct)ct=document.createTextNode(s.text);else if(ct.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else ct||({dom:ct,contentDOM:ft}=DOMSerializer.renderSpec(document,s.type.spec.toDOM(s),null,s.attrs));!ft&&!s.isText&&ct.nodeName!="BR"&&(ct.hasAttribute("contenteditable")||(ct.contentEditable="false"),s.type.spec.draggable&&(ct.draggable=!0));let mt=ct;return ct=applyOuterDeco(ct,a,s),st?ot=new CustomNodeViewDesc(e,s,a,d,ct,ft||null,mt,st,b,_+1):s.isText?new TextViewDesc(e,s,a,d,ct,mt,b):new NodeViewDesc(e,s,a,d,ct,ft||null,mt,b,_+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let s=this.children.length-1;s>=0;s--){let a=this.children[s];if(this.dom.contains(a.dom.parentNode)){e.contentElement=a.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Fragment.empty)}return e}matchesNode(e,s,a){return this.dirty==NOT_DIRTY&&e.eq(this.node)&&sameOuterDeco(s,this.outerDeco)&&a.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,s){let a=this.node.inlineContent,d=s,b=e.composing?this.localCompositionInfo(e,s):null,_=b&&b.pos>-1?b:null,_e=b&&b.pos<0,ot=new ViewTreeUpdater(this,_&&_.node,e);iterDeco(this.node,this.innerDeco,(st,ct,ft)=>{st.spec.marks?ot.syncToMarks(st.spec.marks,a,e):st.type.side>=0&&!ft&&ot.syncToMarks(ct==this.node.childCount?Mark$1.none:this.node.child(ct).marks,a,e),ot.placeWidget(st,e,d)},(st,ct,ft,mt)=>{ot.syncToMarks(st.marks,a,e);let bt;ot.findNodeMatch(st,ct,ft,mt)||_e&&e.state.selection.from>d&&e.state.selection.to<d+st.nodeSize&&(bt=ot.findIndexWithChild(b.node))>-1&&ot.updateNodeAt(st,ct,ft,bt,e)||ot.updateNextNode(st,ct,ft,e,mt,d)||ot.addNode(st,ct,ft,e,d),d+=st.nodeSize}),ot.syncToMarks([],a,e),this.node.isTextblock&&ot.addTextblockHacks(),ot.destroyRest(),(ot.changed||this.dirty==CONTENT_DIRTY)&&(_&&this.protectLocalComposition(e,_),renderDescs(this.contentDOM,this.children,e),ios&&iosHacks(this.dom))}localCompositionInfo(e,s){let{from:a,to:d}=e.state.selection;if(!(e.state.selection instanceof TextSelection)||a<s||d>s+this.node.content.size)return null;let b=e.input.compositionNode;if(!b||!this.dom.contains(b.parentNode))return null;if(this.node.inlineContent){let _=b.nodeValue,_e=findTextInFragment(this.node.content,_,a-s,d-s);return _e<0?null:{node:b,pos:_e,text:_}}else return{node:b,pos:-1,text:""}}protectLocalComposition(e,{node:s,pos:a,text:d}){if(this.getDesc(s))return;let b=s;for(;b.parentNode!=this.contentDOM;b=b.parentNode){for(;b.previousSibling;)b.parentNode.removeChild(b.previousSibling);for(;b.nextSibling;)b.parentNode.removeChild(b.nextSibling);b.pmViewDesc&&(b.pmViewDesc=void 0)}let _=new CompositionViewDesc(this,b,s,d);e.input.compositionNodes.push(_),this.children=replaceNodes(this.children,a,a+d.length,e,_)}update(e,s,a,d){return this.dirty==NODE_DIRTY||!e.sameMarkup(this.node)?!1:(this.updateInner(e,s,a,d),!0)}updateInner(e,s,a,d){this.updateOuterDeco(s),this.node=e,this.innerDeco=a,this.contentDOM&&this.updateChildren(d,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(e){if(sameOuterDeco(e,this.outerDeco))return;let s=this.nodeDOM.nodeType!=1,a=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,s),computeOuterDeco(e,this.node,s)),this.dom!=a&&(a.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(o,e,s,a,d){applyOuterDeco(a,e,o);let b=new NodeViewDesc(void 0,o,e,s,a,a,a,d,0);return b.contentDOM&&b.updateChildren(d,0),b}class TextViewDesc extends NodeViewDesc{constructor(e,s,a,d,b,_,_e){super(e,s,a,d,b,null,_,_e,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,s,a,d){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(s),(this.dirty!=NOT_DIRTY||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,d.trackWrites==this.nodeDOM&&(d.trackWrites=null)),this.node=e,this.dirty=NOT_DIRTY,!0)}inParent(){let e=this.parent.contentDOM;for(let s=this.nodeDOM;s;s=s.parentNode)if(s==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,s,a){return e==this.nodeDOM?this.posAtStart+Math.min(s,this.node.text.length):super.localPosFromDOM(e,s,a)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,s,a){let d=this.node.cut(e,s),b=document.createTextNode(d.text);return new TextViewDesc(this.parent,d,this.outerDeco,this.innerDeco,b,b,a)}markDirty(e,s){super.markDirty(e,s),this.dom!=this.nodeDOM&&(e==0||s==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(e){return this.node.text==e}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==NOT_DIRTY&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(e,s,a,d,b,_,_e,ot,st,ct){super(e,s,a,d,b,_,_e,st,ct),this.spec=ot}update(e,s,a,d){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let b=this.spec.update(e,s,a);return b&&this.updateInner(e,s,a,d),b}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,s,a,d)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,s,a,d){this.spec.setSelection?this.spec.setSelection(e,s,a):super.setSelection(e,s,a,d)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function renderDescs(o,e,s){let a=o.firstChild,d=!1;for(let b=0;b<e.length;b++){let _=e[b],_e=_.dom;if(_e.parentNode==o){for(;_e!=a;)a=rm(a),d=!0;a=a.nextSibling}else d=!0,o.insertBefore(_e,a);if(_ instanceof MarkViewDesc){let ot=a?a.previousSibling:o.lastChild;renderDescs(_.contentDOM,_.children,s),a=ot?ot.nextSibling:o.firstChild}}for(;a;)a=rm(a),d=!0;d&&s.trackWrites==o&&(s.trackWrites=null)}const OuterDecoLevel=function(o){o&&(this.nodeName=o)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(o,e,s){if(o.length==0)return noDeco;let a=s?noDeco[0]:new OuterDecoLevel,d=[a];for(let b=0;b<o.length;b++){let _=o[b].type.attrs;if(_){_.nodeName&&d.push(a=new OuterDecoLevel(_.nodeName));for(let _e in _){let ot=_[_e];ot!=null&&(s&&d.length==1&&d.push(a=new OuterDecoLevel(e.isInline?"span":"div")),_e=="class"?a.class=(a.class?a.class+" ":"")+ot:_e=="style"?a.style=(a.style?a.style+";":"")+ot:_e!="nodeName"&&(a[_e]=ot))}}}return d}function patchOuterDeco(o,e,s,a){if(s==noDeco&&a==noDeco)return e;let d=e;for(let b=0;b<a.length;b++){let _=a[b],_e=s[b];if(b){let ot;_e&&_e.nodeName==_.nodeName&&d!=o&&(ot=d.parentNode)&&ot.nodeName.toLowerCase()==_.nodeName||(ot=document.createElement(_.nodeName),ot.pmIsDeco=!0,ot.appendChild(d),_e=noDeco[0]),d=ot}patchAttributes(d,_e||noDeco[0],_)}return d}function patchAttributes(o,e,s){for(let a in e)a!="class"&&a!="style"&&a!="nodeName"&&!(a in s)&&o.removeAttribute(a);for(let a in s)a!="class"&&a!="style"&&a!="nodeName"&&s[a]!=e[a]&&o.setAttribute(a,s[a]);if(e.class!=s.class){let a=e.class?e.class.split(" ").filter(Boolean):[],d=s.class?s.class.split(" ").filter(Boolean):[];for(let b=0;b<a.length;b++)d.indexOf(a[b])==-1&&o.classList.remove(a[b]);for(let b=0;b<d.length;b++)a.indexOf(d[b])==-1&&o.classList.add(d[b]);o.classList.length==0&&o.removeAttribute("class")}if(e.style!=s.style){if(e.style){let a=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,d;for(;d=a.exec(e.style);)o.style.removeProperty(d[1])}s.style&&(o.style.cssText+=s.style)}}function applyOuterDeco(o,e,s){return patchOuterDeco(o,o,noDeco,computeOuterDeco(e,s,o.nodeType!=1))}function sameOuterDeco(o,e){if(o.length!=e.length)return!1;for(let s=0;s<o.length;s++)if(!o[s].type.eq(e[s].type))return!1;return!0}function rm(o){let e=o.nextSibling;return o.parentNode.removeChild(o),e}class ViewTreeUpdater{constructor(e,s,a){this.lock=s,this.view=a,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=preMatch(e.node.content,e)}destroyBetween(e,s){if(e!=s){for(let a=e;a<s;a++)this.top.children[a].destroy();this.top.children.splice(e,s-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,s,a){let d=0,b=this.stack.length>>1,_=Math.min(b,e.length);for(;d<_&&(d==b-1?this.top:this.stack[d+1<<1]).matchesMark(e[d])&&e[d].type.spec.spanning!==!1;)d++;for(;d<b;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),b--;for(;b<e.length;){this.stack.push(this.top,this.index+1);let _e=-1;for(let ot=this.index;ot<Math.min(this.index+3,this.top.children.length);ot++){let st=this.top.children[ot];if(st.matchesMark(e[b])&&!this.isLocked(st.dom)){_e=ot;break}}if(_e>-1)_e>this.index&&(this.changed=!0,this.destroyBetween(this.index,_e)),this.top=this.top.children[this.index];else{let ot=MarkViewDesc.create(this.top,e[b],s,a);this.top.children.splice(this.index,0,ot),this.top=ot,this.changed=!0}this.index=0,b++}}findNodeMatch(e,s,a,d){let b=-1,_;if(d>=this.preMatch.index&&(_=this.preMatch.matches[d-this.preMatch.index]).parent==this.top&&_.matchesNode(e,s,a))b=this.top.children.indexOf(_,this.index);else for(let _e=this.index,ot=Math.min(this.top.children.length,_e+5);_e<ot;_e++){let st=this.top.children[_e];if(st.matchesNode(e,s,a)&&!this.preMatch.matched.has(st)){b=_e;break}}return b<0?!1:(this.destroyBetween(this.index,b),this.index++,!0)}updateNodeAt(e,s,a,d,b){let _=this.top.children[d];return _.dirty==NODE_DIRTY&&_.dom==_.contentDOM&&(_.dirty=CONTENT_DIRTY),_.update(e,s,a,b)?(this.destroyBetween(this.index,d),this.index++,!0):!1}findIndexWithChild(e){for(;;){let s=e.parentNode;if(!s)return-1;if(s==this.top.contentDOM){let a=e.pmViewDesc;if(a){for(let d=this.index;d<this.top.children.length;d++)if(this.top.children[d]==a)return d}return-1}e=s}}updateNextNode(e,s,a,d,b,_){for(let _e=this.index;_e<this.top.children.length;_e++){let ot=this.top.children[_e];if(ot instanceof NodeViewDesc){let st=this.preMatch.matched.get(ot);if(st!=null&&st!=b)return!1;let ct=ot.dom,ft,mt=this.isLocked(ct)&&!(e.isText&&ot.node&&ot.node.isText&&ot.nodeDOM.nodeValue==e.text&&ot.dirty!=NODE_DIRTY&&sameOuterDeco(s,ot.outerDeco));if(!mt&&ot.update(e,s,a,d))return this.destroyBetween(this.index,_e),ot.dom!=ct&&(this.changed=!0),this.index++,!0;if(!mt&&(ft=this.recreateWrapper(ot,e,s,a,d,_)))return this.destroyBetween(this.index,_e),this.top.children[this.index]=ft,ft.contentDOM&&(ft.dirty=CONTENT_DIRTY,ft.updateChildren(d,_+1),ft.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,s,a,d,b,_){if(e.dirty||s.isAtom||!e.children.length||!e.node.content.eq(s.content)||!sameOuterDeco(a,e.outerDeco)||!d.eq(e.innerDeco))return null;let _e=NodeViewDesc.create(this.top,s,a,d,b,_);if(_e.contentDOM){_e.children=e.children,e.children=[];for(let ot of _e.children)ot.parent=_e}return e.destroy(),_e}addNode(e,s,a,d,b){let _=NodeViewDesc.create(this.top,e,s,a,d,b);_.contentDOM&&_.updateChildren(d,b+1),this.top.children.splice(this.index++,0,_),this.changed=!0}placeWidget(e,s,a){let d=this.index<this.top.children.length?this.top.children[this.index]:null;if(d&&d.matchesWidget(e)&&(e==d.widget||!d.widget.type.toDOM.parentNode))this.index++;else{let b=new WidgetViewDesc(this.top,e,s,a);this.top.children.splice(this.index++,0,b),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],s=this.top;for(;e instanceof MarkViewDesc;)s=e,e=s.children[s.children.length-1];(!e||!(e instanceof TextViewDesc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((safari||chrome)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",s),this.addHackNode("BR",this.top))}addHackNode(e,s){if(s==this.top&&this.index<s.children.length&&s.children[this.index].matchesHack(e))this.index++;else{let a=document.createElement(e);e=="IMG"&&(a.className="ProseMirror-separator",a.alt=""),e=="BR"&&(a.className="ProseMirror-trailingBreak");let d=new TrailingHackViewDesc(this.top,[],a,null);s!=this.top?s.children.push(d):s.children.splice(this.index++,0,d),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function preMatch(o,e){let s=e,a=s.children.length,d=o.childCount,b=new Map,_=[];e:for(;d>0;){let _e;for(;;)if(a){let st=s.children[a-1];if(st instanceof MarkViewDesc)s=st,a=st.children.length;else{_e=st,a--;break}}else{if(s==e)break e;a=s.parent.children.indexOf(s),s=s.parent}let ot=_e.node;if(ot){if(ot!=o.child(d-1))break;--d,b.set(_e,d),_.push(_e)}}return{index:d,matched:b,matches:_.reverse()}}function compareSide(o,e){return o.type.side-e.type.side}function iterDeco(o,e,s,a){let d=e.locals(o),b=0;if(d.length==0){for(let st=0;st<o.childCount;st++){let ct=o.child(st);a(ct,d,e.forChild(b,ct),st),b+=ct.nodeSize}return}let _=0,_e=[],ot=null;for(let st=0;;){let ct,ft;for(;_<d.length&&d[_].to==b;){let Rt=d[_++];Rt.widget&&(ct?(ft||(ft=[ct])).push(Rt):ct=Rt)}if(ct)if(ft){ft.sort(compareSide);for(let Rt=0;Rt<ft.length;Rt++)s(ft[Rt],st,!!ot)}else s(ct,st,!!ot);let mt,bt;if(ot)bt=-1,mt=ot,ot=null;else if(st<o.childCount)bt=st,mt=o.child(st++);else break;for(let Rt=0;Rt<_e.length;Rt++)_e[Rt].to<=b&&_e.splice(Rt--,1);for(;_<d.length&&d[_].from<=b&&d[_].to>b;)_e.push(d[_++]);let wt=b+mt.nodeSize;if(mt.isText){let Rt=wt;_<d.length&&d[_].from<Rt&&(Rt=d[_].from);for(let It=0;It<_e.length;It++)_e[It].to<Rt&&(Rt=_e[It].to);Rt<wt&&(ot=mt.cut(Rt-b),mt=mt.cut(0,Rt-b),wt=Rt,bt=-1)}else for(;_<d.length&&d[_].to<wt;)_++;let Ct=mt.isInline&&!mt.isLeaf?_e.filter(Rt=>!Rt.inline):_e.slice();a(mt,Ct,e.forChild(b,mt),bt),b=wt}}function iosHacks(o){if(o.nodeName=="UL"||o.nodeName=="OL"){let e=o.style.cssText;o.style.cssText=e+"; list-style: square !important",window.getComputedStyle(o).listStyle,o.style.cssText=e}}function findTextInFragment(o,e,s,a){for(let d=0,b=0;d<o.childCount&&b<=a;){let _=o.child(d++),_e=b;if(b+=_.nodeSize,!_.isText)continue;let ot=_.text;for(;d<o.childCount;){let st=o.child(d++);if(b+=st.nodeSize,!st.isText)break;ot+=st.text}if(b>=s){if(b>=a&&ot.slice(a-e.length-_e,a-_e)==e)return a-e.length;let st=_e<a?ot.lastIndexOf(e,a-_e-1):-1;if(st>=0&&st+e.length+_e>=s)return _e+st;if(s==a&&ot.length>=a+e.length-_e&&ot.slice(a-_e,a-_e+e.length)==e)return a}}return-1}function replaceNodes(o,e,s,a,d){let b=[];for(let _=0,_e=0;_<o.length;_++){let ot=o[_],st=_e,ct=_e+=ot.size;st>=s||ct<=e?b.push(ot):(st<e&&b.push(ot.slice(0,e-st,a)),d&&(b.push(d),d=void 0),ct>s&&b.push(ot.slice(s-st,ot.size,a)))}return b}function selectionFromDOM(o,e=null){let s=o.domSelectionRange(),a=o.state.doc;if(!s.focusNode)return null;let d=o.docView.nearestDesc(s.focusNode),b=d&&d.size==0,_=o.docView.posFromDOM(s.focusNode,s.focusOffset,1);if(_<0)return null;let _e=a.resolve(_),ot,st;if(selectionCollapsed(s)){for(ot=_;d&&!d.node;)d=d.parent;let ft=d.node;if(d&&ft.isAtom&&NodeSelection.isSelectable(ft)&&d.parent&&!(ft.isInline&&isOnEdge(s.focusNode,s.focusOffset,d.dom))){let mt=d.posBefore;st=new NodeSelection(_==mt?_e:a.resolve(mt))}}else{if(s instanceof o.dom.ownerDocument.defaultView.Selection&&s.rangeCount>1){let ft=_,mt=_;for(let bt=0;bt<s.rangeCount;bt++){let wt=s.getRangeAt(bt);ft=Math.min(ft,o.docView.posFromDOM(wt.startContainer,wt.startOffset,1)),mt=Math.max(mt,o.docView.posFromDOM(wt.endContainer,wt.endOffset,-1))}if(ft<0)return null;[ot,_]=mt==o.state.selection.anchor?[mt,ft]:[ft,mt],_e=a.resolve(_)}else ot=o.docView.posFromDOM(s.anchorNode,s.anchorOffset,1);if(ot<0)return null}let ct=a.resolve(ot);if(!st){let ft=e=="pointer"||o.state.selection.head<_e.pos&&!b?1:-1;st=selectionBetween(o,ct,_e,ft)}return st}function editorOwnsSelection(o){return o.editable?o.hasFocus():hasSelection(o)&&document.activeElement&&document.activeElement.contains(o.dom)}function selectionToDOM(o,e=!1){let s=o.state.selection;if(syncNodeSelection(o,s),!!editorOwnsSelection(o)){if(!e&&o.input.mouseDown&&o.input.mouseDown.allowDefault&&chrome){let a=o.domSelectionRange(),d=o.domObserver.currentSelection;if(a.anchorNode&&d.anchorNode&&isEquivalentPosition(a.anchorNode,a.anchorOffset,d.anchorNode,d.anchorOffset)){o.input.mouseDown.delayedSelectionSync=!0,o.domObserver.setCurSelection();return}}if(o.domObserver.disconnectSelection(),o.cursorWrapper)selectCursorWrapper(o);else{let{anchor:a,head:d}=s,b,_;brokenSelectBetweenUneditable&&!(s instanceof TextSelection)&&(s.$from.parent.inlineContent||(b=temporarilyEditableNear(o,s.from)),!s.empty&&!s.$from.parent.inlineContent&&(_=temporarilyEditableNear(o,s.to))),o.docView.setSelection(a,d,o.root,e),brokenSelectBetweenUneditable&&(b&&resetEditable(b),_&&resetEditable(_)),s.visible?o.dom.classList.remove("ProseMirror-hideselection"):(o.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(o))}o.domObserver.setCurSelection(),o.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(o,e){let{node:s,offset:a}=o.docView.domFromPos(e,0),d=a<s.childNodes.length?s.childNodes[a]:null,b=a?s.childNodes[a-1]:null;if(safari&&d&&d.contentEditable=="false")return setEditable(d);if((!d||d.contentEditable=="false")&&(!b||b.contentEditable=="false")){if(d)return setEditable(d);if(b)return setEditable(b)}}function setEditable(o){return o.contentEditable="true",safari&&o.draggable&&(o.draggable=!1,o.wasDraggable=!0),o}function resetEditable(o){o.contentEditable="false",o.wasDraggable&&(o.draggable=!0,o.wasDraggable=null)}function removeClassOnSelectionChange(o){let e=o.dom.ownerDocument;e.removeEventListener("selectionchange",o.input.hideSelectionGuard);let s=o.domSelectionRange(),a=s.anchorNode,d=s.anchorOffset;e.addEventListener("selectionchange",o.input.hideSelectionGuard=()=>{(s.anchorNode!=a||s.anchorOffset!=d)&&(e.removeEventListener("selectionchange",o.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(o)||o.state.selection.visible)&&o.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(o){let e=o.domSelection(),s=document.createRange();if(!e)return;let a=o.cursorWrapper.dom,d=a.nodeName=="IMG";d?s.setStart(a.parentNode,domIndex(a)+1):s.setStart(a,0),s.collapse(!0),e.removeAllRanges(),e.addRange(s),!d&&!o.state.selection.visible&&ie$1&&ie_version<=11&&(a.disabled=!0,a.disabled=!1)}function syncNodeSelection(o,e){if(e instanceof NodeSelection){let s=o.docView.descAt(e.from);s!=o.lastSelectedViewDesc&&(clearNodeSelection(o),s&&s.selectNode(),o.lastSelectedViewDesc=s)}else clearNodeSelection(o)}function clearNodeSelection(o){o.lastSelectedViewDesc&&(o.lastSelectedViewDesc.parent&&o.lastSelectedViewDesc.deselectNode(),o.lastSelectedViewDesc=void 0)}function selectionBetween(o,e,s,a){return o.someProp("createSelectionBetween",d=>d(o,e,s))||TextSelection.between(e,s,a)}function hasFocusAndSelection(o){return o.editable&&!o.hasFocus()?!1:hasSelection(o)}function hasSelection(o){let e=o.domSelectionRange();if(!e.anchorNode)return!1;try{return o.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(o.editable||o.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function anchorInRightPlace(o){let e=o.docView.domFromPos(o.state.selection.anchor,0),s=o.domSelectionRange();return isEquivalentPosition(e.node,e.offset,s.anchorNode,s.anchorOffset)}function moveSelectionBlock(o,e){let{$anchor:s,$head:a}=o.selection,d=e>0?s.max(a):s.min(a),b=d.parent.inlineContent?d.depth?o.doc.resolve(e>0?d.after():d.before()):null:d;return b&&Selection.findFrom(b,e)}function apply(o,e){return o.dispatch(o.state.tr.setSelection(e).scrollIntoView()),!0}function selectHorizontally(o,e,s){let a=o.state.selection;if(a instanceof TextSelection)if(s.indexOf("s")>-1){let{$head:d}=a,b=d.textOffset?null:e<0?d.nodeBefore:d.nodeAfter;if(!b||b.isText||!b.isLeaf)return!1;let _=o.state.doc.resolve(d.pos+b.nodeSize*(e<0?-1:1));return apply(o,new TextSelection(a.$anchor,_))}else if(a.empty){if(o.endOfTextblock(e>0?"forward":"backward")){let d=moveSelectionBlock(o.state,e);return d&&d instanceof NodeSelection?apply(o,d):!1}else if(!(mac$2&&s.indexOf("m")>-1)){let d=a.$head,b=d.textOffset?null:e<0?d.nodeBefore:d.nodeAfter,_;if(!b||b.isText)return!1;let _e=e<0?d.pos-b.nodeSize:d.pos;return b.isAtom||(_=o.docView.descAt(_e))&&!_.contentDOM?NodeSelection.isSelectable(b)?apply(o,new NodeSelection(e<0?o.state.doc.resolve(d.pos-b.nodeSize):d)):webkit?apply(o,new TextSelection(o.state.doc.resolve(e<0?_e:_e+b.nodeSize))):!1:!1}}else return!1;else{if(a instanceof NodeSelection&&a.node.isInline)return apply(o,new TextSelection(e>0?a.$to:a.$from));{let d=moveSelectionBlock(o.state,e);return d?apply(o,d):!1}}}function nodeLen(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function isIgnorable(o,e){let s=o.pmViewDesc;return s&&s.size==0&&(e<0||o.nextSibling||o.nodeName!="BR")}function skipIgnoredNodes(o,e){return e<0?skipIgnoredNodesBefore(o):skipIgnoredNodesAfter(o)}function skipIgnoredNodesBefore(o){let e=o.domSelectionRange(),s=e.focusNode,a=e.focusOffset;if(!s)return;let d,b,_=!1;for(gecko&&s.nodeType==1&&a<nodeLen(s)&&isIgnorable(s.childNodes[a],-1)&&(_=!0);;)if(a>0){if(s.nodeType!=1)break;{let _e=s.childNodes[a-1];if(isIgnorable(_e,-1))d=s,b=--a;else if(_e.nodeType==3)s=_e,a=s.nodeValue.length;else break}}else{if(isBlockNode(s))break;{let _e=s.previousSibling;for(;_e&&isIgnorable(_e,-1);)d=s.parentNode,b=domIndex(_e),_e=_e.previousSibling;if(_e)s=_e,a=nodeLen(s);else{if(s=s.parentNode,s==o.dom)break;a=0}}}_?setSelFocus(o,s,a):d&&setSelFocus(o,d,b)}function skipIgnoredNodesAfter(o){let e=o.domSelectionRange(),s=e.focusNode,a=e.focusOffset;if(!s)return;let d=nodeLen(s),b,_;for(;;)if(a<d){if(s.nodeType!=1)break;let _e=s.childNodes[a];if(isIgnorable(_e,1))b=s,_=++a;else break}else{if(isBlockNode(s))break;{let _e=s.nextSibling;for(;_e&&isIgnorable(_e,1);)b=_e.parentNode,_=domIndex(_e)+1,_e=_e.nextSibling;if(_e)s=_e,a=0,d=nodeLen(s);else{if(s=s.parentNode,s==o.dom)break;a=d=0}}}b&&setSelFocus(o,b,_)}function isBlockNode(o){let e=o.pmViewDesc;return e&&e.node&&e.node.isBlock}function textNodeAfter(o,e){for(;o&&e==o.childNodes.length&&!hasBlockDesc(o);)e=domIndex(o)+1,o=o.parentNode;for(;o&&e<o.childNodes.length;){let s=o.childNodes[e];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;o=s,e=0}}function textNodeBefore(o,e){for(;o&&!e&&!hasBlockDesc(o);)e=domIndex(o),o=o.parentNode;for(;o&&e;){let s=o.childNodes[e-1];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;o=s,e=o.childNodes.length}}function setSelFocus(o,e,s){if(e.nodeType!=3){let b,_;(_=textNodeAfter(e,s))?(e=_,s=0):(b=textNodeBefore(e,s))&&(e=b,s=b.nodeValue.length)}let a=o.domSelection();if(!a)return;if(selectionCollapsed(a)){let b=document.createRange();b.setEnd(e,s),b.setStart(e,s),a.removeAllRanges(),a.addRange(b)}else a.extend&&a.extend(e,s);o.domObserver.setCurSelection();let{state:d}=o;setTimeout(()=>{o.state==d&&selectionToDOM(o)},50)}function findDirection(o,e){let s=o.state.doc.resolve(e);if(!(chrome||windows)&&s.parent.inlineContent){let d=o.coordsAtPos(e);if(e>s.start()){let b=o.coordsAtPos(e-1),_=(b.top+b.bottom)/2;if(_>d.top&&_<d.bottom&&Math.abs(b.left-d.left)>1)return b.left<d.left?"ltr":"rtl"}if(e<s.end()){let b=o.coordsAtPos(e+1),_=(b.top+b.bottom)/2;if(_>d.top&&_<d.bottom&&Math.abs(b.left-d.left)>1)return b.left>d.left?"ltr":"rtl"}}return getComputedStyle(o.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(o,e,s){let a=o.state.selection;if(a instanceof TextSelection&&!a.empty||s.indexOf("s")>-1||mac$2&&s.indexOf("m")>-1)return!1;let{$from:d,$to:b}=a;if(!d.parent.inlineContent||o.endOfTextblock(e<0?"up":"down")){let _=moveSelectionBlock(o.state,e);if(_&&_ instanceof NodeSelection)return apply(o,_)}if(!d.parent.inlineContent){let _=e<0?d:b,_e=a instanceof AllSelection?Selection.near(_,e):Selection.findFrom(_,e);return _e?apply(o,_e):!1}return!1}function stopNativeHorizontalDelete(o,e){if(!(o.state.selection instanceof TextSelection))return!0;let{$head:s,$anchor:a,empty:d}=o.state.selection;if(!s.sameParent(a))return!0;if(!d)return!1;if(o.endOfTextblock(e>0?"forward":"backward"))return!0;let b=!s.textOffset&&(e<0?s.nodeBefore:s.nodeAfter);if(b&&!b.isText){let _=o.state.tr;return e<0?_.delete(s.pos-b.nodeSize,s.pos):_.delete(s.pos,s.pos+b.nodeSize),o.dispatch(_),!0}return!1}function switchEditable(o,e,s){o.domObserver.stop(),e.contentEditable=s,o.domObserver.start()}function safariDownArrowBug(o){if(!safari||o.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:s}=o.domSelectionRange();if(e&&e.nodeType==1&&s==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let a=e.firstChild;switchEditable(o,a,"true"),setTimeout(()=>switchEditable(o,a,"false"),20)}return!1}function getMods(o){let e="";return o.ctrlKey&&(e+="c"),o.metaKey&&(e+="m"),o.altKey&&(e+="a"),o.shiftKey&&(e+="s"),e}function captureKeyDown(o,e){let s=e.keyCode,a=getMods(e);if(s==8||mac$2&&s==72&&a=="c")return stopNativeHorizontalDelete(o,-1)||skipIgnoredNodes(o,-1);if(s==46&&!e.shiftKey||mac$2&&s==68&&a=="c")return stopNativeHorizontalDelete(o,1)||skipIgnoredNodes(o,1);if(s==13||s==27)return!0;if(s==37||mac$2&&s==66&&a=="c"){let d=s==37?findDirection(o,o.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(o,d,a)||skipIgnoredNodes(o,d)}else if(s==39||mac$2&&s==70&&a=="c"){let d=s==39?findDirection(o,o.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(o,d,a)||skipIgnoredNodes(o,d)}else{if(s==38||mac$2&&s==80&&a=="c")return selectVertically(o,-1,a)||skipIgnoredNodes(o,-1);if(s==40||mac$2&&s==78&&a=="c")return safariDownArrowBug(o)||selectVertically(o,1,a)||skipIgnoredNodes(o,1);if(a==(mac$2?"m":"c")&&(s==66||s==73||s==89||s==90))return!0}return!1}function serializeForClipboard(o,e){o.someProp("transformCopied",bt=>{e=bt(e,o)});let s=[],{content:a,openStart:d,openEnd:b}=e;for(;d>1&&b>1&&a.childCount==1&&a.firstChild.childCount==1;){d--,b--;let bt=a.firstChild;s.push(bt.type.name,bt.attrs!=bt.type.defaultAttrs?bt.attrs:null),a=bt.content}let _=o.someProp("clipboardSerializer")||DOMSerializer.fromSchema(o.state.schema),_e=detachedDoc(),ot=_e.createElement("div");ot.appendChild(_.serializeFragment(a,{document:_e}));let st=ot.firstChild,ct,ft=0;for(;st&&st.nodeType==1&&(ct=wrapMap[st.nodeName.toLowerCase()]);){for(let bt=ct.length-1;bt>=0;bt--){let wt=_e.createElement(ct[bt]);for(;ot.firstChild;)wt.appendChild(ot.firstChild);ot.appendChild(wt),ft++}st=ot.firstChild}st&&st.nodeType==1&&st.setAttribute("data-pm-slice",`${d} ${b}${ft?` -${ft}`:""} ${JSON.stringify(s)}`);let mt=o.someProp("clipboardTextSerializer",bt=>bt(e,o))||e.content.textBetween(0,e.content.size,`

`);return{dom:ot,text:mt,slice:e}}function parseFromClipboard(o,e,s,a,d){let b=d.parent.type.spec.code,_,_e;if(!s&&!e)return null;let ot=e&&(a||b||!s);if(ot){if(o.someProp("transformPastedText",mt=>{e=mt(e,b||a,o)}),b)return e?new Slice(Fragment.from(o.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Slice.empty;let ft=o.someProp("clipboardTextParser",mt=>mt(e,d,a,o));if(ft)_e=ft;else{let mt=d.marks(),{schema:bt}=o.state,wt=DOMSerializer.fromSchema(bt);_=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(Ct=>{let Rt=_.appendChild(document.createElement("p"));Ct&&Rt.appendChild(wt.serializeNode(bt.text(Ct,mt)))})}}else o.someProp("transformPastedHTML",ft=>{s=ft(s,o)}),_=readHTML(s),webkit&&restoreReplacedSpaces(_);let st=_&&_.querySelector("[data-pm-slice]"),ct=st&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(st.getAttribute("data-pm-slice")||"");if(ct&&ct[3])for(let ft=+ct[3];ft>0;ft--){let mt=_.firstChild;for(;mt&&mt.nodeType!=1;)mt=mt.nextSibling;if(!mt)break;_=mt}if(_e||(_e=(o.someProp("clipboardParser")||o.someProp("domParser")||DOMParser$1.fromSchema(o.state.schema)).parseSlice(_,{preserveWhitespace:!!(ot||ct),context:d,ruleFromNode(mt){return mt.nodeName=="BR"&&!mt.nextSibling&&mt.parentNode&&!inlineParents.test(mt.parentNode.nodeName)?{ignore:!0}:null}})),ct)_e=addContext(closeSlice(_e,+ct[1],+ct[2]),ct[4]);else if(_e=Slice.maxOpen(normalizeSiblings(_e.content,d),!0),_e.openStart||_e.openEnd){let ft=0,mt=0;for(let bt=_e.content.firstChild;ft<_e.openStart&&!bt.type.spec.isolating;ft++,bt=bt.firstChild);for(let bt=_e.content.lastChild;mt<_e.openEnd&&!bt.type.spec.isolating;mt++,bt=bt.lastChild);_e=closeSlice(_e,ft,mt)}return o.someProp("transformPasted",ft=>{_e=ft(_e,o)}),_e}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(o,e){if(o.childCount<2)return o;for(let s=e.depth;s>=0;s--){let d=e.node(s).contentMatchAt(e.index(s)),b,_=[];if(o.forEach(_e=>{if(!_)return;let ot=d.findWrapping(_e.type),st;if(!ot)return _=null;if(st=_.length&&b.length&&addToSibling(ot,b,_e,_[_.length-1],0))_[_.length-1]=st;else{_.length&&(_[_.length-1]=closeRight(_[_.length-1],b.length));let ct=withWrappers(_e,ot);_.push(ct),d=d.matchType(ct.type),b=ot}}),_)return Fragment.from(_)}return o}function withWrappers(o,e,s=0){for(let a=e.length-1;a>=s;a--)o=e[a].create(null,Fragment.from(o));return o}function addToSibling(o,e,s,a,d){if(d<o.length&&d<e.length&&o[d]==e[d]){let b=addToSibling(o,e,s,a.lastChild,d+1);if(b)return a.copy(a.content.replaceChild(a.childCount-1,b));if(a.contentMatchAt(a.childCount).matchType(d==o.length-1?s.type:o[d+1]))return a.copy(a.content.append(Fragment.from(withWrappers(s,o,d+1))))}}function closeRight(o,e){if(e==0)return o;let s=o.content.replaceChild(o.childCount-1,closeRight(o.lastChild,e-1)),a=o.contentMatchAt(o.childCount).fillBefore(Fragment.empty,!0);return o.copy(s.append(a))}function closeRange(o,e,s,a,d,b){let _=e<0?o.firstChild:o.lastChild,_e=_.content;return o.childCount>1&&(b=0),d<a-1&&(_e=closeRange(_e,e,s,a,d+1,b)),d>=s&&(_e=e<0?_.contentMatchAt(0).fillBefore(_e,b<=d).append(_e):_e.append(_.contentMatchAt(_.childCount).fillBefore(Fragment.empty,!0))),o.replaceChild(e<0?0:o.childCount-1,_.copy(_e))}function closeSlice(o,e,s){return e<o.openStart&&(o=new Slice(closeRange(o.content,-1,e,o.openStart,0,o.openEnd),e,o.openEnd)),s<o.openEnd&&(o=new Slice(closeRange(o.content,1,s,o.openEnd,0,0),o.openStart,s)),o}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(o){let e=window.trustedTypes;return e?(_policy||(_policy=e.createPolicy("ProseMirrorClipboard",{createHTML:s=>s})),_policy.createHTML(o)):o}function readHTML(o){let e=/^(\s*<meta [^>]*>)*/.exec(o);e&&(o=o.slice(e[0].length));let s=detachedDoc().createElement("div"),a=/<([a-z][^>\s]+)/i.exec(o),d;if((d=a&&wrapMap[a[1].toLowerCase()])&&(o=d.map(b=>"<"+b+">").join("")+o+d.map(b=>"</"+b+">").reverse().join("")),s.innerHTML=maybeWrapTrusted(o),d)for(let b=0;b<d.length;b++)s=s.querySelector(d[b])||s;return s}function restoreReplacedSpaces(o){let e=o.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let s=0;s<e.length;s++){let a=e[s];a.childNodes.length==1&&a.textContent==""&&a.parentNode&&a.parentNode.replaceChild(o.ownerDocument.createTextNode(" "),a)}}function addContext(o,e){if(!o.size)return o;let s=o.content.firstChild.type.schema,a;try{a=JSON.parse(e)}catch{return o}let{content:d,openStart:b,openEnd:_}=o;for(let _e=a.length-2;_e>=0;_e-=2){let ot=s.nodes[a[_e]];if(!ot||ot.hasRequiredAttrs())break;d=Fragment.from(ot.create(a[_e+1],d)),b++,_++}return new Slice(d,b,_)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(o){for(let e in handlers){let s=handlers[e];o.dom.addEventListener(e,o.input.eventHandlers[e]=a=>{eventBelongsToView(o,a)&&!runCustomHandler(o,a)&&(o.editable||!(a.type in editHandlers))&&s(o,a)},passiveHandlers[e]?{passive:!0}:void 0)}safari&&o.dom.addEventListener("input",()=>null),ensureListeners(o)}function setSelectionOrigin(o,e){o.input.lastSelectionOrigin=e,o.input.lastSelectionTime=Date.now()}function destroyInput(o){o.domObserver.stop();for(let e in o.input.eventHandlers)o.dom.removeEventListener(e,o.input.eventHandlers[e]);clearTimeout(o.input.composingTimeout),clearTimeout(o.input.lastIOSEnterFallbackTimeout)}function ensureListeners(o){o.someProp("handleDOMEvents",e=>{for(let s in e)o.input.eventHandlers[s]||o.dom.addEventListener(s,o.input.eventHandlers[s]=a=>runCustomHandler(o,a))})}function runCustomHandler(o,e){return o.someProp("handleDOMEvents",s=>{let a=s[e.type];return a?a(o,e)||e.defaultPrevented:!1})}function eventBelongsToView(o,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let s=e.target;s!=o.dom;s=s.parentNode)if(!s||s.nodeType==11||s.pmViewDesc&&s.pmViewDesc.stopEvent(e))return!1;return!0}function dispatchEvent(o,e){!runCustomHandler(o,e)&&handlers[e.type]&&(o.editable||!(e.type in editHandlers))&&handlers[e.type](o,e)}editHandlers.keydown=(o,e)=>{let s=e;if(o.input.shiftKey=s.keyCode==16||s.shiftKey,!inOrNearComposition(o,s)&&(o.input.lastKeyCode=s.keyCode,o.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&s.keyCode==13)))if(s.keyCode!=229&&o.domObserver.forceFlush(),ios&&s.keyCode==13&&!s.ctrlKey&&!s.altKey&&!s.metaKey){let a=Date.now();o.input.lastIOSEnter=a,o.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{o.input.lastIOSEnter==a&&(o.someProp("handleKeyDown",d=>d(o,keyEvent(13,"Enter"))),o.input.lastIOSEnter=0)},200)}else o.someProp("handleKeyDown",a=>a(o,s))||captureKeyDown(o,s)?s.preventDefault():setSelectionOrigin(o,"key")};editHandlers.keyup=(o,e)=>{e.keyCode==16&&(o.input.shiftKey=!1)};editHandlers.keypress=(o,e)=>{let s=e;if(inOrNearComposition(o,s)||!s.charCode||s.ctrlKey&&!s.altKey||mac$2&&s.metaKey)return;if(o.someProp("handleKeyPress",d=>d(o,s))){s.preventDefault();return}let a=o.state.selection;if(!(a instanceof TextSelection)||!a.$from.sameParent(a.$to)){let d=String.fromCharCode(s.charCode);!/[\r\n]/.test(d)&&!o.someProp("handleTextInput",b=>b(o,a.$from.pos,a.$to.pos,d))&&o.dispatch(o.state.tr.insertText(d).scrollIntoView()),s.preventDefault()}};function eventCoords(o){return{left:o.clientX,top:o.clientY}}function isNear(o,e){let s=e.x-o.clientX,a=e.y-o.clientY;return s*s+a*a<100}function runHandlerOnContext(o,e,s,a,d){if(a==-1)return!1;let b=o.state.doc.resolve(a);for(let _=b.depth+1;_>0;_--)if(o.someProp(e,_e=>_>b.depth?_e(o,s,b.nodeAfter,b.before(_),d,!0):_e(o,s,b.node(_),b.before(_),d,!1)))return!0;return!1}function updateSelection(o,e,s){if(o.focused||o.focus(),o.state.selection.eq(e))return;let a=o.state.tr.setSelection(e);a.setMeta("pointer",!0),o.dispatch(a)}function selectClickedLeaf(o,e){if(e==-1)return!1;let s=o.state.doc.resolve(e),a=s.nodeAfter;return a&&a.isAtom&&NodeSelection.isSelectable(a)?(updateSelection(o,new NodeSelection(s)),!0):!1}function selectClickedNode(o,e){if(e==-1)return!1;let s=o.state.selection,a,d;s instanceof NodeSelection&&(a=s.node);let b=o.state.doc.resolve(e);for(let _=b.depth+1;_>0;_--){let _e=_>b.depth?b.nodeAfter:b.node(_);if(NodeSelection.isSelectable(_e)){a&&s.$from.depth>0&&_>=s.$from.depth&&b.before(s.$from.depth+1)==s.$from.pos?d=b.before(s.$from.depth):d=b.before(_);break}}return d!=null?(updateSelection(o,NodeSelection.create(o.state.doc,d)),!0):!1}function handleSingleClick(o,e,s,a,d){return runHandlerOnContext(o,"handleClickOn",e,s,a)||o.someProp("handleClick",b=>b(o,e,a))||(d?selectClickedNode(o,s):selectClickedLeaf(o,s))}function handleDoubleClick(o,e,s,a){return runHandlerOnContext(o,"handleDoubleClickOn",e,s,a)||o.someProp("handleDoubleClick",d=>d(o,e,a))}function handleTripleClick(o,e,s,a){return runHandlerOnContext(o,"handleTripleClickOn",e,s,a)||o.someProp("handleTripleClick",d=>d(o,e,a))||defaultTripleClick(o,s,a)}function defaultTripleClick(o,e,s){if(s.button!=0)return!1;let a=o.state.doc;if(e==-1)return a.inlineContent?(updateSelection(o,TextSelection.create(a,0,a.content.size)),!0):!1;let d=a.resolve(e);for(let b=d.depth+1;b>0;b--){let _=b>d.depth?d.nodeAfter:d.node(b),_e=d.before(b);if(_.inlineContent)updateSelection(o,TextSelection.create(a,_e+1,_e+1+_.content.size));else if(NodeSelection.isSelectable(_))updateSelection(o,NodeSelection.create(a,_e));else continue;return!0}}function forceDOMFlush(o){return endComposition(o)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(o,e)=>{let s=e;o.input.shiftKey=s.shiftKey;let a=forceDOMFlush(o),d=Date.now(),b="singleClick";d-o.input.lastClick.time<500&&isNear(s,o.input.lastClick)&&!s[selectNodeModifier]&&(o.input.lastClick.type=="singleClick"?b="doubleClick":o.input.lastClick.type=="doubleClick"&&(b="tripleClick")),o.input.lastClick={time:d,x:s.clientX,y:s.clientY,type:b};let _=o.posAtCoords(eventCoords(s));_&&(b=="singleClick"?(o.input.mouseDown&&o.input.mouseDown.done(),o.input.mouseDown=new MouseDown(o,_,s,!!a)):(b=="doubleClick"?handleDoubleClick:handleTripleClick)(o,_.pos,_.inside,s)?s.preventDefault():setSelectionOrigin(o,"pointer"))};class MouseDown{constructor(e,s,a,d){this.view=e,this.pos=s,this.event=a,this.flushed=d,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!a[selectNodeModifier],this.allowDefault=a.shiftKey;let b,_;if(s.inside>-1)b=e.state.doc.nodeAt(s.inside),_=s.inside;else{let ct=e.state.doc.resolve(s.pos);b=ct.parent,_=ct.depth?ct.before():0}const _e=d?null:a.target,ot=_e?e.docView.nearestDesc(_e,!0):null;this.target=ot&&ot.dom.nodeType==1?ot.dom:null;let{selection:st}=e.state;(a.button==0&&b.type.spec.draggable&&b.type.spec.selectable!==!1||st instanceof NodeSelection&&st.from<=_&&st.to>_)&&(this.mightDrag={node:b,pos:_,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(eventCoords(e))),this.updateAllowDefault(e),this.allowDefault||!s?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,s.pos,s.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(s.pos))),e.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(e){this.updateAllowDefault(e),setSelectionOrigin(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=o=>{o.input.lastTouch=Date.now(),forceDOMFlush(o),setSelectionOrigin(o,"pointer")};handlers.touchmove=o=>{o.input.lastTouch=Date.now(),setSelectionOrigin(o,"pointer")};handlers.contextmenu=o=>forceDOMFlush(o);function inOrNearComposition(o,e){return o.composing?!0:safari&&Math.abs(e.timeStamp-o.input.compositionEndedAt)<500?(o.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=o=>{if(!o.composing){o.domObserver.flush();let{state:e}=o,s=e.selection.$to;if(e.selection instanceof TextSelection&&(e.storedMarks||!s.textOffset&&s.parentOffset&&s.nodeBefore.marks.some(a=>a.type.spec.inclusive===!1)))o.markCursor=o.state.storedMarks||s.marks(),endComposition(o,!0),o.markCursor=null;else if(endComposition(o,!e.selection.empty),gecko&&e.selection.empty&&s.parentOffset&&!s.textOffset&&s.nodeBefore.marks.length){let a=o.domSelectionRange();for(let d=a.focusNode,b=a.focusOffset;d&&d.nodeType==1&&b!=0;){let _=b<0?d.lastChild:d.childNodes[b-1];if(!_)break;if(_.nodeType==3){let _e=o.domSelection();_e&&_e.collapse(_,_.nodeValue.length);break}else d=_,b=-1}}o.input.composing=!0}scheduleComposeEnd(o,timeoutComposition)};editHandlers.compositionend=(o,e)=>{o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=e.timeStamp,o.input.compositionPendingChanges=o.domObserver.pendingRecords().length?o.input.compositionID:0,o.input.compositionNode=null,o.input.compositionPendingChanges&&Promise.resolve().then(()=>o.domObserver.flush()),o.input.compositionID++,scheduleComposeEnd(o,20))};function scheduleComposeEnd(o,e){clearTimeout(o.input.composingTimeout),e>-1&&(o.input.composingTimeout=setTimeout(()=>endComposition(o),e))}function clearComposition(o){for(o.composing&&(o.input.composing=!1,o.input.compositionEndedAt=timestampFromCustomEvent());o.input.compositionNodes.length>0;)o.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(o){let e=o.domSelectionRange();if(!e.focusNode)return null;let s=textNodeBefore$1(e.focusNode,e.focusOffset),a=textNodeAfter$1(e.focusNode,e.focusOffset);if(s&&a&&s!=a){let d=a.pmViewDesc,b=o.domObserver.lastChangedTextNode;if(s==b||a==b)return b;if(!d||!d.isText(a.nodeValue))return a;if(o.input.compositionNode==a){let _=s.pmViewDesc;if(!(!_||!_.isText(s.nodeValue)))return a}}return s||a}function timestampFromCustomEvent(){let o=document.createEvent("Event");return o.initEvent("event",!0,!0),o.timeStamp}function endComposition(o,e=!1){if(!(android&&o.domObserver.flushingSoon>=0)){if(o.domObserver.forceFlush(),clearComposition(o),e||o.docView&&o.docView.dirty){let s=selectionFromDOM(o);return s&&!s.eq(o.state.selection)?o.dispatch(o.state.tr.setSelection(s)):(o.markCursor||e)&&!o.state.selection.empty?o.dispatch(o.state.tr.deleteSelection()):o.updateState(o.state),!0}return!1}}function captureCopy(o,e){if(!o.dom.parentNode)return;let s=o.dom.parentNode.appendChild(document.createElement("div"));s.appendChild(e),s.style.cssText="position: fixed; left: -10000px; top: 10px";let a=getSelection(),d=document.createRange();d.selectNodeContents(e),o.dom.blur(),a.removeAllRanges(),a.addRange(d),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),o.focus()},50)}const brokenClipboardAPI=ie$1&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(o,e)=>{let s=e,a=o.state.selection,d=s.type=="cut";if(a.empty)return;let b=brokenClipboardAPI?null:s.clipboardData,_=a.content(),{dom:_e,text:ot}=serializeForClipboard(o,_);b?(s.preventDefault(),b.clearData(),b.setData("text/html",_e.innerHTML),b.setData("text/plain",ot)):captureCopy(o,_e),d&&o.dispatch(o.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(o){return o.openStart==0&&o.openEnd==0&&o.content.childCount==1?o.content.firstChild:null}function capturePaste(o,e){if(!o.dom.parentNode)return;let s=o.input.shiftKey||o.state.selection.$from.parent.type.spec.code,a=o.dom.parentNode.appendChild(document.createElement(s?"textarea":"div"));s||(a.contentEditable="true"),a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus();let d=o.input.shiftKey&&o.input.lastKeyCode!=45;setTimeout(()=>{o.focus(),a.parentNode&&a.parentNode.removeChild(a),s?doPaste(o,a.value,null,d,e):doPaste(o,a.textContent,a.innerHTML,d,e)},50)}function doPaste(o,e,s,a,d){let b=parseFromClipboard(o,e,s,a,o.state.selection.$from);if(o.someProp("handlePaste",ot=>ot(o,d,b||Slice.empty)))return!0;if(!b)return!1;let _=sliceSingleNode(b),_e=_?o.state.tr.replaceSelectionWith(_,a):o.state.tr.replaceSelection(b);return o.dispatch(_e.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(o){let e=o.getData("text/plain")||o.getData("Text");if(e)return e;let s=o.getData("text/uri-list");return s?s.replace(/\r?\n/g," "):""}editHandlers.paste=(o,e)=>{let s=e;if(o.composing&&!android)return;let a=brokenClipboardAPI?null:s.clipboardData,d=o.input.shiftKey&&o.input.lastKeyCode!=45;a&&doPaste(o,getText$1(a),a.getData("text/html"),d,s)?s.preventDefault():capturePaste(o,s)};class Dragging{constructor(e,s,a){this.slice=e,this.move=s,this.node=a}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";handlers.dragstart=(o,e)=>{let s=e,a=o.input.mouseDown;if(a&&a.done(),!s.dataTransfer)return;let d=o.state.selection,b=d.empty?null:o.posAtCoords(eventCoords(s)),_;if(!(b&&b.pos>=d.from&&b.pos<=(d instanceof NodeSelection?d.to-1:d.to))){if(a&&a.mightDrag)_=NodeSelection.create(o.state.doc,a.mightDrag.pos);else if(s.target&&s.target.nodeType==1){let ft=o.docView.nearestDesc(s.target,!0);ft&&ft.node.type.spec.draggable&&ft!=o.docView&&(_=NodeSelection.create(o.state.doc,ft.posBefore))}}let _e=(_||o.state.selection).content(),{dom:ot,text:st,slice:ct}=serializeForClipboard(o,_e);(!s.dataTransfer.files.length||!chrome||chrome_version>120)&&s.dataTransfer.clearData(),s.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",ot.innerHTML),s.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||s.dataTransfer.setData("text/plain",st),o.dragging=new Dragging(ct,!s[dragCopyModifier],_)};handlers.dragend=o=>{let e=o.dragging;window.setTimeout(()=>{o.dragging==e&&(o.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(o,e)=>e.preventDefault();editHandlers.drop=(o,e)=>{let s=e,a=o.dragging;if(o.dragging=null,!s.dataTransfer)return;let d=o.posAtCoords(eventCoords(s));if(!d)return;let b=o.state.doc.resolve(d.pos),_=a&&a.slice;_?o.someProp("transformPasted",wt=>{_=wt(_,o)}):_=parseFromClipboard(o,getText$1(s.dataTransfer),brokenClipboardAPI?null:s.dataTransfer.getData("text/html"),!1,b);let _e=!!(a&&!s[dragCopyModifier]);if(o.someProp("handleDrop",wt=>wt(o,s,_||Slice.empty,_e))){s.preventDefault();return}if(!_)return;s.preventDefault();let ot=_?dropPoint(o.state.doc,b.pos,_):b.pos;ot==null&&(ot=b.pos);let st=o.state.tr;if(_e){let{node:wt}=a;wt?wt.replace(st):st.deleteSelection()}let ct=st.mapping.map(ot),ft=_.openStart==0&&_.openEnd==0&&_.content.childCount==1,mt=st.doc;if(ft?st.replaceRangeWith(ct,ct,_.content.firstChild):st.replaceRange(ct,ct,_),st.doc.eq(mt))return;let bt=st.doc.resolve(ct);if(ft&&NodeSelection.isSelectable(_.content.firstChild)&&bt.nodeAfter&&bt.nodeAfter.sameMarkup(_.content.firstChild))st.setSelection(new NodeSelection(bt));else{let wt=st.mapping.map(ot);st.mapping.maps[st.mapping.maps.length-1].forEach((Ct,Rt,It,Pt)=>wt=Pt),st.setSelection(selectionBetween(o,bt,st.doc.resolve(wt)))}o.focus(),o.dispatch(st.setMeta("uiEvent","drop"))};handlers.focus=o=>{o.input.lastFocus=Date.now(),o.focused||(o.domObserver.stop(),o.dom.classList.add("ProseMirror-focused"),o.domObserver.start(),o.focused=!0,setTimeout(()=>{o.docView&&o.hasFocus()&&!o.domObserver.currentSelection.eq(o.domSelectionRange())&&selectionToDOM(o)},20))};handlers.blur=(o,e)=>{let s=e;o.focused&&(o.domObserver.stop(),o.dom.classList.remove("ProseMirror-focused"),o.domObserver.start(),s.relatedTarget&&o.dom.contains(s.relatedTarget)&&o.domObserver.currentSelection.clear(),o.focused=!1)};handlers.beforeinput=(o,e)=>{if(chrome&&android&&e.inputType=="deleteContentBackward"){o.domObserver.flushSoon();let{domChangeCount:a}=o.input;setTimeout(()=>{if(o.input.domChangeCount!=a||(o.dom.blur(),o.focus(),o.someProp("handleKeyDown",b=>b(o,keyEvent(8,"Backspace")))))return;let{$cursor:d}=o.state.selection;d&&d.pos>0&&o.dispatch(o.state.tr.delete(d.pos-1,d.pos).scrollIntoView())},50)}};for(let o in editHandlers)handlers[o]=editHandlers[o];function compareObjs(o,e){if(o==e)return!0;for(let s in o)if(o[s]!==e[s])return!1;for(let s in e)if(!(s in o))return!1;return!0}class WidgetType{constructor(e,s){this.toDOM=e,this.spec=s||noSpec,this.side=this.spec.side||0}map(e,s,a,d){let{pos:b,deleted:_}=e.mapResult(s.from+d,this.side<0?-1:1);return _?null:new Decoration(b-a,b-a,this)}valid(){return!0}eq(e){return this==e||e instanceof WidgetType&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&compareObjs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class InlineType{constructor(e,s){this.attrs=e,this.spec=s||noSpec}map(e,s,a,d){let b=e.map(s.from+d,this.spec.inclusiveStart?-1:1)-a,_=e.map(s.to+d,this.spec.inclusiveEnd?1:-1)-a;return b>=_?null:new Decoration(b,_,this)}valid(e,s){return s.from<s.to}eq(e){return this==e||e instanceof InlineType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}static is(e){return e.type instanceof InlineType}destroy(){}}class NodeType{constructor(e,s){this.attrs=e,this.spec=s||noSpec}map(e,s,a,d){let b=e.mapResult(s.from+d,1);if(b.deleted)return null;let _=e.mapResult(s.to+d,-1);return _.deleted||_.pos<=b.pos?null:new Decoration(b.pos-a,_.pos-a,this)}valid(e,s){let{index:a,offset:d}=e.content.findIndex(s.from),b;return d==s.from&&!(b=e.child(a)).isText&&d+b.nodeSize==s.to}eq(e){return this==e||e instanceof NodeType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}destroy(){}}class Decoration{constructor(e,s,a){this.from=e,this.to=s,this.type=a}copy(e,s){return new Decoration(e,s,this.type)}eq(e,s=0){return this.type.eq(e.type)&&this.from+s==e.from&&this.to+s==e.to}map(e,s,a){return this.type.map(e,this,s,a)}static widget(e,s,a){return new Decoration(e,e,new WidgetType(s,a))}static inline(e,s,a,d){return new Decoration(e,s,new InlineType(a,d))}static node(e,s,a,d){return new Decoration(e,s,new NodeType(a,d))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(e,s){this.local=e.length?e:none,this.children=s.length?s:none}static create(e,s){return s.length?buildTree(s,e,0,noSpec):empty}find(e,s,a){let d=[];return this.findInner(e??0,s??1e9,d,0,a),d}findInner(e,s,a,d,b){for(let _=0;_<this.local.length;_++){let _e=this.local[_];_e.from<=s&&_e.to>=e&&(!b||b(_e.spec))&&a.push(_e.copy(_e.from+d,_e.to+d))}for(let _=0;_<this.children.length;_+=3)if(this.children[_]<s&&this.children[_+1]>e){let _e=this.children[_]+1;this.children[_+2].findInner(e-_e,s-_e,a,d+_e,b)}}map(e,s,a){return this==empty||e.maps.length==0?this:this.mapInner(e,s,0,0,a||noSpec)}mapInner(e,s,a,d,b){let _;for(let _e=0;_e<this.local.length;_e++){let ot=this.local[_e].map(e,a,d);ot&&ot.type.valid(s,ot)?(_||(_=[])).push(ot):b.onRemove&&b.onRemove(this.local[_e].spec)}return this.children.length?mapChildren(this.children,_||[],e,s,a,d,b):_?new DecorationSet(_.sort(byPos),none):empty}add(e,s){return s.length?this==empty?DecorationSet.create(e,s):this.addInner(e,s,0):this}addInner(e,s,a){let d,b=0;e.forEach((_e,ot)=>{let st=ot+a,ct;if(ct=takeSpansForNode(s,_e,st)){for(d||(d=this.children.slice());b<d.length&&d[b]<ot;)b+=3;d[b]==ot?d[b+2]=d[b+2].addInner(_e,ct,st+1):d.splice(b,0,ot,ot+_e.nodeSize,buildTree(ct,_e,st+1,noSpec)),b+=3}});let _=moveSpans(b?withoutNulls(s):s,-a);for(let _e=0;_e<_.length;_e++)_[_e].type.valid(e,_[_e])||_.splice(_e--,1);return new DecorationSet(_.length?this.local.concat(_).sort(byPos):this.local,d||this.children)}remove(e){return e.length==0||this==empty?this:this.removeInner(e,0)}removeInner(e,s){let a=this.children,d=this.local;for(let b=0;b<a.length;b+=3){let _,_e=a[b]+s,ot=a[b+1]+s;for(let ct=0,ft;ct<e.length;ct++)(ft=e[ct])&&ft.from>_e&&ft.to<ot&&(e[ct]=null,(_||(_=[])).push(ft));if(!_)continue;a==this.children&&(a=this.children.slice());let st=a[b+2].removeInner(_,_e+1);st!=empty?a[b+2]=st:(a.splice(b,3),b-=3)}if(d.length){for(let b=0,_;b<e.length;b++)if(_=e[b])for(let _e=0;_e<d.length;_e++)d[_e].eq(_,s)&&(d==this.local&&(d=this.local.slice()),d.splice(_e--,1))}return a==this.children&&d==this.local?this:d.length||a.length?new DecorationSet(d,a):empty}forChild(e,s){if(this==empty)return this;if(s.isLeaf)return DecorationSet.empty;let a,d;for(let _e=0;_e<this.children.length;_e+=3)if(this.children[_e]>=e){this.children[_e]==e&&(a=this.children[_e+2]);break}let b=e+1,_=b+s.content.size;for(let _e=0;_e<this.local.length;_e++){let ot=this.local[_e];if(ot.from<_&&ot.to>b&&ot.type instanceof InlineType){let st=Math.max(b,ot.from)-b,ct=Math.min(_,ot.to)-b;st<ct&&(d||(d=[])).push(ot.copy(st,ct))}}if(d){let _e=new DecorationSet(d.sort(byPos),none);return a?new DecorationGroup([_e,a]):_e}return a||empty}eq(e){if(this==e)return!0;if(!(e instanceof DecorationSet)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let s=0;s<this.local.length;s++)if(!this.local[s].eq(e.local[s]))return!1;for(let s=0;s<this.children.length;s+=3)if(this.children[s]!=e.children[s]||this.children[s+1]!=e.children[s+1]||!this.children[s+2].eq(e.children[s+2]))return!1;return!0}locals(e){return removeOverlap(this.localsInner(e))}localsInner(e){if(this==empty)return none;if(e.inlineContent||!this.local.some(InlineType.is))return this.local;let s=[];for(let a=0;a<this.local.length;a++)this.local[a].type instanceof InlineType||s.push(this.local[a]);return s}forEachSet(e){e(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(e){this.members=e}map(e,s){const a=this.members.map(d=>d.map(e,s,noSpec));return DecorationGroup.from(a)}forChild(e,s){if(s.isLeaf)return DecorationSet.empty;let a=[];for(let d=0;d<this.members.length;d++){let b=this.members[d].forChild(e,s);b!=empty&&(b instanceof DecorationGroup?a=a.concat(b.members):a.push(b))}return DecorationGroup.from(a)}eq(e){if(!(e instanceof DecorationGroup)||e.members.length!=this.members.length)return!1;for(let s=0;s<this.members.length;s++)if(!this.members[s].eq(e.members[s]))return!1;return!0}locals(e){let s,a=!0;for(let d=0;d<this.members.length;d++){let b=this.members[d].localsInner(e);if(b.length)if(!s)s=b;else{a&&(s=s.slice(),a=!1);for(let _=0;_<b.length;_++)s.push(b[_])}}return s?removeOverlap(a?s:s.sort(byPos)):none}static from(e){switch(e.length){case 0:return empty;case 1:return e[0];default:return new DecorationGroup(e.every(s=>s instanceof DecorationSet)?e:e.reduce((s,a)=>s.concat(a instanceof DecorationSet?a:a.members),[]))}}forEachSet(e){for(let s=0;s<this.members.length;s++)this.members[s].forEachSet(e)}}function mapChildren(o,e,s,a,d,b,_){let _e=o.slice();for(let st=0,ct=b;st<s.maps.length;st++){let ft=0;s.maps[st].forEach((mt,bt,wt,Ct)=>{let Rt=Ct-wt-(bt-mt);for(let It=0;It<_e.length;It+=3){let Pt=_e[It+1];if(Pt<0||mt>Pt+ct-ft)continue;let Tt=_e[It]+ct-ft;bt>=Tt?_e[It+1]=mt<=Tt?-2:-1:mt>=ct&&Rt&&(_e[It]+=Rt,_e[It+1]+=Rt)}ft+=Rt}),ct=s.maps[st].map(ct,-1)}let ot=!1;for(let st=0;st<_e.length;st+=3)if(_e[st+1]<0){if(_e[st+1]==-2){ot=!0,_e[st+1]=-1;continue}let ct=s.map(o[st]+b),ft=ct-d;if(ft<0||ft>=a.content.size){ot=!0;continue}let mt=s.map(o[st+1]+b,-1),bt=mt-d,{index:wt,offset:Ct}=a.content.findIndex(ft),Rt=a.maybeChild(wt);if(Rt&&Ct==ft&&Ct+Rt.nodeSize==bt){let It=_e[st+2].mapInner(s,Rt,ct+1,o[st]+b+1,_);It!=empty?(_e[st]=ft,_e[st+1]=bt,_e[st+2]=It):(_e[st+1]=-2,ot=!0)}else ot=!0}if(ot){let st=mapAndGatherRemainingDecorations(_e,o,e,s,d,b,_),ct=buildTree(st,a,0,_);e=ct.local;for(let ft=0;ft<_e.length;ft+=3)_e[ft+1]<0&&(_e.splice(ft,3),ft-=3);for(let ft=0,mt=0;ft<ct.children.length;ft+=3){let bt=ct.children[ft];for(;mt<_e.length&&_e[mt]<bt;)mt+=3;_e.splice(mt,0,ct.children[ft],ct.children[ft+1],ct.children[ft+2])}}return new DecorationSet(e.sort(byPos),_e)}function moveSpans(o,e){if(!e||!o.length)return o;let s=[];for(let a=0;a<o.length;a++){let d=o[a];s.push(new Decoration(d.from+e,d.to+e,d.type))}return s}function mapAndGatherRemainingDecorations(o,e,s,a,d,b,_){function _e(ot,st){for(let ct=0;ct<ot.local.length;ct++){let ft=ot.local[ct].map(a,d,st);ft?s.push(ft):_.onRemove&&_.onRemove(ot.local[ct].spec)}for(let ct=0;ct<ot.children.length;ct+=3)_e(ot.children[ct+2],ot.children[ct]+st+1)}for(let ot=0;ot<o.length;ot+=3)o[ot+1]==-1&&_e(o[ot+2],e[ot]+b+1);return s}function takeSpansForNode(o,e,s){if(e.isLeaf)return null;let a=s+e.nodeSize,d=null;for(let b=0,_;b<o.length;b++)(_=o[b])&&_.from>s&&_.to<a&&((d||(d=[])).push(_),o[b]=null);return d}function withoutNulls(o){let e=[];for(let s=0;s<o.length;s++)o[s]!=null&&e.push(o[s]);return e}function buildTree(o,e,s,a){let d=[],b=!1;e.forEach((_e,ot)=>{let st=takeSpansForNode(o,_e,ot+s);if(st){b=!0;let ct=buildTree(st,_e,s+ot+1,a);ct!=empty&&d.push(ot,ot+_e.nodeSize,ct)}});let _=moveSpans(b?withoutNulls(o):o,-s).sort(byPos);for(let _e=0;_e<_.length;_e++)_[_e].type.valid(e,_[_e])||(a.onRemove&&a.onRemove(_[_e].spec),_.splice(_e--,1));return _.length||d.length?new DecorationSet(_,d):empty}function byPos(o,e){return o.from-e.from||o.to-e.to}function removeOverlap(o){let e=o;for(let s=0;s<e.length-1;s++){let a=e[s];if(a.from!=a.to)for(let d=s+1;d<e.length;d++){let b=e[d];if(b.from==a.from){b.to!=a.to&&(e==o&&(e=o.slice()),e[d]=b.copy(b.from,a.to),insertAhead(e,d+1,b.copy(a.to,b.to)));continue}else{b.from<a.to&&(e==o&&(e=o.slice()),e[s]=a.copy(a.from,b.from),insertAhead(e,d,a.copy(b.from,a.to)));break}}}return e}function insertAhead(o,e,s){for(;e<o.length&&byPos(s,o[e])>0;)e++;o.splice(e,0,s)}function viewDecorations(o){let e=[];return o.someProp("decorations",s=>{let a=s(o.state);a&&a!=empty&&e.push(a)}),o.cursorWrapper&&e.push(DecorationSet.create(o.state.doc,[o.cursorWrapper.deco])),DecorationGroup.from(e)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$1&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class DOMObserver{constructor(e,s){this.view=e,this.handleDOMChange=s,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(a=>{for(let d=0;d<a.length;d++)this.queue.push(a[d]);ie$1&&ie_version<=11&&a.some(d=>d.type=="childList"&&d.removedNodes.length||d.type=="characterData"&&d.oldValue.length>d.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=a=>{this.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let s=0;s<e.length;s++)this.queue.push(e[s]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$1&&ie_version<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let s=new Set,a;for(let b=e.focusNode;b;b=parentNode(b))s.add(b);for(let b=e.anchorNode;b;b=parentNode(b))if(s.has(b)){a=b;break}let d=a&&this.view.docView.nearestDesc(a);if(d&&d.ignoreMutation({type:"selection",target:a.nodeType==3?a.parentNode:a}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let s=this.pendingRecords();s.length&&(this.queue=[]);let a=e.domSelectionRange(),d=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(a)&&hasFocusAndSelection(e)&&!this.ignoreSelectionChange(a),b=-1,_=-1,_e=!1,ot=[];if(e.editable)for(let ct=0;ct<s.length;ct++){let ft=this.registerMutation(s[ct],ot);ft&&(b=b<0?ft.from:Math.min(ft.from,b),_=_<0?ft.to:Math.max(ft.to,_),ft.typeOver&&(_e=!0))}if(gecko&&ot.length){let ct=ot.filter(ft=>ft.nodeName=="BR");if(ct.length==2){let[ft,mt]=ct;ft.parentNode&&ft.parentNode.parentNode==mt.parentNode?mt.remove():ft.remove()}else{let{focusNode:ft}=this.currentSelection;for(let mt of ct){let bt=mt.parentNode;bt&&bt.nodeName=="LI"&&(!ft||blockParent(e,ft)!=bt)&&mt.remove()}}}let st=null;b<0&&d&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&selectionCollapsed(a)&&(st=selectionFromDOM(e))&&st.eq(Selection.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,selectionToDOM(e),this.currentSelection.set(a),e.scrollToSelection()):(b>-1||d)&&(b>-1&&(e.docView.markDirty(b,_),checkCSS(e)),this.handleDOMChange(b,_,_e,ot),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(a)||selectionToDOM(e),this.currentSelection.set(a))}registerMutation(e,s){if(s.indexOf(e.target)>-1)return null;let a=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(a==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!a||a.ignoreMutation(e))return null;if(e.type=="childList"){for(let ct=0;ct<e.addedNodes.length;ct++){let ft=e.addedNodes[ct];s.push(ft),ft.nodeType==3&&(this.lastChangedTextNode=ft)}if(a.contentDOM&&a.contentDOM!=a.dom&&!a.contentDOM.contains(e.target))return{from:a.posBefore,to:a.posAfter};let d=e.previousSibling,b=e.nextSibling;if(ie$1&&ie_version<=11&&e.addedNodes.length)for(let ct=0;ct<e.addedNodes.length;ct++){let{previousSibling:ft,nextSibling:mt}=e.addedNodes[ct];(!ft||Array.prototype.indexOf.call(e.addedNodes,ft)<0)&&(d=ft),(!mt||Array.prototype.indexOf.call(e.addedNodes,mt)<0)&&(b=mt)}let _=d&&d.parentNode==e.target?domIndex(d)+1:0,_e=a.localPosFromDOM(e.target,_,-1),ot=b&&b.parentNode==e.target?domIndex(b):e.target.childNodes.length,st=a.localPosFromDOM(e.target,ot,1);return{from:_e,to:st}}else return e.type=="attributes"?{from:a.posAtStart-a.border,to:a.posAtEnd+a.border}:(this.lastChangedTextNode=e.target,{from:a.posAtStart,to:a.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(o){if(!cssChecked.has(o)&&(cssChecked.set(o,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(o.dom).whiteSpace)!==-1)){if(o.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(o,e){let s=e.startContainer,a=e.startOffset,d=e.endContainer,b=e.endOffset,_=o.domAtPos(o.state.selection.anchor);return isEquivalentPosition(_.node,_.offset,d,b)&&([s,a,d,b]=[d,b,s,a]),{anchorNode:s,anchorOffset:a,focusNode:d,focusOffset:b}}function safariShadowSelectionRange(o,e){if(e.getComposedRanges){let d=e.getComposedRanges(o.root)[0];if(d)return rangeToSelectionRange(o,d)}let s;function a(d){d.preventDefault(),d.stopImmediatePropagation(),s=d.getTargetRanges()[0]}return o.dom.addEventListener("beforeinput",a,!0),document.execCommand("indent"),o.dom.removeEventListener("beforeinput",a,!0),s?rangeToSelectionRange(o,s):null}function blockParent(o,e){for(let s=e.parentNode;s&&s!=o.dom;s=s.parentNode){let a=o.docView.nearestDesc(s,!0);if(a&&a.node.isBlock)return s}return null}function parseBetween(o,e,s){let{node:a,fromOffset:d,toOffset:b,from:_,to:_e}=o.docView.parseRange(e,s),ot=o.domSelectionRange(),st,ct=ot.anchorNode;if(ct&&o.dom.contains(ct.nodeType==1?ct:ct.parentNode)&&(st=[{node:ct,offset:ot.anchorOffset}],selectionCollapsed(ot)||st.push({node:ot.focusNode,offset:ot.focusOffset})),chrome&&o.input.lastKeyCode===8)for(let Rt=b;Rt>d;Rt--){let It=a.childNodes[Rt-1],Pt=It.pmViewDesc;if(It.nodeName=="BR"&&!Pt){b=Rt;break}if(!Pt||Pt.size)break}let ft=o.state.doc,mt=o.someProp("domParser")||DOMParser$1.fromSchema(o.state.schema),bt=ft.resolve(_),wt=null,Ct=mt.parse(a,{topNode:bt.parent,topMatch:bt.parent.contentMatchAt(bt.index()),topOpen:!0,from:d,to:b,preserveWhitespace:bt.parent.type.whitespace=="pre"?"full":!0,findPositions:st,ruleFromNode,context:bt});if(st&&st[0].pos!=null){let Rt=st[0].pos,It=st[1]&&st[1].pos;It==null&&(It=Rt),wt={anchor:Rt+_,head:It+_}}return{doc:Ct,sel:wt,from:_,to:_e}}function ruleFromNode(o){let e=o.pmViewDesc;if(e)return e.parseRule();if(o.nodeName=="BR"&&o.parentNode){if(safari&&/^(ul|ol)$/i.test(o.parentNode.nodeName)){let s=document.createElement("div");return s.appendChild(document.createElement("li")),{skip:s}}else if(o.parentNode.lastChild==o||safari&&/^(tr|table)$/i.test(o.parentNode.nodeName))return{ignore:!0}}else if(o.nodeName=="IMG"&&o.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(o,e,s,a,d){let b=o.input.compositionPendingChanges||(o.composing?o.input.compositionID:0);if(o.input.compositionPendingChanges=0,e<0){let fn=o.input.lastSelectionTime>Date.now()-50?o.input.lastSelectionOrigin:null,Mn=selectionFromDOM(o,fn);if(Mn&&!o.state.selection.eq(Mn)){if(chrome&&android&&o.input.lastKeyCode===13&&Date.now()-100<o.input.lastKeyCodeTime&&o.someProp("handleKeyDown",Wt=>Wt(o,keyEvent(13,"Enter"))))return;let ln=o.state.tr.setSelection(Mn);fn=="pointer"?ln.setMeta("pointer",!0):fn=="key"&&ln.scrollIntoView(),b&&ln.setMeta("composition",b),o.dispatch(ln)}return}let _=o.state.doc.resolve(e),_e=_.sharedDepth(s);e=_.before(_e+1),s=o.state.doc.resolve(s).after(_e+1);let ot=o.state.selection,st=parseBetween(o,e,s),ct=o.state.doc,ft=ct.slice(st.from,st.to),mt,bt;o.input.lastKeyCode===8&&Date.now()-100<o.input.lastKeyCodeTime?(mt=o.state.selection.to,bt="end"):(mt=o.state.selection.from,bt="start"),o.input.lastKeyCode=null;let wt=findDiff(ft.content,st.doc.content,st.from,mt,bt);if(wt&&o.input.domChangeCount++,(ios&&o.input.lastIOSEnter>Date.now()-225||android)&&d.some(fn=>fn.nodeType==1&&!isInline.test(fn.nodeName))&&(!wt||wt.endA>=wt.endB)&&o.someProp("handleKeyDown",fn=>fn(o,keyEvent(13,"Enter")))){o.input.lastIOSEnter=0;return}if(!wt)if(a&&ot instanceof TextSelection&&!ot.empty&&ot.$head.sameParent(ot.$anchor)&&!o.composing&&!(st.sel&&st.sel.anchor!=st.sel.head))wt={start:ot.from,endA:ot.to,endB:ot.to};else{if(st.sel){let fn=resolveSelection(o,o.state.doc,st.sel);if(fn&&!fn.eq(o.state.selection)){let Mn=o.state.tr.setSelection(fn);b&&Mn.setMeta("composition",b),o.dispatch(Mn)}}return}o.state.selection.from<o.state.selection.to&&wt.start==wt.endB&&o.state.selection instanceof TextSelection&&(wt.start>o.state.selection.from&&wt.start<=o.state.selection.from+2&&o.state.selection.from>=st.from?wt.start=o.state.selection.from:wt.endA<o.state.selection.to&&wt.endA>=o.state.selection.to-2&&o.state.selection.to<=st.to&&(wt.endB+=o.state.selection.to-wt.endA,wt.endA=o.state.selection.to)),ie$1&&ie_version<=11&&wt.endB==wt.start+1&&wt.endA==wt.start&&wt.start>st.from&&st.doc.textBetween(wt.start-st.from-1,wt.start-st.from+1)==" "&&(wt.start--,wt.endA--,wt.endB--);let Ct=st.doc.resolveNoCache(wt.start-st.from),Rt=st.doc.resolveNoCache(wt.endB-st.from),It=ct.resolve(wt.start),Pt=Ct.sameParent(Rt)&&Ct.parent.inlineContent&&It.end()>=wt.endA,Tt;if((ios&&o.input.lastIOSEnter>Date.now()-225&&(!Pt||d.some(fn=>fn.nodeName=="DIV"||fn.nodeName=="P"))||!Pt&&Ct.pos<st.doc.content.size&&!Ct.sameParent(Rt)&&(Tt=Selection.findFrom(st.doc.resolve(Ct.pos+1),1,!0))&&Tt.head==Rt.pos)&&o.someProp("handleKeyDown",fn=>fn(o,keyEvent(13,"Enter")))){o.input.lastIOSEnter=0;return}if(o.state.selection.anchor>wt.start&&looksLikeBackspace(ct,wt.start,wt.endA,Ct,Rt)&&o.someProp("handleKeyDown",fn=>fn(o,keyEvent(8,"Backspace")))){android&&chrome&&o.domObserver.suppressSelectionUpdates();return}chrome&&android&&wt.endB==wt.start&&(o.input.lastAndroidDelete=Date.now()),android&&!Pt&&Ct.start()!=Rt.start()&&Rt.parentOffset==0&&Ct.depth==Rt.depth&&st.sel&&st.sel.anchor==st.sel.head&&st.sel.head==wt.endA&&(wt.endB-=2,Rt=st.doc.resolveNoCache(wt.endB-st.from),setTimeout(()=>{o.someProp("handleKeyDown",function(fn){return fn(o,keyEvent(13,"Enter"))})},20));let Gt=wt.start,Jt=wt.endA,qt,Nt,Qt;if(Pt){if(Ct.pos==Rt.pos)ie$1&&ie_version<=11&&Ct.parentOffset==0&&(o.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(o),20)),qt=o.state.tr.delete(Gt,Jt),Nt=ct.resolve(wt.start).marksAcross(ct.resolve(wt.endA));else if(wt.endA==wt.endB&&(Qt=isMarkChange(Ct.parent.content.cut(Ct.parentOffset,Rt.parentOffset),It.parent.content.cut(It.parentOffset,wt.endA-It.start()))))qt=o.state.tr,Qt.type=="add"?qt.addMark(Gt,Jt,Qt.mark):qt.removeMark(Gt,Jt,Qt.mark);else if(Ct.parent.child(Ct.index()).isText&&Ct.index()==Rt.index()-(Rt.textOffset?0:1)){let fn=Ct.parent.textBetween(Ct.parentOffset,Rt.parentOffset);if(o.someProp("handleTextInput",Mn=>Mn(o,Gt,Jt,fn)))return;qt=o.state.tr.insertText(fn,Gt,Jt)}}if(qt||(qt=o.state.tr.replace(Gt,Jt,st.doc.slice(wt.start-st.from,wt.endB-st.from))),st.sel){let fn=resolveSelection(o,qt.doc,st.sel);fn&&!(chrome&&android&&o.composing&&fn.empty&&(wt.start!=wt.endB||o.input.lastAndroidDelete<Date.now()-100)&&(fn.head==Gt||fn.head==qt.mapping.map(Jt)-1)||ie$1&&fn.empty&&fn.head==Gt)&&qt.setSelection(fn)}Nt&&qt.ensureMarks(Nt),b&&qt.setMeta("composition",b),o.dispatch(qt.scrollIntoView())}function resolveSelection(o,e,s){return Math.max(s.anchor,s.head)>e.content.size?null:selectionBetween(o,e.resolve(s.anchor),e.resolve(s.head))}function isMarkChange(o,e){let s=o.firstChild.marks,a=e.firstChild.marks,d=s,b=a,_,_e,ot;for(let ct=0;ct<a.length;ct++)d=a[ct].removeFromSet(d);for(let ct=0;ct<s.length;ct++)b=s[ct].removeFromSet(b);if(d.length==1&&b.length==0)_e=d[0],_="add",ot=ct=>ct.mark(_e.addToSet(ct.marks));else if(d.length==0&&b.length==1)_e=b[0],_="remove",ot=ct=>ct.mark(_e.removeFromSet(ct.marks));else return null;let st=[];for(let ct=0;ct<e.childCount;ct++)st.push(ot(e.child(ct)));if(Fragment.from(st).eq(o))return{mark:_e,type:_}}function looksLikeBackspace(o,e,s,a,d){if(s-e<=d.pos-a.pos||skipClosingAndOpening(a,!0,!1)<d.pos)return!1;let b=o.resolve(e);if(!a.parent.isTextblock){let _e=b.nodeAfter;return _e!=null&&s==e+_e.nodeSize}if(b.parentOffset<b.parent.content.size||!b.parent.isTextblock)return!1;let _=o.resolve(skipClosingAndOpening(b,!0,!0));return!_.parent.isTextblock||_.pos>s||skipClosingAndOpening(_,!0,!1)<s?!1:a.parent.content.cut(a.parentOffset).eq(_.parent.content)}function skipClosingAndOpening(o,e,s){let a=o.depth,d=e?o.end():o.pos;for(;a>0&&(e||o.indexAfter(a)==o.node(a).childCount);)a--,d++,e=!1;if(s){let b=o.node(a).maybeChild(o.indexAfter(a));for(;b&&!b.isLeaf;)b=b.firstChild,d++}return d}function findDiff(o,e,s,a,d){let b=o.findDiffStart(e,s);if(b==null)return null;let{a:_,b:_e}=o.findDiffEnd(e,s+o.size,s+e.size);if(d=="end"){let ot=Math.max(0,b-Math.min(_,_e));a-=_+ot-b}if(_<b&&o.size<e.size){let ot=a<=b&&a>=_?b-a:0;b-=ot,b&&b<e.size&&isSurrogatePair(e.textBetween(b-1,b+1))&&(b+=ot?1:-1),_e=b+(_e-_),_=b}else if(_e<b){let ot=a<=b&&a>=_e?b-a:0;b-=ot,b&&b<o.size&&isSurrogatePair(o.textBetween(b-1,b+1))&&(b+=ot?1:-1),_=b+(_-_e),_e=b}return{start:b,endA:_,endB:_e}}function isSurrogatePair(o){if(o.length!=2)return!1;let e=o.charCodeAt(0),s=o.charCodeAt(1);return e>=56320&&e<=57343&&s>=55296&&s<=56319}class EditorView{constructor(e,s){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=s,this.state=s.state,this.directPlugins=s.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(a,d,b,_)=>readDOMChange(this,a,d,b,_)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let s in e)this._props[s]=e[s];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let s=this._props;this._props=e,e.plugins&&(e.plugins.forEach(checkStateComponent),this.directPlugins=e.plugins),this.updateStateInner(e.state,s)}setProps(e){let s={};for(let a in this._props)s[a]=this._props[a];s.state=this.state;for(let a in e)s[a]=e[a];this.update(s)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,s){var a;let d=this.state,b=!1,_=!1;e.storedMarks&&this.composing&&(clearComposition(this),_=!0),this.state=e;let _e=d.plugins!=e.plugins||this._props.plugins!=s.plugins;if(_e||this._props.plugins!=s.plugins||this._props.nodeViews!=s.nodeViews){let bt=buildNodeViews(this);changedNodeViews(bt,this.nodeViews)&&(this.nodeViews=bt,b=!0)}(_e||s.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let ot=viewDecorations(this),st=computeDocDeco(this),ct=d.plugins!=e.plugins&&!d.doc.eq(e.doc)?"reset":e.scrollToSelection>d.scrollToSelection?"to selection":"preserve",ft=b||!this.docView.matchesNode(e.doc,st,ot);(ft||!e.selection.eq(d.selection))&&(_=!0);let mt=ct=="preserve"&&_&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(_){this.domObserver.stop();let bt=ft&&(ie$1||chrome)&&!this.composing&&!d.selection.empty&&!e.selection.empty&&selectionContextChanged(d.selection,e.selection);if(ft){let wt=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(b||!this.docView.update(e.doc,st,ot,this))&&(this.docView.updateOuterDeco(st),this.docView.destroy(),this.docView=docViewDesc(e.doc,st,ot,this.dom,this)),wt&&!this.trackWrites&&(bt=!0)}bt||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,bt):(syncNodeSelection(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(d),!((a=this.dragging)===null||a===void 0)&&a.node&&!d.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,d),ct=="reset"?this.dom.scrollTop=0:ct=="to selection"?this.scrollToSelection():mt&&resetScrollPos(mt)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",s=>s(this)))if(this.state.selection instanceof NodeSelection){let s=this.docView.domAfterPos(this.state.selection.from);s.nodeType==1&&scrollRectIntoView(this,s.getBoundingClientRect(),e)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s];a.spec.view&&this.pluginViews.push(a.spec.view(this))}for(let s=0;s<this.state.plugins.length;s++){let a=this.state.plugins[s];a.spec.view&&this.pluginViews.push(a.spec.view(this))}}else for(let s=0;s<this.pluginViews.length;s++){let a=this.pluginViews[s];a.update&&a.update(this,e)}}updateDraggedNode(e,s){let a=e.node,d=-1;if(this.state.doc.nodeAt(a.from)==a.node)d=a.from;else{let b=a.from+(this.state.doc.content.size-s.doc.content.size);(b>0&&this.state.doc.nodeAt(b))==a.node&&(d=b)}this.dragging=new Dragging(e.slice,e.move,d<0?void 0:NodeSelection.create(this.state.doc,d))}someProp(e,s){let a=this._props&&this._props[e],d;if(a!=null&&(d=s?s(a):a))return d;for(let _=0;_<this.directPlugins.length;_++){let _e=this.directPlugins[_].props[e];if(_e!=null&&(d=s?s(_e):_e))return d}let b=this.state.plugins;if(b)for(let _=0;_<b.length;_++){let _e=b[_].props[e];if(_e!=null&&(d=s?s(_e):_e))return d}}hasFocus(){if(ie$1){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let s=this.dom.parentNode;s;s=s.parentNode)if(s.nodeType==9||s.nodeType==11&&s.host)return s.getSelection||(Object.getPrototypeOf(s).getSelection=()=>s.ownerDocument.getSelection()),this._root=s}return e||document}updateRoot(){this._root=null}posAtCoords(e){return posAtCoords(this,e)}coordsAtPos(e,s=1){return coordsAtPos(this,e,s)}domAtPos(e,s=0){return this.docView.domFromPos(e,s)}nodeDOM(e){let s=this.docView.descAt(e);return s?s.nodeDOM:null}posAtDOM(e,s,a=-1){let d=this.docView.posFromDOM(e,s,a);if(d==null)throw new RangeError("DOM position not inside the editor");return d}endOfTextblock(e,s){return endOfTextblock(this,s||this.state,e)}pasteHTML(e,s){return doPaste(this,"",e,!1,s||new ClipboardEvent("paste"))}pasteText(e,s){return doPaste(this,e,null,!0,s||new ClipboardEvent("paste"))}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return dispatchEvent(this,e)}dispatch(e){let s=this._props.dispatchTransaction;s?s.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function computeDocDeco(o){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(o.editable),o.someProp("attributes",s=>{if(typeof s=="function"&&(s=s(o.state)),s)for(let a in s)a=="class"?e.class+=" "+s[a]:a=="style"?e.style=(e.style?e.style+";":"")+s[a]:!e[a]&&a!="contenteditable"&&a!="nodeName"&&(e[a]=String(s[a]))}),e.translate||(e.translate="no"),[Decoration.node(0,o.state.doc.content.size,e)]}function updateCursorWrapper(o){if(o.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),o.cursorWrapper={dom:e,deco:Decoration.widget(o.state.selection.from,e,{raw:!0,marks:o.markCursor})}}else o.cursorWrapper=null}function getEditable(o){return!o.someProp("editable",e=>e(o.state)===!1)}function selectionContextChanged(o,e){let s=Math.min(o.$anchor.sharedDepth(o.head),e.$anchor.sharedDepth(e.head));return o.$anchor.start(s)!=e.$anchor.start(s)}function buildNodeViews(o){let e=Object.create(null);function s(a){for(let d in a)Object.prototype.hasOwnProperty.call(e,d)||(e[d]=a[d])}return o.someProp("nodeViews",s),o.someProp("markViews",s),e}function changedNodeViews(o,e){let s=0,a=0;for(let d in o){if(o[d]!=e[d])return!0;s++}for(let d in e)a++;return s!=a}function checkStateComponent(o){if(o.spec.state||o.spec.filterTransaction||o.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(o){var e=mac$1&&o.metaKey&&o.shiftKey&&!o.ctrlKey&&!o.altKey||ie&&o.shiftKey&&o.key&&o.key.length==1||o.key=="Unidentified",s=!e&&o.key||(o.shiftKey?shift:base)[o.keyCode]||o.key||"Unidentified";return s=="Esc"&&(s="Escape"),s=="Del"&&(s="Delete"),s=="Left"&&(s="ArrowLeft"),s=="Up"&&(s="ArrowUp"),s=="Right"&&(s="ArrowRight"),s=="Down"&&(s="ArrowDown"),s}const mac=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function normalizeKeyName$1(o){let e=o.split(/-(?!$)/),s=e[e.length-1];s=="Space"&&(s=" ");let a,d,b,_;for(let _e=0;_e<e.length-1;_e++){let ot=e[_e];if(/^(cmd|meta|m)$/i.test(ot))_=!0;else if(/^a(lt)?$/i.test(ot))a=!0;else if(/^(c|ctrl|control)$/i.test(ot))d=!0;else if(/^s(hift)?$/i.test(ot))b=!0;else if(/^mod$/i.test(ot))mac?_=!0:d=!0;else throw new Error("Unrecognized modifier name: "+ot)}return a&&(s="Alt-"+s),d&&(s="Ctrl-"+s),_&&(s="Meta-"+s),b&&(s="Shift-"+s),s}function normalize(o){let e=Object.create(null);for(let s in o)e[normalizeKeyName$1(s)]=o[s];return e}function modifiers(o,e,s=!0){return e.altKey&&(o="Alt-"+o),e.ctrlKey&&(o="Ctrl-"+o),e.metaKey&&(o="Meta-"+o),s&&e.shiftKey&&(o="Shift-"+o),o}function keymap(o){return new Plugin({props:{handleKeyDown:keydownHandler(o)}})}function keydownHandler(o){let e=normalize(o);return function(s,a){let d=keyName(a),b,_=e[modifiers(d,a)];if(_&&_(s.state,s.dispatch,s))return!0;if(d.length==1&&d!=" "){if(a.shiftKey){let _e=e[modifiers(d,a,!1)];if(_e&&_e(s.state,s.dispatch,s))return!0}if((a.shiftKey||a.altKey||a.metaKey||d.charCodeAt(0)>127)&&(b=base[a.keyCode])&&b!=d){let _e=e[modifiers(b,a)];if(_e&&_e(s.state,s.dispatch,s))return!0}}return!1}}const deleteSelection$1=(o,e)=>o.selection.empty?!1:(e&&e(o.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(o,e){let{$cursor:s}=o.selection;return!s||(e?!e.endOfTextblock("backward",o):s.parentOffset>0)?null:s}const joinBackward$1=(o,e,s)=>{let a=atBlockStart(o,s);if(!a)return!1;let d=findCutBefore(a);if(!d){let _=a.blockRange(),_e=_&&liftTarget(_);return _e==null?!1:(e&&e(o.tr.lift(_,_e).scrollIntoView()),!0)}let b=d.nodeBefore;if(deleteBarrier(o,d,e,-1))return!0;if(a.parent.content.size==0&&(textblockAt(b,"end")||NodeSelection.isSelectable(b)))for(let _=a.depth;;_--){let _e=replaceStep(o.doc,a.before(_),a.after(_),Slice.empty);if(_e&&_e.slice.size<_e.to-_e.from){if(e){let ot=o.tr.step(_e);ot.setSelection(textblockAt(b,"end")?Selection.findFrom(ot.doc.resolve(ot.mapping.map(d.pos,-1)),-1):NodeSelection.create(ot.doc,d.pos-b.nodeSize)),e(ot.scrollIntoView())}return!0}if(_==1||a.node(_-1).childCount>1)break}return b.isAtom&&d.depth==a.depth-1?(e&&e(o.tr.delete(d.pos-b.nodeSize,d.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(o,e,s)=>{let a=atBlockStart(o,s);if(!a)return!1;let d=findCutBefore(a);return d?joinTextblocksAround(o,d,e):!1},joinTextblockForward$1=(o,e,s)=>{let a=atBlockEnd(o,s);if(!a)return!1;let d=findCutAfter(a);return d?joinTextblocksAround(o,d,e):!1};function joinTextblocksAround(o,e,s){let a=e.nodeBefore,d=a,b=e.pos-1;for(;!d.isTextblock;b--){if(d.type.spec.isolating)return!1;let ct=d.lastChild;if(!ct)return!1;d=ct}let _=e.nodeAfter,_e=_,ot=e.pos+1;for(;!_e.isTextblock;ot++){if(_e.type.spec.isolating)return!1;let ct=_e.firstChild;if(!ct)return!1;_e=ct}let st=replaceStep(o.doc,b,ot,Slice.empty);if(!st||st.from!=b||st instanceof ReplaceStep&&st.slice.size>=ot-b)return!1;if(s){let ct=o.tr.step(st);ct.setSelection(TextSelection.create(ct.doc,b)),s(ct.scrollIntoView())}return!0}function textblockAt(o,e,s=!1){for(let a=o;a;a=e=="start"?a.firstChild:a.lastChild){if(a.isTextblock)return!0;if(s&&a.childCount!=1)return!1}return!1}const selectNodeBackward$1=(o,e,s)=>{let{$head:a,empty:d}=o.selection,b=a;if(!d)return!1;if(a.parent.isTextblock){if(s?!s.endOfTextblock("backward",o):a.parentOffset>0)return!1;b=findCutBefore(a)}let _=b&&b.nodeBefore;return!_||!NodeSelection.isSelectable(_)?!1:(e&&e(o.tr.setSelection(NodeSelection.create(o.doc,b.pos-_.nodeSize)).scrollIntoView()),!0)};function findCutBefore(o){if(!o.parent.type.spec.isolating)for(let e=o.depth-1;e>=0;e--){if(o.index(e)>0)return o.doc.resolve(o.before(e+1));if(o.node(e).type.spec.isolating)break}return null}function atBlockEnd(o,e){let{$cursor:s}=o.selection;return!s||(e?!e.endOfTextblock("forward",o):s.parentOffset<s.parent.content.size)?null:s}const joinForward$1=(o,e,s)=>{let a=atBlockEnd(o,s);if(!a)return!1;let d=findCutAfter(a);if(!d)return!1;let b=d.nodeAfter;if(deleteBarrier(o,d,e,1))return!0;if(a.parent.content.size==0&&(textblockAt(b,"start")||NodeSelection.isSelectable(b))){let _=replaceStep(o.doc,a.before(),a.after(),Slice.empty);if(_&&_.slice.size<_.to-_.from){if(e){let _e=o.tr.step(_);_e.setSelection(textblockAt(b,"start")?Selection.findFrom(_e.doc.resolve(_e.mapping.map(d.pos)),1):NodeSelection.create(_e.doc,_e.mapping.map(d.pos))),e(_e.scrollIntoView())}return!0}}return b.isAtom&&d.depth==a.depth-1?(e&&e(o.tr.delete(d.pos,d.pos+b.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(o,e,s)=>{let{$head:a,empty:d}=o.selection,b=a;if(!d)return!1;if(a.parent.isTextblock){if(s?!s.endOfTextblock("forward",o):a.parentOffset<a.parent.content.size)return!1;b=findCutAfter(a)}let _=b&&b.nodeAfter;return!_||!NodeSelection.isSelectable(_)?!1:(e&&e(o.tr.setSelection(NodeSelection.create(o.doc,b.pos)).scrollIntoView()),!0)};function findCutAfter(o){if(!o.parent.type.spec.isolating)for(let e=o.depth-1;e>=0;e--){let s=o.node(e);if(o.index(e)+1<s.childCount)return o.doc.resolve(o.after(e+1));if(s.type.spec.isolating)break}return null}const joinUp$1=(o,e)=>{let s=o.selection,a=s instanceof NodeSelection,d;if(a){if(s.node.isTextblock||!canJoin(o.doc,s.from))return!1;d=s.from}else if(d=joinPoint(o.doc,s.from,-1),d==null)return!1;if(e){let b=o.tr.join(d);a&&b.setSelection(NodeSelection.create(b.doc,d-o.doc.resolve(d).nodeBefore.nodeSize)),e(b.scrollIntoView())}return!0},joinDown$1=(o,e)=>{let s=o.selection,a;if(s instanceof NodeSelection){if(s.node.isTextblock||!canJoin(o.doc,s.to))return!1;a=s.to}else if(a=joinPoint(o.doc,s.to,1),a==null)return!1;return e&&e(o.tr.join(a).scrollIntoView()),!0},lift$1=(o,e)=>{let{$from:s,$to:a}=o.selection,d=s.blockRange(a),b=d&&liftTarget(d);return b==null?!1:(e&&e(o.tr.lift(d,b).scrollIntoView()),!0)},newlineInCode$1=(o,e)=>{let{$head:s,$anchor:a}=o.selection;return!s.parent.type.spec.code||!s.sameParent(a)?!1:(e&&e(o.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(o){for(let e=0;e<o.edgeCount;e++){let{type:s}=o.edge(e);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}const exitCode$1=(o,e)=>{let{$head:s,$anchor:a}=o.selection;if(!s.parent.type.spec.code||!s.sameParent(a))return!1;let d=s.node(-1),b=s.indexAfter(-1),_=defaultBlockAt$1(d.contentMatchAt(b));if(!_||!d.canReplaceWith(b,b,_))return!1;if(e){let _e=s.after(),ot=o.tr.replaceWith(_e,_e,_.createAndFill());ot.setSelection(Selection.near(ot.doc.resolve(_e),1)),e(ot.scrollIntoView())}return!0},createParagraphNear$1=(o,e)=>{let s=o.selection,{$from:a,$to:d}=s;if(s instanceof AllSelection||a.parent.inlineContent||d.parent.inlineContent)return!1;let b=defaultBlockAt$1(d.parent.contentMatchAt(d.indexAfter()));if(!b||!b.isTextblock)return!1;if(e){let _=(!a.parentOffset&&d.index()<d.parent.childCount?a:d).pos,_e=o.tr.insert(_,b.createAndFill());_e.setSelection(TextSelection.create(_e.doc,_+1)),e(_e.scrollIntoView())}return!0},liftEmptyBlock$1=(o,e)=>{let{$cursor:s}=o.selection;if(!s||s.parent.content.size)return!1;if(s.depth>1&&s.after()!=s.end(-1)){let b=s.before();if(canSplit(o.doc,b))return e&&e(o.tr.split(b).scrollIntoView()),!0}let a=s.blockRange(),d=a&&liftTarget(a);return d==null?!1:(e&&e(o.tr.lift(a,d).scrollIntoView()),!0)},selectParentNode$1=(o,e)=>{let{$from:s,to:a}=o.selection,d,b=s.sharedDepth(a);return b==0?!1:(d=s.before(b),e&&e(o.tr.setSelection(NodeSelection.create(o.doc,d))),!0)};function joinMaybeClear(o,e,s){let a=e.nodeBefore,d=e.nodeAfter,b=e.index();return!a||!d||!a.type.compatibleContent(d.type)?!1:!a.content.size&&e.parent.canReplace(b-1,b)?(s&&s(o.tr.delete(e.pos-a.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(b,b+1)||!(d.isTextblock||canJoin(o.doc,e.pos))?!1:(s&&s(o.tr.join(e.pos).scrollIntoView()),!0)}function deleteBarrier(o,e,s,a){let d=e.nodeBefore,b=e.nodeAfter,_,_e,ot=d.type.spec.isolating||b.type.spec.isolating;if(!ot&&joinMaybeClear(o,e,s))return!0;let st=!ot&&e.parent.canReplace(e.index(),e.index()+1);if(st&&(_=(_e=d.contentMatchAt(d.childCount)).findWrapping(b.type))&&_e.matchType(_[0]||b.type).validEnd){if(s){let bt=e.pos+b.nodeSize,wt=Fragment.empty;for(let It=_.length-1;It>=0;It--)wt=Fragment.from(_[It].create(null,wt));wt=Fragment.from(d.copy(wt));let Ct=o.tr.step(new ReplaceAroundStep(e.pos-1,bt,e.pos,bt,new Slice(wt,1,0),_.length,!0)),Rt=Ct.doc.resolve(bt+2*_.length);Rt.nodeAfter&&Rt.nodeAfter.type==d.type&&canJoin(Ct.doc,Rt.pos)&&Ct.join(Rt.pos),s(Ct.scrollIntoView())}return!0}let ct=b.type.spec.isolating||a>0&&ot?null:Selection.findFrom(e,1),ft=ct&&ct.$from.blockRange(ct.$to),mt=ft&&liftTarget(ft);if(mt!=null&&mt>=e.depth)return s&&s(o.tr.lift(ft,mt).scrollIntoView()),!0;if(st&&textblockAt(b,"start",!0)&&textblockAt(d,"end")){let bt=d,wt=[];for(;wt.push(bt),!bt.isTextblock;)bt=bt.lastChild;let Ct=b,Rt=1;for(;!Ct.isTextblock;Ct=Ct.firstChild)Rt++;if(bt.canReplace(bt.childCount,bt.childCount,Ct.content)){if(s){let It=Fragment.empty;for(let Tt=wt.length-1;Tt>=0;Tt--)It=Fragment.from(wt[Tt].copy(It));let Pt=o.tr.step(new ReplaceAroundStep(e.pos-wt.length,e.pos+b.nodeSize,e.pos+Rt,e.pos+b.nodeSize-Rt,new Slice(It,wt.length,0),0,!0));s(Pt.scrollIntoView())}return!0}}return!1}function selectTextblockSide(o){return function(e,s){let a=e.selection,d=o<0?a.$from:a.$to,b=d.depth;for(;d.node(b).isInline;){if(!b)return!1;b--}return d.node(b).isTextblock?(s&&s(e.tr.setSelection(TextSelection.create(e.doc,o<0?d.start(b):d.end(b)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(o,e=null){return function(s,a){let{$from:d,$to:b}=s.selection,_=d.blockRange(b),_e=_&&findWrapping(_,o,e);return _e?(a&&a(s.tr.wrap(_,_e).scrollIntoView()),!0):!1}}function setBlockType(o,e=null){return function(s,a){let d=!1;for(let b=0;b<s.selection.ranges.length&&!d;b++){let{$from:{pos:_},$to:{pos:_e}}=s.selection.ranges[b];s.doc.nodesBetween(_,_e,(ot,st)=>{if(d)return!1;if(!(!ot.isTextblock||ot.hasMarkup(o,e)))if(ot.type==o)d=!0;else{let ct=s.doc.resolve(st),ft=ct.index();d=ct.parent.canReplaceWith(ft,ft+1,o)}})}if(!d)return!1;if(a){let b=s.tr;for(let _=0;_<s.selection.ranges.length;_++){let{$from:{pos:_e},$to:{pos:ot}}=s.selection.ranges[_];b.setBlockType(_e,ot,o,e)}a(b.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(o,e=null){return function(s,a){let{$from:d,$to:b}=s.selection,_=d.blockRange(b),_e=!1,ot=_;if(!_)return!1;if(_.depth>=2&&d.node(_.depth-1).type.compatibleContent(o)&&_.startIndex==0){if(d.index(_.depth-1)==0)return!1;let ct=s.doc.resolve(_.start-2);ot=new NodeRange(ct,ct,_.depth),_.endIndex<_.parent.childCount&&(_=new NodeRange(d,s.doc.resolve(b.end(_.depth)),_.depth)),_e=!0}let st=findWrapping(ot,o,e,_);return st?(a&&a(doWrapInList(s.tr,_,st,_e,o).scrollIntoView()),!0):!1}}function doWrapInList(o,e,s,a,d){let b=Fragment.empty;for(let ct=s.length-1;ct>=0;ct--)b=Fragment.from(s[ct].type.create(s[ct].attrs,b));o.step(new ReplaceAroundStep(e.start-(a?2:0),e.end,e.start,e.end,new Slice(b,0,0),s.length,!0));let _=0;for(let ct=0;ct<s.length;ct++)s[ct].type==d&&(_=ct+1);let _e=s.length-_,ot=e.start+s.length-(a?2:0),st=e.parent;for(let ct=e.startIndex,ft=e.endIndex,mt=!0;ct<ft;ct++,mt=!1)!mt&&canSplit(o.doc,ot,_e)&&(o.split(ot,_e),ot+=2*_e),ot+=st.child(ct).nodeSize;return o}function liftListItem$1(o){return function(e,s){let{$from:a,$to:d}=e.selection,b=a.blockRange(d,_=>_.childCount>0&&_.firstChild.type==o);return b?s?a.node(b.depth-1).type==o?liftToOuterList(e,s,o,b):liftOutOfList(e,s,b):!0:!1}}function liftToOuterList(o,e,s,a){let d=o.tr,b=a.end,_=a.$to.end(a.depth);b<_&&(d.step(new ReplaceAroundStep(b-1,_,b,_,new Slice(Fragment.from(s.create(null,a.parent.copy())),1,0),1,!0)),a=new NodeRange(d.doc.resolve(a.$from.pos),d.doc.resolve(_),a.depth));const _e=liftTarget(a);if(_e==null)return!1;d.lift(a,_e);let ot=d.mapping.map(b,-1)-1;return canJoin(d.doc,ot)&&d.join(ot),e(d.scrollIntoView()),!0}function liftOutOfList(o,e,s){let a=o.tr,d=s.parent;for(let bt=s.end,wt=s.endIndex-1,Ct=s.startIndex;wt>Ct;wt--)bt-=d.child(wt).nodeSize,a.delete(bt-1,bt+1);let b=a.doc.resolve(s.start),_=b.nodeAfter;if(a.mapping.map(s.end)!=s.start+b.nodeAfter.nodeSize)return!1;let _e=s.startIndex==0,ot=s.endIndex==d.childCount,st=b.node(-1),ct=b.index(-1);if(!st.canReplace(ct+(_e?0:1),ct+1,_.content.append(ot?Fragment.empty:Fragment.from(d))))return!1;let ft=b.pos,mt=ft+_.nodeSize;return a.step(new ReplaceAroundStep(ft-(_e?1:0),mt+(ot?1:0),ft+1,mt-1,new Slice((_e?Fragment.empty:Fragment.from(d.copy(Fragment.empty))).append(ot?Fragment.empty:Fragment.from(d.copy(Fragment.empty))),_e?0:1,ot?0:1),_e?0:1)),e(a.scrollIntoView()),!0}function sinkListItem$1(o){return function(e,s){let{$from:a,$to:d}=e.selection,b=a.blockRange(d,st=>st.childCount>0&&st.firstChild.type==o);if(!b)return!1;let _=b.startIndex;if(_==0)return!1;let _e=b.parent,ot=_e.child(_-1);if(ot.type!=o)return!1;if(s){let st=ot.lastChild&&ot.lastChild.type==_e.type,ct=Fragment.from(st?o.create():null),ft=new Slice(Fragment.from(o.create(null,Fragment.from(_e.type.create(null,ct)))),st?3:1,0),mt=b.start,bt=b.end;s(e.tr.step(new ReplaceAroundStep(mt-(st?3:1),bt,mt,bt,ft,1,!0)).scrollIntoView())}return!0}}function createChainableState(o){const{state:e,transaction:s}=o;let{selection:a}=s,{doc:d}=s,{storedMarks:b}=s;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return b},get selection(){return a},get doc(){return d},get tr(){return a=s.selection,d=s.doc,b=s.storedMarks,s}}}class CommandManager{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:s,state:a}=this,{view:d}=s,{tr:b}=a,_=this.buildProps(b);return Object.fromEntries(Object.entries(e).map(([_e,ot])=>[_e,(...ct)=>{const ft=ot(...ct)(_);return!b.getMeta("preventDispatch")&&!this.hasCustomState&&d.dispatch(b),ft}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,s=!0){const{rawCommands:a,editor:d,state:b}=this,{view:_}=d,_e=[],ot=!!e,st=e||b.tr,ct=()=>(!ot&&s&&!st.getMeta("preventDispatch")&&!this.hasCustomState&&_.dispatch(st),_e.every(mt=>mt===!0)),ft={...Object.fromEntries(Object.entries(a).map(([mt,bt])=>[mt,(...Ct)=>{const Rt=this.buildProps(st,s),It=bt(...Ct)(Rt);return _e.push(It),ft}])),run:ct};return ft}createCan(e){const{rawCommands:s,state:a}=this,d=!1,b=e||a.tr,_=this.buildProps(b,d);return{...Object.fromEntries(Object.entries(s).map(([ot,st])=>[ot,(...ct)=>st(...ct)({..._,dispatch:void 0})])),chain:()=>this.createChain(b,d)}}buildProps(e,s=!0){const{rawCommands:a,editor:d,state:b}=this,{view:_}=d,_e={tr:e,editor:d,view:_,state:createChainableState({state:b,transaction:e}),dispatch:s?()=>{}:void 0,chain:()=>this.createChain(e,s),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(a).map(([ot,st])=>[ot,(...ct)=>st(...ct)(_e)]))}};return _e}}class EventEmitter{constructor(){this.callbacks={}}on(e,s){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(s),this}emit(e,...s){const a=this.callbacks[e];return a&&a.forEach(d=>d.apply(this,s)),this}off(e,s){const a=this.callbacks[e];return a&&(s?this.callbacks[e]=a.filter(d=>d!==s):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function getExtensionField(o,e,s){return o.config[e]===void 0&&o.parent?getExtensionField(o.parent,e,s):typeof o.config[e]=="function"?o.config[e].bind({...s,parent:o.parent?getExtensionField(o.parent,e,s):null}):o.config[e]}function splitExtensions(o){const e=o.filter(d=>d.type==="extension"),s=o.filter(d=>d.type==="node"),a=o.filter(d=>d.type==="mark");return{baseExtensions:e,nodeExtensions:s,markExtensions:a}}function getAttributesFromExtensions(o){const e=[],{nodeExtensions:s,markExtensions:a}=splitExtensions(o),d=[...s,...a],b={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return o.forEach(_=>{const _e={name:_.name,options:_.options,storage:_.storage,extensions:d},ot=getExtensionField(_,"addGlobalAttributes",_e);if(!ot)return;ot().forEach(ct=>{ct.types.forEach(ft=>{Object.entries(ct.attributes).forEach(([mt,bt])=>{e.push({type:ft,name:mt,attribute:{...b,...bt}})})})})}),d.forEach(_=>{const _e={name:_.name,options:_.options,storage:_.storage},ot=getExtensionField(_,"addAttributes",_e);if(!ot)return;const st=ot();Object.entries(st).forEach(([ct,ft])=>{const mt={...b,...ft};typeof(mt==null?void 0:mt.default)=="function"&&(mt.default=mt.default()),mt!=null&&mt.isRequired&&(mt==null?void 0:mt.default)===void 0&&delete mt.default,e.push({type:_.name,name:ct,attribute:mt})})}),e}function getNodeType(o,e){if(typeof o=="string"){if(!e.nodes[o])throw Error(`There is no node type named '${o}'. Maybe you forgot to add the extension?`);return e.nodes[o]}return o}function mergeAttributes(...o){return o.filter(e=>!!e).reduce((e,s)=>{const a={...e};return Object.entries(s).forEach(([d,b])=>{if(!a[d]){a[d]=b;return}if(d==="class"){const _e=b?b.split(" "):[],ot=a[d]?a[d].split(" "):[],st=_e.filter(ct=>!ot.includes(ct));a[d]=[...ot,...st].join(" ")}else if(d==="style"){const _e=b?b.split(";").map(ct=>ct.trim()).filter(Boolean):[],ot=a[d]?a[d].split(";").map(ct=>ct.trim()).filter(Boolean):[],st=new Map;ot.forEach(ct=>{const[ft,mt]=ct.split(":").map(bt=>bt.trim());st.set(ft,mt)}),_e.forEach(ct=>{const[ft,mt]=ct.split(":").map(bt=>bt.trim());st.set(ft,mt)}),a[d]=Array.from(st.entries()).map(([ct,ft])=>`${ct}: ${ft}`).join("; ")}else a[d]=b}),a},{})}function getRenderedAttributes(o,e){return e.filter(s=>s.type===o.type.name).filter(s=>s.attribute.rendered).map(s=>s.attribute.renderHTML?s.attribute.renderHTML(o.attrs)||{}:{[s.name]:o.attrs[s.name]}).reduce((s,a)=>mergeAttributes(s,a),{})}function isFunction(o){return typeof o=="function"}function callOrReturn(o,e=void 0,...s){return isFunction(o)?e?o.bind(e)(...s):o(...s):o}function isEmptyObject(o={}){return Object.keys(o).length===0&&o.constructor===Object}function fromString(o){return typeof o!="string"?o:o.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(o):o==="true"?!0:o==="false"?!1:o}function injectExtensionAttributesToParseRule(o,e){return"style"in o?o:{...o,getAttrs:s=>{const a=o.getAttrs?o.getAttrs(s):o.attrs;if(a===!1)return!1;const d=e.reduce((b,_)=>{const _e=_.attribute.parseHTML?_.attribute.parseHTML(s):fromString(s.getAttribute(_.name));return _e==null?b:{...b,[_.name]:_e}},{});return{...a,...d}}}}function cleanUpSchemaItem(o){return Object.fromEntries(Object.entries(o).filter(([e,s])=>e==="attrs"&&isEmptyObject(s)?!1:s!=null))}function getSchemaByResolvedExtensions(o,e){var s;const a=getAttributesFromExtensions(o),{nodeExtensions:d,markExtensions:b}=splitExtensions(o),_=(s=d.find(st=>getExtensionField(st,"topNode")))===null||s===void 0?void 0:s.name,_e=Object.fromEntries(d.map(st=>{const ct=a.filter(It=>It.type===st.name),ft={name:st.name,options:st.options,storage:st.storage,editor:e},mt=o.reduce((It,Pt)=>{const Tt=getExtensionField(Pt,"extendNodeSchema",ft);return{...It,...Tt?Tt(st):{}}},{}),bt=cleanUpSchemaItem({...mt,content:callOrReturn(getExtensionField(st,"content",ft)),marks:callOrReturn(getExtensionField(st,"marks",ft)),group:callOrReturn(getExtensionField(st,"group",ft)),inline:callOrReturn(getExtensionField(st,"inline",ft)),atom:callOrReturn(getExtensionField(st,"atom",ft)),selectable:callOrReturn(getExtensionField(st,"selectable",ft)),draggable:callOrReturn(getExtensionField(st,"draggable",ft)),code:callOrReturn(getExtensionField(st,"code",ft)),whitespace:callOrReturn(getExtensionField(st,"whitespace",ft)),defining:callOrReturn(getExtensionField(st,"defining",ft)),isolating:callOrReturn(getExtensionField(st,"isolating",ft)),attrs:Object.fromEntries(ct.map(It=>{var Pt;return[It.name,{default:(Pt=It==null?void 0:It.attribute)===null||Pt===void 0?void 0:Pt.default}]}))}),wt=callOrReturn(getExtensionField(st,"parseHTML",ft));wt&&(bt.parseDOM=wt.map(It=>injectExtensionAttributesToParseRule(It,ct)));const Ct=getExtensionField(st,"renderHTML",ft);Ct&&(bt.toDOM=It=>Ct({node:It,HTMLAttributes:getRenderedAttributes(It,ct)}));const Rt=getExtensionField(st,"renderText",ft);return Rt&&(bt.toText=Rt),[st.name,bt]})),ot=Object.fromEntries(b.map(st=>{const ct=a.filter(Rt=>Rt.type===st.name),ft={name:st.name,options:st.options,storage:st.storage,editor:e},mt=o.reduce((Rt,It)=>{const Pt=getExtensionField(It,"extendMarkSchema",ft);return{...Rt,...Pt?Pt(st):{}}},{}),bt=cleanUpSchemaItem({...mt,inclusive:callOrReturn(getExtensionField(st,"inclusive",ft)),excludes:callOrReturn(getExtensionField(st,"excludes",ft)),group:callOrReturn(getExtensionField(st,"group",ft)),spanning:callOrReturn(getExtensionField(st,"spanning",ft)),code:callOrReturn(getExtensionField(st,"code",ft)),attrs:Object.fromEntries(ct.map(Rt=>{var It;return[Rt.name,{default:(It=Rt==null?void 0:Rt.attribute)===null||It===void 0?void 0:It.default}]}))}),wt=callOrReturn(getExtensionField(st,"parseHTML",ft));wt&&(bt.parseDOM=wt.map(Rt=>injectExtensionAttributesToParseRule(Rt,ct)));const Ct=getExtensionField(st,"renderHTML",ft);return Ct&&(bt.toDOM=Rt=>Ct({mark:Rt,HTMLAttributes:getRenderedAttributes(Rt,ct)})),[st.name,bt]}));return new Schema({topNode:_,nodes:_e,marks:ot})}function getSchemaTypeByName(o,e){return e.nodes[o]||e.marks[o]||null}function isExtensionRulesEnabled(o,e){return Array.isArray(e)?e.some(s=>(typeof s=="string"?s:s.name)===o.name):e}const getTextContentFromNodes=(o,e=500)=>{let s="";const a=o.parentOffset;return o.parent.nodesBetween(Math.max(0,a-e),a,(d,b,_,_e)=>{var ot,st;const ct=((st=(ot=d.type.spec).toText)===null||st===void 0?void 0:st.call(ot,{node:d,pos:b,parent:_,index:_e}))||d.textContent||"%leaf%";s+=d.isAtom&&!d.isText?ct:ct.slice(0,Math.max(0,a-b))}),s};function isRegExp(o){return Object.prototype.toString.call(o)==="[object RegExp]"}class InputRule{constructor(e){this.find=e.find,this.handler=e.handler}}const inputRuleMatcherHandler=(o,e)=>{if(isRegExp(e))return e.exec(o);const s=e(o);if(!s)return null;const a=[s.text];return a.index=s.index,a.input=o,a.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),a.push(s.replaceWith)),a};function run$1$1(o){var e;const{editor:s,from:a,to:d,text:b,rules:_,plugin:_e}=o,{view:ot}=s;if(ot.composing)return!1;const st=ot.state.doc.resolve(a);if(st.parent.type.spec.code||!((e=st.nodeBefore||st.nodeAfter)===null||e===void 0)&&e.marks.find(mt=>mt.type.spec.code))return!1;let ct=!1;const ft=getTextContentFromNodes(st)+b;return _.forEach(mt=>{if(ct)return;const bt=inputRuleMatcherHandler(ft,mt.find);if(!bt)return;const wt=ot.state.tr,Ct=createChainableState({state:ot.state,transaction:wt}),Rt={from:a-(bt[0].length-b.length),to:d},{commands:It,chain:Pt,can:Tt}=new CommandManager({editor:s,state:Ct});mt.handler({state:Ct,range:Rt,match:bt,commands:It,chain:Pt,can:Tt})===null||!wt.steps.length||(wt.setMeta(_e,{transform:wt,from:a,to:d,text:b}),ot.dispatch(wt),ct=!0)}),ct}function inputRulesPlugin(o){const{editor:e,rules:s}=o,a=new Plugin({state:{init(){return null},apply(d,b){const _=d.getMeta(a);if(_)return _;const _e=d.getMeta("applyInputRules");return!!_e&&setTimeout(()=>{const{from:st,text:ct}=_e,ft=st+ct.length;run$1$1({editor:e,from:st,to:ft,text:ct,rules:s,plugin:a})}),d.selectionSet||d.docChanged?null:b}},props:{handleTextInput(d,b,_,_e){return run$1$1({editor:e,from:b,to:_,text:_e,rules:s,plugin:a})},handleDOMEvents:{compositionend:d=>(setTimeout(()=>{const{$cursor:b}=d.state.selection;b&&run$1$1({editor:e,from:b.pos,to:b.pos,text:"",rules:s,plugin:a})}),!1)},handleKeyDown(d,b){if(b.key!=="Enter")return!1;const{$cursor:_}=d.state.selection;return _?run$1$1({editor:e,from:_.pos,to:_.pos,text:`
`,rules:s,plugin:a}):!1}},isInputRules:!0});return a}function getType(o){return Object.prototype.toString.call(o).slice(8,-1)}function isPlainObject(o){return getType(o)!=="Object"?!1:o.constructor===Object&&Object.getPrototypeOf(o)===Object.prototype}function mergeDeep(o,e){const s={...o};return isPlainObject(o)&&isPlainObject(e)&&Object.keys(e).forEach(a=>{isPlainObject(e[a])&&isPlainObject(o[a])?s[a]=mergeDeep(o[a],e[a]):s[a]=e[a]}),s}class Mark{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Mark(e)}configure(e={}){const s=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return s.name=this.name,s.parent=this.parent,s}extend(e={}){const s=new Mark(e);return s.parent=this,this.child=s,s.name=e.name?e.name:s.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=callOrReturn(getExtensionField(s,"addOptions",{name:s.name})),s.storage=callOrReturn(getExtensionField(s,"addStorage",{name:s.name,options:s.options})),s}static handleExit({editor:e,mark:s}){const{tr:a}=e.state,d=e.state.selection.$from;if(d.pos===d.end()){const _=d.marks();if(!!!_.find(st=>(st==null?void 0:st.type.name)===s.name))return!1;const ot=_.find(st=>(st==null?void 0:st.type.name)===s.name);return ot&&a.removeStoredMark(ot),a.insertText(" ",d.pos),e.view.dispatch(a),!0}return!1}}function isNumber(o){return typeof o=="number"}class PasteRule{constructor(e){this.find=e.find,this.handler=e.handler}}const pasteRuleMatcherHandler=(o,e,s)=>{if(isRegExp(e))return[...o.matchAll(e)];const a=e(o,s);return a?a.map(d=>{const b=[d.text];return b.index=d.index,b.input=o,b.data=d.data,d.replaceWith&&(d.text.includes(d.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),b.push(d.replaceWith)),b}):[]};function run$2(o){const{editor:e,state:s,from:a,to:d,rule:b,pasteEvent:_,dropEvent:_e}=o,{commands:ot,chain:st,can:ct}=new CommandManager({editor:e,state:s}),ft=[];return s.doc.nodesBetween(a,d,(bt,wt)=>{if(!bt.isTextblock||bt.type.spec.code)return;const Ct=Math.max(a,wt),Rt=Math.min(d,wt+bt.content.size),It=bt.textBetween(Ct-wt,Rt-wt,void 0,"");pasteRuleMatcherHandler(It,b.find,_).forEach(Tt=>{if(Tt.index===void 0)return;const Gt=Ct+Tt.index+1,Jt=Gt+Tt[0].length,qt={from:s.tr.mapping.map(Gt),to:s.tr.mapping.map(Jt)},Nt=b.handler({state:s,range:qt,match:Tt,commands:ot,chain:st,can:ct,pasteEvent:_,dropEvent:_e});ft.push(Nt)})}),ft.every(bt=>bt!==null)}const createClipboardPasteEvent=o=>{var e;const s=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=s.clipboardData)===null||e===void 0||e.setData("text/html",o),s};function pasteRulesPlugin(o){const{editor:e,rules:s}=o;let a=null,d=!1,b=!1,_=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,_e=typeof DragEvent<"u"?new DragEvent("drop"):null;const ot=({state:ct,from:ft,to:mt,rule:bt,pasteEvt:wt})=>{const Ct=ct.tr,Rt=createChainableState({state:ct,transaction:Ct});if(!(!run$2({editor:e,state:Rt,from:Math.max(ft-1,0),to:mt.b-1,rule:bt,pasteEvent:wt,dropEvent:_e})||!Ct.steps.length))return _e=typeof DragEvent<"u"?new DragEvent("drop"):null,_=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,Ct};return s.map(ct=>new Plugin({view(ft){const mt=bt=>{var wt;a=!((wt=ft.dom.parentElement)===null||wt===void 0)&&wt.contains(bt.target)?ft.dom.parentElement:null};return window.addEventListener("dragstart",mt),{destroy(){window.removeEventListener("dragstart",mt)}}},props:{handleDOMEvents:{drop:(ft,mt)=>(b=a===ft.dom.parentElement,_e=mt,!1),paste:(ft,mt)=>{var bt;const wt=(bt=mt.clipboardData)===null||bt===void 0?void 0:bt.getData("text/html");return _=mt,d=!!(wt!=null&&wt.includes("data-pm-slice")),!1}}},appendTransaction:(ft,mt,bt)=>{const wt=ft[0],Ct=wt.getMeta("uiEvent")==="paste"&&!d,Rt=wt.getMeta("uiEvent")==="drop"&&!b,It=wt.getMeta("applyPasteRules"),Pt=!!It;if(!Ct&&!Rt&&!Pt)return;if(Pt){const{from:Jt,text:qt}=It,Nt=Jt+qt.length,Qt=createClipboardPasteEvent(qt);return ot({rule:ct,state:bt,from:Jt,to:{b:Nt},pasteEvt:Qt})}const Tt=mt.doc.content.findDiffStart(bt.doc.content),Gt=mt.doc.content.findDiffEnd(bt.doc.content);if(!(!isNumber(Tt)||!Gt||Tt===Gt.b))return ot({rule:ct,state:bt,from:Tt,to:Gt,pasteEvt:_})}}))}function findDuplicates(o){const e=o.filter((s,a)=>o.indexOf(s)!==a);return Array.from(new Set(e))}class ExtensionManager{constructor(e,s){this.splittableMarks=[],this.editor=s,this.extensions=ExtensionManager.resolve(e),this.schema=getSchemaByResolvedExtensions(this.extensions,s),this.setupExtensions()}static resolve(e){const s=ExtensionManager.sort(ExtensionManager.flatten(e)),a=findDuplicates(s.map(d=>d.name));return a.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${a.map(d=>`'${d}'`).join(", ")}]. This can lead to issues.`),s}static flatten(e){return e.map(s=>{const a={name:s.name,options:s.options,storage:s.storage},d=getExtensionField(s,"addExtensions",a);return d?[s,...this.flatten(d())]:s}).flat(10)}static sort(e){return e.sort((a,d)=>{const b=getExtensionField(a,"priority")||100,_=getExtensionField(d,"priority")||100;return b>_?-1:b<_?1:0})}get commands(){return this.extensions.reduce((e,s)=>{const a={name:s.name,options:s.options,storage:s.storage,editor:this.editor,type:getSchemaTypeByName(s.name,this.schema)},d=getExtensionField(s,"addCommands",a);return d?{...e,...d()}:e},{})}get plugins(){const{editor:e}=this,s=ExtensionManager.sort([...this.extensions].reverse()),a=[],d=[],b=s.map(_=>{const _e={name:_.name,options:_.options,storage:_.storage,editor:e,type:getSchemaTypeByName(_.name,this.schema)},ot=[],st=getExtensionField(_,"addKeyboardShortcuts",_e);let ct={};if(_.type==="mark"&&getExtensionField(_,"exitable",_e)&&(ct.ArrowRight=()=>Mark.handleExit({editor:e,mark:_})),st){const Ct=Object.fromEntries(Object.entries(st()).map(([Rt,It])=>[Rt,()=>It({editor:e})]));ct={...ct,...Ct}}const ft=keymap(ct);ot.push(ft);const mt=getExtensionField(_,"addInputRules",_e);isExtensionRulesEnabled(_,e.options.enableInputRules)&&mt&&a.push(...mt());const bt=getExtensionField(_,"addPasteRules",_e);isExtensionRulesEnabled(_,e.options.enablePasteRules)&&bt&&d.push(...bt());const wt=getExtensionField(_,"addProseMirrorPlugins",_e);if(wt){const Ct=wt();ot.push(...Ct)}return ot}).flat();return[inputRulesPlugin({editor:e,rules:a}),...pasteRulesPlugin({editor:e,rules:d}),...b]}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:s}=splitExtensions(this.extensions);return Object.fromEntries(s.filter(a=>!!getExtensionField(a,"addNodeView")).map(a=>{const d=this.attributes.filter(ot=>ot.type===a.name),b={name:a.name,options:a.options,storage:a.storage,editor:e,type:getNodeType(a.name,this.schema)},_=getExtensionField(a,"addNodeView",b);if(!_)return[];const _e=(ot,st,ct,ft,mt)=>{const bt=getRenderedAttributes(ot,d);return _()({node:ot,view:st,getPos:ct,decorations:ft,innerDecorations:mt,editor:e,extension:a,HTMLAttributes:bt})};return[a.name,_e]}))}setupExtensions(){this.extensions.forEach(e=>{var s;this.editor.extensionStorage[e.name]=e.storage;const a={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:getSchemaTypeByName(e.name,this.schema)};e.type==="mark"&&(!((s=callOrReturn(getExtensionField(e,"keepOnSplit",a)))!==null&&s!==void 0)||s)&&this.splittableMarks.push(e.name);const d=getExtensionField(e,"onBeforeCreate",a),b=getExtensionField(e,"onCreate",a),_=getExtensionField(e,"onUpdate",a),_e=getExtensionField(e,"onSelectionUpdate",a),ot=getExtensionField(e,"onTransaction",a),st=getExtensionField(e,"onFocus",a),ct=getExtensionField(e,"onBlur",a),ft=getExtensionField(e,"onDestroy",a);d&&this.editor.on("beforeCreate",d),b&&this.editor.on("create",b),_&&this.editor.on("update",_),_e&&this.editor.on("selectionUpdate",_e),ot&&this.editor.on("transaction",ot),st&&this.editor.on("focus",st),ct&&this.editor.on("blur",ct),ft&&this.editor.on("destroy",ft)})}}class Extension{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Extension(e)}configure(e={}){const s=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return s.name=this.name,s.parent=this.parent,s}extend(e={}){const s=new Extension({...this.config,...e});return s.parent=this,this.child=s,s.name=e.name?e.name:s.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=callOrReturn(getExtensionField(s,"addOptions",{name:s.name})),s.storage=callOrReturn(getExtensionField(s,"addStorage",{name:s.name,options:s.options})),s}}function getTextBetween(o,e,s){const{from:a,to:d}=e,{blockSeparator:b=`

`,textSerializers:_={}}=s||{};let _e="";return o.nodesBetween(a,d,(ot,st,ct,ft)=>{var mt;ot.isBlock&&st>a&&(_e+=b);const bt=_==null?void 0:_[ot.type.name];if(bt)return ct&&(_e+=bt({node:ot,pos:st,parent:ct,index:ft,range:e})),!1;ot.isText&&(_e+=(mt=ot==null?void 0:ot.text)===null||mt===void 0?void 0:mt.slice(Math.max(a,st)-st,d-st))}),_e}function getTextSerializersFromSchema(o){return Object.fromEntries(Object.entries(o.nodes).filter(([,e])=>e.spec.toText).map(([e,s])=>[e,s.spec.toText]))}const ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:o}=this,{state:e,schema:s}=o,{doc:a,selection:d}=e,{ranges:b}=d,_=Math.min(...b.map(ct=>ct.$from.pos)),_e=Math.max(...b.map(ct=>ct.$to.pos)),ot=getTextSerializersFromSchema(s);return getTextBetween(a,{from:_,to:_e},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:ot})}}})]}}),blur=()=>({editor:o,view:e})=>(requestAnimationFrame(()=>{var s;o.isDestroyed||(e.dom.blur(),(s=window==null?void 0:window.getSelection())===null||s===void 0||s.removeAllRanges())}),!0),clearContent=(o=!1)=>({commands:e})=>e.setContent("",o),clearNodes=()=>({state:o,tr:e,dispatch:s})=>{const{selection:a}=e,{ranges:d}=a;return s&&d.forEach(({$from:b,$to:_})=>{o.doc.nodesBetween(b.pos,_.pos,(_e,ot)=>{if(_e.type.isText)return;const{doc:st,mapping:ct}=e,ft=st.resolve(ct.map(ot)),mt=st.resolve(ct.map(ot+_e.nodeSize)),bt=ft.blockRange(mt);if(!bt)return;const wt=liftTarget(bt);if(_e.type.isTextblock){const{defaultType:Ct}=ft.parent.contentMatchAt(ft.index());e.setNodeMarkup(bt.start,Ct)}(wt||wt===0)&&e.lift(bt,wt)})}),!0},command=o=>e=>o(e),createParagraphNear=()=>({state:o,dispatch:e})=>createParagraphNear$1(o,e),cut=(o,e)=>({editor:s,tr:a})=>{const{state:d}=s,b=d.doc.slice(o.from,o.to);a.deleteRange(o.from,o.to);const _=a.mapping.map(e);return a.insert(_,b.content),a.setSelection(new TextSelection(a.doc.resolve(_-1))),!0},deleteCurrentNode=()=>({tr:o,dispatch:e})=>{const{selection:s}=o,a=s.$anchor.node();if(a.content.size>0)return!1;const d=o.selection.$anchor;for(let b=d.depth;b>0;b-=1)if(d.node(b).type===a.type){if(e){const _e=d.before(b),ot=d.after(b);o.delete(_e,ot).scrollIntoView()}return!0}return!1},deleteNode=o=>({tr:e,state:s,dispatch:a})=>{const d=getNodeType(o,s.schema),b=e.selection.$anchor;for(let _=b.depth;_>0;_-=1)if(b.node(_).type===d){if(a){const ot=b.before(_),st=b.after(_);e.delete(ot,st).scrollIntoView()}return!0}return!1},deleteRange=o=>({tr:e,dispatch:s})=>{const{from:a,to:d}=o;return s&&e.delete(a,d),!0},deleteSelection=()=>({state:o,dispatch:e})=>deleteSelection$1(o,e),enter=()=>({commands:o})=>o.keyboardShortcut("Enter"),exitCode=()=>({state:o,dispatch:e})=>exitCode$1(o,e);function objectIncludes(o,e,s={strict:!0}){const a=Object.keys(e);return a.length?a.every(d=>s.strict?e[d]===o[d]:isRegExp(e[d])?e[d].test(o[d]):e[d]===o[d]):!0}function findMarkInSet(o,e,s={}){return o.find(a=>a.type===e&&objectIncludes(a.attrs,s))}function isMarkInSet(o,e,s={}){return!!findMarkInSet(o,e,s)}function getMarkRange(o,e,s={}){if(!o||!e)return;let a=o.parent.childAfter(o.parentOffset);if((!a.node||!a.node.marks.some(st=>st.type===e))&&(a=o.parent.childBefore(o.parentOffset)),!a.node||!a.node.marks.some(st=>st.type===e))return;const d=findMarkInSet([...a.node.marks],e,s);if(!d)return;let b=a.index,_=o.start()+a.offset,_e=b+1,ot=_+a.node.nodeSize;for(findMarkInSet([...a.node.marks],e,s);b>0&&d.isInSet(o.parent.child(b-1).marks);)b-=1,_-=o.parent.child(b).nodeSize;for(;_e<o.parent.childCount&&isMarkInSet([...o.parent.child(_e).marks],e,s);)ot+=o.parent.child(_e).nodeSize,_e+=1;return{from:_,to:ot}}function getMarkType(o,e){if(typeof o=="string"){if(!e.marks[o])throw Error(`There is no mark type named '${o}'. Maybe you forgot to add the extension?`);return e.marks[o]}return o}const extendMarkRange=(o,e={})=>({tr:s,state:a,dispatch:d})=>{const b=getMarkType(o,a.schema),{doc:_,selection:_e}=s,{$from:ot,from:st,to:ct}=_e;if(d){const ft=getMarkRange(ot,b,e);if(ft&&ft.from<=st&&ft.to>=ct){const mt=TextSelection.create(_,ft.from,ft.to);s.setSelection(mt)}}return!0},first=o=>e=>{const s=typeof o=="function"?o(e):o;for(let a=0;a<s.length;a+=1)if(s[a](e))return!0;return!1};function isTextSelection(o){return o instanceof TextSelection}function minMax(o=0,e=0,s=0){return Math.min(Math.max(o,e),s)}function resolveFocusPosition(o,e=null){if(!e)return null;const s=Selection.atStart(o),a=Selection.atEnd(o);if(e==="start"||e===!0)return s;if(e==="end")return a;const d=s.from,b=a.to;return e==="all"?TextSelection.create(o,minMax(0,d,b),minMax(o.content.size,d,b)):TextSelection.create(o,minMax(e,d,b),minMax(e,d,b))}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const focus=(o=null,e={})=>({editor:s,view:a,tr:d,dispatch:b})=>{e={scrollIntoView:!0,...e};const _=()=>{isiOS()&&a.dom.focus(),requestAnimationFrame(()=>{s.isDestroyed||(a.focus(),e!=null&&e.scrollIntoView&&s.commands.scrollIntoView())})};if(a.hasFocus()&&o===null||o===!1)return!0;if(b&&o===null&&!isTextSelection(s.state.selection))return _(),!0;const _e=resolveFocusPosition(d.doc,o)||s.state.selection,ot=s.state.selection.eq(_e);return b&&(ot||d.setSelection(_e),ot&&d.storedMarks&&d.setStoredMarks(d.storedMarks),_()),!0},forEach=(o,e)=>s=>o.every((a,d)=>e(a,{...s,index:d})),insertContent=(o,e)=>({tr:s,commands:a})=>a.insertContentAt({from:s.selection.from,to:s.selection.to},o,e),removeWhitespaces=o=>{const e=o.childNodes;for(let s=e.length-1;s>=0;s-=1){const a=e[s];a.nodeType===3&&a.nodeValue&&/^(\n\s\s|\n)$/.test(a.nodeValue)?o.removeChild(a):a.nodeType===1&&removeWhitespaces(a)}return o};function elementFromString(o){const e=`<body>${o}</body>`,s=new window.DOMParser().parseFromString(e,"text/html").body;return removeWhitespaces(s)}function createNodeFromContent(o,e,s){s={slice:!0,parseOptions:{},...s};const a=typeof o=="object"&&o!==null,d=typeof o=="string";if(a)try{if(Array.isArray(o)&&o.length>0)return Fragment.fromArray(o.map(_e=>e.nodeFromJSON(_e)));const _=e.nodeFromJSON(o);return s.errorOnInvalidContent&&_.check(),_}catch(b){if(s.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:b});return console.warn("[tiptap warn]: Invalid content.","Passed value:",o,"Error:",b),createNodeFromContent("",e,s)}if(d){if(s.errorOnInvalidContent){let _=!1,_e="";const ot=new Schema({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:st=>(_=!0,_e=typeof st=="string"?st:st.outerHTML,null)}]}})});if(s.slice?DOMParser$1.fromSchema(ot).parseSlice(elementFromString(o),s.parseOptions):DOMParser$1.fromSchema(ot).parse(elementFromString(o),s.parseOptions),s.errorOnInvalidContent&&_)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${_e}`)})}const b=DOMParser$1.fromSchema(e);return s.slice?b.parseSlice(elementFromString(o),s.parseOptions).content:b.parse(elementFromString(o),s.parseOptions)}return createNodeFromContent("",e,s)}function selectionToInsertionEnd(o,e,s){const a=o.steps.length-1;if(a<e)return;const d=o.steps[a];if(!(d instanceof ReplaceStep||d instanceof ReplaceAroundStep))return;const b=o.mapping.maps[a];let _=0;b.forEach((_e,ot,st,ct)=>{_===0&&(_=ct)}),o.setSelection(Selection.near(o.doc.resolve(_),s))}const isFragment=o=>!("type"in o),insertContentAt=(o,e,s)=>({tr:a,dispatch:d,editor:b})=>{var _;if(d){s={parseOptions:b.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...s};let _e;try{_e=createNodeFromContent(e,b.schema,{parseOptions:{preserveWhitespace:"full",...s.parseOptions},errorOnInvalidContent:(_=s.errorOnInvalidContent)!==null&&_!==void 0?_:b.options.enableContentCheck})}catch(wt){return b.emit("contentError",{editor:b,error:wt,disableCollaboration:()=>{b.storage.collaboration&&(b.storage.collaboration.isDisabled=!0)}}),!1}let{from:ot,to:st}=typeof o=="number"?{from:o,to:o}:{from:o.from,to:o.to},ct=!0,ft=!0;if((isFragment(_e)?_e:[_e]).forEach(wt=>{wt.check(),ct=ct?wt.isText&&wt.marks.length===0:!1,ft=ft?wt.isBlock:!1}),ot===st&&ft){const{parent:wt}=a.doc.resolve(ot);wt.isTextblock&&!wt.type.spec.code&&!wt.childCount&&(ot-=1,st+=1)}let bt;ct?(Array.isArray(e)?bt=e.map(wt=>wt.text||"").join(""):typeof e=="object"&&e&&e.text?bt=e.text:bt=e,a.insertText(bt,ot,st)):(bt=_e,a.replaceWith(ot,st,bt)),s.updateSelection&&selectionToInsertionEnd(a,a.steps.length-1,-1),s.applyInputRules&&a.setMeta("applyInputRules",{from:ot,text:bt}),s.applyPasteRules&&a.setMeta("applyPasteRules",{from:ot,text:bt})}return!0},joinUp=()=>({state:o,dispatch:e})=>joinUp$1(o,e),joinDown=()=>({state:o,dispatch:e})=>joinDown$1(o,e),joinBackward=()=>({state:o,dispatch:e})=>joinBackward$1(o,e),joinForward=()=>({state:o,dispatch:e})=>joinForward$1(o,e),joinItemBackward=()=>({state:o,dispatch:e,tr:s})=>{try{const a=joinPoint(o.doc,o.selection.$from.pos,-1);return a==null?!1:(s.join(a,2),e&&e(s),!0)}catch{return!1}},joinItemForward=()=>({state:o,dispatch:e,tr:s})=>{try{const a=joinPoint(o.doc,o.selection.$from.pos,1);return a==null?!1:(s.join(a,2),e&&e(s),!0)}catch{return!1}},joinTextblockBackward=()=>({state:o,dispatch:e})=>joinTextblockBackward$1(o,e),joinTextblockForward=()=>({state:o,dispatch:e})=>joinTextblockForward$1(o,e);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(o){const e=o.split(/-(?!$)/);let s=e[e.length-1];s==="Space"&&(s=" ");let a,d,b,_;for(let _e=0;_e<e.length-1;_e+=1){const ot=e[_e];if(/^(cmd|meta|m)$/i.test(ot))_=!0;else if(/^a(lt)?$/i.test(ot))a=!0;else if(/^(c|ctrl|control)$/i.test(ot))d=!0;else if(/^s(hift)?$/i.test(ot))b=!0;else if(/^mod$/i.test(ot))isiOS()||isMacOS()?_=!0:d=!0;else throw new Error(`Unrecognized modifier name: ${ot}`)}return a&&(s=`Alt-${s}`),d&&(s=`Ctrl-${s}`),_&&(s=`Meta-${s}`),b&&(s=`Shift-${s}`),s}const keyboardShortcut=o=>({editor:e,view:s,tr:a,dispatch:d})=>{const b=normalizeKeyName(o).split(/-(?!$)/),_=b.find(st=>!["Alt","Ctrl","Meta","Shift"].includes(st)),_e=new KeyboardEvent("keydown",{key:_==="Space"?" ":_,altKey:b.includes("Alt"),ctrlKey:b.includes("Ctrl"),metaKey:b.includes("Meta"),shiftKey:b.includes("Shift"),bubbles:!0,cancelable:!0}),ot=e.captureTransaction(()=>{s.someProp("handleKeyDown",st=>st(s,_e))});return ot==null||ot.steps.forEach(st=>{const ct=st.map(a.mapping);ct&&d&&a.maybeStep(ct)}),!0};function isNodeActive(o,e,s={}){const{from:a,to:d,empty:b}=o.selection,_=e?getNodeType(e,o.schema):null,_e=[];o.doc.nodesBetween(a,d,(ft,mt)=>{if(ft.isText)return;const bt=Math.max(a,mt),wt=Math.min(d,mt+ft.nodeSize);_e.push({node:ft,from:bt,to:wt})});const ot=d-a,st=_e.filter(ft=>_?_.name===ft.node.type.name:!0).filter(ft=>objectIncludes(ft.node.attrs,s,{strict:!1}));return b?!!st.length:st.reduce((ft,mt)=>ft+mt.to-mt.from,0)>=ot}const lift=(o,e={})=>({state:s,dispatch:a})=>{const d=getNodeType(o,s.schema);return isNodeActive(s,d,e)?lift$1(s,a):!1},liftEmptyBlock=()=>({state:o,dispatch:e})=>liftEmptyBlock$1(o,e),liftListItem=o=>({state:e,dispatch:s})=>{const a=getNodeType(o,e.schema);return liftListItem$1(a)(e,s)},newlineInCode=()=>({state:o,dispatch:e})=>newlineInCode$1(o,e);function getSchemaTypeNameByName(o,e){return e.nodes[o]?"node":e.marks[o]?"mark":null}function deleteProps(o,e){const s=typeof e=="string"?[e]:e;return Object.keys(o).reduce((a,d)=>(s.includes(d)||(a[d]=o[d]),a),{})}const resetAttributes=(o,e)=>({tr:s,state:a,dispatch:d})=>{let b=null,_=null;const _e=getSchemaTypeNameByName(typeof o=="string"?o:o.name,a.schema);return _e?(_e==="node"&&(b=getNodeType(o,a.schema)),_e==="mark"&&(_=getMarkType(o,a.schema)),d&&s.selection.ranges.forEach(ot=>{a.doc.nodesBetween(ot.$from.pos,ot.$to.pos,(st,ct)=>{b&&b===st.type&&s.setNodeMarkup(ct,void 0,deleteProps(st.attrs,e)),_&&st.marks.length&&st.marks.forEach(ft=>{_===ft.type&&s.addMark(ct,ct+st.nodeSize,_.create(deleteProps(ft.attrs,e)))})})}),!0):!1},scrollIntoView=()=>({tr:o,dispatch:e})=>(e&&o.scrollIntoView(),!0),selectAll=()=>({tr:o,commands:e})=>e.setTextSelection({from:0,to:o.doc.content.size}),selectNodeBackward=()=>({state:o,dispatch:e})=>selectNodeBackward$1(o,e),selectNodeForward=()=>({state:o,dispatch:e})=>selectNodeForward$1(o,e),selectParentNode=()=>({state:o,dispatch:e})=>selectParentNode$1(o,e),selectTextblockEnd=()=>({state:o,dispatch:e})=>selectTextblockEnd$1(o,e),selectTextblockStart=()=>({state:o,dispatch:e})=>selectTextblockStart$1(o,e);function createDocument(o,e,s={},a={}){return createNodeFromContent(o,e,{slice:!1,parseOptions:s,errorOnInvalidContent:a.errorOnInvalidContent})}const setContent=(o,e=!1,s={},a={})=>({editor:d,tr:b,dispatch:_,commands:_e})=>{var ot,st;const{doc:ct}=b;if(s.preserveWhitespace!=="full"){const ft=createDocument(o,d.schema,s,{errorOnInvalidContent:(ot=a.errorOnInvalidContent)!==null&&ot!==void 0?ot:d.options.enableContentCheck});return _&&b.replaceWith(0,ct.content.size,ft).setMeta("preventUpdate",!e),!0}return _&&b.setMeta("preventUpdate",!e),_e.insertContentAt({from:0,to:ct.content.size},o,{parseOptions:s,errorOnInvalidContent:(st=a.errorOnInvalidContent)!==null&&st!==void 0?st:d.options.enableContentCheck})};function getMarkAttributes(o,e){const s=getMarkType(e,o.schema),{from:a,to:d,empty:b}=o.selection,_=[];b?(o.storedMarks&&_.push(...o.storedMarks),_.push(...o.selection.$head.marks())):o.doc.nodesBetween(a,d,ot=>{_.push(...ot.marks)});const _e=_.find(ot=>ot.type.name===s.name);return _e?{..._e.attrs}:{}}function combineTransactionSteps(o,e){const s=new Transform(o);return e.forEach(a=>{a.steps.forEach(d=>{s.step(d)})}),s}function defaultBlockAt(o){for(let e=0;e<o.edgeCount;e+=1){const{type:s}=o.edge(e);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}function findChildrenInRange(o,e,s){const a=[];return o.nodesBetween(e.from,e.to,(d,b)=>{s(d)&&a.push({node:d,pos:b})}),a}function findParentNodeClosestToPos(o,e){for(let s=o.depth;s>0;s-=1){const a=o.node(s);if(e(a))return{pos:s>0?o.before(s):0,start:o.start(s),depth:s,node:a}}}function findParentNode(o){return e=>findParentNodeClosestToPos(e.$from,o)}function getHTMLFromFragment(o,e){const s=DOMSerializer.fromSchema(e).serializeFragment(o),d=document.implementation.createHTMLDocument().createElement("div");return d.appendChild(s),d.innerHTML}function getText(o,e){const s={from:0,to:o.content.size};return getTextBetween(o,s,e)}function getNodeAttributes(o,e){const s=getNodeType(e,o.schema),{from:a,to:d}=o.selection,b=[];o.doc.nodesBetween(a,d,_e=>{b.push(_e)});const _=b.reverse().find(_e=>_e.type.name===s.name);return _?{..._.attrs}:{}}function getAttributes(o,e){const s=getSchemaTypeNameByName(typeof e=="string"?e:e.name,o.schema);return s==="node"?getNodeAttributes(o,e):s==="mark"?getMarkAttributes(o,e):{}}function removeDuplicates(o,e=JSON.stringify){const s={};return o.filter(a=>{const d=e(a);return Object.prototype.hasOwnProperty.call(s,d)?!1:s[d]=!0})}function simplifyChangedRanges(o){const e=removeDuplicates(o);return e.length===1?e:e.filter((s,a)=>!e.filter((b,_)=>_!==a).some(b=>s.oldRange.from>=b.oldRange.from&&s.oldRange.to<=b.oldRange.to&&s.newRange.from>=b.newRange.from&&s.newRange.to<=b.newRange.to))}function getChangedRanges(o){const{mapping:e,steps:s}=o,a=[];return e.maps.forEach((d,b)=>{const _=[];if(d.ranges.length)d.forEach((_e,ot)=>{_.push({from:_e,to:ot})});else{const{from:_e,to:ot}=s[b];if(_e===void 0||ot===void 0)return;_.push({from:_e,to:ot})}_.forEach(({from:_e,to:ot})=>{const st=e.slice(b).map(_e,-1),ct=e.slice(b).map(ot),ft=e.invert().map(st,-1),mt=e.invert().map(ct);a.push({oldRange:{from:ft,to:mt},newRange:{from:st,to:ct}})})}),simplifyChangedRanges(a)}function getMarksBetween(o,e,s){const a=[];return o===e?s.resolve(o).marks().forEach(d=>{const b=s.resolve(o),_=getMarkRange(b,d.type);_&&a.push({mark:d,..._})}):s.nodesBetween(o,e,(d,b)=>{!d||(d==null?void 0:d.nodeSize)===void 0||a.push(...d.marks.map(_=>({from:b,to:b+d.nodeSize,mark:_})))}),a}function getSplittedAttributes(o,e,s){return Object.fromEntries(Object.entries(s).filter(([a])=>{const d=o.find(b=>b.type===e&&b.name===a);return d?d.attribute.keepOnSplit:!1}))}function isMarkActive(o,e,s={}){const{empty:a,ranges:d}=o.selection,b=e?getMarkType(e,o.schema):null;if(a)return!!(o.storedMarks||o.selection.$from.marks()).filter(ft=>b?b.name===ft.type.name:!0).find(ft=>objectIncludes(ft.attrs,s,{strict:!1}));let _=0;const _e=[];if(d.forEach(({$from:ft,$to:mt})=>{const bt=ft.pos,wt=mt.pos;o.doc.nodesBetween(bt,wt,(Ct,Rt)=>{if(!Ct.isText&&!Ct.marks.length)return;const It=Math.max(bt,Rt),Pt=Math.min(wt,Rt+Ct.nodeSize),Tt=Pt-It;_+=Tt,_e.push(...Ct.marks.map(Gt=>({mark:Gt,from:It,to:Pt})))})}),_===0)return!1;const ot=_e.filter(ft=>b?b.name===ft.mark.type.name:!0).filter(ft=>objectIncludes(ft.mark.attrs,s,{strict:!1})).reduce((ft,mt)=>ft+mt.to-mt.from,0),st=_e.filter(ft=>b?ft.mark.type!==b&&ft.mark.type.excludes(b):!0).reduce((ft,mt)=>ft+mt.to-mt.from,0);return(ot>0?ot+st:ot)>=_}function isActive(o,e,s={}){if(!e)return isNodeActive(o,null,s)||isMarkActive(o,null,s);const a=getSchemaTypeNameByName(e,o.schema);return a==="node"?isNodeActive(o,e,s):a==="mark"?isMarkActive(o,e,s):!1}function isList(o,e){const{nodeExtensions:s}=splitExtensions(e),a=s.find(_=>_.name===o);if(!a)return!1;const d={name:a.name,options:a.options,storage:a.storage},b=callOrReturn(getExtensionField(a,"group",d));return typeof b!="string"?!1:b.split(" ").includes("list")}function isNodeEmpty(o,{checkChildren:e=!0,ignoreWhitespace:s=!1}={}){var a;if(s){if(o.type.name==="hardBreak")return!0;if(o.isText)return/^\s*$/m.test((a=o.text)!==null&&a!==void 0?a:"")}if(o.isText)return!o.text;if(o.isAtom||o.isLeaf)return!1;if(o.content.childCount===0)return!0;if(e){let d=!0;return o.content.forEach(b=>{d!==!1&&(isNodeEmpty(b,{ignoreWhitespace:s,checkChildren:e})||(d=!1))}),d}return!1}function isNodeSelection(o){return o instanceof NodeSelection}function canSetMark(o,e,s){var a;const{selection:d}=e;let b=null;if(isTextSelection(d)&&(b=d.$cursor),b){const _e=(a=o.storedMarks)!==null&&a!==void 0?a:b.marks();return!!s.isInSet(_e)||!_e.some(ot=>ot.type.excludes(s))}const{ranges:_}=d;return _.some(({$from:_e,$to:ot})=>{let st=_e.depth===0?o.doc.inlineContent&&o.doc.type.allowsMarkType(s):!1;return o.doc.nodesBetween(_e.pos,ot.pos,(ct,ft,mt)=>{if(st)return!1;if(ct.isInline){const bt=!mt||mt.type.allowsMarkType(s),wt=!!s.isInSet(ct.marks)||!ct.marks.some(Ct=>Ct.type.excludes(s));st=bt&&wt}return!st}),st})}const setMark=(o,e={})=>({tr:s,state:a,dispatch:d})=>{const{selection:b}=s,{empty:_,ranges:_e}=b,ot=getMarkType(o,a.schema);if(d)if(_){const st=getMarkAttributes(a,ot);s.addStoredMark(ot.create({...st,...e}))}else _e.forEach(st=>{const ct=st.$from.pos,ft=st.$to.pos;a.doc.nodesBetween(ct,ft,(mt,bt)=>{const wt=Math.max(bt,ct),Ct=Math.min(bt+mt.nodeSize,ft);mt.marks.find(It=>It.type===ot)?mt.marks.forEach(It=>{ot===It.type&&s.addMark(wt,Ct,ot.create({...It.attrs,...e}))}):s.addMark(wt,Ct,ot.create(e))})});return canSetMark(a,s,ot)},setMeta=(o,e)=>({tr:s})=>(s.setMeta(o,e),!0),setNode=(o,e={})=>({state:s,dispatch:a,chain:d})=>{const b=getNodeType(o,s.schema);return b.isTextblock?d().command(({commands:_})=>setBlockType(b,e)(s)?!0:_.clearNodes()).command(({state:_})=>setBlockType(b,e)(_,a)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=o=>({tr:e,dispatch:s})=>{if(s){const{doc:a}=e,d=minMax(o,0,a.content.size),b=NodeSelection.create(a,d);e.setSelection(b)}return!0},setTextSelection=o=>({tr:e,dispatch:s})=>{if(s){const{doc:a}=e,{from:d,to:b}=typeof o=="number"?{from:o,to:o}:o,_=TextSelection.atStart(a).from,_e=TextSelection.atEnd(a).to,ot=minMax(d,_,_e),st=minMax(b,_,_e),ct=TextSelection.create(a,ot,st);e.setSelection(ct)}return!0},sinkListItem=o=>({state:e,dispatch:s})=>{const a=getNodeType(o,e.schema);return sinkListItem$1(a)(e,s)};function ensureMarks(o,e){const s=o.storedMarks||o.selection.$to.parentOffset&&o.selection.$from.marks();if(s){const a=s.filter(d=>e==null?void 0:e.includes(d.type.name));o.tr.ensureMarks(a)}}const splitBlock=({keepMarks:o=!0}={})=>({tr:e,state:s,dispatch:a,editor:d})=>{const{selection:b,doc:_}=e,{$from:_e,$to:ot}=b,st=d.extensionManager.attributes,ct=getSplittedAttributes(st,_e.node().type.name,_e.node().attrs);if(b instanceof NodeSelection&&b.node.isBlock)return!_e.parentOffset||!canSplit(_,_e.pos)?!1:(a&&(o&&ensureMarks(s,d.extensionManager.splittableMarks),e.split(_e.pos).scrollIntoView()),!0);if(!_e.parent.isBlock)return!1;const ft=ot.parentOffset===ot.parent.content.size,mt=_e.depth===0?void 0:defaultBlockAt(_e.node(-1).contentMatchAt(_e.indexAfter(-1)));let bt=ft&&mt?[{type:mt,attrs:ct}]:void 0,wt=canSplit(e.doc,e.mapping.map(_e.pos),1,bt);if(!bt&&!wt&&canSplit(e.doc,e.mapping.map(_e.pos),1,mt?[{type:mt}]:void 0)&&(wt=!0,bt=mt?[{type:mt,attrs:ct}]:void 0),a){if(wt&&(b instanceof TextSelection&&e.deleteSelection(),e.split(e.mapping.map(_e.pos),1,bt),mt&&!ft&&!_e.parentOffset&&_e.parent.type!==mt)){const Ct=e.mapping.map(_e.before()),Rt=e.doc.resolve(Ct);_e.node(-1).canReplaceWith(Rt.index(),Rt.index()+1,mt)&&e.setNodeMarkup(e.mapping.map(_e.before()),mt)}o&&ensureMarks(s,d.extensionManager.splittableMarks),e.scrollIntoView()}return wt},splitListItem=(o,e={})=>({tr:s,state:a,dispatch:d,editor:b})=>{var _;const _e=getNodeType(o,a.schema),{$from:ot,$to:st}=a.selection,ct=a.selection.node;if(ct&&ct.isBlock||ot.depth<2||!ot.sameParent(st))return!1;const ft=ot.node(-1);if(ft.type!==_e)return!1;const mt=b.extensionManager.attributes;if(ot.parent.content.size===0&&ot.node(-1).childCount===ot.indexAfter(-1)){if(ot.depth===2||ot.node(-3).type!==_e||ot.index(-2)!==ot.node(-2).childCount-1)return!1;if(d){let It=Fragment.empty;const Pt=ot.index(-1)?1:ot.index(-2)?2:3;for(let Qt=ot.depth-Pt;Qt>=ot.depth-3;Qt-=1)It=Fragment.from(ot.node(Qt).copy(It));const Tt=ot.indexAfter(-1)<ot.node(-2).childCount?1:ot.indexAfter(-2)<ot.node(-3).childCount?2:3,Gt={...getSplittedAttributes(mt,ot.node().type.name,ot.node().attrs),...e},Jt=((_=_e.contentMatch.defaultType)===null||_===void 0?void 0:_.createAndFill(Gt))||void 0;It=It.append(Fragment.from(_e.createAndFill(null,Jt)||void 0));const qt=ot.before(ot.depth-(Pt-1));s.replace(qt,ot.after(-Tt),new Slice(It,4-Pt,0));let Nt=-1;s.doc.nodesBetween(qt,s.doc.content.size,(Qt,fn)=>{if(Nt>-1)return!1;Qt.isTextblock&&Qt.content.size===0&&(Nt=fn+1)}),Nt>-1&&s.setSelection(TextSelection.near(s.doc.resolve(Nt))),s.scrollIntoView()}return!0}const bt=st.pos===ot.end()?ft.contentMatchAt(0).defaultType:null,wt={...getSplittedAttributes(mt,ft.type.name,ft.attrs),...e},Ct={...getSplittedAttributes(mt,ot.node().type.name,ot.node().attrs),...e};s.delete(ot.pos,st.pos);const Rt=bt?[{type:_e,attrs:wt},{type:bt,attrs:Ct}]:[{type:_e,attrs:wt}];if(!canSplit(s.doc,ot.pos,2))return!1;if(d){const{selection:It,storedMarks:Pt}=a,{splittableMarks:Tt}=b.extensionManager,Gt=Pt||It.$to.parentOffset&&It.$from.marks();if(s.split(ot.pos,2,Rt).scrollIntoView(),!Gt||!d)return!0;const Jt=Gt.filter(qt=>Tt.includes(qt.type.name));s.ensureMarks(Jt)}return!0},joinListBackwards=(o,e)=>{const s=findParentNode(_=>_.type===e)(o.selection);if(!s)return!0;const a=o.doc.resolve(Math.max(0,s.pos-1)).before(s.depth);if(a===void 0)return!0;const d=o.doc.nodeAt(a);return s.node.type===(d==null?void 0:d.type)&&canJoin(o.doc,s.pos)&&o.join(s.pos),!0},joinListForwards=(o,e)=>{const s=findParentNode(_=>_.type===e)(o.selection);if(!s)return!0;const a=o.doc.resolve(s.start).after(s.depth);if(a===void 0)return!0;const d=o.doc.nodeAt(a);return s.node.type===(d==null?void 0:d.type)&&canJoin(o.doc,a)&&o.join(a),!0},toggleList=(o,e,s,a={})=>({editor:d,tr:b,state:_,dispatch:_e,chain:ot,commands:st,can:ct})=>{const{extensions:ft,splittableMarks:mt}=d.extensionManager,bt=getNodeType(o,_.schema),wt=getNodeType(e,_.schema),{selection:Ct,storedMarks:Rt}=_,{$from:It,$to:Pt}=Ct,Tt=It.blockRange(Pt),Gt=Rt||Ct.$to.parentOffset&&Ct.$from.marks();if(!Tt)return!1;const Jt=findParentNode(qt=>isList(qt.type.name,ft))(Ct);if(Tt.depth>=1&&Jt&&Tt.depth-Jt.depth<=1){if(Jt.node.type===bt)return st.liftListItem(wt);if(isList(Jt.node.type.name,ft)&&bt.validContent(Jt.node.content)&&_e)return ot().command(()=>(b.setNodeMarkup(Jt.pos,bt),!0)).command(()=>joinListBackwards(b,bt)).command(()=>joinListForwards(b,bt)).run()}return!s||!Gt||!_e?ot().command(()=>ct().wrapInList(bt,a)?!0:st.clearNodes()).wrapInList(bt,a).command(()=>joinListBackwards(b,bt)).command(()=>joinListForwards(b,bt)).run():ot().command(()=>{const qt=ct().wrapInList(bt,a),Nt=Gt.filter(Qt=>mt.includes(Qt.type.name));return b.ensureMarks(Nt),qt?!0:st.clearNodes()}).wrapInList(bt,a).command(()=>joinListBackwards(b,bt)).command(()=>joinListForwards(b,bt)).run()},toggleMark=(o,e={},s={})=>({state:a,commands:d})=>{const{extendEmptyMarkRange:b=!1}=s,_=getMarkType(o,a.schema);return isMarkActive(a,_,e)?d.unsetMark(_,{extendEmptyMarkRange:b}):d.setMark(_,e)},toggleNode=(o,e,s={})=>({state:a,commands:d})=>{const b=getNodeType(o,a.schema),_=getNodeType(e,a.schema),_e=isNodeActive(a,b,s);let ot;return a.selection.$anchor.sameParent(a.selection.$head)&&(ot=a.selection.$anchor.parent.attrs),_e?d.setNode(_,ot):d.setNode(b,{...ot,...s})},toggleWrap=(o,e={})=>({state:s,commands:a})=>{const d=getNodeType(o,s.schema);return isNodeActive(s,d,e)?a.lift(d):a.wrapIn(d,e)},undoInputRule=()=>({state:o,dispatch:e})=>{const s=o.plugins;for(let a=0;a<s.length;a+=1){const d=s[a];let b;if(d.spec.isInputRules&&(b=d.getState(o))){if(e){const _=o.tr,_e=b.transform;for(let ot=_e.steps.length-1;ot>=0;ot-=1)_.step(_e.steps[ot].invert(_e.docs[ot]));if(b.text){const ot=_.doc.resolve(b.from).marks();_.replaceWith(b.from,b.to,o.schema.text(b.text,ot))}else _.delete(b.from,b.to)}return!0}}return!1},unsetAllMarks=()=>({tr:o,dispatch:e})=>{const{selection:s}=o,{empty:a,ranges:d}=s;return a||e&&d.forEach(b=>{o.removeMark(b.$from.pos,b.$to.pos)}),!0},unsetMark=(o,e={})=>({tr:s,state:a,dispatch:d})=>{var b;const{extendEmptyMarkRange:_=!1}=e,{selection:_e}=s,ot=getMarkType(o,a.schema),{$from:st,empty:ct,ranges:ft}=_e;if(!d)return!0;if(ct&&_){let{from:mt,to:bt}=_e;const wt=(b=st.marks().find(Rt=>Rt.type===ot))===null||b===void 0?void 0:b.attrs,Ct=getMarkRange(st,ot,wt);Ct&&(mt=Ct.from,bt=Ct.to),s.removeMark(mt,bt,ot)}else ft.forEach(mt=>{s.removeMark(mt.$from.pos,mt.$to.pos,ot)});return s.removeStoredMark(ot),!0},updateAttributes=(o,e={})=>({tr:s,state:a,dispatch:d})=>{let b=null,_=null;const _e=getSchemaTypeNameByName(typeof o=="string"?o:o.name,a.schema);return _e?(_e==="node"&&(b=getNodeType(o,a.schema)),_e==="mark"&&(_=getMarkType(o,a.schema)),d&&s.selection.ranges.forEach(ot=>{const st=ot.$from.pos,ct=ot.$to.pos;a.doc.nodesBetween(st,ct,(ft,mt)=>{b&&b===ft.type&&s.setNodeMarkup(mt,void 0,{...ft.attrs,...e}),_&&ft.marks.length&&ft.marks.forEach(bt=>{if(_===bt.type){const wt=Math.max(mt,st),Ct=Math.min(mt+ft.nodeSize,ct);s.addMark(wt,Ct,_.create({...bt.attrs,...e}))}})})}),!0):!1},wrapIn=(o,e={})=>({state:s,dispatch:a})=>{const d=getNodeType(o,s.schema);return wrapIn$1(d,e)(s,a)},wrapInList=(o,e={})=>({state:s,dispatch:a})=>{const d=getNodeType(o,s.schema);return wrapInList$1(d,e)(s,a)};var commands=Object.freeze({__proto__:null,blur,clearContent,clearNodes,command,createParagraphNear,cut,deleteCurrentNode,deleteNode,deleteRange,deleteSelection,enter,exitCode,extendMarkRange,first,focus,forEach,insertContent,insertContentAt,joinBackward,joinDown,joinForward,joinItemBackward,joinItemForward,joinTextblockBackward,joinTextblockForward,joinUp,keyboardShortcut,lift,liftEmptyBlock,liftListItem,newlineInCode,resetAttributes,scrollIntoView,selectAll,selectNodeBackward,selectNodeForward,selectParentNode,selectTextblockEnd,selectTextblockStart,setContent,setMark,setMeta,setNode,setNodeSelection,setTextSelection,sinkListItem,splitBlock,splitListItem,toggleList,toggleMark,toggleNode,toggleWrap,undoInputRule,unsetAllMarks,unsetMark,updateAttributes,wrapIn,wrapInList});const Commands=Extension.create({name:"commands",addCommands(){return{...commands}}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(o,e,s,a)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:s,moved:a})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:o}=this;return[new Plugin({key:new PluginKey("focusEvents"),props:{handleDOMEvents:{focus:(e,s)=>{o.isFocused=!0;const a=o.state.tr.setMeta("focus",{event:s}).setMeta("addToHistory",!1);return e.dispatch(a),!1},blur:(e,s)=>{o.isFocused=!1;const a=o.state.tr.setMeta("blur",{event:s}).setMeta("addToHistory",!1);return e.dispatch(a),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const o=()=>this.editor.commands.first(({commands:_})=>[()=>_.undoInputRule(),()=>_.command(({tr:_e})=>{const{selection:ot,doc:st}=_e,{empty:ct,$anchor:ft}=ot,{pos:mt,parent:bt}=ft,wt=ft.parent.isTextblock&&mt>0?_e.doc.resolve(mt-1):ft,Ct=wt.parent.type.spec.isolating,Rt=ft.pos-ft.parentOffset,It=Ct&&wt.parent.childCount===1?Rt===ft.pos:Selection.atStart(st).from===mt;return!ct||!bt.type.isTextblock||bt.textContent.length||!It||It&&ft.parent.type.name==="paragraph"?!1:_.clearNodes()}),()=>_.deleteSelection(),()=>_.joinBackward(),()=>_.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:_})=>[()=>_.deleteSelection(),()=>_.deleteCurrentNode(),()=>_.joinForward(),()=>_.selectNodeForward()]),a={Enter:()=>this.editor.commands.first(({commands:_})=>[()=>_.newlineInCode(),()=>_.createParagraphNear(),()=>_.liftEmptyBlock(),()=>_.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:o,"Mod-Backspace":o,"Shift-Backspace":o,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},d={...a},b={...a,"Ctrl-h":o,"Alt-Backspace":o,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?b:d},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(o,e,s)=>{const a=o.some(Ct=>Ct.docChanged)&&!e.doc.eq(s.doc),d=o.some(Ct=>Ct.getMeta("preventClearDocument"));if(!a||d)return;const{empty:b,from:_,to:_e}=e.selection,ot=Selection.atStart(e.doc).from,st=Selection.atEnd(e.doc).to;if(b||!(_===ot&&_e===st)||!isNodeEmpty(s.doc))return;const mt=s.tr,bt=createChainableState({state:s,transaction:mt}),{commands:wt}=new CommandManager({editor:this.editor,state:bt});if(wt.clearNodes(),!!mt.steps.length)return mt}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(o,e,s)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:s})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class NodePos{get name(){return this.node.type.name}constructor(e,s,a=!1,d=null){this.currentNode=null,this.actualDepth=null,this.isBlock=a,this.resolvedPos=e,this.editor=s,this.currentNode=d}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let s=this.from,a=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}s=this.from+1,a=this.to-1}this.editor.commands.insertContentAt({from:s,to:a},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),s=this.resolvedPos.doc.resolve(e);return new NodePos(s,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new NodePos(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new NodePos(e,this.editor)}get children(){const e=[];return this.node.content.forEach((s,a)=>{const d=s.isBlock&&!s.isTextblock,b=s.isAtom&&!s.isText,_=this.pos+a+(b?0:1),_e=this.resolvedPos.doc.resolve(_);if(!d&&_e.depth<=this.depth)return;const ot=new NodePos(_e,this.editor,d,d?s:null);d&&(ot.actualDepth=this.depth+1),e.push(new NodePos(_e,this.editor,d,d?s:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,s={}){let a=null,d=this.parent;for(;d&&!a;){if(d.node.type.name===e)if(Object.keys(s).length>0){const b=d.node.attrs,_=Object.keys(s);for(let _e=0;_e<_.length;_e+=1){const ot=_[_e];if(b[ot]!==s[ot])break}}else a=d;d=d.parent}return a}querySelector(e,s={}){return this.querySelectorAll(e,s,!0)[0]||null}querySelectorAll(e,s={},a=!1){let d=[];if(!this.children||this.children.length===0)return d;const b=Object.keys(s);return this.children.forEach(_=>{a&&d.length>0||(_.node.type.name===e&&b.every(ot=>s[ot]===_.node.attrs[ot])&&d.push(_),!(a&&d.length>0)&&(d=d.concat(_.querySelectorAll(e,s,a))))}),d}setAttribute(e){const{tr:s}=this.editor.state;s.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(s)}}const style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function createStyleTag(o,e,s){const a=document.querySelector("style[data-tiptap-style]");if(a!==null)return a;const d=document.createElement("style");return e&&d.setAttribute("nonce",e),d.setAttribute("data-tiptap-style",""),d.innerHTML=o,document.getElementsByTagName("head")[0].appendChild(d),d}class Editor extends EventEmitter{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:s})=>{throw s},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:s,slice:a,moved:d})=>this.options.onDrop(s,a,d)),this.on("paste",({event:s,slice:a})=>this.options.onPaste(s,a)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,s=!0){this.setOptions({editable:e}),s&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,s){const a=isFunction(s)?s(e,[...this.state.plugins]):[...this.state.plugins,e],d=this.state.reconfigure({plugins:a});return this.view.updateState(d),d}unregisterPlugin(e){if(this.isDestroyed)return;const s=this.state.plugins;let a=s;if([].concat(e).forEach(b=>{const _=typeof b=="string"?`${b}$`:b.key;a=s.filter(_e=>!_e.key.startsWith(_))}),s.length===a.length)return;const d=this.state.reconfigure({plugins:a});return this.view.updateState(d),d}createExtensionManager(){var e,s;const d=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(s=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||s===void 0?void 0:s.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste].filter(b=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[b.name]!==!1:!0):[],...this.options.extensions].filter(b=>["extension","node","mark"].includes(b==null?void 0:b.type));this.extensionManager=new ExtensionManager(d,this)}createCommandManager(){this.commandManager=new CommandManager({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e;try{e=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(b){if(!(b instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(b.message))throw b;this.emit("contentError",{editor:this,error:b,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(_=>_.name!=="collaboration"),this.createExtensionManager()}}),e=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const s=resolveFocusPosition(e,this.options.autofocus);this.view=new EditorView(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:EditorState.create({doc:e,selection:s||void 0})}),this.view.dom.setAttribute("role","textbox"),this.view.dom.getAttribute("aria-label")||this.view.dom.setAttribute("aria-label","Rich-Text Editor");const a=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(a),this.createNodeViews(),this.prependClass();const d=this.view.dom;d.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const s=this.capturedTransaction;return this.capturedTransaction=null,s}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(_=>{var _e;return(_e=this.capturedTransaction)===null||_e===void 0?void 0:_e.step(_)});return}const s=this.state.apply(e),a=!this.state.selection.eq(s.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:s}),this.view.updateState(s),this.emit("transaction",{editor:this,transaction:e}),a&&this.emit("selectionUpdate",{editor:this,transaction:e});const d=e.getMeta("focus"),b=e.getMeta("blur");d&&this.emit("focus",{editor:this,event:d.event,transaction:e}),b&&this.emit("blur",{editor:this,event:b.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return getAttributes(this.state,e)}isActive(e,s){const a=typeof e=="string"?e:null,d=typeof e=="string"?s:e;return isActive(this.state,a,d)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:s=`

`,textSerializers:a={}}=e||{};return getText(this.state.doc,{blockSeparator:s,textSerializers:{...getTextSerializersFromSchema(this.schema),...a}})}get isEmpty(){return isNodeEmpty(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,s){var a;return((a=this.$doc)===null||a===void 0?void 0:a.querySelector(e,s))||null}$nodes(e,s){var a;return((a=this.$doc)===null||a===void 0?void 0:a.querySelectorAll(e,s))||null}$pos(e){const s=this.state.doc.resolve(e);return new NodePos(s,this)}get $doc(){return this.$pos(0)}}function markInputRule(o){return new InputRule({find:o.find,handler:({state:e,range:s,match:a})=>{const d=callOrReturn(o.getAttributes,void 0,a);if(d===!1||d===null)return null;const{tr:b}=e,_=a[a.length-1],_e=a[0];if(_){const ot=_e.search(/\S/),st=s.from+_e.indexOf(_),ct=st+_.length;if(getMarksBetween(s.from,s.to,e.doc).filter(bt=>bt.mark.type.excluded.find(Ct=>Ct===o.type&&Ct!==bt.mark.type)).filter(bt=>bt.to>st).length)return null;ct<s.to&&b.delete(ct,s.to),st>s.from&&b.delete(s.from+ot,st);const mt=s.from+ot+_.length;b.addMark(s.from+ot,mt,o.type.create(d||{})),b.removeStoredMark(o.type)}}})}function nodeInputRule(o){return new InputRule({find:o.find,handler:({state:e,range:s,match:a})=>{const d=callOrReturn(o.getAttributes,void 0,a)||{},{tr:b}=e,_=s.from;let _e=s.to;const ot=o.type.create(d);if(a[1]){const st=a[0].lastIndexOf(a[1]);let ct=_+st;ct>_e?ct=_e:_e=ct+a[1].length;const ft=a[0][a[0].length-1];b.insertText(ft,_+a[0].length-1),b.replaceWith(ct,_e,ot)}else if(a[0]){const st=o.type.isInline?_:_-1;b.insert(st,o.type.create(d)).delete(b.mapping.map(_),b.mapping.map(_e))}b.scrollIntoView()}})}function textblockTypeInputRule(o){return new InputRule({find:o.find,handler:({state:e,range:s,match:a})=>{const d=e.doc.resolve(s.from),b=callOrReturn(o.getAttributes,void 0,a)||{};if(!d.node(-1).canReplaceWith(d.index(-1),d.indexAfter(-1),o.type))return null;e.tr.delete(s.from,s.to).setBlockType(s.from,s.from,o.type,b)}})}function wrappingInputRule(o){return new InputRule({find:o.find,handler:({state:e,range:s,match:a,chain:d})=>{const b=callOrReturn(o.getAttributes,void 0,a)||{},_=e.tr.delete(s.from,s.to),ot=_.doc.resolve(s.from).blockRange(),st=ot&&findWrapping(ot,o.type,b);if(!st)return null;if(_.wrap(ot,st),o.keepMarks&&o.editor){const{selection:ft,storedMarks:mt}=e,{splittableMarks:bt}=o.editor.extensionManager,wt=mt||ft.$to.parentOffset&&ft.$from.marks();if(wt){const Ct=wt.filter(Rt=>bt.includes(Rt.type.name));_.ensureMarks(Ct)}}if(o.keepAttributes){const ft=o.type.name==="bulletList"||o.type.name==="orderedList"?"listItem":"taskList";d().updateAttributes(ft,b).run()}const ct=_.doc.resolve(s.from-1).nodeBefore;ct&&ct.type===o.type&&canJoin(_.doc,s.from-1)&&(!o.joinPredicate||o.joinPredicate(a,ct))&&_.join(s.from-1)}})}let Node$1=class yie{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new yie(e)}configure(e={}){const s=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return s.name=this.name,s.parent=this.parent,s}extend(e={}){const s=new yie(e);return s.parent=this,this.child=s,s.name=e.name?e.name:s.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=callOrReturn(getExtensionField(s,"addOptions",{name:s.name})),s.storage=callOrReturn(getExtensionField(s,"addStorage",{name:s.name,options:s.options})),s}};function markPasteRule(o){return new PasteRule({find:o.find,handler:({state:e,range:s,match:a,pasteEvent:d})=>{const b=callOrReturn(o.getAttributes,void 0,a,d);if(b===!1||b===null)return null;const{tr:_}=e,_e=a[a.length-1],ot=a[0];let st=s.to;if(_e){const ct=ot.search(/\S/),ft=s.from+ot.indexOf(_e),mt=ft+_e.length;if(getMarksBetween(s.from,s.to,e.doc).filter(wt=>wt.mark.type.excluded.find(Rt=>Rt===o.type&&Rt!==wt.mark.type)).filter(wt=>wt.to>ft).length)return null;mt<s.to&&_.delete(mt,s.to),ft>s.from&&_.delete(s.from+ct,ft),st=s.from+ct+_e.length,_.addMark(s.from+ct,st,o.type.create(b||{})),_.removeStoredMark(o.type)}}})}const TextStyle=Mark.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:o=>o.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:o}){return["span",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:o,commands:e})=>{const s=getMarkAttributes(o,this.type);return Object.entries(s).some(([,d])=>!!d)?!0:e.unsetMark(this.name)}}}}),Color=Extension.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:o=>{var e;return(e=o.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:o=>o.color?{style:`color: ${o.color}`}:{}}}}]},addCommands(){return{setColor:o=>({chain:e})=>e().setMark("textStyle",{color:o}).run(),unsetColor:()=>({chain:o})=>o().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),inputRegex$5=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Image$1=Node$1.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:o}){return["img",mergeAttributes(this.options.HTMLAttributes,o)]},addCommands(){return{setImage:o=>({commands:e})=>e.insertContent({type:this.name,attrs:o})}},addInputRules(){return[nodeInputRule({find:inputRegex$5,type:this.type,getAttributes:o=>{const[,,e,s,a]=o;return{src:s,alt:e,title:a}}})]}}),encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",assign=(o,e)=>{for(const s in e)o[s]=e[s];return o},numeric="numeric",ascii="ascii",alpha="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(o,e){return o in e||(e[o]=[]),e[o]}function addToGroups(o,e,s){e[numeric]&&(e[asciinumeric]=!0,e[alphanumeric]=!0),e[ascii]&&(e[asciinumeric]=!0,e[alpha]=!0),e[asciinumeric]&&(e[alphanumeric]=!0),e[alpha]&&(e[alphanumeric]=!0),e[alphanumeric]&&(e[domain]=!0),e[emoji]&&(e[domain]=!0);for(const a in e){const d=registerGroup(a,s);d.indexOf(o)<0&&d.push(o)}}function flagsForToken(o,e){const s={};for(const a in e)e[a].indexOf(o)>=0&&(s[a]=!0);return s}function State(o){o===void 0&&(o=null),this.j={},this.jr=[],this.jd=null,this.t=o}State.groups={};State.prototype={accepts(){return!!this.t},go(o){const e=this,s=e.j[o];if(s)return s;for(let a=0;a<e.jr.length;a++){const d=e.jr[a][0],b=e.jr[a][1];if(b&&d.test(o))return b}return e.jd},has(o,e){return e===void 0&&(e=!1),e?o in this.j:!!this.go(o)},ta(o,e,s,a){for(let d=0;d<o.length;d++)this.tt(o[d],e,s,a)},tr(o,e,s,a){a=a||State.groups;let d;return e&&e.j?d=e:(d=new State(e),s&&a&&addToGroups(e,s,a)),this.jr.push([o,d]),d},ts(o,e,s,a){let d=this;const b=o.length;if(!b)return d;for(let _=0;_<b-1;_++)d=d.tt(o[_]);return d.tt(o[b-1],e,s,a)},tt(o,e,s,a){a=a||State.groups;const d=this;if(e&&e.j)return d.j[o]=e,e;const b=e;let _,_e=d.go(o);if(_e?(_=new State,assign(_.j,_e.j),_.jr.push.apply(_.jr,_e.jr),_.jd=_e.jd,_.t=_e.t):_=new State,b){if(a)if(_.t&&typeof _.t=="string"){const ot=assign(flagsForToken(_.t,a),s);addToGroups(b,ot,a)}else s&&addToGroups(b,s,a);_.t=b}return d.j[o]=_,_}};const ta=(o,e,s,a,d)=>o.ta(e,s,a,d),tr=(o,e,s,a,d)=>o.tr(e,s,a,d),ts=(o,e,s,a,d)=>o.ts(e,s,a,d),tt=(o,e,s,a,d)=>o.tt(e,s,a,d),WORD="WORD",UWORD="UWORD",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL$1="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk=Object.freeze({__proto__:null,WORD,UWORD,LOCALHOST,TLD,UTLD,SCHEME,SLASH_SCHEME,NUM,WS,NL:NL$1,OPENBRACE,CLOSEBRACE,OPENBRACKET,CLOSEBRACKET,OPENPAREN,CLOSEPAREN,OPENANGLEBRACKET,CLOSEANGLEBRACKET,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN,AMPERSAND,APOSTROPHE,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,COLON,COMMA,DOLLAR,DOT,EQUALS,EXCLAMATION,HYPHEN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,SEMI,SLASH,TILDE,UNDERSCORE,EMOJI:EMOJI$1,SYM});const ASCII_LETTER=/[a-z]/,LETTER=new RegExp("\\p{L}","u"),EMOJI=new RegExp("\\p{Emoji}","u"),DIGIT=/\d/,SPACE=/\s/,NL=`
`,EMOJI_VARIATION="",EMOJI_JOINER="";let tlds=null,utlds=null;function init$2(o){o===void 0&&(o=[]);const e={};State.groups=e;const s=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt(s,"'",APOSTROPHE),tt(s,"{",OPENBRACE),tt(s,"}",CLOSEBRACE),tt(s,"[",OPENBRACKET),tt(s,"]",CLOSEBRACKET),tt(s,"(",OPENPAREN),tt(s,")",CLOSEPAREN),tt(s,"<",OPENANGLEBRACKET),tt(s,">",CLOSEANGLEBRACKET),tt(s,"",FULLWIDTHLEFTPAREN),tt(s,"",FULLWIDTHRIGHTPAREN),tt(s,"",LEFTCORNERBRACKET),tt(s,"",RIGHTCORNERBRACKET),tt(s,"",LEFTWHITECORNERBRACKET),tt(s,"",RIGHTWHITECORNERBRACKET),tt(s,"",FULLWIDTHLESSTHAN),tt(s,"",FULLWIDTHGREATERTHAN),tt(s,"&",AMPERSAND),tt(s,"*",ASTERISK),tt(s,"@",AT),tt(s,"`",BACKTICK),tt(s,"^",CARET),tt(s,":",COLON),tt(s,",",COMMA),tt(s,"$",DOLLAR),tt(s,".",DOT),tt(s,"=",EQUALS),tt(s,"!",EXCLAMATION),tt(s,"-",HYPHEN),tt(s,"%",PERCENT),tt(s,"|",PIPE),tt(s,"+",PLUS),tt(s,"#",POUND),tt(s,"?",QUERY),tt(s,'"',QUOTE),tt(s,"/",SLASH),tt(s,";",SEMI),tt(s,"~",TILDE),tt(s,"_",UNDERSCORE),tt(s,"\\",BACKSLASH);const a=tr(s,DIGIT,NUM,{[numeric]:!0});tr(a,DIGIT,a);const d=tr(s,ASCII_LETTER,WORD,{[ascii]:!0});tr(d,ASCII_LETTER,d);const b=tr(s,LETTER,UWORD,{[alpha]:!0});tr(b,ASCII_LETTER),tr(b,LETTER,b);const _=tr(s,SPACE,WS,{[whitespace]:!0});tt(s,NL,NL$1,{[whitespace]:!0}),tt(_,NL),tr(_,SPACE,_);const _e=tr(s,EMOJI,EMOJI$1,{[emoji]:!0});tr(_e,EMOJI,_e),tt(_e,EMOJI_VARIATION,_e);const ot=tt(_e,EMOJI_JOINER);tr(ot,EMOJI,_e);const st=[[ASCII_LETTER,d]],ct=[[ASCII_LETTER,null],[LETTER,b]];for(let ft=0;ft<tlds.length;ft++)fastts(s,tlds[ft],TLD,WORD,st);for(let ft=0;ft<utlds.length;ft++)fastts(s,utlds[ft],UTLD,UWORD,ct);addToGroups(TLD,{tld:!0,ascii:!0},e),addToGroups(UTLD,{utld:!0,alpha:!0},e),fastts(s,"file",SCHEME,WORD,st),fastts(s,"mailto",SCHEME,WORD,st),fastts(s,"http",SLASH_SCHEME,WORD,st),fastts(s,"https",SLASH_SCHEME,WORD,st),fastts(s,"ftp",SLASH_SCHEME,WORD,st),fastts(s,"ftps",SLASH_SCHEME,WORD,st),addToGroups(SCHEME,{scheme:!0,ascii:!0},e),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},e),o=o.sort((ft,mt)=>ft[0]>mt[0]?1:-1);for(let ft=0;ft<o.length;ft++){const mt=o[ft][0],wt=o[ft][1]?{[scheme]:!0}:{[slashscheme]:!0};mt.indexOf("-")>=0?wt[domain]=!0:ASCII_LETTER.test(mt)?DIGIT.test(mt)?wt[asciinumeric]=!0:wt[ascii]=!0:wt[numeric]=!0,ts(s,mt,mt,wt)}return ts(s,"localhost",LOCALHOST,{ascii:!0}),s.jd=new State(SYM),{start:s,tokens:assign({groups:e},tk)}}function run$1(o,e){const s=stringToArray(e.replace(/[A-Z]/g,_e=>_e.toLowerCase())),a=s.length,d=[];let b=0,_=0;for(;_<a;){let _e=o,ot=null,st=0,ct=null,ft=-1,mt=-1;for(;_<a&&(ot=_e.go(s[_]));)_e=ot,_e.accepts()?(ft=0,mt=0,ct=_e):ft>=0&&(ft+=s[_].length,mt++),st+=s[_].length,b+=s[_].length,_++;b-=ft,_-=mt,st-=ft,d.push({t:ct.t,v:e.slice(b-st,b),s:b-st,e:b})}return d}function stringToArray(o){const e=[],s=o.length;let a=0;for(;a<s;){let d=o.charCodeAt(a),b,_=d<55296||d>56319||a+1===s||(b=o.charCodeAt(a+1))<56320||b>57343?o[a]:o.slice(a,a+2);e.push(_),a+=_.length}return e}function fastts(o,e,s,a,d){let b;const _=e.length;for(let _e=0;_e<_-1;_e++){const ot=e[_e];o.j[ot]?b=o.j[ot]:(b=new State(a),b.jr=d.slice(),o.j[ot]=b),o=b}return b=new State(s),b.jr=d.slice(),o.j[e[_-1]]=b,b}function decodeTlds(o){const e=[],s=[];let a=0,d="0123456789";for(;a<o.length;){let b=0;for(;d.indexOf(o[a+b])>=0;)b++;if(b>0){e.push(s.join(""));for(let _=parseInt(o.substring(a,a+b),10);_>0;_--)s.pop();a+=b}else s.push(o[a]),a++}return e}const defaults={defaultProtocol:"http",events:null,format:noop,formatHref:noop,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(o,e){e===void 0&&(e=null);let s=assign({},defaults);o&&(s=assign(s,o instanceof Options?o.o:o));const a=s.ignoreTags,d=[];for(let b=0;b<a.length;b++)d.push(a[b].toUpperCase());this.o=s,e&&(this.defaultRender=e),this.ignoreTags=d}Options.prototype={o:defaults,ignoreTags:[],defaultRender(o){return o},check(o){return this.get("validate",o.toString(),o)},get(o,e,s){const a=e!=null;let d=this.o[o];return d&&(typeof d=="object"?(d=s.t in d?d[s.t]:defaults[o],typeof d=="function"&&a&&(d=d(e,s))):typeof d=="function"&&a&&(d=d(e,s.t,s)),d)},getObj(o,e,s){let a=this.o[o];return typeof a=="function"&&e!=null&&(a=a(e,s.t,s)),a},render(o){const e=o.render(this);return(this.get("render",null,o)||this.defaultRender)(e,o.t,o)}};function noop(o){return o}function MultiToken(o,e){this.t="token",this.v=o,this.tk=e}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(o){return this.toString()},toFormattedString(o){const e=this.toString(),s=o.get("truncate",e,this),a=o.get("format",e,this);return s&&a.length>s?a.substring(0,s)+"":a},toFormattedHref(o){return o.get("formatHref",this.toHref(o.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(o){return o===void 0&&(o=defaults.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(o),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(o){return{type:this.t,value:this.toFormattedString(o),isLink:this.isLink,href:this.toFormattedHref(o),start:this.startIndex(),end:this.endIndex()}},validate(o){return o.get("validate",this.toString(),this)},render(o){const e=this,s=this.toHref(o.get("defaultProtocol")),a=o.get("formatHref",s,this),d=o.get("tagName",s,e),b=this.toFormattedString(o),_={},_e=o.get("className",s,e),ot=o.get("target",s,e),st=o.get("rel",s,e),ct=o.getObj("attributes",s,e),ft=o.getObj("events",s,e);return _.href=a,_e&&(_.class=_e),ot&&(_.target=ot),st&&(_.rel=st),ct&&assign(_,ct),{tagName:d,attributes:_,content:b,eventListeners:ft}}};function createTokenClass(o,e){class s extends MultiToken{constructor(d,b){super(d,b),this.t=o}}for(const a in e)s.prototype[a]=e[a];return s.t=o,s}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text$1=createTokenClass("text"),Nl=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(o){return o===void 0&&(o=defaults.defaultProtocol),this.hasProtocol()?this.v:`${o}://${this.v}`},hasProtocol(){const o=this.tk;return o.length>=2&&o[0].t!==LOCALHOST&&o[1].t===COLON}}),makeState=o=>new State(o);function init$1(o){let{groups:e}=o;const s=e.domain.concat([AMPERSAND,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),a=[APOSTROPHE,COLON,COMMA,DOT,EXCLAMATION,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],d=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],b=makeState(),_=tt(b,TILDE);ta(_,d,_),ta(_,e.domain,_);const _e=makeState(),ot=makeState(),st=makeState();ta(b,e.domain,_e),ta(b,e.scheme,ot),ta(b,e.slashscheme,st),ta(_e,d,_),ta(_e,e.domain,_e);const ct=tt(_e,AT);tt(_,AT,ct),tt(ot,AT,ct),tt(st,AT,ct);const ft=tt(_,DOT);ta(ft,d,_),ta(ft,e.domain,_);const mt=makeState();ta(ct,e.domain,mt),ta(mt,e.domain,mt);const bt=tt(mt,DOT);ta(bt,e.domain,mt);const wt=makeState(Email);ta(bt,e.tld,wt),ta(bt,e.utld,wt),tt(ct,LOCALHOST,wt);const Ct=tt(mt,HYPHEN);ta(Ct,e.domain,mt),ta(wt,e.domain,mt),tt(wt,DOT,bt),tt(wt,HYPHEN,Ct);const Rt=tt(wt,COLON);ta(Rt,e.numeric,Email);const It=tt(_e,HYPHEN),Pt=tt(_e,DOT);ta(It,e.domain,_e),ta(Pt,d,_),ta(Pt,e.domain,_e);const Tt=makeState(Url);ta(Pt,e.tld,Tt),ta(Pt,e.utld,Tt),ta(Tt,e.domain,_e),ta(Tt,d,_),tt(Tt,DOT,Pt),tt(Tt,HYPHEN,It),tt(Tt,AT,ct);const Gt=tt(Tt,COLON),Jt=makeState(Url);ta(Gt,e.numeric,Jt);const qt=makeState(Url),Nt=makeState();ta(qt,s,qt),ta(qt,a,Nt),ta(Nt,s,qt),ta(Nt,a,Nt),tt(Tt,SLASH,qt),tt(Jt,SLASH,qt);const Qt=tt(ot,COLON),fn=tt(st,COLON),Mn=tt(fn,SLASH),ln=tt(Mn,SLASH);ta(ot,e.domain,_e),tt(ot,DOT,Pt),tt(ot,HYPHEN,It),ta(st,e.domain,_e),tt(st,DOT,Pt),tt(st,HYPHEN,It),ta(Qt,e.domain,qt),tt(Qt,SLASH,qt),ta(ln,e.domain,qt),ta(ln,s,qt),tt(ln,SLASH,qt);const Wt=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let so=0;so<Wt.length;so++){const[pn,hn]=Wt[so],Mt=tt(qt,pn);tt(Nt,pn,Mt),tt(Mt,hn,qt);const Hn=makeState(Url);ta(Mt,s,Hn);const cn=makeState();ta(Mt,a),ta(Hn,s,Hn),ta(Hn,a,cn),ta(cn,s,Hn),ta(cn,a,cn),tt(Hn,hn,qt),tt(cn,hn,qt)}return tt(b,LOCALHOST,Tt),tt(b,NL$1,Nl),{start:b,tokens:tk}}function run(o,e,s){let a=s.length,d=0,b=[],_=[];for(;d<a;){let _e=o,ot=null,st=null,ct=0,ft=null,mt=-1;for(;d<a&&!(ot=_e.go(s[d].t));)_.push(s[d++]);for(;d<a&&(st=ot||_e.go(s[d].t));)ot=null,_e=st,_e.accepts()?(mt=0,ft=_e):mt>=0&&mt++,d++,ct++;if(mt<0)d-=ct,d<a&&(_.push(s[d]),d++);else{_.length>0&&(b.push(initMultiToken(Text$1,e,_)),_=[]),d-=mt,ct-=mt;const bt=ft.t,wt=s.slice(d-ct,d);b.push(initMultiToken(bt,e,wt))}}return _.length>0&&b.push(initMultiToken(Text$1,e,_)),b}function initMultiToken(o,e,s){const a=s[0].s,d=s[s.length-1].e,b=e.slice(a,d);return new o(b,s)}const warn=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1}function registerCustomProtocol(o,e){if(e===void 0&&(e=!1),INIT.initialized&&warn(`linkifyjs: already initialized - will not register custom scheme "${o}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(o))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([o,e])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let o=0;o<INIT.tokenQueue.length;o++)INIT.tokenQueue[o][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let o=0;o<INIT.pluginQueue.length;o++)INIT.pluginQueue[o][1]({scanner:INIT.scanner,parser:INIT.parser});INIT.initialized=!0}function tokenize(o){return INIT.initialized||init(),run(INIT.parser.start,o,run$1(INIT.scanner.start,o))}function find(o,e,s){if(e===void 0&&(e=null),s===void 0&&(s=null),e&&typeof e=="object"){if(s)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);s=e,e=null}const a=new Options(s),d=tokenize(o),b=[];for(let _=0;_<d.length;_++){const _e=d[_];_e.isLink&&(!e||_e.t===e)&&a.check(_e)&&b.push(_e.toFormattedObject(a))}return b}function isValidLinkStructure(o){return o.length===1?o[0].isLink:o.length===3&&o[1].isLink?["()","[]"].includes(o[0].value+o[2].value):!1}function autolink(o){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(e,s,a)=>{const d=e.some(st=>st.docChanged)&&!s.doc.eq(a.doc),b=e.some(st=>st.getMeta("preventAutolink"));if(!d||b)return;const{tr:_}=a,_e=combineTransactionSteps(s.doc,[...e]);if(getChangedRanges(_e).forEach(({newRange:st})=>{const ct=findChildrenInRange(a.doc,st,bt=>bt.isTextblock);let ft,mt;if(ct.length>1?(ft=ct[0],mt=a.doc.textBetween(ft.pos,ft.pos+ft.node.nodeSize,void 0," ")):ct.length&&a.doc.textBetween(st.from,st.to," "," ").endsWith(" ")&&(ft=ct[0],mt=a.doc.textBetween(ft.pos,st.to,void 0," ")),ft&&mt){const bt=mt.split(" ").filter(It=>It!=="");if(bt.length<=0)return!1;const wt=bt[bt.length-1],Ct=ft.pos+mt.lastIndexOf(wt);if(!wt)return!1;const Rt=tokenize(wt).map(It=>It.toObject(o.defaultProtocol));if(!isValidLinkStructure(Rt))return!1;Rt.filter(It=>It.isLink).map(It=>({...It,from:Ct+It.start+1,to:Ct+It.end+1})).filter(It=>a.schema.marks.code?!a.doc.rangeHasMark(It.from,It.to,a.schema.marks.code):!0).filter(It=>o.validate(It.value)).forEach(It=>{getMarksBetween(It.from,It.to,a.doc).some(Pt=>Pt.mark.type===o.type)||_.addMark(It.from,It.to,o.type.create({href:It.href}))})}}),!!_.steps.length)return _}})}function clickHandler(o){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(e,s,a)=>{var d,b;if(a.button!==0||!e.editable)return!1;let _=a.target;const _e=[];for(;_.nodeName!=="DIV";)_e.push(_),_=_.parentNode;if(!_e.find(mt=>mt.nodeName==="A"))return!1;const ot=getAttributes(e.state,o.type.name),st=a.target,ct=(d=st==null?void 0:st.href)!==null&&d!==void 0?d:ot.href,ft=(b=st==null?void 0:st.target)!==null&&b!==void 0?b:ot.target;return st&&ct?(window.open(ct,ft),!0):!1}}})}function pasteHandler(o){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(e,s,a)=>{const{state:d}=e,{selection:b}=d,{empty:_}=b;if(_)return!1;let _e="";a.content.forEach(st=>{_e+=st.textContent});const ot=find(_e,{defaultProtocol:o.defaultProtocol}).find(st=>st.isLink&&st.value===_e);return!_e||!ot?!1:(o.editor.commands.setMark(o.type,{href:ot.href}),!0)}}})}const ATTR_WHITESPACE=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function isAllowedUri(o,e){const s=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(a=>{const d=typeof a=="string"?a:a.scheme;d&&s.push(d)}),!o||o.replace(ATTR_WHITESPACE,"").match(new RegExp(`^(?:(?:${s.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.protocols.forEach(o=>{if(typeof o=="string"){registerCustomProtocol(o);return}registerCustomProtocol(o.scheme,o.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:o=>!!o}},addAttributes(){return{href:{default:null,parseHTML(o){return o.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:o=>{const e=o.getAttribute("href");return!e||!isAllowedUri(e,this.options.protocols)?!1:null}}]},renderHTML({HTMLAttributes:o}){return isAllowedUri(o.href,this.options.protocols)?["a",mergeAttributes(this.options.HTMLAttributes,o),0]:["a",mergeAttributes(this.options.HTMLAttributes,{...o,href:""}),0]},addCommands(){return{setLink:o=>({chain:e})=>e().setMark(this.name,o).setMeta("preventAutolink",!0).run(),toggleLink:o=>({chain:e})=>e().toggleMark(this.name,o,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:o})=>o().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:o=>{const e=[];if(o){const{validate:s}=this.options,a=find(o).filter(d=>d.isLink&&s(d.value));a.length&&a.forEach(d=>e.push({text:d.value,data:{href:d.href},index:d.start}))}return e},type:this.type,getAttributes:o=>{var e;return{href:(e=o.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const o=[];return this.options.autolink&&o.push(autolink({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:this.options.validate})),this.options.openOnClick===!0&&o.push(clickHandler({type:this.type})),this.options.linkOnPaste&&o.push(pasteHandler({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),o}}),ListItem=Node$1.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:o}){return["li",mergeAttributes(this.options.HTMLAttributes,o),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production_min;function requireUseSyncExternalStoreShim_production_min(){if(hasRequiredUseSyncExternalStoreShim_production_min)return useSyncExternalStoreShim_production_min;hasRequiredUseSyncExternalStoreShim_production_min=1;var o=React;function e(ft,mt){return ft===mt&&(ft!==0||1/ft===1/mt)||ft!==ft&&mt!==mt}var s=typeof Object.is=="function"?Object.is:e,a=o.useState,d=o.useEffect,b=o.useLayoutEffect,_=o.useDebugValue;function _e(ft,mt){var bt=mt(),wt=a({inst:{value:bt,getSnapshot:mt}}),Ct=wt[0].inst,Rt=wt[1];return b(function(){Ct.value=bt,Ct.getSnapshot=mt,ot(Ct)&&Rt({inst:Ct})},[ft,bt,mt]),d(function(){return ot(Ct)&&Rt({inst:Ct}),ft(function(){ot(Ct)&&Rt({inst:Ct})})},[ft]),_(bt),bt}function ot(ft){var mt=ft.getSnapshot;ft=ft.value;try{var bt=mt();return!s(ft,bt)}catch{return!0}}function st(ft,mt){return mt()}var ct=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?st:_e;return useSyncExternalStoreShim_production_min.useSyncExternalStore=o.useSyncExternalStore!==void 0?o.useSyncExternalStore:ct,useSyncExternalStoreShim_production_min}shim.exports=requireUseSyncExternalStoreShim_production_min();var shimExports=shim.exports;const mergeRefs=(...o)=>e=>{o.forEach(s=>{typeof s=="function"?s(e):s&&(s.current=e)})},Portals=({contentComponent:o})=>{const e=shimExports.useSyncExternalStore(o.subscribe,o.getSnapshot,o.getServerSnapshot);return React.createElement(React.Fragment,null,Object.values(e))};function getInstance(){const o=new Set;let e={};return{subscribe(s){return o.add(s),()=>{o.delete(s)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(s,a){e={...e,[s]:ReactDOM.createPortal(a.reactElement,a.element,s)},o.forEach(d=>d())},removeRenderer(s){const a={...e};delete a[s],e=a,o.forEach(d=>d())}}}class PureEditorContent extends React.Component{constructor(e){var s;super(e),this.editorContentRef=React.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((s=e.editor)===null||s===void 0)&&s.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const s=this.editorContentRef.current;s.append(...e.options.element.childNodes),e.setOptions({element:s}),e.contentComponent=getInstance(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(a=>a.hasContentComponentInitialized?a:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const s=document.createElement("div");s.append(...e.options.element.childNodes),e.setOptions({element:s})}render(){const{editor:e,innerRef:s,...a}=this.props;return React.createElement(React.Fragment,null,React.createElement("div",{ref:mergeRefs(s,this.editorContentRef),...a}),(e==null?void 0:e.contentComponent)&&React.createElement(Portals,{contentComponent:e.contentComponent}))}}const EditorContentWithKey=reactExports.forwardRef((o,e)=>{const s=React.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[o.editor]);return React.createElement(PureEditorContent,{key:s,innerRef:e,...o})}),EditorContent=React.memo(EditorContentWithKey);var react=function o(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var a,d,b;if(Array.isArray(e)){if(a=e.length,a!=s.length)return!1;for(d=a;d--!==0;)if(!o(e[d],s[d]))return!1;return!0}if(e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(d of e.entries())if(!s.has(d[0]))return!1;for(d of e.entries())if(!o(d[1],s.get(d[0])))return!1;return!0}if(e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(d of e.entries())if(!s.has(d[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if(a=e.length,a!=s.length)return!1;for(d=a;d--!==0;)if(e[d]!==s[d])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(b=Object.keys(e),a=b.length,a!==Object.keys(s).length)return!1;for(d=a;d--!==0;)if(!Object.prototype.hasOwnProperty.call(s,b[d]))return!1;for(d=a;d--!==0;){var _=b[d];if(!(_==="_owner"&&e.$$typeof)&&!o(e[_],s[_]))return!1}return!0}return e!==e&&s!==s},deepEqual=getDefaultExportFromCjs(react),withSelector={exports:{}},withSelector_production_min={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production_min;function requireWithSelector_production_min(){if(hasRequiredWithSelector_production_min)return withSelector_production_min;hasRequiredWithSelector_production_min=1;var o=React,e=shimExports;function s(st,ct){return st===ct&&(st!==0||1/st===1/ct)||st!==st&&ct!==ct}var a=typeof Object.is=="function"?Object.is:s,d=e.useSyncExternalStore,b=o.useRef,_=o.useEffect,_e=o.useMemo,ot=o.useDebugValue;return withSelector_production_min.useSyncExternalStoreWithSelector=function(st,ct,ft,mt,bt){var wt=b(null);if(wt.current===null){var Ct={hasValue:!1,value:null};wt.current=Ct}else Ct=wt.current;wt=_e(function(){function It(qt){if(!Pt){if(Pt=!0,Tt=qt,qt=mt(qt),bt!==void 0&&Ct.hasValue){var Nt=Ct.value;if(bt(Nt,qt))return Gt=Nt}return Gt=qt}if(Nt=Gt,a(Tt,qt))return Nt;var Qt=mt(qt);return bt!==void 0&&bt(Nt,Qt)?Nt:(Tt=qt,Gt=Qt)}var Pt=!1,Tt,Gt,Jt=ft===void 0?null:ft;return[function(){return It(ct())},Jt===null?void 0:function(){return It(Jt())}]},[ct,ft,mt,bt]);var Rt=d(st,wt[0],wt[1]);return _(function(){Ct.hasValue=!0,Ct.value=Rt},[Rt]),ot(Rt),Rt},withSelector_production_min}withSelector.exports=requireWithSelector_production_min();var withSelectorExports=withSelector.exports;class EditorStateManager{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const s=()=>{this.transactionNumber+=1,this.subscribers.forEach(d=>d())},a=this.editor;return a.on("transaction",s),()=>{a.off("transaction",s)}}}}function useEditorState(o){var e;const[s]=reactExports.useState(()=>new EditorStateManager(o.editor)),a=withSelectorExports.useSyncExternalStoreWithSelector(s.subscribe,s.getSnapshot,s.getServerSnapshot,o.selector,(e=o.equalityFn)!==null&&e!==void 0?e:deepEqual);return reactExports.useEffect(()=>s.watch(o.editor),[o.editor,s]),reactExports.useDebugValue(a),a}const isDev=!1,isSSR=typeof window>"u",isNext=isSSR||!!(typeof window<"u"&&window.next);class EditorInstanceManager{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(s=>s())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return isSSR||isNext?null:this.createEditor();if(this.options.current.immediatelyRender&&isSSR&&isDev)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...a)=>{var d,b;return(b=(d=this.options.current).onBeforeCreate)===null||b===void 0?void 0:b.call(d,...a)},onBlur:(...a)=>{var d,b;return(b=(d=this.options.current).onBlur)===null||b===void 0?void 0:b.call(d,...a)},onCreate:(...a)=>{var d,b;return(b=(d=this.options.current).onCreate)===null||b===void 0?void 0:b.call(d,...a)},onDestroy:(...a)=>{var d,b;return(b=(d=this.options.current).onDestroy)===null||b===void 0?void 0:b.call(d,...a)},onFocus:(...a)=>{var d,b;return(b=(d=this.options.current).onFocus)===null||b===void 0?void 0:b.call(d,...a)},onSelectionUpdate:(...a)=>{var d,b;return(b=(d=this.options.current).onSelectionUpdate)===null||b===void 0?void 0:b.call(d,...a)},onTransaction:(...a)=>{var d,b;return(b=(d=this.options.current).onTransaction)===null||b===void 0?void 0:b.call(d,...a)},onUpdate:(...a)=>{var d,b;return(b=(d=this.options.current).onUpdate)===null||b===void 0?void 0:b.call(d,...a)},onContentError:(...a)=>{var d,b;return(b=(d=this.options.current).onContentError)===null||b===void 0?void 0:b.call(d,...a)},onDrop:(...a)=>{var d,b;return(b=(d=this.options.current).onDrop)===null||b===void 0?void 0:b.call(d,...a)},onPaste:(...a)=>{var d,b;return(b=(d=this.options.current).onPaste)===null||b===void 0?void 0:b.call(d,...a)}};return new Editor(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((a,d)=>a===e[d]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,s=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){s&&s.setOptions(this.options.current);return}s&&!s.isDestroyed&&(s.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function useEditor(o={},e=[]){const s=reactExports.useRef(o);s.current=o;const[a]=reactExports.useState(()=>new EditorInstanceManager(s)),d=shimExports.useSyncExternalStore(a.subscribe,a.getEditor,a.getServerSnapshot);return reactExports.useDebugValue(d),reactExports.useEffect(a.onRender(e)),useEditorState({editor:d,selector:({transactionNumber:b})=>o.shouldRerenderOnTransaction===!1?null:o.immediatelyRender&&b===0?0:b+1}),d}const EditorContext=reactExports.createContext({editor:null}),EditorConsumer=EditorContext.Consumer,useCurrentEditor=()=>reactExports.useContext(EditorContext);function EditorProvider({children:o,slotAfter:e,slotBefore:s,editorContainerProps:a={},...d}){const b=useEditor(d);return b?React.createElement(EditorContext.Provider,{value:{editor:b}},s,React.createElement(EditorConsumer,null,({editor:_})=>React.createElement(EditorContent,{editor:_,...a})),o,e):null}const ReactNodeViewContext=reactExports.createContext({onDragStart:void 0}),useReactNodeView=()=>reactExports.useContext(ReactNodeViewContext);React.forwardRef((o,e)=>{const{onDragStart:s}=useReactNodeView(),a=o.as||"div";return React.createElement(a,{...o,ref:e,"data-node-view-wrapper":"",onDragStart:s,style:{whiteSpace:"normal",...o.style}})});const inputRegex$4=/^\s*>\s$/,Blockquote=Node$1.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:o}){return["blockquote",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{setBlockquote:()=>({commands:o})=>o.wrapIn(this.name),toggleBlockquote:()=>({commands:o})=>o.toggleWrap(this.name),unsetBlockquote:()=>({commands:o})=>o.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$4,type:this.type})]}}),starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:o=>o.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:o=>o.type.name===this.name},{style:"font-weight",getAttrs:o=>/^(bold(er)?|[5-9]\d{2,})$/.test(o)&&null}]},renderHTML({HTMLAttributes:o}){return["strong",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{setBold:()=>({commands:o})=>o.setMark(this.name),toggleBold:()=>({commands:o})=>o.toggleMark(this.name),unsetBold:()=>({commands:o})=>o.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),ListItemName$1="listItem",TextStyleName$1="textStyle",inputRegex$3=/^\s*([-+*])\s$/,BulletList=Node$1.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:o}){return["ul",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{toggleBulletList:()=>({commands:o,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName$1,this.editor.getAttributes(TextStyleName$1)).run():o.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let o=wrappingInputRule({find:inputRegex$3,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(o=wrappingInputRule({find:inputRegex$3,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyleName$1),editor:this.editor})),[o]}}),inputRegex$2=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,pasteRegex$1=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:o}){return["code",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{setCode:()=>({commands:o})=>o.setMark(this.name),toggleCode:()=>({commands:o})=>o.toggleMark(this.name),unsetCode:()=>({commands:o})=>o.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$2,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node$1.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:o=>{var e;const{languageClassPrefix:s}=this.options,b=[...((e=o.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(_=>_.startsWith(s)).map(_=>_.replace(s,""))[0];return b||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:o,HTMLAttributes:e}){return["pre",mergeAttributes(this.options.HTMLAttributes,e),["code",{class:o.attrs.language?this.options.languageClassPrefix+o.attrs.language:null},0]]},addCommands(){return{setCodeBlock:o=>({commands:e})=>e.setNode(this.name,o),toggleCodeBlock:o=>({commands:e})=>e.toggleNode(this.name,"paragraph",o)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:o,$anchor:e}=this.editor.state.selection,s=e.pos===1;return!o||e.parent.type.name!==this.name?!1:s||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:o})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=o,{selection:s}=e,{$from:a,empty:d}=s;if(!d||a.parent.type!==this.type)return!1;const b=a.parentOffset===a.parent.nodeSize-2,_=a.parent.textContent.endsWith(`

`);return!b||!_?!1:o.chain().command(({tr:_e})=>(_e.delete(a.pos-2,a.pos),!0)).exitCode().run()},ArrowDown:({editor:o})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=o,{selection:s,doc:a}=e,{$from:d,empty:b}=s;if(!b||d.parent.type!==this.type||!(d.parentOffset===d.parent.nodeSize-2))return!1;const _e=d.after();return _e===void 0?!1:a.nodeAt(_e)?o.commands.command(({tr:st})=>(st.setSelection(Selection.near(a.resolve(_e))),!0)):o.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:o=>({language:o[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:o=>({language:o[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(o,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const s=e.clipboardData.getData("text/plain"),a=e.clipboardData.getData("vscode-editor-data"),d=a?JSON.parse(a):void 0,b=d==null?void 0:d.mode;if(!s||!b)return!1;const{tr:_,schema:_e}=o.state,ot=_e.text(s.replace(/\r\n?/g,`
`));return _.replaceSelectionWith(this.type.create({language:b},ot)),_.selection.$from.parent.type!==this.type&&_.setSelection(TextSelection.near(_.doc.resolve(Math.max(0,_.selection.from-2)))),_.setMeta("paste",!0),o.dispatch(_),!0}}})]}}),Document=Node$1.create({name:"doc",topNode:!0,content:"block+"});function dropCursor(o={}){return new Plugin({view(e){return new DropCursorView(e,o)}})}class DropCursorView{constructor(e,s){var a;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(a=s.width)!==null&&a!==void 0?a:1,this.color=s.color===!1?void 0:s.color||"black",this.class=s.class,this.handlers=["dragover","dragend","drop","dragleave"].map(d=>{let b=_=>{this[d](_)};return e.dom.addEventListener(d,b),{name:d,handler:b}})}destroy(){this.handlers.forEach(({name:e,handler:s})=>this.editorView.dom.removeEventListener(e,s))}update(e,s){this.cursorPos!=null&&s.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),s=!e.parent.inlineContent,a;if(s){let _e=e.nodeBefore,ot=e.nodeAfter;if(_e||ot){let st=this.editorView.nodeDOM(this.cursorPos-(_e?_e.nodeSize:0));if(st){let ct=st.getBoundingClientRect(),ft=_e?ct.bottom:ct.top;_e&&ot&&(ft=(ft+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),a={left:ct.left,right:ct.right,top:ft-this.width/2,bottom:ft+this.width/2}}}}if(!a){let _e=this.editorView.coordsAtPos(this.cursorPos);a={left:_e.left-this.width/2,right:_e.left+this.width/2,top:_e.top,bottom:_e.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",s),this.element.classList.toggle("prosemirror-dropcursor-inline",!s);let b,_;if(!d||d==document.body&&getComputedStyle(d).position=="static")b=-pageXOffset,_=-pageYOffset;else{let _e=d.getBoundingClientRect();b=_e.left-d.scrollLeft,_=_e.top-d.scrollTop}this.element.style.left=a.left-b+"px",this.element.style.top=a.top-_+"px",this.element.style.width=a.right-a.left+"px",this.element.style.height=a.bottom-a.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let s=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),a=s&&s.inside>=0&&this.editorView.state.doc.nodeAt(s.inside),d=a&&a.type.spec.disableDropCursor,b=typeof d=="function"?d(this.editorView,s,e):d;if(s&&!b){let _=s.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let _e=dropPoint(this.editorView.state.doc,_,this.editorView.dragging.slice);_e!=null&&(_=_e)}this.setCursor(_),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});class GapCursor extends Selection{constructor(e){super(e,e)}map(e,s){let a=e.resolve(s.map(this.head));return GapCursor.valid(a)?new GapCursor(a):Selection.near(a)}content(){return Slice.empty}eq(e){return e instanceof GapCursor&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(e.resolve(s.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(e){let s=e.parent;if(s.isTextblock||!closedBefore(e)||!closedAfter(e))return!1;let a=s.type.spec.allowGapCursor;if(a!=null)return a;let d=s.contentMatchAt(e.index()).defaultType;return d&&d.isTextblock}static findGapCursorFrom(e,s,a=!1){e:for(;;){if(!a&&GapCursor.valid(e))return e;let d=e.pos,b=null;for(let _=e.depth;;_--){let _e=e.node(_);if(s>0?e.indexAfter(_)<_e.childCount:e.index(_)>0){b=_e.child(s>0?e.indexAfter(_):e.index(_)-1);break}else if(_==0)return null;d+=s;let ot=e.doc.resolve(d);if(GapCursor.valid(ot))return ot}for(;;){let _=s>0?b.firstChild:b.lastChild;if(!_){if(b.isAtom&&!b.isText&&!NodeSelection.isSelectable(b)){e=e.doc.resolve(d+b.nodeSize*s),a=!1;continue e}break}b=_,d+=s;let _e=e.doc.resolve(d);if(GapCursor.valid(_e))return _e}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(e){this.pos=e}map(e){return new GapBookmark(e.map(this.pos))}resolve(e){let s=e.resolve(this.pos);return GapCursor.valid(s)?new GapCursor(s):Selection.near(s)}}function closedBefore(o){for(let e=o.depth;e>=0;e--){let s=o.index(e),a=o.node(e);if(s==0){if(a.type.spec.isolating)return!0;continue}for(let d=a.child(s-1);;d=d.lastChild){if(d.childCount==0&&!d.inlineContent||d.isAtom||d.type.spec.isolating)return!0;if(d.inlineContent)return!1}}return!0}function closedAfter(o){for(let e=o.depth;e>=0;e--){let s=o.indexAfter(e),a=o.node(e);if(s==a.childCount){if(a.type.spec.isolating)return!0;continue}for(let d=a.child(s);;d=d.firstChild){if(d.childCount==0&&!d.inlineContent||d.isAtom||d.type.spec.isolating)return!0;if(d.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(o,e,s){return e.pos==s.pos&&GapCursor.valid(s)?new GapCursor(s):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(o,e){const s=o=="vert"?e>0?"down":"up":e>0?"right":"left";return function(a,d,b){let _=a.selection,_e=e>0?_.$to:_.$from,ot=_.empty;if(_ instanceof TextSelection){if(!b.endOfTextblock(s)||_e.depth==0)return!1;ot=!1,_e=a.doc.resolve(e>0?_e.after():_e.before())}let st=GapCursor.findGapCursorFrom(_e,e,ot);return st?(d&&d(a.tr.setSelection(new GapCursor(st))),!0):!1}}function handleClick(o,e,s){if(!o||!o.editable)return!1;let a=o.state.doc.resolve(e);if(!GapCursor.valid(a))return!1;let d=o.posAtCoords({left:s.clientX,top:s.clientY});return d&&d.inside>-1&&NodeSelection.isSelectable(o.state.doc.nodeAt(d.inside))?!1:(o.dispatch(o.state.tr.setSelection(new GapCursor(a))),!0)}function beforeinput(o,e){if(e.inputType!="insertCompositionText"||!(o.state.selection instanceof GapCursor))return!1;let{$from:s}=o.state.selection,a=s.parent.contentMatchAt(s.index()).findWrapping(o.state.schema.nodes.text);if(!a)return!1;let d=Fragment.empty;for(let _=a.length-1;_>=0;_--)d=Fragment.from(a[_].createAndFill(null,d));let b=o.state.tr.replace(s.pos,s.pos,new Slice(d,0,0));return b.setSelection(TextSelection.near(b.doc.resolve(s.pos+1))),o.dispatch(b),!1}function drawGapCursor(o){if(!(o.selection instanceof GapCursor))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",DecorationSet.create(o.doc,[Decoration.widget(o.selection.head,e,{key:"gapcursor"})])}const Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(o){var e;const s={name:o.name,options:o.options,storage:o.storage};return{allowGapCursor:(e=callOrReturn(getExtensionField(o,"allowGapCursor",s)))!==null&&e!==void 0?e:null}}}),HardBreak=Node$1.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:o}){return["br",mergeAttributes(this.options.HTMLAttributes,o)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:o,chain:e,state:s,editor:a})=>o.first([()=>o.exitCode(),()=>o.command(()=>{const{selection:d,storedMarks:b}=s;if(d.$from.parent.type.spec.isolating)return!1;const{keepMarks:_}=this.options,{splittableMarks:_e}=a.extensionManager,ot=b||d.$to.parentOffset&&d.$from.marks();return e().insertContent({type:this.name}).command(({tr:st,dispatch:ct})=>{if(ct&&ot&&_){const ft=ot.filter(mt=>_e.includes(mt.type.name));st.ensureMarks(ft)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node$1.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(o=>({tag:`h${o}`,attrs:{level:o}}))},renderHTML({node:o,HTMLAttributes:e}){return[`h${this.options.levels.includes(o.attrs.level)?o.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:o=>({commands:e})=>this.options.levels.includes(o.level)?e.setNode(this.name,o):!1,toggleHeading:o=>({commands:e})=>this.options.levels.includes(o.level)?e.toggleNode(this.name,"paragraph",o):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((o,e)=>({...o,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(o=>textblockTypeInputRule({find:new RegExp(`^(#{1,${o}})\\s$`),type:this.type,getAttributes:{level:o}}))}});var GOOD_LEAF_SIZE=200,RopeSequence=function o(){};RopeSequence.prototype.append=function o(e){return e.length?(e=RopeSequence.from(e),!this.length&&e||e.length<GOOD_LEAF_SIZE&&this.leafAppend(e)||this.length<GOOD_LEAF_SIZE&&e.leafPrepend(this)||this.appendInner(e)):this};RopeSequence.prototype.prepend=function o(e){return e.length?RopeSequence.from(e).append(this):this};RopeSequence.prototype.appendInner=function o(e){return new Append(this,e)};RopeSequence.prototype.slice=function o(e,s){return e===void 0&&(e=0),s===void 0&&(s=this.length),e>=s?RopeSequence.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,s))};RopeSequence.prototype.get=function o(e){if(!(e<0||e>=this.length))return this.getInner(e)};RopeSequence.prototype.forEach=function o(e,s,a){s===void 0&&(s=0),a===void 0&&(a=this.length),s<=a?this.forEachInner(e,s,a,0):this.forEachInvertedInner(e,s,a,0)};RopeSequence.prototype.map=function o(e,s,a){s===void 0&&(s=0),a===void 0&&(a=this.length);var d=[];return this.forEach(function(b,_){return d.push(e(b,_))},s,a),d};RopeSequence.from=function o(e){return e instanceof RopeSequence?e:e&&e.length?new Leaf(e):RopeSequence.empty};var Leaf=function(o){function e(a){o.call(this),this.values=a}o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e;var s={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(d,b){return d==0&&b==this.length?this:new e(this.values.slice(d,b))},e.prototype.getInner=function(d){return this.values[d]},e.prototype.forEachInner=function(d,b,_,_e){for(var ot=b;ot<_;ot++)if(d(this.values[ot],_e+ot)===!1)return!1},e.prototype.forEachInvertedInner=function(d,b,_,_e){for(var ot=b-1;ot>=_;ot--)if(d(this.values[ot],_e+ot)===!1)return!1},e.prototype.leafAppend=function(d){if(this.length+d.length<=GOOD_LEAF_SIZE)return new e(this.values.concat(d.flatten()))},e.prototype.leafPrepend=function(d){if(this.length+d.length<=GOOD_LEAF_SIZE)return new e(d.flatten().concat(this.values))},s.length.get=function(){return this.values.length},s.depth.get=function(){return 0},Object.defineProperties(e.prototype,s),e}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(o){function e(s,a){o.call(this),this.left=s,this.right=a,this.length=s.length+a.length,this.depth=Math.max(s.depth,a.depth)+1}return o&&(e.__proto__=o),e.prototype=Object.create(o&&o.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(a){return a<this.left.length?this.left.get(a):this.right.get(a-this.left.length)},e.prototype.forEachInner=function(a,d,b,_){var _e=this.left.length;if(d<_e&&this.left.forEachInner(a,d,Math.min(b,_e),_)===!1||b>_e&&this.right.forEachInner(a,Math.max(d-_e,0),Math.min(this.length,b)-_e,_+_e)===!1)return!1},e.prototype.forEachInvertedInner=function(a,d,b,_){var _e=this.left.length;if(d>_e&&this.right.forEachInvertedInner(a,d-_e,Math.max(b,_e)-_e,_+_e)===!1||b<_e&&this.left.forEachInvertedInner(a,Math.min(d,_e),b,_)===!1)return!1},e.prototype.sliceInner=function(a,d){if(a==0&&d==this.length)return this;var b=this.left.length;return d<=b?this.left.slice(a,d):a>=b?this.right.slice(a-b,d-b):this.left.slice(a,b).append(this.right.slice(0,d-b))},e.prototype.leafAppend=function(a){var d=this.right.leafAppend(a);if(d)return new e(this.left,d)},e.prototype.leafPrepend=function(a){var d=this.left.leafPrepend(a);if(d)return new e(d,this.right)},e.prototype.appendInner=function(a){return this.left.depth>=Math.max(this.right.depth,a.depth)+1?new e(this.left,new e(this.right,a)):new e(this,a)},e}(RopeSequence);const max_empty_items=500;class Branch{constructor(e,s){this.items=e,this.eventCount=s}popEvent(e,s){if(this.eventCount==0)return null;let a=this.items.length;for(;;a--)if(this.items.get(a-1).selection){--a;break}let d,b;s&&(d=this.remapping(a,this.items.length),b=d.maps.length);let _=e.tr,_e,ot,st=[],ct=[];return this.items.forEach((ft,mt)=>{if(!ft.step){d||(d=this.remapping(a,mt+1),b=d.maps.length),b--,ct.push(ft);return}if(d){ct.push(new Item(ft.map));let bt=ft.step.map(d.slice(b)),wt;bt&&_.maybeStep(bt).doc&&(wt=_.mapping.maps[_.mapping.maps.length-1],st.push(new Item(wt,void 0,void 0,st.length+ct.length))),b--,wt&&d.appendMap(wt,b)}else _.maybeStep(ft.step);if(ft.selection)return _e=d?ft.selection.map(d.slice(b)):ft.selection,ot=new Branch(this.items.slice(0,a).append(ct.reverse().concat(st)),this.eventCount-1),!1},this.items.length,0),{remaining:ot,transform:_,selection:_e}}addTransform(e,s,a,d){let b=[],_=this.eventCount,_e=this.items,ot=!d&&_e.length?_e.get(_e.length-1):null;for(let ct=0;ct<e.steps.length;ct++){let ft=e.steps[ct].invert(e.docs[ct]),mt=new Item(e.mapping.maps[ct],ft,s),bt;(bt=ot&&ot.merge(mt))&&(mt=bt,ct?b.pop():_e=_e.slice(0,_e.length-1)),b.push(mt),s&&(_++,s=void 0),d||(ot=mt)}let st=_-a.depth;return st>DEPTH_OVERFLOW&&(_e=cutOffEvents(_e,st),_-=st),new Branch(_e.append(b),_)}remapping(e,s){let a=new Mapping;return this.items.forEach((d,b)=>{let _=d.mirrorOffset!=null&&b-d.mirrorOffset>=e?a.maps.length-d.mirrorOffset:void 0;a.appendMap(d.map,_)},e,s),a}addMaps(e){return this.eventCount==0?this:new Branch(this.items.append(e.map(s=>new Item(s))),this.eventCount)}rebased(e,s){if(!this.eventCount)return this;let a=[],d=Math.max(0,this.items.length-s),b=e.mapping,_=e.steps.length,_e=this.eventCount;this.items.forEach(mt=>{mt.selection&&_e--},d);let ot=s;this.items.forEach(mt=>{let bt=b.getMirror(--ot);if(bt==null)return;_=Math.min(_,bt);let wt=b.maps[bt];if(mt.step){let Ct=e.steps[bt].invert(e.docs[bt]),Rt=mt.selection&&mt.selection.map(b.slice(ot+1,bt));Rt&&_e++,a.push(new Item(wt,Ct,Rt))}else a.push(new Item(wt))},d);let st=[];for(let mt=s;mt<_;mt++)st.push(new Item(b.maps[mt]));let ct=this.items.slice(0,d).append(st).append(a),ft=new Branch(ct,_e);return ft.emptyItemCount()>max_empty_items&&(ft=ft.compress(this.items.length-a.length)),ft}emptyItemCount(){let e=0;return this.items.forEach(s=>{s.step||e++}),e}compress(e=this.items.length){let s=this.remapping(0,e),a=s.maps.length,d=[],b=0;return this.items.forEach((_,_e)=>{if(_e>=e)d.push(_),_.selection&&b++;else if(_.step){let ot=_.step.map(s.slice(a)),st=ot&&ot.getMap();if(a--,st&&s.appendMap(st,a),ot){let ct=_.selection&&_.selection.map(s.slice(a));ct&&b++;let ft=new Item(st.invert(),ot,ct),mt,bt=d.length-1;(mt=d.length&&d[bt].merge(ft))?d[bt]=mt:d.push(ft)}}else _.map&&a--},this.items.length,0),new Branch(RopeSequence.from(d.reverse()),b)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(o,e){let s;return o.forEach((a,d)=>{if(a.selection&&e--==0)return s=d,!1}),o.slice(s)}class Item{constructor(e,s,a,d){this.map=e,this.step=s,this.selection=a,this.mirrorOffset=d}merge(e){if(this.step&&e.step&&!e.selection){let s=e.step.merge(this.step);if(s)return new Item(s.getMap().invert(),s,this.selection)}}}class HistoryState{constructor(e,s,a,d,b){this.done=e,this.undone=s,this.prevRanges=a,this.prevTime=d,this.prevComposition=b}}const DEPTH_OVERFLOW=20;function applyTransaction(o,e,s,a){let d=s.getMeta(historyKey),b;if(d)return d.historyState;s.getMeta(closeHistoryKey)&&(o=new HistoryState(o.done,o.undone,null,0,-1));let _=s.getMeta("appendedTransaction");if(s.steps.length==0)return o;if(_&&_.getMeta(historyKey))return _.getMeta(historyKey).redo?new HistoryState(o.done.addTransform(s,void 0,a,mustPreserveItems(e)),o.undone,rangesFor(s.mapping.maps),o.prevTime,o.prevComposition):new HistoryState(o.done,o.undone.addTransform(s,void 0,a,mustPreserveItems(e)),null,o.prevTime,o.prevComposition);if(s.getMeta("addToHistory")!==!1&&!(_&&_.getMeta("addToHistory")===!1)){let _e=s.getMeta("composition"),ot=o.prevTime==0||!_&&o.prevComposition!=_e&&(o.prevTime<(s.time||0)-a.newGroupDelay||!isAdjacentTo(s,o.prevRanges)),st=_?mapRanges(o.prevRanges,s.mapping):rangesFor(s.mapping.maps);return new HistoryState(o.done.addTransform(s,ot?e.selection.getBookmark():void 0,a,mustPreserveItems(e)),Branch.empty,st,s.time,_e??o.prevComposition)}else return(b=s.getMeta("rebased"))?new HistoryState(o.done.rebased(s,b),o.undone.rebased(s,b),mapRanges(o.prevRanges,s.mapping),o.prevTime,o.prevComposition):new HistoryState(o.done.addMaps(s.mapping.maps),o.undone.addMaps(s.mapping.maps),mapRanges(o.prevRanges,s.mapping),o.prevTime,o.prevComposition)}function isAdjacentTo(o,e){if(!e)return!1;if(!o.docChanged)return!0;let s=!1;return o.mapping.maps[0].forEach((a,d)=>{for(let b=0;b<e.length;b+=2)a<=e[b+1]&&d>=e[b]&&(s=!0)}),s}function rangesFor(o){let e=[];for(let s=o.length-1;s>=0&&e.length==0;s--)o[s].forEach((a,d,b,_)=>e.push(b,_));return e}function mapRanges(o,e){if(!o)return null;let s=[];for(let a=0;a<o.length;a+=2){let d=e.map(o[a],1),b=e.map(o[a+1],-1);d<=b&&s.push(d,b)}return s}function histTransaction(o,e,s){let a=mustPreserveItems(e),d=historyKey.get(e).spec.config,b=(s?o.undone:o.done).popEvent(e,a);if(!b)return null;let _=b.selection.resolve(b.transform.doc),_e=(s?o.done:o.undone).addTransform(b.transform,e.selection.getBookmark(),d,a),ot=new HistoryState(s?_e:b.remaining,s?b.remaining:_e,null,0,-1);return b.transform.setSelection(_).setMeta(historyKey,{redo:s,historyState:ot})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(o){let e=o.plugins;if(cachedPreserveItemsPlugins!=e){cachedPreserveItems=!1,cachedPreserveItemsPlugins=e;for(let s=0;s<e.length;s++)if(e[s].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(o={}){return o={depth:o.depth||100,newGroupDelay:o.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(e,s,a){return applyTransaction(s,a,e,o)}},config:o,props:{handleDOMEvents:{beforeinput(e,s){let a=s.inputType,d=a=="historyUndo"?undo:a=="historyRedo"?redo:null;return d?(s.preventDefault(),d(e.state,e.dispatch)):!1}}}})}function buildCommand(o,e){return(s,a)=>{let d=historyKey.getState(s);if(!d||(o?d.undone:d.done).eventCount==0)return!1;if(a){let b=histTransaction(d,s,o);b&&a(e?b.scrollIntoView():b)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0),History=Extension.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:o,dispatch:e})=>undo(o,e),redo:()=>({state:o,dispatch:e})=>redo(o,e)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),HorizontalRule=Node$1.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:o}){return["hr",mergeAttributes(this.options.HTMLAttributes,o)]},addCommands(){return{setHorizontalRule:()=>({chain:o,state:e})=>{const{selection:s}=e,{$from:a,$to:d}=s,b=o();return a.parentOffset===0?b.insertContentAt({from:Math.max(a.pos-1,0),to:d.pos},{type:this.name}):isNodeSelection(s)?b.insertContentAt(d.pos,{type:this.name}):b.insertContent({type:this.name}),b.command(({tr:_,dispatch:_e})=>{var ot;if(_e){const{$to:st}=_.selection,ct=st.end();if(st.nodeAfter)st.nodeAfter.isTextblock?_.setSelection(TextSelection.create(_.doc,st.pos+1)):st.nodeAfter.isBlock?_.setSelection(NodeSelection.create(_.doc,st.pos)):_.setSelection(TextSelection.create(_.doc,st.pos));else{const ft=(ot=st.parent.type.contentMatch.defaultType)===null||ot===void 0?void 0:ot.create();ft&&(_.insert(ct,ft),_.setSelection(TextSelection.create(_.doc,ct+1)))}_.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:o=>o.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:o=>o.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:o}){return["em",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{setItalic:()=>({commands:o})=>o.setMark(this.name),toggleItalic:()=>({commands:o})=>o.toggleMark(this.name),unsetItalic:()=>({commands:o})=>o.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}}),ListItemName="listItem",TextStyleName="textStyle",inputRegex$1=/^(\d+)\.\s$/,OrderedList=Node$1.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:o=>o.hasAttribute("start")?parseInt(o.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:o=>o.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:o}){const{start:e,...s}=o;return e===1?["ol",mergeAttributes(this.options.HTMLAttributes,s),0]:["ol",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{toggleOrderedList:()=>({commands:o,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName,this.editor.getAttributes(TextStyleName)).run():o.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let o=wrappingInputRule({find:inputRegex$1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,s)=>s.childCount+s.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(o=wrappingInputRule({find:inputRegex$1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(TextStyleName)}),joinPredicate:(e,s)=>s.childCount+s.attrs.start===+e[1],editor:this.editor})),[o]}}),Paragraph=Node$1.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:o}){return["p",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{setParagraph:()=>({commands:o})=>o.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:o=>o.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:o}){return["s",mergeAttributes(this.options.HTMLAttributes,o),0]},addCommands(){return{setStrike:()=>({commands:o})=>o.setMark(this.name),toggleStrike:()=>({commands:o})=>o.toggleMark(this.name),unsetStrike:()=>({commands:o})=>o.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),Text=Node$1.create({name:"text",group:"inline"}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var o,e,s,a,d,b,_,_e,ot,st,ct,ft,mt,bt,wt,Ct,Rt,It;const Pt=[];return this.options.bold!==!1&&Pt.push(Bold.configure((o=this.options)===null||o===void 0?void 0:o.bold)),this.options.blockquote!==!1&&Pt.push(Blockquote.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&Pt.push(BulletList.configure((s=this.options)===null||s===void 0?void 0:s.bulletList)),this.options.code!==!1&&Pt.push(Code.configure((a=this.options)===null||a===void 0?void 0:a.code)),this.options.codeBlock!==!1&&Pt.push(CodeBlock.configure((d=this.options)===null||d===void 0?void 0:d.codeBlock)),this.options.document!==!1&&Pt.push(Document.configure((b=this.options)===null||b===void 0?void 0:b.document)),this.options.dropcursor!==!1&&Pt.push(Dropcursor.configure((_=this.options)===null||_===void 0?void 0:_.dropcursor)),this.options.gapcursor!==!1&&Pt.push(Gapcursor.configure((_e=this.options)===null||_e===void 0?void 0:_e.gapcursor)),this.options.hardBreak!==!1&&Pt.push(HardBreak.configure((ot=this.options)===null||ot===void 0?void 0:ot.hardBreak)),this.options.heading!==!1&&Pt.push(Heading.configure((st=this.options)===null||st===void 0?void 0:st.heading)),this.options.history!==!1&&Pt.push(History.configure((ct=this.options)===null||ct===void 0?void 0:ct.history)),this.options.horizontalRule!==!1&&Pt.push(HorizontalRule.configure((ft=this.options)===null||ft===void 0?void 0:ft.horizontalRule)),this.options.italic!==!1&&Pt.push(Italic.configure((mt=this.options)===null||mt===void 0?void 0:mt.italic)),this.options.listItem!==!1&&Pt.push(ListItem.configure((bt=this.options)===null||bt===void 0?void 0:bt.listItem)),this.options.orderedList!==!1&&Pt.push(OrderedList.configure((wt=this.options)===null||wt===void 0?void 0:wt.orderedList)),this.options.paragraph!==!1&&Pt.push(Paragraph.configure((Ct=this.options)===null||Ct===void 0?void 0:Ct.paragraph)),this.options.strike!==!1&&Pt.push(Strike.configure((Rt=this.options)===null||Rt===void 0?void 0:Rt.strike)),this.options.text!==!1&&Pt.push(Text.configure((It=this.options)===null||It===void 0?void 0:It.text)),Pt}}),MenuBar=()=>{const{editor:o}=useCurrentEditor(),e=reactExports.useCallback(()=>{const a=window.prompt("URL");a&&(o==null||o.chain().focus().setImage({src:a}).run())},[o]),s=reactExports.useCallback(()=>{const a=window.prompt("URL");a&&(o==null||o.chain().focus().extendMarkRange("link").setLink({href:a,target:"_blank"}).run())},[o]);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:fr.cx("fr-grid-row"),children:[jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[{onClick:()=>o==null?void 0:o.chain().focus().toggleBold().run(),disabled:!(o!=null&&o.can().chain().focus().toggleBold().run()),priority:o!=null&&o.isActive("bold")?"secondary":"tertiary no outline",iconId:"ri-bold",title:"Gras"},{onClick:()=>o==null?void 0:o.chain().focus().toggleItalic().run(),disabled:!(o!=null&&o.can().chain().focus().toggleItalic().run()),priority:o!=null&&o.isActive("italic")?"secondary":"tertiary no outline",iconId:"ri-italic",title:"Italique"},{onClick:()=>o==null?void 0:o.chain().focus().toggleStrike().run(),disabled:!(o!=null&&o.can().chain().focus().toggleStrike().run()),priority:o!=null&&o.isActive("strike")?"secondary":"tertiary no outline",iconId:"ri-strikethrough",title:"Barr"}],buttonsEquisized:!0,inlineLayoutWhen:"always",buttonsSize:"small"}),jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[{onClick:()=>o==null?void 0:o.chain().focus().toggleCode().run(),disabled:!(o!=null&&o.can().chain().focus().toggleCode().run()),priority:o!=null&&o.isActive("code")?"secondary":"tertiary no outline",iconId:"ri-code-s-slash-line",title:"Code"},{onClick:()=>o==null?void 0:o.chain().focus().setParagraph().run(),priority:o!=null&&o.isActive("paragraph")?"secondary":"tertiary no outline",iconId:"ri-paragraph",title:"Paragraphe"}],buttonsEquisized:!0,inlineLayoutWhen:"always",buttonsSize:"small"}),jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[1,2,3,4,5,6].map(a=>({onClick:()=>o==null?void 0:o.chain().focus().toggleHeading({level:a}).run(),priority:o!=null&&o.isActive("heading",{level:a})?"secondary":"tertiary no outline",title:`Titre ${a}`,iconId:`ri-h-${a}`})),buttonsEquisized:!0,inlineLayoutWhen:"always",buttonsSize:"small"}),jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[{onClick:()=>o==null?void 0:o.chain().focus().toggleBulletList().run(),priority:o!=null&&o.isActive("bulletList")?"secondary":"tertiary no outline",iconId:"ri-list-unordered",title:"Liste  puces"},{onClick:()=>o==null?void 0:o.chain().focus().toggleOrderedList().run(),priority:o!=null&&o.isActive("orderedList")?"secondary":"tertiary no outline",iconId:"ri-list-ordered",title:"Liste ordonne"}],buttonsEquisized:!0,inlineLayoutWhen:"always",buttonsSize:"small"}),jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[{onClick:()=>o==null?void 0:o.chain().focus().toggleCodeBlock().run(),priority:o!=null&&o.isActive("codeBlock")?"secondary":"tertiary no outline",iconId:"ri-code-block",title:"Bloc de code"},{onClick:()=>o==null?void 0:o.chain().focus().toggleBlockquote().run(),priority:o!=null&&o.isActive("blockquote")?"secondary":"tertiary no outline",iconId:"ri-double-quotes-l",title:"Citation"}],buttonsEquisized:!0,inlineLayoutWhen:"always",buttonsSize:"small"}),jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[{onClick:()=>o==null?void 0:o.chain().focus().undo().run(),disabled:!(o!=null&&o.can().chain().focus().undo().run()),priority:"tertiary no outline",iconId:"ri-arrow-go-back-line",title:"Dfaire"},{onClick:()=>o==null?void 0:o.chain().focus().redo().run(),disabled:!(o!=null&&o.can().chain().focus().redo().run()),priority:"tertiary no outline",iconId:"ri-arrow-go-forward-line",title:"Refaire"}],buttonsEquisized:!0,inlineLayoutWhen:"always",buttonsSize:"small"}),jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[{iconId:"ri-links-line",onClick:()=>s(),priority:"tertiary no outline",title:"Insrer un lien"},{iconId:"ri-image-line",onClick:()=>e(),priority:"tertiary no outline",title:"Insrer image"}],buttonsEquisized:!0,inlineLayoutWhen:"always",buttonsSize:"small"})]}),jsxRuntimeExports.jsx("div",{className:fr.cx("fr-grid-row"),children:jsxRuntimeExports.jsx(ButtonsGroup,{buttons:[{children:"Id Communaut",onClick:()=>o==null?void 0:o.chain().focus().insertContent("toto").run(),priority:"tertiary no outline",title:"Insrer l'id de la communaut"}],buttonsEquisized:!0,inlineLayoutWhen:"always"})})]})},extensions=[Color.configure({types:[TextStyle.name,ListItem.name]}),Image$1.configure(),Link.configure({protocols:["mailto"]}),TextStyle.configure({types:[ListItem.name]}),StarterKit.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1}})],initialContent=`
<h2>
  Hi there,
</h2>
<p>
  this is a <em>basic</em> example of <strong>Tiptap</strong>. Sure, there are all kind of basic text styles youd probably expect from a text editor?. But wait until you see the lists:
</p>
<ul>
  <li>
    Thats a bullet list with one 
  </li>
  <li>
     or two list items.
  </li>
</ul>
<p>
  Isnt that great? And all of that is editable. But wait, theres more. Lets try a code block:
</p>
<pre><code class="language-css">body {
  display: none;
}</code></pre>
<p>
  I know, I know, this is impressive. Its only the tip of the iceberg though. Give it a try and click a little bit around. Dont forget to check the other examples too.
</p>
<blockquote>
  Wow, thats amazing. Good work, boy! 
  <br />
   Mom
</blockquote>
`,Tiptap=()=>{const[o,e]=reactExports.useState(initialContent);return reactExports.useEffect(()=>{console.log(o)},[o]),jsxRuntimeExports.jsx(EditorProvider,{slotBefore:jsxRuntimeExports.jsx(MenuBar,{}),extensions,content:o,onUpdate:s=>{e(s.editor.getHTML())}})},TestTiptapEditor=()=>jsxRuntimeExports.jsx(Tiptap,{}),RouterRenderer=()=>{switch(useRoute().name){case"home":return"Accueil";case"map":return jsxRuntimeExports.jsx(ExtentMap,{});case"test_tinymceditor":return jsxRuntimeExports.jsx(TestTinyMCEditor,{});case"test_tiptap_editor":return jsxRuntimeExports.jsx(TestTiptapEditor,{});case"personal_data":return"Donnes personnelles";default:return"404"}},queryClient=new QueryClient,persister=createSyncStoragePersister({storage:window.localStorage});function App(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{brandTop:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["INTITULE",jsxRuntimeExports.jsx("br",{}),"OFFICIEL"]}),serviceTitle:"Nom du site / service",homeLinkProps:{...routes.home().link,title:"Accueil"},navigation:[{text:"Accueil",linkProps:routes.home().link},{text:"Cartes",linkProps:routes.map().link},{text:"Test TinyMCE",linkProps:routes.test_tinymceditor().link},{text:"Test Tiptap Editor",linkProps:routes.test_tiptap_editor().link},{text:"Donnes personnelles",linkProps:routes.personal_data().link},{text:"Lien externe",linkProps:{href:"https://example.fr",target:"_blank"},isActive:!1}],quickAccessItems:[headerFooterDisplayItem]}),jsxRuntimeExports.jsx(ConsentBannerAndConsentManagement,{}),jsxRuntimeExports.jsx("main",{children:jsxRuntimeExports.jsx(RouteProvider,{children:jsxRuntimeExports.jsx("div",{className:fr.cx("fr-container"),children:jsxRuntimeExports.jsxs(PersistQueryClientProvider,{client:queryClient,persistOptions:{persister},children:[jsxRuntimeExports.jsx(ReactQueryDevtools2,{initialIsOpen:!1}),jsxRuntimeExports.jsx(RouterRenderer,{})]})})})}),jsxRuntimeExports.jsx(Footer,{accessibility:"fully compliant",contentDescription:`
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor 
                        incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, 
                        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. 
                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore 
                        eu fugiat nulla pariatur. 
                    `,bottomItems:[jsxRuntimeExports.jsx(FooterPersonalDataPolicyItem,{}),jsxRuntimeExports.jsx(FooterConsentManagementItem,{}),headerFooterDisplayItem]})]})}startReactDsfr({defaultColorScheme:"system"});createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}))});export default Sle();
