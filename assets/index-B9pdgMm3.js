var Br=i=>{throw TypeError(i)};var es=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var Or=(i,e,a)=>e.has(i)||Br("Cannot "+a);var vt=(i,e,a)=>(Or(i,e,"read from private field"),a?a.call(i):e.get(i)),Ut=(i,e,a)=>e.has(i)?Br("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,a),Dt=(i,e,a,s)=>(Or(i,e,"write to private field"),s?s.call(i,a):e.set(i,a),a),Bt=(i,e,a)=>(Or(i,e,"access private method"),a);var Lr=(i,e,a,s)=>({set _(o){Dt(i,e,o,a)},get _(){return vt(i,e,s)}});var ts=es(exports=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$2(i){return i===null||typeof i!="object"?null:(i=z$1&&i[z$1]||i["@@iterator"],typeof i=="function"?i:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(i,e,a){this.props=i,this.context=e,this.refs=D$1,this.updater=a||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};E$1.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(i,e,a){this.props=i,this.context=e,this.refs=D$1,this.updater=a||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$2=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(i,e,a){var s,o={},c=null,d=null;if(e!=null)for(s in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(c=""+e.key),e)J.call(e,s)&&!L$1.hasOwnProperty(s)&&(o[s]=e[s]);var h=arguments.length-2;if(h===1)o.children=a;else if(1<h){for(var g=Array(h),_=0;_<h;_++)g[_]=arguments[_+2];o.children=g}if(i&&i.defaultProps)for(s in h=i.defaultProps,h)o[s]===void 0&&(o[s]=h[s]);return{$$typeof:l$1,type:i,key:c,ref:d,props:o,_owner:K$1.current}}function N$1(i,e){return{$$typeof:l$1,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function O$2(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$1}function escape(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(a){return e[a]})}var P$1=/\/+/g;function Q$1(i,e){return typeof i=="object"&&i!==null&&i.key!=null?escape(""+i.key):e.toString(36)}function R$1(i,e,a,s,o){var c=typeof i;(c==="undefined"||c==="boolean")&&(i=null);var d=!1;if(i===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(i.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=i,o=o(d),i=s===""?"."+Q$1(d,0):s,I$2(o)?(a="",i!=null&&(a=i.replace(P$1,"$&/")+"/"),R$1(o,e,a,"",function(_){return _})):o!=null&&(O$2(o)&&(o=N$1(o,a+(!o.key||d&&d.key===o.key?"":(""+o.key).replace(P$1,"$&/")+"/")+i)),e.push(o)),1;if(d=0,s=s===""?".":s+":",I$2(i))for(var h=0;h<i.length;h++){c=i[h];var g=s+Q$1(c,h);d+=R$1(c,e,a,g,o)}else if(g=A$2(i),typeof g=="function")for(i=g.call(i),h=0;!(c=i.next()).done;)c=c.value,g=s+Q$1(c,h++),d+=R$1(c,e,a,g,o);else if(c==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(i,e,a){if(i==null)return i;var s=[],o=0;return R$1(i,s,"","",function(c){return e.call(a,c,o++)}),s}function T$1(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(a){(i._status===0||i._status===-1)&&(i._status=1,i._result=a)},function(a){(i._status===0||i._status===-1)&&(i._status=2,i._result=a)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var U$1={current:null},V$2={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(i,e,a){S$1(i,function(){e.apply(this,arguments)},a)},count:function(i){var e=0;return S$1(i,function(){e++}),e},toArray:function(i){return S$1(i,function(e){return e})||[]},only:function(i){if(!O$2(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(i,e,a){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var s=C$1({},i.props),o=i.key,c=i.ref,d=i._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,d=K$1.current),e.key!==void 0&&(o=""+e.key),i.type&&i.type.defaultProps)var h=i.type.defaultProps;for(g in e)J.call(e,g)&&!L$1.hasOwnProperty(g)&&(s[g]=e[g]===void 0&&h!==void 0?h[g]:e[g])}var g=arguments.length-2;if(g===1)s.children=a;else if(1<g){h=Array(g);for(var _=0;_<g;_++)h[_]=arguments[_+2];s.children=h}return{$$typeof:l$1,type:i.type,key:o,ref:c,props:s,_owner:d}};react_production_min.createContext=function(i){return i={$$typeof:u,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t,_context:i},i.Consumer=i};react_production_min.createElement=M$2;react_production_min.createFactory=function(i){var e=M$2.bind(null,i);return e.type=i,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$1,render:i}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(i){return{$$typeof:y,_payload:{_status:-1,_result:i},_init:T$1}};react_production_min.memo=function(i,e){return{$$typeof:x,type:i,compare:e===void 0?null:e}};react_production_min.startTransition=function(i){var e=V$2.transition;V$2.transition={};try{i()}finally{V$2.transition=e}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(i,e){return U$1.current.useCallback(i,e)};react_production_min.useContext=function(i){return U$1.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$1.current.useDeferredValue(i)};react_production_min.useEffect=function(i,e){return U$1.current.useEffect(i,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(i,e,a){return U$1.current.useImperativeHandle(i,e,a)};react_production_min.useInsertionEffect=function(i,e){return U$1.current.useInsertionEffect(i,e)};react_production_min.useLayoutEffect=function(i,e){return U$1.current.useLayoutEffect(i,e)};react_production_min.useMemo=function(i,e){return U$1.current.useMemo(i,e)};react_production_min.useReducer=function(i,e,a){return U$1.current.useReducer(i,e,a)};react_production_min.useRef=function(i){return U$1.current.useRef(i)};react_production_min.useState=function(i){return U$1.current.useState(i)};react_production_min.useSyncExternalStore=function(i,e,a){return U$1.current.useSyncExternalStore(i,e,a)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs$1(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(i,e,a){var s,o={},c=null,d=null;a!==void 0&&(c=""+a),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(d=e.ref);for(s in e)m$1.call(e,s)&&!p$1.hasOwnProperty(s)&&(o[s]=e[s]);if(i&&i.defaultProps)for(s in e=i.defaultProps,e)o[s]===void 0&&(o[s]=e[s]);return{$$typeof:k,type:i,key:c,ref:d,props:o,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const scriptRel="modulepreload",assetsURL=function(i){return"/react-dsfr-playground-vite/"+i},seen={},__vitePreload=function(e,a,s){let o=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=Promise.allSettled(a.map(g=>{if(g=assetsURL(g),g in seen)return;seen[g]=!0;const _=g.endsWith(".css"),b=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${b}`))return;const j=document.createElement("link");if(j.rel=_?"stylesheet":scriptRel,_||(j.as="script"),j.crossOrigin="",j.href=g,h&&j.setAttribute("nonce",h),document.head.appendChild(j),_)return new Promise(($,_e)=>{j.addEventListener("load",$),j.addEventListener("error",()=>_e(new Error(`Unable to preload CSS for ${g}`)))})}))}function c(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return o.then(d=>{for(const h of d||[])h.status==="rejected"&&c(h.reason);return e().catch(c)})},isBrowser=typeof window=="object"&&typeof document=="object",overwriteReadonlyProp=(i,e,a)=>{try{i[e]=a}catch{}if(i[e]===a)return a;let s;const o=Object.getOwnPropertyDescriptor(i,e)||{enumerable:!0,configurable:!0};if(o.get)throw new Error(`Probably a wrong ides to overwrite ${String(e)} getter`);try{Object.defineProperty(i,e,{...o,value:a})}catch(c){s=c}if(i[e]!==a)throw s||new Error("Can't assign");return a},id$1=i=>i,assertIsRefWrapper={ref:id$1(void 0)};class AssertionError extends Error{constructor(e){if(super("Wrong assertion encountered"+(e?`: "${e}"`:"")),Object.setPrototypeOf(this,new.target.prototype),!!this.stack)try{overwriteReadonlyProp(this,"stack",this.stack.split(`
`).filter((...[,a])=>a!==1&&a!==2).join(`
`))}catch{}}}function assert$1(i,e){if(arguments.length===0&&(i=!0),assertIsRefWrapper.ref!==void 0){assertIsRefWrapper.ref=void 0;return}if(!i)throw new AssertionError(e)}const errorMessage=[`Wrong usage of the ${is.name} function refer to`,`https://docs.tsafe.dev/${is.name.toLowerCase()}`].join(" ");function is(i){const e={};if(assertIsRefWrapper.ref!==void 0)throw assertIsRefWrapper.ref=void 0,new Error(errorMessage);return assertIsRefWrapper.ref=e,Promise.resolve().then(()=>{if(assertIsRefWrapper.ref===e)throw new Error(errorMessage)}),null}function createStatefulObservable(i){const e=[],{get:a,set:s}=(()=>{let o;function c(d){o=[d],e.forEach(h=>h(d))}return{get:()=>(o===void 0&&(c(i()),assert$1(!is())),o[0]),set:c}})();return Object.defineProperty({current:null,subscribe:o=>(e.push(o),{unsubscribe:()=>e.splice(e.indexOf(o),1)})},"current",{enumerable:!0,get:a,set:s})}function useObservable(i,e){reactExports.useEffect(()=>{const a=[];return i({registerSubscription:s=>a.push(s)}),()=>{a.forEach(s=>s.unsubscribe()),a.length=0}},e)}function useRerenderOnChange(i){const[,e]=reactExports.useState(()=>i.current);useObservable(({registerSubscription:a})=>{const s=i.subscribe(o=>e(()=>o));a(s)},[i])}function useConstCallback(i){const e=reactExports.useRef(null);return e.current=i,reactExports.useState(()=>(...a)=>e.current(...a))[0]}const colorOptions={grey:{_1000_50:{default:"var(--grey-1000-50)",hover:"var(--grey-1000-50-hover)",active:"var(--grey-1000-50-active)"},_975_75:{default:"var(--grey-975-75)",hover:"var(--grey-975-75-hover)",active:"var(--grey-975-75-active)"},_950_100:{default:"var(--grey-950-100)",hover:"var(--grey-950-100-hover)",active:"var(--grey-950-100-active)"},_200_850:{default:"var(--grey-200-850)",hover:"var(--grey-200-850-hover)",active:"var(--grey-200-850-active)"},_925_125:{default:"var(--grey-925-125)"},_1000_75:{default:"var(--grey-1000-75)",hover:"var(--grey-1000-75-hover)",active:"var(--grey-1000-75-active)"},_1000_100:{default:"var(--grey-1000-100)",hover:"var(--grey-1000-100-hover)",active:"var(--grey-1000-100-active)"},_975_100:{default:"var(--grey-975-100)",hover:"var(--grey-975-100-hover)",active:"var(--grey-975-100-active)"},_975_125:{default:"var(--grey-975-125)",hover:"var(--grey-975-125-hover)",active:"var(--grey-975-125-active)"},_950_125:{default:"var(--grey-950-125)",hover:"var(--grey-950-125-hover)",active:"var(--grey-950-125-active)"},_950_150:{default:"var(--grey-950-150)",hover:"var(--grey-950-150-hover)",active:"var(--grey-950-150-active)"},_50_1000:{default:"var(--grey-50-1000)"},_425_625:{default:"var(--grey-425-625)"},_625_425:{default:"var(--grey-625-425)"},_0_1000:{default:"var(--grey-0-1000)"},_900_175:{default:"var(--grey-900-175)"}},blueFrance:{_975_75:{default:"var(--blue-france-975-75)",hover:"var(--blue-france-975-75-hover)",active:"var(--blue-france-975-75-active)"},_950_100:{default:"var(--blue-france-950-100)",hover:"var(--blue-france-950-100-hover)",active:"var(--blue-france-950-100-active)"},sun113_625:{default:"var(--blue-france-sun-113-625)",hover:"var(--blue-france-sun-113-625-hover)",active:"var(--blue-france-sun-113-625-active)"},_925_125:{default:"var(--blue-france-925-125)",hover:"var(--blue-france-925-125-hover)",active:"var(--blue-france-925-125-active)"},_975sun113:{default:"var(--blue-france-975-sun-113)"},main525:{default:"var(--blue-france-main-525)"},_850_200:{default:"var(--blue-france-850-200)"}},redMarianne:{_975_75:{default:"var(--red-marianne-975-75)",hover:"var(--red-marianne-975-75-hover)",active:"var(--red-marianne-975-75-active)"},_950_100:{default:"var(--red-marianne-950-100)",hover:"var(--red-marianne-950-100-hover)",active:"var(--red-marianne-950-100-active)"},_425_625:{default:"var(--red-marianne-425-625)",hover:"var(--red-marianne-425-625-hover)",active:"var(--red-marianne-425-625-active)"},_925_125:{default:"var(--red-marianne-925-125)",hover:"var(--red-marianne-925-125-hover)",active:"var(--red-marianne-925-125-active)"},main472:{default:"var(--red-marianne-main-472)"},_850_200:{default:"var(--red-marianne-850-200)"}},info:{_950_100:{default:"var(--info-950-100)",hover:"var(--info-950-100-hover)",active:"var(--info-950-100-active)"},_425_625:{default:"var(--info-425-625)",hover:"var(--info-425-625-hover)",active:"var(--info-425-625-active)"},_975_75:{default:"var(--info-975-75)"}},success:{_950_100:{default:"var(--success-950-100)",hover:"var(--success-950-100-hover)",active:"var(--success-950-100-active)"},_425_625:{default:"var(--success-425-625)",hover:"var(--success-425-625-hover)",active:"var(--success-425-625-active)"},_975_75:{default:"var(--success-975-75)"}},warning:{_950_100:{default:"var(--warning-950-100)",hover:"var(--warning-950-100-hover)",active:"var(--warning-950-100-active)"},_425_625:{default:"var(--warning-425-625)",hover:"var(--warning-425-625-hover)",active:"var(--warning-425-625-active)"},_975_75:{default:"var(--warning-975-75)"}},error:{_950_100:{default:"var(--error-950-100)",hover:"var(--error-950-100-hover)",active:"var(--error-950-100-active)"},_425_625:{default:"var(--error-425-625)",hover:"var(--error-425-625-hover)",active:"var(--error-425-625-active)"},_975_75:{default:"var(--error-975-75)"}},greenTilleulVerveine:{_975_75:{default:"var(--green-tilleul-verveine-975-75)",hover:"var(--green-tilleul-verveine-975-75-hover)",active:"var(--green-tilleul-verveine-975-75-active)"},_950_100:{default:"var(--green-tilleul-verveine-950-100)",hover:"var(--green-tilleul-verveine-950-100-hover)",active:"var(--green-tilleul-verveine-950-100-active)"},sun418moon817:{default:"var(--green-tilleul-verveine-sun-418-moon-817)",hover:"var(--green-tilleul-verveine-sun-418-moon-817-hover)",active:"var(--green-tilleul-verveine-sun-418-moon-817-active)"},_925_125:{default:"var(--green-tilleul-verveine-925-125)",hover:"var(--green-tilleul-verveine-925-125-hover)",active:"var(--green-tilleul-verveine-925-125-active)"},main707:{default:"var(--green-tilleul-verveine-main-707)"},_850_200:{default:"var(--green-tilleul-verveine-850-200)"}},greenBourgeon:{_975_75:{default:"var(--green-bourgeon-975-75)",hover:"var(--green-bourgeon-975-75-hover)",active:"var(--green-bourgeon-975-75-active)"},_950_100:{default:"var(--green-bourgeon-950-100)",hover:"var(--green-bourgeon-950-100-hover)",active:"var(--green-bourgeon-950-100-active)"},sun425moon759:{default:"var(--green-bourgeon-sun-425-moon-759)",hover:"var(--green-bourgeon-sun-425-moon-759-hover)",active:"var(--green-bourgeon-sun-425-moon-759-active)"},_925_125:{default:"var(--green-bourgeon-925-125)",hover:"var(--green-bourgeon-925-125-hover)",active:"var(--green-bourgeon-925-125-active)"},main640:{default:"var(--green-bourgeon-main-640)"},_850_200:{default:"var(--green-bourgeon-850-200)"}},greenEmeraude:{_975_75:{default:"var(--green-emeraude-975-75)",hover:"var(--green-emeraude-975-75-hover)",active:"var(--green-emeraude-975-75-active)"},_950_100:{default:"var(--green-emeraude-950-100)",hover:"var(--green-emeraude-950-100-hover)",active:"var(--green-emeraude-950-100-active)"},sun425moon753:{default:"var(--green-emeraude-sun-425-moon-753)",hover:"var(--green-emeraude-sun-425-moon-753-hover)",active:"var(--green-emeraude-sun-425-moon-753-active)"},_925_125:{default:"var(--green-emeraude-925-125)",hover:"var(--green-emeraude-925-125-hover)",active:"var(--green-emeraude-925-125-active)"},main632:{default:"var(--green-emeraude-main-632)"},_850_200:{default:"var(--green-emeraude-850-200)"}},greenMenthe:{_975_75:{default:"var(--green-menthe-975-75)",hover:"var(--green-menthe-975-75-hover)",active:"var(--green-menthe-975-75-active)"},_950_100:{default:"var(--green-menthe-950-100)",hover:"var(--green-menthe-950-100-hover)",active:"var(--green-menthe-950-100-active)"},sun373moon652:{default:"var(--green-menthe-sun-373-moon-652)",hover:"var(--green-menthe-sun-373-moon-652-hover)",active:"var(--green-menthe-sun-373-moon-652-active)"},_925_125:{default:"var(--green-menthe-925-125)",hover:"var(--green-menthe-925-125-hover)",active:"var(--green-menthe-925-125-active)"},main548:{default:"var(--green-menthe-main-548)"},_850_200:{default:"var(--green-menthe-850-200)"}},greenArchipel:{_975_75:{default:"var(--green-archipel-975-75)",hover:"var(--green-archipel-975-75-hover)",active:"var(--green-archipel-975-75-active)"},_950_100:{default:"var(--green-archipel-950-100)",hover:"var(--green-archipel-950-100-hover)",active:"var(--green-archipel-950-100-active)"},sun391moon716:{default:"var(--green-archipel-sun-391-moon-716)",hover:"var(--green-archipel-sun-391-moon-716-hover)",active:"var(--green-archipel-sun-391-moon-716-active)"},_925_125:{default:"var(--green-archipel-925-125)",hover:"var(--green-archipel-925-125-hover)",active:"var(--green-archipel-925-125-active)"},main557:{default:"var(--green-archipel-main-557)"},_850_200:{default:"var(--green-archipel-850-200)"}},blueEcume:{_975_75:{default:"var(--blue-ecume-975-75)",hover:"var(--blue-ecume-975-75-hover)",active:"var(--blue-ecume-975-75-active)"},_950_100:{default:"var(--blue-ecume-950-100)",hover:"var(--blue-ecume-950-100-hover)",active:"var(--blue-ecume-950-100-active)"},sun247moon675:{default:"var(--blue-ecume-sun-247-moon-675)",hover:"var(--blue-ecume-sun-247-moon-675-hover)",active:"var(--blue-ecume-sun-247-moon-675-active)"},_925_125:{default:"var(--blue-ecume-925-125)",hover:"var(--blue-ecume-925-125-hover)",active:"var(--blue-ecume-925-125-active)"},main400:{default:"var(--blue-ecume-main-400)"},_850_200:{default:"var(--blue-ecume-850-200)"}},blueCumulus:{_975_75:{default:"var(--blue-cumulus-975-75)",hover:"var(--blue-cumulus-975-75-hover)",active:"var(--blue-cumulus-975-75-active)"},_950_100:{default:"var(--blue-cumulus-950-100)",hover:"var(--blue-cumulus-950-100-hover)",active:"var(--blue-cumulus-950-100-active)"},sun368moon732:{default:"var(--blue-cumulus-sun-368-moon-732)",hover:"var(--blue-cumulus-sun-368-moon-732-hover)",active:"var(--blue-cumulus-sun-368-moon-732-active)"},_925_125:{default:"var(--blue-cumulus-925-125)",hover:"var(--blue-cumulus-925-125-hover)",active:"var(--blue-cumulus-925-125-active)"},main526:{default:"var(--blue-cumulus-main-526)"},_850_200:{default:"var(--blue-cumulus-850-200)"}},purpleGlycine:{_975_75:{default:"var(--purple-glycine-975-75)",hover:"var(--purple-glycine-975-75-hover)",active:"var(--purple-glycine-975-75-active)"},_950_100:{default:"var(--purple-glycine-950-100)",hover:"var(--purple-glycine-950-100-hover)",active:"var(--purple-glycine-950-100-active)"},sun319moon630:{default:"var(--purple-glycine-sun-319-moon-630)",hover:"var(--purple-glycine-sun-319-moon-630-hover)",active:"var(--purple-glycine-sun-319-moon-630-active)"},_925_125:{default:"var(--purple-glycine-925-125)",hover:"var(--purple-glycine-925-125-hover)",active:"var(--purple-glycine-925-125-active)"},main494:{default:"var(--purple-glycine-main-494)"},_850_200:{default:"var(--purple-glycine-850-200)"}},pinkMacaron:{_975_75:{default:"var(--pink-macaron-975-75)",hover:"var(--pink-macaron-975-75-hover)",active:"var(--pink-macaron-975-75-active)"},_950_100:{default:"var(--pink-macaron-950-100)",hover:"var(--pink-macaron-950-100-hover)",active:"var(--pink-macaron-950-100-active)"},sun406moon833:{default:"var(--pink-macaron-sun-406-moon-833)",hover:"var(--pink-macaron-sun-406-moon-833-hover)",active:"var(--pink-macaron-sun-406-moon-833-active)"},_925_125:{default:"var(--pink-macaron-925-125)",hover:"var(--pink-macaron-925-125-hover)",active:"var(--pink-macaron-925-125-active)"},main689:{default:"var(--pink-macaron-main-689)"},_850_200:{default:"var(--pink-macaron-850-200)"}},pinkTuile:{_975_75:{default:"var(--pink-tuile-975-75)",hover:"var(--pink-tuile-975-75-hover)",active:"var(--pink-tuile-975-75-active)"},_950_100:{default:"var(--pink-tuile-950-100)",hover:"var(--pink-tuile-950-100-hover)",active:"var(--pink-tuile-950-100-active)"},sun425moon750:{default:"var(--pink-tuile-sun-425-moon-750)",hover:"var(--pink-tuile-sun-425-moon-750-hover)",active:"var(--pink-tuile-sun-425-moon-750-active)"},_925_125:{default:"var(--pink-tuile-925-125)",hover:"var(--pink-tuile-925-125-hover)",active:"var(--pink-tuile-925-125-active)"},main556:{default:"var(--pink-tuile-main-556)"},_850_200:{default:"var(--pink-tuile-850-200)"}},yellowTournesol:{_975_75:{default:"var(--yellow-tournesol-975-75)",hover:"var(--yellow-tournesol-975-75-hover)",active:"var(--yellow-tournesol-975-75-active)"},_950_100:{default:"var(--yellow-tournesol-950-100)",hover:"var(--yellow-tournesol-950-100-hover)",active:"var(--yellow-tournesol-950-100-active)"},sun407moon922:{default:"var(--yellow-tournesol-sun-407-moon-922)",hover:"var(--yellow-tournesol-sun-407-moon-922-hover)",active:"var(--yellow-tournesol-sun-407-moon-922-active)"},_925_125:{default:"var(--yellow-tournesol-925-125)",hover:"var(--yellow-tournesol-925-125-hover)",active:"var(--yellow-tournesol-925-125-active)"},main731:{default:"var(--yellow-tournesol-main-731)"},_850_200:{default:"var(--yellow-tournesol-850-200)"}},yellowMoutarde:{_975_75:{default:"var(--yellow-moutarde-975-75)",hover:"var(--yellow-moutarde-975-75-hover)",active:"var(--yellow-moutarde-975-75-active)"},_950_100:{default:"var(--yellow-moutarde-950-100)",hover:"var(--yellow-moutarde-950-100-hover)",active:"var(--yellow-moutarde-950-100-active)"},sun348moon860:{default:"var(--yellow-moutarde-sun-348-moon-860)",hover:"var(--yellow-moutarde-sun-348-moon-860-hover)",active:"var(--yellow-moutarde-sun-348-moon-860-active)"},_925_125:{default:"var(--yellow-moutarde-925-125)",hover:"var(--yellow-moutarde-925-125-hover)",active:"var(--yellow-moutarde-925-125-active)"},main679:{default:"var(--yellow-moutarde-main-679)"},_850_200:{default:"var(--yellow-moutarde-850-200)"}},orangeTerreBattue:{_975_75:{default:"var(--orange-terre-battue-975-75)",hover:"var(--orange-terre-battue-975-75-hover)",active:"var(--orange-terre-battue-975-75-active)"},_950_100:{default:"var(--orange-terre-battue-950-100)",hover:"var(--orange-terre-battue-950-100-hover)",active:"var(--orange-terre-battue-950-100-active)"},sun370moon672:{default:"var(--orange-terre-battue-sun-370-moon-672)",hover:"var(--orange-terre-battue-sun-370-moon-672-hover)",active:"var(--orange-terre-battue-sun-370-moon-672-active)"},_925_125:{default:"var(--orange-terre-battue-925-125)",hover:"var(--orange-terre-battue-925-125-hover)",active:"var(--orange-terre-battue-925-125-active)"},main645:{default:"var(--orange-terre-battue-main-645)"},_850_200:{default:"var(--orange-terre-battue-850-200)"}},brownCafeCreme:{_975_75:{default:"var(--brown-cafe-creme-975-75)",hover:"var(--brown-cafe-creme-975-75-hover)",active:"var(--brown-cafe-creme-975-75-active)"},_950_100:{default:"var(--brown-cafe-creme-950-100)",hover:"var(--brown-cafe-creme-950-100-hover)",active:"var(--brown-cafe-creme-950-100-active)"},sun383moon885:{default:"var(--brown-cafe-creme-sun-383-moon-885)",hover:"var(--brown-cafe-creme-sun-383-moon-885-hover)",active:"var(--brown-cafe-creme-sun-383-moon-885-active)"},_925_125:{default:"var(--brown-cafe-creme-925-125)",hover:"var(--brown-cafe-creme-925-125-hover)",active:"var(--brown-cafe-creme-925-125-active)"},main782:{default:"var(--brown-cafe-creme-main-782)"},_850_200:{default:"var(--brown-cafe-creme-850-200)"}},brownCaramel:{_975_75:{default:"var(--brown-caramel-975-75)",hover:"var(--brown-caramel-975-75-hover)",active:"var(--brown-caramel-975-75-active)"},_950_100:{default:"var(--brown-caramel-950-100)",hover:"var(--brown-caramel-950-100-hover)",active:"var(--brown-caramel-950-100-active)"},sun425moon901:{default:"var(--brown-caramel-sun-425-moon-901)",hover:"var(--brown-caramel-sun-425-moon-901-hover)",active:"var(--brown-caramel-sun-425-moon-901-active)"},_925_125:{default:"var(--brown-caramel-925-125)",hover:"var(--brown-caramel-925-125-hover)",active:"var(--brown-caramel-925-125-active)"},main648:{default:"var(--brown-caramel-main-648)"},_850_200:{default:"var(--brown-caramel-850-200)"}},brownOpera:{_975_75:{default:"var(--brown-opera-975-75)",hover:"var(--brown-opera-975-75-hover)",active:"var(--brown-opera-975-75-active)"},_950_100:{default:"var(--brown-opera-950-100)",hover:"var(--brown-opera-950-100-hover)",active:"var(--brown-opera-950-100-active)"},sun395moon820:{default:"var(--brown-opera-sun-395-moon-820)",hover:"var(--brown-opera-sun-395-moon-820-hover)",active:"var(--brown-opera-sun-395-moon-820-active)"},_925_125:{default:"var(--brown-opera-925-125)",hover:"var(--brown-opera-925-125-hover)",active:"var(--brown-opera-925-125-active)"},main680:{default:"var(--brown-opera-main-680)"},_850_200:{default:"var(--brown-opera-850-200)"}},beigeGrisGalet:{_975_75:{default:"var(--beige-gris-galet-975-75)",hover:"var(--beige-gris-galet-975-75-hover)",active:"var(--beige-gris-galet-975-75-active)"},_950_100:{default:"var(--beige-gris-galet-950-100)",hover:"var(--beige-gris-galet-950-100-hover)",active:"var(--beige-gris-galet-950-100-active)"},sun407moon821:{default:"var(--beige-gris-galet-sun-407-moon-821)",hover:"var(--beige-gris-galet-sun-407-moon-821-hover)",active:"var(--beige-gris-galet-sun-407-moon-821-active)"},_925_125:{default:"var(--beige-gris-galet-925-125)",hover:"var(--beige-gris-galet-925-125-hover)",active:"var(--beige-gris-galet-925-125-active)"},main702:{default:"var(--beige-gris-galet-main-702)"},_850_200:{default:"var(--beige-gris-galet-850-200)"}}};function getColorOptionsHex(i){const{isDark:e}=i;return{grey:{_1000_50:{default:e?"#161616":"#ffffff",hover:e?"#343434":"#f6f6f6",active:e?"#474747":"#ededed"},_975_75:{default:e?"#1e1e1e":"#f6f6f6",hover:e?"#3f3f3f":"#dfdfdf",active:e?"#525252":"#cfcfcf"},_950_100:{default:e?"#242424":"#eeeeee",hover:e?"#474747":"#d2d2d2",active:e?"#5b5b5b":"#c1c1c1"},_200_850:{default:e?"#cecece":"#3a3a3a",hover:e?"#a8a8a8":"#616161",active:e?"#939393":"#777777"},_925_125:{default:e?"#2a2a2a":"#e5e5e5"},_1000_75:{default:e?"#1e1e1e":"#ffffff",hover:e?"#3f3f3f":"#f6f6f6",active:e?"#525252":"#ededed"},_1000_100:{default:e?"#242424":"#ffffff",hover:e?"#474747":"#f6f6f6",active:e?"#5b5b5b":"#ededed"},_975_100:{default:e?"#242424":"#f6f6f6",hover:e?"#474747":"#dfdfdf",active:e?"#5b5b5b":"#cfcfcf"},_975_125:{default:e?"#2a2a2a":"#f6f6f6",hover:e?"#4e4e4e":"#dfdfdf",active:e?"#636363":"#cfcfcf"},_950_125:{default:e?"#2a2a2a":"#eeeeee",hover:e?"#4e4e4e":"#d2d2d2",active:e?"#636363":"#c1c1c1"},_950_150:{default:e?"#2f2f2f":"#eeeeee",hover:e?"#545454":"#d2d2d2",active:e?"#696969":"#c1c1c1"},_50_1000:{default:e?"#ffffff":"#161616"},_425_625:{default:e?"#929292":"#666666"},_625_425:{default:e?"#666666":"#929292"},_0_1000:{default:e?"#ffffff":"#0"},_900_175:{default:e?"#353535":"#dddddd"}},blueFrance:{_975_75:{default:e?"#1b1b35":"#f5f5fe",hover:e?"#3a3a68":"#dcdcfc",active:e?"#4d4d83":"#cbcbfa"},_950_100:{default:e?"#21213f":"#ececfe",hover:e?"#424275":"#cecefc",active:e?"#56568c":"#bbbbfc"},sun113_625:{default:e?"#8585f6":"#000091",hover:e?"#b1b1f9":"#1212ff",active:e?"#c6c6fb":"#2323ff"},_925_125:{default:e?"#272747":"#e3e3fd",hover:e?"#4a4a7d":"#c1c1fb",active:e?"#5e5e90":"#adadf9"},_975sun113:{default:e?"#000091":"#f5f5fe"},main525:{default:"#6a6af4"},_850_200:{default:e?"#313178":"#cacafb"}},redMarianne:{_975_75:{default:e?"#2b1919":"#fef4f4",hover:e?"#573737":"#fcd7d7",active:e?"#704848":"#fac4c4"},_950_100:{default:e?"#331f1f":"#fee9e9",hover:e?"#613f3f":"#fdc5c5",active:e?"#7b5151":"#fcafaf"},_425_625:{default:e?"#f95c5e":"#c9191e",hover:e?"#fa9293":"#f93f42",active:e?"#fbabac":"#f95a5c"},_925_125:{default:e?"#3b2424":"#fddede",hover:e?"#6b4545":"#fbb6b6",active:e?"#865757":"#fa9e9e"},main472:{default:"#e1000f"},_850_200:{default:e?"#5e2a2b":"#fcbfbf"}},info:{_950_100:{default:e?"#1d2437":"#e8edff",hover:e?"#3b4767":"#c2d1ff",active:e?"#4c5b83":"#a9bfff"},_425_625:{default:e?"#518fff":"#0063cb",hover:e?"#98b4ff":"#3b87ff",active:e?"#b4c7ff":"#6798ff"},_975_75:{default:e?"#171d2e":"#f4f6ff"}},success:{_950_100:{default:e?"#19271d":"#b8fec9",hover:e?"#344c3b":"#46fd89",active:e?"#44624d":"#34eb7b"},_425_625:{default:e?"#27a658":"#18753c",hover:e?"#36d975":"#27a959",active:e?"#3df183":"#2fc368"},_975_75:{default:e?"#142117":"#dffee6"}},warning:{_950_100:{default:e?"#361e19":"#ffe9e6",hover:e?"#663d35":"#ffc6bd",active:e?"#824f44":"#ffb0a2"},_425_625:{default:e?"#fc5d00":"#b34000",hover:e?"#ff8c73":"#ff6218",active:e?"#ffa595":"#ff7a55"},_975_75:{default:e?"#2d1814":"#fff4f3"}},error:{_950_100:{default:e?"#391c1c":"#ffe9e9",hover:e?"#6c3a3a":"#ffc5c5",active:e?"#894b4b":"#ffafaf"},_425_625:{default:e?"#ff5655":"#ce0500",hover:e?"#ff8c8c":"#ff2725",active:e?"#ffa6a6":"#ff4140"},_975_75:{default:e?"#301717":"#fff4f4"}},greenTilleulVerveine:{_975_75:{default:e?"#201e14":"#fef7da",hover:e?"#433f2e":"#fce552",active:e?"#57533d":"#ebd54c"},_950_100:{default:e?"#272419":"#fceeac",hover:e?"#4c4734":"#e8d45c",active:e?"#615b44":"#d4c254"},sun418moon817:{default:e?"#d8c634":"#66673d",hover:e?"#fee943":"#929359",active:e?"#fef1ab":"#a7a967"},_925_125:{default:e?"#2d2a1d":"#fbe769",hover:e?"#534f39":"#d7c655",active:e?"#696349":"#c2b24c"},main707:{default:"#b7a73f"},_850_200:{default:e?"#3f3a20":"#e2cf58"}},greenBourgeon:{_975_75:{default:e?"#182014":"#e6feda",hover:e?"#35432e":"#a7fc62",active:e?"#46573d":"#98ed4d"},_950_100:{default:e?"#1e2719":"#c9fcac",hover:e?"#3d4c34":"#9ae95d",active:e?"#4e6144":"#8dd555"},sun425moon759:{default:e?"#99c221":"#447049",hover:e?"#baec2a":"#639f6a",active:e?"#c9fd2e":"#72b77a"},_925_125:{default:e?"#232d1d":"#a9fb68",hover:e?"#435339":"#8ed654",active:e?"#556949":"#7fc04b"},main640:{default:"#68a532"},_850_200:{default:e?"#2a401a":"#95e257"}},greenEmeraude:{_975_75:{default:e?"#142018":"#e3fdeb",hover:e?"#2e4335":"#94f9b9",active:e?"#3d5846":"#6df1a3"},_950_100:{default:e?"#19271e":"#c3fad5",hover:e?"#344c3d":"#77eda5",active:e?"#44624f":"#6dd897"},sun425moon753:{default:e?"#34cb6a":"#297254",hover:e?"#42fb84":"#3ea47a",active:e?"#80fda3":"#49bc8d"},_925_125:{default:e?"#1e2e23":"#9ef9be",hover:e?"#3b5543":"#69df97",active:e?"#4b6b55":"#5ec988"},main632:{default:"#00a95f"},_850_200:{default:e?"#21402c":"#6fe49d"}},greenMenthe:{_975_75:{default:e?"#15201e":"#dffdf7",hover:e?"#30433f":"#84f9e7",active:e?"#3f5753":"#70ebd8"},_950_100:{default:e?"#1a2624":"#bafaee",hover:e?"#364b47":"#79e7d5",active:e?"#46605b":"#6fd3c3"},sun373moon652:{default:e?"#21ab8e":"#37635f",hover:e?"#2eddb8":"#53918c",active:e?"#34f4cc":"#62a9a2"},_925_125:{default:e?"#1f2d2a":"#8bf8e7",hover:e?"#3c534e":"#6ed5c5",active:e?"#4d6963":"#62bfb1"},main548:{default:"#009081"},_850_200:{default:e?"#223f3a":"#73e0cf"}},greenArchipel:{_975_75:{default:e?"#152021":"#e5fbfd",hover:e?"#2f4345":"#99f2f8",active:e?"#3f5759":"#73e9f0"},_950_100:{default:e?"#1a2628":"#c7f6fc",hover:e?"#364a4e":"#64ecf8",active:e?"#465f63":"#5bd8e3"},sun391moon716:{default:e?"#34bab5":"#006a6f",hover:e?"#43e9e2":"#009fa7",active:e?"#4cfdf6":"#00bbc3"},_925_125:{default:e?"#1f2c2e":"#a6f2fa",hover:e?"#3c5255":"#62dbe5",active:e?"#4d676b":"#58c5cf"},main557:{default:"#009099"},_850_200:{default:e?"#233e41":"#60e0eb"}},blueEcume:{_975_75:{default:e?"#171d2f":"#f4f6fe",hover:e?"#333e5e":"#d7dffb",active:e?"#445179":"#c3cffa"},_950_100:{default:e?"#1d2437":"#e9edfe",hover:e?"#3b4767":"#c5d0fc",active:e?"#4c5b83":"#adbffc"},sun247moon675:{default:e?"#869ece":"#2f4077",hover:e?"#b8c5e2":"#4e68bb",active:e?"#ced6ea":"#667dcf"},_925_125:{default:e?"#222940":"#dee5fd",hover:e?"#424d73":"#b4c5fb",active:e?"#536190":"#99b3f9"},main400:{default:"#465f9d"},_850_200:{default:e?"#273962":"#bfccfb"}},blueCumulus:{_975_75:{default:e?"#171e2b":"#f3f6fe",hover:e?"#333f56":"#d3dffc",active:e?"#43536f":"#bed0fa"},_950_100:{default:e?"#1c2433":"#e6eefe",hover:e?"#3a4761":"#bcd3fc",active:e?"#4a5b7b":"#9fc3fc"},sun368moon732:{default:e?"#7ab1e8":"#3558a2",hover:e?"#bad2f2":"#5982e0",active:e?"#d2e2f6":"#7996e6"},_925_125:{default:e?"#212a3a":"#dae6fd",hover:e?"#404f69":"#a9c8fb",active:e?"#516384":"#8ab8f9"},main526:{default:"#417dc4"},_850_200:{default:e?"#263b58":"#b6cffb"}},purpleGlycine:{_975_75:{default:e?"#251a24":"#fef3fd",hover:e?"#4c394a":"#fcd4f8",active:e?"#634a60":"#fabff5"},_950_100:{default:e?"#2c202b":"#fee7fc",hover:e?"#554053":"#fdc0f8",active:e?"#6c536a":"#fca8f6"},sun319moon630:{default:e?"#ce70cc":"#6e445a",hover:e?"#dfa4dd":"#a66989",active:e?"#e7bbe6":"#bb7f9e"},_925_125:{default:e?"#332632":"#fddbfa",hover:e?"#5d485c":"#fbaff5",active:e?"#755b73":"#fa96f2"},main494:{default:"#a558a0"},_850_200:{default:e?"#502e4d":"#fbb8f6"}},pinkMacaron:{_975_75:{default:e?"#261b19":"#fef4f2",hover:e?"#4e3a37":"#fcd8d0",active:e?"#654c48":"#fac5b8"},_950_100:{default:e?"#2e211f":"#fee9e6",hover:e?"#58423f":"#fdc6bd",active:e?"#705551":"#fcb0a2"},sun406moon833:{default:e?"#ffb7ae":"#8d533e",hover:e?"#ffe0dc":"#ca795c",active:e?"#fff0ee":"#e08e73"},_925_125:{default:e?"#352724":"#fddfda",hover:e?"#614a45":"#fbb8ab",active:e?"#795d57":"#faa18d"},main689:{default:"#e18b76"},_850_200:{default:e?"#52312a":"#fcc0b4"}},pinkTuile:{_975_75:{default:e?"#281b19":"#fef4f3",hover:e?"#513a37":"#fcd7d3",active:e?"#694c48":"#fac4be"},_950_100:{default:e?"#2f211f":"#fee9e7",hover:e?"#5a423e":"#fdc6c0",active:e?"#725550":"#fcb0a7"},sun425moon750:{default:e?"#ff9575":"#a94645",hover:e?"#ffc4b7":"#d5706f",active:e?"#ffd8d0":"#da8a89"},_925_125:{default:e?"#372624":"#fddfdb",hover:e?"#644845":"#fbb8ad",active:e?"#7d5b57":"#faa191"},main556:{default:"#ce614a"},_850_200:{default:e?"#55302a":"#fcbfb7"}},yellowTournesol:{_975_75:{default:e?"#221d11":"#fef6e3",hover:e?"#473e29":"#fce086",active:e?"#5c5136":"#f5d24b"},_950_100:{default:e?"#292416":"#feecc2",hover:e?"#4f472f":"#fbd335",active:e?"#655b3d":"#e6c130"},sun407moon922:{default:e?"#ffe552":"#716043",hover:e?"#e1c700":"#a28a62",active:e?"#cab300":"#ba9f72"},_925_125:{default:e?"#302a1a":"#fde39c",hover:e?"#584e34":"#e9c53b",active:e?"#6f6342":"#d3b235"},main731:{default:"#c8aa39"},_850_200:{default:e?"#43391a":"#efcb3a"}},yellowMoutarde:{_975_75:{default:e?"#231d14":"#fef5e8",hover:e?"#483e2e":"#fcdca3",active:e?"#5e513d":"#fbcd64"},_950_100:{default:e?"#2a2319":"#feebd0",hover:e?"#514534":"#fdcd6d",active:e?"#685944":"#f4be30"},sun348moon860:{default:e?"#ffca00":"#695240",hover:e?"#cda200":"#9b7b61",active:e?"#b28c00":"#b58f72"},_925_125:{default:e?"#30291d":"#fde2b5",hover:e?"#584d39":"#f6c43c",active:e?"#6f6149":"#dfb135"},main679:{default:"#c3992a"},_850_200:{default:e?"#453820":"#fcc63a"}},orangeTerreBattue:{_975_75:{default:e?"#281a16":"#fef4f2",hover:e?"#513932":"#fcd8d0",active:e?"#6a4b42":"#fac5b8"},_950_100:{default:e?"#31201c":"#fee9e5",hover:e?"#5d403a":"#fdc6ba",active:e?"#77534a":"#fcb09e"},sun370moon672:{default:e?"#ff732c":"#755348",hover:e?"#ffa48b":"#ab7b6b",active:e?"#ffbbab":"#c68f7d"},_925_125:{default:e?"#382621":"#fddfd8",hover:e?"#664840":"#fbb8a5",active:e?"#7f5b51":"#faa184"},main645:{default:"#e4794a"},_850_200:{default:e?"#543125":"#fcc0b0"}},brownCafeCreme:{_975_75:{default:e?"#211d16":"#fbf6ed",hover:e?"#453e31":"#f2deb6",active:e?"#5a5141":"#eacf91"},_950_100:{default:e?"#28241c":"#f7ecdb",hover:e?"#4e4739":"#edce94",active:e?"#635b4a":"#dabd84"},sun383moon885:{default:e?"#ecd7a2":"#685c48",hover:e?"#c5b386":"#97866a",active:e?"#af9f77":"#ae9b7b"},_925_125:{default:e?"#2e2a21":"#f4e3c7",hover:e?"#554e3f":"#e1c386",active:e?"#6b6351":"#ccb078"},main782:{default:"#d1b781"},_850_200:{default:e?"#423925":"#e7ca8e"}},brownCaramel:{_975_75:{default:e?"#251c16":"#fbf5f2",hover:e?"#4c3c31":"#f1dbcf",active:e?"#624e41":"#ecc9b5"},_950_100:{default:e?"#2c221c":"#f7ebe5",hover:e?"#554439":"#eccbb9",active:e?"#6c574a":"#e6b79a"},sun425moon901:{default:e?"#fbd8ab":"#845d48",hover:e?"#efb547":"#bb8568",active:e?"#d6a23e":"#d69978"},_925_125:{default:e?"#332821":"#f3e2d9",hover:e?"#5d4b40":"#e7bea6",active:e?"#755f51":"#e1a982"},main648:{default:"#c08c65"},_850_200:{default:e?"#4b3525":"#eac7b2"}},brownOpera:{_975_75:{default:e?"#241c17":"#fbf5f2",hover:e?"#4a3c33":"#f1dbcf",active:e?"#604f44":"#ecc9b5"},_950_100:{default:e?"#2b221c":"#f7ece4",hover:e?"#53443a":"#eccdb3",active:e?"#6a574a":"#e6ba90"},sun395moon820:{default:e?"#e6be92":"#745b47",hover:e?"#f2e2d3":"#a78468",active:e?"#f8f0e9":"#c09979"},_925_125:{default:e?"#322821":"#f3e2d7",hover:e?"#5c4b40":"#e7bfa0",active:e?"#735f51":"#deaa7e"},main680:{default:"#bd987a"},_850_200:{default:e?"#493625":"#eac7ad"}},beigeGrisGalet:{_975_75:{default:e?"#211d19":"#f9f6f2",hover:e?"#453e37":"#eadecd",active:e?"#595148":"#e1ceb1"},_950_100:{default:e?"#28231f":"#f3ede5",hover:e?"#4e453f":"#e1d0b5",active:e?"#635950":"#d1bea2"},sun407moon821:{default:e?"#d0c3b7":"#6a6156",hover:e?"#eae5e1":"#988b7c",active:e?"#f4f2f0":"#afa08f"},_925_125:{default:e?"#2e2924":"#eee4d9",hover:e?"#554d45":"#dbc3a4",active:e?"#6b6157":"#c6b094"},main702:{default:"#aea397"},_850_200:{default:e?"#433829":"#e0cab0"}}}}const colorDecisions={background:{default:{grey:{default:"var(--background-default-grey)",hover:"var(--background-default-grey-hover)",active:"var(--background-default-grey-active)"}},alt:{grey:{default:"var(--background-alt-grey)",hover:"var(--background-alt-grey-hover)",active:"var(--background-alt-grey-active)"},blueFrance:{default:"var(--background-alt-blue-france)",hover:"var(--background-alt-blue-france-hover)",active:"var(--background-alt-blue-france-active)"},redMarianne:{default:"var(--background-alt-red-marianne)",hover:"var(--background-alt-red-marianne-hover)",active:"var(--background-alt-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-alt-green-tilleul-verveine)",hover:"var(--background-alt-green-tilleul-verveine-hover)",active:"var(--background-alt-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-alt-green-bourgeon)",hover:"var(--background-alt-green-bourgeon-hover)",active:"var(--background-alt-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-alt-green-emeraude)",hover:"var(--background-alt-green-emeraude-hover)",active:"var(--background-alt-green-emeraude-active)"},greenMenthe:{default:"var(--background-alt-green-menthe)",hover:"var(--background-alt-green-menthe-hover)",active:"var(--background-alt-green-menthe-active)"},greenArchipel:{default:"var(--background-alt-green-archipel)",hover:"var(--background-alt-green-archipel-hover)",active:"var(--background-alt-green-archipel-active)"},blueEcume:{default:"var(--background-alt-blue-ecume)",hover:"var(--background-alt-blue-ecume-hover)",active:"var(--background-alt-blue-ecume-active)"},blueCumulus:{default:"var(--background-alt-blue-cumulus)",hover:"var(--background-alt-blue-cumulus-hover)",active:"var(--background-alt-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-alt-purple-glycine)",hover:"var(--background-alt-purple-glycine-hover)",active:"var(--background-alt-purple-glycine-active)"},pinkMacaron:{default:"var(--background-alt-pink-macaron)",hover:"var(--background-alt-pink-macaron-hover)",active:"var(--background-alt-pink-macaron-active)"},pinkTuile:{default:"var(--background-alt-pink-tuile)",hover:"var(--background-alt-pink-tuile-hover)",active:"var(--background-alt-pink-tuile-active)"},yellowTournesol:{default:"var(--background-alt-yellow-tournesol)",hover:"var(--background-alt-yellow-tournesol-hover)",active:"var(--background-alt-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-alt-yellow-moutarde)",hover:"var(--background-alt-yellow-moutarde-hover)",active:"var(--background-alt-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-alt-orange-terre-battue)",hover:"var(--background-alt-orange-terre-battue-hover)",active:"var(--background-alt-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-alt-brown-cafe-creme)",hover:"var(--background-alt-brown-cafe-creme-hover)",active:"var(--background-alt-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-alt-brown-caramel)",hover:"var(--background-alt-brown-caramel-hover)",active:"var(--background-alt-brown-caramel-active)"},brownOpera:{default:"var(--background-alt-brown-opera)",hover:"var(--background-alt-brown-opera-hover)",active:"var(--background-alt-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-alt-beige-gris-galet)",hover:"var(--background-alt-beige-gris-galet-hover)",active:"var(--background-alt-beige-gris-galet-active)"}},contrast:{grey:{default:"var(--background-contrast-grey)",hover:"var(--background-contrast-grey-hover)",active:"var(--background-contrast-grey-active)"},blueFrance:{default:"var(--background-contrast-blue-france)",hover:"var(--background-contrast-blue-france-hover)",active:"var(--background-contrast-blue-france-active)"},redMarianne:{default:"var(--background-contrast-red-marianne)",hover:"var(--background-contrast-red-marianne-hover)",active:"var(--background-contrast-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-contrast-green-tilleul-verveine)",hover:"var(--background-contrast-green-tilleul-verveine-hover)",active:"var(--background-contrast-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-contrast-green-bourgeon)",hover:"var(--background-contrast-green-bourgeon-hover)",active:"var(--background-contrast-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-contrast-green-emeraude)",hover:"var(--background-contrast-green-emeraude-hover)",active:"var(--background-contrast-green-emeraude-active)"},greenMenthe:{default:"var(--background-contrast-green-menthe)",hover:"var(--background-contrast-green-menthe-hover)",active:"var(--background-contrast-green-menthe-active)"},greenArchipel:{default:"var(--background-contrast-green-archipel)",hover:"var(--background-contrast-green-archipel-hover)",active:"var(--background-contrast-green-archipel-active)"},blueEcume:{default:"var(--background-contrast-blue-ecume)",hover:"var(--background-contrast-blue-ecume-hover)",active:"var(--background-contrast-blue-ecume-active)"},blueCumulus:{default:"var(--background-contrast-blue-cumulus)",hover:"var(--background-contrast-blue-cumulus-hover)",active:"var(--background-contrast-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-contrast-purple-glycine)",hover:"var(--background-contrast-purple-glycine-hover)",active:"var(--background-contrast-purple-glycine-active)"},pinkMacaron:{default:"var(--background-contrast-pink-macaron)",hover:"var(--background-contrast-pink-macaron-hover)",active:"var(--background-contrast-pink-macaron-active)"},pinkTuile:{default:"var(--background-contrast-pink-tuile)",hover:"var(--background-contrast-pink-tuile-hover)",active:"var(--background-contrast-pink-tuile-active)"},yellowTournesol:{default:"var(--background-contrast-yellow-tournesol)",hover:"var(--background-contrast-yellow-tournesol-hover)",active:"var(--background-contrast-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-contrast-yellow-moutarde)",hover:"var(--background-contrast-yellow-moutarde-hover)",active:"var(--background-contrast-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-contrast-orange-terre-battue)",hover:"var(--background-contrast-orange-terre-battue-hover)",active:"var(--background-contrast-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-contrast-brown-cafe-creme)",hover:"var(--background-contrast-brown-cafe-creme-hover)",active:"var(--background-contrast-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-contrast-brown-caramel)",hover:"var(--background-contrast-brown-caramel-hover)",active:"var(--background-contrast-brown-caramel-active)"},brownOpera:{default:"var(--background-contrast-brown-opera)",hover:"var(--background-contrast-brown-opera-hover)",active:"var(--background-contrast-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-contrast-beige-gris-galet)",hover:"var(--background-contrast-beige-gris-galet-hover)",active:"var(--background-contrast-beige-gris-galet-active)"},info:{default:"var(--background-contrast-info)",hover:"var(--background-contrast-info-hover)",active:"var(--background-contrast-info-active)"},success:{default:"var(--background-contrast-success)",hover:"var(--background-contrast-success-hover)",active:"var(--background-contrast-success-active)"},warning:{default:"var(--background-contrast-warning)",hover:"var(--background-contrast-warning-hover)",active:"var(--background-contrast-warning-active)"},error:{default:"var(--background-contrast-error)",hover:"var(--background-contrast-error-hover)",active:"var(--background-contrast-error-active)"}},flat:{grey:{default:"var(--background-flat-grey)"},blueFrance:{default:"var(--background-flat-blue-france)"},redMarianne:{default:"var(--background-flat-red-marianne)"},greenTilleulVerveine:{default:"var(--background-flat-green-tilleul-verveine)"},greenBourgeon:{default:"var(--background-flat-green-bourgeon)"},greenEmeraude:{default:"var(--background-flat-green-emeraude)"},greenMenthe:{default:"var(--background-flat-green-menthe)"},greenArchipel:{default:"var(--background-flat-green-archipel)"},blueEcume:{default:"var(--background-flat-blue-ecume)"},blueCumulus:{default:"var(--background-flat-blue-cumulus)"},purpleGlycine:{default:"var(--background-flat-purple-glycine)"},pinkMacaron:{default:"var(--background-flat-pink-macaron)"},pinkTuile:{default:"var(--background-flat-pink-tuile)"},yellowTournesol:{default:"var(--background-flat-yellow-tournesol)"},yellowMoutarde:{default:"var(--background-flat-yellow-moutarde)"},orangeTerreBattue:{default:"var(--background-flat-orange-terre-battue)"},brownCafeCreme:{default:"var(--background-flat-brown-cafe-creme)"},brownCaramel:{default:"var(--background-flat-brown-caramel)"},brownOpera:{default:"var(--background-flat-brown-opera)"},beigeGrisGalet:{default:"var(--background-flat-beige-gris-galet)"},info:{default:"var(--background-flat-info)"},success:{default:"var(--background-flat-success)"},warning:{default:"var(--background-flat-warning)"},error:{default:"var(--background-flat-error)"}},actionHigh:{grey:{default:"var(--background-action-high-grey)",hover:"var(--background-action-high-grey-hover)",active:"var(--background-action-high-grey-active)"},blueFrance:{default:"var(--background-action-high-blue-france)",hover:"var(--background-action-high-blue-france-hover)",active:"var(--background-action-high-blue-france-active)"},redMarianne:{default:"var(--background-action-high-red-marianne)",hover:"var(--background-action-high-red-marianne-hover)",active:"var(--background-action-high-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-action-high-green-tilleul-verveine)",hover:"var(--background-action-high-green-tilleul-verveine-hover)",active:"var(--background-action-high-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-action-high-green-bourgeon)",hover:"var(--background-action-high-green-bourgeon-hover)",active:"var(--background-action-high-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-action-high-green-emeraude)",hover:"var(--background-action-high-green-emeraude-hover)",active:"var(--background-action-high-green-emeraude-active)"},greenMenthe:{default:"var(--background-action-high-green-menthe)",hover:"var(--background-action-high-green-menthe-hover)",active:"var(--background-action-high-green-menthe-active)"},greenArchipel:{default:"var(--background-action-high-green-archipel)",hover:"var(--background-action-high-green-archipel-hover)",active:"var(--background-action-high-green-archipel-active)"},blueEcume:{default:"var(--background-action-high-blue-ecume)",hover:"var(--background-action-high-blue-ecume-hover)",active:"var(--background-action-high-blue-ecume-active)"},blueCumulus:{default:"var(--background-action-high-blue-cumulus)",hover:"var(--background-action-high-blue-cumulus-hover)",active:"var(--background-action-high-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-action-high-purple-glycine)",hover:"var(--background-action-high-purple-glycine-hover)",active:"var(--background-action-high-purple-glycine-active)"},pinkMacaron:{default:"var(--background-action-high-pink-macaron)",hover:"var(--background-action-high-pink-macaron-hover)",active:"var(--background-action-high-pink-macaron-active)"},pinkTuile:{default:"var(--background-action-high-pink-tuile)",hover:"var(--background-action-high-pink-tuile-hover)",active:"var(--background-action-high-pink-tuile-active)"},yellowTournesol:{default:"var(--background-action-high-yellow-tournesol)",hover:"var(--background-action-high-yellow-tournesol-hover)",active:"var(--background-action-high-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-action-high-yellow-moutarde)",hover:"var(--background-action-high-yellow-moutarde-hover)",active:"var(--background-action-high-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-action-high-orange-terre-battue)",hover:"var(--background-action-high-orange-terre-battue-hover)",active:"var(--background-action-high-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-action-high-brown-cafe-creme)",hover:"var(--background-action-high-brown-cafe-creme-hover)",active:"var(--background-action-high-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-action-high-brown-caramel)",hover:"var(--background-action-high-brown-caramel-hover)",active:"var(--background-action-high-brown-caramel-active)"},brownOpera:{default:"var(--background-action-high-brown-opera)",hover:"var(--background-action-high-brown-opera-hover)",active:"var(--background-action-high-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-action-high-beige-gris-galet)",hover:"var(--background-action-high-beige-gris-galet-hover)",active:"var(--background-action-high-beige-gris-galet-active)"},info:{default:"var(--background-action-high-info)",hover:"var(--background-action-high-info-hover)",active:"var(--background-action-high-info-active)"},success:{default:"var(--background-action-high-success)",hover:"var(--background-action-high-success-hover)",active:"var(--background-action-high-success-active)"},warning:{default:"var(--background-action-high-warning)",hover:"var(--background-action-high-warning-hover)",active:"var(--background-action-high-warning-active)"},error:{default:"var(--background-action-high-error)",hover:"var(--background-action-high-error-hover)",active:"var(--background-action-high-error-active)"}},actionLow:{blueFrance:{default:"var(--background-action-low-blue-france)",hover:"var(--background-action-low-blue-france-hover)",active:"var(--background-action-low-blue-france-active)"},redMarianne:{default:"var(--background-action-low-red-marianne)",hover:"var(--background-action-low-red-marianne-hover)",active:"var(--background-action-low-red-marianne-active)"},greenTilleulVerveine:{default:"var(--background-action-low-green-tilleul-verveine)",hover:"var(--background-action-low-green-tilleul-verveine-hover)",active:"var(--background-action-low-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--background-action-low-green-bourgeon)",hover:"var(--background-action-low-green-bourgeon-hover)",active:"var(--background-action-low-green-bourgeon-active)"},greenEmeraude:{default:"var(--background-action-low-green-emeraude)",hover:"var(--background-action-low-green-emeraude-hover)",active:"var(--background-action-low-green-emeraude-active)"},greenMenthe:{default:"var(--background-action-low-green-menthe)",hover:"var(--background-action-low-green-menthe-hover)",active:"var(--background-action-low-green-menthe-active)"},greenArchipel:{default:"var(--background-action-low-green-archipel)",hover:"var(--background-action-low-green-archipel-hover)",active:"var(--background-action-low-green-archipel-active)"},blueEcume:{default:"var(--background-action-low-blue-ecume)",hover:"var(--background-action-low-blue-ecume-hover)",active:"var(--background-action-low-blue-ecume-active)"},blueCumulus:{default:"var(--background-action-low-blue-cumulus)",hover:"var(--background-action-low-blue-cumulus-hover)",active:"var(--background-action-low-blue-cumulus-active)"},purpleGlycine:{default:"var(--background-action-low-purple-glycine)",hover:"var(--background-action-low-purple-glycine-hover)",active:"var(--background-action-low-purple-glycine-active)"},pinkMacaron:{default:"var(--background-action-low-pink-macaron)",hover:"var(--background-action-low-pink-macaron-hover)",active:"var(--background-action-low-pink-macaron-active)"},pinkTuile:{default:"var(--background-action-low-pink-tuile)",hover:"var(--background-action-low-pink-tuile-hover)",active:"var(--background-action-low-pink-tuile-active)"},yellowTournesol:{default:"var(--background-action-low-yellow-tournesol)",hover:"var(--background-action-low-yellow-tournesol-hover)",active:"var(--background-action-low-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--background-action-low-yellow-moutarde)",hover:"var(--background-action-low-yellow-moutarde-hover)",active:"var(--background-action-low-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--background-action-low-orange-terre-battue)",hover:"var(--background-action-low-orange-terre-battue-hover)",active:"var(--background-action-low-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--background-action-low-brown-cafe-creme)",hover:"var(--background-action-low-brown-cafe-creme-hover)",active:"var(--background-action-low-brown-cafe-creme-active)"},brownCaramel:{default:"var(--background-action-low-brown-caramel)",hover:"var(--background-action-low-brown-caramel-hover)",active:"var(--background-action-low-brown-caramel-active)"},brownOpera:{default:"var(--background-action-low-brown-opera)",hover:"var(--background-action-low-brown-opera-hover)",active:"var(--background-action-low-brown-opera-active)"},beigeGrisGalet:{default:"var(--background-action-low-beige-gris-galet)",hover:"var(--background-action-low-beige-gris-galet-hover)",active:"var(--background-action-low-beige-gris-galet-active)"}},active:{blueFrance:{default:"var(--background-active-blue-france)",hover:"var(--background-active-blue-france-hover)",active:"var(--background-active-blue-france-active)"},redMarianne:{default:"var(--background-active-red-marianne)",hover:"var(--background-active-red-marianne-hover)",active:"var(--background-active-red-marianne-active)"}},open:{blueFrance:{default:"var(--background-open-blue-france)",hover:"var(--background-open-blue-france-hover)",active:"var(--background-open-blue-france-active)"},redMarianne:{default:"var(--background-open-red-marianne)",hover:"var(--background-open-red-marianne-hover)",active:"var(--background-open-red-marianne-active)"}},disabled:{grey:{default:"var(--background-disabled-grey)"}},raised:{grey:{default:"var(--background-raised-grey)",hover:"var(--background-raised-grey-hover)",active:"var(--background-raised-grey-active)"}},overlap:{grey:{default:"var(--background-overlap-grey)",hover:"var(--background-overlap-grey-hover)",active:"var(--background-overlap-grey-active)"}},lifted:{grey:{default:"var(--background-lifted-grey)",hover:"var(--background-lifted-grey-hover)",active:"var(--background-lifted-grey-active)"}},altRaised:{grey:{default:"var(--background-alt-raised-grey)",hover:"var(--background-alt-raised-grey-hover)",active:"var(--background-alt-raised-grey-active)"}},altOverlap:{grey:{default:"var(--background-alt-overlap-grey)",hover:"var(--background-alt-overlap-grey-hover)",active:"var(--background-alt-overlap-grey-active)"}},contrastRaised:{grey:{default:"var(--background-contrast-raised-grey)",hover:"var(--background-contrast-raised-grey-hover)",active:"var(--background-contrast-raised-grey-active)"}},contrastOverlap:{grey:{default:"var(--background-contrast-overlap-grey)",hover:"var(--background-contrast-overlap-grey-hover)",active:"var(--background-contrast-overlap-grey-active)"}}},text:{default:{grey:{default:"var(--text-default-grey)"},info:{default:"var(--text-default-info)"},success:{default:"var(--text-default-success)"},warning:{default:"var(--text-default-warning)"},error:{default:"var(--text-default-error)"}},actionHigh:{grey:{default:"var(--text-action-high-grey)"},blueFrance:{default:"var(--text-action-high-blue-france)"},redMarianne:{default:"var(--text-action-high-red-marianne)"},greenTilleulVerveine:{default:"var(--text-action-high-green-tilleul-verveine)"},greenBourgeon:{default:"var(--text-action-high-green-bourgeon)"},greenEmeraude:{default:"var(--text-action-high-green-emeraude)"},greenMenthe:{default:"var(--text-action-high-green-menthe)"},greenArchipel:{default:"var(--text-action-high-green-archipel)"},blueEcume:{default:"var(--text-action-high-blue-ecume)"},blueCumulus:{default:"var(--text-action-high-blue-cumulus)"},purpleGlycine:{default:"var(--text-action-high-purple-glycine)"},pinkMacaron:{default:"var(--text-action-high-pink-macaron)"},pinkTuile:{default:"var(--text-action-high-pink-tuile)"},yellowTournesol:{default:"var(--text-action-high-yellow-tournesol)"},yellowMoutarde:{default:"var(--text-action-high-yellow-moutarde)"},orangeTerreBattue:{default:"var(--text-action-high-orange-terre-battue)"},brownCafeCreme:{default:"var(--text-action-high-brown-cafe-creme)"},brownCaramel:{default:"var(--text-action-high-brown-caramel)"},brownOpera:{default:"var(--text-action-high-brown-opera)"},beigeGrisGalet:{default:"var(--text-action-high-beige-gris-galet)"}},title:{grey:{default:"var(--text-title-grey)"},blueFrance:{default:"var(--text-title-blue-france)"},redMarianne:{default:"var(--text-title-red-marianne)"}},label:{grey:{default:"var(--text-label-grey)"},blueFrance:{default:"var(--text-label-blue-france)"},redMarianne:{default:"var(--text-label-red-marianne)"},greenTilleulVerveine:{default:"var(--text-label-green-tilleul-verveine)"},greenBourgeon:{default:"var(--text-label-green-bourgeon)"},greenEmeraude:{default:"var(--text-label-green-emeraude)"},greenMenthe:{default:"var(--text-label-green-menthe)"},greenArchipel:{default:"var(--text-label-green-archipel)"},blueEcume:{default:"var(--text-label-blue-ecume)"},blueCumulus:{default:"var(--text-label-blue-cumulus)"},purpleGlycine:{default:"var(--text-label-purple-glycine)"},pinkMacaron:{default:"var(--text-label-pink-macaron)"},pinkTuile:{default:"var(--text-label-pink-tuile)"},yellowTournesol:{default:"var(--text-label-yellow-tournesol)"},yellowMoutarde:{default:"var(--text-label-yellow-moutarde)"},orangeTerreBattue:{default:"var(--text-label-orange-terre-battue)"},brownCafeCreme:{default:"var(--text-label-brown-cafe-creme)"},brownCaramel:{default:"var(--text-label-brown-caramel)"},brownOpera:{default:"var(--text-label-brown-opera)"},beigeGrisGalet:{default:"var(--text-label-beige-gris-galet)"}},active:{grey:{default:"var(--text-active-grey)"},blueFrance:{default:"var(--text-active-blue-france)"},redMarianne:{default:"var(--text-active-red-marianne)"}},mention:{grey:{default:"var(--text-mention-grey)"}},inverted:{grey:{default:"var(--text-inverted-grey)"},blueFrance:{default:"var(--text-inverted-blue-france)"},redMarianne:{default:"var(--text-inverted-red-marianne)"},info:{default:"var(--text-inverted-info)"},success:{default:"var(--text-inverted-success)"},warning:{default:"var(--text-inverted-warning)"},error:{default:"var(--text-inverted-error)"},greenTilleulVerveine:{default:"var(--text-inverted-green-tilleul-verveine)"},greenBourgeon:{default:"var(--text-inverted-green-bourgeon)"},greenEmeraude:{default:"var(--text-inverted-green-emeraude)"},greenMenthe:{default:"var(--text-inverted-green-menthe)"},greenArchipel:{default:"var(--text-inverted-green-archipel)"},blueEcume:{default:"var(--text-inverted-blue-ecume)"},blueCumulus:{default:"var(--text-inverted-blue-cumulus)"},purpleGlycine:{default:"var(--text-inverted-purple-glycine)"},pinkMacaron:{default:"var(--text-inverted-pink-macaron)"},pinkTuile:{default:"var(--text-inverted-pink-tuile)"},yellowTournesol:{default:"var(--text-inverted-yellow-tournesol)"},yellowMoutarde:{default:"var(--text-inverted-yellow-moutarde)"},orangeTerreBattue:{default:"var(--text-inverted-orange-terre-battue)"},brownCafeCreme:{default:"var(--text-inverted-brown-cafe-creme)"},brownCaramel:{default:"var(--text-inverted-brown-caramel)"},brownOpera:{default:"var(--text-inverted-brown-opera)"},beigeGrisGalet:{default:"var(--text-inverted-beige-gris-galet)"}},disabled:{grey:{default:"var(--text-disabled-grey)"}},blackWhite:{grey:{default:"var(--text-black-white-grey)"}}},border:{default:{grey:{default:"var(--border-default-grey)"},blueFrance:{default:"var(--border-default-blue-france)"},redMarianne:{default:"var(--border-default-red-marianne)"},greenTilleulVerveine:{default:"var(--border-default-green-tilleul-verveine)"},greenBourgeon:{default:"var(--border-default-green-bourgeon)"},greenEmeraude:{default:"var(--border-default-green-emeraude)"},greenMenthe:{default:"var(--border-default-green-menthe)"},greenArchipel:{default:"var(--border-default-green-archipel)"},blueEcume:{default:"var(--border-default-blue-ecume)"},blueCumulus:{default:"var(--border-default-blue-cumulus)"},purpleGlycine:{default:"var(--border-default-purple-glycine)"},pinkMacaron:{default:"var(--border-default-pink-macaron)"},pinkTuile:{default:"var(--border-default-pink-tuile)"},yellowTournesol:{default:"var(--border-default-yellow-tournesol)"},yellowMoutarde:{default:"var(--border-default-yellow-moutarde)"},orangeTerreBattue:{default:"var(--border-default-orange-terre-battue)"},brownCafeCreme:{default:"var(--border-default-brown-cafe-creme)"},brownCaramel:{default:"var(--border-default-brown-caramel)"},brownOpera:{default:"var(--border-default-brown-opera)"},beigeGrisGalet:{default:"var(--border-default-beige-gris-galet)"}},contrast:{grey:{default:"var(--border-contrast-grey)"}},active:{blueFrance:{default:"var(--border-active-blue-france)"},redMarianne:{default:"var(--border-active-red-marianne)"}},actionHigh:{grey:{default:"var(--border-action-high-grey)"},blueFrance:{default:"var(--border-action-high-blue-france)"},redMarianne:{default:"var(--border-action-high-red-marianne)"},info:{default:"var(--border-action-high-info)"},success:{default:"var(--border-action-high-success)"},warning:{default:"var(--border-action-high-warning)"},error:{default:"var(--border-action-high-error)"}},actionLow:{blueFrance:{default:"var(--border-action-low-blue-france)"},redMarianne:{default:"var(--border-action-low-red-marianne)"},greenTilleulVerveine:{default:"var(--border-action-low-green-tilleul-verveine)"},greenBourgeon:{default:"var(--border-action-low-green-bourgeon)"},greenEmeraude:{default:"var(--border-action-low-green-emeraude)"},greenMenthe:{default:"var(--border-action-low-green-menthe)"},greenArchipel:{default:"var(--border-action-low-green-archipel)"},blueEcume:{default:"var(--border-action-low-blue-ecume)"},blueCumulus:{default:"var(--border-action-low-blue-cumulus)"},purpleGlycine:{default:"var(--border-action-low-purple-glycine)"},pinkMacaron:{default:"var(--border-action-low-pink-macaron)"},pinkTuile:{default:"var(--border-action-low-pink-tuile)"},yellowTournesol:{default:"var(--border-action-low-yellow-tournesol)"},yellowMoutarde:{default:"var(--border-action-low-yellow-moutarde)"},orangeTerreBattue:{default:"var(--border-action-low-orange-terre-battue)"},brownCafeCreme:{default:"var(--border-action-low-brown-cafe-creme)"},brownCaramel:{default:"var(--border-action-low-brown-caramel)"},brownOpera:{default:"var(--border-action-low-brown-opera)"},beigeGrisGalet:{default:"var(--border-action-low-beige-gris-galet)"}},open:{blueFrance:{default:"var(--border-open-blue-france)"},redMarianne:{default:"var(--border-open-red-marianne)"}},plain:{grey:{default:"var(--border-plain-grey)"},blueFrance:{default:"var(--border-plain-blue-france)"},redMarianne:{default:"var(--border-plain-red-marianne)"},info:{default:"var(--border-plain-info)"},success:{default:"var(--border-plain-success)"},warning:{default:"var(--border-plain-warning)"},error:{default:"var(--border-plain-error)"},greenTilleulVerveine:{default:"var(--border-plain-green-tilleul-verveine)"},greenBourgeon:{default:"var(--border-plain-green-bourgeon)"},greenEmeraude:{default:"var(--border-plain-green-emeraude)"},greenMenthe:{default:"var(--border-plain-green-menthe)"},greenArchipel:{default:"var(--border-plain-green-archipel)"},blueEcume:{default:"var(--border-plain-blue-ecume)"},blueCumulus:{default:"var(--border-plain-blue-cumulus)"},purpleGlycine:{default:"var(--border-plain-purple-glycine)"},pinkMacaron:{default:"var(--border-plain-pink-macaron)"},pinkTuile:{default:"var(--border-plain-pink-tuile)"},yellowTournesol:{default:"var(--border-plain-yellow-tournesol)"},yellowMoutarde:{default:"var(--border-plain-yellow-moutarde)"},orangeTerreBattue:{default:"var(--border-plain-orange-terre-battue)"},brownCafeCreme:{default:"var(--border-plain-brown-cafe-creme)"},brownCaramel:{default:"var(--border-plain-brown-caramel)"},brownOpera:{default:"var(--border-plain-brown-opera)"},beigeGrisGalet:{default:"var(--border-plain-beige-gris-galet)"}},disabled:{grey:{default:"var(--border-disabled-grey)"}}},artwork:{major:{blueFrance:{default:"var(--artwork-major-blue-france)",hover:"var(--artwork-major-blue-france-hover)",active:"var(--artwork-major-blue-france-active)"},redMarianne:{default:"var(--artwork-major-red-marianne)",hover:"var(--artwork-major-red-marianne-hover)",active:"var(--artwork-major-red-marianne-active)"},greenTilleulVerveine:{default:"var(--artwork-major-green-tilleul-verveine)",hover:"var(--artwork-major-green-tilleul-verveine-hover)",active:"var(--artwork-major-green-tilleul-verveine-active)"},greenBourgeon:{default:"var(--artwork-major-green-bourgeon)",hover:"var(--artwork-major-green-bourgeon-hover)",active:"var(--artwork-major-green-bourgeon-active)"},greenEmeraude:{default:"var(--artwork-major-green-emeraude)",hover:"var(--artwork-major-green-emeraude-hover)",active:"var(--artwork-major-green-emeraude-active)"},greenMenthe:{default:"var(--artwork-major-green-menthe)",hover:"var(--artwork-major-green-menthe-hover)",active:"var(--artwork-major-green-menthe-active)"},greenArchipel:{default:"var(--artwork-major-green-archipel)",hover:"var(--artwork-major-green-archipel-hover)",active:"var(--artwork-major-green-archipel-active)"},blueEcume:{default:"var(--artwork-major-blue-ecume)",hover:"var(--artwork-major-blue-ecume-hover)",active:"var(--artwork-major-blue-ecume-active)"},blueCumulus:{default:"var(--artwork-major-blue-cumulus)",hover:"var(--artwork-major-blue-cumulus-hover)",active:"var(--artwork-major-blue-cumulus-active)"},purpleGlycine:{default:"var(--artwork-major-purple-glycine)",hover:"var(--artwork-major-purple-glycine-hover)",active:"var(--artwork-major-purple-glycine-active)"},pinkMacaron:{default:"var(--artwork-major-pink-macaron)",hover:"var(--artwork-major-pink-macaron-hover)",active:"var(--artwork-major-pink-macaron-active)"},pinkTuile:{default:"var(--artwork-major-pink-tuile)",hover:"var(--artwork-major-pink-tuile-hover)",active:"var(--artwork-major-pink-tuile-active)"},yellowTournesol:{default:"var(--artwork-major-yellow-tournesol)",hover:"var(--artwork-major-yellow-tournesol-hover)",active:"var(--artwork-major-yellow-tournesol-active)"},yellowMoutarde:{default:"var(--artwork-major-yellow-moutarde)",hover:"var(--artwork-major-yellow-moutarde-hover)",active:"var(--artwork-major-yellow-moutarde-active)"},orangeTerreBattue:{default:"var(--artwork-major-orange-terre-battue)",hover:"var(--artwork-major-orange-terre-battue-hover)",active:"var(--artwork-major-orange-terre-battue-active)"},brownCafeCreme:{default:"var(--artwork-major-brown-cafe-creme)",hover:"var(--artwork-major-brown-cafe-creme-hover)",active:"var(--artwork-major-brown-cafe-creme-active)"},brownCaramel:{default:"var(--artwork-major-brown-caramel)",hover:"var(--artwork-major-brown-caramel-hover)",active:"var(--artwork-major-brown-caramel-active)"},brownOpera:{default:"var(--artwork-major-brown-opera)",hover:"var(--artwork-major-brown-opera-hover)",active:"var(--artwork-major-brown-opera-active)"},beigeGrisGalet:{default:"var(--artwork-major-beige-gris-galet)",hover:"var(--artwork-major-beige-gris-galet-hover)",active:"var(--artwork-major-beige-gris-galet-active)"}},minor:{blueFrance:{default:"var(--artwork-minor-blue-france)"},redMarianne:{default:"var(--artwork-minor-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-minor-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-minor-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-minor-green-emeraude)"},greenMenthe:{default:"var(--artwork-minor-green-menthe)"},greenArchipel:{default:"var(--artwork-minor-green-archipel)"},blueEcume:{default:"var(--artwork-minor-blue-ecume)"},blueCumulus:{default:"var(--artwork-minor-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-minor-purple-glycine)"},pinkMacaron:{default:"var(--artwork-minor-pink-macaron)"},pinkTuile:{default:"var(--artwork-minor-pink-tuile)"},yellowTournesol:{default:"var(--artwork-minor-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-minor-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-minor-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-minor-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-minor-brown-caramel)"},brownOpera:{default:"var(--artwork-minor-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-minor-beige-gris-galet)"}},decorative:{grey:{default:"var(--artwork-decorative-grey)"},blueFrance:{default:"var(--artwork-decorative-blue-france)"},redMarianne:{default:"var(--artwork-decorative-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-decorative-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-decorative-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-decorative-green-emeraude)"},greenMenthe:{default:"var(--artwork-decorative-green-menthe)"},greenArchipel:{default:"var(--artwork-decorative-green-archipel)"},blueEcume:{default:"var(--artwork-decorative-blue-ecume)"},blueCumulus:{default:"var(--artwork-decorative-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-decorative-purple-glycine)"},pinkMacaron:{default:"var(--artwork-decorative-pink-macaron)"},pinkTuile:{default:"var(--artwork-decorative-pink-tuile)"},yellowTournesol:{default:"var(--artwork-decorative-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-decorative-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-decorative-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-decorative-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-decorative-brown-caramel)"},brownOpera:{default:"var(--artwork-decorative-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-decorative-beige-gris-galet)"}},background:{grey:{default:"var(--artwork-background-grey)"},blueFrance:{default:"var(--artwork-background-blue-france)"},redMarianne:{default:"var(--artwork-background-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-background-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-background-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-background-green-emeraude)"},greenMenthe:{default:"var(--artwork-background-green-menthe)"},greenArchipel:{default:"var(--artwork-background-green-archipel)"},blueEcume:{default:"var(--artwork-background-blue-ecume)"},blueCumulus:{default:"var(--artwork-background-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-background-purple-glycine)"},pinkMacaron:{default:"var(--artwork-background-pink-macaron)"},pinkTuile:{default:"var(--artwork-background-pink-tuile)"},yellowTournesol:{default:"var(--artwork-background-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-background-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-background-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-background-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-background-brown-caramel)"},brownOpera:{default:"var(--artwork-background-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-background-beige-gris-galet)"}},motif:{grey:{default:"var(--artwork-motif-grey)"},blueFrance:{default:"var(--artwork-motif-blue-france)"},redMarianne:{default:"var(--artwork-motif-red-marianne)"},greenTilleulVerveine:{default:"var(--artwork-motif-green-tilleul-verveine)"},greenBourgeon:{default:"var(--artwork-motif-green-bourgeon)"},greenEmeraude:{default:"var(--artwork-motif-green-emeraude)"},greenMenthe:{default:"var(--artwork-motif-green-menthe)"},greenArchipel:{default:"var(--artwork-motif-green-archipel)"},blueEcume:{default:"var(--artwork-motif-blue-ecume)"},blueCumulus:{default:"var(--artwork-motif-blue-cumulus)"},purpleGlycine:{default:"var(--artwork-motif-purple-glycine)"},pinkMacaron:{default:"var(--artwork-motif-pink-macaron)"},pinkTuile:{default:"var(--artwork-motif-pink-tuile)"},yellowTournesol:{default:"var(--artwork-motif-yellow-tournesol)"},yellowMoutarde:{default:"var(--artwork-motif-yellow-moutarde)"},orangeTerreBattue:{default:"var(--artwork-motif-orange-terre-battue)"},brownCafeCreme:{default:"var(--artwork-motif-brown-cafe-creme)"},brownCaramel:{default:"var(--artwork-motif-brown-caramel)"},brownOpera:{default:"var(--artwork-motif-brown-opera)"},beigeGrisGalet:{default:"var(--artwork-motif-beige-gris-galet)"}}}};function getColorDecisionsHex(i){const{colorOptions:e}=i;return{background:{default:{grey:{default:e.grey._1000_50.default,hover:e.grey._1000_50.hover,active:e.grey._1000_50.active}},alt:{grey:{default:e.grey._975_75.default,hover:e.grey._975_75.hover,active:e.grey._975_75.active},blueFrance:{default:e.blueFrance._975_75.default,hover:e.blueFrance._975_75.hover,active:e.blueFrance._975_75.active},redMarianne:{default:e.redMarianne._975_75.default,hover:e.redMarianne._975_75.hover,active:e.redMarianne._975_75.active},greenTilleulVerveine:{default:e.greenTilleulVerveine._975_75.default,hover:e.greenTilleulVerveine._975_75.hover,active:e.greenTilleulVerveine._975_75.active},greenBourgeon:{default:e.greenBourgeon._975_75.default,hover:e.greenBourgeon._975_75.hover,active:e.greenBourgeon._975_75.active},greenEmeraude:{default:e.greenEmeraude._975_75.default,hover:e.greenEmeraude._975_75.hover,active:e.greenEmeraude._975_75.active},greenMenthe:{default:e.greenMenthe._975_75.default,hover:e.greenMenthe._975_75.hover,active:e.greenMenthe._975_75.active},greenArchipel:{default:e.greenArchipel._975_75.default,hover:e.greenArchipel._975_75.hover,active:e.greenArchipel._975_75.active},blueEcume:{default:e.blueEcume._975_75.default,hover:e.blueEcume._975_75.hover,active:e.blueEcume._975_75.active},blueCumulus:{default:e.blueCumulus._975_75.default,hover:e.blueCumulus._975_75.hover,active:e.blueCumulus._975_75.active},purpleGlycine:{default:e.purpleGlycine._975_75.default,hover:e.purpleGlycine._975_75.hover,active:e.purpleGlycine._975_75.active},pinkMacaron:{default:e.pinkMacaron._975_75.default,hover:e.pinkMacaron._975_75.hover,active:e.pinkMacaron._975_75.active},pinkTuile:{default:e.pinkTuile._975_75.default,hover:e.pinkTuile._975_75.hover,active:e.pinkTuile._975_75.active},yellowTournesol:{default:e.yellowTournesol._975_75.default,hover:e.yellowTournesol._975_75.hover,active:e.yellowTournesol._975_75.active},yellowMoutarde:{default:e.yellowMoutarde._975_75.default,hover:e.yellowMoutarde._975_75.hover,active:e.yellowMoutarde._975_75.active},orangeTerreBattue:{default:e.orangeTerreBattue._975_75.default,hover:e.orangeTerreBattue._975_75.hover,active:e.orangeTerreBattue._975_75.active},brownCafeCreme:{default:e.brownCafeCreme._975_75.default,hover:e.brownCafeCreme._975_75.hover,active:e.brownCafeCreme._975_75.active},brownCaramel:{default:e.brownCaramel._975_75.default,hover:e.brownCaramel._975_75.hover,active:e.brownCaramel._975_75.active},brownOpera:{default:e.brownOpera._975_75.default,hover:e.brownOpera._975_75.hover,active:e.brownOpera._975_75.active},beigeGrisGalet:{default:e.beigeGrisGalet._975_75.default,hover:e.beigeGrisGalet._975_75.hover,active:e.beigeGrisGalet._975_75.active}},contrast:{grey:{default:e.grey._950_100.default,hover:e.grey._950_100.hover,active:e.grey._950_100.active},blueFrance:{default:e.blueFrance._950_100.default,hover:e.blueFrance._950_100.hover,active:e.blueFrance._950_100.active},redMarianne:{default:e.redMarianne._950_100.default,hover:e.redMarianne._950_100.hover,active:e.redMarianne._950_100.active},greenTilleulVerveine:{default:e.greenTilleulVerveine._950_100.default,hover:e.greenTilleulVerveine._950_100.hover,active:e.greenTilleulVerveine._950_100.active},greenBourgeon:{default:e.greenBourgeon._950_100.default,hover:e.greenBourgeon._950_100.hover,active:e.greenBourgeon._950_100.active},greenEmeraude:{default:e.greenEmeraude._950_100.default,hover:e.greenEmeraude._950_100.hover,active:e.greenEmeraude._950_100.active},greenMenthe:{default:e.greenMenthe._950_100.default,hover:e.greenMenthe._950_100.hover,active:e.greenMenthe._950_100.active},greenArchipel:{default:e.greenArchipel._950_100.default,hover:e.greenArchipel._950_100.hover,active:e.greenArchipel._950_100.active},blueEcume:{default:e.blueEcume._950_100.default,hover:e.blueEcume._950_100.hover,active:e.blueEcume._950_100.active},blueCumulus:{default:e.blueCumulus._950_100.default,hover:e.blueCumulus._950_100.hover,active:e.blueCumulus._950_100.active},purpleGlycine:{default:e.purpleGlycine._950_100.default,hover:e.purpleGlycine._950_100.hover,active:e.purpleGlycine._950_100.active},pinkMacaron:{default:e.pinkMacaron._950_100.default,hover:e.pinkMacaron._950_100.hover,active:e.pinkMacaron._950_100.active},pinkTuile:{default:e.pinkTuile._950_100.default,hover:e.pinkTuile._950_100.hover,active:e.pinkTuile._950_100.active},yellowTournesol:{default:e.yellowTournesol._950_100.default,hover:e.yellowTournesol._950_100.hover,active:e.yellowTournesol._950_100.active},yellowMoutarde:{default:e.yellowMoutarde._950_100.default,hover:e.yellowMoutarde._950_100.hover,active:e.yellowMoutarde._950_100.active},orangeTerreBattue:{default:e.orangeTerreBattue._950_100.default,hover:e.orangeTerreBattue._950_100.hover,active:e.orangeTerreBattue._950_100.active},brownCafeCreme:{default:e.brownCafeCreme._950_100.default,hover:e.brownCafeCreme._950_100.hover,active:e.brownCafeCreme._950_100.active},brownCaramel:{default:e.brownCaramel._950_100.default,hover:e.brownCaramel._950_100.hover,active:e.brownCaramel._950_100.active},brownOpera:{default:e.brownOpera._950_100.default,hover:e.brownOpera._950_100.hover,active:e.brownOpera._950_100.active},beigeGrisGalet:{default:e.beigeGrisGalet._950_100.default,hover:e.beigeGrisGalet._950_100.hover,active:e.beigeGrisGalet._950_100.active},info:{default:e.info._950_100.default,hover:e.info._950_100.hover,active:e.info._950_100.active},success:{default:e.success._950_100.default,hover:e.success._950_100.hover,active:e.success._950_100.active},warning:{default:e.warning._950_100.default,hover:e.warning._950_100.hover,active:e.warning._950_100.active},error:{default:e.error._950_100.default,hover:e.error._950_100.hover,active:e.error._950_100.active}},flat:{grey:{default:e.grey._200_850.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default}},actionHigh:{grey:{default:e.grey._200_850.default,hover:e.grey._200_850.hover,active:e.grey._200_850.active},blueFrance:{default:e.blueFrance.sun113_625.default,hover:e.blueFrance.sun113_625.hover,active:e.blueFrance.sun113_625.active},redMarianne:{default:e.redMarianne._425_625.default,hover:e.redMarianne._425_625.hover,active:e.redMarianne._425_625.active},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default,hover:e.greenTilleulVerveine.sun418moon817.hover,active:e.greenTilleulVerveine.sun418moon817.active},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default,hover:e.greenBourgeon.sun425moon759.hover,active:e.greenBourgeon.sun425moon759.active},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default,hover:e.greenEmeraude.sun425moon753.hover,active:e.greenEmeraude.sun425moon753.active},greenMenthe:{default:e.greenMenthe.sun373moon652.default,hover:e.greenMenthe.sun373moon652.hover,active:e.greenMenthe.sun373moon652.active},greenArchipel:{default:e.greenArchipel.sun391moon716.default,hover:e.greenArchipel.sun391moon716.hover,active:e.greenArchipel.sun391moon716.active},blueEcume:{default:e.blueEcume.sun247moon675.default,hover:e.blueEcume.sun247moon675.hover,active:e.blueEcume.sun247moon675.active},blueCumulus:{default:e.blueCumulus.sun368moon732.default,hover:e.blueCumulus.sun368moon732.hover,active:e.blueCumulus.sun368moon732.active},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default,hover:e.purpleGlycine.sun319moon630.hover,active:e.purpleGlycine.sun319moon630.active},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default,hover:e.pinkMacaron.sun406moon833.hover,active:e.pinkMacaron.sun406moon833.active},pinkTuile:{default:e.pinkTuile.sun425moon750.default,hover:e.pinkTuile.sun425moon750.hover,active:e.pinkTuile.sun425moon750.active},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default,hover:e.yellowTournesol.sun407moon922.hover,active:e.yellowTournesol.sun407moon922.active},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default,hover:e.yellowMoutarde.sun348moon860.hover,active:e.yellowMoutarde.sun348moon860.active},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default,hover:e.orangeTerreBattue.sun370moon672.hover,active:e.orangeTerreBattue.sun370moon672.active},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default,hover:e.brownCafeCreme.sun383moon885.hover,active:e.brownCafeCreme.sun383moon885.active},brownCaramel:{default:e.brownCaramel.sun425moon901.default,hover:e.brownCaramel.sun425moon901.hover,active:e.brownCaramel.sun425moon901.active},brownOpera:{default:e.brownOpera.sun395moon820.default,hover:e.brownOpera.sun395moon820.hover,active:e.brownOpera.sun395moon820.active},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default,hover:e.beigeGrisGalet.sun407moon821.hover,active:e.beigeGrisGalet.sun407moon821.active},info:{default:e.info._425_625.default,hover:e.info._425_625.hover,active:e.info._425_625.active},success:{default:e.success._425_625.default,hover:e.success._425_625.hover,active:e.success._425_625.active},warning:{default:e.warning._425_625.default,hover:e.warning._425_625.hover,active:e.warning._425_625.active},error:{default:e.error._425_625.default,hover:e.error._425_625.hover,active:e.error._425_625.active}},actionLow:{blueFrance:{default:e.blueFrance._925_125.default,hover:e.blueFrance._925_125.hover,active:e.blueFrance._925_125.active},redMarianne:{default:e.redMarianne._925_125.default,hover:e.redMarianne._925_125.hover,active:e.redMarianne._925_125.active},greenTilleulVerveine:{default:e.greenTilleulVerveine._925_125.default,hover:e.greenTilleulVerveine._925_125.hover,active:e.greenTilleulVerveine._925_125.active},greenBourgeon:{default:e.greenBourgeon._925_125.default,hover:e.greenBourgeon._925_125.hover,active:e.greenBourgeon._925_125.active},greenEmeraude:{default:e.greenEmeraude._925_125.default,hover:e.greenEmeraude._925_125.hover,active:e.greenEmeraude._925_125.active},greenMenthe:{default:e.greenMenthe._925_125.default,hover:e.greenMenthe._925_125.hover,active:e.greenMenthe._925_125.active},greenArchipel:{default:e.greenArchipel._925_125.default,hover:e.greenArchipel._925_125.hover,active:e.greenArchipel._925_125.active},blueEcume:{default:e.blueEcume._925_125.default,hover:e.blueEcume._925_125.hover,active:e.blueEcume._925_125.active},blueCumulus:{default:e.blueCumulus._925_125.default,hover:e.blueCumulus._925_125.hover,active:e.blueCumulus._925_125.active},purpleGlycine:{default:e.purpleGlycine._925_125.default,hover:e.purpleGlycine._925_125.hover,active:e.purpleGlycine._925_125.active},pinkMacaron:{default:e.pinkMacaron._925_125.default,hover:e.pinkMacaron._925_125.hover,active:e.pinkMacaron._925_125.active},pinkTuile:{default:e.pinkTuile._925_125.default,hover:e.pinkTuile._925_125.hover,active:e.pinkTuile._925_125.active},yellowTournesol:{default:e.yellowTournesol._925_125.default,hover:e.yellowTournesol._925_125.hover,active:e.yellowTournesol._925_125.active},yellowMoutarde:{default:e.yellowMoutarde._925_125.default,hover:e.yellowMoutarde._925_125.hover,active:e.yellowMoutarde._925_125.active},orangeTerreBattue:{default:e.orangeTerreBattue._925_125.default,hover:e.orangeTerreBattue._925_125.hover,active:e.orangeTerreBattue._925_125.active},brownCafeCreme:{default:e.brownCafeCreme._925_125.default,hover:e.brownCafeCreme._925_125.hover,active:e.brownCafeCreme._925_125.active},brownCaramel:{default:e.brownCaramel._925_125.default,hover:e.brownCaramel._925_125.hover,active:e.brownCaramel._925_125.active},brownOpera:{default:e.brownOpera._925_125.default,hover:e.brownOpera._925_125.hover,active:e.brownOpera._925_125.active},beigeGrisGalet:{default:e.beigeGrisGalet._925_125.default,hover:e.beigeGrisGalet._925_125.hover,active:e.beigeGrisGalet._925_125.active}},active:{blueFrance:{default:e.blueFrance.sun113_625.default,hover:e.blueFrance.sun113_625.hover,active:e.blueFrance.sun113_625.active},redMarianne:{default:e.redMarianne._425_625.default,hover:e.redMarianne._425_625.hover,active:e.redMarianne._425_625.active}},open:{blueFrance:{default:e.blueFrance._925_125.default,hover:e.blueFrance._925_125.hover,active:e.blueFrance._925_125.active},redMarianne:{default:e.redMarianne._925_125.default,hover:e.redMarianne._925_125.hover,active:e.redMarianne._925_125.active}},disabled:{grey:{default:e.grey._925_125.default}},raised:{grey:{default:e.grey._1000_75.default,hover:e.grey._1000_75.hover,active:e.grey._1000_75.active}},overlap:{grey:{default:e.grey._1000_100.default,hover:e.grey._1000_100.hover,active:e.grey._1000_100.active}},lifted:{grey:{default:e.grey._1000_75.default,hover:e.grey._1000_75.hover,active:e.grey._1000_75.active}},altRaised:{grey:{default:e.grey._975_100.default,hover:e.grey._975_100.hover,active:e.grey._975_100.active}},altOverlap:{grey:{default:e.grey._975_125.default,hover:e.grey._975_125.hover,active:e.grey._975_125.active}},contrastRaised:{grey:{default:e.grey._950_125.default,hover:e.grey._950_125.hover,active:e.grey._950_125.active}},contrastOverlap:{grey:{default:e.grey._950_150.default,hover:e.grey._950_150.hover,active:e.grey._950_150.active}}},text:{default:{grey:{default:e.grey._200_850.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default}},actionHigh:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default}},title:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default}},label:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default}},active:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default}},mention:{grey:{default:e.grey._425_625.default}},inverted:{grey:{default:e.grey._1000_50.default},blueFrance:{default:e.blueFrance._975sun113.default},redMarianne:{default:e.redMarianne._975_75.default},info:{default:e.info._975_75.default},success:{default:e.success._975_75.default},warning:{default:e.warning._975_75.default},error:{default:e.error._975_75.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._975_75.default},greenBourgeon:{default:e.greenBourgeon._975_75.default},greenEmeraude:{default:e.greenEmeraude._975_75.default},greenMenthe:{default:e.greenMenthe._975_75.default},greenArchipel:{default:e.greenArchipel._975_75.default},blueEcume:{default:e.blueEcume._975_75.default},blueCumulus:{default:e.blueCumulus._975_75.default},purpleGlycine:{default:e.purpleGlycine._975_75.default},pinkMacaron:{default:e.pinkMacaron._975_75.default},pinkTuile:{default:e.pinkTuile._975_75.default},yellowTournesol:{default:e.yellowTournesol._975_75.default},yellowMoutarde:{default:e.yellowMoutarde._975_75.default},orangeTerreBattue:{default:e.orangeTerreBattue._975_75.default},brownCafeCreme:{default:e.brownCafeCreme._975_75.default},brownCaramel:{default:e.brownCaramel._975_75.default},brownOpera:{default:e.brownOpera._975_75.default},beigeGrisGalet:{default:e.beigeGrisGalet._975_75.default}},disabled:{grey:{default:e.grey._625_425.default}},blackWhite:{grey:{default:e.grey._0_1000.default}}},border:{default:{grey:{default:e.grey._900_175.default},blueFrance:{default:e.blueFrance.main525.default},redMarianne:{default:e.redMarianne.main472.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.main707.default},greenBourgeon:{default:e.greenBourgeon.main640.default},greenEmeraude:{default:e.greenEmeraude.main632.default},greenMenthe:{default:e.greenMenthe.main548.default},greenArchipel:{default:e.greenArchipel.main557.default},blueEcume:{default:e.blueEcume.main400.default},blueCumulus:{default:e.blueCumulus.main526.default},purpleGlycine:{default:e.purpleGlycine.main494.default},pinkMacaron:{default:e.pinkMacaron.main689.default},pinkTuile:{default:e.pinkTuile.main556.default},yellowTournesol:{default:e.yellowTournesol.main731.default},yellowMoutarde:{default:e.yellowMoutarde.main679.default},orangeTerreBattue:{default:e.orangeTerreBattue.main645.default},brownCafeCreme:{default:e.brownCafeCreme.main782.default},brownCaramel:{default:e.brownCaramel.main648.default},brownOpera:{default:e.brownOpera.main680.default},beigeGrisGalet:{default:e.beigeGrisGalet.main702.default}},contrast:{grey:{default:e.grey._625_425.default}},active:{blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default}},actionHigh:{grey:{default:e.grey._50_1000.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default}},actionLow:{blueFrance:{default:e.blueFrance._850_200.default},redMarianne:{default:e.redMarianne._850_200.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._850_200.default},greenBourgeon:{default:e.greenBourgeon._850_200.default},greenEmeraude:{default:e.greenEmeraude._850_200.default},greenMenthe:{default:e.greenMenthe._850_200.default},greenArchipel:{default:e.greenArchipel._850_200.default},blueEcume:{default:e.blueEcume._850_200.default},blueCumulus:{default:e.blueCumulus._850_200.default},purpleGlycine:{default:e.purpleGlycine._850_200.default},pinkMacaron:{default:e.pinkMacaron._850_200.default},pinkTuile:{default:e.pinkTuile._850_200.default},yellowTournesol:{default:e.yellowTournesol._850_200.default},yellowMoutarde:{default:e.yellowMoutarde._850_200.default},orangeTerreBattue:{default:e.orangeTerreBattue._850_200.default},brownCafeCreme:{default:e.brownCafeCreme._850_200.default},brownCaramel:{default:e.brownCaramel._850_200.default},brownOpera:{default:e.brownOpera._850_200.default},beigeGrisGalet:{default:e.beigeGrisGalet._850_200.default}},open:{blueFrance:{default:e.blueFrance._925_125.default},redMarianne:{default:e.redMarianne._925_125.default}},plain:{grey:{default:e.grey._200_850.default},blueFrance:{default:e.blueFrance.sun113_625.default},redMarianne:{default:e.redMarianne._425_625.default},info:{default:e.info._425_625.default},success:{default:e.success._425_625.default},warning:{default:e.warning._425_625.default},error:{default:e.error._425_625.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default},greenMenthe:{default:e.greenMenthe.sun373moon652.default},greenArchipel:{default:e.greenArchipel.sun391moon716.default},blueEcume:{default:e.blueEcume.sun247moon675.default},blueCumulus:{default:e.blueCumulus.sun368moon732.default},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default},pinkTuile:{default:e.pinkTuile.sun425moon750.default},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default},brownCaramel:{default:e.brownCaramel.sun425moon901.default},brownOpera:{default:e.brownOpera.sun395moon820.default},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default}},disabled:{grey:{default:e.grey._925_125.default}}},artwork:{major:{blueFrance:{default:e.blueFrance.sun113_625.default,hover:e.blueFrance.sun113_625.hover,active:e.blueFrance.sun113_625.active},redMarianne:{default:e.redMarianne._425_625.default,hover:e.redMarianne._425_625.hover,active:e.redMarianne._425_625.active},greenTilleulVerveine:{default:e.greenTilleulVerveine.sun418moon817.default,hover:e.greenTilleulVerveine.sun418moon817.hover,active:e.greenTilleulVerveine.sun418moon817.active},greenBourgeon:{default:e.greenBourgeon.sun425moon759.default,hover:e.greenBourgeon.sun425moon759.hover,active:e.greenBourgeon.sun425moon759.active},greenEmeraude:{default:e.greenEmeraude.sun425moon753.default,hover:e.greenEmeraude.sun425moon753.hover,active:e.greenEmeraude.sun425moon753.active},greenMenthe:{default:e.greenMenthe.sun373moon652.default,hover:e.greenMenthe.sun373moon652.hover,active:e.greenMenthe.sun373moon652.active},greenArchipel:{default:e.greenArchipel.sun391moon716.default,hover:e.greenArchipel.sun391moon716.hover,active:e.greenArchipel.sun391moon716.active},blueEcume:{default:e.blueEcume.sun247moon675.default,hover:e.blueEcume.sun247moon675.hover,active:e.blueEcume.sun247moon675.active},blueCumulus:{default:e.blueCumulus.sun368moon732.default,hover:e.blueCumulus.sun368moon732.hover,active:e.blueCumulus.sun368moon732.active},purpleGlycine:{default:e.purpleGlycine.sun319moon630.default,hover:e.purpleGlycine.sun319moon630.hover,active:e.purpleGlycine.sun319moon630.active},pinkMacaron:{default:e.pinkMacaron.sun406moon833.default,hover:e.pinkMacaron.sun406moon833.hover,active:e.pinkMacaron.sun406moon833.active},pinkTuile:{default:e.pinkTuile.sun425moon750.default,hover:e.pinkTuile.sun425moon750.hover,active:e.pinkTuile.sun425moon750.active},yellowTournesol:{default:e.yellowTournesol.sun407moon922.default,hover:e.yellowTournesol.sun407moon922.hover,active:e.yellowTournesol.sun407moon922.active},yellowMoutarde:{default:e.yellowMoutarde.sun348moon860.default,hover:e.yellowMoutarde.sun348moon860.hover,active:e.yellowMoutarde.sun348moon860.active},orangeTerreBattue:{default:e.orangeTerreBattue.sun370moon672.default,hover:e.orangeTerreBattue.sun370moon672.hover,active:e.orangeTerreBattue.sun370moon672.active},brownCafeCreme:{default:e.brownCafeCreme.sun383moon885.default,hover:e.brownCafeCreme.sun383moon885.hover,active:e.brownCafeCreme.sun383moon885.active},brownCaramel:{default:e.brownCaramel.sun425moon901.default,hover:e.brownCaramel.sun425moon901.hover,active:e.brownCaramel.sun425moon901.active},brownOpera:{default:e.brownOpera.sun395moon820.default,hover:e.brownOpera.sun395moon820.hover,active:e.brownOpera.sun395moon820.active},beigeGrisGalet:{default:e.beigeGrisGalet.sun407moon821.default,hover:e.beigeGrisGalet.sun407moon821.hover,active:e.beigeGrisGalet.sun407moon821.active}},minor:{blueFrance:{default:e.blueFrance.main525.default},redMarianne:{default:e.redMarianne.main472.default},greenTilleulVerveine:{default:e.greenTilleulVerveine.main707.default},greenBourgeon:{default:e.greenBourgeon.main640.default},greenEmeraude:{default:e.greenEmeraude.main632.default},greenMenthe:{default:e.greenMenthe.main548.default},greenArchipel:{default:e.greenArchipel.main557.default},blueEcume:{default:e.blueEcume.main400.default},blueCumulus:{default:e.blueCumulus.main526.default},purpleGlycine:{default:e.purpleGlycine.main494.default},pinkMacaron:{default:e.pinkMacaron.main689.default},pinkTuile:{default:e.pinkTuile.main556.default},yellowTournesol:{default:e.yellowTournesol.main731.default},yellowMoutarde:{default:e.yellowMoutarde.main679.default},orangeTerreBattue:{default:e.orangeTerreBattue.main645.default},brownCafeCreme:{default:e.brownCafeCreme.main782.default},brownCaramel:{default:e.brownCaramel.main648.default},brownOpera:{default:e.brownOpera.main680.default},beigeGrisGalet:{default:e.beigeGrisGalet.main702.default}},decorative:{grey:{default:e.grey._950_100.default},blueFrance:{default:e.blueFrance._950_100.default},redMarianne:{default:e.redMarianne._950_100.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._950_100.default},greenBourgeon:{default:e.greenBourgeon._950_100.default},greenEmeraude:{default:e.greenEmeraude._950_100.default},greenMenthe:{default:e.greenMenthe._950_100.default},greenArchipel:{default:e.greenArchipel._950_100.default},blueEcume:{default:e.blueEcume._950_100.default},blueCumulus:{default:e.blueCumulus._950_100.default},purpleGlycine:{default:e.purpleGlycine._950_100.default},pinkMacaron:{default:e.pinkMacaron._950_100.default},pinkTuile:{default:e.pinkTuile._950_100.default},yellowTournesol:{default:e.yellowTournesol._950_100.default},yellowMoutarde:{default:e.yellowMoutarde._950_100.default},orangeTerreBattue:{default:e.orangeTerreBattue._950_100.default},brownCafeCreme:{default:e.brownCafeCreme._950_100.default},brownCaramel:{default:e.brownCaramel._950_100.default},brownOpera:{default:e.brownOpera._950_100.default},beigeGrisGalet:{default:e.beigeGrisGalet._950_100.default}},background:{grey:{default:e.grey._975_75.default},blueFrance:{default:e.blueFrance._975_75.default},redMarianne:{default:e.redMarianne._975_75.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._975_75.default},greenBourgeon:{default:e.greenBourgeon._975_75.default},greenEmeraude:{default:e.greenEmeraude._975_75.default},greenMenthe:{default:e.greenMenthe._975_75.default},greenArchipel:{default:e.greenArchipel._975_75.default},blueEcume:{default:e.blueEcume._975_75.default},blueCumulus:{default:e.blueCumulus._975_75.default},purpleGlycine:{default:e.purpleGlycine._975_75.default},pinkMacaron:{default:e.pinkMacaron._975_75.default},pinkTuile:{default:e.pinkTuile._975_75.default},yellowTournesol:{default:e.yellowTournesol._975_75.default},yellowMoutarde:{default:e.yellowMoutarde._975_75.default},orangeTerreBattue:{default:e.orangeTerreBattue._975_75.default},brownCafeCreme:{default:e.brownCafeCreme._975_75.default},brownCaramel:{default:e.brownCaramel._975_75.default},brownOpera:{default:e.brownOpera._975_75.default},beigeGrisGalet:{default:e.beigeGrisGalet._975_75.default}},motif:{grey:{default:e.grey._925_125.default},blueFrance:{default:e.blueFrance._925_125.default},redMarianne:{default:e.redMarianne._925_125.default},greenTilleulVerveine:{default:e.greenTilleulVerveine._925_125.default},greenBourgeon:{default:e.greenBourgeon._925_125.default},greenEmeraude:{default:e.greenEmeraude._925_125.default},greenMenthe:{default:e.greenMenthe._925_125.default},greenArchipel:{default:e.greenArchipel._925_125.default},blueEcume:{default:e.blueEcume._925_125.default},blueCumulus:{default:e.blueCumulus._925_125.default},purpleGlycine:{default:e.purpleGlycine._925_125.default},pinkMacaron:{default:e.pinkMacaron._925_125.default},pinkTuile:{default:e.pinkTuile._925_125.default},yellowTournesol:{default:e.yellowTournesol._925_125.default},yellowMoutarde:{default:e.yellowMoutarde._925_125.default},orangeTerreBattue:{default:e.orangeTerreBattue._925_125.default},brownCafeCreme:{default:e.brownCafeCreme._925_125.default},brownCaramel:{default:e.brownCaramel._925_125.default},brownOpera:{default:e.brownOpera._925_125.default},beigeGrisGalet:{default:e.beigeGrisGalet._925_125.default}}}}}const colors={options:colorOptions,decisions:colorDecisions,getHex:(()=>{const i=({isDark:a})=>{const s=getColorOptionsHex({isDark:a}),o=getColorDecisionsHex({colorOptions:s});return{options:s,decisions:o}},e={light:void 0,dark:void 0};return({isDark:a})=>{var s,o;return(s=e[o=a?"dark":"light"])!==null&&s!==void 0?s:e[o]=i({isDark:a})}})()},breakpointsValuesUnit="em",breakpointKeys=["xs","sm","md","lg","xl"],breakpointsValues={xs:0,sm:36,md:48,lg:62,xl:78};assert$1();function getBaseFontSizePx(){if(!isBrowser)return 16;const i=document.querySelector("html");assert$1(i!==null);const a=window.getComputedStyle(i).getPropertyValue("font-size");return parseFloat(a)}const epsilon=.003125,breakpoints={up:i=>`@media (min-width:${breakpointsValues[i]}${breakpointsValuesUnit})`,down:i=>`@media (max-width:${breakpointsValues[i]-epsilon}${breakpointsValuesUnit})`,between:(i,e)=>`@media (min-width:${breakpointsValues[i]}${breakpointsValuesUnit}) and (max-width:${breakpointsValues[e]-epsilon}${breakpointsValuesUnit})`,only:i=>breakpointKeys.indexOf(i)+1<breakpointKeys.length?breakpoints.between(i,breakpointKeys[breakpointKeys.indexOf(i)+1]):breakpoints.up((assert$1(i!=="xs"),i)),not:i=>{const e=breakpointKeys.indexOf(i);if(e===0)return breakpoints.up(breakpointKeys[1]);if(e===breakpointKeys.length-1){const a=breakpointKeys[e];return assert$1(a!=="xs"),breakpoints.down(a)}return breakpoints.between(i,breakpointKeys[breakpointKeys.indexOf(i)+1]).replace("@media","@media not all and")},values:(()=>{const i=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(()=>{const e="xs";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="sm";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="md";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="lg";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})()),(()=>{const e="xl";return{[e]:`${breakpointsValues[e]}${breakpointsValuesUnit}`}})());return assert$1(),i})(),valuesUnit:breakpointsValuesUnit,emValues:(assert$1(),breakpointsValues),getPxValues:()=>{assert$1();const i=getBaseFontSizePx();return Object.fromEntries(Object.entries(breakpointsValues).map(([e,a])=>[e,a*i]))}};function capitalize(i){return i.charAt(0).toUpperCase()+i.slice(1)}const spacingTokenByValue={"1v":"0.25rem","1w":"0.5rem","2v":"0.5rem","3v":"0.75rem","2w":"1rem","4v":"1rem","5v":"1.25rem","3w":"1.5rem","6v":"1.5rem","7v":"1.75rem","4w":"2rem","8v":"2rem","9v":"2.25rem","10v":"2.5rem","5w":"2.5rem","11v":"2.75rem","12v":"3rem","6w":"3rem","13v":"3.25rem","14v":"3.5rem","7w":"3.5rem","15v":"3.75rem","16v":"4rem","8w":"4rem","17v":"4.25rem","18v":"4.5rem","9w":"4.5rem","19v":"4.75rem","10w":"5rem","20v":"5rem","21v":"5.25rem","11w":"5.5rem","22v":"5.5rem","23v":"5.75rem","12w":"6rem","24v":"6rem","25v":"6.25rem","13w":"6.5rem","26v":"6.5rem","27v":"6.75rem","14w":"7rem","28v":"7rem","29v":"7.25rem","15w":"7.5rem","30v":"7.5rem","31v":"7.75rem","16w":"8rem","32v":"8rem"};function spacing(i,e){if(["padding","margin"].indexOf(i)>=0){const a=i;assert$1(e!==void 0);const s={},o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(()=>{const{rightLeft:c}=e;return c!==void 0&&{right:c,left:c}})()),(()=>{const{topBottom:c}=e;return c!==void 0&&{top:c,bottom:c}})()),e.top!==void 0&&{top:e.top}),e.right!==void 0&&{right:e.right}),e.bottom!==void 0&&{bottom:e.bottom}),e.left!==void 0&&{left:e.left});return["top","right","bottom","left"].forEach(c=>{const d=o[c];d!==void 0&&(s[`${a}${capitalize(c)}`]=typeof d=="number"||d==="auto"?d:spacingTokenByValue[d])}),s}else return spacingTokenByValue[i]}function typeGuard(i,e){return e}const cx$1=(...i)=>{const e=i.length;let a=0,s="";for(;a<e;a++){const o=i[a];if(o==null)continue;let c;switch(typeof o){case"boolean":break;case"object":{if(Array.isArray(o))c=cx$1(...o);else{assert$1(!typeGuard(o,!1)),c="";for(const d in o)o[d]&&d&&(c&&(c+=" "),c+=d)}break}default:c=o}c&&(s&&(s+=" "),s+=c)}return s},cx=cx$1,typography=[{selector:"h6",style:{fontWeight:700,fontSize:"1.125rem",lineHeight:"1.5rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.25rem",lineHeight:"1.75rem"}}},{selector:"h5",style:{fontWeight:700,fontSize:"1.25rem",lineHeight:"1.75rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.375rem",lineHeight:"1.75rem"}}},{selector:"h4",style:{fontWeight:700,fontSize:"1.375rem",lineHeight:"1.75rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.5rem",lineHeight:"2rem"}}},{selector:"h3",style:{fontWeight:700,fontSize:"1.5rem",lineHeight:"2rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"1.75rem",lineHeight:"2.25rem"}}},{selector:"h2",style:{fontWeight:700,fontSize:"1.75rem",lineHeight:"2.25rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"2rem",lineHeight:"2.5rem"}}},{selector:"h1",style:{fontWeight:700,fontSize:"2rem",lineHeight:"2.5rem",margin:"var(--title-spacing)",color:"var(--text-title-grey)",[breakpoints.up("md")]:{fontSize:"2.5rem",lineHeight:"3rem"}}},{selector:"p",style:{fontSize:"1rem",lineHeight:"1.5rem",margin:"var(--text-spacing)"}},{selector:".fr-text--light",style:{fontWeight:"300 !important"}},{selector:".fr-text--regular",style:{fontWeight:"400 !important"}},{selector:".fr-text--bold",style:{fontWeight:"700 !important"}},{selector:".fr-text--heavy",style:{fontWeight:"900 !important"}},{selector:".fr-display--xs",style:{fontWeight:"700 !important",fontSize:"2.5rem !important",lineHeight:"3rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"3rem !important",lineHeight:"3.5rem !important"}}},{selector:".fr-display--sm",style:{fontWeight:"700 !important",fontSize:"3rem !important",lineHeight:"3.5rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"3.5rem !important",lineHeight:"4rem !important"}}},{selector:".fr-display--md",style:{fontWeight:"700 !important",fontSize:"3.5rem !important",lineHeight:"4rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"4rem !important",lineHeight:"4.5rem !important"}}},{selector:".fr-display--lg",style:{fontWeight:"700 !important",fontSize:"4rem !important",lineHeight:"4.5rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"4.5rem !important",lineHeight:"5rem !important"}}},{selector:".fr-display--xl",style:{fontWeight:"700 !important",fontSize:"4.5rem !important",lineHeight:"5rem !important",margin:"var(--display-spacing)",[breakpoints.up("md")]:{fontSize:"5rem !important",lineHeight:"5.5rem !important"}}},{selector:".fr-text--alt",style:{fontFamily:'"Spectral", georgia, serif !important'}},{selector:".fr-text--xs",style:{fontSize:"0.75rem !important",lineHeight:"1.25rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--sm",style:{fontSize:"0.875rem !important",lineHeight:"1.5rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--md",style:{fontSize:"1rem !important",lineHeight:"1.5rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--lg",style:{fontSize:"1.125rem !important",lineHeight:"1.75rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--xl",style:{fontSize:"1.25rem !important",lineHeight:"2rem !important",margin:"var(--text-spacing)"}},{selector:".fr-text--lead",style:{fontSize:"1.25rem !important",lineHeight:"2rem !important",margin:"var(--text-spacing)"}}],fr={breakpoints,spacing,cx,colors,typography},data_fr_theme="data-fr-theme",data_fr_scheme="data-fr-scheme",rootColorSchemeStyleTagId="dsfr-root-color-scheme";var define_process_env_default={};const $clientSideIsDark=createStatefulObservable(()=>{if(typeof process=="object"&&define_process_env_default.JEST_WORKER_ID!==void 0)return!1;throw new Error(["react-dsfr not initialized.","Refer to the documentation for setup instructions","If it used to work but after an update you're getting this error","it usually means that you have multiple copies of @codegouvfr/react-dsfr in your node_modules","@codegouvfr/react-dsfr is a singleton, try removing your lock file and node_module."].join(" "))}),$isAfterFirstEffect=createStatefulObservable(()=>!1);function getCurrentIsDarkFromHtmlAttribute(){const i=document.documentElement.getAttribute(data_fr_theme);switch(i){case null:return;case"light":return!1;case"dark":return!0}assert$1(!1,`Unrecognized ${data_fr_theme} attribute value: ${i}`)}function startClientSideIsDarkLogic(i){const{doPersistDarkModePreferenceWithCookie:e,registerEffectAction:a,colorSchemeExplicitlyProvidedAsParameter:s,doCheckNonce:o=!1,trustedTypesPolicyName:c}=i,{clientSideIsDark:d,ssrWasPerformedWithIsDark:h}=(()=>{var b,j,$;const _e=getCurrentIsDarkFromHtmlAttribute();if(_e!==void 0)return{clientSideIsDark:_e,ssrWasPerformedWithIsDark:(b=window.ssrWasPerformedWithIsDark)!==null&&b!==void 0?b:_e};const et=(()=>{if(s!=="system")switch(s){case"dark":return!0;case"light":return!1}})(),tt=(()=>{const rt=localStorage.getItem("scheme");if(rt!==null&&rt!=="system")switch(rt){case"dark":return!0;case"light":return!1}})(),it=(()=>{if(window.matchMedia)return window.matchMedia("(prefers-color-scheme: dark)").matches})(),nt=!1;return{ssrWasPerformedWithIsDark:et??nt,clientSideIsDark:($=(j=tt??et)!==null&&j!==void 0?j:it)!==null&&$!==void 0?$:nt}})(),g=window.trustedTypes,_=typeof g<"u"?g.createPolicy(c,{createHTML:b=>b}):{createHTML:b=>b};$clientSideIsDark.current=d,[data_fr_scheme,data_fr_theme].forEach(b=>document.documentElement.setAttribute(b,d?"dark":"light")),new MutationObserver(()=>{const b=getCurrentIsDarkFromHtmlAttribute();assert$1(b!==void 0),$clientSideIsDark.current=b}).observe(document.documentElement,{attributes:!0,attributeFilter:[data_fr_theme]});{const b=j=>{if(!e)return;let _e=`${data_fr_theme}=${j?"dark":"light"};path=/;max-age=31536000;SameSite=Strict`;e:{const{hostname:et}=window.location;if(/(^localhost$)|(^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$)/.test(et))break e;_e+=`;domain=${et}`}document.cookie=_e};b($clientSideIsDark.current),$clientSideIsDark.subscribe(b)}{const b=j=>{var $;const _e=window.ssrNonce;if(o&&!_e)return;($=document.getElementById(rootColorSchemeStyleTagId))===null||$===void 0||$.remove();const et=document.createElement("style");et.id=rootColorSchemeStyleTagId,_e&&et.setAttribute("nonce",_e),et.innerHTML=_.createHTML(`:root { color-scheme: ${j?"dark":"light"}; }`),document.head.appendChild(et)};b($clientSideIsDark.current),$clientSideIsDark.subscribe(b)}{const b=j=>{var $;const _e="theme-color";($=document.querySelector(`meta[name=${_e}]`))===null||$===void 0||$.remove();const et=document.createElement("meta");et.name=_e,et.content=fr.colors.getHex({isDark:j}).decisions.background.default.grey.default,document.head.appendChild(et)};b($clientSideIsDark.current),$clientSideIsDark.subscribe(b)}a(()=>$isAfterFirstEffect.current=!0)}class Deferred{constructor(){this.isPending=!0;let e,a;this.pr=new Promise((s,o)=>{e=c=>{overwriteReadonlyProp(this,"isPending",!1),s(c)},a=c=>{overwriteReadonlyProp(this,"isPending",!1),o(c)}}),this.resolve=e,this.reject=a}}let isStarted=!1;async function start$1(i){const{defaultColorScheme:e,verbose:a,nextParams:s,doCheckNonce:o,trustedTypesPolicyName:c}=i;if(assert$1(isBrowser),isStarted)return;isStarted=!0;const d=s===void 0?h=>h():s.registerEffectAction;startClientSideIsDarkLogic({colorSchemeExplicitlyProvidedAsParameter:e,doPersistDarkModePreferenceWithCookie:s===void 0?!1:s.doPersistDarkModePreferenceWithCookie,registerEffectAction:d,doCheckNonce:o,trustedTypesPolicyName:c}),window.dsfr={verbose:a,mode:"react"},await __vitePreload(()=>import("./dsfr.module-dw2D8BKj.js"),[]),dDsfrLoaded.resolve(),d(()=>{window.dsfr.start()})}const dDsfrLoaded=new Deferred,prDsfrLoaded=dDsfrLoaded.pr;var __rest$9=function(i,e){var a={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(a[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(a[s[o]]=i[s[o]]);return a};let Link=i=>{const e=i,{href:a}=e,s=__rest$9(e,["href"]);e:{if(a!=="#"||!("onClick"in s))break e;return assert$1(is()),React.createElement("button",Object.assign({},s,{className:cx$1(fr.cx("fr-link"),s.className)}))}return React.createElement("a",Object.assign({href:a},s))};function setLink(i){Link=e=>{var a;{const s=e,{to:o,href:c}=s,d=__rest$9(s,["to","href"]),h=(a=typeof o=="string"?o:void 0)!==null&&a!==void 0?a:typeof c=="string"?c:void 0;e:{if(h!=="#"||!("onClick"in d))break e;return assert$1(is()),React.createElement("button",Object.assign({},d,{className:cx$1(fr.cx("fr-link"),d.className)}))}e:{if(h===void 0||!h.startsWith("//")&&!/^https?:\/\//.test(h))break e;return React.createElement("a",Object.assign({href:h,target:"_blank",rel:"noreferrer"},d))}e:{if(h===void 0||!h.startsWith("#"))break e;return React.createElement("a",Object.assign({href:h},d))}e:{if(h===void 0||!/^[a-z]+:/.test(h))break e;return React.createElement("a",Object.assign({href:h},d))}}return React.createElement(i.Link,Object.assign({},e))}}function getLink(){return{Link}}function getLanguageBestApprox(i){const{languages:e,languageLike:a}=i;e:{const s=e.find(o=>o.toLowerCase()===a.toLowerCase());if(s===void 0)break e;return s}e:{const s=a.split("-")[0].toLowerCase(),o=e.find(c=>c.toLowerCase().includes(s));if(o===void 0)break e;return o}}let useLang_glob=()=>"fr";function setUseLang(i){useLang_glob=i.useLang}function useLang(){return useLang_glob()}function createComponentI18nApi(i){const{componentName:e,frMessages:a}=i,s={fr:a};function o(){const d=useLang(),h=reactExports.useMemo(()=>{const _=getLanguageBestApprox({languages:Object.keys(s),languageLike:d});return _??"fr"},[d]);function g(_,b){var j;const $=(j=s[h][_])!==null&&j!==void 0?j:s.fr[_];return b===void 0?$:$(b)}return{t:g}}function c(d){const{lang:h,messages:g}=d;Object.entries(g).filter(([,_])=>_!==void 0).forEach(([_,b])=>{var j,$;return((j=($=s)[h])!==null&&j!==void 0?j:$[h]={})[_]=b})}return{useTranslation:o,[`add${capitalize(e)}Translations`]:c}}function startReactDsfr(i){const{defaultColorScheme:e,verbose:a=!1,Link:s,useLang:o,nonce:c,trustedTypesPolicyName:d="react-dsfr"}=i;s!==void 0&&setLink({Link:s}),o!==void 0&&setUseLang({useLang:o}),assert$1(c!=="","nonce cannot be an empty string");const h=c!==void 0;h&&(window.ssrNonce=c),start$1({defaultColorScheme:e,verbose:a,doCheckNonce:h,trustedTypesPolicyName:d,nextParams:void 0})}var reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(bt,Mt){var It=bt.length;bt.push(Mt);e:for(;0<It;){var Nt=It-1>>>1,wt=bt[Nt];if(0<o(wt,Mt))bt[Nt]=Mt,bt[It]=wt,It=Nt;else break e}}function a(bt){return bt.length===0?null:bt[0]}function s(bt){if(bt.length===0)return null;var Mt=bt[0],It=bt.pop();if(It!==Mt){bt[0]=It;e:for(var Nt=0,wt=bt.length,Wt=wt>>>1;Nt<Wt;){var jt=2*(Nt+1)-1,Ft=bt[jt],zt=jt+1,Yt=bt[zt];if(0>o(Ft,It))zt<wt&&0>o(Yt,Ft)?(bt[Nt]=Yt,bt[zt]=It,Nt=zt):(bt[Nt]=Ft,bt[jt]=It,Nt=jt);else if(zt<wt&&0>o(Yt,It))bt[Nt]=Yt,bt[zt]=It,Nt=zt;else break e}}return Mt}function o(bt,Mt){var It=bt.sortIndex-Mt.sortIndex;return It!==0?It:bt.id-Mt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();i.unstable_now=function(){return d.now()-h}}var g=[],_=[],b=1,j=null,$=3,_e=!1,et=!1,tt=!1,it=typeof setTimeout=="function"?setTimeout:null,nt=typeof clearTimeout=="function"?clearTimeout:null,rt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function at(bt){for(var Mt=a(_);Mt!==null;){if(Mt.callback===null)s(_);else if(Mt.startTime<=bt)s(_),Mt.sortIndex=Mt.expirationTime,e(g,Mt);else break;Mt=a(_)}}function st(bt){if(tt=!1,at(bt),!et)if(a(g)!==null)et=!0,St(ot);else{var Mt=a(_);Mt!==null&&Pt(st,Mt.startTime-bt)}}function ot(bt,Mt){et=!1,tt&&(tt=!1,nt(ct),ct=-1),_e=!0;var It=$;try{for(at(Mt),j=a(g);j!==null&&(!(j.expirationTime>Mt)||bt&&!pt());){var Nt=j.callback;if(typeof Nt=="function"){j.callback=null,$=j.priorityLevel;var wt=Nt(j.expirationTime<=Mt);Mt=i.unstable_now(),typeof wt=="function"?j.callback=wt:j===a(g)&&s(g),at(Mt)}else s(g);j=a(g)}if(j!==null)var Wt=!0;else{var jt=a(_);jt!==null&&Pt(st,jt.startTime-Mt),Wt=!1}return Wt}finally{j=null,$=It,_e=!1}}var dt=!1,ut=null,ct=-1,ht=5,mt=-1;function pt(){return!(i.unstable_now()-mt<ht)}function ft(){if(ut!==null){var bt=i.unstable_now();mt=bt;var Mt=!0;try{Mt=ut(!0,bt)}finally{Mt?yt():(dt=!1,ut=null)}}else dt=!1}var yt;if(typeof rt=="function")yt=function(){rt(ft)};else if(typeof MessageChannel<"u"){var Ct=new MessageChannel,_t=Ct.port2;Ct.port1.onmessage=ft,yt=function(){_t.postMessage(null)}}else yt=function(){it(ft,0)};function St(bt){ut=bt,dt||(dt=!0,yt())}function Pt(bt,Mt){ct=it(function(){bt(i.unstable_now())},Mt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(bt){bt.callback=null},i.unstable_continueExecution=function(){et||_e||(et=!0,St(ot))},i.unstable_forceFrameRate=function(bt){0>bt||125<bt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ht=0<bt?Math.floor(1e3/bt):5},i.unstable_getCurrentPriorityLevel=function(){return $},i.unstable_getFirstCallbackNode=function(){return a(g)},i.unstable_next=function(bt){switch($){case 1:case 2:case 3:var Mt=3;break;default:Mt=$}var It=$;$=Mt;try{return bt()}finally{$=It}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(bt,Mt){switch(bt){case 1:case 2:case 3:case 4:case 5:break;default:bt=3}var It=$;$=bt;try{return Mt()}finally{$=It}},i.unstable_scheduleCallback=function(bt,Mt,It){var Nt=i.unstable_now();switch(typeof It=="object"&&It!==null?(It=It.delay,It=typeof It=="number"&&0<It?Nt+It:Nt):It=Nt,bt){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=It+wt,bt={id:b++,callback:Mt,priorityLevel:bt,startTime:It,expirationTime:wt,sortIndex:-1},It>Nt?(bt.sortIndex=It,e(_,bt),a(g)===null&&bt===a(_)&&(tt?(nt(ct),ct=-1):tt=!0,Pt(st,It-Nt))):(bt.sortIndex=wt,e(g,bt),et||_e||(et=!0,St(ot))),bt},i.unstable_shouldYield=pt,i.unstable_wrapCallback=function(bt){var Mt=$;return function(){var It=$;$=Mt;try{return bt.apply(this,arguments)}finally{$=It}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,a=1;a<arguments.length;a++)e+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,e){ha(i,e),ha(i+"Capture",e)}function ha(i,e){for(ea[i]=e,i=0;i<e.length;i++)da.add(e[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,e,a,s){if(a!==null&&a.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:a!==null?!a.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,e,a,s){if(e===null||typeof e>"u"||pa(i,e,a,s))return!0;if(s)return!1;if(a!==null)switch(a.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v(i,e,a,s,o,c,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=a,this.propertyName=i,this.type=e,this.sanitizeURL=c,this.removeEmptyString=d}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z[i]=new v(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];z[e]=new v(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z[i]=new v(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z[i]=new v(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z[i]=new v(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z[i]=new v(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z[i]=new v(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z[i]=new v(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z[i]=new v(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(ra,sa);z[e]=new v(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z[i]=new v(i,1,!1,i.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z[i]=new v(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,e,a,s){var o=z.hasOwnProperty(e)?z[e]:null;(o!==null?o.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,a,o,s)&&(a=null),s||o===null?oa(e)&&(a===null?i.removeAttribute(e):i.setAttribute(e,""+a)):o.mustUseProperty?i[o.propertyName]=a===null?o.type===3?!1:"":a:(e=o.attributeName,s=o.attributeNamespace,a===null?i.removeAttribute(e):(o=o.type,a=o===3||o===4&&a===!0?"":""+a,s?i.setAttributeNS(s,e,a):i.setAttribute(e,a))))}var ua$1=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A$1=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(a){var e=a.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+i}var Na=!1;function Oa(i,e){if(!i||Na)return"";Na=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(_){var s=_}Reflect.construct(i,[],e)}else{try{e.call()}catch(_){s=_}i.call(e.prototype)}else{try{throw Error()}catch(_){s=_}i()}}catch(_){if(_&&s&&typeof _.stack=="string"){for(var o=_.stack.split(`
`),c=s.stack.split(`
`),d=o.length-1,h=c.length-1;1<=d&&0<=h&&o[d]!==c[h];)h--;for(;1<=d&&0<=h;d--,h--)if(o[d]!==c[h]){if(d!==1||h!==1)do if(d--,h--,0>h||o[d]!==c[h]){var g=`
`+o[d].replace(" at new "," at ");return i.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",i.displayName)),g}while(1<=d&&0<=h);break}}}finally{Na=!1,Error.prepareStackTrace=a}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return e=i.displayName||null,e!==null?e:Qa(i.type)||"Memo";case Ha:e=i._payload,i=i._init;try{return Qa(i(e))}catch{}}return null}function Ra(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(i){var e=Ta(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),s=""+i[e];if(!i.hasOwnProperty(e)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var o=a.get,c=a.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return o.call(this)},set:function(d){s=""+d,c.call(this,d)}}),Object.defineProperty(i,e,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(d){s=""+d},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var a=e.getValue(),s="";return i&&(s=Ta(i)?i.checked?"true":"false":i.value),i=s,i!==a?(e.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya(i,e){var a=e.checked;return A$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??i._wrapperState.initialChecked})}function Za(i,e){var a=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;a=Sa(e.value!=null?e.value:a),i._wrapperState={initialChecked:s,initialValue:a,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(i,e){e=e.checked,e!=null&&ta(i,"checked",e,!1)}function bb(i,e){ab(i,e);var a=Sa(e.value),s=e.type;if(a!=null)s==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+a):i.value!==""+a&&(i.value=""+a);else if(s==="submit"||s==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?cb(i,e.type,a):e.hasOwnProperty("defaultValue")&&cb(i,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function db(i,e,a){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,a||e===i.value||(i.value=e),i.defaultValue=e}a=i.name,a!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,a!==""&&(i.name=a)}function cb(i,e,a){(e!=="number"||Xa(i.ownerDocument)!==i)&&(a==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+a&&(i.defaultValue=""+a))}var eb=Array.isArray;function fb(i,e,a,s){if(i=i.options,e){e={};for(var o=0;o<a.length;o++)e["$"+a[o]]=!0;for(a=0;a<i.length;a++)o=e.hasOwnProperty("$"+i[a].value),i[a].selected!==o&&(i[a].selected=o),o&&s&&(i[a].defaultSelected=!0)}else{for(a=""+Sa(a),e=null,o=0;o<i.length;o++){if(i[o].value===a){i[o].selected=!0,s&&(i[o].defaultSelected=!0);return}e!==null||i[o].disabled||(e=i[o])}e!==null&&(e.selected=!0)}}function gb(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A$1({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,e){var a=e.value;if(a==null){if(a=e.children,e=e.defaultValue,a!=null){if(e!=null)throw Error(p(92));if(eb(a)){if(1<a.length)throw Error(p(93));a=a[0]}e=a}e==null&&(e=""),a=e}i._wrapperState={initialValue:Sa(a)}}function ib(i,e){var a=Sa(e.value),s=Sa(e.defaultValue);a!=null&&(a=""+a,a!==i.value&&(i.value=a),e.defaultValue==null&&i.defaultValue!==a&&(i.defaultValue=a)),s!=null&&(i.defaultValue=""+s)}function jb(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,a,s,o){MSApp.execUnsafeLocalFunction(function(){return i(e,a,s,o)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function ob(i,e){if(e){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=e;return}}i.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),pb[e]=pb[i]})});function rb(i,e,a){return e==null||typeof e=="boolean"||e===""?"":a||typeof e!="number"||e===0||pb.hasOwnProperty(i)&&pb[i]?(""+e).trim():e+"px"}function sb(i,e){i=i.style;for(var a in e)if(e.hasOwnProperty(a)){var s=a.indexOf("--")===0,o=rb(a,e[a],s);a==="float"&&(a="cssFloat"),s?i.setProperty(a,o):i[a]=o}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,e){if(e){if(tb[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p(280));var e=i.stateNode;e&&(e=Db(e),yb(i.stateNode,i.type,e))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,e=Ab;if(Ab=zb=null,Bb(i),e)for(i=0;i<e.length;i++)Bb(e[i])}}function Gb(i,e){return i(e)}function Hb(){}var Ib=!1;function Jb(i,e,a){if(Ib)return i(e,a);Ib=!0;try{return Gb(i,e,a)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,e){var a=i.stateNode;if(a===null)return null;var s=Db(a);if(s===null)return null;a=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(i=i.type,s=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!s;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(p(231,e,typeof a));return a}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(i,e,a,s,o,c,d,h,g){var _=Array.prototype.slice.call(arguments,3);try{e.apply(a,_)}catch(b){this.onError(b)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,e,a,s,o,c,d,h,g){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,e,a,s,o,c,d,h,g){if(Tb.apply(this,arguments),Ob){if(Ob){var _=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=_)}}function Vb(i){var e=i,a=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(a=e.return),i=e.return;while(i)}return e.tag===3?a:null}function Wb(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p(188))}function Yb(i){var e=i.alternate;if(!e){if(e=Vb(i),e===null)throw Error(p(188));return e!==i?null:i}for(var a=i,s=e;;){var o=a.return;if(o===null)break;var c=o.alternate;if(c===null){if(s=o.return,s!==null){a=s;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===a)return Xb(o),i;if(c===s)return Xb(o),e;c=c.sibling}throw Error(p(188))}if(a.return!==s.return)a=o,s=c;else{for(var d=!1,h=o.child;h;){if(h===a){d=!0,a=o,s=c;break}if(h===s){d=!0,s=o,a=c;break}h=h.sibling}if(!d){for(h=c.child;h;){if(h===a){d=!0,a=c,s=o;break}if(h===s){d=!0,s=c,a=o;break}h=h.sibling}if(!d)throw Error(p(189))}}if(a.alternate!==s)throw Error(p(190))}if(a.tag!==3)throw Error(p(188));return a.stateNode.current===a?i:e}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=$b(i);if(e!==null)return e;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,e){var a=i.pendingLanes;if(a===0)return 0;var s=0,o=i.suspendedLanes,c=i.pingedLanes,d=a&268435455;if(d!==0){var h=d&~o;h!==0?s=tc(h):(c&=d,c!==0&&(s=tc(c)))}else d=a&~o,d!==0?s=tc(d):c!==0&&(s=tc(c));if(s===0)return 0;if(e!==0&&e!==s&&!(e&o)&&(o=s&-s,c=e&-e,o>=c||o===16&&(c&4194240)!==0))return e;if(s&4&&(s|=a&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=s;0<e;)a=31-oc(e),o=1<<a,s|=i[a],e&=~o;return s}function vc(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,e){for(var a=i.suspendedLanes,s=i.pingedLanes,o=i.expirationTimes,c=i.pendingLanes;0<c;){var d=31-oc(c),h=1<<d,g=o[d];g===-1?(!(h&a)||h&s)&&(o[d]=vc(h,e)):g<=e&&(i.expiredLanes|=h),c&=~h}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var e=[],a=0;31>a;a++)e.push(i);return e}function Ac(i,e,a){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-oc(e),i[e]=a}function Bc(i,e){var a=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var s=i.eventTimes;for(i=i.expirationTimes;0<a;){var o=31-oc(a),c=1<<o;e[o]=0,s[o]=-1,i[o]=-1,a&=~c}}function Cc(i,e){var a=i.entangledLanes|=e;for(i=i.entanglements;a;){var s=31-oc(a),o=1<<s;o&e|i[s]&e&&(i[s]|=e),a&=~o}}var C=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,e){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(i,e,a,s,o,c){return i===null||i.nativeEvent!==c?(i={blockedOn:e,domEventName:a,eventSystemFlags:s,nativeEvent:c,targetContainers:[o]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),i):(i.eventSystemFlags|=s,e=i.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),i)}function Uc(i,e,a,s,o){switch(e){case"focusin":return Lc=Tc(Lc,i,e,a,s,o),!0;case"dragenter":return Mc=Tc(Mc,i,e,a,s,o),!0;case"mouseover":return Nc=Tc(Nc,i,e,a,s,o),!0;case"pointerover":var c=o.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,i,e,a,s,o)),!0;case"gotpointercapture":return c=o.pointerId,Pc.set(c,Tc(Pc.get(c)||null,i,e,a,s,o)),!0}return!1}function Vc(i){var e=Wc(i.target);if(e!==null){var a=Vb(e);if(a!==null){if(e=a.tag,e===13){if(e=Wb(a),e!==null){i.blockedOn=e,Ic(i.priority,function(){Gc(a)});return}}else if(e===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var a=Yc(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(a===null){a=i.nativeEvent;var s=new a.constructor(a.type,a);wb=s,a.target.dispatchEvent(s),wb=null}else return e=Cb(a),e!==null&&Fc(e),i.blockedOn=a,!1;e.shift()}return!0}function Zc(i,e,a){Xc(i)&&a.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,e){i.blockedOn===e&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function e(o){return ad(o,i)}if(0<Kc.length){ad(Kc[0],i);for(var a=1;a<Kc.length;a++){var s=Kc[a];s.blockedOn===i&&(s.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(e),Pc.forEach(e),a=0;a<Qc.length;a++)s=Qc[a],s.blockedOn===i&&(s.blockedOn=null);for(;0<Qc.length&&(a=Qc[0],a.blockedOn===null);)Vc(a),a.blockedOn===null&&Qc.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(i,e,a,s){var o=C,c=cd.transition;cd.transition=null;try{C=1,fd(i,e,a,s)}finally{C=o,cd.transition=c}}function gd(i,e,a,s){var o=C,c=cd.transition;cd.transition=null;try{C=4,fd(i,e,a,s)}finally{C=o,cd.transition=c}}function fd(i,e,a,s){if(dd){var o=Yc(i,e,a,s);if(o===null)hd(i,e,s,id,a),Sc(i,s);else if(Uc(o,i,e,a,s))s.stopPropagation();else if(Sc(i,s),e&4&&-1<Rc.indexOf(i)){for(;o!==null;){var c=Cb(o);if(c!==null&&Ec(c),c=Yc(i,e,a,s),c===null&&hd(i,e,s,id,a),c===o)break;o=c}o!==null&&s.stopPropagation()}else hd(i,e,s,null,a)}}var id=null;function Yc(i,e,a,s){if(id=null,i=xb(s),i=Wc(i),i!==null)if(e=Vb(i),e===null)i=null;else if(a=e.tag,a===13){if(i=Wb(e),i!==null)return i;i=null}else if(a===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return id=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,e=ld,a=e.length,s,o="value"in kd?kd.value:kd.textContent,c=o.length;for(i=0;i<a&&e[i]===o[i];i++);var d=a-i;for(s=1;s<=d&&e[a-s]===o[c-s];s++);return md=o.slice(i,1<s?1-s:void 0)}function od(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function e(a,s,o,c,d){this._reactName=a,this._targetInst=o,this.type=s,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var h in i)i.hasOwnProperty(h)&&(a=i[h],this[h]=a?a(c):c[h]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=Od[i])?!!e[i]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(i){if(i.key){var e=Md[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(i,e){switch(i){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie=!1;function je(i,e){switch(i){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return i=e.data,i===ee&&fe?null:i;default:return null}}function ke(i,e){if(ie)return i==="compositionend"||!ae&&ge(i,e)?(i=nd(),md=ld=kd=null,ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!le[i.type]:e==="textarea"}function ne(i,e,a,s){Eb(s),e=oe(e,"onChange"),0<e.length&&(a=new td("onChange","change",null,a,s),i.push({event:a,listeners:e}))}var pe=null,qe=null;function re(i){se(i,0)}function te(i){var e=ue(i);if(Wa(e))return i}function ve(i,e){if(i==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(i){if(i.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,i,xb(i)),Jb(re,e)}}function Ce(i,e,a){i==="focusin"?(Ae(),pe=e,qe=a,pe.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae()}function De(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te(qe)}function Ee(i,e){if(i==="click")return te(e)}function Fe(i,e){if(i==="input"||i==="change")return te(e)}function Ge(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(i,e){if(He(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var a=Object.keys(i),s=Object.keys(e);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var o=a[s];if(!ja.call(e,o)||!He(i[o],e[o]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,e){var a=Je(i);i=0;for(var s;a;){if(a.nodeType===3){if(s=i+a.textContent.length,i<=e&&s>=e)return{node:a,offset:e-i};i=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Je(a)}}function Le(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Le(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var i=window,e=Xa();e instanceof i.HTMLIFrameElement;){try{var a=typeof e.contentWindow.location.href=="string"}catch{a=!1}if(a)i=e.contentWindow;else break;e=Xa(i.document)}return e}function Ne(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Oe(i){var e=Me(),a=i.focusedElem,s=i.selectionRange;if(e!==a&&a&&a.ownerDocument&&Le(a.ownerDocument.documentElement,a)){if(s!==null&&Ne(a)){if(e=s.start,i=s.end,i===void 0&&(i=e),"selectionStart"in a)a.selectionStart=e,a.selectionEnd=Math.min(i,a.value.length);else if(i=(e=a.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var o=a.textContent.length,c=Math.min(s.start,o);s=s.end===void 0?c:Math.min(s.end,o),!i.extend&&c>s&&(o=s,s=c,c=o),o=Ke(a,c);var d=Ke(a,s);o&&d&&(i.rangeCount!==1||i.anchorNode!==o.node||i.anchorOffset!==o.offset||i.focusNode!==d.node||i.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),i.removeAllRanges(),c>s?(i.addRange(e),i.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),i.addRange(e)))}}for(e=[],i=a;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<e.length;a++)i=e[a],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(i,e,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Te||Qe==null||Qe!==Xa(s)||(s=Qe,"selectionStart"in s&&Ne(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Se&&Ie(Se,s)||(Se=s,s=oe(Re,"onSelect"),0<s.length&&(e=new td("onSelect","select",null,e,a),i.push({event:e,listeners:s}),e.target=Qe)))}function Ve(i,e){var a={};return a[i.toLowerCase()]=e.toLowerCase(),a["Webkit"+i]="webkit"+e,a["Moz"+i]="moz"+e,a}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We[i])return i;var e=We[i],a;for(a in e)if(e.hasOwnProperty(a)&&a in Ye)return Xe[i]=e[a];return i}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,e){df.set(i,e),fa(e,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,e,a){var s=i.type||"unknown-event";i.currentTarget=a,Ub(s,e,void 0,i),i.currentTarget=null}function se(i,e){e=(e&4)!==0;for(var a=0;a<i.length;a++){var s=i[a],o=s.event;s=s.listeners;e:{var c=void 0;if(e)for(var d=s.length-1;0<=d;d--){var h=s[d],g=h.instance,_=h.currentTarget;if(h=h.listener,g!==c&&o.isPropagationStopped())break e;nf(o,h,_),c=g}else for(d=0;d<s.length;d++){if(h=s[d],g=h.instance,_=h.currentTarget,h=h.listener,g!==c&&o.isPropagationStopped())break e;nf(o,h,_),c=g}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D(i,e){var a=e[of];a===void 0&&(a=e[of]=new Set);var s=i+"__bubble";a.has(s)||(pf(e,i,2,!1),a.add(s))}function qf(i,e,a){var s=0;e&&(s|=4),pf(a,i,s,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(a){a!=="selectionchange"&&(mf.has(a)||qf(a,!1,i),qf(a,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(i,e,a,s){switch(jd(e)){case 1:var o=ed;break;case 4:o=gd;break;default:o=fd}a=o.bind(null,e,a,i),o=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),s?o!==void 0?i.addEventListener(e,a,{capture:!0,passive:o}):i.addEventListener(e,a,!0):o!==void 0?i.addEventListener(e,a,{passive:o}):i.addEventListener(e,a,!1)}function hd(i,e,a,s,o){var c=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var d=s.tag;if(d===3||d===4){var h=s.stateNode.containerInfo;if(h===o||h.nodeType===8&&h.parentNode===o)break;if(d===4)for(d=s.return;d!==null;){var g=d.tag;if((g===3||g===4)&&(g=d.stateNode.containerInfo,g===o||g.nodeType===8&&g.parentNode===o))return;d=d.return}for(;h!==null;){if(d=Wc(h),d===null)return;if(g=d.tag,g===5||g===6){s=c=d;continue e}h=h.parentNode}}s=s.return}Jb(function(){var _=c,b=xb(a),j=[];e:{var $=df.get(i);if($!==void 0){var _e=td,et=i;switch(i){case"keypress":if(od(a)===0)break e;case"keydown":case"keyup":_e=Rd;break;case"focusin":et="focus",_e=Fd;break;case"focusout":et="blur",_e=Fd;break;case"beforeblur":case"afterblur":_e=Fd;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=Vd;break;case $e:case af:case bf:_e=Hd;break;case cf:_e=Xd;break;case"scroll":_e=vd;break;case"wheel":_e=Zd;break;case"copy":case"cut":case"paste":_e=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Td}var tt=(e&4)!==0,it=!tt&&i==="scroll",nt=tt?$!==null?$+"Capture":null:$;tt=[];for(var rt=_,at;rt!==null;){at=rt;var st=at.stateNode;if(at.tag===5&&st!==null&&(at=st,nt!==null&&(st=Kb(rt,nt),st!=null&&tt.push(tf(rt,st,at)))),it)break;rt=rt.return}0<tt.length&&($=new _e($,et,null,a,b),j.push({event:$,listeners:tt}))}}if(!(e&7)){e:{if($=i==="mouseover"||i==="pointerover",_e=i==="mouseout"||i==="pointerout",$&&a!==wb&&(et=a.relatedTarget||a.fromElement)&&(Wc(et)||et[uf]))break e;if((_e||$)&&($=b.window===b?b:($=b.ownerDocument)?$.defaultView||$.parentWindow:window,_e?(et=a.relatedTarget||a.toElement,_e=_,et=et?Wc(et):null,et!==null&&(it=Vb(et),et!==it||et.tag!==5&&et.tag!==6)&&(et=null)):(_e=null,et=_),_e!==et)){if(tt=Bd,st="onMouseLeave",nt="onMouseEnter",rt="mouse",(i==="pointerout"||i==="pointerover")&&(tt=Td,st="onPointerLeave",nt="onPointerEnter",rt="pointer"),it=_e==null?$:ue(_e),at=et==null?$:ue(et),$=new tt(st,rt+"leave",_e,a,b),$.target=it,$.relatedTarget=at,st=null,Wc(b)===_&&(tt=new tt(nt,rt+"enter",et,a,b),tt.target=at,tt.relatedTarget=it,st=tt),it=st,_e&&et)t:{for(tt=_e,nt=et,rt=0,at=tt;at;at=vf(at))rt++;for(at=0,st=nt;st;st=vf(st))at++;for(;0<rt-at;)tt=vf(tt),rt--;for(;0<at-rt;)nt=vf(nt),at--;for(;rt--;){if(tt===nt||nt!==null&&tt===nt.alternate)break t;tt=vf(tt),nt=vf(nt)}tt=null}else tt=null;_e!==null&&wf(j,$,_e,tt,!1),et!==null&&it!==null&&wf(j,it,et,tt,!0)}}e:{if($=_?ue(_):window,_e=$.nodeName&&$.nodeName.toLowerCase(),_e==="select"||_e==="input"&&$.type==="file")var ot=ve;else if(me($))if(we)ot=Fe;else{ot=De;var dt=Ce}else(_e=$.nodeName)&&_e.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(ot=Ee);if(ot&&(ot=ot(i,_))){ne(j,ot,a,b);break e}dt&&dt(i,$,_),i==="focusout"&&(dt=$._wrapperState)&&dt.controlled&&$.type==="number"&&cb($,"number",$.value)}switch(dt=_?ue(_):window,i){case"focusin":(me(dt)||dt.contentEditable==="true")&&(Qe=dt,Re=_,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(j,a,b);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(j,a,b)}var ut;if(ae)e:{switch(i){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else ie?ge(i,a)&&(ct="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(ct="onCompositionStart");ct&&(de&&a.locale!=="ko"&&(ie||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&ie&&(ut=nd()):(kd=b,ld="value"in kd?kd.value:kd.textContent,ie=!0)),dt=oe(_,ct),0<dt.length&&(ct=new Ld(ct,i,null,a,b),j.push({event:ct,listeners:dt}),ut?ct.data=ut:(ut=he(a),ut!==null&&(ct.data=ut)))),(ut=ce?je(i,a):ke(i,a))&&(_=oe(_,"onBeforeInput"),0<_.length&&(b=new Ld("onBeforeInput","beforeinput",null,a,b),j.push({event:b,listeners:_}),b.data=ut))}se(j,e)})}function tf(i,e,a){return{instance:i,listener:e,currentTarget:a}}function oe(i,e){for(var a=e+"Capture",s=[];i!==null;){var o=i,c=o.stateNode;o.tag===5&&c!==null&&(o=c,c=Kb(i,a),c!=null&&s.unshift(tf(i,c,o)),c=Kb(i,e),c!=null&&s.push(tf(i,c,o))),i=i.return}return s}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,e,a,s,o){for(var c=e._reactName,d=[];a!==null&&a!==s;){var h=a,g=h.alternate,_=h.stateNode;if(g!==null&&g===s)break;h.tag===5&&_!==null&&(h=_,o?(g=Kb(a,c),g!=null&&d.unshift(tf(a,g,h))):o||(g=Kb(a,c),g!=null&&d.push(tf(a,g,h)))),a=a.return}d.length!==0&&i.push({event:e,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,e,a){if(e=zf(e),zf(i)!==e&&a)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,e){var a=e,s=0;do{var o=a.nextSibling;if(i.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(s===0){i.removeChild(o),bd(e);return}s--}else a!=="$"&&a!=="$?"&&a!=="$!"||s++;a=o}while(a);bd(e)}function Lf(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(e===0)return i;e--}else a==="/$"&&e++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var e=i[Of];if(e)return e;for(var a=i.parentNode;a;){if(e=a[uf]||a[Of]){if(a=e.alternate,e.child!==null||a!==null&&a.child!==null)for(i=Mf(i);i!==null;){if(a=i[Of])return a;i=Mf(i)}return e}i=a,a=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(i,e){Tf++,Sf[Tf]=i.current,i.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,e){var a=i.type.contextTypes;if(!a)return Vf;var s=i.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var o={},c;for(c in a)o[c]=e[c];return s&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=o),o}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E(Wf),E(H)}function ag(i,e,a){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,a)}function bg(i,e,a){var s=i.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return a;s=s.getChildContext();for(var o in s)if(!(o in e))throw Error(p(108,Ra(i)||"Unknown",o));return A$1({},a,s)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,i),G(Wf,Wf.current),!0}function dg(i,e,a){var s=i.stateNode;if(!s)throw Error(p(169));a?(i=bg(i,e,Xf),s.__reactInternalMemoizedMergedChildContext=i,E(Wf),E(H),G(H,i)):E(Wf),G(Wf,a)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,e=C;try{var a=eg;for(C=1;i<a.length;i++){var s=a[i];do s=s(!0);while(s!==null)}eg=null,fg=!1}catch(o){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),o}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,e){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=e}function ug(i,e,a){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var s=rg;i=sg;var o=32-oc(s)-1;s&=~(1<<o),a+=1;var c=32-oc(e)+o;if(30<c){var d=o-o%5;c=(s&(1<<d)-1).toString(32),s>>=d,o-=d,rg=1<<32-oc(e)+o|a<<o|s,sg=c+i}else rg=1<<c|a<<o|s,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(i,e){var a=Bg(5,null,null,0);a.elementType="DELETED",a.stateNode=e,a.return=i,e=i.deletions,e===null?(i.deletions=[a],i.flags|=16):e.push(a)}function Cg(i,e){switch(i.tag){case 5:var a=i.type;return e=e.nodeType!==1||a.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,xg=i,yg=Lf(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,xg=i,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(a=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:e,treeContext:a,retryLane:1073741824},a=Bg(18,null,null,0),a.stateNode=e,a.return=i,i.child=a,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I$1){var e=yg;if(e){var a=e;if(!Cg(i,e)){if(Dg(i))throw Error(p(418));e=Lf(a.nextSibling);var s=xg;e&&Cg(i,e)?Ag(s,a):(i.flags=i.flags&-4097|2,I$1=!1,xg=i)}}else{if(Dg(i))throw Error(p(418));i.flags=i.flags&-4097|2,I$1=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I$1)return Fg(i),I$1=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Ef(i.type,i.memoizedProps)),e&&(e=yg)){if(Dg(i))throw Hg(),Error(p(418));for(;e;)Ag(i,e),e=Lf(e.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"){if(e===0){yg=Lf(i.nextSibling);break e}e--}else a!=="$"&&a!=="$!"&&a!=="$?"||e++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(i,e,a){if(i=a.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(p(309));var s=a.stateNode}if(!s)throw Error(p(147,i));var o=s,c=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(d){var h=o.refs;d===null?delete h[c]:h[c]=d},e._stringRef=c,e)}if(typeof i!="string")throw Error(p(284));if(!a._owner)throw Error(p(290,i))}return i}function Mg(i,e){throw i=Object.prototype.toString.call(e),Error(p(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function Ng(i){var e=i._init;return e(i._payload)}function Og(i){function e(nt,rt){if(i){var at=nt.deletions;at===null?(nt.deletions=[rt],nt.flags|=16):at.push(rt)}}function a(nt,rt){if(!i)return null;for(;rt!==null;)e(nt,rt),rt=rt.sibling;return null}function s(nt,rt){for(nt=new Map;rt!==null;)rt.key!==null?nt.set(rt.key,rt):nt.set(rt.index,rt),rt=rt.sibling;return nt}function o(nt,rt){return nt=Pg(nt,rt),nt.index=0,nt.sibling=null,nt}function c(nt,rt,at){return nt.index=at,i?(at=nt.alternate,at!==null?(at=at.index,at<rt?(nt.flags|=2,rt):at):(nt.flags|=2,rt)):(nt.flags|=1048576,rt)}function d(nt){return i&&nt.alternate===null&&(nt.flags|=2),nt}function h(nt,rt,at,st){return rt===null||rt.tag!==6?(rt=Qg(at,nt.mode,st),rt.return=nt,rt):(rt=o(rt,at),rt.return=nt,rt)}function g(nt,rt,at,st){var ot=at.type;return ot===ya?b(nt,rt,at.props.children,st,at.key):rt!==null&&(rt.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Ha&&Ng(ot)===rt.type)?(st=o(rt,at.props),st.ref=Lg(nt,rt,at),st.return=nt,st):(st=Rg(at.type,at.key,at.props,null,nt.mode,st),st.ref=Lg(nt,rt,at),st.return=nt,st)}function _(nt,rt,at,st){return rt===null||rt.tag!==4||rt.stateNode.containerInfo!==at.containerInfo||rt.stateNode.implementation!==at.implementation?(rt=Sg(at,nt.mode,st),rt.return=nt,rt):(rt=o(rt,at.children||[]),rt.return=nt,rt)}function b(nt,rt,at,st,ot){return rt===null||rt.tag!==7?(rt=Tg(at,nt.mode,st,ot),rt.return=nt,rt):(rt=o(rt,at),rt.return=nt,rt)}function j(nt,rt,at){if(typeof rt=="string"&&rt!==""||typeof rt=="number")return rt=Qg(""+rt,nt.mode,at),rt.return=nt,rt;if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case va:return at=Rg(rt.type,rt.key,rt.props,null,nt.mode,at),at.ref=Lg(nt,null,rt),at.return=nt,at;case wa:return rt=Sg(rt,nt.mode,at),rt.return=nt,rt;case Ha:var st=rt._init;return j(nt,st(rt._payload),at)}if(eb(rt)||Ka(rt))return rt=Tg(rt,nt.mode,at,null),rt.return=nt,rt;Mg(nt,rt)}return null}function $(nt,rt,at,st){var ot=rt!==null?rt.key:null;if(typeof at=="string"&&at!==""||typeof at=="number")return ot!==null?null:h(nt,rt,""+at,st);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case va:return at.key===ot?g(nt,rt,at,st):null;case wa:return at.key===ot?_(nt,rt,at,st):null;case Ha:return ot=at._init,$(nt,rt,ot(at._payload),st)}if(eb(at)||Ka(at))return ot!==null?null:b(nt,rt,at,st,null);Mg(nt,at)}return null}function _e(nt,rt,at,st,ot){if(typeof st=="string"&&st!==""||typeof st=="number")return nt=nt.get(at)||null,h(rt,nt,""+st,ot);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case va:return nt=nt.get(st.key===null?at:st.key)||null,g(rt,nt,st,ot);case wa:return nt=nt.get(st.key===null?at:st.key)||null,_(rt,nt,st,ot);case Ha:var dt=st._init;return _e(nt,rt,at,dt(st._payload),ot)}if(eb(st)||Ka(st))return nt=nt.get(at)||null,b(rt,nt,st,ot,null);Mg(rt,st)}return null}function et(nt,rt,at,st){for(var ot=null,dt=null,ut=rt,ct=rt=0,ht=null;ut!==null&&ct<at.length;ct++){ut.index>ct?(ht=ut,ut=null):ht=ut.sibling;var mt=$(nt,ut,at[ct],st);if(mt===null){ut===null&&(ut=ht);break}i&&ut&&mt.alternate===null&&e(nt,ut),rt=c(mt,rt,ct),dt===null?ot=mt:dt.sibling=mt,dt=mt,ut=ht}if(ct===at.length)return a(nt,ut),I$1&&tg(nt,ct),ot;if(ut===null){for(;ct<at.length;ct++)ut=j(nt,at[ct],st),ut!==null&&(rt=c(ut,rt,ct),dt===null?ot=ut:dt.sibling=ut,dt=ut);return I$1&&tg(nt,ct),ot}for(ut=s(nt,ut);ct<at.length;ct++)ht=_e(ut,nt,ct,at[ct],st),ht!==null&&(i&&ht.alternate!==null&&ut.delete(ht.key===null?ct:ht.key),rt=c(ht,rt,ct),dt===null?ot=ht:dt.sibling=ht,dt=ht);return i&&ut.forEach(function(pt){return e(nt,pt)}),I$1&&tg(nt,ct),ot}function tt(nt,rt,at,st){var ot=Ka(at);if(typeof ot!="function")throw Error(p(150));if(at=ot.call(at),at==null)throw Error(p(151));for(var dt=ot=null,ut=rt,ct=rt=0,ht=null,mt=at.next();ut!==null&&!mt.done;ct++,mt=at.next()){ut.index>ct?(ht=ut,ut=null):ht=ut.sibling;var pt=$(nt,ut,mt.value,st);if(pt===null){ut===null&&(ut=ht);break}i&&ut&&pt.alternate===null&&e(nt,ut),rt=c(pt,rt,ct),dt===null?ot=pt:dt.sibling=pt,dt=pt,ut=ht}if(mt.done)return a(nt,ut),I$1&&tg(nt,ct),ot;if(ut===null){for(;!mt.done;ct++,mt=at.next())mt=j(nt,mt.value,st),mt!==null&&(rt=c(mt,rt,ct),dt===null?ot=mt:dt.sibling=mt,dt=mt);return I$1&&tg(nt,ct),ot}for(ut=s(nt,ut);!mt.done;ct++,mt=at.next())mt=_e(ut,nt,ct,mt.value,st),mt!==null&&(i&&mt.alternate!==null&&ut.delete(mt.key===null?ct:mt.key),rt=c(mt,rt,ct),dt===null?ot=mt:dt.sibling=mt,dt=mt);return i&&ut.forEach(function(ft){return e(nt,ft)}),I$1&&tg(nt,ct),ot}function it(nt,rt,at,st){if(typeof at=="object"&&at!==null&&at.type===ya&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case va:e:{for(var ot=at.key,dt=rt;dt!==null;){if(dt.key===ot){if(ot=at.type,ot===ya){if(dt.tag===7){a(nt,dt.sibling),rt=o(dt,at.props.children),rt.return=nt,nt=rt;break e}}else if(dt.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Ha&&Ng(ot)===dt.type){a(nt,dt.sibling),rt=o(dt,at.props),rt.ref=Lg(nt,dt,at),rt.return=nt,nt=rt;break e}a(nt,dt);break}else e(nt,dt);dt=dt.sibling}at.type===ya?(rt=Tg(at.props.children,nt.mode,st,at.key),rt.return=nt,nt=rt):(st=Rg(at.type,at.key,at.props,null,nt.mode,st),st.ref=Lg(nt,rt,at),st.return=nt,nt=st)}return d(nt);case wa:e:{for(dt=at.key;rt!==null;){if(rt.key===dt)if(rt.tag===4&&rt.stateNode.containerInfo===at.containerInfo&&rt.stateNode.implementation===at.implementation){a(nt,rt.sibling),rt=o(rt,at.children||[]),rt.return=nt,nt=rt;break e}else{a(nt,rt);break}else e(nt,rt);rt=rt.sibling}rt=Sg(at,nt.mode,st),rt.return=nt,nt=rt}return d(nt);case Ha:return dt=at._init,it(nt,rt,dt(at._payload),st)}if(eb(at))return et(nt,rt,at,st);if(Ka(at))return tt(nt,rt,at,st);Mg(nt,at)}return typeof at=="string"&&at!==""||typeof at=="number"?(at=""+at,rt!==null&&rt.tag===6?(a(nt,rt.sibling),rt=o(rt,at),rt.return=nt,nt=rt):(a(nt,rt),rt=Qg(at,nt.mode,st),rt.return=nt,nt=rt),d(nt)):a(nt,rt)}return it}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(i){var e=Wg.current;E(Wg),i._currentValue=e}function bh(i,e,a){for(;i!==null;){var s=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),i===a)break;i=i.return}}function ch(i,e){Xg=i,Zg=Yg=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(dh=!0),i.firstContext=null)}function eh(i){var e=i._currentValue;if(Zg!==i)if(i={context:i,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=i,Xg.dependencies={lanes:0,firstContext:i}}else Yg=Yg.next=i;return e}var fh=null;function gh(i){fh===null?fh=[i]:fh.push(i)}function hh(i,e,a,s){var o=e.interleaved;return o===null?(a.next=a,gh(e)):(a.next=o.next,o.next=a),e.interleaved=a,ih(i,s)}function ih(i,e){i.lanes|=e;var a=i.alternate;for(a!==null&&(a.lanes|=e),a=i,i=i.return;i!==null;)i.childLanes|=e,a=i.alternate,a!==null&&(a.childLanes|=e),a=i,i=i.return;return a.tag===3?a.stateNode:null}var jh=!1;function kh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function mh(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(i,e,a){var s=i.updateQueue;if(s===null)return null;if(s=s.shared,K&2){var o=s.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),s.pending=e,ih(i,a)}return o=s.interleaved,o===null?(e.next=e,gh(s)):(e.next=o.next,o.next=e),s.interleaved=e,ih(i,a)}function oh(i,e,a){if(e=e.updateQueue,e!==null&&(e=e.shared,(a&4194240)!==0)){var s=e.lanes;s&=i.pendingLanes,a|=s,e.lanes=a,Cc(i,a)}}function ph(i,e){var a=i.updateQueue,s=i.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var o=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var d={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};c===null?o=c=d:c=c.next=d,a=a.next}while(a!==null);c===null?o=c=e:c=c.next=e}else o=c=e;a={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:s.shared,effects:s.effects},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=e:i.next=e,a.lastBaseUpdate=e}function qh(i,e,a,s){var o=i.updateQueue;jh=!1;var c=o.firstBaseUpdate,d=o.lastBaseUpdate,h=o.shared.pending;if(h!==null){o.shared.pending=null;var g=h,_=g.next;g.next=null,d===null?c=_:d.next=_,d=g;var b=i.alternate;b!==null&&(b=b.updateQueue,h=b.lastBaseUpdate,h!==d&&(h===null?b.firstBaseUpdate=_:h.next=_,b.lastBaseUpdate=g))}if(c!==null){var j=o.baseState;d=0,b=_=g=null,h=c;do{var $=h.lane,_e=h.eventTime;if((s&$)===$){b!==null&&(b=b.next={eventTime:_e,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var et=i,tt=h;switch($=e,_e=a,tt.tag){case 1:if(et=tt.payload,typeof et=="function"){j=et.call(_e,j,$);break e}j=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=tt.payload,$=typeof et=="function"?et.call(_e,j,$):et,$==null)break e;j=A$1({},j,$);break e;case 2:jh=!0}}h.callback!==null&&h.lane!==0&&(i.flags|=64,$=o.effects,$===null?o.effects=[h]:$.push(h))}else _e={eventTime:_e,lane:$,tag:h.tag,payload:h.payload,callback:h.callback,next:null},b===null?(_=b=_e,g=j):b=b.next=_e,d|=$;if(h=h.next,h===null){if(h=o.shared.pending,h===null)break;$=h,h=$.next,$.next=null,o.lastBaseUpdate=$,o.shared.pending=null}}while(!0);if(b===null&&(g=j),o.baseState=g,o.firstBaseUpdate=_,o.lastBaseUpdate=b,e=o.shared.interleaved,e!==null){o=e;do d|=o.lane,o=o.next;while(o!==e)}else c===null&&(o.shared.lanes=0);rh|=d,i.lanes=d,i.memoizedState=j}}function sh(i,e,a){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var s=i[e],o=s.callback;if(o!==null){if(s.callback=null,s=a,typeof o!="function")throw Error(p(191,o));o.call(s)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(i){if(i===th)throw Error(p(174));return i}function yh(i,e){switch(G(wh,e),G(vh,i),G(uh,th),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=lb(e,i)}E(uh),G(uh,e)}function zh(){E(uh),E(vh),E(wh)}function Ah(i){xh(wh.current);var e=xh(uh.current),a=lb(e,i.type);e!==a&&(G(vh,i),G(uh,a))}function Bh(i){vh.current===i&&(E(uh),E(vh))}var L=Uf(0);function Ch(i){for(var e=i;e!==null;){if(e.tag===13){var a=e.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var i=0;i<Dh.length;i++)Dh[i]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua$1.ReactCurrentDispatcher,Gh=ua$1.ReactCurrentBatchConfig,Hh=0,M$1=null,N=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(i,e){if(e===null)return!1;for(var a=0;a<e.length&&a<i.length;a++)if(!He(i[a],e[a]))return!1;return!0}function Nh(i,e,a,s,o,c){if(Hh=c,M$1=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=i===null||i.memoizedState===null?Oh:Ph,i=a(s,o),Jh){c=0;do{if(Jh=!1,Kh=0,25<=c)throw Error(p(301));c+=1,O$1=N=null,e.updateQueue=null,Fh.current=Qh,i=a(s,o)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O$1=N=M$1=null,Ih=!1,e)throw Error(p(300));return i}function Sh(){var i=Kh!==0;return Kh=0,i}function Th(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=i:O$1=O$1.next=i,O$1}function Uh(){if(N===null){var i=M$1.alternate;i=i!==null?i.memoizedState:null}else i=N.next;var e=O$1===null?M$1.memoizedState:O$1.next;if(e!==null)O$1=e,N=i;else{if(i===null)throw Error(p(310));N=i,i={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O$1===null?M$1.memoizedState=O$1=i:O$1=O$1.next=i}return O$1}function Vh(i,e){return typeof e=="function"?e(i):e}function Wh(i){var e=Uh(),a=e.queue;if(a===null)throw Error(p(311));a.lastRenderedReducer=i;var s=N,o=s.baseQueue,c=a.pending;if(c!==null){if(o!==null){var d=o.next;o.next=c.next,c.next=d}s.baseQueue=o=c,a.pending=null}if(o!==null){c=o.next,s=s.baseState;var h=d=null,g=null,_=c;do{var b=_.lane;if((Hh&b)===b)g!==null&&(g=g.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),s=_.hasEagerState?_.eagerState:i(s,_.action);else{var j={lane:b,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};g===null?(h=g=j,d=s):g=g.next=j,M$1.lanes|=b,rh|=b}_=_.next}while(_!==null&&_!==c);g===null?d=s:g.next=h,He(s,e.memoizedState)||(dh=!0),e.memoizedState=s,e.baseState=d,e.baseQueue=g,a.lastRenderedState=s}if(i=a.interleaved,i!==null){o=i;do c=o.lane,M$1.lanes|=c,rh|=c,o=o.next;while(o!==i)}else o===null&&(a.lanes=0);return[e.memoizedState,a.dispatch]}function Xh(i){var e=Uh(),a=e.queue;if(a===null)throw Error(p(311));a.lastRenderedReducer=i;var s=a.dispatch,o=a.pending,c=e.memoizedState;if(o!==null){a.pending=null;var d=o=o.next;do c=i(c,d.action),d=d.next;while(d!==o);He(c,e.memoizedState)||(dh=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),a.lastRenderedState=c}return[c,s]}function Yh(){}function Zh(i,e){var a=M$1,s=Uh(),o=e(),c=!He(s.memoizedState,o);if(c&&(s.memoizedState=o,dh=!0),s=s.queue,$h(ai.bind(null,a,s,i),[i]),s.getSnapshot!==e||c||O$1!==null&&O$1.memoizedState.tag&1){if(a.flags|=2048,bi(9,ci.bind(null,a,s,o,e),void 0,null),Q===null)throw Error(p(349));Hh&30||di(a,e,o)}return o}function di(i,e,a){i.flags|=16384,i={getSnapshot:e,value:a},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.stores=[i]):(a=e.stores,a===null?e.stores=[i]:a.push(i))}function ci(i,e,a,s){e.value=a,e.getSnapshot=s,ei(e)&&fi(i)}function ai(i,e,a){return a(function(){ei(e)&&fi(i)})}function ei(i){var e=i.getSnapshot;i=i.value;try{var a=e();return!He(i,a)}catch{return!0}}function fi(i){var e=ih(i,1);e!==null&&gi(e,i,1,-1)}function hi(i){var e=Th();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:i},e.queue=i,i=i.dispatch=ii.bind(null,M$1,i),[e.memoizedState,i]}function bi(i,e,a,s){return i={tag:i,create:e,destroy:a,deps:s,next:null},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.lastEffect=i.next=i):(a=e.lastEffect,a===null?e.lastEffect=i.next=i:(s=a.next,a.next=i,i.next=s,e.lastEffect=i)),i}function ji(){return Uh().memoizedState}function ki(i,e,a,s){var o=Th();M$1.flags|=i,o.memoizedState=bi(1|e,a,void 0,s===void 0?null:s)}function li(i,e,a,s){var o=Uh();s=s===void 0?null:s;var c=void 0;if(N!==null){var d=N.memoizedState;if(c=d.destroy,s!==null&&Mh(s,d.deps)){o.memoizedState=bi(e,a,c,s);return}}M$1.flags|=i,o.memoizedState=bi(1|e,a,c,s)}function mi(i,e){return ki(8390656,8,i,e)}function $h(i,e){return li(2048,8,i,e)}function ni(i,e){return li(4,2,i,e)}function oi(i,e){return li(4,4,i,e)}function pi(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function qi(i,e,a){return a=a!=null?a.concat([i]):null,li(4,4,pi.bind(null,e,i),a)}function ri(){}function si(i,e){var a=Uh();e=e===void 0?null:e;var s=a.memoizedState;return s!==null&&e!==null&&Mh(e,s[1])?s[0]:(a.memoizedState=[i,e],i)}function ti(i,e){var a=Uh();e=e===void 0?null:e;var s=a.memoizedState;return s!==null&&e!==null&&Mh(e,s[1])?s[0]:(i=i(),a.memoizedState=[i,e],i)}function ui(i,e,a){return Hh&21?(He(a,e)||(a=yc(),M$1.lanes|=a,rh|=a,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,dh=!0),i.memoizedState=a)}function vi(i,e){var a=C;C=a!==0&&4>a?a:4,i(!0);var s=Gh.transition;Gh.transition={};try{i(!1),e()}finally{C=a,Gh.transition=s}}function wi(){return Uh().memoizedState}function xi(i,e,a){var s=yi(i);if(a={lane:s,action:a,hasEagerState:!1,eagerState:null,next:null},zi(i))Ai(e,a);else if(a=hh(i,e,a,s),a!==null){var o=R();gi(a,i,s,o),Bi(a,e,s)}}function ii(i,e,a){var s=yi(i),o={lane:s,action:a,hasEagerState:!1,eagerState:null,next:null};if(zi(i))Ai(e,o);else{var c=i.alternate;if(i.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var d=e.lastRenderedState,h=c(d,a);if(o.hasEagerState=!0,o.eagerState=h,He(h,d)){var g=e.interleaved;g===null?(o.next=o,gh(e)):(o.next=g.next,g.next=o),e.interleaved=o;return}}catch{}finally{}a=hh(i,e,o,s),a!==null&&(o=R(),gi(a,i,s,o),Bi(a,e,s))}}function zi(i){var e=i.alternate;return i===M$1||e!==null&&e===M$1}function Ai(i,e){Jh=Ih=!0;var a=i.pending;a===null?e.next=e:(e.next=a.next,a.next=e),i.pending=e}function Bi(i,e,a){if(a&4194240){var s=e.lanes;s&=i.pendingLanes,a|=s,e.lanes=a,Cc(i,a)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(i,e){return Th().memoizedState=[i,e===void 0?null:e],i},useContext:eh,useEffect:mi,useImperativeHandle:function(i,e,a){return a=a!=null?a.concat([i]):null,ki(4194308,4,pi.bind(null,e,i),a)},useLayoutEffect:function(i,e){return ki(4194308,4,i,e)},useInsertionEffect:function(i,e){return ki(4,2,i,e)},useMemo:function(i,e){var a=Th();return e=e===void 0?null:e,i=i(),a.memoizedState=[i,e],i},useReducer:function(i,e,a){var s=Th();return e=a!==void 0?a(e):e,s.memoizedState=s.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},s.queue=i,i=i.dispatch=xi.bind(null,M$1,i),[s.memoizedState,i]},useRef:function(i){var e=Th();return i={current:i},e.memoizedState=i},useState:hi,useDebugValue:ri,useDeferredValue:function(i){return Th().memoizedState=i},useTransition:function(){var i=hi(!1),e=i[0];return i=vi.bind(null,i[1]),Th().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,a){var s=M$1,o=Th();if(I$1){if(a===void 0)throw Error(p(407));a=a()}else{if(a=e(),Q===null)throw Error(p(349));Hh&30||di(s,e,a)}o.memoizedState=a;var c={value:a,getSnapshot:e};return o.queue=c,mi(ai.bind(null,s,c,i),[i]),s.flags|=2048,bi(9,ci.bind(null,s,c,a,e),void 0,null),a},useId:function(){var i=Th(),e=Q.identifierPrefix;if(I$1){var a=sg,s=rg;a=(s&~(1<<32-oc(s)-1)).toString(32)+a,e=":"+e+"R"+a,a=Kh++,0<a&&(e+="H"+a.toString(32)),e+=":"}else a=Lh++,e=":"+e+"r"+a.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(i){var e=Uh();return ui(e,N.memoizedState,i)},useTransition:function(){var i=Wh(Vh)[0],e=Uh().memoizedState;return[i,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(i){var e=Uh();return N===null?e.memoizedState=i:ui(e,N.memoizedState,i)},useTransition:function(){var i=Xh(Vh)[0],e=Uh().memoizedState;return[i,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(i,e){if(i&&i.defaultProps){e=A$1({},e),i=i.defaultProps;for(var a in i)e[a]===void 0&&(e[a]=i[a]);return e}return e}function Di(i,e,a,s){e=i.memoizedState,a=a(s,e),a=a==null?e:A$1({},e,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Ei={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,e,a){i=i._reactInternals;var s=R(),o=yi(i),c=mh(s,o);c.payload=e,a!=null&&(c.callback=a),e=nh(i,c,o),e!==null&&(gi(e,i,o,s),oh(e,i,o))},enqueueReplaceState:function(i,e,a){i=i._reactInternals;var s=R(),o=yi(i),c=mh(s,o);c.tag=1,c.payload=e,a!=null&&(c.callback=a),e=nh(i,c,o),e!==null&&(gi(e,i,o,s),oh(e,i,o))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var a=R(),s=yi(i),o=mh(a,s);o.tag=2,e!=null&&(o.callback=e),e=nh(i,o,s),e!==null&&(gi(e,i,s,a),oh(e,i,s))}};function Fi(i,e,a,s,o,c,d){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(s,c,d):e.prototype&&e.prototype.isPureReactComponent?!Ie(a,s)||!Ie(o,c):!0}function Gi(i,e,a){var s=!1,o=Vf,c=e.contextType;return typeof c=="object"&&c!==null?c=eh(c):(o=Zf(e)?Xf:H.current,s=e.contextTypes,c=(s=s!=null)?Yf(i,o):Vf),e=new e(a,c),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,i.stateNode=e,e._reactInternals=i,s&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=c),e}function Hi(i,e,a,s){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(a,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(a,s),e.state!==i&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(i,e,a,s){var o=i.stateNode;o.props=a,o.state=i.memoizedState,o.refs={},kh(i);var c=e.contextType;typeof c=="object"&&c!==null?o.context=eh(c):(c=Zf(e)?Xf:H.current,o.context=Yf(i,c)),o.state=i.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(Di(i,e,c,a),o.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Ei.enqueueReplaceState(o,o.state,null),qh(i,a,o,s),o.state=i.memoizedState),typeof o.componentDidMount=="function"&&(i.flags|=4194308)}function Ji(i,e){try{var a="",s=e;do a+=Pa(s),s=s.return;while(s);var o=a}catch(c){o=`
Error generating stack: `+c.message+`
`+c.stack}return{value:i,source:e,stack:o,digest:null}}function Ki(i,e,a){return{value:i,source:null,stack:a??null,digest:e??null}}function Li(i,e){try{console.error(e.value)}catch(a){setTimeout(function(){throw a})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(i,e,a){a=mh(-1,a),a.tag=3,a.payload={element:null};var s=e.value;return a.callback=function(){Oi||(Oi=!0,Pi=s),Li(i,e)},a}function Qi(i,e,a){a=mh(-1,a),a.tag=3;var s=i.type.getDerivedStateFromError;if(typeof s=="function"){var o=e.value;a.payload=function(){return s(o)},a.callback=function(){Li(i,e)}}var c=i.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(a.callback=function(){Li(i,e),typeof s!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),a}function Si(i,e,a){var s=i.pingCache;if(s===null){s=i.pingCache=new Mi;var o=new Set;s.set(e,o)}else o=s.get(e),o===void 0&&(o=new Set,s.set(e,o));o.has(a)||(o.add(a),i=Ti.bind(null,i,e,a),e.then(i,i))}function Ui(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function Vi(i,e,a,s,o){return i.mode&1?(i.flags|=65536,i.lanes=o,i):(i===e?i.flags|=65536:(i.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(e=mh(-1,1),e.tag=2,nh(a,e,1))),a.lanes|=1),i)}var Wi=ua$1.ReactCurrentOwner,dh=!1;function Xi(i,e,a,s){e.child=i===null?Vg(e,null,a,s):Ug(e,i.child,a,s)}function Yi(i,e,a,s,o){a=a.render;var c=e.ref;return ch(e,o),s=Nh(i,e,a,s,c,o),a=Sh(),i!==null&&!dh?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~o,Zi(i,e,o)):(I$1&&a&&vg(e),e.flags|=1,Xi(i,e,s,o),e.child)}function $i(i,e,a,s,o){if(i===null){var c=a.type;return typeof c=="function"&&!aj(c)&&c.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(e.tag=15,e.type=c,bj(i,e,c,s,o)):(i=Rg(a.type,null,s,e,e.mode,o),i.ref=e.ref,i.return=e,e.child=i)}if(c=i.child,!(i.lanes&o)){var d=c.memoizedProps;if(a=a.compare,a=a!==null?a:Ie,a(d,s)&&i.ref===e.ref)return Zi(i,e,o)}return e.flags|=1,i=Pg(c,s),i.ref=e.ref,i.return=e,e.child=i}function bj(i,e,a,s,o){if(i!==null){var c=i.memoizedProps;if(Ie(c,s)&&i.ref===e.ref)if(dh=!1,e.pendingProps=s=c,(i.lanes&o)!==0)i.flags&131072&&(dh=!0);else return e.lanes=i.lanes,Zi(i,e,o)}return cj(i,e,a,s,o)}function dj(i,e,a){var s=e.pendingProps,o=s.children,c=i!==null?i.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=a;else{if(!(a&1073741824))return i=c!==null?c.baseLanes|a:a,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=c!==null?c.baseLanes:a,G(ej,fj),fj|=s}else c!==null?(s=c.baseLanes|a,e.memoizedState=null):s=a,G(ej,fj),fj|=s;return Xi(i,e,o,a),e.child}function gj(i,e){var a=e.ref;(i===null&&a!==null||i!==null&&i.ref!==a)&&(e.flags|=512,e.flags|=2097152)}function cj(i,e,a,s,o){var c=Zf(a)?Xf:H.current;return c=Yf(e,c),ch(e,o),a=Nh(i,e,a,s,c,o),s=Sh(),i!==null&&!dh?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~o,Zi(i,e,o)):(I$1&&s&&vg(e),e.flags|=1,Xi(i,e,a,o),e.child)}function hj(i,e,a,s,o){if(Zf(a)){var c=!0;cg(e)}else c=!1;if(ch(e,o),e.stateNode===null)ij(i,e),Gi(e,a,s),Ii(e,a,s,o),s=!0;else if(i===null){var d=e.stateNode,h=e.memoizedProps;d.props=h;var g=d.context,_=a.contextType;typeof _=="object"&&_!==null?_=eh(_):(_=Zf(a)?Xf:H.current,_=Yf(e,_));var b=a.getDerivedStateFromProps,j=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function";j||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==s||g!==_)&&Hi(e,d,s,_),jh=!1;var $=e.memoizedState;d.state=$,qh(e,s,d,o),g=e.memoizedState,h!==s||$!==g||Wf.current||jh?(typeof b=="function"&&(Di(e,a,b,s),g=e.memoizedState),(h=jh||Fi(e,a,h,s,$,g,_))?(j||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=g),d.props=s,d.state=g,d.context=_,s=h):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{d=e.stateNode,lh(i,e),h=e.memoizedProps,_=e.type===e.elementType?h:Ci(e.type,h),d.props=_,j=e.pendingProps,$=d.context,g=a.contextType,typeof g=="object"&&g!==null?g=eh(g):(g=Zf(a)?Xf:H.current,g=Yf(e,g));var _e=a.getDerivedStateFromProps;(b=typeof _e=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==j||$!==g)&&Hi(e,d,s,g),jh=!1,$=e.memoizedState,d.state=$,qh(e,s,d,o);var et=e.memoizedState;h!==j||$!==et||Wf.current||jh?(typeof _e=="function"&&(Di(e,a,_e,s),et=e.memoizedState),(_=jh||Fi(e,a,_,s,$,et,g)||!1)?(b||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,et,g),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,et,g)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||h===i.memoizedProps&&$===i.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===i.memoizedProps&&$===i.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=et),d.props=s,d.state=et,d.context=g,s=_):(typeof d.componentDidUpdate!="function"||h===i.memoizedProps&&$===i.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===i.memoizedProps&&$===i.memoizedState||(e.flags|=1024),s=!1)}return jj(i,e,a,s,c,o)}function jj(i,e,a,s,o,c){gj(i,e);var d=(e.flags&128)!==0;if(!s&&!d)return o&&dg(e,a,!1),Zi(i,e,c);s=e.stateNode,Wi.current=e;var h=d&&typeof a.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,i!==null&&d?(e.child=Ug(e,i.child,null,c),e.child=Ug(e,null,h,c)):Xi(i,e,h,c),e.memoizedState=s.state,o&&dg(e,a,!0),e.child}function kj(i){var e=i.stateNode;e.pendingContext?ag(i,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(i,e.context,!1),yh(i,e.containerInfo)}function lj(i,e,a,s,o){return Ig(),Jg(o),e.flags|=256,Xi(i,e,a,s),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(i){return{baseLanes:i,cachePool:null,transitions:null}}function oj(i,e,a){var s=e.pendingProps,o=L.current,c=!1,d=(e.flags&128)!==0,h;if((h=d)||(h=i!==null&&i.memoizedState===null?!1:(o&2)!==0),h?(c=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(o|=1),G(L,o&1),i===null)return Eg(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=s.children,i=s.fallback,c?(s=e.mode,c=e.child,d={mode:"hidden",children:d},!(s&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=pj(d,s,0,null),i=Tg(i,s,a,null),c.return=e,i.return=e,c.sibling=i,e.child=c,e.child.memoizedState=nj(a),e.memoizedState=mj,i):qj(e,d));if(o=i.memoizedState,o!==null&&(h=o.dehydrated,h!==null))return rj(i,e,d,s,h,o,a);if(c){c=s.fallback,d=e.mode,o=i.child,h=o.sibling;var g={mode:"hidden",children:s.children};return!(d&1)&&e.child!==o?(s=e.child,s.childLanes=0,s.pendingProps=g,e.deletions=null):(s=Pg(o,g),s.subtreeFlags=o.subtreeFlags&14680064),h!==null?c=Pg(h,c):(c=Tg(c,d,a,null),c.flags|=2),c.return=e,s.return=e,s.sibling=c,e.child=s,s=c,c=e.child,d=i.child.memoizedState,d=d===null?nj(a):{baseLanes:d.baseLanes|a,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=i.childLanes&~a,e.memoizedState=mj,s}return c=i.child,i=c.sibling,s=Pg(c,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=a),s.return=e,s.sibling=null,i!==null&&(a=e.deletions,a===null?(e.deletions=[i],e.flags|=16):a.push(i)),e.child=s,e.memoizedState=null,s}function qj(i,e){return e=pj({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function sj(i,e,a,s){return s!==null&&Jg(s),Ug(e,i.child,null,a),i=qj(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function rj(i,e,a,s,o,c,d){if(a)return e.flags&256?(e.flags&=-257,s=Ki(Error(p(422))),sj(i,e,d,s)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(c=s.fallback,o=e.mode,s=pj({mode:"visible",children:s.children},o,0,null),c=Tg(c,o,d,null),c.flags|=2,s.return=e,c.return=e,s.sibling=c,e.child=s,e.mode&1&&Ug(e,i.child,null,d),e.child.memoizedState=nj(d),e.memoizedState=mj,c);if(!(e.mode&1))return sj(i,e,d,null);if(o.data==="$!"){if(s=o.nextSibling&&o.nextSibling.dataset,s)var h=s.dgst;return s=h,c=Error(p(419)),s=Ki(c,s,void 0),sj(i,e,d,s)}if(h=(d&i.childLanes)!==0,dh||h){if(s=Q,s!==null){switch(d&-d){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(s.suspendedLanes|d)?0:o,o!==0&&o!==c.retryLane&&(c.retryLane=o,ih(i,o),gi(s,i,o,-1))}return tj(),s=Ki(Error(p(421))),sj(i,e,d,s)}return o.data==="$?"?(e.flags|=128,e.child=i.child,e=uj.bind(null,i),o._reactRetry=e,null):(i=c.treeContext,yg=Lf(o.nextSibling),xg=e,I$1=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=e),e=qj(e,s.children),e.flags|=4096,e)}function vj(i,e,a){i.lanes|=e;var s=i.alternate;s!==null&&(s.lanes|=e),bh(i.return,e,a)}function wj(i,e,a,s,o){var c=i.memoizedState;c===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:o}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=s,c.tail=a,c.tailMode=o)}function xj(i,e,a){var s=e.pendingProps,o=s.revealOrder,c=s.tail;if(Xi(i,e,s.children,a),s=L.current,s&2)s=s&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vj(i,a,e);else if(i.tag===19)vj(i,a,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}s&=1}if(G(L,s),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(a=e.child,o=null;a!==null;)i=a.alternate,i!==null&&Ch(i)===null&&(o=a),a=a.sibling;a=o,a===null?(o=e.child,e.child=null):(o=a.sibling,a.sibling=null),wj(e,!1,o,a,c);break;case"backwards":for(a=null,o=e.child,e.child=null;o!==null;){if(i=o.alternate,i!==null&&Ch(i)===null){e.child=o;break}i=o.sibling,o.sibling=a,a=o,o=i}wj(e,!0,a,null,c);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Zi(i,e,a){if(i!==null&&(e.dependencies=i.dependencies),rh|=e.lanes,!(a&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(p(153));if(e.child!==null){for(i=e.child,a=Pg(i,i.pendingProps),e.child=a,a.return=e;i.sibling!==null;)i=i.sibling,a=a.sibling=Pg(i,i.pendingProps),a.return=e;a.sibling=null}return e.child}function yj(i,e,a){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,o=e.memoizedProps.value;G(Wg,s._currentValue),s._currentValue=o;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(G(L,L.current&1),e.flags|=128,null):a&e.child.childLanes?oj(i,e,a):(G(L,L.current&1),i=Zi(i,e,a),i!==null?i.sibling:null);G(L,L.current&1);break;case 19:if(s=(a&e.childLanes)!==0,i.flags&128){if(s)return xj(i,e,a);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),G(L,L.current),s)break;return null;case 22:case 23:return e.lanes=0,dj(i,e,a)}return Zi(i,e,a)}var zj,Aj,Bj,Cj;zj=function(i,e){for(var a=e.child;a!==null;){if(a.tag===5||a.tag===6)i.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Aj=function(){};Bj=function(i,e,a,s){var o=i.memoizedProps;if(o!==s){i=e.stateNode,xh(uh.current);var c=null;switch(a){case"input":o=Ya(i,o),s=Ya(i,s),c=[];break;case"select":o=A$1({},o,{value:void 0}),s=A$1({},s,{value:void 0}),c=[];break;case"textarea":o=gb(i,o),s=gb(i,s),c=[];break;default:typeof o.onClick!="function"&&typeof s.onClick=="function"&&(i.onclick=Bf)}ub(a,s);var d;a=null;for(_ in o)if(!s.hasOwnProperty(_)&&o.hasOwnProperty(_)&&o[_]!=null)if(_==="style"){var h=o[_];for(d in h)h.hasOwnProperty(d)&&(a||(a={}),a[d]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(ea.hasOwnProperty(_)?c||(c=[]):(c=c||[]).push(_,null));for(_ in s){var g=s[_];if(h=o!=null?o[_]:void 0,s.hasOwnProperty(_)&&g!==h&&(g!=null||h!=null))if(_==="style")if(h){for(d in h)!h.hasOwnProperty(d)||g&&g.hasOwnProperty(d)||(a||(a={}),a[d]="");for(d in g)g.hasOwnProperty(d)&&h[d]!==g[d]&&(a||(a={}),a[d]=g[d])}else a||(c||(c=[]),c.push(_,a)),a=g;else _==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,h=h?h.__html:void 0,g!=null&&h!==g&&(c=c||[]).push(_,g)):_==="children"?typeof g!="string"&&typeof g!="number"||(c=c||[]).push(_,""+g):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(ea.hasOwnProperty(_)?(g!=null&&_==="onScroll"&&D("scroll",i),c||h===g||(c=[])):(c=c||[]).push(_,g))}a&&(c=c||[]).push("style",a);var _=c;(e.updateQueue=_)&&(e.flags|=4)}};Cj=function(i,e,a,s){a!==s&&(e.flags|=4)};function Dj(i,e){if(!I$1)switch(i.tailMode){case"hidden":e=i.tail;for(var a=null;e!==null;)e.alternate!==null&&(a=e),e=e.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:s.sibling=null}}function S(i){var e=i.alternate!==null&&i.alternate.child===i.child,a=0,s=0;if(e)for(var o=i.child;o!==null;)a|=o.lanes|o.childLanes,s|=o.subtreeFlags&14680064,s|=o.flags&14680064,o.return=i,o=o.sibling;else for(o=i.child;o!==null;)a|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=i,o=o.sibling;return i.subtreeFlags|=s,i.childLanes=a,e}function Ej(i,e,a){var s=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return s=e.stateNode,zh(),E(Wf),E(H),Eh(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(i===null||i.child===null)&&(Gg(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(i,e),S(e),null;case 5:Bh(e);var o=xh(wh.current);if(a=e.type,i!==null&&e.stateNode!=null)Bj(i,e,a,s,o),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(i=xh(uh.current),Gg(e)){s=e.stateNode,a=e.type;var c=e.memoizedProps;switch(s[Of]=e,s[Pf]=c,i=(e.mode&1)!==0,a){case"dialog":D("cancel",s),D("close",s);break;case"iframe":case"object":case"embed":D("load",s);break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],s);break;case"source":D("error",s);break;case"img":case"image":case"link":D("error",s),D("load",s);break;case"details":D("toggle",s);break;case"input":Za(s,c),D("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!c.multiple},D("invalid",s);break;case"textarea":hb(s,c),D("invalid",s)}ub(a,c),o=null;for(var d in c)if(c.hasOwnProperty(d)){var h=c[d];d==="children"?typeof h=="string"?s.textContent!==h&&(c.suppressHydrationWarning!==!0&&Af(s.textContent,h,i),o=["children",h]):typeof h=="number"&&s.textContent!==""+h&&(c.suppressHydrationWarning!==!0&&Af(s.textContent,h,i),o=["children",""+h]):ea.hasOwnProperty(d)&&h!=null&&d==="onScroll"&&D("scroll",s)}switch(a){case"input":Va(s),db(s,c,!0);break;case"textarea":Va(s),jb(s);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(s.onclick=Bf)}s=o,e.updateQueue=s,s!==null&&(e.flags|=4)}else{d=o.nodeType===9?o:o.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(a)),i==="http://www.w3.org/1999/xhtml"?a==="script"?(i=d.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof s.is=="string"?i=d.createElement(a,{is:s.is}):(i=d.createElement(a),a==="select"&&(d=i,s.multiple?d.multiple=!0:s.size&&(d.size=s.size))):i=d.createElementNS(i,a),i[Of]=e,i[Pf]=s,zj(i,e,!1,!1),e.stateNode=i;e:{switch(d=vb(a,s),a){case"dialog":D("cancel",i),D("close",i),o=s;break;case"iframe":case"object":case"embed":D("load",i),o=s;break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],i);o=s;break;case"source":D("error",i),o=s;break;case"img":case"image":case"link":D("error",i),D("load",i),o=s;break;case"details":D("toggle",i),o=s;break;case"input":Za(i,s),o=Ya(i,s),D("invalid",i);break;case"option":o=s;break;case"select":i._wrapperState={wasMultiple:!!s.multiple},o=A$1({},s,{value:void 0}),D("invalid",i);break;case"textarea":hb(i,s),o=gb(i,s),D("invalid",i);break;default:o=s}ub(a,o),h=o;for(c in h)if(h.hasOwnProperty(c)){var g=h[c];c==="style"?sb(i,g):c==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&nb(i,g)):c==="children"?typeof g=="string"?(a!=="textarea"||g!=="")&&ob(i,g):typeof g=="number"&&ob(i,""+g):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?g!=null&&c==="onScroll"&&D("scroll",i):g!=null&&ta(i,c,g,d))}switch(a){case"input":Va(i),db(i,s,!1);break;case"textarea":Va(i),jb(i);break;case"option":s.value!=null&&i.setAttribute("value",""+Sa(s.value));break;case"select":i.multiple=!!s.multiple,c=s.value,c!=null?fb(i,!!s.multiple,c,!1):s.defaultValue!=null&&fb(i,!!s.multiple,s.defaultValue,!0);break;default:typeof o.onClick=="function"&&(i.onclick=Bf)}switch(a){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(i&&e.stateNode!=null)Cj(i,e,i.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(p(166));if(a=xh(wh.current),xh(uh.current),Gg(e)){if(s=e.stateNode,a=e.memoizedProps,s[Of]=e,(c=s.nodeValue!==a)&&(i=xg,i!==null))switch(i.tag){case 3:Af(s.nodeValue,a,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(s.nodeValue,a,(i.mode&1)!==0)}c&&(e.flags|=4)}else s=(a.nodeType===9?a:a.ownerDocument).createTextNode(s),s[Of]=e,e.stateNode=s}return S(e),null;case 13:if(E(L),s=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,c=!1;else if(c=Gg(e),s!==null&&s.dehydrated!==null){if(i===null){if(!c)throw Error(p(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),c=!1}else zg!==null&&(Fj(zg),zg=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=a,e):(s=s!==null,s!==(i!==null&&i.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(i===null||L.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return zh(),Aj(i,e),i===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return ah(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(L),c=e.memoizedState,c===null)return S(e),null;if(s=(e.flags&128)!==0,d=c.rendering,d===null)if(s)Dj(c,!1);else{if(T!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(d=Ch(i),d!==null){for(e.flags|=128,Dj(c,!1),s=d.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=a,a=e.child;a!==null;)c=a,i=s,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=i,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,i=d.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a=a.sibling;return G(L,L.current&1|2),e.child}i=i.sibling}c.tail!==null&&B()>Gj&&(e.flags|=128,s=!0,Dj(c,!1),e.lanes=4194304)}else{if(!s)if(i=Ch(d),i!==null){if(e.flags|=128,s=!0,a=i.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),Dj(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I$1)return S(e),null}else 2*B()-c.renderingStartTime>Gj&&a!==1073741824&&(e.flags|=128,s=!0,Dj(c,!1),e.lanes=4194304);c.isBackwards?(d.sibling=e.child,e.child=d):(a=c.last,a!==null?a.sibling=d:e.child=d,c.last=d)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=B(),e.sibling=null,a=L.current,G(L,s?a&1|2:a&1),e):(S(e),null);case 22:case 23:return Hj(),s=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?fj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(i,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return zh(),E(Wf),E(H),Eh(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(i,e){var a=i.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(s){W(i,e,s)}else a.current=null}function Mj(i,e,a){try{a()}catch(s){W(i,e,s)}}var Nj=!1;function Oj(i,e){if(Cf=dd,i=Me(),Ne(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var o=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var d=0,h=-1,g=-1,_=0,b=0,j=i,$=null;t:for(;;){for(var _e;j!==a||o!==0&&j.nodeType!==3||(h=d+o),j!==c||s!==0&&j.nodeType!==3||(g=d+s),j.nodeType===3&&(d+=j.nodeValue.length),(_e=j.firstChild)!==null;)$=j,j=_e;for(;;){if(j===i)break t;if($===a&&++_===o&&(h=d),$===c&&++b===s&&(g=d),(_e=j.nextSibling)!==null)break;j=$,$=j.parentNode}j=_e}a=h===-1||g===-1?null:{start:h,end:g}}else a=null}a=a||{start:0,end:0}}else a=null;for(Df={focusedElem:i,selectionRange:a},dd=!1,V$1=e;V$1!==null;)if(e=V$1,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,V$1=i;else for(;V$1!==null;){e=V$1;try{var et=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(et!==null){var tt=et.memoizedProps,it=et.memoizedState,nt=e.stateNode,rt=nt.getSnapshotBeforeUpdate(e.elementType===e.type?tt:Ci(e.type,tt),it);nt.__reactInternalSnapshotBeforeUpdate=rt}break;case 3:var at=e.stateNode.containerInfo;at.nodeType===1?at.textContent="":at.nodeType===9&&at.documentElement&&at.removeChild(at.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(st){W(e,e.return,st)}if(i=e.sibling,i!==null){i.return=e.return,V$1=i;break}V$1=e.return}return et=Nj,Nj=!1,et}function Pj(i,e,a){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&i)===i){var c=o.destroy;o.destroy=void 0,c!==void 0&&Mj(e,a,c)}o=o.next}while(o!==s)}}function Qj(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var a=e=e.next;do{if((a.tag&i)===i){var s=a.create;a.destroy=s()}a=a.next}while(a!==e)}}function Rj(i){var e=i.ref;if(e!==null){var a=i.stateNode;switch(i.tag){case 5:i=a;break;default:i=a}typeof e=="function"?e(i):e.current=i}}function Sj(i){var e=i.alternate;e!==null&&(i.alternate=null,Sj(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Tj(i){return i.tag===5||i.tag===3||i.tag===4}function Uj(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Tj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Vj(i,e,a){var s=i.tag;if(s===5||s===6)i=i.stateNode,e?a.nodeType===8?a.parentNode.insertBefore(i,e):a.insertBefore(i,e):(a.nodeType===8?(e=a.parentNode,e.insertBefore(i,a)):(e=a,e.appendChild(i)),a=a._reactRootContainer,a!=null||e.onclick!==null||(e.onclick=Bf));else if(s!==4&&(i=i.child,i!==null))for(Vj(i,e,a),i=i.sibling;i!==null;)Vj(i,e,a),i=i.sibling}function Wj(i,e,a){var s=i.tag;if(s===5||s===6)i=i.stateNode,e?a.insertBefore(i,e):a.appendChild(i);else if(s!==4&&(i=i.child,i!==null))for(Wj(i,e,a),i=i.sibling;i!==null;)Wj(i,e,a),i=i.sibling}var X=null,Xj=!1;function Yj(i,e,a){for(a=a.child;a!==null;)Zj(i,e,a),a=a.sibling}function Zj(i,e,a){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,a)}catch{}switch(a.tag){case 5:U||Lj(a,e);case 6:var s=X,o=Xj;X=null,Yj(i,e,a),X=s,Xj=o,X!==null&&(Xj?(i=X,a=a.stateNode,i.nodeType===8?i.parentNode.removeChild(a):i.removeChild(a)):X.removeChild(a.stateNode));break;case 18:X!==null&&(Xj?(i=X,a=a.stateNode,i.nodeType===8?Kf(i.parentNode,a):i.nodeType===1&&Kf(i,a),bd(i)):Kf(X,a.stateNode));break;case 4:s=X,o=Xj,X=a.stateNode.containerInfo,Xj=!0,Yj(i,e,a),X=s,Xj=o;break;case 0:case 11:case 14:case 15:if(!U&&(s=a.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){o=s=s.next;do{var c=o,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Mj(a,e,d),o=o.next}while(o!==s)}Yj(i,e,a);break;case 1:if(!U&&(Lj(a,e),s=a.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=a.memoizedProps,s.state=a.memoizedState,s.componentWillUnmount()}catch(h){W(a,e,h)}Yj(i,e,a);break;case 21:Yj(i,e,a);break;case 22:a.mode&1?(U=(s=U)||a.memoizedState!==null,Yj(i,e,a),U=s):Yj(i,e,a);break;default:Yj(i,e,a)}}function ak(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var a=i.stateNode;a===null&&(a=i.stateNode=new Kj),e.forEach(function(s){var o=bk.bind(null,i,s);a.has(s)||(a.add(s),s.then(o,o))})}}function ck(i,e){var a=e.deletions;if(a!==null)for(var s=0;s<a.length;s++){var o=a[s];try{var c=i,d=e,h=d;e:for(;h!==null;){switch(h.tag){case 5:X=h.stateNode,Xj=!1;break e;case 3:X=h.stateNode.containerInfo,Xj=!0;break e;case 4:X=h.stateNode.containerInfo,Xj=!0;break e}h=h.return}if(X===null)throw Error(p(160));Zj(c,d,o),X=null,Xj=!1;var g=o.alternate;g!==null&&(g.return=null),o.return=null}catch(_){W(o,e,_)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,i),e=e.sibling}function dk(i,e){var a=i.alternate,s=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ck(e,i),ek(i),s&4){try{Pj(3,i,i.return),Qj(3,i)}catch(tt){W(i,i.return,tt)}try{Pj(5,i,i.return)}catch(tt){W(i,i.return,tt)}}break;case 1:ck(e,i),ek(i),s&512&&a!==null&&Lj(a,a.return);break;case 5:if(ck(e,i),ek(i),s&512&&a!==null&&Lj(a,a.return),i.flags&32){var o=i.stateNode;try{ob(o,"")}catch(tt){W(i,i.return,tt)}}if(s&4&&(o=i.stateNode,o!=null)){var c=i.memoizedProps,d=a!==null?a.memoizedProps:c,h=i.type,g=i.updateQueue;if(i.updateQueue=null,g!==null)try{h==="input"&&c.type==="radio"&&c.name!=null&&ab(o,c),vb(h,d);var _=vb(h,c);for(d=0;d<g.length;d+=2){var b=g[d],j=g[d+1];b==="style"?sb(o,j):b==="dangerouslySetInnerHTML"?nb(o,j):b==="children"?ob(o,j):ta(o,b,j,_)}switch(h){case"input":bb(o,c);break;case"textarea":ib(o,c);break;case"select":var $=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!c.multiple;var _e=c.value;_e!=null?fb(o,!!c.multiple,_e,!1):$!==!!c.multiple&&(c.defaultValue!=null?fb(o,!!c.multiple,c.defaultValue,!0):fb(o,!!c.multiple,c.multiple?[]:"",!1))}o[Pf]=c}catch(tt){W(i,i.return,tt)}}break;case 6:if(ck(e,i),ek(i),s&4){if(i.stateNode===null)throw Error(p(162));o=i.stateNode,c=i.memoizedProps;try{o.nodeValue=c}catch(tt){W(i,i.return,tt)}}break;case 3:if(ck(e,i),ek(i),s&4&&a!==null&&a.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(tt){W(i,i.return,tt)}break;case 4:ck(e,i),ek(i);break;case 13:ck(e,i),ek(i),o=i.child,o.flags&8192&&(c=o.memoizedState!==null,o.stateNode.isHidden=c,!c||o.alternate!==null&&o.alternate.memoizedState!==null||(fk=B())),s&4&&ak(i);break;case 22:if(b=a!==null&&a.memoizedState!==null,i.mode&1?(U=(_=U)||b,ck(e,i),U=_):ck(e,i),ek(i),s&8192){if(_=i.memoizedState!==null,(i.stateNode.isHidden=_)&&!b&&i.mode&1)for(V$1=i,b=i.child;b!==null;){for(j=V$1=b;V$1!==null;){switch($=V$1,_e=$.child,$.tag){case 0:case 11:case 14:case 15:Pj(4,$,$.return);break;case 1:Lj($,$.return);var et=$.stateNode;if(typeof et.componentWillUnmount=="function"){s=$,a=$.return;try{e=s,et.props=e.memoizedProps,et.state=e.memoizedState,et.componentWillUnmount()}catch(tt){W(s,a,tt)}}break;case 5:Lj($,$.return);break;case 22:if($.memoizedState!==null){gk(j);continue}}_e!==null?(_e.return=$,V$1=_e):gk(j)}b=b.sibling}e:for(b=null,j=i;;){if(j.tag===5){if(b===null){b=j;try{o=j.stateNode,_?(c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(h=j.stateNode,g=j.memoizedProps.style,d=g!=null&&g.hasOwnProperty("display")?g.display:null,h.style.display=rb("display",d))}catch(tt){W(i,i.return,tt)}}}else if(j.tag===6){if(b===null)try{j.stateNode.nodeValue=_?"":j.memoizedProps}catch(tt){W(i,i.return,tt)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===i)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===i)break e;for(;j.sibling===null;){if(j.return===null||j.return===i)break e;b===j&&(b=null),j=j.return}b===j&&(b=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:ck(e,i),ek(i),s&4&&ak(i);break;case 21:break;default:ck(e,i),ek(i)}}function ek(i){var e=i.flags;if(e&2){try{e:{for(var a=i.return;a!==null;){if(Tj(a)){var s=a;break e}a=a.return}throw Error(p(160))}switch(s.tag){case 5:var o=s.stateNode;s.flags&32&&(ob(o,""),s.flags&=-33);var c=Uj(i);Wj(i,c,o);break;case 3:case 4:var d=s.stateNode.containerInfo,h=Uj(i);Vj(i,h,d);break;default:throw Error(p(161))}}catch(g){W(i,i.return,g)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function hk(i,e,a){V$1=i,ik(i)}function ik(i,e,a){for(var s=(i.mode&1)!==0;V$1!==null;){var o=V$1,c=o.child;if(o.tag===22&&s){var d=o.memoizedState!==null||Jj;if(!d){var h=o.alternate,g=h!==null&&h.memoizedState!==null||U;h=Jj;var _=U;if(Jj=d,(U=g)&&!_)for(V$1=o;V$1!==null;)d=V$1,g=d.child,d.tag===22&&d.memoizedState!==null?jk(o):g!==null?(g.return=d,V$1=g):jk(o);for(;c!==null;)V$1=c,ik(c),c=c.sibling;V$1=o,Jj=h,U=_}kk(i)}else o.subtreeFlags&8772&&c!==null?(c.return=o,V$1=c):kk(i)}}function kk(i){for(;V$1!==null;){var e=V$1;if(e.flags&8772){var a=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!U)if(a===null)s.componentDidMount();else{var o=e.elementType===e.type?a.memoizedProps:Ci(e.type,a.memoizedProps);s.componentDidUpdate(o,a.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&sh(e,c,s);break;case 3:var d=e.updateQueue;if(d!==null){if(a=null,e.child!==null)switch(e.child.tag){case 5:a=e.child.stateNode;break;case 1:a=e.child.stateNode}sh(e,d,a)}break;case 5:var h=e.stateNode;if(a===null&&e.flags&4){a=h;var g=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&a.focus();break;case"img":g.src&&(a.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var _=e.alternate;if(_!==null){var b=_.memoizedState;if(b!==null){var j=b.dehydrated;j!==null&&bd(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Rj(e)}catch($){W(e,e.return,$)}}if(e===i){V$1=null;break}if(a=e.sibling,a!==null){a.return=e.return,V$1=a;break}V$1=e.return}}function gk(i){for(;V$1!==null;){var e=V$1;if(e===i){V$1=null;break}var a=e.sibling;if(a!==null){a.return=e.return,V$1=a;break}V$1=e.return}}function jk(i){for(;V$1!==null;){var e=V$1;try{switch(e.tag){case 0:case 11:case 15:var a=e.return;try{Qj(4,e)}catch(g){W(e,a,g)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var o=e.return;try{s.componentDidMount()}catch(g){W(e,o,g)}}var c=e.return;try{Rj(e)}catch(g){W(e,c,g)}break;case 5:var d=e.return;try{Rj(e)}catch(g){W(e,d,g)}}}catch(g){W(e,e.return,g)}if(e===i){V$1=null;break}var h=e.sibling;if(h!==null){h.return=e.return,V$1=h;break}V$1=e.return}}var lk=Math.ceil,mk=ua$1.ReactCurrentDispatcher,nk=ua$1.ReactCurrentOwner,ok=ua$1.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z$1=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(i){return i.mode&1?K&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(i=C,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function gi(i,e,a,s){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(i,a,s),(!(K&2)||i!==Q)&&(i===Q&&(!(K&2)&&(qk|=a),T===4&&Ck(i,Z$1)),Dk(i,s),a===1&&K===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(i,e){var a=i.callbackNode;wc(i,e);var s=uc(i,i===Q?Z$1:0);if(s===0)a!==null&&bc(a),i.callbackNode=null,i.callbackPriority=0;else if(e=s&-s,i.callbackPriority!==e){if(a!=null&&bc(a),e===1)i.tag===0?ig(Ek.bind(null,i)):hg(Ek.bind(null,i)),Jf(function(){!(K&6)&&jg()}),a=null;else{switch(Dc(s)){case 1:a=fc;break;case 4:a=gc;break;case 16:a=hc;break;case 536870912:a=jc;break;default:a=hc}a=Fk(a,Gk.bind(null,i))}i.callbackPriority=e,i.callbackNode=a}}function Gk(i,e){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var a=i.callbackNode;if(Hk()&&i.callbackNode!==a)return null;var s=uc(i,i===Q?Z$1:0);if(s===0)return null;if(s&30||s&i.expiredLanes||e)e=Ik(i,s);else{e=s;var o=K;K|=2;var c=Jk();(Q!==i||Z$1!==e)&&(uk=null,Gj=B()+500,Kk(i,e));do try{Lk();break}catch(h){Mk(i,h)}while(!0);$g(),mk.current=c,K=o,Y!==null?e=0:(Q=null,Z$1=0,e=T)}if(e!==0){if(e===2&&(o=xc(i),o!==0&&(s=o,e=Nk(i,o))),e===1)throw a=pk,Kk(i,0),Ck(i,s),Dk(i,B()),a;if(e===6)Ck(i,s);else{if(o=i.current.alternate,!(s&30)&&!Ok(o)&&(e=Ik(i,s),e===2&&(c=xc(i),c!==0&&(s=c,e=Nk(i,c))),e===1))throw a=pk,Kk(i,0),Ck(i,s),Dk(i,B()),a;switch(i.finishedWork=o,i.finishedLanes=s,e){case 0:case 1:throw Error(p(345));case 2:Pk(i,tk,uk);break;case 3:if(Ck(i,s),(s&130023424)===s&&(e=fk+500-B(),10<e)){if(uc(i,0)!==0)break;if(o=i.suspendedLanes,(o&s)!==s){R(),i.pingedLanes|=i.suspendedLanes&o;break}i.timeoutHandle=Ff(Pk.bind(null,i,tk,uk),e);break}Pk(i,tk,uk);break;case 4:if(Ck(i,s),(s&4194240)===s)break;for(e=i.eventTimes,o=-1;0<s;){var d=31-oc(s);c=1<<d,d=e[d],d>o&&(o=d),s&=~c}if(s=o,s=B()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*lk(s/1960))-s,10<s){i.timeoutHandle=Ff(Pk.bind(null,i,tk,uk),s);break}Pk(i,tk,uk);break;case 5:Pk(i,tk,uk);break;default:throw Error(p(329))}}}return Dk(i,B()),i.callbackNode===a?Gk.bind(null,i):null}function Nk(i,e){var a=sk;return i.current.memoizedState.isDehydrated&&(Kk(i,e).flags|=256),i=Ik(i,e),i!==2&&(e=tk,tk=a,e!==null&&Fj(e)),i}function Fj(i){tk===null?tk=i:tk.push.apply(tk,i)}function Ok(i){for(var e=i;;){if(e.flags&16384){var a=e.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var s=0;s<a.length;s++){var o=a[s],c=o.getSnapshot;o=o.value;try{if(!He(c(),o))return!1}catch{return!1}}}if(a=e.child,e.subtreeFlags&16384&&a!==null)a.return=e,e=a;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(i,e){for(e&=~rk,e&=~qk,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var a=31-oc(e),s=1<<a;i[a]=-1,e&=~s}}function Ek(i){if(K&6)throw Error(p(327));Hk();var e=uc(i,0);if(!(e&1))return Dk(i,B()),null;var a=Ik(i,e);if(i.tag!==0&&a===2){var s=xc(i);s!==0&&(e=s,a=Nk(i,s))}if(a===1)throw a=pk,Kk(i,0),Ck(i,e),Dk(i,B()),a;if(a===6)throw Error(p(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Pk(i,tk,uk),Dk(i,B()),null}function Qk(i,e){var a=K;K|=1;try{return i(e)}finally{K=a,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(i){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var a=ok.transition,s=C;try{if(ok.transition=null,C=1,i)return i()}finally{C=s,ok.transition=a,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(i,e){i.finishedWork=null,i.finishedLanes=0;var a=i.timeoutHandle;if(a!==-1&&(i.timeoutHandle=-1,Gf(a)),Y!==null)for(a=Y.return;a!==null;){var s=a;switch(wg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(s);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(s.type._context);break;case 22:case 23:Hj()}a=a.return}if(Q=i,Y=i=Pg(i.current,null),Z$1=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(a=fh[e],s=a.interleaved,s!==null){a.interleaved=null;var o=s.next,c=a.pending;if(c!==null){var d=c.next;c.next=o,s.next=d}a.pending=s}fh=null}return i}function Mk(i,e){do{var a=Y;try{if($g(),Fh.current=Rh,Ih){for(var s=M$1.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Ih=!1}if(Hh=0,O$1=N=M$1=null,Jh=!1,Kh=0,nk.current=null,a===null||a.return===null){T=1,pk=e,Y=null;break}e:{var c=i,d=a.return,h=a,g=e;if(e=Z$1,h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var _=g,b=h,j=b.tag;if(!(b.mode&1)&&(j===0||j===11||j===15)){var $=b.alternate;$?(b.updateQueue=$.updateQueue,b.memoizedState=$.memoizedState,b.lanes=$.lanes):(b.updateQueue=null,b.memoizedState=null)}var _e=Ui(d);if(_e!==null){_e.flags&=-257,Vi(_e,d,h,c,e),_e.mode&1&&Si(c,_,e),e=_e,g=_;var et=e.updateQueue;if(et===null){var tt=new Set;tt.add(g),e.updateQueue=tt}else et.add(g);break e}else{if(!(e&1)){Si(c,_,e),tj();break e}g=Error(p(426))}}else if(I$1&&h.mode&1){var it=Ui(d);if(it!==null){!(it.flags&65536)&&(it.flags|=256),Vi(it,d,h,c,e),Jg(Ji(g,h));break e}}c=g=Ji(g,h),T!==4&&(T=2),sk===null?sk=[c]:sk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var nt=Ni(c,g,e);ph(c,nt);break e;case 1:h=g;var rt=c.type,at=c.stateNode;if(!(c.flags&128)&&(typeof rt.getDerivedStateFromError=="function"||at!==null&&typeof at.componentDidCatch=="function"&&(Ri===null||!Ri.has(at)))){c.flags|=65536,e&=-e,c.lanes|=e;var st=Qi(c,h,e);ph(c,st);break e}}c=c.return}while(c!==null)}Sk(a)}catch(ot){e=ot,Y===a&&a!==null&&(Y=a=a.return);continue}break}while(!0)}function Jk(){var i=mk.current;return mk.current=Rh,i===null?Rh:i}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z$1)}function Ik(i,e){var a=K;K|=2;var s=Jk();(Q!==i||Z$1!==e)&&(uk=null,Kk(i,e));do try{Tk();break}catch(o){Mk(i,o)}while(!0);if($g(),K=a,mk.current=s,Y!==null)throw Error(p(261));return Q=null,Z$1=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(i){var e=Vk(i.alternate,i,fj);i.memoizedProps=i.pendingProps,e===null?Sk(i):Y=e,nk.current=null}function Sk(i){var e=i;do{var a=e.alternate;if(i=e.return,e.flags&32768){if(a=Ij(a,e),a!==null){a.flags&=32767,Y=a;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T=6,Y=null;return}}else if(a=Ej(a,e,fj),a!==null){Y=a;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=i}while(e!==null);T===0&&(T=5)}function Pk(i,e,a){var s=C,o=ok.transition;try{ok.transition=null,C=1,Wk(i,e,a,s)}finally{ok.transition=o,C=s}return null}function Wk(i,e,a,s){do Hk();while(wk!==null);if(K&6)throw Error(p(327));a=i.finishedWork;var o=i.finishedLanes;if(a===null)return null;if(i.finishedWork=null,i.finishedLanes=0,a===i.current)throw Error(p(177));i.callbackNode=null,i.callbackPriority=0;var c=a.lanes|a.childLanes;if(Bc(i,c),i===Q&&(Y=Q=null,Z$1=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),c=(a.flags&15990)!==0,a.subtreeFlags&15990||c){c=ok.transition,ok.transition=null;var d=C;C=1;var h=K;K|=4,nk.current=null,Oj(i,a),dk(a,i),Oe(Df),dd=!!Cf,Df=Cf=null,i.current=a,hk(a),dc(),K=h,C=d,ok.transition=c}else i.current=a;if(vk&&(vk=!1,wk=i,xk=o),c=i.pendingLanes,c===0&&(Ri=null),mc(a.stateNode),Dk(i,B()),e!==null)for(s=i.onRecoverableError,a=0;a<e.length;a++)o=e[a],s(o.value,{componentStack:o.stack,digest:o.digest});if(Oi)throw Oi=!1,i=Pi,Pi=null,i;return xk&1&&i.tag!==0&&Hk(),c=i.pendingLanes,c&1?i===zk?yk++:(yk=0,zk=i):yk=0,jg(),null}function Hk(){if(wk!==null){var i=Dc(xk),e=ok.transition,a=C;try{if(ok.transition=null,C=16>i?16:i,wk===null)var s=!1;else{if(i=wk,wk=null,xk=0,K&6)throw Error(p(331));var o=K;for(K|=4,V$1=i.current;V$1!==null;){var c=V$1,d=c.child;if(V$1.flags&16){var h=c.deletions;if(h!==null){for(var g=0;g<h.length;g++){var _=h[g];for(V$1=_;V$1!==null;){var b=V$1;switch(b.tag){case 0:case 11:case 15:Pj(8,b,c)}var j=b.child;if(j!==null)j.return=b,V$1=j;else for(;V$1!==null;){b=V$1;var $=b.sibling,_e=b.return;if(Sj(b),b===_){V$1=null;break}if($!==null){$.return=_e,V$1=$;break}V$1=_e}}}var et=c.alternate;if(et!==null){var tt=et.child;if(tt!==null){et.child=null;do{var it=tt.sibling;tt.sibling=null,tt=it}while(tt!==null)}}V$1=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V$1=d;else e:for(;V$1!==null;){if(c=V$1,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Pj(9,c,c.return)}var nt=c.sibling;if(nt!==null){nt.return=c.return,V$1=nt;break e}V$1=c.return}}var rt=i.current;for(V$1=rt;V$1!==null;){d=V$1;var at=d.child;if(d.subtreeFlags&2064&&at!==null)at.return=d,V$1=at;else e:for(d=rt;V$1!==null;){if(h=V$1,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Qj(9,h)}}catch(ot){W(h,h.return,ot)}if(h===d){V$1=null;break e}var st=h.sibling;if(st!==null){st.return=h.return,V$1=st;break e}V$1=h.return}}if(K=o,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch{}s=!0}return s}finally{C=a,ok.transition=e}}return!1}function Xk(i,e,a){e=Ji(a,e),e=Ni(i,e,1),i=nh(i,e,1),e=R(),i!==null&&(Ac(i,1,e),Dk(i,e))}function W(i,e,a){if(i.tag===3)Xk(i,i,a);else for(;e!==null;){if(e.tag===3){Xk(e,i,a);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ri===null||!Ri.has(s))){i=Ji(a,i),i=Qi(e,i,1),e=nh(e,i,1),i=R(),e!==null&&(Ac(e,1,i),Dk(e,i));break}}e=e.return}}function Ti(i,e,a){var s=i.pingCache;s!==null&&s.delete(e),e=R(),i.pingedLanes|=i.suspendedLanes&a,Q===i&&(Z$1&a)===a&&(T===4||T===3&&(Z$1&130023424)===Z$1&&500>B()-fk?Kk(i,0):rk|=a),Dk(i,e)}function Yk(i,e){e===0&&(i.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var a=R();i=ih(i,e),i!==null&&(Ac(i,e,a),Dk(i,a))}function uj(i){var e=i.memoizedState,a=0;e!==null&&(a=e.retryLane),Yk(i,a)}function bk(i,e){var a=0;switch(i.tag){case 13:var s=i.stateNode,o=i.memoizedState;o!==null&&(a=o.retryLane);break;case 19:s=i.stateNode;break;default:throw Error(p(314))}s!==null&&s.delete(e),Yk(i,a)}var Vk;Vk=function(i,e,a){if(i!==null)if(i.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(i.lanes&a)&&!(e.flags&128))return dh=!1,yj(i,e,a);dh=!!(i.flags&131072)}else dh=!1,I$1&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;ij(i,e),i=e.pendingProps;var o=Yf(e,H.current);ch(e,a),o=Nh(null,e,s,i,o,a);var c=Sh();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(s)?(c=!0,cg(e)):c=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,kh(e),o.updater=Ei,e.stateNode=o,o._reactInternals=e,Ii(e,s,i,a),e=jj(null,e,s,!0,c,a)):(e.tag=0,I$1&&c&&vg(e),Xi(null,e,o,a),e=e.child),e;case 16:s=e.elementType;e:{switch(ij(i,e),i=e.pendingProps,o=s._init,s=o(s._payload),e.type=s,o=e.tag=Zk(s),i=Ci(s,i),o){case 0:e=cj(null,e,s,i,a);break e;case 1:e=hj(null,e,s,i,a);break e;case 11:e=Yi(null,e,s,i,a);break e;case 14:e=$i(null,e,s,Ci(s.type,i),a);break e}throw Error(p(306,s,""))}return e;case 0:return s=e.type,o=e.pendingProps,o=e.elementType===s?o:Ci(s,o),cj(i,e,s,o,a);case 1:return s=e.type,o=e.pendingProps,o=e.elementType===s?o:Ci(s,o),hj(i,e,s,o,a);case 3:e:{if(kj(e),i===null)throw Error(p(387));s=e.pendingProps,c=e.memoizedState,o=c.element,lh(i,e),qh(e,s,null,a);var d=e.memoizedState;if(s=d.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){o=Ji(Error(p(423)),e),e=lj(i,e,s,a,o);break e}else if(s!==o){o=Ji(Error(p(424)),e),e=lj(i,e,s,a,o);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I$1=!0,zg=null,a=Vg(e,null,s,a),e.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ig(),s===o){e=Zi(i,e,a);break e}Xi(i,e,s,a)}e=e.child}return e;case 5:return Ah(e),i===null&&Eg(e),s=e.type,o=e.pendingProps,c=i!==null?i.memoizedProps:null,d=o.children,Ef(s,o)?d=null:c!==null&&Ef(s,c)&&(e.flags|=32),gj(i,e),Xi(i,e,d,a),e.child;case 6:return i===null&&Eg(e),null;case 13:return oj(i,e,a);case 4:return yh(e,e.stateNode.containerInfo),s=e.pendingProps,i===null?e.child=Ug(e,null,s,a):Xi(i,e,s,a),e.child;case 11:return s=e.type,o=e.pendingProps,o=e.elementType===s?o:Ci(s,o),Yi(i,e,s,o,a);case 7:return Xi(i,e,e.pendingProps,a),e.child;case 8:return Xi(i,e,e.pendingProps.children,a),e.child;case 12:return Xi(i,e,e.pendingProps.children,a),e.child;case 10:e:{if(s=e.type._context,o=e.pendingProps,c=e.memoizedProps,d=o.value,G(Wg,s._currentValue),s._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===o.children&&!Wf.current){e=Zi(i,e,a);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){d=c.child;for(var g=h.firstContext;g!==null;){if(g.context===s){if(c.tag===1){g=mh(-1,a&-a),g.tag=2;var _=c.updateQueue;if(_!==null){_=_.shared;var b=_.pending;b===null?g.next=g:(g.next=b.next,b.next=g),_.pending=g}}c.lanes|=a,g=c.alternate,g!==null&&(g.lanes|=a),bh(c.return,a,e),h.lanes|=a;break}g=g.next}}else if(c.tag===10)d=c.type===e.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=a,h=d.alternate,h!==null&&(h.lanes|=a),bh(d,a,e),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===e){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Xi(i,e,o.children,a),e=e.child}return e;case 9:return o=e.type,s=e.pendingProps.children,ch(e,a),o=eh(o),s=s(o),e.flags|=1,Xi(i,e,s,a),e.child;case 14:return s=e.type,o=Ci(s,e.pendingProps),o=Ci(s.type,o),$i(i,e,s,o,a);case 15:return bj(i,e,e.type,e.pendingProps,a);case 17:return s=e.type,o=e.pendingProps,o=e.elementType===s?o:Ci(s,o),ij(i,e),e.tag=1,Zf(s)?(i=!0,cg(e)):i=!1,ch(e,a),Gi(e,s,o),Ii(e,s,o,a),jj(null,e,s,!0,i,a);case 19:return xj(i,e,a);case 22:return dj(i,e,a)}throw Error(p(156,e.tag))};function Fk(i,e){return ac(i,e)}function $k(i,e,a,s){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,e,a,s){return new $k(i,e,a,s)}function aj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zk(i){if(typeof i=="function")return aj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function Pg(i,e){var a=i.alternate;return a===null?(a=Bg(i.tag,e,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=e,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&14680064,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a}function Rg(i,e,a,s,o,c){var d=2;if(s=i,typeof i=="function")aj(i)&&(d=1);else if(typeof i=="string")d=5;else e:switch(i){case ya:return Tg(a.children,o,c,e);case za:d=8,o|=8;break;case Aa:return i=Bg(12,a,e,o|2),i.elementType=Aa,i.lanes=c,i;case Ea:return i=Bg(13,a,e,o),i.elementType=Ea,i.lanes=c,i;case Fa:return i=Bg(19,a,e,o),i.elementType=Fa,i.lanes=c,i;case Ia:return pj(a,o,c,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,s=null;break e}throw Error(p(130,i==null?i:typeof i,""))}return e=Bg(d,a,e,o),e.elementType=i,e.type=s,e.lanes=c,e}function Tg(i,e,a,s){return i=Bg(7,i,s,e),i.lanes=a,i}function pj(i,e,a,s){return i=Bg(22,i,s,e),i.elementType=Ia,i.lanes=a,i.stateNode={isHidden:!1},i}function Qg(i,e,a){return i=Bg(6,i,null,e),i.lanes=a,i}function Sg(i,e,a){return e=Bg(4,i.children!==null?i.children:[],i.key,e),e.lanes=a,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function al(i,e,a,s,o){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=s,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function bl(i,e,a,s,o,c,d,h,g){return i=new al(i,e,a,h,g),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Bg(3,null,null,e),i.current=c,c.stateNode=i,c.memoizedState={element:s,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(c),i}function cl(i,e,a){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:s==null?null:""+s,children:i,containerInfo:e,implementation:a}}function dl(i){if(!i)return Vf;i=i._reactInternals;e:{if(Vb(i)!==i||i.tag!==1)throw Error(p(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(i.tag===1){var a=i.type;if(Zf(a))return bg(i,a,e)}return e}function el(i,e,a,s,o,c,d,h,g){return i=bl(a,s,!0,i,o,c,d,h,g),i.context=dl(null),a=i.current,s=R(),o=yi(a),c=mh(s,o),c.callback=e??null,nh(a,c,o),i.current.lanes=o,Ac(i,o,s),Dk(i,s),i}function fl(i,e,a,s){var o=e.current,c=R(),d=yi(o);return a=dl(a),e.context===null?e.context=a:e.pendingContext=a,e=mh(c,d),e.payload={element:i},s=s===void 0?null:s,s!==null&&(e.callback=s),i=nh(o,e,d),i!==null&&(gi(i,o,d,c),oh(i,o,d)),d}function gl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function hl(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<e?a:e}}function il(i,e){hl(i,e),(i=i.alternate)&&hl(i,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(i){console.error(i)};function ll(i){this._internalRoot=i}ml.prototype.render=ll.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(i,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Rk(function(){fl(null,i,null,null)}),e[uf]=null}};function ml(i){this._internalRoot=i}ml.prototype.unstable_scheduleHydration=function(i){if(i){var e=Hc();i={blockedOn:null,target:i,priority:e};for(var a=0;a<Qc.length&&e!==0&&e<Qc[a].priority;a++);Qc.splice(a,0,i),a===0&&Vc(i)}};function nl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(i,e,a,s,o){if(o){if(typeof s=="function"){var c=s;s=function(){var _=gl(d);c.call(_)}}var d=el(e,s,i,0,null,!1,!1,"",pl);return i._reactRootContainer=d,i[uf]=d.current,sf(i.nodeType===8?i.parentNode:i),Rk(),d}for(;o=i.lastChild;)i.removeChild(o);if(typeof s=="function"){var h=s;s=function(){var _=gl(g);h.call(_)}}var g=bl(i,0,!1,null,null,!1,!1,"",pl);return i._reactRootContainer=g,i[uf]=g.current,sf(i.nodeType===8?i.parentNode:i),Rk(function(){fl(e,g,a,s)}),g}function rl(i,e,a,s,o){var c=a._reactRootContainer;if(c){var d=c;if(typeof o=="function"){var h=o;o=function(){var g=gl(d);h.call(g)}}fl(e,d,i,o)}else d=ql(a,e,i,o,s);return gl(d)}Ec=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var a=tc(e.pendingLanes);a!==0&&(Cc(e,a|1),Dk(e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var s=ih(i,1);if(s!==null){var o=R();gi(s,i,1,o)}}),il(i,1)}};Fc=function(i){if(i.tag===13){var e=ih(i,134217728);if(e!==null){var a=R();gi(e,i,134217728,a)}il(i,134217728)}};Gc=function(i){if(i.tag===13){var e=yi(i),a=ih(i,e);if(a!==null){var s=R();gi(a,i,e,s)}il(i,e)}};Hc=function(){return C};Ic=function(i,e){var a=C;try{return C=i,e()}finally{C=a}};yb=function(i,e,a){switch(e){case"input":if(bb(i,a),e=a.name,a.type==="radio"&&e!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<a.length;e++){var s=a[e];if(s!==i&&s.form===i.form){var o=Db(s);if(!o)throw Error(p(90));Wa(s),bb(s,o)}}}break;case"textarea":ib(i,a);break;case"select":e=a.value,e!=null&&fb(i,!!a.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(i,e){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(i,e,null,a)};reactDom_production_min.createRoot=function(i,e){if(!nl(i))throw Error(p(299));var a=!1,s="",o=kl;return e!=null&&(e.unstable_strictMode===!0&&(a=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=bl(i,1,!1,null,null,a,!1,s,o),i[uf]=e.current,sf(i.nodeType===8?i.parentNode:i),new ll(e)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(p(188)):(i=Object.keys(i).join(","),Error(p(268,i)));return i=Zb(e),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Rk(i)};reactDom_production_min.hydrate=function(i,e,a){if(!ol(e))throw Error(p(200));return rl(null,i,e,!0,a)};reactDom_production_min.hydrateRoot=function(i,e,a){if(!nl(i))throw Error(p(405));var s=a!=null&&a.hydratedSources||null,o=!1,c="",d=kl;if(a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onRecoverableError!==void 0&&(d=a.onRecoverableError)),e=el(e,null,i,1,a??null,o,!1,c,d),i[uf]=e.current,sf(i),s)for(i=0;i<s.length;i++)a=s[i],o=a._getVersion,o=o(a._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[a,o]:e.mutableSourceEagerHydrationData.push(a,o);return new ml(e)};reactDom_production_min.render=function(i,e,a){if(!ol(e))throw Error(p(200));return rl(null,i,e,!1,a)};reactDom_production_min.unmountComponentAtNode=function(i){if(!ol(i))throw Error(p(40));return i._reactRootContainer?(Rk(function(){rl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,e,a,s){if(!ol(a))throw Error(p(200));if(i==null||i._reactInternals===void 0)throw Error(p(38));return rl(i,e,a,!1,s)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;function symToStr(i){return Object.keys(i)[0]}let wrap;function setBrandTopAndHomeLinkProps(i){wrap=i}function getBrandTopAndHomeLinkProps(){return wrap}var __rest$8=function(i,e){var a={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(a[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(a[s[o]]=i[s[o]]);return a};const Footer=reactExports.memo(reactExports.forwardRef((i,e)=>{const{id:a,className:s,classes:o={},contentDescription:c,websiteMapLinkProps:d,accessibilityLinkProps:h,accessibility:g,termsLinkProps:_,bottomItems:b=[],partnersLogos:j,operatorLogo:$,license:_e,brandTop:et,homeLinkProps:tt,style:it,linkList:nt,domains:rt=["info.gouv.fr","service-public.fr","legifrance.gouv.fr","data.gouv.fr"]}=i,at=__rest$8(i,["id","className","classes","contentDescription","websiteMapLinkProps","accessibilityLinkProps","accessibility","termsLinkProps","bottomItems","partnersLogos","operatorLogo","license","brandTop","homeLinkProps","style","linkList","domains"]);assert$1();const st=a??"fr-footer",{brandTop:ot,homeLinkProps:dt}=(()=>{const pt=getBrandTopAndHomeLinkProps(),ft=et??(pt==null?void 0:pt.brandTop),yt=tt??(pt==null?void 0:pt.homeLinkProps),Ct=" hasn't been provided to the Footer and we cannot retrieve it from the Header (it's probably client side)";if(ft===void 0)throw new Error(symToStr({brandTop:ft})+Ct);if(yt===void 0)throw new Error(symToStr({homeLinkProps:yt})+Ct);return{brandTop:ft,homeLinkProps:yt}})(),{Link:ut}=getLink(),{t:ct}=useTranslation$7(),{main:ht,sub:mt=[]}=j??{};return React.createElement("footer",Object.assign({id:st,className:cx$1(fr.cx("fr-footer"),o.root,s),role:"contentinfo",ref:e,style:it},at),nt!==void 0&&React.createElement("div",{className:fr.cx("fr-footer__top")},React.createElement("div",{className:fr.cx("fr-container")},React.createElement("div",{className:fr.cx("fr-grid-row","fr-grid-row--gutters")},nt.map((pt,ft)=>pt!==void 0&&React.createElement("div",{key:`fr-footer__top-cat-${ft}`,className:fr.cx("fr-col-12","fr-col-sm-3","fr-col-md-2")},(pt==null?void 0:pt.categoryName)&&React.createElement("h3",{className:fr.cx("fr-footer__top-cat")},pt==null?void 0:pt.categoryName),React.createElement("ul",{className:fr.cx("fr-footer__top-list")},pt==null?void 0:pt.links.map((yt,Ct)=>React.createElement("li",{key:`fr-footer__top-link-${Ct}`},React.createElement(ut,Object.assign({},yt==null?void 0:yt.linkProps,{className:fr.cx("fr-footer__top-link")}),yt==null?void 0:yt.text))))))))),React.createElement("div",{className:fr.cx("fr-container")},React.createElement("div",{className:cx$1(fr.cx("fr-footer__body"),o.body)},React.createElement("div",{className:cx$1(fr.cx("fr-footer__brand","fr-enlarge-link"),o.brand)},(()=>{const pt=React.createElement("p",{className:cx$1(fr.cx("fr-logo"),o.logo)},ot);return $!==void 0?pt:React.createElement(ut,Object.assign({},dt),pt)})(),$!==void 0&&React.createElement(ut,Object.assign({},dt,{className:cx$1(fr.cx("fr-footer__brand-link"),o.brandLink,dt.className)}),React.createElement("img",{className:cx$1(fr.cx("fr-footer__logo"),o.operatorLogo),style:(()=>{switch($.orientation){case"vertical":return{width:"3.5rem"};case"horizontal":return{maxWidth:"9.0625rem"}}})(),src:$.imgUrl,alt:$.alt}))),React.createElement("div",{className:cx$1(fr.cx("fr-footer__content"),o.content)},c!==void 0&&React.createElement("p",{className:cx$1(fr.cx("fr-footer__content-desc"),o.contentDesc)},c),React.createElement("ul",{className:cx$1(fr.cx("fr-footer__content-list"),o.contentList)},rt.map((pt,ft)=>React.createElement("li",{className:cx$1(fr.cx("fr-footer__content-item"),o.contentItem),key:ft},React.createElement("a",{className:cx$1(fr.cx("fr-footer__content-link"),o.contentLink),target:"_blank",href:`https://${pt}`,title:`${pt} - ${ct("open new window")}`},pt)))))),j!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners"),o.partners)},React.createElement("h4",{className:cx$1(fr.cx("fr-footer__partners-title"),o.partnersTitle)},ct("our partners")),React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners-logos"),o.partnersLogos)},ht!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners-main"),o.partnersMain)},(()=>{var pt,ft;const yt=React.createElement("img",{alt:ht.alt,style:{height:"5.625rem"},src:ht.imgUrl,className:cx$1(fr.cx("fr-footer__logo"),o.logo)});return ht.linkProps!==void 0||ht.href!==void 0?React.createElement(ut,Object.assign({},ht.linkProps,{href:(pt=ht.href)!==null&&pt!==void 0?pt:(ft=ht.linkProps)===null||ft===void 0?void 0:ft.href,className:cx$1(fr.cx("fr-footer__partners-link","fr-raw-link"),o.partnersLink)}),yt):yt})()),mt.length!==0&&React.createElement("div",{className:cx$1(fr.cx("fr-footer__partners-sub"),o.partnersSub)},React.createElement("ul",null,mt.map((pt,ft)=>{var yt,Ct;const _t=React.createElement("img",{alt:pt.alt,src:pt.imgUrl,style:{height:"5.625rem"},className:cx$1(fr.cx("fr-footer__logo"),o.logo)}),St=pt.linkProps!==void 0||pt.href!==void 0;return React.createElement("li",{key:ft},St?React.createElement(ut,Object.assign({},pt.linkProps,{href:(yt=pt.href)!==null&&yt!==void 0?yt:(Ct=pt.linkProps)===null||Ct===void 0?void 0:Ct.href,className:cx$1(fr.cx("fr-footer__partners-link","fr-raw-link"),o.partnersLink)}),_t):_t)}))))),React.createElement("div",{className:cx$1(fr.cx("fr-footer__bottom"),o.bottom)},React.createElement("ul",{className:cx$1(fr.cx("fr-footer__bottom-list"),o.bottomList)},[...d===void 0?[]:[id$1({text:ct("website map"),linkProps:d})],id$1({text:`${ct("accessibility")} : ${ct(g)}`,linkProps:h??{}}),..._===void 0?[]:[id$1({text:ct("terms"),linkProps:_})],...b].map((pt,ft)=>React.createElement("li",{className:cx$1(fr.cx("fr-footer__bottom-item"),o.bottomItem,s),key:ft},typeGuard(pt,pt instanceof Object&&"text"in pt)?React.createElement(FooterBottomItem,{classes:{bottomLink:o.bottomLink},bottomItem:pt}):pt))),React.createElement("div",{className:cx$1(fr.cx("fr-footer__bottom-copy"),o.bottomCopy)},React.createElement("p",null,_e===void 0?ct("license mention",{licenseUrl:"https://github.com/etalab/licence-ouverte/blob/master/LO.md"}):_e)))))}));Footer.displayName=symToStr({Footer});const{useTranslation:useTranslation$7,addFooterTranslations}=createComponentI18nApi({componentName:symToStr({Footer}),frMessages:{"hide message":"Masquer le message","website map":"Plan du site",accessibility:"Accessibilité","non compliant":"non conforme","partially compliant":"partiellement conforme","fully compliant":"totalement conforme",terms:"Mentions légales","cookies management":"Gestion des cookies","license mention":i=>React.createElement(React.Fragment,null,"Sauf mention explicite de propriété intellectuelle détenue par des tiers, les contenus de ce site sont proposés sous"," ",React.createElement("a",{href:i.licenseUrl,target:"_blank",title:"licence etalab-2.0 - ouvre une nouvelle fenêtre"},"licence etalab-2.0")),"our partners":"Nos partenaires","open new window":"ouvre une nouvelle fenêtre"}});addFooterTranslations({lang:"en",messages:{"hide message":"Hide the message","website map":"Website map",accessibility:"Accessibility","non compliant":"non compliant","partially compliant":"partially compliant","fully compliant":"fully compliant","license mention":i=>React.createElement(React.Fragment,null,"Unless stated otherwise, all content of this website is under the"," ",React.createElement("a",{href:i.licenseUrl,target:"_blank",title:"etalab-2.0 license - open a new window"},"etalab-2.0 license")),"open new window":"open new window"}});addFooterTranslations({lang:"es",messages:{"hide message":"Occultar el mesage"}});function FooterBottomItem(i){const{className:e,bottomItem:a,classes:s={}}=i,{Link:o}=getLink(),c=cx$1(fr.cx("fr-footer__bottom-link",...a.iconId!==void 0?[a.iconId,"fr-link--icon-left"]:[]),s.bottomLink,s.root,e);return a.linkProps!==void 0?Object.keys(a.linkProps).length===0?React.createElement("span",{className:c},a.text):React.createElement(o,Object.assign({},a.linkProps,{className:cx$1(c,a.linkProps.className)}),a.text):React.createElement("button",Object.assign({},a.buttonProps,{className:cx$1(c,a.buttonProps.className)}),a.text)}function generateValidHtmlId(i){const{text:e,fallback:a}=i;if(typeof e!="string"||e==="")return a!==void 0?`-${a}`:"";let s=e.replace(/\s+/g,"");return s=s.replace(/[^a-zA-Z0-9]/g,"_"),`-${s}`}var __rest$7=function(i,e){var a={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(a[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(a[s[o]]=i[s[o]]);return a};const Menu=reactExports.memo(reactExports.forwardRef((i,e)=>{const{id:a,classes:s={},style:o,links:c}=i,d=__rest$7(i,["id","classes","style","links"]);assert$1();const{Link:h}=getLink();return React.createElement("div",Object.assign({className:cx$1(fr.cx("fr-menu"),s.root),style:o,id:a,ref:e},d),React.createElement("ul",{className:cx$1(fr.cx("fr-menu__list"),s.list)},c.map(({text:g,linkProps:_,isActive:b=!1},j)=>{var $;return React.createElement("li",{key:j},React.createElement(h,Object.assign({},_,{id:($=_.id)!==null&&$!==void 0?$:`${a}-link${generateValidHtmlId({text:g})}-${j}`,className:cx$1(fr.cx("fr-nav__link"),_.className)},b&&{"aria-current":"page"}),g))})))}));Menu.displayName=symToStr({Menu});var __rest$6=function(i,e){var a={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(a[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(a[s[o]]=i[s[o]]);return a};const MegaMenu=reactExports.memo(reactExports.forwardRef((i,e)=>{var a;const{id:s,classes:o={},style:c,leader:d,categories:h}=i,g=__rest$6(i,["id","classes","style","leader","categories"]);assert$1();const{t:_}=useTranslation$6(),{Link:b}=getLink();return React.createElement("div",Object.assign({className:cx$1(fr.cx("fr-mega-menu"),o.root),style:c,tabIndex:-1,id:s,ref:e},g),React.createElement("div",{className:fr.cx("fr-container","fr-container--fluid","fr-container-lg")},React.createElement("button",{className:fr.cx("fr-link--close","fr-link"),"aria-controls":s},_("close")),React.createElement("div",{className:fr.cx("fr-grid-row","fr-grid-row-lg--gutters")},d!==void 0&&React.createElement("div",{className:fr.cx("fr-col-12","fr-col-lg-8","fr-col-offset-lg-4--right","fr-mb-4v")},React.createElement("div",{className:cx$1(fr.cx("fr-mega-menu__leader"),o.leader)},React.createElement("h4",{className:fr.cx("fr-h4","fr-mb-2v")},d.title),React.createElement("p",{className:fr.cx("fr-hidden","fr-displayed-lg")},d.paragraph),d.link!==void 0&&React.createElement(b,Object.assign({},d.link.linkProps,{id:(a=d.link.linkProps.id)!==null&&a!==void 0?a:`${s}-leader-link${generateValidHtmlId({text:d.link.text})}`,className:cx$1(fr.cx("fr-link","fr-icon-arrow-right-line","fr-link--icon-right","fr-link--align-on-content"),d.link.linkProps.className)}),d.link.text))),h.map(({categoryMainLink:j,links:$},_e)=>{var et;return React.createElement("div",{className:fr.cx("fr-col-12","fr-col-lg-3"),key:_e},React.createElement("h5",{className:cx$1(fr.cx("fr-mega-menu__category"),o.category)},React.createElement(b,Object.assign({},j.linkProps,{id:(et=j.linkProps.id)!==null&&et!==void 0?et:`${s}-category-link${generateValidHtmlId({text:j.text})}-${_e}`,className:cx$1(fr.cx("fr-nav__link"),j.linkProps.className)}),j.text)),React.createElement("ul",{className:cx$1(fr.cx("fr-mega-menu__list"),o.list)},$.map(({linkProps:tt,text:it,isActive:nt},rt)=>{var at;return React.createElement("li",{key:rt},React.createElement(b,Object.assign({},tt,{id:(at=tt.id)!==null&&at!==void 0?at:`${s}-link${generateValidHtmlId({text:it})}-${_e}-${rt}`,className:cx$1(fr.cx("fr-nav__link"),tt.className)},nt?{"aria-current":"page"}:{}),it))})))}))))}));MegaMenu.displayName=symToStr({MegaMenu});const{useTranslation:useTranslation$6,addMegaMenuTranslations}=createComponentI18nApi({componentName:symToStr({MegaMenu}),frMessages:{close:"Fermer"}});addMegaMenuTranslations({lang:"en",messages:{close:"Close"}});function useAnalyticsId(i){const{explicitlyProvidedId:e,defaultIdPrefix:a}=i,s=reactExports.useId();return e??`${a}-${s}`}var __rest$5=function(i,e){var a={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(a[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(a[s[o]]=i[s[o]]);return a};const MainNavigation=reactExports.memo(reactExports.forwardRef((i,e)=>{const{className:a,items:s,classes:o={},style:c,id:d}=i,h=__rest$5(i,["className","items","classes","style","id"]);assert$1();const{t:g}=useTranslation$5(),{Link:_}=getLink(),b=useAnalyticsId({explicitlyProvidedId:d,defaultIdPrefix:"main-navigation"}),j=$=>`${b}-menu-${$}`;return React.createElement("nav",Object.assign({id:b,className:cx$1(fr.cx("fr-nav"),o.root,a),style:c,role:"navigation","aria-label":g("main menu"),ref:e},h),React.createElement("ul",{className:cx$1(fr.cx("fr-nav__list"),o.list)},s.map(({className:$,text:_e,isActive:et=!1,linkProps:tt,menuLinks:it=[],megaMenu:nt,buttonProps:rt={}},at)=>{var st,ot;return React.createElement("li",{key:at,className:cx$1(fr.cx("fr-nav__item"),o.item,$)},tt!==void 0?React.createElement(_,Object.assign({},tt,{id:(st=tt.id)!==null&&st!==void 0?st:`${b}-link-${at}`,className:cx$1(fr.cx("fr-nav__link"),o.link,tt.className)},et&&{"aria-current":"page"}),_e):React.createElement(React.Fragment,null,React.createElement("button",Object.assign({},rt,{id:(ot=rt.id)!==null&&ot!==void 0?ot:`${b}-button-${at}`,className:cx$1(fr.cx("fr-nav__btn"),rt.className,o.btn),"aria-expanded":!1,"aria-controls":j(at)},et&&{"aria-current":!0}),_e),it.length!==0&&React.createElement(Menu,{classes:{root:cx$1(fr.cx("fr-collapse"),o.root),list:o.menuList},links:it,id:j(at)}),nt!==void 0&&React.createElement(MegaMenu,{classes:{root:cx$1(fr.cx("fr-collapse"),o.megaMenu),leader:o.megaMenuLeader,category:o.megaMenuCategory,list:o.menuList},id:j(at),leader:nt.leader,categories:nt.categories})))})))}));MainNavigation.displayName=symToStr({MainNavigation});const{useTranslation:useTranslation$5,addMainNavigationTranslations}=createComponentI18nApi({componentName:symToStr({MainNavigation}),frMessages:{"main menu":"Menu principal"}});addMainNavigationTranslations({lang:"en",messages:{"main menu":"Main menu"}});const ArtworkLightSvg="/react-dsfr-playground-vite/assets/light-BcMY7tSa.svg",ArtworkDarkSvg="/react-dsfr-playground-vite/assets/dark-BLRRW9zh.svg",ArtworkSystemSvg="/react-dsfr-playground-vite/assets/system-BJKRkqTi.svg";function getAssetUrl(i){return typeof i=="string"?i:i.src}var __rest$4=function(i,e){var a={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(a[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(a[s[o]]=i[s[o]]);return a};const Button=reactExports.memo(reactExports.forwardRef((i,e)=>{var a,s;const{id:o,className:c,children:d,title:h,iconId:g,iconPosition:_="left",priority:b="primary",size:j="medium",linkProps:$,onClick:_e,nativeButtonProps:et,disabled:tt,type:it,style:nt,value:rt}=i,at=__rest$4(i,["id","className","children","title","iconId","iconPosition","priority","size","linkProps","onClick","nativeButtonProps","disabled","type","style","value"]);assert$1();const st=useAnalyticsId({defaultIdPrefix:"fr-button",explicitlyProvidedId:o}),{Link:ot}=getLink(),dt=cx$1(fr.cx("fr-btn",b!=="primary"&&`fr-btn--${b==="tertiary no outline"?"tertiary-no-outline":b}`,j!=="medium"&&`fr-btn--${(()=>{switch(j){case"small":return"sm";case"large":return"lg"}})()}`,...g===void 0?[]:[g,d!==void 0&&`fr-btn--icon-${_}`]),$!==void 0&&$.className,c);return $!==void 0?React.createElement(ot,Object.assign({},$,{id:(a=o??$.id)!==null&&a!==void 0?a:st,title:h??$.title,className:cx$1($==null?void 0:$.className,dt),style:Object.assign(Object.assign({},$==null?void 0:$.style),nt),ref:e},at),d):React.createElement("button",Object.assign({},et,{id:(s=o??(et==null?void 0:et.id))!==null&&s!==void 0?s:st,className:cx$1(et==null?void 0:et.className,dt),style:Object.assign(Object.assign({},et==null?void 0:et.style),nt),type:it??(et==null?void 0:et.type),title:h??(et==null?void 0:et.title),onClick:_e??(et==null?void 0:et.onClick),disabled:tt??(et==null?void 0:et.disabled),ref:e,value:rt},at),d)}));Button.displayName=symToStr({Button});var __rest$3=function(i,e){var a={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(a[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(a[s[o]]=i[s[o]]);return a};const Modal=reactExports.memo(reactExports.forwardRef((i,e)=>{const{className:a,id:s,title:o,children:c,concealingBackdrop:d=!0,topAnchor:h=!1,iconId:g,buttons:_,size:b="medium",style:j}=i;__rest$3(i,["className","id","title","children","concealingBackdrop","topAnchor","iconId","buttons","size","style"]),assert$1();const $=_===void 0?void 0:_ instanceof Array?_:[_],{t:_e}=useTranslation$4(),et=`fr-modal-title-${s}`;return React.createElement("dialog",{"aria-labelledby":et,role:"dialog",id:s,className:cx$1(fr.cx("fr-modal",h&&"fr-modal--top"),a),style:j,ref:e,"data-fr-concealing-backdrop":d},React.createElement("div",{className:fr.cx("fr-container","fr-container--fluid","fr-container-md")},React.createElement("div",{className:fr.cx("fr-grid-row","fr-grid-row--center")},React.createElement("div",{className:(()=>{switch(b){case"large":return fr.cx("fr-col-12","fr-col-md-10","fr-col-lg-8");case"small":return fr.cx("fr-col-12","fr-col-md-6","fr-col-lg-4");case"medium":return fr.cx("fr-col-12","fr-col-md-8","fr-col-lg-6")}})()},React.createElement("div",{className:fr.cx("fr-modal__body")},React.createElement("div",{className:fr.cx("fr-modal__header")},React.createElement("button",{className:fr.cx("fr-btn--close","fr-btn"),title:_e("close"),"aria-controls":s,type:"button"},_e("close"))),React.createElement("div",{className:fr.cx("fr-modal__content")},React.createElement("h1",{id:et,className:fr.cx("fr-modal__title")},g!==void 0&&React.createElement("span",{className:fr.cx(g,"fr-fi--lg"),"aria-hidden":!0}),o),c),$!==void 0&&React.createElement("div",{className:"fr-modal__footer"},React.createElement("ul",{className:fr.cx("fr-btns-group","fr-btns-group--right","fr-btns-group--inline-reverse","fr-btns-group--inline-lg","fr-btns-group--icon-left")},[...$].reverse().map((tt,it)=>{var nt,{doClosesModal:rt=!0}=tt,at=__rest$3(tt,["doClosesModal"]);return React.createElement("li",{key:it},React.createElement(Button,Object.assign({},at,{priority:(nt=at.priority)!==null&&nt!==void 0?nt:it===0?"primary":"secondary"},rt?"linkProps"in at?{linkProps:Object.assign(Object.assign({},at.linkProps),{"aria-controls":s})}:{nativeButtonProps:Object.assign(Object.assign({},at.nativeButtonProps),{"aria-controls":s})}:{})))}))))))))}));Modal.displayName=symToStr({Modal});const{useTranslation:useTranslation$4,addModalTranslations}=createComponentI18nApi({componentName:symToStr({Modal}),frMessages:{close:"Fermer"}});addModalTranslations({lang:"en",messages:{close:"Close"}});addModalTranslations({lang:"es",messages:{close:"Cerrar"}});function createModal(i){const{isOpenedByDefault:e,id:a}=i,s={id:`${a}-control-button`,"aria-controls":a,"data-fr-opened":e},o=`${a}-hidden-control-button`;function c(g){return React.createElement(React.Fragment,null,React.createElement(Button,{nativeButtonProps:Object.assign(Object.assign({},s),{id:o,type:"button",tabIndex:-1,"aria-hidden":!0}),className:fr.cx("fr-hidden")}," "),React.createElement(Modal,Object.assign({},g,{id:a})))}c.displayName=`${a}-modal`,overwriteReadonlyProp(c,"name",c.displayName);function d(){const g=document.getElementById(a);window.dsfr(g).modal.disclose()}function h(){const g=document.getElementById(a);window.dsfr(g).modal.conceal()}return{Component:c,buttonProps:s,open:d,close:h,isOpenedByDefault:e,id:a}}const modal=createModal({isOpenedByDefault:!1,id:"fr-theme-modal"}),headerFooterDisplayItem={buttonProps:modal.buttonProps,iconId:"fr-icon-theme-fill",text:(()=>{function i(){const{t:e}=useTranslation$3();return React.createElement(React.Fragment,null,e("display settings"))}return React.createElement(i,null)})()};function Display(){const{t:i}=useTranslation$3(),{getInputId:e}=function(){const s=reactExports.useId();function o(c){return`${s}-${c}`}return{getInputId:o}}();return React.createElement(modal.Component,{title:i("display settings"),size:"small"},React.createElement("div",{className:"fr-display"},React.createElement("div",{className:fr.cx("fr-form-group")},React.createElement("fieldset",{className:fr.cx("fr-fieldset")},React.createElement("legend",{className:fr.cx("fr-fieldset__legend","fr-text--regular")},i("pick a theme")),React.createElement("div",{className:fr.cx("fr-fieldset__content")},["light","dark","system"].map(a=>React.createElement("div",{key:a,className:fr.cx("fr-radio-group","fr-radio-rich")},React.createElement("input",{value:a,type:"radio",id:e(a),name:"fr-radios-theme"}),React.createElement("label",{className:"fr-label",htmlFor:e(a)},i(`${a} theme`),a==="system"&&React.createElement("span",{className:fr.cx("fr-hint-text")},i("system theme hint"))),React.createElement("div",{className:fr.cx("fr-radio-rich__img")},React.createElement("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"80px",height:"80px",viewBox:"0 0 80 80"},["artwork-decorative","artwork-minor","artwork-major"].map(s=>React.createElement("use",{key:s,className:fr.cx(`fr-${s}`),xlinkHref:`${getAssetUrl((()=>{switch(a){case"dark":return ArtworkDarkSvg;case"light":return ArtworkLightSvg;case"system":return ArtworkSystemSvg}})())}#${s}`})))))))))))}Display.displayName=symToStr({Display});const{useTranslation:useTranslation$3,addDisplayTranslations}=createComponentI18nApi({componentName:symToStr({Display}),frMessages:{"display settings":"Paramètres d'affichage",close:"Fermer","pick a theme":"Choisissez un thème pour personnaliser l'apparence du site.","light theme":"Thème clair","dark theme":"Thème sombre","system theme":"Système.","system theme hint":"Utilise les paramètres système."}});addDisplayTranslations({lang:"en",messages:{"display settings":"Display settings",close:"Close","pick a theme":"Pick a theme to customize the website's look.","light theme":"Light theme","dark theme":"Dark theme","system theme":"System.","system theme hint":"Use system preference"}});addDisplayTranslations({lang:"es",messages:{"display settings":"Parámetro de visualización",close:"Cerrar","pick a theme":"Elija un tema para personalizar el aspecto del sitio."}});var __rest$2=function(i,e){var a={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(a[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(a[s[o]]=i[s[o]]);return a};const SearchBar=reactExports.memo(reactExports.forwardRef((i,e)=>{const{className:a,id:s,label:o,big:c=!1,classes:d={},style:h,renderInput:g=({className:nt,id:rt,placeholder:at,type:st})=>React.createElement("input",{className:nt,id:rt,placeholder:at,type:st}),clearInputOnSearch:_=!1,allowEmptySearch:b=!1,onButtonClick:j}=i,$=__rest$2(i,["className","id","label","big","classes","style","renderInput","clearInputOnSearch","allowEmptySearch","onButtonClick"]);assert$1();const{t:_e}=useTranslation$2(),et=o??_e("label"),tt=useAnalyticsId({defaultIdPrefix:"fr-search-bar",explicitlyProvidedId:s}),it=`search-${tt}-input`;return React.createElement("div",Object.assign({id:tt,className:cx$1(fr.cx("fr-search-bar",c&&"fr-search-bar--lg"),d.root,a),role:"search",ref:e,style:h},$),React.createElement("label",{className:cx$1(fr.cx("fr-label"),d.label),htmlFor:it},et),g({className:fr.cx("fr-input"),placeholder:et,type:"search",id:it}),React.createElement(SearchButton,{clearInputOnSearch:_,id:`${tt}-button`,searchInputId:it,allowEmptySearch:b,onClick:j}))}));SearchBar.displayName=symToStr({SearchBar});const{useTranslation:useTranslation$2,addSearchBarTranslations}=createComponentI18nApi({componentName:symToStr({SearchBar}),frMessages:{label:"Rechercher"}});addSearchBarTranslations({lang:"en",messages:{label:"Search"}});function observeInputValue(i){const{inputElement:e,callback:a}=i,s=[];{const c=Object.getOwnPropertyDescriptor(e,"value");s.push(()=>{assert$1(c!==void 0),Object.defineProperty(e,"value",c)});const d=Object.getPrototypeOf(e),h=Object.getOwnPropertyDescriptor(d,"value");Object.defineProperty(e,"value",{get:function(...g){return h.get.apply(this,g)},set:function(...g){h.set.apply(this,g);const _=this.value;return a(),_}})}e.addEventListener("input",(()=>{const c=()=>{a()};return s.push(()=>e.removeEventListener("input",c)),c})()),e.addEventListener("keydown",(()=>{const c=d=>{if(d.key==="Escape"){const h=setTimeout(()=>{s.splice(s.indexOf(g),1),a()},50),g=()=>{clearTimeout(h)};s.push(g)}};return s.push(()=>e.removeEventListener("keyup",c)),c})());function o(){s.forEach(c=>c())}return{cleanup:o}}function SearchButton(i){const{searchInputId:e,clearInputOnSearch:a,allowEmptySearch:s,onClick:o,id:c}=i,{t:d}=useTranslation$2(),[,h]=reactExports.useReducer(tt=>tt+1,0),[{focusInputElement:g,getInputValue:_,resetInputValue:b,getIsInputFocused:j},$]=reactExports.useState(()=>({getInputValue:id$1(()=>""),resetInputValue:id$1(()=>{}),focusInputElement:id$1(()=>{}),getIsInputFocused:id$1(()=>!1)})),_e=useConstCallback(()=>{const tt=_();if(!s&&tt===""){g();return}o==null||o(tt),a&&b()}),et=o===void 0;return reactExports.useEffect(()=>{const tt=document.getElementById(e);assert$1(tt!==null,`${e} should be mounted`),assert$1("value"in tt&&typeof tt.value=="string",`${e} is not an HTML input`),assert$1(is()),$({focusInputElement:()=>tt.focus(),getInputValue:()=>tt.value,resetInputValue:()=>tt.value="",getIsInputFocused:()=>document.activeElement===tt});const it=[];{const{cleanup:nt}=observeInputValue({inputElement:tt,callback:()=>h()});it.push(nt)}return et&&(tt.addEventListener("focus",(()=>{const nt=()=>h();return it.push(()=>tt.removeEventListener("focus",nt)),nt})()),tt.addEventListener("blur",(()=>{const nt=()=>h();return it.push(()=>tt.removeEventListener("blur",nt)),nt})())),et||(tt.addEventListener("keydown",(()=>{const nt=rt=>{rt.key==="Enter"&&(_e(),tt.blur())};return it.push(()=>tt.removeEventListener("keydown",nt)),nt})()),tt.addEventListener("keydown",(()=>{const nt=rt=>{rt.key==="Escape"&&tt.blur()};return it.push(()=>tt.removeEventListener("keydown",nt)),nt})())),()=>{it.forEach(nt=>nt())}},[e,et]),o===void 0&&(j()||_()!=="")?null:React.createElement("button",{id:c,className:fr.cx("fr-btn"),title:d("label"),onClick:_e,style:o!==void 0?void 0:{position:"absolute",right:0}},d("label"))}var __rest$1=function(i,e){var a={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(a[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(a[s[o]]=i[s[o]]);return a};const headerMenuModalIdPrefix="header-menu-modal",Header=reactExports.memo(reactExports.forwardRef((i,e)=>{const{className:a,id:s,brandTop:o,serviceTitle:c,serviceTagline:d,homeLinkProps:h,navigation:g=void 0,quickAccessItems:_=[],operatorLogo:b,renderSearchInput:j,clearSearchInputOnSearch:$=!1,allowEmptySearch:_e=!1,onSearchButtonClick:et,classes:tt={},style:it}=i,nt=__rest$1(i,["className","id","brandTop","serviceTitle","serviceTagline","homeLinkProps","navigation","quickAccessItems","operatorLogo","renderSearchInput","clearSearchInputOnSearch","allowEmptySearch","onSearchButtonClick","classes","style"]);assert$1();const rt=s??"fr-header",at=`${headerMenuModalIdPrefix}-${rt}`,st=`${rt}-menu-button`,ot=`${rt}-search-modal`,dt=`${rt}-search-input`,ut=j!==void 0||et!==void 0;setBrandTopAndHomeLinkProps({brandTop:o,homeLinkProps:h});const{t:ct}=useTranslation$1(),{t:ht}=useTranslation$2(),{Link:mt}=getLink(),pt=yt=>React.createElement("ul",{className:fr.cx("fr-btns-group")},_.map((Ct,_t)=>React.createElement("li",{key:_t},(()=>{const St=typeGuard(Ct,Ct instanceof Object&&"text"in Ct)?React.createElement(HeaderQuickAccessItem,{quickAccessItem:Ct}):Ct;return St===null?null:reactExports.cloneElement(St,{id:`${rt}-quick-access-item-${_t}${(()=>{switch(yt){case"mobile":return"-mobile";case"desktop":return""}assert$1()})()}`})})()))),ft=(b==null?void 0:b.linkProps)!==void 0;return React.createElement(React.Fragment,null,React.createElement(Display,null),React.createElement("header",Object.assign({role:"banner",id:rt,className:cx$1(fr.cx("fr-header"),tt.root,a),ref:e,style:it},nt),React.createElement("div",{className:cx$1(fr.cx("fr-header__body"),tt.body)},React.createElement("div",{className:cx$1(fr.cx("fr-container"),tt.container)},React.createElement("div",{className:cx$1(fr.cx("fr-header__body-row"),tt.bodyRow)},React.createElement("div",{className:cx$1(fr.cx("fr-header__brand",!ft&&"fr-enlarge-link"),tt.brand)},React.createElement("div",{className:cx$1(fr.cx("fr-header__brand-top"),tt.brandTop)},React.createElement("div",{className:cx$1(fr.cx("fr-header__logo"),tt.logo)},(()=>{const yt=React.createElement("p",{className:fr.cx("fr-logo")},o);return c!==void 0?yt:React.createElement(mt,Object.assign({},h),yt)})()),b!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-header__operator",ft&&"fr-enlarge-link"),tt.operator)},(()=>{const yt=React.createElement("img",{className:cx$1(fr.cx("fr-responsive-img"),tt.operator),style:(()=>{switch(b.orientation){case"vertical":return{width:"3.5rem"};case"horizontal":return{maxWidth:"9.0625rem"}}})(),src:b.imgUrl,alt:b.alt});return ft?React.createElement(mt,Object.assign({},b.linkProps),yt):yt})()),(_.length>0||g!==void 0||ut)&&React.createElement("div",{className:cx$1(fr.cx("fr-header__navbar"),tt.navbar)},ut&&React.createElement("button",{id:`${rt}-search-button`,className:fr.cx("fr-btn--search","fr-btn"),"data-fr-opened":!1,"aria-controls":ot,title:ht("label")},ht("label")),React.createElement("button",{className:fr.cx("fr-btn--menu","fr-btn"),"data-fr-opened":"false","aria-controls":at,"aria-haspopup":"menu",id:st,title:ct("menu")},ct("menu")))),c!==void 0&&React.createElement("div",{className:cx$1(fr.cx("fr-header__service",ft&&"fr-enlarge-link"),tt.service)},React.createElement(mt,Object.assign({},h),React.createElement("p",{className:cx$1(fr.cx("fr-header__service-title"),tt.serviceTitle)},c)),d!==void 0&&React.createElement("p",{className:cx$1(fr.cx("fr-header__service-tagline"),tt.serviceTagline)},d))),(_.length>0||ut)&&React.createElement("div",{className:fr.cx("fr-header__tools")},_.length>0&&React.createElement("div",{className:cx$1(fr.cx("fr-header__tools-links"),tt.toolsLinks)},pt("desktop")),ut&&React.createElement("div",{className:fr.cx("fr-header__search","fr-modal"),id:ot,"aria-labelledby":`${rt}-search-bar-button`},React.createElement("div",{className:fr.cx("fr-container","fr-container-lg--fluid")},React.createElement("button",{id:`${rt}-search-button`,className:fr.cx("fr-btn--close","fr-btn"),"aria-controls":ot,title:ct("close")},ct("close")),React.createElement("div",{className:fr.cx("fr-search-bar"),role:"search"},React.createElement("label",{className:fr.cx("fr-label"),htmlFor:dt},ht("label")),(j??(({className:yt,id:Ct,placeholder:_t,type:St})=>React.createElement("input",{className:yt,id:Ct,placeholder:_t,type:St})))({className:fr.cx("fr-input"),id:dt,placeholder:ht("label"),type:"search"}),React.createElement(SearchButton,{id:`${rt}-search-bar-button`,searchInputId:dt,onClick:et,clearInputOnSearch:$,allowEmptySearch:_e})))))))),(g!==void 0||_.length!==0)&&React.createElement("div",{className:cx$1(fr.cx("fr-header__menu","fr-modal"),tt.menu),id:at,"aria-labelledby":st},React.createElement("div",{className:fr.cx("fr-container")},React.createElement("button",{id:`${rt}-mobile-overlay-button-close`,className:fr.cx("fr-btn--close","fr-btn"),"aria-controls":at,title:ct("close")},ct("close")),React.createElement("div",{className:cx$1(fr.cx("fr-header__menu-links"),tt.menuLinks)},pt("mobile")),g!==void 0&&(g instanceof Array?React.createElement(MainNavigation,{id:`${rt}-main-navigation`,items:g}):g)))))}));Header.displayName=symToStr({Header});const{useTranslation:useTranslation$1,addHeaderTranslations}=createComponentI18nApi({componentName:symToStr({Header}),frMessages:{menu:"Menu",close:"Fermer"}});addHeaderTranslations({lang:"en",messages:{close:"Close"}});function HeaderQuickAccessItem(i){const{className:e,quickAccessItem:a,id:s}=i,{Link:o}=getLink();return a.linkProps!==void 0?React.createElement(o,Object.assign({},a.linkProps,{className:cx$1(fr.cx("fr-btn",a.iconId),a.linkProps.className,e),id:s}),a.text):React.createElement("button",Object.assign({},a.buttonProps,{className:cx$1(fr.cx("fr-btn",a.iconId),a.buttonProps.className,e),id:s}),a.text)}function noop$2(){}function createSyncStoragePersister({storage:i,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:a=1e3,serialize:s=JSON.stringify,deserialize:o=JSON.parse,retry:c}){if(i){const d=h=>{try{i.setItem(e,s(h));return}catch(g){return g}};return{persistClient:throttle$1(h=>{let g=h,_=d(g),b=0;for(;_&&g;)b++,g=c==null?void 0:c({persistedClient:g,error:_,errorCount:b}),g&&(_=d(g))},a),restoreClient:()=>{const h=i.getItem(e);if(h)return o(h)},removeClient:()=>{i.removeItem(e)}}}return{persistClient:noop$2,restoreClient:()=>{},removeClient:noop$2}}function throttle$1(i,e=100){let a=null,s;return function(...o){s=o,a===null&&(a=setTimeout(()=>{i(...s),a=null},e))}}var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(i){return this.listeners.add(i),this.onSubscribe(),()=>{this.listeners.delete(i),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$1(){}function functionalUpdate(i,e){return typeof i=="function"?i(e):i}function isValidTimeout(i){return typeof i=="number"&&i>=0&&i!==1/0}function timeUntilStale(i,e){return Math.max(i+(e||0)-Date.now(),0)}function resolveStaleTime(i,e){return typeof i=="function"?i(e):i}function resolveEnabled(i,e){return typeof i=="function"?i(e):i}function matchQuery(i,e){const{type:a="all",exact:s,fetchStatus:o,predicate:c,queryKey:d,stale:h}=i;if(d){if(s){if(e.queryHash!==hashQueryKeyByOptions(d,e.options))return!1}else if(!partialMatchKey(e.queryKey,d))return!1}if(a!=="all"){const g=e.isActive();if(a==="active"&&!g||a==="inactive"&&g)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||o&&o!==e.state.fetchStatus||c&&!c(e))}function matchMutation(i,e){const{exact:a,status:s,predicate:o,mutationKey:c}=i;if(c){if(!e.options.mutationKey)return!1;if(a){if(hashKey(e.options.mutationKey)!==hashKey(c))return!1}else if(!partialMatchKey(e.options.mutationKey,c))return!1}return!(s&&e.state.status!==s||o&&!o(e))}function hashQueryKeyByOptions(i,e){return((e==null?void 0:e.queryKeyHashFn)||hashKey)(i)}function hashKey(i){return JSON.stringify(i,(e,a)=>isPlainObject(a)?Object.keys(a).sort().reduce((s,o)=>(s[o]=a[o],s),{}):a)}function partialMatchKey(i,e){return i===e?!0:typeof i!=typeof e?!1:i&&e&&typeof i=="object"&&typeof e=="object"?!Object.keys(e).some(a=>!partialMatchKey(i[a],e[a])):!1}function replaceEqualDeep(i,e){if(i===e)return i;const a=isPlainArray(i)&&isPlainArray(e);if(a||isPlainObject(i)&&isPlainObject(e)){const s=a?i:Object.keys(i),o=s.length,c=a?e:Object.keys(e),d=c.length,h=a?[]:{};let g=0;for(let _=0;_<d;_++){const b=a?_:c[_];(!a&&s.includes(b)||a)&&i[b]===void 0&&e[b]===void 0?(h[b]=void 0,g++):(h[b]=replaceEqualDeep(i[b],e[b]),h[b]===i[b]&&i[b]!==void 0&&g++)}return o===d&&g===o?i:h}return e}function shallowEqualObjects(i,e){if(!e||Object.keys(i).length!==Object.keys(e).length)return!1;for(const a in i)if(i[a]!==e[a])return!1;return!0}function isPlainArray(i){return Array.isArray(i)&&i.length===Object.keys(i).length}function isPlainObject(i){if(!hasObjectPrototype(i))return!1;const e=i.constructor;if(e===void 0)return!0;const a=e.prototype;return!(!hasObjectPrototype(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(i)!==Object.prototype)}function hasObjectPrototype(i){return Object.prototype.toString.call(i)==="[object Object]"}function sleep(i){return new Promise(e=>{setTimeout(e,i)})}function replaceData(i,e,a){return typeof a.structuralSharing=="function"?a.structuralSharing(i,e):a.structuralSharing!==!1?replaceEqualDeep(i,e):e}function addToEnd(i,e,a=0){const s=[...i,e];return a&&s.length>a?s.slice(1):s}function addToStart(i,e,a=0){const s=[e,...i];return a&&s.length>a?s.slice(0,-1):s}var skipToken=Symbol();function ensureQueryFn(i,e){return!i.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!i.queryFn||i.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${i.queryHash}'`)):i.queryFn}var tr,Wn,ur,Wr,FocusManager=(Wr=class extends Subscribable{constructor(){super();Ut(this,tr);Ut(this,Wn);Ut(this,ur);Dt(this,ur,e=>{if(!isServer&&window.addEventListener){const a=()=>e();return window.addEventListener("visibilitychange",a,!1),()=>{window.removeEventListener("visibilitychange",a)}}})}onSubscribe(){vt(this,Wn)||this.setEventListener(vt(this,ur))}onUnsubscribe(){var e;this.hasListeners()||((e=vt(this,Wn))==null||e.call(this),Dt(this,Wn,void 0))}setEventListener(e){var a;Dt(this,ur,e),(a=vt(this,Wn))==null||a.call(this),Dt(this,Wn,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){vt(this,tr)!==e&&(Dt(this,tr,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(a=>{a(e)})}isFocused(){var e;return typeof vt(this,tr)=="boolean"?vt(this,tr):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},tr=new WeakMap,Wn=new WeakMap,ur=new WeakMap,Wr),focusManager=new FocusManager,cr,Vn,dr,Vr,OnlineManager=(Vr=class extends Subscribable{constructor(){super();Ut(this,cr,!0);Ut(this,Vn);Ut(this,dr);Dt(this,dr,e=>{if(!isServer&&window.addEventListener){const a=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",a,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",s)}}})}onSubscribe(){vt(this,Vn)||this.setEventListener(vt(this,dr))}onUnsubscribe(){var e;this.hasListeners()||((e=vt(this,Vn))==null||e.call(this),Dt(this,Vn,void 0))}setEventListener(e){var a;Dt(this,dr,e),(a=vt(this,Vn))==null||a.call(this),Dt(this,Vn,e(this.setOnline.bind(this)))}setOnline(e){vt(this,cr)!==e&&(Dt(this,cr,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return vt(this,cr)}},cr=new WeakMap,Vn=new WeakMap,dr=new WeakMap,Vr),onlineManager=new OnlineManager;function pendingThenable(){let i,e;const a=new Promise((o,c)=>{i=o,e=c});a.status="pending",a.catch(()=>{});function s(o){Object.assign(a,o),delete a.resolve,delete a.reject}return a.resolve=o=>{s({status:"fulfilled",value:o}),i(o)},a.reject=o=>{s({status:"rejected",reason:o}),e(o)},a}function defaultRetryDelay(i){return Math.min(1e3*2**i,3e4)}function canFetch(i){return(i??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(i){super("CancelledError"),this.revert=i==null?void 0:i.revert,this.silent=i==null?void 0:i.silent}};function isCancelledError(i){return i instanceof CancelledError}function createRetryer(i){let e=!1,a=0,s=!1,o;const c=pendingThenable(),d=tt=>{var it;s||($(new CancelledError(tt)),(it=i.abort)==null||it.call(i))},h=()=>{e=!0},g=()=>{e=!1},_=()=>focusManager.isFocused()&&(i.networkMode==="always"||onlineManager.isOnline())&&i.canRun(),b=()=>canFetch(i.networkMode)&&i.canRun(),j=tt=>{var it;s||(s=!0,(it=i.onSuccess)==null||it.call(i,tt),o==null||o(),c.resolve(tt))},$=tt=>{var it;s||(s=!0,(it=i.onError)==null||it.call(i,tt),o==null||o(),c.reject(tt))},_e=()=>new Promise(tt=>{var it;o=nt=>{(s||_())&&tt(nt)},(it=i.onPause)==null||it.call(i)}).then(()=>{var tt;o=void 0,s||(tt=i.onContinue)==null||tt.call(i)}),et=()=>{if(s)return;let tt;const it=a===0?i.initialPromise:void 0;try{tt=it??i.fn()}catch(nt){tt=Promise.reject(nt)}Promise.resolve(tt).then(j).catch(nt=>{var dt;if(s)return;const rt=i.retry??(isServer?0:3),at=i.retryDelay??defaultRetryDelay,st=typeof at=="function"?at(a,nt):at,ot=rt===!0||typeof rt=="number"&&a<rt||typeof rt=="function"&&rt(a,nt);if(e||!ot){$(nt);return}a++,(dt=i.onFail)==null||dt.call(i,a,nt),sleep(st).then(()=>_()?void 0:_e()).then(()=>{e?$(nt):et()})})};return{promise:c,cancel:d,continue:()=>(o==null||o(),c),cancelRetry:h,continueRetry:g,canStart:b,start:()=>(b()?et():_e().then(et),c)}}function createNotifyManager(){let i=[],e=0,a=h=>{h()},s=h=>{h()},o=h=>setTimeout(h,0);const c=h=>{e?i.push(h):o(()=>{a(h)})},d=()=>{const h=i;i=[],h.length&&o(()=>{s(()=>{h.forEach(g=>{a(g)})})})};return{batch:h=>{let g;e++;try{g=h()}finally{e--,e||d()}return g},batchCalls:h=>(...g)=>{c(()=>{h(...g)})},schedule:c,setNotifyFunction:h=>{a=h},setBatchNotifyFunction:h=>{s=h},setScheduler:h=>{o=h}}}var notifyManager=createNotifyManager(),nr,Hr,Removable=(Hr=class{constructor(){Ut(this,nr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&Dt(this,nr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(i){this.gcTime=Math.max(this.gcTime||0,i??(isServer?1/0:5*60*1e3))}clearGcTimeout(){vt(this,nr)&&(clearTimeout(vt(this,nr)),Dt(this,nr,void 0))}},nr=new WeakMap,Hr),hr,gr,Mn,fn,br,rr,On,$n,qr,Query=(qr=class extends Removable{constructor(e){super();Ut(this,On);Ut(this,hr);Ut(this,gr);Ut(this,Mn);Ut(this,fn);Ut(this,br);Ut(this,rr);Dt(this,rr,!1),Dt(this,br,e.defaultOptions),this.setOptions(e.options),this.observers=[],Dt(this,Mn,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Dt(this,hr,getDefaultState$1(this.options)),this.state=e.state??vt(this,hr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=vt(this,fn))==null?void 0:e.promise}setOptions(e){this.options={...vt(this,br),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&vt(this,Mn).remove(this)}setData(e,a){const s=replaceData(this.state.data,e,this.options);return Bt(this,On,$n).call(this,{data:s,type:"success",dataUpdatedAt:a==null?void 0:a.updatedAt,manual:a==null?void 0:a.manual}),s}setState(e,a){Bt(this,On,$n).call(this,{type:"setState",state:e,setStateOptions:a})}cancel(e){var s,o;const a=(s=vt(this,fn))==null?void 0:s.promise;return(o=vt(this,fn))==null||o.cancel(e),a?a.then(noop$1).catch(noop$1):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(vt(this,hr))}isActive(){return this.observers.some(e=>resolveEnabled(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,e)}onFocus(){var a;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(a=vt(this,fn))==null||a.continue()}onOnline(){var a;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(a=vt(this,fn))==null||a.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),vt(this,Mn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(a=>a!==e),this.observers.length||(vt(this,fn)&&(vt(this,rr)?vt(this,fn).cancel({revert:!0}):vt(this,fn).cancelRetry()),this.scheduleGc()),vt(this,Mn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Bt(this,On,$n).call(this,{type:"invalidate"})}fetch(e,a){var g,_,b;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(a!=null&&a.cancelRefetch))this.cancel({silent:!0});else if(vt(this,fn))return vt(this,fn).continueRetry(),vt(this,fn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const j=this.observers.find($=>$.options.queryFn);j&&this.setOptions(j.options)}const s=new AbortController,o=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(Dt(this,rr,!0),s.signal)})},c=()=>{const j=ensureQueryFn(this.options,a),$={queryKey:this.queryKey,meta:this.meta};return o($),Dt(this,rr,!1),this.options.persister?this.options.persister(j,$,this):j($)},d={fetchOptions:a,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:c};o(d),(g=this.options.behavior)==null||g.onFetch(d,this),Dt(this,gr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((_=d.fetchOptions)==null?void 0:_.meta))&&Bt(this,On,$n).call(this,{type:"fetch",meta:(b=d.fetchOptions)==null?void 0:b.meta});const h=j=>{var $,_e,et,tt;isCancelledError(j)&&j.silent||Bt(this,On,$n).call(this,{type:"error",error:j}),isCancelledError(j)||((_e=($=vt(this,Mn).config).onError)==null||_e.call($,j,this),(tt=(et=vt(this,Mn).config).onSettled)==null||tt.call(et,this.state.data,j,this)),this.scheduleGc()};return Dt(this,fn,createRetryer({initialPromise:a==null?void 0:a.initialPromise,fn:d.fetchFn,abort:s.abort.bind(s),onSuccess:j=>{var $,_e,et,tt;if(j===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(j)}catch(it){h(it);return}(_e=($=vt(this,Mn).config).onSuccess)==null||_e.call($,j,this),(tt=(et=vt(this,Mn).config).onSettled)==null||tt.call(et,j,this.state.error,this),this.scheduleGc()},onError:h,onFail:(j,$)=>{Bt(this,On,$n).call(this,{type:"failed",failureCount:j,error:$})},onPause:()=>{Bt(this,On,$n).call(this,{type:"pause"})},onContinue:()=>{Bt(this,On,$n).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0})),vt(this,fn).start()}},hr=new WeakMap,gr=new WeakMap,Mn=new WeakMap,fn=new WeakMap,br=new WeakMap,rr=new WeakMap,On=new WeakSet,$n=function(e){const a=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...fetchState(s.data,this.options),fetchMeta:e.meta??null};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return isCancelledError(o)&&o.revert&&vt(this,gr)?{...vt(this,gr),fetchStatus:"idle"}:{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=a(this.state),notifyManager.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),vt(this,Mn).notify({query:this,type:"updated",action:e})})},qr);function fetchState(i,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(e.networkMode)?"fetching":"paused",...i===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(i){const e=typeof i.initialData=="function"?i.initialData():i.initialData,a=e!==void 0,s=a?typeof i.initialDataUpdatedAt=="function"?i.initialDataUpdatedAt():i.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:a?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var Gn,Xr,QueryCache=(Xr=class extends Subscribable{constructor(e={}){super();Ut(this,Gn);this.config=e,Dt(this,Gn,new Map)}build(e,a,s){const o=a.queryKey,c=a.queryHash??hashQueryKeyByOptions(o,a);let d=this.get(c);return d||(d=new Query({cache:this,queryKey:o,queryHash:c,options:e.defaultQueryOptions(a),state:s,defaultOptions:e.getQueryDefaults(o)}),this.add(d)),d}add(e){vt(this,Gn).has(e.queryHash)||(vt(this,Gn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const a=vt(this,Gn).get(e.queryHash);a&&(e.destroy(),a===e&&vt(this,Gn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return vt(this,Gn).get(e)}getAll(){return[...vt(this,Gn).values()]}find(e){const a={exact:!0,...e};return this.getAll().find(s=>matchQuery(a,s))}findAll(e={}){const a=this.getAll();return Object.keys(e).length>0?a.filter(s=>matchQuery(e,s)):a}notify(e){notifyManager.batch(()=>{this.listeners.forEach(a=>{a(e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Gn=new WeakMap,Xr),Fn,pn,ir,Nn,Bn,Yr,Mutation=(Yr=class extends Removable{constructor(e){super();Ut(this,Nn);Ut(this,Fn);Ut(this,pn);Ut(this,ir);this.mutationId=e.mutationId,Dt(this,pn,e.mutationCache),Dt(this,Fn,[]),this.state=e.state||getDefaultState(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){vt(this,Fn).includes(e)||(vt(this,Fn).push(e),this.clearGcTimeout(),vt(this,pn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Dt(this,Fn,vt(this,Fn).filter(a=>a!==e)),this.scheduleGc(),vt(this,pn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){vt(this,Fn).length||(this.state.status==="pending"?this.scheduleGc():vt(this,pn).remove(this))}continue(){var e;return((e=vt(this,ir))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,c,d,h,g,_,b,j,$,_e,et,tt,it,nt,rt,at,st,ot,dt,ut;Dt(this,ir,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(ct,ht)=>{Bt(this,Nn,Bn).call(this,{type:"failed",failureCount:ct,error:ht})},onPause:()=>{Bt(this,Nn,Bn).call(this,{type:"pause"})},onContinue:()=>{Bt(this,Nn,Bn).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>vt(this,pn).canRun(this)}));const a=this.state.status==="pending",s=!vt(this,ir).canStart();try{if(!a){Bt(this,Nn,Bn).call(this,{type:"pending",variables:e,isPaused:s}),await((c=(o=vt(this,pn).config).onMutate)==null?void 0:c.call(o,e,this));const ht=await((h=(d=this.options).onMutate)==null?void 0:h.call(d,e));ht!==this.state.context&&Bt(this,Nn,Bn).call(this,{type:"pending",context:ht,variables:e,isPaused:s})}const ct=await vt(this,ir).start();return await((_=(g=vt(this,pn).config).onSuccess)==null?void 0:_.call(g,ct,e,this.state.context,this)),await((j=(b=this.options).onSuccess)==null?void 0:j.call(b,ct,e,this.state.context)),await((_e=($=vt(this,pn).config).onSettled)==null?void 0:_e.call($,ct,null,this.state.variables,this.state.context,this)),await((tt=(et=this.options).onSettled)==null?void 0:tt.call(et,ct,null,e,this.state.context)),Bt(this,Nn,Bn).call(this,{type:"success",data:ct}),ct}catch(ct){try{throw await((nt=(it=vt(this,pn).config).onError)==null?void 0:nt.call(it,ct,e,this.state.context,this)),await((at=(rt=this.options).onError)==null?void 0:at.call(rt,ct,e,this.state.context)),await((ot=(st=vt(this,pn).config).onSettled)==null?void 0:ot.call(st,void 0,ct,this.state.variables,this.state.context,this)),await((ut=(dt=this.options).onSettled)==null?void 0:ut.call(dt,void 0,ct,e,this.state.context)),ct}finally{Bt(this,Nn,Bn).call(this,{type:"error",error:ct})}}finally{vt(this,pn).runNext(this)}}},Fn=new WeakMap,pn=new WeakMap,ir=new WeakMap,Nn=new WeakSet,Bn=function(e){const a=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=a(this.state),notifyManager.batch(()=>{vt(this,Fn).forEach(s=>{s.onMutationUpdate(e)}),vt(this,pn).notify({mutation:this,type:"updated",action:e})})},Yr);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xn,wr,Kr,MutationCache=(Kr=class extends Subscribable{constructor(e={}){super();Ut(this,xn);Ut(this,wr);this.config=e,Dt(this,xn,new Map),Dt(this,wr,Date.now())}build(e,a,s){const o=new Mutation({mutationCache:this,mutationId:++Lr(this,wr)._,options:e.defaultMutationOptions(a),state:s});return this.add(o),o}add(e){const a=scopeFor(e),s=vt(this,xn).get(a)??[];s.push(e),vt(this,xn).set(a,s),this.notify({type:"added",mutation:e})}remove(e){var s;const a=scopeFor(e);if(vt(this,xn).has(a)){const o=(s=vt(this,xn).get(a))==null?void 0:s.filter(c=>c!==e);o&&(o.length===0?vt(this,xn).delete(a):vt(this,xn).set(a,o))}this.notify({type:"removed",mutation:e})}canRun(e){var s;const a=(s=vt(this,xn).get(scopeFor(e)))==null?void 0:s.find(o=>o.state.status==="pending");return!a||a===e}runNext(e){var s;const a=(s=vt(this,xn).get(scopeFor(e)))==null?void 0:s.find(o=>o!==e&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...vt(this,xn).values()].flat()}find(e){const a={exact:!0,...e};return this.getAll().find(s=>matchMutation(a,s))}findAll(e={}){return this.getAll().filter(a=>matchMutation(e,a))}notify(e){notifyManager.batch(()=>{this.listeners.forEach(a=>{a(e)})})}resumePausedMutations(){const e=this.getAll().filter(a=>a.state.isPaused);return notifyManager.batch(()=>Promise.all(e.map(a=>a.continue().catch(noop$1))))}},xn=new WeakMap,wr=new WeakMap,Kr);function scopeFor(i){var e;return((e=i.options.scope)==null?void 0:e.id)??String(i.mutationId)}function infiniteQueryBehavior(i){return{onFetch:(e,a)=>{var b,j,$,_e,et;const s=e.options,o=($=(j=(b=e.fetchOptions)==null?void 0:b.meta)==null?void 0:j.fetchMore)==null?void 0:$.direction,c=((_e=e.state.data)==null?void 0:_e.pages)||[],d=((et=e.state.data)==null?void 0:et.pageParams)||[];let h={pages:[],pageParams:[]},g=0;const _=async()=>{let tt=!1;const it=at=>{Object.defineProperty(at,"signal",{enumerable:!0,get:()=>(e.signal.aborted?tt=!0:e.signal.addEventListener("abort",()=>{tt=!0}),e.signal)})},nt=ensureQueryFn(e.options,e.fetchOptions),rt=async(at,st,ot)=>{if(tt)return Promise.reject();if(st==null&&at.pages.length)return Promise.resolve(at);const dt={queryKey:e.queryKey,pageParam:st,direction:ot?"backward":"forward",meta:e.options.meta};it(dt);const ut=await nt(dt),{maxPages:ct}=e.options,ht=ot?addToStart:addToEnd;return{pages:ht(at.pages,ut,ct),pageParams:ht(at.pageParams,st,ct)}};if(o&&c.length){const at=o==="backward",st=at?getPreviousPageParam:getNextPageParam,ot={pages:c,pageParams:d},dt=st(s,ot);h=await rt(ot,dt,at)}else{const at=i??c.length;do{const st=g===0?d[0]??s.initialPageParam:getNextPageParam(s,h);if(g>0&&st==null)break;h=await rt(h,st),g++}while(g<at)}return h};e.options.persister?e.fetchFn=()=>{var tt,it;return(it=(tt=e.options).persister)==null?void 0:it.call(tt,_,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},a)}:e.fetchFn=_}}}function getNextPageParam(i,{pages:e,pageParams:a}){const s=e.length-1;return e.length>0?i.getNextPageParam(e[s],e,a[s],a):void 0}function getPreviousPageParam(i,{pages:e,pageParams:a}){var s;return e.length>0?(s=i.getPreviousPageParam)==null?void 0:s.call(i,e[0],e,a[0],a):void 0}var an,Hn,qn,pr,mr,Kn,vr,yr,Zr,QueryClient=(Zr=class{constructor(i={}){Ut(this,an);Ut(this,Hn);Ut(this,qn);Ut(this,pr);Ut(this,mr);Ut(this,Kn);Ut(this,vr);Ut(this,yr);Dt(this,an,i.queryCache||new QueryCache),Dt(this,Hn,i.mutationCache||new MutationCache),Dt(this,qn,i.defaultOptions||{}),Dt(this,pr,new Map),Dt(this,mr,new Map),Dt(this,Kn,0)}mount(){Lr(this,Kn)._++,vt(this,Kn)===1&&(Dt(this,vr,focusManager.subscribe(async i=>{i&&(await this.resumePausedMutations(),vt(this,an).onFocus())})),Dt(this,yr,onlineManager.subscribe(async i=>{i&&(await this.resumePausedMutations(),vt(this,an).onOnline())})))}unmount(){var i,e;Lr(this,Kn)._--,vt(this,Kn)===0&&((i=vt(this,vr))==null||i.call(this),Dt(this,vr,void 0),(e=vt(this,yr))==null||e.call(this),Dt(this,yr,void 0))}isFetching(i){return vt(this,an).findAll({...i,fetchStatus:"fetching"}).length}isMutating(i){return vt(this,Hn).findAll({...i,status:"pending"}).length}getQueryData(i){var a;const e=this.defaultQueryOptions({queryKey:i});return(a=vt(this,an).get(e.queryHash))==null?void 0:a.state.data}ensureQueryData(i){const e=this.getQueryData(i.queryKey);if(e===void 0)return this.fetchQuery(i);{const a=this.defaultQueryOptions(i),s=vt(this,an).build(this,a);return i.revalidateIfStale&&s.isStaleByTime(resolveStaleTime(a.staleTime,s))&&this.prefetchQuery(a),Promise.resolve(e)}}getQueriesData(i){return vt(this,an).findAll(i).map(({queryKey:e,state:a})=>{const s=a.data;return[e,s]})}setQueryData(i,e,a){const s=this.defaultQueryOptions({queryKey:i}),o=vt(this,an).get(s.queryHash),c=o==null?void 0:o.state.data,d=functionalUpdate(e,c);if(d!==void 0)return vt(this,an).build(this,s).setData(d,{...a,manual:!0})}setQueriesData(i,e,a){return notifyManager.batch(()=>vt(this,an).findAll(i).map(({queryKey:s})=>[s,this.setQueryData(s,e,a)]))}getQueryState(i){var a;const e=this.defaultQueryOptions({queryKey:i});return(a=vt(this,an).get(e.queryHash))==null?void 0:a.state}removeQueries(i){const e=vt(this,an);notifyManager.batch(()=>{e.findAll(i).forEach(a=>{e.remove(a)})})}resetQueries(i,e){const a=vt(this,an),s={type:"active",...i};return notifyManager.batch(()=>(a.findAll(i).forEach(o=>{o.reset()}),this.refetchQueries(s,e)))}cancelQueries(i={},e={}){const a={revert:!0,...e},s=notifyManager.batch(()=>vt(this,an).findAll(i).map(o=>o.cancel(a)));return Promise.all(s).then(noop$1).catch(noop$1)}invalidateQueries(i={},e={}){return notifyManager.batch(()=>{if(vt(this,an).findAll(i).forEach(s=>{s.invalidate()}),i.refetchType==="none")return Promise.resolve();const a={...i,type:i.refetchType??i.type??"active"};return this.refetchQueries(a,e)})}refetchQueries(i={},e){const a={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},s=notifyManager.batch(()=>vt(this,an).findAll(i).filter(o=>!o.isDisabled()).map(o=>{let c=o.fetch(void 0,a);return a.throwOnError||(c=c.catch(noop$1)),o.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(s).then(noop$1)}fetchQuery(i){const e=this.defaultQueryOptions(i);e.retry===void 0&&(e.retry=!1);const a=vt(this,an).build(this,e);return a.isStaleByTime(resolveStaleTime(e.staleTime,a))?a.fetch(e):Promise.resolve(a.state.data)}prefetchQuery(i){return this.fetchQuery(i).then(noop$1).catch(noop$1)}fetchInfiniteQuery(i){return i.behavior=infiniteQueryBehavior(i.pages),this.fetchQuery(i)}prefetchInfiniteQuery(i){return this.fetchInfiniteQuery(i).then(noop$1).catch(noop$1)}ensureInfiniteQueryData(i){return i.behavior=infiniteQueryBehavior(i.pages),this.ensureQueryData(i)}resumePausedMutations(){return onlineManager.isOnline()?vt(this,Hn).resumePausedMutations():Promise.resolve()}getQueryCache(){return vt(this,an)}getMutationCache(){return vt(this,Hn)}getDefaultOptions(){return vt(this,qn)}setDefaultOptions(i){Dt(this,qn,i)}setQueryDefaults(i,e){vt(this,pr).set(hashKey(i),{queryKey:i,defaultOptions:e})}getQueryDefaults(i){const e=[...vt(this,pr).values()];let a={};return e.forEach(s=>{partialMatchKey(i,s.queryKey)&&(a={...a,...s.defaultOptions})}),a}setMutationDefaults(i,e){vt(this,mr).set(hashKey(i),{mutationKey:i,defaultOptions:e})}getMutationDefaults(i){const e=[...vt(this,mr).values()];let a={};return e.forEach(s=>{partialMatchKey(i,s.mutationKey)&&(a={...a,...s.defaultOptions})}),a}defaultQueryOptions(i){if(i._defaulted)return i;const e={...vt(this,qn).queries,...this.getQueryDefaults(i.queryKey),...i,_defaulted:!0};return e.queryHash||(e.queryHash=hashQueryKeyByOptions(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===skipToken&&(e.enabled=!1),e}defaultMutationOptions(i){return i!=null&&i._defaulted?i:{...vt(this,qn).mutations,...(i==null?void 0:i.mutationKey)&&this.getMutationDefaults(i.mutationKey),...i,_defaulted:!0}}clear(){vt(this,an).clear(),vt(this,Hn).clear()}},an=new WeakMap,Hn=new WeakMap,qn=new WeakMap,pr=new WeakMap,mr=new WeakMap,Kn=new WeakMap,vr=new WeakMap,yr=new WeakMap,Zr),Cn,Ht,xr,mn,ar,_r,Qn,jn,Tr,Cr,Ir,sr,or,Jn,Er,Xt,Sr,Dr,Gr,Fr,Nr,jr,Ur,zr,Jr,Qr,QueryObserver=(Qr=class extends Subscribable{constructor(e,a){super();Ut(this,Xt);Ut(this,Cn);Ut(this,Ht);Ut(this,xr);Ut(this,mn);Ut(this,ar);Ut(this,_r);Ut(this,Qn);Ut(this,jn);Ut(this,Tr);Ut(this,Cr);Ut(this,Ir);Ut(this,sr);Ut(this,or);Ut(this,Jn);Ut(this,Er,new Set);this.options=a,Dt(this,Cn,e),Dt(this,jn,null),Dt(this,Qn,pendingThenable()),this.options.experimental_prefetchInRender||vt(this,Qn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(a)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(vt(this,Ht).addObserver(this),shouldFetchOnMount(vt(this,Ht),this.options)?Bt(this,Xt,Sr).call(this):this.updateResult(),Bt(this,Xt,Nr).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(vt(this,Ht),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(vt(this,Ht),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Bt(this,Xt,jr).call(this),Bt(this,Xt,Ur).call(this),vt(this,Ht).removeObserver(this)}setOptions(e,a){const s=this.options,o=vt(this,Ht);if(this.options=vt(this,Cn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof resolveEnabled(this.options.enabled,vt(this,Ht))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Bt(this,Xt,zr).call(this),vt(this,Ht).setOptions(this.options),s._defaulted&&!shallowEqualObjects(this.options,s)&&vt(this,Cn).getQueryCache().notify({type:"observerOptionsUpdated",query:vt(this,Ht),observer:this});const c=this.hasListeners();c&&shouldFetchOptionally(vt(this,Ht),o,this.options,s)&&Bt(this,Xt,Sr).call(this),this.updateResult(a),c&&(vt(this,Ht)!==o||resolveEnabled(this.options.enabled,vt(this,Ht))!==resolveEnabled(s.enabled,vt(this,Ht))||resolveStaleTime(this.options.staleTime,vt(this,Ht))!==resolveStaleTime(s.staleTime,vt(this,Ht)))&&Bt(this,Xt,Dr).call(this);const d=Bt(this,Xt,Gr).call(this);c&&(vt(this,Ht)!==o||resolveEnabled(this.options.enabled,vt(this,Ht))!==resolveEnabled(s.enabled,vt(this,Ht))||d!==vt(this,Jn))&&Bt(this,Xt,Fr).call(this,d)}getOptimisticResult(e){const a=vt(this,Cn).getQueryCache().build(vt(this,Cn),e),s=this.createResult(a,e);return shouldAssignObserverCurrentProperties(this,s)&&(Dt(this,mn,s),Dt(this,_r,this.options),Dt(this,ar,vt(this,Ht).state)),s}getCurrentResult(){return vt(this,mn)}trackResult(e,a){const s={};return Object.keys(e).forEach(o=>{Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(o),a==null||a(o),e[o])})}),s}trackProp(e){vt(this,Er).add(e)}getCurrentQuery(){return vt(this,Ht)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const a=vt(this,Cn).defaultQueryOptions(e),s=vt(this,Cn).getQueryCache().build(vt(this,Cn),a);return s.fetch().then(()=>this.createResult(s,a))}fetch(e){return Bt(this,Xt,Sr).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),vt(this,mn)))}createResult(e,a){var ct;const s=vt(this,Ht),o=this.options,c=vt(this,mn),d=vt(this,ar),h=vt(this,_r),_=e!==s?e.state:vt(this,xr),{state:b}=e;let j={...b},$=!1,_e;if(a._optimisticResults){const ht=this.hasListeners(),mt=!ht&&shouldFetchOnMount(e,a),pt=ht&&shouldFetchOptionally(e,s,a,o);(mt||pt)&&(j={...j,...fetchState(b.data,e.options)}),a._optimisticResults==="isRestoring"&&(j.fetchStatus="idle")}let{error:et,errorUpdatedAt:tt,status:it}=j;if(a.select&&j.data!==void 0)if(c&&j.data===(d==null?void 0:d.data)&&a.select===vt(this,Tr))_e=vt(this,Cr);else try{Dt(this,Tr,a.select),_e=a.select(j.data),_e=replaceData(c==null?void 0:c.data,_e,a),Dt(this,Cr,_e),Dt(this,jn,null)}catch(ht){Dt(this,jn,ht)}else _e=j.data;if(a.placeholderData!==void 0&&_e===void 0&&it==="pending"){let ht;if(c!=null&&c.isPlaceholderData&&a.placeholderData===(h==null?void 0:h.placeholderData))ht=c.data;else if(ht=typeof a.placeholderData=="function"?a.placeholderData((ct=vt(this,Ir))==null?void 0:ct.state.data,vt(this,Ir)):a.placeholderData,a.select&&ht!==void 0)try{ht=a.select(ht),Dt(this,jn,null)}catch(mt){Dt(this,jn,mt)}ht!==void 0&&(it="success",_e=replaceData(c==null?void 0:c.data,ht,a),$=!0)}vt(this,jn)&&(et=vt(this,jn),_e=vt(this,Cr),tt=Date.now(),it="error");const nt=j.fetchStatus==="fetching",rt=it==="pending",at=it==="error",st=rt&&nt,ot=_e!==void 0,ut={status:it,fetchStatus:j.fetchStatus,isPending:rt,isSuccess:it==="success",isError:at,isInitialLoading:st,isLoading:st,data:_e,dataUpdatedAt:j.dataUpdatedAt,error:et,errorUpdatedAt:tt,failureCount:j.fetchFailureCount,failureReason:j.fetchFailureReason,errorUpdateCount:j.errorUpdateCount,isFetched:j.dataUpdateCount>0||j.errorUpdateCount>0,isFetchedAfterMount:j.dataUpdateCount>_.dataUpdateCount||j.errorUpdateCount>_.errorUpdateCount,isFetching:nt,isRefetching:nt&&!rt,isLoadingError:at&&!ot,isPaused:j.fetchStatus==="paused",isPlaceholderData:$,isRefetchError:at&&ot,isStale:isStale(e,a),refetch:this.refetch,promise:vt(this,Qn)};if(this.options.experimental_prefetchInRender){const ht=ft=>{ut.status==="error"?ft.reject(ut.error):ut.data!==void 0&&ft.resolve(ut.data)},mt=()=>{const ft=Dt(this,Qn,ut.promise=pendingThenable());ht(ft)},pt=vt(this,Qn);switch(pt.status){case"pending":e.queryHash===s.queryHash&&ht(pt);break;case"fulfilled":(ut.status==="error"||ut.data!==pt.value)&&mt();break;case"rejected":(ut.status!=="error"||ut.error!==pt.reason)&&mt();break}}return ut}updateResult(e){const a=vt(this,mn),s=this.createResult(vt(this,Ht),this.options);if(Dt(this,ar,vt(this,Ht).state),Dt(this,_r,this.options),vt(this,ar).data!==void 0&&Dt(this,Ir,vt(this,Ht)),shallowEqualObjects(s,a))return;Dt(this,mn,s);const o={},c=()=>{if(!a)return!0;const{notifyOnChangeProps:d}=this.options,h=typeof d=="function"?d():d;if(h==="all"||!h&&!vt(this,Er).size)return!0;const g=new Set(h??vt(this,Er));return this.options.throwOnError&&g.add("error"),Object.keys(vt(this,mn)).some(_=>{const b=_;return vt(this,mn)[b]!==a[b]&&g.has(b)})};(e==null?void 0:e.listeners)!==!1&&c()&&(o.listeners=!0),Bt(this,Xt,Jr).call(this,{...o,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Bt(this,Xt,Nr).call(this)}},Cn=new WeakMap,Ht=new WeakMap,xr=new WeakMap,mn=new WeakMap,ar=new WeakMap,_r=new WeakMap,Qn=new WeakMap,jn=new WeakMap,Tr=new WeakMap,Cr=new WeakMap,Ir=new WeakMap,sr=new WeakMap,or=new WeakMap,Jn=new WeakMap,Er=new WeakMap,Xt=new WeakSet,Sr=function(e){Bt(this,Xt,zr).call(this);let a=vt(this,Ht).fetch(this.options,e);return e!=null&&e.throwOnError||(a=a.catch(noop$1)),a},Dr=function(){Bt(this,Xt,jr).call(this);const e=resolveStaleTime(this.options.staleTime,vt(this,Ht));if(isServer||vt(this,mn).isStale||!isValidTimeout(e))return;const s=timeUntilStale(vt(this,mn).dataUpdatedAt,e)+1;Dt(this,sr,setTimeout(()=>{vt(this,mn).isStale||this.updateResult()},s))},Gr=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(vt(this,Ht)):this.options.refetchInterval)??!1},Fr=function(e){Bt(this,Xt,Ur).call(this),Dt(this,Jn,e),!(isServer||resolveEnabled(this.options.enabled,vt(this,Ht))===!1||!isValidTimeout(vt(this,Jn))||vt(this,Jn)===0)&&Dt(this,or,setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&Bt(this,Xt,Sr).call(this)},vt(this,Jn)))},Nr=function(){Bt(this,Xt,Dr).call(this),Bt(this,Xt,Fr).call(this,Bt(this,Xt,Gr).call(this))},jr=function(){vt(this,sr)&&(clearTimeout(vt(this,sr)),Dt(this,sr,void 0))},Ur=function(){vt(this,or)&&(clearInterval(vt(this,or)),Dt(this,or,void 0))},zr=function(){const e=vt(this,Cn).getQueryCache().build(vt(this,Cn),this.options);if(e===vt(this,Ht))return;const a=vt(this,Ht);Dt(this,Ht,e),Dt(this,xr,e.state),this.hasListeners()&&(a==null||a.removeObserver(this),e.addObserver(this))},Jr=function(e){notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(a=>{a(vt(this,mn))}),vt(this,Cn).getQueryCache().notify({query:vt(this,Ht),type:"observerResultsUpdated"})})},Qr);function shouldLoadOnMount(i,e){return resolveEnabled(e.enabled,i)!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&e.retryOnMount===!1)}function shouldFetchOnMount(i,e){return shouldLoadOnMount(i,e)||i.state.data!==void 0&&shouldFetchOn(i,e,e.refetchOnMount)}function shouldFetchOn(i,e,a){if(resolveEnabled(e.enabled,i)!==!1){const s=typeof a=="function"?a(i):a;return s==="always"||s!==!1&&isStale(i,e)}return!1}function shouldFetchOptionally(i,e,a,s){return(i!==e||resolveEnabled(s.enabled,i)===!1)&&(!a.suspense||i.state.status!=="error")&&isStale(i,a)}function isStale(i,e){return resolveEnabled(e.enabled,i)!==!1&&i.isStaleByTime(resolveStaleTime(e.staleTime,i))}function shouldAssignObserverCurrentProperties(i,e){return!shallowEqualObjects(i.getCurrentResult(),e)}function defaultTransformerFn(i){return i}function dehydrateMutation(i){return{mutationKey:i.options.mutationKey,state:i.state,...i.options.scope&&{scope:i.options.scope},...i.meta&&{meta:i.meta}}}function dehydrateQuery(i,e){var a;return{state:{...i.state,...i.state.data!==void 0&&{data:e(i.state.data)}},queryKey:i.queryKey,queryHash:i.queryHash,...i.state.status==="pending"&&{promise:(a=i.promise)==null?void 0:a.then(e).catch(s=>Promise.reject(new Error("redacted")))},...i.meta&&{meta:i.meta}}}function defaultShouldDehydrateMutation(i){return i.state.isPaused}function defaultShouldDehydrateQuery(i){return i.state.status==="success"}function dehydrate(i,e={}){var h,g,_;const a=e.shouldDehydrateMutation??((h=i.getDefaultOptions().dehydrate)==null?void 0:h.shouldDehydrateMutation)??defaultShouldDehydrateMutation,s=i.getMutationCache().getAll().flatMap(b=>a(b)?[dehydrateMutation(b)]:[]),o=e.shouldDehydrateQuery??((g=i.getDefaultOptions().dehydrate)==null?void 0:g.shouldDehydrateQuery)??defaultShouldDehydrateQuery,c=e.serializeData??((_=i.getDefaultOptions().dehydrate)==null?void 0:_.serializeData)??defaultTransformerFn,d=i.getQueryCache().getAll().flatMap(b=>o(b)?[dehydrateQuery(b,c)]:[]);return{mutations:s,queries:d}}function hydrate(i,e,a){var g,_;if(typeof e!="object"||e===null)return;const s=i.getMutationCache(),o=i.getQueryCache(),c=((g=a==null?void 0:a.defaultOptions)==null?void 0:g.deserializeData)??((_=i.getDefaultOptions().hydrate)==null?void 0:_.deserializeData)??defaultTransformerFn,d=e.mutations||[],h=e.queries||[];d.forEach(({state:b,...j})=>{var $,_e;s.build(i,{...($=i.getDefaultOptions().hydrate)==null?void 0:$.mutations,...(_e=a==null?void 0:a.defaultOptions)==null?void 0:_e.mutations,...j},b)}),h.forEach(({queryKey:b,state:j,queryHash:$,meta:_e,promise:et})=>{var nt,rt;let tt=o.get($);const it=j.data===void 0?j.data:c(j.data);if(tt){if(tt.state.dataUpdatedAt<j.dataUpdatedAt){const{fetchStatus:at,...st}=j;tt.setState({...st,data:it})}}else tt=o.build(i,{...(nt=i.getDefaultOptions().hydrate)==null?void 0:nt.queries,...(rt=a==null?void 0:a.defaultOptions)==null?void 0:rt.queries,queryKey:b,queryHash:$,meta:_e},{...j,data:it,fetchStatus:"idle"});if(et){const at=Promise.resolve(et).then(c);tt.fetch(void 0,{initialPromise:at})}})}var QueryClientContext=reactExports.createContext(void 0),useQueryClient=i=>{const e=reactExports.useContext(QueryClientContext);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},QueryClientProvider=({client:i,children:e})=>(reactExports.useEffect(()=>(i.mount(),()=>{i.unmount()}),[i]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:i,children:e})),IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext),IsRestoringProvider=IsRestoringContext.Provider;function createValue(){let i=!1;return{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i}}var QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext);function shouldThrowError(i,e){return typeof i=="function"?i(...e):!!i}function noop(){}var ensurePreventErrorBoundaryRetry=(i,e)=>{(i.suspense||i.throwOnError||i.experimental_prefetchInRender)&&(e.isReset()||(i.retryOnMount=!1))},useClearResetErrorBoundary=i=>{reactExports.useEffect(()=>{i.clearReset()},[i])},getHasError=({result:i,errorResetBoundary:e,throwOnError:a,query:s})=>i.isError&&!e.isReset()&&!i.isFetching&&s&&shouldThrowError(a,[i.error,s]),ensureSuspenseTimers=i=>{i.suspense&&(i.staleTime===void 0&&(i.staleTime=1e3),typeof i.gcTime=="number"&&(i.gcTime=Math.max(i.gcTime,1e3)))},willFetch=(i,e)=>i.isLoading&&i.isFetching&&!e,shouldSuspend=(i,e)=>(i==null?void 0:i.suspense)&&e.isPending,fetchOptimistic=(i,e,a)=>e.fetchOptimistic(i).catch(()=>{a.clearReset()});function useBaseQuery(i,e,a){var b,j,$,_e,et;const s=useQueryClient(),o=useIsRestoring(),c=useQueryErrorResetBoundary(),d=s.defaultQueryOptions(i);(j=(b=s.getDefaultOptions().queries)==null?void 0:b._experimental_beforeQuery)==null||j.call(b,d),d._optimisticResults=o?"isRestoring":"optimistic",ensureSuspenseTimers(d),ensurePreventErrorBoundaryRetry(d,c),useClearResetErrorBoundary(c);const h=!s.getQueryCache().get(d.queryHash),[g]=reactExports.useState(()=>new e(s,d)),_=g.getOptimisticResult(d);if(reactExports.useSyncExternalStore(reactExports.useCallback(tt=>{const it=o?()=>{}:g.subscribe(notifyManager.batchCalls(tt));return g.updateResult(),it},[g,o]),()=>g.getCurrentResult(),()=>g.getCurrentResult()),reactExports.useEffect(()=>{g.setOptions(d,{listeners:!1})},[d,g]),shouldSuspend(d,_))throw fetchOptimistic(d,g,c);if(getHasError({result:_,errorResetBoundary:c,throwOnError:d.throwOnError,query:s.getQueryCache().get(d.queryHash)}))throw _.error;if((_e=($=s.getDefaultOptions().queries)==null?void 0:$._experimental_afterQuery)==null||_e.call($,d,_),d.experimental_prefetchInRender&&!isServer&&willFetch(_,o)){const tt=h?fetchOptimistic(d,g,c):(et=s.getQueryCache().get(d.queryHash))==null?void 0:et.promise;tt==null||tt.catch(noop).finally(()=>{g.updateResult()})}return d.notifyOnChangeProps?_:g.trackResult(_)}function useQuery(i,e){return useBaseQuery(i,QueryObserver)}var ReactQueryDevtools2=function(){return null},cacheEventTypes=["added","removed","updated"];function isCacheEventType(i){return cacheEventTypes.includes(i)}async function persistQueryClientRestore({queryClient:i,persister:e,maxAge:a=1e3*60*60*24,buster:s="",hydrateOptions:o}){try{const c=await e.restoreClient();if(c)if(c.timestamp){const d=Date.now()-c.timestamp>a,h=c.buster!==s;d||h?e.removeClient():hydrate(i,c.clientState,o)}else e.removeClient()}catch{e.removeClient()}}async function persistQueryClientSave({queryClient:i,persister:e,buster:a="",dehydrateOptions:s}){const o={buster:a,timestamp:Date.now(),clientState:dehydrate(i,s)};await e.persistClient(o)}function persistQueryClientSubscribe(i){const e=i.queryClient.getQueryCache().subscribe(s=>{isCacheEventType(s.type)&&persistQueryClientSave(i)}),a=i.queryClient.getMutationCache().subscribe(s=>{isCacheEventType(s.type)&&persistQueryClientSave(i)});return()=>{e(),a()}}var PersistQueryClientProvider=({client:i,children:e,persistOptions:a,onSuccess:s,...o})=>{const[c,d]=reactExports.useState(!0),h=reactExports.useRef({persistOptions:a,onSuccess:s}),g=reactExports.useRef(!1);return reactExports.useEffect(()=>{h.current={persistOptions:a,onSuccess:s}}),reactExports.useEffect(()=>{const _={...h.current.persistOptions,queryClient:i};return g.current||(g.current=!0,persistQueryClientRestore(_).then(async()=>{var b,j;try{await((j=(b=h.current).onSuccess)==null?void 0:j.call(b))}finally{d(!1)}})),c?void 0:persistQueryClientSubscribe(_)},[i,c]),jsxRuntimeExports.jsx(QueryClientProvider,{client:i,...o,children:jsxRuntimeExports.jsx(IsRestoringProvider,{value:c,children:e})})};function createUseConsent(i){const{useFinalityConsent:e,processConsentChanges:a,useConsentCallback:s}=i;return{useConsent:isBrowser?h=>{const{consentCallback:g}=h??{};s({consentCallback:g});const _=e();return{assumeConsent:useConstCallback(j=>a({type:"atomic change",finality:j,isConsentGiven:!0})),finalityConsent:_}}:()=>({finalityConsent:void 0,assumeConsent:()=>{throw new Error("Cannot assume consent on the server side")}})}}function deepCopy(i){return JSON.parse(JSON.stringify(i))}var __rest=function(i,e){var a={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(a[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(a[s[o]]=i[s[o]]);return a};function finalityConsentToChanges(i){return Object.entries(i.finalityConsent).filter(([e])=>e!=="isFullConsent").map(([e,a])=>typeof a=="boolean"?[{finality:e,isConsentGiven:a}]:Object.entries(a).filter(([s])=>s!=="isFullConsent").map(([s,o])=>({finality:`${e}.${s}`,isConsentGiven:(assert$1(typeof o=="boolean"),o)}))).reduce((e,a)=>[...e,...a],[])}function createProcessConsentChanges(i){const{finalities:e,getFinalityConsent:a,setFinalityConsent:s,consentCallback:o}=i,c=[];o!==void 0&&c.push(o);function d(g){const{consentCallback:_}=g,b=useConstCallback(j=>_==null?void 0:_(j));c.includes(b)||c.push(b),reactExports.useEffect(()=>()=>{c.splice(c.indexOf(b),1)},[])}return{processConsentChanges:async g=>{if(g.type==="no changes but trigger consent callbacks"){const $=a();if($===void 0)return;await Promise.all(c.map(_e=>_e({finalityConsent:$,finalityConsent_prev:$})));return}const _=(()=>{switch(g.type){case"grantAll":return e.map($=>({finality:$,isConsentGiven:!0}));case"denyAll":return e.map($=>({finality:$,isConsentGiven:!1}));case"atomic change":return[{finality:g.finality,isConsentGiven:g.isConsentGiven}];case"new finalityConsent explicitly provided":return finalityConsentToChanges({finalityConsent:g.finalityConsent})}})(),b=a();let j=b===void 0?createFullDenyFinalityConsent(e):deepCopy(b);for(const{finality:$,isConsentGiven:_e}of _)j=updateFinalityConsent({finalityConsent:j,finality:$,isConsentGiven:_e});s({finalityConsent:j,prAllConsentCallbacksRun:Promise.all(c.map($=>$({finalityConsent:j,finalityConsent_prev:b}))).then(()=>{})})},useConsentCallback:d}}function createFullDenyFinalityConsent(i){var e;const a={isFullConsent:!1};for(const s of i){const[o,c]=s.split(".");if(c===void 0){a[o]=!1;continue}((e=a[o])!==null&&e!==void 0?e:a[o]={isFullConsent:!1})[c]=!1}return a}function updateFinalityConsent(i){const{finality:e,finalityConsent:a,isConsentGiven:s}=i,[o,c]=e.split(".");assert$1(is());const d=deepCopy(a),h=o;d[h];const g=__rest(d,["isFullConsent",typeof h=="symbol"?h:h+""]);if(c===void 0)return Object.assign(Object.assign({},g),{[o]:s,isFullConsent:s&&!Object.values(g).map(_e=>typeof _e=="boolean"?_e:_e.isFullConsent).includes(!1)});const _=deepCopy(a[o]),b=c;_[b];const j=__rest(_,["isFullConsent",typeof b=="symbol"?b:b+""]),$=s&&!Object.keys(j).map(_e=>j[_e]).includes(!1);return Object.assign(Object.assign({},g),{[o]:Object.assign(Object.assign({},j),{[c]:s,isFullConsent:$}),isFullConsent:$&&!Object.values(g).map(_e=>typeof _e=="boolean"?_e:_e.isFullConsent).includes(!1)})}const{useTranslation,addConsentManagementTranslations}=createComponentI18nApi({componentName:"ConsentManagement",frMessages:{"all services pref":"Préférences pour tous les services.","personal data cookies":"Données personnelles et cookies","accept all":"Tout accepter","accept all - title":"Autoriser tous les cookies","refuse all":"Tout refuser","refuse all - title":"Refuser tous les cookies",accept:"Accepter",refuse:"Refuser","confirm choices":"Confirmer mes choix","about cookies":i=>`À propos des cookies sur ${i.hostname}`,"welcome message":i=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Bienvenue ! Nous utilisons des cookies pour améliorer votre expérience et les services disponibles sur ce site.",i.personalDataPolicyLinkProps!==void 0&&React.createElement(React.Fragment,null," ","Pour en savoir plus, visitez la page"," ",React.createElement(e,Object.assign({},i.personalDataPolicyLinkProps),"Données personnelles et cookies"),"."),"  Vous pouvez, à tout moment, avoir le contrôle sur les cookies que vous souhaitez activer.")},customize:"Personnaliser","customize cookies - title":"Personnaliser les cookies","consent modal title":"Panneau de gestion des cookies","cookies management":"Gestion des cookies","personal data":"Données personnelles","preferences for all services":i=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Préférences pour tous les services.",React.createElement("br",null),i.personalDataPolicyLinkProps!==void 0&&React.createElement(e,Object.assign({},i.personalDataPolicyLinkProps),"Données personnelles et cookies"))},"see more details":"Voir plus de détails","hide details":"Cacher les détails","mandatory cookies":"Cookies obligatoires","mandatory cookies - description":"Ce site utilise des cookies nécessaires à son bon fonctionnement qui ne peuvent pas être désactivés.","confirm my choices":"Confirmer mes choix"}});addConsentManagementTranslations({lang:"en",messages:{"all services pref":"Preferences for all services.","personal data cookies":"Personal data and cookies","accept all":"Accept all","accept all - title":"Accept all cookies","refuse all":"Refuse all","refuse all - title":"Refuse all cookies",accept:"Accept",refuse:"Refuse","confirm choices":"Confirm my choices","about cookies":i=>`About cookies on ${i.hostname}`,"welcome message":i=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Welcome to our website! We use cookies to improve your experience and the services available services available on this site.",i.personalDataPolicyLinkProps!==void 0&&React.createElement(React.Fragment,null,"To learn more, visit the"," ",React.createElement(e,Object.assign({},i.personalDataPolicyLinkProps),'"Personal Data and Cookies"')," ","page."),"  You can, at any time, have control over which cookies you wish to enable at any time.")},customize:"Customize","customize cookies - title":"Customize cookies","consent modal title":"Cookie management panel","cookies management":"Cookies management","preferences for all services":i=>{const{Link:e}=getLink();return React.createElement(React.Fragment,null,"Preferences for all services ",React.createElement("br",null),i.personalDataPolicyLinkProps!==void 0&&React.createElement(e,Object.assign({},i.personalDataPolicyLinkProps),"Personal data and cookies"))},"see more details":"See more details","hide details":"Hide details","mandatory cookies":"Mandatory cookies","mandatory cookies - description":"This site uses cookies necessary for its proper functioning which cannot be deactivated.","confirm my choices":"Confirm my choices"}});function createConsentBanner(i){const{personalDataPolicyLinkProps:e,processConsentChanges:a,consentModalButtonProps:s}=i;function o(){const{t:c}=useTranslation(),[d,h]=reactExports.useState(""),[g,_]=reactExports.useState(!1);reactExports.useEffect(()=>{isBrowser&&h(location.host)},[]);const b="fr-consent-banner";return React.createElement(React.Fragment,null,React.createElement("div",{id:b,className:fr.cx("fr-consent-banner")},React.createElement("h2",{className:fr.cx("fr-h6")},c("about cookies",{hostname:d})),React.createElement("div",null,React.createElement("p",{className:fr.cx("fr-text--sm")},c("welcome message",{personalDataPolicyLinkProps:e}))),React.createElement("ul",{className:fr.cx("fr-consent-banner__buttons","fr-btns-group","fr-btns-group--right","fr-btns-group--inline-reverse","fr-btns-group--inline-sm")},React.createElement("li",null,React.createElement("button",{id:`${b}-button-accept-all`,className:fr.cx("fr-btn"),title:c("accept all - title"),onClick:async()=>{_(!0),await a({type:"grantAll"}),_(!1)},disabled:g},c("accept all"))),React.createElement("li",null,React.createElement("button",{id:`${b}-button-refuse-app`,className:fr.cx("fr-btn"),title:c("refuse all - title"),onClick:()=>{_(!0),a({type:"denyAll"}),_(!1)},disabled:g},c("refuse all"))),React.createElement("li",null,React.createElement("button",Object.assign({id:`${b}-button-customize`,className:fr.cx("fr-btn","fr-btn--secondary"),title:c("customize cookies - title"),disabled:g},s),c("customize"))))))}return{ConsentBanner:o}}function useIsModalOpen(i,e){const{id:a,isOpenedByDefault:s}=i,[o,c]=reactExports.useState(s),d=useConstCallback(()=>e);return reactExports.useEffect(()=>{const h=[],g=j=>{const $=()=>{c(!1),setTimeout(()=>{var nt,rt;(rt=(nt=d())===null||nt===void 0?void 0:nt.onConceal)===null||rt===void 0||rt.call(nt)},0)},_e=()=>{var nt,rt;c(!0),(rt=(nt=d())===null||nt===void 0?void 0:nt.onDisclose)===null||rt===void 0||rt.call(nt)};j.addEventListener("dsfr.conceal",$),j.addEventListener("dsfr.disclose",_e);const et=()=>{j.removeEventListener("dsfr.conceal",$),j.removeEventListener("dsfr.disclose",_e)};h.push(et);const tt=new MutationObserver(nt=>{nt.find(at=>Array.from(at.removedNodes).indexOf(j)!==-1)!==void 0&&(h.splice(h.indexOf(et),1),tt.disconnect(),h.splice(h.indexOf(it),1),c(!1),_({isInitialCall:!1}))});tt.observe(document,{childList:!0,subtree:!0});const it=()=>tt.disconnect();h.push(it)},_=j=>{const{isInitialCall:$}=j;$&&assert$1(!s,[`The ${a} modal isn't initially mounted,`,`it's ok but in this case ${symToStr({isOpenedByDefault:s})} must be set to false.`,"This limitation is to prevent inconsistent state in SSR setups."].join(" "));const _e=new MutationObserver((tt,it)=>{const nt=tt.map(rt=>Array.from(rt.addedNodes)).reduce((rt,at)=>rt.concat(at),[]).find(rt=>rt.nodeType===Node.ELEMENT_NODE&&rt.nodeName==="DIALOG"&&rt.id===a);nt!==void 0&&(it.disconnect(),h.splice(h.indexOf(et),1),g(nt),s&&c(!0))});_e.observe(document,{childList:!0,subtree:!0});const et=()=>_e.disconnect();h.push(et)},b=document.getElementById(a);return b!==null?g(b):_({isInitialCall:!0}),()=>{h.forEach(j=>j())}},[a]),o}function objectKeys(i){return Object.keys(i)}function exclude(i){const e=i instanceof Object?a=>i.indexOf(a)<0:a=>a!==i;return function(a){return e(a)}}function useConst(i){const[e]=reactExports.useState(i);return e}function createConsentManagement$1(i){const{finalityDescription:e,personalDataPolicyLinkProps:a,useFinalityConsent:s,processConsentChanges:o,finalities:c}=i,d=createModal({isOpenedByDefault:!1,id:"fr-consent-modal"});function h(){const $=useLang(),{t:_e}=useTranslation(),et=reactExports.useMemo(()=>typeof e=="function"?e({lang:$}):e,[$]),{processLocalConsentChange:tt,localFinalityConsent:it}=function(){const ot=s(),dt=useConst(()=>createStatefulObservable(()=>ot??createFullDenyFinalityConsent(c)));useRerenderOnChange(dt),reactExports.useEffect(()=>{ot!==void 0&&(dt.current=ot)},[ot]);const{processConsentChanges:ut}=createProcessConsentChanges({consentCallback:void 0,finalities:c,getFinalityConsent:()=>dt.current,setFinalityConsent:({finalityConsent:ht})=>dt.current=ht});return{processLocalConsentChange:ut,localFinalityConsent:dt.current}}(),[nt,rt]=reactExports.useState(!1),at=st=>async()=>{switch(rt(!0),st){case"apply local changes":await o({type:"new finalityConsent explicitly provided",finalityConsent:it});break;case"denyAll":case"grantAll":tt({type:st}),await o({type:st});break}rt(!1),d.close()};return React.createElement(d.Component,{title:_e("consent modal title"),size:"large"},React.createElement("div",null,React.createElement("div",{className:fr.cx("fr-consent-service","fr-consent-manager__header")},React.createElement("fieldset",{className:fr.cx("fr-fieldset","fr-fieldset--inline")},React.createElement("legend",{className:fr.cx("fr-consent-service__title")},_e("preferences for all services",{personalDataPolicyLinkProps:a})),React.createElement("div",{className:fr.cx("fr-consent-service__radios")},React.createElement("div",{className:fr.cx("fr-btns-group","fr-btns-group--inline","fr-btns-group--right")},React.createElement("button",{id:`${d.id}-button-accept-all`,title:_e("accept all - title"),className:fr.cx("fr-btn"),onClick:at("grantAll"),disabled:nt},_e("accept all"))," ",React.createElement("button",{id:`${d.id}-button-refuse-all`,title:_e("refuse all - title"),className:fr.cx("fr-btn","fr-btn--secondary"),disabled:nt,onClick:at("denyAll")},_e("refuse all")))))),React.createElement(g,{title:_e("mandatory cookies"),description:_e("mandatory cookies - description"),finalityConsent:!0,onChange:void 0,subFinalities:void 0}),objectKeys(et).map(st=>({finality:(assert$1(typeof st=="string"),st),wrap:et[st]})).map(({finality:st,wrap:ot})=>React.createElement(g,{key:st,title:ot.title,description:ot.description,subFinalities:ot.subFinalities,onChange:({subFinality:dt,isConsentGiven:ut})=>(dt!==void 0?[`${st}.${dt}`]:ot.subFinalities===void 0?[st]:Object.keys(ot.subFinalities).map(ct=>`${st}.${ct}`)).forEach(ct=>tt({type:"atomic change",finality:ct,isConsentGiven:ut})),finalityConsent:it[st]})),React.createElement("ul",{className:fr.cx("fr-consent-manager__buttons","fr-btns-group","fr-btns-group--right","fr-btns-group--inline-sm")},React.createElement("li",null,React.createElement("button",{id:`${d.id}-button-confirm`,className:fr.cx("fr-btn"),disabled:nt,onClick:at("apply local changes")},_e("confirm choices"))))))}function g($){const{title:_e,description:et,subFinalities:tt,finalityConsent:it,onChange:nt}=$,{t:rt}=useTranslation(),{legendId:at,descriptionId:st,acceptInputId:ot,refuseInputId:dt,subFinalityDivId:ut}=function(){const ft=reactExports.useId(),yt=`finality-${ft}-legend`,Ct=`finality-${ft}-desc`,_t=`consent-finality-${ft}-accept`,St=`consent-finality-${ft}-refuse`,Pt=`finality-${ft}-collapse`;return{legendId:yt,descriptionId:Ct,acceptInputId:_t,refuseInputId:St,subFinalityDivId:Pt}}(),ct=reactExports.useMemo(()=>typeof it=="boolean"?it?"full consent":"full refusal":it.isFullConsent?"full consent":Object.keys(it).filter(exclude("isFullConsent")).map(pt=>it[pt]).includes(!0)?"partial consent":"full refusal",[it]),[ht,mt]=reactExports.useState(!0);return React.createElement("div",{className:fr.cx("fr-consent-service")},React.createElement("fieldset",{"aria-labelledby":`${at} ${st}`,role:"group",className:fr.cx("fr-fieldset")},React.createElement("legend",{id:at,className:fr.cx("fr-consent-service__title")},_e),React.createElement("div",{className:fr.cx("fr-consent-service__radios")},React.createElement("div",{className:fr.cx("fr-radio-group")},React.createElement("input",Object.assign({type:"radio",id:ot,checked:ct==="full consent"},nt===void 0?{disabled:!0}:{onChange:()=>nt({subFinality:void 0,isConsentGiven:!0})})),React.createElement("label",{className:"fr-label",htmlFor:ot},rt("accept"))),React.createElement("div",{className:fr.cx("fr-radio-group")},React.createElement("input",Object.assign({type:"radio",id:dt,checked:ct==="full refusal"},nt===void 0?{disabled:!0}:{onChange:()=>nt({subFinality:void 0,isConsentGiven:!1})})),React.createElement("label",{className:fr.cx("fr-label"),htmlFor:dt},rt("refuse")))),et!==void 0&&React.createElement("p",{className:fr.cx("fr-consent-service__desc")},et),tt!==void 0&&(assert$1(typeof it!="boolean"),assert$1(nt!==void 0),React.createElement(React.Fragment,null,React.createElement("div",{className:fr.cx("fr-consent-service__collapse")},React.createElement("button",{className:fr.cx("fr-consent-service__collapse-btn"),"aria-expanded":"false","aria-describedby":at,"aria-controls":ut,onClick:()=>mt(!ht)},rt(ht?"see more details":"hide details"))),React.createElement("div",{className:fr.cx("fr-consent-services","fr-collapse"),id:ut},Object.entries(tt).map(([pt,ft])=>React.createElement(_,{key:pt,title:ft,isConsentGiven:it[pt],onChange:({isConsentGiven:yt})=>nt({subFinality:pt,isConsentGiven:yt})})))))))}function _($){const{title:_e,onChange:et,isConsentGiven:tt}=$,{t:it}=useTranslation(),{acceptInputId:nt,refuseInputId:rt}=function(){const st=reactExports.useId(),ot=`consent-finality-${st}-service-accept`,dt=`consent-finality-${st}-service-refuse`;return{acceptInputId:ot,refuseInputId:dt}}();return React.createElement("div",{className:fr.cx("fr-consent-service")},React.createElement("fieldset",{className:fr.cx("fr-fieldset","fr-fieldset--inline")},React.createElement("legend",{className:fr.cx("fr-consent-service__title")},_e),React.createElement("div",{className:"fr-consent-service__radios fr-fieldset--inline"},React.createElement("div",{className:"fr-radio-group"},React.createElement("input",{type:"radio",id:nt,checked:tt,onChange:()=>et({isConsentGiven:!0})}),React.createElement("label",{className:fr.cx("fr-label"),htmlFor:nt},it("accept"))),React.createElement("div",{className:fr.cx("fr-radio-group")},React.createElement("input",{type:"radio",id:rt,checked:!tt,onChange:()=>et({isConsentGiven:!1})}),React.createElement("label",{className:fr.cx("fr-label"),htmlFor:rt},it("refuse"))))))}const b=d.buttonProps;function j(){return useIsModalOpen(d)}return{ConsentManagement:h,consentModalButtonProps:b,useIsConsentManagementOpen:j}}function createConsentBannerAndConsentManagement(i){const{finalityDescription:e,useFinalityConsent:a,processConsentChanges:s,personalDataPolicyLinkProps:o,finalities:c}=i,{ConsentManagement:d,consentModalButtonProps:h,useIsConsentManagementOpen:g}=createConsentManagement$1({finalityDescription:e,personalDataPolicyLinkProps:o,useFinalityConsent:a,processConsentChanges:s,finalities:c}),{ConsentBanner:_}=createConsentBanner({personalDataPolicyLinkProps:o,processConsentChanges:s,consentModalButtonProps:h}),{FooterConsentManagementItem:b}=createFooterConsentManagementItem({consentModalButtonProps:h});let j=()=>{s({type:"no changes but trigger consent callbacks"}),j=void 0};function $(){const[et,tt]=reactExports.useReducer(()=>!0,!1);reactExports.useEffect(()=>{j==null||j(),tt()},[]);const it=a(),nt=g();return et?React.createElement(React.Fragment,null,it===void 0&&!nt&&React.createElement(_,null),React.createElement(d,null)):null}const{FooterPersonalDataPolicyItem:_e}=createFooterPersonalDataPolicyItem({personalDataPolicyLinkProps:o});return{ConsentBannerAndConsentManagement:$,FooterConsentManagementItem:b,FooterPersonalDataPolicyItem:_e}}function createFooterConsentManagementItem(i){const{consentModalButtonProps:e}=i;function a(){const{t:s}=useTranslation();return React.createElement(FooterBottomItem,{bottomItem:{buttonProps:e,text:s("cookies management")}})}return{FooterConsentManagementItem:a}}function createFooterPersonalDataPolicyItem(i){const{personalDataPolicyLinkProps:e}=i;function a(){const{t:s}=useTranslation();if(e===void 0)throw new Error(["You should provide a personalDataPolicyLinkProps to createConsentManagement if","you want to add a link to the personal data policy in the footer"].join(" "));return React.createElement(FooterBottomItem,{bottomItem:{text:s("personal data"),linkProps:e}})}return{FooterPersonalDataPolicyItem:a}}const defaultLocalStorageKeyPrefix="@codegouvfr/react-dsfr finalityConsent";function createConsentManagement(i){const{finalityDescription:e,personalDataPolicyLinkProps:a,consentCallback:s,localStorageKeyPrefix:o=defaultLocalStorageKeyPrefix}=i,c=getFinalitiesFromFinalityDescription({finalityDescription:typeof e=="function"?e({lang:"fr"}):e}),d=`${o} ${c.join("-")}`,h=createStatefulObservable(()=>{if(!isBrowser)return;const tt=localStorage.getItem(d);if(tt!==null)return JSON.parse(tt)}),{processConsentChanges:g,useConsentCallback:_}=createProcessConsentChanges({consentCallback:s,finalities:c,getFinalityConsent:()=>h.current,setFinalityConsent:({finalityConsent:tt,prAllConsentCallbacksRun:it})=>{localStorage.setItem(d,JSON.stringify(tt)),it.then(()=>h.current=tt)}});function b(){useRerenderOnChange(h);const[tt,it]=reactExports.useReducer(()=>!0,!0);if(reactExports.useEffect(()=>{it()},[]),!!tt)return h.current}const{useConsent:j}=createUseConsent({useFinalityConsent:b,processConsentChanges:g,useConsentCallback:_}),{ConsentBannerAndConsentManagement:$,FooterConsentManagementItem:_e,FooterPersonalDataPolicyItem:et}=createConsentBannerAndConsentManagement({finalityDescription:e,personalDataPolicyLinkProps:a,processConsentChanges:g,useFinalityConsent:b,finalities:c});return{useConsent:j,ConsentBannerAndConsentManagement:$,FooterConsentManagementItem:_e,FooterPersonalDataPolicyItem:et}}function getFinalitiesFromFinalityDescription(i){const{finalityDescription:e}=i,a=[];for(const s in e){const o=e[s],{subFinalities:c}=o;if(c===void 0){a.push(s);continue}for(const d in c)a.push(`${s}.${d}`)}return a}async function startEulerianAnalytics(i){return await prDsfrLoaded,window.dsfr.analytics=i,await __vitePreload(()=>import("./analytics.module.min-BQeBmxFq.js"),[]),await dsfr.analytics.readiness,{enable:()=>{window.dsfr.analytics.opt.enable()},disable:()=>{window.dsfr.analytics.opt.disable()}}}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)({}).hasOwnProperty.call(a,s)&&(i[s]=a[s])}return i},_extends$2.apply(null,arguments)}var Action;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Action||(Action={}));var readOnly=function(i){return i},BeforeUnloadEventType="beforeunload",HashChangeEventType="hashchange",PopStateEventType="popstate";function createBrowserHistory(i){i===void 0&&(i={});var e=i,a=e.window,s=a===void 0?document.defaultView:a,o=s.history;function c(){var ut=s.location,ct=ut.pathname,ht=ut.search,mt=ut.hash,pt=o.state||{};return[pt.idx,readOnly({pathname:ct,search:ht,hash:mt,state:pt.usr||null,key:pt.key||"default"})]}var d=null;function h(){if(d)_e.call(d),d=null;else{var ut=Action.Pop,ct=c(),ht=ct[0],mt=ct[1];if(_e.length){if(ht!=null){var pt=b-ht;pt&&(d={action:ut,location:mt,retry:function(){ot(pt*-1)}},ot(pt))}}else rt(ut)}}s.addEventListener(PopStateEventType,h);var g=Action.Pop,_=c(),b=_[0],j=_[1],$=createEvents(),_e=createEvents();b==null&&(b=0,o.replaceState(_extends$2({},o.state,{idx:b}),""));function et(ut){return typeof ut=="string"?ut:createPath(ut)}function tt(ut,ct){return ct===void 0&&(ct=null),readOnly(_extends$2({pathname:j.pathname,hash:"",search:""},typeof ut=="string"?parsePath(ut):ut,{state:ct,key:createKey()}))}function it(ut,ct){return[{usr:ut.state,key:ut.key,idx:ct},et(ut)]}function nt(ut,ct,ht){return!_e.length||(_e.call({action:ut,location:ct,retry:ht}),!1)}function rt(ut){g=ut;var ct=c();b=ct[0],j=ct[1],$.call({action:g,location:j})}function at(ut,ct){var ht=Action.Push,mt=tt(ut,ct);function pt(){at(ut,ct)}if(nt(ht,mt,pt)){var ft=it(mt,b+1),yt=ft[0],Ct=ft[1];try{o.pushState(yt,"",Ct)}catch{s.location.assign(Ct)}rt(ht)}}function st(ut,ct){var ht=Action.Replace,mt=tt(ut,ct);function pt(){st(ut,ct)}if(nt(ht,mt,pt)){var ft=it(mt,b),yt=ft[0],Ct=ft[1];o.replaceState(yt,"",Ct),rt(ht)}}function ot(ut){o.go(ut)}var dt={get action(){return g},get location(){return j},createHref:et,push:at,replace:st,go:ot,back:function(){ot(-1)},forward:function(){ot(1)},listen:function(ct){return $.push(ct)},block:function(ct){var ht=_e.push(ct);return _e.length===1&&s.addEventListener(BeforeUnloadEventType,promptBeforeUnload),function(){ht(),_e.length||s.removeEventListener(BeforeUnloadEventType,promptBeforeUnload)}}};return dt}function createHashHistory(i){i===void 0&&(i={});var e=i,a=e.window,s=a===void 0?document.defaultView:a,o=s.history;function c(){var ct=parsePath(s.location.hash.substr(1)),ht=ct.pathname,mt=ht===void 0?"/":ht,pt=ct.search,ft=pt===void 0?"":pt,yt=ct.hash,Ct=yt===void 0?"":yt,_t=o.state||{};return[_t.idx,readOnly({pathname:mt,search:ft,hash:Ct,state:_t.usr||null,key:_t.key||"default"})]}var d=null;function h(){if(d)_e.call(d),d=null;else{var ct=Action.Pop,ht=c(),mt=ht[0],pt=ht[1];if(_e.length){if(mt!=null){var ft=b-mt;ft&&(d={action:ct,location:pt,retry:function(){dt(ft*-1)}},dt(ft))}}else at(ct)}}s.addEventListener(PopStateEventType,h),s.addEventListener(HashChangeEventType,function(){var ct=c(),ht=ct[1];createPath(ht)!==createPath(j)&&h()});var g=Action.Pop,_=c(),b=_[0],j=_[1],$=createEvents(),_e=createEvents();b==null&&(b=0,o.replaceState(_extends$2({},o.state,{idx:b}),""));function et(){var ct=document.querySelector("base"),ht="";if(ct&&ct.getAttribute("href")){var mt=s.location.href,pt=mt.indexOf("#");ht=pt===-1?mt:mt.slice(0,pt)}return ht}function tt(ct){return et()+"#"+(typeof ct=="string"?ct:createPath(ct))}function it(ct,ht){return ht===void 0&&(ht=null),readOnly(_extends$2({pathname:j.pathname,hash:"",search:""},typeof ct=="string"?parsePath(ct):ct,{state:ht,key:createKey()}))}function nt(ct,ht){return[{usr:ct.state,key:ct.key,idx:ht},tt(ct)]}function rt(ct,ht,mt){return!_e.length||(_e.call({action:ct,location:ht,retry:mt}),!1)}function at(ct){g=ct;var ht=c();b=ht[0],j=ht[1],$.call({action:g,location:j})}function st(ct,ht){var mt=Action.Push,pt=it(ct,ht);function ft(){st(ct,ht)}if(rt(mt,pt,ft)){var yt=nt(pt,b+1),Ct=yt[0],_t=yt[1];try{o.pushState(Ct,"",_t)}catch{s.location.assign(_t)}at(mt)}}function ot(ct,ht){var mt=Action.Replace,pt=it(ct,ht);function ft(){ot(ct,ht)}if(rt(mt,pt,ft)){var yt=nt(pt,b),Ct=yt[0],_t=yt[1];o.replaceState(Ct,"",_t),at(mt)}}function dt(ct){o.go(ct)}var ut={get action(){return g},get location(){return j},createHref:tt,push:st,replace:ot,go:dt,back:function(){dt(-1)},forward:function(){dt(1)},listen:function(ht){return $.push(ht)},block:function(ht){var mt=_e.push(ht);return _e.length===1&&s.addEventListener(BeforeUnloadEventType,promptBeforeUnload),function(){mt(),_e.length||s.removeEventListener(BeforeUnloadEventType,promptBeforeUnload)}}};return ut}function createMemoryHistory(i){i===void 0&&(i={});var e=i,a=e.initialEntries,s=a===void 0?["/"]:a,o=e.initialIndex,c=s.map(function(at){var st=readOnly(_extends$2({pathname:"/",search:"",hash:"",state:null,key:createKey()},typeof at=="string"?parsePath(at):at));return st}),d=clamp$1(o??c.length-1,0,c.length-1),h=Action.Pop,g=c[d],_=createEvents(),b=createEvents();function j(at){return typeof at=="string"?at:createPath(at)}function $(at,st){return st===void 0&&(st=null),readOnly(_extends$2({pathname:g.pathname,search:"",hash:""},typeof at=="string"?parsePath(at):at,{state:st,key:createKey()}))}function _e(at,st,ot){return!b.length||(b.call({action:at,location:st,retry:ot}),!1)}function et(at,st){h=at,g=st,_.call({action:h,location:g})}function tt(at,st){var ot=Action.Push,dt=$(at,st);function ut(){tt(at,st)}_e(ot,dt,ut)&&(d+=1,c.splice(d,c.length,dt),et(ot,dt))}function it(at,st){var ot=Action.Replace,dt=$(at,st);function ut(){it(at,st)}_e(ot,dt,ut)&&(c[d]=dt,et(ot,dt))}function nt(at){var st=clamp$1(d+at,0,c.length-1),ot=Action.Pop,dt=c[st];function ut(){nt(at)}_e(ot,dt,ut)&&(d=st,et(ot,dt))}var rt={get index(){return d},get action(){return h},get location(){return g},createHref:j,push:tt,replace:it,go:nt,back:function(){nt(-1)},forward:function(){nt(1)},listen:function(st){return _.push(st)},block:function(st){return b.push(st)}};return rt}function clamp$1(i,e,a){return Math.min(Math.max(i,e),a)}function promptBeforeUnload(i){i.preventDefault(),i.returnValue=""}function createEvents(){var i=[];return{get length(){return i.length},push:function(a){return i.push(a),function(){i=i.filter(function(s){return s!==a})}},call:function(a){i.forEach(function(s){return s&&s(a)})}}}function createKey(){return Math.random().toString(36).substr(2,8)}function createPath(i){var e=i.pathname,a=e===void 0?"/":e,s=i.search,o=s===void 0?"":s,c=i.hash,d=c===void 0?"":c;return o&&o!=="?"&&(a+=o.charAt(0)==="?"?o:"?"+o),d&&d!=="#"&&(a+=d.charAt(0)==="#"?d:"#"+d),a}function parsePath(i){var e={};if(i){var a=i.indexOf("#");a>=0&&(e.hash=i.substr(a),i=i.substr(0,a));var s=i.indexOf("?");s>=0&&(e.search=i.substr(s),i=i.substr(0,s)),i&&(e.pathname=i)}return e}function _extends$1(){return _extends$1=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])}return i},_extends$1.apply(this,arguments)}function _unsupportedIterableToArray(i,e){if(i){if(typeof i=="string")return _arrayLikeToArray(i,e);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(i,e)}}function _arrayLikeToArray(i,e){(e==null||e>i.length)&&(e=i.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=i[a];return s}function _createForOfIteratorHelperLoose(i,e){var a=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(a)return(a=a.call(i)).next.bind(a);if(Array.isArray(i)||(a=_unsupportedIterableToArray(i))||e){a&&(i=a);var s=0;return function(){return s>=i.length?{done:!0}:{done:!1,value:i[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function asArray$1(i){return Array.isArray(i)?i:[i]}function buildPathDefs(i,e,a){var s=Object.keys(e).map(function(d){var h=_extends$1({paramName:d},e[d]);return h}),o={};s.forEach(function(d){var h=d.paramName;o[h]=getParamId(h)});var c=a(o);return asArray$1(c).map(function(d){if(d.length===1)return[];for(var h=d.split("/").slice(1),g={},_=[],b=_createForOfIteratorHelperLoose(h),j;!(j=b()).done;){for(var $=j.value,_e=null,et=_createForOfIteratorHelperLoose(s),tt;!(tt=et()).done;){var it=tt.value;$.indexOf(getParamId(it.paramName))>=0&&(_e=it,g[it.paramName]=!0)}if(_e){var nt=$.split(getParamId(_e.paramName)),rt=nt[0],at=nt[1];_.push({leading:rt,trailing:at,namedParamDef:_e})}else _.push({leading:$,trailing:"",namedParamDef:null})}return _.filter(function(st){var ot,dt;return((ot=st.namedParamDef)==null?void 0:ot["~internal"].optional)||((dt=st.namedParamDef)==null?void 0:dt["~internal"].trailing)}).length,_[_.length-1].namedParamDef,s.map(function(st){var ot=st.paramName;return ot}).filter(function(st){return!g[st]}),_})}function getParamId(i){return"${p."+i+"}"}function getParamDefsOfType(i,e){var a={};return Object.keys(e).forEach(function(s){var o=e[s];o["~internal"].kind===i&&(a[s]=o)}),a}function createLocation(i){var e=i.paramCollection,a=i.paramDefCollection,s=i.arraySeparator,o=i.queryStringSerializer,c=i.pathDefs,d=i.baseUrl,h={path:{},query:{},state:{}},g=function(it){var nt,rt=e[it];if(rt===void 0)return"continue";var at=a[it],st=at["~internal"].kind!=="state"&&!at["~internal"].trailing,ot=(nt=at["~internal"].valueSerializer.urlEncode)!=null?nt:st,dt=function(ht){var mt;return at["~internal"].array?mt=ht.length===0?null:ht.map(function(pt){return stringify(at,pt,ot)}).join(s):mt=stringify(at,ht,ot),mt},ut=dt(rt);if(at["~internal"].kind==="query"&&at["~internal"].default!==void 0&&dt(at["~internal"].default)===ut)return"continue";h[at["~internal"].kind][it]={valueSerializerId:at["~internal"].valueSerializer.id,array:at["~internal"].array,value:ut}};for(var _ in a)var b=g(_);var j="/"+c[0].filter(function(tt){var it=tt.namedParamDef;return!(it!=null&&it["~internal"].optional&&h.path[it.paramName]===void 0)}).map(function(tt){var it=tt.namedParamDef,nt=tt.leading,rt=tt.trailing,at=it?h.path[it.paramName].value:"";return nt+at+rt}).join("/"),$=Object.keys(h.query).length>0,_e=$?o.stringify(h.query):void 0,et=Object.keys(h.state).length===0?void 0:Object.keys(h.state).reduce(function(tt,it){var nt;return _extends$1({},tt,(nt={},nt[it]=h.state[it].value,nt))},{});return{fullPath:(d==="/"?"":d)+j,path:j,query:_e,state:et}}function stringify(i,e,a){var s=i["~internal"].valueSerializer.stringify(e);return a?encodeURIComponent(s):s}var noMatch={__noMatch:!0},stringUtils={startsWith,endsWith,splitFirst};function startsWith(i,e){for(var a=0;a<e.length;a++)if(e[a]!==i[a])return!1;return!0}function endsWith(i,e){for(var a=1;a<=e.length;a++)if(e[e.length-a]!==i[i.length-a])return!1;return!0}function splitFirst(i,e){var a=i.split(e),s=a[0],o=a.slice(1);return[s,o.join(e)]}var endsWith$1=stringUtils.endsWith,startsWith$1=stringUtils.startsWith;function getPathMatch(i){for(var e=i.path,a=i.pathDefs,s=i.arraySeparator,o=0;o<a.length;o++){var c=d(a[o]);if(c!==!1)return _extends$1({},c,{primaryPath:o===0})}return!1;function d(h){var g={};if(e==="/"&&h.length===0)return{params:g,numExtraneousParams:0};var _=e.length>1&&endsWith$1(e,"/");_&&(e=e.slice(0,e.length-1));for(var b=e.split("/").slice(1),j=function(tt){var it,nt,rt=tt>=h.length?null:h[tt],at=tt>=b.length?null:b[tt];if(rt===null)return{v:!1};var st=h.length-1-tt;if(at===null){var ot;return st!==0||!((ot=rt.namedParamDef)!=null&&ot["~internal"].optional)?{v:!1}:"break"}if((it=rt.namedParamDef)!=null&&it["~internal"].trailing&&(at=b.slice(tt).join("/")),!startsWith$1(at,rt.leading))return{v:!1};var dt=at.slice(rt.leading.length);if(!endsWith$1(dt,rt.trailing))return{v:!1};var ut=dt.slice(0,dt.length-rt.trailing.length);if(!rt.namedParamDef)return ut===""?"continue":{v:!1};if(ut==="")return rt.namedParamDef["~internal"].optional?"continue":{v:!1};var ct=(nt=rt.namedParamDef["~internal"].valueSerializer.urlEncode)!=null?nt:!rt.namedParamDef["~internal"].trailing,ht=void 0;if(rt.namedParamDef["~internal"].array){if(ht=ut.split(s).map(function(mt){var pt;return(pt=rt.namedParamDef)==null?void 0:pt["~internal"].valueSerializer.parse(ct?decodeURIComponent(mt):mt)}),ht.some(function(mt){return mt===noMatch}))return{v:!1}}else if(ht=rt.namedParamDef["~internal"].valueSerializer.parse(ct?decodeURIComponent(ut):ut),ht===noMatch)return{v:!1};if(rt.namedParamDef["~internal"].trailing&&_&&rt.trailing===""&&(ht=ht+"/"),g[rt.namedParamDef.paramName]=ht,rt.namedParamDef["~internal"].trailing)return"break"},$=0;$<Math.max(h.length,b.length);$++){var _e=j($);if(_e==="break")break;if(_e!=="continue"&&typeof _e=="object")return _e.v}return{params:g,numExtraneousParams:0}}}function getObjectMatch(i){for(var e=i.object,a=i.paramDefs,s=i.urlEncodeDefault,o=i.arraySeparator,c={},d=Object.keys(a).map(function($){return _extends$1({name:$},a[$])}),h=_extends$1({},e),g=function(){var _e=b.value,et=e[_e.name];if(delete h[_e.name],et===void 0)return _e["~internal"].optional?"continue":{v:!1};var tt=void 0;if(et===null)if(_e["~internal"].array)tt=[];else return _e["~internal"].optional?"continue":{v:!1};else if(_e["~internal"].array){if(tt=et.split(o).map(function(nt){var rt;return _e["~internal"].valueSerializer.parse(((rt=_e["~internal"].valueSerializer.urlEncode)!=null?rt:s)?decodeURIComponent(nt):nt)}),tt.some(function(nt){return nt===noMatch}))return _e["~internal"].optional?"continue":{v:!1}}else{var it;if(tt=_e["~internal"].valueSerializer.parse(((it=_e["~internal"].valueSerializer.urlEncode)!=null?it:s)?decodeURIComponent(et):et),tt===noMatch)return _e["~internal"].optional?"continue":{v:!1}}c[_e.name]=tt},_=_createForOfIteratorHelperLoose(d),b;!(b=_()).done;){var j=g();if(j!=="continue"&&typeof j=="object")return j.v}return{params:c,numExtraneousParams:Object.keys(h).length}}function getStateMatch(i,e,a){return getObjectMatch({object:i??{},paramDefs:e,urlEncodeDefault:!1,arraySeparator:a})}function getQueryMatch(i,e,a,s){var o={};return i&&(o=a.parse(i)),getObjectMatch({object:o,paramDefs:e,urlEncodeDefault:!0,arraySeparator:s})}function createMatcher(i){var e=i.pathDefs,a=i.params,s=getParamDefsOfType("query",a),o=getParamDefsOfType("state",a),c={};return Object.keys(a).forEach(function(d){var h=a[d];h["~internal"].default!==void 0&&(c[d]=h["~internal"].default)}),function(d){var h=d.routerLocation,g=d.arraySeparator,_=d.queryStringSerializer;if(h.path===void 0)return!1;var b=getPathMatch({path:h.path,pathDefs:e,arraySeparator:g});if(b===!1)return!1;var j=getQueryMatch(h.query,s,_,g);if(j===!1)return!1;var $=getStateMatch(h.state,o,g);return $===!1?!1:{primaryPath:b.primaryPath,params:_extends$1({},c,b.params,j.params,$.params),numExtraneousParams:b.numExtraneousParams+j.numExtraneousParams+$.numExtraneousParams}}}function preventDefaultLinkClickBehavior(i){i===void 0&&(i={});var e=i,a=!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey),s=!e.target||!e.target.target||e.target.target==="_self";return s&&!e.defaultPrevented&&e.button===0&&!a?(e&&e.preventDefault&&e.preventDefault(),!0):!1}var startsWith$2=stringUtils.startsWith;function buildRoute(i){var e=i.routeName,a=i.params,s=i.location,o=i.routerContext,c=o.navigate,d=o.history,h=d.createHref({pathname:e===!1?s.fullPath:s.path,search:s.query?"?"+s.query:""});startsWith$2(h,"#")&&(h="/"+h),e!==!1&&o.baseUrl!=="/"&&(h=o.baseUrl+h);var g={name:e,params:a,href:h,link:{href:h,onClick:function(b){if(preventDefaultLinkClickBehavior(b))return g.push()}},action:null,push:function(){return c(_extends$1({},g,{action:"push"}),!0)},replace:function(){return c(_extends$1({},g,{action:"replace"}),!0)}};return g}function createRouteBuilder(i,e,a){var s=buildPathDefs(i,getParamDefsOfType("path",e["~internal"].params),e["~internal"].path),o=function(d){d===void 0&&(d={});var h=a(),g=h.arraySeparator,_=h.queryStringSerializer,b=h.baseUrl,j=_extends$1({},d);Object.keys(e["~internal"].params).forEach(function(_e){var et=e["~internal"].params[_e];j[_e]===void 0&&et["~internal"].default!==void 0&&(j[_e]=et["~internal"].default)});var $=createLocation({paramCollection:d,paramDefCollection:e["~internal"].params,arraySeparator:g,queryStringSerializer:_,pathDefs:s,baseUrl:b});return buildRoute({routeName:i,params:j,location:$,routerContext:h})};return Object.defineProperty(o,"name",{value:i}),o["~internal"]={type:"RouteBuilder",match:createMatcher({pathDefs:s,params:e["~internal"].params}),pathDefs:s,Route:null},o}function createQueryStringSerializer(i){var e,a;i===void 0&&(i={});var s=(e=i.queryStringArrayFormat)!=null?e:"singleKeyWithBracket",o=(a=i.arraySeparator)!=null?a:",",c=s==="multiKey"||s==="multiKeyWithBracket",d=s==="multiKey"||s==="singleKey"?"":"[]";return{parse:function(g){for(var _={},b=_createForOfIteratorHelperLoose(g.split("&")),j;!(j=b()).done;){var $=j.value,_e=$.split("="),et=_e[0],tt=_e[1],it=_e.slice(2);if(!(et===void 0||it.length>0)){var nt=decodeURIComponent(stringUtils.endsWith(et,d)?et.slice(0,et.length-d.length):et);tt===void 0?_[nt]=null:_[nt]&&c?_[nt]+=""+o+tt:_[nt]=tt}}return _},stringify:function(g){return Object.keys(g).map(function(_){var b=encodeURIComponent(_),j=g[_].array?""+b+d:b,$=g[_].value;if($===null)return j;if(g[_].array&&c){var _e=$.split(o);return _e.map(function(et){return j+"="+et}).join("&")}return j+"="+$}).join("&")}}}function getMatchingRoute(i,e){var a=e.getRoutes,s=e.queryStringSerializer,o=e.arraySeparator,c=a(),d=!1;for(var h in c){var g=c[h]["~internal"].match({routerLocation:i,queryStringSerializer:s,arraySeparator:o});if(g!==!1){if(g.numExtraneousParams===0)return{route:c[h](g.params),primaryPath:g.primaryPath};(d===!1||g.numExtraneousParams<d.numExtraneousParams)&&(d=_extends$1({},g,{routeName:h}))}}return d?{route:c[d.routeName](d.params),primaryPath:d.primaryPath}:{route:buildRoute({routeName:!1,params:{},location:i,routerContext:e}),primaryPath:!0}}var startsWith$3=stringUtils.startsWith;function convertToRouterLocationFromHistoryLocation(i,e){return{fullPath:i.pathname,path:startsWith$3(i.pathname,e)?e!=="/"?i.pathname.replace(e,""):i.pathname:void 0,query:i.search?startsWith$3(i.search,"?")?i.search.slice(1):i.search:void 0,state:typeof i.state=="object"&&i.state!==null?i.state.state:void 0}}var splitFirst$1=stringUtils.splitFirst;function getRouteByHref(i,e,a){var s=splitFirst$1(i,"?"),o=s[0],c=s[1],d=convertToRouterLocationFromHistoryLocation({pathname:o,search:c,state:e},a.baseUrl);return getMatchingRoute(d,a)}function createNavigationHandlerManager(i){var e=i.startListening,a=i.stopListening,s=[],o=0;return{add:d,getHandlers:c};function c(){return s.map(function(h){var g=h.handler;return g})}function d(h){var g=o++;return s.push({id:g,handler:h}),s.length===1&&e(),_;function _(){var b=s.map(function(j){var $=j.id;return $}).indexOf(g);b>=0&&(s.splice(b,1),s.length===0&&a())}}}function attemptScrollToTop(i,e){if(i.action==="push"&&typeof window=="object"&&window!==null&&typeof window.scroll=="function"&&e!==!1&&typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string"&&!(navigator.userAgent.indexOf("Node.js")>0||navigator.userAgent.indexOf("jsdom")>0))try{window.scroll(0,0)}catch{}}function serializeStateParams(i,e){var a={};if(i.name)for(var s=Object.keys(i.params).sort(),o=_createForOfIteratorHelperLoose(s),c;!(c=o()).done;){var d=c.value,h=e[i.name]["~internal"].params[d]["~internal"];if(h.kind==="state"){var g=i.params[d];a[d]=h.valueSerializer.stringify(g)}}return a}var splitFirst$2=stringUtils.splitFirst;function createRouter(){for(var i,e,a,s,o,c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var g=parseArgs(d),_=g.routeDefs,b=g.opts,j=createNavigationHandlerManager({startListening:function(){it=tt.listen(function(yt){if(nt){nt=!1;return}var Ct=convertToRouterLocationFromHistoryLocation(yt.location,$),_t=yt.action.toLowerCase(),St=getMatchingRoute(Ct,pt()),Pt=St.route,bt=St.primaryPath;mt(_extends$1({},Pt,{action:_t}),bt)})},stopListening:function(){return it==null?void 0:it()}}),$=(i=b.baseUrl)!=null?i:"/",_e=(e=(a=b.arrayFormat)==null?void 0:a.separator)!=null?e:",",et=(s=b.queryStringSerializer)!=null?s:createQueryStringSerializer({queryStringArrayFormat:(o=b.arrayFormat)==null?void 0:o.queryString,arraySeparator:_e}),tt,it,nt=!1,rt=!1,at=null,st=null,ot=[];ct(b.session);var dt=createRouteBuilderCollection(pt),ut={routes:dt,session:{push:function(yt,Ct){var _t=getRouteByHref(yt,Ct,pt()),St=_t.route,Pt=_t.primaryPath;return ht(_extends$1({},St,{action:"push"}),Pt)},replace:function(yt,Ct){var _t=getRouteByHref(yt,Ct,pt()),St=_t.route,Pt=_t.primaryPath;return ht(_extends$1({},St,{action:"replace"}),Pt)},back:function(yt){yt===void 0&&(yt=1),tt.go(-yt)},forward:function(yt){yt===void 0&&(yt=1),tt.go(yt)},getInitialRoute:function(){if(!at){var yt=getMatchingRoute(convertToRouterLocationFromHistoryLocation(tt.location,$),pt());yt.primaryPath||(rt=!0,yt.route.replace(),yt=getMatchingRoute(convertToRouterLocationFromHistoryLocation(tt.location,$),pt())),at=yt.route}return at},reset:function(yt){return ct(yt)},block:function(yt){ot.push(yt);var Ct=tt.block(function(_t){var St=getMatchingRoute(convertToRouterLocationFromHistoryLocation(_t.location,$),pt()),Pt=St.route,bt=_t.action.toLowerCase();yt({route:_extends$1({},Pt,{action:bt}),retry:_t.retry})});return function(){ot.splice(ot.findIndex(function(_t){return _t===yt}),1),Ct()}},listen:function(yt){return j.add(yt)}}};return ut;function ct(ft){ft===void 0&&(ft={type:typeof window<"u"&&typeof window.document<"u"?"browser":"memory"}),at=null,ft.type==="memory"?tt=createMemoryHistory({initialEntries:ft.initialEntries,initialIndex:ft.initialIndex}):ft.type==="hash"?tt=createHashHistory({window:ft.window}):tt=createBrowserHistory({window:ft.window})}function ht(ft,yt){var Ct;if(ot.length>0){ot.forEach(function(Mt){Mt({route:ft,retry:function(){ft[ft.action==="push"?"push":"replace"]()}})});return}var _t=serializeStateParams(ft,_);if(!(((Ct=st)==null?void 0:Ct.href)===ft.href&&JSON.stringify(serializeStateParams(st,_))===JSON.stringify(_t))){rt?rt=!1:mt(ft,yt),nt=!0;var St=splitFirst$2(ft.href,"?"),Pt=St[0],bt=St[1];tt[ft.action==="replace"?"replace":"push"]({pathname:Pt,search:bt?"?"+bt:"",hash:""},_t?{state:_t}:void 0)}}function mt(ft,yt){if(!yt){ft.replace();return}for(var Ct=_createForOfIteratorHelperLoose(j.getHandlers()),_t;!(_t=Ct()).done;){var St=_t.value;St(ft)}attemptScrollToTop(ft,b.scrollToTop),st=ft}function pt(){return{queryStringSerializer:et,arraySeparator:_e,navigate:ht,history:tt,routeDefs:_,getRoutes:function(){return dt},baseUrl:$}}}function parseArgs(i){var e=i.length===1?i[0]:i[1],a=i.length===1?{}:i[0];return{routeDefs:e,opts:a}}function createRouteBuilderCollection(i){var e={},a=i(),s=a.routeDefs;for(var o in s){var c=s[o];e[o]=createRouteBuilder(o,c,i)}return e}function defineRoute(){for(var i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];var s=parseArgs$1(e),o={"~internal":{type:"RouteDef",params:s.params,path:s.path},extend:function(){for(var d=arguments.length,h=new Array(d),g=0;g<d;g++)h[g]=arguments[g];var _=parseArgs$1(h),b=_.params,j=_.path,$=Object.keys(s.params),_e=Object.keys(b);return $.filter(function(et){return _e.indexOf(et)>=0}),defineRoute(_extends$1({},b,s.params),function(et){var tt,it=asArray$1(s.path(rt($))),nt=asArray$1(j(rt(_e)));return(tt=[]).concat.apply(tt,it.map(function(at){return nt.map(function(st){return at==="/"?st:at+(st==="/"?"":st)})}));function rt(at){var st={};return at.forEach(function(ot){st[ot]=et[ot]}),st}})}};return o}function parseArgs$1(i){return i.length===1?{params:{},path:function(){return i[0]}}:{params:i[0],path:i[1]}}function createRouter$1(){for(var i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];var s=parseArgs(e),o=s.opts,c=s.routeDefs,d=createRouter(_extends$1({},o,{scrollToTop:!1}),c),h=reactExports.createContext(null);return _extends$1({},d,{RouteProvider:g,useRoute:_});function g(b){var j=reactExports.useState(d.session.getInitialRoute()),$=j[0],_e=j[1];return reactExports.useLayoutEffect(function(){return d.session.listen(_e)},[]),reactExports.useEffect(function(){attemptScrollToTop($,o.scrollToTop)},[$]),reactExports.createElement(h.Provider,{value:$},b.children)}function _(){var b=reactExports.useContext(h);return b}}const{RouteProvider,useRoute,routes}=createRouter$1({home:defineRoute("/"),map:defineRoute("/cartes"),personal_data:defineRoute("/donnees-personnelles")}),prEulerianApi=startEulerianAnalytics({domain:"acwg.cartes.gouv.fr",site:{environment:"development",entity:"IGN"}}),{ConsentBannerAndConsentManagement,FooterConsentManagementItem,FooterPersonalDataPolicyItem,useConsent}=createConsentManagement({finalityDescription:()=>({eulerianAnalytics:{title:"Eulerian Analytics",description:["En cliquant sur 'Accepter', vous consentez à l'utilisation des cookies pour nous","aider à améliorer notre site web en collectant et en rapportant des informations","sur votre utilisation grâce à Eulerian Analytics. Si vous n'êtes pas d'accord, veuillez","cliquer sur 'Refuser'. Votre expérience de navigation ne sera pas affectée."].join(" ")}}),personalDataPolicyLinkProps:routes.personal_data().link,consentCallback:async({finalityConsent:i})=>{const e=await prEulerianApi;i.eulerianAnalytics?(console.log("Enabling eulerian analytics"),e.enable()):(console.log("Disabling eulerian analytics"),e.disable())}}),exceptions=["GPoverviewMap"];function getSameSideOpenedPanel(i,e){var a=[...exceptions,e],s=[];if(i.includes("left")){var o=document.getElementById("position-container-bottom-left"),c=document.getElementById("position-container-top-left");s=[...o.children,...c.children]}if(i.includes("right")){var d=document.getElementById("position-container-bottom-right"),h=document.getElementById("position-container-top-right");s=[...d.children,...h.children]}return s.filter(g=>{var _=g.id.match(/(\w+)-[0-9]+/)[1],b=a.includes(_),j=g.getElementsByTagName("button")[0].getAttribute("aria-pressed");if(j==="true"&&!b)return g})}var PanelManager=function(i,e){var a=getSameSideOpenedPanel(i,e);a.length>0&&a[0].getElementsByTagName("button")[0].click()},Widget={onPanelOpen:function(){PanelManager(this.options.position,this.element.id.match(/(\w+)-[0-9]+/)[1])}};class BaseEvent{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ObjectEventType={PROPERTYCHANGE:"propertychange"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function binarySearch$1(i,e,a){let s,o;a=a||ascending;let c=0,d=i.length,h=!1;for(;c<d;)s=c+(d-c>>1),o=+a(i[s],e),o<0?c=s+1:(d=s,h=!o);return h?c:~c}function ascending(i,e){return i>e?1:i<e?-1:0}function linearFindNearest(i,e,a){if(i[0]<=e)return 0;const s=i.length;if(e<=i[s-1])return s-1;if(typeof a=="function"){for(let o=1;o<s;++o){const c=i[o];if(c===e)return o;if(c<e)return a(e,i[o-1],c)>0?o-1:o}return s-1}if(a>0){for(let o=1;o<s;++o)if(i[o]<e)return o-1;return s-1}if(a<0){for(let o=1;o<s;++o)if(i[o]<=e)return o;return s-1}for(let o=1;o<s;++o){if(i[o]==e)return o;if(i[o]<e)return i[o-1]-e<e-i[o]?o-1:o}return s-1}function reverseSubArray(i,e,a){for(;e<a;){const s=i[e];i[e]=i[a],i[a]=s,++e,--a}}function extend$4(i,e){const a=Array.isArray(e)?e:[e],s=a.length;for(let o=0;o<s;o++)i[i.length]=a[o]}function equals$2(i,e){const a=i.length;if(a!==e.length)return!1;for(let s=0;s<a;s++)if(i[s]!==e[s])return!1;return!0}function isSorted(i,e,a){const s=e||ascending;return i.every(function(o,c){if(c===0)return!0;const d=s(i[c-1],o);return!(d>0||d===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(i){let e=!1,a,s,o;return function(){const c=Array.prototype.slice.call(arguments);return(!e||this!==o||!equals$2(c,s))&&(e=!0,o=this,s=c,a=i.apply(this,arguments)),a}}function toPromise(i){function e(){let a;try{a=i()}catch(s){return Promise.reject(s)}return a instanceof Promise?a:Promise.resolve(a)}return e()}function clear$1(i){for(const e in i)delete i[e]}function isEmpty$1(i){let e;for(e in i)return!1;return!e}class Target extends Disposable{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,a){if(!e||!a)return;const s=this.listeners_||(this.listeners_={}),o=s[e]||(s[e]=[]);o.includes(a)||o.push(a)}dispatchEvent(e){const a=typeof e=="string",s=a?e:e.type,o=this.listeners_&&this.listeners_[s];if(!o)return;const c=a?new BaseEvent(e):e;c.target||(c.target=this.eventTarget_||this);const d=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});s in d||(d[s]=0,h[s]=0),++d[s];let g;for(let _=0,b=o.length;_<b;++_)if("handleEvent"in o[_]?g=o[_].handleEvent(c):g=o[_].call(this,c),g===!1||c.propagationStopped){g=!1;break}if(--d[s]===0){let _=h[s];for(delete h[s];_--;)this.removeEventListener(s,VOID);delete d[s]}return g}disposeInternal(){this.listeners_&&clear$1(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,a){if(!this.listeners_)return;const s=this.listeners_[e];if(!s)return;const o=s.indexOf(a);o!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(s[o]=VOID,++this.pendingRemovals_[e]):(s.splice(o,1),s.length===0&&delete this.listeners_[e]))}}const EventType={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function listen(i,e,a,s,o){if(s&&s!==i&&(a=a.bind(s)),o){const d=a;a=function(){i.removeEventListener(e,a),d.apply(this,arguments)}}const c={target:i,type:e,listener:a};return i.addEventListener(e,a),c}function listenOnce(i,e,a,s){return listen(i,e,a,s,!0)}function unlistenByKey(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),clear$1(i))}class Observable extends Target{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType.CHANGE)}getRevision(){return this.revision_}onInternal(e,a){if(Array.isArray(e)){const s=e.length,o=new Array(s);for(let c=0;c<s;++c)o[c]=listen(this,e[c],a);return o}return listen(this,e,a)}onceInternal(e,a){let s;if(Array.isArray(e)){const o=e.length;s=new Array(o);for(let c=0;c<o;++c)s[c]=listenOnce(this,e[c],a)}else s=listenOnce(this,e,a);return a.ol_key=s,s}unInternal(e,a){const s=a.ol_key;if(s)unByKey(s);else if(Array.isArray(e))for(let o=0,c=e.length;o<c;++o)this.removeEventListener(e[o],a);else this.removeEventListener(e,a)}}Observable.prototype.on;Observable.prototype.once;Observable.prototype.un;function unByKey(i){if(Array.isArray(i))for(let e=0,a=i.length;e<a;++e)unlistenByKey(i[e]);else unlistenByKey(i)}function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(i){return i.ol_uid||(i.ol_uid=String(++uidCounter_))}class ObjectEvent extends BaseEvent{constructor(e,a,s){super(e),this.key=a,this.oldValue=s}}class BaseObject extends Observable{constructor(e){super(),this.on,this.once,this.un,getUid(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let a;return this.values_&&this.values_.hasOwnProperty(e)&&(a=this.values_[e]),a}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,a){let s;s=`change:${e}`,this.hasListener(s)&&this.dispatchEvent(new ObjectEvent(s,e,a)),s=ObjectEventType.PROPERTYCHANGE,this.hasListener(s)&&this.dispatchEvent(new ObjectEvent(s,e,a))}addChangeListener(e,a){this.addEventListener(`change:${e}`,a)}removeChangeListener(e,a){this.removeEventListener(`change:${e}`,a)}set(e,a,s){const o=this.values_||(this.values_={});if(s)o[e]=a;else{const c=o[e];o[e]=a,c!==a&&this.notify(e,c)}}setProperties(e,a){for(const s in e)this.set(s,e[s],a)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,a){if(this.values_&&e in this.values_){const s=this.values_[e];delete this.values_[e],isEmpty$1(this.values_)&&(this.values_=null),a||this.notify(e,s)}}}const MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ua=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",FIREFOX=ua.includes("firefox"),SAFARI=ua.includes("safari")&&!ua.includes("chrom");SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua));const WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio<"u"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image<"u"&&Image.prototype.decode,PASSIVE_EVENT_LISTENERS=function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i}();function createCanvasContext2D(i,e,a,s){let o;return a&&a.length?o=a.shift():WORKER_OFFSCREEN_CANVAS?o=new OffscreenCanvas(i||300,e||300):o=document.createElement("canvas"),i&&(o.width=i),e&&(o.height=e),o.getContext("2d",s)}function releaseCanvas(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function outerWidth(i){let e=i.offsetWidth;const a=getComputedStyle(i);return e+=parseInt(a.marginLeft,10)+parseInt(a.marginRight,10),e}function outerHeight(i){let e=i.offsetHeight;const a=getComputedStyle(i);return e+=parseInt(a.marginTop,10)+parseInt(a.marginBottom,10),e}function replaceNode(i,e){const a=e.parentNode;a&&a.replaceChild(i,e)}function removeNode(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function removeChildren(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function replaceChildren(i,e){const a=i.childNodes;for(let s=0;;++s){const o=a[s],c=e[s];if(!o&&!c)break;if(o!==c){if(!o){i.appendChild(c);continue}if(!c){i.removeChild(o),--s;continue}i.insertBefore(c,o)}}}class Control extends BaseObject{constructor(e){super();const a=e.element;a&&!e.target&&!a.style.pointerEvents&&(a.style.pointerEvents="auto"),this.element=a||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){removeNode(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&removeNode(this.element);for(let a=0,s=this.listenerKeys.length;a<s;++a)unlistenByKey(this.listenerKeys[a]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var checkDsfr=function(){var i=getComputedStyle(document.documentElement),e=i.getPropertyValue("--blue-france-sun-113-625");return e!==""},ControlExtended=class extends Control{constructor(e){super(e)}setPosition(e){if(this.getMap()){var a=new PositionFactory(this);a.set(e)}}updatePosition(e){if(this.getMap()){var a=new PositionFactory(this);a.update(e)}}};const ANCHORS=["top-left","top-right","bottom-left","bottom-right"];var kn,_i,Ar,$r;class PositionFactory{constructor(e){Ut(this,kn);return this.caller=e,this.container=null,Bt(this,kn,Ar).call(this,"top-left"),Bt(this,kn,Ar).call(this,"top-right"),Bt(this,kn,Ar).call(this,"bottom-left"),Bt(this,kn,Ar).call(this,"bottom-right"),this}set(e){ANCHORS.includes(e.toLowerCase())&&(Bt(this,kn,$r).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}update(e){ANCHORS.includes(e.toLowerCase())&&Bt(this,kn,$r).call(this,e,!0)}}kn=new WeakSet,_i=function(e){var a=this.container.children["position-container-"+e];return!!a},Ar=function(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!Bt(this,kn,_i).call(this,e)){var a=document.createElement("div");a.id="position-container-"+e,a.className="position position-container-"+e,this.container.appendChild(a)}},$r=function(e,a){var s=this;const o=b=>{var j=s.container.children["position-container-"+b];return j.children.length},c=b=>{var j=s.container.children["position-container-"+b],$=j.offsetWidth;return $},d=b=>{var j=s.container.children["position-container-"+b],$=j.offsetHeight;if(a){b.includes("top")&&($=0);for(let _e=0;_e<j.children.length;_e++){if(j.children[_e].id===s.caller.element.id){$=b.includes("bottom")?$-s.caller.element.offsetHeight:$*-1;break}$-=j.children[_e].offsetHeight}}return $},h=b=>{b.style.top="unset",b.style.bottom="unset",b.style.left="unset",b.style.right="unset"};h(this.caller.element),this.caller.element.style.position="unset";var g=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(g.length!==0){var _=0;g.forEach(b=>{if(b.nodeName.toLowerCase()==="dialog"){switch(h(b),e.toLowerCase()){case"top-left":checkDsfr()?b.style.top="0px":b.style.top=o(e)?d(e)+"px":"0px",b.style.left=c(e)+_+"px";break;case"bottom-left":checkDsfr()?b.style.top="0px":b.style.bottom=o(e)?d(e)+"px":"0px",b.style.left=c(e)+_+"px";break;case"top-right":checkDsfr()?b.style.top="0px":b.style.top=o(e)?d(e)+"px":"0px",b.style.right=c(e)+_+"px";break;case"bottom-right":checkDsfr()?b.style.top="0px":b.style.bottom=o(e)?d(e)+"px":"0px",b.style.right=c(e)+_+"px";break}_+=b.offsetWidth}})}};const Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(i){const e=createEmpty();for(let a=0,s=i.length;a<s;++a)extendCoordinate(e,i[a]);return e}function _boundingExtentXYs(i,e,a){const s=Math.min.apply(null,i),o=Math.min.apply(null,e),c=Math.max.apply(null,i),d=Math.max.apply(null,e);return createOrUpdate$2(s,o,c,d,a)}function buffer(i,e,a){return a?(a[0]=i[0]-e,a[1]=i[1]-e,a[2]=i[2]+e,a[3]=i[3]+e,a):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function clone$1(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function closestSquaredDistanceXY(i,e,a){let s,o;return e<i[0]?s=i[0]-e:i[2]<e?s=e-i[2]:s=0,a<i[1]?o=i[1]-a:i[3]<a?o=a-i[3]:o=0,s*s+o*o}function containsCoordinate(i,e){return containsXY(i,e[0],e[1])}function containsExtent(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function containsXY(i,e,a){return i[0]<=e&&e<=i[2]&&i[1]<=a&&a<=i[3]}function coordinateRelationship(i,e){const a=i[0],s=i[1],o=i[2],c=i[3],d=e[0],h=e[1];let g=Relationship.UNKNOWN;return d<a?g=g|Relationship.LEFT:d>o&&(g=g|Relationship.RIGHT),h<s?g=g|Relationship.BELOW:h>c&&(g=g|Relationship.ABOVE),g===Relationship.UNKNOWN&&(g=Relationship.INTERSECTING),g}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(i,e,a,s,o){return o?(o[0]=i,o[1]=e,o[2]=a,o[3]=s,o):[i,e,a,s]}function createOrUpdateEmpty(i){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,i)}function createOrUpdateFromCoordinate(i,e){const a=i[0],s=i[1];return createOrUpdate$2(a,s,a,s,e)}function createOrUpdateFromFlatCoordinates(i,e,a,s,o){const c=createOrUpdateEmpty(o);return extendFlatCoordinates(c,i,e,a,s)}function equals$1(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function extend$3(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function extendCoordinate(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function extendFlatCoordinates(i,e,a,s,o){for(;a<s;a+=o)extendXY(i,e[a],e[a+1]);return i}function extendXY(i,e,a){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],a),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],a)}function forEachCorner(i,e){let a;return a=e(getBottomLeft(i)),a||(a=e(getBottomRight(i)),a)||(a=e(getTopRight(i)),a)||(a=e(getTopLeft(i)),a)?a:!1}function getArea(i){let e=0;return isEmpty(i)||(e=getWidth(i)*getHeight(i)),e}function getBottomLeft(i){return[i[0],i[1]]}function getBottomRight(i){return[i[2],i[1]]}function getCenter(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function getCorner(i,e){let a;if(e==="bottom-left")a=getBottomLeft(i);else if(e==="bottom-right")a=getBottomRight(i);else if(e==="top-left")a=getTopLeft(i);else if(e==="top-right")a=getTopRight(i);else throw new Error("Invalid corner");return a}function getForViewAndSize(i,e,a,s,o){const[c,d,h,g,_,b,j,$]=getRotatedViewport(i,e,a,s);return createOrUpdate$2(Math.min(c,h,_,j),Math.min(d,g,b,$),Math.max(c,h,_,j),Math.max(d,g,b,$),o)}function getRotatedViewport(i,e,a,s){const o=e*s[0]/2,c=e*s[1]/2,d=Math.cos(a),h=Math.sin(a),g=o*d,_=o*h,b=c*d,j=c*h,$=i[0],_e=i[1];return[$-g+j,_e-_-b,$-g-j,_e-_+b,$+g-j,_e+_+b,$+g+j,_e+_-b,$-g+j,_e-_-b]}function getHeight(i){return i[3]-i[1]}function getIntersection(i,e,a){const s=a||createEmpty();return intersects$1(i,e)?(i[0]>e[0]?s[0]=i[0]:s[0]=e[0],i[1]>e[1]?s[1]=i[1]:s[1]=e[1],i[2]<e[2]?s[2]=i[2]:s[2]=e[2],i[3]<e[3]?s[3]=i[3]:s[3]=e[3]):createOrUpdateEmpty(s),s}function getTopLeft(i){return[i[0],i[3]]}function getTopRight(i){return[i[2],i[3]]}function getWidth(i){return i[2]-i[0]}function intersects$1(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function isEmpty(i){return i[2]<i[0]||i[3]<i[1]}function returnOrUpdate(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function intersectsSegment(i,e,a){let s=!1;const o=coordinateRelationship(i,e),c=coordinateRelationship(i,a);if(o===Relationship.INTERSECTING||c===Relationship.INTERSECTING)s=!0;else{const d=i[0],h=i[1],g=i[2],_=i[3],b=e[0],j=e[1],$=a[0],_e=a[1],et=(_e-j)/($-b);let tt,it;c&Relationship.ABOVE&&!(o&Relationship.ABOVE)&&(tt=$-(_e-_)/et,s=tt>=d&&tt<=g),!s&&c&Relationship.RIGHT&&!(o&Relationship.RIGHT)&&(it=_e-($-g)*et,s=it>=h&&it<=_),!s&&c&Relationship.BELOW&&!(o&Relationship.BELOW)&&(tt=$-(_e-h)/et,s=tt>=d&&tt<=g),!s&&c&Relationship.LEFT&&!(o&Relationship.LEFT)&&(it=_e-($-d)*et,s=it>=h&&it<=_)}return s}function applyTransform(i,e,a,s){if(isEmpty(i))return createOrUpdateEmpty(a);let o=[];o=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]],e(o,o,2);const c=[],d=[];for(let h=0,g=o.length;h<g;h+=2)c.push(o[h]),d.push(o[h+1]);return _boundingExtentXYs(c,d,a)}function wrapX$2(i,e){const a=e.getExtent(),s=getCenter(i);if(e.canWrapX()&&(s[0]<a[0]||s[0]>=a[2])){const o=getWidth(a),d=Math.floor((s[0]-a[0])/o)*o;i[0]-=d,i[2]-=d}return i}function wrapAndSliceX(i,e){if(e.canWrapX()){const a=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[a[0],i[1],a[2],i[3]]];wrapX$2(i,e);const s=getWidth(a);if(getWidth(i)>s)return[[a[0],i[1],a[2],i[3]]];if(i[0]<a[0])return[[i[0]+s,i[1],a[2],i[3]],[a[0],i[1],i[2],i[3]]];if(i[2]>a[2])return[[i[0],i[1],a[2],i[3]],[a[0],i[1],i[2]-s,i[3]]]}return[i]}const METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Projection$1=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$2=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection$1{constructor(e){super({code:e,units:"m",extent:EXTENT$2,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(a,s){return a/Math.cosh(s[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(i,e,a){const s=i.length;a=a>1?a:2,e===void 0&&(a>2?e=i.slice():e=new Array(s));for(let o=0;o<s;o+=a){e[o]=HALF_SIZE*i[o]/180;let c=RADIUS$1*Math.log(Math.tan(Math.PI*(+i[o+1]+90)/360));c>MAX_SAFE_Y?c=MAX_SAFE_Y:c<-MAX_SAFE_Y&&(c=-MAX_SAFE_Y),e[o+1]=c}return e}function toEPSG4326(i,e,a){const s=i.length;a=a>1?a:2,e===void 0&&(a>2?e=i.slice():e=new Array(s));for(let o=0;o<s;o+=a)e[o]=180*i[o]/HALF_SIZE,e[o+1]=360*Math.atan(Math.exp(i[o+1]/RADIUS$1))/Math.PI-90;return e}const RADIUS=6378137,EXTENT$1=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection$1{constructor(e,a){super({code:e,units:"degrees",extent:EXTENT$1,axisOrientation:a,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT$1})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache$1={};function get$5(i){return cache$1[i]||cache$1[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$3(i,e){cache$1[i]=e}let transforms={};function add$2(i,e,a){const s=i.getCode(),o=e.getCode();s in transforms||(transforms[s]={}),transforms[s][o]=a}function get$4(i,e){let a;return i in transforms&&e in transforms[i]&&(a=transforms[i][e]),a}function clamp(i,e,a){return Math.min(Math.max(i,e),a)}function squaredSegmentDistance(i,e,a,s,o,c){const d=o-a,h=c-s;if(d!==0||h!==0){const g=((i-a)*d+(e-s)*h)/(d*d+h*h);g>1?(a=o,s=c):g>0&&(a+=d*g,s+=h*g)}return squaredDistance$1(i,e,a,s)}function squaredDistance$1(i,e,a,s){const o=a-i,c=s-e;return o*o+c*c}function solveLinearSystem(i){const e=i.length;for(let s=0;s<e;s++){let o=s,c=Math.abs(i[s][s]);for(let h=s+1;h<e;h++){const g=Math.abs(i[h][s]);g>c&&(c=g,o=h)}if(c===0)return null;const d=i[o];i[o]=i[s],i[s]=d;for(let h=s+1;h<e;h++){const g=-i[h][s]/i[s][s];for(let _=s;_<e+1;_++)s==_?i[h][_]=0:i[h][_]+=g*i[s][_]}}const a=new Array(e);for(let s=e-1;s>=0;s--){a[s]=i[s][e]/i[s][s];for(let o=s-1;o>=0;o--)i[o][e]-=i[o][s]*a[s]}return a}function toRadians(i){return i*Math.PI/180}function modulo(i,e){const a=i%e;return a*e<0?a+e:a}function lerp(i,e,a){return i+a*(e-i)}function toFixed(i,e){const a=Math.pow(10,e);return Math.round(i*a)/a}function round(i,e){return Math.round(toFixed(i,e))}function floor(i,e){return Math.floor(toFixed(i,e))}function ceil(i,e){return Math.ceil(toFixed(i,e))}function compareVersions(i,e){const a=(""+i).split("."),s=(""+e).split(".");for(let o=0;o<Math.max(a.length,s.length);o++){const c=parseInt(a[o]||"0",10),d=parseInt(s[o]||"0",10);if(c>d)return 1;if(d>c)return-1}return 0}function add$1(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function closestOnSegment(i,e){const a=i[0],s=i[1],o=e[0],c=e[1],d=o[0],h=o[1],g=c[0],_=c[1],b=g-d,j=_-h,$=b===0&&j===0?0:(b*(a-d)+j*(s-h))/(b*b+j*j||0);let _e,et;return $<=0?(_e=d,et=h):$>=1?(_e=g,et=_):(_e=d+$*b,et=h+$*j),[_e,et]}function equals(i,e){let a=!0;for(let s=i.length-1;s>=0;--s)if(i[s]!=e[s]){a=!1;break}return a}function rotate$1(i,e){const a=Math.cos(e),s=Math.sin(e),o=i[0]*a-i[1]*s,c=i[1]*a+i[0]*s;return i[0]=o,i[1]=c,i}function scale$3(i,e){return i[0]*=e,i[1]*=e,i}function squaredDistance(i,e){const a=i[0]-e[0],s=i[1]-e[1];return a*a+s*s}function distance(i,e){return Math.sqrt(squaredDistance(i,e))}function squaredDistanceToSegment(i,e){return squaredDistance(i,closestOnSegment(i,e))}function wrapX$1(i,e){if(e.canWrapX()){const a=getWidth(e.getExtent()),s=getWorldsAway(i,e,a);s&&(i[0]-=s*a)}return i}function getWorldsAway(i,e,a){const s=e.getExtent();let o=0;return e.canWrapX()&&(i[0]<s[0]||i[0]>s[2])&&(a=a||getWidth(s),o=Math.floor((i[0]-s[0])/a)),o}const DEFAULT_RADIUS=63710088e-1;function getDistance(i,e,a){a=a||DEFAULT_RADIUS;const s=toRadians(i[1]),o=toRadians(e[1]),c=(o-s)/2,d=toRadians(e[0]-i[0])/2,h=Math.sin(c)*Math.sin(c)+Math.sin(d)*Math.sin(d)*Math.cos(s)*Math.cos(o);return 2*a*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function warn(...i){console.warn(...i)}let showCoordinateWarning=!0;function disableCoordinateWarning(i){showCoordinateWarning=!1}function cloneTransform(i,e){if(e!==void 0){for(let a=0,s=i.length;a<s;++a)e[a]=i[a];e=e}else e=i.slice();return e}function identityTransform(i,e){if(e!==void 0&&i!==e){for(let a=0,s=i.length;a<s;++a)e[a]=i[a];i=e}return i}function addProjection(i){add$3(i.getCode(),i),add$2(i,i,cloneTransform)}function addProjections(i){i.forEach(addProjection)}function get$3(i){return typeof i=="string"?get$5(i):i||null}function getPointResolution(i,e,a,s){i=get$3(i);let o;const c=i.getPointResolutionFunc();if(c){if(o=c(e,a),s&&s!==i.getUnits()){const d=i.getMetersPerUnit();d&&(o=o*d/METERS_PER_UNIT$1[s])}}else{const d=i.getUnits();if(d=="degrees"&&!s||s=="degrees")o=e;else{const h=getTransformFromProjections(i,get$3("EPSG:4326"));if(h===identityTransform&&d!=="degrees")o=e*i.getMetersPerUnit();else{let _=[a[0]-e/2,a[1],a[0]+e/2,a[1],a[0],a[1]-e/2,a[0],a[1]+e/2];_=h(_,_,2);const b=getDistance(_.slice(0,2),_.slice(2,4)),j=getDistance(_.slice(4,6),_.slice(6,8));o=(b+j)/2}const g=s?METERS_PER_UNIT$1[s]:i.getMetersPerUnit();g!==void 0&&(o/=g)}}return o}function addEquivalentProjections(i){addProjections(i),i.forEach(function(e){i.forEach(function(a){e!==a&&add$2(e,a,cloneTransform)})})}function addEquivalentTransforms(i,e,a,s){i.forEach(function(o){e.forEach(function(c){add$2(o,c,a),add$2(c,o,s)})})}function createProjection(i,e){return i?typeof i=="string"?get$3(i):i:get$3(e)}function createTransformFromCoordinateTransform(i){return function(e,a,s){const o=e.length;s=s!==void 0?s:2,a=a!==void 0?a:new Array(o);for(let c=0;c<o;c+=s){const d=i(e.slice(c,c+s)),h=d.length;for(let g=0,_=s;g<_;++g)a[c+g]=g>=h?e[c+g]:d[g]}return a}}function addCoordinateTransforms(i,e,a,s){const o=get$3(i),c=get$3(e);add$2(o,c,createTransformFromCoordinateTransform(a)),add$2(c,o,createTransformFromCoordinateTransform(s))}function fromLonLat(i,e){return disableCoordinateWarning(),transform$1(i,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function equivalent(i,e){if(i===e)return!0;const a=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||getTransformFromProjections(i,e)===cloneTransform)&&a}function getTransformFromProjections(i,e){const a=i.getCode(),s=e.getCode();let o=get$4(a,s);return o||(o=identityTransform),o}function getTransform(i,e){const a=get$3(i),s=get$3(e);return getTransformFromProjections(a,s)}function transform$1(i,e,a){return getTransform(e,a)(i,void 0,i.length)}function transformExtent(i,e,a,s){const o=getTransform(e,a);return applyTransform(i,o,void 0)}function toUserCoordinate(i,e){return i}function fromUserCoordinate(i,e){return showCoordinateWarning&&!equals(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(showCoordinateWarning=!1,warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function toUserExtent(i,e){return i}function fromUserExtent(i,e){return i}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();var SelectorID={generate:function(){var i=Math.floor(Date.now());return function(){return i++}}(),name:function(i){var e=null,a=i.lastIndexOf("-");return a===-1?e=i:e=i.substring(0,a),e},index:function(i){var e=null,a=this.name(i),s=a.lastIndexOf("_");return s!==-1&&(e=a.substring(s+1)),e},uuid:function(i){var e=null,a=i.lastIndexOf("-");return a!==-1&&(e=parseInt(i.substring(a+1),10)),e}},loglevel={exports:{}};(function(i){(function(e,a){i.exports?i.exports=a():e.log=a()})(commonjsGlobal,function(){var e=function(){},a="undefined",s=typeof window!==a&&typeof window.navigator!==a&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],c={},d=null;function h(tt,it){var nt=tt[it];if(typeof nt.bind=="function")return nt.bind(tt);try{return Function.prototype.bind.call(nt,tt)}catch{return function(){return Function.prototype.apply.apply(nt,[tt,arguments])}}}function g(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function _(tt){return tt==="debug"&&(tt="log"),typeof console===a?!1:tt==="trace"&&s?g:console[tt]!==void 0?h(console,tt):console.log!==void 0?h(console,"log"):e}function b(){for(var tt=this.getLevel(),it=0;it<o.length;it++){var nt=o[it];this[nt]=it<tt?e:this.methodFactory(nt,tt,this.name)}if(this.log=this.debug,typeof console===a&&tt<this.levels.SILENT)return"No console available for logging"}function j(tt){return function(){typeof console!==a&&(b.call(this),this[tt].apply(this,arguments))}}function $(tt,it,nt){return _(tt)||j.apply(this,arguments)}function _e(tt,it){var nt=this,rt,at,st,ot="loglevel";typeof tt=="string"?ot+=":"+tt:typeof tt=="symbol"&&(ot=void 0);function dt(pt){var ft=(o[pt]||"silent").toUpperCase();if(!(typeof window===a||!ot)){try{window.localStorage[ot]=ft;return}catch{}try{window.document.cookie=encodeURIComponent(ot)+"="+ft+";"}catch{}}}function ut(){var pt;if(!(typeof window===a||!ot)){try{pt=window.localStorage[ot]}catch{}if(typeof pt===a)try{var ft=window.document.cookie,yt=encodeURIComponent(ot),Ct=ft.indexOf(yt+"=");Ct!==-1&&(pt=/^([^;]+)/.exec(ft.slice(Ct+yt.length+1))[1])}catch{}return nt.levels[pt]===void 0&&(pt=void 0),pt}}function ct(){if(!(typeof window===a||!ot)){try{window.localStorage.removeItem(ot)}catch{}try{window.document.cookie=encodeURIComponent(ot)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function ht(pt){var ft=pt;if(typeof ft=="string"&&nt.levels[ft.toUpperCase()]!==void 0&&(ft=nt.levels[ft.toUpperCase()]),typeof ft=="number"&&ft>=0&&ft<=nt.levels.SILENT)return ft;throw new TypeError("log.setLevel() called with invalid level: "+pt)}nt.name=tt,nt.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},nt.methodFactory=it||$,nt.getLevel=function(){return st??at??rt},nt.setLevel=function(pt,ft){return st=ht(pt),ft!==!1&&dt(st),b.call(nt)},nt.setDefaultLevel=function(pt){at=ht(pt),ut()||nt.setLevel(pt,!1)},nt.resetLevel=function(){st=null,ct(),b.call(nt)},nt.enableAll=function(pt){nt.setLevel(nt.levels.TRACE,pt)},nt.disableAll=function(pt){nt.setLevel(nt.levels.SILENT,pt)},nt.rebuild=function(){if(d!==nt&&(rt=ht(d.getLevel())),b.call(nt),d===nt)for(var pt in c)c[pt].rebuild()},rt=ht(d?d.getLevel():"WARN");var mt=ut();mt!=null&&(st=ht(mt)),b.call(nt)}d=new _e,d.getLogger=function(it){if(typeof it!="symbol"&&typeof it!="string"||it==="")throw new TypeError("You must supply a name when creating a logger.");var nt=c[it];return nt||(nt=c[it]=new _e(it,d.methodFactory)),nt};var et=typeof window!==a?window.log:void 0;return d.noConflict=function(){return typeof window!==a&&window.log===d&&(window.log=et),d},d.getLoggers=function(){return c},d.default=d,d})})(loglevel);var loglevelExports=loglevel.exports,LoggerByDefault$1={getLogger:function(i){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var a=i||"default";return loglevelExports.getLogger(a)},disableAll:function(){var i=loglevelExports.getLoggers();for(const e in i)Object.hasOwnProperty.call(i,e)&&i[e].disableAll()},enableAll:function(){var i=loglevelExports.getLoggers();for(const e in i)Object.hasOwnProperty.call(i,e)&&i[e].enableAll()}};window.Gp&&(window.Gp.Logger=LoggerByDefault$1);var Config$1={configuration:{},isConfigLoaded:function(){if(this.configuration&&Object.keys(this.configuration).length!==0)return!0;var i=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{};return i.Gp&&i.Gp.Config&&i.Gp.Config.layers&&Object.keys(i.Gp.Config.layers).length!==0?(this.configuration=i.Gp.Config,!0):!1}};/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(i,e){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),a.push.apply(a,s)}return a}function _objectSpread2(i){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach(function(s){_defineProperty(i,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(a,s))})}return i}function _typeof(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(i)}function _defineProperty(i,e,a){return e in i?Object.defineProperty(i,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[e]=a,i}function _extends(){return _extends=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])}return i},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(i,e){if(i==null)return{};var a={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(a[o]=i[o]);return a}function _objectWithoutProperties(i,e){if(i==null)return{};var a=_objectWithoutPropertiesLoose(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(a[s]=i[s])}return a}var version$2="1.15.3";function userAgent(i){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(i)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(i,e,a){i.addEventListener(e,a,!IE11OrLess&&captureMode)}function off(i,e,a){i.removeEventListener(e,a,!IE11OrLess&&captureMode)}function matches(i,e){if(e){if(e[0]===">"&&(e=e.substring(1)),i)try{if(i.matches)return i.matches(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e)}catch{return!1}return!1}}function getParentOrHost(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function closest(i,e,a,s){if(i){a=a||document;do{if(e!=null&&(e[0]===">"?i.parentNode===a&&matches(i,e):matches(i,e))||s&&i===a)return i;if(i===a)break}while(i=getParentOrHost(i))}return null}var R_SPACE=/\s+/g;function toggleClass(i,e,a){if(i&&e)if(i.classList)i.classList[a?"add":"remove"](e);else{var s=(" "+i.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");i.className=(s+(a?" "+e:"")).replace(R_SPACE," ")}}function css(i,e,a){var s=i&&i.style;if(s){if(a===void 0)return document.defaultView&&document.defaultView.getComputedStyle?a=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(a=i.currentStyle),e===void 0?a:a[e];!(e in s)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),s[e]=a+(typeof a=="string"?"":"px")}}function matrix(i,e){var a="";if(typeof i=="string")a=i;else do{var s=css(i,"transform");s&&s!=="none"&&(a=s+" "+a)}while(!e&&(i=i.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(a)}function find(i,e,a){if(i){var s=i.getElementsByTagName(e),o=0,c=s.length;if(a)for(;o<c;o++)a(s[o],o);return s}return[]}function getWindowScrollingElement(){var i=document.scrollingElement;return i||document.documentElement}function getRect(i,e,a,s,o){if(!(!i.getBoundingClientRect&&i!==window)){var c,d,h,g,_,b,j;if(i!==window&&i.parentNode&&i!==getWindowScrollingElement()?(c=i.getBoundingClientRect(),d=c.top,h=c.left,g=c.bottom,_=c.right,b=c.height,j=c.width):(d=0,h=0,g=window.innerHeight,_=window.innerWidth,b=window.innerHeight,j=window.innerWidth),(e||a)&&i!==window&&(o=o||i.parentNode,!IE11OrLess))do if(o&&o.getBoundingClientRect&&(css(o,"transform")!=="none"||a&&css(o,"position")!=="static")){var $=o.getBoundingClientRect();d-=$.top+parseInt(css(o,"border-top-width")),h-=$.left+parseInt(css(o,"border-left-width")),g=d+c.height,_=h+c.width;break}while(o=o.parentNode);if(s&&i!==window){var _e=matrix(o||i),et=_e&&_e.a,tt=_e&&_e.d;_e&&(d/=tt,h/=et,j/=et,b/=tt,g=d+b,_=h+j)}return{top:d,left:h,bottom:g,right:_,width:j,height:b}}}function isScrolledPast(i,e,a){for(var s=getParentAutoScrollElement(i,!0),o=getRect(i)[e];s;){var c=getRect(s)[a],d=void 0;if(d=o>=c,!d)return s;if(s===getWindowScrollingElement())break;s=getParentAutoScrollElement(s,!1)}return!1}function getChild(i,e,a,s){for(var o=0,c=0,d=i.children;c<d.length;){if(d[c].style.display!=="none"&&d[c]!==Sortable.ghost&&(s||d[c]!==Sortable.dragged)&&closest(d[c],a.draggable,i,!1)){if(o===e)return d[c];o++}c++}return null}function lastChild(i,e){for(var a=i.lastElementChild;a&&(a===Sortable.ghost||css(a,"display")==="none"||e&&!matches(a,e));)a=a.previousElementSibling;return a||null}function index(i,e){var a=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==Sortable.clone&&(!e||matches(i,e))&&a++;return a}function getRelativeScrollOffset(i){var e=0,a=0,s=getWindowScrollingElement();if(i)do{var o=matrix(i),c=o.a,d=o.d;e+=i.scrollLeft*c,a+=i.scrollTop*d}while(i!==s&&(i=i.parentNode));return[e,a]}function indexOfObject(i,e){for(var a in i)if(i.hasOwnProperty(a)){for(var s in e)if(e.hasOwnProperty(s)&&e[s]===i[a][s])return Number(a)}return-1}function getParentAutoScrollElement(i,e){if(!i||!i.getBoundingClientRect)return getWindowScrollingElement();var a=i,s=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var o=css(a);if(a.clientWidth<a.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||a.clientHeight<a.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!a.getBoundingClientRect||a===document.body)return getWindowScrollingElement();if(s||e)return a;s=!0}}while(a=a.parentNode);return getWindowScrollingElement()}function extend$2(i,e){if(i&&e)for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a]);return i}function isRectEqual(i,e){return Math.round(i.top)===Math.round(e.top)&&Math.round(i.left)===Math.round(e.left)&&Math.round(i.height)===Math.round(e.height)&&Math.round(i.width)===Math.round(e.width)}var _throttleTimeout;function throttle(i,e){return function(){if(!_throttleTimeout){var a=arguments,s=this;a.length===1?i.call(s,a[0]):i.apply(s,a),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(i,e,a){i.scrollLeft+=e,i.scrollTop+=a}function clone(i){var e=window.Polymer,a=window.jQuery||window.Zepto;return e&&e.dom?e.dom(i).cloneNode(!0):a?a(i).clone(!0)[0]:i.cloneNode(!0)}function getChildContainingRectFromElement(i,e,a){var s={};return Array.from(i.children).forEach(function(o){var c,d,h,g;if(!(!closest(o,e.draggable,i,!1)||o.animated||o===a)){var _=getRect(o);s.left=Math.min((c=s.left)!==null&&c!==void 0?c:1/0,_.left),s.top=Math.min((d=s.top)!==null&&d!==void 0?d:1/0,_.top),s.right=Math.max((h=s.right)!==null&&h!==void 0?h:-1/0,_.right),s.bottom=Math.max((g=s.bottom)!==null&&g!==void 0?g:-1/0,_.bottom)}}),s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var i=[],e;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var s=[].slice.call(this.el.children);s.forEach(function(o){if(!(css(o,"display")==="none"||o===Sortable.ghost)){i.push({target:o,rect:getRect(o)});var c=_objectSpread2({},i[i.length-1].rect);if(o.thisAnimationDuration){var d=matrix(o,!0);d&&(c.top-=d.f,c.left-=d.e)}o.fromRect=c}})}},addAnimationState:function(s){i.push(s)},removeAnimationState:function(s){i.splice(indexOfObject(i,{target:s}),1)},animateAll:function(s){var o=this;if(!this.options.animation){clearTimeout(e),typeof s=="function"&&s();return}var c=!1,d=0;i.forEach(function(h){var g=0,_=h.target,b=_.fromRect,j=getRect(_),$=_.prevFromRect,_e=_.prevToRect,et=h.rect,tt=matrix(_,!0);tt&&(j.top-=tt.f,j.left-=tt.e),_.toRect=j,_.thisAnimationDuration&&isRectEqual($,j)&&!isRectEqual(b,j)&&(et.top-j.top)/(et.left-j.left)===(b.top-j.top)/(b.left-j.left)&&(g=calculateRealTime(et,$,_e,o.options)),isRectEqual(j,b)||(_.prevFromRect=b,_.prevToRect=j,g||(g=o.options.animation),o.animate(_,et,j,g)),g&&(c=!0,d=Math.max(d,g),clearTimeout(_.animationResetTimer),_.animationResetTimer=setTimeout(function(){_.animationTime=0,_.prevFromRect=null,_.fromRect=null,_.prevToRect=null,_.thisAnimationDuration=null},g),_.thisAnimationDuration=g)}),clearTimeout(e),c?e=setTimeout(function(){typeof s=="function"&&s()},d):typeof s=="function"&&s(),i=[]},animate:function(s,o,c,d){if(d){css(s,"transition",""),css(s,"transform","");var h=matrix(this.el),g=h&&h.a,_=h&&h.d,b=(o.left-c.left)/(g||1),j=(o.top-c.top)/(_||1);s.animatingX=!!b,s.animatingY=!!j,css(s,"transform","translate3d("+b+"px,"+j+"px,0)"),this.forRepaintDummy=repaint(s),css(s,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:"")),css(s,"transform","translate3d(0,0,0)"),typeof s.animated=="number"&&clearTimeout(s.animated),s.animated=setTimeout(function(){css(s,"transition",""),css(s,"transform",""),s.animated=!1,s.animatingX=!1,s.animatingY=!1},d)}}}}function repaint(i){return i.offsetWidth}function calculateRealTime(i,e,a,s){return Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))/Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))*s.animation}var plugins=[],defaults$2={initializeByDefault:!0},PluginManager={mount:function(e){for(var a in defaults$2)defaults$2.hasOwnProperty(a)&&!(a in e)&&(e[a]=defaults$2[a]);plugins.forEach(function(s){if(s.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),plugins.push(e)},pluginEvent:function(e,a,s){var o=this;this.eventCanceled=!1,s.cancel=function(){o.eventCanceled=!0};var c=e+"Global";plugins.forEach(function(d){a[d.pluginName]&&(a[d.pluginName][c]&&a[d.pluginName][c](_objectSpread2({sortable:a},s)),a.options[d.pluginName]&&a[d.pluginName][e]&&a[d.pluginName][e](_objectSpread2({sortable:a},s)))})},initializePlugins:function(e,a,s,o){plugins.forEach(function(h){var g=h.pluginName;if(!(!e.options[g]&&!h.initializeByDefault)){var _=new h(e,a,e.options);_.sortable=e,_.options=e.options,e[g]=_,_extends(s,_.defaults)}});for(var c in e.options)if(e.options.hasOwnProperty(c)){var d=this.modifyOption(e,c,e.options[c]);typeof d<"u"&&(e.options[c]=d)}},getEventProperties:function(e,a){var s={};return plugins.forEach(function(o){typeof o.eventProperties=="function"&&_extends(s,o.eventProperties.call(a[o.pluginName],e))}),s},modifyOption:function(e,a,s){var o;return plugins.forEach(function(c){e[c.pluginName]&&c.optionListeners&&typeof c.optionListeners[a]=="function"&&(o=c.optionListeners[a].call(e[c.pluginName],s))}),o}};function dispatchEvent(i){var e=i.sortable,a=i.rootEl,s=i.name,o=i.targetEl,c=i.cloneEl,d=i.toEl,h=i.fromEl,g=i.oldIndex,_=i.newIndex,b=i.oldDraggableIndex,j=i.newDraggableIndex,$=i.originalEvent,_e=i.putSortable,et=i.extraEventProperties;if(e=e||a&&a[expando],!!e){var tt,it=e.options,nt="on"+s.charAt(0).toUpperCase()+s.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?tt=new CustomEvent(s,{bubbles:!0,cancelable:!0}):(tt=document.createEvent("Event"),tt.initEvent(s,!0,!0)),tt.to=d||a,tt.from=h||a,tt.item=o||a,tt.clone=c,tt.oldIndex=g,tt.newIndex=_,tt.oldDraggableIndex=b,tt.newDraggableIndex=j,tt.originalEvent=$,tt.pullMode=_e?_e.lastPutMode:void 0;var rt=_objectSpread2(_objectSpread2({},et),PluginManager.getEventProperties(s,e));for(var at in rt)tt[at]=rt[at];a&&a.dispatchEvent(tt),it[nt]&&it[nt].call(e,tt)}}var _excluded=["evt"],pluginEvent=function(e,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=s.evt,c=_objectWithoutProperties(s,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,a,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:o,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(h){_dispatchEvent({sortable:a,name:h,originalEvent:o})}},c))};function _dispatchEvent(i){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},i))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),_detectDirection=function(e,a){var s=css(e),o=parseInt(s.width)-parseInt(s.paddingLeft)-parseInt(s.paddingRight)-parseInt(s.borderLeftWidth)-parseInt(s.borderRightWidth),c=getChild(e,0,a),d=getChild(e,1,a),h=c&&css(c),g=d&&css(d),_=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+getRect(c).width,b=g&&parseInt(g.marginLeft)+parseInt(g.marginRight)+getRect(d).width;if(s.display==="flex")return s.flexDirection==="column"||s.flexDirection==="column-reverse"?"vertical":"horizontal";if(s.display==="grid")return s.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(c&&h.float&&h.float!=="none"){var j=h.float==="left"?"left":"right";return d&&(g.clear==="both"||g.clear===j)?"vertical":"horizontal"}return c&&(h.display==="block"||h.display==="flex"||h.display==="table"||h.display==="grid"||_>=o&&s[CSSFloatProperty]==="none"||d&&s[CSSFloatProperty]==="none"&&_+b>o)?"vertical":"horizontal"},_dragElInRowColumn=function(e,a,s){var o=s?e.left:e.top,c=s?e.right:e.bottom,d=s?e.width:e.height,h=s?a.left:a.top,g=s?a.right:a.bottom,_=s?a.width:a.height;return o===h||c===g||o+d/2===h+_/2},_detectNearestEmptySortable=function(e,a){var s;return sortables.some(function(o){var c=o[expando].options.emptyInsertThreshold;if(!(!c||lastChild(o))){var d=getRect(o),h=e>=d.left-c&&e<=d.right+c,g=a>=d.top-c&&a<=d.bottom+c;if(h&&g)return s=o}}),s},_prepareGroup=function(e){function a(c,d){return function(h,g,_,b){var j=h.options.group.name&&g.options.group.name&&h.options.group.name===g.options.group.name;if(c==null&&(d||j))return!0;if(c==null||c===!1)return!1;if(d&&c==="clone")return c;if(typeof c=="function")return a(c(h,g,_,b),d)(h,g,_,b);var $=(d?h:g).options.group.name;return c===!0||typeof c=="string"&&c===$||c.join&&c.indexOf($)>-1}}var s={},o=e.group;(!o||_typeof(o)!="object")&&(o={name:o}),s.name=o.name,s.checkPull=a(o.pull,!0),s.checkPut=a(o.put),s.revertClone=o.revertClone,e.group=s},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(i){if(ignoreNextClick)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var a=_detectNearestEmptySortable(e.clientX,e.clientY);if(a){var s={};for(var o in e)e.hasOwnProperty(o)&&(s[o]=e[o]);s.target=s.rootEl=a,s.preventDefault=void 0,s.stopPropagation=void 0,a[expando]._onDragOver(s)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(i,e){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=e=_extends({},e),i[expando]=this;var a={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(d,h){d.setData("Text",h.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,i,a);for(var s in a)!(s in e)&&(e[s]=a[s]);_prepareGroup(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(i,"pointerdown",this._onTapStart):(on(i,"mousedown",this._onTapStart),on(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(i,"dragover",this),on(i,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lastTarget=null)},_getDirection:function(e,a){return typeof this.options.direction=="function"?this.options.direction.call(this,e,a,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var a=this,s=this.el,o=this.options,c=o.preventOnFilter,d=e.type,h=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,g=(h||e).target,_=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||g,b=o.filter;if(_saveInputCheckedState(s),!dragEl&&!(/mousedown|pointerdown/.test(d)&&e.button!==0||o.disabled)&&!_.isContentEditable&&!(!this.nativeDraggable&&Safari&&g&&g.tagName.toUpperCase()==="SELECT")&&(g=closest(g,o.draggable,s,!1),!(g&&g.animated)&&lastDownEl!==g)){if(oldIndex=index(g),oldDraggableIndex=index(g,o.draggable),typeof b=="function"){if(b.call(this,e,g,this)){_dispatchEvent({sortable:a,rootEl:_,name:"filter",targetEl:g,toEl:s,fromEl:s}),pluginEvent("filter",a,{evt:e}),c&&e.cancelable&&e.preventDefault();return}}else if(b&&(b=b.split(",").some(function(j){if(j=closest(_,j.trim(),s,!1),j)return _dispatchEvent({sortable:a,rootEl:j,name:"filter",targetEl:g,fromEl:s,toEl:s}),pluginEvent("filter",a,{evt:e}),!0}),b)){c&&e.cancelable&&e.preventDefault();return}o.handle&&!closest(_,o.handle,s,!1)||this._prepareDragStart(e,h,g)}}},_prepareDragStart:function(e,a,s){var o=this,c=o.el,d=o.options,h=c.ownerDocument,g;if(s&&!dragEl&&s.parentNode===c){var _=getRect(s);if(rootEl=c,dragEl=s,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=s,activeGroup=d.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(a||e).clientX,clientY:(a||e).clientY},tapDistanceLeft=tapEvt.clientX-_.left,tapDistanceTop=tapEvt.clientY-_.top,this._lastX=(a||e).clientX,this._lastY=(a||e).clientY,dragEl.style["will-change"]="all",g=function(){if(pluginEvent("delayEnded",o,{evt:e}),Sortable.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!FireFox&&o.nativeDraggable&&(dragEl.draggable=!0),o._triggerDragStart(e,a),_dispatchEvent({sortable:o,name:"choose",originalEvent:e}),toggleClass(dragEl,d.chosenClass,!0)},d.ignore.split(",").forEach(function(b){find(dragEl,b.trim(),_disableDraggable)}),on(h,"dragover",nearestEmptyInsertDetectEvent),on(h,"mousemove",nearestEmptyInsertDetectEvent),on(h,"touchmove",nearestEmptyInsertDetectEvent),on(h,"mouseup",o._onDrop),on(h,"touchend",o._onDrop),on(h,"touchcancel",o._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),d.delay&&(!d.delayOnTouchOnly||a)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(h,"mouseup",o._disableDelayedDrag),on(h,"touchend",o._disableDelayedDrag),on(h,"touchcancel",o._disableDelayedDrag),on(h,"mousemove",o._delayedDragTouchMoveHandler),on(h,"touchmove",o._delayedDragTouchMoveHandler),d.supportPointer&&on(h,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(g,d.delay)}else g()}},_delayedDragTouchMoveHandler:function(e){var a=e.touches?e.touches[0]:e;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,a){a=a||e.pointerType=="touch"&&e,!this.nativeDraggable||a?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):a?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,a){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:a}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var s=this.options;!e&&toggleClass(dragEl,s.dragClass,!1),toggleClass(dragEl,s.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:a})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),a=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e!==a);)a=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),a)do{if(a[expando]){var s=void 0;if(s=a[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:a}),s&&!this.options.dragoverBubble)break}e=a}while(a=getParentOrHost(a));_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var a=this.options,s=a.fallbackTolerance,o=a.fallbackOffset,c=e.touches?e.touches[0]:e,d=ghostEl&&matrix(ghostEl,!0),h=ghostEl&&d&&d.a,g=ghostEl&&d&&d.d,_=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),b=(c.clientX-tapEvt.clientX+o.x)/(h||1)+(_?_[0]-ghostRelativeParentInitialScroll[0]:0)/(h||1),j=(c.clientY-tapEvt.clientY+o.y)/(g||1)+(_?_[1]-ghostRelativeParentInitialScroll[1]:0)/(g||1);if(!Sortable.active&&!awaitingDragStarted){if(s&&Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))<s)return;this._onDragStart(e,!0)}if(ghostEl){d?(d.e+=b-(lastDx||0),d.f+=j-(lastDy||0)):d={a:1,b:0,c:0,d:1,e:b,f:j};var $="matrix(".concat(d.a,",").concat(d.b,",").concat(d.c,",").concat(d.d,",").concat(d.e,",").concat(d.f,")");css(ghostEl,"webkitTransform",$),css(ghostEl,"mozTransform",$),css(ghostEl,"msTransform",$),css(ghostEl,"transform",$),lastDx=b,lastDy=j,touchEvt=c}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,a=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),s=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),a.top+=ghostRelativeParent.scrollTop,a.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,s.ghostClass,!1),toggleClass(ghostEl,s.fallbackClass,!0),toggleClass(ghostEl,s.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",a.top),css(ghostEl,"left",a.left),css(ghostEl,"width",a.width),css(ghostEl,"height",a.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,a){var s=this,o=e.dataTransfer,c=s.options;if(pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),s.cloneId=_nextTick(function(){pluginEvent("clone",s),!Sortable.eventCanceled&&(s.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),s._hideClone(),_dispatchEvent({sortable:s,name:"clone"}))}),!a&&toggleClass(dragEl,c.dragClass,!0),a?(ignoreNextClick=!0,s._loopId=setInterval(s._emulateDragOver,50)):(off(document,"mouseup",s._onDrop),off(document,"touchend",s._onDrop),off(document,"touchcancel",s._onDrop),o&&(o.effectAllowed="move",c.setData&&c.setData.call(s,o,dragEl)),on(document,"drop",s),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,s._dragStartId=_nextTick(s._dragStarted.bind(s,a,e)),on(document,"selectstart",s),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(e){var a=this.el,s=e.target,o,c,d,h=this.options,g=h.group,_=Sortable.active,b=activeGroup===g,j=h.sort,$=putSortable||_,_e,et=this,tt=!1;if(_silent)return;function it(bt,Mt){pluginEvent(bt,et,_objectSpread2({evt:e,isOwner:b,axis:_e?"vertical":"horizontal",revert:d,dragRect:o,targetRect:c,canSort:j,fromSortable:$,target:s,completed:rt,onMove:function(Nt,wt){return _onMove(rootEl,a,dragEl,o,Nt,getRect(Nt),e,wt)},changed:at},Mt))}function nt(){it("dragOverAnimationCapture"),et.captureAnimationState(),et!==$&&$.captureAnimationState()}function rt(bt){return it("dragOverCompleted",{insertion:bt}),bt&&(b?_._hideClone():_._showClone(et),et!==$&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:_.options.ghostClass,!1),toggleClass(dragEl,h.ghostClass,!0)),putSortable!==et&&et!==Sortable.active?putSortable=et:et===Sortable.active&&putSortable&&(putSortable=null),$===et&&(et._ignoreWhileAnimating=s),et.animateAll(function(){it("dragOverAnimationComplete"),et._ignoreWhileAnimating=null}),et!==$&&($.animateAll(),$._ignoreWhileAnimating=null)),(s===dragEl&&!dragEl.animated||s===a&&!s.animated)&&(lastTarget=null),!h.dragoverBubble&&!e.rootEl&&s!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!bt&&nearestEmptyInsertDetectEvent(e)),!h.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),tt=!0}function at(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,h.draggable),_dispatchEvent({sortable:et,name:"change",toEl:a,newIndex,newDraggableIndex,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),s=closest(s,h.draggable,a,!0),it("dragOver"),Sortable.eventCanceled)return tt;if(dragEl.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||et._ignoreWhileAnimating===s)return rt(!1);if(ignoreNextClick=!1,_&&!h.disabled&&(b?j||(d=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,_,dragEl,e))&&g.checkPut(this,_,dragEl,e))){if(_e=this._getDirection(e,s)==="vertical",o=getRect(dragEl),it("dragOverValid"),Sortable.eventCanceled)return tt;if(d)return parentEl=rootEl,nt(),this._hideClone(),it("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),rt(!0);var st=lastChild(a,h.draggable);if(!st||_ghostIsLast(e,_e,this)&&!st.animated){if(st===dragEl)return rt(!1);if(st&&a===e.target&&(s=st),s&&(c=getRect(s)),_onMove(rootEl,a,dragEl,o,s,c,e,!!s)!==!1)return nt(),st&&st.nextSibling?a.insertBefore(dragEl,st.nextSibling):a.appendChild(dragEl),parentEl=a,at(),rt(!0)}else if(st&&_ghostIsFirst(e,_e,this)){var ot=getChild(a,0,h,!0);if(ot===dragEl)return rt(!1);if(s=ot,c=getRect(s),_onMove(rootEl,a,dragEl,o,s,c,e,!1)!==!1)return nt(),a.insertBefore(dragEl,ot),parentEl=a,at(),rt(!0)}else if(s.parentNode===a){c=getRect(s);var dt=0,ut,ct=dragEl.parentNode!==a,ht=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||o,s.animated&&s.toRect||c,_e),mt=_e?"top":"left",pt=isScrolledPast(s,"top","top")||isScrolledPast(dragEl,"top","top"),ft=pt?pt.scrollTop:void 0;lastTarget!==s&&(ut=c[mt],pastFirstInvertThresh=!1,isCircumstantialInvert=!ht&&h.invertSwap||ct),dt=_getSwapDirection(e,s,c,_e,ht?1:h.swapThreshold,h.invertedSwapThreshold==null?h.swapThreshold:h.invertedSwapThreshold,isCircumstantialInvert,lastTarget===s);var yt;if(dt!==0){var Ct=index(dragEl);do Ct-=dt,yt=parentEl.children[Ct];while(yt&&(css(yt,"display")==="none"||yt===ghostEl))}if(dt===0||yt===s)return rt(!1);lastTarget=s,lastDirection=dt;var _t=s.nextElementSibling,St=!1;St=dt===1;var Pt=_onMove(rootEl,a,dragEl,o,s,c,e,St);if(Pt!==!1)return(Pt===1||Pt===-1)&&(St=Pt===1),_silent=!0,setTimeout(_unsilent,30),nt(),St&&!_t?a.appendChild(dragEl):s.parentNode.insertBefore(dragEl,St?_t:s),pt&&scrollBy(pt,0,ft-pt.scrollTop),parentEl=dragEl.parentNode,ut!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(ut-getRect(s)[mt])),at(),rt(!0)}if(a.contains(dragEl))return rt(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var a=this.el,s=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,s.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,s.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(a,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!s.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],a,s=this.el.children,o=0,c=s.length,d=this.options;o<c;o++)a=s[o],closest(a,d.draggable,this.el,!1)&&e.push(a.getAttribute(d.dataIdAttr)||_generateId(a));return e},sort:function(e,a){var s={},o=this.el;this.toArray().forEach(function(c,d){var h=o.children[d];closest(h,this.options.draggable,o,!1)&&(s[c]=h)},this),a&&this.captureAnimationState(),e.forEach(function(c){s[c]&&(o.removeChild(s[c]),o.appendChild(s[c]))}),a&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,a){return closest(e,a||this.options.draggable,this.el,!1)},option:function(e,a){var s=this.options;if(a===void 0)return s[e];var o=PluginManager.modifyOption(this,e,a);typeof o<"u"?s[e]=o:s[e]=a,e==="group"&&_prepareGroup(s)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function _onMove(i,e,a,s,o,c,d,h){var g,_=i[expando],b=_.options.onMove,j;return window.CustomEvent&&!IE11OrLess&&!Edge?g=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent("move",!0,!0)),g.to=e,g.from=i,g.dragged=a,g.draggedRect=s,g.related=o||e,g.relatedRect=c||getRect(e),g.willInsertAfter=h,g.originalEvent=d,i.dispatchEvent(g),b&&(j=b.call(_,g,d)),j}function _disableDraggable(i){i.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(i,e,a){var s=getRect(getChild(a.el,0,a.options,!0)),o=getChildContainingRectFromElement(a.el,a.options,ghostEl),c=10;return e?i.clientX<o.left-c||i.clientY<s.top&&i.clientX<s.right:i.clientY<o.top-c||i.clientY<s.bottom&&i.clientX<s.left}function _ghostIsLast(i,e,a){var s=getRect(lastChild(a.el,a.options.draggable)),o=getChildContainingRectFromElement(a.el,a.options,ghostEl),c=10;return e?i.clientX>o.right+c||i.clientY>s.bottom&&i.clientX>s.left:i.clientY>o.bottom+c||i.clientX>s.right&&i.clientY>s.top}function _getSwapDirection(i,e,a,s,o,c,d,h){var g=s?i.clientY:i.clientX,_=s?a.height:a.width,b=s?a.top:a.left,j=s?a.bottom:a.right,$=!1;if(!d){if(h&&targetMoveDistance<_*o){if(!pastFirstInvertThresh&&(lastDirection===1?g>b+_*c/2:g<j-_*c/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)$=!0;else if(lastDirection===1?g<b+targetMoveDistance:g>j-targetMoveDistance)return-lastDirection}else if(g>b+_*(1-o)/2&&g<j-_*(1-o)/2)return _getInsertDirection(e)}return $=$||d,$&&(g<b+_*c/2||g>j-_*c/2)?g>b+_/2?1:-1:0}function _getInsertDirection(i){return index(dragEl)<index(i)?1:-1}function _generateId(i){for(var e=i.tagName+i.className+i.src+i.href+i.textContent,a=e.length,s=0;a--;)s+=e.charCodeAt(a);return s.toString(36)}function _saveInputCheckedState(i){savedInputChecked.length=0;for(var e=i.getElementsByTagName("input"),a=e.length;a--;){var s=e[a];s.checked&&savedInputChecked.push(s)}}function _nextTick(i){return setTimeout(i,0)}function _cancelNextTick(i){return clearTimeout(i)}documentExists&&on(document,"touchmove",function(i){(Sortable.active||awaitingDragStarted)&&i.cancelable&&i.preventDefault()});Sortable.utils={on,off,css,find,is:function(e,a){return!!closest(e,a,e,!1)},extend:extend$2,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild,expando};Sortable.get=function(i){return i[expando]};Sortable.mount=function(){for(var i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];e[0].constructor===Array&&(e=e[0]),e.forEach(function(s){if(!s.prototype||!s.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(s));s.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),s.utils)),PluginManager.mount(s)})};Sortable.create=function(i,e){return new Sortable(i,e)};Sortable.version=version$2;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return i.prototype={dragStarted:function(a){var s=a.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):s.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){var s=a.originalEvent;!this.options.dragOverBubble&&!s.rootEl&&this._handleAutoScroll(s)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,s){var o=this,c=(a.touches?a.touches[0]:a).clientX,d=(a.touches?a.touches[0]:a).clientY,h=document.elementFromPoint(c,d);if(touchEvt$1=a,s||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(a,this.options,h,s);var g=getParentAutoScrollElement(h,!0);scrolling&&(!pointerElemChangedInterval||c!==lastAutoScrollX||d!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var _=getParentAutoScrollElement(document.elementFromPoint(c,d),!0);_!==g&&(g=_,clearAutoScrolls()),autoScroll(a,o.options,_,s)},10),lastAutoScrollX=c,lastAutoScrollY=d)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(h,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(a,this.options,getParentAutoScrollElement(h,!1),!1)}}},_extends(i,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(i){clearInterval(i.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(i,e,a,s){if(e.scroll){var o=(i.touches?i.touches[0]:i).clientX,c=(i.touches?i.touches[0]:i).clientY,d=e.scrollSensitivity,h=e.scrollSpeed,g=getWindowScrollingElement(),_=!1,b;scrollRootEl!==a&&(scrollRootEl=a,clearAutoScrolls(),scrollEl=e.scroll,b=e.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(a,!0)));var j=0,$=scrollEl;do{var _e=$,et=getRect(_e),tt=et.top,it=et.bottom,nt=et.left,rt=et.right,at=et.width,st=et.height,ot=void 0,dt=void 0,ut=_e.scrollWidth,ct=_e.scrollHeight,ht=css(_e),mt=_e.scrollLeft,pt=_e.scrollTop;_e===g?(ot=at<ut&&(ht.overflowX==="auto"||ht.overflowX==="scroll"||ht.overflowX==="visible"),dt=st<ct&&(ht.overflowY==="auto"||ht.overflowY==="scroll"||ht.overflowY==="visible")):(ot=at<ut&&(ht.overflowX==="auto"||ht.overflowX==="scroll"),dt=st<ct&&(ht.overflowY==="auto"||ht.overflowY==="scroll"));var ft=ot&&(Math.abs(rt-o)<=d&&mt+at<ut)-(Math.abs(nt-o)<=d&&!!mt),yt=dt&&(Math.abs(it-c)<=d&&pt+st<ct)-(Math.abs(tt-c)<=d&&!!pt);if(!autoScrolls[j])for(var Ct=0;Ct<=j;Ct++)autoScrolls[Ct]||(autoScrolls[Ct]={});(autoScrolls[j].vx!=ft||autoScrolls[j].vy!=yt||autoScrolls[j].el!==_e)&&(autoScrolls[j].el=_e,autoScrolls[j].vx=ft,autoScrolls[j].vy=yt,clearInterval(autoScrolls[j].pid),(ft!=0||yt!=0)&&(_=!0,autoScrolls[j].pid=setInterval((function(){s&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var _t=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*h:0,St=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*h:0;typeof b=="function"&&b.call(Sortable.dragged.parentNode[expando],St,_t,i,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,St,_t)}).bind({layer:j}),24))),j++}while(e.bubbleScroll&&$!==g&&($=getParentAutoScrollElement($,!1)));scrolling=_}},30),drop=function(e){var a=e.originalEvent,s=e.putSortable,o=e.dragEl,c=e.activeSortable,d=e.dispatchSortableEvent,h=e.hideGhostForTarget,g=e.unhideGhostForTarget;if(a){var _=s||c;h();var b=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,j=document.elementFromPoint(b.clientX,b.clientY);g(),_&&!_.el.contains(j)&&(d("spill"),this.onSpill({dragEl:o,putSortable:s}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(e){var a=e.oldDraggableIndex;this.startIndex=a},onSpill:function(e){var a=e.dragEl,s=e.putSortable;this.sortable.captureAnimationState(),s&&s.captureAnimationState();var o=getChild(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(a,o):this.sortable.el.appendChild(a),this.sortable.animateAll(),s&&s.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(e){var a=e.dragEl,s=e.putSortable,o=s||this.sortable;o.captureAnimationState(),a.parentNode&&a.parentNode.removeChild(a),o.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);var LayerSwitcherDOM={_createDraggableElement:function(i,e){let a=".GPlayerName";checkDsfr()&&(a=".GPlayerDragNDrop"),navigator.userAgent.match(/chrome|chromium|crios/i)?Sortable.create(i,{handle:a,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(s){e._onEndDragAndDropLayerClick(s)}}):Sortable.create(i,{handle:a,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(s){e._onEndDragAndDropLayerClick(s)}})},_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPlayerSwitcher"),i.className="GPwidget gpf-widget gpf-mobile-fullscreen",i},_createMainLayersShowElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowLayersList"),i.type="checkbox",i},_createMainLayersElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GPlayersList"),i.className="GPpanel gpf-panel fr-modal",i},_createMainLayersDivElement:function(){var i=document.createElement("div");return i.className="GPpanelBody gpf-panel__body_ls fr-modal__body",i},_createMainPictoElement:function(){var i=this,e=document.createElement("button"),a=document.createElement("span");return e.appendChild(a),e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLayersListPicto gpf-btn gpf-btn--secondary gpf-btn-icon gpf-btn-icon-layerswitcher fr-btn fr-btn--secondary",e.htmlFor=this._addUID("GPshowLayersList"),e.setAttribute("aria-label","Afficher/masquer le gestionnaire de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(s){var o=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!o),document.getElementById(i._addUID("GPshowLayersList")).checked=o,document.getElementById(i._addUID("GPshowLayersList")).checked&&(document.getElementById(i._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(i._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),i.onShowLayerSwitcherClick(s)}):e.attachEvent&&e.attachEvent("onclick",function(s){var o=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!o),document.getElementById(i._addUID("GPshowLayersList")).checked&&(document.getElementById(i._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(i._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),i.onShowLayerSwitcherClick(s)}),e},_createMainCounterLayersElement:function(){var i=document.createElement("span");return i.id=this._addUID("GPlayerCounter"),i.className="GPlayerCounter",i.innerHTML="0",i},_createMainInfoElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GPlayerInfoPanel"),i.className="GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal",i},_createMainInfoDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createLayersPanelHeaderElement:function(){var i=document.createElement("div");return i.className="GPpanelHeader gpf-panel__header_ls",i},_createLayersPanelIconElement:function(){var i=document.createElement("label");return i.className="GPpanelIcon gpf-btn-header gpf-btn-icon-layers",i.title="Couches de données",i},_createLayersPanelTitleElement:function(){var i=document.createElement("div");return i.className="GPpanelTitle gpf-panel__title_ls",i.id=this._addUID("GPlayersHeaderTitle"),i.innerHTML="Couches de données",i},_createLayersPanelCloseElement:function(){var i=this,e=document.createElement("button");e.id=this._addUID("GPlayersPanelClose"),e.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var a=document.createElement("span");return a.className="GPelementHidden gpf-visible fr-mx-1w",a.innerText="Fermer",e.appendChild(a),e.addEventListener?e.addEventListener("click",function(){document.getElementById(i._addUID("GPshowLayersListPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowLayersListPicto")).click()}),e},_createContainerLayerElement:function(i){var e=document.createElement("div");return e.id=this._addUID("GPlayerSwitcher_ID_"+i.id),e.className="GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer",e.appendChild(this._createBasicToolElement(i)),e.appendChild(this._createAdvancedToolShowElement(i)),e.appendChild(this._createAdvancedToolElement(i)),e},_createBasicToolElement:function(i){var e=document.createElement("div");return e.id=this._addUID("GPbasicTools_ID_"+i.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(i)),e.appendChild(this._createBasicToolVisibilityElement(i)),e.appendChild(this._createBasicToolDragNDropElement(i)),e},_createBasicToolDragNDropElement:function(i){var e=document.createElement("div");e.id=this._addUID("GPdragndropPicto_ID_"+i.id),e.className="GPelementHidden GPlayerDragNDrop gpf-btn gpf-btn-icon gpf-btn-icon-ls-dragndrop gpf-btn--tertiary fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Deplacer la couche",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0);var a=this;return e.addEventListener?e.addEventListener("click",function(s){var o=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!o),a._onStartDragAndDropLayerClick(s)}):e.attachEvent&&e.attachEvent("onclick",function(s){var o=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!o),a._onStartDragAndDropLayerClick(s)}),e},_createBasicToolNameElement:function(i){var e=document.createElement("label");return e.id=this._addUID("GPname_ID_"+i.id),e.className="GPlayerName gpf-label gpf-label-name fr-label",e.title=i.description||i.title,e.innerHTML=i.title,e},_createBasicToolVisibilityElement:function(i){var e=typeof i.visibility<"u"?i.visibility:!0,a=document.createElement("button");a.id=this._addUID("GPvisibilityPicto_ID_"+i.id),a.className="GPlayerVisibility gpf-btn gpf-btn-icon gpf-btn-icon-ls-visibility fr-btn fr-btn--tertiary gpf-btn--tertiary",a.title="Afficher/masquer la couche",a.setAttribute("tabindex","0"),a.setAttribute("aria-pressed",e),a.setAttribute("type","button");var s=this;return a.addEventListener?a.addEventListener("click",function(o){var c=o.target.ariaPressed==="true";o.target.setAttribute("aria-pressed",!c),s._onVisibilityLayerClick(o)}):a.attachEvent&&a.attachEvent("onclick",function(o){var c=o.target.ariaPressed==="true";o.target.setAttribute("aria-pressed",!c),s._onVisibilityLayerClick(o)}),a},_createAdvancedToolShowElement:function(i){var e=document.createElement("button");e.id=this._addUID("GPshowAdvancedTools_ID_"+i.id),e.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowLayerAdvancedTools gpf-btn gpf-btn-icon gpf-btn-icon-ls-collapse fr-btn--sm fr-btn--tertiary gpf-btn--tertiary",e.title="Plus d'outils",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button");var a=this;return e.addEventListener?e.addEventListener("click",function(s){var o=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!o);var c=document.getElementById(a._addUID("GPadvancedTools_ID_"+i.id));o?(c.classList.replace("GPelementVisible","GPelementHidden"),c.classList.replace("gpf-visible","gpf-hidden")):(c.classList.replace("GPelementHidden","GPelementVisible"),c.classList.replace("gpf-hidden","gpf-visible"))}):e.attachEvent&&e.attachEvent("onclick",function(s){var o=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!o),element.classList.replace("GPelementVisible","GPelementHidden"),element.classList.replace("gpf-visible","gpf-hidden")}),e},_createAdvancedToolElement:function(i){var e=document.createElement("div");if(e.id=this._addUID("GPadvancedTools_ID_"+i.id),e.className="GPelementHidden GPlayerAdvancedTools gpf-hidden",e.appendChild(this._createAdvancedToolDeleteElement(i)),e.appendChild(this._createAdvancedToolInformationElement(i)),i.type!=="feature")for(var a=this._createAdvancedToolOpacityElement(i),s=0;s<a.length;s++)e.appendChild(a[s]);if(e.appendChild(this._createAdvancedToolExtentElement(i)),checkDsfr()){var o=document.createElement("button");o.className="GPlayerAdvancedToolsContextual fr-btn gpf-btn gpf-btn--tertiary fr-btn--tertiary-no-outline",o.setAttribute("aria-pressed",!1),o.addEventListener?o.addEventListener("click",function(d){var h=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!h)}):o.attachEvent&&o.attachEvent("onclick",function(d){var h=d.target.ariaPressed==="true";d.target.setAttribute("aria-pressed",!h)});var c=document.createElement("div");c.appendChild(this._createAdvancedToolDeleteElement(i,!0)),c.appendChild(this._createAdvancedToolInformationElement(i,!0)),c.appendChild(this._createAdvancedToolExtentElement(i,!0)),e.appendChild(o),e.appendChild(c)}return e},_createAdvancedToolDeleteElement:function(i,e=!1){var a=document.createElement("button");e?a.id=this._addUID("GPremoveContextual_ID_"+i.id):a.id=this._addUID("GPremove_ID_"+i.id),a.className="GPlayerRemove gpf-btn gpf-btn-icon gpf-btn-icon-ls-remove fr-btn fr-btn--tertiary gpf-btn--tertiary",a.title="Supprimer la couche",a.layerId=i.id,e&&(a.innerText="Supprimer"),a.setAttribute("tabindex","0"),a.setAttribute("aria-pressed",!0),a.setAttribute("type","button");var s=this;return a.addEventListener?a.addEventListener("click",function(o){var c=o.target.ariaPressed==="true";o.target.setAttribute("aria-pressed",!c),s._onDropLayerClick(o)}):a.attachEvent&&a.attachEvent("onclick",function(o){var c=o.target.ariaPressed==="true";o.target.setAttribute("aria-pressed",!c),s._onDropLayerClick(o)}),a},_createAdvancedToolInformationElement:function(i,e=!1){var a=document.createElement("button");e?a.id=this._addUID("GPinfoContextual_ID_"+i.id):a.id=this._addUID("GPinfo_ID_"+i.id),a.className="GPlayerInfo GPlayerInfoClosed gpf-btn gpf-btn-icon gpf-btn-icon-ls-info fr-btn fr-btn--tertiary gpf-btn--tertiary",(!i.title||!i.description)&&(a.style.opacity="0",a.style.visibility="hidden",e&&(a.style.display="none")),a.title="Informations/légende",a.layerId=i.id,e&&(a.innerText="Informations"),a.setAttribute("tabindex","0"),a.setAttribute("aria-pressed",!0),a.setAttribute("type","button");var s=this;return a.addEventListener?a.addEventListener("click",function(o){var c=o.target.ariaPressed==="true";o.target.setAttribute("aria-pressed",!c),s._onOpenLayerInfoClick(o)}):a.attachEvent&&a.attachEvent("onclick",function(o){var c=o.target.ariaPressed==="true";o.target.setAttribute("aria-pressed",!c),s._onOpenLayerInfoClick(o)}),a},_createAdvancedToolOpacityElement:function(i){var e=[],a=document.createElement("div");a.id=this._addUID("GPopacity_ID_"+i.id),a.className="GPlayerOpacity fr-range fr-range--sm",a.dataset.frJsRange="true",a.title="Opacité";var s=typeof i.opacity<"u"?i.opacity:1;s=Math.round(s*100),a.style.setProperty("--progress-right",s+"%");var o=document.createElement("input");o.id=this._addUID("GPopacityValueDiv_ID_"+i.id),o.type="range",o.value=s,o.ariaLabel="Opacité";var c=this;o.addEventListener?o.addEventListener("change",function(g){c._onChangeLayerOpacity(g)}):o.attachEvent&&o.attachEvent("onchange",function(g){c._onChangeLayerOpacity(g)}),o.addEventListener?o.addEventListener("input",function(g){c._onChangeLayerOpacity(g)}):o.attachEvent&&o.attachEvent("oninput",function(g){c._onChangeLayerOpacity(g)}),a.appendChild(o);var d=document.createElement("div");d.id=this._addUID("GPopacityValueDiv_ID_"+i.id),d.className="GPlayerOpacityValue";var h=document.createElement("span");return h.id=this._addUID("GPopacityValue_ID_"+i.id),h.className="gpf-range__output fr-range__output gpf-visible",h.innerHTML=s+"%",d.appendChild(h),e.push(a),e.push(d),e},_createAdvancedToolExtentElement:function(i,e=!1){var a=document.createElement("button");e?a.id=this._addUID("GPextentContextual_ID_"+i.id):a.id=this._addUID("GPextent_ID_"+i.id),a.className="GPelementHidden GPlayerExtent gpf-btn gpf-btn-icon gpf-btn-icon-ls-extent fr-btn fr-btn--tertiary gpf-btn--tertiary",a.title="Zoomer dans l'étendue",a.layerId=i.id,e&&(a.innerText="Zoomer"),a.setAttribute("tabindex","0"),a.setAttribute("aria-pressed",!0),a.setAttribute("type","button");var s=this;return a.addEventListener?a.addEventListener("click",function(o){var c=o.target.ariaPressed==="true";o.target.setAttribute("aria-pressed",!c),s._onZoomToExtentClick(o)}):a.attachEvent&&a.attachEvent("onclick",function(o){var c=o.target.ariaPressed==="true";o.target.setAttribute("aria-pressed",!c),s._onZoomToExtentClick(o)}),a},_createContainerLayerInfoElement:function(i){var e=document.createElement("div"),a=document.createElement("div");a.className="gpf-panel__header_ls",e.appendChild(a);var s=document.createElement("label");s.className="GPlayerInfo gpf-btn-header gpf-btn-icon-ls-info",s.title="Informations",a.appendChild(s);var o=document.createElement("div");o.id=this._addUID("GPlayerInfoTitle"),o.innerHTML=i.title,o.className="gpf-panel__title_ls",a.appendChild(o);var c=document.createElement("button");c.id=this._addUID("GPlayerInfoClose"),c.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",c.title="Fermer la fenêtre";var d=this,h=function(){document.getElementById(d._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(d._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(i.id).classList.add("GPlayerInfoClosed"),document.getElementById(i.id).classList.remove("GPlayerInfoOpened")};c.addEventListener?c.addEventListener("click",h):c.attachEvent&&c.attachEvent("onclick",h),this.addEventListener("layerswitcher:remove",yt=>{parseInt(i.id.split("-")[0].split("GPinfo_ID_")[1])===yt.layer.id&&(document.getElementById(d._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(d._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"))}),a.appendChild(c),e.appendChild(a);var g=document.createElement("div");if(g.id=this._addUID("GPlayerInfoContent"),g.className="gpf-panel__content fr-modal__content",e.appendChild(g),i.quicklookUrl){var _=document.createElement("div");_.id=this._addUID("GPlayerInfoQuicklook"),_.title="Afficher un aperçu de la couche";var b=document.createElement("a");b.href=i.quicklookUrl,b.appendChild(_),g.appendChild(b)}var j=document.createElement("div");if(j.id=this._addUID("GPlayerInfoDescription"),j.innerHTML=i.description,g.appendChild(j),i.metadata){var $=document.createElement("div");$.id=this._addUID("GPlayerInfoMetadata");var _e=document.createElement("div");_e.className="GPlayerInfoSubtitle",_e.innerHTML="Métadonnées",$.appendChild(_e);for(var et=0;et<i.metadata.length;et++){var tt=i.metadata[et].url,it=document.createElement("div");it.className="GPlayerInfoLink";var nt=document.createElement("a");nt.href=tt,nt.innerHTML=tt,it.appendChild(nt),$.appendChild(it)}i.metadata.length!==0&&g.appendChild($)}if(i.legends){var rt=document.createElement("div");rt.id=this._addUID("GPlayerInfoLegend");var at=document.createElement("div");at.className="GPlayerInfoSubtitle",at.innerHTML="Légende",rt.appendChild(at);for(var st={},ot=i.maxScaleDenominator||56e7,dt=0;dt<i.legends.length;dt++){var ut=i.legends[dt].minScaleDenominator;if(ut){var ct=ut.toString();ut=Math.round(parseInt(ct.substring(0,3),10)/10)*Math.pow(10,ct.length-2)}else ut=270;st[ut]=i.legends[dt]}for(var ht in st)if(st.hasOwnProperty(ht)){var mt=st[ht].url;if(typeof mt=="string"&&mt.toLowerCase().indexOf("nolegend.jpg")===-1){var pt=document.createElement("div");pt.className="GPlayerInfoLink",ot=st[ht].maxScaleDenominator||ot;var ft=document.createElement("a");ft.className="fr-link",ft.href=mt,ft.target="_blank",ft.innerHTML="Du 1/"+ht+" au 1/"+ot,pt.appendChild(ft),rt.appendChild(pt)}else delete st[ht]}Object.keys(st).length!==0&&g.appendChild(rt)}return e}},logger$5=LoggerByDefault$1.getLogger("layerswitcher"),LayerSwitcher=class na extends ControlExtended{constructor(e){e=e||{};var a=e.options||{},s=e.layers||[];if(super({element:a.element,target:a.target,render:a.render}),!(this instanceof na))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(s))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof a!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this.CLASSNAME="LayerSwitcher",this._initialize(a,s),this.container=this._initContainer(a),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e)this._addMapLayers(e),this.collapsed||this._showLayerSwitcherButton.setAttribute("aria-pressed",!0),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",s=>{var o=s.element,c;o.hasOwnProperty("gpLayerId")?c=o.gpLayerId:(c=this._layerId,o.gpLayerId=c,this._layerId++),this._layers[c]||this.addLayer(o)}),this._listeners.onRemoveListener=e.getLayers().on("remove",s=>{var o=s.element,c=o.gpLayerId;this._layers[c]&&this.removeLayer(o)});else{unByKey(this._listeners.onMoveListener),unByKey(this._listeners.onAddListener),unByKey(this._listeners.onRemoveListener);for(var a=this._layersOrder.length-1;a>=0;a--);}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}addLayer(e,a){var s=this.getMap();if(a=a||{},!e){logger$5.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");return}var o=e.gpLayerId;if(typeof o>"u"){logger$5.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e);return}var c=!1;if(s.getLayers().forEach(it=>{it.gpLayerId===o&&(c=!0)}),!c){logger$5.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )");return}if(this._layers[o]){for(var $ in a)a.hasOwnProperty($)&&(this._layers[o][$]=a[$]);if(a.title){var _e=document.getElementById(this._addUID("GPname_ID_"+o));_e&&(_e.innerHTML=a.title,_e.title=a.description||a.title)}var et=document.getElementById(this._addUID("GPinfo_ID_"+o));if(!document.getElementById(this._addUID("GPinfo_ID_"+o))&&a.description){var tt=document.getElementById(this._addUID("GPadvancedTools_ID_"+o));tt&&tt.appendChild(this._createAdvancedToolInformationElement({id:o}))}et&&et.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")}else{var d=this.getLayerInfo(e)||{},h=e.getOpacity(),g=e.getVisible(),_=this.isInRange(e,s),b={layer:e,id:o,name:e.name,service:e.service,opacity:h??1,visibility:g??!0,inRange:_??!0,title:a.title!=null?a.title:d._title||o,description:a.description||d._description||null,legends:a.legends||d._legends||[],metadata:a.metadata||d._metadata||[],quicklookUrl:a.quicklookUrl||d._quicklookUrl||null};this._layers[o]=b;var j=this._createLayerDiv(b);this._layers[o].div=j,e.getZIndex&&e.getZIndex()!==0&&typeof e.getZIndex()<"u"||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(b),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(j,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",it=>this._updateLayerOpacity(it)),this._listeners.updateLayerVisibility=e.on("change:visible",it=>this._updateLayerVisibility(it)),this._layers[o].onZIndexChangeEvent==null&&(this._layers[o].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}this._updateLayerCounter(),this.dispatchEvent({type:"layerswitcher:add",layer:this._layers[o]})}removeLayer(e){if(e){unByKey(this._listeners.updateLayerOpacity),unByKey(this._listeners.updateLayerVisibility),logger$5.trace(e);var a=e.gpLayerId,s=document.getElementById(this._addUID("GPinfo_ID_"+a));s&&s.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden");var o=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+a));o&&this._layerListContainer.removeChild(o);var c=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(c,1),this._lastZIndex--;for(var d=this._layersOrder,h=0;h<d.length;h++)d[h].layer.setZIndex(this._lastZIndex-h);this.dispatchEvent({type:"layerswitcher:remove",layer:this._layers[a]}),delete this._layers[a],this._updateLayerCounter()}}setCollapsed(e){if(e===void 0){logger$5.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");return}var a=!document.getElementById(this._addUID("GPshowLayersList")).checked;e&&a||!e&&!a||(a||document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(this._addUID("GPshowLayersList")).checked=!e)}getCollapsed(){return this.collapsed}setRemovable(e,a){if(e){var s=e.gpLayerId;if(s==null){logger$5.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");return}var o=document.getElementById(this._addUID("GPremove_ID_"+s));o&&(a===!1?o.style.display="none":a===!0&&(o.style.display="block"))}}getContainer(){return this.container}_initialize(e,a){this._uid=SelectorID.generate(),this.options=e,this.options.layers=a,this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=e.collapsed!==void 0?e.collapsed:!0,this._layerListContainer=null,this._listeners={};for(var s=0;s<a.length;s++){var o=a[s].layer;if(o){var c;o.hasOwnProperty("gpLayerId")?c=o.gpLayerId:(c=this._layerId,o.gpLayerId=c,this._layerId++);var d=a[s].config||{},h=o.getOpacity(),g=o.getVisible(),_={layer:o,id:c,name:o.name,service:o.service,opacity:h??1,visibility:g??!0,title:d.title!=null?d.title:d.id?d.id:c,description:d.description||null,legends:d.legends||[],metadata:d.metadata||[],quicklookUrl:d.quicklookUrl||null};this._layers[c]=_}}}_initContainer(){var e=this._createMainContainerElement(),a=this._createMainLayersShowElement();e.appendChild(a),this.collapsed?this.collapsed=!0:(a.checked="checked",this.collapsed=!1);var s=this,o=function(tt){this.collapsed=!tt.target.checked,this.dispatchEvent("change:collapsed")};a.addEventListener("click",function(tt){o.call(s,tt)});var c=this._showLayerSwitcherButton=this._createMainPictoElement();if(e.appendChild(c),e.classList.add("GplayerSwitcher-counterRemoved"),this.options.counter){e.classList.remove("GplayerSwitcher-counterRemoved"),e.classList.add("GplayerSwitcher-counterAdded");var d=this._layerSwitcherCounter=this._createMainCounterLayersElement();c.appendChild(d)}var h=this._createMainLayersElement();if(e.appendChild(h),this.options.panel){var g=this._createLayersPanelHeaderElement();h.appendChild(g);var _=this._createLayersPanelIconElement();g.appendChild(_);var b=this._createLayersPanelTitleElement();g.appendChild(b);var j=this._createLayersPanelCloseElement();g.appendChild(j)}var $=this._layerListContainer=this._createMainLayersDivElement();h.appendChild($),this._createDraggableElement($,this);var _e=this._createMainInfoElement(),et=this._createMainInfoDivElement();return _e.appendChild(et),e.appendChild(_e),e}_addMapLayers(e){this._layersIndex={},e.getLayers().forEach(g=>{var _=null;g.hasOwnProperty("gpLayerId")?_=g.gpLayerId:(_=this._layerId,g.gpLayerId=_,this._layerId++);var b=this.getLayerInfo(g)||{};if(this._layers[_])this._layers[_].opacity=g.getOpacity(),this._layers[_].visibility=g.getVisible(),this._layers[_].inRange=this.isInRange(g,e);else{var j=g.getOpacity(),$=g.getVisible(),_e=this.isInRange(g,e),et={layer:g,id:_,name:g.name,service:g.service,opacity:j??1,visibility:$??!0,inRange:_e??!0,title:b._title||_,description:b._description||null,legends:b._legends||[],metadata:b._metadata||[],quicklookUrl:b._quicklookUrl||null};this._layers[_]=et}if(this._updateLayerCounter(),this._listeners.updateLayerOpacity=g.on("change:opacity",it=>this._updateLayerOpacity(it)),this._listeners._updateLayerVisibility=g.on("change:visible",it=>this._updateLayerVisibility(it)),g.getZIndex!==void 0){var tt=g.getZIndex()||0;(!this._layersIndex[tt]||!Array.isArray(this._layersIndex[tt]))&&(this._layersIndex[tt]=[]),this._layersIndex[tt].push(this._layers[_])}});for(var a in this._layersIndex)if(this._layersIndex.hasOwnProperty(a))for(var s=this._layersIndex[a],o=0;o<s.length;o++)this._layersOrder.unshift(s[o]),this._lastZIndex++,s[o].layer.setZIndex(this._lastZIndex),this._layers[s[o].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[s[o].layer.gpLayerId].onZIndexChangeEvent=s[o].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var c=0;c<this._layersOrder.length;c++){var d=this._layersOrder[c],h=this._createLayerDiv(d);this._layerListContainer.querySelector("#"+h.id)||this._layerListContainer.appendChild(h),this._layers[d.id].div=h}}_createLayerDiv(e){var a=e.legends&&e.legends.length!==0,s=e.metadata&&e.metadata.length!==0,o=e.quicklookUrl;(a||s||o)&&(e.displayInformationElement=!0);var c=this._createContainerLayerElement(e);return e.inRange||c.classList.add("outOfRange"),c}onShowLayerSwitcherClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var a=this._showLayerSwitcherButton.ariaPressed;this.collapsed=a!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}_updateLayerCounter(){this._layerSwitcherCounter&&(this._layerSwitcherCounter.innerHTML=Object.keys(this._layers).length)}_onChangeLayerOpacity(e){e.target.parentNode.style.setProperty("--progress-right",e.target.value+"%");var a=e.target.id,s=SelectorID.index(a),o=this._layers[s].layer,c=e.target.value,d=document.getElementById(this._addUID("GPopacityValue_ID_"+s));d.innerHTML=c+"%",o.setOpacity(c/100)}_updateLayerOpacity(e){var a=e.target.getOpacity();a>1&&(a=1),a<0&&(a=0);var s=e.target.gpLayerId,o=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+s));o&&(o.value=Math.round(a*100));var c=document.getElementById(this._addUID("GPopacityValue_ID_"+s));c&&(c.innerHTML=Math.round(a*100)+"%"),this.dispatchEvent({type:"layerswitcher:change:opacity",opacity:a,layer:this._layers[s]})}_onVisibilityLayerClick(e){var a=e.target.id,s=SelectorID.index(a),o=this._layers[s].layer;o.setVisible(e.target.ariaPressed==="true")}_updateLayerVisibility(e){var a=e.target.getVisible(),s=e.target.gpLayerId,o=document.getElementById(this._addUID("GPvisibilityPicto_ID_"+s));o&&(o.ariaPressed=a),this.dispatchEvent({type:"layerswitcher:change:visibility",visibility:a,layer:this._layers[s]})}_updateLayersOrder(){var e=this.getMap();if(e){this._layersIndex={};var a,s;e.getLayers().forEach(_=>{s=_.gpLayerId,unByKey(this._layers[s].onZIndexChangeEvent),this._layers[s].onZIndexChangeEvent=null,a=null,_.getZIndex!==void 0&&(a=_.getZIndex(),(!this._layersIndex[a]||!Array.isArray(this._layersIndex[a]))&&(this._layersIndex[a]=[]),this._layersIndex[a].push(this._layers[s]))}),this._lastZIndex=0,this._layersOrder=[];for(var o in this._layersIndex)if(this._layersIndex.hasOwnProperty(o))for(var c=this._layersIndex[o],d=0;d<c.length;d++)this._layersOrder.unshift(c[d]),this._lastZIndex++,this._layers[c[d].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[c[d].layer.gpLayerId].onZIndexChangeEvent=c[d].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(let _=0;_<this._layerListContainer.childNodes.length;_++){const b=this._layerListContainer.childNodes[_];b.id!==""&&b.remove()}for(var h=0;h<this._layersOrder.length;h++){var g=this._layersOrder[h];this._layerListContainer.appendChild(g.div)}}else logger$5.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}}_onOpenLayerInfoClick(e){var a=e.target.id,s=SelectorID.index(a),o=this._layers[s],c,d,h=document.getElementById(e.target.id);if(h.classList.contains("GPlayerInfoOpened")){h.classList.remove("GPlayerInfoOpened"),h.classList.add("GPlayerInfoClosed"),c=document.getElementById(this._addUID("GPlayerInfoPanel")),c.classList.remove("GPlayerInfoPanelOpened","gpf-visible"),c.classList.add("GPlayerInfoPanelClosed","gpf-hidden"),d=document.getElementById(this._addUID("GPlayerInfoContent")),d&&d.parentNode.remove();return}h.classList.contains("GPlayerInfoClosed")&&(h.classList.remove("GPlayerInfoClosed"),h.classList.add("GPlayerInfoOpened")),c=document.getElementById(this._addUID("GPlayerInfoPanel")),c.classList.remove("GPlayerInfoPanelClosed","gpf-hidden"),c.classList.add("GPlayerInfoPanelOpened","gpf-visible"),d=document.getElementById(this._addUID("GPlayerInfoContent")),d&&d.parentNode.remove();var g={id:a,title:o.title,description:o.description,quicklookUrl:o.quicklookUrl,metadata:o.metadata,legends:o.legends},_=o.layer.getMaxResolution();_===1/0?g._maxScaleDenominator=56e7:g._maxScaleDenominator=Math.round(_/28e-5);var b=this._createContainerLayerInfoElement(g);c.firstChild.appendChild(b)}_onDropLayerClick(e){var a=e.target.id,s=SelectorID.index(a),o=this._layers[s].layer;this.getMap().getLayers().remove(o)}_onEndDragAndDropLayerClick(e){logger$5.trace(e);var a=this.getMap(),s=document.querySelectorAll("div.GPlayerSwitcher_layer"),o=s.length;this._layersOrder=[];for(var c=0;c<s.length;c++){var d=s[c].id,h=SelectorID.index(d),g=this._layers[h].layer;unByKey(this._layers[h].onZIndexChangeEvent),this._layers[h].onZIndexChangeEvent=null,g.setZIndex&&(g.setZIndex(o),this._layersOrder.push(this._layers[h]),o--),this._layers[h].onZIndexChangeEvent==null&&(this._layers[h].onZIndexChangeEvent=g.on("change:zIndex",()=>this._updateLayersOrder()))}a.updateSize(),this.dispatchEvent({type:"layerswitcher:change:position",position:e.newIndex,layer:this._layersOrder[e.newIndex],layers:this._layersOrder})}_onStartDragAndDropLayerClick(e){logger$5.debug(e)}_onZoomToExtentClick(e){logger$5.debug(e);var a=e.target.id,s=SelectorID.index(a),o=this._layers[s],c=null,d=null,h=this.getMap();if(o.layer.hasOwnProperty("gpResultLayerId")&&o.layer.gpResultLayerId.split(":")[0]==="layerimport"){if(h.getView()&&h.getSize()){var g=o.layer.getExtent()||o.layer.getSource().getExtent();g&&g[0]!==1/0&&h.getView().fit(g,h.getSize())}}else try{if(!Config$1.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var _=o.layer.name||o.layer.getSource().name,b=o.layer.service||o.layer.getSource().service,j=Config$1.configuration.getLayerId(_,b);if(!j)throw"ERROR : Layer ID not found into the catalogue !?";var $=Config$1.configuration.getGlobalConstraints(j);if($){if(!h||!h.getView())return;var _e=h.getView(),et=_e.getProjection(),tt=[$.extent.left,$.extent.bottom,$.extent.right,$.extent.top],it=$.crs;it||(it="EPSG:4326"),c=transformExtent(tt,it,et),c&&_e.fit(c)}}catch(nt){d=nt}this.dispatchEvent({type:"layerswitcher:extent",extent:c,layer:o,error:d})}_onMapMoveEnd(e){e.getLayers().forEach(a=>{var s=a.gpLayerId;if(this._layers[s]){var o=this._layers[s],c;this.isInRange(a,e)&&!o.inRange?(o.inRange=!0,c=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+s)),c.classList.remove("outOfRange")):!this.isInRange(a,e)&&o.inRange&&(o.inRange=!1,c=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+s)),c.classList.add("outOfRange"))}})}getLayerDOMId(e){var a=null;return this.getMap().getLayers().forEach(s=>{s===e&&(a=s.hasOwnProperty("gpLayerId")?s.gpLayerId:null)}),a!==null?this._addUID("GPlayerSwitcher_ID_"+a):null}isInRange(e,a){if(a){var s=a.getView().getResolution();if(s>e.getMaxResolution()||s<e.getMinResolution())return!1;var o=a.getView().calculateExtent(a.getSize()),c=e.getExtent();return!(c&&!intersects$1(o,c))}}getLayerInfo(e){var a={};if(e.getProperties!==void 0&&e.getSource!==void 0){var s=e.getProperties(),o=s.source;o&&(a._title=o._title||s.id||"",a._description=o._description||"",a._quicklookUrl=o._quicklookUrl||"",a._metadata=o._metadata||[],a._legends=o._legends||[])}return a}};Object.assign(LayerSwitcher.prototype,LayerSwitcherDOM);Object.assign(LayerSwitcher.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=LayerSwitcher);const CLASS_HIDDEN="ol-hidden",CLASS_SELECTABLE="ol-selectable",CLASS_UNSELECTABLE="ol-unselectable",CLASS_UNSUPPORTED="ol-unsupported",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(i){const e=i.match(fontRegEx);if(!e)return null;const a={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let s=0,o=fontRegExMatchIndex.length;s<o;++s){const c=e[s+1];c!==void 0&&(a[fontRegExMatchIndex[s]]=c)}return a.families=a.family.split(/,\s?/),a},Property$3={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Overlay extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property$3.ELEMENT,this.handleElementChanged),this.addChangeListener(Property$3.MAP,this.handleMapChanged),this.addChangeListener(Property$3.OFFSET,this.handleOffsetChanged),this.addChangeListener(Property$3.POSITION,this.handlePositionChanged),this.addChangeListener(Property$3.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Property$3.ELEMENT)}getId(){return this.id}getMap(){return this.get(Property$3.MAP)||null}getOffset(){return this.get(Property$3.OFFSET)}getPosition(){return this.get(Property$3.POSITION)}getPositioning(){return this.get(Property$3.POSITIONING)}handleElementChanged(){removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(removeNode(this.element),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=listen(e,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();const a=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?a.insertBefore(this.element,a.childNodes[0]||null):a.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Property$3.ELEMENT,e)}setMap(e){this.set(Property$3.MAP,e)}setOffset(e){this.set(Property$3.OFFSET,e)}setPosition(e){this.set(Property$3.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const a=this.getMap();if(!a||!a.getTargetElement()||!this.get(Property$3.POSITION))return;const s=this.getRect(a.getTargetElement(),a.getSize()),o=this.getElement(),c=this.getRect(o,[outerWidth(o),outerHeight(o)]);e=e||{};const d=e.margin===void 0?20:e.margin;if(!containsExtent(s,c)){const h=c[0]-s[0],g=s[2]-c[2],_=c[1]-s[1],b=s[3]-c[3],j=[0,0];if(h<0?j[0]=h-d:g<0&&(j[0]=Math.abs(g)+d),_<0?j[1]=_-d:b<0&&(j[1]=Math.abs(b)+d),j[0]!==0||j[1]!==0){const $=a.getView().getCenterInternal(),_e=a.getPixelFromCoordinateInternal($);if(!_e)return;const et=[_e[0]+j[0],_e[1]+j[1]],tt=e.animation||{};a.getView().animateInternal({center:a.getCoordinateFromPixelInternal(et),duration:tt.duration,easing:tt.easing})}}}getRect(e,a){const s=e.getBoundingClientRect(),o=s.left+window.pageXOffset,c=s.top+window.pageYOffset;return[o,c,o+a[0],c+a[1]]}setPositioning(e){this.set(Property$3.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),a=this.getPosition();if(!e||!e.isRendered()||!a){this.setVisible(!1);return}const s=e.getPixelFromCoordinate(a),o=e.getSize();this.updateRenderedPosition(s,o)}updateRenderedPosition(e,a){const s=this.element.style,o=this.getOffset(),c=this.getPositioning();this.setVisible(!0);const d=Math.round(e[0]+o[0])+"px",h=Math.round(e[1]+o[1])+"px";let g="0%",_="0%";c=="bottom-right"||c=="center-right"||c=="top-right"?g="-100%":(c=="bottom-center"||c=="center-center"||c=="top-center")&&(g="-50%"),c=="bottom-left"||c=="bottom-center"||c=="bottom-right"?_="-100%":(c=="center-left"||c=="center-center"||c=="center-right")&&(_="-50%");const b=`translate(${g}, ${_}) translate(${d}, ${h})`;this.rendered.transform_!=b&&(this.rendered.transform_=b,s.transform=b)}getOptions(){return this.options}}var LoggerByDefault={getLogger:function(i){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var a=i||"default";return loglevelExports.getLogger(a)}},MessagesResources={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(i,e){if(Object.keys(arguments).length===0)return"Message indefined !";var a=Array.prototype.slice.call(arguments),s=a.shift(),o=a,c=this[s];try{Array.isArray(o)&&o.length>0?c=c.replace("%var%",o.join(" - ")):c=c.replace("%var%","%var% (not specified)")}catch{}return c}},Helper$1={normalyzeParameters:function(i){var e=null;if(i){var a=[];for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];o||(o=""),a.push(s+"="+o)}e=a.join("&")}return e},normalyzeUrl:function(i,e,a){var s=i;if(i){if(i.split("?").length-1>=2){var o=i.search(/\?/)+1;s=i.substring(0,o)+i.slice(o).replace(/\?/g,"&")}var c=i.indexOf("?");c===-1&&(s+="?"),c!==-1&&c!==i.length-1&&(s+="&")}return e&&(typeof e=="string"?(e=e.replace("?",""),s+=e):s+=this.normalyzeParameters(e)),a&&(s=encodeURIComponent(s)),s},indent:function(i,e){var a=i||0;return new Array(a+1).join("	")+e}};function commonjsRequire(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var es6Promise={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(i,e){(function(a,s){i.exports=s()})(commonjsGlobal,function(){function a(Et){var xt=typeof Et;return Et!==null&&(xt==="object"||xt==="function")}function s(Et){return typeof Et=="function"}var o=void 0;Array.isArray?o=Array.isArray:o=function(Et){return Object.prototype.toString.call(Et)==="[object Array]"};var c=o,d=0,h=void 0,g=void 0,_=function(xt,Tt){dt[d]=xt,dt[d+1]=Tt,d+=2,d===2&&(g?g(ut):ht())};function b(Et){g=Et}function j(Et){_=Et}var $=typeof window<"u"?window:void 0,_e=$||{},et=_e.MutationObserver||_e.WebKitMutationObserver,tt=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",it=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function nt(){return function(){return process.nextTick(ut)}}function rt(){return typeof h<"u"?function(){h(ut)}:ot()}function at(){var Et=0,xt=new et(ut),Tt=document.createTextNode("");return xt.observe(Tt,{characterData:!0}),function(){Tt.data=Et=++Et%2}}function st(){var Et=new MessageChannel;return Et.port1.onmessage=ut,function(){return Et.port2.postMessage(0)}}function ot(){var Et=setTimeout;return function(){return Et(ut,1)}}var dt=new Array(1e3);function ut(){for(var Et=0;Et<d;Et+=2){var xt=dt[Et],Tt=dt[Et+1];xt(Tt),dt[Et]=void 0,dt[Et+1]=void 0}d=0}function ct(){try{var Et=Function("return this")().require("vertx");return h=Et.runOnLoop||Et.runOnContext,rt()}catch{return ot()}}var ht=void 0;tt?ht=nt():et?ht=at():it?ht=st():$===void 0&&typeof commonjsRequire=="function"?ht=ct():ht=ot();function mt(Et,xt){var Tt=this,Rt=new this.constructor(yt);Rt[ft]===void 0&&Vt(Rt);var Ot=Tt._state;if(Ot){var kt=arguments[Ot-1];_(function(){return tn(Ot,Rt,kt,Tt._result)})}else Yt(Tt,Rt,Et,xt);return Rt}function pt(Et){var xt=this;if(Et&&typeof Et=="object"&&Et.constructor===xt)return Et;var Tt=new xt(yt);return Wt(Tt,Et),Tt}var ft=Math.random().toString(36).substring(2);function yt(){}var Ct=void 0,_t=1,St=2;function Pt(){return new TypeError("You cannot resolve a promise with itself")}function bt(){return new TypeError("A promises callback cannot return that same promise.")}function Mt(Et,xt,Tt,Rt){try{Et.call(xt,Tt,Rt)}catch(Ot){return Ot}}function It(Et,xt,Tt){_(function(Rt){var Ot=!1,kt=Mt(Tt,xt,function(Gt){Ot||(Ot=!0,xt!==Gt?Wt(Rt,Gt):Ft(Rt,Gt))},function(Gt){Ot||(Ot=!0,zt(Rt,Gt))},"Settle: "+(Rt._label||" unknown promise"));!Ot&&kt&&(Ot=!0,zt(Rt,kt))},Et)}function Nt(Et,xt){xt._state===_t?Ft(Et,xt._result):xt._state===St?zt(Et,xt._result):Yt(xt,void 0,function(Tt){return Wt(Et,Tt)},function(Tt){return zt(Et,Tt)})}function wt(Et,xt,Tt){xt.constructor===Et.constructor&&Tt===mt&&xt.constructor.resolve===pt?Nt(Et,xt):Tt===void 0?Ft(Et,xt):s(Tt)?It(Et,xt,Tt):Ft(Et,xt)}function Wt(Et,xt){if(Et===xt)zt(Et,Pt());else if(a(xt)){var Tt=void 0;try{Tt=xt.then}catch(Rt){zt(Et,Rt);return}wt(Et,xt,Tt)}else Ft(Et,xt)}function jt(Et){Et._onerror&&Et._onerror(Et._result),Jt(Et)}function Ft(Et,xt){Et._state===Ct&&(Et._result=xt,Et._state=_t,Et._subscribers.length!==0&&_(Jt,Et))}function zt(Et,xt){Et._state===Ct&&(Et._state=St,Et._result=xt,_(jt,Et))}function Yt(Et,xt,Tt,Rt){var Ot=Et._subscribers,kt=Ot.length;Et._onerror=null,Ot[kt]=xt,Ot[kt+_t]=Tt,Ot[kt+St]=Rt,kt===0&&Et._state&&_(Jt,Et)}function Jt(Et){var xt=Et._subscribers,Tt=Et._state;if(xt.length!==0){for(var Rt=void 0,Ot=void 0,kt=Et._result,Gt=0;Gt<xt.length;Gt+=3)Rt=xt[Gt],Ot=xt[Gt+Tt],Rt?tn(Tt,Rt,Ot,kt):Ot(kt);Et._subscribers.length=0}}function tn(Et,xt,Tt,Rt){var Ot=s(Tt),kt=void 0,Gt=void 0,qt=!0;if(Ot){try{kt=Tt(Rt)}catch($t){qt=!1,Gt=$t}if(xt===kt){zt(xt,bt());return}}else kt=Rt;xt._state!==Ct||(Ot&&qt?Wt(xt,kt):qt===!1?zt(xt,Gt):Et===_t?Ft(xt,kt):Et===St&&zt(xt,kt))}function Lt(Et,xt){try{xt(function(Rt){Wt(Et,Rt)},function(Rt){zt(Et,Rt)})}catch(Tt){zt(Et,Tt)}}var vn=0;function En(){return vn++}function Vt(Et){Et[ft]=vn++,Et._state=void 0,Et._result=void 0,Et._subscribers=[]}function Sn(){return new Error("Array Methods must be provided an Array")}var An=function(){function Et(xt,Tt){this._instanceConstructor=xt,this.promise=new xt(yt),this.promise[ft]||Vt(this.promise),c(Tt)?(this.length=Tt.length,this._remaining=Tt.length,this._result=new Array(this.length),this.length===0?Ft(this.promise,this._result):(this.length=this.length||0,this._enumerate(Tt),this._remaining===0&&Ft(this.promise,this._result))):zt(this.promise,Sn())}return Et.prototype._enumerate=function(Tt){for(var Rt=0;this._state===Ct&&Rt<Tt.length;Rt++)this._eachEntry(Tt[Rt],Rt)},Et.prototype._eachEntry=function(Tt,Rt){var Ot=this._instanceConstructor,kt=Ot.resolve;if(kt===pt){var Gt=void 0,qt=void 0,$t=!1;try{Gt=Tt.then}catch(ln){$t=!0,qt=ln}if(Gt===mt&&Tt._state!==Ct)this._settledAt(Tt._state,Rt,Tt._result);else if(typeof Gt!="function")this._remaining--,this._result[Rt]=Tt;else if(Ot===Kt){var sn=new Ot(yt);$t?zt(sn,qt):wt(sn,Tt,Gt),this._willSettleAt(sn,Rt)}else this._willSettleAt(new Ot(function(ln){return ln(Tt)}),Rt)}else this._willSettleAt(kt(Tt),Rt)},Et.prototype._settledAt=function(Tt,Rt,Ot){var kt=this.promise;kt._state===Ct&&(this._remaining--,Tt===St?zt(kt,Ot):this._result[Rt]=Ot),this._remaining===0&&Ft(kt,this._result)},Et.prototype._willSettleAt=function(Tt,Rt){var Ot=this;Yt(Tt,void 0,function(kt){return Ot._settledAt(_t,Rt,kt)},function(kt){return Ot._settledAt(St,Rt,kt)})},Et}();function Zt(Et){return new An(this,Et).promise}function Dn(Et){var xt=this;return c(Et)?new xt(function(Tt,Rt){for(var Ot=Et.length,kt=0;kt<Ot;kt++)xt.resolve(Et[kt]).then(Tt,Rt)}):new xt(function(Tt,Rt){return Rt(new TypeError("You must pass an array to race."))})}function en(Et){var xt=this,Tt=new xt(yt);return zt(Tt,Et),Tt}function Tn(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function yn(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Kt=function(){function Et(xt){this[ft]=En(),this._result=this._state=void 0,this._subscribers=[],yt!==xt&&(typeof xt!="function"&&Tn(),this instanceof Et?Lt(this,xt):yn())}return Et.prototype.catch=function(Tt){return this.then(null,Tt)},Et.prototype.finally=function(Tt){var Rt=this,Ot=Rt.constructor;return s(Tt)?Rt.then(function(kt){return Ot.resolve(Tt()).then(function(){return kt})},function(kt){return Ot.resolve(Tt()).then(function(){throw kt})}):Rt.then(Tt,Tt)},Et}();Kt.prototype.then=mt,Kt.all=Zt,Kt.race=Dn,Kt.resolve=pt,Kt.reject=en,Kt._setScheduler=b,Kt._setAsap=j,Kt._asap=_;function nn(){var Et=void 0;if(typeof commonjsGlobal<"u")Et=commonjsGlobal;else if(typeof self<"u")Et=self;else try{Et=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var xt=Et.Promise;if(xt){var Tt=null;try{Tt=Object.prototype.toString.call(xt.resolve())}catch{}if(Tt==="[object Promise]"&&!xt.cast)return}Et.Promise=Kt}return Kt.polyfill=nn,Kt.Promise=Kt,Kt})})(es6Promise);var es6PromiseExports=es6Promise.exports;const ES6Promise=getDefaultExportFromCjs$1(es6PromiseExports);var XHR={call:function(i){var e=LoggerByDefault.getLogger("XHR");if(e.trace("[XHR::call()]"),ES6Promise.polyfill(),!i.url)throw new Error("missing parameter : url is not defined !");if(!i.method)throw new Error("missing parameter : method is not defined !");i.format||(i.format="text");var a={};switch(a.url=i.url,a.data=i.data?i.data:null,a.method=i.method,a.timeOut=i.timeOut||0,a.scope=i.scope||this,a.proxy=i.proxy||null,a.content=i.content||null,a.headers=i.headers||{referer:"http://localhost"},i.method){case"DELETE":case"GET":break;case"PUT":case"POST":a.content=i.content?i.content:"application/x-www-form-urlencoded",a.headers=i.headers?i.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(i.format){case"text":this.__call(a).then(function(s){e.trace(s),i.onResponse.call(this,s)}).catch(function(s){i.onFailure.call(this,s)});break;case"json":this.__callJSON(a).then(function(s){e.trace(s),i.onResponse.call(this,s)}).catch(function(s){i.onFailure.call(this,s)});break;case"xml":this.__callXML(a).then(function(s){e.trace(s),i.onResponse.call(this,s)}).catch(function(s){i.onFailure.call(this,s)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(i){var e=LoggerByDefault.getLogger("XHR");e.trace("[XHR::__call()]");var a=new Promise(function(s,o){var c=i.method==="POST"||i.method==="PUT"?1:0;i.data&&(typeof i.data=="object"&&Object.keys(i.data).length||typeof i.data=="string"&&i.data.length)&&!c&&(i.url=Helper$1.normalyzeUrl(i.url,i.data)),e.trace("URL = ",i.url);var d=null;if(typeof window>"u"){var h=require("node-fetch"),g={headers:{Referer:"https://localhost"}};return i.data&&typeof i.data=="string"&&c&&(g={method:i.method,body:i.data,headers:{"Content-Type":i.content,Referer:"https://localhost"}}),h(i.url,g).then(function($){if($.ok)s($.text());else{var _e="Errors Occured on Http Request (status : '"+$.statusText+"' | url : '"+$.url+"')",et=$.status;o({message:_e,status:et})}}).catch(function($){o({message:$,status:-1})})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),d=new XMLHttpRequest,d.open(i.method,i.url,!0),d.overrideMimeType=i.content;var _=null;i.timeOut>0&&(e.trace("XHR - TimeOut actif !"),_=window.setTimeout(function(){var $="TimeOut Occured on Http Request with XMLHttpRequest !";o({message:$,status:-1})},i.timeOut)),c&&(e.trace("data = ",i.data),d.setRequestHeader("Content-type",i.content)),d.onerror=function($){console.log($),o(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},d.ontimeout=function($){console.log($),o(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},d.onreadystatechange=function($){if(d.readyState===4)if(d.status===200)window.clearTimeout(_),s(d.response);else{var _e="Errors Occured on Http Request (status : '"+$.target.statusText+"' | url : '"+$.target.responseURL+"' | response : '"+$.target.response+"')",et=$.target.status;o({message:_e,status:et})}};var b=i.data&&c?i.data:null;d.send(b)}else if(window.XDomainRequest){e.trace("XDomainRequest"),d=new XDomainRequest,d.open(i.method,i.url),d.overrideMimeType=i.content,i.timeOut>0&&(d.timeout=i.timeout,e.trace("XHR - TimeOut actif !")),c&&d.setRequestHeader("Content-type",i.content),d.onerror=function(){o(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},d.ontimeout=function(){o(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},d.onload=function($){if(d.status===200)s(d.responseText);else{var _e="Errors Occured on Http Request (status : '"+$.target.statusText+"' | url : '"+$.target.responseURL+"')",et=$.target.status;o({message:_e,status:et})}};var j=i.data&&c?i.data:null;d.send(j)}else throw new Error("CORS not supported")});return a},__callJSON:function(i){return this.__call(i).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",i.url,e)})},__callXML:function(i){return this.__call(i).then(function(e){var a;if(typeof window>"u"){var s=require("@xmldom/xmldom").DOMParser;a=new s().parseFromString(e,"text/xml")}else if(window.DOMParser){var o=new window.DOMParser;a=o.parseFromString(e,"text/xml")}else a=new window.ActiveXObject("Microsoft.XMLDOM"),a.async=!1,a.loadXML(e);return a}).catch(function(e){console.log("__callXML failed on : ",i.url,e)})}},JSONP={uuid:function(){var i=Math.floor(Date.now());return function(){return i++}}(),call:function(i){var e=LoggerByDefault.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!i)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!i.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(i.timeOut||(e.info("setting 'options.timeOut' default value"),i.timeOut=0),!i.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var a=typeof i.callbackSuffix=="string"?i.callbackSuffix:this.uuid(),s=!1,o=!1,c=i.url.indexOf("callback=");if(c!==-1){s=!0;var d=i.url.indexOf("&",c);d===-1&&(d=i.url.length);var h=i.url.substring(c+9,d);h&&(o=!0,i.callbackName=h,e.info("setting 'options.callbackName' value ("+i.callbackName+") from 'options.url' parameter"))}if(!s){var g=i.url.indexOf("?");g===-1?i.url=i.url+"?callback=":g===i.url.length?i.url=i.url+"callback=":i.url=i.url+"&callback=",e.info("setting callback default key in 'options.url' : "+i.url)}var _=i.callbackName?!0:o;if(o||(i.callbackName||(e.info("setting 'options.callbackName' default value"),i.callbackName="callback",(a||a==="")&&(i.callbackName+=a)),i.url=i.url.replace("callback=","callback="+i.callbackName),e.info("setting callback function name in 'options.url' : "+i.url)),i.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),i.onTimeOut=function(){console.log("TimeOut while invoking url : "+i.url)}),!_){var b=this,j=null;i.timeOut>0&&(j=window.setTimeout(function(){window[i.callbackName]=function(){},i.onTimeOut(),b._deleteScript(a)},i.timeOut)),window[i.callbackName]=function($){window.clearTimeout(j),i.onResponse($),b._deleteScript(a)}}this._createScript(a,i.url)},_createScript:function(i,e){var a,s=document.getElementById("results"+i);a=document.createElement("script"),a.setAttribute("type","text/javascript"),a.setAttribute("src",e),a.setAttribute("charset","UTF-8"),a.setAttribute("id","results"+i),a.setAttribute("async","true");var o=document.documentElement||document.getElementsByTagName("head")[0];s===null?o.appendChild(a):o.replaceChild(a,s)},_deleteScript:function(i){var e=document.getElementById("results"+i);if(e){var a=e.parentNode||document.documentElement;if(!a)return;a.removeChild(e)}}},Protocol={send:function(i){var e=i||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&i.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(i.protocol==="XHR"||i.format==="json"?e.wrap=!1:i.protocol==="JSONP"&&i.format==="xml"&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var a={};a.output=e.output,a.callback=e.callback,delete a.callback,e.url=Helper$1.normalyzeUrl(i.url,a)}switch(e.protocol){case"XHR":i.method==="GET"&&i.nocache&&(e.url=Helper$1.normalyzeUrl(e.url,{t:new Date().getTime()})),XHR.call(e);break;case"JSONP":e.data&&(e.url=Helper$1.normalyzeUrl(e.url,e.data)),JSONP.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function ErrorService(i){if(!(this instanceof ErrorService))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=i;typeof i=="string"||i instanceof String?(this.message=i,this.status=-1,this.type=ErrorService.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=new Error().stack}ErrorService.TYPE_SRVERR="SERVICE_ERROR";ErrorService.TYPE_USEERR="USAGE_ERROR";ErrorService.TYPE_UNKERR="UNKNOWN_ERROR";ErrorService.prototype=Object.create(Error.prototype,{constructor:{value:ErrorService,writable:!0,configurable:!0}});const name$1="geoportal-access-lib",version$1="3.4.3",date$1="21/08/2024",description$1="French Geoportal resources access library",module$1="src/Gp.js",main="dist/GpServices-src.js",homepage$1="https://github.com/IGNF/geoportal-access-lib#readme",scripts={clean:'echo "Warning: no yet implemented!" && exit 0',setup:"npm install",cover:"nyc --reporter=lcov --reporter=text npm run test",eslint:"eslint src/",build:"webpack --mode=none","build:prod":"webpack --mode=production","build:dev":"webpack --mode=development",test:'mocha-webpack --reporter mochawesome --reporter-options reportDir=test-report,reportFilename=index --webpack-config ./test/webpack/webpack.test.js --glob "test_*.js" test/spec/',"test:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.js","test:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.docker.js","test:end-to-end:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.js","test:end-to-end:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.docker.js",sample:"npm run sample:serve","sample:serve":"webpack-dev-server --mode=none --open-page samples/index-src.html --https --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:prod":"webpack-dev-server --mode=production --open-page samples/index-prod.html --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:dev":"webpack-dev-server --mode=development --open-page samples/index-map.html --content-base . --output-public-path '/dist/' --port 9001 --open",doc:"npm run doc:serve","doc:serve":"webpack-dev-server --content-base jsdoc --port 9001 --open"},engines$1={node:"<=16"},nyc={include:["src/**/*.js"],instrument:!1,sourceMap:!1},repository$1={type:"git",url:"https://github.com/IGNF/geoportal-access-lib.git"},keywords$1=["geoplateforme","geoportail","webservice","javascript","es6"],author$1="IGNF",license$1="CECILL-B",dependencies$1={"es6-promise":"^4.2.4","node-fetch":"^2.6.1","@xmldom/xmldom":"^0.8.10"},devDependencies={"@babel/core":"^7.12.10","@babel/plugin-transform-template-literals":"^7.12.1","@babel/preset-env":"^7.12.11","babel-loader":"^8.2.2",chai:"^4.1.2","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^5.1.2",eslint:"^7.18.0","eslint-config-standard":"^16.0.2","eslint-loader":"^4.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^5.0.0",glob:"^7.1.2","handlebars-layouts":"^3.1.4","handlebars-webpack-plugin":"^1.4.1","html-webpack-plugin":"^4.5.1","istanbul-instrumenter-loader":"^3.0.1","jsdoc-webpack-plugin":"^0.3.0",loglevel:"^1.6.1",mocha:"^7.2.0","mocha-loader":"^5.1.5","mocha-webpack":"^2.0.0-beta.0",mochawesome:"^6.2.1",nyc:"^15.1.0",path:"^0.12.7","replace-bundle-webpack-plugin":"^1.0.0",sinon:"^9.2.4","sinon-es6":"0.0.3","speed-measure-webpack-plugin":"^1.4.2","string-template":"^1.0.0","terser-webpack-plugin":"^2.3.8",webpack:"^4.46.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-node-externals":"^2.5.2","webpack-shell-plugin":"^0.5.0"},bundledDependencies=[],peerDependencies={},optionalDependencies={},Pkg$1={name:name$1,version:version$1,date:date$1,description:description$1,module:module$1,main,homepage:homepage$1,scripts,engines:engines$1,nyc,repository:repository$1,keywords:keywords$1,author:author$1,license:license$1,dependencies:dependencies$1,devDependencies,bundledDependencies,peerDependencies,optionalDependencies};function CommonService(i){if(!(this instanceof CommonService))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR"));this.logger=LoggerByDefault.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(s){console.log("onSuccess - la reponse est la suivante : ",s)},onFailure:function(s){s.status===200||!s.status?console.log("onFailure : ",s.message):console.log("onFailure - Erreur (",s.status,") : ",s.message)}};for(var e in i)i.hasOwnProperty(e)&&(this.options[e]=i[e]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(s){console.log("onSuccess - la réponse brute du service est la suivante : ",s)});var a=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!a)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod=typeof i.httpMethod=="string"?i.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof i.protocol=="string"?i.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=i.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}CommonService.prototype={constructor:CommonService,call:function(){this.logger.trace("CommonService::call ()");var i=this;function e(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(i,c,a)}e.call(i);function a(d){this.logger.trace("CommonService::onBuildRequest : ",d),this.callService.call(i,c,s)}function s(d){this.logger.trace("CommonService::onCallService : ",d),this.analyzeResponse.call(i,c,o)}function o(d){if(this.logger.trace("CommonService::onAnalyzeResponse : ",d),d)this.options.onSuccess.call(this,d);else return c.call(this,new ErrorService("Analyse de la reponse en échec !?"))}function c(d){this.logger.trace("CommonService::onError()");var h=d;h instanceof ErrorService||(h=new ErrorService(d.message)),this.options.onFailure.call(this,h)}},buildRequest:function(i,e){this.logger.error("overwritten method !"),i&&i.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(i,e){var a=null,s=this.request,o=!!(this.options.proxyURL&&this.options.protocol==="XHR"),c={"gp-access-lib":Pkg$1.version};this.options.apiKey&&(c.apiKey=this.options.apiKey),this.options.serverUrl=Helper$1.normalyzeUrl(this.options.serverUrl,c,!1),o&&(this.options.httpMethod==="GET"&&(a=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,this.request,!0),s=null),this.options.httpMethod==="POST"&&(a=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,null,!0),s=this.request));var d=this,h={url:a||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:s,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(g){d.logger.trace("callService::onResponse()");var _=null;if(d.options.protocol==="XHR"&&(d.logger.trace("Response XHR",g),_=g),d.options.protocol==="JSONP")if(d.logger.trace("Response JSON",g),g)if(g.http)if(g.http.status!==200){i.call(d,new ErrorService({status:g.http.status,message:g.http.error,type:ErrorService.TYPE_SRVERR}));return}else _=g.xml,d.options.rawResponse&&(_=g);else _=g;else{i.call(d,new ErrorService("Le contenu de la reponse est vide !?"));return}if(typeof d.options.onBeforeParse=="function"){var b=d.options.onBeforeParse(_);typeof b=="string"&&(_=b)}d.response=_,e.call(d,_)},onFailure:function(g){d.logger.trace("callService::onFailure()"),g.type=ErrorService.TYPE_SRVERR,i.call(d,new ErrorService(g))},onTimeOut:function(){d.logger.trace("callService::onTimeOut()"),i.call(d,new ErrorService("TimeOut!"))}};Protocol.send(h)},analyzeResponse:function(i,e){this.logger.error("overwritten method !"),i&&i.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};var DefaultUrlService={ssl:!0,newUrl:function(i){var e="data.geopf.fr",a;return DefaultUrlService.ssl===!1?a="http://":a="https://",a+e+i},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":DefaultUrlService.newUrl(this.new_key["elevation-json"]),"elevation-xml":DefaultUrlService.newUrl(this.new_key["elevation-xml"]),"profil-json":DefaultUrlService.newUrl(this.new_key["profil-json"]),"profil-xml":DefaultUrlService.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(i){Array.isArray(i)||(i=i.split(","));for(var e=[],a=0;a<i.length;a++)e[a]=this._key+i[a]+"Config.json";return e}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}}};function ConfigInterface(){if(!(this instanceof ConfigInterface))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}ConfigInterface.prototype={constructor:ConfigInterface,isKeyConfLoaded:function(i){if(i)return!!this.generalOptions.apiKeys[i]},getLayersId:function(i){return this.generalOptions.apiKeys[i]},getLayerId:function(i,e){if(!(!i||!e)){var a=null;if(this.layers){var s=this.layers;for(var o in s)if(s.hasOwnProperty(o)){var c=o.split("$");if(i===c[0]&&c[1]){var d=c[1].split(":"),h=c[1].split(";");if(h[1]===e.toUpperCase()){a=o;break}if(d[2]===e.toUpperCase()){a=o;break}}}}if(a)return a}},getLayersConf:function(i){var e={},a=this.getLayersId(i);if(a)for(var s=0;s<a.length;s++){var o=a[s];e[o]=this.layers[o]}return e},getLayerConf:function(i){if(this.layers)return this.layers[i]},getLayerParams:function(i,e){var a={};if((e==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var s=this.getLayerId(i,e);if(s){var o=this.getLayerConf(s),c=this.getLayerKey(s);if(c.length===0)return;for(var d=0;d<c.length;d++)o.serviceParams.serverUrl[c[d]]&&(a.url=o.serviceParams.serverUrl[c[d]]);if(/\/v\//.test(a.url)?a.styles=" ":a.styles=o.styles[0].name,a.version=o.serviceParams.version,a.format=o.formats[0].name,a.projection=o.defaultProjection,a.minScale=o.globalConstraint.minScaleDenominator,a.maxScale=o.globalConstraint.maxScaleDenominator,a.extent=o.globalConstraint.bbox,a.legends=o.legends,a.title=o.title,a.description=o.description,e==="WMS"&&(a.metadata=o.metadata),o.wmtsOptions){a.tileMatrixSetLimits=o.wmtsOptions.tileMatrixSetLimits;var h=o.wmtsOptions.tileMatrixSetLink;if(h){a.TMSLink=h;var g=this.getTMSConf(h);a.matrixIds=Object.keys(g.tileMatrices),a.tileMatrices=g.tileMatrices,a.nativeResolutions=g.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return a},getLayerKey:function(i){var e=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var a=this.generalOptions.apiKeys;for(var s in a){var o=a[s];o.forEach(function(c){c===i&&e.push(s)})}}return e},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(i){if(this.tileMatrixSets)return this.tileMatrixSets[i]},getGlobalConstraints:function(i){var e={};if(i){var a=this.getLayerConf(i);e.projection=a.defaultProjection,e.minScale=a.globalConstraint.minScaleDenominator,e.maxScale=a.globalConstraint.maxScaleDenominator,e.extent=a.globalConstraint.bbox}return e}};function Config(i){if(!(this instanceof Config))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=LoggerByDefault.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var e=i.onSuccess!==null&&typeof i.onSuccess=="function";if(!e)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));!i.apiKey&&!i.customConfigFile&&(i.apiKey="full"),this.options={},this.options.onSuccess=i.onSuccess,this.options.onFailure=i.onFailure,this.options.sync=i.sync||!1,this.options.listConfigUrls=i.customConfigFile?[i.customConfigFile]:Array.isArray(i.apiKey)?DefaultUrlService.Config.url(i.apiKey):DefaultUrlService.Config.url(i.apiKey.split(","))}Config.prototype=Object.create(CommonService.prototype,{});Config.prototype.constructor=Config;Config.prototype.buildRequest=function(i,e){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){i.call(this,new Error("url by default not found !"));return}e.call(this,this.listConfigUrls)};Config.prototype.callService=function(i,e){this.options.sync?__callServiceSync.call(this,i,e):__callService.call(this,i,e)};var __callService=function(i,e){this.listConfigResults=[];let a=null;if(typeof window>"u"){var s=require("node-fetch");a=s}else a=window.fetch;var o=d=>a(d,{credentials:"same-origin"}).then(h=>{if(h.ok)return h.json().then(g=>g).catch(g=>{throw new Error("Exception Json : "+g)});throw new Error("Exception HTTP : "+h.status+" (status code) !")}).catch(h=>new Promise((g,_)=>{_(h)})),c=[];for(let d=0;d<this.listConfigUrls.length;d++){const h=this.listConfigUrls[d];c.push(o(h))}Promise.all(c).then(d=>{if(!d)throw new Error("results config empty !?");d.forEach(h=>{this.listConfigResults.push(h)})}).then(()=>{e.call(this,this.listConfigResults)}).catch(d=>{i.call(this,d)})},__callServiceSync=function(i,e){this.listConfigResults=[];for(var a=0;a<this.listConfigUrls.length;a++){const o=this.listConfigUrls[a],c=new XMLHttpRequest;if(c.open("GET",o,!1),c.send(null),c.status===200){var s=JSON.parse(c.responseText);this.listConfigResults.push(s)}}this.listConfigResults.length!==0?e.call(this,this.listConfigResults):i.call(this,new Error("..."))};Config.prototype.analyzeResponse=function(i,e){var a=function(h){for(var g={},_={},b={},j=0;j<h.length;j++){if(!h[j].generalOptions||!h[j].layers)return;_={..._,...h[j].generalOptions.apiKeys},g={...g,...h[j].layers},b={...b,...h[j].tileMatrixSets}}var $={generalOptions:{apiKeys:_},layers:g,tileMatrixSets:b};return $},s=a(this.listConfigResults);if(!s){i.call(this,new Error("configuration structure not conforme !"));return}var o=new ConfigInterface;Object.assign(o,s);var c=typeof window<"u"?window:{};if(c.Gp||(c.Gp={}),c.Gp.Config){Object.assign(c.Gp.Config,o);for(var d in o)c.Gp.Config[d]=o[d]}else c.Gp.Config=o;e.call(this,c.Gp.Config)};function AltiRequest(i){if(!(this instanceof AltiRequest))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=i||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}AltiRequest.CLASSNAME="AltiRequest";AltiRequest.prototype={constructor:AltiRequest,setPositions:function(i){for(var e=[],a=0;a<i.length;a++){var s=i[a];s.lon&&s.lat&&e.push(s)}this.positions=e},getPositions:function(i){if(!i)return this.positions;var e=this.positions.length-1;return i>e||i<e?(this.logger.warn("index out of range !"),this.positions):this.positions[i]},addPositions:function(i){for(var e=0;e<i.length;e++){var a=i[e];a.lon&&a.lat&&this.positions.push(i[e])}},getLon:function(){for(var i=[],e=0;e<this.positions.length;e++)i.push(this.positions[e].lon);return this.logger.trace(i),i.join(this.delimiter)},getLat:function(){for(var i=[],e=0;e<this.positions.length;e++)i.push(this.positions[e].lat);return this.logger.trace(i),i.join(this.delimiter)}};AltiRequest.prototype.getData=function(){var i=[];return i.push({k:"lon",v:this.getLon()}),i.push({k:"lat",v:this.getLat()}),i.push({k:"delimiter",v:this.delimiter}),i.push({k:"indent",v:this.indent}),i.push({k:"crs",v:this.crs}),i.push({k:"format",v:this.format}),i};function AltiElevationRequest(i){if(!(this instanceof AltiElevationRequest))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}AltiElevationRequest.prototype=Object.create(AltiRequest.prototype,{zonly:{get:function(){return this._zonly},set:function(i){this._zonly=i}}});AltiElevationRequest.prototype.constructor=AltiElevationRequest;AltiElevationRequest.prototype.getData=function(){var i=[];return i.push({k:"lon",v:this.getLon()}),i.push({k:"lat",v:this.getLat()}),i.push({k:"indent",v:this.indent}),i.push({k:"crs",v:this.crs}),i.push({k:"zonly",v:this.zonly}),i.push({k:"format",v:this.format}),i.push({k:"resource",v:this.resource}),i};function AltiProfilRequest(i){if(!(this instanceof AltiProfilRequest))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}AltiProfilRequest.prototype=Object.create(AltiRequest.prototype,{sampling:{get:function(){return this._sampling},set:function(i){this._sampling=i}}});AltiProfilRequest.prototype.constructor=AltiProfilRequest;AltiProfilRequest.prototype.getData=function(){var i=[];return i.push({k:"lon",v:this.getLon()}),i.push({k:"lat",v:this.getLat()}),i.push({k:"indent",v:this.indent}),i.push({k:"crs",v:this.crs}),i.push({k:"sampling",v:this.sampling}),i.push({k:"format",v:this.format}),i.push({k:"resource",v:this.resource}),i};function AltiRequestREST(i){if(this.logger=LoggerByDefault.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof AltiRequestREST))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=i||{},!this.options)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new AltiElevationRequest(this.options.param);break;case"Profil":this.DataObject=new AltiProfilRequest(this.options.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}AltiRequestREST.prototype={requestString:null,constructor:AltiRequestREST,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
resource='__RESOURCE__'
measures='__MEASURES__'
`,input:{point:`zonly=__ZONLY__
`,profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var i="";return this.method==="POST"?i=this.template.post.value:this.method==="GET"&&(i=this.template.get.value),i=i.replace(/__LON__/g,this.DataObject.getLon()),i=i.replace(/__LAT__/g,this.DataObject.getLat()),i=i.replace(/__INDENT__/g,this.DataObject.indent),i=i.replace(/__CRS__/g,this.DataObject.crs),i=i.replace(/__RESOURCE__/g,this.DataObject.resource),i=i.replace(/__MEASURES__/g,this.DataObject.measures),i=i+this.__addDataInputs(),this.logger.trace("traduction tmpl",i),this.requestString=i,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var i;if(this.method==="POST")i=this.template.post;else if(this.method==="GET")i=this.template.get;else throw new Error("No other HTTP method supported by the service !");var e=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return e=i.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if(this.DataObject.CLASSNAME==="AltiProfilRequest")return e=i.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function WPS(i){if(this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof WPS))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=i||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}WPS.prototype={requestString:null,constructor:WPS,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var i=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return i.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var i="";if(this.method==="POST")i=this.template.post.value;else if(this.method==="GET")i=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return i=i.replace(/__SERVICE__/g,this.paramservice),i=i.replace(/__VERSION__/g,this.paramversion),i=i.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),i=i.replace(/__IDENTIFIER__/g,this.paramidentifier),i=i.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(i=i.replace(/__NAMESPACE__/g,this.namespaceByDefault),i=i.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),i=i.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),i?(this.requestString=i,this.logger.trace("traduction tmpl",i),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var i=this.method==="GET"?this.template.get.input:this.template.post.input,e=this.method==="GET"?";":"",a="",s=this,o=this.DataObject.getData(),c=0;c<o.length;c++)(function(d){e&&(e=d===o.length-1?"":";"),a=a.concat(s.__addDataInput(i,o[d].k,o[d].v),e)})(c);return a},__addDataInput:function(i,e,a){var s=i;return s=s.replace(/__KEY__/g,e),s=s.replace(/__DATA__/g,a),s},setMethod:function(i){i==="GET"||i==="POST"?this.method=i:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var AltiRequestWPS={build:function(i){var e=LoggerByDefault.getLogger("AltiRequestWPS");if(e.trace(["AltiRequestWPS::build()"]),!i)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!i.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var a=null;switch(i.type){case"Elevation":i.wps.identifier="gs:WPSElevation",a=new AltiElevationRequest(i.param);break;case"Profil":i.wps.identifier="gs:WPSLineElevation",a=new AltiProfilRequest(i.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var s={data:a,method:i.method,param:i.wps},o=new WPS(s);if(!o.processRequestString())throw new Error("Enable to process request !");return o.requestString}},AltiRequestFactory={build:function(i){var e=LoggerByDefault.getLogger("AltiRequestFactory");e.trace(["AltiRequestFactory::build()"]);var a=null,s={type:i.sampling?"Profil":"Elevation",method:i.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};s.param.positions=i.positions,s.param.format=i.outputFormat,s.param.sampling=i.sampling,s.param.zonly=i.zonly,s.param.measures=i.measures,s.param.resource=i.resource;var o=i.onError!==null&&typeof i.onError=="function",c=i.onSuccess!==null&&typeof i.onSuccess=="function",d=null;switch(i.api){case"REST":var h=new AltiRequestREST(s);if(!h.processRequestString()){if(d="Error in process request (rest) !",o){i.onError.call(i.scope,new ErrorService(d));return}throw new Error(d)}a=h.requestString;break;case"WPS":if(s.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},a=AltiRequestWPS.build(s),!a){if(d="Error in process request (wps) !",o){i.onError.call(i.scope,new ErrorService(d));return}throw new Error(d)}break;default:if(d="Type of API is not supported by service (REST or WPS) !",o){i.onError.call(i.scope,new ErrorService(d));return}throw new Error(d)}return c&&i.onSuccess.call(i.scope,a),a}};function XML$1(i){if(!(this instanceof XML$1))throw new TypeError("XML constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,i&&(i.xmlString&&typeof i.xmlString=="string"&&(this.xmlString=i.xmlString,this.xmlDoc=__getXMLDOC(i.xmlString)),i.reader&&this.setReader(i.reader))}XML$1.prototype={constructor:XML$1,getXMLString:function(){return this.xmlString},setXMLString:function(i){i&&typeof i=="string"&&(this.xmlString=i,this.xmlDoc=__getXMLDOC(i))},getReader:function(){return this.reader},setReader:function(i){i&&i.read&&typeof i.read=="function"&&(this.reader=i)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(i){this.xmlDoc=i},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=__getXMLDOC(this.xmlString)),this.xmlDoc){var i=__getRootNode(this.xmlDoc);if(i){var e;return this.reader&&this.reader.read?e=this.reader.read(i):(e={},e[i.nodeName]=__readDefault(i)),e}else return{}}}};function __getXMLDOC(i){if(typeof window>"u"){var e=require("@xmldom/xmldom").DOMParser;return new e().parseFromString(i,"text/xml")}else{var a,s,o="Erreur lors du parsing de la réponse du service : XML non conforme";if(window.ActiveXObject){s=new window.ActiveXObject("Microsoft.XMLDOM"),s.async=!1,s.loadXML(i);var c=s.parseError;if(c.errorCode)throw c.line&&c.linepos&&(o+="( ligne "+c.line+", colonne "+c.linepos),c.reason&&(o+=":  "+c.reason+")"),new Error(o);return s}else if(window.DOMParser){a=new window.DOMParser;try{s=a.parseFromString(i,"text/xml")}catch(_){throw _.message==="SyntaxError"?new Error(o):new Error("Erreur lors du parsing de la réponse du service : "+_.message)}if(s.getElementsByTagName("parsererror").length>0)for(var d=s.getElementsByTagName("parsererror"),h=0;h<d.length;h++){var g=d[h].innerHTML;if(g.indexOf("Huge input lookup")===-1)throw o+="("+g+")",new Error(o)}else if(!s.documentElement)throw new Error(o);return s}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function __getRootNode(i){var e;return i.nodeType===9?e=i.documentElement:i.nodeType===1&&(e=i),e}function __readDefault(i){var e={};if(i.attributes.length>0){var a=__getAttributes(i);e.attributes=a}if(i.hasChildNodes()){for(var s={},o,c=i.childNodes,d=0;d<c.length;d++)if(o=c[d],o.nodeType===3)e.textContent=o.nodeValue;else if(o.nodeType===1)if(s=__readDefault(o),!e[o.nodeName])e[o.nodeName]=s;else{if(!Array.isArray(e[o.nodeName])){var h=e[o.nodeName];e[o.nodeName]=[],e[o.nodeName].push(h)}e[o.nodeName].push(s)}}return e}function __getAttributes(i){if(i.attributes.length>0){for(var e={},a=i.attributes,s=0;s<a.length;s++){var o=a[s];e[o.nodeName]=o.nodeValue}return e}}function AltiResponse(){if(!(this instanceof AltiResponse))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}AltiResponse.prototype={constructor:AltiResponse};function Elevation(){if(!(this instanceof Elevation))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Elevation.prototype={constructor:Elevation};function Measure(){if(!(this instanceof Measure))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Measure.prototype={constructor:Measure};var AltiResponseReader={};AltiResponseReader.READERS={elevations:function(i){var e=new AltiResponse;if(i.hasChildNodes())for(var a=i.childNodes,s,o,c=0;c<a.length;c++)s=a[c],AltiResponseReader.READERS[s.nodeName]&&(o=AltiResponseReader.READERS[s.nodeName](s),e.elevations.push(o));return e},elevation:function(i){var e=new Elevation;if(i.hasChildNodes())for(var a=i.childNodes,s,o=0;o<a.length;o++)s=a[o],AltiResponseReader.READERS[s.nodeName]&&AltiResponseReader.READERS[s.nodeName](s,e);return e},lat:function(i,e){var a=i.firstChild;if(a&&a.nodeType===3)e.lat=parseFloat(a.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : latitude attendue mais absente")},lon:function(i,e){var a=i.firstChild;if(a&&a.nodeType===3)e.lon=parseFloat(a.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : longitude attendue mais absente")},z:function(i,e){var a=i.firstChild;if(a&&a.nodeType===3)if(e)e.z=parseFloat(a.nodeValue);else return e=new Elevation,e.z=parseFloat(a.nodeValue),e;else throw new Error("Erreur dans la lecture de la réponse du service : altitude attendue mais absente")},acc:function(i,e){var a=i.firstChild;if(a&&a.nodeType===3)e.acc=parseFloat(a.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente")},source_name:function(i,e){var a=i.firstChild;if(a&&a.nodeType===3)e.source_name=a.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_name attendue mais absente")},source_measure:function(i,e){var a=i.firstChild;if(a&&a.nodeType===3)e.source_measure=a.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_measure attendue mais absente")},measures:function(i,e){e.measures=[];var a;if(i.hasChildNodes())for(var s=i.childNodes,o,c,d=0;d<s.length;d++){a=new Measure,o=s[d],c=o.childNodes;for(var h=0;h<c.length;h++)if(AltiResponseReader.READERS[c[h].nodeName])AltiResponseReader.READERS[c[h].nodeName](c[h],a);else throw new Error("Erreur dans la lecture de la réponse du service : measures attendues mais absentes");e.measures.push(a)}},exceptionreport:function(i){var e={};if(i.hasChildNodes())for(var a=i.childNodes,s,o=0;o<a.length;o++)s=a[o],s.nodeName==="Exception"&&(e.exceptionReport=AltiResponseReader.READERS.exception(s));return e},exception:function(i){var e={},a=i.getAttribute("exceptionCode");a&&(e.exceptionCode=a);var s=i.firstChild;return s&&s.nodeType===3&&(e.exception=s.nodeValue),e},error:function(i){var e={error:{}};if(i.hasChildNodes())for(var a=i.childNodes,s,o=0;o<a.length;o++){s=a[o];var c;s.nodeType===1&&s.nodeName==="code"&&(c=s.firstChild,c&&c.nodeType===3&&(e.error.code=c.nodeValue)),s.nodeType===1&&s.nodeName==="description"&&(c=s.firstChild,c&&c.nodeType===3&&(e.error.description=c.nodeValue))}return e}};AltiResponseReader.read=function(i){if(i.nodeName==="elevations"){var e=AltiResponseReader.READERS.elevations(i);return e}else if(i.nodeName==="ExceptionReport"){var a=AltiResponseReader.READERS.exceptionreport(i);return a}else if(i.nodeName==="error"){var s=AltiResponseReader.READERS.error(i);return s}else throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};var AltiResponseFactory={build:function(i){var e=LoggerByDefault.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var a=null;if(i.response)if(i.rawResponse)e.trace("analyze response : raw"),a=i.response;else{switch(i.outputFormat){case"xml":e.trace("analyze response : xml");try{var s=new XML$1({reader:AltiResponseReader});if(typeof i.response=="string"?s.setXMLString(i.response):s.setXMLDoc(i.response),a=s.parse(),!a)throw new Error(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(j){var o=j.message;i.onError.call(i.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",o),status:200,type:ErrorService.TYPE_SRVERR}));return}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof i.response);var c=null;if(typeof i.response=="string"?c=JSON.parse(i.response):c=i.response,c&&c.error){i.onError.call(i.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",c.error.description),status:200,type:ErrorService.TYPE_SRVERR}));return}if(c){var d=c.elevations,h=new AltiResponse,g;if(Array.isArray(d)&&d.length)for(var _=0;_<d.length;_++)g=new Elevation,typeof d[_]=="object"?(d[_].lon&&(g.lon=d[_].lon),d[_].lat&&(g.lat=d[_].lat),d[_].z&&(g.z=d[_].z),d[_].acc&&(g.acc=d[_].acc),d[_].measures&&(g.measures=d[_].measures)):typeof d[_]=="number"&&(g.z=d[_]),Array.isArray(h.elevations)&&h.elevations.push(g);a=h}if(!a){i.onError.call(i.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}break;default:i.onError.call(i.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(a.exceptionReport){i.onError.call(i.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",a.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}else if(a.error){var b=a.error.description;i.onError.call(i.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",b),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{i.onError.call(i.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}i.onSuccess.call(i.scope,a)}};function Alti(i){if(!(this instanceof Alti))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",CommonService.apply(this,arguments),this.logger=LoggerByDefault.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!i.positions)throw new Error(MessagesResources.getMessage("PARAM_MISSING","positions"));if(i.positions.length===0)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=i.positions,this.options.outputFormat=typeof i.outputFormat=="string"?i.outputFormat.toLowerCase():"xml",this.options.resource=i.resource||"ign_rge_alti_wld",this.options.sampling=i.sampling||null,this.options.api=typeof i.api=="string"?i.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=i.zonly||!1,this.options.measures=i.measures||!1,!this.options.serverUrl){var e=DefaultUrlService.Alti.newUrl(),a=null;switch(this.options.api){case"WPS":a=e.wps;break;case"REST":var s=(i.sampling?"profil":"elevation")+"-"+this.options.outputFormat;a=e[s];break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","api"))}if(!a)throw new Error("Url by default not found !");this.options.serverUrl=a,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var o=this.options.serverUrl.lastIndexOf(".");if(o!==-1){var c=this.options.serverUrl.substring(o+1);if(c&&c.length<5)switch(this.logger.trace("Server Extension URL : "+c),c.toLowerCase()){case"json":case"xml":this.options.outputFormat=c.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}Alti.prototype=Object.create(CommonService.prototype,{});Alti.prototype.constructor=Alti;Alti.prototype.buildRequest=function(i,e){var a={httpMethod:this.options.httpMethod,onSuccess:function(s){this.request=s,e.call(this,this.request)},onError:i,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};AltiRequestFactory.build(a)};Alti.prototype.analyzeResponse=function(i,e){if(this.response){var a={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:i,onSuccess:e,scope:this};AltiResponseFactory.build(a)}else i.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function GeocodeParamREST(i){if(!(this instanceof GeocodeParamREST))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=i||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}GeocodeParamREST.CLASSNAME="GeocodeParamREST";GeocodeParamREST.prototype={constructor:GeocodeParamREST,getFilters:function(){var i={};for(var e in this.filters)this.filters.hasOwnProperty(e)&&(i[e]=this.filters[e]);return i},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};GeocodeParamREST.prototype.getParams=function(){var i=[];this.geocodeMethod==="search"&&i.push({k:"q",v:this.query}),this.index&&i.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&i.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(i.push({k:"lon",v:this.lon}),i.push({k:"lat",v:this.lat})),this.maxResp&&i.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&i.push({k:"returntruegeometry",v:this.returnTrueGeometry});const e=this.getFilters();for(var a in e)i.push({k:a,v:e[a]});return i};function GeocodeRequestREST(i){if(this.logger=LoggerByDefault.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof GeocodeRequestREST))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!i)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=i}GeocodeRequestREST.prototype={requestString:null,constructor:GeocodeRequestREST,processRequestString:function(){var i="";const a=new GeocodeParamREST(this.settings).getParams();for(var s=0;s<a.length;s++){var o=a[s];i&&(i+="&"),i+=o.k+"="+o.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+i,this.logger.trace(this.requestString),this.requestString}};var GeocodeRequestFactory={build:function(i){var e=LoggerByDefault.getLogger("GeocodeRequestFactory");e.trace(["GeocodeRequestFactory::build()"]);var a=i||{},s=new GeocodeRequestREST(a);if(!s.processRequestString())throw new Error("Error process request (rest) !");var o=s.requestString;return e.trace(o),o}};function GeocodeResponse(){if(!(this instanceof GeocodeResponse))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}GeocodeResponse.prototype={constructor:GeocodeResponse};function GeocodedLocation(){if(!(this instanceof GeocodedLocation))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}GeocodedLocation.prototype={constructor:GeocodedLocation};function GeocodeResponseParser(){if(!(this instanceof GeocodeResponseParser))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}GeocodeResponseParser.prototype={constructor:GeocodeResponseParser,parse:function(i){var e=new GeocodeResponse;const a=JSON.parse(i);if(a.type==="FeatureCollection")for(var s=0;s<a.features.length;++s)_parseFeature(a.features[s],e);else if(a.type==="Feature")_parseFeature(a,e);else{if(a.type==="SERVICE_ERROR")return _parseError(a);var o=MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",a.type);throw new ErrorService({message:o,type:ErrorService.TYPE_UNKERR,status:200})}return e}};function _parseFeature(i,e){var a=new GeocodedLocation;if(i.geometry&&i.geometry.type==="Point"&&(a.position={lon:i.geometry.coordinates[0],lat:i.geometry.coordinates[1]}),i.properties){for(var s in i.properties)s==="score"?a.accuracy=i.properties[s]:s==="_type"?i.properties[s]==="address"?a.type="StreetAddress":i.properties[s]==="poi"?a.type="PositionOfInterest":(i.properties[s]==="parcel"||i.properties[s]==="cadastral")&&(a.type="CadastralParcel"):a.placeAttributes[s]=i.properties[s];i.properties._type==="address"&&(a.matchType=i.properties.number!==void 0&&i.properties.number!==null?"street number":"street")}e.locations.push(a)}function _parseError(i){return{exceptionReport:i}}var GeocodeReponseFactory={build:function(i){var e=null;if(i.response)if(i.rawResponse)e=i.response;else{try{if(e=new GeocodeResponseParser().parse(i.response),!e)throw new Error("L'analyse de la réponse du service !?")}catch(s){var a=s.message;typeof i.response=="string"?a+="('"+i.response+"')":a+="('"+i.response.documentElement.innerHTML+"')",i.onError.call(i.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",a),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){i.onError.call(i.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{i.onError.call(i.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY"),type:ErrorService.TYPE_SRVERR,status:-1}));return}i.onSuccess.call(i.scope,e)}};function Geocode(i){if(!(this instanceof Geocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=LoggerByDefault.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var e=this.patchOptionConvertor(i);if(e.serverUrl||(e.serverUrl=DefaultUrlService.Geocode.newUrl()),CommonService.apply(this,[e]),!e.hasOwnProperty("query"))throw new Error(MessagesResources.getMessage("PARAM_MISSING","query"));if(this.options.query=e.query,e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var a=Object.keys(e.filters),s=0;s<a.length;s++){var o=a[s];(typeof e.filters[o]>"u"||typeof e.filters[o]=="object"&&Object.keys(e.filters[o]).length===0||typeof e.filters[o]=="string"&&e.filters[o].length===0||Array.isArray(e.filters[o])&&e.filters[o].length===0)&&delete this.options.filters[o]}this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Geocode.prototype=Object.create(CommonService.prototype,{});Geocode.prototype.constructor=Geocode;Geocode.prototype.patchOptionConvertor=function(i){const e=i;return e.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),e.query||(e.query=e.location),delete e.location),e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filters||(e.filters=e.filterOptions,e.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filters.type)&&e.filters.type.length>0?e.index=e.filters.type[0]:e.index=e.filters.type),delete e.filters.type),e.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete e.filters.bbox)),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete e.returnFreeForm),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Geocode.prototype.buildRequest=function(i,e){var a={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(a),this.request?e.call(this,this.request):i.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Geocode.prototype.analyzeResponse=function(i,e){if(this.response){var a={response:this.response,rawResponse:this.options.rawResponse,onError:i,onSuccess:e,scope:this};GeocodeReponseFactory.build(a)}else i.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ReverseGeocode(i){if(!(this instanceof ReverseGeocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=LoggerByDefault.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var e=this.patchOptionConvertor(i);if(e.serverUrl||(e.serverUrl=DefaultUrlService.ReverseGeocode.newUrl()),CommonService.apply(this,[e]),e.searchGeometry)this.options.searchGeometry=e.searchGeometry;else if(!e.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","searchGeometry"));if(e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var a=Object.keys(e.filters),s=0;s<a.length;s++){var o=a[s];(typeof e.filters[o]>"u"||typeof e.filters[o]=="object"&&Object.keys(e.filters[o]).length===0||typeof e.filters[o]=="string"&&e.filters[o].length===0||Array.isArray(e.filters[o])&&e.filters[o].length===0)&&delete this.options.filters[o]}this.options.position=e.position,this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}ReverseGeocode.prototype=Object.create(CommonService.prototype,{});ReverseGeocode.prototype.constructor=ReverseGeocode;ReverseGeocode.prototype.patchOptionConvertor=function(i){var e=i;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filterOptions.type)&&e.filterOptions.type.length>0?e.index=e.filterOptions.type[0]:e.index=e.filterOptions.type),delete e.filterOptions.type),e.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),e.searchGeometry||(e.searchGeometry=this.bbox2Json(e.filterOptions.bbox)),delete e.filterOptions.bbox),e.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),e.searchGeometry||(e.searchGeometry=this.circle2Json(e.filterOptions.circle)),delete e.filterOptions.circle),e.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),e.searchGeometry||(e.searchGeometry=this.polygon2Json(e.filterOptions.polygon)),delete e.filterOptions.polygon),!e.filters&&Object.keys(e.filterOptions).length>0&&(e.filters=e.filterOptions),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};ReverseGeocode.prototype.buildRequest=function(i,e){var a={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(a),this.request?e.call(this,this.request):i.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};ReverseGeocode.prototype.analyzeResponse=function(i,e){if(this.response){var a={response:this.response,rawResponse:this.options.rawResponse,onError:i,onSuccess:e,scope:this};GeocodeReponseFactory.build(a)}else i.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};ReverseGeocode.prototype.bbox2Json=function(i){return{type:"Polygon",coordinates:[[[i.left,i.top],[i.right,i.top],[i.right,i.bottom],[i.left,i.bottom],[i.left,i.top]]]}};ReverseGeocode.prototype.circle2Json=function(i){return{type:"Circle",radius:i.radius,coordinates:[i.x,i.y]}};ReverseGeocode.prototype.polygon2Json=function(i){for(var e={type:"Polygon",coordinates:[[]]},a=0;a<i.length;++a)e.coordinates[0].push([i[a].x,i[a].y]);return e};ReverseGeocode.geoEPSG=["EPSG:4326"];function AutoCompleteResponse(){if(!(this instanceof AutoCompleteResponse))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}AutoCompleteResponse.prototype={constructor:AutoCompleteResponse};function SuggestedLocation(){if(!(this instanceof SuggestedLocation))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}SuggestedLocation.prototype={constructor:SuggestedLocation};var AutoCompleteResponseFactory={build:function(i){var e=LoggerByDefault.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var a=null;if(i.response)if(i.rawResponse)e.trace("analyze response : raw"),a=i.response;else{var s=null;if(typeof i.response=="string"?s=JSON.parse(i.response):s=i.response,s){if(s.error){i.onError.call(i.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",s.error.description),status:s.error.code,type:ErrorService.TYPE_SRVERR}));return}if(a=new AutoCompleteResponse,s.results&&Array.isArray(s.results))for(var o=null,c=0;c<s.results.length;c++){var d=s.results[c];o=new SuggestedLocation,d&&(d.country==="StreetAddress"?(o.street=d.street,o.type="StreetAddress"):d.country==="PositionOfInterest"&&(o.poi=d.street,o.type="PositionOfInterest",o.poiType=d.poiType),o.position&&(o.position.x=d.x,o.position.y=d.y),o.kind=d.kind,o.commune=d.city,o.fullText=d.fulltext,o.postalCode=d.zipcode,o.classification=d.classification),a.suggestedLocations.push(o)}else{i.onError.call(i.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!a.suggestedLocations.length){i.onError.call(i.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!a){i.onError.call(i.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(a.exceptionReport){i.onError.call(i.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",a.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{i.onError.call(i.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}i.onSuccess.call(i.scope,a)}};function AutoComplete(i){if(!(this instanceof AutoComplete))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=LoggerByDefault.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var e=this.patchOptionConvertor(i);if(e.serverUrl||(e.serverUrl=DefaultUrlService.AutoComplete.newUrl()),CommonService.apply(this,arguments),!e.text)throw new Error(MessagesResources.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.type||(e.type=["StreetAddress,PositionOfInterest"]),this.options.type=e.type,this.options.territory=e.terr||"",this.options.maximumResponses=e.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}AutoComplete.prototype=Object.create(CommonService.prototype,{});AutoComplete.prototype.constructor=AutoComplete;AutoComplete.prototype.patchOptionConvertor=function(i){const e=i;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.type||(e.type=e.filterOptions.type)),e.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),e.terr||(e.terr=e.filterOptions.territory)),delete e.filterOptions),e};AutoComplete.prototype.buildRequest=function(i,e){var a="";this.options.territory&&(a=this.options.territory);var s="";this.options.type&&(s=this.options.type.join(",")),this.request=Helper$1.normalyzeParameters({text:encodeURIComponent(this.options.text),type:s,terr:a,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):i.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};AutoComplete.prototype.analyzeResponse=function(i,e){if(this.response){var a={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:i,scope:this};AutoCompleteResponseFactory.build(a)}else i.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function RouteParamREST(i){if(!(this instanceof RouteParamREST))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=i||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}RouteParamREST.CLASSNAME="RouteParamREST";RouteParamREST.prototype={constructor:RouteParamREST,getIntermediates:function(){var i=[];if(this.intermediates.length!==0)for(var e=0;e<this.intermediates.length;e++){var a=this.intermediates[e];i.push(a.x+","+a.y)}return i.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var i=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)i.push(JSON.stringify(this.constraints[e]));return i.join("|")}};RouteParamREST.prototype.getParams=function(){var i=[];return i.push({k:"resource",v:this.resource}),i.push({k:"start",v:this.start}),i.push({k:"end",v:this.end}),i.push({k:"geometryFormat",v:"geojson"}),this.optimization&&i.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&i.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&i.push({k:"profile",v:this.getProfile()}),this.constraints&&i.push({k:"constraints",v:this.getConstraints()}),this.crs&&i.push({k:"crs",v:this.crs}),this.distanceUnit&&i.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&i.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&i.push({k:"waysAttributes",v:this.getWaysAttributes()}),i};function RouteRequestREST(i){if(this.logger=LoggerByDefault.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof RouteRequestREST))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!i)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=i}RouteRequestREST.prototype={requestString:null,constructor:RouteRequestREST,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var i=new RouteParamREST(this.settings),e=i.getParams(),a="",s=0;s<e.length;s++){var o=e[s];a&&(a+="&"),a+=o.k+"="+o.v}return this.logger.trace(a),this.requestString=a,this.requestString}};var RouteRequestFactory={build:function(i){var e=LoggerByDefault.getLogger("RouteRequestFactory");e.trace(["RouteRequestFactory::build()"]);var a=null,s=i||{},o=i.onError!==null&&typeof i.onError=="function",c=null,d=new RouteRequestREST(s);if(!d.processRequestString()){if(c="Error process request (rest) !",o){i.onError.call(i.scope,new ErrorService(c));return}throw new Error(c)}return a=d.requestString,a}};function RouteResponse(){if(!(this instanceof RouteResponse))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}RouteResponse.prototype={constructor:RouteResponse};function RouteInstruction(){if(!(this instanceof RouteInstruction))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}RouteInstruction.prototype={constructor:RouteInstruction};var RouteResponseFactory={build:function(i){var e=LoggerByDefault.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var a=null;if(i.response)if(i.rawResponse)e.trace("analyze response : raw"),a=i.response;else{e.trace("analyze response : json");var s;if(typeof i.response=="string"?s=JSON.parse(i.response):s=i.response,s){if(s.message){i.onError.call(i.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",s.message)));return}var o=[],c=[],d=[];if(a=new RouteResponse,a.hasOwnProperty("totalTime")&&(a.totalTime=parseFloat(s.duration)),a.hasOwnProperty("totalDistance")&&(a.totalDistance=parseFloat(s.distance)),a.hasOwnProperty("bbox")&&(a.bbox.left=parseFloat(s.bbox[0]),a.bbox.bottom=parseFloat(s.bbox[1]),a.bbox.right=parseFloat(s.bbox[2]),a.bbox.top=parseFloat(s.bbox[3])),a.hasOwnProperty("routeGeometry")&&!i.geometryInInstructions&&(a.routeGeometry=s.geometry),a.hasOwnProperty("routeInstructions")&&i.geometryInInstructions){var h=s.portions,g;if(Array.isArray(h)&&h.length)for(g=0;g<h.length;g++)o.push(h[g]);if(o.length)for(g=0;g<o.length;g++)c.push(o[g].steps);if(c.length)for(g=0;g<c.length;g++)d=d.concat(c[g]);d.forEach(function(_){switch(a.routeInstructions.push(new RouteInstruction),a.routeInstructions[a.routeInstructions.length-1].duration=_.duration,a.routeInstructions[a.routeInstructions.length-1].distance=_.distance,a.routeInstructions[a.routeInstructions.length-1].code="",a.routeInstructions[a.routeInstructions.length-1].instruction="",a.routeInstructions[a.routeInstructions.length-1].geometry=_.geometry,_.name==="Valeur non renseignée"&&(_.name=""),_.instruction.type){case"turn":a.routeInstructions[a.routeInstructions.length-1].instruction+="Tourner";break;case"new name":a.routeInstructions[a.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":a.routeInstructions[a.routeInstructions.length-1].instruction+="Départ";break;case"arrive":a.routeInstructions[a.routeInstructions.length-1].instruction+="Arrivée";break;case"merge":a.routeInstructions[a.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":a.routeInstructions[a.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":a.routeInstructions[a.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":a.routeInstructions[a.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":a.routeInstructions[a.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":a.routeInstructions[a.routeInstructions.length-1].instruction+="À la fin de la route, prendre";break;case"use lane":a.routeInstructions[a.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":a.routeInstructions[a.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":a.routeInstructions[a.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":a.routeInstructions[a.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":a.routeInstructions[a.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":a.routeInstructions[a.routeInstructions.length-1].instruction+="";break;default:a.routeInstructions[a.routeInstructions.length-1].instruction+="?"+_.instruction.type+"?";break}if(_.instruction.modifier)switch(_.instruction.modifier){case"uturn":a.routeInstructions[a.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":a.routeInstructions[a.routeInstructions.length-1].instruction+=" complètement à droite";break;case"right":a.routeInstructions[a.routeInstructions.length-1].instruction+=" à droite";break;case"slight right":a.routeInstructions[a.routeInstructions.length-1].instruction+=" légèrement à droite";break;case"straight":a.routeInstructions[a.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":a.routeInstructions[a.routeInstructions.length-1].instruction+=" lègèrement à gauche";break;case"left":a.routeInstructions[a.routeInstructions.length-1].instruction+=" à gauche";break;case"sharp left":a.routeInstructions[a.routeInstructions.length-1].instruction+=" complètement à gauche";break;default:a.routeInstructions[a.routeInstructions.length-1].instruction+=" ?"+_.instruction.modifier+"?";break}_.instruction.exit&&(a.routeInstructions[a.routeInstructions.length-1].instruction+=`${_.instruction.exit}e sortie`),_.attributes.name&&((_.attributes.name.nom_1_droite||_.attributes.name.toponyme)&&(a.routeInstructions[a.routeInstructions.length-1].instruction+=" sur"),_.attributes.name.nom_1_droite&&(a.routeInstructions[a.routeInstructions.length-1].instruction+=` ${_.attributes.name.nom_1_droite}`),_.attributes.name.toponyme&&(a.routeInstructions[a.routeInstructions.length-1].instruction+=` ${_.attributes.name.toponyme}`))})}}if(!a){i.onError.call(i.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(a.exceptionReport){i.onError.call(i.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{i.onError.call(i.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}i.onSuccess.call(i.scope,a)}};function Route(i){if(!(this instanceof Route))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",CommonService.apply(this,arguments),this.logger=LoggerByDefault.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!i.startPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint"));if(i.startPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.x"));if(i.startPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.y"));if(!i.endPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint"));if(i.endPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.x"));if(i.endPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.y"));if(i.outputFormat&&i.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=i.resource||"bdtopo-osrm",this.options.startPoint=i.startPoint,this.options.endPoint=i.endPoint,this.options.viaPoints=i.viaPoints||[],this.options.routePreference=i.routePreference||"fastest",i.graph?(i.graph==="Voiture"&&(this.options.graph="car"),i.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],i.constraints)if(Array.isArray(i.constraints))for(var e=0;e<i.constraints.length;e++)this.options.constraints.push(i.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var a={},s={},o={};if(i.exclusions&&i.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var c=0;c<i.exclusions.length;c++){if(typeof i.exclusions[c]=="string")i.exclusions[c]=i.exclusions[c].toLowerCase();else continue;i.exclusions[c]==="toll"&&(o.constraintType="banned",o.key="wayType",o.operator="=",o.value="autoroute",this.options.constraints.push(o)),i.exclusions[c]==="tunnel"&&(a.constraintType="banned",a.key="wayType",a.operator="=",a.value="tunnel",this.options.constraints.push(a)),i.exclusions[c]==="bridge"&&(s.constraintType="banned",s.key="wayType",s.operator="=",s.value="pont",this.options.constraints.push(s))}}if(this.options.geometryInInstructions=i.geometryInInstructions||!1,this.options.provideBbox=i.provideBbox||!0,this.options.distanceUnit=i.distanceUnit||"m",this.options.timeUnit=i.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=i.srs||"EPSG:4326",this.options.waysAttributes=i.waysAttributes||[],!this.options.serverUrl){var d=DefaultUrlService.Route.newUrl();if(!d)throw new Error("Url by default not found !");this.options.serverUrl=d,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Route.prototype=Object.create(CommonService.prototype,{});Route.prototype.constructor=Route;Route.prototype.buildRequest=function(i,e){var a={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=RouteRequestFactory.build(a),this.request?e.call(this,this.request):i.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Route.prototype.analyzeResponse=function(i,e){if(this.response){var a={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:i,onSuccess:e,scope:this,geometryInInstructions:this.options.geometryInInstructions};RouteResponseFactory.build(a)}else i.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ProcessIsoCurveParam(i){if(!(this instanceof ProcessIsoCurveParam))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=LoggerByDefault.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=i||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance,this.distanceUnit==="m"&&this.costValue>=5e4&&(this.distanceUnit="km",this.costValue/=1e3)):(this.costType="time",this.costValue=this.options.time)}ProcessIsoCurveParam.CLASSNAME="ProcessIsoCurveParam";ProcessIsoCurveParam.prototype={constructor:ProcessIsoCurveParam,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var i=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)i.push(JSON.stringify(this.constraints[e]));return i.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};ProcessIsoCurveParam.prototype.getParams=function(){var i=[];return i.push({k:"resource",v:this.resource}),i.push({k:"point",v:this.getLocation()}),i.push({k:"direction",v:this.getDirection()}),i.push({k:"costType",v:this.costType}),i.push({k:"costValue",v:this.costValue}),i.push({k:"profile",v:this.profile}),i.push({k:"timeUnit",v:this.timeUnit}),i.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&i.push({k:"crs",v:this.crs}),this.constraints&&i.push({k:"constraints",v:this.getConstraints()}),i};function ProcessIsoCurveRequest(i){if(this.logger=LoggerByDefault.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ProcessIsoCurveRequest))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!i)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=i,this.mode=this.settings.httpMethod||"GET"}ProcessIsoCurveRequest.prototype={requestString:null,constructor:ProcessIsoCurveRequest,processRequestString:function(){var i="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var a=new ProcessIsoCurveParam(this.settings),s=a.getParams();for(e=0;e<s.length;e++){var o=s[e];i&&(i+="&"),i+=o.k+"="+o.v}break;case"POST":this.logger.trace("Process POST Request");var c={};c.resource=this.settings.resource,c.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(c.costType="distance",c.costValue=this.settings.distance):(c.costType="time",c.costValue=this.settings.time),c.profile=this.settings.graph,this.settings.reverse?c.direction="arrival":c.direction="departure",c.constraints=this.settings.constraints,c.distanceUnit=this.settings.distanceUnit,c.timeUnit=this.settings.timeUnit,c.crs=this.settings.srs,i=JSON.stringify(c);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(i),this.requestString=i,this.requestString}};function ProcessIsoCurveResponse(){if(!(this instanceof ProcessIsoCurveResponse))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}ProcessIsoCurveResponse.prototype={constructor:ProcessIsoCurveResponse};var ProcessIsoCurveResponseFactory={build:function(i){var e=LoggerByDefault.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var a=null;if(i.response)if(i.rawResponse)e.trace("analyze response : raw"),a=i.response;else{e.trace("analyze response : json");var s;if(typeof i.response=="string"?s=JSON.parse(i.response):s=i.response,a=new ProcessIsoCurveResponse,s){s.costType==="distance"?(a.time="",a.distance=s.costValue):(a.time=s.costValue,a.distance=""),a.message="",a.id="",a.srs=s.crs,a.geometry=s.geometry;var o=s.point.split(",");a.location&&(a.location.x=o[0],a.location.y=o[1])}else{i.onError.call(i.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",i.response)));return}if(a.exceptionReport){i.onError.call(i.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",a.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{i.onError.call(i.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}i.onSuccess.call(i.scope,a)}};function ProcessIsoCurve(i){if(!(this instanceof ProcessIsoCurve))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",CommonService.apply(this,arguments),this.logger=LoggerByDefault.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!i.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position"));if(i.position.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.x"));if(i.position.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.y"));if(!i.time&&!i.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!i.time&&i.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),i.time&&!i.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=i.resource||"bdtopo-valhalla",this.options.exclusions=i.exclusions||[],this.options.reverse=i.reverse||!1,this.options.srs=i.srs||"EPSG:4326",this.options.distanceUnit=i.distanceUnit||"m",this.options.timeUnit=i.timeUnit||"second",i.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,i.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,i.graph?(i.graph==="Voiture"&&(this.options.graph="car"),i.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],i.constraints)if(Array.isArray(i.constraints))for(var e=0;e<i.constraints.length;e++)this.options.constraints.push(i.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var a={},s={},o={};if(i.exclusions&&i.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var c=0;c<i.exclusions.length;c++){if(typeof i.exclusions[c]=="string")i.exclusions[c]=i.exclusions[c].toLowerCase();else continue;i.exclusions[c]==="toll"&&(o.constraintType="banned",o.key="wayType",o.operator="=",o.value="autoroute",this.options.constraints.push(o)),i.exclusions[c]==="tunnel"&&(a.constraintType="banned",a.key="wayType",a.operator="=",a.value="tunnel",this.options.constraints.push(a)),i.exclusions[c]==="bridge"&&(s.constraintType="banned",s.key="wayType",s.operator="=",s.value="pont",this.options.constraints.push(s))}}if(this.options.outputFormat=typeof i.outputFormat=="string"?i.outputFormat.toLowerCase():"json",i.outputFormat&&i.outputFormat!=="json")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var d=DefaultUrlService.ProcessIsoCurve.newUrl();if(!d)throw new Error("Url by default not found !");this.options.serverUrl=d,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}ProcessIsoCurve.prototype=Object.create(CommonService.prototype,{});ProcessIsoCurve.prototype.constructor=ProcessIsoCurve;ProcessIsoCurve.prototype.buildRequest=function(i,e){try{var a=new ProcessIsoCurveRequest(this.options);if(!a.processRequestString())throw new Error(MessagesResources.getMessage("SERVICE_REQUEST_BUILD"));this.request=a.requestString}catch(s){i.call(this,new ErrorService(s.message));return}e.call(this,this.request)};ProcessIsoCurve.prototype.analyzeResponse=function(i,e){if(this.response){var a={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:i,scope:this};ProcessIsoCurveResponseFactory.build(a)}else i.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};var Services={getConfig:function(i){var e=new Config(i);e.call()},getAltitude:function(i){var e=new Alti(i);e.call()},geocode:function(i){var e=new Geocode(i);e.call()},reverseGeocode:function(i){var e=new ReverseGeocode(i);e.call()},autoComplete:function(i){var e=new AutoComplete(i);e.call()},route:function(i){var e=new Route(i);e.call()},isoCurve:function(i){var e=new ProcessIsoCurve(i);e.call()}};const servicesVersion=Pkg$1.version,servicesDate=Pkg$1.date;var Gp={};Gp.servicesVersion=servicesVersion;Gp.servicesDate=servicesDate;Gp.Protocols={};Gp.Protocols.XHR=XHR;Gp.Services=Services;Gp.Services.DefaultUrl=DefaultUrlService;Gp.Services.AltiResponse=AltiResponse;Gp.Services.Alti={};Gp.Services.Alti.Elevation=Elevation;Gp.Services.AutoCompleteResponse=AutoCompleteResponse;Gp.Services.AutoComplete={};Gp.Services.AutoComplete.SuggestedLocation=SuggestedLocation;Gp.Services.Config=Config;Gp.Services.IsoCurveResponse=ProcessIsoCurveResponse;Gp.Services.RouteResponse=RouteResponse;Gp.Services.Route={};Gp.Services.Route.RouteInstruction=RouteInstruction;Gp.Error=ErrorService;Gp.Helper=Helper$1;var Helper={detectSupport:function(){var i=!0,e=window.navigator.userAgent.toLowerCase();return(e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1||e.indexOf("android")!==-1||e.indexOf("mobile")!==-1||e.indexOf("blackberry")!==-1||e.indexOf("tablet")!==-1||e.indexOf("phone")!==-1||e.indexOf("touch")!==-1)&&(i=!1),(e.indexOf("msie")!==-1||e.indexOf("trident")!==-1)&&(i=!0),i},assign:function(i,e){i=i||{};for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a]);return i},mergeParams:function(i,e,a){if(!(typeof i>"u"||typeof e>"u")){typeof a>"u"&&(a=!0);for(var s in e)e.hasOwnProperty(s)&&(typeof e[s]=="object"?i.hasOwnProperty(s)?this.mergeParams(i[s],e[s],a):i[s]=e[s]:i.hasOwnProperty(s)?a&&(i[s]=e[s]):i[s]=e[s])}}},Marker={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAASf3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpptuO4DYX/cxVZAsEBIJfD8ZzsIMvPB8mvpq5OupN6Xc8uW5Yo4OIOdIfzr3/e8A/+lNo1lGpNu2rkT+mlp8GTFt8/4/ktsTy/nz85f96Tn18P6fN6TLzkB30ObPo5/ut1+XaC92HwrP5worY+b8yf3+jlc/72y4k+F8q+Il/F/pyof06U0/uGfE4w3tuK2pv9eAvzvI/7607a+zf4r/tVE3sffv13Maq3K9fJKZ0sOfL7U6ycsv/NIQ+eVH6nXDhQsj3P31fssxIK8rs6ffvTWdH1pZbfHvRTV749+6Vbnwpwa790q6TPIfmXIuu3x9++HqT+vitP6X+4cmmfZ+nn10eVz4p+qf5T/Lvbfe6ZuxhFKbV+burrFp9nHDe5hF+6BZamdEfBUOPRfzo/jZtfQGHHFSc/S7ok2nWlyJYhV87zuGSxxJJOSMaTlFbKz4stW+ppZe9f8R+5yXLPOze6uJ62l5y+rUWey/a4wnO1xpW3cGgSTiZ85G//hL/7gXt9FES8luOtFetKyYvNMrxz/pvD6IjcT1HrU+Cvn1//eF8zHaxeZR+Rzqnne4r5NvPFVn4anTmw8vjOoNj+nIAScenKYiTTAbomuYpKtJRMhEI2GjRYus/MpANSa9osMpWcld605JfmIybPoakmXg68DpnRiZqVOWt0aNCsUir4sdLA0Ki5llqrVqut9jo0a9GqqqZOisOylWDV1MyadRstt9Jq02attd5GTz1DmhBpt95672NwzcGZB58eHDDGTDPPMmuYOm222edYwGeVVZcuW231NXbaecMfW7fttvseRw5QOuXUo8dOO/2MC9RuDrfcevXabbff8a1rn7b+4edvdE0+XUtPp/xA+9Y1XjX7OoU4nVTvGQ1LoQgdN28BgE7es9iklOSd857FDv3lmlhk9Z5t8Y7RwXIk1StfvQvp7ah37v/qW7DyU9/S/9q54K37m537Y99+17XtJLyejr1T6EWNmenjmJEa/zGtf3wMnycdEnrmgScKh+W2rFIB58FVtiU7CVaLdS1hHXPoPkvVW5b2oXDBZM5kyN7VVS1pzsLdAoljo1+6tE5b+ciweuqaTNwEgrpb3atwvSOzw3Aa7Git98o4VD3nq3Nz/50yiEw9MXMCh+hOfU+a3euZl0IjZX1tW/VQIF0lHO5kjFqF2hvlvCOvrEi+yhlzzHKu6fCXapZzFpUqw+TMUoU1TrM8K8eEt2CcvwpvlcXjErqqEPqJVIoz1cQ7CdQOB0qqW1QrkrCsK6Afva0R7pobdpd7pG47/Z7UpwDkCm4ql9Y8G2Oi4+S0rJ3LiVdtruM9Jb1Ja6ESIbdenfb7pXSsmRIcyTStcG9xoGh7gbLD1W/ra462dTTubFKUsWyMLTThhmZUszvGdgZEZizn7D1Pvb3VmlkuoOsHSOIrxmpt0EbpgB81ynTMBlDt4TB1Vq5U0EsVt3mfgfWpNiTznwumVxaPWHprbym/Svr9MfzZG/QkgrS9IGdlYQ6i4zdpbQ/m9sbCKqv0ZKwrI5D8c+V9b9uzAIzM/Z4lm07xdl/X4aOlTekLNI+orHQcAKRJpdnQM8CoBLRYV9plleJl8yJpa3OPe+a+2ljD2pnF7GnxzrzWZijn2Ke3SytrYTJHl3CK9lQgFlNNC3tc+vJx88VLOxAB9avWjwIU0L+9m61oK7lrkrd4DEFof16knx/5sM6pOzqQ89r9dFase7a2kvXApdQOnAIH5T1mG+BM+ikt1QrNMltZKx0fC2XliVbK2enAuDk5P93TQXSY4nS4IchETYYPGGuNXfPJe8dboIixZ13bJ3mSES4KnZel1RgaaOZA8OcESKbuDaQOmjUXww93t1szsyHSFGynylw7HKfe096ywI75p6qE/1AWLgx4tMx14z2j6kyisec64EDuBCwwy/Hkm8cNzHK6iw7YiNbnVQpjdjOH0neUT9rCo7fozG2DjiOBKQKQC/0ivclYZtIwF7fDPLR2xsKkM0cZc3h3ubjIPgBmOYr3S+fTa5Zz1mfVLToJjbVH2GgN1DhKaQuluyAVe7PRRMRsWBqIgqYBoNC+NuDliY1RKG/iF5V5dztbGlQLAybsk82qaE3fzPS1zo1n5ygmKC4wsUvbiNBGerilBnJoSE4DG6x13BXWzXBv4vYFstG1VoOoC6oGPXX/UIRoN9Ib52D6Juin06jZss0ksVys5ZihjGxtMgDdLmq0EzXjzAC3GYCBXfJmwiQVEFzdurMKcZKkpyctqt0wSD0I04f4UnjXutEEdDzPuPOKKFPiKejaATr81NlRGzDe3HRwNPkVbr8UG4ZhJjM8BolsXMthNArGnMEfadoZhuRvosTdXPLOb6A0JOrIp3/hv06r4ESq1wpWZVzvZn6y/7vgYoE/RL0HgLxUNSFWB62gtiN2hhEcIbWpICkUOvvAoA/4gwScv+C0v8MJXQ+Nhqg1bgvZyqdP8vWsKBV8RUCGpsq1Orzz87Z547iFBkQcRUQrWKA86w2AavJxAguRhd6xoAOTYog6816YrroLXcGYxwUwoyFHxbtxwRY8c6zO2TQAYZkL53DIRQdBfHU1oxhJNzYpyVhcSYrFDSNPjwSTWZx0C7pf0DkOS8j9rA2q42RUpIpREda6Y4OVDMScySKSXydzjIPsENagrkkhcCt4BqZhB/N2onoPdi7ctdN3/3Qrd4qgPo8DCaYdnU9QE0W7h/vF5XGz3/AdFCBL/iqDfzDxQUSMGzfioPgJEvYDInjPyQaugchuEgbt4iCQY5ZDnwpnKTiqgj3mLhg1NCq+QwLyYPY43chRPVrq0WriYlciCNXr9VZ3eICCMIBS4nhvGEAIw0qEhaAkDex6p7qYKmQHB1AbnfAkxigx1QyOzGYXWYL/CubfGEbWGIDhxA3eiL9PpQDHRUgAbReX0ZAINyI0tQyUgcVzKFiDBOCFjXMlQ6QIYkMb7saZZliZxQwEHn7o2G6Dw8gKBXCjW9HZ5/SKXUR+OGGzMloZaAvkmmvAMyBcC4kU4YA7WToAmhlidyGKa0VSxUljYxnPcmeRgXsRbqRzbRBckHloBPPrw4Zr9/nkeMzb5VrMpFf9AdVcbrK+uoGUwtqrX/d3dJMJxvohLt7qvV04IsR7p1zM26eJ1/k1x//g+d/H8D4BAfSL+aSxxKRFa8VwUdeY6QURKy/NDAFrToKxoZTYfM331eZeAgxflY4XBZ69YaDqBP0056yGHyqnI9Rm+K1p4rSSFV9wIQGusB4PwEsdXUP9DnZtZ94jN0xuBSPBvXtoV2+0IasUFkXDKp3lXoDfe5DX9kLTOsqO9cOHgM9dqcdiEIusVMgFQy508wSbpxADbn2mkuCEx6EsXBGIAZaI1QujONgyMWaU1cti1qaQEDl1Vj7vsZFkI2m+A1t7/N49QJhK5OIUe/mWkE5sXwYa+J+lLKYCuDVajRjq3pAsYg3SQnkfQcb5LTz7xuPjv3k+dmCWUDi39Gl2ps4dXcYVJ+59d99wRJHQ9LtAD2XCRjYYkN8YUkIsrfFM5Bua5BDFyIKdxluACNO7zFkGegGi99np8n9j/ehWp2oYY4SOQWj9XHz1WcHWQL0BTYasCIpgkjyEg2C5TjD10bCGFz/PM8b5+O4Qk/m+Q5382uG5+CN3633jvfzjO4W5+TohQ8+pxIiNEfMI6VGFDe3Vd7VByDt4j0ebGrIEM2FxoZRLB0ld8XEkKBgMwyDC7QsJysobUBnjBgjRwxnsynv/tfjqx2VNJC2GPT4rjSDBV4jDl/3nVG6B+hHJ/bY9TyerWAXsIZHtzugCQWRAOXCVZl5Xxtv3fWErmHaDtJp8l2EikIXuKSylj/uCveU2fazmTH53yCEnm+KTd2E8hu4qTrIvHDJGlUkZS4IXFcPl7A8fAbrNqGf3Qh0xQTZ0SOsbIwDBLK/x9DWhsopPIiRsgHCMYjfP9wzMjbM37G0lr8B9aaI3NOogBL6Xs2HMOSH289KUQKo/Buvw+9qVTK6UUwqBuBPJFVPro5AfXk+Hn4zJjMj3RBR5J8BC2PqEG63CIG16OTfx+pr5fu30UWcS0DFuDuKHtdFjnLuM6psYkD2+oF5CjVvhS0CnoHwa/WNusfqXim5qQpjM1ZuFIjyYKi4vxKw4DZoiVeu6o4ZKaXzoURuq4nOHt6Fa9ATnU7ncxo7g6UE+0kYg8fExDzwLcq3ErIGXRo5wH+cRiu336mjg3/3hG2IT6ohLvVXuTCXB0dhTZ+++gRgyV/xAITch2WCqEVVrzPAxLgXRI1voOfSbmnM3/CXgYh8rPhxfDFL225b2jePCd7J7H2GzAwgjZgFyJj8SfsUItFBpFvCwUUQDA4ArY0Ch61SNvFZ8rw4vVhHyw5p9f3bEFDt1PjrID05RjBzVgqbJUJXSLARoRkQCNSZf5olAkobc12LqI73yrQJsCI4mLYS/rubukwKjPDlOFkPFgSrnRyNwuAcbiRm94aPI9zdmLUkujYQqcYLjaGRIFnZ9jYRcLJlv/hX30BiQgE6j5A+dU2RwwDKwGdzTAYnH2f2ctN0O7I1HTtBURMBcroAlYgjM8GYBFvPdA+imolWmjWHi4gzYfRqHKRuMrUQIsUDygBhBxs1jo+CJ/IRoNDEAuvemMJCC/Xg00L/U+v7I1Ly3qnhB/Jnv36SmOB4fM0A35hihOAcqHpM4x/zAdUx8e02G/BVzGxEpEBsqKathzVgltlb3EfNtLcNVGPPt0TpvbA+eMs3SfMcK04ln8fXDhgIiSOwUm4lj8jugXZhmRg6AHMb9gijciwnTDnNhKBXDI9m3iD38ciZ0YLpbxWho2ISpAY66Q2ZZgwv9YyzHM2QkASaOBrCM9OP4q+8xXnvSaycEuDbB4cHeJeEM08EstvvA765nu7r4RjF5YxNiO742DawE9XUMghITWK87c1sOWHBLFCdbxFqYR1wcoI8cBOX6jFuFBLCGvrO4QGX1bQxLMyX1IOX6X7bSfq7geCNzFbDeFfsL4sAm9acvxwtCFjQCGbaQ5SXYzrfVaxzOdTr6hCG35oVdOc2NjGrlX48wehxksic+UH1zZFGbgTZ0K7g4w03xafwEKo3qmAT1ovmmWMLjkxQfaNJsfbCSfP/Bjam3D72Oor77aumCQix5g05JlNJPOM40mKCcXes2BgAqwbwjX9C6YD5GLvF1Btsafh9ONbfSezJDaSKHSLBCtccxqI9oQpBKdPOW8ElM6cLAUEp480Jj9F8ZWZlutjwrw34IF3Ru/nXGEPVdmdKGfy3h2xPSckwZ++JVZyTNxYgPu4Xr7t9dEwC884PvdGPaUoDyS8JT24R1WOfECBGsahPUmDtm+cTW6WDpaAjUzlyS1kncYJEIDAiZyxN0E5/siGdvg+9mUv9KxWpkpJZHQvPvaxZnxBcgaAiXh+X94PwInyIy3xvwy/LG3eRYB/K+3Rv/0tbkr5t1/t2Cf/2ywR63xthCV3sBUwghIvm+R2nAiiQx9m1ALsHxHN59A48pBKgBad+otn9vQ+k4H3eDprO46VGMaI8i2WtEMWRIDaGfMTZn+VEuSgW8+gwAObmZIcwd38EfjH/1vT7fEMfSUMtuvYNP3y02Lp8384OnnB5SE3yl2JVLXkupN8SeLMR0edpWPOdiYAzEoLsnU06ADN0M4jS0g3qw/pl6ie/3qbB8IAwhZKSSWdYi2UeyRcdX7oYRIJHqRg3ohnS35cvNC0hB48rizpKbfgIpJ4K8UTXsMyPJS8f3molSYALLgj3yJXXfIQUczfMrnTGm9vXmbqT9Cxm1gL0Av0xdB/GsoGePVRtqwDiU7NkOC5OoSHUj2313k5QM26h2luk7Bj3ZCNe/pU0Qy4KK4CUIssMEE7uGyWV2uHjb+uw+wh8kX2daUJevGzUyICdt1kJizKnhNN9fJdvgDiNkP/wLw3jTrngRHBUjR54lJbBuOeAjo47O6yybKKQ1+BYN9E7SdXSh7kg7fhkCp+XcFTAgpvpIdDeDnincsPl3LFAaQHpywRwhptNoKXGKHlun1+/eKorKDU6M+vPdy4TRM3hBqOByFyqMtsOze740DPsC8pAEAoG/Lv5/CMA8eARSjpFJ/D3fpm7bv13y/1/gYgKdVn1LkvDNrMDBe5OOZLrnE6TOLjSDqjEAmIBNMzyKH+RuFd8whbrQq0Eg9sSGkBz/Ho6Yxe0G6mANNHo8de/ikteZX99WyNEZrVJf5T6opO+8RJLMjhgqGLMdsOXbSlqCutkhdPhvUMPc/H7Tgqm9nnHDvwF6YngoNZcUVAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh3sUMUhQ3WyICriqFUoQoVSK7TqYHLpFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNXFSdFFSvxfUmgR48FxP97de9y9A4RmlalmzzigapaRSSbEXH5VDL4igCjCGERIYqY+l06n4Dm+7uHj612cZ3mf+3P0KwWTAT6ReJbphkW8QTy9aemc94kjrCwpxOfEYwZdkPiR67LLb5xLDgs8M2JkM/PEEWKx1MVyF7OyoRJPEccUVaN8IeeywnmLs1qts/Y9+QtDBW1lmes0h5HEIpaQhggZdVRQhYU4rRopJjK0n/DwDzn+NLlkclXAyLGAGlRIjh/8D353axYnJ9ykUAIIvNj2xwgQ3AVaDdv+Prbt1gngfwautI6/1gRmPklvdLTYERDeBi6uO5q8B1zuANEnXTIkR/LTFIpF4P2MvikPDNwCfWtub+19nD4AWeoqdQMcHAKjJcpe93h3b3dv/55p9/cDPGdykYtTXU4AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAStXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpplmO5boT/cxVeAkeQWA4H8BzvwMv3B0pV7qou26/tyk5JeXXFAQgEIqgO9h//fsO/8a/2KKG2PkRFIv+qVs2TFyN+/s33mGJ9j+9fKd/30q/XQ/5ej5lLftP3xiHf+39cTz8H+DxNXrW/DDT294316xtav+OP3wb6TlR8Rb6K8x1IvwOV/HkjfQeYn21F0dH/uoVln+fzYyfj8xv84f6ISf88/f537UTvNOYpOVtJJfL4DVbJxX9LKJMXjcdcKjem0t/r9q7/2BIB+VOcfv5TVnR9qfWPN/2SlZ+vfsvWNwJs7bds1fy9pfwWZPn5/MfrIbU/Z+WF/i8z1/F9lX+9nkpKnxX9Fv0X/HvGfXtmF7MKoZbvpn5s8b3ivsUUPvUILE3IjoChwbP/KD+DzW+gcOKOi5+dNGXSdVNNJ810k73nnTZLrNlC7rzIeefyLo7Ss+ZdPH/Vf9LNvWg5ZZDL/dJeS/65lvSm1bjDm20w80ncmhODJT7yj3/CP/3AvV4KBHi81KdPfnP2YLMMz5w/chsZSfcb1PYC/OPn93+e10IGm0fZS0QZen2GWC39FxOUl+jCjY3nTw2mfr4DECKmbiwGBNRE1lJpSVLsOfeUCOQgQZOle80sMpBay4dF5lqKkJuRfWo+0tO7NbfM5cB1yIxMtCLU2SBDk2TV2sBPrwMMzVZaba1J6200bVOKVGki0sVJcfbSa+itS+99dO1zlFFHGzL6GEPH1KwF0mwq2nWo6pzMORl58unJDXOuvMqqq4Ulq6+xdM0NfHbdbcvue2zd8+RTDvxx5PQzjp5pyYCSVWsm1m2Y2rxA7ZZw621Xbr/j6p0/s/ZN699+/kHW0jdr+WXKb+w/s8bV3n8MkZxOmueMhOVQExnvngIAnT1ncaRas2fOcxYV+ists8jmOTvJM0YGq6XcbvqRu5A/GfXM/b/yFnr9JW/5/5q54Kn7h5n7e97+lLXjJLxfxj5V+BiwUH3cM/PgP6r178/h+2IWNXr3IZDKnG1YHtrtFtaVWu1ilevx7tYtr7VXOy3nSum0NHSeHSC4lcbIFUozk32J9iFdrXthMcaFq0z0Wlp6+qg7HfZer+Z0+zpjlQ5fRmKkS8fOua1j1CP7llovW7E816hHdHtUrZ5+oz0IDLDFuIMOT2Rma2CHreke6c5TYFqCY9puXmPuPRcL6KvoarLOvlBpNrRL37lJbySs733aav2UesPNIHA2O7WlZr3tW+ML4QSvXKsuLPpsgL0u/mbyXnZpdPGZjOttnz2khypsW2Jt5Fozqdl8qnedcofdunR20BHbANt15T1WAltjrZ53p6nfQqC6rqBWe6l0nMIi9+69RD0LYHu7WZT7SBuQzttKZNQmaIJGvHZZtrsC2T07siMATFvb7ja2C4/eLpMY6Y3jssO25l3SrxyZyBE7R4kTA+Zia60CIJVPnhkqFFtZ7lbmX7OMuH2OHEEBv42VEN66HZf+st21L32sSZIpaVIuvZie0Ge0B9BFHxzfMMd/8DzkZjNwFFdW4zWFApTWlpP3vCOzxUm1FWKkBtHMW+zI2iReZFFt7DcKsCld21qB8OQjdRDXQhXmKB1CEcC+q2c0bT7SjLbfG228GPk7hRnhmQNmEQOdQj6htHgI3AZ5KV/KSy5Qvz4ukCY1hWWM0YhnSa3Uk9dmzdAdoeYHkiPXuQbNHUoZk0+U1KEXyZnw7UUCFyAmnmlQI1tjE1u3fEp+abX5p+r/Iz2QS1Kc9umzQg1lt3Lhw1NuHXclsLDiGHcfUBnKZe/sIx0kz6JICFA+2cTpDpqVDFCytG0wMyxRxibwdjZ7Il4ytbdVoBED6TSBNCbLX7lBnKTOUXZxF2o2nAngN2KboX6uU13NKlAVjWsOwqVSAwGjKo22ARgudUtcr3jbr7JqqgS73qGbknEAGrMVbrKz7oxe06mx+Z3Ct8DT//JMvxjD+NC4EX461F1OUiEZ9Fo6PQak4+Q9cFXp/RXYwfqdetl701wUChFKMN42b+9HHuVV8vC2TBo2vXVGDSCqz6sQl2sSK9HIcSu0Boa7ZhMwb2bxhfVtCl19V/kBwlpSpmxq7XRkqEtPSbqTM/gr6VupkEZLO4fWYHXTxiKN58CCXNsCME6+O0Pc7LgEgroA87HqGzRqHg7g1iwoZdilXwZ1KQgjzcFdjZZAWs+iOv16vVkgmkBYdJF2PuA6s/DJnibdlxZzJwDhCu6LAGRQmeH6TpWowl4bxmBRWhagC2iAc05T0HOmEgY2Au9Qj3bpoMwJCCe7bsTXYPTvhMNbNy35wNACBQfebVUHW6cb07j9jtu4NhM6gGYFw2/BSEz7shWMncc+X1RAvc6jEiaCB4r2pC2MMTlBMZVELQMZ8sm87CGvc2yZLlbHzL5AGkM370hIm3UtpL4vKf2U9EEeSP1X6XGmaf1u5kU+BYRD0+6xqOhky2zr/PWGv79/S1EEBfVpo592XV3EGVjeB2AddoXuX/mwwVzp5WiI5K2oRm6nfGNeDSKS00DeGClvsFMQXpYCssEzwwNTL5wNayGwm/Z/EJA80jz7ukpsB3THWulMHV13IAfym+m+VAleRFOX4kRD6SEbCCQl4mKfAWCOJhC9AtoeUZMtbl7SD8aBayBoffyKhlwj0/zovihoCM2J6cwrkAYIoUEAvaO8n82lBUATNBjkBuFAz2jX69Gii1xgw/YFTl9mr6KFjXbxEih0lDTYKeQDaGlYWEA21FAdcME9yQnMc3hDivcvCX9w+QmbsVAVDI0MBeQQnLNu/lxhFsL3+SBgK+Gf4ebcDyzS32AR/jFu+gc3v8IG6fcDNwhHF3qHHr2JKxWOxa4GvSBc5MDZFQxAfgK1S3NJHLvz9aTBQRjBdTjkIZooUtwD+YcX9bWmaXD04mOOlQcfkghzo2hSvcz6GCkT/9bCKBEhhWrfyE6KFNm7EVoFtQCBILKAYro1Ge9EBFtVWGDZhCwaHNAQyAnJH8MtiKZVBxYBAYpEVEJZkQkoCMNQb2xFRX4AJ8iqpu7AqLZ9YXR/yB6mA/BBYR6iTfPcvZZ4yvTwcA3VjiY/9MkL6fVUNBu690BZQJXyQOShufFPKAW2dg6qJaPqaRfwIi2p+/pxEpdcokQK3RHJqILUAfKsNV1uRStfGq4e8Or4COhH4vE/IvJ3PCqY/hWNgDH8y2hcU3c+NAb0VY2If0FNd5zlrVtbph0h75BRgNL7LH/ePtT7LAouIZ6E5v/6rFs9Yo8NQaluBzGOrKGMHVkrFJe+bVOGy7B/GAhBBjJg75Wx8G/e6RgXkjmsCy14jXxw+63UNLEr04kNyoc4BNw3rJ0r0a7S3L/ebkgoIU3XOR/oYyHZFn+IkR8FYWQQfYgUa8hjrIJMUtkPsgHxr191N/JPtdzzIlqomkJs0dZIJ0rB1wCVQlNSLeBzyAw6N4vEM1B34oIfH5zBSOXNT4Mp+a8iHItfoMZdELWsAuILvO7QH/VNQo6rWzx9o4niuNx/Alw25XGqqBW8GS0x0TSN1TcuirqCbick1OFedZ+IZm00BUGeI6Iw5+7wwDNekAElOjrPoEAQ7vlaLndsJwZlnb25zTqYKdmUHgoVoW/TbQoQRyzdJ6egYhzH0x7R4sddUrh0GdT7wJTo0UAhkp5zgScViyGnkayJFFkIPW9+h05xySh/5Sdw8JFU/JvgRGjuWkxoyPeWx5SFsobrf+Nz3o0uOrgyBhFBfZHXtly3UTF9g4+Bw4iobQRTCahTcObjlt7co60nhwsZBdPNRKhMbYcFF39nVRsJk77A2qiMd8yPxDQUc8qtLjMhaH6n4s/cxkTEKvwwky/eF/Bx3lD7/INVCN8X0LRRg/vNekelk+FYGNfdY8IvYHUQXnZN7B5cyj2zAWqmX/idg86erDH7wYsiP5GtFcqPFEfCn70MQZ7AFbbod2La6ap4VgiTKoVgGoaku4ZMKOzW+TVv1V7KG4HMipBvtHCASd/Jxc+astMWOkDIOk0ZW1vOVZT5PrWESpfBRY423JcjvphjR0FHIPgorIt1VCrZGzjsbhQQ5EDFYudxaui3LJk1YPxw5fQVGo1+Gp47uF9F+R+dGKUKbcEHMIR1Cdk7Iu02D0X1WK4R4+7apqMdkDdMookuMgfea/phsvh3H8go/AOWFZZiQWWFjHhGiqSCUySO9FC6wXN41dWxHwSYPTG2l6cpDTYLzeNgMRqHoqKfdoJN53Syk04No6vmpGJKrscZchpwv8fe+U9EdomvwN1Pxh3Mi6LVtAFtaQitxVbBbSWOWKFnwA4suZPO5n+75os4exayDhZ83KN+ZnjdpGdaHAvut4Y5n/LGW7RKye3E/CiA5Qt87ANeWC14hAhGfLUIVEg+1oduAjaf1Apo9P/W9KFvcN2jEGpgDBoLPJz/puvRFGyNlWOhEhtxu9DRKNV0ozFB9xP1Y3WUTfFGRM+1om4xKgHeKeGMB2oEFje6CDRa0cBIJz/FchGAmHATTihQBojPgf5160WbqQpsN1IgDWFfup1Yd4KzMXjXpZQlbpWOIE+U1UkKqT+bTyXjre0dZ1U/Tft64hr/65nghzq2nw+q0zs0kw+2aMCBLR3UZZ2IMJQz0sUD0Zz9E5YS4vfmQTy2lwziI7RSITFofBE5qbGwBD/NOE8rUi/gqnk3AjzIJef0w/4+X58ISyh8hDQEQu1npzAGoCHoSE8IzskbcY76Wl9z/8HWH/JLInx7oUFd7APzRdOjJQgM7vYYyUTSucMPiunOIMij04t9FLqfV/81VuGXoH0VLjIL+d/84G/gxPMp3vAuQo6OFxH+Ha5Cd7k5Ue8bNUtwn1txU2cWDOIUJOeC7JSST8MPjXZVVAP9TEmddbQdoQX64PA08TZsxi82SzY2G95A/0CUbjSKwxIiq610mIy9IJmmH7AOQFE9KJQe8pgxyi4EAM6mC1HLSsshbMJO1Pzgjj6DWb906nvgnn7xBgoPQENyHul725zomKKEDXMMs0A/AitvQzdvNDVvmDMo5BCJd6e14c2Vhr4GmYGAzVHUq3+TMEv207ca/HAPoda7Vcyklg77X+9nFfXgehp7dyraEC1HyG8FTlOyOsSRlbGgWSjAFHCnAnfDZ2jq/NqAkGzsQETfUyaHlZXL6ogHrTopSECq09eoP4llyTvWC24H4NTNJhpcpAhXq09Wt+GYbnul7vb+nbF/TL0r9NcFqh8PrYoK2OHRb3QHiysgU2DERaHhACp967hQTKgmcN2JWUreSXNZHUshBZOCLnI7GlCFKArV+U7Vp94l5xB9MgRbH2gYGQOZOj46DQeF3tG9hrDU9mQOThdP8mTNfCrnwJwISKQPnT0uR7VNigXpWiEFP0Lxr98KaVRvvbFK9W99yFLG00LSEBRM6N9hdpSdn1v1xajAaNI5aoM1RvOvbtFmReiHev0we/lXd/QOdgDhk35za4XWdq2Kq0CLNKSaZSMmiFa3b52utEkcBgkaBtPuvCgUnUfhvWgjBioKqFKmzXuYpxTl/eQshPPO2ShJRza2dD8dmfb8nMrEf/mI9cczhuFgqAQhsyhVlS50UbeZhXJw12E90H4zEaXeyEpzm1hL9S8p8IDmB3Uoe0SMkyiamhaFiUZRkxc/jhjIoYNyQNaQfNBIVzUIyF2vZUKndnGxeMRUKB8atHpXwjJENI834Aua3xE9HrDApxJwLZAABnp544Cu6gTzDanTXSRBCgWnZa1TIFQX/aCR3IJnEahlwKxX5PoZ2xzJv1FDSTHR2I/yJ5bIE+PfISQqkGpHdqMYFqq1uu8F/1n8izQPIr5lhztexUKSUDfKYvHn8KA6E7wzR1wtru04SeGJVKUgRZzL9yofVU7H6QEpk7p/0zasYFQpSSG90K2fcl64K5m79bFoTBb91AYHjv+/uSLhYRe6bvajej/vvKkVHJ0TPF4buZAoev8WpEDemJctMADcTzd4GkafL0juiyEKwG0XETEBfR4bioCLBmZlDprvZuGtR/zHJPHinE9Ok5/YQ3yYCfrV8iOC1oAVOgDBDksbjH9wOmwIuBPo5icdgiwS1wbND9YU/UHbRZBMgo0IV1jpSUKhQlaYrnkehdAkrI/jgs7JwVWXutTfHbKGdLO6gSFyCyp2j738tB41BgTSDRFYZZQCTKx0bOZkVEiuHFbhtecqYjkv107p0VeeJ6GFqZ+UMrS5tr5BQKz3toOfxbe3a1dtvW+oRnvdOiOWQK+fRFWJgk9hWwgNBvX6peddODKw713i8VM+1Bw+zzXE80FMMd0LY9XoxN0P/Nty75bP4xRkTPHvFMwzuwKeBW3l38aB4uaPlBEG8s8HGwhv/x9y/hPOIdIfHx3GqQAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPU0tFKh3sUMQhQ3WyIFrEUatQhAqhVmjVweSlf9CkJUlxcRRcCw7+LFYdXJx1dXAVBMEfEFcXJ0UXKfG+pNAixgeX93HeO4f77gOEVpVpZt8EoOmWkUklxVx+VQy+IoAowlQJmZn1OUlKw3N93cPH97s4z/K+9+caVAsmA3wi8SyrGxbxBvH0plXnvE8cYWVZJT4nHjeoQeJHrisuv3EuOSzwzIiRzcwTR4jFUg8rPczKhkacII6pmk75Qs5llfMWZ63aYJ0++QtDBX1lmetUI0hhEUuQIEJBAxVUYSFOu06KiQydJz38w45fIpdCrgoYORZQgwbZ8YP/we/ZmsWpSTcplAQCL7b9MQoEd4F207a/j227fQL4n4ErveuvtYCZT9KbXS12BIS3gYvrrqbsAZc7QPSpLhuyI/mphGIReD+jb8oDQ7fAwJo7t845Th+ALM0qfQMcHAJjJcpe93h3f+/c/r3Tmd8PnXByuOaabnkAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAATbHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZppchuxEUb/4xQ5AvYGjgOgG1W5QY6f10NKtmW5EieiTVLDIQbo5VswCvavf97wD37qyD3UJqPP3iM/ddaZF29GfP2s5znF+jw/P6W8P0u/Hg/5fTxmDvlJ7xNHf5//cTx9DvB6WbxrPw00zvuD/esHs77HH18Gel+o+Ix8FvoeaL4HKvn1QXoPsF7Lin0O+XkJ216v+rGS8fof/Ol+xEReL19/r0L0tHGdkrOVVCLP72CVXPx/CWXxpvGcS+XEVOR5H3mu5SMmBOS7OH3+TGZ0far125N+ycrnuy/ZekeApX3JVs3vU8qXIPfP12+Ph9S+z8oT+p+uXMf7Xf71+NgpvWb0JfpP8K+O+6yZVazaCXV/L+ozak9Srm4u4Zcegal1stOpocGrPyaPweIPpaDxxM3jpJky6bqpJk0r3WTP60mHKdZsIQtvcj65PAdHkTzzKZ6/6o90s5RZtAxyeZ6015I/55Key854wnO1wZU1cWpODJb4yl8/wt9+4V5vBQI8ntSnV35z9mAzDc+cP3MaGUn3HdT2BPjj8fXH81rIYPMoe4tMht6vIXZLP5CgPIkunNh4ffVgEn0PQIi4dGMyqZABspZKSz1FyVlSIpCDBC2m7j2zyUBqLSuTzLWUTm5G9kvzFUnPqbllDgeOA2ZkopVOnw0ytEhWrY36kTqoodVKq6213qSNNtvqpdfeeu/SHRSXFKlBmnQRGTJljTLqaKMPGWPMsWaeBdBss0+ZY865FtdcjLz49uKEtXbeZdfdwu5b9thzr0P5nHra6UfOOPMszVoU/NCuokOnLktGKVm1Zt3Ehk1bl1K7Jdx62+1X7rjzrs+svdP62+MvspbeWctPpvxE+cwaR0U+hkgOJ81zRsJyqImMi6eAgs6eszhSrdkz5zmLE/grLTPJ5jnT5Bkjg9VSbjd95C7kV0Y9c/9X3oLUX/KW/9fMBU/dX2bu97x9lzV1ED5Pxl5d6EGNhe7jnJUH/+jW31/D+83KPiEmlrd0ZremEblUT7eZm0BzexaimmXYgubnuEPvkbQGa9wthiOWrraVZNfSbR0D3dM5e18pXeZJJmnLWKdvldHSuKUOsxOt3bbTboUw2gyslJWdOaVdy9qByFHOHqbkHGo8yhf7pMzaZaS57phW01Jel0mrG5SmjUNddDez7oydWuXyM2lNdiFWXboPJVg7FGLzCt/lNwpH8zahiOZobe1kVcJOl4zlA+HOkZfx6ZCqda7d110dOqk5j555J51FiWZST5Qtdd1klCVRBYFSJPLQBhVUm0uIVsH9rLkAPGR3mNdLnms6F9jxCstcglo/til6U1v7hJm27l3rQ7HE7SzZVqiFqgKlzQ0BSa17KIOX6mWnnHzLOfToTkNLH9lgkXjuufNIsdmoM5nGyaSbACl51ihnS4t7TBrI9uikqdFIpLPGdaGkO4e2QBHMZEe8Ls6U6DWk+dBZ9VLGu98lM11aIjXjakwmrUP6KF24IvLlTbBSMKXAz7ibZFg6JtIZFqmoicKJlpnItETwSSfBphrjGTYkkzzqgArxS9wA7/o/amHMG4VpUQ4naZO6llRb63b19J1i3g9Lqy/ptx4Jf2yej95JmyqnPp40nD1FZ6eEE5GkmCLLXyizGgweEiqMDJ59WrKiWnajjLNcFMFdh/WCApcKnDU3Ymiqex46z4jy0O5rCny1U8sU44naDrlFlpBoiqK2FSlQEkHj0YlVtbmq2OSJIt9n3XKPnkuWEFrHx1cmu67wCdWWb26RPgIq6cbWQSCh7ae1mavXCLiYj//UCeia5L5SWHfOUy1nmsah0qgDFAnlMSvhAGM7iEUB9aZX4xO7Zb2Agc/b+D4UPt78/jq64wBC6Jaup8vuDiT7JCo/slSKKILbA1xMusPOqh2o3McIKmivFJLa3bxx2ChgFek5k49tFcrJazxJPZAlqmxVaMSQfstACssdyhDQIDJr+rfDSzfXCzFsBrte200pvE5xAkmDNjbIohNm5klmgx9YnSeanMqY5A/FTwObIRibOeDRqguEXKfVlYUsDBao9WTlykDd1C2A/6v6HDLrn8L19fWACeBm7jfSqwkmzehsIIaOBraQNtfrp43aAEzqpEvhK1NPFeC4qG2jkWBXunMnuOISRcCYsAdsF3O7fUNnujpInQp4DZ8KwV2FmvtIOsh0MU0/t5EmSrcCsRpAyod4KFVKDYGfrdIxkSyVp42oJ1W+RLmRdmi0Esc0V7UIzJJ//A+4FBq6GJDSNahvqK0ceqdOtLOlCY7I3aUpxTsUdtOZL6m/rVwjKAPk2qwfngswTfY1DlqXBA1y3zIyIc/qRPHoW5SIy37KpWFJjHxD3I6/c2bOA3y2hQ4pYTZgbjokXWhk5NuoOmZiZwI/XVUnUEJFcawCmm1Ta/tw3ZnakHNtNGbUWEmVz6sXlxuq5lNV4lOqIJuQU5QHEMeyooAIrnXphlkdMea0QBdhgMjIKxu4ijyOJsAkNkSA4nW3zegoRhLwGvsiwsZFjaA+vJ+Pgl41LFqKTBzKJzeY4y4K5XoNc7nis0wgQnLKo12glDFaehPgz6/h64EaExPNTwJAe1DE3wFUMBxd4DV7naTKl3PCl5MMxeG/EgQoy39r+w5UIWwAZ7wmNqNo/ZhYKgiEmkMjJViEcWAN4ggPgzAdfloCgu4iHEgRDTcRcXnedsSBlODF7lLlgOpER4KNup9IZKHakS9TXDhct95PHzZaH3cFI3KsEcHSDhw4pxZUZEFXqYrF0L1DQXjKGS3CVVwx8nDWQ8lEU9eXCBiEat99LPSlgWplOVQDS2NDg3WSNSQYde+YyYCuVZNkYNUgND126YEyidh4loQEG2DBs/cx8KWQNz0yTgqCTkMLmclevB/oQSuswMNCWvYAHh277jmLiswGO2w9Q1IplD35KTr5Hkwr71QA1z9KYTfXDe9ie6JJUVGMgMsSH6YhBvcTN5Z+bw/6BkhdiOf4X0Pk+Qpv4YVvn/BmtOy3CPg+A8gw+v/J82EJl0ikfsma0i508WtNQFu6GJ5nsZ7sTacCgBfB1FmObYVEFLW3GkrRWXPP3mc5A+7fEinK4mqRU5D8gGpdNjZaTx7lfU3nAo5S7q6ZuzncQWjEbqGSyCJeBLuCbu5dB2B0NAvwQyBz0dO4KqIKUmzL6q2DRavRClhgVIC4xaAFJtpuxYBysKndvZhDL1fAUIGdSPVI1pj/IDsdOKzaO8oQp+O6V3E/4NI4XnZr1TBg9+zyic6BWbfzLUlOLB6VgvGd9dJlG2R3DQsnLrRb6tTGFEK3xB7SD1RT3S59Z7c2jisR42rokoQEIGggP4WMs4k1IYD3cOfVdnNjhiKwU8dM8YaSfVVYkKt2aOTuqsgBZY7jUazQPnqrocQgNSYPRF9E+SvLGIzVnyRDRzT5U7xUMb2wAFgAhqoHIja8Y7WQRurG2vHdnqeq6N53vShmnb5r4SmYj8L506vjGsLOMErgHKOchXNdCpdq3QKvrjCj24kXD1E11zUiyyQP1MMjC1GiLD4NtFbhbGXGdkY8i7TXDL5BETfhadPCzeugxtwL4lmKYfiQ+XpIzLxwA9hIky+ggMIqYFfDmiPa8AX7XMRUP+GAPciSQmZh4Q3ckRH3wIhZAsCijAbKl3J+pBtLw3pYK7n4IYHuIwk8Qdyjb+veV3i3lQFXjE95i470ifEZ34URpc53BJVKlIXJwbJgCB41Ag71DFpSqxtLXgf2MW3cvBmvhAaOZEiIFY4AVBNM8UITXn7AS1iF7J6pAoWAjmh4y5Wmx51o7qBVgkfol4MYBDQ6qnu60cLlwDyLZYLAnBUqs8u49IqKPjh1RKKDN4iOh8DC90kXJ3xR8Z3IXSKZY8wTHxaiwMkIazyh4r9Gh4PQgzQ5mi1l/HgDodGAEMOgPtzPUKjxDvqs3BfQ2QO0J2IC73XMhu3pL5h3OK0uF1GF9tgFiBzAEbEjPTfS0cXuhVAaV2toiWcgvopYcMpGI0r0rdl00vNRBbx+vXb6+do4CCDx7s8BhYZKAbGVsYEF33o6xfVwbB6PDhm42oxaeA0Pis6BgJjTlTqIdcdjI5CuK9YAEKmrYea3ZUCxeBgkMLVzXT48dD4WLX4TigKZ1x4yfWTZoIw5Yfj9Abj/j9QD9LCQRHR8r8ZAtosh4YsTZzwE6+t04rsoc2+g1h5gIHF4+O1J7Vg+NGbz7SfwOlPzvqVFhJCQ4mnAXHYqSrG5AGNBbEqAGmFR7CdXyA2PXUBbZDh04fz6OMUM3MHoVfGpA62Ch3LlCzVgC7l8h8oDzdHdYxXflJvm2zGM3fYpvodExdcdIZQVxzzLN/gLhzHDXBEgfgFpqgumRYc6Z2AyvCqVChakJ3UFShQaws6WkvrLRGBZ2vdBDT8fmO5ZrS1WV7AY6aEvuGNBCy6dENU+H7cj+IjURXxTlPiK5oBpiACdbw2ydEwhPeXgVeb0ZnPzCSk4aFIe3c7D+pQqdIRsEnklqk/0kTRiCrR5Cwx7NlvcKcK/+C842Hscz4SUBV8uHsfcFaHWDgNiVHyPq2tg2I0GwSGsCArBXY9aaonlIA/89/xSTMxu0YksrZC3USmjxhTd1OydAjy7HAWjs35LiSTJJGK+1fLY/jYha/Vtoc6KLD7NAwjBqov6ivQQKv+1N5Lit2LeX0kyrAOWwx4Y324Y6Ta1Pfe28KB+o20SyxGKged8rR68DLyOIPFZ8CylJuyKu1OIFtC7cUjNvv1wXNFyGgVX0BpryQgwPEYaTYyRPB4XzBaiaPdjDIqGRRW4knDdjsiAkxdzpWuOpxqgQMMzl0uLjOmW/UD7ziKzeymC3sVo9mXbwe1RmQix8c2+EFYJ2pqhsAx6apOdEn2fGXY9rvHJmE1Ae+fyqD0sH6o6dwh1wtUz6c6+XccvEf4MCg1gEJAu+DwazG+DVNf1RCkDYkgs37VXmFBbf21t9YRme7YS1HcXi284Q9kfNGWse323t0VlvTrImQsPsQe6oMLeHd2EbPNN6ub3aUuCjRDEcgcWHxX+kvCkf/xHvW1E1jcoJZxauvcKydiCv48V37kWZQxtw4qJNODPVsIU+R44zQtroi0Be+hQX63ZyRriAqWJJEBGzKI6HJPsdjpG3Vc3onja7pSJW3QaDu/lW8PjGISJQeEi9QZyj2GseK/BcVrkzo6CmB6a4tMCg2mQY5Ir7qkXBGGv51Yy496L2SD5l4UJHQG9D4NFJC5gLAA8HHMB1ULcWPqjb/FcfCK03wHQM64NAO9+x/lQNAHAAX2YIPJ5gjLOmy259gcgyvU7L8idDkJ2yr1iWAUkKo7aIk9uF+QrKQAFiq4u8yDdIZJNQ+Ts+x2oKKSDb5VtVDdyAHQi/ANtRPG4NK/Z8W1ilCdNK4egJtQD80GKITglgrcAvDm7GAgUvenMrdOOvrlEwcpEut/RfSe/eJeHm6vvwhdX3gi1lwnEsNAm/jZX13mIJM+UrhGdBlhhvig38IwcJ8W9zsAUzqpRN4VOZ6jfC6b+sS/Y0+VtHOmH6PwKZYMjbnwus9HtO0/IURgRkxFYTHJapCqYIzWFN4BpySEpeKAeD6PzeaflxfmdVkq7ynBzOtqlqAW/BkrR0Y7mINvwbWv4iO6GSDPJHdmbG+xH+UW+DEnHia4hqdQ2ohfBna6CR8CN+u0CFILsuJOLZ99dv72NlBM1hBDGM8IP5TFZ/QAQhDXKyVAIySckQWg/67gP6hDcqVNQlTt3Z3Bp5Ksj2JAxfs+OKrZqmi8nKzhDDVK6ie+cEli83+7BM4qzhKseI23xey7482t4xHg1VjMBA+zFo89895p+Rfr4Ni6Ek+j4+ayNAovkBd00m7iCQrQSvXB97wCkxqsPopP00DnR7zRQIHs2uowUsjA8dPG/jrjS/UYoEgyM9Xs/FSUpLaAjORmgMNyebyyd3G82egkJ4rfESLTf/Lfie7SAK4GFZyh/GrsDyRW3gxoNiJjVkPK++Ygp9T1h3BB4xirxqpZXj7YAtoUcBcCwBRv9j0xh9EFhGOyOMwoO4rmNW/1GTWx0/FnUAZN0P19SxougYiS7BzkOfe63MH3Nd29lMhC6UvG0g7Pwn4sCXag3v1t6XXfn5RrBnc4hwNv3CiYVAk75nhTtZy6QhgFusIEE1Gf1sTiISULf0Q1Ukd8PtZuzAzk1bA2fbRAJUoZT0iWiKGNFpKKLerkngI3DN5P83tEsCCValn5tCSSoAFZ8NE5iZCGOFvnI2+fc0hSMyOP6hgheBC/JqM0XtzPY4ff3CcRZGFPQp+eT9FGVEXZAx5l6MPfTxBAh6p9mAdsCes1v4slb46vGhDSdrI7iP3whocfnC9FXoxzU/6gk3T51NDqRmqXEDBZpfvMByw0xUJeUSzQ5viPcMHg1uzxlzOnc9szCN1b5NBH44/uD8eVHwoMzBAdw5t/eZ7uSp4CG3yd2DETwEdbr9O8QEP3Wg28roCeRYRkHdKL6HzKxMGDwGRf0vRjBi75j7X6nFNW/ckp20Z7t7ZL6fRp0CBMDCbLfwU4hteMuyDWR35qZvpvj1ZDwnfkxnjWhUnmmRRqK67v2d+On/kdI/wa+GQTprDiGjAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh0MUsQhQ3WyICriqFUoQoVQK7TqYD76BU0akhQXR8G14ODHYtXBxVlXB1dBEPwAcXVxUnSREv+XFFrEeHDcj3f3HnfvAK5ZVTSrZxzQdNvMpJJCLr8qhF8RQgxR8BiUFMuYE8U0fMfXPQJsvUuwLP9zf45+tWApQEAgnlUM0ybeIJ7etA3G+8S8UpZU4nPiMZMuSPzIdNnjN8YllzmWyZvZzDwxTyyUuljuYqVsasRTxHFV0ymfy3msMt5irFXrSvue7IWRgr6yzHSaw0hhEUsQIUBGHRVUYSNBq06KhQztJ338Q65fJJdMrgoUciygBg2S6wf7g9/dWsXJCS8pkgRCL47zMQKEd4FWw3G+jx2ndQIEn4ErveOvNYGZT9IbHS1+BES3gYvrjibvAZc7QOzJkEzJlYI0uWIReD+jb8oDA7dA35rXW3sfpw9AlrpK3wAHh8BoibLXfd7d293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAQDHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZlrciO5joX/cxWzhCRB8LEckiAjZgez/PnAlD1drrpxu+/YUZJKSmWSwMF5pMP+n/8+4b/4yTHmkLW20kt5+Mk99zR40Z73Z9zH+OT7eH9EPp/FX98P6fP+k3jLD/oc2Mrn+K/34/cJ3qfBK/3Lidr6fDB//aDnz/nbjxN9LiS+Il+FfU7UPyeS9H4QPycY77ae0lv96xbmfp/tayft/Rf84XzVpL5PP/+fK9Uz5TqS0pYoD4+fYkkS/ydBBi+UxySZA6PU9/V9LJ+VUJA/1en7p7Oi40vNfzzol658v/rRrU8F2NqPbuX0OUR+FLl8P//x/RD1z125pf/LlXP7vEq/vr/k2e+KflT/Fv9YO3fP7GLkQqnLZ1NfW7yvOG5yCb90Cyyt0J0ChhrP/tv5bWx+AQV71jP5XbHHRLtOzNHiiCfu+7ziYok57ZAqL1JaSe6bTWrqifXSv+y/8aQqXUwaXVy37VnS91rivWx/VrhXa1zZIoemyMkiX/nHv+GffuEcH4UYvZbjrRXrSsmLzTK8c/7IYXQknk9R9Rb46/fnj/dV6KB6lX1EOqee7ymmxv9jArmNFg5Unt8ZjNU+J6BEXFpZTBQ6QNeiaCzxqSlVCEpSo0GDpfvMTDoQVZOxyJRFCr1pyS/NV2q8hyZNvB14HzKjEyqFOWt0aNCsnBX81NzA0FDRrKpFqzbtOoqUXLSUUouT4qhSc6haS6211V5Hk5abttJqa6230VMXSFN76bW33vsYXHNw5sG3BweMMdOUmaeGWWadbfY5FvBZeekqq662+hqWTAz+sGLVmnUbO26gtPPWXXbdbfc9DlA7Ek4+esqpp51+xnfXPm397fcfdC1+upZup/zA+t013q316xTR6US9ZzQshRzpePUWAOjkPXtazDl557xnT4f+RBOLVO+ZRe8YHcw7Jj3xq3chvR31zv2/+hZq/qVv6T/tXPDW/cPO/d63P3XNnITX7dg7hV7UR5g+Pt9tpDZc7H57Dl8vmBBZjQJKZuNivLe6qJ0KRa10Ri3sSNYUdlTSNhm2fHrW3q2WHUz5Uoy2+qhR1zpd42Kfqyg8pnJK5+GxtfY5jWIPR8pZTsbIJJvx55WD1SrglQsUYzWZesXZ6EkvyWy2BWNz5ii8eI4Oy0Oimkb6skc7bSy6pxpOdJYYfF/3mc9YVbJGen163LX5y4iCvNVAAtgR2sr6lTeca5byylbY04Zy0lkYmkRfF1ReNGUqriVaiyxjp7FhRh2DtvV1qia+03tuAKqzuDlD4XICE9HCqRXrsGVorgIPmcFOOteac6Su7GnsGruyokw9o4BjmR0ARLQ/jwP6BpXm2fXsKYML5BPnaTWtkxc79oIWNTBfe9+FB/A3Oe2s0XJfVYMAPuF6JY3l7goPEzen6iXzT9eoNnwSlc5YYkriFIq5D4N668YUQbg5qBuit6R/55niMfQdTow+0WNvrlaf1sLs3mChUH0c5PChozp06pmlnrJKn4+UbX1r7SOmvPuc0vZs2/wMjDgk0VtYqxjIM1dYscoJtGQYvTb2n5n30Tkf6BursV16Av77ZMB90ucZjDxYsOCHFZuw/1vDvlhJ2YKlPEbd6M9gX8Of00jJTeEY176YG8UDIkBnDqWu7YSyZCM+pjMmOzPXqic9Xsw0s7SV/vW4vs+h3T69/xsRhPcJA/Sdzz51OUPUep69F73eWyzNJidiM5NDYiJEZ04GNnB1WcvGinPN48iEv549+ZStTUt7SN8AY5cIG9bWk7bOPPaUgcRz+LSVmWDI8kBTtZh2O42TplnioNGx7n0YJGe0/MGpMZq1AeLCRxkQIcHZWtMZWkOYa88AP85ZhWvSFmu7zEatE3LewfssC3ZnGhI96iseCHaPafkLlUH/LhpjPVm8LgypZPNX44wGO2V4BWJzCQCLcAzitjMDL/VsLue27FlaJ3tjC3UIVH0aX20MX/5u6a6/UK2/lR05de6JOMTWtzzmBhEZYzQ5Tc+QRtkKC9YEqcF9A/RZKmUGwysy8sNYYWlXNWiILrihT3uAes1rQlP7OTTjHJGzo8IDA+YjV1BReKcFo2UGWgBGbZy/l2nQtwGauIVsUNEpOtFTNdaky7kYApqIyuqMhM7HAEsYYApVU0e+i1uMrCdDT3PpQT+o20OXgEPZwBKiy8REeBwv22wNhA5Bw0S4okzNG35mqDMMaVTl0jZunyl6QV/5IMFkSB8EhX0DGTOBi1E3FHh6YICd/fbZ4/06lbX8tzHBVIELRJmYhTI5dvUigxWcYq4Df0CDx70vPGi03hkp6OEsbTWM9+TQzpH22dKT0T0MjdSiEHJh5OJZggTYdLMzQTrDW3BGMmGpBZcF9X0z4AtKWwK71Mlw8mpfgj5HYVNo7UEJEzPBtxjkTEBt6xiDdAYsVyTggptVFBK7tJCwXhycUQBHmk9VZ/3J+pb3qKMXk1kDsJQHfRGmOO1mD64WS8OJ0Eeqv1D4zfekuw8Alrkkx9LjBMkc3TpyalBHtw5Xm1+VDScVdJByj0tUsFq2crIXUjrAbSZdLdHUDWjevuKdTvvuH+xOA8I2f1EAKCEsU6bqJ4QXzzao7UMTENho75h6mPnDc/jLGx7P0oco6u9EYdiMpB/YXNQAhxc37C0AG5j2d1zgmN99oAv7G39lrE2WwVFQSAFzbnfZdi/BBwI23hOlS9XNbWHOC2yaHOWQ9oTRCrS1eQCsRiZNyb0OeIoHcMQ9FRzlZgfXBoPgG/YqcPO5y4YO8EsTN94fJ4UOxYCqOfjFF1d8ImG042Oa7BbE+CgSfPkaACzizdHSzO8HQQSivWFjk/uYPAm08ML0Oxlj5EZNYNeJky5h4/oWxdnIP68xUhgQCmDb/TYGDPUfczW4nmnWYhgam4adQQ9nq24MODXIPlg1aQgIBmG4KYBBB/XDdGW3ZoYLVazkgYAIVFTlwK4oWesYQAwzSyS9Bwwc9beJo2LIKe9nhuPWn5j7E+S+ARf+NuJ+AI5xvnBboOjArMH78+INjoT6cnMQWNkJokBBi1tjvoBTcpOw0GLGKTvF6zLyB5RSqzEiWyhCQviNkiMvIpQOx4LrwlWnOuDTzs49wpNvcMOgHkfsdhrCByEJeJQAQAYxI/9cPgrQYWbsg7iGRgjlDKlb4Xckeidy0ioTqwt/kXRC58hFGsNjt4ovxYBjL5W8R/hT7XnW99wkrPYXxgYc+FmK293mkftBSbYluHaDfDay1ODagSwdcVET7CMc1zkXWy7L8wYA5IChD6II2pNLesCUUOmHHDST05V6iKiQq8PmoDmMeNcbZK6FWBVCpawscajPgdd3bJw/1UBI8UH1ysPGVCYlDDnj6tmki5t/5Jb7oL554rFh39P35a524lgrMIZUxqLORIcNkO7x/RXcZPyxGhIwZcMpmacKIm3vHoF2AEv6TCwP0XopjZ/uAeBiPC7ChlawzcowIPcoBGrObFFLl9TmbeE0fk8y/Abey4xQX2OPm2TjWefgu434eMCaE7EJlhrXcpAJ5sr1MLB+qkP21oEJngtlRWw20WXjJTHJfIOMRjlLYYc7ERNIxcL2ngjaKRDb3zm4D0JVkQ76ZejoBgasfHm8w+27PrWH/0ZoMvZ9PDrgEzzjEkOQzDnJbkQI1HJBrBNpg1bh54gCP57oSZoZzBG/1hJscm+5OwOcymQAn3kqafWSBWYU7/MR/H/57Gk5ne7UuGEn0+RqeW0SRBrZ8rM2bkQBoHtdbCbaCiHS3GevBXYqChEHkZM98k4io4Fq0ihehV0el5yi7vcsRCzHvmBbM4Oo4a4x9YohJUqwb6FgdoRVVSNIMP8kIi3drSHjMD0erTpCd1qn2+IAyR4Xn+OxoVV4EW9CcmBAS3FzARHEKOWgUXZ3TSn9Bpt/xqxBOeJI1a6CyMAwjRiF3/e/JahO+ALcwOUv1OKf3VvwF9jMhkhgPI3gb9uQQhJJzbXjfvMaxLbtaRxOwNgCb3X4uRYOiz7osgKpTT2ZiC2mA9JthP7l4XQXDvNIZH6Nx/1KvNcgGfl9pfVeY7x3uIN7qsn6VckwqA/DCE/hAwWjS0bT5PMFh6KIU2K5UgGJ/Ix+4YFxAUUpGO0Me16HlBLJ7N7AQusY3EcIWpSY/uKmPCBwIAFCvQYH4Sq0P7IYOMwnxzWcdIWHncQITB62vKWGnQbwwIIh89FHLkkihUyJojCjWwnCoSMnqNp+Ch1HL15exsqP9K8hT6ZgXSU7pmveB8AGGhsxIxlEyHRUR3cGFd8hfjvtNrz92ygnOfjoHMkd29zd1JwEFSO/SCM5lh17sqkGRs7usAhuExZRQktLhdkDmdiGOJg1RK3xBb/1jrvVxQA0D7/QbBloVoU3K/pM/Ohk1Qaj8QVcNmkrI0FV3QSH6Dcw8A5GhK24M4zXqUJ92Tk05ARIVVudK89Xbcltox5yHiNKxriMivWDmO/UTi/bMKIGLoOeM0TEp1z9htwS1HXZ5c5l8EYb+G+mFgEnw/UmWgJenLHN08Coma6DCSK7em/xWlxCM3XiubnDtT08jiIgBFVwljwbIIS6gjMmRtygIiwfowtA/G9kD21jsjGMrXa/fSBQYuxsTByznPXeSirOK3q7VisGrAOqjgQwRMAcYSSn5ERQfKN0QqVcZ5YyKPgX9sls0HlmaeJ8KromfhsYSNjoiZHmlExMo4iwUqrYCl+y3HtnfmNQi9f5yJWlV4OH5YUc0dd7/39TXvB8ovgND7Sdo/e9twbhx/fmZU7YeMcrEsCM0TDfzGyM9AxM+IgMBLI9JsPKaY+TeInkhPeW30IgFsQJbPrUODmW2UTFoTGuACs4sW1K0akJGvg1Cf/+ZtHnmbX67RbAU2uwXvYoDS8GzzKM5LRNYql+H/NQs4gJEjDb88GPp/sXRsyH39RdW+vohMhra6bf0T0EU4pL1EBKRvV8yMCw/e5BHtJwrJAeico3PhZTupL9jk71O511WcC+53vPadEifNmqD/6+Ca1a+B57arkpfxFk/S4oBApPH1aOizMC7lK/D7cCm8Gpmdv8LMsTKPbUoy1mXBbBt/uYUu7kt8X4iEBJVtkKezRr12rliBml/GgfMnphhinBrj0+tkwZfgmFOlagbcwpjomMXOgZY+i+WTBVpb6OMbB3ZnOgIMktAhxTMxLpZXCJvwYdgJdOAiLLEXEflQefJrV5ANNaUX5MRN1kPYPqoWe/TcPEkUmoDPyNRmNehZrh+bo7Yohe/P4KKbNMwW7XxCDD7hYmLI3RhiJ8hjBiC6vitzy3/9nFcwD2X+tecsqjzW1bh3oWs0z623xJIO5TgydMFMUaXh1X4RiCLcheaIZHJKDKqm4NMcBcTmjxGP3GAdIIVtIepjocEsqDaI07Tyi2npk9YovfGDpzY4E8CST/O91aOT5FPS24MRIS9Ze+hF+Ehmaa/4H7fwGCg3GYVGiblAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPW0tFKx3sUMQhQ3WyICriqFUoQoVQK7TqYPLSP2jSkKS4OAquBQd/FqsOLs66OrgKguAPiKuLk6KLlHhfUmgR44PL+zjvncN99wH+ZpWpZs84oGqWkUklhVx+VQi9IogYIlT9EjP1OVFMw3N93cPH97sEz/K+9+caUAomA3wC8SzTDYt4g3h609I57xNHWVlSiM+JxwxqkPiR67LLb5xLDvt5ZtTIZuaJo8RCqYvlLmZlQyWeIo4rqkb5/pzLCuctzmq1ztp98heGC9rKMtephpHCIpYgQoCMOiqowkKCdo0UExk6T3r4hxy/SC6ZXBUwciygBhWS4wf/g9+zNYuTE25SOAkEX2z7YwQI7QKthm1/H9t26wQIPANXWsdfawIzn6Q3Olr8CIhsAxfXHU3eAy53gNiTLhmSIwWo/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]};const InteractionProperty={ACTIVE:"active"};function easeIn(i){return Math.pow(i,3)}function easeOut(i){return 1-easeIn(1-i)}function inAndOut(i){return 3*i*i-2*i*i*i}function linear(i){return i}class Interaction extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(InteractionProperty.ACTIVE,e)}setMap(e){this.map_=e}}function pan(i,e,a){const s=i.getCenterInternal();if(s){const o=[s[0]+e[0],s[1]+e[1]];i.animateInternal({duration:a!==void 0?a:250,easing:linear,center:i.getConstrainedCenter(o)})}}function zoomByDelta(i,e,a,s){const o=i.getZoom();if(o===void 0)return;const c=i.getConstrainedZoom(o+e),d=i.getResolutionForZoom(c);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:d,anchor:a,duration:s!==void 0?s:250,easing:easeOut})}const MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType.CLICK,DBLCLICK:EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class DoubleClickZoom extends Interaction{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let a=!1;if(e.type==MapBrowserEventType.DBLCLICK){const s=e.originalEvent,o=e.map,c=e.coordinate,d=s.shiftKey?-this.delta_:this.delta_,h=o.getView();zoomByDelta(h,d,c,this.duration_),s.preventDefault(),a=!0}return!a}}class PointerInteraction extends Interaction{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let a=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==MapBrowserEventType.POINTERUP){const s=this.handleUpEvent(e);this.handlingDownUpSequence=s&&this.targetPointers.length>0}}else if(e.type==MapBrowserEventType.POINTERDOWN){const s=this.handleDownEvent(e);this.handlingDownUpSequence=s,a=this.stopDown(s)}else e.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(e);return!a}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function centroid(i){const e=i.length;let a=0,s=0;for(let o=0;o<e;o++)a+=i[o].clientX,s+=i[o].clientY;return{clientX:a/e,clientY:s/e}}function assert(i,e){if(!i)throw new Error(e)}const tmp_=new Array(6);function create(){return[1,0,0,1,0,0]}function reset(i){return set(i,1,0,0,1,0,0)}function multiply(i,e){const a=i[0],s=i[1],o=i[2],c=i[3],d=i[4],h=i[5],g=e[0],_=e[1],b=e[2],j=e[3],$=e[4],_e=e[5];return i[0]=a*g+o*_,i[1]=s*g+c*_,i[2]=a*b+o*j,i[3]=s*b+c*j,i[4]=a*$+o*_e+d,i[5]=s*$+c*_e+h,i}function set(i,e,a,s,o,c,d){return i[0]=e,i[1]=a,i[2]=s,i[3]=o,i[4]=c,i[5]=d,i}function setFromArray(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function apply(i,e){const a=e[0],s=e[1];return e[0]=i[0]*a+i[2]*s+i[4],e[1]=i[1]*a+i[3]*s+i[5],e}function scale$2(i,e,a){return multiply(i,set(tmp_,e,0,0,a,0,0))}function makeScale(i,e,a){return set(i,e,0,0,a,0,0)}function translate$1(i,e,a){return multiply(i,set(tmp_,1,0,0,1,e,a))}function compose(i,e,a,s,o,c,d,h){const g=Math.sin(c),_=Math.cos(c);return i[0]=s*_,i[1]=o*g,i[2]=-s*g,i[3]=o*_,i[4]=d*s*_-h*s*g+e,i[5]=d*o*g+h*o*_+a,i}function makeInverse(i,e){const a=determinant(e);assert(a!==0,"Transformation matrix cannot be inverted");const s=e[0],o=e[1],c=e[2],d=e[3],h=e[4],g=e[5];return i[0]=d/a,i[1]=-o/a,i[2]=-c/a,i[3]=s/a,i[4]=(c*g-d*h)/a,i[5]=-(s*g-o*h)/a,i}function determinant(i){return i[0]*i[3]-i[1]*i[2]}let transformStringDiv;function toString$3(i){const e="matrix("+i.join(", ")+")";if(WORKER_OFFSCREEN_CANVAS)return e;const a=transformStringDiv||(transformStringDiv=document.createElement("div"));return a.style.transform=e,a.style.transform}function transform2D(i,e,a,s,o,c){c=c||[];let d=0;for(let h=e;h<a;h+=s){const g=i[h],_=i[h+1];c[d++]=o[0]*g+o[2]*_+o[4],c[d++]=o[1]*g+o[3]*_+o[5]}return c&&c.length!=d&&(c.length=d),c}function rotate(i,e,a,s,o,c,d){d=d||[];const h=Math.cos(o),g=Math.sin(o),_=c[0],b=c[1];let j=0;for(let $=e;$<a;$+=s){const _e=i[$]-_,et=i[$+1]-b;d[j++]=_+_e*h-et*g,d[j++]=b+_e*g+et*h;for(let tt=$+2;tt<$+s;++tt)d[j++]=i[tt]}return d&&d.length!=j&&(d.length=j),d}function scale$1(i,e,a,s,o,c,d,h){h=h||[];const g=d[0],_=d[1];let b=0;for(let j=e;j<a;j+=s){const $=i[j]-g,_e=i[j+1]-_;h[b++]=g+o*$,h[b++]=_+c*_e;for(let et=j+2;et<j+s;++et)h[b++]=i[et]}return h&&h.length!=b&&(h.length=b),h}function translate(i,e,a,s,o,c,d){d=d||[];let h=0;for(let g=e;g<a;g+=s){d[h++]=i[g]+o,d[h++]=i[g+1]+c;for(let _=g+2;_<g+s;++_)d[h++]=i[_]}return d&&d.length!=h&&(d.length=h),d}const tmpTransform$1=create();class Geometry extends BaseObject{constructor(){super(),this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne((e,a,s)=>{if(!s)return this.getSimplifiedGeometry(a);const o=this.clone();return o.applyTransform(s),o.getSimplifiedGeometry(a)})}simplifyTransformed(e,a){return this.simplifyTransformedInternal(this.getRevision(),e,a)}clone(){return abstract()}closestPointXY(e,a,s,o){return abstract()}containsXY(e,a){const s=this.getClosestPoint([e,a]);return s[0]===e&&s[1]===a}getClosestPoint(e,a){return a=a||[NaN,NaN],this.closestPointXY(e[0],e[1],a,1/0),a}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const a=this.computeExtent(this.extent_);(isNaN(a[0])||isNaN(a[1]))&&createOrUpdateEmpty(a),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,e)}rotate(e,a){abstract()}scale(e,a,s){abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return abstract()}getType(){return abstract()}applyTransform(e){abstract()}intersectsExtent(e){return abstract()}translate(e,a){abstract()}transform(e,a){const s=get$3(e),o=s.getUnits()=="tile-pixels"?function(c,d,h){const g=s.getExtent(),_=s.getWorldExtent(),b=getHeight(_)/getHeight(g);return compose(tmpTransform$1,_[0],_[3],b,-b,0,0,0),transform2D(c,0,c.length,h,tmpTransform$1,d),getTransform(s,a)(c,d,h)}:getTransform(s,a);return this.applyTransform(o),this}}class SimpleGeometry extends Geometry{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const a=this.getSimplifiedGeometryInternal(e);return a.getFlatCoordinates().length<this.flatCoordinates.length?a:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,a){this.stride=getStrideForLayout(e),this.layout=e,this.flatCoordinates=a}setCoordinates(e,a){abstract()}setLayout(e,a,s){let o;if(e)o=getStrideForLayout(e);else{for(let c=0;c<s;++c){if(a.length===0){this.layout="XY",this.stride=2;return}a=a[0]}o=a.length,e=getLayoutForStride(o)}this.layout=e,this.stride=o}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,a){const s=this.getFlatCoordinates();if(s){const o=this.getStride();rotate(s,0,s.length,o,e,a,s),this.changed()}}scale(e,a,s){a===void 0&&(a=e),s||(s=getCenter(this.getExtent()));const o=this.getFlatCoordinates();if(o){const c=this.getStride();scale$1(o,0,o.length,c,e,a,s,o),this.changed()}}translate(e,a){const s=this.getFlatCoordinates();if(s){const o=this.getStride();translate(s,0,s.length,o,e,a,s),this.changed()}}}function getLayoutForStride(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function getStrideForLayout(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function transformGeom2D(i,e,a){const s=i.getFlatCoordinates();if(!s)return null;const o=i.getStride();return transform2D(s,0,s.length,o,e,a)}function assignClosest(i,e,a,s,o,c,d){const h=i[e],g=i[e+1],_=i[a]-h,b=i[a+1]-g;let j;if(_===0&&b===0)j=e;else{const $=((o-h)*_+(c-g)*b)/(_*_+b*b);if($>1)j=a;else if($>0){for(let _e=0;_e<s;++_e)d[_e]=lerp(i[e+_e],i[a+_e],$);d.length=s;return}else j=e}for(let $=0;$<s;++$)d[$]=i[j+$];d.length=s}function maxSquaredDelta(i,e,a,s,o){let c=i[e],d=i[e+1];for(e+=s;e<a;e+=s){const h=i[e],g=i[e+1],_=squaredDistance$1(c,d,h,g);_>o&&(o=_),c=h,d=g}return o}function arrayMaxSquaredDelta(i,e,a,s,o){for(let c=0,d=a.length;c<d;++c){const h=a[c];o=maxSquaredDelta(i,e,h,s,o),e=h}return o}function multiArrayMaxSquaredDelta(i,e,a,s,o){for(let c=0,d=a.length;c<d;++c){const h=a[c];o=arrayMaxSquaredDelta(i,e,h,s,o),e=h[h.length-1]}return o}function assignClosestPoint(i,e,a,s,o,c,d,h,g,_,b){if(e==a)return _;let j,$;if(o===0){if($=squaredDistance$1(d,h,i[e],i[e+1]),$<_){for(j=0;j<s;++j)g[j]=i[e+j];return g.length=s,$}return _}b=b||[NaN,NaN];let _e=e+s;for(;_e<a;)if(assignClosest(i,_e-s,_e,s,d,h,b),$=squaredDistance$1(d,h,b[0],b[1]),$<_){for(_=$,j=0;j<s;++j)g[j]=b[j];g.length=s,_e+=s}else _e+=s*Math.max((Math.sqrt($)-Math.sqrt(_))/o|0,1);if(c&&(assignClosest(i,a-s,e,s,d,h,b),$=squaredDistance$1(d,h,b[0],b[1]),$<_)){for(_=$,j=0;j<s;++j)g[j]=b[j];g.length=s}return _}function assignClosestArrayPoint(i,e,a,s,o,c,d,h,g,_,b){b=b||[NaN,NaN];for(let j=0,$=a.length;j<$;++j){const _e=a[j];_=assignClosestPoint(i,e,_e,s,o,c,d,h,g,_,b),e=_e}return _}function assignClosestMultiArrayPoint(i,e,a,s,o,c,d,h,g,_,b){b=b||[NaN,NaN];for(let j=0,$=a.length;j<$;++j){const _e=a[j];_=assignClosestArrayPoint(i,e,_e,s,o,c,d,h,g,_,b),e=_e[_e.length-1]}return _}function deflateCoordinate(i,e,a,s){for(let o=0,c=a.length;o<c;++o)i[e++]=a[o];return e}function deflateCoordinates(i,e,a,s){for(let o=0,c=a.length;o<c;++o){const d=a[o];for(let h=0;h<s;++h)i[e++]=d[h]}return e}function deflateCoordinatesArray(i,e,a,s,o){o=o||[];let c=0;for(let d=0,h=a.length;d<h;++d){const g=deflateCoordinates(i,e,a[d],s);o[c++]=g,e=g}return o.length=c,o}function deflateMultiCoordinatesArray(i,e,a,s,o){o=o||[];let c=0;for(let d=0,h=a.length;d<h;++d){const g=deflateCoordinatesArray(i,e,a[d],s,o[c]);g.length===0&&(g[0]=e),o[c++]=g,e=g[g.length-1]}return o.length=c,o}function douglasPeucker(i,e,a,s,o,c,d){const h=(a-e)/s;if(h<3){for(;e<a;e+=s)c[d++]=i[e],c[d++]=i[e+1];return d}const g=new Array(h);g[0]=1,g[h-1]=1;const _=[e,a-s];let b=0;for(;_.length>0;){const j=_.pop(),$=_.pop();let _e=0;const et=i[$],tt=i[$+1],it=i[j],nt=i[j+1];for(let rt=$+s;rt<j;rt+=s){const at=i[rt],st=i[rt+1],ot=squaredSegmentDistance(at,st,et,tt,it,nt);ot>_e&&(b=rt,_e=ot)}_e>o&&(g[(b-e)/s]=1,$+s<b&&_.push($,b),b+s<j&&_.push(b,j))}for(let j=0;j<h;++j)g[j]&&(c[d++]=i[e+j*s],c[d++]=i[e+j*s+1]);return d}function douglasPeuckerArray(i,e,a,s,o,c,d,h){for(let g=0,_=a.length;g<_;++g){const b=a[g];d=douglasPeucker(i,e,b,s,o,c,d),h.push(d),e=b}return d}function snap(i,e){return e*Math.round(i/e)}function quantize(i,e,a,s,o,c,d){if(e==a)return d;let h=snap(i[e],o),g=snap(i[e+1],o);e+=s,c[d++]=h,c[d++]=g;let _,b;do if(_=snap(i[e],o),b=snap(i[e+1],o),e+=s,e==a)return c[d++]=_,c[d++]=b,d;while(_==h&&b==g);for(;e<a;){const j=snap(i[e],o),$=snap(i[e+1],o);if(e+=s,j==_&&$==b)continue;const _e=_-h,et=b-g,tt=j-h,it=$-g;if(_e*it==et*tt&&(_e<0&&tt<_e||_e==tt||_e>0&&tt>_e)&&(et<0&&it<et||et==it||et>0&&it>et)){_=j,b=$;continue}c[d++]=_,c[d++]=b,h=_,g=b,_=j,b=$}return c[d++]=_,c[d++]=b,d}function quantizeArray(i,e,a,s,o,c,d,h){for(let g=0,_=a.length;g<_;++g){const b=a[g];d=quantize(i,e,b,s,o,c,d),h.push(d),e=b}return d}function quantizeMultiArray(i,e,a,s,o,c,d,h){for(let g=0,_=a.length;g<_;++g){const b=a[g],j=[];d=quantizeArray(i,e,b,s,o,c,d,j),h.push(j),e=b[b.length-1]}return d}function inflateCoordinates(i,e,a,s,o){o=o!==void 0?o:[];let c=0;for(let d=e;d<a;d+=s)o[c++]=i.slice(d,d+s);return o.length=c,o}function inflateCoordinatesArray(i,e,a,s,o){o=o!==void 0?o:[];let c=0;for(let d=0,h=a.length;d<h;++d){const g=a[d];o[c++]=inflateCoordinates(i,e,g,s,o[c]),e=g}return o.length=c,o}function inflateMultiCoordinatesArray(i,e,a,s,o){o=o!==void 0?o:[];let c=0;for(let d=0,h=a.length;d<h;++d){const g=a[d];o[c++]=g.length===1&&g[0]===e?[]:inflateCoordinatesArray(i,e,g,s,o[c]),e=g[g.length-1]}return o.length=c,o}function linearRing(i,e,a,s){let o=0,c=i[a-s],d=i[a-s+1];for(;e<a;e+=s){const h=i[e],g=i[e+1];o+=d*h-c*g,c=h,d=g}return o/2}function linearRings(i,e,a,s){let o=0;for(let c=0,d=a.length;c<d;++c){const h=a[c];o+=linearRing(i,e,h,s),e=h}return o}function linearRingss$1(i,e,a,s){let o=0;for(let c=0,d=a.length;c<d;++c){const h=a[c];o+=linearRings(i,e,h,s),e=h[h.length-1]}return o}class LinearRing extends SimpleGeometry{constructor(e,a){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,a!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(a,e):this.setCoordinates(e,a)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,a,s,o){return o<closestSquaredDistanceXY(this.getExtent(),e,a)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,a,s,o))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const a=[];return a.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,a,0),new LinearRing(a,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,a){this.setLayout(a,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}let Point$1=class ga extends SimpleGeometry{constructor(e,a){super(),this.setCoordinates(e,a)}clone(){const e=new ga(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,a,s,o){const c=this.flatCoordinates,d=squaredDistance$1(e,a,c[0],c[1]);if(d<o){const h=this.stride;for(let g=0;g<h;++g)s[g]=c[g];return s.length=h,d}return o}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,a){this.setLayout(a,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}};function linearRingContainsExtent(i,e,a,s,o){return!forEachCorner(o,function(d){return!linearRingContainsXY(i,e,a,s,d[0],d[1])})}function linearRingContainsXY(i,e,a,s,o,c){let d=0,h=i[a-s],g=i[a-s+1];for(;e<a;e+=s){const _=i[e],b=i[e+1];g<=c?b>c&&(_-h)*(c-g)-(o-h)*(b-g)>0&&d++:b<=c&&(_-h)*(c-g)-(o-h)*(b-g)<0&&d--,h=_,g=b}return d!==0}function linearRingsContainsXY(i,e,a,s,o,c){if(a.length===0||!linearRingContainsXY(i,e,a[0],s,o,c))return!1;for(let d=1,h=a.length;d<h;++d)if(linearRingContainsXY(i,a[d-1],a[d],s,o,c))return!1;return!0}function linearRingssContainsXY(i,e,a,s,o,c){if(a.length===0)return!1;for(let d=0,h=a.length;d<h;++d){const g=a[d];if(linearRingsContainsXY(i,e,g,s,o,c))return!0;e=g[g.length-1]}return!1}function getInteriorPointOfArray(i,e,a,s,o,c,d){let h,g,_,b,j,$,_e;const et=o[c+1],tt=[];for(let rt=0,at=a.length;rt<at;++rt){const st=a[rt];for(b=i[st-s],$=i[st-s+1],h=e;h<st;h+=s)j=i[h],_e=i[h+1],(et<=$&&_e<=et||$<=et&&et<=_e)&&(_=(et-$)/(_e-$)*(j-b)+b,tt.push(_)),b=j,$=_e}let it=NaN,nt=-1/0;for(tt.sort(ascending),b=tt[0],h=1,g=tt.length;h<g;++h){j=tt[h];const rt=Math.abs(j-b);rt>nt&&(_=(b+j)/2,linearRingsContainsXY(i,e,a,s,_,et)&&(it=_,nt=rt)),b=j}return isNaN(it)&&(it=o[c]),d?(d.push(it,et,nt),d):[it,et,nt]}function getInteriorPointsOfMultiArray(i,e,a,s,o){let c=[];for(let d=0,h=a.length;d<h;++d){const g=a[d];c=getInteriorPointOfArray(i,e,g,s,o,2*d,c),e=g[g.length-1]}return c}function forEach(i,e,a,s,o){let c;for(e+=s;e<a;e+=s)if(c=o(i.slice(e-s,e),i.slice(e,e+s)),c)return c;return!1}function intersectsLineString(i,e,a,s,o){const c=extendFlatCoordinates(createEmpty(),i,e,a,s);return intersects$1(o,c)?containsExtent(o,c)||c[0]>=o[0]&&c[2]<=o[2]||c[1]>=o[1]&&c[3]<=o[3]?!0:forEach(i,e,a,s,function(d,h){return intersectsSegment(o,d,h)}):!1}function intersectsLineStringArray(i,e,a,s,o){for(let c=0,d=a.length;c<d;++c){if(intersectsLineString(i,e,a[c],s,o))return!0;e=a[c]}return!1}function intersectsLinearRing(i,e,a,s,o){return!!(intersectsLineString(i,e,a,s,o)||linearRingContainsXY(i,e,a,s,o[0],o[1])||linearRingContainsXY(i,e,a,s,o[0],o[3])||linearRingContainsXY(i,e,a,s,o[2],o[1])||linearRingContainsXY(i,e,a,s,o[2],o[3]))}function intersectsLinearRingArray(i,e,a,s,o){if(!intersectsLinearRing(i,e,a[0],s,o))return!1;if(a.length===1)return!0;for(let c=1,d=a.length;c<d;++c)if(linearRingContainsExtent(i,a[c-1],a[c],s,o)&&!intersectsLineString(i,a[c-1],a[c],s,o))return!1;return!0}function intersectsLinearRingMultiArray(i,e,a,s,o){for(let c=0,d=a.length;c<d;++c){const h=a[c];if(intersectsLinearRingArray(i,e,h,s,o))return!0;e=h[h.length-1]}return!1}function coordinates(i,e,a,s){for(;e<a-s;){for(let o=0;o<s;++o){const c=i[e+o];i[e+o]=i[a-s+o],i[a-s+o]=c}e+=s,a-=s}}function linearRingIsClockwise(i,e,a,s){let o=0,c=i[a-s],d=i[a-s+1];for(;e<a;e+=s){const h=i[e],g=i[e+1];o+=(h-c)*(g+d),c=h,d=g}return o===0?void 0:o>0}function linearRingsAreOriented(i,e,a,s,o){o=o!==void 0?o:!1;for(let c=0,d=a.length;c<d;++c){const h=a[c],g=linearRingIsClockwise(i,e,h,s);if(c===0){if(o&&g||!o&&!g)return!1}else if(o&&!g||!o&&g)return!1;e=h}return!0}function linearRingssAreOriented(i,e,a,s,o){for(let c=0,d=a.length;c<d;++c){const h=a[c];if(!linearRingsAreOriented(i,e,h,s,o))return!1;h.length&&(e=h[h.length-1])}return!0}function orientLinearRings(i,e,a,s,o){o=o!==void 0?o:!1;for(let c=0,d=a.length;c<d;++c){const h=a[c],g=linearRingIsClockwise(i,e,h,s);(c===0?o&&g||!o&&!g:o&&!g||!o&&g)&&coordinates(i,e,h,s),e=h}return e}function orientLinearRingsArray(i,e,a,s,o){for(let c=0,d=a.length;c<d;++c)e=orientLinearRings(i,e,a[c],s,o);return e}function inflateEnds(i,e){const a=[];let s=0,o=0,c;for(let d=0,h=e.length;d<h;++d){const g=e[d],_=linearRingIsClockwise(i,s,g,2);if(c===void 0&&(c=_),_===c)a.push(e.slice(o,d+1));else{if(a.length===0)continue;a[a.length-1].push(e[o])}o=d+1,s=g}return a}class Polygon extends SimpleGeometry{constructor(e,a,s){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,a!==void 0&&s?(this.setFlatCoordinates(a,e),this.ends_=s):this.setCoordinates(e,a)}appendLinearRing(e){this.flatCoordinates?extend$4(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,a,s,o){return o<closestSquaredDistanceXY(this.getExtent(),e,a)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,a,s,o))}containsXY(e,a){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,a)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let a;return e!==void 0?(a=this.getOrientedFlatCoordinates().slice(),orientLinearRings(a,0,this.ends_,this.stride,e)):a=this.flatCoordinates,inflateCoordinatesArray(a,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new LinearRing(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,a=this.flatCoordinates,s=this.ends_,o=[];let c=0;for(let d=0,h=s.length;d<h;++d){const g=s[d],_=new LinearRing(a.slice(c,g),e);o.push(_),c=g}return o}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const a=[],s=[];return a.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),a,0,s),new Polygon(a,"XY",s)}getType(){return"Polygon"}intersectsExtent(e){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,a){this.setLayout(a,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=s.length===0?0:s[s.length-1],this.changed()}}function fromExtent(i){if(isEmpty(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],a=i[1],s=i[2],o=i[3],c=[e,a,e,o,s,o,s,a,e,a];return new Polygon(c,"XY",[c.length])}class RenderBox extends Disposable{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,a=this.endPixel_,s="px",o=this.element_.style;o.left=Math.min(e[0],a[0])+s,o.top=Math.min(e[1],a[1])+s,o.width=Math.abs(a[0]-e[0])+s,o.height=Math.abs(a[1]-e[1])+s}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const a=this.element_.style;a.left="inherit",a.top="inherit",a.width="inherit",a.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,a){this.startPixel_=e,this.endPixel_=a,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,a=this.endPixel_,o=[e,[e[0],a[1]],a,[a[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new Polygon([o])}getGeometry(){return this.geometry_}}function all$1(i){const e=arguments;return function(a){let s=!0;for(let o=0,c=e.length;o<c&&(s=s&&e[o](a),!!s);++o);return s}}const altKeyOnly=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus=function(i){const e=i.map.getTargetElement(),a=i.map.getOwnerDocument().activeElement;return e.contains(a)},focusWithTabindex=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?focus(i):!0},always$1=TRUE,mouseActionButton=function(i){const e=i.originalEvent;return e.button==0&&!(WEBKIT&&MAC&&e.ctrlKey)},never=FALSE,singleClick=function(i){return i.type==MapBrowserEventType.SINGLECLICK},noModifierKeys=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},platformModifierKey=function(i){const e=i.originalEvent;return MAC?e.metaKey:e.ctrlKey},shiftKeyOnly=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(i){const e=i.originalEvent,a=e.target.tagName;return a!=="INPUT"&&a!=="SELECT"&&a!=="TEXTAREA"&&!e.target.isContentEditable},mouseOnly=function(i){const e=i.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},primaryAction=function(i){const e=i.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0},DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(e,a,s){super(e),this.coordinate=a,this.mapBrowserEvent=s}}class DragBox extends PointerInteraction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new RenderBox(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:mouseActionButton,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,a,s){const o=s[0]-a[0],c=s[1]-a[1];return o*o+c*c>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const a=this.boxEndCondition_(e,this.startPixel_,e.pixel);return a&&this.onBoxEnd(e),this.dispatchEvent(new DragBoxEvent(a?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}class DragPan extends PointerInteraction{constructor(e){super({stopDown:FALSE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const a=e.condition?e.condition:all$1(noModifierKeys,primaryAction);this.condition_=e.onFocusOnly?all$1(focusWithTabindex,a):a,this.noKinetic_=!1}handleDragEvent(e){const a=e.map;this.panning_||(this.panning_=!0,a.getView().beginInteraction());const s=this.targetPointers,o=a.getEventPixel(centroid(s));if(s.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){const c=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],h=e.map.getView();scale$3(c,h.getResolution()),rotate$1(c,h.getRotation()),h.adjustCenterInternal(c)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=s.length,e.originalEvent.preventDefault()}handleUpEvent(e){const a=e.map,s=a.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const o=this.kinetic_.getDistance(),c=this.kinetic_.getAngle(),d=s.getCenterInternal(),h=a.getPixelFromCoordinateInternal(d),g=a.getCoordinateFromPixelInternal([h[0]-o*Math.cos(c),h[1]-o*Math.sin(c)]);s.animateInternal({center:s.getConstrainedCenter(g),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,s.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const s=e.map.getView();return this.lastCentroid=null,s.getAnimating()&&s.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}function disable(i){if(i!==void 0)return 0}function none$1(i){if(i!==void 0)return i}function createSnapToN(i){const e=2*Math.PI/i;return function(a,s){if(s)return a;if(a!==void 0)return a=Math.floor(a/e+.5)*e,a}}function createSnapToZero(i){const e=toRadians(5);return function(a,s){return s||a===void 0?a:Math.abs(a)<=e?0:a}}class DragRotate extends PointerInteraction{constructor(e){e=e||{},super({stopDown:FALSE}),this.condition_=e.condition?e.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mouseOnly(e))return;const a=e.map,s=a.getView();if(s.getConstraints().rotation===disable)return;const o=a.getSize(),c=e.pixel,d=Math.atan2(o[1]/2-c[1],c[0]-o[0]/2);if(this.lastAngle_!==void 0){const h=d-this.lastAngle_;s.adjustRotationInternal(-h)}this.lastAngle_=d}handleUpEvent(e){return mouseOnly(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mouseOnly(e)&&mouseActionButton(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class DragZoom extends DragBox{constructor(e){e=e||{};const a=e.condition?e.condition:shiftKeyOnly;super({condition:a,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const s=this.getMap().getView();let o=this.getGeometry();if(this.out_){const c=s.rotatedExtentForGeometry(o),d=s.getResolutionForExtentInternal(c),h=s.getResolution()/d;o=o.clone(),o.scale(h*h)}s.fitInternal(o,{duration:this.duration_,easing:easeOut})}}class Circle extends SimpleGeometry{constructor(e,a,s){super(),s!==void 0&&a===void 0?this.setFlatCoordinates(s,e):(a=a||0,this.setCenterAndRadius(e,a,s))}clone(){const e=new Circle(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,a,s,o){const c=this.flatCoordinates,d=e-c[0],h=a-c[1],g=d*d+h*h;if(g<o){if(g===0)for(let _=0;_<this.stride;++_)s[_]=c[_];else{const _=this.getRadius()/Math.sqrt(g);s[0]=c[0]+_*d,s[1]=c[1]+_*h;for(let b=2;b<this.stride;++b)s[b]=c[b]}return s.length=this.stride,g}return o}containsXY(e,a){const s=this.flatCoordinates,o=e-s[0],c=a-s[1];return o*o+c*c<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const a=this.flatCoordinates,s=a[this.stride]-a[0];return createOrUpdate$2(a[0]-s,a[1]-s,a[0]+s,a[1]+s,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],a=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+a*a}getType(){return"Circle"}intersectsExtent(e){const a=this.getExtent();if(intersects$1(e,a)){const s=this.getCenter();return e[0]<=s[0]&&e[2]>=s[0]||e[1]<=s[1]&&e[3]>=s[1]?!0:forEachCorner(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const a=this.stride,s=this.flatCoordinates[a]-this.flatCoordinates[0],o=e.slice();o[a]=o[0]+s;for(let c=1;c<a;++c)o[a+c]=e[c];this.setFlatCoordinates(this.layout,o),this.changed()}setCenterAndRadius(e,a,s){this.setLayout(s,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const o=this.flatCoordinates;let c=deflateCoordinate(o,0,e,this.stride);o[c++]=o[0]+a;for(let d=1,h=this.stride;d<h;++d)o[c++]=o[d];o.length=c,this.changed()}getCoordinates(){return null}setCoordinates(e,a){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,a){const s=this.getCenter(),o=this.getStride();this.setCenter(rotate(s,0,s.length,o,e,a,s)),this.changed()}}Circle.prototype.transform;class Feature extends BaseObject{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const a=e;this.setGeometry(a)}else{const a=e;this.setProperties(a)}}clone(){const e=new Feature(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const a=this.getGeometry();a&&e.setGeometry(a.clone());const s=this.getStyle();return s&&e.setStyle(s),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(assert(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[i]),function(){return e}}class GeometryCollection extends Geometry{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,a=this.geometries_.length;e<a;++e)this.changeEventsKeys_.push(listen(this.geometries_[e],EventType.CHANGE,this.changed,this))}clone(){const e=new GeometryCollection(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,a,s,o){if(o<closestSquaredDistanceXY(this.getExtent(),e,a))return o;const c=this.geometries_;for(let d=0,h=c.length;d<h;++d)o=c[d].closestPointXY(e,a,s,o);return o}containsXY(e,a){const s=this.geometries_;for(let o=0,c=s.length;o<c;++o)if(s[o].containsXY(e,a))return!0;return!1}computeExtent(e){createOrUpdateEmpty(e);const a=this.geometries_;for(let s=0,o=a.length;s<o;++s)extend$3(e,a[s].getExtent());return e}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const a=this.geometries_;for(let s=0,o=a.length;s<o;++s)a[s].getType()===this.getType()?e=e.concat(a[s].getGeometriesArrayRecursive()):e.push(a[s]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const a=[],s=this.geometries_;let o=!1;for(let c=0,d=s.length;c<d;++c){const h=s[c],g=h.getSimplifiedGeometry(e);a.push(g),g!==h&&(o=!0)}if(o){const c=new GeometryCollection(null);return c.setGeometriesArray(a),c}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const a=this.geometries_;for(let s=0,o=a.length;s<o;++s)if(a[s].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,a){const s=this.geometries_;for(let o=0,c=s.length;o<c;++o)s[o].rotate(e,a);this.changed()}scale(e,a,s){s||(s=getCenter(this.getExtent()));const o=this.geometries_;for(let c=0,d=o.length;c<d;++c)o[c].scale(e,a,s);this.changed()}setGeometries(e){this.setGeometriesArray(cloneGeometries(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const a=this.geometries_;for(let s=0,o=a.length;s<o;++s)a[s].applyTransform(e);this.changed()}translate(e,a){const s=this.geometries_;for(let o=0,c=s.length;o<c;++o)s[o].translate(e,a);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(i){const e=[];for(let a=0,s=i.length;a<s;++a)e.push(i[a].clone());return e}function interpolatePoint(i,e,a,s,o,c,d){let h,g;const _=(a-e)/s;if(_===1)h=e;else if(_===2)h=e,g=o;else if(_!==0){let b=i[e],j=i[e+1],$=0;const _e=[0];for(let it=e+s;it<a;it+=s){const nt=i[it],rt=i[it+1];$+=Math.sqrt((nt-b)*(nt-b)+(rt-j)*(rt-j)),_e.push($),b=nt,j=rt}const et=o*$,tt=binarySearch$1(_e,et);tt<0?(g=(et-_e[-tt-2])/(_e[-tt-1]-_e[-tt-2]),h=e+(-tt-2)*s):h=e+tt*s}d=d>1?d:2,c=c||new Array(d);for(let b=0;b<d;++b)c[b]=h===void 0?NaN:g===void 0?i[h+b]:lerp(i[h+b],i[h+s+b],g);return c}function lineStringCoordinateAtM(i,e,a,s,o,c){if(a==e)return null;let d;if(o<i[e+s-1])return c?(d=i.slice(e,e+s),d[s-1]=o,d):null;if(i[a-1]<o)return c?(d=i.slice(a-s,a),d[s-1]=o,d):null;if(o==i[e+s-1])return i.slice(e,e+s);let h=e/s,g=a/s;for(;h<g;){const $=h+g>>1;o<i[($+1)*s-1]?g=$:h=$+1}const _=i[h*s-1];if(o==_)return i.slice((h-1)*s,(h-1)*s+s);const b=i[(h+1)*s-1],j=(o-_)/(b-_);d=[];for(let $=0;$<s-1;++$)d.push(lerp(i[(h-1)*s+$],i[h*s+$],j));return d.push(o),d}function lineStringsCoordinateAtM(i,e,a,s,o,c,d){if(d)return lineStringCoordinateAtM(i,e,a[a.length-1],s,o,c);let h;if(o<i[s-1])return c?(h=i.slice(0,s),h[s-1]=o,h):null;if(i[i.length-1]<o)return c?(h=i.slice(i.length-s),h[s-1]=o,h):null;for(let g=0,_=a.length;g<_;++g){const b=a[g];if(e!=b){if(o<i[e+s-1])return null;if(o<=i[b-1])return lineStringCoordinateAtM(i,e,b,s,o,!1);e=b}}return null}function lineStringLength(i,e,a,s){let o=i[e],c=i[e+1],d=0;for(let h=e+s;h<a;h+=s){const g=i[h],_=i[h+1];d+=Math.sqrt((g-o)*(g-o)+(_-c)*(_-c)),o=g,c=_}return d}class LineString extends SimpleGeometry{constructor(e,a){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,a!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(a,e):this.setCoordinates(e,a)}appendCoordinate(e){extend$4(this.flatCoordinates,e),this.changed()}clone(){const e=new LineString(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,a,s,o){return o<closestSquaredDistanceXY(this.getExtent(),e,a)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,a,s,o))}forEachSegment(e){return forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,a){return this.layout!="XYM"&&this.layout!="XYZM"?null:(a=a!==void 0?a:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,a))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,a){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,a,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const a=[];return a.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,a,0),new LineString(a,"XY")}getType(){return"LineString"}intersectsExtent(e){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,a){this.setLayout(a,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class MapEvent extends BaseEvent{constructor(e,a,s){super(e),this.map=a,this.frameState=s!==void 0?s:null}}class MapBrowserEvent extends MapEvent{constructor(e,a,s,o,c,d){super(e,a,c),this.originalEvent=s,this.pixel_=null,this.coordinate_=null,this.dragging=o!==void 0?o:!1,this.activePointers=d}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}class MultiLineString extends SimpleGeometry{constructor(e,a,s){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,a);else if(a!==void 0&&s)this.setFlatCoordinates(a,e),this.ends_=s;else{const o=e,c=[],d=[];for(let g=0,_=o.length;g<_;++g){const b=o[g];extend$4(c,b.getFlatCoordinates()),d.push(c.length)}const h=o.length===0?this.getLayout():o[0].getLayout();this.setFlatCoordinates(h,c),this.ends_=d}}appendLineString(e){extend$4(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,a,s,o){return o<closestSquaredDistanceXY(this.getExtent(),e,a)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,a,s,o))}getCoordinateAtM(e,a,s){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(a=a!==void 0?a:!1,s=s!==void 0?s:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,a,s))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new LineString(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,a=this.ends_,s=this.layout,o=[];let c=0;for(let d=0,h=a.length;d<h;++d){const g=a[d],_=new LineString(e.slice(c,g),s);o.push(_),c=g}return o}getFlatMidpoints(){const e=[],a=this.flatCoordinates;let s=0;const o=this.ends_,c=this.stride;for(let d=0,h=o.length;d<h;++d){const g=o[d],_=interpolatePoint(a,s,g,c,.5);extend$4(e,_),s=g}return e}getSimplifiedGeometryInternal(e){const a=[],s=[];return a.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,a,0,s),new MultiLineString(a,"XY",s)}getType(){return"MultiLineString"}intersectsExtent(e){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,a){this.setLayout(a,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const s=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=s.length===0?0:s[s.length-1],this.changed()}}class MultiPoint extends SimpleGeometry{constructor(e,a){super(),a&&!Array.isArray(e[0])?this.setFlatCoordinates(a,e):this.setCoordinates(e,a)}appendPoint(e){extend$4(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new MultiPoint(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,a,s,o){if(o<closestSquaredDistanceXY(this.getExtent(),e,a))return o;const c=this.flatCoordinates,d=this.stride;for(let h=0,g=c.length;h<g;h+=d){const _=squaredDistance$1(e,a,c[h],c[h+1]);if(_<o){o=_;for(let b=0;b<d;++b)s[b]=c[h+b];s.length=d}}return o}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const a=this.flatCoordinates.length/this.stride;return e<0||a<=e?null:new Point$1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,a=this.layout,s=this.stride,o=[];for(let c=0,d=e.length;c<d;c+=s){const h=new Point$1(e.slice(c,c+s),a);o.push(h)}return o}getType(){return"MultiPoint"}intersectsExtent(e){const a=this.flatCoordinates,s=this.stride;for(let o=0,c=a.length;o<c;o+=s){const d=a[o],h=a[o+1];if(containsXY(e,d,h))return!0}return!1}setCoordinates(e,a){this.setLayout(a,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function linearRingss(i,e,a,s){const o=[];let c=createEmpty();for(let d=0,h=a.length;d<h;++d){const g=a[d];c=createOrUpdateFromFlatCoordinates(i,e,g[0],s),o.push((c[0]+c[2])/2,(c[1]+c[3])/2),e=g[g.length-1]}return o}class MultiPolygon extends SimpleGeometry{constructor(e,a,s){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!s&&!Array.isArray(e[0])){const o=e,c=[],d=[];for(let h=0,g=o.length;h<g;++h){const _=o[h],b=c.length,j=_.getEnds();for(let $=0,_e=j.length;$<_e;++$)j[$]+=b;extend$4(c,_.getFlatCoordinates()),d.push(j)}a=o.length===0?this.getLayout():o[0].getLayout(),e=c,s=d}a!==void 0&&s?(this.setFlatCoordinates(a,e),this.endss_=s):this.setCoordinates(e,a)}appendPolygon(e){let a;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),a=e.getEnds().slice(),this.endss_.push();else{const s=this.flatCoordinates.length;extend$4(this.flatCoordinates,e.getFlatCoordinates()),a=e.getEnds().slice();for(let o=0,c=a.length;o<c;++o)a[o]+=s}this.endss_.push(a),this.changed()}clone(){const e=this.endss_.length,a=new Array(e);for(let o=0;o<e;++o)a[o]=this.endss_[o].slice();const s=new MultiPolygon(this.flatCoordinates.slice(),this.layout,a);return s.applyProperties(this),s}closestPointXY(e,a,s,o){return o<closestSquaredDistanceXY(this.getExtent(),e,a)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,a,s,o))}containsXY(e,a){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,a)}getArea(){return linearRingss$1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let a;return e!==void 0?(a=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(a,0,this.endss_,this.stride,e)):a=this.flatCoordinates,inflateMultiCoordinatesArray(a,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const a=[],s=[];return a.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),a,0,s),new MultiPolygon(a,"XY",s)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let a;if(e===0)a=0;else{const c=this.endss_[e-1];a=c[c.length-1]}const s=this.endss_[e].slice(),o=s[s.length-1];if(a!==0)for(let c=0,d=s.length;c<d;++c)s[c]-=a;return new Polygon(this.flatCoordinates.slice(a,o),this.layout,s)}getPolygons(){const e=this.layout,a=this.flatCoordinates,s=this.endss_,o=[];let c=0;for(let d=0,h=s.length;d<h;++d){const g=s[d].slice(),_=g[g.length-1];if(c!==0)for(let j=0,$=g.length;j<$;++j)g[j]-=c;const b=new Polygon(a.slice(c,_),e,g);o.push(b),c=_}return o}getType(){return"MultiPolygon"}intersectsExtent(e){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,a){this.setLayout(a,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const s=deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(s.length===0)this.flatCoordinates.length=0;else{const o=s[s.length-1];this.flatCoordinates.length=o.length===0?0:o[o.length-1]}this.changed()}}const LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class BaseLayer extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const a=Object.assign({},e);typeof e.properties=="object"&&(delete a.properties,Object.assign(a,e.properties)),a[LayerProperty.OPACITY]=e.opacity!==void 0?e.opacity:1,assert(typeof a[LayerProperty.OPACITY]=="number","Layer opacity must be a number"),a[LayerProperty.VISIBLE]=e.visible!==void 0?e.visible:!0,a[LayerProperty.Z_INDEX]=e.zIndex,a[LayerProperty.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,a[LayerProperty.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,a[LayerProperty.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,a[LayerProperty.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=a.className!==void 0?a.className:"ol-layer",delete a.className,this.setProperties(a),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const a=this.state_||{layer:this,managed:e===void 0?!0:e},s=this.getZIndex();return a.opacity=clamp(Math.round(this.getOpacity()*100)/100,0,1),a.visible=this.getVisible(),a.extent=this.getExtent(),a.zIndex=s===void 0&&!a.managed?1/0:s,a.maxResolution=this.getMaxResolution(),a.minResolution=Math.max(this.getMinResolution(),0),a.minZoom=this.getMinZoom(),a.maxZoom=this.getMaxZoom(),this.state_=a,a}getLayersArray(e){return abstract()}getLayerStatesArray(e){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(LayerProperty.EXTENT,e)}setMaxResolution(e){this.set(LayerProperty.MAX_RESOLUTION,e)}setMinResolution(e){this.set(LayerProperty.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(LayerProperty.MAX_ZOOM,e)}setMinZoom(e){this.set(LayerProperty.MIN_ZOOM,e)}setOpacity(e){assert(typeof e=="number","Layer opacity must be a number"),this.set(LayerProperty.OPACITY,e)}setVisible(e){this.set(LayerProperty.VISIBLE,e)}setZIndex(e){this.set(LayerProperty.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const RenderEventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ViewHint={ANIMATING:0,INTERACTING:1},ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256;function createExtent(i,e,a){return function(s,o,c,d,h){if(!s)return;if(!o&&!e)return s;const g=e?0:c[0]*o,_=e?0:c[1]*o,b=h?h[0]:0,j=h?h[1]:0;let $=i[0]+g/2+b,_e=i[2]-g/2+b,et=i[1]+_/2+j,tt=i[3]-_/2+j;$>_e&&($=(_e+$)/2,_e=$),et>tt&&(et=(tt+et)/2,tt=et);let it=clamp(s[0],$,_e),nt=clamp(s[1],et,tt);if(d&&a&&o){const rt=30*o;it+=-rt*Math.log(1+Math.max(0,$-s[0])/rt)+rt*Math.log(1+Math.max(0,s[0]-_e)/rt),nt+=-rt*Math.log(1+Math.max(0,et-s[1])/rt)+rt*Math.log(1+Math.max(0,s[1]-tt)/rt)}return[it,nt]}}function none(i){return i}function getViewportClampedResolution(i,e,a,s){const o=getWidth(e)/a[0],c=getHeight(e)/a[1];return s?Math.min(i,Math.max(o,c)):Math.min(i,Math.min(o,c))}function getSmoothClampedResolution(i,e,a){let s=Math.min(i,e);const o=50;return s*=Math.log(1+o*Math.max(0,i/e-1))/o+1,a&&(s=Math.max(s,a),s/=Math.log(1+o*Math.max(0,a/i-1))/o+1),clamp(s,a/2,e*2)}function createSnapToResolutions(i,e,a,s){return e=e!==void 0?e:!0,function(o,c,d,h){if(o!==void 0){const g=i[0],_=i[i.length-1],b=a?getViewportClampedResolution(g,a,d,s):g;if(h)return e?getSmoothClampedResolution(o,b,_):clamp(o,_,b);const j=Math.min(b,o),$=Math.floor(linearFindNearest(i,j,c));return i[$]>b&&$<i.length-1?i[$+1]:i[$]}}}function createSnapToPower(i,e,a,s,o,c){return s=s!==void 0?s:!0,a=a!==void 0?a:0,function(d,h,g,_){if(d!==void 0){const b=o?getViewportClampedResolution(e,o,g,c):e;if(_)return s?getSmoothClampedResolution(d,b,a):clamp(d,a,b);const j=1e-9,$=Math.ceil(Math.log(e/b)/Math.log(i)-j),_e=-h*(.5-j)+.5,et=Math.min(b,d),tt=Math.floor(Math.log(e/et)/Math.log(i)+_e),it=Math.max($,tt),nt=e/Math.pow(i,it);return clamp(nt,a,b)}}}function createMinMaxResolution(i,e,a,s,o){return a=a!==void 0?a:!0,function(c,d,h,g){if(c!==void 0){const _=s?getViewportClampedResolution(i,s,h,o):i;return!a||!g?clamp(c,e,_):getSmoothClampedResolution(c,_,e)}}}const DEFAULT_MIN_ZOOM=0;class View extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&disableCoordinateWarning(),e.center&&(e.center=fromUserCoordinate(e.center,this.projection_)),e.extent&&(e.extent=fromUserExtent(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const a=Object.assign({},e);for(const h in ViewProperty)delete a[h];this.setProperties(a,!0);const s=createResolutionConstraint(e);this.maxResolution_=s.maxResolution,this.minResolution_=s.minResolution,this.zoomFactor_=s.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=s.minZoom;const o=createCenterConstraint(e),c=s.constraint,d=createRotationConstraint(e);this.constraints_={center:o,resolution:c,rotation:d},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let a=this.padding_;this.padding_=e;const s=this.getCenterInternal();if(s){const o=e||[0,0,0,0];a=a||[0,0,0,0];const c=this.getResolution(),d=c/2*(o[3]-a[3]+a[1]-o[1]),h=c/2*(o[0]-a[0]+a[2]-o[2]);this.setCenterInternal([s[0]+d,s[1]-h])}}getUpdatedOptions_(e){const a=this.getProperties();return a.resolution!==void 0?a.resolution=this.getResolution():a.zoom=this.getZoom(),a.center=this.getCenterInternal(),a.rotation=this.getRotation(),Object.assign({},a,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const a=new Array(arguments.length);for(let s=0;s<a.length;++s){let o=arguments[s];o.center&&(o=Object.assign({},o),o.center=fromUserCoordinate(o.center,this.getProjection())),o.anchor&&(o=Object.assign({},o),o.anchor=fromUserCoordinate(o.anchor,this.getProjection())),a[s]=o}this.animateInternal.apply(this,a)}animateInternal(e){let a=arguments.length,s;a>1&&typeof arguments[a-1]=="function"&&(s=arguments[a-1],--a);let o=0;for(;o<a&&!this.isDef();++o){const b=arguments[o];b.center&&this.setCenterInternal(b.center),b.zoom!==void 0?this.setZoom(b.zoom):b.resolution&&this.setResolution(b.resolution),b.rotation!==void 0&&this.setRotation(b.rotation)}if(o===a){s&&animationCallback(s,!0);return}let c=Date.now(),d=this.targetCenter_.slice(),h=this.targetResolution_,g=this.targetRotation_;const _=[];for(;o<a;++o){const b=arguments[o],j={start:c,complete:!1,anchor:b.anchor,duration:b.duration!==void 0?b.duration:1e3,easing:b.easing||inAndOut,callback:s};if(b.center&&(j.sourceCenter=d,j.targetCenter=b.center.slice(),d=j.targetCenter),b.zoom!==void 0?(j.sourceResolution=h,j.targetResolution=this.getResolutionForZoom(b.zoom),h=j.targetResolution):b.resolution&&(j.sourceResolution=h,j.targetResolution=b.resolution,h=j.targetResolution),b.rotation!==void 0){j.sourceRotation=g;const $=modulo(b.rotation-g+Math.PI,2*Math.PI)-Math.PI;j.targetRotation=g+$,g=j.targetRotation}isNoopAnimation(j)?j.complete=!0:c+=j.duration,_.push(j)}this.animations_.push(_),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let e;for(let a=0,s=this.animations_.length;a<s;++a){const o=this.animations_[a];if(o[0].callback&&animationCallback(o[0].callback,!1),!e)for(let c=0,d=o.length;c<d;++c){const h=o[c];if(!h.complete){e=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let a=!1;for(let s=this.animations_.length-1;s>=0;--s){const o=this.animations_[s];let c=!0;for(let d=0,h=o.length;d<h;++d){const g=o[d];if(g.complete)continue;const _=e-g.start;let b=g.duration>0?_/g.duration:1;b>=1?(g.complete=!0,b=1):c=!1;const j=g.easing(b);if(g.sourceCenter){const $=g.sourceCenter[0],_e=g.sourceCenter[1],et=g.targetCenter[0],tt=g.targetCenter[1];this.nextCenter_=g.targetCenter;const it=$+j*(et-$),nt=_e+j*(tt-_e);this.targetCenter_=[it,nt]}if(g.sourceResolution&&g.targetResolution){const $=j===1?g.targetResolution:g.sourceResolution+j*(g.targetResolution-g.sourceResolution);if(g.anchor){const _e=this.getViewportSize_(this.getRotation()),et=this.constraints_.resolution($,0,_e,!0);this.targetCenter_=this.calculateCenterZoom(et,g.anchor)}this.nextResolution_=g.targetResolution,this.targetResolution_=$,this.applyTargetState_(!0)}if(g.sourceRotation!==void 0&&g.targetRotation!==void 0){const $=j===1?modulo(g.targetRotation+Math.PI,2*Math.PI)-Math.PI:g.sourceRotation+j*(g.targetRotation-g.sourceRotation);if(g.anchor){const _e=this.constraints_.rotation($,!0);this.targetCenter_=this.calculateCenterRotate(_e,g.anchor)}this.nextRotation_=g.targetRotation,this.targetRotation_=$}if(this.applyTargetState_(!0),a=!0,!g.complete)break}if(c){this.animations_[s]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const d=o[0].callback;d&&animationCallback(d,!0)}}this.animations_=this.animations_.filter(Boolean),a&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,a){let s;const o=this.getCenterInternal();return o!==void 0&&(s=[o[0]-a[0],o[1]-a[1]],rotate$1(s,e-this.getRotation()),add$1(s,a)),s}calculateCenterZoom(e,a){let s;const o=this.getCenterInternal(),c=this.getResolution();if(o!==void 0&&c!==void 0){const d=a[0]-e*(a[0]-o[0])/c,h=a[1]-e*(a[1]-o[1])/c;s=[d,h]}return s}getViewportSize_(e){const a=this.viewportSize_;if(e){const s=a[0],o=a[1];return[Math.abs(s*Math.cos(e))+Math.abs(o*Math.sin(e)),Math.abs(s*Math.sin(e))+Math.abs(o*Math.cos(e))]}return a}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&toUserCoordinate(e,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const a=this.calculateExtentInternal(e);return toUserExtent(a,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const a=this.getCenterInternal();assert(a,"The view center is not defined");const s=this.getResolution();assert(s!==void 0,"The view resolution is not defined");const o=this.getRotation();return assert(o!==void 0,"The view rotation is not defined"),getForViewAndSize(a,s,o,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,a){return this.getResolutionForExtentInternal(fromUserExtent(e,this.getProjection()),a)}getResolutionForExtentInternal(e,a){a=a||this.getViewportSizeMinusPadding_();const s=getWidth(e)/a[0],o=getHeight(e)/a[1];return Math.max(s,o)}getResolutionForValueFunction(e){e=e||2;const a=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,o=Math.log(a/s)/Math.log(e);return function(c){return a/Math.pow(e,c*o)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(e){const a=Math.log(e||2),s=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,c=Math.log(s/o)/a;return function(d){return Math.log(s/d)/a/c}}getViewportSizeMinusPadding_(e){let a=this.getViewportSize_(e);const s=this.padding_;return s&&(a=[a[0]-s[1]-s[3],a[1]-s[0]-s[2]]),a}getState(){const e=this.getProjection(),a=this.getResolution(),s=this.getRotation();let o=this.getCenterInternal();const c=this.padding_;if(c){const d=this.getViewportSizeMinusPadding_();o=calculateCenterOn(o,this.getViewportSize_(),[d[0]/2+c[3],d[1]/2+c[0]],a,s)}return{center:o.slice(0),projection:e!==void 0?e:null,resolution:a,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:s,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const a=this.getResolution();return a!==void 0&&(e=this.getZoomForResolution(a)),e}getZoomForResolution(e){let a=this.minZoom_||0,s,o;if(this.resolutions_){const c=linearFindNearest(this.resolutions_,e,1);a=c,s=this.resolutions_[c],c==this.resolutions_.length-1?o=2:o=s/this.resolutions_[c+1]}else s=this.maxResolution_,o=this.zoomFactor_;return a+Math.log(s/e)/Math.log(o)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const a=clamp(Math.floor(e),0,this.resolutions_.length-2),s=this.resolutions_[a]/this.resolutions_[a+1];return this.resolutions_[a]/Math.pow(s,clamp(e-a,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,a){let s;if(assert(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){assert(!isEmpty(e),"Cannot fit empty extent provided as `geometry`");const o=fromUserExtent(e,this.getProjection());s=fromExtent(o)}else if(e.getType()==="Circle"){const o=fromUserExtent(e.getExtent(),this.getProjection());s=fromExtent(o),s.rotate(this.getRotation(),getCenter(o))}else s=e;this.fitInternal(s,a)}rotatedExtentForGeometry(e){const a=this.getRotation(),s=Math.cos(a),o=Math.sin(-a),c=e.getFlatCoordinates(),d=e.getStride();let h=1/0,g=1/0,_=-1/0,b=-1/0;for(let j=0,$=c.length;j<$;j+=d){const _e=c[j]*s-c[j+1]*o,et=c[j]*o+c[j+1]*s;h=Math.min(h,_e),g=Math.min(g,et),_=Math.max(_,_e),b=Math.max(b,et)}return[h,g,_,b]}fitInternal(e,a){a=a||{};let s=a.size;s||(s=this.getViewportSizeMinusPadding_());const o=a.padding!==void 0?a.padding:[0,0,0,0],c=a.nearest!==void 0?a.nearest:!1;let d;a.minResolution!==void 0?d=a.minResolution:a.maxZoom!==void 0?d=this.getResolutionForZoom(a.maxZoom):d=0;const h=this.rotatedExtentForGeometry(e);let g=this.getResolutionForExtentInternal(h,[s[0]-o[1]-o[3],s[1]-o[0]-o[2]]);g=isNaN(g)?d:Math.max(g,d),g=this.getConstrainedResolution(g,c?0:1);const _=this.getRotation(),b=Math.sin(_),j=Math.cos(_),$=getCenter(h);$[0]+=(o[1]-o[3])/2*g,$[1]+=(o[0]-o[2])/2*g;const _e=$[0]*j-$[1]*b,et=$[1]*j+$[0]*b,tt=this.getConstrainedCenter([_e,et],g),it=a.callback?a.callback:VOID;a.duration!==void 0?this.animateInternal({resolution:g,center:tt,duration:a.duration,easing:a.easing},it):(this.targetResolution_=g,this.targetCenter_=tt,this.applyTargetState_(!1,!0),animationCallback(it,!0))}centerOn(e,a,s){this.centerOnInternal(fromUserCoordinate(e,this.getProjection()),a,s)}centerOnInternal(e,a,s){this.setCenterInternal(calculateCenterOn(e,a,s,this.getResolution(),this.getRotation()))}calculateCenterShift(e,a,s,o){let c;const d=this.padding_;if(d&&e){const h=this.getViewportSizeMinusPadding_(-s),g=calculateCenterOn(e,o,[h[0]/2+d[3],h[1]/2+d[0]],a,s);c=[e[0]-g[0],e[1]-g[1]]}return c}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const a=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([a[0]+e[0],a[1]+e[1]])}adjustCenterInternal(e){const a=this.targetCenter_;this.setCenterInternal([a[0]+e[0],a[1]+e[1]])}adjustResolution(e,a){a=a&&fromUserCoordinate(a,this.getProjection()),this.adjustResolutionInternal(e,a)}adjustResolutionInternal(e,a){const s=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),c=this.constraints_.resolution(this.targetResolution_*e,0,o,s);a&&(this.targetCenter_=this.calculateCenterZoom(c,a)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,a){this.adjustResolution(Math.pow(this.zoomFactor_,-e),a)}adjustRotation(e,a){a&&(a=fromUserCoordinate(a,this.getProjection())),this.adjustRotationInternal(e,a)}adjustRotationInternal(e,a){const s=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+e,s);a&&(this.targetCenter_=this.calculateCenterRotate(o,a)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,a){return this.hints_[e]+=a,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,a){const s=this.getAnimating()||this.getInteracting()||a,o=this.constraints_.rotation(this.targetRotation_,s),c=this.getViewportSize_(o),d=this.constraints_.resolution(this.targetResolution_,0,c,s),h=this.constraints_.center(this.targetCenter_,d,c,s,this.calculateCenterShift(this.targetCenter_,d,o,c));this.get(ViewProperty.ROTATION)!==o&&this.set(ViewProperty.ROTATION,o),this.get(ViewProperty.RESOLUTION)!==d&&(this.set(ViewProperty.RESOLUTION,d),this.set("zoom",this.getZoom(),!0)),(!h||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),h))&&this.set(ViewProperty.CENTER,h),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,a,s){e=e!==void 0?e:200;const o=a||0,c=this.constraints_.rotation(this.targetRotation_),d=this.getViewportSize_(c),h=this.constraints_.resolution(this.targetResolution_,o,d),g=this.constraints_.center(this.targetCenter_,h,d,!1,this.calculateCenterShift(this.targetCenter_,h,c,d));if(e===0&&!this.cancelAnchor_){this.targetResolution_=h,this.targetRotation_=c,this.targetCenter_=g,this.applyTargetState_();return}s=s||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==c||!this.getCenterInternal()||!equals(this.getCenterInternal(),g))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:c,center:g,resolution:h,duration:e,easing:easeOut,anchor:s}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(e,a,s){s=s&&fromUserCoordinate(s,this.getProjection()),this.endInteractionInternal(e,a,s)}endInteractionInternal(e,a,s){this.getInteracting()&&(this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(e,a,s))}getConstrainedCenter(e,a){const s=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,a||this.getResolution(),s)}getConstrainedZoom(e,a){const s=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(s,a))}getConstrainedResolution(e,a){a=a||0;const s=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,a,s)}}function animationCallback(i,e){setTimeout(function(){i(e)},0)}function createCenterConstraint(i){if(i.extent!==void 0){const a=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return createExtent(i.extent,i.constrainOnlyCenter,a)}const e=createProjection(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const a=e.getExtent().slice();return a[0]=-1/0,a[2]=1/0,createExtent(a,!1,!1)}return none}function createResolutionConstraint(i){let e,a,s,d=i.minZoom!==void 0?i.minZoom:DEFAULT_MIN_ZOOM,h=i.maxZoom!==void 0?i.maxZoom:28;const g=i.zoomFactor!==void 0?i.zoomFactor:2,_=i.multiWorld!==void 0?i.multiWorld:!1,b=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,j=i.showFullExtent!==void 0?i.showFullExtent:!1,$=createProjection(i.projection,"EPSG:3857"),_e=$.getExtent();let et=i.constrainOnlyCenter,tt=i.extent;if(!_&&!tt&&$.isGlobal()&&(et=!1,tt=_e),i.resolutions!==void 0){const it=i.resolutions;a=it[d],s=it[h]!==void 0?it[h]:it[it.length-1],i.constrainResolution?e=createSnapToResolutions(it,b,!et&&tt,j):e=createMinMaxResolution(a,s,b,!et&&tt,j)}else{const nt=(_e?Math.max(getWidth(_e),getHeight(_e)):360*METERS_PER_UNIT$1.degrees/$.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(2,DEFAULT_MIN_ZOOM),rt=nt/Math.pow(2,28-DEFAULT_MIN_ZOOM);a=i.maxResolution,a!==void 0?d=0:a=nt/Math.pow(g,d),s=i.minResolution,s===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?s=a/Math.pow(g,h):s=nt/Math.pow(g,h):s=rt),h=d+Math.floor(Math.log(a/s)/Math.log(g)),s=a/Math.pow(g,h-d),i.constrainResolution?e=createSnapToPower(g,a,s,b,!et&&tt,j):e=createMinMaxResolution(a,s,b,!et&&tt,j)}return{constraint:e,maxResolution:a,minResolution:s,minZoom:d,zoomFactor:g}}function createRotationConstraint(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const a=i.constrainRotation;return a===void 0||a===!0?createSnapToZero():a===!1?none$1:typeof a=="number"?createSnapToN(a):none$1}return disable}function isNoopAnimation(i){return!(i.sourceCenter&&i.targetCenter&&!equals(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function calculateCenterOn(i,e,a,s,o){const c=Math.cos(-o);let d=Math.sin(-o),h=i[0]*c-i[1]*d,g=i[1]*c+i[0]*d;h+=(e[0]/2-a[0])*s,g+=(a[1]-e[1]/2)*s,d=-d;const _=h*c-g*d,b=g*c+h*d;return[_,b]}class Layer extends BaseLayer{constructor(e){const a=Object.assign({},e);delete a.source,super(a),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const s=e.source?e.source:null;this.setSource(s)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=listen(e,EventType.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let a;const s=this.getMapInternal();!e&&s&&(e=s.getView()),e instanceof View?a={viewState:e.getState(),extent:e.calculateExtent()}:a=e,!a.layerStatesArray&&s&&(a.layerStatesArray=s.getLayerGroup().getLayerStatesArray());let o;a.layerStatesArray?o=a.layerStatesArray.find(d=>d.layer===this):o=this.getLayerState();const c=this.getExtent();return inView(o,a.viewState)&&(!c||intersects$1(c,a.extent))}getAttributions(e){if(!this.isVisible(e))return[];let a;const s=this.getSource();if(s&&(a=s.getAttributions()),!a)return[];const o=e instanceof View?e.getViewStateAndExtent():e;let c=a(o);return Array.isArray(c)||(c=[c]),c}render(e,a){const s=this.getRenderer();return s.prepareFrame(e)?(this.rendered=!0,s.renderFrame(e,a)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(LayerProperty.MAP,e)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(e){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=listen(e,RenderEventType.PRECOMPOSE,function(a){const o=a.frameState.layerStatesArray,c=this.getLayerState(!1);assert(!o.some(function(d){return d.layer===c.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),o.push(c)},this),this.mapRenderKey_=listen(this,EventType.CHANGE,e.render,e),this.changed())}setSource(e){this.set(LayerProperty.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function inView(i,e){if(!i.visible)return!1;const a=e.resolution;if(a<i.minResolution||a>=i.maxResolution)return!1;const s=e.zoom;return s>i.minZoom&&s<=i.maxZoom}function quickselect(i,e,a,s,o){quickselectStep(i,e,a||0,s||i.length-1,o||defaultCompare)}function quickselectStep(i,e,a,s,o){for(;s>a;){if(s-a>600){var c=s-a+1,d=e-a+1,h=Math.log(c),g=.5*Math.exp(2*h/3),_=.5*Math.sqrt(h*g*(c-g)/c)*(d-c/2<0?-1:1),b=Math.max(a,Math.floor(e-d*g/c+_)),j=Math.min(s,Math.floor(e+(c-d)*g/c+_));quickselectStep(i,e,b,j,o)}var $=i[e],_e=a,et=s;for(swap(i,a,e),o(i[s],$)>0&&swap(i,a,s);_e<et;){for(swap(i,_e,et),_e++,et--;o(i[_e],$)<0;)_e++;for(;o(i[et],$)>0;)et--}o(i[a],$)===0?swap(i,a,et):(et++,swap(i,et,s)),et<=e&&(a=et+1),e<=et&&(s=et-1)}}function swap(i,e,a){var s=i[e];i[e]=i[a],i[a]=s}function defaultCompare(i,e){return i<e?-1:i>e?1:0}let RBush$1=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let a=this.data;const s=[];if(!intersects(e,a))return s;const o=this.toBBox,c=[];for(;a;){for(let d=0;d<a.children.length;d++){const h=a.children[d],g=a.leaf?o(h):h;intersects(e,g)&&(a.leaf?s.push(h):contains(e,g)?this._all(h,s):c.push(h))}a=c.pop()}return s}collides(e){let a=this.data;if(!intersects(e,a))return!1;const s=[];for(;a;){for(let o=0;o<a.children.length;o++){const c=a.children[o],d=a.leaf?this.toBBox(c):c;if(intersects(e,d)){if(a.leaf||contains(e,d))return!0;s.push(c)}}a=s.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let s=0;s<e.length;s++)this.insert(e[s]);return this}let a=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=a;else if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){const s=this.data;this.data=a,a=s}this._insert(a,this.data.height-a.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(e,a){if(!e)return this;let s=this.data;const o=this.toBBox(e),c=[],d=[];let h,g,_;for(;s||c.length;){if(s||(s=c.pop(),g=c[c.length-1],h=d.pop(),_=!0),s.leaf){const b=findItem(e,s.children,a);if(b!==-1)return s.children.splice(b,1),c.push(s),this._condense(c),this}!_&&!s.leaf&&contains(s,o)?(c.push(s),d.push(h),h=0,g=s,s=s.children[0]):g?(h++,s=g.children[h],_=!1):s=null}return this}toBBox(e){return e}compareMinX(e,a){return e.minX-a.minX}compareMinY(e,a){return e.minY-a.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,a){const s=[];for(;e;)e.leaf?a.push(...e.children):s.push(...e.children),e=s.pop();return a}_build(e,a,s,o){const c=s-a+1;let d=this._maxEntries,h;if(c<=d)return h=createNode(e.slice(a,s+1)),calcBBox(h,this.toBBox),h;o||(o=Math.ceil(Math.log(c)/Math.log(d)),d=Math.ceil(c/Math.pow(d,o-1))),h=createNode([]),h.leaf=!1,h.height=o;const g=Math.ceil(c/d),_=g*Math.ceil(Math.sqrt(d));multiSelect(e,a,s,_,this.compareMinX);for(let b=a;b<=s;b+=_){const j=Math.min(b+_-1,s);multiSelect(e,b,j,g,this.compareMinY);for(let $=b;$<=j;$+=g){const _e=Math.min($+g-1,j);h.children.push(this._build(e,$,_e,o-1))}}return calcBBox(h,this.toBBox),h}_chooseSubtree(e,a,s,o){for(;o.push(a),!(a.leaf||o.length-1===s);){let c=1/0,d=1/0,h;for(let g=0;g<a.children.length;g++){const _=a.children[g],b=bboxArea(_),j=enlargedArea(e,_)-b;j<d?(d=j,c=b<c?b:c,h=_):j===d&&b<c&&(c=b,h=_)}a=h||a.children[0]}return a}_insert(e,a,s){const o=s?e:this.toBBox(e),c=[],d=this._chooseSubtree(o,this.data,a,c);for(d.children.push(e),extend$1(d,o);a>=0&&c[a].children.length>this._maxEntries;)this._split(c,a),a--;this._adjustParentBBoxes(o,c,a)}_split(e,a){const s=e[a],o=s.children.length,c=this._minEntries;this._chooseSplitAxis(s,c,o);const d=this._chooseSplitIndex(s,c,o),h=createNode(s.children.splice(d,s.children.length-d));h.height=s.height,h.leaf=s.leaf,calcBBox(s,this.toBBox),calcBBox(h,this.toBBox),a?e[a-1].children.push(h):this._splitRoot(s,h)}_splitRoot(e,a){this.data=createNode([e,a]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(e,a,s){let o,c=1/0,d=1/0;for(let h=a;h<=s-a;h++){const g=distBBox(e,0,h,this.toBBox),_=distBBox(e,h,s,this.toBBox),b=intersectionArea(g,_),j=bboxArea(g)+bboxArea(_);b<c?(c=b,o=h,d=j<d?j:d):b===c&&j<d&&(d=j,o=h)}return o||s-a}_chooseSplitAxis(e,a,s){const o=e.leaf?this.compareMinX:compareNodeMinX,c=e.leaf?this.compareMinY:compareNodeMinY,d=this._allDistMargin(e,a,s,o),h=this._allDistMargin(e,a,s,c);d<h&&e.children.sort(o)}_allDistMargin(e,a,s,o){e.children.sort(o);const c=this.toBBox,d=distBBox(e,0,a,c),h=distBBox(e,s-a,s,c);let g=bboxMargin(d)+bboxMargin(h);for(let _=a;_<s-a;_++){const b=e.children[_];extend$1(d,e.leaf?c(b):b),g+=bboxMargin(d)}for(let _=s-a-1;_>=a;_--){const b=e.children[_];extend$1(h,e.leaf?c(b):b),g+=bboxMargin(h)}return g}_adjustParentBBoxes(e,a,s){for(let o=s;o>=0;o--)extend$1(a[o],e)}_condense(e){for(let a=e.length-1,s;a>=0;a--)e[a].children.length===0?a>0?(s=e[a-1].children,s.splice(s.indexOf(e[a]),1)):this.clear():calcBBox(e[a],this.toBBox)}};function findItem(i,e,a){if(!a)return e.indexOf(i);for(let s=0;s<e.length;s++)if(a(i,e[s]))return s;return-1}function calcBBox(i,e){distBBox(i,0,i.children.length,e,i)}function distBBox(i,e,a,s,o){o||(o=createNode(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let c=e;c<a;c++){const d=i.children[c];extend$1(o,i.leaf?s(d):d)}return o}function extend$1(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function compareNodeMinX(i,e){return i.minX-e.minX}function compareNodeMinY(i,e){return i.minY-e.minY}function bboxArea(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function bboxMargin(i){return i.maxX-i.minX+(i.maxY-i.minY)}function enlargedArea(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function intersectionArea(i,e){const a=Math.max(i.minX,e.minX),s=Math.max(i.minY,e.minY),o=Math.min(i.maxX,e.maxX),c=Math.min(i.maxY,e.maxY);return Math.max(0,o-a)*Math.max(0,c-s)}function contains(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function intersects(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function createNode(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(i,e,a,s,o){const c=[e,a];for(;c.length;){if(a=c.pop(),e=c.pop(),a-e<=s)continue;const d=e+Math.ceil((a-e)/s/2)*s;quickselect(i,d,e,a,o),c.push(e,d,d,a)}}const ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function hasArea(i){return i[0]>0&&i[1]>0}function scale(i,e,a){return a===void 0&&(a=[0,0]),a[0]=i[0]*e+.5|0,a[1]=i[1]*e+.5|0,a}function toSize(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}class ImageStyle{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=toSize(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(e){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(e){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e)}listenImageChange(e){abstract()}load(){abstract()}unlistenImageChange(e){abstract()}}const rgb={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var xyz={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};xyz.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};xyz.max=xyz.whitepoint[2].D65;xyz.rgb=function(i,e){e=e||xyz.whitepoint[2].E;var a=i[0]/e[0],s=i[1]/e[1],o=i[2]/e[2],c,d,h;return c=a*3.240969941904521+s*-1.537383177570093+o*-.498610760293,d=a*-.96924363628087+s*1.87596750150772+o*.041555057407175,h=a*.055630079696993+s*-.20397695888897+o*1.056971514242878,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=c*12.92,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:d=d*12.92,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:h=h*12.92,c=Math.min(Math.max(0,c),1),d=Math.min(Math.max(0,d),1),h=Math.min(Math.max(0,h),1),[c*255,d*255,h*255]};rgb.xyz=function(i,e){var a=i[0]/255,s=i[1]/255,o=i[2]/255;a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92;var c=a*.41239079926595+s*.35758433938387+o*.18048078840183,d=a*.21263900587151+s*.71516867876775+o*.072192315360733,h=a*.019330818715591+s*.11919477979462+o*.95053215224966;return e=e||xyz.whitepoint[2].E,[c*e[0],d*e[1],h*e[2]]};const luv={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(i,e,a){var s,o,c,d,h,g,_,b,j,$,_e,et,tt;if(c=i[0],d=i[1],h=i[2],c===0)return[0,0,0];var it=.0011070564598794539;return e=e||"D65",a=a||2,j=xyz.whitepoint[a][e][0],$=xyz.whitepoint[a][e][1],_e=xyz.whitepoint[a][e][2],et=4*j/(j+15*$+3*_e),tt=9*$/(j+15*$+3*_e),s=d/(13*c)+et||0,o=h/(13*c)+tt||0,_=c>8?$*Math.pow((c+16)/116,3):$*c*it,g=_*9*s/(4*o)||0,b=_*(12-3*s-20*o)/(4*o)||0,[g,_,b]}};xyz.luv=function(i,e,a){var s,o,c,d,h,g,_,b,j,$,_e,et,tt,it=.008856451679035631,nt=903.2962962962961;e=e||"D65",a=a||2,j=xyz.whitepoint[a][e][0],$=xyz.whitepoint[a][e][1],_e=xyz.whitepoint[a][e][2],et=4*j/(j+15*$+3*_e),tt=9*$/(j+15*$+3*_e),g=i[0],_=i[1],b=i[2],s=4*g/(g+15*_+3*b)||0,o=9*_/(g+15*_+3*b)||0;var rt=_/$;return c=rt<=it?nt*rt:116*Math.pow(rt,1/3)-16,d=13*c*(s-et),h=13*c*(o-tt),[c,d,h]};var lchuv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(i){var e=i[0],a=i[1],s=i[2],o,c,d;return d=s/360*2*Math.PI,o=a*Math.cos(d),c=a*Math.sin(d),[e,o,c]},xyz:function(i){return luv.xyz(lchuv.luv(i))}};luv.lchuv=function(i){var e=i[0],a=i[1],s=i[2],o=Math.sqrt(a*a+s*s),c=Math.atan2(s,a),d=c*360/2/Math.PI;return d<0&&(d+=360),[e,o,d]};xyz.lchuv=function(i){return luv.lchuv(xyz.luv(i))};const names$z={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$3(i){var b,j;var e,a=[],s=1,o;if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(i=String(i).toLowerCase(),names$z[i])a=names$z[i].slice(),o="rgb";else if(i==="transparent")s=0,o="rgb",a=[0,0,0];else if(i[0]==="#"){var c=i.slice(1),d=c.length,h=d<=4;s=1,h?(a=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],d===4&&(s=parseInt(c[3]+c[3],16)/255)):(a=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],d===8&&(s=parseInt(c[6]+c[7],16)/255)),a[0]||(a[0]=0),a[1]||(a[1]=0),a[2]||(a[2]=0),o="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(i)){var g=e[1];o=g.replace(/a$/,"");var _=o==="cmyk"?4:o==="gray"?1:3;a=e[2].trim().split(/\s*[,\/]\s*|\s+/),o==="color"&&(o=a.shift()),a=a.map(function($,_e){if($[$.length-1]==="%")return $=parseFloat($)/100,_e===3?$:o==="rgb"?$*255:o[0]==="h"||o[0]==="l"&&!_e?$*100:o==="lab"?$*125:o==="lch"?_e<2?$*150:$*360:o[0]==="o"&&!_e?$:o==="oklab"?$*.4:o==="oklch"?_e<2?$*.4:$*360:$;if(o[_e]==="h"||_e===2&&o[o.length-1]==="h"){if(baseHues[$]!==void 0)return baseHues[$];if($.endsWith("deg"))return parseFloat($);if($.endsWith("turn"))return parseFloat($)*360;if($.endsWith("grad"))return parseFloat($)*360/400;if($.endsWith("rad"))return parseFloat($)*180/Math.PI}return $==="none"?0:parseFloat($)}),s=a.length>_?a.pop():1}else/[0-9](?:\s|\/|,)/.test(i)&&(a=i.match(/([0-9]+)/g).map(function($){return parseFloat($)}),o=((j=(b=i.match(/([a-z])/ig))==null?void 0:b.join(""))==null?void 0:j.toLowerCase())||"rgb");return{space:o,values:a,alpha:s}}const hsl={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(i){var e=i[0]/360,a=i[1]/100,s=i[2]/100,o,c,d,h,g,_=0;if(a===0)return g=s*255,[g,g,g];for(c=s<.5?s*(1+a):s+a-s*a,o=2*s-c,h=[0,0,0];_<3;)d=e+1/3*-(_-1),d<0?d++:d>1&&d--,g=6*d<1?o+(c-o)*6*d:2*d<1?c:3*d<2?o+(c-o)*(2/3-d)*6:o,h[_++]=g*255;return h}};rgb.hsl=function(i){var e=i[0]/255,a=i[1]/255,s=i[2]/255,o=Math.min(e,a,s),c=Math.max(e,a,s),d=c-o,h,g,_;return c===o?h=0:e===c?h=(a-s)/d:a===c?h=2+(s-e)/d:s===c&&(h=4+(e-a)/d),h=Math.min(h*60,360),h<0&&(h+=360),_=(o+c)/2,c===o?g=0:_<=.5?g=d/(c+o):g=d/(2-c-o),[h,g*100,_*100]};function rgba$1(i){Array.isArray(i)&&i.raw&&(i=String.raw(...arguments)),i instanceof Number&&(i=+i);var e,a=parse$3(i);if(!a.space)return[];const s=a.space[0]==="h"?hsl.min:rgb.min,o=a.space[0]==="h"?hsl.max:rgb.max;return e=Array(3),e[0]=Math.min(Math.max(a.values[0],s[0]),o[0]),e[1]=Math.min(Math.max(a.values[1],s[1]),o[1]),e[2]=Math.min(Math.max(a.values[2],s[2]),o[2]),a.space[0]==="h"&&(e=hsl.rgb(e)),e.push(Math.min(Math.max(a.alpha,0),1)),e}function asString(i){return typeof i=="string"?i:toString$2(i)}const MAX_CACHE_SIZE=1024,cache={};let cacheSize=0;function withAlpha(i){if(i.length===4)return i;const e=i.slice();return e[3]=1,e}function rgbaToLcha(i){const e=xyz.lchuv(rgb.xyz(i));return e[3]=i[3],e}function lchaToRgba(i){const e=xyz.rgb(lchuv.xyz(i));return e[3]=i[3],e}function fromString(i){if(cache.hasOwnProperty(i))return cache[i];if(cacheSize>=MAX_CACHE_SIZE){let a=0;for(const s in cache)a++&3||(delete cache[s],--cacheSize)}const e=rgba$1(i);if(e.length!==4)throw new Error('Failed to parse "'+i+'" as color');for(const a of e)if(isNaN(a))throw new Error('Failed to parse "'+i+'" as color');return normalize(e),cache[i]=e,++cacheSize,e}function asArray(i){return Array.isArray(i)?i:fromString(i)}function normalize(i){return i[0]=clamp(i[0]+.5|0,0,255),i[1]=clamp(i[1]+.5|0,0,255),i[2]=clamp(i[2]+.5|0,0,255),i[3]=clamp(i[3],0,1),i}function toString$2(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let a=i[1];a!=(a|0)&&(a=a+.5|0);let s=i[2];s!=(s|0)&&(s=s+.5|0);const o=i[3]===void 0?1:Math.round(i[3]*100)/100;return"rgba("+e+","+a+","+s+","+o+")"}function isStringColor(i){try{return fromString(i),!0}catch{return!1}}function asColorLike(i){return Array.isArray(i)?toString$2(i):i}const defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject;let measureContext$1=null,measureFont;const textHeights={},registerFont=function(){const e="32px ",a=["monospace","serif"],s=a.length,o="wmytzilWMYTZIL@#/&?$%10";let c,d;function h(_,b,j){let $=!0;for(let _e=0;_e<s;++_e){const et=a[_e];if(d=measureTextWidth(_+" "+b+" "+e+et,o),j!=et){const tt=measureTextWidth(_+" "+b+" "+e+j+","+et,o);$=$&&tt!=d}}return!!$}function g(){let _=!0;const b=checkedFonts.getKeys();for(let j=0,$=b.length;j<$;++j){const _e=b[j];checkedFonts.get(_e)<100&&(h.apply(this,_e.split(`
`))?(clear$1(textHeights),measureContext$1=null,measureFont=void 0,checkedFonts.set(_e,100)):(checkedFonts.set(_e,checkedFonts.get(_e)+1,!0),_=!1))}_&&(clearInterval(c),c=void 0)}return function(_){const b=getFontParameters(_);if(!b)return;const j=b.families;for(let $=0,_e=j.length;$<_e;++$){const et=j[$],tt=b.style+`
`+b.weight+`
`+et;checkedFonts.get(tt)===void 0&&(checkedFonts.set(tt,100,!0),h(b.style,b.weight,et)||(checkedFonts.set(tt,0,!0),c===void 0&&(c=setInterval(g,32))))}}}(),measureTextHeight=function(){let i;return function(e){let a=textHeights[e];if(a==null){if(WORKER_OFFSCREEN_CANVAS){const s=getFontParameters(e),o=measureText$1(e,"Žg");a=(isNaN(Number(s.lineHeight))?1.2:Number(s.lineHeight))*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),a=i.offsetHeight,document.body.removeChild(i);textHeights[e]=a}return a}}();function measureText$1(i,e){return measureContext$1||(measureContext$1=createCanvasContext2D(1,1)),i!=measureFont&&(measureContext$1.font=i,measureFont=measureContext$1.font),measureContext$1.measureText(e)}function measureTextWidth(i,e){return measureText$1(i,e).width}function measureAndCacheTextWidth(i,e,a){if(e in a)return a[e];const s=e.split(`
`).reduce((o,c)=>Math.max(o,measureTextWidth(i,c)),0);return a[e]=s,s}function getTextDimensions(i,e){const a=[],s=[],o=[];let c=0,d=0,h=0,g=0;for(let _=0,b=e.length;_<=b;_+=2){const j=e[_];if(j===`
`||_===b){c=Math.max(c,d),o.push(d),d=0,h+=g;continue}const $=e[_+1]||i.font,_e=measureTextWidth($,j);a.push(_e),d+=_e;const et=measureTextHeight($);s.push(et),g=Math.max(g,et)}return{width:c,height:h,widths:a,heights:s,lineWidths:o}}function drawImageOrLabel(i,e,a,s,o,c,d,h,g,_,b){i.save(),a!==1&&(i.globalAlpha*=a),e&&i.transform.apply(i,e),s.contextInstructions?(i.translate(g,_),i.scale(b[0],b[1]),executeLabelInstructions(s,i)):b[0]<0||b[1]<0?(i.translate(g,_),i.scale(b[0],b[1]),i.drawImage(s,o,c,d,h,0,0,d,h)):i.drawImage(s,o,c,d,h,g,_,d*b[0],h*b[1]),i.restore()}function executeLabelInstructions(i,e){const a=i.contextInstructions;for(let s=0,o=a.length;s<o;s+=2)Array.isArray(a[s+1])?e[a[s]].apply(e,a[s+1]):e[a[s]]=a[s+1]}class RegularShape extends ImageStyle{constructor(e){const a=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:a,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.render()}clone(){const e=this.getScale(),a=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return a.setOpacity(this.getOpacity()),a}getAnchor(){const e=this.size_,a=this.getDisplacement(),s=this.getScaleArray();return[e[0]/2-a[0]/s[0],e[1]/2+a[1]/s[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let a=this.canvases_[e];if(!a){const s=this.renderOptions_,o=createCanvasContext2D(s.size*e,s.size*e);this.draw_(s,o,e),a=o.canvas,this.canvases_[e]=a}return a}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return ImageState.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,a,s){if(a===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return a;let o=this.radius_,c=this.radius2_===void 0?o:this.radius2_;if(o<c){const dt=o;o=c,c=dt}const d=this.radius2_===void 0?this.points_:this.points_*2,h=2*Math.PI/d,g=c*Math.sin(h),_=Math.sqrt(c*c-g*g),b=o-_,j=Math.sqrt(g*g+b*b),$=j/g;if(e==="miter"&&$<=s)return $*a;const _e=a/2/$,et=a/2*(b/j),it=Math.sqrt((o+_e)*(o+_e)+et*et)-o;if(this.radius2_===void 0||e==="bevel")return it*2;const nt=o*Math.sin(h),rt=Math.sqrt(o*o-nt*nt),at=c-rt,ot=Math.sqrt(nt*nt+at*at)/nt;if(ot<=s){const dt=ot*a/2-c-o;return 2*Math.max(it,dt)}return it*2}createRenderOptions(){let e=defaultLineCap,a=defaultLineJoin,s=0,o=null,c=0,d,h=0;this.stroke_&&(d=asColorLike(this.stroke_.getColor()??defaultStrokeStyle),h=this.stroke_.getWidth()??defaultLineWidth,o=this.stroke_.getLineDash(),c=this.stroke_.getLineDashOffset()??0,a=this.stroke_.getLineJoin()??defaultLineJoin,e=this.stroke_.getLineCap()??defaultLineCap,s=this.stroke_.getMiterLimit()??defaultMiterLimit);const g=this.calculateLineJoinSize_(a,h,s),_=Math.max(this.radius_,this.radius2_||0),b=Math.ceil(2*_+g);return{strokeStyle:d,strokeWidth:h,size:b,lineCap:e,lineDash:o,lineDashOffset:c,lineJoin:a,miterLimit:s}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,a,s){if(a.scale(s,s),a.translate(e.size/2,e.size/2),this.createPath_(a),this.fill_){let o=this.fill_.getColor();o===null&&(o=defaultFillStyle),a.fillStyle=asColorLike(o),a.fill()}e.strokeStyle&&(a.strokeStyle=e.strokeStyle,a.lineWidth=e.strokeWidth,e.lineDash&&(a.setLineDash(e.lineDash),a.lineDashOffset=e.lineDashOffset),a.lineCap=e.lineCap,a.lineJoin=e.lineJoin,a.miterLimit=e.miterLimit,a.stroke())}createHitDetectionCanvas_(e){let a;if(this.fill_){let s=this.fill_.getColor(),o=0;typeof s=="string"&&(s=asArray(s)),s===null?o=1:Array.isArray(s)&&(o=s.length===4?s[3]:1),o===0&&(a=createCanvasContext2D(e.size,e.size),this.drawHitDetectionCanvas_(e,a))}return a?a.canvas:this.getImage(1)}createPath_(e){let a=this.points_;const s=this.radius_;if(a===1/0)e.arc(0,0,s,0,2*Math.PI);else{const o=this.radius2_===void 0?s:this.radius2_;this.radius2_!==void 0&&(a*=2);const c=this.angle_-Math.PI/2,d=2*Math.PI/a;for(let h=0;h<a;h++){const g=c+h*d,_=h%2===0?s:o;e.lineTo(_*Math.cos(g),_*Math.sin(g))}e.closePath()}}drawHitDetectionCanvas_(e,a){a.translate(e.size/2,e.size/2),this.createPath_(a),a.fillStyle=defaultFillStyle,a.fill(),e.strokeStyle&&(a.strokeStyle=e.strokeStyle,a.lineWidth=e.strokeWidth,e.lineDash&&(a.setLineDash(e.lineDash),a.lineDashOffset=e.lineDashOffset),a.lineJoin=e.lineJoin,a.miterLimit=e.miterLimit,a.stroke())}}class CircleStyle extends RegularShape{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),a=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return a.setOpacity(this.getOpacity()),a}setRadius(e){this.radius_=e,this.render()}}class Fill{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new Fill({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}class Stroke{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Stroke({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Style{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Style({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(a){return a.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function toFunction(i){let e;if(typeof i=="function")e=i;else{let a;Array.isArray(i)?a=i:(assert(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),a=[i]),e=function(){return a}}return e}let defaultStyles=null;function createDefaultStyle(i,e){if(!defaultStyles){const a=new Fill({color:"rgba(255,255,255,0.4)"}),s=new Stroke({color:"#3399CC",width:1.25});defaultStyles=[new Style({image:new CircleStyle({fill:a,stroke:s,radius:5}),fill:a,stroke:s})]}return defaultStyles}function createEditingStyle(){const i={},e=[255,255,255,1],a=[0,153,255,1],s=3;return i.Polygon=[new Style({fill:new Fill({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new Style({stroke:new Stroke({color:e,width:s+2})}),new Style({stroke:new Stroke({color:a,width:s})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new Style({image:new CircleStyle({radius:s*2,fill:new Fill({color:a}),stroke:new Stroke({color:e,width:s/2})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function defaultGeometryFunction(i){return i.getGeometry()}function listenImage(i,e,a){const s=i;let o=!0,c=!1,d=!1;const h=[listenOnce(s,EventType.LOAD,function(){d=!0,c||e()})];return s.src&&IMAGE_DECODE?(c=!0,s.decode().then(function(){o&&e()}).catch(function(g){o&&(d?e():a())})):h.push(listenOnce(s,EventType.ERROR,a)),function(){o=!1,h.forEach(unlistenByKey)}}function load(i,e){return new Promise((a,s)=>{function o(){d(),a(i)}function c(){d(),s(new Error("Image load error"))}function d(){i.removeEventListener("load",o),i.removeEventListener("error",c)}i.addEventListener("load",o),i.addEventListener("error",c)})}function decodeFallback(i,e){return e&&(i.src=e),i.src&&IMAGE_DECODE?new Promise((a,s)=>i.decode().then(()=>a(i)).catch(o=>i.complete&&i.width?a(i):s(o))):load(i)}class IconImageCache{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const a in this.cache_){const s=this.cache_[a];!(e++&3)&&!s.hasListener()&&(delete this.cache_[a],--this.cacheSize_)}}}get(e,a,s){const o=getKey$1(e,a,s);return o in this.cache_?this.cache_[o]:null}set(e,a,s,o){const c=getKey$1(e,a,s);this.cache_[c]=o,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function getKey$1(i,e,a){const s=a?asString(a):"null";return e+":"+i+":"+s}const shared=new IconImageCache;let taintedTestContext=null;class IconImage extends Target{constructor(e,a,s,o,c){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=s,this.canvas_={},this.color_=c,this.imageState_=o===void 0?ImageState.IDLE:o,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=a,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],a=this.size_[1],s=createCanvasContext2D(e,a);s.fillRect(0,0,e,a),this.hitDetectionImage_=s.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ImageState.LOADED)return;const a=this.image_,s=document.createElement("canvas");s.width=Math.ceil(a.width*e),s.height=Math.ceil(a.height*e);const o=s.getContext("2d");o.scale(e,e),o.drawImage(a,0,0),o.globalCompositeOperation="multiply",o.fillStyle=asString(this.color_),o.fillRect(0,0,s.width/e,s.height/e),o.globalCompositeOperation="destination-in",o.drawImage(a,0,0),this.canvas_[e]=s}}function get$2(i,e,a,s,o){let c=e===void 0?void 0:shared.get(e,a,o);return c||(c=new IconImage(i,i instanceof HTMLImageElement?i.src||void 0:e,a,s,o),shared.set(e,a,o,c)),c}function calculateScale(i,e,a,s){return a!==void 0&&s!==void 0?[a/i,s/e]:a!==void 0?a/i:s!==void 0?s/e:1}class Icon extends ImageStyle{constructor(e){e=e||{};const a=e.opacity!==void 0?e.opacity:1,s=e.rotation!==void 0?e.rotation:0,o=e.scale!==void 0?e.scale:1,c=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:a,rotation:s,scale:o,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:c,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const d=e.img!==void 0?e.img:null;let h=e.src;assert(!(h!==void 0&&d),"`image` and `src` cannot be provided at the same time"),(h===void 0||h.length===0)&&d&&(h=d.src||getUid(d)),assert(h!==void 0&&h.length>0,"A defined and non-empty `src` or `image` must be provided"),assert(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let g;if(e.src!==void 0?g=ImageState.IDLE:d!==void 0&&(d instanceof HTMLImageElement?d.complete?g=d.src?ImageState.LOADED:ImageState.IDLE:g=ImageState.LOADING:g=ImageState.LOADED),this.color_=e.color!==void 0?asArray(e.color):null,this.iconImage_=get$2(d,h,this.crossOrigin_,g,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let _,b;if(e.size)[_,b]=e.size;else{const j=this.getImage(1);if(j.width&&j.height)_=j.width,b=j.height;else if(j instanceof HTMLImageElement){this.initialOptions_=e;const $=()=>{if(this.unlistenImageChange($),!this.initialOptions_)return;const _e=this.iconImage_.getSize();this.setScale(calculateScale(_e[0],_e[1],e.width,e.height))};this.listenImageChange($);return}}_!==void 0&&this.setScale(calculateScale(_,b,e.width,e.height))}}clone(){let e,a,s;return this.initialOptions_?(a=this.initialOptions_.width,s=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:a,height:s,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const o=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!o)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=o[0]),this.anchorYUnits_=="fraction"&&(e[1]*=o[1])}if(this.anchorOrigin_!="top-left"){if(!o)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+o[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+o[1])}this.normalizedAnchor_=e}const a=this.getDisplacement(),s=this.getScaleArray();return[e[0]-a[0]/s[0],e[1]+a[1]/s[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const a=this.getSize(),s=this.iconImage_.getSize();if(!a||!s)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=s[0]-a[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=s[1]-a[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(EventType.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(EventType.CHANGE,e)}}const DEFAULT_FILL_COLOR="#333";class Text{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=toSize(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fill({color:DEFAULT_FILL_COLOR}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new Text({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let numTypes=0;const NoneType=0,BooleanType$1=1<<numTypes++,NumberType$1=1<<numTypes++,StringType$1=1<<numTypes++,ColorType$1=1<<numTypes++,NumberArrayType=1<<numTypes++,AnyType=Math.pow(2,numTypes)-1,typeNames={[BooleanType$1]:"boolean",[NumberType$1]:"number",[StringType$1]:"string",[ColorType$1]:"color",[NumberArrayType]:"number[]"},namedTypes=Object.keys(typeNames).map(Number).sort(ascending);function typeName(i){const e=[];for(const a of namedTypes)includesType(i,a)&&e.push(typeNames[a]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function includesType(i,e){return(i&e)===e}function overlapsType(i,e){return!!(i&e)}function isType(i,e){return i===e}class LiteralExpression{constructor(e,a){this.type=e,this.value=a}}class CallExpression{constructor(e,a,...s){this.type=e,this.operator=a,this.args=s}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function getTypeFromHint(i){switch(i){case"string":return StringType$1;case"color":return ColorType$1;case"number":return NumberType$1;case"boolean":return BooleanType$1;case"number[]":return NumberArrayType;default:throw new Error(`Unrecognized type hint: ${i}`)}}function parse$2(i,e,a){switch(typeof i){case"boolean":return new LiteralExpression(BooleanType$1,i);case"number":return new LiteralExpression(NumberType$1,i);case"string":{let o=StringType$1;return isStringColor(i)&&(o|=ColorType$1),isType(o&a,NoneType)||(o&=a),new LiteralExpression(o,i)}}if(!Array.isArray(i))throw new Error("Expression must be an array or a primitive value");if(i.length===0)throw new Error("Empty expression");if(typeof i[0]=="string")return parseCallExpression(i,e,a);for(const o of i)if(typeof o!="number")throw new Error("Expected an array of numbers");let s=NumberArrayType;return(i.length===3||i.length===4)&&(s|=ColorType$1),a&&(s&=a),new LiteralExpression(s,i)}const Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},parsers={[Ops.Get]:createParser(([i,e])=>e!==void 0?getTypeFromHint(e.value):AnyType,withArgsCount(1,2),withGetArgs),[Ops.Var]:createParser(([i])=>i.type,withArgsCount(1,1),withVarArgs),[Ops.Id]:createParser(NumberType$1|StringType$1,withNoArgs,usesFeatureId),[Ops.Concat]:createParser(StringType$1,withArgsCount(2,1/0),parseArgsOfType(AnyType)),[Ops.GeometryType]:createParser(StringType$1,withNoArgs),[Ops.Resolution]:createParser(NumberType$1,withNoArgs),[Ops.Zoom]:createParser(NumberType$1,withNoArgs),[Ops.Time]:createParser(NumberType$1,withNoArgs),[Ops.Any]:createParser(BooleanType$1,withArgsCount(2,1/0),parseArgsOfType(BooleanType$1)),[Ops.All]:createParser(BooleanType$1,withArgsCount(2,1/0),parseArgsOfType(BooleanType$1)),[Ops.Not]:createParser(BooleanType$1,withArgsCount(1,1),parseArgsOfType(BooleanType$1)),[Ops.Equal]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.NotEqual]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThan]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThanOrEqualTo]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThan]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThanOrEqualTo]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.Multiply]:createParser(i=>{let e=NumberType$1|ColorType$1;for(let a=0;a<i.length;a++)e&=i[a].type;return e},withArgsCount(2,1/0),parseArgsOfType(NumberType$1|ColorType$1),narrowArgsType),[Ops.Divide]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Add]:createParser(NumberType$1,withArgsCount(2,1/0),parseArgsOfType(NumberType$1)),[Ops.Subtract]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Clamp]:createParser(NumberType$1,withArgsCount(3,3),parseArgsOfType(NumberType$1)),[Ops.Mod]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Pow]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Abs]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Floor]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Ceil]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Round]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Sin]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Cos]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Atan]:createParser(NumberType$1,withArgsCount(1,2),parseArgsOfType(NumberType$1)),[Ops.Sqrt]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Match]:createParser(i=>{let e=AnyType;for(let a=2;a<i.length;a+=2)e&=i[a].type;return e&=i[i.length-1].type,e},withArgsCount(4,1/0),withEvenArgs,parseMatchArgs),[Ops.Between]:createParser(BooleanType$1,withArgsCount(3,3),parseArgsOfType(NumberType$1)),[Ops.Interpolate]:createParser(i=>{let e=ColorType$1|NumberType$1;for(let a=3;a<i.length;a+=2)e&=i[a].type;return e},withArgsCount(6,1/0),withEvenArgs,parseInterpolateArgs),[Ops.Case]:createParser(i=>{let e=AnyType;for(let a=1;a<i.length;a+=2)e&=i[a].type;return e&=i[i.length-1].type,e},withArgsCount(3,1/0),withOddArgs,parseCaseArgs),[Ops.In]:createParser(BooleanType$1,withArgsCount(2,2),parseInArgs),[Ops.Number]:createParser(NumberType$1,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.String]:createParser(StringType$1,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.Array]:createParser(i=>i.length===3||i.length===4?NumberArrayType|ColorType$1:NumberArrayType,withArgsCount(1,1/0),parseArgsOfType(NumberType$1)),[Ops.Color]:createParser(ColorType$1,withArgsCount(3,4),parseArgsOfType(NumberType$1)),[Ops.Band]:createParser(NumberType$1,withArgsCount(1,3),parseArgsOfType(NumberType$1)),[Ops.Palette]:createParser(ColorType$1,withArgsCount(2,2),parsePaletteArgs)};function withGetArgs(i,e){const a=parse$2(i[1],e);if(!(a instanceof LiteralExpression))throw new Error("Expected a literal argument for get operation");if(typeof a.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(a.value),i.length===3){const s=parse$2(i[2],e);return[a,s]}return[a]}function withVarArgs(i,e,a,s){const o=i[1];if(typeof o!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(o),!("variables"in e.style)||e.style.variables[o]===void 0)return[new LiteralExpression(AnyType,o)];const c=e.style.variables[o],d=parse$2(c,e);if(d.value=o,s&&!overlapsType(s,d.type))throw new Error(`The variable ${o} has type ${typeName(d.type)} but the following type was expected: ${typeName(s)}`);return[d]}function usesFeatureId(i,e){e.featureId=!0}function withNoArgs(i,e){const a=i[0];if(i.length!==1)throw new Error(`Expected no arguments for ${a} operation`);return[]}function withArgsCount(i,e){return function(a,s){const o=a[0],c=a.length-1;if(i===e){if(c!==i){const d=i===1?"":"s";throw new Error(`Expected ${i} argument${d} for ${o}, got ${c}`)}}else if(c<i||c>e){const d=e===1/0?`${i} or more`:`${i} to ${e}`;throw new Error(`Expected ${d} arguments for ${o}, got ${c}`)}}}function parseArgsOfType(i){return function(e,a){const s=e[0],o=e.length-1,c=new Array(o);for(let d=0;d<o;++d){const h=parse$2(e[d+1],a);if(!overlapsType(i,h.type)){const g=typeName(i),_=typeName(h.type);throw new Error(`Unexpected type for argument ${d} of ${s} operation, got ${g} but expected ${_}`)}h.type&=i,c[d]=h}return c}}function narrowArgsType(i,e,a){const s=i[0],o=i.length-1;let c=AnyType;for(let h=0;h<a.length;++h)c&=a[h].type;if(c===NoneType)throw new Error(`No common type could be found for arguments of ${s} operation`);const d=new Array(o);for(let h=0;h<o;++h)d[h]=parse$2(i[h+1],e,c);return d}function withOddArgs(i,e){const a=i[0],s=i.length-1;if(s%2===0)throw new Error(`An odd amount of arguments was expected for operation ${a}, got ${JSON.stringify(s)} instead`)}function withEvenArgs(i,e){const a=i[0],s=i.length-1;if(s%2===1)throw new Error(`An even amount of arguments was expected for operation ${a}, got ${JSON.stringify(s)} instead`)}function parseMatchArgs(i,e,a,s){const o=i.length-1;let d=parse$2(i[1],e).type;const h=parse$2(i[i.length-1],e);let g=s!==void 0?s&h.type:h.type;const _=new Array(o-2);for(let j=0;j<o-2;j+=2){const $=parse$2(i[j+2],e),_e=parse$2(i[j+3],e);d&=$.type,g&=_e.type,_[j]=$,_[j+1]=_e}const b=StringType$1|NumberType$1|BooleanType$1;if(!overlapsType(b,d))throw new Error(`Expected an input of type ${typeName(b)} for the interpolate operation, got ${typeName(d)} instead`);if(isType(g,NoneType))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(i));for(let j=0;j<o-2;j+=2){const $=parse$2(i[j+2],e,d),_e=parse$2(i[j+3],e,g);_[j]=$,_[j+1]=_e}return[parse$2(i[1],e,d),..._,parse$2(i[i.length-1],e,g)]}function parseInterpolateArgs(i,e,a,s){const o=i[1];let c;switch(o[0]){case"linear":c=1;break;case"exponential":if(c=o[1],typeof c!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);break;default:c=null}if(!c)throw new Error(`Invalid interpolation type: ${JSON.stringify(o)}`);c=parse$2(c,e);let d=parse$2(i[2],e);if(!overlapsType(NumberType$1,d.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${typeName(d.type)} instead`);d=parse$2(i[2],e,NumberType$1);const h=new Array(i.length-3);for(let g=0;g<h.length;g+=2){let _=parse$2(i[g+3],e);if(!overlapsType(NumberType$1,_.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${typeName(_.type)} at position ${g+2} instead`);let b=parse$2(i[g+4],e);if(!overlapsType(NumberType$1|ColorType$1,b.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${typeName(b.type)} at position ${g+3} instead`);_=parse$2(i[g+3],e,NumberType$1),b=parse$2(i[g+4],e,NumberType$1|ColorType$1),h[g]=_,h[g+1]=b}return[c,d,...h]}function parseCaseArgs(i,e,a,s){const o=parse$2(i[i.length-1],e);let c=s!==void 0?s&o.type:o.type;const d=new Array(i.length-1);for(let h=0;h<d.length-1;h+=2){const g=parse$2(i[h+1],e),_=parse$2(i[h+2],e);if(!overlapsType(BooleanType$1,g.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${typeName(g.type)} at position ${h} instead`);c&=_.type,d[h]=g,d[h+1]=_}if(isType(c,NoneType))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(i));for(let h=0;h<d.length-1;h+=2)d[h+1]=parse$2(i[h+2],e,c);return d[d.length-1]=parse$2(i[i.length-1],e,c),d}function parseInArgs(i,e){let a=i[2];if(!Array.isArray(a))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof a[0]=="string"){if(a[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(a[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');a=a[1]}let s=StringType$1|NumberType$1;const o=new Array(a.length);for(let d=0;d<o.length;d++){const h=parse$2(a[d],e);s&=h.type,o[d]=h}if(isType(s,NoneType))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(i));return[parse$2(i[1],e,s),...o]}function parsePaletteArgs(i,e){const a=parse$2(i[1],e,NumberType$1);if(a.type!==NumberType$1)throw new Error(`The first argument of palette must be an number, got ${typeName(a.type)} instead`);const s=i[2];if(!Array.isArray(s))throw new Error("The second argument of palette must be an array");const o=new Array(s.length);for(let c=0;c<o.length;c++){const d=parse$2(s[c],e,ColorType$1);if(!(d instanceof LiteralExpression))throw new Error(`The palette color at index ${c} must be a literal value`);if(!overlapsType(d.type,ColorType$1))throw new Error(`The palette color at index ${c} should be of type color, got ${typeName(d.type)} instead`);o[c]=d}return[a,...o]}function createParser(i,...e){return function(a,s,o){const c=a[0];let d=[];for(let g=0;g<e.length;g++)d=e[g](a,s,d,o)||d;let h=typeof i=="function"?i(d):i;if(o!==void 0){if(!overlapsType(h,o))throw new Error(`The following expression was expected to return ${typeName(o)}, but returns ${typeName(h)} instead: ${JSON.stringify(a)}`);h&=o}if(h===NoneType)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(a)}`);return new CallExpression(h,c,...d)}}function parseCallExpression(i,e,a){const s=i[0],o=parsers[s];if(!o)throw new Error(`Unknown operator: ${s}`);return o(i,e,a)}function newEvaluationContext(){return{variables:{},properties:{},resolution:NaN,featureId:null}}function buildExpression(i,e,a){const s=parse$2(i,a);if(!overlapsType(e,s.type)){const o=typeName(e),c=typeName(s.type);throw new Error(`Expected expression to be of type ${o}, got ${c}`)}return compileExpression(s)}function compileExpression(i,e){if(i instanceof LiteralExpression){if(i.type===ColorType$1&&typeof i.value=="string"){const s=fromString(i.value);return function(){return s}}return function(){return i.value}}const a=i.operator;switch(a){case Ops.Number:case Ops.String:return compileAssertionExpression(i);case Ops.Get:case Ops.Var:return compileAccessorExpression(i);case Ops.Id:return s=>s.featureId;case Ops.Concat:{const s=i.args.map(o=>compileExpression(o));return o=>"".concat(...s.map(c=>c(o).toString()))}case Ops.Resolution:return s=>s.resolution;case Ops.Any:case Ops.All:case Ops.Not:return compileLogicalExpression(i);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return compileComparisonExpression(i);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return compileNumericExpression(i);case Ops.Match:return compileMatchExpression(i);case Ops.Interpolate:return compileInterpolateExpression(i);default:throw new Error(`Unsupported operator ${a}`)}}function compileAssertionExpression(i,e){const a=i.operator,s=i.args.length,o=new Array(s);for(let c=0;c<s;++c)o[c]=compileExpression(i.args[c]);switch(a){case Ops.Number:case Ops.String:return c=>{for(let d=0;d<s;++d){const h=o[d](c);if(typeof h===a)return h}throw new Error(`Expected one of the values to be a ${a}`)};default:throw new Error(`Unsupported assertion operator ${a}`)}}function compileAccessorExpression(i,e){const s=i.args[0].value;switch(i.operator){case Ops.Get:return o=>o.properties[s];case Ops.Var:return o=>o.variables[s];default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function compileComparisonExpression(i,e){const a=i.operator,s=compileExpression(i.args[0]),o=compileExpression(i.args[1]);switch(a){case Ops.Equal:return c=>s(c)===o(c);case Ops.NotEqual:return c=>s(c)!==o(c);case Ops.LessThan:return c=>s(c)<o(c);case Ops.LessThanOrEqualTo:return c=>s(c)<=o(c);case Ops.GreaterThan:return c=>s(c)>o(c);case Ops.GreaterThanOrEqualTo:return c=>s(c)>=o(c);default:throw new Error(`Unsupported comparison operator ${a}`)}}function compileLogicalExpression(i,e){const a=i.operator,s=i.args.length,o=new Array(s);for(let c=0;c<s;++c)o[c]=compileExpression(i.args[c]);switch(a){case Ops.Any:return c=>{for(let d=0;d<s;++d)if(o[d](c))return!0;return!1};case Ops.All:return c=>{for(let d=0;d<s;++d)if(!o[d](c))return!1;return!0};case Ops.Not:return c=>!o[0](c);default:throw new Error(`Unsupported logical operator ${a}`)}}function compileNumericExpression(i,e){const a=i.operator,s=i.args.length,o=new Array(s);for(let c=0;c<s;++c)o[c]=compileExpression(i.args[c]);switch(a){case Ops.Multiply:return c=>{let d=1;for(let h=0;h<s;++h)d*=o[h](c);return d};case Ops.Divide:return c=>o[0](c)/o[1](c);case Ops.Add:return c=>{let d=0;for(let h=0;h<s;++h)d+=o[h](c);return d};case Ops.Subtract:return c=>o[0](c)-o[1](c);case Ops.Clamp:return c=>{const d=o[0](c),h=o[1](c);if(d<h)return h;const g=o[2](c);return d>g?g:d};case Ops.Mod:return c=>o[0](c)%o[1](c);case Ops.Pow:return c=>Math.pow(o[0](c),o[1](c));case Ops.Abs:return c=>Math.abs(o[0](c));case Ops.Floor:return c=>Math.floor(o[0](c));case Ops.Ceil:return c=>Math.ceil(o[0](c));case Ops.Round:return c=>Math.round(o[0](c));case Ops.Sin:return c=>Math.sin(o[0](c));case Ops.Cos:return c=>Math.cos(o[0](c));case Ops.Atan:return s===2?c=>Math.atan2(o[0](c),o[1](c)):c=>Math.atan(o[0](c));case Ops.Sqrt:return c=>Math.sqrt(o[0](c));default:throw new Error(`Unsupported numeric operator ${a}`)}}function compileMatchExpression(i,e){const a=i.args.length,s=new Array(a);for(let o=0;o<a;++o)s[o]=compileExpression(i.args[o]);return o=>{const c=s[0](o);for(let d=1;d<a;d+=2)if(c===s[d](o))return s[d+1](o);return s[a-1](o)}}function compileInterpolateExpression(i,e){const a=i.args.length,s=new Array(a);for(let o=0;o<a;++o)s[o]=compileExpression(i.args[o]);return o=>{const c=s[0](o),d=s[1](o);let h,g;for(let _=2;_<a;_+=2){const b=s[_](o);let j=s[_+1](o);const $=Array.isArray(j);if($&&(j=withAlpha(j)),b>=d)return _===2?j:$?interpolateColor(c,d,h,g,b,j):interpolateNumber(c,d,h,g,b,j);h=b,g=j}return g}}function interpolateNumber(i,e,a,s,o,c){const d=o-a;if(d===0)return s;const h=e-a,g=i===1?h/d:(Math.pow(i,h)-1)/(Math.pow(i,d)-1);return s+g*(c-s)}function interpolateColor(i,e,a,s,o,c){if(o-a===0)return s;const h=rgbaToLcha(s),g=rgbaToLcha(c);let _=g[2]-h[2];_>180?_-=360:_<-180&&(_+=360);const b=[interpolateNumber(i,e,a,h[0],o,g[0]),interpolateNumber(i,e,a,h[1],o,g[1]),h[2]+interpolateNumber(i,e,a,0,o,_),interpolateNumber(i,e,a,s[3],o,c[3])];return normalize(lchaToRgba(b))}function always(i){return!0}function rulesToStyleFunction(i){const e=newParsingContext(),a=buildRuleSet(i,e),s=newEvaluationContext();return function(o,c){if(s.properties=o.getPropertiesInternal(),s.resolution=c,e.featureId){const d=o.getId();d!==void 0?s.featureId=d:s.featureId=null}return a(s)}}function flatStylesToStyleFunction(i){const e=newParsingContext(),a=i.length,s=new Array(a);for(let d=0;d<a;++d)s[d]=buildStyle(i[d],e);const o=newEvaluationContext(),c=new Array(a);return function(d,h){if(o.properties=d.getPropertiesInternal(),o.resolution=h,e.featureId){const _=d.getId();_!==void 0?o.featureId=_:o.featureId=null}let g=0;for(let _=0;_<a;++_){const b=s[_](o);b&&(c[g]=b,g+=1)}return c.length=g,c}}function buildRuleSet(i,e){const a=i.length,s=new Array(a);for(let o=0;o<a;++o){const c=i[o],d="filter"in c?buildExpression(c.filter,BooleanType$1,e):always;let h;if(Array.isArray(c.style)){const g=c.style.length;h=new Array(g);for(let _=0;_<g;++_)h[_]=buildStyle(c.style[_],e)}else h=[buildStyle(c.style,e)];s[o]={filter:d,styles:h}}return function(o){const c=[];let d=!1;for(let h=0;h<a;++h){const g=s[h].filter;if(g(o)&&!(i[h].else&&d)){d=!0;for(const _ of s[h].styles){const b=_(o);b&&c.push(b)}}}return c}}function buildStyle(i,e){const a=buildFill(i,"",e),s=buildStroke(i,"",e),o=buildText(i,e),c=buildImage(i,e),d=numberEvaluator(i,"z-index",e);if(!a&&!s&&!o&&!c&&!isEmpty$1(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const h=new Style;return function(g){let _=!0;if(a){const b=a(g);b&&(_=!1),h.setFill(b)}if(s){const b=s(g);b&&(_=!1),h.setStroke(b)}if(o){const b=o(g);b&&(_=!1),h.setText(b)}if(c){const b=c(g);b&&(_=!1),h.setImage(b)}return d&&h.setZIndex(d(g)),_?null:h}}function buildFill(i,e,a){const s=colorLikeEvaluator(i,e+"fill-color",a);if(!s)return null;const o=new Fill;return function(c){const d=s(c);return d==="none"?null:(o.setColor(d),o)}}function buildStroke(i,e,a){const s=numberEvaluator(i,e+"stroke-width",a),o=colorLikeEvaluator(i,e+"stroke-color",a);if(!s&&!o)return null;const c=stringEvaluator(i,e+"stroke-line-cap",a),d=stringEvaluator(i,e+"stroke-line-join",a),h=numberArrayEvaluator(i,e+"stroke-line-dash",a),g=numberEvaluator(i,e+"stroke-line-dash-offset",a),_=numberEvaluator(i,e+"stroke-miter-limit",a),b=new Stroke;return function(j){if(o){const $=o(j);if($==="none")return null;b.setColor($)}if(s&&b.setWidth(s(j)),c){const $=c(j);if($!=="butt"&&$!=="round"&&$!=="square")throw new Error("Expected butt, round, or square line cap");b.setLineCap($)}if(d){const $=d(j);if($!=="bevel"&&$!=="round"&&$!=="miter")throw new Error("Expected bevel, round, or miter line join");b.setLineJoin($)}return h&&b.setLineDash(h(j)),g&&b.setLineDashOffset(g(j)),_&&b.setMiterLimit(_(j)),b}}function buildText(i,e){const a="text-",s=stringEvaluator(i,a+"value",e);if(!s)return null;const o=buildFill(i,a,e),c=buildFill(i,a+"background-",e),d=buildStroke(i,a,e),h=buildStroke(i,a+"background-",e),g=stringEvaluator(i,a+"font",e),_=numberEvaluator(i,a+"max-angle",e),b=numberEvaluator(i,a+"offset-x",e),j=numberEvaluator(i,a+"offset-y",e),$=booleanEvaluator(i,a+"overflow",e),_e=stringEvaluator(i,a+"placement",e),et=numberEvaluator(i,a+"repeat",e),tt=sizeLikeEvaluator(i,a+"scale",e),it=booleanEvaluator(i,a+"rotate-with-view",e),nt=numberEvaluator(i,a+"rotation",e),rt=stringEvaluator(i,a+"align",e),at=stringEvaluator(i,a+"justify",e),st=stringEvaluator(i,a+"baseline",e),ot=numberArrayEvaluator(i,a+"padding",e),dt=new Text({});return function(ut){if(dt.setText(s(ut)),o&&dt.setFill(o(ut)),c&&dt.setBackgroundFill(c(ut)),d&&dt.setStroke(d(ut)),h&&dt.setBackgroundStroke(h(ut)),g&&dt.setFont(g(ut)),_&&dt.setMaxAngle(_(ut)),b&&dt.setOffsetX(b(ut)),j&&dt.setOffsetY(j(ut)),$&&dt.setOverflow($(ut)),_e){const ct=_e(ut);if(ct!=="point"&&ct!=="line")throw new Error("Expected point or line for text-placement");dt.setPlacement(ct)}if(et&&dt.setRepeat(et(ut)),tt&&dt.setScale(tt(ut)),it&&dt.setRotateWithView(it(ut)),nt&&dt.setRotation(nt(ut)),rt){const ct=rt(ut);if(ct!=="left"&&ct!=="center"&&ct!=="right"&&ct!=="end"&&ct!=="start")throw new Error("Expected left, right, center, start, or end for text-align");dt.setTextAlign(ct)}if(at){const ct=at(ut);if(ct!=="left"&&ct!=="right"&&ct!=="center")throw new Error("Expected left, right, or center for text-justify");dt.setJustify(ct)}if(st){const ct=st(ut);if(ct!=="bottom"&&ct!=="top"&&ct!=="middle"&&ct!=="alphabetic"&&ct!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");dt.setTextBaseline(ct)}return ot&&dt.setPadding(ot(ut)),dt}}function buildImage(i,e){return"icon-src"in i?buildIcon(i,e):"shape-points"in i?buildShape(i,e):"circle-radius"in i?buildCircle(i,e):null}function buildIcon(i,e){const a="icon-",s=a+"src",o=requireString(i[s],s),c=coordinateEvaluator(i,a+"anchor",e),d=sizeLikeEvaluator(i,a+"scale",e),h=numberEvaluator(i,a+"opacity",e),g=coordinateEvaluator(i,a+"displacement",e),_=numberEvaluator(i,a+"rotation",e),b=booleanEvaluator(i,a+"rotate-with-view",e),j=optionalIconOrigin(i,a+"anchor-origin"),$=optionalIconAnchorUnits(i,a+"anchor-x-units"),_e=optionalIconAnchorUnits(i,a+"anchor-y-units"),et=optionalColorLike(i,a+"color"),tt=optionalString(i,a+"cross-origin"),it=optionalNumberArray(i,a+"offset"),nt=optionalIconOrigin(i,a+"offset-origin"),rt=optionalNumber(i,a+"width"),at=optionalNumber(i,a+"height"),st=optionalSize(i,a+"size"),ot=optionalDeclutterMode(i,a+"declutter"),dt=new Icon({src:o,anchorOrigin:j,anchorXUnits:$,anchorYUnits:_e,color:et,crossOrigin:tt,offset:it,offsetOrigin:nt,height:at,width:rt,size:st,declutterMode:ot});return function(ut){return h&&dt.setOpacity(h(ut)),g&&dt.setDisplacement(g(ut)),_&&dt.setRotation(_(ut)),b&&dt.setRotateWithView(b(ut)),d&&dt.setScale(d(ut)),c&&dt.setAnchor(c(ut)),dt}}function buildShape(i,e){const a="shape-",s=a+"points",o=requireNumber(i[s],s),c=buildFill(i,a,e),d=buildStroke(i,a,e),h=sizeLikeEvaluator(i,a+"scale",e),g=coordinateEvaluator(i,a+"displacement",e),_=numberEvaluator(i,a+"rotation",e),b=booleanEvaluator(i,a+"rotate-with-view",e),j=optionalNumber(i,a+"radius"),$=optionalNumber(i,a+"radius1"),_e=optionalNumber(i,a+"radius2"),et=optionalNumber(i,a+"angle"),tt=optionalDeclutterMode(i,a+"declutter-mode"),it=new RegularShape({points:o,radius:j,radius1:$,radius2:_e,angle:et,declutterMode:tt});return function(nt){return c&&it.setFill(c(nt)),d&&it.setStroke(d(nt)),g&&it.setDisplacement(g(nt)),_&&it.setRotation(_(nt)),b&&it.setRotateWithView(b(nt)),h&&it.setScale(h(nt)),it}}function buildCircle(i,e){const a="circle-",s=buildFill(i,a,e),o=buildStroke(i,a,e),c=numberEvaluator(i,a+"radius",e),d=sizeLikeEvaluator(i,a+"scale",e),h=coordinateEvaluator(i,a+"displacement",e),g=numberEvaluator(i,a+"rotation",e),_=booleanEvaluator(i,a+"rotate-with-view",e),b=optionalDeclutterMode(i,a+"declutter-mode"),j=new CircleStyle({radius:5,declutterMode:b});return function($){return c&&j.setRadius(c($)),s&&j.setFill(s($)),o&&j.setStroke(o($)),h&&j.setDisplacement(h($)),g&&j.setRotation(g($)),_&&j.setRotateWithView(_($)),d&&j.setScale(d($)),j}}function numberEvaluator(i,e,a){if(!(e in i))return;const s=buildExpression(i[e],NumberType$1,a);return function(o){return requireNumber(s(o),e)}}function stringEvaluator(i,e,a){if(!(e in i))return null;const s=buildExpression(i[e],StringType$1,a);return function(o){return requireString(s(o),e)}}function booleanEvaluator(i,e,a){if(!(e in i))return null;const s=buildExpression(i[e],BooleanType$1,a);return function(o){const c=s(o);if(typeof c!="boolean")throw new Error(`Expected a boolean for ${e}`);return c}}function colorLikeEvaluator(i,e,a){if(!(e in i))return null;const s=buildExpression(i[e],ColorType$1|StringType$1,a);return function(o){return requireColorLike(s(o),e)}}function numberArrayEvaluator(i,e,a){if(!(e in i))return null;const s=buildExpression(i[e],NumberArrayType,a);return function(o){return requireNumberArray(s(o),e)}}function coordinateEvaluator(i,e,a){if(!(e in i))return null;const s=buildExpression(i[e],NumberArrayType,a);return function(o){const c=requireNumberArray(s(o),e);if(c.length!==2)throw new Error(`Expected two numbers for ${e}`);return c}}function sizeLikeEvaluator(i,e,a){if(!(e in i))return null;const s=buildExpression(i[e],NumberArrayType|NumberType$1,a);return function(o){return requireSizeLike(s(o),e)}}function optionalNumber(i,e){const a=i[e];if(a!==void 0){if(typeof a!="number")throw new Error(`Expected a number for ${e}`);return a}}function optionalSize(i,e){const a=i[e];if(a!==void 0){if(typeof a=="number")return toSize(a);if(!Array.isArray(a))throw new Error(`Expected a number or size array for ${e}`);if(a.length!==2||typeof a[0]!="number"||typeof a[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return a}}function optionalString(i,e){const a=i[e];if(a!==void 0){if(typeof a!="string")throw new Error(`Expected a string for ${e}`);return a}}function optionalIconOrigin(i,e){const a=i[e];if(a!==void 0){if(a!=="bottom-left"&&a!=="bottom-right"&&a!=="top-left"&&a!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return a}}function optionalIconAnchorUnits(i,e){const a=i[e];if(a!==void 0){if(a!=="pixels"&&a!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return a}}function optionalNumberArray(i,e){const a=i[e];if(a!==void 0)return requireNumberArray(a,e)}function optionalDeclutterMode(i,e){const a=i[e];if(a!==void 0){if(typeof a!="string")throw new Error(`Expected a string for ${e}`);if(a!=="declutter"&&a!=="obstacle"&&a!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return a}}function optionalColorLike(i,e){const a=i[e];if(a!==void 0)return requireColorLike(a,e)}function requireNumberArray(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const a=i.length;for(let s=0;s<a;++s)if(typeof i[s]!="number")throw new Error(`Expected an array of numbers for ${e}`);return i}function requireString(i,e){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);return i}function requireNumber(i,e){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}function requireColorLike(i,e){if(typeof i=="string")return i;const a=requireNumberArray(i,e),s=a.length;if(s<3||s>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return a}function requireSizeLike(i,e){if(typeof i=="number")return i;const a=requireNumberArray(i,e);if(a.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return a}const Property$2={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer{constructor(e){e=e||{};const a=Object.assign({},e);delete a.style,delete a.renderBuffer,delete a.updateWhileAnimating,delete a.updateWhileInteracting,super(a),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property$2.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new RBush$1(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(Property$2.RENDER_ORDER,e)}setStyle(e){this.style_=toStyleLike(e),this.styleFunction_=e===null?void 0:toFunction(this.style_),this.changed()}}function toStyleLike(i){if(i===void 0)return createDefaultStyle;if(!i)return null;if(typeof i=="function"||i instanceof Style)return i;if(!Array.isArray(i))return flatStylesToStyleFunction([i]);if(i.length===0)return[];const e=i.length,a=i[0];if(a instanceof Style){const o=new Array(e);for(let c=0;c<e;++c){const d=i[c];if(!(d instanceof Style))throw new Error("Expected a list of style instances");o[c]=d}return o}if("style"in a){const o=new Array(e);for(let c=0;c<e;++c){const d=i[c];if(!("style"in d))throw new Error("Expected a list of rules with a style property");o[c]=d}return rulesToStyleFunction(o)}return flatStylesToStyleFunction(i)}const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];class VectorContext{drawCustom(e,a,s,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,a){}drawFeature(e,a){}drawGeometryCollection(e,a){}drawLineString(e,a){}drawMultiLineString(e,a){}drawMultiPoint(e,a){}drawMultiPolygon(e,a){}drawPoint(e,a){}drawPolygon(e,a){}drawText(e,a){}setFillStrokeStyle(e,a){}setImageStyle(e,a){}setTextStyle(e,a){}}class CanvasBuilder extends VectorContext{constructor(e,a,s,o){super(),this.tolerance=e,this.maxExtent=a,this.pixelRatio=o,this.maxLineWidth=0,this.resolution=s,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const a=this.pixelRatio;return a==1?e:e.map(function(s){return s*a})}appendFlatPointCoordinates(e,a){const s=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,c=this.coordinates;let d=c.length;for(let h=0,g=e.length;h<g;h+=a)o[0]=e[h],o[1]=e[h+1],containsCoordinate(s,o)&&(c[d++]=o[0],c[d++]=o[1]);return d}appendFlatLineCoordinates(e,a,s,o,c,d){const h=this.coordinates;let g=h.length;const _=this.getBufferedMaxExtent();d&&(a+=o);let b=e[a],j=e[a+1];const $=this.tmpCoordinate_;let _e=!0,et,tt,it;for(et=a+o;et<s;et+=o)$[0]=e[et],$[1]=e[et+1],it=coordinateRelationship(_,$),it!==tt?(_e&&(h[g++]=b,h[g++]=j,_e=!1),h[g++]=$[0],h[g++]=$[1]):it===Relationship.INTERSECTING?(h[g++]=$[0],h[g++]=$[1],_e=!1):_e=!0,b=$[0],j=$[1],tt=it;return(c&&_e||et===a+o)&&(h[g++]=b,h[g++]=j),g}drawCustomCoordinates_(e,a,s,o,c){for(let d=0,h=s.length;d<h;++d){const g=s[d],_=this.appendFlatLineCoordinates(e,a,g,o,!1,!1);c.push(_),a=g}return a}drawCustom(e,a,s,o){this.beginGeometry(e,a);const c=e.getType(),d=e.getStride(),h=this.coordinates.length;let g,_,b,j,$;switch(c){case"MultiPolygon":g=e.getOrientedFlatCoordinates(),j=[];const _e=e.getEndss();$=0;for(let et=0,tt=_e.length;et<tt;++et){const it=[];$=this.drawCustomCoordinates_(g,$,_e[et],d,it),j.push(it)}this.instructions.push([Instruction.CUSTOM,h,j,e,s,inflateMultiCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,h,j,e,o||s,inflateMultiCoordinatesArray]);break;case"Polygon":case"MultiLineString":b=[],g=c=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),$=this.drawCustomCoordinates_(g,0,e.getEnds(),d,b),this.instructions.push([Instruction.CUSTOM,h,b,e,s,inflateCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,h,b,e,o||s,inflateCoordinatesArray]);break;case"LineString":case"Circle":g=e.getFlatCoordinates(),_=this.appendFlatLineCoordinates(g,0,g.length,d,!1,!1),this.instructions.push([Instruction.CUSTOM,h,_,e,s,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,h,_,e,o||s,inflateCoordinates]);break;case"MultiPoint":g=e.getFlatCoordinates(),_=this.appendFlatPointCoordinates(g,d),_>h&&(this.instructions.push([Instruction.CUSTOM,h,_,e,s,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,h,_,e,o||s,inflateCoordinates]));break;case"Point":g=e.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),_=this.coordinates.length,this.instructions.push([Instruction.CUSTOM,h,_,e,s]),this.hitDetectionInstructions.push([Instruction.CUSTOM,h,_,e,o||s]);break}this.endGeometry(a)}beginGeometry(e,a){this.beginGeometryInstruction1_=[Instruction.BEGIN_GEOMETRY,a,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Instruction.BEGIN_GEOMETRY,a,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let a;const s=e.length;let o,c,d=-1;for(a=0;a<s;++a)o=e[a],c=o[0],c==Instruction.END_GEOMETRY?d=a:c==Instruction.BEGIN_GEOMETRY&&(o[2]=a,reverseSubArray(this.hitDetectionInstructions,d,a),d=-1)}setFillStrokeStyle(e,a){const s=this.state;if(e){const o=e.getColor();s.fillStyle=asColorLike(o||defaultFillStyle)}else s.fillStyle=void 0;if(a){const o=a.getColor();s.strokeStyle=asColorLike(o||defaultStrokeStyle);const c=a.getLineCap();s.lineCap=c!==void 0?c:defaultLineCap;const d=a.getLineDash();s.lineDash=d?d.slice():defaultLineDash;const h=a.getLineDashOffset();s.lineDashOffset=h||defaultLineDashOffset;const g=a.getLineJoin();s.lineJoin=g!==void 0?g:defaultLineJoin;const _=a.getWidth();s.lineWidth=_!==void 0?_:defaultLineWidth;const b=a.getMiterLimit();s.miterLimit=b!==void 0?b:defaultMiterLimit,s.lineWidth>this.maxLineWidth&&(this.maxLineWidth=s.lineWidth,this.bufferedMaxExtent_=null)}else s.strokeStyle=void 0,s.lineCap=void 0,s.lineDash=null,s.lineDashOffset=void 0,s.lineJoin=void 0,s.lineWidth=void 0,s.miterLimit=void 0}createFill(e){const a=e.fillStyle,s=[Instruction.SET_FILL_STYLE,a];return typeof a!="string"&&s.push(!0),s}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,a){const s=e.fillStyle;(typeof s!="string"||e.currentFillStyle!=s)&&(s!==void 0&&this.instructions.push(a.call(this,e)),e.currentFillStyle=s)}updateStrokeStyle(e,a){const s=e.strokeStyle,o=e.lineCap,c=e.lineDash,d=e.lineDashOffset,h=e.lineJoin,g=e.lineWidth,_=e.miterLimit;(e.currentStrokeStyle!=s||e.currentLineCap!=o||c!=e.currentLineDash&&!equals$2(e.currentLineDash,c)||e.currentLineDashOffset!=d||e.currentLineJoin!=h||e.currentLineWidth!=g||e.currentMiterLimit!=_)&&(s!==void 0&&a.call(this,e),e.currentStrokeStyle=s,e.currentLineCap=o,e.currentLineDash=c,e.currentLineDashOffset=d,e.currentLineJoin=h,e.currentLineWidth=g,e.currentMiterLimit=_)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const a=[Instruction.END_GEOMETRY,e];this.instructions.push(a),this.hitDetectionInstructions.push(a)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone$1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class CanvasImageBuilder extends CanvasBuilder{constructor(e,a,s,o){super(e,a,s,o),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,a){if(!this.image_)return;this.beginGeometry(e,a);const s=e.getFlatCoordinates(),o=e.getStride(),c=this.coordinates.length,d=this.appendFlatPointCoordinates(s,o);this.instructions.push([Instruction.DRAW_IMAGE,c,d,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,c,d,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(a)}drawMultiPoint(e,a){if(!this.image_)return;this.beginGeometry(e,a);const s=e.getFlatCoordinates(),o=e.getStride(),c=this.coordinates.length,d=this.appendFlatPointCoordinates(s,o);this.instructions.push([Instruction.DRAW_IMAGE,c,d,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,c,d,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(a)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,a){const s=e.getAnchor(),o=e.getSize(),c=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=s[0],this.anchorY_=s[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=e.getOpacity(),this.originX_=c[0],this.originY_=c[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=o[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=a}}class CanvasLineStringBuilder extends CanvasBuilder{constructor(e,a,s,o){super(e,a,s,o)}drawFlatCoordinates_(e,a,s,o){const c=this.coordinates.length,d=this.appendFlatLineCoordinates(e,a,s,o,!1,!1),h=[Instruction.MOVE_TO_LINE_TO,c,d];return this.instructions.push(h),this.hitDetectionInstructions.push(h),s}drawLineString(e,a){const s=this.state,o=s.strokeStyle,c=s.lineWidth;if(o===void 0||c===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,a),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const d=e.getFlatCoordinates(),h=e.getStride();this.drawFlatCoordinates_(d,0,d.length,h),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(a)}drawMultiLineString(e,a){const s=this.state,o=s.strokeStyle,c=s.lineWidth;if(o===void 0||c===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,a),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const d=e.getEnds(),h=e.getFlatCoordinates(),g=e.getStride();let _=0;for(let b=0,j=d.length;b<j;++b)_=this.drawFlatCoordinates_(h,_,d[b],g);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(a)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(beginPathInstruction)}}class CanvasPolygonBuilder extends CanvasBuilder{constructor(e,a,s,o){super(e,a,s,o)}drawFlatCoordinatess_(e,a,s,o){const c=this.state,d=c.fillStyle!==void 0,h=c.strokeStyle!==void 0,g=s.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let _=0;_<g;++_){const b=s[_],j=this.coordinates.length,$=this.appendFlatLineCoordinates(e,a,b,o,!0,!h),_e=[Instruction.MOVE_TO_LINE_TO,j,$];this.instructions.push(_e),this.hitDetectionInstructions.push(_e),h&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),a=b}return d&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),h&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),a}drawCircle(e,a){const s=this.state,o=s.fillStyle,c=s.strokeStyle;if(o===void 0&&c===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,a),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,defaultLineDash,defaultLineDashOffset]);const d=e.getFlatCoordinates(),h=e.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(d,0,d.length,h,!1,!1);const _=[Instruction.CIRCLE,g];this.instructions.push(beginPathInstruction,_),this.hitDetectionInstructions.push(beginPathInstruction,_),s.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),s.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(a)}drawPolygon(e,a){const s=this.state,o=s.fillStyle,c=s.strokeStyle;if(o===void 0&&c===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,a),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,defaultLineDash,defaultLineDashOffset]);const d=e.getEnds(),h=e.getOrientedFlatCoordinates(),g=e.getStride();this.drawFlatCoordinatess_(h,0,d,g),this.endGeometry(a)}drawMultiPolygon(e,a){const s=this.state,o=s.fillStyle,c=s.strokeStyle;if(o===void 0&&c===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,a),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,defaultLineDash,defaultLineDashOffset]);const d=e.getEndss(),h=e.getOrientedFlatCoordinates(),g=e.getStride();let _=0;for(let b=0,j=d.length;b<j;++b)_=this.drawFlatCoordinatess_(h,_,d[b],g);this.endGeometry(a)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const a=this.coordinates;for(let s=0,o=a.length;s<o;++s)a[s]=snap(a[s],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function lineChunk(i,e,a,s,o){const c=[];let d=a,h=0,g=e.slice(a,2);for(;h<i&&d+o<s;){const[_,b]=g.slice(-2),j=e[d+o],$=e[d+o+1],_e=Math.sqrt((j-_)*(j-_)+($-b)*($-b));if(h+=_e,h>=i){const et=(i-h+_e)/_e,tt=lerp(_,j,et),it=lerp(b,$,et);g.push(tt,it),c.push(g),g=[tt,it],h==i&&(d+=o),h=0}else if(h<i)g.push(e[d+o],e[d+o+1]),d+=o;else{const et=_e-h,tt=lerp(_,j,et/_e),it=lerp(b,$,et/_e);g.push(tt,it),c.push(g),g=[tt,it],h=0,d+=o}}return h>0&&c.push(g),c}function matchingChunk(i,e,a,s,o){let c=a,d=a,h=0,g=0,_=a,b,j,$,_e,et,tt,it,nt,rt,at;for(j=a;j<s;j+=o){const st=e[j],ot=e[j+1];et!==void 0&&(rt=st-et,at=ot-tt,_e=Math.sqrt(rt*rt+at*at),it!==void 0&&(g+=$,b=Math.acos((it*rt+nt*at)/($*_e)),b>i&&(g>h&&(h=g,c=_,d=j),g=0,_=j-o)),$=_e,it=rt,nt=at),et=st,tt=ot}return g+=_e,g>h?[_,j]:[c,d]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends CanvasBuilder{constructor(e,a,s,o){super(e,a,s,o),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[defaultFillStyle]={fillStyle:defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,a){const s=this.textFillState_,o=this.textStrokeState_,c=this.textState_;if(this.text_===""||!c||!s&&!o)return;const d=this.coordinates;let h=d.length;const g=e.getType();let _=null,b=e.getStride();if(c.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!intersects$1(this.getBufferedMaxExtent(),e.getExtent()))return;let j;if(_=e.getFlatCoordinates(),g=="LineString")j=[_.length];else if(g=="MultiLineString")j=e.getEnds();else if(g=="Polygon")j=e.getEnds().slice(0,1);else if(g=="MultiPolygon"){const tt=e.getEndss();j=[];for(let it=0,nt=tt.length;it<nt;++it)j.push(tt[it][0])}this.beginGeometry(e,a);const $=c.repeat,_e=$?void 0:c.textAlign;let et=0;for(let tt=0,it=j.length;tt<it;++tt){let nt;$?nt=lineChunk($*this.resolution,_,et,j[tt],b):nt=[_.slice(et,j[tt])];for(let rt=0,at=nt.length;rt<at;++rt){const st=nt[rt];let ot=0,dt=st.length;if(_e==null){const ct=matchingChunk(c.maxAngle,st,0,st.length,2);ot=ct[0],dt=ct[1]}for(let ct=ot;ct<dt;ct+=b)d.push(st[ct],st[ct+1]);const ut=d.length;et=j[tt],this.drawChars_(h,ut),h=ut}}this.endGeometry(a)}else{let j=c.overflow?null:[];switch(g){case"Point":case"MultiPoint":_=e.getFlatCoordinates();break;case"LineString":_=e.getFlatMidpoint();break;case"Circle":_=e.getCenter();break;case"MultiLineString":_=e.getFlatMidpoints(),b=2;break;case"Polygon":_=e.getFlatInteriorPoint(),c.overflow||j.push(_[2]/this.resolution),b=3;break;case"MultiPolygon":const nt=e.getFlatInteriorPoints();_=[];for(let rt=0,at=nt.length;rt<at;rt+=3)c.overflow||j.push(nt[rt+2]/this.resolution),_.push(nt[rt],nt[rt+1]);if(_.length===0)return;b=2;break}const $=this.appendFlatPointCoordinates(_,b);if($===h)return;if(j&&($-h)/2!==_.length/b){let nt=h/2;j=j.filter((rt,at)=>{const st=d[(nt+at)*2]===_[at*b]&&d[(nt+at)*2+1]===_[at*b+1];return st||--nt,st})}this.saveTextStates_(),(c.backgroundFill||c.backgroundStroke)&&(this.setFillStrokeStyle(c.backgroundFill,c.backgroundStroke),c.backgroundFill&&this.updateFillStyle(this.state,this.createFill),c.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,a);let _e=c.padding;if(_e!=defaultPadding&&(c.scale[0]<0||c.scale[1]<0)){let nt=c.padding[0],rt=c.padding[1],at=c.padding[2],st=c.padding[3];c.scale[0]<0&&(rt=-rt,st=-st),c.scale[1]<0&&(nt=-nt,at=-at),_e=[nt,rt,at,st]}const et=this.pixelRatio;this.instructions.push([Instruction.DRAW_IMAGE,h,$,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,_e==defaultPadding?defaultPadding:_e.map(function(nt){return nt*et}),!!c.backgroundFill,!!c.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,j]);const tt=1/et,it=this.state.fillStyle;c.backgroundFill&&(this.state.fillStyle=defaultFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,h,$,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[tt,tt],NaN,void 0,this.declutterImageWithText_,_e,!!c.backgroundFill,!!c.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,j]),c.backgroundFill&&(this.state.fillStyle=it,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(a)}}saveTextStates_(){const e=this.textStrokeState_,a=this.textState_,s=this.textFillState_,o=this.strokeKey_;e&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const c=this.textKey_;c in this.textStates||(this.textStates[c]={font:a.font,textAlign:a.textAlign||defaultTextAlign,justify:a.justify,textBaseline:a.textBaseline||defaultTextBaseline,scale:a.scale});const d=this.fillKey_;s&&(d in this.fillStates||(this.fillStates[d]={fillStyle:s.fillStyle}))}drawChars_(e,a){const s=this.textStrokeState_,o=this.textState_,c=this.strokeKey_,d=this.textKey_,h=this.fillKey_;this.saveTextStates_();const g=this.pixelRatio,_=TEXT_ALIGN[o.textBaseline],b=this.textOffsetY_*g,j=this.text_,$=s?s.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([Instruction.DRAW_CHARS,e,a,_,o.overflow,h,o.maxAngle,g,b,c,$*g,j,d,1]),this.hitDetectionInstructions.push([Instruction.DRAW_CHARS,e,a,_,o.overflow,h&&defaultFillStyle,o.maxAngle,g,b,c,$*g,j,d,1/g])}setTextStyle(e,a){let s,o,c;if(!e)this.text_="";else{const d=e.getFill();d?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=asColorLike(d.getColor()||defaultFillStyle)):(o=null,this.textFillState_=o);const h=e.getStroke();if(!h)c=null,this.textStrokeState_=c;else{c=this.textStrokeState_,c||(c={},this.textStrokeState_=c);const et=h.getLineDash(),tt=h.getLineDashOffset(),it=h.getWidth(),nt=h.getMiterLimit();c.lineCap=h.getLineCap()||defaultLineCap,c.lineDash=et?et.slice():defaultLineDash,c.lineDashOffset=tt===void 0?defaultLineDashOffset:tt,c.lineJoin=h.getLineJoin()||defaultLineJoin,c.lineWidth=it===void 0?defaultLineWidth:it,c.miterLimit=nt===void 0?defaultMiterLimit:nt,c.strokeStyle=asColorLike(h.getColor()||defaultStrokeStyle)}s=this.textState_;const g=e.getFont()||defaultFont;registerFont(g);const _=e.getScaleArray();s.overflow=e.getOverflow(),s.font=g,s.maxAngle=e.getMaxAngle(),s.placement=e.getPlacement(),s.textAlign=e.getTextAlign(),s.repeat=e.getRepeat(),s.justify=e.getJustify(),s.textBaseline=e.getTextBaseline()||defaultTextBaseline,s.backgroundFill=e.getBackgroundFill(),s.backgroundStroke=e.getBackgroundStroke(),s.padding=e.getPadding()||defaultPadding,s.scale=_===void 0?[1,1]:_;const b=e.getOffsetX(),j=e.getOffsetY(),$=e.getRotateWithView(),_e=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=b===void 0?0:b,this.textOffsetY_=j===void 0?0:j,this.textRotateWithView_=$===void 0?!1:$,this.textRotation_=_e===void 0?0:_e,this.strokeKey_=c?(typeof c.strokeStyle=="string"?c.strokeStyle:getUid(c.strokeStyle))+c.lineCap+c.lineDashOffset+"|"+c.lineWidth+c.lineJoin+c.miterLimit+"["+c.lineDash.join()+"]":"",this.textKey_=s.font+s.scale+(s.textAlign||"?")+(s.repeat||"?")+(s.justify||"?")+(s.textBaseline||"?"),this.fillKey_=o?typeof o.fillStyle=="string"?o.fillStyle:"|"+getUid(o.fillStyle):""}this.declutterImageWithText_=a}}const BATCH_CONSTRUCTORS={Circle:CanvasPolygonBuilder,Default:CanvasBuilder,Image:CanvasImageBuilder,LineString:CanvasLineStringBuilder,Polygon:CanvasPolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(e,a,s,o){this.tolerance_=e,this.maxExtent_=a,this.pixelRatio_=o,this.resolution_=s,this.buildersByZIndex_={}}finish(){const e={};for(const a in this.buildersByZIndex_){e[a]=e[a]||{};const s=this.buildersByZIndex_[a];for(const o in s){const c=s[o].finish();e[a][o]=c}}return e}getBuilder(e,a){const s=e!==void 0?e.toString():"0";let o=this.buildersByZIndex_[s];o===void 0&&(o={},this.buildersByZIndex_[s]=o);let c=o[a];if(c===void 0){const d=BATCH_CONSTRUCTORS[a];c=new d(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),o[a]=c}return c}}class LayerRenderer extends Observable{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return abstract()}getData(e){return null}prepareFrame(e){return abstract()}renderFrame(e,a){return abstract()}loadedTileCallback(e,a,s){e[a]||(e[a]={}),e[a][s.tileCoord.toString()]=s}createLoadedTileFinder(e,a,s){return(o,c)=>{const d=this.loadedTileCallback.bind(this,s,o);return e.forEachLoadedTile(a,o,c,d)}}forEachFeatureAtCoordinate(e,a,s,o,c){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const a=e.target;(a.getState()===ImageState.LOADED||a.getState()===ImageState.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let a=e.getState();return a!=ImageState.LOADED&&a!=ImageState.ERROR&&e.addEventListener(EventType.CHANGE,this.boundHandleImageChange_),a==ImageState.IDLE&&(e.load(),a=e.getState()),a==ImageState.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}class RenderEvent extends BaseEvent{constructor(e,a,s,o){super(e),this.inversePixelTransform=a,this.frameState=s,this.context=o}}const canvasPool$2=[];let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class CanvasLayerRenderer extends LayerRenderer{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=create(),this.pixelTransform=create(),this.inversePixelTransform=create(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,a,s){pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);let o;try{pixelContext.drawImage(e,a,s,1,1,0,0,1,1),o=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return o}getBackground(e){let s=this.getLayer().getBackground();return typeof s=="function"&&(s=s(e.viewState.resolution)),s||void 0}useContainer(e,a,s){const o=this.getLayer().getClassName();let c,d;if(e&&e.className===o&&(!s||e&&e.style.backgroundColor&&equals$2(asArray(e.style.backgroundColor),asArray(s)))){const h=e.firstElementChild;h instanceof HTMLCanvasElement&&(d=h.getContext("2d"))}if(d&&d.canvas.style.transform===a?(this.container=e,this.context=d,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){c=document.createElement("div"),c.className=o;let h=c.style;h.position="absolute",h.width="100%",h.height="100%",d=createCanvasContext2D();const g=d.canvas;c.appendChild(g),h=g.style,h.position="absolute",h.left="0",h.transformOrigin="top left",this.container=c,this.context=d}!this.containerReused&&s&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=s)}clipUnrotated(e,a,s){const o=getTopLeft(s),c=getTopRight(s),d=getBottomRight(s),h=getBottomLeft(s);apply(a.coordinateToPixelTransform,o),apply(a.coordinateToPixelTransform,c),apply(a.coordinateToPixelTransform,d),apply(a.coordinateToPixelTransform,h);const g=this.inversePixelTransform;apply(g,o),apply(g,c),apply(g,d),apply(g,h),e.save(),e.beginPath(),e.moveTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.lineTo(Math.round(d[0]),Math.round(d[1])),e.lineTo(Math.round(h[0]),Math.round(h[1])),e.clip()}dispatchRenderEvent_(e,a,s){const o=this.getLayer();if(o.hasListener(e)){const c=new RenderEvent(e,this.inversePixelTransform,s,a);o.dispatchEvent(c)}}preRender(e,a){this.frameState=a,this.dispatchRenderEvent_(RenderEventType.PRERENDER,e,a)}postRender(e,a){this.dispatchRenderEvent_(RenderEventType.POSTRENDER,e,a)}getRenderTransform(e,a,s,o,c,d,h){const g=c/2,_=d/2,b=o/a,j=-b,$=-e[0]+h,_e=-e[1];return compose(this.tempTransform,g,_,b,j,-s,$,_e)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function drawTextOnPath(i,e,a,s,o,c,d,h,g,_,b,j){let $=i[e],_e=i[e+1],et=0,tt=0,it=0,nt=0;function rt(){et=$,tt=_e,e+=s,$=i[e],_e=i[e+1],nt+=it,it=Math.sqrt(($-et)*($-et)+(_e-tt)*(_e-tt))}do rt();while(e<a-s&&nt+it<c);let at=it===0?0:(c-nt)/it;const st=lerp(et,$,at),ot=lerp(tt,_e,at),dt=e-s,ut=nt,ct=c+h*g(_,o,b);for(;e<a-s&&nt+it<ct;)rt();at=it===0?0:(ct-nt)/it;const ht=lerp(et,$,at),mt=lerp(tt,_e,at);let pt;if(j){const St=[st,ot,ht,mt];rotate(St,0,4,2,j,St,St),pt=St[0]>St[2]}else pt=st>ht;const ft=Math.PI,yt=[],Ct=dt+s===e;e=dt,it=0,nt=ut,$=i[e],_e=i[e+1];let _t;if(Ct){rt(),_t=Math.atan2(_e-tt,$-et),pt&&(_t+=_t>0?-ft:ft);const St=(ht+st)/2,Pt=(mt+ot)/2;return yt[0]=[St,Pt,(ct-c)/2,_t,o],yt}o=o.replace(/\n/g," ");for(let St=0,Pt=o.length;St<Pt;){rt();let bt=Math.atan2(_e-tt,$-et);if(pt&&(bt+=bt>0?-ft:ft),_t!==void 0){let jt=bt-_t;if(jt+=jt>ft?-2*ft:jt<-ft?2*ft:0,Math.abs(jt)>d)return null}_t=bt;const Mt=St;let It=0;for(;St<Pt;++St){const jt=pt?Pt-St-1:St,Ft=h*g(_,o[jt],b);if(e+s<a&&nt+it<c+It+Ft/2)break;It+=Ft}if(St===Mt)continue;const Nt=pt?o.substring(Pt-Mt,Pt-St):o.substring(Mt,St);at=it===0?0:(c+It/2-nt)/it;const wt=lerp(et,$,at),Wt=lerp(tt,_e,at);yt.push([wt,Wt,It/2,bt,Nt]),c+=It}return yt}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(i){return i[3].declutterBox}const rtlRegEx=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function horizontalTextAlign(i,e){return e==="start"?e=rtlRegEx.test(i)?"right":"left":e==="end"&&(e=rtlRegEx.test(i)?"left":"right"),TEXT_ALIGN[e]}function createTextChunks(i,e,a){return a>0&&i.push(`
`,""),i.push(e,""),i}class Executor{constructor(e,a,s,o){this.overlaps=s,this.pixelRatio=a,this.resolution=e,this.alignFill_,this.instructions=o.instructions,this.coordinates=o.coordinates,this.coordinateCache_={},this.renderedTransform_=create(),this.hitDetectionInstructions=o.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=o.fillStates||{},this.strokeStates=o.strokeStates||{},this.textStates=o.textStates||{},this.widths_={},this.labels_={}}createLabel(e,a,s,o){const c=e+a+s+o;if(this.labels_[c])return this.labels_[c];const d=o?this.strokeStates[o]:null,h=s?this.fillStates[s]:null,g=this.textStates[a],_=this.pixelRatio,b=[g.scale[0]*_,g.scale[1]*_],j=Array.isArray(e),$=g.justify?TEXT_ALIGN[g.justify]:horizontalTextAlign(Array.isArray(e)?e[0]:e,g.textAlign||defaultTextAlign),_e=o&&d.lineWidth?d.lineWidth:0,et=j?e:e.split(`
`).reduce(createTextChunks,[]),{width:tt,height:it,widths:nt,heights:rt,lineWidths:at}=getTextDimensions(g,et),st=tt+_e,ot=[],dt=(st+2)*b[0],ut=(it+_e)*b[1],ct={width:dt<0?Math.floor(dt):Math.ceil(dt),height:ut<0?Math.floor(ut):Math.ceil(ut),contextInstructions:ot};(b[0]!=1||b[1]!=1)&&ot.push("scale",b),o&&(ot.push("strokeStyle",d.strokeStyle),ot.push("lineWidth",_e),ot.push("lineCap",d.lineCap),ot.push("lineJoin",d.lineJoin),ot.push("miterLimit",d.miterLimit),ot.push("setLineDash",[d.lineDash]),ot.push("lineDashOffset",d.lineDashOffset)),s&&ot.push("fillStyle",h.fillStyle),ot.push("textBaseline","middle"),ot.push("textAlign","center");const ht=.5-$;let mt=$*st+ht*_e;const pt=[],ft=[];let yt=0,Ct=0,_t=0,St=0,Pt;for(let bt=0,Mt=et.length;bt<Mt;bt+=2){const It=et[bt];if(It===`
`){Ct+=yt,yt=0,mt=$*st+ht*_e,++St;continue}const Nt=et[bt+1]||g.font;Nt!==Pt&&(o&&pt.push("font",Nt),s&&ft.push("font",Nt),Pt=Nt),yt=Math.max(yt,rt[_t]);const wt=[It,mt+ht*nt[_t]+$*(nt[_t]-at[St]),.5*(_e+yt)+Ct];mt+=nt[_t],o&&pt.push("strokeText",wt),s&&ft.push("fillText",wt),++_t}return Array.prototype.push.apply(ot,pt),Array.prototype.push.apply(ot,ft),this.labels_[c]=ct,ct}replayTextBackground_(e,a,s,o,c,d,h){e.beginPath(),e.moveTo.apply(e,a),e.lineTo.apply(e,s),e.lineTo.apply(e,o),e.lineTo.apply(e,c),e.lineTo.apply(e,a),d&&(this.alignFill_=d[2],this.fill_(e)),h&&(this.setStrokeStyle_(e,h),e.stroke())}calculateImageOrLabelDimensions_(e,a,s,o,c,d,h,g,_,b,j,$,_e,et,tt,it){h*=$[0],g*=$[1];let nt=s-h,rt=o-g;const at=c+_>e?e-_:c,st=d+b>a?a-b:d,ot=et[3]+at*$[0]+et[1],dt=et[0]+st*$[1]+et[2],ut=nt-et[3],ct=rt-et[0];(tt||j!==0)&&(p1[0]=ut,p4[0]=ut,p1[1]=ct,p2[1]=ct,p2[0]=ut+ot,p3[0]=p2[0],p3[1]=ct+dt,p4[1]=p3[1]);let ht;return j!==0?(ht=compose(create(),s,o,1,1,j,-s,-o),apply(ht,p1),apply(ht,p2),apply(ht,p3),apply(ht,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(ut,ut+ot),Math.min(ct,ct+dt),Math.max(ut,ut+ot),Math.max(ct,ct+dt),tmpExtent),_e&&(nt=Math.round(nt),rt=Math.round(rt)),{drawImageX:nt,drawImageY:rt,drawImageW:at,drawImageH:st,originX:_,originY:b,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:it},canvasTransform:ht,scale:$}}replayImageOrLabel_(e,a,s,o,c,d,h){const g=!!(d||h),_=o.declutterBox,b=e.canvas,j=h?h[2]*o.scale[0]/2:0;return _.minX-j<=b.width/a&&_.maxX+j>=0&&_.minY-j<=b.height/a&&_.maxY+j>=0&&(g&&this.replayTextBackground_(e,p1,p2,p3,p4,d,h),drawImageOrLabel(e,o.canvasTransform,c,s,o.originX,o.originY,o.drawImageW,o.drawImageH,o.drawImageX,o.drawImageY,o.scale)),!0}fill_(e){if(this.alignFill_){const a=apply(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;e.save(),e.translate(a[0]%s,a[1]%s),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,a){e.strokeStyle=a[1],e.lineWidth=a[2],e.lineCap=a[3],e.lineJoin=a[4],e.miterLimit=a[5],e.lineDashOffset=a[7],e.setLineDash(a[6])}drawLabelWithPointPlacement_(e,a,s,o){const c=this.textStates[a],d=this.createLabel(e,a,o,s),h=this.strokeStates[s],g=this.pixelRatio,_=horizontalTextAlign(Array.isArray(e)?e[0]:e,c.textAlign||defaultTextAlign),b=TEXT_ALIGN[c.textBaseline||defaultTextBaseline],j=h&&h.lineWidth?h.lineWidth:0,$=d.width/g-2*c.scale[0],_e=_*$+2*(.5-_)*j,et=b*d.height/g+2*(.5-b)*j;return{label:d,anchorX:_e,anchorY:et}}execute_(e,a,s,o,c,d,h,g){let _;this.pixelCoordinates_&&equals$2(s,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=transform2D(this.coordinates,0,this.coordinates.length,2,s,this.pixelCoordinates_),setFromArray(this.renderedTransform_,s));let b=0;const j=o.length;let $=0,_e,et,tt,it,nt,rt,at,st,ot,dt,ut,ct,ht=0,mt=0,pt=null,ft=null;const yt=this.coordinateCache_,Ct=this.viewRotation_,_t=Math.round(Math.atan2(-s[1],s[0])*1e12)/1e12,St={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ct},Pt=this.instructions!=o||this.overlaps?0:200;let bt,Mt,It,Nt;for(;b<j;){const wt=o[b];switch(wt[0]){case Instruction.BEGIN_GEOMETRY:bt=wt[1],Nt=wt[3],bt.getGeometry()?h!==void 0&&!intersects$1(h,Nt.getExtent())?b=wt[2]+1:++b:b=wt[2];break;case Instruction.BEGIN_PATH:ht>Pt&&(this.fill_(e),ht=0),mt>Pt&&(e.stroke(),mt=0),!ht&&!mt&&(e.beginPath(),it=NaN,nt=NaN),++b;break;case Instruction.CIRCLE:$=wt[1];const jt=_[$],Ft=_[$+1],zt=_[$+2],Yt=_[$+3],Jt=zt-jt,tn=Yt-Ft,Lt=Math.sqrt(Jt*Jt+tn*tn);e.moveTo(jt+Lt,Ft),e.arc(jt,Ft,Lt,0,2*Math.PI,!0),++b;break;case Instruction.CLOSE_PATH:e.closePath(),++b;break;case Instruction.CUSTOM:$=wt[1],_e=wt[2];const vn=wt[3],En=wt[4],Vt=wt.length==6?wt[5]:void 0;St.geometry=vn,St.feature=bt,b in yt||(yt[b]=[]);const Sn=yt[b];Vt?Vt(_,$,_e,2,Sn):(Sn[0]=_[$],Sn[1]=_[$+1],Sn.length=2),En(Sn,St),++b;break;case Instruction.DRAW_IMAGE:$=wt[1],_e=wt[2],st=wt[3],et=wt[4],tt=wt[5];let An=wt[6];const Zt=wt[7],Dn=wt[8],en=wt[9],Tn=wt[10];let yn=wt[11];const Kt=wt[12];let nn=wt[13];const Et=wt[14],xt=wt[15];if(!st&&wt.length>=20){ot=wt[19],dt=wt[20],ut=wt[21],ct=wt[22];const bn=this.drawLabelWithPointPlacement_(ot,dt,ut,ct);st=bn.label,wt[3]=st;const lr=wt[23];et=(bn.anchorX-lr)*this.pixelRatio,wt[4]=et;const Pn=wt[24];tt=(bn.anchorY-Pn)*this.pixelRatio,wt[5]=tt,An=st.height,wt[6]=An,nn=st.width,wt[13]=nn}let Tt;wt.length>25&&(Tt=wt[25]);let Rt,Ot,kt;wt.length>17?(Rt=wt[16],Ot=wt[17],kt=wt[18]):(Rt=defaultPadding,Ot=!1,kt=!1),Tn&&_t?yn+=Ct:!Tn&&!_t&&(yn-=Ct);let Gt=0;for(;$<_e;$+=2){if(Tt&&Tt[Gt++]<nn/this.pixelRatio)continue;const bn=this.calculateImageOrLabelDimensions_(st.width,st.height,_[$],_[$+1],nn,An,et,tt,Dn,en,yn,Kt,c,Rt,Ot||kt,bt),lr=[e,a,st,bn,Zt,Ot?pt:null,kt?ft:null];if(g){if(Et==="none")continue;if(Et==="obstacle"){g.insert(bn.declutterBox);continue}else{let Pn,Un;if(xt){const wn=_e-$;if(!xt[wn]){xt[wn]=lr;continue}if(Pn=xt[wn],delete xt[wn],Un=getDeclutterBox(Pn),g.collides(Un))continue}if(g.collides(bn.declutterBox))continue;Pn&&(g.insert(Un),this.replayImageOrLabel_.apply(this,Pn)),g.insert(bn.declutterBox)}}this.replayImageOrLabel_.apply(this,lr)}++b;break;case Instruction.DRAW_CHARS:const qt=wt[1],$t=wt[2],sn=wt[3],ln=wt[4];ct=wt[5];const un=wt[6],cn=wt[7],Qt=wt[8];ut=wt[9];const dn=wt[10];ot=wt[11],dt=wt[12];const gn=[wt[13],wt[13]],hn=this.textStates[dt],rn=hn.font,Ln=[hn.scale[0]*cn,hn.scale[1]*cn];let er;rn in this.widths_?er=this.widths_[rn]:(er={},this.widths_[rn]=er);const Pr=lineStringLength(_,qt,$t,2),Rr=Math.abs(Ln[0])*measureAndCacheTextWidth(rn,ot,er);if(ln||Rr<=Pr){const bn=this.textStates[dt].textAlign,lr=(Pr-Rr)*horizontalTextAlign(ot,bn),Pn=drawTextOnPath(_,qt,$t,2,ot,lr,un,Math.abs(Ln[0]),measureAndCacheTextWidth,rn,er,_t?0:this.viewRotation_);e:if(Pn){const Un=[];let wn,Mr,kr,_n,Rn;if(ut)for(wn=0,Mr=Pn.length;wn<Mr;++wn){Rn=Pn[wn],kr=Rn[4],_n=this.createLabel(kr,dt,"",ut),et=Rn[2]+(Ln[0]<0?-dn:dn),tt=sn*_n.height+(.5-sn)*2*dn*Ln[1]/Ln[0]-Qt;const zn=this.calculateImageOrLabelDimensions_(_n.width,_n.height,Rn[0],Rn[1],_n.width,_n.height,et,tt,0,0,Rn[3],gn,!1,defaultPadding,!1,bt);if(g&&g.collides(zn.declutterBox))break e;Un.push([e,a,_n,zn,1,null,null])}if(ct)for(wn=0,Mr=Pn.length;wn<Mr;++wn){Rn=Pn[wn],kr=Rn[4],_n=this.createLabel(kr,dt,ct,""),et=Rn[2],tt=sn*_n.height-Qt;const zn=this.calculateImageOrLabelDimensions_(_n.width,_n.height,Rn[0],Rn[1],_n.width,_n.height,et,tt,0,0,Rn[3],gn,!1,defaultPadding,!1,bt);if(g&&g.collides(zn.declutterBox))break e;Un.push([e,a,_n,zn,1,null,null])}g&&g.load(Un.map(getDeclutterBox));for(let zn=0,$a=Un.length;zn<$a;++zn)this.replayImageOrLabel_.apply(this,Un[zn])}}++b;break;case Instruction.END_GEOMETRY:if(d!==void 0){bt=wt[1];const bn=d(bt,Nt);if(bn)return bn}++b;break;case Instruction.FILL:Pt?ht++:this.fill_(e),++b;break;case Instruction.MOVE_TO_LINE_TO:for($=wt[1],_e=wt[2],Mt=_[$],It=_[$+1],rt=Mt+.5|0,at=It+.5|0,(rt!==it||at!==nt)&&(e.moveTo(Mt,It),it=rt,nt=at),$+=2;$<_e;$+=2)Mt=_[$],It=_[$+1],rt=Mt+.5|0,at=It+.5|0,($==_e-2||rt!==it||at!==nt)&&(e.lineTo(Mt,It),it=rt,nt=at);++b;break;case Instruction.SET_FILL_STYLE:pt=wt,this.alignFill_=wt[2],ht&&(this.fill_(e),ht=0,mt&&(e.stroke(),mt=0)),e.fillStyle=wt[1],++b;break;case Instruction.SET_STROKE_STYLE:ft=wt,mt&&(e.stroke(),mt=0),this.setStrokeStyle_(e,wt),++b;break;case Instruction.STROKE:Pt?mt++:e.stroke(),++b;break;default:++b;break}}ht&&this.fill_(e),mt&&e.stroke()}execute(e,a,s,o,c,d){this.viewRotation_=o,this.execute_(e,a,s,this.instructions,c,void 0,void 0,d)}executeHitDetection(e,a,s,o,c){return this.viewRotation_=s,this.execute_(e,1,a,this.hitDetectionInstructions,!0,o,c)}}const ORDER=["Polygon","Circle","LineString","Image","Text","Default"];class ExecutorGroup{constructor(e,a,s,o,c,d){this.maxExtent_=e,this.overlaps_=o,this.pixelRatio_=s,this.resolution_=a,this.renderBuffer_=d,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create(),this.createExecutors_(c)}clip(e,a){const s=this.getClipCoords(a);e.beginPath(),e.moveTo(s[0],s[1]),e.lineTo(s[2],s[3]),e.lineTo(s[4],s[5]),e.lineTo(s[6],s[7]),e.clip()}createExecutors_(e){for(const a in e){let s=this.executorsByZIndex_[a];s===void 0&&(s={},this.executorsByZIndex_[a]=s);const o=e[a];for(const c in o){const d=o[c];s[c]=new Executor(this.resolution_,this.pixelRatio_,this.overlaps_,d)}}}hasExecutors(e){for(const a in this.executorsByZIndex_){const s=this.executorsByZIndex_[a];for(let o=0,c=e.length;o<c;++o)if(e[o]in s)return!0}return!1}forEachFeatureAtCoordinate(e,a,s,o,c,d){o=Math.round(o);const h=o*2+1,g=compose(this.hitDetectionTransform_,o+.5,o+.5,1/a,-1/a,-s,-e[0],-e[1]),_=!this.hitDetectionContext_;_&&(this.hitDetectionContext_=createCanvasContext2D(h,h,void 0,{willReadFrequently:!0}));const b=this.hitDetectionContext_;b.canvas.width!==h||b.canvas.height!==h?(b.canvas.width=h,b.canvas.height=h):_||b.clearRect(0,0,h,h);let j;this.renderBuffer_!==void 0&&(j=createEmpty(),extendCoordinate(j,e),buffer(j,a*(this.renderBuffer_+o),j));const $=getPixelIndexArray(o);let _e;function et(ot,dt){const ut=b.getImageData(0,0,h,h).data;for(let ct=0,ht=$.length;ct<ht;ct++)if(ut[$[ct]]>0){if(!d||_e!=="Image"&&_e!=="Text"||d.includes(ot)){const mt=($[ct]-3)/4,pt=o-mt%h,ft=o-(mt/h|0),yt=c(ot,dt,pt*pt+ft*ft);if(yt)return yt}b.clearRect(0,0,h,h);break}}const tt=Object.keys(this.executorsByZIndex_).map(Number);tt.sort(ascending);let it,nt,rt,at,st;for(it=tt.length-1;it>=0;--it){const ot=tt[it].toString();for(rt=this.executorsByZIndex_[ot],nt=ORDER.length-1;nt>=0;--nt)if(_e=ORDER[nt],at=rt[_e],at!==void 0&&(st=at.executeHitDetection(b,g,s,et,j),st))return st}}getClipCoords(e){const a=this.maxExtent_;if(!a)return null;const s=a[0],o=a[1],c=a[2],d=a[3],h=[s,o,s,d,c,d,c,o];return transform2D(h,0,8,2,e,h),h}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(e,a,s,o,c,d,h){const g=Object.keys(this.executorsByZIndex_).map(Number);g.sort(ascending),this.maxExtent_&&(e.save(),this.clip(e,s)),d=d||ORDER;let _,b,j,$,_e,et;for(h&&g.reverse(),_=0,b=g.length;_<b;++_){const tt=g[_].toString();for(_e=this.executorsByZIndex_[tt],j=0,$=d.length;j<$;++j){const it=d[j];et=_e[it],et!==void 0&&et.execute(e,a,s,o,c,h)}}this.maxExtent_&&e.restore()}}const circlePixelIndexArrayCache={};function getPixelIndexArray(i){if(circlePixelIndexArrayCache[i]!==void 0)return circlePixelIndexArrayCache[i];const e=i*2+1,a=i*i,s=new Array(a+1);for(let c=0;c<=i;++c)for(let d=0;d<=i;++d){const h=c*c+d*d;if(h>a)break;let g=s[h];g||(g=[],s[h]=g),g.push(((i+c)*e+(i+d))*4+3),c>0&&g.push(((i-c)*e+(i+d))*4+3),d>0&&(g.push(((i+c)*e+(i-d))*4+3),c>0&&g.push(((i-c)*e+(i-d))*4+3))}const o=[];for(let c=0,d=s.length;c<d;++c)s[c]&&o.push(...s[c]);return circlePixelIndexArrayCache[i]=o,o}class CanvasImmediateRenderer extends VectorContext{constructor(e,a,s,o,c,d,h){super(),this.context_=e,this.pixelRatio_=a,this.extent_=s,this.transform_=o,this.transformRotation_=o?toFixed(Math.atan2(o[1],o[0]),10):0,this.viewRotation_=c,this.squaredTolerance_=d,this.userTransform_=h,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create()}drawImages_(e,a,s,o){if(!this.image_)return;const c=transform2D(e,a,s,o,this.transform_,this.pixelCoordinates_),d=this.context_,h=this.tmpLocalTransform_,g=d.globalAlpha;this.imageOpacity_!=1&&(d.globalAlpha=g*this.imageOpacity_);let _=this.imageRotation_;this.transformRotation_===0&&(_-=this.viewRotation_),this.imageRotateWithView_&&(_+=this.viewRotation_);for(let b=0,j=c.length;b<j;b+=2){const $=c[b]-this.imageAnchorX_,_e=c[b+1]-this.imageAnchorY_;if(_!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const et=$+this.imageAnchorX_,tt=_e+this.imageAnchorY_;compose(h,et,tt,1,1,_,-et,-tt),d.save(),d.transform.apply(d,h),d.translate(et,tt),d.scale(this.imageScale_[0],this.imageScale_[1]),d.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),d.restore()}else d.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,$,_e,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(d.globalAlpha=g)}drawText_(e,a,s,o){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const c=transform2D(e,a,s,o,this.transform_,this.pixelCoordinates_),d=this.context_;let h=this.textRotation_;for(this.transformRotation_===0&&(h-=this.viewRotation_),this.textRotateWithView_&&(h+=this.viewRotation_);a<s;a+=o){const g=c[a]+this.textOffsetX_,_=c[a+1]+this.textOffsetY_;h!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(d.save(),d.translate(g-this.textOffsetX_,_-this.textOffsetY_),d.rotate(h),d.translate(this.textOffsetX_,this.textOffsetY_),d.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&d.strokeText(this.text_,0,0),this.textFillState_&&d.fillText(this.text_,0,0),d.restore()):(this.textStrokeState_&&d.strokeText(this.text_,g,_),this.textFillState_&&d.fillText(this.text_,g,_))}}moveToLineTo_(e,a,s,o,c){const d=this.context_,h=transform2D(e,a,s,o,this.transform_,this.pixelCoordinates_);d.moveTo(h[0],h[1]);let g=h.length;c&&(g-=2);for(let _=2;_<g;_+=2)d.lineTo(h[_],h[_+1]);return c&&d.closePath(),s}drawRings_(e,a,s,o){for(let c=0,d=s.length;c<d;++c)a=this.moveToLineTo_(e,a,s[c],o,!0);return a}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const a=transformGeom2D(e,this.transform_,this.pixelCoordinates_),s=a[2]-a[0],o=a[3]-a[1],c=Math.sqrt(s*s+o*o),d=this.context_;d.beginPath(),d.arc(a[0],a[1],c,0,2*Math.PI),this.fillState_&&d.fill(),this.strokeState_&&d.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,a){const s=a.getGeometryFunction()(e);s&&(this.setStyle(a),this.drawGeometry(s))}drawGeometryCollection(e){const a=e.getGeometriesArray();for(let s=0,o=a.length;s<o;++s)this.drawGeometry(a[s])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const a=e.getFlatCoordinates(),s=e.getStride();this.image_&&this.drawImages_(a,0,a.length,s),this.text_!==""&&this.drawText_(a,0,a.length,s)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const a=e.getFlatCoordinates(),s=e.getStride();this.image_&&this.drawImages_(a,0,a.length,s),this.text_!==""&&this.drawText_(a,0,a.length,s)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const a=this.context_,s=e.getFlatCoordinates();a.beginPath(),this.moveToLineTo_(s,0,s.length,e.getStride(),!1),a.stroke()}if(this.text_!==""){const a=e.getFlatMidpoint();this.drawText_(a,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const a=e.getExtent();if(intersects$1(this.extent_,a)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const s=this.context_,o=e.getFlatCoordinates();let c=0;const d=e.getEnds(),h=e.getStride();s.beginPath();for(let g=0,_=d.length;g<_;++g)c=this.moveToLineTo_(o,c,d[g],h,!1);s.stroke()}if(this.text_!==""){const s=e.getFlatMidpoints();this.drawText_(s,0,s.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const a=this.context_;a.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}if(this.text_!==""){const a=e.getFlatInteriorPoint();this.drawText_(a,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const a=this.context_,s=e.getOrientedFlatCoordinates();let o=0;const c=e.getEndss(),d=e.getStride();a.beginPath();for(let h=0,g=c.length;h<g;++h){const _=c[h];o=this.drawRings_(s,o,_,d)}this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}if(this.text_!==""){const a=e.getFlatInteriorPoints();this.drawText_(a,0,a.length,2)}}}setContextFillState_(e){const a=this.context_,s=this.contextFillState_;s?s.fillStyle!=e.fillStyle&&(s.fillStyle=e.fillStyle,a.fillStyle=e.fillStyle):(a.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const a=this.context_,s=this.contextStrokeState_;s?(s.lineCap!=e.lineCap&&(s.lineCap=e.lineCap,a.lineCap=e.lineCap),equals$2(s.lineDash,e.lineDash)||a.setLineDash(s.lineDash=e.lineDash),s.lineDashOffset!=e.lineDashOffset&&(s.lineDashOffset=e.lineDashOffset,a.lineDashOffset=e.lineDashOffset),s.lineJoin!=e.lineJoin&&(s.lineJoin=e.lineJoin,a.lineJoin=e.lineJoin),s.lineWidth!=e.lineWidth&&(s.lineWidth=e.lineWidth,a.lineWidth=e.lineWidth),s.miterLimit!=e.miterLimit&&(s.miterLimit=e.miterLimit,a.miterLimit=e.miterLimit),s.strokeStyle!=e.strokeStyle&&(s.strokeStyle=e.strokeStyle,a.strokeStyle=e.strokeStyle)):(a.lineCap=e.lineCap,a.setLineDash(e.lineDash),a.lineDashOffset=e.lineDashOffset,a.lineJoin=e.lineJoin,a.lineWidth=e.lineWidth,a.miterLimit=e.miterLimit,a.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const a=this.context_,s=this.contextTextState_,o=e.textAlign?e.textAlign:defaultTextAlign;s?(s.font!=e.font&&(s.font=e.font,a.font=e.font),s.textAlign!=o&&(s.textAlign=o,a.textAlign=o),s.textBaseline!=e.textBaseline&&(s.textBaseline=e.textBaseline,a.textBaseline=e.textBaseline)):(a.font=e.font,a.textAlign=o,a.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:o,textBaseline:e.textBaseline})}setFillStrokeStyle(e,a){if(!e)this.fillState_=null;else{const s=e.getColor();this.fillState_={fillStyle:asColorLike(s||defaultFillStyle)}}if(!a)this.strokeState_=null;else{const s=a.getColor(),o=a.getLineCap(),c=a.getLineDash(),d=a.getLineDashOffset(),h=a.getLineJoin(),g=a.getWidth(),_=a.getMiterLimit(),b=c||defaultLineDash;this.strokeState_={lineCap:o!==void 0?o:defaultLineCap,lineDash:this.pixelRatio_===1?b:b.map(j=>j*this.pixelRatio_),lineDashOffset:(d||defaultLineDashOffset)*this.pixelRatio_,lineJoin:h!==void 0?h:defaultLineJoin,lineWidth:(g!==void 0?g:defaultLineWidth)*this.pixelRatio_,miterLimit:_!==void 0?_:defaultMiterLimit,strokeStyle:asColorLike(s||defaultStrokeStyle)}}}setImageStyle(e){let a;if(!e||!(a=e.getSize())){this.image_=null;return}const s=e.getPixelRatio(this.pixelRatio_),o=e.getAnchor(),c=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=o[0]*s,this.imageAnchorY_=o[1]*s,this.imageHeight_=a[1]*s,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=c[0],this.imageOriginY_=c[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const d=e.getScaleArray();this.imageScale_=[d[0]*this.pixelRatio_/s,d[1]*this.pixelRatio_/s],this.imageWidth_=a[0]*s}setTextStyle(e){if(!e)this.text_="";else{const a=e.getFill();if(!a)this.textFillState_=null;else{const _e=a.getColor();this.textFillState_={fillStyle:asColorLike(_e||defaultFillStyle)}}const s=e.getStroke();if(!s)this.textStrokeState_=null;else{const _e=s.getColor(),et=s.getLineCap(),tt=s.getLineDash(),it=s.getLineDashOffset(),nt=s.getLineJoin(),rt=s.getWidth(),at=s.getMiterLimit();this.textStrokeState_={lineCap:et!==void 0?et:defaultLineCap,lineDash:tt||defaultLineDash,lineDashOffset:it||defaultLineDashOffset,lineJoin:nt!==void 0?nt:defaultLineJoin,lineWidth:rt!==void 0?rt:defaultLineWidth,miterLimit:at!==void 0?at:defaultMiterLimit,strokeStyle:asColorLike(_e||defaultStrokeStyle)}}const o=e.getFont(),c=e.getOffsetX(),d=e.getOffsetY(),h=e.getRotateWithView(),g=e.getRotation(),_=e.getScaleArray(),b=e.getText(),j=e.getTextAlign(),$=e.getTextBaseline();this.textState_={font:o!==void 0?o:defaultFont,textAlign:j!==void 0?j:defaultTextAlign,textBaseline:$!==void 0?$:defaultTextBaseline},this.text_=b!==void 0?Array.isArray(b)?b.reduce((_e,et,tt)=>_e+=tt%2?" ":et,""):b:"",this.textOffsetX_=c!==void 0?this.pixelRatio_*c:0,this.textOffsetY_=d!==void 0?this.pixelRatio_*d:0,this.textRotateWithView_=h!==void 0?h:!1,this.textRotation_=g!==void 0?g:0,this.textScale_=[this.pixelRatio_*_[0],this.pixelRatio_*_[1]]}}}const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(i,e,a,s,o,c,d){const h=i[0]*HIT_DETECT_RESOLUTION,g=i[1]*HIT_DETECT_RESOLUTION,_=createCanvasContext2D(h,g);_.imageSmoothingEnabled=!1;const b=_.canvas,j=new CanvasImmediateRenderer(_,HIT_DETECT_RESOLUTION,o,null,d),$=a.length,_e=Math.floor((256*256*256-1)/$),et={};for(let it=1;it<=$;++it){const nt=a[it-1],rt=nt.getStyleFunction()||s;if(!rt)continue;let at=rt(nt,c);if(!at)continue;Array.isArray(at)||(at=[at]);const ot=(it*_e).toString(16).padStart(7,"#00000");for(let dt=0,ut=at.length;dt<ut;++dt){const ct=at[dt],ht=ct.getGeometryFunction()(nt);if(!ht||!intersects$1(o,ht.getExtent()))continue;const mt=ct.clone(),pt=mt.getFill();pt&&pt.setColor(ot);const ft=mt.getStroke();ft&&(ft.setColor(ot),ft.setLineDash(null)),mt.setText(void 0);const yt=ct.getImage();if(yt){const Pt=yt.getImageSize();if(!Pt)continue;const bt=createCanvasContext2D(Pt[0],Pt[1],void 0,{alpha:!1}),Mt=bt.canvas;bt.fillStyle=ot,bt.fillRect(0,0,Mt.width,Mt.height),mt.setImage(new Icon({img:Mt,anchor:yt.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:yt.getOrigin(),opacity:1,size:yt.getSize(),scale:yt.getScale(),rotation:yt.getRotation(),rotateWithView:yt.getRotateWithView()}))}const Ct=mt.getZIndex()||0;let _t=et[Ct];_t||(_t={},et[Ct]=_t,_t.Polygon=[],_t.Circle=[],_t.LineString=[],_t.Point=[]);const St=ht.getType();if(St==="GeometryCollection"){const Pt=ht.getGeometriesArrayRecursive();for(let bt=0,Mt=Pt.length;bt<Mt;++bt){const It=Pt[bt];_t[It.getType().replace("Multi","")].push(It,mt)}}else _t[St.replace("Multi","")].push(ht,mt)}}const tt=Object.keys(et).map(Number).sort(ascending);for(let it=0,nt=tt.length;it<nt;++it){const rt=et[tt[it]];for(const at in rt){const st=rt[at];for(let ot=0,dt=st.length;ot<dt;ot+=2){j.setStyle(st[ot+1]);for(let ut=0,ct=e.length;ut<ct;++ut)j.setTransform(e[ut]),j.drawGeometry(st[ot])}}}return _.getImageData(0,0,b.width,b.height)}function hitDetect(i,e,a){const s=[];if(a){const o=Math.floor(Math.round(i[0])*HIT_DETECT_RESOLUTION),c=Math.floor(Math.round(i[1])*HIT_DETECT_RESOLUTION),d=(clamp(o,0,a.width-1)+clamp(c,0,a.height-1)*a.width)*4,h=a.data[d],g=a.data[d+1],b=a.data[d+2]+256*(g+256*h),j=Math.floor((256*256*256-1)/e.length);b&&b%j===0&&s.push(e[b/j-1])}return s}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function defaultOrder(i,e){return parseInt(getUid(i),10)-parseInt(getUid(e),10)}function getSquaredTolerance(i,e){const a=getTolerance(i,e);return a*a}function getTolerance(i,e){return SIMPLIFY_TOLERANCE*i/e}function renderCircleGeometry(i,e,a,s,o){const c=a.getFill(),d=a.getStroke();if(c||d){const g=i.getBuilder(a.getZIndex(),"Circle");g.setFillStrokeStyle(c,d),g.drawCircle(e,s)}const h=a.getText();if(h&&h.getText()){const g=(o||i).getBuilder(a.getZIndex(),"Text");g.setTextStyle(h),g.drawText(e,s)}}function renderFeature$1(i,e,a,s,o,c,d){let h=!1;const g=a.getImage();if(g){const _=g.getImageState();_==ImageState.LOADED||_==ImageState.ERROR?g.unlistenImageChange(o):(_==ImageState.IDLE&&g.load(),g.listenImageChange(o),h=!0)}return renderFeatureInternal(i,e,a,s,c,d),h}function renderFeatureInternal(i,e,a,s,o,c){const d=a.getGeometryFunction()(e);if(!d)return;const h=d.simplifyTransformed(s,o);if(a.getRenderer())renderGeometry(i,h,a,e);else{const _=GEOMETRY_RENDERERS[h.getType()];_(i,h,a,e,c)}}function renderGeometry(i,e,a,s){if(e.getType()=="GeometryCollection"){const c=e.getGeometries();for(let d=0,h=c.length;d<h;++d)renderGeometry(i,c[d],a,s);return}i.getBuilder(a.getZIndex(),"Default").drawCustom(e,s,a.getRenderer(),a.getHitDetectionRenderer())}function renderGeometryCollectionGeometry(i,e,a,s,o){const c=e.getGeometriesArray();let d,h;for(d=0,h=c.length;d<h;++d){const g=GEOMETRY_RENDERERS[c[d].getType()];g(i,c[d],a,s,o)}}function renderLineStringGeometry(i,e,a,s,o){const c=a.getStroke();if(c){const h=i.getBuilder(a.getZIndex(),"LineString");h.setFillStrokeStyle(null,c),h.drawLineString(e,s)}const d=a.getText();if(d&&d.getText()){const h=(o||i).getBuilder(a.getZIndex(),"Text");h.setTextStyle(d),h.drawText(e,s)}}function renderMultiLineStringGeometry(i,e,a,s,o){const c=a.getStroke();if(c){const h=i.getBuilder(a.getZIndex(),"LineString");h.setFillStrokeStyle(null,c),h.drawMultiLineString(e,s)}const d=a.getText();if(d&&d.getText()){const h=(o||i).getBuilder(a.getZIndex(),"Text");h.setTextStyle(d),h.drawText(e,s)}}function renderMultiPolygonGeometry(i,e,a,s,o){const c=a.getFill(),d=a.getStroke();if(d||c){const g=i.getBuilder(a.getZIndex(),"Polygon");g.setFillStrokeStyle(c,d),g.drawMultiPolygon(e,s)}const h=a.getText();if(h&&h.getText()){const g=(o||i).getBuilder(a.getZIndex(),"Text");g.setTextStyle(h),g.drawText(e,s)}}function renderPointGeometry(i,e,a,s,o){const c=a.getImage(),d=a.getText();let h;if(c){if(c.getImageState()!=ImageState.LOADED)return;let g=i;if(o){const b=c.getDeclutterMode();if(b!=="none")if(g=o,b==="obstacle"){const j=i.getBuilder(a.getZIndex(),"Image");j.setImageStyle(c,h),j.drawPoint(e,s)}else d&&d.getText()&&(h={})}const _=g.getBuilder(a.getZIndex(),"Image");_.setImageStyle(c,h),_.drawPoint(e,s)}if(d&&d.getText()){let g=i;o&&(g=o);const _=g.getBuilder(a.getZIndex(),"Text");_.setTextStyle(d,h),_.drawText(e,s)}}function renderMultiPointGeometry(i,e,a,s,o){const c=a.getImage(),d=a.getText();let h;if(c){if(c.getImageState()!=ImageState.LOADED)return;let g=i;if(o){const b=c.getDeclutterMode();if(b!=="none")if(g=o,b==="obstacle"){const j=i.getBuilder(a.getZIndex(),"Image");j.setImageStyle(c,h),j.drawMultiPoint(e,s)}else d&&d.getText()&&(h={})}const _=g.getBuilder(a.getZIndex(),"Image");_.setImageStyle(c,h),_.drawMultiPoint(e,s)}if(d&&d.getText()){let g=i;o&&(g=o);const _=g.getBuilder(a.getZIndex(),"Text");_.setTextStyle(d,h),_.drawText(e,s)}}function renderPolygonGeometry(i,e,a,s,o){const c=a.getFill(),d=a.getStroke();if(c||d){const g=i.getBuilder(a.getZIndex(),"Polygon");g.setFillStrokeStyle(c,d),g.drawPolygon(e,s)}const h=a.getText();if(h&&h.getText()){const g=(o||i).getBuilder(a.getZIndex(),"Text");g.setTextStyle(h),g.drawText(e,s)}}class CanvasVectorLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=createEmpty(),this.wrappedRenderedExtent_=createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,a,s){const o=a.extent,c=a.viewState,d=c.center,h=c.resolution,g=c.projection,_=c.rotation,b=g.getExtent(),j=this.getLayer().getSource(),$=a.pixelRatio,_e=a.viewHints,et=!(_e[ViewHint.ANIMATING]||_e[ViewHint.INTERACTING]),tt=this.compositionContext_,it=Math.round(a.size[0]*$),nt=Math.round(a.size[1]*$),rt=j.getWrapX()&&g.canWrapX(),at=rt?getWidth(b):null,st=rt?Math.ceil((o[2]-b[2])/at)+1:1;let ot=rt?Math.floor((o[0]-b[0])/at):0;do{const dt=this.getRenderTransform(d,h,_,$,it,nt,ot*at);e.execute(tt,1,dt,_,et,void 0,s)}while(++ot<st)}setupCompositionContext_(){if(this.opacity_!==1){const e=createCanvasContext2D(this.context.canvas.width,this.context.canvas.height,canvasPool$2);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,releaseCanvas(this.compositionContext_),canvasPool$2.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,a){const s=e.pixelRatio,o=e.layerStatesArray[e.layerIndex];makeScale(this.pixelTransform,1/s,1/s),makeInverse(this.inversePixelTransform,this.pixelTransform);const c=toString$3(this.pixelTransform);this.useContainer(a,c,this.getBackground(e));const d=this.context,h=d.canvas,g=this.replayGroup_,_=this.declutterExecutorGroup;let b=g&&!g.isEmpty()||_&&!_.isEmpty();if(!b&&!(this.getLayer().hasListener(RenderEventType.PRERENDER)||this.getLayer().hasListener(RenderEventType.POSTRENDER)))return null;const j=Math.round(e.size[0]*s),$=Math.round(e.size[1]*s);h.width!=j||h.height!=$?(h.width=j,h.height=$,h.style.transform!==c&&(h.style.transform=c)):this.containerReused||d.clearRect(0,0,j,$),this.preRender(d,e);const _e=e.viewState;_e.projection,this.opacity_=o.opacity,this.setupCompositionContext_();let et=!1;if(b&&o.extent&&this.clipping){const tt=fromUserExtent(o.extent);b=intersects$1(tt,e.extent),et=b&&!containsExtent(tt,e.extent),et&&this.clipUnrotated(this.compositionContext_,e,tt)}return b&&this.renderWorlds(g,e),et&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(d,e),this.renderedRotation_!==_e.rotation&&(this.renderedRotation_=_e.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(a=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const s=[this.context.canvas.width,this.context.canvas.height];apply(this.pixelTransform,s);const o=this.renderedCenter_,c=this.renderedResolution_,d=this.renderedRotation_,h=this.renderedProjection_,g=this.wrappedRenderedExtent_,_=this.getLayer(),b=[],j=s[0]*HIT_DETECT_RESOLUTION,$=s[1]*HIT_DETECT_RESOLUTION;b.push(this.getRenderTransform(o,c,d,HIT_DETECT_RESOLUTION,j,$,0).slice());const _e=_.getSource(),et=h.getExtent();if(_e.getWrapX()&&h.canWrapX()&&!containsExtent(et,g)){let tt=g[0];const it=getWidth(et);let nt=0,rt;for(;tt<et[0];)--nt,rt=it*nt,b.push(this.getRenderTransform(o,c,d,HIT_DETECT_RESOLUTION,j,$,rt).slice()),tt+=it;for(nt=0,tt=g[2];tt>et[2];)++nt,rt=it*nt,b.push(this.getRenderTransform(o,c,d,HIT_DETECT_RESOLUTION,j,$,rt).slice()),tt-=it}this.hitDetectionImageData_=createHitDetectionImageData(s,b,this.renderedFeatures_,_.getStyleFunction(),g,c,d)}a(hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,a,s,o,c){if(!this.replayGroup_)return;const d=a.viewState.resolution,h=a.viewState.rotation,g=this.getLayer(),_={},b=function(_e,et,tt){const it=getUid(_e),nt=_[it];if(nt){if(nt!==!0&&tt<nt.distanceSq){if(tt===0)return _[it]=!0,c.splice(c.lastIndexOf(nt),1),o(_e,g,et);nt.geometry=et,nt.distanceSq=tt}}else{if(tt===0)return _[it]=!0,o(_e,g,et);c.push(_[it]={feature:_e,layer:g,geometry:et,distanceSq:tt,callback:o})}};let j;const $=[this.replayGroup_];return this.declutterExecutorGroup&&$.push(this.declutterExecutorGroup),$.some(_e=>j=_e.forEachFeatureAtCoordinate(e,d,h,s,b,_e===this.declutterExecutorGroup&&a.declutterTree?a.declutterTree.all().map(et=>et.value):null)),j}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const a=this.getLayer(),s=a.getSource();if(!s)return!1;const o=e.viewHints[ViewHint.ANIMATING],c=e.viewHints[ViewHint.INTERACTING],d=a.getUpdateWhileAnimating(),h=a.getUpdateWhileInteracting();if(this.ready&&!d&&o||!h&&c)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const g=e.extent,_=e.viewState,b=_.projection,j=_.resolution,$=e.pixelRatio,_e=a.getRevision(),et=a.getRenderBuffer();let tt=a.getRenderOrder();tt===void 0&&(tt=defaultOrder);const it=_.center.slice(),nt=buffer(g,et*j),rt=nt.slice(),at=[nt.slice()],st=b.getExtent();if(s.getWrapX()&&b.canWrapX()&&!containsExtent(st,e.extent)){const _t=getWidth(st),St=Math.max(getWidth(nt)/2,_t);nt[0]=st[0]-St,nt[2]=st[2]+St,wrapX$1(it,b);const Pt=wrapX$2(at[0],b);Pt[0]<st[0]&&Pt[2]<st[2]?at.push([Pt[0]+_t,Pt[1],Pt[2]+_t,Pt[3]]):Pt[0]>st[0]&&Pt[2]>st[2]&&at.push([Pt[0]-_t,Pt[1],Pt[2]-_t,Pt[3]])}if(this.ready&&this.renderedResolution_==j&&this.renderedRevision_==_e&&this.renderedRenderOrder_==tt&&containsExtent(this.wrappedRenderedExtent_,nt))return equals$2(this.renderedExtent_,rt)||(this.hitDetectionImageData_=null,this.renderedExtent_=rt),this.renderedCenter_=it,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const ot=new BuilderGroup(getTolerance(j,$),nt,j,$);let dt;this.getLayer().getDeclutter()&&(dt=new BuilderGroup(getTolerance(j,$),nt,j,$));let ut;for(let _t=0,St=at.length;_t<St;++_t)s.loadFeatures(at[_t],j,b);const ct=getSquaredTolerance(j,$);let ht=!0;const mt=_t=>{let St;const Pt=_t.getStyleFunction()||a.getStyleFunction();if(Pt&&(St=Pt(_t,j)),St){const bt=this.renderFeature(_t,ct,St,ot,ut,dt);ht=ht&&!bt}},pt=toUserExtent(nt),ft=s.getFeaturesInExtent(pt);tt&&ft.sort(tt);for(let _t=0,St=ft.length;_t<St;++_t)mt(ft[_t]);this.renderedFeatures_=ft,this.ready=ht;const yt=ot.finish(),Ct=new ExecutorGroup(nt,j,$,s.getOverlaps(),yt,a.getRenderBuffer());return dt&&(this.declutterExecutorGroup=new ExecutorGroup(nt,j,$,s.getOverlaps(),dt.finish(),a.getRenderBuffer())),this.renderedResolution_=j,this.renderedRevision_=_e,this.renderedRenderOrder_=tt,this.renderedExtent_=rt,this.wrappedRenderedExtent_=nt,this.renderedCenter_=it,this.renderedProjection_=b,this.replayGroup_=Ct,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,a,s,o,c,d){if(!s)return!1;let h=!1;if(Array.isArray(s))for(let g=0,_=s.length;g<_;++g)h=renderFeature$1(o,e,s[g],a,this.boundHandleStyleImageChange_,c,d)||h;else h=renderFeature$1(o,e,s,a,this.boundHandleStyleImageChange_,c,d);return h}}class VectorLayer extends BaseVectorLayer{constructor(e){super(e)}createRenderer(){return new CanvasVectorLayerRenderer(this)}}const CollectionEventType={ADD:"add",REMOVE:"remove"},Property$1={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(e,a,s){super(e),this.element=a,this.index=s}}class Collection extends BaseObject{constructor(e,a){if(super(),this.on,this.once,this.un,a=a||{},this.unique_=!!a.unique,this.array_=e||[],this.unique_)for(let s=0,o=this.array_.length;s<o;++s)this.assertUnique_(this.array_[s],s);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let a=0,s=e.length;a<s;++a)this.push(e[a]);return this}forEach(e){const a=this.array_;for(let s=0,o=a.length;s<o;++s)e(a[s],s,a)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Property$1.LENGTH)}insertAt(e,a){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(a),this.array_.splice(e,0,a),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,a,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const a=this.getLength();return this.insertAt(a,e),this.getLength()}remove(e){const a=this.array_;for(let s=0,o=a.length;s<o;++s)if(a[s]===e)return this.removeAt(s)}removeAt(e){if(e<0||e>=this.getLength())return;const a=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,a,e)),a}setAt(e,a){const s=this.getLength();if(e>=s){this.insertAt(e,a);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(a,e);const o=this.array_[e];this.array_[e]=a,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,o,e)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,a,e))}updateLength_(){this.set(Property$1.LENGTH,this.array_.length)}assertUnique_(e,a){for(let s=0,o=this.array_.length;s<o;++s)if(this.array_[s]===e&&s!==a)throw new Error("Duplicate item added to a unique collection")}}class RBush{constructor(e){this.rbush_=new RBush$1(e),this.items_={}}insert(e,a){const s={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:a};this.rbush_.insert(s),this.items_[getUid(a)]=s}load(e,a){const s=new Array(a.length);for(let o=0,c=a.length;o<c;o++){const d=e[o],h=a[o],g={minX:d[0],minY:d[1],maxX:d[2],maxY:d[3],value:h};s[o]=g,this.items_[getUid(h)]=g}this.rbush_.load(s)}remove(e){const a=getUid(e),s=this.items_[a];return delete this.items_[a],this.rbush_.remove(s)!==null}update(e,a){const s=this.items_[getUid(a)],o=[s.minX,s.minY,s.maxX,s.maxY];equals$1(o,e)||(this.remove(a),this.insert(e,a))}getAll(){return this.rbush_.all().map(function(a){return a.value})}getInExtent(e){const a={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(a).map(function(o){return o.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,a){return this.forEach_(this.getInExtent(e),a)}forEach_(e,a){let s;for(let o=0,c=e.length;o<c;o++)if(s=a(e[o]),s)return s;return s}isEmpty(){return isEmpty$1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const a=this.rbush_.toJSON();return createOrUpdate$2(a.minX,a.minY,a.maxX,a.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const a in e.items_)this.items_[a]=e.items_[a]}}const tmpTransform=create();class RenderFeature{constructor(e,a,s,o,c,d){this.styleFunction,this.extent_,this.id_=d,this.type_=e,this.flatCoordinates_=a,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=s,this.properties_=c,this.squaredTolerance_,this.stride_=o,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=inflateEnds(this.flatCoordinates_,this.ends_),a=linearRingss(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,e,2,a)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let a=0;const s=this.ends_;for(let o=0,c=s.length;o<c;++o){const d=s[o],h=interpolatePoint(e,a,d,2,.5);extend$4(this.flatMidpoints_,h),a=d}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,a){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=get$3(e);const a=e.getExtent(),s=e.getWorldExtent();if(a&&s){const o=getHeight(s)/getHeight(a);compose(tmpTransform,s[0],s[3],o,-o,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new RenderFeature(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=memoizeOne((e,a)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),a&&this.simplifiedGeometry_.applyTransform(a);const s=this.simplifiedGeometry_.getFlatCoordinates();let o;switch(this.type_){case"LineString":s.length=douglasPeucker(s,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,s,0),o=[s.length];break;case"MultiLineString":o=[],s.length=douglasPeuckerArray(s,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,s,0,o);break;case"Polygon":o=[],s.length=quantizeArray(s,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),s,0,o);break}return o&&(this.simplifiedGeometry_=new RenderFeature(this.type_,s,o,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;class Source extends BaseObject{constructor(e){super(),this.projection=get$3(e.projection),this.attributions_=adaptAttributions(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const a=this;this.viewPromise_=new Promise(function(s,o){a.viewResolver=s,a.viewRejector=o})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=adaptAttributions(e),this.changed()}setState(e){this.state_=e,this.changed()}}function adaptAttributions(i){return i?Array.isArray(i)?function(e){return i}:typeof i=="function"?i:function(e){return[i]}:null}const VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function all(i,e){return[[-1/0,-1/0,1/0,1/0]]}function bbox(i,e){return[i]}let withCredentials=!1;function loadFeaturesXhr(i,e,a,s,o,c,d){const h=new XMLHttpRequest;h.open("GET",typeof i=="function"?i(a,s,o):i,!0),e.getType()=="arraybuffer"&&(h.responseType="arraybuffer"),h.withCredentials=withCredentials,h.onload=function(g){if(!h.status||h.status>=200&&h.status<300){const _=e.getType();let b;_=="json"?b=JSON.parse(h.responseText):_=="text"?b=h.responseText:_=="xml"?(b=h.responseXML,b||(b=new DOMParser().parseFromString(h.responseText,"application/xml"))):_=="arraybuffer"&&(b=h.response),b?c(e.readFeatures(b,{extent:a,featureProjection:o}),e.readProjection(b)):d()}else d()},h.onerror=d,h.send()}function xhr(i,e){return function(a,s,o,c,d){const h=this;loadFeaturesXhr(i,e,a,s,o,function(g,_){h.addFeatures(g),c!==void 0&&c(g)},d||VOID)}}class VectorSourceEvent extends BaseEvent{constructor(e,a,s){super(e),this.feature=a,this.features=s}}class VectorSource extends Source{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=VOID,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(assert(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:all;const a=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=a?new RBush:null,this.loadedExtentsRtree_=new RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let s,o;Array.isArray(e.features)?o=e.features:e.features&&(s=e.features,o=s.getArray()),!a&&s===void 0&&(s=new Collection(o)),o!==void 0&&this.addFeaturesInternal(o),s!==void 0&&this.bindFeaturesCollection_(s)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const a=getUid(e);if(!this.addToIndex_(a,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(a,e);const s=e.getGeometry();if(s){const o=s.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,e)}else this.nullGeometryFeatures_[a]=e;this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,e))}setupChangeEvents_(e,a){a instanceof RenderFeature||(this.featureChangeKeys_[e]=[listen(a,EventType.CHANGE,this.handleFeatureChange_,this),listen(a,ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,a){let s=!0;if(a.getId()!==void 0){const o=String(a.getId());if(!(o in this.idIndex_))this.idIndex_[o]=a;else if(a instanceof RenderFeature){const c=this.idIndex_[o];c instanceof RenderFeature?Array.isArray(c)?c.push(a):this.idIndex_[o]=[c,a]:s=!1}else s=!1}return s&&(assert(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=a),s}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const a=[],s=[],o=[];for(let c=0,d=e.length;c<d;c++){const h=e[c],g=getUid(h);this.addToIndex_(g,h)&&s.push(h)}for(let c=0,d=s.length;c<d;c++){const h=s[c],g=getUid(h);this.setupChangeEvents_(g,h);const _=h.getGeometry();if(_){const b=_.getExtent();a.push(b),o.push(h)}else this.nullGeometryFeatures_[g]=h}if(this.featuresRtree_&&this.featuresRtree_.load(a,o),this.hasListener(VectorEventType.ADDFEATURE))for(let c=0,d=s.length;c<d;c++)this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,s[c]))}bindFeaturesCollection_(e){let a=!1;this.addEventListener(VectorEventType.ADDFEATURE,function(s){a||(a=!0,e.push(s.feature),a=!1)}),this.addEventListener(VectorEventType.REMOVEFEATURE,function(s){a||(a=!0,e.remove(s.feature),a=!1)}),e.addEventListener(CollectionEventType.ADD,s=>{a||(a=!0,this.addFeature(s.element),a=!1)}),e.addEventListener(CollectionEventType.REMOVE,s=>{a||(a=!0,this.removeFeature(s.element),a=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const s in this.featureChangeKeys_)this.featureChangeKeys_[s].forEach(unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const s=o=>{this.removeFeatureInternal(o)};this.featuresRtree_.forEach(s);for(const o in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const a=new VectorSourceEvent(VectorEventType.CLEAR);this.dispatchEvent(a),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,a){const s=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(s,function(o){const c=o.getGeometry();if(c instanceof RenderFeature||c.intersectsCoordinate(e))return a(o)})}forEachFeatureInExtent(e,a){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,a);this.featuresCollection_&&this.featuresCollection_.forEach(a)}forEachFeatureIntersectingExtent(e,a){return this.forEachFeatureInExtent(e,function(s){const o=s.getGeometry();if(o instanceof RenderFeature||o.intersectsExtent(e)){const c=a(s);if(c)return c}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),isEmpty$1(this.nullGeometryFeatures_)||extend$4(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const a=[];return this.forEachFeatureAtCoordinateDirect(e,function(s){a.push(s)}),a}getFeaturesInExtent(e,a){if(this.featuresRtree_){if(!(a&&a.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const o=wrapAndSliceX(e,a);return[].concat(...o.map(c=>this.featuresRtree_.getInExtent(c)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,a){const s=e[0],o=e[1];let c=null;const d=[NaN,NaN];let h=1/0;const g=[-1/0,-1/0,1/0,1/0];return a=a||TRUE,this.featuresRtree_.forEachInExtent(g,function(_){if(a(_)){const b=_.getGeometry(),j=h;if(h=b instanceof RenderFeature?0:b.closestPointXY(s,o,d,h),h<j){c=_;const $=Math.sqrt(h);g[0]=s-$,g[1]=o-$,g[2]=s+$,g[3]=o+$}}}),c}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const a=this.idIndex_[e.toString()];return a!==void 0?a:null}getFeatureByUid(e){const a=this.uidIndex_[e];return a!==void 0?a:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const a=e.target,s=getUid(a),o=a.getGeometry();if(!o)s in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(a),this.nullGeometryFeatures_[s]=a);else{const d=o.getExtent();s in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[s],this.featuresRtree_&&this.featuresRtree_.insert(d,a)):this.featuresRtree_&&this.featuresRtree_.update(d,a)}const c=a.getId();if(c!==void 0){const d=c.toString();this.idIndex_[d]!==a&&(this.removeFromIdIndex_(a),this.idIndex_[d]=a)}else this.removeFromIdIndex_(a),this.uidIndex_[s]=a;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE,a))}hasFeature(e){const a=e.getId();return a!==void 0?a in this.idIndex_:getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&isEmpty$1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,a,s){const o=this.loadedExtentsRtree_,c=this.strategy_(e,a,s);for(let d=0,h=c.length;d<h;++d){const g=c[d];o.forEachInExtent(g,function(b){return containsExtent(b.extent,g)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)),this.loader_.call(this,g,a,s,b=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND,void 0,b))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR))}),o.insert(g,{extent:g.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const a=this.loadedExtentsRtree_;let s;a.forEachInExtent(e,function(o){if(equals$1(o.extent,e))return s=o,!0}),s&&a.remove(s)}removeFeature(e){if(!e)return;const a=getUid(e);a in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[a]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const a=getUid(e),s=this.featureChangeKeys_[a];if(!s)return;s.forEach(unlistenByKey),delete this.featureChangeKeys_[a];const o=e.getId();return o!==void 0&&delete this.idIndex_[o.toString()],delete this.uidIndex_[a],this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let a=!1;for(const s in this.idIndex_){const o=this.idIndex_[s];if(e instanceof RenderFeature&&Array.isArray(o)&&o.includes(e))o.splice(o.indexOf(e),1);else if(this.idIndex_[s]===e){delete this.idIndex_[s],a=!0;break}}return a}setLoader(e){this.loader_=e}setUrl(e){assert(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xhr(e,this.format_))}}const DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class DrawEvent extends BaseEvent{constructor(e,a){super(e),this.feature=a}}function getTraceTargets(i,e){const a=[];for(let s=0;s<e.length;++s){const c=e[s].getGeometry();appendGeometryTraceTargets(i,c,a)}return a}function getSquaredDistance(i,e){return squaredDistance$1(i[0],i[1],e[0],e[1])}function getCoordinate(i,e){const a=i.length;return e<0?i[e+a]:e>=a?i[e-a]:i[e]}function getCumulativeSquaredDistance(i,e,a){let s,o;e<a?(s=e,o=a):(s=a,o=e);const c=Math.ceil(s),d=Math.floor(o);if(c>d){const g=interpolateCoordinate(i,s),_=interpolateCoordinate(i,o);return getSquaredDistance(g,_)}let h=0;if(s<c){const g=interpolateCoordinate(i,s),_=getCoordinate(i,c);h+=getSquaredDistance(g,_)}if(d<o){const g=getCoordinate(i,d),_=interpolateCoordinate(i,o);h+=getSquaredDistance(g,_)}for(let g=c;g<d-1;++g){const _=getCoordinate(i,g),b=getCoordinate(i,g+1);h+=getSquaredDistance(_,b)}return h}function appendGeometryTraceTargets(i,e,a){if(e instanceof LineString){appendTraceTarget(i,e.getCoordinates(),!1,a);return}if(e instanceof MultiLineString){const s=e.getCoordinates();for(let o=0,c=s.length;o<c;++o)appendTraceTarget(i,s[o],!1,a);return}if(e instanceof Polygon){const s=e.getCoordinates();for(let o=0,c=s.length;o<c;++o)appendTraceTarget(i,s[o],!0,a);return}if(e instanceof MultiPolygon){const s=e.getCoordinates();for(let o=0,c=s.length;o<c;++o){const d=s[o];for(let h=0,g=d.length;h<g;++h)appendTraceTarget(i,d[h],!0,a)}return}if(e instanceof GeometryCollection){const s=e.getGeometries();for(let o=0;o<s.length;++o)appendGeometryTraceTargets(i,s[o],a);return}}const sharedUpdateInfo={index:-1,endIndex:NaN};function getTraceTargetUpdate(i,e,a,s){const o=i[0],c=i[1];let d=1/0,h=-1,g=NaN;for(let j=0;j<e.targets.length;++j){const $=e.targets[j],_e=$.coordinates;let et=1/0,tt;for(let it=0;it<_e.length-1;++it){const nt=_e[it],rt=_e[it+1],at=getPointSegmentRelationship(o,c,nt,rt);at.squaredDistance<et&&(et=at.squaredDistance,tt=it+at.along)}et<d&&(d=et,$.ring&&e.targetIndex===j&&($.endIndex>$.startIndex?tt<$.startIndex&&(tt+=_e.length):$.endIndex<$.startIndex&&tt>$.startIndex&&(tt-=_e.length)),g=tt,h=j)}const _=e.targets[h];let b=_.ring;if(e.targetIndex===h&&b){const j=interpolateCoordinate(_.coordinates,g),$=a.getPixelFromCoordinate(j);distance($,e.startPx)>s&&(b=!1)}if(b){const j=_.coordinates,$=j.length,_e=_.startIndex,et=g;if(_e<et){const tt=getCumulativeSquaredDistance(j,_e,et);getCumulativeSquaredDistance(j,_e,et-$)<tt&&(g-=$)}else{const tt=getCumulativeSquaredDistance(j,_e,et);getCumulativeSquaredDistance(j,_e,et+$)<tt&&(g+=$)}}return sharedUpdateInfo.index=h,sharedUpdateInfo.endIndex=g,sharedUpdateInfo}function appendTraceTarget(i,e,a,s){const o=i[0],c=i[1];for(let d=0,h=e.length-1;d<h;++d){const g=e[d],_=e[d+1],b=getPointSegmentRelationship(o,c,g,_);if(b.squaredDistance===0){const j=d+b.along;s.push({coordinates:e,ring:a,startIndex:j,endIndex:j});return}}}const sharedRel={along:0,squaredDistance:0};function getPointSegmentRelationship(i,e,a,s){const o=a[0],c=a[1],d=s[0],h=s[1],g=d-o,_=h-c;let b=0,j=o,$=c;return(g!==0||_!==0)&&(b=clamp(((i-o)*g+(e-c)*_)/(g*g+_*_),0,1),j+=g*b,$+=_*b),sharedRel.along=b,sharedRel.squaredDistance=toFixed(squaredDistance$1(i,e,j,$),10),sharedRel}function interpolateCoordinate(i,e){const a=i.length;let s=Math.floor(e);const o=e-s;s>=a?s-=a:s<0&&(s+=a);let c=s+1;c>=a&&(c-=a);const d=i[s],h=d[0],g=d[1],_=i[c],b=_[0]-h,j=_[1]-g;return[h+b*o,g+j*o]}class Draw extends PointerInteraction{constructor(e){const a=e;a.stopDown||(a.stopDown=FALSE),super(a),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=getMode(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:TRUE,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let s=e.geometryFunction;if(!s){const o=this.mode_;if(o==="Circle")s=function(c,d,h){const g=d||new Circle([NaN,NaN]),_=fromUserCoordinate(c[0]),b=squaredDistance(_,fromUserCoordinate(c[c.length-1]));return g.setCenterAndRadius(_,Math.sqrt(b),this.geometryLayout_),g};else{let c;o==="Point"?c=Point$1:o==="LineString"?c=LineString:o==="Polygon"&&(c=Polygon),s=function(d,h,g){return h?o==="Polygon"?d[0].length?h.setCoordinates([d[0].concat([d[0][0]])],this.geometryLayout_):h.setCoordinates([],this.geometryLayout_):h.setCoordinates(d,this.geometryLayout_):h=new c(d,this.geometryLayout_),h}}}this.geometryFunction_=s,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:getDefaultStyleFunction$2(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=always$1:this.freehandCondition_=e.freehandCondition?e.freehandCondition:shiftKeyOnly,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(InteractionProperty.ACTIVE,this.updateState_)}setTrace(e){let a;e?e===!0?a=always$1:a=e:a=never,this.traceCondition_=a}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===EventType.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let a=e.type===MapBrowserEventType.POINTERMOVE,s=!0;return!this.freehand_&&this.lastDragTime_&&e.type===MapBrowserEventType.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,a=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===MapBrowserEventType.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),s=!1):this.freehand_&&e.type===MapBrowserEventType.POINTERDOWN?s=!1:a&&this.getPointerCount()<2?(s=e.type===MapBrowserEventType.POINTERMOVE,s&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===MapBrowserEventType.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===MapBrowserEventType.DBLCLICK&&(s=!1),super.handleEvent(e)&&s}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const a=this.getMap(),s=a.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),o=a.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),c=boundingExtent([s,o]),d=this.traceSource_.getFeaturesInExtent(c);if(d.length===0)return;const h=getTraceTargets(e.coordinate,d);h.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:h,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,a){const s=e.startIndex<=e.endIndex,o=e.startIndex<=a;s===o?s&&a>e.endIndex||!s&&a<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,a):(s&&a<e.endIndex||!s&&a>e.endIndex)&&this.removeTracedCoordinates_(a,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,a))}removeTracedCoordinates_(e,a){if(e===a)return;let s=0;if(e<a){const o=Math.ceil(e);let c=Math.floor(a);c===a&&(c-=1),s=c-o+1}else{const o=Math.floor(e);let c=Math.ceil(a);c===a&&(c+=1),s=o-c+1}s>0&&this.removeLastPoints_(s)}addTracedCoordinates_(e,a,s){if(a===s)return;const o=[];if(a<s){const c=Math.ceil(a);let d=Math.floor(s);d===s&&(d-=1);for(let h=c;h<=d;++h)o.push(getCoordinate(e.coordinates,h))}else{const c=Math.floor(a);let d=Math.ceil(s);d===s&&(d+=1);for(let h=c;h>=d;--h)o.push(getCoordinate(e.coordinates,h))}o.length&&this.appendCoordinates(o)}updateTrace_(e){const a=this.traceState_;if(!a.active||a.targetIndex===-1&&distance(a.startPx,e.pixel)<this.snapTolerance_)return;const s=getTraceTargetUpdate(e.coordinate,a,this.getMap(),this.snapTolerance_);if(a.targetIndex!==s.index){if(a.targetIndex!==-1){const g=a.targets[a.targetIndex];this.removeTracedCoordinates_(g.startIndex,g.endIndex)}const h=a.targets[s.index];this.addTracedCoordinates_(h,h.startIndex,s.endIndex)}else{const h=a.targets[a.targetIndex];this.addOrRemoveTracedCoordinates_(h,s.endIndex)}a.targetIndex=s.index;const o=a.targets[a.targetIndex];o.endIndex=s.endIndex;const c=interpolateCoordinate(o.coordinates,o.endIndex),d=this.getMap().getPixelFromCoordinate(c);e.coordinate=c,e.pixel=[Math.round(d[0]),Math.round(d[1])]}handleUpEvent(e){let a=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const s=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const o=!this.finishCoordinate_;o&&this.startDrawing_(e.coordinate),!o&&this.freehand_?this.finishDrawing():!this.freehand_&&(!o||this.mode_==="Point")&&(this.atFinish_(e.pixel,s)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),a=!1}else this.freehand_&&this.abortDrawing()}return!a&&this.stopClick_&&e.preventDefault(),a}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const a=this.downPx_,s=e.pixel,o=a[0]-s[0],c=a[1]-s[1],d=o*o+c*c;if(this.shouldHandle_=this.freehand_?d>this.squaredClickTolerance_:d<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,a){let s=!1;if(this.sketchFeature_){let o=!1,c=[this.finishCoordinate_];const d=this.mode_;if(d==="Point")s=!0;else if(d==="Circle")s=this.sketchCoords_.length===2;else if(d==="LineString")o=!a&&this.sketchCoords_.length>this.minPoints_;else if(d==="Polygon"){const h=this.sketchCoords_;o=h[0].length>this.minPoints_,c=[h[0][0],h[0][h[0].length-2]],a?c=[h[0][0]]:c=[h[0][0],h[0][h[0].length-2]]}if(o){const h=this.getMap();for(let g=0,_=c.length;g<_;g++){const b=c[g],j=h.getPixelFromCoordinate(b),$=e[0]-j[0],_e=e[1]-j[1],et=this.freehand_?1:this.snapTolerance_;if(s=Math.sqrt($*$+_e*_e)<=et,s){this.finishCoordinate_=b;break}}}}return s}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Feature(new Point$1(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Feature);const a=e.getLinearRing(0);let s=this.sketchLine_.getGeometry();s?(s.setFlatCoordinates(a.getLayout(),a.getFlatCoordinates()),s.changed()):(s=new LineString(a.getFlatCoordinates(),a.getLayout()),this.sketchLine_.setGeometry(s))}startDrawing_(e){const a=this.getMap().getView().getProjection(),s=getStrideForLayout(this.geometryLayout_);for(;e.length<s;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Feature(new LineString(this.sketchLineCoords_)));const o=this.geometryFunction_(this.sketchCoords_,void 0,a);this.sketchFeature_=new Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const a=this.getMap(),s=this.sketchFeature_.getGeometry(),o=a.getView().getProjection(),c=getStrideForLayout(this.geometryLayout_);let d,h;for(;e.length<c;)e.push(0);this.mode_==="Point"?h=this.sketchCoords_:this.mode_==="Polygon"?(d=this.sketchCoords_[0],h=d[d.length-1],this.atFinish_(a.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(d=this.sketchCoords_,h=d[d.length-1]),h[0]=e[0],h[1]=e[1],this.geometryFunction_(this.sketchCoords_,s,o),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),s.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(s):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const a=this.sketchFeature_.getGeometry(),s=this.getMap().getView().getProjection();let o,c;const d=this.mode_;d==="LineString"||d==="Circle"?(this.finishCoordinate_=e.slice(),c=this.sketchCoords_,c.length>=this.maxPoints_&&(this.freehand_?c.pop():o=!0),c.push(e.slice()),this.geometryFunction_(c,a,s)):d==="Polygon"&&(c=this.sketchCoords_[0],c.length>=this.maxPoints_&&(this.freehand_?c.pop():o=!0),c.push(e.slice()),o&&(this.finishCoordinate_=c[0]),this.geometryFunction_(this.sketchCoords_,a,s)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),o&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const a=this.sketchFeature_.getGeometry(),s=this.getMap().getView().getProjection(),o=this.mode_;for(let c=0;c<e;++c){let d;if(o==="LineString"||o==="Circle"){if(d=this.sketchCoords_,d.splice(-2,1),d.length>=2){this.finishCoordinate_=d[d.length-2].slice();const h=this.finishCoordinate_.slice();d[d.length-1]=h,this.createOrUpdateSketchPoint_(h)}this.geometryFunction_(d,a,s),a.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(a)}else if(o==="Polygon"){d=this.sketchCoords_[0],d.splice(-2,1);const h=this.sketchLine_.getGeometry();if(d.length>=2){const g=d[d.length-2].slice();d[d.length-1]=g,this.createOrUpdateSketchPoint_(g)}h.setCoordinates(d),this.geometryFunction_(this.sketchCoords_,a,s)}if(d.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let a=this.sketchCoords_;const s=e.getGeometry(),o=this.getMap().getView().getProjection();this.mode_==="LineString"?(a.pop(),this.geometryFunction_(a,s,o)):this.mode_==="Polygon"&&(a[0].pop(),this.geometryFunction_(a,s,o),a=s.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new MultiPoint([a])):this.type_==="MultiLineString"?e.setGeometry(new MultiLineString([a])):this.type_==="MultiPolygon"&&e.setGeometry(new MultiPolygon([a])),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT,e))}appendCoordinates(e){const a=this.mode_,s=!this.sketchFeature_;s&&this.startDrawing_(e[0]);let o;if(a==="LineString"||a==="Circle")o=this.sketchCoords_;else if(a==="Polygon")o=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;s&&o.shift(),o.pop();for(let d=0;d<e.length;d++)this.addToDrawing_(e[d]);const c=e[e.length-1];this.addToDrawing_(c),this.modifyDrawing_(c)}extend(e){const s=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=s.getCoordinates();const o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.sketchPoint_=new Feature(new Point$1(o)),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const a=this.overlay_.getSource();a.clear(!0),a.addFeatures(e)}updateState_(){const e=this.getMap(),a=this.getActive();(!e||!a)&&this.abortDrawing(),this.overlay_.setMap(a?e:null)}}function getDefaultStyleFunction$2(){const i=createEditingStyle();return function(e,a){return i[e.getGeometry().getType()]}}function getMode(i){switch(i){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+i)}}const Key={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KeyboardPan extends Interaction{constructor(e){super(),e=e||{},this.defaultCondition_=function(a){return noModifierKeys(a)&&targetNotEditable(a)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let a=!1;if(e.type==EventType.KEYDOWN){const s=e.originalEvent,o=s.key;if(this.condition_(e)&&(o==Key.DOWN||o==Key.LEFT||o==Key.RIGHT||o==Key.UP)){const d=e.map.getView(),h=d.getResolution()*this.pixelDelta_;let g=0,_=0;o==Key.DOWN?_=-h:o==Key.LEFT?g=-h:o==Key.RIGHT?g=h:_=h;const b=[g,_];rotate$1(b,d.getRotation()),pan(d,b,this.duration_),s.preventDefault(),a=!0}}return!a}}class KeyboardZoom extends Interaction{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(a){return!platformModifierKey(a)&&targetNotEditable(a)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let a=!1;if(e.type==EventType.KEYDOWN||e.type==EventType.KEYPRESS){const s=e.originalEvent,o=s.key;if(this.condition_(e)&&(o==="+"||o==="-")){const c=e.map,d=o==="+"?this.delta_:-this.delta_,h=c.getView();zoomByDelta(h,d,void 0,this.duration_),s.preventDefault(),a=!0}}return!a}}const CIRCLE_CENTER_INDEX=0,CIRCLE_CIRCUMFERENCE_INDEX=1,tempExtent=[0,0,0,0],tempSegment=[],ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class ModifyEvent extends BaseEvent{constructor(e,a,s){super(e),this.features=a,this.mapBrowserEvent=s}}class Modify extends PointerInteraction{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:primaryAction,this.defaultDeleteCondition_=function(s){return altKeyOnly(s)&&singleClick(s)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:always$1,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new RBush,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:getDefaultStyleFunction$1(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let a;if(e.features?a=e.features:e.source&&(this.source_=e.source,a=new Collection(this.source_.getFeatures()),this.source_.addEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!a)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=a,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(CollectionEventType.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(CollectionEventType.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const a=e.getGeometry();if(a){const o=this.SEGMENT_WRITERS_[a.getType()];o&&o(e,a)}const s=this.getMap();s&&s.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,s),e.addEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,a){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Collection;const s=this.featuresBeingModified_.getArray();for(let o=0,c=a.length;o<c;++o){const d=a[o];for(let h=0,g=d.length;h<g;++h){const _=d[h].feature;_&&!s.includes(_)&&this.featuresBeingModified_.push(_)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const a=this.rBush_,s=[];a.forEach(function(o){e===o.feature&&s.push(o)});for(let o=s.length-1;o>=0;--o){const c=s[o];for(let d=this.dragSegments_.length-1;d>=0;--d)this.dragSegments_[d][0]===c&&this.dragSegments_.splice(d,1);a.remove(c)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const a=e.target;this.removeFeature_(a),this.addFeature_(a)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,a){const s=a.getCoordinates(),o={feature:e,geometry:a,segment:[s,s]};this.rBush_.insert(a.getExtent(),o)}writeMultiPointGeometry_(e,a){const s=a.getCoordinates();for(let o=0,c=s.length;o<c;++o){const d=s[o],h={feature:e,geometry:a,depth:[o],index:o,segment:[d,d]};this.rBush_.insert(a.getExtent(),h)}}writeLineStringGeometry_(e,a){const s=a.getCoordinates();for(let o=0,c=s.length-1;o<c;++o){const d=s.slice(o,o+2),h={feature:e,geometry:a,index:o,segment:d};this.rBush_.insert(boundingExtent(d),h)}}writeMultiLineStringGeometry_(e,a){const s=a.getCoordinates();for(let o=0,c=s.length;o<c;++o){const d=s[o];for(let h=0,g=d.length-1;h<g;++h){const _=d.slice(h,h+2),b={feature:e,geometry:a,depth:[o],index:h,segment:_};this.rBush_.insert(boundingExtent(_),b)}}}writePolygonGeometry_(e,a){const s=a.getCoordinates();for(let o=0,c=s.length;o<c;++o){const d=s[o];for(let h=0,g=d.length-1;h<g;++h){const _=d.slice(h,h+2),b={feature:e,geometry:a,depth:[o],index:h,segment:_};this.rBush_.insert(boundingExtent(_),b)}}}writeMultiPolygonGeometry_(e,a){const s=a.getCoordinates();for(let o=0,c=s.length;o<c;++o){const d=s[o];for(let h=0,g=d.length;h<g;++h){const _=d[h];for(let b=0,j=_.length-1;b<j;++b){const $=_.slice(b,b+2),_e={feature:e,geometry:a,depth:[h,o],index:b,segment:$};this.rBush_.insert(boundingExtent($),_e)}}}}writeCircleGeometry_(e,a){const s=a.getCenter(),o={feature:e,geometry:a,index:CIRCLE_CENTER_INDEX,segment:[s,s]},c={feature:e,geometry:a,index:CIRCLE_CIRCUMFERENCE_INDEX,segment:[s,s]},d=[o,c];o.featureSegments=d,c.featureSegments=d,this.rBush_.insert(createOrUpdateFromCoordinate(s),o);let h=a;this.rBush_.insert(h.getExtent(),c)}writeGeometryCollectionGeometry_(e,a){const s=a.getGeometriesArray();for(let o=0;o<s.length;++o){const c=s[o],d=this.SEGMENT_WRITERS_[c.getType()];d(e,c)}}createOrUpdateVertexFeature_(e,a,s){let o=this.vertexFeature_;return o?o.getGeometry().setCoordinates(e):(o=new Feature(new Point$1(e)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o)),o.set("features",a),o.set("geometries",s),o}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let a;return!e.map.getView().getInteracting()&&e.type==MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_?a=this.removePoint():a=!0),e.type==MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!a}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const a=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],s=[],o=[];for(let c=0,d=this.dragSegments_.length;c<d;++c){const h=this.dragSegments_[c],g=h[0],_=g.feature;s.includes(_)||s.push(_);const b=g.geometry;o.includes(b)||o.push(b);const j=g.depth;let $;const _e=g.segment,et=h[1];for(;a.length<b.getStride();)a.push(_e[et][a.length]);switch(b.getType()){case"Point":$=a,_e[0]=a,_e[1]=a;break;case"MultiPoint":$=b.getCoordinates(),$[g.index]=a,_e[0]=a,_e[1]=a;break;case"LineString":$=b.getCoordinates(),$[g.index+et]=a,_e[et]=a;break;case"MultiLineString":$=b.getCoordinates(),$[j[0]][g.index+et]=a,_e[et]=a;break;case"Polygon":$=b.getCoordinates(),$[j[0]][g.index+et]=a,_e[et]=a;break;case"MultiPolygon":$=b.getCoordinates(),$[j[1]][j[0]][g.index+et]=a,_e[et]=a;break;case"Circle":if(_e[0]=a,_e[1]=a,g.index===CIRCLE_CENTER_INDEX)this.changingFeature_=!0,b.setCenter(a),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let tt=distance(fromUserCoordinate(b.getCenter()),fromUserCoordinate(a));b.setRadius(tt),this.changingFeature_=!1}break}$&&this.setGeometryCoordinates_(b,$)}this.createOrUpdateVertexFeature_(a,s,o)}handleDownEvent(e){if(!this.condition_(e))return!1;const a=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,a),this.dragSegments_.length=0,this.featuresBeingModified_=null;const s=this.vertexFeature_;if(s){e.map.getView().getProjection();const o=[],c=s.getGeometry().getCoordinates(),d=boundingExtent([c]),h=this.rBush_.getInExtent(d),g={};h.sort(compareIndexes);for(let _=0,b=h.length;_<b;++_){const j=h[_],$=j.segment;let _e=getUid(j.geometry);const et=j.depth;if(et&&(_e+="-"+et.join("-")),g[_e]||(g[_e]=new Array(2)),j.geometry.getType()==="Circle"&&j.index===CIRCLE_CIRCUMFERENCE_INDEX){const tt=closestOnSegmentData(a,j);equals(tt,c)&&!g[_e][0]&&(this.dragSegments_.push([j,0]),g[_e][0]=j);continue}if(equals($[0],c)&&!g[_e][0]){this.dragSegments_.push([j,0]),g[_e][0]=j;continue}if(equals($[1],c)&&!g[_e][1]){if(g[_e][0]&&g[_e][0].index===0){let tt=j.geometry.getCoordinates();switch(j.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":tt=tt[et[1]];case"Polygon":if(j.index!==tt[et[0]].length-2)continue;break}}this.dragSegments_.push([j,1]),g[_e][1]=j;continue}getUid($)in this.vertexSegments_&&!g[_e][0]&&!g[_e][1]&&this.insertVertexCondition_(e)&&o.push(j)}o.length&&this.willModifyFeatures_(e,[o]);for(let _=o.length-1;_>=0;--_)this.insertVertex_(o[_],c)}return!!this.vertexFeature_}handleUpEvent(e){for(let a=this.dragSegments_.length-1;a>=0;--a){const s=this.dragSegments_[a][0],o=s.geometry;if(o.getType()==="Circle"){const c=o.getCenter(),d=s.featureSegments[0],h=s.featureSegments[1];d.segment[0]=c,d.segment[1]=c,h.segment[0]=c,h.segment[1]=c,this.rBush_.update(createOrUpdateFromCoordinate(c),d);let g=o;this.rBush_.update(g.getExtent(),h)}else this.rBush_.update(boundingExtent(s.segment),s)}return this.featuresBeingModified_&&(this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,a,s){const o=s||a.getCoordinateFromPixel(e);a.getView().getProjection();const c=function(g,_){return projectedDistanceToSegmentDataSquared(o,g)-projectedDistanceToSegmentDataSquared(o,_)};let d,h;if(this.hitDetection_){const g=typeof this.hitDetection_=="object"?_=>_===this.hitDetection_:void 0;a.forEachFeatureAtPixel(e,(_,b,j)=>{j&&j.getType()==="Point"&&(j=new Point$1(toUserCoordinate(j.getCoordinates())));const $=j||_.getGeometry();if(_ instanceof Feature&&this.features_.getArray().includes(_)){h=$;const _e=_.getGeometry().getFlatCoordinates().slice(0,2);d=[{feature:_,geometry:h,segment:[_e,_e]}]}return!0},{layerFilter:g})}if(!d){const g=fromUserExtent(createOrUpdateFromCoordinate(o,tempExtent)),_=a.getView().getResolution()*this.pixelTolerance_,b=toUserExtent(buffer(g,_,tempExtent));d=this.rBush_.getInExtent(b)}if(d&&d.length>0){const g=d.sort(c)[0],_=g.segment;let b=closestOnSegmentData(o,g);const j=a.getPixelFromCoordinate(b);let $=distance(e,j);if(h||$<=this.pixelTolerance_){const _e={};if(_e[getUid(_)]=!0,this.snapToPointer_||(this.delta_[0]=b[0]-o[0],this.delta_[1]=b[1]-o[1]),g.geometry.getType()==="Circle"&&g.index===CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(b,[g.feature],[g.geometry]);else{const et=a.getPixelFromCoordinate(_[0]),tt=a.getPixelFromCoordinate(_[1]),it=squaredDistance(j,et),nt=squaredDistance(j,tt);$=Math.sqrt(Math.min(it,nt)),this.snappedToVertex_=$<=this.pixelTolerance_,this.snappedToVertex_&&(b=it>nt?_[1]:_[0]),this.createOrUpdateVertexFeature_(b,[g.feature],[g.geometry]);const rt={};rt[getUid(g.geometry)]=!0;for(let at=1,st=d.length;at<st;++at){const ot=d[at].segment;if(equals(_[0],ot[0])&&equals(_[1],ot[1])||equals(_[0],ot[1])&&equals(_[1],ot[0])){const dt=getUid(d[at].geometry);dt in rt||(rt[dt]=!0,_e[getUid(ot)]=!0)}else break}}this.vertexSegments_=_e;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,a){const s=e.segment,o=e.feature,c=e.geometry,d=e.depth,h=e.index;let g;for(;a.length<c.getStride();)a.push(0);switch(c.getType()){case"MultiLineString":g=c.getCoordinates(),g[d[0]].splice(h+1,0,a);break;case"Polygon":g=c.getCoordinates(),g[d[0]].splice(h+1,0,a);break;case"MultiPolygon":g=c.getCoordinates(),g[d[1]][d[0]].splice(h+1,0,a);break;case"LineString":g=c.getCoordinates(),g.splice(h+1,0,a);break;default:return}this.setGeometryCoordinates_(c,g);const _=this.rBush_;_.remove(e),this.updateSegmentIndices_(c,h,d,1);const b={segment:[s[0],a],feature:o,geometry:c,depth:d,index:h};_.insert(boundingExtent(b.segment),b),this.dragSegments_.push([b,1]);const j={segment:[a,s[1]],feature:o,geometry:c,depth:d,index:h+1};_.insert(boundingExtent(j.segment),j),this.dragSegments_.push([j,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=MapBrowserEventType.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const a=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,a}return!1}removeVertex_(){const e=this.dragSegments_,a={};let s=!1,o,c,d,h,g,_,b,j,$,_e,et;for(g=e.length-1;g>=0;--g)d=e[g],_e=d[0],et=getUid(_e.feature),_e.depth&&(et+="-"+_e.depth.join("-")),et in a||(a[et]={}),d[1]===0?(a[et].right=_e,a[et].index=_e.index):d[1]==1&&(a[et].left=_e,a[et].index=_e.index+1);for(et in a){switch($=a[et].right,b=a[et].left,_=a[et].index,j=_-1,b!==void 0?_e=b:_e=$,j<0&&(j=0),h=_e.geometry,c=h.getCoordinates(),o=c,s=!1,h.getType()){case"MultiLineString":c[_e.depth[0]].length>2&&(c[_e.depth[0]].splice(_,1),s=!0);break;case"LineString":c.length>2&&(c.splice(_,1),s=!0);break;case"MultiPolygon":o=o[_e.depth[1]];case"Polygon":o=o[_e.depth[0]],o.length>4&&(_==o.length-1&&(_=0),o.splice(_,1),s=!0,_===0&&(o.pop(),o.push(o[0]),j=o.length-1));break}if(s){this.setGeometryCoordinates_(h,c);const tt=[];if(b!==void 0&&(this.rBush_.remove(b),tt.push(b.segment[0])),$!==void 0&&(this.rBush_.remove($),tt.push($.segment[1])),b!==void 0&&$!==void 0){const it={depth:_e.depth,feature:_e.feature,geometry:_e.geometry,index:j,segment:tt};this.rBush_.insert(boundingExtent(it.segment),it)}this.updateSegmentIndices_(h,_,_e.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return s}setGeometryCoordinates_(e,a){this.changingFeature_=!0,e.setCoordinates(a),this.changingFeature_=!1}updateSegmentIndices_(e,a,s,o){this.rBush_.forEachInExtent(e.getExtent(),function(c){c.geometry===e&&(s===void 0||c.depth===void 0||equals$2(c.depth,s))&&c.index>a&&(c.index+=o)})}}function compareIndexes(i,e){return i.index-e.index}function projectedDistanceToSegmentDataSquared(i,e,a){const s=e.geometry;if(s.getType()==="Circle"){let c=s;if(e.index===CIRCLE_CIRCUMFERENCE_INDEX){const d=squaredDistance(c.getCenter(),fromUserCoordinate(i)),h=Math.sqrt(d)-c.getRadius();return h*h}}const o=fromUserCoordinate(i);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),squaredDistanceToSegment(o,tempSegment)}function closestOnSegmentData(i,e,a){const s=e.geometry;if(s.getType()==="Circle"&&e.index===CIRCLE_CIRCUMFERENCE_INDEX)return toUserCoordinate(s.getClosestPoint(fromUserCoordinate(i)));const o=fromUserCoordinate(i);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),toUserCoordinate(closestOnSegment(o,tempSegment))}function getDefaultStyleFunction$1(){const i=createEditingStyle();return function(e,a){return i.Point}}class MouseWheelZoom extends Interaction{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const a=e.condition?e.condition:always$1;this.condition_=e.onFocusOnly?all$1(focusWithTabindex,a):a,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==EventType.WHEEL)return!0;const s=e.map,o=e.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let c;if(e.type==EventType.WHEEL&&(c=o.deltaY,FIREFOX&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(c/=DEVICE_PIXEL_RATIO),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(c*=40)),c===0)return!1;this.lastDelta_=c;const d=Date.now();this.startTime_===void 0&&(this.startTime_=d),(!this.mode_||d-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(c)<4?"trackpad":"wheel");const h=s.getView();if(this.mode_==="trackpad"&&!(h.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(h.getAnimating()&&h.cancelAnimations(),h.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),h.adjustZoom(-c/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=d,!1;this.totalDelta_+=c;const g=Math.max(this.timeout_-(d-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,s),g),!1}handleWheelZoom_(e){const a=e.getView();a.getAnimating()&&a.cancelAnimations();let s=-clamp(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(a.getConstrainResolution()||this.constrainResolution_)&&(s=s?s>0?1:-1:0),zoomByDelta(a,s,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class PinchRotate extends PointerInteraction{constructor(e){e=e||{};const a=e;a.stopDown||(a.stopDown=FALSE),super(a),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let a=0;const s=this.targetPointers[0],o=this.targetPointers[1],c=Math.atan2(o.clientY-s.clientY,o.clientX-s.clientX);if(this.lastAngle_!==void 0){const g=c-this.lastAngle_;this.rotationDelta_+=g,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),a=g}this.lastAngle_=c;const d=e.map,h=d.getView();h.getConstraints().rotation!==disable&&(this.anchor_=d.getCoordinateFromPixelInternal(d.getEventPixel(centroid(this.targetPointers))),this.rotating_&&(d.render(),h.adjustRotationInternal(a,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const a=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||a.getView().beginInteraction(),!0}return!1}}class PinchZoom extends PointerInteraction{constructor(e){e=e||{};const a=e;a.stopDown||(a.stopDown=FALSE),super(a),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let a=1;const s=this.targetPointers[0],o=this.targetPointers[1],c=s.clientX-o.clientX,d=s.clientY-o.clientY,h=Math.sqrt(c*c+d*d);this.lastDistance_!==void 0&&(a=this.lastDistance_/h),this.lastDistance_=h;const g=e.map,_=g.getView();a!=1&&(this.lastScaleDelta_=a),this.anchor_=g.getCoordinateFromPixelInternal(g.getEventPixel(centroid(this.targetPointers))),g.render(),_.adjustResolutionInternal(a,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const s=e.map.getView(),o=this.lastScaleDelta_>1?1:-1;return s.endInteraction(this.duration_,o),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const a=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||a.getView().beginInteraction(),!0}return!1}}const SelectEventType={SELECT:"select"};class SelectEvent extends BaseEvent{constructor(e,a,s,o){super(e),this.selected=a,this.deselected=s,this.mapBrowserEvent=o}}const originalFeatureStyles={};class Select extends Interaction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:singleClick,this.addCondition_=e.addCondition?e.addCondition:never,this.removeCondition_=e.removeCondition?e.removeCondition:never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:shiftKeyOnly,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:getDefaultStyleFunction(),this.features_=e.features||new Collection;let a;if(e.layers)if(typeof e.layers=="function")a=e.layers;else{const s=e.layers;a=function(o){return s.includes(o)}}else a=TRUE;this.layerFilter_=a,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,a){this.featureLayerAssociation_[getUid(e)]=a}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[getUid(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.addEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.removeEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const a=e.element;if(this.style_&&this.applySelectedStyle_(a),!this.getLayer(a)){const s=this.getMap().getAllLayers().find(function(o){if(o instanceof VectorLayer&&o.getSource()&&o.getSource().hasFeature(a))return o});s&&this.addFeatureLayerAssociation_(a,s)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const a=getUid(e);a in originalFeatureStyles||(originalFeatureStyles[a]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const a=this.getMap().getInteractions().getArray();for(let o=a.length-1;o>=0;--o){const c=a[o];if(c!==this&&c instanceof Select&&c.getStyle()&&c.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(c.getStyle());return}}const s=getUid(e);e.setStyle(originalFeatureStyles[s]),delete originalFeatureStyles[s]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[getUid(e)]}handleEvent(e){if(!this.condition_(e))return!0;const a=this.addCondition_(e),s=this.removeCondition_(e),o=this.toggleCondition_(e),c=!a&&!s&&!o,d=e.map,h=this.getFeatures(),g=[],_=[];if(c){clear$1(this.featureLayerAssociation_),d.forEachFeatureAtPixel(e.pixel,(b,j)=>{if(!(!(b instanceof Feature)||!this.filter_(b,j)))return this.addFeatureLayerAssociation_(b,j),_.push(b),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let b=h.getLength()-1;b>=0;--b){const j=h.item(b),$=_.indexOf(j);$>-1?_.splice($,1):(h.remove(j),g.push(j))}_.length!==0&&h.extend(_)}else{d.forEachFeatureAtPixel(e.pixel,(b,j)=>{if(!(!(b instanceof Feature)||!this.filter_(b,j)))return(a||o)&&!h.getArray().includes(b)?(this.addFeatureLayerAssociation_(b,j),_.push(b)):(s||o)&&h.getArray().includes(b)&&(g.push(b),this.removeFeatureLayerAssociation_(b)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let b=g.length-1;b>=0;--b)h.remove(g[b]);h.extend(_)}return(_.length>0||g.length>0)&&this.dispatchEvent(new SelectEvent(SelectEventType.SELECT,_,g,e)),!0}}function getDefaultStyleFunction(){const i=createEditingStyle();return extend$4(i.Polygon,i.LineString),extend$4(i.GeometryCollection,i.LineString),function(e){return e.getGeometry()?i[e.getGeometry().getType()]:null}}class Kinetic{constructor(e,a,s){this.decay_=e,this.minVelocity_=a,this.delay_=s,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,a){this.points_.push(e,a,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,a=this.points_.length-3;if(this.points_[a+2]<e)return!1;let s=a-3;for(;s>0&&this.points_[s+2]>e;)s-=3;const o=this.points_[a+2]-this.points_[s+2];if(o<1e3/60)return!1;const c=this.points_[a]-this.points_[s],d=this.points_[a+1]-this.points_[s+1];return this.angle_=Math.atan2(d,c),this.initialVelocity_=Math.sqrt(c*c+d*d)/o,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}function defaults$1(i){i=i||{};const e=new Collection,a=new Kinetic(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new DragRotate),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new DoubleClickZoom({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new DragPan({onFocusOnly:i.onFocusOnly,kinetic:a})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new PinchRotate),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new PinchZoom({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new KeyboardPan),e.push(new KeyboardZoom({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new MouseWheelZoom({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new DragZoom({duration:i.zoomDuration})),e}var logger$4=LoggerByDefault$1.getLogger("interactions"),Interactions={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(i,e){logger$4.trace("unset()");var a={};Helper.mergeParams(a,this._options),Helper.mergeParams(a,e);for(var s=i.getInteractions().getArray(),o=0;o<s.length;o++)if(s[o].getActive()&&(s[o]instanceof Draw||s[o]instanceof Select||s[o]instanceof Modify)){var c=s[o].getProperties(),d=c.name;if(typeof d<"u"&&this._extensions.indexOf(d)>-1){if(a.current&&a.current===d)continue;s[o].setActive(!1);var h=c.source;if(typeof h<"u"&&h instanceof Control){for(var g in a)if(a.hasOwnProperty(g)){if(g==="current")continue;if(typeof h[g]=="function"){var _=Array.isArray(a[g])?a[g]:[a[g]];h[g].apply(h,_)}}}}else s[o].setActive(!1)}}},MathUtils={modulo:function(i,e){var a=i%e;return a*e<0?a+e:a},decimalToDMS:function(i,e,a){var s=this.modulo(i+180,360)-180,o=Math.abs(3600*s),c=a||0,d=Math.pow(10,c),h=Math.floor(o/3600),g=Math.floor((o-h*3600)/60),_=o-h*3600-g*60;_=Math.ceil(_*d)/d,_>=60&&(_=0,g+=1),g>=60&&(g=0,h+=1);var b=e.charAt(s<0?1:0);return{d:h,m:g,s:_,direction:b}},dmsToDecimal(i,e,a,s){var o=i+e/60+a/3600;return(s=="S"||s=="O")&&(o=o*-1),o},coordinateToDecimal(i){var e={};return e.lat=i[1].toFixed(6),e.lng=i[0].toFixed(6),e.unit="°",e},coordinateToDMS(i){return{lng:MathUtils.decimalToDMS(i[0],"EO",2),lat:MathUtils.decimalToDMS(i[1],"NS",2),unit:"DMS"}},coordinateToRad(i){var e={},a=.017453292519943295;return e.lng=i[0]*a,e.lng=e.lng.toFixed(8),e.lat=i[1]*a,e.lat=e.lat.toFixed(8),e.unit="rad",e},coordinateToGon(i){var e={},a=1.1111111111111112;return e.lng=i[0]*a,e.lng=e.lng.toFixed(8),e.lat=i[1]*a,e.lat=e.lat.toFixed(8),e.unit="gon",e},coordinateToMeter(i){var e={};return e.x=i[0].toFixed(2),e.y=i[1].toFixed(2),e.unit="m",e},coordinateToKMeter(i){var e={};return e.x=(i[0]/1e3).toFixed(2),e.y=(i[1]/1e3).toFixed(2),e.unit="km",e},toInteger:function(i,e){var a=e||10,s=parseInt(i,a);return!isNaN(s)&&isFinite(s)?s:null},isInteger:function(i){if(isNaN(i))return!1;var e=parseFloat(i);return(e|0)===e},toFloat:function(i){var e=parseFloat(i);return!isNaN(e)&&isFinite(e)?e:null}},SearchEngineUtils={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"category",title:"Type",value:["cimetière","aérodrome","réservoir","administratif","construction linéaire","construction ponctuelle","construction surfacique","cours d'eau","détail hydrographique","détail orographique","équipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par câble","zone d'activité ou d'intérêt","zone d'habitation","lieu-dit non habité"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],CadastralParcel:[{name:"departmentcode",title:"Code département (INSEE)",description:"Code INSEE du département (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"oldmunicipalitycode",title:"Commune absorbée",description:"Commune absorbée : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractères (chiffre et/ou lettre)"},{name:"number",title:"Numéro",description:"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numéro de la feuille cadastrale"}]},zoomToResultsByDefault:function(i){var e=15,a=i.service,s=i.fields,o=i.type,c={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return a==="SuggestedLocation"&&o==="PositionOfInterest"&&(e=c[s.classification]),a==="GeocodedLocation"&&o==="PositionOfInterest"&&(e=c[s.importance]||14),o==="StreetAddress"&&(e=17),o==="CadastralParcel"&&(e=17),e}},GeocodeUtils={getGeocodedLocationFreeform:function(i){var e=i.placeAttributes;if(e.label)return e.label;if(i.type==="PositionOfInterest"){var a=e.toponym;return e.category&&Array.isArray(e.category)&&e.category.length>=2&&e.category[0]==="administratif"?a=a+", "+e.category[1]:e.postcode&&(a=a+", "+e.postcode[0],e.city&&(a=a+" "+e.city[0])),a}else return i.type==="StreetAddress"?(e.housenumber?e.housenumber+" ":"")+e.street+" "+(e.postcode?e.postcode+", ":"")+e.city:i.type==="CadastralParcel"?e.id:"..."},getSuggestedLocationFreeform:function(i){if(i.fullText)return i.fullText;var e=[];return e.push(i.street||""),e.push(i.postalCode||""),e.push(i.commune||""),i.type==="PositionOfInterest"&&(e.push(i.poi||""),e.push(i.kind||"")),e.join(" - ")}};function globals(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$2={};exports$2.greenwich=0;exports$2.lisbon=-9.131906111111;exports$2.paris=2.337229166667;exports$2.bogota=-74.080916666667;exports$2.madrid=-3.687938888889;exports$2.rome=12.452333333333;exports$2.bern=7.439583333333;exports$2.jakarta=106.807719444444;exports$2.ferro=-17.666666666667;exports$2.brussels=4.367975;exports$2.stockholm=18.058277777778;exports$2.athens=23.7163375;exports$2.oslo=10.722916666667;const units={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var ignoredChar=/[\s_\-\/\(\)]/g;function match(i,e){if(i[e])return i[e];for(var a=Object.keys(i),s=e.toLowerCase().replace(ignoredChar,""),o=-1,c,d;++o<a.length;)if(c=a[o],d=c.toLowerCase().replace(ignoredChar,""),d===s)return i[c]}function projStr(i){var e={},a=i.split("+").map(function(h){return h.trim()}).filter(function(h){return h}).reduce(function(h,g){var _=g.split("=");return _.push(!0),h[_[0].toLowerCase()]=_[1],h},{}),s,o,c,d={proj:"projName",datum:"datumCode",rf:function(h){e.rf=parseFloat(h)},lat_0:function(h){e.lat0=h*D2R$1},lat_1:function(h){e.lat1=h*D2R$1},lat_2:function(h){e.lat2=h*D2R$1},lat_ts:function(h){e.lat_ts=h*D2R$1},lon_0:function(h){e.long0=h*D2R$1},lon_1:function(h){e.long1=h*D2R$1},lon_2:function(h){e.long2=h*D2R$1},alpha:function(h){e.alpha=parseFloat(h)*D2R$1},gamma:function(h){e.rectified_grid_angle=parseFloat(h)},lonc:function(h){e.longc=h*D2R$1},x_0:function(h){e.x0=parseFloat(h)},y_0:function(h){e.y0=parseFloat(h)},k_0:function(h){e.k0=parseFloat(h)},k:function(h){e.k0=parseFloat(h)},a:function(h){e.a=parseFloat(h)},b:function(h){e.b=parseFloat(h)},r:function(h){e.a=e.b=parseFloat(h)},r_a:function(){e.R_A=!0},zone:function(h){e.zone=parseInt(h,10)},south:function(){e.utmSouth=!0},towgs84:function(h){e.datum_params=h.split(",").map(function(g){return parseFloat(g)})},to_meter:function(h){e.to_meter=parseFloat(h)},units:function(h){e.units=h;var g=match(units,h);g&&(e.to_meter=g.to_meter)},from_greenwich:function(h){e.from_greenwich=h*D2R$1},pm:function(h){var g=match(exports$2,h);e.from_greenwich=(g||parseFloat(h))*D2R$1},nadgrids:function(h){h==="@null"?e.datumCode="none":e.nadgrids=h},axis:function(h){var g="ewnsud";h.length===3&&g.indexOf(h.substr(0,1))!==-1&&g.indexOf(h.substr(1,1))!==-1&&g.indexOf(h.substr(2,1))!==-1&&(e.axis=h)},approx:function(){e.approx=!0}};for(s in a)o=a[s],s in d?(c=d[s],typeof c=="function"?c(o):e[c]=o):e[s]=o;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(i){if(typeof i!="string")throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){var i=this.text[this.place++];if(this.state!==QUOTED)for(;whitespace.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(i);case KEYWORD:return this.keyword(i);case QUOTED:return this.quoted(i);case AFTERQUOTE:return this.afterquote(i);case NUMBER:return this.number(i);case ENDED:return}};Parser.prototype.afterquote=function(i){if(i==='"'){this.word+='"',this.state=QUOTED;return}if(endThings.test(i)){this.word=this.word.trim(),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in afterquote yet, index '+this.place)};Parser.prototype.afterItem=function(i){if(i===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(i==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=NEUTRAL,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ENDED);return}};Parser.prototype.number=function(i){if(digets.test(i)){this.word+=i;return}if(endThings.test(i)){this.word=parseFloat(this.word),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in number yet, index '+this.place)};Parser.prototype.quoted=function(i){if(i==='"'){this.state=AFTERQUOTE;return}this.word+=i};Parser.prototype.keyword=function(i){if(keyword.test(i)){this.word+=i;return}if(i==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=NEUTRAL;return}if(endThings.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in keyword yet, index '+this.place)};Parser.prototype.neutral=function(i){if(latin.test(i)){this.word=i,this.state=KEYWORD;return}if(i==='"'){this.word="",this.state=QUOTED;return}if(digets.test(i)){this.word=i,this.state=NUMBER;return}if(endThings.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in neutral yet, index '+this.place)};Parser.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function parseString(i){var e=new Parser(i);return e.output()}function mapit(i,e,a){Array.isArray(e)&&(a.unshift(e),e=null);var s=e?{}:i,o=a.reduce(function(c,d){return sExpr(d,c),c},s);e&&(i[e]=o)}function sExpr(i,e){if(!Array.isArray(i)){e[i]=!0;return}var a=i.shift();if(a==="PARAMETER"&&(a=i.shift()),i.length===1){if(Array.isArray(i[0])){e[a]={},sExpr(i[0],e[a]);return}e[a]=i[0];return}if(!i.length){e[a]=!0;return}if(a==="TOWGS84"){e[a]=i;return}if(a==="AXIS"){a in e||(e[a]=[]),e[a].push(i);return}Array.isArray(a)||(e[a]={});var s;switch(a){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[a]={name:i[0].toLowerCase(),convert:i[1]},i.length===3&&sExpr(i[2],e[a]);return;case"SPHEROID":case"ELLIPSOID":e[a]={name:i[0],a:i[1],rf:i[2]},i.length===4&&sExpr(i[3],e[a]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":i[0]=["name",i[0]],mapit(e,a,i);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":i[0]=["name",i[0]],mapit(e,a,i),e[a].type=a;return;default:for(s=-1;++s<i.length;)if(!Array.isArray(i[s]))return sExpr(i,e[a]);return mapit(e,a,i)}}var D2R=.017453292519943295,knownTypes=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function rename(i,e){var a=e[0],s=e[1];!(a in i)&&s in i&&(i[a]=i[s],e.length===3&&(i[a]=e[2](i[a])))}function d2r(i){return i*D2R}function cleanWKT(i){for(var e=Object.keys(i),a=0,s=e.length;a<s;++a){var o=e[a];knownTypes.indexOf(o)!==-1&&setPropertiesFromWkt(i[o]),typeof i[o]=="object"&&cleanWKT(i[o])}}function setPropertiesFromWkt(i){if(i.AUTHORITY){var e=Object.keys(i.AUTHORITY)[0];e&&e in i.AUTHORITY&&(i.title=e+":"+i.AUTHORITY[e])}if(i.type==="GEOGCS"?i.projName="longlat":i.type==="LOCAL_CS"?(i.projName="identity",i.local=!0):typeof i.PROJECTION=="object"?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var a="",s=0,o=i.AXIS.length;s<o;++s){var c=[i.AXIS[s][0].toLowerCase(),i.AXIS[s][1].toLowerCase()];c[0].indexOf("north")!==-1||(c[0]==="y"||c[0]==="lat")&&c[1]==="north"?a+="n":c[0].indexOf("south")!==-1||(c[0]==="y"||c[0]==="lat")&&c[1]==="south"?a+="s":c[0].indexOf("east")!==-1||(c[0]==="x"||c[0]==="lon")&&c[1]==="east"?a+="e":(c[0].indexOf("west")!==-1||(c[0]==="x"||c[0]==="lon")&&c[1]==="west")&&(a+="w")}a.length===2&&(a+="u"),a.length===3&&(i.axis=a)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.UNIT.convert&&(i.type==="GEOGCS"?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var d=i.GEOGCS;i.type==="GEOGCS"&&(d=i),d&&(d.DATUM?i.datumCode=d.DATUM.name.toLowerCase():i.datumCode=d.name.toLowerCase(),i.datumCode.slice(0,2)==="d_"&&(i.datumCode=i.datumCode.slice(2)),i.datumCode==="new_zealand_1949"&&(i.datumCode="nzgd49"),(i.datumCode==="wgs_1984"||i.datumCode==="world_geodetic_system_1984")&&(i.PROJECTION==="Mercator_Auxiliary_Sphere"&&(i.sphere=!0),i.datumCode="wgs84"),i.datumCode==="belge_1972"&&(i.datumCode="rnb72"),d.DATUM&&d.DATUM.SPHEROID&&(i.ellps=d.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),i.ellps.toLowerCase().slice(0,13)==="international"&&(i.ellps="intl"),i.a=d.DATUM.SPHEROID.a,i.rf=parseFloat(d.DATUM.SPHEROID.rf,10)),d.DATUM&&d.DATUM.TOWGS84&&(i.datum_params=d.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),i.datumCode==="ch1903+"&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a);function h(b){var j=i.to_meter||1;return b*j}var g=function(b){return rename(i,b)},_=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",h],["y0","false_northing",h],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth","Azimuth"],["alpha","azimuth",d2r],["srsCode","name"]];_.forEach(g),!i.long0&&i.longc&&(i.projName==="Albers_Conic_Equal_Area"||i.projName==="Lambert_Azimuthal_Equal_Area")&&(i.long0=i.longc),!i.lat_ts&&i.lat1&&(i.projName==="Stereographic_South_Pole"||i.projName==="Polar Stereographic (variant B)")?(i.lat0=d2r(i.lat1>0?90:-90),i.lat_ts=i.lat1):!i.lat_ts&&i.lat0&&i.projName==="Polar_Stereographic"&&(i.lat_ts=i.lat0,i.lat0=d2r(i.lat0>0?90:-90))}function wkt(i){var e=parseString(i),a=e[0],s={};return sExpr(e,s),cleanWKT(s),s[a]}function defs(i){var e=this;if(arguments.length===2){var a=arguments[1];typeof a=="string"?a.charAt(0)==="+"?defs[i]=projStr(arguments[1]):defs[i]=wkt(arguments[1]):defs[i]=a}else if(arguments.length===1){if(Array.isArray(i))return i.map(function(s){Array.isArray(s)?defs.apply(e,s):defs(s)});if(typeof i=="string"){if(i in defs)return defs[i]}else"EPSG"in i?defs["EPSG:"+i.EPSG]=i:"ESRI"in i?defs["ESRI:"+i.ESRI]=i:"IAU2000"in i?defs["IAU2000:"+i.IAU2000]=i:console.log(i);return}}globals(defs);function testObj(i){return typeof i=="string"}function testDef(i){return i in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function testWKT(i){return codeWords.some(function(e){return i.indexOf(e)>-1})}var codes=["3857","900913","3785","102113"];function checkMercator(i){var e=match(i,"authority");if(e){var a=match(e,"epsg");return a&&codes.indexOf(a)>-1}}function checkProjStr(i){var e=match(i,"extension");if(e)return match(e,"proj4")}function testProj(i){return i[0]==="+"}function parse$1(i){if(testObj(i)){if(testDef(i))return defs[i];if(testWKT(i)){var e=wkt(i);if(checkMercator(e))return defs["EPSG:3857"];var a=checkProjStr(e);return a?projStr(a):e}if(testProj(i))return projStr(i)}else return i}function extend(i,e){i=i||{};var a,s;if(!e)return i;for(s in e)a=e[s],a!==void 0&&(i[s]=a);return i}function msfnz(i,e,a){var s=i*e;return a/Math.sqrt(1-s*s)}function sign(i){return i<0?-1:1}function adjust_lon(i){return Math.abs(i)<=SPI?i:i-sign(i)*TWO_PI}function tsfnz(i,e,a){var s=i*a,o=.5*i;return s=Math.pow((1-s)/(1+s),o),Math.tan(.5*(HALF_PI-e))/s}function phi2z(i,e){for(var a=.5*i,s,o,c=HALF_PI-2*Math.atan(e),d=0;d<=15;d++)if(s=i*Math.sin(c),o=HALF_PI-2*Math.atan(e*Math.pow((1-s)/(1+s),a))-c,c+=o,Math.abs(o)<=1e-10)return c;return-9999}function init$x(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function forward$v(i){var e=i.x,a=i.y;if(a*R2D>90&&a*R2D<-90&&e*R2D>180&&e*R2D<-180)return null;var s,o;if(Math.abs(Math.abs(a)-HALF_PI)<=EPSLN)return null;if(this.sphere)s=this.x0+this.a*this.k0*adjust_lon(e-this.long0),o=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*a));else{var c=Math.sin(a),d=tsfnz(this.e,a,c);s=this.x0+this.a*this.k0*adjust_lon(e-this.long0),o=this.y0-this.a*this.k0*Math.log(d)}return i.x=s,i.y=o,i}function inverse$v(i){var e=i.x-this.x0,a=i.y-this.y0,s,o;if(this.sphere)o=HALF_PI-2*Math.atan(Math.exp(-a/(this.a*this.k0)));else{var c=Math.exp(-a/(this.a*this.k0));if(o=phi2z(this.e,c),o===-9999)return null}return s=adjust_lon(this.long0+e/(this.a*this.k0)),i.x=s,i.y=o,i}var names$y=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const merc={init:init$x,forward:forward$v,inverse:inverse$v,names:names$y};function init$w(){}function identity(i){return i}var names$x=["longlat","identity"];const longlat={init:init$w,forward:identity,inverse:identity,names:names$x};var projs=[merc,longlat],names$w={},projStore=[];function add(i,e){var a=projStore.length;return i.names?(projStore[a]=i,i.names.forEach(function(s){names$w[s.toLowerCase()]=a}),this):(console.log(e),!0)}function get$1(i){if(!i)return!1;var e=i.toLowerCase();if(typeof names$w[e]<"u"&&projStore[names$w[e]])return projStore[names$w[e]]}function start(){projs.forEach(add)}const projections={start,add,get:get$1};var exports$1={};exports$1.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};exports$1.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports$1.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports$1.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};exports$1.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};exports$1.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports$1.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports$1.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};exports$1.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports$1.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports$1.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};exports$1.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};exports$1.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports$1.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};exports$1.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports$1.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};exports$1.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports$1.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports$1.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports$1.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};exports$1.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};exports$1.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};exports$1.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};exports$1.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};exports$1.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports$1.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports$1.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};exports$1.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};exports$1.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};exports$1.hough={a:6378270,rf:297,ellipseName:"Hough"};exports$1.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};exports$1.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};exports$1.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};exports$1.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};exports$1.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};exports$1.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};exports$1.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};exports$1.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};exports$1.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};exports$1.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};exports$1.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};exports$1.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$1.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$1.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(i,e,a,s){var o=i*i,c=e*e,d=(o-c)/o,h=0;s?(i*=1-d*(SIXTH+d*(RA4+d*RA6)),o=i*i,d=0):h=Math.sqrt(d);var g=(o-c)/c;return{es:d,e:h,ep2:g}}function sphere(i,e,a,s,o){if(!i){var c=match(exports$1,s);c||(c=WGS84),i=c.a,e=c.b,a=c.rf}return a&&!e&&(e=(1-1/a)*i),(a===0||Math.abs(i-e)<EPSLN)&&(o=!0,e=i),{a:i,b:e,rf:a,sphere:o}}var exports={};exports.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};exports.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};exports.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};exports.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};exports.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};exports.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};exports.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};exports.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};exports.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};exports.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};exports.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};exports.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};exports.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};exports.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};exports.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};exports.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};exports.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};exports.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function datum(i,e,a,s,o,c,d){var h={};return i===void 0||i==="none"?h.datum_type=PJD_NODATUM:h.datum_type=PJD_WGS84,e&&(h.datum_params=e.map(parseFloat),(h.datum_params[0]!==0||h.datum_params[1]!==0||h.datum_params[2]!==0)&&(h.datum_type=PJD_3PARAM),h.datum_params.length>3&&(h.datum_params[3]!==0||h.datum_params[4]!==0||h.datum_params[5]!==0||h.datum_params[6]!==0)&&(h.datum_type=PJD_7PARAM,h.datum_params[3]*=SEC_TO_RAD,h.datum_params[4]*=SEC_TO_RAD,h.datum_params[5]*=SEC_TO_RAD,h.datum_params[6]=h.datum_params[6]/1e6+1)),d&&(h.datum_type=PJD_GRIDSHIFT,h.grids=d),h.a=a,h.b=s,h.es=o,h.ep2=c,h}var loadedNadgrids={};function nadgrid(i,e){var a=new DataView(e),s=detectLittleEndian(a),o=readHeader(a,s),c=readSubgrids(a,o,s),d={header:o,subgrids:c};return loadedNadgrids[i]=d,d}function getNadgrids(i){if(i===void 0)return null;var e=i.split(",");return e.map(parseNadgridString)}function parseNadgridString(i){if(i.length===0)return null;var e=i[0]==="@";return e&&(i=i.slice(1)),i==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:i,mandatory:!e,grid:loadedNadgrids[i]||null,isNull:!1}}function secondsToRadians(i){return i/3600*Math.PI/180}function detectLittleEndian(i){var e=i.getInt32(8,!1);return e===11?!1:(e=i.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(i,e){return{nFields:i.getInt32(8,e),nSubgridFields:i.getInt32(24,e),nSubgrids:i.getInt32(40,e),shiftType:decodeString(i,56,64).trim(),fromSemiMajorAxis:i.getFloat64(120,e),fromSemiMinorAxis:i.getFloat64(136,e),toSemiMajorAxis:i.getFloat64(152,e),toSemiMinorAxis:i.getFloat64(168,e)}}function decodeString(i,e,a){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(e,a)))}function readSubgrids(i,e,a){for(var s=176,o=[],c=0;c<e.nSubgrids;c++){var d=readGridHeader(i,s,a),h=readGridNodes(i,s,d,a),g=Math.round(1+(d.upperLongitude-d.lowerLongitude)/d.longitudeInterval),_=Math.round(1+(d.upperLatitude-d.lowerLatitude)/d.latitudeInterval);o.push({ll:[secondsToRadians(d.lowerLongitude),secondsToRadians(d.lowerLatitude)],del:[secondsToRadians(d.longitudeInterval),secondsToRadians(d.latitudeInterval)],lim:[g,_],count:d.gridNodeCount,cvs:mapNodes(h)}),s+=176+d.gridNodeCount*16}return o}function mapNodes(i){return i.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(i,e,a){return{name:decodeString(i,e+8,e+16).trim(),parent:decodeString(i,e+24,e+24+8).trim(),lowerLatitude:i.getFloat64(e+72,a),upperLatitude:i.getFloat64(e+88,a),lowerLongitude:i.getFloat64(e+104,a),upperLongitude:i.getFloat64(e+120,a),latitudeInterval:i.getFloat64(e+136,a),longitudeInterval:i.getFloat64(e+152,a),gridNodeCount:i.getInt32(e+168,a)}}function readGridNodes(i,e,a,s){for(var o=e+176,c=16,d=[],h=0;h<a.gridNodeCount;h++){var g={latitudeShift:i.getFloat32(o+h*c,s),longitudeShift:i.getFloat32(o+h*c+4,s),latitudeAccuracy:i.getFloat32(o+h*c+8,s),longitudeAccuracy:i.getFloat32(o+h*c+12,s)};d.push(g)}return d}function Projection(i,e){if(!(this instanceof Projection))return new Projection(i);e=e||function(_){if(_)throw _};var a=parse$1(i);if(typeof a!="object"){e("Could not parse to valid json: "+i);return}var s=Projection.projections.get(a.projName);if(!s){e("Could not get projection name from: "+i);return}if(a.datumCode&&a.datumCode!=="none"){var o=match(exports,a.datumCode);o&&(a.datum_params=a.datum_params||(o.towgs84?o.towgs84.split(","):null),a.ellps=o.ellipse,a.datumName=o.datumName?o.datumName:a.datumCode)}a.k0=a.k0||1,a.axis=a.axis||"enu",a.ellps=a.ellps||"wgs84",a.lat1=a.lat1||a.lat0;var c=sphere(a.a,a.b,a.rf,a.ellps,a.sphere),d=eccentricity(c.a,c.b,c.rf,a.R_A),h=getNadgrids(a.nadgrids),g=a.datum||datum(a.datumCode,a.datum_params,c.a,c.b,d.es,d.ep2,h);extend(this,a),extend(this,s),this.a=c.a,this.b=c.b,this.rf=c.rf,this.sphere=c.sphere,this.es=d.es,this.e=d.e,this.ep2=d.ep2,this.datum=g,this.init(),e(null,this)}Projection.projections=projections;Projection.projections.start();function compareDatums(i,e){return i.datum_type!==e.datum_type||i.a!==e.a||Math.abs(i.es-e.es)>5e-11?!1:i.datum_type===PJD_3PARAM?i.datum_params[0]===e.datum_params[0]&&i.datum_params[1]===e.datum_params[1]&&i.datum_params[2]===e.datum_params[2]:i.datum_type===PJD_7PARAM?i.datum_params[0]===e.datum_params[0]&&i.datum_params[1]===e.datum_params[1]&&i.datum_params[2]===e.datum_params[2]&&i.datum_params[3]===e.datum_params[3]&&i.datum_params[4]===e.datum_params[4]&&i.datum_params[5]===e.datum_params[5]&&i.datum_params[6]===e.datum_params[6]:!0}function geodeticToGeocentric(i,e,a){var s=i.x,o=i.y,c=i.z?i.z:0,d,h,g,_;if(o<-HALF_PI&&o>-1.001*HALF_PI)o=-HALF_PI;else if(o>HALF_PI&&o<1.001*HALF_PI)o=HALF_PI;else{if(o<-HALF_PI)return{x:-1/0,y:-1/0,z:i.z};if(o>HALF_PI)return{x:1/0,y:1/0,z:i.z}}return s>Math.PI&&(s-=2*Math.PI),h=Math.sin(o),_=Math.cos(o),g=h*h,d=a/Math.sqrt(1-e*g),{x:(d+c)*_*Math.cos(s),y:(d+c)*_*Math.sin(s),z:(d*(1-e)+c)*h}}function geocentricToGeodetic(i,e,a,s){var o=1e-12,c=o*o,d=30,h,g,_,b,j,$,_e,et,tt,it,nt,rt,at,st=i.x,ot=i.y,dt=i.z?i.z:0,ut,ct,ht;if(h=Math.sqrt(st*st+ot*ot),g=Math.sqrt(st*st+ot*ot+dt*dt),h/a<o){if(ut=0,g/a<o)return ct=HALF_PI,ht=-s,{x:i.x,y:i.y,z:i.z}}else ut=Math.atan2(ot,st);_=dt/g,b=h/g,j=1/Math.sqrt(1-e*(2-e)*b*b),et=b*(1-e)*j,tt=_*j,at=0;do at++,_e=a/Math.sqrt(1-e*tt*tt),ht=h*et+dt*tt-_e*(1-e*tt*tt),$=e*_e/(_e+ht),j=1/Math.sqrt(1-$*(2-$)*b*b),it=b*(1-$)*j,nt=_*j,rt=nt*et-it*tt,et=it,tt=nt;while(rt*rt>c&&at<d);return ct=Math.atan(nt/Math.abs(it)),{x:ut,y:ct,z:ht}}function geocentricToWgs84(i,e,a){if(e===PJD_3PARAM)return{x:i.x+a[0],y:i.y+a[1],z:i.z+a[2]};if(e===PJD_7PARAM){var s=a[0],o=a[1],c=a[2],d=a[3],h=a[4],g=a[5],_=a[6];return{x:_*(i.x-g*i.y+h*i.z)+s,y:_*(g*i.x+i.y-d*i.z)+o,z:_*(-h*i.x+d*i.y+i.z)+c}}}function geocentricFromWgs84(i,e,a){if(e===PJD_3PARAM)return{x:i.x-a[0],y:i.y-a[1],z:i.z-a[2]};if(e===PJD_7PARAM){var s=a[0],o=a[1],c=a[2],d=a[3],h=a[4],g=a[5],_=a[6],b=(i.x-s)/_,j=(i.y-o)/_,$=(i.z-c)/_;return{x:b+g*j-h*$,y:-g*b+j+d*$,z:h*b-d*j+$}}}function checkParams(i){return i===PJD_3PARAM||i===PJD_7PARAM}function datum_transform(i,e,a){if(compareDatums(i,e)||i.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return a;var s=i.a,o=i.es;if(i.datum_type===PJD_GRIDSHIFT){var c=applyGridShift(i,!1,a);if(c!==0)return;s=SRS_WGS84_SEMIMAJOR,o=SRS_WGS84_ESQUARED}var d=e.a,h=e.b,g=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(d=SRS_WGS84_SEMIMAJOR,h=SRS_WGS84_SEMIMINOR,g=SRS_WGS84_ESQUARED),o===g&&s===d&&!checkParams(i.datum_type)&&!checkParams(e.datum_type))return a;if(a=geodeticToGeocentric(a,o,s),checkParams(i.datum_type)&&(a=geocentricToWgs84(a,i.datum_type,i.datum_params)),checkParams(e.datum_type)&&(a=geocentricFromWgs84(a,e.datum_type,e.datum_params)),a=geocentricToGeodetic(a,g,d,h),e.datum_type===PJD_GRIDSHIFT){var _=applyGridShift(e,!0,a);if(_!==0)return}return a}function applyGridShift(i,e,a){if(i.grids===null||i.grids.length===0)return console.log("Grid shift grids not found"),-1;var s={x:-a.x,y:a.y},o={x:Number.NaN,y:Number.NaN},c=[];e:for(var d=0;d<i.grids.length;d++){var h=i.grids[d];if(c.push(h.name),h.isNull){o=s;break}if(h.mandatory,h.grid===null){if(h.mandatory)return console.log("Unable to find mandatory grid '"+h.name+"'"),-1;continue}for(var g=h.grid.subgrids,_=0,b=g.length;_<b;_++){var j=g[_],$=(Math.abs(j.del[1])+Math.abs(j.del[0]))/1e4,_e=j.ll[0]-$,et=j.ll[1]-$,tt=j.ll[0]+(j.lim[0]-1)*j.del[0]+$,it=j.ll[1]+(j.lim[1]-1)*j.del[1]+$;if(!(et>s.y||_e>s.x||it<s.y||tt<s.x)&&(o=applySubgridShift(s,e,j),!isNaN(o.x)))break e}}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-s.x*R2D+" "+s.y*R2D+" tried: '"+c+"'"),-1):(a.x=-o.x,a.y=o.y,0)}function applySubgridShift(i,e,a){var s={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return s;var o={x:i.x,y:i.y};o.x-=a.ll[0],o.y-=a.ll[1],o.x=adjust_lon(o.x-Math.PI)+Math.PI;var c=nadInterpolate(o,a);if(e){if(isNaN(c.x))return s;c.x=o.x-c.x,c.y=o.y-c.y;var d=9,h=1e-12,g,_;do{if(_=nadInterpolate(c,a),isNaN(_.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}g={x:o.x-(_.x+c.x),y:o.y-(_.y+c.y)},c.x+=g.x,c.y+=g.y}while(d--&&Math.abs(g.x)>h&&Math.abs(g.y)>h);if(d<0)return console.log("Inverse grid shift iterator failed to converge."),s;s.x=adjust_lon(c.x+a.ll[0]),s.y=c.y+a.ll[1]}else isNaN(c.x)||(s.x=i.x+c.x,s.y=i.y+c.y);return s}function nadInterpolate(i,e){var a={x:i.x/e.del[0],y:i.y/e.del[1]},s={x:Math.floor(a.x),y:Math.floor(a.y)},o={x:a.x-1*s.x,y:a.y-1*s.y},c={x:Number.NaN,y:Number.NaN},d;if(s.x<0||s.x>=e.lim[0]||s.y<0||s.y>=e.lim[1])return c;d=s.y*e.lim[0]+s.x;var h={x:e.cvs[d][0],y:e.cvs[d][1]};d++;var g={x:e.cvs[d][0],y:e.cvs[d][1]};d+=e.lim[0];var _={x:e.cvs[d][0],y:e.cvs[d][1]};d--;var b={x:e.cvs[d][0],y:e.cvs[d][1]},j=o.x*o.y,$=o.x*(1-o.y),_e=(1-o.x)*(1-o.y),et=(1-o.x)*o.y;return c.x=_e*h.x+$*g.x+et*b.x+j*_.x,c.y=_e*h.y+$*g.y+et*b.y+j*_.y,c}function adjust_axis(i,e,a){var s=a.x,o=a.y,c=a.z||0,d,h,g,_={};for(g=0;g<3;g++)if(!(e&&g===2&&a.z===void 0))switch(g===0?(d=s,"ew".indexOf(i.axis[g])!==-1?h="x":h="y"):g===1?(d=o,"ns".indexOf(i.axis[g])!==-1?h="y":h="x"):(d=c,h="z"),i.axis[g]){case"e":_[h]=d;break;case"w":_[h]=-d;break;case"n":_[h]=d;break;case"s":_[h]=-d;break;case"u":a[h]!==void 0&&(_.z=d);break;case"d":a[h]!==void 0&&(_.z=-d);break;default:return null}return _}function common(i){var e={x:i[0],y:i[1]};return i.length>2&&(e.z=i[2]),i.length>3&&(e.m=i[3]),e}function checkSanity(i){checkCoord(i.x),checkCoord(i.y)}function checkCoord(i){if(typeof Number.isFinite=="function"){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if(typeof i!="number"||i!==i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(i,e){return(i.datum.datum_type===PJD_3PARAM||i.datum.datum_type===PJD_7PARAM||i.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum.datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&i.datumCode!=="WGS84"}function transform(i,e,a,s){var o;Array.isArray(a)?a=common(a):a={x:a.x,y:a.y,z:a.z,m:a.m};var c=a.z!==void 0;if(checkSanity(a),i.datum&&e.datum&&checkNotWGS(i,e)&&(o=new Projection("WGS84"),a=transform(i,o,a,s),i=o),s&&i.axis!=="enu"&&(a=adjust_axis(i,!1,a)),i.projName==="longlat")a={x:a.x*D2R$1,y:a.y*D2R$1,z:a.z||0};else if(i.to_meter&&(a={x:a.x*i.to_meter,y:a.y*i.to_meter,z:a.z||0}),a=i.inverse(a),!a)return;if(i.from_greenwich&&(a.x+=i.from_greenwich),a=datum_transform(i.datum,e.datum,a),!!a)return e.from_greenwich&&(a={x:a.x-e.from_greenwich,y:a.y,z:a.z||0}),e.projName==="longlat"?a={x:a.x*R2D,y:a.y*R2D,z:a.z||0}:(a=e.forward(a),e.to_meter&&(a={x:a.x/e.to_meter,y:a.y/e.to_meter,z:a.z||0})),s&&e.axis!=="enu"?adjust_axis(e,!0,a):(a&&!c&&delete a.z,a)}var wgs84=Projection("WGS84");function transformer(i,e,a,s){var o,c,d;return Array.isArray(a)?(o=transform(i,e,a,s)||{x:NaN,y:NaN},a.length>2?typeof i.name<"u"&&i.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof o.z=="number"?[o.x,o.y,o.z].concat(a.slice(3)):[o.x,o.y,a[2]].concat(a.slice(3)):[o.x,o.y].concat(a.slice(2)):[o.x,o.y]):(c=transform(i,e,a,s),d=Object.keys(a),d.length===2||d.forEach(function(h){if(typeof i.name<"u"&&i.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(h==="x"||h==="y"||h==="z")return}else if(h==="x"||h==="y")return;c[h]=a[h]}),c)}function checkProj(i){return i instanceof Projection?i:i.oProj?i.oProj:Projection(i)}function proj4(i,e,a){i=checkProj(i);var s=!1,o;return typeof e>"u"?(e=i,i=wgs84,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(a=e,e=i,i=wgs84,s=!0),e=checkProj(e),a?transformer(i,e,a):(o={forward:function(c,d){return transformer(i,e,c,d)},inverse:function(c,d){return transformer(e,i,c,d)}},s&&(o.oProj=e),o)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A=65,I=73,O=79,V=86,Z=90;const mgrs={forward:forward$u,inverse:inverse$u,toPoint};function forward$u(i,e){return e=e||5,encode(LLtoUTM({lat:i[1],lon:i[0]}),e)}function inverse$u(i){var e=UTMtoLL(decode(i.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(i){var e=UTMtoLL(decode(i.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function degToRad(i){return i*(Math.PI/180)}function radToDeg(i){return 180*(i/Math.PI)}function LLtoUTM(i){var e=i.lat,a=i.lon,s=6378137,o=.00669438,c=.9996,d,h,g,_,b,j,$,_e=degToRad(e),et=degToRad(a),tt,it;it=Math.floor((a+180)/6)+1,a===180&&(it=60),e>=56&&e<64&&a>=3&&a<12&&(it=32),e>=72&&e<84&&(a>=0&&a<9?it=31:a>=9&&a<21?it=33:a>=21&&a<33?it=35:a>=33&&a<42&&(it=37)),d=(it-1)*6-180+3,tt=degToRad(d),h=o/(1-o),g=s/Math.sqrt(1-o*Math.sin(_e)*Math.sin(_e)),_=Math.tan(_e)*Math.tan(_e),b=h*Math.cos(_e)*Math.cos(_e),j=Math.cos(_e)*(et-tt),$=s*((1-o/4-3*o*o/64-5*o*o*o/256)*_e-(3*o/8+3*o*o/32+45*o*o*o/1024)*Math.sin(2*_e)+(15*o*o/256+45*o*o*o/1024)*Math.sin(4*_e)-35*o*o*o/3072*Math.sin(6*_e));var nt=c*g*(j+(1-_+b)*j*j*j/6+(5-18*_+_*_+72*b-58*h)*j*j*j*j*j/120)+5e5,rt=c*($+g*Math.tan(_e)*(j*j/2+(5-_+9*b+4*b*b)*j*j*j*j/24+(61-58*_+_*_+600*b-330*h)*j*j*j*j*j*j/720));return e<0&&(rt+=1e7),{northing:Math.round(rt),easting:Math.round(nt),zoneNumber:it,zoneLetter:getLetterDesignator(e)}}function UTMtoLL(i){var e=i.northing,a=i.easting,s=i.zoneLetter,o=i.zoneNumber;if(o<0||o>60)return null;var c=.9996,d=6378137,h=.00669438,g,_=(1-Math.sqrt(1-h))/(1+Math.sqrt(1-h)),b,j,$,_e,et,tt,it,nt,rt,at=a-5e5,st=e;s<"N"&&(st-=1e7),it=(o-1)*6-180+3,g=h/(1-h),tt=st/c,nt=tt/(d*(1-h/4-3*h*h/64-5*h*h*h/256)),rt=nt+(3*_/2-27*_*_*_/32)*Math.sin(2*nt)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*nt)+151*_*_*_/96*Math.sin(6*nt),b=d/Math.sqrt(1-h*Math.sin(rt)*Math.sin(rt)),j=Math.tan(rt)*Math.tan(rt),$=g*Math.cos(rt)*Math.cos(rt),_e=d*(1-h)/Math.pow(1-h*Math.sin(rt)*Math.sin(rt),1.5),et=at/(b*c);var ot=rt-b*Math.tan(rt)/_e*(et*et/2-(5+3*j+10*$-4*$*$-9*g)*et*et*et*et/24+(61+90*j+298*$+45*j*j-252*g-3*$*$)*et*et*et*et*et*et/720);ot=radToDeg(ot);var dt=(et-(1+2*j+$)*et*et*et/6+(5-2*$+28*j-3*$*$+8*g+24*j*j)*et*et*et*et*et/120)/Math.cos(rt);dt=it+radToDeg(dt);var ut;if(i.accuracy){var ct=UTMtoLL({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});ut={top:ct.lat,right:ct.lon,bottom:ot,left:dt}}else ut={lat:ot,lon:dt};return ut}function getLetterDesignator(i){var e="Z";return 84>=i&&i>=72?e="X":72>i&&i>=64?e="W":64>i&&i>=56?e="V":56>i&&i>=48?e="U":48>i&&i>=40?e="T":40>i&&i>=32?e="S":32>i&&i>=24?e="R":24>i&&i>=16?e="Q":16>i&&i>=8?e="P":8>i&&i>=0?e="N":0>i&&i>=-8?e="M":-8>i&&i>=-16?e="L":-16>i&&i>=-24?e="K":-24>i&&i>=-32?e="J":-32>i&&i>=-40?e="H":-40>i&&i>=-48?e="G":-48>i&&i>=-56?e="F":-56>i&&i>=-64?e="E":-64>i&&i>=-72?e="D":-72>i&&i>=-80&&(e="C"),e}function encode(i,e){var a="00000"+i.easting,s="00000"+i.northing;return i.zoneNumber+i.zoneLetter+get100kID(i.easting,i.northing,i.zoneNumber)+a.substr(a.length-5,e)+s.substr(s.length-5,e)}function get100kID(i,e,a){var s=get100kSetForZone(a),o=Math.floor(i/1e5),c=Math.floor(e/1e5)%20;return getLetter100kID(o,c,s)}function get100kSetForZone(i){var e=i%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(i,e,a){var s=a-1,o=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(s),c=SET_ORIGIN_ROW_LETTERS.charCodeAt(s),d=o+i-1,h=c+e,g=!1;d>Z&&(d=d-Z+A-1,g=!0),(d===I||o<I&&d>I||(d>I||o<I)&&g)&&d++,(d===O||o<O&&d>O||(d>O||o<O)&&g)&&(d++,d===I&&d++),d>Z&&(d=d-Z+A-1),h>V?(h=h-V+A-1,g=!0):g=!1,(h===I||c<I&&h>I||(h>I||c<I)&&g)&&h++,(h===O||c<O&&h>O||(h>O||c<O)&&g)&&(h++,h===I&&h++),h>V&&(h=h-V+A-1);var _=String.fromCharCode(d)+String.fromCharCode(h);return _}function decode(i){if(i&&i.length===0)throw"MGRSPoint coverting from nothing";for(var e=i.length,a=null,s="",o,c=0;!/[A-Z]/.test(o=i.charAt(c));){if(c>=2)throw"MGRSPoint bad conversion from: "+i;s+=o,c++}var d=parseInt(s,10);if(c===0||c+3>e)throw"MGRSPoint bad conversion from: "+i;var h=i.charAt(c++);if(h<="A"||h==="B"||h==="Y"||h>="Z"||h==="I"||h==="O")throw"MGRSPoint zone letter "+h+" not handled: "+i;a=i.substring(c,c+=2);for(var g=get100kSetForZone(d),_=getEastingFromChar(a.charAt(0),g),b=getNorthingFromChar(a.charAt(1),g);b<getMinNorthing(h);)b+=2e6;var j=e-c;if(j%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+i;var $=j/2,_e=0,et=0,tt,it,nt,rt,at;return $>0&&(tt=1e5/Math.pow(10,$),it=i.substring(c,c+$),_e=parseFloat(it)*tt,nt=i.substring(c+$),et=parseFloat(nt)*tt),rt=_e+_,at=et+b,{easting:rt,northing:at,zoneLetter:h,zoneNumber:d,accuracy:tt}}function getEastingFromChar(i,e){for(var a=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),s=1e5,o=!1;a!==i.charCodeAt(0);){if(a++,a===I&&a++,a===O&&a++,a>Z){if(o)throw"Bad character: "+i;a=A,o=!0}s+=1e5}return s}function getNorthingFromChar(i,e){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var a=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),s=0,o=!1;a!==i.charCodeAt(0);){if(a++,a===I&&a++,a===O&&a++,a>V){if(o)throw"Bad character: "+i;a=A,o=!0}s+=1e5}return s}function getMinNorthing(i){var e;switch(i){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+i}function Point(i,e,a){if(!(this instanceof Point))return new Point(i,e,a);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if(typeof i=="object")this.x=i.x,this.y=i.y,this.z=i.z||0;else if(typeof i=="string"&&typeof e>"u"){var s=i.split(",");this.x=parseFloat(s[0],10),this.y=parseFloat(s[1],10),this.z=parseFloat(s[2],10)||0}else this.x=i,this.y=e,this.z=a||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(i){return new Point(toPoint(i))};Point.prototype.toMGRS=function(i){return forward$u([this.x,this.y],i)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(i){var e=[];e[0]=C00-i*(C02+i*(C04+i*(C06+i*C08))),e[1]=i*(C22-i*(C04+i*(C06+i*C08)));var a=i*i;return e[2]=a*(C44-i*(C46+i*C48)),a*=i,e[3]=a*(C66-i*C68),e[4]=a*i*C88,e}function pj_mlfn(i,e,a,s){return a*=e,e*=e,s[0]*i-a*(s[1]+e*(s[2]+e*(s[3]+e*s[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(i,e,a){for(var s=1/(1-e),o=i,c=MAX_ITER$3;c;--c){var d=Math.sin(o),h=1-e*d*d;if(h=(pj_mlfn(o,d,Math.cos(o),a)-i)*(h*Math.sqrt(h))*s,o-=h,Math.abs(h)<EPSLN)return o}return o}function init$v(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$t(i){var e=i.x,a=i.y,s=adjust_lon(e-this.long0),o,c,d,h=Math.sin(a),g=Math.cos(a);if(this.es){var b=g*s,j=Math.pow(b,2),$=this.ep2*Math.pow(g,2),_e=Math.pow($,2),et=Math.abs(g)>EPSLN?Math.tan(a):0,tt=Math.pow(et,2),it=Math.pow(tt,2);o=1-this.es*Math.pow(h,2),b=b/Math.sqrt(o);var nt=pj_mlfn(a,h,g,this.en);c=this.a*(this.k0*b*(1+j/6*(1-tt+$+j/20*(5-18*tt+it+14*$-58*tt*$+j/42*(61+179*it-it*tt-479*tt)))))+this.x0,d=this.a*(this.k0*(nt-this.ml0+h*s*b/2*(1+j/12*(5-tt+9*$+4*_e+j/30*(61+it-58*tt+270*$-330*tt*$+j/56*(1385+543*it-it*tt-3111*tt))))))+this.y0}else{var _=g*Math.sin(s);if(Math.abs(Math.abs(_)-1)<EPSLN)return 93;if(c=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,d=g*Math.cos(s)/Math.sqrt(1-Math.pow(_,2)),_=Math.abs(d),_>=1){if(_-1>EPSLN)return 93;d=0}else d=Math.acos(d);a<0&&(d=-d),d=this.a*this.k0*(d-this.lat0)+this.y0}return i.x=c,i.y=d,i}function inverse$t(i){var e,a,s,o,c=(i.x-this.x0)*(1/this.a),d=(i.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+d/this.k0,a=pj_inv_mlfn(e,this.es,this.en),Math.abs(a)<HALF_PI){var j=Math.sin(a),$=Math.cos(a),_e=Math.abs($)>EPSLN?Math.tan(a):0,et=this.ep2*Math.pow($,2),tt=Math.pow(et,2),it=Math.pow(_e,2),nt=Math.pow(it,2);e=1-this.es*Math.pow(j,2);var rt=c*Math.sqrt(e)/this.k0,at=Math.pow(rt,2);e=e*_e,s=a-e*at/(1-this.es)*.5*(1-at/12*(5+3*it-9*et*it+et-4*tt-at/30*(61+90*it-252*et*it+45*nt+46*et-at/56*(1385+3633*it+4095*nt+1574*nt*it)))),o=adjust_lon(this.long0+rt*(1-at/6*(1+2*it+et-at/20*(5+28*it+24*nt+8*et*it+6*et-at/42*(61+662*it+1320*nt+720*nt*it))))/$)}else s=HALF_PI*sign(d),o=0;else{var h=Math.exp(c/this.k0),g=.5*(h-1/h),_=this.lat0+d/this.k0,b=Math.cos(_);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(g,2))),s=Math.asin(e),d<0&&(s=-s),g===0&&b===0?o=0:o=adjust_lon(Math.atan2(g,b)+this.long0)}return i.x=o,i.y=s,i}var names$v=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tmerc={init:init$v,forward:forward$t,inverse:inverse$t,names:names$v};function sinh(i){var e=Math.exp(i);return e=(e-1/e)/2,e}function hypot(i,e){i=Math.abs(i),e=Math.abs(e);var a=Math.max(i,e),s=Math.min(i,e)/(a||1);return a*Math.sqrt(1+Math.pow(s,2))}function log1py(i){var e=1+i,a=e-1;return a===0?i:i*Math.log(e)/a}function asinhy(i){var e=Math.abs(i);return e=log1py(e*(1+e/(hypot(1,e)+1))),i<0?-e:e}function gatg(i,e){for(var a=2*Math.cos(2*e),s=i.length-1,o=i[s],c=0,d;--s>=0;)d=-c+a*o+i[s],c=o,o=d;return e+d*Math.sin(2*e)}function clens(i,e){for(var a=2*Math.cos(e),s=i.length-1,o=i[s],c=0,d;--s>=0;)d=-c+a*o+i[s],c=o,o=d;return Math.sin(e)*d}function cosh(i){var e=Math.exp(i);return e=(e+1/e)/2,e}function clens_cmplx(i,e,a){for(var s=Math.sin(e),o=Math.cos(e),c=sinh(a),d=cosh(a),h=2*o*d,g=-2*s*c,_=i.length-1,b=i[_],j=0,$=0,_e=0,et,tt;--_>=0;)et=$,tt=j,$=b,j=_e,b=-et+h*$-g*j+i[_],_e=-tt+g*$+h*j;return h=s*d,g=o*c,[h*b-g*_e,h*_e+g*b]}function init$u(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),e=i/(2-i),a=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),a=a*e,this.cgb[1]=a*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=a*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),a=a*e,this.cgb[2]=a*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=a*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),a=a*e,this.cgb[3]=a*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=a*(1237/630+e*(-12/5+e*(-24832/14175))),a=a*e,this.cgb[4]=a*(4174/315+e*(-144838/6237)),this.cbg[4]=a*(-734/315+e*(109598/31185)),a=a*e,this.cgb[5]=a*(601676/22275),this.cbg[5]=a*(444337/155925),a=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+a*(1/4+a*(1/64+a/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=a*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=a*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),a=a*e,this.utg[2]=a*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=a*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),a=a*e,this.utg[3]=a*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=a*(49561/161280+e*(-179/168+e*(6601661/7257600))),a=a*e,this.utg[4]=a*(-4583/161280+e*(108847/3991680)),this.gtu[4]=a*(34729/80640+e*(-3418889/1995840)),a=a*e,this.utg[5]=a*(-20648693/638668800),this.gtu[5]=a*(212378941/319334400);var s=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(s+clens(this.gtu,2*s))}function forward$s(i){var e=adjust_lon(i.x-this.long0),a=i.y;a=gatg(this.cbg,a);var s=Math.sin(a),o=Math.cos(a),c=Math.sin(e),d=Math.cos(e);a=Math.atan2(s,d*o),e=Math.atan2(c*o,hypot(s,o*d)),e=asinhy(Math.tan(e));var h=clens_cmplx(this.gtu,2*a,2*e);a=a+h[0],e=e+h[1];var g,_;return Math.abs(e)<=2.623395162778?(g=this.a*(this.Qn*e)+this.x0,_=this.a*(this.Qn*a+this.Zb)+this.y0):(g=1/0,_=1/0),i.x=g,i.y=_,i}function inverse$s(i){var e=(i.x-this.x0)*(1/this.a),a=(i.y-this.y0)*(1/this.a);a=(a-this.Zb)/this.Qn,e=e/this.Qn;var s,o;if(Math.abs(e)<=2.623395162778){var c=clens_cmplx(this.utg,2*a,2*e);a=a+c[0],e=e+c[1],e=Math.atan(sinh(e));var d=Math.sin(a),h=Math.cos(a),g=Math.sin(e),_=Math.cos(e);a=Math.atan2(d*_,hypot(g,_*h)),e=Math.atan2(g,_*h),s=adjust_lon(e+this.long0),o=gatg(this.cgb,a)}else s=1/0,o=1/0;return i.x=s,i.y=o,i}var names$u=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const etmerc={init:init$u,forward:forward$s,inverse:inverse$s,names:names$u};function adjust_zone(i,e){if(i===void 0){if(i=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,i<0)return 0;if(i>60)return 60}return i}var dependsOn="etmerc";function init$t(){var i=adjust_zone(this.zone,this.long0);if(i===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*D2R$1,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$t=["Universal Transverse Mercator System","utm"];const utm={init:init$t,names:names$t,dependsOn};function srat(i,e){return Math.pow((1-i)/(1+i),e)}var MAX_ITER$2=20;function init$s(){var i=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*i,this.ratexp))}function forward$r(i){var e=i.x,a=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*a+FORTPI),this.C)*srat(this.e*Math.sin(a),this.ratexp))-HALF_PI,i.x=this.C*e,i}function inverse$r(i){for(var e=1e-14,a=i.x/this.C,s=i.y,o=Math.pow(Math.tan(.5*s+FORTPI)/this.K,1/this.C),c=MAX_ITER$2;c>0&&(s=2*Math.atan(o*srat(this.e*Math.sin(i.y),-.5*this.e))-HALF_PI,!(Math.abs(s-i.y)<e));--c)i.y=s;return c?(i.x=a,i.y=s,i):null}var names$s=["gauss"];const gauss={init:init$s,forward:forward$r,inverse:inverse$r,names:names$s};function init$r(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function forward$q(i){var e,a,s,o;return i.x=adjust_lon(i.x-this.long0),gauss.forward.apply(this,[i]),e=Math.sin(i.y),a=Math.cos(i.y),s=Math.cos(i.x),o=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*a*s),i.x=o*a*Math.sin(i.x),i.y=o*(this.cosc0*e-this.sinc0*a*s),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function inverse$q(i){var e,a,s,o,c;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,c=hypot(i.x,i.y)){var d=2*Math.atan2(c,this.R2);e=Math.sin(d),a=Math.cos(d),o=Math.asin(a*this.sinc0+i.y*e*this.cosc0/c),s=Math.atan2(i.x*e,c*this.cosc0*a-i.y*this.sinc0*e)}else o=this.phic0,s=0;return i.x=s,i.y=o,gauss.inverse.apply(this,[i]),i.x=adjust_lon(i.x+this.long0),i}var names$r=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const sterea={init:init$r,forward:forward$q,inverse:inverse$q,names:names$r};function ssfn_(i,e,a){return e*=a,Math.tan(.5*(HALF_PI+i))*Math.pow((1-e)/(1+e),.5*a)}function init$q(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&Math.abs(Math.cos(this.lat_ts))>EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function forward$p(i){var e=i.x,a=i.y,s=Math.sin(a),o=Math.cos(a),c,d,h,g,_,b,j=adjust_lon(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=EPSLN&&Math.abs(a+this.lat0)<=EPSLN?(i.x=NaN,i.y=NaN,i):this.sphere?(c=2*this.k0/(1+this.sinlat0*s+this.coslat0*o*Math.cos(j)),i.x=this.a*c*o*Math.sin(j)+this.x0,i.y=this.a*c*(this.coslat0*s-this.sinlat0*o*Math.cos(j))+this.y0,i):(d=2*Math.atan(this.ssfn_(a,s,this.e))-HALF_PI,g=Math.cos(d),h=Math.sin(d),Math.abs(this.coslat0)<=EPSLN?(_=tsfnz(this.e,a*this.con,this.con*s),b=2*this.a*this.k0*_/this.cons,i.x=this.x0+b*Math.sin(e-this.long0),i.y=this.y0-this.con*b*Math.cos(e-this.long0),i):(Math.abs(this.sinlat0)<EPSLN?(c=2*this.a*this.k0/(1+g*Math.cos(j)),i.y=c*h):(c=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*h+this.cosX0*g*Math.cos(j))),i.y=c*(this.cosX0*h-this.sinX0*g*Math.cos(j))+this.y0),i.x=c*g*Math.sin(j)+this.x0,i))}function inverse$p(i){i.x-=this.x0,i.y-=this.y0;var e,a,s,o,c,d=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var h=2*Math.atan(d/(2*this.a*this.k0));return e=this.long0,a=this.lat0,d<=EPSLN?(i.x=e,i.y=a,i):(a=Math.asin(Math.cos(h)*this.sinlat0+i.y*Math.sin(h)*this.coslat0/d),Math.abs(this.coslat0)<EPSLN?this.lat0>0?e=adjust_lon(this.long0+Math.atan2(i.x,-1*i.y)):e=adjust_lon(this.long0+Math.atan2(i.x,i.y)):e=adjust_lon(this.long0+Math.atan2(i.x*Math.sin(h),d*this.coslat0*Math.cos(h)-i.y*this.sinlat0*Math.sin(h))),i.x=e,i.y=a,i)}else if(Math.abs(this.coslat0)<=EPSLN){if(d<=EPSLN)return a=this.lat0,e=this.long0,i.x=e,i.y=a,i;i.x*=this.con,i.y*=this.con,s=d*this.cons/(2*this.a*this.k0),a=this.con*phi2z(this.e,s),e=this.con*adjust_lon(this.con*this.long0+Math.atan2(i.x,-1*i.y))}else o=2*Math.atan(d*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,d<=EPSLN?c=this.X0:(c=Math.asin(Math.cos(o)*this.sinX0+i.y*Math.sin(o)*this.cosX0/d),e=adjust_lon(this.long0+Math.atan2(i.x*Math.sin(o),d*this.cosX0*Math.cos(o)-i.y*this.sinX0*Math.sin(o)))),a=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+c)));return i.x=e,i.y=a,i}var names$q=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const stere={init:init$q,forward:forward$p,inverse:inverse$p,names:names$q,ssfn_};function init$p(){var i=this.lat0;this.lambda0=this.long0;var e=Math.sin(i),a=this.a,s=this.rf,o=1/s,c=2*o-Math.pow(o,2),d=this.e=Math.sqrt(c);this.R=this.k0*a*Math.sqrt(1-c)/(1-c*Math.pow(e,2)),this.alpha=Math.sqrt(1+c/(1-c)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(e/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),g=Math.log(Math.tan(Math.PI/4+i/2)),_=Math.log((1+d*e)/(1-d*e));this.K=h-this.alpha*g+this.alpha*d/2*_}function forward$o(i){var e=Math.log(Math.tan(Math.PI/4-i.y/2)),a=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),s=-this.alpha*(e+a)+this.K,o=2*(Math.atan(Math.exp(s))-Math.PI/4),c=this.alpha*(i.x-this.lambda0),d=Math.atan(Math.sin(c)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(c))),h=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(c));return i.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,i.x=this.R*d+this.x0,i}function inverse$o(i){for(var e=i.x-this.x0,a=i.y-this.y0,s=e/this.R,o=2*(Math.atan(Math.exp(a/this.R))-Math.PI/4),c=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(s)),d=Math.atan(Math.sin(s)/(Math.cos(this.b0)*Math.cos(s)-Math.sin(this.b0)*Math.tan(o))),h=this.lambda0+d/this.alpha,g=0,_=c,b=-1e3,j=0;Math.abs(_-b)>1e-7;){if(++j>20)return;g=1/this.alpha*(Math.log(Math.tan(Math.PI/4+c/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(_))/2)),b=_,_=2*Math.atan(Math.exp(g))-Math.PI/2}return i.x=h,i.y=_,i}var names$p=["somerc"];const somerc={init:init$p,forward:forward$o,inverse:inverse$o,names:names$p};var TOL=1e-7;function isTypeA(i){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],a=typeof i.PROJECTION=="object"?Object.keys(i.PROJECTION)[0]:i.PROJECTION;return"no_uoff"in i||"no_off"in i||e.indexOf(a)!==-1}function init$o(){var i,e,a,s,o,c,d,h,g,_,b=0,j,$=0,_e=0,et=0,tt=0,it=0,nt=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var rt=!1;"alpha"in this&&(rt=!0);var at=!1;if("rectified_grid_angle"in this&&(at=!0),rt&&(nt=this.alpha),at&&(b=this.rectified_grid_angle*D2R$1),rt||at)$=this.longc;else if(_e=this.long1,tt=this.lat1,et=this.long2,it=this.lat2,Math.abs(tt-it)<=TOL||(i=Math.abs(tt))<=TOL||Math.abs(i-HALF_PI)<=TOL||Math.abs(Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(it)-HALF_PI)<=TOL)throw new Error;var st=1-this.es;e=Math.sqrt(st),Math.abs(this.lat0)>EPSLN?(h=Math.sin(this.lat0),a=Math.cos(this.lat0),i=1-this.es*h*h,this.B=a*a,this.B=Math.sqrt(1+this.es*this.B*this.B/st),this.A=this.B*this.k0*e/i,s=this.B*e/(a*Math.sqrt(i)),o=s*s-1,o<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=s,this.E*=Math.pow(tsfnz(this.e,this.lat0,h),this.B)):(this.B=1/e,this.A=this.k0,this.E=s=o=1),rt||at?(rt?(j=Math.asin(Math.sin(nt)/s),at||(b=nt)):(j=b,nt=Math.asin(s*Math.sin(j))),this.lam0=$-Math.asin(.5*(o-1/o)*Math.tan(j))/this.B):(c=Math.pow(tsfnz(this.e,tt,Math.sin(tt)),this.B),d=Math.pow(tsfnz(this.e,it,Math.sin(it)),this.B),o=this.E/c,g=(d-c)/(d+c),_=this.E*this.E,_=(_-d*c)/(_+d*c),i=_e-et,i<-Math.pi?et-=TWO_PI:i>Math.pi&&(et+=TWO_PI),this.lam0=adjust_lon(.5*(_e+et)-Math.atan(_*Math.tan(.5*this.B*(_e-et))/g)/this.B),j=Math.atan(2*Math.sin(this.B*adjust_lon(_e-this.lam0))/(o-1/o)),b=nt=Math.asin(s*Math.sin(j))),this.singam=Math.sin(j),this.cosgam=Math.cos(j),this.sinrot=Math.sin(b),this.cosrot=Math.cos(b),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(s*s-1)/Math.cos(nt))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*j,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+o))}function forward$n(i){var e={},a,s,o,c,d,h,g,_;if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-HALF_PI)>EPSLN){if(d=this.E/Math.pow(tsfnz(this.e,i.y,Math.sin(i.y)),this.B),h=1/d,a=.5*(d-h),s=.5*(d+h),c=Math.sin(this.B*i.x),o=(a*this.singam-c*this.cosgam)/s,Math.abs(Math.abs(o)-1)<EPSLN)throw new Error;_=.5*this.ArB*Math.log((1-o)/(1+o)),h=Math.cos(this.B*i.x),Math.abs(h)<TOL?g=this.A*i.x:g=this.ArB*Math.atan2(a*this.cosgam+c*this.singam,h)}else _=i.y>0?this.v_pole_n:this.v_pole_s,g=this.ArB*i.y;return this.no_rot?(e.x=g,e.y=_):(g-=this.u_0,e.x=_*this.cosrot+g*this.sinrot,e.y=g*this.cosrot-_*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function inverse$n(i){var e,a,s,o,c,d,h,g={};if(i.x=(i.x-this.x0)*(1/this.a),i.y=(i.y-this.y0)*(1/this.a),this.no_rot?(a=i.y,e=i.x):(a=i.x*this.cosrot-i.y*this.sinrot,e=i.y*this.cosrot+i.x*this.sinrot+this.u_0),s=Math.exp(-this.BrA*a),o=.5*(s-1/s),c=.5*(s+1/s),d=Math.sin(this.BrA*e),h=(d*this.cosgam+o*this.singam)/c,Math.abs(Math.abs(h)-1)<EPSLN)g.x=0,g.y=h<0?-HALF_PI:HALF_PI;else{if(g.y=this.E/Math.sqrt((1+h)/(1-h)),g.y=phi2z(this.e,Math.pow(g.y,1/this.B)),g.y===1/0)throw new Error;g.x=-this.rB*Math.atan2(o*this.cosgam-d*this.singam,Math.cos(this.BrA*e))}return g.x+=this.lam0,g}var names$o=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const omerc={init:init$o,forward:forward$n,inverse:inverse$n,names:names$o};function init$n(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var e=Math.sin(this.lat1),a=Math.cos(this.lat1),s=msfnz(this.e,e,a),o=tsfnz(this.e,this.lat1,e),c=Math.sin(this.lat2),d=Math.cos(this.lat2),h=msfnz(this.e,c,d),g=tsfnz(this.e,this.lat2,c),_=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(s/h)/Math.log(o/g):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=s/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(_,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function forward$m(i){var e=i.x,a=i.y;Math.abs(2*Math.abs(a)-Math.PI)<=EPSLN&&(a=sign(a)*(HALF_PI-2*EPSLN));var s=Math.abs(Math.abs(a)-HALF_PI),o,c;if(s>EPSLN)o=tsfnz(this.e,a,Math.sin(a)),c=this.a*this.f0*Math.pow(o,this.ns);else{if(s=a*this.ns,s<=0)return null;c=0}var d=this.ns*adjust_lon(e-this.long0);return i.x=this.k0*(c*Math.sin(d))+this.x0,i.y=this.k0*(this.rh-c*Math.cos(d))+this.y0,i}function inverse$m(i){var e,a,s,o,c,d=(i.x-this.x0)/this.k0,h=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(d*d+h*h),a=1):(e=-Math.sqrt(d*d+h*h),a=-1);var g=0;if(e!==0&&(g=Math.atan2(a*d,a*h)),e!==0||this.ns>0){if(a=1/this.ns,s=Math.pow(e/(this.a*this.f0),a),o=phi2z(this.e,s),o===-9999)return null}else o=-HALF_PI;return c=adjust_lon(g/this.ns+this.long0),i.x=c,i.y=o,i}var names$n=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const lcc={init:init$n,forward:forward$m,inverse:inverse$m,names:names$n};function init$m(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$l(i){var e,a,s,o,c,d,h,g=i.x,_=i.y,b=adjust_lon(g-this.long0);return e=Math.pow((1+this.e*Math.sin(_))/(1-this.e*Math.sin(_)),this.alfa*this.e/2),a=2*(Math.atan(this.k*Math.pow(Math.tan(_/2+this.s45),this.alfa)/e)-this.s45),s=-b*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(a)+Math.sin(this.ad)*Math.cos(a)*Math.cos(s)),c=Math.asin(Math.cos(a)*Math.sin(s)/Math.cos(o)),d=this.n*c,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),i.y=h*Math.cos(d)/1,i.x=h*Math.sin(d)/1,this.czech||(i.y*=-1,i.x*=-1),i}function inverse$l(i){var e,a,s,o,c,d,h,g,_=i.x;i.x=i.y,i.y=_,this.czech||(i.y*=-1,i.x*=-1),d=Math.sqrt(i.x*i.x+i.y*i.y),c=Math.atan2(i.y,i.x),o=c/Math.sin(this.s0),s=2*(Math.atan(Math.pow(this.ro0/d,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(s)-Math.sin(this.ad)*Math.cos(s)*Math.cos(o)),a=Math.asin(Math.cos(s)*Math.sin(o)/Math.cos(e)),i.x=this.long0-a/this.alfa,h=e,g=0;var b=0;do i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-i.y)<1e-10&&(g=1),h=i.y,b+=1;while(g===0&&b<15);return b>=15?null:i}var names$m=["Krovak","krovak"];const krovak={init:init$m,forward:forward$l,inverse:inverse$l,names:names$m};function mlfn(i,e,a,s,o){return i*o-e*Math.sin(2*o)+a*Math.sin(4*o)-s*Math.sin(6*o)}function e0fn(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function e1fn(i){return .375*i*(1+.25*i*(1+.46875*i))}function e2fn(i){return .05859375*i*i*(1+.75*i)}function e3fn(i){return i*i*i*(35/3072)}function gN(i,e,a){var s=e*a;return i/Math.sqrt(1-s*s)}function adjust_lat(i){return Math.abs(i)<HALF_PI?i:i-sign(i)*Math.PI}function imlfn(i,e,a,s,o){var c,d;c=i/e;for(var h=0;h<15;h++)if(d=(i-(e*c-a*Math.sin(2*c)+s*Math.sin(4*c)-o*Math.sin(6*c)))/(e-2*a*Math.cos(2*c)+4*s*Math.cos(4*c)-6*o*Math.cos(6*c)),c+=d,Math.abs(d)<=1e-10)return c;return NaN}function init$l(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$k(i){var e,a,s=i.x,o=i.y;if(s=adjust_lon(s-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(s)),a=this.a*(Math.atan2(Math.tan(o),Math.cos(s))-this.lat0);else{var c=Math.sin(o),d=Math.cos(o),h=gN(this.a,this.e,c),g=Math.tan(o)*Math.tan(o),_=s*Math.cos(o),b=_*_,j=this.es*d*d/(1-this.es),$=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,o);e=h*_*(1-b*g*(1/6-(8-g+8*j)*b/120)),a=$-this.ml0+h*c/d*b*(.5+(5-g+6*j)*b/24)}return i.x=e+this.x0,i.y=a+this.y0,i}function inverse$k(i){i.x-=this.x0,i.y-=this.y0;var e=i.x/this.a,a=i.y/this.a,s,o;if(this.sphere){var c=a+this.lat0;s=Math.asin(Math.sin(c)*Math.cos(e)),o=Math.atan2(Math.tan(e),Math.cos(c))}else{var d=this.ml0/this.a+a,h=imlfn(d,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-HALF_PI)<=EPSLN)return i.x=this.long0,i.y=HALF_PI,a<0&&(i.y*=-1),i;var g=gN(this.a,this.e,Math.sin(h)),_=g*g*g/this.a/this.a*(1-this.es),b=Math.pow(Math.tan(h),2),j=e*this.a/g,$=j*j;s=h-g*Math.tan(h)/_*j*j*(.5-(1+3*b)*j*j/24),o=j*(1-$*(b/3+(1+3*b)*b*$/15))/Math.cos(h)}return i.x=adjust_lon(o+this.long0),i.y=adjust_lat(s),i}var names$l=["Cassini","Cassini_Soldner","cass"];const cass={init:init$l,forward:forward$k,inverse:inverse$k,names:names$l};function qsfnz(i,e){var a;return i>1e-7?(a=i*e,(1-i*i)*(e/(1-a*a)-.5/i*Math.log((1-a)/(1+a)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$k(){var i=Math.abs(this.lat0);if(Math.abs(i-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$j(i){var e,a,s,o,c,d,h,g,_,b,j=i.x,$=i.y;if(j=adjust_lon(j-this.long0),this.sphere){if(c=Math.sin($),b=Math.cos($),s=Math.cos(j),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(a=this.mode===this.EQUIT?1+b*s:1+this.sinph0*c+this.cosph0*b*s,a<=EPSLN)return null;a=Math.sqrt(2/a),e=a*b*Math.sin(j),a*=this.mode===this.EQUIT?c:this.cosph0*c-this.sinph0*b*s}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),Math.abs($+this.lat0)<EPSLN)return null;a=FORTPI-$*.5,a=2*(this.mode===this.S_POLE?Math.cos(a):Math.sin(a)),e=a*Math.sin(j),a*=s}}else{switch(h=0,g=0,_=0,s=Math.cos(j),o=Math.sin(j),c=Math.sin($),d=qsfnz(this.e,c),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(h=d/this.qp,g=Math.sqrt(1-h*h)),this.mode){case this.OBLIQ:_=1+this.sinb1*h+this.cosb1*g*s;break;case this.EQUIT:_=1+g*s;break;case this.N_POLE:_=HALF_PI+$,d=this.qp-d;break;case this.S_POLE:_=$-HALF_PI,d=this.qp+d;break}if(Math.abs(_)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:_=Math.sqrt(2/_),this.mode===this.OBLIQ?a=this.ymf*_*(this.cosb1*h-this.sinb1*g*s):a=(_=Math.sqrt(2/(1+g*s)))*h*this.ymf,e=this.xmf*_*g*o;break;case this.N_POLE:case this.S_POLE:d>=0?(e=(_=Math.sqrt(d))*o,a=s*(this.mode===this.S_POLE?_:-_)):e=a=0;break}}return i.x=this.a*e+this.x0,i.y=this.a*a+this.y0,i}function inverse$j(i){i.x-=this.x0,i.y-=this.y0;var e=i.x/this.a,a=i.y/this.a,s,o,c,d,h,g,_;if(this.sphere){var b=0,j,$=0;if(j=Math.sqrt(e*e+a*a),o=j*.5,o>1)return null;switch(o=2*Math.asin(o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&($=Math.sin(o),b=Math.cos(o)),this.mode){case this.EQUIT:o=Math.abs(j)<=EPSLN?0:Math.asin(a*$/j),e*=$,a=b*j;break;case this.OBLIQ:o=Math.abs(j)<=EPSLN?this.lat0:Math.asin(b*this.sinph0+a*$*this.cosph0/j),e*=$*this.cosph0,a=(b-Math.sin(o)*this.sinph0)*j;break;case this.N_POLE:a=-a,o=HALF_PI-o;break;case this.S_POLE:o-=HALF_PI;break}s=a===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,a)}else{if(_=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,a*=this.dd,g=Math.sqrt(e*e+a*a),g<EPSLN)return i.x=this.long0,i.y=this.lat0,i;d=2*Math.asin(.5*g/this.rq),c=Math.cos(d),e*=d=Math.sin(d),this.mode===this.OBLIQ?(_=c*this.sinb1+a*d*this.cosb1/g,h=this.qp*_,a=g*this.cosb1*c-a*this.sinb1*d):(_=a*d/g,h=this.qp*_,a=g*c)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),h=e*e+a*a,!h)return i.x=this.long0,i.y=this.lat0,i;_=1-h/this.qp,this.mode===this.S_POLE&&(_=-_)}s=Math.atan2(e,a),o=authlat(Math.asin(_),this.apa)}return i.x=adjust_lon(this.long0+s),i.y=o,i}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(i){var e,a=[];return a[0]=i*P00,e=i*i,a[0]+=e*P01,a[1]=e*P10,e*=i,a[0]+=e*P02,a[1]+=e*P11,a[2]=e*P20,a}function authlat(i,e){var a=i+i;return i+e[0]*Math.sin(a)+e[1]*Math.sin(a+a)+e[2]*Math.sin(a+a+a)}var names$k=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const laea={init:init$k,forward:forward$j,inverse:inverse$j,names:names$k,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}function init$j(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function forward$i(i){var e=i.x,a=i.y;this.sin_phi=Math.sin(a),this.cos_phi=Math.cos(a);var s=qsfnz(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*s)/this.ns0,c=this.ns0*adjust_lon(e-this.long0),d=o*Math.sin(c)+this.x0,h=this.rh-o*Math.cos(c)+this.y0;return i.x=d,i.y=h,i}function inverse$i(i){var e,a,s,o,c,d;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(e=Math.sqrt(i.x*i.x+i.y*i.y),s=1):(e=-Math.sqrt(i.x*i.x+i.y*i.y),s=-1),o=0,e!==0&&(o=Math.atan2(s*i.x,s*i.y)),s=e*this.ns0/this.a,this.sphere?d=Math.asin((this.c-s*s)/(2*this.ns0)):(a=(this.c-s*s)/this.ns0,d=this.phi1z(this.e3,a)),c=adjust_lon(o/this.ns0+this.long0),i.x=c,i.y=d,i}function phi1z(i,e){var a,s,o,c,d,h=asinz(.5*e);if(i<EPSLN)return h;for(var g=i*i,_=1;_<=25;_++)if(a=Math.sin(h),s=Math.cos(h),o=i*a,c=1-o*o,d=.5*c*c/s*(e/(1-g)-a/c+.5/i*Math.log((1-o)/(1+o))),h=h+d,Math.abs(d)<=1e-7)return h;return null}var names$j=["Albers_Conic_Equal_Area","Albers","aea"];const aea={init:init$j,forward:forward$i,inverse:inverse$i,names:names$j,phi1z};function init$i(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$h(i){var e,a,s,o,c,d,h,g,_=i.x,b=i.y;return s=adjust_lon(_-this.long0),e=Math.sin(b),a=Math.cos(b),o=Math.cos(s),d=this.sin_p14*e+this.cos_p14*a*o,c=1,d>0||Math.abs(d)<=EPSLN?(h=this.x0+this.a*c*a*Math.sin(s)/d,g=this.y0+this.a*c*(this.cos_p14*e-this.sin_p14*a*o)/d):(h=this.x0+this.infinity_dist*a*Math.sin(s),g=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*a*o)),i.x=h,i.y=g,i}function inverse$h(i){var e,a,s,o,c,d;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(e=Math.sqrt(i.x*i.x+i.y*i.y))?(o=Math.atan2(e,this.rc),a=Math.sin(o),s=Math.cos(o),d=asinz(s*this.sin_p14+i.y*a*this.cos_p14/e),c=Math.atan2(i.x*a,e*this.cos_p14*s-i.y*this.sin_p14*a),c=adjust_lon(this.long0+c)):(d=this.phic0,c=0),i.x=c,i.y=d,i}var names$i=["gnom"];const gnom={init:init$i,forward:forward$h,inverse:inverse$h,names:names$i};function iqsfnz(i,e){var a=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(e)-a)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var s=Math.asin(.5*e),o,c,d,h,g=0;g<30;g++)if(c=Math.sin(s),d=Math.cos(s),h=i*c,o=Math.pow(1-h*h,2)/(2*d)*(e/(1-i*i)-c/(1-h*h)+.5/i*Math.log((1-h)/(1+h))),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function init$h(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function forward$g(i){var e=i.x,a=i.y,s,o,c=adjust_lon(e-this.long0);if(this.sphere)s=this.x0+this.a*c*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var d=qsfnz(this.e,Math.sin(a));s=this.x0+this.a*this.k0*c,o=this.y0+this.a*d*.5/this.k0}return i.x=s,i.y=o,i}function inverse$g(i){i.x-=this.x0,i.y-=this.y0;var e,a;return this.sphere?(e=adjust_lon(this.long0+i.x/this.a/Math.cos(this.lat_ts)),a=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(a=iqsfnz(this.e,2*i.y*this.k0/this.a),e=adjust_lon(this.long0+i.x/(this.a*this.k0))),i.x=e,i.y=a,i}var names$h=["cea"];const cea={init:init$h,forward:forward$g,inverse:inverse$g,names:names$h};function init$g(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$f(i){var e=i.x,a=i.y,s=adjust_lon(e-this.long0),o=adjust_lat(a-this.lat0);return i.x=this.x0+this.a*s*this.rc,i.y=this.y0+this.a*o,i}function inverse$f(i){var e=i.x,a=i.y;return i.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),i.y=adjust_lat(this.lat0+(a-this.y0)/this.a),i}var names$g=["Equirectangular","Equidistant_Cylindrical","eqc"];const eqc={init:init$g,forward:forward$f,inverse:inverse$f,names:names$g};var MAX_ITER$1=20;function init$f(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$e(i){var e=i.x,a=i.y,s,o,c,d=adjust_lon(e-this.long0);if(c=d*Math.sin(a),this.sphere)Math.abs(a)<=EPSLN?(s=this.a*d,o=-1*this.a*this.lat0):(s=this.a*Math.sin(c)/Math.tan(a),o=this.a*(adjust_lat(a-this.lat0)+(1-Math.cos(c))/Math.tan(a)));else if(Math.abs(a)<=EPSLN)s=this.a*d,o=-1*this.ml0;else{var h=gN(this.a,this.e,Math.sin(a))/Math.tan(a);s=h*Math.sin(c),o=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+h*(1-Math.cos(c))}return i.x=s+this.x0,i.y=o+this.y0,i}function inverse$e(i){var e,a,s,o,c,d,h,g,_;if(s=i.x-this.x0,o=i.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=EPSLN)e=adjust_lon(s/this.a+this.long0),a=0;else{d=this.lat0+o/this.a,h=s*s/this.a/this.a+d*d,g=d;var b;for(c=MAX_ITER$1;c;--c)if(b=Math.tan(g),_=-1*(d*(g*b+1)-g-.5*(g*g+h)*b)/((g-d)/b-1),g+=_,Math.abs(_)<=EPSLN){a=g;break}e=adjust_lon(this.long0+Math.asin(s*Math.tan(g)/this.a)/Math.sin(a))}else if(Math.abs(o+this.ml0)<=EPSLN)a=0,e=adjust_lon(this.long0+s/this.a);else{d=(this.ml0+o)/this.a,h=s*s/this.a/this.a+d*d,g=d;var j,$,_e,et,tt;for(c=MAX_ITER$1;c;--c)if(tt=this.e*Math.sin(g),j=Math.sqrt(1-tt*tt)*Math.tan(g),$=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,g),_e=this.e0-2*this.e1*Math.cos(2*g)+4*this.e2*Math.cos(4*g)-6*this.e3*Math.cos(6*g),et=$/this.a,_=(d*(j*et+1)-et-.5*j*(et*et+h))/(this.es*Math.sin(2*g)*(et*et+h-2*d*et)/(4*j)+(d-et)*(j*_e-2/Math.sin(2*g))-_e),g-=_,Math.abs(_)<=EPSLN){a=g;break}j=Math.sqrt(1-this.es*Math.pow(Math.sin(a),2))*Math.tan(a),e=adjust_lon(this.long0+Math.asin(s*j/this.a)/Math.sin(a))}return i.x=e,i.y=a,i}var names$f=["Polyconic","poly"];const poly={init:init$f,forward:forward$e,inverse:inverse$e,names:names$f};function init$e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$d(i){var e,a=i.x,s=i.y,o=s-this.lat0,c=a-this.long0,d=o/SEC_TO_RAD*1e-5,h=c,g=1,_=0;for(e=1;e<=10;e++)g=g*d,_=_+this.A[e]*g;var b=_,j=h,$=1,_e=0,et,tt,it=0,nt=0;for(e=1;e<=6;e++)et=$*b-_e*j,tt=_e*b+$*j,$=et,_e=tt,it=it+this.B_re[e]*$-this.B_im[e]*_e,nt=nt+this.B_im[e]*$+this.B_re[e]*_e;return i.x=nt*this.a+this.x0,i.y=it*this.a+this.y0,i}function inverse$d(i){var e,a=i.x,s=i.y,o=a-this.x0,c=s-this.y0,d=c/this.a,h=o/this.a,g=1,_=0,b,j,$=0,_e=0;for(e=1;e<=6;e++)b=g*d-_*h,j=_*d+g*h,g=b,_=j,$=$+this.C_re[e]*g-this.C_im[e]*_,_e=_e+this.C_im[e]*g+this.C_re[e]*_;for(var et=0;et<this.iterations;et++){var tt=$,it=_e,nt,rt,at=d,st=h;for(e=2;e<=6;e++)nt=tt*$-it*_e,rt=it*$+tt*_e,tt=nt,it=rt,at=at+(e-1)*(this.B_re[e]*tt-this.B_im[e]*it),st=st+(e-1)*(this.B_im[e]*tt+this.B_re[e]*it);tt=1,it=0;var ot=this.B_re[1],dt=this.B_im[1];for(e=2;e<=6;e++)nt=tt*$-it*_e,rt=it*$+tt*_e,tt=nt,it=rt,ot=ot+e*(this.B_re[e]*tt-this.B_im[e]*it),dt=dt+e*(this.B_im[e]*tt+this.B_re[e]*it);var ut=ot*ot+dt*dt;$=(at*ot+st*dt)/ut,_e=(st*ot-at*dt)/ut}var ct=$,ht=_e,mt=1,pt=0;for(e=1;e<=9;e++)mt=mt*ct,pt=pt+this.D[e]*mt;var ft=this.lat0+pt*SEC_TO_RAD*1e5,yt=this.long0+ht;return i.x=yt,i.y=ft,i}var names$e=["New_Zealand_Map_Grid","nzmg"];const nzmg={init:init$e,forward:forward$d,inverse:inverse$d,names:names$e};function init$d(){}function forward$c(i){var e=i.x,a=i.y,s=adjust_lon(e-this.long0),o=this.x0+this.a*s,c=this.y0+this.a*Math.log(Math.tan(Math.PI/4+a/2.5))*1.25;return i.x=o,i.y=c,i}function inverse$c(i){i.x-=this.x0,i.y-=this.y0;var e=adjust_lon(this.long0+i.x/this.a),a=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=e,i.y=a,i}var names$d=["Miller_Cylindrical","mill"];const mill={init:init$d,forward:forward$c,inverse:inverse$c,names:names$d};var MAX_ITER=20;function init$c(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$b(i){var e,a,s=i.x,o=i.y;if(s=adjust_lon(s-this.long0),this.sphere){if(!this.m)o=this.n!==1?Math.asin(this.n*Math.sin(o)):o;else for(var c=this.n*Math.sin(o),d=MAX_ITER;d;--d){var h=(this.m*o+Math.sin(o)-c)/(this.m+Math.cos(o));if(o-=h,Math.abs(h)<EPSLN)break}e=this.a*this.C_x*s*(this.m+Math.cos(o)),a=this.a*this.C_y*o}else{var g=Math.sin(o),_=Math.cos(o);a=this.a*pj_mlfn(o,g,_,this.en),e=this.a*s*_/Math.sqrt(1-this.es*g*g)}return i.x=e,i.y=a,i}function inverse$b(i){var e,a,s,o;return i.x-=this.x0,s=i.x/this.a,i.y-=this.y0,e=i.y/this.a,this.sphere?(e/=this.C_y,s=s/(this.C_x*(this.m+Math.cos(e))),this.m?e=asinz((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=asinz(Math.sin(e)/this.n)),s=adjust_lon(s+this.long0),e=adjust_lat(e)):(e=pj_inv_mlfn(i.y/this.a,this.es,this.en),o=Math.abs(e),o<HALF_PI?(o=Math.sin(e),a=this.long0+i.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(e)),s=adjust_lon(a)):o-EPSLN<HALF_PI&&(s=this.long0)),i.x=s,i.y=e,i}var names$c=["Sinusoidal","sinu"];const sinu={init:init$c,forward:forward$b,inverse:inverse$b,names:names$c};function init$b(){}function forward$a(i){for(var e=i.x,a=i.y,s=adjust_lon(e-this.long0),o=a,c=Math.PI*Math.sin(a);;){var d=-(o+Math.sin(o)-c)/(1+Math.cos(o));if(o+=d,Math.abs(d)<EPSLN)break}o/=2,Math.PI/2-Math.abs(a)<EPSLN&&(s=0);var h=.900316316158*this.a*s*Math.cos(o)+this.x0,g=1.4142135623731*this.a*Math.sin(o)+this.y0;return i.x=h,i.y=g,i}function inverse$a(i){var e,a;i.x-=this.x0,i.y-=this.y0,a=i.y/(1.4142135623731*this.a),Math.abs(a)>.999999999999&&(a=.999999999999),e=Math.asin(a);var s=adjust_lon(this.long0+i.x/(.900316316158*this.a*Math.cos(e)));s<-Math.PI&&(s=-Math.PI),s>Math.PI&&(s=Math.PI),a=(2*e+Math.sin(2*e))/Math.PI,Math.abs(a)>1&&(a=1);var o=Math.asin(a);return i.x=s,i.y=o,i}var names$b=["Mollweide","moll"];const moll={init:init$b,forward:forward$a,inverse:inverse$a,names:names$b};function init$a(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function forward$9(i){var e=i.x,a=i.y,s;if(this.sphere)s=this.a*(this.g-a);else{var o=mlfn(this.e0,this.e1,this.e2,this.e3,a);s=this.a*(this.g-o)}var c=this.ns*adjust_lon(e-this.long0),d=this.x0+s*Math.sin(c),h=this.y0+this.rh-s*Math.cos(c);return i.x=d,i.y=h,i}function inverse$9(i){i.x-=this.x0,i.y=this.rh-i.y+this.y0;var e,a,s,o;this.ns>=0?(a=Math.sqrt(i.x*i.x+i.y*i.y),e=1):(a=-Math.sqrt(i.x*i.x+i.y*i.y),e=-1);var c=0;if(a!==0&&(c=Math.atan2(e*i.x,e*i.y)),this.sphere)return o=adjust_lon(this.long0+c/this.ns),s=adjust_lat(this.g-a/this.a),i.x=o,i.y=s,i;var d=this.g-a/this.a;return s=imlfn(d,this.e0,this.e1,this.e2,this.e3),o=adjust_lon(this.long0+c/this.ns),i.x=o,i.y=s,i}var names$a=["Equidistant_Conic","eqdc"];const eqdc={init:init$a,forward:forward$9,inverse:inverse$9,names:names$a};function init$9(){this.R=this.a}function forward$8(i){var e=i.x,a=i.y,s=adjust_lon(e-this.long0),o,c;Math.abs(a)<=EPSLN&&(o=this.x0+this.R*s,c=this.y0);var d=asinz(2*Math.abs(a/Math.PI));(Math.abs(s)<=EPSLN||Math.abs(Math.abs(a)-HALF_PI)<=EPSLN)&&(o=this.x0,a>=0?c=this.y0+Math.PI*this.R*Math.tan(.5*d):c=this.y0+Math.PI*this.R*-Math.tan(.5*d));var h=.5*Math.abs(Math.PI/s-s/Math.PI),g=h*h,_=Math.sin(d),b=Math.cos(d),j=b/(_+b-1),$=j*j,_e=j*(2/_-1),et=_e*_e,tt=Math.PI*this.R*(h*(j-et)+Math.sqrt(g*(j-et)*(j-et)-(et+g)*($-et)))/(et+g);s<0&&(tt=-tt),o=this.x0+tt;var it=g+j;return tt=Math.PI*this.R*(_e*it-h*Math.sqrt((et+g)*(g+1)-it*it))/(et+g),a>=0?c=this.y0+tt:c=this.y0-tt,i.x=o,i.y=c,i}function inverse$8(i){var e,a,s,o,c,d,h,g,_,b,j,$,_e;return i.x-=this.x0,i.y-=this.y0,j=Math.PI*this.R,s=i.x/j,o=i.y/j,c=s*s+o*o,d=-Math.abs(o)*(1+c),h=d-2*o*o+s*s,g=-2*d+1+2*o*o+c*c,_e=o*o/g+(2*h*h*h/g/g/g-9*d*h/g/g)/27,_=(d-h*h/3/g)/g,b=2*Math.sqrt(-_/3),j=3*_e/_/b,Math.abs(j)>1&&(j>=0?j=1:j=-1),$=Math.acos(j)/3,i.y>=0?a=(-b*Math.cos($+Math.PI/3)-h/3/g)*Math.PI:a=-(-b*Math.cos($+Math.PI/3)-h/3/g)*Math.PI,Math.abs(s)<EPSLN?e=this.long0:e=adjust_lon(this.long0+Math.PI*(c-1+Math.sqrt(1+2*(s*s-o*o)+c*c))/2/s),i.x=e,i.y=a,i}var names$9=["Van_der_Grinten_I","VanDerGrinten","vandg"];const vandg={init:init$9,forward:forward$8,inverse:inverse$8,names:names$9};function init$8(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$7(i){var e=i.x,a=i.y,s=Math.sin(i.y),o=Math.cos(i.y),c=adjust_lon(e-this.long0),d,h,g,_,b,j,$,_e,et,tt,it,nt,rt,at,st,ot,dt,ut,ct,ht,mt,pt,ft;return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(i.x=this.x0+this.a*(HALF_PI-a)*Math.sin(c),i.y=this.y0-this.a*(HALF_PI-a)*Math.cos(c),i):Math.abs(this.sin_p12+1)<=EPSLN?(i.x=this.x0+this.a*(HALF_PI+a)*Math.sin(c),i.y=this.y0+this.a*(HALF_PI+a)*Math.cos(c),i):(ut=this.sin_p12*s+this.cos_p12*o*Math.cos(c),ot=Math.acos(ut),dt=ot?ot/Math.sin(ot):1,i.x=this.x0+this.a*dt*o*Math.sin(c),i.y=this.y0+this.a*dt*(this.cos_p12*s-this.sin_p12*o*Math.cos(c)),i):(d=e0fn(this.es),h=e1fn(this.es),g=e2fn(this.es),_=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(b=this.a*mlfn(d,h,g,_,HALF_PI),j=this.a*mlfn(d,h,g,_,a),i.x=this.x0+(b-j)*Math.sin(c),i.y=this.y0-(b-j)*Math.cos(c),i):Math.abs(this.sin_p12+1)<=EPSLN?(b=this.a*mlfn(d,h,g,_,HALF_PI),j=this.a*mlfn(d,h,g,_,a),i.x=this.x0+(b+j)*Math.sin(c),i.y=this.y0+(b+j)*Math.cos(c),i):($=s/o,_e=gN(this.a,this.e,this.sin_p12),et=gN(this.a,this.e,s),tt=Math.atan((1-this.es)*$+this.es*_e*this.sin_p12/(et*o)),it=Math.atan2(Math.sin(c),this.cos_p12*Math.tan(tt)-this.sin_p12*Math.cos(c)),it===0?ct=Math.asin(this.cos_p12*Math.sin(tt)-this.sin_p12*Math.cos(tt)):Math.abs(Math.abs(it)-Math.PI)<=EPSLN?ct=-Math.asin(this.cos_p12*Math.sin(tt)-this.sin_p12*Math.cos(tt)):ct=Math.asin(Math.sin(c)*Math.cos(tt)/Math.sin(it)),nt=this.e*this.sin_p12/Math.sqrt(1-this.es),rt=this.e*this.cos_p12*Math.cos(it)/Math.sqrt(1-this.es),at=nt*rt,st=rt*rt,ht=ct*ct,mt=ht*ct,pt=mt*ct,ft=pt*ct,ot=_e*ct*(1-ht*st*(1-st)/6+mt/8*at*(1-2*st)+pt/120*(st*(4-7*st)-3*nt*nt*(1-7*st))-ft/48*at),i.x=this.x0+ot*Math.sin(it),i.y=this.y0+ot*Math.cos(it),i))}function inverse$7(i){i.x-=this.x0,i.y-=this.y0;var e,a,s,o,c,d,h,g,_,b,j,$,_e,et,tt,it,nt,rt,at,st,ot,dt,ut,ct;return this.sphere?(e=Math.sqrt(i.x*i.x+i.y*i.y),e>2*HALF_PI*this.a?void 0:(a=e/this.a,s=Math.sin(a),o=Math.cos(a),c=this.long0,Math.abs(e)<=EPSLN?d=this.lat0:(d=asinz(o*this.sin_p12+i.y*s*this.cos_p12/e),h=Math.abs(this.lat0)-HALF_PI,Math.abs(h)<=EPSLN?this.lat0>=0?c=adjust_lon(this.long0+Math.atan2(i.x,-i.y)):c=adjust_lon(this.long0-Math.atan2(-i.x,i.y)):c=adjust_lon(this.long0+Math.atan2(i.x*s,e*this.cos_p12*o-i.y*this.sin_p12*s))),i.x=c,i.y=d,i)):(g=e0fn(this.es),_=e1fn(this.es),b=e2fn(this.es),j=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?($=this.a*mlfn(g,_,b,j,HALF_PI),e=Math.sqrt(i.x*i.x+i.y*i.y),_e=$-e,d=imlfn(_e/this.a,g,_,b,j),c=adjust_lon(this.long0+Math.atan2(i.x,-1*i.y)),i.x=c,i.y=d,i):Math.abs(this.sin_p12+1)<=EPSLN?($=this.a*mlfn(g,_,b,j,HALF_PI),e=Math.sqrt(i.x*i.x+i.y*i.y),_e=e-$,d=imlfn(_e/this.a,g,_,b,j),c=adjust_lon(this.long0+Math.atan2(i.x,i.y)),i.x=c,i.y=d,i):(e=Math.sqrt(i.x*i.x+i.y*i.y),it=Math.atan2(i.x,i.y),et=gN(this.a,this.e,this.sin_p12),nt=Math.cos(it),rt=this.e*this.cos_p12*nt,at=-rt*rt/(1-this.es),st=3*this.es*(1-at)*this.sin_p12*this.cos_p12*nt/(1-this.es),ot=e/et,dt=ot-at*(1+at)*Math.pow(ot,3)/6-st*(1+3*at)*Math.pow(ot,4)/24,ut=1-at*dt*dt/2-ot*dt*dt*dt/6,tt=Math.asin(this.sin_p12*Math.cos(dt)+this.cos_p12*Math.sin(dt)*nt),c=adjust_lon(this.long0+Math.asin(Math.sin(it)*Math.sin(dt)/Math.cos(tt))),ct=Math.sin(tt),d=Math.atan2((ct-this.es*ut*this.sin_p12)*Math.tan(tt),ct*(1-this.es)),i.x=c,i.y=d,i))}var names$8=["Azimuthal_Equidistant","aeqd"];const aeqd={init:init$8,forward:forward$7,inverse:inverse$7,names:names$8};function init$7(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$6(i){var e,a,s,o,c,d,h,g,_=i.x,b=i.y;return s=adjust_lon(_-this.long0),e=Math.sin(b),a=Math.cos(b),o=Math.cos(s),d=this.sin_p14*e+this.cos_p14*a*o,c=1,(d>0||Math.abs(d)<=EPSLN)&&(h=this.a*c*a*Math.sin(s),g=this.y0+this.a*c*(this.cos_p14*e-this.sin_p14*a*o)),i.x=h,i.y=g,i}function inverse$6(i){var e,a,s,o,c,d,h;return i.x-=this.x0,i.y-=this.y0,e=Math.sqrt(i.x*i.x+i.y*i.y),a=asinz(e/this.a),s=Math.sin(a),o=Math.cos(a),d=this.long0,Math.abs(e)<=EPSLN?(h=this.lat0,i.x=d,i.y=h,i):(h=asinz(o*this.sin_p14+i.y*s*this.cos_p14/e),c=Math.abs(this.lat0)-HALF_PI,Math.abs(c)<=EPSLN?(this.lat0>=0?d=adjust_lon(this.long0+Math.atan2(i.x,-i.y)):d=adjust_lon(this.long0-Math.atan2(-i.x,i.y)),i.x=d,i.y=h,i):(d=adjust_lon(this.long0+Math.atan2(i.x*s,e*this.cos_p14*o-i.y*this.sin_p14*s)),i.x=d,i.y=h,i))}var names$7=["ortho"];const ortho={init:init$7,forward:forward$6,inverse:inverse$6,names:names$7};var FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$5(i){var e={x:0,y:0},a,s,o,c,d,h,g={value:0};if(i.x-=this.long0,this.es!==0?a=Math.atan(this.one_minus_f_squared*Math.tan(i.y)):a=i.y,s=i.x,this.face===FACE_ENUM.TOP)c=HALF_PI-a,s>=FORTPI&&s<=HALF_PI+FORTPI?(g.value=AREA_ENUM.AREA_0,o=s-HALF_PI):s>HALF_PI+FORTPI||s<=-(HALF_PI+FORTPI)?(g.value=AREA_ENUM.AREA_1,o=s>0?s-SPI:s+SPI):s>-(HALF_PI+FORTPI)&&s<=-FORTPI?(g.value=AREA_ENUM.AREA_2,o=s+HALF_PI):(g.value=AREA_ENUM.AREA_3,o=s);else if(this.face===FACE_ENUM.BOTTOM)c=HALF_PI+a,s>=FORTPI&&s<=HALF_PI+FORTPI?(g.value=AREA_ENUM.AREA_0,o=-s+HALF_PI):s<FORTPI&&s>=-FORTPI?(g.value=AREA_ENUM.AREA_1,o=-s):s<-FORTPI&&s>=-(HALF_PI+FORTPI)?(g.value=AREA_ENUM.AREA_2,o=-s-HALF_PI):(g.value=AREA_ENUM.AREA_3,o=s>0?-s+SPI:-s-SPI);else{var _,b,j,$,_e,et,tt;this.face===FACE_ENUM.RIGHT?s=qsc_shift_lon_origin(s,+HALF_PI):this.face===FACE_ENUM.BACK?s=qsc_shift_lon_origin(s,+SPI):this.face===FACE_ENUM.LEFT&&(s=qsc_shift_lon_origin(s,-HALF_PI)),$=Math.sin(a),_e=Math.cos(a),et=Math.sin(s),tt=Math.cos(s),_=_e*tt,b=_e*et,j=$,this.face===FACE_ENUM.FRONT?(c=Math.acos(_),o=qsc_fwd_equat_face_theta(c,j,b,g)):this.face===FACE_ENUM.RIGHT?(c=Math.acos(b),o=qsc_fwd_equat_face_theta(c,j,-_,g)):this.face===FACE_ENUM.BACK?(c=Math.acos(-_),o=qsc_fwd_equat_face_theta(c,j,-b,g)):this.face===FACE_ENUM.LEFT?(c=Math.acos(-b),o=qsc_fwd_equat_face_theta(c,j,_,g)):(c=o=0,g.value=AREA_ENUM.AREA_0)}return h=Math.atan(12/SPI*(o+Math.acos(Math.sin(o)*Math.cos(FORTPI))-HALF_PI)),d=Math.sqrt((1-Math.cos(c))/(Math.cos(h)*Math.cos(h))/(1-Math.cos(Math.atan(1/Math.cos(o))))),g.value===AREA_ENUM.AREA_1?h+=HALF_PI:g.value===AREA_ENUM.AREA_2?h+=SPI:g.value===AREA_ENUM.AREA_3&&(h+=1.5*SPI),e.x=d*Math.cos(h),e.y=d*Math.sin(h),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,i.x=e.x,i.y=e.y,i}function inverse$5(i){var e={lam:0,phi:0},a,s,o,c,d,h,g,_,b,j={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,s=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),a=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?j.value=AREA_ENUM.AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(j.value=AREA_ENUM.AREA_1,a-=HALF_PI):i.x<0&&-i.x>=Math.abs(i.y)?(j.value=AREA_ENUM.AREA_2,a=a<0?a+SPI:a-SPI):(j.value=AREA_ENUM.AREA_3,a+=HALF_PI),b=SPI/12*Math.tan(a),d=Math.sin(b)/(Math.cos(b)-1/Math.sqrt(2)),h=Math.atan(d),o=Math.cos(a),c=Math.tan(s),g=1-o*o*c*c*(1-Math.cos(Math.atan(1/Math.cos(h)))),g<-1?g=-1:g>1&&(g=1),this.face===FACE_ENUM.TOP)_=Math.acos(g),e.phi=HALF_PI-_,j.value===AREA_ENUM.AREA_0?e.lam=h+HALF_PI:j.value===AREA_ENUM.AREA_1?e.lam=h<0?h+SPI:h-SPI:j.value===AREA_ENUM.AREA_2?e.lam=h-HALF_PI:e.lam=h;else if(this.face===FACE_ENUM.BOTTOM)_=Math.acos(g),e.phi=_-HALF_PI,j.value===AREA_ENUM.AREA_0?e.lam=-h+HALF_PI:j.value===AREA_ENUM.AREA_1?e.lam=-h:j.value===AREA_ENUM.AREA_2?e.lam=-h-HALF_PI:e.lam=h<0?-h-SPI:-h+SPI;else{var $,_e,et;$=g,b=$*$,b>=1?et=0:et=Math.sqrt(1-b)*Math.sin(h),b+=et*et,b>=1?_e=0:_e=Math.sqrt(1-b),j.value===AREA_ENUM.AREA_1?(b=_e,_e=-et,et=b):j.value===AREA_ENUM.AREA_2?(_e=-_e,et=-et):j.value===AREA_ENUM.AREA_3&&(b=_e,_e=et,et=-b),this.face===FACE_ENUM.RIGHT?(b=$,$=-_e,_e=b):this.face===FACE_ENUM.BACK?($=-$,_e=-_e):this.face===FACE_ENUM.LEFT&&(b=$,$=_e,_e=-b),e.phi=Math.acos(-et)-HALF_PI,e.lam=Math.atan2(_e,$),this.face===FACE_ENUM.RIGHT?e.lam=qsc_shift_lon_origin(e.lam,-HALF_PI):this.face===FACE_ENUM.BACK?e.lam=qsc_shift_lon_origin(e.lam,-SPI):this.face===FACE_ENUM.LEFT&&(e.lam=qsc_shift_lon_origin(e.lam,+HALF_PI))}if(this.es!==0){var tt,it,nt;tt=e.phi<0?1:0,it=Math.tan(e.phi),nt=this.b/Math.sqrt(it*it+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-nt*nt)/(this.one_minus_f*nt)),tt&&(e.phi=-e.phi)}return e.lam+=this.long0,i.x=e.lam,i.y=e.phi,i}function qsc_fwd_equat_face_theta(i,e,a,s){var o;return i<EPSLN?(s.value=AREA_ENUM.AREA_0,o=0):(o=Math.atan2(e,a),Math.abs(o)<=FORTPI?s.value=AREA_ENUM.AREA_0:o>FORTPI&&o<=HALF_PI+FORTPI?(s.value=AREA_ENUM.AREA_1,o-=HALF_PI):o>HALF_PI+FORTPI||o<=-(HALF_PI+FORTPI)?(s.value=AREA_ENUM.AREA_2,o=o>=0?o-SPI:o+SPI):(s.value=AREA_ENUM.AREA_3,o+=HALF_PI)),o}function qsc_shift_lon_origin(i,e){var a=i+e;return a<-SPI?a+=TWO_PI:a>+SPI&&(a-=TWO_PI),a}var names$6=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const qsc={init:init$6,forward:forward$5,inverse:inverse$5,names:names$6};var COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(i,e){return i[0]+e*(i[1]+e*(i[2]+e*i[3]))},poly3_der=function(i,e){return i[1]+e*(2*i[2]+e*3*i[3])};function newton_rapshon(i,e,a,s){for(var o=e;s;--s){var c=i(o);if(o-=c,Math.abs(c)<a)break}return o}function init$5(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$4(i){var e=adjust_lon(i.x-this.long0),a=Math.abs(i.y),s=Math.floor(a*C1);s<0?s=0:s>=NODES&&(s=NODES-1),a=R2D*(a-RC1*s);var o={x:poly3_val(COEFS_X[s],a)*e,y:poly3_val(COEFS_Y[s],a)};return i.y<0&&(o.y=-o.y),o.x=o.x*this.a*FXC+this.x0,o.y=o.y*this.a*FYC+this.y0,o}function inverse$4(i){var e={x:(i.x-this.x0)/(this.a*FXC),y:Math.abs(i.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=i.y<0?-HALF_PI:HALF_PI;else{var a=Math.floor(e.y*NODES);for(a<0?a=0:a>=NODES&&(a=NODES-1);;)if(COEFS_Y[a][0]>e.y)--a;else if(COEFS_Y[a+1][0]<=e.y)++a;else break;var s=COEFS_Y[a],o=5*(e.y-s[0])/(COEFS_Y[a+1][0]-s[0]);o=newton_rapshon(function(c){return(poly3_val(s,c)-e.y)/poly3_der(s,c)},o,EPSLN,100),e.x/=poly3_val(COEFS_X[a],o),e.y=(5*a+o)*D2R$1,i.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$5=["Robinson","robin"];const robin={init:init$5,forward:forward$4,inverse:inverse$4,names:names$5};function init$4(){this.name="geocent"}function forward$3(i){var e=geodeticToGeocentric(i,this.es,this.a);return e}function inverse$3(i){var e=geocentricToGeodetic(i,this.es,this.a,this.b);return e}var names$4=["Geocentric","geocentric","geocent","Geocent"];const geocent={init:init$4,forward:forward$3,inverse:inverse$3,names:names$4};var mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$3(){if(Object.keys(params).forEach((function(a){if(typeof this[a]>"u")this[a]=params[a].def;else{if(params[a].num&&isNaN(this[a]))throw new Error("Invalid parameter value, must be numeric "+a+" = "+this[a]);params[a].num&&(this[a]=parseFloat(this[a]))}params[a].degrees&&(this[a]=this[a]*D2R$1)}).bind(this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this.mode=mode.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(i),this.sw=Math.sin(i)}function forward$2(i){i.x-=this.long0;var e=Math.sin(i.y),a=Math.cos(i.y),s=Math.cos(i.x),o,c;switch(this.mode){case mode.OBLIQ:c=this.sinph0*e+this.cosph0*a*s;break;case mode.EQUIT:c=a*s;break;case mode.S_POLE:c=-e;break;case mode.N_POLE:c=e;break}switch(c=this.pn1/(this.p-c),o=c*a*Math.sin(i.x),this.mode){case mode.OBLIQ:c*=this.cosph0*e-this.sinph0*a*s;break;case mode.EQUIT:c*=e;break;case mode.N_POLE:c*=-(a*s);break;case mode.S_POLE:c*=a*s;break}var d,h;return d=c*this.cg+o*this.sg,h=1/(d*this.sw*this.h1+this.cw),o=(o*this.cg-c*this.sg)*this.cw*h,c=d*h,i.x=o*this.a,i.y=c*this.a,i}function inverse$2(i){i.x/=this.a,i.y/=this.a;var e={x:i.x,y:i.y},a,s,o;o=1/(this.pn1-i.y*this.sw),a=this.pn1*i.x*o,s=this.pn1*i.y*this.cw*o,i.x=a*this.cg+s*this.sg,i.y=s*this.cg-a*this.sg;var c=hypot(i.x,i.y);if(Math.abs(c)<EPSLN)e.x=0,e.y=i.y;else{var d,h;switch(h=1-c*c*this.pfact,h=(this.p-Math.sqrt(h))/(this.pn1/c+c/this.pn1),d=Math.sqrt(1-h*h),this.mode){case mode.OBLIQ:e.y=Math.asin(d*this.sinph0+i.y*h*this.cosph0/c),i.y=(d-this.sinph0*Math.sin(e.y))*c,i.x*=h*this.cosph0;break;case mode.EQUIT:e.y=Math.asin(i.y*h/c),i.y=d*c,i.x*=h;break;case mode.N_POLE:e.y=Math.asin(d),i.y=-i.y;break;case mode.S_POLE:e.y=-Math.asin(d);break}e.x=Math.atan2(i.x,i.y)}return i.x=e.x+this.long0,i.y=e.y,i}var names$3=["Tilted_Perspective","tpers"];const tpers={init:init$3,forward:forward$2,inverse:inverse$2,names:names$3};function init$2(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var i=1-this.es,e=1/i;this.radius_p=Math.sqrt(i),this.radius_p2=i,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function forward$1(i){var e=i.x,a=i.y,s,o,c,d;if(e=e-this.long0,this.shape==="ellipse"){a=Math.atan(this.radius_p2*Math.tan(a));var h=this.radius_p/hypot(this.radius_p*Math.cos(a),Math.sin(a));if(o=h*Math.cos(e)*Math.cos(a),c=h*Math.sin(e)*Math.cos(a),d=h*Math.sin(a),(this.radius_g-o)*o-c*c-d*d*this.radius_p_inv2<0)return i.x=Number.NaN,i.y=Number.NaN,i;s=this.radius_g-o,this.flip_axis?(i.x=this.radius_g_1*Math.atan(c/hypot(d,s)),i.y=this.radius_g_1*Math.atan(d/s)):(i.x=this.radius_g_1*Math.atan(c/s),i.y=this.radius_g_1*Math.atan(d/hypot(c,s)))}else this.shape==="sphere"&&(s=Math.cos(a),o=Math.cos(e)*s,c=Math.sin(e)*s,d=Math.sin(a),s=this.radius_g-o,this.flip_axis?(i.x=this.radius_g_1*Math.atan(c/hypot(d,s)),i.y=this.radius_g_1*Math.atan(d/s)):(i.x=this.radius_g_1*Math.atan(c/s),i.y=this.radius_g_1*Math.atan(d/hypot(c,s))));return i.x=i.x*this.a,i.y=i.y*this.a,i}function inverse$1(i){var e=-1,a=0,s=0,o,c,d,h;if(i.x=i.x/this.a,i.y=i.y/this.a,this.shape==="ellipse"){this.flip_axis?(s=Math.tan(i.y/this.radius_g_1),a=Math.tan(i.x/this.radius_g_1)*hypot(1,s)):(a=Math.tan(i.x/this.radius_g_1),s=Math.tan(i.y/this.radius_g_1)*hypot(1,a));var g=s/this.radius_p;if(o=a*a+g*g+e*e,c=2*this.radius_g*e,d=c*c-4*o*this.C,d<0)return i.x=Number.NaN,i.y=Number.NaN,i;h=(-c-Math.sqrt(d))/(2*o),e=this.radius_g+h*e,a*=h,s*=h,i.x=Math.atan2(a,e),i.y=Math.atan(s*Math.cos(i.x)/e),i.y=Math.atan(this.radius_p_inv2*Math.tan(i.y))}else if(this.shape==="sphere"){if(this.flip_axis?(s=Math.tan(i.y/this.radius_g_1),a=Math.tan(i.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(i.x/this.radius_g_1),s=Math.tan(i.y/this.radius_g_1)*Math.sqrt(1+a*a)),o=a*a+s*s+e*e,c=2*this.radius_g*e,d=c*c-4*o*this.C,d<0)return i.x=Number.NaN,i.y=Number.NaN,i;h=(-c-Math.sqrt(d))/(2*o),e=this.radius_g+h*e,a*=h,s*=h,i.x=Math.atan2(a,e),i.y=Math.atan(s*Math.cos(i.x)/e)}return i.x=i.x+this.long0,i}var names$2=["Geostationary Satellite View","Geostationary_Satellite","geos"];const geos={init:init$2,forward:forward$1,inverse:inverse$1,names:names$2};var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=Math.sqrt(3)/2;function init$1(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function forward(i){var e=adjust_lon(i.x-this.long0),a=i.y,s=Math.asin(M*Math.sin(a)),o=s*s,c=o*o*o;return i.x=e*Math.cos(s)/(M*(A1+3*A2*o+c*(7*A3+9*A4*o))),i.y=s*(A1+A2*o+c*(A3+A4*o)),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function inverse(i){i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a;var e=1e-9,a=12,s=i.y,o,c,d,h,g,_;for(_=0;_<a&&(o=s*s,c=o*o*o,d=s*(A1+A2*o+c*(A3+A4*o))-i.y,h=A1+3*A2*o+c*(7*A3+9*A4*o),s-=g=d/h,!(Math.abs(g)<e));++_);return o=s*s,c=o*o*o,i.x=M*i.x*(A1+3*A2*o+c*(7*A3+9*A4*o))/Math.cos(s),i.y=Math.asin(Math.sin(s)/M),i.x=adjust_lon(i.x+this.long0),i}var names$1=["eqearth","Equal Earth","Equal_Earth"];const eqearth={init:init$1,forward,inverse,names:names$1};var EPS10=1e-10;function init(){var i;if(this.phi1=this.lat1,Math.abs(this.phi1)<EPS10)throw new Error;this.es?(this.en=pj_enfn(this.es),this.m1=pj_mlfn(this.phi1,this.am1=Math.sin(this.phi1),i=Math.cos(this.phi1),this.en),this.am1=i/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=e_inv,this.forward=e_fwd):(Math.abs(this.phi1)+EPS10>=HALF_PI?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=s_inv,this.forward=s_fwd)}function e_fwd(i){var e=adjust_lon(i.x-(this.long0||0)),a=i.y,s,o,c;return s=this.am1+this.m1-pj_mlfn(a,o=Math.sin(a),c=Math.cos(a),this.en),o=c*e/(s*Math.sqrt(1-this.es*o*o)),i.x=s*Math.sin(o),i.y=this.am1-s*Math.cos(o),i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function e_inv(i){i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a;var e,a,s,o;if(a=hypot(i.x,i.y=this.am1-i.y),o=pj_inv_mlfn(this.am1+this.m1-a,this.es,this.en),(e=Math.abs(o))<HALF_PI)e=Math.sin(o),s=a*Math.atan2(i.x,i.y)*Math.sqrt(1-this.es*e*e)/Math.cos(o);else if(Math.abs(e-HALF_PI)<=EPS10)s=0;else throw new Error;return i.x=adjust_lon(s+(this.long0||0)),i.y=adjust_lat(o),i}function s_fwd(i){var e=adjust_lon(i.x-(this.long0||0)),a=i.y,s,o;return o=this.cphi1+this.phi1-a,Math.abs(o)>EPS10?(i.x=o*Math.sin(s=e*Math.cos(a)/o),i.y=this.cphi1-o*Math.cos(s)):i.x=i.y=0,i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function s_inv(i){i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a;var e,a,s=hypot(i.x,i.y=this.cphi1-i.y);if(a=this.cphi1+this.phi1-s,Math.abs(a)>HALF_PI)throw new Error;return Math.abs(Math.abs(a)-HALF_PI)<=EPS10?e=0:e=s*Math.atan2(i.x,i.y)/Math.cos(a),i.x=adjust_lon(e+(this.long0||0)),i.y=adjust_lat(a),i}var names=["bonne","Bonne (Werner lat_1=90)"];const bonne={init,names};function includedProjections(i){i.Proj.projections.add(tmerc),i.Proj.projections.add(etmerc),i.Proj.projections.add(utm),i.Proj.projections.add(sterea),i.Proj.projections.add(stere),i.Proj.projections.add(somerc),i.Proj.projections.add(omerc),i.Proj.projections.add(lcc),i.Proj.projections.add(krovak),i.Proj.projections.add(cass),i.Proj.projections.add(laea),i.Proj.projections.add(aea),i.Proj.projections.add(gnom),i.Proj.projections.add(cea),i.Proj.projections.add(eqc),i.Proj.projections.add(poly),i.Proj.projections.add(nzmg),i.Proj.projections.add(mill),i.Proj.projections.add(sinu),i.Proj.projections.add(moll),i.Proj.projections.add(eqdc),i.Proj.projections.add(vandg),i.Proj.projections.add(aeqd),i.Proj.projections.add(ortho),i.Proj.projections.add(qsc),i.Proj.projections.add(robin),i.Proj.projections.add(geocent),i.Proj.projections.add(tpers),i.Proj.projections.add(geos),i.Proj.projections.add(eqearth),i.Proj.projections.add(bonne)}proj4.defaultDatum="WGS84";proj4.Proj=Projection;proj4.WGS84=new proj4.Proj("WGS84");proj4.Point=Point;proj4.toPoint=common;proj4.defs=defs;proj4.nadgrid=nadgrid;proj4.transform=transform;proj4.mgrs=mgrs;proj4.version="__VERSION__";includedProjections(proj4);var logger$3=LoggerByDefault$1.getLogger("CRS");function register(i){const e=Object.keys(i.defs);logger$3.trace("proj. codes :",e);const a=e.length;let s,o;for(s=0;s<a;++s){const c=e[s];if(!get$3(c)){const d=i.defs(c);addProjection(new Projection$1({code:c,axisOrientation:d.axis,metersPerUnit:d.to_meter,units:d.units}))}}for(s=0;s<a;++s){const c=e[s],d=get$3(c);for(o=0;o<a;++o){const h=e[o],g=get$3(h);if(!get$4(c,h))if(i.defs[c]===i.defs[h])addEquivalentProjections([d,g]);else{const _=i(c,h);addCoordinateTransforms(d,g,_.forward,_.inverse)}}}}var Register={isLoaded:!1,get:function(i){if(!(i===""||i===null||typeof i>"u")){var e=i.split(":");if(e.length===2){var a=e[0],s=e[1];if(this.hasOwnProperty(a)&&this[a].hasOwnProperty(s))return this[a][s]}}},exist:function(i){if(i===""||i===null||typeof i>"u")return!1;var e=i.split(":");if(e.length!==2)return!1;var a=e[0],s=e[1];return!(!this.hasOwnProperty(a)||!this[a].hasOwnProperty(s))},load:function(i){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],a=0;a<e.length;a++){var s=e[a],o=this[s];for(var c in o)if(o.hasOwnProperty(c)){var d=s+":"+c;i.defs(d,this.get(d))}}this.isLoaded=!0}},loadByDefault:function(i){var e={EPSG:{2154:Register.EPSG[2154],27571:Register.EPSG[27571],27572:Register.EPSG[27572],27573:Register.EPSG[27573],27574:Register.EPSG[27574]},CRS:{84:Register.CRS[84]},IGNF:{LAMB93:Register.IGNF.LAMB93,LAMBE:Register.IGNF.LAMBE,LAMB1:Register.IGNF.LAMB1,LAMB2:Register.IGNF.LAMB2,LAMB3:Register.IGNF.LAMB3,LAMB4:Register.IGNF.LAMB4,RGF93G:Register.IGNF.RGF93G,WGS84G:Register.IGNF.WGS84G}};for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];for(var o in s)if(s.hasOwnProperty(o)){var c=a+":"+o;i.defs(c,s[o])}}},loadByName:function(i,e){if(!this.exist(e))return!1;try{i.defs(e,this.get(e))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},logger$2=LoggerByDefault$1.getLogger("CRS"),CRS={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(logger$2.trace("Loading custom definitions projections"),!Register.isLoaded){Register.load(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(i){logger$2.error(i)}}},loadByDefault:function(){if(logger$2.trace("Loading custom definitions projections by default"),!Register.isLoaded){Register.loadByDefault(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(i){logger$2.error(i)}}},loadByName:function(i){if(logger$2.trace("Loading a custom definition projection : ",i),!Register.isLoaded){Register.loadByName(proj4,i);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(e){logger$2.error(e)}}},overload:function(){logger$2.trace("Loading projections aera (extent)");for(var i in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(i)){var e=this.projectionsExtent[i],a=get$3(i),s=getTransform("EPSG:4326",a),o=applyTransform([e.bottom,e.right,e.top,e.left],s);a.setExtent(o),addProjection(a),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(a)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register);const TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer{constructor(e){e=e||{};const a=Object.assign({},e);delete a.preload,delete a.useInterimTilesOnError,super(a),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(e){this.set(TileProperty.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Tile extends Target{constructor(e,a,s){super(),s=s||{},this.tileCoord=e,this.state=a,this.interimTile=null,this.key="",this.transition_=s.transition===void 0?250:s.transition,this.transitionStarts_={},this.interpolate=!!s.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.state===TileState.ERROR&&this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==TileState.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let a=this;do{if(e.getState()==TileState.LOADED){e.interimTile=null;break}e.getState()==TileState.LOADING?a=e:e.getState()==TileState.IDLE?a.interimTile=e.interimTile:a=e,e=a.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==TileState.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){abstract()}getAlpha(e,a){if(!this.transition_)return 1;let s=this.transitionStarts_[e];if(!s)s=a,this.transitionStarts_[e]=s;else if(s===-1)return 1;const o=a-s+1e3/60;return o>=this.transition_?1:easeIn(o/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}class ImageTile extends Tile{constructor(e,a,s,o,c,d){super(e,a,d),this.crossOrigin_=o,this.src_=s,this.key=s,this.image_=new Image,o!==null&&(this.image_.crossOrigin=o),this.unlisten_=null,this.tileLoadFunction_=c}getImage(){return this.image_}setImage(e){this.image_=e,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function getBlankImage(){const i=createCanvasContext2D(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}const ERROR_THRESHOLD=.5,MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(e,a,s,o,c,d){this.sourceProj_=e,this.targetProj_=a;let h={};const g=getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(rt){const at=rt[0]+"/"+rt[1];return h[at]||(h[at]=g(rt)),h[at]},this.maxSourceExtent_=o,this.errorThresholdSquared_=c*c,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&getWidth(o)>=getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const _=getTopLeft(s),b=getTopRight(s),j=getBottomRight(s),$=getBottomLeft(s),_e=this.transformInv_(_),et=this.transformInv_(b),tt=this.transformInv_(j),it=this.transformInv_($),nt=MAX_SUBDIVISION+(d?Math.max(0,Math.ceil(Math.log2(getArea(s)/(d*d*256*256)))):0);if(this.addQuad_(_,b,j,$,_e,et,tt,it,nt),this.wrapsXInSource_){let rt=1/0;this.triangles_.forEach(function(at,st,ot){rt=Math.min(rt,at.source[0][0],at.source[1][0],at.source[2][0])}),this.triangles_.forEach(at=>{if(Math.max(at.source[0][0],at.source[1][0],at.source[2][0])-rt>this.sourceWorldWidth_/2){const st=[[at.source[0][0],at.source[0][1]],[at.source[1][0],at.source[1][1]],[at.source[2][0],at.source[2][1]]];st[0][0]-rt>this.sourceWorldWidth_/2&&(st[0][0]-=this.sourceWorldWidth_),st[1][0]-rt>this.sourceWorldWidth_/2&&(st[1][0]-=this.sourceWorldWidth_),st[2][0]-rt>this.sourceWorldWidth_/2&&(st[2][0]-=this.sourceWorldWidth_);const ot=Math.min(st[0][0],st[1][0],st[2][0]);Math.max(st[0][0],st[1][0],st[2][0])-ot<this.sourceWorldWidth_/2&&(at.source=st)}})}h={}}addTriangle_(e,a,s,o,c,d){this.triangles_.push({source:[o,c,d],target:[e,a,s]})}addQuad_(e,a,s,o,c,d,h,g,_){const b=boundingExtent([c,d,h,g]),j=this.sourceWorldWidth_?getWidth(b)/this.sourceWorldWidth_:null,$=this.sourceWorldWidth_,_e=this.sourceProj_.canWrapX()&&j>.5&&j<1;let et=!1;if(_>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const it=boundingExtent([e,a,s,o]);et=getWidth(it)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||et}!_e&&this.sourceProj_.isGlobal()&&j&&(et=j>MAX_TRIANGLE_WIDTH||et)}if(!et&&this.maxSourceExtent_&&isFinite(b[0])&&isFinite(b[1])&&isFinite(b[2])&&isFinite(b[3])&&!intersects$1(b,this.maxSourceExtent_))return;let tt=0;if(!et&&(!isFinite(c[0])||!isFinite(c[1])||!isFinite(d[0])||!isFinite(d[1])||!isFinite(h[0])||!isFinite(h[1])||!isFinite(g[0])||!isFinite(g[1]))){if(_>0)et=!0;else if(tt=(!isFinite(c[0])||!isFinite(c[1])?8:0)+(!isFinite(d[0])||!isFinite(d[1])?4:0)+(!isFinite(h[0])||!isFinite(h[1])?2:0)+(!isFinite(g[0])||!isFinite(g[1])?1:0),tt!=1&&tt!=2&&tt!=4&&tt!=8)return}if(_>0){if(!et){const it=[(e[0]+s[0])/2,(e[1]+s[1])/2],nt=this.transformInv_(it);let rt;_e?rt=(modulo(c[0],$)+modulo(h[0],$))/2-modulo(nt[0],$):rt=(c[0]+h[0])/2-nt[0];const at=(c[1]+h[1])/2-nt[1];et=rt*rt+at*at>this.errorThresholdSquared_}if(et){if(Math.abs(e[0]-s[0])<=Math.abs(e[1]-s[1])){const it=[(a[0]+s[0])/2,(a[1]+s[1])/2],nt=this.transformInv_(it),rt=[(o[0]+e[0])/2,(o[1]+e[1])/2],at=this.transformInv_(rt);this.addQuad_(e,a,it,rt,c,d,nt,at,_-1),this.addQuad_(rt,it,s,o,at,nt,h,g,_-1)}else{const it=[(e[0]+a[0])/2,(e[1]+a[1])/2],nt=this.transformInv_(it),rt=[(s[0]+o[0])/2,(s[1]+o[1])/2],at=this.transformInv_(rt);this.addQuad_(e,it,rt,o,c,nt,at,g,_-1),this.addQuad_(it,a,s,rt,nt,d,h,at,_-1)}return}}if(_e){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}tt&11||this.addTriangle_(e,s,o,c,h,g),tt&14||this.addTriangle_(e,s,a,c,h,d),tt&&(tt&13||this.addTriangle_(a,o,e,d,g,c),tt&7||this.addTriangle_(a,o,s,d,g,h))}calculateSourceExtent(){const e=createEmpty();return this.triangles_.forEach(function(a,s,o){const c=a.source;extendCoordinate(e,c[0]),extendCoordinate(e,c[1]),extendCoordinate(e,c[2])}),e}getTriangles(){return this.triangles_}}let brokenDiagonalRendering_;const canvasPool$1=[];function drawTestTriangle(i,e,a,s,o){i.beginPath(),i.moveTo(0,0),i.lineTo(e,a),i.lineTo(s,o),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,s)+1,Math.max(a,o)),i.restore()}function verifyBrokenDiagonalRendering(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const i=createCanvasContext2D(6,6,canvasPool$1);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(i,4,5,4,0),drawTestTriangle(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(e,0)||verifyBrokenDiagonalRendering(e,4)||verifyBrokenDiagonalRendering(e,8),releaseCanvas(i),canvasPool$1.push(i.canvas)}return brokenDiagonalRendering_}function calculateSourceResolution(i,e,a,s){const o=transform$1(a,e,i);let c=getPointResolution(e,s,a);const d=e.getMetersPerUnit();d!==void 0&&(c*=d);const h=i.getMetersPerUnit();h!==void 0&&(c/=h);const g=i.getExtent();if(!g||containsCoordinate(g,o)){const _=getPointResolution(i,c,o)/c;isFinite(_)&&_>0&&(c/=_)}return c}function calculateSourceExtentResolution(i,e,a,s){const o=getCenter(a);let c=calculateSourceResolution(i,e,o,s);return(!isFinite(c)||c<=0)&&forEachCorner(a,function(d){return c=calculateSourceResolution(i,e,d,s),isFinite(c)&&c>0}),c}function render(i,e,a,s,o,c,d,h,g,_,b,j,$){const _e=createCanvasContext2D(Math.round(a*i),Math.round(a*e),canvasPool$1);if(j||(_e.imageSmoothingEnabled=!1),g.length===0)return _e.canvas;_e.scale(a,a);function et(rt){return Math.round(rt*a)/a}_e.globalCompositeOperation="lighter";const tt=createEmpty();g.forEach(function(rt,at,st){extend$3(tt,rt.extent)});let it;{const rt=getWidth(tt),at=getHeight(tt);it=createCanvasContext2D(Math.round(a*rt/s),Math.round(a*at/s),canvasPool$1),j||(it.imageSmoothingEnabled=!1);const st=a/s;g.forEach(function(ot,dt,ut){const ct=ot.extent[0]-tt[0],ht=-(ot.extent[3]-tt[3]),mt=getWidth(ot.extent),pt=getHeight(ot.extent);ot.image.width>0&&ot.image.height>0&&it.drawImage(ot.image,_,_,ot.image.width-2*_,ot.image.height-2*_,ct*st,ht*st,mt*st,pt*st)})}const nt=getTopLeft(d);return h.getTriangles().forEach(function(rt,at,st){const ot=rt.source,dt=rt.target;let ut=ot[0][0],ct=ot[0][1],ht=ot[1][0],mt=ot[1][1],pt=ot[2][0],ft=ot[2][1];const yt=et((dt[0][0]-nt[0])/c),Ct=et(-(dt[0][1]-nt[1])/c),_t=et((dt[1][0]-nt[0])/c),St=et(-(dt[1][1]-nt[1])/c),Pt=et((dt[2][0]-nt[0])/c),bt=et(-(dt[2][1]-nt[1])/c),Mt=ut,It=ct;ut=0,ct=0,ht-=Mt,mt-=It,pt-=Mt,ft-=It;const Nt=[[ht,mt,0,0,_t-yt],[pt,ft,0,0,Pt-yt],[0,0,ht,mt,St-Ct],[0,0,pt,ft,bt-Ct]],wt=solveLinearSystem(Nt);if(!wt)return;if(_e.save(),_e.beginPath(),isBrokenDiagonalRendering()||!j){_e.moveTo(_t,St);const jt=4,Ft=yt-_t,zt=Ct-St;for(let Yt=0;Yt<jt;Yt++)_e.lineTo(_t+et((Yt+1)*Ft/jt),St+et(Yt*zt/(jt-1))),Yt!=jt-1&&_e.lineTo(_t+et((Yt+1)*Ft/jt),St+et((Yt+1)*zt/(jt-1)));_e.lineTo(Pt,bt)}else _e.moveTo(_t,St),_e.lineTo(yt,Ct),_e.lineTo(Pt,bt);_e.clip(),_e.transform(wt[0],wt[2],wt[1],wt[3],yt,Ct),_e.translate(tt[0]-Mt,tt[3]-It);let Wt;if(it)Wt=it.canvas,_e.scale(s/a,-s/a);else{const jt=g[0],Ft=jt.extent;Wt=jt.image,_e.scale(getWidth(Ft)/Wt.width,-getHeight(Ft)/Wt.height)}_e.drawImage(Wt,0,0),_e.restore()}),it&&(releaseCanvas(it),canvasPool$1.push(it.canvas)),b&&(_e.save(),_e.globalCompositeOperation="source-over",_e.strokeStyle="black",_e.lineWidth=1,h.getTriangles().forEach(function(rt,at,st){const ot=rt.target,dt=(ot[0][0]-nt[0])/c,ut=-(ot[0][1]-nt[1])/c,ct=(ot[1][0]-nt[0])/c,ht=-(ot[1][1]-nt[1])/c,mt=(ot[2][0]-nt[0])/c,pt=-(ot[2][1]-nt[1])/c;_e.beginPath(),_e.moveTo(ct,ht),_e.lineTo(dt,ut),_e.lineTo(mt,pt),_e.closePath(),_e.stroke()}),_e.restore()),_e.canvas}class ReprojTile extends Tile{constructor(e,a,s,o,c,d,h,g,_,b,j,$){super(c,TileState.IDLE,$),this.renderEdges_=j!==void 0?j:!1,this.pixelRatio_=h,this.gutter_=g,this.canvas_=null,this.sourceTileGrid_=a,this.targetTileGrid_=o,this.wrappedTileCoord_=d||c,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const _e=o.getTileCoordExtent(this.wrappedTileCoord_),et=this.targetTileGrid_.getExtent();let tt=this.sourceTileGrid_.getExtent();const it=et?getIntersection(_e,et):_e;if(getArea(it)===0){this.state=TileState.EMPTY;return}const nt=e.getExtent();nt&&(tt?tt=getIntersection(tt,nt):tt=nt);const rt=o.getResolution(this.wrappedTileCoord_[0]),at=calculateSourceExtentResolution(e,s,it,rt);if(!isFinite(at)||at<=0){this.state=TileState.EMPTY;return}const st=b!==void 0?b:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(e,s,it,tt,at*st,rt),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=a.getZForResolution(at);let ot=this.triangulation_.calculateSourceExtent();if(tt&&(e.canWrapX()?(ot[1]=clamp(ot[1],tt[1],tt[3]),ot[3]=clamp(ot[3],tt[1],tt[3])):ot=getIntersection(ot,tt)),!getArea(ot))this.state=TileState.EMPTY;else{const dt=a.getTileRangeForExtentAndZ(ot,this.sourceZ_);for(let ut=dt.minX;ut<=dt.maxX;ut++)for(let ct=dt.minY;ct<=dt.maxY;ct++){const ht=_(this.sourceZ_,ut,ct,h);ht&&this.sourceTiles_.push(ht)}this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(a=>{a&&a.getState()==TileState.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(a.tileCoord),image:a.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=TileState.ERROR;else{const a=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(a),o=typeof s=="number"?s:s[0],c=typeof s=="number"?s:s[1],d=this.targetTileGrid_.getResolution(a),h=this.sourceTileGrid_.getResolution(this.sourceZ_),g=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render(o,c,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),d,g,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(a=>{const s=a.getState();if(s==TileState.IDLE||s==TileState.LOADING){e++;const o=listen(a,EventType.CHANGE,function(c){const d=a.getState();(d==TileState.LOADED||d==TileState.ERROR||d==TileState.EMPTY)&&(unlistenByKey(o),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(a,s,o){a.getState()==TileState.IDLE&&a.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas(this.canvas_.getContext("2d")),canvasPool$1.push(this.canvas_),this.canvas_=null),super.release()}}class TileRange{constructor(e,a,s,o){this.minX=e,this.maxX=a,this.minY=s,this.maxY=o}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,a){return this.minX<=e&&e<=this.maxX&&this.minY<=a&&a<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function createOrUpdate$1(i,e,a,s,o){return o!==void 0?(o.minX=i,o.maxX=e,o.minY=a,o.maxY=s,o):new TileRange(i,e,a,s)}class CanvasTileLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=createEmpty(),this.tmpTileRange_=new TileRange(0,0,0,0)}isDrawableTile(e){const a=this.getLayer(),s=e.getState(),o=a.getUseInterimTilesOnError();return s==TileState.LOADED||s==TileState.EMPTY||s==TileState.ERROR&&!o}getTile(e,a,s,o){const c=o.pixelRatio,d=o.viewState.projection,h=this.getLayer();let _=h.getSource().getTile(e,a,s,c,d);return _.getState()==TileState.ERROR&&h.getUseInterimTilesOnError()&&h.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(_)||(_=_.getInterimTile()),_}getData(e){const a=this.frameState;if(!a)return null;const s=this.getLayer(),o=apply(a.pixelToCoordinateTransform,e.slice()),c=s.getExtent();if(c&&!containsCoordinate(c,o))return null;const d=a.pixelRatio,h=a.viewState.projection,g=a.viewState,_=s.getRenderSource(),b=_.getTileGridForProjection(g.projection),j=_.getTilePixelRatio(a.pixelRatio);for(let $=b.getZForResolution(g.resolution);$>=b.getMinZoom();--$){const _e=b.getTileCoordForCoordAndZ(o,$),et=_.getTile($,_e[1],_e[2],d,h);if(!(et instanceof ImageTile||et instanceof ReprojTile)||et instanceof ReprojTile&&et.getState()===TileState.EMPTY)return null;if(et.getState()!==TileState.LOADED)continue;const tt=b.getOrigin($),it=toSize(b.getTileSize($)),nt=b.getResolution($),rt=Math.floor(j*((o[0]-tt[0])/nt-_e[1]*it[0])),at=Math.floor(j*((tt[1]-o[1])/nt-_e[2]*it[1])),st=Math.round(j*_.getGutterForProjection(g.projection));return this.getImageData(et.getImage(),rt+st,at+st)}return null}loadedTileCallback(e,a,s){return this.isDrawableTile(s)?super.loadedTileCallback(e,a,s):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,a){const s=e.layerStatesArray[e.layerIndex],o=e.viewState,c=o.projection,d=o.resolution,h=o.center,g=o.rotation,_=e.pixelRatio,b=this.getLayer(),j=b.getSource(),$=j.getRevision(),_e=j.getTileGridForProjection(c),et=_e.getZForResolution(d,j.zDirection),tt=_e.getResolution(et);let it=e.extent;const nt=e.viewState.resolution,rt=j.getTilePixelRatio(_),at=Math.round(getWidth(it)/nt*_),st=Math.round(getHeight(it)/nt*_),ot=s.extent&&fromUserExtent(s.extent);ot&&(it=getIntersection(it,fromUserExtent(s.extent)));const dt=tt*at/2/rt,ut=tt*st/2/rt,ct=[h[0]-dt,h[1]-ut,h[0]+dt,h[1]+ut],ht=_e.getTileRangeForExtentAndZ(it,et),mt={};mt[et]={};const pt=this.createLoadedTileFinder(j,c,mt),ft=this.tmpExtent,yt=this.tmpTileRange_;this.newTiles_=!1;const Ct=g?getRotatedViewport(o.center,nt,g,e.size):void 0;for(let Wt=ht.minX;Wt<=ht.maxX;++Wt)for(let jt=ht.minY;jt<=ht.maxY;++jt){if(g&&!_e.tileCoordIntersectsViewport([et,Wt,jt],Ct))continue;const Ft=this.getTile(et,Wt,jt,e);if(this.isDrawableTile(Ft)){const Jt=getUid(this);if(Ft.getState()==TileState.LOADED){mt[et][Ft.tileCoord.toString()]=Ft;let tn=Ft.inTransition(Jt);tn&&s.opacity!==1&&(Ft.endTransition(Jt),tn=!1),!this.newTiles_&&(tn||!this.renderedTiles.includes(Ft))&&(this.newTiles_=!0)}if(Ft.getAlpha(Jt,e.time)===1)continue}const zt=_e.getTileCoordChildTileRange(Ft.tileCoord,yt,ft);let Yt=!1;zt&&(Yt=pt(et+1,zt)),Yt||_e.forEachTileCoordParentTileRange(Ft.tileCoord,pt,yt,ft)}const _t=tt/d*_/rt;compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/_,1/_,g,-at/2,-st/2);const St=toString$3(this.pixelTransform);this.useContainer(a,St,this.getBackground(e));const Pt=this.context,bt=Pt.canvas;makeInverse(this.inversePixelTransform,this.pixelTransform),compose(this.tempTransform,at/2,st/2,_t,_t,0,-at/2,-st/2),bt.width!=at||bt.height!=st?(bt.width=at,bt.height=st):this.containerReused||Pt.clearRect(0,0,at,st),ot&&this.clipUnrotated(Pt,e,ot),j.getInterpolate()||(Pt.imageSmoothingEnabled=!1),this.preRender(Pt,e),this.renderedTiles.length=0;let Mt=Object.keys(mt).map(Number);Mt.sort(ascending);let It,Nt,wt;s.opacity===1&&(!this.containerReused||j.getOpaque(e.viewState.projection))?Mt=Mt.reverse():(It=[],Nt=[]);for(let Wt=Mt.length-1;Wt>=0;--Wt){const jt=Mt[Wt],Ft=j.getTilePixelSize(jt,_,c),Yt=_e.getResolution(jt)/tt,Jt=Ft[0]*Yt*_t,tn=Ft[1]*Yt*_t,Lt=_e.getTileCoordForCoordAndZ(getTopLeft(ct),jt),vn=_e.getTileCoordExtent(Lt),En=apply(this.tempTransform,[rt*(vn[0]-ct[0])/tt,rt*(ct[3]-vn[3])/tt]),Vt=rt*j.getGutterForProjection(c),Sn=mt[jt];for(const An in Sn){const Zt=Sn[An],Dn=Zt.tileCoord,en=Lt[1]-Dn[1],Tn=Math.round(En[0]-(en-1)*Jt),yn=Lt[2]-Dn[2],Kt=Math.round(En[1]-(yn-1)*tn),nn=Math.round(En[0]-en*Jt),Et=Math.round(En[1]-yn*tn),xt=Tn-nn,Tt=Kt-Et,Rt=et===jt,Ot=Rt&&Zt.getAlpha(getUid(this),e.time)!==1;let kt=!1;if(!Ot)if(It){wt=[nn,Et,nn+xt,Et,nn+xt,Et+Tt,nn,Et+Tt];for(let Gt=0,qt=It.length;Gt<qt;++Gt)if(et!==jt&&jt<Nt[Gt]){const $t=It[Gt];intersects$1([nn,Et,nn+xt,Et+Tt],[$t[0],$t[3],$t[4],$t[7]])&&(kt||(Pt.save(),kt=!0),Pt.beginPath(),Pt.moveTo(wt[0],wt[1]),Pt.lineTo(wt[2],wt[3]),Pt.lineTo(wt[4],wt[5]),Pt.lineTo(wt[6],wt[7]),Pt.moveTo($t[6],$t[7]),Pt.lineTo($t[4],$t[5]),Pt.lineTo($t[2],$t[3]),Pt.lineTo($t[0],$t[1]),Pt.clip())}It.push(wt),Nt.push(jt)}else Pt.clearRect(nn,Et,xt,Tt);this.drawTileImage(Zt,e,nn,Et,xt,Tt,Vt,Rt),It&&!Ot?(kt&&Pt.restore(),this.renderedTiles.unshift(Zt)):this.renderedTiles.push(Zt),this.updateUsedTiles(e.usedTiles,j,Zt)}}return this.renderedRevision=$,this.renderedResolution=tt,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,ct),this.renderedExtent_=ct,this.renderedPixelRatio=_,this.renderedProjection=c,this.manageTilePyramid(e,j,_e,_,c,it,et,b.getPreload()),this.scheduleExpireCache(e,j),this.postRender(Pt,e),s.extent&&Pt.restore(),Pt.imageSmoothingEnabled=!0,St!==bt.style.transform&&(bt.style.transform=St),this.container}drawTileImage(e,a,s,o,c,d,h,g){const _=this.getTileImage(e);if(!_)return;const b=getUid(this),j=a.layerStatesArray[a.layerIndex],$=j.opacity*(g?e.getAlpha(b,a.time):1),_e=$!==this.context.globalAlpha;_e&&(this.context.save(),this.context.globalAlpha=$),this.context.drawImage(_,h,h,_.width-2*h,_.height-2*h,s,o,c,d),_e&&this.context.restore(),$!==j.opacity?a.animate=!0:g&&e.endTransition(b)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,a){if(a.canExpireCache()){const s=(function(o,c,d){const h=getUid(o);h in d.usedTiles&&o.expireCache(d.viewState.projection,d.usedTiles[h])}).bind(null,a);e.postRenderFunctions.push(s)}}updateUsedTiles(e,a,s){const o=getUid(a);o in e||(e[o]={}),e[o][s.getKey()]=!0}manageTilePyramid(e,a,s,o,c,d,h,g,_){const b=getUid(a);b in e.wantedTiles||(e.wantedTiles[b]={});const j=e.wantedTiles[b],$=e.tileQueue,_e=s.getMinZoom(),et=e.viewState.rotation,tt=et?getRotatedViewport(e.viewState.center,e.viewState.resolution,et,e.size):void 0;let it=0,nt,rt,at,st,ot,dt;for(dt=_e;dt<=h;++dt)for(rt=s.getTileRangeForExtentAndZ(d,dt,rt),at=s.getResolution(dt),st=rt.minX;st<=rt.maxX;++st)for(ot=rt.minY;ot<=rt.maxY;++ot)et&&!s.tileCoordIntersectsViewport([dt,st,ot],tt)||(h-dt<=g?(++it,nt=a.getTile(dt,st,ot,o,c),nt.getState()==TileState.IDLE&&(j[nt.getKey()]=!0,$.isKeyQueued(nt.getKey())||$.enqueue([nt,b,s.getTileCoordCenter(nt.tileCoord),at])),_!==void 0&&_(nt)):a.useTile(dt,st,ot,c));a.updateCacheSize(it,c)}}class TileLayer extends BaseTileLayer{constructor(e){super(e)}createRenderer(){return new CanvasTileLayerRenderer(this)}}class LRUCache{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let a=this.oldest_;for(;a;)e(a.value_,a.key_,this),a=a.newer}get(e,a){const s=this.entries_[e];return assert(s!==void 0,"Tried to get a value for a key that does not exist in the cache"),s===this.newest_||(s===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(s.newer.older=s.older,s.older.newer=s.newer),s.newer=null,s.older=this.newest_,this.newest_.newer=s,this.newest_=s),s.value_}remove(e){const a=this.entries_[e];return assert(a!==void 0,"Tried to get a value for a key that does not exist in the cache"),a===this.newest_?(this.newest_=a.older,this.newest_&&(this.newest_.newer=null)):a===this.oldest_?(this.oldest_=a.newer,this.oldest_&&(this.oldest_.older=null)):(a.newer.older=a.older,a.older.newer=a.newer),delete this.entries_[e],--this.count_,a.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let a=0,s;for(s=this.newest_;s;s=s.older)e[a++]=s.key_;return e}getValues(){const e=new Array(this.count_);let a=0,s;for(s=this.newest_;s;s=s.older)e[a++]=s.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var a;return(a=this.entries_[e])==null?void 0:a.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,a){this.get(e),this.entries_[e].value_=a}set(e,a){assert(!(e in this.entries_),"Tried to set a value for a key that is used already");const s={key_:e,newer:null,older:this.newest_,value_:a};this.newest_?this.newest_.newer=s:this.oldest_=s,this.newest_=s,this.entries_[e]=s,++this.count_}setSize(e){this.highWaterMark=e}}function createOrUpdate(i,e,a,s){return s!==void 0?(s[0]=i,s[1]=e,s[2]=a,s):[i,e,a]}function getKeyZXY(i,e,a){return i+"/"+e+"/"+a}function getKey(i){return getKeyZXY(i[0],i[1],i[2])}function getCacheKeyForTileKey(i){const[e,a,s]=i.substring(i.lastIndexOf("/")+1,i.length).split(",").map(Number);return getKeyZXY(e,a,s)}function fromKey(i){return i.split("/").map(Number)}function hash(i){return(i[1]<<i[0])+i[2]}function withinExtentAndZ(i,e){const a=i[0],s=i[1],o=i[2];if(e.getMinZoom()>a||a>e.getMaxZoom())return!1;const c=e.getFullTileRange(a);return c?c.containsXY(s,o):!0}class TileCache extends LRUCache{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),s=fromKey(e)[0];this.forEach(o=>{o.tileCoord[0]!==s&&(this.remove(getKey(o.tileCoord)),o.release())})}}const TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},tmpTileCoord=[0,0,0],DECIMALS$1=5;class TileGrid{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,assert(isSorted(this.resolutions_,(o,c)=>c-o),"`resolutions` must be sorted in descending order");let a;if(!e.origins){for(let o=0,c=this.resolutions_.length-1;o<c;++o)if(!a)a=this.resolutions_[o]/this.resolutions_[o+1];else if(this.resolutions_[o]/this.resolutions_[o+1]!==a){a=void 0;break}}this.zoomFactor_=a,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,assert(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const s=e.extent;s!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(s)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=s!==void 0?s:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((o,c)=>{const d=new TileRange(Math.min(0,o[0]),Math.max(o[0]-1,-1),Math.min(0,o[1]),Math.max(o[1]-1,-1));if(s){const h=this.getTileRangeForExtentAndZ(s,c);d.minX=Math.max(h.minX,d.minX),d.maxX=Math.min(h.maxX,d.maxX),d.minY=Math.max(h.minY,d.minY),d.maxY=Math.min(h.maxY,d.maxY)}return d}):s&&this.calculateTileRanges_(s)}forEachTileCoord(e,a,s){const o=this.getTileRangeForExtentAndZ(e,a);for(let c=o.minX,d=o.maxX;c<=d;++c)for(let h=o.minY,g=o.maxY;h<=g;++h)s([a,c,h])}forEachTileCoordParentTileRange(e,a,s,o){let c,d,h,g=null,_=e[0]-1;for(this.zoomFactor_===2?(d=e[1],h=e[2]):g=this.getTileCoordExtent(e,o);_>=this.minZoom;){if(d!==void 0&&h!==void 0?(d=Math.floor(d/2),h=Math.floor(h/2),c=createOrUpdate$1(d,d,h,h,s)):c=this.getTileRangeForExtentAndZ(g,_,s),a(_,c))return!0;--_}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,a,s){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const c=e[1]*2,d=e[2]*2;return createOrUpdate$1(c,c+1,d,d+1,a)}const o=this.getTileCoordExtent(e,s||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e[0]+1,a)}return null}getTileRangeForTileCoordAndZ(e,a,s){if(a>this.maxZoom||a<this.minZoom)return null;const o=e[0],c=e[1],d=e[2];if(a===o)return createOrUpdate$1(c,d,c,d,s);if(this.zoomFactor_){const g=Math.pow(this.zoomFactor_,a-o),_=Math.floor(c*g),b=Math.floor(d*g);if(a<o)return createOrUpdate$1(_,_,b,b,s);const j=Math.floor(g*(c+1))-1,$=Math.floor(g*(d+1))-1;return createOrUpdate$1(_,j,b,$,s)}const h=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,a,s)}getTileRangeForExtentAndZ(e,a,s){this.getTileCoordForXYAndZ_(e[0],e[3],a,!1,tmpTileCoord);const o=tmpTileCoord[1],c=tmpTileCoord[2];this.getTileCoordForXYAndZ_(e[2],e[1],a,!0,tmpTileCoord);const d=tmpTileCoord[1],h=tmpTileCoord[2];return createOrUpdate$1(o,d,c,h,s)}getTileCoordCenter(e){const a=this.getOrigin(e[0]),s=this.getResolution(e[0]),o=toSize(this.getTileSize(e[0]),this.tmpSize_);return[a[0]+(e[1]+.5)*o[0]*s,a[1]-(e[2]+.5)*o[1]*s]}getTileCoordExtent(e,a){const s=this.getOrigin(e[0]),o=this.getResolution(e[0]),c=toSize(this.getTileSize(e[0]),this.tmpSize_),d=s[0]+e[1]*c[0]*o,h=s[1]-(e[2]+1)*c[1]*o,g=d+c[0]*o,_=h+c[1]*o;return createOrUpdate$2(d,h,g,_,a)}getTileCoordForCoordAndResolution(e,a,s){return this.getTileCoordForXYAndResolution_(e[0],e[1],a,!1,s)}getTileCoordForXYAndResolution_(e,a,s,o,c){const d=this.getZForResolution(s),h=s/this.getResolution(d),g=this.getOrigin(d),_=toSize(this.getTileSize(d),this.tmpSize_);let b=h*(e-g[0])/s/_[0],j=h*(g[1]-a)/s/_[1];return o?(b=ceil(b,DECIMALS$1)-1,j=ceil(j,DECIMALS$1)-1):(b=floor(b,DECIMALS$1),j=floor(j,DECIMALS$1)),createOrUpdate(d,b,j,c)}getTileCoordForXYAndZ_(e,a,s,o,c){const d=this.getOrigin(s),h=this.getResolution(s),g=toSize(this.getTileSize(s),this.tmpSize_);let _=(e-d[0])/h/g[0],b=(d[1]-a)/h/g[1];return o?(_=ceil(_,DECIMALS$1)-1,b=ceil(b,DECIMALS$1)-1):(_=floor(_,DECIMALS$1),b=floor(b,DECIMALS$1)),createOrUpdate(s,_,b,c)}getTileCoordForCoordAndZ(e,a,s){return this.getTileCoordForXYAndZ_(e[0],e[1],a,!1,s)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,a){const s=linearFindNearest(this.resolutions_,e,a||0);return clamp(s,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,a){return intersectsLinearRing(a,0,a.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const a=this.resolutions_.length,s=new Array(a);for(let o=this.minZoom;o<a;++o)s[o]=this.getTileRangeForExtentAndZ(e,o);this.fullTileRanges_=s}}class WMTSTileGrid extends TileGrid{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function createFromCapabilitiesMatrixSet(i,e,a){const s=[],o=[],c=[],d=[],h=[];a=a!==void 0?a:[];const g="SupportedCRS",_="TileMatrix",b="Identifier",j="ScaleDenominator",$="TopLeftCorner",_e="TileWidth",et="TileHeight",tt=i[g],it=get$3(tt),nt=it.getMetersPerUnit(),rt=it.getAxisOrientation().substr(0,2)=="ne";return i[_].sort(function(at,st){return st[j]-at[j]}),i[_].forEach(function(at){let st;if(a.length>0?st=a.find(function(ot){return at[b]==ot[_]?!0:at[b].includes(":")?!1:i[b]+":"+at[b]===ot[_]}):st=!0,st){o.push(at[b]);const ot=at[j]*28e-5/nt,dt=at[_e],ut=at[et];rt?c.push([at[$][1],at[$][0]]):c.push(at[$]),s.push(ot),d.push(dt==ut?dt:[dt,ut]),h.push([at.MatrixWidth,at.MatrixHeight])}}),new WMTSTileGrid({extent:e,origins:c,resolutions:s,matrixIds:o,tileSizes:d,sizes:h})}function getForProjection(i){let e=i.getDefaultTileGrid();return e||(e=createForProjection(i),i.setDefaultTileGrid(e)),e}function wrapX(i,e,a){const s=e[0],o=i.getTileCoordCenter(e),c=extentFromProjection(a);if(!containsCoordinate(c,o)){const d=getWidth(c),h=Math.ceil((c[0]-o[0])/d);return o[0]+=d*h,i.getTileCoordForCoordAndZ(o,s)}return e}function createForExtent(i,e,a,s){s=s!==void 0?s:"top-left";const o=resolutionsFromExtent(i,e,a);return new TileGrid({extent:i,origin:getCorner(i,s),resolutions:o,tileSize:a})}function createXYZ(i){const e=i||{},a=e.extent||get$3("EPSG:3857").getExtent(),s={extent:a,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(a,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid(s)}function resolutionsFromExtent(i,e,a,s){e=e!==void 0?e:DEFAULT_MAX_ZOOM,a=toSize(a!==void 0?a:DEFAULT_TILE_SIZE);const o=getHeight(i),c=getWidth(i);s=s>0?s:Math.max(c/a[0],o/a[1]);const d=e+1,h=new Array(d);for(let g=0;g<d;++g)h[g]=s/Math.pow(2,g);return h}function createForProjection(i,e,a,s){const o=extentFromProjection(i);return createForExtent(o,e,a,s)}function extentFromProjection(i){i=get$3(i);let e=i.getExtent();if(!e){const a=180*METERS_PER_UNIT$1.degrees/i.getMetersPerUnit();e=createOrUpdate$2(-a,-a,a,a)}return e}class TileSource extends Source{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const a=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),a),this.tileCache=new TileCache(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,a){const s=this.getTileCacheForProjection(e);s&&s.expireCache(a)}forEachLoadedTile(e,a,s,o){const c=this.getTileCacheForProjection(e);if(!c)return!1;let d=!0,h,g,_;for(let b=s.minX;b<=s.maxX;++b)for(let j=s.minY;j<=s.maxY;++j)g=getKeyZXY(a,b,j),_=!1,c.containsKey(g)&&(h=c.get(g),_=h.getState()===TileState.LOADED,_&&(_=o(h)!==!1)),_||(d=!1);return d}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const a=e?this.getTileGridForProjection(e):this.tileGrid;return a?a.getResolutions():null}getTile(e,a,s,o,c){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:getForProjection(e)}getTileCacheForProjection(e){const a=this.getProjection();return assert(a===null||equivalent(a,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,a,s){const o=this.getTileGridForProjection(s),c=this.getTilePixelRatio(a),d=toSize(o.getTileSize(e),this.tmpSize);return c==1?d:scale(d,c,this.tmpSize)}getTileCoordForTileUrlFunction(e,a){a=a!==void 0?a:this.getProjection();const s=this.getTileGridForProjection(a);return this.getWrapX()&&a.isGlobal()&&(e=wrapX(s,e,a)),withinExtentAndZ(e,s)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,a){const s=this.getTileCacheForProjection(a);e>s.highWaterMark&&(s.highWaterMark=e)}useTile(e,a,s,o){}}class TileSourceEvent extends BaseEvent{constructor(e,a){super(e),this.tile=a}}function createFromTemplate(i,e){const a=/\{z\}/g,s=/\{x\}/g,o=/\{y\}/g,c=/\{-y\}/g;return function(d,h,g){if(d)return i.replace(a,d[0].toString()).replace(s,d[1].toString()).replace(o,d[2].toString()).replace(c,function(){const _=d[0],b=e.getFullTileRange(_);if(!b)throw new Error("The {-y} placeholder requires a tile grid with extent");return(b.getHeight()-d[2]-1).toString()})}}function createFromTemplates(i,e){const a=i.length,s=new Array(a);for(let o=0;o<a;++o)s[o]=createFromTemplate(i[o],e);return createFromTileUrlFunctions(s)}function createFromTileUrlFunctions(i){return i.length===1?i[0]:function(e,a,s){if(!e)return;const o=hash(e),c=modulo(o,i.length);return i[c](e,a,s)}}function expandUrl(i){const e=[];let a=/\{([a-z])-([a-z])\}/.exec(i);if(a){const s=a[1].charCodeAt(0),o=a[2].charCodeAt(0);let c;for(c=s;c<=o;++c)e.push(i.replace(a[0],String.fromCharCode(c)));return e}if(a=/\{(\d+)-(\d+)\}/.exec(i),a){const s=parseInt(a[2],10);for(let o=parseInt(a[1],10);o<=s;o++)e.push(i.replace(a[0],o.toString()));return e}return e.push(i),e}class UrlTile extends TileSource{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const a=e.target,s=getUid(a),o=a.getState();let c;o==TileState.LOADING?(this.tileLoadingKeys_[s]=!0,c=TileEventType.TILELOADSTART):s in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[s],c=o==TileState.ERROR?TileEventType.TILELOADERROR:o==TileState.LOADED?TileEventType.TILELOADEND:void 0),c!=null&&this.dispatchEvent(new TileSourceEvent(c,a))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,a){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof a<"u"?this.setKey(a):this.changed()}setUrl(e){const a=expandUrl(e);this.urls=a,this.setUrls(a)}setUrls(e){this.urls=e;const a=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(e,this.tileGrid),a):this.setKey(a)}tileUrlFunction(e,a,s){}useTile(e,a,s){const o=getKeyZXY(e,a,s);this.tileCache.containsKey(o)&&this.tileCache.get(o)}}class TileImage extends UrlTile{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ImageTile,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,a){const s=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==s?a:{});for(const o in this.tileCacheForProjection){const c=this.tileCacheForProjection[o];c.expireCache(c==s?a:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const a=this.getProjection();if(this.tileGrid&&(!a||equivalent(a,e)))return this.tileGrid;const s=getUid(e);return s in this.tileGridForProjection||(this.tileGridForProjection[s]=getForProjection(e)),this.tileGridForProjection[s]}getTileCacheForProjection(e){const a=this.getProjection();if(!a||equivalent(a,e))return this.tileCache;const s=getUid(e);return s in this.tileCacheForProjection||(this.tileCacheForProjection[s]=new TileCache(this.tileCache.highWaterMark)),this.tileCacheForProjection[s]}createTile_(e,a,s,o,c,d){const h=[e,a,s],g=this.getTileCoordForTileUrlFunction(h,c),_=g?this.tileUrlFunction(g,o,c):void 0,b=new this.tileClass(h,_!==void 0?TileState.IDLE:TileState.EMPTY,_!==void 0?_:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return b.key=d,b.addEventListener(EventType.CHANGE,this.handleTileChange.bind(this)),b}getTile(e,a,s,o,c){const d=this.getProjection();if(!d||!c||equivalent(d,c))return this.getTileInternal(e,a,s,o,d||c);const h=this.getTileCacheForProjection(c),g=[e,a,s];let _;const b=getKey(g);h.containsKey(b)&&(_=h.get(b));const j=this.getKey();if(_&&_.key==j)return _;const $=this.getTileGridForProjection(d),_e=this.getTileGridForProjection(c),et=this.getTileCoordForTileUrlFunction(g,c),tt=new ReprojTile(d,$,c,_e,g,et,this.getTilePixelRatio(o),this.getGutter(),(it,nt,rt,at)=>this.getTileInternal(it,nt,rt,at,d),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return tt.key=j,_?(tt.interimTile=_,tt.refreshInterimChain(),h.replace(b,tt)):h.set(b,tt),tt}getTileInternal(e,a,s,o,c){let d=null;const h=getKeyZXY(e,a,s),g=this.getKey();if(!this.tileCache.containsKey(h))d=this.createTile_(e,a,s,o,c,g),this.tileCache.set(h,d);else if(d=this.tileCache.get(h),d.key!=g){const _=d;d=this.createTile_(e,a,s,o,c,g),_.getState()==TileState.IDLE?d.interimTile=_.interimTile:d.interimTile=_,d.refreshInterimChain(),this.tileCache.replace(h,d)}return d}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const a in this.tileCacheForProjection)this.tileCacheForProjection[a].clear();this.changed()}}setTileGridForProjection(e,a){const s=get$3(e);if(s){const o=getUid(s);o in this.tileGridForProjection||(this.tileGridForProjection[o]=a)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function defaultTileLoadFunction(i,e){i.getImage().src=e}const DECIMALS=4;function appendParams(i,e){const a=[];Object.keys(e).forEach(function(o){e[o]!==null&&e[o]!==void 0&&a.push(o+"="+encodeURIComponent(e[o]))});const s=a.join("&");return i=i.replace(/[?&]$/,""),i+=i.includes("?")?"&":"?",i+s}const DEFAULT_VERSION="1.3.0";function getRequestUrl(i,e,a,s,o){o.WIDTH=a[0],o.HEIGHT=a[1];const c=s.getAxisOrientation();let d;const h=compareVersions(o.VERSION,"1.3")>=0;return o[h?"CRS":"SRS"]=s.getCode(),h&&c.substr(0,2)=="ne"?d=[e[1],e[0],e[3],e[2]]:d=e,o.BBOX=d.join(","),appendParams(i,o)}function getImageSrc(i,e,a,s,o,c,d){c=Object.assign({REQUEST:"GetMap"},c);const h=e/a,g=[round(getWidth(i)/h,DECIMALS),round(getHeight(i)/h,DECIMALS)];if(a!=1)switch(d){case"geoserver":const b=90*a+.5|0;"FORMAT_OPTIONS"in c?c.FORMAT_OPTIONS+=";dpi:"+b:c.FORMAT_OPTIONS="dpi:"+b;break;case"mapserver":c.MAP_RESOLUTION=90*a;break;case"carmentaserver":case"qgis":c.DPI=90*a;break;default:throw new Error("Unknown `serverType` configured")}return getRequestUrl(o,i,g,s,c)}function getRequestParams(i,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:DEFAULT_VERSION,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},i)}class TileWMS extends TileImage{constructor(e){e=e||{};const a=Object.assign({},e.params),s="TRANSPARENT"in a?a.TRANSPARENT:!0;super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!s,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=a,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,a,s,o){const c=get$3(s),d=this.getProjection()||c;let h=this.getTileGrid();h||(h=this.getTileGridForProjection(d));const g=transform$1(e,c,d),_=calculateSourceResolution(d,c,e,a),b=h.getZForResolution(_,this.zDirection),j=h.getResolution(b),$=h.getTileCoordForCoordAndZ(g,b);if(h.getResolutions().length<=$[0])return;let _e=h.getTileCoordExtent($,this.tmpExtent_);const et=this.gutter_;et!==0&&(_e=buffer(_e,j*et,_e));const tt={QUERY_LAYERS:this.params_.LAYERS};Object.assign(tt,getRequestParams(this.params_,"GetFeatureInfo"),o);const it=Math.floor((g[0]-_e[0])/j),nt=Math.floor((_e[3]-g[1])/j);return tt[this.v13_?"I":"X"]=it,tt[this.v13_?"J":"Y"]=nt,this.getRequestUrl_($,_e,1,d||c,tt)}getLegendUrl(e,a){if(this.urls[0]===void 0)return;const s={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(a===void 0||a.LAYER===void 0){const o=this.params_.LAYERS;if(!(!Array.isArray(o)||o.length===1))return;s.LAYER=o}if(e!==void 0){const o=this.getProjection()?this.getProjection().getMetersPerUnit():1,c=28e-5;s.SCALE=e*o/c}return Object.assign(s,a),appendParams(this.urls[0],s)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,a,s,o,c){const d=this.urls;if(!d)return;let h;if(d.length==1)h=d[0];else{const g=modulo(hash(e),d.length);h=d[g]}return getImageSrc(a,(this.tileGrid||this.getTileGridForProjection(o)).getResolution(e[0]),s,o,h,c,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const a=[];for(const s in this.params_)a[e++]=s+"-"+this.params_[s];return a.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||DEFAULT_VERSION;this.v13_=compareVersions(e,"1.3")>=0}tileUrlFunction(e,a,s){let o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(s)),o.getResolutions().length<=e[0])return;a!=1&&(!this.hidpi_||this.serverType_===void 0)&&(a=1);const c=o.getResolution(e[0]);let d=o.getTileCoordExtent(e,this.tmpExtent_);const h=this.gutter_;h!==0&&(d=buffer(d,c*h,d));const g=Object.assign({},getRequestParams(this.params_,"GetMap"));return this.getRequestUrl_(e,d,a,s,g)}}const name="geopf-extensions-openlayers",description="French Geoportal Extensions for OpenLayers libraries",version="1.0.0-beta.0-241",date="05/11/2024",module="src/index.js",directories={},engines={node:">=20"},repository={type:"git",url:"https://github.com/IGNF/geopf-extensions-openlayers.git"},author="IGNF",keywords=["geoportail","geoplateforme","javascript","OpenLayers 8"],license="AGPL-3.0",bugs={url:"https://github.com/IGNF/geopf-extensions-openlayers/issues"},homepage="https://github.com/IGNF/geopf-extensions-openlayers#readme",dependencies={"@gouvfr/dsfr":"^1.11.0","@mapbox/mapbox-gl-style-spec":"14.7.1",eventbusjs:"0.2.0","geoportal-access-lib":"3.4.3",loglevel:"^1.9.1",ol:"8.2.0","ol-mapbox-style":"12.3.5",proj4:"2.12.1",sortablejs:"1.15.3",typescript:"^5.3.3","whatwg-fetch":"3.6.20","@xmldom/xmldom":"^0.9.0"},Pkg={name,description,version,date,module,directories,engines,repository,author,keywords,license,bugs,homepage,dependencies};LoggerByDefault$1.getLogger("sourcewms");var SourceWMS=class extends TileWMS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var a=e.configuration,s=a?a.params:null,o=e.apiKey;if(!a){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var c=Config$1.configuration.getLayerId(e.layer,"WMS");if(!c)throw new Error(`ERROR : WMS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(a=Config$1.configuration.getLayerConf(c),!a)throw new Error("ERROR : WMS Layer configuration cannot be found in Geoportal.");o=Config$1.configuration.getLayerKey(c)[0],s=Config$1.configuration.getLayerParams(e.layer,"WMS")}var d=e.ssl===!1?"http://":"https://",h={"gp-ol-ext":Pkg.olExtVersion||Pkg.version};if(s.url.includes("/private/")){var g=e.apiKey||o;if(!g)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");h.apikey=g}var _={url:Gp.Helper.normalyzeUrl(s.url.replace(/(http|https):\/\//,d),h,!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:s.version,STYLES:s.styles,FORMAT:s.format}};return Helper.mergeParams(_,e.olParams),e.olParams&&!s.originators&&(s.originators=e.olParams.attributions),super(_),this._originators=s.originators,this._legends=e.legends||s.legends,this._metadata=e.metadata||s.metadata,this._title=e.title||s.title,this._description=e.description||s.description,this._quicklookUrl=e.quicklookUrl||s.quicklookUrl,this.name=e.layer,this.service="WMS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=SourceWMS);var LayerWMS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var a=e.configuration;if(!a){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var s=Config$1.configuration.getLayerId(e.layer,"WMS");if(a=Config$1.configuration.getLayerConf(s),!a)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var o;e.olParams&&e.olParams.sourceParams&&(o=e.olParams.sourceParams);var c=new SourceWMS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:o}),d={source:c};if(c.getParams().LAYERS!==void 0&&o&&o.projection){var h=[a.globalConstraints.extent.left,a.globalConstraints.extent.bottom,a.globalConstraints.extent.right,a.globalConstraints.extent.top];d.extent=transformExtent(h,"EPSG:4326",o.projection);var g;typeof o.projection=="string"?g=get$3(o.projection):typeof o.projection=="object"&&o.projection.getCode()&&(g=get$3(o.projection.getCode())),g&&g.getUnits()&&(g.getUnits()==="m"?(d.minResolution=(a.globalConstraints.minScale-1)*28e-5,d.maxResolution=(a.globalConstraints.maxScale+1)*28e-5):g.getUnits()==="degrees"&&(d.minResolution=(a.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),d.maxResolution=(a.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(d,e.olParams),super(d),this.name=e.layer,this.service="WMS",this}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=LayerWMS);let WMTS$1=class extends TileImage{constructor(e){const a=e.requestEncoding!==void 0?e.requestEncoding:"KVP",s=e.tileGrid;let o=e.urls;o===void 0&&e.url!==void 0&&(o=expandUrl(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:s,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:o,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=a,this.setKey(this.getKeyForDimensions_()),o&&o.length>0&&(this.tileUrlFunction=createFromTileUrlFunctions(o.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const a=e.join(`
`);this.setTileUrlFunction(createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate.bind(this))),a)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const a in this.dimensions_)e.push(a+"-"+this.dimensions_[a]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const a=this.requestEncoding_,s={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};a=="KVP"&&Object.assign(s,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=a=="KVP"?appendParams(e,s):e.replace(/\{(\w+?)\}/g,function(d,h){return h.toLowerCase()in s?s[h.toLowerCase()]:d});const o=this.tileGrid,c=this.dimensions_;return function(d,h,g){if(!d)return;const _={TileMatrix:o.getMatrixId(d[0]),TileCol:d[1],TileRow:d[2]};Object.assign(_,c);let b=e;return a=="KVP"?b=appendParams(b,_):b=b.replace(/\{(\w+?)\}/g,function(j,$){return _[$]}),b}}};function optionsFromCapabilities(i,e){const s=i.Contents.Layer.find(function(ft){return ft.Identifier==e.layer});if(!s)return null;const o=i.Contents.TileMatrixSet;let c;s.TileMatrixSetLink.length>1?"projection"in e?c=s.TileMatrixSetLink.findIndex(function(ft){const Ct=o.find(function(Pt){return Pt.Identifier==ft.TileMatrixSet}).SupportedCRS,_t=get$3(Ct),St=get$3(e.projection);return _t&&St?equivalent(_t,St):Ct==e.projection}):c=s.TileMatrixSetLink.findIndex(function(ft){return ft.TileMatrixSet==e.matrixSet}):c=0,c<0&&(c=0);const d=s.TileMatrixSetLink[c].TileMatrixSet,h=s.TileMatrixSetLink[c].TileMatrixSetLimits;let g=s.Format[0];"format"in e&&(g=e.format),c=s.Style.findIndex(function(ft){return"style"in e?ft.Title==e.style:ft.isDefault}),c<0&&(c=0);const _=s.Style[c].Identifier,b={};"Dimension"in s&&s.Dimension.forEach(function(ft,yt,Ct){const _t=ft.Identifier;let St=ft.Default;St===void 0&&(St=ft.Value[0]),b[_t]=St});const $=i.Contents.TileMatrixSet.find(function(ft){return ft.Identifier==d});let _e;const et=$.SupportedCRS;if(et&&(_e=get$3(et)),"projection"in e){const ft=get$3(e.projection);ft&&(!_e||equivalent(ft,_e))&&(_e=ft)}let tt=!1;const it=_e.getAxisOrientation().substr(0,2)=="ne";let nt=$.TileMatrix[0],rt={MinTileCol:0,MinTileRow:0,MaxTileCol:nt.MatrixWidth-1,MaxTileRow:nt.MatrixHeight-1};if(h){rt=h[h.length-1];const ft=$.TileMatrix.find(yt=>yt.Identifier===rt.TileMatrix||$.Identifier+":"+yt.Identifier===rt.TileMatrix);ft&&(nt=ft)}const at=nt.ScaleDenominator*28e-5/_e.getMetersPerUnit(),st=it?[nt.TopLeftCorner[1],nt.TopLeftCorner[0]]:nt.TopLeftCorner,ot=nt.TileWidth*at,dt=nt.TileHeight*at;let ut=$.BoundingBox;ut&&it&&(ut=[ut[1],ut[0],ut[3],ut[2]]);let ct=[st[0]+ot*rt.MinTileCol,st[1]-dt*(1+rt.MaxTileRow),st[0]+ot*(1+rt.MaxTileCol),st[1]-dt*rt.MinTileRow];if(ut!==void 0&&!containsExtent(ut,ct)){const ft=s.WGS84BoundingBox,yt=get$3("EPSG:4326").getExtent();if(ct=ut,ft)tt=ft[0]===yt[0]&&ft[2]===yt[2];else{const Ct=transformExtent(ut,$.SupportedCRS,"EPSG:4326");tt=Ct[0]-1e-10<=yt[0]&&Ct[2]+1e-10>=yt[2]}}const ht=createFromCapabilitiesMatrixSet($,ct,h),mt=[];let pt=e.requestEncoding;if(pt=pt!==void 0?pt:"","OperationsMetadata"in i&&"GetTile"in i.OperationsMetadata){const ft=i.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let yt=0,Ct=ft.length;yt<Ct;++yt)if(ft[yt].Constraint){const St=ft[yt].Constraint.find(function(Pt){return Pt.name=="GetEncoding"}).AllowedValues.Value;if(pt===""&&(pt=St[0]),pt==="KVP")St.includes("KVP")&&mt.push(ft[yt].href);else break}else ft[yt].href&&(pt="KVP",mt.push(ft[yt].href))}return mt.length===0&&(pt="REST",s.ResourceURL.forEach(function(ft){ft.resourceType==="tile"&&(g=ft.format,mt.push(ft.template))})),{urls:mt,layer:e.layer,matrixSet:d,format:g,projection:_e,requestEncoding:pt,tileGrid:ht,style:_,dimensions:b,wrapX:tt,crossOrigin:e.crossOrigin}}var WMTS=class extends WMTS$1{constructor(e){super(e)}getFeatureInfoUrl(e,a,s,o){var c=this.options&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,d=this.tileGrid,h=this.tileGrid.getTileCoordForCoordAndResolution(e,a),g=function(at,st,ot){var dt=[0,0,0],ut=createEmpty(),ct=at[1],ht=at[2],mt=st.getTileCoordExtent(at),pt=ot.getExtent();if(pt!=null&&ot.isGlobal()){var ft=Math.ceil(getWidth(pt)/getWidth(mt));ct=ct%ft,dt[0]=at[0],dt[1]=ct,dt[2]=at[2],mt=st.getTileCoordExtent(dt,ut)}return intersects$1(mt,pt)?[at[0],ct,ht]:null},_=d.getTileCoordExtent(h),b=g(h,d,s);if(!(d.getResolutions().length<=h[0])){var j=d.getResolution(h[0]),$=d.getMatrixIds()[h[0]],_e={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:b[1],TILEROW:b[2],TILEMATRIX:$,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};Helper.assign(_e,o);var et=Math.floor((e[0]-_[0])/(j/c)),tt=Math.floor((_[3]-e[1])/(j/c)),it=d.getTileSize(h[0]);et=Math.min(et,(it[0]|it)-1),tt=Math.max(tt,0),_e.I=et,_e.J=tt;var nt=this.urls[0],rt=Gp.Helper.normalyzeUrl(nt,_e);return rt}}};window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=WMTS);var LayerUtils={getZoomLevelFromScaleDenominator:function(i,e){var a={};switch(e){case"EPSG:2154":a={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:a={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424};break}var s=i*28e-5;for(var o in a)if(a.hasOwnProperty(o)&&a[o]<=s)return o=parseInt(o,10),o;return 0},getAttributions:function(i){var e=i.zoom,a=[];if(i.originators!=null&&i.visibility)for(var s,o=0,c=i.originators.length;o<c;o++){s=!0;for(var d=i.originators[o],h=i.originators[o].constraints||[],g=0,_=h.length;g<_;g++){var b=h[g];s=!0;var j=this.getZoomLevelFromScaleDenominator(b.maxScaleDenominator,i.crs),$=this.getZoomLevelFromScaleDenominator(b.minScaleDenominator,i.crs)||21;j&&j>e&&(s=!1),s&&$&&$<e&&(s=!1);var _e=b.bbox;if(s&&_e){s=!1;var et=i.extent;if(et){var tt=[_e.top,_e.left,_e.bottom,_e.right];if(this.intersects(et,tt)){s=!0;break}}}}if(s){var it=d.logo,nt=d.url,rt=d.name?d.name:"",at=d.attribution,st=document.createElement("div");st.className="gp-control-attribution";var ot=null;ot=document.createElement("a"),ot.className="gp-control-attribution-link",ot.target="_blank",st.appendChild(ot),nt&&(ot.href=nt);var dt=!!it,ut=null;dt?(ut=document.createElement("img"),ot?(ut.className="gp-control-attribution-image",ot.appendChild(ut)):(ut.className="",st.appendChild(ut)),ut.src=it,ut.title=at||rt,ut.style.height="30px",ut.style.width="30px"):rt?ot.textContent=rt:at?ot.textContent=at:nt?ot.textContent=nt:ot.textContent="",a.push(st.innerHTML+" ")}}return a},intersects:function(i,e){var a=i[1]<=e[3]&&e[1]<=i[3],s=i[2]<=e[0]&&e[2]<=i[0];return a&&s}};LoggerByDefault$1.getLogger("sourcewmts");var SourceWMTS=class extends WMTS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var a=e.configuration,s=a?a.params:null,o=e.apiKey;if(!a){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var c=Config$1.configuration.getLayerId(e.layer,"WMTS");if(!c)throw new Error(`ERROR : WMTS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(a=Config$1.configuration.getLayerConf(c),!a)throw new Error("ERROR : WMTS Layer configuration cannot be found in Geoportal.");o=Config$1.configuration.getLayerKey(c)[0],s=Config$1.configuration.getLayerParams(e.layer,"WMTS")}var d=e.ssl===!1?"http://":"https://",h={"gp-ol-ext":Pkg.olExtVersion||Pkg.version};if(s.url.includes("/private/")){var g=e.apiKey||o;if(!g)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");h.apikey=g}var _={url:Gp.Helper.normalyzeUrl(s.url.replace(/(http|https):\/\//,d),h,!1),version:s.version,style:s.styles,format:s.format,projection:s.projection,maxZoom:LayerUtils.getZoomLevelFromScaleDenominator(s.minScale),layer:e.layer,matrixSet:s.TMSLink,tileGrid:new WMTSTileGrid({resolutions:s.nativeResolutions,matrixIds:s.matrixIds,origin:[Object.values(s.tileMatrices)[0].topLeftCorner.x,Object.values(s.tileMatrices)[0].topLeftCorner.y]})};return Helper.mergeParams(_,e.olParams),e.olParams&&!s.originators&&(s.originators=e.olParams.attributions),super(_),this._originators=s.originators,this._legends=e.legends||s.legends,this._metadata=e.metadata||s.metadata,this._description=e.description||s.description,this._title=e.title||s.title,this._quicklookUrl=e.quicklookUrl||s.quicklookUrl,this.name=e.layer,this.service="WMTS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=SourceWMTS);var LayerWMTS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var a=e.configuration;if(!a){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var s=Config$1.configuration.getLayerId(e.layer,"WMTS");if(a=Config$1.configuration.getLayerConf(s),!a)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var o;e.olParams&&e.olParams.sourceParams&&(o=e.olParams.sourceParams);var c=new SourceWMTS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:o}),d={source:c};if(c.getLayer()!==void 0&&a.globalConstraints&&a.globalConstraints.projection){var h;typeof a.globalConstraints.projection=="string"&&(h=get$3(a.globalConstraints.projection)),h&&h.getUnits()&&(h.getUnits()==="m"?(d.minResolution=(a.globalConstraints.minScale-1)*28e-5,d.maxResolution=(a.globalConstraints.maxScale+1)*28e-5):h.getUnits()==="degrees"&&(d.minResolution=(a.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),d.maxResolution=(a.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(d,e.olParams),super(d),this.name=e.layer,this.service="WMTS",this}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=LayerWMTS);const IMAGE_REPLAYS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},VECTOR_REPLAYS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=create()}prepareTile(e,a,s){let o;const c=e.getState();return(c===TileState.LOADED||c===TileState.ERROR)&&(this.updateExecutorGroup_(e,a,s),this.tileImageNeedsRender_(e)&&(o=!0)),o}getTile(e,a,s,o){const c=o.pixelRatio,d=o.viewState,h=d.resolution,g=d.projection,_=this.getLayer(),b=_.getSource().getTile(e,a,s,c,g),j=o.viewHints,$=!(j[ViewHint.ANIMATING]||j[ViewHint.INTERACTING]);return($||!b.wantedResolution)&&(b.wantedResolution=h),this.prepareTile(b,c,g)&&($||Date.now()-o.time<8)&&_.getRenderMode()!=="vector"&&this.renderTileImage_(b,o),super.getTile(e,a,s,o)}isDrawableTile(e){const a=this.getLayer();return super.isDrawableTile(e)&&(a.getRenderMode()==="vector"?getUid(a)in e.executorGroups:e.hasContext(a))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const a=this.getLayer().getRevision();return this.renderedLayerRevision_!==a&&(this.renderedLayerRevision_=a,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,a,s){const o=this.getLayer(),c=o.getRevision(),d=o.getRenderOrder()||null,h=e.wantedResolution,g=e.getReplayState(o);if(!g.dirty&&g.renderedResolution===h&&g.renderedRevision==c&&g.renderedRenderOrder==d)return;const _=o.getSource(),b=o.getDeclutter(),j=_.getTileGrid(),_e=_.getTileGridForProjection(s).getTileCoordExtent(e.wrappedTileCoord),et=_.getSourceTiles(a,s,e),tt=getUid(o);delete e.hitDetectionImageData[tt],e.executorGroups[tt]=[],b&&(e.declutterExecutorGroups[tt]=[]),g.dirty=!1;for(let it=0,nt=et.length;it<nt;++it){const rt=et[it];if(rt.getState()!=TileState.LOADED)continue;const at=rt.tileCoord,st=j.getTileCoordExtent(at),ot=getIntersection(_e,st),dt=buffer(ot,o.getRenderBuffer()*h,this.tmpExtent),ut=equals$1(st,ot)?null:dt,ct=new BuilderGroup(0,dt,h,a),ht=b?new BuilderGroup(0,ot,h,a):void 0,mt=getSquaredTolerance(h,a),pt=function(St){let Pt;const bt=St.getStyleFunction()||o.getStyleFunction();if(bt&&(Pt=bt(St,h)),Pt){const Mt=this.renderFeature(St,mt,Pt,ct,ht);g.dirty=g.dirty||Mt}},ft=rt.getFeatures();d&&d!==g.renderedRenderOrder&&ft.sort(d);for(let St=0,Pt=ft.length;St<Pt;++St){const bt=ft[St];(!ut||intersects$1(ut,bt.getGeometry().getExtent()))&&pt.call(this,bt)}const yt=ct.finish(),Ct=o.getRenderMode()!=="vector"&&b&&et.length===1?null:ot,_t=new ExecutorGroup(Ct,h,a,_.getOverlaps(),yt,o.getRenderBuffer());if(e.executorGroups[tt].push(_t),ht){const St=new ExecutorGroup(null,h,a,_.getOverlaps(),ht.finish(),o.getRenderBuffer());e.declutterExecutorGroups[tt].push(St)}}g.renderedRevision=c,g.renderedRenderOrder=d,g.renderedResolution=h}forEachFeatureAtCoordinate(e,a,s,o,c){const d=a.viewState.resolution,h=a.viewState.rotation;s=s??0;const g=this.getLayer(),b=g.getSource().getTileGridForProjection(a.viewState.projection),j=boundingExtent([e]);buffer(j,d*s,j);const $={},_e=function(it,nt,rt){let at=it.getId();at===void 0&&(at=getUid(it));const st=$[at];if(st){if(st!==!0&&rt<st.distanceSq){if(rt===0)return $[at]=!0,c.splice(c.lastIndexOf(st),1),o(it,g,nt);st.geometry=nt,st.distanceSq=rt}}else{if(rt===0)return $[at]=!0,o(it,g,nt);c.push($[at]={feature:it,layer:g,geometry:nt,distanceSq:rt,callback:o})}},et=this.renderedTiles;let tt;for(let it=0,nt=et.length;!tt&&it<nt;++it){const rt=et[it],at=b.getTileCoordExtent(rt.wrappedTileCoord);if(!intersects$1(at,j))continue;const st=getUid(g),ot=[rt.executorGroups[st]],dt=rt.declutterExecutorGroups[st];dt&&ot.push(dt),ot.some(ut=>{const ct=ut===dt?a.declutterTree.all().map(ht=>ht.value):null;for(let ht=0,mt=ut.length;ht<mt;++ht)if(tt=ut[ht].forEachFeatureAtCoordinate(e,d,h,s,_e,ct),tt)return!0})}return tt}getFeatures(e){return new Promise((a,s)=>{const o=this.getLayer(),c=getUid(o),d=o.getSource(),h=this.renderedProjection,g=h.getExtent(),_=this.renderedResolution,b=d.getTileGridForProjection(h),j=apply(this.renderedPixelToCoordinateTransform_,e.slice()),$=b.getTileCoordForCoordAndResolution(j,_);let _e;for(let at=0,st=this.renderedTiles.length;at<st;++at)if($.toString()===this.renderedTiles[at].tileCoord.toString()){if(_e=this.renderedTiles[at],_e.getState()===TileState.LOADED){const ot=b.getTileCoordExtent(_e.tileCoord);d.getWrapX()&&h.canWrapX()&&!containsExtent(g,ot)&&wrapX$1(j,h);break}_e=void 0}if(!_e||_e.loadingSourceTiles>0){a([]);return}const et=b.getTileCoordExtent(_e.wrappedTileCoord),tt=getTopLeft(et),it=[(j[0]-tt[0])/_,(tt[1]-j[1])/_],nt=_e.getSourceTiles().reduce(function(at,st){return at.concat(st.getFeatures())},[]);let rt=_e.hitDetectionImageData[c];if(!rt){const at=toSize(b.getTileSize(b.getZForResolution(_,d.zDirection))),st=this.renderedRotation_,ot=[this.getRenderTransform(b.getTileCoordCenter(_e.wrappedTileCoord),_,0,HIT_DETECT_RESOLUTION,at[0]*HIT_DETECT_RESOLUTION,at[1]*HIT_DETECT_RESOLUTION,0)];rt=createHitDetectionImageData(at,ot,nt,o.getStyleFunction(),b.getTileCoordExtent(_e.wrappedTileCoord),_e.getReplayState(o).renderedResolution,st),_e.hitDetectionImageData[c]=rt}a(hitDetect(it,nt,rt))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e){const a=this.context,s=a.globalAlpha;a.globalAlpha=this.getLayer().getOpacity();const o=e.viewHints,c=!(o[ViewHint.ANIMATING]||o[ViewHint.INTERACTING]),d=this.renderedTiles;for(let h=0,g=d.length;h<g;++h){const _=d[h],b=_.declutterExecutorGroups[getUid(this.getLayer())];if(b)for(let j=b.length-1;j>=0;--j)b[j].execute(this.context,1,this.getTileRenderTransform(_,e),e.viewState.rotation,c,void 0,e.declutterTree)}a.globalAlpha=s}getTileRenderTransform(e,a){const s=a.pixelRatio,o=a.viewState,c=o.center,d=o.resolution,h=o.rotation,g=a.size,_=Math.round(g[0]*s),b=Math.round(g[1]*s),$=this.getLayer().getSource().getTileGridForProjection(a.viewState.projection),_e=e.tileCoord,et=$.getTileCoordExtent(e.wrappedTileCoord),tt=$.getTileCoordExtent(_e,this.tmpExtent)[0]-et[0];return multiply(scale$2(this.inversePixelTransform.slice(),1/s,1/s),this.getRenderTransform(c,d,h,s,_,b,tt))}postRender(e,a){const s=a.viewHints,o=!(s[ViewHint.ANIMATING]||s[ViewHint.INTERACTING]);this.renderedPixelToCoordinateTransform_=a.pixelToCoordinateTransform.slice(),this.renderedRotation_=a.viewState.rotation;const c=this.getLayer(),d=c.getRenderMode(),h=e.globalAlpha;e.globalAlpha=c.getOpacity();const g=VECTOR_REPLAYS[d],_=a.viewState,b=_.rotation,j=c.getSource(),_e=j.getTileGridForProjection(_.projection).getZForResolution(_.resolution,j.zDirection),et=this.renderedTiles,tt=[],it=[];let nt=!0;for(let rt=et.length-1;rt>=0;--rt){const at=et[rt];nt=nt&&!at.getReplayState(c).dirty;const st=at.executorGroups[getUid(c)].filter(ht=>ht.hasExecutors(g));if(st.length===0)continue;const ot=this.getTileRenderTransform(at,a),dt=at.tileCoord[0];let ut=!1;const ct=st[0].getClipCoords(ot);if(ct){for(let ht=0,mt=tt.length;ht<mt;++ht)if(_e!==dt&&dt<it[ht]){const pt=tt[ht];intersects$1([ct[0],ct[3],ct[4],ct[7]],[pt[0],pt[3],pt[4],pt[7]])&&(ut||(e.save(),ut=!0),e.beginPath(),e.moveTo(ct[0],ct[1]),e.lineTo(ct[2],ct[3]),e.lineTo(ct[4],ct[5]),e.lineTo(ct[6],ct[7]),e.moveTo(pt[6],pt[7]),e.lineTo(pt[4],pt[5]),e.lineTo(pt[2],pt[3]),e.lineTo(pt[0],pt[1]),e.clip())}tt.push(ct),it.push(dt)}for(let ht=0,mt=st.length;ht<mt;++ht)st[ht].execute(e,1,ot,b,o,g);ut&&e.restore()}e.globalAlpha=h,this.ready=nt,super.postRender(e,a)}renderFeature(e,a,s,o,c){if(!s)return!1;let d=!1;if(Array.isArray(s))for(let h=0,g=s.length;h<g;++h)d=renderFeature$1(o,e,s[h],a,this.boundHandleStyleImageChange_,void 0,c)||d;else d=renderFeature$1(o,e,s,a,this.boundHandleStyleImageChange_,void 0,c);return d}tileImageNeedsRender_(e){const a=this.getLayer();if(a.getRenderMode()==="vector")return!1;const s=e.getReplayState(a),o=a.getRevision(),c=e.wantedResolution;return s.renderedTileResolution!==c||s.renderedTileRevision!==o}renderTileImage_(e,a){const s=this.getLayer(),o=e.getReplayState(s),c=s.getRevision(),d=e.executorGroups[getUid(s)];o.renderedTileRevision=c;const h=e.wrappedTileCoord,g=h[0],_=s.getSource();let b=a.pixelRatio;const $=a.viewState.projection,_e=_.getTileGridForProjection($),et=_e.getResolution(e.tileCoord[0]),tt=a.pixelRatio/e.wantedResolution*et,it=_e.getResolution(g),nt=e.getContext(s);b=Math.round(Math.max(b,tt/b));const rt=_.getTilePixelSize(g,b,$);nt.canvas.width=rt[0],nt.canvas.height=rt[1];const at=b/tt;if(at!==1){const ut=reset(this.tmpTransform_);scale$2(ut,at,at),nt.setTransform.apply(nt,ut)}const st=_e.getTileCoordExtent(h,this.tmpExtent),ot=tt/it,dt=reset(this.tmpTransform_);scale$2(dt,ot,-ot),translate$1(dt,-st[0],-st[3]);for(let ut=0,ct=d.length;ut<ct;++ut)d[ut].execute(nt,at,dt,0,!0,IMAGE_REPLAYS[s.getRenderMode()]);o.renderedTileResolution=e.wantedResolution}}class VectorTileLayer extends BaseVectorLayer{constructor(e){e=e||{};const a=Object.assign({},e);delete a.preload,delete a.useInterimTilesOnError,super(a),this.on,this.once,this.un;const s=e.renderMode||"hybrid";assert(s=="hybrid"||s=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=s,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new CanvasVectorTileLayerRenderer(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(TileProperty.PRELOAD)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(TileProperty.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}}let VectorTile$1=class extends Tile{constructor(e,a,s,o,c,d){super(e,a,d),this.extent=null,this.format_=o,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=c,this.url_=s,this.key=s}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==TileState.IDLE&&(this.setState(TileState.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,a){this.setFeatures(e)}onError(){this.setState(TileState.ERROR)}setFeatures(e){this.features_=e,this.setState(TileState.LOADED)}setLoader(e){this.loader_=e}};const canvasPool=[];class VectorRenderTile extends Tile{constructor(e,a,s,o){super(e,a,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=o.bind(void 0,this),this.wrappedTileCoord=s}getContext(e){const a=getUid(e);return a in this.context_||(this.context_[a]=createCanvasContext2D(1,1,canvasPool)),this.context_[a]}hasContext(e){return getUid(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const a=getUid(e);return a in this.replayState_||(this.replayState_[a]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[a]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const a=this.context_[e];releaseCanvas(a),canvasPool.push(a.canvas),delete this.context_[e]}super.release()}}class VectorTile extends UrlTile{constructor(e){const a=e.projection||"EPSG:3857",s=e.extent||extentFromProjection(a),o=e.tileGrid||createXYZ({extent:s,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:a,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultLoadFunction,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new TileCache(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:VectorTile$1,this.tileGrids_={}}getFeaturesInExtent(e){const a=[],s=this.tileCache;if(s.getCount()===0)return a;const o=fromKey(s.peekFirstKey())[0],c=this.tileGrid;return s.forEach(function(d){if(d.tileCoord[0]!==o||d.getState()!==TileState.LOADED)return;const h=d.getSourceTiles();for(let g=0,_=h.length;g<_;++g){const b=h[g],j=b.tileCoord;if(intersects$1(e,c.getTileCoordExtent(j))){const $=b.getFeatures();if($)for(let _e=0,et=$.length;_e<et;++_e){const tt=$[_e],it=tt.getGeometry();intersects$1(e,it.getExtent())&&a.push(tt)}}}}),a}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,a){const s=this.getTileCacheForProjection(e),o=Object.keys(a).reduce((c,d)=>{const h=getCacheKeyForTileKey(d),g=s.peek(h);if(g){const _=g.sourceTiles;for(let b=0,j=_.length;b<j;++b)c[_[b].getKey()]=!0}return c},{});super.expireCache(e,a),this.sourceTileCache.expireCache(o)}getSourceTiles(e,a,s){if(s.getState()===TileState.IDLE){s.setState(TileState.LOADING);const o=s.wrappedTileCoord,c=this.getTileGridForProjection(a),d=c.getTileCoordExtent(o),h=o[0],g=c.getResolution(h);buffer(d,-g,d);const _=this.tileGrid,b=_.getExtent();b&&getIntersection(d,b,d);const j=_.getZForResolution(g,this.zDirection);_.forEachTileCoord(d,j,$=>{const _e=this.tileUrlFunction($,e,a),et=this.sourceTileCache.containsKey(_e)?this.sourceTileCache.get(_e):new this.tileClass($,_e?TileState.IDLE:TileState.EMPTY,_e,this.format_,this.tileLoadFunction);s.sourceTiles.push(et);const tt=et.getState();if(tt<TileState.LOADED){const it=nt=>{this.handleTileChange(nt);const rt=et.getState();if(rt===TileState.LOADED||rt===TileState.ERROR){const at=et.getKey();at in s.errorTileKeys?et.getState()===TileState.LOADED&&delete s.errorTileKeys[at]:s.loadingSourceTiles--,rt===TileState.ERROR?s.errorTileKeys[at]=!0:et.removeEventListener(EventType.CHANGE,it),s.loadingSourceTiles===0&&s.setState(isEmpty$1(s.errorTileKeys)?TileState.LOADED:TileState.ERROR)}};et.addEventListener(EventType.CHANGE,it),s.loadingSourceTiles++}tt===TileState.IDLE&&(et.extent=_.getTileCoordExtent($),et.projection=a,et.resolution=_.getResolution($[0]),this.sourceTileCache.set(_e,et),et.load())}),s.loadingSourceTiles||s.setState(s.sourceTiles.some($=>$.getState()===TileState.ERROR)?TileState.ERROR:TileState.LOADED)}return s.sourceTiles}getTile(e,a,s,o,c){const d=getKeyZXY(e,a,s),h=this.getKey();let g;if(this.tileCache.containsKey(d)&&(g=this.tileCache.get(d),g.key===h))return g;const _=[e,a,s];let b=this.getTileCoordForTileUrlFunction(_,c);const j=this.getTileGrid().getExtent(),$=this.getTileGridForProjection(c);if(b&&j){const tt=$.getTileCoordExtent(b);buffer(tt,-$.getResolution(e),tt),intersects$1(j,tt)||(b=null)}let _e=!0;if(b!==null){const tt=this.tileGrid,it=$.getResolution(e),nt=tt.getZForResolution(it,1),rt=$.getTileCoordExtent(b);buffer(rt,-it,rt),tt.forEachTileCoord(rt,nt,at=>{_e=_e&&!this.tileUrlFunction(at,o,c)})}const et=new VectorRenderTile(_,_e?TileState.EMPTY:TileState.IDLE,b,this.getSourceTiles.bind(this,o,c));return et.key=h,g?(et.interimTile=g,et.refreshInterimChain(),this.tileCache.replace(d,et)):this.tileCache.set(d,et),et}getTileGridForProjection(e){const a=e.getCode();let s=this.tileGrids_[a];if(!s){const o=this.tileGrid,c=o.getResolutions().slice(),d=c.map(function(_,b){return o.getOrigin(b)}),h=c.map(function(_,b){return o.getTileSize(b)}),g=DEFAULT_MAX_ZOOM+1;for(let _=c.length;_<g;++_)c.push(c[_-1]/2),d.push(d[_-1]),h.push(h[_-1]);s=new TileGrid({extent:o.getExtent(),origins:d,resolutions:c,tileSizes:h}),this.tileGrids_[a]=s}return s}getTilePixelRatio(e){return e}getTilePixelSize(e,a,s){const o=this.getTileGridForProjection(s),c=toSize(o.getTileSize(e),this.tmpSize);return[Math.round(c[0]*a),Math.round(c[1]*a)]}updateCacheSize(e,a){super.updateCacheSize(e*2,a),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(a).highWaterMark}}function defaultLoadFunction(i,e){i.setLoader(function(a,s,o){loadFeaturesXhr(e,i.getFormat(),a,s,o,i.onLoad.bind(i),i.onError.bind(i))})}function jsonp(i,e,a,s){const o=document.createElement("script"),c="olc_"+getUid(e);function d(){delete window[c],o.parentNode.removeChild(o)}o.async=!0,o.src=i+(i.includes("?")?"&":"?")+"callback="+c;const h=setTimeout(function(){d(),a&&a()},1e4);window[c]=function(g){clearTimeout(h),d(),e(g)},document.head.appendChild(o)}class TileJSON extends TileImage{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:get$3("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const a=new XMLHttpRequest;a.addEventListener("load",this.onXHRLoad_.bind(this)),a.addEventListener("error",this.onXHRError_.bind(this)),a.open("GET",e.url),a.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const a=e.target;if(!a.status||a.status>=200&&a.status<300){let s;try{s=JSON.parse(a.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(s)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const a=get$3("EPSG:4326"),s=this.getProjection();let o;if(e.bounds!==void 0){const _=getTransformFromProjections(a,s);o=applyTransform(e.bounds,_)}const c=extentFromProjection(s),d=e.minzoom||0,h=e.maxzoom||22,g=createXYZ({extent:c,maxZoom:h,minZoom:d,tileSize:this.tileSize_});if(this.tileGrid=g,this.tileUrlFunction=createFromTemplates(e.tiles,g),e.attribution&&!this.getAttributions()){const _=o!==void 0?o:c;this.setAttributions(function(b){return intersects$1(_,b.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}class FeatureFormat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Feature,this.supportedMediaTypes=null}getReadOptions(e,a){if(a){let s=a.dataProjection?get$3(a.dataProjection):this.readProjection(e);a.extent&&s&&s.getUnits()==="tile-pixels"&&(s=get$3(s),s.setWorldExtent(a.extent)),a={dataProjection:s,featureProjection:a.featureProjection}}return this.adaptOptions(a)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return abstract()}readFeature(e,a){return abstract()}readFeatures(e,a){return abstract()}readGeometry(e,a){return abstract()}readProjection(e){return abstract()}writeFeature(e,a){return abstract()}writeFeatures(e,a){return abstract()}writeGeometry(e,a){return abstract()}}function transformGeometryWithOptions(i,e,a){const s=a?get$3(a.featureProjection):null,o=a?get$3(a.dataProjection):null;let c=i;if(s&&o&&!equivalent(s,o)){e&&(c=i.clone());const d=e?s:o,h=e?o:s;d.getUnits()==="tile-pixels"?c.transform(d,h):c.applyTransform(getTransform(d,h))}if(e&&a&&a.decimals!==void 0){const d=Math.pow(10,a.decimals),h=function(g){for(let _=0,b=g.length;_<b;++_)g[_]=Math.round(g[_]*d)/d;return g};c===i&&(c=i.clone()),c.applyTransform(h)}return c}const GeometryConstructor={Point:Point$1,LineString,Polygon,MultiPoint,MultiLineString,MultiPolygon};function orientFlatCoordinates(i,e,a){return Array.isArray(e[0])?(linearRingssAreOriented(i,0,e,a)||(i=i.slice(),orientLinearRingsArray(i,0,e,a)),i):(linearRingsAreOriented(i,0,e,a)||(i=i.slice(),orientLinearRings(i,0,e,a)),i)}function createRenderFeature(i,e){var c;const a=i.geometry;if(!a)return[];if(Array.isArray(a))return a.map(d=>createRenderFeature({...i,geometry:d})).flat();const s=a.type==="MultiPolygon"?"Polygon":a.type;if(s==="GeometryCollection"||s==="Circle")throw new Error("Unsupported geometry type: "+s);const o=a.layout.length;return transformGeometryWithOptions(new RenderFeature(s,s==="Polygon"?orientFlatCoordinates(a.flatCoordinates,a.ends,o):a.flatCoordinates,(c=a.ends)==null?void 0:c.flat(),o,i.properties||{},i.id).enableSimplifyTransformed(),!1,e)}function createGeometry(i,e){if(!i)return null;if(Array.isArray(i)){const s=i.map(o=>createGeometry(o,e));return new GeometryCollection(s)}const a=GeometryConstructor[i.type];return transformGeometryWithOptions(new a(i.flatCoordinates,i.layout,i.ends),!1,e)}var ieee754$1={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754$1.read=function(i,e,a,s,o){var c,d,h=o*8-s-1,g=(1<<h)-1,_=g>>1,b=-7,j=a?o-1:0,$=a?-1:1,_e=i[e+j];for(j+=$,c=_e&(1<<-b)-1,_e>>=-b,b+=h;b>0;c=c*256+i[e+j],j+=$,b-=8);for(d=c&(1<<-b)-1,c>>=-b,b+=s;b>0;d=d*256+i[e+j],j+=$,b-=8);if(c===0)c=1-_;else{if(c===g)return d?NaN:(_e?-1:1)*(1/0);d=d+Math.pow(2,s),c=c-_}return(_e?-1:1)*d*Math.pow(2,c-s)};ieee754$1.write=function(i,e,a,s,o,c){var d,h,g,_=c*8-o-1,b=(1<<_)-1,j=b>>1,$=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,_e=s?0:c-1,et=s?1:-1,tt=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,d=b):(d=Math.floor(Math.log(e)/Math.LN2),e*(g=Math.pow(2,-d))<1&&(d--,g*=2),d+j>=1?e+=$/g:e+=$*Math.pow(2,1-j),e*g>=2&&(d++,g/=2),d+j>=b?(h=0,d=b):d+j>=1?(h=(e*g-1)*Math.pow(2,o),d=d+j):(h=e*Math.pow(2,j-1)*Math.pow(2,o),d=0));o>=8;i[a+_e]=h&255,_e+=et,h/=256,o-=8);for(d=d<<o|h,_+=o;_>0;i[a+_e]=d&255,_e+=et,d/=256,_-=8);i[a+_e-et]|=tt*128};var pbf=Pbf,ieee754=ieee754$1;function Pbf(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0;Pbf.Fixed64=1;Pbf.Bytes=2;Pbf.Fixed32=5;var SHIFT_LEFT_32=65536*65536,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,TEXT_DECODER_MIN_LENGTH=12,utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Pbf.prototype={destroy:function(){this.buf=null},readFields:function(i,e,a){for(a=a||this.length;this.pos<a;){var s=this.readVarint(),o=s>>3,c=this.pos;this.type=s&7,i(o,e,this),this.pos===c&&this.skip(s)}return e},readMessage:function(i,e){return this.readFields(i,e,this.readVarint()+this.pos)},readFixed32:function(){var i=readUInt32(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=readInt32(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,i},readSFixed64:function(){var i=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,i},readFloat:function(){var i=ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var e=this.buf,a,s;return s=e[this.pos++],a=s&127,s<128||(s=e[this.pos++],a|=(s&127)<<7,s<128)||(s=e[this.pos++],a|=(s&127)<<14,s<128)||(s=e[this.pos++],a|=(s&127)<<21,s<128)?a:(s=e[this.pos],a|=(s&15)<<28,readVarintRemainder(a,i,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2===1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,e=this.pos;return this.pos=i,i-e>=TEXT_DECODER_MIN_LENGTH&&utf8TextDecoder?readUtf8TextDecoder(this.buf,e,i):readUtf8(this.buf,e,i)},readBytes:function(){var i=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,i);return this.pos=i,e},readPackedVarint:function(i,e){if(this.type!==Pbf.Bytes)return i.push(this.readVarint(e));var a=readPackedEnd(this);for(i=i||[];this.pos<a;)i.push(this.readVarint(e));return i},readPackedSVarint:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readSVarint());var e=readPackedEnd(this);for(i=i||[];this.pos<e;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readBoolean());var e=readPackedEnd(this);for(i=i||[];this.pos<e;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readFloat());var e=readPackedEnd(this);for(i=i||[];this.pos<e;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readDouble());var e=readPackedEnd(this);for(i=i||[];this.pos<e;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readFixed32());var e=readPackedEnd(this);for(i=i||[];this.pos<e;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readSFixed32());var e=readPackedEnd(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readFixed64());var e=readPackedEnd(this);for(i=i||[];this.pos<e;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readSFixed64());var e=readPackedEnd(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed64());return i},skip:function(i){var e=i&7;if(e===Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(e===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Pbf.Fixed32)this.pos+=4;else if(e===Pbf.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(i,e){this.writeVarint(i<<3|e)},realloc:function(i){for(var e=this.length||16;e<this.pos+i;)e*=2;if(e!==this.length){var a=new Uint8Array(e);a.set(this.buf),this.buf=a,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),writeInt32(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),writeInt32(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),writeInt32(this.buf,i&-1,this.pos),writeInt32(this.buf,Math.floor(i*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),writeInt32(this.buf,i&-1,this.pos),writeInt32(this.buf,Math.floor(i*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(i){if(i=+i||0,i>268435455||i<0){writeBigVarint(i,this);return}this.realloc(4),this.buf[this.pos++]=i&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=i>>>7&127)))},writeSVarint:function(i){this.writeVarint(i<0?-i*2-1:i*2)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(i.length*4),this.pos++;var e=this.pos;this.pos=writeUtf8(this.buf,i,this.pos);var a=this.pos-e;a>=128&&makeRoomForExtraLength(e,a,this),this.pos=e-1,this.writeVarint(a),this.pos+=a},writeFloat:function(i){this.realloc(4),ieee754.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),ieee754.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var e=i.length;this.writeVarint(e),this.realloc(e);for(var a=0;a<e;a++)this.buf[this.pos++]=i[a]},writeRawMessage:function(i,e){this.pos++;var a=this.pos;i(e,this);var s=this.pos-a;s>=128&&makeRoomForExtraLength(a,s,this),this.pos=a-1,this.writeVarint(s),this.pos+=s},writeMessage:function(i,e,a){this.writeTag(i,Pbf.Bytes),this.writeRawMessage(e,a)},writePackedVarint:function(i,e){e.length&&this.writeMessage(i,writePackedVarint,e)},writePackedSVarint:function(i,e){e.length&&this.writeMessage(i,writePackedSVarint,e)},writePackedBoolean:function(i,e){e.length&&this.writeMessage(i,writePackedBoolean,e)},writePackedFloat:function(i,e){e.length&&this.writeMessage(i,writePackedFloat,e)},writePackedDouble:function(i,e){e.length&&this.writeMessage(i,writePackedDouble,e)},writePackedFixed32:function(i,e){e.length&&this.writeMessage(i,writePackedFixed32,e)},writePackedSFixed32:function(i,e){e.length&&this.writeMessage(i,writePackedSFixed32,e)},writePackedFixed64:function(i,e){e.length&&this.writeMessage(i,writePackedFixed64,e)},writePackedSFixed64:function(i,e){e.length&&this.writeMessage(i,writePackedSFixed64,e)},writeBytesField:function(i,e){this.writeTag(i,Pbf.Bytes),this.writeBytes(e)},writeFixed32Field:function(i,e){this.writeTag(i,Pbf.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(i,e){this.writeTag(i,Pbf.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(i,e){this.writeTag(i,Pbf.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(i,e){this.writeTag(i,Pbf.Fixed64),this.writeSFixed64(e)},writeVarintField:function(i,e){this.writeTag(i,Pbf.Varint),this.writeVarint(e)},writeSVarintField:function(i,e){this.writeTag(i,Pbf.Varint),this.writeSVarint(e)},writeStringField:function(i,e){this.writeTag(i,Pbf.Bytes),this.writeString(e)},writeFloatField:function(i,e){this.writeTag(i,Pbf.Fixed32),this.writeFloat(e)},writeDoubleField:function(i,e){this.writeTag(i,Pbf.Fixed64),this.writeDouble(e)},writeBooleanField:function(i,e){this.writeVarintField(i,!!e)}};function readVarintRemainder(i,e,a){var s=a.buf,o,c;if(c=s[a.pos++],o=(c&112)>>4,c<128||(c=s[a.pos++],o|=(c&127)<<3,c<128)||(c=s[a.pos++],o|=(c&127)<<10,c<128)||(c=s[a.pos++],o|=(c&127)<<17,c<128)||(c=s[a.pos++],o|=(c&127)<<24,c<128)||(c=s[a.pos++],o|=(c&1)<<31,c<128))return toNum(i,o,e);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(i){return i.type===Pbf.Bytes?i.readVarint()+i.pos:i.pos+1}function toNum(i,e,a){return a?e*4294967296+(i>>>0):(e>>>0)*4294967296+(i>>>0)}function writeBigVarint(i,e){var a,s;if(i>=0?(a=i%4294967296|0,s=i/4294967296|0):(a=~(-i%4294967296),s=~(-i/4294967296),a^4294967295?a=a+1|0:(a=0,s=s+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),writeBigVarintLow(a,s,e),writeBigVarintHigh(s,e)}function writeBigVarintLow(i,e,a){a.buf[a.pos++]=i&127|128,i>>>=7,a.buf[a.pos++]=i&127|128,i>>>=7,a.buf[a.pos++]=i&127|128,i>>>=7,a.buf[a.pos++]=i&127|128,i>>>=7,a.buf[a.pos]=i&127}function writeBigVarintHigh(i,e){var a=(i&7)<<4;e.buf[e.pos++]|=a|((i>>>=3)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127)))))}function makeRoomForExtraLength(i,e,a){var s=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));a.realloc(s);for(var o=a.pos-1;o>=i;o--)a.buf[o+s]=a.buf[o]}function writePackedVarint(i,e){for(var a=0;a<i.length;a++)e.writeVarint(i[a])}function writePackedSVarint(i,e){for(var a=0;a<i.length;a++)e.writeSVarint(i[a])}function writePackedFloat(i,e){for(var a=0;a<i.length;a++)e.writeFloat(i[a])}function writePackedDouble(i,e){for(var a=0;a<i.length;a++)e.writeDouble(i[a])}function writePackedBoolean(i,e){for(var a=0;a<i.length;a++)e.writeBoolean(i[a])}function writePackedFixed32(i,e){for(var a=0;a<i.length;a++)e.writeFixed32(i[a])}function writePackedSFixed32(i,e){for(var a=0;a<i.length;a++)e.writeSFixed32(i[a])}function writePackedFixed64(i,e){for(var a=0;a<i.length;a++)e.writeFixed64(i[a])}function writePackedSFixed64(i,e){for(var a=0;a<i.length;a++)e.writeSFixed64(i[a])}function readUInt32(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+i[e+3]*16777216}function writeInt32(i,e,a){i[a]=e,i[a+1]=e>>>8,i[a+2]=e>>>16,i[a+3]=e>>>24}function readInt32(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+(i[e+3]<<24)}function readUtf8(i,e,a){for(var s="",o=e;o<a;){var c=i[o],d=null,h=c>239?4:c>223?3:c>191?2:1;if(o+h>a)break;var g,_,b;h===1?c<128&&(d=c):h===2?(g=i[o+1],(g&192)===128&&(d=(c&31)<<6|g&63,d<=127&&(d=null))):h===3?(g=i[o+1],_=i[o+2],(g&192)===128&&(_&192)===128&&(d=(c&15)<<12|(g&63)<<6|_&63,(d<=2047||d>=55296&&d<=57343)&&(d=null))):h===4&&(g=i[o+1],_=i[o+2],b=i[o+3],(g&192)===128&&(_&192)===128&&(b&192)===128&&(d=(c&15)<<18|(g&63)<<12|(_&63)<<6|b&63,(d<=65535||d>=1114112)&&(d=null))),d===null?(d=65533,h=1):d>65535&&(d-=65536,s+=String.fromCharCode(d>>>10&1023|55296),d=56320|d&1023),s+=String.fromCharCode(d),o+=h}return s}function readUtf8TextDecoder(i,e,a){return utf8TextDecoder.decode(i.subarray(e,a))}function writeUtf8(i,e,a){for(var s=0,o,c;s<e.length;s++){if(o=e.charCodeAt(s),o>55295&&o<57344)if(c)if(o<56320){i[a++]=239,i[a++]=191,i[a++]=189,c=o;continue}else o=c-55296<<10|o-56320|65536,c=null;else{o>56319||s+1===e.length?(i[a++]=239,i[a++]=191,i[a++]=189):c=o;continue}else c&&(i[a++]=239,i[a++]=191,i[a++]=189,c=null);o<128?i[a++]=o:(o<2048?i[a++]=o>>6|192:(o<65536?i[a++]=o>>12|224:(i[a++]=o>>18|240,i[a++]=o>>12&63|128),i[a++]=o>>6&63|128),i[a++]=o&63|128)}return a}const PBF=getDefaultExportFromCjs$1(pbf);class MVT extends FeatureFormat{constructor(e){super(),e=e||{},this.dataProjection=new Projection$1({code:"",units:"tile-pixels"}),this.featureClass_=e.featureClass?e.featureClass:RenderFeature,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,a,s,o){e.pos=a.geometry;const c=e.readVarint()+e.pos;let d=1,h=0,g=0,_=0,b=0,j=0;for(;e.pos<c;){if(!h){const $=e.readVarint();d=$&7,h=$>>3}if(h--,d===1||d===2)g+=e.readSVarint(),_+=e.readSVarint(),d===1&&b>j&&(o.push(b),j=b),s.push(g,_),b+=2;else if(d===7)b>j&&(s.push(s[j],s[j+1]),b+=2);else throw new Error("Invalid command found in the PBF")}b>j&&(o.push(b),j=b)}createFeature_(e,a,s){const o=a.type;if(o===0)return null;let c;const d=a.properties;let h;this.idProperty_?(h=d[this.idProperty_],delete d[this.idProperty_]):h=a.id,d[this.layerName_]=a.layer.name;const g=[],_=[];this.readRawGeometry_(e,a,g,_);const b=getGeometryType(o,_.length);if(this.featureClass_===RenderFeature)c=new this.featureClass_(b,g,_,2,d,h),c.transform(s.dataProjection);else{let j;if(b=="Polygon"){const et=inflateEnds(g,_);j=et.length>1?new MultiPolygon(g,"XY",et):new Polygon(g,"XY",_)}else j=b==="Point"?new Point$1(g,"XY"):b==="LineString"?new LineString(g,"XY"):b==="MultiPoint"?new MultiPoint(g,"XY"):b==="MultiLineString"?new MultiLineString(g,"XY",_):null;const $=this.featureClass_;c=new $,this.geometryName_&&c.setGeometryName(this.geometryName_);const _e=transformGeometryWithOptions(j,!1,s);c.setGeometry(_e),h!==void 0&&c.setId(h),c.setProperties(d,!0)}return c}getType(){return"arraybuffer"}readFeatures(e,a){const s=this.layers_;a=this.adaptOptions(a);const o=get$3(a.dataProjection);o.setWorldExtent(a.extent),a.dataProjection=o;const c=new PBF(e),d=c.readFields(layersPBFReader,{}),h=[];for(const g in d){if(s&&!s.includes(g))continue;const _=d[g],b=_?[0,0,_.extent,_.extent]:null;o.setExtent(b);for(let j=0,$=_.length;j<$;++j){const _e=readRawFeature(c,_,j),et=this.createFeature_(c,_e,a);et!==null&&h.push(et)}}return h}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function layersPBFReader(i,e,a){if(i===3){const s={keys:[],values:[],features:[]},o=a.readVarint()+a.pos;a.readFields(layerPBFReader,s,o),s.length=s.features.length,s.length&&(e[s.name]=s)}}function layerPBFReader(i,e,a){if(i===15)e.version=a.readVarint();else if(i===1)e.name=a.readString();else if(i===5)e.extent=a.readVarint();else if(i===2)e.features.push(a.pos);else if(i===3)e.keys.push(a.readString());else if(i===4){let s=null;const o=a.readVarint()+a.pos;for(;a.pos<o;)i=a.readVarint()>>3,s=i===1?a.readString():i===2?a.readFloat():i===3?a.readDouble():i===4?a.readVarint64():i===5?a.readVarint():i===6?a.readSVarint():i===7?a.readBoolean():null;e.values.push(s)}}function featurePBFReader(i,e,a){if(i==1)e.id=a.readVarint();else if(i==2){const s=a.readVarint()+a.pos;for(;a.pos<s;){const o=e.layer.keys[a.readVarint()],c=e.layer.values[a.readVarint()];e.properties[o]=c}}else i==3?e.type=a.readVarint():i==4&&(e.geometry=a.pos)}function readRawFeature(i,e,a){i.pos=e.features[a];const s=i.readVarint()+i.pos,o={layer:e,type:0,properties:{}};return i.readFields(featurePBFReader,o,s),o}function getGeometryType(i,e){let a;return i===1?a=e===1?"Point":"MultiPoint":i===2?a=e===1?"LineString":"MultiLineString":i===3&&(a="Polygon"),a}class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,a){abstract()}calculateMatrices2D(e){const a=e.viewState,s=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;compose(s,e.size[0]/2,e.size[1]/2,1/a.resolution,-1/a.resolution,-a.rotation,-a.center[0],-a.center[1]),makeInverse(o,s)}forEachFeatureAtCoordinate(e,a,s,o,c,d,h,g){let _;const b=a.viewState;function j(st,ot,dt,ut){return c.call(d,ot,st?dt:null,ut)}const $=b.projection,_e=wrapX$1(e.slice(),$),et=[[0,0]];if($.canWrapX()&&o){const st=$.getExtent(),ot=getWidth(st);et.push([-ot,0],[ot,0])}const tt=a.layerStatesArray,it=tt.length,nt=[],rt=[];for(let st=0;st<et.length;st++)for(let ot=it-1;ot>=0;--ot){const dt=tt[ot],ut=dt.layer;if(ut.hasRenderer()&&inView(dt,b)&&h.call(g,ut)){const ct=ut.getRenderer(),ht=ut.getSource();if(ct&&ht){const mt=ht.getWrapX()?_e:e,pt=j.bind(null,dt.managed);rt[0]=mt[0]+et[st][0],rt[1]=mt[1]+et[st][1],_=ct.forEachFeatureAtCoordinate(rt,a,s,pt,nt)}if(_)return _}}if(nt.length===0)return;const at=1/nt.length;return nt.forEach((st,ot)=>st.distanceSq+=ot*at),nt.sort((st,ot)=>st.distanceSq-ot.distanceSq),nt.some(st=>_=st.callback(st.feature,st.layer,st.geometry)),_}hasFeatureAtCoordinate(e,a,s,o,c,d){return this.forEachFeatureAtCoordinate(e,a,s,o,TRUE,this,c,d)!==void 0}getMap(){return this.map_}renderFrame(e){abstract()}flushDeclutterItems(e){}scheduleExpireIconCache(e){shared.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(i,e){shared.expire()}class CompositeMapRenderer extends MapRenderer{constructor(e){super(e),this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const a=this.element_.style;a.position="absolute",a.width="100%",a.height="100%",a.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const s=e.getViewport();s.insertBefore(this.element_,s.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(e,a){const s=this.getMap();if(s.hasListener(e)){const o=new RenderEvent(e,void 0,a);s.dispatchEvent(o)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,e);const a=e.layerStatesArray.sort(function(d,h){return d.zIndex-h.zIndex}),s=e.viewState;this.children_.length=0;const o=this.declutterLayers_;o.length=0;let c=null;for(let d=0,h=a.length;d<h;++d){const g=a[d];e.layerIndex=d;const _=g.layer,b=_.getSourceState();if(!inView(g,s)||b!="ready"&&b!="undefined"){_.unrender();continue}const j=_.render(e,c);j&&(j!==c&&(this.children_.push(j),c=j),"getDeclutter"in _&&o.push(_))}this.flushDeclutterItems(e),replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}flushDeclutterItems(e){const a=this.declutterLayers_;for(let s=a.length-1;s>=0;--s)a[s].renderDeclutter(e);a.length=0}}class GroupEvent extends BaseEvent{constructor(e,a){super(e),this.layer=a}}const Property={LAYERS:"layers"};class LayerGroup extends BaseLayer{constructor(e){e=e||{};const a=Object.assign({},e);delete a.layers;let s=e.layers;super(a),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property.LAYERS,this.handleLayersChanged_),s?Array.isArray(s)?s=new Collection(s.slice(),{unique:!0}):assert(typeof s.getArray=="function","Expected `layers` to be an array or a `Collection`"):s=new Collection(void 0,{unique:!0}),this.setLayers(s)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const s in this.listenerKeys_)this.listenerKeys_[s].forEach(unlistenByKey);clear$1(this.listenerKeys_);const a=e.getArray();for(let s=0,o=a.length;s<o;s++){const c=a[s];this.registerLayerListeners_(c),this.dispatchEvent(new GroupEvent("addlayer",c))}this.changed()}registerLayerListeners_(e){const a=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType.CHANGE,this.handleLayerChange_,this)];e instanceof LayerGroup&&a.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=a}handleLayerGroupAdd_(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))}handleLayersAdd_(e){const a=e.element;this.registerLayerListeners_(a),this.dispatchEvent(new GroupEvent("addlayer",a)),this.changed()}handleLayersRemove_(e){const a=e.element,s=getUid(a);this.listenerKeys_[s].forEach(unlistenByKey),delete this.listenerKeys_[s],this.dispatchEvent(new GroupEvent("removelayer",a)),this.changed()}getLayers(){return this.get(Property.LAYERS)}setLayers(e){const a=this.getLayers();if(a){const s=a.getArray();for(let o=0,c=s.length;o<c;++o)this.dispatchEvent(new GroupEvent("removelayer",s[o]))}this.set(Property.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(a){a.getLayersArray(e)}),e}getLayerStatesArray(e){const a=e!==void 0?e:[],s=a.length;this.getLayers().forEach(function(d){d.getLayerStatesArray(a)});const o=this.getLayerState();let c=o.zIndex;!e&&o.zIndex===void 0&&(c=0);for(let d=s,h=a.length;d<h;d++){const g=a[d];g.opacity*=o.opacity,g.visible=g.visible&&o.visible,g.maxResolution=Math.min(g.maxResolution,o.maxResolution),g.minResolution=Math.max(g.minResolution,o.minResolution),g.minZoom=Math.max(g.minZoom,o.minZoom),g.maxZoom=Math.min(g.maxZoom,o.maxZoom),o.extent!==void 0&&(g.extent!==void 0?g.extent=getIntersection(g.extent,o.extent):g.extent=o.extent),g.zIndex===void 0&&(g.zIndex=c)}return a}getSourceState(){return"ready"}}const PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class MapBrowserEventHandler extends Target{constructor(e,a){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=a===void 0?1:a,this.down_=null;const s=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=s,this.pointerdownListenerKey_=listen(s,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(s,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(e){let a=new MapBrowserEvent(MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(a),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,a=new MapBrowserEvent(MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(a)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const s=new MapBrowserEvent(MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(s)},250)}updateActivePointers_(e){const a=e,s=a.pointerId;if(a.type==MapBrowserEventType.POINTERUP||a.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[s];for(const o in this.trackedTouches_)if(this.trackedTouches_[o].target!==a.target){delete this.trackedTouches_[o];break}}else(a.type==MapBrowserEventType.POINTERDOWN||a.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[s]=a);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const a=new MapBrowserEvent(MapBrowserEventType.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(a),this.emulateClicks_&&!a.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const a=new MapBrowserEvent(MapBrowserEventType.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(a),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const s=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(s,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(s,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==s&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const a=new MapBrowserEvent(MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(a)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const a=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,this.map_,e,a))}handleTouchMove_(e){const a=this.originalPointerMoveEvent_;(!a||a.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},DROP=1/0;class PriorityQueue{constructor(e,a){this.priorityFunction_=e,this.keyFunction_=a,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear$1(this.queuedElements_)}dequeue(){const e=this.elements_,a=this.priorities_,s=e[0];e.length==1?(e.length=0,a.length=0):(e[0]=e.pop(),a[0]=a.pop(),this.siftUp_(0));const o=this.keyFunction_(s);return delete this.queuedElements_[o],s}enqueue(e){assert(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const a=this.priorityFunction_(e);return a!=DROP?(this.elements_.push(e),this.priorities_.push(a),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const a=this.elements_,s=this.priorities_,o=a.length,c=a[e],d=s[e],h=e;for(;e<o>>1;){const g=this.getLeftChildIndex_(e),_=this.getRightChildIndex_(e),b=_<o&&s[_]<s[g]?_:g;a[e]=a[b],s[e]=s[b],e=b}a[e]=c,s[e]=d,this.siftDown_(h,e)}siftDown_(e,a){const s=this.elements_,o=this.priorities_,c=s[a],d=o[a];for(;a>e;){const h=this.getParentIndex_(a);if(o[h]>d)s[a]=s[h],o[a]=o[h],a=h;else break}s[a]=c,o[a]=d}reprioritize(){const e=this.priorityFunction_,a=this.elements_,s=this.priorities_;let o=0;const c=a.length;let d,h,g;for(h=0;h<c;++h)d=a[h],g=e(d),g==DROP?delete this.queuedElements_[this.keyFunction_(d)]:(s[o]=g,a[o++]=d);a.length=o,s.length=o,this.heapify_()}}class TileQueue extends PriorityQueue{constructor(e,a){super(function(s){return e.apply(null,s)},function(s){return s[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=a,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const a=super.enqueue(e);return a&&e[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_),a}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const a=e.target,s=a.getState();if(s===TileState.LOADED||s===TileState.ERROR||s===TileState.EMPTY){s!==TileState.ERROR&&a.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);const o=a.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,a){let s=0,o,c,d;for(;this.tilesLoading_<e&&s<a&&this.getCount()>0;)c=this.dequeue()[0],d=c.getKey(),o=c.getState(),o===TileState.IDLE&&!(d in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[d]=!0,++this.tilesLoading_,++s,c.load())}}function getTilePriority(i,e,a,s,o){if(!i||!(a in i.wantedTiles)||!i.wantedTiles[a][e.getKey()])return DROP;const c=i.viewState.center,d=s[0]-c[0],h=s[1]-c[1];return 65536*Math.log(o)+Math.sqrt(d*d+h*h)/o}class Attribution extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const a=e.className!==void 0?e.className:"ol-attribution",s=e.tipLabel!==void 0?e.tipLabel:"Attributions",o=e.expandClassName!==void 0?e.expandClassName:a+"-expand",c=e.collapseLabel!==void 0?e.collapseLabel:"›",d=e.collapseClassName!==void 0?e.collapseClassName:a+"-collapse";typeof c=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=c,this.collapseLabel_.className=d):this.collapseLabel_=c;const h=e.label!==void 0?e.label:"i";typeof h=="string"?(this.label_=document.createElement("span"),this.label_.textContent=h,this.label_.className=o):this.label_=h;const g=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=s,this.toggleButton_.appendChild(g),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const _=a+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),b=this.element;b.className=_,b.appendChild(this.toggleButton_),b.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const a=Array.from(new Set(this.getMap().getAllLayers().flatMap(o=>o.getAttributions(e)))),s=!this.getMap().getAllLayers().some(o=>o.getSource()&&o.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(s),a}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const a=this.collectSourceAttributions_(e),s=a.length>0;if(this.renderedVisible_!=s&&(this.element.style.display=s?"":"none",this.renderedVisible_=s),!equals$2(a,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let o=0,c=a.length;o<c;++o){const d=document.createElement("li");d.innerHTML=a[o],this.ulElement_.appendChild(d)}this.renderedAttributions_=a}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Rotate extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const a=e.className!==void 0?e.className:"ol-rotate",s=e.label!==void 0?e.label:"⇧",o=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof s=="string"?(this.label_=document.createElement("span"),this.label_.className=o,this.label_.textContent=s):(this.label_=s,this.label_.classList.add(o));const c=e.tipLabel?e.tipLabel:"Reset rotation",d=document.createElement("button");d.className=a+"-reset",d.setAttribute("type","button"),d.title=c,d.appendChild(this.label_),d.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const h=a+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,g=this.element;g.className=h,g.appendChild(d),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const a=this.getMap().getView();if(!a)return;const s=a.getRotation();s!==void 0&&(this.duration_>0&&s%(2*Math.PI)!==0?a.animate({rotation:0,duration:this.duration_,easing:easeOut}):a.setRotation(0))}render(e){const a=e.frameState;if(!a)return;const s=a.viewState.rotation;if(s!=this.rotation_){const o="rotate("+s+"rad)";if(this.autoHide_){const c=this.element.classList.contains(CLASS_HIDDEN);!c&&s===0?this.element.classList.add(CLASS_HIDDEN):c&&s!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=o}this.rotation_=s}}class Zoom extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const a=e.className!==void 0?e.className:"ol-zoom",s=e.delta!==void 0?e.delta:1,o=e.zoomInClassName!==void 0?e.zoomInClassName:a+"-in",c=e.zoomOutClassName!==void 0?e.zoomOutClassName:a+"-out",d=e.zoomInLabel!==void 0?e.zoomInLabel:"+",h=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",g=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",_=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",b=document.createElement("button");b.className=o,b.setAttribute("type","button"),b.title=g,b.appendChild(typeof d=="string"?document.createTextNode(d):d),b.addEventListener(EventType.CLICK,this.handleClick_.bind(this,s),!1);const j=document.createElement("button");j.className=c,j.setAttribute("type","button"),j.title=_,j.appendChild(typeof h=="string"?document.createTextNode(h):h),j.addEventListener(EventType.CLICK,this.handleClick_.bind(this,-s),!1);const $=a+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,_e=this.element;_e.className=$,_e.appendChild(b),_e.appendChild(j),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,a){a.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const s=this.getMap().getView();if(!s)return;const o=s.getZoom();if(o!==void 0){const c=s.getConstrainedZoom(o+e);this.duration_>0?(s.getAnimating()&&s.cancelAnimations(),s.animate({zoom:c,duration:this.duration_,easing:easeOut})):s.setZoom(c)}}}function defaults(i){i=i||{};const e=new Collection;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new Zoom(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new Rotate(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new Attribution(i.attributionOptions)),e}function removeLayerMapProperty(i){if(i instanceof Layer){i.setMapInternal(null);return}i instanceof LayerGroup&&i.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(i,e){if(i instanceof Layer){i.setMapInternal(e);return}if(i instanceof LayerGroup){const a=i.getLayers().getArray();for(let s=0,o=a.length;s<o;++s)setLayerMapProperty(a[s],e)}}let Map$1=class extends BaseObject{constructor(e){super(),e=e||{},this.on,this.once,this.un;const a=createOptionsInternal(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create(),this.pixelToCoordinateTransform_=create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=a.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=a.controls||defaults(),this.interactions=a.interactions||defaults$1({onFocusOnly:!0}),this.overlays_=a.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(a.values);const s=this;e.view&&!(e.view instanceof View)&&e.view.then(function(o){s.setView(new View(o))}),this.controls.addEventListener(CollectionEventType.ADD,o=>{o.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.REMOVE,o=>{o.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.ADD,o=>{o.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.REMOVE,o=>{o.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.ADD,o=>{this.addOverlayInternal_(o.element)}),this.overlays_.addEventListener(CollectionEventType.REMOVE,o=>{const c=o.element.getId();c!==void 0&&delete this.overlayIdIndex_[c.toString()],o.element.setMap(null)}),this.controls.forEach(o=>{o.setMap(this)}),this.interactions.forEach(o=>{o.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){setLayerMapProperty(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const a=e.getId();a!==void 0&&(this.overlayIdIndex_[a.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,a,s){if(!this.frameState_||!this.renderer_)return;const o=this.getCoordinateFromPixelInternal(e);s=s!==void 0?s:{};const c=s.hitTolerance!==void 0?s.hitTolerance:0,d=s.layerFilter!==void 0?s.layerFilter:TRUE,h=s.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,c,h,a,null,d,null)}getFeaturesAtPixel(e,a){const s=[];return this.forEachFeatureAtPixel(e,function(o){s.push(o)},a),s}getAllLayers(){const e=[];function a(s){s.forEach(function(o){o instanceof LayerGroup?a(o.getLayers()):e.push(o)})}return a(this.getLayers()),e}hasFeatureAtPixel(e,a){if(!this.frameState_||!this.renderer_)return!1;const s=this.getCoordinateFromPixelInternal(e);a=a!==void 0?a:{};const o=a.layerFilter!==void 0?a.layerFilter:TRUE,c=a.hitTolerance!==void 0?a.hitTolerance:0,d=a.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(s,this.frameState_,c,d,o,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const s=this.viewport_.getBoundingClientRect(),o=this.getSize(),c=s.width/o[0],d=s.height/o[1],h="changedTouches"in e?e.changedTouches[0]:e;return[(h.clientX-s.left)/c,(h.clientY-s.top)/d]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const a=this.frameState_;return a?apply(a.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const a=this.overlayIdIndex_[e.toString()];return a!==void 0?a:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(e){const a=this.getLayerGroup();if(e instanceof Collection){a.setLayers(e);return}const s=a.getLayers();s.clear(),s.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let a=0,s=e.length;a<s;++a){const o=e[a];if(!o.visible)continue;const c=o.layer.getRenderer();if(c&&!c.ready)return!0;const d=o.layer.getSource();if(d&&d.loading)return!0}return!1}getPixelFromCoordinate(e){const a=fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(a)}getPixelFromCoordinateInternal(e){const a=this.frameState_;return a?apply(a.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,a,s,o){return getTilePriority(this.frameState_,e,a,s,o)}handleBrowserEvent(e,a){a=a||e.type;const s=new MapBrowserEvent(a,this,e);this.handleMapBrowserEvent(s)}handleMapBrowserEvent(e){if(!this.frameState_)return;const a=e.originalEvent,s=a.type;if(s===PointerEventType.POINTERDOWN||s===EventType.WHEEL||s===EventType.KEYDOWN){const o=this.getOwnerDocument(),c=this.viewport_.getRootNode?this.viewport_.getRootNode():o,d=a.target;if(this.overlayContainerStopEvent_.contains(d)||!(c===o?o.documentElement:c).contains(d))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const o=this.getInteractions().getArray().slice();for(let c=o.length-1;c>=0;c--){const d=o[c];if(d.getMap()!==this||!d.getActive()||!this.getTargetElement())continue;if(!d.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,a=this.tileQueue_;if(!a.isEmpty()){let o=this.maxTilesLoading_,c=o;if(e){const d=e.viewHints;if(d[ViewHint.ANIMATING]||d[ViewHint.INTERACTING]){const h=Date.now()-e.time>8;o=h?0:8,c=h?0:2}}a.getTilesLoading()<o&&(a.reprioritize(),a.loadMoreTiles(o,c))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(RenderEventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent(MapEventType.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent(MapEventType.LOADSTART,this,e))));const s=this.postRenderFunctions_;for(let o=0,c=s.length;o<c;++o)s[o](this,e);s.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let s=0,o=this.targetChangeHandlerKeys_.length;s<o;++s)unlistenByKey(this.targetChangeHandlerKeys_[s]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,removeNode(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const s=this.targetElement_.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.unobserve(s.host),this.setSize(void 0)}const e=this.getTarget(),a=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=a,!a)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{a.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler(this,this.moveTolerance_);for(const c in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[c],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);const s=this.keyboardEventTarget_?this.keyboardEventTarget_:a;this.targetChangeHandlerKeys_=[listen(s,EventType.KEYDOWN,this.handleBrowserEvent,this),listen(s,EventType.KEYPRESS,this.handleBrowserEvent,this)];const o=a.getRootNode();o instanceof ShadowRoot&&this.resizeObserver_.observe(o.host),this.resizeObserver_.observe(a)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=listen(e,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(e,EventType.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[listen(e,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(e,EventType.CHANGE,this.render,this),listen(e,"addlayer",this.handleLayerAdd_,this),listen(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let a=0,s=e.length;a<s;++a){const o=e[a].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){removeLayerMapProperty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const a=this.getSize(),s=this.getView(),o=this.frameState_;let c=null;if(a!==void 0&&hasArea(a)&&s&&s.isDef()){const d=s.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=s.getState();if(c={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:getForViewAndSize(h.center,h.resolution,h.rotation,a),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:a,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:h,viewHints:d,wantedTiles:{},mapId:getUid(this),renderTargets:{}},h.nextCenter&&h.nextResolution){const g=isNaN(h.nextRotation)?h.rotation:h.nextRotation;c.nextExtent=getForViewAndSize(h.nextCenter,h.nextResolution,g,a)}}this.frameState_=c,this.renderer_.renderFrame(c),c&&(c.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,c.postRenderFunctions),o&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(c.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent(MapEventType.MOVESTART,this,o)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!c.viewHints[ViewHint.ANIMATING]&&!c.viewHints[ViewHint.INTERACTING]&&!equals$1(c.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent(MapEventType.MOVEEND,this,c)),clone$1(c.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER,this,c)),this.renderComplete_=this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(RenderEventType.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const a=this.getLayerGroup();a&&this.handleLayerRemove_(new GroupEvent("removelayer",a)),this.set(MapProperty.LAYERGROUP,e)}setSize(e){this.set(MapProperty.SIZE,e)}setTarget(e){this.set(MapProperty.TARGET,e)}setView(e){if(!e||e instanceof View){this.set(MapProperty.VIEW,e);return}this.set(MapProperty.VIEW,new View);const a=this;e.then(function(s){a.setView(new View(s))})}updateSize(){const e=this.getTargetElement();let a;if(e){const o=getComputedStyle(e),c=e.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),d=e.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth);!isNaN(c)&&!isNaN(d)&&(a=[c,d],!hasArea(a)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&warn("No map visible because the map container's width or height are 0."))}const s=this.getSize();a&&(!s||!equals$2(a,s))&&(this.setSize(a),this.updateViewportSize_(a))}updateViewportSize_(e){const a=this.getView();a&&a.setViewportSize(e)}};function createOptionsInternal(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const a={},s=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new LayerGroup({layers:i.layers});a[MapProperty.LAYERGROUP]=s,a[MapProperty.TARGET]=i.target,a[MapProperty.VIEW]=i.view instanceof View?i.view:new View;let o;i.controls!==void 0&&(Array.isArray(i.controls)?o=new Collection(i.controls.slice()):(assert(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),o=i.controls));let c;i.interactions!==void 0&&(Array.isArray(i.interactions)?c=new Collection(i.interactions.slice()):(assert(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),c=i.interactions));let d;return i.overlays!==void 0?Array.isArray(i.overlays)?d=new Collection(i.overlays.slice()):(assert(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),d=i.overlays):d=new Collection,{controls:o,interactions:c,keyboardEventTarget:e,overlays:d,values:a}}class JSONFeature extends FeatureFormat{constructor(){super()}getType(){return"json"}readFeature(e,a){return this.readFeatureFromObject(getObject(e),this.getReadOptions(e,a))}readFeatures(e,a){return this.readFeaturesFromObject(getObject(e),this.getReadOptions(e,a))}readFeatureFromObject(e,a){return abstract()}readFeaturesFromObject(e,a){return abstract()}readGeometry(e,a){return this.readGeometryFromObject(getObject(e),this.getReadOptions(e,a))}readGeometryFromObject(e,a){return abstract()}readProjection(e){return this.readProjectionFromObject(getObject(e))}readProjectionFromObject(e){return abstract()}writeFeature(e,a){return JSON.stringify(this.writeFeatureObject(e,a))}writeFeatureObject(e,a){return abstract()}writeFeatures(e,a){return JSON.stringify(this.writeFeaturesObject(e,a))}writeFeaturesObject(e,a){return abstract()}writeGeometry(e,a){return JSON.stringify(this.writeGeometryObject(e,a))}writeGeometryObject(e,a){return abstract()}}function getObject(i){if(typeof i=="string"){const e=JSON.parse(i);return e||null}return i!==null?i:null}class GeoJSON extends JSONFeature{constructor(e){e=e||{},super(),this.dataProjection=get$3(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=get$3(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,a){let s=null;e.type==="Feature"?s=e:s={type:"Feature",geometry:e,properties:null};const o=readGeometryInternal(s.geometry);if(this.featureClass===RenderFeature)return createRenderFeature({geometry:o,id:s.id,properties:s.properties},a);const c=new Feature;return this.geometryName_?c.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in s!==void 0&&c.setGeometryName(s.geometry_name),c.setGeometry(createGeometry(o,a)),"id"in s&&c.setId(s.id),s.properties&&c.setProperties(s.properties,!0),c}readFeaturesFromObject(e,a){const s=e;let o=null;if(s.type==="FeatureCollection"){const c=e;o=[];const d=c.features;for(let h=0,g=d.length;h<g;++h){const _=this.readFeatureFromObject(d[h],a);_&&o.push(_)}}else o=[this.readFeatureFromObject(e,a)];return o.flat()}readGeometryFromObject(e,a){return readGeometry(e,a)}readProjectionFromObject(e){const a=e.crs;let s;if(a)if(a.type=="name")s=get$3(a.properties.name);else if(a.type==="EPSG")s=get$3("EPSG:"+a.properties.code);else throw new Error("Unknown SRS type");else s=this.dataProjection;return s}writeFeatureObject(e,a){a=this.adaptOptions(a);const s={type:"Feature",geometry:null,properties:null},o=e.getId();if(o!==void 0&&(s.id=o),!e.hasProperties())return s;const c=e.getProperties(),d=e.getGeometry();return d&&(s.geometry=writeGeometry(d,a),delete c[e.getGeometryName()]),isEmpty$1(c)||(s.properties=c),s}writeFeaturesObject(e,a){a=this.adaptOptions(a);const s=[];for(let o=0,c=e.length;o<c;++o)s.push(this.writeFeatureObject(e[o],a));return{type:"FeatureCollection",features:s}}writeGeometryObject(e,a){return writeGeometry(e,this.adaptOptions(a))}}function readGeometryInternal(i,e){if(!i)return null;let a;switch(i.type){case"Point":{a=readPointGeometry(i);break}case"LineString":{a=readLineStringGeometry(i);break}case"Polygon":{a=readPolygonGeometry(i);break}case"MultiPoint":{a=readMultiPointGeometry(i);break}case"MultiLineString":{a=readMultiLineStringGeometry(i);break}case"MultiPolygon":{a=readMultiPolygonGeometry(i);break}case"GeometryCollection":{a=readGeometryCollectionGeometry(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return a}function readGeometry(i,e){const a=readGeometryInternal(i);return createGeometry(a,e)}function readGeometryCollectionGeometry(i,e){return i.geometries.map(function(s){return readGeometryInternal(s)})}function readPointGeometry(i){const e=i.coordinates;return{type:"Point",flatCoordinates:e,layout:getLayoutForStride(e.length)}}function readLineStringGeometry(i){const e=i.coordinates,a=e.flat();return{type:"LineString",flatCoordinates:a,ends:[a.length],layout:getLayoutForStride(e[0].length)}}function readMultiLineStringGeometry(i){const e=i.coordinates,a=e[0][0].length,s=[],o=deflateCoordinatesArray(s,0,e,a);return{type:"MultiLineString",flatCoordinates:s,ends:o,layout:getLayoutForStride(a)}}function readMultiPointGeometry(i){const e=i.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:getLayoutForStride(e[0].length)}}function readMultiPolygonGeometry(i){const e=i.coordinates,a=[],s=e[0][0][0].length,o=deflateMultiCoordinatesArray(a,0,e,s);return{type:"MultiPolygon",flatCoordinates:a,ends:o,layout:getLayoutForStride(s)}}function readPolygonGeometry(i){const e=i.coordinates,a=[],s=e[0][0].length,o=deflateCoordinatesArray(a,0,e,s);return{type:"Polygon",flatCoordinates:a,ends:o,layout:getLayoutForStride(s)}}function writeGeometry(i,e){i=transformGeometryWithOptions(i,!0,e);const a=i.getType();let s;switch(a){case"Point":{s=writePointGeometry(i);break}case"LineString":{s=writeLineStringGeometry(i);break}case"Polygon":{s=writePolygonGeometry(i,e);break}case"MultiPoint":{s=writeMultiPointGeometry(i);break}case"MultiLineString":{s=writeMultiLineStringGeometry(i);break}case"MultiPolygon":{s=writeMultiPolygonGeometry(i,e);break}case"GeometryCollection":{s=writeGeometryCollectionGeometry(i,e);break}case"Circle":{s={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+a)}return s}function writeGeometryCollectionGeometry(i,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(s){return writeGeometry(s,e)})}}function writeLineStringGeometry(i,e){return{type:"LineString",coordinates:i.getCoordinates()}}function writeMultiLineStringGeometry(i,e){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function writeMultiPointGeometry(i,e){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function writeMultiPolygonGeometry(i,e){let a;return e&&(a=e.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(a)}}function writePointGeometry(i,e){return{type:"Point",coordinates:i.getCoordinates()}}function writePolygonGeometry(i,e){let a;return e&&(a=e.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(a)}}function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var csscolorparser={},parseCSSColor_1,kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clamp_css_byte(i){return i=Math.round(i),i<0?0:i>255?255:i}function clamp_css_float(i){return i<0?0:i>1?1:i}function parse_css_int(i){return i[i.length-1]==="%"?clamp_css_byte(parseFloat(i)/100*255):clamp_css_byte(parseInt(i))}function parse_css_float(i){return i[i.length-1]==="%"?clamp_css_float(parseFloat(i)/100):clamp_css_float(parseFloat(i))}function css_hue_to_rgb(i,e,a){return a<0?a+=1:a>1&&(a-=1),a*6<1?i+(e-i)*a*6:a*2<1?e:a*3<2?i+(e-i)*(2/3-a)*6:i}function parseCSSColor(i){var e=i.replace(/ /g,"").toLowerCase();if(e in kCSSColorTable)return kCSSColorTable[e].slice();if(e[0]==="#"){if(e.length===4){var a=parseInt(e.substr(1),16);return a>=0&&a<=4095?[(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,1]:null}else if(e.length===7){var a=parseInt(e.substr(1),16);return a>=0&&a<=16777215?[(a&16711680)>>16,(a&65280)>>8,a&255,1]:null}return null}var s=e.indexOf("("),o=e.indexOf(")");if(s!==-1&&o+1===e.length){var c=e.substr(0,s),d=e.substr(s+1,o-(s+1)).split(","),h=1;switch(c){case"rgba":if(d.length!==4)return null;h=parse_css_float(d.pop());case"rgb":return d.length!==3?null:[parse_css_int(d[0]),parse_css_int(d[1]),parse_css_int(d[2]),h];case"hsla":if(d.length!==4)return null;h=parse_css_float(d.pop());case"hsl":if(d.length!==3)return null;var g=(parseFloat(d[0])%360+360)%360/360,_=parse_css_float(d[1]),b=parse_css_float(d[2]),j=b<=.5?b*(_+1):b+_-b*_,$=b*2-j;return[clamp_css_byte(css_hue_to_rgb($,j,g+1/3)*255),clamp_css_byte(css_hue_to_rgb($,j,g)*255),clamp_css_byte(css_hue_to_rgb($,j,g-1/3)*255),h];default:return null}}return null}try{parseCSSColor_1=csscolorparser.parseCSSColor=parseCSSColor}catch{}class Color{constructor(e,a,s,o=1){this.r=e,this.g=a,this.b=s,this.a=o}static parse(e){if(!e)return;if(e instanceof Color)return e;if(typeof e!="string")return;const a=parseCSSColor_1(e);if(a)return new Color(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3])}toString(){const[e,a,s,o]=this.toArray();return`rgba(${Math.round(e)},${Math.round(a)},${Math.round(s)},${o})`}toArray(){const{r:e,g:a,b:s,a:o}=this;return o===0?[0,0,0,0]:[e*255/o,a*255/o,s*255/o,o]}toArray01(){const{r:e,g:a,b:s,a:o}=this;return o===0?[0,0,0,0]:[e/o,a/o,s/o,o]}toArray01PremultipliedAlpha(){const{r:e,g:a,b:s,a:o}=this;return[e,a,s,o]}}Color.black=new Color(0,0,0,1);Color.white=new Color(1,1,1,1);Color.transparent=new Color(0,0,0,0);Color.red=new Color(1,0,0,1);Color.blue=new Color(0,0,1,1);var Color$1=Color;function convertLiteral(i){return typeof i=="object"?["literal",i]:i}function convertFunction(i,e){let a=i.stops;if(!a)return convertIdentityFunction(i,e);const s=a&&typeof a[0][0]=="object",o=s||i.property!==void 0,c=s||!o;return a=a.map(d=>!o&&e.tokens&&typeof d[1]=="string"?[d[0],convertTokenString(d[1])]:[d[0],convertLiteral(d[1])]),s?convertZoomAndPropertyFunction(i,e,a):c?convertZoomFunction(i,e,a):convertPropertyFunction(i,e,a)}function convertIdentityFunction(i,e){const a=["get",i.property];if(i.default===void 0)return e.type==="string"?["string",a]:a;if(e.type==="enum")return["match",a,Object.keys(e.values),a,i.default];{const s=[e.type==="color"?"to-color":e.type,a,convertLiteral(i.default)];return e.type==="array"&&s.splice(1,0,e.value,e.length||null),s}}function getInterpolateOperator(i){switch(i.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function convertZoomAndPropertyFunction(i,e,a){const s={},o={},c=[];for(let h=0;h<a.length;h++){const g=a[h],_=g[0].zoom;s[_]===void 0&&(s[_]={zoom:_,type:i.type,property:i.property,default:i.default},o[_]=[],c.push(_)),o[_].push([g[0].value,g[1]])}if(getFunctionType({},e)==="exponential"){const h=[getInterpolateOperator(i),["linear"],["zoom"]];for(const g of c){const _=convertPropertyFunction(s[g],e,o[g]);appendStopPair(h,g,_,!1)}return h}else{const h=["step",["zoom"]];for(const g of c){const _=convertPropertyFunction(s[g],e,o[g]);appendStopPair(h,g,_,!0)}return fixupDegenerateStepCurve(h),h}}function coalesce(i,e){if(i!==void 0)return i;if(e!==void 0)return e}function getFallback(i,e){const a=convertLiteral(coalesce(i.default,e.default));return a===void 0&&e.type==="resolvedImage"?"":a}function convertPropertyFunction(i,e,a){const s=getFunctionType(i,e),o=["get",i.property];if(s==="categorical"&&typeof a[0][0]=="boolean"){const c=["case"];for(const d of a)c.push(["==",o,d[0]],d[1]);return c.push(getFallback(i,e)),c}else if(s==="categorical"){const c=["match",o];for(const d of a)appendStopPair(c,d[0],d[1],!1);return c.push(getFallback(i,e)),c}else if(s==="interval"){const c=["step",["number",o]];for(const d of a)appendStopPair(c,d[0],d[1],!0);return fixupDegenerateStepCurve(c),i.default===void 0?c:["case",["==",["typeof",o],"number"],c,convertLiteral(i.default)]}else if(s==="exponential"){const c=i.base!==void 0?i.base:1,d=[getInterpolateOperator(i),c===1?["linear"]:["exponential",c],["number",o]];for(const h of a)appendStopPair(d,h[0],h[1],!1);return i.default===void 0?d:["case",["==",["typeof",o],"number"],d,convertLiteral(i.default)]}else throw new Error(`Unknown property function type ${s}`)}function convertZoomFunction(i,e,a,s=["zoom"]){const o=getFunctionType(i,e);let c,d=!1;if(o==="interval")c=["step",s],d=!0;else if(o==="exponential"){const h=i.base!==void 0?i.base:1;c=[getInterpolateOperator(i),h===1?["linear"]:["exponential",h],s]}else throw new Error(`Unknown zoom function type "${o}"`);for(const h of a)appendStopPair(c,h[0],h[1],d);return fixupDegenerateStepCurve(c),c}function fixupDegenerateStepCurve(i){i[0]==="step"&&i.length===3&&(i.push(0),i.push(i[3]))}function appendStopPair(i,e,a,s){i.length>3&&e===i[i.length-2]||(s&&i.length===2||i.push(e),i.push(a))}function getFunctionType(i,e){return i.type?i.type:e.expression.interpolated?"exponential":"interval"}function convertTokenString(i){const e=["concat"],a=/{([^{}]+)}/g;let s=0;for(let o=a.exec(i);o!==null;o=a.exec(i)){const c=i.slice(s,a.lastIndex-o[0].length);s=a.lastIndex,c.length>0&&e.push(c),e.push(["get",o[1]])}if(e.length===1)return i;if(s<i.length)e.push(i.slice(s));else if(e.length===2)return["to-string",e[1]];return e}class ParsingError extends Error{constructor(e,a){super(a),this.message=a,this.key=e}}var ParsingError$1=ParsingError;class Scope{constructor(e,a=[]){this.parent=e,this.bindings={};for(const[s,o]of a)this.bindings[s]=o}concat(e){return new Scope(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var Scope$1=Scope;const NullType={kind:"null"},NumberType={kind:"number"},StringType={kind:"string"},BooleanType={kind:"boolean"},ColorType={kind:"color"},ObjectType={kind:"object"},ValueType={kind:"value"},ErrorType={kind:"error"},CollatorType={kind:"collator"},FormattedType={kind:"formatted"},ResolvedImageType={kind:"resolvedImage"};function array$1(i,e){return{kind:"array",itemType:i,N:e}}function toString$1(i){if(i.kind==="array"){const e=toString$1(i.itemType);return typeof i.N=="number"?`array<${e}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${e}>`}else return i.kind}const valueMemberTypes=[NullType,NumberType,StringType,BooleanType,ColorType,FormattedType,ObjectType,array$1(ValueType),ResolvedImageType];function checkSubtype(i,e){if(e.kind==="error")return null;if(i.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!checkSubtype(i.itemType,e.itemType))&&(typeof i.N!="number"||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if(i.kind==="value"){for(const a of valueMemberTypes)if(!checkSubtype(a,e))return null}}return`Expected ${toString$1(i)} but found ${toString$1(e)} instead.`}function isValidType(i,e){return e.some(a=>a.kind===i.kind)}function isValidNativeType(i,e){return e.some(a=>a==="null"?i===null:a==="array"?Array.isArray(i):a==="object"?i&&!Array.isArray(i)&&typeof i=="object":a===typeof i)}class Collator{constructor(e,a,s){e?this.sensitivity=a?"variant":"case":this.sensitivity=a?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,a){return this.collator.compare(e,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class FormattedSection{constructor(e,a,s,o,c){this.text=e.normalize?e.normalize():e,this.image=a,this.scale=s,this.fontStack=o,this.textColor=c}}class Formatted{constructor(e){this.sections=e}static fromString(e){return new Formatted([new FormattedSection(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Formatted?e:Formatted.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const a of this.sections){if(a.image){e.push(["image",a.image.name]);continue}e.push(a.text);const s={};a.fontStack&&(s["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(s["font-scale"]=a.scale),a.textColor&&(s["text-color"]=["rgba"].concat(a.textColor.toArray())),e.push(s)}return e}}class ResolvedImage{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ResolvedImage({name:e,available:!1}):null}serialize(){return["image",this.name]}}function validateRGBA(i,e,a,s){return typeof i=="number"&&i>=0&&i<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof a=="number"&&a>=0&&a<=255?typeof s>"u"||typeof s=="number"&&s>=0&&s<=1?null:`Invalid rgba value [${[i,e,a,s].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof s=="number"?[i,e,a,s]:[i,e,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function isValue(i){if(i===null)return!0;if(typeof i=="string")return!0;if(typeof i=="boolean")return!0;if(typeof i=="number")return!0;if(i instanceof Color$1)return!0;if(i instanceof Collator)return!0;if(i instanceof Formatted)return!0;if(i instanceof ResolvedImage)return!0;if(Array.isArray(i)){for(const e of i)if(!isValue(e))return!1;return!0}else if(typeof i=="object"){for(const e in i)if(!isValue(i[e]))return!1;return!0}else return!1}function typeOf(i){if(i===null)return NullType;if(typeof i=="string")return StringType;if(typeof i=="boolean")return BooleanType;if(typeof i=="number")return NumberType;if(i instanceof Color$1)return ColorType;if(i instanceof Collator)return CollatorType;if(i instanceof Formatted)return FormattedType;if(i instanceof ResolvedImage)return ResolvedImageType;if(Array.isArray(i)){const e=i.length;let a;for(const s of i){const o=typeOf(s);if(!a)a=o;else{if(a===o)continue;a=ValueType;break}}return array$1(a||ValueType,e)}else return ObjectType}function toString(i){const e=typeof i;return i===null?"":e==="string"||e==="number"||e==="boolean"?String(i):i instanceof Color$1||i instanceof Formatted||i instanceof ResolvedImage?i.toString():JSON.stringify(i)}class Literal{constructor(e,a){this.type=e,this.value=a}static parse(e,a){if(e.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!isValue(e[1]))return a.error("invalid value");const s=e[1];let o=typeOf(s);const c=a.expectedType;return o.kind==="array"&&o.N===0&&c&&c.kind==="array"&&(typeof c.N!="number"||c.N===0)&&(o=c),new Literal(o,s)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Color$1?["rgba"].concat(this.value.toArray()):this.value instanceof Formatted?this.value.serialize():this.value}}var Literal$1=Literal;class RuntimeError{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var RuntimeError$1=RuntimeError;const types$2={string:StringType,number:NumberType,boolean:BooleanType,object:ObjectType};class Assertion{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");let s=1,o;const c=e[0];if(c==="array"){let h;if(e.length>2){const _=e[1];if(typeof _!="string"||!(_ in types$2)||_==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);h=types$2[_],s++}else h=ValueType;let g;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return a.error('The length argument to "array" must be a positive integer literal',2);g=e[2],s++}o=array$1(h,g)}else o=types$2[c];const d=[];for(;s<e.length;s++){const h=a.parse(e[s],s,ValueType);if(!h)return null;d.push(h)}return new Assertion(o,d)}evaluate(e){for(let a=0;a<this.args.length;a++){const s=this.args[a].evaluate(e);if(checkSubtype(this.type,typeOf(s))){if(a===this.args.length-1)throw new RuntimeError$1(`Expected value to be of type ${toString$1(this.type)}, but found ${toString$1(typeOf(s))} instead.`)}else return s}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,a=[e.kind];if(e.kind==="array"){const s=e.itemType;if(s.kind==="string"||s.kind==="number"||s.kind==="boolean"){a.push(s.kind);const o=e.N;(typeof o=="number"||this.args.length>1)&&a.push(o)}}return a.concat(this.args.map(s=>s.serialize()))}}var Assertion$1=Assertion;class FormatExpression{constructor(e){this.type=FormattedType,this.sections=e}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");const s=e[1];if(!Array.isArray(s)&&typeof s=="object")return a.error("First argument must be an image or text section.");const o=[];let c=!1;for(let d=1;d<=e.length-1;++d){const h=e[d];if(c&&typeof h=="object"&&!Array.isArray(h)){c=!1;let g=null;if(h["font-scale"]&&(g=a.parse(h["font-scale"],1,NumberType),!g))return null;let _=null;if(h["text-font"]&&(_=a.parse(h["text-font"],1,array$1(StringType)),!_))return null;let b=null;if(h["text-color"]&&(b=a.parse(h["text-color"],1,ColorType),!b))return null;const j=o[o.length-1];j.scale=g,j.font=_,j.textColor=b}else{const g=a.parse(e[d],1,ValueType);if(!g)return null;const _=g.type.kind;if(_!=="string"&&_!=="value"&&_!=="null"&&_!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");c=!0,o.push({content:g,scale:null,font:null,textColor:null})}}return new FormatExpression(o)}evaluate(e){const a=s=>{const o=s.content.evaluate(e);return typeOf(o)===ResolvedImageType?new FormattedSection("",o,null,null,null):new FormattedSection(toString(o),null,s.scale?s.scale.evaluate(e):null,s.font?s.font.evaluate(e).join(","):null,s.textColor?s.textColor.evaluate(e):null)};return new Formatted(this.sections.map(a))}eachChild(e){for(const a of this.sections)e(a.content),a.scale&&e(a.scale),a.font&&e(a.font),a.textColor&&e(a.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const a of this.sections){e.push(a.content.serialize());const s={};a.scale&&(s["font-scale"]=a.scale.serialize()),a.font&&(s["text-font"]=a.font.serialize()),a.textColor&&(s["text-color"]=a.textColor.serialize()),e.push(s)}return e}}class ImageExpression{constructor(e){this.type=ResolvedImageType,this.input=e}static parse(e,a){if(e.length!==2)return a.error("Expected two arguments.");const s=a.parse(e[1],1,StringType);return s?new ImageExpression(s):a.error("No image name provided.")}evaluate(e){const a=this.input.evaluate(e),s=ResolvedImage.fromString(a);return s&&e.availableImages&&(s.available=e.availableImages.indexOf(a)>-1),s}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const types$1={"to-boolean":BooleanType,"to-color":ColorType,"to-number":NumberType,"to-string":StringType};class Coercion{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expected at least one argument.");const s=e[0];if((s==="to-boolean"||s==="to-string")&&e.length!==2)return a.error("Expected one argument.");const o=types$1[s],c=[];for(let d=1;d<e.length;d++){const h=a.parse(e[d],d,ValueType);if(!h)return null;c.push(h)}return new Coercion(o,c)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let a,s;for(const o of this.args){if(a=o.evaluate(e),s=null,a instanceof Color$1)return a;if(typeof a=="string"){const c=e.parseColor(a);if(c)return c}else if(Array.isArray(a)&&(a.length<3||a.length>4?s=`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:s=validateRGBA(a[0],a[1],a[2],a[3]),!s))return new Color$1(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new RuntimeError$1(s||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}else if(this.type.kind==="number"){let a=null;for(const s of this.args){if(a=s.evaluate(e),a===null)return 0;const o=Number(a);if(!isNaN(o))return o}throw new RuntimeError$1(`Could not convert ${JSON.stringify(a)} to number.`)}else return this.type.kind==="formatted"?Formatted.fromString(toString(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ResolvedImage.fromString(toString(this.args[0].evaluate(e))):toString(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new FormatExpression([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ImageExpression(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(a=>{e.push(a.serialize())}),e}}var Coercion$1=Coercion;const geometryTypes=["Unknown","Point","LineString","Polygon"];class EvaluationContext{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?geometryTypes[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,a=this.featureDistanceData.scale,{x:s,y:o}=this.featureTileCoord,c=s*a-e[0],d=o*a-e[1],h=this.featureDistanceData.bearing[0],g=this.featureDistanceData.bearing[1];return h*c+g*d}return 0}parseColor(e){let a=this._parseColorCache[e];return a||(a=this._parseColorCache[e]=Color$1.parse(e)),a}}var EvaluationContext$1=EvaluationContext;class CompoundExpression{constructor(e,a,s,o){this.name=e,this.type=a,this._evaluate=s,this.args=o}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,a){const s=e[0],o=CompoundExpression.definitions[s];if(!o)return a.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0);const c=Array.isArray(o)?o[0]:o.type,d=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,h=d.filter(([_])=>!Array.isArray(_)||_.length===e.length-1);let g=null;for(const[_,b]of h){g=new ParsingContext$1(a.registry,a.path,null,a.scope);const j=[];let $=!1;for(let _e=1;_e<e.length;_e++){const et=e[_e],tt=Array.isArray(_)?_[_e-1]:_.type,it=g.parse(et,1+j.length,tt);if(!it){$=!0;break}j.push(it)}if(!$){if(Array.isArray(_)&&_.length!==j.length){g.error(`Expected ${_.length} arguments, but found ${j.length} instead.`);continue}for(let _e=0;_e<j.length;_e++){const et=Array.isArray(_)?_[_e]:_.type,tt=j[_e];g.concat(_e+1).checkSubtype(et,tt.type)}if(g.errors.length===0)return new CompoundExpression(s,c,b,j)}}if(h.length===1)a.errors.push(...g.errors);else{const b=(h.length?h:d).map(([$])=>stringifySignature($)).join(" | "),j=[];for(let $=1;$<e.length;$++){const _e=a.parse(e[$],1+j.length);if(!_e)return null;j.push(toString$1(_e.type))}a.error(`Expected arguments of type ${b}, but found (${j.join(", ")}) instead.`)}return null}static register(e,a){CompoundExpression.definitions=a;for(const s in a)e[s]=CompoundExpression}}function stringifySignature(i){return Array.isArray(i)?`(${i.map(toString$1).join(", ")})`:`(${toString$1(i.type)}...)`}var CompoundExpression$1=CompoundExpression;class CollatorExpression{constructor(e,a,s){this.type=CollatorType,this.locale=s,this.caseSensitive=e,this.diacriticSensitive=a}static parse(e,a){if(e.length!==2)return a.error("Expected one argument.");const s=e[1];if(typeof s!="object"||Array.isArray(s))return a.error("Collator options argument must be an object.");const o=a.parse(s["case-sensitive"]===void 0?!1:s["case-sensitive"],1,BooleanType);if(!o)return null;const c=a.parse(s["diacritic-sensitive"]===void 0?!1:s["diacritic-sensitive"],1,BooleanType);if(!c)return null;let d=null;return s.locale&&(d=a.parse(s.locale,1,StringType),!d)?null:new CollatorExpression(o,c,d)}evaluate(e){return new Collator(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const EXTENT=8192;function updateBBox(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function mercatorXfromLng(i){return(180+i)/360}function mercatorYfromLat(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function boxWithinBox(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function getTileCoordinates(i,e){const a=mercatorXfromLng(i[0]),s=mercatorYfromLat(i[1]),o=Math.pow(2,e.z);return[Math.round(a*o*EXTENT),Math.round(s*o*EXTENT)]}function onBoundary(i,e,a){const s=i[0]-e[0],o=i[1]-e[1],c=i[0]-a[0],d=i[1]-a[1];return s*d-c*o===0&&s*c<=0&&o*d<=0}function rayIntersect(i,e,a){return e[1]>i[1]!=a[1]>i[1]&&i[0]<(a[0]-e[0])*(i[1]-e[1])/(a[1]-e[1])+e[0]}function pointWithinPolygon(i,e){let a=!1;for(let s=0,o=e.length;s<o;s++){const c=e[s];for(let d=0,h=c.length;d<h-1;d++){if(onBoundary(i,c[d],c[d+1]))return!1;rayIntersect(i,c[d],c[d+1])&&(a=!a)}}return a}function pointWithinPolygons(i,e){for(let a=0;a<e.length;a++)if(pointWithinPolygon(i,e[a]))return!0;return!1}function perp(i,e){return i[0]*e[1]-i[1]*e[0]}function twoSided(i,e,a,s){const o=i[0]-a[0],c=i[1]-a[1],d=e[0]-a[0],h=e[1]-a[1],g=s[0]-a[0],_=s[1]-a[1],b=o*_-g*c,j=d*_-g*h;return b>0&&j<0||b<0&&j>0}function lineIntersectLine(i,e,a,s){const o=[e[0]-i[0],e[1]-i[1]],c=[s[0]-a[0],s[1]-a[1]];return perp(c,o)===0?!1:!!(twoSided(i,e,a,s)&&twoSided(a,s,i,e))}function lineIntersectPolygon(i,e,a){for(const s of a)for(let o=0;o<s.length-1;++o)if(lineIntersectLine(i,e,s[o],s[o+1]))return!0;return!1}function lineStringWithinPolygon(i,e){for(let a=0;a<i.length;++a)if(!pointWithinPolygon(i[a],e))return!1;for(let a=0;a<i.length-1;++a)if(lineIntersectPolygon(i[a],i[a+1],e))return!1;return!0}function lineStringWithinPolygons(i,e){for(let a=0;a<e.length;a++)if(lineStringWithinPolygon(i,e[a]))return!0;return!1}function getTilePolygon(i,e,a){const s=[];for(let o=0;o<i.length;o++){const c=[];for(let d=0;d<i[o].length;d++){const h=getTileCoordinates(i[o][d],a);updateBBox(e,h),c.push(h)}s.push(c)}return s}function getTilePolygons(i,e,a){const s=[];for(let o=0;o<i.length;o++){const c=getTilePolygon(i[o],e,a);s.push(c)}return s}function updatePoint(i,e,a,s){if(i[0]<a[0]||i[0]>a[2]){const o=s*.5;let c=i[0]-a[0]>o?-s:a[0]-i[0]>o?s:0;c===0&&(c=i[0]-a[2]>o?-s:a[2]-i[0]>o?s:0),i[0]+=c}updateBBox(e,i)}function resetBBox(i){i[0]=i[1]=1/0,i[2]=i[3]=-1/0}function getTilePoints(i,e,a,s){const o=Math.pow(2,s.z)*EXTENT,c=[s.x*EXTENT,s.y*EXTENT],d=[];if(!i)return d;for(const h of i)for(const g of h){const _=[g.x+c[0],g.y+c[1]];updatePoint(_,e,a,o),d.push(_)}return d}function getTileLines(i,e,a,s){const o=Math.pow(2,s.z)*EXTENT,c=[s.x*EXTENT,s.y*EXTENT],d=[];if(!i)return d;for(const h of i){const g=[];for(const _ of h){const b=[_.x+c[0],_.y+c[1]];updateBBox(e,b),g.push(b)}d.push(g)}if(e[2]-e[0]<=o/2){resetBBox(e);for(const h of d)for(const g of h)updatePoint(g,e,a,o)}return d}function pointsWithinPolygons(i,e){const a=[1/0,1/0,-1/0,-1/0],s=[1/0,1/0,-1/0,-1/0],o=i.canonicalID();if(!o)return!1;if(e.type==="Polygon"){const c=getTilePolygon(e.coordinates,s,o),d=getTilePoints(i.geometry(),a,s,o);if(!boxWithinBox(a,s))return!1;for(const h of d)if(!pointWithinPolygon(h,c))return!1}if(e.type==="MultiPolygon"){const c=getTilePolygons(e.coordinates,s,o),d=getTilePoints(i.geometry(),a,s,o);if(!boxWithinBox(a,s))return!1;for(const h of d)if(!pointWithinPolygons(h,c))return!1}return!0}function linesWithinPolygons(i,e){const a=[1/0,1/0,-1/0,-1/0],s=[1/0,1/0,-1/0,-1/0],o=i.canonicalID();if(!o)return!1;if(e.type==="Polygon"){const c=getTilePolygon(e.coordinates,s,o),d=getTileLines(i.geometry(),a,s,o);if(!boxWithinBox(a,s))return!1;for(const h of d)if(!lineStringWithinPolygon(h,c))return!1}if(e.type==="MultiPolygon"){const c=getTilePolygons(e.coordinates,s,o),d=getTileLines(i.geometry(),a,s,o);if(!boxWithinBox(a,s))return!1;for(const h of d)if(!lineStringWithinPolygons(h,c))return!1}return!0}class Within{constructor(e,a){this.type=BooleanType,this.geojson=e,this.geometries=a}static parse(e,a){if(e.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const s=e[1];if(s.type==="FeatureCollection")for(let o=0;o<s.features.length;++o){const c=s.features[o].geometry.type;if(c==="Polygon"||c==="MultiPolygon")return new Within(s,s.features[o].geometry)}else if(s.type==="Feature"){const o=s.geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new Within(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new Within(s,s)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointsWithinPolygons(e,this.geometries);if(e.geometryType()==="LineString")return linesWithinPolygons(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Within$1=Within;function isFeatureConstant(i){if(i instanceof CompoundExpression$1){if(i.name==="get"&&i.args.length===1)return!1;if(i.name==="feature-state")return!1;if(i.name==="has"&&i.args.length===1)return!1;if(i.name==="properties"||i.name==="geometry-type"||i.name==="id")return!1;if(/^filter-/.test(i.name))return!1}if(i instanceof Within$1)return!1;let e=!0;return i.eachChild(a=>{e&&!isFeatureConstant(a)&&(e=!1)}),e}function isStateConstant(i){if(i instanceof CompoundExpression$1&&i.name==="feature-state")return!1;let e=!0;return i.eachChild(a=>{e&&!isStateConstant(a)&&(e=!1)}),e}function isGlobalPropertyConstant(i,e){if(i instanceof CompoundExpression$1&&e.indexOf(i.name)>=0)return!1;let a=!0;return i.eachChild(s=>{a&&!isGlobalPropertyConstant(s,e)&&(a=!1)}),a}class Var{constructor(e,a){this.type=a.type,this.name=e,this.boundExpression=a}static parse(e,a){if(e.length!==2||typeof e[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const s=e[1];return a.scope.has(s)?new Var(s,a.scope.get(s)):a.error(`Unknown variable "${s}". Make sure "${s}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Var$1=Var;class ParsingContext{constructor(e,a=[],s,o=new Scope$1,c=[]){this.registry=e,this.path=a,this.key=a.map(d=>`[${d}]`).join(""),this.scope=o,this.errors=c,this.expectedType=s}parse(e,a,s,o,c={}){return a?this.concat(a,s,o)._parse(e,c):this._parse(e,c)}_parse(e,a){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function s(o,c,d){return d==="assert"?new Assertion$1(c,[o]):d==="coerce"?new Coercion$1(c,[o]):o}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const o=e[0];if(typeof o!="string")return this.error(`Expression name must be a string, but found ${typeof o} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const c=this.registry[o];if(c){let d=c.parse(e,this);if(!d)return null;if(this.expectedType){const h=this.expectedType,g=d.type;if((h.kind==="string"||h.kind==="number"||h.kind==="boolean"||h.kind==="object"||h.kind==="array")&&g.kind==="value")d=s(d,h,a.typeAnnotation||"assert");else if((h.kind==="color"||h.kind==="formatted"||h.kind==="resolvedImage")&&(g.kind==="value"||g.kind==="string"))d=s(d,h,a.typeAnnotation||"coerce");else if(this.checkSubtype(h,g))return null}if(!(d instanceof Literal$1)&&d.type.kind!=="resolvedImage"&&isConstant(d)){const h=new EvaluationContext$1;try{d=new Literal$1(d.type,d.evaluate(h))}catch(g){return this.error(g.message),null}}return d}return this.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,a,s){const o=typeof e=="number"?this.path.concat(e):this.path,c=s?this.scope.concat(s):this.scope;return new ParsingContext(this.registry,o,a||null,c,this.errors)}error(e,...a){const s=`${this.key}${a.map(o=>`[${o}]`).join("")}`;this.errors.push(new ParsingError$1(s,e))}checkSubtype(e,a){const s=checkSubtype(e,a);return s&&this.error(s),s}}var ParsingContext$1=ParsingContext;function isConstant(i){if(i instanceof Var$1)return isConstant(i.boundExpression);if(i instanceof CompoundExpression$1&&i.name==="error")return!1;if(i instanceof CollatorExpression)return!1;if(i instanceof Within$1)return!1;const e=i instanceof Coercion$1||i instanceof Assertion$1;let a=!0;return i.eachChild(s=>{e?a=a&&isConstant(s):a=a&&s instanceof Literal$1}),a?isFeatureConstant(i)&&isGlobalPropertyConstant(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function findStopLessThanOrEqualTo(i,e){const a=i.length-1;let s=0,o=a,c=0,d,h;for(;s<=o;)if(c=Math.floor((s+o)/2),d=i[c],h=i[c+1],d<=e){if(c===a||e<h)return c;s=c+1}else if(d>e)o=c-1;else throw new RuntimeError$1("Input is not a number.");return 0}class Step{constructor(e,a,s){this.type=e,this.input=a,this.labels=[],this.outputs=[];for(const[o,c]of s)this.labels.push(o),this.outputs.push(c)}static parse(e,a){if(e.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return a.error("Expected an even number of arguments.");const s=a.parse(e[1],1,NumberType);if(!s)return null;const o=[];let c=null;a.expectedType&&a.expectedType.kind!=="value"&&(c=a.expectedType);for(let d=1;d<e.length;d+=2){const h=d===1?-1/0:e[d],g=e[d+1],_=d,b=d+1;if(typeof h!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_);if(o.length&&o[o.length-1][0]>=h)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_);const j=a.parse(g,b,c);if(!j)return null;c=c||j.type,o.push([h,j])}return new Step(c,s,o)}evaluate(e){const a=this.labels,s=this.outputs;if(a.length===1)return s[0].evaluate(e);const o=this.input.evaluate(e);if(o<=a[0])return s[0].evaluate(e);const c=a.length;if(o>=a[c-1])return s[c-1].evaluate(e);const d=findStopLessThanOrEqualTo(a,o);return s[d].evaluate(e)}eachChild(e){e(this.input);for(const a of this.outputs)e(a)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&e.push(this.labels[a]),e.push(this.outputs[a].serialize());return e}}var Step$1=Step,unitbezier=UnitBezier;function UnitBezier(i,e,a,s){this.cx=3*i,this.bx=3*(a-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(s-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=s,this.p2x=a,this.p2y=s}UnitBezier.prototype.sampleCurveX=function(i){return((this.ax*i+this.bx)*i+this.cx)*i};UnitBezier.prototype.sampleCurveY=function(i){return((this.ay*i+this.by)*i+this.cy)*i};UnitBezier.prototype.sampleCurveDerivativeX=function(i){return(3*this.ax*i+2*this.bx)*i+this.cx};UnitBezier.prototype.solveCurveX=function(i,e){typeof e>"u"&&(e=1e-6);var a,s,o,c,d;for(o=i,d=0;d<8;d++){if(c=this.sampleCurveX(o)-i,Math.abs(c)<e)return o;var h=this.sampleCurveDerivativeX(o);if(Math.abs(h)<1e-6)break;o=o-c/h}if(a=0,s=1,o=i,o<a)return a;if(o>s)return s;for(;a<s;){if(c=this.sampleCurveX(o),Math.abs(c-i)<e)return o;i>c?a=o:s=o,o=(s-a)*.5+a}return o};UnitBezier.prototype.solve=function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))};var UnitBezier$1=getDefaultExportFromCjs(unitbezier);function number(i,e,a){return i*(1-a)+e*a}function color(i,e,a){return new Color$1(number(i.r,e.r,a),number(i.g,e.g,a),number(i.b,e.b,a),number(i.a,e.a,a))}function array(i,e,a){return i.map((s,o)=>number(s,e[o],a))}var interpolate=Object.freeze({__proto__:null,number,color,array});const Xn=.95047,Yn=1,Zn=1.08883,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1,deg2rad$1=Math.PI/180,rad2deg=180/Math.PI;function xyz2lab(i){return i>t3?Math.pow(i,1/3):i/t2+t0}function lab2xyz(i){return i>t1?i*i*i:t2*(i-t0)}function xyz2rgb(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function rgb2xyz(i){return i/=255,i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function rgbToLab(i){const e=rgb2xyz(i.r),a=rgb2xyz(i.g),s=rgb2xyz(i.b),o=xyz2lab((.4124564*e+.3575761*a+.1804375*s)/Xn),c=xyz2lab((.2126729*e+.7151522*a+.072175*s)/Yn),d=xyz2lab((.0193339*e+.119192*a+.9503041*s)/Zn);return{l:116*c-16,a:500*(o-c),b:200*(c-d),alpha:i.a}}function labToRgb(i){let e=(i.l+16)/116,a=isNaN(i.a)?e:e+i.a/500,s=isNaN(i.b)?e:e-i.b/200;return e=Yn*lab2xyz(e),a=Xn*lab2xyz(a),s=Zn*lab2xyz(s),new Color$1(xyz2rgb(3.2404542*a-1.5371385*e-.4985314*s),xyz2rgb(-.969266*a+1.8760108*e+.041556*s),xyz2rgb(.0556434*a-.2040259*e+1.0572252*s),i.alpha)}function interpolateLab(i,e,a){return{l:number(i.l,e.l,a),a:number(i.a,e.a,a),b:number(i.b,e.b,a),alpha:number(i.alpha,e.alpha,a)}}function rgbToHcl(i){const{l:e,a,b:s}=rgbToLab(i),o=Math.atan2(s,a)*rad2deg;return{h:o<0?o+360:o,c:Math.sqrt(a*a+s*s),l:e,alpha:i.a}}function hclToRgb(i){const e=i.h*deg2rad$1,a=i.c,s=i.l;return labToRgb({l:s,a:Math.cos(e)*a,b:Math.sin(e)*a,alpha:i.alpha})}function interpolateHue(i,e,a){const s=e-i;return i+a*(s>180||s<-180?s-360*Math.round(s/360):s)}function interpolateHcl(i,e,a){return{h:interpolateHue(i.h,e.h,a),c:number(i.c,e.c,a),l:number(i.l,e.l,a),alpha:number(i.alpha,e.alpha,a)}}const lab={forward:rgbToLab,reverse:labToRgb,interpolate:interpolateLab},hcl={forward:rgbToHcl,reverse:hclToRgb,interpolate:interpolateHcl};class Interpolate{constructor(e,a,s,o,c){this.type=e,this.operator=a,this.interpolation=s,this.input=o,this.labels=[],this.outputs=[];for(const[d,h]of c)this.labels.push(d),this.outputs.push(h)}static interpolationFactor(e,a,s,o){let c=0;if(e.name==="exponential")c=exponentialInterpolation(a,e.base,s,o);else if(e.name==="linear")c=exponentialInterpolation(a,1,s,o);else if(e.name==="cubic-bezier"){const d=e.controlPoints;c=new UnitBezier$1(d[0],d[1],d[2],d[3]).solve(exponentialInterpolation(a,1,s,o))}return c}static parse(e,a){let[s,o,c,...d]=e;if(!Array.isArray(o)||o.length===0)return a.error("Expected an interpolation type expression.",1);if(o[0]==="linear")o={name:"linear"};else if(o[0]==="exponential"){const _=o[1];if(typeof _!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:_}}else if(o[0]==="cubic-bezier"){const _=o.slice(1);if(_.length!==4||_.some(b=>typeof b!="number"||b<0||b>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:_}}else return a.error(`Unknown interpolation type ${String(o[0])}`,1,0);if(e.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return a.error("Expected an even number of arguments.");if(c=a.parse(c,2,NumberType),!c)return null;const h=[];let g=null;s==="interpolate-hcl"||s==="interpolate-lab"?g=ColorType:a.expectedType&&a.expectedType.kind!=="value"&&(g=a.expectedType);for(let _=0;_<d.length;_+=2){const b=d[_],j=d[_+1],$=_+3,_e=_+4;if(typeof b!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(h.length&&h[h.length-1][0]>=b)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$);const et=a.parse(j,_e,g);if(!et)return null;g=g||et.type,h.push([b,et])}return g.kind!=="number"&&g.kind!=="color"&&!(g.kind==="array"&&g.itemType.kind==="number"&&typeof g.N=="number")?a.error(`Type ${toString$1(g)} is not interpolatable.`):new Interpolate(g,s,o,c,h)}evaluate(e){const a=this.labels,s=this.outputs;if(a.length===1)return s[0].evaluate(e);const o=this.input.evaluate(e);if(o<=a[0])return s[0].evaluate(e);const c=a.length;if(o>=a[c-1])return s[c-1].evaluate(e);const d=findStopLessThanOrEqualTo(a,o),h=a[d],g=a[d+1],_=Interpolate.interpolationFactor(this.interpolation,o,h,g),b=s[d].evaluate(e),j=s[d+1].evaluate(e);return this.operator==="interpolate"?interpolate[this.type.kind.toLowerCase()](b,j,_):this.operator==="interpolate-hcl"?hcl.reverse(hcl.interpolate(hcl.forward(b),hcl.forward(j),_)):lab.reverse(lab.interpolate(lab.forward(b),lab.forward(j),_))}eachChild(e){e(this.input);for(const a of this.outputs)e(a)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,e,this.input.serialize()];for(let s=0;s<this.labels.length;s++)a.push(this.labels[s],this.outputs[s].serialize());return a}}function exponentialInterpolation(i,e,a,s){const o=s-a,c=i-a;return o===0?0:e===1?c/o:(Math.pow(e,c)-1)/(Math.pow(e,o)-1)}var Interpolate$1=Interpolate;class Coalesce{constructor(e,a){this.type=e,this.args=a}static parse(e,a){if(e.length<2)return a.error("Expectected at least one argument.");let s=null;const o=a.expectedType;o&&o.kind!=="value"&&(s=o);const c=[];for(const h of e.slice(1)){const g=a.parse(h,1+c.length,s,void 0,{typeAnnotation:"omit"});if(!g)return null;s=s||g.type,c.push(g)}return o&&c.some(h=>checkSubtype(o,h.type))?new Coalesce(ValueType,c):new Coalesce(s,c)}evaluate(e){let a=null,s=0,o;for(const c of this.args){if(s++,a=c.evaluate(e),a&&a instanceof ResolvedImage&&!a.available&&(o||(o=a),a=null,s===this.args.length))return o;if(a!==null)break}return a}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(a=>{e.push(a.serialize())}),e}}var Coalesce$1=Coalesce;class Let{constructor(e,a){this.type=a.type,this.bindings=[].concat(e),this.result=a}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const a of this.bindings)e(a[1]);e(this.result)}static parse(e,a){if(e.length<4)return a.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const s=[];for(let c=1;c<e.length-1;c+=2){const d=e[c];if(typeof d!="string")return a.error(`Expected string, but found ${typeof d} instead.`,c);if(/[^a-zA-Z0-9_]/.test(d))return a.error("Variable names must contain only alphanumeric characters or '_'.",c);const h=a.parse(e[c+1],c+1);if(!h)return null;s.push([d,h])}const o=a.parse(e[e.length-1],e.length-1,a.expectedType,s);return o?new Let(s,o):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[a,s]of this.bindings)e.push(a,s.serialize());return e.push(this.result.serialize()),e}}var Let$1=Let;class At{constructor(e,a,s){this.type=e,this.index=a,this.input=s}static parse(e,a){if(e.length!==3)return a.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const s=a.parse(e[1],1,NumberType),o=a.parse(e[2],2,array$1(a.expectedType||ValueType));if(!s||!o)return null;const c=o.type;return new At(c.itemType,s,o)}evaluate(e){const a=this.index.evaluate(e),s=this.input.evaluate(e);if(a<0)throw new RuntimeError$1(`Array index out of bounds: ${a} < 0.`);if(a>=s.length)throw new RuntimeError$1(`Array index out of bounds: ${a} > ${s.length-1}.`);if(a!==Math.floor(a))throw new RuntimeError$1(`Array index must be an integer, but found ${a} instead.`);return s[a]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var At$1=At;class In{constructor(e,a){this.type=BooleanType,this.needle=e,this.haystack=a}static parse(e,a){if(e.length!==3)return a.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const s=a.parse(e[1],1,ValueType),o=a.parse(e[2],2,ValueType);return!s||!o?null:isValidType(s.type,[BooleanType,StringType,NumberType,NullType,ValueType])?new In(s,o):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(s.type)} instead`)}evaluate(e){const a=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(s==null)return!1;if(!isValidNativeType(a,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(a))} instead.`);if(!isValidNativeType(s,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(s))} instead.`);return s.indexOf(a)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var In$1=In;class IndexOf{constructor(e,a,s){this.type=NumberType,this.needle=e,this.haystack=a,this.fromIndex=s}static parse(e,a){if(e.length<=2||e.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const s=a.parse(e[1],1,ValueType),o=a.parse(e[2],2,ValueType);if(!s||!o)return null;if(!isValidType(s.type,[BooleanType,StringType,NumberType,NullType,ValueType]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(s.type)} instead`);if(e.length===4){const c=a.parse(e[3],3,NumberType);return c?new IndexOf(s,o,c):null}else return new IndexOf(s,o)}evaluate(e){const a=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(!isValidNativeType(a,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(a))} instead.`);if(!isValidNativeType(s,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(s))} instead.`);if(this.fromIndex){const o=this.fromIndex.evaluate(e);return s.indexOf(a,o)}return s.indexOf(a)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var IndexOf$1=IndexOf;class Match{constructor(e,a,s,o,c,d){this.inputType=e,this.type=a,this.input=s,this.cases=o,this.outputs=c,this.otherwise=d}static parse(e,a){if(e.length<5)return a.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return a.error("Expected an even number of arguments.");let s,o;a.expectedType&&a.expectedType.kind!=="value"&&(o=a.expectedType);const c={},d=[];for(let _=2;_<e.length-1;_+=2){let b=e[_];const j=e[_+1];Array.isArray(b)||(b=[b]);const $=a.concat(_);if(b.length===0)return $.error("Expected at least one branch label.");for(const et of b){if(typeof et!="number"&&typeof et!="string")return $.error("Branch labels must be numbers or strings.");if(typeof et=="number"&&Math.abs(et)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof et=="number"&&Math.floor(et)!==et)return $.error("Numeric branch labels must be integer values.");if(!s)s=typeOf(et);else if($.checkSubtype(s,typeOf(et)))return null;if(typeof c[String(et)]<"u")return $.error("Branch labels must be unique.");c[String(et)]=d.length}const _e=a.parse(j,_,o);if(!_e)return null;o=o||_e.type,d.push(_e)}const h=a.parse(e[1],1,ValueType);if(!h)return null;const g=a.parse(e[e.length-1],e.length-1,o);return!g||h.type.kind!=="value"&&a.concat(1).checkSubtype(s,h.type)?null:new Match(s,o,h,c,d,g)}evaluate(e){const a=this.input.evaluate(e);return(typeOf(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),s=[],o={};for(const d of a){const h=o[this.cases[d]];h===void 0?(o[this.cases[d]]=s.length,s.push([this.cases[d],[d]])):s[h][1].push(d)}const c=d=>this.inputType.kind==="number"?Number(d):d;for(const[d,h]of s)h.length===1?e.push(c(h[0])):e.push(h.map(c)),e.push(this.outputs[d].serialize());return e.push(this.otherwise.serialize()),e}}var Match$1=Match;class Case{constructor(e,a,s){this.type=e,this.branches=a,this.otherwise=s}static parse(e,a){if(e.length<4)return a.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return a.error("Expected an odd number of arguments.");let s;a.expectedType&&a.expectedType.kind!=="value"&&(s=a.expectedType);const o=[];for(let d=1;d<e.length-1;d+=2){const h=a.parse(e[d],d,BooleanType);if(!h)return null;const g=a.parse(e[d+1],d+1,s);if(!g)return null;o.push([h,g]),s=s||g.type}const c=a.parse(e[e.length-1],e.length-1,s);return c?new Case(s,o,c):null}evaluate(e){for(const[a,s]of this.branches)if(a.evaluate(e))return s.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[a,s]of this.branches)e(a),e(s);e(this.otherwise)}outputDefined(){return this.branches.every(([e,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(a=>{e.push(a.serialize())}),e}}var Case$1=Case;class Slice{constructor(e,a,s,o){this.type=e,this.input=a,this.beginIndex=s,this.endIndex=o}static parse(e,a){if(e.length<=2||e.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const s=a.parse(e[1],1,ValueType),o=a.parse(e[2],2,NumberType);if(!s||!o)return null;if(!isValidType(s.type,[array$1(ValueType),StringType,ValueType]))return a.error(`Expected first argument to be of type array or string, but found ${toString$1(s.type)} instead`);if(e.length===4){const c=a.parse(e[3],3,NumberType);return c?new Slice(s.type,s,o,c):null}else return new Slice(s.type,s,o)}evaluate(e){const a=this.input.evaluate(e),s=this.beginIndex.evaluate(e);if(!isValidNativeType(a,["string","array"]))throw new RuntimeError$1(`Expected first argument to be of type array or string, but found ${toString$1(typeOf(a))} instead.`);if(this.endIndex){const o=this.endIndex.evaluate(e);return a.slice(s,o)}return a.slice(s)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Slice$1=Slice;function isComparableType(i,e){return i==="=="||i==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function eq(i,e,a){return e===a}function neq(i,e,a){return e!==a}function lt(i,e,a){return e<a}function gt(i,e,a){return e>a}function lteq(i,e,a){return e<=a}function gteq(i,e,a){return e>=a}function eqCollate(i,e,a,s){return s.compare(e,a)===0}function neqCollate(i,e,a,s){return!eqCollate(i,e,a,s)}function ltCollate(i,e,a,s){return s.compare(e,a)<0}function gtCollate(i,e,a,s){return s.compare(e,a)>0}function lteqCollate(i,e,a,s){return s.compare(e,a)<=0}function gteqCollate(i,e,a,s){return s.compare(e,a)>=0}function makeComparison(i,e,a){const s=i!=="=="&&i!=="!=";return class _a{constructor(c,d,h){this.type=BooleanType,this.lhs=c,this.rhs=d,this.collator=h,this.hasUntypedArgument=c.type.kind==="value"||d.type.kind==="value"}static parse(c,d){if(c.length!==3&&c.length!==4)return d.error("Expected two or three arguments.");const h=c[0];let g=d.parse(c[1],1,ValueType);if(!g)return null;if(!isComparableType(h,g.type))return d.concat(1).error(`"${h}" comparisons are not supported for type '${toString$1(g.type)}'.`);let _=d.parse(c[2],2,ValueType);if(!_)return null;if(!isComparableType(h,_.type))return d.concat(2).error(`"${h}" comparisons are not supported for type '${toString$1(_.type)}'.`);if(g.type.kind!==_.type.kind&&g.type.kind!=="value"&&_.type.kind!=="value")return d.error(`Cannot compare types '${toString$1(g.type)}' and '${toString$1(_.type)}'.`);s&&(g.type.kind==="value"&&_.type.kind!=="value"?g=new Assertion$1(_.type,[g]):g.type.kind!=="value"&&_.type.kind==="value"&&(_=new Assertion$1(g.type,[_])));let b=null;if(c.length===4){if(g.type.kind!=="string"&&_.type.kind!=="string"&&g.type.kind!=="value"&&_.type.kind!=="value")return d.error("Cannot use collator to compare non-string types.");if(b=d.parse(c[3],3,CollatorType),!b)return null}return new _a(g,_,b)}evaluate(c){const d=this.lhs.evaluate(c),h=this.rhs.evaluate(c);if(s&&this.hasUntypedArgument){const g=typeOf(d),_=typeOf(h);if(g.kind!==_.kind||!(g.kind==="string"||g.kind==="number"))throw new RuntimeError$1(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${g.kind}, ${_.kind}) instead.`)}if(this.collator&&!s&&this.hasUntypedArgument){const g=typeOf(d),_=typeOf(h);if(g.kind!=="string"||_.kind!=="string")return e(c,d,h)}return this.collator?a(c,d,h,this.collator.evaluate(c)):e(c,d,h)}eachChild(c){c(this.lhs),c(this.rhs),this.collator&&c(this.collator)}outputDefined(){return!0}serialize(){const c=[i];return this.eachChild(d=>{c.push(d.serialize())}),c}}}const Equals=makeComparison("==",eq,eqCollate),NotEquals=makeComparison("!=",neq,neqCollate),LessThan=makeComparison("<",lt,ltCollate),GreaterThan=makeComparison(">",gt,gtCollate),LessThanOrEqual=makeComparison("<=",lteq,lteqCollate),GreaterThanOrEqual=makeComparison(">=",gteq,gteqCollate);class NumberFormat{constructor(e,a,s,o,c,d){this.type=StringType,this.number=e,this.locale=a,this.currency=s,this.unit=o,this.minFractionDigits=c,this.maxFractionDigits=d}static parse(e,a){if(e.length!==3)return a.error("Expected two arguments.");const s=a.parse(e[1],1,NumberType);if(!s)return null;const o=e[2];if(typeof o!="object"||Array.isArray(o))return a.error("NumberFormat options argument must be an object.");let c=null;if(o.locale&&(c=a.parse(o.locale,1,StringType),!c))return null;let d=null;if(o.currency&&(d=a.parse(o.currency,1,StringType),!d))return null;let h=null;if(o.unit&&(h=a.parse(o.unit,1,StringType),!h))return null;let g=null;if(o["min-fraction-digits"]&&(g=a.parse(o["min-fraction-digits"],1,NumberType),!g))return null;let _=null;return o["max-fraction-digits"]&&(_=a.parse(o["max-fraction-digits"],1,NumberType),!_)?null:new NumberFormat(s,c,d,h,g,_)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Length{constructor(e){this.type=NumberType,this.input=e}static parse(e,a){if(e.length!==2)return a.error(`Expected 1 argument, but found ${e.length-1} instead.`);const s=a.parse(e[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${toString$1(s.type)} instead.`):new Length(s):null}evaluate(e){const a=this.input.evaluate(e);if(typeof a=="string")return a.length;if(Array.isArray(a))return a.length;throw new RuntimeError$1(`Expected value to be of type string or array, but found ${toString$1(typeOf(a))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(a=>{e.push(a.serialize())}),e}}var Length$1=Length;const expressions={"==":Equals,"!=":NotEquals,">":GreaterThan,"<":LessThan,">=":GreaterThanOrEqual,"<=":LessThanOrEqual,array:Assertion$1,at:At$1,boolean:Assertion$1,case:Case$1,coalesce:Coalesce$1,collator:CollatorExpression,format:FormatExpression,image:ImageExpression,in:In$1,"index-of":IndexOf$1,interpolate:Interpolate$1,"interpolate-hcl":Interpolate$1,"interpolate-lab":Interpolate$1,length:Length$1,let:Let$1,literal:Literal$1,match:Match$1,number:Assertion$1,"number-format":NumberFormat,object:Assertion$1,slice:Slice$1,step:Step$1,string:Assertion$1,"to-boolean":Coercion$1,"to-color":Coercion$1,"to-number":Coercion$1,"to-string":Coercion$1,var:Var$1,within:Within$1};function rgba(i,[e,a,s,o]){e=e.evaluate(i),a=a.evaluate(i),s=s.evaluate(i);const c=o?o.evaluate(i):1,d=validateRGBA(e,a,s,c);if(d)throw new RuntimeError$1(d);return new Color$1(e/255*c,a/255*c,s/255*c,c)}function has(i,e){return i in e}function get(i,e){const a=e[i];return typeof a>"u"?null:a}function binarySearch(i,e,a,s){for(;a<=s;){const o=a+s>>1;if(e[o]===i)return!0;e[o]>i?s=o-1:a=o+1}return!1}function varargs(i){return{type:i}}CompoundExpression$1.register(expressions,{error:[ErrorType,[StringType],(i,[e])=>{throw new RuntimeError$1(e.evaluate(i))}],typeof:[StringType,[ValueType],(i,[e])=>toString$1(typeOf(e.evaluate(i)))],"to-rgba":[array$1(NumberType,4),[ColorType],(i,[e])=>e.evaluate(i).toArray()],rgb:[ColorType,[NumberType,NumberType,NumberType],rgba],rgba:[ColorType,[NumberType,NumberType,NumberType,NumberType],rgba],has:{type:BooleanType,overloads:[[[StringType],(i,[e])=>has(e.evaluate(i),i.properties())],[[StringType,ObjectType],(i,[e,a])=>has(e.evaluate(i),a.evaluate(i))]]},get:{type:ValueType,overloads:[[[StringType],(i,[e])=>get(e.evaluate(i),i.properties())],[[StringType,ObjectType],(i,[e,a])=>get(e.evaluate(i),a.evaluate(i))]]},"feature-state":[ValueType,[StringType],(i,[e])=>get(e.evaluate(i),i.featureState||{})],properties:[ObjectType,[],i=>i.properties()],"geometry-type":[StringType,[],i=>i.geometryType()],id:[ValueType,[],i=>i.id()],zoom:[NumberType,[],i=>i.globals.zoom],pitch:[NumberType,[],i=>i.globals.pitch||0],"distance-from-center":[NumberType,[],i=>i.distanceFromCenter()],"heatmap-density":[NumberType,[],i=>i.globals.heatmapDensity||0],"line-progress":[NumberType,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[NumberType,[],i=>i.globals.skyRadialProgress||0],accumulated:[ValueType,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[NumberType,varargs(NumberType),(i,e)=>{let a=0;for(const s of e)a+=s.evaluate(i);return a}],"*":[NumberType,varargs(NumberType),(i,e)=>{let a=1;for(const s of e)a*=s.evaluate(i);return a}],"-":{type:NumberType,overloads:[[[NumberType,NumberType],(i,[e,a])=>e.evaluate(i)-a.evaluate(i)],[[NumberType],(i,[e])=>-e.evaluate(i)]]},"/":[NumberType,[NumberType,NumberType],(i,[e,a])=>e.evaluate(i)/a.evaluate(i)],"%":[NumberType,[NumberType,NumberType],(i,[e,a])=>e.evaluate(i)%a.evaluate(i)],ln2:[NumberType,[],()=>Math.LN2],pi:[NumberType,[],()=>Math.PI],e:[NumberType,[],()=>Math.E],"^":[NumberType,[NumberType,NumberType],(i,[e,a])=>Math.pow(e.evaluate(i),a.evaluate(i))],sqrt:[NumberType,[NumberType],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[NumberType,[NumberType],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[NumberType,[NumberType],(i,[e])=>Math.log(e.evaluate(i))],log2:[NumberType,[NumberType],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[NumberType,[NumberType],(i,[e])=>Math.sin(e.evaluate(i))],cos:[NumberType,[NumberType],(i,[e])=>Math.cos(e.evaluate(i))],tan:[NumberType,[NumberType],(i,[e])=>Math.tan(e.evaluate(i))],asin:[NumberType,[NumberType],(i,[e])=>Math.asin(e.evaluate(i))],acos:[NumberType,[NumberType],(i,[e])=>Math.acos(e.evaluate(i))],atan:[NumberType,[NumberType],(i,[e])=>Math.atan(e.evaluate(i))],min:[NumberType,varargs(NumberType),(i,e)=>Math.min(...e.map(a=>a.evaluate(i)))],max:[NumberType,varargs(NumberType),(i,e)=>Math.max(...e.map(a=>a.evaluate(i)))],abs:[NumberType,[NumberType],(i,[e])=>Math.abs(e.evaluate(i))],round:[NumberType,[NumberType],(i,[e])=>{const a=e.evaluate(i);return a<0?-Math.round(-a):Math.round(a)}],floor:[NumberType,[NumberType],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[NumberType,[NumberType],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[BooleanType,[StringType,ValueType],(i,[e,a])=>i.properties()[e.value]===a.value],"filter-id-==":[BooleanType,[ValueType],(i,[e])=>i.id()===e.value],"filter-type-==":[BooleanType,[StringType],(i,[e])=>i.geometryType()===e.value],"filter-<":[BooleanType,[StringType,ValueType],(i,[e,a])=>{const s=i.properties()[e.value],o=a.value;return typeof s==typeof o&&s<o}],"filter-id-<":[BooleanType,[ValueType],(i,[e])=>{const a=i.id(),s=e.value;return typeof a==typeof s&&a<s}],"filter->":[BooleanType,[StringType,ValueType],(i,[e,a])=>{const s=i.properties()[e.value],o=a.value;return typeof s==typeof o&&s>o}],"filter-id->":[BooleanType,[ValueType],(i,[e])=>{const a=i.id(),s=e.value;return typeof a==typeof s&&a>s}],"filter-<=":[BooleanType,[StringType,ValueType],(i,[e,a])=>{const s=i.properties()[e.value],o=a.value;return typeof s==typeof o&&s<=o}],"filter-id-<=":[BooleanType,[ValueType],(i,[e])=>{const a=i.id(),s=e.value;return typeof a==typeof s&&a<=s}],"filter->=":[BooleanType,[StringType,ValueType],(i,[e,a])=>{const s=i.properties()[e.value],o=a.value;return typeof s==typeof o&&s>=o}],"filter-id->=":[BooleanType,[ValueType],(i,[e])=>{const a=i.id(),s=e.value;return typeof a==typeof s&&a>=s}],"filter-has":[BooleanType,[ValueType],(i,[e])=>e.value in i.properties()],"filter-has-id":[BooleanType,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[BooleanType,[array$1(StringType)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[BooleanType,[array$1(ValueType)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[BooleanType,[StringType,array$1(ValueType)],(i,[e,a])=>a.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[BooleanType,[StringType,array$1(ValueType)],(i,[e,a])=>binarySearch(i.properties()[e.value],a.value,0,a.value.length-1)],all:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(i,[e,a])=>e.evaluate(i)&&a.evaluate(i)],[varargs(BooleanType),(i,e)=>{for(const a of e)if(!a.evaluate(i))return!1;return!0}]]},any:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(i,[e,a])=>e.evaluate(i)||a.evaluate(i)],[varargs(BooleanType),(i,e)=>{for(const a of e)if(a.evaluate(i))return!0;return!1}]]},"!":[BooleanType,[BooleanType],(i,[e])=>!e.evaluate(i)],"is-supported-script":[BooleanType,[StringType],(i,[e])=>{const a=i.globals&&i.globals.isSupportedScript;return a?a(e.evaluate(i)):!0}],upcase:[StringType,[StringType],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[StringType,[StringType],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[StringType,varargs(ValueType),(i,e)=>e.map(a=>toString(a.evaluate(i))).join("")],"resolved-locale":[StringType,[CollatorType],(i,[e])=>e.evaluate(i).resolvedLocale()]});var definitions=expressions;function success(i){return{result:"success",value:i}}function error(i){return{result:"error",value:i}}function supportsPropertyExpression(i){return i["property-type"]==="data-driven"}function supportsZoomExpression(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function supportsInterpolation(i){return!!i.expression&&i.expression.interpolated}function isFunction(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}class StyleExpression{constructor(e,a){this.expression=e,this._warningHistory={},this._evaluator=new EvaluationContext$1,this._defaultValue=a?getDefaultValue(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(e,a,s,o,c,d,h,g){return this._evaluator.globals=e,this._evaluator.feature=a,this._evaluator.featureState=s,this._evaluator.canonical=o||null,this._evaluator.availableImages=c||null,this._evaluator.formattedSection=d,this._evaluator.featureTileCoord=h||null,this._evaluator.featureDistanceData=g||null,this.expression.evaluate(this._evaluator)}evaluate(e,a,s,o,c,d,h,g){this._evaluator.globals=e,this._evaluator.feature=a||null,this._evaluator.featureState=s||null,this._evaluator.canonical=o||null,this._evaluator.availableImages=c||null,this._evaluator.formattedSection=d||null,this._evaluator.featureTileCoord=h||null,this._evaluator.featureDistanceData=g||null;try{const _=this.expression.evaluate(this._evaluator);if(_==null||typeof _=="number"&&_!==_)return this._defaultValue;if(this._enumValues&&!(_ in this._enumValues))throw new RuntimeError$1(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(_)} instead.`);return _}catch(_){return this._warningHistory[_.message]||(this._warningHistory[_.message]=!0,typeof console<"u"&&console.warn(_.message)),this._defaultValue}}}function isExpression(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in definitions}function createExpression(i,e){const a=new ParsingContext$1(definitions,[],e?getExpectedType(e):void 0),s=a.parse(i,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return s?success(new StyleExpression(s,e)):error(a.errors)}class ZoomConstantExpression{constructor(e,a){this.kind=e,this._styleExpression=a,this.isStateDependent=e!=="constant"&&!isStateConstant(a.expression)}evaluateWithoutErrorHandling(e,a,s,o,c,d){return this._styleExpression.evaluateWithoutErrorHandling(e,a,s,o,c,d)}evaluate(e,a,s,o,c,d){return this._styleExpression.evaluate(e,a,s,o,c,d)}}class ZoomDependentExpression{constructor(e,a,s,o){this.kind=e,this.zoomStops=s,this._styleExpression=a,this.isStateDependent=e!=="camera"&&!isStateConstant(a.expression),this.interpolationType=o}evaluateWithoutErrorHandling(e,a,s,o,c,d){return this._styleExpression.evaluateWithoutErrorHandling(e,a,s,o,c,d)}evaluate(e,a,s,o,c,d){return this._styleExpression.evaluate(e,a,s,o,c,d)}interpolationFactor(e,a,s){return this.interpolationType?Interpolate$1.interpolationFactor(this.interpolationType,e,a,s):0}}function createPropertyExpression(i,e){if(i=createExpression(i,e),i.result==="error")return i;const a=i.value.expression,s=isFeatureConstant(a);if(!s&&!supportsPropertyExpression(e))return error([new ParsingError$1("","data expressions not supported")]);const o=isGlobalPropertyConstant(a,["zoom","pitch","distance-from-center"]);if(!o&&!supportsZoomExpression(e))return error([new ParsingError$1("","zoom expressions not supported")]);const c=findZoomCurve(a);if(!c&&!o)return error([new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(c instanceof ParsingError$1)return error([c]);if(c instanceof Interpolate$1&&!supportsInterpolation(e))return error([new ParsingError$1("",'"interpolate" expressions cannot be used with this property')]);if(!c)return success(s?new ZoomConstantExpression("constant",i.value):new ZoomConstantExpression("source",i.value));const d=c instanceof Interpolate$1?c.interpolation:void 0;return success(s?new ZoomDependentExpression("camera",i.value,c.labels,d):new ZoomDependentExpression("composite",i.value,c.labels,d))}function findZoomCurve(i){let e=null;if(i instanceof Let$1)e=findZoomCurve(i.result);else if(i instanceof Coalesce$1){for(const a of i.args)if(e=findZoomCurve(a),e)break}else(i instanceof Step$1||i instanceof Interpolate$1)&&i.input instanceof CompoundExpression$1&&i.input.name==="zoom"&&(e=i);return e instanceof ParsingError$1||i.eachChild(a=>{const s=findZoomCurve(a);s instanceof ParsingError$1?e=s:!e&&s?e=new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&s&&e!==s&&(e=new ParsingError$1("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function getExpectedType(i){const e={color:ColorType,string:StringType,number:NumberType,enum:StringType,boolean:BooleanType,formatted:FormattedType,resolvedImage:ResolvedImageType};return i.type==="array"?array$1(e[i.value]||ValueType,i.length):e[i.type]}function getDefaultValue(i){return i.type==="color"&&(isFunction(i.default)||Array.isArray(i.default))?new Color$1(0,0,0,0):i.type==="color"?Color$1.parse(i.default)||null:i.default===void 0?null:i.default}function unbundle(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function deepUnbundle(i){if(Array.isArray(i))return i.map(deepUnbundle);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const e={};for(const a in i)e[a]=deepUnbundle(i[a]);return e}return unbundle(i)}var spec={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function isExpressionFilter(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!isExpressionFilter(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function createFilter(i,e="fill"){if(i==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};isExpressionFilter(i)||(i=convertFilter(i));const a=i;let s=!0;try{s=extractStaticFilter(a)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(a,null,2)}
        `)}const o=spec[`filter_${e}`],c=createExpression(s,o);let d=null;if(c.result==="error")throw new Error(c.value.map(b=>`${b.key}: ${b.message}`).join(", "));d=(b,j,$)=>c.value.evaluate(b,j,{},$);let h=null,g=null;if(s!==a){const b=createExpression(a,o);if(b.result==="error")throw new Error(b.value.map(j=>`${j.key}: ${j.message}`).join(", "));h=(j,$,_e,et,tt)=>b.value.evaluate(j,$,{},_e,void 0,void 0,et,tt),g=!isFeatureConstant(b.value.expression)}d=d;const _=geometryNeeded(s);return{filter:d,dynamicFilter:h||void 0,needGeometry:_,needFeature:!!g}}function extractStaticFilter(i){if(!isDynamicFilter(i))return i;let e=deepUnbundle(i);return unionDynamicBranches(e),e=collapseDynamicBooleanExpressions(e),e}function collapseDynamicBooleanExpressions(i){if(!Array.isArray(i))return i;const e=collapsedExpression(i);return e===!0?e:e.map(a=>collapseDynamicBooleanExpressions(a))}function unionDynamicBranches(i){let e=!1;const a=[];if(i[0]==="case"){for(let s=1;s<i.length-1;s+=2)e=e||isDynamicFilter(i[s]),a.push(i[s+1]);a.push(i[i.length-1])}else if(i[0]==="match"){e=e||isDynamicFilter(i[1]);for(let s=2;s<i.length-1;s+=2)a.push(i[s+1]);a.push(i[i.length-1])}else if(i[0]==="step"){e=e||isDynamicFilter(i[1]);for(let s=1;s<i.length-1;s+=2)a.push(i[s+1])}e&&(i.length=0,i.push("any",...a));for(let s=1;s<i.length;s++)unionDynamicBranches(i[s])}function isDynamicFilter(i){if(!Array.isArray(i))return!1;if(isRootExpressionDynamic(i[0]))return!0;for(let e=1;e<i.length;e++){const a=i[e];if(isDynamicFilter(a))return!0}return!1}function isRootExpressionDynamic(i){return i==="pitch"||i==="distance-from-center"}const dynamicConditionExpressions=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function collapsedExpression(i){if(dynamicConditionExpressions.has(i[0]))for(let e=1;e<i.length;e++){const a=i[e];if(isDynamicFilter(a))return!0}return i}function compare(i,e){return i<e?-1:i>e?1:0}function geometryNeeded(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let e=1;e<i.length;e++)if(geometryNeeded(i[e]))return!0;return!1}function convertFilter(i){if(!i)return!0;const e=i[0];return i.length<=1?e!=="any":e==="=="?convertComparisonOp(i[1],i[2],"=="):e==="!="?convertNegation(convertComparisonOp(i[1],i[2],"==")):e==="<"||e===">"||e==="<="||e===">="?convertComparisonOp(i[1],i[2],e):e==="any"?convertDisjunctionOp(i.slice(1)):e==="all"?["all"].concat(i.slice(1).map(convertFilter)):e==="none"?["all"].concat(i.slice(1).map(convertFilter).map(convertNegation)):e==="in"?convertInOp(i[1],i.slice(2)):e==="!in"?convertNegation(convertInOp(i[1],i.slice(2))):e==="has"?convertHasOp(i[1]):e==="!has"?convertNegation(convertHasOp(i[1])):e==="within"?i:!0}function convertComparisonOp(i,e,a){switch(i){case"$type":return[`filter-type-${a}`,e];case"$id":return[`filter-id-${a}`,e];default:return[`filter-${a}`,i,e]}}function convertDisjunctionOp(i){return["any"].concat(i.map(convertFilter))}function convertInOp(i,e){if(e.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(a=>typeof a!=typeof e[0])?["filter-in-large",i,["literal",e.sort(compare)]]:["filter-in-small",i,["literal",e]]}}function convertHasOp(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function convertNegation(i){return["!",i]}var refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function deref(i,e){const a={};for(const s in i)s!=="ref"&&(a[s]=i[s]);return refProperties.forEach(s=>{s in e&&(a[s]=e[s])}),a}function derefLayers(i){i=i.slice();const e=Object.create(null);for(let a=0;a<i.length;a++)e[i[a].id]=i[a];for(let a=0;a<i.length;a++)"ref"in i[a]&&(i[a]=deref(i[a],e[i[a].ref]));return i}var fontWeights={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},sp=" ",italicRE=/(italic|oblique)$/i,fontCache={},mapboxToCssFont=function(i,e,a){var s=fontCache[i];if(!s){Array.isArray(i)||(i=[i]);for(var o=400,c="normal",d=[],h,g,_=0,b=i.length;_<b;++_){var j=i[_],$=j.split(" "),_e=$[$.length-1].toLowerCase();_e=="normal"||_e=="italic"||_e=="oblique"?(c=g?c:_e,g=!0,$.pop(),_e=$[$.length-1].toLowerCase()):italicRE.test(_e)&&(_e=_e.replace(italicRE,""),c=g?c:$[$.length-1].replace(_e,""),g=!0);for(var et in fontWeights){var tt=$.length>1?$[$.length-2].toLowerCase():"";if(_e==et||_e==et.replace("-","")||tt+"-"+_e==et){o=h?o:fontWeights[et],$.pop(),tt&&et.startsWith(tt)&&$.pop();break}}!h&&typeof _e=="number"&&(o=_e,h=!0);var it=$.join(sp).replace("Klokantech Noto Sans","Noto Sans");it.indexOf(sp)!==-1&&(it='"'+it+'"'),d.push(it)}s=fontCache[i]=[c,o,d]}return s[0]+sp+s[1]+sp+e+"px"+(a?"/"+a:"")+sp+s[2]},mb2css=getDefaultExportFromCjs(mapboxToCssFont);const mapboxBaseUrl="https://api.mapbox.com";function getMapboxPath(i){const e="mapbox://";return i.indexOf(e)!==0?"":i.slice(e.length)}function normalizeSpriteUrl(i,e,a){const s=getMapboxPath(i);if(!s)return decodeURI(new URL(i,a).href);const o="sprites/";if(s.indexOf(o)!==0)throw new Error(`unexpected sprites url: ${i}`);const c=s.slice(o.length);return`${mapboxBaseUrl}/styles/v1/${c}/sprite?access_token=${e}`}function normalizeStyleUrl(i,e){const a=getMapboxPath(i);if(!a)return decodeURI(new URL(i,location.href).href);const s="styles/";if(a.indexOf(s)!==0)throw new Error(`unexpected style url: ${i}`);const o=a.slice(s.length);return`${mapboxBaseUrl}/styles/v1/${o}?&access_token=${e}`}function normalizeSourceUrl(i,e,a,s){const o=new URL(i,s),c=getMapboxPath(i);if(!c)return e&&(o.searchParams.has(a)||o.searchParams.set(a,e)),decodeURI(o.href);if(c==="mapbox.satellite"){const d=window.devicePixelRatio>=1.5?"@2x":"";return`https://api.mapbox.com/v4/${c}/{z}/{x}/{y}${d}.webp?access_token=${e}`}return`https://{a-d}.tiles.mapbox.com/v4/${c}/{z}/{x}/{y}.vector.pbf?access_token=${e}`}const functionCacheByStyleId={},filterCacheByStyleId={};let styleId=0;function getStyleId(i){return i.id||(i.id=styleId++),i.id}function getStyleFunctionKey(i,e){return getStyleId(i)+"."+getUid(e)}function getFunctionCache(i){let e=functionCacheByStyleId[i.id];return e||(e={},functionCacheByStyleId[getStyleId(i)]=e),e}function getFilterCache(i){let e=filterCacheByStyleId[i.id];return e||(e={},filterCacheByStyleId[getStyleId(i)]=e),e}function deg2rad(i){return i*Math.PI/180}const defaultResolutions=function(){const i=[];for(let e=78271.51696402048;i.length<=24;e/=2)i.push(e);return i}();function createCanvas(i,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(i,e);const a=document.createElement("canvas");return a.width=i,a.height=e,a}function getZoomForResolution(i,e){let a=0;const s=e.length;for(;a<s;++a)if(e[a]<i&&a+1<s){const c=e[a]/e[a+1];return a+Math.log(e[a]/i)/Math.log(c)}return s-1}function getResolutionForZoom(i,e){const a=Math.floor(i),s=Math.pow(2,i-a);return e[a]/s}const pendingRequests={};function fetchResource(i,e,a={},s){if(e in pendingRequests)return s&&(s.request=pendingRequests[e][0]),pendingRequests[e][1];const o=a.transformRequest&&a.transformRequest(e,i)||e,c=toPromise(()=>o).then(d=>(d instanceof Request||(d=new Request(d)),d.headers.get("Accept")||d.headers.set("Accept","application/json"),s&&(s.request=d),fetch(d).then(function(h){return delete pendingRequests[e],h.ok?h.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(h){return delete pendingRequests[e],Promise.reject(new Error("Error fetching source "+e))})));return pendingRequests[e]=[o,c],c}function getGlStyle(i,e){if(typeof i=="string")if(i.trim().startsWith("{"))try{const a=JSON.parse(i);return Promise.resolve(a)}catch(a){return Promise.reject(a)}else return i=normalizeStyleUrl(i,e.accessToken),fetchResource("Style",i,e);else return Promise.resolve(i)}const tilejsonCache={};function getTileJson(i,e,a={}){const s=[e,JSON.stringify(i)].toString();let o=tilejsonCache[s];if(!o||a.transformRequest){let c;a.transformRequest&&(c=(h,g)=>{const _=a.transformRequest&&a.transformRequest(g,"Tiles")||g;if(h instanceof VectorTile$1)h.setLoader((b,j,$)=>{toPromise(()=>_).then(_e=>{fetch(_e).then(et=>et.arrayBuffer()).then(et=>{const it=h.getFormat().readFeatures(et,{extent:b,featureProjection:$});h.setFeatures(it)}).catch(et=>h.setState(TileState.ERROR))})});else{const b=h.getImage();toPromise(()=>_).then(j=>{j instanceof Request?fetch(j).then($=>$.blob()).then($=>{const _e=URL.createObjectURL($);b.addEventListener("load",()=>URL.revokeObjectURL(_e)),b.addEventListener("error",()=>URL.revokeObjectURL(_e)),b.src=_e}).catch($=>h.setState(TileState.ERROR)):b.src=j})}});const d=i.url;if(d&&!i.tiles){const h=normalizeSourceUrl(d,a.accessToken,a.accessTokenParam||"access_token",e||location.href);if(d.startsWith("mapbox://"))o=Promise.resolve({tileJson:Object.assign({},i,{url:void 0,tiles:expandUrl(h)}),tileLoadFunction:c});else{const g={};o=fetchResource("Source",h,a,g).then(function(_){return _.tiles=_.tiles.map(function(b){return _.scheme==="tms"&&(b=b.replace("{y}","{-y}")),normalizeSourceUrl(b,a.accessToken,a.accessTokenParam||"access_token",g.request.url)}),Promise.resolve({tileJson:_,tileLoadFunction:c})})}}else i=Object.assign({},i,{tiles:i.tiles.map(function(h){return i.scheme==="tms"&&(h=h.replace("{y}","{-y}")),normalizeSourceUrl(h,a.accessToken,a.accessTokenParam||"access_token",e||location.href)})}),o=Promise.resolve({tileJson:Object.assign({},i),tileLoadFunction:c});tilejsonCache[s]=o}return o}function drawIconHalo(i,e,a,s){const o=[2*a*e.pixelRatio+e.width,2*a*e.pixelRatio+e.height],c=createCanvas(o[0],o[1]),d=c.getContext("2d");d.drawImage(i,e.x,e.y,e.width,e.height,a*e.pixelRatio,a*e.pixelRatio,e.width,e.height);const h=d.getImageData(0,0,o[0],o[1]);d.globalCompositeOperation="destination-over",d.fillStyle=`rgba(${s.r*255},${s.g*255},${s.b*255},${s.a})`;const g=h.data;for(let _=0,b=h.width;_<b;++_)for(let j=0,$=h.height;j<$;++j){const _e=(j*b+_)*4;g[_e+3]>0&&d.arc(_,j,a*e.pixelRatio,0,2*Math.PI)}return d.fill(),c}function smoothstep(i,e,a){const s=Math.max(0,Math.min(1,(a-i)/(e-i)));return s*s*(3-2*s)}function drawSDF(i,e,a){const s=createCanvas(e.width,e.height),o=s.getContext("2d");o.drawImage(i,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const c=o.getImageData(0,0,e.width,e.height),d=c.data;for(let h=0,g=c.width;h<g;++h)for(let _=0,b=c.height;_<b;++_){const j=(_*g+h)*4,$=d[j+3]/255,_e=.75,et=.1,tt=smoothstep(_e-et,_e+et,$);tt>0?(d[j+0]=Math.round(255*a.r*tt),d[j+1]=Math.round(255*a.g*tt),d[j+2]=Math.round(255*a.b*tt),d[j+3]=Math.round(255*tt)):d[j+3]=0}return o.putImageData(c,0,0),s}const hairSpacePool=Array(256).join(" ");function applyLetterSpacing(i,e){if(e>=.05){let a="";const s=i.split(`
`),o=hairSpacePool.slice(0,Math.round(e/.1));for(let c=0,d=s.length;c<d;++c)c>0&&(a+=`
`),a+=s[c].split("").join(o);return a}return i}let measureContext;function getMeasureContext(){return measureContext||(measureContext=createCanvas(1,1).getContext("2d")),measureContext}function measureText(i,e){return getMeasureContext().measureText(i).width+(i.length-1)*e}const measureCache={};function wrapText(i,e,a,s){if(i.indexOf(`
`)!==-1){const d=i.split(`
`),h=[];for(let g=0,_=d.length;g<_;++g)h.push(wrapText(d[g],e,a,s));return h.join(`
`)}const o=a+","+e+","+i+","+s;let c=measureCache[o];if(!c){const d=i.split(" ");if(d.length>1){const h=getMeasureContext();h.font=e;const _=h.measureText("M").width*a;let b="";const j=[];for(let $=0,_e=d.length;$<_e;++$){const et=d[$],tt=b+(b?" ":"")+et;measureText(tt,s)<=_?b=tt:(b&&j.push(b),b=et)}b&&j.push(b);for(let $=0,_e=j.length;$<_e&&_e>1;++$){const et=j[$];if(measureText(et,s)<_*.35){const tt=$>0?measureText(j[$-1],s):1/0,it=$<_e-1?measureText(j[$+1],s):1/0;j.splice($,1),_e-=1,tt<it?(j[$-1]+=" "+et,$-=1):j[$]=et+" "+j[$]}}for(let $=0,_e=j.length-1;$<_e;++$){const et=j[$],tt=j[$+1];if(measureText(et,s)>_*.7&&measureText(tt,s)<_*.6){const it=et.split(" "),nt=it.pop();measureText(nt,s)<_*.2&&(j[$]=it.join(" "),j[$+1]=nt+" "+tt),_e-=1}}c=j.join(`
`)}else c=i;c=applyLetterSpacing(c,s),measureCache[o]=c}return c}const fontFamilyRegEx=/font-family: ?([^;]*);/,stripQuotesRegEx=/("|')/g;let loadedFontFamilies;function hasFontFamily(i){if(!loadedFontFamilies){loadedFontFamilies={};const e=document.styleSheets;for(let a=0,s=e.length;a<s;++a){const o=e[a];try{const c=o.rules||o.cssRules;if(c)for(let d=0,h=c.length;d<h;++d){const g=c[d];if(g.type==5){const _=g.cssText.match(fontFamilyRegEx);loadedFontFamilies[_[1].replace(stripQuotesRegEx,"")]=!0}}}catch{}}}return i in loadedFontFamilies}const processedFontFamilies={};function getFonts(i,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const a=i.toString();if(a in processedFontFamilies)return processedFontFamilies[a];const s=[];for(let o=0,c=i.length;o<c;++o){i[o]=i[o].replace("Arial Unicode MS","Arial");const d=i[o],h=mb2css(d,1);registerFont(h);const g=h.split(" ");s.push([g.slice(3).join(" ").replace(/"/g,""),g[1],g[0]])}for(let o=0,c=s.length;o<c;++o){const d=s[o],h=d[0];if(!hasFontFamily(h)&&checkedFonts.get(`${d[2]}
${d[1]} 
${h}`)!==100){const g=e.replace("{font-family}",h.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",h.replace(/ /g,"+")).replace("{fontweight}",d[1]).replace("{-fontstyle}",d[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",d[2]);if(!document.querySelector('link[href="'+g+'"]')){const _=document.createElement("link");_.href=g,_.rel="stylesheet",document.head.appendChild(_)}}}return processedFontFamilies[a]=i,i}const types={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},anchor={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},expressionData=function(i,e){const a=createPropertyExpression(i,e);if(a.result==="error")throw new Error(a.value.map(s=>`${s.key}: ${s.message}`).join(", "));return a.value},emptyObj$1={},zoomObj={zoom:0};let renderFeatureCoordinates,renderFeature;function getValue(i,e,a,s,o,c,d){const h=i.id;c||(c={},console.warn("No functionCache provided to getValue()")),c[h]||(c[h]={});const g=c[h];if(!g[a]){let _=(i[e]||emptyObj$1)[a];const b=spec[`${e}_${i.type}`][a];_===void 0&&(_=b.default);let j=isExpression(_);if(!j&&isFunction(_)&&(_=convertFunction(_,b),j=!0),j){const $=expressionData(_,b);g[a]=$.evaluate.bind($)}else b.type=="color"&&(_=Color$1.parse(_)),g[a]=function(){return _}}return zoomObj.zoom=s,g[a](zoomObj,o,d)}function getDeclutterMode(i,e,a,s,o){return getValue(i,"layout",`${s}-allow-overlap`,e,a,o)?getValue(i,"layout",`${s}-ignore-placement`,e,a,o)?"none":"obstacle":"declutter"}function evaluateFilter(i,e,a,s,o){return o||console.warn("No filterCache provided to evaluateFilter()"),i in o||(o[i]=createFilter(e).filter),zoomObj.zoom=s,o[i](zoomObj,a)}function colorWithOpacity(i,e){if(i){if(i.a===0||e===0)return;const a=i.a;return e=e===void 0?1:e,a===0?"transparent":"rgba("+Math.round(i.r*255/a)+","+Math.round(i.g*255/a)+","+Math.round(i.b*255/a)+","+a*e+")"}return i}const templateRegEx=/\{[^{}}]*\}/g;function fromTemplate(i,e){return i.replace(templateRegEx,function(a){return e[a.slice(1,-1)]||""})}const styleFunctionArgs={};function stylefunction(i,e,a,s=defaultResolutions,o=void 0,c=void 0,d=void 0,h=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");styleFunctionArgs[getStyleFunctionKey(e,i)]=Array.from(arguments);let g,_,b;if(c){if(typeof Image<"u"){const ut=new Image;let ct;toPromise(()=>c).then(ht=>{ht instanceof Request?fetch(ht).then(mt=>mt.blob()).then(mt=>{ct=URL.createObjectURL(mt),ut.src=ct}).catch(()=>{}):(ut.crossOrigin="anonymous",ut.src=ht,ct&&URL.revokeObjectURL(ct))}),ut.onload=function(){g=ut,_=[ut.width,ut.height],i.changed(),ut.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const ut=self;ut.postMessage({action:"loadImage",src:c}),ut.addEventListener("message",function(ht){ht.data.action==="imageLoaded"&&ht.data.src===c&&(g=ht.data.image,_=[g.width,g.height])})}}const j=derefLayers(e.layers),$={},_e=[],et={},tt={},it=getFunctionCache(e),nt=getFilterCache(e);let rt;for(let ut=0,ct=j.length;ut<ct;++ut){const ht=j[ut],mt=ht.id;if(typeof a=="string"&&ht.source==a||Array.isArray(a)&&a.indexOf(mt)!==-1){const pt=ht["source-layer"];if(rt){if(ht.source!==rt)throw new Error(`Layer "${mt}" does not use source "${rt}`)}else{rt=ht.source;const yt=e.sources[rt];if(!yt)throw new Error(`Source "${rt}" is not defined`);const Ct=yt.type;if(Ct!=="vector"&&Ct!=="geojson")throw new Error(`Source "${rt}" is not of type "vector" or "geojson", but "${Ct}"`)}let ft=$[pt];ft||(ft=[],$[pt]=ft),ft.push({layer:ht,index:ut}),_e.push(mt)}}const at=new Stroke,st=new Fill,ot=[],dt=function(ut,ct,ht){const mt=ut.getProperties(),pt=$[mt.layer];if(!pt)return;let ft=s.indexOf(ct);ft==-1&&(ft=getZoomForResolution(ct,s));const yt=types[ut.getGeometry().getType()],Ct={id:ut.getId(),properties:mt,type:yt},_t=i.get("mapbox-featurestate")[ut.getId()];let St=-1;for(let Pt=0,bt=pt.length;Pt<bt;++Pt){const Mt=pt[Pt],It=Mt.layer,Nt=It.id;if(ht!==void 0&&ht!==Nt)continue;const wt=It.layout||emptyObj$1,Wt=It.paint||emptyObj$1;if(wt.visibility==="none"||"minzoom"in It&&ft<It.minzoom||"maxzoom"in It&&ft>=It.maxzoom)continue;const jt=It.filter;if(!jt||evaluateFilter(Nt,jt,Ct,ft,nt)){let Ft,zt,Yt,Jt,tn,Lt;const vn=Mt.index;if(yt==3&&(It.type=="fill"||It.type=="fill-extrusion"))if(zt=getValue(It,"paint",It.type+"-opacity",ft,Ct,it,_t),It.type+"-pattern"in Wt){const xt=getValue(It,"paint",It.type+"-pattern",ft,Ct,it,_t);if(xt){const Tt=typeof xt=="string"?fromTemplate(xt,mt):xt.toString();if(g&&o&&o[Tt]){++St,Lt=ot[St],(!Lt||!Lt.getFill()||Lt.getStroke()||Lt.getText())&&(Lt=new Style({fill:new Fill}),ot[St]=Lt),Yt=Lt.getFill(),Lt.setZIndex(vn);const Rt=Tt+"."+zt;let Ot=tt[Rt];if(!Ot){const kt=o[Tt],Gt=createCanvas(kt.width,kt.height),qt=Gt.getContext("2d");qt.globalAlpha=zt,qt.drawImage(g,kt.x,kt.y,kt.width,kt.height,0,0,kt.width,kt.height),Ot=qt.createPattern(Gt,"repeat"),tt[Rt]=Ot}Yt.setColor(Ot)}}}else Ft=colorWithOpacity(getValue(It,"paint",It.type+"-color",ft,Ct,it,_t),zt),It.type+"-outline-color"in Wt&&(tn=colorWithOpacity(getValue(It,"paint",It.type+"-outline-color",ft,Ct,it,_t),zt)),tn||(tn=Ft),(Ft||tn)&&(++St,Lt=ot[St],(!Lt||Ft&&!Lt.getFill()||!Ft&&Lt.getFill()||tn&&!Lt.getStroke()||!tn&&Lt.getStroke()||Lt.getText())&&(Lt=new Style({fill:Ft?new Fill:void 0,stroke:tn?new Stroke:void 0}),ot[St]=Lt),Ft&&(Yt=Lt.getFill(),Yt.setColor(Ft)),tn&&(Jt=Lt.getStroke(),Jt.setColor(tn),Jt.setWidth(.5)),Lt.setZIndex(vn));if(yt!=1&&It.type=="line"){"line-pattern"in Wt?Ft=void 0:Ft=colorWithOpacity(getValue(It,"paint","line-color",ft,Ct,it,_t),getValue(It,"paint","line-opacity",ft,Ct,it,_t));const xt=getValue(It,"paint","line-width",ft,Ct,it,_t);Ft&&xt>0&&(++St,Lt=ot[St],(!Lt||!Lt.getStroke()||Lt.getFill()||Lt.getText())&&(Lt=new Style({stroke:new Stroke}),ot[St]=Lt),Jt=Lt.getStroke(),Jt.setLineCap(getValue(It,"layout","line-cap",ft,Ct,it,_t)),Jt.setLineJoin(getValue(It,"layout","line-join",ft,Ct,it,_t)),Jt.setMiterLimit(getValue(It,"layout","line-miter-limit",ft,Ct,it,_t)),Jt.setColor(Ft),Jt.setWidth(xt),Jt.setLineDash(Wt["line-dasharray"]?getValue(It,"paint","line-dasharray",ft,Ct,it,_t).map(function(Tt){return Tt*xt}):null),Lt.setZIndex(vn))}let En=!1,Vt=null,Sn=0,An,Zt,Dn;if((yt==1||yt==2)&&"icon-image"in wt){const xt=getValue(It,"layout","icon-image",ft,Ct,it,_t);if(xt){An=typeof xt=="string"?fromTemplate(xt,mt):xt.toString();let Tt;const Rt=h?h(i,An):void 0;if(g&&o&&o[An]||Rt){const Ot=getValue(It,"layout","icon-rotation-alignment",ft,Ct,it,_t);if(yt==2){const kt=ut.getGeometry();if(kt.getFlatMidpoint||kt.getFlatMidpoints){const Gt=kt.getExtent();if(Math.sqrt(Math.max(Math.pow((Gt[2]-Gt[0])/ct,2),Math.pow((Gt[3]-Gt[1])/ct,2)))>150){const $t=kt.getType()==="MultiLineString"?kt.getFlatMidpoints():kt.getFlatMidpoint();if(renderFeature||(renderFeatureCoordinates=[NaN,NaN],renderFeature=new RenderFeature("Point",renderFeatureCoordinates,[],2,{},void 0)),Tt=renderFeature,renderFeatureCoordinates[0]=$t[0],renderFeatureCoordinates[1]=$t[1],getValue(It,"layout","symbol-placement",ft,Ct,it,_t)==="line"&&Ot==="map"){const ln=kt.getStride(),un=kt.getFlatCoordinates();for(let cn=0,Qt=un.length-ln;cn<Qt;cn+=ln){const dn=un[cn],gn=un[cn+1],hn=un[cn+ln],rn=un[cn+ln+1],Ln=Math.min(dn,hn),er=Math.min(gn,rn),Pr=Math.max(dn,hn),Rr=Math.max(gn,rn);if($t[0]>=Ln&&$t[0]<=Pr&&$t[1]>=er&&$t[1]<=Rr){Sn=Math.atan2(gn-rn,hn-dn);break}}}}}}if(yt!==2||Tt){const kt=getValue(It,"layout","icon-size",ft,Ct,it,_t),Gt=Wt["icon-color"]!==void 0?getValue(It,"paint","icon-color",ft,Ct,it,_t):null;if(!Gt||Gt.a!==0){const qt=getValue(It,"paint","icon-halo-color",ft,Ct,it,_t),$t=getValue(It,"paint","icon-halo-width",ft,Ct,it,_t);let sn=`${An}.${kt}.${$t}.${qt}`;if(Gt!==null&&(sn+=`.${Gt}`),Zt=et[sn],!Zt){const ln=getDeclutterMode(It,ft,Ct,"icon",it);let un;"icon-offset"in wt&&(un=getValue(It,"layout","icon-offset",ft,Ct,it,_t).slice(0),un[0]*=kt,un[1]*=-kt);let cn=Gt?[Gt.r*255,Gt.g*255,Gt.b*255,Gt.a]:void 0;if(Rt){const Qt={color:cn,rotateWithView:Ot==="map",displacement:un,declutterMode:ln,scale:kt};typeof Rt=="string"?Qt.src=Rt:(Qt.img=Rt,Qt.imgSize=[Rt.width,Rt.height]),Zt=new Icon(Qt)}else{const Qt=o[An];let dn,gn,hn;$t?Qt.sdf?(dn=drawIconHalo(drawSDF(g,Qt,Gt||[0,0,0,1]),{x:0,y:0,width:Qt.width,height:Qt.height,pixelRatio:Qt.pixelRatio},$t,qt),cn=void 0):dn=drawIconHalo(g,Qt,$t,qt):(Qt.sdf?(b||(b=drawSDF(g,{x:0,y:0,width:_[0],height:_[1]},{r:1,g:1,b:1,a:1})),dn=b):dn=g,gn=[Qt.width,Qt.height],hn=[Qt.x,Qt.y]),Zt=new Icon({color:cn,img:dn,imgSize:_,size:gn,offset:hn,rotateWithView:Ot==="map",scale:kt/Qt.pixelRatio,displacement:un,declutterMode:ln})}et[sn]=Zt}}Zt&&(++St,Lt=ot[St],(!Lt||!Lt.getImage()||Lt.getFill()||Lt.getStroke())&&(Lt=new Style,ot[St]=Lt),Lt.setGeometry(Tt),Zt.setRotation(Sn+deg2rad(getValue(It,"layout","icon-rotate",ft,Ct,it,_t))),Zt.setOpacity(getValue(It,"paint","icon-opacity",ft,Ct,it,_t)),Zt.setAnchor(anchor[getValue(It,"layout","icon-anchor",ft,Ct,it,_t)]),Lt.setImage(Zt),Vt=Lt.getText(),Lt.setText(void 0),Lt.setZIndex(vn),En=!0,Dn=!1)}else Dn=!0}}}if(yt==1&&It.type==="circle"){++St,Lt=ot[St],(!Lt||!Lt.getImage()||Lt.getFill()||Lt.getStroke())&&(Lt=new Style,ot[St]=Lt);const xt="circle-radius"in Wt?getValue(It,"paint","circle-radius",ft,Ct,it,_t):5,Tt=colorWithOpacity(getValue(It,"paint","circle-stroke-color",ft,Ct,it,_t),getValue(It,"paint","circle-stroke-opacity",ft,Ct,it,_t)),Rt=getValue(It,"paint","circle-translate",ft,Ct,it,_t),Ot=colorWithOpacity(getValue(It,"paint","circle-color",ft,Ct,it,_t),getValue(It,"paint","circle-opacity",ft,Ct,it,_t)),kt=getValue(It,"paint","circle-stroke-width",ft,Ct,it,_t),Gt=xt+"."+Tt+"."+Ot+"."+kt+"."+Rt[0]+"."+Rt[1];Zt=et[Gt],Zt||(Zt=new CircleStyle({radius:xt,displacement:[Rt[0],-Rt[1]],stroke:Tt&&kt>0?new Stroke({width:kt,color:Tt}):void 0,fill:Ot?new Fill({color:Ot}):void 0,declutterMode:"none"}),et[Gt]=Zt),Lt.setImage(Zt),Vt=Lt.getText(),Lt.setText(void 0),Lt.setGeometry(void 0),Lt.setZIndex(vn),En=!0}let en,Tn,yn,Kt,nn,Et;if("text-field"in wt){Kt=Math.round(getValue(It,"layout","text-size",ft,Ct,it,_t));const xt=getValue(It,"layout","text-font",ft,Ct,it,_t);yn=getValue(It,"layout","text-line-height",ft,Ct,it,_t),Tn=mb2css(d?d(xt,e.metadata?e.metadata["ol:webfonts"]:void 0):xt,Kt,yn),Tn.includes("sans-serif")||(Tn+=",sans-serif"),nn=getValue(It,"layout","text-letter-spacing",ft,Ct,it,_t),Et=getValue(It,"layout","text-max-width",ft,Ct,it,_t);const Tt=getValue(It,"layout","text-field",ft,Ct,it,_t);typeof Tt=="object"&&Tt.sections?Tt.sections.length===1?en=Tt.toString():en=Tt.sections.reduce((Rt,Ot,kt)=>{const Gt=Ot.fontStack?Ot.fontStack.split(","):xt,qt=mb2css(d?d(Gt):Gt,Kt*(Ot.scale||1),yn);let $t=Ot.text;if($t===`
`)return Rt.push(`
`,""),Rt;if(yt==2){Rt.push(applyLetterSpacing($t,nn),qt);return}$t=wrapText($t,qt,Et,nn).split(`
`);for(let sn=0,ln=$t.length;sn<ln;++sn)sn>0&&Rt.push(`
`,""),Rt.push($t[sn],qt);return Rt},[]):en=fromTemplate(Tt,mt).trim(),zt=getValue(It,"paint","text-opacity",ft,Ct,it,_t)}if(en&&zt&&!Dn){En||(++St,Lt=ot[St],(!Lt||!Lt.getText()||Lt.getFill()||Lt.getStroke())&&(Lt=new Style,ot[St]=Lt),Lt.setImage(void 0),Lt.setGeometry(void 0));const xt=getDeclutterMode(It,ft,Ct,"text",it);Lt.getText()||Lt.setText(Vt),Vt=Lt.getText(),(!Vt||"getDeclutterMode"in Vt&&Vt.getDeclutterMode()!==xt)&&(Vt=new Text({padding:[2,2,2,2],declutterMode:xt}),Lt.setText(Vt));const Tt=getValue(It,"layout","text-transform",ft,Ct,it,_t);Tt=="uppercase"?en=Array.isArray(en)?en.map((rn,Ln)=>Ln%2?rn:rn.toUpperCase()):en.toUpperCase():Tt=="lowercase"&&(en=Array.isArray(en)?en.map((rn,Ln)=>Ln%2?rn:rn.toLowerCase()):en.toLowerCase());const Rt=Array.isArray(en)?en:yt==2?applyLetterSpacing(en,nn):wrapText(en,Tn,Et,nn);Vt.setText(Rt),Vt.setFont(Tn),Vt.setRotation(deg2rad(getValue(It,"layout","text-rotate",ft,Ct,it,_t)));const Ot=getValue(It,"layout","text-anchor",ft,Ct,it,_t),kt=En||yt==1?"point":getValue(It,"layout","symbol-placement",ft,Ct,it,_t);let Gt;if(kt==="line-center"?(Vt.setPlacement("line"),Gt="center"):Vt.setPlacement(kt),kt==="line"&&typeof Vt.setRepeat=="function"){const rn=getValue(It,"layout","symbol-spacing",ft,Ct,it,_t);Vt.setRepeat(rn*2)}Vt.setOverflow(kt==="point");let qt=getValue(It,"paint","text-halo-width",ft,Ct,it,_t);const $t=getValue(It,"layout","text-offset",ft,Ct,it,_t),sn=getValue(It,"paint","text-translate",ft,Ct,it,_t);let ln=0,un=0;if(kt=="point"){Gt="center",Ot.indexOf("left")!==-1?(Gt="left",un=qt):Ot.indexOf("right")!==-1&&(Gt="right",un=-qt);const rn=getValue(It,"layout","text-rotation-alignment",ft,Ct,it,_t);Vt.setRotateWithView(rn=="map")}else Vt.setMaxAngle(deg2rad(getValue(It,"layout","text-max-angle",ft,Ct,it,_t))*en.length/Rt.length),Vt.setRotateWithView(!1);Vt.setTextAlign(Gt);let cn="middle";Ot.indexOf("bottom")==0?(cn="bottom",ln=-qt-.5*(yn-1)*Kt):Ot.indexOf("top")==0&&(cn="top",ln=qt+.5*(yn-1)*Kt),Vt.setTextBaseline(cn);const Qt=getValue(It,"layout","text-justify",ft,Ct,it,_t);Vt.setJustify(Qt==="auto"?void 0:Qt),Vt.setOffsetX($t[0]*Kt+un+sn[0]),Vt.setOffsetY($t[1]*Kt+ln+sn[1]),st.setColor(colorWithOpacity(getValue(It,"paint","text-color",ft,Ct,it,_t),zt)),Vt.setFill(st);const dn=colorWithOpacity(getValue(It,"paint","text-halo-color",ft,Ct,it,_t),zt);if(dn&&qt>0){at.setColor(dn),qt*=2;const rn=.5*Kt;at.setWidth(qt<=rn?qt:rn),Vt.setStroke(at)}else Vt.setStroke(void 0);const gn=getValue(It,"layout","text-padding",ft,Ct,it,_t),hn=Vt.getPadding();gn!==hn[0]&&(hn[0]=gn,hn[1]=gn,hn[2]=gn,hn[3]=gn),Lt.setZIndex(vn)}}}if(St>-1)return ot.length=St+1,ot};return i.setStyle(dt),i.set("mapbox-source",rt),i.set("mapbox-layers",_e),i.set("mapbox-featurestate",i.get("mapbox-featurestate")||{}),dt}function getTileResolutions(i,e=512){return i.getExtent()?createXYZ({extent:i.getExtent(),tileSize:e,maxZoom:22}).getResolutions():defaultResolutions}function completeOptions(i,e){return e.accessToken||(e=Object.assign({},e),new URL(i).searchParams.forEach((s,o)=>{e.accessToken=s,e.accessTokenParam=o})),e}function applyStyle(i,e,a="",s={},o=void 0){let c,d,h,g,_=!0;return typeof a!="string"&&!Array.isArray(a)?(h=a,g=h.source||h.layers,s=h):g=a,typeof s=="string"?(c=s,h={}):(c=s.styleUrl,h=s),h.updateSource===!1&&(_=!1),o||(o=h.resolutions),!c&&typeof e=="string"&&!e.trim().startsWith("{")&&(c=e),c&&(c=c.startsWith("data:")?location.href:normalizeStyleUrl(c,h.accessToken),h=completeOptions(c,h)),new Promise(function(b,j){getGlStyle(e,h).then(function($){if($.version!=8)return j(new Error("glStyle version 8 required."));if(!(i instanceof VectorLayer||i instanceof VectorTileLayer))return j(new Error("Can only apply to VectorLayer or VectorTileLayer"));const _e=i instanceof VectorTileLayer?"vector":"geojson";if(g?Array.isArray(g)?d=$.layers.find(function(st){return st.id===g[0]}).source:d=g:(d=Object.keys($.sources).find(function(st){return $.sources[st].type===_e}),g=d),!d)return j(new Error(`No ${_e} source found in the glStyle.`));function et(){if(!_)return Promise.resolve();if(i instanceof VectorTileLayer)return setupVectorSource($.sources[d],c,h).then(function(ut){const ct=i.getSource();ct?ut!==ct&&(ct.setTileUrlFunction(ut.getTileUrlFunction()),typeof ct.setUrls=="function"&&typeof ut.getUrls=="function"&&ct.setUrls(ut.getUrls()),ct.format_||(ct.format_=ut.format_),ct.getAttributions()||ct.setAttributions(ut.getAttributions()),ct.getTileLoadFunction()===defaultLoadFunction&&ct.setTileLoadFunction(ut.getTileLoadFunction()),equivalent(ct.getProjection(),ut.getProjection())&&(ct.tileGrid=ut.getTileGrid())):i.setSource(ut);const ht=i.getSource().getTileGrid();!isFinite(i.getMaxResolution())&&!isFinite(i.getMinZoom())&&ht.getMinZoom()>0&&i.setMaxResolution(getResolutionForZoom(Math.max(0,ht.getMinZoom()-1e-12),ht.getResolutions()))});const st=$.sources[d];let ot=i.getSource();(!ot||ot.get("mapbox-source")!==st)&&(ot=setupGeoJSONSource(st,c,h));const dt=i.getSource();return dt?ot!==dt&&(dt.getAttributions()||dt.setAttributions(ot.getAttributions()),dt.format_||(dt.format_=ot.getFormat()),dt.url_=ot.getUrl()):i.setSource(ot),Promise.resolve()}let tt,it,nt,rt;function at(){if(!rt&&(!$.sprite||it)){if(h.projection&&!o){const ot=get$3(h.projection).getUnits();ot!=="m"&&(o=defaultResolutions.map(dt=>dt/METERS_PER_UNIT$1[ot]))}rt=stylefunction(i,$,g,o,it,nt,(st,ot=h.webfonts)=>getFonts(st,ot),h.getImage),i.getStyle()?et().then(b).catch(j):j(new Error(`Nothing to show for source [${d}]`))}else rt?(i.setStyle(rt),et().then(b).catch(j)):j(new Error("Something went wrong trying to apply style."))}if($.sprite){const st=new URL(normalizeSpriteUrl($.sprite,h.accessToken,c||location.href));tt=window.devicePixelRatio>=1.5?.5:1;const ot=tt==.5?"@2x":"";let dt=st.origin+st.pathname+ot+".json"+st.search;new Promise(function(ut,ct){fetchResource("Sprite",dt,h).then(ut).catch(function(ht){dt=st.origin+st.pathname+".json"+st.search,fetchResource("Sprite",dt,h).then(ut).catch(ct)})}).then(function(ut){if(ut===void 0&&j(new Error("No sprites found.")),it=ut,nt=st.origin+st.pathname+ot+".png"+st.search,h.transformRequest){const ct=h.transformRequest(nt,"SpriteImage")||nt;(ct instanceof Request||ct instanceof Promise)&&(nt=ct)}at()}).catch(function(ut){j(new Error(`Sprites cannot be loaded: ${dt}: ${ut.message}`))})}else at()}).catch(j)})}function extentFromTileJSON(i,e){const a=i.bounds;if(a){const s=fromLonLat([a[0],a[1]],e),o=fromLonLat([a[2],a[3]],e);return[s[0],s[1],o[0],o[1]]}return get$3(e).getExtent()}function sourceOptionsFromTileJSON(i,e,a){const s=new TileJSON({tileJSON:e,tileSize:i.tileSize||e.tileSize||512}),o=s.getTileJSON(),c=s.getTileGrid(),d=get$3(a.projection||"EPSG:3857"),h=extentFromTileJSON(o,d),g=d.getExtent(),_=o.minzoom||0,b=o.maxzoom||22,j={attributions:s.getAttributions(),projection:d,tileGrid:new TileGrid({origin:g?getTopLeft(g):c.getOrigin(0),extent:h||c.getExtent(),minZoom:_,resolutions:getTileResolutions(d,e.tileSize).slice(0,b+1),tileSize:c.getTileSize(0)})};return Array.isArray(o.tiles)?j.urls=o.tiles:j.url=o.tiles,j}function setupVectorSource(i,e,a){return new Promise(function(s,o){getTileJson(i,e,a).then(function({tileJson:c,tileLoadFunction:d}){const h=sourceOptionsFromTileJSON(i,c,a);h.tileLoadFunction=d,h.format=new MVT,s(new VectorTile(h))}).catch(o)})}function getBboxTemplate(i){return`{bbox-${(i?i.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function setupGeoJSONSource(i,e,a){const s=a.projection?new GeoJSON({dataProjection:a.projection}):new GeoJSON,o=i.data,c={};if(typeof o=="string"){const h=normalizeSourceUrl(o,a.accessToken,a.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(h)){const _=(j,$,_e)=>{const et=getBboxTemplate(_e);return h.replace(et,`${j.join(",")}`)},b=new VectorSource({attributions:i.attribution,format:s,loader:(j,$,_e,et,tt)=>{const it=typeof _=="function"?_(j,$,_e):_;fetchResource("GeoJSON",it,a).then(nt=>{const rt=b.getFormat().readFeatures(nt,{featureProjection:_e});b.addFeatures(rt),et(rt)}).catch(nt=>{b.removeLoadedExtent(j),tt()})},strategy:bbox});return b.set("mapbox-source",i),b}const g=new VectorSource({attributions:i.attribution,format:s,url:h,loader:(_,b,j,$,_e)=>{fetchResource("GeoJSON",h,a).then(et=>{const tt=g.getFormat().readFeatures(et,{featureProjection:j});g.addFeatures(tt),$(tt)}).catch(et=>{g.removeLoadedExtent(_),_e()})}});return g}c.features=s.readFeatures(o,{featureProjection:"EPSG:3857"});const d=new VectorSource(Object.assign({attributions:i.attribution,format:s},c));return d.set("mapbox-source",i),d}var LayerMapBox=class extends VectorTileLayer{constructor(e,a){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var s=e.ssl===!1?"http://":"https://",o=e.configuration;if(!o){if(!Config$1.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var c=e.layer+"$GEOPORTAIL:GPP:TMS";if(o=Config$1.configuration.getLayerConf(c),!o)throw new Error("ERROR : Layer ID not found into the catalogue !?")}for(var d=null,h="",g=e.style,_=0;_<o.styles.length;_++){var b=o.styles[_];if(g&&b.name===g){d=b.url,h=b.title;break}else if(!g&&b.current){g=b.name,d=b.url,h=b.title;break}}if(!d)throw new Error("ERROR : Style URL not found !?");d.replace(/(http|https):\/\//,s);var j=new VectorTile({state:"loading",format:new MVT});j._originators=o.originators,j._legends=o.legends,j._metadata=o.metadata,j._description=o.description,j._title=o.title+" ("+h+")",j._quicklookUrl=o.quicklookUrl;var $={source:j};return Helper.mergeParams($,a),e.olParams&&!o.originators&&(j._originators=e.olParams.attributions),super($),this.name=e.layer,this.service="TMS",this.protocol=s,this.sourceId=e.source,this.styleUrl=d,this.setStyleMapBox(),this}setStyleMapBox(){var e=this;fetch(this.styleUrl,{credentials:"same-origin"}).then(function(a){a.ok&&a.json().then(function(s){e.onStyleMapBoxLoad(s)})}).catch(function(a){e.onStyleMapBoxError(a)})}onStyleMapBoxLoad(e){this.sourceId||(this.sourceId=Object.keys(e.sources)[0]);var a=e.sources[this.sourceId];if(!a){this.onStyleMapBoxError({message:"ERROR : Source ID not found !? !"});return}if(a.type!=="vector"){this.onStyleMapBoxError({message:"ERROR : Source TYPE not permitted !"});return}var s=this.getSource();if(a.url){a.url.replace(/(http|https):\/\//,this.protocol);var o=new TileJSON({url:a.url}),c=this,d=o.on("change",function(){if(o.getState()==="ready"){var g=o.getTileJSON();if(!g)return;c.set("mapbox-extensions",g);for(var _=Array.isArray(g.tiles)?g.tiles:[g.tiles],b=0;b<a.tiles.length;b++)_[b].replace(/(http|https):\/\//,this.protocol);s.setUrls(_),unByKey(d)}})}if(a.tiles){for(var h=0;h<a.tiles.length;h++)a.tiles[h].replace(/(http|https):\/\//,this.protocol);s.setUrls(a.tiles)}applyStyle(this,e,this.sourceId).then(()=>{s.setState("ready"),this.set("mapbox-styles",e)}).catch(g=>{this.onStyleMapBoxError(g)})}onStyleMapBoxError(e){var a=this.getSource();a.setState("error"),console.error(e.message)}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalMapBox=LayerMapBox);let m_suggestions=[],controller=new AbortController,m_index="geoplateforme",m_fields="title,layer_name",m_size="1000",m_maximumResponses=5,m_filterByService=["WMTS","TMS"],m_filterByProjection=[],m_filterByTMS=["ADMIN_EXPRESS","ISOHYPSE","PLAN.IGN","OCSGE_2016","OCSGE_2019","PCI","BDTOPO"],m_url=`https://data.geopf.fr/recherche/api/indexes/${m_index}/suggest`;const target=new EventTarget,suggest=async i=>{clear(),controller=new AbortController;let e=new URL(m_url),a={text:i,fields:m_fields,size:m_size};Object.keys(a).forEach(g=>e.searchParams.append(g,a[g]));var s=await fetch(e,{}),o=await s.json();if(s.status!==200)throw new Error(s.message);if(!(!o||o.length===0)){for(let g=0;g<o.length;g++){const _=o[g];var c=_.source.type==="WMTS"||_.source.type==="TMS"?10:0;o[g].score+=c}o.sort((g,_)=>_.score-g.score);for(let g=0;g<o.length;g++){const _=o[g];var d=m_filterByService.length===0||m_filterByService.includes(_.source.type);if(d){if(unique().length>=m_maximumResponses)break;var h={originators:_.source.attribution||{},srs:_.source.srs||[],keywords:_.source.keywords||[],extent:_.source.extent||{},metadata:_.source.metadata_urls||[],name:_.source.layer_name,title:_.source.title,description:_.source.description,service:_.source.type,url:_.source.url};if(m_filterByTMS.length&&(h.service==="WMTS"&&m_filterByTMS.includes(h.name)||h.service==="TMS"&&!m_filterByTMS.includes(h.name))||m_filterByProjection.length&&m_filterByProjection.includes(h.srs[0]))continue;m_suggestions.push(h)}}return target.dispatchEvent(new CustomEvent("suggest",{bubbles:!0,detail:getSuggestions()})),getSuggestions()}},unique=()=>m_suggestions.filter((i,e,a)=>e===a.findIndex(s=>s.service===i.service&&s.name===i.name&&s.title===i.title&&s.description===i.description)),clear=()=>{controller.abort(),m_suggestions=[]},getSuggestions=()=>unique(),getNames=()=>unique().map(i=>i.name),getTitles=()=>unique().map(i=>i.title),setIndex=i=>{m_index=i},setFields=i=>{m_fields=i},setSize=i=>{m_size=parseInt(i)},setUrl=value=>{m_url=eval("`"+value+"`")},setMaximumResponses=i=>{m_maximumResponses=parseInt(i)},setFiltersByService=i=>{m_filterByService=i===""?[]:i.split(",")},setFiltersByProjection=i=>{m_filterByProjection=i===""?[]:i.split(",")},setFiltersByTMS=i=>{m_filterByTMS=i===""?[]:i.split(",")},updateFilterByTMS=async i=>{var e=i;e||(e="https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/vectorTileConfig/fullVectorTileConfig.json");const a=await fetch(e),s=await a.json();if(a.status!==200)throw new Error(a.message);if(!s)throw new Error("Liste vide !");var o=Object.keys(s.layers).map(c=>c.split("$")[0]);return o&&setFiltersByTMS(o.toString()),m_filterByTMS},Search={target,suggest,clear,getSuggestions,getNames,getTitles,setIndex,setFields,setSize,setUrl,setMaximumResponses,setFiltersByService,setFiltersByTMS,updateFilterByTMS,setFiltersByProjection};var SearchEngineDOM={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPsearchEngine"),i.className="GPwidget gpf-widget",i},_createSearchDivElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPshowSearchDiv"),i},_createShowSearchEnginePictoElement:function(i){var e=this;checkDsfr()&&(i=!0);var a=document.createElement("button");return a.id=this._addUID("GPshowSearchEnginePicto"),a.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchEnginePicto gpf-btn gpf-btn-icon-search fr-btn",a.title="Afficher/masquer la recherche par lieux",checkDsfr()&&(a.title="Rechercher"),a.setAttribute("tabindex","0"),a.setAttribute("aria-pressed",!i),a.disabled=!i,a.setAttribute("type","button"),a.addEventListener("click",function(s){if(checkDsfr()){var o=document.getElementById(e._addUID("GPautocompleteResults")),c=o.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),d=o.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),h=d.length;if(!h)return;var g=null;c.length?g=c[0]:(g=d[0],g.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",g.style.color="#000000",g.style["background-color"]="#CEDBEF"),g.click();return}var _=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!_),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden");var b=document.getElementById(e._addUID("GPshowAdvancedSearch"));b&&(b.style.display=null,document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"));var j=document.getElementById(e._addUID("GPshowGeolocate"));j&&(j.style.display=null);var $=document.getElementById(e._addUID("GPshowSearchByCoordinate"));$&&($.style.display=null);var _e="#GPsearchInput-"+e._uid;document.querySelector(_e+" input").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+e._uid).disabled=!1),e.onShowSearchEngineClick(s)}),a},_createSearchInputElement:function(i){var e=this,a=document.createElement("form");a.id=this._addUID("GPsearchInput"),a.className="gpf-panel__content fr-modal__content",a.addEventListener("submit",function(o){return o.preventDefault(),document.getElementById(e._addUID("GPsearchInputText")).value===""||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),e.onGeocodingSearchSubmit(o)),!1});var s=document.createElement("input");return s.id=this._addUID("GPsearchInputText"),s.className="GPsearchInputText gpf-input fr-input",s.type="text",s.placeholder=i,s.autocomplete="off",s.addEventListener("keyup",function(o){var c=o.which||o.keyCode;c===13||c===10||c===38||c===40||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),s.value.length>2?(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(o))}),s.addEventListener("keydown",function(o){var c=o.which||o.keyCode;c===13&&o.preventDefault();var d=document.getElementById(e._addUID("GPautocompleteResults"));if(d){var h=d.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),g=d.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),_=g.length;if(_){var b=null;if(h.length)b=h[0];else if(b=g[0],b.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",b.style.color="#000000",b.style["background-color"]="#CEDBEF",c!==13)return;var j=parseInt(SelectorID.index(b.id),10),$=j===_-1?g[0]:g[j+1],_e=j===0?g[_-1]:g[j-1];switch(b.style["background-color"]="",b.style.color="",_e.style["background-color"]="",_e.style.color="",$.style["background-color"]="",$.style.color="",c){case 38:b.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",_e.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",_e.style.color="#000000",_e.style["background-color"]="#CEDBEF",b.scrollIntoView();break;case 40:b.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",$.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",$.style.color="#000000",$.style["background-color"]="#CEDBEF",b.scrollIntoView();break;case 13:o.preventDefault(),b.click(o);break}b.focus()}}}),a.appendChild(s),a},_createSearchResetElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPsearchInputReset"),e.className="GPshowOpen GPsearchInputReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-search-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.setAttribute("aria-label","Supprimer la recherche"),e.addEventListener("click",function(a){document.getElementById(i._addUID("GPsearchInputText")).value="",document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),i.onSearchResetClick()}),e},_createButtonsElement:function(){var i=document.createElement("div");return i.className="GPbuttonsContainer",i},_createFirstLineWrapper:function(){var i=document.createElement("div");return i.className="GPsearchFirstLineWrapper",i},_createRadioContainer:function(){var i=document.createElement("div");return i.className="GPsearchRadioContainer",i},_createRadioElements:function(){var i=document.createElement("div");i.className="GPsearchRadioElements";var e=document.createElement("div");e.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var a=document.createElement("input");a.id=this._addUID("GPsearchSplitLocations"),a.type="radio",a.name="GPsearchSplit",a.value="address",a.checked=!0,e.appendChild(a);var s=document.createElement("label");s.className="gpf-label fr-label",s.htmlFor=this._addUID("GPsearchSplitLocations"),s.title="Adresses",s.innerHTML="Adresses",e.appendChild(s),a.addEventListener?a.addEventListener("change",function(){a.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}):a.attachEvent&&a.attachEvent("onchange",function(){a.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))});var o=document.createElement("div");o.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var c=document.createElement("input");c.id=this._addUID("GPsearchSplitData"),c.type="radio",c.name="GPsearchSplit",c.value="data",o.appendChild(c);var d=document.createElement("label");return d.className="gpf-label fr-label",d.htmlFor=this._addUID("GPsearchSplitData"),d.title="Cartes et données",d.innerHTML="Cartes et données",o.appendChild(d),c.addEventListener?c.addEventListener("change",function(){c.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden"))}):c.attachEvent&&c.attachEvent("onchange",function(){c.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}),i.appendChild(e),i.appendChild(o),[i,a,c]},_createShowAdvancedSearchElement:function(){var i=this,e=document.createElement("span");return e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowOpen  GPshowAdvancedSearch",e.innerText="Recherche avancée",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(a){var s=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!s);var o="#GPsearchInput-"+i._uid;s?(document.getElementById(i._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(o+" input").disabled=!1,document.querySelector(o+" .GPsearchInputReset")&&(document.querySelector(o+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+i._uid).disabled=!1)):(document.getElementById(i._addUID("GPadvancedSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(i._addUID("GPadvancedSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(o+" input").disabled=!0,document.querySelector(o+" .GPsearchInputReset")&&(document.querySelector(o+" .GPsearchInputReset").disabled=!0),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+i._uid).disabled=!0)),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1)}),e},_createShowGeolocateElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowGeolocate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowGeolocate gpf-btn gpf-btn-icon-search-geolocate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Activer la géolocalisation",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(a){var s=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!s),i.onShowSearchGeolocateClick(a)}),e},_createShowSearchByCoordinateElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowSearchByCoordinate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchByCoordinate gpf-btn gpf-btn-icon-search-coordinate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Ouvrir la recherche par coordonnées",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(a){var s=a.target.ariaPressed==="true";a.target.setAttribute("aria-pressed",!s);var o="#GPsearchInput-"+i._uid;s?(document.getElementById(i._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(o+" input").disabled=!1,document.querySelector(o+" .GPsearchInputReset").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+i._uid).disabled=!1)):(document.getElementById(i._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(i._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(o+" input").disabled=!0,document.querySelector(o+" .GPsearchInputReset").disabled=!0,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+i._uid).disabled=!0)),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1)}),e},_createAdvancedSearchPanelElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GPadvancedSearchPanel"),i.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",i},_createAdvancedSearchPanelDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createGeocodeResultsElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GPgeocodeResultsList"),i.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",i.appendChild(this._createGeocodeResultsHeaderElement()),i},_createGeocodeResultsDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createAutoCompleteElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPautoCompleteList"),i.className="GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden ",i},_createCoordinateSearchPanelElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GPcoordinateSearchPanel"),i.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",i},_createCoordinateSearchPanelDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createAutoCompleteListElement:function(){var i=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.className="",e.addEventListener?e.addEventListener("click",function(a){document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")},!1):e.attachEvent&&e.attachEvent("onclick",function(a){document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")}),e},_createAutoCompletedLocationContainer(){var i=document.createElement("select");return i.id=this._addUID("GPautocompleteResultsLocation"),i.className="GPelementHidden gpf-hidden gpf-select",i.size=6,i.autofocus=!0,i},_createAutoCompletedLocationTitleElement(){var i=document.getElementById(this._addUID("GPautocompleteResultsLocation")),e=document.createElement("option");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Lieux et adresses",i.appendChild(e)},_createAutoCompletedLocationElement:function(i,e){var a=this,s=document.getElementById(this._addUID("GPautocompleteResultsLocation")),o=document.createElement("option");o.id=this._addUID("AutoCompletedLocation_"+e),o.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine";var c=GeocodeUtils.getSuggestedLocationFreeform(i);o.innerHTML=c,o.title=c,o.addEventListener?o.addEventListener("click",function(d){a.onAutoCompletedResultsItemClick(d)},!1):o.attachEvent&&o.attachEvent("onclick",function(d){a.onAutoCompletedResultsItemClick(d)}),s.appendChild(o)},_createSearchedSuggestContainer(){var i=document.createElement("select");return i.id=this._addUID("GPautocompleteResultsSuggest"),i.className="GPelementHidden gpf-hidden gpf-select",i.size=6,i.autofocus=!0,i},_createSearchedSuggestTitleElement(){var i=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),e=document.createElement("option");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Cartes et données",i.appendChild(e)},_createSearchedSuggestElement:function(i,e){var a=this,s=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),o=document.createElement("option");o.id=this._addUID("AutoCompletedSuggest_"+e),o.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",o.innerHTML=i.title+" ("+i.service+")",o.dataset.layer=i.name,o.title=i.description,o.addEventListener?o.addEventListener("click",function(c){a.onSearchedResultsItemClick(c)},!1):o.attachEvent&&o.attachEvent("onclick",function(c){a.onSearchedResultsItemClick(c)}),s.appendChild(o)},_createAdvancedSearchPanelHeaderElement:function(){var i=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var a=document.createElement("div");a.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",a.innerHTML="Recherche avancée",e.appendChild(a);var s=document.createElement("button");s.id=this._addUID("GPadvancedSearchClose"),s.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",s.title="Fermer la recherche avancée",s.addEventListener?s.addEventListener("click",function(){var c="#GPsearchInput-"+i._uid;document.querySelector(c+" input").disabled=!1,document.querySelector(c+" .GPsearchInputReset")&&(document.querySelector(c+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+i._uid).disabled=!1),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(i._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")},!1):s.attachEvent&&s.attachEvent("onclick",function(){var c="#GPsearchInput-"+i._uid;document.querySelector(c+" input").disabled=!1,document.querySelector(c+" .GPsearchInputReset")&&(document.querySelector(c+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+i._uid).disabled=!1),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(i._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")});var o=document.createElement("span");return o.className="GPelementHidden gpf-visible",o.innerText="Fermer",s.appendChild(o),e.appendChild(s),e},_createAdvancedSearchPanelFormElement:function(i){var e=this,a=document.createElement("form");a.id=this._addUID("GPadvancedSearchForm"),a.className="gpf-panel__content fr-modal__content",a.addEventListener("submit",function(d){d.preventDefault();for(var h=[],g="#GPadvancedSearchFilters-"+e._uid,_=document.querySelectorAll(g+" > div > div > input,select#category"),b=0;b<_.length;b++){var j=_[b];h.push({key:j.name,value:j.value})}return e.onGeocodingAdvancedSearchSubmit(d,h),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),!1});var s=document.createElement("div");s.className="GPflexInput gpf-flex-column ";var o=document.createElement("label");o.className="GPadvancedSearchCodeLabel gpf-label fr-label",o.innerHTML="Recherche par",s.appendChild(o);var c=this._createAdvancedSearchFormCodeElement(i);return s.appendChild(c),a.appendChild(s),a},_createAdvancedSearchFormCodeElement:function(i){var e=this,a=document.createElement("select");a.id=this._addUID("GPadvancedSearchCode"),a.title="Choisir un type de recherche",a.className="GPadvancedSearchCode gpf-select fr-select",a.addEventListener("change",function(c){e.onGeocodingAdvancedSearchCodeChange(c)},!1),i||(i=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var s=0;s<i.length;s++){var o=document.createElement("option");o.value=i[s].id,o.text=i[s].title,a.appendChild(o)}return a},_createAdvancedSearchFormInputElement:function(){var i=document.createElement("input");return i.type="submit",i.id=this._addUID("GPadvancedSearchSubmit"),i.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",i.value="Chercher",i},_createAdvancedSearchFormFiltersElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPadvancedSearchFilters"),i},_createAdvancedSearchFiltersTableElement:function(i,e){var a=document.createElement("div");return a.id=this._addUID(i),e||(a.style.display="none"),a},_createAdvancedSearchFiltersAttributElement:function(i){var e=null,a=i.name,s=i.title,o=i.description,c=i.code,d=i.value,h=document.createElement("div");h.className="GPflexInput gpf-flex-column ";var g=document.createElement("label");if(g.className="GPadvancedSearchFilterLabel gpf-label fr-label",g.htmlFor=a,g.title=o||s,g.innerHTML=s,h.appendChild(g),a==="category"){var _=document.createElement("select");if(_.id=a,_.name=a,_.title=s,_.className="GPadvancedSearchFilterInput gpf-select fr-select",d&&Array.isArray(d))for(var b=0;b<d.length;b++){var j=document.createElement("option");j.value=d[b],j.text=d[b],_.appendChild(j)}h.appendChild(_)}else{var $=document.createElement("input");if($.id=a,$.className="GPadvancedSearchFilterInput gpf-input fr-input",$.type="text",$.name=a,d)if(Array.isArray(d)){var _e=a+"_list";$.setAttribute("list",_e);var et=document.createElement("datalist");et.id=_e;for(var b=0;b<d.length;++b){var j=document.createElement("option");j.value=d[b],et.appendChild(j)}h.appendChild(et)}else $.value=d;h.appendChild($)}return e=document.getElementById(this._addUID(c)),e?e.appendChild(h):e=h,e},_createGeocodeResultsHeaderElement:function(){var i=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var a=document.createElement("div");a.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",a.innerHTML="Résultats de la recherche",e.appendChild(a);var s=document.createElement("button");s.id=this._addUID("GPgeocodeResultsClose"),s.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",s.title="Fermer la fenêtre de résultats",s.addEventListener?s.addEventListener("click",function(){document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")},!1):s.attachEvent&&s.attachEvent("onclick",function(){document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")});var o=document.createElement("span");return o.className="GPelementHidden gpf-visible",o.innerText="Fermer",s.appendChild(o),e.appendChild(s),e},_createGeocodeResultsListElement:function(){var i=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.className="gpf-panel__list",e.setAttribute("tabindex","0"),e.addEventListener?e.addEventListener("click",function(a){a.ctrlKey||(document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),i.onGeocodedResultsItemClick(a)},!1):e.attachEvent&&e.attachEvent("onclick",function(a){a.ctrlKey||(document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),i.onGeocodedResultsItemClick(a)}),e},_createGeocodedLocationElement:function(i,e){var a=document.getElementById(this._addUID("GPgeocodeResults")),s=document.createElement("div");s.id=this._addUID("GeocodedLocation_"+e),s.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",typeof i=="string"?s.innerHTML=i:s.innerHTML=GeocodeUtils.getGeocodedLocationFreeform(i),a.appendChild(s)},_createCoordinateSearchPanelHeaderElement(){var i=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var a=document.createElement("div");a.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",a.innerHTML="Recherche par coordonnées",e.appendChild(a);var s=document.createElement("button");s.id=this._addUID("GPcoordinateSearchClose"),s.className="GPpanelClose GPcoordinateSearchClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",s.title="Fermer la recherche par coordonnées",s.addEventListener?s.addEventListener("click",function(){var c="#GPsearchInput-"+i._uid;document.querySelector(c+" input").disabled=!1,document.querySelector(c+" .GPsearchInputReset")&&(document.querySelector(c+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+i._uid).disabled=!1),document.getElementById(i._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(i._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),i.onCoordinateSearchClose()},!1):s.attachEvent&&s.attachEvent("onclick",function(){var c="#GPsearchInput-"+i._uid;document.querySelector(c+" input").disabled=!1,document.querySelector(c+" .GPsearchInputReset")&&(document.querySelector(c+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+i._uid).disabled=!1),document.getElementById(i._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(i._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),i.onCoordinateSearchClose()});var o=document.createElement("span");return o.className="GPelementHidden gpf-visible",o.innerText="Fermer",s.appendChild(o),e.appendChild(s),e},_createCoordinateSearchPanelFormElement(){var i=this,e=document.createElement("form");return e.id=this._addUID("GPcoordinateSearchForm"),e.className="gpf-panel__content fr-modal__content",e.addEventListener("submit",function(a){return a.preventDefault(),i.onShowSearchByCoordinateClick(),!1}),e},__createCoordinateSearchDivElement(){var i=document.createElement("div");return i.className="GPflexInput gpf-flex-column ",i},_createCoordinateSearchSystemsLabelElement(){var i=document.createElement("label");return i.className="GPcoordinateSearchSystemsLabel gpf-label fr-label",i.innerHTML="Système de référence",i},_setCoordinateSearchSystemsSelectElement(i){document.getElementById(this._addUID("GPcoordinateSearchSystem"))&&document.getElementById(this._addUID("GPcoordinateSearchSystem")).remove();var e=this,a=document.createElement("select");a.id=this._addUID("GPcoordinateSearchSystem"),a.title="Choisir un système de réference",a.className="GPselect GPcoordinateSearchSystemsSelect gpf-select fr-select",a.addEventListener("change",function(d){e.onCoordinateSearchSystemChange(d)});for(var s=0;s<i.length;s++){var o=i[s],c=document.createElement("option");c.value=o.code,c.text=o.label||s,a.appendChild(c)}return a},_createCoordinateSearchUnitsLabelElement(){var i=document.createElement("label");return i.className="GPcoordinateSearchUnitsLabel gpf-label fr-label",i.innerHTML="Unités",i},_setCoordinateSearchUnitsSelectElement(i){document.getElementById(this._addUID("GPcoordinateSearchUnits"))&&document.getElementById(this._addUID("GPcoordinateSearchUnits")).remove();var e=this,a=document.createElement("select");a.id=this._addUID("GPcoordinateSearchUnits"),a.title="Choisir un type d'unité",a.className="GPselect GPcoordinateSearchUnitsSelect gpf-select fr-select",a.addEventListener("change",function(d){e.onCoordinateSearchUnitsChange(d)});for(var s=0;s<i.length;s++){var o=i[s],c=document.createElement("option");c.value=o.code?o.code:s,c.text=o.label||s,a.appendChild(c)}return a},_setCoordinateSearchLngLabelElement(i){document.getElementById(this._addUID("GPcoordinateSearchLngLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLngLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLngLabel"),e.htmlFor="coordinate-lng",e.innerHTML=i==="Geographical"?"Longitude :":"Y :",e},_setCoordinateSearchLngInputElement(i){document.getElementById(this._addUID("GPcoordinateSearchLngInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLngInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLngDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLngDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLngInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lng",e.type="number",e.step="any",e.required="",i){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLngDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLngDMSElement(){var i=document.createElement("div");return i.id=this._addUID("GPcoordinateSearchLngDMS"),i.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLonDeg"
                class="gpf-input fr-input"
                name="inputSexLonDeg"
                title="Saisir une valeur de degré entre 0° et 180°"
                type="number"
                required=""
                min="0"
                max="180">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLonMin"
                class="gpf-input fr-input"
                name="inputSexLonMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLonSec"
                class="gpf-input fr-input"
                name="inputSexLonSec"
                title="Saisir une valeur de seconde entre 0'' et 59''"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLonToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Est et 0uest"
                name="inputSexLonToward">
                <option value="O">O</option>
                <option value="E" selected="">E</option>
            </select>
        </div>
        `,i},_setCoordinateSearchLatLabelElement(i){document.getElementById(this._addUID("GPcoordinateSearchLatLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLatLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLatLabel"),e.htmlFor="coordinate-lat",e.innerHTML=i==="Geographical"?"Latitude :":"X :",e},_setCoordinateSearchLatInputElement(i){document.getElementById(this._addUID("GPcoordinateSearchLatInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLatInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLatDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLatDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLatInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lat",e.type="number",e.step="any",e.required="",i){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLatDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLatDMSElement(){var i=document.createElement("div");return i.id=this._addUID("GPcoordinateSearchLatDMS"),i.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLatDeg"
                class="gpf-input fr-input"
                name="inputSexLatDeg"
                title="Saisir une valeur de degré entre 0° et 85°"
                type="number"
                required=""
                min="0"
                max="85">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLatMin"
                class="gpf-input fr-input"
                name="inputSexLatMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLatSec"
                class="gpf-input fr-input"
                name="inputSexLatSec"
                title="Saisir une valeur de seconde entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLatToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Nord et Sud"
                name="inputSexLatToward">
                <option value="N">N</option>
                <option value="S">S</option>
            </select>
        </div>
        `,i},_createCoordinateSearchSubmitElement(){var i=document.createElement("input");return i.type="submit",i.id=this._addUID("GPcoordinateSearchSubmit"),i.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",i.value="Chercher",i}},logger$1=LoggerByDefault$1.getLogger("searchengine"),SearchEngine=class ba extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof ba))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e||this._clearResults(),this.collapsed||this._showSearchEngineButton.setAttribute("aria-pressed",!0),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$1.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}this.options.collapsible&&(e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineButton.click(),this.collapsed=e))}getData(){return this._geocodedLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,collapsible:!0,zoomTo:"",resources:{geocode:[],autocomplete:[],search:!1},displayButtonClose:!0,displayButtonAdvancedSearch:!1,displayButtonGeolocate:!1,displayButtonCoordinateSearch:!1,advancedSearch:{},coordinateSearch:{},searchOptions:{addToMap:!0,serviceOptions:{maximumResponses:5}},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{maximumResponses:5},triggerGeocode:!1,triggerDelay:1e3},displayMarker:!0,markerStyle:"lightOrange",markerUrl:"",placeholder:"Rechercher un lieu, une adresse",splitResults:!0},Helper.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.options.resources.search&&(this.options.searchOptions&&(this.options.searchOptions.serviceOptions&&(this.options.searchOptions.serviceOptions.url&&Search.setUrl(this.options.searchOptions.serviceOptions.url),this.options.searchOptions.serviceOptions.fields&&Search.setFields(this.options.searchOptions.serviceOptions.fields),this.options.searchOptions.serviceOptions.index&&Search.setIndex(this.options.searchOptions.serviceOptions.index),this.options.searchOptions.serviceOptions.size&&Search.setSize(this.options.searchOptions.serviceOptions.size),this.options.searchOptions.serviceOptions.maximumResponses&&Search.setMaximumResponses(this.options.searchOptions.serviceOptions.maximumResponses)),this.options.searchOptions.filterServices&&Search.setFiltersByService(this.options.searchOptions.filterServices),this.options.searchOptions.filterVectortiles&&Search.setFiltersByTMS(this.options.searchOptions.filterVectortiles),this.options.searchOptions.updateVectortiles&&Search.updateFilterByTMS()),Search.target.addEventListener("suggest",o=>{logger$1.debug(o),this._fillSearchedSuggestListContainer(o.detail)})),this.options.collapsible||(this.options.collapsed=!1),this.collapsed=this.options.collapsed,this._uid=SelectorID.generate(),this._showSearchEngineButton=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._containerResultsLocation=null,this._containerResultsSuggest=null,this._radioButtonLocation=null,this._radioButtonSuggest=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._coordinateSearchSystems=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchSystems(),this._currentCoordinateSearchSystems=this._coordinateSearchSystems[0],this._currentCoordinateSearchType=this._coordinateSearchSystems[0].type),this._coordinateSearchUnits=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchUnits(),this._currentCoordinateSearchUnits=this._coordinateSearchUnits[this._currentCoordinateSearchType][0].code),this._coordinateSearchLngInput=null,this._coordinateSearchLatInput=null,this._marker=null;var a=this.options.markerStyle,s=this.options.markerUrl;s?this._markerUrl=s:this._markerUrl=Object.keys(Marker).indexOf(a)===-1?Marker.lightOrange:Marker[a],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null}_checkInputOptions(e){var a;if(e.resources)if(typeof e.resources=="object"){var s=e.resources.geocode;if(s)if(Array.isArray(s)){var o=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(a=0;a<s.length;a++)o.indexOf(s[a])===-1&&logger$1.log("[SearchEngine] options.resources.geocode : "+s[a]+" is not a resource for geocode")}else logger$1.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),s=null;var c=e.resources.autocomplete;if(c)if(Array.isArray(c)){var d=["StreetAddress","PositionOfInterest"];for(a=0;a<c.length;a++)d.indexOf(c[a])===-1&&logger$1.log("[SearchEngine] options.resources.autocomplete : "+c[a]+" is not a resource for autocomplete")}else logger$1.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),c=null}else logger$1.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null}_initAdvancedSearchCodes(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var a=0;a<e.length;a++)switch(e[a]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),logger$1.log("advancedSearchCodes",this._advancedSearchCodes)}_initAdvancedSearchFilters(){this._advancedSearchFilters=SearchEngineUtils.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;Helper.assign(this._advancedSearchFilters,e),logger$1.log("advancedSearchFilters",this._advancedSearchFilters)}_initCoordinateSearchSystems(){var e=[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric"}],a=this.options.coordinateSearch.systems;if(a)for(var s=0;s<a.length;s++){var o=a[s];this._setSystem(o)}if(this._coordinateSearchSystems.length===0)for(var c=0;c<e.length;c++)this._setSystem(e[c])}_initCoordinateSearchUnits(){var e={Geographical:[{code:"DEC",label:"degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"degrés sexagésimaux",format:MathUtils.coordinateToDMS}],Metric:[{code:"M",label:"mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"kilomètres",format:MathUtils.coordinateToKMeter}]},a=this.options.coordinateSearch.units;if(a){for(var s in e)if(e.hasOwnProperty(s)){for(var o=!1,c=0;c<e[s].length;c++)for(var d=e[s][c],h=0;h<a.length;h++){var g=a[h];d.code===g&&(o=!0,this._coordinateSearchUnits[s]||(this._coordinateSearchUnits[s]=[]),this._coordinateSearchUnits[s].push(d))}o||(this._coordinateSearchUnits[s]=e[s])}}typeof this._coordinateSearchUnits=="object"&&Object.keys(this._coordinateSearchUnits).length===0&&(this._coordinateSearchUnits=e)}_initPopupDiv(){var e=this,a=document.createElement("div");a.className="gp-feature-info-div";var s=document.createElement("input");return s.type="button",s.className="gp-styling-button closer",s.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",a.appendChild(this._popupContent),a.appendChild(s),a}_initContainer(){var e=this._createMainContainerElement(),a=this._createSearchDivElement(),s=this._showSearchEngineButton=this._createShowSearchEnginePictoElement(this.options.collapsible);a.appendChild(s),this.options.collapsible||e.classList.add("gpf-widget-color","gpf-widget-padding");var o=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder);this.options.displayButtonClose&&o.appendChild(this._createSearchResetElement());var c=this;o.addEventListener?o.addEventListener("click",function(){c.onAutoCompleteInputClick()}):o.attachEvent&&o.attachEvent("onclick",function(){c.onAutoCompleteInputClick()}),a.appendChild(o);var d=this._createButtonsElement(),h=this._createFirstLineWrapper();if(h.appendChild(a),h.appendChild(d),e.appendChild(h),checkDsfr()&&this.options.splitResults||this.options.displayButtonAdvancedSearch){var g=this._createRadioContainer();e.appendChild(g)}if(checkDsfr()&&this.options.splitResults){var _;[_,this._radioButtonLocation,this._radioButtonSuggest]=this._createRadioElements(),g.appendChild(_)}if(this.options.displayButtonAdvancedSearch){var b=this._createShowAdvancedSearchElement();g.appendChild(b);var j=this._createAdvancedSearchPanelElement(),$=this._createAdvancedSearchPanelDivElement(),_e=this._createAdvancedSearchPanelHeaderElement(),et=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),tt=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var it=this._createAdvancedSearchFormInputElement();et.appendChild(tt),et.appendChild(it),$.appendChild(_e),$.appendChild(et),j.appendChild($),e.appendChild(j)}if(this.options.displayButtonGeolocate){var nt=this._createShowGeolocateElement();d.appendChild(nt)}if(this.options.displayButtonCoordinateSearch){var rt=this._createShowSearchByCoordinateElement();d.appendChild(rt);var at=this._createCoordinateSearchPanelElement(),st=this._createCoordinateSearchPanelDivElement(),ot=this._createCoordinateSearchPanelHeaderElement(),dt=this._createCoordinateSearchPanelFormElement(),ut=null;ut=this._containerSystems=this.__createCoordinateSearchDivElement(),dt.appendChild(ut);var ct=this._createCoordinateSearchSystemsLabelElement(),ht=this._setCoordinateSearchSystemsSelectElement(this._coordinateSearchSystems);ut.appendChild(ct),ut.appendChild(ht),ut=this._containerUnits=this.__createCoordinateSearchDivElement(),dt.appendChild(ut);var mt=this._createCoordinateSearchUnitsLabelElement(),pt=this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[this._currentCoordinateSearchType]);ut.appendChild(mt),ut.appendChild(pt),ut=this._containerCoordinateLng=this.__createCoordinateSearchDivElement(),dt.appendChild(ut);var ft=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),yt=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);ut.appendChild(ft),ut.appendChild(yt),ut=this._containerCoordinateLat=this.__createCoordinateSearchDivElement(),dt.appendChild(ut);var Ct=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),_t=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);ut.appendChild(Ct),ut.appendChild(_t);var St=this._createCoordinateSearchSubmitElement();dt.appendChild(St),st.appendChild(ot),st.appendChild(dt),at.appendChild(st),e.appendChild(at)}var Pt=this._autocompleteContainer=this._createAutoCompleteElement(),bt=this._createAutoCompleteListElement(),Mt=this._containerResultsLocation=this._createAutoCompletedLocationContainer(),It=this._containerResultsSuggest=this._createSearchedSuggestContainer();bt.appendChild(Mt),bt.appendChild(It),Pt.appendChild(bt),e.appendChild(Pt);var Nt=this._createGeocodeResultsElement(),wt=this._createGeocodeResultsDivElement();Nt.appendChild(wt);var Wt=this._geocodedContainer=this._createGeocodeResultsListElement();return wt.appendChild(Wt),e.appendChild(Nt),e}_setFilter(e){for(var a=this._filterContainer,s=!1,o=0;o<this._advancedSearchCodes.length;o++)if(this._advancedSearchCodes[o].id===e){s=!0;break}if(!s){for(;a.firstChild;)a.removeChild(a.firstChild);return}for(this._currentGeocodingCode=e;a.firstChild;)a.removeChild(a.firstChild);var c=this._advancedSearchFilters[e];if(!(!c||c.length===0)){for(var d=this._createAdvancedSearchFiltersTableElement(e,!0),h=0;h<c.length;h++){var g=this._createAdvancedSearchFiltersAttributElement(c[h]);d.appendChild(g)}return a.appendChild(d),a}}_requestAutoComplete(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){logger$1.log(e);var a={};Helper.assign(a,this.options.autocompleteOptions.serviceOptions),Helper.assign(a,e);var s=this.options.resources.autocomplete;s&&Array.isArray(s)&&(a.type||(a.type=s)),a.apiKey=a.apiKey||this.options.apiKey,typeof a.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?a.ssl=this.options.ssl:a.ssl=!0),logger$1.log(a),Gp.Services.autoComplete(a)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var a=this._containerResultsLocation;if(a.childElementCount)for(;a.firstChild;)a.removeChild(a.firstChild);if(a.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonLocation||this._radioButtonLocation&&this._radioButtonLocation.checked)&&a.classList.remove("GPelementHidden","gpf-hidden"),this._displaySuggestedLocation(),(!checkDsfr()||!this.options.splitResults)&&this._createAutoCompletedLocationTitleElement();for(var s=0;s<e.length;s++)this._createAutoCompletedLocationElement(e[s],s)}}}_fillSearchedSuggestListContainer(e){var a=this._containerResultsSuggest;if(a.childElementCount)for(;a.firstChild;)a.removeChild(a.firstChild);if(a.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonSuggest||this._radioButtonSuggest&&this._radioButtonSuggest.checked)&&a.classList.remove("GPelementHidden","gpf-hidden"),(!checkDsfr()||!this.options.splitResults)&&this._createSearchedSuggestTitleElement();for(let s=0;s<e.length;s++){const o=e[s];this._createSearchedSuggestElement(o,s)}}}_requestGeocoding(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){logger$1.log(e);var a={};Helper.assign(a,this.options.geocodeOptions.serviceOptions),Helper.assign(a,e);var s=this,o=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",c=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(c){var d=function(_){e.onSuccess.call(s,_),s.options.geocodeOptions.serviceOptions.onSuccess.call(s,_)};a.onSuccess=d}if(o){var h=function(_){e.onFailure.call(s,_),s.options.geocodeOptions.serviceOptions.onFailure.call(s,_)};a.onFailure=h}var g=this.options.resources.geocode;g&&(a.index||(a.index=g)),a.apiKey=a.apiKey||this.options.apiKey,typeof a.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?a.ssl=this.options.ssl:a.ssl=!0),logger$1.log(a),Gp.Services.geocode(a)}}_fillGeocodedLocationListContainer(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var a=this._geocodedContainer;if(a.childElementCount)for(;a.firstChild;)a.removeChild(a.firstChild);for(var s=0;s<e.length;s++)logger$1.log(e[s]),this._createGeocodedLocationElement(e[s],s);this._geocodedLocations=e}_setLabel(e){document.getElementById("GPsearchInputText-"+this._uid).value=e}_setPosition(e,a){var s=this.getMap().getView();s.setCenter(e),s.setZoom(a)}_setMarker(e,a){var s=this.getMap(),o=this;if(this._marker!=null&&(s.removeOverlay(this._marker),this._marker=null),e){var c=document.createElement("img");c.src=this._markerUrl,c.addEventListener?c.addEventListener("click",function(){o._onResultMarkerSelect(a)}):c.attachEvent&&c.attachEvent("onclick",function(){o._onResultMarkerSelect(a)}),this._marker=new Overlay({position:e,positioning:"center-center",element:c,stopEvent:!1}),s.addOverlay(this._marker)}}_getZoom(e){var a=this.getMap(),s=this.options.zoomTo,o=null;if(typeof s=="function"&&(logger$1.trace("zoom function"),o=s.call(this,e)),typeof s=="number"&&(logger$1.trace("zoom level"),o=s),typeof s=="string")if(s==="auto")logger$1.trace("zoom auto"),o=SearchEngineUtils.zoomToResultsByDefault(e);else{logger$1.trace("zoom level parsing");var c=parseInt(s,10);isNaN(c)||(logger$1.trace("zoom parsing"),o=c)}Number.isInteger=Number.isInteger||function(g){return typeof g=="number"&&isFinite(g)&&Math.floor(g)===g},(!o||o===""||!Number.isInteger(o))&&(logger$1.trace("zoom not found, current zoom..."),o=a.getView().getZoom());var d=a.minZoom,h=a.maxZoom;return o<d&&(logger$1.trace("zoom level min..."),o=d),o>h&&(logger$1.trace("zoom level max..."),o=h),logger$1.trace("zoom",o),o}_onResultMarkerSelect(e){var a=this.getMap(),s="";if(typeof e!="string")if(e.service==="GeocodedLocation"){s="<ul>";var o=e.location.placeAttributes;for(var c in o)o.hasOwnProperty(c)&&c!=="trueGeometry"&&c!=="extraFields"&&c!=="houseNumberInfos"&&c!=="_count"&&(s+="<li>",s+='<span class="gp-attname-others-span">'+c.toUpperCase()+" : </span>",s+=o[c],s+=" </li>");s+=" </ul>"}else e.service==="SuggestedLocation"?s=GeocodeUtils.getSuggestedLocationFreeform(e.location):s="sans informations.";else s=e;this._popupContent.innerHTML=s,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),a.addOverlay(this._popupOverlay))}_setSystem(e){if(typeof e!="object"){logger$1.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$1.error("crs not defined !");return}if(e.label||(logger$1.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$1.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$1.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var a=0;a<this._coordinateSearchSystems.length;a++){var s=this._coordinateSearchSystems[a];e.crs===s.crs&&logger$1.info("crs '{}' already configured",s.crs)}e.code=this._coordinateSearchSystems.length,this._coordinateSearchSystems.push(e)}onShowSearchEngineClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var a=this.getMap();Interactions.unset(a);var s=this._showSearchEngineButton.ariaPressed;this.collapsed=s!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed&&this._clearResults()}onSearchResetClick(){this._clearResults()}onShowSearchGeolocateClick(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{var a=this.getMap().getView(),s=a.getProjection().getCode(),o=[e.coords.longitude,e.coords.latitude];if(s!=="EPSG:4326"&&(o=transform$1(o,"EPSG:4326",s)),isNaN(o[0])||isNaN(o[1])){this._setMarker();return}this._setPosition(o,10),this._displayMarker&&this._setMarker(o,"sans information"),this.dispatchEvent({type:"searchengine:geolocation:click",coordinates:o})})}onShowSearchByCoordinateClick(){var e=null,a=null;if(this._coordinateSearchLngInput&&this._coordinateSearchLngInput.nodeName==="DIV"&&this._coordinateSearchLatInput&&this._coordinateSearchLatInput.nodeName==="DIV"?(e=this._getCoordinateSearchDMS(this._coordinateSearchLngInput),a=this._getCoordinateSearchDMS(this._coordinateSearchLatInput)):(e=this._coordinateSearchLngInput.value,a=this._coordinateSearchLatInput.value),!(!e||!a)){var s=[e,a],o=this.getMap().getView(),c=o.getProjection().getCode();if(c!=="EPSG:4326"&&(s=transform$1(s,"EPSG:4326",c)),isNaN(s[0])||isNaN(s[1])){this._setMarker();return}this._setPosition(s,10),this._displayMarker&&this._setMarker(s,"sans information"),this.dispatchEvent({type:"searchengine:coordinates:click",coordinates:s})}}_getCoordinateSearchDMS(e){if(e&&e.nodeName==="DIV"){var a=e.querySelectorAll("[name]");if(a){var s=MathUtils.toInteger(a[0].value),o=MathUtils.toInteger(a[1].value),c=MathUtils.toInteger(a[2].value),d=a[3].options[a[3].selectedIndex].text;return!s||!o||!c||!d?void 0:MathUtils.dmsToDecimal(s,o,c,d)}}}onAutoCompleteInputClick(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var a=e.target.value;if(a){if(this._currentGeocodingLocation=a,a.length<3){this._clearSuggestedLocation();return}var s=this.options.autocompleteOptions.triggerGeocode,o=this.options.autocompleteOptions.triggerDelay,c=this;this._requestAutoComplete({text:a,onSuccess:function(h){if(logger$1.log("request from AutoComplete",h),h){c._suggestedLocations=h.suggestedLocations,c._locationsToBeDisplayed=[];for(var g=0;g<c._suggestedLocations.length;g++){var _=c._suggestedLocations[g];_.position&&_.position.x===0&&_.position.y===0&&_.fullText?c._getGeocodeCoordinatesFromFullText(_,g):c._locationsToBeDisplayed.push(_)}c._fillAutoCompletedLocationListContainer(c._locationsToBeDisplayed),c._triggerHandler&&(clearTimeout(c._triggerHandler),c._triggerHandler=null,logger$1.warn("Cancel a geocode request !"))}},onFailure:function(h){c._clearSuggestedLocation(),logger$1.log(h.message),h.message==="No suggestion matching the search"&&s&&(c._triggerHandler&&(clearTimeout(c._triggerHandler),logger$1.warn("Cancel the last geocode request !")),c._triggerHandler=setTimeout(function(){logger$1.warn("Launch a geocode request !"),c._requestGeocoding({location:a,onSuccess:function(g){if(logger$1.log("request from Geocoding",g),g){c._locationsToBeDisplayed=[];for(var _=g.locations,b=0;b<_.length;b++){var j=_[b];j.fullText=GeocodeUtils.getGeocodedLocationFreeform(j),j.position={x:j.position.lon,y:j.position.lat},c._locationsToBeDisplayed.push(j)}c._fillAutoCompletedLocationListContainer(_)}},onFailure:function(g){logger$1.log(g.message)}})},o))}}),this.options.resources.search&&Search.suggest(a);var d=this.getMap();d.on("click",this._hideSuggestedLocation,this),d.on("pointerdrag",this._hideSuggestedLocation,this)}}_getGeocodeCoordinatesFromFullText(e,a){var s=this;Gp.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:GeocodeUtils.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(o){logger$1.log("request from Geocoding (coordinates null)",o),o.locations&&o.locations.length!==0&&o.locations[0].position&&s._suggestedLocations&&s._suggestedLocations[a]&&(s._suggestedLocations[a].position={lon:o.locations[0].position.y,lat:o.locations[0].position.x},s._locationsToBeDisplayed.unshift(s._suggestedLocations[a]),s._fillAutoCompletedLocationListContainer(s._locationsToBeDisplayed))},onFailure:function(){s._suggestedLocations&&s._suggestedLocations[a]&&s._createAutoCompletedLocationElement(s._suggestedLocations[a],a)}})}onAutoCompletedResultsItemClick(e){var a=SelectorID.index(e.target.id);if(logger$1.log(a),logger$1.log(this._locationsToBeDisplayed[a]),!!a){var s=[this._locationsToBeDisplayed[a].position.x,this._locationsToBeDisplayed[a].position.y],o={service:"SuggestedLocation",location:this._locationsToBeDisplayed[a]},c=GeocodeUtils.getSuggestedLocationFreeform(this._locationsToBeDisplayed[a]);this._setLabel(c),this._currentGeocodingLocation=c;var d=this.getMap().getView(),h=d.getProjection().getCode();h!=="EPSG:4326"&&(s=transform$1(s,"EPSG:4326",h));var g=this._getZoom(o);this._setPosition(s,g),this._displayMarker&&this._setMarker(s,o),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[a]})}}onSearchedResultsItemClick(e){var a=SelectorID.index(e.target.id),s=null;try{var o=Search.getSuggestions()[a];if(!o)throw"No suggestions found !";if(this.options.searchOptions.addToMap){if(!Config$1.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var c=o.service,d=o.name,h=null;switch(c){case"WMS":h=new LayerWMS({layer:d});break;case"WMTS":h=new LayerWMTS({layer:d});break;case"TMS":h=new LayerMapBox({layer:d});default:break}if(h){var g=this.getMap();g.addLayer(h)}}}catch(_){s=_}this.dispatchEvent({type:"searchengine:search:click",suggest:o,error:s})}onGeocodingSearchSubmit(e){var a=e.target[0].value;if(a){this._currentGeocodingLocation=a;var s=this;this._requestGeocoding({query:a,onSuccess:function(o){if(logger$1.log("request from Geocoding",o),o){var c=o.locations;s._fillGeocodedLocationListContainer(c)}},onFailure:function(o){s._clearGeocodedLocation(),logger$1.log(o.message)}})}}onGeocodedResultsItemClick(e){var a=SelectorID.index(e.target.id);if(a){var s=[this._geocodedLocations[a].position.lon,this._geocodedLocations[a].position.lat],o={service:"GeocodedLocation",location:this._geocodedLocations[a]},c=GeocodeUtils.getGeocodedLocationFreeform(this._geocodedLocations[a]);this._setLabel(c);var d=this.getMap().getView(),h=d.getProjection().getCode();h!=="EPSG:4326"&&(s=transform$1(s,"EPSG:4326",h));var g=this._getZoom(this.options.zoomTo);this._setPosition(s,g),this._displayMarker&&this._setMarker(s,o),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[a]})}}onGeocodingAdvancedSearchCodeChange(e){logger$1.log(e);var a=e.target.selectedIndex,s=e.target.options[a].value;s&&this._setFilter(s)}onGeocodingAdvancedSearchSubmit(e,a){if(logger$1.log(a),!(!a||a.length===0)){for(var s,o={},c=0;c<a.length;c++){var d=a[c];d.value&&(d.key==="section"&&(d.value=d.value.toUpperCase()),o[d.key]=d.value)}var h=document.getElementById("GPsearchInputText-"+this._uid);s=h.value,this._currentGeocodingCode==="CadastralParcel"&&(s="");var g=this;this._requestGeocoding({query:s,index:this._currentGeocodingCode,filters:o,onSuccess:function(_){if(logger$1.log(_),_){var b=_.locations;g._fillGeocodedLocationListContainer(b)}},onFailure:function(_){g._clearGeocodedLocation(),logger$1.log(_.message)}})}}_getCadastralParcelRequestParams(e){var a="",s,o=e.department;o?(s=o.length,s===2?a=o:s===1?a="0"+o:a=o.substring(0,2)):a="__";var c=e.commune;c?(s=c.length,s===3?a+=c:s===2?a+="_"+c:s===1?a+="__"+c:a+=c.substring(0,3)):a+="___";var d=e.insee;d&&d.length===5&&(a=d);var h=e.absorbedCity;h?(s=h.length,s===3?a+=h:s<3?s===2?a+="_"+h:s===1&&(a+="__"+h):a+=h.substring(0,3)):a+="___";var g=e.section;g?(s=g.length,s===2?a+=g:s===1?a+="_"+g:a+=g.substring(0,2)):a+="__";var _=e.number;return _?(s=_.length,s===4?a+=_:s===3?a+="_"+_:s===2?a+="__"+_:s===1?a+="___"+_:a+=_.substring(0,4)):a+="___",logger$1.log("location : "+a),a}onCoordinateSearchSystemChange(e){var a=e.target.selectedIndex,s=e.target.options[a].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="";for(var o=null,c=0;c<this._coordinateSearchSystems.length;++c)if(this._coordinateSearchSystems[c].code===Number(s)){o=this._coordinateSearchSystems[c].type;break}if(!o){logger$1.log("system not found in projection systems container");return}this._currentCoordinateSearchSystems=this._coordinateSearchSystems[Number(s)],o!==this._currentCoordinateSearchType&&(this._currentCoordinateSearchType=o,this._currentCoordinateSearchUnits=this._coordinateSearchUnits[o][0].code,this._containerUnits.appendChild(this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[o])),this._updateCoordinateSearchElements())}onCoordinateSearchUnitsChange(e){var a=e.target.selectedIndex,s=e.target.options[a].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="",this._currentCoordinateSearchUnits=s,this._updateCoordinateSearchElements()}onCoordinateSearchClose(){this._setMarker(),this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value=""}_updateCoordinateSearchElements(){var e=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),a=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);this._containerCoordinateLng.appendChild(e),this._containerCoordinateLng.appendChild(a),e=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),a=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits),this._containerCoordinateLat.appendChild(e),this._containerCoordinateLat.appendChild(a)}_clearResults(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._containerResultsLocation)for(;this._containerResultsLocation.firstChild;)this._containerResultsLocation.removeChild(this._containerResultsLocation.firstChild);if(this.options.resources.search&&(Search.clear(),this._containerResultsSuggest))for(;this._containerResultsSuggest.firstChild;)this._containerResultsSuggest.removeChild(this._containerResultsSuggest.firstChild)}_hideSuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementVisible","GPelementHidden"),this._autocompleteContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementHidden","GPelementVisible"),this._autocompleteContainer.classList.replace("gpf-hidden","gpf-visible"))}_clearGeocodedLocation(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)}};Object.assign(SearchEngine.prototype,SearchEngineDOM);Object.assign(SearchEngine.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=SearchEngine);LoggerByDefault$1.getLogger("zoom");var GeoportalZoom=class extends Zoom{constructor(e){e=e||{};var a="ol-custom-zoom";e.className=a,super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var a="position-container-"+this.options.position;if(!document.getElementById(a)){var s=document.createElement("div");s.id=a,s.classList.add("position"),s.classList.add(a),this.container.appendChild(s)}this.options.target=this.container.children[a]}}_initContainer(){this._uid=SelectorID.generate(),this.element.id="GPzoom-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-zoom","ol-unselectable","ol-control");var e=this,a=this.element.childNodes;for(let o=0;o<a.length;o++){const c=a[o];if(c.classList.contains(this.options.className+"-in")){c.classList.add("GPzoomIn","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-in","fr-btn","fr-btn--secondary","gpf-btn","gpf-btn--secondary","gpf-btn-icon"),c.id="GPzoomIn",c.innerHTML="",c.removeAttribute("title"),c.setAttribute("aria-label","Zoomer");var s=document.createElement("span");c.appendChild(s),c.addEventListener?c.addEventListener("click",function(){e.dispatchEvent("zoom:in")}):c.attachEvent&&c.attachEvent("onclick",function(){e.dispatchEvent("zoom:in")})}if(c.classList.contains(this.options.className+"-out")){c.classList.add("GPzoomOut","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-out","fr-btn","fr-btn--secondary","gpf-btn","gpf-btn--secondary","gpf-btn-icon"),c.id="GPzoomOut",c.innerHTML="",c.removeAttribute("title"),c.setAttribute("aria-label","Dézoomer");var s=document.createElement("span");c.appendChild(s),c.addEventListener?c.addEventListener("click",function(){e.dispatchEvent("zoom:out")}):c.attachEvent&&c.attachEvent("onclick",function(){e.dispatchEvent("zoom:out")})}}this.options.position&&(this.element.style.position="unset")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var a=e.getControls();a.forEach(s=>{s.element.classList.contains("ol-zoom")&&(s.element.classList.add("ol-hidden"),s.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalZoom=GeoportalZoom);const events=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],FullScreenEventType={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FullScreen extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const a=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof a=="string"?document.createTextNode(a):a;const s=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof s=="string"?document.createTextNode(s):s;const o=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=o,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const a=e.getOwnerDocument();if(isFullScreenSupported(a))if(isFullScreen(a))exitFullScreen(a);else{let s;this.source_?s=typeof this.source_=="string"?a.getElementById(this.source_):this.source_:s=e.getTargetElement(),this.keys_?requestFullScreenWithKeys(s):requestFullScreen(s)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const a=this.isInFullscreen_;this.isInFullscreen_=isFullScreen(e.getOwnerDocument()),a!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN)):(replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,a){a?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const a=this.getMap();a&&a.removeChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let s=0,o=e.length;s<o;++s)unlistenByKey(e[s]);e.length=0;const a=this.getMap();if(a){const s=a.getOwnerDocument();isFullScreenSupported(s)?this.element.classList.remove(CLASS_UNSUPPORTED):this.element.classList.add(CLASS_UNSUPPORTED);for(let o=0,c=events.length;o<c;++o)e.push(listen(s,events[o],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function isFullScreenSupported(i){const e=i.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&i.fullscreenEnabled)}function isFullScreen(i){return!!(i.webkitIsFullScreen||i.fullscreenElement)}function requestFullScreen(i){i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen&&i.webkitRequestFullscreen()}function requestFullScreenWithKeys(i){i.webkitRequestFullscreen?i.webkitRequestFullscreen():requestFullScreen(i)}function exitFullScreen(i){i.exitFullscreen?i.exitFullscreen():i.webkitExitFullscreen&&i.webkitExitFullscreen()}LoggerByDefault$1.getLogger("fullscreen");var GeoportalFullScreen=class extends FullScreen{constructor(e){e=e||{};var a="ol-custom-full-screen";e.className=e.className||a,e.label=e.label||"",e.labelActive=e.labelActive||"",e.activeClassName=e.activeClassName||a+"-true",e.inactiveClassName=e.inactiveClassName||a+"-false",e.tipLabel=e.tipLabel||"Basculer en mode plein écran",super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var a="position-container-"+this.options.position;if(!document.getElementById(a)){var s=document.createElement("div");s.id=a,s.classList.add("position"),s.classList.add(a),this.container.appendChild(s)}this.options.target=this.container.children[a]}}_initContainer(){this._uid=SelectorID.generate(),this.element.id="GPfullScreen-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-full-screen","ol-unselectable","ol-control");var e=this.element.childNodes[0],a=document.createElement("span");e.appendChild(a),e.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPfullScreenPicto","fr-btn","fr-btn--secondary","gpf-btn--secondary","gpf-btn","gpf-btn-icon"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.removeAttribute("title"),e.setAttribute("aria-label",this.options.tipLabel),e.addEventListener?e.addEventListener("click",function(s){var o=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!o)}):e.attachEvent&&e.attachEvent("onclick",function(s){var o=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!o)}),this.options.position&&(this.element.style.position="unset")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var a=e.getControls();a.forEach(s=>{s.element.classList.contains("ol-full-screen")&&(s.element.classList.add("ol-hidden"),s.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalFullScreen=GeoportalFullScreen);LoggerByDefault$1.getLogger("draggable");var Draggable={dragElement:function(i,e,a){let s=0,o=0,c=0,d=0,h=0,g=0;e?e.addEventListener("mousedown",j,!0):i.addEventListener("mousedown",j,!0);var _,b={bottom:0,left:0,right:0,top:0};function j(et){et=et||window.event,et.preventDefault(),s=et.clientX,o=et.clientY,_=i.getBoundingClientRect();const tt=a.getBoundingClientRect();b={bottom:tt.bottom,left:tt.left,right:tt.right,top:tt.top},document.addEventListener("mouseup",$,!0),document.addEventListener("mousemove",_e,!0)}function $(){h-=c,g-=d,document.removeEventListener("mouseup",$,!0),document.removeEventListener("mousemove",_e,!0)}function _e(et){et=et||window.event;let tt=et.clientX,it=et.clientY,nt=c,rt=d;c=s-tt,d=o-it;var at=_.left-c,st=_.top-d;if(at<b.left||st<b.top||at+_.width>b.right||st+_.height>b.bottom)c=nt,d=rt;else{let ot=h-c,dt=g-d;i.style.transform="translate("+ot+"px,"+dt+"px)"}}}};const stringToHTML=i=>{var e=function(){if(!window.DOMParser)return!1;var c=new DOMParser;try{c.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var a=new DOMParser,s=a.parseFromString(i,"text/html");return s.body}var o=document.createElement("div");return o.innerHTML=i,o};var CatalogDOM={_addUID:function(i){var e=this.uid?i+"-"+this.uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPcatalog"),i.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",i},_createShowCatalogPictoElement:function(){var i=this,e=document.createElement("button"),a=document.createElement("span");return e.appendChild(a),e.id=this._addUID("GPshowCatalogPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowCatalogPicto gpf-btn gpf-btn--secondary gpf-btn-icon gpf-btn-icon-catalog fr-btn fr-btn--secondary",e.setAttribute("aria-label","Catalogue de données"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(s){var o=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!o),i.onShowCatalogClick(s)}):e.attachEvent&&e.attachEvent("onclick",function(s){var o=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!o),i.onShowCatalogClick(s)}),e},_createCatalogPanelElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GPcatalogPanel"),i.className="GPpanel gpf-panel fr-modal",i},_createCatalogPanelDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createCatalogPanelContentDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__content fr-modal__content",i},_createCatalogPanelHeaderElement:function(){var i=document.createElement("div");return i.className="GPpanelHeader gpf-panel__header fr-modal__header",i},_createCatalogPanelTitleElement:function(i){var e=document.createElement("div");return e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=i,e},_createCatalogPanelCloseElement:function(){var i=this,e=document.createElement("button");e.id=this._addUID("GPcatalogPanelClose"),e.className="GPpanelClose GPcatalogPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(i._addUID("GPshowCatalogPicto")).click(),i.onCloseCatalogClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowCatalogPicto")).click(),i.onCloseCatalogClick()});var a=document.createElement("span");return a.className="GPelementHidden gpf-visible",a.innerText="Fermer",e.appendChild(a),e},_createCatalogContentDivElement:function(){var i=stringToHTML('<div class="catalog-container-content" style="padding:10px"></div>');return i.firstChild},_createCatalogContentTitleElement:function(i){var e=stringToHTML(`
        <!-- titre -->
        <div class="catalog-container-title">
            <div class="fr-title">
                <h5 style="margin:unset">${i}</h5>
            </div>
        </div>
        `);return e.firstChild},_createCatalogContentSearchElement:function(){var i=`
        <!-- barre de recherche -->
        <!-- https://www.systeme-de-design.gouv.fr/composants-et-modeles/composants/barre-de-recherche -->
        <div class="catalog-container-search" style="padding-top:10px;padding-bottom:20px">
            <div class="fr-search-bar" id="header-search" role="search">
                <label class="fr-label" for="search-input">
                    Recherche
                </label>
                <input class="fr-input" placeholder="Rechercher une donnée" type="search" id="search-input" name="search-input" incremental>
                <button id="search-button" class="fr-btn" title="Rechercher">
                    Rechercher
                </button>
            </div>
        </div>
        `,e=stringToHTML(i);const a=e.attachShadow({mode:"open"});a.innerHTML=i.trim();var s=a.getElementById("search-button");s&&s.addEventListener("click",()=>{this.onSearchCatalogButtonClick()});var o=a.getElementById("search-input");return o&&o.addEventListener("search",()=>{this.onSearchCatalogInputChange()}),a},_createCatalogWaitingElement:function(){var i=document.createElement("div");i.id=this._addUID("GPcatalogCalcWaitingContainer"),i.className="GPwaitingContainerHidden gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",i.appendChild(e),i},_createCatalogContentCategoriesTabs:function(i){var e="",a=(tt,it,nt,rt)=>{var at="GPtabButton fr-tabs__tab",st="false",ot=-1;return rt&&(at="GPtabButton GPtabButtonActive fr-tabs__tab",st="true",ot=0),`
            <li class="GPtabList" role="presentation">
                <button id="tabbutton-${tt}_${it}" class="${at}" tabindex="${ot}" role="tabbutton" aria-selected="${st}" aria-controls="tabpanel-${tt}-panel_${it}">${nt}</button>
            </li>
            `},s="",o=tt=>{var it=tt.default?"checked":"";return`
            <!-- sous categorie -->
            <div class="fr-fieldset__element fr-fieldset__element--inline">
                <div class="fr-radio-group fr-radio-group--sm">
                    <input type="radio" id="radio-inline_${tt.id}" name="radio-inline" ${it} aria-controls="tabcontent-${tt.id}">
                    <label class="fr-label" for="radio-inline_${tt.id}">
                        ${tt.title}
                    </label>
                </div>
            </div>
            `},c=(tt,it)=>{var nt="";for(let at=0;at<it.length;at++){const st=it[at];s+=o(st);var rt="";st.default||(rt="GPelementHidden gpf-hidden"),nt+=`<div class="tabcontent ${rt}" role="tabpanel-section" id="tabcontent-${st.id}"></div>`}return`
            <!-- sous categories -->
            <fieldset class="fr-fieldset" id="radio-inline_${tt}" aria-labelledby="radio-inline-legend radio-inline-messages">
                ${s}
                <div class="fr-messages-group" id="radio-inline-messages" aria-live="assertive"></div>
            </fieldset>
            ${nt}
            `},d="",h=(tt,it,nt,rt)=>{var at="GPtabContent fr-tabs__panel",st=-1;nt&&(at="GPtabContent GPtabContentSelected fr-tabs__panel fr-tabs__panel--selected",st=0);var ot='<div class="tabcontent"></div>';return rt&&(ot=c(it,rt)),`
            <!-- panneaux -->
            <div id="tabpanel-${tt}-panel_${it}" class="${at}" role="tabpanel" aria-labelledby="tabbutton-${tt}_${it}" tabindex="${st}" style="max-height: 250px;overflow-y: auto;">
                ${ot}
            </div>
            `};for(let tt=0;tt<i.length;tt++){const it=i[tt];e+=a(tt,it.id,it.title,it.default),d+=h(tt,it.id,it.default,it.items)}var g=`
        <!-- onglets -->
        <div class="catalog-container-tabs">
            <div class="GPtabs fr-tabs">
                <ul class="GPtabsList fr-tabs__list" role="tablist" aria-label="[A modifier | nom du système d'onglet]">
                    ${e}
                </ul>
                ${d}
            </div>
        </div>
        `,_=stringToHTML(g.trim());const b=_.attachShadow({mode:"open"});b.innerHTML=g.trim();var j=b.querySelectorAll('[role="tabpanel-section"]'),$=b.querySelectorAll('[name="radio-inline"]');$&&$.forEach(tt=>{tt.addEventListener("change",it=>{for(let rt=0;rt<j.length;rt++){const at=j[rt];at.classList.add("gpf-hidden"),at.classList.add("GPelementHidden")}var nt=document.getElementById(it.target.getAttribute("aria-controls"));nt.classList.remove("gpf-hidden"),nt.classList.remove("GPelementHidden")})});var _e=b.querySelectorAll('[role="tabpanel"]'),et=b.querySelectorAll('[role="tabbutton"]');return et&&et.forEach(tt=>{tt.addEventListener("click",it=>{for(let rt=0;rt<et.length;rt++){const at=et[rt];at.setAttribute("tabindex",-1),at.ariaSelected=!1,at.classList.remove("GPtabButtonActive")}it.target.setAttribute("tabindex",0),it.target.ariaSelected=!0,it.target.classList.add("GPtabButtonActive");for(let rt=0;rt<_e.length;rt++){const at=_e[rt];at.setAttribute("tabindex",-1),at.classList.remove("fr-tabs__panel--selected"),at.classList.remove("GPtabContentSelected"),at.classList.add("gpf-hidden"),at.classList.add("GPelementHidden")}var nt=document.getElementById(it.target.getAttribute("aria-controls"));nt.setAttribute("tabindex",0),nt.classList.add("fr-tabs__panel--selected"),nt.classList.add("GPtabContentSelected"),nt.classList.remove("gpf-hidden"),nt.classList.remove("GPelementHidden"),this.onSelectCatalogTabClick(it)})}),b},_createCatalogContentCategoryTabContent:function(i,e){var a=Object.values(e),s="",o=(at,st,ot,dt,ut)=>`
            <div class="fr-fieldset__element" id="fieldset-${ut}_${st}-${dt}">
                <div class="fr-checkbox-group">
                    <input
                        name="checkboxes-${ut}"
                        id="checkboxes-${ut}-${at}_${st}-${dt}"
                        type="checkbox"
                        data-layer="${st}:${dt}"
                        aria-describedby="checkboxes-messages-${ut}-${at}_${st}-${dt}">
                    <label class="GPlabelActive fr-label" for="checkboxes-${ut}-${at}_${st}-${dt}" title="${ot}">
                        ${ot} (${dt})
                    </label>
                    <div class="fr-messages-group" id="checkboxes-messages-${ut}-${at}_${st}-${dt}" aria-live="assertive"></div>
                </div>
            </div>
            `,c=(at,st,ot,dt,ut)=>`
            <!-- section -->
            <section class="fr-accordion" style="width:100%;">
                <h3 class="fr-accordion__title">
                    <button class="GPcatalogButtonSection fr-accordion__btn" role="button-collapse-${st}" aria-expanded="false" aria-controls="accordion-${at}">
                        <span class="GPshowCatalogAdvancedTools gpf-hidden" role="button-icon-collapse-${st}"></span>${ot}
                    </button>
                </h3>
                <div class="fr-collapse GPelementHidden" id="accordion-${at}">
                    ${ut}
                </div>
            </section>
            `,d=i.section;d&&(a=a.sort((at,st)=>at[i.filter.field].localeCompare(st[i.filter.field])));var h={};for(let at=0;at<a.length;at++){const st=a[at];if(d){var g=st[i.filter.field];g&&(h.hasOwnProperty(g)||(h[g]=""),h[g]+=o(at,st.name,st.title,st.service,i.id))}else s+=o(at,st.name,st.title,st.service,i.id)}if(d){for(const at in h)if(Object.prototype.hasOwnProperty.call(h,at)){const st=h[at];var _=[...st.matchAll(/fr-fieldset__element/g)].length,b=Math.abs(Array.from(at).reduce((ot,dt)=>Math.imul(31,ot)+dt.charCodeAt(0)|0,0));s+=c(b,i.id,at,_,st)}}var j=`
            <!-- liste de couches -->
            <fieldset class="fr-fieldset" id="checkboxes-${i.id}" aria-labelledby="checkboxes-legend checkboxes-messages">
                ${s}
            </fieldset>
        `,$=stringToHTML(j);const _e=$.attachShadow({mode:"open"});_e.innerHTML=j.trim();var et=`checkboxes-${i.id}`,tt=_e.querySelectorAll('[name="'+et+'"]');tt&&tt.forEach(at=>{at.addEventListener("click",st=>{this.onSelectCatalogEntryClick(st)})});var it=`button-collapse-${i.id}`,nt=_e.querySelectorAll('[role="'+it+'"]');nt&&nt.forEach(at=>{at.addEventListener("click",st=>{st.target.ariaExpanded=st.target.ariaExpanded!=="true";var ot=document.getElementById(st.target.getAttribute("aria-controls"));ot&&(st.target.ariaExpanded==="true"?(ot.classList.add("fr-collapse--expanded"),ot.classList.remove("GPelementHidden")):(ot.classList.remove("fr-collapse--expanded"),ot.classList.add("GPelementHidden")))},!1)}),`${i.id}`;var rt=_e.querySelectorAll('[role="'+it+'"]');return rt&&rt.forEach(at=>{at.addEventListener("click",st=>{st.target.parentElement.click()})}),_e}},logger=LoggerByDefault$1.getLogger("widget"),Catalog=class xa extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof xa))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this.showWaiting(),this.initLayersList().then(a=>{logger.trace(this,a),this.hideWaiting(),this.dispatchEvent({type:"catalog:loaded",data:a})}).catch(a=>{this.hideWaiting(),logger.error(a)}),this}setMap(e){e?(this.draggable&&Draggable.dragElement(this.panelCatalogContainer,this.panelCatalogHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonCatalogShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):this.auto&&this.removeEventsListeners(),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getContainer(){return this.container}initialize(e){this.uid=SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,titlePrimary:"Gérer vos couches de données",titleSecondary:"",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Données",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.eventsListeners=[],this.buttonCatalogShow=null,this.panelCatalogContainer=null,this.panelCatalogHeaderContainer=null,this.buttonCatalogClose=null,this.contentCatalogContainer=null,this.waitingContainer=null,this.layersList=[],this.categories=this.options.categories.map(a=>{var s=a.items;return a.items&&(s=a.items.map(o=>({title:o.title,id:o.id||Math.abs(Array.from(o.title).reduce((c,d)=>Math.imul(31,c)+d.charCodeAt(0)|0,0)),section:o.hasOwnProperty("section")?o.section:!1,default:o.hasOwnProperty("default")?o.default:!1,filter:o.filter||null}))),{title:a.title,id:a.id||Math.abs(Array.from(a.title).reduce((o,c)=>Math.imul(31,o)+c.charCodeAt(0)|0,0)),default:a.hasOwnProperty("default")?a.default:!1,filter:a.filter||null,items:s||null}}),this.categoryId=(()=>{var a=this.categories.findIndex(s=>s.default);return a===-1&&(a=0,this.categories[a].default=!0),this.categories[a].id})(),this.layersListOnMap={}}initContainer(){var e=this._createMainContainerElement(),a=this.buttonCatalogShow=this._createShowCatalogPictoElement();e.appendChild(a);var s=this.panelCatalogContainer=this._createCatalogPanelElement(),o=this._createCatalogPanelDivElement();s.appendChild(o);var c=this.panelCatalogHeaderContainer=this._createCatalogPanelHeaderElement(),d=this._createCatalogPanelTitleElement(this.options.titlePrimary);c.appendChild(d);var h=this.buttonCatalogClose=this._createCatalogPanelCloseElement();c.appendChild(h),o.appendChild(c);var g=this._createCatalogPanelContentDivElement(),_=this.contentCatalogContainer=this._createCatalogContentDivElement();_.appendChild(this._createCatalogContentTitleElement(this.options.titleSecondary)),this.options.search.display&&_.appendChild(this._createCatalogContentSearchElement());var b=this.waitingContainer=this._createCatalogWaitingElement();return _.appendChild(b),g.appendChild(_),o.appendChild(g),e.appendChild(s),logger.log(e),e}async initLayersList(){var e=null,a=this;const s=_=>{var b=a.contentCatalogContainer,j=a._createCatalogContentCategoriesTabs(this.categories);b.appendChild(j);var $=[];a.categories.forEach(tt=>{if(tt.items)for(let it=0;it<tt.items.length;it++){const nt=tt.items[it];$.push(nt)}else $.push(tt)});var _e=b.querySelectorAll(".tabcontent");for(let tt=0;tt<_e.length;tt++){const it=_e[tt];var et=o($[tt],_);it.appendChild(a._createCatalogContentCategoryTabContent($[tt],et))}},o=(_,b)=>{var j=b,$=_.filter;if($){j={};for(const et in b)if(Object.prototype.hasOwnProperty.call(b,et)){const tt=b[et];if(tt[$.field]){var _e=Array.isArray($.value)?$.value.includes(tt[$.field].toString()):$.value==="*"||tt[$.field].toString()===$.value;_e&&(j[et]=tt,this.layersList[et].categories.push(_.id))}}}return j},c=(_,b)=>b;if(this.options.configuration.data){e=this.options.configuration.data||{},Config$1.isConfigLoaded()&&Helper.mergeParams(e,Config$1.configuration);for(const _ in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,_)){const b=e.layers[_];var d=b.serviceParams.id.split(":").slice(-1)[0];b.service=d,b.categories=[]}var h=c(this.options.layerFilter,e.layers);return this.layersList=h,s(h),new Promise((_,b)=>{_(e)})}if(this.options.configuration.urls){var g=[];for(let _=0;_<this.options.configuration.urls.length;_++){const b=this.options.configuration.urls[_],j=function(){return fetch(b,{}).then(function($){if($.ok)return $.json().then(function(et){return et}).catch(et=>{logger.warn("fetch json exception :",et)});var _e=new Error("HTTP status code: "+$.status);throw _e}).catch($=>new Promise((_e,et)=>{logger.error("fetch json exception :",$),et($)}))};g.push(j())}try{const _=await Promise.all(g);e=_[0];for(let j=1;j<_.length;j++){const $=_[j];Helper.mergeParams(e,$)}Config$1.isConfigLoaded()&&Helper.mergeParams(e,Config$1.configuration);for(const j in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,j)){const $=e.layers[j];var d=$.serviceParams.id.split(":").slice(-1)[0];$.service=d,$.categories=[]}var h=c(this.options.layerFilter,e.layers);return this.layersList=h,s(h),await new Promise((j,$)=>{j(e)})}catch(_){return await new Promise((b,j)=>{j(_)})}}}addEventsListeners(e){var a=this;this.eventsListeners["map:add"]=function(s){logger.trace(s);var o=s.element.name,c=s.element.service;a.layersListOnMap[o+":"+c]=s.element;var d=document.querySelectorAll(`input[data-layer="${o}:${c}"]`);d&&d.forEach(h=>{h.checked=!0})},e.getLayers().on("add",this.eventsListeners["map:add"]),this.eventsListeners["map:remove"]=function(s){logger.trace(s);var o=s.element.name,c=s.element.service;delete a.layersListOnMap[o+":"+c];var d=document.querySelectorAll(`input[data-layer="${o}:${c}"]`);d&&d.forEach(h=>{h.checked=!1})},e.getLayers().on("remove",this.eventsListeners["map:remove"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["map:add"]),delete this.eventsListeners["map:add"],e.getLayers().un("remove",this.eventsListeners["map:remove"]),delete this.eventsListeners["map:remove"]}addLayer(e,a){var s=null;switch(a){case"WMS":s=new LayerWMS({layer:e});break;case"WMTS":s=new LayerWMTS({layer:e});break;case"TMS":s=new LayerMapBox({layer:e})}if(s){var o=this.getMap();o.addLayer(s),this.layersListOnMap[e+":"+a]=s}}removeLayer(e,a){var s=this.layersListOnMap[e+":"+a];if(s){var o=this.getMap();o.removeLayer(s),delete this.layersListOnMap[e+":"+a]}}hideWaiting(){this.waitingContainer.className="GPwaitingContainerHidden  gpf-waiting--hidden"}showWaiting(){this.waitingContainer.className="GPwaitingContainerVisible gpf-waiting--visible"}resetFilteredLayersList(){for(const e in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,e)){const a=this.layersList[e];a.hidden=!1,this.updateFilteredLayersListDOM(a.name,a.service,a.hidden)}}setFilteredLayersList(e){var a=this.options.search.criteria;for(const o in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,o)){const c=this.layersList[o];var s="";for(let d=0;d<a.length;d++){const h=a[d];c[h]&&(s+=c[h].toLowerCase())}c.hidden=!s.includes(e.toLowerCase()),this.updateFilteredLayersListDOM(c.name,c.service,c.hidden)}}updateFilteredLayersListDOM(e,a,s){var o=[];this.categories.forEach(d=>{if(d.items)for(let h=0;h<d.items.length;h++){const g=d.items[h];o.push(g.id)}else o.push(d.id)});for(let d=0;d<o.length;d++){const h=o[d];var c=document.getElementById(`fieldset-${h}_${e}-${a}`);c&&(s?(c.classList.add("gpf-hidden"),c.classList.add("GPelementHidden")):(c.classList.remove("gpf-hidden"),c.classList.remove("GPelementHidden")))}}onShowCatalogClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger.trace(e)}onCloseCatalogClick(e){logger.trace(e)}onSelectCatalogTabClick(e){logger.trace(e);var a=e.target.id,s=a.split("_")[1];this.categoryId=s}onSelectCatalogEntryClick(e){logger.trace(e);var a=e.target.id.split("_")[1],s=a.split("-")[0],o=a.split("-")[1],c={};e.target.checked?(this.options.addToMap&&this.addLayer(s,o),this.dispatchEvent({type:"catalog:layer:add",name:s,service:o,layer:c})):(this.options.addToMap&&this.removeLayer(s,o),this.dispatchEvent({type:"catalog:layer:remove",name:s,service:o,layer:c}))}onSearchCatalogButtonClick(){var e=document.getElementById("search-input").value;this.setFilteredLayersList(e)}onSearchCatalogInputChange(){this.onSearchCatalogButtonClick()}};Object.assign(Catalog.prototype,CatalogDOM);Object.assign(Catalog.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Catalog=Catalog);const UNITS_PROP="units",LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28;class ScaleLine extends Control{constructor(e){e=e||{};const a=document.createElement("div");a.style.pointerEvents="none",super({element:a,render:e.render,target:e.target}),this.on,this.once,this.un;const s=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=s+"-inner",this.element.className=s+" "+CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(UNITS_PROP,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(UNITS_PROP)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(UNITS_PROP,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const a=e.center,s=e.projection,o=this.getUnits(),c=o=="degrees"?"degrees":"m";let d=getPointResolution(s,e.resolution,a,c);const h=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,g=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI:void 0;let _=h*d,b="";if(o=="degrees"){const at=METERS_PER_UNIT$1.degrees;_*=at,_<at/60?(b="″",d*=3600):_<at?(b="′",d*=60):b="°"}else if(o=="imperial")_<.9144?(b="in",d/=.0254):_<1609.344?(b="ft",d/=.3048):(b="mi",d/=1609.344);else if(o=="nautical")d/=1852,b="NM";else if(o=="metric")_<.001?(b="μm",d*=1e6):_<1?(b="mm",d*=1e3):_<1e3?b="m":(b="km",d/=1e3);else if(o=="us")_<.9144?(b="in",d*=39.37):_<1609.344?(b="ft",d/=.30480061):(b="mi",d/=1609.3472);else throw new Error("Invalid units");let j=3*Math.floor(Math.log(h*d)/Math.log(10)),$,_e,et,tt,it,nt;for(;;){et=Math.floor(j/3);const at=Math.pow(10,et);if($=LEADING_DIGITS[(j%3+3)%3]*at,_e=Math.round($/d),isNaN(_e)){this.element.style.display="none",this.renderedVisible_=!1;return}if(g!==void 0&&_e>=g){$=tt,_e=it,et=nt;break}else if(_e>=h)break;tt=$,it=_e,nt=et,++j}const rt=this.scaleBar_?this.createScaleBar(_e,$,b):$.toFixed(et<0?-et:0)+" "+b;this.renderedHTML_!=rt&&(this.innerElement_.innerHTML=rt,this.renderedHTML_=rt),this.renderedWidth_!=_e&&(this.innerElement_.style.width=_e+"px",this.renderedWidth_=_e),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,a,s){const o=this.getScaleForResolution(),c=o<1?Math.round(1/o).toLocaleString()+" : 1":"1 : "+Math.round(o).toLocaleString(),d=this.scaleBarSteps_,h=e/d,g=[this.createMarker("absolute")];for(let b=0;b<d;++b){const j=b%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";g.push(`<div><div class="ol-scale-singlebar ${j}" style="width: ${h}px;"></div>`+this.createMarker("relative")+(b%2===0||d===2?this.createStepText(b,e,!1,a,s):"")+"</div>")}return g.push(this.createStepText(d,e,!0,a,s)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+c+"</div>":"")+g.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,a,s,o,c){const h=(e===0?0:Math.round(o/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+c),g=e===0?-3:a/this.scaleBarSteps_*-1,_=e===0?0:a/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${g}px;text-align: ${e===0?"left":"center"};min-width: ${_}px;left: ${s?a+"px":"unset"};">`+h+"</div>"}getScaleForResolution(){const e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),a=this.dpi_||DEFAULT_DPI,s=1e3/25.4;return e*s*a}render(e){const a=e.frameState;a?this.viewState_=a.viewState:this.viewState_=null,this.updateElement_()}}const geometry={type:"MultiPolygon",coordinates:[[[[5.5571875,47.94089844],[5.5571875,47.9815625],[5.478125,47.9815625],[5.478125,48.02222656],[5.478125,48.06289063],[5.478125,48.10355469],[5.478125,48.14421875],[5.5571875,48.14421875],[5.5571875,48.18488281],[5.5571875,48.22554687],[5.5571875,48.26621094],[5.63625,48.26621094],[5.63625,48.306875],[5.63625,48.34753906],[5.63625,48.38820312],[5.63625,48.42886719],[5.63625,48.46953125],[5.63625,48.51019531],[5.63625,48.55085938],[5.63625,48.59152344],[5.63625,48.6321875],[5.63625,48.67285156],[5.5571875,48.67285156],[5.5571875,48.71351562],[5.5571875,48.75417969],[5.478125,48.75417969],[5.478125,48.71351562],[5.478125,48.67285156],[5.3990625,48.67285156],[5.3990625,48.71351562],[5.3990625,48.75417969],[5.3990625,48.79484375],[5.32,48.79484375],[5.32,48.83550781],[5.32,48.87617187],[5.2409375,48.87617187],[5.2409375,48.91683594],[5.161875,48.91683594],[5.161875,48.87617187],[5.0828125,48.87617187],[5.00375,48.87617187],[5.00375,48.91683594],[5.00375,48.9575],[4.9246875,48.9575],[4.9246875,48.99816406],[4.9246875,49.03882813],[4.845625,49.03882813],[4.845625,49.07949219],[4.845625,49.12015625],[4.7665625,49.12015625],[4.6875,49.12015625],[4.6875,49.07949219],[4.6084375,49.07949219],[4.529375,49.07949219],[4.529375,49.12015625],[4.4503125,49.12015625],[4.4503125,49.16082031],[4.37125,49.16082031],[4.37125,49.20148437],[4.37125,49.24214844],[4.37125,49.2828125],[4.2921875,49.2828125],[4.2921875,49.24214844],[4.213125,49.24214844],[4.213125,49.2828125],[4.213125,49.32347656],[4.1340625,49.32347656],[4.1340625,49.36414062],[4.055,49.36414062],[3.9759375,49.36414062],[3.896875,49.36414062],[3.8178125,49.36414062],[3.73875,49.36414062],[3.6596875,49.36414062],[3.580625,49.36414062],[3.5015625,49.36414062],[3.4225,49.36414062],[3.3434375,49.36414062],[3.264375,49.36414062],[3.1853125,49.36414062],[3.10625,49.36414062],[3.0271875,49.36414062],[3.0271875,49.40480469],[2.948125,49.40480469],[2.8690625,49.40480469],[2.8690625,49.36414062],[2.79,49.36414062],[2.79,49.32347656],[2.79,49.2828125],[2.7109375,49.2828125],[2.631875,49.2828125],[2.5528125,49.2828125],[2.5528125,49.24214844],[2.47375,49.24214844],[2.47375,49.20148437],[2.3946875,49.20148437],[2.3946875,49.16082031],[2.3946875,49.12015625],[2.315625,49.12015625],[2.2365625,49.12015625],[2.2365625,49.07949219],[2.2365625,49.03882813],[2.1575,49.03882813],[2.1575,48.99816406],[2.0784375,48.99816406],[2.0784375,48.9575],[1.999375,48.9575],[1.999375,48.99816406],[1.999375,49.03882813],[1.999375,49.07949219],[2.0784375,49.07949219],[2.1575,49.07949219],[2.1575,49.12015625],[2.1575,49.16082031],[2.2365625,49.16082031],[2.315625,49.16082031],[2.315625,49.20148437],[2.315625,49.24214844],[2.3946875,49.24214844],[2.3946875,49.2828125],[2.47375,49.2828125],[2.47375,49.32347656],[2.5528125,49.32347656],[2.5528125,49.36414062],[2.631875,49.36414062],[2.7109375,49.36414062],[2.7109375,49.40480469],[2.79,49.40480469],[2.79,49.44546875],[2.79,49.48613281],[2.8690625,49.48613281],[2.8690625,49.52679688],[2.948125,49.52679688],[2.948125,49.56746094],[3.0271875,49.56746094],[3.0271875,49.608125],[3.10625,49.608125],[3.1853125,49.608125],[3.1853125,49.64878906],[3.264375,49.64878906],[3.3434375,49.64878906],[3.3434375,49.68945313],[3.3434375,49.73011719],[3.3434375,49.77078125],[3.3434375,49.81144531],[3.4225,49.81144531],[3.4225,49.85210937],[3.4225,49.89277344],[3.5015625,49.89277344],[3.5015625,49.9334375],[3.580625,49.9334375],[3.6596875,49.9334375],[3.73875,49.9334375],[3.8178125,49.9334375],[3.896875,49.9334375],[3.9759375,49.9334375],[3.9759375,49.97410156],[4.055,49.97410156],[4.055,50.01476563],[4.1340625,50.01476563],[4.1340625,50.05542969],[4.213125,50.05542969],[4.2921875,50.05542969],[4.37125,50.05542969],[4.37125,50.01476563],[4.4503125,50.01476563],[4.4503125,50.05542969],[4.529375,50.05542969],[4.529375,50.09609375],[4.6084375,50.09609375],[4.6084375,50.13675781],[4.6084375,50.17742188],[4.6875,50.17742188],[4.6875,50.21808594],[4.7665625,50.21808594],[4.845625,50.21808594],[4.845625,50.25875],[4.9246875,50.25875],[4.9246875,50.21808594],[5.00375,50.21808594],[5.00375,50.17742188],[5.00375,50.13675781],[5.00375,50.09609375],[5.00375,50.05542969],[4.9246875,50.05542969],[4.9246875,50.01476563],[5.00375,50.01476563],[5.00375,49.97410156],[5.00375,49.9334375],[5.00375,49.89277344],[5.0828125,49.89277344],[5.0828125,49.85210937],[5.161875,49.85210937],[5.161875,49.81144531],[5.161875,49.77078125],[5.2409375,49.77078125],[5.32,49.77078125],[5.3990625,49.77078125],[5.3990625,49.73011719],[5.3990625,49.68945313],[5.3990625,49.64878906],[5.478125,49.64878906],[5.5571875,49.64878906],[5.5571875,49.608125],[5.478125,49.608125],[5.478125,49.56746094],[5.478125,49.52679688],[5.5571875,49.52679688],[5.5571875,49.48613281],[5.63625,49.48613281],[5.63625,49.52679688],[5.7153125,49.52679688],[5.7153125,49.56746094],[5.794375,49.56746094],[5.8734375,49.56746094],[5.8734375,49.52679688],[5.794375,49.52679688],[5.794375,49.48613281],[5.7153125,49.48613281],[5.7153125,49.44546875],[5.63625,49.44546875],[5.63625,49.40480469],[5.5571875,49.40480469],[5.5571875,49.36414062],[5.63625,49.36414062],[5.63625,49.32347656],[5.63625,49.2828125],[5.5571875,49.2828125],[5.5571875,49.32347656],[5.478125,49.32347656],[5.478125,49.36414062],[5.3990625,49.36414062],[5.32,49.36414062],[5.32,49.32347656],[5.32,49.2828125],[5.3990625,49.2828125],[5.3990625,49.24214844],[5.3990625,49.20148437],[5.3990625,49.16082031],[5.478125,49.16082031],[5.478125,49.12015625],[5.478125,49.07949219],[5.478125,49.03882813],[5.478125,48.99816406],[5.5571875,48.99816406],[5.5571875,48.9575],[5.5571875,48.91683594],[5.5571875,48.87617187],[5.5571875,48.83550781],[5.63625,48.83550781],[5.63625,48.79484375],[5.63625,48.75417969],[5.7153125,48.75417969],[5.7153125,48.71351562],[5.794375,48.71351562],[5.794375,48.67285156],[5.794375,48.6321875],[5.7153125,48.6321875],[5.7153125,48.59152344],[5.7153125,48.55085938],[5.794375,48.55085938],[5.794375,48.51019531],[5.794375,48.46953125],[5.7153125,48.46953125],[5.7153125,48.42886719],[5.7153125,48.38820312],[5.7153125,48.34753906],[5.7153125,48.306875],[5.7153125,48.26621094],[5.7153125,48.22554687],[5.63625,48.22554687],[5.63625,48.18488281],[5.63625,48.14421875],[5.63625,48.10355469],[5.5571875,48.10355469],[5.5571875,48.06289063],[5.5571875,48.02222656],[5.63625,48.02222656],[5.63625,47.9815625],[5.63625,47.94089844],[5.5571875,47.94089844]],[[5.5571875,49.40480469],[5.5571875,49.44546875],[5.478125,49.44546875],[5.478125,49.48613281],[5.3990625,49.48613281],[5.3990625,49.44546875],[5.3990625,49.40480469],[5.478125,49.40480469],[5.5571875,49.40480469]],[[5.32,49.36414062],[5.32,49.40480469],[5.32,49.44546875],[5.32,49.48613281],[5.2409375,49.48613281],[5.2409375,49.44546875],[5.2409375,49.40480469],[5.2409375,49.36414062],[5.32,49.36414062]],[[4.37125,49.36414062],[4.37125,49.32347656],[4.4503125,49.32347656],[4.529375,49.32347656],[4.529375,49.36414062],[4.4503125,49.36414062],[4.37125,49.36414062]],[[4.529375,49.32347656],[4.529375,49.2828125],[4.6084375,49.2828125],[4.6084375,49.32347656],[4.529375,49.32347656]],[[2.948125,49.48613281],[2.948125,49.44546875],[3.0271875,49.44546875],[3.10625,49.44546875],[3.1853125,49.44546875],[3.1853125,49.40480469],[3.264375,49.40480469],[3.3434375,49.40480469],[3.4225,49.40480469],[3.4225,49.44546875],[3.5015625,49.44546875],[3.580625,49.44546875],[3.580625,49.40480469],[3.6596875,49.40480469],[3.73875,49.40480469],[3.8178125,49.40480469],[3.8178125,49.44546875],[3.896875,49.44546875],[3.9759375,49.44546875],[3.9759375,49.48613281],[4.055,49.48613281],[4.055,49.52679688],[3.9759375,49.52679688],[3.9759375,49.56746094],[3.9759375,49.608125],[3.896875,49.608125],[3.896875,49.56746094],[3.8178125,49.56746094],[3.8178125,49.608125],[3.8178125,49.64878906],[3.896875,49.64878906],[3.9759375,49.64878906],[3.9759375,49.68945313],[3.896875,49.68945313],[3.8178125,49.68945313],[3.73875,49.68945313],[3.73875,49.64878906],[3.6596875,49.64878906],[3.580625,49.64878906],[3.5015625,49.64878906],[3.4225,49.64878906],[3.4225,49.608125],[3.3434375,49.608125],[3.3434375,49.56746094],[3.264375,49.56746094],[3.1853125,49.56746094],[3.10625,49.56746094],[3.10625,49.52679688],[3.0271875,49.52679688],[3.0271875,49.48613281],[2.948125,49.48613281]],[[4.2921875,49.48613281],[4.2921875,49.44546875],[4.37125,49.44546875],[4.37125,49.48613281],[4.2921875,49.48613281]],[[5.161875,49.2828125],[5.161875,49.24214844],[5.161875,49.20148437],[5.161875,49.16082031],[5.161875,49.12015625],[5.161875,49.07949219],[5.161875,49.03882813],[5.2409375,49.03882813],[5.2409375,48.99816406],[5.2409375,48.9575],[5.32,48.9575],[5.32,48.91683594],[5.3990625,48.91683594],[5.3990625,48.87617187],[5.3990625,48.83550781],[5.478125,48.83550781],[5.478125,48.87617187],[5.478125,48.91683594],[5.478125,48.9575],[5.3990625,48.9575],[5.3990625,48.99816406],[5.3990625,49.03882813],[5.3990625,49.07949219],[5.3990625,49.12015625],[5.32,49.12015625],[5.32,49.16082031],[5.32,49.20148437],[5.2409375,49.20148437],[5.2409375,49.24214844],[5.2409375,49.2828125],[5.2409375,49.32347656],[5.161875,49.32347656],[5.161875,49.2828125]],[[5.0828125,48.9575],[5.161875,48.9575],[5.161875,48.99816406],[5.0828125,48.99816406],[5.0828125,48.9575]],[[4.529375,49.16082031],[4.6084375,49.16082031],[4.6084375,49.20148437],[4.529375,49.20148437],[4.529375,49.16082031]],[[4.213125,49.40480469],[4.213125,49.36414062],[4.2921875,49.36414062],[4.2921875,49.40480469],[4.213125,49.40480469]],[[3.4225,49.77078125],[3.4225,49.73011719],[3.5015625,49.73011719],[3.580625,49.73011719],[3.6596875,49.73011719],[3.73875,49.73011719],[3.73875,49.77078125],[3.73875,49.81144531],[3.8178125,49.81144531],[3.896875,49.81144531],[3.9759375,49.81144531],[4.055,49.81144531],[4.055,49.85210937],[3.9759375,49.85210937],[3.896875,49.85210937],[3.896875,49.89277344],[3.8178125,49.89277344],[3.73875,49.89277344],[3.73875,49.85210937],[3.6596875,49.85210937],[3.580625,49.85210937],[3.5015625,49.85210937],[3.5015625,49.81144531],[3.5015625,49.77078125],[3.4225,49.77078125]],[[3.9759375,49.77078125],[3.896875,49.77078125],[3.896875,49.73011719],[3.9759375,49.73011719],[3.9759375,49.77078125]]]]},type="Feature",extent={geometry,type},default_background_layer="GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",center=[2.35,48.85],projection="EPSG:3857",zoom=10,zoom_levels={TOP:0,BOTTOM:18},olDefaults={default_background_layer,center,projection,zoom,zoom_levels};function getAllTextContent(i,e){return getAllTextContent_(i,e,[]).join("")}function getAllTextContent_(i,e,a){if(i.nodeType==Node.CDATA_SECTION_NODE||i.nodeType==Node.TEXT_NODE)a.push(i.nodeValue);else{let s;for(s=i.firstChild;s;s=s.nextSibling)getAllTextContent_(s,e,a)}return a}function isDocument(i){return"documentElement"in i}function parse(i){return new DOMParser().parseFromString(i,"application/xml")}function makeArrayPusher(i,e){return function(a,s){const o=i.call(this,a,s);o!==void 0&&s[s.length-1].push(o)}}function makeObjectPropertyPusher(i,e,a){return function(s,o){const c=i.call(this,s,o);if(c!==void 0){const d=o[o.length-1],h=s.localName;let g;h in d?g=d[h]:(g=[],d[h]=g),g.push(c)}}}function makeObjectPropertySetter(i,e,a){return function(s,o){const c=i.call(this,s,o);if(c!==void 0){const d=o[o.length-1],h=s.localName;d[h]=c}}}function makeStructureNS(i,e,a){a=a!==void 0?a:{};let s,o;for(s=0,o=i.length;s<o;++s)a[i[s]]=e;return a}function parseNode(i,e,a,s){let o;for(o=e.firstElementChild;o;o=o.nextElementSibling){const c=i[o.namespaceURI];if(c!==void 0){const d=c[o.localName];d!==void 0&&d.call(s,o,a)}}}function pushParseAndPop(i,e,a,s,o){return s.push(i),parseNode(e,a,s,o),s.pop()}class XML{read(e){if(!e)return null;if(typeof e=="string"){const a=parse(e);return this.readFromDocument(a)}return isDocument(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let a=e.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.readFromNode(a);return null}readFromNode(e){abstract()}}const NAMESPACE_URI="http://www.w3.org/1999/xlink";function readHref(i){return i.getAttributeNS(NAMESPACE_URI,"href")}function readDecimal(i){const e=getAllTextContent(i,!1);return readDecimalString(e)}function readDecimalString(i){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(e)return parseFloat(e[1])}function readPositiveInteger(i){const e=getAllTextContent(i,!1);return readNonNegativeIntegerString(e)}function readNonNegativeIntegerString(i){const e=/^\s*(\d+)\s*$/.exec(i);if(e)return parseInt(e[1],10)}function readString(i){return getAllTextContent(i,!1).trim()}const NAMESPACE_URIS$1=[null,"http://www.opengis.net/ows/1.1"],PARSERS$1=makeStructureNS(NAMESPACE_URIS$1,{ServiceIdentification:makeObjectPropertySetter(readServiceIdentification),ServiceProvider:makeObjectPropertySetter(readServiceProvider),OperationsMetadata:makeObjectPropertySetter(readOperationsMetadata)});class OWS extends XML{constructor(){super()}readFromNode(e){const a=pushParseAndPop({},PARSERS$1,e,[]);return a||null}}const ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DeliveryPoint:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),AdministrativeArea:makeObjectPropertySetter(readString),PostalCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString),ElectronicMailAddress:makeObjectPropertySetter(readString)}),ALLOWED_VALUES_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Value:makeObjectPropertyPusher(readValue)}),CONSTRAINT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{AllowedValues:makeObjectPropertySetter(readAllowedValues)}),CONTACT_INFO_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Phone:makeObjectPropertySetter(readPhone),Address:makeObjectPropertySetter(readAddress)}),DCP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{HTTP:makeObjectPropertySetter(readHttp)}),HTTP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Get:makeObjectPropertyPusher(readGet),Post:void 0}),OPERATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DCP:makeObjectPropertySetter(readDcp)}),OPERATIONS_METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Operation:readOperation}),PHONE_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Voice:makeObjectPropertySetter(readString),Facsimile:makeObjectPropertySetter(readString)}),REQUEST_METHOD_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Constraint:makeObjectPropertyPusher(readConstraint)}),SERVICE_CONTACT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{IndividualName:makeObjectPropertySetter(readString),PositionName:makeObjectPropertySetter(readString),ContactInfo:makeObjectPropertySetter(readContactInfo)}),SERVICE_IDENTIFICATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Abstract:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),Fees:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),ServiceTypeVersion:makeObjectPropertySetter(readString),ServiceType:makeObjectPropertySetter(readString)}),SERVICE_PROVIDER_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{ProviderName:makeObjectPropertySetter(readString),ProviderSite:makeObjectPropertySetter(readHref),ServiceContact:makeObjectPropertySetter(readServiceContact)});function readAddress(i,e){return pushParseAndPop({},ADDRESS_PARSERS,i,e)}function readAllowedValues(i,e){return pushParseAndPop({},ALLOWED_VALUES_PARSERS,i,e)}function readConstraint(i,e){const a=i.getAttribute("name");if(a)return pushParseAndPop({name:a},CONSTRAINT_PARSERS,i,e)}function readContactInfo(i,e){return pushParseAndPop({},CONTACT_INFO_PARSERS,i,e)}function readDcp(i,e){return pushParseAndPop({},DCP_PARSERS,i,e)}function readGet(i,e){const a=readHref(i);if(a)return pushParseAndPop({href:a},REQUEST_METHOD_PARSERS,i,e)}function readHttp(i,e){return pushParseAndPop({},HTTP_PARSERS,i,e)}function readOperation(i,e){const a=i.getAttribute("name"),s=pushParseAndPop({},OPERATION_PARSERS,i,e);if(!s)return;const o=e[e.length-1];o[a]=s}function readOperationsMetadata(i,e){return pushParseAndPop({},OPERATIONS_METADATA_PARSERS,i,e)}function readPhone(i,e){return pushParseAndPop({},PHONE_PARSERS,i,e)}function readServiceIdentification(i,e){return pushParseAndPop({},SERVICE_IDENTIFICATION_PARSERS,i,e)}function readServiceContact(i,e){return pushParseAndPop({},SERVICE_CONTACT_PARSERS,i,e)}function readServiceProvider(i,e){return pushParseAndPop({},SERVICE_PROVIDER_PARSERS,i,e)}function readValue(i,e){return readString(i)}const NAMESPACE_URIS=[null,"http://www.opengis.net/wmts/1.0"],OWS_NAMESPACE_URIS=[null,"http://www.opengis.net/ows/1.1"],PARSERS=makeStructureNS(NAMESPACE_URIS,{Contents:makeObjectPropertySetter(readContents)});class WMTSCapabilities extends XML{constructor(){super(),this.owsParser_=new OWS}readFromNode(e){let a=e.getAttribute("version");a&&(a=a.trim());let s=this.owsParser_.readFromNode(e);return s?(s.version=a,s=pushParseAndPop(s,PARSERS,e,[]),s||null):null}}const CONTENTS_PARSERS=makeStructureNS(NAMESPACE_URIS,{Layer:makeObjectPropertyPusher(readLayer),TileMatrixSet:makeObjectPropertyPusher(readTileMatrixSet)}),LAYER_PARSERS=makeStructureNS(NAMESPACE_URIS,{Style:makeObjectPropertyPusher(readStyle),Format:makeObjectPropertyPusher(readString),TileMatrixSetLink:makeObjectPropertyPusher(readTileMatrixSetLink),Dimension:makeObjectPropertyPusher(readDimensions),ResourceURL:makeObjectPropertyPusher(readResourceUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),WGS84BoundingBox:makeObjectPropertySetter(readBoundingBox),Identifier:makeObjectPropertySetter(readString)})),STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS,{LegendURL:makeObjectPropertyPusher(readLegendUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString)})),TMS_LINKS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixSet:makeObjectPropertySetter(readString),TileMatrixSetLimits:makeObjectPropertySetter(readTileMatrixLimitsList)}),TMS_LIMITS_LIST_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixLimits:makeArrayPusher(readTileMatrixLimits)}),TMS_LIMITS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrix:makeObjectPropertySetter(readString),MinTileRow:makeObjectPropertySetter(readPositiveInteger),MaxTileRow:makeObjectPropertySetter(readPositiveInteger),MinTileCol:makeObjectPropertySetter(readPositiveInteger),MaxTileCol:makeObjectPropertySetter(readPositiveInteger)}),DIMENSION_PARSERS=makeStructureNS(NAMESPACE_URIS,{Default:makeObjectPropertySetter(readString),Value:makeObjectPropertyPusher(readString)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)})),WGS84_BBOX_READERS=makeStructureNS(OWS_NAMESPACE_URIS,{LowerCorner:makeArrayPusher(readCoordinates),UpperCorner:makeArrayPusher(readCoordinates)}),TMS_PARSERS=makeStructureNS(NAMESPACE_URIS,{WellKnownScaleSet:makeObjectPropertySetter(readString),TileMatrix:makeObjectPropertyPusher(readTileMatrix)},makeStructureNS(OWS_NAMESPACE_URIS,{SupportedCRS:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString),BoundingBox:makeObjectPropertySetter(readBoundingBox)})),TM_PARSERS=makeStructureNS(NAMESPACE_URIS,{TopLeftCorner:makeObjectPropertySetter(readCoordinates),ScaleDenominator:makeObjectPropertySetter(readDecimal),TileWidth:makeObjectPropertySetter(readPositiveInteger),TileHeight:makeObjectPropertySetter(readPositiveInteger),MatrixWidth:makeObjectPropertySetter(readPositiveInteger),MatrixHeight:makeObjectPropertySetter(readPositiveInteger)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)}));function readContents(i,e){return pushParseAndPop({},CONTENTS_PARSERS,i,e)}function readLayer(i,e){return pushParseAndPop({},LAYER_PARSERS,i,e)}function readTileMatrixSet(i,e){return pushParseAndPop({},TMS_PARSERS,i,e)}function readStyle(i,e){const a=pushParseAndPop({},STYLE_PARSERS,i,e);if(!a)return;const s=i.getAttribute("isDefault")==="true";return a.isDefault=s,a}function readTileMatrixSetLink(i,e){return pushParseAndPop({},TMS_LINKS_PARSERS,i,e)}function readDimensions(i,e){return pushParseAndPop({},DIMENSION_PARSERS,i,e)}function readResourceUrl(i,e){const a=i.getAttribute("format"),s=i.getAttribute("template"),o=i.getAttribute("resourceType"),c={};return a&&(c.format=a),s&&(c.template=s),o&&(c.resourceType=o),c}function readBoundingBox(i,e){const a=pushParseAndPop([],WGS84_BBOX_READERS,i,e);if(a.length==2)return boundingExtent(a)}function readLegendUrl(i,e){const a={};return a.format=i.getAttribute("format"),a.href=readHref(i),a}function readCoordinates(i,e){const a=readString(i).split(/\s+/);if(!a||a.length!=2)return;const s=+a[0],o=+a[1];if(!(isNaN(s)||isNaN(o)))return[s,o]}function readTileMatrix(i,e){return pushParseAndPop({},TM_PARSERS,i,e)}function readTileMatrixLimitsList(i,e){return pushParseAndPop([],TMS_LIMITS_LIST_PARSERS,i,e)}function readTileMatrixLimits(i,e){return pushParseAndPop({},TMS_LIMITS_PARSERS,i,e)}const useCapabilities=(i="cartes")=>useQuery({queryKey:["gpp_get_cap",i],queryFn:async()=>{const e=await fetch("https://data.geopf.fr/wmts?SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetCapabilities");if(!e.ok)throw new Error(`Bad response from server : ${e.status}`);const a=await e.text(),o=new WMTSCapabilities().read(a);if(!o)throw new Error("Reading capabilities failed");return o},staleTime:1/0}),ExtentMap=()=>{const i=reactExports.useRef(null),e=reactExports.useRef(),{data:a}=useCapabilities(),s=reactExports.useMemo(()=>{const c=new GeoJSON({dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).readFeatures(extent),d=new VectorSource({features:c});return new VectorLayer({source:d})},[]),o=reactExports.useMemo(()=>{if(!a)return;const c=optionsFromCapabilities(a,{layer:olDefaults.default_background_layer});if(!c)return;const d=new TileLayer;return d.setSource(new WMTS$1(c)),d},[a]);return reactExports.useEffect(()=>{if(!o||!s)return;const c=new LayerSwitcher({layers:[{layer:o,config:{title:"Plan IGN v2"}},{layer:s,config:{title:"Emprise"}}],options:{position:"top-right",collapsed:!0,panel:!0,counter:!0}}),d=new Catalog({collapsed:!0,draggable:!1,titlePrimary:"",titleSecondary:"Gérer vos couches de données",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Données",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]},position:"top-right"}),h=[c,new SearchEngine({collapsed:!0,displayAdvancedSearch:!1,apiKey:"essentiels",zoomTo:"auto"}),new ScaleLine,new GeoportalZoom({position:"top-left"}),new GeoportalFullScreen({position:"bottom-right"}),d];e.current=new Map$1({target:i.current,layers:[o,s],interactions:defaults$1(),controls:h,view:new View({projection:olDefaults.projection,center:fromLonLat(olDefaults.center),zoom:olDefaults.zoom})});const g=s.getSource();return g&&e.current.getView().fit(g.getExtent()),()=>{var _;return(_=e.current)==null?void 0:_.setTarget(void 0)}},[o,s]),jsxRuntimeExports.jsx("div",{id:"map-and-tools-container",style:{marginLeft:0,width:"inherit",height:"70vh",display:"flex"},children:jsxRuntimeExports.jsx("div",{ref:i,className:"map-view"})})},RouterRenderer=()=>{switch(useRoute().name){case"home":return"Accueil";case"map":return jsxRuntimeExports.jsx(ExtentMap,{});case"personal_data":return"Données personnelles";default:return"404"}},queryClient=new QueryClient,persister=createSyncStoragePersister({storage:window.localStorage});function App(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{brandTop:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["INTITULE",jsxRuntimeExports.jsx("br",{}),"OFFICIEL"]}),serviceTitle:"Nom du site / service",homeLinkProps:{...routes.home().link,title:"Accueil"},navigation:[{text:"Accueil",linkProps:routes.home().link},{text:"Cartes",linkProps:routes.map().link},{text:"Données personnelles",linkProps:routes.personal_data().link},{text:"Lien externe",linkProps:{href:"https://example.fr",target:"_blank"},isActive:!1}],quickAccessItems:[headerFooterDisplayItem]}),jsxRuntimeExports.jsx(ConsentBannerAndConsentManagement,{}),jsxRuntimeExports.jsx("main",{children:jsxRuntimeExports.jsx(RouteProvider,{children:jsxRuntimeExports.jsx("div",{className:fr.cx("fr-container"),children:jsxRuntimeExports.jsxs(PersistQueryClientProvider,{client:queryClient,persistOptions:{persister},children:[jsxRuntimeExports.jsx(ReactQueryDevtools2,{initialIsOpen:!1}),jsxRuntimeExports.jsx(RouterRenderer,{})]})})})}),jsxRuntimeExports.jsx(Footer,{accessibility:"fully compliant",contentDescription:`
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor 
                        incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, 
                        quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. 
                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore 
                        eu fugiat nulla pariatur. 
                    `,bottomItems:[jsxRuntimeExports.jsx(FooterPersonalDataPolicyItem,{}),jsxRuntimeExports.jsx(FooterConsentManagementItem,{}),headerFooterDisplayItem]})]})}startReactDsfr({defaultColorScheme:"system"});createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}))});export default ts();
